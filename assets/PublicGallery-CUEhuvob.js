import{c as H,s as M,j as e,C as R,y as K,z as X}from"./index-DjhxuEdm.js";import{f as Q,e as Z,b as a}from"./vendor-react-q0iRXJvs.js";import{L as O}from"./loader-circle-ifBj7eGI.js";import{T as ee}from"./tag-BqWwXv6C.js";import{P as V}from"./plus-cwodz0YV.js";import{S as G}from"./shopping-cart-C1DZC8BB.js";import"./vendor-supabase-DhDedaeW.js";const te=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],B=H("heart",te);const se=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],ae=H("layout-grid",se);function le(d,c,s){if(!c||!Array.isArray(c)||c.length===0)return{total:d*s,breakdown:[{qty:d,price:s,subtotal:d*s}],savings:0};const j=[...c].sort((o,x)=>o.min_qty-x.min_qty);let l=d,u=0;const i=[];for(const o of j){if(l<=0)break;const x=o.min_qty,f=o.max_qty||1/0,N=o.price_per_photo,p=f===1/0?l:f-x+1,v=Math.min(l,p);if(v>0){const g=v*N;u+=g,i.push({tier:`${x}-${f===1/0?"+":f}`,qty:v,price:N,subtotal:g}),l-=v}}if(l>0){const o=l*s;u+=o,i.push({tier:"standard",qty:l,price:s,subtotal:o})}const m=d*s,k=m-u;return{total:u,breakdown:i,savings:k,flatTotal:m}}function ue(){const{slug:d}=Q(),[c]=Z(),[s,j]=a.useState(null),[l,u]=a.useState([]),[i,m]=a.useState(new Set),[k,o]=a.useState(!0),[x,f]=a.useState(null),[N,p]=a.useState(!1),[v,g]=a.useState(!1),[D,A]=a.useState(null),[w,C]=a.useState(0),[z,E]=a.useState(null),I=c.get("cancelled");a.useEffect(()=>{const t=window.innerWidth<768,r=localStorage.getItem("gallery_tutorial_seen");t&&!r&&l.length>0&&C(1)},[l]),a.useEffect(()=>{if(w===4&&z){const t=setTimeout(()=>{m(r=>{const b=new Set(r);return b.delete(z),b}),E(null),C(5)},1500);return()=>clearTimeout(t)}},[w,z]),a.useEffect(()=>{if(w===5){const t=setTimeout(()=>{C(0)},2500);return()=>clearTimeout(t)}},[w]),a.useEffect(()=>{U()},[d]);const U=async()=>{try{const{data:t,error:r}=await M.from("galleries").select(`
          id, title, description, slug, price_per_photo, package_price, package_enabled,
          pricing_tiers, tiered_pricing_enabled,
          organizations(id, name, display_name)
        `).eq("slug",d).eq("status","published").single();if(r)throw r;j(t);const{data:b,error:_}=await M.from("gallery_photos").select("id, filename, width, height, price, sort_order, watermarked_path, thumbnail_path").eq("gallery_id",t.id).order("sort_order",{ascending:!0});if(_)throw _;const $=await Promise.all(b.map(async F=>{const{data:q}=await M.storage.from("galleries").createSignedUrl(F.watermarked_path,3600);return{...F,watermarked_url:q?.signedUrl,thumbnail_url:q?.signedUrl,price:F.price||t.price_per_photo}}));u($)}catch(t){console.error("Load gallery error:",t),f("Gallery not found")}finally{o(!1)}},Y=t=>{const r=new Set(i);r.has(t)?r.delete(t):r.add(t),m(r)},T=()=>{m(new Set(l.map(t=>t.id)))},P=()=>{m(new Set)},y=a.useMemo(()=>{const t=i.size;if(t===0||!s)return{total:0,savings:0,breakdown:[],flatTotal:0};if(s.tiered_pricing_enabled&&s.pricing_tiers?.length>0)return le(t,s.pricing_tiers,s.price_per_photo);const r=t*s.price_per_photo;return{total:r,savings:0,breakdown:[],flatTotal:r}},[i.size,s]),S=async(t,r,b=!1)=>{g(!0),f(null);try{const _=await fetch("https://gonalgubgldgpkcekaxe.supabase.co/functions/v1/gallery_checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({gallery_slug:d,email:t,customer_name:r,photo_ids:b?[]:Array.from(i),is_package:b})}),$=await _.json();if(!_.ok)throw new Error($.error||"Checkout failed");$.checkout_url&&(window.location.href=$.checkout_url)}catch(_){console.error("Checkout error:",_),f(_.message)}finally{g(!1)}};return k?e.jsx("div",{className:"min-h-[60vh] flex items-center justify-center",children:e.jsx(O,{className:"w-8 h-8 text-red-500 animate-spin"})}):x&&!s?e.jsx("div",{className:"min-h-[60vh] flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Gallery Not Found"}),e.jsx("p",{className:"text-gray-400",children:x})]})}):e.jsx("div",{className:"py-8 px-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:s.title}),s.livestream_events&&e.jsx("p",{className:"text-gray-400",children:s.livestream_events.title}),s.description&&e.jsx("p",{className:"text-gray-300 mt-4",children:s.description})]}),I&&e.jsx("div",{className:"mb-6 p-4 bg-yellow-500/20 border border-yellow-500/50 rounded-lg text-yellow-300",children:"Checkout was cancelled. Your selection is still saved."}),e.jsxs("div",{className:"mb-6 space-y-3",children:[e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[e.jsxs("div",{className:"bg-dark-800 px-4 py-2 rounded-lg",children:[e.jsx("span",{className:"text-gray-400",children:"Per Photo:"}),e.jsxs("span",{className:"text-white ml-2 font-semibold",children:["$",(s.price_per_photo/100).toFixed(2)]})]}),s.package_enabled&&s.package_price&&e.jsxs("div",{className:"bg-dark-800 px-4 py-2 rounded-lg",children:[e.jsx("span",{className:"text-gray-400",children:"All Photos:"}),e.jsxs("span",{className:"text-green-400 ml-2 font-semibold",children:["$",(s.package_price/100).toFixed(2)]}),e.jsxs("span",{className:"text-gray-500 ml-1",children:["(save $",((l.length*s.price_per_photo-s.package_price)/100).toFixed(2),")"]})]})]}),s.tiered_pricing_enabled&&s.pricing_tiers?.length>0&&e.jsxs("div",{className:"bg-gradient-to-r from-green-500/10 to-green-500/5 border border-green-500/30 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-green-400 font-semibold mb-3",children:[e.jsx(ee,{className:"w-4 h-4"}),"Volume Discounts"]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2 text-sm",children:s.pricing_tiers.map((t,r)=>e.jsxs("div",{className:"bg-dark-800/50 rounded px-3 py-2",children:[e.jsxs("span",{className:"text-gray-400",children:[t.max_qty?`${t.min_qty}-${t.max_qty}`:`${t.min_qty}+`," photos:"]}),e.jsxs("span",{className:"text-white ml-2 font-semibold",children:["$",(t.price_per_photo/100).toFixed(2)," each"]})]},r))})]})]}),e.jsxs("div",{className:"mb-6 flex flex-wrap items-center gap-4",children:[e.jsxs("button",{onClick:T,className:"text-sm text-gray-400 hover:text-white",children:["Select All (",l.length,")"]}),i.size>0&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:P,className:"text-sm text-gray-400 hover:text-white",children:"Clear Selection"}),e.jsxs("span",{className:"text-white",children:[i.size," selected ¬∑ $",(y.total/100).toFixed(2),y.savings>0&&e.jsxs("span",{className:"text-green-400 ml-2",children:["(saving $",(y.savings/100).toFixed(2),")"]})]})]})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-2 md:gap-4 mb-24 md:mb-8",children:l.map((t,r)=>e.jsxs("div",{className:`relative group cursor-pointer rounded-lg overflow-hidden transition-transform active:scale-98 ${i.has(t.id)?"ring-2 ring-red-500":""} ${w===1&&r===0?"ring-2 ring-white animate-pulse z-10":""}`,onClick:()=>{A(t),w===1&&C(2)},children:[e.jsx("img",{src:t.thumbnail_url||t.watermarked_url,alt:t.filename,className:"w-full aspect-square object-cover",loading:"lazy"}),e.jsx("div",{className:`absolute top-2 right-2 w-7 h-7 rounded-full flex items-center justify-center transition-all ${i.has(t.id)?"bg-red-500 text-white":"bg-black/40 text-white md:opacity-0 md:group-hover:opacity-100"}`,children:i.has(t.id)?e.jsx(R,{className:"w-4 h-4"}):e.jsx(V,{className:"w-4 h-4"})}),e.jsx("button",{onClick:b=>{b.stopPropagation(),Y(t.id)},className:`absolute bottom-2 left-2 px-3 py-1 rounded-full text-xs font-semibold transition-all md:opacity-0 md:group-hover:opacity-100 ${i.has(t.id)?"bg-green-500 text-white":"bg-black/60 backdrop-blur-sm text-white"}`,children:i.has(t.id)?"Added":"Add"})]},t.id))}),(i.size>0||s.package_enabled)&&e.jsxs("div",{className:"fixed bottom-0 left-0 right-0 md:bottom-4 md:left-auto md:right-8 md:w-96 z-40",children:[e.jsxs("div",{className:"md:hidden bg-dark-900/95 backdrop-blur-lg border-t border-dark-700 px-4 py-3 safe-area-pb",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 bg-dark-700 rounded-full px-3 py-1.5",children:[e.jsx(G,{className:"w-4 h-4 text-red-500"}),e.jsx("span",{className:"text-white font-semibold text-sm",children:i.size})]}),e.jsxs("div",{className:"flex-1 text-right",children:[y.savings>0&&e.jsxs("span",{className:"text-gray-500 text-xs line-through mr-2",children:["$",(y.flatTotal/100).toFixed(2)]}),e.jsxs("span",{className:"text-white font-bold",children:["$",(y.total/100).toFixed(2)]})]}),e.jsx("button",{onClick:()=>p(!0),disabled:i.size===0,className:"bg-red-500 hover:bg-red-600 disabled:bg-gray-600 text-white font-semibold px-5 py-2 rounded-full transition-all active:scale-95",children:"Checkout"})]}),s.package_enabled&&s.package_price&&e.jsxs("button",{onClick:()=>{T(),p(!0)},className:"w-full mt-2 bg-green-600/20 border border-green-500/50 text-green-400 font-semibold py-2 rounded-full text-sm transition-all active:scale-98",children:["Buy All ",l.length," Photos - $",(s.package_price/100).toFixed(2)]})]}),e.jsxs("div",{className:"hidden md:block bg-dark-800 rounded-xl shadow-2xl p-4 border border-dark-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(G,{className:"w-5 h-5 text-red-500"}),e.jsxs("span",{className:"text-white font-semibold",children:[i.size," photos selected"]})]}),e.jsxs("span",{className:"text-white font-bold",children:["$",(y.total/100).toFixed(2)]})]}),y.savings>0&&e.jsxs("div",{className:"flex items-center justify-between mb-3 text-sm",children:[e.jsx("span",{className:"text-gray-400",children:e.jsxs("span",{className:"line-through",children:["$",(y.flatTotal/100).toFixed(2)]})}),e.jsxs("span",{className:"text-green-400 font-semibold",children:["Volume discount: -$",(y.savings/100).toFixed(2)]})]}),e.jsx("button",{onClick:()=>p(!0),disabled:i.size===0,className:"w-full bg-red-500 hover:bg-red-600 disabled:bg-gray-600 disabled:cursor-not-allowed text-white font-semibold py-3 rounded-lg transition-colors",children:"Checkout"}),s.package_enabled&&s.package_price&&e.jsxs("button",{onClick:()=>{T(),p(!0)},className:"w-full mt-2 bg-green-600 hover:bg-green-700 text-white font-semibold py-3 rounded-lg transition-colors",children:["Buy All Photos - $",(s.package_price/100).toFixed(2)]})]})]}),N&&e.jsx(re,{gallery:s,selectedCount:i.size,priceCalc:y,isPackage:i.size===l.length&&s.package_enabled,packagePrice:s.package_price,onClose:()=>p(!1),onCheckout:S,purchasing:v,error:x}),w===1&&l.length>0&&e.jsx("div",{className:"fixed inset-0 bg-black/60 z-30 flex items-center justify-center pointer-events-none md:hidden",children:e.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-2xl p-6 mx-4 text-center animate-bounce-slow",children:[e.jsx("div",{className:"text-4xl mb-3",children:"üëÜ"}),e.jsx("p",{className:"text-white text-lg font-semibold",children:"Tap a photo to view"}),e.jsx("p",{className:"text-white/70 text-sm mt-1",children:"Open the fullscreen gallery"})]})}),D&&e.jsx(ne,{photos:l,currentPhoto:D,selectedPhotos:i,onClose:()=>{A(null),w>0&&w<4&&C(0)},onNavigate:A,onToggleSelect:Y,pricePerPhoto:s.price_per_photo,tutorialStep:w,onTutorialStep:(t,r)=>{C(t),t===4&&r&&(localStorage.setItem("gallery_tutorial_seen","true"),E(r))}})]})})}function re({gallery:d,selectedCount:c,priceCalc:s,isPackage:j,packagePrice:l,onClose:u,onCheckout:i,purchasing:m,error:k}){const[o,x]=a.useState(""),[f,N]=a.useState(""),p=j&&l?l:s.total,v=g=>{g.preventDefault(),i(o,f,j&&l)};return e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-dark-800 rounded-xl max-w-md w-full p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Complete Purchase"}),e.jsxs("div",{className:"mb-6 p-4 bg-dark-700 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between text-gray-300 mb-2",children:[e.jsxs("span",{children:[c," photos"]}),e.jsxs("span",{children:["$",(s.flatTotal/100).toFixed(2)]})]}),s.savings>0&&!j&&e.jsxs("div",{className:"flex justify-between text-green-400 mb-2",children:[e.jsx("span",{children:"Volume Discount"}),e.jsxs("span",{children:["-$",(s.savings/100).toFixed(2)]})]}),j&&l&&s.flatTotal>l&&e.jsxs("div",{className:"flex justify-between text-green-400 mb-2",children:[e.jsx("span",{children:"Package Discount"}),e.jsxs("span",{children:["-$",((s.flatTotal-l)/100).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-white font-bold mt-2 pt-2 border-t border-dark-600",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["$",(p/100).toFixed(2)," AUD"]})]})]}),e.jsxs("form",{onSubmit:v,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 mb-1",children:"Email *"}),e.jsx("input",{type:"email",value:o,onChange:g=>x(g.target.value),className:"w-full bg-dark-700 text-white rounded-lg px-4 py-3 border border-dark-600 focus:border-red-500 focus:outline-none",placeholder:"your@email.com",required:!0}),e.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"Download link will be sent here"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 mb-1",children:"Name (optional)"}),e.jsx("input",{type:"text",value:f,onChange:g=>N(g.target.value),className:"w-full bg-dark-700 text-white rounded-lg px-4 py-3 border border-dark-600 focus:border-red-500 focus:outline-none",placeholder:"Your name"})]}),k&&e.jsx("div",{className:"p-3 bg-red-500/20 border border-red-500/50 rounded-lg text-red-300 text-sm",children:k}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx("button",{type:"button",onClick:u,className:"flex-1 bg-dark-600 hover:bg-dark-500 text-white py-3 rounded-lg transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:m||!o,className:"flex-1 bg-red-500 hover:bg-red-600 disabled:bg-gray-600 text-white py-3 rounded-lg transition-colors flex items-center justify-center gap-2",children:m?e.jsxs(e.Fragment,{children:[e.jsx(O,{className:"w-4 h-4 animate-spin"}),"Processing..."]}):e.jsxs(e.Fragment,{children:["Pay $",(p/100).toFixed(2)]})})]})]})]})})}function ne({photos:d,currentPhoto:c,selectedPhotos:s,onClose:j,onNavigate:l,onToggleSelect:u,pricePerPhoto:i,tutorialStep:m=0,onTutorialStep:k}){const o=d.findIndex(n=>n.id===c.id),x=s.has(c.id),f=a.useRef(null),[N,p]=a.useState(0),[v,g]=a.useState(!1),[D,A]=a.useState(0),[w,C]=a.useState(!1),[z,E]=a.useState(!1),[I,U]=a.useState(0),[Y,T]=a.useState(!1),[P,y]=a.useState({x:0,y:0}),S=o>0?d[o-1]:null,t=o<d.length-1?d[o+1]:null;a.useEffect(()=>{const n=window.scrollY;return document.body.style.position="fixed",document.body.style.top=`-${n}px`,document.body.style.left="0",document.body.style.right="0",document.body.style.overflow="hidden",()=>{document.body.style.position="",document.body.style.top="",document.body.style.left="",document.body.style.right="",document.body.style.overflow="",window.scrollTo(0,n)}},[]);const r=a.useCallback(()=>{o<d.length-1&&l(d[o+1])},[o,d,l]),b=a.useCallback(()=>{o>0&&l(d[o-1])},[o,d,l]);a.useEffect(()=>{const n=h=>{h.key==="ArrowDown"||h.key==="ArrowRight"?(h.preventDefault(),r()):h.key==="ArrowUp"||h.key==="ArrowLeft"?(h.preventDefault(),b()):h.key==="Escape"?j():(h.key===" "||h.key==="Enter")&&(h.preventDefault(),u(c.id))};return window.addEventListener("keydown",n),()=>window.removeEventListener("keydown",n)},[r,b,j,u,c.id]);const _=n=>{A(n.touches[0].clientY),g(!0),p(0)},$=n=>{if(!v)return;const h=n.touches[0].clientY-D;p(h)},F=()=>{g(!1);const n=80;N<-n&&t?(r(),m===2&&!w&&(C(!0),z&&k?.(3))):N>n&&S&&(b(),m===2&&!z&&(E(!0),w&&k?.(3))),p(0)},q=n=>{const h=Date.now();if(h-I<300){const L=n.currentTarget.getBoundingClientRect(),W=n.clientX||L.width/2,J=n.clientY||L.height/2;y({x:W-L.left,y:J-L.top}),T(!0),s.has(c.id)||(u(c.id),m===3&&k?.(4,c.id)),setTimeout(()=>T(!1),800)}U(h)};return a.useEffect(()=>{if(S){const n=new Image;n.src=S.watermarked_url}if(t){const n=new Image;n.src=t.watermarked_url}},[S,t]),e.jsxs("div",{ref:f,className:"fixed inset-0 bg-black z-50 overflow-hidden",style:{touchAction:"none"},onTouchStart:_,onTouchMove:$,onTouchEnd:F,onClick:q,children:[t&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pt-16 pb-24",children:e.jsx("img",{src:t.watermarked_url,alt:"Next",className:"max-w-full max-h-full object-contain",draggable:!1})}),S&&N>0&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pt-16 pb-24",children:e.jsx("img",{src:S.watermarked_url,alt:"Previous",className:"max-w-full max-h-full object-contain",draggable:!1})}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pt-16 pb-24 bg-black",style:{transform:`translateY(${N}px)`,transition:v?"none":"transform 0.25s ease-out"},children:e.jsx("img",{src:c.watermarked_url,alt:c.filename,className:"max-w-full max-h-full object-contain select-none",draggable:!1})}),Y&&e.jsx("div",{className:"absolute pointer-events-none z-50",style:{left:P.x,top:P.y,transform:"translate(-50%, -50%)"},children:e.jsx(B,{className:"w-20 h-20 text-red-500 fill-red-500",style:{animation:"heartBurst 0.6s ease-out forwards"}})}),e.jsxs("div",{className:"absolute top-0 left-0 right-0 z-40 flex items-center justify-between p-4 bg-gradient-to-b from-black/70 to-transparent",children:[e.jsxs("div",{className:"text-white/90 font-medium text-sm bg-black/40 px-3 py-1.5 rounded-full backdrop-blur-sm",children:[o+1," / ",d.length]}),e.jsx("button",{onClick:j,className:"text-white bg-black/40 hover:bg-black/60 p-2.5 rounded-full backdrop-blur-sm transition-colors",children:e.jsx(ae,{className:"w-5 h-5"})})]}),S&&e.jsx("button",{onClick:n=>{n.stopPropagation(),b()},className:"hidden md:flex absolute left-4 top-1/2 -translate-y-1/2 z-40 bg-black/50 hover:bg-black/70 text-white p-3 rounded-full",children:e.jsx(K,{className:"w-6 h-6"})}),t&&e.jsx("button",{onClick:n=>{n.stopPropagation(),r()},className:"hidden md:flex absolute right-4 top-1/2 -translate-y-1/2 z-40 bg-black/50 hover:bg-black/70 text-white p-3 rounded-full",children:e.jsx(X,{className:"w-6 h-6"})}),e.jsxs("div",{className:"md:hidden absolute right-3 bottom-28 z-40 flex flex-col items-center gap-4",children:[e.jsxs("button",{onClick:n=>{n.stopPropagation(),u(c.id)},className:"flex flex-col items-center gap-1",children:[e.jsx("div",{className:`p-3 rounded-full transition-all shadow-lg ${x?"bg-red-500 text-white scale-110":"bg-black/60 text-white backdrop-blur-sm"}`,children:x?e.jsx(R,{className:"w-6 h-6"}):e.jsx(G,{className:"w-6 h-6"})}),e.jsx("span",{className:"text-white text-xs font-medium drop-shadow",children:x?"Added":"Add"})]}),e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[e.jsx("div",{className:`p-3 rounded-full shadow-lg ${x?"bg-black/60 text-red-500":"bg-black/60 text-white/70"} backdrop-blur-sm`,children:e.jsx(B,{className:`w-6 h-6 ${x?"fill-red-500":""}`})}),e.jsx("span",{className:"text-white/80 text-xs font-medium drop-shadow",children:x?"Added":"Add"})]})]}),e.jsxs("div",{className:"hidden md:flex p-4 bg-gradient-to-t from-black/80 to-transparent items-center justify-between absolute bottom-0 left-0 right-0 z-40",children:[e.jsx("div",{className:"text-gray-300 text-sm truncate max-w-[50%]",children:c.filename}),e.jsx("button",{onClick:()=>u(c.id),className:`flex items-center gap-2 px-5 py-2.5 rounded-full font-semibold transition-all ${x?"bg-green-500 hover:bg-green-600 text-white":"bg-red-500 hover:bg-red-600 text-white"}`,children:x?e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"w-5 h-5"}),"In Cart"]}):e.jsxs(e.Fragment,{children:[e.jsx(V,{className:"w-5 h-5"}),"Add $",(i/100).toFixed(2)]})})]}),e.jsxs("div",{className:"hidden md:flex absolute bottom-16 left-1/2 -translate-x-1/2 text-gray-500 text-xs gap-4 z-40",children:[e.jsx("span",{children:"‚Üë ‚Üì Navigate"}),e.jsx("span",{children:"Space: Add to cart"}),e.jsx("span",{children:"Esc: Close"})]}),m===0&&e.jsx("div",{className:"md:hidden absolute left-4 bottom-28 z-40 text-white/40 text-xs",children:"Double-tap to add"}),m===2&&e.jsx("div",{className:"md:hidden absolute inset-x-0 bottom-40 z-50 flex justify-center pointer-events-none",children:e.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-2xl p-5 mx-4 text-center",children:[e.jsx("div",{className:"text-4xl mb-2",children:"üëÜüëá"}),e.jsx("p",{className:"text-white text-lg font-semibold",children:"Swipe up or down"}),e.jsx("p",{className:"text-white/70 text-sm mt-1",children:"Browse through photos"})]})}),m===3&&e.jsx("div",{className:"md:hidden absolute inset-0 z-50 flex items-center justify-center pointer-events-none",children:e.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-2xl p-6 mx-4 text-center",children:[e.jsx("div",{className:"text-4xl mb-2 animate-double-tap",children:"‚òùÔ∏è"}),e.jsx("p",{className:"text-white text-lg font-semibold",children:"Double-tap to add to cart"}),e.jsx("p",{className:"text-white/70 text-sm mt-1",children:"Try it on this photo!"})]})}),m===4&&e.jsx("div",{className:"md:hidden absolute inset-0 z-50 flex items-center justify-center pointer-events-none",children:e.jsxs("div",{className:"bg-green-500/20 backdrop-blur-md rounded-2xl p-6 mx-4 text-center animate-pulse",children:[e.jsx("div",{className:"text-4xl mb-2",children:"‚úÖ"}),e.jsx("p",{className:"text-white text-lg font-semibold",children:"You're all set!"}),e.jsx("p",{className:"text-white/70 text-sm mt-1",children:"Swipe to browse, double-tap to add"})]})}),m===5&&e.jsx("div",{className:"md:hidden absolute top-14 right-14 z-50 pointer-events-none animate-fade-hint",children:e.jsx("div",{className:"bg-black/40 backdrop-blur-sm rounded-lg px-3 py-1.5",children:e.jsx("span",{className:"text-white/60 text-xs",children:"Grid view"})})}),e.jsx("style",{children:`
        @keyframes heartBurst {
          0% {
            transform: translate(-50%, -50%) scale(0);
            opacity: 1;
          }
          50% {
            transform: translate(-50%, -50%) scale(1.2);
            opacity: 1;
          }
          100% {
            transform: translate(-50%, -50%) scale(1);
            opacity: 0;
          }
        }
        @keyframes fadeOut {
          0% { opacity: 1; }
          70% { opacity: 1; }
          100% { opacity: 0; }
        }
        .animate-fade-out {
          animation: fadeOut 3s ease-out forwards;
        }
        .safe-area-pb {
          padding-bottom: max(12px, env(safe-area-inset-bottom));
        }
        @keyframes bounce-slow {
          0%, 100% { transform: translateY(0); }
          50% { transform: translateY(-10px); }
        }
        .animate-bounce-slow {
          animation: bounce-slow 2s ease-in-out infinite;
        }
        @keyframes double-tap {
          0%, 100% { transform: scale(1); }
          10% { transform: scale(0.85) translateY(5px); }
          20% { transform: scale(1); }
          30% { transform: scale(0.85) translateY(5px); }
          40% { transform: scale(1); }
        }
        .animate-double-tap {
          animation: double-tap 1.5s ease-in-out infinite;
        }
        @keyframes fade-hint {
          0% { opacity: 0; }
          15% { opacity: 1; }
          85% { opacity: 1; }
          100% { opacity: 0; }
        }
        .animate-fade-hint {
          animation: fade-hint 2.5s ease-in-out forwards;
        }
      `})]})}export{ue as default};
