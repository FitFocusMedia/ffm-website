function Jle(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(n,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();var O1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function eA(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ok={exports:{}},R1={};var e8;function ece(){if(e8)return R1;e8=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function r(n,i,s){var o=null;if(s!==void 0&&(o=""+s),i.key!==void 0&&(o=""+i.key),"key"in i){s={};for(var c in i)c!=="key"&&(s[c]=i[c])}else s=i;return i=s.ref,{$$typeof:t,type:n,key:o,ref:i!==void 0?i:null,props:s}}return R1.Fragment=e,R1.jsx=r,R1.jsxs=r,R1}var t8;function tce(){return t8||(t8=1,Ok.exports=ece()),Ok.exports}var a=tce(),Rk={exports:{}},Gs={};var r8;function rce(){if(r8)return Gs;r8=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),l=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.for("react.activity"),A=Symbol.iterator;function p(be){return be===null||typeof be!="object"?null:(be=A&&be[A]||be["@@iterator"],typeof be=="function"?be:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,x={};function w(be,de,xe){this.props=be,this.context=de,this.refs=x,this.updater=xe||g}w.prototype.isReactComponent={},w.prototype.setState=function(be,de){if(typeof be!="object"&&typeof be!="function"&&be!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,be,de,"setState")},w.prototype.forceUpdate=function(be){this.updater.enqueueForceUpdate(this,be,"forceUpdate")};function E(){}E.prototype=w.prototype;function T(be,de,xe){this.props=be,this.context=de,this.refs=x,this.updater=xe||g}var C=T.prototype=new E;C.constructor=T,y(C,w.prototype),C.isPureReactComponent=!0;var N=Array.isArray;function I(){}var U={H:null,A:null,T:null,S:null},K=Object.prototype.hasOwnProperty;function Y(be,de,xe){var je=xe.ref;return{$$typeof:t,type:be,key:de,ref:je!==void 0?je:null,props:xe}}function re(be,de){return Y(be.type,de,be.props)}function se(be){return typeof be=="object"&&be!==null&&be.$$typeof===t}function Ae(be){var de={"=":"=0",":":"=2"};return"$"+be.replace(/[=:]/g,function(xe){return de[xe]})}var we=/\/+/g;function Ce(be,de){return typeof be=="object"&&be!==null&&be.key!=null?Ae(""+be.key):de.toString(36)}function ve(be){switch(be.status){case"fulfilled":return be.value;case"rejected":throw be.reason;default:switch(typeof be.status=="string"?be.then(I,I):(be.status="pending",be.then(function(de){be.status==="pending"&&(be.status="fulfilled",be.value=de)},function(de){be.status==="pending"&&(be.status="rejected",be.reason=de)})),be.status){case"fulfilled":return be.value;case"rejected":throw be.reason}}throw be}function ne(be,de,xe,je,Me){var Re=typeof be;(Re==="undefined"||Re==="boolean")&&(be=null);var it=!1;if(be===null)it=!0;else switch(Re){case"bigint":case"string":case"number":it=!0;break;case"object":switch(be.$$typeof){case t:case e:it=!0;break;case d:return it=be._init,ne(it(be._payload),de,xe,je,Me)}}if(it)return Me=Me(be),it=je===""?"."+Ce(be,0):je,N(Me)?(xe="",it!=null&&(xe=it.replace(we,"$&/")+"/"),ne(Me,de,xe,"",function(nt){return nt})):Me!=null&&(se(Me)&&(Me=re(Me,xe+(Me.key==null||be&&be.key===Me.key?"":(""+Me.key).replace(we,"$&/")+"/")+it)),de.push(Me)),1;it=0;var ht=je===""?".":je+":";if(N(be))for(var Be=0;Be<be.length;Be++)je=be[Be],Re=ht+Ce(je,Be),it+=ne(je,de,xe,Re,Me);else if(Be=p(be),typeof Be=="function")for(be=Be.call(be),Be=0;!(je=be.next()).done;)je=je.value,Re=ht+Ce(je,Be++),it+=ne(je,de,xe,Re,Me);else if(Re==="object"){if(typeof be.then=="function")return ne(ve(be),de,xe,je,Me);throw de=String(be),Error("Objects are not valid as a React child (found: "+(de==="[object Object]"?"object with keys {"+Object.keys(be).join(", ")+"}":de)+"). If you meant to render a collection of children, use an array instead.")}return it}function ce(be,de,xe){if(be==null)return be;var je=[],Me=0;return ne(be,je,"","",function(Re){return de.call(xe,Re,Me++)}),je}function ae(be){if(be._status===-1){var de=be._result;de=de(),de.then(function(xe){(be._status===0||be._status===-1)&&(be._status=1,be._result=xe)},function(xe){(be._status===0||be._status===-1)&&(be._status=2,be._result=xe)}),be._status===-1&&(be._status=0,be._result=de)}if(be._status===1)return be._result.default;throw be._result}var De=typeof reportError=="function"?reportError:function(be){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var de=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof be=="object"&&be!==null&&typeof be.message=="string"?String(be.message):String(be),error:be});if(!window.dispatchEvent(de))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",be);return}console.error(be)},Oe={map:ce,forEach:function(be,de,xe){ce(be,function(){de.apply(this,arguments)},xe)},count:function(be){var de=0;return ce(be,function(){de++}),de},toArray:function(be){return ce(be,function(de){return de})||[]},only:function(be){if(!se(be))throw Error("React.Children.only expected to receive a single React element child.");return be}};return Gs.Activity=f,Gs.Children=Oe,Gs.Component=w,Gs.Fragment=r,Gs.Profiler=i,Gs.PureComponent=T,Gs.StrictMode=n,Gs.Suspense=u,Gs.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=U,Gs.__COMPILER_RUNTIME={__proto__:null,c:function(be){return U.H.useMemoCache(be)}},Gs.cache=function(be){return function(){return be.apply(null,arguments)}},Gs.cacheSignal=function(){return null},Gs.cloneElement=function(be,de,xe){if(be==null)throw Error("The argument must be a React element, but you passed "+be+".");var je=y({},be.props),Me=be.key;if(de!=null)for(Re in de.key!==void 0&&(Me=""+de.key),de)!K.call(de,Re)||Re==="key"||Re==="__self"||Re==="__source"||Re==="ref"&&de.ref===void 0||(je[Re]=de[Re]);var Re=arguments.length-2;if(Re===1)je.children=xe;else if(1<Re){for(var it=Array(Re),ht=0;ht<Re;ht++)it[ht]=arguments[ht+2];je.children=it}return Y(be.type,Me,je)},Gs.createContext=function(be){return be={$$typeof:o,_currentValue:be,_currentValue2:be,_threadCount:0,Provider:null,Consumer:null},be.Provider=be,be.Consumer={$$typeof:s,_context:be},be},Gs.createElement=function(be,de,xe){var je,Me={},Re=null;if(de!=null)for(je in de.key!==void 0&&(Re=""+de.key),de)K.call(de,je)&&je!=="key"&&je!=="__self"&&je!=="__source"&&(Me[je]=de[je]);var it=arguments.length-2;if(it===1)Me.children=xe;else if(1<it){for(var ht=Array(it),Be=0;Be<it;Be++)ht[Be]=arguments[Be+2];Me.children=ht}if(be&&be.defaultProps)for(je in it=be.defaultProps,it)Me[je]===void 0&&(Me[je]=it[je]);return Y(be,Re,Me)},Gs.createRef=function(){return{current:null}},Gs.forwardRef=function(be){return{$$typeof:c,render:be}},Gs.isValidElement=se,Gs.lazy=function(be){return{$$typeof:d,_payload:{_status:-1,_result:be},_init:ae}},Gs.memo=function(be,de){return{$$typeof:l,type:be,compare:de===void 0?null:de}},Gs.startTransition=function(be){var de=U.T,xe={};U.T=xe;try{var je=be(),Me=U.S;Me!==null&&Me(xe,je),typeof je=="object"&&je!==null&&typeof je.then=="function"&&je.then(I,De)}catch(Re){De(Re)}finally{de!==null&&xe.types!==null&&(de.types=xe.types),U.T=de}},Gs.unstable_useCacheRefresh=function(){return U.H.useCacheRefresh()},Gs.use=function(be){return U.H.use(be)},Gs.useActionState=function(be,de,xe){return U.H.useActionState(be,de,xe)},Gs.useCallback=function(be,de){return U.H.useCallback(be,de)},Gs.useContext=function(be){return U.H.useContext(be)},Gs.useDebugValue=function(){},Gs.useDeferredValue=function(be,de){return U.H.useDeferredValue(be,de)},Gs.useEffect=function(be,de){return U.H.useEffect(be,de)},Gs.useEffectEvent=function(be){return U.H.useEffectEvent(be)},Gs.useId=function(){return U.H.useId()},Gs.useImperativeHandle=function(be,de,xe){return U.H.useImperativeHandle(be,de,xe)},Gs.useInsertionEffect=function(be,de){return U.H.useInsertionEffect(be,de)},Gs.useLayoutEffect=function(be,de){return U.H.useLayoutEffect(be,de)},Gs.useMemo=function(be,de){return U.H.useMemo(be,de)},Gs.useOptimistic=function(be,de){return U.H.useOptimistic(be,de)},Gs.useReducer=function(be,de,xe){return U.H.useReducer(be,de,xe)},Gs.useRef=function(be){return U.H.useRef(be)},Gs.useState=function(be){return U.H.useState(be)},Gs.useSyncExternalStore=function(be,de,xe){return U.H.useSyncExternalStore(be,de,xe)},Gs.useTransition=function(){return U.H.useTransition()},Gs.version="19.2.4",Gs}var n8;function qb(){return n8||(n8=1,Rk.exports=rce()),Rk.exports}var j=qb();const So=eA(j),nce=Jle({__proto__:null,default:So},[j]);var Dk={exports:{}},D1={},Mk={exports:{}},Fk={};var i8;function ice(){return i8||(i8=1,(function(t){function e(ne,ce){var ae=ne.length;ne.push(ce);e:for(;0<ae;){var De=ae-1>>>1,Oe=ne[De];if(0<i(Oe,ce))ne[De]=ce,ne[ae]=Oe,ae=De;else break e}}function r(ne){return ne.length===0?null:ne[0]}function n(ne){if(ne.length===0)return null;var ce=ne[0],ae=ne.pop();if(ae!==ce){ne[0]=ae;e:for(var De=0,Oe=ne.length,be=Oe>>>1;De<be;){var de=2*(De+1)-1,xe=ne[de],je=de+1,Me=ne[je];if(0>i(xe,ae))je<Oe&&0>i(Me,xe)?(ne[De]=Me,ne[je]=ae,De=je):(ne[De]=xe,ne[de]=ae,De=de);else if(je<Oe&&0>i(Me,ae))ne[De]=Me,ne[je]=ae,De=je;else break e}}return ce}function i(ne,ce){var ae=ne.sortIndex-ce.sortIndex;return ae!==0?ae:ne.id-ce.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var u=[],l=[],d=1,f=null,A=3,p=!1,g=!1,y=!1,x=!1,w=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function C(ne){for(var ce=r(l);ce!==null;){if(ce.callback===null)n(l);else if(ce.startTime<=ne)n(l),ce.sortIndex=ce.expirationTime,e(u,ce);else break;ce=r(l)}}function N(ne){if(y=!1,C(ne),!g)if(r(u)!==null)g=!0,I||(I=!0,Ae());else{var ce=r(l);ce!==null&&ve(N,ce.startTime-ne)}}var I=!1,U=-1,K=5,Y=-1;function re(){return x?!0:!(t.unstable_now()-Y<K)}function se(){if(x=!1,I){var ne=t.unstable_now();Y=ne;var ce=!0;try{e:{g=!1,y&&(y=!1,E(U),U=-1),p=!0;var ae=A;try{t:{for(C(ne),f=r(u);f!==null&&!(f.expirationTime>ne&&re());){var De=f.callback;if(typeof De=="function"){f.callback=null,A=f.priorityLevel;var Oe=De(f.expirationTime<=ne);if(ne=t.unstable_now(),typeof Oe=="function"){f.callback=Oe,C(ne),ce=!0;break t}f===r(u)&&n(u),C(ne)}else n(u);f=r(u)}if(f!==null)ce=!0;else{var be=r(l);be!==null&&ve(N,be.startTime-ne),ce=!1}}break e}finally{f=null,A=ae,p=!1}ce=void 0}}finally{ce?Ae():I=!1}}}var Ae;if(typeof T=="function")Ae=function(){T(se)};else if(typeof MessageChannel<"u"){var we=new MessageChannel,Ce=we.port2;we.port1.onmessage=se,Ae=function(){Ce.postMessage(null)}}else Ae=function(){w(se,0)};function ve(ne,ce){U=w(function(){ne(t.unstable_now())},ce)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ne){ne.callback=null},t.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):K=0<ne?Math.floor(1e3/ne):5},t.unstable_getCurrentPriorityLevel=function(){return A},t.unstable_next=function(ne){switch(A){case 1:case 2:case 3:var ce=3;break;default:ce=A}var ae=A;A=ce;try{return ne()}finally{A=ae}},t.unstable_requestPaint=function(){x=!0},t.unstable_runWithPriority=function(ne,ce){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var ae=A;A=ne;try{return ce()}finally{A=ae}},t.unstable_scheduleCallback=function(ne,ce,ae){var De=t.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?De+ae:De):ae=De,ne){case 1:var Oe=-1;break;case 2:Oe=250;break;case 5:Oe=1073741823;break;case 4:Oe=1e4;break;default:Oe=5e3}return Oe=ae+Oe,ne={id:d++,callback:ce,priorityLevel:ne,startTime:ae,expirationTime:Oe,sortIndex:-1},ae>De?(ne.sortIndex=ae,e(l,ne),r(u)===null&&ne===r(l)&&(y?(E(U),U=-1):y=!0,ve(N,ae-De))):(ne.sortIndex=Oe,e(u,ne),g||p||(g=!0,I||(I=!0,Ae()))),ne},t.unstable_shouldYield=re,t.unstable_wrapCallback=function(ne){var ce=A;return function(){var ae=A;A=ce;try{return ne.apply(this,arguments)}finally{A=ae}}}})(Fk)),Fk}var s8;function sce(){return s8||(s8=1,Mk.exports=ice()),Mk.exports}var Uk={exports:{}},qd={};var a8;function ace(){if(a8)return qd;a8=1;var t=qb();function e(u){var l="https://react.dev/errors/"+u;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)l+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+u+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(e(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(u,l,d){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:f==null?null:""+f,children:u,containerInfo:l,implementation:d}}var o=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(u,l){if(u==="font")return"";if(typeof l=="string")return l==="use-credentials"?l:""}return qd.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,qd.createPortal=function(u,l){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)throw Error(e(299));return s(u,l,null,d)},qd.flushSync=function(u){var l=o.T,d=n.p;try{if(o.T=null,n.p=2,u)return u()}finally{o.T=l,n.p=d,n.d.f()}},qd.preconnect=function(u,l){typeof u=="string"&&(l?(l=l.crossOrigin,l=typeof l=="string"?l==="use-credentials"?l:"":void 0):l=null,n.d.C(u,l))},qd.prefetchDNS=function(u){typeof u=="string"&&n.d.D(u)},qd.preinit=function(u,l){if(typeof u=="string"&&l&&typeof l.as=="string"){var d=l.as,f=c(d,l.crossOrigin),A=typeof l.integrity=="string"?l.integrity:void 0,p=typeof l.fetchPriority=="string"?l.fetchPriority:void 0;d==="style"?n.d.S(u,typeof l.precedence=="string"?l.precedence:void 0,{crossOrigin:f,integrity:A,fetchPriority:p}):d==="script"&&n.d.X(u,{crossOrigin:f,integrity:A,fetchPriority:p,nonce:typeof l.nonce=="string"?l.nonce:void 0})}},qd.preinitModule=function(u,l){if(typeof u=="string")if(typeof l=="object"&&l!==null){if(l.as==null||l.as==="script"){var d=c(l.as,l.crossOrigin);n.d.M(u,{crossOrigin:d,integrity:typeof l.integrity=="string"?l.integrity:void 0,nonce:typeof l.nonce=="string"?l.nonce:void 0})}}else l==null&&n.d.M(u)},qd.preload=function(u,l){if(typeof u=="string"&&typeof l=="object"&&l!==null&&typeof l.as=="string"){var d=l.as,f=c(d,l.crossOrigin);n.d.L(u,d,{crossOrigin:f,integrity:typeof l.integrity=="string"?l.integrity:void 0,nonce:typeof l.nonce=="string"?l.nonce:void 0,type:typeof l.type=="string"?l.type:void 0,fetchPriority:typeof l.fetchPriority=="string"?l.fetchPriority:void 0,referrerPolicy:typeof l.referrerPolicy=="string"?l.referrerPolicy:void 0,imageSrcSet:typeof l.imageSrcSet=="string"?l.imageSrcSet:void 0,imageSizes:typeof l.imageSizes=="string"?l.imageSizes:void 0,media:typeof l.media=="string"?l.media:void 0})}},qd.preloadModule=function(u,l){if(typeof u=="string")if(l){var d=c(l.as,l.crossOrigin);n.d.m(u,{as:typeof l.as=="string"&&l.as!=="script"?l.as:void 0,crossOrigin:d,integrity:typeof l.integrity=="string"?l.integrity:void 0})}else n.d.m(u)},qd.requestFormReset=function(u){n.d.r(u)},qd.unstable_batchedUpdates=function(u,l){return u(l)},qd.useFormState=function(u,l,d){return o.H.useFormState(u,l,d)},qd.useFormStatus=function(){return o.H.useHostTransitionStatus()},qd.version="19.2.4",qd}var o8;function qW(){if(o8)return Uk.exports;o8=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Uk.exports=ace(),Uk.exports}var l8;function oce(){if(l8)return D1;l8=1;var t=sce(),e=qb(),r=qW();function n(h){var m="https://react.dev/errors/"+h;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)m+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+h+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(h){return!(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)}function s(h){var m=h,b=h;if(h.alternate)for(;m.return;)m=m.return;else{h=m;do m=h,(m.flags&4098)!==0&&(b=m.return),h=m.return;while(h)}return m.tag===3?b:null}function o(h){if(h.tag===13){var m=h.memoizedState;if(m===null&&(h=h.alternate,h!==null&&(m=h.memoizedState)),m!==null)return m.dehydrated}return null}function c(h){if(h.tag===31){var m=h.memoizedState;if(m===null&&(h=h.alternate,h!==null&&(m=h.memoizedState)),m!==null)return m.dehydrated}return null}function u(h){if(s(h)!==h)throw Error(n(188))}function l(h){var m=h.alternate;if(!m){if(m=s(h),m===null)throw Error(n(188));return m!==h?null:h}for(var b=h,S=m;;){var W=b.return;if(W===null)break;var Z=W.alternate;if(Z===null){if(S=W.return,S!==null){b=S;continue}break}if(W.child===Z.child){for(Z=W.child;Z;){if(Z===b)return u(W),h;if(Z===S)return u(W),m;Z=Z.sibling}throw Error(n(188))}if(b.return!==S.return)b=W,S=Z;else{for(var Ne=!1,Ze=W.child;Ze;){if(Ze===b){Ne=!0,b=W,S=Z;break}if(Ze===S){Ne=!0,S=W,b=Z;break}Ze=Ze.sibling}if(!Ne){for(Ze=Z.child;Ze;){if(Ze===b){Ne=!0,b=Z,S=W;break}if(Ze===S){Ne=!0,S=Z,b=W;break}Ze=Ze.sibling}if(!Ne)throw Error(n(189))}}if(b.alternate!==S)throw Error(n(190))}if(b.tag!==3)throw Error(n(188));return b.stateNode.current===b?h:m}function d(h){var m=h.tag;if(m===5||m===26||m===27||m===6)return h;for(h=h.child;h!==null;){if(m=d(h),m!==null)return m;h=h.sibling}return null}var f=Object.assign,A=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),y=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),E=Symbol.for("react.consumer"),T=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),U=Symbol.for("react.memo"),K=Symbol.for("react.lazy"),Y=Symbol.for("react.activity"),re=Symbol.for("react.memo_cache_sentinel"),se=Symbol.iterator;function Ae(h){return h===null||typeof h!="object"?null:(h=se&&h[se]||h["@@iterator"],typeof h=="function"?h:null)}var we=Symbol.for("react.client.reference");function Ce(h){if(h==null)return null;if(typeof h=="function")return h.$$typeof===we?null:h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case y:return"Fragment";case w:return"Profiler";case x:return"StrictMode";case N:return"Suspense";case I:return"SuspenseList";case Y:return"Activity"}if(typeof h=="object")switch(h.$$typeof){case g:return"Portal";case T:return h.displayName||"Context";case E:return(h._context.displayName||"Context")+".Consumer";case C:var m=h.render;return h=h.displayName,h||(h=m.displayName||m.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case U:return m=h.displayName||null,m!==null?m:Ce(h.type)||"Memo";case K:m=h._payload,h=h._init;try{return Ce(h(m))}catch{}}return null}var ve=Array.isArray,ne=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae={pending:!1,data:null,method:null,action:null},De=[],Oe=-1;function be(h){return{current:h}}function de(h){0>Oe||(h.current=De[Oe],De[Oe]=null,Oe--)}function xe(h,m){Oe++,De[Oe]=h.current,h.current=m}var je=be(null),Me=be(null),Re=be(null),it=be(null);function ht(h,m){switch(xe(Re,m),xe(Me,h),xe(je,null),m.nodeType){case 9:case 11:h=(h=m.documentElement)&&(h=h.namespaceURI)?E6(h):0;break;default:if(h=m.tagName,m=m.namespaceURI)m=E6(m),h=_6(m,h);else switch(h){case"svg":h=1;break;case"math":h=2;break;default:h=0}}de(je),xe(je,h)}function Be(){de(je),de(Me),de(Re)}function nt(h){h.memoizedState!==null&&xe(it,h);var m=je.current,b=_6(m,h.type);m!==b&&(xe(Me,h),xe(je,b))}function Ge(h){Me.current===h&&(de(je),de(Me)),it.current===h&&(de(it),I1._currentValue=ae)}var ft,Dt;function rt(h){if(ft===void 0)try{throw Error()}catch(b){var m=b.stack.trim().match(/\n( *(at )?)/);ft=m&&m[1]||"",Dt=-1<b.stack.indexOf(`
    at`)?" (<anonymous>)":-1<b.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ft+h+Dt}var kt=!1;function _t(h,m){if(!h||kt)return"";kt=!0;var b=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var S={DetermineComponentFrameRoot:function(){try{if(m){var qr=function(){throw Error()};if(Object.defineProperty(qr.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(qr,[])}catch(Ir){var Tr=Ir}Reflect.construct(h,[],qr)}else{try{qr.call()}catch(Ir){Tr=Ir}h.call(qr.prototype)}}else{try{throw Error()}catch(Ir){Tr=Ir}(qr=h())&&typeof qr.catch=="function"&&qr.catch(function(){})}}catch(Ir){if(Ir&&Tr&&typeof Ir.stack=="string")return[Ir.stack,Tr.stack]}return[null,null]}};S.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var W=Object.getOwnPropertyDescriptor(S.DetermineComponentFrameRoot,"name");W&&W.configurable&&Object.defineProperty(S.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var Z=S.DetermineComponentFrameRoot(),Ne=Z[0],Ze=Z[1];if(Ne&&Ze){var Bt=Ne.split(`
`),_r=Ze.split(`
`);for(W=S=0;S<Bt.length&&!Bt[S].includes("DetermineComponentFrameRoot");)S++;for(;W<_r.length&&!_r[W].includes("DetermineComponentFrameRoot");)W++;if(S===Bt.length||W===_r.length)for(S=Bt.length-1,W=_r.length-1;1<=S&&0<=W&&Bt[S]!==_r[W];)W--;for(;1<=S&&0<=W;S--,W--)if(Bt[S]!==_r[W]){if(S!==1||W!==1)do if(S--,W--,0>W||Bt[S]!==_r[W]){var Qr=`
`+Bt[S].replace(" at new "," at ");return h.displayName&&Qr.includes("<anonymous>")&&(Qr=Qr.replace("<anonymous>",h.displayName)),Qr}while(1<=S&&0<=W);break}}}finally{kt=!1,Error.prepareStackTrace=b}return(b=h?h.displayName||h.name:"")?rt(b):""}function wt(h,m){switch(h.tag){case 26:case 27:case 5:return rt(h.type);case 16:return rt("Lazy");case 13:return h.child!==m&&m!==null?rt("Suspense Fallback"):rt("Suspense");case 19:return rt("SuspenseList");case 0:case 15:return _t(h.type,!1);case 11:return _t(h.type.render,!1);case 1:return _t(h.type,!0);case 31:return rt("Activity");default:return""}}function Tt(h){try{var m="",b=null;do m+=wt(h,b),b=h,h=h.return;while(h);return m}catch(S){return`
Error generating stack: `+S.message+`
`+S.stack}}var Er=Object.prototype.hasOwnProperty,pr=t.unstable_scheduleCallback,Xr=t.unstable_cancelCallback,yn=t.unstable_shouldYield,Mn=t.unstable_requestPaint,dn=t.unstable_now,pn=t.unstable_getCurrentPriorityLevel,mn=t.unstable_ImmediatePriority,Kn=t.unstable_UserBlockingPriority,Zn=t.unstable_NormalPriority,Li=t.unstable_LowPriority,ot=t.unstable_IdlePriority,Yt=t.log,kr=t.unstable_setDisableYieldValue,nr=null,Qt=null;function fr(h){if(typeof Yt=="function"&&kr(h),Qt&&typeof Qt.setStrictMode=="function")try{Qt.setStrictMode(nr,h)}catch{}}var zr=Math.clz32?Math.clz32:ln,Yr=Math.log,Ln=Math.LN2;function ln(h){return h>>>=0,h===0?32:31-(Yr(h)/Ln|0)|0}var Jn=256,rn=262144,Ur=4194304;function An(h){var m=h&42;if(m!==0)return m;switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return h&261888;case 262144:case 524288:case 1048576:case 2097152:return h&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return h&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return h}}function cn(h,m,b){var S=h.pendingLanes;if(S===0)return 0;var W=0,Z=h.suspendedLanes,Ne=h.pingedLanes;h=h.warmLanes;var Ze=S&134217727;return Ze!==0?(S=Ze&~Z,S!==0?W=An(S):(Ne&=Ze,Ne!==0?W=An(Ne):b||(b=Ze&~h,b!==0&&(W=An(b))))):(Ze=S&~Z,Ze!==0?W=An(Ze):Ne!==0?W=An(Ne):b||(b=S&~h,b!==0&&(W=An(b)))),W===0?0:m!==0&&m!==W&&(m&Z)===0&&(Z=W&-W,b=m&-m,Z>=b||Z===32&&(b&4194048)!==0)?m:W}function On(h,m){return(h.pendingLanes&~(h.suspendedLanes&~h.pingedLanes)&m)===0}function li(h,m){switch(h){case 1:case 2:case 4:case 8:case 64:return m+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Cs(){var h=Ur;return Ur<<=1,(Ur&62914560)===0&&(Ur=4194304),h}function Ds(h){for(var m=[],b=0;31>b;b++)m.push(h);return m}function js(h,m){h.pendingLanes|=m,m!==268435456&&(h.suspendedLanes=0,h.pingedLanes=0,h.warmLanes=0)}function ei(h,m,b,S,W,Z){var Ne=h.pendingLanes;h.pendingLanes=b,h.suspendedLanes=0,h.pingedLanes=0,h.warmLanes=0,h.expiredLanes&=b,h.entangledLanes&=b,h.errorRecoveryDisabledLanes&=b,h.shellSuspendCounter=0;var Ze=h.entanglements,Bt=h.expirationTimes,_r=h.hiddenUpdates;for(b=Ne&~b;0<b;){var Qr=31-zr(b),qr=1<<Qr;Ze[Qr]=0,Bt[Qr]=-1;var Tr=_r[Qr];if(Tr!==null)for(_r[Qr]=null,Qr=0;Qr<Tr.length;Qr++){var Ir=Tr[Qr];Ir!==null&&(Ir.lane&=-536870913)}b&=~qr}S!==0&&sn(h,S,0),Z!==0&&W===0&&h.tag!==0&&(h.suspendedLanes|=Z&~(Ne&~m))}function sn(h,m,b){h.pendingLanes|=m,h.suspendedLanes&=~m;var S=31-zr(m);h.entangledLanes|=m,h.entanglements[S]=h.entanglements[S]|1073741824|b&261930}function ss(h,m){var b=h.entangledLanes|=m;for(h=h.entanglements;b;){var S=31-zr(b),W=1<<S;W&m|h[S]&m&&(h[S]|=m),b&=~W}}function ta(h,m){var b=m&-m;return b=(b&42)!==0?1:_n(b),(b&(h.suspendedLanes|m))!==0?0:b}function _n(h){switch(h){case 2:h=1;break;case 8:h=4;break;case 32:h=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:h=128;break;case 268435456:h=134217728;break;default:h=0}return h}function Cn(h){return h&=-h,2<h?8<h?(h&134217727)!==0?32:268435456:8:2}function Ms(){var h=ce.p;return h!==0?h:(h=window.event,h===void 0?32:G6(h.type))}function Qs(h,m){var b=ce.p;try{return ce.p=h,m()}finally{ce.p=b}}var Fs=Math.random().toString(36).slice(2),rs="__reactFiber$"+Fs,qs="__reactProps$"+Fs,Os="__reactContainer$"+Fs,Qa="__reactEvents$"+Fs,ds="__reactListeners$"+Fs,bu="__reactHandles$"+Fs,to="__reactResources$"+Fs,Ml="__reactMarker$"+Fs;function nu(h){delete h[rs],delete h[qs],delete h[Qa],delete h[ds],delete h[bu]}function ml(h){var m=h[rs];if(m)return m;for(var b=h.parentNode;b;){if(m=b[Os]||b[rs]){if(b=m.alternate,m.child!==null||b!==null&&b.child!==null)for(h=I6(h);h!==null;){if(b=h[rs])return b;h=I6(h)}return m}h=b,b=h.parentNode}return null}function ra(h){if(h=h[rs]||h[Os]){var m=h.tag;if(m===5||m===6||m===13||m===31||m===26||m===27||m===3)return h}return null}function Ya(h){var m=h.tag;if(m===5||m===26||m===27||m===6)return h.stateNode;throw Error(n(33))}function Ws(h){var m=h[to];return m||(m=h[to]={hoistableStyles:new Map,hoistableScripts:new Map}),m}function ba(h){h[Ml]=!0}var Us=new Set,kl={};function po(h,m){ro(h,m),ro(h+"Capture",m)}function ro(h,m){for(kl[h]=m,h=0;h<m.length;h++)Us.add(m[h])}var pl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Fl={},mc={};function Vs(h){return Er.call(mc,h)?!0:Er.call(Fl,h)?!1:pl.test(h)?mc[h]=!0:(Fl[h]=!0,!1)}function ci(h,m,b){if(Vs(m))if(b===null)h.removeAttribute(m);else{switch(typeof b){case"undefined":case"function":case"symbol":h.removeAttribute(m);return;case"boolean":var S=m.toLowerCase().slice(0,5);if(S!=="data-"&&S!=="aria-"){h.removeAttribute(m);return}}h.setAttribute(m,""+b)}}function Ns(h,m,b){if(b===null)h.removeAttribute(m);else{switch(typeof b){case"undefined":case"function":case"symbol":case"boolean":h.removeAttribute(m);return}h.setAttribute(m,""+b)}}function Ta(h,m,b,S){if(S===null)h.removeAttribute(b);else{switch(typeof S){case"undefined":case"function":case"symbol":case"boolean":h.removeAttribute(b);return}h.setAttributeNS(m,b,""+S)}}function Va(h){switch(typeof h){case"bigint":case"boolean":case"number":case"string":case"undefined":return h;case"object":return h;default:return""}}function Ca(h){var m=h.type;return(h=h.nodeName)&&h.toLowerCase()==="input"&&(m==="checkbox"||m==="radio")}function gi(h,m,b){var S=Object.getOwnPropertyDescriptor(h.constructor.prototype,m);if(!h.hasOwnProperty(m)&&typeof S<"u"&&typeof S.get=="function"&&typeof S.set=="function"){var W=S.get,Z=S.set;return Object.defineProperty(h,m,{configurable:!0,get:function(){return W.call(this)},set:function(Ne){b=""+Ne,Z.call(this,Ne)}}),Object.defineProperty(h,m,{enumerable:S.enumerable}),{getValue:function(){return b},setValue:function(Ne){b=""+Ne},stopTracking:function(){h._valueTracker=null,delete h[m]}}}}function Xn(h){if(!h._valueTracker){var m=Ca(h)?"checked":"value";h._valueTracker=gi(h,m,""+h[m])}}function hs(h){if(!h)return!1;var m=h._valueTracker;if(!m)return!0;var b=m.getValue(),S="";return h&&(S=Ca(h)?h.checked?"true":"false":h.value),h=S,h!==b?(m.setValue(h),!0):!1}function wa(h){if(h=h||(typeof document<"u"?document:void 0),typeof h>"u")return null;try{return h.activeElement||h.body}catch{return h.body}}var Qo=/[\n"\\]/g;function Hi(h){return h.replace(Qo,function(m){return"\\"+m.charCodeAt(0).toString(16)+" "})}function Vo(h,m,b,S,W,Z,Ne,Ze){h.name="",Ne!=null&&typeof Ne!="function"&&typeof Ne!="symbol"&&typeof Ne!="boolean"?h.type=Ne:h.removeAttribute("type"),m!=null?Ne==="number"?(m===0&&h.value===""||h.value!=m)&&(h.value=""+Va(m)):h.value!==""+Va(m)&&(h.value=""+Va(m)):Ne!=="submit"&&Ne!=="reset"||h.removeAttribute("value"),m!=null?Xs(h,Ne,Va(m)):b!=null?Xs(h,Ne,Va(b)):S!=null&&h.removeAttribute("value"),W==null&&Z!=null&&(h.defaultChecked=!!Z),W!=null&&(h.checked=W&&typeof W!="function"&&typeof W!="symbol"),Ze!=null&&typeof Ze!="function"&&typeof Ze!="symbol"&&typeof Ze!="boolean"?h.name=""+Va(Ze):h.removeAttribute("name")}function Ea(h,m,b,S,W,Z,Ne,Ze){if(Z!=null&&typeof Z!="function"&&typeof Z!="symbol"&&typeof Z!="boolean"&&(h.type=Z),m!=null||b!=null){if(!(Z!=="submit"&&Z!=="reset"||m!=null)){Xn(h);return}b=b!=null?""+Va(b):"",m=m!=null?""+Va(m):b,Ze||m===h.value||(h.value=m),h.defaultValue=m}S=S??W,S=typeof S!="function"&&typeof S!="symbol"&&!!S,h.checked=Ze?h.checked:!!S,h.defaultChecked=!!S,Ne!=null&&typeof Ne!="function"&&typeof Ne!="symbol"&&typeof Ne!="boolean"&&(h.name=Ne),Xn(h)}function Xs(h,m,b){m==="number"&&wa(h.ownerDocument)===h||h.defaultValue===""+b||(h.defaultValue=""+b)}function fs(h,m,b,S){if(h=h.options,m){m={};for(var W=0;W<b.length;W++)m["$"+b[W]]=!0;for(b=0;b<h.length;b++)W=m.hasOwnProperty("$"+h[b].value),h[b].selected!==W&&(h[b].selected=W),W&&S&&(h[b].defaultSelected=!0)}else{for(b=""+Va(b),m=null,W=0;W<h.length;W++){if(h[W].value===b){h[W].selected=!0,S&&(h[W].defaultSelected=!0);return}m!==null||h[W].disabled||(m=h[W])}m!==null&&(m.selected=!0)}}function To(h,m,b){if(m!=null&&(m=""+Va(m),m!==h.value&&(h.value=m),b==null)){h.defaultValue!==m&&(h.defaultValue=m);return}h.defaultValue=b!=null?""+Va(b):""}function za(h,m,b,S){if(m==null){if(S!=null){if(b!=null)throw Error(n(92));if(ve(S)){if(1<S.length)throw Error(n(93));S=S[0]}b=S}b==null&&(b=""),m=b}b=Va(m),h.defaultValue=b,S=h.textContent,S===b&&S!==""&&S!==null&&(h.value=S),Xn(h)}function zs(h,m){if(m){var b=h.firstChild;if(b&&b===h.lastChild&&b.nodeType===3){b.nodeValue=m;return}}h.textContent=m}var qa=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function go(h,m,b){var S=m.indexOf("--")===0;b==null||typeof b=="boolean"||b===""?S?h.setProperty(m,""):m==="float"?h.cssFloat="":h[m]="":S?h.setProperty(m,b):typeof b!="number"||b===0||qa.has(m)?m==="float"?h.cssFloat=b:h[m]=(""+b).trim():h[m]=b+"px"}function no(h,m,b){if(m!=null&&typeof m!="object")throw Error(n(62));if(h=h.style,b!=null){for(var S in b)!b.hasOwnProperty(S)||m!=null&&m.hasOwnProperty(S)||(S.indexOf("--")===0?h.setProperty(S,""):S==="float"?h.cssFloat="":h[S]="");for(var W in m)S=m[W],m.hasOwnProperty(W)&&b[W]!==S&&go(h,W,S)}else for(var Z in m)m.hasOwnProperty(Z)&&go(h,Z,m[Z])}function zo(h){if(h.indexOf("-")===-1)return!1;switch(h){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ht=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),V=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ie(h){return V.test(""+h)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":h}function le(){}var F=null;function z(h){return h=h.target||h.srcElement||window,h.correspondingUseElement&&(h=h.correspondingUseElement),h.nodeType===3?h.parentNode:h}var te=null,fe=null;function Se(h){var m=ra(h);if(m&&(h=m.stateNode)){var b=h[qs]||null;e:switch(h=m.stateNode,m.type){case"input":if(Vo(h,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name),m=b.name,b.type==="radio"&&m!=null){for(b=h;b.parentNode;)b=b.parentNode;for(b=b.querySelectorAll('input[name="'+Hi(""+m)+'"][type="radio"]'),m=0;m<b.length;m++){var S=b[m];if(S!==h&&S.form===h.form){var W=S[qs]||null;if(!W)throw Error(n(90));Vo(S,W.value,W.defaultValue,W.defaultValue,W.checked,W.defaultChecked,W.type,W.name)}}for(m=0;m<b.length;m++)S=b[m],S.form===h.form&&hs(S)}break e;case"textarea":To(h,b.value,b.defaultValue);break e;case"select":m=b.value,m!=null&&fs(h,!!b.multiple,m,!1)}}}var $e=!1;function ct(h,m,b){if($e)return h(m,b);$e=!0;try{var S=h(m);return S}finally{if($e=!1,(te!==null||fe!==null)&&(Iu(),te&&(m=te,h=fe,fe=te=null,Se(m),h)))for(m=0;m<h.length;m++)Se(h[m])}}function P(h,m){var b=h.stateNode;if(b===null)return null;var S=b[qs]||null;if(S===null)return null;b=S[m];e:switch(m){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(S=!S.disabled)||(h=h.type,S=!(h==="button"||h==="input"||h==="select"||h==="textarea")),h=!S;break e;default:h=!1}if(h)return null;if(b&&typeof b!="function")throw Error(n(231,m,typeof b));return b}var k=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),D=!1;if(k)try{var G={};Object.defineProperty(G,"passive",{get:function(){D=!0}}),window.addEventListener("test",G,G),window.removeEventListener("test",G,G)}catch{D=!1}var X=null,ee=null,ye=null;function he(){if(ye)return ye;var h,m=ee,b=m.length,S,W="value"in X?X.value:X.textContent,Z=W.length;for(h=0;h<b&&m[h]===W[h];h++);var Ne=b-h;for(S=1;S<=Ne&&m[b-S]===W[Z-S];S++);return ye=W.slice(h,1<S?1-S:void 0)}function me(h){var m=h.keyCode;return"charCode"in h?(h=h.charCode,h===0&&m===13&&(h=13)):h=m,h===10&&(h=13),32<=h||h===13?h:0}function Ie(){return!0}function Qe(){return!1}function qe(h){function m(b,S,W,Z,Ne){this._reactName=b,this._targetInst=W,this.type=S,this.nativeEvent=Z,this.target=Ne,this.currentTarget=null;for(var Ze in h)h.hasOwnProperty(Ze)&&(b=h[Ze],this[Ze]=b?b(Z):Z[Ze]);return this.isDefaultPrevented=(Z.defaultPrevented!=null?Z.defaultPrevented:Z.returnValue===!1)?Ie:Qe,this.isPropagationStopped=Qe,this}return f(m.prototype,{preventDefault:function(){this.defaultPrevented=!0;var b=this.nativeEvent;b&&(b.preventDefault?b.preventDefault():typeof b.returnValue!="unknown"&&(b.returnValue=!1),this.isDefaultPrevented=Ie)},stopPropagation:function(){var b=this.nativeEvent;b&&(b.stopPropagation?b.stopPropagation():typeof b.cancelBubble!="unknown"&&(b.cancelBubble=!0),this.isPropagationStopped=Ie)},persist:function(){},isPersistent:Ie}),m}var lt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(h){return h.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Te=qe(lt),Et=f({},lt,{view:0,detail:0}),at=qe(Et),Ct,et,Pt,qt=f({},Et,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Lr,button:0,buttons:0,relatedTarget:function(h){return h.relatedTarget===void 0?h.fromElement===h.srcElement?h.toElement:h.fromElement:h.relatedTarget},movementX:function(h){return"movementX"in h?h.movementX:(h!==Pt&&(Pt&&h.type==="mousemove"?(Ct=h.screenX-Pt.screenX,et=h.screenY-Pt.screenY):et=Ct=0,Pt=h),Ct)},movementY:function(h){return"movementY"in h?h.movementY:et}}),It=qe(qt),Je=f({},qt,{dataTransfer:0}),zt=qe(Je),Sr=f({},Et,{relatedTarget:0}),ir=qe(Sr),Mt=f({},lt,{animationName:0,elapsedTime:0,pseudoElement:0}),xr=qe(Mt),st=f({},lt,{clipboardData:function(h){return"clipboardData"in h?h.clipboardData:window.clipboardData}}),mt=qe(st),Ot=f({},lt,{data:0}),Rt=qe(Ot),Ar={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Br={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ar(h){var m=this.nativeEvent;return m.getModifierState?m.getModifierState(h):(h=Br[h])?!!m[h]:!1}function Lr(){return ar}var hn=f({},Et,{key:function(h){if(h.key){var m=Ar[h.key]||h.key;if(m!=="Unidentified")return m}return h.type==="keypress"?(h=me(h),h===13?"Enter":String.fromCharCode(h)):h.type==="keydown"||h.type==="keyup"?jr[h.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Lr,charCode:function(h){return h.type==="keypress"?me(h):0},keyCode:function(h){return h.type==="keydown"||h.type==="keyup"?h.keyCode:0},which:function(h){return h.type==="keypress"?me(h):h.type==="keydown"||h.type==="keyup"?h.keyCode:0}}),tn=qe(hn),We=f({},qt,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),St=qe(We),Nt=f({},Et,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Lr}),Gt=qe(Nt),Xt=f({},lt,{propertyName:0,elapsedTime:0,pseudoElement:0}),cr=qe(Xt),Nr=f({},qt,{deltaX:function(h){return"deltaX"in h?h.deltaX:"wheelDeltaX"in h?-h.wheelDeltaX:0},deltaY:function(h){return"deltaY"in h?h.deltaY:"wheelDeltaY"in h?-h.wheelDeltaY:"wheelDelta"in h?-h.wheelDelta:0},deltaZ:0,deltaMode:0}),Cr=qe(Nr),Gr=f({},lt,{newState:0,oldState:0}),un=qe(Gr),En=[9,13,27,32],Rn=k&&"CompositionEvent"in window,yi=null;k&&"documentMode"in document&&(yi=document.documentMode);var pt=k&&"TextEvent"in window&&!yi,Sn=k&&(!Rn||yi&&8<yi&&11>=yi),Ri=" ",Tn=!1;function nn(h,m){switch(h){case"keyup":return En.indexOf(m.keyCode)!==-1;case"keydown":return m.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ji(h){return h=h.detail,typeof h=="object"&&"data"in h?h.data:null}var Fn=!1;function Hn(h,m){switch(h){case"compositionend":return ji(m);case"keypress":return m.which!==32?null:(Tn=!0,Ri);case"textInput":return h=m.data,h===Ri&&Tn?null:h;default:return null}}function $n(h,m){if(Fn)return h==="compositionend"||!Rn&&nn(h,m)?(h=he(),ye=ee=X=null,Fn=!1,h):null;switch(h){case"paste":return null;case"keypress":if(!(m.ctrlKey||m.altKey||m.metaKey)||m.ctrlKey&&m.altKey){if(m.char&&1<m.char.length)return m.char;if(m.which)return String.fromCharCode(m.which)}return null;case"compositionend":return Sn&&m.locale!=="ko"?null:m.data;default:return null}}var ga={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Di(h){var m=h&&h.nodeName&&h.nodeName.toLowerCase();return m==="input"?!!ga[h.type]:m==="textarea"}function Gn(h,m,b,S){te?fe?fe.push(S):fe=[S]:te=S,m=v_(m,"onChange"),0<m.length&&(b=new Te("onChange","change",null,b,S),h.push({event:b,listeners:m}))}var ns=null,_i=null;function Un(h){g6(h,0)}function ki(h){var m=Ya(h);if(hs(m))return h}function Wn(h,m){if(h==="change")return m}var Gi=!1;if(k){var is;if(k){var Zi="oninput"in document;if(!Zi){var vs=document.createElement("div");vs.setAttribute("oninput","return;"),Zi=typeof vs.oninput=="function"}is=Zi}else is=!1;Gi=is&&(!document.documentMode||9<document.documentMode)}function ja(){ns&&(ns.detachEvent("onpropertychange",xi),_i=ns=null)}function xi(h){if(h.propertyName==="value"&&ki(_i)){var m=[];Gn(m,_i,h,z(h)),ct(Un,m)}}function Ys(h,m,b){h==="focusin"?(ja(),ns=m,_i=b,ns.attachEvent("onpropertychange",xi)):h==="focusout"&&ja()}function Qi(h){if(h==="selectionchange"||h==="keyup"||h==="keydown")return ki(_i)}function ai(h,m){if(h==="click")return ki(m)}function da(h,m){if(h==="input"||h==="change")return ki(m)}function Ii(h,m){return h===m&&(h!==0||1/h===1/m)||h!==h&&m!==m}var xn=typeof Object.is=="function"?Object.is:Ii;function ls(h,m){if(xn(h,m))return!0;if(typeof h!="object"||h===null||typeof m!="object"||m===null)return!1;var b=Object.keys(h),S=Object.keys(m);if(b.length!==S.length)return!1;for(S=0;S<b.length;S++){var W=b[S];if(!Er.call(m,W)||!xn(h[W],m[W]))return!1}return!0}function wu(h){for(;h&&h.firstChild;)h=h.firstChild;return h}function io(h,m){var b=wu(h);h=0;for(var S;b;){if(b.nodeType===3){if(S=h+b.textContent.length,h<=m&&S>=m)return{node:b,offset:m-h};h=S}e:{for(;b;){if(b.nextSibling){b=b.nextSibling;break e}b=b.parentNode}b=void 0}b=wu(b)}}function Ko(h,m){return h&&m?h===m?!0:h&&h.nodeType===3?!1:m&&m.nodeType===3?Ko(h,m.parentNode):"contains"in h?h.contains(m):h.compareDocumentPosition?!!(h.compareDocumentPosition(m)&16):!1:!1}function Jl(h){h=h!=null&&h.ownerDocument!=null&&h.ownerDocument.defaultView!=null?h.ownerDocument.defaultView:window;for(var m=wa(h.document);m instanceof h.HTMLIFrameElement;){try{var b=typeof m.contentWindow.location.href=="string"}catch{b=!1}if(b)h=m.contentWindow;else break;m=wa(h.document)}return m}function bi(h){var m=h&&h.nodeName&&h.nodeName.toLowerCase();return m&&(m==="input"&&(h.type==="text"||h.type==="search"||h.type==="tel"||h.type==="url"||h.type==="password")||m==="textarea"||h.contentEditable==="true")}var Ra=k&&"documentMode"in document&&11>=document.documentMode,Xa=null,Ul=null,$l=null,ha=!1;function vo(h,m,b){var S=b.window===b?b.document:b.nodeType===9?b:b.ownerDocument;ha||Xa==null||Xa!==wa(S)||(S=Xa,"selectionStart"in S&&bi(S)?S={start:S.selectionStart,end:S.selectionEnd}:(S=(S.ownerDocument&&S.ownerDocument.defaultView||window).getSelection(),S={anchorNode:S.anchorNode,anchorOffset:S.anchorOffset,focusNode:S.focusNode,focusOffset:S.focusOffset}),$l&&ls($l,S)||($l=S,S=v_(Ul,"onSelect"),0<S.length&&(m=new Te("onSelect","select",null,m,b),h.push({event:m,listeners:S}),m.target=Xa)))}function Za(h,m){var b={};return b[h.toLowerCase()]=m.toLowerCase(),b["Webkit"+h]="webkit"+m,b["Moz"+h]="moz"+m,b}var Hc={animationend:Za("Animation","AnimationEnd"),animationiteration:Za("Animation","AnimationIteration"),animationstart:Za("Animation","AnimationStart"),transitionrun:Za("Transition","TransitionRun"),transitionstart:Za("Transition","TransitionStart"),transitioncancel:Za("Transition","TransitionCancel"),transitionend:Za("Transition","TransitionEnd")},Co={},pc={};k&&(pc=document.createElement("div").style,"AnimationEvent"in window||(delete Hc.animationend.animation,delete Hc.animationiteration.animation,delete Hc.animationstart.animation),"TransitionEvent"in window||delete Hc.transitionend.transition);function Ka(h){if(Co[h])return Co[h];if(!Hc[h])return h;var m=Hc[h],b;for(b in m)if(m.hasOwnProperty(b)&&b in pc)return Co[h]=m[b];return h}var Hl=Ka("animationend"),Ql=Ka("animationiteration"),Il=Ka("animationstart"),yd=Ka("transitionrun"),ec=Ka("transitionstart"),Vl=Ka("transitioncancel"),gc=Ka("transitionend"),xd=new Map,zl="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");zl.push("scrollEnd");function Kl(h,m){xd.set(h,m),po(m,[h])}var Eu=typeof reportError=="function"?reportError:function(h){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var m=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof h=="object"&&h!==null&&typeof h.message=="string"?String(h.message):String(h),error:h});if(!window.dispatchEvent(m))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",h);return}console.error(h)},Gl=[],Lo=0,gl=0;function iu(){for(var h=Lo,m=gl=Lo=0;m<h;){var b=Gl[m];Gl[m++]=null;var S=Gl[m];Gl[m++]=null;var W=Gl[m];Gl[m++]=null;var Z=Gl[m];if(Gl[m++]=null,S!==null&&W!==null){var Ne=S.pending;Ne===null?W.next=W:(W.next=Ne.next,Ne.next=W),S.pending=W}Z!==0&&Gu(b,W,Z)}}function vc(h,m,b,S){Gl[Lo++]=h,Gl[Lo++]=m,Gl[Lo++]=b,Gl[Lo++]=S,gl|=S,h.lanes|=S,h=h.alternate,h!==null&&(h.lanes|=S)}function Hd(h,m,b,S){return vc(h,m,b,S),bd(h)}function tc(h,m){return vc(h,null,null,m),bd(h)}function Gu(h,m,b){h.lanes|=b;var S=h.alternate;S!==null&&(S.lanes|=b);for(var W=!1,Z=h.return;Z!==null;)Z.childLanes|=b,S=Z.alternate,S!==null&&(S.childLanes|=b),Z.tag===22&&(h=Z.stateNode,h===null||h._visibility&1||(W=!0)),h=Z,Z=Z.return;return h.tag===3?(Z=h.stateNode,W&&m!==null&&(W=31-zr(b),h=Z.hiddenUpdates,S=h[W],S===null?h[W]=[m]:S.push(m),m.lane=b|536870912),Z):null}function bd(h){if(50<ua)throw ua=0,ya=null,Error(n(185));for(var m=h.return;m!==null;)h=m,m=h.return;return h.tag===3?h.stateNode:null}var vl={};function sh(h,m,b,S){this.tag=h,this.key=b,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=m,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=S,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ll(h,m,b,S){return new sh(h,m,b,S)}function Fi(h){return h=h.prototype,!(!h||!h.isReactComponent)}function yc(h,m){var b=h.alternate;return b===null?(b=Ll(h.tag,m,h.key,h.mode),b.elementType=h.elementType,b.type=h.type,b.stateNode=h.stateNode,b.alternate=h,h.alternate=b):(b.pendingProps=m,b.type=h.type,b.flags=0,b.subtreeFlags=0,b.deletions=null),b.flags=h.flags&65011712,b.childLanes=h.childLanes,b.lanes=h.lanes,b.child=h.child,b.memoizedProps=h.memoizedProps,b.memoizedState=h.memoizedState,b.updateQueue=h.updateQueue,m=h.dependencies,b.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext},b.sibling=h.sibling,b.index=h.index,b.ref=h.ref,b.refCleanup=h.refCleanup,b}function Qc(h,m){h.flags&=65011714;var b=h.alternate;return b===null?(h.childLanes=0,h.lanes=m,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=b.childLanes,h.lanes=b.lanes,h.child=b.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=b.memoizedProps,h.memoizedState=b.memoizedState,h.updateQueue=b.updateQueue,h.type=b.type,m=b.dependencies,h.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext}),h}function Vc(h,m,b,S,W,Z){var Ne=0;if(S=h,typeof h=="function")Fi(h)&&(Ne=1);else if(typeof h=="string")Ne=$le(h,b,je.current)?26:h==="html"||h==="head"||h==="body"?27:5;else e:switch(h){case Y:return h=Ll(31,b,m,W),h.elementType=Y,h.lanes=Z,h;case y:return Wu(b.children,W,Z,m);case x:Ne=8,W|=24;break;case w:return h=Ll(12,b,m,W|2),h.elementType=w,h.lanes=Z,h;case N:return h=Ll(13,b,m,W),h.elementType=N,h.lanes=Z,h;case I:return h=Ll(19,b,m,W),h.elementType=I,h.lanes=Z,h;default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case T:Ne=10;break e;case E:Ne=9;break e;case C:Ne=11;break e;case U:Ne=14;break e;case K:Ne=16,S=null;break e}Ne=29,b=Error(n(130,h===null?"null":typeof h,"")),S=null}return m=Ll(Ne,b,m,W),m.elementType=h,m.type=S,m.lanes=Z,m}function Wu(h,m,b,S){return h=Ll(7,h,S,m),h.lanes=b,h}function xc(h,m,b){return h=Ll(6,h,null,m),h.lanes=b,h}function Bo(h){var m=Ll(18,null,null,0);return m.stateNode=h,m}function su(h,m,b){return m=Ll(4,h.children!==null?h.children:[],h.key,m),m.lanes=b,m.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},m}var v=new WeakMap;function _(h,m){if(typeof h=="object"&&h!==null){var b=v.get(h);return b!==void 0?b:(m={value:h,source:m,stack:Tt(m)},v.set(h,m),m)}return{value:h,source:m,stack:Tt(m)}}var H=[],oe=0,Ee=null,Ve=0,jt=[],Jt=0,br=null,Vr=1,vn="";function ui(h,m){H[oe++]=Ve,H[oe++]=Ee,Ee=h,Ve=m}function As(h,m,b){jt[Jt++]=Vr,jt[Jt++]=vn,jt[Jt++]=br,br=h;var S=Vr;h=vn;var W=32-zr(S)-1;S&=~(1<<W),b+=1;var Z=32-zr(m)+W;if(30<Z){var Ne=W-W%5;Z=(S&(1<<Ne)-1).toString(32),S>>=Ne,W-=Ne,Vr=1<<32-zr(m)+W|b<<W|S,vn=Z+h}else Vr=1<<Z|b<<W|S,vn=h}function Da(h){h.return!==null&&(ui(h,1),As(h,1,0))}function jo(h){for(;h===Ee;)Ee=H[--oe],H[oe]=null,Ve=H[--oe],H[oe]=null;for(;h===br;)br=jt[--Jt],jt[Jt]=null,vn=jt[--Jt],jt[Jt]=null,Vr=jt[--Jt],jt[Jt]=null}function il(h,m){jt[Jt++]=Vr,jt[Jt++]=vn,jt[Jt++]=br,Vr=m.id,vn=m.overflow,br=h}var Zs=null,la=null,jn=!1,Yu=null,bc=!1,wd=Error(n(519));function Wl(h){var m=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw wc(_(m,h)),wd}function _u(h){var m=h.stateNode,b=h.type,S=h.memoizedProps;switch(m[rs]=h,m[qs]=S,b){case"dialog":_a("cancel",m),_a("close",m);break;case"iframe":case"object":case"embed":_a("load",m);break;case"video":case"audio":for(b=0;b<T1.length;b++)_a(T1[b],m);break;case"source":_a("error",m);break;case"img":case"image":case"link":_a("error",m),_a("load",m);break;case"details":_a("toggle",m);break;case"input":_a("invalid",m),Ea(m,S.value,S.defaultValue,S.checked,S.defaultChecked,S.type,S.name,!0);break;case"select":_a("invalid",m);break;case"textarea":_a("invalid",m),za(m,S.value,S.defaultValue,S.children)}b=S.children,typeof b!="string"&&typeof b!="number"&&typeof b!="bigint"||m.textContent===""+b||S.suppressHydrationWarning===!0||b6(m.textContent,b)?(S.popover!=null&&(_a("beforetoggle",m),_a("toggle",m)),S.onScroll!=null&&_a("scroll",m),S.onScrollEnd!=null&&_a("scrollend",m),S.onClick!=null&&(m.onclick=le),m=!0):m=!1,m||Wl(h,!0)}function so(h){for(Zs=h.return;Zs;)switch(Zs.tag){case 5:case 31:case 13:bc=!1;return;case 27:case 3:bc=!0;return;default:Zs=Zs.return}}function Su(h){if(h!==Zs)return!1;if(!jn)return so(h),jn=!0,!1;var m=h.tag,b;if((b=m!==3&&m!==27)&&((b=m===5)&&(b=h.type,b=!(b!=="form"&&b!=="button")||xk(h.type,h.memoizedProps)),b=!b),b&&la&&Wl(h),so(h),m===13){if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(n(317));la=k6(h)}else if(m===31){if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(n(317));la=k6(h)}else m===27?(m=la,Dg(h.type)?(h=Sk,Sk=null,la=h):la=m):la=Zs?Lf(h.stateNode.nextSibling):null;return!0}function Go(){la=Zs=null,jn=!1}function Ed(){var h=Yu;return h!==null&&(Ut===null?Ut=h:Ut.push.apply(Ut,h),Yu=null),h}function wc(h){Yu===null?Yu=[h]:Yu.push(h)}var Qd=be(null),Yl=null,Tu=null;function Ec(h,m,b){xe(Qd,m._currentValue),m._currentValue=b}function zc(h){h._currentValue=Qd.current,de(Qd)}function Eh(h,m,b){for(;h!==null;){var S=h.alternate;if((h.childLanes&m)!==m?(h.childLanes|=m,S!==null&&(S.childLanes|=m)):S!==null&&(S.childLanes&m)!==m&&(S.childLanes|=m),h===b)break;h=h.return}}function au(h,m,b,S){var W=h.child;for(W!==null&&(W.return=h);W!==null;){var Z=W.dependencies;if(Z!==null){var Ne=W.child;Z=Z.firstContext;e:for(;Z!==null;){var Ze=Z;Z=W;for(var Bt=0;Bt<m.length;Bt++)if(Ze.context===m[Bt]){Z.lanes|=b,Ze=Z.alternate,Ze!==null&&(Ze.lanes|=b),Eh(Z.return,b,h),S||(Ne=null);break e}Z=Ze.next}}else if(W.tag===18){if(Ne=W.return,Ne===null)throw Error(n(341));Ne.lanes|=b,Z=Ne.alternate,Z!==null&&(Z.lanes|=b),Eh(Ne,b,h),Ne=null}else Ne=W.child;if(Ne!==null)Ne.return=W;else for(Ne=W;Ne!==null;){if(Ne===h){Ne=null;break}if(W=Ne.sibling,W!==null){W.return=Ne.return,Ne=W;break}Ne=Ne.return}W=Ne}}function _d(h,m,b,S){h=null;for(var W=m,Z=!1;W!==null;){if(!Z){if((W.flags&524288)!==0)Z=!0;else if((W.flags&262144)!==0)break}if(W.tag===10){var Ne=W.alternate;if(Ne===null)throw Error(n(387));if(Ne=Ne.memoizedProps,Ne!==null){var Ze=W.type;xn(W.pendingProps.value,Ne.value)||(h!==null?h.push(Ze):h=[Ze])}}else if(W===it.current){if(Ne=W.alternate,Ne===null)throw Error(n(387));Ne.memoizedState.memoizedState!==W.memoizedState.memoizedState&&(h!==null?h.push(I1):h=[I1])}W=W.return}h!==null&&au(m,h,b,S),m.flags|=262144}function ah(h){for(h=h.firstContext;h!==null;){if(!xn(h.context._currentValue,h.memoizedValue))return!0;h=h.next}return!1}function Kc(h){Yl=h,Tu=null,h=h.dependencies,h!==null&&(h.firstContext=null)}function yo(h){return aA(Yl,h)}function _h(h,m){return Yl===null&&Kc(h),aA(h,m)}function aA(h,m){var b=m._currentValue;if(m={context:m,memoizedValue:b,next:null},Tu===null){if(h===null)throw Error(n(308));Tu=m,h.dependencies={lanes:0,firstContext:m},h.flags|=524288}else Tu=Tu.next=m;return b}var VA=typeof AbortController<"u"?AbortController:function(){var h=[],m=this.signal={aborted:!1,addEventListener:function(b,S){h.push(S)}};this.abort=function(){m.aborted=!0,h.forEach(function(b){return b()})}},oh=t.unstable_scheduleCallback,lh=t.unstable_NormalPriority,Po={$$typeof:T,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ch(){return{controller:new VA,data:new Map,refCount:0}}function Sh(h){h.refCount--,h.refCount===0&&oh(lh,function(){h.controller.abort()})}var ue=null,Fe=0,yt=0,Lt=null;function er(h,m){if(ue===null){var b=ue=[];Fe=0,yt=dk(),Lt={status:"pending",value:void 0,then:function(S){b.push(S)}}}return Fe++,m.then($r,$r),m}function $r(){if(--Fe===0&&ue!==null){Lt!==null&&(Lt.status="fulfilled");var h=ue;ue=null,yt=0,Lt=null;for(var m=0;m<h.length;m++)(0,h[m])()}}function Zr(h,m){var b=[],S={status:"pending",value:null,reason:null,then:function(W){b.push(W)}};return h.then(function(){S.status="fulfilled",S.value=m;for(var W=0;W<b.length;W++)(0,b[W])(m)},function(W){for(S.status="rejected",S.reason=W,W=0;W<b.length;W++)(0,b[W])(void 0)}),S}var ti=ne.S;ne.S=function(h,m){Fr=dn(),typeof m=="object"&&m!==null&&typeof m.then=="function"&&er(h,m),ti!==null&&ti(h,m)};var ri=be(null);function Yi(){var h=ri.current;return h!==null?h:Aa.pooledCache}function as(h,m){m===null?xe(ri,ri.current):xe(ri,m.pool)}function na(){var h=Yi();return h===null?null:{parent:Po._currentValue,pool:h}}var Ma=Error(n(460)),Oo=Error(n(474)),Na=Error(n(542)),Wo={then:function(){}};function O(h){return h=h.status,h==="fulfilled"||h==="rejected"}function Pe(h,m,b){switch(b=h[b],b===void 0?h.push(m):b!==m&&(m.then(le,le),m=b),m.status){case"fulfilled":return m.value;case"rejected":throw h=m.reason,xt(h),h;default:if(typeof m.status=="string")m.then(le,le);else{if(h=Aa,h!==null&&100<h.shellSuspendCounter)throw Error(n(482));h=m,h.status="pending",h.then(function(S){if(m.status==="pending"){var W=m;W.status="fulfilled",W.value=S}},function(S){if(m.status==="pending"){var W=m;W.status="rejected",W.reason=S}})}switch(m.status){case"fulfilled":return m.value;case"rejected":throw h=m.reason,xt(h),h}throw Ye=m,Ma}}function J(h){try{var m=h._init;return m(h._payload)}catch(b){throw b!==null&&typeof b=="object"&&typeof b.then=="function"?(Ye=b,Ma):b}}var Ye=null;function bt(){if(Ye===null)throw Error(n(459));var h=Ye;return Ye=null,h}function xt(h){if(h===Ma||h===Na)throw Error(n(483))}var mr=null,Kt=0;function Dn(h){var m=Kt;return Kt+=1,mr===null&&(mr=[]),Pe(mr,h,m)}function Ft(h,m){m=m.props.ref,h.ref=m!==void 0?m:null}function gr(h,m){throw m.$$typeof===A?Error(n(525)):(h=Object.prototype.toString.call(m),Error(n(31,h==="[object Object]"?"object with keys {"+Object.keys(m).join(", ")+"}":h)))}function qi(h){function m(sr,Vt){if(h){var wr=sr.deletions;wr===null?(sr.deletions=[Vt],sr.flags|=16):wr.push(Vt)}}function b(sr,Vt){if(!h)return null;for(;Vt!==null;)m(sr,Vt),Vt=Vt.sibling;return null}function S(sr){for(var Vt=new Map;sr!==null;)sr.key!==null?Vt.set(sr.key,sr):Vt.set(sr.index,sr),sr=sr.sibling;return Vt}function W(sr,Vt){return sr=yc(sr,Vt),sr.index=0,sr.sibling=null,sr}function Z(sr,Vt,wr){return sr.index=wr,h?(wr=sr.alternate,wr!==null?(wr=wr.index,wr<Vt?(sr.flags|=67108866,Vt):wr):(sr.flags|=67108866,Vt)):(sr.flags|=1048576,Vt)}function Ne(sr){return h&&sr.alternate===null&&(sr.flags|=67108866),sr}function Ze(sr,Vt,wr,Wr){return Vt===null||Vt.tag!==6?(Vt=xc(wr,sr.mode,Wr),Vt.return=sr,Vt):(Vt=W(Vt,wr),Vt.return=sr,Vt)}function Bt(sr,Vt,wr,Wr){var Xi=wr.type;return Xi===y?Qr(sr,Vt,wr.props.children,Wr,wr.key):Vt!==null&&(Vt.elementType===Xi||typeof Xi=="object"&&Xi!==null&&Xi.$$typeof===K&&J(Xi)===Vt.type)?(Vt=W(Vt,wr.props),Ft(Vt,wr),Vt.return=sr,Vt):(Vt=Vc(wr.type,wr.key,wr.props,null,sr.mode,Wr),Ft(Vt,wr),Vt.return=sr,Vt)}function _r(sr,Vt,wr,Wr){return Vt===null||Vt.tag!==4||Vt.stateNode.containerInfo!==wr.containerInfo||Vt.stateNode.implementation!==wr.implementation?(Vt=su(wr,sr.mode,Wr),Vt.return=sr,Vt):(Vt=W(Vt,wr.children||[]),Vt.return=sr,Vt)}function Qr(sr,Vt,wr,Wr,Xi){return Vt===null||Vt.tag!==7?(Vt=Wu(wr,sr.mode,Wr,Xi),Vt.return=sr,Vt):(Vt=W(Vt,wr),Vt.return=sr,Vt)}function qr(sr,Vt,wr){if(typeof Vt=="string"&&Vt!==""||typeof Vt=="number"||typeof Vt=="bigint")return Vt=xc(""+Vt,sr.mode,wr),Vt.return=sr,Vt;if(typeof Vt=="object"&&Vt!==null){switch(Vt.$$typeof){case p:return wr=Vc(Vt.type,Vt.key,Vt.props,null,sr.mode,wr),Ft(wr,Vt),wr.return=sr,wr;case g:return Vt=su(Vt,sr.mode,wr),Vt.return=sr,Vt;case K:return Vt=J(Vt),qr(sr,Vt,wr)}if(ve(Vt)||Ae(Vt))return Vt=Wu(Vt,sr.mode,wr,null),Vt.return=sr,Vt;if(typeof Vt.then=="function")return qr(sr,Dn(Vt),wr);if(Vt.$$typeof===T)return qr(sr,_h(sr,Vt),wr);gr(sr,Vt)}return null}function Tr(sr,Vt,wr,Wr){var Xi=Vt!==null?Vt.key:null;if(typeof wr=="string"&&wr!==""||typeof wr=="number"||typeof wr=="bigint")return Xi!==null?null:Ze(sr,Vt,""+wr,Wr);if(typeof wr=="object"&&wr!==null){switch(wr.$$typeof){case p:return wr.key===Xi?Bt(sr,Vt,wr,Wr):null;case g:return wr.key===Xi?_r(sr,Vt,wr,Wr):null;case K:return wr=J(wr),Tr(sr,Vt,wr,Wr)}if(ve(wr)||Ae(wr))return Xi!==null?null:Qr(sr,Vt,wr,Wr,null);if(typeof wr.then=="function")return Tr(sr,Vt,Dn(wr),Wr);if(wr.$$typeof===T)return Tr(sr,Vt,_h(sr,wr),Wr);gr(sr,wr)}return null}function Ir(sr,Vt,wr,Wr,Xi){if(typeof Wr=="string"&&Wr!==""||typeof Wr=="number"||typeof Wr=="bigint")return sr=sr.get(wr)||null,Ze(Vt,sr,""+Wr,Xi);if(typeof Wr=="object"&&Wr!==null){switch(Wr.$$typeof){case p:return sr=sr.get(Wr.key===null?wr:Wr.key)||null,Bt(Vt,sr,Wr,Xi);case g:return sr=sr.get(Wr.key===null?wr:Wr.key)||null,_r(Vt,sr,Wr,Xi);case K:return Wr=J(Wr),Ir(sr,Vt,wr,Wr,Xi)}if(ve(Wr)||Ae(Wr))return sr=sr.get(wr)||null,Qr(Vt,sr,Wr,Xi,null);if(typeof Wr.then=="function")return Ir(sr,Vt,wr,Dn(Wr),Xi);if(Wr.$$typeof===T)return Ir(sr,Vt,wr,_h(Vt,Wr),Xi);gr(Vt,Wr)}return null}function wi(sr,Vt,wr,Wr){for(var Xi=null,uo=null,Pi=Vt,oa=Vt=0,La=null;Pi!==null&&oa<wr.length;oa++){Pi.index>oa?(La=Pi,Pi=null):La=Pi.sibling;var ho=Tr(sr,Pi,wr[oa],Wr);if(ho===null){Pi===null&&(Pi=La);break}h&&Pi&&ho.alternate===null&&m(sr,Pi),Vt=Z(ho,Vt,oa),uo===null?Xi=ho:uo.sibling=ho,uo=ho,Pi=La}if(oa===wr.length)return b(sr,Pi),jn&&ui(sr,oa),Xi;if(Pi===null){for(;oa<wr.length;oa++)Pi=qr(sr,wr[oa],Wr),Pi!==null&&(Vt=Z(Pi,Vt,oa),uo===null?Xi=Pi:uo.sibling=Pi,uo=Pi);return jn&&ui(sr,oa),Xi}for(Pi=S(Pi);oa<wr.length;oa++)La=Ir(Pi,sr,oa,wr[oa],Wr),La!==null&&(h&&La.alternate!==null&&Pi.delete(La.key===null?oa:La.key),Vt=Z(La,Vt,oa),uo===null?Xi=La:uo.sibling=La,uo=La);return h&&Pi.forEach(function(Hg){return m(sr,Hg)}),jn&&ui(sr,oa),Xi}function us(sr,Vt,wr,Wr){if(wr==null)throw Error(n(151));for(var Xi=null,uo=null,Pi=Vt,oa=Vt=0,La=null,ho=wr.next();Pi!==null&&!ho.done;oa++,ho=wr.next()){Pi.index>oa?(La=Pi,Pi=null):La=Pi.sibling;var Hg=Tr(sr,Pi,ho.value,Wr);if(Hg===null){Pi===null&&(Pi=La);break}h&&Pi&&Hg.alternate===null&&m(sr,Pi),Vt=Z(Hg,Vt,oa),uo===null?Xi=Hg:uo.sibling=Hg,uo=Hg,Pi=La}if(ho.done)return b(sr,Pi),jn&&ui(sr,oa),Xi;if(Pi===null){for(;!ho.done;oa++,ho=wr.next())ho=qr(sr,ho.value,Wr),ho!==null&&(Vt=Z(ho,Vt,oa),uo===null?Xi=ho:uo.sibling=ho,uo=ho);return jn&&ui(sr,oa),Xi}for(Pi=S(Pi);!ho.done;oa++,ho=wr.next())ho=Ir(Pi,sr,oa,ho.value,Wr),ho!==null&&(h&&ho.alternate!==null&&Pi.delete(ho.key===null?oa:ho.key),Vt=Z(ho,Vt,oa),uo===null?Xi=ho:uo.sibling=ho,uo=ho);return h&&Pi.forEach(function(Zle){return m(sr,Zle)}),jn&&ui(sr,oa),Xi}function Zo(sr,Vt,wr,Wr){if(typeof wr=="object"&&wr!==null&&wr.type===y&&wr.key===null&&(wr=wr.props.children),typeof wr=="object"&&wr!==null){switch(wr.$$typeof){case p:e:{for(var Xi=wr.key;Vt!==null;){if(Vt.key===Xi){if(Xi=wr.type,Xi===y){if(Vt.tag===7){b(sr,Vt.sibling),Wr=W(Vt,wr.props.children),Wr.return=sr,sr=Wr;break e}}else if(Vt.elementType===Xi||typeof Xi=="object"&&Xi!==null&&Xi.$$typeof===K&&J(Xi)===Vt.type){b(sr,Vt.sibling),Wr=W(Vt,wr.props),Ft(Wr,wr),Wr.return=sr,sr=Wr;break e}b(sr,Vt);break}else m(sr,Vt);Vt=Vt.sibling}wr.type===y?(Wr=Wu(wr.props.children,sr.mode,Wr,wr.key),Wr.return=sr,sr=Wr):(Wr=Vc(wr.type,wr.key,wr.props,null,sr.mode,Wr),Ft(Wr,wr),Wr.return=sr,sr=Wr)}return Ne(sr);case g:e:{for(Xi=wr.key;Vt!==null;){if(Vt.key===Xi)if(Vt.tag===4&&Vt.stateNode.containerInfo===wr.containerInfo&&Vt.stateNode.implementation===wr.implementation){b(sr,Vt.sibling),Wr=W(Vt,wr.children||[]),Wr.return=sr,sr=Wr;break e}else{b(sr,Vt);break}else m(sr,Vt);Vt=Vt.sibling}Wr=su(wr,sr.mode,Wr),Wr.return=sr,sr=Wr}return Ne(sr);case K:return wr=J(wr),Zo(sr,Vt,wr,Wr)}if(ve(wr))return wi(sr,Vt,wr,Wr);if(Ae(wr)){if(Xi=Ae(wr),typeof Xi!="function")throw Error(n(150));return wr=Xi.call(wr),us(sr,Vt,wr,Wr)}if(typeof wr.then=="function")return Zo(sr,Vt,Dn(wr),Wr);if(wr.$$typeof===T)return Zo(sr,Vt,_h(sr,wr),Wr);gr(sr,wr)}return typeof wr=="string"&&wr!==""||typeof wr=="number"||typeof wr=="bigint"?(wr=""+wr,Vt!==null&&Vt.tag===6?(b(sr,Vt.sibling),Wr=W(Vt,wr),Wr.return=sr,sr=Wr):(b(sr,Vt),Wr=xc(wr,sr.mode,Wr),Wr.return=sr,sr=Wr),Ne(sr)):b(sr,Vt)}return function(sr,Vt,wr,Wr){try{Kt=0;var Xi=Zo(sr,Vt,wr,Wr);return mr=null,Xi}catch(Pi){if(Pi===Ma||Pi===Na)throw Pi;var uo=Ll(29,Pi,null,sr.mode);return uo.lanes=Wr,uo.return=sr,uo}}}var Nn=qi(!0),en=qi(!1),Pr=!1;function Fa(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Wi(h,m){h=h.updateQueue,m.updateQueue===h&&(m.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,callbacks:null})}function Ni(h){return{lane:h,tag:0,payload:null,callback:null,next:null}}function Vi(h,m,b){var S=h.updateQueue;if(S===null)return null;if(S=S.shared,(va&2)!==0){var W=S.pending;return W===null?m.next=m:(m.next=W.next,W.next=m),S.pending=m,m=bd(h),Gu(h,null,b),m}return vc(h,S,m,b),bd(h)}function ys(h,m,b){if(m=m.updateQueue,m!==null&&(m=m.shared,(b&4194048)!==0)){var S=m.lanes;S&=h.pendingLanes,b|=S,m.lanes=b,ss(h,b)}}function bn(h,m){var b=h.updateQueue,S=h.alternate;if(S!==null&&(S=S.updateQueue,b===S)){var W=null,Z=null;if(b=b.firstBaseUpdate,b!==null){do{var Ne={lane:b.lane,tag:b.tag,payload:b.payload,callback:null,next:null};Z===null?W=Z=Ne:Z=Z.next=Ne,b=b.next}while(b!==null);Z===null?W=Z=m:Z=Z.next=m}else W=Z=m;b={baseState:S.baseState,firstBaseUpdate:W,lastBaseUpdate:Z,shared:S.shared,callbacks:S.callbacks},h.updateQueue=b;return}h=b.lastBaseUpdate,h===null?b.firstBaseUpdate=m:h.next=m,b.lastBaseUpdate=m}var xs=!1;function Ua(){if(xs){var h=Lt;if(h!==null)throw h}}function Si(h,m,b,S){xs=!1;var W=h.updateQueue;Pr=!1;var Z=W.firstBaseUpdate,Ne=W.lastBaseUpdate,Ze=W.shared.pending;if(Ze!==null){W.shared.pending=null;var Bt=Ze,_r=Bt.next;Bt.next=null,Ne===null?Z=_r:Ne.next=_r,Ne=Bt;var Qr=h.alternate;Qr!==null&&(Qr=Qr.updateQueue,Ze=Qr.lastBaseUpdate,Ze!==Ne&&(Ze===null?Qr.firstBaseUpdate=_r:Ze.next=_r,Qr.lastBaseUpdate=Bt))}if(Z!==null){var qr=W.baseState;Ne=0,Qr=_r=Bt=null,Ze=Z;do{var Tr=Ze.lane&-536870913,Ir=Tr!==Ze.lane;if(Ir?(Bs&Tr)===Tr:(S&Tr)===Tr){Tr!==0&&Tr===yt&&(xs=!0),Qr!==null&&(Qr=Qr.next={lane:0,tag:Ze.tag,payload:Ze.payload,callback:null,next:null});e:{var wi=h,us=Ze;Tr=m;var Zo=b;switch(us.tag){case 1:if(wi=us.payload,typeof wi=="function"){qr=wi.call(Zo,qr,Tr);break e}qr=wi;break e;case 3:wi.flags=wi.flags&-65537|128;case 0:if(wi=us.payload,Tr=typeof wi=="function"?wi.call(Zo,qr,Tr):wi,Tr==null)break e;qr=f({},qr,Tr);break e;case 2:Pr=!0}}Tr=Ze.callback,Tr!==null&&(h.flags|=64,Ir&&(h.flags|=8192),Ir=W.callbacks,Ir===null?W.callbacks=[Tr]:Ir.push(Tr))}else Ir={lane:Tr,tag:Ze.tag,payload:Ze.payload,callback:Ze.callback,next:null},Qr===null?(_r=Qr=Ir,Bt=qr):Qr=Qr.next=Ir,Ne|=Tr;if(Ze=Ze.next,Ze===null){if(Ze=W.shared.pending,Ze===null)break;Ir=Ze,Ze=Ir.next,Ir.next=null,W.lastBaseUpdate=Ir,W.shared.pending=null}}while(!0);Qr===null&&(Bt=qr),W.baseState=Bt,W.firstBaseUpdate=_r,W.lastBaseUpdate=Qr,Z===null&&(W.shared.lanes=0),$|=Ne,h.lanes=Ne,h.memoizedState=qr}}function ia(h,m){if(typeof h!="function")throw Error(n(191,h));h.call(m)}function ks(h,m){var b=h.callbacks;if(b!==null)for(h.callbacks=null,h=0;h<b.length;h++)ia(b[h],m)}var ni=be(null),$i=be(0);function rc(h,m){h=B,xe($i,h),xe(ni,m),B=h|m.baseLanes}function qu(){xe($i,B),xe(ni,ni.current)}function ou(){B=$i.current,de(ni),de($i)}var yl=be(null),nc=null;function ao(h){var m=h.alternate;xe(Ro,Ro.current&1),xe(yl,h),nc===null&&(m===null||ni.current!==null||m.memoizedState!==null)&&(nc=h)}function zA(h){xe(Ro,Ro.current),xe(yl,h),nc===null&&(nc=h)}function uh(h){h.tag===22?(xe(Ro,Ro.current),xe(yl,h),nc===null&&(nc=h)):Gc()}function Gc(){xe(Ro,Ro.current),xe(yl,yl.current)}function Wc(h){de(yl),nc===h&&(nc=null),de(Ro)}var Ro=be(0);function Tf(h){for(var m=h;m!==null;){if(m.tag===13){var b=m.memoizedState;if(b!==null&&(b=b.dehydrated,b===null||Ek(b)||_k(b)))return m}else if(m.tag===19&&(m.memoizedProps.revealOrder==="forwards"||m.memoizedProps.revealOrder==="backwards"||m.memoizedProps.revealOrder==="unstable_legacy-backwards"||m.memoizedProps.revealOrder==="together")){if((m.flags&128)!==0)return m}else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===h)break;for(;m.sibling===null;){if(m.return===null||m.return===h)return null;m=m.return}m.sibling.return=m.return,m=m.sibling}return null}var Sd=0,Ji=null,fa=null,xo=null,Th=!1,Xu=!1,Td=!1,_c=0,Zu=0,sa=null,Ja=0;function Is(){throw Error(n(321))}function xl(h,m){if(m===null)return!1;for(var b=0;b<m.length&&b<h.length;b++)if(!xn(h[b],m[b]))return!1;return!0}function dh(h,m,b,S,W,Z){return Sd=Z,Ji=m,m.memoizedState=null,m.updateQueue=null,m.lanes=0,ne.H=h===null||h.memoizedState===null?ev:Ng,Td=!1,Z=b(S,W),Td=!1,Xu&&(Z=zh(m,b,S,W)),oA(h),Z}function oA(h){ne.H=dp;var m=fa!==null&&fa.next!==null;if(Sd=0,xo=fa=Ji=null,Th=!1,Zu=0,sa=null,m)throw Error(n(300));h===null||ze||(h=h.dependencies,h!==null&&ah(h)&&(ze=!0))}function zh(h,m,b,S){Ji=h;var W=0;do{if(Xu&&(sa=null),Zu=0,Xu=!1,25<=W)throw Error(n(301));if(W+=1,xo=fa=null,h.updateQueue!=null){var Z=h.updateQueue;Z.lastEffect=null,Z.events=null,Z.stores=null,Z.memoCache!=null&&(Z.memoCache.index=0)}ne.H=kg,Z=m(b,S)}while(Xu);return Z}function KA(){var h=ne.H,m=h.useState()[0];return m=typeof m.then=="function"?Kh(m):m,h=h.useState()[0],(fa!==null?fa.memoizedState:null)!==h&&(Ji.flags|=1024),m}function Jm(){var h=_c!==0;return _c=0,h}function ep(h,m,b){m.updateQueue=h.updateQueue,m.flags&=-2053,h.lanes&=~b}function tp(h){if(Th){for(h=h.memoizedState;h!==null;){var m=h.queue;m!==null&&(m.pending=null),h=h.next}Th=!1}Sd=0,xo=fa=Ji=null,Xu=!1,Zu=_c=0,sa=null}function Yc(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xo===null?Ji.memoizedState=xo=h:xo=xo.next=h,xo}function Yo(){if(fa===null){var h=Ji.alternate;h=h!==null?h.memoizedState:null}else h=fa.next;var m=xo===null?Ji.memoizedState:xo.next;if(m!==null)xo=m,fa=h;else{if(h===null)throw Ji.alternate===null?Error(n(467)):Error(n(310));fa=h,h={memoizedState:fa.memoizedState,baseState:fa.baseState,baseQueue:fa.baseQueue,queue:fa.queue,next:null},xo===null?Ji.memoizedState=xo=h:xo=xo.next=h}return xo}function rp(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Kh(h){var m=Zu;return Zu+=1,sa===null&&(sa=[]),h=Pe(sa,h,m),m=Ji,(xo===null?m.memoizedState:xo.next)===null&&(m=m.alternate,ne.H=m===null||m.memoizedState===null?ev:Ng),h}function np(h){if(h!==null&&typeof h=="object"){if(typeof h.then=="function")return Kh(h);if(h.$$typeof===T)return yo(h)}throw Error(n(438,String(h)))}function Cu(h){var m=null,b=Ji.updateQueue;if(b!==null&&(m=b.memoCache),m==null){var S=Ji.alternate;S!==null&&(S=S.updateQueue,S!==null&&(S=S.memoCache,S!=null&&(m={data:S.data.map(function(W){return W.slice()}),index:0})))}if(m==null&&(m={data:[],index:0}),b===null&&(b=rp(),Ji.updateQueue=b),b.memoCache=m,b=m.data[m.index],b===void 0)for(b=m.data[m.index]=Array(h),S=0;S<h;S++)b[S]=re;return m.index++,b}function Vd(h,m){return typeof m=="function"?m(h):m}function ip(h){var m=Yo();return mg(m,fa,h)}function mg(h,m,b){var S=h.queue;if(S===null)throw Error(n(311));S.lastRenderedReducer=b;var W=h.baseQueue,Z=S.pending;if(Z!==null){if(W!==null){var Ne=W.next;W.next=Z.next,Z.next=Ne}m.baseQueue=W=Z,S.pending=null}if(Z=h.baseState,W===null)h.memoizedState=Z;else{m=W.next;var Ze=Ne=null,Bt=null,_r=m,Qr=!1;do{var qr=_r.lane&-536870913;if(qr!==_r.lane?(Bs&qr)===qr:(Sd&qr)===qr){var Tr=_r.revertLane;if(Tr===0)Bt!==null&&(Bt=Bt.next={lane:0,revertLane:0,gesture:null,action:_r.action,hasEagerState:_r.hasEagerState,eagerState:_r.eagerState,next:null}),qr===yt&&(Qr=!0);else if((Sd&Tr)===Tr){_r=_r.next,Tr===yt&&(Qr=!0);continue}else qr={lane:0,revertLane:_r.revertLane,gesture:null,action:_r.action,hasEagerState:_r.hasEagerState,eagerState:_r.eagerState,next:null},Bt===null?(Ze=Bt=qr,Ne=Z):Bt=Bt.next=qr,Ji.lanes|=Tr,$|=Tr;qr=_r.action,Td&&b(Z,qr),Z=_r.hasEagerState?_r.eagerState:b(Z,qr)}else Tr={lane:qr,revertLane:_r.revertLane,gesture:_r.gesture,action:_r.action,hasEagerState:_r.hasEagerState,eagerState:_r.eagerState,next:null},Bt===null?(Ze=Bt=Tr,Ne=Z):Bt=Bt.next=Tr,Ji.lanes|=qr,$|=qr;_r=_r.next}while(_r!==null&&_r!==m);if(Bt===null?Ne=Z:Bt.next=Ze,!xn(Z,h.memoizedState)&&(ze=!0,Qr&&(b=Lt,b!==null)))throw b;h.memoizedState=Z,h.baseState=Ne,h.baseQueue=Bt,S.lastRenderedState=Z}return W===null&&(S.lanes=0),[h.memoizedState,S.dispatch]}function pg(h){var m=Yo(),b=m.queue;if(b===null)throw Error(n(311));b.lastRenderedReducer=h;var S=b.dispatch,W=b.pending,Z=m.memoizedState;if(W!==null){b.pending=null;var Ne=W=W.next;do Z=h(Z,Ne.action),Ne=Ne.next;while(Ne!==W);xn(Z,m.memoizedState)||(ze=!0),m.memoizedState=Z,m.baseQueue===null&&(m.baseState=Z),b.lastRenderedState=Z}return[Z,S]}function G0(h,m,b){var S=Ji,W=Yo(),Z=jn;if(Z){if(b===void 0)throw Error(n(407));b=b()}else b=m();var Ne=!xn((fa||W).memoizedState,b);if(Ne&&(W.memoizedState=b,ze=!0),W=W.queue,YA(sp.bind(null,S,W,h),[h]),W.getSnapshot!==m||Ne||xo!==null&&xo.memoizedState.tag&1){if(S.flags|=2048,WA(9,{destroy:void 0},gg.bind(null,S,W,b,m),null),Aa===null)throw Error(n(349));Z||(Sd&127)!==0||W0(S,m,b)}return b}function W0(h,m,b){h.flags|=16384,h={getSnapshot:m,value:b},m=Ji.updateQueue,m===null?(m=rp(),Ji.updateQueue=m,m.stores=[h]):(b=m.stores,b===null?m.stores=[h]:b.push(h))}function gg(h,m,b,S){m.value=b,m.getSnapshot=S,Ju(m)&&Cd(h)}function sp(h,m,b){return b(function(){Ju(m)&&Cd(h)})}function Ju(h){var m=h.getSnapshot;h=h.value;try{var b=m();return!xn(h,b)}catch{return!0}}function Cd(h){var m=tc(h,2);m!==null&&Do(m,h,2)}function lA(h){var m=Yc();if(typeof h=="function"){var b=h;if(h=b(),Td){fr(!0);try{b()}finally{fr(!1)}}}return m.memoizedState=m.baseState=h,m.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vd,lastRenderedState:h},m}function ap(h,m,b,S){return h.baseState=b,mg(h,fa,typeof S=="function"?S:Vd)}function vg(h,m,b,S,W){if(kh(h))throw Error(n(485));if(h=m.action,h!==null){var Z={payload:W,action:h,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Ne){Z.listeners.push(Ne)}};ne.T!==null?b(!0):Z.isTransition=!1,S(Z),b=m.pending,b===null?(Z.next=m.pending=Z,GA(m,Z)):(Z.next=b.next,m.pending=b.next=Z)}}function GA(h,m){var b=m.action,S=m.payload,W=h.state;if(m.isTransition){var Z=ne.T,Ne={};ne.T=Ne;try{var Ze=b(W,S),Bt=ne.S;Bt!==null&&Bt(Ne,Ze),Bl(h,m,Ze)}catch(_r){yg(h,m,_r)}finally{Z!==null&&Ne.types!==null&&(Z.types=Ne.types),ne.T=Z}}else try{Z=b(W,S),Bl(h,m,Z)}catch(_r){yg(h,m,_r)}}function Bl(h,m,b){b!==null&&typeof b=="object"&&typeof b.then=="function"?b.then(function(S){Cf(h,m,S)},function(S){return yg(h,m,S)}):Cf(h,m,b)}function Cf(h,m,b){m.status="fulfilled",m.value=b,xg(m),h.state=b,m=h.pending,m!==null&&(b=m.next,b===m?h.pending=null:(b=b.next,m.next=b,GA(h,b)))}function yg(h,m,b){var S=h.pending;if(h.pending=null,S!==null){S=S.next;do m.status="rejected",m.reason=b,xg(m),m=m.next;while(m!==S)}h.action=null}function xg(h){h=h.listeners;for(var m=0;m<h.length;m++)(0,h[m])()}function op(h,m){return m}function cA(h,m){if(jn){var b=Aa.formState;if(b!==null){e:{var S=Ji;if(jn){if(la){t:{for(var W=la,Z=bc;W.nodeType!==8;){if(!Z){W=null;break t}if(W=Lf(W.nextSibling),W===null){W=null;break t}}Z=W.data,W=Z==="F!"||Z==="F"?W:null}if(W){la=Lf(W.nextSibling),S=W.data==="F!";break e}}Wl(S)}S=!1}S&&(m=b[0])}}return b=Yc(),b.memoizedState=b.baseState=m,S={pending:null,lanes:0,dispatch:null,lastRenderedReducer:op,lastRenderedState:m},b.queue=S,b=Cg.bind(null,Ji,S),S.dispatch=b,S=lA(!1),Z=jf.bind(null,Ji,!1,S.queue),S=Yc(),W={state:m,dispatch:null,action:h,pending:null},S.queue=W,b=vg.bind(null,Ji,W,Z,b),W.dispatch=b,S.memoizedState=h,[m,b,!1]}function bg(h){var m=Yo();return ky(m,fa,h)}function ky(h,m,b){if(m=mg(h,m,op)[0],h=ip(Vd)[0],typeof m=="object"&&m!==null&&typeof m.then=="function")try{var S=Kh(m)}catch(Ne){throw Ne===Ma?Na:Ne}else S=m;m=Yo();var W=m.queue,Z=W.dispatch;return b!==m.memoizedState&&(Ji.flags|=2048,WA(9,{destroy:void 0},_1.bind(null,W,b),null)),[S,Z,h]}function _1(h,m){h.action=m}function Y0(h){var m=Yo(),b=fa;if(b!==null)return ky(m,b,h);Yo(),m=m.memoizedState,b=Yo();var S=b.queue.dispatch;return b.memoizedState=h,[m,S,!1]}function WA(h,m,b,S){return h={tag:h,create:b,deps:S,inst:m,next:null},m=Ji.updateQueue,m===null&&(m=rp(),Ji.updateQueue=m),b=m.lastEffect,b===null?m.lastEffect=h.next=h:(S=b.next,b.next=h,h.next=S,m.lastEffect=h),h}function Iy(){return Yo().memoizedState}function wg(h,m,b,S){var W=Yc();Ji.flags|=h,W.memoizedState=WA(1|m,{destroy:void 0},b,S===void 0?null:S)}function Eg(h,m,b,S){var W=Yo();S=S===void 0?null:S;var Z=W.memoizedState.inst;fa!==null&&S!==null&&xl(S,fa.memoizedState.deps)?W.memoizedState=WA(m,Z,b,S):(Ji.flags|=h,W.memoizedState=WA(1|m,Z,b,S))}function q0(h,m){wg(8390656,8,h,m)}function YA(h,m){Eg(2048,8,h,m)}function _g(h){Ji.flags|=4;var m=Ji.updateQueue;if(m===null)m=rp(),Ji.updateQueue=m,m.events=[h];else{var b=m.events;b===null?m.events=[h]:b.push(h)}}function uA(h){var m=Yo().memoizedState;return _g({ref:m,nextImpl:h}),function(){if((va&2)!==0)throw Error(n(440));return m.impl.apply(void 0,arguments)}}function Sg(h,m){return Eg(4,2,h,m)}function Ly(h,m){return Eg(4,4,h,m)}function X0(h,m){if(typeof m=="function"){h=h();var b=m(h);return function(){typeof b=="function"?b():m(null)}}if(m!=null)return h=h(),m.current=h,function(){m.current=null}}function By(h,m,b){b=b!=null?b.concat([h]):null,Eg(4,4,X0.bind(null,m,h),b)}function Z0(){}function lp(h,m){var b=Yo();m=m===void 0?null:m;var S=b.memoizedState;return m!==null&&xl(m,S[1])?S[0]:(b.memoizedState=[h,m],h)}function cp(h,m){var b=Yo();m=m===void 0?null:m;var S=b.memoizedState;if(m!==null&&xl(m,S[1]))return S[0];if(S=h(),Td){fr(!0);try{h()}finally{fr(!1)}}return b.memoizedState=[S,m],S}function Ch(h,m,b){return b===void 0||(Sd&1073741824)!==0&&(Bs&261930)===0?h.memoizedState=m:(h.memoizedState=b,h=ac(),Ji.lanes|=h,$|=h,b)}function jd(h,m,b,S){return xn(b,m)?b:ni.current!==null?(h=Ch(h,b,S),xn(h,m)||(ze=!0),h):(Sd&42)===0||(Sd&1073741824)!==0&&(Bs&261930)===0?(ze=!0,h.memoizedState=b):(h=ac(),Ji.lanes|=h,$|=h,m)}function zd(h,m,b,S,W){var Z=ce.p;ce.p=Z!==0&&8>Z?Z:8;var Ne=ne.T,Ze={};ne.T=Ze,jf(h,!1,m,b);try{var Bt=W(),_r=ne.S;if(_r!==null&&_r(Ze,Bt),Bt!==null&&typeof Bt=="object"&&typeof Bt.then=="function"){var Qr=Zr(Bt,S);Nh(h,m,Qr,Mi(h))}else Nh(h,m,S,Mi(h))}catch(qr){Nh(h,m,{then:function(){},status:"rejected",reason:qr},Mi())}finally{ce.p=Z,Ne!==null&&Ze.types!==null&&(Ne.types=Ze.types),ne.T=Ne}}function Py(){}function up(h,m,b,S){if(h.tag!==5)throw Error(n(476));var W=jh(h).queue;zd(h,W,m,ae,b===null?Py:function(){return Nd(h),b(S)})}function jh(h){var m=h.memoizedState;if(m!==null)return m;m={memoizedState:ae,baseState:ae,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vd,lastRenderedState:ae},next:null};var b={};return m.next={memoizedState:b,baseState:b,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vd,lastRenderedState:b},next:null},h.memoizedState=m,h=h.alternate,h!==null&&(h.memoizedState=m),m}function Nd(h){var m=jh(h);m.next===null&&(m=h.alternate.memoizedState),Nh(h,m.next.queue,{},Mi())}function qA(){return yo(I1)}function J0(){return Yo().memoizedState}function Tg(){return Yo().memoizedState}function Oy(h){for(var m=h.return;m!==null;){switch(m.tag){case 24:case 3:var b=Mi();h=Ni(b);var S=Vi(m,h,b);S!==null&&(Do(S,m,b),ys(S,m,b)),m={cache:ch()},h.payload=m;return}m=m.return}}function Ry(h,m,b){var S=Mi();b={lane:S,revertLane:0,gesture:null,action:b,hasEagerState:!1,eagerState:null,next:null},kh(h)?XA(m,b):(b=Hd(h,m,b,S),b!==null&&(Do(b,h,S),jg(b,m,S)))}function Cg(h,m,b){var S=Mi();Nh(h,m,b,S)}function Nh(h,m,b,S){var W={lane:S,revertLane:0,gesture:null,action:b,hasEagerState:!1,eagerState:null,next:null};if(kh(h))XA(m,W);else{var Z=h.alternate;if(h.lanes===0&&(Z===null||Z.lanes===0)&&(Z=m.lastRenderedReducer,Z!==null))try{var Ne=m.lastRenderedState,Ze=Z(Ne,b);if(W.hasEagerState=!0,W.eagerState=Ze,xn(Ze,Ne))return vc(h,m,W,0),Aa===null&&iu(),!1}catch{}if(b=Hd(h,m,W,S),b!==null)return Do(b,h,S),jg(b,m,S),!0}return!1}function jf(h,m,b,S){if(S={lane:2,revertLane:dk(),gesture:null,action:S,hasEagerState:!1,eagerState:null,next:null},kh(h)){if(m)throw Error(n(479))}else m=Hd(h,b,S,2),m!==null&&Do(m,h,2)}function kh(h){var m=h.alternate;return h===Ji||m!==null&&m===Ji}function XA(h,m){Xu=Th=!0;var b=h.pending;b===null?m.next=m:(m.next=b.next,b.next=m),h.pending=m}function jg(h,m,b){if((b&4194048)!==0){var S=m.lanes;S&=h.pendingLanes,b|=S,m.lanes=b,ss(h,b)}}var dp={readContext:yo,use:np,useCallback:Is,useContext:Is,useEffect:Is,useImperativeHandle:Is,useLayoutEffect:Is,useInsertionEffect:Is,useMemo:Is,useReducer:Is,useRef:Is,useState:Is,useDebugValue:Is,useDeferredValue:Is,useTransition:Is,useSyncExternalStore:Is,useId:Is,useHostTransitionStatus:Is,useFormState:Is,useActionState:Is,useOptimistic:Is,useMemoCache:Is,useCacheRefresh:Is};dp.useEffectEvent=Is;var ev={readContext:yo,use:np,useCallback:function(h,m){return Yc().memoizedState=[h,m===void 0?null:m],h},useContext:yo,useEffect:q0,useImperativeHandle:function(h,m,b){b=b!=null?b.concat([h]):null,wg(4194308,4,X0.bind(null,m,h),b)},useLayoutEffect:function(h,m){return wg(4194308,4,h,m)},useInsertionEffect:function(h,m){wg(4,2,h,m)},useMemo:function(h,m){var b=Yc();m=m===void 0?null:m;var S=h();if(Td){fr(!0);try{h()}finally{fr(!1)}}return b.memoizedState=[S,m],S},useReducer:function(h,m,b){var S=Yc();if(b!==void 0){var W=b(m);if(Td){fr(!0);try{b(m)}finally{fr(!1)}}}else W=m;return S.memoizedState=S.baseState=W,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:W},S.queue=h,h=h.dispatch=Ry.bind(null,Ji,h),[S.memoizedState,h]},useRef:function(h){var m=Yc();return h={current:h},m.memoizedState=h},useState:function(h){h=lA(h);var m=h.queue,b=Cg.bind(null,Ji,m);return m.dispatch=b,[h.memoizedState,b]},useDebugValue:Z0,useDeferredValue:function(h,m){var b=Yc();return Ch(b,h,m)},useTransition:function(){var h=lA(!1);return h=zd.bind(null,Ji,h.queue,!0,!1),Yc().memoizedState=h,[!1,h]},useSyncExternalStore:function(h,m,b){var S=Ji,W=Yc();if(jn){if(b===void 0)throw Error(n(407));b=b()}else{if(b=m(),Aa===null)throw Error(n(349));(Bs&127)!==0||W0(S,m,b)}W.memoizedState=b;var Z={value:b,getSnapshot:m};return W.queue=Z,q0(sp.bind(null,S,Z,h),[h]),S.flags|=2048,WA(9,{destroy:void 0},gg.bind(null,S,Z,b,m),null),b},useId:function(){var h=Yc(),m=Aa.identifierPrefix;if(jn){var b=vn,S=Vr;b=(S&~(1<<32-zr(S)-1)).toString(32)+b,m="_"+m+"R_"+b,b=_c++,0<b&&(m+="H"+b.toString(32)),m+="_"}else b=Ja++,m="_"+m+"r_"+b.toString(32)+"_";return h.memoizedState=m},useHostTransitionStatus:qA,useFormState:cA,useActionState:cA,useOptimistic:function(h){var m=Yc();m.memoizedState=m.baseState=h;var b={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return m.queue=b,m=jf.bind(null,Ji,!0,b),b.dispatch=m,[h,m]},useMemoCache:Cu,useCacheRefresh:function(){return Yc().memoizedState=Oy.bind(null,Ji)},useEffectEvent:function(h){var m=Yc(),b={impl:h};return m.memoizedState=b,function(){if((va&2)!==0)throw Error(n(440));return b.impl.apply(void 0,arguments)}}},Ng={readContext:yo,use:np,useCallback:lp,useContext:yo,useEffect:YA,useImperativeHandle:By,useInsertionEffect:Sg,useLayoutEffect:Ly,useMemo:cp,useReducer:ip,useRef:Iy,useState:function(){return ip(Vd)},useDebugValue:Z0,useDeferredValue:function(h,m){var b=Yo();return jd(b,fa.memoizedState,h,m)},useTransition:function(){var h=ip(Vd)[0],m=Yo().memoizedState;return[typeof h=="boolean"?h:Kh(h),m]},useSyncExternalStore:G0,useId:J0,useHostTransitionStatus:qA,useFormState:bg,useActionState:bg,useOptimistic:function(h,m){var b=Yo();return ap(b,fa,h,m)},useMemoCache:Cu,useCacheRefresh:Tg};Ng.useEffectEvent=uA;var kg={readContext:yo,use:np,useCallback:lp,useContext:yo,useEffect:YA,useImperativeHandle:By,useInsertionEffect:Sg,useLayoutEffect:Ly,useMemo:cp,useReducer:pg,useRef:Iy,useState:function(){return pg(Vd)},useDebugValue:Z0,useDeferredValue:function(h,m){var b=Yo();return fa===null?Ch(b,h,m):jd(b,fa.memoizedState,h,m)},useTransition:function(){var h=pg(Vd)[0],m=Yo().memoizedState;return[typeof h=="boolean"?h:Kh(h),m]},useSyncExternalStore:G0,useId:J0,useHostTransitionStatus:qA,useFormState:Y0,useActionState:Y0,useOptimistic:function(h,m){var b=Yo();return fa!==null?ap(b,fa,h,m):(b.baseState=h,[h,b.queue.dispatch])},useMemoCache:Cu,useCacheRefresh:Tg};kg.useEffectEvent=uA;function Ig(h,m,b,S){m=h.memoizedState,b=b(S,m),b=b==null?m:f({},m,b),h.memoizedState=b,h.lanes===0&&(h.updateQueue.baseState=b)}var Lg={enqueueSetState:function(h,m,b){h=h._reactInternals;var S=Mi(),W=Ni(S);W.payload=m,b!=null&&(W.callback=b),m=Vi(h,W,S),m!==null&&(Do(m,h,S),ys(m,h,S))},enqueueReplaceState:function(h,m,b){h=h._reactInternals;var S=Mi(),W=Ni(S);W.tag=1,W.payload=m,b!=null&&(W.callback=b),m=Vi(h,W,S),m!==null&&(Do(m,h,S),ys(m,h,S))},enqueueForceUpdate:function(h,m){h=h._reactInternals;var b=Mi(),S=Ni(b);S.tag=2,m!=null&&(S.callback=m),m=Vi(h,S,b),m!==null&&(Do(m,h,b),ys(m,h,b))}};function Bg(h,m,b,S,W,Z,Ne){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(S,Z,Ne):m.prototype&&m.prototype.isPureReactComponent?!ls(b,S)||!ls(W,Z):!0}function tv(h,m,b,S){h=m.state,typeof m.componentWillReceiveProps=="function"&&m.componentWillReceiveProps(b,S),typeof m.UNSAFE_componentWillReceiveProps=="function"&&m.UNSAFE_componentWillReceiveProps(b,S),m.state!==h&&Lg.enqueueReplaceState(m,m.state,null)}function Gh(h,m){var b=m;if("ref"in m){b={};for(var S in m)S!=="ref"&&(b[S]=m[S])}if(h=h.defaultProps){b===m&&(b=f({},b));for(var W in h)b[W]===void 0&&(b[W]=h[W])}return b}function hp(h){Eu(h)}function fp(h){console.error(h)}function Ap(h){Eu(h)}function ZA(h,m){try{var b=h.onUncaughtError;b(m.value,{componentStack:m.stack})}catch(S){setTimeout(function(){throw S})}}function R(h,m,b){try{var S=h.onCaughtError;S(b.value,{componentStack:b.stack,errorBoundary:m.tag===1?m.stateNode:null})}catch(W){setTimeout(function(){throw W})}}function q(h,m,b){return b=Ni(b),b.tag=3,b.payload={element:null},b.callback=function(){ZA(h,m)},b}function pe(h){return h=Ni(h),h.tag=3,h}function _e(h,m,b,S){var W=b.type.getDerivedStateFromError;if(typeof W=="function"){var Z=S.value;h.payload=function(){return W(Z)},h.callback=function(){R(m,b,S)}}var Ne=b.stateNode;Ne!==null&&typeof Ne.componentDidCatch=="function"&&(h.callback=function(){R(m,b,S),typeof W!="function"&&(Pn===null?Pn=new Set([this]):Pn.add(this));var Ze=S.stack;this.componentDidCatch(S.value,{componentStack:Ze!==null?Ze:""})})}function Ue(h,m,b,S,W){if(b.flags|=32768,S!==null&&typeof S=="object"&&typeof S.then=="function"){if(m=b.alternate,m!==null&&_d(m,b,W,!0),b=yl.current,b!==null){switch(b.tag){case 31:case 13:return nc===null?Lh():b.alternate===null&&Q===0&&(Q=3),b.flags&=-257,b.flags|=65536,b.lanes=W,S===Wo?b.flags|=16384:(m=b.updateQueue,m===null?b.updateQueue=new Set([S]):m.add(S),lk(h,S,W)),!1;case 22:return b.flags|=65536,S===Wo?b.flags|=16384:(m=b.updateQueue,m===null?(m={transitions:null,markerInstances:null,retryQueue:new Set([S])},b.updateQueue=m):(b=m.retryQueue,b===null?m.retryQueue=new Set([S]):b.add(S)),lk(h,S,W)),!1}throw Error(n(435,b.tag))}return lk(h,S,W),Lh(),!1}if(jn)return m=yl.current,m!==null?((m.flags&65536)===0&&(m.flags|=256),m.flags|=65536,m.lanes=W,S!==wd&&(h=Error(n(422),{cause:S}),wc(_(h,b)))):(S!==wd&&(m=Error(n(423),{cause:S}),wc(_(m,b))),h=h.current.alternate,h.flags|=65536,W&=-W,h.lanes|=W,S=_(S,b),W=q(h.stateNode,S,W),bn(h,W),Q!==4&&(Q=2)),!1;var Z=Error(n(520),{cause:S});if(Z=_(Z,b),dt===null?dt=[Z]:dt.push(Z),Q!==4&&(Q=2),m===null)return!0;S=_(S,b),b=m;do{switch(b.tag){case 3:return b.flags|=65536,h=W&-W,b.lanes|=h,h=q(b.stateNode,S,h),bn(b,h),!1;case 1:if(m=b.type,Z=b.stateNode,(b.flags&128)===0&&(typeof m.getDerivedStateFromError=="function"||Z!==null&&typeof Z.componentDidCatch=="function"&&(Pn===null||!Pn.has(Z))))return b.flags|=65536,W&=-W,b.lanes|=W,W=pe(W),_e(W,h,b,S),bn(b,W),!1}b=b.return}while(b!==null);return!1}var Ke=Error(n(461)),ze=!1;function Xe(h,m,b,S){m.child=h===null?en(m,null,b,S):Nn(m,h.child,b,S)}function tt(h,m,b,S,W){b=b.render;var Z=m.ref;if("ref"in S){var Ne={};for(var Ze in S)Ze!=="ref"&&(Ne[Ze]=S[Ze])}else Ne=S;return Kc(m),S=dh(h,m,b,Ne,Z,W),Ze=Jm(),h!==null&&!ze?(ep(h,m,W),Rs(h,m,W)):(jn&&Ze&&Da(m),m.flags|=1,Xe(h,m,S,W),m.child)}function vt(h,m,b,S,W){if(h===null){var Z=b.type;return typeof Z=="function"&&!Fi(Z)&&Z.defaultProps===void 0&&b.compare===null?(m.tag=15,m.type=Z,$t(h,m,Z,S,W)):(h=Vc(b.type,null,S,m,m.mode,W),h.ref=m.ref,h.return=m,m.child=h)}if(Z=h.child,!bo(h,W)){var Ne=Z.memoizedProps;if(b=b.compare,b=b!==null?b:ls,b(Ne,S)&&h.ref===m.ref)return Rs(h,m,W)}return m.flags|=1,h=yc(Z,S),h.ref=m.ref,h.return=m,m.child=h}function $t(h,m,b,S,W){if(h!==null){var Z=h.memoizedProps;if(ls(Z,S)&&h.ref===m.ref)if(ze=!1,m.pendingProps=S=Z,bo(h,W))(h.flags&131072)!==0&&(ze=!0);else return m.lanes=h.lanes,Rs(h,m,W)}return Hr(h,m,b,S,W)}function dr(h,m,b,S){var W=S.children,Z=h!==null?h.memoizedState:null;if(h===null&&m.stateNode===null&&(m.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),S.mode==="hidden"){if((m.flags&128)!==0){if(Z=Z!==null?Z.baseLanes|b:b,h!==null){for(S=m.child=h.child,W=0;S!==null;)W=W|S.lanes|S.childLanes,S=S.sibling;S=W&~Z}else S=0,m.child=null;return Wt(h,m,Z,b,S)}if((b&536870912)!==0)m.memoizedState={baseLanes:0,cachePool:null},h!==null&&as(m,Z!==null?Z.cachePool:null),Z!==null?rc(m,Z):qu(),uh(m);else return S=m.lanes=536870912,Wt(h,m,Z!==null?Z.baseLanes|b:b,b,S)}else Z!==null?(as(m,Z.cachePool),rc(m,Z),Gc(),m.memoizedState=null):(h!==null&&as(m,null),qu(),Gc());return Xe(h,m,W,b),m.child}function gt(h,m){return h!==null&&h.tag===22||m.stateNode!==null||(m.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),m.sibling}function Wt(h,m,b,S,W){var Z=Yi();return Z=Z===null?null:{parent:Po._currentValue,pool:Z},m.memoizedState={baseLanes:b,cachePool:Z},h!==null&&as(m,null),qu(),uh(m),h!==null&&_d(h,m,S,!0),m.childLanes=W,null}function tr(h,m){return m=Es({mode:m.mode,children:m.children},h.mode),m.ref=h.ref,h.child=m,m.return=h,m}function Dr(h,m,b){return Nn(m,h.child,null,b),h=tr(m,m.pendingProps),h.flags|=2,Wc(m),m.memoizedState=null,h}function yr(h,m,b){var S=m.pendingProps,W=(m.flags&128)!==0;if(m.flags&=-129,h===null){if(jn){if(S.mode==="hidden")return h=tr(m,S),m.lanes=536870912,gt(null,h);if(zA(m),(h=la)?(h=N6(h,bc),h=h!==null&&h.data==="&"?h:null,h!==null&&(m.memoizedState={dehydrated:h,treeContext:br!==null?{id:Vr,overflow:vn}:null,retryLane:536870912,hydrationErrors:null},b=Bo(h),b.return=m,m.child=b,Zs=m,la=null)):h=null,h===null)throw Wl(m);return m.lanes=536870912,null}return tr(m,S)}var Z=h.memoizedState;if(Z!==null){var Ne=Z.dehydrated;if(zA(m),W)if(m.flags&256)m.flags&=-257,m=Dr(h,m,b);else if(m.memoizedState!==null)m.child=h.child,m.flags|=128,m=null;else throw Error(n(558));else if(ze||_d(h,m,b,!1),W=(b&h.childLanes)!==0,ze||W){if(S=Aa,S!==null&&(Ne=ta(S,b),Ne!==0&&Ne!==Z.retryLane))throw Z.retryLane=Ne,tc(h,Ne),Do(S,h,Ne),Ke;Lh(),m=Dr(h,m,b)}else h=Z.treeContext,la=Lf(Ne.nextSibling),Zs=m,jn=!0,Yu=null,bc=!1,h!==null&&il(m,h),m=tr(m,S),m.flags|=4096;return m}return h=yc(h.child,{mode:S.mode,children:S.children}),h.ref=m.ref,m.child=h,h.return=m,h}function Mr(h,m){var b=m.ref;if(b===null)h!==null&&h.ref!==null&&(m.flags|=4194816);else{if(typeof b!="function"&&typeof b!="object")throw Error(n(284));(h===null||h.ref!==b)&&(m.flags|=4194816)}}function Hr(h,m,b,S,W){return Kc(m),b=dh(h,m,b,S,void 0,W),S=Jm(),h!==null&&!ze?(ep(h,m,W),Rs(h,m,W)):(jn&&S&&Da(m),m.flags|=1,Xe(h,m,b,W),m.child)}function an(h,m,b,S,W,Z){return Kc(m),m.updateQueue=null,b=zh(m,S,b,W),oA(h),S=Jm(),h!==null&&!ze?(ep(h,m,Z),Rs(h,m,Z)):(jn&&S&&Da(m),m.flags|=1,Xe(h,m,b,Z),m.child)}function Jr(h,m,b,S,W){if(Kc(m),m.stateNode===null){var Z=vl,Ne=b.contextType;typeof Ne=="object"&&Ne!==null&&(Z=yo(Ne)),Z=new b(S,Z),m.memoizedState=Z.state!==null&&Z.state!==void 0?Z.state:null,Z.updater=Lg,m.stateNode=Z,Z._reactInternals=m,Z=m.stateNode,Z.props=S,Z.state=m.memoizedState,Z.refs={},Fa(m),Ne=b.contextType,Z.context=typeof Ne=="object"&&Ne!==null?yo(Ne):vl,Z.state=m.memoizedState,Ne=b.getDerivedStateFromProps,typeof Ne=="function"&&(Ig(m,b,Ne,S),Z.state=m.memoizedState),typeof b.getDerivedStateFromProps=="function"||typeof Z.getSnapshotBeforeUpdate=="function"||typeof Z.UNSAFE_componentWillMount!="function"&&typeof Z.componentWillMount!="function"||(Ne=Z.state,typeof Z.componentWillMount=="function"&&Z.componentWillMount(),typeof Z.UNSAFE_componentWillMount=="function"&&Z.UNSAFE_componentWillMount(),Ne!==Z.state&&Lg.enqueueReplaceState(Z,Z.state,null),Si(m,S,Z,W),Ua(),Z.state=m.memoizedState),typeof Z.componentDidMount=="function"&&(m.flags|=4194308),S=!0}else if(h===null){Z=m.stateNode;var Ze=m.memoizedProps,Bt=Gh(b,Ze);Z.props=Bt;var _r=Z.context,Qr=b.contextType;Ne=vl,typeof Qr=="object"&&Qr!==null&&(Ne=yo(Qr));var qr=b.getDerivedStateFromProps;Qr=typeof qr=="function"||typeof Z.getSnapshotBeforeUpdate=="function",Ze=m.pendingProps!==Ze,Qr||typeof Z.UNSAFE_componentWillReceiveProps!="function"&&typeof Z.componentWillReceiveProps!="function"||(Ze||_r!==Ne)&&tv(m,Z,S,Ne),Pr=!1;var Tr=m.memoizedState;Z.state=Tr,Si(m,S,Z,W),Ua(),_r=m.memoizedState,Ze||Tr!==_r||Pr?(typeof qr=="function"&&(Ig(m,b,qr,S),_r=m.memoizedState),(Bt=Pr||Bg(m,b,Bt,S,Tr,_r,Ne))?(Qr||typeof Z.UNSAFE_componentWillMount!="function"&&typeof Z.componentWillMount!="function"||(typeof Z.componentWillMount=="function"&&Z.componentWillMount(),typeof Z.UNSAFE_componentWillMount=="function"&&Z.UNSAFE_componentWillMount()),typeof Z.componentDidMount=="function"&&(m.flags|=4194308)):(typeof Z.componentDidMount=="function"&&(m.flags|=4194308),m.memoizedProps=S,m.memoizedState=_r),Z.props=S,Z.state=_r,Z.context=Ne,S=Bt):(typeof Z.componentDidMount=="function"&&(m.flags|=4194308),S=!1)}else{Z=m.stateNode,Wi(h,m),Ne=m.memoizedProps,Qr=Gh(b,Ne),Z.props=Qr,qr=m.pendingProps,Tr=Z.context,_r=b.contextType,Bt=vl,typeof _r=="object"&&_r!==null&&(Bt=yo(_r)),Ze=b.getDerivedStateFromProps,(_r=typeof Ze=="function"||typeof Z.getSnapshotBeforeUpdate=="function")||typeof Z.UNSAFE_componentWillReceiveProps!="function"&&typeof Z.componentWillReceiveProps!="function"||(Ne!==qr||Tr!==Bt)&&tv(m,Z,S,Bt),Pr=!1,Tr=m.memoizedState,Z.state=Tr,Si(m,S,Z,W),Ua();var Ir=m.memoizedState;Ne!==qr||Tr!==Ir||Pr||h!==null&&h.dependencies!==null&&ah(h.dependencies)?(typeof Ze=="function"&&(Ig(m,b,Ze,S),Ir=m.memoizedState),(Qr=Pr||Bg(m,b,Qr,S,Tr,Ir,Bt)||h!==null&&h.dependencies!==null&&ah(h.dependencies))?(_r||typeof Z.UNSAFE_componentWillUpdate!="function"&&typeof Z.componentWillUpdate!="function"||(typeof Z.componentWillUpdate=="function"&&Z.componentWillUpdate(S,Ir,Bt),typeof Z.UNSAFE_componentWillUpdate=="function"&&Z.UNSAFE_componentWillUpdate(S,Ir,Bt)),typeof Z.componentDidUpdate=="function"&&(m.flags|=4),typeof Z.getSnapshotBeforeUpdate=="function"&&(m.flags|=1024)):(typeof Z.componentDidUpdate!="function"||Ne===h.memoizedProps&&Tr===h.memoizedState||(m.flags|=4),typeof Z.getSnapshotBeforeUpdate!="function"||Ne===h.memoizedProps&&Tr===h.memoizedState||(m.flags|=1024),m.memoizedProps=S,m.memoizedState=Ir),Z.props=S,Z.state=Ir,Z.context=Bt,S=Qr):(typeof Z.componentDidUpdate!="function"||Ne===h.memoizedProps&&Tr===h.memoizedState||(m.flags|=4),typeof Z.getSnapshotBeforeUpdate!="function"||Ne===h.memoizedProps&&Tr===h.memoizedState||(m.flags|=1024),S=!1)}return Z=S,Mr(h,m),S=(m.flags&128)!==0,Z||S?(Z=m.stateNode,b=S&&typeof b.getDerivedStateFromError!="function"?null:Z.render(),m.flags|=1,h!==null&&S?(m.child=Nn(m,h.child,null,W),m.child=Nn(m,null,b,W)):Xe(h,m,b,W),m.memoizedState=Z.state,h=m.child):h=Rs(h,m,W),h}function Ti(h,m,b,S){return Go(),m.flags|=256,Xe(h,m,b,S),m.child}var Qn={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ls(h){return{baseLanes:h,cachePool:na()}}function pi(h,m,b){return h=h!==null?h.childLanes&~b:0,m&&(h|=He),h}function ca(h,m,b){var S=m.pendingProps,W=!1,Z=(m.flags&128)!==0,Ne;if((Ne=Z)||(Ne=h!==null&&h.memoizedState===null?!1:(Ro.current&2)!==0),Ne&&(W=!0,m.flags&=-129),Ne=(m.flags&32)!==0,m.flags&=-33,h===null){if(jn){if(W?ao(m):Gc(),(h=la)?(h=N6(h,bc),h=h!==null&&h.data!=="&"?h:null,h!==null&&(m.memoizedState={dehydrated:h,treeContext:br!==null?{id:Vr,overflow:vn}:null,retryLane:536870912,hydrationErrors:null},b=Bo(h),b.return=m,m.child=b,Zs=m,la=null)):h=null,h===null)throw Wl(m);return _k(h)?m.lanes=32:m.lanes=536870912,null}var Ze=S.children;return S=S.fallback,W?(Gc(),W=m.mode,Ze=Es({mode:"hidden",children:Ze},W),S=Wu(S,W,b,null),Ze.return=m,S.return=m,Ze.sibling=S,m.child=Ze,S=m.child,S.memoizedState=Ls(b),S.childLanes=pi(h,Ne,b),m.memoizedState=Qn,gt(null,S)):(ao(m),Pl(m,Ze))}var Bt=h.memoizedState;if(Bt!==null&&(Ze=Bt.dehydrated,Ze!==null)){if(Z)m.flags&256?(ao(m),m.flags&=-257,m=hi(h,m,b)):m.memoizedState!==null?(Gc(),m.child=h.child,m.flags|=128,m=null):(Gc(),Ze=S.fallback,W=m.mode,S=Es({mode:"visible",children:S.children},W),Ze=Wu(Ze,W,b,null),Ze.flags|=2,S.return=m,Ze.return=m,S.sibling=Ze,m.child=S,Nn(m,h.child,null,b),S=m.child,S.memoizedState=Ls(b),S.childLanes=pi(h,Ne,b),m.memoizedState=Qn,m=gt(null,S));else if(ao(m),_k(Ze)){if(Ne=Ze.nextSibling&&Ze.nextSibling.dataset,Ne)var _r=Ne.dgst;Ne=_r,S=Error(n(419)),S.stack="",S.digest=Ne,wc({value:S,source:null,stack:null}),m=hi(h,m,b)}else if(ze||_d(h,m,b,!1),Ne=(b&h.childLanes)!==0,ze||Ne){if(Ne=Aa,Ne!==null&&(S=ta(Ne,b),S!==0&&S!==Bt.retryLane))throw Bt.retryLane=S,tc(h,S),Do(Ne,h,S),Ke;Ek(Ze)||Lh(),m=hi(h,m,b)}else Ek(Ze)?(m.flags|=192,m.child=h.child,m=null):(h=Bt.treeContext,la=Lf(Ze.nextSibling),Zs=m,jn=!0,Yu=null,bc=!1,h!==null&&il(m,h),m=Pl(m,S.children),m.flags|=4096);return m}return W?(Gc(),Ze=S.fallback,W=m.mode,Bt=h.child,_r=Bt.sibling,S=yc(Bt,{mode:"hidden",children:S.children}),S.subtreeFlags=Bt.subtreeFlags&65011712,_r!==null?Ze=yc(_r,Ze):(Ze=Wu(Ze,W,b,null),Ze.flags|=2),Ze.return=m,S.return=m,S.sibling=Ze,m.child=S,gt(null,S),S=m.child,Ze=h.child.memoizedState,Ze===null?Ze=Ls(b):(W=Ze.cachePool,W!==null?(Bt=Po._currentValue,W=W.parent!==Bt?{parent:Bt,pool:Bt}:W):W=na(),Ze={baseLanes:Ze.baseLanes|b,cachePool:W}),S.memoizedState=Ze,S.childLanes=pi(h,Ne,b),m.memoizedState=Qn,gt(h.child,S)):(ao(m),b=h.child,h=b.sibling,b=yc(b,{mode:"visible",children:S.children}),b.return=m,b.sibling=null,h!==null&&(Ne=m.deletions,Ne===null?(m.deletions=[h],m.flags|=16):Ne.push(h)),m.child=b,m.memoizedState=null,b)}function Pl(h,m){return m=Es({mode:"visible",children:m},h.mode),m.return=h,h.child=m}function Es(h,m){return h=Ll(22,h,null,m),h.lanes=0,h}function hi(h,m,b){return Nn(m,h.child,null,b),h=Pl(m,m.pendingProps.children),h.flags|=2,m.memoizedState=null,h}function Bn(h,m,b){h.lanes|=m;var S=h.alternate;S!==null&&(S.lanes|=m),Eh(h.return,m,b)}function sl(h,m,b,S,W,Z){var Ne=h.memoizedState;Ne===null?h.memoizedState={isBackwards:m,rendering:null,renderingStartTime:0,last:S,tail:b,tailMode:W,treeForkCount:Z}:(Ne.isBackwards=m,Ne.rendering=null,Ne.renderingStartTime=0,Ne.last=S,Ne.tail=b,Ne.tailMode=W,Ne.treeForkCount=Z)}function _s(h,m,b){var S=m.pendingProps,W=S.revealOrder,Z=S.tail;S=S.children;var Ne=Ro.current,Ze=(Ne&2)!==0;if(Ze?(Ne=Ne&1|2,m.flags|=128):Ne&=1,xe(Ro,Ne),Xe(h,m,S,b),S=jn?Ve:0,!Ze&&h!==null&&(h.flags&128)!==0)e:for(h=m.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&Bn(h,b,m);else if(h.tag===19)Bn(h,b,m);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===m)break e;for(;h.sibling===null;){if(h.return===null||h.return===m)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}switch(W){case"forwards":for(b=m.child,W=null;b!==null;)h=b.alternate,h!==null&&Tf(h)===null&&(W=b),b=b.sibling;b=W,b===null?(W=m.child,m.child=null):(W=b.sibling,b.sibling=null),sl(m,!1,W,b,Z,S);break;case"backwards":case"unstable_legacy-backwards":for(b=null,W=m.child,m.child=null;W!==null;){if(h=W.alternate,h!==null&&Tf(h)===null){m.child=W;break}h=W.sibling,W.sibling=b,b=W,W=h}sl(m,!0,b,null,Z,S);break;case"together":sl(m,!1,null,null,void 0,S);break;default:m.memoizedState=null}return m.child}function Rs(h,m,b){if(h!==null&&(m.dependencies=h.dependencies),$|=m.lanes,(b&m.childLanes)===0)if(h!==null){if(_d(h,m,b,!1),(b&m.childLanes)===0)return null}else return null;if(h!==null&&m.child!==h.child)throw Error(n(153));if(m.child!==null){for(h=m.child,b=yc(h,h.pendingProps),m.child=b,b.return=m;h.sibling!==null;)h=h.sibling,b=b.sibling=yc(h,h.pendingProps),b.return=m;b.sibling=null}return m.child}function bo(h,m){return(h.lanes&m)!==0?!0:(h=h.dependencies,!!(h!==null&&ah(h)))}function ic(h,m,b){switch(m.tag){case 3:ht(m,m.stateNode.containerInfo),Ec(m,Po,h.memoizedState.cache),Go();break;case 27:case 5:nt(m);break;case 4:ht(m,m.stateNode.containerInfo);break;case 10:Ec(m,m.type,m.memoizedProps.value);break;case 31:if(m.memoizedState!==null)return m.flags|=128,zA(m),null;break;case 13:var S=m.memoizedState;if(S!==null)return S.dehydrated!==null?(ao(m),m.flags|=128,null):(b&m.child.childLanes)!==0?ca(h,m,b):(ao(m),h=Rs(h,m,b),h!==null?h.sibling:null);ao(m);break;case 19:var W=(h.flags&128)!==0;if(S=(b&m.childLanes)!==0,S||(_d(h,m,b,!1),S=(b&m.childLanes)!==0),W){if(S)return _s(h,m,b);m.flags|=128}if(W=m.memoizedState,W!==null&&(W.rendering=null,W.tail=null,W.lastEffect=null),xe(Ro,Ro.current),S)break;return null;case 22:return m.lanes=0,dr(h,m,b,m.pendingProps);case 24:Ec(m,Po,h.memoizedState.cache)}return Rs(h,m,b)}function Sc(h,m,b){if(h!==null)if(h.memoizedProps!==m.pendingProps)ze=!0;else{if(!bo(h,b)&&(m.flags&128)===0)return ze=!1,ic(h,m,b);ze=(h.flags&131072)!==0}else ze=!1,jn&&(m.flags&1048576)!==0&&As(m,Ve,m.index);switch(m.lanes=0,m.tag){case 16:e:{var S=m.pendingProps;if(h=J(m.elementType),m.type=h,typeof h=="function")Fi(h)?(S=Gh(h,S),m.tag=1,m=Jr(null,m,h,S,b)):(m.tag=0,m=Hr(null,m,h,S,b));else{if(h!=null){var W=h.$$typeof;if(W===C){m.tag=11,m=tt(null,m,h,S,b);break e}else if(W===U){m.tag=14,m=vt(null,m,h,S,b);break e}}throw m=Ce(h)||h,Error(n(306,m,""))}}return m;case 0:return Hr(h,m,m.type,m.pendingProps,b);case 1:return S=m.type,W=Gh(S,m.pendingProps),Jr(h,m,S,W,b);case 3:e:{if(ht(m,m.stateNode.containerInfo),h===null)throw Error(n(387));S=m.pendingProps;var Z=m.memoizedState;W=Z.element,Wi(h,m),Si(m,S,null,b);var Ne=m.memoizedState;if(S=Ne.cache,Ec(m,Po,S),S!==Z.cache&&au(m,[Po],b,!0),Ua(),S=Ne.element,Z.isDehydrated)if(Z={element:S,isDehydrated:!1,cache:Ne.cache},m.updateQueue.baseState=Z,m.memoizedState=Z,m.flags&256){m=Ti(h,m,S,b);break e}else if(S!==W){W=_(Error(n(424)),m),wc(W),m=Ti(h,m,S,b);break e}else for(h=m.stateNode.containerInfo,h.nodeType===9?h=h.body:h=h.nodeName==="HTML"?h.ownerDocument.body:h,la=Lf(h.firstChild),Zs=m,jn=!0,Yu=null,bc=!0,b=en(m,null,S,b),m.child=b;b;)b.flags=b.flags&-3|4096,b=b.sibling;else{if(Go(),S===W){m=Rs(h,m,b);break e}Xe(h,m,S,b)}m=m.child}return m;case 26:return Mr(h,m),h===null?(b=O6(m.type,null,m.pendingProps,null))?m.memoizedState=b:jn||(b=m.type,h=m.pendingProps,S=y_(Re.current).createElement(b),S[rs]=m,S[qs]=h,Id(S,b,h),ba(S),m.stateNode=S):m.memoizedState=O6(m.type,h.memoizedProps,m.pendingProps,h.memoizedState),null;case 27:return nt(m),h===null&&jn&&(S=m.stateNode=L6(m.type,m.pendingProps,Re.current),Zs=m,bc=!0,W=la,Dg(m.type)?(Sk=W,la=Lf(S.firstChild)):la=W),Xe(h,m,m.pendingProps.children,b),Mr(h,m),h===null&&(m.flags|=4194304),m.child;case 5:return h===null&&jn&&((W=S=la)&&(S=jle(S,m.type,m.pendingProps,bc),S!==null?(m.stateNode=S,Zs=m,la=Lf(S.firstChild),bc=!1,W=!0):W=!1),W||Wl(m)),nt(m),W=m.type,Z=m.pendingProps,Ne=h!==null?h.memoizedProps:null,S=Z.children,xk(W,Z)?S=null:Ne!==null&&xk(W,Ne)&&(m.flags|=32),m.memoizedState!==null&&(W=dh(h,m,KA,null,null,b),I1._currentValue=W),Mr(h,m),Xe(h,m,S,b),m.child;case 6:return h===null&&jn&&((h=b=la)&&(b=Nle(b,m.pendingProps,bc),b!==null?(m.stateNode=b,Zs=m,la=null,h=!0):h=!1),h||Wl(m)),null;case 13:return ca(h,m,b);case 4:return ht(m,m.stateNode.containerInfo),S=m.pendingProps,h===null?m.child=Nn(m,null,S,b):Xe(h,m,S,b),m.child;case 11:return tt(h,m,m.type,m.pendingProps,b);case 7:return Xe(h,m,m.pendingProps,b),m.child;case 8:return Xe(h,m,m.pendingProps.children,b),m.child;case 12:return Xe(h,m,m.pendingProps.children,b),m.child;case 10:return S=m.pendingProps,Ec(m,m.type,S.value),Xe(h,m,S.children,b),m.child;case 9:return W=m.type._context,S=m.pendingProps.children,Kc(m),W=yo(W),S=S(W),m.flags|=1,Xe(h,m,S,b),m.child;case 14:return vt(h,m,m.type,m.pendingProps,b);case 15:return $t(h,m,m.type,m.pendingProps,b);case 19:return _s(h,m,b);case 31:return yr(h,m,b);case 22:return dr(h,m,b,m.pendingProps);case 24:return Kc(m),S=yo(Po),h===null?(W=Yi(),W===null&&(W=Aa,Z=ch(),W.pooledCache=Z,Z.refCount++,Z!==null&&(W.pooledCacheLanes|=b),W=Z),m.memoizedState={parent:S,cache:W},Fa(m),Ec(m,Po,W)):((h.lanes&b)!==0&&(Wi(h,m),Si(m,null,null,b),Ua()),W=h.memoizedState,Z=m.memoizedState,W.parent!==S?(W={parent:S,cache:S},m.memoizedState=W,m.lanes===0&&(m.memoizedState=m.updateQueue.baseState=W),Ec(m,Po,S)):(S=Z.cache,Ec(m,Po,S),S!==W.cache&&au(m,[Po],b,!0))),Xe(h,m,m.pendingProps.children,b),m.child;case 29:throw m.pendingProps}throw Error(n(156,m.tag))}function $a(h){h.flags|=4}function Tc(h,m,b,S,W){if((m=(h.mode&32)!==0)&&(m=!1),m){if(h.flags|=16777216,(W&335544128)===W)if(h.stateNode.complete)h.flags|=8192;else if(fA())h.flags|=8192;else throw Ye=Wo,Oo}else h.flags&=-16777217}function lu(h,m){if(m.type!=="stylesheet"||(m.state.loading&4)!==0)h.flags&=-16777217;else if(h.flags|=16777216,!U6(m))if(fA())h.flags|=8192;else throw Ye=Wo,Oo}function al(h,m){m!==null&&(h.flags|=4),h.flags&16384&&(m=h.tag!==22?Cs():536870912,h.lanes|=m,ut|=m)}function aa(h,m){if(!jn)switch(h.tailMode){case"hidden":m=h.tail;for(var b=null;m!==null;)m.alternate!==null&&(b=m),m=m.sibling;b===null?h.tail=null:b.sibling=null;break;case"collapsed":b=h.tail;for(var S=null;b!==null;)b.alternate!==null&&(S=b),b=b.sibling;S===null?m||h.tail===null?h.tail=null:h.tail.sibling=null:S.sibling=null}}function zi(h){var m=h.alternate!==null&&h.alternate.child===h.child,b=0,S=0;if(m)for(var W=h.child;W!==null;)b|=W.lanes|W.childLanes,S|=W.subtreeFlags&65011712,S|=W.flags&65011712,W.return=h,W=W.sibling;else for(W=h.child;W!==null;)b|=W.lanes|W.childLanes,S|=W.subtreeFlags,S|=W.flags,W.return=h,W=W.sibling;return h.subtreeFlags|=S,h.childLanes=b,m}function bl(h,m,b){var S=m.pendingProps;switch(jo(m),m.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zi(m),null;case 1:return zi(m),null;case 3:return b=m.stateNode,S=null,h!==null&&(S=h.memoizedState.cache),m.memoizedState.cache!==S&&(m.flags|=2048),zc(Po),Be(),b.pendingContext&&(b.context=b.pendingContext,b.pendingContext=null),(h===null||h.child===null)&&(Su(m)?$a(m):h===null||h.memoizedState.isDehydrated&&(m.flags&256)===0||(m.flags|=1024,Ed())),zi(m),null;case 26:var W=m.type,Z=m.memoizedState;return h===null?($a(m),Z!==null?(zi(m),lu(m,Z)):(zi(m),Tc(m,W,null,S,b))):Z?Z!==h.memoizedState?($a(m),zi(m),lu(m,Z)):(zi(m),m.flags&=-16777217):(h=h.memoizedProps,h!==S&&$a(m),zi(m),Tc(m,W,h,S,b)),null;case 27:if(Ge(m),b=Re.current,W=m.type,h!==null&&m.stateNode!=null)h.memoizedProps!==S&&$a(m);else{if(!S){if(m.stateNode===null)throw Error(n(166));return zi(m),null}h=je.current,Su(m)?_u(m):(h=L6(W,S,b),m.stateNode=h,$a(m))}return zi(m),null;case 5:if(Ge(m),W=m.type,h!==null&&m.stateNode!=null)h.memoizedProps!==S&&$a(m);else{if(!S){if(m.stateNode===null)throw Error(n(166));return zi(m),null}if(Z=je.current,Su(m))_u(m);else{var Ne=y_(Re.current);switch(Z){case 1:Z=Ne.createElementNS("http://www.w3.org/2000/svg",W);break;case 2:Z=Ne.createElementNS("http://www.w3.org/1998/Math/MathML",W);break;default:switch(W){case"svg":Z=Ne.createElementNS("http://www.w3.org/2000/svg",W);break;case"math":Z=Ne.createElementNS("http://www.w3.org/1998/Math/MathML",W);break;case"script":Z=Ne.createElement("div"),Z.innerHTML="<script><\/script>",Z=Z.removeChild(Z.firstChild);break;case"select":Z=typeof S.is=="string"?Ne.createElement("select",{is:S.is}):Ne.createElement("select"),S.multiple?Z.multiple=!0:S.size&&(Z.size=S.size);break;default:Z=typeof S.is=="string"?Ne.createElement(W,{is:S.is}):Ne.createElement(W)}}Z[rs]=m,Z[qs]=S;e:for(Ne=m.child;Ne!==null;){if(Ne.tag===5||Ne.tag===6)Z.appendChild(Ne.stateNode);else if(Ne.tag!==4&&Ne.tag!==27&&Ne.child!==null){Ne.child.return=Ne,Ne=Ne.child;continue}if(Ne===m)break e;for(;Ne.sibling===null;){if(Ne.return===null||Ne.return===m)break e;Ne=Ne.return}Ne.sibling.return=Ne.return,Ne=Ne.sibling}m.stateNode=Z;e:switch(Id(Z,W,S),W){case"button":case"input":case"select":case"textarea":S=!!S.autoFocus;break e;case"img":S=!0;break e;default:S=!1}S&&$a(m)}}return zi(m),Tc(m,m.type,h===null?null:h.memoizedProps,m.pendingProps,b),null;case 6:if(h&&m.stateNode!=null)h.memoizedProps!==S&&$a(m);else{if(typeof S!="string"&&m.stateNode===null)throw Error(n(166));if(h=Re.current,Su(m)){if(h=m.stateNode,b=m.memoizedProps,S=null,W=Zs,W!==null)switch(W.tag){case 27:case 5:S=W.memoizedProps}h[rs]=m,h=!!(h.nodeValue===b||S!==null&&S.suppressHydrationWarning===!0||b6(h.nodeValue,b)),h||Wl(m,!0)}else h=y_(h).createTextNode(S),h[rs]=m,m.stateNode=h}return zi(m),null;case 31:if(b=m.memoizedState,h===null||h.memoizedState!==null){if(S=Su(m),b!==null){if(h===null){if(!S)throw Error(n(318));if(h=m.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(n(557));h[rs]=m}else Go(),(m.flags&128)===0&&(m.memoizedState=null),m.flags|=4;zi(m),h=!1}else b=Ed(),h!==null&&h.memoizedState!==null&&(h.memoizedState.hydrationErrors=b),h=!0;if(!h)return m.flags&256?(Wc(m),m):(Wc(m),null);if((m.flags&128)!==0)throw Error(n(558))}return zi(m),null;case 13:if(S=m.memoizedState,h===null||h.memoizedState!==null&&h.memoizedState.dehydrated!==null){if(W=Su(m),S!==null&&S.dehydrated!==null){if(h===null){if(!W)throw Error(n(318));if(W=m.memoizedState,W=W!==null?W.dehydrated:null,!W)throw Error(n(317));W[rs]=m}else Go(),(m.flags&128)===0&&(m.memoizedState=null),m.flags|=4;zi(m),W=!1}else W=Ed(),h!==null&&h.memoizedState!==null&&(h.memoizedState.hydrationErrors=W),W=!0;if(!W)return m.flags&256?(Wc(m),m):(Wc(m),null)}return Wc(m),(m.flags&128)!==0?(m.lanes=b,m):(b=S!==null,h=h!==null&&h.memoizedState!==null,b&&(S=m.child,W=null,S.alternate!==null&&S.alternate.memoizedState!==null&&S.alternate.memoizedState.cachePool!==null&&(W=S.alternate.memoizedState.cachePool.pool),Z=null,S.memoizedState!==null&&S.memoizedState.cachePool!==null&&(Z=S.memoizedState.cachePool.pool),Z!==W&&(S.flags|=2048)),b!==h&&b&&(m.child.flags|=8192),al(m,m.updateQueue),zi(m),null);case 4:return Be(),h===null&&mk(m.stateNode.containerInfo),zi(m),null;case 10:return zc(m.type),zi(m),null;case 19:if(de(Ro),S=m.memoizedState,S===null)return zi(m),null;if(W=(m.flags&128)!==0,Z=S.rendering,Z===null)if(W)aa(S,!1);else{if(Q!==0||h!==null&&(h.flags&128)!==0)for(h=m.child;h!==null;){if(Z=Tf(h),Z!==null){for(m.flags|=128,aa(S,!1),h=Z.updateQueue,m.updateQueue=h,al(m,h),m.subtreeFlags=0,h=b,b=m.child;b!==null;)Qc(b,h),b=b.sibling;return xe(Ro,Ro.current&1|2),jn&&ui(m,S.treeForkCount),m.child}h=h.sibling}S.tail!==null&&dn()>Vn&&(m.flags|=128,W=!0,aa(S,!1),m.lanes=4194304)}else{if(!W)if(h=Tf(Z),h!==null){if(m.flags|=128,W=!0,h=h.updateQueue,m.updateQueue=h,al(m,h),aa(S,!0),S.tail===null&&S.tailMode==="hidden"&&!Z.alternate&&!jn)return zi(m),null}else 2*dn()-S.renderingStartTime>Vn&&b!==536870912&&(m.flags|=128,W=!0,aa(S,!1),m.lanes=4194304);S.isBackwards?(Z.sibling=m.child,m.child=Z):(h=S.last,h!==null?h.sibling=Z:m.child=Z,S.last=Z)}return S.tail!==null?(h=S.tail,S.rendering=h,S.tail=h.sibling,S.renderingStartTime=dn(),h.sibling=null,b=Ro.current,xe(Ro,W?b&1|2:b&1),jn&&ui(m,S.treeForkCount),h):(zi(m),null);case 22:case 23:return Wc(m),ou(),S=m.memoizedState!==null,h!==null?h.memoizedState!==null!==S&&(m.flags|=8192):S&&(m.flags|=8192),S?(b&536870912)!==0&&(m.flags&128)===0&&(zi(m),m.subtreeFlags&6&&(m.flags|=8192)):zi(m),b=m.updateQueue,b!==null&&al(m,b.retryQueue),b=null,h!==null&&h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(b=h.memoizedState.cachePool.pool),S=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(S=m.memoizedState.cachePool.pool),S!==b&&(m.flags|=2048),h!==null&&de(ri),null;case 24:return b=null,h!==null&&(b=h.memoizedState.cache),m.memoizedState.cache!==b&&(m.flags|=2048),zc(Po),zi(m),null;case 25:return null;case 30:return null}throw Error(n(156,m.tag))}function eo(h,m){switch(jo(m),m.tag){case 1:return h=m.flags,h&65536?(m.flags=h&-65537|128,m):null;case 3:return zc(Po),Be(),h=m.flags,(h&65536)!==0&&(h&128)===0?(m.flags=h&-65537|128,m):null;case 26:case 27:case 5:return Ge(m),null;case 31:if(m.memoizedState!==null){if(Wc(m),m.alternate===null)throw Error(n(340));Go()}return h=m.flags,h&65536?(m.flags=h&-65537|128,m):null;case 13:if(Wc(m),h=m.memoizedState,h!==null&&h.dehydrated!==null){if(m.alternate===null)throw Error(n(340));Go()}return h=m.flags,h&65536?(m.flags=h&-65537|128,m):null;case 19:return de(Ro),null;case 4:return Be(),null;case 10:return zc(m.type),null;case 22:case 23:return Wc(m),ou(),h!==null&&de(ri),h=m.flags,h&65536?(m.flags=h&-65537|128,m):null;case 24:return zc(Po),null;case 25:return null;default:return null}}function Cc(h,m){switch(jo(m),m.tag){case 3:zc(Po),Be();break;case 26:case 27:case 5:Ge(m);break;case 4:Be();break;case 31:m.memoizedState!==null&&Wc(m);break;case 13:Wc(m);break;case 19:de(Ro);break;case 10:zc(m.type);break;case 22:case 23:Wc(m),ou(),h!==null&&de(ri);break;case 24:zc(Po)}}function qc(h,m){try{var b=m.updateQueue,S=b!==null?b.lastEffect:null;if(S!==null){var W=S.next;b=W;do{if((b.tag&h)===h){S=void 0;var Z=b.create,Ne=b.inst;S=Z(),Ne.destroy=S}b=b.next}while(b!==W)}}catch(Ze){Mo(m,m.return,Ze)}}function oo(h,m,b){try{var S=m.updateQueue,W=S!==null?S.lastEffect:null;if(W!==null){var Z=W.next;S=Z;do{if((S.tag&h)===h){var Ne=S.inst,Ze=Ne.destroy;if(Ze!==void 0){Ne.destroy=void 0,W=m;var Bt=b,_r=Ze;try{_r()}catch(Qr){Mo(W,Bt,Qr)}}}S=S.next}while(S!==Z)}}catch(Qr){Mo(m,m.return,Qr)}}function Xc(h){var m=h.updateQueue;if(m!==null){var b=h.stateNode;try{ks(m,b)}catch(S){Mo(h,h.return,S)}}}function lo(h,m,b){b.props=Gh(h.type,h.memoizedProps),b.state=h.memoizedState;try{b.componentWillUnmount()}catch(S){Mo(h,m,S)}}function fn(h,m){try{var b=h.ref;if(b!==null){switch(h.tag){case 26:case 27:case 5:var S=h.stateNode;break;case 30:S=h.stateNode;break;default:S=h.stateNode}typeof b=="function"?h.refCleanup=b(S):b.current=S}}catch(W){Mo(h,m,W)}}function wo(h,m){var b=h.ref,S=h.refCleanup;if(b!==null)if(typeof S=="function")try{S()}catch(W){Mo(h,m,W)}finally{h.refCleanup=null,h=h.alternate,h!=null&&(h.refCleanup=null)}else if(typeof b=="function")try{b(null)}catch(W){Mo(h,m,W)}else b.current=null}function sc(h){var m=h.type,b=h.memoizedProps,S=h.stateNode;try{e:switch(m){case"button":case"input":case"select":case"textarea":b.autoFocus&&S.focus();break e;case"img":b.src?S.src=b.src:b.srcSet&&(S.srcset=b.srcSet)}}catch(W){Mo(h,h.return,W)}}function No(h,m,b){try{var S=h.stateNode;wle(S,h.type,b,m),S[qs]=m}catch(W){Mo(h,h.return,W)}}function ed(h){return h.tag===5||h.tag===3||h.tag===26||h.tag===27&&Dg(h.type)||h.tag===4}function bs(h){e:for(;;){for(;h.sibling===null;){if(h.return===null||ed(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&h.tag!==18;){if(h.tag===27&&Dg(h.type)||h.flags&2||h.child===null||h.tag===4)continue e;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function Js(h,m,b){var S=h.tag;if(S===5||S===6)h=h.stateNode,m?(b.nodeType===9?b.body:b.nodeName==="HTML"?b.ownerDocument.body:b).insertBefore(h,m):(m=b.nodeType===9?b.body:b.nodeName==="HTML"?b.ownerDocument.body:b,m.appendChild(h),b=b._reactRootContainer,b!=null||m.onclick!==null||(m.onclick=le));else if(S!==4&&(S===27&&Dg(h.type)&&(b=h.stateNode,m=null),h=h.child,h!==null))for(Js(h,m,b),h=h.sibling;h!==null;)Js(h,m,b),h=h.sibling}function ka(h,m,b){var S=h.tag;if(S===5||S===6)h=h.stateNode,m?b.insertBefore(h,m):b.appendChild(h);else if(S!==4&&(S===27&&Dg(h.type)&&(b=h.stateNode),h=h.child,h!==null))for(ka(h,m,b),h=h.sibling;h!==null;)ka(h,m,b),h=h.sibling}function td(h){var m=h.stateNode,b=h.memoizedProps;try{for(var S=h.type,W=m.attributes;W.length;)m.removeAttributeNode(W[0]);Id(m,S,b),m[rs]=h,m[qs]=b}catch(Z){Mo(h,h.return,Z)}}var wl=!1,ko=!1,rd=!1,jc=typeof WeakSet=="function"?WeakSet:Set,Ol=null;function Pg(h,m){if(h=h.containerInfo,vk=T_,h=Jl(h),bi(h)){if("selectionStart"in h)var b={start:h.selectionStart,end:h.selectionEnd};else e:{b=(b=h.ownerDocument)&&b.defaultView||window;var S=b.getSelection&&b.getSelection();if(S&&S.rangeCount!==0){b=S.anchorNode;var W=S.anchorOffset,Z=S.focusNode;S=S.focusOffset;try{b.nodeType,Z.nodeType}catch{b=null;break e}var Ne=0,Ze=-1,Bt=-1,_r=0,Qr=0,qr=h,Tr=null;t:for(;;){for(var Ir;qr!==b||W!==0&&qr.nodeType!==3||(Ze=Ne+W),qr!==Z||S!==0&&qr.nodeType!==3||(Bt=Ne+S),qr.nodeType===3&&(Ne+=qr.nodeValue.length),(Ir=qr.firstChild)!==null;)Tr=qr,qr=Ir;for(;;){if(qr===h)break t;if(Tr===b&&++_r===W&&(Ze=Ne),Tr===Z&&++Qr===S&&(Bt=Ne),(Ir=qr.nextSibling)!==null)break;qr=Tr,Tr=qr.parentNode}qr=Ir}b=Ze===-1||Bt===-1?null:{start:Ze,end:Bt}}else b=null}b=b||{start:0,end:0}}else b=null;for(yk={focusedElem:h,selectionRange:b},T_=!1,Ol=m;Ol!==null;)if(m=Ol,h=m.child,(m.subtreeFlags&1028)!==0&&h!==null)h.return=m,Ol=h;else for(;Ol!==null;){switch(m=Ol,Z=m.alternate,h=m.flags,m.tag){case 0:if((h&4)!==0&&(h=m.updateQueue,h=h!==null?h.events:null,h!==null))for(b=0;b<h.length;b++)W=h[b],W.ref.impl=W.nextImpl;break;case 11:case 15:break;case 1:if((h&1024)!==0&&Z!==null){h=void 0,b=m,W=Z.memoizedProps,Z=Z.memoizedState,S=b.stateNode;try{var wi=Gh(b.type,W);h=S.getSnapshotBeforeUpdate(wi,Z),S.__reactInternalSnapshotBeforeUpdate=h}catch(us){Mo(b,b.return,us)}}break;case 3:if((h&1024)!==0){if(h=m.stateNode.containerInfo,b=h.nodeType,b===9)wk(h);else if(b===1)switch(h.nodeName){case"HEAD":case"HTML":case"BODY":wk(h);break;default:h.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((h&1024)!==0)throw Error(n(163))}if(h=m.sibling,h!==null){h.return=m.return,Ol=h;break}Ol=m.return}}function mp(h,m,b){var S=b.flags;switch(b.tag){case 0:case 11:case 15:cu(h,b),S&4&&qc(5,b);break;case 1:if(cu(h,b),S&4)if(h=b.stateNode,m===null)try{h.componentDidMount()}catch(Ne){Mo(b,b.return,Ne)}else{var W=Gh(b.type,m.memoizedProps);m=m.memoizedState;try{h.componentDidUpdate(W,m,h.__reactInternalSnapshotBeforeUpdate)}catch(Ne){Mo(b,b.return,Ne)}}S&64&&Xc(b),S&512&&fn(b,b.return);break;case 3:if(cu(h,b),S&64&&(h=b.updateQueue,h!==null)){if(m=null,b.child!==null)switch(b.child.tag){case 27:case 5:m=b.child.stateNode;break;case 1:m=b.child.stateNode}try{ks(h,m)}catch(Ne){Mo(b,b.return,Ne)}}break;case 27:m===null&&S&4&&td(b);case 26:case 5:cu(h,b),m===null&&S&4&&sc(b),S&512&&fn(b,b.return);break;case 12:cu(h,b);break;case 31:cu(h,b),S&4&&rv(h,b);break;case 13:cu(h,b),S&4&&Dy(h,b),S&64&&(h=b.memoizedState,h!==null&&(h=h.dehydrated,h!==null&&(b=ule.bind(null,b),kle(h,b))));break;case 22:if(S=b.memoizedState!==null||wl,!S){m=m!==null&&m.memoizedState!==null||ko,W=wl;var Z=ko;wl=S,(ko=m)&&!Z?Wh(h,b,(b.subtreeFlags&8772)!==0):cu(h,b),wl=W,ko=Z}break;case 30:break;default:cu(h,b)}}function dA(h){var m=h.alternate;m!==null&&(h.alternate=null,dA(m)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(m=h.stateNode,m!==null&&nu(m)),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}var qo=null,ju=!1;function Kd(h,m,b){for(b=b.child;b!==null;)hh(h,m,b),b=b.sibling}function hh(h,m,b){if(Qt&&typeof Qt.onCommitFiberUnmount=="function")try{Qt.onCommitFiberUnmount(nr,b)}catch{}switch(b.tag){case 26:ko||wo(b,m),Kd(h,m,b),b.memoizedState?b.memoizedState.count--:b.stateNode&&(b=b.stateNode,b.parentNode.removeChild(b));break;case 27:ko||wo(b,m);var S=qo,W=ju;Dg(b.type)&&(qo=b.stateNode,ju=!1),Kd(h,m,b),j1(b.stateNode),qo=S,ju=W;break;case 5:ko||wo(b,m);case 6:if(S=qo,W=ju,qo=null,Kd(h,m,b),qo=S,ju=W,qo!==null)if(ju)try{(qo.nodeType===9?qo.body:qo.nodeName==="HTML"?qo.ownerDocument.body:qo).removeChild(b.stateNode)}catch(Z){Mo(b,m,Z)}else try{qo.removeChild(b.stateNode)}catch(Z){Mo(b,m,Z)}break;case 18:qo!==null&&(ju?(h=qo,C6(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,b.stateNode),Ky(h)):C6(qo,b.stateNode));break;case 4:S=qo,W=ju,qo=b.stateNode.containerInfo,ju=!0,Kd(h,m,b),qo=S,ju=W;break;case 0:case 11:case 14:case 15:oo(2,b,m),ko||oo(4,b,m),Kd(h,m,b);break;case 1:ko||(wo(b,m),S=b.stateNode,typeof S.componentWillUnmount=="function"&&lo(b,m,S)),Kd(h,m,b);break;case 21:Kd(h,m,b);break;case 22:ko=(S=ko)||b.memoizedState!==null,Kd(h,m,b),ko=S;break;default:Kd(h,m,b)}}function rv(h,m){if(m.memoizedState===null&&(h=m.alternate,h!==null&&(h=h.memoizedState,h!==null))){h=h.dehydrated;try{Ky(h)}catch(b){Mo(m,m.return,b)}}}function Dy(h,m){if(m.memoizedState===null&&(h=m.alternate,h!==null&&(h=h.memoizedState,h!==null&&(h=h.dehydrated,h!==null))))try{Ky(h)}catch(b){Mo(m,m.return,b)}}function My(h){switch(h.tag){case 31:case 13:case 19:var m=h.stateNode;return m===null&&(m=h.stateNode=new jc),m;case 22:return h=h.stateNode,m=h._retryCache,m===null&&(m=h._retryCache=new jc),m;default:throw Error(n(435,h.tag))}}function pp(h,m){var b=My(h);m.forEach(function(S){if(!b.has(S)){b.add(S);var W=dle.bind(null,h,S);S.then(W,W)}})}function Zc(h,m){var b=m.deletions;if(b!==null)for(var S=0;S<b.length;S++){var W=b[S],Z=h,Ne=m,Ze=Ne;e:for(;Ze!==null;){switch(Ze.tag){case 27:if(Dg(Ze.type)){qo=Ze.stateNode,ju=!1;break e}break;case 5:qo=Ze.stateNode,ju=!1;break e;case 3:case 4:qo=Ze.stateNode.containerInfo,ju=!0;break e}Ze=Ze.return}if(qo===null)throw Error(n(160));hh(Z,Ne,W),qo=null,ju=!1,Z=W.alternate,Z!==null&&(Z.return=null),W.return=null}if(m.subtreeFlags&13886)for(m=m.child;m!==null;)JA(m,h),m=m.sibling}var Gd=null;function JA(h,m){var b=h.alternate,S=h.flags;switch(h.tag){case 0:case 11:case 14:case 15:Zc(m,h),co(h),S&4&&(oo(3,h,h.return),qc(3,h),oo(5,h,h.return));break;case 1:Zc(m,h),co(h),S&512&&(ko||b===null||wo(b,b.return)),S&64&&wl&&(h=h.updateQueue,h!==null&&(S=h.callbacks,S!==null&&(b=h.shared.hiddenCallbacks,h.shared.hiddenCallbacks=b===null?S:b.concat(S))));break;case 26:var W=Gd;if(Zc(m,h),co(h),S&512&&(ko||b===null||wo(b,b.return)),S&4){var Z=b!==null?b.memoizedState:null;if(S=h.memoizedState,b===null)if(S===null)if(h.stateNode===null){e:{S=h.type,b=h.memoizedProps,W=W.ownerDocument||W;t:switch(S){case"title":Z=W.getElementsByTagName("title")[0],(!Z||Z[Ml]||Z[rs]||Z.namespaceURI==="http://www.w3.org/2000/svg"||Z.hasAttribute("itemprop"))&&(Z=W.createElement(S),W.head.insertBefore(Z,W.querySelector("head > title"))),Id(Z,S,b),Z[rs]=h,ba(Z),S=Z;break e;case"link":var Ne=M6("link","href",W).get(S+(b.href||""));if(Ne){for(var Ze=0;Ze<Ne.length;Ze++)if(Z=Ne[Ze],Z.getAttribute("href")===(b.href==null||b.href===""?null:b.href)&&Z.getAttribute("rel")===(b.rel==null?null:b.rel)&&Z.getAttribute("title")===(b.title==null?null:b.title)&&Z.getAttribute("crossorigin")===(b.crossOrigin==null?null:b.crossOrigin)){Ne.splice(Ze,1);break t}}Z=W.createElement(S),Id(Z,S,b),W.head.appendChild(Z);break;case"meta":if(Ne=M6("meta","content",W).get(S+(b.content||""))){for(Ze=0;Ze<Ne.length;Ze++)if(Z=Ne[Ze],Z.getAttribute("content")===(b.content==null?null:""+b.content)&&Z.getAttribute("name")===(b.name==null?null:b.name)&&Z.getAttribute("property")===(b.property==null?null:b.property)&&Z.getAttribute("http-equiv")===(b.httpEquiv==null?null:b.httpEquiv)&&Z.getAttribute("charset")===(b.charSet==null?null:b.charSet)){Ne.splice(Ze,1);break t}}Z=W.createElement(S),Id(Z,S,b),W.head.appendChild(Z);break;default:throw Error(n(468,S))}Z[rs]=h,ba(Z),S=Z}h.stateNode=S}else F6(W,h.type,h.stateNode);else h.stateNode=D6(W,S,h.memoizedProps);else Z!==S?(Z===null?b.stateNode!==null&&(b=b.stateNode,b.parentNode.removeChild(b)):Z.count--,S===null?F6(W,h.type,h.stateNode):D6(W,S,h.memoizedProps)):S===null&&h.stateNode!==null&&No(h,h.memoizedProps,b.memoizedProps)}break;case 27:Zc(m,h),co(h),S&512&&(ko||b===null||wo(b,b.return)),b!==null&&S&4&&No(h,h.memoizedProps,b.memoizedProps);break;case 5:if(Zc(m,h),co(h),S&512&&(ko||b===null||wo(b,b.return)),h.flags&32){W=h.stateNode;try{zs(W,"")}catch(wi){Mo(h,h.return,wi)}}S&4&&h.stateNode!=null&&(W=h.memoizedProps,No(h,W,b!==null?b.memoizedProps:W)),S&1024&&(rd=!0);break;case 6:if(Zc(m,h),co(h),S&4){if(h.stateNode===null)throw Error(n(162));S=h.memoizedProps,b=h.stateNode;try{b.nodeValue=S}catch(wi){Mo(h,h.return,wi)}}break;case 3:if(w_=null,W=Gd,Gd=x_(m.containerInfo),Zc(m,h),Gd=W,co(h),S&4&&b!==null&&b.memoizedState.isDehydrated)try{Ky(m.containerInfo)}catch(wi){Mo(h,h.return,wi)}rd&&(rd=!1,gp(h));break;case 4:S=Gd,Gd=x_(h.stateNode.containerInfo),Zc(m,h),co(h),Gd=S;break;case 12:Zc(m,h),co(h);break;case 31:Zc(m,h),co(h),S&4&&(S=h.updateQueue,S!==null&&(h.updateQueue=null,pp(h,S)));break;case 13:Zc(m,h),co(h),h.child.flags&8192&&h.memoizedState!==null!=(b!==null&&b.memoizedState!==null)&&(lr=dn()),S&4&&(S=h.updateQueue,S!==null&&(h.updateQueue=null,pp(h,S)));break;case 22:W=h.memoizedState!==null;var Bt=b!==null&&b.memoizedState!==null,_r=wl,Qr=ko;if(wl=_r||W,ko=Qr||Bt,Zc(m,h),ko=Qr,wl=_r,co(h),S&8192)e:for(m=h.stateNode,m._visibility=W?m._visibility&-2:m._visibility|1,W&&(b===null||Bt||wl||ko||Nf(h)),b=null,m=h;;){if(m.tag===5||m.tag===26){if(b===null){Bt=b=m;try{if(Z=Bt.stateNode,W)Ne=Z.style,typeof Ne.setProperty=="function"?Ne.setProperty("display","none","important"):Ne.display="none";else{Ze=Bt.stateNode;var qr=Bt.memoizedProps.style,Tr=qr!=null&&qr.hasOwnProperty("display")?qr.display:null;Ze.style.display=Tr==null||typeof Tr=="boolean"?"":(""+Tr).trim()}}catch(wi){Mo(Bt,Bt.return,wi)}}}else if(m.tag===6){if(b===null){Bt=m;try{Bt.stateNode.nodeValue=W?"":Bt.memoizedProps}catch(wi){Mo(Bt,Bt.return,wi)}}}else if(m.tag===18){if(b===null){Bt=m;try{var Ir=Bt.stateNode;W?j6(Ir,!0):j6(Bt.stateNode,!1)}catch(wi){Mo(Bt,Bt.return,wi)}}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===h)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===h)break e;for(;m.sibling===null;){if(m.return===null||m.return===h)break e;b===m&&(b=null),m=m.return}b===m&&(b=null),m.sibling.return=m.return,m=m.sibling}S&4&&(S=h.updateQueue,S!==null&&(b=S.retryQueue,b!==null&&(S.retryQueue=null,pp(h,b))));break;case 19:Zc(m,h),co(h),S&4&&(S=h.updateQueue,S!==null&&(h.updateQueue=null,pp(h,S)));break;case 30:break;case 21:break;default:Zc(m,h),co(h)}}function co(h){var m=h.flags;if(m&2){try{for(var b,S=h.return;S!==null;){if(ed(S)){b=S;break}S=S.return}if(b==null)throw Error(n(160));switch(b.tag){case 27:var W=b.stateNode,Z=bs(h);ka(h,Z,W);break;case 5:var Ne=b.stateNode;b.flags&32&&(zs(Ne,""),b.flags&=-33);var Ze=bs(h);ka(h,Ze,Ne);break;case 3:case 4:var Bt=b.stateNode.containerInfo,_r=bs(h);Js(h,_r,Bt);break;default:throw Error(n(161))}}catch(Qr){Mo(h,h.return,Qr)}h.flags&=-3}m&4096&&(h.flags&=-4097)}function gp(h){if(h.subtreeFlags&1024)for(h=h.child;h!==null;){var m=h;gp(m),m.tag===5&&m.flags&1024&&m.stateNode.reset(),h=h.sibling}}function cu(h,m){if(m.subtreeFlags&8772)for(m=m.child;m!==null;)mp(h,m.alternate,m),m=m.sibling}function Nf(h){for(h=h.child;h!==null;){var m=h;switch(m.tag){case 0:case 11:case 14:case 15:oo(4,m,m.return),Nf(m);break;case 1:wo(m,m.return);var b=m.stateNode;typeof b.componentWillUnmount=="function"&&lo(m,m.return,b),Nf(m);break;case 27:j1(m.stateNode);case 26:case 5:wo(m,m.return),Nf(m);break;case 22:m.memoizedState===null&&Nf(m);break;case 30:Nf(m);break;default:Nf(m)}h=h.sibling}}function Wh(h,m,b){for(b=b&&(m.subtreeFlags&8772)!==0,m=m.child;m!==null;){var S=m.alternate,W=h,Z=m,Ne=Z.flags;switch(Z.tag){case 0:case 11:case 15:Wh(W,Z,b),qc(4,Z);break;case 1:if(Wh(W,Z,b),S=Z,W=S.stateNode,typeof W.componentDidMount=="function")try{W.componentDidMount()}catch(_r){Mo(S,S.return,_r)}if(S=Z,W=S.updateQueue,W!==null){var Ze=S.stateNode;try{var Bt=W.shared.hiddenCallbacks;if(Bt!==null)for(W.shared.hiddenCallbacks=null,W=0;W<Bt.length;W++)ia(Bt[W],Ze)}catch(_r){Mo(S,S.return,_r)}}b&&Ne&64&&Xc(Z),fn(Z,Z.return);break;case 27:td(Z);case 26:case 5:Wh(W,Z,b),b&&S===null&&Ne&4&&sc(Z),fn(Z,Z.return);break;case 12:Wh(W,Z,b);break;case 31:Wh(W,Z,b),b&&Ne&4&&rv(W,Z);break;case 13:Wh(W,Z,b),b&&Ne&4&&Dy(W,Z);break;case 22:Z.memoizedState===null&&Wh(W,Z,b),fn(Z,Z.return);break;case 30:break;default:Wh(W,Z,b)}m=m.sibling}}function kf(h,m){var b=null;h!==null&&h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(b=h.memoizedState.cachePool.pool),h=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(h=m.memoizedState.cachePool.pool),h!==b&&(h!=null&&h.refCount++,b!=null&&Sh(b))}function Yh(h,m){h=null,m.alternate!==null&&(h=m.alternate.memoizedState.cache),m=m.memoizedState.cache,m!==h&&(m.refCount++,h!=null&&Sh(h))}function uu(h,m,b,S){if(m.subtreeFlags&10256)for(m=m.child;m!==null;)qh(h,m,b,S),m=m.sibling}function qh(h,m,b,S){var W=m.flags;switch(m.tag){case 0:case 11:case 15:uu(h,m,b,S),W&2048&&qc(9,m);break;case 1:uu(h,m,b,S);break;case 3:uu(h,m,b,S),W&2048&&(h=null,m.alternate!==null&&(h=m.alternate.memoizedState.cache),m=m.memoizedState.cache,m!==h&&(m.refCount++,h!=null&&Sh(h)));break;case 12:if(W&2048){uu(h,m,b,S),h=m.stateNode;try{var Z=m.memoizedProps,Ne=Z.id,Ze=Z.onPostCommit;typeof Ze=="function"&&Ze(Ne,m.alternate===null?"mount":"update",h.passiveEffectDuration,-0)}catch(Bt){Mo(m,m.return,Bt)}}else uu(h,m,b,S);break;case 31:uu(h,m,b,S);break;case 13:uu(h,m,b,S);break;case 23:break;case 22:Z=m.stateNode,Ne=m.alternate,m.memoizedState!==null?Z._visibility&2?uu(h,m,b,S):em(h,m):Z._visibility&2?uu(h,m,b,S):(Z._visibility|=2,Wd(h,m,b,S,(m.subtreeFlags&10256)!==0||!1)),W&2048&&kf(Ne,m);break;case 24:uu(h,m,b,S),W&2048&&Yh(m.alternate,m);break;default:uu(h,m,b,S)}}function Wd(h,m,b,S,W){for(W=W&&((m.subtreeFlags&10256)!==0||!1),m=m.child;m!==null;){var Z=h,Ne=m,Ze=b,Bt=S,_r=Ne.flags;switch(Ne.tag){case 0:case 11:case 15:Wd(Z,Ne,Ze,Bt,W),qc(8,Ne);break;case 23:break;case 22:var Qr=Ne.stateNode;Ne.memoizedState!==null?Qr._visibility&2?Wd(Z,Ne,Ze,Bt,W):em(Z,Ne):(Qr._visibility|=2,Wd(Z,Ne,Ze,Bt,W)),W&&_r&2048&&kf(Ne.alternate,Ne);break;case 24:Wd(Z,Ne,Ze,Bt,W),W&&_r&2048&&Yh(Ne.alternate,Ne);break;default:Wd(Z,Ne,Ze,Bt,W)}m=m.sibling}}function em(h,m){if(m.subtreeFlags&10256)for(m=m.child;m!==null;){var b=h,S=m,W=S.flags;switch(S.tag){case 22:em(b,S),W&2048&&kf(S.alternate,S);break;case 24:em(b,S),W&2048&&Yh(S.alternate,S);break;default:em(b,S)}m=m.sibling}}var vp=8192;function If(h,m,b){if(h.subtreeFlags&vp)for(h=h.child;h!==null;)hA(h,m,b),h=h.sibling}function hA(h,m,b){switch(h.tag){case 26:If(h,m,b),h.flags&vp&&h.memoizedState!==null&&Hle(b,Gd,h.memoizedState,h.memoizedProps);break;case 5:If(h,m,b);break;case 3:case 4:var S=Gd;Gd=x_(h.stateNode.containerInfo),If(h,m,b),Gd=S;break;case 22:h.memoizedState===null&&(S=h.alternate,S!==null&&S.memoizedState!==null?(S=vp,vp=16777216,If(h,m,b),vp=S):If(h,m,b));break;default:If(h,m,b)}}function nv(h){var m=h.alternate;if(m!==null&&(h=m.child,h!==null)){m.child=null;do m=h.sibling,h.sibling=null,h=m;while(h!==null)}}function tm(h){var m=h.deletions;if((h.flags&16)!==0){if(m!==null)for(var b=0;b<m.length;b++){var S=m[b];Ol=S,Uy(S,h)}nv(h)}if(h.subtreeFlags&10256)for(h=h.child;h!==null;)Fy(h),h=h.sibling}function Fy(h){switch(h.tag){case 0:case 11:case 15:tm(h),h.flags&2048&&oo(9,h,h.return);break;case 3:tm(h);break;case 12:tm(h);break;case 22:var m=h.stateNode;h.memoizedState!==null&&m._visibility&2&&(h.return===null||h.return.tag!==13)?(m._visibility&=-3,yp(h)):tm(h);break;default:tm(h)}}function yp(h){var m=h.deletions;if((h.flags&16)!==0){if(m!==null)for(var b=0;b<m.length;b++){var S=m[b];Ol=S,Uy(S,h)}nv(h)}for(h=h.child;h!==null;){switch(m=h,m.tag){case 0:case 11:case 15:oo(8,m,m.return),yp(m);break;case 22:b=m.stateNode,b._visibility&2&&(b._visibility&=-3,yp(m));break;default:yp(m)}h=h.sibling}}function Uy(h,m){for(;Ol!==null;){var b=Ol;switch(b.tag){case 0:case 11:case 15:oo(8,b,m);break;case 23:case 22:if(b.memoizedState!==null&&b.memoizedState.cachePool!==null){var S=b.memoizedState.cachePool.pool;S!=null&&S.refCount++}break;case 24:Sh(b.memoizedState.cache)}if(S=b.child,S!==null)S.return=b,Ol=S;else e:for(b=h;Ol!==null;){S=Ol;var W=S.sibling,Z=S.return;if(dA(S),S===b){Ol=null;break e}if(W!==null){W.return=Z,Ol=W;break e}Ol=Z}}}var xp={getCacheForType:function(h){var m=yo(Po),b=m.data.get(h);return b===void 0&&(b=h(),m.data.set(h,b)),b},cacheSignal:function(){return yo(Po).controller.signal}},iv=typeof WeakMap=="function"?WeakMap:Map,va=0,Aa=null,Ss=null,Bs=0,Ia=0,Nu=null,Xh=!1,rm=!1,M=!1,B=0,Q=0,$=0,ge=0,ke=0,He=0,ut=0,dt=null,Ut=null,Zt=!1,lr=0,Fr=0,Vn=1/0,gn=null,Pn=null,Bi=0,di=null,oi=null,ea=0,Ks=0,cs=null,Yn=null,ua=0,ya=null;function Mi(){return(va&2)!==0&&Bs!==0?Bs&-Bs:ne.T!==null?dk():Ms()}function ac(){if(He===0)if((Bs&536870912)===0||jn){var h=rn;rn<<=1,(rn&3932160)===0&&(rn=262144),He=h}else He=536870912;return h=yl.current,h!==null&&(h.flags|=32),He}function Do(h,m,b){(h===Aa&&(Ia===2||Ia===9)||h.cancelPendingCommit!==null)&&(Ih(h,0),kd(h,Bs,He,!1)),js(h,b),((va&2)===0||h!==Aa)&&(h===Aa&&((va&2)===0&&(ge|=b),Q===4&&kd(h,Bs,He,!1)),sm(h))}function Yd(h,m,b){if((va&6)!==0)throw Error(n(327));var S=!b&&(m&127)===0&&(m&h.expiredLanes)===0||On(h,m),W=S?Og(h,m):AA(h,m,!0),Z=S;do{if(W===0){rm&&!S&&kd(h,m,0,!1);break}else{if(b=h.current.alternate,Z&&!ku(b)){W=AA(h,m,!1),Z=!1;continue}if(W===2){if(Z=m,h.errorRecoveryDisabledLanes&Z)var Ne=0;else Ne=h.pendingLanes&-536870913,Ne=Ne!==0?Ne:Ne&536870912?536870912:0;if(Ne!==0){m=Ne;e:{var Ze=h;W=dt;var Bt=Ze.current.memoizedState.isDehydrated;if(Bt&&(Ih(Ze,Ne).flags|=256),Ne=AA(Ze,Ne,!1),Ne!==2){if(M&&!Bt){Ze.errorRecoveryDisabledLanes|=Z,ge|=Z,W=4;break e}Z=Ut,Ut=W,Z!==null&&(Ut===null?Ut=Z:Ut.push.apply(Ut,Z))}W=Ne}if(Z=!1,W!==2)continue}}if(W===1){Ih(h,0),kd(h,m,0,!0);break}e:{switch(S=h,Z=W,Z){case 0:case 1:throw Error(n(345));case 4:if((m&4194048)!==m)break;case 6:kd(S,m,He,!Xh);break e;case 2:Ut=null;break;case 3:case 5:break;default:throw Error(n(329))}if((m&62914560)===m&&(W=lr+300-dn(),10<W)){if(kd(S,m,He,!Xh),cn(S,0,!0)!==0)break e;ea=m,S.timeoutHandle=S6(Eo.bind(null,S,b,Ut,gn,Zt,m,He,ge,ut,Xh,Z,"Throttled",-0,0),W);break e}Eo(S,b,Ut,gn,Zt,m,He,ge,ut,Xh,Z,null,-0,0)}}break}while(!0);sm(h)}function Eo(h,m,b,S,W,Z,Ne,Ze,Bt,_r,Qr,qr,Tr,Ir){if(h.timeoutHandle=-1,qr=m.subtreeFlags,qr&8192||(qr&16785408)===16785408){qr={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:le},hA(m,Z,qr);var wi=(Z&62914560)===Z?lr-dn():(Z&4194048)===Z?Fr-dn():0;if(wi=Qle(qr,wi),wi!==null){ea=Z,h.cancelPendingCommit=wi(n6.bind(null,h,m,Z,b,S,W,Ne,Ze,Bt,Qr,qr,null,Tr,Ir)),kd(h,Z,Ne,!_r);return}}n6(h,m,Z,b,S,W,Ne,Ze,Bt)}function ku(h){for(var m=h;;){var b=m.tag;if((b===0||b===11||b===15)&&m.flags&16384&&(b=m.updateQueue,b!==null&&(b=b.stores,b!==null)))for(var S=0;S<b.length;S++){var W=b[S],Z=W.getSnapshot;W=W.value;try{if(!xn(Z(),W))return!1}catch{return!1}}if(b=m.child,m.subtreeFlags&16384&&b!==null)b.return=m,m=b;else{if(m===h)break;for(;m.sibling===null;){if(m.return===null||m.return===h)return!0;m=m.return}m.sibling.return=m.return,m=m.sibling}}return!0}function kd(h,m,b,S){m&=~ke,m&=~ge,h.suspendedLanes|=m,h.pingedLanes&=~m,S&&(h.warmLanes|=m),S=h.expirationTimes;for(var W=m;0<W;){var Z=31-zr(W),Ne=1<<Z;S[Z]=-1,W&=~Ne}b!==0&&sn(h,b,m)}function Iu(){return(va&6)===0?(S1(0),!1):!0}function nd(){if(Ss!==null){if(Ia===0)var h=Ss.return;else h=Ss,Tu=Yl=null,tp(h),mr=null,Kt=0,h=Ss;for(;h!==null;)Cc(h.alternate,h),h=h.return;Ss=null}}function Ih(h,m){var b=h.timeoutHandle;b!==-1&&(h.timeoutHandle=-1,Sle(b)),b=h.cancelPendingCommit,b!==null&&(h.cancelPendingCommit=null,b()),ea=0,nd(),Aa=h,Ss=b=yc(h.current,null),Bs=m,Ia=0,Nu=null,Xh=!1,rm=On(h,m),M=!1,ut=He=ke=ge=$=Q=0,Ut=dt=null,Zt=!1,(m&8)!==0&&(m|=m&32);var S=h.entangledLanes;if(S!==0)for(h=h.entanglements,S&=m;0<S;){var W=31-zr(S),Z=1<<W;m|=h[W],S&=~Z}return B=m,iu(),b}function Zh(h,m){Ji=null,ne.H=dp,m===Ma||m===Na?(m=bt(),Ia=3):m===Oo?(m=bt(),Ia=4):Ia=m===Ke?8:m!==null&&typeof m=="object"&&typeof m.then=="function"?6:1,Nu=m,Ss===null&&(Q=1,ZA(h,_(m,h.current)))}function fA(){var h=yl.current;return h===null?!0:(Bs&4194048)===Bs?nc===null:(Bs&62914560)===Bs||(Bs&536870912)!==0?h===nc:!1}function nm(){var h=ne.H;return ne.H=dp,h===null?dp:h}function im(){var h=ne.A;return ne.A=xp,h}function Lh(){Q=4,Xh||(Bs&4194048)!==Bs&&yl.current!==null||(rm=!0),($&134217727)===0&&(ge&134217727)===0||Aa===null||kd(Aa,Bs,He,!1)}function AA(h,m,b){var S=va;va|=2;var W=nm(),Z=im();(Aa!==h||Bs!==m)&&(gn=null,Ih(h,m)),m=!1;var Ne=Q;e:do try{if(Ia!==0&&Ss!==null){var Ze=Ss,Bt=Nu;switch(Ia){case 8:nd(),Ne=6;break e;case 3:case 2:case 9:case 6:yl.current===null&&(m=!0);var _r=Ia;if(Ia=0,Nu=null,$y(h,Ze,Bt,_r),b&&rm){Ne=0;break e}break;default:_r=Ia,Ia=0,Nu=null,$y(h,Ze,Bt,_r)}}mA(),Ne=Q;break}catch(Qr){Zh(h,Qr)}while(!0);return m&&h.shellSuspendCounter++,Tu=Yl=null,va=S,ne.H=W,ne.A=Z,Ss===null&&(Aa=null,Bs=0,iu()),Ne}function mA(){for(;Ss!==null;)e6(Ss)}function Og(h,m){var b=va;va|=2;var S=nm(),W=im();Aa!==h||Bs!==m?(gn=null,Vn=dn()+500,Ih(h,m)):rm=On(h,m);e:do try{if(Ia!==0&&Ss!==null){m=Ss;var Z=Nu;t:switch(Ia){case 1:Ia=0,Nu=null,$y(h,m,Z,1);break;case 2:case 9:if(O(Z)){Ia=0,Nu=null,t6(m);break}m=function(){Ia!==2&&Ia!==9||Aa!==h||(Ia=7),sm(h)},Z.then(m,m);break e;case 3:Ia=7;break e;case 4:Ia=5;break e;case 7:O(Z)?(Ia=0,Nu=null,t6(m)):(Ia=0,Nu=null,$y(h,m,Z,7));break;case 5:var Ne=null;switch(Ss.tag){case 26:Ne=Ss.memoizedState;case 5:case 27:var Ze=Ss;if(Ne?U6(Ne):Ze.stateNode.complete){Ia=0,Nu=null;var Bt=Ze.sibling;if(Bt!==null)Ss=Bt;else{var _r=Ze.return;_r!==null?(Ss=_r,f_(_r)):Ss=null}break t}}Ia=0,Nu=null,$y(h,m,Z,5);break;case 6:Ia=0,Nu=null,$y(h,m,Z,6);break;case 8:nd(),Q=6;break e;default:throw Error(n(462))}}sv();break}catch(Qr){Zh(h,Qr)}while(!0);return Tu=Yl=null,ne.H=S,ne.A=W,va=b,Ss!==null?0:(Aa=null,Bs=0,iu(),Q)}function sv(){for(;Ss!==null&&!yn();)e6(Ss)}function e6(h){var m=Sc(h.alternate,h,B);h.memoizedProps=h.pendingProps,m===null?f_(h):Ss=m}function t6(h){var m=h,b=m.alternate;switch(m.tag){case 15:case 0:m=an(b,m,m.pendingProps,m.type,void 0,Bs);break;case 11:m=an(b,m,m.pendingProps,m.type.render,m.ref,Bs);break;case 5:tp(m);default:Cc(b,m),m=Ss=Qc(m,B),m=Sc(b,m,B)}h.memoizedProps=h.pendingProps,m===null?f_(h):Ss=m}function $y(h,m,b,S){Tu=Yl=null,tp(m),mr=null,Kt=0;var W=m.return;try{if(Ue(h,W,m,b,Bs)){Q=1,ZA(h,_(b,h.current)),Ss=null;return}}catch(Z){if(W!==null)throw Ss=W,Z;Q=1,ZA(h,_(b,h.current)),Ss=null;return}m.flags&32768?(jn||S===1?h=!0:rm||(Bs&536870912)!==0?h=!1:(Xh=h=!0,(S===2||S===9||S===3||S===6)&&(S=yl.current,S!==null&&S.tag===13&&(S.flags|=16384))),r6(m,h)):f_(m)}function f_(h){var m=h;do{if((m.flags&32768)!==0){r6(m,Xh);return}h=m.return;var b=bl(m.alternate,m,B);if(b!==null){Ss=b;return}if(m=m.sibling,m!==null){Ss=m;return}Ss=m=h}while(m!==null);Q===0&&(Q=5)}function r6(h,m){do{var b=eo(h.alternate,h);if(b!==null){b.flags&=32767,Ss=b;return}if(b=h.return,b!==null&&(b.flags|=32768,b.subtreeFlags=0,b.deletions=null),!m&&(h=h.sibling,h!==null)){Ss=h;return}Ss=h=b}while(h!==null);Q=6,Ss=null}function n6(h,m,b,S,W,Z,Ne,Ze,Bt){h.cancelPendingCommit=null;do A_();while(Bi!==0);if((va&6)!==0)throw Error(n(327));if(m!==null){if(m===h.current)throw Error(n(177));if(Z=m.lanes|m.childLanes,Z|=gl,ei(h,b,Z,Ne,Ze,Bt),h===Aa&&(Ss=Aa=null,Bs=0),oi=m,di=h,ea=b,Ks=Z,cs=W,Yn=S,(m.subtreeFlags&10256)!==0||(m.flags&10256)!==0?(h.callbackNode=null,h.callbackPriority=0,hle(Zn,function(){return l6(),null})):(h.callbackNode=null,h.callbackPriority=0),S=(m.flags&13878)!==0,(m.subtreeFlags&13878)!==0||S){S=ne.T,ne.T=null,W=ce.p,ce.p=2,Ne=va,va|=4;try{Pg(h,m,b)}finally{va=Ne,ce.p=W,ne.T=S}}Bi=1,i6(),s6(),a6()}}function i6(){if(Bi===1){Bi=0;var h=di,m=oi,b=(m.flags&13878)!==0;if((m.subtreeFlags&13878)!==0||b){b=ne.T,ne.T=null;var S=ce.p;ce.p=2;var W=va;va|=4;try{JA(m,h);var Z=yk,Ne=Jl(h.containerInfo),Ze=Z.focusedElem,Bt=Z.selectionRange;if(Ne!==Ze&&Ze&&Ze.ownerDocument&&Ko(Ze.ownerDocument.documentElement,Ze)){if(Bt!==null&&bi(Ze)){var _r=Bt.start,Qr=Bt.end;if(Qr===void 0&&(Qr=_r),"selectionStart"in Ze)Ze.selectionStart=_r,Ze.selectionEnd=Math.min(Qr,Ze.value.length);else{var qr=Ze.ownerDocument||document,Tr=qr&&qr.defaultView||window;if(Tr.getSelection){var Ir=Tr.getSelection(),wi=Ze.textContent.length,us=Math.min(Bt.start,wi),Zo=Bt.end===void 0?us:Math.min(Bt.end,wi);!Ir.extend&&us>Zo&&(Ne=Zo,Zo=us,us=Ne);var sr=io(Ze,us),Vt=io(Ze,Zo);if(sr&&Vt&&(Ir.rangeCount!==1||Ir.anchorNode!==sr.node||Ir.anchorOffset!==sr.offset||Ir.focusNode!==Vt.node||Ir.focusOffset!==Vt.offset)){var wr=qr.createRange();wr.setStart(sr.node,sr.offset),Ir.removeAllRanges(),us>Zo?(Ir.addRange(wr),Ir.extend(Vt.node,Vt.offset)):(wr.setEnd(Vt.node,Vt.offset),Ir.addRange(wr))}}}}for(qr=[],Ir=Ze;Ir=Ir.parentNode;)Ir.nodeType===1&&qr.push({element:Ir,left:Ir.scrollLeft,top:Ir.scrollTop});for(typeof Ze.focus=="function"&&Ze.focus(),Ze=0;Ze<qr.length;Ze++){var Wr=qr[Ze];Wr.element.scrollLeft=Wr.left,Wr.element.scrollTop=Wr.top}}T_=!!vk,yk=vk=null}finally{va=W,ce.p=S,ne.T=b}}h.current=m,Bi=2}}function s6(){if(Bi===2){Bi=0;var h=di,m=oi,b=(m.flags&8772)!==0;if((m.subtreeFlags&8772)!==0||b){b=ne.T,ne.T=null;var S=ce.p;ce.p=2;var W=va;va|=4;try{mp(h,m.alternate,m)}finally{va=W,ce.p=S,ne.T=b}}Bi=3}}function a6(){if(Bi===4||Bi===3){Bi=0,Mn();var h=di,m=oi,b=ea,S=Yn;(m.subtreeFlags&10256)!==0||(m.flags&10256)!==0?Bi=5:(Bi=0,oi=di=null,o6(h,h.pendingLanes));var W=h.pendingLanes;if(W===0&&(Pn=null),Cn(b),m=m.stateNode,Qt&&typeof Qt.onCommitFiberRoot=="function")try{Qt.onCommitFiberRoot(nr,m,void 0,(m.current.flags&128)===128)}catch{}if(S!==null){m=ne.T,W=ce.p,ce.p=2,ne.T=null;try{for(var Z=h.onRecoverableError,Ne=0;Ne<S.length;Ne++){var Ze=S[Ne];Z(Ze.value,{componentStack:Ze.stack})}}finally{ne.T=m,ce.p=W}}(ea&3)!==0&&A_(),sm(h),W=h.pendingLanes,(b&261930)!==0&&(W&42)!==0?h===ya?ua++:(ua=0,ya=h):ua=0,S1(0)}}function o6(h,m){(h.pooledCacheLanes&=m)===0&&(m=h.pooledCache,m!=null&&(h.pooledCache=null,Sh(m)))}function A_(){return i6(),s6(),a6(),l6()}function l6(){if(Bi!==5)return!1;var h=di,m=Ks;Ks=0;var b=Cn(ea),S=ne.T,W=ce.p;try{ce.p=32>b?32:b,ne.T=null,b=cs,cs=null;var Z=di,Ne=ea;if(Bi=0,oi=di=null,ea=0,(va&6)!==0)throw Error(n(331));var Ze=va;if(va|=4,Fy(Z.current),qh(Z,Z.current,Ne,b),va=Ze,S1(0,!1),Qt&&typeof Qt.onPostCommitFiberRoot=="function")try{Qt.onPostCommitFiberRoot(nr,Z)}catch{}return!0}finally{ce.p=W,ne.T=S,o6(h,m)}}function c6(h,m,b){m=_(b,m),m=q(h.stateNode,m,2),h=Vi(h,m,2),h!==null&&(js(h,2),sm(h))}function Mo(h,m,b){if(h.tag===3)c6(h,h,b);else for(;m!==null;){if(m.tag===3){c6(m,h,b);break}else if(m.tag===1){var S=m.stateNode;if(typeof m.type.getDerivedStateFromError=="function"||typeof S.componentDidCatch=="function"&&(Pn===null||!Pn.has(S))){h=_(b,h),b=pe(2),S=Vi(m,b,2),S!==null&&(_e(b,S,m,h),js(S,2),sm(S));break}}m=m.return}}function lk(h,m,b){var S=h.pingCache;if(S===null){S=h.pingCache=new iv;var W=new Set;S.set(m,W)}else W=S.get(m),W===void 0&&(W=new Set,S.set(m,W));W.has(b)||(M=!0,W.add(b),h=cle.bind(null,h,m,b),m.then(h,h))}function cle(h,m,b){var S=h.pingCache;S!==null&&S.delete(m),h.pingedLanes|=h.suspendedLanes&b,h.warmLanes&=~b,Aa===h&&(Bs&b)===b&&(Q===4||Q===3&&(Bs&62914560)===Bs&&300>dn()-lr?(va&2)===0&&Ih(h,0):ke|=b,ut===Bs&&(ut=0)),sm(h)}function u6(h,m){m===0&&(m=Cs()),h=tc(h,m),h!==null&&(js(h,m),sm(h))}function ule(h){var m=h.memoizedState,b=0;m!==null&&(b=m.retryLane),u6(h,b)}function dle(h,m){var b=0;switch(h.tag){case 31:case 13:var S=h.stateNode,W=h.memoizedState;W!==null&&(b=W.retryLane);break;case 19:S=h.stateNode;break;case 22:S=h.stateNode._retryCache;break;default:throw Error(n(314))}S!==null&&S.delete(m),u6(h,b)}function hle(h,m){return pr(h,m)}var m_=null,Hy=null,ck=!1,p_=!1,uk=!1,Rg=0;function sm(h){h!==Hy&&h.next===null&&(Hy===null?m_=Hy=h:Hy=Hy.next=h),p_=!0,ck||(ck=!0,Ale())}function S1(h,m){if(!uk&&p_){uk=!0;do for(var b=!1,S=m_;S!==null;){if(h!==0){var W=S.pendingLanes;if(W===0)var Z=0;else{var Ne=S.suspendedLanes,Ze=S.pingedLanes;Z=(1<<31-zr(42|h)+1)-1,Z&=W&~(Ne&~Ze),Z=Z&201326741?Z&201326741|1:Z?Z|2:0}Z!==0&&(b=!0,A6(S,Z))}else Z=Bs,Z=cn(S,S===Aa?Z:0,S.cancelPendingCommit!==null||S.timeoutHandle!==-1),(Z&3)===0||On(S,Z)||(b=!0,A6(S,Z));S=S.next}while(b);uk=!1}}function fle(){d6()}function d6(){p_=ck=!1;var h=0;Rg!==0&&_le()&&(h=Rg);for(var m=dn(),b=null,S=m_;S!==null;){var W=S.next,Z=h6(S,m);Z===0?(S.next=null,b===null?m_=W:b.next=W,W===null&&(Hy=b)):(b=S,(h!==0||(Z&3)!==0)&&(p_=!0)),S=W}Bi!==0&&Bi!==5||S1(h),Rg!==0&&(Rg=0)}function h6(h,m){for(var b=h.suspendedLanes,S=h.pingedLanes,W=h.expirationTimes,Z=h.pendingLanes&-62914561;0<Z;){var Ne=31-zr(Z),Ze=1<<Ne,Bt=W[Ne];Bt===-1?((Ze&b)===0||(Ze&S)!==0)&&(W[Ne]=li(Ze,m)):Bt<=m&&(h.expiredLanes|=Ze),Z&=~Ze}if(m=Aa,b=Bs,b=cn(h,h===m?b:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),S=h.callbackNode,b===0||h===m&&(Ia===2||Ia===9)||h.cancelPendingCommit!==null)return S!==null&&S!==null&&Xr(S),h.callbackNode=null,h.callbackPriority=0;if((b&3)===0||On(h,b)){if(m=b&-b,m===h.callbackPriority)return m;switch(S!==null&&Xr(S),Cn(b)){case 2:case 8:b=Kn;break;case 32:b=Zn;break;case 268435456:b=ot;break;default:b=Zn}return S=f6.bind(null,h),b=pr(b,S),h.callbackPriority=m,h.callbackNode=b,m}return S!==null&&S!==null&&Xr(S),h.callbackPriority=2,h.callbackNode=null,2}function f6(h,m){if(Bi!==0&&Bi!==5)return h.callbackNode=null,h.callbackPriority=0,null;var b=h.callbackNode;if(A_()&&h.callbackNode!==b)return null;var S=Bs;return S=cn(h,h===Aa?S:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),S===0?null:(Yd(h,S,m),h6(h,dn()),h.callbackNode!=null&&h.callbackNode===b?f6.bind(null,h):null)}function A6(h,m){if(A_())return null;Yd(h,m,!0)}function Ale(){Tle(function(){(va&6)!==0?pr(mn,fle):d6()})}function dk(){if(Rg===0){var h=yt;h===0&&(h=Jn,Jn<<=1,(Jn&261888)===0&&(Jn=256)),Rg=h}return Rg}function m6(h){return h==null||typeof h=="symbol"||typeof h=="boolean"?null:typeof h=="function"?h:ie(""+h)}function p6(h,m){var b=m.ownerDocument.createElement("input");return b.name=m.name,b.value=m.value,h.id&&b.setAttribute("form",h.id),m.parentNode.insertBefore(b,m),h=new FormData(h),b.parentNode.removeChild(b),h}function mle(h,m,b,S,W){if(m==="submit"&&b&&b.stateNode===W){var Z=m6((W[qs]||null).action),Ne=S.submitter;Ne&&(m=(m=Ne[qs]||null)?m6(m.formAction):Ne.getAttribute("formAction"),m!==null&&(Z=m,Ne=null));var Ze=new Te("action","action",null,S,W);h.push({event:Ze,listeners:[{instance:null,listener:function(){if(S.defaultPrevented){if(Rg!==0){var Bt=Ne?p6(W,Ne):new FormData(W);up(b,{pending:!0,data:Bt,method:W.method,action:Z},null,Bt)}}else typeof Z=="function"&&(Ze.preventDefault(),Bt=Ne?p6(W,Ne):new FormData(W),up(b,{pending:!0,data:Bt,method:W.method,action:Z},Z,Bt))},currentTarget:W}]})}}for(var hk=0;hk<zl.length;hk++){var fk=zl[hk],ple=fk.toLowerCase(),gle=fk[0].toUpperCase()+fk.slice(1);Kl(ple,"on"+gle)}Kl(Hl,"onAnimationEnd"),Kl(Ql,"onAnimationIteration"),Kl(Il,"onAnimationStart"),Kl("dblclick","onDoubleClick"),Kl("focusin","onFocus"),Kl("focusout","onBlur"),Kl(yd,"onTransitionRun"),Kl(ec,"onTransitionStart"),Kl(Vl,"onTransitionCancel"),Kl(gc,"onTransitionEnd"),ro("onMouseEnter",["mouseout","mouseover"]),ro("onMouseLeave",["mouseout","mouseover"]),ro("onPointerEnter",["pointerout","pointerover"]),ro("onPointerLeave",["pointerout","pointerover"]),po("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),po("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),po("onBeforeInput",["compositionend","keypress","textInput","paste"]),po("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),po("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),po("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var T1="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vle=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(T1));function g6(h,m){m=(m&4)!==0;for(var b=0;b<h.length;b++){var S=h[b],W=S.event;S=S.listeners;e:{var Z=void 0;if(m)for(var Ne=S.length-1;0<=Ne;Ne--){var Ze=S[Ne],Bt=Ze.instance,_r=Ze.currentTarget;if(Ze=Ze.listener,Bt!==Z&&W.isPropagationStopped())break e;Z=Ze,W.currentTarget=_r;try{Z(W)}catch(Qr){Eu(Qr)}W.currentTarget=null,Z=Bt}else for(Ne=0;Ne<S.length;Ne++){if(Ze=S[Ne],Bt=Ze.instance,_r=Ze.currentTarget,Ze=Ze.listener,Bt!==Z&&W.isPropagationStopped())break e;Z=Ze,W.currentTarget=_r;try{Z(W)}catch(Qr){Eu(Qr)}W.currentTarget=null,Z=Bt}}}}function _a(h,m){var b=m[Qa];b===void 0&&(b=m[Qa]=new Set);var S=h+"__bubble";b.has(S)||(v6(m,h,2,!1),b.add(S))}function Ak(h,m,b){var S=0;m&&(S|=4),v6(b,h,S,m)}var g_="_reactListening"+Math.random().toString(36).slice(2);function mk(h){if(!h[g_]){h[g_]=!0,Us.forEach(function(b){b!=="selectionchange"&&(vle.has(b)||Ak(b,!1,h),Ak(b,!0,h))});var m=h.nodeType===9?h:h.ownerDocument;m===null||m[g_]||(m[g_]=!0,Ak("selectionchange",!1,m))}}function v6(h,m,b,S){switch(G6(m)){case 2:var W=Kle;break;case 8:W=Gle;break;default:W=kk}b=W.bind(null,m,b,h),W=void 0,!D||m!=="touchstart"&&m!=="touchmove"&&m!=="wheel"||(W=!0),S?W!==void 0?h.addEventListener(m,b,{capture:!0,passive:W}):h.addEventListener(m,b,!0):W!==void 0?h.addEventListener(m,b,{passive:W}):h.addEventListener(m,b,!1)}function pk(h,m,b,S,W){var Z=S;if((m&1)===0&&(m&2)===0&&S!==null)e:for(;;){if(S===null)return;var Ne=S.tag;if(Ne===3||Ne===4){var Ze=S.stateNode.containerInfo;if(Ze===W)break;if(Ne===4)for(Ne=S.return;Ne!==null;){var Bt=Ne.tag;if((Bt===3||Bt===4)&&Ne.stateNode.containerInfo===W)return;Ne=Ne.return}for(;Ze!==null;){if(Ne=ml(Ze),Ne===null)return;if(Bt=Ne.tag,Bt===5||Bt===6||Bt===26||Bt===27){S=Z=Ne;continue e}Ze=Ze.parentNode}}S=S.return}ct(function(){var _r=Z,Qr=z(b),qr=[];e:{var Tr=xd.get(h);if(Tr!==void 0){var Ir=Te,wi=h;switch(h){case"keypress":if(me(b)===0)break e;case"keydown":case"keyup":Ir=tn;break;case"focusin":wi="focus",Ir=ir;break;case"focusout":wi="blur",Ir=ir;break;case"beforeblur":case"afterblur":Ir=ir;break;case"click":if(b.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ir=It;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ir=zt;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ir=Gt;break;case Hl:case Ql:case Il:Ir=xr;break;case gc:Ir=cr;break;case"scroll":case"scrollend":Ir=at;break;case"wheel":Ir=Cr;break;case"copy":case"cut":case"paste":Ir=mt;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ir=St;break;case"toggle":case"beforetoggle":Ir=un}var us=(m&4)!==0,Zo=!us&&(h==="scroll"||h==="scrollend"),sr=us?Tr!==null?Tr+"Capture":null:Tr;us=[];for(var Vt=_r,wr;Vt!==null;){var Wr=Vt;if(wr=Wr.stateNode,Wr=Wr.tag,Wr!==5&&Wr!==26&&Wr!==27||wr===null||sr===null||(Wr=P(Vt,sr),Wr!=null&&us.push(C1(Vt,Wr,wr))),Zo)break;Vt=Vt.return}0<us.length&&(Tr=new Ir(Tr,wi,null,b,Qr),qr.push({event:Tr,listeners:us}))}}if((m&7)===0){e:{if(Tr=h==="mouseover"||h==="pointerover",Ir=h==="mouseout"||h==="pointerout",Tr&&b!==F&&(wi=b.relatedTarget||b.fromElement)&&(ml(wi)||wi[Os]))break e;if((Ir||Tr)&&(Tr=Qr.window===Qr?Qr:(Tr=Qr.ownerDocument)?Tr.defaultView||Tr.parentWindow:window,Ir?(wi=b.relatedTarget||b.toElement,Ir=_r,wi=wi?ml(wi):null,wi!==null&&(Zo=s(wi),us=wi.tag,wi!==Zo||us!==5&&us!==27&&us!==6)&&(wi=null)):(Ir=null,wi=_r),Ir!==wi)){if(us=It,Wr="onMouseLeave",sr="onMouseEnter",Vt="mouse",(h==="pointerout"||h==="pointerover")&&(us=St,Wr="onPointerLeave",sr="onPointerEnter",Vt="pointer"),Zo=Ir==null?Tr:Ya(Ir),wr=wi==null?Tr:Ya(wi),Tr=new us(Wr,Vt+"leave",Ir,b,Qr),Tr.target=Zo,Tr.relatedTarget=wr,Wr=null,ml(Qr)===_r&&(us=new us(sr,Vt+"enter",wi,b,Qr),us.target=wr,us.relatedTarget=Zo,Wr=us),Zo=Wr,Ir&&wi)t:{for(us=yle,sr=Ir,Vt=wi,wr=0,Wr=sr;Wr;Wr=us(Wr))wr++;Wr=0;for(var Xi=Vt;Xi;Xi=us(Xi))Wr++;for(;0<wr-Wr;)sr=us(sr),wr--;for(;0<Wr-wr;)Vt=us(Vt),Wr--;for(;wr--;){if(sr===Vt||Vt!==null&&sr===Vt.alternate){us=sr;break t}sr=us(sr),Vt=us(Vt)}us=null}else us=null;Ir!==null&&y6(qr,Tr,Ir,us,!1),wi!==null&&Zo!==null&&y6(qr,Zo,wi,us,!0)}}e:{if(Tr=_r?Ya(_r):window,Ir=Tr.nodeName&&Tr.nodeName.toLowerCase(),Ir==="select"||Ir==="input"&&Tr.type==="file")var uo=Wn;else if(Di(Tr))if(Gi)uo=da;else{uo=Qi;var Pi=Ys}else Ir=Tr.nodeName,!Ir||Ir.toLowerCase()!=="input"||Tr.type!=="checkbox"&&Tr.type!=="radio"?_r&&zo(_r.elementType)&&(uo=Wn):uo=ai;if(uo&&(uo=uo(h,_r))){Gn(qr,uo,b,Qr);break e}Pi&&Pi(h,Tr,_r),h==="focusout"&&_r&&Tr.type==="number"&&_r.memoizedProps.value!=null&&Xs(Tr,"number",Tr.value)}switch(Pi=_r?Ya(_r):window,h){case"focusin":(Di(Pi)||Pi.contentEditable==="true")&&(Xa=Pi,Ul=_r,$l=null);break;case"focusout":$l=Ul=Xa=null;break;case"mousedown":ha=!0;break;case"contextmenu":case"mouseup":case"dragend":ha=!1,vo(qr,b,Qr);break;case"selectionchange":if(Ra)break;case"keydown":case"keyup":vo(qr,b,Qr)}var oa;if(Rn)e:{switch(h){case"compositionstart":var La="onCompositionStart";break e;case"compositionend":La="onCompositionEnd";break e;case"compositionupdate":La="onCompositionUpdate";break e}La=void 0}else Fn?nn(h,b)&&(La="onCompositionEnd"):h==="keydown"&&b.keyCode===229&&(La="onCompositionStart");La&&(Sn&&b.locale!=="ko"&&(Fn||La!=="onCompositionStart"?La==="onCompositionEnd"&&Fn&&(oa=he()):(X=Qr,ee="value"in X?X.value:X.textContent,Fn=!0)),Pi=v_(_r,La),0<Pi.length&&(La=new Rt(La,h,null,b,Qr),qr.push({event:La,listeners:Pi}),oa?La.data=oa:(oa=ji(b),oa!==null&&(La.data=oa)))),(oa=pt?Hn(h,b):$n(h,b))&&(La=v_(_r,"onBeforeInput"),0<La.length&&(Pi=new Rt("onBeforeInput","beforeinput",null,b,Qr),qr.push({event:Pi,listeners:La}),Pi.data=oa)),mle(qr,h,_r,b,Qr)}g6(qr,m)})}function C1(h,m,b){return{instance:h,listener:m,currentTarget:b}}function v_(h,m){for(var b=m+"Capture",S=[];h!==null;){var W=h,Z=W.stateNode;if(W=W.tag,W!==5&&W!==26&&W!==27||Z===null||(W=P(h,b),W!=null&&S.unshift(C1(h,W,Z)),W=P(h,m),W!=null&&S.push(C1(h,W,Z))),h.tag===3)return S;h=h.return}return[]}function yle(h){if(h===null)return null;do h=h.return;while(h&&h.tag!==5&&h.tag!==27);return h||null}function y6(h,m,b,S,W){for(var Z=m._reactName,Ne=[];b!==null&&b!==S;){var Ze=b,Bt=Ze.alternate,_r=Ze.stateNode;if(Ze=Ze.tag,Bt!==null&&Bt===S)break;Ze!==5&&Ze!==26&&Ze!==27||_r===null||(Bt=_r,W?(_r=P(b,Z),_r!=null&&Ne.unshift(C1(b,_r,Bt))):W||(_r=P(b,Z),_r!=null&&Ne.push(C1(b,_r,Bt)))),b=b.return}Ne.length!==0&&h.push({event:m,listeners:Ne})}var xle=/\r\n?/g,ble=/\u0000|\uFFFD/g;function x6(h){return(typeof h=="string"?h:""+h).replace(xle,`
`).replace(ble,"")}function b6(h,m){return m=x6(m),x6(h)===m}function Xo(h,m,b,S,W,Z){switch(b){case"children":typeof S=="string"?m==="body"||m==="textarea"&&S===""||zs(h,S):(typeof S=="number"||typeof S=="bigint")&&m!=="body"&&zs(h,""+S);break;case"className":Ns(h,"class",S);break;case"tabIndex":Ns(h,"tabindex",S);break;case"dir":case"role":case"viewBox":case"width":case"height":Ns(h,b,S);break;case"style":no(h,S,Z);break;case"data":if(m!=="object"){Ns(h,"data",S);break}case"src":case"href":if(S===""&&(m!=="a"||b!=="href")){h.removeAttribute(b);break}if(S==null||typeof S=="function"||typeof S=="symbol"||typeof S=="boolean"){h.removeAttribute(b);break}S=ie(""+S),h.setAttribute(b,S);break;case"action":case"formAction":if(typeof S=="function"){h.setAttribute(b,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof Z=="function"&&(b==="formAction"?(m!=="input"&&Xo(h,m,"name",W.name,W,null),Xo(h,m,"formEncType",W.formEncType,W,null),Xo(h,m,"formMethod",W.formMethod,W,null),Xo(h,m,"formTarget",W.formTarget,W,null)):(Xo(h,m,"encType",W.encType,W,null),Xo(h,m,"method",W.method,W,null),Xo(h,m,"target",W.target,W,null)));if(S==null||typeof S=="symbol"||typeof S=="boolean"){h.removeAttribute(b);break}S=ie(""+S),h.setAttribute(b,S);break;case"onClick":S!=null&&(h.onclick=le);break;case"onScroll":S!=null&&_a("scroll",h);break;case"onScrollEnd":S!=null&&_a("scrollend",h);break;case"dangerouslySetInnerHTML":if(S!=null){if(typeof S!="object"||!("__html"in S))throw Error(n(61));if(b=S.__html,b!=null){if(W.children!=null)throw Error(n(60));h.innerHTML=b}}break;case"multiple":h.multiple=S&&typeof S!="function"&&typeof S!="symbol";break;case"muted":h.muted=S&&typeof S!="function"&&typeof S!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(S==null||typeof S=="function"||typeof S=="boolean"||typeof S=="symbol"){h.removeAttribute("xlink:href");break}b=ie(""+S),h.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",b);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":S!=null&&typeof S!="function"&&typeof S!="symbol"?h.setAttribute(b,""+S):h.removeAttribute(b);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":S&&typeof S!="function"&&typeof S!="symbol"?h.setAttribute(b,""):h.removeAttribute(b);break;case"capture":case"download":S===!0?h.setAttribute(b,""):S!==!1&&S!=null&&typeof S!="function"&&typeof S!="symbol"?h.setAttribute(b,S):h.removeAttribute(b);break;case"cols":case"rows":case"size":case"span":S!=null&&typeof S!="function"&&typeof S!="symbol"&&!isNaN(S)&&1<=S?h.setAttribute(b,S):h.removeAttribute(b);break;case"rowSpan":case"start":S==null||typeof S=="function"||typeof S=="symbol"||isNaN(S)?h.removeAttribute(b):h.setAttribute(b,S);break;case"popover":_a("beforetoggle",h),_a("toggle",h),ci(h,"popover",S);break;case"xlinkActuate":Ta(h,"http://www.w3.org/1999/xlink","xlink:actuate",S);break;case"xlinkArcrole":Ta(h,"http://www.w3.org/1999/xlink","xlink:arcrole",S);break;case"xlinkRole":Ta(h,"http://www.w3.org/1999/xlink","xlink:role",S);break;case"xlinkShow":Ta(h,"http://www.w3.org/1999/xlink","xlink:show",S);break;case"xlinkTitle":Ta(h,"http://www.w3.org/1999/xlink","xlink:title",S);break;case"xlinkType":Ta(h,"http://www.w3.org/1999/xlink","xlink:type",S);break;case"xmlBase":Ta(h,"http://www.w3.org/XML/1998/namespace","xml:base",S);break;case"xmlLang":Ta(h,"http://www.w3.org/XML/1998/namespace","xml:lang",S);break;case"xmlSpace":Ta(h,"http://www.w3.org/XML/1998/namespace","xml:space",S);break;case"is":ci(h,"is",S);break;case"innerText":case"textContent":break;default:(!(2<b.length)||b[0]!=="o"&&b[0]!=="O"||b[1]!=="n"&&b[1]!=="N")&&(b=Ht.get(b)||b,ci(h,b,S))}}function gk(h,m,b,S,W,Z){switch(b){case"style":no(h,S,Z);break;case"dangerouslySetInnerHTML":if(S!=null){if(typeof S!="object"||!("__html"in S))throw Error(n(61));if(b=S.__html,b!=null){if(W.children!=null)throw Error(n(60));h.innerHTML=b}}break;case"children":typeof S=="string"?zs(h,S):(typeof S=="number"||typeof S=="bigint")&&zs(h,""+S);break;case"onScroll":S!=null&&_a("scroll",h);break;case"onScrollEnd":S!=null&&_a("scrollend",h);break;case"onClick":S!=null&&(h.onclick=le);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!kl.hasOwnProperty(b))e:{if(b[0]==="o"&&b[1]==="n"&&(W=b.endsWith("Capture"),m=b.slice(2,W?b.length-7:void 0),Z=h[qs]||null,Z=Z!=null?Z[b]:null,typeof Z=="function"&&h.removeEventListener(m,Z,W),typeof S=="function")){typeof Z!="function"&&Z!==null&&(b in h?h[b]=null:h.hasAttribute(b)&&h.removeAttribute(b)),h.addEventListener(m,S,W);break e}b in h?h[b]=S:S===!0?h.setAttribute(b,""):ci(h,b,S)}}}function Id(h,m,b){switch(m){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":_a("error",h),_a("load",h);var S=!1,W=!1,Z;for(Z in b)if(b.hasOwnProperty(Z)){var Ne=b[Z];if(Ne!=null)switch(Z){case"src":S=!0;break;case"srcSet":W=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,m));default:Xo(h,m,Z,Ne,b,null)}}W&&Xo(h,m,"srcSet",b.srcSet,b,null),S&&Xo(h,m,"src",b.src,b,null);return;case"input":_a("invalid",h);var Ze=Z=Ne=W=null,Bt=null,_r=null;for(S in b)if(b.hasOwnProperty(S)){var Qr=b[S];if(Qr!=null)switch(S){case"name":W=Qr;break;case"type":Ne=Qr;break;case"checked":Bt=Qr;break;case"defaultChecked":_r=Qr;break;case"value":Z=Qr;break;case"defaultValue":Ze=Qr;break;case"children":case"dangerouslySetInnerHTML":if(Qr!=null)throw Error(n(137,m));break;default:Xo(h,m,S,Qr,b,null)}}Ea(h,Z,Ze,Bt,_r,Ne,W,!1);return;case"select":_a("invalid",h),S=Ne=Z=null;for(W in b)if(b.hasOwnProperty(W)&&(Ze=b[W],Ze!=null))switch(W){case"value":Z=Ze;break;case"defaultValue":Ne=Ze;break;case"multiple":S=Ze;default:Xo(h,m,W,Ze,b,null)}m=Z,b=Ne,h.multiple=!!S,m!=null?fs(h,!!S,m,!1):b!=null&&fs(h,!!S,b,!0);return;case"textarea":_a("invalid",h),Z=W=S=null;for(Ne in b)if(b.hasOwnProperty(Ne)&&(Ze=b[Ne],Ze!=null))switch(Ne){case"value":S=Ze;break;case"defaultValue":W=Ze;break;case"children":Z=Ze;break;case"dangerouslySetInnerHTML":if(Ze!=null)throw Error(n(91));break;default:Xo(h,m,Ne,Ze,b,null)}za(h,S,W,Z);return;case"option":for(Bt in b)b.hasOwnProperty(Bt)&&(S=b[Bt],S!=null)&&(Bt==="selected"?h.selected=S&&typeof S!="function"&&typeof S!="symbol":Xo(h,m,Bt,S,b,null));return;case"dialog":_a("beforetoggle",h),_a("toggle",h),_a("cancel",h),_a("close",h);break;case"iframe":case"object":_a("load",h);break;case"video":case"audio":for(S=0;S<T1.length;S++)_a(T1[S],h);break;case"image":_a("error",h),_a("load",h);break;case"details":_a("toggle",h);break;case"embed":case"source":case"link":_a("error",h),_a("load",h);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(_r in b)if(b.hasOwnProperty(_r)&&(S=b[_r],S!=null))switch(_r){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,m));default:Xo(h,m,_r,S,b,null)}return;default:if(zo(m)){for(Qr in b)b.hasOwnProperty(Qr)&&(S=b[Qr],S!==void 0&&gk(h,m,Qr,S,b,void 0));return}}for(Ze in b)b.hasOwnProperty(Ze)&&(S=b[Ze],S!=null&&Xo(h,m,Ze,S,b,null))}function wle(h,m,b,S){switch(m){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var W=null,Z=null,Ne=null,Ze=null,Bt=null,_r=null,Qr=null;for(Ir in b){var qr=b[Ir];if(b.hasOwnProperty(Ir)&&qr!=null)switch(Ir){case"checked":break;case"value":break;case"defaultValue":Bt=qr;default:S.hasOwnProperty(Ir)||Xo(h,m,Ir,null,S,qr)}}for(var Tr in S){var Ir=S[Tr];if(qr=b[Tr],S.hasOwnProperty(Tr)&&(Ir!=null||qr!=null))switch(Tr){case"type":Z=Ir;break;case"name":W=Ir;break;case"checked":_r=Ir;break;case"defaultChecked":Qr=Ir;break;case"value":Ne=Ir;break;case"defaultValue":Ze=Ir;break;case"children":case"dangerouslySetInnerHTML":if(Ir!=null)throw Error(n(137,m));break;default:Ir!==qr&&Xo(h,m,Tr,Ir,S,qr)}}Vo(h,Ne,Ze,Bt,_r,Qr,Z,W);return;case"select":Ir=Ne=Ze=Tr=null;for(Z in b)if(Bt=b[Z],b.hasOwnProperty(Z)&&Bt!=null)switch(Z){case"value":break;case"multiple":Ir=Bt;default:S.hasOwnProperty(Z)||Xo(h,m,Z,null,S,Bt)}for(W in S)if(Z=S[W],Bt=b[W],S.hasOwnProperty(W)&&(Z!=null||Bt!=null))switch(W){case"value":Tr=Z;break;case"defaultValue":Ze=Z;break;case"multiple":Ne=Z;default:Z!==Bt&&Xo(h,m,W,Z,S,Bt)}m=Ze,b=Ne,S=Ir,Tr!=null?fs(h,!!b,Tr,!1):!!S!=!!b&&(m!=null?fs(h,!!b,m,!0):fs(h,!!b,b?[]:"",!1));return;case"textarea":Ir=Tr=null;for(Ze in b)if(W=b[Ze],b.hasOwnProperty(Ze)&&W!=null&&!S.hasOwnProperty(Ze))switch(Ze){case"value":break;case"children":break;default:Xo(h,m,Ze,null,S,W)}for(Ne in S)if(W=S[Ne],Z=b[Ne],S.hasOwnProperty(Ne)&&(W!=null||Z!=null))switch(Ne){case"value":Tr=W;break;case"defaultValue":Ir=W;break;case"children":break;case"dangerouslySetInnerHTML":if(W!=null)throw Error(n(91));break;default:W!==Z&&Xo(h,m,Ne,W,S,Z)}To(h,Tr,Ir);return;case"option":for(var wi in b)Tr=b[wi],b.hasOwnProperty(wi)&&Tr!=null&&!S.hasOwnProperty(wi)&&(wi==="selected"?h.selected=!1:Xo(h,m,wi,null,S,Tr));for(Bt in S)Tr=S[Bt],Ir=b[Bt],S.hasOwnProperty(Bt)&&Tr!==Ir&&(Tr!=null||Ir!=null)&&(Bt==="selected"?h.selected=Tr&&typeof Tr!="function"&&typeof Tr!="symbol":Xo(h,m,Bt,Tr,S,Ir));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var us in b)Tr=b[us],b.hasOwnProperty(us)&&Tr!=null&&!S.hasOwnProperty(us)&&Xo(h,m,us,null,S,Tr);for(_r in S)if(Tr=S[_r],Ir=b[_r],S.hasOwnProperty(_r)&&Tr!==Ir&&(Tr!=null||Ir!=null))switch(_r){case"children":case"dangerouslySetInnerHTML":if(Tr!=null)throw Error(n(137,m));break;default:Xo(h,m,_r,Tr,S,Ir)}return;default:if(zo(m)){for(var Zo in b)Tr=b[Zo],b.hasOwnProperty(Zo)&&Tr!==void 0&&!S.hasOwnProperty(Zo)&&gk(h,m,Zo,void 0,S,Tr);for(Qr in S)Tr=S[Qr],Ir=b[Qr],!S.hasOwnProperty(Qr)||Tr===Ir||Tr===void 0&&Ir===void 0||gk(h,m,Qr,Tr,S,Ir);return}}for(var sr in b)Tr=b[sr],b.hasOwnProperty(sr)&&Tr!=null&&!S.hasOwnProperty(sr)&&Xo(h,m,sr,null,S,Tr);for(qr in S)Tr=S[qr],Ir=b[qr],!S.hasOwnProperty(qr)||Tr===Ir||Tr==null&&Ir==null||Xo(h,m,qr,Tr,S,Ir)}function w6(h){switch(h){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Ele(){if(typeof performance.getEntriesByType=="function"){for(var h=0,m=0,b=performance.getEntriesByType("resource"),S=0;S<b.length;S++){var W=b[S],Z=W.transferSize,Ne=W.initiatorType,Ze=W.duration;if(Z&&Ze&&w6(Ne)){for(Ne=0,Ze=W.responseEnd,S+=1;S<b.length;S++){var Bt=b[S],_r=Bt.startTime;if(_r>Ze)break;var Qr=Bt.transferSize,qr=Bt.initiatorType;Qr&&w6(qr)&&(Bt=Bt.responseEnd,Ne+=Qr*(Bt<Ze?1:(Ze-_r)/(Bt-_r)))}if(--S,m+=8*(Z+Ne)/(W.duration/1e3),h++,10<h)break}}if(0<h)return m/h/1e6}return navigator.connection&&(h=navigator.connection.downlink,typeof h=="number")?h:5}var vk=null,yk=null;function y_(h){return h.nodeType===9?h:h.ownerDocument}function E6(h){switch(h){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function _6(h,m){if(h===0)switch(m){case"svg":return 1;case"math":return 2;default:return 0}return h===1&&m==="foreignObject"?0:h}function xk(h,m){return h==="textarea"||h==="noscript"||typeof m.children=="string"||typeof m.children=="number"||typeof m.children=="bigint"||typeof m.dangerouslySetInnerHTML=="object"&&m.dangerouslySetInnerHTML!==null&&m.dangerouslySetInnerHTML.__html!=null}var bk=null;function _le(){var h=window.event;return h&&h.type==="popstate"?h===bk?!1:(bk=h,!0):(bk=null,!1)}var S6=typeof setTimeout=="function"?setTimeout:void 0,Sle=typeof clearTimeout=="function"?clearTimeout:void 0,T6=typeof Promise=="function"?Promise:void 0,Tle=typeof queueMicrotask=="function"?queueMicrotask:typeof T6<"u"?function(h){return T6.resolve(null).then(h).catch(Cle)}:S6;function Cle(h){setTimeout(function(){throw h})}function Dg(h){return h==="head"}function C6(h,m){var b=m,S=0;do{var W=b.nextSibling;if(h.removeChild(b),W&&W.nodeType===8)if(b=W.data,b==="/$"||b==="/&"){if(S===0){h.removeChild(W),Ky(m);return}S--}else if(b==="$"||b==="$?"||b==="$~"||b==="$!"||b==="&")S++;else if(b==="html")j1(h.ownerDocument.documentElement);else if(b==="head"){b=h.ownerDocument.head,j1(b);for(var Z=b.firstChild;Z;){var Ne=Z.nextSibling,Ze=Z.nodeName;Z[Ml]||Ze==="SCRIPT"||Ze==="STYLE"||Ze==="LINK"&&Z.rel.toLowerCase()==="stylesheet"||b.removeChild(Z),Z=Ne}}else b==="body"&&j1(h.ownerDocument.body);b=W}while(b);Ky(m)}function j6(h,m){var b=h;h=0;do{var S=b.nextSibling;if(b.nodeType===1?m?(b._stashedDisplay=b.style.display,b.style.display="none"):(b.style.display=b._stashedDisplay||"",b.getAttribute("style")===""&&b.removeAttribute("style")):b.nodeType===3&&(m?(b._stashedText=b.nodeValue,b.nodeValue=""):b.nodeValue=b._stashedText||""),S&&S.nodeType===8)if(b=S.data,b==="/$"){if(h===0)break;h--}else b!=="$"&&b!=="$?"&&b!=="$~"&&b!=="$!"||h++;b=S}while(b)}function wk(h){var m=h.firstChild;for(m&&m.nodeType===10&&(m=m.nextSibling);m;){var b=m;switch(m=m.nextSibling,b.nodeName){case"HTML":case"HEAD":case"BODY":wk(b),nu(b);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(b.rel.toLowerCase()==="stylesheet")continue}h.removeChild(b)}}function jle(h,m,b,S){for(;h.nodeType===1;){var W=b;if(h.nodeName.toLowerCase()!==m.toLowerCase()){if(!S&&(h.nodeName!=="INPUT"||h.type!=="hidden"))break}else if(S){if(!h[Ml])switch(m){case"meta":if(!h.hasAttribute("itemprop"))break;return h;case"link":if(Z=h.getAttribute("rel"),Z==="stylesheet"&&h.hasAttribute("data-precedence"))break;if(Z!==W.rel||h.getAttribute("href")!==(W.href==null||W.href===""?null:W.href)||h.getAttribute("crossorigin")!==(W.crossOrigin==null?null:W.crossOrigin)||h.getAttribute("title")!==(W.title==null?null:W.title))break;return h;case"style":if(h.hasAttribute("data-precedence"))break;return h;case"script":if(Z=h.getAttribute("src"),(Z!==(W.src==null?null:W.src)||h.getAttribute("type")!==(W.type==null?null:W.type)||h.getAttribute("crossorigin")!==(W.crossOrigin==null?null:W.crossOrigin))&&Z&&h.hasAttribute("async")&&!h.hasAttribute("itemprop"))break;return h;default:return h}}else if(m==="input"&&h.type==="hidden"){var Z=W.name==null?null:""+W.name;if(W.type==="hidden"&&h.getAttribute("name")===Z)return h}else return h;if(h=Lf(h.nextSibling),h===null)break}return null}function Nle(h,m,b){if(m==="")return null;for(;h.nodeType!==3;)if((h.nodeType!==1||h.nodeName!=="INPUT"||h.type!=="hidden")&&!b||(h=Lf(h.nextSibling),h===null))return null;return h}function N6(h,m){for(;h.nodeType!==8;)if((h.nodeType!==1||h.nodeName!=="INPUT"||h.type!=="hidden")&&!m||(h=Lf(h.nextSibling),h===null))return null;return h}function Ek(h){return h.data==="$?"||h.data==="$~"}function _k(h){return h.data==="$!"||h.data==="$?"&&h.ownerDocument.readyState!=="loading"}function kle(h,m){var b=h.ownerDocument;if(h.data==="$~")h._reactRetry=m;else if(h.data!=="$?"||b.readyState!=="loading")m();else{var S=function(){m(),b.removeEventListener("DOMContentLoaded",S)};b.addEventListener("DOMContentLoaded",S),h._reactRetry=S}}function Lf(h){for(;h!=null;h=h.nextSibling){var m=h.nodeType;if(m===1||m===3)break;if(m===8){if(m=h.data,m==="$"||m==="$!"||m==="$?"||m==="$~"||m==="&"||m==="F!"||m==="F")break;if(m==="/$"||m==="/&")return null}}return h}var Sk=null;function k6(h){h=h.nextSibling;for(var m=0;h;){if(h.nodeType===8){var b=h.data;if(b==="/$"||b==="/&"){if(m===0)return Lf(h.nextSibling);m--}else b!=="$"&&b!=="$!"&&b!=="$?"&&b!=="$~"&&b!=="&"||m++}h=h.nextSibling}return null}function I6(h){h=h.previousSibling;for(var m=0;h;){if(h.nodeType===8){var b=h.data;if(b==="$"||b==="$!"||b==="$?"||b==="$~"||b==="&"){if(m===0)return h;m--}else b!=="/$"&&b!=="/&"||m++}h=h.previousSibling}return null}function L6(h,m,b){switch(m=y_(b),h){case"html":if(h=m.documentElement,!h)throw Error(n(452));return h;case"head":if(h=m.head,!h)throw Error(n(453));return h;case"body":if(h=m.body,!h)throw Error(n(454));return h;default:throw Error(n(451))}}function j1(h){for(var m=h.attributes;m.length;)h.removeAttributeNode(m[0]);nu(h)}var Bf=new Map,B6=new Set;function x_(h){return typeof h.getRootNode=="function"?h.getRootNode():h.nodeType===9?h:h.ownerDocument}var bp=ce.d;ce.d={f:Ile,r:Lle,D:Ble,C:Ple,L:Ole,m:Rle,X:Mle,S:Dle,M:Fle};function Ile(){var h=bp.f(),m=Iu();return h||m}function Lle(h){var m=ra(h);m!==null&&m.tag===5&&m.type==="form"?Nd(m):bp.r(h)}var Qy=typeof document>"u"?null:document;function P6(h,m,b){var S=Qy;if(S&&typeof m=="string"&&m){var W=Hi(m);W='link[rel="'+h+'"][href="'+W+'"]',typeof b=="string"&&(W+='[crossorigin="'+b+'"]'),B6.has(W)||(B6.add(W),h={rel:h,crossOrigin:b,href:m},S.querySelector(W)===null&&(m=S.createElement("link"),Id(m,"link",h),ba(m),S.head.appendChild(m)))}}function Ble(h){bp.D(h),P6("dns-prefetch",h,null)}function Ple(h,m){bp.C(h,m),P6("preconnect",h,m)}function Ole(h,m,b){bp.L(h,m,b);var S=Qy;if(S&&h&&m){var W='link[rel="preload"][as="'+Hi(m)+'"]';m==="image"&&b&&b.imageSrcSet?(W+='[imagesrcset="'+Hi(b.imageSrcSet)+'"]',typeof b.imageSizes=="string"&&(W+='[imagesizes="'+Hi(b.imageSizes)+'"]')):W+='[href="'+Hi(h)+'"]';var Z=W;switch(m){case"style":Z=Vy(h);break;case"script":Z=zy(h)}Bf.has(Z)||(h=f({rel:"preload",href:m==="image"&&b&&b.imageSrcSet?void 0:h,as:m},b),Bf.set(Z,h),S.querySelector(W)!==null||m==="style"&&S.querySelector(N1(Z))||m==="script"&&S.querySelector(k1(Z))||(m=S.createElement("link"),Id(m,"link",h),ba(m),S.head.appendChild(m)))}}function Rle(h,m){bp.m(h,m);var b=Qy;if(b&&h){var S=m&&typeof m.as=="string"?m.as:"script",W='link[rel="modulepreload"][as="'+Hi(S)+'"][href="'+Hi(h)+'"]',Z=W;switch(S){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":Z=zy(h)}if(!Bf.has(Z)&&(h=f({rel:"modulepreload",href:h},m),Bf.set(Z,h),b.querySelector(W)===null)){switch(S){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(b.querySelector(k1(Z)))return}S=b.createElement("link"),Id(S,"link",h),ba(S),b.head.appendChild(S)}}}function Dle(h,m,b){bp.S(h,m,b);var S=Qy;if(S&&h){var W=Ws(S).hoistableStyles,Z=Vy(h);m=m||"default";var Ne=W.get(Z);if(!Ne){var Ze={loading:0,preload:null};if(Ne=S.querySelector(N1(Z)))Ze.loading=5;else{h=f({rel:"stylesheet",href:h,"data-precedence":m},b),(b=Bf.get(Z))&&Tk(h,b);var Bt=Ne=S.createElement("link");ba(Bt),Id(Bt,"link",h),Bt._p=new Promise(function(_r,Qr){Bt.onload=_r,Bt.onerror=Qr}),Bt.addEventListener("load",function(){Ze.loading|=1}),Bt.addEventListener("error",function(){Ze.loading|=2}),Ze.loading|=4,b_(Ne,m,S)}Ne={type:"stylesheet",instance:Ne,count:1,state:Ze},W.set(Z,Ne)}}}function Mle(h,m){bp.X(h,m);var b=Qy;if(b&&h){var S=Ws(b).hoistableScripts,W=zy(h),Z=S.get(W);Z||(Z=b.querySelector(k1(W)),Z||(h=f({src:h,async:!0},m),(m=Bf.get(W))&&Ck(h,m),Z=b.createElement("script"),ba(Z),Id(Z,"link",h),b.head.appendChild(Z)),Z={type:"script",instance:Z,count:1,state:null},S.set(W,Z))}}function Fle(h,m){bp.M(h,m);var b=Qy;if(b&&h){var S=Ws(b).hoistableScripts,W=zy(h),Z=S.get(W);Z||(Z=b.querySelector(k1(W)),Z||(h=f({src:h,async:!0,type:"module"},m),(m=Bf.get(W))&&Ck(h,m),Z=b.createElement("script"),ba(Z),Id(Z,"link",h),b.head.appendChild(Z)),Z={type:"script",instance:Z,count:1,state:null},S.set(W,Z))}}function O6(h,m,b,S){var W=(W=Re.current)?x_(W):null;if(!W)throw Error(n(446));switch(h){case"meta":case"title":return null;case"style":return typeof b.precedence=="string"&&typeof b.href=="string"?(m=Vy(b.href),b=Ws(W).hoistableStyles,S=b.get(m),S||(S={type:"style",instance:null,count:0,state:null},b.set(m,S)),S):{type:"void",instance:null,count:0,state:null};case"link":if(b.rel==="stylesheet"&&typeof b.href=="string"&&typeof b.precedence=="string"){h=Vy(b.href);var Z=Ws(W).hoistableStyles,Ne=Z.get(h);if(Ne||(W=W.ownerDocument||W,Ne={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},Z.set(h,Ne),(Z=W.querySelector(N1(h)))&&!Z._p&&(Ne.instance=Z,Ne.state.loading=5),Bf.has(h)||(b={rel:"preload",as:"style",href:b.href,crossOrigin:b.crossOrigin,integrity:b.integrity,media:b.media,hrefLang:b.hrefLang,referrerPolicy:b.referrerPolicy},Bf.set(h,b),Z||Ule(W,h,b,Ne.state))),m&&S===null)throw Error(n(528,""));return Ne}if(m&&S!==null)throw Error(n(529,""));return null;case"script":return m=b.async,b=b.src,typeof b=="string"&&m&&typeof m!="function"&&typeof m!="symbol"?(m=zy(b),b=Ws(W).hoistableScripts,S=b.get(m),S||(S={type:"script",instance:null,count:0,state:null},b.set(m,S)),S):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,h))}}function Vy(h){return'href="'+Hi(h)+'"'}function N1(h){return'link[rel="stylesheet"]['+h+"]"}function R6(h){return f({},h,{"data-precedence":h.precedence,precedence:null})}function Ule(h,m,b,S){h.querySelector('link[rel="preload"][as="style"]['+m+"]")?S.loading=1:(m=h.createElement("link"),S.preload=m,m.addEventListener("load",function(){return S.loading|=1}),m.addEventListener("error",function(){return S.loading|=2}),Id(m,"link",b),ba(m),h.head.appendChild(m))}function zy(h){return'[src="'+Hi(h)+'"]'}function k1(h){return"script[async]"+h}function D6(h,m,b){if(m.count++,m.instance===null)switch(m.type){case"style":var S=h.querySelector('style[data-href~="'+Hi(b.href)+'"]');if(S)return m.instance=S,ba(S),S;var W=f({},b,{"data-href":b.href,"data-precedence":b.precedence,href:null,precedence:null});return S=(h.ownerDocument||h).createElement("style"),ba(S),Id(S,"style",W),b_(S,b.precedence,h),m.instance=S;case"stylesheet":W=Vy(b.href);var Z=h.querySelector(N1(W));if(Z)return m.state.loading|=4,m.instance=Z,ba(Z),Z;S=R6(b),(W=Bf.get(W))&&Tk(S,W),Z=(h.ownerDocument||h).createElement("link"),ba(Z);var Ne=Z;return Ne._p=new Promise(function(Ze,Bt){Ne.onload=Ze,Ne.onerror=Bt}),Id(Z,"link",S),m.state.loading|=4,b_(Z,b.precedence,h),m.instance=Z;case"script":return Z=zy(b.src),(W=h.querySelector(k1(Z)))?(m.instance=W,ba(W),W):(S=b,(W=Bf.get(Z))&&(S=f({},b),Ck(S,W)),h=h.ownerDocument||h,W=h.createElement("script"),ba(W),Id(W,"link",S),h.head.appendChild(W),m.instance=W);case"void":return null;default:throw Error(n(443,m.type))}else m.type==="stylesheet"&&(m.state.loading&4)===0&&(S=m.instance,m.state.loading|=4,b_(S,b.precedence,h));return m.instance}function b_(h,m,b){for(var S=b.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),W=S.length?S[S.length-1]:null,Z=W,Ne=0;Ne<S.length;Ne++){var Ze=S[Ne];if(Ze.dataset.precedence===m)Z=Ze;else if(Z!==W)break}Z?Z.parentNode.insertBefore(h,Z.nextSibling):(m=b.nodeType===9?b.head:b,m.insertBefore(h,m.firstChild))}function Tk(h,m){h.crossOrigin==null&&(h.crossOrigin=m.crossOrigin),h.referrerPolicy==null&&(h.referrerPolicy=m.referrerPolicy),h.title==null&&(h.title=m.title)}function Ck(h,m){h.crossOrigin==null&&(h.crossOrigin=m.crossOrigin),h.referrerPolicy==null&&(h.referrerPolicy=m.referrerPolicy),h.integrity==null&&(h.integrity=m.integrity)}var w_=null;function M6(h,m,b){if(w_===null){var S=new Map,W=w_=new Map;W.set(b,S)}else W=w_,S=W.get(b),S||(S=new Map,W.set(b,S));if(S.has(h))return S;for(S.set(h,null),b=b.getElementsByTagName(h),W=0;W<b.length;W++){var Z=b[W];if(!(Z[Ml]||Z[rs]||h==="link"&&Z.getAttribute("rel")==="stylesheet")&&Z.namespaceURI!=="http://www.w3.org/2000/svg"){var Ne=Z.getAttribute(m)||"";Ne=h+Ne;var Ze=S.get(Ne);Ze?Ze.push(Z):S.set(Ne,[Z])}}return S}function F6(h,m,b){h=h.ownerDocument||h,h.head.insertBefore(b,m==="title"?h.querySelector("head > title"):null)}function $le(h,m,b){if(b===1||m.itemProp!=null)return!1;switch(h){case"meta":case"title":return!0;case"style":if(typeof m.precedence!="string"||typeof m.href!="string"||m.href==="")break;return!0;case"link":if(typeof m.rel!="string"||typeof m.href!="string"||m.href===""||m.onLoad||m.onError)break;return m.rel==="stylesheet"?(h=m.disabled,typeof m.precedence=="string"&&h==null):!0;case"script":if(m.async&&typeof m.async!="function"&&typeof m.async!="symbol"&&!m.onLoad&&!m.onError&&m.src&&typeof m.src=="string")return!0}return!1}function U6(h){return!(h.type==="stylesheet"&&(h.state.loading&3)===0)}function Hle(h,m,b,S){if(b.type==="stylesheet"&&(typeof S.media!="string"||matchMedia(S.media).matches!==!1)&&(b.state.loading&4)===0){if(b.instance===null){var W=Vy(S.href),Z=m.querySelector(N1(W));if(Z){m=Z._p,m!==null&&typeof m=="object"&&typeof m.then=="function"&&(h.count++,h=E_.bind(h),m.then(h,h)),b.state.loading|=4,b.instance=Z,ba(Z);return}Z=m.ownerDocument||m,S=R6(S),(W=Bf.get(W))&&Tk(S,W),Z=Z.createElement("link"),ba(Z);var Ne=Z;Ne._p=new Promise(function(Ze,Bt){Ne.onload=Ze,Ne.onerror=Bt}),Id(Z,"link",S),b.instance=Z}h.stylesheets===null&&(h.stylesheets=new Map),h.stylesheets.set(b,m),(m=b.state.preload)&&(b.state.loading&3)===0&&(h.count++,b=E_.bind(h),m.addEventListener("load",b),m.addEventListener("error",b))}}var jk=0;function Qle(h,m){return h.stylesheets&&h.count===0&&S_(h,h.stylesheets),0<h.count||0<h.imgCount?function(b){var S=setTimeout(function(){if(h.stylesheets&&S_(h,h.stylesheets),h.unsuspend){var Z=h.unsuspend;h.unsuspend=null,Z()}},6e4+m);0<h.imgBytes&&jk===0&&(jk=62500*Ele());var W=setTimeout(function(){if(h.waitingForImages=!1,h.count===0&&(h.stylesheets&&S_(h,h.stylesheets),h.unsuspend)){var Z=h.unsuspend;h.unsuspend=null,Z()}},(h.imgBytes>jk?50:800)+m);return h.unsuspend=b,function(){h.unsuspend=null,clearTimeout(S),clearTimeout(W)}}:null}function E_(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)S_(this,this.stylesheets);else if(this.unsuspend){var h=this.unsuspend;this.unsuspend=null,h()}}}var __=null;function S_(h,m){h.stylesheets=null,h.unsuspend!==null&&(h.count++,__=new Map,m.forEach(Vle,h),__=null,E_.call(h))}function Vle(h,m){if(!(m.state.loading&4)){var b=__.get(h);if(b)var S=b.get(null);else{b=new Map,__.set(h,b);for(var W=h.querySelectorAll("link[data-precedence],style[data-precedence]"),Z=0;Z<W.length;Z++){var Ne=W[Z];(Ne.nodeName==="LINK"||Ne.getAttribute("media")!=="not all")&&(b.set(Ne.dataset.precedence,Ne),S=Ne)}S&&b.set(null,S)}W=m.instance,Ne=W.getAttribute("data-precedence"),Z=b.get(Ne)||S,Z===S&&b.set(null,W),b.set(Ne,W),this.count++,S=E_.bind(this),W.addEventListener("load",S),W.addEventListener("error",S),Z?Z.parentNode.insertBefore(W,Z.nextSibling):(h=h.nodeType===9?h.head:h,h.insertBefore(W,h.firstChild)),m.state.loading|=4}}var I1={$$typeof:T,Provider:null,Consumer:null,_currentValue:ae,_currentValue2:ae,_threadCount:0};function zle(h,m,b,S,W,Z,Ne,Ze,Bt){this.tag=1,this.containerInfo=h,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ds(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ds(0),this.hiddenUpdates=Ds(null),this.identifierPrefix=S,this.onUncaughtError=W,this.onCaughtError=Z,this.onRecoverableError=Ne,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Bt,this.incompleteTransitions=new Map}function $6(h,m,b,S,W,Z,Ne,Ze,Bt,_r,Qr,qr){return h=new zle(h,m,b,Ne,Bt,_r,Qr,qr,Ze),m=1,Z===!0&&(m|=24),Z=Ll(3,null,null,m),h.current=Z,Z.stateNode=h,m=ch(),m.refCount++,h.pooledCache=m,m.refCount++,Z.memoizedState={element:S,isDehydrated:b,cache:m},Fa(Z),h}function H6(h){return h?(h=vl,h):vl}function Q6(h,m,b,S,W,Z){W=H6(W),S.context===null?S.context=W:S.pendingContext=W,S=Ni(m),S.payload={element:b},Z=Z===void 0?null:Z,Z!==null&&(S.callback=Z),b=Vi(h,S,m),b!==null&&(Do(b,h,m),ys(b,h,m))}function V6(h,m){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var b=h.retryLane;h.retryLane=b!==0&&b<m?b:m}}function Nk(h,m){V6(h,m),(h=h.alternate)&&V6(h,m)}function z6(h){if(h.tag===13||h.tag===31){var m=tc(h,67108864);m!==null&&Do(m,h,67108864),Nk(h,67108864)}}function K6(h){if(h.tag===13||h.tag===31){var m=Mi();m=_n(m);var b=tc(h,m);b!==null&&Do(b,h,m),Nk(h,m)}}var T_=!0;function Kle(h,m,b,S){var W=ne.T;ne.T=null;var Z=ce.p;try{ce.p=2,kk(h,m,b,S)}finally{ce.p=Z,ne.T=W}}function Gle(h,m,b,S){var W=ne.T;ne.T=null;var Z=ce.p;try{ce.p=8,kk(h,m,b,S)}finally{ce.p=Z,ne.T=W}}function kk(h,m,b,S){if(T_){var W=Ik(S);if(W===null)pk(h,m,S,C_,b),W6(h,S);else if(Yle(W,h,m,b,S))S.stopPropagation();else if(W6(h,S),m&4&&-1<Wle.indexOf(h)){for(;W!==null;){var Z=ra(W);if(Z!==null)switch(Z.tag){case 3:if(Z=Z.stateNode,Z.current.memoizedState.isDehydrated){var Ne=An(Z.pendingLanes);if(Ne!==0){var Ze=Z;for(Ze.pendingLanes|=2,Ze.entangledLanes|=2;Ne;){var Bt=1<<31-zr(Ne);Ze.entanglements[1]|=Bt,Ne&=~Bt}sm(Z),(va&6)===0&&(Vn=dn()+500,S1(0))}}break;case 31:case 13:Ze=tc(Z,2),Ze!==null&&Do(Ze,Z,2),Iu(),Nk(Z,2)}if(Z=Ik(S),Z===null&&pk(h,m,S,C_,b),Z===W)break;W=Z}W!==null&&S.stopPropagation()}else pk(h,m,S,null,b)}}function Ik(h){return h=z(h),Lk(h)}var C_=null;function Lk(h){if(C_=null,h=ml(h),h!==null){var m=s(h);if(m===null)h=null;else{var b=m.tag;if(b===13){if(h=o(m),h!==null)return h;h=null}else if(b===31){if(h=c(m),h!==null)return h;h=null}else if(b===3){if(m.stateNode.current.memoizedState.isDehydrated)return m.tag===3?m.stateNode.containerInfo:null;h=null}else m!==h&&(h=null)}}return C_=h,null}function G6(h){switch(h){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(pn()){case mn:return 2;case Kn:return 8;case Zn:case Li:return 32;case ot:return 268435456;default:return 32}default:return 32}}var Bk=!1,Mg=null,Fg=null,Ug=null,L1=new Map,B1=new Map,$g=[],Wle="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function W6(h,m){switch(h){case"focusin":case"focusout":Mg=null;break;case"dragenter":case"dragleave":Fg=null;break;case"mouseover":case"mouseout":Ug=null;break;case"pointerover":case"pointerout":L1.delete(m.pointerId);break;case"gotpointercapture":case"lostpointercapture":B1.delete(m.pointerId)}}function P1(h,m,b,S,W,Z){return h===null||h.nativeEvent!==Z?(h={blockedOn:m,domEventName:b,eventSystemFlags:S,nativeEvent:Z,targetContainers:[W]},m!==null&&(m=ra(m),m!==null&&z6(m)),h):(h.eventSystemFlags|=S,m=h.targetContainers,W!==null&&m.indexOf(W)===-1&&m.push(W),h)}function Yle(h,m,b,S,W){switch(m){case"focusin":return Mg=P1(Mg,h,m,b,S,W),!0;case"dragenter":return Fg=P1(Fg,h,m,b,S,W),!0;case"mouseover":return Ug=P1(Ug,h,m,b,S,W),!0;case"pointerover":var Z=W.pointerId;return L1.set(Z,P1(L1.get(Z)||null,h,m,b,S,W)),!0;case"gotpointercapture":return Z=W.pointerId,B1.set(Z,P1(B1.get(Z)||null,h,m,b,S,W)),!0}return!1}function Y6(h){var m=ml(h.target);if(m!==null){var b=s(m);if(b!==null){if(m=b.tag,m===13){if(m=o(b),m!==null){h.blockedOn=m,Qs(h.priority,function(){K6(b)});return}}else if(m===31){if(m=c(b),m!==null){h.blockedOn=m,Qs(h.priority,function(){K6(b)});return}}else if(m===3&&b.stateNode.current.memoizedState.isDehydrated){h.blockedOn=b.tag===3?b.stateNode.containerInfo:null;return}}}h.blockedOn=null}function j_(h){if(h.blockedOn!==null)return!1;for(var m=h.targetContainers;0<m.length;){var b=Ik(h.nativeEvent);if(b===null){b=h.nativeEvent;var S=new b.constructor(b.type,b);F=S,b.target.dispatchEvent(S),F=null}else return m=ra(b),m!==null&&z6(m),h.blockedOn=b,!1;m.shift()}return!0}function q6(h,m,b){j_(h)&&b.delete(m)}function qle(){Bk=!1,Mg!==null&&j_(Mg)&&(Mg=null),Fg!==null&&j_(Fg)&&(Fg=null),Ug!==null&&j_(Ug)&&(Ug=null),L1.forEach(q6),B1.forEach(q6)}function N_(h,m){h.blockedOn===m&&(h.blockedOn=null,Bk||(Bk=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,qle)))}var k_=null;function X6(h){k_!==h&&(k_=h,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){k_===h&&(k_=null);for(var m=0;m<h.length;m+=3){var b=h[m],S=h[m+1],W=h[m+2];if(typeof S!="function"){if(Lk(S||b)===null)continue;break}var Z=ra(b);Z!==null&&(h.splice(m,3),m-=3,up(Z,{pending:!0,data:W,method:b.method,action:S},S,W))}}))}function Ky(h){function m(Bt){return N_(Bt,h)}Mg!==null&&N_(Mg,h),Fg!==null&&N_(Fg,h),Ug!==null&&N_(Ug,h),L1.forEach(m),B1.forEach(m);for(var b=0;b<$g.length;b++){var S=$g[b];S.blockedOn===h&&(S.blockedOn=null)}for(;0<$g.length&&(b=$g[0],b.blockedOn===null);)Y6(b),b.blockedOn===null&&$g.shift();if(b=(h.ownerDocument||h).$$reactFormReplay,b!=null)for(S=0;S<b.length;S+=3){var W=b[S],Z=b[S+1],Ne=W[qs]||null;if(typeof Z=="function")Ne||X6(b);else if(Ne){var Ze=null;if(Z&&Z.hasAttribute("formAction")){if(W=Z,Ne=Z[qs]||null)Ze=Ne.formAction;else if(Lk(W)!==null)continue}else Ze=Ne.action;typeof Ze=="function"?b[S+1]=Ze:(b.splice(S,3),S-=3),X6(b)}}}function Z6(){function h(Z){Z.canIntercept&&Z.info==="react-transition"&&Z.intercept({handler:function(){return new Promise(function(Ne){return W=Ne})},focusReset:"manual",scroll:"manual"})}function m(){W!==null&&(W(),W=null),S||setTimeout(b,20)}function b(){if(!S&&!navigation.transition){var Z=navigation.currentEntry;Z&&Z.url!=null&&navigation.navigate(Z.url,{state:Z.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var S=!1,W=null;return navigation.addEventListener("navigate",h),navigation.addEventListener("navigatesuccess",m),navigation.addEventListener("navigateerror",m),setTimeout(b,100),function(){S=!0,navigation.removeEventListener("navigate",h),navigation.removeEventListener("navigatesuccess",m),navigation.removeEventListener("navigateerror",m),W!==null&&(W(),W=null)}}}function Pk(h){this._internalRoot=h}I_.prototype.render=Pk.prototype.render=function(h){var m=this._internalRoot;if(m===null)throw Error(n(409));var b=m.current,S=Mi();Q6(b,S,h,m,null,null)},I_.prototype.unmount=Pk.prototype.unmount=function(){var h=this._internalRoot;if(h!==null){this._internalRoot=null;var m=h.containerInfo;Q6(h.current,2,null,h,null,null),Iu(),m[Os]=null}};function I_(h){this._internalRoot=h}I_.prototype.unstable_scheduleHydration=function(h){if(h){var m=Ms();h={blockedOn:null,target:h,priority:m};for(var b=0;b<$g.length&&m!==0&&m<$g[b].priority;b++);$g.splice(b,0,h),b===0&&Y6(h)}};var J6=e.version;if(J6!=="19.2.4")throw Error(n(527,J6,"19.2.4"));ce.findDOMNode=function(h){var m=h._reactInternals;if(m===void 0)throw typeof h.render=="function"?Error(n(188)):(h=Object.keys(h).join(","),Error(n(268,h)));return h=l(m),h=h!==null?d(h):null,h=h===null?null:h.stateNode,h};var Xle={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:ne,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var L_=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!L_.isDisabled&&L_.supportsFiber)try{nr=L_.inject(Xle),Qt=L_}catch{}}return D1.createRoot=function(h,m){if(!i(h))throw Error(n(299));var b=!1,S="",W=hp,Z=fp,Ne=Ap;return m!=null&&(m.unstable_strictMode===!0&&(b=!0),m.identifierPrefix!==void 0&&(S=m.identifierPrefix),m.onUncaughtError!==void 0&&(W=m.onUncaughtError),m.onCaughtError!==void 0&&(Z=m.onCaughtError),m.onRecoverableError!==void 0&&(Ne=m.onRecoverableError)),m=$6(h,1,!1,null,null,b,S,null,W,Z,Ne,Z6),h[Os]=m.current,mk(h),new Pk(m)},D1.hydrateRoot=function(h,m,b){if(!i(h))throw Error(n(299));var S=!1,W="",Z=hp,Ne=fp,Ze=Ap,Bt=null;return b!=null&&(b.unstable_strictMode===!0&&(S=!0),b.identifierPrefix!==void 0&&(W=b.identifierPrefix),b.onUncaughtError!==void 0&&(Z=b.onUncaughtError),b.onCaughtError!==void 0&&(Ne=b.onCaughtError),b.onRecoverableError!==void 0&&(Ze=b.onRecoverableError),b.formState!==void 0&&(Bt=b.formState)),m=$6(h,1,!0,m,b??null,S,W,Bt,Z,Ne,Ze,Z6),m.context=H6(null),b=m.current,S=Mi(),S=_n(S),W=Ni(S),W.callback=null,Vi(b,W,S),b=S,m.current.lanes=b,js(m,b),sm(m),h[Os]=m.current,mk(h),new I_(m)},D1.version="19.2.4",D1}var c8;function lce(){if(c8)return Dk.exports;c8=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Dk.exports=oce(),Dk.exports}var cce=lce();const uce=eA(cce);var u8="popstate";function dce(t={}){function e(i,s){let{pathname:o="/",search:c="",hash:u=""}=by(i.location.hash.substring(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),iB("",{pathname:o,search:c,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(i,s){let o=i.document.querySelector("base"),c="";if(o&&o.getAttribute("href")){let u=i.location.href,l=u.indexOf("#");c=l===-1?u:u.slice(0,l)}return c+"#"+(typeof s=="string"?s:pE(s))}function n(i,s){xf(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(s)})`)}return fce(e,r,n,t)}function Zl(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function xf(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function hce(){return Math.random().toString(36).substring(2,10)}function d8(t,e){return{usr:t.state,key:t.key,idx:e}}function iB(t,e,r=null,n){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?by(e):e,state:r,key:e&&e.key||n||hce()}}function pE({pathname:t="/",search:e="",hash:r=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function by(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substring(r),t=t.substring(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substring(n),t=t.substring(0,n)),t&&(e.pathname=t)}return e}function fce(t,e,r,n={}){let{window:i=document.defaultView,v5Compat:s=!1}=n,o=i.history,c="POP",u=null,l=d();l==null&&(l=0,o.replaceState({...o.state,idx:l},""));function d(){return(o.state||{idx:null}).idx}function f(){c="POP";let x=d(),w=x==null?null:x-l;l=x,u&&u({action:c,location:y.location,delta:w})}function A(x,w){c="PUSH";let E=iB(y.location,x,w);r&&r(E,x),l=d()+1;let T=d8(E,l),C=y.createHref(E);try{o.pushState(T,"",C)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;i.location.assign(C)}s&&u&&u({action:c,location:y.location,delta:1})}function p(x,w){c="REPLACE";let E=iB(y.location,x,w);r&&r(E,x),l=d();let T=d8(E,l),C=y.createHref(E);o.replaceState(T,"",C),s&&u&&u({action:c,location:y.location,delta:0})}function g(x){return Ace(x)}let y={get action(){return c},get location(){return t(i,o)},listen(x){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(u8,f),u=x,()=>{i.removeEventListener(u8,f),u=null}},createHref(x){return e(i,x)},createURL:g,encodeLocation(x){let w=g(x);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:A,replace:p,go(x){return o.go(x)}};return y}function Ace(t,e=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),Zl(r,"No window.location.(origin|href) available to create URL");let n=typeof t=="string"?t:pE(t);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function XW(t,e,r="/"){return mce(t,e,r,!1)}function mce(t,e,r,n){let i=typeof e=="string"?by(e):e,s=Vp(i.pathname||"/",r);if(s==null)return null;let o=ZW(t);pce(o);let c=null;for(let u=0;c==null&&u<o.length;++u){let l=Cce(s);c=Sce(o[u],l,n)}return c}function ZW(t,e=[],r=[],n="",i=!1){let s=(o,c,u=i,l)=>{let d={relativePath:l===void 0?o.path||"":l,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};if(d.relativePath.startsWith("/")){if(!d.relativePath.startsWith(n)&&u)return;Zl(d.relativePath.startsWith(n),`Absolute route path "${d.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(n.length)}let f=Mp([n,d.relativePath]),A=r.concat(d);o.children&&o.children.length>0&&(Zl(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),ZW(o.children,e,A,f,u)),!(o.path==null&&!o.index)&&e.push({path:f,score:Ece(f,o.index),routesMeta:A})};return t.forEach((o,c)=>{if(o.path===""||!o.path?.includes("?"))s(o,c);else for(let u of JW(o.path))s(o,c,!0,u)}),e}function JW(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,i=r.endsWith("?"),s=r.replace(/\?$/,"");if(n.length===0)return i?[s,""]:[s];let o=JW(n.join("/")),c=[];return c.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&c.push(...o),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function pce(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:_ce(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var gce=/^:[\w-]+$/,vce=3,yce=2,xce=1,bce=10,wce=-2,h8=t=>t==="*";function Ece(t,e){let r=t.split("/"),n=r.length;return r.some(h8)&&(n+=wce),e&&(n+=yce),r.filter(i=>!h8(i)).reduce((i,s)=>i+(gce.test(s)?vce:s===""?xce:bce),n)}function _ce(t,e){return t.length===e.length&&t.slice(0,-1).every((n,i)=>n===e[i])?t[t.length-1]-e[e.length-1]:0}function Sce(t,e,r=!1){let{routesMeta:n}=t,i={},s="/",o=[];for(let c=0;c<n.length;++c){let u=n[c],l=c===n.length-1,d=s==="/"?e:e.slice(s.length)||"/",f=wC({path:u.relativePath,caseSensitive:u.caseSensitive,end:l},d),A=u.route;if(!f&&l&&r&&!n[n.length-1].route.index&&(f=wC({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},d)),!f)return null;Object.assign(i,f.params),o.push({params:i,pathname:Mp([s,f.pathname]),pathnameBase:Ice(Mp([s,f.pathnameBase])),route:A}),f.pathnameBase!=="/"&&(s=Mp([s,f.pathnameBase]))}return o}function wC(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=Tce(t.path,t.caseSensitive,t.end),i=e.match(r);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:n.reduce((l,{paramName:d,isOptional:f},A)=>{if(d==="*"){let g=c[A]||"";o=s.slice(0,s.length-g.length).replace(/(.)\/+$/,"$1")}const p=c[A];return f&&!p?l[d]=void 0:l[d]=(p||"").replace(/%2F/g,"/"),l},{}),pathname:s,pathnameBase:o,pattern:t}}function Tce(t,e=!1,r=!0){xf(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let n=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,u)=>(n.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(n.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function Cce(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return xf(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Vp(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}var jce=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function Nce(t,e="/"){let{pathname:r,search:n="",hash:i=""}=typeof t=="string"?by(t):t,s;return r?(r=r.replace(/\/\/+/g,"/"),r.startsWith("/")?s=f8(r.substring(1),"/"):s=f8(r,e)):s=e,{pathname:s,search:Lce(n),hash:Bce(i)}}function f8(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function $k(t,e,r,n){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function kce(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function GR(t){let e=kce(t);return e.map((r,n)=>n===e.length-1?r.pathname:r.pathnameBase)}function WR(t,e,r,n=!1){let i;typeof t=="string"?i=by(t):(i={...t},Zl(!i.pathname||!i.pathname.includes("?"),$k("?","pathname","search",i)),Zl(!i.pathname||!i.pathname.includes("#"),$k("#","pathname","hash",i)),Zl(!i.search||!i.search.includes("#"),$k("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,c;if(o==null)c=r;else{let f=e.length-1;if(!n&&o.startsWith("..")){let A=o.split("/");for(;A[0]==="..";)A.shift(),f-=1;i.pathname=A.join("/")}c=f>=0?e[f]:"/"}let u=Nce(i,c),l=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&r.endsWith("/");return!u.pathname.endsWith("/")&&(l||d)&&(u.pathname+="/"),u}var Mp=t=>t.join("/").replace(/\/\/+/g,"/"),Ice=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Lce=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Bce=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,Pce=class{constructor(t,e,r,n=!1){this.status=t,this.statusText=e||"",this.internal=n,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}};function Oce(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function Rce(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var eY=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function tY(t,e){let r=t;if(typeof r!="string"||!jce.test(r))return{absoluteURL:void 0,isExternal:!1,to:r};let n=r,i=!1;if(eY)try{let s=new URL(window.location.href),o=r.startsWith("//")?new URL(s.protocol+r):new URL(r),c=Vp(o.pathname,e);o.origin===s.origin&&c!=null?r=c+o.search+o.hash:i=!0}catch{xf(!1,`<Link to="${r}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:n,isExternal:i,to:r}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var rY=["POST","PUT","PATCH","DELETE"];new Set(rY);var Dce=["GET",...rY];new Set(Dce);var Xb=j.createContext(null);Xb.displayName="DataRouter";var jN=j.createContext(null);jN.displayName="DataRouterState";var Mce=j.createContext(!1),nY=j.createContext({isTransitioning:!1});nY.displayName="ViewTransition";var Fce=j.createContext(new Map);Fce.displayName="Fetchers";var Uce=j.createContext(null);Uce.displayName="Await";var wf=j.createContext(null);wf.displayName="Navigation";var x2=j.createContext(null);x2.displayName="Location";var UA=j.createContext({outlet:null,matches:[],isDataRoute:!1});UA.displayName="Route";var YR=j.createContext(null);YR.displayName="RouteError";var iY="REACT_ROUTER_ERROR",$ce="REDIRECT",Hce="ROUTE_ERROR_RESPONSE";function Qce(t){if(t.startsWith(`${iY}:${$ce}:{`))try{let e=JSON.parse(t.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function Vce(t){if(t.startsWith(`${iY}:${Hce}:{`))try{let e=JSON.parse(t.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new Pce(e.status,e.statusText,e.data)}catch{}}function zce(t,{relative:e}={}){Zl(Zb(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=j.useContext(wf),{hash:i,pathname:s,search:o}=b2(t,{relative:e}),c=s;return r!=="/"&&(c=s==="/"?r:Mp([r,s])),n.createHref({pathname:c,search:o,hash:i})}function Zb(){return j.useContext(x2)!=null}function Ef(){return Zl(Zb(),"useLocation() may be used only in the context of a <Router> component."),j.useContext(x2).location}var sY="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function aY(t){j.useContext(wf).static||j.useLayoutEffect(t)}function Ac(){let{isDataRoute:t}=j.useContext(UA);return t?iue():Kce()}function Kce(){Zl(Zb(),"useNavigate() may be used only in the context of a <Router> component.");let t=j.useContext(Xb),{basename:e,navigator:r}=j.useContext(wf),{matches:n}=j.useContext(UA),{pathname:i}=Ef(),s=JSON.stringify(GR(n)),o=j.useRef(!1);return aY(()=>{o.current=!0}),j.useCallback((u,l={})=>{if(xf(o.current,sY),!o.current)return;if(typeof u=="number"){r.go(u);return}let d=WR(u,JSON.parse(s),i,l.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Mp([e,d.pathname])),(l.replace?r.replace:r.push)(d,l.state,l)},[e,r,s,i,t])}j.createContext(null);function tA(){let{matches:t}=j.useContext(UA),e=t[t.length-1];return e?e.params:{}}function b2(t,{relative:e}={}){let{matches:r}=j.useContext(UA),{pathname:n}=Ef(),i=JSON.stringify(GR(r));return j.useMemo(()=>WR(t,JSON.parse(i),n,e==="path"),[t,i,n,e])}function Gce(t,e){return oY(t,e)}function oY(t,e,r,n,i){Zl(Zb(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=j.useContext(wf),{matches:o}=j.useContext(UA),c=o[o.length-1],u=c?c.params:{},l=c?c.pathname:"/",d=c?c.pathnameBase:"/",f=c&&c.route;{let E=f&&f.path||"";cY(l,!f||E.endsWith("*")||E.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${l}" (under <Route path="${E}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${E}"> to <Route path="${E==="/"?"*":`${E}/*`}">.`)}let A=Ef(),p;if(e){let E=typeof e=="string"?by(e):e;Zl(d==="/"||E.pathname?.startsWith(d),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${E.pathname}" was given in the \`location\` prop.`),p=E}else p=A;let g=p.pathname||"/",y=g;if(d!=="/"){let E=d.replace(/^\//,"").split("/");y="/"+g.replace(/^\//,"").split("/").slice(E.length).join("/")}let x=XW(t,{pathname:y});xf(f||x!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),xf(x==null||x[x.length-1].route.element!==void 0||x[x.length-1].route.Component!==void 0||x[x.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let w=Zce(x&&x.map(E=>Object.assign({},E,{params:Object.assign({},u,E.params),pathname:Mp([d,s.encodeLocation?s.encodeLocation(E.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?d:Mp([d,s.encodeLocation?s.encodeLocation(E.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:E.pathnameBase])})),o,r,n,i);return e&&w?j.createElement(x2.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},w):w}function Wce(){let t=nue(),e=Oce(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,n="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:n},s={padding:"2px 4px",backgroundColor:n},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=j.createElement(j.Fragment,null,j.createElement("p",null," Hey developer "),j.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",j.createElement("code",{style:s},"ErrorBoundary")," or"," ",j.createElement("code",{style:s},"errorElement")," prop on your route.")),j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),r?j.createElement("pre",{style:i},r):null,o)}var Yce=j.createElement(Wce,null),lY=class extends j.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const r=Vce(t.digest);r&&(t=r)}let e=t!==void 0?j.createElement(UA.Provider,{value:this.props.routeContext},j.createElement(YR.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?j.createElement(qce,{error:t},e):e}};lY.contextType=Mce;var Hk=new WeakMap;function qce({children:t,error:e}){let{basename:r}=j.useContext(wf);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let n=Qce(e.digest);if(n){let i=Hk.get(e);if(i)throw i;let s=tY(n.location,r);if(eY&&!Hk.get(e))if(s.isExternal||n.reloadDocument)window.location.href=s.absoluteURL||s.to;else{const o=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(s.to,{replace:n.replace}));throw Hk.set(e,o),o}return j.createElement("meta",{httpEquiv:"refresh",content:`0;url=${s.absoluteURL||s.to}`})}}return t}function Xce({routeContext:t,match:e,children:r}){let n=j.useContext(Xb);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),j.createElement(UA.Provider,{value:t},r)}function Zce(t,e=[],r=null,n=null,i=null){if(t==null){if(!r)return null;if(r.errors)t=r.matches;else if(e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let s=t,o=r?.errors;if(o!=null){let d=s.findIndex(f=>f.route.id&&o?.[f.route.id]!==void 0);Zl(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),s=s.slice(0,Math.min(s.length,d+1))}let c=!1,u=-1;if(r)for(let d=0;d<s.length;d++){let f=s[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:A,errors:p}=r,g=f.route.loader&&!A.hasOwnProperty(f.route.id)&&(!p||p[f.route.id]===void 0);if(f.route.lazy||g){c=!0,u>=0?s=s.slice(0,u+1):s=[s[0]];break}}}let l=r&&n?(d,f)=>{n(d,{location:r.location,params:r.matches?.[0]?.params??{},unstable_pattern:Rce(r.matches),errorInfo:f})}:void 0;return s.reduceRight((d,f,A)=>{let p,g=!1,y=null,x=null;r&&(p=o&&f.route.id?o[f.route.id]:void 0,y=f.route.errorElement||Yce,c&&(u<0&&A===0?(cY("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),g=!0,x=null):u===A&&(g=!0,x=f.route.hydrateFallbackElement||null)));let w=e.concat(s.slice(0,A+1)),E=()=>{let T;return p?T=y:g?T=x:f.route.Component?T=j.createElement(f.route.Component,null):f.route.element?T=f.route.element:T=d,j.createElement(Xce,{match:f,routeContext:{outlet:d,matches:w,isDataRoute:r!=null},children:T})};return r&&(f.route.ErrorBoundary||f.route.errorElement||A===0)?j.createElement(lY,{location:r.location,revalidation:r.revalidation,component:y,error:p,children:E(),routeContext:{outlet:null,matches:w,isDataRoute:!0},onError:l}):E()},null)}function qR(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Jce(t){let e=j.useContext(Xb);return Zl(e,qR(t)),e}function eue(t){let e=j.useContext(jN);return Zl(e,qR(t)),e}function tue(t){let e=j.useContext(UA);return Zl(e,qR(t)),e}function XR(t){let e=tue(t),r=e.matches[e.matches.length-1];return Zl(r.route.id,`${t} can only be used on routes that contain a unique "id"`),r.route.id}function rue(){return XR("useRouteId")}function nue(){let t=j.useContext(YR),e=eue("useRouteError"),r=XR("useRouteError");return t!==void 0?t:e.errors?.[r]}function iue(){let{router:t}=Jce("useNavigate"),e=XR("useNavigate"),r=j.useRef(!1);return aY(()=>{r.current=!0}),j.useCallback(async(i,s={})=>{xf(r.current,sY),r.current&&(typeof i=="number"?await t.navigate(i):await t.navigate(i,{fromRouteId:e,...s}))},[t,e])}var A8={};function cY(t,e,r){!e&&!A8[t]&&(A8[t]=!0,xf(!1,r))}j.memo(sue);function sue({routes:t,future:e,state:r,onError:n}){return oY(t,void 0,r,n,e)}function aue({to:t,replace:e,state:r,relative:n}){Zl(Zb(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=j.useContext(wf);xf(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=j.useContext(UA),{pathname:o}=Ef(),c=Ac(),u=WR(t,GR(s),o,n==="path"),l=JSON.stringify(u);return j.useEffect(()=>{c(JSON.parse(l),{replace:e,state:r,relative:n})},[c,l,n,e,r]),null}function $s(t){Zl(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function oue({basename:t="/",children:e=null,location:r,navigationType:n="POP",navigator:i,static:s=!1,unstable_useTransitions:o}){Zl(!Zb(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=t.replace(/^\/*/,"/"),u=j.useMemo(()=>({basename:c,navigator:i,static:s,unstable_useTransitions:o,future:{}}),[c,i,s,o]);typeof r=="string"&&(r=by(r));let{pathname:l="/",search:d="",hash:f="",state:A=null,key:p="default"}=r,g=j.useMemo(()=>{let y=Vp(l,c);return y==null?null:{location:{pathname:y,search:d,hash:f,state:A,key:p},navigationType:n}},[c,l,d,f,A,p,n]);return xf(g!=null,`<Router basename="${c}"> is not able to match the URL "${l}${d}${f}" because it does not start with the basename, so the <Router> won't render anything.`),g==null?null:j.createElement(wf.Provider,{value:u},j.createElement(x2.Provider,{children:e,value:g}))}function lue({children:t,location:e}){return Gce(sB(t),e)}function sB(t,e=[]){let r=[];return j.Children.forEach(t,(n,i)=>{if(!j.isValidElement(n))return;let s=[...e,i];if(n.type===j.Fragment){r.push.apply(r,sB(n.props.children,s));return}Zl(n.type===$s,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Zl(!n.props.index||!n.props.children,"An index route cannot have child routes.");let o={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=sB(n.props.children,s)),r.push(o)}),r}var VS="get",zS="application/x-www-form-urlencoded";function NN(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function cue(t){return NN(t)&&t.tagName.toLowerCase()==="button"}function uue(t){return NN(t)&&t.tagName.toLowerCase()==="form"}function due(t){return NN(t)&&t.tagName.toLowerCase()==="input"}function hue(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function fue(t,e){return t.button===0&&(!e||e==="_self")&&!hue(t)}function aB(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,r)=>{let n=t[r];return e.concat(Array.isArray(n)?n.map(i=>[r,i]):[[r,n]])},[]))}function Aue(t,e){let r=aB(t);return e&&e.forEach((n,i)=>{r.has(i)||e.getAll(i).forEach(s=>{r.append(i,s)})}),r}var B_=null;function mue(){if(B_===null)try{new FormData(document.createElement("form"),0),B_=!1}catch{B_=!0}return B_}var pue=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Qk(t){return t!=null&&!pue.has(t)?(xf(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${zS}"`),null):t}function gue(t,e){let r,n,i,s,o;if(uue(t)){let c=t.getAttribute("action");n=c?Vp(c,e):null,r=t.getAttribute("method")||VS,i=Qk(t.getAttribute("enctype"))||zS,s=new FormData(t)}else if(cue(t)||due(t)&&(t.type==="submit"||t.type==="image")){let c=t.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||c.getAttribute("action");if(n=u?Vp(u,e):null,r=t.getAttribute("formmethod")||c.getAttribute("method")||VS,i=Qk(t.getAttribute("formenctype"))||Qk(c.getAttribute("enctype"))||zS,s=new FormData(c,t),!mue()){let{name:l,type:d,value:f}=t;if(d==="image"){let A=l?`${l}.`:"";s.append(`${A}x`,"0"),s.append(`${A}y`,"0")}else l&&s.append(l,f)}}else{if(NN(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=VS,n=null,i=zS,o=t}return s&&i==="text/plain"&&(o=s,s=void 0),{action:n,method:r.toLowerCase(),encType:i,formData:s,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function ZR(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function vue(t,e,r,n){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r?i.pathname.endsWith("/")?i.pathname=`${i.pathname}_.${n}`:i.pathname=`${i.pathname}.${n}`:i.pathname==="/"?i.pathname=`_root.${n}`:e&&Vp(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${n}`,i}async function yue(t,e){if(t.id in e)return e[t.id];try{let r=await import(t.module);return e[t.id]=r,r}catch(r){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function xue(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function bue(t,e,r){let n=await Promise.all(t.map(async i=>{let s=e.routes[i.route.id];if(s){let o=await yue(s,r);return o.links?o.links():[]}return[]}));return Sue(n.flat(1).filter(xue).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function m8(t,e,r,n,i,s){let o=(u,l)=>r[l]?u.route.id!==r[l].route.id:!0,c=(u,l)=>r[l].pathname!==u.pathname||r[l].route.path?.endsWith("*")&&r[l].params["*"]!==u.params["*"];return s==="assets"?e.filter((u,l)=>o(u,l)||c(u,l)):s==="data"?e.filter((u,l)=>{let d=n.routes[u.route.id];if(!d||!d.hasLoader)return!1;if(o(u,l)||c(u,l))return!0;if(u.route.shouldRevalidate){let f=u.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function wue(t,e,{includeHydrateFallback:r}={}){return Eue(t.map(n=>{let i=e.routes[n.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),r&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function Eue(t){return[...new Set(t)]}function _ue(t){let e={},r=Object.keys(t).sort();for(let n of r)e[n]=t[n];return e}function Sue(t,e){let r=new Set;return new Set(e),t.reduce((n,i)=>{let s=JSON.stringify(_ue(i));return r.has(s)||(r.add(s),n.push({key:s,link:i})),n},[])}function uY(){let t=j.useContext(Xb);return ZR(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function Tue(){let t=j.useContext(jN);return ZR(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var JR=j.createContext(void 0);JR.displayName="FrameworkContext";function dY(){let t=j.useContext(JR);return ZR(t,"You must render this element inside a <HydratedRouter> element"),t}function Cue(t,e){let r=j.useContext(JR),[n,i]=j.useState(!1),[s,o]=j.useState(!1),{onFocus:c,onBlur:u,onMouseEnter:l,onMouseLeave:d,onTouchStart:f}=e,A=j.useRef(null);j.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let y=w=>{w.forEach(E=>{o(E.isIntersecting)})},x=new IntersectionObserver(y,{threshold:.5});return A.current&&x.observe(A.current),()=>{x.disconnect()}}},[t]),j.useEffect(()=>{if(n){let y=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(y)}}},[n]);let p=()=>{i(!0)},g=()=>{i(!1),o(!1)};return r?t!=="intent"?[s,A,{}]:[s,A,{onFocus:M1(c,p),onBlur:M1(u,g),onMouseEnter:M1(l,p),onMouseLeave:M1(d,g),onTouchStart:M1(f,p)}]:[!1,A,{}]}function M1(t,e){return r=>{t&&t(r),r.defaultPrevented||e(r)}}function jue({page:t,...e}){let{router:r}=uY(),n=j.useMemo(()=>XW(r.routes,t,r.basename),[r.routes,t,r.basename]);return n?j.createElement(kue,{page:t,matches:n,...e}):null}function Nue(t){let{manifest:e,routeModules:r}=dY(),[n,i]=j.useState([]);return j.useEffect(()=>{let s=!1;return bue(t,e,r).then(o=>{s||i(o)}),()=>{s=!0}},[t,e,r]),n}function kue({page:t,matches:e,...r}){let n=Ef(),{future:i,manifest:s,routeModules:o}=dY(),{basename:c}=uY(),{loaderData:u,matches:l}=Tue(),d=j.useMemo(()=>m8(t,e,l,s,n,"data"),[t,e,l,s,n]),f=j.useMemo(()=>m8(t,e,l,s,n,"assets"),[t,e,l,s,n]),A=j.useMemo(()=>{if(t===n.pathname+n.search+n.hash)return[];let y=new Set,x=!1;if(e.forEach(E=>{let T=s.routes[E.route.id];!T||!T.hasLoader||(!d.some(C=>C.route.id===E.route.id)&&E.route.id in u&&o[E.route.id]?.shouldRevalidate||T.hasClientLoader?x=!0:y.add(E.route.id))}),y.size===0)return[];let w=vue(t,c,i.unstable_trailingSlashAwareDataRequests,"data");return x&&y.size>0&&w.searchParams.set("_routes",e.filter(E=>y.has(E.route.id)).map(E=>E.route.id).join(",")),[w.pathname+w.search]},[c,i.unstable_trailingSlashAwareDataRequests,u,n,s,d,e,t,o]),p=j.useMemo(()=>wue(f,s),[f,s]),g=Nue(f);return j.createElement(j.Fragment,null,A.map(y=>j.createElement("link",{key:y,rel:"prefetch",as:"fetch",href:y,...r})),p.map(y=>j.createElement("link",{key:y,rel:"modulepreload",href:y,...r})),g.map(({key:y,link:x})=>j.createElement("link",{key:y,nonce:r.nonce,...x,crossOrigin:x.crossOrigin??r.crossOrigin})))}function Iue(...t){return e=>{t.forEach(r=>{typeof r=="function"?r(e):r!=null&&(r.current=e)})}}var Lue=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Lue&&(window.__reactRouterVersion="7.13.0")}catch{}function Bue({basename:t,children:e,unstable_useTransitions:r,window:n}){let i=j.useRef();i.current==null&&(i.current=dce({window:n,v5Compat:!0}));let s=i.current,[o,c]=j.useState({action:s.action,location:s.location}),u=j.useCallback(l=>{r===!1?c(l):j.startTransition(()=>c(l))},[r]);return j.useLayoutEffect(()=>s.listen(u),[s,u]),j.createElement(oue,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:s,unstable_useTransitions:r})}var hY=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,gs=j.forwardRef(function({onClick:e,discover:r="render",prefetch:n="none",relative:i,reloadDocument:s,replace:o,state:c,target:u,to:l,preventScrollReset:d,viewTransition:f,unstable_defaultShouldRevalidate:A,...p},g){let{basename:y,unstable_useTransitions:x}=j.useContext(wf),w=typeof l=="string"&&hY.test(l),E=tY(l,y);l=E.to;let T=zce(l,{relative:i}),[C,N,I]=Cue(n,p),U=Due(l,{replace:o,state:c,target:u,preventScrollReset:d,relative:i,viewTransition:f,unstable_defaultShouldRevalidate:A,unstable_useTransitions:x});function K(re){e&&e(re),re.defaultPrevented||U(re)}let Y=j.createElement("a",{...p,...I,href:E.absoluteURL||T,onClick:E.isExternal||s?e:K,ref:Iue(g,N),target:u,"data-discover":!w&&r==="render"?"true":void 0});return C&&!w?j.createElement(j.Fragment,null,Y,j.createElement(jue,{page:T})):Y});gs.displayName="Link";var Pue=j.forwardRef(function({"aria-current":e="page",caseSensitive:r=!1,className:n="",end:i=!1,style:s,to:o,viewTransition:c,children:u,...l},d){let f=b2(o,{relative:l.relative}),A=Ef(),p=j.useContext(jN),{navigator:g,basename:y}=j.useContext(wf),x=p!=null&&Hue(f)&&c===!0,w=g.encodeLocation?g.encodeLocation(f).pathname:f.pathname,E=A.pathname,T=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;r||(E=E.toLowerCase(),T=T?T.toLowerCase():null,w=w.toLowerCase()),T&&y&&(T=Vp(T,y)||T);const C=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let N=E===w||!i&&E.startsWith(w)&&E.charAt(C)==="/",I=T!=null&&(T===w||!i&&T.startsWith(w)&&T.charAt(w.length)==="/"),U={isActive:N,isPending:I,isTransitioning:x},K=N?e:void 0,Y;typeof n=="function"?Y=n(U):Y=[n,N?"active":null,I?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let re=typeof s=="function"?s(U):s;return j.createElement(gs,{...l,"aria-current":K,className:Y,ref:d,style:re,to:o,viewTransition:c},typeof u=="function"?u(U):u)});Pue.displayName="NavLink";var Oue=j.forwardRef(({discover:t="render",fetcherKey:e,navigate:r,reloadDocument:n,replace:i,state:s,method:o=VS,action:c,onSubmit:u,relative:l,preventScrollReset:d,viewTransition:f,unstable_defaultShouldRevalidate:A,...p},g)=>{let{unstable_useTransitions:y}=j.useContext(wf),x=Uue(),w=$ue(c,{relative:l}),E=o.toLowerCase()==="get"?"get":"post",T=typeof c=="string"&&hY.test(c),C=N=>{if(u&&u(N),N.defaultPrevented)return;N.preventDefault();let I=N.nativeEvent.submitter,U=I?.getAttribute("formmethod")||o,K=()=>x(I||N.currentTarget,{fetcherKey:e,method:U,navigate:r,replace:i,state:s,relative:l,preventScrollReset:d,viewTransition:f,unstable_defaultShouldRevalidate:A});y&&r!==!1?j.startTransition(()=>K()):K()};return j.createElement("form",{ref:g,method:E,action:w,onSubmit:n?u:C,...p,"data-discover":!T&&t==="render"?"true":void 0})});Oue.displayName="Form";function Rue(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function fY(t){let e=j.useContext(Xb);return Zl(e,Rue(t)),e}function Due(t,{target:e,replace:r,state:n,preventScrollReset:i,relative:s,viewTransition:o,unstable_defaultShouldRevalidate:c,unstable_useTransitions:u}={}){let l=Ac(),d=Ef(),f=b2(t,{relative:s});return j.useCallback(A=>{if(fue(A,e)){A.preventDefault();let p=r!==void 0?r:pE(d)===pE(f),g=()=>l(t,{replace:p,state:n,preventScrollReset:i,relative:s,viewTransition:o,unstable_defaultShouldRevalidate:c});u?j.startTransition(()=>g()):g()}},[d,l,f,r,n,e,t,i,s,o,c,u])}function Jb(t){xf(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=j.useRef(aB(t)),r=j.useRef(!1),n=Ef(),i=j.useMemo(()=>Aue(n.search,r.current?null:e.current),[n.search]),s=Ac(),o=j.useCallback((c,u)=>{const l=aB(typeof c=="function"?c(new URLSearchParams(i)):c);r.current=!0,s("?"+l,u)},[s,i]);return[i,o]}var Mue=0,Fue=()=>`__${String(++Mue)}__`;function Uue(){let{router:t}=fY("useSubmit"),{basename:e}=j.useContext(wf),r=rue(),n=t.fetch,i=t.navigate;return j.useCallback(async(s,o={})=>{let{action:c,method:u,encType:l,formData:d,body:f}=gue(s,e);if(o.navigate===!1){let A=o.fetcherKey||Fue();await n(A,r,o.action||c,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:d,body:f,formMethod:o.method||u,formEncType:o.encType||l,flushSync:o.flushSync})}else await i(o.action||c,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:d,body:f,formMethod:o.method||u,formEncType:o.encType||l,replace:o.replace,state:o.state,fromRouteId:r,flushSync:o.flushSync,viewTransition:o.viewTransition})},[n,i,e,r])}function $ue(t,{relative:e}={}){let{basename:r}=j.useContext(wf),n=j.useContext(UA);Zl(n,"useFormAction must be used inside a RouteContext");let[i]=n.matches.slice(-1),s={...b2(t||".",{relative:e})},o=Ef();if(t==null){s.search=o.search;let c=new URLSearchParams(s.search),u=c.getAll("index");if(u.some(d=>d==="")){c.delete("index"),u.filter(f=>f).forEach(f=>c.append("index",f));let d=c.toString();s.search=d?`?${d}`:""}}return(!t||t===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(s.pathname=s.pathname==="/"?r:Mp([r,s.pathname])),pE(s)}function Hue(t,{relative:e}={}){let r=j.useContext(nY);Zl(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=fY("useViewTransitionState"),i=b2(t,{relative:e});if(!r.isTransitioning)return!1;let s=Vp(r.currentLocation.pathname,n)||r.currentLocation.pathname,o=Vp(r.nextLocation.pathname,n)||r.nextLocation.pathname;return wC(i.pathname,o)!=null||wC(i.pathname,s)!=null}var v0=qW();const AY=(...t)=>t.filter((e,r,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===r).join(" ").trim();const Que=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const Vue=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,r,n)=>n?n.toUpperCase():r.toLowerCase());const p8=t=>{const e=Vue(t);return e.charAt(0).toUpperCase()+e.slice(1)};var zue={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Kue=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};const Gue=j.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:i="",children:s,iconNode:o,...c},u)=>j.createElement("svg",{ref:u,...zue,width:e,height:e,stroke:t,strokeWidth:n?Number(r)*24/Number(e):r,className:AY("lucide",i),...!s&&!Kue(c)&&{"aria-hidden":"true"},...c},[...o.map(([l,d])=>j.createElement(l,d)),...Array.isArray(s)?s:[s]]));const wn=(t,e)=>{const r=j.forwardRef(({className:n,...i},s)=>j.createElement(Gue,{ref:s,iconNode:e,className:AY(`lucide-${Que(p8(t))}`,`lucide-${t}`,n),...i}));return r.displayName=p8(t),r};const Wue=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],mY=wn("archive",Wue);const Yue=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],U0=wn("arrow-left",Yue);const que=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Rh=wn("arrow-right",que);const Xue=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],kN=wn("award",Xue);const Zue=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Jue=wn("bell",Zue);const ede=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],pY=wn("building-2",ede);const tde=[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]],rde=wn("building",tde);const nde=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],gY=wn("calculator",nde);const ide=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],fc=wn("calendar",ide);const sde=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],gE=wn("camera",sde);const ade=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],g8=wn("chart-column",ade);const ode=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],_o=wn("check",ode);const lde=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],sy=wn("chevron-down",lde);const cde=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],oB=wn("chevron-left",cde);const ude=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Cb=wn("chevron-right",ude);const dde=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],EC=wn("chevron-up",dde);const hde=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],k0=wn("circle-alert",hde);const fde=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Qw=wn("circle-check-big",fde);const Ade=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],lb=wn("circle-check",Ade);const mde=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],pde=wn("circle-plus",mde);const gde=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{x:"9",y:"9",width:"6",height:"6",rx:"1",key:"1ssd4o"}]],vde=wn("circle-stop",gde);const yde=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],v8=wn("circle",yde);const xde=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],DA=wn("clock",xde);const bde=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],vE=wn("copy",bde);const wde=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Ede=wn("credit-card",wde);const _de=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],Sde=wn("crown",_de);const Tde=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],_f=wn("dollar-sign",Tde);const Cde=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],km=wn("download",Cde);const jde=[["path",{d:"M17.596 12.768a2 2 0 1 0 2.829-2.829l-1.768-1.767a2 2 0 0 0 2.828-2.829l-2.828-2.828a2 2 0 0 0-2.829 2.828l-1.767-1.768a2 2 0 1 0-2.829 2.829z",key:"9m4mmf"}],["path",{d:"m2.5 21.5 1.4-1.4",key:"17g3f0"}],["path",{d:"m20.1 3.9 1.4-1.4",key:"1qn309"}],["path",{d:"M5.343 21.485a2 2 0 1 0 2.829-2.828l1.767 1.768a2 2 0 1 0 2.829-2.829l-6.364-6.364a2 2 0 1 0-2.829 2.829l1.768 1.767a2 2 0 0 0-2.828 2.829z",key:"1t2c92"}],["path",{d:"m9.6 14.4 4.8-4.8",key:"6umqxw"}]],Nde=wn("dumbbell",jde);const kde=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],yE=wn("external-link",kde);const Ide=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],I0=wn("eye",Ide);const Lde=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],w2=wn("facebook",Lde);const Bde=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],jb=wn("file-text",Bde);const Pde=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]],y8=wn("file",Pde);const Ode=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]],Vk=wn("film",Ode);const Rde=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],vY=wn("funnel",Rde);const Dde=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],E2=wn("globe",Dde);const Mde=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],E0=wn("image",Mde);const Fde=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],IN=wn("instagram",Fde);const Ude=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],$de=wn("layout-dashboard",Ude);const Hde=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],Qde=wn("lightbulb",Hde);const Vde=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],yY=wn("link",Vde);const zde=[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]],Kde=wn("linkedin",zde);const Gde=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],xY=wn("loader",Gde);const Wde=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Nb=wn("lock",Wde);const Yde=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],lB=wn("log-out",Yde);const qde=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],tu=wn("mail",qde);const Xde=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],th=wn("map-pin",Xde);const Zde=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]],Jde=wn("maximize",Zde);const ehe=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],bY=wn("menu",ehe);const the=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],rhe=wn("message-circle",the);const nhe=[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]],ihe=wn("minimize",nhe);const she=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],ahe=wn("music",she);const ohe=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],lhe=wn("navigation",ohe);const che=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],y0=wn("package",che);const uhe=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],dhe=wn("pen-line",uhe);const hhe=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],cB=wn("pen",hhe);const fhe=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],ay=wn("phone",fhe);const Ahe=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],gf=wn("play",Ahe);const mhe=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],L0=wn("plus",mhe);const phe=[["path",{d:"M16.247 7.761a6 6 0 0 1 0 8.478",key:"1fwjs5"}],["path",{d:"M19.075 4.933a10 10 0 0 1 0 14.134",key:"ehdyv1"}],["path",{d:"M4.925 19.067a10 10 0 0 1 0-14.134",key:"1q22gi"}],["path",{d:"M7.753 16.239a6 6 0 0 1 0-8.478",key:"r2q7qm"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],wY=wn("radio",phe);const ghe=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],e1=wn("refresh-cw",ghe);const vhe=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],yhe=wn("rocket",vhe);const xhe=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],EY=wn("save",xhe);const bhe=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],_C=wn("search",bhe);const whe=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],e3=wn("send",whe);const Ehe=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],_he=wn("settings",Ehe);const She=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],_Y=wn("share-2",She);const The=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],oy=wn("shield",The);const Che=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],qf=wn("sparkles",Che);const jhe=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Nhe=wn("square-pen",jhe);const khe=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],kb=wn("star",khe);const Ihe=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],SY=wn("tag",Ihe);const Lhe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],TY=wn("target",Lhe);const Bhe=[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]],uB=wn("ticket",Bhe);const Phe=[["circle",{cx:"9",cy:"12",r:"3",key:"u3jwor"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],Ohe=wn("toggle-left",Phe);const Rhe=[["circle",{cx:"15",cy:"12",r:"3",key:"1afu0r"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],Dhe=wn("toggle-right",Rhe);const Mhe=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],_2=wn("trash-2",Mhe);const Fhe=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],$A=wn("trending-up",Fhe);const Uhe=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],dB=wn("triangle-alert",Uhe);const $he=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],CY=wn("trophy",$he);const Hhe=[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]],Qhe=wn("twitter",Hhe);const Vhe=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],zhe=wn("upload",Vhe);const Khe=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],zp=wn("user",Khe);const Ghe=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],$h=wn("users",Ghe);const Whe=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],yh=wn("video",Whe);const Yhe=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],x8=wn("wifi-off",Yhe);const qhe=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],Xhe=wn("wifi",qhe);const Zhe=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],B0=wn("x",Zhe);const Jhe=[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]],jY=wn("youtube",Jhe);const efe=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],xE=wn("zap",efe),t3=j.createContext({});function S2(t){const e=j.useRef(null);return e.current===null&&(e.current=t()),e.current}const NY=typeof window<"u",r3=NY?j.useLayoutEffect:j.useEffect,LN=j.createContext(null);function n3(t,e){t.indexOf(e)===-1&&t.push(e)}function i3(t,e){const r=t.indexOf(e);r>-1&&t.splice(r,1)}const Vm=(t,e,r)=>r>e?e:r<t?t:r;let s3=()=>{};const Kp={},kY=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function IY(t){return typeof t=="object"&&t!==null}const LY=t=>/^0[^.\s]+$/u.test(t);function a3(t){let e;return()=>(e===void 0&&(e=t()),e)}const Yf=t=>t,tfe=(t,e)=>r=>e(t(r)),T2=(...t)=>t.reduce(tfe),bE=(t,e,r)=>{const n=e-t;return n===0?1:(r-t)/n};class o3{constructor(){this.subscriptions=[]}add(e){return n3(this.subscriptions,e),()=>i3(this.subscriptions,e)}notify(e,r,n){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,r,n);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Fp=t=>t*1e3,Gf=t=>t/1e3;function BY(t,e){return e?t*(1e3/e):0}const PY=(t,e,r)=>(((1-3*r+3*e)*t+(3*r-6*e))*t+3*e)*t,rfe=1e-7,nfe=12;function ife(t,e,r,n,i){let s,o,c=0;do o=e+(r-e)/2,s=PY(o,n,i)-t,s>0?r=o:e=o;while(Math.abs(s)>rfe&&++c<nfe);return o}function C2(t,e,r,n){if(t===e&&r===n)return Yf;const i=s=>ife(s,0,1,t,r);return s=>s===0||s===1?s:PY(i(s),e,n)}const OY=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,RY=t=>e=>1-t(1-e),DY=C2(.33,1.53,.69,.99),l3=RY(DY),MY=OY(l3),FY=t=>(t*=2)<1?.5*l3(t):.5*(2-Math.pow(2,-10*(t-1))),c3=t=>1-Math.sin(Math.acos(t)),UY=RY(c3),$Y=OY(c3),sfe=C2(.42,0,1,1),afe=C2(0,0,.58,1),HY=C2(.42,0,.58,1),ofe=t=>Array.isArray(t)&&typeof t[0]!="number",QY=t=>Array.isArray(t)&&typeof t[0]=="number",lfe={linear:Yf,easeIn:sfe,easeInOut:HY,easeOut:afe,circIn:c3,circInOut:$Y,circOut:UY,backIn:l3,backInOut:MY,backOut:DY,anticipate:FY},cfe=t=>typeof t=="string",b8=t=>{if(QY(t)){s3(t.length===4);const[e,r,n,i]=t;return C2(e,r,n,i)}else if(cfe(t))return lfe[t];return t},P_=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function ufe(t,e){let r=new Set,n=new Set,i=!1,s=!1;const o=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1};function u(d){o.has(d)&&(l.schedule(d),t()),d(c)}const l={schedule:(d,f=!1,A=!1)=>{const g=A&&i?r:n;return f&&o.add(d),g.has(d)||g.add(d),d},cancel:d=>{n.delete(d),o.delete(d)},process:d=>{if(c=d,i){s=!0;return}i=!0,[r,n]=[n,r],r.forEach(u),r.clear(),i=!1,s&&(s=!1,l.process(d))}};return l}const dfe=40;function VY(t,e){let r=!1,n=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>r=!0,o=P_.reduce((T,C)=>(T[C]=ufe(s),T),{}),{setup:c,read:u,resolveKeyframes:l,preUpdate:d,update:f,preRender:A,render:p,postRender:g}=o,y=()=>{const T=Kp.useManualTiming?i.timestamp:performance.now();r=!1,Kp.useManualTiming||(i.delta=n?1e3/60:Math.max(Math.min(T-i.timestamp,dfe),1)),i.timestamp=T,i.isProcessing=!0,c.process(i),u.process(i),l.process(i),d.process(i),f.process(i),A.process(i),p.process(i),g.process(i),i.isProcessing=!1,r&&e&&(n=!1,t(y))},x=()=>{r=!0,n=!0,i.isProcessing||t(y)};return{schedule:P_.reduce((T,C)=>{const N=o[C];return T[C]=(I,U=!1,K=!1)=>(r||x(),N.schedule(I,U,K)),T},{}),cancel:T=>{for(let C=0;C<P_.length;C++)o[P_[C]].cancel(T)},state:i,steps:o}}const{schedule:ul,cancel:Gp,state:Dd,steps:zk}=VY(typeof requestAnimationFrame<"u"?requestAnimationFrame:Yf,!0);let KS;function hfe(){KS=void 0}const mh={now:()=>(KS===void 0&&mh.set(Dd.isProcessing||Kp.useManualTiming?Dd.timestamp:performance.now()),KS),set:t=>{KS=t,queueMicrotask(hfe)}},zY=t=>e=>typeof e=="string"&&e.startsWith(t),KY=zY("--"),ffe=zY("var(--"),u3=t=>ffe(t)?Afe.test(t.split("/*")[0].trim()):!1,Afe=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function w8(t){return typeof t!="string"?!1:t.split("/*")[0].includes("var(--")}const t1={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},wE={...t1,transform:t=>Vm(0,1,t)},O_={...t1,default:1},Vw=t=>Math.round(t*1e5)/1e5,d3=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function mfe(t){return t==null}const pfe=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,h3=(t,e)=>r=>!!(typeof r=="string"&&pfe.test(r)&&r.startsWith(t)||e&&!mfe(r)&&Object.prototype.hasOwnProperty.call(r,e)),GY=(t,e,r)=>n=>{if(typeof n!="string")return n;const[i,s,o,c]=n.match(d3);return{[t]:parseFloat(i),[e]:parseFloat(s),[r]:parseFloat(o),alpha:c!==void 0?parseFloat(c):1}},gfe=t=>Vm(0,255,t),Kk={...t1,transform:t=>Math.round(gfe(t))},Pv={test:h3("rgb","red"),parse:GY("red","green","blue"),transform:({red:t,green:e,blue:r,alpha:n=1})=>"rgba("+Kk.transform(t)+", "+Kk.transform(e)+", "+Kk.transform(r)+", "+Vw(wE.transform(n))+")"};function vfe(t){let e="",r="",n="",i="";return t.length>5?(e=t.substring(1,3),r=t.substring(3,5),n=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),r=t.substring(2,3),n=t.substring(3,4),i=t.substring(4,5),e+=e,r+=r,n+=n,i+=i),{red:parseInt(e,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:i?parseInt(i,16)/255:1}}const hB={test:h3("#"),parse:vfe,transform:Pv.transform},j2=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),qg=j2("deg"),Um=j2("%"),Ci=j2("px"),yfe=j2("vh"),xfe=j2("vw"),E8={...Um,parse:t=>Um.parse(t)/100,transform:t=>Um.transform(t*100)},Gx={test:h3("hsl","hue"),parse:GY("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:r,alpha:n=1})=>"hsla("+Math.round(t)+", "+Um.transform(Vw(e))+", "+Um.transform(Vw(r))+", "+Vw(wE.transform(n))+")"},Au={test:t=>Pv.test(t)||hB.test(t)||Gx.test(t),parse:t=>Pv.test(t)?Pv.parse(t):Gx.test(t)?Gx.parse(t):hB.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Pv.transform(t):Gx.transform(t),getAnimatableNone:t=>{const e=Au.parse(t);return e.alpha=0,Au.transform(e)}},bfe=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function wfe(t){return isNaN(t)&&typeof t=="string"&&(t.match(d3)?.length||0)+(t.match(bfe)?.length||0)>0}const WY="number",YY="color",Efe="var",_fe="var(",_8="${}",Sfe=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function EE(t){const e=t.toString(),r=[],n={color:[],number:[],var:[]},i=[];let s=0;const c=e.replace(Sfe,u=>(Au.test(u)?(n.color.push(s),i.push(YY),r.push(Au.parse(u))):u.startsWith(_fe)?(n.var.push(s),i.push(Efe),r.push(u)):(n.number.push(s),i.push(WY),r.push(parseFloat(u))),++s,_8)).split(_8);return{values:r,split:c,indexes:n,types:i}}function qY(t){return EE(t).values}function XY(t){const{split:e,types:r}=EE(t),n=e.length;return i=>{let s="";for(let o=0;o<n;o++)if(s+=e[o],i[o]!==void 0){const c=r[o];c===WY?s+=Vw(i[o]):c===YY?s+=Au.transform(i[o]):s+=i[o]}return s}}const Tfe=t=>typeof t=="number"?0:Au.test(t)?Au.getAnimatableNone(t):t;function Cfe(t){const e=qY(t);return XY(t)(e.map(Tfe))}const P0={test:wfe,parse:qY,createTransformer:XY,getAnimatableNone:Cfe};function Gk(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(e-t)*6*r:r<1/2?e:r<2/3?t+(e-t)*(2/3-r)*6:t}function jfe({hue:t,saturation:e,lightness:r,alpha:n}){t/=360,e/=100,r/=100;let i=0,s=0,o=0;if(!e)i=s=o=r;else{const c=r<.5?r*(1+e):r+e-r*e,u=2*r-c;i=Gk(u,c,t+1/3),s=Gk(u,c,t),o=Gk(u,c,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:n}}function SC(t,e){return r=>r>0?e:t}const hc=(t,e,r)=>t+(e-t)*r,Wk=(t,e,r)=>{const n=t*t,i=r*(e*e-n)+n;return i<0?0:Math.sqrt(i)},Nfe=[hB,Pv,Gx],kfe=t=>Nfe.find(e=>e.test(t));function S8(t){const e=kfe(t);if(!e)return!1;let r=e.parse(t);return e===Gx&&(r=jfe(r)),r}const T8=(t,e)=>{const r=S8(t),n=S8(e);if(!r||!n)return SC(t,e);const i={...r};return s=>(i.red=Wk(r.red,n.red,s),i.green=Wk(r.green,n.green,s),i.blue=Wk(r.blue,n.blue,s),i.alpha=hc(r.alpha,n.alpha,s),Pv.transform(i))},fB=new Set(["none","hidden"]);function Ife(t,e){return fB.has(t)?r=>r<=0?t:e:r=>r>=1?e:t}function Lfe(t,e){return r=>hc(t,e,r)}function f3(t){return typeof t=="number"?Lfe:typeof t=="string"?u3(t)?SC:Au.test(t)?T8:Ofe:Array.isArray(t)?ZY:typeof t=="object"?Au.test(t)?T8:Bfe:SC}function ZY(t,e){const r=[...t],n=r.length,i=t.map((s,o)=>f3(s)(s,e[o]));return s=>{for(let o=0;o<n;o++)r[o]=i[o](s);return r}}function Bfe(t,e){const r={...t,...e},n={};for(const i in r)t[i]!==void 0&&e[i]!==void 0&&(n[i]=f3(t[i])(t[i],e[i]));return i=>{for(const s in n)r[s]=n[s](i);return r}}function Pfe(t,e){const r=[],n={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const s=e.types[i],o=t.indexes[s][n[s]],c=t.values[o]??0;r[i]=c,n[s]++}return r}const Ofe=(t,e)=>{const r=P0.createTransformer(e),n=EE(t),i=EE(e);return n.indexes.var.length===i.indexes.var.length&&n.indexes.color.length===i.indexes.color.length&&n.indexes.number.length>=i.indexes.number.length?fB.has(t)&&!i.values.length||fB.has(e)&&!n.values.length?Ife(t,e):T2(ZY(Pfe(n,i),i.values),r):SC(t,e)};function JY(t,e,r){return typeof t=="number"&&typeof e=="number"&&typeof r=="number"?hc(t,e,r):f3(t)(t,e)}const Rfe=t=>{const e=({timestamp:r})=>t(r);return{start:(r=!0)=>ul.update(e,r),stop:()=>Gp(e),now:()=>Dd.isProcessing?Dd.timestamp:mh.now()}},eq=(t,e,r=10)=>{let n="";const i=Math.max(Math.round(e/r),2);for(let s=0;s<i;s++)n+=Math.round(t(s/(i-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},TC=2e4;function A3(t){let e=0;const r=50;let n=t.next(e);for(;!n.done&&e<TC;)e+=r,n=t.next(e);return e>=TC?1/0:e}function Dfe(t,e=100,r){const n=r({...t,keyframes:[0,e]}),i=Math.min(A3(n),TC);return{type:"keyframes",ease:s=>n.next(i*s).value/e,duration:Gf(i)}}const Mfe=5;function tq(t,e,r){const n=Math.max(e-Mfe,0);return BY(r-t(n),e-n)}const Bc={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Yk=.001;function Ffe({duration:t=Bc.duration,bounce:e=Bc.bounce,velocity:r=Bc.velocity,mass:n=Bc.mass}){let i,s,o=1-e;o=Vm(Bc.minDamping,Bc.maxDamping,o),t=Vm(Bc.minDuration,Bc.maxDuration,Gf(t)),o<1?(i=l=>{const d=l*o,f=d*t,A=d-r,p=AB(l,o),g=Math.exp(-f);return Yk-A/p*g},s=l=>{const f=l*o*t,A=f*r+r,p=Math.pow(o,2)*Math.pow(l,2)*t,g=Math.exp(-f),y=AB(Math.pow(l,2),o);return(-i(l)+Yk>0?-1:1)*((A-p)*g)/y}):(i=l=>{const d=Math.exp(-l*t),f=(l-r)*t+1;return-Yk+d*f},s=l=>{const d=Math.exp(-l*t),f=(r-l)*(t*t);return d*f});const c=5/t,u=$fe(i,s,c);if(t=Fp(t),isNaN(u))return{stiffness:Bc.stiffness,damping:Bc.damping,duration:t};{const l=Math.pow(u,2)*n;return{stiffness:l,damping:o*2*Math.sqrt(n*l),duration:t}}}const Ufe=12;function $fe(t,e,r){let n=r;for(let i=1;i<Ufe;i++)n=n-t(n)/e(n);return n}function AB(t,e){return t*Math.sqrt(1-e*e)}const Hfe=["duration","bounce"],Qfe=["stiffness","damping","mass"];function C8(t,e){return e.some(r=>t[r]!==void 0)}function Vfe(t){let e={velocity:Bc.velocity,stiffness:Bc.stiffness,damping:Bc.damping,mass:Bc.mass,isResolvedFromDuration:!1,...t};if(!C8(t,Qfe)&&C8(t,Hfe))if(t.visualDuration){const r=t.visualDuration,n=2*Math.PI/(r*1.2),i=n*n,s=2*Vm(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Bc.mass,stiffness:i,damping:s}}else{const r=Ffe(t);e={...e,...r,mass:Bc.mass},e.isResolvedFromDuration=!0}return e}function CC(t=Bc.visualDuration,e=Bc.bounce){const r=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:n,restDelta:i}=r;const s=r.keyframes[0],o=r.keyframes[r.keyframes.length-1],c={done:!1,value:s},{stiffness:u,damping:l,mass:d,duration:f,velocity:A,isResolvedFromDuration:p}=Vfe({...r,velocity:-Gf(r.velocity||0)}),g=A||0,y=l/(2*Math.sqrt(u*d)),x=o-s,w=Gf(Math.sqrt(u/d)),E=Math.abs(x)<5;n||(n=E?Bc.restSpeed.granular:Bc.restSpeed.default),i||(i=E?Bc.restDelta.granular:Bc.restDelta.default);let T;if(y<1){const N=AB(w,y);T=I=>{const U=Math.exp(-y*w*I);return o-U*((g+y*w*x)/N*Math.sin(N*I)+x*Math.cos(N*I))}}else if(y===1)T=N=>o-Math.exp(-w*N)*(x+(g+w*x)*N);else{const N=w*Math.sqrt(y*y-1);T=I=>{const U=Math.exp(-y*w*I),K=Math.min(N*I,300);return o-U*((g+y*w*x)*Math.sinh(K)+N*x*Math.cosh(K))/N}}const C={calculatedDuration:p&&f||null,next:N=>{const I=T(N);if(p)c.done=N>=f;else{let U=N===0?g:0;y<1&&(U=N===0?Fp(g):tq(T,N,I));const K=Math.abs(U)<=n,Y=Math.abs(o-I)<=i;c.done=K&&Y}return c.value=c.done?o:I,c},toString:()=>{const N=Math.min(A3(C),TC),I=eq(U=>C.next(N*U).value,N,30);return N+"ms "+I},toTransition:()=>{}};return C}CC.applyToOptions=t=>{const e=Dfe(t,100,CC);return t.ease=e.ease,t.duration=Fp(e.duration),t.type="keyframes",t};function mB({keyframes:t,velocity:e=0,power:r=.8,timeConstant:n=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:c,max:u,restDelta:l=.5,restSpeed:d}){const f=t[0],A={done:!1,value:f},p=K=>c!==void 0&&K<c||u!==void 0&&K>u,g=K=>c===void 0?u:u===void 0||Math.abs(c-K)<Math.abs(u-K)?c:u;let y=r*e;const x=f+y,w=o===void 0?x:o(x);w!==x&&(y=w-f);const E=K=>-y*Math.exp(-K/n),T=K=>w+E(K),C=K=>{const Y=E(K),re=T(K);A.done=Math.abs(Y)<=l,A.value=A.done?w:re};let N,I;const U=K=>{p(A.value)&&(N=K,I=CC({keyframes:[A.value,g(A.value)],velocity:tq(T,K,A.value),damping:i,stiffness:s,restDelta:l,restSpeed:d}))};return U(0),{calculatedDuration:null,next:K=>{let Y=!1;return!I&&N===void 0&&(Y=!0,C(K),U(K)),N!==void 0&&K>=N?I.next(K-N):(!Y&&C(K),A)}}}function zfe(t,e,r){const n=[],i=r||Kp.mix||JY,s=t.length-1;for(let o=0;o<s;o++){let c=i(t[o],t[o+1]);if(e){const u=Array.isArray(e)?e[o]||Yf:e;c=T2(u,c)}n.push(c)}return n}function rq(t,e,{clamp:r=!0,ease:n,mixer:i}={}){const s=t.length;if(s3(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const c=zfe(e,n,i),u=c.length,l=d=>{if(o&&d<t[0])return e[0];let f=0;if(u>1)for(;f<t.length-2&&!(d<t[f+1]);f++);const A=bE(t[f],t[f+1],d);return c[f](A)};return r?d=>l(Vm(t[0],t[s-1],d)):l}function Kfe(t,e){const r=t[t.length-1];for(let n=1;n<=e;n++){const i=bE(0,e,n);t.push(hc(r,1,i))}}function Gfe(t){const e=[0];return Kfe(e,t.length-1),e}function Wfe(t,e){return t.map(r=>r*e)}function Yfe(t,e){return t.map(()=>e||HY).splice(0,t.length-1)}function zw({duration:t=300,keyframes:e,times:r,ease:n="easeInOut"}){const i=ofe(n)?n.map(b8):b8(n),s={done:!1,value:e[0]},o=Wfe(r&&r.length===e.length?r:Gfe(e),t),c=rq(o,e,{ease:Array.isArray(i)?i:Yfe(e,i)});return{calculatedDuration:t,next:u=>(s.value=c(u),s.done=u>=t,s)}}const qfe=t=>t!==null;function m3(t,{repeat:e,repeatType:r="loop"},n,i=1){const s=t.filter(qfe),c=i<0||e&&r!=="loop"&&e%2===1?0:s.length-1;return!c||n===void 0?s[c]:n}const Xfe={decay:mB,inertia:mB,tween:zw,keyframes:zw,spring:CC};function nq(t){typeof t.type=="string"&&(t.type=Xfe[t.type])}class p3{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,r){return this.finished.then(e,r)}}const Zfe=t=>t/100;class BN extends p3{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:r}=this.options;r&&r.updatedAt!==mh.now()&&this.tick(mh.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;nq(e);const{type:r=zw,repeat:n=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=e;let{keyframes:c}=e;const u=r||zw;u!==zw&&typeof c[0]!="number"&&(this.mixKeyframes=T2(Zfe,JY(c[0],c[1])),c=[0,100]);const l=u({...e,keyframes:c});s==="mirror"&&(this.mirroredGenerator=u({...e,keyframes:[...c].reverse(),velocity:-o})),l.calculatedDuration===null&&(l.calculatedDuration=A3(l));const{calculatedDuration:d}=l;this.calculatedDuration=d,this.resolvedDuration=d+i,this.totalDuration=this.resolvedDuration*(n+1)-i,this.generator=l}updateTime(e){const r=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=r}tick(e,r=!1){const{generator:n,totalDuration:i,mixKeyframes:s,mirroredGenerator:o,resolvedDuration:c,calculatedDuration:u}=this;if(this.startTime===null)return n.next(0);const{delay:l=0,keyframes:d,repeat:f,repeatType:A,repeatDelay:p,type:g,onUpdate:y,finalKeyframe:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),r?this.currentTime=e:this.updateTime(e);const w=this.currentTime-l*(this.playbackSpeed>=0?1:-1),E=this.playbackSpeed>=0?w<0:w>i;this.currentTime=Math.max(w,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let T=this.currentTime,C=n;if(f){const K=Math.min(this.currentTime,i)/c;let Y=Math.floor(K),re=K%1;!re&&K>=1&&(re=1),re===1&&Y--,Y=Math.min(Y,f+1),Y%2&&(A==="reverse"?(re=1-re,p&&(re-=p/c)):A==="mirror"&&(C=o)),T=Vm(0,1,re)*c}const N=E?{done:!1,value:d[0]}:C.next(T);s&&(N.value=s(N.value));let{done:I}=N;!E&&u!==null&&(I=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const U=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&I);return U&&g!==mB&&(N.value=m3(d,this.options,x,this.speed)),y&&y(N.value),U&&this.finish(),N}then(e,r){return this.finished.then(e,r)}get duration(){return Gf(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Gf(e)}get time(){return Gf(this.currentTime)}set time(e){e=Fp(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(mh.now());const r=this.playbackSpeed!==e;this.playbackSpeed=e,r&&(this.time=Gf(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=Rfe,startTime:r}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),this.options.onPlay?.();const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=r??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(mh.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function Jfe(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Ov=t=>t*180/Math.PI,pB=t=>{const e=Ov(Math.atan2(t[1],t[0]));return gB(e)},eAe={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:pB,rotateZ:pB,skewX:t=>Ov(Math.atan(t[1])),skewY:t=>Ov(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},gB=t=>(t=t%360,t<0&&(t+=360),t),j8=pB,N8=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),k8=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),tAe={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:N8,scaleY:k8,scale:t=>(N8(t)+k8(t))/2,rotateX:t=>gB(Ov(Math.atan2(t[6],t[5]))),rotateY:t=>gB(Ov(Math.atan2(-t[2],t[0]))),rotateZ:j8,rotate:j8,skewX:t=>Ov(Math.atan(t[4])),skewY:t=>Ov(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function vB(t){return t.includes("scale")?1:0}function yB(t,e){if(!t||t==="none")return vB(e);const r=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,i;if(r)n=tAe,i=r;else{const c=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=eAe,i=c}if(!i)return vB(e);const s=n[e],o=i[1].split(",").map(nAe);return typeof s=="function"?s(o):o[s]}const rAe=(t,e)=>{const{transform:r="none"}=getComputedStyle(t);return yB(r,e)};function nAe(t){return parseFloat(t.trim())}const r1=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],n1=new Set(r1),I8=t=>t===t1||t===Ci,iAe=new Set(["x","y","z"]),sAe=r1.filter(t=>!iAe.has(t));function aAe(t){const e=[];return sAe.forEach(r=>{const n=t.getValue(r);n!==void 0&&(e.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),e}const x0={width:({x:t},{paddingLeft:e="0",paddingRight:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),height:({y:t},{paddingTop:e="0",paddingBottom:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>yB(e,"x"),y:(t,{transform:e})=>yB(e,"y")};x0.translateX=x0.x;x0.translateY=x0.y;const Gv=new Set;let xB=!1,bB=!1,wB=!1;function iq(){if(bB){const t=Array.from(Gv).filter(n=>n.needsMeasurement),e=new Set(t.map(n=>n.element)),r=new Map;e.forEach(n=>{const i=aAe(n);i.length&&(r.set(n,i),n.render())}),t.forEach(n=>n.measureInitialState()),e.forEach(n=>{n.render();const i=r.get(n);i&&i.forEach(([s,o])=>{n.getValue(s)?.set(o)})}),t.forEach(n=>n.measureEndState()),t.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}bB=!1,xB=!1,Gv.forEach(t=>t.complete(wB)),Gv.clear()}function sq(){Gv.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(bB=!0)})}function oAe(){wB=!0,sq(),iq(),wB=!1}class g3{constructor(e,r,n,i,s,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=r,this.name=n,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(Gv.add(this),xB||(xB=!0,ul.read(sq),ul.resolveKeyframes(iq))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:r,element:n,motionValue:i}=this;if(e[0]===null){const s=i?.get(),o=e[e.length-1];if(s!==void 0)e[0]=s;else if(n&&r){const c=n.readValue(r,o);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=o),i&&s===void 0&&i.set(e[0])}Jfe(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Gv.delete(this)}cancel(){this.state==="scheduled"&&(Gv.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const lAe=t=>t.startsWith("--");function cAe(t,e,r){lAe(e)?t.style.setProperty(e,r):t.style[e]=r}const uAe=a3(()=>window.ScrollTimeline!==void 0),dAe={};function hAe(t,e){const r=a3(t);return()=>dAe[e]??r()}const aq=hAe(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),hw=([t,e,r,n])=>`cubic-bezier(${t}, ${e}, ${r}, ${n})`,L8={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:hw([0,.65,.55,1]),circOut:hw([.55,0,1,.45]),backIn:hw([.31,.01,.66,-.59]),backOut:hw([.33,1.53,.69,.99])};function oq(t,e){if(t)return typeof t=="function"?aq()?eq(t,e):"ease-out":QY(t)?hw(t):Array.isArray(t)?t.map(r=>oq(r,e)||L8.easeOut):L8[t]}function fAe(t,e,r,{delay:n=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:c="easeOut",times:u}={},l=void 0){const d={[e]:r};u&&(d.offset=u);const f=oq(c,i);Array.isArray(f)&&(d.easing=f);const A={delay:n,duration:i,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"};return l&&(A.pseudoElement=l),t.animate(d,A)}function lq(t){return typeof t=="function"&&"applyToOptions"in t}function AAe({type:t,...e}){return lq(t)&&aq()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class mAe extends p3{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!e)return;const{element:r,name:n,keyframes:i,pseudoElement:s,allowFlatten:o=!1,finalKeyframe:c,onComplete:u}=e;this.isPseudoElement=!!s,this.allowFlatten=o,this.options=e,s3(typeof e.type!="string");const l=AAe(e);this.animation=fAe(r,n,i,l,s),l.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const d=m3(i,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(d):cAe(r,n,d),this.animation.cancel()}u?.(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return Gf(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Gf(e)}get time(){return Gf(Number(this.animation.currentTime)||0)}set time(e){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=Fp(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(e){this.manualStartTime=this.animation.startTime=e}attachTimeline({timeline:e,observe:r}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&uAe()?(this.animation.timeline=e,Yf):r(this)}}const cq={anticipate:FY,backInOut:MY,circInOut:$Y};function pAe(t){return t in cq}function gAe(t){typeof t.ease=="string"&&pAe(t.ease)&&(t.ease=cq[t.ease])}const qk=10;class vAe extends mAe{constructor(e){gAe(e),nq(e),super(e),e.startTime!==void 0&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:r,onUpdate:n,onComplete:i,element:s,...o}=this.options;if(!r)return;if(e!==void 0){r.set(e);return}const c=new BN({...o,autoplay:!1}),u=Math.max(qk,mh.now()-this.startTime),l=Vm(0,qk,u-qk);r.setWithVelocity(c.sample(Math.max(0,u-l)).value,c.sample(u).value,l),c.stop()}}const B8=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(P0.test(t)||t==="0")&&!t.startsWith("url("));function yAe(t){const e=t[0];if(t.length===1)return!0;for(let r=0;r<t.length;r++)if(t[r]!==e)return!0}function xAe(t,e,r,n){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=B8(i,e),c=B8(s,e);return!o||!c?!1:yAe(t)||(r==="spring"||lq(r))&&n}function EB(t){t.duration=0,t.type="keyframes"}const bAe=new Set(["opacity","clipPath","filter","transform"]),wAe=a3(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function EAe(t){const{motionValue:e,name:r,repeatDelay:n,repeatType:i,damping:s,type:o}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:l}=e.owner.getProps();return wAe()&&r&&bAe.has(r)&&(r!=="transform"||!l)&&!u&&!n&&i!=="mirror"&&s!==0&&o!=="inertia"}const _Ae=40;class SAe extends p3{constructor({autoplay:e=!0,delay:r=0,type:n="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",keyframes:c,name:u,motionValue:l,element:d,...f}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=mh.now();const A={autoplay:e,delay:r,type:n,repeat:i,repeatDelay:s,repeatType:o,name:u,motionValue:l,element:d,...f},p=d?.KeyframeResolver||g3;this.keyframeResolver=new p(c,(g,y,x)=>this.onKeyframesResolved(g,y,A,!x),u,l,d),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,r,n,i){this.keyframeResolver=void 0;const{name:s,type:o,velocity:c,delay:u,isHandoff:l,onUpdate:d}=n;this.resolvedAt=mh.now(),xAe(e,s,o,c)||((Kp.instantAnimations||!u)&&d?.(m3(e,n,r)),e[0]=e[e.length-1],EB(n),n.repeat=0);const A={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>_Ae?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:r,...n,keyframes:e},p=!l&&EAe(A),g=A.motionValue?.owner?.current,y=p?new vAe({...A,element:g}):new BN(A);y.finished.then(()=>{this.notifyFinished()}).catch(Yf),this.pendingTimeline&&(this.stopTimeline=y.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=y}get finished(){return this._animation?this.animation.finished:this._finished}then(e,r){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),oAe()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}function uq(t,e,r,n=0,i=1){const s=Array.from(t).sort((l,d)=>l.sortNodePosition(d)).indexOf(e),o=t.size,c=(o-1)*n;return typeof r=="function"?r(s,o):i===1?s*n:c-s*n}const TAe=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function CAe(t){const e=TAe.exec(t);if(!e)return[,];const[,r,n,i]=e;return[`--${r??n}`,i]}function dq(t,e,r=1){const[n,i]=CAe(t);if(!n)return;const s=window.getComputedStyle(e).getPropertyValue(n);if(s){const o=s.trim();return kY(o)?parseFloat(o):o}return u3(i)?dq(i,e,r+1):i}const jAe={type:"spring",stiffness:500,damping:25,restSpeed:10},NAe=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),kAe={type:"keyframes",duration:.8},IAe={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},LAe=(t,{keyframes:e})=>e.length>2?kAe:n1.has(t)?t.startsWith("scale")?NAe(e[1]):jAe:IAe,BAe=t=>t!==null;function PAe(t,{repeat:e,repeatType:r="loop"},n){const i=t.filter(BAe),s=e&&r!=="loop"&&e%2===1?0:i.length-1;return i[s]}function v3(t,e){return t?.[e]??t?.default??t}function OAe({when:t,delay:e,delayChildren:r,staggerChildren:n,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:c,from:u,elapsed:l,...d}){return!!Object.keys(d).length}const y3=(t,e,r,n={},i,s)=>o=>{const c=v3(n,t)||{},u=c.delay||n.delay||0;let{elapsed:l=0}=n;l=l-Fp(u);const d={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:e.getVelocity(),...c,delay:-l,onUpdate:A=>{e.set(A),c.onUpdate&&c.onUpdate(A)},onComplete:()=>{o(),c.onComplete&&c.onComplete()},name:t,motionValue:e,element:s?void 0:i};OAe(c)||Object.assign(d,LAe(t,d)),d.duration&&(d.duration=Fp(d.duration)),d.repeatDelay&&(d.repeatDelay=Fp(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let f=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(EB(d),d.delay===0&&(f=!0)),(Kp.instantAnimations||Kp.skipAnimations)&&(f=!0,EB(d),d.delay=0),d.allowFlatten=!c.type&&!c.ease,f&&!s&&e.get()!==void 0){const A=PAe(d.keyframes,c);if(A!==void 0){ul.update(()=>{d.onUpdate(A),d.onComplete()});return}}return c.isSync?new BN(d):new SAe(d)};function P8(t){const e=[{},{}];return t?.values.forEach((r,n)=>{e[0][n]=r.get(),e[1][n]=r.getVelocity()}),e}function x3(t,e,r,n){if(typeof e=="function"){const[i,s]=P8(n);e=e(r!==void 0?r:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=P8(n);e=e(r!==void 0?r:t.custom,i,s)}return e}function cb(t,e,r){const n=t.getProps();return x3(n,e,r!==void 0?r:n.custom,t)}const hq=new Set(["width","height","top","left","right","bottom",...r1]),O8=30,RAe=t=>!isNaN(parseFloat(t)),Kw={current:void 0};class DAe{constructor(e,r={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=n=>{const i=mh.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const s of this.dependents)s.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=r.owner}setCurrent(e){this.current=e,this.updatedAt=mh.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=RAe(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,r){this.events[e]||(this.events[e]=new o3);const n=this.events[e].add(r);return e==="change"?()=>{n(),ul.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,r){this.passiveEffect=e,this.stopPassiveEffect=r}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,r,n){this.set(r),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,r=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return Kw.current&&Kw.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=mh.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>O8)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,O8);return BY(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(e){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=e(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ly(t,e){return new DAe(t,e)}const _B=t=>Array.isArray(t);function MAe(t,e,r){t.hasValue(e)?t.getValue(e).set(r):t.addValue(e,ly(r))}function FAe(t){return _B(t)?t[t.length-1]||0:t}function UAe(t,e){const r=cb(t,e);let{transitionEnd:n={},transition:i={},...s}=r||{};s={...s,...n};for(const o in s){const c=FAe(s[o]);MAe(t,o,c)}}const fd=t=>!!(t&&t.getVelocity);function $Ae(t){return!!(fd(t)&&t.add)}function SB(t,e){const r=t.getValue("willChange");if($Ae(r))return r.add(e);if(!r&&Kp.WillChange){const n=new Kp.WillChange("auto");t.addValue("willChange",n),n.add(e)}}function b3(t){return t.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`)}const HAe="framerAppearId",fq="data-"+b3(HAe);function Aq(t){return t.props[fq]}function QAe({protectedKeys:t,needsAnimating:e},r){const n=t.hasOwnProperty(r)&&e[r]!==!0;return e[r]=!1,n}function mq(t,e,{delay:r=0,transitionOverride:n,type:i}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:o,...c}=e;const u=s?.reduceMotion;n&&(s=n);const l=[],d=i&&t.animationState&&t.animationState.getState()[i];for(const f in c){const A=t.getValue(f,t.latestValues[f]??null),p=c[f];if(p===void 0||d&&QAe(d,f))continue;const g={delay:r,...v3(s||{},f)},y=A.get();if(y!==void 0&&!A.isAnimating&&!Array.isArray(p)&&p===y&&!g.velocity)continue;let x=!1;if(window.MotionHandoffAnimation){const T=Aq(t);if(T){const C=window.MotionHandoffAnimation(T,f,ul);C!==null&&(g.startTime=C,x=!0)}}SB(t,f);const w=u??t.shouldReduceMotion;A.start(y3(f,A,p,w&&hq.has(f)?{type:!1}:g,t,x));const E=A.animation;E&&l.push(E)}return o&&Promise.all(l).then(()=>{ul.update(()=>{o&&UAe(t,o)})}),l}function TB(t,e,r={}){const n=cb(t,e,r.type==="exit"?t.presenceContext?.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=n||{};r.transitionOverride&&(i=r.transitionOverride);const s=n?()=>Promise.all(mq(t,n,r)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:l=0,staggerChildren:d,staggerDirection:f}=i;return VAe(t,e,u,l,d,f,r)}:()=>Promise.resolve(),{when:c}=i;if(c){const[u,l]=c==="beforeChildren"?[s,o]:[o,s];return u().then(()=>l())}else return Promise.all([s(),o(r.delay)])}function VAe(t,e,r=0,n=0,i=0,s=1,o){const c=[];for(const u of t.variantChildren)u.notify("AnimationStart",e),c.push(TB(u,e,{...o,delay:r+(typeof n=="function"?0:n)+uq(t.variantChildren,u,n,i,s)}).then(()=>u.notify("AnimationComplete",e)));return Promise.all(c)}function zAe(t,e,r={}){t.notify("AnimationStart",e);let n;if(Array.isArray(e)){const i=e.map(s=>TB(t,s,r));n=Promise.all(i)}else if(typeof e=="string")n=TB(t,e,r);else{const i=typeof e=="function"?cb(t,e,r.custom):e;n=Promise.all(mq(t,i,r))}return n.then(()=>{t.notify("AnimationComplete",e)})}const KAe={test:t=>t==="auto",parse:t=>t},pq=t=>e=>e.test(t),gq=[t1,Ci,Um,qg,xfe,yfe,KAe],R8=t=>gq.find(pq(t));function GAe(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||LY(t):!0}const WAe=new Set(["brightness","contrast","saturate","opacity"]);function YAe(t){const[e,r]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[n]=r.match(d3)||[];if(!n)return t;const i=r.replace(n,"");let s=WAe.has(e)?1:0;return n!==r&&(s*=100),e+"("+s+i+")"}const qAe=/\b([a-z-]*)\(.*?\)/gu,CB={...P0,getAnimatableNone:t=>{const e=t.match(qAe);return e?e.map(YAe).join(" "):t}},D8={...t1,transform:Math.round},XAe={rotate:qg,rotateX:qg,rotateY:qg,rotateZ:qg,scale:O_,scaleX:O_,scaleY:O_,scaleZ:O_,skew:qg,skewX:qg,skewY:qg,distance:Ci,translateX:Ci,translateY:Ci,translateZ:Ci,x:Ci,y:Ci,z:Ci,perspective:Ci,transformPerspective:Ci,opacity:wE,originX:E8,originY:E8,originZ:Ci},w3={borderWidth:Ci,borderTopWidth:Ci,borderRightWidth:Ci,borderBottomWidth:Ci,borderLeftWidth:Ci,borderRadius:Ci,borderTopLeftRadius:Ci,borderTopRightRadius:Ci,borderBottomRightRadius:Ci,borderBottomLeftRadius:Ci,width:Ci,maxWidth:Ci,height:Ci,maxHeight:Ci,top:Ci,right:Ci,bottom:Ci,left:Ci,inset:Ci,insetBlock:Ci,insetBlockStart:Ci,insetBlockEnd:Ci,insetInline:Ci,insetInlineStart:Ci,insetInlineEnd:Ci,padding:Ci,paddingTop:Ci,paddingRight:Ci,paddingBottom:Ci,paddingLeft:Ci,paddingBlock:Ci,paddingBlockStart:Ci,paddingBlockEnd:Ci,paddingInline:Ci,paddingInlineStart:Ci,paddingInlineEnd:Ci,margin:Ci,marginTop:Ci,marginRight:Ci,marginBottom:Ci,marginLeft:Ci,marginBlock:Ci,marginBlockStart:Ci,marginBlockEnd:Ci,marginInline:Ci,marginInlineStart:Ci,marginInlineEnd:Ci,fontSize:Ci,backgroundPositionX:Ci,backgroundPositionY:Ci,...XAe,zIndex:D8,fillOpacity:wE,strokeOpacity:wE,numOctaves:D8},ZAe={...w3,color:Au,backgroundColor:Au,outlineColor:Au,fill:Au,stroke:Au,borderColor:Au,borderTopColor:Au,borderRightColor:Au,borderBottomColor:Au,borderLeftColor:Au,filter:CB,WebkitFilter:CB},vq=t=>ZAe[t];function yq(t,e){let r=vq(t);return r!==CB&&(r=P0),r.getAnimatableNone?r.getAnimatableNone(e):void 0}const JAe=new Set(["auto","none","0"]);function eme(t,e,r){let n=0,i;for(;n<t.length&&!i;){const s=t[n];typeof s=="string"&&!JAe.has(s)&&EE(s).values.length&&(i=t[n]),n++}if(i&&r)for(const s of e)t[s]=yq(r,i)}class tme extends g3{constructor(e,r,n,i,s){super(e,r,n,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:r,name:n}=this;if(!r||!r.current)return;super.readKeyframes();for(let d=0;d<e.length;d++){let f=e[d];if(typeof f=="string"&&(f=f.trim(),u3(f))){const A=dq(f,r.current);A!==void 0&&(e[d]=A),d===e.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!hq.has(n)||e.length!==2)return;const[i,s]=e,o=R8(i),c=R8(s),u=w8(i),l=w8(s);if(u!==l&&x0[n]){this.needsMeasurement=!0;return}if(o!==c)if(I8(o)&&I8(c))for(let d=0;d<e.length;d++){const f=e[d];typeof f=="string"&&(e[d]=parseFloat(f))}else x0[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:r}=this,n=[];for(let i=0;i<e.length;i++)(e[i]===null||GAe(e[i]))&&n.push(i);n.length&&eme(e,n,r)}measureInitialState(){const{element:e,unresolvedKeyframes:r,name:n}=this;if(!e||!e.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=x0[n](e.measureViewportBox(),window.getComputedStyle(e.current)),r[0]=this.measuredOrigin;const i=r[r.length-1];i!==void 0&&e.getValue(n,i).jump(i,!1)}measureEndState(){const{element:e,name:r,unresolvedKeyframes:n}=this;if(!e||!e.current)return;const i=e.getValue(r);i&&i.jump(this.measuredOrigin,!1);const s=n.length-1,o=n[s];n[s]=x0[r](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),this.removedTransforms?.length&&this.removedTransforms.forEach(([c,u])=>{e.getValue(c).set(u)}),this.resolveNoneKeyframes()}}function rme(t,e,r){if(t==null)return[];if(t instanceof EventTarget)return[t];if(typeof t=="string"){let n=document;const i=r?.[t]??n.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t).filter(n=>n!=null)}const xq=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function jB(t){return IY(t)&&"offsetHeight"in t}const{schedule:E3}=VY(queueMicrotask,!1),wA={x:!1,y:!1};function bq(){return wA.x||wA.y}function nme(t){return t==="x"||t==="y"?wA[t]?null:(wA[t]=!0,()=>{wA[t]=!1}):wA.x||wA.y?null:(wA.x=wA.y=!0,()=>{wA.x=wA.y=!1})}function wq(t,e){const r=rme(t),n=new AbortController,i={passive:!0,...e,signal:n.signal};return[r,i,()=>n.abort()]}function M8(t){return!(t.pointerType==="touch"||bq())}function ime(t,e,r={}){const[n,i,s]=wq(t,r),o=c=>{if(!M8(c))return;const{target:u}=c,l=e(u,c);if(typeof l!="function"||!u)return;const d=f=>{M8(f)&&(l(f),u.removeEventListener("pointerleave",d))};u.addEventListener("pointerleave",d,i)};return n.forEach(c=>{c.addEventListener("pointerenter",o,i)}),s}const Eq=(t,e)=>e?t===e?!0:Eq(t,e.parentElement):!1,_3=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,sme=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function _q(t){return sme.has(t.tagName)||t.isContentEditable===!0}const GS=new WeakSet;function F8(t){return e=>{e.key==="Enter"&&t(e)}}function Xk(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const ame=(t,e)=>{const r=t.currentTarget;if(!r)return;const n=F8(()=>{if(GS.has(r))return;Xk(r,"down");const i=F8(()=>{Xk(r,"up")}),s=()=>Xk(r,"cancel");r.addEventListener("keyup",i,e),r.addEventListener("blur",s,e)});r.addEventListener("keydown",n,e),r.addEventListener("blur",()=>r.removeEventListener("keydown",n),e)};function U8(t){return _3(t)&&!bq()}function ome(t,e,r={}){const[n,i,s]=wq(t,r),o=c=>{const u=c.currentTarget;if(!U8(c))return;GS.add(u);const l=e(u,c),d=(p,g)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",A),GS.has(u)&&GS.delete(u),U8(p)&&typeof l=="function"&&l(p,{success:g})},f=p=>{d(p,u===window||u===document||r.useGlobalTarget||Eq(u,p.target))},A=p=>{d(p,!1)};window.addEventListener("pointerup",f,i),window.addEventListener("pointercancel",A,i)};return n.forEach(c=>{(r.useGlobalTarget?window:c).addEventListener("pointerdown",o,i),jB(c)&&(c.addEventListener("focus",l=>ame(l,i)),!_q(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),s}function Sq(t){return IY(t)&&"ownerSVGElement"in t}function lme(t){return Sq(t)&&t.tagName==="svg"}function cme(...t){const e=!Array.isArray(t[0]),r=e?0:-1,n=t[0+r],i=t[1+r],s=t[2+r],o=t[3+r],c=rq(i,s,o);return e?c(n):c}function ume(t,e,r={}){const n=t.get();let i=null,s=n,o;const c=typeof n=="string"?n.replace(/[\d.-]/g,""):void 0,u=()=>{i&&(i.stop(),i=null)},l=()=>{u();const d=H8(t.get()),f=H8(s);d!==f&&(i=new BN({keyframes:[d,f],velocity:t.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...r,onUpdate:o}))};if(t.attach((d,f)=>{s=d,o=A=>f($8(A,c)),ul.postRender(()=>{l(),t.events.animationStart?.notify(),i?.then(()=>{t.events.animationComplete?.notify()})})},u),fd(e)){const d=e.on("change",A=>t.set($8(A,c))),f=t.on("destroy",d);return()=>{d(),f()}}return u}function $8(t,e){return e?t+e:t}function H8(t){return typeof t=="number"?t:parseFloat(t)}const dme=[...gq,Au,P0],hme=t=>dme.find(pq(t)),Q8=()=>({translate:0,scale:1,origin:0,originPoint:0}),Wx=()=>({x:Q8(),y:Q8()}),V8=()=>({min:0,max:0}),Ou=()=>({x:V8(),y:V8()}),NB={current:null},Tq={current:!1},fme=typeof window<"u";function Ame(){if(Tq.current=!0,!!fme)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>NB.current=t.matches;t.addEventListener("change",e),e()}else NB.current=!1}const mme=new WeakMap;function PN(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function _E(t){return typeof t=="string"||Array.isArray(t)}const S3=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],T3=["initial",...S3];function ON(t){return PN(t.animate)||T3.some(e=>_E(t[e]))}function Cq(t){return!!(ON(t)||t.variants)}function pme(t,e,r){for(const n in e){const i=e[n],s=r[n];if(fd(i))t.addValue(n,i);else if(fd(s))t.addValue(n,ly(i,{owner:t}));else if(s!==i)if(t.hasValue(n)){const o=t.getValue(n);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(n);t.addValue(n,ly(o!==void 0?o:i,{owner:t}))}}for(const n in r)e[n]===void 0&&t.removeValue(n);return e}const z8=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let jC={};function jq(t){jC=t}function gme(){return jC}class vme{scrapeMotionValuesFromProps(e,r,n){return{}}constructor({parent:e,props:r,presenceContext:n,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=g3,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const A=mh.now();this.renderScheduledAt<A&&(this.renderScheduledAt=A,ul.render(this.render,!1,!0))};const{latestValues:u,renderState:l}=o;this.latestValues=u,this.baseTarget={...u},this.initialValues=r.initial?{...u}:{},this.renderState=l,this.parent=e,this.props=r,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=c,this.blockInitialAnimation=!!s,this.isControllingVariants=ON(r),this.isVariantNode=Cq(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...f}=this.scrapeMotionValuesFromProps(r,{},this);for(const A in f){const p=f[A];u[A]!==void 0&&fd(p)&&p.set(u[A])}}mount(e){this.current=e,mme.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,n)=>this.bindToMotionValue(n,r)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(Tq.current||Ame(),this.shouldReduceMotion=NB.current),this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Gp(this.notifyUpdate),Gp(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const r=this.features[e];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,r){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=n1.has(e);n&&this.onBindTransform&&this.onBindTransform();const i=r.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&ul.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;typeof window<"u"&&window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,r)),this.valueSubscriptions.set(e,()=>{i(),s&&s(),r.owner&&r.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in jC){const r=jC[e];if(!r)continue;const{isEnabled:n,Feature:i}=r;if(!this.features[e]&&i&&n(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ou()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,r){this.latestValues[e]=r}update(e,r){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<z8.length;n++){const i=z8[n];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=pme(this,this.scrapeMotionValuesFromProps(e,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(e),()=>r.variantChildren.delete(e)}addValue(e,r){const n=this.values.get(e);r!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,r),this.values.set(e,r),this.latestValues[e]=r.get())}removeValue(e){this.values.delete(e);const r=this.valueSubscriptions.get(e);r&&(r(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,r){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return n===void 0&&r!==void 0&&(n=ly(r===null?void 0:r,{owner:this}),this.addValue(e,n)),n}readValue(e,r){let n=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return n!=null&&(typeof n=="string"&&(kY(n)||LY(n))?n=parseFloat(n):!hme(n)&&P0.test(r)&&(n=yq(e,r)),this.setBaseTarget(e,fd(n)?n.get():n)),fd(n)?n.get():n}setBaseTarget(e,r){this.baseTarget[e]=r}getBaseTarget(e){const{initial:r}=this.props;let n;if(typeof r=="string"||typeof r=="object"){const s=x3(this.props,r,this.presenceContext?.custom);s&&(n=s[e])}if(r&&n!==void 0)return n;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!fd(i)?i:this.initialValues[e]!==void 0&&n===void 0?void 0:this.baseTarget[e]}on(e,r){return this.events[e]||(this.events[e]=new o3),this.events[e].add(r)}notify(e,...r){this.events[e]&&this.events[e].notify(...r)}scheduleRenderMicrotask(){E3.render(this.render)}}class Nq extends vme{constructor(){super(...arguments),this.KeyframeResolver=tme}sortInstanceNodePosition(e,r){return e.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(e,r){const n=e.style;return n?n[r]:void 0}removeValueFromRenderState(e,{vars:r,style:n}){delete r[e],delete n[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;fd(e)&&(this.childSubscription=e.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}class $0{constructor(e){this.isMounted=!1,this.node=e}update(){}}function kq({top:t,left:e,right:r,bottom:n}){return{x:{min:e,max:r},y:{min:t,max:n}}}function yme({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function xme(t,e){if(!e)return t;const r=e({x:t.left,y:t.top}),n=e({x:t.right,y:t.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function Zk(t){return t===void 0||t===1}function kB({scale:t,scaleX:e,scaleY:r}){return!Zk(t)||!Zk(e)||!Zk(r)}function mv(t){return kB(t)||Iq(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function Iq(t){return K8(t.x)||K8(t.y)}function K8(t){return t&&t!=="0%"}function NC(t,e,r){const n=t-r,i=e*n;return r+i}function G8(t,e,r,n,i){return i!==void 0&&(t=NC(t,i,n)),NC(t,r,n)+e}function IB(t,e=0,r=1,n,i){t.min=G8(t.min,e,r,n,i),t.max=G8(t.max,e,r,n,i)}function Lq(t,{x:e,y:r}){IB(t.x,e.translate,e.scale,e.originPoint),IB(t.y,r.translate,r.scale,r.originPoint)}const W8=.999999999999,Y8=1.0000000000001;function bme(t,e,r,n=!1){const i=r.length;if(!i)return;e.x=e.y=1;let s,o;for(let c=0;c<i;c++){s=r[c],o=s.projectionDelta;const{visualElement:u}=s.options;u&&u.props.style&&u.props.style.display==="contents"||(n&&s.options.layoutScroll&&s.scroll&&s!==s.root&&qx(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,Lq(t,o)),n&&mv(s.latestValues)&&qx(t,s.latestValues))}e.x<Y8&&e.x>W8&&(e.x=1),e.y<Y8&&e.y>W8&&(e.y=1)}function Yx(t,e){t.min=t.min+e,t.max=t.max+e}function q8(t,e,r,n,i=.5){const s=hc(t.min,t.max,i);IB(t,e,r,s,n)}function qx(t,e){q8(t.x,e.x,e.scaleX,e.scale,e.originX),q8(t.y,e.y,e.scaleY,e.scale,e.originY)}function Bq(t,e){return kq(xme(t.getBoundingClientRect(),e))}function wme(t,e,r){const n=Bq(t,r),{scroll:i}=e;return i&&(Yx(n.x,i.offset.x),Yx(n.y,i.offset.y)),n}const Eme={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},_me=r1.length;function Sme(t,e,r){let n="",i=!0;for(let s=0;s<_me;s++){const o=r1[s],c=t[o];if(c===void 0)continue;let u=!0;if(typeof c=="number")u=c===(o.startsWith("scale")?1:0);else{const l=parseFloat(c);u=o.startsWith("scale")?l===1:l===0}if(!u||r){const l=xq(c,w3[o]);if(!u){i=!1;const d=Eme[o]||o;n+=`${d}(${l}) `}r&&(e[o]=l)}}return n=n.trim(),r?n=r(e,i?"":n):i&&(n="none"),n}function C3(t,e,r){const{style:n,vars:i,transformOrigin:s}=t;let o=!1,c=!1;for(const u in e){const l=e[u];if(n1.has(u)){o=!0;continue}else if(KY(u)){i[u]=l;continue}else{const d=xq(l,w3[u]);u.startsWith("origin")?(c=!0,s[u]=d):n[u]=d}}if(e.transform||(o||r?n.transform=Sme(e,t.transform,r):n.transform&&(n.transform="none")),c){const{originX:u="50%",originY:l="50%",originZ:d=0}=s;n.transformOrigin=`${u} ${l} ${d}`}}function Pq(t,{style:e,vars:r},n,i){const s=t.style;let o;for(o in e)s[o]=e[o];i?.applyProjectionStyles(s,n);for(o in r)s.setProperty(o,r[o])}function X8(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const F1={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Ci.test(t))t=parseFloat(t);else return t;const r=X8(t,e.target.x),n=X8(t,e.target.y);return`${r}% ${n}%`}},Tme={correct:(t,{treeScale:e,projectionDelta:r})=>{const n=t,i=P0.parse(t);if(i.length>5)return n;const s=P0.createTransformer(t),o=typeof i[0]!="number"?1:0,c=r.x.scale*e.x,u=r.y.scale*e.y;i[0+o]/=c,i[1+o]/=u;const l=hc(c,u,.5);return typeof i[2+o]=="number"&&(i[2+o]/=l),typeof i[3+o]=="number"&&(i[3+o]/=l),s(i)}},LB={borderRadius:{...F1,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:F1,borderTopRightRadius:F1,borderBottomLeftRadius:F1,borderBottomRightRadius:F1,boxShadow:Tme};function Oq(t,{layout:e,layoutId:r}){return n1.has(t)||t.startsWith("origin")||(e||r!==void 0)&&(!!LB[t]||t==="opacity")}function j3(t,e,r){const n=t.style,i=e?.style,s={};if(!n)return s;for(const o in n)(fd(n[o])||i&&fd(i[o])||Oq(o,t)||r?.getValue(o)?.liveStyle!==void 0)&&(s[o]=n[o]);return s}function Cme(t){return window.getComputedStyle(t)}class jme extends Nq{constructor(){super(...arguments),this.type="html",this.renderInstance=Pq}readValueFromInstance(e,r){if(n1.has(r))return this.projection?.isProjecting?vB(r):rAe(e,r);{const n=Cme(e),i=(KY(r)?n.getPropertyValue(r):n[r])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:r}){return Bq(e,r)}build(e,r,n){C3(e,r,n.transformTemplate)}scrapeMotionValuesFromProps(e,r,n){return j3(e,r,n)}}const Nme={offset:"stroke-dashoffset",array:"stroke-dasharray"},kme={offset:"strokeDashoffset",array:"strokeDasharray"};function Ime(t,e,r=1,n=0,i=!0){t.pathLength=1;const s=i?Nme:kme;t[s.offset]=`${-n}`,t[s.array]=`${e} ${r}`}const Lme=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function Rq(t,{attrX:e,attrY:r,attrScale:n,pathLength:i,pathSpacing:s=1,pathOffset:o=0,...c},u,l,d){if(C3(t,c,l),u){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:f,style:A}=t;f.transform&&(A.transform=f.transform,delete f.transform),(A.transform||f.transformOrigin)&&(A.transformOrigin=f.transformOrigin??"50% 50%",delete f.transformOrigin),A.transform&&(A.transformBox=d?.transformBox??"fill-box",delete f.transformBox);for(const p of Lme)f[p]!==void 0&&(A[p]=f[p],delete f[p]);e!==void 0&&(f.x=e),r!==void 0&&(f.y=r),n!==void 0&&(f.scale=n),i!==void 0&&Ime(f,i,s,o,!1)}const Dq=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),Mq=t=>typeof t=="string"&&t.toLowerCase()==="svg";function Bme(t,e,r,n){Pq(t,e,void 0,n);for(const i in e.attrs)t.setAttribute(Dq.has(i)?i:b3(i),e.attrs[i])}function Fq(t,e,r){const n=j3(t,e,r);for(const i in t)if(fd(t[i])||fd(e[i])){const s=r1.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;n[s]=t[i]}return n}class Pme extends Nq{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ou}getBaseTargetFromProps(e,r){return e[r]}readValueFromInstance(e,r){if(n1.has(r)){const n=vq(r);return n&&n.default||0}return r=Dq.has(r)?r:b3(r),e.getAttribute(r)}scrapeMotionValuesFromProps(e,r,n){return Fq(e,r,n)}build(e,r,n){Rq(e,r,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(e,r,n,i){Bme(e,r,n,i)}mount(e){this.isSVGTag=Mq(e.tagName),super.mount(e)}}const Ome=T3.length;function Uq(t){if(!t)return;if(!t.isControllingVariants){const r=t.parent?Uq(t.parent)||{}:{};return t.props.initial!==void 0&&(r.initial=t.props.initial),r}const e={};for(let r=0;r<Ome;r++){const n=T3[r],i=t.props[n];(_E(i)||i===!1)&&(e[n]=i)}return e}function $q(t,e){if(!Array.isArray(e))return!1;const r=e.length;if(r!==t.length)return!1;for(let n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}const Rme=[...S3].reverse(),Dme=S3.length;function Mme(t){return e=>Promise.all(e.map(({animation:r,options:n})=>zAe(t,r,n)))}function Fme(t){let e=Mme(t),r=Z8(),n=!0;const i=u=>(l,d)=>{const f=cb(t,d,u==="exit"?t.presenceContext?.custom:void 0);if(f){const{transition:A,transitionEnd:p,...g}=f;l={...l,...g,...p}}return l};function s(u){e=u(t)}function o(u){const{props:l}=t,d=Uq(t.parent)||{},f=[],A=new Set;let p={},g=1/0;for(let x=0;x<Dme;x++){const w=Rme[x],E=r[w],T=l[w]!==void 0?l[w]:d[w],C=_E(T),N=w===u?E.isActive:null;N===!1&&(g=x);let I=T===d[w]&&T!==l[w]&&C;if(I&&n&&t.manuallyAnimateOnMount&&(I=!1),E.protectedKeys={...p},!E.isActive&&N===null||!T&&!E.prevProp||PN(T)||typeof T=="boolean")continue;const U=Ume(E.prevProp,T);let K=U||w===u&&E.isActive&&!I&&C||x>g&&C,Y=!1;const re=Array.isArray(T)?T:[T];let se=re.reduce(i(w),{});N===!1&&(se={});const{prevResolvedValues:Ae={}}=E,we={...Ae,...se},Ce=ce=>{K=!0,A.has(ce)&&(Y=!0,A.delete(ce)),E.needsAnimating[ce]=!0;const ae=t.getValue(ce);ae&&(ae.liveStyle=!1)};for(const ce in we){const ae=se[ce],De=Ae[ce];if(p.hasOwnProperty(ce))continue;let Oe=!1;_B(ae)&&_B(De)?Oe=!$q(ae,De):Oe=ae!==De,Oe?ae!=null?Ce(ce):A.add(ce):ae!==void 0&&A.has(ce)?Ce(ce):E.protectedKeys[ce]=!0}E.prevProp=T,E.prevResolvedValues=se,E.isActive&&(p={...p,...se}),n&&t.blockInitialAnimation&&(K=!1);const ve=I&&U;K&&(!ve||Y)&&f.push(...re.map(ce=>{const ae={type:w};if(typeof ce=="string"&&n&&!ve&&t.manuallyAnimateOnMount&&t.parent){const{parent:De}=t,Oe=cb(De,ce);if(De.enteringChildren&&Oe){const{delayChildren:be}=Oe.transition||{};ae.delay=uq(De.enteringChildren,t,be)}}return{animation:ce,options:ae}}))}if(A.size){const x={};if(typeof l.initial!="boolean"){const w=cb(t,Array.isArray(l.initial)?l.initial[0]:l.initial);w&&w.transition&&(x.transition=w.transition)}A.forEach(w=>{const E=t.getBaseTarget(w),T=t.getValue(w);T&&(T.liveStyle=!0),x[w]=E??null}),f.push({animation:x})}let y=!!f.length;return n&&(l.initial===!1||l.initial===l.animate)&&!t.manuallyAnimateOnMount&&(y=!1),n=!1,y?e(f):Promise.resolve()}function c(u,l){if(r[u].isActive===l)return Promise.resolve();t.variantChildren?.forEach(f=>f.animationState?.setActive(u,l)),r[u].isActive=l;const d=o(u);for(const f in r)r[f].protectedKeys={};return d}return{animateChanges:o,setActive:c,setAnimateFunction:s,getState:()=>r,reset:()=>{r=Z8()}}}function Ume(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!$q(e,t):!1}function av(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Z8(){return{animate:av(!0),whileInView:av(),whileHover:av(),whileTap:av(),whileDrag:av(),whileFocus:av(),exit:av()}}function J8(t,e){t.min=e.min,t.max=e.max}function pA(t,e){J8(t.x,e.x),J8(t.y,e.y)}function e7(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}const Hq=1e-4,$me=1-Hq,Hme=1+Hq,Qq=.01,Qme=0-Qq,Vme=0+Qq;function ph(t){return t.max-t.min}function zme(t,e,r){return Math.abs(t-e)<=r}function t7(t,e,r,n=.5){t.origin=n,t.originPoint=hc(e.min,e.max,t.origin),t.scale=ph(r)/ph(e),t.translate=hc(r.min,r.max,t.origin)-t.originPoint,(t.scale>=$me&&t.scale<=Hme||isNaN(t.scale))&&(t.scale=1),(t.translate>=Qme&&t.translate<=Vme||isNaN(t.translate))&&(t.translate=0)}function Gw(t,e,r,n){t7(t.x,e.x,r.x,n?n.originX:void 0),t7(t.y,e.y,r.y,n?n.originY:void 0)}function r7(t,e,r){t.min=r.min+e.min,t.max=t.min+ph(e)}function Kme(t,e,r){r7(t.x,e.x,r.x),r7(t.y,e.y,r.y)}function n7(t,e,r){t.min=e.min-r.min,t.max=t.min+ph(e)}function kC(t,e,r){n7(t.x,e.x,r.x),n7(t.y,e.y,r.y)}function i7(t,e,r,n,i){return t-=e,t=NC(t,1/r,n),i!==void 0&&(t=NC(t,1/i,n)),t}function Gme(t,e=0,r=1,n=.5,i,s=t,o=t){if(Um.test(e)&&(e=parseFloat(e),e=hc(o.min,o.max,e/100)-o.min),typeof e!="number")return;let c=hc(s.min,s.max,n);t===s&&(c-=e),t.min=i7(t.min,e,r,c,i),t.max=i7(t.max,e,r,c,i)}function s7(t,e,[r,n,i],s,o){Gme(t,e[r],e[n],e[i],e.scale,s,o)}const Wme=["x","scaleX","originX"],Yme=["y","scaleY","originY"];function a7(t,e,r,n){s7(t.x,e,Wme,r?r.x:void 0,n?n.x:void 0),s7(t.y,e,Yme,r?r.y:void 0,n?n.y:void 0)}function o7(t){return t.translate===0&&t.scale===1}function Vq(t){return o7(t.x)&&o7(t.y)}function l7(t,e){return t.min===e.min&&t.max===e.max}function qme(t,e){return l7(t.x,e.x)&&l7(t.y,e.y)}function c7(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function zq(t,e){return c7(t.x,e.x)&&c7(t.y,e.y)}function u7(t){return ph(t.x)/ph(t.y)}function d7(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}function $f(t){return[t("x"),t("y")]}function Xme(t,e,r){let n="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=r?.z||0;if((i||s||o)&&(n=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(n+=`scale(${1/e.x}, ${1/e.y}) `),r){const{transformPerspective:l,rotate:d,rotateX:f,rotateY:A,skewX:p,skewY:g}=r;l&&(n=`perspective(${l}px) ${n}`),d&&(n+=`rotate(${d}deg) `),f&&(n+=`rotateX(${f}deg) `),A&&(n+=`rotateY(${A}deg) `),p&&(n+=`skewX(${p}deg) `),g&&(n+=`skewY(${g}deg) `)}const c=t.x.scale*e.x,u=t.y.scale*e.y;return(c!==1||u!==1)&&(n+=`scale(${c}, ${u})`),n||"none"}const Kq=["TopLeft","TopRight","BottomLeft","BottomRight"],Zme=Kq.length,h7=t=>typeof t=="string"?parseFloat(t):t,f7=t=>typeof t=="number"||Ci.test(t);function Jme(t,e,r,n,i,s){i?(t.opacity=hc(0,r.opacity??1,epe(n)),t.opacityExit=hc(e.opacity??1,0,tpe(n))):s&&(t.opacity=hc(e.opacity??1,r.opacity??1,n));for(let o=0;o<Zme;o++){const c=`border${Kq[o]}Radius`;let u=A7(e,c),l=A7(r,c);if(u===void 0&&l===void 0)continue;u||(u=0),l||(l=0),u===0||l===0||f7(u)===f7(l)?(t[c]=Math.max(hc(h7(u),h7(l),n),0),(Um.test(l)||Um.test(u))&&(t[c]+="%")):t[c]=l}(e.rotate||r.rotate)&&(t.rotate=hc(e.rotate||0,r.rotate||0,n))}function A7(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const epe=Gq(0,.5,UY),tpe=Gq(.5,.95,Yf);function Gq(t,e,r){return n=>n<t?0:n>e?1:r(bE(t,e,n))}function rpe(t,e,r){const n=fd(t)?t:ly(t);return n.start(y3("",n,e,r)),n.animation}function SE(t,e,r,n={passive:!0}){return t.addEventListener(e,r,n),()=>t.removeEventListener(e,r)}const npe=(t,e)=>t.depth-e.depth;class ipe{constructor(){this.children=[],this.isDirty=!1}add(e){n3(this.children,e),this.isDirty=!0}remove(e){i3(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(npe),this.isDirty=!1,this.children.forEach(e)}}function spe(t,e){const r=mh.now(),n=({timestamp:i})=>{const s=i-r;s>=e&&(Gp(n),t(s-e))};return ul.setup(n,!0),()=>Gp(n)}function WS(t){return fd(t)?t.get():t}class ape{constructor(){this.members=[]}add(e){n3(this.members,e),e.scheduleRender()}remove(e){if(i3(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(e){const r=this.members.findIndex(i=>e===i);if(r===0)return!1;let n;for(let i=r;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){n=s;break}}return n?(this.promote(n),!0):!1}promote(e,r){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender();const i=n.options.layoutDependency,s=e.options.layoutDependency;i!==void 0&&s!==void 0&&i===s||(e.resumeFrom=n,r&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0));const{crossfade:c}=e.options;c===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:r,resumingFrom:n}=e;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const YS={hasAnimatedSinceResize:!0,hasEverUpdated:!1},Jk=["","X","Y","Z"],ope=1e3;let lpe=0;function eI(t,e,r,n){const{latestValues:i}=e;i[t]&&(r[t]=i[t],e.setStaticValue(t,0),n&&(n[t]=0))}function Wq(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const r=Aq(e);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(r,"transform",ul,!(i||s))}const{parent:n}=t;n&&!n.hasCheckedOptimisedAppear&&Wq(n)}function Yq({attachResizeListener:t,defaultParent:e,measureScroll:r,checkIsScrollRoot:n,resetTransform:i}){return class{constructor(o={},c=e?.()){this.id=lpe++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(dpe),this.nodes.forEach(mpe),this.nodes.forEach(ppe),this.nodes.forEach(hpe)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new ipe)}addEventListener(o,c){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new o3),this.eventHandlers.get(o).add(c)}notifyListeners(o,...c){const u=this.eventHandlers.get(o);u&&u.notify(...c)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=Sq(o)&&!lme(o),this.instance=o;const{layoutId:c,layout:u,visualElement:l}=this.options;if(l&&!l.current&&l.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(u||c)&&(this.isLayoutDirty=!0),t){let d,f=0;const A=()=>this.root.updateBlockedByResize=!1;ul.read(()=>{f=window.innerWidth}),t(o,()=>{const p=window.innerWidth;p!==f&&(f=p,this.root.updateBlockedByResize=!0,d&&d(),d=spe(A,250),YS.hasAnimatedSinceResize&&(YS.hasAnimatedSinceResize=!1,this.nodes.forEach(g7)))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&l&&(c||u)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f,hasRelativeLayoutChanged:A,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||l.getDefaultTransition()||bpe,{onLayoutAnimationStart:y,onLayoutAnimationComplete:x}=l.getProps(),w=!this.targetLayout||!zq(this.targetLayout,p),E=!f&&A;if(this.options.layoutRoot||this.resumeFrom||E||f&&(w||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const T={...v3(g,"layout"),onPlay:y,onComplete:x};(l.shouldReduceMotion||this.options.layoutRoot)&&(T.delay=0,T.type=!1),this.startAnimation(T),this.setAnimationOrigin(d,E)}else f||g7(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Gp(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(gpe),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Wq(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const f=this.path[d];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:c,layout:u}=this.options;if(c===void 0&&!u)return;const l=this.getTransformTemplate();this.prevTransformTemplateValue=l?l(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(m7);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(p7);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(Ape),this.nodes.forEach(cpe),this.nodes.forEach(upe)):this.nodes.forEach(p7),this.clearAllSnapshots();const c=mh.now();Dd.delta=Vm(0,1e3/60,c-Dd.timestamp),Dd.timestamp=c,Dd.isProcessing=!0,zk.update.process(Dd),zk.preRender.process(Dd),zk.render.process(Dd),Dd.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,E3.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(fpe),this.sharedNodes.forEach(vpe)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ul.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ul.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!ph(this.snapshot.measuredBox.x)&&!ph(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=Ou(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(c=!1),c&&this.instance){const u=n(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:u,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!Vq(this.projectionDelta),u=this.getTransformTemplate(),l=u?u(this.latestValues,""):void 0,d=l!==this.prevTransformTemplateValue;o&&this.instance&&(c||mv(this.latestValues)||d)&&(i(this.instance,l),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const c=this.measurePageBox();let u=this.removeElementScroll(c);return o&&(u=this.removeTransform(u)),wpe(u),{animationId:this.root.animationId,measuredBox:c,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return Ou();const c=o.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(Epe))){const{scroll:l}=this.root;l&&(Yx(c.x,l.offset.x),Yx(c.y,l.offset.y))}return c}removeElementScroll(o){const c=Ou();if(pA(c,o),this.scroll?.wasRoot)return c;for(let u=0;u<this.path.length;u++){const l=this.path[u],{scroll:d,options:f}=l;l!==this.root&&d&&f.layoutScroll&&(d.wasRoot&&pA(c,o),Yx(c.x,d.offset.x),Yx(c.y,d.offset.y))}return c}applyTransform(o,c=!1){const u=Ou();pA(u,o);for(let l=0;l<this.path.length;l++){const d=this.path[l];!c&&d.options.layoutScroll&&d.scroll&&d!==d.root&&qx(u,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),mv(d.latestValues)&&qx(u,d.latestValues)}return mv(this.latestValues)&&qx(u,this.latestValues),u}removeTransform(o){const c=Ou();pA(c,o);for(let u=0;u<this.path.length;u++){const l=this.path[u];if(!l.instance||!mv(l.latestValues))continue;kB(l.latestValues)&&l.updateSnapshot();const d=Ou(),f=l.measurePageBox();pA(d,f),a7(c,l.latestValues,l.snapshot?l.snapshot.layoutBox:void 0,d)}return mv(this.latestValues)&&a7(c,this.latestValues),c}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Dd.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:f}=this.options;if(!this.layout||!(d||f))return;this.resolvedRelativeTargetAt=Dd.timestamp;const A=this.getClosestProjectingParent();A&&this.linkedParentVersion!==A.layoutVersion&&!A.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(A&&A.layout?this.createRelativeTarget(A,this.layout.layoutBox,A.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Ou(),this.targetWithTransforms=Ou()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Kme(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):pA(this.target,this.layout.layoutBox),Lq(this.target,this.targetDelta)):pA(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,A&&!!A.resumingFrom==!!this.resumingFrom&&!A.options.layoutScroll&&A.target&&this.animationProgress!==1?this.createRelativeTarget(A,this.target,A.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||kB(this.parent.latestValues)||Iq(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(o,c,u){this.relativeParent=o,this.linkedParentVersion=o.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ou(),this.relativeTargetOrigin=Ou(),kC(this.relativeTargetOrigin,c,u),pA(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const o=this.getLead(),c=!!this.resumingFrom||this!==o;let u=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Dd.timestamp&&(u=!1),u)return;const{layout:l,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(l||d))return;pA(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,A=this.treeScale.y;bme(this.layoutCorrected,this.treeScale,this.path,c),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Ou());const{target:p}=o;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(e7(this.prevProjectionDelta.x,this.projectionDelta.x),e7(this.prevProjectionDelta.y,this.projectionDelta.y)),Gw(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==A||!d7(this.projectionDelta.x,this.prevProjectionDelta.x)||!d7(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.visualElement?.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Wx(),this.projectionDelta=Wx(),this.projectionDeltaWithTransform=Wx()}setAnimationOrigin(o,c=!1){const u=this.snapshot,l=u?u.latestValues:{},d={...this.latestValues},f=Wx();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const A=Ou(),p=u?u.source:void 0,g=this.layout?this.layout.source:void 0,y=p!==g,x=this.getStack(),w=!x||x.members.length<=1,E=!!(y&&!w&&this.options.crossfade===!0&&!this.path.some(xpe));this.animationProgress=0;let T;this.mixTargetDelta=C=>{const N=C/1e3;v7(f.x,o.x,N),v7(f.y,o.y,N),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(kC(A,this.layout.layoutBox,this.relativeParent.layout.layoutBox),ype(this.relativeTarget,this.relativeTargetOrigin,A,N),T&&qme(this.relativeTarget,T)&&(this.isProjectionDirty=!1),T||(T=Ou()),pA(T,this.relativeTarget)),y&&(this.animationValues=d,Jme(d,l,this.latestValues,N,E,w)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=N},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Gp(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ul.update(()=>{YS.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=ly(0)),this.currentAnimation=rpe(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),o.onUpdate&&o.onUpdate(c)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(ope),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:c,target:u,layout:l,latestValues:d}=o;if(!(!c||!u||!l)){if(this!==o&&this.layout&&l&&qq(this.options.animationType,this.layout.layoutBox,l.layoutBox)){u=this.target||Ou();const f=ph(this.layout.layoutBox.x);u.x.min=o.target.x.min,u.x.max=u.x.min+f;const A=ph(this.layout.layoutBox.y);u.y.min=o.target.y.min,u.y.max=u.y.min+A}pA(c,u),qx(c,d),Gw(this.projectionDeltaWithTransform,this.layoutCorrected,c,d)}}registerSharedNode(o,c){this.sharedNodes.has(o)||this.sharedNodes.set(o,new ape),this.sharedNodes.get(o).add(c);const l=c.options.initialPromotionConfig;c.promote({transition:l?l.transition:void 0,preserveFollowOpacity:l&&l.shouldPreserveFollowOpacity?l.shouldPreserveFollowOpacity(c):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){const{layoutId:o}=this.options;return o?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:o}=this.options;return o?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:c,preserveFollowOpacity:u}={}){const l=this.getStack();l&&l.promote(this,u),o&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let c=!1;const{latestValues:u}=o;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(c=!0),!c)return;const l={};u.z&&eI("z",o,l,this.animationValues);for(let d=0;d<Jk.length;d++)eI(`rotate${Jk[d]}`,o,l,this.animationValues),eI(`skew${Jk[d]}`,o,l,this.animationValues);o.render();for(const d in l)o.setStaticValue(d,l[d]),this.animationValues&&(this.animationValues[d]=l[d]);o.scheduleRender()}applyProjectionStyles(o,c){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const u=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=WS(c?.pointerEvents)||"",o.transform=u?u(this.latestValues,""):"none";return}const l=this.getLead();if(!this.projectionDelta||!this.layout||!l.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=WS(c?.pointerEvents)||""),this.hasProjected&&!mv(this.latestValues)&&(o.transform=u?u({},""):"none",this.hasProjected=!1);return}o.visibility="";const d=l.animationValues||l.latestValues;this.applyTransformsToTarget();let f=Xme(this.projectionDeltaWithTransform,this.treeScale,d);u&&(f=u(d,f)),o.transform=f;const{x:A,y:p}=this.projectionDelta;o.transformOrigin=`${A.origin*100}% ${p.origin*100}% 0`,l.animationValues?o.opacity=l===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:o.opacity=l===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const g in LB){if(d[g]===void 0)continue;const{correct:y,applyTo:x,isCSSVariable:w}=LB[g],E=f==="none"?d[g]:y(d[g],l);if(x){const T=x.length;for(let C=0;C<T;C++)o[x[C]]=E}else w?this.options.visualElement.renderState.vars[g]=E:o[g]=E}this.options.layoutId&&(o.pointerEvents=l===this?WS(c?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>o.currentAnimation?.stop()),this.root.nodes.forEach(m7),this.root.sharedNodes.clear()}}}function cpe(t){t.updateLayout()}function upe(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:n}=t.layout,{animationType:i}=t.options,s=e.source!==t.layout.source;i==="size"?$f(d=>{const f=s?e.measuredBox[d]:e.layoutBox[d],A=ph(f);f.min=r[d].min,f.max=f.min+A}):qq(i,e.layoutBox,r)&&$f(d=>{const f=s?e.measuredBox[d]:e.layoutBox[d],A=ph(r[d]);f.max=f.min+A,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+A)});const o=Wx();Gw(o,r,e.layoutBox);const c=Wx();s?Gw(c,t.applyTransform(n,!0),e.measuredBox):Gw(c,r,e.layoutBox);const u=!Vq(o);let l=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:f,layout:A}=d;if(f&&A){const p=Ou();kC(p,e.layoutBox,f.layoutBox);const g=Ou();kC(g,r,A.layoutBox),zq(p,g)||(l=!0),d.options.layoutRoot&&(t.relativeTarget=g,t.relativeTargetOrigin=p,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:c,layoutDelta:o,hasLayoutChanged:u,hasRelativeLayoutChanged:l})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function dpe(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function hpe(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function fpe(t){t.clearSnapshot()}function m7(t){t.clearMeasurements()}function p7(t){t.isLayoutDirty=!1}function Ape(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function g7(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function mpe(t){t.resolveTargetDelta()}function ppe(t){t.calcProjection()}function gpe(t){t.resetSkewAndRotation()}function vpe(t){t.removeLeadSnapshot()}function v7(t,e,r){t.translate=hc(e.translate,0,r),t.scale=hc(e.scale,1,r),t.origin=e.origin,t.originPoint=e.originPoint}function y7(t,e,r,n){t.min=hc(e.min,r.min,n),t.max=hc(e.max,r.max,n)}function ype(t,e,r,n){y7(t.x,e.x,r.x,n),y7(t.y,e.y,r.y,n)}function xpe(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const bpe={duration:.45,ease:[.4,0,.1,1]},x7=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),b7=x7("applewebkit/")&&!x7("chrome/")?Math.round:Yf;function w7(t){t.min=b7(t.min),t.max=b7(t.max)}function wpe(t){w7(t.x),w7(t.y)}function qq(t,e,r){return t==="position"||t==="preserve-aspect"&&!zme(u7(e),u7(r),.2)}function Epe(t){return t!==t.root&&t.scroll?.wasRoot}const _pe=Yq({attachResizeListener:(t,e)=>SE(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body?.scrollLeft||0,y:document.documentElement.scrollTop||document.body?.scrollTop||0}),checkIsScrollRoot:()=>!0}),tI={current:void 0},Xq=Yq({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!tI.current){const t=new _pe({});t.mount(window),t.setOptions({layoutScroll:!0}),tI.current=t}return tI.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),N2=j.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function E7(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Spe(...t){return e=>{let r=!1;const n=t.map(i=>{const s=E7(i,e);return!r&&typeof s=="function"&&(r=!0),s});if(r)return()=>{for(let i=0;i<n.length;i++){const s=n[i];typeof s=="function"?s():E7(t[i],null)}}}}function Tpe(...t){return j.useCallback(Spe(...t),t)}class Cpe extends j.Component{getSnapshotBeforeUpdate(e){const r=this.props.childRef.current;if(r&&e.isPresent&&!this.props.isPresent){const n=r.offsetParent,i=jB(n)&&n.offsetWidth||0,s=jB(n)&&n.offsetHeight||0,o=this.props.sizeRef.current;o.height=r.offsetHeight||0,o.width=r.offsetWidth||0,o.top=r.offsetTop,o.left=r.offsetLeft,o.right=i-o.width-o.left,o.bottom=s-o.height-o.top}return null}componentDidUpdate(){}render(){return this.props.children}}function jpe({children:t,isPresent:e,anchorX:r,anchorY:n,root:i}){const s=j.useId(),o=j.useRef(null),c=j.useRef({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:u}=j.useContext(N2),l=t.props?.ref??t?.ref,d=Tpe(o,l);return j.useInsertionEffect(()=>{const{width:f,height:A,top:p,left:g,right:y,bottom:x}=c.current;if(e||!o.current||!f||!A)return;const w=r==="left"?`left: ${g}`:`right: ${y}`,E=n==="bottom"?`bottom: ${x}`:`top: ${p}`;o.current.dataset.motionPopId=s;const T=document.createElement("style");u&&(T.nonce=u);const C=i??document.head;return C.appendChild(T),T.sheet&&T.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${f}px !important;
            height: ${A}px !important;
            ${w}px !important;
            ${E}px !important;
          }
        `),()=>{C.contains(T)&&C.removeChild(T)}},[e]),a.jsx(Cpe,{isPresent:e,childRef:o,sizeRef:c,children:j.cloneElement(t,{ref:d})})}const Npe=({children:t,initial:e,isPresent:r,onExitComplete:n,custom:i,presenceAffectsLayout:s,mode:o,anchorX:c,anchorY:u,root:l})=>{const d=S2(kpe),f=j.useId();let A=!0,p=j.useMemo(()=>(A=!1,{id:f,initial:e,isPresent:r,custom:i,onExitComplete:g=>{d.set(g,!0);for(const y of d.values())if(!y)return;n&&n()},register:g=>(d.set(g,!1),()=>d.delete(g))}),[r,d,n]);return s&&A&&(p={...p}),j.useMemo(()=>{d.forEach((g,y)=>d.set(y,!1))},[r]),j.useEffect(()=>{!r&&!d.size&&n&&n()},[r]),o==="popLayout"&&(t=a.jsx(jpe,{isPresent:r,anchorX:c,anchorY:u,root:l,children:t})),a.jsx(LN.Provider,{value:p,children:t})};function kpe(){return new Map}function Zq(t=!0){const e=j.useContext(LN);if(e===null)return[!0,null];const{isPresent:r,onExitComplete:n,register:i}=e,s=j.useId();j.useEffect(()=>{if(t)return i(s)},[t]);const o=j.useCallback(()=>t&&n&&n(s),[s,n,t]);return!r&&n?[!1,o]:[!0]}const R_=t=>t.key||"";function _7(t){const e=[];return j.Children.forEach(t,r=>{j.isValidElement(r)&&e.push(r)}),e}const _0=({children:t,custom:e,initial:r=!0,onExitComplete:n,presenceAffectsLayout:i=!0,mode:s="sync",propagate:o=!1,anchorX:c="left",anchorY:u="top",root:l})=>{const[d,f]=Zq(o),A=j.useMemo(()=>_7(t),[t]),p=o&&!d?[]:A.map(R_),g=j.useRef(!0),y=j.useRef(A),x=S2(()=>new Map),w=j.useRef(new Set),[E,T]=j.useState(A),[C,N]=j.useState(A);r3(()=>{g.current=!1,y.current=A;for(let K=0;K<C.length;K++){const Y=R_(C[K]);p.includes(Y)?(x.delete(Y),w.current.delete(Y)):x.get(Y)!==!0&&x.set(Y,!1)}},[C,p.length,p.join("-")]);const I=[];if(A!==E){let K=[...A];for(let Y=0;Y<C.length;Y++){const re=C[Y],se=R_(re);p.includes(se)||(K.splice(Y,0,re),I.push(re))}return s==="wait"&&I.length&&(K=I),N(_7(K)),T(A),null}const{forceRender:U}=j.useContext(t3);return a.jsx(a.Fragment,{children:C.map(K=>{const Y=R_(K),re=o&&!d?!1:A===C||p.includes(Y),se=()=>{if(w.current.has(Y))return;if(w.current.add(Y),x.has(Y))x.set(Y,!0);else return;let Ae=!0;x.forEach(we=>{we||(Ae=!1)}),Ae&&(U?.(),N(y.current),o&&f?.(),n&&n())};return a.jsx(Npe,{isPresent:re,initial:!g.current||r?void 0:!1,custom:e,presenceAffectsLayout:i,mode:s,root:l,onExitComplete:re?void 0:se,anchorX:c,anchorY:u,children:K},Y)})})},Jq=j.createContext({strict:!1}),S7={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let T7=!1;function Ipe(){if(T7)return;const t={};for(const e in S7)t[e]={isEnabled:r=>S7[e].some(n=>!!r[n])};jq(t),T7=!0}function eX(){return Ipe(),gme()}function Lpe(t){const e=eX();for(const r in t)e[r]={...e[r],...t[r]};jq(e)}const Bpe=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function IC(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||Bpe.has(t)}let tX=t=>!IC(t);function Ppe(t){typeof t=="function"&&(tX=e=>e.startsWith("on")?!IC(e):t(e))}try{Ppe(require("@emotion/is-prop-valid").default)}catch{}function Ope(t,e,r){const n={};for(const i in t)i==="values"&&typeof t.values=="object"||(tX(i)||r===!0&&IC(i)||!e&&!IC(i)||t.draggable&&i.startsWith("onDrag"))&&(n[i]=t[i]);return n}const RN=j.createContext({});function Rpe(t,e){if(ON(t)){const{initial:r,animate:n}=t;return{initial:r===!1||_E(r)?r:void 0,animate:_E(n)?n:void 0}}return t.inherit!==!1?e:{}}function Dpe(t){const{initial:e,animate:r}=Rpe(t,j.useContext(RN));return j.useMemo(()=>({initial:e,animate:r}),[C7(e),C7(r)])}function C7(t){return Array.isArray(t)?t.join(" "):t}const N3=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function rX(t,e,r){for(const n in e)!fd(e[n])&&!Oq(n,r)&&(t[n]=e[n])}function Mpe({transformTemplate:t},e){return j.useMemo(()=>{const r=N3();return C3(r,e,t),Object.assign({},r.vars,r.style)},[e])}function Fpe(t,e){const r=t.style||{},n={};return rX(n,r,t),Object.assign(n,Mpe(t,e)),n}function Upe(t,e){const r={},n=Fpe(t,e);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=n,r}const nX=()=>({...N3(),attrs:{}});function $pe(t,e,r,n){const i=j.useMemo(()=>{const s=nX();return Rq(s,e,Mq(n),t.transformTemplate,t.style),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};rX(s,t.style,t),i.style={...s,...i.style}}return i}const Hpe=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function k3(t){return typeof t!="string"||t.includes("-")?!1:!!(Hpe.indexOf(t)>-1||/[A-Z]/u.test(t))}function Qpe(t,e,r,{latestValues:n},i,s=!1,o){const u=(o??k3(t)?$pe:Upe)(e,n,i,t),l=Ope(e,typeof t=="string",s),d=t!==j.Fragment?{...l,...u,ref:r}:{},{children:f}=e,A=j.useMemo(()=>fd(f)?f.get():f,[f]);return j.createElement(t,{...d,children:A})}function Vpe({scrapeMotionValuesFromProps:t,createRenderState:e},r,n,i){return{latestValues:zpe(r,n,i,t),renderState:e()}}function zpe(t,e,r,n){const i={},s=n(t,{});for(const A in s)i[A]=WS(s[A]);let{initial:o,animate:c}=t;const u=ON(t),l=Cq(t);e&&l&&!u&&t.inherit!==!1&&(o===void 0&&(o=e.initial),c===void 0&&(c=e.animate));let d=r?r.initial===!1:!1;d=d||o===!1;const f=d?c:o;if(f&&typeof f!="boolean"&&!PN(f)){const A=Array.isArray(f)?f:[f];for(let p=0;p<A.length;p++){const g=x3(t,A[p]);if(g){const{transitionEnd:y,transition:x,...w}=g;for(const E in w){let T=w[E];if(Array.isArray(T)){const C=d?T.length-1:0;T=T[C]}T!==null&&(i[E]=T)}for(const E in y)i[E]=y[E]}}}return i}const iX=t=>(e,r)=>{const n=j.useContext(RN),i=j.useContext(LN),s=()=>Vpe(t,e,n,i);return r?s():S2(s)},Kpe=iX({scrapeMotionValuesFromProps:j3,createRenderState:N3}),Gpe=iX({scrapeMotionValuesFromProps:Fq,createRenderState:nX}),Wpe=Symbol.for("motionComponentSymbol");function Ype(t,e,r){const n=j.useRef(r);j.useInsertionEffect(()=>{n.current=r});const i=j.useRef(null);return j.useCallback(s=>{s&&t.onMount?.(s),e&&(s?e.mount(s):e.unmount());const o=n.current;if(typeof o=="function")if(s){const c=o(s);typeof c=="function"&&(i.current=c)}else i.current?(i.current(),i.current=null):o(s);else o&&(o.current=s)},[e])}const sX=j.createContext({});function fw(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function qpe(t,e,r,n,i,s){const{visualElement:o}=j.useContext(RN),c=j.useContext(Jq),u=j.useContext(LN),l=j.useContext(N2).reducedMotion,d=j.useRef(null),f=j.useRef(!1);n=n||c.renderer,!d.current&&n&&(d.current=n(t,{visualState:e,parent:o,props:r,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:l,isSVG:s}),f.current&&d.current&&(d.current.manuallyAnimateOnMount=!0));const A=d.current,p=j.useContext(sX);A&&!A.projection&&i&&(A.type==="html"||A.type==="svg")&&Xpe(d.current,r,i,p);const g=j.useRef(!1);j.useInsertionEffect(()=>{A&&g.current&&A.update(r,u)});const y=r[fq],x=j.useRef(!!y&&!window.MotionHandoffIsComplete?.(y)&&window.MotionHasOptimisedAnimation?.(y));return r3(()=>{f.current=!0,A&&(g.current=!0,window.MotionIsMounted=!0,A.updateFeatures(),A.scheduleRenderMicrotask(),x.current&&A.animationState&&A.animationState.animateChanges())}),j.useEffect(()=>{A&&(!x.current&&A.animationState&&A.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(y)}),x.current=!1),A.enteringChildren=void 0)}),A}function Xpe(t,e,r,n){const{layoutId:i,layout:s,drag:o,dragConstraints:c,layoutScroll:u,layoutRoot:l,layoutCrossfade:d}=e;t.projection=new r(t.latestValues,e["data-framer-portal-id"]?void 0:aX(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||c&&fw(c),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:n,crossfade:d,layoutScroll:u,layoutRoot:l})}function aX(t){if(t)return t.options.allowProjection!==!1?t.projection:aX(t.parent)}function rI(t,{forwardMotionProps:e=!1,type:r}={},n,i){n&&Lpe(n);const s=r?r==="svg":k3(t),o=s?Gpe:Kpe;function c(l,d){let f;const A={...j.useContext(N2),...l,layoutId:Zpe(l)},{isStatic:p}=A,g=Dpe(l),y=o(l,p);if(!p&&NY){Jpe();const x=ege(A);f=x.MeasureLayout,g.visualElement=qpe(t,y,A,i,x.ProjectionNode,s)}return a.jsxs(RN.Provider,{value:g,children:[f&&g.visualElement?a.jsx(f,{visualElement:g.visualElement,...A}):null,Qpe(t,l,Ype(y,g.visualElement,d),y,p,e,s)]})}c.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const u=j.forwardRef(c);return u[Wpe]=t,u}function Zpe({layoutId:t}){const e=j.useContext(t3).id;return e&&t!==void 0?e+"-"+t:t}function Jpe(t,e){j.useContext(Jq).strict}function ege(t){const e=eX(),{drag:r,layout:n}=e;if(!r&&!n)return{};const i={...r,...n};return{MeasureLayout:r?.isEnabled(t)||n?.isEnabled(t)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function tge(t,e){if(typeof Proxy>"u")return rI;const r=new Map,n=(s,o)=>rI(s,o,t,e),i=(s,o)=>n(s,o);return new Proxy(i,{get:(s,o)=>o==="create"?n:(r.has(o)||r.set(o,rI(o,void 0,t,e)),r.get(o))})}const rge=(t,e)=>e.isSVG??k3(t)?new Pme(e):new jme(e,{allowProjection:t!==j.Fragment});class nge extends $0{constructor(e){super(e),e.animationState||(e.animationState=Fme(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();PN(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:r}=this.node.prevProps||{};e!==r&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let ige=0;class sge extends $0{constructor(){super(...arguments),this.id=ige++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:r}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const i=this.node.animationState.setActive("exit",!e);r&&!e&&i.then(()=>{r(this.id)})}mount(){const{register:e,onExitComplete:r}=this.node.presenceContext||{};r&&r(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const age={animation:{Feature:nge},exit:{Feature:sge}};function k2(t){return{point:{x:t.pageX,y:t.pageY}}}const oge=t=>e=>_3(e)&&t(e,k2(e));function Ww(t,e,r,n){return SE(t,e,oge(r),n)}const oX=({current:t})=>t?t.ownerDocument.defaultView:null,j7=(t,e)=>Math.abs(t-e);function lge(t,e){const r=j7(t.x,e.x),n=j7(t.y,e.y);return Math.sqrt(r**2+n**2)}const N7=new Set(["auto","scroll"]);class lX{constructor(e,r,{transformPagePoint:n,contextWindow:i=window,dragSnapToOrigin:s=!1,distanceThreshold:o=3,element:c}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=p=>{this.handleScroll(p.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const p=iI(this.lastMoveEventInfo,this.history),g=this.startEvent!==null,y=lge(p.offset,{x:0,y:0})>=this.distanceThreshold;if(!g&&!y)return;const{point:x}=p,{timestamp:w}=Dd;this.history.push({...x,timestamp:w});const{onStart:E,onMove:T}=this.handlers;g||(E&&E(this.lastMoveEvent,p),this.startEvent=this.lastMoveEvent),T&&T(this.lastMoveEvent,p)},this.handlePointerMove=(p,g)=>{this.lastMoveEvent=p,this.lastMoveEventInfo=nI(g,this.transformPagePoint),ul.update(this.updatePoint,!0)},this.handlePointerUp=(p,g)=>{this.end();const{onEnd:y,onSessionEnd:x,resumeAnimation:w}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&w&&w(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const E=iI(p.type==="pointercancel"?this.lastMoveEventInfo:nI(g,this.transformPagePoint),this.history);this.startEvent&&y&&y(p,E),x&&x(p,E)},!_3(e))return;this.dragSnapToOrigin=s,this.handlers=r,this.transformPagePoint=n,this.distanceThreshold=o,this.contextWindow=i||window;const u=k2(e),l=nI(u,this.transformPagePoint),{point:d}=l,{timestamp:f}=Dd;this.history=[{...d,timestamp:f}];const{onSessionStart:A}=r;A&&A(e,iI(l,this.history)),this.removeListeners=T2(Ww(this.contextWindow,"pointermove",this.handlePointerMove),Ww(this.contextWindow,"pointerup",this.handlePointerUp),Ww(this.contextWindow,"pointercancel",this.handlePointerUp)),c&&this.startScrollTracking(c)}startScrollTracking(e){let r=e.parentElement;for(;r;){const n=getComputedStyle(r);(N7.has(n.overflowX)||N7.has(n.overflowY))&&this.scrollPositions.set(r,{x:r.scrollLeft,y:r.scrollTop}),r=r.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(e){const r=this.scrollPositions.get(e);if(!r)return;const n=e===window,i=n?{x:window.scrollX,y:window.scrollY}:{x:e.scrollLeft,y:e.scrollTop},s={x:i.x-r.x,y:i.y-r.y};s.x===0&&s.y===0||(n?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=s.x,this.lastMoveEventInfo.point.y+=s.y):this.history.length>0&&(this.history[0].x-=s.x,this.history[0].y-=s.y),this.scrollPositions.set(e,i),ul.update(this.updatePoint,!0))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),Gp(this.updatePoint)}}function nI(t,e){return e?{point:e(t.point)}:t}function k7(t,e){return{x:t.x-e.x,y:t.y-e.y}}function iI({point:t},e){return{point:t,delta:k7(t,cX(e)),offset:k7(t,cge(e)),velocity:uge(e,.1)}}function cge(t){return t[0]}function cX(t){return t[t.length-1]}function uge(t,e){if(t.length<2)return{x:0,y:0};let r=t.length-1,n=null;const i=cX(t);for(;r>=0&&(n=t[r],!(i.timestamp-n.timestamp>Fp(e)));)r--;if(!n)return{x:0,y:0};const s=Gf(i.timestamp-n.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-n.x)/s,y:(i.y-n.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function dge(t,{min:e,max:r},n){return e!==void 0&&t<e?t=n?hc(e,t,n.min):Math.max(t,e):r!==void 0&&t>r&&(t=n?hc(r,t,n.max):Math.min(t,r)),t}function I7(t,e,r){return{min:e!==void 0?t.min+e:void 0,max:r!==void 0?t.max+r-(t.max-t.min):void 0}}function hge(t,{top:e,left:r,bottom:n,right:i}){return{x:I7(t.x,r,i),y:I7(t.y,e,n)}}function L7(t,e){let r=e.min-t.min,n=e.max-t.max;return e.max-e.min<t.max-t.min&&([r,n]=[n,r]),{min:r,max:n}}function fge(t,e){return{x:L7(t.x,e.x),y:L7(t.y,e.y)}}function Age(t,e){let r=.5;const n=ph(t),i=ph(e);return i>n?r=bE(e.min,e.max-n,t.min):n>i&&(r=bE(t.min,t.max-i,e.min)),Vm(0,1,r)}function mge(t,e){const r={};return e.min!==void 0&&(r.min=e.min-t.min),e.max!==void 0&&(r.max=e.max-t.min),r}const BB=.35;function pge(t=BB){return t===!1?t=0:t===!0&&(t=BB),{x:B7(t,"left","right"),y:B7(t,"top","bottom")}}function B7(t,e,r){return{min:P7(t,e),max:P7(t,r)}}function P7(t,e){return typeof t=="number"?t:t[e]||0}const gge=new WeakMap;class vge{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ou(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:r=!1,distanceThreshold:n}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=f=>{r?(this.stopAnimation(),this.snapToCursor(k2(f).point)):this.pauseAnimation()},o=(f,A)=>{this.stopAnimation();const{drag:p,dragPropagation:g,onDragStart:y}=this.getProps();if(p&&!g&&(this.openDragLock&&this.openDragLock(),this.openDragLock=nme(p),!this.openDragLock))return;this.latestPointerEvent=f,this.latestPanInfo=A,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),$f(w=>{let E=this.getAxisMotionValue(w).get()||0;if(Um.test(E)){const{projection:T}=this.visualElement;if(T&&T.layout){const C=T.layout.layoutBox[w];C&&(E=ph(C)*(parseFloat(E)/100))}}this.originPoint[w]=E}),y&&ul.postRender(()=>y(f,A)),SB(this.visualElement,"transform");const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},c=(f,A)=>{this.latestPointerEvent=f,this.latestPanInfo=A;const{dragPropagation:p,dragDirectionLock:g,onDirectionLock:y,onDrag:x}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:w}=A;if(g&&this.currentDirection===null){this.currentDirection=yge(w),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",A.point,w),this.updateAxis("y",A.point,w),this.visualElement.render(),x&&x(f,A)},u=(f,A)=>{this.latestPointerEvent=f,this.latestPanInfo=A,this.stop(f,A),this.latestPointerEvent=null,this.latestPanInfo=null},l=()=>$f(f=>this.getAnimationState(f)==="paused"&&this.getAxisMotionValue(f).animation?.play()),{dragSnapToOrigin:d}=this.getProps();this.panSession=new lX(e,{onSessionStart:s,onStart:o,onMove:c,onSessionEnd:u,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:n,contextWindow:oX(this.visualElement),element:this.visualElement.current})}stop(e,r){const n=e||this.latestPointerEvent,i=r||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!i||!n)return;const{velocity:o}=i;this.startAnimation(o);const{onDragEnd:c}=this.getProps();c&&ul.postRender(()=>c(n,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:r}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(e,r,n){const{drag:i}=this.getProps();if(!n||!D_(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(o=dge(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){const{dragConstraints:e,dragElastic:r}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;e&&fw(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&n?this.constraints=hge(n.layoutBox,e):this.constraints=!1,this.elastic=pge(r),i!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&$f(s=>{this.constraints!==!1&&this.getAxisMotionValue(s)&&(this.constraints[s]=mge(n.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:r}=this.getProps();if(!e||!fw(e))return!1;const n=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=wme(n,i.root,this.visualElement.getTransformPagePoint());let o=fge(i.layout.layoutBox,s);if(r){const c=r(yme(o));this.hasMutatedConstraints=!!c,c&&(o=kq(c))}return o}startAnimation(e){const{drag:r,dragMomentum:n,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:c}=this.getProps(),u=this.constraints||{},l=$f(d=>{if(!D_(d,r,this.currentDirection))return;let f=u&&u[d]||{};o&&(f={min:0,max:0});const A=i?200:1e6,p=i?40:1e7,g={type:"inertia",velocity:n?e[d]:0,bounceStiffness:A,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...s,...f};return this.startAxisValueAnimation(d,g)});return Promise.all(l).then(c)}startAxisValueAnimation(e,r){const n=this.getAxisMotionValue(e);return SB(this.visualElement,e),n.start(y3(e,n,0,r,this.visualElement,!1))}stopAnimation(){$f(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){$f(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const r=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),i=n[r];return i||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){$f(r=>{const{drag:n}=this.getProps();if(!D_(r,n,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(r);if(i&&i.layout){const{min:o,max:c}=i.layout.layoutBox[r],u=s.get()||0;s.set(e[r]-hc(o,c,.5)+u)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!fw(r)||!n||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};$f(o=>{const c=this.getAxisMotionValue(o);if(c&&this.constraints!==!1){const u=c.get();i[o]=Age({min:u,max:u},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),$f(o=>{if(!D_(o,e,null))return;const c=this.getAxisMotionValue(o),{min:u,max:l}=this.constraints[o];c.set(hc(u,l,i[o]))})}addListeners(){if(!this.visualElement.current)return;gge.set(this.visualElement,this);const e=this.visualElement.current,r=Ww(e,"pointerdown",u=>{const{drag:l,dragListener:d=!0}=this.getProps(),f=u.target,A=f!==e&&_q(f);l&&d&&!A&&this.start(u)}),n=()=>{const{dragConstraints:u}=this.getProps();fw(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",n);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),ul.read(n);const o=SE(window,"resize",()=>this.scalePositionWithinConstraints()),c=i.addEventListener("didUpdate",(({delta:u,hasLayoutChanged:l})=>{this.isDragging&&l&&($f(d=>{const f=this.getAxisMotionValue(d);f&&(this.originPoint[d]+=u[d].translate,f.set(f.get()+u[d].translate))}),this.visualElement.render())}));return()=>{o(),r(),s(),c&&c()}}getProps(){const e=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=BB,dragMomentum:c=!0}=e;return{...e,drag:r,dragDirectionLock:n,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:c}}}function D_(t,e,r){return(e===!0||e===t)&&(r===null||r===t)}function yge(t,e=10){let r=null;return Math.abs(t.y)>e?r="y":Math.abs(t.x)>e&&(r="x"),r}class xge extends $0{constructor(e){super(e),this.removeGroupControls=Yf,this.removeListeners=Yf,this.controls=new vge(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Yf}update(){const{dragControls:e}=this.node.getProps(),{dragControls:r}=this.node.prevProps||{};e!==r&&(this.removeGroupControls(),e&&(this.removeGroupControls=e.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}}const O7=t=>(e,r)=>{t&&ul.postRender(()=>t(e,r))};class bge extends $0{constructor(){super(...arguments),this.removePointerDownListener=Yf}onPointerDown(e){this.session=new lX(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:oX(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:r,onPan:n,onPanEnd:i}=this.node.getProps();return{onSessionStart:O7(e),onStart:O7(r),onMove:n,onEnd:(s,o)=>{delete this.session,i&&ul.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=Ww(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let sI=!1;class wge extends j.Component{componentDidMount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:n,layoutId:i}=this.props,{projection:s}=e;s&&(r.group&&r.group.add(s),n&&n.register&&i&&n.register(s),sI&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),YS.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:r,visualElement:n,drag:i,isPresent:s}=this.props,{projection:o}=n;return o&&(o.isPresent=s,e.layoutDependency!==r&&o.setOptions({...o.options,layoutDependency:r}),sI=!0,i||e.layoutDependency!==r||r===void 0||e.isPresent!==s?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||ul.postRender(()=>{const c=o.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),E3.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:i}=e;sI=!0,i&&(i.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(i),n&&n.deregister&&n.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function uX(t){const[e,r]=Zq(),n=j.useContext(t3);return a.jsx(wge,{...t,layoutGroup:n,switchLayoutGroup:j.useContext(sX),isPresent:e,safeToRemove:r})}const Ege={pan:{Feature:bge},drag:{Feature:xge,ProjectionNode:Xq,MeasureLayout:uX}};function R7(t,e,r){const{props:n}=t;t.animationState&&n.whileHover&&t.animationState.setActive("whileHover",r==="Start");const i="onHover"+r,s=n[i];s&&ul.postRender(()=>s(e,k2(e)))}class _ge extends $0{mount(){const{current:e}=this.node;e&&(this.unmount=ime(e,(r,n)=>(R7(this.node,n,"Start"),i=>R7(this.node,i,"End"))))}unmount(){}}class Sge extends $0{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=T2(SE(this.node.current,"focus",()=>this.onFocus()),SE(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function D7(t,e,r){const{props:n}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&n.whileTap&&t.animationState.setActive("whileTap",r==="Start");const i="onTap"+(r==="End"?"":r),s=n[i];s&&ul.postRender(()=>s(e,k2(e)))}class Tge extends $0{mount(){const{current:e}=this.node;e&&(this.unmount=ome(e,(r,n)=>(D7(this.node,n,"Start"),(i,{success:s})=>D7(this.node,i,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const PB=new WeakMap,aI=new WeakMap,Cge=t=>{const e=PB.get(t.target);e&&e(t)},jge=t=>{t.forEach(Cge)};function Nge({root:t,...e}){const r=t||document;aI.has(r)||aI.set(r,{});const n=aI.get(r),i=JSON.stringify(e);return n[i]||(n[i]=new IntersectionObserver(jge,{root:t,...e})),n[i]}function kge(t,e,r){const n=Nge(e);return PB.set(t,r),n.observe(t),()=>{PB.delete(t),n.unobserve(t)}}const Ige={some:0,all:1};class Lge extends $0{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:r,margin:n,amount:i="some",once:s}=e,o={root:r?r.current:void 0,rootMargin:n,threshold:typeof i=="number"?i:Ige[i]},c=u=>{const{isIntersecting:l}=u;if(this.isInView===l||(this.isInView=l,s&&!l&&this.hasEnteredView))return;l&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",l);const{onViewportEnter:d,onViewportLeave:f}=this.node.getProps(),A=l?d:f;A&&A(u)};return kge(this.node.current,o,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:r}=this.node;["amount","margin","root"].some(Bge(e,r))&&this.startObserver()}unmount(){}}function Bge({viewport:t={}},{viewport:e={}}={}){return r=>t[r]!==e[r]}const Pge={inView:{Feature:Lge},tap:{Feature:Tge},focus:{Feature:Sge},hover:{Feature:_ge}},Oge={layout:{ProjectionNode:Xq,MeasureLayout:uX}},Rge={...age,...Pge,...Ege,...Oge},Or=tge(Rge,rge);function dX(t){const e=S2(()=>ly(t)),{isStatic:r}=j.useContext(N2);if(r){const[,n]=j.useState(t);j.useEffect(()=>e.on("change",n),[])}return e}function hX(t,e){const r=dX(e()),n=()=>r.set(e());return n(),r3(()=>{const i=()=>ul.preRender(n,!1,!0),s=t.map(o=>o.on("change",i));return()=>{s.forEach(o=>o()),Gp(n)}}),r}function Dge(t){Kw.current=[],t();const e=hX(Kw.current,t);return Kw.current=void 0,e}function fX(t,e,r,n){if(typeof t=="function")return Dge(t);const s=typeof e=="function"?e:cme(e,r,n);return Array.isArray(t)?M7(t,s):M7([t],([o])=>s(o))}function M7(t,e){const r=S2(()=>[]);return hX(t,()=>{r.length=0;const n=t.length;for(let i=0;i<n;i++)r[i]=t[i].get();return e(r)})}function Mge(t,e={}){const{isStatic:r}=j.useContext(N2),n=()=>fd(t)?t.get():t;if(r)return fX(n);const i=dX(n());return j.useInsertionEffect(()=>ume(i,t,e),[i,JSON.stringify(e)]),i}function Fge(t,e={}){return Mge(t,{type:"spring",...e})}const F7=[{path:"/",label:"Home"},{path:"/live",label:"Live Events"},{path:"/services",label:"Services"},{path:"/work",label:"Our Work"},{path:"/content",label:"Athlete Content Order"},{path:"/proposal",label:"Free Analysis"},{path:"/contact",label:"Contact"}],Uge=()=>{const[t,e]=j.useState(!1),[r,n]=j.useState(!1),i=Ef();return j.useEffect(()=>{const s=()=>n(window.scrollY>20);return window.addEventListener("scroll",s),()=>window.removeEventListener("scroll",s)},[]),j.useEffect(()=>{e(!1)},[i]),a.jsxs("nav",{className:`fixed top-0 left-0 right-0 z-50 transition-all duration-300 ${r?"bg-dark-950/95 backdrop-blur-md border-b border-gray-800/50 shadow-lg":"bg-transparent"}`,children:[a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6",children:a.jsxs("div",{className:"flex items-center justify-between h-16 sm:h-20",children:[a.jsx(gs,{to:"/",className:"flex items-center gap-2 group",children:a.jsxs("span",{className:"text-xl sm:text-2xl font-black tracking-wider",children:[a.jsx("span",{className:"text-gradient",children:"FIT FOCUS"})," ",a.jsx("span",{className:"text-white group-hover:text-primary-400 transition-colors",children:"MEDIA"})]})}),a.jsxs("div",{className:"hidden md:flex items-center gap-1",children:[F7.map(s=>a.jsx(gs,{to:s.path,className:`px-4 py-2 rounded-lg text-sm font-semibold transition-all ${i.pathname===s.path?"text-primary-400 bg-primary-600/10":"text-gray-300 hover:text-white hover:bg-white/5"}`,children:s.label},s.path)),a.jsx(gs,{to:"/portal",className:"ml-2 px-4 py-2 text-sm font-semibold text-gray-400 hover:text-white hover:bg-white/5 rounded-lg transition-all",children:"Portal"}),a.jsx(gs,{to:"/proposal",className:"ml-1 px-5 py-2.5 bg-primary-600 hover:bg-primary-700 text-white font-bold rounded-lg text-sm transition-all hover:scale-105",children:"Get Started"})]}),a.jsx("button",{onClick:()=>e(!t),className:"md:hidden p-2 text-gray-300 hover:text-white",children:t?a.jsx(B0,{className:"w-6 h-6"}):a.jsx(bY,{className:"w-6 h-6"})})]})}),a.jsx(_0,{children:t&&a.jsx(Or.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"md:hidden bg-dark-950/98 backdrop-blur-md border-b border-gray-800",children:a.jsxs("div",{className:"px-4 py-4 space-y-1",children:[F7.map(s=>a.jsx(gs,{to:s.path,className:`block px-4 py-3 rounded-lg text-base font-semibold transition-all ${i.pathname===s.path?"text-primary-400 bg-primary-600/10":"text-gray-300 hover:text-white hover:bg-white/5"}`,children:s.label},s.path)),a.jsx(gs,{to:"/portal",className:"block px-4 py-3 rounded-lg text-base font-semibold text-gray-400 hover:text-white hover:bg-white/5 transition-all",children:"Portal"}),a.jsx(gs,{to:"/proposal",className:"block mt-3 px-4 py-3 bg-primary-600 hover:bg-primary-700 text-white font-bold rounded-lg text-center transition-all",children:"Get Your Free Analysis"})]})})})]})},$ge=()=>a.jsx("footer",{className:"bg-dark-950 border-t border-gray-800",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-12 sm:py-16",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8 sm:gap-12",children:[a.jsxs("div",{className:"md:col-span-2",children:[a.jsx(gs,{to:"/",className:"inline-block mb-4",children:a.jsxs("span",{className:"text-2xl font-black tracking-wider",children:[a.jsx("span",{className:"text-gradient",children:"FIT FOCUS"})," ",a.jsx("span",{className:"text-white",children:"MEDIA"})]})}),a.jsx("p",{className:"text-gray-400 text-sm leading-relaxed max-w-md mb-6",children:"Professional live production for combat sports. We produce your events at zero cost and help you unlock new revenue streams through PPV, content, and sponsorship opportunities."}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("a",{href:"https://instagram.com/fitfocusmedia",target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 bg-dark-800 hover:bg-primary-600/20 border border-gray-700 hover:border-primary-600 rounded-lg flex items-center justify-center transition-all",children:a.jsx(IN,{className:"w-5 h-5 text-gray-400 hover:text-primary-400"})}),a.jsx("a",{href:"https://youtube.com/@fitfocusmedia",target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 bg-dark-800 hover:bg-primary-600/20 border border-gray-700 hover:border-primary-600 rounded-lg flex items-center justify-center transition-all",children:a.jsx(jY,{className:"w-5 h-5 text-gray-400 hover:text-primary-400"})}),a.jsx("a",{href:"https://facebook.com/FitFocusMedia",target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 bg-dark-800 hover:bg-primary-600/20 border border-gray-700 hover:border-primary-600 rounded-lg flex items-center justify-center transition-all",children:a.jsx(w2,{className:"w-5 h-5 text-gray-400 hover:text-primary-400"})})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-white font-bold mb-4",children:"Quick Links"}),a.jsx("ul",{className:"space-y-2",children:[{to:"/services",label:"Services"},{to:"/work",label:"Our Work"},{to:"/proposal",label:"Free Analysis"},{to:"/contact",label:"Contact"},{to:"/privacy",label:"Privacy Policy"},{to:"/terms",label:"Terms of Service"}].map(t=>a.jsx("li",{children:a.jsx(gs,{to:t.to,className:"text-gray-400 hover:text-primary-400 text-sm transition-colors",children:t.label})},t.to))})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-white font-bold mb-4",children:"Contact"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("a",{href:"mailto:info@fitfocusmedia.com.au",className:"flex items-center gap-2 text-gray-400 hover:text-primary-400 text-sm transition-colors",children:[a.jsx(tu,{className:"w-4 h-4"}),"info@fitfocusmedia.com.au"]}),a.jsx("p",{className:"text-gray-500 text-xs",children:"Based in Queensland, Australia"}),a.jsx("p",{className:"text-gray-500 text-xs",children:"Servicing events Australia-wide + International"})]})]})]}),a.jsxs("div",{className:"mt-12 pt-6 border-t border-gray-800 flex flex-col sm:flex-row justify-between items-center gap-4",children:[a.jsxs("p",{className:"text-gray-500 text-xs",children:[" ",new Date().getFullYear()," Fit Focus Media. All rights reserved."]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-gray-600 text-xs",children:"Professional Combat Sports Production"}),a.jsxs("p",{className:"text-gray-700 text-[10px] mt-1",children:["v","260223.1927"]})]})]})]})}),Ts="/",oI=[`${Ts}images/hero/aggression-hero-1.jpg`,`${Ts}images/hero/aggression-hero-2.jpg`,`${Ts}images/hero/aggression-hero-3.jpg`,`${Ts}images/hero/wng1-hero-1.jpg`,`${Ts}images/hero/wng1-hero-2.jpg`],Pc={wng1:[{src:`${Ts}images/events/wng1/wng1-01226.jpg`,alt:"WNG1 Grappling Action",category:"events"},{src:`${Ts}images/events/wng1/wng1-01675.jpg`,alt:"WNG1 Competition",category:"events"},{src:`${Ts}images/events/wng1/wng1-02953.jpg`,alt:"WNG1 Match",category:"events"},{src:`${Ts}images/events/wng1/wng1-05237.jpg`,alt:"WNG1 Event Atmosphere",category:"events"},{src:`${Ts}images/events/wng1/wng1-02527.jpg`,alt:"WNG1 Action Shot",category:"events"},{src:`${Ts}images/events/wng1/wng1-01588.jpg`,alt:"WNG1 Grappling",category:"events"}],wng2:[{src:`${Ts}images/events/wng2/wng2-09820.jpg`,alt:"WNG2 Competition",category:"events"},{src:`${Ts}images/events/wng2/wng2-08613.jpg`,alt:"WNG2 Grappling Action",category:"events"},{src:`${Ts}images/events/wng2/wng2-01906.jpg`,alt:"WNG2 Match",category:"events"},{src:`${Ts}images/events/wng2/wng2-09420.jpg`,alt:"WNG2 Event",category:"events"},{src:`${Ts}images/events/wng2/wng2-07770.jpg`,alt:"WNG2 Action",category:"events"},{src:`${Ts}images/events/wng2/wng2-09170.jpg`,alt:"WNG2 Competition",category:"events"}],aggression:[{src:`${Ts}images/events/aggression/aggression-06388.jpg`,alt:"Aggression Muay Thai Fight",category:"events"},{src:`${Ts}images/events/aggression/aggression-06742.jpg`,alt:"Aggression Ring Action",category:"events"},{src:`${Ts}images/events/aggression/aggression-06140.jpg`,alt:"Aggression Muay Thai",category:"events"},{src:`${Ts}images/events/aggression/aggression-05876.jpg`,alt:"Aggression Fight Night",category:"events"},{src:`${Ts}images/events/aggression/aggression-06843.jpg`,alt:"Aggression MT Event",category:"events"}],athletes:[{src:`${Ts}images/athletes/wng1-promo/athlete-00666.jpg`,alt:"Athlete Promo - WNG1",category:"athletes"},{src:`${Ts}images/athletes/wng1-promo/athlete-00559.jpg`,alt:"Fighter Portrait",category:"athletes"},{src:`${Ts}images/athletes/wng1-promo/athlete-00669.jpg`,alt:"Athlete Promo Shot",category:"athletes"},{src:`${Ts}images/athletes/wng1-promo/athlete-00601.jpg`,alt:"Fighter Promo",category:"athletes"},{src:`${Ts}images/athletes/wng1-promo/athlete-00692.jpg`,alt:"WNG1 Fighter",category:"athletes"},{src:`${Ts}images/athletes/wng1-promo/athlete-00485.jpg`,alt:"Athlete Portrait",category:"athletes"},{src:`${Ts}images/athletes/wng2-promo/athlete-06134.jpg`,alt:"WNG2 Athlete Promo",category:"athletes"},{src:`${Ts}images/athletes/wng2-promo/athlete-06092.jpg`,alt:"WNG2 Fighter Portrait",category:"athletes"},{src:`${Ts}images/athletes/wng2-promo/athlete-05913.jpg`,alt:"WNG2 Promo Shot",category:"athletes"},{src:`${Ts}images/athletes/wng2-promo/athlete-06067.jpg`,alt:"WNG2 Athlete",category:"athletes"},{src:`${Ts}images/athletes/wng2-promo/athlete-06031.jpg`,alt:"Fighter Promo WNG2",category:"athletes"},{src:`${Ts}images/athletes/wng2-promo/athlete-05884.jpg`,alt:"WNG2 Fighter",category:"athletes"},{src:`${Ts}images/athletes/headshots/headshot-00670.jpg`,alt:"Professional Headshot",category:"athletes"},{src:`${Ts}images/athletes/headshots/headshot-00667.jpg`,alt:"Gi Headshot",category:"athletes"},{src:`${Ts}images/athletes/headshots/headshot-00669.jpg`,alt:"Athlete Headshot",category:"athletes"},{src:`${Ts}images/athletes/headshots/headshot-00678.jpg`,alt:"BJJ Headshot",category:"athletes"}],gym:[{src:`${Ts}images/gym/bjj/bjj-08397.jpg`,alt:"One Purpose BJJ Training",category:"promo"},{src:`${Ts}images/gym/bjj/bjj-08410.jpg`,alt:"BJJ Class",category:"promo"},{src:`${Ts}images/gym/bjj/bjj-08478.jpg`,alt:"BJJ Training Environment",category:"promo"},{src:`${Ts}images/gym/bjj/bjj-08390.jpg`,alt:"One Purpose BJJ",category:"promo"},{src:`${Ts}images/gym/bjj/bjj-08467.jpg`,alt:"BJJ Rolling",category:"promo"},{src:`${Ts}images/gym/stuart/stuart-06855.jpg`,alt:"Fight House Industries",category:"promo"},{src:`${Ts}images/gym/stuart/stuart-07156.jpg`,alt:"Fight House Training",category:"promo"},{src:`${Ts}images/gym/stuart/stuart-04954.jpg`,alt:"Gym Environment",category:"promo"},{src:`${Ts}images/gym/stuart/stuart-07504.jpg`,alt:"Class Photos",category:"promo"},{src:`${Ts}images/gym/stuart/stuart-07260.jpg`,alt:"Training Session",category:"promo"}]},U7=[...Pc.wng1,...Pc.wng2,...Pc.aggression,...Pc.athletes,...Pc.gym],Hge=[Pc.aggression[0],Pc.wng1[0],Pc.athletes[0],Pc.wng2[0],Pc.gym[0],Pc.wng1[2],Pc.athletes[6],Pc.aggression[3]],Qge=[{id:"wng1",name:"Who's Next Grappling",shortName:"WNG1",description:"Professional grappling event coverage with multi-camera production and athlete promo shoots.",images:Pc.wng1,tags:["Event","Grappling","Live Production"]},{id:"wng2",name:"Who's Next Grappling 2",shortName:"WNG2",description:"Second edition of WNG featuring expanded coverage, athlete content packages, and PPV streaming.",images:Pc.wng2,tags:["Event","Grappling","PPV"]},{id:"aggression",name:"Aggression Muay Thai",shortName:"Aggression MT",description:"High-energy Muay Thai fight night with dramatic ring-side photography and broadcast production.",images:Pc.aggression,tags:["Event","Muay Thai","Fight Night"]},{id:"athletes",name:"Athlete Promo Shoots",shortName:"Athletes",description:"Professional athlete portraits and promotional imagery for fighters across multiple events.",images:Pc.athletes,tags:["Athletes","Portraits","Promo"]},{id:"gym",name:"Gym & Training",shortName:"Gym/Training",description:"Training environment photography for gyms including One Purpose BJJ and Fight House Industries.",images:Pc.gym,tags:["Gym","Training","Content"]}],Vge=()=>{const[t,e]=j.useState(0);return j.useEffect(()=>{const r=setInterval(()=>{e(n=>(n+1)%oI.length)},5e3);return()=>clearInterval(r)},[]),a.jsxs("div",{children:[a.jsxs("section",{className:"relative min-h-screen flex items-center justify-center overflow-hidden",children:[oI.map((r,n)=>a.jsx("div",{className:"absolute inset-0 transition-opacity duration-1000",style:{opacity:n===t?1:0},children:a.jsx("img",{src:r,alt:"",className:"w-full h-full object-cover",loading:n===0?"eager":"lazy"})},r)),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-dark-950/70 via-dark-950/60 to-dark-950/90"}),a.jsxs("div",{className:"relative z-10 text-center px-4 sm:px-6 max-w-6xl mx-auto py-20",children:[a.jsxs(Or.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8},children:[a.jsxs(Or.h1,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.2,duration:.6},className:"text-5xl sm:text-6xl md:text-8xl font-black mb-6 leading-tight",children:[a.jsx("span",{className:"text-gradient",children:"FIT FOCUS"}),a.jsx("br",{}),a.jsx("span",{className:"text-white",children:"MEDIA"})]}),a.jsxs(Or.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6,duration:.8},children:[a.jsx("p",{className:"text-xl sm:text-2xl md:text-3xl text-gray-200 mb-4 max-w-3xl mx-auto font-semibold",children:"Professional Live Production for Combat Sports"}),a.jsx("p",{className:"text-lg sm:text-xl text-gray-400 mb-10 max-w-2xl mx-auto",children:"Zero-cost production  You earn revenue from PPV  Professional broadcast quality"})]}),a.jsxs(Or.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1,duration:.6},className:"flex flex-col sm:flex-row gap-4 justify-center",children:[a.jsxs(gs,{to:"/proposal",className:"group px-8 py-4 bg-primary-600 hover:bg-primary-700 text-white font-black rounded-lg text-lg transition-all hover:scale-105 card-glow inline-flex items-center justify-center gap-3",children:["Get Your Free Analysis",a.jsx(Rh,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]}),a.jsx(gs,{to:"/work",className:"px-8 py-4 bg-white/10 hover:bg-white/20 backdrop-blur-sm text-white font-bold rounded-lg text-lg transition-all border border-white/20 hover:border-white/40 inline-flex items-center justify-center gap-3",children:"View Our Work"}),a.jsx(gs,{to:"/book",className:"px-8 py-4 bg-accent-600 hover:bg-accent-700 text-white font-bold rounded-lg text-lg transition-all inline-flex items-center justify-center gap-3 hover:scale-105",children:" Book a Call"})]})]}),a.jsx("div",{className:"absolute bottom-8 left-1/2 -translate-x-1/2 flex gap-2",children:oI.map((r,n)=>a.jsx("button",{onClick:()=>e(n),className:`w-2 h-2 rounded-full transition-all ${n===t?"bg-primary-500 w-6":"bg-white/40 hover:bg-white/60"}`},n))})]})]}),a.jsx("section",{className:"bg-dark-900 border-y border-gray-800",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-8 sm:py-12",children:a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-6 sm:gap-8",children:[{icon:kN,value:"25+",label:"Live Events Covered"},{icon:E2,value:"4",label:"Countries Worldwide"},{icon:$h,value:"50K+",label:"Viewers Reached"},{icon:$A,value:"100%",label:"Client Satisfaction"}].map((r,n)=>a.jsxs(Or.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:n*.1},className:"text-center",children:[a.jsx(r.icon,{className:"w-6 h-6 sm:w-8 sm:h-8 text-primary-500 mx-auto mb-2"}),a.jsx("p",{className:"text-2xl sm:text-3xl md:text-4xl font-black text-primary-500",children:r.value}),a.jsx("p",{className:"text-xs sm:text-sm text-gray-400 mt-1",children:r.label})]},n))})})}),a.jsx("section",{className:"py-16 sm:py-24 px-4 sm:px-6",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs(Or.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"text-center mb-12 sm:mb-16",children:[a.jsx("h2",{className:"text-3xl sm:text-4xl md:text-5xl font-black mb-4",children:a.jsx("span",{className:"text-gradient",children:"What We Do"})}),a.jsx("p",{className:"text-lg sm:text-xl text-gray-400 max-w-2xl mx-auto",children:"End-to-end media production designed specifically for combat sports promotions"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 sm:gap-8",children:[{icon:yh,title:"Live Streaming & PPV",description:"Professional multi-camera broadcast production with PPV platform setup and management. We handle the tech  you focus on the event.",features:["Multi-camera production","PPV platform management","Live graphics & overlays","Instant replay capability"]},{icon:gE,title:"Event Photography",description:"Ring-side action shots, athlete portraits, crowd atmosphere, and winners ceremony  delivered as a complete digital gallery.",features:["Full event coverage","Action photography","Athlete portraits","Same-week delivery"]},{icon:qf,title:"Content Production",description:"Social media highlights, fight recaps, promotional content, and ongoing content strategy to grow your audience between events.",features:["Social media clips","Highlight reels","Fighter promo content","Content strategy"]}].map((r,n)=>a.jsxs(Or.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:n*.15},className:"bg-dark-800 border border-gray-700 rounded-xl p-6 sm:p-8 hover:border-primary-600/50 transition-all hover-lift group",children:[a.jsx("div",{className:"w-14 h-14 bg-primary-600/20 rounded-xl flex items-center justify-center mb-6 group-hover:bg-primary-600/30 transition-colors",children:a.jsx(r.icon,{className:"w-7 h-7 text-primary-500"})}),a.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-3",children:r.title}),a.jsx("p",{className:"text-gray-400 text-sm sm:text-base mb-4 leading-relaxed",children:r.description}),a.jsx("ul",{className:"space-y-2",children:r.features.map((i,s)=>a.jsxs("li",{className:"flex items-center gap-2 text-sm text-gray-300",children:[a.jsx("div",{className:"w-1.5 h-1.5 bg-primary-500 rounded-full"}),i]},s))})]},n))}),a.jsx("div",{className:"text-center mt-10",children:a.jsxs(gs,{to:"/services",className:"inline-flex items-center gap-2 text-primary-400 hover:text-primary-300 font-semibold transition-colors",children:["View All Services ",a.jsx(Rh,{className:"w-4 h-4"})]})})]})}),a.jsx("section",{className:"py-16 sm:py-24 px-4 sm:px-6 bg-dark-900/50",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs(Or.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"text-center mb-12 sm:mb-16",children:[a.jsx("h2",{className:"text-3xl sm:text-4xl md:text-5xl font-black mb-4",children:a.jsx("span",{className:"text-gradient",children:"Featured Work"})}),a.jsx("p",{className:"text-lg sm:text-xl text-gray-400 max-w-2xl mx-auto",children:"From ring-side action to athlete promo shoots  see what professional media coverage looks like"})]}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 sm:gap-4",children:Hge.map((r,n)=>a.jsxs(Or.div,{initial:{opacity:0,scale:.95},whileInView:{opacity:1,scale:1},viewport:{once:!0},transition:{delay:n*.05},className:`gallery-item rounded-xl overflow-hidden cursor-pointer ${n===0||n===3?"md:row-span-2":""}`,children:[a.jsx("img",{src:r.src,alt:r.alt,className:"w-full h-full object-cover min-h-[200px]",loading:"lazy"}),a.jsx("div",{className:"overlay flex items-end p-4",children:a.jsx("p",{className:"text-white text-sm font-semibold",children:r.alt})})]},n))}),a.jsx("div",{className:"text-center mt-10",children:a.jsxs(gs,{to:"/work",className:"inline-flex items-center gap-2 px-6 py-3 bg-primary-600 hover:bg-primary-700 text-white font-bold rounded-lg transition-all hover:scale-105",children:["View Full Portfolio ",a.jsx(Rh,{className:"w-4 h-4"})]})})]})}),a.jsx("section",{className:"py-16 sm:py-24 px-4 sm:px-6",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs(Or.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"text-center mb-12 sm:mb-16",children:[a.jsx("h2",{className:"text-3xl sm:text-4xl md:text-5xl font-black mb-4",children:a.jsx("span",{className:"text-gradient",children:"How It Works"})}),a.jsx("p",{className:"text-lg sm:text-xl text-gray-400 max-w-2xl mx-auto",children:"Professional production at zero cost. Here's our model."})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 max-w-5xl mx-auto",children:[{step:"01",title:"We Produce Your Event",description:"Full professional multi-camera production, live switching, graphics, and streaming setup  completely handled by our team.",color:"from-primary-600 to-orange-600"},{step:"02",title:"Fans Purchase PPV",description:"Your audience buys PPV access at $20-30. We handle the platform, payment processing, and viewer experience.",color:"from-orange-600 to-amber-600"},{step:"03",title:"You Earn Revenue",description:"You receive a share of every PPV sale. Zero upfront cost, zero risk  just new revenue from viewers you weren't reaching before.",color:"from-amber-600 to-green-600"}].map((r,n)=>a.jsxs(Or.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:n*.2},className:"text-center",children:[a.jsx("div",{className:`inline-flex items-center justify-center w-20 h-20 rounded-2xl bg-gradient-to-br ${r.color} mb-6`,children:a.jsx("span",{className:"text-3xl font-black text-white",children:r.step})}),a.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-3",children:r.title}),a.jsx("p",{className:"text-gray-400 text-sm sm:text-base leading-relaxed",children:r.description})]},n))}),a.jsx(Or.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"mt-12 sm:mt-16 max-w-3xl mx-auto",children:a.jsxs("div",{className:"bg-gradient-to-r from-green-900/30 to-emerald-900/30 border-2 border-green-600/50 rounded-xl p-6 sm:p-8 text-center",children:[a.jsx(_f,{className:"w-10 h-10 text-green-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-2xl sm:text-3xl font-black text-white mb-3",children:"Your Cost: $0"}),a.jsx("p",{className:"text-gray-300 text-sm sm:text-base leading-relaxed max-w-xl mx-auto",children:"We cover all production costs. You pay nothing upfront. You earn revenue from PPV sales that you weren't making before. It's literally free money + professional coverage."})]})})]})}),a.jsx("section",{className:"py-16 sm:py-24 px-4 sm:px-6 bg-dark-900/50",children:a.jsx("div",{className:"max-w-4xl mx-auto text-center",children:a.jsxs(Or.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},children:[a.jsx("div",{className:"flex justify-center mb-6",children:[1,2,3,4,5].map(r=>a.jsx("svg",{className:"w-6 h-6 sm:w-8 sm:h-8 text-amber-500",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},r))}),a.jsx("blockquote",{className:"text-xl sm:text-2xl md:text-3xl text-gray-200 font-semibold italic mb-6 leading-relaxed",children:'"Professional coverage, quick turnaround on highlights, and our sponsors loved the exposure. The zero-cost model meant we could invest in growing other areas of our event."'}),a.jsx("p",{className:"text-gray-500 text-sm sm:text-base",children:" Combat Sports Promoter, QLD"})]})})}),a.jsx("section",{className:"py-16 sm:py-24 px-4 sm:px-6",children:a.jsx("div",{className:"max-w-4xl mx-auto text-center",children:a.jsxs(Or.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},children:[a.jsxs("h2",{className:"text-3xl sm:text-4xl md:text-5xl font-black mb-6",children:["Ready to ",a.jsx("span",{className:"text-gradient",children:"Elevate Your Event?"})]}),a.jsx("p",{className:"text-lg sm:text-xl text-gray-400 mb-8 max-w-2xl mx-auto",children:"Get a free analysis of your organization and see exactly how much revenue professional media coverage could generate. Zero commitment."}),a.jsxs(gs,{to:"/proposal",className:"group inline-flex items-center gap-3 px-10 py-5 bg-primary-600 hover:bg-primary-700 text-white font-black rounded-lg text-xl transition-all hover:scale-105 card-glow",children:["Get Your Free Analysis",a.jsx(Rh,{className:"w-6 h-6 group-hover:translate-x-1 transition-transform"})]}),a.jsx("p",{className:"text-sm text-gray-500 mt-4",children:"Takes 2 minutes  No commitment required"})]})})})]})},zge=[{id:"livestream",icon:yh,title:"Live Stream & PPV Production",tagline:"Broadcast-quality live production at zero cost",description:"We handle everything  from multi-camera setup and live switching to PPV platform management and viewer experience. Your audience gets a professional broadcast; you get revenue.",image:Pc.wng1[0].src,features:["Professional multi-camera production (1-4 cameras)","PTZ cameras for dynamic angles","Live switching and production","Custom broadcast graphics and overlays","Instant replay capability","PPV platform setup and management","Payment processing and viewer analytics","Full show recording for VOD"],highlight:"Zero upfront cost  we earn from production, you earn from PPV revenue share."},{id:"photography",icon:gE,title:"Event Photography & Videography",tagline:"Every moment captured in stunning detail",description:"Dedicated ring-side photographers capturing the intensity of every fight, the emotion of every victory, and the atmosphere of your entire event. Delivered as a complete digital gallery.",image:Pc.aggression[0].src,features:["Full event coverage from doors to finish","Ring-side action photography","Athlete portraits and walk-outs","Winners and awards ceremony","Crowd and atmosphere shots","Behind-the-scenes content","Complete digital gallery delivery","Same-week turnaround"],highlight:"Professional photography that athletes share, sponsors love, and audiences remember."},{id:"content",icon:qf,title:"Content Packages",tagline:"Social media content that grows your audience",description:"From event highlight reels to fighter promo clips, we create content designed for maximum reach. Short-form vertical edits for Reels/TikTok, YouTube-ready highlights, and everything in between.",image:Pc.athletes[0].src,features:["5-10 social media clips per event","Event highlight reel (3-5 minutes)","Short-form vertical edits (Reels/TikTok)","Individual fight/match recordings","Fighter promo content","Custom fight banner graphics","Same-day highlight delivery","YouTube-ready formats"],highlight:"Content that keeps your promotion visible 365 days a year  not just on event night."},{id:"strategy",icon:TY,title:"Ongoing Content Strategy",tagline:"Build a media empire around your promotion",description:"Monthly content calendars, audience growth strategy, between-event content creation, and analytics-driven optimization. We become your dedicated media team.",image:Pc.gym[5].src,features:["Monthly content calendar","Audience growth strategy","Between-event content creation","Analytics and performance tracking","Platform optimization (IG, YouTube, TikTok)","Dedicated account manager","Sponsor integration strategy","Quarterly performance reviews"],highlight:"From promoter to media brand  we help you build an audience that sells out every event."}],Kge=()=>a.jsxs("div",{className:"pt-20 sm:pt-24",children:[a.jsx("section",{className:"py-12 sm:py-20 px-4 sm:px-6",children:a.jsx("div",{className:"max-w-7xl mx-auto text-center",children:a.jsxs(Or.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[a.jsx("h1",{className:"text-4xl sm:text-5xl md:text-6xl font-black mb-6",children:a.jsx("span",{className:"text-gradient",children:"Our Services"})}),a.jsx("p",{className:"text-lg sm:text-xl text-gray-400 max-w-3xl mx-auto mb-8",children:"End-to-end media production built specifically for combat sports. From live broadcast to athlete content  we've got every angle covered."}),a.jsxs("div",{className:"inline-flex items-center gap-2 bg-green-900/30 border border-green-600/50 px-5 py-3 rounded-full",children:[a.jsx(xE,{className:"w-5 h-5 text-green-400"}),a.jsx("span",{className:"text-green-300 font-semibold text-sm sm:text-base",children:"Live stream production available at zero cost"})]})]})})}),zge.map((t,e)=>a.jsx("section",{className:`py-12 sm:py-20 px-4 sm:px-6 ${e%2===1?"bg-dark-900/50":""}`,children:a.jsx("div",{className:"max-w-7xl mx-auto",children:a.jsxs("div",{className:`grid grid-cols-1 lg:grid-cols-2 gap-8 sm:gap-12 items-center ${e%2===1?"lg:flex-row-reverse":""}`,children:[a.jsx(Or.div,{initial:{opacity:0,x:e%2===0?-30:30},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.6},className:`${e%2===1?"lg:order-2":""}`,children:a.jsx("div",{className:"rounded-xl overflow-hidden border border-gray-700",children:a.jsx("img",{src:t.image,alt:t.title,className:"w-full h-[300px] sm:h-[400px] object-cover",loading:"lazy"})})}),a.jsxs(Or.div,{initial:{opacity:0,x:e%2===0?30:-30},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.6},className:`${e%2===1?"lg:order-1":""}`,children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:"w-12 h-12 bg-primary-600/20 rounded-xl flex items-center justify-center",children:a.jsx(t.icon,{className:"w-6 h-6 text-primary-500"})}),a.jsx("span",{className:"text-primary-400 text-sm font-bold uppercase tracking-wider",children:t.tagline})]}),a.jsx("h2",{className:"text-3xl sm:text-4xl font-black text-white mb-4",children:t.title}),a.jsx("p",{className:"text-gray-400 text-base sm:text-lg mb-6 leading-relaxed",children:t.description}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 mb-6",children:t.features.map((r,n)=>a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(_o,{className:"w-4 h-4 text-green-400 flex-shrink-0 mt-1"}),a.jsx("span",{className:"text-gray-300 text-sm",children:r})]},n))}),a.jsx("div",{className:"p-4 bg-primary-600/10 border border-primary-600/30 rounded-lg mb-6",children:a.jsxs("p",{className:"text-primary-300 text-sm font-semibold",children:[" ",t.highlight]})})]})]})})},t.id)),a.jsx("section",{className:"py-16 sm:py-24 px-4 sm:px-6 bg-dark-900/50",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs(Or.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"text-center mb-12 sm:mb-16",children:[a.jsx("h2",{className:"text-3xl sm:text-4xl md:text-5xl font-black mb-4",children:a.jsx("span",{className:"text-gradient",children:"Tailored Packages"})}),a.jsx("p",{className:"text-lg sm:text-xl text-gray-400 max-w-2xl mx-auto",children:"Every promotion is different. Our proposal tool analyzes your organization and recommends the perfect package."})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 sm:gap-8 max-w-5xl mx-auto",children:[{name:"Essentials",range:"$1,500 - $2,500",desc:"Core add-ons on top of free production",features:["Free live stream production","Fight recordings","Social media clips","Custom graphics"]},{name:"Professional",range:"$3,000 - $4,000",desc:"Everything you need to level up",features:["Everything in Essentials","Event photography","Premium camera setup","Highlight reels"],popular:!0},{name:"Broadcast",range:"$4,500 - $6,500",desc:"Full media partnership",features:["Everything in Professional","Ongoing content strategy","Dedicated account manager","Priority scheduling"]}].map((t,e)=>a.jsxs(Or.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:e*.15},className:`bg-dark-800 border-2 rounded-xl p-6 sm:p-8 relative ${t.popular?"border-primary-600 card-glow":"border-gray-700"}`,children:[t.popular&&a.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2",children:a.jsx("span",{className:"bg-primary-600 text-white text-xs font-bold px-4 py-1 rounded-full",children:"MOST POPULAR"})}),a.jsx("h3",{className:"text-2xl font-black text-white mb-2",children:t.name}),a.jsx("p",{className:"text-primary-400 font-bold text-lg mb-2",children:t.range}),a.jsx("p",{className:"text-gray-500 text-sm mb-6",children:t.desc}),a.jsx("ul",{className:"space-y-3 mb-6",children:t.features.map((r,n)=>a.jsxs("li",{className:"flex items-start gap-2 text-sm text-gray-300",children:[a.jsx(_o,{className:"w-4 h-4 text-green-400 flex-shrink-0 mt-0.5"}),r]},n))})]},e))}),a.jsxs("div",{className:"text-center mt-10",children:[a.jsxs(gs,{to:"/proposal",className:"group inline-flex items-center gap-3 px-8 py-4 bg-primary-600 hover:bg-primary-700 text-white font-black rounded-lg text-lg transition-all hover:scale-105 card-glow",children:["Get Your Custom Package",a.jsx(Rh,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]}),a.jsx("p",{className:"text-gray-500 text-sm mt-3",children:"Our proposal tool will recommend the perfect package for your organization"})]})]})})]}),Gge=[{id:"all",label:"All"},{id:"events",label:"Events"},{id:"athletes",label:"Athletes"},{id:"promo",label:"Promo"}],Wge=()=>{const[t,e]=j.useState("all"),[r,n]=j.useState(null),[i,s]=j.useState(null),[o,c]=j.useState(0),[u,l]=j.useState([]),d=t==="all"?U7:U7.filter(y=>y.category===t),f=(y,x)=>{l(y),c(x),s(y[x])},A=()=>{s(null),l([])},p=()=>{const y=(o+1)%u.length;c(y),s(u[y])},g=()=>{const y=(o-1+u.length)%u.length;c(y),s(u[y])};return a.jsxs("div",{className:"pt-20 sm:pt-24",children:[a.jsx("section",{className:"py-12 sm:py-20 px-4 sm:px-6",children:a.jsx("div",{className:"max-w-7xl mx-auto text-center",children:a.jsxs(Or.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[a.jsx("h1",{className:"text-4xl sm:text-5xl md:text-6xl font-black mb-6",children:a.jsx("span",{className:"text-gradient",children:"Our Work"})}),a.jsx("p",{className:"text-lg sm:text-xl text-gray-400 max-w-3xl mx-auto",children:"From grappling events to Muay Thai fight nights, athlete promo shoots to gym content  see how we capture the intensity of combat sports."})]})})}),a.jsx("section",{className:"py-8 sm:py-12 px-4 sm:px-6",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsx("h2",{className:"text-2xl sm:text-3xl font-black text-white mb-8",children:"Projects"}),a.jsx("div",{className:"space-y-6",children:Qge.map((y,x)=>a.jsxs(Or.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:x*.1},className:"bg-dark-800 border border-gray-700 rounded-xl overflow-hidden",children:[a.jsxs("button",{onClick:()=>n(r===y.id?null:y.id),className:"w-full flex flex-col sm:flex-row items-start sm:items-center gap-4 p-5 sm:p-6 text-left hover:bg-dark-900/30 transition-colors",children:[a.jsx("div",{className:"w-full sm:w-24 h-32 sm:h-24 rounded-lg overflow-hidden flex-shrink-0",children:a.jsx("img",{src:y.images[0].src,alt:y.name,className:"w-full h-full object-cover",loading:"lazy"})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("h3",{className:"text-lg sm:text-xl font-bold text-white",children:y.name}),a.jsxs("span",{className:"text-xs bg-primary-600/20 text-primary-400 px-2 py-1 rounded-full font-semibold",children:[y.images.length," photos"]})]}),a.jsx("p",{className:"text-gray-400 text-sm mb-2",children:y.description}),a.jsx("div",{className:"flex gap-2",children:y.tags.map(w=>a.jsx("span",{className:"text-xs bg-dark-900 text-gray-400 px-2 py-1 rounded border border-gray-700",children:w},w))})]}),a.jsx("div",{className:"text-primary-400",children:a.jsx(Or.div,{animate:{rotate:r===y.id?90:0},transition:{duration:.2},children:a.jsx(Rh,{className:"w-5 h-5"})})})]}),a.jsx(_0,{children:r===y.id&&a.jsx(Or.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"overflow-hidden",children:a.jsx("div",{className:"px-5 sm:px-6 pb-6 border-t border-gray-700 pt-4",children:a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:y.images.map((w,E)=>a.jsxs("div",{onClick:()=>f(y.images,E),className:"gallery-item rounded-lg overflow-hidden cursor-pointer aspect-[4/3]",children:[a.jsx("img",{src:w.src,alt:w.alt,className:"w-full h-full object-cover",loading:"lazy"}),a.jsx("div",{className:"overlay"})]},E))})})})})]},y.id))})]})}),a.jsx("section",{className:"py-12 sm:py-20 px-4 sm:px-6 bg-dark-900/50",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-8",children:[a.jsx("h2",{className:"text-2xl sm:text-3xl font-black text-white",children:"Full Gallery"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(vY,{className:"w-4 h-4 text-gray-500"}),Gge.map(y=>a.jsx("button",{onClick:()=>e(y.id),className:`px-4 py-2 rounded-lg text-sm font-semibold transition-all ${t===y.id?"bg-primary-600 text-white":"bg-dark-800 text-gray-400 hover:text-white border border-gray-700"}`,children:y.label},y.id))]})]}),a.jsx(Or.div,{layout:!0,className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 sm:gap-4",children:a.jsx(_0,{mode:"popLayout",children:d.map((y,x)=>a.jsxs(Or.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.3},onClick:()=>f(d,x),className:"gallery-item rounded-lg overflow-hidden cursor-pointer aspect-[4/3]",children:[a.jsx("img",{src:y.src,alt:y.alt,className:"w-full h-full object-cover",loading:"lazy"}),a.jsx("div",{className:"overlay flex items-end p-3",children:a.jsx("p",{className:"text-white text-xs font-semibold",children:y.alt})})]},y.src))})})]})}),a.jsx("section",{className:"py-16 sm:py-24 px-4 sm:px-6",children:a.jsx("div",{className:"max-w-4xl mx-auto text-center",children:a.jsxs(Or.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},children:[a.jsxs("h2",{className:"text-3xl sm:text-4xl font-black mb-4",children:["Want This for ",a.jsx("span",{className:"text-gradient",children:"Your Event?"})]}),a.jsx("p",{className:"text-gray-400 text-lg mb-8",children:"Get professional media coverage at zero cost. See what we can do for your promotion."}),a.jsxs(gs,{to:"/proposal",className:"group inline-flex items-center gap-3 px-8 py-4 bg-primary-600 hover:bg-primary-700 text-white font-black rounded-lg text-lg transition-all hover:scale-105 card-glow",children:["Get Your Free Analysis",a.jsx(Rh,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]})]})})}),a.jsx(_0,{children:i&&a.jsxs(Or.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"lightbox-backdrop",onClick:A,children:[a.jsx("button",{onClick:A,className:"absolute top-4 right-4 z-10 p-2 bg-black/50 rounded-full text-white hover:bg-black/80 transition-colors",children:a.jsx(B0,{className:"w-6 h-6"})}),u.length>1&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:y=>{y.stopPropagation(),g()},className:"absolute left-4 z-10 p-3 bg-black/50 rounded-full text-white hover:bg-black/80 transition-colors",children:a.jsx(oB,{className:"w-6 h-6"})}),a.jsx("button",{onClick:y=>{y.stopPropagation(),p()},className:"absolute right-4 z-10 p-3 bg-black/50 rounded-full text-white hover:bg-black/80 transition-colors",children:a.jsx(Cb,{className:"w-6 h-6"})})]}),a.jsx("img",{src:i.src,alt:i.alt,className:"max-w-[90vw] max-h-[90vh] object-contain",onClick:y=>y.stopPropagation()}),a.jsxs("div",{className:"absolute bottom-4 text-center text-white text-sm",children:[i.alt,"  ",o+1," / ",u.length]})]})})]})},M_=[{num:1,label:"Welcome"},{num:2,label:"Your Organization"},{num:3,label:"Analysis"},{num:4,label:"Get Proposal"},{num:5,label:"Your Proposal"}],Yge=({currentStep:t,totalSteps:e,goToStep:r})=>{const n=i=>i<t;return a.jsx("nav",{className:"sticky top-0 z-50 bg-dark-900/95 backdrop-blur-sm border-b border-gray-800",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-4",children:[a.jsxs("div",{className:"md:hidden",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsxs("span",{className:"text-sm font-semibold text-gray-300",children:["Step ",t," of ",e]}),a.jsx("span",{className:"text-xs text-gray-400",children:M_[Math.min(t-1,M_.length-1)]?.label})]}),a.jsx("div",{className:"h-2 bg-dark-800 rounded-full overflow-hidden",children:a.jsx(Or.div,{className:"h-full bg-gradient-to-r from-primary-500 to-orange-500",initial:{width:0},animate:{width:`${t/e*100}%`},transition:{duration:.3}})})]}),a.jsx("div",{className:"hidden md:flex items-center justify-between",children:M_.map((i,s)=>a.jsxs("div",{className:"flex items-center flex-1",children:[a.jsxs("button",{onClick:()=>n(i.num)&&r(i.num),disabled:!n(i.num),className:`flex flex-col items-center gap-2 transition-all ${n(i.num)?"cursor-pointer hover:scale-105":"cursor-default"}`,children:[a.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold text-sm transition-all ${t===i.num?"bg-primary-600 text-white ring-4 ring-primary-600/30":t>i.num?"bg-green-600 text-white":"bg-dark-800 text-gray-500"}`,children:t>i.num?a.jsx(_o,{className:"w-5 h-5"}):i.num}),a.jsx("span",{className:`text-xs font-semibold ${t===i.num?"text-primary-400":t>i.num?"text-green-400":"text-gray-500"}`,children:i.label})]}),s<M_.length-1&&a.jsx("div",{className:"flex-1 h-1 mx-2 bg-dark-800 rounded-full overflow-hidden",children:a.jsx(Or.div,{className:"h-full bg-gradient-to-r from-green-600 to-primary-600",initial:{width:0},animate:{width:t>i.num?"100%":"0%"},transition:{duration:.3}})})]},i.num))})]})})},qge=({nextStep:t})=>a.jsxs("section",{className:"relative min-h-screen flex items-center justify-center overflow-hidden animated-gradient",children:[a.jsx("div",{className:"absolute inset-0 opacity-10",children:a.jsx("div",{className:"absolute inset-0",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ff0000' fill-opacity='0.4'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}})}),a.jsx("div",{className:"relative z-10 text-center px-4 sm:px-6 max-w-6xl mx-auto py-12",children:a.jsxs(Or.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8},children:[a.jsx(Or.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.2,duration:.6},className:"mb-8",children:a.jsxs("h1",{className:"text-5xl sm:text-6xl md:text-8xl font-black mb-6 leading-tight",children:[a.jsx("span",{className:"text-gradient",children:"ELEVATE"}),a.jsx("br",{}),a.jsx("span",{className:"text-white",children:"YOUR EVENT"})]})}),a.jsxs(Or.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6,duration:.8},children:[a.jsx("p",{className:"text-xl sm:text-2xl md:text-3xl text-gray-300 mb-4 max-w-3xl mx-auto font-semibold",children:"Professional Live Stream Production at Zero Cost to Your Organization"}),a.jsx("p",{className:"text-lg sm:text-xl md:text-2xl text-gray-400 mb-12 max-w-2xl mx-auto",children:"We produce your event for free + you earn revenue from PPV that you weren't before"})]}),a.jsxs(Or.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1,duration:.6},className:"mb-16",children:[a.jsxs("button",{onClick:t,className:"group px-8 sm:px-12 py-4 sm:py-5 bg-primary-600 hover:bg-primary-700 text-white font-black rounded-lg text-lg sm:text-xl transition-all hover:scale-105 card-glow inline-flex items-center gap-3",children:["Get Your Free Analysis",a.jsx(Rh,{className:"w-6 h-6 group-hover:translate-x-1 transition-transform"})]}),a.jsx("p",{className:"text-sm text-gray-500 mt-4",children:"See what your promotion is worth in 2 minutes  Zero commitment"})]}),a.jsx(Or.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1.2,duration:.6},className:"mb-16 max-w-4xl mx-auto",children:a.jsx("div",{className:"relative rounded-xl overflow-hidden bg-gradient-to-br from-dark-900 via-dark-800 to-dark-900 border-2 border-gray-700 hover:border-primary-600/50 transition-all group cursor-pointer",children:a.jsxs("div",{className:"aspect-video flex items-center justify-center relative",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary-900/30 via-transparent to-orange-900/30"}),a.jsxs("div",{className:"relative z-10 flex flex-col items-center gap-4",children:[a.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 bg-primary-600 rounded-full flex items-center justify-center group-hover:scale-110 transition-transform shadow-lg",children:a.jsx("svg",{className:"w-10 h-10 sm:w-12 sm:h-12 text-white ml-1",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M8 5v14l11-7z"})})}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-xl sm:text-2xl font-bold text-white mb-2",children:"See Our Work in Action"}),a.jsx("p",{className:"text-sm sm:text-base text-gray-300",children:"Watch how we transform combat sports events into premium broadcast experiences"})]})]})]})})}),a.jsx(Or.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1.4,duration:.8},className:"grid grid-cols-1 sm:grid-cols-3 gap-6 sm:gap-8 max-w-4xl mx-auto",children:[{icon:yh,title:"Industry Leading Live Production",desc:"Professional multi-camera production that commands respect"},{icon:$A,title:"3-10x Audience Growth",desc:"Grow Your Audience 3-10x With Professional Content"},{icon:_f,title:"Unlock Hidden Revenue",desc:"Unlock Revenue Streams You're Currently Leaving on the Table"}].map((e,r)=>a.jsxs(Or.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1.6+r*.1,duration:.6},className:"bg-dark-900/60 backdrop-blur-sm border border-gray-800 rounded-xl p-6 hover:border-primary-600/50 transition-all",children:[a.jsx(e.icon,{className:"w-10 h-10 sm:w-12 sm:h-12 text-primary-500 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg sm:text-xl font-bold text-white mb-2",children:e.title}),a.jsx("p",{className:"text-sm sm:text-base text-gray-400",children:e.desc})]},r))}),a.jsxs(Or.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:2,duration:.8},className:"mt-12 sm:mt-16",children:[a.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-6 max-w-4xl mx-auto mb-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-3xl sm:text-4xl font-black text-primary-500",children:"25+"}),a.jsx("p",{className:"text-xs sm:text-sm text-gray-400 mt-1",children:"Live Events Covered"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-3xl sm:text-4xl font-black text-primary-500",children:"4"}),a.jsx("p",{className:"text-xs sm:text-sm text-gray-400 mt-1",children:"Countries Worldwide"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-3xl sm:text-4xl font-black text-primary-500",children:"Australia Wide"}),a.jsx("p",{className:"text-xs sm:text-sm text-gray-400 mt-1",children:"+ International"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-3xl sm:text-4xl font-black text-primary-500",children:"100%"}),a.jsx("p",{className:"text-xs sm:text-sm text-gray-400 mt-1",children:"Client Satisfaction"})]})]}),a.jsxs("div",{className:"max-w-2xl mx-auto bg-dark-900/60 backdrop-blur-sm border border-green-700/50 rounded-xl p-5",children:[a.jsx("p",{className:"text-green-400 text-sm sm:text-base font-semibold mb-2",children:" Free Consultation  No Commitment Required"}),a.jsx("p",{className:"text-gray-400 text-xs sm:text-sm",children:"We'll analyze your organization and show you exactly what's possible  even if you're not ready to start yet."})]})]})]})})]}),Xge=({formData:t,updateFormData:e,setFormDataBulk:r,setAnalysis:n,nextStep:i,prevStep:s})=>{j.useEffect(()=>{if(t.orgName){const l=o();n(l)}},[t]);const o=()=>{let l="Grassroots",d=0;t.showsPerYear>=12?d+=3:t.showsPerYear>=6?d+=2:t.showsPerYear>=3&&(d+=1),t.avgAttendance>=800?d+=3:t.avgAttendance>=400?d+=2:t.avgAttendance>=150&&(d+=1),t.socialFollowing>=5e4?d+=3:t.socialFollowing>=15e3?d+=2:t.socialFollowing>=3e3&&(d+=1),t.venueCapacity>=1500?d+=2:t.venueCapacity>=500&&(d+=1),t.sponsorshipLevel==="strong"?d+=2:t.sponsorshipLevel==="moderate"&&(d+=1),(t.growthTrajectory==="rapidly-growing"||t.growthTrajectory==="growing")&&(d+=1),d>=10?l="Major":d>=7?l="Established":d>=4&&(l="Regional");let f=[],A="flat";l==="Major"?(f=["Media Partnership","Full Media Buyout"],A="partnership"):l==="Established"?(f=["Broadcast Premium","Media Partnership"],A="hybrid"):l==="Regional"?(f=["Professional Production"],A="flat"):(f=["Essential Coverage"],A="flat");const p=c();return{tier:l,tierScore:d,recommendedPackages:f,pricingModel:A,potentialStreamingRevenue:p}},c=()=>{const l=Math.round(t.avgAttendance*1.5),d=Math.round(l*.4),f=25,A=d*f,p=A*t.showsPerYear,g=t.avgAttendance>=500?2e3:t.avgAttendance>=200?1e3:500,y=g*t.showsPerYear,x=1200,w=x*t.showsPerYear,E=t.showsPerYear*500,T=A+g+x,C=p+y+w;return{perEvent:Math.round(A),annual:Math.round(p),viewerEstimate:l,expectedPurchases:d,ppvPrice:f,sponsorRevenue:{perEvent:g,annual:y},contentValue:{perEvent:x,annual:w},socialGrowth:{followersPerYear:E,valueDescription:`${E.toLocaleString()} new followers/year`},totalROI:{perEvent:Math.round(T),annual:Math.round(C)}}},u=t.orgName.trim().length>0;return a.jsx("section",{className:"min-h-screen py-12 sm:py-20 px-4",children:a.jsxs("div",{className:"max-w-4xl mx-auto",children:[a.jsxs(Or.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center mb-8 sm:mb-12",children:[a.jsxs("div",{className:"inline-flex items-center gap-3 mb-4",children:[a.jsx(pY,{className:"w-10 h-10 sm:w-12 sm:h-12 text-primary-500"}),a.jsx("h2",{className:"text-3xl sm:text-4xl md:text-5xl font-black",children:a.jsx("span",{className:"text-gradient",children:"Tell Us About Your Organization"})})]}),a.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-300 max-w-2xl mx-auto",children:"We'll analyze your profile and recommend the perfect media solution"})]}),a.jsxs(Or.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"bg-dark-800 border border-gray-700 rounded-xl p-6 sm:p-8",children:[a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm sm:text-base font-semibold mb-3 text-gray-300",children:["Organization Name ",a.jsx("span",{className:"text-primary-500",children:"*"})]}),a.jsx("input",{type:"text",value:t.orgName,onChange:l=>e("orgName",l.target.value),className:"w-full px-4 py-3 sm:py-4 bg-dark-900 border-2 border-gray-700 rounded-lg text-white text-base sm:text-lg focus:border-primary-600 focus:outline-none transition-colors",placeholder:"Enter organization name..."})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm sm:text-base font-semibold mb-3 text-gray-300",children:["Shows Per Year: ",a.jsx("span",{className:"text-primary-500 text-lg sm:text-xl font-bold",children:t.showsPerYear})]}),a.jsx("input",{type:"range",min:"1",max:"24",value:t.showsPerYear,onChange:l=>e("showsPerYear",parseInt(l.target.value)),className:"w-full h-3 accent-primary-600"}),a.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[a.jsx("span",{children:"1"}),a.jsx("span",{children:"24"})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm sm:text-base font-semibold mb-3 text-gray-300",children:["Average Attendance: ",a.jsx("span",{className:"text-primary-500 text-lg sm:text-xl font-bold",children:t.avgAttendance})]}),a.jsx("input",{type:"range",min:"50",max:"2000",step:"50",value:t.avgAttendance,onChange:l=>e("avgAttendance",parseInt(l.target.value)),className:"w-full h-3 accent-primary-600"}),a.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[a.jsx("span",{children:"50"}),a.jsx("span",{children:"2,000"})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm sm:text-base font-semibold mb-3 text-gray-300",children:["Venue Capacity: ",a.jsx("span",{className:"text-primary-500 text-lg sm:text-xl font-bold",children:t.venueCapacity})]}),a.jsx("input",{type:"range",min:"100",max:"3000",step:"100",value:t.venueCapacity,onChange:l=>e("venueCapacity",parseInt(l.target.value)),className:"w-full h-3 accent-primary-600"}),a.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[a.jsx("span",{children:"100"}),a.jsx("span",{children:"3,000"})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm sm:text-base font-semibold mb-3 text-gray-300",children:["Social Media Following: ",a.jsx("span",{className:"text-primary-500 text-lg sm:text-xl font-bold",children:t.socialFollowing.toLocaleString()})]}),a.jsx("input",{type:"range",min:"1000",max:"200000",step:"1000",value:t.socialFollowing,onChange:l=>e("socialFollowing",parseInt(l.target.value)),className:"w-full h-3 accent-primary-600"}),a.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[a.jsx("span",{children:"1k"}),a.jsx("span",{children:"200k"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm sm:text-base font-semibold mb-3 text-gray-300",children:"Current Media Setup"}),a.jsxs("select",{value:t.currentMedia,onChange:l=>e("currentMedia",l.target.value),className:"w-full px-4 py-3 sm:py-4 bg-dark-900 border-2 border-gray-700 rounded-lg text-white text-base focus:border-primary-600 focus:outline-none appearance-none cursor-pointer",children:[a.jsx("option",{value:"none",children:"No media coverage"}),a.jsx("option",{value:"basic",children:"Basic (smartphone/amateur)"}),a.jsx("option",{value:"semi",children:"Semi-professional"}),a.jsx("option",{value:"pro",children:"Professional production"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm sm:text-base font-semibold mb-3 text-gray-300",children:"Geographic Reach"}),a.jsxs("select",{value:t.geoReach,onChange:l=>e("geoReach",l.target.value),className:"w-full px-4 py-3 sm:py-4 bg-dark-900 border-2 border-gray-700 rounded-lg text-white text-base focus:border-primary-600 focus:outline-none appearance-none cursor-pointer",children:[a.jsx("option",{value:"local",children:"Local"}),a.jsx("option",{value:"state",children:"State/Regional"}),a.jsx("option",{value:"national",children:"National"}),a.jsx("option",{value:"international",children:"International"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm sm:text-base font-semibold mb-3 text-gray-300",children:"Sponsorship Level"}),a.jsxs("select",{value:t.sponsorshipLevel,onChange:l=>e("sponsorshipLevel",l.target.value),className:"w-full px-4 py-3 sm:py-4 bg-dark-900 border-2 border-gray-700 rounded-lg text-white text-base focus:border-primary-600 focus:outline-none appearance-none cursor-pointer",children:[a.jsx("option",{value:"none",children:"No sponsors"}),a.jsx("option",{value:"few",children:"Few local sponsors"}),a.jsx("option",{value:"moderate",children:"Moderate sponsorship"}),a.jsx("option",{value:"strong",children:"Strong sponsor portfolio"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm sm:text-base font-semibold mb-3 text-gray-300",children:"Growth Trajectory"}),a.jsxs("select",{value:t.growthTrajectory,onChange:l=>e("growthTrajectory",l.target.value),className:"w-full px-4 py-3 sm:py-4 bg-dark-900 border-2 border-gray-700 rounded-lg text-white text-base focus:border-primary-600 focus:outline-none appearance-none cursor-pointer",children:[a.jsx("option",{value:"declining",children:"Declining"}),a.jsx("option",{value:"stable",children:"Stable"}),a.jsx("option",{value:"growing",children:"Growing"}),a.jsx("option",{value:"rapidly-growing",children:"Rapidly Growing"})]})]})]}),a.jsx("div",{className:"mt-8 sm:mt-10",children:a.jsxs("div",{className:"flex gap-3",children:[a.jsxs("button",{onClick:s,className:"flex-1 flex items-center justify-center gap-2 px-6 py-4 bg-dark-700 hover:bg-dark-600 text-white font-bold rounded-lg transition-all text-base sm:text-lg",children:[a.jsx(U0,{className:"w-5 h-5"}),"Back"]}),a.jsxs("button",{onClick:i,disabled:!u,className:"flex-[2] flex items-center justify-center gap-2 px-6 py-4 bg-primary-600 hover:bg-primary-700 disabled:bg-gray-600 disabled:cursor-not-allowed text-white font-bold rounded-lg transition-all hover:scale-[1.02] text-base sm:text-lg",children:["Continue to Analysis",a.jsx(Rh,{className:"w-5 h-5"})]})]})})]})]})})};function AX(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(r=AX(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function Sa(){for(var t,e,r=0,n="",i=arguments.length;r<i;r++)(t=arguments[r])&&(e=AX(t))&&(n&&(n+=" "),n+=e);return n}var Zge=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function I3(t){if(typeof t!="string")return!1;var e=Zge;return e.includes(t)}var Jge=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],e0e=new Set(Jge);function mX(t){return typeof t!="string"?!1:e0e.has(t)}function pX(t){return typeof t=="string"&&t.startsWith("data-")}function yu(t){if(typeof t!="object"||t===null)return{};var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(mX(r)||pX(r))&&(e[r]=t[r]);return e}function cy(t){if(t==null)return null;if(j.isValidElement(t)&&typeof t.props=="object"&&t.props!==null){var e=t.props;return yu(e)}return typeof t=="object"&&!Array.isArray(t)?yu(t):null}function Hu(t){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(mX(r)||pX(r)||I3(r))&&(e[r]=t[r]);return e}function t0e(t){return t==null?null:j.isValidElement(t)?Hu(t.props):typeof t=="object"&&!Array.isArray(t)?Hu(t):null}var r0e=["children","width","height","viewBox","className","style","title","desc"];function OB(){return OB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},OB.apply(null,arguments)}function n0e(t,e){if(t==null)return{};var r,n,i=i0e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function i0e(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var L3=j.forwardRef((t,e)=>{var{children:r,width:n,height:i,viewBox:s,className:o,style:c,title:u,desc:l}=t,d=n0e(t,r0e),f=s||{width:n,height:i,x:0,y:0},A=Sa("recharts-surface",o);return j.createElement("svg",OB({},Hu(d),{className:A,width:n,height:i,style:c,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:e}),j.createElement("title",null,u),j.createElement("desc",null,l),r)}),s0e=["children","className"];function RB(){return RB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},RB.apply(null,arguments)}function a0e(t,e){if(t==null)return{};var r,n,i=o0e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function o0e(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Fc=j.forwardRef((t,e)=>{var{children:r,className:n}=t,i=a0e(t,s0e),s=Sa("recharts-layer",n);return j.createElement("g",RB({className:s},Hu(i),{ref:e}),r)}),gX=j.createContext(null),l0e=()=>j.useContext(gX);function _l(t){return function(){return t}}const vX=Math.cos,LC=Math.sin,HA=Math.sqrt,BC=Math.PI,DN=2*BC,DB=Math.PI,MB=2*DB,pv=1e-6,c0e=MB-pv;function yX(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function u0e(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return yX;const r=10**e;return function(n){this._+=n[0];for(let i=1,s=n.length;i<s;++i)this._+=Math.round(arguments[i]*r)/r+n[i]}}class d0e{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?yX:u0e(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,n,i){this._append`Q${+e},${+r},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(e,r,n,i,s,o){this._append`C${+e},${+r},${+n},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(e,r,n,i,s){if(e=+e,r=+r,n=+n,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,c=this._y1,u=n-e,l=i-r,d=o-e,f=c-r,A=d*d+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(A>pv)if(!(Math.abs(f*u-l*d)>pv)||!s)this._append`L${this._x1=e},${this._y1=r}`;else{let p=n-o,g=i-c,y=u*u+l*l,x=p*p+g*g,w=Math.sqrt(y),E=Math.sqrt(A),T=s*Math.tan((DB-Math.acos((y+A-x)/(2*w*E)))/2),C=T/E,N=T/w;Math.abs(C-1)>pv&&this._append`L${e+C*d},${r+C*f}`,this._append`A${s},${s},0,0,${+(f*p>d*g)},${this._x1=e+N*u},${this._y1=r+N*l}`}}arc(e,r,n,i,s,o){if(e=+e,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let c=n*Math.cos(i),u=n*Math.sin(i),l=e+c,d=r+u,f=1^o,A=o?i-s:s-i;this._x1===null?this._append`M${l},${d}`:(Math.abs(this._x1-l)>pv||Math.abs(this._y1-d)>pv)&&this._append`L${l},${d}`,n&&(A<0&&(A=A%MB+MB),A>c0e?this._append`A${n},${n},0,1,${f},${e-c},${r-u}A${n},${n},0,1,${f},${this._x1=l},${this._y1=d}`:A>pv&&this._append`A${n},${n},0,${+(A>=DB)},${f},${this._x1=e+n*Math.cos(s)},${this._y1=r+n*Math.sin(s)}`)}rect(e,r,n,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}}function B3(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);e=n}return t},()=>new d0e(e)}function P3(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function xX(t){this._context=t}xX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function MN(t){return new xX(t)}function bX(t){return t[0]}function wX(t){return t[1]}function EX(t,e){var r=_l(!0),n=null,i=MN,s=null,o=B3(c);t=typeof t=="function"?t:t===void 0?bX:_l(t),e=typeof e=="function"?e:e===void 0?wX:_l(e);function c(u){var l,d=(u=P3(u)).length,f,A=!1,p;for(n==null&&(s=i(p=o())),l=0;l<=d;++l)!(l<d&&r(f=u[l],l,u))===A&&((A=!A)?s.lineStart():s.lineEnd()),A&&s.point(+t(f,l,u),+e(f,l,u));if(p)return s=null,p+""||null}return c.x=function(u){return arguments.length?(t=typeof u=="function"?u:_l(+u),c):t},c.y=function(u){return arguments.length?(e=typeof u=="function"?u:_l(+u),c):e},c.defined=function(u){return arguments.length?(r=typeof u=="function"?u:_l(!!u),c):r},c.curve=function(u){return arguments.length?(i=u,n!=null&&(s=i(n)),c):i},c.context=function(u){return arguments.length?(u==null?n=s=null:s=i(n=u),c):n},c}function F_(t,e,r){var n=null,i=_l(!0),s=null,o=MN,c=null,u=B3(l);t=typeof t=="function"?t:t===void 0?bX:_l(+t),e=typeof e=="function"?e:_l(e===void 0?0:+e),r=typeof r=="function"?r:r===void 0?wX:_l(+r);function l(f){var A,p,g,y=(f=P3(f)).length,x,w=!1,E,T=new Array(y),C=new Array(y);for(s==null&&(c=o(E=u())),A=0;A<=y;++A){if(!(A<y&&i(x=f[A],A,f))===w)if(w=!w)p=A,c.areaStart(),c.lineStart();else{for(c.lineEnd(),c.lineStart(),g=A-1;g>=p;--g)c.point(T[g],C[g]);c.lineEnd(),c.areaEnd()}w&&(T[A]=+t(x,A,f),C[A]=+e(x,A,f),c.point(n?+n(x,A,f):T[A],r?+r(x,A,f):C[A]))}if(E)return c=null,E+""||null}function d(){return EX().defined(i).curve(o).context(s)}return l.x=function(f){return arguments.length?(t=typeof f=="function"?f:_l(+f),n=null,l):t},l.x0=function(f){return arguments.length?(t=typeof f=="function"?f:_l(+f),l):t},l.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:_l(+f),l):n},l.y=function(f){return arguments.length?(e=typeof f=="function"?f:_l(+f),r=null,l):e},l.y0=function(f){return arguments.length?(e=typeof f=="function"?f:_l(+f),l):e},l.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:_l(+f),l):r},l.lineX0=l.lineY0=function(){return d().x(t).y(e)},l.lineY1=function(){return d().x(t).y(r)},l.lineX1=function(){return d().x(n).y(e)},l.defined=function(f){return arguments.length?(i=typeof f=="function"?f:_l(!!f),l):i},l.curve=function(f){return arguments.length?(o=f,s!=null&&(c=o(s)),l):o},l.context=function(f){return arguments.length?(f==null?s=c=null:c=o(s=f),l):s},l}class _X{constructor(e,r){this._context=e,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,r){switch(e=+e,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,r,e,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,e,this._y0,e,r);break}}this._x0=e,this._y0=r}}function h0e(t){return new _X(t,!0)}function f0e(t){return new _X(t,!1)}const O3={draw(t,e){const r=HA(e/BC);t.moveTo(r,0),t.arc(0,0,r,0,DN)}},A0e={draw(t,e){const r=HA(e/5)/2;t.moveTo(-3*r,-r),t.lineTo(-r,-r),t.lineTo(-r,-3*r),t.lineTo(r,-3*r),t.lineTo(r,-r),t.lineTo(3*r,-r),t.lineTo(3*r,r),t.lineTo(r,r),t.lineTo(r,3*r),t.lineTo(-r,3*r),t.lineTo(-r,r),t.lineTo(-3*r,r),t.closePath()}},SX=HA(1/3),m0e=SX*2,p0e={draw(t,e){const r=HA(e/m0e),n=r*SX;t.moveTo(0,-r),t.lineTo(n,0),t.lineTo(0,r),t.lineTo(-n,0),t.closePath()}},g0e={draw(t,e){const r=HA(e),n=-r/2;t.rect(n,n,r,r)}},v0e=.8908130915292852,TX=LC(BC/10)/LC(7*BC/10),y0e=LC(DN/10)*TX,x0e=-vX(DN/10)*TX,b0e={draw(t,e){const r=HA(e*v0e),n=y0e*r,i=x0e*r;t.moveTo(0,-r),t.lineTo(n,i);for(let s=1;s<5;++s){const o=DN*s/5,c=vX(o),u=LC(o);t.lineTo(u*r,-c*r),t.lineTo(c*n-u*i,u*n+c*i)}t.closePath()}},lI=HA(3),w0e={draw(t,e){const r=-HA(e/(lI*3));t.moveTo(0,r*2),t.lineTo(-lI*r,-r),t.lineTo(lI*r,-r),t.closePath()}},Pf=-.5,Of=HA(3)/2,FB=1/HA(12),E0e=(FB/2+1)*3,_0e={draw(t,e){const r=HA(e/E0e),n=r/2,i=r*FB,s=n,o=r*FB+r,c=-s,u=o;t.moveTo(n,i),t.lineTo(s,o),t.lineTo(c,u),t.lineTo(Pf*n-Of*i,Of*n+Pf*i),t.lineTo(Pf*s-Of*o,Of*s+Pf*o),t.lineTo(Pf*c-Of*u,Of*c+Pf*u),t.lineTo(Pf*n+Of*i,Pf*i-Of*n),t.lineTo(Pf*s+Of*o,Pf*o-Of*s),t.lineTo(Pf*c+Of*u,Pf*u-Of*c),t.closePath()}};function S0e(t,e){let r=null,n=B3(i);t=typeof t=="function"?t:_l(t||O3),e=typeof e=="function"?e:_l(e===void 0?64:+e);function i(){let s;if(r||(r=s=n()),t.apply(this,arguments).draw(r,+e.apply(this,arguments)),s)return r=null,s+""||null}return i.type=function(s){return arguments.length?(t=typeof s=="function"?s:_l(s),i):t},i.size=function(s){return arguments.length?(e=typeof s=="function"?s:_l(+s),i):e},i.context=function(s){return arguments.length?(r=s??null,i):r},i}function PC(){}function OC(t,e,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+r)/6)}function CX(t){this._context=t}CX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:OC(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:OC(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function T0e(t){return new CX(t)}function jX(t){this._context=t}jX.prototype={areaStart:PC,areaEnd:PC,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:OC(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function C0e(t){return new jX(t)}function NX(t){this._context=t}NX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,n=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:OC(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function j0e(t){return new NX(t)}function kX(t){this._context=t}kX.prototype={areaStart:PC,areaEnd:PC,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function N0e(t){return new kX(t)}function $7(t){return t<0?-1:1}function H7(t,e,r){var n=t._x1-t._x0,i=e-t._x1,s=(t._y1-t._y0)/(n||i<0&&-0),o=(r-t._y1)/(i||n<0&&-0),c=(s*i+o*n)/(n+i);return($7(s)+$7(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(c))||0}function Q7(t,e){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-e)/2:e}function cI(t,e,r){var n=t._x0,i=t._y0,s=t._x1,o=t._y1,c=(s-n)/3;t._context.bezierCurveTo(n+c,i+c*e,s-c,o-c*r,s,o)}function RC(t){this._context=t}RC.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:cI(this,this._t0,Q7(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var r=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,cI(this,Q7(this,r=H7(this,t,e)),r);break;default:cI(this,this._t0,r=H7(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=r}}};function IX(t){this._context=new LX(t)}(IX.prototype=Object.create(RC.prototype)).point=function(t,e){RC.prototype.point.call(this,e,t)};function LX(t){this._context=t}LX.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,r,n,i,s){this._context.bezierCurveTo(e,t,n,r,s,i)}};function k0e(t){return new RC(t)}function I0e(t){return new IX(t)}function BX(t){this._context=t}BX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),r===2)this._context.lineTo(t[1],e[1]);else for(var n=V7(t),i=V7(e),s=0,o=1;o<r;++s,++o)this._context.bezierCurveTo(n[0][s],i[0][s],n[1][s],i[1][s],t[o],e[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function V7(t){var e,r=t.length-1,n,i=new Array(r),s=new Array(r),o=new Array(r);for(i[0]=0,s[0]=2,o[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,s[e]=4,o[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,s[r-1]=7,o[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/s[e-1],s[e]-=n,o[e]-=n*o[e-1];for(i[r-1]=o[r-1]/s[r-1],e=r-2;e>=0;--e)i[e]=(o[e]-i[e+1])/s[e];for(s[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)s[e]=2*t[e+1]-i[e+1];return[i,s]}function L0e(t){return new BX(t)}function FN(t,e){this._context=t,this._t=e}FN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,e)}break}}this._x=t,this._y=e}};function B0e(t){return new FN(t,.5)}function P0e(t){return new FN(t,0)}function O0e(t){return new FN(t,1)}function uy(t,e){if((o=t.length)>1)for(var r=1,n,i,s=t[e[0]],o,c=s.length;r<o;++r)for(i=s,s=t[e[r]],n=0;n<c;++n)s[n][1]+=s[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function UB(t){for(var e=t.length,r=new Array(e);--e>=0;)r[e]=e;return r}function R0e(t,e){return t[e]}function D0e(t){const e=[];return e.key=t,e}function M0e(){var t=_l([]),e=UB,r=uy,n=R0e;function i(s){var o=Array.from(t.apply(this,arguments),D0e),c,u=o.length,l=-1,d;for(const f of s)for(c=0,++l;c<u;++c)(o[c][l]=[0,+n(f,o[c].key,l,s)]).data=f;for(c=0,d=P3(e(o));c<u;++c)o[d[c]].index=c;return r(o,d),o}return i.keys=function(s){return arguments.length?(t=typeof s=="function"?s:_l(Array.from(s)),i):t},i.value=function(s){return arguments.length?(n=typeof s=="function"?s:_l(+s),i):n},i.order=function(s){return arguments.length?(e=s==null?UB:typeof s=="function"?s:_l(Array.from(s)),i):e},i.offset=function(s){return arguments.length?(r=s??uy,i):r},i}function F0e(t,e){if((n=t.length)>0){for(var r,n,i=0,s=t[0].length,o;i<s;++i){for(o=r=0;r<n;++r)o+=t[r][i][1]||0;if(o)for(r=0;r<n;++r)t[r][i][1]/=o}uy(t,e)}}function U0e(t,e){if((i=t.length)>0){for(var r=0,n=t[e[0]],i,s=n.length;r<s;++r){for(var o=0,c=0;o<i;++o)c+=t[o][r][1]||0;n[r][1]+=n[r][0]=-c/2}uy(t,e)}}function $0e(t,e){if(!(!((o=t.length)>0)||!((s=(i=t[e[0]]).length)>0))){for(var r=0,n=1,i,s,o;n<s;++n){for(var c=0,u=0,l=0;c<o;++c){for(var d=t[e[c]],f=d[n][1]||0,A=d[n-1][1]||0,p=(f-A)/2,g=0;g<c;++g){var y=t[e[g]],x=y[n][1]||0,w=y[n-1][1]||0;p+=x-w}u+=f,l+=p*f}i[n-1][1]+=i[n-1][0]=r,u&&(r-=l/u)}i[n-1][1]+=i[n-1][0]=r,uy(t,e)}}var uI={},dI={},z7;function H0e(){return z7||(z7=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r==="__proto__"}t.isUnsafeProperty=e})(dI)),dI}var hI={},K7;function PX(){return K7||(K7=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}t.isDeepKey=e})(hI)),hI}var fI={},G7;function R3(){return G7||(G7=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="string"||typeof r=="symbol"?r:Object.is(r?.valueOf?.(),-0)?"-0":String(r)}t.toKey=e})(fI)),fI}var AI={},mI={},W7;function Q0e(){return W7||(W7=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){if(r==null)return"";if(typeof r=="string")return r;if(Array.isArray(r))return r.map(e).join(",");const n=String(r);return n==="0"&&Object.is(Number(r),-0)?"-0":n}t.toString=e})(mI)),mI}var Y7;function D3(){return Y7||(Y7=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Q0e(),r=R3();function n(i){if(Array.isArray(i))return i.map(r.toKey);if(typeof i=="symbol")return[i];i=e.toString(i);const s=[],o=i.length;if(o===0)return s;let c=0,u="",l="",d=!1;for(i.charCodeAt(0)===46&&(s.push(""),c++);c<o;){const f=i[c];l?f==="\\"&&c+1<o?(c++,u+=i[c]):f===l?l="":u+=f:d?f==='"'||f==="'"?l=f:f==="]"?(d=!1,s.push(u),u=""):u+=f:f==="["?(d=!0,u&&(s.push(u),u="")):f==="."?u&&(s.push(u),u=""):u+=f,c++}return u&&s.push(u),s}t.toPath=n})(AI)),AI}var q7;function M3(){return q7||(q7=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=H0e(),r=PX(),n=R3(),i=D3();function s(c,u,l){if(c==null)return l;switch(typeof u){case"string":{if(e.isUnsafeProperty(u))return l;const d=c[u];return d===void 0?r.isDeepKey(u)?s(c,i.toPath(u),l):l:d}case"number":case"symbol":{typeof u=="number"&&(u=n.toKey(u));const d=c[u];return d===void 0?l:d}default:{if(Array.isArray(u))return o(c,u,l);if(Object.is(u?.valueOf(),-0)?u="-0":u=String(u),e.isUnsafeProperty(u))return l;const d=c[u];return d===void 0?l:d}}}function o(c,u,l){if(u.length===0)return l;let d=c;for(let f=0;f<u.length;f++){if(d==null||e.isUnsafeProperty(u[f]))return l;d=d[u[f]]}return d===void 0?l:d}t.get=s})(uI)),uI}var pI,X7;function V0e(){return X7||(X7=1,pI=M3().get),pI}var z0e=V0e();const dy=eA(z0e);var K0e=4;function b0(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:K0e,r=10**e,n=Math.round(t*r)/r;return Object.is(n,-0)?0:n}function cc(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return t.reduce((i,s,o)=>{var c=r[o-1];return typeof c=="string"?i+c+s:c!==void 0?i+b0(c)+s:i+s},"")}var Ad=t=>t===0?0:t>0?1:-1,zm=t=>typeof t=="number"&&t!=+t,hy=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,Ei=t=>(typeof t=="number"||t instanceof Number)&&!zm(t),Km=t=>Ei(t)||typeof t=="string",G0e=0,TE=t=>{var e=++G0e;return"".concat(t||"").concat(e)},rh=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Ei(e)&&typeof e!="string")return n;var s;if(hy(e)){if(r==null)return n;var o=e.indexOf("%");s=r*parseFloat(e.slice(0,o))/100}else s=+e;return zm(s)&&(s=n),i&&r!=null&&s>r&&(s=r),s},OX=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,r={},n=0;n<e;n++)if(!r[String(t[n])])r[String(t[n])]=!0;else return!0;return!1};function uc(t,e,r){return Ei(t)&&Ei(e)?b0(t+r*(e-t)):e}function W0e(t,e,r){if(!(!t||!t.length))return t.find(n=>n&&(typeof e=="function"?e(n):dy(n,e))===r)}var ru=t=>t===null||typeof t>"u",I2=t=>ru(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1));function Dh(t){return t!=null}function H0(){}var Y0e=["type","size","sizeType"];function $B(){return $B=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},$B.apply(null,arguments)}function Z7(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function J7(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Z7(Object(r),!0).forEach(function(n){q0e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Z7(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function q0e(t,e,r){return(e=X0e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function X0e(t){var e=Z0e(t,"string");return typeof e=="symbol"?e:e+""}function Z0e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function J0e(t,e){if(t==null)return{};var r,n,i=eve(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function eve(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var RX={symbolCircle:O3,symbolCross:A0e,symbolDiamond:p0e,symbolSquare:g0e,symbolStar:b0e,symbolTriangle:w0e,symbolWye:_0e},tve=Math.PI/180,rve=t=>{var e="symbol".concat(I2(t));return RX[e]||O3},nve=(t,e,r)=>{if(e==="area")return t;switch(r){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var n=18*tve;return 1.25*t*t*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},ive=(t,e)=>{RX["symbol".concat(I2(t))]=e},F3=t=>{var{type:e="circle",size:r=64,sizeType:n="area"}=t,i=J0e(t,Y0e),s=J7(J7({},i),{},{type:e,size:r,sizeType:n}),o="circle";typeof e=="string"&&(o=e);var c=()=>{var A=rve(o),p=S0e().type(A).size(nve(r,n,o)),g=p();if(g!==null)return g},{className:u,cx:l,cy:d}=s,f=Hu(s);return Ei(l)&&Ei(d)&&Ei(r)?j.createElement("path",$B({},f,{className:Sa("recharts-symbols",u),transform:"translate(".concat(l,", ").concat(d,")"),d:c()})):null};F3.registerSymbol=ive;var DX=t=>"radius"in t&&"startAngle"in t&&"endAngle"in t,U3=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var r=t;if(j.isValidElement(t)&&(r=t.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(i=>{I3(i)&&(n[i]=(s=>r[i](r,s)))}),n},sve=(t,e,r)=>n=>(t(e,r,n),null),i1=(t,e,r)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var n=null;return Object.keys(t).forEach(i=>{var s=t[i];I3(i)&&typeof s=="function"&&(n||(n={}),n[i]=sve(s,e,r))}),n};function e$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function ave(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?e$(Object(r),!0).forEach(function(n){ove(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):e$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ove(t,e,r){return(e=lve(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function lve(t){var e=cve(t,"string");return typeof e=="symbol"?e:e+""}function cve(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Uc(t,e){var r=ave({},t),n=e,i=Object.keys(e),s=i.reduce((o,c)=>(o[c]===void 0&&n[c]!==void 0&&(o[c]=n[c]),o),r);return s}function DC(){return DC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},DC.apply(null,arguments)}function t$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function uve(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?t$(Object(r),!0).forEach(function(n){dve(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):t$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function dve(t,e,r){return(e=hve(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function hve(t){var e=fve(t,"string");return typeof e=="symbol"?e:e+""}function fve(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Hf=32,Ave={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function mve(t){var{data:e,iconType:r,inactiveColor:n}=t,i=Hf/2,s=Hf/6,o=Hf/3,c=e.inactive?n:e.color,u=r??e.type;if(u==="none")return null;if(u==="plainline"){var l;return j.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:(l=e.payload)===null||l===void 0?void 0:l.strokeDasharray,x1:0,y1:i,x2:Hf,y2:i,className:"recharts-legend-icon"})}if(u==="line")return j.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(i,"h").concat(o,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*o,",").concat(i,`
            H`).concat(Hf,"M").concat(2*o,",").concat(i,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(o,",").concat(i),className:"recharts-legend-icon"});if(u==="rect")return j.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(Hf/8,"h").concat(Hf,"v").concat(Hf*3/4,"h").concat(-Hf,"z"),className:"recharts-legend-icon"});if(j.isValidElement(e.legendIcon)){var d=uve({},e);return delete d.legendIcon,j.cloneElement(e.legendIcon,d)}return j.createElement(F3,{fill:c,cx:i,cy:i,size:Hf,sizeType:"diameter",type:u})}function pve(t){var{payload:e,iconSize:r,layout:n,formatter:i,inactiveColor:s,iconType:o}=t,c={x:0,y:0,width:Hf,height:Hf},u={display:n==="horizontal"?"inline-block":"block",marginRight:10},l={display:"inline-block",verticalAlign:"middle",marginRight:4};return e.map((d,f)=>{var A=d.formatter||i,p=Sa({"recharts-legend-item":!0,["legend-item-".concat(f)]:!0,inactive:d.inactive});if(d.type==="none")return null;var g=d.inactive?s:d.color,y=A?A(d.value,d,f):d.value;return j.createElement("li",DC({className:p,style:u,key:"legend-item-".concat(f)},i1(t,d,f)),j.createElement(L3,{width:r,height:r,viewBox:c,style:l,"aria-label":"".concat(y," legend icon")},j.createElement(mve,{data:d,iconType:o,inactiveColor:s})),j.createElement("span",{className:"recharts-legend-item-text",style:{color:g}},y))})}var gve=t=>{var e=Uc(t,Ave),{payload:r,layout:n,align:i}=e;if(!r||!r.length)return null;var s={padding:0,margin:0,textAlign:n==="horizontal"?i:"left"};return j.createElement("ul",{className:"recharts-default-legend",style:s},j.createElement(pve,DC({},e,{payload:r})))},gI={},vI={},r$;function vve(){return r$||(r$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n){const i=new Map;for(let s=0;s<r.length;s++){const o=r[s],c=n(o,s,r);i.has(c)||i.set(c,o)}return Array.from(i.values())}t.uniqBy=e})(vI)),vI}var yI={},n$;function yve(){return n$||(n$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n){return function(...i){return r.apply(this,i.slice(0,n))}}t.ary=e})(yI)),yI}var xI={},i$;function MX(){return i$||(i$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r}t.identity=e})(xI)),xI}var bI={},wI={},EI={},s$;function xve(){return s$||(s$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return Number.isSafeInteger(r)&&r>=0}t.isLength=e})(EI)),EI}var a$;function $3(){return a$||(a$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=xve();function r(n){return n!=null&&typeof n!="function"&&e.isLength(n.length)}t.isArrayLike=r})(wI)),wI}var _I={},o$;function bve(){return o$||(o$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="object"&&r!==null}t.isObjectLike=e})(_I)),_I}var l$;function wve(){return l$||(l$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=$3(),r=bve();function n(i){return r.isObjectLike(i)&&e.isArrayLike(i)}t.isArrayLikeObject=n})(bI)),bI}var SI={},TI={},c$;function Eve(){return c$||(c$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=M3();function r(n){return function(i){return e.get(i,n)}}t.property=r})(TI)),TI}var CI={},jI={},NI={},kI={},u$;function FX(){return u$||(u$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r!==null&&(typeof r=="object"||typeof r=="function")}t.isObject=e})(kI)),kI}var II={},d$;function UX(){return d$||(d$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r==null||typeof r!="object"&&typeof r!="function"}t.isPrimitive=e})(II)),II}var LI={},h$;function $X(){return h$||(h$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}t.isEqualsSameValueZero=e})(LI)),LI}var f$;function _ve(){return f$||(f$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=FX(),r=UX(),n=$X();function i(d,f,A){return typeof A!="function"?i(d,f,()=>{}):s(d,f,function p(g,y,x,w,E,T){const C=A(g,y,x,w,E,T);return C!==void 0?!!C:s(g,y,p,T)},new Map)}function s(d,f,A,p){if(f===d)return!0;switch(typeof f){case"object":return o(d,f,A,p);case"function":return Object.keys(f).length>0?s(d,{...f},A,p):n.isEqualsSameValueZero(d,f);default:return e.isObject(d)?typeof f=="string"?f==="":!0:n.isEqualsSameValueZero(d,f)}}function o(d,f,A,p){if(f==null)return!0;if(Array.isArray(f))return u(d,f,A,p);if(f instanceof Map)return c(d,f,A,p);if(f instanceof Set)return l(d,f,A,p);const g=Object.keys(f);if(d==null||r.isPrimitive(d))return g.length===0;if(g.length===0)return!0;if(p?.has(f))return p.get(f)===d;p?.set(f,d);try{for(let y=0;y<g.length;y++){const x=g[y];if(!r.isPrimitive(d)&&!(x in d)||f[x]===void 0&&d[x]!==void 0||f[x]===null&&d[x]!==null||!A(d[x],f[x],x,d,f,p))return!1}return!0}finally{p?.delete(f)}}function c(d,f,A,p){if(f.size===0)return!0;if(!(d instanceof Map))return!1;for(const[g,y]of f.entries()){const x=d.get(g);if(A(x,y,g,d,f,p)===!1)return!1}return!0}function u(d,f,A,p){if(f.length===0)return!0;if(!Array.isArray(d))return!1;const g=new Set;for(let y=0;y<f.length;y++){const x=f[y];let w=!1;for(let E=0;E<d.length;E++){if(g.has(E))continue;const T=d[E];let C=!1;if(A(T,x,y,d,f,p)&&(C=!0),C){g.add(E),w=!0;break}}if(!w)return!1}return!0}function l(d,f,A,p){return f.size===0?!0:d instanceof Set?u([...d],[...f],A,p):!1}t.isMatchWith=i,t.isSetMatch=l})(NI)),NI}var A$;function HX(){return A$||(A$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=_ve();function r(n,i){return e.isMatchWith(n,i,()=>{})}t.isMatch=r})(jI)),jI}var BI={},PI={},OI={},m$;function Sve(){return m$||(m$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}t.getSymbols=e})(OI)),OI}var RI={},p$;function H3(){return p$||(p$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}t.getTag=e})(RI)),RI}var DI={},g$;function QX(){return g$||(g$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",r="[object String]",n="[object Number]",i="[object Boolean]",s="[object Arguments]",o="[object Symbol]",c="[object Date]",u="[object Map]",l="[object Set]",d="[object Array]",f="[object Function]",A="[object ArrayBuffer]",p="[object Object]",g="[object Error]",y="[object DataView]",x="[object Uint8Array]",w="[object Uint8ClampedArray]",E="[object Uint16Array]",T="[object Uint32Array]",C="[object BigUint64Array]",N="[object Int8Array]",I="[object Int16Array]",U="[object Int32Array]",K="[object BigInt64Array]",Y="[object Float32Array]",re="[object Float64Array]";t.argumentsTag=s,t.arrayBufferTag=A,t.arrayTag=d,t.bigInt64ArrayTag=K,t.bigUint64ArrayTag=C,t.booleanTag=i,t.dataViewTag=y,t.dateTag=c,t.errorTag=g,t.float32ArrayTag=Y,t.float64ArrayTag=re,t.functionTag=f,t.int16ArrayTag=I,t.int32ArrayTag=U,t.int8ArrayTag=N,t.mapTag=u,t.numberTag=n,t.objectTag=p,t.regexpTag=e,t.setTag=l,t.stringTag=r,t.symbolTag=o,t.uint16ArrayTag=E,t.uint32ArrayTag=T,t.uint8ArrayTag=x,t.uint8ClampedArrayTag=w})(DI)),DI}var MI={},v$;function Tve(){return v$||(v$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}t.isTypedArray=e})(MI)),MI}var y$;function VX(){return y$||(y$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Sve(),r=H3(),n=QX(),i=UX(),s=Tve();function o(d,f){return c(d,void 0,d,new Map,f)}function c(d,f,A,p=new Map,g=void 0){const y=g?.(d,f,A,p);if(y!==void 0)return y;if(i.isPrimitive(d))return d;if(p.has(d))return p.get(d);if(Array.isArray(d)){const x=new Array(d.length);p.set(d,x);for(let w=0;w<d.length;w++)x[w]=c(d[w],w,A,p,g);return Object.hasOwn(d,"index")&&(x.index=d.index),Object.hasOwn(d,"input")&&(x.input=d.input),x}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const x=new RegExp(d.source,d.flags);return x.lastIndex=d.lastIndex,x}if(d instanceof Map){const x=new Map;p.set(d,x);for(const[w,E]of d)x.set(w,c(E,w,A,p,g));return x}if(d instanceof Set){const x=new Set;p.set(d,x);for(const w of d)x.add(c(w,void 0,A,p,g));return x}if(typeof Buffer<"u"&&Buffer.isBuffer(d))return d.subarray();if(s.isTypedArray(d)){const x=new(Object.getPrototypeOf(d)).constructor(d.length);p.set(d,x);for(let w=0;w<d.length;w++)x[w]=c(d[w],w,A,p,g);return x}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const x=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return p.set(d,x),u(x,d,A,p,g),x}if(typeof File<"u"&&d instanceof File){const x=new File([d],d.name,{type:d.type});return p.set(d,x),u(x,d,A,p,g),x}if(typeof Blob<"u"&&d instanceof Blob){const x=new Blob([d],{type:d.type});return p.set(d,x),u(x,d,A,p,g),x}if(d instanceof Error){const x=new d.constructor;return p.set(d,x),x.message=d.message,x.name=d.name,x.stack=d.stack,x.cause=d.cause,u(x,d,A,p,g),x}if(d instanceof Boolean){const x=new Boolean(d.valueOf());return p.set(d,x),u(x,d,A,p,g),x}if(d instanceof Number){const x=new Number(d.valueOf());return p.set(d,x),u(x,d,A,p,g),x}if(d instanceof String){const x=new String(d.valueOf());return p.set(d,x),u(x,d,A,p,g),x}if(typeof d=="object"&&l(d)){const x=Object.create(Object.getPrototypeOf(d));return p.set(d,x),u(x,d,A,p,g),x}return d}function u(d,f,A=d,p,g){const y=[...Object.keys(f),...e.getSymbols(f)];for(let x=0;x<y.length;x++){const w=y[x],E=Object.getOwnPropertyDescriptor(d,w);(E==null||E.writable)&&(d[w]=c(f[w],w,A,p,g))}}function l(d){switch(r.getTag(d)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=o,t.cloneDeepWithImpl=c,t.copyProperties=u})(PI)),PI}var x$;function Cve(){return x$||(x$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=VX();function r(n){return e.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}t.cloneDeep=r})(BI)),BI}var b$;function jve(){return b$||(b$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=HX(),r=Cve();function n(i){return i=r.cloneDeep(i),s=>e.isMatch(s,i)}t.matches=n})(CI)),CI}var FI={},UI={},$I={},w$;function Nve(){return w$||(w$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=VX(),r=H3(),n=QX();function i(s,o){return e.cloneDeepWith(s,(c,u,l,d)=>{const f=o?.(c,u,l,d);if(f!==void 0)return f;if(typeof s=="object"){if(r.getTag(s)===n.objectTag&&typeof s.constructor!="function"){const A={};return d.set(s,A),e.copyProperties(A,s,l,d),A}switch(Object.prototype.toString.call(s)){case n.numberTag:case n.stringTag:case n.booleanTag:{const A=new s.constructor(s?.valueOf());return e.copyProperties(A,s),A}case n.argumentsTag:{const A={};return e.copyProperties(A,s),A.length=s.length,A[Symbol.iterator]=s[Symbol.iterator],A}default:return}}})}t.cloneDeepWith=i})($I)),$I}var E$;function kve(){return E$||(E$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Nve();function r(n){return e.cloneDeepWith(n)}t.cloneDeep=r})(UI)),UI}var HI={},QI={},_$;function zX(){return _$||(_$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function r(n,i=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<i;case"symbol":return!1;case"string":return e.test(n)}}t.isIndex=r})(QI)),QI}var VI={},S$;function Ive(){return S$||(S$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=H3();function r(n){return n!==null&&typeof n=="object"&&e.getTag(n)==="[object Arguments]"}t.isArguments=r})(VI)),VI}var T$;function Lve(){return T$||(T$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=PX(),r=zX(),n=Ive(),i=D3();function s(o,c){let u;if(Array.isArray(c)?u=c:typeof c=="string"&&e.isDeepKey(c)&&o?.[c]==null?u=i.toPath(c):u=[c],u.length===0)return!1;let l=o;for(let d=0;d<u.length;d++){const f=u[d];if((l==null||!Object.hasOwn(l,f))&&!((Array.isArray(l)||n.isArguments(l))&&r.isIndex(f)&&f<l.length))return!1;l=l[f]}return!0}t.has=s})(HI)),HI}var C$;function Bve(){return C$||(C$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=HX(),r=R3(),n=kve(),i=M3(),s=Lve();function o(c,u){switch(typeof c){case"object":{Object.is(c?.valueOf(),-0)&&(c="-0");break}case"number":{c=r.toKey(c);break}}return u=n.cloneDeep(u),function(l){const d=i.get(l,c);return d===void 0?s.has(l,c):u===void 0?d===void 0:e.isMatch(d,u)}}t.matchesProperty=o})(FI)),FI}var j$;function Pve(){return j$||(j$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=MX(),r=Eve(),n=jve(),i=Bve();function s(o){if(o==null)return e.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?i.matchesProperty(o[0],o[1]):n.matches(o);case"string":case"symbol":case"number":return r.property(o)}}t.iteratee=s})(SI)),SI}var N$;function Ove(){return N$||(N$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=vve(),r=yve(),n=MX(),i=wve(),s=Pve();function o(c,u=n.identity){return i.isArrayLikeObject(c)?e.uniqBy(Array.from(c),r.ary(s.iteratee(u),1)):[]}t.uniqBy=o})(gI)),gI}var zI,k$;function Rve(){return k$||(k$=1,zI=Ove().uniqBy),zI}var Dve=Rve();const I$=eA(Dve);function KX(t,e,r){return e===!0?I$(t,r):typeof e=="function"?I$(t,e):t}var KI={exports:{}},GI={},WI={exports:{}},YI={};var L$;function Mve(){if(L$)return YI;L$=1;var t=qb();function e(f,A){return f===A&&(f!==0||1/f===1/A)||f!==f&&A!==A}var r=typeof Object.is=="function"?Object.is:e,n=t.useState,i=t.useEffect,s=t.useLayoutEffect,o=t.useDebugValue;function c(f,A){var p=A(),g=n({inst:{value:p,getSnapshot:A}}),y=g[0].inst,x=g[1];return s(function(){y.value=p,y.getSnapshot=A,u(y)&&x({inst:y})},[f,p,A]),i(function(){return u(y)&&x({inst:y}),f(function(){u(y)&&x({inst:y})})},[f]),o(p),p}function u(f){var A=f.getSnapshot;f=f.value;try{var p=A();return!r(f,p)}catch{return!0}}function l(f,A){return A()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?l:c;return YI.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:d,YI}var B$;function Fve(){return B$||(B$=1,WI.exports=Mve()),WI.exports}var P$;function Uve(){if(P$)return GI;P$=1;var t=qb(),e=Fve();function r(l,d){return l===d&&(l!==0||1/l===1/d)||l!==l&&d!==d}var n=typeof Object.is=="function"?Object.is:r,i=e.useSyncExternalStore,s=t.useRef,o=t.useEffect,c=t.useMemo,u=t.useDebugValue;return GI.useSyncExternalStoreWithSelector=function(l,d,f,A,p){var g=s(null);if(g.current===null){var y={hasValue:!1,value:null};g.current=y}else y=g.current;g=c(function(){function w(I){if(!E){if(E=!0,T=I,I=A(I),p!==void 0&&y.hasValue){var U=y.value;if(p(U,I))return C=U}return C=I}if(U=C,n(T,I))return U;var K=A(I);return p!==void 0&&p(U,K)?(T=I,U):(T=I,C=K)}var E=!1,T,C,N=f===void 0?null:f;return[function(){return w(d())},N===null?void 0:function(){return w(N())}]},[d,f,A,p]);var x=i(l,g[0],g[1]);return o(function(){y.hasValue=!0,y.value=x},[x]),u(x),x},GI}var O$;function $ve(){return O$||(O$=1,KI.exports=Uve()),KI.exports}var Hve=$ve(),Q3=j.createContext(null),Qve=t=>t,Al=()=>{var t=j.useContext(Q3);return t?t.store.dispatch:Qve},qS=()=>{},Vve=()=>qS,zve=(t,e)=>t===e;function si(t){var e=j.useContext(Q3),r=j.useMemo(()=>e?n=>{if(n!=null)return t(n)}:qS,[e,t]);return Hve.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:Vve,e?e.store.getState:qS,e?e.store.getState:qS,r,zve)}function Kve(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function Gve(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function Wve(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(r=>typeof r=="function")){const r=t.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${e}[${r}]`)}}var R$=t=>Array.isArray(t)?t:[t];function Yve(t){const e=Array.isArray(t[0])?t[0]:t;return Wve(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function qve(t,e){const r=[],{length:n}=t;for(let i=0;i<n;i++)r.push(t[i].apply(null,e));return r}var Xve=class{constructor(t){this.value=t}deref(){return this.value}},Zve=typeof WeakRef<"u"?WeakRef:Xve,Jve=0,D$=1;function U_(){return{s:Jve,v:void 0,o:null,p:null}}function GX(t,e={}){let r=U_();const{resultEqualityCheck:n}=e;let i,s=0;function o(){let c=r;const{length:u}=arguments;for(let f=0,A=u;f<A;f++){const p=arguments[f];if(typeof p=="function"||typeof p=="object"&&p!==null){let g=c.o;g===null&&(c.o=g=new WeakMap);const y=g.get(p);y===void 0?(c=U_(),g.set(p,c)):c=y}else{let g=c.p;g===null&&(c.p=g=new Map);const y=g.get(p);y===void 0?(c=U_(),g.set(p,c)):c=y}}const l=c;let d;if(c.s===D$)d=c.v;else if(d=t.apply(null,arguments),s++,n){const f=i?.deref?.()??i;f!=null&&n(f,d)&&(d=f,s!==0&&s--),i=typeof d=="object"&&d!==null||typeof d=="function"?new Zve(d):d}return l.s=D$,l.v=d,d}return o.clearCache=()=>{r=U_(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function eye(t,...e){const r=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,n=(...i)=>{let s=0,o=0,c,u={},l=i.pop();typeof l=="object"&&(u=l,l=i.pop()),Kve(l,`createSelector expects an output function after the inputs, but received: [${typeof l}]`);const d={...r,...u},{memoize:f,memoizeOptions:A=[],argsMemoize:p=GX,argsMemoizeOptions:g=[]}=d,y=R$(A),x=R$(g),w=Yve(i),E=f(function(){return s++,l.apply(null,arguments)},...y),T=p(function(){o++;const N=qve(w,arguments);return c=E.apply(null,N),c},...x);return Object.assign(T,{resultFunc:l,memoizedResultFunc:E,dependencies:w,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>c,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:f,argsMemoize:p})};return Object.assign(n,{withTypes:()=>n}),n}var or=eye(GX),tye=Object.assign((t,e=or)=>{Gve(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const r=Object.keys(t),n=r.map(s=>t[s]);return e(n,(...s)=>s.reduce((o,c,u)=>(o[r[u]]=c,o),{}))},{withTypes:()=>tye}),qI={},XI={},ZI={},M$;function rye(){return M$||(M$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,i,s)=>{if(n!==i){const o=e(n),c=e(i);if(o===c&&o===0){if(n<i)return s==="desc"?1:-1;if(n>i)return s==="desc"?-1:1}return s==="desc"?c-o:o-c}return 0};t.compareValues=r})(ZI)),ZI}var JI={},eL={},F$;function WX(){return F$||(F$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"||r instanceof Symbol}t.isSymbol=e})(eL)),eL}var U$;function nye(){return U$||(U$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=WX(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function i(s,o){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||e.isSymbol(s)?!0:typeof s=="string"&&(n.test(s)||!r.test(s))||o!=null&&Object.hasOwn(o,s)}t.isKey=i})(JI)),JI}var $$;function iye(){return $$||($$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=rye(),r=nye(),n=D3();function i(s,o,c,u){if(s==null)return[];c=u?void 0:c,Array.isArray(s)||(s=Object.values(s)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(c)||(c=c==null?[]:[c]),c=c.map(p=>String(p));const l=(p,g)=>{let y=p;for(let x=0;x<g.length&&y!=null;++x)y=y[g[x]];return y},d=(p,g)=>g==null||p==null?g:typeof p=="object"&&"key"in p?Object.hasOwn(g,p.key)?g[p.key]:l(g,p.path):typeof p=="function"?p(g):Array.isArray(p)?l(g,p):typeof g=="object"?g[p]:g,f=o.map(p=>(Array.isArray(p)&&p.length===1&&(p=p[0]),p==null||typeof p=="function"||Array.isArray(p)||r.isKey(p)?p:{key:p,path:n.toPath(p)}));return s.map(p=>({original:p,criteria:f.map(g=>d(g,p))})).slice().sort((p,g)=>{for(let y=0;y<f.length;y++){const x=e.compareValues(p.criteria[y],g.criteria[y],c[y]);if(x!==0)return x}return 0}).map(p=>p.original)}t.orderBy=i})(XI)),XI}var tL={},H$;function sye(){return H$||(H$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n=1){const i=[],s=Math.floor(n),o=(c,u)=>{for(let l=0;l<c.length;l++){const d=c[l];Array.isArray(d)&&u<s?o(d,u+1):i.push(d)}};return o(r,0),i}t.flatten=e})(tL)),tL}var rL={},Q$;function YX(){return Q$||(Q$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=zX(),r=$3(),n=FX(),i=$X();function s(o,c,u){return n.isObject(u)&&(typeof c=="number"&&r.isArrayLike(u)&&e.isIndex(c)&&c<u.length||typeof c=="string"&&c in u)?i.isEqualsSameValueZero(u[c],o):!1}t.isIterateeCall=s})(rL)),rL}var V$;function aye(){return V$||(V$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=iye(),r=sye(),n=YX();function i(s,...o){const c=o.length;return c>1&&n.isIterateeCall(s,o[0],o[1])?o=[]:c>2&&n.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),e.orderBy(s,r.flatten(o),["asc"])}t.sortBy=i})(qI)),qI}var nL,z$;function oye(){return z$||(z$=1,nL=aye().sortBy),nL}var lye=oye();const UN=eA(lye);var qX=t=>t.legend.settings,cye=t=>t.legend.size,uye=t=>t.legend.payload,dye=or([uye,qX],(t,e)=>{var{itemSorter:r}=e,n=t.flat(1);return r?UN(n,r):n});function hye(){return si(dye)}var $_=1;function XX(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,r]=j.useState({height:0,left:0,top:0,width:0}),n=j.useCallback(i=>{if(i!=null){var s=i.getBoundingClientRect(),o={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(o.height-e.height)>$_||Math.abs(o.left-e.left)>$_||Math.abs(o.top-e.top)>$_||Math.abs(o.width-e.width)>$_)&&r({height:o.height,left:o.left,top:o.top,width:o.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,n]}function Rd(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var fye=typeof Symbol=="function"&&Symbol.observable||"@@observable",K$=fye,iL=()=>Math.random().toString(36).substring(7).split("").join("."),Aye={INIT:`@@redux/INIT${iL()}`,REPLACE:`@@redux/REPLACE${iL()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${iL()}`},MC=Aye;function V3(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function ZX(t,e,r){if(typeof t!="function")throw new Error(Rd(2));if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Rd(0));if(typeof e=="function"&&typeof r>"u"&&(r=e,e=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Rd(1));return r(ZX)(t,e)}let n=t,i=e,s=new Map,o=s,c=0,u=!1;function l(){o===s&&(o=new Map,s.forEach((x,w)=>{o.set(w,x)}))}function d(){if(u)throw new Error(Rd(3));return i}function f(x){if(typeof x!="function")throw new Error(Rd(4));if(u)throw new Error(Rd(5));let w=!0;l();const E=c++;return o.set(E,x),function(){if(w){if(u)throw new Error(Rd(6));w=!1,l(),o.delete(E),s=null}}}function A(x){if(!V3(x))throw new Error(Rd(7));if(typeof x.type>"u")throw new Error(Rd(8));if(typeof x.type!="string")throw new Error(Rd(17));if(u)throw new Error(Rd(9));try{u=!0,i=n(i,x)}finally{u=!1}return(s=o).forEach(E=>{E()}),x}function p(x){if(typeof x!="function")throw new Error(Rd(10));n=x,A({type:MC.REPLACE})}function g(){const x=f;return{subscribe(w){if(typeof w!="object"||w===null)throw new Error(Rd(11));function E(){const C=w;C.next&&C.next(d())}return E(),{unsubscribe:x(E)}},[K$](){return this}}}return A({type:MC.INIT}),{dispatch:A,subscribe:f,getState:d,replaceReducer:p,[K$]:g}}function mye(t){Object.keys(t).forEach(e=>{const r=t[e];if(typeof r(void 0,{type:MC.INIT})>"u")throw new Error(Rd(12));if(typeof r(void 0,{type:MC.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Rd(13))})}function JX(t){const e=Object.keys(t),r={};for(let s=0;s<e.length;s++){const o=e[s];typeof t[o]=="function"&&(r[o]=t[o])}const n=Object.keys(r);let i;try{mye(r)}catch(s){i=s}return function(o={},c){if(i)throw i;let u=!1;const l={};for(let d=0;d<n.length;d++){const f=n[d],A=r[f],p=o[f],g=A(p,c);if(typeof g>"u")throw c&&c.type,new Error(Rd(14));l[f]=g,u=u||g!==p}return u=u||n.length!==Object.keys(o).length,u?l:o}}function FC(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,r)=>(...n)=>e(r(...n)))}function pye(...t){return e=>(r,n)=>{const i=e(r,n);let s=()=>{throw new Error(Rd(15))};const o={getState:i.getState,dispatch:(u,...l)=>s(u,...l)},c=t.map(u=>u(o));return s=FC(...c)(i.dispatch),{...i,dispatch:s}}}function eZ(t){return V3(t)&&"type"in t&&typeof t.type=="string"}var tZ=Symbol.for("immer-nothing"),G$=Symbol.for("immer-draftable"),xh=Symbol.for("immer-state");function IA(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var pf=Object,Ib=pf.getPrototypeOf,UC="constructor",$N="prototype",HB="configurable",$C="enumerable",XS="writable",CE="value",Wp=t=>!!t&&!!t[xh];function MA(t){return t?rZ(t)||QN(t)||!!t[G$]||!!t[UC]?.[G$]||VN(t)||zN(t):!1}var gye=pf[$N][UC].toString(),W$=new WeakMap;function rZ(t){if(!t||!z3(t))return!1;const e=Ib(t);if(e===null||e===pf[$N])return!0;const r=pf.hasOwnProperty.call(e,UC)&&e[UC];if(r===Object)return!0;if(!gx(r))return!1;let n=W$.get(r);return n===void 0&&(n=Function.toString.call(r),W$.set(r,n)),n===gye}function HN(t,e,r=!0){L2(t)===0?(r?Reflect.ownKeys(t):pf.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((n,i)=>e(i,n,t))}function L2(t){const e=t[xh];return e?e.type_:QN(t)?1:VN(t)?2:zN(t)?3:0}var Y$=(t,e,r=L2(t))=>r===2?t.has(e):pf[$N].hasOwnProperty.call(t,e),QB=(t,e,r=L2(t))=>r===2?t.get(e):t[e],HC=(t,e,r,n=L2(t))=>{n===2?t.set(e,r):n===3?t.add(r):t[e]=r};function vye(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}var QN=Array.isArray,VN=t=>t instanceof Map,zN=t=>t instanceof Set,z3=t=>typeof t=="object",gx=t=>typeof t=="function",sL=t=>typeof t=="boolean";function yye(t){const e=+t;return Number.isInteger(e)&&String(e)===t}var Lp=t=>t.copy_||t.base_,K3=t=>t.modified_?t.copy_:t.base_;function VB(t,e){if(VN(t))return new Map(t);if(zN(t))return new Set(t);if(QN(t))return Array[$N].slice.call(t);const r=rZ(t);if(e===!0||e==="class_only"&&!r){const n=pf.getOwnPropertyDescriptors(t);delete n[xh];let i=Reflect.ownKeys(n);for(let s=0;s<i.length;s++){const o=i[s],c=n[o];c[XS]===!1&&(c[XS]=!0,c[HB]=!0),(c.get||c.set)&&(n[o]={[HB]:!0,[XS]:!0,[$C]:c[$C],[CE]:t[o]})}return pf.create(Ib(t),n)}else{const n=Ib(t);if(n!==null&&r)return{...t};const i=pf.create(n);return pf.assign(i,t)}}function G3(t,e=!1){return KN(t)||Wp(t)||!MA(t)||(L2(t)>1&&pf.defineProperties(t,{set:H_,add:H_,clear:H_,delete:H_}),pf.freeze(t),e&&HN(t,(r,n)=>{G3(n,!0)},!1)),t}function xye(){IA(2)}var H_={[CE]:xye};function KN(t){return t===null||!z3(t)?!0:pf.isFrozen(t)}var QC="MapSet",zB="Patches",q$="ArrayMethods",nZ={};function fy(t){const e=nZ[t];return e||IA(0,t),e}var X$=t=>!!nZ[t],jE,iZ=()=>jE,bye=(t,e)=>({drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:X$(QC)?fy(QC):void 0,arrayMethodsPlugin_:X$(q$)?fy(q$):void 0});function Z$(t,e){e&&(t.patchPlugin_=fy(zB),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function KB(t){GB(t),t.drafts_.forEach(wye),t.drafts_=null}function GB(t){t===jE&&(jE=t.parent_)}var J$=t=>jE=bye(jE,t);function wye(t){const e=t[xh];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function e9(t,e){e.unfinalizedDrafts_=e.drafts_.length;const r=e.drafts_[0];if(t!==void 0&&t!==r){r[xh].modified_&&(KB(e),IA(4)),MA(t)&&(t=t9(e,t));const{patchPlugin_:i}=e;i&&i.generateReplacementPatches_(r[xh].base_,t,e)}else t=t9(e,r);return Eye(e,t,!0),KB(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==tZ?t:void 0}function t9(t,e){if(KN(e))return e;const r=e[xh];if(!r)return VC(e,t.handledSet_,t);if(!GN(r,t))return e;if(!r.modified_)return r.base_;if(!r.finalized_){const{callbacks_:n}=r;if(n)for(;n.length>0;)n.pop()(t);oZ(r,t)}return r.copy_}function Eye(t,e,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&G3(e,r)}function sZ(t){t.finalized_=!0,t.scope_.unfinalizedDrafts_--}var GN=(t,e)=>t.scope_===e,_ye=[];function aZ(t,e,r,n){const i=Lp(t),s=t.type_;if(n!==void 0&&QB(i,n,s)===e){HC(i,n,r,s);return}if(!t.draftLocations_){const c=t.draftLocations_=new Map;HN(i,(u,l)=>{if(Wp(l)){const d=c.get(l)||[];d.push(u),c.set(l,d)}})}const o=t.draftLocations_.get(e)??_ye;for(const c of o)HC(i,c,r,s)}function Sye(t,e,r){t.callbacks_.push(function(i){const s=e;if(!s||!GN(s,i))return;i.mapSetPlugin_?.fixSetContents(s);const o=K3(s);aZ(t,s.draft_??s,o,r),oZ(s,i)})}function oZ(t,e){if(t.modified_&&!t.finalized_&&(t.type_===3||t.type_===1&&t.allIndicesReassigned_||(t.assigned_?.size??0)>0)){const{patchPlugin_:n}=e;if(n){const i=n.getPath(t);i&&n.generatePatches_(t,i,e)}sZ(t)}}function Tye(t,e,r){const{scope_:n}=t;if(Wp(r)){const i=r[xh];GN(i,n)&&i.callbacks_.push(function(){ZS(t);const o=K3(i);aZ(t,r,o,e)})}else MA(r)&&t.callbacks_.push(function(){const s=Lp(t);t.type_===3?s.has(r)&&VC(r,n.handledSet_,n):QB(s,e,t.type_)===r&&n.drafts_.length>1&&(t.assigned_.get(e)??!1)===!0&&t.copy_&&VC(QB(t.copy_,e,t.type_),n.handledSet_,n)})}function VC(t,e,r){return!r.immer_.autoFreeze_&&r.unfinalizedDrafts_<1||Wp(t)||e.has(t)||!MA(t)||KN(t)||(e.add(t),HN(t,(n,i)=>{if(Wp(i)){const s=i[xh];if(GN(s,r)){const o=K3(s);HC(t,n,o,t.type_),sZ(s)}}else MA(i)&&VC(i,e,r)})),t}function Cye(t,e){const r=QN(t),n={type_:r?1:0,scope_:e?e.scope_:iZ(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let i=n,s=zC;r&&(i=[n],s=NE);const{revoke:o,proxy:c}=Proxy.revocable(i,s);return n.draft_=c,n.revoke_=o,[c,n]}var zC={get(t,e){if(e===xh)return t;let r=t.scope_.arrayMethodsPlugin_;const n=t.type_===1&&typeof e=="string";if(n&&r?.isArrayOperationMethod(e))return r.createMethodInterceptor(t,e);const i=Lp(t);if(!Y$(i,e,t.type_))return jye(t,i,e);const s=i[e];if(t.finalized_||!MA(s)||n&&t.operationMethod&&r?.isMutatingArrayMethod(t.operationMethod)&&yye(e))return s;if(s===aL(t.base_,e)){ZS(t);const o=t.type_===1?+e:e,c=YB(t.scope_,s,t,o);return t.copy_[o]=c}return s},has(t,e){return e in Lp(t)},ownKeys(t){return Reflect.ownKeys(Lp(t))},set(t,e,r){const n=lZ(Lp(t),e);if(n?.set)return n.set.call(t.draft_,r),!0;if(!t.modified_){const i=aL(Lp(t),e),s=i?.[xh];if(s&&s.base_===r)return t.copy_[e]=r,t.assigned_.set(e,!1),!0;if(vye(r,i)&&(r!==void 0||Y$(t.base_,e,t.type_)))return!0;ZS(t),WB(t)}return t.copy_[e]===r&&(r!==void 0||e in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=r,t.assigned_.set(e,!0),Tye(t,e,r)),!0},deleteProperty(t,e){return ZS(t),aL(t.base_,e)!==void 0||e in t.base_?(t.assigned_.set(e,!1),WB(t)):t.assigned_.delete(e),t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const r=Lp(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{[XS]:!0,[HB]:t.type_!==1||e!=="length",[$C]:n[$C],[CE]:r[e]}},defineProperty(){IA(11)},getPrototypeOf(t){return Ib(t.base_)},setPrototypeOf(){IA(12)}},NE={};for(let t in zC){let e=zC[t];NE[t]=function(){const r=arguments;return r[0]=r[0][0],e.apply(this,r)}}NE.deleteProperty=function(t,e){return NE.set.call(this,t,e,void 0)};NE.set=function(t,e,r){return zC.set.call(this,t[0],e,r,t[0])};function aL(t,e){const r=t[xh];return(r?Lp(r):t)[e]}function jye(t,e,r){const n=lZ(e,r);return n?CE in n?n[CE]:n.get?.call(t.draft_):void 0}function lZ(t,e){if(!(e in t))return;let r=Ib(t);for(;r;){const n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=Ib(r)}}function WB(t){t.modified_||(t.modified_=!0,t.parent_&&WB(t.parent_))}function ZS(t){t.copy_||(t.assigned_=new Map,t.copy_=VB(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var Nye=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(r,n,i)=>{if(gx(r)&&!gx(n)){const o=n;n=r;const c=this;return function(l=o,...d){return c.produce(l,f=>n.call(this,f,...d))}}gx(n)||IA(6),i!==void 0&&!gx(i)&&IA(7);let s;if(MA(r)){const o=J$(this),c=YB(o,r,void 0);let u=!0;try{s=n(c),u=!1}finally{u?KB(o):GB(o)}return Z$(o,i),e9(s,o)}else if(!r||!z3(r)){if(s=n(r),s===void 0&&(s=r),s===tZ&&(s=void 0),this.autoFreeze_&&G3(s,!0),i){const o=[],c=[];fy(zB).generateReplacementPatches_(r,s,{patches_:o,inversePatches_:c}),i(o,c)}return s}else IA(1,r)},this.produceWithPatches=(r,n)=>{if(gx(r))return(c,...u)=>this.produceWithPatches(c,l=>r(l,...u));let i,s;return[this.produce(r,n,(c,u)=>{i=c,s=u}),i,s]},sL(e?.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),sL(e?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),sL(e?.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){MA(e)||IA(8),Wp(e)&&(e=OA(e));const r=J$(this),n=YB(r,e,void 0);return n[xh].isManual_=!0,GB(r),n}finishDraft(e,r){const n=e&&e[xh];(!n||!n.isManual_)&&IA(9);const{scope_:i}=n;return Z$(i,r),e9(void 0,i)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,r){let n;for(n=r.length-1;n>=0;n--){const s=r[n];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}n>-1&&(r=r.slice(n+1));const i=fy(zB).applyPatches_;return Wp(e)?i(e,r):this.produce(e,s=>i(s,r))}};function YB(t,e,r,n){const[i,s]=VN(e)?fy(QC).proxyMap_(e,r):zN(e)?fy(QC).proxySet_(e,r):Cye(e,r);return(r?.scope_??iZ()).drafts_.push(i),s.callbacks_=r?.callbacks_??[],s.key_=n,r&&n!==void 0?Sye(r,s,n):s.callbacks_.push(function(u){u.mapSetPlugin_?.fixSetContents(s);const{patchPlugin_:l}=u;s.modified_&&l&&l.generatePatches_(s,[],u)}),i}function OA(t){return Wp(t)||IA(10,t),cZ(t)}function cZ(t){if(!MA(t)||KN(t))return t;const e=t[xh];let r,n=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,r=VB(t,e.scope_.immer_.useStrictShallowCopy_),n=e.scope_.immer_.shouldUseStrictIteration()}else r=VB(t,!0);return HN(r,(i,s)=>{HC(r,i,cZ(s))},n),e&&(e.finalized_=!1),r}var kye=new Nye,uZ=kye.produce;function dZ(t){return({dispatch:r,getState:n})=>i=>s=>typeof s=="function"?s(r,n,t):i(s)}var Iye=dZ(),Lye=dZ,Bye=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?FC:FC.apply(null,arguments)};function Xf(t,e){function r(...n){if(e){let i=e(...n);if(!i)throw new Error(vf(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:n[0]}}return r.toString=()=>`${t}`,r.type=t,r.match=n=>eZ(n)&&n.type===t,r}var hZ=class Aw extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Aw.prototype)}static get[Symbol.species](){return Aw}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new Aw(...e[0].concat(this)):new Aw(...e.concat(this))}};function r9(t){return MA(t)?uZ(t,()=>{}):t}function Q_(t,e,r){return t.has(e)?t.get(e):t.set(e,r(e)).get(e)}function Pye(t){return typeof t=="boolean"}var Oye=()=>function(e){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=e??{};let o=new hZ;return r&&(Pye(r)?o.push(Iye):o.push(Lye(r.extraArgument))),o},fZ="RTK_autoBatch",ql=()=>t=>({payload:t,meta:{[fZ]:!0}}),n9=t=>e=>{setTimeout(e,t)},AZ=(t={type:"raf"})=>e=>(...r)=>{const n=e(...r);let i=!0,s=!1,o=!1;const c=new Set,u=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:n9(10):t.type==="callback"?t.queueNotification:n9(t.timeout),l=()=>{o=!1,s&&(s=!1,c.forEach(d=>d()))};return Object.assign({},n,{subscribe(d){const f=()=>i&&d(),A=n.subscribe(f);return c.add(d),()=>{A(),c.delete(d)}},dispatch(d){try{return i=!d?.meta?.[fZ],s=!i,s&&(o||(o=!0,u(l))),n.dispatch(d)}finally{i=!0}}})},Rye=t=>function(r){const{autoBatch:n=!0}=r??{};let i=new hZ(t);return n&&i.push(AZ(typeof n=="object"?n:void 0)),i};function Dye(t){const e=Oye(),{reducer:r=void 0,middleware:n,devTools:i=!0,preloadedState:s=void 0,enhancers:o=void 0}=t||{};let c;if(typeof r=="function")c=r;else if(V3(r))c=JX(r);else throw new Error(vf(1));let u;typeof n=="function"?u=n(e):u=e();let l=FC;i&&(l=Bye({trace:!1,...typeof i=="object"&&i}));const d=pye(...u),f=Rye(d);let A=typeof o=="function"?o(f):f();const p=l(...A);return ZX(c,s,p)}function mZ(t){const e={},r=[];let n;const i={addCase(s,o){const c=typeof s=="string"?s:s.type;if(!c)throw new Error(vf(28));if(c in e)throw new Error(vf(29));return e[c]=o,i},addAsyncThunk(s,o){return o.pending&&(e[s.pending.type]=o.pending),o.rejected&&(e[s.rejected.type]=o.rejected),o.fulfilled&&(e[s.fulfilled.type]=o.fulfilled),o.settled&&r.push({matcher:s.settled,reducer:o.settled}),i},addMatcher(s,o){return r.push({matcher:s,reducer:o}),i},addDefaultCase(s){return n=s,i}};return t(i),[e,r,n]}function Mye(t){return typeof t=="function"}function Fye(t,e){let[r,n,i]=mZ(e),s;if(Mye(t))s=()=>r9(t());else{const c=r9(t);s=()=>c}function o(c=s(),u){let l=[r[u.type],...n.filter(({matcher:d})=>d(u)).map(({reducer:d})=>d)];return l.filter(d=>!!d).length===0&&(l=[i]),l.reduce((d,f)=>{if(f)if(Wp(d)){const p=f(d,u);return p===void 0?d:p}else{if(MA(d))return uZ(d,A=>f(A,u));{const A=f(d,u);if(A===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return A}}return d},c)}return o.getInitialState=s,o}var Uye="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",$ye=(t=21)=>{let e="",r=t;for(;r--;)e+=Uye[Math.random()*64|0];return e},Hye=Symbol.for("rtk-slice-createasyncthunk");function Qye(t,e){return`${t}/${e}`}function Vye({creators:t}={}){const e=t?.asyncThunk?.[Hye];return function(n){const{name:i,reducerPath:s=i}=n;if(!i)throw new Error(vf(11));const o=(typeof n.reducers=="function"?n.reducers(Kye()):n.reducers)||{},c=Object.keys(o),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},l={addCase(T,C){const N=typeof T=="string"?T:T.type;if(!N)throw new Error(vf(12));if(N in u.sliceCaseReducersByType)throw new Error(vf(13));return u.sliceCaseReducersByType[N]=C,l},addMatcher(T,C){return u.sliceMatchers.push({matcher:T,reducer:C}),l},exposeAction(T,C){return u.actionCreators[T]=C,l},exposeCaseReducer(T,C){return u.sliceCaseReducersByName[T]=C,l}};c.forEach(T=>{const C=o[T],N={reducerName:T,type:Qye(i,T),createNotation:typeof n.reducers=="function"};Wye(C)?qye(N,C,l,e):Gye(N,C,l)});function d(){const[T={},C=[],N=void 0]=typeof n.extraReducers=="function"?mZ(n.extraReducers):[n.extraReducers],I={...T,...u.sliceCaseReducersByType};return Fye(n.initialState,U=>{for(let K in I)U.addCase(K,I[K]);for(let K of u.sliceMatchers)U.addMatcher(K.matcher,K.reducer);for(let K of C)U.addMatcher(K.matcher,K.reducer);N&&U.addDefaultCase(N)})}const f=T=>T,A=new Map,p=new WeakMap;let g;function y(T,C){return g||(g=d()),g(T,C)}function x(){return g||(g=d()),g.getInitialState()}function w(T,C=!1){function N(U){let K=U[T];return typeof K>"u"&&C&&(K=Q_(p,N,x)),K}function I(U=f){const K=Q_(A,C,()=>new WeakMap);return Q_(K,U,()=>{const Y={};for(const[re,se]of Object.entries(n.selectors??{}))Y[re]=zye(se,U,()=>Q_(p,U,x),C);return Y})}return{reducerPath:T,getSelectors:I,get selectors(){return I(N)},selectSlice:N}}const E={name:i,reducer:y,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:x,...w(s),injectInto(T,{reducerPath:C,...N}={}){const I=C??s;return T.inject({reducerPath:I,reducer:y},N),{...E,...w(I,!0)}}};return E}}function zye(t,e,r,n){function i(s,...o){let c=e(s);return typeof c>"u"&&n&&(c=r()),t(c,...o)}return i.unwrapped=t,i}var Qh=Vye();function Kye(){function t(e,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...r}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...r){return e(...r)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:r}},asyncThunk:t}}function Gye({type:t,reducerName:e,createNotation:r},n,i){let s,o;if("reducer"in n){if(r&&!Yye(n))throw new Error(vf(17));s=n.reducer,o=n.prepare}else s=n;i.addCase(t,s).exposeCaseReducer(e,s).exposeAction(e,o?Xf(t,o):Xf(t))}function Wye(t){return t._reducerDefinitionType==="asyncThunk"}function Yye(t){return t._reducerDefinitionType==="reducerWithPrepare"}function qye({type:t,reducerName:e},r,n,i){if(!i)throw new Error(vf(18));const{payloadCreator:s,fulfilled:o,pending:c,rejected:u,settled:l,options:d}=r,f=i(t,s,d);n.exposeAction(e,f),o&&n.addCase(f.fulfilled,o),c&&n.addCase(f.pending,c),u&&n.addCase(f.rejected,u),l&&n.addMatcher(f.settled,l),n.exposeCaseReducer(e,{fulfilled:o||V_,pending:c||V_,rejected:u||V_,settled:l||V_})}function V_(){}var Xye="task",pZ="listener",gZ="completed",W3="cancelled",Zye=`task-${W3}`,Jye=`task-${gZ}`,qB=`${pZ}-${W3}`,exe=`${pZ}-${gZ}`,WN=class{constructor(t){this.code=t,this.message=`${Xye} ${W3} (reason: ${t})`}name="TaskAbortError";message},Y3=(t,e)=>{if(typeof t!="function")throw new TypeError(vf(32))},KC=()=>{},vZ=(t,e=KC)=>(t.catch(e),t),yZ=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),Wv=t=>{if(t.aborted)throw new WN(t.reason)};function xZ(t,e){let r=KC;return new Promise((n,i)=>{const s=()=>i(new WN(t.reason));if(t.aborted){s();return}r=yZ(t,s),e.finally(()=>r()).then(n,i)}).finally(()=>{r=KC})}var txe=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(r){return{status:r instanceof WN?"cancelled":"rejected",error:r}}finally{e?.()}},GC=t=>e=>vZ(xZ(t,e).then(r=>(Wv(t),r))),bZ=t=>{const e=GC(t);return r=>e(new Promise(n=>setTimeout(n,r)))},{assign:ub}=Object,i9={},YN="listenerMiddleware",rxe=(t,e)=>{const r=n=>yZ(t,()=>n.abort(t.reason));return(n,i)=>{Y3(n);const s=new AbortController;r(s);const o=txe(async()=>{Wv(t),Wv(s.signal);const c=await n({pause:GC(s.signal),delay:bZ(s.signal),signal:s.signal});return Wv(s.signal),c},()=>s.abort(Jye));return i?.autoJoin&&e.push(o.catch(KC)),{result:GC(t)(o),cancel(){s.abort(Zye)}}}},nxe=(t,e)=>{const r=async(n,i)=>{Wv(e);let s=()=>{};const c=[new Promise((u,l)=>{let d=t({predicate:n,effect:(f,A)=>{A.unsubscribe(),u([f,A.getState(),A.getOriginalState()])}});s=()=>{d(),l()}})];i!=null&&c.push(new Promise(u=>setTimeout(u,i,null)));try{const u=await xZ(e,Promise.race(c));return Wv(e),u}finally{s()}};return(n,i)=>vZ(r(n,i))},wZ=t=>{let{type:e,actionCreator:r,matcher:n,predicate:i,effect:s}=t;if(e)i=Xf(e).match;else if(r)e=r.type,i=r.match;else if(n)i=n;else if(!i)throw new Error(vf(21));return Y3(s),{predicate:i,type:e,effect:s}},EZ=ub(t=>{const{type:e,predicate:r,effect:n}=wZ(t);return{id:$ye(),effect:n,type:e,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(vf(22))}}},{withTypes:()=>EZ}),s9=(t,e)=>{const{type:r,effect:n,predicate:i}=wZ(e);return Array.from(t.values()).find(s=>(typeof r=="string"?s.type===r:s.predicate===i)&&s.effect===n)},XB=t=>{t.pending.forEach(e=>{e.abort(qB)})},ixe=(t,e)=>()=>{for(const r of e.keys())XB(r);t.clear()},a9=(t,e,r)=>{try{t(e,r)}catch(n){setTimeout(()=>{throw n},0)}},_Z=ub(Xf(`${YN}/add`),{withTypes:()=>_Z}),sxe=Xf(`${YN}/removeAll`),SZ=ub(Xf(`${YN}/remove`),{withTypes:()=>SZ}),axe=(...t)=>{console.error(`${YN}/error`,...t)},B2=(t={})=>{const e=new Map,r=new Map,n=p=>{const g=r.get(p)??0;r.set(p,g+1)},i=p=>{const g=r.get(p)??1;g===1?r.delete(p):r.set(p,g-1)},{extra:s,onError:o=axe}=t;Y3(o);const c=p=>(p.unsubscribe=()=>e.delete(p.id),e.set(p.id,p),g=>{p.unsubscribe(),g?.cancelActive&&XB(p)}),u=p=>{const g=s9(e,p)??EZ(p);return c(g)};ub(u,{withTypes:()=>u});const l=p=>{const g=s9(e,p);return g&&(g.unsubscribe(),p.cancelActive&&XB(g)),!!g};ub(l,{withTypes:()=>l});const d=async(p,g,y,x)=>{const w=new AbortController,E=nxe(u,w.signal),T=[];try{p.pending.add(w),n(p),await Promise.resolve(p.effect(g,ub({},y,{getOriginalState:x,condition:(C,N)=>E(C,N).then(Boolean),take:E,delay:bZ(w.signal),pause:GC(w.signal),extra:s,signal:w.signal,fork:rxe(w.signal,T),unsubscribe:p.unsubscribe,subscribe:()=>{e.set(p.id,p)},cancelActiveListeners:()=>{p.pending.forEach((C,N,I)=>{C!==w&&(C.abort(qB),I.delete(C))})},cancel:()=>{w.abort(qB),p.pending.delete(w)},throwIfCancelled:()=>{Wv(w.signal)}})))}catch(C){C instanceof WN||a9(o,C,{raisedBy:"effect"})}finally{await Promise.all(T),w.abort(exe),i(p),p.pending.delete(w)}},f=ixe(e,r);return{middleware:p=>g=>y=>{if(!eZ(y))return g(y);if(_Z.match(y))return u(y.payload);if(sxe.match(y)){f();return}if(SZ.match(y))return l(y.payload);let x=p.getState();const w=()=>{if(x===i9)throw new Error(vf(23));return x};let E;try{if(E=g(y),e.size>0){const T=p.getState(),C=Array.from(e.values());for(const N of C){let I=!1;try{I=N.predicate(y,T,x)}catch(U){I=!1,a9(o,U,{raisedBy:"predicate"})}I&&d(N,y,p,w)}}}finally{x=i9}return E},startListening:u,stopListening:l,clearListeners:f}};function vf(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var oxe={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},TZ=Qh({name:"chartLayout",initialState:oxe,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var r,n,i,s;t.margin.top=(r=e.payload.top)!==null&&r!==void 0?r:0,t.margin.right=(n=e.payload.right)!==null&&n!==void 0?n:0,t.margin.bottom=(i=e.payload.bottom)!==null&&i!==void 0?i:0,t.margin.left=(s=e.payload.left)!==null&&s!==void 0?s:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:lxe,setLayout:cxe,setChartSize:uxe,setScale:dxe}=TZ.actions,hxe=TZ.reducer;function CZ(t,e,r){return Array.isArray(t)&&t&&e+r!==0?t.slice(e,r+1):t}function Ha(t){return Number.isFinite(t)}function Gm(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function o9(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Xx(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?o9(Object(r),!0).forEach(function(n){fxe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o9(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function fxe(t,e,r){return(e=Axe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Axe(t){var e=mxe(t,"string");return typeof e=="symbol"?e:e+""}function mxe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function dl(t,e,r){return ru(t)||ru(e)?r:Km(e)?dy(t,e,r):typeof e=="function"?e(t):r}var pxe=(t,e,r)=>{if(e&&r){var{width:n,height:i}=r,{align:s,verticalAlign:o,layout:c}=e;if((c==="vertical"||c==="horizontal"&&o==="middle")&&s!=="center"&&Ei(t[s]))return Xx(Xx({},t),{},{[s]:t[s]+(n||0)});if((c==="horizontal"||c==="vertical"&&s==="center")&&o!=="middle"&&Ei(t[o]))return Xx(Xx({},t),{},{[o]:t[o]+(i||0)})}return t},ig=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",jZ=(t,e,r,n)=>{if(n)return t.map(c=>c.coordinate);var i,s,o=t.map(c=>(c.coordinate===e&&(i=!0),c.coordinate===r&&(s=!0),c.coordinate));return i||o.push(e),s||o.push(r),o},NZ=(t,e,r)=>{if(!t)return null;var{duplicateDomain:n,type:i,range:s,scale:o,realScaleType:c,isCategorical:u,categoricalDomain:l,tickCount:d,ticks:f,niceTicks:A,axisType:p}=t;if(!o)return null;var g=c==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,y=i==="category"&&o.bandwidth?o.bandwidth()/g:0;if(y=p==="angleAxis"&&s&&s.length>=2?Ad(s[0]-s[1])*2*y:y,f||A){var x=(f||A||[]).map((w,E)=>{var T=n?n.indexOf(w):w,C=o.map(T);return Ha(C)?{coordinate:C+y,value:w,offset:y,index:E}:null}).filter(Dh);return x}return u&&l?l.map((w,E)=>{var T=o.map(w);return Ha(T)?{coordinate:T+y,value:w,index:E,offset:y}:null}).filter(Dh):o.ticks&&d!=null?o.ticks(d).map((w,E)=>{var T=o.map(w);return Ha(T)?{coordinate:T+y,value:w,index:E,offset:y}:null}).filter(Dh):o.domain().map((w,E)=>{var T=o.map(w);return Ha(T)?{coordinate:T+y,value:n?n[w]:w,index:E,offset:y}:null}).filter(Dh)},gxe=(t,e)=>{if(!e||e.length!==2||!Ei(e[0])||!Ei(e[1]))return t;var r=Math.min(e[0],e[1]),n=Math.max(e[0],e[1]),i=[t[0],t[1]];return(!Ei(t[0])||t[0]<r)&&(i[0]=r),(!Ei(t[1])||t[1]>n)&&(i[1]=n),i[0]>n&&(i[0]=n),i[1]<r&&(i[1]=r),i},vxe=t=>{var e,r=t.length;if(!(r<=0)){var n=(e=t[0])===null||e===void 0?void 0:e.length;if(!(n==null||n<=0))for(var i=0;i<n;++i)for(var s=0,o=0,c=0;c<r;++c){var u=t[c],l=u?.[i];if(l!=null){var d=l[1],f=l[0],A=zm(d)?f:d;A>=0?(l[0]=s,s+=A,l[1]=s):(l[0]=o,o+=A,l[1]=o)}}}},yxe=t=>{var e,r=t.length;if(!(r<=0)){var n=(e=t[0])===null||e===void 0?void 0:e.length;if(!(n==null||n<=0))for(var i=0;i<n;++i)for(var s=0,o=0;o<r;++o){var c=t[o],u=c?.[i];if(u!=null){var l=zm(u[1])?u[0]:u[1];l>=0?(u[0]=s,s+=l,u[1]=s):(u[0]=0,u[1]=0)}}}},xxe={sign:vxe,expand:F0e,none:uy,silhouette:U0e,wiggle:$0e,positive:yxe},bxe=(t,e,r)=>{var n,i=(n=xxe[r])!==null&&n!==void 0?n:uy,s=M0e().keys(e).value((c,u)=>Number(dl(c,u,0))).order(UB).offset(i),o=s(t);return o.forEach((c,u)=>{c.forEach((l,d)=>{var f=dl(t[d],e[u],0);Array.isArray(f)&&f.length===2&&Ei(f[0])&&Ei(f[1])&&(l[0]=f[0],l[1]=f[1])})}),o};function wxe(t){return t==null?void 0:String(t)}var l9=t=>{var{axis:e,ticks:r,offset:n,bandSize:i,entry:s,index:o}=t;if(e.type==="category")return r[o]?r[o].coordinate+n:null;var c=dl(s,e.dataKey,e.scale.domain()[o]);if(ru(c))return null;var u=e.scale.map(c);return Ei(u)?u-i/2+n:null},Exe=t=>{var{numericAxis:e}=t,r=e.scale.domain();if(e.type==="number"){var n=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]);return n<=0&&i>=0?0:i<0?i:n}return r[0]},_xe=t=>{var e=t.flat(2).filter(Ei);return[Math.min(...e),Math.max(...e)]},Sxe=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],Txe=(t,e,r)=>{if(t!=null)return Sxe(Object.keys(t).reduce((n,i)=>{var s=t[i];if(!s)return n;var{stackedData:o}=s,c=o.reduce((u,l)=>{var d=CZ(l,e,r),f=_xe(d);return!Ha(f[0])||!Ha(f[1])?u:[Math.min(u[0],f[0]),Math.max(u[1],f[1])]},[1/0,-1/0]);return[Math.min(c[0],n[0]),Math.max(c[1],n[1])]},[1/0,-1/0]))},c9=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,u9=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Lb=(t,e,r)=>{if(t&&t.scale&&t.scale.bandwidth){var n=t.scale.bandwidth();if(!r||n>0)return n}if(t&&e&&e.length>=2){for(var i=UN(e,d=>d.coordinate),s=1/0,o=1,c=i.length;o<c;o++){var u=i[o],l=i[o-1];s=Math.min((u?.coordinate||0)-(l?.coordinate||0),s)}return s===1/0?0:s}return r?void 0:0};function d9(t){var{tooltipEntrySettings:e,dataKey:r,payload:n,value:i,name:s}=t;return Xx(Xx({},e),{},{dataKey:r,payload:n,value:i,name:s})}function s1(t,e){if(t)return String(t);if(typeof e=="string")return e}var Cxe=(t,e)=>{if(e==="horizontal")return t.chartX;if(e==="vertical")return t.chartY},jxe=(t,e)=>e==="centric"?t.angle:t.radius,sg=t=>t.layout.width,ag=t=>t.layout.height,Nxe=t=>t.layout.scale,kZ=t=>t.layout.margin,qN=or(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),XN=or(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),IZ="data-recharts-item-index",LZ="data-recharts-item-id",P2=60;function h9(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function z_(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?h9(Object(r),!0).forEach(function(n){kxe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):h9(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function kxe(t,e,r){return(e=Ixe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ixe(t){var e=Lxe(t,"string");return typeof e=="symbol"?e:e+""}function Lxe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Bxe=t=>t.brush.height;function Pxe(t){var e=XN(t);return e.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var i=typeof n.width=="number"?n.width:P2;return r+i}return r},0)}function Oxe(t){var e=XN(t);return e.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var i=typeof n.width=="number"?n.width:P2;return r+i}return r},0)}function Rxe(t){var e=qN(t);return e.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function Dxe(t){var e=qN(t);return e.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var Vu=or([sg,ag,kZ,Bxe,Pxe,Oxe,Rxe,Dxe,qX,cye],(t,e,r,n,i,s,o,c,u,l)=>{var d={left:(r.left||0)+i,right:(r.right||0)+s},f={top:(r.top||0)+o,bottom:(r.bottom||0)+c},A=z_(z_({},f),d),p=A.bottom;A.bottom+=n,A=pxe(A,u,l);var g=t-A.left-A.right,y=e-A.top-A.bottom;return z_(z_({brushBottom:p},A),{},{width:Math.max(g,0),height:Math.max(y,0)})}),Mxe=or(Vu,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),q3=or(sg,ag,(t,e)=>({x:0,y:0,width:t,height:e})),Fxe=j.createContext(null),nh=()=>j.useContext(Fxe)!=null,ZN=t=>t.brush,JN=or([ZN,Vu,kZ],(t,e,r)=>({height:t.height,x:Ei(t.x)?t.x:e.left,y:Ei(t.y)?t.y:e.top+e.height+e.brushBottom-(r?.bottom||0),width:Ei(t.width)?t.width:e.width})),oL={},lL={},cL={},f9;function Uxe(){return f9||(f9=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n,{signal:i,edges:s}={}){let o,c=null;const u=s!=null&&s.includes("leading"),l=s==null||s.includes("trailing"),d=()=>{c!==null&&(r.apply(o,c),o=void 0,c=null)},f=()=>{l&&d(),y()};let A=null;const p=()=>{A!=null&&clearTimeout(A),A=setTimeout(()=>{A=null,f()},n)},g=()=>{A!==null&&(clearTimeout(A),A=null)},y=()=>{g(),o=void 0,c=null},x=()=>{d()},w=function(...E){if(i?.aborted)return;o=this,c=E;const T=A==null;p(),u&&T&&d()};return w.schedule=p,w.cancel=y,w.flush=x,i?.addEventListener("abort",y,{once:!0}),w}t.debounce=e})(cL)),cL}var A9;function $xe(){return A9||(A9=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Uxe();function r(n,i=0,s={}){typeof s!="object"&&(s={});const{leading:o=!1,trailing:c=!0,maxWait:u}=s,l=Array(2);o&&(l[0]="leading"),c&&(l[1]="trailing");let d,f=null;const A=e.debounce(function(...y){d=n.apply(this,y),f=null},i,{edges:l}),p=function(...y){return u!=null&&(f===null&&(f=Date.now()),Date.now()-f>=u)?(d=n.apply(this,y),f=Date.now(),A.cancel(),A.schedule(),d):(A.apply(this,y),d)},g=()=>(A.flush(),d);return p.cancel=A.cancel,p.flush=g,p}t.debounce=r})(lL)),lL}var m9;function Hxe(){return m9||(m9=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=$xe();function r(n,i=0,s={}){const{leading:o=!0,trailing:c=!0}=s;return e.debounce(n,i,{leading:o,maxWait:i,trailing:c})}t.throttle=r})(oL)),oL}var uL,p9;function Qxe(){return p9||(p9=1,uL=Hxe().throttle),uL}var Vxe=Qxe();const zxe=eA(Vxe);var WC=function(e,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),s=2;s<n;s++)i[s-2]=arguments[s];if(typeof console<"u"&&console.warn&&(r===void 0&&console.warn("LogUtils requires an error message argument"),!e))if(r===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var o=0;console.warn(r.replace(/%s/g,()=>i[o++]))}},Bm={width:"100%",height:"100%",debounce:0,minWidth:0,initialDimension:{width:-1,height:-1}},BZ=(t,e,r)=>{var{width:n=Bm.width,height:i=Bm.height,aspect:s,maxHeight:o}=r,c=hy(n)?t:Number(n),u=hy(i)?e:Number(i);return s&&s>0&&(c?u=c/s:u&&(c=u*s),o&&u!=null&&u>o&&(u=o)),{calculatedWidth:c,calculatedHeight:u}},Kxe={width:0,height:0,overflow:"visible"},Gxe={width:0,overflowX:"visible"},Wxe={height:0,overflowY:"visible"},Yxe={},qxe=t=>{var{width:e,height:r}=t,n=hy(e),i=hy(r);return n&&i?Kxe:n?Gxe:i?Wxe:Yxe};function Xxe(t){var{width:e,height:r,aspect:n}=t,i=e,s=r;return i===void 0&&s===void 0?(i=Bm.width,s=Bm.height):i===void 0?i=n&&n>0?void 0:Bm.width:s===void 0&&(s=n&&n>0?void 0:Bm.height),{width:i,height:s}}function ZB(){return ZB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ZB.apply(null,arguments)}function g9(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function v9(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?g9(Object(r),!0).forEach(function(n){Zxe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):g9(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Zxe(t,e,r){return(e=Jxe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Jxe(t){var e=ebe(t,"string");return typeof e=="symbol"?e:e+""}function ebe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var PZ=j.createContext(Bm.initialDimension);function tbe(t){return Gm(t.width)&&Gm(t.height)}function OZ(t){var{children:e,width:r,height:n}=t,i=j.useMemo(()=>({width:r,height:n}),[r,n]);return tbe(i)?j.createElement(PZ.Provider,{value:i},e):null}var X3=()=>j.useContext(PZ),rbe=j.forwardRef((t,e)=>{var{aspect:r,initialDimension:n=Bm.initialDimension,width:i,height:s,minWidth:o=Bm.minWidth,minHeight:c,maxHeight:u,children:l,debounce:d=Bm.debounce,id:f,className:A,onResize:p,style:g={}}=t,y=j.useRef(null),x=j.useRef();x.current=p,j.useImperativeHandle(e,()=>y.current);var[w,E]=j.useState({containerWidth:n.width,containerHeight:n.height}),T=j.useCallback((K,Y)=>{E(re=>{var se=Math.round(K),Ae=Math.round(Y);return re.containerWidth===se&&re.containerHeight===Ae?re:{containerWidth:se,containerHeight:Ae}})},[]);j.useEffect(()=>{if(y.current==null||typeof ResizeObserver>"u")return H0;var K=Ae=>{var we,Ce=Ae[0];if(Ce!=null){var{width:ve,height:ne}=Ce.contentRect;T(ve,ne),(we=x.current)===null||we===void 0||we.call(x,ve,ne)}};d>0&&(K=zxe(K,d,{trailing:!0,leading:!1}));var Y=new ResizeObserver(K),{width:re,height:se}=y.current.getBoundingClientRect();return T(re,se),Y.observe(y.current),()=>{Y.disconnect()}},[T,d]);var{containerWidth:C,containerHeight:N}=w;WC(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:I,calculatedHeight:U}=BZ(C,N,{width:i,height:s,aspect:r,maxHeight:u});return WC(I!=null&&I>0||U!=null&&U>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,I,U,i,s,o,c,r),j.createElement("div",{id:f?"".concat(f):void 0,className:Sa("recharts-responsive-container",A),style:v9(v9({},g),{},{width:i,height:s,minWidth:o,minHeight:c,maxHeight:u}),ref:y},j.createElement("div",{style:qxe({width:i,height:s})},j.createElement(OZ,{width:I,height:U},l)))}),YC=j.forwardRef((t,e)=>{var r=X3();if(Gm(r.width)&&Gm(r.height))return t.children;var{width:n,height:i}=Xxe({width:t.width,height:t.height,aspect:t.aspect}),{calculatedWidth:s,calculatedHeight:o}=BZ(void 0,void 0,{width:n,height:i,aspect:t.aspect,maxHeight:t.maxHeight});return Ei(s)&&Ei(o)?j.createElement(OZ,{width:s,height:o},t.children):j.createElement(rbe,ZB({},t,{width:n,height:i,ref:e}))});function Z3(t){if(t)return{x:t.x,y:t.y,upperWidth:"upperWidth"in t?t.upperWidth:t.width,lowerWidth:"lowerWidth"in t?t.lowerWidth:t.width,width:t.width,height:t.height}}var e5=()=>{var t,e=nh(),r=si(Mxe),n=si(JN),i=(t=si(ZN))===null||t===void 0?void 0:t.padding;return!e||!n||!i?r:{width:n.width-i.left-i.right,height:n.height-i.top-i.bottom,x:i.left,y:i.top}},nbe={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},RZ=()=>{var t;return(t=si(Vu))!==null&&t!==void 0?t:nbe},J3=()=>si(sg),eD=()=>si(ag),ibe=()=>si(t=>t.layout.margin),Wa=t=>t.layout.layoutType,a1=()=>si(Wa),DZ=()=>{var t=a1();if(t==="horizontal"||t==="vertical")return t},tD=t=>{var e=t.layout.layoutType;if(e==="centric"||e==="radial")return e},sbe=()=>si(tD),abe=()=>{var t=a1();return t!==void 0},O2=t=>{var e=Al(),r=nh(),{width:n,height:i}=t,s=X3(),o=n,c=i;return s&&(o=s.width>0?s.width:n,c=s.height>0?s.height:i),j.useEffect(()=>{!r&&Gm(o)&&Gm(c)&&e(uxe({width:o,height:c}))},[e,r,o,c]),null},MZ=Symbol.for("immer-nothing"),y9=Symbol.for("immer-draftable"),bf=Symbol.for("immer-state");function LA(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var kE=Object.getPrototypeOf;function Bb(t){return!!t&&!!t[bf]}function Ay(t){return t?FZ(t)||Array.isArray(t)||!!t[y9]||!!t.constructor?.[y9]||R2(t)||r5(t):!1}var obe=Object.prototype.constructor.toString(),x9=new WeakMap;function FZ(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);if(e===null||e===Object.prototype)return!0;const r=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let n=x9.get(r);return n===void 0&&(n=Function.toString.call(r),x9.set(r,n)),n===obe}function qC(t,e,r=!0){t5(t)===0?(r?Reflect.ownKeys(t):Object.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((n,i)=>e(i,n,t))}function t5(t){const e=t[bf];return e?e.type_:Array.isArray(t)?1:R2(t)?2:r5(t)?3:0}function JB(t,e){return t5(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function UZ(t,e,r){const n=t5(t);n===2?t.set(e,r):n===3?t.add(r):t[e]=r}function lbe(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function R2(t){return t instanceof Map}function r5(t){return t instanceof Set}function gv(t){return t.copy_||t.base_}function eP(t,e){if(R2(t))return new Map(t);if(r5(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const r=FZ(t);if(e===!0||e==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(t);delete n[bf];let i=Reflect.ownKeys(n);for(let s=0;s<i.length;s++){const o=i[s],c=n[o];c.writable===!1&&(c.writable=!0,c.configurable=!0),(c.get||c.set)&&(n[o]={configurable:!0,writable:!0,enumerable:c.enumerable,value:t[o]})}return Object.create(kE(t),n)}else{const n=kE(t);if(n!==null&&r)return{...t};const i=Object.create(n);return Object.assign(i,t)}}function rD(t,e=!1){return n5(t)||Bb(t)||!Ay(t)||(t5(t)>1&&Object.defineProperties(t,{set:K_,add:K_,clear:K_,delete:K_}),Object.freeze(t),e&&Object.values(t).forEach(r=>rD(r,!0))),t}function cbe(){LA(2)}var K_={value:cbe};function n5(t){return t===null||typeof t!="object"?!0:Object.isFrozen(t)}var ube={};function my(t){const e=ube[t];return e||LA(0,t),e}var IE;function $Z(){return IE}function dbe(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function b9(t,e){e&&(my("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function tP(t){rP(t),t.drafts_.forEach(hbe),t.drafts_=null}function rP(t){t===IE&&(IE=t.parent_)}function w9(t){return IE=dbe(IE,t)}function hbe(t){const e=t[bf];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function E9(t,e){e.unfinalizedDrafts_=e.drafts_.length;const r=e.drafts_[0];return t!==void 0&&t!==r?(r[bf].modified_&&(tP(e),LA(4)),Ay(t)&&(t=XC(e,t),e.parent_||ZC(e,t)),e.patches_&&my("Patches").generateReplacementPatches_(r[bf].base_,t,e.patches_,e.inversePatches_)):t=XC(e,r,[]),tP(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==MZ?t:void 0}function XC(t,e,r){if(n5(e))return e;const n=t.immer_.shouldUseStrictIteration(),i=e[bf];if(!i)return qC(e,(s,o)=>_9(t,i,e,s,o,r),n),e;if(i.scope_!==t)return e;if(!i.modified_)return ZC(t,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const s=i.copy_;let o=s,c=!1;i.type_===3&&(o=new Set(s),s.clear(),c=!0),qC(o,(u,l)=>_9(t,i,s,u,l,r,c),n),ZC(t,s,!1),r&&t.patches_&&my("Patches").generatePatches_(i,r,t.patches_,t.inversePatches_)}return i.copy_}function _9(t,e,r,n,i,s,o){if(i==null||typeof i!="object"&&!o)return;const c=n5(i);if(!(c&&!o)){if(Bb(i)){const u=s&&e&&e.type_!==3&&!JB(e.assigned_,n)?s.concat(n):void 0,l=XC(t,i,u);if(UZ(r,n,l),Bb(l))t.canAutoFreeze_=!1;else return}else o&&r.add(i);if(Ay(i)&&!c){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||e&&e.base_&&e.base_[n]===i&&c)return;XC(t,i),(!e||!e.scope_.parent_)&&typeof n!="symbol"&&(R2(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&ZC(t,i)}}}function ZC(t,e,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&rD(e,r)}function fbe(t,e){const r=Array.isArray(t),n={type_:r?1:0,scope_:e?e.scope_:$Z(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=n,s=nD;r&&(i=[n],s=LE);const{revoke:o,proxy:c}=Proxy.revocable(i,s);return n.draft_=c,n.revoke_=o,c}var nD={get(t,e){if(e===bf)return t;const r=gv(t);if(!JB(r,e))return Abe(t,r,e);const n=r[e];return t.finalized_||!Ay(n)?n:n===dL(t.base_,e)?(hL(t),t.copy_[e]=iP(n,t)):n},has(t,e){return e in gv(t)},ownKeys(t){return Reflect.ownKeys(gv(t))},set(t,e,r){const n=HZ(gv(t),e);if(n?.set)return n.set.call(t.draft_,r),!0;if(!t.modified_){const i=dL(gv(t),e),s=i?.[bf];if(s&&s.base_===r)return t.copy_[e]=r,t.assigned_[e]=!1,!0;if(lbe(r,i)&&(r!==void 0||JB(t.base_,e)))return!0;hL(t),nP(t)}return t.copy_[e]===r&&(r!==void 0||e in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=r,t.assigned_[e]=!0),!0},deleteProperty(t,e){return dL(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,hL(t),nP(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const r=gv(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:n.enumerable,value:r[e]}},defineProperty(){LA(11)},getPrototypeOf(t){return kE(t.base_)},setPrototypeOf(){LA(12)}},LE={};qC(nD,(t,e)=>{LE[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});LE.deleteProperty=function(t,e){return LE.set.call(this,t,e,void 0)};LE.set=function(t,e,r){return nD.set.call(this,t[0],e,r,t[0])};function dL(t,e){const r=t[bf];return(r?gv(r):t)[e]}function Abe(t,e,r){const n=HZ(e,r);return n?"value"in n?n.value:n.get?.call(t.draft_):void 0}function HZ(t,e){if(!(e in t))return;let r=kE(t);for(;r;){const n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=kE(r)}}function nP(t){t.modified_||(t.modified_=!0,t.parent_&&nP(t.parent_))}function hL(t){t.copy_||(t.copy_=eP(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var mbe=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,r,n)=>{if(typeof e=="function"&&typeof r!="function"){const s=r;r=e;const o=this;return function(u=s,...l){return o.produce(u,d=>r.call(this,d,...l))}}typeof r!="function"&&LA(6),n!==void 0&&typeof n!="function"&&LA(7);let i;if(Ay(e)){const s=w9(this),o=iP(e,void 0);let c=!0;try{i=r(o),c=!1}finally{c?tP(s):rP(s)}return b9(s,n),E9(i,s)}else if(!e||typeof e!="object"){if(i=r(e),i===void 0&&(i=e),i===MZ&&(i=void 0),this.autoFreeze_&&rD(i,!0),n){const s=[],o=[];my("Patches").generateReplacementPatches_(e,i,s,o),n(s,o)}return i}else LA(1,e)},this.produceWithPatches=(e,r)=>{if(typeof e=="function")return(o,...c)=>this.produceWithPatches(o,u=>e(u,...c));let n,i;return[this.produce(e,r,(o,c)=>{n=o,i=c}),n,i]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),typeof t?.useStrictIteration=="boolean"&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){Ay(t)||LA(8),Bb(t)&&(t=pbe(t));const e=w9(this),r=iP(t,void 0);return r[bf].isManual_=!0,rP(e),r}finishDraft(t,e){const r=t&&t[bf];(!r||!r.isManual_)&&LA(9);const{scope_:n}=r;return b9(n,e),E9(void 0,n)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,e){let r;for(r=e.length-1;r>=0;r--){const i=e[r];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}r>-1&&(e=e.slice(r+1));const n=my("Patches").applyPatches_;return Bb(t)?n(t,e):this.produce(t,i=>n(i,e))}};function iP(t,e){const r=R2(t)?my("MapSet").proxyMap_(t,e):r5(t)?my("MapSet").proxySet_(t,e):fbe(t,e);return(e?e.scope_:$Z()).drafts_.push(r),r}function pbe(t){return Bb(t)||LA(10,t),QZ(t)}function QZ(t){if(!Ay(t)||n5(t))return t;const e=t[bf];let r,n=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,r=eP(t,e.scope_.immer_.useStrictShallowCopy_),n=e.scope_.immer_.shouldUseStrictIteration()}else r=eP(t,!0);return qC(r,(i,s)=>{UZ(r,i,QZ(s))},n),e&&(e.finalized_=!1),r}var gbe=new mbe;gbe.produce;var vbe={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},VZ=Qh({name:"legend",initialState:vbe,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload:{reducer(t,e){t.payload.push(e.payload)},prepare:ql()},replaceLegendPayload:{reducer(t,e){var{prev:r,next:n}=e.payload,i=OA(t).payload.indexOf(r);i>-1&&(t.payload[i]=n)},prepare:ql()},removeLegendPayload:{reducer(t,e){var r=OA(t).payload.indexOf(e.payload);r>-1&&t.payload.splice(r,1)},prepare:ql()}}}),{setLegendSize:S9,setLegendSettings:ybe,addLegendPayload:zZ,replaceLegendPayload:KZ,removeLegendPayload:GZ}=VZ.actions,xbe=VZ.reducer,bbe=["contextPayload"];function sP(){return sP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},sP.apply(null,arguments)}function T9(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Pb(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?T9(Object(r),!0).forEach(function(n){wbe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):T9(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function wbe(t,e,r){return(e=Ebe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ebe(t){var e=_be(t,"string");return typeof e=="symbol"?e:e+""}function _be(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Sbe(t,e){if(t==null)return{};var r,n,i=Tbe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function Tbe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function Cbe(t){return t.value}function jbe(t){var{contextPayload:e}=t,r=Sbe(t,bbe),n=KX(e,t.payloadUniqBy,Cbe),i=Pb(Pb({},r),{},{payload:n});return j.isValidElement(t.content)?j.cloneElement(t.content,i):typeof t.content=="function"?j.createElement(t.content,i):j.createElement(gve,i)}function Nbe(t,e,r,n,i,s){var{layout:o,align:c,verticalAlign:u}=e,l,d;return(!t||(t.left===void 0||t.left===null)&&(t.right===void 0||t.right===null))&&(c==="center"&&o==="vertical"?l={left:((n||0)-s.width)/2}:l=c==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!t||(t.top===void 0||t.top===null)&&(t.bottom===void 0||t.bottom===null))&&(u==="middle"?d={top:((i||0)-s.height)/2}:d=u==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),Pb(Pb({},l),d)}function kbe(t){var e=Al();return j.useEffect(()=>{e(ybe(t))},[e,t]),null}function Ibe(t){var e=Al();return j.useEffect(()=>(e(S9(t)),()=>{e(S9({width:0,height:0}))}),[e,t]),null}function Lbe(t,e,r,n){return t==="vertical"&&e!=null?{height:e}:t==="horizontal"?{width:r||n}:null}var Bbe={align:"center",iconSize:14,inactiveColor:"#ccc",itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function WZ(t){var e=Uc(t,Bbe),r=hye(),n=l0e(),i=ibe(),{width:s,height:o,wrapperStyle:c,portal:u}=e,[l,d]=XX([r]),f=J3(),A=eD();if(f==null||A==null)return null;var p=f-(i?.left||0)-(i?.right||0),g=Lbe(e.layout,o,s,p),y=u?c:Pb(Pb({position:"absolute",width:g?.width||s||"auto",height:g?.height||o||"auto"},Nbe(c,e,i,f,A,l)),c),x=u??n;if(x==null||r==null)return null;var w=j.createElement("div",{className:"recharts-legend-wrapper",style:y,ref:d},j.createElement(kbe,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),!u&&j.createElement(Ibe,{width:l.width,height:l.height}),j.createElement(jbe,sP({},e,g,{margin:i,chartWidth:f,chartHeight:A,contextPayload:r})));return v0.createPortal(w,x)}WZ.displayName="Legend";function aP(){return aP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},aP.apply(null,arguments)}function C9(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function U1(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?C9(Object(r),!0).forEach(function(n){Pbe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):C9(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Pbe(t,e,r){return(e=Obe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Obe(t){var e=Rbe(t,"string");return typeof e=="symbol"?e:e+""}function Rbe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Dbe(t){return Array.isArray(t)&&Km(t[0])&&Km(t[1])?t.join(" ~ "):t}var Gy={separator:" : ",contentStyle:{margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},itemStyle:{display:"block",paddingTop:4,paddingBottom:4,color:"#000"},labelStyle:{},accessibilityLayer:!1},Mbe=t=>{var{separator:e=Gy.separator,contentStyle:r,itemStyle:n,labelStyle:i=Gy.labelStyle,payload:s,formatter:o,itemSorter:c,wrapperClassName:u,labelClassName:l,label:d,labelFormatter:f,accessibilityLayer:A=Gy.accessibilityLayer}=t,p=()=>{if(s&&s.length){var N={padding:0,margin:0},I=(c?UN(s,c):s).map((U,K)=>{if(U.type==="none")return null;var Y=U.formatter||o||Dbe,{value:re,name:se}=U,Ae=re,we=se;if(Y){var Ce=Y(re,se,U,K,s);if(Array.isArray(Ce))[Ae,we]=Ce;else if(Ce!=null)Ae=Ce;else return null}var ve=U1(U1({},Gy.itemStyle),{},{color:U.color||Gy.itemStyle.color},n);return j.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(K),style:ve},Km(we)?j.createElement("span",{className:"recharts-tooltip-item-name"},we):null,Km(we)?j.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,j.createElement("span",{className:"recharts-tooltip-item-value"},Ae),j.createElement("span",{className:"recharts-tooltip-item-unit"},U.unit||""))});return j.createElement("ul",{className:"recharts-tooltip-item-list",style:N},I)}return null},g=U1(U1({},Gy.contentStyle),r),y=U1({margin:0},i),x=!ru(d),w=x?d:"",E=Sa("recharts-default-tooltip",u),T=Sa("recharts-tooltip-label",l);x&&f&&s!==void 0&&s!==null&&(w=f(d,s));var C=A?{role:"status","aria-live":"assertive"}:{};return j.createElement("div",aP({className:E,style:g},C),j.createElement("p",{className:T,style:y},j.isValidElement(w)?w:"".concat(w)),p())},$1="recharts-tooltip-wrapper",Fbe={visibility:"hidden"};function Ube(t){var{coordinate:e,translateX:r,translateY:n}=t;return Sa($1,{["".concat($1,"-right")]:Ei(r)&&e&&Ei(e.x)&&r>=e.x,["".concat($1,"-left")]:Ei(r)&&e&&Ei(e.x)&&r<e.x,["".concat($1,"-bottom")]:Ei(n)&&e&&Ei(e.y)&&n>=e.y,["".concat($1,"-top")]:Ei(n)&&e&&Ei(e.y)&&n<e.y})}function j9(t){var{allowEscapeViewBox:e,coordinate:r,key:n,offset:i,position:s,reverseDirection:o,tooltipDimension:c,viewBox:u,viewBoxDimension:l}=t;if(s&&Ei(s[n]))return s[n];var d=r[n]-c-(i>0?i:0),f=r[n]+i;if(e[n])return o[n]?d:f;var A=u[n];if(A==null)return 0;if(o[n]){var p=d,g=A;return p<g?Math.max(f,A):Math.max(d,A)}if(l==null)return 0;var y=f+c,x=A+l;return y>x?Math.max(d,A):Math.max(f,A)}function $be(t){var{translateX:e,translateY:r,useTranslate3d:n}=t;return{transform:n?"translate3d(".concat(e,"px, ").concat(r,"px, 0)"):"translate(".concat(e,"px, ").concat(r,"px)")}}function Hbe(t){var{allowEscapeViewBox:e,coordinate:r,offsetTop:n,offsetLeft:i,position:s,reverseDirection:o,tooltipBox:c,useTranslate3d:u,viewBox:l}=t,d,f,A;return c.height>0&&c.width>0&&r?(f=j9({allowEscapeViewBox:e,coordinate:r,key:"x",offset:i,position:s,reverseDirection:o,tooltipDimension:c.width,viewBox:l,viewBoxDimension:l.width}),A=j9({allowEscapeViewBox:e,coordinate:r,key:"y",offset:n,position:s,reverseDirection:o,tooltipDimension:c.height,viewBox:l,viewBoxDimension:l.height}),d=$be({translateX:f,translateY:A,useTranslate3d:u})):d=Fbe,{cssProperties:d,cssClasses:Ube({translateX:f,translateY:A,coordinate:r})}}function N9(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function G_(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?N9(Object(r),!0).forEach(function(n){oP(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):N9(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function oP(t,e,r){return(e=Qbe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Qbe(t){var e=Vbe(t,"string");return typeof e=="symbol"?e:e+""}function Vbe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class zbe extends j.PureComponent{constructor(){super(...arguments),oP(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),oP(this,"handleKeyDown",e=>{if(e.key==="Escape"){var r,n,i,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(i=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,r;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:r,animationDuration:n,animationEasing:i,children:s,coordinate:o,hasPayload:c,isAnimationActive:u,offset:l,position:d,reverseDirection:f,useTranslate3d:A,viewBox:p,wrapperStyle:g,lastBoundingBox:y,innerRef:x,hasPortalFromProps:w}=this.props,E=typeof l=="number"?l:l.x,T=typeof l=="number"?l:l.y,{cssClasses:C,cssProperties:N}=Hbe({allowEscapeViewBox:r,coordinate:o,offsetLeft:E,offsetTop:T,position:d,reverseDirection:f,tooltipBox:{height:y.height,width:y.width},useTranslate3d:A,viewBox:p}),I=w?{}:G_(G_({transition:u&&e?"transform ".concat(n,"ms ").concat(i):void 0},N),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&c?"visible":"hidden",position:"absolute",top:0,left:0}),U=G_(G_({},I),{},{visibility:!this.state.dismissed&&e&&c?"visible":"hidden"},g);return j.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:C,style:U,ref:x},s)}}var YZ=()=>{var t;return(t=si(e=>e.rootProps.accessibilityLayer))!==null&&t!==void 0?t:!0};function lP(){return lP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},lP.apply(null,arguments)}function k9(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function I9(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?k9(Object(r),!0).forEach(function(n){Kbe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):k9(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Kbe(t,e,r){return(e=Gbe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Gbe(t){var e=Wbe(t,"string");return typeof e=="symbol"?e:e+""}function Wbe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var L9={curveBasisClosed:C0e,curveBasisOpen:j0e,curveBasis:T0e,curveBumpX:h0e,curveBumpY:f0e,curveLinearClosed:N0e,curveLinear:MN,curveMonotoneX:k0e,curveMonotoneY:I0e,curveNatural:L0e,curveStep:B0e,curveStepAfter:O0e,curveStepBefore:P0e},JC=t=>Ha(t.x)&&Ha(t.y),B9=t=>t.base!=null&&JC(t.base)&&JC(t),H1=t=>t.x,Q1=t=>t.y,Ybe=(t,e)=>{if(typeof t=="function")return t;var r="curve".concat(I2(t));if((r==="curveMonotone"||r==="curveBump")&&e){var n=L9["".concat(r).concat(e==="vertical"?"Y":"X")];if(n)return n}return L9[r]||MN},P9={connectNulls:!1,type:"linear"},qbe=t=>{var{type:e=P9.type,points:r=[],baseLine:n,layout:i,connectNulls:s=P9.connectNulls}=t,o=Ybe(e,i),c=s?r.filter(JC):r;if(Array.isArray(n)){var u,l=r.map((g,y)=>I9(I9({},g),{},{base:n[y]}));i==="vertical"?u=F_().y(Q1).x1(H1).x0(g=>g.base.x):u=F_().x(H1).y1(Q1).y0(g=>g.base.y);var d=u.defined(B9).curve(o),f=s?l.filter(B9):l;return d(f)}var A;i==="vertical"&&Ei(n)?A=F_().y(Q1).x1(H1).x0(n):Ei(n)?A=F_().x(H1).y1(Q1).y0(n):A=EX().x(H1).y(Q1);var p=A.defined(JC).curve(o);return p(c)},iD=t=>{var{className:e,points:r,path:n,pathRef:i}=t,s=a1();if((!r||!r.length)&&!n)return null;var o={type:t.type,points:t.points,baseLine:t.baseLine,layout:t.layout||s,connectNulls:t.connectNulls},c=r&&r.length?qbe(o):n;return j.createElement("path",lP({},yu(t),U3(t),{className:Sa("recharts-curve",e),d:c===null?void 0:c,ref:i}))},Xbe=["x","y","top","left","width","height","className"];function cP(){return cP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},cP.apply(null,arguments)}function O9(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Zbe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?O9(Object(r),!0).forEach(function(n){Jbe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):O9(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Jbe(t,e,r){return(e=e1e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function e1e(t){var e=t1e(t,"string");return typeof e=="symbol"?e:e+""}function t1e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function r1e(t,e){if(t==null)return{};var r,n,i=n1e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function n1e(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var i1e=(t,e,r,n,i,s)=>"M".concat(t,",").concat(i,"v").concat(n,"M").concat(s,",").concat(e,"h").concat(r),s1e=t=>{var{x:e=0,y:r=0,top:n=0,left:i=0,width:s=0,height:o=0,className:c}=t,u=r1e(t,Xbe),l=Zbe({x:e,y:r,top:n,left:i,width:s,height:o},u);return!Ei(e)||!Ei(r)||!Ei(s)||!Ei(o)||!Ei(n)||!Ei(i)?null:j.createElement("path",cP({},Hu(l),{className:Sa("recharts-cross",c),d:i1e(e,r,s,o,n,i)}))};function a1e(t,e,r,n){var i=n/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:r.left+.5,y:t==="horizontal"?r.top+.5:e.y-i,width:t==="horizontal"?n:r.width-1,height:t==="horizontal"?r.height-1:n}}function R9(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function D9(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?R9(Object(r),!0).forEach(function(n){o1e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):R9(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function o1e(t,e,r){return(e=l1e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function l1e(t){var e=c1e(t,"string");return typeof e=="symbol"?e:e+""}function c1e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var u1e=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),qZ=(t,e,r)=>t.map(n=>"".concat(u1e(n)," ").concat(e,"ms ").concat(r)).join(","),d1e=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((r,n)=>r.filter(i=>n.includes(i))),BE=(t,e)=>Object.keys(e).reduce((r,n)=>D9(D9({},r),{},{[n]:t(n,e[n])}),{});function M9(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Du(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?M9(Object(r),!0).forEach(function(n){h1e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):M9(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function h1e(t,e,r){return(e=f1e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function f1e(t){var e=A1e(t,"string");return typeof e=="symbol"?e:e+""}function A1e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ej=(t,e,r)=>t+(e-t)*r,uP=t=>{var{from:e,to:r}=t;return e!==r},XZ=(t,e,r)=>{var n=BE((i,s)=>{if(uP(s)){var[o,c]=t(s.from,s.to,s.velocity);return Du(Du({},s),{},{from:o,velocity:c})}return s},e);return r<1?BE((i,s)=>uP(s)&&n[i]!=null?Du(Du({},s),{},{velocity:ej(s.velocity,n[i].velocity,r),from:ej(s.from,n[i].from,r)}):s,e):XZ(t,n,r-1)};function m1e(t,e,r,n,i,s){var o,c=n.reduce((A,p)=>Du(Du({},A),{},{[p]:{from:t[p],velocity:0,to:e[p]}}),{}),u=()=>BE((A,p)=>p.from,c),l=()=>!Object.values(c).filter(uP).length,d=null,f=A=>{o||(o=A);var p=A-o,g=p/r.dt;c=XZ(r,c,g),i(Du(Du(Du({},t),e),u())),o=A,l()||(d=s.setTimeout(f))};return()=>(d=s.setTimeout(f),()=>{var A;(A=d)===null||A===void 0||A()})}function p1e(t,e,r,n,i,s,o){var c=null,u=i.reduce((f,A)=>{var p=t[A],g=e[A];return p==null||g==null?f:Du(Du({},f),{},{[A]:[p,g]})},{}),l,d=f=>{l||(l=f);var A=(f-l)/n,p=BE((y,x)=>ej(...x,r(A)),u);if(s(Du(Du(Du({},t),e),p)),A<1)c=o.setTimeout(d);else{var g=BE((y,x)=>ej(...x,r(1)),u);s(Du(Du(Du({},t),e),g))}};return()=>(c=o.setTimeout(d),()=>{var f;(f=c)===null||f===void 0||f()})}const g1e=(t,e,r,n,i,s)=>{var o=d1e(t,e);return r==null?()=>(i(Du(Du({},t),e)),()=>{}):r.isStepper===!0?m1e(t,e,r,o,i,s):p1e(t,e,r,n,o,i,s)};var tj=1e-4,ZZ=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],JZ=(t,e)=>t.map((r,n)=>r*e**n).reduce((r,n)=>r+n),F9=(t,e)=>r=>{var n=ZZ(t,e);return JZ(n,r)},v1e=(t,e)=>r=>{var n=ZZ(t,e),i=[...n.map((s,o)=>s*o).slice(1),0];return JZ(i,r)},y1e=t=>{var e,r=t.split("(");if(r.length!==2||r[0]!=="cubic-bezier")return null;var n=(e=r[1])===null||e===void 0||(e=e.split(")")[0])===null||e===void 0?void 0:e.split(",");if(n==null||n.length!==4)return null;var i=n.map(s=>parseFloat(s));return[i[0],i[1],i[2],i[3]]},x1e=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(r.length===1)switch(r[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var i=y1e(r[0]);if(i)return i}}return r.length===4?r:[0,0,1,1]},b1e=(t,e,r,n)=>{var i=F9(t,r),s=F9(e,n),o=v1e(t,r),c=l=>l>1?1:l<0?0:l,u=l=>{for(var d=l>1?1:l,f=d,A=0;A<8;++A){var p=i(f)-d,g=o(f);if(Math.abs(p-d)<tj||g<tj)return s(f);f=c(f-p/g)}return s(f)};return u.isStepper=!1,u},U9=function(){return b1e(...x1e(...arguments))},w1e=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:i=17}=e,s=(o,c,u)=>{var l=-(o-c)*r,d=u*n,f=u+(l-d)*i/1e3,A=u*i/1e3+o;return Math.abs(A-c)<tj&&Math.abs(f)<tj?[c,0]:[A,f]};return s.isStepper=!0,s.dt=i,s},E1e=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return U9(t);case"spring":return w1e();default:if(t.split("(")[0]==="cubic-bezier")return U9(t)}return typeof t=="function"?t:null};function _1e(t){var e,r=()=>null,n=!1,i=null,s=o=>{if(!n){if(Array.isArray(o)){if(!o.length)return;var c=o,[u,...l]=c;if(typeof u=="number"){i=t.setTimeout(s.bind(null,l),u);return}s(u),i=t.setTimeout(s.bind(null,l));return}typeof o=="string"&&(e=o,r(e)),typeof o=="object"&&(e=o,r(e)),typeof o=="function"&&o()}};return{stop:()=>{n=!0},start:o=>{n=!1,i&&(i(),i=null),s(o)},subscribe:o=>(r=o,()=>{r=()=>null}),getTimeoutController:()=>t}}class S1e{setTimeout(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),i=null,s=o=>{o-n>=r?e(o):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(s))};return i=requestAnimationFrame(s),()=>{i!=null&&cancelAnimationFrame(i)}}}function T1e(){return _1e(new S1e)}var C1e=j.createContext(T1e);function j1e(t,e){var r=j.useContext(C1e);return j.useMemo(()=>e??r(t),[t,e,r])}var N1e=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),i5={isSsr:N1e()},k1e={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},$9={t:0},fL={t:1};function D2(t){var e=Uc(t,k1e),{isActive:r,canBegin:n,duration:i,easing:s,begin:o,onAnimationEnd:c,onAnimationStart:u,children:l}=e,d=r==="auto"?!i5.isSsr:r,f=j1e(e.animationId,e.animationManager),[A,p]=j.useState(d?$9:fL),g=j.useRef(null);return j.useEffect(()=>{d||p(fL)},[d]),j.useEffect(()=>{if(!d||!n)return H0;var y=g1e($9,fL,E1e(s),i,p,f.getTimeoutController()),x=()=>{g.current=y()};return f.start([u,o,x,i,c]),()=>{f.stop(),g.current&&g.current(),c()}},[d,n,i,s,o,u,c,f]),l(A.t)}function M2(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=j.useRef(TE(e)),n=j.useRef(t);return n.current!==t&&(r.current=TE(e),n.current=t),r.current}var I1e=["radius"],L1e=["radius"],H9,Q9,V9,z9,K9,G9,W9,Y9,q9,X9;function Z9(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function J9(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Z9(Object(r),!0).forEach(function(n){B1e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Z9(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function B1e(t,e,r){return(e=P1e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function P1e(t){var e=O1e(t,"string");return typeof e=="symbol"?e:e+""}function O1e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function rj(){return rj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},rj.apply(null,arguments)}function eH(t,e){if(t==null)return{};var r,n,i=R1e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function R1e(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function am(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var tH=(t,e,r,n,i)=>{var s=b0(r),o=b0(n),c=Math.min(Math.abs(s)/2,Math.abs(o)/2),u=o>=0?1:-1,l=s>=0?1:-1,d=o>=0&&s>=0||o<0&&s<0?1:0,f;if(c>0&&Array.isArray(i)){for(var A=[0,0,0,0],p=0,g=4;p<g;p++){var y,x=(y=i[p])!==null&&y!==void 0?y:0;A[p]=x>c?c:x}f=cc(H9||(H9=am(["M",",",""])),t,e+u*A[0]),A[0]>0&&(f+=cc(Q9||(Q9=am(["A ",",",",0,0,",",",",",""])),A[0],A[0],d,t+l*A[0],e)),f+=cc(V9||(V9=am(["L ",",",""])),t+r-l*A[1],e),A[1]>0&&(f+=cc(z9||(z9=am(["A ",",",",0,0,",`,
        `,",",""])),A[1],A[1],d,t+r,e+u*A[1])),f+=cc(K9||(K9=am(["L ",",",""])),t+r,e+n-u*A[2]),A[2]>0&&(f+=cc(G9||(G9=am(["A ",",",",0,0,",`,
        `,",",""])),A[2],A[2],d,t+r-l*A[2],e+n)),f+=cc(W9||(W9=am(["L ",",",""])),t+l*A[3],e+n),A[3]>0&&(f+=cc(Y9||(Y9=am(["A ",",",",0,0,",`,
        `,",",""])),A[3],A[3],d,t,e+n-u*A[3])),f+="Z"}else if(c>0&&i===+i&&i>0){var w=Math.min(c,i);f=cc(q9||(q9=am(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),t,e+u*w,w,w,d,t+l*w,e,t+r-l*w,e,w,w,d,t+r,e+u*w,t+r,e+n-u*w,w,w,d,t+r-l*w,e+n,t+l*w,e+n,w,w,d,t,e+n-u*w)}else f=cc(X9||(X9=am(["M ",","," h "," v "," h "," Z"])),t,e,r,n,-r);return f},rH={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},eJ=t=>{var e=Uc(t,rH),r=j.useRef(null),[n,i]=j.useState(-1);j.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var ce=r.current.getTotalLength();ce&&i(ce)}catch{}},[]);var{x:s,y:o,width:c,height:u,radius:l,className:d}=e,{animationEasing:f,animationDuration:A,animationBegin:p,isAnimationActive:g,isUpdateAnimationActive:y}=e,x=j.useRef(c),w=j.useRef(u),E=j.useRef(s),T=j.useRef(o),C=j.useMemo(()=>({x:s,y:o,width:c,height:u,radius:l}),[s,o,c,u,l]),N=M2(C,"rectangle-");if(s!==+s||o!==+o||c!==+c||u!==+u||c===0||u===0)return null;var I=Sa("recharts-rectangle",d);if(!y){var U=Hu(e),{radius:K}=U,Y=eH(U,I1e);return j.createElement("path",rj({},Y,{x:b0(s),y:b0(o),width:b0(c),height:b0(u),radius:typeof l=="number"?l:void 0,className:I,d:tH(s,o,c,u,l)}))}var re=x.current,se=w.current,Ae=E.current,we=T.current,Ce="0px ".concat(n===-1?1:n,"px"),ve="".concat(n,"px 0px"),ne=qZ(["strokeDasharray"],A,typeof f=="string"?f:rH.animationEasing);return j.createElement(D2,{animationId:N,key:N,canBegin:n>0,duration:A,easing:f,isActive:y,begin:p},ce=>{var ae=uc(re,c,ce),De=uc(se,u,ce),Oe=uc(Ae,s,ce),be=uc(we,o,ce);r.current&&(x.current=ae,w.current=De,E.current=Oe,T.current=be);var de;g?ce>0?de={transition:ne,strokeDasharray:ve}:de={strokeDasharray:Ce}:de={strokeDasharray:ve};var xe=Hu(e),{radius:je}=xe,Me=eH(xe,L1e);return j.createElement("path",rj({},Me,{radius:typeof l=="number"?l:void 0,className:I,d:tH(Oe,be,ae,De,l),ref:r,style:J9(J9({},de),e.style)}))})};function nH(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function iH(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?nH(Object(r),!0).forEach(function(n){D1e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):nH(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function D1e(t,e,r){return(e=M1e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function M1e(t){var e=F1e(t,"string");return typeof e=="symbol"?e:e+""}function F1e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var nj=Math.PI/180,ij=t=>t*Math.PI/180,U1e=t=>t*180/Math.PI,rl=(t,e,r,n)=>({x:t+Math.cos(-nj*n)*r,y:e+Math.sin(-nj*n)*r}),tJ=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},$1e=(t,e)=>{var{x:r,y:n}=t,{x:i,y:s}=e;return Math.sqrt((r-i)**2+(n-s)**2)},H1e=(t,e)=>{var{x:r,y:n}=t,{cx:i,cy:s}=e,o=$1e({x:r,y:n},{x:i,y:s});if(o<=0)return{radius:o,angle:0};var c=(r-i)/o,u=Math.acos(c);return n>s&&(u=2*Math.PI-u),{radius:o,angle:U1e(u),angleInRadian:u}},Q1e=t=>{var{startAngle:e,endAngle:r}=t,n=Math.floor(e/360),i=Math.floor(r/360),s=Math.min(n,i);return{startAngle:e-s*360,endAngle:r-s*360}},V1e=(t,e)=>{var{startAngle:r,endAngle:n}=e,i=Math.floor(r/360),s=Math.floor(n/360),o=Math.min(i,s);return t+o*360},z1e=(t,e)=>{var{chartX:r,chartY:n}=t,{radius:i,angle:s}=H1e({x:r,y:n},e),{innerRadius:o,outerRadius:c}=e;if(i<o||i>c||i===0)return null;var{startAngle:u,endAngle:l}=Q1e(e),d=s,f;if(u<=l){for(;d>l;)d-=360;for(;d<u;)d+=360;f=d>=u&&d<=l}else{for(;d>u;)d-=360;for(;d<l;)d+=360;f=d>=l&&d<=u}return f?iH(iH({},e),{},{radius:i,angle:V1e(d,e)}):null};function rJ(t){var{cx:e,cy:r,radius:n,startAngle:i,endAngle:s}=t,o=rl(e,r,n,i),c=rl(e,r,n,s);return{points:[o,c],cx:e,cy:r,radius:n,startAngle:i,endAngle:s}}var sH,aH,oH,lH,cH,uH,dH;function dP(){return dP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},dP.apply(null,arguments)}function Rv(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var K1e=(t,e)=>{var r=Ad(e-t),n=Math.min(Math.abs(e-t),359.999);return r*n},W_=t=>{var{cx:e,cy:r,radius:n,angle:i,sign:s,isExternal:o,cornerRadius:c,cornerIsExternal:u}=t,l=c*(o?1:-1)+n,d=Math.asin(c/l)/nj,f=u?i:i+s*d,A=rl(e,r,l,f),p=rl(e,r,n,f),g=u?i-s*d:i,y=rl(e,r,l*Math.cos(d*nj),g);return{center:A,circleTangency:p,lineTangency:y,theta:d}},nJ=t=>{var{cx:e,cy:r,innerRadius:n,outerRadius:i,startAngle:s,endAngle:o}=t,c=K1e(s,o),u=s+c,l=rl(e,r,i,s),d=rl(e,r,i,u),f=cc(sH||(sH=Rv(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),l.x,l.y,i,i,+(Math.abs(c)>180),+(s>u),d.x,d.y);if(n>0){var A=rl(e,r,n,s),p=rl(e,r,n,u);f+=cc(aH||(aH=Rv(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),p.x,p.y,n,n,+(Math.abs(c)>180),+(s<=u),A.x,A.y)}else f+=cc(oH||(oH=Rv(["L ",","," Z"])),e,r);return f},G1e=t=>{var{cx:e,cy:r,innerRadius:n,outerRadius:i,cornerRadius:s,forceCornerRadius:o,cornerIsExternal:c,startAngle:u,endAngle:l}=t,d=Ad(l-u),{circleTangency:f,lineTangency:A,theta:p}=W_({cx:e,cy:r,radius:i,angle:u,sign:d,cornerRadius:s,cornerIsExternal:c}),{circleTangency:g,lineTangency:y,theta:x}=W_({cx:e,cy:r,radius:i,angle:l,sign:-d,cornerRadius:s,cornerIsExternal:c}),w=c?Math.abs(u-l):Math.abs(u-l)-p-x;if(w<0)return o?cc(lH||(lH=Rv(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),A.x,A.y,s,s,s*2,s,s,-s*2):nJ({cx:e,cy:r,innerRadius:n,outerRadius:i,startAngle:u,endAngle:l});var E=cc(cH||(cH=Rv(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),A.x,A.y,s,s,+(d<0),f.x,f.y,i,i,+(w>180),+(d<0),g.x,g.y,s,s,+(d<0),y.x,y.y);if(n>0){var{circleTangency:T,lineTangency:C,theta:N}=W_({cx:e,cy:r,radius:n,angle:u,sign:d,isExternal:!0,cornerRadius:s,cornerIsExternal:c}),{circleTangency:I,lineTangency:U,theta:K}=W_({cx:e,cy:r,radius:n,angle:l,sign:-d,isExternal:!0,cornerRadius:s,cornerIsExternal:c}),Y=c?Math.abs(u-l):Math.abs(u-l)-N-K;if(Y<0&&s===0)return"".concat(E,"L").concat(e,",").concat(r,"Z");E+=cc(uH||(uH=Rv(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),U.x,U.y,s,s,+(d<0),I.x,I.y,n,n,+(Y>180),+(d>0),T.x,T.y,s,s,+(d<0),C.x,C.y)}else E+=cc(dH||(dH=Rv(["L",",","Z"])),e,r);return E},W1e={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},iJ=t=>{var e=Uc(t,W1e),{cx:r,cy:n,innerRadius:i,outerRadius:s,cornerRadius:o,forceCornerRadius:c,cornerIsExternal:u,startAngle:l,endAngle:d,className:f}=e;if(s<i||l===d)return null;var A=Sa("recharts-sector",f),p=s-i,g=rh(o,p,0,!0),y;return g>0&&Math.abs(l-d)<360?y=G1e({cx:r,cy:n,innerRadius:i,outerRadius:s,cornerRadius:Math.min(g,p/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:l,endAngle:d}):y=nJ({cx:r,cy:n,innerRadius:i,outerRadius:s,startAngle:l,endAngle:d}),j.createElement("path",dP({},Hu(e),{className:A,d:y}))};function Y1e(t,e,r){if(t==="horizontal")return[{x:e.x,y:r.top},{x:e.x,y:r.top+r.height}];if(t==="vertical")return[{x:r.left,y:e.y},{x:r.left+r.width,y:e.y}];if(DX(e)){if(t==="centric"){var{cx:n,cy:i,innerRadius:s,outerRadius:o,angle:c}=e,u=rl(n,i,s,c),l=rl(n,i,o,c);return[{x:u.x,y:u.y},{x:l.x,y:l.y}]}return rJ(e)}}var AL={},mL={},pL={},hH;function q1e(){return hH||(hH=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=WX();function r(n){return e.isSymbol(n)?NaN:Number(n)}t.toNumber=r})(pL)),pL}var fH;function X1e(){return fH||(fH=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=q1e();function r(n){return n?(n=e.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}t.toFinite=r})(mL)),mL}var AH;function Z1e(){return AH||(AH=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=YX(),r=X1e();function n(i,s,o){o&&typeof o!="number"&&e.isIterateeCall(i,s,o)&&(s=o=void 0),i=r.toFinite(i),s===void 0?(s=i,i=0):s=r.toFinite(s),o=o===void 0?i<s?1:-1:r.toFinite(o);const c=Math.max(Math.ceil((s-i)/(o||1)),0),u=new Array(c);for(let l=0;l<c;l++)u[l]=i,i+=o;return u}t.range=n})(AL)),AL}var gL,mH;function J1e(){return mH||(mH=1,gL=Z1e().range),gL}var ewe=J1e();const sJ=eA(ewe);function S0(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function twe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function sD(t){let e,r,n;t.length!==2?(e=S0,r=(c,u)=>S0(t(c),u),n=(c,u)=>t(c)-u):(e=t===S0||t===twe?t:rwe,r=t,n=t);function i(c,u,l=0,d=c.length){if(l<d){if(e(u,u)!==0)return d;do{const f=l+d>>>1;r(c[f],u)<0?l=f+1:d=f}while(l<d)}return l}function s(c,u,l=0,d=c.length){if(l<d){if(e(u,u)!==0)return d;do{const f=l+d>>>1;r(c[f],u)<=0?l=f+1:d=f}while(l<d)}return l}function o(c,u,l=0,d=c.length){const f=i(c,u,l,d-1);return f>l&&n(c[f-1],u)>-n(c[f],u)?f-1:f}return{left:i,center:o,right:s}}function rwe(){return 0}function aJ(t){return t===null?NaN:+t}function*nwe(t,e){for(let r of t)r!=null&&(r=+r)>=r&&(yield r)}const iwe=sD(S0),F2=iwe.right;sD(aJ).center;class pH extends Map{constructor(e,r=owe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[n,i]of e)this.set(n,i)}get(e){return super.get(gH(this,e))}has(e){return super.has(gH(this,e))}set(e,r){return super.set(swe(this,e),r)}delete(e){return super.delete(awe(this,e))}}function gH({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):r}function swe({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):(t.set(n,r),r)}function awe({_intern:t,_key:e},r){const n=e(r);return t.has(n)&&(r=t.get(n),t.delete(n)),r}function owe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function lwe(t=S0){if(t===S0)return oJ;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,r)=>{const n=t(e,r);return n||n===0?n:(t(r,r)===0)-(t(e,e)===0)}}function oJ(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const cwe=Math.sqrt(50),uwe=Math.sqrt(10),dwe=Math.sqrt(2);function sj(t,e,r){const n=(e-t)/Math.max(0,r),i=Math.floor(Math.log10(n)),s=n/Math.pow(10,i),o=s>=cwe?10:s>=uwe?5:s>=dwe?2:1;let c,u,l;return i<0?(l=Math.pow(10,-i)/o,c=Math.round(t*l),u=Math.round(e*l),c/l<t&&++c,u/l>e&&--u,l=-l):(l=Math.pow(10,i)*o,c=Math.round(t/l),u=Math.round(e/l),c*l<t&&++c,u*l>e&&--u),u<c&&.5<=r&&r<2?sj(t,e,r*2):[c,u,l]}function hP(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];const n=e<t,[i,s,o]=n?sj(e,t,r):sj(t,e,r);if(!(s>=i))return[];const c=s-i+1,u=new Array(c);if(n)if(o<0)for(let l=0;l<c;++l)u[l]=(s-l)/-o;else for(let l=0;l<c;++l)u[l]=(s-l)*o;else if(o<0)for(let l=0;l<c;++l)u[l]=(i+l)/-o;else for(let l=0;l<c;++l)u[l]=(i+l)*o;return u}function fP(t,e,r){return e=+e,t=+t,r=+r,sj(t,e,r)[2]}function AP(t,e,r){e=+e,t=+t,r=+r;const n=e<t,i=n?fP(e,t,r):fP(t,e,r);return(n?-1:1)*(i<0?1/-i:i)}function vH(t,e){let r;for(const n of t)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function yH(t,e){let r;for(const n of t)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function lJ(t,e,r=0,n=1/0,i){if(e=Math.floor(e),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(t.length-1,n)),!(r<=e&&e<=n))return t;for(i=i===void 0?oJ:lwe(i);n>r;){if(n-r>600){const u=n-r+1,l=e-r+1,d=Math.log(u),f=.5*Math.exp(2*d/3),A=.5*Math.sqrt(d*f*(u-f)/u)*(l-u/2<0?-1:1),p=Math.max(r,Math.floor(e-l*f/u+A)),g=Math.min(n,Math.floor(e+(u-l)*f/u+A));lJ(t,e,p,g,i)}const s=t[e];let o=r,c=n;for(V1(t,r,e),i(t[n],s)>0&&V1(t,r,n);o<c;){for(V1(t,o,c),++o,--c;i(t[o],s)<0;)++o;for(;i(t[c],s)>0;)--c}i(t[r],s)===0?V1(t,r,c):(++c,V1(t,c,n)),c<=e&&(r=c+1),e<=c&&(n=c-1)}return t}function V1(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function hwe(t,e,r){if(t=Float64Array.from(nwe(t)),!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return yH(t);if(e>=1)return vH(t);var n,i=(n-1)*e,s=Math.floor(i),o=vH(lJ(t,s).subarray(0,s+1)),c=yH(t.subarray(s+1));return o+(c-o)*(i-s)}}function fwe(t,e,r=aJ){if(!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return+r(t[0],0,t);if(e>=1)return+r(t[n-1],n-1,t);var n,i=(n-1)*e,s=Math.floor(i),o=+r(t[s],s,t),c=+r(t[s+1],s+1,t);return o+(c-o)*(i-s)}}function Awe(t,e,r){t=+t,e=+e,r=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+r;for(var n=-1,i=Math.max(0,Math.ceil((e-t)/r))|0,s=new Array(i);++n<i;)s[n]=t+n*r;return s}function rA(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function og(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const mP=Symbol("implicit");function aD(){var t=new pH,e=[],r=[],n=mP;function i(s){let o=t.get(s);if(o===void 0){if(n!==mP)return n;t.set(s,o=e.push(s)-1)}return r[o%r.length]}return i.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new pH;for(const o of s)t.has(o)||t.set(o,e.push(o)-1);return i},i.range=function(s){return arguments.length?(r=Array.from(s),i):r.slice()},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return aD(e,r).unknown(n)},rA.apply(i,arguments),i}function oD(){var t=aD().unknown(void 0),e=t.domain,r=t.range,n=0,i=1,s,o,c=!1,u=0,l=0,d=.5;delete t.unknown;function f(){var A=e().length,p=i<n,g=p?i:n,y=p?n:i;s=(y-g)/Math.max(1,A-u+l*2),c&&(s=Math.floor(s)),g+=(y-g-s*(A-u))*d,o=s*(1-u),c&&(g=Math.round(g),o=Math.round(o));var x=Awe(A).map(function(w){return g+s*w});return r(p?x.reverse():x)}return t.domain=function(A){return arguments.length?(e(A),f()):e()},t.range=function(A){return arguments.length?([n,i]=A,n=+n,i=+i,f()):[n,i]},t.rangeRound=function(A){return[n,i]=A,n=+n,i=+i,c=!0,f()},t.bandwidth=function(){return o},t.step=function(){return s},t.round=function(A){return arguments.length?(c=!!A,f()):c},t.padding=function(A){return arguments.length?(u=Math.min(1,l=+A),f()):u},t.paddingInner=function(A){return arguments.length?(u=Math.min(1,A),f()):u},t.paddingOuter=function(A){return arguments.length?(l=+A,f()):l},t.align=function(A){return arguments.length?(d=Math.max(0,Math.min(1,A)),f()):d},t.copy=function(){return oD(e(),[n,i]).round(c).paddingInner(u).paddingOuter(l).align(d)},rA.apply(f(),arguments)}function cJ(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return cJ(e())},t}function mwe(){return cJ(oD.apply(null,arguments).paddingInner(1))}function lD(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function uJ(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function U2(){}var PE=.7,aj=1/PE,db="\\s*([+-]?\\d+)\\s*",OE="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",$m="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",pwe=/^#([0-9a-f]{3,8})$/,gwe=new RegExp(`^rgb\\(${db},${db},${db}\\)$`),vwe=new RegExp(`^rgb\\(${$m},${$m},${$m}\\)$`),ywe=new RegExp(`^rgba\\(${db},${db},${db},${OE}\\)$`),xwe=new RegExp(`^rgba\\(${$m},${$m},${$m},${OE}\\)$`),bwe=new RegExp(`^hsl\\(${OE},${$m},${$m}\\)$`),wwe=new RegExp(`^hsla\\(${OE},${$m},${$m},${OE}\\)$`),xH={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};lD(U2,RE,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:bH,formatHex:bH,formatHex8:Ewe,formatHsl:_we,formatRgb:wH,toString:wH});function bH(){return this.rgb().formatHex()}function Ewe(){return this.rgb().formatHex8()}function _we(){return dJ(this).formatHsl()}function wH(){return this.rgb().formatRgb()}function RE(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=pwe.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?EH(e):r===3?new Mh(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?Y_(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?Y_(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=gwe.exec(t))?new Mh(e[1],e[2],e[3],1):(e=vwe.exec(t))?new Mh(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=ywe.exec(t))?Y_(e[1],e[2],e[3],e[4]):(e=xwe.exec(t))?Y_(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=bwe.exec(t))?TH(e[1],e[2]/100,e[3]/100,1):(e=wwe.exec(t))?TH(e[1],e[2]/100,e[3]/100,e[4]):xH.hasOwnProperty(t)?EH(xH[t]):t==="transparent"?new Mh(NaN,NaN,NaN,0):null}function EH(t){return new Mh(t>>16&255,t>>8&255,t&255,1)}function Y_(t,e,r,n){return n<=0&&(t=e=r=NaN),new Mh(t,e,r,n)}function Swe(t){return t instanceof U2||(t=RE(t)),t?(t=t.rgb(),new Mh(t.r,t.g,t.b,t.opacity)):new Mh}function pP(t,e,r,n){return arguments.length===1?Swe(t):new Mh(t,e,r,n??1)}function Mh(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}lD(Mh,pP,uJ(U2,{brighter(t){return t=t==null?aj:Math.pow(aj,t),new Mh(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?PE:Math.pow(PE,t),new Mh(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Mh(Yv(this.r),Yv(this.g),Yv(this.b),oj(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:_H,formatHex:_H,formatHex8:Twe,formatRgb:SH,toString:SH}));function _H(){return`#${Dv(this.r)}${Dv(this.g)}${Dv(this.b)}`}function Twe(){return`#${Dv(this.r)}${Dv(this.g)}${Dv(this.b)}${Dv((isNaN(this.opacity)?1:this.opacity)*255)}`}function SH(){const t=oj(this.opacity);return`${t===1?"rgb(":"rgba("}${Yv(this.r)}, ${Yv(this.g)}, ${Yv(this.b)}${t===1?")":`, ${t})`}`}function oj(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Yv(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Dv(t){return t=Yv(t),(t<16?"0":"")+t.toString(16)}function TH(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new BA(t,e,r,n)}function dJ(t){if(t instanceof BA)return new BA(t.h,t.s,t.l,t.opacity);if(t instanceof U2||(t=RE(t)),!t)return new BA;if(t instanceof BA)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,i=Math.min(e,r,n),s=Math.max(e,r,n),o=NaN,c=s-i,u=(s+i)/2;return c?(e===s?o=(r-n)/c+(r<n)*6:r===s?o=(n-e)/c+2:o=(e-r)/c+4,c/=u<.5?s+i:2-s-i,o*=60):c=u>0&&u<1?0:o,new BA(o,c,u,t.opacity)}function Cwe(t,e,r,n){return arguments.length===1?dJ(t):new BA(t,e,r,n??1)}function BA(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}lD(BA,Cwe,uJ(U2,{brighter(t){return t=t==null?aj:Math.pow(aj,t),new BA(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?PE:Math.pow(PE,t),new BA(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,i=2*r-n;return new Mh(vL(t>=240?t-240:t+120,i,n),vL(t,i,n),vL(t<120?t+240:t-120,i,n),this.opacity)},clamp(){return new BA(CH(this.h),q_(this.s),q_(this.l),oj(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=oj(this.opacity);return`${t===1?"hsl(":"hsla("}${CH(this.h)}, ${q_(this.s)*100}%, ${q_(this.l)*100}%${t===1?")":`, ${t})`}`}}));function CH(t){return t=(t||0)%360,t<0?t+360:t}function q_(t){return Math.max(0,Math.min(1,t||0))}function vL(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const cD=t=>()=>t;function jwe(t,e){return function(r){return t+r*e}}function Nwe(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function kwe(t){return(t=+t)==1?hJ:function(e,r){return r-e?Nwe(e,r,t):cD(isNaN(e)?r:e)}}function hJ(t,e){var r=e-t;return r?jwe(t,r):cD(isNaN(t)?e:t)}const jH=(function t(e){var r=kwe(e);function n(i,s){var o=r((i=pP(i)).r,(s=pP(s)).r),c=r(i.g,s.g),u=r(i.b,s.b),l=hJ(i.opacity,s.opacity);return function(d){return i.r=o(d),i.g=c(d),i.b=u(d),i.opacity=l(d),i+""}}return n.gamma=t,n})(1);function Iwe(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),i;return function(s){for(i=0;i<r;++i)n[i]=t[i]*(1-s)+e[i]*s;return n}}function Lwe(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Bwe(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,i=new Array(n),s=new Array(r),o;for(o=0;o<n;++o)i[o]=o1(t[o],e[o]);for(;o<r;++o)s[o]=e[o];return function(c){for(o=0;o<n;++o)s[o]=i[o](c);return s}}function Pwe(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function lj(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function Owe(t,e){var r={},n={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?r[i]=o1(t[i],e[i]):n[i]=e[i];return function(s){for(i in r)n[i]=r[i](s);return n}}var gP=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,yL=new RegExp(gP.source,"g");function Rwe(t){return function(){return t}}function Dwe(t){return function(e){return t(e)+""}}function Mwe(t,e){var r=gP.lastIndex=yL.lastIndex=0,n,i,s,o=-1,c=[],u=[];for(t=t+"",e=e+"";(n=gP.exec(t))&&(i=yL.exec(e));)(s=i.index)>r&&(s=e.slice(r,s),c[o]?c[o]+=s:c[++o]=s),(n=n[0])===(i=i[0])?c[o]?c[o]+=i:c[++o]=i:(c[++o]=null,u.push({i:o,x:lj(n,i)})),r=yL.lastIndex;return r<e.length&&(s=e.slice(r),c[o]?c[o]+=s:c[++o]=s),c.length<2?u[0]?Dwe(u[0].x):Rwe(e):(e=u.length,function(l){for(var d=0,f;d<e;++d)c[(f=u[d]).i]=f.x(l);return c.join("")})}function o1(t,e){var r=typeof e,n;return e==null||r==="boolean"?cD(e):(r==="number"?lj:r==="string"?(n=RE(e))?(e=n,jH):Mwe:e instanceof RE?jH:e instanceof Date?Pwe:Lwe(e)?Iwe:Array.isArray(e)?Bwe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Owe:lj)(t,e)}function uD(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}function Fwe(t,e){e===void 0&&(e=t,t=o1);for(var r=0,n=e.length-1,i=e[0],s=new Array(n<0?0:n);r<n;)s[r]=t(i,i=e[++r]);return function(o){var c=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return s[c](o-c)}}function Uwe(t){return function(){return t}}function cj(t){return+t}var NH=[0,1];function gh(t){return t}function vP(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:Uwe(isNaN(e)?NaN:.5)}function $we(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function Hwe(t,e,r){var n=t[0],i=t[1],s=e[0],o=e[1];return i<n?(n=vP(i,n),s=r(o,s)):(n=vP(n,i),s=r(s,o)),function(c){return s(n(c))}}function Qwe(t,e,r){var n=Math.min(t.length,e.length)-1,i=new Array(n),s=new Array(n),o=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<n;)i[o]=vP(t[o],t[o+1]),s[o]=r(e[o],e[o+1]);return function(c){var u=F2(t,c,1,n)-1;return s[u](i[u](c))}}function $2(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function s5(){var t=NH,e=NH,r=o1,n,i,s,o=gh,c,u,l;function d(){var A=Math.min(t.length,e.length);return o!==gh&&(o=$we(t[0],t[A-1])),c=A>2?Qwe:Hwe,u=l=null,f}function f(A){return A==null||isNaN(A=+A)?s:(u||(u=c(t.map(n),e,r)))(n(o(A)))}return f.invert=function(A){return o(i((l||(l=c(e,t.map(n),lj)))(A)))},f.domain=function(A){return arguments.length?(t=Array.from(A,cj),d()):t.slice()},f.range=function(A){return arguments.length?(e=Array.from(A),d()):e.slice()},f.rangeRound=function(A){return e=Array.from(A),r=uD,d()},f.clamp=function(A){return arguments.length?(o=A?!0:gh,d()):o!==gh},f.interpolate=function(A){return arguments.length?(r=A,d()):r},f.unknown=function(A){return arguments.length?(s=A,f):s},function(A,p){return n=A,i=p,d()}}function dD(){return s5()(gh,gh)}function Vwe(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function uj(t,e){if(!isFinite(t)||t===0)return null;var r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"),n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function Ob(t){return t=uj(Math.abs(t)),t?t[1]:NaN}function zwe(t,e){return function(r,n){for(var i=r.length,s=[],o=0,c=t[0],u=0;i>0&&c>0&&(u+c+1>n&&(c=Math.max(1,n-u)),s.push(r.substring(i-=c,i+c)),!((u+=c+1)>n));)c=t[o=(o+1)%t.length];return s.reverse().join(e)}}function Kwe(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var Gwe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function DE(t){if(!(e=Gwe.exec(t)))throw new Error("invalid format: "+t);var e;return new hD({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}DE.prototype=hD.prototype;function hD(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}hD.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Wwe(t){e:for(var e=t.length,r=1,n=-1,i;r<e;++r)switch(t[r]){case".":n=i=r;break;case"0":n===0&&(n=r),i=r;break;default:if(!+t[r])break e;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(i+1):t}var dj;function Ywe(t,e){var r=uj(t,e);if(!r)return dj=void 0,t.toPrecision(e);var n=r[0],i=r[1],s=i-(dj=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=n.length;return s===o?n:s>o?n+new Array(s-o+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+uj(t,Math.max(0,e+s-1))[0]}function kH(t,e){var r=uj(t,e);if(!r)return t+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}const IH={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Vwe,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>kH(t*100,e),r:kH,s:Ywe,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function LH(t){return t}var BH=Array.prototype.map,PH=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function qwe(t){var e=t.grouping===void 0||t.thousands===void 0?LH:zwe(BH.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?LH:Kwe(BH.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",c=t.minus===void 0?"":t.minus+"",u=t.nan===void 0?"NaN":t.nan+"";function l(f,A){f=DE(f);var p=f.fill,g=f.align,y=f.sign,x=f.symbol,w=f.zero,E=f.width,T=f.comma,C=f.precision,N=f.trim,I=f.type;I==="n"?(T=!0,I="g"):IH[I]||(C===void 0&&(C=12),N=!0,I="g"),(w||p==="0"&&g==="=")&&(w=!0,p="0",g="=");var U=(A&&A.prefix!==void 0?A.prefix:"")+(x==="$"?r:x==="#"&&/[boxX]/.test(I)?"0"+I.toLowerCase():""),K=(x==="$"?n:/[%p]/.test(I)?o:"")+(A&&A.suffix!==void 0?A.suffix:""),Y=IH[I],re=/[defgprs%]/.test(I);C=C===void 0?6:/[gprs]/.test(I)?Math.max(1,Math.min(21,C)):Math.max(0,Math.min(20,C));function se(Ae){var we=U,Ce=K,ve,ne,ce;if(I==="c")Ce=Y(Ae)+Ce,Ae="";else{Ae=+Ae;var ae=Ae<0||1/Ae<0;if(Ae=isNaN(Ae)?u:Y(Math.abs(Ae),C),N&&(Ae=Wwe(Ae)),ae&&+Ae==0&&y!=="+"&&(ae=!1),we=(ae?y==="("?y:c:y==="-"||y==="("?"":y)+we,Ce=(I==="s"&&!isNaN(Ae)&&dj!==void 0?PH[8+dj/3]:"")+Ce+(ae&&y==="("?")":""),re){for(ve=-1,ne=Ae.length;++ve<ne;)if(ce=Ae.charCodeAt(ve),48>ce||ce>57){Ce=(ce===46?i+Ae.slice(ve+1):Ae.slice(ve))+Ce,Ae=Ae.slice(0,ve);break}}}T&&!w&&(Ae=e(Ae,1/0));var De=we.length+Ae.length+Ce.length,Oe=De<E?new Array(E-De+1).join(p):"";switch(T&&w&&(Ae=e(Oe+Ae,Oe.length?E-Ce.length:1/0),Oe=""),g){case"<":Ae=we+Ae+Ce+Oe;break;case"=":Ae=we+Oe+Ae+Ce;break;case"^":Ae=Oe.slice(0,De=Oe.length>>1)+we+Ae+Ce+Oe.slice(De);break;default:Ae=Oe+we+Ae+Ce;break}return s(Ae)}return se.toString=function(){return f+""},se}function d(f,A){var p=Math.max(-8,Math.min(8,Math.floor(Ob(A)/3)))*3,g=Math.pow(10,-p),y=l((f=DE(f),f.type="f",f),{suffix:PH[8+p/3]});return function(x){return y(g*x)}}return{format:l,formatPrefix:d}}var X_,fD,fJ;Xwe({thousands:",",grouping:[3],currency:["$",""]});function Xwe(t){return X_=qwe(t),fD=X_.format,fJ=X_.formatPrefix,X_}function Zwe(t){return Math.max(0,-Ob(Math.abs(t)))}function Jwe(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ob(e)/3)))*3-Ob(Math.abs(t)))}function eEe(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Ob(e)-Ob(t))+1}function AJ(t,e,r,n){var i=AP(t,e,r),s;switch(n=DE(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(s=Jwe(i,o))&&(n.precision=s),fJ(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(s=eEe(i,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=s-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(s=Zwe(i))&&(n.precision=s-(n.type==="%")*2);break}}return fD(n)}function Q0(t){var e=t.domain;return t.ticks=function(r){var n=e();return hP(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var i=e();return AJ(i[0],i[i.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),i=0,s=n.length-1,o=n[i],c=n[s],u,l,d=10;for(c<o&&(l=o,o=c,c=l,l=i,i=s,s=l);d-- >0;){if(l=fP(o,c,r),l===u)return n[i]=o,n[s]=c,e(n);if(l>0)o=Math.floor(o/l)*l,c=Math.ceil(c/l)*l;else if(l<0)o=Math.ceil(o*l)/l,c=Math.floor(c*l)/l;else break;u=l}return t},t}function mJ(){var t=dD();return t.copy=function(){return $2(t,mJ())},rA.apply(t,arguments),Q0(t)}function pJ(t){var e;function r(n){return n==null||isNaN(n=+n)?e:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(t=Array.from(n,cj),r):t.slice()},r.unknown=function(n){return arguments.length?(e=n,r):e},r.copy=function(){return pJ(t).unknown(e)},t=arguments.length?Array.from(t,cj):[0,1],Q0(r)}function gJ(t,e){t=t.slice();var r=0,n=t.length-1,i=t[r],s=t[n],o;return s<i&&(o=r,r=n,n=o,o=i,i=s,s=o),t[r]=e.floor(i),t[n]=e.ceil(s),t}function OH(t){return Math.log(t)}function RH(t){return Math.exp(t)}function tEe(t){return-Math.log(-t)}function rEe(t){return-Math.exp(-t)}function nEe(t){return isFinite(t)?+("1e"+t):t<0?0:t}function iEe(t){return t===10?nEe:t===Math.E?Math.exp:e=>Math.pow(t,e)}function sEe(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function DH(t){return(e,r)=>-t(-e,r)}function AD(t){const e=t(OH,RH),r=e.domain;let n=10,i,s;function o(){return i=sEe(n),s=iEe(n),r()[0]<0?(i=DH(i),s=DH(s),t(tEe,rEe)):t(OH,RH),e}return e.base=function(c){return arguments.length?(n=+c,o()):n},e.domain=function(c){return arguments.length?(r(c),o()):r()},e.ticks=c=>{const u=r();let l=u[0],d=u[u.length-1];const f=d<l;f&&([l,d]=[d,l]);let A=i(l),p=i(d),g,y;const x=c==null?10:+c;let w=[];if(!(n%1)&&p-A<x){if(A=Math.floor(A),p=Math.ceil(p),l>0){for(;A<=p;++A)for(g=1;g<n;++g)if(y=A<0?g/s(-A):g*s(A),!(y<l)){if(y>d)break;w.push(y)}}else for(;A<=p;++A)for(g=n-1;g>=1;--g)if(y=A>0?g/s(-A):g*s(A),!(y<l)){if(y>d)break;w.push(y)}w.length*2<x&&(w=hP(l,d,x))}else w=hP(A,p,Math.min(p-A,x)).map(s);return f?w.reverse():w},e.tickFormat=(c,u)=>{if(c==null&&(c=10),u==null&&(u=n===10?"s":","),typeof u!="function"&&(!(n%1)&&(u=DE(u)).precision==null&&(u.trim=!0),u=fD(u)),c===1/0)return u;const l=Math.max(1,n*c/e.ticks().length);return d=>{let f=d/s(Math.round(i(d)));return f*n<n-.5&&(f*=n),f<=l?u(d):""}},e.nice=()=>r(gJ(r(),{floor:c=>s(Math.floor(i(c))),ceil:c=>s(Math.ceil(i(c)))})),e}function vJ(){const t=AD(s5()).domain([1,10]);return t.copy=()=>$2(t,vJ()).base(t.base()),rA.apply(t,arguments),t}function MH(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function FH(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function mD(t){var e=1,r=t(MH(e),FH(e));return r.constant=function(n){return arguments.length?t(MH(e=+n),FH(e)):e},Q0(r)}function yJ(){var t=mD(s5());return t.copy=function(){return $2(t,yJ()).constant(t.constant())},rA.apply(t,arguments)}function UH(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function aEe(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function oEe(t){return t<0?-t*t:t*t}function pD(t){var e=t(gh,gh),r=1;function n(){return r===1?t(gh,gh):r===.5?t(aEe,oEe):t(UH(r),UH(1/r))}return e.exponent=function(i){return arguments.length?(r=+i,n()):r},Q0(e)}function gD(){var t=pD(s5());return t.copy=function(){return $2(t,gD()).exponent(t.exponent())},rA.apply(t,arguments),t}function lEe(){return gD.apply(null,arguments).exponent(.5)}function $H(t){return Math.sign(t)*t*t}function cEe(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function xJ(){var t=dD(),e=[0,1],r=!1,n;function i(s){var o=cEe(t(s));return isNaN(o)?n:r?Math.round(o):o}return i.invert=function(s){return t.invert($H(s))},i.domain=function(s){return arguments.length?(t.domain(s),i):t.domain()},i.range=function(s){return arguments.length?(t.range((e=Array.from(s,cj)).map($H)),i):e.slice()},i.rangeRound=function(s){return i.range(s).round(!0)},i.round=function(s){return arguments.length?(r=!!s,i):r},i.clamp=function(s){return arguments.length?(t.clamp(s),i):t.clamp()},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return xJ(t.domain(),e).round(r).clamp(t.clamp()).unknown(n)},rA.apply(i,arguments),Q0(i)}function bJ(){var t=[],e=[],r=[],n;function i(){var o=0,c=Math.max(1,e.length);for(r=new Array(c-1);++o<c;)r[o-1]=fwe(t,o/c);return s}function s(o){return o==null||isNaN(o=+o)?n:e[F2(r,o)]}return s.invertExtent=function(o){var c=e.indexOf(o);return c<0?[NaN,NaN]:[c>0?r[c-1]:t[0],c<r.length?r[c]:t[t.length-1]]},s.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let c of o)c!=null&&!isNaN(c=+c)&&t.push(c);return t.sort(S0),i()},s.range=function(o){return arguments.length?(e=Array.from(o),i()):e.slice()},s.unknown=function(o){return arguments.length?(n=o,s):n},s.quantiles=function(){return r.slice()},s.copy=function(){return bJ().domain(t).range(e).unknown(n)},rA.apply(s,arguments)}function wJ(){var t=0,e=1,r=1,n=[.5],i=[0,1],s;function o(u){return u!=null&&u<=u?i[F2(n,u,0,r)]:s}function c(){var u=-1;for(n=new Array(r);++u<r;)n[u]=((u+1)*e-(u-r)*t)/(r+1);return o}return o.domain=function(u){return arguments.length?([t,e]=u,t=+t,e=+e,c()):[t,e]},o.range=function(u){return arguments.length?(r=(i=Array.from(u)).length-1,c()):i.slice()},o.invertExtent=function(u){var l=i.indexOf(u);return l<0?[NaN,NaN]:l<1?[t,n[0]]:l>=r?[n[r-1],e]:[n[l-1],n[l]]},o.unknown=function(u){return arguments.length&&(s=u),o},o.thresholds=function(){return n.slice()},o.copy=function(){return wJ().domain([t,e]).range(i).unknown(s)},rA.apply(Q0(o),arguments)}function EJ(){var t=[.5],e=[0,1],r,n=1;function i(s){return s!=null&&s<=s?e[F2(t,s,0,n)]:r}return i.domain=function(s){return arguments.length?(t=Array.from(s),n=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(s){return arguments.length?(e=Array.from(s),n=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(s){var o=e.indexOf(s);return[t[o-1],t[o]]},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return EJ().domain(t).range(e).unknown(r)},rA.apply(i,arguments)}const xL=new Date,bL=new Date;function zu(t,e,r,n){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(t(s=new Date(+s)),s),i.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),i.round=s=>{const o=i(s),c=i.ceil(s);return s-o<c-s?o:c},i.offset=(s,o)=>(e(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,c)=>{const u=[];if(s=i.ceil(s),c=c==null?1:Math.floor(c),!(s<o)||!(c>0))return u;let l;do u.push(l=new Date(+s)),e(s,c),t(s);while(l<s&&s<o);return u},i.filter=s=>zu(o=>{if(o>=o)for(;t(o),!s(o);)o.setTime(o-1)},(o,c)=>{if(o>=o)if(c<0)for(;++c<=0;)for(;e(o,-1),!s(o););else for(;--c>=0;)for(;e(o,1),!s(o););}),r&&(i.count=(s,o)=>(xL.setTime(+s),bL.setTime(+o),t(xL),t(bL),Math.floor(r(xL,bL))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(n?o=>n(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const hj=zu(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);hj.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?zu(e=>{e.setTime(Math.floor(e/t)*t)},(e,r)=>{e.setTime(+e+r*t)},(e,r)=>(r-e)/t):hj);hj.range;const Op=1e3,Wf=Op*60,Rp=Wf*60,Yp=Rp*24,vD=Yp*7,HH=Yp*30,wL=Yp*365,Mv=zu(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Op)},(t,e)=>(e-t)/Op,t=>t.getUTCSeconds());Mv.range;const yD=zu(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Op)},(t,e)=>{t.setTime(+t+e*Wf)},(t,e)=>(e-t)/Wf,t=>t.getMinutes());yD.range;const xD=zu(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Wf)},(t,e)=>(e-t)/Wf,t=>t.getUTCMinutes());xD.range;const bD=zu(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Op-t.getMinutes()*Wf)},(t,e)=>{t.setTime(+t+e*Rp)},(t,e)=>(e-t)/Rp,t=>t.getHours());bD.range;const wD=zu(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Rp)},(t,e)=>(e-t)/Rp,t=>t.getUTCHours());wD.range;const H2=zu(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Wf)/Yp,t=>t.getDate()-1);H2.range;const a5=zu(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Yp,t=>t.getUTCDate()-1);a5.range;const _J=zu(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Yp,t=>Math.floor(t/Yp));_J.range;function wy(t){return zu(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,r)=>{e.setDate(e.getDate()+r*7)},(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*Wf)/vD)}const o5=wy(0),fj=wy(1),uEe=wy(2),dEe=wy(3),Rb=wy(4),hEe=wy(5),fEe=wy(6);o5.range;fj.range;uEe.range;dEe.range;Rb.range;hEe.range;fEe.range;function Ey(t){return zu(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r*7)},(e,r)=>(r-e)/vD)}const l5=Ey(0),Aj=Ey(1),AEe=Ey(2),mEe=Ey(3),Db=Ey(4),pEe=Ey(5),gEe=Ey(6);l5.range;Aj.range;AEe.range;mEe.range;Db.range;pEe.range;gEe.range;const ED=zu(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());ED.range;const _D=zu(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());_D.range;const qp=zu(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());qp.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:zu(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r*t)});qp.range;const Xp=zu(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Xp.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:zu(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r*t)});Xp.range;function SJ(t,e,r,n,i,s){const o=[[Mv,1,Op],[Mv,5,5*Op],[Mv,15,15*Op],[Mv,30,30*Op],[s,1,Wf],[s,5,5*Wf],[s,15,15*Wf],[s,30,30*Wf],[i,1,Rp],[i,3,3*Rp],[i,6,6*Rp],[i,12,12*Rp],[n,1,Yp],[n,2,2*Yp],[r,1,vD],[e,1,HH],[e,3,3*HH],[t,1,wL]];function c(l,d,f){const A=d<l;A&&([l,d]=[d,l]);const p=f&&typeof f.range=="function"?f:u(l,d,f),g=p?p.range(l,+d+1):[];return A?g.reverse():g}function u(l,d,f){const A=Math.abs(d-l)/f,p=sD(([,,x])=>x).right(o,A);if(p===o.length)return t.every(AP(l/wL,d/wL,f));if(p===0)return hj.every(Math.max(AP(l,d,f),1));const[g,y]=o[A/o[p-1][2]<o[p][2]/A?p-1:p];return g.every(y)}return[c,u]}const[vEe,yEe]=SJ(Xp,_D,l5,_J,wD,xD),[xEe,bEe]=SJ(qp,ED,o5,H2,bD,yD);function EL(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function _L(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function z1(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function wEe(t){var e=t.dateTime,r=t.date,n=t.time,i=t.periods,s=t.days,o=t.shortDays,c=t.months,u=t.shortMonths,l=K1(i),d=G1(i),f=K1(s),A=G1(s),p=K1(o),g=G1(o),y=K1(c),x=G1(c),w=K1(u),E=G1(u),T={a:ce,A:ae,b:De,B:Oe,c:null,d:WH,e:WH,f:zEe,g:t2e,G:n2e,H:HEe,I:QEe,j:VEe,L:TJ,m:KEe,M:GEe,p:be,q:de,Q:XH,s:ZH,S:WEe,u:YEe,U:qEe,V:XEe,w:ZEe,W:JEe,x:null,X:null,y:e2e,Y:r2e,Z:i2e,"%":qH},C={a:xe,A:je,b:Me,B:Re,c:null,d:YH,e:YH,f:l2e,g:v2e,G:x2e,H:s2e,I:a2e,j:o2e,L:jJ,m:c2e,M:u2e,p:it,q:ht,Q:XH,s:ZH,S:d2e,u:h2e,U:f2e,V:A2e,w:m2e,W:p2e,x:null,X:null,y:g2e,Y:y2e,Z:b2e,"%":qH},N={a:re,A:se,b:Ae,B:we,c:Ce,d:KH,e:KH,f:MEe,g:zH,G:VH,H:GH,I:GH,j:PEe,L:DEe,m:BEe,M:OEe,p:Y,q:LEe,Q:UEe,s:$Ee,S:REe,u:CEe,U:jEe,V:NEe,w:TEe,W:kEe,x:ve,X:ne,y:zH,Y:VH,Z:IEe,"%":FEe};T.x=I(r,T),T.X=I(n,T),T.c=I(e,T),C.x=I(r,C),C.X=I(n,C),C.c=I(e,C);function I(Be,nt){return function(Ge){var ft=[],Dt=-1,rt=0,kt=Be.length,_t,wt,Tt;for(Ge instanceof Date||(Ge=new Date(+Ge));++Dt<kt;)Be.charCodeAt(Dt)===37&&(ft.push(Be.slice(rt,Dt)),(wt=QH[_t=Be.charAt(++Dt)])!=null?_t=Be.charAt(++Dt):wt=_t==="e"?" ":"0",(Tt=nt[_t])&&(_t=Tt(Ge,wt)),ft.push(_t),rt=Dt+1);return ft.push(Be.slice(rt,Dt)),ft.join("")}}function U(Be,nt){return function(Ge){var ft=z1(1900,void 0,1),Dt=K(ft,Be,Ge+="",0),rt,kt;if(Dt!=Ge.length)return null;if("Q"in ft)return new Date(ft.Q);if("s"in ft)return new Date(ft.s*1e3+("L"in ft?ft.L:0));if(nt&&!("Z"in ft)&&(ft.Z=0),"p"in ft&&(ft.H=ft.H%12+ft.p*12),ft.m===void 0&&(ft.m="q"in ft?ft.q:0),"V"in ft){if(ft.V<1||ft.V>53)return null;"w"in ft||(ft.w=1),"Z"in ft?(rt=_L(z1(ft.y,0,1)),kt=rt.getUTCDay(),rt=kt>4||kt===0?Aj.ceil(rt):Aj(rt),rt=a5.offset(rt,(ft.V-1)*7),ft.y=rt.getUTCFullYear(),ft.m=rt.getUTCMonth(),ft.d=rt.getUTCDate()+(ft.w+6)%7):(rt=EL(z1(ft.y,0,1)),kt=rt.getDay(),rt=kt>4||kt===0?fj.ceil(rt):fj(rt),rt=H2.offset(rt,(ft.V-1)*7),ft.y=rt.getFullYear(),ft.m=rt.getMonth(),ft.d=rt.getDate()+(ft.w+6)%7)}else("W"in ft||"U"in ft)&&("w"in ft||(ft.w="u"in ft?ft.u%7:"W"in ft?1:0),kt="Z"in ft?_L(z1(ft.y,0,1)).getUTCDay():EL(z1(ft.y,0,1)).getDay(),ft.m=0,ft.d="W"in ft?(ft.w+6)%7+ft.W*7-(kt+5)%7:ft.w+ft.U*7-(kt+6)%7);return"Z"in ft?(ft.H+=ft.Z/100|0,ft.M+=ft.Z%100,_L(ft)):EL(ft)}}function K(Be,nt,Ge,ft){for(var Dt=0,rt=nt.length,kt=Ge.length,_t,wt;Dt<rt;){if(ft>=kt)return-1;if(_t=nt.charCodeAt(Dt++),_t===37){if(_t=nt.charAt(Dt++),wt=N[_t in QH?nt.charAt(Dt++):_t],!wt||(ft=wt(Be,Ge,ft))<0)return-1}else if(_t!=Ge.charCodeAt(ft++))return-1}return ft}function Y(Be,nt,Ge){var ft=l.exec(nt.slice(Ge));return ft?(Be.p=d.get(ft[0].toLowerCase()),Ge+ft[0].length):-1}function re(Be,nt,Ge){var ft=p.exec(nt.slice(Ge));return ft?(Be.w=g.get(ft[0].toLowerCase()),Ge+ft[0].length):-1}function se(Be,nt,Ge){var ft=f.exec(nt.slice(Ge));return ft?(Be.w=A.get(ft[0].toLowerCase()),Ge+ft[0].length):-1}function Ae(Be,nt,Ge){var ft=w.exec(nt.slice(Ge));return ft?(Be.m=E.get(ft[0].toLowerCase()),Ge+ft[0].length):-1}function we(Be,nt,Ge){var ft=y.exec(nt.slice(Ge));return ft?(Be.m=x.get(ft[0].toLowerCase()),Ge+ft[0].length):-1}function Ce(Be,nt,Ge){return K(Be,e,nt,Ge)}function ve(Be,nt,Ge){return K(Be,r,nt,Ge)}function ne(Be,nt,Ge){return K(Be,n,nt,Ge)}function ce(Be){return o[Be.getDay()]}function ae(Be){return s[Be.getDay()]}function De(Be){return u[Be.getMonth()]}function Oe(Be){return c[Be.getMonth()]}function be(Be){return i[+(Be.getHours()>=12)]}function de(Be){return 1+~~(Be.getMonth()/3)}function xe(Be){return o[Be.getUTCDay()]}function je(Be){return s[Be.getUTCDay()]}function Me(Be){return u[Be.getUTCMonth()]}function Re(Be){return c[Be.getUTCMonth()]}function it(Be){return i[+(Be.getUTCHours()>=12)]}function ht(Be){return 1+~~(Be.getUTCMonth()/3)}return{format:function(Be){var nt=I(Be+="",T);return nt.toString=function(){return Be},nt},parse:function(Be){var nt=U(Be+="",!1);return nt.toString=function(){return Be},nt},utcFormat:function(Be){var nt=I(Be+="",C);return nt.toString=function(){return Be},nt},utcParse:function(Be){var nt=U(Be+="",!0);return nt.toString=function(){return Be},nt}}}var QH={"-":"",_:" ",0:"0"},pd=/^\s*\d+/,EEe=/^%/,_Ee=/[\\^$*+?|[\]().{}]/g;function mo(t,e,r){var n=t<0?"-":"",i=(n?-t:t)+"",s=i.length;return n+(s<r?new Array(r-s+1).join(e)+i:i)}function SEe(t){return t.replace(_Ee,"\\$&")}function K1(t){return new RegExp("^(?:"+t.map(SEe).join("|")+")","i")}function G1(t){return new Map(t.map((e,r)=>[e.toLowerCase(),r]))}function TEe(t,e,r){var n=pd.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function CEe(t,e,r){var n=pd.exec(e.slice(r,r+1));return n?(t.u=+n[0],r+n[0].length):-1}function jEe(t,e,r){var n=pd.exec(e.slice(r,r+2));return n?(t.U=+n[0],r+n[0].length):-1}function NEe(t,e,r){var n=pd.exec(e.slice(r,r+2));return n?(t.V=+n[0],r+n[0].length):-1}function kEe(t,e,r){var n=pd.exec(e.slice(r,r+2));return n?(t.W=+n[0],r+n[0].length):-1}function VH(t,e,r){var n=pd.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function zH(t,e,r){var n=pd.exec(e.slice(r,r+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function IEe(t,e,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function LEe(t,e,r){var n=pd.exec(e.slice(r,r+1));return n?(t.q=n[0]*3-3,r+n[0].length):-1}function BEe(t,e,r){var n=pd.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function KH(t,e,r){var n=pd.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function PEe(t,e,r){var n=pd.exec(e.slice(r,r+3));return n?(t.m=0,t.d=+n[0],r+n[0].length):-1}function GH(t,e,r){var n=pd.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function OEe(t,e,r){var n=pd.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function REe(t,e,r){var n=pd.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function DEe(t,e,r){var n=pd.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function MEe(t,e,r){var n=pd.exec(e.slice(r,r+6));return n?(t.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function FEe(t,e,r){var n=EEe.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function UEe(t,e,r){var n=pd.exec(e.slice(r));return n?(t.Q=+n[0],r+n[0].length):-1}function $Ee(t,e,r){var n=pd.exec(e.slice(r));return n?(t.s=+n[0],r+n[0].length):-1}function WH(t,e){return mo(t.getDate(),e,2)}function HEe(t,e){return mo(t.getHours(),e,2)}function QEe(t,e){return mo(t.getHours()%12||12,e,2)}function VEe(t,e){return mo(1+H2.count(qp(t),t),e,3)}function TJ(t,e){return mo(t.getMilliseconds(),e,3)}function zEe(t,e){return TJ(t,e)+"000"}function KEe(t,e){return mo(t.getMonth()+1,e,2)}function GEe(t,e){return mo(t.getMinutes(),e,2)}function WEe(t,e){return mo(t.getSeconds(),e,2)}function YEe(t){var e=t.getDay();return e===0?7:e}function qEe(t,e){return mo(o5.count(qp(t)-1,t),e,2)}function CJ(t){var e=t.getDay();return e>=4||e===0?Rb(t):Rb.ceil(t)}function XEe(t,e){return t=CJ(t),mo(Rb.count(qp(t),t)+(qp(t).getDay()===4),e,2)}function ZEe(t){return t.getDay()}function JEe(t,e){return mo(fj.count(qp(t)-1,t),e,2)}function e2e(t,e){return mo(t.getFullYear()%100,e,2)}function t2e(t,e){return t=CJ(t),mo(t.getFullYear()%100,e,2)}function r2e(t,e){return mo(t.getFullYear()%1e4,e,4)}function n2e(t,e){var r=t.getDay();return t=r>=4||r===0?Rb(t):Rb.ceil(t),mo(t.getFullYear()%1e4,e,4)}function i2e(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+mo(e/60|0,"0",2)+mo(e%60,"0",2)}function YH(t,e){return mo(t.getUTCDate(),e,2)}function s2e(t,e){return mo(t.getUTCHours(),e,2)}function a2e(t,e){return mo(t.getUTCHours()%12||12,e,2)}function o2e(t,e){return mo(1+a5.count(Xp(t),t),e,3)}function jJ(t,e){return mo(t.getUTCMilliseconds(),e,3)}function l2e(t,e){return jJ(t,e)+"000"}function c2e(t,e){return mo(t.getUTCMonth()+1,e,2)}function u2e(t,e){return mo(t.getUTCMinutes(),e,2)}function d2e(t,e){return mo(t.getUTCSeconds(),e,2)}function h2e(t){var e=t.getUTCDay();return e===0?7:e}function f2e(t,e){return mo(l5.count(Xp(t)-1,t),e,2)}function NJ(t){var e=t.getUTCDay();return e>=4||e===0?Db(t):Db.ceil(t)}function A2e(t,e){return t=NJ(t),mo(Db.count(Xp(t),t)+(Xp(t).getUTCDay()===4),e,2)}function m2e(t){return t.getUTCDay()}function p2e(t,e){return mo(Aj.count(Xp(t)-1,t),e,2)}function g2e(t,e){return mo(t.getUTCFullYear()%100,e,2)}function v2e(t,e){return t=NJ(t),mo(t.getUTCFullYear()%100,e,2)}function y2e(t,e){return mo(t.getUTCFullYear()%1e4,e,4)}function x2e(t,e){var r=t.getUTCDay();return t=r>=4||r===0?Db(t):Db.ceil(t),mo(t.getUTCFullYear()%1e4,e,4)}function b2e(){return"+0000"}function qH(){return"%"}function XH(t){return+t}function ZH(t){return Math.floor(+t/1e3)}var Wy,kJ,IJ;w2e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function w2e(t){return Wy=wEe(t),kJ=Wy.format,Wy.parse,IJ=Wy.utcFormat,Wy.utcParse,Wy}function E2e(t){return new Date(t)}function _2e(t){return t instanceof Date?+t:+new Date(+t)}function SD(t,e,r,n,i,s,o,c,u,l){var d=dD(),f=d.invert,A=d.domain,p=l(".%L"),g=l(":%S"),y=l("%I:%M"),x=l("%I %p"),w=l("%a %d"),E=l("%b %d"),T=l("%B"),C=l("%Y");function N(I){return(u(I)<I?p:c(I)<I?g:o(I)<I?y:s(I)<I?x:n(I)<I?i(I)<I?w:E:r(I)<I?T:C)(I)}return d.invert=function(I){return new Date(f(I))},d.domain=function(I){return arguments.length?A(Array.from(I,_2e)):A().map(E2e)},d.ticks=function(I){var U=A();return t(U[0],U[U.length-1],I??10)},d.tickFormat=function(I,U){return U==null?N:l(U)},d.nice=function(I){var U=A();return(!I||typeof I.range!="function")&&(I=e(U[0],U[U.length-1],I??10)),I?A(gJ(U,I)):d},d.copy=function(){return $2(d,SD(t,e,r,n,i,s,o,c,u,l))},d}function S2e(){return rA.apply(SD(xEe,bEe,qp,ED,o5,H2,bD,yD,Mv,kJ).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function T2e(){return rA.apply(SD(vEe,yEe,Xp,_D,l5,a5,wD,xD,Mv,IJ).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function c5(){var t=0,e=1,r,n,i,s,o=gh,c=!1,u;function l(f){return f==null||isNaN(f=+f)?u:o(i===0?.5:(f=(s(f)-r)*i,c?Math.max(0,Math.min(1,f)):f))}l.domain=function(f){return arguments.length?([t,e]=f,r=s(t=+t),n=s(e=+e),i=r===n?0:1/(n-r),l):[t,e]},l.clamp=function(f){return arguments.length?(c=!!f,l):c},l.interpolator=function(f){return arguments.length?(o=f,l):o};function d(f){return function(A){var p,g;return arguments.length?([p,g]=A,o=f(p,g),l):[o(0),o(1)]}}return l.range=d(o1),l.rangeRound=d(uD),l.unknown=function(f){return arguments.length?(u=f,l):u},function(f){return s=f,r=f(t),n=f(e),i=r===n?0:1/(n-r),l}}function V0(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function LJ(){var t=Q0(c5()(gh));return t.copy=function(){return V0(t,LJ())},og.apply(t,arguments)}function BJ(){var t=AD(c5()).domain([1,10]);return t.copy=function(){return V0(t,BJ()).base(t.base())},og.apply(t,arguments)}function PJ(){var t=mD(c5());return t.copy=function(){return V0(t,PJ()).constant(t.constant())},og.apply(t,arguments)}function TD(){var t=pD(c5());return t.copy=function(){return V0(t,TD()).exponent(t.exponent())},og.apply(t,arguments)}function C2e(){return TD.apply(null,arguments).exponent(.5)}function OJ(){var t=[],e=gh;function r(n){if(n!=null&&!isNaN(n=+n))return e((F2(t,n,1)-1)/(t.length-1))}return r.domain=function(n){if(!arguments.length)return t.slice();t=[];for(let i of n)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(S0),r},r.interpolator=function(n){return arguments.length?(e=n,r):e},r.range=function(){return t.map((n,i)=>e(i/(t.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(i,s)=>hwe(t,s/n))},r.copy=function(){return OJ(e).domain(t)},og.apply(r,arguments)}function u5(){var t=0,e=.5,r=1,n=1,i,s,o,c,u,l=gh,d,f=!1,A;function p(y){return isNaN(y=+y)?A:(y=.5+((y=+d(y))-s)*(n*y<n*s?c:u),l(f?Math.max(0,Math.min(1,y)):y))}p.domain=function(y){return arguments.length?([t,e,r]=y,i=d(t=+t),s=d(e=+e),o=d(r=+r),c=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),n=s<i?-1:1,p):[t,e,r]},p.clamp=function(y){return arguments.length?(f=!!y,p):f},p.interpolator=function(y){return arguments.length?(l=y,p):l};function g(y){return function(x){var w,E,T;return arguments.length?([w,E,T]=x,l=Fwe(y,[w,E,T]),p):[l(0),l(.5),l(1)]}}return p.range=g(o1),p.rangeRound=g(uD),p.unknown=function(y){return arguments.length?(A=y,p):A},function(y){return d=y,i=y(t),s=y(e),o=y(r),c=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),n=s<i?-1:1,p}}function RJ(){var t=Q0(u5()(gh));return t.copy=function(){return V0(t,RJ())},og.apply(t,arguments)}function DJ(){var t=AD(u5()).domain([.1,1,10]);return t.copy=function(){return V0(t,DJ()).base(t.base())},og.apply(t,arguments)}function MJ(){var t=mD(u5());return t.copy=function(){return V0(t,MJ()).constant(t.constant())},og.apply(t,arguments)}function CD(){var t=pD(u5());return t.copy=function(){return V0(t,CD()).exponent(t.exponent())},og.apply(t,arguments)}function j2e(){return CD.apply(null,arguments).exponent(.5)}const mw=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:oD,scaleDiverging:RJ,scaleDivergingLog:DJ,scaleDivergingPow:CD,scaleDivergingSqrt:j2e,scaleDivergingSymlog:MJ,scaleIdentity:pJ,scaleImplicit:mP,scaleLinear:mJ,scaleLog:vJ,scaleOrdinal:aD,scalePoint:mwe,scalePow:gD,scaleQuantile:bJ,scaleQuantize:wJ,scaleRadial:xJ,scaleSequential:LJ,scaleSequentialLog:BJ,scaleSequentialPow:TD,scaleSequentialQuantile:OJ,scaleSequentialSqrt:C2e,scaleSequentialSymlog:PJ,scaleSqrt:lEe,scaleSymlog:yJ,scaleThreshold:EJ,scaleTime:S2e,scaleUtc:T2e,tickFormat:AJ},Symbol.toStringTag,{value:"Module"}));var lg=t=>t.chartData,Q2=or([lg],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),FJ=(t,e,r,n)=>n?Q2(t):lg(t),N2e=(t,e,r)=>r?Q2(t):lg(t);function Zp(t){if(Array.isArray(t)&&t.length===2){var[e,r]=t;if(Ha(e)&&Ha(r))return!0}return!1}function JH(t,e,r){return r?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function UJ(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[r,n]=t,i,s;if(Ha(r))i=r;else if(typeof r=="function")return;if(Ha(n))s=n;else if(typeof n=="function")return;var o=[i,s];if(Zp(o))return o}}function k2e(t,e,r){if(!(!r&&e==null)){if(typeof t=="function"&&e!=null)try{var n=t(e,r);if(Zp(n))return JH(n,e,r)}catch{}if(Array.isArray(t)&&t.length===2){var[i,s]=t,o,c;if(i==="auto")e!=null&&(o=Math.min(...e));else if(Ei(i))o=i;else if(typeof i=="function")try{e!=null&&(o=i(e?.[0]))}catch{}else if(typeof i=="string"&&c9.test(i)){var u=c9.exec(i);if(u==null||u[1]==null||e==null)o=void 0;else{var l=+u[1];o=e[0]-l}}else o=e?.[0];if(s==="auto")e!=null&&(c=Math.max(...e));else if(Ei(s))c=s;else if(typeof s=="function")try{e!=null&&(c=s(e?.[1]))}catch{}else if(typeof s=="string"&&u9.test(s)){var d=u9.exec(s);if(d==null||d[1]==null||e==null)c=void 0;else{var f=+d[1];c=e[1]+f}}else c=e?.[1];var A=[o,c];if(Zp(A))return e==null?A:JH(A,e,r)}}}var l1=1e9,I2e={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},ND,Xl=!0,Zf="[DecimalError] ",qv=Zf+"Invalid argument: ",jD=Zf+"Exponent out of range: ",c1=Math.floor,vv=Math.pow,L2e=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Af,dd=1e7,Dl=7,$J=9007199254740991,mj=c1($J/Dl),vi={};vi.absoluteValue=vi.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};vi.comparedTo=vi.cmp=function(t){var e,r,n,i,s=this;if(t=new s.constructor(t),s.s!==t.s)return s.s||-t.s;if(s.e!==t.e)return s.e>t.e^s.s<0?1:-1;for(n=s.d.length,i=t.d.length,e=0,r=n<i?n:i;e<r;++e)if(s.d[e]!==t.d[e])return s.d[e]>t.d[e]^s.s<0?1:-1;return n===i?0:n>i^s.s<0?1:-1};vi.decimalPlaces=vi.dp=function(){var t=this,e=t.d.length-1,r=(e-t.e)*Dl;if(e=t.d[e],e)for(;e%10==0;e/=10)r--;return r<0?0:r};vi.dividedBy=vi.div=function(t){return Up(this,new this.constructor(t))};vi.dividedToIntegerBy=vi.idiv=function(t){var e=this,r=e.constructor;return hl(Up(e,new r(t),0,1),r.precision)};vi.equals=vi.eq=function(t){return!this.cmp(t)};vi.exponent=function(){return gu(this)};vi.greaterThan=vi.gt=function(t){return this.cmp(t)>0};vi.greaterThanOrEqualTo=vi.gte=function(t){return this.cmp(t)>=0};vi.isInteger=vi.isint=function(){return this.e>this.d.length-2};vi.isNegative=vi.isneg=function(){return this.s<0};vi.isPositive=vi.ispos=function(){return this.s>0};vi.isZero=function(){return this.s===0};vi.lessThan=vi.lt=function(t){return this.cmp(t)<0};vi.lessThanOrEqualTo=vi.lte=function(t){return this.cmp(t)<1};vi.logarithm=vi.log=function(t){var e,r=this,n=r.constructor,i=n.precision,s=i+5;if(t===void 0)t=new n(10);else if(t=new n(t),t.s<1||t.eq(Af))throw Error(Zf+"NaN");if(r.s<1)throw Error(Zf+(r.s?"NaN":"-Infinity"));return r.eq(Af)?new n(0):(Xl=!1,e=Up(ME(r,s),ME(t,s),s),Xl=!0,hl(e,i))};vi.minus=vi.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?VJ(e,t):HJ(e,(t.s=-t.s,t))};vi.modulo=vi.mod=function(t){var e,r=this,n=r.constructor,i=n.precision;if(t=new n(t),!t.s)throw Error(Zf+"NaN");return r.s?(Xl=!1,e=Up(r,t,0,1).times(t),Xl=!0,r.minus(e)):hl(new n(r),i)};vi.naturalExponential=vi.exp=function(){return QJ(this)};vi.naturalLogarithm=vi.ln=function(){return ME(this)};vi.negated=vi.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};vi.plus=vi.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?HJ(e,t):VJ(e,(t.s=-t.s,t))};vi.precision=vi.sd=function(t){var e,r,n,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(qv+t);if(e=gu(i)+1,n=i.d.length-1,r=n*Dl+1,n=i.d[n],n){for(;n%10==0;n/=10)r--;for(n=i.d[0];n>=10;n/=10)r++}return t&&e>r?e:r};vi.squareRoot=vi.sqrt=function(){var t,e,r,n,i,s,o,c=this,u=c.constructor;if(c.s<1){if(!c.s)return new u(0);throw Error(Zf+"NaN")}for(t=gu(c),Xl=!1,i=Math.sqrt(+c),i==0||i==1/0?(e=Pm(c.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=c1((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),n=new u(e)):n=new u(i.toString()),r=u.precision,i=o=r+3;;)if(s=n,n=s.plus(Up(c,s,o+2)).times(.5),Pm(s.d).slice(0,o)===(e=Pm(n.d)).slice(0,o)){if(e=e.slice(o-3,o+1),i==o&&e=="4999"){if(hl(s,r+1,0),s.times(s).eq(c)){n=s;break}}else if(e!="9999")break;o+=4}return Xl=!0,hl(n,r)};vi.times=vi.mul=function(t){var e,r,n,i,s,o,c,u,l,d=this,f=d.constructor,A=d.d,p=(t=new f(t)).d;if(!d.s||!t.s)return new f(0);for(t.s*=d.s,r=d.e+t.e,u=A.length,l=p.length,u<l&&(s=A,A=p,p=s,o=u,u=l,l=o),s=[],o=u+l,n=o;n--;)s.push(0);for(n=l;--n>=0;){for(e=0,i=u+n;i>n;)c=s[i]+p[n]*A[i-n-1]+e,s[i--]=c%dd|0,e=c/dd|0;s[i]=(s[i]+e)%dd|0}for(;!s[--o];)s.pop();return e?++r:s.shift(),t.d=s,t.e=r,Xl?hl(t,f.precision):t};vi.toDecimalPlaces=vi.todp=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(Wm(t,0,l1),e===void 0?e=n.rounding:Wm(e,0,8),hl(r,t+gu(r)+1,e))};vi.toExponential=function(t,e){var r,n=this,i=n.constructor;return t===void 0?r=py(n,!0):(Wm(t,0,l1),e===void 0?e=i.rounding:Wm(e,0,8),n=hl(new i(n),t+1,e),r=py(n,!0,t+1)),r};vi.toFixed=function(t,e){var r,n,i=this,s=i.constructor;return t===void 0?py(i):(Wm(t,0,l1),e===void 0?e=s.rounding:Wm(e,0,8),n=hl(new s(i),t+gu(i)+1,e),r=py(n.abs(),!1,t+gu(n)+1),i.isneg()&&!i.isZero()?"-"+r:r)};vi.toInteger=vi.toint=function(){var t=this,e=t.constructor;return hl(new e(t),gu(t)+1,e.rounding)};vi.toNumber=function(){return+this};vi.toPower=vi.pow=function(t){var e,r,n,i,s,o,c=this,u=c.constructor,l=12,d=+(t=new u(t));if(!t.s)return new u(Af);if(c=new u(c),!c.s){if(t.s<1)throw Error(Zf+"Infinity");return c}if(c.eq(Af))return c;if(n=u.precision,t.eq(Af))return hl(c,n);if(e=t.e,r=t.d.length-1,o=e>=r,s=c.s,o){if((r=d<0?-d:d)<=$J){for(i=new u(Af),e=Math.ceil(n/Dl+4),Xl=!1;r%2&&(i=i.times(c),tQ(i.d,e)),r=c1(r/2),r!==0;)c=c.times(c),tQ(c.d,e);return Xl=!0,t.s<0?new u(Af).div(i):hl(i,n)}}else if(s<0)throw Error(Zf+"NaN");return s=s<0&&t.d[Math.max(e,r)]&1?-1:1,c.s=1,Xl=!1,i=t.times(ME(c,n+l)),Xl=!0,i=QJ(i),i.s=s,i};vi.toPrecision=function(t,e){var r,n,i=this,s=i.constructor;return t===void 0?(r=gu(i),n=py(i,r<=s.toExpNeg||r>=s.toExpPos)):(Wm(t,1,l1),e===void 0?e=s.rounding:Wm(e,0,8),i=hl(new s(i),t,e),r=gu(i),n=py(i,t<=r||r<=s.toExpNeg,t)),n};vi.toSignificantDigits=vi.tosd=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(Wm(t,1,l1),e===void 0?e=n.rounding:Wm(e,0,8)),hl(new n(r),t,e)};vi.toString=vi.valueOf=vi.val=vi.toJSON=vi[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=gu(t),r=t.constructor;return py(t,e<=r.toExpNeg||e>=r.toExpPos)};function HJ(t,e){var r,n,i,s,o,c,u,l,d=t.constructor,f=d.precision;if(!t.s||!e.s)return e.s||(e=new d(t)),Xl?hl(e,f):e;if(u=t.d,l=e.d,o=t.e,i=e.e,u=u.slice(),s=o-i,s){for(s<0?(n=u,s=-s,c=l.length):(n=l,i=o,c=u.length),o=Math.ceil(f/Dl),c=o>c?o+1:c+1,s>c&&(s=c,n.length=1),n.reverse();s--;)n.push(0);n.reverse()}for(c=u.length,s=l.length,c-s<0&&(s=c,n=l,l=u,u=n),r=0;s;)r=(u[--s]=u[s]+l[s]+r)/dd|0,u[s]%=dd;for(r&&(u.unshift(r),++i),c=u.length;u[--c]==0;)u.pop();return e.d=u,e.e=i,Xl?hl(e,f):e}function Wm(t,e,r){if(t!==~~t||t<e||t>r)throw Error(qv+t)}function Pm(t){var e,r,n,i=t.length-1,s="",o=t[0];if(i>0){for(s+=o,e=1;e<i;e++)n=t[e]+"",r=Dl-n.length,r&&(s+=a0(r)),s+=n;o=t[e],n=o+"",r=Dl-n.length,r&&(s+=a0(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}var Up=(function(){function t(n,i){var s,o=0,c=n.length;for(n=n.slice();c--;)s=n[c]*i+o,n[c]=s%dd|0,o=s/dd|0;return o&&n.unshift(o),n}function e(n,i,s,o){var c,u;if(s!=o)u=s>o?1:-1;else for(c=u=0;c<s;c++)if(n[c]!=i[c]){u=n[c]>i[c]?1:-1;break}return u}function r(n,i,s){for(var o=0;s--;)n[s]-=o,o=n[s]<i[s]?1:0,n[s]=o*dd+n[s]-i[s];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,s,o){var c,u,l,d,f,A,p,g,y,x,w,E,T,C,N,I,U,K,Y=n.constructor,re=n.s==i.s?1:-1,se=n.d,Ae=i.d;if(!n.s)return new Y(n);if(!i.s)throw Error(Zf+"Division by zero");for(u=n.e-i.e,U=Ae.length,N=se.length,p=new Y(re),g=p.d=[],l=0;Ae[l]==(se[l]||0);)++l;if(Ae[l]>(se[l]||0)&&--u,s==null?E=s=Y.precision:o?E=s+(gu(n)-gu(i))+1:E=s,E<0)return new Y(0);if(E=E/Dl+2|0,l=0,U==1)for(d=0,Ae=Ae[0],E++;(l<N||d)&&E--;l++)T=d*dd+(se[l]||0),g[l]=T/Ae|0,d=T%Ae|0;else{for(d=dd/(Ae[0]+1)|0,d>1&&(Ae=t(Ae,d),se=t(se,d),U=Ae.length,N=se.length),C=U,y=se.slice(0,U),x=y.length;x<U;)y[x++]=0;K=Ae.slice(),K.unshift(0),I=Ae[0],Ae[1]>=dd/2&&++I;do d=0,c=e(Ae,y,U,x),c<0?(w=y[0],U!=x&&(w=w*dd+(y[1]||0)),d=w/I|0,d>1?(d>=dd&&(d=dd-1),f=t(Ae,d),A=f.length,x=y.length,c=e(f,y,A,x),c==1&&(d--,r(f,U<A?K:Ae,A))):(d==0&&(c=d=1),f=Ae.slice()),A=f.length,A<x&&f.unshift(0),r(y,f,x),c==-1&&(x=y.length,c=e(Ae,y,U,x),c<1&&(d++,r(y,U<x?K:Ae,x))),x=y.length):c===0&&(d++,y=[0]),g[l++]=d,c&&y[0]?y[x++]=se[C]||0:(y=[se[C]],x=1);while((C++<N||y[0]!==void 0)&&E--)}return g[0]||g.shift(),p.e=u,hl(p,o?s+gu(p)+1:s)}})();function QJ(t,e){var r,n,i,s,o,c,u=0,l=0,d=t.constructor,f=d.precision;if(gu(t)>16)throw Error(jD+gu(t));if(!t.s)return new d(Af);for(Xl=!1,c=f,o=new d(.03125);t.abs().gte(.1);)t=t.times(o),l+=5;for(n=Math.log(vv(2,l))/Math.LN10*2+5|0,c+=n,r=i=s=new d(Af),d.precision=c;;){if(i=hl(i.times(t),c),r=r.times(++u),o=s.plus(Up(i,r,c)),Pm(o.d).slice(0,c)===Pm(s.d).slice(0,c)){for(;l--;)s=hl(s.times(s),c);return d.precision=f,e==null?(Xl=!0,hl(s,f)):s}s=o}}function gu(t){for(var e=t.e*Dl,r=t.d[0];r>=10;r/=10)e++;return e}function SL(t,e,r){if(e>t.LN10.sd())throw Xl=!0,r&&(t.precision=r),Error(Zf+"LN10 precision limit exceeded");return hl(new t(t.LN10),e)}function a0(t){for(var e="";t--;)e+="0";return e}function ME(t,e){var r,n,i,s,o,c,u,l,d,f=1,A=10,p=t,g=p.d,y=p.constructor,x=y.precision;if(p.s<1)throw Error(Zf+(p.s?"NaN":"-Infinity"));if(p.eq(Af))return new y(0);if(e==null?(Xl=!1,l=x):l=e,p.eq(10))return e==null&&(Xl=!0),SL(y,l);if(l+=A,y.precision=l,r=Pm(g),n=r.charAt(0),s=gu(p),Math.abs(s)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)p=p.times(t),r=Pm(p.d),n=r.charAt(0),f++;s=gu(p),n>1?(p=new y("0."+r),s++):p=new y(n+"."+r.slice(1))}else return u=SL(y,l+2,x).times(s+""),p=ME(new y(n+"."+r.slice(1)),l-A).plus(u),y.precision=x,e==null?(Xl=!0,hl(p,x)):p;for(c=o=p=Up(p.minus(Af),p.plus(Af),l),d=hl(p.times(p),l),i=3;;){if(o=hl(o.times(d),l),u=c.plus(Up(o,new y(i),l)),Pm(u.d).slice(0,l)===Pm(c.d).slice(0,l))return c=c.times(2),s!==0&&(c=c.plus(SL(y,l+2,x).times(s+""))),c=Up(c,new y(f),l),y.precision=x,e==null?(Xl=!0,hl(c,x)):c;c=u,i+=2}}function eQ(t,e){var r,n,i;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;)++n;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(n,i),e){if(i-=n,r=r-n-1,t.e=c1(r/Dl),t.d=[],n=(r+1)%Dl,r<0&&(n+=Dl),n<i){for(n&&t.d.push(+e.slice(0,n)),i-=Dl;n<i;)t.d.push(+e.slice(n,n+=Dl));e=e.slice(n),n=Dl-e.length}else n-=i;for(;n--;)e+="0";if(t.d.push(+e),Xl&&(t.e>mj||t.e<-mj))throw Error(jD+r)}else t.s=0,t.e=0,t.d=[0];return t}function hl(t,e,r){var n,i,s,o,c,u,l,d,f=t.d;for(o=1,s=f[0];s>=10;s/=10)o++;if(n=e-o,n<0)n+=Dl,i=e,l=f[d=0];else{if(d=Math.ceil((n+1)/Dl),s=f.length,d>=s)return t;for(l=s=f[d],o=1;s>=10;s/=10)o++;n%=Dl,i=n-Dl+o}if(r!==void 0&&(s=vv(10,o-i-1),c=l/s%10|0,u=e<0||f[d+1]!==void 0||l%s,u=r<4?(c||u)&&(r==0||r==(t.s<0?3:2)):c>5||c==5&&(r==4||u||r==6&&(n>0?i>0?l/vv(10,o-i):0:f[d-1])%10&1||r==(t.s<0?8:7))),e<1||!f[0])return u?(s=gu(t),f.length=1,e=e-s-1,f[0]=vv(10,(Dl-e%Dl)%Dl),t.e=c1(-e/Dl)||0):(f.length=1,f[0]=t.e=t.s=0),t;if(n==0?(f.length=d,s=1,d--):(f.length=d+1,s=vv(10,Dl-n),f[d]=i>0?(l/vv(10,o-i)%vv(10,i)|0)*s:0),u)for(;;)if(d==0){(f[0]+=s)==dd&&(f[0]=1,++t.e);break}else{if(f[d]+=s,f[d]!=dd)break;f[d--]=0,s=1}for(n=f.length;f[--n]===0;)f.pop();if(Xl&&(t.e>mj||t.e<-mj))throw Error(jD+gu(t));return t}function VJ(t,e){var r,n,i,s,o,c,u,l,d,f,A=t.constructor,p=A.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new A(t),Xl?hl(e,p):e;if(u=t.d,f=e.d,n=e.e,l=t.e,u=u.slice(),o=l-n,o){for(d=o<0,d?(r=u,o=-o,c=f.length):(r=f,n=l,c=u.length),i=Math.max(Math.ceil(p/Dl),c)+2,o>i&&(o=i,r.length=1),r.reverse(),i=o;i--;)r.push(0);r.reverse()}else{for(i=u.length,c=f.length,d=i<c,d&&(c=i),i=0;i<c;i++)if(u[i]!=f[i]){d=u[i]<f[i];break}o=0}for(d&&(r=u,u=f,f=r,e.s=-e.s),c=u.length,i=f.length-c;i>0;--i)u[c++]=0;for(i=f.length;i>o;){if(u[--i]<f[i]){for(s=i;s&&u[--s]===0;)u[s]=dd-1;--u[s],u[i]+=dd}u[i]-=f[i]}for(;u[--c]===0;)u.pop();for(;u[0]===0;u.shift())--n;return u[0]?(e.d=u,e.e=n,Xl?hl(e,p):e):new A(0)}function py(t,e,r){var n,i=gu(t),s=Pm(t.d),o=s.length;return e?(r&&(n=r-o)>0?s=s.charAt(0)+"."+s.slice(1)+a0(n):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+a0(-i-1)+s,r&&(n=r-o)>0&&(s+=a0(n))):i>=o?(s+=a0(i+1-o),r&&(n=r-i-1)>0&&(s=s+"."+a0(n))):((n=i+1)<o&&(s=s.slice(0,n)+"."+s.slice(n)),r&&(n=r-o)>0&&(i+1===o&&(s+="."),s+=a0(n))),t.s<0?"-"+s:s}function tQ(t,e){if(t.length>e)return t.length=e,!0}function zJ(t){var e,r,n;function i(s){var o=this;if(!(o instanceof i))return new i(s);if(o.constructor=i,s instanceof i){o.s=s.s,o.e=s.e,o.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(qv+s);if(s>0)o.s=1;else if(s<0)s=-s,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(s===~~s&&s<1e7){o.e=0,o.d=[s];return}return eQ(o,s.toString())}else if(typeof s!="string")throw Error(qv+s);if(s.charCodeAt(0)===45?(s=s.slice(1),o.s=-1):o.s=1,L2e.test(s))eQ(o,s);else throw Error(qv+s)}if(i.prototype=vi,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=zJ,i.config=i.set=B2e,t===void 0&&(t={}),t)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return i.config(t),i}function B2e(t){if(!t||typeof t!="object")throw Error(Zf+"Object expected");var e,r,n,i=["precision",1,l1,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((n=t[r=i[e]])!==void 0)if(c1(n)===n&&n>=i[e+1]&&n<=i[e+2])this[r]=n;else throw Error(qv+r+": "+n);if((n=t[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(qv+r+": "+n);return this}var ND=zJ(I2e);Af=new ND(1);const $o=ND;function KJ(t){var e;return t===0?e=1:e=Math.floor(new $o(t).abs().log(10).toNumber())+1,e}function GJ(t,e,r){for(var n=new $o(t),i=0,s=[];n.lt(e)&&i<1e5;)s.push(n.toNumber()),n=n.add(r),i++;return s}var WJ=t=>{var[e,r]=t,[n,i]=[e,r];return e>r&&([n,i]=[r,e]),[n,i]},YJ=(t,e,r)=>{if(t.lte(0))return new $o(0);var n=KJ(t.toNumber()),i=new $o(10).pow(n),s=t.div(i),o=n!==1?.05:.1,c=new $o(Math.ceil(s.div(o).toNumber())).add(r).mul(o),u=c.mul(i);return e?new $o(u.toNumber()):new $o(Math.ceil(u.toNumber()))},P2e=(t,e,r)=>{var n=new $o(1),i=new $o(t);if(!i.isint()&&r){var s=Math.abs(t);s<1?(n=new $o(10).pow(KJ(t)-1),i=new $o(Math.floor(i.div(n).toNumber())).mul(n)):s>1&&(i=new $o(Math.floor(t)))}else t===0?i=new $o(Math.floor((e-1)/2)):r||(i=new $o(Math.floor(t)));for(var o=Math.floor((e-1)/2),c=[],u=0;u<e;u++)c.push(i.add(new $o(u-o).mul(n)).toNumber());return c},qJ=function(e,r,n,i){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-e)/(n-1)))return{step:new $o(0),tickMin:new $o(0),tickMax:new $o(0)};var o=YJ(new $o(r).sub(e).div(n-1),i,s),c;e<=0&&r>=0?c=new $o(0):(c=new $o(e).add(r).div(2),c=c.sub(new $o(c).mod(o)));var u=Math.ceil(c.sub(e).div(o).toNumber()),l=Math.ceil(new $o(r).sub(c).div(o).toNumber()),d=u+l+1;return d>n?qJ(e,r,n,i,s+1):(d<n&&(l=r>0?l+(n-d):l,u=r>0?u:u+(n-d)),{step:o,tickMin:c.sub(new $o(u).mul(o)),tickMax:c.add(new $o(l).mul(o))})},O2e=function(e){var[r,n]=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(i,2),[c,u]=WJ([r,n]);if(c===-1/0||u===1/0){var l=u===1/0?[c,...Array(i-1).fill(1/0)]:[...Array(i-1).fill(-1/0),u];return r>n?l.reverse():l}if(c===u)return P2e(c,i,s);var{step:d,tickMin:f,tickMax:A}=qJ(c,u,o,s,0),p=GJ(f,A.add(new $o(.1).mul(d)),d);return r>n?p.reverse():p},R2e=function(e,r){var[n,i]=e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[o,c]=WJ([n,i]);if(o===-1/0||c===1/0)return[n,i];if(o===c)return[o];var u=Math.max(r,2),l=YJ(new $o(c).sub(o).div(u-1),s,0),d=[...GJ(new $o(o),new $o(c),l),c];return s===!1&&(d=d.map(f=>Math.round(f))),n>i?d.reverse():d},XJ=t=>t.rootProps.maxBarSize,D2e=t=>t.rootProps.barGap,ZJ=t=>t.rootProps.barCategoryGap,M2e=t=>t.rootProps.barSize,V2=t=>t.rootProps.stackOffset,JJ=t=>t.rootProps.reverseStackOrder,kD=t=>t.options.chartName,ID=t=>t.rootProps.syncId,eee=t=>t.rootProps.syncMethod,LD=t=>t.options.eventEmitter,Rc={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},Xg={allowDecimals:!1,allowDuplicatedCategory:!0,allowDataOverflow:!1,angle:0,angleAxisId:0,axisLine:!0,axisLineType:"polygon",cx:0,cy:0,hide:!1,includeHidden:!1,label:!1,orientation:"outer",reversed:!1,scale:"auto",tick:!0,tickLine:!0,tickSize:8,type:"auto",zIndex:Rc.axis},om={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!0,includeHidden:!1,radiusAxisId:0,reversed:!1,scale:"auto",tick:!0,tickCount:5,type:"auto"},d5=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e};function z2(t,e,r){if(r!=="auto")return r;if(t!=null)return ig(t,e)?"category":"number"}function rQ(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function pj(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?rQ(Object(r),!0).forEach(function(n){F2e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):rQ(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function F2e(t,e,r){return(e=U2e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function U2e(t){var e=$2e(t,"string");return typeof e=="symbol"?e:e+""}function $2e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var nQ={allowDataOverflow:Xg.allowDataOverflow,allowDecimals:Xg.allowDecimals,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Xg.angleAxisId,includeHidden:!1,name:void 0,reversed:Xg.reversed,scale:Xg.scale,tick:Xg.tick,tickCount:void 0,ticks:void 0,type:Xg.type,unit:void 0},iQ={allowDataOverflow:om.allowDataOverflow,allowDecimals:om.allowDecimals,allowDuplicatedCategory:om.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:om.radiusAxisId,includeHidden:om.includeHidden,name:void 0,reversed:om.reversed,scale:om.scale,tick:om.tick,tickCount:om.tickCount,ticks:void 0,type:om.type,unit:void 0},H2e=(t,e)=>{if(e!=null)return t.polarAxis.angleAxis[e]},u1=or([H2e,tD],(t,e)=>{var r;if(t!=null)return t;var n=(r=z2(e,"angleAxis",nQ.type))!==null&&r!==void 0?r:"category";return pj(pj({},nQ),{},{type:n})}),Q2e=(t,e)=>t.polarAxis.radiusAxis[e],K2=or([Q2e,tD],(t,e)=>{var r;if(t!=null)return t;var n=(r=z2(e,"radiusAxis",iQ.type))!==null&&r!==void 0?r:"category";return pj(pj({},iQ),{},{type:n})}),h5=t=>t.polarOptions,BD=or([sg,ag,Vu],tJ),tee=or([h5,BD],(t,e)=>{if(t!=null)return rh(t.innerRadius,e,0)}),ree=or([h5,BD],(t,e)=>{if(t!=null)return rh(t.outerRadius,e,e*.8)}),V2e=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:r}=t;return[e,r]},nee=or([h5],V2e),z2e=or([u1,nee],d5),iee=or([BD,tee,ree],(t,e,r)=>{if(!(t==null||e==null||r==null))return[e,r]}),K2e=or([K2,iee],d5),G2=or([Wa,h5,tee,ree,sg,ag],(t,e,r,n,i,s)=>{if(!(t!=="centric"&&t!=="radial"||e==null||r==null||n==null)){var{cx:o,cy:c,startAngle:u,endAngle:l}=e;return{cx:rh(o,i,i/2),cy:rh(c,s,s/2),innerRadius:r,outerRadius:n,startAngle:u,endAngle:l,clockWise:!1}}}),Nl=(t,e)=>e,W2=(t,e,r)=>r;function PD(t){return t?.id}function see(t,e,r){var{chartData:n=[]}=e,{allowDuplicatedCategory:i,dataKey:s}=r,o=new Map;return t.forEach(c=>{var u,l=(u=c.data)!==null&&u!==void 0?u:n;if(!(l==null||l.length===0)){var d=PD(c);l.forEach((f,A)=>{var p=s==null||i?A:String(dl(f,s,null)),g=dl(f,c.dataKey,0),y;o.has(p)?y=o.get(p):y={},Object.assign(y,{[d]:g}),o.set(p,y)})}}),Array.from(o.values())}function f5(t){return"stackId"in t&&t.stackId!=null&&t.dataKey!=null}var A5=(t,e)=>t===e?!0:t==null||e==null?!1:t[0]===e[0]&&t[1]===e[1];function m5(t,e){return Array.isArray(t)&&Array.isArray(e)&&t.length===0&&e.length===0?!0:t===e}function G2e(t,e){if(t.length===e.length){for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}return!1}var gd=t=>{var e=Wa(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},d1=t=>t.tooltip.settings.axisId;function W2e(t){if(t in mw)return mw[t]();var e="scale".concat(I2(t));if(e in mw)return mw[e]()}function sQ(t){var e=t.ticks,r=t.bandwidth,n=t.range(),i=[Math.min(...n),Math.max(...n)];return{domain:()=>t.domain(),range:(function(s){function o(){return s.apply(this,arguments)}return o.toString=function(){return s.toString()},o})(()=>i),rangeMin:()=>i[0],rangeMax:()=>i[1],isInRange(s){var o=i[0],c=i[1];return o<=c?s>=o&&s<=c:s>=c&&s<=o},bandwidth:r?()=>r.call(t):void 0,ticks:e?s=>e.call(t,s):void 0,map:(s,o)=>{var c=t(s);if(c!=null){if(t.bandwidth&&o!==null&&o!==void 0&&o.position){var u=t.bandwidth();switch(o.position){case"middle":c+=u/2;break;case"end":c+=u;break}}return c}}}}function aQ(t,e,r){if(typeof t=="function")return sQ(t.copy().domain(e).range(r));if(t!=null){var n=W2e(t);if(n!=null)return n.domain(e).range(r),sQ(n)}}var aee=(t,e)=>{if(e!=null)switch(t){case"linear":{if(!Zp(e)){for(var r,n,i=0;i<e.length;i++){var s=e[i];Ha(s)&&((r===void 0||s<r)&&(r=s),(n===void 0||s>n)&&(n=s))}return r!==void 0&&n!==void 0?[r,n]:void 0}return e}default:return e}};function oQ(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function gj(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?oQ(Object(r),!0).forEach(function(n){Y2e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):oQ(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Y2e(t,e,r){return(e=q2e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function q2e(t){var e=X2e(t,"string");return typeof e=="symbol"?e:e+""}function X2e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var yP=[0,"auto"],ld={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},oee=(t,e)=>t.cartesianAxis.xAxis[e],cg=(t,e)=>{var r=oee(t,e);return r??ld},cd={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:yP,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:P2},lee=(t,e)=>t.cartesianAxis.yAxis[e],ug=(t,e)=>{var r=lee(t,e);return r??cd},Z2e={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},OD=(t,e)=>{var r=t.cartesianAxis.zAxis[e];return r??Z2e},$c=(t,e,r)=>{switch(e){case"xAxis":return cg(t,r);case"yAxis":return ug(t,r);case"zAxis":return OD(t,r);case"angleAxis":return u1(t,r);case"radiusAxis":return K2(t,r);default:throw new Error("Unexpected axis type: ".concat(e))}},J2e=(t,e,r)=>{switch(e){case"xAxis":return cg(t,r);case"yAxis":return ug(t,r);default:throw new Error("Unexpected axis type: ".concat(e))}},_y=(t,e,r)=>{switch(e){case"xAxis":return cg(t,r);case"yAxis":return ug(t,r);case"angleAxis":return u1(t,r);case"radiusAxis":return K2(t,r);default:throw new Error("Unexpected axis type: ".concat(e))}},cee=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function RD(t,e){return r=>{switch(t){case"xAxis":return"xAxisId"in r&&r.xAxisId===e;case"yAxis":return"yAxisId"in r&&r.yAxisId===e;case"zAxis":return"zAxisId"in r&&r.zAxisId===e;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===e;default:return!1}}}var DD=t=>t.graphicalItems.cartesianItems,e_e=or([Nl,W2],RD),MD=(t,e,r)=>t.filter(r).filter(n=>e?.includeHidden===!0?!0:!n.hide),Y2=or([DD,$c,e_e],MD,{memoizeOptions:{resultEqualityCheck:m5}}),uee=or([Y2],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(f5)),dee=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),t_e=or([Y2],dee),FD=t=>t.map(e=>e.data).filter(Boolean).flat(1),r_e=or([Y2],FD,{memoizeOptions:{resultEqualityCheck:m5}}),UD=(t,e)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:i}=e;return t.length>0?t:r.slice(n,i+1)},$D=or([r_e,FJ],UD),HD=(t,e,r)=>e?.dataKey!=null?t.map(n=>({value:dl(n,e.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>t.map(i=>({value:dl(i,n)}))):t.map(n=>({value:n})),p5=or([$D,$c,Y2],HD);function hee(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function JS(t){if(Km(t)||t instanceof Date){var e=Number(t);if(Ha(e))return e}}function lQ(t){if(Array.isArray(t)){var e=[JS(t[0]),JS(t[1])];return Zp(e)?e:void 0}var r=JS(t);if(r!=null)return[r,r]}function Jp(t){return t.map(JS).filter(Dh)}function n_e(t,e,r){return!r||typeof e!="number"||zm(e)?[]:r.length?Jp(r.flatMap(n=>{var i=dl(t,n.dataKey),s,o;if(Array.isArray(i)?[s,o]=i:s=o=i,!(!Ha(s)||!Ha(o)))return[e-s,e+o]})):[]}var Ku=t=>{var e=gd(t),r=d1(t);return _y(t,e,r)},q2=or([Ku],t=>t?.dataKey),i_e=or([uee,FJ,Ku],see),fee=(t,e,r,n)=>{var i={},s=e.reduce((o,c)=>{if(c.stackId==null)return o;var u=o[c.stackId];return u==null&&(u=[]),u.push(c),o[c.stackId]=u,o},i);return Object.fromEntries(Object.entries(s).map(o=>{var[c,u]=o,l=n?[...u].reverse():u,d=l.map(PD);return[c,{stackedData:bxe(t,d,r),graphicalItems:l}]}))},xP=or([i_e,uee,V2,JJ],fee),Aee=(t,e,r,n)=>{var{dataStartIndex:i,dataEndIndex:s}=e;if(n==null&&r!=="zAxis"){var o=Txe(t,i,s);if(!(o!=null&&o[0]===0&&o[1]===0))return o}},s_e=or([$c],t=>t.allowDataOverflow),QD=t=>{var e;if(t==null||!("domain"in t))return yP;if(t.domain!=null)return t.domain;if("ticks"in t&&t.ticks!=null){if(t.type==="number"){var r=Jp(t.ticks);return[Math.min(...r),Math.max(...r)]}if(t.type==="category")return t.ticks.map(String)}return(e=t?.domain)!==null&&e!==void 0?e:yP},VD=or([$c],QD),zD=or([VD,s_e],UJ),a_e=or([xP,lg,Nl,zD],Aee,{memoizeOptions:{resultEqualityCheck:A5}}),g5=t=>t.errorBars,o_e=(t,e,r)=>t.flatMap(n=>e[n.id]).filter(Boolean).filter(n=>hee(r,n)),vj=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var i=r.filter(Boolean);if(i.length!==0){var s=i.flat(),o=Math.min(...s),c=Math.max(...s);return[o,c]}},KD=(t,e,r,n,i)=>{var s,o;if(r.length>0&&t.forEach(c=>{r.forEach(u=>{var l,d,f=(l=n[u.id])===null||l===void 0?void 0:l.filter(w=>hee(i,w)),A=dl(c,(d=e.dataKey)!==null&&d!==void 0?d:u.dataKey),p=n_e(c,A,f);if(p.length>=2){var g=Math.min(...p),y=Math.max(...p);(s==null||g<s)&&(s=g),(o==null||y>o)&&(o=y)}var x=lQ(A);x!=null&&(s=s==null?x[0]:Math.min(s,x[0]),o=o==null?x[1]:Math.max(o,x[1]))})}),e?.dataKey!=null&&t.forEach(c=>{var u=lQ(dl(c,e.dataKey));u!=null&&(s=s==null?u[0]:Math.min(s,u[0]),o=o==null?u[1]:Math.max(o,u[1]))}),Ha(s)&&Ha(o))return[s,o]},l_e=or([$D,$c,t_e,g5,Nl],KD,{memoizeOptions:{resultEqualityCheck:A5}});function c_e(t){var{value:e}=t;if(Km(e)||e instanceof Date)return e}var u_e=(t,e,r)=>{var n=t.map(c_e).filter(i=>i!=null);return r&&(e.dataKey==null||e.allowDuplicatedCategory&&OX(n))?sJ(0,t.length):e.allowDuplicatedCategory?n:Array.from(new Set(n))},mee=t=>t.referenceElements.dots,h1=(t,e,r)=>t.filter(n=>n.ifOverflow==="extendDomain").filter(n=>e==="xAxis"?n.xAxisId===r:n.yAxisId===r),d_e=or([mee,Nl,W2],h1),pee=t=>t.referenceElements.areas,h_e=or([pee,Nl,W2],h1),gee=t=>t.referenceElements.lines,f_e=or([gee,Nl,W2],h1),vee=(t,e)=>{if(t!=null){var r=Jp(t.map(n=>e==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},A_e=or(d_e,Nl,vee),yee=(t,e)=>{if(t!=null){var r=Jp(t.flatMap(n=>[e==="xAxis"?n.x1:n.y1,e==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},m_e=or([h_e,Nl],yee);function p_e(t){var e;if(t.x!=null)return Jp([t.x]);var r=(e=t.segment)===null||e===void 0?void 0:e.map(n=>n.x);return r==null||r.length===0?[]:Jp(r)}function g_e(t){var e;if(t.y!=null)return Jp([t.y]);var r=(e=t.segment)===null||e===void 0?void 0:e.map(n=>n.y);return r==null||r.length===0?[]:Jp(r)}var xee=(t,e)=>{if(t!=null){var r=t.flatMap(n=>e==="xAxis"?p_e(n):g_e(n));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},v_e=or([f_e,Nl],xee),y_e=or(A_e,v_e,m_e,(t,e,r)=>vj(t,r,e)),GD=(t,e,r,n,i,s,o,c)=>{if(r!=null)return r;var u=o==="vertical"&&c==="xAxis"||o==="horizontal"&&c==="yAxis",l=u?vj(n,s,i):vj(s,i);return k2e(e,l,t.allowDataOverflow)},x_e=or([$c,VD,zD,a_e,l_e,y_e,Wa,Nl],GD,{memoizeOptions:{resultEqualityCheck:A5}}),b_e=[0,1],WD=(t,e,r,n,i,s,o)=>{if(!((t==null||r==null||r.length===0)&&o===void 0)){var{dataKey:c,type:u}=t,l=ig(e,s);if(l&&c==null){var d;return sJ(0,(d=r?.length)!==null&&d!==void 0?d:0)}return u==="category"?u_e(n,t,l):i==="expand"?b_e:o}},YD=or([$c,Wa,$D,p5,V2,Nl,x_e],WD);function w_e(t){return t in mw}var bee=(t,e,r)=>{if(t!=null){var{scale:n,type:i}=t;if(n==="auto")return i==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!e)?"point":i==="category"?"band":"linear";if(typeof n=="string"){var s="scale".concat(I2(n));return w_e(s)?s:"point"}}},Xm=or([$c,cee,kD],bee);function v5(t,e,r,n){if(!(r==null||n==null))return typeof t.scale=="function"?aQ(t.scale,r,n):aQ(e,r,n)}var qD=(t,e,r)=>{var n=QD(e);if(!(r!=="auto"&&r!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&Zp(t))return O2e(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&Zp(t))return R2e(t,e.tickCount,e.allowDecimals)}},XD=or([YD,_y,Xm],qD),ZD=(t,e,r,n)=>{if(n!=="angleAxis"&&t?.type==="number"&&Zp(e)&&Array.isArray(r)&&r.length>0){var i,s,o=e[0],c=(i=r[0])!==null&&i!==void 0?i:0,u=e[1],l=(s=r[r.length-1])!==null&&s!==void 0?s:0;return[Math.min(o,c),Math.max(u,l)]}return e},E_e=or([$c,YD,XD,Nl],ZD),__e=or(p5,$c,(t,e)=>{if(!(!e||e.type!=="number")){var r=1/0,n=Array.from(Jp(t.map(f=>f.value))).sort((f,A)=>f-A),i=n[0],s=n[n.length-1];if(i==null||s==null)return 1/0;var o=s-i;if(o===0)return 1/0;for(var c=0;c<n.length-1;c++){var u=n[c],l=n[c+1];if(!(u==null||l==null)){var d=l-u;r=Math.min(r,d)}}return r/o}}),wee=or(__e,Wa,ZJ,Vu,(t,e,r,n,i)=>i,(t,e,r,n,i)=>{if(!Ha(t))return 0;var s=e==="vertical"?n.height:n.width;if(i==="gap")return t*s/2;if(i==="no-gap"){var o=rh(r,t*s),c=t*s/2;return c-o-(c-o)/s*o}return 0}),S_e=(t,e,r)=>{var n=cg(t,e);return n==null||typeof n.padding!="string"?0:wee(t,"xAxis",e,r,n.padding)},T_e=(t,e,r)=>{var n=ug(t,e);return n==null||typeof n.padding!="string"?0:wee(t,"yAxis",e,r,n.padding)},C_e=or(cg,S_e,(t,e)=>{var r,n;if(t==null)return{left:0,right:0};var{padding:i}=t;return typeof i=="string"?{left:e,right:e}:{left:((r=i.left)!==null&&r!==void 0?r:0)+e,right:((n=i.right)!==null&&n!==void 0?n:0)+e}}),j_e=or(ug,T_e,(t,e)=>{var r,n;if(t==null)return{top:0,bottom:0};var{padding:i}=t;return typeof i=="string"?{top:e,bottom:e}:{top:((r=i.top)!==null&&r!==void 0?r:0)+e,bottom:((n=i.bottom)!==null&&n!==void 0?n:0)+e}}),N_e=or([Vu,C_e,JN,ZN,(t,e,r)=>r],(t,e,r,n,i)=>{var{padding:s}=n;return i?[s.left,r.width-s.right]:[t.left+e.left,t.left+t.width-e.right]}),k_e=or([Vu,Wa,j_e,JN,ZN,(t,e,r)=>r],(t,e,r,n,i,s)=>{var{padding:o}=i;return s?[n.height-o.bottom,o.top]:e==="horizontal"?[t.top+t.height-r.bottom,t.top+r.top]:[t.top+r.top,t.top+t.height-r.bottom]}),X2=(t,e,r,n)=>{var i;switch(e){case"xAxis":return N_e(t,r,n);case"yAxis":return k_e(t,r,n);case"zAxis":return(i=OD(t,r))===null||i===void 0?void 0:i.range;case"angleAxis":return nee(t);case"radiusAxis":return iee(t,r);default:return}},Eee=or([$c,X2],d5),I_e=or([Xm,E_e],aee),y5=or([$c,Xm,I_e,Eee],v5);or([Y2,g5,Nl],o_e);function _ee(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var x5=(t,e)=>e,b5=(t,e,r)=>r,L_e=or(qN,x5,b5,(t,e,r)=>t.filter(n=>n.orientation===e).filter(n=>n.mirror===r).sort(_ee)),B_e=or(XN,x5,b5,(t,e,r)=>t.filter(n=>n.orientation===e).filter(n=>n.mirror===r).sort(_ee)),See=(t,e)=>({width:t.width,height:e.height}),P_e=(t,e)=>{var r=typeof e.width=="number"?e.width:P2;return{width:r,height:t.height}},Tee=or(Vu,cg,See),O_e=(t,e,r)=>{switch(e){case"top":return t.top;case"bottom":return r-t.bottom;default:return 0}},R_e=(t,e,r)=>{switch(e){case"left":return t.left;case"right":return r-t.right;default:return 0}},D_e=or(ag,Vu,L_e,x5,b5,(t,e,r,n,i)=>{var s={},o;return r.forEach(c=>{var u=See(e,c);o==null&&(o=O_e(e,n,t));var l=n==="top"&&!i||n==="bottom"&&i;s[c.id]=o-Number(l)*u.height,o+=(l?-1:1)*u.height}),s}),M_e=or(sg,Vu,B_e,x5,b5,(t,e,r,n,i)=>{var s={},o;return r.forEach(c=>{var u=P_e(e,c);o==null&&(o=R_e(e,n,t));var l=n==="left"&&!i||n==="right"&&i;s[c.id]=o-Number(l)*u.width,o+=(l?-1:1)*u.width}),s}),F_e=(t,e)=>{var r=cg(t,e);if(r!=null)return D_e(t,r.orientation,r.mirror)},U_e=or([Vu,cg,F_e,(t,e)=>e],(t,e,r,n)=>{if(e!=null){var i=r?.[n];return i==null?{x:t.left,y:0}:{x:t.left,y:i}}}),$_e=(t,e)=>{var r=ug(t,e);if(r!=null)return M_e(t,r.orientation,r.mirror)},H_e=or([Vu,ug,$_e,(t,e)=>e],(t,e,r,n)=>{if(e!=null){var i=r?.[n];return i==null?{x:0,y:t.top}:{x:i,y:t.top}}}),Cee=or(Vu,ug,(t,e)=>{var r=typeof e.width=="number"?e.width:P2;return{width:r,height:t.height}}),cQ=(t,e,r)=>{switch(e){case"xAxis":return Tee(t,r).width;case"yAxis":return Cee(t,r).height;default:return}},jee=(t,e,r,n)=>{if(r!=null){var{allowDuplicatedCategory:i,type:s,dataKey:o}=r,c=ig(t,n),u=e.map(l=>l.value);if(o&&c&&s==="category"&&i&&OX(u))return u}},Z2=or([Wa,p5,$c,Nl],jee),JD=(t,e,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:i,scale:s}=r,o=ig(t,n);if(o&&(i==="number"||s!=="auto"))return e.map(c=>c.value)}},eM=or([Wa,p5,_y,Nl],JD),uQ=or([Wa,J2e,Xm,y5,Z2,eM,X2,XD,Nl],(t,e,r,n,i,s,o,c,u)=>{if(e!=null){var l=ig(t,u);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:u,categoricalDomain:s,duplicateDomain:i,isCategorical:l,niceTicks:c,range:o,realScaleType:r,scale:n}}}),Nee=(t,e,r,n,i,s,o,c,u)=>{if(!(e==null||n==null)){var l=ig(t,u),{type:d,ticks:f,tickCount:A}=e,p=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,g=d==="category"&&n.bandwidth?n.bandwidth()/p:0;g=u==="angleAxis"&&s!=null&&s.length>=2?Ad(s[0]-s[1])*2*g:g;var y=f||i;return y?y.map((x,w)=>{var E=o?o.indexOf(x):x,T=n.map(E);return Ha(T)?{index:w,coordinate:T+g,value:x,offset:g}:null}).filter(Dh):l&&c?c.map((x,w)=>{var E=n.map(x);return Ha(E)?{coordinate:E+g,value:x,index:w,offset:g}:null}).filter(Dh):n.ticks?n.ticks(A).map((x,w)=>{var E=n.map(x);return Ha(E)?{coordinate:E+g,value:x,index:w,offset:g}:null}).filter(Dh):n.domain().map((x,w)=>{var E=n.map(x);return Ha(E)?{coordinate:E+g,value:o?o[x]:x,index:w,offset:g}:null}).filter(Dh)}},kee=or([Wa,_y,Xm,y5,XD,X2,Z2,eM,Nl],Nee),Iee=(t,e,r,n,i,s,o)=>{if(!(e==null||r==null||n==null||n[0]===n[1])){var c=ig(t,o),{tickCount:u}=e,l=0;return l=o==="angleAxis"&&n?.length>=2?Ad(n[0]-n[1])*2*l:l,c&&s?s.map((d,f)=>{var A=r.map(d);return Ha(A)?{coordinate:A+l,value:d,index:f,offset:l}:null}).filter(Dh):r.ticks?r.ticks(u).map((d,f)=>{var A=r.map(d);return Ha(A)?{coordinate:A+l,value:d,index:f,offset:l}:null}).filter(Dh):r.domain().map((d,f)=>{var A=r.map(d);return Ha(A)?{coordinate:A+l,value:i?i[d]:d,index:f,offset:l}:null}).filter(Dh)}},Mb=or([Wa,_y,y5,X2,Z2,eM,Nl],Iee),Fb=or($c,y5,(t,e)=>{if(!(t==null||e==null))return gj(gj({},t),{},{scale:e})}),Q_e=or([$c,Xm,YD,Eee],v5);or((t,e,r)=>OD(t,r),Q_e,(t,e)=>{if(!(t==null||e==null))return gj(gj({},t),{},{scale:e})});var V_e=or([Wa,qN,XN],(t,e,r)=>{switch(t){case"horizontal":return e.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),Lee=t=>t.options.defaultTooltipEventType,Bee=t=>t.options.validateTooltipEventTypes;function Pee(t,e,r){if(t==null)return e;var n=t?"axis":"item";return r==null?e:r.includes(n)?n:e}function tM(t,e){var r=Lee(t),n=Bee(t);return Pee(e,r,n)}function z_e(t){return si(e=>tM(e,t))}var Oee=(t,e)=>{var r,n=Number(e);if(!(zm(n)||e==null))return n>=0?t==null||(r=t[n])===null||r===void 0?void 0:r.value:void 0},K_e=t=>t.tooltip.settings,f0={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},G_e={itemInteraction:{click:f0,hover:f0},axisInteraction:{click:f0,hover:f0},keyboardInteraction:f0,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},Ree=Qh({name:"tooltip",initialState:G_e,reducers:{addTooltipEntrySettings:{reducer(t,e){t.tooltipItemPayloads.push(e.payload)},prepare:ql()},replaceTooltipEntrySettings:{reducer(t,e){var{prev:r,next:n}=e.payload,i=OA(t).tooltipItemPayloads.indexOf(r);i>-1&&(t.tooltipItemPayloads[i]=n)},prepare:ql()},removeTooltipEntrySettings:{reducer(t,e){var r=OA(t).tooltipItemPayloads.indexOf(e.payload);r>-1&&t.tooltipItemPayloads.splice(r,1)},prepare:ql()},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate}}}),{addTooltipEntrySettings:W_e,replaceTooltipEntrySettings:Y_e,removeTooltipEntrySettings:q_e,setTooltipSettingsState:X_e,setActiveMouseOverItemIndex:Dee,mouseLeaveItem:Z_e,mouseLeaveChart:Mee,setActiveClickItemIndex:J_e,setMouseOverAxisIndex:Fee,setMouseClickAxisIndex:eSe,setSyncInteraction:bP,setKeyboardInteraction:wP}=Ree.actions,tSe=Ree.reducer;function dQ(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Z_(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?dQ(Object(r),!0).forEach(function(n){rSe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):dQ(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function rSe(t,e,r){return(e=nSe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function nSe(t){var e=iSe(t,"string");return typeof e=="symbol"?e:e+""}function iSe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function sSe(t,e,r){return e==="axis"?r==="click"?t.axisInteraction.click:t.axisInteraction.hover:r==="click"?t.itemInteraction.click:t.itemInteraction.hover}function aSe(t){return t.index!=null}var Uee=(t,e,r,n)=>{if(e==null)return f0;var i=sSe(t,e,r);if(i==null)return f0;if(i.active)return i;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var s=t.settings.active===!0;if(aSe(i)){if(s)return Z_(Z_({},i),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n,graphicalItemId:void 0};return Z_(Z_({},f0),{},{coordinate:i.coordinate})};function oSe(t){if(typeof t=="number")return Number.isFinite(t)?t:void 0;if(t instanceof Date){var e=t.valueOf();return Number.isFinite(e)?e:void 0}var r=Number(t);return Number.isFinite(r)?r:void 0}function lSe(t,e){var r=oSe(t),n=e[0],i=e[1];if(r===void 0)return!1;var s=Math.min(n,i),o=Math.max(n,i);return r>=s&&r<=o}function cSe(t,e,r){if(r==null||e==null)return!0;var n=dl(t,e);return n==null||!Zp(r)?!0:lSe(n,r)}var rM=(t,e,r,n)=>{var i=t?.index;if(i==null)return null;var s=Number(i);if(!Ha(s))return i;var o=0,c=1/0;e.length>0&&(c=e.length-1);var u=Math.max(o,Math.min(s,c)),l=e[u];return l==null||cSe(l,r,n)?String(u):null},$ee=(t,e,r,n,i,s,o)=>{if(s!=null){var c=o[0],u=c?.getPosition(s);if(u!=null)return u;var l=i?.[Number(s)];if(l)return r==="horizontal"?{x:l.coordinate,y:(n.top+e)/2}:{x:(n.left+t)/2,y:l.coordinate}}},Hee=(t,e,r,n)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var i;if(r==="hover"?i=t.itemInteraction.hover.graphicalItemId:i=t.itemInteraction.click.graphicalItemId,i==null&&n!=null){var s=t.tooltipItemPayloads[0];return s!=null?[s]:[]}return t.tooltipItemPayloads.filter(o=>{var c;return((c=o.settings)===null||c===void 0?void 0:c.graphicalItemId)===i})},Qee=t=>t.options.tooltipPayloadSearcher,f1=t=>t.tooltip;function hQ(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function fQ(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?hQ(Object(r),!0).forEach(function(n){uSe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):hQ(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function uSe(t,e,r){return(e=dSe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function dSe(t){var e=hSe(t,"string");return typeof e=="symbol"?e:e+""}function hSe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function fSe(t,e){return t??e}var Vee=(t,e,r,n,i,s,o)=>{if(!(e==null||s==null)){var{chartData:c,computedData:u,dataStartIndex:l,dataEndIndex:d}=r,f=[];return t.reduce((A,p)=>{var g,{dataDefinedOnItem:y,settings:x}=p,w=fSe(y,c),E=Array.isArray(w)?CZ(w,l,d):w,T=(g=x?.dataKey)!==null&&g!==void 0?g:n,C=x?.nameKey,N;if(n&&Array.isArray(E)&&!Array.isArray(E[0])&&o==="axis"?N=W0e(E,n,i):N=s(E,e,u,C),Array.isArray(N))N.forEach(U=>{var K=fQ(fQ({},x),{},{name:U.name,unit:U.unit,color:void 0,fill:void 0});A.push(d9({tooltipEntrySettings:K,dataKey:U.dataKey,payload:U.payload,value:dl(U.payload,U.dataKey),name:U.name}))});else{var I;A.push(d9({tooltipEntrySettings:x,dataKey:T,payload:N,value:dl(N,T),name:(I=dl(N,C))!==null&&I!==void 0?I:x?.name}))}return A},f)}},nM=or([Ku,cee,kD],bee),ASe=or([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),mSe=or([gd,d1],RD),A1=or([ASe,Ku,mSe],MD,{memoizeOptions:{resultEqualityCheck:m5}}),pSe=or([A1],t=>t.filter(f5)),gSe=or([A1],FD,{memoizeOptions:{resultEqualityCheck:m5}}),m1=or([gSe,lg],UD),vSe=or([pSe,lg,Ku],see),iM=or([m1,Ku,A1],HD),zee=or([Ku],QD),ySe=or([Ku],t=>t.allowDataOverflow),Kee=or([zee,ySe],UJ),xSe=or([A1],t=>t.filter(f5)),bSe=or([vSe,xSe,V2,JJ],fee),wSe=or([bSe,lg,gd,Kee],Aee),ESe=or([A1],dee),_Se=or([m1,Ku,ESe,g5,gd],KD,{memoizeOptions:{resultEqualityCheck:A5}}),SSe=or([mee,gd,d1],h1),TSe=or([SSe,gd],vee),CSe=or([pee,gd,d1],h1),jSe=or([CSe,gd],yee),NSe=or([gee,gd,d1],h1),kSe=or([NSe,gd],xee),ISe=or([TSe,kSe,jSe],vj),LSe=or([Ku,zee,Kee,wSe,_Se,ISe,Wa,gd],GD),J2=or([Ku,Wa,m1,iM,V2,gd,LSe],WD),BSe=or([J2,Ku,nM],qD),PSe=or([Ku,J2,BSe,gd],ZD),Gee=t=>{var e=gd(t),r=d1(t),n=!1;return X2(t,e,r,n)},Wee=or([Ku,Gee],d5),Yee=or([Ku,nM,PSe,Wee],v5),OSe=or([Wa,iM,Ku,gd],jee),RSe=or([Wa,iM,Ku,gd],JD),DSe=(t,e,r,n,i,s,o,c)=>{if(e){var{type:u}=e,l=ig(t,c);if(n){var d=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,f=u==="category"&&n.bandwidth?n.bandwidth()/d:0;return f=c==="angleAxis"&&i!=null&&i?.length>=2?Ad(i[0]-i[1])*2*f:f,l&&o?o.map((A,p)=>{var g=n.map(A);return Ha(g)?{coordinate:g+f,value:A,index:p,offset:f}:null}).filter(Dh):n.domain().map((A,p)=>{var g=n.map(A);return Ha(g)?{coordinate:g+f,value:s?s[A]:A,index:p,offset:f}:null}).filter(Dh)}}},dg=or([Wa,Ku,nM,Yee,Gee,OSe,RSe,gd],DSe),sM=or([Lee,Bee,K_e],(t,e,r)=>Pee(r.shared,t,e)),qee=t=>t.tooltip.settings.trigger,aM=t=>t.tooltip.settings.defaultIndex,e_=or([f1,sM,qee,aM],Uee),O0=or([e_,m1,q2,J2],rM),Xee=or([dg,O0],Oee),oM=or([e_],t=>{if(t)return t.dataKey}),MSe=or([e_],t=>{if(t)return t.graphicalItemId}),Zee=or([f1,sM,qee,aM],Hee),FSe=or([sg,ag,Wa,Vu,dg,aM,Zee],$ee),USe=or([e_,FSe],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),$Se=or([e_],t=>{var e;return(e=t?.active)!==null&&e!==void 0?e:!1}),HSe=or([Zee,O0,lg,q2,Xee,Qee,sM],Vee),QSe=or([HSe],t=>{if(t!=null){var e=t.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(e))}});function AQ(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function mQ(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?AQ(Object(r),!0).forEach(function(n){VSe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):AQ(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function VSe(t,e,r){return(e=zSe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function zSe(t){var e=KSe(t,"string");return typeof e=="symbol"?e:e+""}function KSe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var GSe=()=>si(Ku),WSe=()=>{var t=GSe(),e=si(dg),r=si(Yee);return Lb(!t||!r?void 0:mQ(mQ({},t),{},{scale:r}),e)};function pQ(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Yy(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?pQ(Object(r),!0).forEach(function(n){YSe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pQ(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function YSe(t,e,r){return(e=qSe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function qSe(t){var e=XSe(t,"string");return typeof e=="symbol"?e:e+""}function XSe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ZSe=(t,e,r,n)=>{var i=e.find(s=>s&&s.index===r);if(i){if(t==="horizontal")return{x:i.coordinate,y:n.chartY};if(t==="vertical")return{x:n.chartX,y:i.coordinate}}return{x:0,y:0}},JSe=(t,e,r,n)=>{var i=e.find(l=>l&&l.index===r);if(i){if(t==="centric"){var s=i.coordinate,{radius:o}=n;return Yy(Yy(Yy({},n),rl(n.cx,n.cy,o,s)),{},{angle:s,radius:o})}var c=i.coordinate,{angle:u}=n;return Yy(Yy(Yy({},n),rl(n.cx,n.cy,c,u)),{},{angle:u,radius:c})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function eTe(t,e){var{chartX:r,chartY:n}=t;return r>=e.left&&r<=e.left+e.width&&n>=e.top&&n<=e.top+e.height}var Jee=(t,e,r,n,i)=>{var s,o=(s=e?.length)!==null&&s!==void 0?s:0;if(o<=1||t==null)return 0;if(n==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var c=0;c<o;c++){var u,l,d,f,A,p=c>0?(u=r[c-1])===null||u===void 0?void 0:u.coordinate:(l=r[o-1])===null||l===void 0?void 0:l.coordinate,g=(d=r[c])===null||d===void 0?void 0:d.coordinate,y=c>=o-1?(f=r[0])===null||f===void 0?void 0:f.coordinate:(A=r[c+1])===null||A===void 0?void 0:A.coordinate,x=void 0;if(!(p==null||g==null||y==null))if(Ad(g-p)!==Ad(y-g)){var w=[];if(Ad(y-g)===Ad(i[1]-i[0])){x=y;var E=g+i[1]-i[0];w[0]=Math.min(E,(E+p)/2),w[1]=Math.max(E,(E+p)/2)}else{x=p;var T=y+i[1]-i[0];w[0]=Math.min(g,(T+g)/2),w[1]=Math.max(g,(T+g)/2)}var C=[Math.min(g,(x+g)/2),Math.max(g,(x+g)/2)];if(t>C[0]&&t<=C[1]||t>=w[0]&&t<=w[1]){var N;return(N=r[c])===null||N===void 0?void 0:N.index}}else{var I=Math.min(p,y),U=Math.max(p,y);if(t>(I+g)/2&&t<=(U+g)/2){var K;return(K=r[c])===null||K===void 0?void 0:K.index}}}else if(e)for(var Y=0;Y<o;Y++){var re=e[Y];if(re!=null){var se=e[Y+1],Ae=e[Y-1];if(Y===0&&se!=null&&t<=(re.coordinate+se.coordinate)/2||Y===o-1&&Ae!=null&&t>(re.coordinate+Ae.coordinate)/2||Y>0&&Y<o-1&&Ae!=null&&se!=null&&t>(re.coordinate+Ae.coordinate)/2&&t<=(re.coordinate+se.coordinate)/2)return re.index}}return-1},tTe=()=>si(kD),lM=(t,e)=>e,ete=(t,e,r)=>r,cM=(t,e,r,n)=>n,rTe=or(dg,t=>UN(t,e=>e.coordinate)),uM=or([f1,lM,ete,cM],Uee),dM=or([uM,m1,q2,J2],rM),nTe=(t,e,r)=>{if(e!=null){var n=f1(t);return e==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},tte=or([f1,lM,ete,cM],Hee),yj=or([sg,ag,Wa,Vu,dg,cM,tte],$ee),iTe=or([uM,yj],(t,e)=>{var r;return(r=t.coordinate)!==null&&r!==void 0?r:e}),rte=or([dg,dM],Oee),sTe=or([tte,dM,lg,q2,rte,Qee,lM],Vee),aTe=or([uM,dM],(t,e)=>({isActive:t.active&&e!=null,activeIndex:e})),oTe=(t,e,r,n,i,s,o)=>{if(!(!t||!r||!n||!i)&&eTe(t,o)){var c=Cxe(t,e),u=Jee(c,s,i,r,n),l=ZSe(e,i,u,t);return{activeIndex:String(u),activeCoordinate:l}}},lTe=(t,e,r,n,i,s,o)=>{if(!(!t||!n||!i||!s||!r)){var c=z1e(t,r);if(c){var u=jxe(c,e),l=Jee(u,o,s,n,i),d=JSe(e,s,l,c);return{activeIndex:String(l),activeCoordinate:d}}}},cTe=(t,e,r,n,i,s,o,c)=>{if(!(!t||!e||!n||!i||!s))return e==="horizontal"||e==="vertical"?oTe(t,e,n,i,s,o,c):lTe(t,e,r,n,i,s,o)},uTe=or(t=>t.zIndex.zIndexMap,(t,e)=>e,(t,e,r)=>r,(t,e,r)=>{if(e!=null){var n=t[e];if(n!=null)return r?n.panoramaElement:n.element}}),dTe=or(t=>t.zIndex.zIndexMap,t=>{var e=Object.keys(t).map(n=>parseInt(n,10)).concat(Object.values(Rc)),r=Array.from(new Set(e));return r.sort((n,i)=>n-i)},{memoizeOptions:{resultEqualityCheck:G2e}});function gQ(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function vQ(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?gQ(Object(r),!0).forEach(function(n){hTe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):gQ(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function hTe(t,e,r){return(e=fTe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function fTe(t){var e=ATe(t,"string");return typeof e=="symbol"?e:e+""}function ATe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var mTe={},pTe={zIndexMap:Object.values(Rc).reduce((t,e)=>vQ(vQ({},t),{},{[e]:{element:void 0,panoramaElement:void 0,consumers:0}}),mTe)},gTe=new Set(Object.values(Rc));function vTe(t){return gTe.has(t)}var nte=Qh({name:"zIndex",initialState:pTe,reducers:{registerZIndexPortal:{reducer:(t,e)=>{var{zIndex:r}=e.payload;t.zIndexMap[r]?t.zIndexMap[r].consumers+=1:t.zIndexMap[r]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:ql()},unregisterZIndexPortal:{reducer:(t,e)=>{var{zIndex:r}=e.payload;t.zIndexMap[r]&&(t.zIndexMap[r].consumers-=1,t.zIndexMap[r].consumers<=0&&!vTe(r)&&delete t.zIndexMap[r])},prepare:ql()},registerZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:r,element:n,isPanorama:i}=e.payload;t.zIndexMap[r]?i?t.zIndexMap[r].panoramaElement=n:t.zIndexMap[r].element=n:t.zIndexMap[r]={consumers:0,element:i?void 0:n,panoramaElement:i?n:void 0}},prepare:ql()},unregisterZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:r}=e.payload;t.zIndexMap[r]&&(e.payload.isPanorama?t.zIndexMap[r].panoramaElement=void 0:t.zIndexMap[r].element=void 0)},prepare:ql()}}}),{registerZIndexPortal:yTe,unregisterZIndexPortal:xTe,registerZIndexPortalElement:bTe,unregisterZIndexPortalElement:wTe}=nte.actions,ETe=nte.reducer;function ih(t){var{zIndex:e,children:r}=t,n=abe(),i=n&&e!==void 0&&e!==0,s=nh(),o=Al();j.useLayoutEffect(()=>i?(o(yTe({zIndex:e})),()=>{o(xTe({zIndex:e}))}):H0,[o,e,i]);var c=si(u=>uTe(u,e,s));return i?c?v0.createPortal(r,c):null:r}function EP(){return EP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},EP.apply(null,arguments)}function yQ(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function J_(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?yQ(Object(r),!0).forEach(function(n){_Te(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):yQ(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function _Te(t,e,r){return(e=STe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function STe(t){var e=TTe(t,"string");return typeof e=="symbol"?e:e+""}function TTe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function CTe(t){var{cursor:e,cursorComp:r,cursorProps:n}=t;return j.isValidElement(e)?j.cloneElement(e,n):j.createElement(r,n)}function jTe(t){var e,{coordinate:r,payload:n,index:i,offset:s,tooltipAxisBandSize:o,layout:c,cursor:u,tooltipEventType:l,chartName:d}=t,f=r,A=n,p=i;if(!u||!f||d!=="ScatterChart"&&l!=="axis")return null;var g,y,x;if(d==="ScatterChart")g=f,y=s1e,x=Rc.cursorLine;else if(d==="BarChart")g=a1e(c,f,s,o),y=eJ,x=Rc.cursorRectangle;else if(c==="radial"&&DX(f)){var{cx:w,cy:E,radius:T,startAngle:C,endAngle:N}=rJ(f);g={cx:w,cy:E,startAngle:C,endAngle:N,innerRadius:T,outerRadius:T},y=iJ,x=Rc.cursorLine}else g={points:Y1e(c,f,s)},y=iD,x=Rc.cursorLine;var I=typeof u=="object"&&"className"in u?u.className:void 0,U=J_(J_(J_(J_({stroke:"#ccc",pointerEvents:"none"},s),g),cy(u)),{},{payload:A,payloadIndex:p,className:Sa("recharts-tooltip-cursor",I)});return j.createElement(ih,{zIndex:(e=t.zIndex)!==null&&e!==void 0?e:x},j.createElement(CTe,{cursor:u,cursorComp:y,cursorProps:U}))}function NTe(t){var e=WSe(),r=RZ(),n=a1(),i=tTe();return e==null||r==null||n==null||i==null?null:j.createElement(jTe,EP({},t,{offset:r,layout:n,tooltipAxisBandSize:e,chartName:i}))}var ite=j.createContext(null),kTe=()=>j.useContext(ite),TL={exports:{}},xQ;function ITe(){return xQ||(xQ=1,(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(u,l,d){this.fn=u,this.context=l,this.once=d||!1}function s(u,l,d,f,A){if(typeof d!="function")throw new TypeError("The listener must be a function");var p=new i(d,f||u,A),g=r?r+l:l;return u._events[g]?u._events[g].fn?u._events[g]=[u._events[g],p]:u._events[g].push(p):(u._events[g]=p,u._eventsCount++),u}function o(u,l){--u._eventsCount===0?u._events=new n:delete u._events[l]}function c(){this._events=new n,this._eventsCount=0}c.prototype.eventNames=function(){var l=[],d,f;if(this._eventsCount===0)return l;for(f in d=this._events)e.call(d,f)&&l.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(d)):l},c.prototype.listeners=function(l){var d=r?r+l:l,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var A=0,p=f.length,g=new Array(p);A<p;A++)g[A]=f[A].fn;return g},c.prototype.listenerCount=function(l){var d=r?r+l:l,f=this._events[d];return f?f.fn?1:f.length:0},c.prototype.emit=function(l,d,f,A,p,g){var y=r?r+l:l;if(!this._events[y])return!1;var x=this._events[y],w=arguments.length,E,T;if(x.fn){switch(x.once&&this.removeListener(l,x.fn,void 0,!0),w){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,d),!0;case 3:return x.fn.call(x.context,d,f),!0;case 4:return x.fn.call(x.context,d,f,A),!0;case 5:return x.fn.call(x.context,d,f,A,p),!0;case 6:return x.fn.call(x.context,d,f,A,p,g),!0}for(T=1,E=new Array(w-1);T<w;T++)E[T-1]=arguments[T];x.fn.apply(x.context,E)}else{var C=x.length,N;for(T=0;T<C;T++)switch(x[T].once&&this.removeListener(l,x[T].fn,void 0,!0),w){case 1:x[T].fn.call(x[T].context);break;case 2:x[T].fn.call(x[T].context,d);break;case 3:x[T].fn.call(x[T].context,d,f);break;case 4:x[T].fn.call(x[T].context,d,f,A);break;default:if(!E)for(N=1,E=new Array(w-1);N<w;N++)E[N-1]=arguments[N];x[T].fn.apply(x[T].context,E)}}return!0},c.prototype.on=function(l,d,f){return s(this,l,d,f,!1)},c.prototype.once=function(l,d,f){return s(this,l,d,f,!0)},c.prototype.removeListener=function(l,d,f,A){var p=r?r+l:l;if(!this._events[p])return this;if(!d)return o(this,p),this;var g=this._events[p];if(g.fn)g.fn===d&&(!A||g.once)&&(!f||g.context===f)&&o(this,p);else{for(var y=0,x=[],w=g.length;y<w;y++)(g[y].fn!==d||A&&!g[y].once||f&&g[y].context!==f)&&x.push(g[y]);x.length?this._events[p]=x.length===1?x[0]:x:o(this,p)}return this},c.prototype.removeAllListeners=function(l){var d;return l?(d=r?r+l:l,this._events[d]&&o(this,d)):(this._events=new n,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=r,c.EventEmitter=c,t.exports=c})(TL)),TL.exports}var LTe=ITe();const BTe=eA(LTe);var FE=new BTe,_P="recharts.syncEvent.tooltip",bQ="recharts.syncEvent.brush",hM=(t,e)=>{if(e&&Array.isArray(t)){var r=Number.parseInt(e,10);if(!zm(r))return t[r]}},PTe={chartName:"",tooltipPayloadSearcher:()=>{},eventEmitter:void 0,defaultTooltipEventType:"axis"},ste=Qh({name:"options",initialState:PTe,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),OTe=ste.reducer,{createEventEmitter:RTe}=ste.actions;function DTe(t){return t.tooltip.syncInteraction}var MTe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},ate=Qh({name:"chartData",initialState:MTe,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:r,endIndex:n}=e.payload;r!=null&&(t.dataStartIndex=r),n!=null&&(t.dataEndIndex=n)}}}),{setChartData:wQ,setDataStartEndIndexes:FTe,setComputedData:Yqe}=ate.actions,UTe=ate.reducer,$Te=["x","y"];function EQ(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function qy(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?EQ(Object(r),!0).forEach(function(n){HTe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):EQ(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function HTe(t,e,r){return(e=QTe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function QTe(t){var e=VTe(t,"string");return typeof e=="symbol"?e:e+""}function VTe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function zTe(t,e){if(t==null)return{};var r,n,i=KTe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function KTe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function GTe(){var t=si(ID),e=si(LD),r=Al(),n=si(eee),i=si(dg),s=a1(),o=e5(),c=si(u=>u.rootProps.className);j.useEffect(()=>{if(t==null)return H0;var u=(l,d,f)=>{if(e!==f&&t===l){if(n==="index"){var A;if(o&&d!==null&&d!==void 0&&(A=d.payload)!==null&&A!==void 0&&A.coordinate&&d.payload.sourceViewBox){var p=d.payload.coordinate,{x:g,y}=p,x=zTe(p,$Te),{x:w,y:E,width:T,height:C}=d.payload.sourceViewBox,N=qy(qy({},x),{},{x:o.x+(T?(g-w)/T:0)*o.width,y:o.y+(C?(y-E)/C:0)*o.height});r(qy(qy({},d),{},{payload:qy(qy({},d.payload),{},{coordinate:N})}))}else r(d);return}if(i!=null){var I;if(typeof n=="function"){var U={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},K=n(i,U);I=i[K]}else n==="value"&&(I=i.find(ne=>String(ne.value)===d.payload.label));var{coordinate:Y}=d.payload;if(I==null||d.payload.active===!1||Y==null||o==null){r(bP({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:re,y:se}=Y,Ae=Math.min(re,o.x+o.width),we=Math.min(se,o.y+o.height),Ce={x:s==="horizontal"?I.coordinate:Ae,y:s==="horizontal"?we:I.coordinate},ve=bP({active:d.payload.active,coordinate:Ce,dataKey:d.payload.dataKey,index:String(I.index),label:d.payload.label,sourceViewBox:d.payload.sourceViewBox,graphicalItemId:d.payload.graphicalItemId});r(ve)}}};return FE.on(_P,u),()=>{FE.off(_P,u)}},[c,r,e,t,n,i,s,o])}function WTe(){var t=si(ID),e=si(LD),r=Al();j.useEffect(()=>{if(t==null)return H0;var n=(i,s,o)=>{e!==o&&t===i&&r(FTe(s))};return FE.on(bQ,n),()=>{FE.off(bQ,n)}},[r,e,t])}function YTe(){var t=Al();j.useEffect(()=>{t(RTe())},[t]),GTe(),WTe()}function qTe(t,e,r,n,i,s){var o=si(p=>nTe(p,t,e)),c=si(LD),u=si(ID),l=si(eee),d=si(DTe),f=d?.active,A=e5();j.useEffect(()=>{if(!f&&u!=null&&c!=null){var p=bP({active:s,coordinate:r,dataKey:o,index:i,label:typeof n=="number"?String(n):n,sourceViewBox:A,graphicalItemId:void 0});FE.emit(_P,u,p,c)}},[f,r,o,i,n,c,u,l,s,A])}function _Q(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function SQ(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?_Q(Object(r),!0).forEach(function(n){XTe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_Q(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function XTe(t,e,r){return(e=ZTe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ZTe(t){var e=JTe(t,"string");return typeof e=="symbol"?e:e+""}function JTe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function eCe(t){return t.dataKey}function tCe(t,e){return j.isValidElement(t)?j.cloneElement(t,e):typeof t=="function"?j.createElement(t,e):j.createElement(Mbe,e)}var TQ=[],rCe={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function nCe(t){var e,r,n=Uc(t,rCe),{active:i,allowEscapeViewBox:s,animationDuration:o,animationEasing:c,content:u,filterNull:l,isAnimationActive:d,offset:f,payloadUniqBy:A,position:p,reverseDirection:g,useTranslate3d:y,wrapperStyle:x,cursor:w,shared:E,trigger:T,defaultIndex:C,portal:N,axisId:I}=n,U=Al(),K=typeof C=="number"?String(C):C;j.useEffect(()=>{U(X_e({shared:E,trigger:T,axisId:I,active:i,defaultIndex:K}))},[U,E,T,I,i,K]);var Y=e5(),re=YZ(),se=z_e(E),{activeIndex:Ae,isActive:we}=(e=si(it=>aTe(it,se,T,K)))!==null&&e!==void 0?e:{},Ce=si(it=>sTe(it,se,T,K)),ve=si(it=>rte(it,se,T,K)),ne=si(it=>iTe(it,se,T,K)),ce=Ce,ae=kTe(),De=(r=i??we)!==null&&r!==void 0?r:!1,[Oe,be]=XX([ce,De]),de=se==="axis"?ve:void 0;qTe(se,T,ne,de,Ae,De);var xe=N??ae;if(xe==null||Y==null||se==null)return null;var je=ce??TQ;De||(je=TQ),l&&je.length&&(je=KX(je.filter(it=>it.value!=null&&(it.hide!==!0||n.includeHidden)),A,eCe));var Me=je.length>0,Re=j.createElement(zbe,{allowEscapeViewBox:s,animationDuration:o,animationEasing:c,isAnimationActive:d,active:De,coordinate:ne,hasPayload:Me,offset:f,position:p,reverseDirection:g,useTranslate3d:y,viewBox:Y,wrapperStyle:x,lastBoundingBox:Oe,innerRef:be,hasPortalFromProps:!!N},tCe(u,SQ(SQ({},n),{},{payload:je,label:de,active:De,activeIndex:Ae,coordinate:ne,accessibilityLayer:re})));return j.createElement(j.Fragment,null,v0.createPortal(Re,xe),De&&j.createElement(NTe,{cursor:w,tooltipEventType:se,coordinate:ne,payload:je,index:Ae}))}var Ub=t=>null;Ub.displayName="Cell";function iCe(t,e,r){return(e=sCe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function sCe(t){var e=aCe(t,"string");return typeof e=="symbol"?e:e+""}function aCe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class oCe{constructor(e){iCe(this,"cache",new Map),this.maxSize=e}get(e){var r=this.cache.get(e);return r!==void 0&&(this.cache.delete(e),this.cache.set(e,r)),r}set(e,r){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;n!=null&&this.cache.delete(n)}this.cache.set(e,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function CQ(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function lCe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?CQ(Object(r),!0).forEach(function(n){cCe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):CQ(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function cCe(t,e,r){return(e=uCe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function uCe(t){var e=dCe(t,"string");return typeof e=="symbol"?e:e+""}function dCe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var hCe={cacheSize:2e3,enableCache:!0},ote=lCe({},hCe),jQ=new oCe(ote.cacheSize),fCe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},NQ="recharts_measurement_span";function ACe(t,e){var r=e.fontSize||"",n=e.fontFamily||"",i=e.fontWeight||"",s=e.fontStyle||"",o=e.letterSpacing||"",c=e.textTransform||"";return"".concat(t,"|").concat(r,"|").concat(n,"|").concat(i,"|").concat(s,"|").concat(o,"|").concat(c)}var kQ=(t,e)=>{try{var r=document.getElementById(NQ);r||(r=document.createElement("span"),r.setAttribute("id",NQ),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,fCe,e),r.textContent="".concat(t);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},Yw=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||i5.isSsr)return{width:0,height:0};if(!ote.enableCache)return kQ(e,r);var n=ACe(e,r),i=jQ.get(n);if(i)return i;var s=kQ(e,r);return jQ.set(n,s),s},lte;function mCe(t,e,r){return(e=pCe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function pCe(t){var e=gCe(t,"string");return typeof e=="symbol"?e:e+""}function gCe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var IQ=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,LQ=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,vCe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,yCe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,xCe={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},bCe=["cm","mm","pt","pc","in","Q","px"];function wCe(t){return bCe.includes(t)}var Zx="NaN";function ECe(t,e){return t*xCe[e]}class Md{static parse(e){var r,[,n,i]=(r=yCe.exec(e))!==null&&r!==void 0?r:[];return n==null?Md.NaN:new Md(parseFloat(n),i??"")}constructor(e,r){this.num=e,this.unit=r,this.num=e,this.unit=r,zm(e)&&(this.unit=""),r!==""&&!vCe.test(r)&&(this.num=NaN,this.unit=""),wCe(r)&&(this.num=ECe(e,r),this.unit="px")}add(e){return this.unit!==e.unit?new Md(NaN,""):new Md(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new Md(NaN,""):new Md(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Md(NaN,""):new Md(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Md(NaN,""):new Md(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return zm(this.num)}}lte=Md;mCe(Md,"NaN",new lte(NaN,""));function cte(t){if(t==null||t.includes(Zx))return Zx;for(var e=t;e.includes("*")||e.includes("/");){var r,[,n,i,s]=(r=IQ.exec(e))!==null&&r!==void 0?r:[],o=Md.parse(n??""),c=Md.parse(s??""),u=i==="*"?o.multiply(c):o.divide(c);if(u.isNaN())return Zx;e=e.replace(IQ,u.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var l,[,d,f,A]=(l=LQ.exec(e))!==null&&l!==void 0?l:[],p=Md.parse(d??""),g=Md.parse(A??""),y=f==="+"?p.add(g):p.subtract(g);if(y.isNaN())return Zx;e=e.replace(LQ,y.toString())}return e}var BQ=/\(([^()]*)\)/;function _Ce(t){for(var e=t,r;(r=BQ.exec(e))!=null;){var[,n]=r;e=e.replace(BQ,cte(n))}return e}function SCe(t){var e=t.replace(/\s+/g,"");return e=_Ce(e),e=cte(e),e}function TCe(t){try{return SCe(t)}catch{return Zx}}function CL(t){var e=TCe(t.slice(5,-1));return e===Zx?"":e}var CCe=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],jCe=["dx","dy","angle","className","breakAll"];function SP(){return SP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},SP.apply(null,arguments)}function PQ(t,e){if(t==null)return{};var r,n,i=NCe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function NCe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var ute=/[ \f\n\r\t\v\u2028\u2029]+/,dte=t=>{var{children:e,breakAll:r,style:n}=t;try{var i=[];ru(e)||(r?i=e.toString().split(""):i=e.toString().split(ute));var s=i.map(c=>({word:c,width:Yw(c,n).width})),o=r?0:Yw("",n).width;return{wordsWithComputedWidth:s,spaceWidth:o}}catch{return null}};function kCe(t){return t==="start"||t==="middle"||t==="end"||t==="inherit"}var hte=(t,e,r,n)=>t.reduce((i,s)=>{var{word:o,width:c}=s,u=i[i.length-1];if(u&&c!=null&&(e==null||n||u.width+c+r<Number(e)))u.words.push(o),u.width+=c+r;else{var l={words:[o],width:c};i.push(l)}return i},[]),fte=t=>t.reduce((e,r)=>e.width>r.width?e:r),ICe="",OQ=(t,e,r,n,i,s,o,c)=>{var u=t.slice(0,e),l=dte({breakAll:r,style:n,children:u+ICe});if(!l)return[!1,[]];var d=hte(l.wordsWithComputedWidth,s,o,c),f=d.length>i||fte(d).width>Number(s);return[f,d]},LCe=(t,e,r,n,i)=>{var{maxLines:s,children:o,style:c,breakAll:u}=t,l=Ei(s),d=String(o),f=hte(e,n,r,i);if(!l||i)return f;var A=f.length>s||fte(f).width>Number(n);if(!A)return f;for(var p=0,g=d.length-1,y=0,x;p<=g&&y<=d.length-1;){var w=Math.floor((p+g)/2),E=w-1,[T,C]=OQ(d,E,u,c,s,n,r,i),[N]=OQ(d,w,u,c,s,n,r,i);if(!T&&!N&&(p=w+1),T&&N&&(g=w-1),!T&&N){x=C;break}y++}return x||f},RQ=t=>{var e=ru(t)?[]:t.toString().split(ute);return[{words:e,width:void 0}]},BCe=t=>{var{width:e,scaleToFit:r,children:n,style:i,breakAll:s,maxLines:o}=t;if((e||r)&&!i5.isSsr){var c,u,l=dte({breakAll:s,children:n,style:i});if(l){var{wordsWithComputedWidth:d,spaceWidth:f}=l;c=d,u=f}else return RQ(n);return LCe({breakAll:s,children:n,maxLines:o,style:i},c,u,e,!!r)}return RQ(n)},Ate="#808080",PCe={angle:0,breakAll:!1,capHeight:"0.71em",fill:Ate,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},t_=j.forwardRef((t,e)=>{var r=Uc(t,PCe),{x:n,y:i,lineHeight:s,capHeight:o,fill:c,scaleToFit:u,textAnchor:l,verticalAnchor:d}=r,f=PQ(r,CCe),A=j.useMemo(()=>BCe({breakAll:f.breakAll,children:f.children,maxLines:f.maxLines,scaleToFit:u,style:f.style,width:f.width}),[f.breakAll,f.children,f.maxLines,u,f.style,f.width]),{dx:p,dy:g,angle:y,className:x,breakAll:w}=f,E=PQ(f,jCe);if(!Km(n)||!Km(i)||A.length===0)return null;var T=Number(n)+(Ei(p)?p:0),C=Number(i)+(Ei(g)?g:0);if(!Ha(T)||!Ha(C))return null;var N;switch(d){case"start":N=CL("calc(".concat(o,")"));break;case"middle":N=CL("calc(".concat((A.length-1)/2," * -").concat(s," + (").concat(o," / 2))"));break;default:N=CL("calc(".concat(A.length-1," * -").concat(s,")"));break}var I=[],U=A[0];if(u&&U!=null){var K=U.width,{width:Y}=f;I.push("scale(".concat(Ei(Y)&&Ei(K)?Y/K:1,")"))}return y&&I.push("rotate(".concat(y,", ").concat(T,", ").concat(C,")")),I.length&&(E.transform=I.join(" ")),j.createElement("text",SP({},Hu(E),{ref:e,x:T,y:C,className:Sa("recharts-text",x),textAnchor:l,fill:c.includes("url")?Ate:c}),A.map((re,se)=>{var Ae=re.words.join(w?"":" ");return j.createElement("tspan",{x:T,dy:se===0?N:s,key:"".concat(Ae,"-").concat(se)},Ae)}))});t_.displayName="Text";function DQ(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function lm(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?DQ(Object(r),!0).forEach(function(n){OCe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):DQ(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function OCe(t,e,r){return(e=RCe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function RCe(t){var e=DCe(t,"string");return typeof e=="symbol"?e:e+""}function DCe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var MCe=t=>{var{viewBox:e,position:r,offset:n=0,parentViewBox:i}=t,{x:s,y:o,height:c,upperWidth:u,lowerWidth:l}=Z3(e),d=s,f=s+(u-l)/2,A=(d+f)/2,p=(u+l)/2,g=d+u/2,y=c>=0?1:-1,x=y*n,w=y>0?"end":"start",E=y>0?"start":"end",T=u>=0?1:-1,C=T*n,N=T>0?"end":"start",I=T>0?"start":"end",U=i;if(r==="top"){var K={x:d+u/2,y:o-x,horizontalAnchor:"middle",verticalAnchor:w};return U&&(K.height=Math.max(o-U.y,0),K.width=u),K}if(r==="bottom"){var Y={x:f+l/2,y:o+c+x,horizontalAnchor:"middle",verticalAnchor:E};return U&&(Y.height=Math.max(U.y+U.height-(o+c),0),Y.width=l),Y}if(r==="left"){var re={x:A-C,y:o+c/2,horizontalAnchor:N,verticalAnchor:"middle"};return U&&(re.width=Math.max(re.x-U.x,0),re.height=c),re}if(r==="right"){var se={x:A+p+C,y:o+c/2,horizontalAnchor:I,verticalAnchor:"middle"};return U&&(se.width=Math.max(U.x+U.width-se.x,0),se.height=c),se}var Ae=U?{width:p,height:c}:{};return r==="insideLeft"?lm({x:A+C,y:o+c/2,horizontalAnchor:I,verticalAnchor:"middle"},Ae):r==="insideRight"?lm({x:A+p-C,y:o+c/2,horizontalAnchor:N,verticalAnchor:"middle"},Ae):r==="insideTop"?lm({x:d+u/2,y:o+x,horizontalAnchor:"middle",verticalAnchor:E},Ae):r==="insideBottom"?lm({x:f+l/2,y:o+c-x,horizontalAnchor:"middle",verticalAnchor:w},Ae):r==="insideTopLeft"?lm({x:d+C,y:o+x,horizontalAnchor:I,verticalAnchor:E},Ae):r==="insideTopRight"?lm({x:d+u-C,y:o+x,horizontalAnchor:N,verticalAnchor:E},Ae):r==="insideBottomLeft"?lm({x:f+C,y:o+c-x,horizontalAnchor:I,verticalAnchor:w},Ae):r==="insideBottomRight"?lm({x:f+l-C,y:o+c-x,horizontalAnchor:N,verticalAnchor:w},Ae):r&&typeof r=="object"&&(Ei(r.x)||hy(r.x))&&(Ei(r.y)||hy(r.y))?lm({x:s+rh(r.x,p),y:o+rh(r.y,c),horizontalAnchor:"end",verticalAnchor:"end"},Ae):lm({x:g,y:o+c/2,horizontalAnchor:"middle",verticalAnchor:"middle"},Ae)},FCe=["labelRef"],UCe=["content"];function MQ(t,e){if(t==null)return{};var r,n,i=$Ce(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function $Ce(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function FQ(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function pw(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?FQ(Object(r),!0).forEach(function(n){HCe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):FQ(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function HCe(t,e,r){return(e=QCe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function QCe(t){var e=VCe(t,"string");return typeof e=="symbol"?e:e+""}function VCe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Pp(){return Pp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Pp.apply(null,arguments)}var mte=j.createContext(null),zCe=t=>{var{x:e,y:r,upperWidth:n,lowerWidth:i,width:s,height:o,children:c}=t,u=j.useMemo(()=>({x:e,y:r,upperWidth:n,lowerWidth:i,width:s,height:o}),[e,r,n,i,s,o]);return j.createElement(mte.Provider,{value:u},c)},pte=()=>{var t=j.useContext(mte),e=e5();return t||(e?Z3(e):void 0)},KCe=j.createContext(null),GCe=()=>{var t=j.useContext(KCe),e=si(G2);return t||e},WCe=t=>{var{value:e,formatter:r}=t,n=ru(t.children)?e:t.children;return typeof r=="function"?r(n):n},fM=t=>t!=null&&typeof t=="function",YCe=(t,e)=>{var r=Ad(e-t),n=Math.min(Math.abs(e-t),360);return r*n},qCe=(t,e,r,n,i)=>{var{offset:s,className:o}=t,{cx:c,cy:u,innerRadius:l,outerRadius:d,startAngle:f,endAngle:A,clockWise:p}=i,g=(l+d)/2,y=YCe(f,A),x=y>=0?1:-1,w,E;switch(e){case"insideStart":w=f+x*s,E=p;break;case"insideEnd":w=A-x*s,E=!p;break;case"end":w=A+x*s,E=p;break;default:throw new Error("Unsupported position ".concat(e))}E=y<=0?E:!E;var T=rl(c,u,g,w),C=rl(c,u,g,w+(E?1:-1)*359),N="M".concat(T.x,",").concat(T.y,`
    A`).concat(g,",").concat(g,",0,1,").concat(E?0:1,`,
    `).concat(C.x,",").concat(C.y),I=ru(t.id)?TE("recharts-radial-line-"):t.id;return j.createElement("text",Pp({},n,{dominantBaseline:"central",className:Sa("recharts-radial-bar-label",o)}),j.createElement("defs",null,j.createElement("path",{id:I,d:N})),j.createElement("textPath",{xlinkHref:"#".concat(I)},r))},XCe=(t,e,r)=>{var{cx:n,cy:i,innerRadius:s,outerRadius:o,startAngle:c,endAngle:u}=t,l=(c+u)/2;if(r==="outside"){var{x:d,y:f}=rl(n,i,o+e,l);return{x:d,y:f,textAnchor:d>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"end"};var A=(s+o)/2,{x:p,y:g}=rl(n,i,A,l);return{x:p,y:g,textAnchor:"middle",verticalAnchor:"middle"}},eT=t=>t!=null&&"cx"in t&&Ei(t.cx),ZCe={angle:0,offset:5,zIndex:Rc.label,position:"middle",textBreakAll:!1};function JCe(t){if(!eT(t))return t;var{cx:e,cy:r,outerRadius:n}=t,i=n*2;return{x:e-n,y:r-n,width:i,upperWidth:i,lowerWidth:i,height:i}}function o0(t){var e=Uc(t,ZCe),{viewBox:r,parentViewBox:n,position:i,value:s,children:o,content:c,className:u="",textBreakAll:l,labelRef:d}=e,f=GCe(),A=pte(),p=i==="center"?A:f??A,g,y,x;r==null?g=p:eT(r)?g=r:g=Z3(r);var w=JCe(g);if(!g||ru(s)&&ru(o)&&!j.isValidElement(c)&&typeof c!="function")return null;var E=pw(pw({},e),{},{viewBox:g});if(j.isValidElement(c)){var{labelRef:T}=E,C=MQ(E,FCe);return j.cloneElement(c,C)}if(typeof c=="function"){var{content:N}=E,I=MQ(E,UCe);if(y=j.createElement(c,I),j.isValidElement(y))return y}else y=WCe(e);var U=Hu(e);if(eT(g)){if(i==="insideStart"||i==="insideEnd"||i==="end")return qCe(e,i,y,U,g);x=XCe(g,e.offset,e.position)}else{if(!w)return null;var K=MCe({viewBox:w,position:i,offset:e.offset,parentViewBox:eT(n)?void 0:n});x=pw(pw({x:K.x,y:K.y,textAnchor:K.horizontalAnchor,verticalAnchor:K.verticalAnchor},K.width!==void 0?{width:K.width}:{}),K.height!==void 0?{height:K.height}:{})}return j.createElement(ih,{zIndex:e.zIndex},j.createElement(t_,Pp({ref:d,className:Sa("recharts-label",u)},U,x,{textAnchor:kCe(U.textAnchor)?U.textAnchor:x.textAnchor,breakAll:l}),y))}o0.displayName="Label";var eje=(t,e,r)=>{if(!t)return null;var n={viewBox:e,labelRef:r};return t===!0?j.createElement(o0,Pp({key:"label-implicit"},n)):Km(t)?j.createElement(o0,Pp({key:"label-implicit",value:t},n)):j.isValidElement(t)?t.type===o0?j.cloneElement(t,pw({key:"label-implicit"},n)):j.createElement(o0,Pp({key:"label-implicit",content:t},n)):fM(t)?j.createElement(o0,Pp({key:"label-implicit",content:t},n)):t&&typeof t=="object"?j.createElement(o0,Pp({},t,{key:"label-implicit"},n)):null};function tje(t){var{label:e,labelRef:r}=t,n=pte();return eje(e,n,r)||null}var jL={},NL={},UQ;function rje(){return UQ||(UQ=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r[r.length-1]}t.last=e})(NL)),NL}var kL={},$Q;function nje(){return $Q||($Q=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return Array.isArray(r)?r:Array.from(r)}t.toArray=e})(kL)),kL}var HQ;function ije(){return HQ||(HQ=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=rje(),r=nje(),n=$3();function i(s){if(n.isArrayLike(s))return e.last(r.toArray(s))}t.last=i})(jL)),jL}var IL,QQ;function sje(){return QQ||(QQ=1,IL=ije().last),IL}var aje=sje();const gte=eA(aje);var oje=["valueAccessor"],lje=["dataKey","clockWise","id","textBreakAll","zIndex"];function xj(){return xj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},xj.apply(null,arguments)}function VQ(t,e){if(t==null)return{};var r,n,i=cje(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function cje(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var uje=t=>Array.isArray(t.value)?gte(t.value):t.value,vte=j.createContext(void 0),yte=vte.Provider,xte=j.createContext(void 0),dje=xte.Provider;function hje(){return j.useContext(vte)}function fje(){return j.useContext(xte)}function tT(t){var{valueAccessor:e=uje}=t,r=VQ(t,oje),{dataKey:n,clockWise:i,id:s,textBreakAll:o,zIndex:c}=r,u=VQ(r,lje),l=hje(),d=fje(),f=l||d;return!f||!f.length?null:j.createElement(ih,{zIndex:c??Rc.label},j.createElement(Fc,{className:"recharts-label-list"},f.map((A,p)=>{var g,y=ru(n)?e(A,p):dl(A.payload,n),x=ru(s)?{}:{id:"".concat(s,"-").concat(p)};return j.createElement(o0,xj({key:"label-".concat(p)},Hu(A),u,x,{fill:(g=r.fill)!==null&&g!==void 0?g:A.fill,parentViewBox:A.parentViewBox,value:y,textBreakAll:o,viewBox:A.viewBox,index:p,zIndex:0}))})))}tT.displayName="LabelList";function AM(t){var{label:e}=t;return e?e===!0?j.createElement(tT,{key:"labelList-implicit"}):j.isValidElement(e)||fM(e)?j.createElement(tT,{key:"labelList-implicit",content:e}):typeof e=="object"?j.createElement(tT,xj({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}var Aje=["points","className","baseLinePoints","connectNulls"],zQ;function Jx(){return Jx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Jx.apply(null,arguments)}function mje(t,e){if(t==null)return{};var r,n,i=pje(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function pje(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function gje(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var KQ=t=>t!=null&&t.x===+t.x&&t.y===+t.y,vje=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];e.forEach(o=>{var c=r[r.length-1];KQ(o)?c&&c.push(o):c&&c.length>0&&r.push([])});var n=e[0],i=r[r.length-1];KQ(n)&&i&&i.push(n);var s=r[r.length-1];return s&&s.length<=0&&(r=r.slice(0,-1)),r},qw=(t,e)=>{var r=vje(t);e&&(r=[r.reduce((i,s)=>[...i,...s],[])]);var n=r.map(i=>i.reduce((s,o,c)=>cc(zQ||(zQ=gje(["","","",",",""])),s,c===0?"M":"L",o.x,o.y),"")).join("");return r.length===1?"".concat(n,"Z"):n},yje=(t,e,r)=>{var n=qw(t,r);return"".concat(n.slice(-1)==="Z"?n.slice(0,-1):n,"L").concat(qw(Array.from(e).reverse(),r).slice(1))},bte=t=>{var{points:e,className:r,baseLinePoints:n,connectNulls:i}=t,s=mje(t,Aje);if(!e||!e.length)return null;var o=Sa("recharts-polygon",r);if(n&&n.length){var c=s.stroke&&s.stroke!=="none",u=yje(e,n,i);return j.createElement("g",{className:o},j.createElement("path",Jx({},Hu(s),{fill:u.slice(-1)==="Z"?s.fill:"none",stroke:"none",d:u})),c?j.createElement("path",Jx({},Hu(s),{fill:"none",d:qw(e,i)})):null,c?j.createElement("path",Jx({},Hu(s),{fill:"none",d:qw(n,i)})):null)}var l=qw(e,i);return j.createElement("path",Jx({},Hu(s),{fill:l.slice(-1)==="Z"?s.fill:"none",className:o,d:l}))};function TP(){return TP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},TP.apply(null,arguments)}var mM=t=>{var{cx:e,cy:r,r:n,className:i}=t,s=Sa("recharts-dot",i);return Ei(e)&&Ei(r)&&Ei(n)?j.createElement("circle",TP({},yu(t),U3(t),{className:s,cx:e,cy:r,r:n})):null},pM=t=>t.graphicalItems.polarItems,xje=or([Nl,W2],RD),w5=or([pM,$c,xje],MD),bje=or([w5],FD),E5=or([bje,Q2],UD),wte=or([E5,$c,w5],HD);or([E5,$c,w5],(t,e,r)=>r.length>0?t.flatMap(n=>r.flatMap(i=>{var s,o=dl(n,(s=e.dataKey)!==null&&s!==void 0?s:i.dataKey);return{value:o,errorDomain:[]}})).filter(Boolean):e?.dataKey!=null?t.map(n=>({value:dl(n,e.dataKey),errorDomain:[]})):t.map(n=>({value:n,errorDomain:[]})));var GQ=()=>{},wje=or([E5,$c,w5,g5,Nl],KD),Eje=or([$c,VD,zD,GQ,wje,GQ,Wa,Nl],GD),Ete=or([$c,Wa,E5,wte,V2,Nl,Eje],WD),_te=or([Ete,_y,Xm],qD),_je=or([$c,Ete,_te,Nl],ZD),Sje=or([Xm,_je],aee),gM=(t,e,r)=>{switch(e){case"angleAxis":return u1(t,r);case"radiusAxis":return K2(t,r);default:throw new Error("Unexpected axis type: ".concat(e))}},vM=(t,e,r)=>{switch(e){case"angleAxis":return z2e(t,r);case"radiusAxis":return K2e(t,r);default:throw new Error("Unexpected axis type: ".concat(e))}},r_=or([gM,Xm,Sje,vM],v5),Ste=or([Wa,wte,_y,Nl],JD),n_=or([Wa,gM,Xm,r_,_te,vM,Z2,Ste,Nl],Nee),Tje=or([n_],t=>{if(t){var e=new Map;return t.forEach(r=>{var n=(r.coordinate+360)%360;e.has(n)||e.set(n,r)}),Array.from(e.values())}});or([Wa,gM,r_,vM,Z2,Ste,Nl],Iee);var Cje=(t,e)=>n_(t,"angleAxis",e,!1),jje=or([Cje],t=>{if(t)return t.map(e=>e.coordinate)}),Nje=(t,e)=>n_(t,"radiusAxis",e,!1),kje=or([Nje],t=>{if(t)return t.map(e=>e.coordinate)}),Ije=["gridType","radialLines","angleAxisId","radiusAxisId","cx","cy","innerRadius","outerRadius","polarAngles","polarRadius","zIndex"];function Lje(t,e){if(t==null)return{};var r,n,i=Bje(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function Bje(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function PA(){return PA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},PA.apply(null,arguments)}function WQ(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function _5(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?WQ(Object(r),!0).forEach(function(n){Pje(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):WQ(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Pje(t,e,r){return(e=Oje(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Oje(t){var e=Rje(t,"string");return typeof e=="symbol"?e:e+""}function Rje(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Dje=(t,e,r,n)=>{var i="";return n.forEach((s,o)=>{var c=rl(e,r,t,s);o?i+="L ".concat(c.x,",").concat(c.y):i+="M ".concat(c.x,",").concat(c.y)}),i+="Z",i},Mje=t=>{var{cx:e,cy:r,innerRadius:n,outerRadius:i,polarAngles:s,radialLines:o}=t;if(!s||!s.length||!o)return null;var c=_5({stroke:"#ccc"},yu(t));return j.createElement("g",{className:"recharts-polar-grid-angle"},s.map(u=>{var l=rl(e,r,n,u),d=rl(e,r,i,u);return j.createElement("line",PA({key:"line-".concat(u)},c,{x1:l.x,y1:l.y,x2:d.x,y2:d.y}))}))},YQ=t=>{var{cx:e,cy:r,radius:n}=t,i=_5({stroke:"#ccc",fill:"none"},yu(t));return j.createElement("circle",PA({},i,{className:Sa("recharts-polar-grid-concentric-circle",t.className),cx:e,cy:r,r:n}))},qQ=t=>{var{radius:e}=t,r=_5({stroke:"#ccc",fill:"none"},yu(t));return j.createElement("path",PA({},r,{className:Sa("recharts-polar-grid-concentric-polygon",t.className),d:Dje(e,t.cx,t.cy,t.polarAngles)}))},Fje=t=>{var{polarRadius:e,gridType:r}=t;if(!e||!e.length)return null;var n=Math.max(...e),i=t.fill&&t.fill!=="none";return j.createElement("g",{className:"recharts-polar-grid-concentric"},i&&r==="circle"&&j.createElement(YQ,PA({},t,{radius:n})),i&&r!=="circle"&&j.createElement(qQ,PA({},t,{radius:n})),e.map((s,o)=>{var c=o;return r==="circle"?j.createElement(YQ,PA({key:c},t,{fill:"none",radius:s})):j.createElement(qQ,PA({key:c},t,{fill:"none",radius:s}))}))},Uje={angleAxisId:0,radiusAxisId:0,gridType:"polygon",radialLines:!0,zIndex:Rc.grid},Tte=t=>{var e,r,n,i,s,o,c,u,l=Uc(t,Uje),{gridType:d,radialLines:f,angleAxisId:A,radiusAxisId:p,cx:g,cy:y,innerRadius:x,outerRadius:w,polarAngles:E,polarRadius:T,zIndex:C}=l,N=Lje(l,Ije),I=si(G2),U=si(we=>jje(we,A)),K=si(we=>kje(we,p)),Y=Array.isArray(E)?E:U,re=Array.isArray(T)?T:K;if(Y==null||re==null)return null;var se=_5({cx:(e=(r=I?.cx)!==null&&r!==void 0?r:g)!==null&&e!==void 0?e:0,cy:(n=(i=I?.cy)!==null&&i!==void 0?i:y)!==null&&n!==void 0?n:0,innerRadius:(s=(o=I?.innerRadius)!==null&&o!==void 0?o:x)!==null&&s!==void 0?s:0,outerRadius:(c=(u=I?.outerRadius)!==null&&u!==void 0?u:w)!==null&&c!==void 0?c:0,polarAngles:Y,polarRadius:re,zIndex:C},N),{outerRadius:Ae}=se;return Ae<=0?null:j.createElement(ih,{zIndex:se.zIndex},j.createElement("g",{className:"recharts-polar-grid"},j.createElement(Fje,PA({gridType:d,radialLines:f},se,{polarAngles:Y,polarRadius:re})),j.createElement(Mje,PA({gridType:d,radialLines:f},se,{polarAngles:Y,polarRadius:re}))))};Tte.displayName="PolarGrid";var $je={radiusAxis:{},angleAxis:{}},Cte=Qh({name:"polarAxis",initialState:$je,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:qqe,removeRadiusAxis:Xqe,addAngleAxis:Hje,removeAngleAxis:Qje}=Cte.actions,Vje=Cte.reducer;function yM(t){return t&&typeof t=="object"&&"className"in t&&typeof t.className=="string"?t.className:""}var zje=["children","type"];function gy(){return gy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},gy.apply(null,arguments)}function XQ(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function zf(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?XQ(Object(r),!0).forEach(function(n){Kje(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):XQ(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Kje(t,e,r){return(e=Gje(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Gje(t){var e=Wje(t,"string");return typeof e=="symbol"?e:e+""}function Wje(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Yje(t,e){if(t==null)return{};var r,n,i=qje(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function qje(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var ZQ=1e-5,Xje=Math.cos(ij(45)),Zje="angleAxis";function Jje(t){var e=Al(),r=sbe(),n=j.useMemo(()=>{var{children:o,type:c}=t,u=Yje(t,zje),l=z2(r,"angleAxis",c);if(l!=null)return zf(zf({},u),{},{type:l})},[t,r]),i=si(o=>u1(o,n?.id)),s=n===i;return j.useEffect(()=>n==null?H0:(e(Hje(n)),()=>{e(Qje(n))}),[e,n]),s?t.children:null}var eNe=(t,e)=>{var{cx:r,cy:n,radius:i,orientation:s,tickSize:o}=e,c=o||8,u=rl(r,n,i,t.coordinate),l=rl(r,n,i+(s==="inner"?-1:1)*c,t.coordinate);return{x1:u.x,y1:u.y,x2:l.x,y2:l.y}},tNe=(t,e)=>{var r=Math.cos(ij(-t.coordinate));return r>ZQ?e==="outer"?"start":"end":r<-ZQ?e==="outer"?"end":"start":"middle"},rNe=t=>{var e=Math.cos(ij(-t.coordinate)),r=Math.sin(ij(-t.coordinate));return Math.abs(e)<=Xje?r>0?"start":"end":"middle"},nNe=t=>{var{cx:e,cy:r,radius:n,axisLineType:i,axisLine:s,ticks:o}=t;if(!s)return null;var c=zf(zf({},yu(t)),{},{fill:"none"},yu(s));if(i==="circle")return j.createElement(mM,gy({className:"recharts-polar-angle-axis-line"},c,{cx:e,cy:r,r:n}));var u=o.map(l=>rl(e,r,n,l.coordinate));return j.createElement(bte,gy({className:"recharts-polar-angle-axis-line"},c,{points:u}))},iNe=t=>{var{tick:e,tickProps:r,value:n}=t;return e?j.isValidElement(e)?j.cloneElement(e,r):typeof e=="function"?e(r):j.createElement(t_,gy({},r,{className:"recharts-polar-angle-axis-tick-value"}),n):null},sNe=t=>{var{tick:e,tickLine:r,tickFormatter:n,stroke:i,ticks:s}=t,o=yu(t),c=cy(e),u=zf(zf({},o),{},{fill:"none"},yu(r)),l=s.map((d,f)=>{var A=eNe(d,t),p=tNe(d,t.orientation),g=rNe(d),y=zf(zf(zf({},o),{},{textAnchor:p,verticalAnchor:g,stroke:"none",fill:i},c),{},{index:f,payload:d,x:A.x2,y:A.y2});return j.createElement(Fc,gy({className:Sa("recharts-polar-angle-axis-tick",yM(e)),key:"tick-".concat(d.coordinate)},i1(t,d,f)),r&&j.createElement("line",gy({className:"recharts-polar-angle-axis-tick-line"},u,A)),j.createElement(iNe,{tick:e,tickProps:y,value:n?n(d.value,f):d.value}))});return j.createElement(Fc,{className:"recharts-polar-angle-axis-ticks"},l)},aNe=t=>{var{angleAxisId:e}=t,r=si(G2),n=si(c=>r_(c,"angleAxis",e)),i=nh(),s=si(c=>Tje(c,"angleAxis",e,i));if(r==null||!s||!s.length||n==null)return null;var o=zf(zf(zf({},t),{},{scale:n},r),{},{radius:r.outerRadius,ticks:s});return j.createElement(ih,{zIndex:o.zIndex},j.createElement(Fc,{className:Sa("recharts-polar-angle-axis",Zje,o.className)},j.createElement(nNe,o),j.createElement(sNe,o)))};function jte(t){var e=Uc(t,Xg);return j.createElement(Jje,{id:e.angleAxisId,scale:e.scale,type:e.type,dataKey:e.dataKey,unit:void 0,name:e.name,allowDuplicatedCategory:!1,allowDataOverflow:!1,reversed:e.reversed,includeHidden:!1,allowDecimals:e.allowDecimals,tickCount:e.tickCount,ticks:e.ticks,tick:e.tick,domain:e.domain},j.createElement(aNe,e))}jte.displayName="PolarAngleAxis";function JQ(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function eV(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?JQ(Object(r),!0).forEach(function(n){oNe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):JQ(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function oNe(t,e,r){return(e=lNe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function lNe(t){var e=cNe(t,"string");return typeof e=="symbol"?e:e+""}function cNe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var uNe=(t,e)=>e,xM=or([pM,uNe],(t,e)=>t.filter(r=>r.type==="pie").find(r=>r.id===e)),dNe=[],bM=(t,e,r)=>r?.length===0?dNe:r,Nte=or([Q2,xM,bM],(t,e,r)=>{var{chartData:n}=t;if(e!=null){var i;if(e?.data!=null&&e.data.length>0?i=e.data:i=n,(!i||!i.length)&&r!=null&&(i=r.map(s=>eV(eV({},e.presentationProps),s.props))),i!=null)return i}}),hNe=or([Nte,xM,bM],(t,e,r)=>{if(!(t==null||e==null))return t.map((n,i)=>{var s,o=dl(n,e.nameKey,e.name),c;return r!=null&&(s=r[i])!==null&&s!==void 0&&(s=s.props)!==null&&s!==void 0&&s.fill?c=r[i].props.fill:typeof n=="object"&&n!=null&&"fill"in n?c=n.fill:c=e.fill,{value:s1(o,e.dataKey),color:c,payload:n,type:e.legendType}})}),fNe=or([Nte,xM,bM,Vu],(t,e,r,n)=>{if(!(e==null||t==null))return m5e({offset:n,pieSettings:e,displayedData:t,cells:r})}),LL={exports:{}},Jo={};var tV;function ANe(){if(tV)return Jo;tV=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),l=Symbol.for("react.suspense_list"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),A=Symbol.for("react.view_transition"),p=Symbol.for("react.client.reference");function g(y){if(typeof y=="object"&&y!==null){var x=y.$$typeof;switch(x){case t:switch(y=y.type,y){case r:case i:case n:case u:case l:case A:return y;default:switch(y=y&&y.$$typeof,y){case o:case c:case f:case d:return y;case s:return y;default:return x}}case e:return x}}}return Jo.ContextConsumer=s,Jo.ContextProvider=o,Jo.Element=t,Jo.ForwardRef=c,Jo.Fragment=r,Jo.Lazy=f,Jo.Memo=d,Jo.Portal=e,Jo.Profiler=i,Jo.StrictMode=n,Jo.Suspense=u,Jo.SuspenseList=l,Jo.isContextConsumer=function(y){return g(y)===s},Jo.isContextProvider=function(y){return g(y)===o},Jo.isElement=function(y){return typeof y=="object"&&y!==null&&y.$$typeof===t},Jo.isForwardRef=function(y){return g(y)===c},Jo.isFragment=function(y){return g(y)===r},Jo.isLazy=function(y){return g(y)===f},Jo.isMemo=function(y){return g(y)===d},Jo.isPortal=function(y){return g(y)===e},Jo.isProfiler=function(y){return g(y)===i},Jo.isStrictMode=function(y){return g(y)===n},Jo.isSuspense=function(y){return g(y)===u},Jo.isSuspenseList=function(y){return g(y)===l},Jo.isValidElementType=function(y){return typeof y=="string"||typeof y=="function"||y===r||y===i||y===n||y===u||y===l||typeof y=="object"&&y!==null&&(y.$$typeof===f||y.$$typeof===d||y.$$typeof===o||y.$$typeof===s||y.$$typeof===c||y.$$typeof===p||y.getModuleId!==void 0)},Jo.typeOf=g,Jo}var rV;function mNe(){return rV||(rV=1,LL.exports=ANe()),LL.exports}var pNe=mNe(),nV=t=>typeof t=="string"?t:t?t.displayName||t.name||"Component":"",iV=null,BL=null,kte=t=>{if(t===iV&&Array.isArray(BL))return BL;var e=[];return j.Children.forEach(t,r=>{ru(r)||(pNe.isFragment(r)?e=e.concat(kte(r.props.children)):e.push(r))}),BL=e,iV=t,e};function wM(t,e){var r=[],n=[];return Array.isArray(e)?n=e.map(i=>nV(i)):n=[nV(e)],kte(t).forEach(i=>{var s=dy(i,"type.displayName")||dy(i,"type.name");s&&n.indexOf(s)!==-1&&r.push(i)}),r}var gNe=t=>t&&typeof t=="object"&&"clipDot"in t?!!t.clipDot:!0,PL={},sV;function vNe(){return sV||(sV=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const i=r[Symbol.toStringTag];return i==null||!Object.getOwnPropertyDescriptor(r,Symbol.toStringTag)?.writable?!1:r.toString()===`[object ${i}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}t.isPlainObject=e})(PL)),PL}var OL,aV;function yNe(){return aV||(aV=1,OL=vNe().isPlainObject),OL}var xNe=yNe();const bNe=eA(xNe);var oV,lV,cV,uV,dV;function hV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function fV(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?hV(Object(r),!0).forEach(function(n){wNe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):hV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function wNe(t,e,r){return(e=ENe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ENe(t){var e=_Ne(t,"string");return typeof e=="symbol"?e:e+""}function _Ne(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function bj(){return bj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},bj.apply(null,arguments)}function W1(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var AV=(t,e,r,n,i)=>{var s=r-n,o;return o=cc(oV||(oV=W1(["M ",",",""])),t,e),o+=cc(lV||(lV=W1(["L ",",",""])),t+r,e),o+=cc(cV||(cV=W1(["L ",",",""])),t+r-s/2,e+i),o+=cc(uV||(uV=W1(["L ",",",""])),t+r-s/2-n,e+i),o+=cc(dV||(dV=W1(["L ",","," Z"])),t,e),o},SNe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},TNe=t=>{var e=Uc(t,SNe),{x:r,y:n,upperWidth:i,lowerWidth:s,height:o,className:c}=e,{animationEasing:u,animationDuration:l,animationBegin:d,isUpdateAnimationActive:f}=e,A=j.useRef(null),[p,g]=j.useState(-1),y=j.useRef(i),x=j.useRef(s),w=j.useRef(o),E=j.useRef(r),T=j.useRef(n),C=M2(t,"trapezoid-");if(j.useEffect(()=>{if(A.current&&A.current.getTotalLength)try{var Ce=A.current.getTotalLength();Ce&&g(Ce)}catch{}},[]),r!==+r||n!==+n||i!==+i||s!==+s||o!==+o||i===0&&s===0||o===0)return null;var N=Sa("recharts-trapezoid",c);if(!f)return j.createElement("g",null,j.createElement("path",bj({},Hu(e),{className:N,d:AV(r,n,i,s,o)})));var I=y.current,U=x.current,K=w.current,Y=E.current,re=T.current,se="0px ".concat(p===-1?1:p,"px"),Ae="".concat(p,"px 0px"),we=qZ(["strokeDasharray"],l,u);return j.createElement(D2,{animationId:C,key:C,canBegin:p>0,duration:l,easing:u,isActive:f,begin:d},Ce=>{var ve=uc(I,i,Ce),ne=uc(U,s,Ce),ce=uc(K,o,Ce),ae=uc(Y,r,Ce),De=uc(re,n,Ce);A.current&&(y.current=ve,x.current=ne,w.current=ce,E.current=ae,T.current=De);var Oe=Ce>0?{transition:we,strokeDasharray:Ae}:{strokeDasharray:se};return j.createElement("path",bj({},Hu(e),{className:N,d:AV(ae,De,ve,ne,ce),ref:A,style:fV(fV({},Oe),e.style)}))})},CNe=["option","shapeType","activeClassName"];function jNe(t,e){if(t==null)return{};var r,n,i=NNe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function NNe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function mV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function wj(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?mV(Object(r),!0).forEach(function(n){kNe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function kNe(t,e,r){return(e=INe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function INe(t){var e=LNe(t,"string");return typeof e=="symbol"?e:e+""}function LNe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function BNe(t,e){return wj(wj({},e),t)}function PNe(t,e){return t==="symbols"}function pV(t){var{shapeType:e,elementProps:r}=t;switch(e){case"rectangle":return j.createElement(eJ,r);case"trapezoid":return j.createElement(TNe,r);case"sector":return j.createElement(iJ,r);case"symbols":if(PNe(e))return j.createElement(F3,r);break;case"curve":return j.createElement(iD,r);default:return null}}function ONe(t){return j.isValidElement(t)?t.props:t}function Ite(t){var{option:e,shapeType:r,activeClassName:n="recharts-active-shape"}=t,i=jNe(t,CNe),s;if(j.isValidElement(e))s=j.cloneElement(e,wj(wj({},i),ONe(e)));else if(typeof e=="function")s=e(i,i.index);else if(bNe(e)&&typeof e!="boolean"){var o=BNe(e,i);s=j.createElement(pV,{shapeType:r,elementProps:o})}else{var c=i;s=j.createElement(pV,{shapeType:r,elementProps:c})}return i.isActive?j.createElement(Fc,{className:n},s):s}var EM=(t,e,r)=>{var n=Al();return(i,s)=>o=>{t?.(i,s,o),n(Dee({activeIndex:String(s),activeDataKey:e,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:r}))}},_M=t=>{var e=Al();return(r,n)=>i=>{t?.(r,n,i),e(Z_e())}},SM=(t,e,r)=>{var n=Al();return(i,s)=>o=>{t?.(i,s,o),n(J_e({activeIndex:String(s),activeDataKey:e,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:r}))}};function TM(t){var{tooltipEntrySettings:e}=t,r=Al(),n=nh(),i=j.useRef(null);return j.useLayoutEffect(()=>{n||(i.current===null?r(W_e(e)):i.current!==e&&r(Y_e({prev:i.current,next:e})),i.current=e)},[e,r,n]),j.useLayoutEffect(()=>()=>{i.current&&(r(q_e(i.current)),i.current=null)},[r]),null}function RNe(t){var{legendPayload:e}=t,r=Al(),n=nh(),i=j.useRef(null);return j.useLayoutEffect(()=>{n||(i.current===null?r(zZ(e)):i.current!==e&&r(KZ({prev:i.current,next:e})),i.current=e)},[r,n,e]),j.useLayoutEffect(()=>()=>{i.current&&(r(GZ(i.current)),i.current=null)},[r]),null}function Lte(t){var{legendPayload:e}=t,r=Al(),n=si(Wa),i=j.useRef(null);return j.useLayoutEffect(()=>{n!=="centric"&&n!=="radial"||(i.current===null?r(zZ(e)):i.current!==e&&r(KZ({prev:i.current,next:e})),i.current=e)},[r,n,e]),j.useLayoutEffect(()=>()=>{i.current&&(r(GZ(i.current)),i.current=null)},[r]),null}var RL,DNe=()=>{var[t]=j.useState(()=>TE("uid-"));return t},MNe=(RL=nce.useId)!==null&&RL!==void 0?RL:DNe;function FNe(t,e){var r=MNe();return e||(t?"".concat(t,"-").concat(r):r)}var UNe=j.createContext(void 0),CM=t=>{var{id:e,type:r,children:n}=t,i=FNe("recharts-".concat(r),e);return j.createElement(UNe.Provider,{value:i},n(i))},$Ne={cartesianItems:[],polarItems:[]},Bte=Qh({name:"graphicalItems",initialState:$Ne,reducers:{addCartesianGraphicalItem:{reducer(t,e){t.cartesianItems.push(e.payload)},prepare:ql()},replaceCartesianGraphicalItem:{reducer(t,e){var{prev:r,next:n}=e.payload,i=OA(t).cartesianItems.indexOf(r);i>-1&&(t.cartesianItems[i]=n)},prepare:ql()},removeCartesianGraphicalItem:{reducer(t,e){var r=OA(t).cartesianItems.indexOf(e.payload);r>-1&&t.cartesianItems.splice(r,1)},prepare:ql()},addPolarGraphicalItem:{reducer(t,e){t.polarItems.push(e.payload)},prepare:ql()},removePolarGraphicalItem:{reducer(t,e){var r=OA(t).polarItems.indexOf(e.payload);r>-1&&t.polarItems.splice(r,1)},prepare:ql()}}}),{addCartesianGraphicalItem:HNe,replaceCartesianGraphicalItem:QNe,removeCartesianGraphicalItem:VNe,addPolarGraphicalItem:zNe,removePolarGraphicalItem:KNe}=Bte.actions,GNe=Bte.reducer,WNe=t=>{var e=Al(),r=j.useRef(null);return j.useLayoutEffect(()=>{r.current===null?e(HNe(t)):r.current!==t&&e(QNe({prev:r.current,next:t})),r.current=t},[e,t]),j.useLayoutEffect(()=>()=>{r.current&&(e(VNe(r.current)),r.current=null)},[e]),null},YNe=j.memo(WNe);function Pte(t){var e=Al();return j.useLayoutEffect(()=>(e(zNe(t)),()=>{e(KNe(t))}),[e,t]),null}var qNe=["key"],XNe=["onMouseEnter","onClick","onMouseLeave"],ZNe=["id"],JNe=["id"];function gV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Oc(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?gV(Object(r),!0).forEach(function(n){e5e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):gV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function e5e(t,e,r){return(e=t5e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function t5e(t){var e=r5e(t,"string");return typeof e=="symbol"?e:e+""}function r5e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function R0(){return R0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},R0.apply(null,arguments)}function S5(t,e){if(t==null)return{};var r,n,i=n5e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function n5e(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function i5e(t){var e=j.useMemo(()=>wM(t.children,Ub),[t.children]),r=si(n=>hNe(n,t.id,e));return r==null?null:j.createElement(Lte,{legendPayload:r})}var s5e=j.memo(t=>{var{dataKey:e,nameKey:r,sectors:n,stroke:i,strokeWidth:s,fill:o,name:c,hide:u,tooltipType:l,id:d}=t,f={dataDefinedOnItem:n.map(A=>A.tooltipPayload),getPosition:A=>{var p;return(p=n[Number(A)])===null||p===void 0?void 0:p.tooltipPosition},settings:{stroke:i,strokeWidth:s,fill:o,dataKey:e,nameKey:r,name:s1(c,e),hide:u,type:l,color:o,unit:"",graphicalItemId:d}};return j.createElement(TM,{tooltipEntrySettings:f})}),a5e=(t,e)=>t>e?"start":t<e?"end":"middle",o5e=(t,e,r)=>rh(typeof e=="function"?e(t):e,r,r*.8),l5e=(t,e,r)=>{var{top:n,left:i,width:s,height:o}=e,c=tJ(s,o),u=i+rh(t.cx,s,s/2),l=n+rh(t.cy,o,o/2),d=rh(t.innerRadius,c,0),f=o5e(r,t.outerRadius,c),A=t.maxRadius||Math.sqrt(s*s+o*o)/2;return{cx:u,cy:l,innerRadius:d,outerRadius:f,maxRadius:A}},c5e=(t,e)=>{var r=Ad(e-t),n=Math.min(Math.abs(e-t),360);return r*n},u5e=(t,e)=>{if(j.isValidElement(t))return j.cloneElement(t,e);if(typeof t=="function")return t(e);var r=Sa("recharts-pie-label-line",typeof t!="boolean"?t.className:""),{key:n}=e,i=S5(e,qNe);return j.createElement(iD,R0({},i,{type:"linear",className:r}))},d5e=(t,e,r)=>{if(j.isValidElement(t))return j.cloneElement(t,e);var n=r;if(typeof t=="function"&&(n=t(e),j.isValidElement(n)))return n;var i=Sa("recharts-pie-label-text",yM(t));return j.createElement(t_,R0({},e,{alignmentBaseline:"middle",className:i}),n)};function h5e(t){var{sectors:e,props:r,showLabels:n}=t,{label:i,labelLine:s,dataKey:o}=r;if(!n||!i||!e)return null;var c=yu(r),u=cy(i),l=cy(s),d=typeof i=="object"&&"offsetRadius"in i&&typeof i.offsetRadius=="number"&&i.offsetRadius||20,f=e.map((A,p)=>{var g=(A.startAngle+A.endAngle)/2,y=rl(A.cx,A.cy,A.outerRadius+d,g),x=Oc(Oc(Oc(Oc({},c),A),{},{stroke:"none"},u),{},{index:p,textAnchor:a5e(y.x,A.cx)},y),w=Oc(Oc(Oc(Oc({},c),A),{},{fill:"none",stroke:A.fill},l),{},{index:p,points:[rl(A.cx,A.cy,A.outerRadius,g),y],key:"line"});return j.createElement(ih,{zIndex:Rc.label,key:"label-".concat(A.startAngle,"-").concat(A.endAngle,"-").concat(A.midAngle,"-").concat(p)},j.createElement(Fc,null,s&&u5e(s,w),d5e(i,x,dl(A,o))))});return j.createElement(Fc,{className:"recharts-pie-labels"},f)}function f5e(t){var{sectors:e,props:r,showLabels:n}=t,{label:i}=r;return typeof i=="object"&&i!=null&&"position"in i?j.createElement(AM,{label:i}):j.createElement(h5e,{sectors:e,props:r,showLabels:n})}function A5e(t){var{sectors:e,activeShape:r,inactiveShape:n,allOtherPieProps:i,shape:s,id:o}=t,c=si(O0),u=si(oM),l=si(MSe),{onMouseEnter:d,onClick:f,onMouseLeave:A}=i,p=S5(i,XNe),g=EM(d,i.dataKey,o),y=_M(A),x=SM(f,i.dataKey,o);return e==null||e.length===0?null:j.createElement(j.Fragment,null,e.map((w,E)=>{if(w?.startAngle===0&&w?.endAngle===0&&e.length!==1)return null;var T=l==null||l===o,C=String(E)===c&&(u==null||i.dataKey===u)&&T,N=c?n:null,I=r&&C?r:N,U=Oc(Oc({},w),{},{stroke:w.stroke,tabIndex:-1,[IZ]:E,[LZ]:o});return j.createElement(Fc,R0({key:"sector-".concat(w?.startAngle,"-").concat(w?.endAngle,"-").concat(w.midAngle,"-").concat(E),tabIndex:-1,className:"recharts-pie-sector"},i1(p,w,E),{onMouseEnter:g(w,E),onMouseLeave:y(w,E),onClick:x(w,E)}),j.createElement(Ite,R0({option:s??I,index:E,shapeType:"sector",isActive:C},U)))}))}function m5e(t){var e,{pieSettings:r,displayedData:n,cells:i,offset:s}=t,{cornerRadius:o,startAngle:c,endAngle:u,dataKey:l,nameKey:d,tooltipType:f}=r,A=Math.abs(r.minAngle),p=c5e(c,u),g=Math.abs(p),y=n.length<=1?0:(e=r.paddingAngle)!==null&&e!==void 0?e:0,x=n.filter(I=>dl(I,l,0)!==0).length,w=(g>=360?x:x-1)*y,E=g-x*A-w,T=n.reduce((I,U)=>{var K=dl(U,l,0);return I+(Ei(K)?K:0)},0),C;if(T>0){var N;C=n.map((I,U)=>{var K=dl(I,l,0),Y=dl(I,d,U),re=l5e(r,s,I),se=(Ei(K)?K:0)/T,Ae,we=Oc(Oc({},I),i&&i[U]&&i[U].props);U?Ae=N.endAngle+Ad(p)*y*(K!==0?1:0):Ae=c;var Ce=Ae+Ad(p)*((K!==0?A:0)+se*E),ve=(Ae+Ce)/2,ne=(re.innerRadius+re.outerRadius)/2,ce=[{name:Y,value:K,payload:we,dataKey:l,type:f,graphicalItemId:r.id}],ae=rl(re.cx,re.cy,ne,ve);return N=Oc(Oc(Oc(Oc({},r.presentationProps),{},{percent:se,cornerRadius:typeof o=="string"?parseFloat(o):o,name:Y,tooltipPayload:ce,midAngle:ve,middleRadius:ne,tooltipPosition:ae},we),re),{},{value:K,dataKey:l,startAngle:Ae,endAngle:Ce,payload:we,paddingAngle:Ad(p)*y}),N})}return C}function p5e(t){var{showLabels:e,sectors:r,children:n}=t,i=j.useMemo(()=>!e||!r?[]:r.map(s=>({value:s.value,payload:s.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:s.cx,cy:s.cy,innerRadius:s.innerRadius,outerRadius:s.outerRadius,startAngle:s.startAngle,endAngle:s.endAngle,clockWise:!1},fill:s.fill})),[r,e]);return j.createElement(dje,{value:e?i:void 0},n)}function g5e(t){var{props:e,previousSectorsRef:r,id:n}=t,{sectors:i,isAnimationActive:s,animationBegin:o,animationDuration:c,animationEasing:u,activeShape:l,inactiveShape:d,onAnimationStart:f,onAnimationEnd:A}=e,p=M2(e,"recharts-pie-"),g=r.current,[y,x]=j.useState(!1),w=j.useCallback(()=>{typeof A=="function"&&A(),x(!1)},[A]),E=j.useCallback(()=>{typeof f=="function"&&f(),x(!0)},[f]);return j.createElement(p5e,{showLabels:!y,sectors:i},j.createElement(D2,{animationId:p,begin:o,duration:c,isActive:s,easing:u,onAnimationStart:E,onAnimationEnd:w,key:p},T=>{var C,N=[],I=i&&i[0],U=(C=I?.startAngle)!==null&&C!==void 0?C:0;return i?.forEach((K,Y)=>{var re=g&&g[Y],se=Y>0?dy(K,"paddingAngle",0):0;if(re){var Ae=uc(re.endAngle-re.startAngle,K.endAngle-K.startAngle,T),we=Oc(Oc({},K),{},{startAngle:U+se,endAngle:U+Ae+se});N.push(we),U=we.endAngle}else{var{endAngle:Ce,startAngle:ve}=K,ne=uc(0,Ce-ve,T),ce=Oc(Oc({},K),{},{startAngle:U+se,endAngle:U+ne+se});N.push(ce),U=ce.endAngle}}),r.current=N,j.createElement(Fc,null,j.createElement(A5e,{sectors:N,activeShape:l,inactiveShape:d,allOtherPieProps:e,shape:e.shape,id:n}))}),j.createElement(f5e,{showLabels:!y,sectors:i,props:e}),e.children)}var v5e={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:Rc.area};function y5e(t){var{id:e}=t,r=S5(t,ZNe),{hide:n,className:i,rootTabIndex:s}=t,o=j.useMemo(()=>wM(t.children,Ub),[t.children]),c=si(d=>fNe(d,e,o)),u=j.useRef(null),l=Sa("recharts-pie",i);return n||c==null?(u.current=null,j.createElement(Fc,{tabIndex:s,className:l})):j.createElement(ih,{zIndex:t.zIndex},j.createElement(s5e,{dataKey:t.dataKey,nameKey:t.nameKey,sectors:c,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,tooltipType:t.tooltipType,id:e}),j.createElement(Fc,{tabIndex:s,className:l},j.createElement(g5e,{props:Oc(Oc({},r),{},{sectors:c}),previousSectorsRef:u,id:e})))}function Ote(t){var e=Uc(t,v5e),{id:r}=e,n=S5(e,JNe),i=yu(n);return j.createElement(CM,{id:r,type:"pie"},s=>j.createElement(j.Fragment,null,j.createElement(Pte,{type:"pie",id:s,data:n.data,dataKey:n.dataKey,hide:n.hide,angleAxisId:0,radiusAxisId:0,name:n.name,nameKey:n.nameKey,tooltipType:n.tooltipType,legendType:n.legendType,fill:n.fill,cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,paddingAngle:n.paddingAngle,minAngle:n.minAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,cornerRadius:n.cornerRadius,presentationProps:i,maxRadius:e.maxRadius}),j.createElement(i5e,R0({},n,{id:s})),j.createElement(y5e,R0({},n,{id:s}))))}Ote.displayName="Pie";var x5e=["points"];function vV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function DL(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?vV(Object(r),!0).forEach(function(n){b5e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):vV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function b5e(t,e,r){return(e=w5e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function w5e(t){var e=E5e(t,"string");return typeof e=="symbol"?e:e+""}function E5e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ej(){return Ej=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ej.apply(null,arguments)}function _5e(t,e){if(t==null)return{};var r,n,i=S5e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function S5e(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function T5e(t){var{option:e,dotProps:r,className:n}=t;if(j.isValidElement(e))return j.cloneElement(e,r);if(typeof e=="function")return e(r);var i=Sa(n,typeof e!="boolean"?e.className:""),s=r??{},{points:o}=s,c=_5e(s,x5e);return j.createElement(mM,Ej({},c,{className:i}))}function C5e(t,e){return t==null?!1:e?!0:t.length===1}function j5e(t){var{points:e,dot:r,className:n,dotClassName:i,dataKey:s,baseProps:o,needClip:c,clipPathId:u,zIndex:l=Rc.scatter}=t;if(!C5e(e,r))return null;var d=gNe(r),f=t0e(r),A=e.map((g,y)=>{var x,w,E=DL(DL(DL({r:3},o),f),{},{index:y,cx:(x=g.x)!==null&&x!==void 0?x:void 0,cy:(w=g.y)!==null&&w!==void 0?w:void 0,dataKey:s,value:g.value,payload:g.payload,points:e});return j.createElement(T5e,{key:"dot-".concat(y),option:r,dotProps:E,className:i})}),p={};return c&&u!=null&&(p.clipPath="url(#clipPath-".concat(d?"":"dots-").concat(u,")")),j.createElement(ih,{zIndex:l},j.createElement(Fc,Ej({className:n},p),A))}function yV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function xV(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?yV(Object(r),!0).forEach(function(n){N5e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):yV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function N5e(t,e,r){return(e=k5e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function k5e(t){var e=I5e(t,"string");return typeof e=="symbol"?e:e+""}function I5e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Rte=0,L5e={xAxis:{},yAxis:{},zAxis:{}},Dte=Qh({name:"cartesianAxis",initialState:L5e,reducers:{addXAxis:{reducer(t,e){t.xAxis[e.payload.id]=e.payload},prepare:ql()},replaceXAxis:{reducer(t,e){var{prev:r,next:n}=e.payload;t.xAxis[r.id]!==void 0&&(r.id!==n.id&&delete t.xAxis[r.id],t.xAxis[n.id]=n)},prepare:ql()},removeXAxis:{reducer(t,e){delete t.xAxis[e.payload.id]},prepare:ql()},addYAxis:{reducer(t,e){t.yAxis[e.payload.id]=e.payload},prepare:ql()},replaceYAxis:{reducer(t,e){var{prev:r,next:n}=e.payload;t.yAxis[r.id]!==void 0&&(r.id!==n.id&&delete t.yAxis[r.id],t.yAxis[n.id]=n)},prepare:ql()},removeYAxis:{reducer(t,e){delete t.yAxis[e.payload.id]},prepare:ql()},addZAxis:{reducer(t,e){t.zAxis[e.payload.id]=e.payload},prepare:ql()},replaceZAxis:{reducer(t,e){var{prev:r,next:n}=e.payload;t.zAxis[r.id]!==void 0&&(r.id!==n.id&&delete t.zAxis[r.id],t.zAxis[n.id]=n)},prepare:ql()},removeZAxis:{reducer(t,e){delete t.zAxis[e.payload.id]},prepare:ql()},updateYAxisWidth(t,e){var{id:r,width:n}=e.payload,i=t.yAxis[r];if(i){var s,o=i.widthHistory||[];if(o.length===3&&o[0]===o[2]&&n===o[1]&&n!==i.width&&Math.abs(n-((s=o[0])!==null&&s!==void 0?s:0))<=1)return;var c=[...o,n].slice(-3);t.yAxis[r]=xV(xV({},i),{},{width:n,widthHistory:c})}}}}),{addXAxis:B5e,replaceXAxis:P5e,removeXAxis:O5e,addYAxis:R5e,replaceYAxis:D5e,removeYAxis:M5e,addZAxis:Zqe,replaceZAxis:Jqe,removeZAxis:eXe,updateYAxisWidth:F5e}=Dte.actions,U5e=Dte.reducer,$5e=or([Vu],t=>({top:t.top,bottom:t.bottom,left:t.left,right:t.right})),H5e=or([$5e,sg,ag],(t,e,r)=>{if(!(!t||e==null||r==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,r-t.top-t.bottom)}}),Mte=()=>si(H5e),Q5e=()=>si(QSe);function bV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function ML(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?bV(Object(r),!0).forEach(function(n){V5e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):bV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function V5e(t,e,r){return(e=z5e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function z5e(t){var e=K5e(t,"string");return typeof e=="symbol"?e:e+""}function K5e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var G5e=t=>{var{point:e,childIndex:r,mainColor:n,activeDot:i,dataKey:s,clipPath:o}=t;if(i===!1||e.x==null||e.y==null)return null;var c={index:r,dataKey:s,cx:e.x,cy:e.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:e.payload,value:e.value},u=ML(ML(ML({},c),cy(i)),U3(i)),l;return j.isValidElement(i)?l=j.cloneElement(i,u):typeof i=="function"?l=i(u):l=j.createElement(mM,u),j.createElement(Fc,{className:"recharts-active-dot",clipPath:o},l)};function W5e(t){var{points:e,mainColor:r,activeDot:n,itemDataKey:i,clipPath:s,zIndex:o=Rc.activeDot}=t,c=si(O0),u=Q5e();if(e==null||u==null)return null;var l=e.find(d=>u.includes(d.payload));return ru(l)?null:j.createElement(ih,{zIndex:o},j.createElement(G5e,{point:l,childIndex:Number(c),mainColor:r,dataKey:i,activeDot:n,clipPath:s}))}function wV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function _j(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?wV(Object(r),!0).forEach(function(n){Y5e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Y5e(t,e,r){return(e=q5e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function q5e(t){var e=X5e(t,"string");return typeof e=="symbol"?e:e+""}function X5e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Fte=(t,e)=>r_(t,"radiusAxis",e),Z5e=or([Fte],t=>{if(t!=null)return{scale:t}}),J5e=or([K2,Fte],(t,e)=>{if(!(t==null||e==null))return _j(_j({},t),{},{scale:e})}),eke=(t,e,r,n)=>n_(t,"radiusAxis",e,n),Ute=(t,e,r)=>u1(t,r),$te=(t,e,r)=>r_(t,"angleAxis",r),tke=or([Ute,$te],(t,e)=>{if(!(t==null||e==null))return _j(_j({},t),{},{scale:e})}),rke=(t,e,r,n)=>n_(t,"angleAxis",r,n),nke=or([Ute,$te,G2],(t,e,r)=>{if(!(r==null||e==null))return{scale:e,type:t.type,dataKey:t.dataKey,cx:r.cx,cy:r.cy}}),ike=(t,e,r,n,i)=>i,ske=or([Wa,J5e,eke,tke,rke],(t,e,r,n,i)=>ig(t,"radiusAxis")?Lb(e,r,!1):Lb(n,i,!1)),ake=or([pM,ike],(t,e)=>{if(t!=null){var r=t.find(n=>n.type==="radar"&&e===n.id);return r?.dataKey}}),oke=or([Z5e,nke,Q2,ake,ske],(t,e,r,n,i)=>{var{chartData:s,dataStartIndex:o,dataEndIndex:c}=r;if(!(t==null||e==null||s==null||i==null||n==null)){var u=s.slice(o,c+1);return gke({radiusAxis:t,angleAxis:e,displayedData:u,dataKey:n,bandSize:i})}}),lke=["id"];function UE(){return UE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},UE.apply(null,arguments)}function EV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Fh(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?EV(Object(r),!0).forEach(function(n){cke(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):EV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function cke(t,e,r){return(e=uke(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function uke(t){var e=dke(t,"string");return typeof e=="symbol"?e:e+""}function dke(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function hke(t,e){if(t==null)return{};var r,n,i=fke(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function fke(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function jM(t,e){return t&&t!=="none"?t:e}var Ake=t=>{var{dataKey:e,name:r,stroke:n,fill:i,legendType:s,hide:o}=t;return[{inactive:o,dataKey:e,type:s,color:jM(n,i),value:s1(r,e),payload:t}]},mke=j.memo(t=>{var{dataKey:e,stroke:r,strokeWidth:n,fill:i,name:s,hide:o,tooltipType:c,id:u}=t,l={dataDefinedOnItem:void 0,getPosition:H0,settings:{stroke:r,strokeWidth:n,fill:i,nameKey:void 0,dataKey:e,name:s1(s,e),hide:o,type:c,color:jM(r,i),unit:"",graphicalItemId:u}};return j.createElement(TM,{tooltipEntrySettings:l})});function pke(t){var{points:e,props:r}=t,{dot:n,dataKey:i}=r,{id:s}=r,o=hke(r,lke),c=yu(o);return j.createElement(j5e,{points:e,dot:n,className:"recharts-radar-dots",dotClassName:"recharts-radar-dot",dataKey:i,baseProps:c})}function gke(t){var{radiusAxis:e,angleAxis:r,displayedData:n,dataKey:i,bandSize:s}=t,{cx:o,cy:c}=r,u=!1,l=[],d=r.type!=="number"?s??0:0;n.forEach((A,p)=>{var g,y,x=dl(A,r.dataKey,p),w=dl(A,i),E=((g=r.scale.map(x))!==null&&g!==void 0?g:0)+d,T=Array.isArray(w)?gte(w):w,C=ru(T)?0:(y=e.scale.map(T))!==null&&y!==void 0?y:0;Array.isArray(w)&&w.length>=2&&(u=!0),l.push(Fh(Fh({},rl(o,c,C,E)),{},{name:x,value:w,cx:o,cy:c,radius:C,angle:E,payload:A}))});var f=[];return u&&l.forEach(A=>{if(Array.isArray(A.value)){var p,g=A.value[0],y=ru(g)?0:(p=e.scale.map(g))!==null&&p!==void 0?p:0;f.push(Fh(Fh({},A),{},{radius:y},rl(o,c,y,A.angle)))}else f.push(A)}),{points:l,isRange:u,baseLinePoints:f}}function vke(t){var{showLabels:e,points:r,children:n}=t,i=r.map(s=>{var o,c={x:s.x,y:s.y,width:0,lowerWidth:0,upperWidth:0,height:0};return Fh(Fh({},c),{},{value:(o=s.value)!==null&&o!==void 0?o:"",payload:s.payload,parentViewBox:void 0,viewBox:c,fill:void 0})});return j.createElement(yte,{value:e?i:void 0},n)}function yke(t){var{points:e,baseLinePoints:r,props:n}=t;if(e==null)return null;var{shape:i,isRange:s,connectNulls:o}=n,c=d=>{var{onMouseEnter:f}=n;f&&f(n,d)},u=d=>{var{onMouseLeave:f}=n;f&&f(n,d)},l;return j.isValidElement(i)?l=j.cloneElement(i,Fh(Fh({},n),{},{points:e})):typeof i=="function"?l=i(Fh(Fh({},n),{},{points:e})):l=j.createElement(bte,UE({},Hu(n),{onMouseEnter:c,onMouseLeave:u,points:e,baseLinePoints:s?r:void 0,connectNulls:o})),j.createElement(Fc,{className:"recharts-radar-polygon"},l,j.createElement(pke,{props:n,points:e}))}var _V=(t,e,r)=>(n,i)=>{var s=t&&t[Math.floor(i*e)];return s?Fh(Fh({},n),{},{x:uc(s.x,n.x,r),y:uc(s.y,n.y,r)}):Fh(Fh({},n),{},{x:uc(n.cx,n.x,r),y:uc(n.cy,n.y,r)})};function xke(t){var{props:e,previousPointsRef:r,previousBaseLinePointsRef:n}=t,{points:i,baseLinePoints:s,isAnimationActive:o,animationBegin:c,animationDuration:u,animationEasing:l,onAnimationEnd:d,onAnimationStart:f}=e,A=r.current,p=n.current,g=A?A.length/i.length:1,y=p?p.length/s.length:1,x=M2(e,"recharts-radar-"),[w,E]=j.useState(!1),T=!w,C=j.useCallback(()=>{typeof d=="function"&&d(),E(!1)},[d]),N=j.useCallback(()=>{typeof f=="function"&&f(),E(!0)},[f]);return j.createElement(vke,{showLabels:T,points:i},j.createElement(D2,{animationId:x,begin:c,duration:u,isActive:o,easing:l,key:"radar-".concat(x),onAnimationEnd:C,onAnimationStart:N},I=>{var U=I===1?i:i.map(_V(A,g,I)),K=I===1?s:s?.map(_V(p,y,I));return I>0&&(r.current=U,n.current=K),j.createElement(yke,{points:U,baseLinePoints:K,props:e})}),j.createElement(AM,{label:e.label}),e.children)}function bke(t){var e=j.useRef(void 0),r=j.useRef(void 0);return j.createElement(xke,{props:t,previousPointsRef:e,previousBaseLinePointsRef:r})}var wke={activeDot:!0,angleAxisId:0,animationBegin:0,animationDuration:1500,animationEasing:"ease",dot:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",radiusAxisId:0,zIndex:Rc.area};function Eke(t){var{hide:e,className:r,points:n}=t;if(e)return null;var i=Sa("recharts-radar",r);return j.createElement(ih,{zIndex:t.zIndex},j.createElement(Fc,{className:i},j.createElement(bke,t)),j.createElement(W5e,{points:n,mainColor:jM(t.stroke,t.fill),itemDataKey:t.dataKey,activeDot:t.activeDot}))}function _ke(t){var e=nh(),r=si(n=>oke(n,t.radiusAxisId,t.angleAxisId,e,t.id));return r?.points==null?null:j.createElement(Eke,UE({},t,{points:r?.points,baseLinePoints:r?.baseLinePoints,isRange:r?.isRange}))}function Hte(t){var e=Uc(t,wke);return j.createElement(CM,{id:e.id,type:"radar"},r=>j.createElement(j.Fragment,null,j.createElement(Pte,{type:"radar",id:r,data:void 0,dataKey:e.dataKey,hide:e.hide,angleAxisId:e.angleAxisId,radiusAxisId:e.radiusAxisId}),j.createElement(Lte,{legendPayload:Ake(e)}),j.createElement(mke,{dataKey:e.dataKey,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,tooltipType:e.tooltipType,id:r}),j.createElement(_ke,UE({},e,{id:r}))))}Hte.displayName="Radar";var SV=(t,e,r)=>{var n=r??t;if(!ru(n))return rh(n,e,0)},Ske=(t,e,r)=>{var n={},i=t.filter(f5),s=t.filter(l=>l.stackId==null),o=i.reduce((l,d)=>{var f=l[d.stackId];return f==null&&(f=[]),f.push(d),l[d.stackId]=f,l},n),c=Object.entries(o).map(l=>{var d,[f,A]=l,p=A.map(y=>y.dataKey),g=SV(e,r,(d=A[0])===null||d===void 0?void 0:d.barSize);return{stackId:f,dataKeys:p,barSize:g}}),u=s.map(l=>{var d=[l.dataKey].filter(A=>A!=null),f=SV(e,r,l.barSize);return{stackId:void 0,dataKeys:d,barSize:f}});return[...c,...u]};function TV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function eS(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?TV(Object(r),!0).forEach(function(n){Tke(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):TV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Tke(t,e,r){return(e=Cke(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Cke(t){var e=jke(t,"string");return typeof e=="symbol"?e:e+""}function jke(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Nke(t,e,r,n,i){var s,o=n.length;if(!(o<1)){var c=rh(t,r,0,!0),u,l=[];if(Ha((s=n[0])===null||s===void 0?void 0:s.barSize)){var d=!1,f=r/o,A=n.reduce((E,T)=>E+(T.barSize||0),0);A+=(o-1)*c,A>=r&&(A-=(o-1)*c,c=0),A>=r&&f>0&&(d=!0,f*=.9,A=o*f);var p=(r-A)/2>>0,g={offset:p-c,size:0};u=n.reduce((E,T)=>{var C,N={stackId:T.stackId,dataKeys:T.dataKeys,position:{offset:g.offset+g.size+c,size:d?f:(C=T.barSize)!==null&&C!==void 0?C:0}},I=[...E,N];return g=N.position,I},l)}else{var y=rh(e,r,0,!0);r-2*y-(o-1)*c<=0&&(c=0);var x=(r-2*y-(o-1)*c)/o;x>1&&(x>>=0);var w=Ha(i)?Math.min(x,i):x;u=n.reduce((E,T,C)=>[...E,{stackId:T.stackId,dataKeys:T.dataKeys,position:{offset:y+(x+c)*C+(x-w)/2,size:w}}],l)}return u}}var kke=(t,e,r,n,i,s,o)=>{var c=ru(o)?e:o,u=Nke(r,n,i!==s?i:s,t,c);return i!==s&&u!=null&&(u=u.map(l=>eS(eS({},l),{},{position:eS(eS({},l.position),{},{offset:l.position.offset-i/2})}))),u},Ike=(t,e)=>{var r=PD(e);if(!(!t||r==null||e==null)){var{stackId:n}=e;if(n!=null){var i=t[n];if(i){var{stackedData:s}=i;if(s)return s.find(o=>o.key===r)}}}},Lke=(t,e)=>{if(!(t==null||e==null)){var r=t.find(n=>n.stackId===e.stackId&&e.dataKey!=null&&n.dataKeys.includes(e.dataKey));if(r!=null)return r.position}};function Bke(t,e){return t&&typeof t=="object"&&"zIndex"in t&&typeof t.zIndex=="number"&&Ha(t.zIndex)?t.zIndex:e}var Qte=t=>{var{chartData:e}=t,r=Al(),n=nh();return j.useEffect(()=>n?()=>{}:(r(wQ(e)),()=>{r(wQ(void 0))}),[e,r,n]),null},CV={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},Vte=Qh({name:"brush",initialState:CV,reducers:{setBrushSettings(t,e){return e.payload==null?CV:e.payload}}}),{setBrushSettings:tXe}=Vte.actions,Pke=Vte.reducer;function Oke(t){return(t%180+180)%180}var Rke=function(e){var{width:r,height:n}=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=Oke(i),o=s*Math.PI/180,c=Math.atan(n/r),u=o>c&&o<Math.PI-c?n/Math.sin(o):r/Math.cos(o);return Math.abs(u)},Dke={dots:[],areas:[],lines:[]},zte=Qh({name:"referenceElements",initialState:Dke,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var r=OA(t).dots.findIndex(n=>n===e.payload);r!==-1&&t.dots.splice(r,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var r=OA(t).areas.findIndex(n=>n===e.payload);r!==-1&&t.areas.splice(r,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var r=OA(t).lines.findIndex(n=>n===e.payload);r!==-1&&t.lines.splice(r,1)}}}),{addDot:rXe,removeDot:nXe,addArea:iXe,removeArea:sXe,addLine:aXe,removeLine:oXe}=zte.actions,Mke=zte.reducer,Fke=j.createContext(void 0),Uke=t=>{var{children:e}=t,[r]=j.useState("".concat(TE("recharts"),"-clip")),n=Mte();if(n==null)return null;var{x:i,y:s,width:o,height:c}=n;return j.createElement(Fke.Provider,{value:r},j.createElement("defs",null,j.createElement("clipPath",{id:r},j.createElement("rect",{x:i,y:s,height:c,width:o}))),e)};function Kte(t,e){if(e<1)return[];if(e===1)return t;for(var r=[],n=0;n<t.length;n+=e){var i=t[n];i!==void 0&&r.push(i)}return r}function $ke(t,e,r){var n={width:t.width+e.width,height:t.height+e.height};return Rke(n,r)}function Hke(t,e,r){var n=r==="width",{x:i,y:s,width:o,height:c}=t;return e===1?{start:n?i:s,end:n?i+o:s+c}:{start:n?i+o:s+c,end:n?i:s}}function $E(t,e,r,n,i){if(t*e<t*n||t*e>t*i)return!1;var s=r();return t*(e-t*s/2-n)>=0&&t*(e+t*s/2-i)<=0}function Qke(t,e){return Kte(t,e+1)}function Vke(t,e,r,n,i){for(var s=(n||[]).slice(),{start:o,end:c}=e,u=0,l=1,d=o,f=function(){var g=n?.[u];if(g===void 0)return{v:Kte(n,l)};var y=u,x,w=()=>(x===void 0&&(x=r(g,y)),x),E=g.coordinate,T=u===0||$E(t,E,w,d,c);T||(u=0,d=o,l+=1),T&&(d=E+t*(w()/2+i),u+=l)},A;l<=s.length;)if(A=f(),A)return A.v;return[]}function zke(t,e,r,n,i){var s=(n||[]).slice(),o=s.length;if(o===0)return[];for(var{start:c,end:u}=e,l=1;l<=o;l++){for(var d=(o-1)%l,f=c,A=!0,p=function(){var C=n[y];if(C==null)return 0;var N=y,I,U=()=>(I===void 0&&(I=r(C,N)),I),K=C.coordinate,Y=y===d||$E(t,K,U,f,u);if(!Y)return A=!1,1;Y&&(f=K+t*(U()/2+i))},g,y=d;y<o&&(g=p(),!(g!==0&&g===1));y+=l);if(A){for(var x=[],w=d;w<o;w+=l){var E=n[w];E!=null&&x.push(E)}return x}}return[]}function jV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Zd(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?jV(Object(r),!0).forEach(function(n){Kke(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):jV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Kke(t,e,r){return(e=Gke(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Gke(t){var e=Wke(t,"string");return typeof e=="symbol"?e:e+""}function Wke(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Yke(t,e,r,n,i){for(var s=(n||[]).slice(),o=s.length,{start:c}=e,{end:u}=e,l=function(A){var p=s[A];if(p==null)return 1;var g=p,y,x=()=>(y===void 0&&(y=r(p,A)),y);if(A===o-1){var w=t*(g.coordinate+t*x()/2-u);s[A]=g=Zd(Zd({},g),{},{tickCoord:w>0?g.coordinate-w*t:g.coordinate})}else s[A]=g=Zd(Zd({},g),{},{tickCoord:g.coordinate});if(g.tickCoord!=null){var E=$E(t,g.tickCoord,x,c,u);E&&(u=g.tickCoord-t*(x()/2+i),s[A]=Zd(Zd({},g),{},{isShow:!0}))}},d=o-1;d>=0;d--)l(d);return s}function qke(t,e,r,n,i,s){var o=(n||[]).slice(),c=o.length,{start:u,end:l}=e;if(s){var d=n[c-1];if(d!=null){var f=r(d,c-1),A=t*(d.coordinate+t*f/2-l);if(o[c-1]=d=Zd(Zd({},d),{},{tickCoord:A>0?d.coordinate-A*t:d.coordinate}),d.tickCoord!=null){var p=$E(t,d.tickCoord,()=>f,u,l);p&&(l=d.tickCoord-t*(f/2+i),o[c-1]=Zd(Zd({},d),{},{isShow:!0}))}}}for(var g=s?c-1:c,y=function(E){var T=o[E];if(T==null)return 1;var C=T,N,I=()=>(N===void 0&&(N=r(T,E)),N);if(E===0){var U=t*(C.coordinate-t*I()/2-u);o[E]=C=Zd(Zd({},C),{},{tickCoord:U<0?C.coordinate-U*t:C.coordinate})}else o[E]=C=Zd(Zd({},C),{},{tickCoord:C.coordinate});if(C.tickCoord!=null){var K=$E(t,C.tickCoord,I,u,l);K&&(u=C.tickCoord+t*(I()/2+i),o[E]=Zd(Zd({},C),{},{isShow:!0}))}},x=0;x<g;x++)y(x);return o}function NM(t,e,r){var{tick:n,ticks:i,viewBox:s,minTickGap:o,orientation:c,interval:u,tickFormatter:l,unit:d,angle:f}=t;if(!i||!i.length||!n)return[];if(Ei(u)||i5.isSsr){var A;return(A=Qke(i,Ei(u)?u:0))!==null&&A!==void 0?A:[]}var p=[],g=c==="top"||c==="bottom"?"width":"height",y=d&&g==="width"?Yw(d,{fontSize:e,letterSpacing:r}):{width:0,height:0},x=(N,I)=>{var U=typeof l=="function"?l(N.value,I):N.value;return g==="width"?$ke(Yw(U,{fontSize:e,letterSpacing:r}),y,f):Yw(U,{fontSize:e,letterSpacing:r})[g]},w=i[0],E=i[1],T=i.length>=2&&w!=null&&E!=null?Ad(E.coordinate-w.coordinate):1,C=Hke(s,T,g);return u==="equidistantPreserveStart"?Vke(T,C,x,i,o):u==="equidistantPreserveEnd"?zke(T,C,x,i,o):(u==="preserveStart"||u==="preserveStartEnd"?p=qke(T,C,x,i,o,u==="preserveStartEnd"):p=Yke(T,C,x,i,o),p.filter(N=>N.isShow))}var Xke=t=>{var{ticks:e,label:r,labelGapWithTick:n=5,tickSize:i=0,tickMargin:s=0}=t,o=0;if(e){Array.from(e).forEach(d=>{if(d){var f=d.getBoundingClientRect();f.width>o&&(o=f.width)}});var c=r?r.getBoundingClientRect().width:0,u=i+s,l=o+u+c+(r?n:0);return Math.round(l)}return 0},Zke=["axisLine","width","height","className","hide","ticks","axisType"];function Jke(t,e){if(t==null)return{};var r,n,i=eIe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function eIe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function vy(){return vy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},vy.apply(null,arguments)}function NV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function kc(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?NV(Object(r),!0).forEach(function(n){tIe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):NV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function tIe(t,e,r){return(e=rIe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function rIe(t){var e=nIe(t,"string");return typeof e=="symbol"?e:e+""}function nIe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var $p={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:Rc.axis};function iIe(t){var{x:e,y:r,width:n,height:i,orientation:s,mirror:o,axisLine:c,otherSvgProps:u}=t;if(!c)return null;var l=kc(kc(kc({},u),yu(c)),{},{fill:"none"});if(s==="top"||s==="bottom"){var d=+(s==="top"&&!o||s==="bottom"&&o);l=kc(kc({},l),{},{x1:e,y1:r+d*i,x2:e+n,y2:r+d*i})}else{var f=+(s==="left"&&!o||s==="right"&&o);l=kc(kc({},l),{},{x1:e+f*n,y1:r,x2:e+f*n,y2:r+i})}return j.createElement("line",vy({},l,{className:Sa("recharts-cartesian-axis-line",dy(c,"className"))}))}function sIe(t,e,r,n,i,s,o,c,u){var l,d,f,A,p,g,y=c?-1:1,x=t.tickSize||o,w=Ei(t.tickCoord)?t.tickCoord:t.coordinate;switch(s){case"top":l=d=t.coordinate,A=r+ +!c*i,f=A-y*x,g=f-y*u,p=w;break;case"left":f=A=t.coordinate,d=e+ +!c*n,l=d-y*x,p=l-y*u,g=w;break;case"right":f=A=t.coordinate,d=e+ +c*n,l=d+y*x,p=l+y*u,g=w;break;default:l=d=t.coordinate,A=r+ +c*i,f=A+y*x,g=f+y*u,p=w;break}return{line:{x1:l,y1:f,x2:d,y2:A},tick:{x:p,y:g}}}function aIe(t,e){switch(t){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function oIe(t,e){switch(t){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function lIe(t){var{option:e,tickProps:r,value:n}=t,i,s=Sa(r.className,"recharts-cartesian-axis-tick-value");if(j.isValidElement(e))i=j.cloneElement(e,kc(kc({},r),{},{className:s}));else if(typeof e=="function")i=e(kc(kc({},r),{},{className:s}));else{var o="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(o=Sa(o,yM(e))),i=j.createElement(t_,vy({},r,{className:o}),n)}return i}var cIe=j.forwardRef((t,e)=>{var{ticks:r=[],tick:n,tickLine:i,stroke:s,tickFormatter:o,unit:c,padding:u,tickTextProps:l,orientation:d,mirror:f,x:A,y:p,width:g,height:y,tickSize:x,tickMargin:w,fontSize:E,letterSpacing:T,getTicksConfig:C,events:N,axisType:I}=t,U=NM(kc(kc({},C),{},{ticks:r}),E,T),K=aIe(d,f),Y=oIe(d,f),re=yu(C),se=cy(n),Ae={};typeof i=="object"&&(Ae=i);var we=kc(kc({},re),{},{fill:"none"},Ae),Ce=U.map(ce=>kc({entry:ce},sIe(ce,A,p,g,y,d,x,f,w))),ve=Ce.map(ce=>{var{entry:ae,line:De}=ce;return j.createElement(Fc,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(ae.value,"-").concat(ae.coordinate,"-").concat(ae.tickCoord)},i&&j.createElement("line",vy({},we,De,{className:Sa("recharts-cartesian-axis-tick-line",dy(i,"className"))})))}),ne=Ce.map((ce,ae)=>{var De,Oe,{entry:be,tick:de}=ce,xe=kc(kc(kc(kc({verticalAnchor:Y},re),{},{textAnchor:K,stroke:"none",fill:s},de),{},{index:ae,payload:be,visibleTicksCount:U.length,tickFormatter:o,padding:u},l),{},{angle:(De=(Oe=l?.angle)!==null&&Oe!==void 0?Oe:re.angle)!==null&&De!==void 0?De:0}),je=kc(kc({},xe),se);return j.createElement(Fc,vy({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(be.value,"-").concat(be.coordinate,"-").concat(be.tickCoord)},i1(N,be,ae)),n&&j.createElement(lIe,{option:n,tickProps:je,value:"".concat(typeof o=="function"?o(be.value,ae):be.value).concat(c||"")}))});return j.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(I,"-ticks")},ne.length>0&&j.createElement(ih,{zIndex:Rc.label},j.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(I,"-tick-labels"),ref:e},ne)),ve.length>0&&j.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(I,"-tick-lines")},ve))}),uIe=j.forwardRef((t,e)=>{var{axisLine:r,width:n,height:i,className:s,hide:o,ticks:c,axisType:u}=t,l=Jke(t,Zke),[d,f]=j.useState(""),[A,p]=j.useState(""),g=j.useRef(null);j.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var x;return Xke({ticks:g.current,label:(x=t.labelRef)===null||x===void 0?void 0:x.current,labelGapWithTick:5,tickSize:t.tickSize,tickMargin:t.tickMargin})}}));var y=j.useCallback(x=>{if(x){var w=x.getElementsByClassName("recharts-cartesian-axis-tick-value");g.current=w;var E=w[0];if(E){var T=window.getComputedStyle(E),C=T.fontSize,N=T.letterSpacing;(C!==d||N!==A)&&(f(C),p(N))}}},[d,A]);return o||n!=null&&n<=0||i!=null&&i<=0?null:j.createElement(ih,{zIndex:t.zIndex},j.createElement(Fc,{className:Sa("recharts-cartesian-axis",s)},j.createElement(iIe,{x:t.x,y:t.y,width:n,height:i,orientation:t.orientation,mirror:t.mirror,axisLine:r,otherSvgProps:yu(t)}),j.createElement(cIe,{ref:y,axisType:u,events:l,fontSize:d,getTicksConfig:t,height:t.height,letterSpacing:A,mirror:t.mirror,orientation:t.orientation,padding:t.padding,stroke:t.stroke,tick:t.tick,tickFormatter:t.tickFormatter,tickLine:t.tickLine,tickMargin:t.tickMargin,tickSize:t.tickSize,tickTextProps:t.tickTextProps,ticks:c,unit:t.unit,width:t.width,x:t.x,y:t.y}),j.createElement(zCe,{x:t.x,y:t.y,width:t.width,height:t.height,lowerWidth:t.width,upperWidth:t.width},j.createElement(tje,{label:t.label,labelRef:t.labelRef}),t.children)))}),kM=j.forwardRef((t,e)=>{var r=Uc(t,$p);return j.createElement(uIe,vy({},r,{ref:e}))});kM.displayName="CartesianAxis";var dIe=["x1","y1","x2","y2","key"],hIe=["offset"],fIe=["xAxisId","yAxisId"],AIe=["xAxisId","yAxisId"];function kV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function eh(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?kV(Object(r),!0).forEach(function(n){mIe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):kV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function mIe(t,e,r){return(e=pIe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function pIe(t){var e=gIe(t,"string");return typeof e=="symbol"?e:e+""}function gIe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Fv(){return Fv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Fv.apply(null,arguments)}function Sj(t,e){if(t==null)return{};var r,n,i=vIe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function vIe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var yIe=t=>{var{fill:e}=t;if(!e||e==="none")return null;var{fillOpacity:r,x:n,y:i,width:s,height:o,ry:c}=t;return j.createElement("rect",{x:n,y:i,ry:c,width:s,height:o,stroke:"none",fill:e,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function Gte(t){var{option:e,lineItemProps:r}=t,n;if(j.isValidElement(e))n=j.cloneElement(e,r);else if(typeof e=="function")n=e(r);else{var i,{x1:s,y1:o,x2:c,y2:u,key:l}=r,d=Sj(r,dIe),f=(i=yu(d))!==null&&i!==void 0?i:{},{offset:A}=f,p=Sj(f,hIe);n=j.createElement("line",Fv({},p,{x1:s,y1:o,x2:c,y2:u,fill:"none",key:l}))}return n}function xIe(t){var{x:e,width:r,horizontal:n=!0,horizontalPoints:i}=t;if(!n||!i||!i.length)return null;var{xAxisId:s,yAxisId:o}=t,c=Sj(t,fIe),u=i.map((l,d)=>{var f=eh(eh({},c),{},{x1:e,y1:l,x2:e+r,y2:l,key:"line-".concat(d),index:d});return j.createElement(Gte,{key:"line-".concat(d),option:n,lineItemProps:f})});return j.createElement("g",{className:"recharts-cartesian-grid-horizontal"},u)}function bIe(t){var{y:e,height:r,vertical:n=!0,verticalPoints:i}=t;if(!n||!i||!i.length)return null;var{xAxisId:s,yAxisId:o}=t,c=Sj(t,AIe),u=i.map((l,d)=>{var f=eh(eh({},c),{},{x1:l,y1:e,x2:l,y2:e+r,key:"line-".concat(d),index:d});return j.createElement(Gte,{option:n,lineItemProps:f,key:"line-".concat(d)})});return j.createElement("g",{className:"recharts-cartesian-grid-vertical"},u)}function wIe(t){var{horizontalFill:e,fillOpacity:r,x:n,y:i,width:s,height:o,horizontalPoints:c,horizontal:u=!0}=t;if(!u||!e||!e.length||c==null)return null;var l=c.map(f=>Math.round(f+i-i)).sort((f,A)=>f-A);i!==l[0]&&l.unshift(0);var d=l.map((f,A)=>{var p=l[A+1],g=p==null,y=g?i+o-f:p-f;if(y<=0)return null;var x=A%e.length;return j.createElement("rect",{key:"react-".concat(A),y:f,x:n,height:y,width:s,stroke:"none",fill:e[x],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return j.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function EIe(t){var{vertical:e=!0,verticalFill:r,fillOpacity:n,x:i,y:s,width:o,height:c,verticalPoints:u}=t;if(!e||!r||!r.length)return null;var l=u.map(f=>Math.round(f+i-i)).sort((f,A)=>f-A);i!==l[0]&&l.unshift(0);var d=l.map((f,A)=>{var p=l[A+1],g=p==null,y=g?i+o-f:p-f;if(y<=0)return null;var x=A%r.length;return j.createElement("rect",{key:"react-".concat(A),x:f,y:s,width:y,height:c,stroke:"none",fill:r[x],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return j.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var _Ie=(t,e)=>{var{xAxis:r,width:n,height:i,offset:s}=t;return jZ(NM(eh(eh(eh({},$p),r),{},{ticks:NZ(r),viewBox:{x:0,y:0,width:n,height:i}})),s.left,s.left+s.width,e)},SIe=(t,e)=>{var{yAxis:r,width:n,height:i,offset:s}=t;return jZ(NM(eh(eh(eh({},$p),r),{},{ticks:NZ(r),viewBox:{x:0,y:0,width:n,height:i}})),s.top,s.top+s.height,e)},TIe={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:Rc.grid};function Wte(t){var e=J3(),r=eD(),n=RZ(),i=eh(eh({},Uc(t,TIe)),{},{x:Ei(t.x)?t.x:n.left,y:Ei(t.y)?t.y:n.top,width:Ei(t.width)?t.width:n.width,height:Ei(t.height)?t.height:n.height}),{xAxisId:s,yAxisId:o,x:c,y:u,width:l,height:d,syncWithTicks:f,horizontalValues:A,verticalValues:p}=i,g=nh(),y=si(Y=>uQ(Y,"xAxis",s,g)),x=si(Y=>uQ(Y,"yAxis",o,g));if(!Gm(l)||!Gm(d)||!Ei(c)||!Ei(u))return null;var w=i.verticalCoordinatesGenerator||_Ie,E=i.horizontalCoordinatesGenerator||SIe,{horizontalPoints:T,verticalPoints:C}=i;if((!T||!T.length)&&typeof E=="function"){var N=A&&A.length,I=E({yAxis:x?eh(eh({},x),{},{ticks:N?A:x.ticks}):void 0,width:e??l,height:r??d,offset:n},N?!0:f);WC(Array.isArray(I),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof I,"]")),Array.isArray(I)&&(T=I)}if((!C||!C.length)&&typeof w=="function"){var U=p&&p.length,K=w({xAxis:y?eh(eh({},y),{},{ticks:U?p:y.ticks}):void 0,width:e??l,height:r??d,offset:n},U?!0:f);WC(Array.isArray(K),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof K,"]")),Array.isArray(K)&&(C=K)}return j.createElement(ih,{zIndex:i.zIndex},j.createElement("g",{className:"recharts-cartesian-grid"},j.createElement(yIe,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),j.createElement(wIe,Fv({},i,{horizontalPoints:T})),j.createElement(EIe,Fv({},i,{verticalPoints:C})),j.createElement(xIe,Fv({},i,{offset:n,horizontalPoints:T,xAxis:y,yAxis:x})),j.createElement(bIe,Fv({},i,{offset:n,verticalPoints:C,xAxis:y,yAxis:x}))))}Wte.displayName="CartesianGrid";var CIe={},Yte=Qh({name:"errorBars",initialState:CIe,reducers:{addErrorBar:(t,e)=>{var{itemId:r,errorBar:n}=e.payload;t[r]||(t[r]=[]),t[r].push(n)},replaceErrorBar:(t,e)=>{var{itemId:r,prev:n,next:i}=e.payload;t[r]&&(t[r]=t[r].map(s=>s.dataKey===n.dataKey&&s.direction===n.direction?i:s))},removeErrorBar:(t,e)=>{var{itemId:r,errorBar:n}=e.payload;t[r]&&(t[r]=t[r].filter(i=>i.dataKey!==n.dataKey||i.direction!==n.direction))}}}),{addErrorBar:lXe,replaceErrorBar:cXe,removeErrorBar:uXe}=Yte.actions,jIe=Yte.reducer,NIe=["children"];function kIe(t,e){if(t==null)return{};var r,n,i=IIe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function IIe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var LIe={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},BIe=j.createContext(LIe);function PIe(t){var{children:e}=t,r=kIe(t,NIe);return j.createElement(BIe.Provider,{value:r},e)}function qte(t,e){var r,n,i=si(l=>cg(l,t)),s=si(l=>ug(l,e)),o=(r=i?.allowDataOverflow)!==null&&r!==void 0?r:ld.allowDataOverflow,c=(n=s?.allowDataOverflow)!==null&&n!==void 0?n:cd.allowDataOverflow,u=o||c;return{needClip:u,needClipX:o,needClipY:c}}function OIe(t){var{xAxisId:e,yAxisId:r,clipPathId:n}=t,i=Mte(),{needClipX:s,needClipY:o,needClip:c}=qte(e,r);if(!c||!i)return null;var{x:u,y:l,width:d,height:f}=i;return j.createElement("clipPath",{id:"clipPath-".concat(n)},j.createElement("rect",{x:s?u:u-d/2,y:o?l:l-f/2,width:s?d:d*2,height:o?f:f*2}))}var FL={exports:{}},UL={};var IV;function RIe(){if(IV)return UL;IV=1;var t=qb();function e(u,l){return u===l&&(u!==0||1/u===1/l)||u!==u&&l!==l}var r=typeof Object.is=="function"?Object.is:e,n=t.useSyncExternalStore,i=t.useRef,s=t.useEffect,o=t.useMemo,c=t.useDebugValue;return UL.useSyncExternalStoreWithSelector=function(u,l,d,f,A){var p=i(null);if(p.current===null){var g={hasValue:!1,value:null};p.current=g}else g=p.current;p=o(function(){function x(N){if(!w){if(w=!0,E=N,N=f(N),A!==void 0&&g.hasValue){var I=g.value;if(A(I,N))return T=I}return T=N}if(I=T,r(E,N))return I;var U=f(N);return A!==void 0&&A(I,U)?(E=N,I):(E=N,T=U)}var w=!1,E,T,C=d===void 0?null:d;return[function(){return x(l())},C===null?void 0:function(){return x(C())}]},[l,d,f,A]);var y=n(u,p[0],p[1]);return s(function(){g.hasValue=!0,g.value=y},[y]),c(y),y},UL}var LV;function DIe(){return LV||(LV=1,FL.exports=RIe()),FL.exports}DIe();function MIe(t){t()}function FIe(){let t=null,e=null;return{clear(){t=null,e=null},notify(){MIe(()=>{let r=t;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=t;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const i=e={callback:r,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!n||t===null||(n=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var BV={notify(){},get:()=>[]};function UIe(t,e){let r,n=BV,i=0,s=!1;function o(y){d();const x=n.subscribe(y);let w=!1;return()=>{w||(w=!0,x(),f())}}function c(){n.notify()}function u(){g.onStateChange&&g.onStateChange()}function l(){return s}function d(){i++,r||(r=t.subscribe(u),n=FIe())}function f(){i--,r&&i===0&&(r(),r=void 0,n.clear(),n=BV)}function A(){s||(s=!0,d())}function p(){s&&(s=!1,f())}const g={addNestedSub:o,notifyNestedSubs:c,handleChangeWrapper:u,isSubscribed:l,trySubscribe:A,tryUnsubscribe:p,getListeners:()=>n};return g}var $Ie=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",HIe=$Ie(),QIe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",VIe=QIe(),zIe=()=>HIe||VIe?j.useLayoutEffect:j.useEffect,KIe=zIe();function PV(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function GIe(t,e){if(PV(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++)if(!Object.prototype.hasOwnProperty.call(e,r[i])||!PV(t[r[i]],e[r[i]]))return!1;return!0}var WIe=Symbol.for("react-redux-context"),YIe=typeof globalThis<"u"?globalThis:{};function qIe(){if(!j.createContext)return{};const t=YIe[WIe]??=new Map;let e=t.get(j.createContext);return e||(e=j.createContext(null),t.set(j.createContext,e)),e}var XIe=qIe();function ZIe(t){const{children:e,context:r,serverState:n,store:i}=t,s=j.useMemo(()=>{const u=UIe(i);return{store:i,subscription:u,getServerState:n?()=>n:void 0}},[i,n]),o=j.useMemo(()=>i.getState(),[i]);KIe(()=>{const{subscription:u}=s;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),o!==i.getState()&&u.notifyNestedSubs(),()=>{u.tryUnsubscribe(),u.onStateChange=void 0}},[s,o]);const c=r||XIe;return j.createElement(c.Provider,{value:s},e)}var JIe=ZIe,eLe=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function tLe(t,e){return t==null&&e==null?!0:typeof t=="number"&&typeof e=="number"?t===e||t!==t&&e!==e:t===e}function IM(t,e){var r=new Set([...Object.keys(t),...Object.keys(e)]);for(var n of r)if(eLe.has(n)){if(t[n]==null&&e[n]==null)continue;if(!GIe(t[n],e[n]))return!1}else if(!tLe(t[n],e[n]))return!1;return!0}function Sy(t,e){var r,n;return(r=(n=t.graphicalItems.cartesianItems.find(i=>i.id===e))===null||n===void 0?void 0:n.xAxisId)!==null&&r!==void 0?r:Rte}function Ty(t,e){var r,n;return(r=(n=t.graphicalItems.cartesianItems.find(i=>i.id===e))===null||n===void 0?void 0:n.yAxisId)!==null&&r!==void 0?r:Rte}var rLe="Invariant failed";function nLe(t,e){throw new Error(rLe)}function CP(){return CP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},CP.apply(null,arguments)}function Tj(t){return j.createElement(Ite,CP({shapeType:"rectangle",activeClassName:"recharts-active-bar"},t))}var iLe=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,i)=>{if(Ei(e))return e;var s=Ei(n)||ru(n);return s?e(n,i):(s||nLe(),r)}},sLe=(t,e,r)=>r,aLe=(t,e)=>e,i_=or([DD,aLe],(t,e)=>t.filter(r=>r.type==="bar").find(r=>r.id===e)),oLe=or([i_],t=>t?.maxBarSize),lLe=(t,e,r,n)=>n,cLe=or([Wa,DD,Sy,Ty,sLe],(t,e,r,n,i)=>e.filter(s=>t==="horizontal"?s.xAxisId===r:s.yAxisId===n).filter(s=>s.isPanorama===i).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),uLe=(t,e,r)=>{var n=Wa(t),i=Sy(t,e),s=Ty(t,e);if(!(i==null||s==null))return n==="horizontal"?xP(t,"yAxis",s,r):xP(t,"xAxis",i,r)},dLe=(t,e)=>{var r=Wa(t),n=Sy(t,e),i=Ty(t,e);if(!(n==null||i==null))return r==="horizontal"?cQ(t,"xAxis",n):cQ(t,"yAxis",i)},hLe=or([cLe,M2e,dLe],Ske),fLe=(t,e,r)=>{var n,i,s=i_(t,e);if(s==null)return 0;var o=Sy(t,e),c=Ty(t,e);if(o==null||c==null)return 0;var u=Wa(t),l=XJ(t),{maxBarSize:d}=s,f=ru(d)?l:d,A,p;return u==="horizontal"?(A=Fb(t,"xAxis",o,r),p=Mb(t,"xAxis",o,r)):(A=Fb(t,"yAxis",c,r),p=Mb(t,"yAxis",c,r)),(n=(i=Lb(A,p,!0))!==null&&i!==void 0?i:f)!==null&&n!==void 0?n:0},Xte=(t,e,r)=>{var n=Wa(t),i=Sy(t,e),s=Ty(t,e);if(!(i==null||s==null)){var o,c;return n==="horizontal"?(o=Fb(t,"xAxis",i,r),c=Mb(t,"xAxis",i,r)):(o=Fb(t,"yAxis",s,r),c=Mb(t,"yAxis",s,r)),Lb(o,c)}},ALe=or([hLe,XJ,D2e,ZJ,fLe,Xte,oLe],kke),mLe=(t,e,r)=>{var n=Sy(t,e);if(n!=null)return Fb(t,"xAxis",n,r)},pLe=(t,e,r)=>{var n=Ty(t,e);if(n!=null)return Fb(t,"yAxis",n,r)},gLe=(t,e,r)=>{var n=Sy(t,e);if(n!=null)return Mb(t,"xAxis",n,r)},vLe=(t,e,r)=>{var n=Ty(t,e);if(n!=null)return Mb(t,"yAxis",n,r)},yLe=or([ALe,i_],Lke),xLe=or([uLe,i_],Ike),bLe=or([Vu,q3,mLe,pLe,gLe,vLe,yLe,Wa,N2e,Xte,xLe,i_,lLe],(t,e,r,n,i,s,o,c,u,l,d,f,A)=>{var{chartData:p,dataStartIndex:g,dataEndIndex:y}=u;if(!(f==null||o==null||e==null||c!=="horizontal"&&c!=="vertical"||r==null||n==null||i==null||s==null||l==null)){var{data:x}=f,w;if(x!=null&&x.length>0?w=x:w=p?.slice(g,y+1),w!=null)return YLe({layout:c,barSettings:f,pos:o,parentViewBox:e,bandSize:l,xAxis:r,yAxis:n,xAxisTicks:i,yAxisTicks:s,stackedData:d,displayedData:w,offset:t,cells:A,dataStartIndex:g})}}),wLe=["index"];function jP(){return jP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},jP.apply(null,arguments)}function ELe(t,e){if(t==null)return{};var r,n,i=_Le(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function _Le(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Zte=j.createContext(void 0),SLe=t=>{var e=j.useContext(Zte);if(e!=null)return e.stackId;if(t!=null)return wxe(t)},TLe=(t,e)=>"recharts-bar-stack-clip-path-".concat(t,"-").concat(e),CLe=t=>{var e=j.useContext(Zte);if(e!=null){var{stackId:r}=e;return"url(#".concat(TLe(r,t),")")}},Jte=t=>{var{index:e}=t,r=ELe(t,wLe),n=CLe(e);return j.createElement(Fc,jP({className:"recharts-bar-stack-layer",clipPath:n},r))},jLe=["onMouseEnter","onMouseLeave","onClick"],NLe=["value","background","tooltipPosition"],kLe=["id"],ILe=["onMouseEnter","onClick","onMouseLeave"];function eg(){return eg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},eg.apply(null,arguments)}function OV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Ah(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?OV(Object(r),!0).forEach(function(n){LLe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):OV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function LLe(t,e,r){return(e=BLe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function BLe(t){var e=PLe(t,"string");return typeof e=="symbol"?e:e+""}function PLe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Cj(t,e){if(t==null)return{};var r,n,i=OLe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function OLe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var RLe=t=>{var{dataKey:e,name:r,fill:n,legendType:i,hide:s}=t;return[{inactive:s,dataKey:e,type:i,color:n,value:s1(r,e),payload:t}]},DLe=j.memo(t=>{var{dataKey:e,stroke:r,strokeWidth:n,fill:i,name:s,hide:o,unit:c,tooltipType:u,id:l}=t,d={dataDefinedOnItem:void 0,getPosition:H0,settings:{stroke:r,strokeWidth:n,fill:i,dataKey:e,nameKey:void 0,name:s1(s,e),hide:o,type:u,color:i,unit:c,graphicalItemId:l}};return j.createElement(TM,{tooltipEntrySettings:d})});function MLe(t){var e=si(O0),{data:r,dataKey:n,background:i,allOtherBarProps:s}=t,{onMouseEnter:o,onMouseLeave:c,onClick:u}=s,l=Cj(s,jLe),d=EM(o,n,s.id),f=_M(c),A=SM(u,n,s.id);if(!i||r==null)return null;var p=cy(i);return j.createElement(ih,{zIndex:Bke(i,Rc.barBackground)},r.map((g,y)=>{var{value:x,background:w,tooltipPosition:E}=g,T=Cj(g,NLe);if(!w)return null;var C=d(g,y),N=f(g,y),I=A(g,y),U=Ah(Ah(Ah(Ah(Ah({option:i,isActive:String(y)===e},T),{},{fill:"#eee"},w),p),i1(l,g,y)),{},{onMouseEnter:C,onMouseLeave:N,onClick:I,dataKey:n,index:y,className:"recharts-bar-background-rectangle"});return j.createElement(Tj,eg({key:"background-bar-".concat(y)},U))}))}function FLe(t){var{showLabels:e,children:r,rects:n}=t,i=n?.map(s=>{var o={x:s.x,y:s.y,width:s.width,lowerWidth:s.width,upperWidth:s.width,height:s.height};return Ah(Ah({},o),{},{value:s.value,payload:s.payload,parentViewBox:s.parentViewBox,viewBox:o,fill:s.fill})});return j.createElement(yte,{value:e?i:void 0},r)}function ULe(t){var{shape:e,activeBar:r,baseProps:n,entry:i,index:s,dataKey:o}=t,c=si(O0),u=si(oM),l=r&&String(s)===c&&(u==null||o===u),d=l?r:e;return l?j.createElement(ih,{zIndex:Rc.activeBar},j.createElement(Jte,{index:s},j.createElement(Tj,eg({},n,{name:String(n.name)},i,{isActive:l,option:d,index:s,dataKey:o})))):j.createElement(Tj,eg({},n,{name:String(n.name)},i,{isActive:l,option:d,index:s,dataKey:o}))}function $Le(t){var{shape:e,baseProps:r,entry:n,index:i,dataKey:s}=t;return j.createElement(Tj,eg({},r,{name:String(r.name)},n,{isActive:!1,option:e,index:i,dataKey:s}))}function HLe(t){var e,{data:r,props:n}=t,i=(e=yu(n))!==null&&e!==void 0?e:{},{id:s}=i,o=Cj(i,kLe),{shape:c,dataKey:u,activeBar:l}=n,{onMouseEnter:d,onClick:f,onMouseLeave:A}=n,p=Cj(n,ILe),g=EM(d,u,s),y=_M(A),x=SM(f,u,s);return r?j.createElement(j.Fragment,null,r.map((w,E)=>j.createElement(Jte,eg({index:E,key:"rectangle-".concat(w?.x,"-").concat(w?.y,"-").concat(w?.value,"-").concat(E),className:"recharts-bar-rectangle"},i1(p,w,E),{onMouseEnter:g(w,E),onMouseLeave:y(w,E),onClick:x(w,E)}),l?j.createElement(ULe,{shape:c,activeBar:l,baseProps:o,entry:w,index:E,dataKey:u}):j.createElement($Le,{shape:c,baseProps:o,entry:w,index:E,dataKey:u})))):null}function QLe(t){var{props:e,previousRectanglesRef:r}=t,{data:n,layout:i,isAnimationActive:s,animationBegin:o,animationDuration:c,animationEasing:u,onAnimationEnd:l,onAnimationStart:d}=e,f=r.current,A=M2(e,"recharts-bar-"),[p,g]=j.useState(!1),y=!p,x=j.useCallback(()=>{typeof l=="function"&&l(),g(!1)},[l]),w=j.useCallback(()=>{typeof d=="function"&&d(),g(!0)},[d]);return j.createElement(FLe,{showLabels:y,rects:n},j.createElement(D2,{animationId:A,begin:o,duration:c,isActive:s,easing:u,onAnimationEnd:x,onAnimationStart:w,key:A},E=>{var T=E===1?n:n?.map((C,N)=>{var I=f&&f[N];if(I)return Ah(Ah({},C),{},{x:uc(I.x,C.x,E),y:uc(I.y,C.y,E),width:uc(I.width,C.width,E),height:uc(I.height,C.height,E)});if(i==="horizontal"){var U=uc(0,C.height,E),K=uc(C.stackedBarStart,C.y,E);return Ah(Ah({},C),{},{y:K,height:U})}var Y=uc(0,C.width,E),re=uc(C.stackedBarStart,C.x,E);return Ah(Ah({},C),{},{width:Y,x:re})});return E>0&&(r.current=T??null),T==null?null:j.createElement(Fc,null,j.createElement(HLe,{props:e,data:T}))}),j.createElement(AM,{label:e.label}),e.children)}function VLe(t){var e=j.useRef(null);return j.createElement(QLe,{previousRectanglesRef:e,props:t})}var ere=0,zLe=(t,e)=>{var r=Array.isArray(t.value)?t.value[1]:t.value;return{x:t.x,y:t.y,value:r,errorVal:dl(t,e)}};class KLe extends j.PureComponent{render(){var{hide:e,data:r,dataKey:n,className:i,xAxisId:s,yAxisId:o,needClip:c,background:u,id:l}=this.props;if(e||r==null)return null;var d=Sa("recharts-bar",i),f=l;return j.createElement(Fc,{className:d,id:l},c&&j.createElement("defs",null,j.createElement(OIe,{clipPathId:f,xAxisId:s,yAxisId:o})),j.createElement(Fc,{className:"recharts-bar-rectangles",clipPath:c?"url(#clipPath-".concat(f,")"):void 0},j.createElement(MLe,{data:r,dataKey:n,background:u,allOtherBarProps:this.props}),j.createElement(VLe,this.props)))}}var GLe={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:ere,xAxisId:0,yAxisId:0,zIndex:Rc.bar};function WLe(t){var{xAxisId:e,yAxisId:r,hide:n,legendType:i,minPointSize:s,activeBar:o,animationBegin:c,animationDuration:u,animationEasing:l,isAnimationActive:d}=t,{needClip:f}=qte(e,r),A=a1(),p=nh(),g=wM(t.children,Ub),y=si(E=>bLe(E,t.id,p,g));if(A!=="vertical"&&A!=="horizontal")return null;var x,w=y?.[0];return w==null||w.height==null||w.width==null?x=0:x=A==="vertical"?w.height/2:w.width/2,j.createElement(PIe,{xAxisId:e,yAxisId:r,data:y,dataPointFormatter:zLe,errorBarOffset:x},j.createElement(KLe,eg({},t,{layout:A,needClip:f,data:y,xAxisId:e,yAxisId:r,hide:n,legendType:i,minPointSize:s,activeBar:o,animationBegin:c,animationDuration:u,animationEasing:l,isAnimationActive:d})))}function YLe(t){var{layout:e,barSettings:{dataKey:r,minPointSize:n},pos:i,bandSize:s,xAxis:o,yAxis:c,xAxisTicks:u,yAxisTicks:l,stackedData:d,displayedData:f,offset:A,cells:p,parentViewBox:g,dataStartIndex:y}=t,x=e==="horizontal"?c:o,w=d?x.scale.domain():null,E=Exe({numericAxis:x}),T=x.scale.map(E);return f.map((C,N)=>{var I,U,K,Y,re,se;if(d){var Ae=d[N+y];if(Ae==null)return null;I=gxe(Ae,w)}else I=dl(C,r),Array.isArray(I)||(I=[E,I]);var we=iLe(n,ere)(I[1],N);if(e==="horizontal"){var Ce,ve=c.scale.map(I[0]),ne=c.scale.map(I[1]);if(ve==null||ne==null)return null;U=l9({axis:o,ticks:u,bandSize:s,offset:i.offset,entry:C,index:N}),K=(Ce=ne??ve)!==null&&Ce!==void 0?Ce:void 0,Y=i.size;var ce=ve-ne;if(re=zm(ce)?0:ce,se={x:U,y:A.top,width:Y,height:A.height},Math.abs(we)>0&&Math.abs(re)<Math.abs(we)){var ae=Ad(re||we)*(Math.abs(we)-Math.abs(re));K-=ae,re+=ae}}else{var De=o.scale.map(I[0]),Oe=o.scale.map(I[1]);if(De==null||Oe==null)return null;if(U=De,K=l9({axis:c,ticks:l,bandSize:s,offset:i.offset,entry:C,index:N}),Y=Oe-De,re=i.size,se={x:A.left,y:K,width:A.width,height:re},Math.abs(we)>0&&Math.abs(Y)<Math.abs(we)){var be=Ad(Y||we)*(Math.abs(we)-Math.abs(Y));Y+=be}}if(U==null||K==null||Y==null||re==null)return null;var de=Ah(Ah({},C),{},{stackedBarStart:T,x:U,y:K,width:Y,height:re,value:d?I:I[1],payload:C,background:se,tooltipPosition:{x:U+Y/2,y:K+re/2},parentViewBox:g},p&&p[N]&&p[N].props);return de}).filter(Boolean)}function qLe(t){var e=Uc(t,GLe),r=SLe(e.stackId),n=nh();return j.createElement(CM,{id:e.id,type:"bar"},i=>j.createElement(j.Fragment,null,j.createElement(RNe,{legendPayload:RLe(e)}),j.createElement(DLe,{dataKey:e.dataKey,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType,id:i}),j.createElement(YNe,{type:"bar",id:i,data:void 0,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,stackId:r,hide:e.hide,barSize:e.barSize,minPointSize:e.minPointSize,maxBarSize:e.maxBarSize,isPanorama:n}),j.createElement(ih,{zIndex:e.zIndex},j.createElement(WLe,eg({},e,{id:i})))))}var eb=j.memo(qLe,IM);eb.displayName="Bar";var XLe=["domain","range"],ZLe=["domain","range"];function RV(t,e){if(t==null)return{};var r,n,i=JLe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function JLe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function DV(t,e){return t===e?!0:Array.isArray(t)&&t.length===2&&Array.isArray(e)&&e.length===2?t[0]===e[0]&&t[1]===e[1]:!1}function tre(t,e){if(t===e)return!0;var{domain:r,range:n}=t,i=RV(t,XLe),{domain:s,range:o}=e,c=RV(e,ZLe);return!DV(r,s)||!DV(n,o)?!1:IM(i,c)}var e4e=["type"],t4e=["dangerouslySetInnerHTML","ticks","scale"],r4e=["id","scale"];function NP(){return NP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},NP.apply(null,arguments)}function MV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function FV(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?MV(Object(r),!0).forEach(function(n){n4e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):MV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function n4e(t,e,r){return(e=i4e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function i4e(t){var e=s4e(t,"string");return typeof e=="symbol"?e:e+""}function s4e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function kP(t,e){if(t==null)return{};var r,n,i=a4e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function a4e(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function o4e(t){var e=Al(),r=j.useRef(null),n=DZ(),{type:i}=t,s=kP(t,e4e),o=z2(n,"xAxis",i),c=j.useMemo(()=>{if(o!=null)return FV(FV({},s),{},{type:o})},[s,o]);return j.useLayoutEffect(()=>{c!=null&&(r.current===null?e(B5e(c)):r.current!==c&&e(P5e({prev:r.current,next:c})),r.current=c)},[c,e]),j.useLayoutEffect(()=>()=>{r.current&&(e(O5e(r.current)),r.current=null)},[e]),null}var l4e=t=>{var{xAxisId:e,className:r}=t,n=si(q3),i=nh(),s="xAxis",o=si(w=>kee(w,s,e,i)),c=si(w=>Tee(w,e)),u=si(w=>U_e(w,e)),l=si(w=>oee(w,e));if(c==null||u==null||l==null)return null;var{dangerouslySetInnerHTML:d,ticks:f,scale:A}=t,p=kP(t,t4e),{id:g,scale:y}=l,x=kP(l,r4e);return j.createElement(kM,NP({},p,x,{x:u.x,y:u.y,width:c.width,height:c.height,className:Sa("recharts-".concat(s," ").concat(s),r),viewBox:n,ticks:o,axisType:s}))},c4e={allowDataOverflow:ld.allowDataOverflow,allowDecimals:ld.allowDecimals,allowDuplicatedCategory:ld.allowDuplicatedCategory,angle:ld.angle,axisLine:$p.axisLine,height:ld.height,hide:!1,includeHidden:ld.includeHidden,interval:ld.interval,label:!1,minTickGap:ld.minTickGap,mirror:ld.mirror,orientation:ld.orientation,padding:ld.padding,reversed:ld.reversed,scale:ld.scale,tick:ld.tick,tickCount:ld.tickCount,tickLine:$p.tickLine,tickSize:$p.tickSize,type:ld.type,xAxisId:0},u4e=t=>{var e=Uc(t,c4e);return j.createElement(j.Fragment,null,j.createElement(o4e,{allowDataOverflow:e.allowDataOverflow,allowDecimals:e.allowDecimals,allowDuplicatedCategory:e.allowDuplicatedCategory,angle:e.angle,dataKey:e.dataKey,domain:e.domain,height:e.height,hide:e.hide,id:e.xAxisId,includeHidden:e.includeHidden,interval:e.interval,minTickGap:e.minTickGap,mirror:e.mirror,name:e.name,orientation:e.orientation,padding:e.padding,reversed:e.reversed,scale:e.scale,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit}),j.createElement(l4e,e))},LM=j.memo(u4e,tre);LM.displayName="XAxis";var d4e=["type"],h4e=["dangerouslySetInnerHTML","ticks","scale"],f4e=["id","scale"];function IP(){return IP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},IP.apply(null,arguments)}function UV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function $V(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?UV(Object(r),!0).forEach(function(n){A4e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):UV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function A4e(t,e,r){return(e=m4e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function m4e(t){var e=p4e(t,"string");return typeof e=="symbol"?e:e+""}function p4e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function LP(t,e){if(t==null)return{};var r,n,i=g4e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function g4e(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function v4e(t){var e=Al(),r=j.useRef(null),n=DZ(),{type:i}=t,s=LP(t,d4e),o=z2(n,"yAxis",i),c=j.useMemo(()=>{if(o!=null)return $V($V({},s),{},{type:o})},[o,s]);return j.useLayoutEffect(()=>{c!=null&&(r.current===null?e(R5e(c)):r.current!==c&&e(D5e({prev:r.current,next:c})),r.current=c)},[c,e]),j.useLayoutEffect(()=>()=>{r.current&&(e(M5e(r.current)),r.current=null)},[e]),null}function y4e(t){var{yAxisId:e,className:r,width:n,label:i}=t,s=j.useRef(null),o=j.useRef(null),c=si(q3),u=nh(),l=Al(),d="yAxis",f=si(I=>Cee(I,e)),A=si(I=>H_e(I,e)),p=si(I=>kee(I,d,e,u)),g=si(I=>lee(I,e));if(j.useLayoutEffect(()=>{if(!(n!=="auto"||!f||fM(i)||j.isValidElement(i)||g==null)){var I=s.current;if(I){var U=I.getCalculatedWidth();Math.round(f.width)!==Math.round(U)&&l(F5e({id:e,width:U}))}}},[p,f,l,i,e,n,g]),f==null||A==null||g==null)return null;var{dangerouslySetInnerHTML:y,ticks:x,scale:w}=t,E=LP(t,h4e),{id:T,scale:C}=g,N=LP(g,f4e);return j.createElement(kM,IP({},E,N,{ref:s,labelRef:o,x:A.x,y:A.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:f.width,height:f.height,className:Sa("recharts-".concat(d," ").concat(d),r),viewBox:c,ticks:p,axisType:d}))}var x4e={allowDataOverflow:cd.allowDataOverflow,allowDecimals:cd.allowDecimals,allowDuplicatedCategory:cd.allowDuplicatedCategory,angle:cd.angle,axisLine:$p.axisLine,hide:!1,includeHidden:cd.includeHidden,interval:cd.interval,label:!1,minTickGap:cd.minTickGap,mirror:cd.mirror,orientation:cd.orientation,padding:cd.padding,reversed:cd.reversed,scale:cd.scale,tick:cd.tick,tickCount:cd.tickCount,tickLine:$p.tickLine,tickSize:$p.tickSize,type:cd.type,width:cd.width,yAxisId:0},b4e=t=>{var e=Uc(t,x4e);return j.createElement(j.Fragment,null,j.createElement(v4e,{interval:e.interval,id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:e.includeHidden,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:e.angle,minTickGap:e.minTickGap,tick:e.tick,tickFormatter:e.tickFormatter}),j.createElement(y4e,e))},BM=j.memo(b4e,tre);BM.displayName="YAxis";var w4e=(t,e)=>e,PM=or([w4e,Wa,G2,gd,Wee,dg,rTe,Vu],cTe),OM=t=>{var e=t.currentTarget.getBoundingClientRect(),r=e.width/t.currentTarget.offsetWidth,n=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/r),chartY:Math.round((t.clientY-e.top)/n)}},rre=Xf("mouseClick"),nre=B2();nre.startListening({actionCreator:rre,effect:(t,e)=>{var r=t.payload,n=PM(e.getState(),OM(r));n?.activeIndex!=null&&e.dispatch(eSe({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var BP=Xf("mouseMove"),ire=B2(),tS=null;ire.startListening({actionCreator:BP,effect:(t,e)=>{var r=t.payload;tS!==null&&cancelAnimationFrame(tS);var n=OM(r);tS=requestAnimationFrame(()=>{var i=e.getState(),s=tM(i,i.tooltip.settings.shared);if(s==="axis"){var o=PM(i,n);o?.activeIndex!=null?e.dispatch(Fee({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate})):e.dispatch(Mee())}tS=null})}});function E4e(t,e){return e instanceof HTMLElement?"HTMLElement <".concat(e.tagName,' class="').concat(e.className,'">'):e===window?"global.window":t==="children"&&typeof e=="object"&&e!==null?"<<CHILDREN>>":e}var HV={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},sre=Qh({name:"rootProps",initialState:HV,reducers:{updateOptions:(t,e)=>{var r;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(r=e.payload.barGap)!==null&&r!==void 0?r:HV.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className,t.baseValue=e.payload.baseValue,t.reverseStackOrder=e.payload.reverseStackOrder}}}),_4e=sre.reducer,{updateOptions:S4e}=sre.actions,T4e=null,C4e={updatePolarOptions:(t,e)=>e.payload},are=Qh({name:"polarOptions",initialState:T4e,reducers:C4e}),{updatePolarOptions:j4e}=are.actions,N4e=are.reducer,ore=Xf("keyDown"),lre=Xf("focus"),RM=B2();RM.startListening({actionCreator:ore,effect:(t,e)=>{var r=e.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:i}=r.tooltip,s=t.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var o=rM(i,m1(r),q2(r),J2(r)),c=o==null?-1:Number(o);if(!(!Number.isFinite(c)||c<0)){var u=dg(r);if(s==="Enter"){var l=yj(r,"axis","hover",String(i.index));e.dispatch(wP({active:!i.active,activeIndex:i.index,activeCoordinate:l}));return}var d=V_e(r),f=d==="left-to-right"?1:-1,A=s==="ArrowRight"?1:-1,p=c+A*f;if(!(u==null||p>=u.length||p<0)){var g=yj(r,"axis","hover",String(p));e.dispatch(wP({active:!0,activeIndex:p.toString(),activeCoordinate:g}))}}}}}});RM.startListening({actionCreator:lre,effect:(t,e)=>{var r=e.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:i}=r.tooltip;if(!i.active&&i.index==null){var s="0",o=yj(r,"axis","hover",String(s));e.dispatch(wP({active:!0,activeIndex:s,activeCoordinate:o}))}}}});var Ff=Xf("externalEvent"),cre=B2(),$L=new Map;cre.startListening({actionCreator:Ff,effect:(t,e)=>{var{handler:r,reactEvent:n}=t.payload;if(r!=null){n.persist();var i=n.type,s=$L.get(i);s!==void 0&&cancelAnimationFrame(s);var o=requestAnimationFrame(()=>{try{var c=e.getState(),u={activeCoordinate:USe(c),activeDataKey:oM(c),activeIndex:O0(c),activeLabel:Xee(c),activeTooltipIndex:O0(c),isTooltipActive:$Se(c)};r(u,n)}finally{$L.delete(i)}});$L.set(i,o)}}});var k4e=or([f1],t=>t.tooltipItemPayloads),I4e=or([k4e,(t,e)=>e,(t,e,r)=>r],(t,e,r)=>{if(e!=null){var n=t.find(s=>s.settings.graphicalItemId===r);if(n!=null){var{getPosition:i}=n;if(i!=null)return i(e)}}}),ure=Xf("touchMove"),dre=B2();dre.startListening({actionCreator:ure,effect:(t,e)=>{var r=t.payload;if(!(r.touches==null||r.touches.length===0)){var n=e.getState(),i=tM(n,n.tooltip.settings.shared);if(i==="axis"){var s=r.touches[0];if(s==null)return;var o=PM(n,OM({clientX:s.clientX,clientY:s.clientY,currentTarget:r.currentTarget}));o?.activeIndex!=null&&e.dispatch(Fee({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate}))}else if(i==="item"){var c,u=r.touches[0];if(document.elementFromPoint==null||u==null)return;var l=document.elementFromPoint(u.clientX,u.clientY);if(!l||!l.getAttribute)return;var d=l.getAttribute(IZ),f=(c=l.getAttribute(LZ))!==null&&c!==void 0?c:void 0,A=A1(n).find(y=>y.id===f);if(d==null||A==null||f==null)return;var{dataKey:p}=A,g=I4e(n,d,f);e.dispatch(Dee({activeDataKey:p,activeIndex:d,activeCoordinate:g,activeGraphicalItemId:f}))}}}});var L4e=JX({brush:Pke,cartesianAxis:U5e,chartData:UTe,errorBars:jIe,graphicalItems:GNe,layout:hxe,legend:xbe,options:OTe,polarAxis:Vje,polarOptions:N4e,referenceElements:Mke,rootProps:_4e,tooltip:tSe,zIndex:ETe}),B4e=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return Dye({reducer:L4e,preloadedState:e,middleware:n=>{var i;return n({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((i="es6")!==null&&i!==void 0?i:"")}).concat([nre.middleware,ire.middleware,RM.middleware,cre.middleware,dre.middleware])},enhancers:n=>{var i=n;return typeof n=="function"&&(i=n()),i.concat(AZ({type:"raf"}))},devTools:{serialize:{replacer:E4e},name:"recharts-".concat(r)}})};function hre(t){var{preloadedState:e,children:r,reduxStoreName:n}=t,i=nh(),s=j.useRef(null);if(i)return r;s.current==null&&(s.current=B4e(e,n));var o=Q3;return j.createElement(JIe,{context:o,store:s.current},r)}function P4e(t){var{layout:e,margin:r}=t,n=Al(),i=nh();return j.useEffect(()=>{i||(n(cxe(e)),n(lxe(r)))},[n,i,e,r]),null}var fre=j.memo(P4e,IM);function Are(t){var e=Al();return j.useEffect(()=>{e(S4e(t))},[e,t]),null}function QV(t){var{zIndex:e,isPanorama:r}=t,n=j.useRef(null),i=Al();return j.useLayoutEffect(()=>(n.current&&i(bTe({zIndex:e,element:n.current,isPanorama:r})),()=>{i(wTe({zIndex:e,isPanorama:r}))}),[i,e,r]),j.createElement("g",{tabIndex:-1,ref:n})}function VV(t){var{children:e,isPanorama:r}=t,n=si(dTe);if(!n||n.length===0)return e;var i=n.filter(o=>o<0),s=n.filter(o=>o>0);return j.createElement(j.Fragment,null,i.map(o=>j.createElement(QV,{key:o,zIndex:o,isPanorama:r})),e,s.map(o=>j.createElement(QV,{key:o,zIndex:o,isPanorama:r})))}var O4e=["children"];function R4e(t,e){if(t==null)return{};var r,n,i=D4e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function D4e(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function jj(){return jj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},jj.apply(null,arguments)}var M4e={width:"100%",height:"100%",display:"block"},F4e=j.forwardRef((t,e)=>{var r=J3(),n=eD(),i=YZ();if(!Gm(r)||!Gm(n))return null;var{children:s,otherAttributes:o,title:c,desc:u}=t,l,d;return o!=null&&(typeof o.tabIndex=="number"?l=o.tabIndex:l=i?0:void 0,typeof o.role=="string"?d=o.role:d=i?"application":void 0),j.createElement(L3,jj({},o,{title:c,desc:u,role:d,tabIndex:l,width:r,height:n,style:M4e,ref:e}),s)}),U4e=t=>{var{children:e}=t,r=si(JN);if(!r)return null;var{width:n,height:i,y:s,x:o}=r;return j.createElement(L3,{width:n,height:i,x:o,y:s},e)},zV=j.forwardRef((t,e)=>{var{children:r}=t,n=R4e(t,O4e),i=nh();return i?j.createElement(U4e,null,j.createElement(VV,{isPanorama:!0},r)):j.createElement(F4e,jj({ref:e},n),j.createElement(VV,{isPanorama:!1},r))});function $4e(){var t=Al(),[e,r]=j.useState(null),n=si(Nxe);return j.useEffect(()=>{if(e!=null){var i=e.getBoundingClientRect(),s=i.width/e.offsetWidth;Ha(s)&&s!==n&&t(dxe(s))}},[e,t,n]),r}function KV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function H4e(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?KV(Object(r),!0).forEach(function(n){Q4e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):KV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Q4e(t,e,r){return(e=V4e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function V4e(t){var e=z4e(t,"string");return typeof e=="symbol"?e:e+""}function z4e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function T0(){return T0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},T0.apply(null,arguments)}var K4e=()=>(YTe(),null);function Nj(t){if(typeof t=="number")return t;if(typeof t=="string"){var e=parseFloat(t);if(!Number.isNaN(e))return e}return 0}var G4e=j.forwardRef((t,e)=>{var r,n,i=j.useRef(null),[s,o]=j.useState({containerWidth:Nj((r=t.style)===null||r===void 0?void 0:r.width),containerHeight:Nj((n=t.style)===null||n===void 0?void 0:n.height)}),c=j.useCallback((l,d)=>{o(f=>{var A=Math.round(l),p=Math.round(d);return f.containerWidth===A&&f.containerHeight===p?f:{containerWidth:A,containerHeight:p}})},[]),u=j.useCallback(l=>{if(typeof e=="function"&&e(l),l!=null&&typeof ResizeObserver<"u"){var{width:d,height:f}=l.getBoundingClientRect();c(d,f);var A=g=>{var y=g[0];if(y!=null){var{width:x,height:w}=y.contentRect;c(x,w)}},p=new ResizeObserver(A);p.observe(l),i.current=p}},[e,c]);return j.useEffect(()=>()=>{var l=i.current;l?.disconnect()},[c]),j.createElement(j.Fragment,null,j.createElement(O2,{width:s.containerWidth,height:s.containerHeight}),j.createElement("div",T0({ref:u},t)))}),W4e=j.forwardRef((t,e)=>{var{width:r,height:n}=t,[i,s]=j.useState({containerWidth:Nj(r),containerHeight:Nj(n)}),o=j.useCallback((u,l)=>{s(d=>{var f=Math.round(u),A=Math.round(l);return d.containerWidth===f&&d.containerHeight===A?d:{containerWidth:f,containerHeight:A}})},[]),c=j.useCallback(u=>{if(typeof e=="function"&&e(u),u!=null){var{width:l,height:d}=u.getBoundingClientRect();o(l,d)}},[e,o]);return j.createElement(j.Fragment,null,j.createElement(O2,{width:i.containerWidth,height:i.containerHeight}),j.createElement("div",T0({ref:c},t)))}),Y4e=j.forwardRef((t,e)=>{var{width:r,height:n}=t;return j.createElement(j.Fragment,null,j.createElement(O2,{width:r,height:n}),j.createElement("div",T0({ref:e},t)))}),q4e=j.forwardRef((t,e)=>{var{width:r,height:n}=t;return typeof r=="string"||typeof n=="string"?j.createElement(W4e,T0({},t,{ref:e})):typeof r=="number"&&typeof n=="number"?j.createElement(Y4e,T0({},t,{width:r,height:n,ref:e})):j.createElement(j.Fragment,null,j.createElement(O2,{width:r,height:n}),j.createElement("div",T0({ref:e},t)))});function X4e(t){return t?G4e:q4e}var Z4e=j.forwardRef((t,e)=>{var{children:r,className:n,height:i,onClick:s,onContextMenu:o,onDoubleClick:c,onMouseDown:u,onMouseEnter:l,onMouseLeave:d,onMouseMove:f,onMouseUp:A,onTouchEnd:p,onTouchMove:g,onTouchStart:y,style:x,width:w,responsive:E,dispatchTouchEvents:T=!0}=t,C=j.useRef(null),N=Al(),[I,U]=j.useState(null),[K,Y]=j.useState(null),re=$4e(),se=X3(),Ae=se?.width>0?se.width:w,we=se?.height>0?se.height:i,Ce=j.useCallback(Be=>{re(Be),typeof e=="function"&&e(Be),U(Be),Y(Be),Be!=null&&(C.current=Be)},[re,e,U,Y]),ve=j.useCallback(Be=>{N(rre(Be)),N(Ff({handler:s,reactEvent:Be}))},[N,s]),ne=j.useCallback(Be=>{N(BP(Be)),N(Ff({handler:l,reactEvent:Be}))},[N,l]),ce=j.useCallback(Be=>{N(Mee()),N(Ff({handler:d,reactEvent:Be}))},[N,d]),ae=j.useCallback(Be=>{N(BP(Be)),N(Ff({handler:f,reactEvent:Be}))},[N,f]),De=j.useCallback(()=>{N(lre())},[N]),Oe=j.useCallback(Be=>{N(ore(Be.key))},[N]),be=j.useCallback(Be=>{N(Ff({handler:o,reactEvent:Be}))},[N,o]),de=j.useCallback(Be=>{N(Ff({handler:c,reactEvent:Be}))},[N,c]),xe=j.useCallback(Be=>{N(Ff({handler:u,reactEvent:Be}))},[N,u]),je=j.useCallback(Be=>{N(Ff({handler:A,reactEvent:Be}))},[N,A]),Me=j.useCallback(Be=>{N(Ff({handler:y,reactEvent:Be}))},[N,y]),Re=j.useCallback(Be=>{T&&N(ure(Be)),N(Ff({handler:g,reactEvent:Be}))},[N,T,g]),it=j.useCallback(Be=>{N(Ff({handler:p,reactEvent:Be}))},[N,p]),ht=X4e(E);return j.createElement(ite.Provider,{value:I},j.createElement(gX.Provider,{value:K},j.createElement(ht,{width:Ae??x?.width,height:we??x?.height,className:Sa("recharts-wrapper",n),style:H4e({position:"relative",cursor:"default",width:Ae,height:we},x),onClick:ve,onContextMenu:be,onDoubleClick:de,onFocus:De,onKeyDown:Oe,onMouseDown:xe,onMouseEnter:ne,onMouseLeave:ce,onMouseMove:ae,onMouseUp:je,onTouchEnd:it,onTouchMove:Re,onTouchStart:Me,ref:Ce},j.createElement(K4e,null),r)))}),J4e=["width","height","responsive","children","className","style","compact","title","desc"];function eBe(t,e){if(t==null)return{};var r,n,i=tBe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function tBe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var mre=j.forwardRef((t,e)=>{var{width:r,height:n,responsive:i,children:s,className:o,style:c,compact:u,title:l,desc:d}=t,f=eBe(t,J4e),A=yu(f);return u?j.createElement(j.Fragment,null,j.createElement(O2,{width:r,height:n}),j.createElement(zV,{otherAttributes:A,title:l,desc:d},s)):j.createElement(Z4e,{className:o,style:c,width:r,height:n,responsive:i??!1,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},j.createElement(zV,{otherAttributes:A,title:l,desc:d,ref:e},j.createElement(Uke,null,s)))});function PP(){return PP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},PP.apply(null,arguments)}var rBe={top:5,right:5,bottom:5,left:5},nBe={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:rBe,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},iBe=j.forwardRef(function(e,r){var n,i=Uc(e.categoricalChartProps,nBe),{chartName:s,defaultTooltipEventType:o,validateTooltipEventTypes:c,tooltipPayloadSearcher:u,categoricalChartProps:l}=e,d={chartName:s,defaultTooltipEventType:o,validateTooltipEventTypes:c,tooltipPayloadSearcher:u,eventEmitter:void 0};return j.createElement(hre,{preloadedState:{options:d},reduxStoreName:(n=l.id)!==null&&n!==void 0?n:s},j.createElement(Qte,{chartData:l.data}),j.createElement(fre,{layout:i.layout,margin:i.margin}),j.createElement(Are,{baseValue:i.baseValue,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),j.createElement(mre,PP({},i,{ref:r})))}),sBe=["axis","item"],pre=j.forwardRef((t,e)=>j.createElement(iBe,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:sBe,tooltipPayloadSearcher:hM,categoricalChartProps:t,ref:e}));function aBe(t){var e=Al();return j.useEffect(()=>{e(j4e(t))},[e,t]),null}var oBe=["layout"];function OP(){return OP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},OP.apply(null,arguments)}function lBe(t,e){if(t==null)return{};var r,n,i=cBe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function cBe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var uBe={top:5,right:5,bottom:5,left:5},DM={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:uBe,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},gre=j.forwardRef(function(e,r){var n,i=Uc(e.categoricalChartProps,DM),{layout:s}=i,o=lBe(i,oBe),{chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:l,tooltipPayloadSearcher:d}=e,f={chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:l,tooltipPayloadSearcher:d,eventEmitter:void 0};return j.createElement(hre,{preloadedState:{options:f},reduxStoreName:(n=i.id)!==null&&n!==void 0?n:c},j.createElement(Qte,{chartData:i.data}),j.createElement(fre,{layout:s,margin:i.margin}),j.createElement(Are,{baseValue:void 0,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),j.createElement(aBe,{cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius}),j.createElement(mre,OP({},o,{ref:r})))});function GV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function WV(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?GV(Object(r),!0).forEach(function(n){dBe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):GV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function dBe(t,e,r){return(e=hBe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function hBe(t){var e=fBe(t,"string");return typeof e=="symbol"?e:e+""}function fBe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ABe=["item"],mBe=WV(WV({},DM),{},{layout:"centric",startAngle:0,endAngle:360}),pBe=j.forwardRef((t,e)=>{var r=Uc(t,mBe);return j.createElement(gre,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:ABe,tooltipPayloadSearcher:hM,categoricalChartProps:r,ref:e})});function YV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function qV(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?YV(Object(r),!0).forEach(function(n){gBe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):YV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function gBe(t,e,r){return(e=vBe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function vBe(t){var e=yBe(t,"string");return typeof e=="symbol"?e:e+""}function yBe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var xBe=["axis"],bBe=qV(qV({},DM),{},{layout:"centric",startAngle:90,endAngle:-270}),wBe=j.forwardRef((t,e)=>{var r=Uc(t,bBe);return j.createElement(gre,{chartName:"RadarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:xBe,tooltipPayloadSearcher:hM,categoricalChartProps:r,ref:e})});const EBe=[{name:"Custom Fight Banner Graphics",price:"$650",avgPrice:650,icon:E0,description:"Custom graphics for all athletes created day-of from registration photos",features:["Professional athlete intro graphics","Fight card overlays","Social media ready formats","Same-day delivery"]},{name:"Professional Event Photography",price:"$1,000",avgPrice:1e3,icon:gE,description:"Dedicated photographer capturing every moment of your event",features:["Full event coverage","Match action shots","Winners & awards ceremony","Crowd atmosphere shots","Complete digital gallery"]},{name:"Individual Fight/Match Recordings",price:"$750",avgPrice:750,icon:yh,description:"Every fight delivered as a standalone clip  perfect for athletes, coaches, and social media",features:["Individual recording of every fight/match","Clean cuts with walkout to decision","Athlete-ready format for social sharing","YouTube-ready individual uploads","7-day delivery"]},{name:"Premium Camera Setup",price:"$2,000",avgPrice:2e3,icon:gE,description:"Upgrade to broadcast-grade multi-camera production",features:["3-4 cinema-grade cameras","PTZ cameras for dynamic angles","Professional live switching","Instant replay capability","Broadcast graphics integration"]},{name:"Social Media Content Package",price:"$1,500",avgPrice:1500,icon:qf,description:"Comprehensive content strategy for maximum reach",features:["5-10 social clips","Event highlight reel (3-5 min)","Short-form vertical edits for Reels/TikTok","Same-day highlight delivery"]},{name:"Ongoing Content Strategy",price:"$3,000",avgPrice:3e3,priceDetail:"per month",icon:TY,description:"Monthly content calendar and audience growth strategy",features:["Monthly content calendar","Audience growth strategy","Between-event content","Analytics & optimization","Dedicated account manager"]}],_Be=t=>t==="Major"?["Professional broadcast production (3-4 cameras with PTZ)","Complete PPV/streaming setup and management","Full show recording","Custom fight banner graphics for all athletes","Professional event photography","3 social media highlight clips","Revenue share: You earn from every PPV sale"]:t==="Established"?["Professional live stream production (2-3 cameras)","Complete PPV/streaming setup and management","Full show recording","Custom fight banner graphics for all athletes","1 social media highlight clip","Revenue share: You earn from every PPV sale"]:["Professional live stream production (1-2 cameras)","Complete PPV/streaming setup and management","Full show recording","1 social media highlight clip","Revenue share: You earn from every PPV sale"],SBe={Grassroots:[],Regional:[],Established:["Custom Fight Banner Graphics"],Major:["Custom Fight Banner Graphics","Professional Event Photography","Premium Camera Setup"]},XV=t=>t==="Major"?[{name:"Essentials Package",price:"$1,500",features:["Individual Fight/Match Recordings ($750 value)","Social Media Content Package  5-10 clips ($1,500 value)"],addOns:["Individual Fight/Match Recordings","Social Media Content Package"],bestFor:"Major promotions wanting athlete-ready content",popular:!1},{name:"Professional Package",price:"$3,000",features:["Everything in Essentials","Ongoing Content Strategy  1 month ($3,000 value)"],addOns:["Individual Fight/Match Recordings","Social Media Content Package","Ongoing Content Strategy"],bestFor:"Promotions building a year-round content engine",popular:!0},{name:"Broadcast Package",price:"$4,500",features:["Everything in Professional","Priority scheduling","Dedicated account manager","Between-event content creation"],addOns:["Individual Fight/Match Recordings","Social Media Content Package","Ongoing Content Strategy"],bestFor:"Elite promotions wanting a full media partnership",popular:!1}]:t==="Established"?[{name:"Essentials Package",price:"$2,000",features:["Individual Fight/Match Recordings ($750 value)","Social Media Content Package  5-10 clips ($1,500 value)"],addOns:["Individual Fight/Match Recordings","Social Media Content Package"],bestFor:"Established promotions adding content to their toolkit",popular:!1},{name:"Professional Package",price:"$3,500",features:["Everything in Essentials","Professional Event Photography ($1,000 value)","Premium Camera Setup ($2,000 value)"],addOns:["Individual Fight/Match Recordings","Social Media Content Package","Professional Event Photography","Premium Camera Setup"],bestFor:"Promotions ready for broadcast-quality production",popular:!0},{name:"Broadcast Package",price:"$5,500",features:["Everything in Professional","Ongoing Content Strategy  1 month ($3,000 value)","Priority scheduling"],addOns:["Individual Fight/Match Recordings","Social Media Content Package","Professional Event Photography","Premium Camera Setup","Ongoing Content Strategy"],bestFor:"Promotions dominating their market with full media support",popular:!1}]:[{name:"Essentials Package",price:"$2,500",features:["Custom Fight Banner Graphics ($650 value)","Individual Fight/Match Recordings ($750 value)"],addOns:["Custom Fight Banner Graphics","Individual Fight/Match Recordings"],bestFor:"Grassroots promotions building their brand",popular:!1},{name:"Professional Package",price:"$4,000",features:["Everything in Essentials","Professional Event Photography ($1,000 value)","Social Media Content Package ($1,500 value)"],addOns:["Custom Fight Banner Graphics","Individual Fight/Match Recordings","Professional Event Photography","Social Media Content Package"],bestFor:"Growing promotions ready to scale",popular:!0},{name:"Broadcast Package",price:"$6,500",features:["Everything in Professional","Premium Camera Setup ($2,000 value)","Ongoing Content Strategy  1 month ($3,000 value)"],addOns:["Custom Fight Banner Graphics","Individual Fight/Match Recordings","Professional Event Photography","Social Media Content Package","Premium Camera Setup","Ongoing Content Strategy"],bestFor:"Established promotions dominating their market",popular:!1}],TBe=t=>t==="Major"?"All packages build on your premium base offer  which already includes broadcast production, photography, banner graphics, and PPV revenue share at zero cost":t==="Established"?"All packages build on your enhanced base offer  which already includes professional production, banner graphics, and PPV revenue share at zero cost":"All packages include our zero-cost live production + PPV revenue share as the base service",ZV=t=>t==="Major"?"Your Major tier includes broadcast production, photography, banner graphics, and PPV revenue share at no extra cost. These packages add even more on top of your premium base offer.":t==="Established"?"Your Established tier includes banner graphics at no extra cost. These packages add even more on top of your enhanced base offer.":null,CBe=({formData:t,analysis:e,nextStep:r,prevStep:n,selectedAddOns:i=[],setSelectedAddOns:s})=>{const[o,c]=j.useState(null),[u,l]=j.useState(!1),[d,f]=j.useState(null),[A,p]=j.useState(t.showsPerYear),g=e?.potentialStreamingRevenue?.expectedPurchases||Math.round((e?.potentialStreamingRevenue?.viewerEstimate||200)*.6),[y,x]=j.useState(g),[w,E]=j.useState(25);if(!e)return a.jsx("section",{className:"min-h-screen py-20 px-4 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-gray-400",children:"No analysis available. Please complete the profile form."}),a.jsx("button",{onClick:n,className:"mt-6 px-6 py-3 bg-primary-600 hover:bg-primary-700 text-white font-bold rounded-lg transition-all",children:"Go Back"})]})});const T=[{metric:"Event Frequency",value:Math.min(t.showsPerYear/12*100,100)},{metric:"Audience Size",value:Math.min(t.avgAttendance/1e3*100,100)},{metric:"Social Reach",value:Math.min(t.socialFollowing/1e5*100,100)},{metric:"Venue Scale",value:Math.min(t.venueCapacity/2e3*100,100)},{metric:"Growth",value:t.growthTrajectory==="rapidly-growing"?100:t.growthTrajectory==="growing"?85:t.growthTrajectory==="stable"?60:30}],C={Grassroots:"from-green-600 to-emerald-600",Regional:"from-blue-600 to-cyan-600",Established:"from-purple-600 to-pink-600",Major:"from-amber-600 to-red-600"},N={Grassroots:"",Regional:"",Established:"",Major:""},I=Math.round(y*w),U=Math.round(I*.3),K=U*A,Y=se=>{if(i.includes(se)){if(s(i.filter(Ae=>Ae!==se)),d){const Ae=XV(e.tier).find(we=>we.name===d);Ae&&Ae.addOns.includes(se)&&f(null)}}else s([...i,se])},re=se=>{if(d===se.name)f(null),s(i.filter(Ae=>!se.addOns.includes(Ae)));else{f(se.name);const Ae=[...new Set([...i,...se.addOns])];s(Ae)}};return a.jsx("section",{className:"min-h-screen py-12 sm:py-20 px-4",children:a.jsxs("div",{className:"max-w-6xl mx-auto",children:[a.jsxs(Or.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center mb-8 sm:mb-12",children:[a.jsxs("div",{className:"inline-flex items-center gap-3 mb-4",children:[a.jsx(qf,{className:"w-10 h-10 sm:w-12 sm:h-12 text-primary-500"}),a.jsx("h2",{className:"text-3xl sm:text-4xl md:text-5xl font-black",children:a.jsx("span",{className:"text-gradient",children:"Your Analysis"})})]}),a.jsxs("p",{className:"text-base sm:text-lg md:text-xl text-gray-300 max-w-2xl mx-auto",children:["Tailored recommendations for ",t.orgName]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 sm:gap-8 mb-6",children:[a.jsxs(Or.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.2},className:`bg-gradient-to-br ${C[e.tier]} rounded-xl p-6 sm:p-8 border-2 border-white/20 card-glow`,children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("div",{className:"text-5xl sm:text-6xl",children:N[e.tier]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl sm:text-2xl font-black text-white/90 mb-1",children:"Organization Tier"}),a.jsx("p",{className:"text-white/70 text-sm sm:text-base",children:"Your classification"})]})]}),a.jsx("div",{className:"text-5xl sm:text-6xl md:text-7xl font-black text-white mb-4",children:e.tier}),a.jsxs("p",{className:"text-white/90 text-sm sm:text-base leading-relaxed",children:[e.tier==="Grassroots"&&`With ${t.showsPerYear} event${t.showsPerYear>1?"s":""}/year and ${t.avgAttendance.toLocaleString()} average attendance, you're building your foundation. Professional media coverage will help grow your audience and attract first sponsors.`,e.tier==="Regional"&&`With ${t.showsPerYear} event${t.showsPerYear>1?"s":""}/year and ${t.avgAttendance.toLocaleString()} average attendance, you're running a solid operation. Multi-camera production, live streaming, and sponsor packages will take you to the next level.`,e.tier==="Established"&&`With ${t.showsPerYear} event${t.showsPerYear>1?"s":""}/year and ${t.avgAttendance.toLocaleString()} average attendance, you're an established promotion. Broadcast-quality production with PPV capability and premium sponsor integration is your next move.`,e.tier==="Major"&&`With ${t.showsPerYear} event${t.showsPerYear>1?"s":""}/year and ${t.avgAttendance.toLocaleString()} average attendance, you're a major player. Full media partnerships, dedicated production teams, and broadcast-level media rights management are where the real value is.`]})]}),a.jsxs(Or.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.3},className:"bg-dark-800 border border-gray-700 rounded-xl p-6 sm:p-8",children:[a.jsx("h3",{className:"text-xl sm:text-2xl font-bold mb-6 text-white",children:"Your Profile Metrics"}),a.jsx(YC,{width:"100%",height:280,children:a.jsxs(wBe,{data:T,children:[a.jsx(Tte,{stroke:"#374151"}),a.jsx(jte,{dataKey:"metric",tick:{fill:"#9CA3AF",fontSize:11},className:"text-xs sm:text-sm"}),a.jsx(Hte,{name:"Score",dataKey:"value",stroke:"#F83B3B",fill:"#F83B3B",fillOpacity:.6})]})})]})]}),a.jsxs(Or.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.35},className:"bg-gradient-to-br from-blue-900/20 to-cyan-900/20 border border-blue-700/40 rounded-xl p-6 sm:p-8 mb-8",children:[a.jsxs("button",{onClick:()=>l(!u),className:"w-full flex items-start gap-4 text-left",children:[a.jsx(Qde,{className:"w-8 h-8 sm:w-10 sm:h-10 text-blue-400 flex-shrink-0"}),a.jsx("div",{className:"flex-1",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl sm:text-2xl font-black text-white mb-2",children:"Market Intelligence"}),a.jsx("p",{className:"text-sm sm:text-base text-gray-300",children:"What others at your tier are doing"})]}),u?a.jsx(EC,{className:"w-6 h-6 text-blue-400"}):a.jsx(sy,{className:"w-6 h-6 text-blue-400"})]})})]}),u&&a.jsxs("div",{className:"space-y-3 mt-4",children:[e.tier==="Grassroots"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-start gap-3 p-3 bg-dark-900/40 rounded-lg",children:[a.jsx("div",{className:"text-blue-400 text-xl",children:""}),a.jsxs("p",{className:"text-gray-200 text-sm sm:text-base",children:[a.jsx("strong",{className:"text-blue-300",children:"78% of grassroots promotions"})," still rely on phone footage  professional media is your competitive edge"]})]}),a.jsxs("div",{className:"flex items-start gap-3 p-3 bg-dark-900/40 rounded-lg",children:[a.jsx("div",{className:"text-blue-400 text-xl",children:""}),a.jsxs("p",{className:"text-gray-200 text-sm sm:text-base",children:["Promotions that invest in media coverage see ",a.jsx("strong",{className:"text-blue-300",children:"2-3x faster audience growth"})]})]})]}),e.tier==="Regional"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-start gap-3 p-3 bg-dark-900/40 rounded-lg",children:[a.jsx("div",{className:"text-blue-400 text-xl",children:""}),a.jsxs("p",{className:"text-gray-200 text-sm sm:text-base",children:[a.jsx("strong",{className:"text-blue-300",children:"62% of regional promotions"})," now offer live streaming  audiences expect it"]})]}),a.jsxs("div",{className:"flex items-start gap-3 p-3 bg-dark-900/40 rounded-lg",children:[a.jsx("div",{className:"text-blue-400 text-xl",children:""}),a.jsxs("p",{className:"text-gray-200 text-sm sm:text-base",children:["Regional promotions with professional media attract ",a.jsx("strong",{className:"text-blue-300",children:"40% more sponsor interest"})]})]})]}),e.tier==="Established"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-start gap-3 p-3 bg-dark-900/40 rounded-lg",children:[a.jsx("div",{className:"text-blue-400 text-xl",children:""}),a.jsxs("p",{className:"text-gray-200 text-sm sm:text-base",children:[a.jsx("strong",{className:"text-blue-300",children:"85% of established promotions"})," have moved to PPV  the question isn't if, but when"]})]}),a.jsxs("div",{className:"flex items-start gap-3 p-3 bg-dark-900/40 rounded-lg",children:[a.jsx("div",{className:"text-blue-400 text-xl",children:""}),a.jsxs("p",{className:"text-gray-200 text-sm sm:text-base",children:[a.jsx("strong",{className:"text-blue-300",children:"Top-tier media production is the #1 factor"})," sponsors cite when choosing event partnerships"]})]})]}),e.tier==="Major"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-start gap-3 p-3 bg-dark-900/40 rounded-lg",children:[a.jsx("div",{className:"text-blue-400 text-xl",children:""}),a.jsxs("p",{className:"text-gray-200 text-sm sm:text-base",children:["Major promotions with dedicated media teams generate ",a.jsx("strong",{className:"text-blue-300",children:"30-50% of revenue from content"})]})]}),a.jsxs("div",{className:"flex items-start gap-3 p-3 bg-dark-900/40 rounded-lg",children:[a.jsx("div",{className:"text-blue-400 text-xl",children:""}),a.jsxs("p",{className:"text-gray-200 text-sm sm:text-base",children:[a.jsx("strong",{className:"text-blue-300",children:"Broadcast-quality production is no longer a luxury"}),"  it's the baseline expectation"]})]})]})]})]}),a.jsxs(Or.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},className:"mb-8",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx(kb,{className:"w-10 h-10 sm:w-12 sm:h-12 text-amber-400 fill-amber-400"}),a.jsxs("h3",{className:"text-3xl sm:text-4xl font-black text-white",children:["Our Offer to ",t.orgName]})]}),a.jsxs("div",{className:"relative bg-gradient-to-br from-amber-600 via-orange-600 to-red-600 rounded-2xl p-8 sm:p-12 border-4 border-amber-400/50 card-glow overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 opacity-10",children:a.jsx("div",{className:"absolute inset-0",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.4'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}})}),a.jsxs("div",{className:"relative z-10",children:[a.jsxs("div",{className:"inline-flex items-center gap-2 bg-white/20 backdrop-blur-sm px-4 py-2 rounded-full mb-6",children:[a.jsx(xE,{className:"w-5 h-5 text-white"}),a.jsx("span",{className:"text-white font-bold text-sm",children:"ZERO-COST PRODUCTION"})]}),a.jsx("h4",{className:"text-4xl sm:text-5xl md:text-6xl font-black text-white mb-4 leading-tight",children:"Zero-Cost Live Stream Production"}),a.jsx("p",{className:"text-xl sm:text-2xl md:text-3xl text-white/90 mb-8 font-bold",children:"We produce your event. You pay nothing. You earn revenue."}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[a.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-6 border border-white/20",children:[a.jsxs("h5",{className:"text-xl font-black text-white mb-4 flex items-center gap-2",children:[a.jsx(_o,{className:"w-6 h-6"}),"What's Included FREE"]}),a.jsx("ul",{className:"space-y-3",children:_Be(e.tier).map((se,Ae)=>a.jsxs("li",{className:"flex items-start gap-3",children:[a.jsx(_o,{className:"w-5 h-5 text-white flex-shrink-0 mt-0.5"}),a.jsx("span",{className:"text-white text-sm sm:text-base",children:se})]},Ae))})]}),a.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-6 border border-white/20",children:[a.jsx("h5",{className:"text-xl font-black text-white mb-4",children:"How It Works"}),a.jsx("div",{className:"space-y-4",children:[{num:"1",text:e.tier==="Major"?"We produce your event with a full broadcast setup (3-4 cameras, PTZ, photographer)":e.tier==="Established"?"We produce your event with professional multi-camera coverage (2-3 cameras, full setup)":"We produce your live stream (1-2 pro cameras, full setup)"},{num:"2",text:"Fans purchase PPV access ($20-$30 per viewer)"},{num:"3",text:"You earn from all PPV revenue  free money you weren't making before"}].map(se=>a.jsxs("div",{className:"flex gap-4",children:[a.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-white rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-xl font-black text-orange-600",children:se.num})}),a.jsx("p",{className:"text-white text-sm sm:text-base flex-1 mt-1",children:se.text})]},se.num))})]})]}),a.jsxs("div",{className:"bg-green-900/40 backdrop-blur-sm border-2 border-green-400 rounded-xl p-6 text-center",children:[a.jsxs("p",{className:"text-2xl sm:text-3xl font-black text-white mb-2",children:["Your Production Cost: ",a.jsx("span",{className:"text-green-300",children:"$0"})]}),a.jsx("p",{className:"text-white/90 text-base sm:text-lg",children:"Zero upfront cost. Zero risk. Just professional streaming + revenue sharing."})]})]})]})]}),a.jsxs(Or.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.5},className:"bg-dark-800 border border-gray-700 rounded-xl p-6 sm:p-8 mb-8",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx(gY,{className:"w-8 h-8 sm:w-10 sm:h-10 text-green-400"}),a.jsx("h3",{className:"text-2xl sm:text-3xl font-black text-white",children:"Your Revenue Projection"})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 sm:gap-8",children:[a.jsxs("div",{className:"space-y-6",children:[a.jsx("h4",{className:"text-lg sm:text-xl font-bold text-white",children:"Your Numbers"}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-semibold mb-3 text-gray-300",children:["Events Per Year: ",a.jsx("span",{className:"text-primary-500 text-lg font-bold",children:A})]}),a.jsx("input",{type:"range",min:"1",max:"24",value:A,onChange:se=>p(parseInt(se.target.value)),className:"w-full h-3 accent-primary-600"}),a.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[a.jsx("span",{children:"1"}),a.jsx("span",{children:"24"})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-semibold mb-3 text-gray-300",children:["Expected PPV Purchases: ",a.jsx("span",{className:"text-primary-500 text-lg font-bold",children:y.toLocaleString()})]}),a.jsx("input",{type:"range",min:"50",max:"2000",step:"25",value:y,onChange:se=>x(parseInt(se.target.value)),className:"w-full h-3 accent-primary-600"}),a.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[a.jsx("span",{children:"50"}),a.jsx("span",{children:"2,000"})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Reference: Small shows 100-250 | Medium 300-600 | Large 800-2000+"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-semibold mb-3 text-gray-300",children:["PPV Price: ",a.jsxs("span",{className:"text-primary-500 text-lg font-bold",children:["$",w]})]}),a.jsx("input",{type:"range",min:"10",max:"50",step:"1",value:w,onChange:se=>E(parseInt(se.target.value)),className:"w-full h-3 accent-primary-600"}),a.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[a.jsx("span",{children:"$10"}),a.jsx("span",{children:"$50"})]})]}),a.jsxs("div",{className:"p-4 bg-green-900/20 border border-green-600/50 rounded-lg",children:[a.jsx("p",{className:"text-green-300 text-sm font-semibold mb-2",children:" The Zero-Cost Advantage"}),a.jsxs("p",{className:"text-green-200 text-xs leading-relaxed",children:["Without professional streaming: ",a.jsx("strong",{children:"$0 PPV revenue."}),a.jsx("br",{}),"With us: ",a.jsxs("strong",{children:["$",K.toLocaleString(),"/year"]}),"  at zero cost to you."]})]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("h4",{className:"text-lg sm:text-xl font-bold text-white flex items-center gap-3",children:[a.jsx(_f,{className:"w-6 h-6 text-green-400"}),"Revenue Breakdown"]}),a.jsxs("div",{className:"p-5 bg-gradient-to-br from-green-900/40 to-emerald-900/40 border-2 border-green-500 rounded-lg",children:[a.jsx("p",{className:"text-sm text-gray-300 font-semibold mb-1",children:"Your Production Cost"}),a.jsx("p",{className:"text-4xl sm:text-5xl font-black text-green-400",children:"$0"}),a.jsx("p",{className:"text-xs text-green-300 mt-2",children:" Zero upfront investment required"})]}),a.jsxs("div",{className:"p-5 bg-dark-900 rounded-lg",children:[a.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"Your Revenue Per Event"}),a.jsxs("p",{className:"text-3xl sm:text-4xl font-black text-green-400",children:["$",U.toLocaleString()]}),a.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Revenue from PPV sales  you weren't earning this before"})]}),a.jsxs("div",{className:"p-5 bg-gradient-to-br from-green-900/40 to-emerald-900/40 border-2 border-green-500 rounded-lg",children:[a.jsx("p",{className:"text-sm text-gray-300 font-semibold mb-1",children:"Your Annual Revenue"}),a.jsxs("p",{className:"text-3xl sm:text-4xl font-black text-green-400",children:["$",K.toLocaleString()]}),a.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["$",U.toLocaleString(),"  ",A," events"]})]}),a.jsx("div",{className:"p-4 bg-blue-900/20 border border-blue-700/50 rounded-lg",children:a.jsxs("p",{className:"text-sm text-blue-200 leading-relaxed",children:[" ",a.jsx("strong",{children:"100% Pure Profit:"})," Every dollar you earn is revenue you weren't generating before. Zero risk, zero cost, all upside. Plus the sponsor deals, ticket sales, and brand growth that come from professional streaming."]})})]})]})]}),a.jsxs(Or.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.58},className:"mb-8",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx(y0,{className:"w-8 h-8 sm:w-10 sm:h-10 text-primary-400 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-2xl sm:text-3xl font-black text-white",children:"Want Even More?"}),a.jsx("p",{className:"text-gray-400 text-sm sm:text-base",children:"Your free live stream is just the beginning. Upgrade your event with premium services."})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-6",children:EBe.filter(se=>!SBe[e.tier]?.includes(se.name)).map((se,Ae)=>{const we=o===se.name,Ce=i.includes(se.name),ve=se.icon;return a.jsx(Or.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1*Ae},className:`bg-dark-800 border-2 rounded-xl overflow-hidden transition-all cursor-pointer ${Ce?"border-primary-600 bg-primary-900/20":"border-gray-700 hover:border-primary-600/50"}`,onClick:()=>Y(se.name),children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[a.jsx("div",{className:`flex-shrink-0 w-12 h-12 rounded-lg flex items-center justify-center ${Ce?"bg-primary-600":"bg-primary-600/20"}`,children:a.jsx(ve,{className:`w-6 h-6 ${Ce?"text-white":"text-primary-400"}`})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1",children:[a.jsx("h4",{className:"text-lg font-bold text-white",children:se.name}),Ce&&a.jsx("div",{className:"flex-shrink-0 w-6 h-6 bg-green-500 rounded-full flex items-center justify-center",children:a.jsx(_o,{className:"w-4 h-4 text-white"})})]}),a.jsx("p",{className:"text-primary-400 font-bold",children:se.price}),se.priceDetail&&a.jsx("p",{className:"text-gray-500 text-xs",children:se.priceDetail})]})]}),a.jsx("p",{className:"text-gray-400 text-sm mb-4",children:se.description}),a.jsx("div",{className:"space-y-2",children:se.features.slice(0,we?se.features.length:3).map((ne,ce)=>a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(_o,{className:"w-4 h-4 text-green-400 flex-shrink-0 mt-0.5"}),a.jsx("span",{className:"text-gray-300 text-xs",children:ne})]},ce))}),se.features.length>3&&a.jsx("button",{onClick:ne=>{ne.stopPropagation(),c(we?null:se.name)},className:"flex items-center gap-1 text-primary-500 hover:text-primary-400 font-semibold text-xs mt-3 transition-colors",children:we?a.jsxs(a.Fragment,{children:[a.jsx(EC,{className:"w-4 h-4"}),"Show Less"]}):a.jsxs(a.Fragment,{children:[a.jsx(sy,{className:"w-4 h-4"}),"Show All (",se.features.length,")"]})}),a.jsx("button",{onClick:ne=>{ne.stopPropagation(),Y(se.name)},className:`w-full mt-4 py-2 px-4 rounded-lg font-bold transition-colors ${Ce?"bg-green-600 hover:bg-green-700 text-white":"bg-primary-600 hover:bg-primary-700 text-white"}`,children:Ce?" Selected":"Select"})]})},se.name)})}),ZV(e.tier)&&a.jsx("div",{className:"mb-6 p-4 bg-gradient-to-r from-green-900/20 to-emerald-900/20 border border-green-600/40 rounded-lg",children:a.jsxs("p",{className:"text-green-300 text-sm sm:text-base font-medium",children:[" ",ZV(e.tier)]})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:XV(e.tier).map((se,Ae)=>{const we=d===se.name;return a.jsxs("div",{onClick:()=>re(se),className:`bg-dark-800 border-2 rounded-xl p-6 sm:p-8 flex flex-col cursor-pointer transition-all relative ${we?"border-green-500 bg-green-900/20 ring-2 ring-green-500/30":se.popular?"border-primary-600 card-glow hover:border-primary-500":"border-gray-700 hover:border-primary-600/50"}`,children:[we&&a.jsx("div",{className:"absolute -top-3 right-4",children:a.jsxs("div",{className:"inline-flex items-center gap-1 bg-green-500 px-3 py-1 rounded-full",children:[a.jsx(_o,{className:"w-4 h-4 text-white"}),a.jsx("span",{className:"text-white font-bold text-xs",children:"SELECTED"})]})}),se.popular&&!we&&a.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2",children:a.jsxs("div",{className:"inline-flex items-center gap-1 bg-primary-600 px-4 py-1 rounded-full",children:[a.jsx(kb,{className:"w-4 h-4 text-white fill-white"}),a.jsx("span",{className:"text-white font-bold text-xs",children:"MOST POPULAR"})]})}),a.jsxs("div",{className:`mb-6 ${se.popular||we?"mt-2":""}`,children:[a.jsx("h4",{className:"text-xl sm:text-2xl font-black text-white mb-2",children:se.name}),a.jsxs("div",{className:"flex items-baseline gap-1 mb-3",children:[a.jsx("span",{className:"text-3xl sm:text-4xl font-black text-primary-500",children:se.price}),a.jsx("span",{className:"text-gray-400 text-sm",children:"/event"})]})]}),a.jsx("ul",{className:"space-y-3 mb-6 flex-1",children:se.features.map((Ce,ve)=>a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx(_o,{className:"w-5 h-5 text-green-400 flex-shrink-0 mt-0.5"}),a.jsx("span",{className:"text-gray-300 text-sm",children:Ce})]},ve))}),a.jsxs("div",{className:"mt-auto",children:[a.jsxs("p",{className:"text-xs text-gray-500 italic mb-4",children:["Best for: ",se.bestFor]}),a.jsx("button",{onClick:Ce=>{Ce.stopPropagation(),re(se)},className:`w-full py-3 px-4 rounded-lg font-bold transition-colors ${we?"bg-green-600 hover:bg-green-700 text-white":"bg-primary-600 hover:bg-primary-700 text-white"}`,children:we?" Package Selected":"Select Package"})]})]},se.name)})}),a.jsx("div",{className:"mt-6 text-center",children:a.jsx("p",{className:"text-gray-500 text-xs sm:text-sm",children:TBe(e.tier)})})]}),a.jsxs(Or.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.62},className:"bg-gradient-to-br from-orange-900/30 to-red-900/30 border border-orange-700/50 rounded-xl p-6 sm:p-8 mb-8",children:[a.jsxs("div",{className:"flex items-start gap-4 mb-6",children:[a.jsx(dB,{className:"w-8 h-8 sm:w-10 sm:h-10 text-orange-400 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl sm:text-2xl font-black text-white mb-2",children:"What's It Costing You to NOT Have Professional Streaming?"}),a.jsx("p",{className:"text-sm sm:text-base text-gray-300",children:"Every event without professional media is a missed opportunity"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"p-4 bg-dark-900/40 rounded-lg border border-orange-700/30",children:[a.jsx("div",{className:"text-3xl mb-2",children:""}),a.jsx("h4",{className:"font-bold text-white mb-2 text-sm sm:text-base",children:"Sponsor Deals Passing You By"}),a.jsx("p",{className:"text-xs sm:text-sm text-gray-300",children:"Brands partner with promotions that have professional content they can share"})]}),a.jsxs("div",{className:"p-4 bg-dark-900/40 rounded-lg border border-orange-700/30",children:[a.jsx("div",{className:"text-3xl mb-2",children:""}),a.jsx("h4",{className:"font-bold text-white mb-2 text-sm sm:text-base",children:"Audience Growth Stalling"}),a.jsx("p",{className:"text-xs sm:text-sm text-gray-300",children:"Fighters and fans choose events with the best media presence"})]}),a.jsxs("div",{className:"p-4 bg-dark-900/40 rounded-lg border border-orange-700/30",children:[a.jsx("div",{className:"text-3xl mb-2",children:""}),a.jsx("h4",{className:"font-bold text-white mb-2 text-sm sm:text-base",children:"PPV Revenue You're Missing"}),a.jsxs("p",{className:"text-xs sm:text-sm text-gray-300",children:["$",K.toLocaleString(),"/year in free revenue you could be earning  at zero cost"]})]})]})]}),a.jsx(Or.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.66},className:"mb-6 p-6 sm:p-8 bg-gradient-to-r from-green-900/30 to-emerald-900/30 border-2 border-green-600/50 rounded-xl",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx(oy,{className:"w-10 h-10 sm:w-12 sm:h-12 text-green-400 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl sm:text-2xl font-black text-white mb-3",children:"Our Guarantee"}),a.jsxs("p",{className:"text-base sm:text-lg text-gray-200 leading-relaxed",children:["If you're not completely satisfied with your first event's media package,",a.jsx("strong",{className:"text-green-300",children:" we'll re-edit the entire deliverable at no additional cost."})]}),a.jsx("p",{className:"text-sm text-green-400 mt-3 font-semibold",children:"Your success is our reputation. We stand behind our work."})]})]})}),a.jsxs(Or.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.7},className:"mb-8 p-5 bg-gradient-to-r from-amber-900/30 to-orange-900/30 border border-amber-600/50 rounded-xl",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("div",{className:"w-3 h-3 bg-amber-500 rounded-full animate-pulse"}),a.jsx("p",{className:"text-amber-400 font-bold text-sm sm:text-base",children:"Production Slots Filling Fast"})]}),a.jsxs("p",{className:"text-gray-300 text-sm sm:text-base",children:["We produce 3 weekends per month and book 8-12 weeks ahead. ",a.jsx("strong",{className:"text-amber-300",children:"Q2 2026 currently has 4 available production slots remaining."})]})]}),a.jsxs("div",{className:"flex gap-3 sm:gap-4",children:[a.jsxs("button",{onClick:n,className:"flex-1 flex items-center justify-center gap-2 px-6 py-4 bg-dark-700 hover:bg-dark-600 text-white font-bold rounded-lg transition-all text-base sm:text-lg",children:[a.jsx(U0,{className:"w-5 h-5"}),a.jsx("span",{className:"hidden sm:inline",children:"Back"})]}),a.jsxs("button",{onClick:r,className:"flex-[2] flex items-center justify-center gap-2 px-6 py-4 bg-primary-600 hover:bg-primary-700 text-white font-bold rounded-lg transition-all hover:scale-[1.02] text-base sm:text-lg",children:["Get Your Proposal",a.jsx(Rh,{className:"w-5 h-5"})]})]})]})})},jBe=({contactData:t,updateContactData:e,formData:r,onSubmit:n,prevStep:i})=>{const[s,o]=j.useState(!1),[c,u]=j.useState(null),l=t.name.trim().length>0&&t.email.trim().length>0,d=async()=>{u(null),o(!0);try{await n()}catch(f){console.error("Error saving contact:",f),u("Something went wrong. Please try again.")}finally{o(!1)}};return a.jsx("section",{className:"min-h-screen py-12 sm:py-20 px-4",children:a.jsxs("div",{className:"max-w-2xl mx-auto",children:[a.jsxs(Or.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center mb-8 sm:mb-12",children:[a.jsxs("div",{className:"inline-flex items-center gap-3 mb-4",children:[a.jsx(zp,{className:"w-10 h-10 sm:w-12 sm:h-12 text-primary-500"}),a.jsx("h2",{className:"text-3xl sm:text-4xl md:text-5xl font-black",children:a.jsx("span",{className:"text-gradient",children:"Get Your Custom Proposal"})})]}),a.jsxs("p",{className:"text-base sm:text-lg md:text-xl text-gray-300 max-w-xl mx-auto",children:["We've built a personalized media strategy for ",a.jsx("span",{className:"text-primary-400 font-bold",children:r.orgName}),". Enter your details to receive your full proposal."]})]}),a.jsxs(Or.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"bg-dark-800 border border-gray-700 rounded-xl p-6 sm:p-8",children:[a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm sm:text-base font-semibold mb-3 text-gray-300",children:a.jsxs("span",{className:"inline-flex items-center gap-2",children:[a.jsx(zp,{className:"w-4 h-4 text-primary-500"}),"Your Name ",a.jsx("span",{className:"text-primary-500",children:"*"})]})}),a.jsx("input",{type:"text",value:t.name,onChange:f=>e("name",f.target.value),className:"w-full px-4 py-3 sm:py-4 bg-dark-900 border-2 border-gray-700 rounded-lg text-white text-base sm:text-lg focus:border-primary-600 focus:outline-none transition-colors",placeholder:"John Smith"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm sm:text-base font-semibold mb-3 text-gray-300",children:a.jsxs("span",{className:"inline-flex items-center gap-2",children:[a.jsx(tu,{className:"w-4 h-4 text-primary-500"}),"Email Address ",a.jsx("span",{className:"text-primary-500",children:"*"})]})}),a.jsx("input",{type:"email",value:t.email,onChange:f=>e("email",f.target.value),className:"w-full px-4 py-3 sm:py-4 bg-dark-900 border-2 border-gray-700 rounded-lg text-white text-base sm:text-lg focus:border-primary-600 focus:outline-none transition-colors",placeholder:"john@organization.com"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm sm:text-base font-semibold mb-3 text-gray-300",children:a.jsxs("span",{className:"inline-flex items-center gap-2",children:[a.jsx(ay,{className:"w-4 h-4 text-gray-500"}),"Phone Number ",a.jsx("span",{className:"text-gray-500 text-sm font-normal",children:"(optional)"})]})}),a.jsx("input",{type:"tel",value:t.phone,onChange:f=>e("phone",f.target.value),className:"w-full px-4 py-3 sm:py-4 bg-dark-900 border-2 border-gray-700 rounded-lg text-white text-base sm:text-lg focus:border-primary-600 focus:outline-none transition-colors",placeholder:"04XX XXX XXX (optional)"})]})]}),c&&a.jsx("div",{className:"mt-4 p-3 bg-red-900/30 border border-red-700 rounded-lg text-red-200 text-sm",children:c}),a.jsxs("div",{className:"mt-6 flex items-start gap-3 p-4 bg-dark-900/50 rounded-lg",children:[a.jsx(oy,{className:"w-5 h-5 text-gray-500 flex-shrink-0 mt-0.5"}),a.jsx("p",{className:"text-xs sm:text-sm text-gray-500",children:"Your information is kept confidential and only used to prepare your custom proposal. We'll never share your details with third parties."})]}),a.jsxs("div",{className:"mt-8 flex gap-3",children:[a.jsxs("button",{onClick:i,className:"flex-1 flex items-center justify-center gap-2 px-6 py-4 bg-dark-700 hover:bg-dark-600 text-white font-bold rounded-lg transition-all text-base sm:text-lg",children:[a.jsx(U0,{className:"w-5 h-5"}),"Back"]}),a.jsxs("button",{onClick:d,disabled:!l||s,className:"flex-[2] flex items-center justify-center gap-2 px-6 py-4 bg-primary-600 hover:bg-primary-700 disabled:bg-gray-600 disabled:cursor-not-allowed text-white font-bold rounded-lg transition-all hover:scale-[1.02] text-base sm:text-lg",children:[s?"Saving...":"Continue",!s&&a.jsx(Rh,{className:"w-5 h-5"})]})]})]})]})})};var HL={exports:{}},rT={exports:{}};var NBe=rT.exports,JV;function kBe(){return JV||(JV=1,(function(t,e){(function(r,n){t.exports=n()})(NBe,(function(){var r=function(M,B){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Q,$){Q.__proto__=$}||function(Q,$){for(var ge in $)Object.prototype.hasOwnProperty.call($,ge)&&(Q[ge]=$[ge])},r(M,B)};function n(M,B){if(typeof B!="function"&&B!==null)throw new TypeError("Class extends value "+String(B)+" is not a constructor or null");r(M,B);function Q(){this.constructor=M}M.prototype=B===null?Object.create(B):(Q.prototype=B.prototype,new Q)}var i=function(){return i=Object.assign||function(B){for(var Q,$=1,ge=arguments.length;$<ge;$++){Q=arguments[$];for(var ke in Q)Object.prototype.hasOwnProperty.call(Q,ke)&&(B[ke]=Q[ke])}return B},i.apply(this,arguments)};function s(M,B,Q,$){function ge(ke){return ke instanceof Q?ke:new Q(function(He){He(ke)})}return new(Q||(Q=Promise))(function(ke,He){function ut(Zt){try{Ut($.next(Zt))}catch(lr){He(lr)}}function dt(Zt){try{Ut($.throw(Zt))}catch(lr){He(lr)}}function Ut(Zt){Zt.done?ke(Zt.value):ge(Zt.value).then(ut,dt)}Ut(($=$.apply(M,[])).next())})}function o(M,B){var Q={label:0,sent:function(){if(ke[0]&1)throw ke[1];return ke[1]},trys:[],ops:[]},$,ge,ke,He;return He={next:ut(0),throw:ut(1),return:ut(2)},typeof Symbol=="function"&&(He[Symbol.iterator]=function(){return this}),He;function ut(Ut){return function(Zt){return dt([Ut,Zt])}}function dt(Ut){if($)throw new TypeError("Generator is already executing.");for(;Q;)try{if($=1,ge&&(ke=Ut[0]&2?ge.return:Ut[0]?ge.throw||((ke=ge.return)&&ke.call(ge),0):ge.next)&&!(ke=ke.call(ge,Ut[1])).done)return ke;switch(ge=0,ke&&(Ut=[Ut[0]&2,ke.value]),Ut[0]){case 0:case 1:ke=Ut;break;case 4:return Q.label++,{value:Ut[1],done:!1};case 5:Q.label++,ge=Ut[1],Ut=[0];continue;case 7:Ut=Q.ops.pop(),Q.trys.pop();continue;default:if(ke=Q.trys,!(ke=ke.length>0&&ke[ke.length-1])&&(Ut[0]===6||Ut[0]===2)){Q=0;continue}if(Ut[0]===3&&(!ke||Ut[1]>ke[0]&&Ut[1]<ke[3])){Q.label=Ut[1];break}if(Ut[0]===6&&Q.label<ke[1]){Q.label=ke[1],ke=Ut;break}if(ke&&Q.label<ke[2]){Q.label=ke[2],Q.ops.push(Ut);break}ke[2]&&Q.ops.pop(),Q.trys.pop();continue}Ut=B.call(M,Q)}catch(Zt){Ut=[6,Zt],ge=0}finally{$=ke=0}if(Ut[0]&5)throw Ut[1];return{value:Ut[0]?Ut[1]:void 0,done:!0}}}function c(M,B,Q){if(arguments.length===2)for(var $=0,ge=B.length,ke;$<ge;$++)(ke||!($ in B))&&(ke||(ke=Array.prototype.slice.call(B,0,$)),ke[$]=B[$]);return M.concat(ke||B)}for(var u=(function(){function M(B,Q,$,ge){this.left=B,this.top=Q,this.width=$,this.height=ge}return M.prototype.add=function(B,Q,$,ge){return new M(this.left+B,this.top+Q,this.width+$,this.height+ge)},M.fromClientRect=function(B,Q){return new M(Q.left+B.windowBounds.left,Q.top+B.windowBounds.top,Q.width,Q.height)},M.fromDOMRectList=function(B,Q){var $=Array.from(Q).find(function(ge){return ge.width!==0});return $?new M($.left+B.windowBounds.left,$.top+B.windowBounds.top,$.width,$.height):M.EMPTY},M.EMPTY=new M(0,0,0,0),M})(),l=function(M,B){return u.fromClientRect(M,B.getBoundingClientRect())},d=function(M){var B=M.body,Q=M.documentElement;if(!B||!Q)throw new Error("Unable to get document size");var $=Math.max(Math.max(B.scrollWidth,Q.scrollWidth),Math.max(B.offsetWidth,Q.offsetWidth),Math.max(B.clientWidth,Q.clientWidth)),ge=Math.max(Math.max(B.scrollHeight,Q.scrollHeight),Math.max(B.offsetHeight,Q.offsetHeight),Math.max(B.clientHeight,Q.clientHeight));return new u(0,0,$,ge)},f=function(M){for(var B=[],Q=0,$=M.length;Q<$;){var ge=M.charCodeAt(Q++);if(ge>=55296&&ge<=56319&&Q<$){var ke=M.charCodeAt(Q++);(ke&64512)===56320?B.push(((ge&1023)<<10)+(ke&1023)+65536):(B.push(ge),Q--)}else B.push(ge)}return B},A=function(){for(var M=[],B=0;B<arguments.length;B++)M[B]=arguments[B];if(String.fromCodePoint)return String.fromCodePoint.apply(String,M);var Q=M.length;if(!Q)return"";for(var $=[],ge=-1,ke="";++ge<Q;){var He=M[ge];He<=65535?$.push(He):(He-=65536,$.push((He>>10)+55296,He%1024+56320)),(ge+1===Q||$.length>16384)&&(ke+=String.fromCharCode.apply(String,$),$.length=0)}return ke},p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",g=typeof Uint8Array>"u"?[]:new Uint8Array(256),y=0;y<p.length;y++)g[p.charCodeAt(y)]=y;for(var x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",w=typeof Uint8Array>"u"?[]:new Uint8Array(256),E=0;E<x.length;E++)w[x.charCodeAt(E)]=E;for(var T=function(M){var B=M.length*.75,Q=M.length,$,ge=0,ke,He,ut,dt;M[M.length-1]==="="&&(B--,M[M.length-2]==="="&&B--);var Ut=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(B):new Array(B),Zt=Array.isArray(Ut)?Ut:new Uint8Array(Ut);for($=0;$<Q;$+=4)ke=w[M.charCodeAt($)],He=w[M.charCodeAt($+1)],ut=w[M.charCodeAt($+2)],dt=w[M.charCodeAt($+3)],Zt[ge++]=ke<<2|He>>4,Zt[ge++]=(He&15)<<4|ut>>2,Zt[ge++]=(ut&3)<<6|dt&63;return Ut},C=function(M){for(var B=M.length,Q=[],$=0;$<B;$+=2)Q.push(M[$+1]<<8|M[$]);return Q},N=function(M){for(var B=M.length,Q=[],$=0;$<B;$+=4)Q.push(M[$+3]<<24|M[$+2]<<16|M[$+1]<<8|M[$]);return Q},I=5,U=11,K=2,Y=U-I,re=65536>>I,se=1<<I,Ae=se-1,we=1024>>I,Ce=re+we,ve=Ce,ne=32,ce=ve+ne,ae=65536>>U,De=1<<Y,Oe=De-1,be=function(M,B,Q){return M.slice?M.slice(B,Q):new Uint16Array(Array.prototype.slice.call(M,B,Q))},de=function(M,B,Q){return M.slice?M.slice(B,Q):new Uint32Array(Array.prototype.slice.call(M,B,Q))},xe=function(M,B){var Q=T(M),$=Array.isArray(Q)?N(Q):new Uint32Array(Q),ge=Array.isArray(Q)?C(Q):new Uint16Array(Q),ke=24,He=be(ge,ke/2,$[4]/2),ut=$[5]===2?be(ge,(ke+$[4])/2):de($,Math.ceil((ke+$[4])/4));return new je($[0],$[1],$[2],$[3],He,ut)},je=(function(){function M(B,Q,$,ge,ke,He){this.initialValue=B,this.errorValue=Q,this.highStart=$,this.highValueIndex=ge,this.index=ke,this.data=He}return M.prototype.get=function(B){var Q;if(B>=0){if(B<55296||B>56319&&B<=65535)return Q=this.index[B>>I],Q=(Q<<K)+(B&Ae),this.data[Q];if(B<=65535)return Q=this.index[re+(B-55296>>I)],Q=(Q<<K)+(B&Ae),this.data[Q];if(B<this.highStart)return Q=ce-ae+(B>>U),Q=this.index[Q],Q+=B>>I&Oe,Q=this.index[Q],Q=(Q<<K)+(B&Ae),this.data[Q];if(B<=1114111)return this.data[this.highValueIndex]}return this.errorValue},M})(),Me="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Re=typeof Uint8Array>"u"?[]:new Uint8Array(256),it=0;it<Me.length;it++)Re[Me.charCodeAt(it)]=it;var ht="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",Be=50,nt=1,Ge=2,ft=3,Dt=4,rt=5,kt=7,_t=8,wt=9,Tt=10,Er=11,pr=12,Xr=13,yn=14,Mn=15,dn=16,pn=17,mn=18,Kn=19,Zn=20,Li=21,ot=22,Yt=23,kr=24,nr=25,Qt=26,fr=27,zr=28,Yr=29,Ln=30,ln=31,Jn=32,rn=33,Ur=34,An=35,cn=36,On=37,li=38,Cs=39,Ds=40,js=41,ei=42,sn=43,ss=[9001,65288],ta="!",_n="",Cn="",Ms=xe(ht),Qs=[Ln,cn],Fs=[nt,Ge,ft,rt],rs=[Tt,_t],qs=[fr,Qt],Os=Fs.concat(rs),Qa=[li,Cs,Ds,Ur,An],ds=[Mn,Xr],bu=function(M,B){B===void 0&&(B="strict");var Q=[],$=[],ge=[];return M.forEach(function(ke,He){var ut=Ms.get(ke);if(ut>Be?(ge.push(!0),ut-=Be):ge.push(!1),["normal","auto","loose"].indexOf(B)!==-1&&[8208,8211,12316,12448].indexOf(ke)!==-1)return $.push(He),Q.push(dn);if(ut===Dt||ut===Er){if(He===0)return $.push(He),Q.push(Ln);var dt=Q[He-1];return Os.indexOf(dt)===-1?($.push($[He-1]),Q.push(dt)):($.push(He),Q.push(Ln))}if($.push(He),ut===ln)return Q.push(B==="strict"?Li:On);if(ut===ei||ut===Yr)return Q.push(Ln);if(ut===sn)return ke>=131072&&ke<=196605||ke>=196608&&ke<=262141?Q.push(On):Q.push(Ln);Q.push(ut)}),[$,Q,ge]},to=function(M,B,Q,$){var ge=$[Q];if(Array.isArray(M)?M.indexOf(ge)!==-1:M===ge)for(var ke=Q;ke<=$.length;){ke++;var He=$[ke];if(He===B)return!0;if(He!==Tt)break}if(ge===Tt)for(var ke=Q;ke>0;){ke--;var ut=$[ke];if(Array.isArray(M)?M.indexOf(ut)!==-1:M===ut)for(var dt=Q;dt<=$.length;){dt++;var He=$[dt];if(He===B)return!0;if(He!==Tt)break}if(ut!==Tt)break}return!1},Ml=function(M,B){for(var Q=M;Q>=0;){var $=B[Q];if($===Tt)Q--;else return $}return 0},nu=function(M,B,Q,$,ge){if(Q[$]===0)return _n;var ke=$-1;if(Array.isArray(ge)&&ge[ke]===!0)return _n;var He=ke-1,ut=ke+1,dt=B[ke],Ut=He>=0?B[He]:0,Zt=B[ut];if(dt===Ge&&Zt===ft)return _n;if(Fs.indexOf(dt)!==-1)return ta;if(Fs.indexOf(Zt)!==-1||rs.indexOf(Zt)!==-1)return _n;if(Ml(ke,B)===_t)return Cn;if(Ms.get(M[ke])===Er||(dt===Jn||dt===rn)&&Ms.get(M[ut])===Er||dt===kt||Zt===kt||dt===wt||[Tt,Xr,Mn].indexOf(dt)===-1&&Zt===wt||[pn,mn,Kn,kr,zr].indexOf(Zt)!==-1||Ml(ke,B)===ot||to(Yt,ot,ke,B)||to([pn,mn],Li,ke,B)||to(pr,pr,ke,B))return _n;if(dt===Tt)return Cn;if(dt===Yt||Zt===Yt)return _n;if(Zt===dn||dt===dn)return Cn;if([Xr,Mn,Li].indexOf(Zt)!==-1||dt===yn||Ut===cn&&ds.indexOf(dt)!==-1||dt===zr&&Zt===cn||Zt===Zn||Qs.indexOf(Zt)!==-1&&dt===nr||Qs.indexOf(dt)!==-1&&Zt===nr||dt===fr&&[On,Jn,rn].indexOf(Zt)!==-1||[On,Jn,rn].indexOf(dt)!==-1&&Zt===Qt||Qs.indexOf(dt)!==-1&&qs.indexOf(Zt)!==-1||qs.indexOf(dt)!==-1&&Qs.indexOf(Zt)!==-1||[fr,Qt].indexOf(dt)!==-1&&(Zt===nr||[ot,Mn].indexOf(Zt)!==-1&&B[ut+1]===nr)||[ot,Mn].indexOf(dt)!==-1&&Zt===nr||dt===nr&&[nr,zr,kr].indexOf(Zt)!==-1)return _n;if([nr,zr,kr,pn,mn].indexOf(Zt)!==-1)for(var lr=ke;lr>=0;){var Fr=B[lr];if(Fr===nr)return _n;if([zr,kr].indexOf(Fr)!==-1)lr--;else break}if([fr,Qt].indexOf(Zt)!==-1)for(var lr=[pn,mn].indexOf(dt)!==-1?He:ke;lr>=0;){var Fr=B[lr];if(Fr===nr)return _n;if([zr,kr].indexOf(Fr)!==-1)lr--;else break}if(li===dt&&[li,Cs,Ur,An].indexOf(Zt)!==-1||[Cs,Ur].indexOf(dt)!==-1&&[Cs,Ds].indexOf(Zt)!==-1||[Ds,An].indexOf(dt)!==-1&&Zt===Ds||Qa.indexOf(dt)!==-1&&[Zn,Qt].indexOf(Zt)!==-1||Qa.indexOf(Zt)!==-1&&dt===fr||Qs.indexOf(dt)!==-1&&Qs.indexOf(Zt)!==-1||dt===kr&&Qs.indexOf(Zt)!==-1||Qs.concat(nr).indexOf(dt)!==-1&&Zt===ot&&ss.indexOf(M[ut])===-1||Qs.concat(nr).indexOf(Zt)!==-1&&dt===mn)return _n;if(dt===js&&Zt===js){for(var Vn=Q[ke],gn=1;Vn>0&&(Vn--,B[Vn]===js);)gn++;if(gn%2!==0)return _n}return dt===Jn&&Zt===rn?_n:Cn},ml=function(M,B){B||(B={lineBreak:"normal",wordBreak:"normal"});var Q=bu(M,B.lineBreak),$=Q[0],ge=Q[1],ke=Q[2];(B.wordBreak==="break-all"||B.wordBreak==="break-word")&&(ge=ge.map(function(ut){return[nr,Ln,ei].indexOf(ut)!==-1?On:ut}));var He=B.wordBreak==="keep-all"?ke.map(function(ut,dt){return ut&&M[dt]>=19968&&M[dt]<=40959}):void 0;return[$,ge,He]},ra=(function(){function M(B,Q,$,ge){this.codePoints=B,this.required=Q===ta,this.start=$,this.end=ge}return M.prototype.slice=function(){return A.apply(void 0,this.codePoints.slice(this.start,this.end))},M})(),Ya=function(M,B){var Q=f(M),$=ml(Q,B),ge=$[0],ke=$[1],He=$[2],ut=Q.length,dt=0,Ut=0;return{next:function(){if(Ut>=ut)return{done:!0,value:null};for(var Zt=_n;Ut<ut&&(Zt=nu(Q,ke,ge,++Ut,He))===_n;);if(Zt!==_n||Ut===ut){var lr=new ra(Q,Zt,dt,Ut);return dt=Ut,{value:lr,done:!1}}return{done:!0,value:null}}}},Ws=1,ba=2,Us=4,kl=8,po=10,ro=47,pl=92,Fl=9,mc=32,Vs=34,ci=61,Ns=35,Ta=36,Va=37,Ca=39,gi=40,Xn=41,hs=95,wa=45,Qo=33,Hi=60,Vo=62,Ea=64,Xs=91,fs=93,To=61,za=123,zs=63,qa=125,go=124,no=126,zo=128,Ht=65533,V=42,ie=43,le=44,F=58,z=59,te=46,fe=0,Se=8,$e=11,ct=14,P=31,k=127,D=-1,G=48,X=97,ee=101,ye=102,he=117,me=122,Ie=65,Qe=69,qe=70,lt=85,Te=90,Et=function(M){return M>=G&&M<=57},at=function(M){return M>=55296&&M<=57343},Ct=function(M){return Et(M)||M>=Ie&&M<=qe||M>=X&&M<=ye},et=function(M){return M>=X&&M<=me},Pt=function(M){return M>=Ie&&M<=Te},qt=function(M){return et(M)||Pt(M)},It=function(M){return M>=zo},Je=function(M){return M===po||M===Fl||M===mc},zt=function(M){return qt(M)||It(M)||M===hs},Sr=function(M){return zt(M)||Et(M)||M===wa},ir=function(M){return M>=fe&&M<=Se||M===$e||M>=ct&&M<=P||M===k},Mt=function(M,B){return M!==pl?!1:B!==po},xr=function(M,B,Q){return M===wa?zt(B)||Mt(B,Q):zt(M)?!0:!!(M===pl&&Mt(M,B))},st=function(M,B,Q){return M===ie||M===wa?Et(B)?!0:B===te&&Et(Q):Et(M===te?B:M)},mt=function(M){var B=0,Q=1;(M[B]===ie||M[B]===wa)&&(M[B]===wa&&(Q=-1),B++);for(var $=[];Et(M[B]);)$.push(M[B++]);var ge=$.length?parseInt(A.apply(void 0,$),10):0;M[B]===te&&B++;for(var ke=[];Et(M[B]);)ke.push(M[B++]);var He=ke.length,ut=He?parseInt(A.apply(void 0,ke),10):0;(M[B]===Qe||M[B]===ee)&&B++;var dt=1;(M[B]===ie||M[B]===wa)&&(M[B]===wa&&(dt=-1),B++);for(var Ut=[];Et(M[B]);)Ut.push(M[B++]);var Zt=Ut.length?parseInt(A.apply(void 0,Ut),10):0;return Q*(ge+ut*Math.pow(10,-He))*Math.pow(10,dt*Zt)},Ot={type:2},Rt={type:3},Ar={type:4},jr={type:13},Br={type:8},ar={type:21},Lr={type:9},hn={type:10},tn={type:11},We={type:12},St={type:14},Nt={type:23},Gt={type:1},Xt={type:25},cr={type:24},Nr={type:26},Cr={type:27},Gr={type:28},un={type:29},En={type:31},Rn={type:32},yi=(function(){function M(){this._value=[]}return M.prototype.write=function(B){this._value=this._value.concat(f(B))},M.prototype.read=function(){for(var B=[],Q=this.consumeToken();Q!==Rn;)B.push(Q),Q=this.consumeToken();return B},M.prototype.consumeToken=function(){var B=this.consumeCodePoint();switch(B){case Vs:return this.consumeStringToken(Vs);case Ns:var Q=this.peekCodePoint(0),$=this.peekCodePoint(1),ge=this.peekCodePoint(2);if(Sr(Q)||Mt($,ge)){var ke=xr(Q,$,ge)?ba:Ws,He=this.consumeName();return{type:5,value:He,flags:ke}}break;case Ta:if(this.peekCodePoint(0)===ci)return this.consumeCodePoint(),jr;break;case Ca:return this.consumeStringToken(Ca);case gi:return Ot;case Xn:return Rt;case V:if(this.peekCodePoint(0)===ci)return this.consumeCodePoint(),St;break;case ie:if(st(B,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(B),this.consumeNumericToken();break;case le:return Ar;case wa:var ut=B,dt=this.peekCodePoint(0),Ut=this.peekCodePoint(1);if(st(ut,dt,Ut))return this.reconsumeCodePoint(B),this.consumeNumericToken();if(xr(ut,dt,Ut))return this.reconsumeCodePoint(B),this.consumeIdentLikeToken();if(dt===wa&&Ut===Vo)return this.consumeCodePoint(),this.consumeCodePoint(),cr;break;case te:if(st(B,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(B),this.consumeNumericToken();break;case ro:if(this.peekCodePoint(0)===V)for(this.consumeCodePoint();;){var Zt=this.consumeCodePoint();if(Zt===V&&(Zt=this.consumeCodePoint(),Zt===ro))return this.consumeToken();if(Zt===D)return this.consumeToken()}break;case F:return Nr;case z:return Cr;case Hi:if(this.peekCodePoint(0)===Qo&&this.peekCodePoint(1)===wa&&this.peekCodePoint(2)===wa)return this.consumeCodePoint(),this.consumeCodePoint(),Xt;break;case Ea:var lr=this.peekCodePoint(0),Fr=this.peekCodePoint(1),Vn=this.peekCodePoint(2);if(xr(lr,Fr,Vn)){var He=this.consumeName();return{type:7,value:He}}break;case Xs:return Gr;case pl:if(Mt(B,this.peekCodePoint(0)))return this.reconsumeCodePoint(B),this.consumeIdentLikeToken();break;case fs:return un;case To:if(this.peekCodePoint(0)===ci)return this.consumeCodePoint(),Br;break;case za:return tn;case qa:return We;case he:case lt:var gn=this.peekCodePoint(0),Pn=this.peekCodePoint(1);return gn===ie&&(Ct(Pn)||Pn===zs)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(B),this.consumeIdentLikeToken();case go:if(this.peekCodePoint(0)===ci)return this.consumeCodePoint(),Lr;if(this.peekCodePoint(0)===go)return this.consumeCodePoint(),ar;break;case no:if(this.peekCodePoint(0)===ci)return this.consumeCodePoint(),hn;break;case D:return Rn}return Je(B)?(this.consumeWhiteSpace(),En):Et(B)?(this.reconsumeCodePoint(B),this.consumeNumericToken()):zt(B)?(this.reconsumeCodePoint(B),this.consumeIdentLikeToken()):{type:6,value:A(B)}},M.prototype.consumeCodePoint=function(){var B=this._value.shift();return typeof B>"u"?-1:B},M.prototype.reconsumeCodePoint=function(B){this._value.unshift(B)},M.prototype.peekCodePoint=function(B){return B>=this._value.length?-1:this._value[B]},M.prototype.consumeUnicodeRangeToken=function(){for(var B=[],Q=this.consumeCodePoint();Ct(Q)&&B.length<6;)B.push(Q),Q=this.consumeCodePoint();for(var $=!1;Q===zs&&B.length<6;)B.push(Q),Q=this.consumeCodePoint(),$=!0;if($){var ge=parseInt(A.apply(void 0,B.map(function(dt){return dt===zs?G:dt})),16),ke=parseInt(A.apply(void 0,B.map(function(dt){return dt===zs?qe:dt})),16);return{type:30,start:ge,end:ke}}var He=parseInt(A.apply(void 0,B),16);if(this.peekCodePoint(0)===wa&&Ct(this.peekCodePoint(1))){this.consumeCodePoint(),Q=this.consumeCodePoint();for(var ut=[];Ct(Q)&&ut.length<6;)ut.push(Q),Q=this.consumeCodePoint();var ke=parseInt(A.apply(void 0,ut),16);return{type:30,start:He,end:ke}}else return{type:30,start:He,end:He}},M.prototype.consumeIdentLikeToken=function(){var B=this.consumeName();return B.toLowerCase()==="url"&&this.peekCodePoint(0)===gi?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===gi?(this.consumeCodePoint(),{type:19,value:B}):{type:20,value:B}},M.prototype.consumeUrlToken=function(){var B=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===D)return{type:22,value:""};var Q=this.peekCodePoint(0);if(Q===Ca||Q===Vs){var $=this.consumeStringToken(this.consumeCodePoint());return $.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===D||this.peekCodePoint(0)===Xn)?(this.consumeCodePoint(),{type:22,value:$.value}):(this.consumeBadUrlRemnants(),Nt)}for(;;){var ge=this.consumeCodePoint();if(ge===D||ge===Xn)return{type:22,value:A.apply(void 0,B)};if(Je(ge))return this.consumeWhiteSpace(),this.peekCodePoint(0)===D||this.peekCodePoint(0)===Xn?(this.consumeCodePoint(),{type:22,value:A.apply(void 0,B)}):(this.consumeBadUrlRemnants(),Nt);if(ge===Vs||ge===Ca||ge===gi||ir(ge))return this.consumeBadUrlRemnants(),Nt;if(ge===pl)if(Mt(ge,this.peekCodePoint(0)))B.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),Nt;else B.push(ge)}},M.prototype.consumeWhiteSpace=function(){for(;Je(this.peekCodePoint(0));)this.consumeCodePoint()},M.prototype.consumeBadUrlRemnants=function(){for(;;){var B=this.consumeCodePoint();if(B===Xn||B===D)return;Mt(B,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},M.prototype.consumeStringSlice=function(B){for(var Q=5e4,$="";B>0;){var ge=Math.min(Q,B);$+=A.apply(void 0,this._value.splice(0,ge)),B-=ge}return this._value.shift(),$},M.prototype.consumeStringToken=function(B){var Q="",$=0;do{var ge=this._value[$];if(ge===D||ge===void 0||ge===B)return Q+=this.consumeStringSlice($),{type:0,value:Q};if(ge===po)return this._value.splice(0,$),Gt;if(ge===pl){var ke=this._value[$+1];ke!==D&&ke!==void 0&&(ke===po?(Q+=this.consumeStringSlice($),$=-1,this._value.shift()):Mt(ge,ke)&&(Q+=this.consumeStringSlice($),Q+=A(this.consumeEscapedCodePoint()),$=-1))}$++}while(!0)},M.prototype.consumeNumber=function(){var B=[],Q=Us,$=this.peekCodePoint(0);for(($===ie||$===wa)&&B.push(this.consumeCodePoint());Et(this.peekCodePoint(0));)B.push(this.consumeCodePoint());$=this.peekCodePoint(0);var ge=this.peekCodePoint(1);if($===te&&Et(ge))for(B.push(this.consumeCodePoint(),this.consumeCodePoint()),Q=kl;Et(this.peekCodePoint(0));)B.push(this.consumeCodePoint());$=this.peekCodePoint(0),ge=this.peekCodePoint(1);var ke=this.peekCodePoint(2);if(($===Qe||$===ee)&&((ge===ie||ge===wa)&&Et(ke)||Et(ge)))for(B.push(this.consumeCodePoint(),this.consumeCodePoint()),Q=kl;Et(this.peekCodePoint(0));)B.push(this.consumeCodePoint());return[mt(B),Q]},M.prototype.consumeNumericToken=function(){var B=this.consumeNumber(),Q=B[0],$=B[1],ge=this.peekCodePoint(0),ke=this.peekCodePoint(1),He=this.peekCodePoint(2);if(xr(ge,ke,He)){var ut=this.consumeName();return{type:15,number:Q,flags:$,unit:ut}}return ge===Va?(this.consumeCodePoint(),{type:16,number:Q,flags:$}):{type:17,number:Q,flags:$}},M.prototype.consumeEscapedCodePoint=function(){var B=this.consumeCodePoint();if(Ct(B)){for(var Q=A(B);Ct(this.peekCodePoint(0))&&Q.length<6;)Q+=A(this.consumeCodePoint());Je(this.peekCodePoint(0))&&this.consumeCodePoint();var $=parseInt(Q,16);return $===0||at($)||$>1114111?Ht:$}return B===D?Ht:B},M.prototype.consumeName=function(){for(var B="";;){var Q=this.consumeCodePoint();if(Sr(Q))B+=A(Q);else if(Mt(Q,this.peekCodePoint(0)))B+=A(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(Q),B}},M})(),pt=(function(){function M(B){this._tokens=B}return M.create=function(B){var Q=new yi;return Q.write(B),new M(Q.read())},M.parseValue=function(B){return M.create(B).parseComponentValue()},M.parseValues=function(B){return M.create(B).parseComponentValues()},M.prototype.parseComponentValue=function(){for(var B=this.consumeToken();B.type===31;)B=this.consumeToken();if(B.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(B);var Q=this.consumeComponentValue();do B=this.consumeToken();while(B.type===31);if(B.type===32)return Q;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},M.prototype.parseComponentValues=function(){for(var B=[];;){var Q=this.consumeComponentValue();if(Q.type===32)return B;B.push(Q),B.push()}},M.prototype.consumeComponentValue=function(){var B=this.consumeToken();switch(B.type){case 11:case 28:case 2:return this.consumeSimpleBlock(B.type);case 19:return this.consumeFunction(B)}return B},M.prototype.consumeSimpleBlock=function(B){for(var Q={type:B,values:[]},$=this.consumeToken();;){if($.type===32||ga($,B))return Q;this.reconsumeToken($),Q.values.push(this.consumeComponentValue()),$=this.consumeToken()}},M.prototype.consumeFunction=function(B){for(var Q={name:B.value,values:[],type:18};;){var $=this.consumeToken();if($.type===32||$.type===3)return Q;this.reconsumeToken($),Q.values.push(this.consumeComponentValue())}},M.prototype.consumeToken=function(){var B=this._tokens.shift();return typeof B>"u"?Rn:B},M.prototype.reconsumeToken=function(B){this._tokens.unshift(B)},M})(),Sn=function(M){return M.type===15},Ri=function(M){return M.type===17},Tn=function(M){return M.type===20},nn=function(M){return M.type===0},ji=function(M,B){return Tn(M)&&M.value===B},Fn=function(M){return M.type!==31},Hn=function(M){return M.type!==31&&M.type!==4},$n=function(M){var B=[],Q=[];return M.forEach(function($){if($.type===4){if(Q.length===0)throw new Error("Error parsing function args, zero tokens for arg");B.push(Q),Q=[];return}$.type!==31&&Q.push($)}),Q.length&&B.push(Q),B},ga=function(M,B){return B===11&&M.type===12||B===28&&M.type===29?!0:B===2&&M.type===3},Di=function(M){return M.type===17||M.type===15},Gn=function(M){return M.type===16||Di(M)},ns=function(M){return M.length>1?[M[0],M[1]]:[M[0]]},_i={type:17,number:0,flags:Us},Un={type:16,number:50,flags:Us},ki={type:16,number:100,flags:Us},Wn=function(M,B,Q){var $=M[0],ge=M[1];return[Gi($,B),Gi(typeof ge<"u"?ge:$,Q)]},Gi=function(M,B){if(M.type===16)return M.number/100*B;if(Sn(M))switch(M.unit){case"rem":case"em":return 16*M.number;default:return M.number}return M.number},is="deg",Zi="grad",vs="rad",ja="turn",xi={name:"angle",parse:function(M,B){if(B.type===15)switch(B.unit){case is:return Math.PI*B.number/180;case Zi:return Math.PI/200*B.number;case vs:return B.number;case ja:return Math.PI*2*B.number}throw new Error("Unsupported angle type")}},Ys=function(M){return M.type===15&&(M.unit===is||M.unit===Zi||M.unit===vs||M.unit===ja)},Qi=function(M){var B=M.filter(Tn).map(function(Q){return Q.value}).join(" ");switch(B){case"to bottom right":case"to right bottom":case"left top":case"top left":return[_i,_i];case"to top":case"bottom":return ai(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[_i,ki];case"to right":case"left":return ai(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[ki,ki];case"to bottom":case"top":return ai(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[ki,_i];case"to left":case"right":return ai(270)}return 0},ai=function(M){return Math.PI*M/180},da={name:"color",parse:function(M,B){if(B.type===18){var Q=bi[B.name];if(typeof Q>"u")throw new Error('Attempting to parse an unsupported color function "'+B.name+'"');return Q(M,B.values)}if(B.type===5){if(B.value.length===3){var $=B.value.substring(0,1),ge=B.value.substring(1,2),ke=B.value.substring(2,3);return ls(parseInt($+$,16),parseInt(ge+ge,16),parseInt(ke+ke,16),1)}if(B.value.length===4){var $=B.value.substring(0,1),ge=B.value.substring(1,2),ke=B.value.substring(2,3),He=B.value.substring(3,4);return ls(parseInt($+$,16),parseInt(ge+ge,16),parseInt(ke+ke,16),parseInt(He+He,16)/255)}if(B.value.length===6){var $=B.value.substring(0,2),ge=B.value.substring(2,4),ke=B.value.substring(4,6);return ls(parseInt($,16),parseInt(ge,16),parseInt(ke,16),1)}if(B.value.length===8){var $=B.value.substring(0,2),ge=B.value.substring(2,4),ke=B.value.substring(4,6),He=B.value.substring(6,8);return ls(parseInt($,16),parseInt(ge,16),parseInt(ke,16),parseInt(He,16)/255)}}if(B.type===20){var ut=Xa[B.value.toUpperCase()];if(typeof ut<"u")return ut}return Xa.TRANSPARENT}},Ii=function(M){return(255&M)===0},xn=function(M){var B=255&M,Q=255&M>>8,$=255&M>>16,ge=255&M>>24;return B<255?"rgba("+ge+","+$+","+Q+","+B/255+")":"rgb("+ge+","+$+","+Q+")"},ls=function(M,B,Q,$){return(M<<24|B<<16|Q<<8|Math.round($*255)<<0)>>>0},wu=function(M,B){if(M.type===17)return M.number;if(M.type===16){var Q=B===3?1:255;return B===3?M.number/100*Q:Math.round(M.number/100*Q)}return 0},io=function(M,B){var Q=B.filter(Hn);if(Q.length===3){var $=Q.map(wu),ge=$[0],ke=$[1],He=$[2];return ls(ge,ke,He,1)}if(Q.length===4){var ut=Q.map(wu),ge=ut[0],ke=ut[1],He=ut[2],dt=ut[3];return ls(ge,ke,He,dt)}return 0};function Ko(M,B,Q){return Q<0&&(Q+=1),Q>=1&&(Q-=1),Q<1/6?(B-M)*Q*6+M:Q<1/2?B:Q<2/3?(B-M)*6*(2/3-Q)+M:M}var Jl=function(M,B){var Q=B.filter(Hn),$=Q[0],ge=Q[1],ke=Q[2],He=Q[3],ut=($.type===17?ai($.number):xi.parse(M,$))/(Math.PI*2),dt=Gn(ge)?ge.number/100:0,Ut=Gn(ke)?ke.number/100:0,Zt=typeof He<"u"&&Gn(He)?Gi(He,1):1;if(dt===0)return ls(Ut*255,Ut*255,Ut*255,1);var lr=Ut<=.5?Ut*(dt+1):Ut+dt-Ut*dt,Fr=Ut*2-lr,Vn=Ko(Fr,lr,ut+1/3),gn=Ko(Fr,lr,ut),Pn=Ko(Fr,lr,ut-1/3);return ls(Vn*255,gn*255,Pn*255,Zt)},bi={hsl:Jl,hsla:Jl,rgb:io,rgba:io},Ra=function(M,B){return da.parse(M,pt.create(B).parseComponentValue())},Xa={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},Ul={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(M,B){return B.map(function(Q){if(Tn(Q))switch(Q.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},$l={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},ha=function(M,B){var Q=da.parse(M,B[0]),$=B[1];return $&&Gn($)?{color:Q,stop:$}:{color:Q,stop:null}},vo=function(M,B){var Q=M[0],$=M[M.length-1];Q.stop===null&&(Q.stop=_i),$.stop===null&&($.stop=ki);for(var ge=[],ke=0,He=0;He<M.length;He++){var ut=M[He].stop;if(ut!==null){var dt=Gi(ut,B);dt>ke?ge.push(dt):ge.push(ke),ke=dt}else ge.push(null)}for(var Ut=null,He=0;He<ge.length;He++){var Zt=ge[He];if(Zt===null)Ut===null&&(Ut=He);else if(Ut!==null){for(var lr=He-Ut,Fr=ge[Ut-1],Vn=(Zt-Fr)/(lr+1),gn=1;gn<=lr;gn++)ge[Ut+gn-1]=Vn*gn;Ut=null}}return M.map(function(Pn,Bi){var di=Pn.color;return{color:di,stop:Math.max(Math.min(1,ge[Bi]/B),0)}})},Za=function(M,B,Q){var $=B/2,ge=Q/2,ke=Gi(M[0],B)-$,He=ge-Gi(M[1],Q);return(Math.atan2(He,ke)+Math.PI*2)%(Math.PI*2)},Hc=function(M,B,Q){var $=typeof M=="number"?M:Za(M,B,Q),ge=Math.abs(B*Math.sin($))+Math.abs(Q*Math.cos($)),ke=B/2,He=Q/2,ut=ge/2,dt=Math.sin($-Math.PI/2)*ut,Ut=Math.cos($-Math.PI/2)*ut;return[ge,ke-Ut,ke+Ut,He-dt,He+dt]},Co=function(M,B){return Math.sqrt(M*M+B*B)},pc=function(M,B,Q,$,ge){var ke=[[0,0],[0,B],[M,0],[M,B]];return ke.reduce(function(He,ut){var dt=ut[0],Ut=ut[1],Zt=Co(Q-dt,$-Ut);return(ge?Zt<He.optimumDistance:Zt>He.optimumDistance)?{optimumCorner:ut,optimumDistance:Zt}:He},{optimumDistance:ge?1/0:-1/0,optimumCorner:null}).optimumCorner},Ka=function(M,B,Q,$,ge){var ke=0,He=0;switch(M.size){case 0:M.shape===0?ke=He=Math.min(Math.abs(B),Math.abs(B-$),Math.abs(Q),Math.abs(Q-ge)):M.shape===1&&(ke=Math.min(Math.abs(B),Math.abs(B-$)),He=Math.min(Math.abs(Q),Math.abs(Q-ge)));break;case 2:if(M.shape===0)ke=He=Math.min(Co(B,Q),Co(B,Q-ge),Co(B-$,Q),Co(B-$,Q-ge));else if(M.shape===1){var ut=Math.min(Math.abs(Q),Math.abs(Q-ge))/Math.min(Math.abs(B),Math.abs(B-$)),dt=pc($,ge,B,Q,!0),Ut=dt[0],Zt=dt[1];ke=Co(Ut-B,(Zt-Q)/ut),He=ut*ke}break;case 1:M.shape===0?ke=He=Math.max(Math.abs(B),Math.abs(B-$),Math.abs(Q),Math.abs(Q-ge)):M.shape===1&&(ke=Math.max(Math.abs(B),Math.abs(B-$)),He=Math.max(Math.abs(Q),Math.abs(Q-ge)));break;case 3:if(M.shape===0)ke=He=Math.max(Co(B,Q),Co(B,Q-ge),Co(B-$,Q),Co(B-$,Q-ge));else if(M.shape===1){var ut=Math.max(Math.abs(Q),Math.abs(Q-ge))/Math.max(Math.abs(B),Math.abs(B-$)),lr=pc($,ge,B,Q,!1),Ut=lr[0],Zt=lr[1];ke=Co(Ut-B,(Zt-Q)/ut),He=ut*ke}break}return Array.isArray(M.size)&&(ke=Gi(M.size[0],$),He=M.size.length===2?Gi(M.size[1],ge):ke),[ke,He]},Hl=function(M,B){var Q=ai(180),$=[];return $n(B).forEach(function(ge,ke){if(ke===0){var He=ge[0];if(He.type===20&&He.value==="to"){Q=Qi(ge);return}else if(Ys(He)){Q=xi.parse(M,He);return}}var ut=ha(M,ge);$.push(ut)}),{angle:Q,stops:$,type:1}},Ql=function(M,B){var Q=ai(180),$=[];return $n(B).forEach(function(ge,ke){if(ke===0){var He=ge[0];if(He.type===20&&["top","left","right","bottom"].indexOf(He.value)!==-1){Q=Qi(ge);return}else if(Ys(He)){Q=(xi.parse(M,He)+ai(270))%ai(360);return}}var ut=ha(M,ge);$.push(ut)}),{angle:Q,stops:$,type:1}},Il=function(M,B){var Q=ai(180),$=[],ge=1,ke=0,He=3,ut=[];return $n(B).forEach(function(dt,Ut){var Zt=dt[0];if(Ut===0){if(Tn(Zt)&&Zt.value==="linear"){ge=1;return}else if(Tn(Zt)&&Zt.value==="radial"){ge=2;return}}if(Zt.type===18){if(Zt.name==="from"){var lr=da.parse(M,Zt.values[0]);$.push({stop:_i,color:lr})}else if(Zt.name==="to"){var lr=da.parse(M,Zt.values[0]);$.push({stop:ki,color:lr})}else if(Zt.name==="color-stop"){var Fr=Zt.values.filter(Hn);if(Fr.length===2){var lr=da.parse(M,Fr[1]),Vn=Fr[0];Ri(Vn)&&$.push({stop:{type:16,number:Vn.number*100,flags:Vn.flags},color:lr})}}}}),ge===1?{angle:(Q+ai(180))%ai(360),stops:$,type:ge}:{size:He,shape:ke,stops:$,position:ut,type:ge}},yd="closest-side",ec="farthest-side",Vl="closest-corner",gc="farthest-corner",xd="circle",zl="ellipse",Kl="cover",Eu="contain",Gl=function(M,B){var Q=0,$=3,ge=[],ke=[];return $n(B).forEach(function(He,ut){var dt=!0;if(ut===0){var Ut=!1;dt=He.reduce(function(lr,Fr){if(Ut)if(Tn(Fr))switch(Fr.value){case"center":return ke.push(Un),lr;case"top":case"left":return ke.push(_i),lr;case"right":case"bottom":return ke.push(ki),lr}else(Gn(Fr)||Di(Fr))&&ke.push(Fr);else if(Tn(Fr))switch(Fr.value){case xd:return Q=0,!1;case zl:return Q=1,!1;case"at":return Ut=!0,!1;case yd:return $=0,!1;case Kl:case ec:return $=1,!1;case Eu:case Vl:return $=2,!1;case gc:return $=3,!1}else if(Di(Fr)||Gn(Fr))return Array.isArray($)||($=[]),$.push(Fr),!1;return lr},dt)}if(dt){var Zt=ha(M,He);ge.push(Zt)}}),{size:$,shape:Q,stops:ge,position:ke,type:2}},Lo=function(M,B){var Q=0,$=3,ge=[],ke=[];return $n(B).forEach(function(He,ut){var dt=!0;if(ut===0?dt=He.reduce(function(Zt,lr){if(Tn(lr))switch(lr.value){case"center":return ke.push(Un),!1;case"top":case"left":return ke.push(_i),!1;case"right":case"bottom":return ke.push(ki),!1}else if(Gn(lr)||Di(lr))return ke.push(lr),!1;return Zt},dt):ut===1&&(dt=He.reduce(function(Zt,lr){if(Tn(lr))switch(lr.value){case xd:return Q=0,!1;case zl:return Q=1,!1;case Eu:case yd:return $=0,!1;case ec:return $=1,!1;case Vl:return $=2,!1;case Kl:case gc:return $=3,!1}else if(Di(lr)||Gn(lr))return Array.isArray($)||($=[]),$.push(lr),!1;return Zt},dt)),dt){var Ut=ha(M,He);ge.push(Ut)}}),{size:$,shape:Q,stops:ge,position:ke,type:2}},gl=function(M){return M.type===1},iu=function(M){return M.type===2},vc={name:"image",parse:function(M,B){if(B.type===22){var Q={url:B.value,type:0};return M.cache.addImage(B.value),Q}if(B.type===18){var $=tc[B.name];if(typeof $>"u")throw new Error('Attempting to parse an unsupported image function "'+B.name+'"');return $(M,B.values)}throw new Error("Unsupported image type "+B.type)}};function Hd(M){return!(M.type===20&&M.value==="none")&&(M.type!==18||!!tc[M.name])}var tc={"linear-gradient":Hl,"-moz-linear-gradient":Ql,"-ms-linear-gradient":Ql,"-o-linear-gradient":Ql,"-webkit-linear-gradient":Ql,"radial-gradient":Gl,"-moz-radial-gradient":Lo,"-ms-radial-gradient":Lo,"-o-radial-gradient":Lo,"-webkit-radial-gradient":Lo,"-webkit-gradient":Il},Gu={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(M,B){if(B.length===0)return[];var Q=B[0];return Q.type===20&&Q.value==="none"?[]:B.filter(function($){return Hn($)&&Hd($)}).map(function($){return vc.parse(M,$)})}},bd={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(M,B){return B.map(function(Q){if(Tn(Q))switch(Q.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},vl={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(M,B){return $n(B).map(function(Q){return Q.filter(Gn)}).map(ns)}},sh={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(M,B){return $n(B).map(function(Q){return Q.filter(Tn).map(function($){return $.value}).join(" ")}).map(Ll)}},Ll=function(M){switch(M){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;default:return 0}},Fi;(function(M){M.AUTO="auto",M.CONTAIN="contain",M.COVER="cover"})(Fi||(Fi={}));var yc={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(M,B){return $n(B).map(function(Q){return Q.filter(Qc)})}},Qc=function(M){return Tn(M)||Gn(M)},Vc=function(M){return{name:"border-"+M+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},Wu=Vc("top"),xc=Vc("right"),Bo=Vc("bottom"),su=Vc("left"),v=function(M){return{name:"border-radius-"+M,initialValue:"0 0",prefix:!1,type:1,parse:function(B,Q){return ns(Q.filter(Gn))}}},_=v("top-left"),H=v("top-right"),oe=v("bottom-right"),Ee=v("bottom-left"),Ve=function(M){return{name:"border-"+M+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(B,Q){switch(Q){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},jt=Ve("top"),Jt=Ve("right"),br=Ve("bottom"),Vr=Ve("left"),vn=function(M){return{name:"border-"+M+"-width",initialValue:"0",type:0,prefix:!1,parse:function(B,Q){return Sn(Q)?Q.number:0}}},ui=vn("top"),As=vn("right"),Da=vn("bottom"),jo=vn("left"),il={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Zs={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(M,B){return B==="rtl"?1:0}},la={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(M,B){return B.filter(Tn).reduce(function(Q,$){return Q|jn($.value)},0)}},jn=function(M){switch(M){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},Yu={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(M,B){switch(B){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},bc={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(M,B){return B.type===20&&B.value==="normal"?0:B.type===17||B.type===15?B.number:0}},wd;(function(M){M.NORMAL="normal",M.STRICT="strict"})(wd||(wd={}));var Wl={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(M,B){return B==="strict"?wd.STRICT:wd.NORMAL}},_u={name:"line-height",initialValue:"normal",prefix:!1,type:4},so=function(M,B){return Tn(M)&&M.value==="normal"?1.2*B:M.type===17?B*M.number:Gn(M)?Gi(M,B):B},Su={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(M,B){return B.type===20&&B.value==="none"?null:vc.parse(M,B)}},Go={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(M,B){return B==="inside"?0:1}},Ed={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(M,B){switch(B){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;default:return-1}}},wc=function(M){return{name:"margin-"+M,initialValue:"0",prefix:!1,type:4}},Qd=wc("top"),Yl=wc("right"),Tu=wc("bottom"),Ec=wc("left"),zc={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(M,B){return B.filter(Tn).map(function(Q){switch(Q.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;default:return 0}})}},Eh={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(M,B){return B==="break-word"?"break-word":"normal"}},au=function(M){return{name:"padding-"+M,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},_d=au("top"),ah=au("right"),Kc=au("bottom"),yo=au("left"),_h={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(M,B){switch(B){case"right":return 2;case"center":case"justify":return 1;default:return 0}}},aA={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(M,B){switch(B){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},VA={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(M,B){return B.length===1&&ji(B[0],"none")?[]:$n(B).map(function(Q){for(var $={color:Xa.TRANSPARENT,offsetX:_i,offsetY:_i,blur:_i},ge=0,ke=0;ke<Q.length;ke++){var He=Q[ke];Di(He)?(ge===0?$.offsetX=He:ge===1?$.offsetY=He:$.blur=He,ge++):$.color=da.parse(M,He)}return $})}},oh={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(M,B){switch(B){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},lh={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(M,B){if(B.type===20&&B.value==="none")return null;if(B.type===18){var Q=Sh[B.name];if(typeof Q>"u")throw new Error('Attempting to parse an unsupported transform function "'+B.name+'"');return Q(B.values)}return null}},Po=function(M){var B=M.filter(function(Q){return Q.type===17}).map(function(Q){return Q.number});return B.length===6?B:null},ch=function(M){var B=M.filter(function(dt){return dt.type===17}).map(function(dt){return dt.number}),Q=B[0],$=B[1];B[2],B[3];var ge=B[4],ke=B[5];B[6],B[7],B[8],B[9],B[10],B[11];var He=B[12],ut=B[13];return B[14],B[15],B.length===16?[Q,$,ge,ke,He,ut]:null},Sh={matrix:Po,matrix3d:ch},ue={type:16,number:50,flags:Us},Fe=[ue,ue],yt={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(M,B){var Q=B.filter(Gn);return Q.length!==2?Fe:[Q[0],Q[1]]}},Lt={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(M,B){switch(B){case"hidden":return 1;case"collapse":return 2;default:return 0}}},er;(function(M){M.NORMAL="normal",M.BREAK_ALL="break-all",M.KEEP_ALL="keep-all"})(er||(er={}));for(var $r={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(M,B){switch(B){case"break-all":return er.BREAK_ALL;case"keep-all":return er.KEEP_ALL;default:return er.NORMAL}}},Zr={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(M,B){if(B.type===20)return{auto:!0,order:0};if(Ri(B))return{auto:!1,order:B.number};throw new Error("Invalid z-index number parsed")}},ti={name:"time",parse:function(M,B){if(B.type===15)switch(B.unit.toLowerCase()){case"s":return 1e3*B.number;case"ms":return B.number}throw new Error("Unsupported time type")}},ri={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(M,B){return Ri(B)?B.number:1}},Yi={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},as={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(M,B){return B.filter(Tn).map(function(Q){switch(Q.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(Q){return Q!==0})}},na={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(M,B){var Q=[],$=[];return B.forEach(function(ge){switch(ge.type){case 20:case 0:Q.push(ge.value);break;case 17:Q.push(ge.number.toString());break;case 4:$.push(Q.join(" ")),Q.length=0;break}}),Q.length&&$.push(Q.join(" ")),$.map(function(ge){return ge.indexOf(" ")===-1?ge:"'"+ge+"'"})}},Ma={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},Oo={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(M,B){return Ri(B)?B.number:Tn(B)&&B.value==="bold"?700:400}},Na={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(M,B){return B.filter(Tn).map(function(Q){return Q.value})}},Wo={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(M,B){switch(B){case"oblique":return"oblique";case"italic":return"italic";default:return"normal"}}},O=function(M,B){return(M&B)!==0},Pe={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(M,B){if(B.length===0)return[];var Q=B[0];return Q.type===20&&Q.value==="none"?[]:B}},J={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(M,B){if(B.length===0)return null;var Q=B[0];if(Q.type===20&&Q.value==="none")return null;for(var $=[],ge=B.filter(Fn),ke=0;ke<ge.length;ke++){var He=ge[ke],ut=ge[ke+1];if(He.type===20){var dt=ut&&Ri(ut)?ut.number:1;$.push({counter:He.value,increment:dt})}}return $}},Ye={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(M,B){if(B.length===0)return[];for(var Q=[],$=B.filter(Fn),ge=0;ge<$.length;ge++){var ke=$[ge],He=$[ge+1];if(Tn(ke)&&ke.value!=="none"){var ut=He&&Ri(He)?He.number:0;Q.push({counter:ke.value,reset:ut})}}return Q}},bt={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(M,B){return B.filter(Sn).map(function(Q){return ti.parse(M,Q)})}},xt={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(M,B){if(B.length===0)return null;var Q=B[0];if(Q.type===20&&Q.value==="none")return null;var $=[],ge=B.filter(nn);if(ge.length%2!==0)return null;for(var ke=0;ke<ge.length;ke+=2){var He=ge[ke].value,ut=ge[ke+1].value;$.push({open:He,close:ut})}return $}},mr=function(M,B,Q){if(!M)return"";var $=M[Math.min(B,M.length-1)];return $?Q?$.open:$.close:""},Kt={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(M,B){return B.length===1&&ji(B[0],"none")?[]:$n(B).map(function(Q){for(var $={color:255,offsetX:_i,offsetY:_i,blur:_i,spread:_i,inset:!1},ge=0,ke=0;ke<Q.length;ke++){var He=Q[ke];ji(He,"inset")?$.inset=!0:Di(He)?(ge===0?$.offsetX=He:ge===1?$.offsetY=He:ge===2?$.blur=He:$.spread=He,ge++):$.color=da.parse(M,He)}return $})}},Dn={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(M,B){var Q=[0,1,2],$=[];return B.filter(Tn).forEach(function(ge){switch(ge.value){case"stroke":$.push(1);break;case"fill":$.push(0);break;case"markers":$.push(2);break}}),Q.forEach(function(ge){$.indexOf(ge)===-1&&$.push(ge)}),$}},Ft={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},gr={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(M,B){return Sn(B)?B.number:0}},qi=(function(){function M(B,Q){var $,ge;this.animationDuration=Pr(B,bt,Q.animationDuration),this.backgroundClip=Pr(B,Ul,Q.backgroundClip),this.backgroundColor=Pr(B,$l,Q.backgroundColor),this.backgroundImage=Pr(B,Gu,Q.backgroundImage),this.backgroundOrigin=Pr(B,bd,Q.backgroundOrigin),this.backgroundPosition=Pr(B,vl,Q.backgroundPosition),this.backgroundRepeat=Pr(B,sh,Q.backgroundRepeat),this.backgroundSize=Pr(B,yc,Q.backgroundSize),this.borderTopColor=Pr(B,Wu,Q.borderTopColor),this.borderRightColor=Pr(B,xc,Q.borderRightColor),this.borderBottomColor=Pr(B,Bo,Q.borderBottomColor),this.borderLeftColor=Pr(B,su,Q.borderLeftColor),this.borderTopLeftRadius=Pr(B,_,Q.borderTopLeftRadius),this.borderTopRightRadius=Pr(B,H,Q.borderTopRightRadius),this.borderBottomRightRadius=Pr(B,oe,Q.borderBottomRightRadius),this.borderBottomLeftRadius=Pr(B,Ee,Q.borderBottomLeftRadius),this.borderTopStyle=Pr(B,jt,Q.borderTopStyle),this.borderRightStyle=Pr(B,Jt,Q.borderRightStyle),this.borderBottomStyle=Pr(B,br,Q.borderBottomStyle),this.borderLeftStyle=Pr(B,Vr,Q.borderLeftStyle),this.borderTopWidth=Pr(B,ui,Q.borderTopWidth),this.borderRightWidth=Pr(B,As,Q.borderRightWidth),this.borderBottomWidth=Pr(B,Da,Q.borderBottomWidth),this.borderLeftWidth=Pr(B,jo,Q.borderLeftWidth),this.boxShadow=Pr(B,Kt,Q.boxShadow),this.color=Pr(B,il,Q.color),this.direction=Pr(B,Zs,Q.direction),this.display=Pr(B,la,Q.display),this.float=Pr(B,Yu,Q.cssFloat),this.fontFamily=Pr(B,na,Q.fontFamily),this.fontSize=Pr(B,Ma,Q.fontSize),this.fontStyle=Pr(B,Wo,Q.fontStyle),this.fontVariant=Pr(B,Na,Q.fontVariant),this.fontWeight=Pr(B,Oo,Q.fontWeight),this.letterSpacing=Pr(B,bc,Q.letterSpacing),this.lineBreak=Pr(B,Wl,Q.lineBreak),this.lineHeight=Pr(B,_u,Q.lineHeight),this.listStyleImage=Pr(B,Su,Q.listStyleImage),this.listStylePosition=Pr(B,Go,Q.listStylePosition),this.listStyleType=Pr(B,Ed,Q.listStyleType),this.marginTop=Pr(B,Qd,Q.marginTop),this.marginRight=Pr(B,Yl,Q.marginRight),this.marginBottom=Pr(B,Tu,Q.marginBottom),this.marginLeft=Pr(B,Ec,Q.marginLeft),this.opacity=Pr(B,ri,Q.opacity);var ke=Pr(B,zc,Q.overflow);this.overflowX=ke[0],this.overflowY=ke[ke.length>1?1:0],this.overflowWrap=Pr(B,Eh,Q.overflowWrap),this.paddingTop=Pr(B,_d,Q.paddingTop),this.paddingRight=Pr(B,ah,Q.paddingRight),this.paddingBottom=Pr(B,Kc,Q.paddingBottom),this.paddingLeft=Pr(B,yo,Q.paddingLeft),this.paintOrder=Pr(B,Dn,Q.paintOrder),this.position=Pr(B,aA,Q.position),this.textAlign=Pr(B,_h,Q.textAlign),this.textDecorationColor=Pr(B,Yi,($=Q.textDecorationColor)!==null&&$!==void 0?$:Q.color),this.textDecorationLine=Pr(B,as,(ge=Q.textDecorationLine)!==null&&ge!==void 0?ge:Q.textDecoration),this.textShadow=Pr(B,VA,Q.textShadow),this.textTransform=Pr(B,oh,Q.textTransform),this.transform=Pr(B,lh,Q.transform),this.transformOrigin=Pr(B,yt,Q.transformOrigin),this.visibility=Pr(B,Lt,Q.visibility),this.webkitTextStrokeColor=Pr(B,Ft,Q.webkitTextStrokeColor),this.webkitTextStrokeWidth=Pr(B,gr,Q.webkitTextStrokeWidth),this.wordBreak=Pr(B,$r,Q.wordBreak),this.zIndex=Pr(B,Zr,Q.zIndex)}return M.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},M.prototype.isTransparent=function(){return Ii(this.backgroundColor)},M.prototype.isTransformed=function(){return this.transform!==null},M.prototype.isPositioned=function(){return this.position!==0},M.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},M.prototype.isFloating=function(){return this.float!==0},M.prototype.isInlineLevel=function(){return O(this.display,4)||O(this.display,33554432)||O(this.display,268435456)||O(this.display,536870912)||O(this.display,67108864)||O(this.display,134217728)},M})(),Nn=(function(){function M(B,Q){this.content=Pr(B,Pe,Q.content),this.quotes=Pr(B,xt,Q.quotes)}return M})(),en=(function(){function M(B,Q){this.counterIncrement=Pr(B,J,Q.counterIncrement),this.counterReset=Pr(B,Ye,Q.counterReset)}return M})(),Pr=function(M,B,Q){var $=new yi,ge=Q!==null&&typeof Q<"u"?Q.toString():B.initialValue;$.write(ge);var ke=new pt($.read());switch(B.type){case 2:var He=ke.parseComponentValue();return B.parse(M,Tn(He)?He.value:B.initialValue);case 0:return B.parse(M,ke.parseComponentValue());case 1:return B.parse(M,ke.parseComponentValues());case 4:return ke.parseComponentValue();case 3:switch(B.format){case"angle":return xi.parse(M,ke.parseComponentValue());case"color":return da.parse(M,ke.parseComponentValue());case"image":return vc.parse(M,ke.parseComponentValue());case"length":var ut=ke.parseComponentValue();return Di(ut)?ut:_i;case"length-percentage":var dt=ke.parseComponentValue();return Gn(dt)?dt:_i;case"time":return ti.parse(M,ke.parseComponentValue())}break}},Fa="data-html2canvas-debug",Wi=function(M){var B=M.getAttribute(Fa);switch(B){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},Ni=function(M,B){var Q=Wi(M);return Q===1||B===Q},Vi=(function(){function M(B,Q){if(this.context=B,this.textNodes=[],this.elements=[],this.flags=0,Ni(Q,3))debugger;this.styles=new qi(B,window.getComputedStyle(Q,null)),jf(Q)&&(this.styles.animationDuration.some(function($){return $>0})&&(Q.style.animationDuration="0s"),this.styles.transform!==null&&(Q.style.transform="none")),this.bounds=l(this.context,Q),Ni(Q,4)&&(this.flags|=16)}return M})(),ys="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",bn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",xs=typeof Uint8Array>"u"?[]:new Uint8Array(256),Ua=0;Ua<bn.length;Ua++)xs[bn.charCodeAt(Ua)]=Ua;for(var Si=function(M){var B=M.length*.75,Q=M.length,$,ge=0,ke,He,ut,dt;M[M.length-1]==="="&&(B--,M[M.length-2]==="="&&B--);var Ut=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(B):new Array(B),Zt=Array.isArray(Ut)?Ut:new Uint8Array(Ut);for($=0;$<Q;$+=4)ke=xs[M.charCodeAt($)],He=xs[M.charCodeAt($+1)],ut=xs[M.charCodeAt($+2)],dt=xs[M.charCodeAt($+3)],Zt[ge++]=ke<<2|He>>4,Zt[ge++]=(He&15)<<4|ut>>2,Zt[ge++]=(ut&3)<<6|dt&63;return Ut},ia=function(M){for(var B=M.length,Q=[],$=0;$<B;$+=2)Q.push(M[$+1]<<8|M[$]);return Q},ks=function(M){for(var B=M.length,Q=[],$=0;$<B;$+=4)Q.push(M[$+3]<<24|M[$+2]<<16|M[$+1]<<8|M[$]);return Q},ni=5,$i=11,rc=2,qu=$i-ni,ou=65536>>ni,yl=1<<ni,nc=yl-1,ao=1024>>ni,zA=ou+ao,uh=zA,Gc=32,Wc=uh+Gc,Ro=65536>>$i,Tf=1<<qu,Sd=Tf-1,Ji=function(M,B,Q){return M.slice?M.slice(B,Q):new Uint16Array(Array.prototype.slice.call(M,B,Q))},fa=function(M,B,Q){return M.slice?M.slice(B,Q):new Uint32Array(Array.prototype.slice.call(M,B,Q))},xo=function(M,B){var Q=Si(M),$=Array.isArray(Q)?ks(Q):new Uint32Array(Q),ge=Array.isArray(Q)?ia(Q):new Uint16Array(Q),ke=24,He=Ji(ge,ke/2,$[4]/2),ut=$[5]===2?Ji(ge,(ke+$[4])/2):fa($,Math.ceil((ke+$[4])/4));return new Th($[0],$[1],$[2],$[3],He,ut)},Th=(function(){function M(B,Q,$,ge,ke,He){this.initialValue=B,this.errorValue=Q,this.highStart=$,this.highValueIndex=ge,this.index=ke,this.data=He}return M.prototype.get=function(B){var Q;if(B>=0){if(B<55296||B>56319&&B<=65535)return Q=this.index[B>>ni],Q=(Q<<rc)+(B&nc),this.data[Q];if(B<=65535)return Q=this.index[ou+(B-55296>>ni)],Q=(Q<<rc)+(B&nc),this.data[Q];if(B<this.highStart)return Q=Wc-Ro+(B>>$i),Q=this.index[Q],Q+=B>>ni&Sd,Q=this.index[Q],Q=(Q<<rc)+(B&nc),this.data[Q];if(B<=1114111)return this.data[this.highValueIndex]}return this.errorValue},M})(),Xu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Td=typeof Uint8Array>"u"?[]:new Uint8Array(256),_c=0;_c<Xu.length;_c++)Td[Xu.charCodeAt(_c)]=_c;var Zu=1,sa=2,Ja=3,Is=4,xl=5,dh=7,oA=8,zh=9,KA=10,Jm=11,ep=12,tp=13,Yc=14,Yo=15,rp=function(M){for(var B=[],Q=0,$=M.length;Q<$;){var ge=M.charCodeAt(Q++);if(ge>=55296&&ge<=56319&&Q<$){var ke=M.charCodeAt(Q++);(ke&64512)===56320?B.push(((ge&1023)<<10)+(ke&1023)+65536):(B.push(ge),Q--)}else B.push(ge)}return B},Kh=function(){for(var M=[],B=0;B<arguments.length;B++)M[B]=arguments[B];if(String.fromCodePoint)return String.fromCodePoint.apply(String,M);var Q=M.length;if(!Q)return"";for(var $=[],ge=-1,ke="";++ge<Q;){var He=M[ge];He<=65535?$.push(He):(He-=65536,$.push((He>>10)+55296,He%1024+56320)),(ge+1===Q||$.length>16384)&&(ke+=String.fromCharCode.apply(String,$),$.length=0)}return ke},np=xo(ys),Cu="",Vd="",ip=function(M){return np.get(M)},mg=function(M,B,Q){var $=Q-2,ge=B[$],ke=B[Q-1],He=B[Q];if(ke===sa&&He===Ja)return Cu;if(ke===sa||ke===Ja||ke===Is||He===sa||He===Ja||He===Is)return Vd;if(ke===oA&&[oA,zh,Jm,ep].indexOf(He)!==-1||(ke===Jm||ke===zh)&&(He===zh||He===KA)||(ke===ep||ke===KA)&&He===KA||He===tp||He===xl||He===dh||ke===Zu)return Cu;if(ke===tp&&He===Yc){for(;ge===xl;)ge=B[--$];if(ge===Yc)return Cu}if(ke===Yo&&He===Yo){for(var ut=0;ge===Yo;)ut++,ge=B[--$];if(ut%2===0)return Cu}return Vd},pg=function(M){var B=rp(M),Q=B.length,$=0,ge=0,ke=B.map(ip);return{next:function(){if($>=Q)return{done:!0,value:null};for(var He=Cu;$<Q&&(He=mg(B,ke,++$))===Cu;);if(He!==Cu||$===Q){var ut=Kh.apply(null,B.slice(ge,$));return ge=$,{value:ut,done:!1}}return{done:!0,value:null}}}},G0=function(M){for(var B=pg(M),Q=[],$;!($=B.next()).done;)$.value&&Q.push($.value.slice());return Q},W0=function(M){var B=123;if(M.createRange){var Q=M.createRange();if(Q.getBoundingClientRect){var $=M.createElement("boundtest");$.style.height=B+"px",$.style.display="block",M.body.appendChild($),Q.selectNode($);var ge=Q.getBoundingClientRect(),ke=Math.round(ge.height);if(M.body.removeChild($),ke===B)return!0}}return!1},gg=function(M){var B=M.createElement("boundtest");B.style.width="50px",B.style.display="block",B.style.fontSize="12px",B.style.letterSpacing="0px",B.style.wordSpacing="0px",M.body.appendChild(B);var Q=M.createRange();B.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var $=B.firstChild,ge=f($.data).map(function(dt){return A(dt)}),ke=0,He={},ut=ge.every(function(dt,Ut){Q.setStart($,ke),Q.setEnd($,ke+dt.length);var Zt=Q.getBoundingClientRect();ke+=dt.length;var lr=Zt.x>He.x||Zt.y>He.y;return He=Zt,Ut===0?!0:lr});return M.body.removeChild(B),ut},sp=function(){return typeof new Image().crossOrigin<"u"},Ju=function(){return typeof new XMLHttpRequest().responseType=="string"},Cd=function(M){var B=new Image,Q=M.createElement("canvas"),$=Q.getContext("2d");if(!$)return!1;B.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{$.drawImage(B,0,0),Q.toDataURL()}catch{return!1}return!0},lA=function(M){return M[0]===0&&M[1]===255&&M[2]===0&&M[3]===255},ap=function(M){var B=M.createElement("canvas"),Q=100;B.width=Q,B.height=Q;var $=B.getContext("2d");if(!$)return Promise.reject(!1);$.fillStyle="rgb(0, 255, 0)",$.fillRect(0,0,Q,Q);var ge=new Image,ke=B.toDataURL();ge.src=ke;var He=vg(Q,Q,0,0,ge);return $.fillStyle="red",$.fillRect(0,0,Q,Q),GA(He).then(function(ut){$.drawImage(ut,0,0);var dt=$.getImageData(0,0,Q,Q).data;$.fillStyle="red",$.fillRect(0,0,Q,Q);var Ut=M.createElement("div");return Ut.style.backgroundImage="url("+ke+")",Ut.style.height=Q+"px",lA(dt)?GA(vg(Q,Q,0,0,Ut)):Promise.reject(!1)}).then(function(ut){return $.drawImage(ut,0,0),lA($.getImageData(0,0,Q,Q).data)}).catch(function(){return!1})},vg=function(M,B,Q,$,ge){var ke="http://www.w3.org/2000/svg",He=document.createElementNS(ke,"svg"),ut=document.createElementNS(ke,"foreignObject");return He.setAttributeNS(null,"width",M.toString()),He.setAttributeNS(null,"height",B.toString()),ut.setAttributeNS(null,"width","100%"),ut.setAttributeNS(null,"height","100%"),ut.setAttributeNS(null,"x",Q.toString()),ut.setAttributeNS(null,"y",$.toString()),ut.setAttributeNS(null,"externalResourcesRequired","true"),He.appendChild(ut),ut.appendChild(ge),He},GA=function(M){return new Promise(function(B,Q){var $=new Image;$.onload=function(){return B($)},$.onerror=Q,$.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(M))})},Bl={get SUPPORT_RANGE_BOUNDS(){var M=W0(document);return Object.defineProperty(Bl,"SUPPORT_RANGE_BOUNDS",{value:M}),M},get SUPPORT_WORD_BREAKING(){var M=Bl.SUPPORT_RANGE_BOUNDS&&gg(document);return Object.defineProperty(Bl,"SUPPORT_WORD_BREAKING",{value:M}),M},get SUPPORT_SVG_DRAWING(){var M=Cd(document);return Object.defineProperty(Bl,"SUPPORT_SVG_DRAWING",{value:M}),M},get SUPPORT_FOREIGNOBJECT_DRAWING(){var M=typeof Array.from=="function"&&typeof window.fetch=="function"?ap(document):Promise.resolve(!1);return Object.defineProperty(Bl,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:M}),M},get SUPPORT_CORS_IMAGES(){var M=sp();return Object.defineProperty(Bl,"SUPPORT_CORS_IMAGES",{value:M}),M},get SUPPORT_RESPONSE_TYPE(){var M=Ju();return Object.defineProperty(Bl,"SUPPORT_RESPONSE_TYPE",{value:M}),M},get SUPPORT_CORS_XHR(){var M="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Bl,"SUPPORT_CORS_XHR",{value:M}),M},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var M=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(Bl,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:M}),M}},Cf=(function(){function M(B,Q){this.text=B,this.bounds=Q}return M})(),yg=function(M,B,Q,$){var ge=ky(B,Q),ke=[],He=0;return ge.forEach(function(ut){if(Q.textDecorationLine.length||ut.trim().length>0)if(Bl.SUPPORT_RANGE_BOUNDS){var dt=op($,He,ut.length).getClientRects();if(dt.length>1){var Ut=cA(ut),Zt=0;Ut.forEach(function(Fr){ke.push(new Cf(Fr,u.fromDOMRectList(M,op($,Zt+He,Fr.length).getClientRects()))),Zt+=Fr.length})}else ke.push(new Cf(ut,u.fromDOMRectList(M,dt)))}else{var lr=$.splitText(ut.length);ke.push(new Cf(ut,xg(M,$))),$=lr}else Bl.SUPPORT_RANGE_BOUNDS||($=$.splitText(ut.length));He+=ut.length}),ke},xg=function(M,B){var Q=B.ownerDocument;if(Q){var $=Q.createElement("html2canvaswrapper");$.appendChild(B.cloneNode(!0));var ge=B.parentNode;if(ge){ge.replaceChild($,B);var ke=l(M,$);return $.firstChild&&ge.replaceChild($.firstChild,$),ke}}return u.EMPTY},op=function(M,B,Q){var $=M.ownerDocument;if(!$)throw new Error("Node has no owner document");var ge=$.createRange();return ge.setStart(M,B),ge.setEnd(M,B+Q),ge},cA=function(M){if(Bl.SUPPORT_NATIVE_TEXT_SEGMENTATION){var B=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(B.segment(M)).map(function(Q){return Q.segment})}return G0(M)},bg=function(M,B){if(Bl.SUPPORT_NATIVE_TEXT_SEGMENTATION){var Q=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(Q.segment(M)).map(function($){return $.segment})}return Y0(M,B)},ky=function(M,B){return B.letterSpacing!==0?cA(M):bg(M,B)},_1=[32,160,4961,65792,65793,4153,4241],Y0=function(M,B){for(var Q=Ya(M,{lineBreak:B.lineBreak,wordBreak:B.overflowWrap==="break-word"?"break-word":B.wordBreak}),$=[],ge,ke=function(){if(ge.value){var He=ge.value.slice(),ut=f(He),dt="";ut.forEach(function(Ut){_1.indexOf(Ut)===-1?dt+=A(Ut):(dt.length&&$.push(dt),$.push(A(Ut)),dt="")}),dt.length&&$.push(dt)}};!(ge=Q.next()).done;)ke();return $},WA=(function(){function M(B,Q,$){this.text=Iy(Q.data,$.textTransform),this.textBounds=yg(B,this.text,$,Q)}return M})(),Iy=function(M,B){switch(B){case 1:return M.toLowerCase();case 3:return M.replace(wg,Eg);case 2:return M.toUpperCase();default:return M}},wg=/(^|\s|:|-|\(|\))([a-z])/g,Eg=function(M,B,Q){return M.length>0?B+Q.toUpperCase():M},q0=(function(M){n(B,M);function B(Q,$){var ge=M.call(this,Q,$)||this;return ge.src=$.currentSrc||$.src,ge.intrinsicWidth=$.naturalWidth,ge.intrinsicHeight=$.naturalHeight,ge.context.cache.addImage(ge.src),ge}return B})(Vi),YA=(function(M){n(B,M);function B(Q,$){var ge=M.call(this,Q,$)||this;return ge.canvas=$,ge.intrinsicWidth=$.width,ge.intrinsicHeight=$.height,ge}return B})(Vi),_g=(function(M){n(B,M);function B(Q,$){var ge=M.call(this,Q,$)||this,ke=new XMLSerializer,He=l(Q,$);return $.setAttribute("width",He.width+"px"),$.setAttribute("height",He.height+"px"),ge.svg="data:image/svg+xml,"+encodeURIComponent(ke.serializeToString($)),ge.intrinsicWidth=$.width.baseVal.value,ge.intrinsicHeight=$.height.baseVal.value,ge.context.cache.addImage(ge.svg),ge}return B})(Vi),uA=(function(M){n(B,M);function B(Q,$){var ge=M.call(this,Q,$)||this;return ge.value=$.value,ge}return B})(Vi),Sg=(function(M){n(B,M);function B(Q,$){var ge=M.call(this,Q,$)||this;return ge.start=$.start,ge.reversed=typeof $.reversed=="boolean"&&$.reversed===!0,ge}return B})(Vi),Ly=[{type:15,flags:0,unit:"px",number:3}],X0=[{type:16,flags:0,number:50}],By=function(M){return M.width>M.height?new u(M.left+(M.width-M.height)/2,M.top,M.height,M.height):M.width<M.height?new u(M.left,M.top+(M.height-M.width)/2,M.width,M.width):M},Z0=function(M){var B=M.type===Ch?new Array(M.value.length+1).join(""):M.value;return B.length===0?M.placeholder||"":B},lp="checkbox",cp="radio",Ch="password",jd=707406591,zd=(function(M){n(B,M);function B(Q,$){var ge=M.call(this,Q,$)||this;switch(ge.type=$.type.toLowerCase(),ge.checked=$.checked,ge.value=Z0($),(ge.type===lp||ge.type===cp)&&(ge.styles.backgroundColor=3739148031,ge.styles.borderTopColor=ge.styles.borderRightColor=ge.styles.borderBottomColor=ge.styles.borderLeftColor=2779096575,ge.styles.borderTopWidth=ge.styles.borderRightWidth=ge.styles.borderBottomWidth=ge.styles.borderLeftWidth=1,ge.styles.borderTopStyle=ge.styles.borderRightStyle=ge.styles.borderBottomStyle=ge.styles.borderLeftStyle=1,ge.styles.backgroundClip=[0],ge.styles.backgroundOrigin=[0],ge.bounds=By(ge.bounds)),ge.type){case lp:ge.styles.borderTopRightRadius=ge.styles.borderTopLeftRadius=ge.styles.borderBottomRightRadius=ge.styles.borderBottomLeftRadius=Ly;break;case cp:ge.styles.borderTopRightRadius=ge.styles.borderTopLeftRadius=ge.styles.borderBottomRightRadius=ge.styles.borderBottomLeftRadius=X0;break}return ge}return B})(Vi),Py=(function(M){n(B,M);function B(Q,$){var ge=M.call(this,Q,$)||this,ke=$.options[$.selectedIndex||0];return ge.value=ke&&ke.text||"",ge}return B})(Vi),up=(function(M){n(B,M);function B(Q,$){var ge=M.call(this,Q,$)||this;return ge.value=$.value,ge}return B})(Vi),jh=(function(M){n(B,M);function B(Q,$){var ge=M.call(this,Q,$)||this;ge.src=$.src,ge.width=parseInt($.width,10)||0,ge.height=parseInt($.height,10)||0,ge.backgroundColor=ge.styles.backgroundColor;try{if($.contentWindow&&$.contentWindow.document&&$.contentWindow.document.documentElement){ge.tree=Tg(Q,$.contentWindow.document.documentElement);var ke=$.contentWindow.document.documentElement?Ra(Q,getComputedStyle($.contentWindow.document.documentElement).backgroundColor):Xa.TRANSPARENT,He=$.contentWindow.document.body?Ra(Q,getComputedStyle($.contentWindow.document.body).backgroundColor):Xa.TRANSPARENT;ge.backgroundColor=Ii(ke)?Ii(He)?ge.styles.backgroundColor:He:ke}}catch{}return ge}return B})(Vi),Nd=["OL","UL","MENU"],qA=function(M,B,Q,$){for(var ge=B.firstChild,ke=void 0;ge;ge=ke)if(ke=ge.nextSibling,Cg(ge)&&ge.data.trim().length>0)Q.textNodes.push(new WA(M,ge,Q.styles));else if(Nh(ge))if(ZA(ge)&&ge.assignedNodes)ge.assignedNodes().forEach(function(ut){return qA(M,ut,Q,$)});else{var He=J0(M,ge);He.styles.isVisible()&&(Oy(ge,He,$)?He.flags|=4:Ry(He.styles)&&(He.flags|=2),Nd.indexOf(ge.tagName)!==-1&&(He.flags|=8),Q.elements.push(He),ge.slot,ge.shadowRoot?qA(M,ge.shadowRoot,He,$):!fp(ge)&&!Ng(ge)&&!Ap(ge)&&qA(M,ge,He,$))}},J0=function(M,B){return Bg(B)?new q0(M,B):Ig(B)?new YA(M,B):Ng(B)?new _g(M,B):XA(B)?new uA(M,B):jg(B)?new Sg(M,B):dp(B)?new zd(M,B):Ap(B)?new Py(M,B):fp(B)?new up(M,B):tv(B)?new jh(M,B):new Vi(M,B)},Tg=function(M,B){var Q=J0(M,B);return Q.flags|=4,qA(M,B,Q,Q),Q},Oy=function(M,B,Q){return B.styles.isPositionedWithZIndex()||B.styles.opacity<1||B.styles.isTransformed()||kg(M)&&Q.styles.isTransparent()},Ry=function(M){return M.isPositioned()||M.isFloating()},Cg=function(M){return M.nodeType===Node.TEXT_NODE},Nh=function(M){return M.nodeType===Node.ELEMENT_NODE},jf=function(M){return Nh(M)&&typeof M.style<"u"&&!kh(M)},kh=function(M){return typeof M.className=="object"},XA=function(M){return M.tagName==="LI"},jg=function(M){return M.tagName==="OL"},dp=function(M){return M.tagName==="INPUT"},ev=function(M){return M.tagName==="HTML"},Ng=function(M){return M.tagName==="svg"},kg=function(M){return M.tagName==="BODY"},Ig=function(M){return M.tagName==="CANVAS"},Lg=function(M){return M.tagName==="VIDEO"},Bg=function(M){return M.tagName==="IMG"},tv=function(M){return M.tagName==="IFRAME"},Gh=function(M){return M.tagName==="STYLE"},hp=function(M){return M.tagName==="SCRIPT"},fp=function(M){return M.tagName==="TEXTAREA"},Ap=function(M){return M.tagName==="SELECT"},ZA=function(M){return M.tagName==="SLOT"},R=function(M){return M.tagName.indexOf("-")>0},q=(function(){function M(){this.counters={}}return M.prototype.getCounterValue=function(B){var Q=this.counters[B];return Q&&Q.length?Q[Q.length-1]:1},M.prototype.getCounterValues=function(B){var Q=this.counters[B];return Q||[]},M.prototype.pop=function(B){var Q=this;B.forEach(function($){return Q.counters[$].pop()})},M.prototype.parse=function(B){var Q=this,$=B.counterIncrement,ge=B.counterReset,ke=!0;$!==null&&$.forEach(function(ut){var dt=Q.counters[ut.counter];dt&&ut.increment!==0&&(ke=!1,dt.length||dt.push(1),dt[Math.max(0,dt.length-1)]+=ut.increment)});var He=[];return ke&&ge.forEach(function(ut){var dt=Q.counters[ut.counter];He.push(ut.counter),dt||(dt=Q.counters[ut.counter]=[]),dt.push(ut.reset)}),He},M})(),pe={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},_e={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Ue={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Ke={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},ze=function(M,B,Q,$,ge,ke){return M<B||M>Q?an(M,ge,ke.length>0):$.integers.reduce(function(He,ut,dt){for(;M>=ut;)M-=ut,He+=$.values[dt];return He},"")+ke},Xe=function(M,B,Q,$){var ge="";do Q||M--,ge=$(M)+ge,M/=B;while(M*B>=B);return ge},tt=function(M,B,Q,$,ge){var ke=Q-B+1;return(M<0?"-":"")+(Xe(Math.abs(M),ke,$,function(He){return A(Math.floor(He%ke)+B)})+ge)},vt=function(M,B,Q){Q===void 0&&(Q=". ");var $=B.length;return Xe(Math.abs(M),$,!1,function(ge){return B[Math.floor(ge%$)]})+Q},$t=1,dr=2,gt=4,Wt=8,tr=function(M,B,Q,$,ge,ke){if(M<-9999||M>9999)return an(M,4,ge.length>0);var He=Math.abs(M),ut=ge;if(He===0)return B[0]+ut;for(var dt=0;He>0&&dt<=4;dt++){var Ut=He%10;Ut===0&&O(ke,$t)&&ut!==""?ut=B[Ut]+ut:Ut>1||Ut===1&&dt===0||Ut===1&&dt===1&&O(ke,dr)||Ut===1&&dt===1&&O(ke,gt)&&M>100||Ut===1&&dt>1&&O(ke,Wt)?ut=B[Ut]+(dt>0?Q[dt-1]:"")+ut:Ut===1&&dt>0&&(ut=Q[dt-1]+ut),He=Math.floor(He/10)}return(M<0?$:"")+ut},Dr="",yr="",Mr="",Hr="",an=function(M,B,Q){var $=Q?". ":"",ge=Q?"":"",ke=Q?", ":"",He=Q?" ":"";switch(B){case 0:return""+He;case 1:return""+He;case 2:return""+He;case 5:var ut=tt(M,48,57,!0,$);return ut.length<4?"0"+ut:ut;case 4:return vt(M,"",ge);case 6:return ze(M,1,3999,pe,3,$).toLowerCase();case 7:return ze(M,1,3999,pe,3,$);case 8:return tt(M,945,969,!1,$);case 9:return tt(M,97,122,!1,$);case 10:return tt(M,65,90,!1,$);case 11:return tt(M,1632,1641,!0,$);case 12:case 49:return ze(M,1,9999,_e,3,$);case 35:return ze(M,1,9999,_e,3,$).toLowerCase();case 13:return tt(M,2534,2543,!0,$);case 14:case 30:return tt(M,6112,6121,!0,$);case 15:return vt(M,"",ge);case 16:return vt(M,"",ge);case 17:case 48:return tr(M,"",Dr,"",ge,dr|gt|Wt);case 47:return tr(M,"",yr,"",ge,$t|dr|gt|Wt);case 42:return tr(M,"",Dr,"",ge,dr|gt|Wt);case 41:return tr(M,"",yr,"",ge,$t|dr|gt|Wt);case 26:return tr(M,"","",Mr,ge,0);case 25:return tr(M,"","",Mr,ge,$t|dr|gt);case 31:return tr(M,"","",Hr,ke,$t|dr|gt);case 33:return tr(M,"","",Hr,ke,0);case 32:return tr(M,"","",Hr,ke,$t|dr|gt);case 18:return tt(M,2406,2415,!0,$);case 20:return ze(M,1,19999,Ke,3,$);case 21:return tt(M,2790,2799,!0,$);case 22:return tt(M,2662,2671,!0,$);case 22:return ze(M,1,10999,Ue,3,$);case 23:return vt(M,"");case 24:return vt(M,"");case 27:return tt(M,3302,3311,!0,$);case 28:return vt(M,"",ge);case 29:return vt(M,"",ge);case 34:return tt(M,3792,3801,!0,$);case 37:return tt(M,6160,6169,!0,$);case 38:return tt(M,4160,4169,!0,$);case 39:return tt(M,2918,2927,!0,$);case 40:return tt(M,1776,1785,!0,$);case 43:return tt(M,3046,3055,!0,$);case 44:return tt(M,3174,3183,!0,$);case 45:return tt(M,3664,3673,!0,$);case 46:return tt(M,3872,3881,!0,$);default:return tt(M,48,57,!0,$)}},Jr="data-html2canvas-ignore",Ti=(function(){function M(B,Q,$){if(this.context=B,this.options=$,this.scrolledElements=[],this.referenceElement=Q,this.counters=new q,this.quoteDepth=0,!Q.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(Q.ownerDocument.documentElement,!1)}return M.prototype.toIFrame=function(B,Q){var $=this,ge=Ls(B,Q);if(!ge.contentWindow)return Promise.reject("Unable to find iframe window");var ke=B.defaultView.pageXOffset,He=B.defaultView.pageYOffset,ut=ge.contentWindow,dt=ut.document,Ut=Pl(ge).then(function(){return s($,void 0,void 0,function(){var Zt,lr;return o(this,function(Fr){switch(Fr.label){case 0:return this.scrolledElements.forEach(_s),ut&&(ut.scrollTo(Q.left,Q.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(ut.scrollY!==Q.top||ut.scrollX!==Q.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(ut.scrollX-Q.left,ut.scrollY-Q.top,0,0))),Zt=this.options.onclone,lr=this.clonedReferenceElement,typeof lr>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:dt.fonts&&dt.fonts.ready?[4,dt.fonts.ready]:[3,2];case 1:Fr.sent(),Fr.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,ca(dt)]:[3,4];case 3:Fr.sent(),Fr.label=4;case 4:return typeof Zt=="function"?[2,Promise.resolve().then(function(){return Zt(dt,lr)}).then(function(){return ge})]:[2,ge]}})})});return dt.open(),dt.write(Bn(document.doctype)+"<html></html>"),sl(this.referenceElement.ownerDocument,ke,He),dt.replaceChild(dt.adoptNode(this.documentElement),dt.documentElement),dt.close(),Ut},M.prototype.createElementClone=function(B){if(Ni(B,2))debugger;if(Ig(B))return this.createCanvasClone(B);if(Lg(B))return this.createVideoClone(B);if(Gh(B))return this.createStyleClone(B);var Q=B.cloneNode(!1);return Bg(Q)&&(Bg(B)&&B.currentSrc&&B.currentSrc!==B.src&&(Q.src=B.currentSrc,Q.srcset=""),Q.loading==="lazy"&&(Q.loading="eager")),R(Q)?this.createCustomElementClone(Q):Q},M.prototype.createCustomElementClone=function(B){var Q=document.createElement("html2canvascustomelement");return hi(B.style,Q),Q},M.prototype.createStyleClone=function(B){try{var Q=B.sheet;if(Q&&Q.cssRules){var $=[].slice.call(Q.cssRules,0).reduce(function(ke,He){return He&&typeof He.cssText=="string"?ke+He.cssText:ke},""),ge=B.cloneNode(!1);return ge.textContent=$,ge}}catch(ke){if(this.context.logger.error("Unable to access cssRules property",ke),ke.name!=="SecurityError")throw ke}return B.cloneNode(!1)},M.prototype.createCanvasClone=function(B){var Q;if(this.options.inlineImages&&B.ownerDocument){var $=B.ownerDocument.createElement("img");try{return $.src=B.toDataURL(),$}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",B)}}var ge=B.cloneNode(!1);try{ge.width=B.width,ge.height=B.height;var ke=B.getContext("2d"),He=ge.getContext("2d");if(He)if(!this.options.allowTaint&&ke)He.putImageData(ke.getImageData(0,0,B.width,B.height),0,0);else{var ut=(Q=B.getContext("webgl2"))!==null&&Q!==void 0?Q:B.getContext("webgl");if(ut){var dt=ut.getContextAttributes();dt?.preserveDrawingBuffer===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",B)}He.drawImage(B,0,0)}return ge}catch{this.context.logger.info("Unable to clone canvas as it is tainted",B)}return ge},M.prototype.createVideoClone=function(B){var Q=B.ownerDocument.createElement("canvas");Q.width=B.offsetWidth,Q.height=B.offsetHeight;var $=Q.getContext("2d");try{return $&&($.drawImage(B,0,0,Q.width,Q.height),this.options.allowTaint||$.getImageData(0,0,Q.width,Q.height)),Q}catch{this.context.logger.info("Unable to clone video as it is tainted",B)}var ge=B.ownerDocument.createElement("canvas");return ge.width=B.offsetWidth,ge.height=B.offsetHeight,ge},M.prototype.appendChildNode=function(B,Q,$){(!Nh(Q)||!hp(Q)&&!Q.hasAttribute(Jr)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(Q)))&&(!this.options.copyStyles||!Nh(Q)||!Gh(Q))&&B.appendChild(this.cloneNode(Q,$))},M.prototype.cloneChildNodes=function(B,Q,$){for(var ge=this,ke=B.shadowRoot?B.shadowRoot.firstChild:B.firstChild;ke;ke=ke.nextSibling)if(Nh(ke)&&ZA(ke)&&typeof ke.assignedNodes=="function"){var He=ke.assignedNodes();He.length&&He.forEach(function(ut){return ge.appendChildNode(Q,ut,$)})}else this.appendChildNode(Q,ke,$)},M.prototype.cloneNode=function(B,Q){if(Cg(B))return document.createTextNode(B.data);if(!B.ownerDocument)return B.cloneNode(!1);var $=B.ownerDocument.defaultView;if($&&Nh(B)&&(jf(B)||kh(B))){var ge=this.createElementClone(B);ge.style.transitionProperty="none";var ke=$.getComputedStyle(B),He=$.getComputedStyle(B,":before"),ut=$.getComputedStyle(B,":after");this.referenceElement===B&&jf(ge)&&(this.clonedReferenceElement=ge),kg(ge)&&Tc(ge);var dt=this.counters.parse(new en(this.context,ke)),Ut=this.resolvePseudoContent(B,ge,He,Qn.BEFORE);R(B)&&(Q=!0),Lg(B)||this.cloneChildNodes(B,ge,Q),Ut&&ge.insertBefore(Ut,ge.firstChild);var Zt=this.resolvePseudoContent(B,ge,ut,Qn.AFTER);return Zt&&ge.appendChild(Zt),this.counters.pop(dt),(ke&&(this.options.copyStyles||kh(B))&&!tv(B)||Q)&&hi(ke,ge),(B.scrollTop!==0||B.scrollLeft!==0)&&this.scrolledElements.push([ge,B.scrollLeft,B.scrollTop]),(fp(B)||Ap(B))&&(fp(ge)||Ap(ge))&&(ge.value=B.value),ge}return B.cloneNode(!1)},M.prototype.resolvePseudoContent=function(B,Q,$,ge){var ke=this;if($){var He=$.content,ut=Q.ownerDocument;if(!(!ut||!He||He==="none"||He==="-moz-alt-content"||$.display==="none")){this.counters.parse(new en(this.context,$));var dt=new Nn(this.context,$),Ut=ut.createElement("html2canvaspseudoelement");hi($,Ut),dt.content.forEach(function(lr){if(lr.type===0)Ut.appendChild(ut.createTextNode(lr.value));else if(lr.type===22){var Fr=ut.createElement("img");Fr.src=lr.value,Fr.style.opacity="1",Ut.appendChild(Fr)}else if(lr.type===18){if(lr.name==="attr"){var Vn=lr.values.filter(Tn);Vn.length&&Ut.appendChild(ut.createTextNode(B.getAttribute(Vn[0].value)||""))}else if(lr.name==="counter"){var gn=lr.values.filter(Hn),Pn=gn[0],Bi=gn[1];if(Pn&&Tn(Pn)){var di=ke.counters.getCounterValue(Pn.value),oi=Bi&&Tn(Bi)?Ed.parse(ke.context,Bi.value):3;Ut.appendChild(ut.createTextNode(an(di,oi,!1)))}}else if(lr.name==="counters"){var ea=lr.values.filter(Hn),Pn=ea[0],Ks=ea[1],Bi=ea[2];if(Pn&&Tn(Pn)){var cs=ke.counters.getCounterValues(Pn.value),Yn=Bi&&Tn(Bi)?Ed.parse(ke.context,Bi.value):3,ua=Ks&&Ks.type===0?Ks.value:"",ya=cs.map(function(Do){return an(Do,Yn,!1)}).join(ua);Ut.appendChild(ut.createTextNode(ya))}}}else if(lr.type===20)switch(lr.value){case"open-quote":Ut.appendChild(ut.createTextNode(mr(dt.quotes,ke.quoteDepth++,!0)));break;case"close-quote":Ut.appendChild(ut.createTextNode(mr(dt.quotes,--ke.quoteDepth,!1)));break;default:Ut.appendChild(ut.createTextNode(lr.value))}}),Ut.className=ic+" "+Sc;var Zt=ge===Qn.BEFORE?" "+ic:" "+Sc;return kh(Q)?Q.className.baseValue+=Zt:Q.className+=Zt,Ut}}},M.destroy=function(B){return B.parentNode?(B.parentNode.removeChild(B),!0):!1},M})(),Qn;(function(M){M[M.BEFORE=0]="BEFORE",M[M.AFTER=1]="AFTER"})(Qn||(Qn={}));var Ls=function(M,B){var Q=M.createElement("iframe");return Q.className="html2canvas-container",Q.style.visibility="hidden",Q.style.position="fixed",Q.style.left="-10000px",Q.style.top="0px",Q.style.border="0",Q.width=B.width.toString(),Q.height=B.height.toString(),Q.scrolling="no",Q.setAttribute(Jr,"true"),M.body.appendChild(Q),Q},pi=function(M){return new Promise(function(B){if(M.complete){B();return}if(!M.src){B();return}M.onload=B,M.onerror=B})},ca=function(M){return Promise.all([].slice.call(M.images,0).map(pi))},Pl=function(M){return new Promise(function(B,Q){var $=M.contentWindow;if(!$)return Q("No window assigned for iframe");var ge=$.document;$.onload=M.onload=function(){$.onload=M.onload=null;var ke=setInterval(function(){ge.body.childNodes.length>0&&ge.readyState==="complete"&&(clearInterval(ke),B(M))},50)}})},Es=["all","d","content"],hi=function(M,B){for(var Q=M.length-1;Q>=0;Q--){var $=M.item(Q);Es.indexOf($)===-1&&B.style.setProperty($,M.getPropertyValue($))}return B},Bn=function(M){var B="";return M&&(B+="<!DOCTYPE ",M.name&&(B+=M.name),M.internalSubset&&(B+=M.internalSubset),M.publicId&&(B+='"'+M.publicId+'"'),M.systemId&&(B+='"'+M.systemId+'"'),B+=">"),B},sl=function(M,B,Q){M&&M.defaultView&&(B!==M.defaultView.pageXOffset||Q!==M.defaultView.pageYOffset)&&M.defaultView.scrollTo(B,Q)},_s=function(M){var B=M[0],Q=M[1],$=M[2];B.scrollLeft=Q,B.scrollTop=$},Rs=":before",bo=":after",ic="___html2canvas___pseudoelement_before",Sc="___html2canvas___pseudoelement_after",$a=`{
    content: "" !important;
    display: none !important;
}`,Tc=function(M){lu(M,"."+ic+Rs+$a+`
         .`+Sc+bo+$a)},lu=function(M,B){var Q=M.ownerDocument;if(Q){var $=Q.createElement("style");$.textContent=B,M.appendChild($)}},al=(function(){function M(){}return M.getOrigin=function(B){var Q=M._link;return Q?(Q.href=B,Q.href=Q.href,Q.protocol+Q.hostname+Q.port):"about:blank"},M.isSameOrigin=function(B){return M.getOrigin(B)===M._origin},M.setContext=function(B){M._link=B.document.createElement("a"),M._origin=M.getOrigin(B.location.href)},M._origin="about:blank",M})(),aa=(function(){function M(B,Q){this.context=B,this._options=Q,this._cache={}}return M.prototype.addImage=function(B){var Q=Promise.resolve();return this.has(B)||(Xc(B)||Cc(B))&&(this._cache[B]=this.loadImage(B)).catch(function(){}),Q},M.prototype.match=function(B){return this._cache[B]},M.prototype.loadImage=function(B){return s(this,void 0,void 0,function(){var Q,$,ge,ke,He=this;return o(this,function(ut){switch(ut.label){case 0:return Q=al.isSameOrigin(B),$=!qc(B)&&this._options.useCORS===!0&&Bl.SUPPORT_CORS_IMAGES&&!Q,ge=!qc(B)&&!Q&&!Xc(B)&&typeof this._options.proxy=="string"&&Bl.SUPPORT_CORS_XHR&&!$,!Q&&this._options.allowTaint===!1&&!qc(B)&&!Xc(B)&&!ge&&!$?[2]:(ke=B,ge?[4,this.proxy(ke)]:[3,2]);case 1:ke=ut.sent(),ut.label=2;case 2:return this.context.logger.debug("Added image "+B.substring(0,256)),[4,new Promise(function(dt,Ut){var Zt=new Image;Zt.onload=function(){return dt(Zt)},Zt.onerror=Ut,(oo(ke)||$)&&(Zt.crossOrigin="anonymous"),Zt.src=ke,Zt.complete===!0&&setTimeout(function(){return dt(Zt)},500),He._options.imageTimeout>0&&setTimeout(function(){return Ut("Timed out ("+He._options.imageTimeout+"ms) loading image")},He._options.imageTimeout)})];case 3:return[2,ut.sent()]}})})},M.prototype.has=function(B){return typeof this._cache[B]<"u"},M.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},M.prototype.proxy=function(B){var Q=this,$=this._options.proxy;if(!$)throw new Error("No proxy defined");var ge=B.substring(0,256);return new Promise(function(ke,He){var ut=Bl.SUPPORT_RESPONSE_TYPE?"blob":"text",dt=new XMLHttpRequest;dt.onload=function(){if(dt.status===200)if(ut==="text")ke(dt.response);else{var lr=new FileReader;lr.addEventListener("load",function(){return ke(lr.result)},!1),lr.addEventListener("error",function(Fr){return He(Fr)},!1),lr.readAsDataURL(dt.response)}else He("Failed to proxy resource "+ge+" with status code "+dt.status)},dt.onerror=He;var Ut=$.indexOf("?")>-1?"&":"?";if(dt.open("GET",""+$+Ut+"url="+encodeURIComponent(B)+"&responseType="+ut),ut!=="text"&&dt instanceof XMLHttpRequest&&(dt.responseType=ut),Q._options.imageTimeout){var Zt=Q._options.imageTimeout;dt.timeout=Zt,dt.ontimeout=function(){return He("Timed out ("+Zt+"ms) proxying "+ge)}}dt.send()})},M})(),zi=/^data:image\/svg\+xml/i,bl=/^data:image\/.*;base64,/i,eo=/^data:image\/.*/i,Cc=function(M){return Bl.SUPPORT_SVG_DRAWING||!lo(M)},qc=function(M){return eo.test(M)},oo=function(M){return bl.test(M)},Xc=function(M){return M.substr(0,4)==="blob"},lo=function(M){return M.substr(-3).toLowerCase()==="svg"||zi.test(M)},fn=(function(){function M(B,Q){this.type=0,this.x=B,this.y=Q}return M.prototype.add=function(B,Q){return new M(this.x+B,this.y+Q)},M})(),wo=function(M,B,Q){return new fn(M.x+(B.x-M.x)*Q,M.y+(B.y-M.y)*Q)},sc=(function(){function M(B,Q,$,ge){this.type=1,this.start=B,this.startControl=Q,this.endControl=$,this.end=ge}return M.prototype.subdivide=function(B,Q){var $=wo(this.start,this.startControl,B),ge=wo(this.startControl,this.endControl,B),ke=wo(this.endControl,this.end,B),He=wo($,ge,B),ut=wo(ge,ke,B),dt=wo(He,ut,B);return Q?new M(this.start,$,He,dt):new M(dt,ut,ke,this.end)},M.prototype.add=function(B,Q){return new M(this.start.add(B,Q),this.startControl.add(B,Q),this.endControl.add(B,Q),this.end.add(B,Q))},M.prototype.reverse=function(){return new M(this.end,this.endControl,this.startControl,this.start)},M})(),No=function(M){return M.type===1},ed=(function(){function M(B){var Q=B.styles,$=B.bounds,ge=Wn(Q.borderTopLeftRadius,$.width,$.height),ke=ge[0],He=ge[1],ut=Wn(Q.borderTopRightRadius,$.width,$.height),dt=ut[0],Ut=ut[1],Zt=Wn(Q.borderBottomRightRadius,$.width,$.height),lr=Zt[0],Fr=Zt[1],Vn=Wn(Q.borderBottomLeftRadius,$.width,$.height),gn=Vn[0],Pn=Vn[1],Bi=[];Bi.push((ke+dt)/$.width),Bi.push((gn+lr)/$.width),Bi.push((He+Pn)/$.height),Bi.push((Ut+Fr)/$.height);var di=Math.max.apply(Math,Bi);di>1&&(ke/=di,He/=di,dt/=di,Ut/=di,lr/=di,Fr/=di,gn/=di,Pn/=di);var oi=$.width-dt,ea=$.height-Fr,Ks=$.width-lr,cs=$.height-Pn,Yn=Q.borderTopWidth,ua=Q.borderRightWidth,ya=Q.borderBottomWidth,Mi=Q.borderLeftWidth,ac=Gi(Q.paddingTop,B.bounds.width),Do=Gi(Q.paddingRight,B.bounds.width),Yd=Gi(Q.paddingBottom,B.bounds.width),Eo=Gi(Q.paddingLeft,B.bounds.width);this.topLeftBorderDoubleOuterBox=ke>0||He>0?Js($.left+Mi/3,$.top+Yn/3,ke-Mi/3,He-Yn/3,bs.TOP_LEFT):new fn($.left+Mi/3,$.top+Yn/3),this.topRightBorderDoubleOuterBox=ke>0||He>0?Js($.left+oi,$.top+Yn/3,dt-ua/3,Ut-Yn/3,bs.TOP_RIGHT):new fn($.left+$.width-ua/3,$.top+Yn/3),this.bottomRightBorderDoubleOuterBox=lr>0||Fr>0?Js($.left+Ks,$.top+ea,lr-ua/3,Fr-ya/3,bs.BOTTOM_RIGHT):new fn($.left+$.width-ua/3,$.top+$.height-ya/3),this.bottomLeftBorderDoubleOuterBox=gn>0||Pn>0?Js($.left+Mi/3,$.top+cs,gn-Mi/3,Pn-ya/3,bs.BOTTOM_LEFT):new fn($.left+Mi/3,$.top+$.height-ya/3),this.topLeftBorderDoubleInnerBox=ke>0||He>0?Js($.left+Mi*2/3,$.top+Yn*2/3,ke-Mi*2/3,He-Yn*2/3,bs.TOP_LEFT):new fn($.left+Mi*2/3,$.top+Yn*2/3),this.topRightBorderDoubleInnerBox=ke>0||He>0?Js($.left+oi,$.top+Yn*2/3,dt-ua*2/3,Ut-Yn*2/3,bs.TOP_RIGHT):new fn($.left+$.width-ua*2/3,$.top+Yn*2/3),this.bottomRightBorderDoubleInnerBox=lr>0||Fr>0?Js($.left+Ks,$.top+ea,lr-ua*2/3,Fr-ya*2/3,bs.BOTTOM_RIGHT):new fn($.left+$.width-ua*2/3,$.top+$.height-ya*2/3),this.bottomLeftBorderDoubleInnerBox=gn>0||Pn>0?Js($.left+Mi*2/3,$.top+cs,gn-Mi*2/3,Pn-ya*2/3,bs.BOTTOM_LEFT):new fn($.left+Mi*2/3,$.top+$.height-ya*2/3),this.topLeftBorderStroke=ke>0||He>0?Js($.left+Mi/2,$.top+Yn/2,ke-Mi/2,He-Yn/2,bs.TOP_LEFT):new fn($.left+Mi/2,$.top+Yn/2),this.topRightBorderStroke=ke>0||He>0?Js($.left+oi,$.top+Yn/2,dt-ua/2,Ut-Yn/2,bs.TOP_RIGHT):new fn($.left+$.width-ua/2,$.top+Yn/2),this.bottomRightBorderStroke=lr>0||Fr>0?Js($.left+Ks,$.top+ea,lr-ua/2,Fr-ya/2,bs.BOTTOM_RIGHT):new fn($.left+$.width-ua/2,$.top+$.height-ya/2),this.bottomLeftBorderStroke=gn>0||Pn>0?Js($.left+Mi/2,$.top+cs,gn-Mi/2,Pn-ya/2,bs.BOTTOM_LEFT):new fn($.left+Mi/2,$.top+$.height-ya/2),this.topLeftBorderBox=ke>0||He>0?Js($.left,$.top,ke,He,bs.TOP_LEFT):new fn($.left,$.top),this.topRightBorderBox=dt>0||Ut>0?Js($.left+oi,$.top,dt,Ut,bs.TOP_RIGHT):new fn($.left+$.width,$.top),this.bottomRightBorderBox=lr>0||Fr>0?Js($.left+Ks,$.top+ea,lr,Fr,bs.BOTTOM_RIGHT):new fn($.left+$.width,$.top+$.height),this.bottomLeftBorderBox=gn>0||Pn>0?Js($.left,$.top+cs,gn,Pn,bs.BOTTOM_LEFT):new fn($.left,$.top+$.height),this.topLeftPaddingBox=ke>0||He>0?Js($.left+Mi,$.top+Yn,Math.max(0,ke-Mi),Math.max(0,He-Yn),bs.TOP_LEFT):new fn($.left+Mi,$.top+Yn),this.topRightPaddingBox=dt>0||Ut>0?Js($.left+Math.min(oi,$.width-ua),$.top+Yn,oi>$.width+ua?0:Math.max(0,dt-ua),Math.max(0,Ut-Yn),bs.TOP_RIGHT):new fn($.left+$.width-ua,$.top+Yn),this.bottomRightPaddingBox=lr>0||Fr>0?Js($.left+Math.min(Ks,$.width-Mi),$.top+Math.min(ea,$.height-ya),Math.max(0,lr-ua),Math.max(0,Fr-ya),bs.BOTTOM_RIGHT):new fn($.left+$.width-ua,$.top+$.height-ya),this.bottomLeftPaddingBox=gn>0||Pn>0?Js($.left+Mi,$.top+Math.min(cs,$.height-ya),Math.max(0,gn-Mi),Math.max(0,Pn-ya),bs.BOTTOM_LEFT):new fn($.left+Mi,$.top+$.height-ya),this.topLeftContentBox=ke>0||He>0?Js($.left+Mi+Eo,$.top+Yn+ac,Math.max(0,ke-(Mi+Eo)),Math.max(0,He-(Yn+ac)),bs.TOP_LEFT):new fn($.left+Mi+Eo,$.top+Yn+ac),this.topRightContentBox=dt>0||Ut>0?Js($.left+Math.min(oi,$.width+Mi+Eo),$.top+Yn+ac,oi>$.width+Mi+Eo?0:dt-Mi+Eo,Ut-(Yn+ac),bs.TOP_RIGHT):new fn($.left+$.width-(ua+Do),$.top+Yn+ac),this.bottomRightContentBox=lr>0||Fr>0?Js($.left+Math.min(Ks,$.width-(Mi+Eo)),$.top+Math.min(ea,$.height+Yn+ac),Math.max(0,lr-(ua+Do)),Fr-(ya+Yd),bs.BOTTOM_RIGHT):new fn($.left+$.width-(ua+Do),$.top+$.height-(ya+Yd)),this.bottomLeftContentBox=gn>0||Pn>0?Js($.left+Mi+Eo,$.top+cs,Math.max(0,gn-(Mi+Eo)),Pn-(ya+Yd),bs.BOTTOM_LEFT):new fn($.left+Mi+Eo,$.top+$.height-(ya+Yd))}return M})(),bs;(function(M){M[M.TOP_LEFT=0]="TOP_LEFT",M[M.TOP_RIGHT=1]="TOP_RIGHT",M[M.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",M[M.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(bs||(bs={}));var Js=function(M,B,Q,$,ge){var ke=4*((Math.sqrt(2)-1)/3),He=Q*ke,ut=$*ke,dt=M+Q,Ut=B+$;switch(ge){case bs.TOP_LEFT:return new sc(new fn(M,Ut),new fn(M,Ut-ut),new fn(dt-He,B),new fn(dt,B));case bs.TOP_RIGHT:return new sc(new fn(M,B),new fn(M+He,B),new fn(dt,Ut-ut),new fn(dt,Ut));case bs.BOTTOM_RIGHT:return new sc(new fn(dt,B),new fn(dt,B+ut),new fn(M+He,Ut),new fn(M,Ut));case bs.BOTTOM_LEFT:default:return new sc(new fn(dt,Ut),new fn(dt-He,Ut),new fn(M,B+ut),new fn(M,B))}},ka=function(M){return[M.topLeftBorderBox,M.topRightBorderBox,M.bottomRightBorderBox,M.bottomLeftBorderBox]},td=function(M){return[M.topLeftContentBox,M.topRightContentBox,M.bottomRightContentBox,M.bottomLeftContentBox]},wl=function(M){return[M.topLeftPaddingBox,M.topRightPaddingBox,M.bottomRightPaddingBox,M.bottomLeftPaddingBox]},ko=(function(){function M(B,Q,$){this.offsetX=B,this.offsetY=Q,this.matrix=$,this.type=0,this.target=6}return M})(),rd=(function(){function M(B,Q){this.path=B,this.target=Q,this.type=1}return M})(),jc=(function(){function M(B){this.opacity=B,this.type=2,this.target=6}return M})(),Ol=function(M){return M.type===0},Pg=function(M){return M.type===1},mp=function(M){return M.type===2},dA=function(M,B){return M.length===B.length?M.some(function(Q,$){return Q===B[$]}):!1},qo=function(M,B,Q,$,ge){return M.map(function(ke,He){switch(He){case 0:return ke.add(B,Q);case 1:return ke.add(B+$,Q);case 2:return ke.add(B+$,Q+ge);case 3:return ke.add(B,Q+ge)}return ke})},ju=(function(){function M(B){this.element=B,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return M})(),Kd=(function(){function M(B,Q){if(this.container=B,this.parent=Q,this.effects=[],this.curves=new ed(this.container),this.container.styles.opacity<1&&this.effects.push(new jc(this.container.styles.opacity)),this.container.styles.transform!==null){var $=this.container.bounds.left+this.container.styles.transformOrigin[0].number,ge=this.container.bounds.top+this.container.styles.transformOrigin[1].number,ke=this.container.styles.transform;this.effects.push(new ko($,ge,ke))}if(this.container.styles.overflowX!==0){var He=ka(this.curves),ut=wl(this.curves);dA(He,ut)?this.effects.push(new rd(He,6)):(this.effects.push(new rd(He,2)),this.effects.push(new rd(ut,4)))}}return M.prototype.getEffects=function(B){for(var Q=[2,3].indexOf(this.container.styles.position)===-1,$=this.parent,ge=this.effects.slice(0);$;){var ke=$.effects.filter(function(dt){return!Pg(dt)});if(Q||$.container.styles.position!==0||!$.parent){if(ge.unshift.apply(ge,ke),Q=[2,3].indexOf($.container.styles.position)===-1,$.container.styles.overflowX!==0){var He=ka($.curves),ut=wl($.curves);dA(He,ut)||ge.unshift(new rd(ut,6))}}else ge.unshift.apply(ge,ke);$=$.parent}return ge.filter(function(dt){return O(dt.target,B)})},M})(),hh=function(M,B,Q,$){M.container.elements.forEach(function(ge){var ke=O(ge.flags,4),He=O(ge.flags,2),ut=new Kd(ge,M);O(ge.styles.display,2048)&&$.push(ut);var dt=O(ge.flags,8)?[]:$;if(ke||He){var Ut=ke||ge.styles.isPositioned()?Q:B,Zt=new ju(ut);if(ge.styles.isPositioned()||ge.styles.opacity<1||ge.styles.isTransformed()){var lr=ge.styles.zIndex.order;if(lr<0){var Fr=0;Ut.negativeZIndex.some(function(gn,Pn){return lr>gn.element.container.styles.zIndex.order?(Fr=Pn,!1):Fr>0}),Ut.negativeZIndex.splice(Fr,0,Zt)}else if(lr>0){var Vn=0;Ut.positiveZIndex.some(function(gn,Pn){return lr>=gn.element.container.styles.zIndex.order?(Vn=Pn+1,!1):Vn>0}),Ut.positiveZIndex.splice(Vn,0,Zt)}else Ut.zeroOrAutoZIndexOrTransformedOrOpacity.push(Zt)}else ge.styles.isFloating()?Ut.nonPositionedFloats.push(Zt):Ut.nonPositionedInlineLevel.push(Zt);hh(ut,Zt,ke?Zt:Q,dt)}else ge.styles.isInlineLevel()?B.inlineLevel.push(ut):B.nonInlineLevel.push(ut),hh(ut,B,Q,dt);O(ge.flags,8)&&rv(ge,dt)})},rv=function(M,B){for(var Q=M instanceof Sg?M.start:1,$=M instanceof Sg?M.reversed:!1,ge=0;ge<B.length;ge++){var ke=B[ge];ke.container instanceof uA&&typeof ke.container.value=="number"&&ke.container.value!==0&&(Q=ke.container.value),ke.listValue=an(Q,ke.container.styles.listStyleType,!0),Q+=$?-1:1}},Dy=function(M){var B=new Kd(M,null),Q=new ju(B),$=[];return hh(B,Q,Q,$),rv(B.container,$),Q},My=function(M,B){switch(B){case 0:return co(M.topLeftBorderBox,M.topLeftPaddingBox,M.topRightBorderBox,M.topRightPaddingBox);case 1:return co(M.topRightBorderBox,M.topRightPaddingBox,M.bottomRightBorderBox,M.bottomRightPaddingBox);case 2:return co(M.bottomRightBorderBox,M.bottomRightPaddingBox,M.bottomLeftBorderBox,M.bottomLeftPaddingBox);default:return co(M.bottomLeftBorderBox,M.bottomLeftPaddingBox,M.topLeftBorderBox,M.topLeftPaddingBox)}},pp=function(M,B){switch(B){case 0:return co(M.topLeftBorderBox,M.topLeftBorderDoubleOuterBox,M.topRightBorderBox,M.topRightBorderDoubleOuterBox);case 1:return co(M.topRightBorderBox,M.topRightBorderDoubleOuterBox,M.bottomRightBorderBox,M.bottomRightBorderDoubleOuterBox);case 2:return co(M.bottomRightBorderBox,M.bottomRightBorderDoubleOuterBox,M.bottomLeftBorderBox,M.bottomLeftBorderDoubleOuterBox);default:return co(M.bottomLeftBorderBox,M.bottomLeftBorderDoubleOuterBox,M.topLeftBorderBox,M.topLeftBorderDoubleOuterBox)}},Zc=function(M,B){switch(B){case 0:return co(M.topLeftBorderDoubleInnerBox,M.topLeftPaddingBox,M.topRightBorderDoubleInnerBox,M.topRightPaddingBox);case 1:return co(M.topRightBorderDoubleInnerBox,M.topRightPaddingBox,M.bottomRightBorderDoubleInnerBox,M.bottomRightPaddingBox);case 2:return co(M.bottomRightBorderDoubleInnerBox,M.bottomRightPaddingBox,M.bottomLeftBorderDoubleInnerBox,M.bottomLeftPaddingBox);default:return co(M.bottomLeftBorderDoubleInnerBox,M.bottomLeftPaddingBox,M.topLeftBorderDoubleInnerBox,M.topLeftPaddingBox)}},Gd=function(M,B){switch(B){case 0:return JA(M.topLeftBorderStroke,M.topRightBorderStroke);case 1:return JA(M.topRightBorderStroke,M.bottomRightBorderStroke);case 2:return JA(M.bottomRightBorderStroke,M.bottomLeftBorderStroke);default:return JA(M.bottomLeftBorderStroke,M.topLeftBorderStroke)}},JA=function(M,B){var Q=[];return No(M)?Q.push(M.subdivide(.5,!1)):Q.push(M),No(B)?Q.push(B.subdivide(.5,!0)):Q.push(B),Q},co=function(M,B,Q,$){var ge=[];return No(M)?ge.push(M.subdivide(.5,!1)):ge.push(M),No(Q)?ge.push(Q.subdivide(.5,!0)):ge.push(Q),No($)?ge.push($.subdivide(.5,!0).reverse()):ge.push($),No(B)?ge.push(B.subdivide(.5,!1).reverse()):ge.push(B),ge},gp=function(M){var B=M.bounds,Q=M.styles;return B.add(Q.borderLeftWidth,Q.borderTopWidth,-(Q.borderRightWidth+Q.borderLeftWidth),-(Q.borderTopWidth+Q.borderBottomWidth))},cu=function(M){var B=M.styles,Q=M.bounds,$=Gi(B.paddingLeft,Q.width),ge=Gi(B.paddingRight,Q.width),ke=Gi(B.paddingTop,Q.width),He=Gi(B.paddingBottom,Q.width);return Q.add($+B.borderLeftWidth,ke+B.borderTopWidth,-(B.borderRightWidth+B.borderLeftWidth+$+ge),-(B.borderTopWidth+B.borderBottomWidth+ke+He))},Nf=function(M,B){return M===0?B.bounds:M===2?cu(B):gp(B)},Wh=function(M,B){return M===0?B.bounds:M===2?cu(B):gp(B)},kf=function(M,B,Q){var $=Nf(Wd(M.styles.backgroundOrigin,B),M),ge=Wh(Wd(M.styles.backgroundClip,B),M),ke=qh(Wd(M.styles.backgroundSize,B),Q,$),He=ke[0],ut=ke[1],dt=Wn(Wd(M.styles.backgroundPosition,B),$.width-He,$.height-ut),Ut=em(Wd(M.styles.backgroundRepeat,B),dt,ke,$,ge),Zt=Math.round($.left+dt[0]),lr=Math.round($.top+dt[1]);return[Ut,Zt,lr,He,ut]},Yh=function(M){return Tn(M)&&M.value===Fi.AUTO},uu=function(M){return typeof M=="number"},qh=function(M,B,Q){var $=B[0],ge=B[1],ke=B[2],He=M[0],ut=M[1];if(!He)return[0,0];if(Gn(He)&&ut&&Gn(ut))return[Gi(He,Q.width),Gi(ut,Q.height)];var dt=uu(ke);if(Tn(He)&&(He.value===Fi.CONTAIN||He.value===Fi.COVER)){if(uu(ke)){var Ut=Q.width/Q.height;return Ut<ke!=(He.value===Fi.COVER)?[Q.width,Q.width/ke]:[Q.height*ke,Q.height]}return[Q.width,Q.height]}var Zt=uu($),lr=uu(ge),Fr=Zt||lr;if(Yh(He)&&(!ut||Yh(ut))){if(Zt&&lr)return[$,ge];if(!dt&&!Fr)return[Q.width,Q.height];if(Fr&&dt){var Vn=Zt?$:ge*ke,gn=lr?ge:$/ke;return[Vn,gn]}var Pn=Zt?$:Q.width,Bi=lr?ge:Q.height;return[Pn,Bi]}if(dt){var di=0,oi=0;return Gn(He)?di=Gi(He,Q.width):Gn(ut)&&(oi=Gi(ut,Q.height)),Yh(He)?di=oi*ke:(!ut||Yh(ut))&&(oi=di/ke),[di,oi]}var ea=null,Ks=null;if(Gn(He)?ea=Gi(He,Q.width):ut&&Gn(ut)&&(Ks=Gi(ut,Q.height)),ea!==null&&(!ut||Yh(ut))&&(Ks=Zt&&lr?ea/$*ge:Q.height),Ks!==null&&Yh(He)&&(ea=Zt&&lr?Ks/ge*$:Q.width),ea!==null&&Ks!==null)return[ea,Ks];throw new Error("Unable to calculate background-size for element")},Wd=function(M,B){var Q=M[B];return typeof Q>"u"?M[0]:Q},em=function(M,B,Q,$,ge){var ke=B[0],He=B[1],ut=Q[0],dt=Q[1];switch(M){case 2:return[new fn(Math.round($.left),Math.round($.top+He)),new fn(Math.round($.left+$.width),Math.round($.top+He)),new fn(Math.round($.left+$.width),Math.round(dt+$.top+He)),new fn(Math.round($.left),Math.round(dt+$.top+He))];case 3:return[new fn(Math.round($.left+ke),Math.round($.top)),new fn(Math.round($.left+ke+ut),Math.round($.top)),new fn(Math.round($.left+ke+ut),Math.round($.height+$.top)),new fn(Math.round($.left+ke),Math.round($.height+$.top))];case 1:return[new fn(Math.round($.left+ke),Math.round($.top+He)),new fn(Math.round($.left+ke+ut),Math.round($.top+He)),new fn(Math.round($.left+ke+ut),Math.round($.top+He+dt)),new fn(Math.round($.left+ke),Math.round($.top+He+dt))];default:return[new fn(Math.round(ge.left),Math.round(ge.top)),new fn(Math.round(ge.left+ge.width),Math.round(ge.top)),new fn(Math.round(ge.left+ge.width),Math.round(ge.height+ge.top)),new fn(Math.round(ge.left),Math.round(ge.height+ge.top))]}},vp="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",If="Hidden Text",hA=(function(){function M(B){this._data={},this._document=B}return M.prototype.parseMetrics=function(B,Q){var $=this._document.createElement("div"),ge=this._document.createElement("img"),ke=this._document.createElement("span"),He=this._document.body;$.style.visibility="hidden",$.style.fontFamily=B,$.style.fontSize=Q,$.style.margin="0",$.style.padding="0",$.style.whiteSpace="nowrap",He.appendChild($),ge.src=vp,ge.width=1,ge.height=1,ge.style.margin="0",ge.style.padding="0",ge.style.verticalAlign="baseline",ke.style.fontFamily=B,ke.style.fontSize=Q,ke.style.margin="0",ke.style.padding="0",ke.appendChild(this._document.createTextNode(If)),$.appendChild(ke),$.appendChild(ge);var ut=ge.offsetTop-ke.offsetTop+2;$.removeChild(ke),$.appendChild(this._document.createTextNode(If)),$.style.lineHeight="normal",ge.style.verticalAlign="super";var dt=ge.offsetTop-$.offsetTop+2;return He.removeChild($),{baseline:ut,middle:dt}},M.prototype.getMetrics=function(B,Q){var $=B+" "+Q;return typeof this._data[$]>"u"&&(this._data[$]=this.parseMetrics(B,Q)),this._data[$]},M})(),nv=(function(){function M(B,Q){this.context=B,this.options=Q}return M})(),tm=1e4,Fy=(function(M){n(B,M);function B(Q,$){var ge=M.call(this,Q,$)||this;return ge._activeEffects=[],ge.canvas=$.canvas?$.canvas:document.createElement("canvas"),ge.ctx=ge.canvas.getContext("2d"),$.canvas||(ge.canvas.width=Math.floor($.width*$.scale),ge.canvas.height=Math.floor($.height*$.scale),ge.canvas.style.width=$.width+"px",ge.canvas.style.height=$.height+"px"),ge.fontMetrics=new hA(document),ge.ctx.scale(ge.options.scale,ge.options.scale),ge.ctx.translate(-$.x,-$.y),ge.ctx.textBaseline="bottom",ge._activeEffects=[],ge.context.logger.debug("Canvas renderer initialized ("+$.width+"x"+$.height+") with scale "+$.scale),ge}return B.prototype.applyEffects=function(Q){for(var $=this;this._activeEffects.length;)this.popEffect();Q.forEach(function(ge){return $.applyEffect(ge)})},B.prototype.applyEffect=function(Q){this.ctx.save(),mp(Q)&&(this.ctx.globalAlpha=Q.opacity),Ol(Q)&&(this.ctx.translate(Q.offsetX,Q.offsetY),this.ctx.transform(Q.matrix[0],Q.matrix[1],Q.matrix[2],Q.matrix[3],Q.matrix[4],Q.matrix[5]),this.ctx.translate(-Q.offsetX,-Q.offsetY)),Pg(Q)&&(this.path(Q.path),this.ctx.clip()),this._activeEffects.push(Q)},B.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},B.prototype.renderStack=function(Q){return s(this,void 0,void 0,function(){var $;return o(this,function(ge){switch(ge.label){case 0:return $=Q.element.container.styles,$.isVisible()?[4,this.renderStackContent(Q)]:[3,2];case 1:ge.sent(),ge.label=2;case 2:return[2]}})})},B.prototype.renderNode=function(Q){return s(this,void 0,void 0,function(){return o(this,function($){switch($.label){case 0:if(O(Q.container.flags,16))debugger;return Q.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(Q)]:[3,3];case 1:return $.sent(),[4,this.renderNodeContent(Q)];case 2:$.sent(),$.label=3;case 3:return[2]}})})},B.prototype.renderTextWithLetterSpacing=function(Q,$,ge){var ke=this;if($===0)this.ctx.fillText(Q.text,Q.bounds.left,Q.bounds.top+ge);else{var He=cA(Q.text);He.reduce(function(ut,dt){return ke.ctx.fillText(dt,ut,Q.bounds.top+ge),ut+ke.ctx.measureText(dt).width},Q.bounds.left)}},B.prototype.createFontStyle=function(Q){var $=Q.fontVariant.filter(function(He){return He==="normal"||He==="small-caps"}).join(""),ge=va(Q.fontFamily).join(", "),ke=Sn(Q.fontSize)?""+Q.fontSize.number+Q.fontSize.unit:Q.fontSize.number+"px";return[[Q.fontStyle,$,Q.fontWeight,ke,ge].join(" "),ge,ke]},B.prototype.renderTextNode=function(Q,$){return s(this,void 0,void 0,function(){var ge,ke,He,ut,dt,Ut,Zt,lr,Fr=this;return o(this,function(Vn){return ge=this.createFontStyle($),ke=ge[0],He=ge[1],ut=ge[2],this.ctx.font=ke,this.ctx.direction=$.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",dt=this.fontMetrics.getMetrics(He,ut),Ut=dt.baseline,Zt=dt.middle,lr=$.paintOrder,Q.textBounds.forEach(function(gn){lr.forEach(function(Pn){switch(Pn){case 0:Fr.ctx.fillStyle=xn($.color),Fr.renderTextWithLetterSpacing(gn,$.letterSpacing,Ut);var Bi=$.textShadow;Bi.length&&gn.text.trim().length&&(Bi.slice(0).reverse().forEach(function(di){Fr.ctx.shadowColor=xn(di.color),Fr.ctx.shadowOffsetX=di.offsetX.number*Fr.options.scale,Fr.ctx.shadowOffsetY=di.offsetY.number*Fr.options.scale,Fr.ctx.shadowBlur=di.blur.number,Fr.renderTextWithLetterSpacing(gn,$.letterSpacing,Ut)}),Fr.ctx.shadowColor="",Fr.ctx.shadowOffsetX=0,Fr.ctx.shadowOffsetY=0,Fr.ctx.shadowBlur=0),$.textDecorationLine.length&&(Fr.ctx.fillStyle=xn($.textDecorationColor||$.color),$.textDecorationLine.forEach(function(di){switch(di){case 1:Fr.ctx.fillRect(gn.bounds.left,Math.round(gn.bounds.top+Ut),gn.bounds.width,1);break;case 2:Fr.ctx.fillRect(gn.bounds.left,Math.round(gn.bounds.top),gn.bounds.width,1);break;case 3:Fr.ctx.fillRect(gn.bounds.left,Math.ceil(gn.bounds.top+Zt),gn.bounds.width,1);break}}));break;case 1:$.webkitTextStrokeWidth&&gn.text.trim().length&&(Fr.ctx.strokeStyle=xn($.webkitTextStrokeColor),Fr.ctx.lineWidth=$.webkitTextStrokeWidth,Fr.ctx.lineJoin=window.chrome?"miter":"round",Fr.ctx.strokeText(gn.text,gn.bounds.left,gn.bounds.top+Ut)),Fr.ctx.strokeStyle="",Fr.ctx.lineWidth=0,Fr.ctx.lineJoin="miter";break}})}),[2]})})},B.prototype.renderReplacedElement=function(Q,$,ge){if(ge&&Q.intrinsicWidth>0&&Q.intrinsicHeight>0){var ke=cu(Q),He=wl($);this.path(He),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(ge,0,0,Q.intrinsicWidth,Q.intrinsicHeight,ke.left,ke.top,ke.width,ke.height),this.ctx.restore()}},B.prototype.renderNodeContent=function(Q){return s(this,void 0,void 0,function(){var $,ge,ke,He,ut,dt,oi,oi,Ut,Zt,lr,Fr,Ks,Vn,gn,cs,Pn,Bi,di,oi,ea,Ks,cs;return o(this,function(Yn){switch(Yn.label){case 0:this.applyEffects(Q.getEffects(4)),$=Q.container,ge=Q.curves,ke=$.styles,He=0,ut=$.textNodes,Yn.label=1;case 1:return He<ut.length?(dt=ut[He],[4,this.renderTextNode(dt,ke)]):[3,4];case 2:Yn.sent(),Yn.label=3;case 3:return He++,[3,1];case 4:if(!($ instanceof q0))return[3,8];Yn.label=5;case 5:return Yn.trys.push([5,7,,8]),[4,this.context.cache.match($.src)];case 6:return oi=Yn.sent(),this.renderReplacedElement($,ge,oi),[3,8];case 7:return Yn.sent(),this.context.logger.error("Error loading image "+$.src),[3,8];case 8:if($ instanceof YA&&this.renderReplacedElement($,ge,$.canvas),!($ instanceof _g))return[3,12];Yn.label=9;case 9:return Yn.trys.push([9,11,,12]),[4,this.context.cache.match($.svg)];case 10:return oi=Yn.sent(),this.renderReplacedElement($,ge,oi),[3,12];case 11:return Yn.sent(),this.context.logger.error("Error loading svg "+$.svg.substring(0,255)),[3,12];case 12:return $ instanceof jh&&$.tree?(Ut=new B(this.context,{scale:this.options.scale,backgroundColor:$.backgroundColor,x:0,y:0,width:$.width,height:$.height}),[4,Ut.render($.tree)]):[3,14];case 13:Zt=Yn.sent(),$.width&&$.height&&this.ctx.drawImage(Zt,0,0,$.width,$.height,$.bounds.left,$.bounds.top,$.bounds.width,$.bounds.height),Yn.label=14;case 14:if($ instanceof zd&&(lr=Math.min($.bounds.width,$.bounds.height),$.type===lp?$.checked&&(this.ctx.save(),this.path([new fn($.bounds.left+lr*.39363,$.bounds.top+lr*.79),new fn($.bounds.left+lr*.16,$.bounds.top+lr*.5549),new fn($.bounds.left+lr*.27347,$.bounds.top+lr*.44071),new fn($.bounds.left+lr*.39694,$.bounds.top+lr*.5649),new fn($.bounds.left+lr*.72983,$.bounds.top+lr*.23),new fn($.bounds.left+lr*.84,$.bounds.top+lr*.34085),new fn($.bounds.left+lr*.39363,$.bounds.top+lr*.79)]),this.ctx.fillStyle=xn(jd),this.ctx.fill(),this.ctx.restore()):$.type===cp&&$.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc($.bounds.left+lr/2,$.bounds.top+lr/2,lr/4,0,Math.PI*2,!0),this.ctx.fillStyle=xn(jd),this.ctx.fill(),this.ctx.restore())),yp($)&&$.value.length){switch(Fr=this.createFontStyle(ke),Ks=Fr[0],Vn=Fr[1],gn=this.fontMetrics.getMetrics(Ks,Vn).baseline,this.ctx.font=Ks,this.ctx.fillStyle=xn(ke.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=xp($.styles.textAlign),cs=cu($),Pn=0,$.styles.textAlign){case 1:Pn+=cs.width/2;break;case 2:Pn+=cs.width;break}Bi=cs.add(Pn,0,0,-cs.height/2+1),this.ctx.save(),this.path([new fn(cs.left,cs.top),new fn(cs.left+cs.width,cs.top),new fn(cs.left+cs.width,cs.top+cs.height),new fn(cs.left,cs.top+cs.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Cf($.value,Bi),ke.letterSpacing,gn),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!O($.styles.display,2048))return[3,20];if($.styles.listStyleImage===null)return[3,19];if(di=$.styles.listStyleImage,di.type!==0)return[3,18];oi=void 0,ea=di.url,Yn.label=15;case 15:return Yn.trys.push([15,17,,18]),[4,this.context.cache.match(ea)];case 16:return oi=Yn.sent(),this.ctx.drawImage(oi,$.bounds.left-(oi.width+10),$.bounds.top),[3,18];case 17:return Yn.sent(),this.context.logger.error("Error loading list-style-image "+ea),[3,18];case 18:return[3,20];case 19:Q.listValue&&$.styles.listStyleType!==-1&&(Ks=this.createFontStyle(ke)[0],this.ctx.font=Ks,this.ctx.fillStyle=xn(ke.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",cs=new u($.bounds.left,$.bounds.top+Gi($.styles.paddingTop,$.bounds.width),$.bounds.width,so(ke.lineHeight,ke.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Cf(Q.listValue,cs),ke.letterSpacing,so(ke.lineHeight,ke.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),Yn.label=20;case 20:return[2]}})})},B.prototype.renderStackContent=function(Q){return s(this,void 0,void 0,function(){var $,ge,di,ke,He,di,ut,dt,di,Ut,Zt,di,lr,Fr,di,Vn,gn,di,Pn,Bi,di;return o(this,function(oi){switch(oi.label){case 0:if(O(Q.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(Q.element)];case 1:oi.sent(),$=0,ge=Q.negativeZIndex,oi.label=2;case 2:return $<ge.length?(di=ge[$],[4,this.renderStack(di)]):[3,5];case 3:oi.sent(),oi.label=4;case 4:return $++,[3,2];case 5:return[4,this.renderNodeContent(Q.element)];case 6:oi.sent(),ke=0,He=Q.nonInlineLevel,oi.label=7;case 7:return ke<He.length?(di=He[ke],[4,this.renderNode(di)]):[3,10];case 8:oi.sent(),oi.label=9;case 9:return ke++,[3,7];case 10:ut=0,dt=Q.nonPositionedFloats,oi.label=11;case 11:return ut<dt.length?(di=dt[ut],[4,this.renderStack(di)]):[3,14];case 12:oi.sent(),oi.label=13;case 13:return ut++,[3,11];case 14:Ut=0,Zt=Q.nonPositionedInlineLevel,oi.label=15;case 15:return Ut<Zt.length?(di=Zt[Ut],[4,this.renderStack(di)]):[3,18];case 16:oi.sent(),oi.label=17;case 17:return Ut++,[3,15];case 18:lr=0,Fr=Q.inlineLevel,oi.label=19;case 19:return lr<Fr.length?(di=Fr[lr],[4,this.renderNode(di)]):[3,22];case 20:oi.sent(),oi.label=21;case 21:return lr++,[3,19];case 22:Vn=0,gn=Q.zeroOrAutoZIndexOrTransformedOrOpacity,oi.label=23;case 23:return Vn<gn.length?(di=gn[Vn],[4,this.renderStack(di)]):[3,26];case 24:oi.sent(),oi.label=25;case 25:return Vn++,[3,23];case 26:Pn=0,Bi=Q.positiveZIndex,oi.label=27;case 27:return Pn<Bi.length?(di=Bi[Pn],[4,this.renderStack(di)]):[3,30];case 28:oi.sent(),oi.label=29;case 29:return Pn++,[3,27];case 30:return[2]}})})},B.prototype.mask=function(Q){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(Q.slice(0).reverse()),this.ctx.closePath()},B.prototype.path=function(Q){this.ctx.beginPath(),this.formatPath(Q),this.ctx.closePath()},B.prototype.formatPath=function(Q){var $=this;Q.forEach(function(ge,ke){var He=No(ge)?ge.start:ge;ke===0?$.ctx.moveTo(He.x,He.y):$.ctx.lineTo(He.x,He.y),No(ge)&&$.ctx.bezierCurveTo(ge.startControl.x,ge.startControl.y,ge.endControl.x,ge.endControl.y,ge.end.x,ge.end.y)})},B.prototype.renderRepeat=function(Q,$,ge,ke){this.path(Q),this.ctx.fillStyle=$,this.ctx.translate(ge,ke),this.ctx.fill(),this.ctx.translate(-ge,-ke)},B.prototype.resizeImage=function(Q,$,ge){var ke;if(Q.width===$&&Q.height===ge)return Q;var He=(ke=this.canvas.ownerDocument)!==null&&ke!==void 0?ke:document,ut=He.createElement("canvas");ut.width=Math.max(1,$),ut.height=Math.max(1,ge);var dt=ut.getContext("2d");return dt.drawImage(Q,0,0,Q.width,Q.height,0,0,$,ge),ut},B.prototype.renderBackgroundImage=function(Q){return s(this,void 0,void 0,function(){var $,ge,ke,He,ut,dt;return o(this,function(Ut){switch(Ut.label){case 0:$=Q.styles.backgroundImage.length-1,ge=function(Zt){var lr,Fr,Vn,ac,Iu,nd,Eo,ku,ya,gn,ac,Iu,nd,Eo,ku,Pn,Bi,di,oi,ea,Ks,cs,Yn,ua,ya,Mi,ac,Do,Yd,Eo,ku,kd,Iu,nd,Ih,Zh,fA,nm,im,Lh,AA,mA;return o(this,function(Og){switch(Og.label){case 0:if(Zt.type!==0)return[3,5];lr=void 0,Fr=Zt.url,Og.label=1;case 1:return Og.trys.push([1,3,,4]),[4,ke.context.cache.match(Fr)];case 2:return lr=Og.sent(),[3,4];case 3:return Og.sent(),ke.context.logger.error("Error loading background-image "+Fr),[3,4];case 4:return lr&&(Vn=kf(Q,$,[lr.width,lr.height,lr.width/lr.height]),ac=Vn[0],Iu=Vn[1],nd=Vn[2],Eo=Vn[3],ku=Vn[4],ya=ke.ctx.createPattern(ke.resizeImage(lr,Eo,ku),"repeat"),ke.renderRepeat(ac,ya,Iu,nd)),[3,6];case 5:gl(Zt)?(gn=kf(Q,$,[null,null,null]),ac=gn[0],Iu=gn[1],nd=gn[2],Eo=gn[3],ku=gn[4],Pn=Hc(Zt.angle,Eo,ku),Bi=Pn[0],di=Pn[1],oi=Pn[2],ea=Pn[3],Ks=Pn[4],cs=document.createElement("canvas"),cs.width=Eo,cs.height=ku,Yn=cs.getContext("2d"),ua=Yn.createLinearGradient(di,ea,oi,Ks),vo(Zt.stops,Bi).forEach(function(sv){return ua.addColorStop(sv.stop,xn(sv.color))}),Yn.fillStyle=ua,Yn.fillRect(0,0,Eo,ku),Eo>0&&ku>0&&(ya=ke.ctx.createPattern(cs,"repeat"),ke.renderRepeat(ac,ya,Iu,nd))):iu(Zt)&&(Mi=kf(Q,$,[null,null,null]),ac=Mi[0],Do=Mi[1],Yd=Mi[2],Eo=Mi[3],ku=Mi[4],kd=Zt.position.length===0?[Un]:Zt.position,Iu=Gi(kd[0],Eo),nd=Gi(kd[kd.length-1],ku),Ih=Ka(Zt,Iu,nd,Eo,ku),Zh=Ih[0],fA=Ih[1],Zh>0&&fA>0&&(nm=ke.ctx.createRadialGradient(Do+Iu,Yd+nd,0,Do+Iu,Yd+nd,Zh),vo(Zt.stops,Zh*2).forEach(function(sv){return nm.addColorStop(sv.stop,xn(sv.color))}),ke.path(ac),ke.ctx.fillStyle=nm,Zh!==fA?(im=Q.bounds.left+.5*Q.bounds.width,Lh=Q.bounds.top+.5*Q.bounds.height,AA=fA/Zh,mA=1/AA,ke.ctx.save(),ke.ctx.translate(im,Lh),ke.ctx.transform(1,0,0,AA,0,0),ke.ctx.translate(-im,-Lh),ke.ctx.fillRect(Do,mA*(Yd-Lh)+Lh,Eo,ku*mA),ke.ctx.restore()):ke.ctx.fill())),Og.label=6;case 6:return $--,[2]}})},ke=this,He=0,ut=Q.styles.backgroundImage.slice(0).reverse(),Ut.label=1;case 1:return He<ut.length?(dt=ut[He],[5,ge(dt)]):[3,4];case 2:Ut.sent(),Ut.label=3;case 3:return He++,[3,1];case 4:return[2]}})})},B.prototype.renderSolidBorder=function(Q,$,ge){return s(this,void 0,void 0,function(){return o(this,function(ke){return this.path(My(ge,$)),this.ctx.fillStyle=xn(Q),this.ctx.fill(),[2]})})},B.prototype.renderDoubleBorder=function(Q,$,ge,ke){return s(this,void 0,void 0,function(){var He,ut;return o(this,function(dt){switch(dt.label){case 0:return $<3?[4,this.renderSolidBorder(Q,ge,ke)]:[3,2];case 1:return dt.sent(),[2];case 2:return He=pp(ke,ge),this.path(He),this.ctx.fillStyle=xn(Q),this.ctx.fill(),ut=Zc(ke,ge),this.path(ut),this.ctx.fill(),[2]}})})},B.prototype.renderNodeBackgroundAndBorders=function(Q){return s(this,void 0,void 0,function(){var $,ge,ke,He,ut,dt,Ut,Zt,lr=this;return o(this,function(Fr){switch(Fr.label){case 0:return this.applyEffects(Q.getEffects(2)),$=Q.container.styles,ge=!Ii($.backgroundColor)||$.backgroundImage.length,ke=[{style:$.borderTopStyle,color:$.borderTopColor,width:$.borderTopWidth},{style:$.borderRightStyle,color:$.borderRightColor,width:$.borderRightWidth},{style:$.borderBottomStyle,color:$.borderBottomColor,width:$.borderBottomWidth},{style:$.borderLeftStyle,color:$.borderLeftColor,width:$.borderLeftWidth}],He=Uy(Wd($.backgroundClip,0),Q.curves),ge||$.boxShadow.length?(this.ctx.save(),this.path(He),this.ctx.clip(),Ii($.backgroundColor)||(this.ctx.fillStyle=xn($.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(Q.container)]):[3,2];case 1:Fr.sent(),this.ctx.restore(),$.boxShadow.slice(0).reverse().forEach(function(Vn){lr.ctx.save();var gn=ka(Q.curves),Pn=Vn.inset?0:tm,Bi=qo(gn,-Pn+(Vn.inset?1:-1)*Vn.spread.number,(Vn.inset?1:-1)*Vn.spread.number,Vn.spread.number*(Vn.inset?-2:2),Vn.spread.number*(Vn.inset?-2:2));Vn.inset?(lr.path(gn),lr.ctx.clip(),lr.mask(Bi)):(lr.mask(gn),lr.ctx.clip(),lr.path(Bi)),lr.ctx.shadowOffsetX=Vn.offsetX.number+Pn,lr.ctx.shadowOffsetY=Vn.offsetY.number,lr.ctx.shadowColor=xn(Vn.color),lr.ctx.shadowBlur=Vn.blur.number,lr.ctx.fillStyle=Vn.inset?xn(Vn.color):"rgba(0,0,0,1)",lr.ctx.fill(),lr.ctx.restore()}),Fr.label=2;case 2:ut=0,dt=0,Ut=ke,Fr.label=3;case 3:return dt<Ut.length?(Zt=Ut[dt],Zt.style!==0&&!Ii(Zt.color)&&Zt.width>0?Zt.style!==2?[3,5]:[4,this.renderDashedDottedBorder(Zt.color,Zt.width,ut,Q.curves,2)]:[3,11]):[3,13];case 4:return Fr.sent(),[3,11];case 5:return Zt.style!==3?[3,7]:[4,this.renderDashedDottedBorder(Zt.color,Zt.width,ut,Q.curves,3)];case 6:return Fr.sent(),[3,11];case 7:return Zt.style!==4?[3,9]:[4,this.renderDoubleBorder(Zt.color,Zt.width,ut,Q.curves)];case 8:return Fr.sent(),[3,11];case 9:return[4,this.renderSolidBorder(Zt.color,ut,Q.curves)];case 10:Fr.sent(),Fr.label=11;case 11:ut++,Fr.label=12;case 12:return dt++,[3,3];case 13:return[2]}})})},B.prototype.renderDashedDottedBorder=function(Q,$,ge,ke,He){return s(this,void 0,void 0,function(){var ut,dt,Ut,Zt,lr,Fr,Vn,gn,Pn,Bi,di,oi,ea,Ks,cs,Yn,cs,Yn;return o(this,function(ua){return this.ctx.save(),ut=Gd(ke,ge),dt=My(ke,ge),He===2&&(this.path(dt),this.ctx.clip()),No(dt[0])?(Ut=dt[0].start.x,Zt=dt[0].start.y):(Ut=dt[0].x,Zt=dt[0].y),No(dt[1])?(lr=dt[1].end.x,Fr=dt[1].end.y):(lr=dt[1].x,Fr=dt[1].y),ge===0||ge===2?Vn=Math.abs(Ut-lr):Vn=Math.abs(Zt-Fr),this.ctx.beginPath(),He===3?this.formatPath(ut):this.formatPath(dt.slice(0,2)),gn=$<3?$*3:$*2,Pn=$<3?$*2:$,He===3&&(gn=$,Pn=$),Bi=!0,Vn<=gn*2?Bi=!1:Vn<=gn*2+Pn?(di=Vn/(2*gn+Pn),gn*=di,Pn*=di):(oi=Math.floor((Vn+Pn)/(gn+Pn)),ea=(Vn-oi*gn)/(oi-1),Ks=(Vn-(oi+1)*gn)/oi,Pn=Ks<=0||Math.abs(Pn-ea)<Math.abs(Pn-Ks)?ea:Ks),Bi&&(He===3?this.ctx.setLineDash([0,gn+Pn]):this.ctx.setLineDash([gn,Pn])),He===3?(this.ctx.lineCap="round",this.ctx.lineWidth=$):this.ctx.lineWidth=$*2+1.1,this.ctx.strokeStyle=xn(Q),this.ctx.stroke(),this.ctx.setLineDash([]),He===2&&(No(dt[0])&&(cs=dt[3],Yn=dt[0],this.ctx.beginPath(),this.formatPath([new fn(cs.end.x,cs.end.y),new fn(Yn.start.x,Yn.start.y)]),this.ctx.stroke()),No(dt[1])&&(cs=dt[1],Yn=dt[2],this.ctx.beginPath(),this.formatPath([new fn(cs.end.x,cs.end.y),new fn(Yn.start.x,Yn.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},B.prototype.render=function(Q){return s(this,void 0,void 0,function(){var $;return o(this,function(ge){switch(ge.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=xn(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),$=Dy(Q),[4,this.renderStack($)];case 1:return ge.sent(),this.applyEffects([]),[2,this.canvas]}})})},B})(nv),yp=function(M){return M instanceof up||M instanceof Py?!0:M instanceof zd&&M.type!==cp&&M.type!==lp},Uy=function(M,B){switch(M){case 0:return ka(B);case 2:return td(B);default:return wl(B)}},xp=function(M){switch(M){case 1:return"center";case 2:return"right";default:return"left"}},iv=["-apple-system","system-ui"],va=function(M){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?M.filter(function(B){return iv.indexOf(B)===-1}):M},Aa=(function(M){n(B,M);function B(Q,$){var ge=M.call(this,Q,$)||this;return ge.canvas=$.canvas?$.canvas:document.createElement("canvas"),ge.ctx=ge.canvas.getContext("2d"),ge.options=$,ge.canvas.width=Math.floor($.width*$.scale),ge.canvas.height=Math.floor($.height*$.scale),ge.canvas.style.width=$.width+"px",ge.canvas.style.height=$.height+"px",ge.ctx.scale(ge.options.scale,ge.options.scale),ge.ctx.translate(-$.x,-$.y),ge.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+$.width+"x"+$.height+" at "+$.x+","+$.y+") with scale "+$.scale),ge}return B.prototype.render=function(Q){return s(this,void 0,void 0,function(){var $,ge;return o(this,function(ke){switch(ke.label){case 0:return $=vg(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,Q),[4,Ss($)];case 1:return ge=ke.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=xn(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(ge,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},B})(nv),Ss=function(M){return new Promise(function(B,Q){var $=new Image;$.onload=function(){B($)},$.onerror=Q,$.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(M))})},Bs=(function(){function M(B){var Q=B.id,$=B.enabled;this.id=Q,this.enabled=$,this.start=Date.now()}return M.prototype.debug=function(){for(var B=[],Q=0;Q<arguments.length;Q++)B[Q]=arguments[Q];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,c([this.id,this.getTime()+"ms"],B)):this.info.apply(this,B))},M.prototype.getTime=function(){return Date.now()-this.start},M.prototype.info=function(){for(var B=[],Q=0;Q<arguments.length;Q++)B[Q]=arguments[Q];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,c([this.id,this.getTime()+"ms"],B))},M.prototype.warn=function(){for(var B=[],Q=0;Q<arguments.length;Q++)B[Q]=arguments[Q];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,c([this.id,this.getTime()+"ms"],B)):this.info.apply(this,B))},M.prototype.error=function(){for(var B=[],Q=0;Q<arguments.length;Q++)B[Q]=arguments[Q];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,c([this.id,this.getTime()+"ms"],B)):this.info.apply(this,B))},M.instances={},M})(),Ia=(function(){function M(B,Q){var $;this.windowBounds=Q,this.instanceName="#"+M.instanceCount++,this.logger=new Bs({id:this.instanceName,enabled:B.logging}),this.cache=($=B.cache)!==null&&$!==void 0?$:new aa(this,B)}return M.instanceCount=1,M})(),Nu=function(M,B){return B===void 0&&(B={}),Xh(M,B)};typeof window<"u"&&al.setContext(window);var Xh=function(M,B){return s(void 0,void 0,void 0,function(){var Q,$,ge,ke,He,ut,dt,Ut,Zt,lr,Fr,Vn,gn,Pn,Bi,di,oi,ea,Ks,cs,ua,Yn,ua,ya,Mi,ac,Do,Yd,Eo,ku,kd,Iu,nd,Ih,Zh,fA,nm,im,Lh,AA;return o(this,function(mA){switch(mA.label){case 0:if(!M||typeof M!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(Q=M.ownerDocument,!Q)throw new Error("Element is not attached to a Document");if($=Q.defaultView,!$)throw new Error("Document is not attached to a Window");return ge={allowTaint:(ya=B.allowTaint)!==null&&ya!==void 0?ya:!1,imageTimeout:(Mi=B.imageTimeout)!==null&&Mi!==void 0?Mi:15e3,proxy:B.proxy,useCORS:(ac=B.useCORS)!==null&&ac!==void 0?ac:!1},ke=i({logging:(Do=B.logging)!==null&&Do!==void 0?Do:!0,cache:B.cache},ge),He={windowWidth:(Yd=B.windowWidth)!==null&&Yd!==void 0?Yd:$.innerWidth,windowHeight:(Eo=B.windowHeight)!==null&&Eo!==void 0?Eo:$.innerHeight,scrollX:(ku=B.scrollX)!==null&&ku!==void 0?ku:$.pageXOffset,scrollY:(kd=B.scrollY)!==null&&kd!==void 0?kd:$.pageYOffset},ut=new u(He.scrollX,He.scrollY,He.windowWidth,He.windowHeight),dt=new Ia(ke,ut),Ut=(Iu=B.foreignObjectRendering)!==null&&Iu!==void 0?Iu:!1,Zt={allowTaint:(nd=B.allowTaint)!==null&&nd!==void 0?nd:!1,onclone:B.onclone,ignoreElements:B.ignoreElements,inlineImages:Ut,copyStyles:Ut},dt.logger.debug("Starting document clone with size "+ut.width+"x"+ut.height+" scrolled to "+-ut.left+","+-ut.top),lr=new Ti(dt,M,Zt),Fr=lr.clonedReferenceElement,Fr?[4,lr.toIFrame(Q,ut)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return Vn=mA.sent(),gn=kg(Fr)||ev(Fr)?d(Fr.ownerDocument):l(dt,Fr),Pn=gn.width,Bi=gn.height,di=gn.left,oi=gn.top,ea=rm(dt,Fr,B.backgroundColor),Ks={canvas:B.canvas,backgroundColor:ea,scale:(Zh=(Ih=B.scale)!==null&&Ih!==void 0?Ih:$.devicePixelRatio)!==null&&Zh!==void 0?Zh:1,x:((fA=B.x)!==null&&fA!==void 0?fA:0)+di,y:((nm=B.y)!==null&&nm!==void 0?nm:0)+oi,width:(im=B.width)!==null&&im!==void 0?im:Math.ceil(Pn),height:(Lh=B.height)!==null&&Lh!==void 0?Lh:Math.ceil(Bi)},Ut?(dt.logger.debug("Document cloned, using foreign object rendering"),ua=new Aa(dt,Ks),[4,ua.render(Fr)]):[3,3];case 2:return cs=mA.sent(),[3,5];case 3:return dt.logger.debug("Document cloned, element located at "+di+","+oi+" with size "+Pn+"x"+Bi+" using computed rendering"),dt.logger.debug("Starting DOM parsing"),Yn=Tg(dt,Fr),ea===Yn.styles.backgroundColor&&(Yn.styles.backgroundColor=Xa.TRANSPARENT),dt.logger.debug("Starting renderer for element at "+Ks.x+","+Ks.y+" with size "+Ks.width+"x"+Ks.height),ua=new Fy(dt,Ks),[4,ua.render(Yn)];case 4:cs=mA.sent(),mA.label=5;case 5:return(!((AA=B.removeContainer)!==null&&AA!==void 0)||AA)&&(Ti.destroy(Vn)||dt.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),dt.logger.debug("Finished rendering"),[2,cs]}})})},rm=function(M,B,Q){var $=B.ownerDocument,ge=$.documentElement?Ra(M,getComputedStyle($.documentElement).backgroundColor):Xa.TRANSPARENT,ke=$.body?Ra(M,getComputedStyle($.body).backgroundColor):Xa.TRANSPARENT,He=typeof Q=="string"?Ra(M,Q):Q===null?Xa.TRANSPARENT:4294967295;return B===$.documentElement?Ii(ge)?Ii(ke)?He:ke:ge:He};return Nu}))})(rT)),rT.exports}var ez;function IBe(){return ez||(ez=1,(function(t,e){(function(n,i){t.exports=i(kBe())})(self,function(r){return(function(){var n={"./node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js":(function(c,u,l){l.r(u),l.d(u,{default:function(){return d}});function d(f,A){(A==null||A>f.length)&&(A=f.length);for(var p=0,g=Array(A);p<A;p++)g[p]=f[p];return g}}),"./node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js":(function(c,u,l){l.r(u),l.d(u,{default:function(){return d}});function d(f){if(Array.isArray(f))return f}}),"./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js":(function(c,u,l){l.r(u),l.d(u,{default:function(){return f}});function d(A,p,g,y,x,w,E){try{var T=A[w](E),C=T.value}catch(N){return void g(N)}T.done?p(C):Promise.resolve(C).then(y,x)}function f(A){return function(){var p=this,g=arguments;return new Promise(function(y,x){var w=A.apply(p,g);function E(C){d(w,y,x,E,T,"next",C)}function T(C){d(w,y,x,E,T,"throw",C)}E(void 0)})}}}),"./node_modules/@babel/runtime/helpers/esm/defineProperty.js":(function(c,u,l){l.r(u),l.d(u,{default:function(){return f}});var d=l("./node_modules/@babel/runtime/helpers/esm/toPropertyKey.js");function f(A,p,g){return(p=(0,d.default)(p))in A?Object.defineProperty(A,p,{value:g,enumerable:!0,configurable:!0,writable:!0}):A[p]=g,A}}),"./node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js":(function(c,u,l){l.r(u),l.d(u,{default:function(){return d}});function d(f,A){var p=f==null?null:typeof Symbol<"u"&&f[Symbol.iterator]||f["@@iterator"];if(p!=null){var g,y,x,w,E=[],T=!0,C=!1;try{if(x=(p=p.call(f)).next,A===0){if(Object(p)!==p)return;T=!1}else for(;!(T=(g=x.call(p)).done)&&(E.push(g.value),E.length!==A);T=!0);}catch(N){C=!0,y=N}finally{try{if(!T&&p.return!=null&&(w=p.return(),Object(w)!==w))return}finally{if(C)throw y}}return E}}}),"./node_modules/@babel/runtime/helpers/esm/nonIterableRest.js":(function(c,u,l){l.r(u),l.d(u,{default:function(){return d}});function d(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}}),"./node_modules/@babel/runtime/helpers/esm/slicedToArray.js":(function(c,u,l){l.r(u),l.d(u,{default:function(){return g}});var d=l("./node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js"),f=l("./node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js"),A=l("./node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js"),p=l("./node_modules/@babel/runtime/helpers/esm/nonIterableRest.js");function g(y,x){return(0,d.default)(y)||(0,f.default)(y,x)||(0,A.default)(y,x)||(0,p.default)()}}),"./node_modules/@babel/runtime/helpers/esm/toPrimitive.js":(function(c,u,l){l.r(u),l.d(u,{default:function(){return f}});var d=l("./node_modules/@babel/runtime/helpers/esm/typeof.js");function f(A,p){if((0,d.default)(A)!="object"||!A)return A;var g=A[Symbol.toPrimitive];if(g!==void 0){var y=g.call(A,p||"default");if((0,d.default)(y)!="object")return y;throw new TypeError("@@toPrimitive must return a primitive value.")}return(p==="string"?String:Number)(A)}}),"./node_modules/@babel/runtime/helpers/esm/toPropertyKey.js":(function(c,u,l){l.r(u),l.d(u,{default:function(){return A}});var d=l("./node_modules/@babel/runtime/helpers/esm/typeof.js"),f=l("./node_modules/@babel/runtime/helpers/esm/toPrimitive.js");function A(p){var g=(0,f.default)(p,"string");return(0,d.default)(g)=="symbol"?g:g+""}}),"./node_modules/@babel/runtime/helpers/esm/typeof.js":(function(c,u,l){l.r(u),l.d(u,{default:function(){return d}});function d(f){"@babel/helpers - typeof";return d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(A){return typeof A}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A},d(f)}}),"./node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js":(function(c,u,l){l.r(u),l.d(u,{default:function(){return f}});var d=l("./node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js");function f(A,p){if(A){if(typeof A=="string")return(0,d.default)(A,p);var g={}.toString.call(A).slice(8,-1);return g==="Object"&&A.constructor&&(g=A.constructor.name),g==="Map"||g==="Set"?Array.from(A):g==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(g)?(0,d.default)(A,p):void 0}}}),"./node_modules/canvg/lib/index.es.js":(function(c,u,l){l.r(u),l.d(u,{AElement:function(){return ml},AnimateColorElement:function(){return Qa},AnimateElement:function(){return Os},AnimateTransformElement:function(){return ds},BoundingBox:function(){return Ln},CB1:function(){return je},CB2:function(){return Me},CB3:function(){return Re},CB4:function(){return it},Canvg:function(){return zo},CircleElement:function(){return Ds},ClipPathElement:function(){return Ca},DefsElement:function(){return Cn},DescElement:function(){return Vo},Document:function(){return qa},Element:function(){return Yt},EllipseElement:function(){return js},FeColorMatrixElement:function(){return Ns},FeCompositeElement:function(){return wa},FeDropShadowElement:function(){return Xn},FeGaussianBlurElement:function(){return Qo},FeMorphologyElement:function(){return hs},FilterElement:function(){return gi},Font:function(){return Yr},FontElement:function(){return bu},FontFaceElement:function(){return to},GElement:function(){return Ms},GlyphElement:function(){return Ur},GradientElement:function(){return Qs},ImageElement:function(){return Us},LineElement:function(){return ei},LinearGradientElement:function(){return Fs},MarkerElement:function(){return _n},MaskElement:function(){return Ta},Matrix:function(){return dn},MissingGlyphElement:function(){return Ml},Mouse:function(){return rt},PSEUDO_ZERO:function(){return Oe},Parser:function(){return pr},PathElement:function(){return rn},PathParser:function(){return ln},PatternElement:function(){return ta},Point:function(){return Dt},PolygonElement:function(){return ss},PolylineElement:function(){return sn},Property:function(){return Ge},QB1:function(){return ht},QB2:function(){return Be},QB3:function(){return nt},RadialGradientElement:function(){return rs},RectElement:function(){return Cs},RenderedElement:function(){return Jn},Rotate:function(){return yn},SVGElement:function(){return li},SVGFontLoader:function(){return po},Scale:function(){return Mn},Screen:function(){return wt},Skew:function(){return pn},SkewX:function(){return mn},SkewY:function(){return Kn},StopElement:function(){return qs},StyleElement:function(){return ro},SymbolElement:function(){return kl},TRefElement:function(){return nu},TSpanElement:function(){return cn},TextElement:function(){return An},TextPathElement:function(){return Ws},TitleElement:function(){return Hi},Transform:function(){return ot},Translate:function(){return Xr},UnknownElement:function(){return kr},UseElement:function(){return pl},ViewPort:function(){return ft},compressSpaces:function(){return T},default:function(){return zo},getSelectorSpecificity:function(){return De},normalizeAttributeName:function(){return K},normalizeColor:function(){return re},parseExternalUrl:function(){return Y},presets:function(){return E},toNumbers:function(){return I},trimLeft:function(){return C},trimRight:function(){return N},vectorMagnitude:function(){return be},vectorsAngle:function(){return xe},vectorsRatio:function(){return de}}),l("./node_modules/core-js/modules/es.promise.js");var d=l("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js");l("./node_modules/core-js/modules/es.string.match.js"),l("./node_modules/core-js/modules/es.string.replace.js"),l("./node_modules/core-js/modules/es.string.starts-with.js"),l("./node_modules/core-js/modules/es.array.iterator.js"),l("./node_modules/core-js/modules/web.dom-collections.iterator.js");var f=l("./node_modules/@babel/runtime/helpers/esm/defineProperty.js");l("./node_modules/core-js/modules/es.array.reduce.js"),l("./node_modules/core-js/modules/es.string.ends-with.js"),l("./node_modules/core-js/modules/es.string.split.js");var A=l("./node_modules/raf/index.js");l("./node_modules/core-js/modules/es.string.trim.js");var p=l("./node_modules/rgbcolor/index.js");l("./node_modules/core-js/modules/es.array.index-of.js"),l("./node_modules/core-js/modules/es.string.includes.js"),l("./node_modules/core-js/modules/es.array.reverse.js");var g=l("./node_modules/svg-pathdata/lib/SVGPathData.module.js");l("./node_modules/core-js/modules/es.regexp.to-string.js");var y=l("./node_modules/stackblur-canvas/dist/stackblur-es.js");function x(){var{DOMParser:Ht}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},V={window:null,ignoreAnimation:!0,ignoreMouse:!0,DOMParser:Ht,createCanvas(ie,le){return new OffscreenCanvas(ie,le)},createImage(ie){return(0,d.default)(function*(){var le=yield fetch(ie),F=yield le.blob(),z=yield createImageBitmap(F);return z})()}};return(typeof DOMParser<"u"||typeof Ht>"u")&&Reflect.deleteProperty(V,"DOMParser"),V}function w(Ht){var{DOMParser:V,canvas:ie,fetch:le}=Ht;return{window:null,ignoreAnimation:!0,ignoreMouse:!0,DOMParser:V,fetch:le,createCanvas:ie.createCanvas,createImage:ie.loadImage}}var E=Object.freeze({__proto__:null,offscreen:x,node:w});function T(Ht){return Ht.replace(/(?!\u3000)\s+/gm," ")}function C(Ht){return Ht.replace(/^[\n \t]+/,"")}function N(Ht){return Ht.replace(/[\n \t]+$/,"")}function I(Ht){var V=(Ht||"").match(/-?(\d+(?:\.\d*(?:[eE][+-]?\d+)?)?|\.\d+)(?=\D|$)/gm)||[];return V.map(parseFloat)}var U=/^[A-Z-]+$/;function K(Ht){return U.test(Ht)?Ht.toLowerCase():Ht}function Y(Ht){var V=/url\(('([^']+)'|"([^"]+)"|([^'")]+))\)/.exec(Ht)||[];return V[2]||V[3]||V[4]}function re(Ht){if(!Ht.startsWith("rgb"))return Ht;var V=3,ie=Ht.replace(/\d+(\.\d+)?/g,(le,F)=>V--&&F?String(Math.round(parseFloat(le))):le);return ie}var se=/(\[[^\]]+\])/g,Ae=/(#[^\s+>~.[:]+)/g,we=/(\.[^\s+>~.[:]+)/g,Ce=/(::[^\s+>~.[:]+|:first-line|:first-letter|:before|:after)/gi,ve=/(:[\w-]+\([^)]*\))/gi,ne=/(:[^\s+>~.[:]+)/g,ce=/([^\s+>~.[:]+)/g;function ae(Ht,V){var ie=V.exec(Ht);return ie?[Ht.replace(V," "),ie.length]:[Ht,0]}function De(Ht){var V=[0,0,0],ie=Ht.replace(/:not\(([^)]*)\)/g,"     $1 ").replace(/{[\s\S]*/gm," "),le=0;return[ie,le]=ae(ie,se),V[1]+=le,[ie,le]=ae(ie,Ae),V[0]+=le,[ie,le]=ae(ie,we),V[1]+=le,[ie,le]=ae(ie,Ce),V[2]+=le,[ie,le]=ae(ie,ve),V[1]+=le,[ie,le]=ae(ie,ne),V[1]+=le,ie=ie.replace(/[*\s+>~]/g," ").replace(/[#.]/g," "),[ie,le]=ae(ie,ce),V[2]+=le,V.join("")}var Oe=1e-8;function be(Ht){return Math.sqrt(Math.pow(Ht[0],2)+Math.pow(Ht[1],2))}function de(Ht,V){return(Ht[0]*V[0]+Ht[1]*V[1])/(be(Ht)*be(V))}function xe(Ht,V){return(Ht[0]*V[1]<Ht[1]*V[0]?-1:1)*Math.acos(de(Ht,V))}function je(Ht){return Ht*Ht*Ht}function Me(Ht){return 3*Ht*Ht*(1-Ht)}function Re(Ht){return 3*Ht*(1-Ht)*(1-Ht)}function it(Ht){return(1-Ht)*(1-Ht)*(1-Ht)}function ht(Ht){return Ht*Ht}function Be(Ht){return 2*Ht*(1-Ht)}function nt(Ht){return(1-Ht)*(1-Ht)}class Ge{constructor(V,ie,le){this.document=V,this.name=ie,this.value=le,this.isNormalizedColor=!1}static empty(V){return new Ge(V,"EMPTY","")}split(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:" ",{document:ie,name:le}=this;return T(this.getString()).trim().split(V).map(F=>new Ge(ie,le,F))}hasValue(V){var{value:ie}=this;return ie!==null&&ie!==""&&(V||ie!==0)&&typeof ie<"u"}isString(V){var{value:ie}=this,le=typeof ie=="string";return!le||!V?le:V.test(ie)}isUrlDefinition(){return this.isString(/^url\(/)}isPixels(){if(!this.hasValue())return!1;var V=this.getString();switch(!0){case V.endsWith("px"):case/^[0-9]+$/.test(V):return!0;default:return!1}}setValue(V){return this.value=V,this}getValue(V){return typeof V>"u"||this.hasValue()?this.value:V}getNumber(V){if(!this.hasValue())return typeof V>"u"?0:parseFloat(V);var{value:ie}=this,le=parseFloat(ie);return this.isString(/%$/)&&(le/=100),le}getString(V){return typeof V>"u"||this.hasValue()?typeof this.value>"u"?"":String(this.value):String(V)}getColor(V){var ie=this.getString(V);return this.isNormalizedColor||(this.isNormalizedColor=!0,ie=re(ie),this.value=ie),ie}getDpi(){return 96}getRem(){return this.document.rootEmSize}getEm(){return this.document.emSize}getUnits(){return this.getString().replace(/[0-9.-]/g,"")}getPixels(V){var ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!this.hasValue())return 0;var[le,F]=typeof V=="boolean"?[void 0,V]:[V],{viewPort:z}=this.document.screen;switch(!0){case this.isString(/vmin$/):return this.getNumber()/100*Math.min(z.computeSize("x"),z.computeSize("y"));case this.isString(/vmax$/):return this.getNumber()/100*Math.max(z.computeSize("x"),z.computeSize("y"));case this.isString(/vw$/):return this.getNumber()/100*z.computeSize("x");case this.isString(/vh$/):return this.getNumber()/100*z.computeSize("y");case this.isString(/rem$/):return this.getNumber()*this.getRem();case this.isString(/em$/):return this.getNumber()*this.getEm();case this.isString(/ex$/):return this.getNumber()*this.getEm()/2;case this.isString(/px$/):return this.getNumber();case this.isString(/pt$/):return this.getNumber()*this.getDpi()*.013888888888888888;case this.isString(/pc$/):return this.getNumber()*15;case this.isString(/cm$/):return this.getNumber()*this.getDpi()/2.54;case this.isString(/mm$/):return this.getNumber()*this.getDpi()/25.4;case this.isString(/in$/):return this.getNumber()*this.getDpi();case(this.isString(/%$/)&&F):return this.getNumber()*this.getEm();case this.isString(/%$/):return this.getNumber()*z.computeSize(le);default:{var te=this.getNumber();return ie&&te<1?te*z.computeSize(le):te}}}getMilliseconds(){return this.hasValue()?this.isString(/ms$/)?this.getNumber():this.getNumber()*1e3:0}getRadians(){if(!this.hasValue())return 0;switch(!0){case this.isString(/deg$/):return this.getNumber()*(Math.PI/180);case this.isString(/grad$/):return this.getNumber()*(Math.PI/200);case this.isString(/rad$/):return this.getNumber();default:return this.getNumber()*(Math.PI/180)}}getDefinition(){var V=this.getString(),ie=/#([^)'"]+)/.exec(V);return ie&&(ie=ie[1]),ie||(ie=V),this.document.definitions[ie]}getFillStyleDefinition(V,ie){var le=this.getDefinition();if(!le)return null;if(typeof le.createGradient=="function")return le.createGradient(this.document.ctx,V,ie);if(typeof le.createPattern=="function"){if(le.getHrefAttribute().hasValue()){var F=le.getAttribute("patternTransform");le=le.getHrefAttribute().getDefinition(),F.hasValue()&&le.getAttribute("patternTransform",!0).setValue(F.value)}return le.createPattern(this.document.ctx,V,ie)}return null}getTextBaseline(){return this.hasValue()?Ge.textBaselineMapping[this.getString()]:null}addOpacity(V){for(var ie=this.getColor(),le=ie.length,F=0,z=0;z<le&&(ie[z]===","&&F++,F!==3);z++);if(V.hasValue()&&this.isString()&&F!==3){var te=new p(ie);te.ok&&(te.alpha=V.getNumber(),ie=te.toRGBA())}return new Ge(this.document,this.name,ie)}}Ge.textBaselineMapping={baseline:"alphabetic","before-edge":"top","text-before-edge":"top",middle:"middle",central:"middle","after-edge":"bottom","text-after-edge":"bottom",ideographic:"ideographic",alphabetic:"alphabetic",hanging:"hanging",mathematical:"alphabetic"};class ft{constructor(){this.viewPorts=[]}clear(){this.viewPorts=[]}setCurrent(V,ie){this.viewPorts.push({width:V,height:ie})}removeCurrent(){this.viewPorts.pop()}getCurrent(){var{viewPorts:V}=this;return V[V.length-1]}get width(){return this.getCurrent().width}get height(){return this.getCurrent().height}computeSize(V){return typeof V=="number"?V:V==="x"?this.width:V==="y"?this.height:Math.sqrt(Math.pow(this.width,2)+Math.pow(this.height,2))/Math.sqrt(2)}}class Dt{constructor(V,ie){this.x=V,this.y=ie}static parse(V){var ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,[le=ie,F=ie]=I(V);return new Dt(le,F)}static parseScale(V){var ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,[le=ie,F=le]=I(V);return new Dt(le,F)}static parsePath(V){for(var ie=I(V),le=ie.length,F=[],z=0;z<le;z+=2)F.push(new Dt(ie[z],ie[z+1]));return F}angleTo(V){return Math.atan2(V.y-this.y,V.x-this.x)}applyTransform(V){var{x:ie,y:le}=this,F=ie*V[0]+le*V[2]+V[4],z=ie*V[1]+le*V[3]+V[5];this.x=F,this.y=z}}class rt{constructor(V){this.screen=V,this.working=!1,this.events=[],this.eventElements=[],this.onClick=this.onClick.bind(this),this.onMouseMove=this.onMouseMove.bind(this)}isWorking(){return this.working}start(){if(!this.working){var{screen:V,onClick:ie,onMouseMove:le}=this,F=V.ctx.canvas;F.onclick=ie,F.onmousemove=le,this.working=!0}}stop(){if(this.working){var V=this.screen.ctx.canvas;this.working=!1,V.onclick=null,V.onmousemove=null}}hasEvents(){return this.working&&this.events.length>0}runEvents(){if(this.working){var{screen:V,events:ie,eventElements:le}=this,{style:F}=V.ctx.canvas;F&&(F.cursor=""),ie.forEach((z,te)=>{for(var{run:fe}=z,Se=le[te];Se;)fe(Se),Se=Se.parent}),this.events=[],this.eventElements=[]}}checkPath(V,ie){if(!(!this.working||!ie)){var{events:le,eventElements:F}=this;le.forEach((z,te)=>{var{x:fe,y:Se}=z;!F[te]&&ie.isPointInPath&&ie.isPointInPath(fe,Se)&&(F[te]=V)})}}checkBoundingBox(V,ie){if(!(!this.working||!ie)){var{events:le,eventElements:F}=this;le.forEach((z,te)=>{var{x:fe,y:Se}=z;!F[te]&&ie.isPointInBox(fe,Se)&&(F[te]=V)})}}mapXY(V,ie){for(var{window:le,ctx:F}=this.screen,z=new Dt(V,ie),te=F.canvas;te;)z.x-=te.offsetLeft,z.y-=te.offsetTop,te=te.offsetParent;return le.scrollX&&(z.x+=le.scrollX),le.scrollY&&(z.y+=le.scrollY),z}onClick(V){var{x:ie,y:le}=this.mapXY(V.clientX,V.clientY);this.events.push({type:"onclick",x:ie,y:le,run(F){F.onClick&&F.onClick()}})}onMouseMove(V){var{x:ie,y:le}=this.mapXY(V.clientX,V.clientY);this.events.push({type:"onmousemove",x:ie,y:le,run(F){F.onMouseMove&&F.onMouseMove()}})}}var kt=typeof window<"u"?window:null,_t=typeof fetch<"u"?fetch.bind(void 0):null;class wt{constructor(V){var{fetch:ie=_t,window:le=kt}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.ctx=V,this.FRAMERATE=30,this.MAX_VIRTUAL_PIXELS=3e4,this.CLIENT_WIDTH=800,this.CLIENT_HEIGHT=600,this.viewPort=new ft,this.mouse=new rt(this),this.animations=[],this.waits=[],this.frameDuration=0,this.isReadyLock=!1,this.isFirstRender=!0,this.intervalId=null,this.window=le,this.fetch=ie}wait(V){this.waits.push(V)}ready(){return this.readyPromise?this.readyPromise:Promise.resolve()}isReady(){if(this.isReadyLock)return!0;var V=this.waits.every(ie=>ie());return V&&(this.waits=[],this.resolveReady&&this.resolveReady()),this.isReadyLock=V,V}setDefaults(V){V.strokeStyle="rgba(0,0,0,0)",V.lineCap="butt",V.lineJoin="miter",V.miterLimit=4}setViewBox(V){var{document:ie,ctx:le,aspectRatio:F,width:z,desiredWidth:te,height:fe,desiredHeight:Se,minX:$e=0,minY:ct=0,refX:P,refY:k,clip:D=!1,clipX:G=0,clipY:X=0}=V,ee=T(F).replace(/^defer\s/,""),[ye,he]=ee.split(" "),me=ye||"xMidYMid",Ie=he||"meet",Qe=z/te,qe=fe/Se,lt=Math.min(Qe,qe),Te=Math.max(Qe,qe),Et=te,at=Se;Ie==="meet"&&(Et*=lt,at*=lt),Ie==="slice"&&(Et*=Te,at*=Te);var Ct=new Ge(ie,"refX",P),et=new Ge(ie,"refY",k),Pt=Ct.hasValue()&&et.hasValue();if(Pt&&le.translate(-lt*Ct.getPixels("x"),-lt*et.getPixels("y")),D){var qt=lt*G,It=lt*X;le.beginPath(),le.moveTo(qt,It),le.lineTo(z,It),le.lineTo(z,fe),le.lineTo(qt,fe),le.closePath(),le.clip()}if(!Pt){var Je=Ie==="meet"&&lt===qe,zt=Ie==="slice"&&Te===qe,Sr=Ie==="meet"&&lt===Qe,ir=Ie==="slice"&&Te===Qe;me.startsWith("xMid")&&(Je||zt)&&le.translate(z/2-Et/2,0),me.endsWith("YMid")&&(Sr||ir)&&le.translate(0,fe/2-at/2),me.startsWith("xMax")&&(Je||zt)&&le.translate(z-Et,0),me.endsWith("YMax")&&(Sr||ir)&&le.translate(0,fe-at)}switch(!0){case me==="none":le.scale(Qe,qe);break;case Ie==="meet":le.scale(lt,lt);break;case Ie==="slice":le.scale(Te,Te);break}le.translate(-$e,-ct)}start(V){var{enableRedraw:ie=!1,ignoreMouse:le=!1,ignoreAnimation:F=!1,ignoreDimensions:z=!1,ignoreClear:te=!1,forceRedraw:fe,scaleWidth:Se,scaleHeight:$e,offsetX:ct,offsetY:P}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{FRAMERATE:k,mouse:D}=this,G=1e3/k;if(this.frameDuration=G,this.readyPromise=new Promise(me=>{this.resolveReady=me}),this.isReady()&&this.render(V,z,te,Se,$e,ct,P),!!ie){var X=Date.now(),ee=X,ye=0,he=()=>{X=Date.now(),ye=X-ee,ye>=G&&(ee=X-ye%G,this.shouldUpdate(F,fe)&&(this.render(V,z,te,Se,$e,ct,P),D.runEvents())),this.intervalId=A(he)};le||D.start(),this.intervalId=A(he)}}stop(){this.intervalId&&(A.cancel(this.intervalId),this.intervalId=null),this.mouse.stop()}shouldUpdate(V,ie){if(!V){var{frameDuration:le}=this,F=this.animations.reduce((z,te)=>te.update(le)||z,!1);if(F)return!0}return!!(typeof ie=="function"&&ie()||!this.isReadyLock&&this.isReady()||this.mouse.hasEvents())}render(V,ie,le,F,z,te,fe){var{CLIENT_WIDTH:Se,CLIENT_HEIGHT:$e,viewPort:ct,ctx:P,isFirstRender:k}=this,D=P.canvas;ct.clear(),D.width&&D.height?ct.setCurrent(D.width,D.height):ct.setCurrent(Se,$e);var G=V.getStyle("width"),X=V.getStyle("height");!ie&&(k||typeof F!="number"&&typeof z!="number")&&(G.hasValue()&&(D.width=G.getPixels("x"),D.style&&(D.style.width="".concat(D.width,"px"))),X.hasValue()&&(D.height=X.getPixels("y"),D.style&&(D.style.height="".concat(D.height,"px"))));var ee=D.clientWidth||D.width,ye=D.clientHeight||D.height;if(ie&&G.hasValue()&&X.hasValue()&&(ee=G.getPixels("x"),ye=X.getPixels("y")),ct.setCurrent(ee,ye),typeof te=="number"&&V.getAttribute("x",!0).setValue(te),typeof fe=="number"&&V.getAttribute("y",!0).setValue(fe),typeof F=="number"||typeof z=="number"){var he=I(V.getAttribute("viewBox").getString()),me=0,Ie=0;if(typeof F=="number"){var Qe=V.getStyle("width");Qe.hasValue()?me=Qe.getPixels("x")/F:isNaN(he[2])||(me=he[2]/F)}if(typeof z=="number"){var qe=V.getStyle("height");qe.hasValue()?Ie=qe.getPixels("y")/z:isNaN(he[3])||(Ie=he[3]/z)}me||(me=Ie),Ie||(Ie=me),V.getAttribute("width",!0).setValue(F),V.getAttribute("height",!0).setValue(z);var lt=V.getStyle("transform",!0,!0);lt.setValue("".concat(lt.getString()," scale(").concat(1/me,", ").concat(1/Ie,")"))}le||P.clearRect(0,0,ee,ye),V.render(P),k&&(this.isFirstRender=!1)}}wt.defaultWindow=kt,wt.defaultFetch=_t;var{defaultFetch:Tt}=wt,Er=typeof DOMParser<"u"?DOMParser:null;class pr{constructor(){var{fetch:V=Tt,DOMParser:ie=Er}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.fetch=V,this.DOMParser=ie}parse(V){var ie=this;return(0,d.default)(function*(){return V.startsWith("<")?ie.parseFromString(V):ie.load(V)})()}parseFromString(V){var ie=new this.DOMParser;try{return this.checkDocument(ie.parseFromString(V,"image/svg+xml"))}catch{return this.checkDocument(ie.parseFromString(V,"text/xml"))}}checkDocument(V){var ie=V.getElementsByTagName("parsererror")[0];if(ie)throw new Error(ie.textContent);return V}load(V){var ie=this;return(0,d.default)(function*(){var le=yield ie.fetch(V),F=yield le.text();return ie.parseFromString(F)})()}}class Xr{constructor(V,ie){this.type="translate",this.point=null,this.point=Dt.parse(ie)}apply(V){var{x:ie,y:le}=this.point;V.translate(ie||0,le||0)}unapply(V){var{x:ie,y:le}=this.point;V.translate(-1*ie||0,-1*le||0)}applyToPoint(V){var{x:ie,y:le}=this.point;V.applyTransform([1,0,0,1,ie||0,le||0])}}class yn{constructor(V,ie,le){this.type="rotate",this.angle=null,this.originX=null,this.originY=null,this.cx=0,this.cy=0;var F=I(ie);this.angle=new Ge(V,"angle",F[0]),this.originX=le[0],this.originY=le[1],this.cx=F[1]||0,this.cy=F[2]||0}apply(V){var{cx:ie,cy:le,originX:F,originY:z,angle:te}=this,fe=ie+F.getPixels("x"),Se=le+z.getPixels("y");V.translate(fe,Se),V.rotate(te.getRadians()),V.translate(-fe,-Se)}unapply(V){var{cx:ie,cy:le,originX:F,originY:z,angle:te}=this,fe=ie+F.getPixels("x"),Se=le+z.getPixels("y");V.translate(fe,Se),V.rotate(-1*te.getRadians()),V.translate(-fe,-Se)}applyToPoint(V){var{cx:ie,cy:le,angle:F}=this,z=F.getRadians();V.applyTransform([1,0,0,1,ie||0,le||0]),V.applyTransform([Math.cos(z),Math.sin(z),-Math.sin(z),Math.cos(z),0,0]),V.applyTransform([1,0,0,1,-ie||0,-le||0])}}class Mn{constructor(V,ie,le){this.type="scale",this.scale=null,this.originX=null,this.originY=null;var F=Dt.parseScale(ie);(F.x===0||F.y===0)&&(F.x=Oe,F.y=Oe),this.scale=F,this.originX=le[0],this.originY=le[1]}apply(V){var{scale:{x:ie,y:le},originX:F,originY:z}=this,te=F.getPixels("x"),fe=z.getPixels("y");V.translate(te,fe),V.scale(ie,le||ie),V.translate(-te,-fe)}unapply(V){var{scale:{x:ie,y:le},originX:F,originY:z}=this,te=F.getPixels("x"),fe=z.getPixels("y");V.translate(te,fe),V.scale(1/ie,1/le||ie),V.translate(-te,-fe)}applyToPoint(V){var{x:ie,y:le}=this.scale;V.applyTransform([ie||0,0,0,le||0,0,0])}}class dn{constructor(V,ie,le){this.type="matrix",this.matrix=[],this.originX=null,this.originY=null,this.matrix=I(ie),this.originX=le[0],this.originY=le[1]}apply(V){var{originX:ie,originY:le,matrix:F}=this,z=ie.getPixels("x"),te=le.getPixels("y");V.translate(z,te),V.transform(F[0],F[1],F[2],F[3],F[4],F[5]),V.translate(-z,-te)}unapply(V){var{originX:ie,originY:le,matrix:F}=this,z=F[0],te=F[2],fe=F[4],Se=F[1],$e=F[3],ct=F[5],P=0,k=0,D=1,G=1/(z*($e*D-ct*k)-te*(Se*D-ct*P)+fe*(Se*k-$e*P)),X=ie.getPixels("x"),ee=le.getPixels("y");V.translate(X,ee),V.transform(G*($e*D-ct*k),G*(ct*P-Se*D),G*(fe*k-te*D),G*(z*D-fe*P),G*(te*ct-fe*$e),G*(fe*Se-z*ct)),V.translate(-X,-ee)}applyToPoint(V){V.applyTransform(this.matrix)}}class pn extends dn{constructor(V,ie,le){super(V,ie,le),this.type="skew",this.angle=null,this.angle=new Ge(V,"angle",ie)}}class mn extends pn{constructor(V,ie,le){super(V,ie,le),this.type="skewX",this.matrix=[1,0,Math.tan(this.angle.getRadians()),1,0,0]}}class Kn extends pn{constructor(V,ie,le){super(V,ie,le),this.type="skewY",this.matrix=[1,Math.tan(this.angle.getRadians()),0,1,0,0]}}function Zn(Ht){return T(Ht).trim().replace(/\)([a-zA-Z])/g,") $1").replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/)}function Li(Ht){var[V,ie]=Ht.split("(");return[V.trim(),ie.trim().replace(")","")]}class ot{constructor(V,ie,le){this.document=V,this.transforms=[];var F=Zn(ie);F.forEach(z=>{if(z!=="none"){var[te,fe]=Li(z),Se=ot.transformTypes[te];typeof Se<"u"&&this.transforms.push(new Se(this.document,fe,le))}})}static fromElement(V,ie){var le=ie.getStyle("transform",!1,!0),[F,z=F]=ie.getStyle("transform-origin",!1,!0).split(),te=[F,z];return le.hasValue()?new ot(V,le.getString(),te):null}apply(V){for(var{transforms:ie}=this,le=ie.length,F=0;F<le;F++)ie[F].apply(V)}unapply(V){for(var{transforms:ie}=this,le=ie.length,F=le-1;F>=0;F--)ie[F].unapply(V)}applyToPoint(V){for(var{transforms:ie}=this,le=ie.length,F=0;F<le;F++)ie[F].applyToPoint(V)}}ot.transformTypes={translate:Xr,rotate:yn,scale:Mn,matrix:dn,skewX:mn,skewY:Kn};class Yt{constructor(V,ie){var le=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(this.document=V,this.node=ie,this.captureTextNodes=le,this.attributes=Object.create(null),this.styles=Object.create(null),this.stylesSpecificity=Object.create(null),this.animationFrozen=!1,this.animationFrozenValue="",this.parent=null,this.children=[],!(!ie||ie.nodeType!==1)){if(Array.from(ie.attributes).forEach(fe=>{var Se=K(fe.nodeName);this.attributes[Se]=new Ge(V,Se,fe.value)}),this.addStylesFromStyleDefinition(),this.getAttribute("style").hasValue()){var F=this.getAttribute("style").getString().split(";").map(fe=>fe.trim());F.forEach(fe=>{if(fe){var[Se,$e]=fe.split(":").map(ct=>ct.trim());this.styles[Se]=new Ge(V,Se,$e)}})}var{definitions:z}=V,te=this.getAttribute("id");te.hasValue()&&(z[te.getString()]||(z[te.getString()]=this)),Array.from(ie.childNodes).forEach(fe=>{if(fe.nodeType===1)this.addChild(fe);else if(le&&(fe.nodeType===3||fe.nodeType===4)){var Se=V.createTextNode(fe);Se.getText().length>0&&this.addChild(Se)}})}}getAttribute(V){var ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,le=this.attributes[V];if(!le&&ie){var F=new Ge(this.document,V,"");return this.attributes[V]=F,F}return le||Ge.empty(this.document)}getHrefAttribute(){for(var V in this.attributes)if(V==="href"||V.endsWith(":href"))return this.attributes[V];return Ge.empty(this.document)}getStyle(V){var ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,le=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,F=this.styles[V];if(F)return F;var z=this.getAttribute(V);if(z!=null&&z.hasValue())return this.styles[V]=z,z;if(!le){var{parent:te}=this;if(te){var fe=te.getStyle(V);if(fe!=null&&fe.hasValue())return fe}}if(ie){var Se=new Ge(this.document,V,"");return this.styles[V]=Se,Se}return F||Ge.empty(this.document)}render(V){if(!(this.getStyle("display").getString()==="none"||this.getStyle("visibility").getString()==="hidden")){if(V.save(),this.getStyle("mask").hasValue()){var ie=this.getStyle("mask").getDefinition();ie&&(this.applyEffects(V),ie.apply(V,this))}else if(this.getStyle("filter").getValue("none")!=="none"){var le=this.getStyle("filter").getDefinition();le&&(this.applyEffects(V),le.apply(V,this))}else this.setContext(V),this.renderChildren(V),this.clearContext(V);V.restore()}}setContext(V){}applyEffects(V){var ie=ot.fromElement(this.document,this);ie&&ie.apply(V);var le=this.getStyle("clip-path",!1,!0);if(le.hasValue()){var F=le.getDefinition();F&&F.apply(V)}}clearContext(V){}renderChildren(V){this.children.forEach(ie=>{ie.render(V)})}addChild(V){var ie=V instanceof Yt?V:this.document.createElement(V);ie.parent=this,Yt.ignoreChildTypes.includes(ie.type)||this.children.push(ie)}matchesSelector(V){var ie,{node:le}=this;if(typeof le.matches=="function")return le.matches(V);var F=(ie=le.getAttribute)===null||ie===void 0?void 0:ie.call(le,"class");return!F||F===""?!1:F.split(" ").some(z=>".".concat(z)===V)}addStylesFromStyleDefinition(){var{styles:V,stylesSpecificity:ie}=this.document;for(var le in V)if(!le.startsWith("@")&&this.matchesSelector(le)){var F=V[le],z=ie[le];if(F)for(var te in F){var fe=this.stylesSpecificity[te];typeof fe>"u"&&(fe="000"),z>=fe&&(this.styles[te]=F[te],this.stylesSpecificity[te]=z)}}}removeStyles(V,ie){var le=ie.reduce((F,z)=>{var te=V.getStyle(z);if(!te.hasValue())return F;var fe=te.getString();return te.setValue(""),[...F,[z,fe]]},[]);return le}restoreStyles(V,ie){ie.forEach(le=>{var[F,z]=le;V.getStyle(F,!0).setValue(z)})}isFirstChild(){var V;return((V=this.parent)===null||V===void 0?void 0:V.children.indexOf(this))===0}}Yt.ignoreChildTypes=["title"];class kr extends Yt{constructor(V,ie,le){super(V,ie,le)}}function nr(Ht){var V=Ht.trim();return/^('|")/.test(V)?V:'"'.concat(V,'"')}function Qt(Ht){return typeof process>"u"?Ht:Ht.trim().split(",").map(nr).join(",")}function fr(Ht){if(!Ht)return"";var V=Ht.trim().toLowerCase();switch(V){case"normal":case"italic":case"oblique":case"inherit":case"initial":case"unset":return V;default:return/^oblique\s+(-|)\d+deg$/.test(V)?V:""}}function zr(Ht){if(!Ht)return"";var V=Ht.trim().toLowerCase();switch(V){case"normal":case"bold":case"lighter":case"bolder":case"inherit":case"initial":case"unset":return V;default:return/^[\d.]+$/.test(V)?V:""}}class Yr{constructor(V,ie,le,F,z,te){var fe=te?typeof te=="string"?Yr.parse(te):te:{};this.fontFamily=z||fe.fontFamily,this.fontSize=F||fe.fontSize,this.fontStyle=V||fe.fontStyle,this.fontWeight=le||fe.fontWeight,this.fontVariant=ie||fe.fontVariant}static parse(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",ie=arguments.length>1?arguments[1]:void 0,le="",F="",z="",te="",fe="",Se=T(V).trim().split(" "),$e={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1};return Se.forEach(ct=>{switch(!0){case(!$e.fontStyle&&Yr.styles.includes(ct)):ct!=="inherit"&&(le=ct),$e.fontStyle=!0;break;case(!$e.fontVariant&&Yr.variants.includes(ct)):ct!=="inherit"&&(F=ct),$e.fontStyle=!0,$e.fontVariant=!0;break;case(!$e.fontWeight&&Yr.weights.includes(ct)):ct!=="inherit"&&(z=ct),$e.fontStyle=!0,$e.fontVariant=!0,$e.fontWeight=!0;break;case!$e.fontSize:ct!=="inherit"&&([te]=ct.split("/")),$e.fontStyle=!0,$e.fontVariant=!0,$e.fontWeight=!0,$e.fontSize=!0;break;default:ct!=="inherit"&&(fe+=ct)}}),new Yr(le,F,z,te,fe,ie)}toString(){return[fr(this.fontStyle),this.fontVariant,zr(this.fontWeight),this.fontSize,Qt(this.fontFamily)].join(" ").trim()}}Yr.styles="normal|italic|oblique|inherit",Yr.variants="normal|small-caps|inherit",Yr.weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit";class Ln{constructor(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Number.NaN,ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.NaN,le=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Number.NaN,F=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Number.NaN;this.x1=V,this.y1=ie,this.x2=le,this.y2=F,this.addPoint(V,ie),this.addPoint(le,F)}get x(){return this.x1}get y(){return this.y1}get width(){return this.x2-this.x1}get height(){return this.y2-this.y1}addPoint(V,ie){typeof V<"u"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=V,this.x2=V),V<this.x1&&(this.x1=V),V>this.x2&&(this.x2=V)),typeof ie<"u"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=ie,this.y2=ie),ie<this.y1&&(this.y1=ie),ie>this.y2&&(this.y2=ie))}addX(V){this.addPoint(V,null)}addY(V){this.addPoint(null,V)}addBoundingBox(V){if(V){var{x1:ie,y1:le,x2:F,y2:z}=V;this.addPoint(ie,le),this.addPoint(F,z)}}sumCubic(V,ie,le,F,z){return Math.pow(1-V,3)*ie+3*Math.pow(1-V,2)*V*le+3*(1-V)*Math.pow(V,2)*F+Math.pow(V,3)*z}bezierCurveAdd(V,ie,le,F,z){var te=6*ie-12*le+6*F,fe=-3*ie+9*le-9*F+3*z,Se=3*le-3*ie;if(fe===0){if(te===0)return;var $e=-Se/te;0<$e&&$e<1&&(V?this.addX(this.sumCubic($e,ie,le,F,z)):this.addY(this.sumCubic($e,ie,le,F,z)));return}var ct=Math.pow(te,2)-4*Se*fe;if(!(ct<0)){var P=(-te+Math.sqrt(ct))/(2*fe);0<P&&P<1&&(V?this.addX(this.sumCubic(P,ie,le,F,z)):this.addY(this.sumCubic(P,ie,le,F,z)));var k=(-te-Math.sqrt(ct))/(2*fe);0<k&&k<1&&(V?this.addX(this.sumCubic(k,ie,le,F,z)):this.addY(this.sumCubic(k,ie,le,F,z)))}}addBezierCurve(V,ie,le,F,z,te,fe,Se){this.addPoint(V,ie),this.addPoint(fe,Se),this.bezierCurveAdd(!0,V,le,z,fe),this.bezierCurveAdd(!1,ie,F,te,Se)}addQuadraticCurve(V,ie,le,F,z,te){var fe=V+.6666666666666666*(le-V),Se=ie+2/3*(F-ie),$e=fe+1/3*(z-V),ct=Se+1/3*(te-ie);this.addBezierCurve(V,ie,fe,$e,Se,ct,z,te)}isPointInBox(V,ie){var{x1:le,y1:F,x2:z,y2:te}=this;return le<=V&&V<=z&&F<=ie&&ie<=te}}class ln extends g.SVGPathData{constructor(V){super(V.replace(/([+\-.])\s+/gm,"$1").replace(/[^MmZzLlHhVvCcSsQqTtAae\d\s.,+-].*/g,"")),this.control=null,this.start=null,this.current=null,this.command=null,this.commands=this.commands,this.i=-1,this.previousCommand=null,this.points=[],this.angles=[]}reset(){this.i=-1,this.command=null,this.previousCommand=null,this.start=new Dt(0,0),this.control=new Dt(0,0),this.current=new Dt(0,0),this.points=[],this.angles=[]}isEnd(){var{i:V,commands:ie}=this;return V>=ie.length-1}next(){var V=this.commands[++this.i];return this.previousCommand=this.command,this.command=V,V}getPoint(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"x",ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"y",le=new Dt(this.command[V],this.command[ie]);return this.makeAbsolute(le)}getAsControlPoint(V,ie){var le=this.getPoint(V,ie);return this.control=le,le}getAsCurrentPoint(V,ie){var le=this.getPoint(V,ie);return this.current=le,le}getReflectedControlPoint(){var V=this.previousCommand.type;if(V!==g.SVGPathData.CURVE_TO&&V!==g.SVGPathData.SMOOTH_CURVE_TO&&V!==g.SVGPathData.QUAD_TO&&V!==g.SVGPathData.SMOOTH_QUAD_TO)return this.current;var{current:{x:ie,y:le},control:{x:F,y:z}}=this,te=new Dt(2*ie-F,2*le-z);return te}makeAbsolute(V){if(this.command.relative){var{x:ie,y:le}=this.current;V.x+=ie,V.y+=le}return V}addMarker(V,ie,le){var{points:F,angles:z}=this;le&&z.length>0&&!z[z.length-1]&&(z[z.length-1]=F[F.length-1].angleTo(le)),this.addMarkerAngle(V,ie?ie.angleTo(V):null)}addMarkerAngle(V,ie){this.points.push(V),this.angles.push(ie)}getMarkerPoints(){return this.points}getMarkerAngles(){for(var{angles:V}=this,ie=V.length,le=0;le<ie;le++)if(!V[le]){for(var F=le+1;F<ie;F++)if(V[F]){V[le]=V[F];break}}return V}}class Jn extends Yt{constructor(){super(...arguments),this.modifiedEmSizeStack=!1}calculateOpacity(){for(var V=1,ie=this;ie;){var le=ie.getStyle("opacity",!1,!0);le.hasValue(!0)&&(V*=le.getNumber()),ie=ie.parent}return V}setContext(V){var ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!ie){var le=this.getStyle("fill"),F=this.getStyle("fill-opacity"),z=this.getStyle("stroke"),te=this.getStyle("stroke-opacity");if(le.isUrlDefinition()){var fe=le.getFillStyleDefinition(this,F);fe&&(V.fillStyle=fe)}else if(le.hasValue()){le.getString()==="currentColor"&&le.setValue(this.getStyle("color").getColor());var Se=le.getColor();Se!=="inherit"&&(V.fillStyle=Se==="none"?"rgba(0,0,0,0)":Se)}if(F.hasValue()){var $e=new Ge(this.document,"fill",V.fillStyle).addOpacity(F).getColor();V.fillStyle=$e}if(z.isUrlDefinition()){var ct=z.getFillStyleDefinition(this,te);ct&&(V.strokeStyle=ct)}else if(z.hasValue()){z.getString()==="currentColor"&&z.setValue(this.getStyle("color").getColor());var P=z.getString();P!=="inherit"&&(V.strokeStyle=P==="none"?"rgba(0,0,0,0)":P)}if(te.hasValue()){var k=new Ge(this.document,"stroke",V.strokeStyle).addOpacity(te).getString();V.strokeStyle=k}var D=this.getStyle("stroke-width");if(D.hasValue()){var G=D.getPixels();V.lineWidth=G||Oe}var X=this.getStyle("stroke-linecap"),ee=this.getStyle("stroke-linejoin"),ye=this.getStyle("stroke-miterlimit"),he=this.getStyle("stroke-dasharray"),me=this.getStyle("stroke-dashoffset");if(X.hasValue()&&(V.lineCap=X.getString()),ee.hasValue()&&(V.lineJoin=ee.getString()),ye.hasValue()&&(V.miterLimit=ye.getNumber()),he.hasValue()&&he.getString()!=="none"){var Ie=I(he.getString());typeof V.setLineDash<"u"?V.setLineDash(Ie):typeof V.webkitLineDash<"u"?V.webkitLineDash=Ie:typeof V.mozDash<"u"&&!(Ie.length===1&&Ie[0]===0)&&(V.mozDash=Ie);var Qe=me.getPixels();typeof V.lineDashOffset<"u"?V.lineDashOffset=Qe:typeof V.webkitLineDashOffset<"u"?V.webkitLineDashOffset=Qe:typeof V.mozDashOffset<"u"&&(V.mozDashOffset=Qe)}}if(this.modifiedEmSizeStack=!1,typeof V.font<"u"){var qe=this.getStyle("font"),lt=this.getStyle("font-style"),Te=this.getStyle("font-variant"),Et=this.getStyle("font-weight"),at=this.getStyle("font-size"),Ct=this.getStyle("font-family"),et=new Yr(lt.getString(),Te.getString(),Et.getString(),at.hasValue()?"".concat(at.getPixels(!0),"px"):"",Ct.getString(),Yr.parse(qe.getString(),V.font));lt.setValue(et.fontStyle),Te.setValue(et.fontVariant),Et.setValue(et.fontWeight),at.setValue(et.fontSize),Ct.setValue(et.fontFamily),V.font=et.toString(),at.isPixels()&&(this.document.emSize=at.getPixels(),this.modifiedEmSizeStack=!0)}ie||(this.applyEffects(V),V.globalAlpha=this.calculateOpacity())}clearContext(V){super.clearContext(V),this.modifiedEmSizeStack&&this.document.popEmSize()}}class rn extends Jn{constructor(V,ie,le){super(V,ie,le),this.type="path",this.pathParser=null,this.pathParser=new ln(this.getAttribute("d").getString())}path(V){var{pathParser:ie}=this,le=new Ln;for(ie.reset(),V&&V.beginPath();!ie.isEnd();)switch(ie.next().type){case ln.MOVE_TO:this.pathM(V,le);break;case ln.LINE_TO:this.pathL(V,le);break;case ln.HORIZ_LINE_TO:this.pathH(V,le);break;case ln.VERT_LINE_TO:this.pathV(V,le);break;case ln.CURVE_TO:this.pathC(V,le);break;case ln.SMOOTH_CURVE_TO:this.pathS(V,le);break;case ln.QUAD_TO:this.pathQ(V,le);break;case ln.SMOOTH_QUAD_TO:this.pathT(V,le);break;case ln.ARC:this.pathA(V,le);break;case ln.CLOSE_PATH:this.pathZ(V,le);break}return le}getBoundingBox(V){return this.path()}getMarkers(){var{pathParser:V}=this,ie=V.getMarkerPoints(),le=V.getMarkerAngles(),F=ie.map((z,te)=>[z,le[te]]);return F}renderChildren(V){this.path(V),this.document.screen.mouse.checkPath(this,V);var ie=this.getStyle("fill-rule");V.fillStyle!==""&&(ie.getString("inherit")!=="inherit"?V.fill(ie.getString()):V.fill()),V.strokeStyle!==""&&(this.getAttribute("vector-effect").getString()==="non-scaling-stroke"?(V.save(),V.setTransform(1,0,0,1,0,0),V.stroke(),V.restore()):V.stroke());var le=this.getMarkers();if(le){var F=le.length-1,z=this.getStyle("marker-start"),te=this.getStyle("marker-mid"),fe=this.getStyle("marker-end");if(z.isUrlDefinition()){var Se=z.getDefinition(),[$e,ct]=le[0];Se.render(V,$e,ct)}if(te.isUrlDefinition())for(var P=te.getDefinition(),k=1;k<F;k++){var[D,G]=le[k];P.render(V,D,G)}if(fe.isUrlDefinition()){var X=fe.getDefinition(),[ee,ye]=le[F];X.render(V,ee,ye)}}}static pathM(V){var ie=V.getAsCurrentPoint();return V.start=V.current,{point:ie}}pathM(V,ie){var{pathParser:le}=this,{point:F}=rn.pathM(le),{x:z,y:te}=F;le.addMarker(F),ie.addPoint(z,te),V&&V.moveTo(z,te)}static pathL(V){var{current:ie}=V,le=V.getAsCurrentPoint();return{current:ie,point:le}}pathL(V,ie){var{pathParser:le}=this,{current:F,point:z}=rn.pathL(le),{x:te,y:fe}=z;le.addMarker(z,F),ie.addPoint(te,fe),V&&V.lineTo(te,fe)}static pathH(V){var{current:ie,command:le}=V,F=new Dt((le.relative?ie.x:0)+le.x,ie.y);return V.current=F,{current:ie,point:F}}pathH(V,ie){var{pathParser:le}=this,{current:F,point:z}=rn.pathH(le),{x:te,y:fe}=z;le.addMarker(z,F),ie.addPoint(te,fe),V&&V.lineTo(te,fe)}static pathV(V){var{current:ie,command:le}=V,F=new Dt(ie.x,(le.relative?ie.y:0)+le.y);return V.current=F,{current:ie,point:F}}pathV(V,ie){var{pathParser:le}=this,{current:F,point:z}=rn.pathV(le),{x:te,y:fe}=z;le.addMarker(z,F),ie.addPoint(te,fe),V&&V.lineTo(te,fe)}static pathC(V){var{current:ie}=V,le=V.getPoint("x1","y1"),F=V.getAsControlPoint("x2","y2"),z=V.getAsCurrentPoint();return{current:ie,point:le,controlPoint:F,currentPoint:z}}pathC(V,ie){var{pathParser:le}=this,{current:F,point:z,controlPoint:te,currentPoint:fe}=rn.pathC(le);le.addMarker(fe,te,z),ie.addBezierCurve(F.x,F.y,z.x,z.y,te.x,te.y,fe.x,fe.y),V&&V.bezierCurveTo(z.x,z.y,te.x,te.y,fe.x,fe.y)}static pathS(V){var{current:ie}=V,le=V.getReflectedControlPoint(),F=V.getAsControlPoint("x2","y2"),z=V.getAsCurrentPoint();return{current:ie,point:le,controlPoint:F,currentPoint:z}}pathS(V,ie){var{pathParser:le}=this,{current:F,point:z,controlPoint:te,currentPoint:fe}=rn.pathS(le);le.addMarker(fe,te,z),ie.addBezierCurve(F.x,F.y,z.x,z.y,te.x,te.y,fe.x,fe.y),V&&V.bezierCurveTo(z.x,z.y,te.x,te.y,fe.x,fe.y)}static pathQ(V){var{current:ie}=V,le=V.getAsControlPoint("x1","y1"),F=V.getAsCurrentPoint();return{current:ie,controlPoint:le,currentPoint:F}}pathQ(V,ie){var{pathParser:le}=this,{current:F,controlPoint:z,currentPoint:te}=rn.pathQ(le);le.addMarker(te,z,z),ie.addQuadraticCurve(F.x,F.y,z.x,z.y,te.x,te.y),V&&V.quadraticCurveTo(z.x,z.y,te.x,te.y)}static pathT(V){var{current:ie}=V,le=V.getReflectedControlPoint();V.control=le;var F=V.getAsCurrentPoint();return{current:ie,controlPoint:le,currentPoint:F}}pathT(V,ie){var{pathParser:le}=this,{current:F,controlPoint:z,currentPoint:te}=rn.pathT(le);le.addMarker(te,z,z),ie.addQuadraticCurve(F.x,F.y,z.x,z.y,te.x,te.y),V&&V.quadraticCurveTo(z.x,z.y,te.x,te.y)}static pathA(V){var{current:ie,command:le}=V,{rX:F,rY:z,xRot:te,lArcFlag:fe,sweepFlag:Se}=le,$e=te*(Math.PI/180),ct=V.getAsCurrentPoint(),P=new Dt(Math.cos($e)*(ie.x-ct.x)/2+Math.sin($e)*(ie.y-ct.y)/2,-Math.sin($e)*(ie.x-ct.x)/2+Math.cos($e)*(ie.y-ct.y)/2),k=Math.pow(P.x,2)/Math.pow(F,2)+Math.pow(P.y,2)/Math.pow(z,2);k>1&&(F*=Math.sqrt(k),z*=Math.sqrt(k));var D=(fe===Se?-1:1)*Math.sqrt((Math.pow(F,2)*Math.pow(z,2)-Math.pow(F,2)*Math.pow(P.y,2)-Math.pow(z,2)*Math.pow(P.x,2))/(Math.pow(F,2)*Math.pow(P.y,2)+Math.pow(z,2)*Math.pow(P.x,2)));isNaN(D)&&(D=0);var G=new Dt(D*F*P.y/z,D*-z*P.x/F),X=new Dt((ie.x+ct.x)/2+Math.cos($e)*G.x-Math.sin($e)*G.y,(ie.y+ct.y)/2+Math.sin($e)*G.x+Math.cos($e)*G.y),ee=xe([1,0],[(P.x-G.x)/F,(P.y-G.y)/z]),ye=[(P.x-G.x)/F,(P.y-G.y)/z],he=[(-P.x-G.x)/F,(-P.y-G.y)/z],me=xe(ye,he);return de(ye,he)<=-1&&(me=Math.PI),de(ye,he)>=1&&(me=0),{currentPoint:ct,rX:F,rY:z,sweepFlag:Se,xAxisRotation:$e,centp:X,a1:ee,ad:me}}pathA(V,ie){var{pathParser:le}=this,{currentPoint:F,rX:z,rY:te,sweepFlag:fe,xAxisRotation:Se,centp:$e,a1:ct,ad:P}=rn.pathA(le),k=1-fe?1:-1,D=ct+k*(P/2),G=new Dt($e.x+z*Math.cos(D),$e.y+te*Math.sin(D));if(le.addMarkerAngle(G,D-k*Math.PI/2),le.addMarkerAngle(F,D-k*Math.PI),ie.addPoint(F.x,F.y),V&&!isNaN(ct)&&!isNaN(P)){var X=z>te?z:te,ee=z>te?1:z/te,ye=z>te?te/z:1;V.translate($e.x,$e.y),V.rotate(Se),V.scale(ee,ye),V.arc(0,0,X,ct,ct+P,!!(1-fe)),V.scale(1/ee,1/ye),V.rotate(-Se),V.translate(-$e.x,-$e.y)}}static pathZ(V){V.current=V.start}pathZ(V,ie){rn.pathZ(this.pathParser),V&&ie.x1!==ie.x2&&ie.y1!==ie.y2&&V.closePath()}}class Ur extends rn{constructor(V,ie,le){super(V,ie,le),this.type="glyph",this.horizAdvX=this.getAttribute("horiz-adv-x").getNumber(),this.unicode=this.getAttribute("unicode").getString(),this.arabicForm=this.getAttribute("arabic-form").getString()}}class An extends Jn{constructor(V,ie,le){super(V,ie,new.target===An?!0:le),this.type="text",this.x=0,this.y=0,this.measureCache=-1}setContext(V){var ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;super.setContext(V,ie);var le=this.getStyle("dominant-baseline").getTextBaseline()||this.getStyle("alignment-baseline").getTextBaseline();le&&(V.textBaseline=le)}initializeCoordinates(){this.x=0,this.y=0,this.leafTexts=[],this.textChunkStart=0,this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY}getBoundingBox(V){if(this.type!=="text")return this.getTElementBoundingBox(V);this.initializeCoordinates(),this.adjustChildCoordinatesRecursive(V);var ie=null;return this.children.forEach((le,F)=>{var z=this.getChildBoundingBox(V,this,this,F);ie?ie.addBoundingBox(z):ie=z}),ie}getFontSize(){var{document:V,parent:ie}=this,le=Yr.parse(V.ctx.font).fontSize,F=ie.getStyle("font-size").getNumber(le);return F}getTElementBoundingBox(V){var ie=this.getFontSize();return new Ln(this.x,this.y-ie,this.x+this.measureText(V),this.y)}getGlyph(V,ie,le){var F=ie[le],z=null;if(V.isArabic){var te=ie.length,fe=ie[le-1],Se=ie[le+1],$e="isolated";if((le===0||fe===" ")&&le<te-1&&Se!==" "&&($e="terminal"),le>0&&fe!==" "&&le<te-1&&Se!==" "&&($e="medial"),le>0&&fe!==" "&&(le===te-1||Se===" ")&&($e="initial"),typeof V.glyphs[F]<"u"){var ct=V.glyphs[F];z=ct instanceof Ur?ct:ct[$e]}}else z=V.glyphs[F];return z||(z=V.missingGlyph),z}getText(){return""}getTextFromNode(V){var ie=V||this.node,le=Array.from(ie.parentNode.childNodes),F=le.indexOf(ie),z=le.length-1,te=T(ie.textContent||"");return F===0&&(te=C(te)),F===z&&(te=N(te)),te}renderChildren(V){if(this.type!=="text"){this.renderTElementChildren(V);return}this.initializeCoordinates(),this.adjustChildCoordinatesRecursive(V),this.children.forEach((le,F)=>{this.renderChild(V,this,this,F)});var{mouse:ie}=this.document.screen;ie.isWorking()&&ie.checkBoundingBox(this,this.getBoundingBox(V))}renderTElementChildren(V){var{document:ie,parent:le}=this,F=this.getText(),z=le.getStyle("font-family").getDefinition();if(z){for(var{unitsPerEm:te}=z.fontFace,fe=Yr.parse(ie.ctx.font),Se=le.getStyle("font-size").getNumber(fe.fontSize),$e=le.getStyle("font-style").getString(fe.fontStyle),ct=Se/te,P=z.isRTL?F.split("").reverse().join(""):F,k=I(le.getAttribute("dx").getString()),D=P.length,G=0;G<D;G++){var X=this.getGlyph(z,P,G);V.translate(this.x,this.y),V.scale(ct,-ct);var ee=V.lineWidth;V.lineWidth=V.lineWidth*te/Se,$e==="italic"&&V.transform(1,0,.4,1,0,0),X.render(V),$e==="italic"&&V.transform(1,0,-.4,1,0,0),V.lineWidth=ee,V.scale(1/ct,-1/ct),V.translate(-this.x,-this.y),this.x+=Se*(X.horizAdvX||z.horizAdvX)/te,typeof k[G]<"u"&&!isNaN(k[G])&&(this.x+=k[G])}return}var{x:ye,y:he}=this;V.fillStyle&&V.fillText(F,ye,he),V.strokeStyle&&V.strokeText(F,ye,he)}applyAnchoring(){if(!(this.textChunkStart>=this.leafTexts.length)){var V=this.leafTexts[this.textChunkStart],ie=V.getStyle("text-anchor").getString("start"),le=!1,F=0;ie==="start"&&!le||ie==="end"&&le?F=V.x-this.minX:ie==="end"&&!le||ie==="start"&&le?F=V.x-this.maxX:F=V.x-(this.minX+this.maxX)/2;for(var z=this.textChunkStart;z<this.leafTexts.length;z++)this.leafTexts[z].x+=F;this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.textChunkStart=this.leafTexts.length}}adjustChildCoordinatesRecursive(V){this.children.forEach((ie,le)=>{this.adjustChildCoordinatesRecursiveCore(V,this,this,le)}),this.applyAnchoring()}adjustChildCoordinatesRecursiveCore(V,ie,le,F){var z=le.children[F];z.children.length>0?z.children.forEach((te,fe)=>{ie.adjustChildCoordinatesRecursiveCore(V,ie,z,fe)}):this.adjustChildCoordinates(V,ie,le,F)}adjustChildCoordinates(V,ie,le,F){var z=le.children[F];if(typeof z.measureText!="function")return z;V.save(),z.setContext(V,!0);var te=z.getAttribute("x"),fe=z.getAttribute("y"),Se=z.getAttribute("dx"),$e=z.getAttribute("dy"),ct=z.getStyle("font-family").getDefinition(),P=!!ct&&ct.isRTL;F===0&&(te.hasValue()||te.setValue(z.getInheritedAttribute("x")),fe.hasValue()||fe.setValue(z.getInheritedAttribute("y")),Se.hasValue()||Se.setValue(z.getInheritedAttribute("dx")),$e.hasValue()||$e.setValue(z.getInheritedAttribute("dy")));var k=z.measureText(V);return P&&(ie.x-=k),te.hasValue()?(ie.applyAnchoring(),z.x=te.getPixels("x"),Se.hasValue()&&(z.x+=Se.getPixels("x"))):(Se.hasValue()&&(ie.x+=Se.getPixels("x")),z.x=ie.x),ie.x=z.x,P||(ie.x+=k),fe.hasValue()?(z.y=fe.getPixels("y"),$e.hasValue()&&(z.y+=$e.getPixels("y"))):($e.hasValue()&&(ie.y+=$e.getPixels("y")),z.y=ie.y),ie.y=z.y,ie.leafTexts.push(z),ie.minX=Math.min(ie.minX,z.x,z.x+k),ie.maxX=Math.max(ie.maxX,z.x,z.x+k),z.clearContext(V),V.restore(),z}getChildBoundingBox(V,ie,le,F){var z=le.children[F];if(typeof z.getBoundingBox!="function")return null;var te=z.getBoundingBox(V);return te?(z.children.forEach((fe,Se)=>{var $e=ie.getChildBoundingBox(V,ie,z,Se);te.addBoundingBox($e)}),te):null}renderChild(V,ie,le,F){var z=le.children[F];z.render(V),z.children.forEach((te,fe)=>{ie.renderChild(V,ie,z,fe)})}measureText(V){var{measureCache:ie}=this;if(~ie)return ie;var le=this.getText(),F=this.measureTargetText(V,le);return this.measureCache=F,F}measureTargetText(V,ie){if(!ie.length)return 0;var{parent:le}=this,F=le.getStyle("font-family").getDefinition();if(F){for(var z=this.getFontSize(),te=F.isRTL?ie.split("").reverse().join(""):ie,fe=I(le.getAttribute("dx").getString()),Se=te.length,$e=0,ct=0;ct<Se;ct++){var P=this.getGlyph(F,te,ct);$e+=(P.horizAdvX||F.horizAdvX)*z/F.fontFace.unitsPerEm,typeof fe[ct]<"u"&&!isNaN(fe[ct])&&($e+=fe[ct])}return $e}if(!V.measureText)return ie.length*10;V.save(),this.setContext(V,!0);var{width:k}=V.measureText(ie);return this.clearContext(V),V.restore(),k}getInheritedAttribute(V){for(var ie=this;ie instanceof An&&ie.isFirstChild();){var le=ie.parent.getAttribute(V);if(le.hasValue(!0))return le.getValue("0");ie=ie.parent}return null}}class cn extends An{constructor(V,ie,le){super(V,ie,new.target===cn?!0:le),this.type="tspan",this.text=this.children.length>0?"":this.getTextFromNode()}getText(){return this.text}}class On extends cn{constructor(){super(...arguments),this.type="textNode"}}class li extends Jn{constructor(){super(...arguments),this.type="svg",this.root=!1}setContext(V){var ie,{document:le}=this,{screen:F,window:z}=le,te=V.canvas;if(F.setDefaults(V),te.style&&typeof V.font<"u"&&z&&typeof z.getComputedStyle<"u"){V.font=z.getComputedStyle(te).getPropertyValue("font");var fe=new Ge(le,"fontSize",Yr.parse(V.font).fontSize);fe.hasValue()&&(le.rootEmSize=fe.getPixels("y"),le.emSize=le.rootEmSize)}this.getAttribute("x").hasValue()||this.getAttribute("x",!0).setValue(0),this.getAttribute("y").hasValue()||this.getAttribute("y",!0).setValue(0);var{width:Se,height:$e}=F.viewPort;this.getStyle("width").hasValue()||this.getStyle("width",!0).setValue("100%"),this.getStyle("height").hasValue()||this.getStyle("height",!0).setValue("100%"),this.getStyle("color").hasValue()||this.getStyle("color",!0).setValue("black");var ct=this.getAttribute("refX"),P=this.getAttribute("refY"),k=this.getAttribute("viewBox"),D=k.hasValue()?I(k.getString()):null,G=!this.root&&this.getStyle("overflow").getValue("hidden")!=="visible",X=0,ee=0,ye=0,he=0;D&&(X=D[0],ee=D[1]),this.root||(Se=this.getStyle("width").getPixels("x"),$e=this.getStyle("height").getPixels("y"),this.type==="marker"&&(ye=X,he=ee,X=0,ee=0)),F.viewPort.setCurrent(Se,$e),this.node&&(!this.parent||((ie=this.node.parentNode)===null||ie===void 0?void 0:ie.nodeName)==="foreignObject")&&this.getStyle("transform",!1,!0).hasValue()&&!this.getStyle("transform-origin",!1,!0).hasValue()&&this.getStyle("transform-origin",!0,!0).setValue("50% 50%"),super.setContext(V),V.translate(this.getAttribute("x").getPixels("x"),this.getAttribute("y").getPixels("y")),D&&(Se=D[2],$e=D[3]),le.setViewBox({ctx:V,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:F.viewPort.width,desiredWidth:Se,height:F.viewPort.height,desiredHeight:$e,minX:X,minY:ee,refX:ct.getValue(),refY:P.getValue(),clip:G,clipX:ye,clipY:he}),D&&(F.viewPort.removeCurrent(),F.viewPort.setCurrent(Se,$e))}clearContext(V){super.clearContext(V),this.document.screen.viewPort.removeCurrent()}resize(V){var ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:V,le=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,F=this.getAttribute("width",!0),z=this.getAttribute("height",!0),te=this.getAttribute("viewBox"),fe=this.getAttribute("style"),Se=F.getNumber(0),$e=z.getNumber(0);if(le)if(typeof le=="string")this.getAttribute("preserveAspectRatio",!0).setValue(le);else{var ct=this.getAttribute("preserveAspectRatio");ct.hasValue()&&ct.setValue(ct.getString().replace(/^\s*(\S.*\S)\s*$/,"$1"))}if(F.setValue(V),z.setValue(ie),te.hasValue()||te.setValue("0 0 ".concat(Se||V," ").concat($e||ie)),fe.hasValue()){var P=this.getStyle("width"),k=this.getStyle("height");P.hasValue()&&P.setValue("".concat(V,"px")),k.hasValue()&&k.setValue("".concat(ie,"px"))}}}class Cs extends rn{constructor(){super(...arguments),this.type="rect"}path(V){var ie=this.getAttribute("x").getPixels("x"),le=this.getAttribute("y").getPixels("y"),F=this.getStyle("width",!1,!0).getPixels("x"),z=this.getStyle("height",!1,!0).getPixels("y"),te=this.getAttribute("rx"),fe=this.getAttribute("ry"),Se=te.getPixels("x"),$e=fe.getPixels("y");if(te.hasValue()&&!fe.hasValue()&&($e=Se),fe.hasValue()&&!te.hasValue()&&(Se=$e),Se=Math.min(Se,F/2),$e=Math.min($e,z/2),V){var ct=4*((Math.sqrt(2)-1)/3);V.beginPath(),z>0&&F>0&&(V.moveTo(ie+Se,le),V.lineTo(ie+F-Se,le),V.bezierCurveTo(ie+F-Se+ct*Se,le,ie+F,le+$e-ct*$e,ie+F,le+$e),V.lineTo(ie+F,le+z-$e),V.bezierCurveTo(ie+F,le+z-$e+ct*$e,ie+F-Se+ct*Se,le+z,ie+F-Se,le+z),V.lineTo(ie+Se,le+z),V.bezierCurveTo(ie+Se-ct*Se,le+z,ie,le+z-$e+ct*$e,ie,le+z-$e),V.lineTo(ie,le+$e),V.bezierCurveTo(ie,le+$e-ct*$e,ie+Se-ct*Se,le,ie+Se,le),V.closePath())}return new Ln(ie,le,ie+F,le+z)}getMarkers(){return null}}class Ds extends rn{constructor(){super(...arguments),this.type="circle"}path(V){var ie=this.getAttribute("cx").getPixels("x"),le=this.getAttribute("cy").getPixels("y"),F=this.getAttribute("r").getPixels();return V&&F>0&&(V.beginPath(),V.arc(ie,le,F,0,Math.PI*2,!1),V.closePath()),new Ln(ie-F,le-F,ie+F,le+F)}getMarkers(){return null}}class js extends rn{constructor(){super(...arguments),this.type="ellipse"}path(V){var ie=4*((Math.sqrt(2)-1)/3),le=this.getAttribute("rx").getPixels("x"),F=this.getAttribute("ry").getPixels("y"),z=this.getAttribute("cx").getPixels("x"),te=this.getAttribute("cy").getPixels("y");return V&&le>0&&F>0&&(V.beginPath(),V.moveTo(z+le,te),V.bezierCurveTo(z+le,te+ie*F,z+ie*le,te+F,z,te+F),V.bezierCurveTo(z-ie*le,te+F,z-le,te+ie*F,z-le,te),V.bezierCurveTo(z-le,te-ie*F,z-ie*le,te-F,z,te-F),V.bezierCurveTo(z+ie*le,te-F,z+le,te-ie*F,z+le,te),V.closePath()),new Ln(z-le,te-F,z+le,te+F)}getMarkers(){return null}}class ei extends rn{constructor(){super(...arguments),this.type="line"}getPoints(){return[new Dt(this.getAttribute("x1").getPixels("x"),this.getAttribute("y1").getPixels("y")),new Dt(this.getAttribute("x2").getPixels("x"),this.getAttribute("y2").getPixels("y"))]}path(V){var[{x:ie,y:le},{x:F,y:z}]=this.getPoints();return V&&(V.beginPath(),V.moveTo(ie,le),V.lineTo(F,z)),new Ln(ie,le,F,z)}getMarkers(){var[V,ie]=this.getPoints(),le=V.angleTo(ie);return[[V,le],[ie,le]]}}class sn extends rn{constructor(V,ie,le){super(V,ie,le),this.type="polyline",this.points=[],this.points=Dt.parsePath(this.getAttribute("points").getString())}path(V){var{points:ie}=this,[{x:le,y:F}]=ie,z=new Ln(le,F);return V&&(V.beginPath(),V.moveTo(le,F)),ie.forEach(te=>{var{x:fe,y:Se}=te;z.addPoint(fe,Se),V&&V.lineTo(fe,Se)}),z}getMarkers(){var{points:V}=this,ie=V.length-1,le=[];return V.forEach((F,z)=>{z!==ie&&le.push([F,F.angleTo(V[z+1])])}),le.length>0&&le.push([V[V.length-1],le[le.length-1][1]]),le}}class ss extends sn{constructor(){super(...arguments),this.type="polygon"}path(V){var ie=super.path(V),[{x:le,y:F}]=this.points;return V&&(V.lineTo(le,F),V.closePath()),ie}}class ta extends Yt{constructor(){super(...arguments),this.type="pattern"}createPattern(V,ie,le){var F=this.getStyle("width").getPixels("x",!0),z=this.getStyle("height").getPixels("y",!0),te=new li(this.document,null);te.attributes.viewBox=new Ge(this.document,"viewBox",this.getAttribute("viewBox").getValue()),te.attributes.width=new Ge(this.document,"width","".concat(F,"px")),te.attributes.height=new Ge(this.document,"height","".concat(z,"px")),te.attributes.transform=new Ge(this.document,"transform",this.getAttribute("patternTransform").getValue()),te.children=this.children;var fe=this.document.createCanvas(F,z),Se=fe.getContext("2d"),$e=this.getAttribute("x"),ct=this.getAttribute("y");$e.hasValue()&&ct.hasValue()&&Se.translate($e.getPixels("x",!0),ct.getPixels("y",!0)),le.hasValue()?this.styles["fill-opacity"]=le:Reflect.deleteProperty(this.styles,"fill-opacity");for(var P=-1;P<=1;P++)for(var k=-1;k<=1;k++)Se.save(),te.attributes.x=new Ge(this.document,"x",P*fe.width),te.attributes.y=new Ge(this.document,"y",k*fe.height),te.render(Se),Se.restore();var D=V.createPattern(fe,"repeat");return D}}class _n extends Yt{constructor(){super(...arguments),this.type="marker"}render(V,ie,le){if(ie){var{x:F,y:z}=ie,te=this.getAttribute("orient").getString("auto"),fe=this.getAttribute("markerUnits").getString("strokeWidth");V.translate(F,z),te==="auto"&&V.rotate(le),fe==="strokeWidth"&&V.scale(V.lineWidth,V.lineWidth),V.save();var Se=new li(this.document,null);Se.type=this.type,Se.attributes.viewBox=new Ge(this.document,"viewBox",this.getAttribute("viewBox").getValue()),Se.attributes.refX=new Ge(this.document,"refX",this.getAttribute("refX").getValue()),Se.attributes.refY=new Ge(this.document,"refY",this.getAttribute("refY").getValue()),Se.attributes.width=new Ge(this.document,"width",this.getAttribute("markerWidth").getValue()),Se.attributes.height=new Ge(this.document,"height",this.getAttribute("markerHeight").getValue()),Se.attributes.overflow=new Ge(this.document,"overflow",this.getAttribute("overflow").getValue()),Se.attributes.fill=new Ge(this.document,"fill",this.getAttribute("fill").getColor("black")),Se.attributes.stroke=new Ge(this.document,"stroke",this.getAttribute("stroke").getValue("none")),Se.children=this.children,Se.render(V),V.restore(),fe==="strokeWidth"&&V.scale(1/V.lineWidth,1/V.lineWidth),te==="auto"&&V.rotate(-le),V.translate(-F,-z)}}}class Cn extends Yt{constructor(){super(...arguments),this.type="defs"}render(){}}class Ms extends Jn{constructor(){super(...arguments),this.type="g"}getBoundingBox(V){var ie=new Ln;return this.children.forEach(le=>{ie.addBoundingBox(le.getBoundingBox(V))}),ie}}class Qs extends Yt{constructor(V,ie,le){super(V,ie,le),this.attributesToInherit=["gradientUnits"],this.stops=[];var{stops:F,children:z}=this;z.forEach(te=>{te.type==="stop"&&F.push(te)})}getGradientUnits(){return this.getAttribute("gradientUnits").getString("objectBoundingBox")}createGradient(V,ie,le){var F=this;this.getHrefAttribute().hasValue()&&(F=this.getHrefAttribute().getDefinition(),this.inheritStopContainer(F));var{stops:z}=F,te=this.getGradient(V,ie);if(!te)return this.addParentOpacity(le,z[z.length-1].color);if(z.forEach(ee=>{te.addColorStop(ee.offset,this.addParentOpacity(le,ee.color))}),this.getAttribute("gradientTransform").hasValue()){var{document:fe}=this,{MAX_VIRTUAL_PIXELS:Se,viewPort:$e}=fe.screen,[ct]=$e.viewPorts,P=new Cs(fe,null);P.attributes.x=new Ge(fe,"x",-Se/3),P.attributes.y=new Ge(fe,"y",-Se/3),P.attributes.width=new Ge(fe,"width",Se),P.attributes.height=new Ge(fe,"height",Se);var k=new Ms(fe,null);k.attributes.transform=new Ge(fe,"transform",this.getAttribute("gradientTransform").getValue()),k.children=[P];var D=new li(fe,null);D.attributes.x=new Ge(fe,"x",0),D.attributes.y=new Ge(fe,"y",0),D.attributes.width=new Ge(fe,"width",ct.width),D.attributes.height=new Ge(fe,"height",ct.height),D.children=[k];var G=fe.createCanvas(ct.width,ct.height),X=G.getContext("2d");return X.fillStyle=te,D.render(X),X.createPattern(G,"no-repeat")}return te}inheritStopContainer(V){this.attributesToInherit.forEach(ie=>{!this.getAttribute(ie).hasValue()&&V.getAttribute(ie).hasValue()&&this.getAttribute(ie,!0).setValue(V.getAttribute(ie).getValue())})}addParentOpacity(V,ie){if(V.hasValue()){var le=new Ge(this.document,"color",ie);return le.addOpacity(V).getColor()}return ie}}class Fs extends Qs{constructor(V,ie,le){super(V,ie,le),this.type="linearGradient",this.attributesToInherit.push("x1","y1","x2","y2")}getGradient(V,ie){var le=this.getGradientUnits()==="objectBoundingBox",F=le?ie.getBoundingBox(V):null;if(le&&!F)return null;!this.getAttribute("x1").hasValue()&&!this.getAttribute("y1").hasValue()&&!this.getAttribute("x2").hasValue()&&!this.getAttribute("y2").hasValue()&&(this.getAttribute("x1",!0).setValue(0),this.getAttribute("y1",!0).setValue(0),this.getAttribute("x2",!0).setValue(1),this.getAttribute("y2",!0).setValue(0));var z=le?F.x+F.width*this.getAttribute("x1").getNumber():this.getAttribute("x1").getPixels("x"),te=le?F.y+F.height*this.getAttribute("y1").getNumber():this.getAttribute("y1").getPixels("y"),fe=le?F.x+F.width*this.getAttribute("x2").getNumber():this.getAttribute("x2").getPixels("x"),Se=le?F.y+F.height*this.getAttribute("y2").getNumber():this.getAttribute("y2").getPixels("y");return z===fe&&te===Se?null:V.createLinearGradient(z,te,fe,Se)}}class rs extends Qs{constructor(V,ie,le){super(V,ie,le),this.type="radialGradient",this.attributesToInherit.push("cx","cy","r","fx","fy","fr")}getGradient(V,ie){var le=this.getGradientUnits()==="objectBoundingBox",F=ie.getBoundingBox(V);if(le&&!F)return null;this.getAttribute("cx").hasValue()||this.getAttribute("cx",!0).setValue("50%"),this.getAttribute("cy").hasValue()||this.getAttribute("cy",!0).setValue("50%"),this.getAttribute("r").hasValue()||this.getAttribute("r",!0).setValue("50%");var z=le?F.x+F.width*this.getAttribute("cx").getNumber():this.getAttribute("cx").getPixels("x"),te=le?F.y+F.height*this.getAttribute("cy").getNumber():this.getAttribute("cy").getPixels("y"),fe=z,Se=te;this.getAttribute("fx").hasValue()&&(fe=le?F.x+F.width*this.getAttribute("fx").getNumber():this.getAttribute("fx").getPixels("x")),this.getAttribute("fy").hasValue()&&(Se=le?F.y+F.height*this.getAttribute("fy").getNumber():this.getAttribute("fy").getPixels("y"));var $e=le?(F.width+F.height)/2*this.getAttribute("r").getNumber():this.getAttribute("r").getPixels(),ct=this.getAttribute("fr").getPixels();return V.createRadialGradient(fe,Se,ct,z,te,$e)}}class qs extends Yt{constructor(V,ie,le){super(V,ie,le),this.type="stop";var F=Math.max(0,Math.min(1,this.getAttribute("offset").getNumber())),z=this.getStyle("stop-opacity"),te=this.getStyle("stop-color",!0);te.getString()===""&&te.setValue("#000"),z.hasValue()&&(te=te.addOpacity(z)),this.offset=F,this.color=te.getColor()}}class Os extends Yt{constructor(V,ie,le){super(V,ie,le),this.type="animate",this.duration=0,this.initialValue=null,this.initialUnits="",this.removed=!1,this.frozen=!1,V.screen.animations.push(this),this.begin=this.getAttribute("begin").getMilliseconds(),this.maxDuration=this.begin+this.getAttribute("dur").getMilliseconds(),this.from=this.getAttribute("from"),this.to=this.getAttribute("to"),this.values=new Ge(V,"values",null);var F=this.getAttribute("values");F.hasValue()&&this.values.setValue(F.getString().split(";"))}getProperty(){var V=this.getAttribute("attributeType").getString(),ie=this.getAttribute("attributeName").getString();return V==="CSS"?this.parent.getStyle(ie,!0):this.parent.getAttribute(ie,!0)}calcValue(){var{initialUnits:V}=this,{progress:ie,from:le,to:F}=this.getProgress(),z=le.getNumber()+(F.getNumber()-le.getNumber())*ie;return V==="%"&&(z*=100),"".concat(z).concat(V)}update(V){var{parent:ie}=this,le=this.getProperty();if(this.initialValue||(this.initialValue=le.getString(),this.initialUnits=le.getUnits()),this.duration>this.maxDuration){var F=this.getAttribute("fill").getString("remove");if(this.getAttribute("repeatCount").getString()==="indefinite"||this.getAttribute("repeatDur").getString()==="indefinite")this.duration=0;else if(F==="freeze"&&!this.frozen)this.frozen=!0,ie.animationFrozen=!0,ie.animationFrozenValue=le.getString();else if(F==="remove"&&!this.removed)return this.removed=!0,le.setValue(ie.animationFrozen?ie.animationFrozenValue:this.initialValue),!0;return!1}this.duration+=V;var z=!1;if(this.begin<this.duration){var te=this.calcValue(),fe=this.getAttribute("type");if(fe.hasValue()){var Se=fe.getString();te="".concat(Se,"(").concat(te,")")}le.setValue(te),z=!0}return z}getProgress(){var{document:V,values:ie}=this,le={progress:(this.duration-this.begin)/(this.maxDuration-this.begin)};if(ie.hasValue()){var F=le.progress*(ie.getValue().length-1),z=Math.floor(F),te=Math.ceil(F);le.from=new Ge(V,"from",parseFloat(ie.getValue()[z])),le.to=new Ge(V,"to",parseFloat(ie.getValue()[te])),le.progress=(F-z)/(te-z)}else le.from=this.from,le.to=this.to;return le}}class Qa extends Os{constructor(){super(...arguments),this.type="animateColor"}calcValue(){var{progress:V,from:ie,to:le}=this.getProgress(),F=new p(ie.getColor()),z=new p(le.getColor());if(F.ok&&z.ok){var te=F.r+(z.r-F.r)*V,fe=F.g+(z.g-F.g)*V,Se=F.b+(z.b-F.b)*V;return"rgb(".concat(Math.floor(te),", ").concat(Math.floor(fe),", ").concat(Math.floor(Se),")")}return this.getAttribute("from").getColor()}}class ds extends Os{constructor(){super(...arguments),this.type="animateTransform"}calcValue(){var{progress:V,from:ie,to:le}=this.getProgress(),F=I(ie.getString()),z=I(le.getString()),te=F.map((fe,Se)=>{var $e=z[Se];return fe+($e-fe)*V}).join(" ");return te}}class bu extends Yt{constructor(V,ie,le){super(V,ie,le),this.type="font",this.glyphs=Object.create(null),this.horizAdvX=this.getAttribute("horiz-adv-x").getNumber();var{definitions:F}=V,{children:z}=this;for(var te of z)switch(te.type){case"font-face":{this.fontFace=te;var fe=te.getStyle("font-family");fe.hasValue()&&(F[fe.getString()]=this);break}case"missing-glyph":this.missingGlyph=te;break;case"glyph":{var Se=te;Se.arabicForm?(this.isRTL=!0,this.isArabic=!0,typeof this.glyphs[Se.unicode]>"u"&&(this.glyphs[Se.unicode]=Object.create(null)),this.glyphs[Se.unicode][Se.arabicForm]=Se):this.glyphs[Se.unicode]=Se;break}}}render(){}}class to extends Yt{constructor(V,ie,le){super(V,ie,le),this.type="font-face",this.ascent=this.getAttribute("ascent").getNumber(),this.descent=this.getAttribute("descent").getNumber(),this.unitsPerEm=this.getAttribute("units-per-em").getNumber()}}class Ml extends rn{constructor(){super(...arguments),this.type="missing-glyph",this.horizAdvX=0}}class nu extends An{constructor(){super(...arguments),this.type="tref"}getText(){var V=this.getHrefAttribute().getDefinition();if(V){var ie=V.children[0];if(ie)return ie.getText()}return""}}class ml extends An{constructor(V,ie,le){super(V,ie,le),this.type="a";var{childNodes:F}=ie,z=F[0],te=F.length>0&&Array.from(F).every(fe=>fe.nodeType===3);this.hasText=te,this.text=te?this.getTextFromNode(z):""}getText(){return this.text}renderChildren(V){if(this.hasText){super.renderChildren(V);var{document:ie,x:le,y:F}=this,{mouse:z}=ie.screen,te=new Ge(ie,"fontSize",Yr.parse(ie.ctx.font).fontSize);z.isWorking()&&z.checkBoundingBox(this,new Ln(le,F-te.getPixels("y"),le+this.measureText(V),F))}else if(this.children.length>0){var fe=new Ms(this.document,null);fe.children=this.children,fe.parent=this,fe.render(V)}}onClick(){var{window:V}=this.document;V&&V.open(this.getHrefAttribute().getString())}onMouseMove(){var V=this.document.ctx;V.canvas.style.cursor="pointer"}}function ra(Ht,V){var ie=Object.keys(Ht);if(Object.getOwnPropertySymbols){var le=Object.getOwnPropertySymbols(Ht);V&&(le=le.filter(function(F){return Object.getOwnPropertyDescriptor(Ht,F).enumerable})),ie.push.apply(ie,le)}return ie}function Ya(Ht){for(var V=1;V<arguments.length;V++){var ie=arguments[V]!=null?arguments[V]:{};V%2?ra(Object(ie),!0).forEach(function(le){(0,f.default)(Ht,le,ie[le])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ht,Object.getOwnPropertyDescriptors(ie)):ra(Object(ie)).forEach(function(le){Object.defineProperty(Ht,le,Object.getOwnPropertyDescriptor(ie,le))})}return Ht}class Ws extends An{constructor(V,ie,le){super(V,ie,le),this.type="textPath",this.textWidth=0,this.textHeight=0,this.pathLength=-1,this.glyphInfo=null,this.letterSpacingCache=[],this.measuresCache=new Map([["",0]]);var F=this.getHrefAttribute().getDefinition();this.text=this.getTextFromNode(),this.dataArray=this.parsePathData(F)}getText(){return this.text}path(V){var{dataArray:ie}=this;V&&V.beginPath(),ie.forEach(le=>{var{type:F,points:z}=le;switch(F){case ln.LINE_TO:V&&V.lineTo(z[0],z[1]);break;case ln.MOVE_TO:V&&V.moveTo(z[0],z[1]);break;case ln.CURVE_TO:V&&V.bezierCurveTo(z[0],z[1],z[2],z[3],z[4],z[5]);break;case ln.QUAD_TO:V&&V.quadraticCurveTo(z[0],z[1],z[2],z[3]);break;case ln.ARC:{var[te,fe,Se,$e,ct,P,k,D]=z,G=Se>$e?Se:$e,X=Se>$e?1:Se/$e,ee=Se>$e?$e/Se:1;V&&(V.translate(te,fe),V.rotate(k),V.scale(X,ee),V.arc(0,0,G,ct,ct+P,!!(1-D)),V.scale(1/X,1/ee),V.rotate(-k),V.translate(-te,-fe));break}case ln.CLOSE_PATH:V&&V.closePath();break}})}renderChildren(V){this.setTextData(V),V.save();var ie=this.parent.getStyle("text-decoration").getString(),le=this.getFontSize(),{glyphInfo:F}=this,z=V.fillStyle;ie==="underline"&&V.beginPath(),F.forEach((te,fe)=>{var{p0:Se,p1:$e,rotation:ct,text:P}=te;V.save(),V.translate(Se.x,Se.y),V.rotate(ct),V.fillStyle&&V.fillText(P,0,0),V.strokeStyle&&V.strokeText(P,0,0),V.restore(),ie==="underline"&&(fe===0&&V.moveTo(Se.x,Se.y+le/8),V.lineTo($e.x,$e.y+le/5))}),ie==="underline"&&(V.lineWidth=le/20,V.strokeStyle=z,V.stroke(),V.closePath()),V.restore()}getLetterSpacingAt(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.letterSpacingCache[V]||0}findSegmentToFitChar(V,ie,le,F,z,te,fe,Se,$e){var ct=te,P=this.measureText(V,Se);Se===" "&&ie==="justify"&&le<F&&(P+=(F-le)/z),$e>-1&&(ct+=this.getLetterSpacingAt($e));var k=this.textHeight/20,D=this.getEquidistantPointOnPath(ct,k,0),G=this.getEquidistantPointOnPath(ct+P,k,0),X={p0:D,p1:G},ee=D&&G?Math.atan2(G.y-D.y,G.x-D.x):0;if(fe){var ye=Math.cos(Math.PI/2+ee)*fe,he=Math.cos(-ee)*fe;X.p0=Ya(Ya({},D),{},{x:D.x+ye,y:D.y+he}),X.p1=Ya(Ya({},G),{},{x:G.x+ye,y:G.y+he})}return ct+=P,{offset:ct,segment:X,rotation:ee}}measureText(V,ie){var{measuresCache:le}=this,F=ie||this.getText();if(le.has(F))return le.get(F);var z=this.measureTargetText(V,F);return le.set(F,z),z}setTextData(V){if(!this.glyphInfo){var ie=this.getText(),le=ie.split(""),F=ie.split(" ").length-1,z=this.parent.getAttribute("dx").split().map(Ie=>Ie.getPixels("x")),te=this.parent.getAttribute("dy").getPixels("y"),fe=this.parent.getStyle("text-anchor").getString("start"),Se=this.getStyle("letter-spacing"),$e=this.parent.getStyle("letter-spacing"),ct=0;!Se.hasValue()||Se.getValue()==="inherit"?ct=$e.getPixels():Se.hasValue()&&Se.getValue()!=="initial"&&Se.getValue()!=="unset"&&(ct=Se.getPixels());var P=[],k=ie.length;this.letterSpacingCache=P;for(var D=0;D<k;D++)P.push(typeof z[D]<"u"?z[D]:ct);var G=P.reduce((Ie,Qe,qe)=>qe===0?0:Ie+Qe||0,0),X=this.measureText(V),ee=Math.max(X+G,0);this.textWidth=X,this.textHeight=this.getFontSize(),this.glyphInfo=[];var ye=this.getPathLength(),he=this.getStyle("startOffset").getNumber(0)*ye,me=0;(fe==="middle"||fe==="center")&&(me=-ee/2),(fe==="end"||fe==="right")&&(me=-ee),me+=he,le.forEach((Ie,Qe)=>{var{offset:qe,segment:lt,rotation:Te}=this.findSegmentToFitChar(V,fe,ee,ye,F,me,te,Ie,Qe);me=qe,!(!lt.p0||!lt.p1)&&this.glyphInfo.push({text:le[Qe],p0:lt.p0,p1:lt.p1,rotation:Te})})}}parsePathData(V){if(this.pathLength=-1,!V)return[];var ie=[],{pathParser:le}=V;for(le.reset();!le.isEnd();){var{current:F}=le,z=F?F.x:0,te=F?F.y:0,fe=le.next(),Se=fe.type,$e=[];switch(fe.type){case ln.MOVE_TO:this.pathM(le,$e);break;case ln.LINE_TO:Se=this.pathL(le,$e);break;case ln.HORIZ_LINE_TO:Se=this.pathH(le,$e);break;case ln.VERT_LINE_TO:Se=this.pathV(le,$e);break;case ln.CURVE_TO:this.pathC(le,$e);break;case ln.SMOOTH_CURVE_TO:Se=this.pathS(le,$e);break;case ln.QUAD_TO:this.pathQ(le,$e);break;case ln.SMOOTH_QUAD_TO:Se=this.pathT(le,$e);break;case ln.ARC:$e=this.pathA(le);break;case ln.CLOSE_PATH:rn.pathZ(le);break}fe.type!==ln.CLOSE_PATH?ie.push({type:Se,points:$e,start:{x:z,y:te},pathLength:this.calcLength(z,te,Se,$e)}):ie.push({type:ln.CLOSE_PATH,points:[],pathLength:0})}return ie}pathM(V,ie){var{x:le,y:F}=rn.pathM(V).point;ie.push(le,F)}pathL(V,ie){var{x:le,y:F}=rn.pathL(V).point;return ie.push(le,F),ln.LINE_TO}pathH(V,ie){var{x:le,y:F}=rn.pathH(V).point;return ie.push(le,F),ln.LINE_TO}pathV(V,ie){var{x:le,y:F}=rn.pathV(V).point;return ie.push(le,F),ln.LINE_TO}pathC(V,ie){var{point:le,controlPoint:F,currentPoint:z}=rn.pathC(V);ie.push(le.x,le.y,F.x,F.y,z.x,z.y)}pathS(V,ie){var{point:le,controlPoint:F,currentPoint:z}=rn.pathS(V);return ie.push(le.x,le.y,F.x,F.y,z.x,z.y),ln.CURVE_TO}pathQ(V,ie){var{controlPoint:le,currentPoint:F}=rn.pathQ(V);ie.push(le.x,le.y,F.x,F.y)}pathT(V,ie){var{controlPoint:le,currentPoint:F}=rn.pathT(V);return ie.push(le.x,le.y,F.x,F.y),ln.QUAD_TO}pathA(V){var{rX:ie,rY:le,sweepFlag:F,xAxisRotation:z,centp:te,a1:fe,ad:Se}=rn.pathA(V);return F===0&&Se>0&&(Se-=2*Math.PI),F===1&&Se<0&&(Se+=2*Math.PI),[te.x,te.y,ie,le,fe,Se,z,F]}calcLength(V,ie,le,F){var z=0,te=null,fe=null,Se=0;switch(le){case ln.LINE_TO:return this.getLineLength(V,ie,F[0],F[1]);case ln.CURVE_TO:for(z=0,te=this.getPointOnCubicBezier(0,V,ie,F[0],F[1],F[2],F[3],F[4],F[5]),Se=.01;Se<=1;Se+=.01)fe=this.getPointOnCubicBezier(Se,V,ie,F[0],F[1],F[2],F[3],F[4],F[5]),z+=this.getLineLength(te.x,te.y,fe.x,fe.y),te=fe;return z;case ln.QUAD_TO:for(z=0,te=this.getPointOnQuadraticBezier(0,V,ie,F[0],F[1],F[2],F[3]),Se=.01;Se<=1;Se+=.01)fe=this.getPointOnQuadraticBezier(Se,V,ie,F[0],F[1],F[2],F[3]),z+=this.getLineLength(te.x,te.y,fe.x,fe.y),te=fe;return z;case ln.ARC:{z=0;var $e=F[4],ct=F[5],P=F[4]+ct,k=Math.PI/180;if(Math.abs($e-P)<k&&(k=Math.abs($e-P)),te=this.getPointOnEllipticalArc(F[0],F[1],F[2],F[3],$e,0),ct<0)for(Se=$e-k;Se>P;Se-=k)fe=this.getPointOnEllipticalArc(F[0],F[1],F[2],F[3],Se,0),z+=this.getLineLength(te.x,te.y,fe.x,fe.y),te=fe;else for(Se=$e+k;Se<P;Se+=k)fe=this.getPointOnEllipticalArc(F[0],F[1],F[2],F[3],Se,0),z+=this.getLineLength(te.x,te.y,fe.x,fe.y),te=fe;return fe=this.getPointOnEllipticalArc(F[0],F[1],F[2],F[3],P,0),z+=this.getLineLength(te.x,te.y,fe.x,fe.y),z}}return 0}getPointOnLine(V,ie,le,F,z){var te=arguments.length>5&&arguments[5]!==void 0?arguments[5]:ie,fe=arguments.length>6&&arguments[6]!==void 0?arguments[6]:le,Se=(z-le)/(F-ie+Oe),$e=Math.sqrt(V*V/(1+Se*Se));F<ie&&($e*=-1);var ct=Se*$e,P=null;if(F===ie)P={x:te,y:fe+ct};else if((fe-le)/(te-ie+Oe)===Se)P={x:te+$e,y:fe+ct};else{var k=0,D=0,G=this.getLineLength(ie,le,F,z);if(G<Oe)return null;var X=(te-ie)*(F-ie)+(fe-le)*(z-le);X/=G*G,k=ie+X*(F-ie),D=le+X*(z-le);var ee=this.getLineLength(te,fe,k,D),ye=Math.sqrt(V*V-ee*ee);$e=Math.sqrt(ye*ye/(1+Se*Se)),F<ie&&($e*=-1),ct=Se*$e,P={x:k+$e,y:D+ct}}return P}getPointOnPath(V){var ie=this.getPathLength(),le=0,F=null;if(V<-5e-5||V-5e-5>ie)return null;var{dataArray:z}=this;for(var te of z){if(te&&(te.pathLength<5e-5||le+te.pathLength+5e-5<V)){le+=te.pathLength;continue}var fe=V-le,Se=0;switch(te.type){case ln.LINE_TO:F=this.getPointOnLine(fe,te.start.x,te.start.y,te.points[0],te.points[1],te.start.x,te.start.y);break;case ln.ARC:{var $e=te.points[4],ct=te.points[5],P=te.points[4]+ct;if(Se=$e+fe/te.pathLength*ct,ct<0&&Se<P||ct>=0&&Se>P)break;F=this.getPointOnEllipticalArc(te.points[0],te.points[1],te.points[2],te.points[3],Se,te.points[6]);break}case ln.CURVE_TO:Se=fe/te.pathLength,Se>1&&(Se=1),F=this.getPointOnCubicBezier(Se,te.start.x,te.start.y,te.points[0],te.points[1],te.points[2],te.points[3],te.points[4],te.points[5]);break;case ln.QUAD_TO:Se=fe/te.pathLength,Se>1&&(Se=1),F=this.getPointOnQuadraticBezier(Se,te.start.x,te.start.y,te.points[0],te.points[1],te.points[2],te.points[3]);break}if(F)return F;break}return null}getLineLength(V,ie,le,F){return Math.sqrt((le-V)*(le-V)+(F-ie)*(F-ie))}getPathLength(){return this.pathLength===-1&&(this.pathLength=this.dataArray.reduce((V,ie)=>ie.pathLength>0?V+ie.pathLength:V,0)),this.pathLength}getPointOnCubicBezier(V,ie,le,F,z,te,fe,Se,$e){var ct=Se*je(V)+te*Me(V)+F*Re(V)+ie*it(V),P=$e*je(V)+fe*Me(V)+z*Re(V)+le*it(V);return{x:ct,y:P}}getPointOnQuadraticBezier(V,ie,le,F,z,te,fe){var Se=te*ht(V)+F*Be(V)+ie*nt(V),$e=fe*ht(V)+z*Be(V)+le*nt(V);return{x:Se,y:$e}}getPointOnEllipticalArc(V,ie,le,F,z,te){var fe=Math.cos(te),Se=Math.sin(te),$e={x:le*Math.cos(z),y:F*Math.sin(z)};return{x:V+($e.x*fe-$e.y*Se),y:ie+($e.x*Se+$e.y*fe)}}buildEquidistantCache(V,ie){var le=this.getPathLength(),F=ie||.25,z=V||le/100;if(!this.equidistantCache||this.equidistantCache.step!==z||this.equidistantCache.precision!==F){this.equidistantCache={step:z,precision:F,points:[]};for(var te=0,fe=0;fe<=le;fe+=F){var Se=this.getPointOnPath(fe),$e=this.getPointOnPath(fe+F);!Se||!$e||(te+=this.getLineLength(Se.x,Se.y,$e.x,$e.y),te>=z&&(this.equidistantCache.points.push({x:Se.x,y:Se.y,distance:fe}),te-=z))}}}getEquidistantPointOnPath(V,ie,le){if(this.buildEquidistantCache(ie,le),V<0||V-this.getPathLength()>5e-5)return null;var F=Math.round(V/this.getPathLength()*(this.equidistantCache.points.length-1));return this.equidistantCache.points[F]||null}}var ba=/^\s*data:(([^/,;]+\/[^/,;]+)(?:;([^,;=]+=[^,;=]+))?)?(?:;(base64))?,(.*)$/i;class Us extends Jn{constructor(V,ie,le){super(V,ie,le),this.type="image",this.loaded=!1;var F=this.getHrefAttribute().getString();if(F){var z=F.endsWith(".svg")||/^\s*data:image\/svg\+xml/i.test(F);V.images.push(this),z?this.loadSvg(F):this.loadImage(F),this.isSvg=z}}loadImage(V){var ie=this;return(0,d.default)(function*(){try{var le=yield ie.document.createImage(V);ie.image=le}catch(F){console.error('Error while loading image "'.concat(V,'":'),F)}ie.loaded=!0})()}loadSvg(V){var ie=this;return(0,d.default)(function*(){var le=ba.exec(V);if(le){var F=le[5];le[4]==="base64"?ie.image=atob(F):ie.image=decodeURIComponent(F)}else try{var z=yield ie.document.fetch(V),te=yield z.text();ie.image=te}catch(fe){console.error('Error while loading image "'.concat(V,'":'),fe)}ie.loaded=!0})()}renderChildren(V){var{document:ie,image:le,loaded:F}=this,z=this.getAttribute("x").getPixels("x"),te=this.getAttribute("y").getPixels("y"),fe=this.getStyle("width").getPixels("x"),Se=this.getStyle("height").getPixels("y");if(!(!F||!le||!fe||!Se)){if(V.save(),V.translate(z,te),this.isSvg){var $e=ie.canvg.forkString(V,this.image,{ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:0,offsetY:0,scaleWidth:fe,scaleHeight:Se});$e.document.documentElement.parent=this,$e.render()}else{var ct=this.image;ie.setViewBox({ctx:V,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:fe,desiredWidth:ct.width,height:Se,desiredHeight:ct.height}),this.loaded&&(typeof ct.complete>"u"||ct.complete)&&V.drawImage(ct,0,0)}V.restore()}}getBoundingBox(){var V=this.getAttribute("x").getPixels("x"),ie=this.getAttribute("y").getPixels("y"),le=this.getStyle("width").getPixels("x"),F=this.getStyle("height").getPixels("y");return new Ln(V,ie,V+le,ie+F)}}class kl extends Jn{constructor(){super(...arguments),this.type="symbol"}render(V){}}class po{constructor(V){this.document=V,this.loaded=!1,V.fonts.push(this)}load(V,ie){var le=this;return(0,d.default)(function*(){try{var{document:F}=le,z=yield F.canvg.parser.load(ie),te=z.getElementsByTagName("font");Array.from(te).forEach(fe=>{var Se=F.createElement(fe);F.definitions[V]=Se})}catch(fe){console.error('Error while loading font "'.concat(ie,'":'),fe)}le.loaded=!0})()}}class ro extends Yt{constructor(V,ie,le){super(V,ie,le),this.type="style";var F=T(Array.from(ie.childNodes).map(te=>te.textContent).join("").replace(/(\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,"").replace(/@import.*;/g,"")),z=F.split("}");z.forEach(te=>{var fe=te.trim();if(fe){var Se=fe.split("{"),$e=Se[0].split(","),ct=Se[1].split(";");$e.forEach(P=>{var k=P.trim();if(k){var D=V.styles[k]||{};if(ct.forEach(ee=>{var ye=ee.indexOf(":"),he=ee.substr(0,ye).trim(),me=ee.substr(ye+1,ee.length-ye).trim();he&&me&&(D[he]=new Ge(V,he,me))}),V.styles[k]=D,V.stylesSpecificity[k]=De(k),k==="@font-face"){var G=D["font-family"].getString().replace(/"|'/g,""),X=D.src.getString().split(",");X.forEach(ee=>{if(ee.indexOf('format("svg")')>0){var ye=Y(ee);ye&&new po(V).load(G,ye)}})}}})}})}}ro.parseExternalUrl=Y;class pl extends Jn{constructor(){super(...arguments),this.type="use"}setContext(V){super.setContext(V);var ie=this.getAttribute("x"),le=this.getAttribute("y");ie.hasValue()&&V.translate(ie.getPixels("x"),0),le.hasValue()&&V.translate(0,le.getPixels("y"))}path(V){var{element:ie}=this;ie&&ie.path(V)}renderChildren(V){var{document:ie,element:le}=this;if(le){var F=le;if(le.type==="symbol"&&(F=new li(ie,null),F.attributes.viewBox=new Ge(ie,"viewBox",le.getAttribute("viewBox").getString()),F.attributes.preserveAspectRatio=new Ge(ie,"preserveAspectRatio",le.getAttribute("preserveAspectRatio").getString()),F.attributes.overflow=new Ge(ie,"overflow",le.getAttribute("overflow").getString()),F.children=le.children,le.styles.opacity=new Ge(ie,"opacity",this.calculateOpacity())),F.type==="svg"){var z=this.getStyle("width",!1,!0),te=this.getStyle("height",!1,!0);z.hasValue()&&(F.attributes.width=new Ge(ie,"width",z.getString())),te.hasValue()&&(F.attributes.height=new Ge(ie,"height",te.getString()))}var fe=F.parent;F.parent=this,F.render(V),F.parent=fe}}getBoundingBox(V){var{element:ie}=this;return ie?ie.getBoundingBox(V):null}elementTransform(){var{document:V,element:ie}=this;return ot.fromElement(V,ie)}get element(){return this.cachedElement||(this.cachedElement=this.getHrefAttribute().getDefinition()),this.cachedElement}}function Fl(Ht,V,ie,le,F,z){return Ht[ie*le*4+V*4+z]}function mc(Ht,V,ie,le,F,z,te){Ht[ie*le*4+V*4+z]=te}function Vs(Ht,V,ie){var le=Ht[V];return le*ie}function ci(Ht,V,ie,le){return V+Math.cos(Ht)*ie+Math.sin(Ht)*le}class Ns extends Yt{constructor(V,ie,le){super(V,ie,le),this.type="feColorMatrix";var F=I(this.getAttribute("values").getString());switch(this.getAttribute("type").getString("matrix")){case"saturate":{var z=F[0];F=[.213+.787*z,.715-.715*z,.072-.072*z,0,0,.213-.213*z,.715+.285*z,.072-.072*z,0,0,.213-.213*z,.715-.715*z,.072+.928*z,0,0,0,0,0,1,0,0,0,0,0,1];break}case"hueRotate":{var te=F[0]*Math.PI/180;F=[ci(te,.213,.787,-.213),ci(te,.715,-.715,-.715),ci(te,.072,-.072,.928),0,0,ci(te,.213,-.213,.143),ci(te,.715,.285,.14),ci(te,.072,-.072,-.283),0,0,ci(te,.213,-.213,-.787),ci(te,.715,-.715,.715),ci(te,.072,.928,.072),0,0,0,0,0,1,0,0,0,0,0,1];break}case"luminanceToAlpha":F=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2125,.7154,.0721,0,0,0,0,0,0,1];break}this.matrix=F,this.includeOpacity=this.getAttribute("includeOpacity").hasValue()}apply(V,ie,le,F,z){for(var{includeOpacity:te,matrix:fe}=this,Se=V.getImageData(0,0,F,z),$e=0;$e<z;$e++)for(var ct=0;ct<F;ct++){var P=Fl(Se.data,ct,$e,F,z,0),k=Fl(Se.data,ct,$e,F,z,1),D=Fl(Se.data,ct,$e,F,z,2),G=Fl(Se.data,ct,$e,F,z,3),X=Vs(fe,0,P)+Vs(fe,1,k)+Vs(fe,2,D)+Vs(fe,3,G)+Vs(fe,4,1),ee=Vs(fe,5,P)+Vs(fe,6,k)+Vs(fe,7,D)+Vs(fe,8,G)+Vs(fe,9,1),ye=Vs(fe,10,P)+Vs(fe,11,k)+Vs(fe,12,D)+Vs(fe,13,G)+Vs(fe,14,1),he=Vs(fe,15,P)+Vs(fe,16,k)+Vs(fe,17,D)+Vs(fe,18,G)+Vs(fe,19,1);te&&(X=0,ee=0,ye=0,he*=G/255),mc(Se.data,ct,$e,F,z,0,X),mc(Se.data,ct,$e,F,z,1,ee),mc(Se.data,ct,$e,F,z,2,ye),mc(Se.data,ct,$e,F,z,3,he)}V.clearRect(0,0,F,z),V.putImageData(Se,0,0)}}class Ta extends Yt{constructor(){super(...arguments),this.type="mask"}apply(V,ie){var{document:le}=this,F=this.getAttribute("x").getPixels("x"),z=this.getAttribute("y").getPixels("y"),te=this.getStyle("width").getPixels("x"),fe=this.getStyle("height").getPixels("y");if(!te&&!fe){var Se=new Ln;this.children.forEach(G=>{Se.addBoundingBox(G.getBoundingBox(V))}),F=Math.floor(Se.x1),z=Math.floor(Se.y1),te=Math.floor(Se.width),fe=Math.floor(Se.height)}var $e=this.removeStyles(ie,Ta.ignoreStyles),ct=le.createCanvas(F+te,z+fe),P=ct.getContext("2d");le.screen.setDefaults(P),this.renderChildren(P),new Ns(le,{nodeType:1,childNodes:[],attributes:[{nodeName:"type",value:"luminanceToAlpha"},{nodeName:"includeOpacity",value:"true"}]}).apply(P,0,0,F+te,z+fe);var k=le.createCanvas(F+te,z+fe),D=k.getContext("2d");le.screen.setDefaults(D),ie.render(D),D.globalCompositeOperation="destination-in",D.fillStyle=P.createPattern(ct,"no-repeat"),D.fillRect(0,0,F+te,z+fe),V.fillStyle=D.createPattern(k,"no-repeat"),V.fillRect(0,0,F+te,z+fe),this.restoreStyles(ie,$e)}render(V){}}Ta.ignoreStyles=["mask","transform","clip-path"];var Va=()=>{};class Ca extends Yt{constructor(){super(...arguments),this.type="clipPath"}apply(V){var{document:ie}=this,le=Reflect.getPrototypeOf(V),{beginPath:F,closePath:z}=V;le&&(le.beginPath=Va,le.closePath=Va),Reflect.apply(F,V,[]),this.children.forEach(te=>{if(!(typeof te.path>"u")){var fe=typeof te.elementTransform<"u"?te.elementTransform():null;fe||(fe=ot.fromElement(ie,te)),fe&&fe.apply(V),te.path(V),le&&(le.closePath=z),fe&&fe.unapply(V)}}),Reflect.apply(z,V,[]),V.clip(),le&&(le.beginPath=F,le.closePath=z)}render(V){}}class gi extends Yt{constructor(){super(...arguments),this.type="filter"}apply(V,ie){var{document:le,children:F}=this,z=ie.getBoundingBox(V);if(z){var te=0,fe=0;F.forEach(ye=>{var he=ye.extraFilterDistance||0;te=Math.max(te,he),fe=Math.max(fe,he)});var Se=Math.floor(z.width),$e=Math.floor(z.height),ct=Se+2*te,P=$e+2*fe;if(!(ct<1||P<1)){var k=Math.floor(z.x),D=Math.floor(z.y),G=this.removeStyles(ie,gi.ignoreStyles),X=le.createCanvas(ct,P),ee=X.getContext("2d");le.screen.setDefaults(ee),ee.translate(-k+te,-D+fe),ie.render(ee),F.forEach(ye=>{typeof ye.apply=="function"&&ye.apply(ee,0,0,ct,P)}),V.drawImage(X,0,0,ct,P,k-te,D-fe,ct,P),this.restoreStyles(ie,G)}}}render(V){}}gi.ignoreStyles=["filter","transform","clip-path"];class Xn extends Yt{constructor(V,ie,le){super(V,ie,le),this.type="feDropShadow",this.addStylesFromStyleDefinition()}apply(V,ie,le,F,z){}}class hs extends Yt{constructor(){super(...arguments),this.type="feMorphology"}apply(V,ie,le,F,z){}}class wa extends Yt{constructor(){super(...arguments),this.type="feComposite"}apply(V,ie,le,F,z){}}class Qo extends Yt{constructor(V,ie,le){super(V,ie,le),this.type="feGaussianBlur",this.blurRadius=Math.floor(this.getAttribute("stdDeviation").getNumber()),this.extraFilterDistance=this.blurRadius}apply(V,ie,le,F,z){var{document:te,blurRadius:fe}=this,Se=te.window?te.window.document.body:null,$e=V.canvas;$e.id=te.getUniqueId(),Se&&($e.style.display="none",Se.appendChild($e)),(0,y.canvasRGBA)($e,ie,le,F,z,fe),Se&&Se.removeChild($e)}}class Hi extends Yt{constructor(){super(...arguments),this.type="title"}}class Vo extends Yt{constructor(){super(...arguments),this.type="desc"}}var Ea={svg:li,rect:Cs,circle:Ds,ellipse:js,line:ei,polyline:sn,polygon:ss,path:rn,pattern:ta,marker:_n,defs:Cn,linearGradient:Fs,radialGradient:rs,stop:qs,animate:Os,animateColor:Qa,animateTransform:ds,font:bu,"font-face":to,"missing-glyph":Ml,glyph:Ur,text:An,tspan:cn,tref:nu,a:ml,textPath:Ws,image:Us,g:Ms,symbol:kl,style:ro,use:pl,mask:Ta,clipPath:Ca,filter:gi,feDropShadow:Xn,feMorphology:hs,feComposite:wa,feColorMatrix:Ns,feGaussianBlur:Qo,title:Hi,desc:Vo};function Xs(Ht,V){var ie=Object.keys(Ht);if(Object.getOwnPropertySymbols){var le=Object.getOwnPropertySymbols(Ht);V&&(le=le.filter(function(F){return Object.getOwnPropertyDescriptor(Ht,F).enumerable})),ie.push.apply(ie,le)}return ie}function fs(Ht){for(var V=1;V<arguments.length;V++){var ie=arguments[V]!=null?arguments[V]:{};V%2?Xs(Object(ie),!0).forEach(function(le){(0,f.default)(Ht,le,ie[le])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ht,Object.getOwnPropertyDescriptors(ie)):Xs(Object(ie)).forEach(function(le){Object.defineProperty(Ht,le,Object.getOwnPropertyDescriptor(ie,le))})}return Ht}function To(Ht,V){var ie=document.createElement("canvas");return ie.width=Ht,ie.height=V,ie}function za(Ht){return zs.apply(this,arguments)}function zs(){return zs=(0,d.default)(function*(Ht){var V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,ie=document.createElement("img");return V&&(ie.crossOrigin="Anonymous"),new Promise((le,F)=>{ie.onload=()=>{le(ie)},ie.onerror=(z,te,fe,Se,$e)=>{F($e)},ie.src=Ht})}),zs.apply(this,arguments)}class qa{constructor(V){var{rootEmSize:ie=12,emSize:le=12,createCanvas:F=qa.createCanvas,createImage:z=qa.createImage,anonymousCrossOrigin:te}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.canvg=V,this.definitions=Object.create(null),this.styles=Object.create(null),this.stylesSpecificity=Object.create(null),this.images=[],this.fonts=[],this.emSizeStack=[],this.uniqueId=0,this.screen=V.screen,this.rootEmSize=ie,this.emSize=le,this.createCanvas=F,this.createImage=this.bindCreateImage(z,te),this.screen.wait(this.isImagesLoaded.bind(this)),this.screen.wait(this.isFontsLoaded.bind(this))}bindCreateImage(V,ie){return typeof ie=="boolean"?(le,F)=>V(le,typeof F=="boolean"?F:ie):V}get window(){return this.screen.window}get fetch(){return this.screen.fetch}get ctx(){return this.screen.ctx}get emSize(){var{emSizeStack:V}=this;return V[V.length-1]}set emSize(V){var{emSizeStack:ie}=this;ie.push(V)}popEmSize(){var{emSizeStack:V}=this;V.pop()}getUniqueId(){return"canvg".concat(++this.uniqueId)}isImagesLoaded(){return this.images.every(V=>V.loaded)}isFontsLoaded(){return this.fonts.every(V=>V.loaded)}createDocumentElement(V){var ie=this.createElement(V.documentElement);return ie.root=!0,ie.addStylesFromStyleDefinition(),this.documentElement=ie,ie}createElement(V){var ie=V.nodeName.replace(/^[^:]+:/,""),le=qa.elementTypes[ie];return typeof le<"u"?new le(this,V):new kr(this,V)}createTextNode(V){return new On(this,V)}setViewBox(V){this.screen.setViewBox(fs({document:this},V))}}qa.createCanvas=To,qa.createImage=za,qa.elementTypes=Ea;function go(Ht,V){var ie=Object.keys(Ht);if(Object.getOwnPropertySymbols){var le=Object.getOwnPropertySymbols(Ht);V&&(le=le.filter(function(F){return Object.getOwnPropertyDescriptor(Ht,F).enumerable})),ie.push.apply(ie,le)}return ie}function no(Ht){for(var V=1;V<arguments.length;V++){var ie=arguments[V]!=null?arguments[V]:{};V%2?go(Object(ie),!0).forEach(function(le){(0,f.default)(Ht,le,ie[le])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ht,Object.getOwnPropertyDescriptors(ie)):go(Object(ie)).forEach(function(le){Object.defineProperty(Ht,le,Object.getOwnPropertyDescriptor(ie,le))})}return Ht}class zo{constructor(V,ie){var le=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.parser=new pr(le),this.screen=new wt(V,le),this.options=le;var F=new qa(this,le),z=F.createDocumentElement(ie);this.document=F,this.documentElement=z}static from(V,ie){var le=arguments;return(0,d.default)(function*(){var F=le.length>2&&le[2]!==void 0?le[2]:{},z=new pr(F),te=yield z.parse(ie);return new zo(V,te,F)})()}static fromString(V,ie){var le=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},F=new pr(le),z=F.parseFromString(ie);return new zo(V,z,le)}fork(V,ie){var le=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return zo.from(V,ie,no(no({},this.options),le))}forkString(V,ie){var le=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return zo.fromString(V,ie,no(no({},this.options),le))}ready(){return this.screen.ready()}isReady(){return this.screen.isReady()}render(){var V=arguments,ie=this;return(0,d.default)(function*(){var le=V.length>0&&V[0]!==void 0?V[0]:{};ie.start(no({enableRedraw:!0,ignoreAnimation:!0,ignoreMouse:!0},le)),yield ie.ready(),ie.stop()})()}start(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{documentElement:ie,screen:le,options:F}=this;le.start(ie,no(no({enableRedraw:!0},F),V))}stop(){this.screen.stop()}resize(V){var ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:V,le=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.documentElement.resize(V,ie,le)}}}),"./node_modules/core-js/internals/a-callable.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/is-callable.js"),f=l("./node_modules/core-js/internals/try-to-string.js"),A=TypeError;c.exports=function(p){if(d(p))return p;throw new A(f(p)+" is not a function")}}),"./node_modules/core-js/internals/a-constructor.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/is-constructor.js"),f=l("./node_modules/core-js/internals/try-to-string.js"),A=TypeError;c.exports=function(p){if(d(p))return p;throw new A(f(p)+" is not a constructor")}}),"./node_modules/core-js/internals/a-possible-prototype.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/is-possible-prototype.js"),f=String,A=TypeError;c.exports=function(p){if(d(p))return p;throw new A("Can't set "+f(p)+" as a prototype")}}),"./node_modules/core-js/internals/a-set.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/set-helpers.js").has;c.exports=function(f){return d(f),f}}),"./node_modules/core-js/internals/add-to-unscopables.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/well-known-symbol.js"),f=l("./node_modules/core-js/internals/object-create.js"),A=l("./node_modules/core-js/internals/object-define-property.js").f,p=d("unscopables"),g=Array.prototype;g[p]===void 0&&A(g,p,{configurable:!0,value:f(null)}),c.exports=function(y){g[p][y]=!0}}),"./node_modules/core-js/internals/advance-string-index.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/string-multibyte.js").charAt;c.exports=function(f,A,p){return A+(p?d(f,A).length:1)}}),"./node_modules/core-js/internals/an-instance.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/object-is-prototype-of.js"),f=TypeError;c.exports=function(A,p){if(d(p,A))return A;throw new f("Incorrect invocation")}}),"./node_modules/core-js/internals/an-object.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/is-object.js"),f=String,A=TypeError;c.exports=function(p){if(d(p))return p;throw new A(f(p)+" is not an object")}}),"./node_modules/core-js/internals/array-buffer-non-extensible.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/fails.js");c.exports=d(function(){if(typeof ArrayBuffer=="function"){var f=new ArrayBuffer(8);Object.isExtensible(f)&&Object.defineProperty(f,"a",{value:8})}})}),"./node_modules/core-js/internals/array-for-each.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/array-iteration.js").forEach,f=l("./node_modules/core-js/internals/array-method-is-strict.js"),A=f("forEach");c.exports=A?[].forEach:function(g){return d(this,g,arguments.length>1?arguments[1]:void 0)}}),"./node_modules/core-js/internals/array-from.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-bind-context.js"),f=l("./node_modules/core-js/internals/function-call.js"),A=l("./node_modules/core-js/internals/to-object.js"),p=l("./node_modules/core-js/internals/call-with-safe-iteration-closing.js"),g=l("./node_modules/core-js/internals/is-array-iterator-method.js"),y=l("./node_modules/core-js/internals/is-constructor.js"),x=l("./node_modules/core-js/internals/length-of-array-like.js"),w=l("./node_modules/core-js/internals/create-property.js"),E=l("./node_modules/core-js/internals/get-iterator.js"),T=l("./node_modules/core-js/internals/get-iterator-method.js"),C=Array;c.exports=function(I){var U=A(I),K=y(this),Y=arguments.length,re=Y>1?arguments[1]:void 0,se=re!==void 0;se&&(re=d(re,Y>2?arguments[2]:void 0));var Ae=T(U),we=0,Ce,ve,ne,ce,ae,De;if(Ae&&!(this===C&&g(Ae)))for(ve=K?new this:[],ce=E(U,Ae),ae=ce.next;!(ne=f(ae,ce)).done;we++)De=se?p(ce,re,[ne.value,we],!0):ne.value,w(ve,we,De);else for(Ce=x(U),ve=K?new this(Ce):C(Ce);Ce>we;we++)De=se?re(U[we],we):U[we],w(ve,we,De);return ve.length=we,ve}}),"./node_modules/core-js/internals/array-includes.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/to-indexed-object.js"),f=l("./node_modules/core-js/internals/to-absolute-index.js"),A=l("./node_modules/core-js/internals/length-of-array-like.js"),p=function(g){return function(y,x,w){var E=d(y),T=A(E);if(T===0)return!g&&-1;var C=f(w,T),N;if(g&&x!==x){for(;T>C;)if(N=E[C++],N!==N)return!0}else for(;T>C;C++)if((g||C in E)&&E[C]===x)return g||C||0;return!g&&-1}};c.exports={includes:p(!0),indexOf:p(!1)}}),"./node_modules/core-js/internals/array-iteration.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-bind-context.js"),f=l("./node_modules/core-js/internals/function-uncurry-this.js"),A=l("./node_modules/core-js/internals/indexed-object.js"),p=l("./node_modules/core-js/internals/to-object.js"),g=l("./node_modules/core-js/internals/length-of-array-like.js"),y=l("./node_modules/core-js/internals/array-species-create.js"),x=f([].push),w=function(E){var T=E===1,C=E===2,N=E===3,I=E===4,U=E===6,K=E===7,Y=E===5||U;return function(re,se,Ae,we){for(var Ce=p(re),ve=A(Ce),ne=g(ve),ce=d(se,Ae),ae=0,De=we||y,Oe=T?De(re,ne):C||K?De(re,0):void 0,be,de;ne>ae;ae++)if((Y||ae in ve)&&(be=ve[ae],de=ce(be,ae,Ce),E))if(T)Oe[ae]=de;else if(de)switch(E){case 3:return!0;case 5:return be;case 6:return ae;case 2:x(Oe,be)}else switch(E){case 4:return!1;case 7:x(Oe,be)}return U?-1:N||I?I:Oe}};c.exports={forEach:w(0),map:w(1),filter:w(2),some:w(3),every:w(4),find:w(5),findIndex:w(6),filterReject:w(7)}}),"./node_modules/core-js/internals/array-method-has-species-support.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/fails.js"),f=l("./node_modules/core-js/internals/well-known-symbol.js"),A=l("./node_modules/core-js/internals/environment-v8-version.js"),p=f("species");c.exports=function(g){return A>=51||!d(function(){var y=[],x=y.constructor={};return x[p]=function(){return{foo:1}},y[g](Boolean).foo!==1})}}),"./node_modules/core-js/internals/array-method-is-strict.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/fails.js");c.exports=function(f,A){var p=[][f];return!!p&&d(function(){p.call(null,A||function(){return 1},1)})}}),"./node_modules/core-js/internals/array-reduce.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/a-callable.js"),f=l("./node_modules/core-js/internals/to-object.js"),A=l("./node_modules/core-js/internals/indexed-object.js"),p=l("./node_modules/core-js/internals/length-of-array-like.js"),g=TypeError,y="Reduce of empty array with no initial value",x=function(w){return function(E,T,C,N){var I=f(E),U=A(I),K=p(I);if(d(T),K===0&&C<2)throw new g(y);var Y=w?K-1:0,re=w?-1:1;if(C<2)for(;;){if(Y in U){N=U[Y],Y+=re;break}if(Y+=re,w?Y<0:K<=Y)throw new g(y)}for(;w?Y>=0:K>Y;Y+=re)Y in U&&(N=T(N,U[Y],Y,I));return N}};c.exports={left:x(!1),right:x(!0)}}),"./node_modules/core-js/internals/array-slice.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-uncurry-this.js");c.exports=d([].slice)}),"./node_modules/core-js/internals/array-species-constructor.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/is-array.js"),f=l("./node_modules/core-js/internals/is-constructor.js"),A=l("./node_modules/core-js/internals/is-object.js"),p=l("./node_modules/core-js/internals/well-known-symbol.js"),g=p("species"),y=Array;c.exports=function(x){var w;return d(x)&&(w=x.constructor,f(w)&&(w===y||d(w.prototype))?w=void 0:A(w)&&(w=w[g],w===null&&(w=void 0))),w===void 0?y:w}}),"./node_modules/core-js/internals/array-species-create.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/array-species-constructor.js");c.exports=function(f,A){return new(d(f))(A===0?0:A)}}),"./node_modules/core-js/internals/call-with-safe-iteration-closing.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/an-object.js"),f=l("./node_modules/core-js/internals/iterator-close.js");c.exports=function(A,p,g,y){try{return y?p(d(g)[0],g[1]):p(g)}catch(x){f(A,"throw",x)}}}),"./node_modules/core-js/internals/check-correctness-of-iteration.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/well-known-symbol.js"),f=d("iterator"),A=!1;try{var p=0,g={next:function(){return{done:!!p++}},return:function(){A=!0}};g[f]=function(){return this},Array.from(g,function(){throw 2})}catch{}c.exports=function(y,x){try{if(!x&&!A)return!1}catch{return!1}var w=!1;try{var E={};E[f]=function(){return{next:function(){return{done:w=!0}}}},y(E)}catch{}return w}}),"./node_modules/core-js/internals/classof-raw.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-uncurry-this.js"),f=d({}.toString),A=d("".slice);c.exports=function(p){return A(f(p),8,-1)}}),"./node_modules/core-js/internals/classof.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/to-string-tag-support.js"),f=l("./node_modules/core-js/internals/is-callable.js"),A=l("./node_modules/core-js/internals/classof-raw.js"),p=l("./node_modules/core-js/internals/well-known-symbol.js"),g=p("toStringTag"),y=Object,x=A((function(){return arguments})())==="Arguments",w=function(E,T){try{return E[T]}catch{}};c.exports=d?A:function(E){var T,C,N;return E===void 0?"Undefined":E===null?"Null":typeof(C=w(T=y(E),g))=="string"?C:x?A(T):(N=A(T))==="Object"&&f(T.callee)?"Arguments":N}}),"./node_modules/core-js/internals/collection-strong.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/object-create.js"),f=l("./node_modules/core-js/internals/define-built-in-accessor.js"),A=l("./node_modules/core-js/internals/define-built-ins.js"),p=l("./node_modules/core-js/internals/function-bind-context.js"),g=l("./node_modules/core-js/internals/an-instance.js"),y=l("./node_modules/core-js/internals/is-null-or-undefined.js"),x=l("./node_modules/core-js/internals/iterate.js"),w=l("./node_modules/core-js/internals/iterator-define.js"),E=l("./node_modules/core-js/internals/create-iter-result-object.js"),T=l("./node_modules/core-js/internals/set-species.js"),C=l("./node_modules/core-js/internals/descriptors.js"),N=l("./node_modules/core-js/internals/internal-metadata.js").fastKey,I=l("./node_modules/core-js/internals/internal-state.js"),U=I.set,K=I.getterFor;c.exports={getConstructor:function(Y,re,se,Ae){var we=Y(function(ae,De){g(ae,Ce),U(ae,{type:re,index:d(null),first:null,last:null,size:0}),C||(ae.size=0),y(De)||x(De,ae[Ae],{that:ae,AS_ENTRIES:se})}),Ce=we.prototype,ve=K(re),ne=function(ae,De,Oe){var be=ve(ae),de=ce(ae,De),xe,je;return de?de.value=Oe:(be.last=de={index:je=N(De,!0),key:De,value:Oe,previous:xe=be.last,next:null,removed:!1},be.first||(be.first=de),xe&&(xe.next=de),C?be.size++:ae.size++,je!=="F"&&(be.index[je]=de)),ae},ce=function(ae,De){var Oe=ve(ae),be=N(De),de;if(be!=="F")return Oe.index[be];for(de=Oe.first;de;de=de.next)if(de.key===De)return de};return A(Ce,{clear:function(){for(var De=this,Oe=ve(De),be=Oe.first;be;)be.removed=!0,be.previous&&(be.previous=be.previous.next=null),be=be.next;Oe.first=Oe.last=null,Oe.index=d(null),C?Oe.size=0:De.size=0},delete:function(ae){var De=this,Oe=ve(De),be=ce(De,ae);if(be){var de=be.next,xe=be.previous;delete Oe.index[be.index],be.removed=!0,xe&&(xe.next=de),de&&(de.previous=xe),Oe.first===be&&(Oe.first=de),Oe.last===be&&(Oe.last=xe),C?Oe.size--:De.size--}return!!be},forEach:function(De){for(var Oe=ve(this),be=p(De,arguments.length>1?arguments[1]:void 0),de;de=de?de.next:Oe.first;)for(be(de.value,de.key,this);de&&de.removed;)de=de.previous},has:function(De){return!!ce(this,De)}}),A(Ce,se?{get:function(De){var Oe=ce(this,De);return Oe&&Oe.value},set:function(De,Oe){return ne(this,De===0?0:De,Oe)}}:{add:function(De){return ne(this,De=De===0?0:De,De)}}),C&&f(Ce,"size",{configurable:!0,get:function(){return ve(this).size}}),we},setStrong:function(Y,re,se){var Ae=re+" Iterator",we=K(re),Ce=K(Ae);w(Y,re,function(ve,ne){U(this,{type:Ae,target:ve,state:we(ve),kind:ne,last:null})},function(){for(var ve=Ce(this),ne=ve.kind,ce=ve.last;ce&&ce.removed;)ce=ce.previous;return!ve.target||!(ve.last=ce=ce?ce.next:ve.state.first)?(ve.target=null,E(void 0,!0)):E(ne==="keys"?ce.key:ne==="values"?ce.value:[ce.key,ce.value],!1)},se?"entries":"values",!se,!0),T(re)}}}),"./node_modules/core-js/internals/collection.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/global-this.js"),A=l("./node_modules/core-js/internals/function-uncurry-this.js"),p=l("./node_modules/core-js/internals/is-forced.js"),g=l("./node_modules/core-js/internals/define-built-in.js"),y=l("./node_modules/core-js/internals/internal-metadata.js"),x=l("./node_modules/core-js/internals/iterate.js"),w=l("./node_modules/core-js/internals/an-instance.js"),E=l("./node_modules/core-js/internals/is-callable.js"),T=l("./node_modules/core-js/internals/is-null-or-undefined.js"),C=l("./node_modules/core-js/internals/is-object.js"),N=l("./node_modules/core-js/internals/fails.js"),I=l("./node_modules/core-js/internals/check-correctness-of-iteration.js"),U=l("./node_modules/core-js/internals/set-to-string-tag.js"),K=l("./node_modules/core-js/internals/inherit-if-required.js");c.exports=function(Y,re,se){var Ae=Y.indexOf("Map")!==-1,we=Y.indexOf("Weak")!==-1,Ce=Ae?"set":"add",ve=f[Y],ne=ve&&ve.prototype,ce=ve,ae={},De=function(Re){var it=A(ne[Re]);g(ne,Re,Re==="add"?function(Be){return it(this,Be===0?0:Be),this}:Re==="delete"?function(ht){return we&&!C(ht)?!1:it(this,ht===0?0:ht)}:Re==="get"?function(Be){return we&&!C(Be)?void 0:it(this,Be===0?0:Be)}:Re==="has"?function(Be){return we&&!C(Be)?!1:it(this,Be===0?0:Be)}:function(Be,nt){return it(this,Be===0?0:Be,nt),this})},Oe=p(Y,!E(ve)||!(we||ne.forEach&&!N(function(){new ve().entries().next()})));if(Oe)ce=se.getConstructor(re,Y,Ae,Ce),y.enable();else if(p(Y,!0)){var be=new ce,de=be[Ce](we?{}:-0,1)!==be,xe=N(function(){be.has(1)}),je=I(function(Re){new ve(Re)}),Me=!we&&N(function(){for(var Re=new ve,it=5;it--;)Re[Ce](it,it);return!Re.has(-0)});je||(ce=re(function(Re,it){w(Re,ne);var ht=K(new ve,Re,ce);return T(it)||x(it,ht[Ce],{that:ht,AS_ENTRIES:Ae}),ht}),ce.prototype=ne,ne.constructor=ce),(xe||Me)&&(De("delete"),De("has"),Ae&&De("get")),(Me||de)&&De(Ce),we&&ne.clear&&delete ne.clear}return ae[Y]=ce,d({global:!0,constructor:!0,forced:ce!==ve},ae),U(ce,Y),we||se.setStrong(ce,Y,Ae),ce}}),"./node_modules/core-js/internals/copy-constructor-properties.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/has-own-property.js"),f=l("./node_modules/core-js/internals/own-keys.js"),A=l("./node_modules/core-js/internals/object-get-own-property-descriptor.js"),p=l("./node_modules/core-js/internals/object-define-property.js");c.exports=function(g,y,x){for(var w=f(y),E=p.f,T=A.f,C=0;C<w.length;C++){var N=w[C];!d(g,N)&&!(x&&d(x,N))&&E(g,N,T(y,N))}}}),"./node_modules/core-js/internals/correct-is-regexp-logic.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/well-known-symbol.js"),f=d("match");c.exports=function(A){var p=/./;try{"/./"[A](p)}catch{try{return p[f]=!1,"/./"[A](p)}catch{}}return!1}}),"./node_modules/core-js/internals/correct-prototype-getter.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/fails.js");c.exports=!d(function(){function f(){}return f.prototype.constructor=null,Object.getPrototypeOf(new f)!==f.prototype})}),"./node_modules/core-js/internals/create-html.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-uncurry-this.js"),f=l("./node_modules/core-js/internals/require-object-coercible.js"),A=l("./node_modules/core-js/internals/to-string.js"),p=/"/g,g=d("".replace);c.exports=function(y,x,w,E){var T=A(f(y)),C="<"+x;return w!==""&&(C+=" "+w+'="'+g(A(E),p,"&quot;")+'"'),C+">"+T+"</"+x+">"}}),"./node_modules/core-js/internals/create-iter-result-object.js":(function(c){c.exports=function(u,l){return{value:u,done:l}}}),"./node_modules/core-js/internals/create-non-enumerable-property.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/descriptors.js"),f=l("./node_modules/core-js/internals/object-define-property.js"),A=l("./node_modules/core-js/internals/create-property-descriptor.js");c.exports=d?function(p,g,y){return f.f(p,g,A(1,y))}:function(p,g,y){return p[g]=y,p}}),"./node_modules/core-js/internals/create-property-descriptor.js":(function(c){c.exports=function(u,l){return{enumerable:!(u&1),configurable:!(u&2),writable:!(u&4),value:l}}}),"./node_modules/core-js/internals/create-property.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/descriptors.js"),f=l("./node_modules/core-js/internals/object-define-property.js"),A=l("./node_modules/core-js/internals/create-property-descriptor.js");c.exports=function(p,g,y){d?f.f(p,g,A(0,y)):p[g]=y}}),"./node_modules/core-js/internals/define-built-in-accessor.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/make-built-in.js"),f=l("./node_modules/core-js/internals/object-define-property.js");c.exports=function(A,p,g){return g.get&&d(g.get,p,{getter:!0}),g.set&&d(g.set,p,{setter:!0}),f.f(A,p,g)}}),"./node_modules/core-js/internals/define-built-in.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/is-callable.js"),f=l("./node_modules/core-js/internals/object-define-property.js"),A=l("./node_modules/core-js/internals/make-built-in.js"),p=l("./node_modules/core-js/internals/define-global-property.js");c.exports=function(g,y,x,w){w||(w={});var E=w.enumerable,T=w.name!==void 0?w.name:y;if(d(x)&&A(x,T,w),w.global)E?g[y]=x:p(y,x);else{try{w.unsafe?g[y]&&(E=!0):delete g[y]}catch{}E?g[y]=x:f.f(g,y,{value:x,enumerable:!1,configurable:!w.nonConfigurable,writable:!w.nonWritable})}return g}}),"./node_modules/core-js/internals/define-built-ins.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/define-built-in.js");c.exports=function(f,A,p){for(var g in A)d(f,g,A[g],p);return f}}),"./node_modules/core-js/internals/define-global-property.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/global-this.js"),f=Object.defineProperty;c.exports=function(A,p){try{f(d,A,{value:p,configurable:!0,writable:!0})}catch{d[A]=p}return p}}),"./node_modules/core-js/internals/descriptors.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/fails.js");c.exports=!d(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7})}),"./node_modules/core-js/internals/document-create-element.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/global-this.js"),f=l("./node_modules/core-js/internals/is-object.js"),A=d.document,p=f(A)&&f(A.createElement);c.exports=function(g){return p?A.createElement(g):{}}}),"./node_modules/core-js/internals/does-not-exceed-safe-integer.js":(function(c){var u=TypeError,l=9007199254740991;c.exports=function(d){if(d>l)throw u("Maximum allowed index exceeded");return d}}),"./node_modules/core-js/internals/dom-iterables.js":(function(c){c.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}),"./node_modules/core-js/internals/dom-token-list-prototype.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/document-create-element.js"),f=d("span").classList,A=f&&f.constructor&&f.constructor.prototype;c.exports=A===Object.prototype?void 0:A}),"./node_modules/core-js/internals/enum-bug-keys.js":(function(c){c.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]}),"./node_modules/core-js/internals/environment-is-ios-pebble.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/environment-user-agent.js");c.exports=/ipad|iphone|ipod/i.test(d)&&typeof Pebble<"u"}),"./node_modules/core-js/internals/environment-is-ios.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/environment-user-agent.js");c.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(d)}),"./node_modules/core-js/internals/environment-is-node.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/environment.js");c.exports=d==="NODE"}),"./node_modules/core-js/internals/environment-is-webos-webkit.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/environment-user-agent.js");c.exports=/web0s(?!.*chrome)/i.test(d)}),"./node_modules/core-js/internals/environment-user-agent.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/global-this.js"),f=d.navigator,A=f&&f.userAgent;c.exports=A?String(A):""}),"./node_modules/core-js/internals/environment-v8-version.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/global-this.js"),f=l("./node_modules/core-js/internals/environment-user-agent.js"),A=d.process,p=d.Deno,g=A&&A.versions||p&&p.version,y=g&&g.v8,x,w;y&&(x=y.split("."),w=x[0]>0&&x[0]<4?1:+(x[0]+x[1])),!w&&f&&(x=f.match(/Edge\/(\d+)/),(!x||x[1]>=74)&&(x=f.match(/Chrome\/(\d+)/),x&&(w=+x[1]))),c.exports=w}),"./node_modules/core-js/internals/environment.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/global-this.js"),f=l("./node_modules/core-js/internals/environment-user-agent.js"),A=l("./node_modules/core-js/internals/classof-raw.js"),p=function(g){return f.slice(0,g.length)===g};c.exports=(function(){return p("Bun/")?"BUN":p("Cloudflare-Workers")?"CLOUDFLARE":p("Deno/")?"DENO":p("Node.js/")?"NODE":d.Bun&&typeof Bun.version=="string"?"BUN":d.Deno&&typeof Deno.version=="object"?"DENO":A(d.process)==="process"?"NODE":d.window&&d.document?"BROWSER":"REST"})()}),"./node_modules/core-js/internals/export.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/global-this.js"),f=l("./node_modules/core-js/internals/object-get-own-property-descriptor.js").f,A=l("./node_modules/core-js/internals/create-non-enumerable-property.js"),p=l("./node_modules/core-js/internals/define-built-in.js"),g=l("./node_modules/core-js/internals/define-global-property.js"),y=l("./node_modules/core-js/internals/copy-constructor-properties.js"),x=l("./node_modules/core-js/internals/is-forced.js");c.exports=function(w,E){var T=w.target,C=w.global,N=w.stat,I,U,K,Y,re,se;if(C?U=d:N?U=d[T]||g(T,{}):U=d[T]&&d[T].prototype,U)for(K in E){if(re=E[K],w.dontCallGetSet?(se=f(U,K),Y=se&&se.value):Y=U[K],I=x(C?K:T+(N?".":"#")+K,w.forced),!I&&Y!==void 0){if(typeof re==typeof Y)continue;y(re,Y)}(w.sham||Y&&Y.sham)&&A(re,"sham",!0),p(U,K,re,w)}}}),"./node_modules/core-js/internals/fails.js":(function(c){c.exports=function(u){try{return!!u()}catch{return!0}}}),"./node_modules/core-js/internals/fix-regexp-well-known-symbol-logic.js":(function(c,u,l){l("./node_modules/core-js/modules/es.regexp.exec.js");var d=l("./node_modules/core-js/internals/function-call.js"),f=l("./node_modules/core-js/internals/define-built-in.js"),A=l("./node_modules/core-js/internals/regexp-exec.js"),p=l("./node_modules/core-js/internals/fails.js"),g=l("./node_modules/core-js/internals/well-known-symbol.js"),y=l("./node_modules/core-js/internals/create-non-enumerable-property.js"),x=g("species"),w=RegExp.prototype;c.exports=function(E,T,C,N){var I=g(E),U=!p(function(){var se={};return se[I]=function(){return 7},""[E](se)!==7}),K=U&&!p(function(){var se=!1,Ae=/a/;if(E==="split"){var we={};we[x]=function(){return Ae},Ae={constructor:we,flags:""},Ae[I]=/./[I]}return Ae.exec=function(){return se=!0,null},Ae[I](""),!se});if(!U||!K||C){var Y=/./[I],re=T(I,""[E],function(se,Ae,we,Ce,ve){var ne=Ae.exec;return ne===A||ne===w.exec?U&&!ve?{done:!0,value:d(Y,Ae,we,Ce)}:{done:!0,value:d(se,we,Ae,Ce)}:{done:!1}});f(String.prototype,E,re[0]),f(w,I,re[1])}N&&y(w[I],"sham",!0)}}),"./node_modules/core-js/internals/freezing.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/fails.js");c.exports=!d(function(){return Object.isExtensible(Object.preventExtensions({}))})}),"./node_modules/core-js/internals/function-apply.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-bind-native.js"),f=Function.prototype,A=f.apply,p=f.call;c.exports=typeof Reflect=="object"&&Reflect.apply||(d?p.bind(A):function(){return p.apply(A,arguments)})}),"./node_modules/core-js/internals/function-bind-context.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-uncurry-this-clause.js"),f=l("./node_modules/core-js/internals/a-callable.js"),A=l("./node_modules/core-js/internals/function-bind-native.js"),p=d(d.bind);c.exports=function(g,y){return f(g),y===void 0?g:A?p(g,y):function(){return g.apply(y,arguments)}}}),"./node_modules/core-js/internals/function-bind-native.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/fails.js");c.exports=!d(function(){var f=(function(){}).bind();return typeof f!="function"||f.hasOwnProperty("prototype")})}),"./node_modules/core-js/internals/function-call.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-bind-native.js"),f=Function.prototype.call;c.exports=d?f.bind(f):function(){return f.apply(f,arguments)}}),"./node_modules/core-js/internals/function-name.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/descriptors.js"),f=l("./node_modules/core-js/internals/has-own-property.js"),A=Function.prototype,p=d&&Object.getOwnPropertyDescriptor,g=f(A,"name"),y=g&&(function(){}).name==="something",x=g&&(!d||d&&p(A,"name").configurable);c.exports={EXISTS:g,PROPER:y,CONFIGURABLE:x}}),"./node_modules/core-js/internals/function-uncurry-this-accessor.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-uncurry-this.js"),f=l("./node_modules/core-js/internals/a-callable.js");c.exports=function(A,p,g){try{return d(f(Object.getOwnPropertyDescriptor(A,p)[g]))}catch{}}}),"./node_modules/core-js/internals/function-uncurry-this-clause.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/classof-raw.js"),f=l("./node_modules/core-js/internals/function-uncurry-this.js");c.exports=function(A){if(d(A)==="Function")return f(A)}}),"./node_modules/core-js/internals/function-uncurry-this.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-bind-native.js"),f=Function.prototype,A=f.call,p=d&&f.bind.bind(A,A);c.exports=d?p:function(g){return function(){return A.apply(g,arguments)}}}),"./node_modules/core-js/internals/get-built-in.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/global-this.js"),f=l("./node_modules/core-js/internals/is-callable.js"),A=function(p){return f(p)?p:void 0};c.exports=function(p,g){return arguments.length<2?A(d[p]):d[p]&&d[p][g]}}),"./node_modules/core-js/internals/get-iterator-direct.js":(function(c){c.exports=function(u){return{iterator:u,next:u.next,done:!1}}}),"./node_modules/core-js/internals/get-iterator-method.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/classof.js"),f=l("./node_modules/core-js/internals/get-method.js"),A=l("./node_modules/core-js/internals/is-null-or-undefined.js"),p=l("./node_modules/core-js/internals/iterators.js"),g=l("./node_modules/core-js/internals/well-known-symbol.js"),y=g("iterator");c.exports=function(x){if(!A(x))return f(x,y)||f(x,"@@iterator")||p[d(x)]}}),"./node_modules/core-js/internals/get-iterator.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-call.js"),f=l("./node_modules/core-js/internals/a-callable.js"),A=l("./node_modules/core-js/internals/an-object.js"),p=l("./node_modules/core-js/internals/try-to-string.js"),g=l("./node_modules/core-js/internals/get-iterator-method.js"),y=TypeError;c.exports=function(x,w){var E=arguments.length<2?g(x):w;if(f(E))return A(d(E,x));throw new y(p(x)+" is not iterable")}}),"./node_modules/core-js/internals/get-method.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/a-callable.js"),f=l("./node_modules/core-js/internals/is-null-or-undefined.js");c.exports=function(A,p){var g=A[p];return f(g)?void 0:d(g)}}),"./node_modules/core-js/internals/get-set-record.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/a-callable.js"),f=l("./node_modules/core-js/internals/an-object.js"),A=l("./node_modules/core-js/internals/function-call.js"),p=l("./node_modules/core-js/internals/to-integer-or-infinity.js"),g=l("./node_modules/core-js/internals/get-iterator-direct.js"),y="Invalid size",x=RangeError,w=TypeError,E=Math.max,T=function(C,N){this.set=C,this.size=E(N,0),this.has=d(C.has),this.keys=d(C.keys)};T.prototype={getIterator:function(){return g(f(A(this.keys,this.set)))},includes:function(C){return A(this.has,this.set,C)}},c.exports=function(C){f(C);var N=+C.size;if(N!==N)throw new w(y);var I=p(N);if(I<0)throw new x(y);return new T(C,I)}}),"./node_modules/core-js/internals/get-substitution.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-uncurry-this.js"),f=l("./node_modules/core-js/internals/to-object.js"),A=Math.floor,p=d("".charAt),g=d("".replace),y=d("".slice),x=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,w=/\$([$&'`]|\d{1,2})/g;c.exports=function(E,T,C,N,I,U){var K=C+E.length,Y=N.length,re=w;return I!==void 0&&(I=f(I),re=x),g(U,re,function(se,Ae){var we;switch(p(Ae,0)){case"$":return"$";case"&":return E;case"`":return y(T,0,C);case"'":return y(T,K);case"<":we=I[y(Ae,1,-1)];break;default:var Ce=+Ae;if(Ce===0)return se;if(Ce>Y){var ve=A(Ce/10);return ve===0?se:ve<=Y?N[ve-1]===void 0?p(Ae,1):N[ve-1]+p(Ae,1):se}we=N[Ce-1]}return we===void 0?"":we})}}),"./node_modules/core-js/internals/global-this.js":(function(c){var u=function(l){return l&&l.Math===Math&&l};c.exports=u(typeof globalThis=="object"&&globalThis)||u(typeof window=="object"&&window)||u(typeof self=="object"&&self)||u(typeof O1=="object"&&O1)||u(typeof this=="object"&&this)||(function(){return this})()||Function("return this")()}),"./node_modules/core-js/internals/has-own-property.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-uncurry-this.js"),f=l("./node_modules/core-js/internals/to-object.js"),A=d({}.hasOwnProperty);c.exports=Object.hasOwn||function(g,y){return A(f(g),y)}}),"./node_modules/core-js/internals/hidden-keys.js":(function(c){c.exports={}}),"./node_modules/core-js/internals/host-report-errors.js":(function(c){c.exports=function(u,l){try{arguments.length===1?console.error(u):console.error(u,l)}catch{}}}),"./node_modules/core-js/internals/html.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/get-built-in.js");c.exports=d("document","documentElement")}),"./node_modules/core-js/internals/ie8-dom-define.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/descriptors.js"),f=l("./node_modules/core-js/internals/fails.js"),A=l("./node_modules/core-js/internals/document-create-element.js");c.exports=!d&&!f(function(){return Object.defineProperty(A("div"),"a",{get:function(){return 7}}).a!==7})}),"./node_modules/core-js/internals/indexed-object.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-uncurry-this.js"),f=l("./node_modules/core-js/internals/fails.js"),A=l("./node_modules/core-js/internals/classof-raw.js"),p=Object,g=d("".split);c.exports=f(function(){return!p("z").propertyIsEnumerable(0)})?function(y){return A(y)==="String"?g(y,""):p(y)}:p}),"./node_modules/core-js/internals/inherit-if-required.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/is-callable.js"),f=l("./node_modules/core-js/internals/is-object.js"),A=l("./node_modules/core-js/internals/object-set-prototype-of.js");c.exports=function(p,g,y){var x,w;return A&&d(x=g.constructor)&&x!==y&&f(w=x.prototype)&&w!==y.prototype&&A(p,w),p}}),"./node_modules/core-js/internals/inspect-source.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-uncurry-this.js"),f=l("./node_modules/core-js/internals/is-callable.js"),A=l("./node_modules/core-js/internals/shared-store.js"),p=d(Function.toString);f(A.inspectSource)||(A.inspectSource=function(g){return p(g)}),c.exports=A.inspectSource}),"./node_modules/core-js/internals/internal-metadata.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/function-uncurry-this.js"),A=l("./node_modules/core-js/internals/hidden-keys.js"),p=l("./node_modules/core-js/internals/is-object.js"),g=l("./node_modules/core-js/internals/has-own-property.js"),y=l("./node_modules/core-js/internals/object-define-property.js").f,x=l("./node_modules/core-js/internals/object-get-own-property-names.js"),w=l("./node_modules/core-js/internals/object-get-own-property-names-external.js"),E=l("./node_modules/core-js/internals/object-is-extensible.js"),T=l("./node_modules/core-js/internals/uid.js"),C=l("./node_modules/core-js/internals/freezing.js"),N=!1,I=T("meta"),U=0,K=function(Ce){y(Ce,I,{value:{objectID:"O"+U++,weakData:{}}})},Y=function(Ce,ve){if(!p(Ce))return typeof Ce=="symbol"?Ce:(typeof Ce=="string"?"S":"P")+Ce;if(!g(Ce,I)){if(!E(Ce))return"F";if(!ve)return"E";K(Ce)}return Ce[I].objectID},re=function(Ce,ve){if(!g(Ce,I)){if(!E(Ce))return!0;if(!ve)return!1;K(Ce)}return Ce[I].weakData},se=function(Ce){return C&&N&&E(Ce)&&!g(Ce,I)&&K(Ce),Ce},Ae=function(){we.enable=function(){},N=!0;var Ce=x.f,ve=f([].splice),ne={};ne[I]=1,Ce(ne).length&&(x.f=function(ce){for(var ae=Ce(ce),De=0,Oe=ae.length;De<Oe;De++)if(ae[De]===I){ve(ae,De,1);break}return ae},d({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:w.f}))},we=c.exports={enable:Ae,fastKey:Y,getWeakData:re,onFreeze:se};A[I]=!0}),"./node_modules/core-js/internals/internal-state.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/weak-map-basic-detection.js"),f=l("./node_modules/core-js/internals/global-this.js"),A=l("./node_modules/core-js/internals/is-object.js"),p=l("./node_modules/core-js/internals/create-non-enumerable-property.js"),g=l("./node_modules/core-js/internals/has-own-property.js"),y=l("./node_modules/core-js/internals/shared-store.js"),x=l("./node_modules/core-js/internals/shared-key.js"),w=l("./node_modules/core-js/internals/hidden-keys.js"),E="Object already initialized",T=f.TypeError,C=f.WeakMap,N,I,U,K=function(Ae){return U(Ae)?I(Ae):N(Ae,{})},Y=function(Ae){return function(we){var Ce;if(!A(we)||(Ce=I(we)).type!==Ae)throw new T("Incompatible receiver, "+Ae+" required");return Ce}};if(d||y.state){var re=y.state||(y.state=new C);re.get=re.get,re.has=re.has,re.set=re.set,N=function(Ae,we){if(re.has(Ae))throw new T(E);return we.facade=Ae,re.set(Ae,we),we},I=function(Ae){return re.get(Ae)||{}},U=function(Ae){return re.has(Ae)}}else{var se=x("state");w[se]=!0,N=function(Ae,we){if(g(Ae,se))throw new T(E);return we.facade=Ae,p(Ae,se,we),we},I=function(Ae){return g(Ae,se)?Ae[se]:{}},U=function(Ae){return g(Ae,se)}}c.exports={set:N,get:I,has:U,enforce:K,getterFor:Y}}),"./node_modules/core-js/internals/is-array-iterator-method.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/well-known-symbol.js"),f=l("./node_modules/core-js/internals/iterators.js"),A=d("iterator"),p=Array.prototype;c.exports=function(g){return g!==void 0&&(f.Array===g||p[A]===g)}}),"./node_modules/core-js/internals/is-array.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/classof-raw.js");c.exports=Array.isArray||function(A){return d(A)==="Array"}}),"./node_modules/core-js/internals/is-callable.js":(function(c){var u=typeof document=="object"&&document.all;c.exports=typeof u>"u"&&u!==void 0?function(l){return typeof l=="function"||l===u}:function(l){return typeof l=="function"}}),"./node_modules/core-js/internals/is-constructor.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-uncurry-this.js"),f=l("./node_modules/core-js/internals/fails.js"),A=l("./node_modules/core-js/internals/is-callable.js"),p=l("./node_modules/core-js/internals/classof.js"),g=l("./node_modules/core-js/internals/get-built-in.js"),y=l("./node_modules/core-js/internals/inspect-source.js"),x=function(){},w=g("Reflect","construct"),E=/^\s*(?:class|function)\b/,T=d(E.exec),C=!E.test(x),N=function(K){if(!A(K))return!1;try{return w(x,[],K),!0}catch{return!1}},I=function(K){if(!A(K))return!1;switch(p(K)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return C||!!T(E,y(K))}catch{return!0}};I.sham=!0,c.exports=!w||f(function(){var U;return N(N.call)||!N(Object)||!N(function(){U=!0})||U})?I:N}),"./node_modules/core-js/internals/is-forced.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/fails.js"),f=l("./node_modules/core-js/internals/is-callable.js"),A=/#|\.prototype\./,p=function(E,T){var C=y[g(E)];return C===w?!0:C===x?!1:f(T)?d(T):!!T},g=p.normalize=function(E){return String(E).replace(A,".").toLowerCase()},y=p.data={},x=p.NATIVE="N",w=p.POLYFILL="P";c.exports=p}),"./node_modules/core-js/internals/is-iterable.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/classof.js"),f=l("./node_modules/core-js/internals/has-own-property.js"),A=l("./node_modules/core-js/internals/is-null-or-undefined.js"),p=l("./node_modules/core-js/internals/well-known-symbol.js"),g=l("./node_modules/core-js/internals/iterators.js"),y=p("iterator"),x=Object;c.exports=function(w){if(A(w))return!1;var E=x(w);return E[y]!==void 0||"@@iterator"in E||f(g,d(E))}}),"./node_modules/core-js/internals/is-null-or-undefined.js":(function(c){c.exports=function(u){return u==null}}),"./node_modules/core-js/internals/is-object.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/is-callable.js");c.exports=function(f){return typeof f=="object"?f!==null:d(f)}}),"./node_modules/core-js/internals/is-possible-prototype.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/is-object.js");c.exports=function(f){return d(f)||f===null}}),"./node_modules/core-js/internals/is-pure.js":(function(c){c.exports=!1}),"./node_modules/core-js/internals/is-raw-json.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/is-object.js"),f=l("./node_modules/core-js/internals/internal-state.js").get;c.exports=function(p){if(!d(p))return!1;var g=f(p);return!!g&&g.type==="RawJSON"}}),"./node_modules/core-js/internals/is-regexp.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/is-object.js"),f=l("./node_modules/core-js/internals/classof-raw.js"),A=l("./node_modules/core-js/internals/well-known-symbol.js"),p=A("match");c.exports=function(g){var y;return d(g)&&((y=g[p])!==void 0?!!y:f(g)==="RegExp")}}),"./node_modules/core-js/internals/is-symbol.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/get-built-in.js"),f=l("./node_modules/core-js/internals/is-callable.js"),A=l("./node_modules/core-js/internals/object-is-prototype-of.js"),p=l("./node_modules/core-js/internals/use-symbol-as-uid.js"),g=Object;c.exports=p?function(y){return typeof y=="symbol"}:function(y){var x=d("Symbol");return f(x)&&A(x.prototype,g(y))}}),"./node_modules/core-js/internals/iterate-simple.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-call.js");c.exports=function(f,A,p){for(var g=p?f:f.iterator,y=f.next,x,w;!(x=d(y,g)).done;)if(w=A(x.value),w!==void 0)return w}}),"./node_modules/core-js/internals/iterate.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-bind-context.js"),f=l("./node_modules/core-js/internals/function-call.js"),A=l("./node_modules/core-js/internals/an-object.js"),p=l("./node_modules/core-js/internals/try-to-string.js"),g=l("./node_modules/core-js/internals/is-array-iterator-method.js"),y=l("./node_modules/core-js/internals/length-of-array-like.js"),x=l("./node_modules/core-js/internals/object-is-prototype-of.js"),w=l("./node_modules/core-js/internals/get-iterator.js"),E=l("./node_modules/core-js/internals/get-iterator-method.js"),T=l("./node_modules/core-js/internals/iterator-close.js"),C=TypeError,N=function(U,K){this.stopped=U,this.result=K},I=N.prototype;c.exports=function(U,K,Y){var re=Y&&Y.that,se=!!(Y&&Y.AS_ENTRIES),Ae=!!(Y&&Y.IS_RECORD),we=!!(Y&&Y.IS_ITERATOR),Ce=!!(Y&&Y.INTERRUPTED),ve=d(K,re),ne,ce,ae,De,Oe,be,de,xe=function(Me){return ne&&T(ne,"normal"),new N(!0,Me)},je=function(Me){return se?(A(Me),Ce?ve(Me[0],Me[1],xe):ve(Me[0],Me[1])):Ce?ve(Me,xe):ve(Me)};if(Ae)ne=U.iterator;else if(we)ne=U;else{if(ce=E(U),!ce)throw new C(p(U)+" is not iterable");if(g(ce)){for(ae=0,De=y(U);De>ae;ae++)if(Oe=je(U[ae]),Oe&&x(I,Oe))return Oe;return new N(!1)}ne=w(U,ce)}for(be=Ae?U.next:ne.next;!(de=f(be,ne)).done;){try{Oe=je(de.value)}catch(Me){T(ne,"throw",Me)}if(typeof Oe=="object"&&Oe&&x(I,Oe))return Oe}return new N(!1)}}),"./node_modules/core-js/internals/iterator-close-all.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/iterator-close.js");c.exports=function(f,A,p){for(var g=f.length-1;g>=0;g--)if(f[g]!==void 0)try{p=d(f[g].iterator,A,p)}catch(y){A="throw",p=y}if(A==="throw")throw p;return p}}),"./node_modules/core-js/internals/iterator-close.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-call.js"),f=l("./node_modules/core-js/internals/an-object.js"),A=l("./node_modules/core-js/internals/get-method.js");c.exports=function(p,g,y){var x,w;f(p);try{if(x=A(p,"return"),!x){if(g==="throw")throw y;return y}x=d(x,p)}catch(E){w=!0,x=E}if(g==="throw")throw y;if(w)throw x;return f(x),y}}),"./node_modules/core-js/internals/iterator-create-constructor.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/iterators-core.js").IteratorPrototype,f=l("./node_modules/core-js/internals/object-create.js"),A=l("./node_modules/core-js/internals/create-property-descriptor.js"),p=l("./node_modules/core-js/internals/set-to-string-tag.js"),g=l("./node_modules/core-js/internals/iterators.js"),y=function(){return this};c.exports=function(x,w,E,T){var C=w+" Iterator";return x.prototype=f(d,{next:A(+!T,E)}),p(x,C,!1,!0),g[C]=y,x}}),"./node_modules/core-js/internals/iterator-create-proxy.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-call.js"),f=l("./node_modules/core-js/internals/object-create.js"),A=l("./node_modules/core-js/internals/create-non-enumerable-property.js"),p=l("./node_modules/core-js/internals/define-built-ins.js"),g=l("./node_modules/core-js/internals/well-known-symbol.js"),y=l("./node_modules/core-js/internals/internal-state.js"),x=l("./node_modules/core-js/internals/get-method.js"),w=l("./node_modules/core-js/internals/iterators-core.js").IteratorPrototype,E=l("./node_modules/core-js/internals/create-iter-result-object.js"),T=l("./node_modules/core-js/internals/iterator-close.js"),C=l("./node_modules/core-js/internals/iterator-close-all.js"),N=g("toStringTag"),I="IteratorHelper",U="WrapForValidIterator",K="normal",Y="throw",re=y.set,se=function(Ce){var ve=y.getterFor(Ce?U:I);return p(f(w),{next:function(){var ce=ve(this);if(Ce)return ce.nextHandler();if(ce.done)return E(void 0,!0);try{var ae=ce.nextHandler();return ce.returnHandlerResult?ae:E(ae,ce.done)}catch(De){throw ce.done=!0,De}},return:function(){var ne=ve(this),ce=ne.iterator;if(ne.done=!0,Ce){var ae=x(ce,"return");return ae?d(ae,ce):E(void 0,!0)}if(ne.inner)try{T(ne.inner.iterator,K)}catch(De){return T(ce,Y,De)}if(ne.openIters)try{C(ne.openIters,K)}catch(De){return T(ce,Y,De)}return ce&&T(ce,K),E(void 0,!0)}})},Ae=se(!0),we=se(!1);A(we,N,"Iterator Helper"),c.exports=function(Ce,ve,ne){var ce=function(De,Oe){Oe?(Oe.iterator=De.iterator,Oe.next=De.next):Oe=De,Oe.type=ve?U:I,Oe.returnHandlerResult=!!ne,Oe.nextHandler=Ce,Oe.counter=0,Oe.done=!1,re(this,Oe)};return ce.prototype=ve?Ae:we,ce}}),"./node_modules/core-js/internals/iterator-define.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/function-call.js"),A=l("./node_modules/core-js/internals/is-pure.js"),p=l("./node_modules/core-js/internals/function-name.js"),g=l("./node_modules/core-js/internals/is-callable.js"),y=l("./node_modules/core-js/internals/iterator-create-constructor.js"),x=l("./node_modules/core-js/internals/object-get-prototype-of.js"),w=l("./node_modules/core-js/internals/object-set-prototype-of.js"),E=l("./node_modules/core-js/internals/set-to-string-tag.js"),T=l("./node_modules/core-js/internals/create-non-enumerable-property.js"),C=l("./node_modules/core-js/internals/define-built-in.js"),N=l("./node_modules/core-js/internals/well-known-symbol.js"),I=l("./node_modules/core-js/internals/iterators.js"),U=l("./node_modules/core-js/internals/iterators-core.js"),K=p.PROPER,Y=p.CONFIGURABLE,re=U.IteratorPrototype,se=U.BUGGY_SAFARI_ITERATORS,Ae=N("iterator"),we="keys",Ce="values",ve="entries",ne=function(){return this};c.exports=function(ce,ae,De,Oe,be,de,xe){y(De,ae,Oe);var je=function(rt){if(rt===be&&Be)return Be;if(!se&&rt&&rt in it)return it[rt];switch(rt){case we:return function(){return new De(this,rt)};case Ce:return function(){return new De(this,rt)};case ve:return function(){return new De(this,rt)}}return function(){return new De(this)}},Me=ae+" Iterator",Re=!1,it=ce.prototype,ht=it[Ae]||it["@@iterator"]||be&&it[be],Be=!se&&ht||je(be),nt=ae==="Array"&&it.entries||ht,Ge,ft,Dt;if(nt&&(Ge=x(nt.call(new ce)),Ge!==Object.prototype&&Ge.next&&(!A&&x(Ge)!==re&&(w?w(Ge,re):g(Ge[Ae])||C(Ge,Ae,ne)),E(Ge,Me,!0,!0),A&&(I[Me]=ne))),K&&be===Ce&&ht&&ht.name!==Ce&&(!A&&Y?T(it,"name",Ce):(Re=!0,Be=function(){return f(ht,this)})),be)if(ft={values:je(Ce),keys:de?Be:je(we),entries:je(ve)},xe)for(Dt in ft)(se||Re||!(Dt in it))&&C(it,Dt,ft[Dt]);else d({target:ae,proto:!0,forced:se||Re},ft);return(!A||xe)&&it[Ae]!==Be&&C(it,Ae,Be,{name:be}),I[ae]=Be,ft}}),"./node_modules/core-js/internals/iterator-helper-throws-on-invalid-iterator.js":(function(c){c.exports=function(u,l){var d=typeof Iterator=="function"&&Iterator.prototype[u];if(d)try{d.call({next:null},l).next()}catch{return!0}}}),"./node_modules/core-js/internals/iterator-helper-without-closing-on-early-error.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/global-this.js");c.exports=function(f,A){var p=d.Iterator,g=p&&p.prototype,y=g&&g[f],x=!1;if(y)try{y.call({next:function(){return{done:!0}},return:function(){x=!0}},-1)}catch(w){w instanceof A||(x=!1)}if(!x)return y}}),"./node_modules/core-js/internals/iterators-core.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/fails.js"),f=l("./node_modules/core-js/internals/is-callable.js"),A=l("./node_modules/core-js/internals/is-object.js"),p=l("./node_modules/core-js/internals/object-create.js"),g=l("./node_modules/core-js/internals/object-get-prototype-of.js"),y=l("./node_modules/core-js/internals/define-built-in.js"),x=l("./node_modules/core-js/internals/well-known-symbol.js"),w=l("./node_modules/core-js/internals/is-pure.js"),E=x("iterator"),T=!1,C,N,I;[].keys&&(I=[].keys(),"next"in I?(N=g(g(I)),N!==Object.prototype&&(C=N)):T=!0);var U=!A(C)||d(function(){var K={};return C[E].call(K)!==K});U?C={}:w&&(C=p(C)),f(C[E])||y(C,E,function(){return this}),c.exports={IteratorPrototype:C,BUGGY_SAFARI_ITERATORS:T}}),"./node_modules/core-js/internals/iterators.js":(function(c){c.exports={}}),"./node_modules/core-js/internals/length-of-array-like.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/to-length.js");c.exports=function(f){return d(f.length)}}),"./node_modules/core-js/internals/make-built-in.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-uncurry-this.js"),f=l("./node_modules/core-js/internals/fails.js"),A=l("./node_modules/core-js/internals/is-callable.js"),p=l("./node_modules/core-js/internals/has-own-property.js"),g=l("./node_modules/core-js/internals/descriptors.js"),y=l("./node_modules/core-js/internals/function-name.js").CONFIGURABLE,x=l("./node_modules/core-js/internals/inspect-source.js"),w=l("./node_modules/core-js/internals/internal-state.js"),E=w.enforce,T=w.get,C=String,N=Object.defineProperty,I=d("".slice),U=d("".replace),K=d([].join),Y=g&&!f(function(){return N(function(){},"length",{value:8}).length!==8}),re=String(String).split("String"),se=c.exports=function(Ae,we,Ce){I(C(we),0,7)==="Symbol("&&(we="["+U(C(we),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),Ce&&Ce.getter&&(we="get "+we),Ce&&Ce.setter&&(we="set "+we),(!p(Ae,"name")||y&&Ae.name!==we)&&(g?N(Ae,"name",{value:we,configurable:!0}):Ae.name=we),Y&&Ce&&p(Ce,"arity")&&Ae.length!==Ce.arity&&N(Ae,"length",{value:Ce.arity});try{Ce&&p(Ce,"constructor")&&Ce.constructor?g&&N(Ae,"prototype",{writable:!1}):Ae.prototype&&(Ae.prototype=void 0)}catch{}var ve=E(Ae);return p(ve,"source")||(ve.source=K(re,typeof we=="string"?we:"")),Ae};Function.prototype.toString=se(function(){return A(this)&&T(this).source||x(this)},"toString")}),"./node_modules/core-js/internals/math-trunc.js":(function(c){var u=Math.ceil,l=Math.floor;c.exports=Math.trunc||function(f){var A=+f;return(A>0?l:u)(A)}}),"./node_modules/core-js/internals/microtask.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/global-this.js"),f=l("./node_modules/core-js/internals/safe-get-built-in.js"),A=l("./node_modules/core-js/internals/function-bind-context.js"),p=l("./node_modules/core-js/internals/task.js").set,g=l("./node_modules/core-js/internals/queue.js"),y=l("./node_modules/core-js/internals/environment-is-ios.js"),x=l("./node_modules/core-js/internals/environment-is-ios-pebble.js"),w=l("./node_modules/core-js/internals/environment-is-webos-webkit.js"),E=l("./node_modules/core-js/internals/environment-is-node.js"),T=d.MutationObserver||d.WebKitMutationObserver,C=d.document,N=d.process,I=d.Promise,U=f("queueMicrotask"),K,Y,re,se,Ae;if(!U){var we=new g,Ce=function(){var ve,ne;for(E&&(ve=N.domain)&&ve.exit();ne=we.get();)try{ne()}catch(ce){throw we.head&&K(),ce}ve&&ve.enter()};!y&&!E&&!w&&T&&C?(Y=!0,re=C.createTextNode(""),new T(Ce).observe(re,{characterData:!0}),K=function(){re.data=Y=!Y}):!x&&I&&I.resolve?(se=I.resolve(void 0),se.constructor=I,Ae=A(se.then,se),K=function(){Ae(Ce)}):E?K=function(){N.nextTick(Ce)}:(p=A(p,d),K=function(){p(Ce)}),U=function(ve){we.head||K(),we.add(ve)}}c.exports=U}),"./node_modules/core-js/internals/native-raw-json.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/fails.js");c.exports=!d(function(){var f="9007199254740993",A=JSON.rawJSON(f);return!JSON.isRawJSON(A)||JSON.stringify(A)!==f})}),"./node_modules/core-js/internals/new-promise-capability.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/a-callable.js"),f=TypeError,A=function(p){var g,y;this.promise=new p(function(x,w){if(g!==void 0||y!==void 0)throw new f("Bad Promise constructor");g=x,y=w}),this.resolve=d(g),this.reject=d(y)};c.exports.f=function(p){return new A(p)}}),"./node_modules/core-js/internals/not-a-regexp.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/is-regexp.js"),f=TypeError;c.exports=function(A){if(d(A))throw new f("The method doesn't accept regular expressions");return A}}),"./node_modules/core-js/internals/object-assign.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/descriptors.js"),f=l("./node_modules/core-js/internals/function-uncurry-this.js"),A=l("./node_modules/core-js/internals/function-call.js"),p=l("./node_modules/core-js/internals/fails.js"),g=l("./node_modules/core-js/internals/object-keys.js"),y=l("./node_modules/core-js/internals/object-get-own-property-symbols.js"),x=l("./node_modules/core-js/internals/object-property-is-enumerable.js"),w=l("./node_modules/core-js/internals/to-object.js"),E=l("./node_modules/core-js/internals/indexed-object.js"),T=Object.assign,C=Object.defineProperty,N=f([].concat);c.exports=!T||p(function(){if(d&&T({b:1},T(C({},"a",{enumerable:!0,get:function(){C(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var I={},U={},K=Symbol("assign detection"),Y="abcdefghijklmnopqrst";return I[K]=7,Y.split("").forEach(function(re){U[re]=re}),T({},I)[K]!==7||g(T({},U)).join("")!==Y})?function(U,K){for(var Y=w(U),re=arguments.length,se=1,Ae=y.f,we=x.f;re>se;)for(var Ce=E(arguments[se++]),ve=Ae?N(g(Ce),Ae(Ce)):g(Ce),ne=ve.length,ce=0,ae;ne>ce;)ae=ve[ce++],(!d||A(we,Ce,ae))&&(Y[ae]=Ce[ae]);return Y}:T}),"./node_modules/core-js/internals/object-create.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/an-object.js"),f=l("./node_modules/core-js/internals/object-define-properties.js"),A=l("./node_modules/core-js/internals/enum-bug-keys.js"),p=l("./node_modules/core-js/internals/hidden-keys.js"),g=l("./node_modules/core-js/internals/html.js"),y=l("./node_modules/core-js/internals/document-create-element.js"),x=l("./node_modules/core-js/internals/shared-key.js"),w=">",E="<",T="prototype",C="script",N=x("IE_PROTO"),I=function(){},U=function(Ae){return E+C+w+Ae+E+"/"+C+w},K=function(Ae){Ae.write(U("")),Ae.close();var we=Ae.parentWindow.Object;return Ae=null,we},Y=function(){var Ae=y("iframe"),we="java"+C+":",Ce;return Ae.style.display="none",g.appendChild(Ae),Ae.src=String(we),Ce=Ae.contentWindow.document,Ce.open(),Ce.write(U("document.F=Object")),Ce.close(),Ce.F},re,se=function(){try{re=new ActiveXObject("htmlfile")}catch{}se=typeof document<"u"?document.domain&&re?K(re):Y():K(re);for(var Ae=A.length;Ae--;)delete se[T][A[Ae]];return se()};p[N]=!0,c.exports=Object.create||function(we,Ce){var ve;return we!==null?(I[T]=d(we),ve=new I,I[T]=null,ve[N]=we):ve=se(),Ce===void 0?ve:f.f(ve,Ce)}}),"./node_modules/core-js/internals/object-define-properties.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/descriptors.js"),f=l("./node_modules/core-js/internals/v8-prototype-define-bug.js"),A=l("./node_modules/core-js/internals/object-define-property.js"),p=l("./node_modules/core-js/internals/an-object.js"),g=l("./node_modules/core-js/internals/to-indexed-object.js"),y=l("./node_modules/core-js/internals/object-keys.js");u.f=d&&!f?Object.defineProperties:function(w,E){p(w);for(var T=g(E),C=y(E),N=C.length,I=0,U;N>I;)A.f(w,U=C[I++],T[U]);return w}}),"./node_modules/core-js/internals/object-define-property.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/descriptors.js"),f=l("./node_modules/core-js/internals/ie8-dom-define.js"),A=l("./node_modules/core-js/internals/v8-prototype-define-bug.js"),p=l("./node_modules/core-js/internals/an-object.js"),g=l("./node_modules/core-js/internals/to-property-key.js"),y=TypeError,x=Object.defineProperty,w=Object.getOwnPropertyDescriptor,E="enumerable",T="configurable",C="writable";u.f=d?A?function(I,U,K){if(p(I),U=g(U),p(K),typeof I=="function"&&U==="prototype"&&"value"in K&&C in K&&!K[C]){var Y=w(I,U);Y&&Y[C]&&(I[U]=K.value,K={configurable:T in K?K[T]:Y[T],enumerable:E in K?K[E]:Y[E],writable:!1})}return x(I,U,K)}:x:function(I,U,K){if(p(I),U=g(U),p(K),f)try{return x(I,U,K)}catch{}if("get"in K||"set"in K)throw new y("Accessors not supported");return"value"in K&&(I[U]=K.value),I}}),"./node_modules/core-js/internals/object-get-own-property-descriptor.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/descriptors.js"),f=l("./node_modules/core-js/internals/function-call.js"),A=l("./node_modules/core-js/internals/object-property-is-enumerable.js"),p=l("./node_modules/core-js/internals/create-property-descriptor.js"),g=l("./node_modules/core-js/internals/to-indexed-object.js"),y=l("./node_modules/core-js/internals/to-property-key.js"),x=l("./node_modules/core-js/internals/has-own-property.js"),w=l("./node_modules/core-js/internals/ie8-dom-define.js"),E=Object.getOwnPropertyDescriptor;u.f=d?E:function(C,N){if(C=g(C),N=y(N),w)try{return E(C,N)}catch{}if(x(C,N))return p(!f(A.f,C,N),C[N])}}),"./node_modules/core-js/internals/object-get-own-property-names-external.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/classof-raw.js"),f=l("./node_modules/core-js/internals/to-indexed-object.js"),A=l("./node_modules/core-js/internals/object-get-own-property-names.js").f,p=l("./node_modules/core-js/internals/array-slice.js"),g=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],y=function(x){try{return A(x)}catch{return p(g)}};c.exports.f=function(w){return g&&d(w)==="Window"?y(w):A(f(w))}}),"./node_modules/core-js/internals/object-get-own-property-names.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/object-keys-internal.js"),f=l("./node_modules/core-js/internals/enum-bug-keys.js"),A=f.concat("length","prototype");u.f=Object.getOwnPropertyNames||function(g){return d(g,A)}}),"./node_modules/core-js/internals/object-get-own-property-symbols.js":(function(c,u){u.f=Object.getOwnPropertySymbols}),"./node_modules/core-js/internals/object-get-prototype-of.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/has-own-property.js"),f=l("./node_modules/core-js/internals/is-callable.js"),A=l("./node_modules/core-js/internals/to-object.js"),p=l("./node_modules/core-js/internals/shared-key.js"),g=l("./node_modules/core-js/internals/correct-prototype-getter.js"),y=p("IE_PROTO"),x=Object,w=x.prototype;c.exports=g?x.getPrototypeOf:function(E){var T=A(E);if(d(T,y))return T[y];var C=T.constructor;return f(C)&&T instanceof C?C.prototype:T instanceof x?w:null}}),"./node_modules/core-js/internals/object-is-extensible.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/fails.js"),f=l("./node_modules/core-js/internals/is-object.js"),A=l("./node_modules/core-js/internals/classof-raw.js"),p=l("./node_modules/core-js/internals/array-buffer-non-extensible.js"),g=Object.isExtensible,y=d(function(){});c.exports=y||p?function(w){return!f(w)||p&&A(w)==="ArrayBuffer"?!1:g?g(w):!0}:g}),"./node_modules/core-js/internals/object-is-prototype-of.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-uncurry-this.js");c.exports=d({}.isPrototypeOf)}),"./node_modules/core-js/internals/object-keys-internal.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-uncurry-this.js"),f=l("./node_modules/core-js/internals/has-own-property.js"),A=l("./node_modules/core-js/internals/to-indexed-object.js"),p=l("./node_modules/core-js/internals/array-includes.js").indexOf,g=l("./node_modules/core-js/internals/hidden-keys.js"),y=d([].push);c.exports=function(x,w){var E=A(x),T=0,C=[],N;for(N in E)!f(g,N)&&f(E,N)&&y(C,N);for(;w.length>T;)f(E,N=w[T++])&&(~p(C,N)||y(C,N));return C}}),"./node_modules/core-js/internals/object-keys.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/object-keys-internal.js"),f=l("./node_modules/core-js/internals/enum-bug-keys.js");c.exports=Object.keys||function(p){return d(p,f)}}),"./node_modules/core-js/internals/object-property-is-enumerable.js":(function(c,u){var l={}.propertyIsEnumerable,d=Object.getOwnPropertyDescriptor,f=d&&!l.call({1:2},1);u.f=f?function(p){var g=d(this,p);return!!g&&g.enumerable}:l}),"./node_modules/core-js/internals/object-set-prototype-of.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-uncurry-this-accessor.js"),f=l("./node_modules/core-js/internals/is-object.js"),A=l("./node_modules/core-js/internals/require-object-coercible.js"),p=l("./node_modules/core-js/internals/a-possible-prototype.js");c.exports=Object.setPrototypeOf||("__proto__"in{}?(function(){var g=!1,y={},x;try{x=d(Object.prototype,"__proto__","set"),x(y,[]),g=y instanceof Array}catch{}return function(E,T){return A(E),p(T),f(E)&&(g?x(E,T):E.__proto__=T),E}})():void 0)}),"./node_modules/core-js/internals/object-to-string.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/to-string-tag-support.js"),f=l("./node_modules/core-js/internals/classof.js");c.exports=d?{}.toString:function(){return"[object "+f(this)+"]"}}),"./node_modules/core-js/internals/ordinary-to-primitive.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-call.js"),f=l("./node_modules/core-js/internals/is-callable.js"),A=l("./node_modules/core-js/internals/is-object.js"),p=TypeError;c.exports=function(g,y){var x,w;if(y==="string"&&f(x=g.toString)&&!A(w=d(x,g))||f(x=g.valueOf)&&!A(w=d(x,g))||y!=="string"&&f(x=g.toString)&&!A(w=d(x,g)))return w;throw new p("Can't convert object to primitive value")}}),"./node_modules/core-js/internals/own-keys.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/get-built-in.js"),f=l("./node_modules/core-js/internals/function-uncurry-this.js"),A=l("./node_modules/core-js/internals/object-get-own-property-names.js"),p=l("./node_modules/core-js/internals/object-get-own-property-symbols.js"),g=l("./node_modules/core-js/internals/an-object.js"),y=f([].concat);c.exports=d("Reflect","ownKeys")||function(w){var E=A.f(g(w)),T=p.f;return T?y(E,T(w)):E}}),"./node_modules/core-js/internals/parse-json-string.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-uncurry-this.js"),f=l("./node_modules/core-js/internals/has-own-property.js"),A=SyntaxError,p=parseInt,g=String.fromCharCode,y=d("".charAt),x=d("".slice),w=d(/./.exec),E={'\\"':'"',"\\\\":"\\","\\/":"/","\\b":"\b","\\f":"\f","\\n":`
`,"\\r":"\r","\\t":"	"},T=/^[\da-f]{4}$/i,C=/^[\u0000-\u001F]$/;c.exports=function(N,I){for(var U=!0,K="";I<N.length;){var Y=y(N,I);if(Y==="\\"){var re=x(N,I,I+2);if(f(E,re))K+=E[re],I+=2;else if(re==="\\u"){I+=2;var se=x(N,I,I+4);if(!w(T,se))throw new A("Bad Unicode escape at: "+I);K+=g(p(se,16)),I+=4}else throw new A('Unknown escape sequence: "'+re+'"')}else if(Y==='"'){U=!1,I++;break}else{if(w(C,Y))throw new A("Bad control character in string literal at: "+I);K+=Y,I++}}if(U)throw new A("Unterminated string at: "+I);return{value:K,end:I}}}),"./node_modules/core-js/internals/path.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/global-this.js");c.exports=d}),"./node_modules/core-js/internals/perform.js":(function(c){c.exports=function(u){try{return{error:!1,value:u()}}catch(l){return{error:!0,value:l}}}}),"./node_modules/core-js/internals/promise-constructor-detection.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/global-this.js"),f=l("./node_modules/core-js/internals/promise-native-constructor.js"),A=l("./node_modules/core-js/internals/is-callable.js"),p=l("./node_modules/core-js/internals/is-forced.js"),g=l("./node_modules/core-js/internals/inspect-source.js"),y=l("./node_modules/core-js/internals/well-known-symbol.js"),x=l("./node_modules/core-js/internals/environment.js"),w=l("./node_modules/core-js/internals/is-pure.js"),E=l("./node_modules/core-js/internals/environment-v8-version.js"),T=f&&f.prototype,C=y("species"),N=!1,I=A(d.PromiseRejectionEvent),U=p("Promise",function(){var K=g(f),Y=K!==String(f);if(!Y&&E===66||w&&!(T.catch&&T.finally))return!0;if(!E||E<51||!/native code/.test(K)){var re=new f(function(we){we(1)}),se=function(we){we(function(){},function(){})},Ae=re.constructor={};if(Ae[C]=se,N=re.then(function(){})instanceof se,!N)return!0}return!Y&&(x==="BROWSER"||x==="DENO")&&!I});c.exports={CONSTRUCTOR:U,REJECTION_EVENT:I,SUBCLASSING:N}}),"./node_modules/core-js/internals/promise-native-constructor.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/global-this.js");c.exports=d.Promise}),"./node_modules/core-js/internals/promise-resolve.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/an-object.js"),f=l("./node_modules/core-js/internals/is-object.js"),A=l("./node_modules/core-js/internals/new-promise-capability.js");c.exports=function(p,g){if(d(p),f(g)&&g.constructor===p)return g;var y=A.f(p),x=y.resolve;return x(g),y.promise}}),"./node_modules/core-js/internals/promise-statics-incorrect-iteration.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/promise-native-constructor.js"),f=l("./node_modules/core-js/internals/check-correctness-of-iteration.js"),A=l("./node_modules/core-js/internals/promise-constructor-detection.js").CONSTRUCTOR;c.exports=A||!f(function(p){d.all(p).then(void 0,function(){})})}),"./node_modules/core-js/internals/queue.js":(function(c){var u=function(){this.head=null,this.tail=null};u.prototype={add:function(l){var d={item:l,next:null},f=this.tail;f?f.next=d:this.head=d,this.tail=d},get:function(){var l=this.head;if(l){var d=this.head=l.next;return d===null&&(this.tail=null),l.item}}},c.exports=u}),"./node_modules/core-js/internals/regexp-exec-abstract.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-call.js"),f=l("./node_modules/core-js/internals/an-object.js"),A=l("./node_modules/core-js/internals/is-callable.js"),p=l("./node_modules/core-js/internals/classof-raw.js"),g=l("./node_modules/core-js/internals/regexp-exec.js"),y=TypeError;c.exports=function(x,w){var E=x.exec;if(A(E)){var T=d(E,x,w);return T!==null&&f(T),T}if(p(x)==="RegExp")return d(g,x,w);throw new y("RegExp#exec called on incompatible receiver")}}),"./node_modules/core-js/internals/regexp-exec.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-call.js"),f=l("./node_modules/core-js/internals/function-uncurry-this.js"),A=l("./node_modules/core-js/internals/to-string.js"),p=l("./node_modules/core-js/internals/regexp-flags.js"),g=l("./node_modules/core-js/internals/regexp-sticky-helpers.js"),y=l("./node_modules/core-js/internals/shared.js"),x=l("./node_modules/core-js/internals/object-create.js"),w=l("./node_modules/core-js/internals/internal-state.js").get,E=l("./node_modules/core-js/internals/regexp-unsupported-dot-all.js"),T=l("./node_modules/core-js/internals/regexp-unsupported-ncg.js"),C=y("native-string-replace",String.prototype.replace),N=RegExp.prototype.exec,I=N,U=f("".charAt),K=f("".indexOf),Y=f("".replace),re=f("".slice),se=(function(){var ve=/a/,ne=/b*/g;return d(N,ve,"a"),d(N,ne,"a"),ve.lastIndex!==0||ne.lastIndex!==0})(),Ae=g.BROKEN_CARET,we=/()??/.exec("")[1]!==void 0,Ce=se||we||Ae||E||T;Ce&&(I=function(ne){var ce=this,ae=w(ce),De=A(ne),Oe=ae.raw,be,de,xe,je,Me,Re,it;if(Oe)return Oe.lastIndex=ce.lastIndex,be=d(I,Oe,De),ce.lastIndex=Oe.lastIndex,be;var ht=ae.groups,Be=Ae&&ce.sticky,nt=d(p,ce),Ge=ce.source,ft=0,Dt=De;if(Be&&(nt=Y(nt,"y",""),K(nt,"g")===-1&&(nt+="g"),Dt=re(De,ce.lastIndex),ce.lastIndex>0&&(!ce.multiline||ce.multiline&&U(De,ce.lastIndex-1)!==`
`)&&(Ge="(?: "+Ge+")",Dt=" "+Dt,ft++),de=new RegExp("^(?:"+Ge+")",nt)),we&&(de=new RegExp("^"+Ge+"$(?!\\s)",nt)),se&&(xe=ce.lastIndex),je=d(N,Be?de:ce,Dt),Be?je?(je.input=re(je.input,ft),je[0]=re(je[0],ft),je.index=ce.lastIndex,ce.lastIndex+=je[0].length):ce.lastIndex=0:se&&je&&(ce.lastIndex=ce.global?je.index+je[0].length:xe),we&&je&&je.length>1&&d(C,je[0],de,function(){for(Me=1;Me<arguments.length-2;Me++)arguments[Me]===void 0&&(je[Me]=void 0)}),je&&ht)for(je.groups=Re=x(null),Me=0;Me<ht.length;Me++)it=ht[Me],Re[it[0]]=je[it[1]];return je}),c.exports=I}),"./node_modules/core-js/internals/regexp-flags-detection.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/global-this.js"),f=l("./node_modules/core-js/internals/fails.js"),A=d.RegExp,p=!f(function(){var g=!0;try{A(".","d")}catch{g=!1}var y={},x="",w=g?"dgimsy":"gimsy",E=function(I,U){Object.defineProperty(y,I,{get:function(){return x+=U,!0}})},T={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};g&&(T.hasIndices="d");for(var C in T)E(C,T[C]);var N=Object.getOwnPropertyDescriptor(A.prototype,"flags").get.call(y);return N!==w||x!==w});c.exports={correct:p}}),"./node_modules/core-js/internals/regexp-flags.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/an-object.js");c.exports=function(){var f=d(this),A="";return f.hasIndices&&(A+="d"),f.global&&(A+="g"),f.ignoreCase&&(A+="i"),f.multiline&&(A+="m"),f.dotAll&&(A+="s"),f.unicode&&(A+="u"),f.unicodeSets&&(A+="v"),f.sticky&&(A+="y"),A}}),"./node_modules/core-js/internals/regexp-get-flags.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-call.js"),f=l("./node_modules/core-js/internals/has-own-property.js"),A=l("./node_modules/core-js/internals/object-is-prototype-of.js"),p=l("./node_modules/core-js/internals/regexp-flags-detection.js"),g=l("./node_modules/core-js/internals/regexp-flags.js"),y=RegExp.prototype;c.exports=p.correct?function(x){return x.flags}:function(x){return!p.correct&&A(y,x)&&!f(x,"flags")?d(g,x):x.flags}}),"./node_modules/core-js/internals/regexp-sticky-helpers.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/fails.js"),f=l("./node_modules/core-js/internals/global-this.js"),A=f.RegExp,p=d(function(){var x=A("a","y");return x.lastIndex=2,x.exec("abcd")!==null}),g=p||d(function(){return!A("a","y").sticky}),y=p||d(function(){var x=A("^r","gy");return x.lastIndex=2,x.exec("str")!==null});c.exports={BROKEN_CARET:y,MISSED_STICKY:g,UNSUPPORTED_Y:p}}),"./node_modules/core-js/internals/regexp-unsupported-dot-all.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/fails.js"),f=l("./node_modules/core-js/internals/global-this.js"),A=f.RegExp;c.exports=d(function(){var p=A(".","s");return!(p.dotAll&&p.test(`
`)&&p.flags==="s")})}),"./node_modules/core-js/internals/regexp-unsupported-ncg.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/fails.js"),f=l("./node_modules/core-js/internals/global-this.js"),A=f.RegExp;c.exports=d(function(){var p=A("(?<a>b)","g");return p.exec("b").groups.a!=="b"||"b".replace(p,"$<a>c")!=="bc"})}),"./node_modules/core-js/internals/require-object-coercible.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/is-null-or-undefined.js"),f=TypeError;c.exports=function(A){if(d(A))throw new f("Can't call method on "+A);return A}}),"./node_modules/core-js/internals/safe-get-built-in.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/global-this.js"),f=l("./node_modules/core-js/internals/descriptors.js"),A=Object.getOwnPropertyDescriptor;c.exports=function(p){if(!f)return d[p];var g=A(d,p);return g&&g.value}}),"./node_modules/core-js/internals/schedulers-fix.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/global-this.js"),f=l("./node_modules/core-js/internals/function-apply.js"),A=l("./node_modules/core-js/internals/is-callable.js"),p=l("./node_modules/core-js/internals/environment.js"),g=l("./node_modules/core-js/internals/environment-user-agent.js"),y=l("./node_modules/core-js/internals/array-slice.js"),x=l("./node_modules/core-js/internals/validate-arguments-length.js"),w=d.Function,E=/MSIE .\./.test(g)||p==="BUN"&&(function(){var T=d.Bun.version.split(".");return T.length<3||T[0]==="0"&&(T[1]<3||T[1]==="3"&&T[2]==="0")})();c.exports=function(T,C){var N=C?2:1;return E?function(I,U){var K=x(arguments.length,1)>N,Y=A(I)?I:w(I),re=K?y(arguments,N):[],se=K?function(){f(Y,this,re)}:Y;return C?T(se,U):T(se)}:T}}),"./node_modules/core-js/internals/set-clone.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/set-helpers.js"),f=l("./node_modules/core-js/internals/set-iterate.js"),A=d.Set,p=d.add;c.exports=function(g){var y=new A;return f(g,function(x){p(y,x)}),y}}),"./node_modules/core-js/internals/set-difference.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/a-set.js"),f=l("./node_modules/core-js/internals/set-helpers.js"),A=l("./node_modules/core-js/internals/set-clone.js"),p=l("./node_modules/core-js/internals/set-size.js"),g=l("./node_modules/core-js/internals/get-set-record.js"),y=l("./node_modules/core-js/internals/set-iterate.js"),x=l("./node_modules/core-js/internals/iterate-simple.js"),w=f.has,E=f.remove;c.exports=function(C){var N=d(this),I=g(C),U=A(N);return p(N)<=I.size?y(N,function(K){I.includes(K)&&E(U,K)}):x(I.getIterator(),function(K){w(U,K)&&E(U,K)}),U}}),"./node_modules/core-js/internals/set-helpers.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-uncurry-this.js"),f=Set.prototype;c.exports={Set,add:d(f.add),has:d(f.has),remove:d(f.delete),proto:f}}),"./node_modules/core-js/internals/set-intersection.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/a-set.js"),f=l("./node_modules/core-js/internals/set-helpers.js"),A=l("./node_modules/core-js/internals/set-size.js"),p=l("./node_modules/core-js/internals/get-set-record.js"),g=l("./node_modules/core-js/internals/set-iterate.js"),y=l("./node_modules/core-js/internals/iterate-simple.js"),x=f.Set,w=f.add,E=f.has;c.exports=function(C){var N=d(this),I=p(C),U=new x;return A(N)>I.size?y(I.getIterator(),function(K){E(N,K)&&w(U,K)}):g(N,function(K){I.includes(K)&&w(U,K)}),U}}),"./node_modules/core-js/internals/set-is-disjoint-from.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/a-set.js"),f=l("./node_modules/core-js/internals/set-helpers.js").has,A=l("./node_modules/core-js/internals/set-size.js"),p=l("./node_modules/core-js/internals/get-set-record.js"),g=l("./node_modules/core-js/internals/set-iterate.js"),y=l("./node_modules/core-js/internals/iterate-simple.js"),x=l("./node_modules/core-js/internals/iterator-close.js");c.exports=function(E){var T=d(this),C=p(E);if(A(T)<=C.size)return g(T,function(I){if(C.includes(I))return!1},!0)!==!1;var N=C.getIterator();return y(N,function(I){if(f(T,I))return x(N,"normal",!1)})!==!1}}),"./node_modules/core-js/internals/set-is-subset-of.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/a-set.js"),f=l("./node_modules/core-js/internals/set-size.js"),A=l("./node_modules/core-js/internals/set-iterate.js"),p=l("./node_modules/core-js/internals/get-set-record.js");c.exports=function(y){var x=d(this),w=p(y);return f(x)>w.size?!1:A(x,function(E){if(!w.includes(E))return!1},!0)!==!1}}),"./node_modules/core-js/internals/set-is-superset-of.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/a-set.js"),f=l("./node_modules/core-js/internals/set-helpers.js").has,A=l("./node_modules/core-js/internals/set-size.js"),p=l("./node_modules/core-js/internals/get-set-record.js"),g=l("./node_modules/core-js/internals/iterate-simple.js"),y=l("./node_modules/core-js/internals/iterator-close.js");c.exports=function(w){var E=d(this),T=p(w);if(A(E)<T.size)return!1;var C=T.getIterator();return g(C,function(N){if(!f(E,N))return y(C,"normal",!1)})!==!1}}),"./node_modules/core-js/internals/set-iterate.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-uncurry-this.js"),f=l("./node_modules/core-js/internals/iterate-simple.js"),A=l("./node_modules/core-js/internals/set-helpers.js"),p=A.Set,g=A.proto,y=d(g.forEach),x=d(g.keys),w=x(new p).next;c.exports=function(E,T,C){return C?f({iterator:x(E),next:w},T):y(E,T)}}),"./node_modules/core-js/internals/set-size.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-uncurry-this-accessor.js"),f=l("./node_modules/core-js/internals/set-helpers.js");c.exports=d(f.proto,"size","get")||function(A){return A.size}}),"./node_modules/core-js/internals/set-species.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/get-built-in.js"),f=l("./node_modules/core-js/internals/define-built-in-accessor.js"),A=l("./node_modules/core-js/internals/well-known-symbol.js"),p=l("./node_modules/core-js/internals/descriptors.js"),g=A("species");c.exports=function(y){var x=d(y);p&&x&&!x[g]&&f(x,g,{configurable:!0,get:function(){return this}})}}),"./node_modules/core-js/internals/set-symmetric-difference.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/a-set.js"),f=l("./node_modules/core-js/internals/set-helpers.js"),A=l("./node_modules/core-js/internals/set-clone.js"),p=l("./node_modules/core-js/internals/get-set-record.js"),g=l("./node_modules/core-js/internals/iterate-simple.js"),y=f.add,x=f.has,w=f.remove;c.exports=function(T){var C=d(this),N=p(T).getIterator(),I=A(C);return g(N,function(U){x(C,U)?w(I,U):y(I,U)}),I}}),"./node_modules/core-js/internals/set-to-string-tag.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/object-define-property.js").f,f=l("./node_modules/core-js/internals/has-own-property.js"),A=l("./node_modules/core-js/internals/well-known-symbol.js"),p=A("toStringTag");c.exports=function(g,y,x){g&&!x&&(g=g.prototype),g&&!f(g,p)&&d(g,p,{configurable:!0,value:y})}}),"./node_modules/core-js/internals/set-union.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/a-set.js"),f=l("./node_modules/core-js/internals/set-helpers.js").add,A=l("./node_modules/core-js/internals/set-clone.js"),p=l("./node_modules/core-js/internals/get-set-record.js"),g=l("./node_modules/core-js/internals/iterate-simple.js");c.exports=function(x){var w=d(this),E=p(x).getIterator(),T=A(w);return g(E,function(C){f(T,C)}),T}}),"./node_modules/core-js/internals/shared-key.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/shared.js"),f=l("./node_modules/core-js/internals/uid.js"),A=d("keys");c.exports=function(p){return A[p]||(A[p]=f(p))}}),"./node_modules/core-js/internals/shared-store.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/is-pure.js"),f=l("./node_modules/core-js/internals/global-this.js"),A=l("./node_modules/core-js/internals/define-global-property.js"),p="__core-js_shared__",g=c.exports=f[p]||A(p,{});(g.versions||(g.versions=[])).push({version:"3.47.0",mode:d?"pure":"global",copyright:" 2014-2025 Denis Pushkarev (zloirock.ru), 2025 CoreJS Company (core-js.io)",license:"https://github.com/zloirock/core-js/blob/v3.47.0/LICENSE",source:"https://github.com/zloirock/core-js"})}),"./node_modules/core-js/internals/shared.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/shared-store.js");c.exports=function(f,A){return d[f]||(d[f]=A||{})}}),"./node_modules/core-js/internals/species-constructor.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/an-object.js"),f=l("./node_modules/core-js/internals/a-constructor.js"),A=l("./node_modules/core-js/internals/is-null-or-undefined.js"),p=l("./node_modules/core-js/internals/well-known-symbol.js"),g=p("species");c.exports=function(y,x){var w=d(y).constructor,E;return w===void 0||A(E=d(w)[g])?x:f(E)}}),"./node_modules/core-js/internals/string-html-forced.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/fails.js");c.exports=function(f){return d(function(){var A=""[f]('"');return A!==A.toLowerCase()||A.split('"').length>3})}}),"./node_modules/core-js/internals/string-multibyte.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-uncurry-this.js"),f=l("./node_modules/core-js/internals/to-integer-or-infinity.js"),A=l("./node_modules/core-js/internals/to-string.js"),p=l("./node_modules/core-js/internals/require-object-coercible.js"),g=d("".charAt),y=d("".charCodeAt),x=d("".slice),w=function(E){return function(T,C){var N=A(p(T)),I=f(C),U=N.length,K,Y;return I<0||I>=U?E?"":void 0:(K=y(N,I),K<55296||K>56319||I+1===U||(Y=y(N,I+1))<56320||Y>57343?E?g(N,I):K:E?x(N,I,I+2):(K-55296<<10)+(Y-56320)+65536)}};c.exports={codeAt:w(!1),charAt:w(!0)}}),"./node_modules/core-js/internals/string-trim-forced.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-name.js").PROPER,f=l("./node_modules/core-js/internals/fails.js"),A=l("./node_modules/core-js/internals/whitespaces.js"),p="";c.exports=function(g){return f(function(){return!!A[g]()||p[g]()!==p||d&&A[g].name!==g})}}),"./node_modules/core-js/internals/string-trim.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-uncurry-this.js"),f=l("./node_modules/core-js/internals/require-object-coercible.js"),A=l("./node_modules/core-js/internals/to-string.js"),p=l("./node_modules/core-js/internals/whitespaces.js"),g=d("".replace),y=RegExp("^["+p+"]+"),x=RegExp("(^|[^"+p+"])["+p+"]+$"),w=function(E){return function(T){var C=A(f(T));return E&1&&(C=g(C,y,"")),E&2&&(C=g(C,x,"$1")),C}};c.exports={start:w(1),end:w(2),trim:w(3)}}),"./node_modules/core-js/internals/symbol-constructor-detection.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/environment-v8-version.js"),f=l("./node_modules/core-js/internals/fails.js"),A=l("./node_modules/core-js/internals/global-this.js"),p=A.String;c.exports=!!Object.getOwnPropertySymbols&&!f(function(){var g=Symbol("symbol detection");return!p(g)||!(Object(g)instanceof Symbol)||!Symbol.sham&&d&&d<41})}),"./node_modules/core-js/internals/symbol-define-to-primitive.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-call.js"),f=l("./node_modules/core-js/internals/get-built-in.js"),A=l("./node_modules/core-js/internals/well-known-symbol.js"),p=l("./node_modules/core-js/internals/define-built-in.js");c.exports=function(){var g=f("Symbol"),y=g&&g.prototype,x=y&&y.valueOf,w=A("toPrimitive");y&&!y[w]&&p(y,w,function(E){return d(x,this)},{arity:1})}}),"./node_modules/core-js/internals/symbol-registry-detection.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/symbol-constructor-detection.js");c.exports=d&&!!Symbol.for&&!!Symbol.keyFor}),"./node_modules/core-js/internals/task.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/global-this.js"),f=l("./node_modules/core-js/internals/function-apply.js"),A=l("./node_modules/core-js/internals/function-bind-context.js"),p=l("./node_modules/core-js/internals/is-callable.js"),g=l("./node_modules/core-js/internals/has-own-property.js"),y=l("./node_modules/core-js/internals/fails.js"),x=l("./node_modules/core-js/internals/html.js"),w=l("./node_modules/core-js/internals/array-slice.js"),E=l("./node_modules/core-js/internals/document-create-element.js"),T=l("./node_modules/core-js/internals/validate-arguments-length.js"),C=l("./node_modules/core-js/internals/environment-is-ios.js"),N=l("./node_modules/core-js/internals/environment-is-node.js"),I=d.setImmediate,U=d.clearImmediate,K=d.process,Y=d.Dispatch,re=d.Function,se=d.MessageChannel,Ae=d.String,we=0,Ce={},ve="onreadystatechange",ne,ce,ae,De;y(function(){ne=d.location});var Oe=function(je){if(g(Ce,je)){var Me=Ce[je];delete Ce[je],Me()}},be=function(je){return function(){Oe(je)}},de=function(je){Oe(je.data)},xe=function(je){d.postMessage(Ae(je),ne.protocol+"//"+ne.host)};(!I||!U)&&(I=function(Me){T(arguments.length,1);var Re=p(Me)?Me:re(Me),it=w(arguments,1);return Ce[++we]=function(){f(Re,void 0,it)},ce(we),we},U=function(Me){delete Ce[Me]},N?ce=function(je){K.nextTick(be(je))}:Y&&Y.now?ce=function(je){Y.now(be(je))}:se&&!C?(ae=new se,De=ae.port2,ae.port1.onmessage=de,ce=A(De.postMessage,De)):d.addEventListener&&p(d.postMessage)&&!d.importScripts&&ne&&ne.protocol!=="file:"&&!y(xe)?(ce=xe,d.addEventListener("message",de,!1)):ve in E("script")?ce=function(je){x.appendChild(E("script"))[ve]=function(){x.removeChild(this),Oe(je)}}:ce=function(je){setTimeout(be(je),0)}),c.exports={set:I,clear:U}}),"./node_modules/core-js/internals/this-number-value.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-uncurry-this.js");c.exports=d(1.1.valueOf)}),"./node_modules/core-js/internals/to-absolute-index.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/to-integer-or-infinity.js"),f=Math.max,A=Math.min;c.exports=function(p,g){var y=d(p);return y<0?f(y+g,0):A(y,g)}}),"./node_modules/core-js/internals/to-indexed-object.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/indexed-object.js"),f=l("./node_modules/core-js/internals/require-object-coercible.js");c.exports=function(A){return d(f(A))}}),"./node_modules/core-js/internals/to-integer-or-infinity.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/math-trunc.js");c.exports=function(f){var A=+f;return A!==A||A===0?0:d(A)}}),"./node_modules/core-js/internals/to-length.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/to-integer-or-infinity.js"),f=Math.min;c.exports=function(A){var p=d(A);return p>0?f(p,9007199254740991):0}}),"./node_modules/core-js/internals/to-object.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/require-object-coercible.js"),f=Object;c.exports=function(A){return f(d(A))}}),"./node_modules/core-js/internals/to-primitive.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-call.js"),f=l("./node_modules/core-js/internals/is-object.js"),A=l("./node_modules/core-js/internals/is-symbol.js"),p=l("./node_modules/core-js/internals/get-method.js"),g=l("./node_modules/core-js/internals/ordinary-to-primitive.js"),y=l("./node_modules/core-js/internals/well-known-symbol.js"),x=TypeError,w=y("toPrimitive");c.exports=function(E,T){if(!f(E)||A(E))return E;var C=p(E,w),N;if(C){if(T===void 0&&(T="default"),N=d(C,E,T),!f(N)||A(N))return N;throw new x("Can't convert object to primitive value")}return T===void 0&&(T="number"),g(E,T)}}),"./node_modules/core-js/internals/to-property-key.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/to-primitive.js"),f=l("./node_modules/core-js/internals/is-symbol.js");c.exports=function(A){var p=d(A,"string");return f(p)?p:p+""}}),"./node_modules/core-js/internals/to-set-like.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/get-built-in.js"),f=l("./node_modules/core-js/internals/is-callable.js"),A=l("./node_modules/core-js/internals/is-iterable.js"),p=l("./node_modules/core-js/internals/is-object.js"),g=d("Set"),y=function(x){return p(x)&&typeof x.size=="number"&&f(x.has)&&f(x.keys)};c.exports=function(x){return y(x)?x:A(x)?new g(x):x}}),"./node_modules/core-js/internals/to-string-tag-support.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/well-known-symbol.js"),f=d("toStringTag"),A={};A[f]="z",c.exports=String(A)==="[object z]"}),"./node_modules/core-js/internals/to-string.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/classof.js"),f=String;c.exports=function(A){if(d(A)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return f(A)}}),"./node_modules/core-js/internals/try-to-string.js":(function(c){var u=String;c.exports=function(l){try{return u(l)}catch{return"Object"}}}),"./node_modules/core-js/internals/uid.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-uncurry-this.js"),f=0,A=Math.random(),p=d(1.1.toString);c.exports=function(g){return"Symbol("+(g===void 0?"":g)+")_"+p(++f+A,36)}}),"./node_modules/core-js/internals/use-symbol-as-uid.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/symbol-constructor-detection.js");c.exports=d&&!Symbol.sham&&typeof Symbol.iterator=="symbol"}),"./node_modules/core-js/internals/v8-prototype-define-bug.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/descriptors.js"),f=l("./node_modules/core-js/internals/fails.js");c.exports=d&&f(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42})}),"./node_modules/core-js/internals/validate-arguments-length.js":(function(c){var u=TypeError;c.exports=function(l,d){if(l<d)throw new u("Not enough arguments");return l}}),"./node_modules/core-js/internals/weak-map-basic-detection.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/global-this.js"),f=l("./node_modules/core-js/internals/is-callable.js"),A=d.WeakMap;c.exports=f(A)&&/native code/.test(String(A))}),"./node_modules/core-js/internals/well-known-symbol-define.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/path.js"),f=l("./node_modules/core-js/internals/has-own-property.js"),A=l("./node_modules/core-js/internals/well-known-symbol-wrapped.js"),p=l("./node_modules/core-js/internals/object-define-property.js").f;c.exports=function(g){var y=d.Symbol||(d.Symbol={});f(y,g)||p(y,g,{value:A.f(g)})}}),"./node_modules/core-js/internals/well-known-symbol-wrapped.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/well-known-symbol.js");u.f=d}),"./node_modules/core-js/internals/well-known-symbol.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/global-this.js"),f=l("./node_modules/core-js/internals/shared.js"),A=l("./node_modules/core-js/internals/has-own-property.js"),p=l("./node_modules/core-js/internals/uid.js"),g=l("./node_modules/core-js/internals/symbol-constructor-detection.js"),y=l("./node_modules/core-js/internals/use-symbol-as-uid.js"),x=d.Symbol,w=f("wks"),E=y?x.for||x:x&&x.withoutSetter||p;c.exports=function(T){return A(w,T)||(w[T]=g&&A(x,T)?x[T]:E("Symbol."+T)),w[T]}}),"./node_modules/core-js/internals/whitespaces.js":(function(c){c.exports=`	
\v\f\r \u2028\u2029\uFEFF`}),"./node_modules/core-js/modules/es.array.concat.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/fails.js"),A=l("./node_modules/core-js/internals/is-array.js"),p=l("./node_modules/core-js/internals/is-object.js"),g=l("./node_modules/core-js/internals/to-object.js"),y=l("./node_modules/core-js/internals/length-of-array-like.js"),x=l("./node_modules/core-js/internals/does-not-exceed-safe-integer.js"),w=l("./node_modules/core-js/internals/create-property.js"),E=l("./node_modules/core-js/internals/array-species-create.js"),T=l("./node_modules/core-js/internals/array-method-has-species-support.js"),C=l("./node_modules/core-js/internals/well-known-symbol.js"),N=l("./node_modules/core-js/internals/environment-v8-version.js"),I=C("isConcatSpreadable"),U=N>=51||!f(function(){var re=[];return re[I]=!1,re.concat()[0]!==re}),K=function(re){if(!p(re))return!1;var se=re[I];return se!==void 0?!!se:A(re)},Y=!U||!T("concat");d({target:"Array",proto:!0,arity:1,forced:Y},{concat:function(se){var Ae=g(this),we=E(Ae,0),Ce=0,ve,ne,ce,ae,De;for(ve=-1,ce=arguments.length;ve<ce;ve++)if(De=ve===-1?Ae:arguments[ve],K(De))for(ae=y(De),x(Ce+ae),ne=0;ne<ae;ne++,Ce++)ne in De&&w(we,Ce,De[ne]);else x(Ce+1),w(we,Ce++,De);return we.length=Ce,we}})}),"./node_modules/core-js/modules/es.array.from.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/array-from.js"),A=l("./node_modules/core-js/internals/check-correctness-of-iteration.js"),p=!A(function(g){Array.from(g)});d({target:"Array",stat:!0,forced:p},{from:f})}),"./node_modules/core-js/modules/es.array.index-of.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/function-uncurry-this-clause.js"),A=l("./node_modules/core-js/internals/array-includes.js").indexOf,p=l("./node_modules/core-js/internals/array-method-is-strict.js"),g=f([].indexOf),y=!!g&&1/g([1],1,-0)<0,x=y||!p("indexOf");d({target:"Array",proto:!0,forced:x},{indexOf:function(E){var T=arguments.length>1?arguments[1]:void 0;return y?g(this,E,T)||0:A(this,E,T)}})}),"./node_modules/core-js/modules/es.array.iterator.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/to-indexed-object.js"),f=l("./node_modules/core-js/internals/add-to-unscopables.js"),A=l("./node_modules/core-js/internals/iterators.js"),p=l("./node_modules/core-js/internals/internal-state.js"),g=l("./node_modules/core-js/internals/object-define-property.js").f,y=l("./node_modules/core-js/internals/iterator-define.js"),x=l("./node_modules/core-js/internals/create-iter-result-object.js"),w=l("./node_modules/core-js/internals/is-pure.js"),E=l("./node_modules/core-js/internals/descriptors.js"),T="Array Iterator",C=p.set,N=p.getterFor(T);c.exports=y(Array,"Array",function(U,K){C(this,{type:T,target:d(U),index:0,kind:K})},function(){var U=N(this),K=U.target,Y=U.index++;if(!K||Y>=K.length)return U.target=null,x(void 0,!0);switch(U.kind){case"keys":return x(Y,!1);case"values":return x(K[Y],!1)}return x([Y,K[Y]],!1)},"values");var I=A.Arguments=A.Array;if(f("keys"),f("values"),f("entries"),!w&&E&&I.name!=="values")try{g(I,"name",{value:"values"})}catch{}}),"./node_modules/core-js/modules/es.array.join.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/function-uncurry-this.js"),A=l("./node_modules/core-js/internals/indexed-object.js"),p=l("./node_modules/core-js/internals/to-indexed-object.js"),g=l("./node_modules/core-js/internals/array-method-is-strict.js"),y=f([].join),x=A!==Object,w=x||!g("join",",");d({target:"Array",proto:!0,forced:w},{join:function(T){return y(p(this),T===void 0?",":T)}})}),"./node_modules/core-js/modules/es.array.map.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/array-iteration.js").map,A=l("./node_modules/core-js/internals/array-method-has-species-support.js"),p=A("map");d({target:"Array",proto:!0,forced:!p},{map:function(y){return f(this,y,arguments.length>1?arguments[1]:void 0)}})}),"./node_modules/core-js/modules/es.array.reduce.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/array-reduce.js").left,A=l("./node_modules/core-js/internals/array-method-is-strict.js"),p=l("./node_modules/core-js/internals/environment-v8-version.js"),g=l("./node_modules/core-js/internals/environment-is-node.js"),y=!g&&p>79&&p<83,x=y||!A("reduce");d({target:"Array",proto:!0,forced:x},{reduce:function(E){var T=arguments.length;return f(this,E,T,T>1?arguments[1]:void 0)}})}),"./node_modules/core-js/modules/es.array.reverse.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/function-uncurry-this.js"),A=l("./node_modules/core-js/internals/is-array.js"),p=f([].reverse),g=[1,2];d({target:"Array",proto:!0,forced:String(g)===String(g.reverse())},{reverse:function(){return A(this)&&(this.length=this.length),p(this)}})}),"./node_modules/core-js/modules/es.array.slice.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/is-array.js"),A=l("./node_modules/core-js/internals/is-constructor.js"),p=l("./node_modules/core-js/internals/is-object.js"),g=l("./node_modules/core-js/internals/to-absolute-index.js"),y=l("./node_modules/core-js/internals/length-of-array-like.js"),x=l("./node_modules/core-js/internals/to-indexed-object.js"),w=l("./node_modules/core-js/internals/create-property.js"),E=l("./node_modules/core-js/internals/well-known-symbol.js"),T=l("./node_modules/core-js/internals/array-method-has-species-support.js"),C=l("./node_modules/core-js/internals/array-slice.js"),N=T("slice"),I=E("species"),U=Array,K=Math.max;d({target:"Array",proto:!0,forced:!N},{slice:function(re,se){var Ae=x(this),we=y(Ae),Ce=g(re,we),ve=g(se===void 0?we:se,we),ne,ce,ae;if(f(Ae)&&(ne=Ae.constructor,A(ne)&&(ne===U||f(ne.prototype))?ne=void 0:p(ne)&&(ne=ne[I],ne===null&&(ne=void 0)),ne===U||ne===void 0))return C(Ae,Ce,ve);for(ce=new(ne===void 0?U:ne)(K(ve-Ce,0)),ae=0;Ce<ve;Ce++,ae++)Ce in Ae&&w(ce,ae,Ae[Ce]);return ce.length=ae,ce}})}),"./node_modules/core-js/modules/es.function.name.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/descriptors.js"),f=l("./node_modules/core-js/internals/function-name.js").EXISTS,A=l("./node_modules/core-js/internals/function-uncurry-this.js"),p=l("./node_modules/core-js/internals/define-built-in-accessor.js"),g=Function.prototype,y=A(g.toString),x=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,w=A(x.exec),E="name";d&&!f&&p(g,E,{configurable:!0,get:function(){try{return w(x,y(this))[1]}catch{return""}}})}),"./node_modules/core-js/modules/es.iterator.constructor.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/global-this.js"),A=l("./node_modules/core-js/internals/an-instance.js"),p=l("./node_modules/core-js/internals/an-object.js"),g=l("./node_modules/core-js/internals/is-callable.js"),y=l("./node_modules/core-js/internals/object-get-prototype-of.js"),x=l("./node_modules/core-js/internals/define-built-in-accessor.js"),w=l("./node_modules/core-js/internals/create-property.js"),E=l("./node_modules/core-js/internals/fails.js"),T=l("./node_modules/core-js/internals/has-own-property.js"),C=l("./node_modules/core-js/internals/well-known-symbol.js"),N=l("./node_modules/core-js/internals/iterators-core.js").IteratorPrototype,I=l("./node_modules/core-js/internals/descriptors.js"),U=l("./node_modules/core-js/internals/is-pure.js"),K="constructor",Y="Iterator",re=C("toStringTag"),se=TypeError,Ae=f[Y],we=U||!g(Ae)||Ae.prototype!==N||!E(function(){Ae({})}),Ce=function(){if(A(this,N),y(this)===N)throw new se("Abstract class Iterator not directly constructable")},ve=function(ne,ce){I?x(N,ne,{configurable:!0,get:function(){return ce},set:function(ae){if(p(this),this===N)throw new se("You can't redefine this property");T(this,ne)?this[ne]=ae:w(this,ne,ae)}}):N[ne]=ce};T(N,re)||ve(re,Y),(we||!T(N,K)||N[K]===Object)&&ve(K,Ce),Ce.prototype=N,d({global:!0,constructor:!0,forced:we},{Iterator:Ce})}),"./node_modules/core-js/modules/es.iterator.for-each.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/function-call.js"),A=l("./node_modules/core-js/internals/iterate.js"),p=l("./node_modules/core-js/internals/a-callable.js"),g=l("./node_modules/core-js/internals/an-object.js"),y=l("./node_modules/core-js/internals/get-iterator-direct.js"),x=l("./node_modules/core-js/internals/iterator-close.js"),w=l("./node_modules/core-js/internals/iterator-helper-without-closing-on-early-error.js"),E=w("forEach",TypeError);d({target:"Iterator",proto:!0,real:!0,forced:E},{forEach:function(C){g(this);try{p(C)}catch(U){x(this,"throw",U)}if(E)return f(E,this,C);var N=y(this),I=0;A(N,function(U){C(U,I++)},{IS_RECORD:!0})}})}),"./node_modules/core-js/modules/es.iterator.map.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/function-call.js"),A=l("./node_modules/core-js/internals/a-callable.js"),p=l("./node_modules/core-js/internals/an-object.js"),g=l("./node_modules/core-js/internals/get-iterator-direct.js"),y=l("./node_modules/core-js/internals/iterator-create-proxy.js"),x=l("./node_modules/core-js/internals/call-with-safe-iteration-closing.js"),w=l("./node_modules/core-js/internals/iterator-close.js"),E=l("./node_modules/core-js/internals/iterator-helper-throws-on-invalid-iterator.js"),T=l("./node_modules/core-js/internals/iterator-helper-without-closing-on-early-error.js"),C=l("./node_modules/core-js/internals/is-pure.js"),N=!C&&!E("map",function(){}),I=!C&&!N&&T("map",TypeError),U=C||N||I,K=y(function(){var Y=this.iterator,re=p(f(this.next,Y)),se=this.done=!!re.done;if(!se)return x(Y,this.mapper,[re.value,this.counter++],!0)});d({target:"Iterator",proto:!0,real:!0,forced:U},{map:function(re){p(this);try{A(re)}catch(se){w(this,"throw",se)}return I?f(I,this,re):new K(g(this),{mapper:re})}})}),"./node_modules/core-js/modules/es.json.stringify.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/get-built-in.js"),A=l("./node_modules/core-js/internals/function-apply.js"),p=l("./node_modules/core-js/internals/function-call.js"),g=l("./node_modules/core-js/internals/function-uncurry-this.js"),y=l("./node_modules/core-js/internals/fails.js"),x=l("./node_modules/core-js/internals/is-array.js"),w=l("./node_modules/core-js/internals/is-callable.js"),E=l("./node_modules/core-js/internals/is-raw-json.js"),T=l("./node_modules/core-js/internals/is-symbol.js"),C=l("./node_modules/core-js/internals/classof-raw.js"),N=l("./node_modules/core-js/internals/to-string.js"),I=l("./node_modules/core-js/internals/array-slice.js"),U=l("./node_modules/core-js/internals/parse-json-string.js"),K=l("./node_modules/core-js/internals/uid.js"),Y=l("./node_modules/core-js/internals/symbol-constructor-detection.js"),re=l("./node_modules/core-js/internals/native-raw-json.js"),se=String,Ae=f("JSON","stringify"),we=g(/./.exec),Ce=g("".charAt),ve=g("".charCodeAt),ne=g("".replace),ce=g("".slice),ae=g([].push),De=g(1.1.toString),Oe=/[\uD800-\uDFFF]/g,be=/^[\uD800-\uDBFF]$/,de=/^[\uDC00-\uDFFF]$/,xe=K(),je=xe.length,Me=!Y||y(function(){var nt=f("Symbol")("stringify detection");return Ae([nt])!=="[null]"||Ae({a:nt})!=="{}"||Ae(Object(nt))!=="{}"}),Re=y(function(){return Ae("\uDF06\uD834")!=='"\\udf06\\ud834"'||Ae("\uDEAD")!=='"\\udead"'}),it=Me?function(nt,Ge){var ft=I(arguments),Dt=Be(Ge);if(!(!w(Dt)&&(nt===void 0||T(nt))))return ft[1]=function(rt,kt){if(w(Dt)&&(kt=p(Dt,this,se(rt),kt)),!T(kt))return kt},A(Ae,null,ft)}:Ae,ht=function(nt,Ge,ft){var Dt=Ce(ft,Ge-1),rt=Ce(ft,Ge+1);return we(be,nt)&&!we(de,rt)||we(de,nt)&&!we(be,Dt)?"\\u"+De(ve(nt,0),16):nt},Be=function(nt){if(w(nt))return nt;if(x(nt)){for(var Ge=nt.length,ft=[],Dt=0;Dt<Ge;Dt++){var rt=nt[Dt];typeof rt=="string"?ae(ft,rt):(typeof rt=="number"||C(rt)==="Number"||C(rt)==="String")&&ae(ft,N(rt))}var kt=ft.length,_t=!0;return function(wt,Tt){if(_t)return _t=!1,Tt;if(x(this))return Tt;for(var Er=0;Er<kt;Er++)if(ft[Er]===wt)return Tt}}};Ae&&d({target:"JSON",stat:!0,arity:3,forced:Me||Re||!re},{stringify:function(Ge,ft,Dt){var rt=Be(ft),kt=[],_t=it(Ge,function(Mn,dn){var pn=w(rt)?p(rt,this,se(Mn),dn):dn;return!re&&E(pn)?xe+(ae(kt,pn.rawJSON)-1):pn},Dt);if(typeof _t!="string"||(Re&&(_t=ne(_t,Oe,ht)),re))return _t;for(var wt="",Tt=_t.length,Er=0;Er<Tt;Er++){var pr=Ce(_t,Er);if(pr==='"'){var Xr=U(_t,++Er).end-1,yn=ce(_t,Er,Xr);wt+=ce(yn,0,je)===xe?kt[ce(yn,je)]:'"'+yn+'"',Er=Xr}else wt+=pr}return wt}})}),"./node_modules/core-js/modules/es.number.constructor.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/is-pure.js"),A=l("./node_modules/core-js/internals/descriptors.js"),p=l("./node_modules/core-js/internals/global-this.js"),g=l("./node_modules/core-js/internals/path.js"),y=l("./node_modules/core-js/internals/function-uncurry-this.js"),x=l("./node_modules/core-js/internals/is-forced.js"),w=l("./node_modules/core-js/internals/has-own-property.js"),E=l("./node_modules/core-js/internals/inherit-if-required.js"),T=l("./node_modules/core-js/internals/object-is-prototype-of.js"),C=l("./node_modules/core-js/internals/is-symbol.js"),N=l("./node_modules/core-js/internals/to-primitive.js"),I=l("./node_modules/core-js/internals/fails.js"),U=l("./node_modules/core-js/internals/object-get-own-property-names.js").f,K=l("./node_modules/core-js/internals/object-get-own-property-descriptor.js").f,Y=l("./node_modules/core-js/internals/object-define-property.js").f,re=l("./node_modules/core-js/internals/this-number-value.js"),se=l("./node_modules/core-js/internals/string-trim.js").trim,Ae="Number",we=p[Ae],Ce=g[Ae],ve=we.prototype,ne=p.TypeError,ce=y("".slice),ae=y("".charCodeAt),De=function(Me){var Re=N(Me,"number");return typeof Re=="bigint"?Re:Oe(Re)},Oe=function(Me){var Re=N(Me,"number"),it,ht,Be,nt,Ge,ft,Dt,rt;if(C(Re))throw new ne("Cannot convert a Symbol value to a number");if(typeof Re=="string"&&Re.length>2){if(Re=se(Re),it=ae(Re,0),it===43||it===45){if(ht=ae(Re,2),ht===88||ht===120)return NaN}else if(it===48){switch(ae(Re,1)){case 66:case 98:Be=2,nt=49;break;case 79:case 111:Be=8,nt=55;break;default:return+Re}for(Ge=ce(Re,2),ft=Ge.length,Dt=0;Dt<ft;Dt++)if(rt=ae(Ge,Dt),rt<48||rt>nt)return NaN;return parseInt(Ge,Be)}}return+Re},be=x(Ae,!we(" 0o1")||!we("0b1")||we("+0x1")),de=function(Me){return T(ve,Me)&&I(function(){re(Me)})},xe=function(Re){var it=arguments.length<1?0:we(De(Re));return de(this)?E(Object(it),this,xe):it};xe.prototype=ve,be&&!f&&(ve.constructor=xe),d({global:!0,constructor:!0,wrap:!0,forced:be},{Number:xe});var je=function(Me,Re){for(var it=A?U(Re):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),ht=0,Be;it.length>ht;ht++)w(Re,Be=it[ht])&&!w(Me,Be)&&Y(Me,Be,K(Re,Be))};f&&Ce&&je(g[Ae],Ce),(be||f)&&je(g[Ae],we)}),"./node_modules/core-js/modules/es.object.assign.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/object-assign.js");d({target:"Object",stat:!0,arity:2,forced:Object.assign!==f},{assign:f})}),"./node_modules/core-js/modules/es.object.get-own-property-symbols.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/symbol-constructor-detection.js"),A=l("./node_modules/core-js/internals/fails.js"),p=l("./node_modules/core-js/internals/object-get-own-property-symbols.js"),g=l("./node_modules/core-js/internals/to-object.js"),y=!f||A(function(){p.f(1)});d({target:"Object",stat:!0,forced:y},{getOwnPropertySymbols:function(w){var E=p.f;return E?E(g(w)):[]}})}),"./node_modules/core-js/modules/es.object.keys.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/to-object.js"),A=l("./node_modules/core-js/internals/object-keys.js"),p=l("./node_modules/core-js/internals/fails.js"),g=p(function(){A(1)});d({target:"Object",stat:!0,forced:g},{keys:function(x){return A(f(x))}})}),"./node_modules/core-js/modules/es.object.to-string.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/to-string-tag-support.js"),f=l("./node_modules/core-js/internals/define-built-in.js"),A=l("./node_modules/core-js/internals/object-to-string.js");d||f(Object.prototype,"toString",A,{unsafe:!0})}),"./node_modules/core-js/modules/es.promise.all.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/function-call.js"),A=l("./node_modules/core-js/internals/a-callable.js"),p=l("./node_modules/core-js/internals/new-promise-capability.js"),g=l("./node_modules/core-js/internals/perform.js"),y=l("./node_modules/core-js/internals/iterate.js"),x=l("./node_modules/core-js/internals/promise-statics-incorrect-iteration.js");d({target:"Promise",stat:!0,forced:x},{all:function(E){var T=this,C=p.f(T),N=C.resolve,I=C.reject,U=g(function(){var K=A(T.resolve),Y=[],re=0,se=1;y(E,function(Ae){var we=re++,Ce=!1;se++,f(K,T,Ae).then(function(ve){Ce||(Ce=!0,Y[we]=ve,--se||N(Y))},I)}),--se||N(Y)});return U.error&&I(U.value),C.promise}})}),"./node_modules/core-js/modules/es.promise.catch.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/is-pure.js"),A=l("./node_modules/core-js/internals/promise-constructor-detection.js").CONSTRUCTOR,p=l("./node_modules/core-js/internals/promise-native-constructor.js"),g=l("./node_modules/core-js/internals/get-built-in.js"),y=l("./node_modules/core-js/internals/is-callable.js"),x=l("./node_modules/core-js/internals/define-built-in.js"),w=p&&p.prototype;if(d({target:"Promise",proto:!0,forced:A,real:!0},{catch:function(T){return this.then(void 0,T)}}),!f&&y(p)){var E=g("Promise").prototype.catch;w.catch!==E&&x(w,"catch",E,{unsafe:!0})}}),"./node_modules/core-js/modules/es.promise.constructor.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/is-pure.js"),A=l("./node_modules/core-js/internals/environment-is-node.js"),p=l("./node_modules/core-js/internals/global-this.js"),g=l("./node_modules/core-js/internals/path.js"),y=l("./node_modules/core-js/internals/function-call.js"),x=l("./node_modules/core-js/internals/define-built-in.js"),w=l("./node_modules/core-js/internals/object-set-prototype-of.js"),E=l("./node_modules/core-js/internals/set-to-string-tag.js"),T=l("./node_modules/core-js/internals/set-species.js"),C=l("./node_modules/core-js/internals/a-callable.js"),N=l("./node_modules/core-js/internals/is-callable.js"),I=l("./node_modules/core-js/internals/is-object.js"),U=l("./node_modules/core-js/internals/an-instance.js"),K=l("./node_modules/core-js/internals/species-constructor.js"),Y=l("./node_modules/core-js/internals/task.js").set,re=l("./node_modules/core-js/internals/microtask.js"),se=l("./node_modules/core-js/internals/host-report-errors.js"),Ae=l("./node_modules/core-js/internals/perform.js"),we=l("./node_modules/core-js/internals/queue.js"),Ce=l("./node_modules/core-js/internals/internal-state.js"),ve=l("./node_modules/core-js/internals/promise-native-constructor.js"),ne=l("./node_modules/core-js/internals/promise-constructor-detection.js"),ce=l("./node_modules/core-js/internals/new-promise-capability.js"),ae="Promise",De=ne.CONSTRUCTOR,Oe=ne.REJECTION_EVENT,be=ne.SUBCLASSING,de=Ce.getterFor(ae),xe=Ce.set,je=ve&&ve.prototype,Me=ve,Re=je,it=p.TypeError,ht=p.document,Be=p.process,nt=ce.f,Ge=nt,ft=!!(ht&&ht.createEvent&&p.dispatchEvent),Dt="unhandledrejection",rt="rejectionhandled",kt=0,_t=1,wt=2,Tt=1,Er=2,pr,Xr,yn,Mn,dn=function(Qt){var fr;return I(Qt)&&N(fr=Qt.then)?fr:!1},pn=function(Qt,fr){var zr=fr.value,Yr=fr.state===_t,Ln=Yr?Qt.ok:Qt.fail,ln=Qt.resolve,Jn=Qt.reject,rn=Qt.domain,Ur,An,cn;try{Ln?(Yr||(fr.rejection===Er&&ot(fr),fr.rejection=Tt),Ln===!0?Ur=zr:(rn&&rn.enter(),Ur=Ln(zr),rn&&(rn.exit(),cn=!0)),Ur===Qt.promise?Jn(new it("Promise-chain cycle")):(An=dn(Ur))?y(An,Ur,ln,Jn):ln(Ur)):Jn(zr)}catch(On){rn&&!cn&&rn.exit(),Jn(On)}},mn=function(Qt,fr){Qt.notified||(Qt.notified=!0,re(function(){for(var zr=Qt.reactions,Yr;Yr=zr.get();)pn(Yr,Qt);Qt.notified=!1,fr&&!Qt.rejection&&Zn(Qt)}))},Kn=function(Qt,fr,zr){var Yr,Ln;ft?(Yr=ht.createEvent("Event"),Yr.promise=fr,Yr.reason=zr,Yr.initEvent(Qt,!1,!0),p.dispatchEvent(Yr)):Yr={promise:fr,reason:zr},!Oe&&(Ln=p["on"+Qt])?Ln(Yr):Qt===Dt&&se("Unhandled promise rejection",zr)},Zn=function(Qt){y(Y,p,function(){var fr=Qt.facade,zr=Qt.value,Yr=Li(Qt),Ln;if(Yr&&(Ln=Ae(function(){A?Be.emit("unhandledRejection",zr,fr):Kn(Dt,fr,zr)}),Qt.rejection=A||Li(Qt)?Er:Tt,Ln.error))throw Ln.value})},Li=function(Qt){return Qt.rejection!==Tt&&!Qt.parent},ot=function(Qt){y(Y,p,function(){var fr=Qt.facade;A?Be.emit("rejectionHandled",fr):Kn(rt,fr,Qt.value)})},Yt=function(Qt,fr,zr){return function(Yr){Qt(fr,Yr,zr)}},kr=function(Qt,fr,zr){Qt.done||(Qt.done=!0,zr&&(Qt=zr),Qt.value=fr,Qt.state=wt,mn(Qt,!0))},nr=function(Qt,fr,zr){if(!Qt.done){Qt.done=!0,zr&&(Qt=zr);try{if(Qt.facade===fr)throw new it("Promise can't be resolved itself");var Yr=dn(fr);Yr?re(function(){var Ln={done:!1};try{y(Yr,fr,Yt(nr,Ln,Qt),Yt(kr,Ln,Qt))}catch(ln){kr(Ln,ln,Qt)}}):(Qt.value=fr,Qt.state=_t,mn(Qt,!1))}catch(Ln){kr({done:!1},Ln,Qt)}}};if(De&&(Me=function(fr){U(this,Re),C(fr),y(pr,this);var zr=de(this);try{fr(Yt(nr,zr),Yt(kr,zr))}catch(Yr){kr(zr,Yr)}},Re=Me.prototype,pr=function(fr){xe(this,{type:ae,done:!1,notified:!1,parent:!1,reactions:new we,rejection:!1,state:kt,value:null})},pr.prototype=x(Re,"then",function(fr,zr){var Yr=de(this),Ln=nt(K(this,Me));return Yr.parent=!0,Ln.ok=N(fr)?fr:!0,Ln.fail=N(zr)&&zr,Ln.domain=A?Be.domain:void 0,Yr.state===kt?Yr.reactions.add(Ln):re(function(){pn(Ln,Yr)}),Ln.promise}),Xr=function(){var Qt=new pr,fr=de(Qt);this.promise=Qt,this.resolve=Yt(nr,fr),this.reject=Yt(kr,fr)},ce.f=nt=function(Qt){return Qt===Me||Qt===yn?new Xr(Qt):Ge(Qt)},!f&&N(ve)&&je!==Object.prototype)){Mn=je.then,be||x(je,"then",function(fr,zr){var Yr=this;return new Me(function(Ln,ln){y(Mn,Yr,Ln,ln)}).then(fr,zr)},{unsafe:!0});try{delete je.constructor}catch{}w&&w(je,Re)}d({global:!0,constructor:!0,wrap:!0,forced:De},{Promise:Me}),yn=g.Promise,E(Me,ae,!1,!0),T(ae)}),"./node_modules/core-js/modules/es.promise.js":(function(c,u,l){l("./node_modules/core-js/modules/es.promise.constructor.js"),l("./node_modules/core-js/modules/es.promise.all.js"),l("./node_modules/core-js/modules/es.promise.catch.js"),l("./node_modules/core-js/modules/es.promise.race.js"),l("./node_modules/core-js/modules/es.promise.reject.js"),l("./node_modules/core-js/modules/es.promise.resolve.js")}),"./node_modules/core-js/modules/es.promise.race.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/function-call.js"),A=l("./node_modules/core-js/internals/a-callable.js"),p=l("./node_modules/core-js/internals/new-promise-capability.js"),g=l("./node_modules/core-js/internals/perform.js"),y=l("./node_modules/core-js/internals/iterate.js"),x=l("./node_modules/core-js/internals/promise-statics-incorrect-iteration.js");d({target:"Promise",stat:!0,forced:x},{race:function(E){var T=this,C=p.f(T),N=C.reject,I=g(function(){var U=A(T.resolve);y(E,function(K){f(U,T,K).then(C.resolve,N)})});return I.error&&N(I.value),C.promise}})}),"./node_modules/core-js/modules/es.promise.reject.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/new-promise-capability.js"),A=l("./node_modules/core-js/internals/promise-constructor-detection.js").CONSTRUCTOR;d({target:"Promise",stat:!0,forced:A},{reject:function(g){var y=f.f(this),x=y.reject;return x(g),y.promise}})}),"./node_modules/core-js/modules/es.promise.resolve.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/get-built-in.js"),A=l("./node_modules/core-js/internals/is-pure.js"),p=l("./node_modules/core-js/internals/promise-native-constructor.js"),g=l("./node_modules/core-js/internals/promise-constructor-detection.js").CONSTRUCTOR,y=l("./node_modules/core-js/internals/promise-resolve.js"),x=f("Promise"),w=A&&!g;d({target:"Promise",stat:!0,forced:A||g},{resolve:function(T){return y(w&&this===x?p:this,T)}})}),"./node_modules/core-js/modules/es.regexp.exec.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/regexp-exec.js");d({target:"RegExp",proto:!0,forced:/./.exec!==f},{exec:f})}),"./node_modules/core-js/modules/es.regexp.test.js":(function(c,u,l){l("./node_modules/core-js/modules/es.regexp.exec.js");var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/function-call.js"),A=l("./node_modules/core-js/internals/is-callable.js"),p=l("./node_modules/core-js/internals/an-object.js"),g=l("./node_modules/core-js/internals/to-string.js"),y=(function(){var w=!1,E=/[ac]/;return E.exec=function(){return w=!0,/./.exec.apply(this,arguments)},E.test("abc")===!0&&w})(),x=/./.test;d({target:"RegExp",proto:!0,forced:!y},{test:function(w){var E=p(this),T=g(w),C=E.exec;if(!A(C))return f(x,E,T);var N=f(C,E,T);return N===null?!1:(p(N),!0)}})}),"./node_modules/core-js/modules/es.regexp.to-string.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-name.js").PROPER,f=l("./node_modules/core-js/internals/define-built-in.js"),A=l("./node_modules/core-js/internals/an-object.js"),p=l("./node_modules/core-js/internals/to-string.js"),g=l("./node_modules/core-js/internals/fails.js"),y=l("./node_modules/core-js/internals/regexp-get-flags.js"),x="toString",w=RegExp.prototype,E=w[x],T=g(function(){return E.call({source:"a",flags:"b"})!=="/a/b"}),C=d&&E.name!==x;(T||C)&&f(w,x,function(){var I=A(this),U=p(I.source),K=p(y(I));return"/"+U+"/"+K},{unsafe:!0})}),"./node_modules/core-js/modules/es.set.constructor.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/collection.js"),f=l("./node_modules/core-js/internals/collection-strong.js");d("Set",function(A){return function(){return A(this,arguments.length?arguments[0]:void 0)}},f)}),"./node_modules/core-js/modules/es.set.js":(function(c,u,l){l("./node_modules/core-js/modules/es.set.constructor.js")}),"./node_modules/core-js/modules/es.string.ends-with.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/function-uncurry-this-clause.js"),A=l("./node_modules/core-js/internals/object-get-own-property-descriptor.js").f,p=l("./node_modules/core-js/internals/to-length.js"),g=l("./node_modules/core-js/internals/to-string.js"),y=l("./node_modules/core-js/internals/not-a-regexp.js"),x=l("./node_modules/core-js/internals/require-object-coercible.js"),w=l("./node_modules/core-js/internals/correct-is-regexp-logic.js"),E=l("./node_modules/core-js/internals/is-pure.js"),T=f("".slice),C=Math.min,N=w("endsWith"),I=!E&&!N&&!!(function(){var U=A(String.prototype,"endsWith");return U&&!U.writable})();d({target:"String",proto:!0,forced:!I&&!N},{endsWith:function(K){var Y=g(x(this));y(K);var re=arguments.length>1?arguments[1]:void 0,se=Y.length,Ae=re===void 0?se:C(p(re),se),we=g(K);return T(Y,Ae-we.length,Ae)===we}})}),"./node_modules/core-js/modules/es.string.includes.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/function-uncurry-this.js"),A=l("./node_modules/core-js/internals/not-a-regexp.js"),p=l("./node_modules/core-js/internals/require-object-coercible.js"),g=l("./node_modules/core-js/internals/to-string.js"),y=l("./node_modules/core-js/internals/correct-is-regexp-logic.js"),x=f("".indexOf);d({target:"String",proto:!0,forced:!y("includes")},{includes:function(E){return!!~x(g(p(this)),g(A(E)),arguments.length>1?arguments[1]:void 0)}})}),"./node_modules/core-js/modules/es.string.iterator.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/string-multibyte.js").charAt,f=l("./node_modules/core-js/internals/to-string.js"),A=l("./node_modules/core-js/internals/internal-state.js"),p=l("./node_modules/core-js/internals/iterator-define.js"),g=l("./node_modules/core-js/internals/create-iter-result-object.js"),y="String Iterator",x=A.set,w=A.getterFor(y);p(String,"String",function(E){x(this,{type:y,string:f(E),index:0})},function(){var T=w(this),C=T.string,N=T.index,I;return N>=C.length?g(void 0,!0):(I=d(C,N),T.index+=I.length,g(I,!1))})}),"./node_modules/core-js/modules/es.string.link.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/create-html.js"),A=l("./node_modules/core-js/internals/string-html-forced.js");d({target:"String",proto:!0,forced:A("link")},{link:function(g){return f(this,"a","href",g)}})}),"./node_modules/core-js/modules/es.string.match.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-call.js"),f=l("./node_modules/core-js/internals/function-uncurry-this.js"),A=l("./node_modules/core-js/internals/fix-regexp-well-known-symbol-logic.js"),p=l("./node_modules/core-js/internals/an-object.js"),g=l("./node_modules/core-js/internals/is-object.js"),y=l("./node_modules/core-js/internals/to-length.js"),x=l("./node_modules/core-js/internals/to-string.js"),w=l("./node_modules/core-js/internals/require-object-coercible.js"),E=l("./node_modules/core-js/internals/get-method.js"),T=l("./node_modules/core-js/internals/advance-string-index.js"),C=l("./node_modules/core-js/internals/regexp-get-flags.js"),N=l("./node_modules/core-js/internals/regexp-exec-abstract.js"),I=f("".indexOf);A("match",function(U,K,Y){return[function(se){var Ae=w(this),we=g(se)?E(se,U):void 0;return we?d(we,se,Ae):new RegExp(se)[U](x(Ae))},function(re){var se=p(this),Ae=x(re),we=Y(K,se,Ae);if(we.done)return we.value;var Ce=x(C(se));if(I(Ce,"g")===-1)return N(se,Ae);var ve=I(Ce,"u")!==-1;se.lastIndex=0;for(var ne=[],ce=0,ae;(ae=N(se,Ae))!==null;){var De=x(ae[0]);ne[ce]=De,De===""&&(se.lastIndex=T(Ae,y(se.lastIndex),ve)),ce++}return ce===0?null:ne}]})}),"./node_modules/core-js/modules/es.string.replace.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-apply.js"),f=l("./node_modules/core-js/internals/function-call.js"),A=l("./node_modules/core-js/internals/function-uncurry-this.js"),p=l("./node_modules/core-js/internals/fix-regexp-well-known-symbol-logic.js"),g=l("./node_modules/core-js/internals/fails.js"),y=l("./node_modules/core-js/internals/an-object.js"),x=l("./node_modules/core-js/internals/is-callable.js"),w=l("./node_modules/core-js/internals/is-object.js"),E=l("./node_modules/core-js/internals/to-integer-or-infinity.js"),T=l("./node_modules/core-js/internals/to-length.js"),C=l("./node_modules/core-js/internals/to-string.js"),N=l("./node_modules/core-js/internals/require-object-coercible.js"),I=l("./node_modules/core-js/internals/advance-string-index.js"),U=l("./node_modules/core-js/internals/get-method.js"),K=l("./node_modules/core-js/internals/get-substitution.js"),Y=l("./node_modules/core-js/internals/regexp-get-flags.js"),re=l("./node_modules/core-js/internals/regexp-exec-abstract.js"),se=l("./node_modules/core-js/internals/well-known-symbol.js"),Ae=se("replace"),we=Math.max,Ce=Math.min,ve=A([].concat),ne=A([].push),ce=A("".indexOf),ae=A("".slice),De=function(xe){return xe===void 0?xe:String(xe)},Oe=(function(){return"a".replace(/./,"$0")==="$0"})(),be=(function(){return/./[Ae]?/./[Ae]("a","$0")==="":!1})(),de=!g(function(){var xe=/./;return xe.exec=function(){var je=[];return je.groups={a:"7"},je},"".replace(xe,"$<a>")!=="7"});p("replace",function(xe,je,Me){var Re=be?"$":"$0";return[function(ht,Be){var nt=N(this),Ge=w(ht)?U(ht,Ae):void 0;return Ge?f(Ge,ht,nt,Be):f(je,C(nt),ht,Be)},function(it,ht){var Be=y(this),nt=C(it);if(typeof ht=="string"&&ce(ht,Re)===-1&&ce(ht,"$<")===-1){var Ge=Me(je,Be,nt,ht);if(Ge.done)return Ge.value}var ft=x(ht);ft||(ht=C(ht));var Dt=C(Y(Be)),rt=ce(Dt,"g")!==-1,kt;rt&&(kt=ce(Dt,"u")!==-1,Be.lastIndex=0);for(var _t=[],wt;wt=re(Be,nt),!(wt===null||(ne(_t,wt),!rt));){var Tt=C(wt[0]);Tt===""&&(Be.lastIndex=I(nt,T(Be.lastIndex),kt))}for(var Er="",pr=0,Xr=0;Xr<_t.length;Xr++){wt=_t[Xr];for(var yn=C(wt[0]),Mn=we(Ce(E(wt.index),nt.length),0),dn=[],pn,mn=1;mn<wt.length;mn++)ne(dn,De(wt[mn]));var Kn=wt.groups;if(ft){var Zn=ve([yn],dn,Mn,nt);Kn!==void 0&&ne(Zn,Kn),pn=C(d(ht,void 0,Zn))}else pn=K(yn,nt,Mn,dn,Kn,ht);Mn>=pr&&(Er+=ae(nt,pr,Mn)+pn,pr=Mn+yn.length)}return Er+ae(nt,pr)}]},!de||!Oe||be)}),"./node_modules/core-js/modules/es.string.split.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-call.js"),f=l("./node_modules/core-js/internals/function-uncurry-this.js"),A=l("./node_modules/core-js/internals/fix-regexp-well-known-symbol-logic.js"),p=l("./node_modules/core-js/internals/an-object.js"),g=l("./node_modules/core-js/internals/is-object.js"),y=l("./node_modules/core-js/internals/require-object-coercible.js"),x=l("./node_modules/core-js/internals/species-constructor.js"),w=l("./node_modules/core-js/internals/advance-string-index.js"),E=l("./node_modules/core-js/internals/to-length.js"),T=l("./node_modules/core-js/internals/to-string.js"),C=l("./node_modules/core-js/internals/get-method.js"),N=l("./node_modules/core-js/internals/regexp-exec-abstract.js"),I=l("./node_modules/core-js/internals/regexp-sticky-helpers.js"),U=l("./node_modules/core-js/internals/fails.js"),K=I.UNSUPPORTED_Y,Y=4294967295,re=Math.min,se=f([].push),Ae=f("".slice),we=!U(function(){var ve=/(?:)/,ne=ve.exec;ve.exec=function(){return ne.apply(this,arguments)};var ce="ab".split(ve);return ce.length!==2||ce[0]!=="a"||ce[1]!=="b"}),Ce="abbc".split(/(b)*/)[1]==="c"||"test".split(/(?:)/,-1).length!==4||"ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||".".split(/()()/).length>1||"".split(/.?/).length;A("split",function(ve,ne,ce){var ae="0".split(void 0,0).length?function(De,Oe){return De===void 0&&Oe===0?[]:d(ne,this,De,Oe)}:ne;return[function(Oe,be){var de=y(this),xe=g(Oe)?C(Oe,ve):void 0;return xe?d(xe,Oe,de,be):d(ae,T(de),Oe,be)},function(De,Oe){var be=p(this),de=T(De);if(!Ce){var xe=ce(ae,be,de,Oe,ae!==ne);if(xe.done)return xe.value}var je=x(be,RegExp),Me=be.unicode,Re=(be.ignoreCase?"i":"")+(be.multiline?"m":"")+(be.unicode?"u":"")+(K?"g":"y"),it=new je(K?"^(?:"+be.source+")":be,Re),ht=Oe===void 0?Y:Oe>>>0;if(ht===0)return[];if(de.length===0)return N(it,de)===null?[de]:[];for(var Be=0,nt=0,Ge=[];nt<de.length;){it.lastIndex=K?0:nt;var ft=N(it,K?Ae(de,nt):de),Dt;if(ft===null||(Dt=re(E(it.lastIndex+(K?nt:0)),de.length))===Be)nt=w(de,nt,Me);else{if(se(Ge,Ae(de,Be,nt)),Ge.length===ht)return Ge;for(var rt=1;rt<=ft.length-1;rt++)if(se(Ge,ft[rt]),Ge.length===ht)return Ge;nt=Be=Dt}}return se(Ge,Ae(de,Be)),Ge}]},Ce||!we,K)}),"./node_modules/core-js/modules/es.string.starts-with.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/function-uncurry-this-clause.js"),A=l("./node_modules/core-js/internals/object-get-own-property-descriptor.js").f,p=l("./node_modules/core-js/internals/to-length.js"),g=l("./node_modules/core-js/internals/to-string.js"),y=l("./node_modules/core-js/internals/not-a-regexp.js"),x=l("./node_modules/core-js/internals/require-object-coercible.js"),w=l("./node_modules/core-js/internals/correct-is-regexp-logic.js"),E=l("./node_modules/core-js/internals/is-pure.js"),T=f("".slice),C=Math.min,N=w("startsWith"),I=!E&&!N&&!!(function(){var U=A(String.prototype,"startsWith");return U&&!U.writable})();d({target:"String",proto:!0,forced:!I&&!N},{startsWith:function(K){var Y=g(x(this));y(K);var re=p(C(arguments.length>1?arguments[1]:void 0,Y.length)),se=g(K);return T(Y,re,re+se.length)===se}})}),"./node_modules/core-js/modules/es.string.trim.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/string-trim.js").trim,A=l("./node_modules/core-js/internals/string-trim-forced.js");d({target:"String",proto:!0,forced:A("trim")},{trim:function(){return f(this)}})}),"./node_modules/core-js/modules/es.symbol.constructor.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/global-this.js"),A=l("./node_modules/core-js/internals/function-call.js"),p=l("./node_modules/core-js/internals/function-uncurry-this.js"),g=l("./node_modules/core-js/internals/is-pure.js"),y=l("./node_modules/core-js/internals/descriptors.js"),x=l("./node_modules/core-js/internals/symbol-constructor-detection.js"),w=l("./node_modules/core-js/internals/fails.js"),E=l("./node_modules/core-js/internals/has-own-property.js"),T=l("./node_modules/core-js/internals/object-is-prototype-of.js"),C=l("./node_modules/core-js/internals/an-object.js"),N=l("./node_modules/core-js/internals/to-indexed-object.js"),I=l("./node_modules/core-js/internals/to-property-key.js"),U=l("./node_modules/core-js/internals/to-string.js"),K=l("./node_modules/core-js/internals/create-property-descriptor.js"),Y=l("./node_modules/core-js/internals/object-create.js"),re=l("./node_modules/core-js/internals/object-keys.js"),se=l("./node_modules/core-js/internals/object-get-own-property-names.js"),Ae=l("./node_modules/core-js/internals/object-get-own-property-names-external.js"),we=l("./node_modules/core-js/internals/object-get-own-property-symbols.js"),Ce=l("./node_modules/core-js/internals/object-get-own-property-descriptor.js"),ve=l("./node_modules/core-js/internals/object-define-property.js"),ne=l("./node_modules/core-js/internals/object-define-properties.js"),ce=l("./node_modules/core-js/internals/object-property-is-enumerable.js"),ae=l("./node_modules/core-js/internals/define-built-in.js"),De=l("./node_modules/core-js/internals/define-built-in-accessor.js"),Oe=l("./node_modules/core-js/internals/shared.js"),be=l("./node_modules/core-js/internals/shared-key.js"),de=l("./node_modules/core-js/internals/hidden-keys.js"),xe=l("./node_modules/core-js/internals/uid.js"),je=l("./node_modules/core-js/internals/well-known-symbol.js"),Me=l("./node_modules/core-js/internals/well-known-symbol-wrapped.js"),Re=l("./node_modules/core-js/internals/well-known-symbol-define.js"),it=l("./node_modules/core-js/internals/symbol-define-to-primitive.js"),ht=l("./node_modules/core-js/internals/set-to-string-tag.js"),Be=l("./node_modules/core-js/internals/internal-state.js"),nt=l("./node_modules/core-js/internals/array-iteration.js").forEach,Ge=be("hidden"),ft="Symbol",Dt="prototype",rt=Be.set,kt=Be.getterFor(ft),_t=Object[Dt],wt=f.Symbol,Tt=wt&&wt[Dt],Er=f.RangeError,pr=f.TypeError,Xr=f.QObject,yn=Ce.f,Mn=ve.f,dn=Ae.f,pn=ce.f,mn=p([].push),Kn=Oe("symbols"),Zn=Oe("op-symbols"),Li=Oe("wks"),ot=!Xr||!Xr[Dt]||!Xr[Dt].findChild,Yt=function(rn,Ur,An){var cn=yn(_t,Ur);cn&&delete _t[Ur],Mn(rn,Ur,An),cn&&rn!==_t&&Mn(_t,Ur,cn)},kr=y&&w(function(){return Y(Mn({},"a",{get:function(){return Mn(this,"a",{value:7}).a}})).a!==7})?Yt:Mn,nr=function(rn,Ur){var An=Kn[rn]=Y(Tt);return rt(An,{type:ft,tag:rn,description:Ur}),y||(An.description=Ur),An},Qt=function(Ur,An,cn){Ur===_t&&Qt(Zn,An,cn),C(Ur);var On=I(An);return C(cn),E(Kn,On)?(cn.enumerable?(E(Ur,Ge)&&Ur[Ge][On]&&(Ur[Ge][On]=!1),cn=Y(cn,{enumerable:K(0,!1)})):(E(Ur,Ge)||Mn(Ur,Ge,K(1,Y(null))),Ur[Ge][On]=!0),kr(Ur,On,cn)):Mn(Ur,On,cn)},fr=function(Ur,An){C(Ur);var cn=N(An),On=re(cn).concat(Jn(cn));return nt(On,function(li){(!y||A(Yr,cn,li))&&Qt(Ur,li,cn[li])}),Ur},zr=function(Ur,An){return An===void 0?Y(Ur):fr(Y(Ur),An)},Yr=function(Ur){var An=I(Ur),cn=A(pn,this,An);return this===_t&&E(Kn,An)&&!E(Zn,An)?!1:cn||!E(this,An)||!E(Kn,An)||E(this,Ge)&&this[Ge][An]?cn:!0},Ln=function(Ur,An){var cn=N(Ur),On=I(An);if(!(cn===_t&&E(Kn,On)&&!E(Zn,On))){var li=yn(cn,On);return li&&E(Kn,On)&&!(E(cn,Ge)&&cn[Ge][On])&&(li.enumerable=!0),li}},ln=function(Ur){var An=dn(N(Ur)),cn=[];return nt(An,function(On){!E(Kn,On)&&!E(de,On)&&mn(cn,On)}),cn},Jn=function(rn){var Ur=rn===_t,An=dn(Ur?Zn:N(rn)),cn=[];return nt(An,function(On){E(Kn,On)&&(!Ur||E(_t,On))&&mn(cn,Kn[On])}),cn};x||(wt=function(){if(T(Tt,this))throw new pr("Symbol is not a constructor");var Ur=!arguments.length||arguments[0]===void 0?void 0:U(arguments[0]),An=xe(Ur),cn=function(On){var li=this===void 0?f:this;li===_t&&A(cn,Zn,On),E(li,Ge)&&E(li[Ge],An)&&(li[Ge][An]=!1);var Cs=K(1,On);try{kr(li,An,Cs)}catch(Ds){if(!(Ds instanceof Er))throw Ds;Yt(li,An,Cs)}};return y&&ot&&kr(_t,An,{configurable:!0,set:cn}),nr(An,Ur)},Tt=wt[Dt],ae(Tt,"toString",function(){return kt(this).tag}),ae(wt,"withoutSetter",function(rn){return nr(xe(rn),rn)}),ce.f=Yr,ve.f=Qt,ne.f=fr,Ce.f=Ln,se.f=Ae.f=ln,we.f=Jn,Me.f=function(rn){return nr(je(rn),rn)},y&&(De(Tt,"description",{configurable:!0,get:function(){return kt(this).description}}),g||ae(_t,"propertyIsEnumerable",Yr,{unsafe:!0}))),d({global:!0,constructor:!0,wrap:!0,forced:!x,sham:!x},{Symbol:wt}),nt(re(Li),function(rn){Re(rn)}),d({target:ft,stat:!0,forced:!x},{useSetter:function(){ot=!0},useSimple:function(){ot=!1}}),d({target:"Object",stat:!0,forced:!x,sham:!y},{create:zr,defineProperty:Qt,defineProperties:fr,getOwnPropertyDescriptor:Ln}),d({target:"Object",stat:!0,forced:!x},{getOwnPropertyNames:ln}),it(),ht(wt,ft),de[Ge]=!0}),"./node_modules/core-js/modules/es.symbol.description.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/descriptors.js"),A=l("./node_modules/core-js/internals/global-this.js"),p=l("./node_modules/core-js/internals/function-uncurry-this.js"),g=l("./node_modules/core-js/internals/has-own-property.js"),y=l("./node_modules/core-js/internals/is-callable.js"),x=l("./node_modules/core-js/internals/object-is-prototype-of.js"),w=l("./node_modules/core-js/internals/to-string.js"),E=l("./node_modules/core-js/internals/define-built-in-accessor.js"),T=l("./node_modules/core-js/internals/copy-constructor-properties.js"),C=A.Symbol,N=C&&C.prototype;if(f&&y(C)&&(!("description"in N)||C().description!==void 0)){var I={},U=function(){var ve=arguments.length<1||arguments[0]===void 0?void 0:w(arguments[0]),ne=x(N,this)?new C(ve):ve===void 0?C():C(ve);return ve===""&&(I[ne]=!0),ne};T(U,C),U.prototype=N,N.constructor=U;var K=String(C("description detection"))==="Symbol(description detection)",Y=p(N.valueOf),re=p(N.toString),se=/^Symbol\((.*)\)[^)]+$/,Ae=p("".replace),we=p("".slice);E(N,"description",{configurable:!0,get:function(){var ve=Y(this);if(g(I,ve))return"";var ne=re(ve),ce=K?we(ne,7,-1):Ae(ne,se,"$1");return ce===""?void 0:ce}}),d({global:!0,constructor:!0,forced:!0},{Symbol:U})}}),"./node_modules/core-js/modules/es.symbol.for.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/get-built-in.js"),A=l("./node_modules/core-js/internals/has-own-property.js"),p=l("./node_modules/core-js/internals/to-string.js"),g=l("./node_modules/core-js/internals/shared.js"),y=l("./node_modules/core-js/internals/symbol-registry-detection.js"),x=g("string-to-symbol-registry"),w=g("symbol-to-string-registry");d({target:"Symbol",stat:!0,forced:!y},{for:function(E){var T=p(E);if(A(x,T))return x[T];var C=f("Symbol")(T);return x[T]=C,w[C]=T,C}})}),"./node_modules/core-js/modules/es.symbol.iterator.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/well-known-symbol-define.js");d("iterator")}),"./node_modules/core-js/modules/es.symbol.js":(function(c,u,l){l("./node_modules/core-js/modules/es.symbol.constructor.js"),l("./node_modules/core-js/modules/es.symbol.for.js"),l("./node_modules/core-js/modules/es.symbol.key-for.js"),l("./node_modules/core-js/modules/es.json.stringify.js"),l("./node_modules/core-js/modules/es.object.get-own-property-symbols.js")}),"./node_modules/core-js/modules/es.symbol.key-for.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/has-own-property.js"),A=l("./node_modules/core-js/internals/is-symbol.js"),p=l("./node_modules/core-js/internals/try-to-string.js"),g=l("./node_modules/core-js/internals/shared.js"),y=l("./node_modules/core-js/internals/symbol-registry-detection.js"),x=g("symbol-to-string-registry");d({target:"Symbol",stat:!0,forced:!y},{keyFor:function(E){if(!A(E))throw new TypeError(p(E)+" is not a symbol");if(f(x,E))return x[E]}})}),"./node_modules/core-js/modules/esnext.iterator.constructor.js":(function(c,u,l){l("./node_modules/core-js/modules/es.iterator.constructor.js")}),"./node_modules/core-js/modules/esnext.iterator.for-each.js":(function(c,u,l){l("./node_modules/core-js/modules/es.iterator.for-each.js")}),"./node_modules/core-js/modules/esnext.iterator.map.js":(function(c,u,l){l("./node_modules/core-js/modules/es.iterator.map.js")}),"./node_modules/core-js/modules/esnext.set.add-all.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/a-set.js"),A=l("./node_modules/core-js/internals/set-helpers.js").add;d({target:"Set",proto:!0,real:!0,forced:!0},{addAll:function(){for(var g=f(this),y=0,x=arguments.length;y<x;y++)A(g,arguments[y]);return g}})}),"./node_modules/core-js/modules/esnext.set.delete-all.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/a-set.js"),A=l("./node_modules/core-js/internals/set-helpers.js").remove;d({target:"Set",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var g=f(this),y=!0,x,w=0,E=arguments.length;w<E;w++)x=A(g,arguments[w]),y=y&&x;return!!y}})}),"./node_modules/core-js/modules/esnext.set.difference.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/function-call.js"),A=l("./node_modules/core-js/internals/to-set-like.js"),p=l("./node_modules/core-js/internals/set-difference.js");d({target:"Set",proto:!0,real:!0,forced:!0},{difference:function(y){return f(p,this,A(y))}})}),"./node_modules/core-js/modules/esnext.set.every.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/function-bind-context.js"),A=l("./node_modules/core-js/internals/a-set.js"),p=l("./node_modules/core-js/internals/set-iterate.js");d({target:"Set",proto:!0,real:!0,forced:!0},{every:function(y){var x=A(this),w=f(y,arguments.length>1?arguments[1]:void 0);return p(x,function(E){if(!w(E,E,x))return!1},!0)!==!1}})}),"./node_modules/core-js/modules/esnext.set.filter.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/function-bind-context.js"),A=l("./node_modules/core-js/internals/a-set.js"),p=l("./node_modules/core-js/internals/set-helpers.js"),g=l("./node_modules/core-js/internals/set-iterate.js"),y=p.Set,x=p.add;d({target:"Set",proto:!0,real:!0,forced:!0},{filter:function(E){var T=A(this),C=f(E,arguments.length>1?arguments[1]:void 0),N=new y;return g(T,function(I){C(I,I,T)&&x(N,I)}),N}})}),"./node_modules/core-js/modules/esnext.set.find.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/function-bind-context.js"),A=l("./node_modules/core-js/internals/a-set.js"),p=l("./node_modules/core-js/internals/set-iterate.js");d({target:"Set",proto:!0,real:!0,forced:!0},{find:function(y){var x=A(this),w=f(y,arguments.length>1?arguments[1]:void 0),E=p(x,function(T){if(w(T,T,x))return{value:T}},!0);return E&&E.value}})}),"./node_modules/core-js/modules/esnext.set.intersection.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/function-call.js"),A=l("./node_modules/core-js/internals/to-set-like.js"),p=l("./node_modules/core-js/internals/set-intersection.js");d({target:"Set",proto:!0,real:!0,forced:!0},{intersection:function(y){return f(p,this,A(y))}})}),"./node_modules/core-js/modules/esnext.set.is-disjoint-from.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/function-call.js"),A=l("./node_modules/core-js/internals/to-set-like.js"),p=l("./node_modules/core-js/internals/set-is-disjoint-from.js");d({target:"Set",proto:!0,real:!0,forced:!0},{isDisjointFrom:function(y){return f(p,this,A(y))}})}),"./node_modules/core-js/modules/esnext.set.is-subset-of.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/function-call.js"),A=l("./node_modules/core-js/internals/to-set-like.js"),p=l("./node_modules/core-js/internals/set-is-subset-of.js");d({target:"Set",proto:!0,real:!0,forced:!0},{isSubsetOf:function(y){return f(p,this,A(y))}})}),"./node_modules/core-js/modules/esnext.set.is-superset-of.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/function-call.js"),A=l("./node_modules/core-js/internals/to-set-like.js"),p=l("./node_modules/core-js/internals/set-is-superset-of.js");d({target:"Set",proto:!0,real:!0,forced:!0},{isSupersetOf:function(y){return f(p,this,A(y))}})}),"./node_modules/core-js/modules/esnext.set.join.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/function-uncurry-this.js"),A=l("./node_modules/core-js/internals/a-set.js"),p=l("./node_modules/core-js/internals/set-iterate.js"),g=l("./node_modules/core-js/internals/to-string.js"),y=f([].join),x=f([].push);d({target:"Set",proto:!0,real:!0,forced:!0},{join:function(E){var T=A(this),C=E===void 0?",":g(E),N=[];return p(T,function(I){x(N,I)}),y(N,C)}})}),"./node_modules/core-js/modules/esnext.set.map.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/function-bind-context.js"),A=l("./node_modules/core-js/internals/a-set.js"),p=l("./node_modules/core-js/internals/set-helpers.js"),g=l("./node_modules/core-js/internals/set-iterate.js"),y=p.Set,x=p.add;d({target:"Set",proto:!0,real:!0,forced:!0},{map:function(E){var T=A(this),C=f(E,arguments.length>1?arguments[1]:void 0),N=new y;return g(T,function(I){x(N,C(I,I,T))}),N}})}),"./node_modules/core-js/modules/esnext.set.reduce.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/a-callable.js"),A=l("./node_modules/core-js/internals/a-set.js"),p=l("./node_modules/core-js/internals/set-iterate.js"),g=TypeError;d({target:"Set",proto:!0,real:!0,forced:!0},{reduce:function(x){var w=A(this),E=arguments.length<2,T=E?void 0:arguments[1];if(f(x),p(w,function(C){E?(E=!1,T=C):T=x(T,C,C,w)}),E)throw new g("Reduce of empty set with no initial value");return T}})}),"./node_modules/core-js/modules/esnext.set.some.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/function-bind-context.js"),A=l("./node_modules/core-js/internals/a-set.js"),p=l("./node_modules/core-js/internals/set-iterate.js");d({target:"Set",proto:!0,real:!0,forced:!0},{some:function(y){var x=A(this),w=f(y,arguments.length>1?arguments[1]:void 0);return p(x,function(E){if(w(E,E,x))return!0},!0)===!0}})}),"./node_modules/core-js/modules/esnext.set.symmetric-difference.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/function-call.js"),A=l("./node_modules/core-js/internals/to-set-like.js"),p=l("./node_modules/core-js/internals/set-symmetric-difference.js");d({target:"Set",proto:!0,real:!0,forced:!0},{symmetricDifference:function(y){return f(p,this,A(y))}})}),"./node_modules/core-js/modules/esnext.set.union.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/function-call.js"),A=l("./node_modules/core-js/internals/to-set-like.js"),p=l("./node_modules/core-js/internals/set-union.js");d({target:"Set",proto:!0,real:!0,forced:!0},{union:function(y){return f(p,this,A(y))}})}),"./node_modules/core-js/modules/web.dom-collections.for-each.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/global-this.js"),f=l("./node_modules/core-js/internals/dom-iterables.js"),A=l("./node_modules/core-js/internals/dom-token-list-prototype.js"),p=l("./node_modules/core-js/internals/array-for-each.js"),g=l("./node_modules/core-js/internals/create-non-enumerable-property.js"),y=function(w){if(w&&w.forEach!==p)try{g(w,"forEach",p)}catch{w.forEach=p}};for(var x in f)f[x]&&y(d[x]&&d[x].prototype);y(A)}),"./node_modules/core-js/modules/web.dom-collections.iterator.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/global-this.js"),f=l("./node_modules/core-js/internals/dom-iterables.js"),A=l("./node_modules/core-js/internals/dom-token-list-prototype.js"),p=l("./node_modules/core-js/modules/es.array.iterator.js"),g=l("./node_modules/core-js/internals/create-non-enumerable-property.js"),y=l("./node_modules/core-js/internals/set-to-string-tag.js"),x=l("./node_modules/core-js/internals/well-known-symbol.js"),w=x("iterator"),E=p.values,T=function(N,I){if(N){if(N[w]!==E)try{g(N,w,E)}catch{N[w]=E}if(y(N,I,!0),f[I]){for(var U in p)if(N[U]!==p[U])try{g(N,U,p[U])}catch{N[U]=p[U]}}}};for(var C in f)T(d[C]&&d[C].prototype,C);T(A,"DOMTokenList")}),"./node_modules/core-js/modules/web.set-interval.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/global-this.js"),A=l("./node_modules/core-js/internals/schedulers-fix.js"),p=A(f.setInterval,!0);d({global:!0,bind:!0,forced:f.setInterval!==p},{setInterval:p})}),"./node_modules/core-js/modules/web.set-timeout.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/global-this.js"),A=l("./node_modules/core-js/internals/schedulers-fix.js"),p=A(f.setTimeout,!0);d({global:!0,bind:!0,forced:f.setTimeout!==p},{setTimeout:p})}),"./node_modules/core-js/modules/web.timers.js":(function(c,u,l){l("./node_modules/core-js/modules/web.set-interval.js"),l("./node_modules/core-js/modules/web.set-timeout.js")}),"./node_modules/dompurify/dist/purify.es.mjs":(function(c,u,l){l.r(u),l.d(u,{default:function(){return Yt}});const{entries:d,setPrototypeOf:f,isFrozen:A,getPrototypeOf:p,getOwnPropertyDescriptor:g}=Object;let{freeze:y,seal:x,create:w}=Object,{apply:E,construct:T}=typeof Reflect<"u"&&Reflect;y||(y=function(nr){return nr}),x||(x=function(nr){return nr}),E||(E=function(nr,Qt){for(var fr=arguments.length,zr=new Array(fr>2?fr-2:0),Yr=2;Yr<fr;Yr++)zr[Yr-2]=arguments[Yr];return nr.apply(Qt,zr)}),T||(T=function(nr){for(var Qt=arguments.length,fr=new Array(Qt>1?Qt-1:0),zr=1;zr<Qt;zr++)fr[zr-1]=arguments[zr];return new nr(...fr)});const C=ae(Array.prototype.forEach),N=ae(Array.prototype.lastIndexOf),I=ae(Array.prototype.pop),U=ae(Array.prototype.push),K=ae(Array.prototype.splice),Y=ae(String.prototype.toLowerCase),re=ae(String.prototype.toString),se=ae(String.prototype.match),Ae=ae(String.prototype.replace),we=ae(String.prototype.indexOf),Ce=ae(String.prototype.trim),ve=ae(Object.prototype.hasOwnProperty),ne=ae(RegExp.prototype.test),ce=De(TypeError);function ae(kr){return function(nr){nr instanceof RegExp&&(nr.lastIndex=0);for(var Qt=arguments.length,fr=new Array(Qt>1?Qt-1:0),zr=1;zr<Qt;zr++)fr[zr-1]=arguments[zr];return E(kr,nr,fr)}}function De(kr){return function(){for(var nr=arguments.length,Qt=new Array(nr),fr=0;fr<nr;fr++)Qt[fr]=arguments[fr];return T(kr,Qt)}}function Oe(kr,nr){let Qt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Y;f&&f(kr,null);let fr=nr.length;for(;fr--;){let zr=nr[fr];if(typeof zr=="string"){const Yr=Qt(zr);Yr!==zr&&(A(nr)||(nr[fr]=Yr),zr=Yr)}kr[zr]=!0}return kr}function be(kr){for(let nr=0;nr<kr.length;nr++)ve(kr,nr)||(kr[nr]=null);return kr}function de(kr){const nr=w(null);for(const[Qt,fr]of d(kr))ve(kr,Qt)&&(Array.isArray(fr)?nr[Qt]=be(fr):fr&&typeof fr=="object"&&fr.constructor===Object?nr[Qt]=de(fr):nr[Qt]=fr);return nr}function xe(kr,nr){for(;kr!==null;){const fr=g(kr,nr);if(fr){if(fr.get)return ae(fr.get);if(typeof fr.value=="function")return ae(fr.value)}kr=p(kr)}function Qt(){return null}return Qt}const je=y(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Me=y(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Re=y(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),it=y(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),ht=y(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Be=y(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),nt=y(["#text"]),Ge=y(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),ft=y(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Dt=y(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),rt=y(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),kt=x(/\{\{[\w\W]*|[\w\W]*\}\}/gm),_t=x(/<%[\w\W]*|[\w\W]*%>/gm),wt=x(/\$\{[\w\W]*/gm),Tt=x(/^data-[\-\w.\u00B7-\uFFFF]+$/),Er=x(/^aria-[\-\w]+$/),pr=x(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Xr=x(/^(?:\w+script|data):/i),yn=x(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Mn=x(/^html$/i),dn=x(/^[a-z][.\w]*(-[.\w]+)+$/i);var pn=Object.freeze({__proto__:null,ARIA_ATTR:Er,ATTR_WHITESPACE:yn,CUSTOM_ELEMENT:dn,DATA_ATTR:Tt,DOCTYPE_NAME:Mn,ERB_EXPR:_t,IS_ALLOWED_URI:pr,IS_SCRIPT_OR_DATA:Xr,MUSTACHE_EXPR:kt,TMPLIT_EXPR:wt});const mn={element:1,text:3,progressingInstruction:7,comment:8,document:9},Kn=function(){return typeof window>"u"?null:window},Zn=function(nr,Qt){if(typeof nr!="object"||typeof nr.createPolicy!="function")return null;let fr=null;const zr="data-tt-policy-suffix";Qt&&Qt.hasAttribute(zr)&&(fr=Qt.getAttribute(zr));const Yr="dompurify"+(fr?"#"+fr:"");try{return nr.createPolicy(Yr,{createHTML(Ln){return Ln},createScriptURL(Ln){return Ln}})}catch{return console.warn("TrustedTypes policy "+Yr+" could not be created."),null}},Li=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function ot(){let kr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Kn();const nr=It=>ot(It);if(nr.version="3.3.1",nr.removed=[],!kr||!kr.document||kr.document.nodeType!==mn.document||!kr.Element)return nr.isSupported=!1,nr;let{document:Qt}=kr;const fr=Qt,zr=fr.currentScript,{DocumentFragment:Yr,HTMLTemplateElement:Ln,Node:ln,Element:Jn,NodeFilter:rn,NamedNodeMap:Ur=kr.NamedNodeMap||kr.MozNamedAttrMap,HTMLFormElement:An,DOMParser:cn,trustedTypes:On}=kr,li=Jn.prototype,Cs=xe(li,"cloneNode"),Ds=xe(li,"remove"),js=xe(li,"nextSibling"),ei=xe(li,"childNodes"),sn=xe(li,"parentNode");if(typeof Ln=="function"){const It=Qt.createElement("template");It.content&&It.content.ownerDocument&&(Qt=It.content.ownerDocument)}let ss,ta="";const{implementation:_n,createNodeIterator:Cn,createDocumentFragment:Ms,getElementsByTagName:Qs}=Qt,{importNode:Fs}=fr;let rs=Li();nr.isSupported=typeof d=="function"&&typeof sn=="function"&&_n&&_n.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:qs,ERB_EXPR:Os,TMPLIT_EXPR:Qa,DATA_ATTR:ds,ARIA_ATTR:bu,IS_SCRIPT_OR_DATA:to,ATTR_WHITESPACE:Ml,CUSTOM_ELEMENT:nu}=pn;let{IS_ALLOWED_URI:ml}=pn,ra=null;const Ya=Oe({},[...je,...Me,...Re,...ht,...nt]);let Ws=null;const ba=Oe({},[...Ge,...ft,...Dt,...rt]);let Us=Object.seal(w(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),kl=null,po=null;const ro=Object.seal(w(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let pl=!0,Fl=!0,mc=!1,Vs=!0,ci=!1,Ns=!0,Ta=!1,Va=!1,Ca=!1,gi=!1,Xn=!1,hs=!1,wa=!0,Qo=!1;const Hi="user-content-";let Vo=!0,Ea=!1,Xs={},fs=null;const To=Oe({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let za=null;const zs=Oe({},["audio","video","img","source","image","track"]);let qa=null;const go=Oe({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),no="http://www.w3.org/1998/Math/MathML",zo="http://www.w3.org/2000/svg",Ht="http://www.w3.org/1999/xhtml";let V=Ht,ie=!1,le=null;const F=Oe({},[no,zo,Ht],re);let z=Oe({},["mi","mo","mn","ms","mtext"]),te=Oe({},["annotation-xml"]);const fe=Oe({},["title","style","font","a","script"]);let Se=null;const $e=["application/xhtml+xml","text/html"],ct="text/html";let P=null,k=null;const D=Qt.createElement("form"),G=function(Je){return Je instanceof RegExp||Je instanceof Function},X=function(){let Je=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(k&&k===Je)){if((!Je||typeof Je!="object")&&(Je={}),Je=de(Je),Se=$e.indexOf(Je.PARSER_MEDIA_TYPE)===-1?ct:Je.PARSER_MEDIA_TYPE,P=Se==="application/xhtml+xml"?re:Y,ra=ve(Je,"ALLOWED_TAGS")?Oe({},Je.ALLOWED_TAGS,P):Ya,Ws=ve(Je,"ALLOWED_ATTR")?Oe({},Je.ALLOWED_ATTR,P):ba,le=ve(Je,"ALLOWED_NAMESPACES")?Oe({},Je.ALLOWED_NAMESPACES,re):F,qa=ve(Je,"ADD_URI_SAFE_ATTR")?Oe(de(go),Je.ADD_URI_SAFE_ATTR,P):go,za=ve(Je,"ADD_DATA_URI_TAGS")?Oe(de(zs),Je.ADD_DATA_URI_TAGS,P):zs,fs=ve(Je,"FORBID_CONTENTS")?Oe({},Je.FORBID_CONTENTS,P):To,kl=ve(Je,"FORBID_TAGS")?Oe({},Je.FORBID_TAGS,P):de({}),po=ve(Je,"FORBID_ATTR")?Oe({},Je.FORBID_ATTR,P):de({}),Xs=ve(Je,"USE_PROFILES")?Je.USE_PROFILES:!1,pl=Je.ALLOW_ARIA_ATTR!==!1,Fl=Je.ALLOW_DATA_ATTR!==!1,mc=Je.ALLOW_UNKNOWN_PROTOCOLS||!1,Vs=Je.ALLOW_SELF_CLOSE_IN_ATTR!==!1,ci=Je.SAFE_FOR_TEMPLATES||!1,Ns=Je.SAFE_FOR_XML!==!1,Ta=Je.WHOLE_DOCUMENT||!1,gi=Je.RETURN_DOM||!1,Xn=Je.RETURN_DOM_FRAGMENT||!1,hs=Je.RETURN_TRUSTED_TYPE||!1,Ca=Je.FORCE_BODY||!1,wa=Je.SANITIZE_DOM!==!1,Qo=Je.SANITIZE_NAMED_PROPS||!1,Vo=Je.KEEP_CONTENT!==!1,Ea=Je.IN_PLACE||!1,ml=Je.ALLOWED_URI_REGEXP||pr,V=Je.NAMESPACE||Ht,z=Je.MATHML_TEXT_INTEGRATION_POINTS||z,te=Je.HTML_INTEGRATION_POINTS||te,Us=Je.CUSTOM_ELEMENT_HANDLING||{},Je.CUSTOM_ELEMENT_HANDLING&&G(Je.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Us.tagNameCheck=Je.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Je.CUSTOM_ELEMENT_HANDLING&&G(Je.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Us.attributeNameCheck=Je.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Je.CUSTOM_ELEMENT_HANDLING&&typeof Je.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Us.allowCustomizedBuiltInElements=Je.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),ci&&(Fl=!1),Xn&&(gi=!0),Xs&&(ra=Oe({},nt),Ws=[],Xs.html===!0&&(Oe(ra,je),Oe(Ws,Ge)),Xs.svg===!0&&(Oe(ra,Me),Oe(Ws,ft),Oe(Ws,rt)),Xs.svgFilters===!0&&(Oe(ra,Re),Oe(Ws,ft),Oe(Ws,rt)),Xs.mathMl===!0&&(Oe(ra,ht),Oe(Ws,Dt),Oe(Ws,rt))),Je.ADD_TAGS&&(typeof Je.ADD_TAGS=="function"?ro.tagCheck=Je.ADD_TAGS:(ra===Ya&&(ra=de(ra)),Oe(ra,Je.ADD_TAGS,P))),Je.ADD_ATTR&&(typeof Je.ADD_ATTR=="function"?ro.attributeCheck=Je.ADD_ATTR:(Ws===ba&&(Ws=de(Ws)),Oe(Ws,Je.ADD_ATTR,P))),Je.ADD_URI_SAFE_ATTR&&Oe(qa,Je.ADD_URI_SAFE_ATTR,P),Je.FORBID_CONTENTS&&(fs===To&&(fs=de(fs)),Oe(fs,Je.FORBID_CONTENTS,P)),Je.ADD_FORBID_CONTENTS&&(fs===To&&(fs=de(fs)),Oe(fs,Je.ADD_FORBID_CONTENTS,P)),Vo&&(ra["#text"]=!0),Ta&&Oe(ra,["html","head","body"]),ra.table&&(Oe(ra,["tbody"]),delete kl.tbody),Je.TRUSTED_TYPES_POLICY){if(typeof Je.TRUSTED_TYPES_POLICY.createHTML!="function")throw ce('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof Je.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw ce('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');ss=Je.TRUSTED_TYPES_POLICY,ta=ss.createHTML("")}else ss===void 0&&(ss=Zn(On,zr)),ss!==null&&typeof ta=="string"&&(ta=ss.createHTML(""));y&&y(Je),k=Je}},ee=Oe({},[...Me,...Re,...it]),ye=Oe({},[...ht,...Be]),he=function(Je){let zt=sn(Je);(!zt||!zt.tagName)&&(zt={namespaceURI:V,tagName:"template"});const Sr=Y(Je.tagName),ir=Y(zt.tagName);return le[Je.namespaceURI]?Je.namespaceURI===zo?zt.namespaceURI===Ht?Sr==="svg":zt.namespaceURI===no?Sr==="svg"&&(ir==="annotation-xml"||z[ir]):!!ee[Sr]:Je.namespaceURI===no?zt.namespaceURI===Ht?Sr==="math":zt.namespaceURI===zo?Sr==="math"&&te[ir]:!!ye[Sr]:Je.namespaceURI===Ht?zt.namespaceURI===zo&&!te[ir]||zt.namespaceURI===no&&!z[ir]?!1:!ye[Sr]&&(fe[Sr]||!ee[Sr]):!!(Se==="application/xhtml+xml"&&le[Je.namespaceURI]):!1},me=function(Je){U(nr.removed,{element:Je});try{sn(Je).removeChild(Je)}catch{Ds(Je)}},Ie=function(Je,zt){try{U(nr.removed,{attribute:zt.getAttributeNode(Je),from:zt})}catch{U(nr.removed,{attribute:null,from:zt})}if(zt.removeAttribute(Je),Je==="is")if(gi||Xn)try{me(zt)}catch{}else try{zt.setAttribute(Je,"")}catch{}},Qe=function(Je){let zt=null,Sr=null;if(Ca)Je="<remove></remove>"+Je;else{const xr=se(Je,/^[\r\n\t ]+/);Sr=xr&&xr[0]}Se==="application/xhtml+xml"&&V===Ht&&(Je='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Je+"</body></html>");const ir=ss?ss.createHTML(Je):Je;if(V===Ht)try{zt=new cn().parseFromString(ir,Se)}catch{}if(!zt||!zt.documentElement){zt=_n.createDocument(V,"template",null);try{zt.documentElement.innerHTML=ie?ta:ir}catch{}}const Mt=zt.body||zt.documentElement;return Je&&Sr&&Mt.insertBefore(Qt.createTextNode(Sr),Mt.childNodes[0]||null),V===Ht?Qs.call(zt,Ta?"html":"body")[0]:Ta?zt.documentElement:Mt},qe=function(Je){return Cn.call(Je.ownerDocument||Je,Je,rn.SHOW_ELEMENT|rn.SHOW_COMMENT|rn.SHOW_TEXT|rn.SHOW_PROCESSING_INSTRUCTION|rn.SHOW_CDATA_SECTION,null)},lt=function(Je){return Je instanceof An&&(typeof Je.nodeName!="string"||typeof Je.textContent!="string"||typeof Je.removeChild!="function"||!(Je.attributes instanceof Ur)||typeof Je.removeAttribute!="function"||typeof Je.setAttribute!="function"||typeof Je.namespaceURI!="string"||typeof Je.insertBefore!="function"||typeof Je.hasChildNodes!="function")},Te=function(Je){return typeof ln=="function"&&Je instanceof ln};function Et(It,Je,zt){C(It,Sr=>{Sr.call(nr,Je,zt,k)})}const at=function(Je){let zt=null;if(Et(rs.beforeSanitizeElements,Je,null),lt(Je))return me(Je),!0;const Sr=P(Je.nodeName);if(Et(rs.uponSanitizeElement,Je,{tagName:Sr,allowedTags:ra}),Ns&&Je.hasChildNodes()&&!Te(Je.firstElementChild)&&ne(/<[/\w!]/g,Je.innerHTML)&&ne(/<[/\w!]/g,Je.textContent)||Je.nodeType===mn.progressingInstruction||Ns&&Je.nodeType===mn.comment&&ne(/<[/\w]/g,Je.data))return me(Je),!0;if(!(ro.tagCheck instanceof Function&&ro.tagCheck(Sr))&&(!ra[Sr]||kl[Sr])){if(!kl[Sr]&&et(Sr)&&(Us.tagNameCheck instanceof RegExp&&ne(Us.tagNameCheck,Sr)||Us.tagNameCheck instanceof Function&&Us.tagNameCheck(Sr)))return!1;if(Vo&&!fs[Sr]){const ir=sn(Je)||Je.parentNode,Mt=ei(Je)||Je.childNodes;if(Mt&&ir){const xr=Mt.length;for(let st=xr-1;st>=0;--st){const mt=Cs(Mt[st],!0);mt.__removalCount=(Je.__removalCount||0)+1,ir.insertBefore(mt,js(Je))}}}return me(Je),!0}return Je instanceof Jn&&!he(Je)||(Sr==="noscript"||Sr==="noembed"||Sr==="noframes")&&ne(/<\/no(script|embed|frames)/i,Je.innerHTML)?(me(Je),!0):(ci&&Je.nodeType===mn.text&&(zt=Je.textContent,C([qs,Os,Qa],ir=>{zt=Ae(zt,ir," ")}),Je.textContent!==zt&&(U(nr.removed,{element:Je.cloneNode()}),Je.textContent=zt)),Et(rs.afterSanitizeElements,Je,null),!1)},Ct=function(Je,zt,Sr){if(wa&&(zt==="id"||zt==="name")&&(Sr in Qt||Sr in D))return!1;if(!(Fl&&!po[zt]&&ne(ds,zt))){if(!(pl&&ne(bu,zt))){if(!(ro.attributeCheck instanceof Function&&ro.attributeCheck(zt,Je))){if(!Ws[zt]||po[zt]){if(!(et(Je)&&(Us.tagNameCheck instanceof RegExp&&ne(Us.tagNameCheck,Je)||Us.tagNameCheck instanceof Function&&Us.tagNameCheck(Je))&&(Us.attributeNameCheck instanceof RegExp&&ne(Us.attributeNameCheck,zt)||Us.attributeNameCheck instanceof Function&&Us.attributeNameCheck(zt,Je))||zt==="is"&&Us.allowCustomizedBuiltInElements&&(Us.tagNameCheck instanceof RegExp&&ne(Us.tagNameCheck,Sr)||Us.tagNameCheck instanceof Function&&Us.tagNameCheck(Sr))))return!1}else if(!qa[zt]){if(!ne(ml,Ae(Sr,Ml,""))){if(!((zt==="src"||zt==="xlink:href"||zt==="href")&&Je!=="script"&&we(Sr,"data:")===0&&za[Je])){if(!(mc&&!ne(to,Ae(Sr,Ml,"")))){if(Sr)return!1}}}}}}}return!0},et=function(Je){return Je!=="annotation-xml"&&se(Je,nu)},Pt=function(Je){Et(rs.beforeSanitizeAttributes,Je,null);const{attributes:zt}=Je;if(!zt||lt(Je))return;const Sr={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Ws,forceKeepAttr:void 0};let ir=zt.length;for(;ir--;){const Mt=zt[ir],{name:xr,namespaceURI:st,value:mt}=Mt,Ot=P(xr),Rt=mt;let Ar=xr==="value"?Rt:Ce(Rt);if(Sr.attrName=Ot,Sr.attrValue=Ar,Sr.keepAttr=!0,Sr.forceKeepAttr=void 0,Et(rs.uponSanitizeAttribute,Je,Sr),Ar=Sr.attrValue,Qo&&(Ot==="id"||Ot==="name")&&(Ie(xr,Je),Ar=Hi+Ar),Ns&&ne(/((--!?|])>)|<\/(style|title|textarea)/i,Ar)){Ie(xr,Je);continue}if(Ot==="attributename"&&se(Ar,"href")){Ie(xr,Je);continue}if(Sr.forceKeepAttr)continue;if(!Sr.keepAttr){Ie(xr,Je);continue}if(!Vs&&ne(/\/>/i,Ar)){Ie(xr,Je);continue}ci&&C([qs,Os,Qa],Br=>{Ar=Ae(Ar,Br," ")});const jr=P(Je.nodeName);if(!Ct(jr,Ot,Ar)){Ie(xr,Je);continue}if(ss&&typeof On=="object"&&typeof On.getAttributeType=="function"&&!st)switch(On.getAttributeType(jr,Ot)){case"TrustedHTML":{Ar=ss.createHTML(Ar);break}case"TrustedScriptURL":{Ar=ss.createScriptURL(Ar);break}}if(Ar!==Rt)try{st?Je.setAttributeNS(st,xr,Ar):Je.setAttribute(xr,Ar),lt(Je)?me(Je):I(nr.removed)}catch{Ie(xr,Je)}}Et(rs.afterSanitizeAttributes,Je,null)},qt=function It(Je){let zt=null;const Sr=qe(Je);for(Et(rs.beforeSanitizeShadowDOM,Je,null);zt=Sr.nextNode();)Et(rs.uponSanitizeShadowNode,zt,null),at(zt),Pt(zt),zt.content instanceof Yr&&It(zt.content);Et(rs.afterSanitizeShadowDOM,Je,null)};return nr.sanitize=function(It){let Je=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},zt=null,Sr=null,ir=null,Mt=null;if(ie=!It,ie&&(It="<!-->"),typeof It!="string"&&!Te(It))if(typeof It.toString=="function"){if(It=It.toString(),typeof It!="string")throw ce("dirty is not a string, aborting")}else throw ce("toString is not a function");if(!nr.isSupported)return It;if(Va||X(Je),nr.removed=[],typeof It=="string"&&(Ea=!1),Ea){if(It.nodeName){const mt=P(It.nodeName);if(!ra[mt]||kl[mt])throw ce("root node is forbidden and cannot be sanitized in-place")}}else if(It instanceof ln)zt=Qe("<!---->"),Sr=zt.ownerDocument.importNode(It,!0),Sr.nodeType===mn.element&&Sr.nodeName==="BODY"||Sr.nodeName==="HTML"?zt=Sr:zt.appendChild(Sr);else{if(!gi&&!ci&&!Ta&&It.indexOf("<")===-1)return ss&&hs?ss.createHTML(It):It;if(zt=Qe(It),!zt)return gi?null:hs?ta:""}zt&&Ca&&me(zt.firstChild);const xr=qe(Ea?It:zt);for(;ir=xr.nextNode();)at(ir),Pt(ir),ir.content instanceof Yr&&qt(ir.content);if(Ea)return It;if(gi){if(Xn)for(Mt=Ms.call(zt.ownerDocument);zt.firstChild;)Mt.appendChild(zt.firstChild);else Mt=zt;return(Ws.shadowroot||Ws.shadowrootmode)&&(Mt=Fs.call(fr,Mt,!0)),Mt}let st=Ta?zt.outerHTML:zt.innerHTML;return Ta&&ra["!doctype"]&&zt.ownerDocument&&zt.ownerDocument.doctype&&zt.ownerDocument.doctype.name&&ne(Mn,zt.ownerDocument.doctype.name)&&(st="<!DOCTYPE "+zt.ownerDocument.doctype.name+`>
`+st),ci&&C([qs,Os,Qa],mt=>{st=Ae(st,mt," ")}),ss&&hs?ss.createHTML(st):st},nr.setConfig=function(){let It=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};X(It),Va=!0},nr.clearConfig=function(){k=null,Va=!1},nr.isValidAttribute=function(It,Je,zt){k||X({});const Sr=P(It),ir=P(Je);return Ct(Sr,ir,zt)},nr.addHook=function(It,Je){typeof Je=="function"&&U(rs[It],Je)},nr.removeHook=function(It,Je){if(Je!==void 0){const zt=N(rs[It],Je);return zt===-1?void 0:K(rs[It],zt,1)[0]}return I(rs[It])},nr.removeHooks=function(It){rs[It]=[]},nr.removeAllHooks=function(){rs=Li()},nr}var Yt=ot()}),"./node_modules/fast-png/lib-esm/PngDecoder.js":(function(c,u,l){l.r(u),l.d(u,{default:function(){return E}});var d=l("./node_modules/iobuffer/lib-esm/IOBuffer.js"),f=l("./node_modules/pako/dist/pako.esm.mjs"),A=l("./node_modules/fast-png/lib-esm/helpers/crc.js"),p=l("./node_modules/fast-png/lib-esm/helpers/decodeInterlaceAdam7.js"),g=l("./node_modules/fast-png/lib-esm/helpers/decodeInterlaceNull.js"),y=l("./node_modules/fast-png/lib-esm/helpers/signature.js"),x=l("./node_modules/fast-png/lib-esm/helpers/text.js"),w=l("./node_modules/fast-png/lib-esm/internalTypes.js");class E extends d.IOBuffer{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(N,I={}){super(N);const{checkCrc:U=!1}=I;this._checkCrc=U,this._inflator=new f.Inflate,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=w.CompressionMethod.UNKNOWN,this._filterMethod=w.FilterMethod.UNKNOWN,this._interlaceMethod=w.InterlaceMethod.UNKNOWN,this._colorType=w.ColorType.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for((0,y.checkSignature)(this);!this._end;){const N=this.readUint32(),I=this.readChars(4);this.decodeChunk(N,I)}return this.decodeImage(),this._png}decodeApng(){for((0,y.checkSignature)(this);!this._end;){const N=this.readUint32(),I=this.readChars(4);this.decodeApngChunk(N,I)}return this.decodeApngImage(),this._apng}decodeChunk(N,I){const U=this.offset;switch(I){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(N);break;case"IDAT":this.decodeIDAT(N);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(N);break;case"iCCP":this.decodeiCCP(N);break;case x.textChunkName:(0,x.decodetEXt)(this._png.text,this,N);break;case"pHYs":this.decodepHYs();break;default:this.skip(N);break}if(this.offset-U!==N)throw new Error(`Length mismatch while decoding chunk ${I}`);this._checkCrc?(0,A.checkCrc)(this,N+4,I):this.skip(4)}decodeApngChunk(N,I){const U=this.offset;switch(I!=="fdAT"&&I!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),I){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(N);break;default:this.decodeChunk(N,I),this.offset=U+N;break}if(this.offset-U!==N)throw new Error(`Length mismatch while decoding chunk ${I}`);this._checkCrc?(0,A.checkCrc)(this,N+4,I):this.skip(4)}decodeIHDR(){const N=this._png;N.width=this.readUint32(),N.height=this.readUint32(),N.depth=T(this.readUint8());const I=this.readUint8();this._colorType=I;let U;switch(I){case w.ColorType.GREYSCALE:U=1;break;case w.ColorType.TRUECOLOUR:U=3;break;case w.ColorType.INDEXED_COLOUR:U=1;break;case w.ColorType.GREYSCALE_ALPHA:U=2;break;case w.ColorType.TRUECOLOUR_ALPHA:U=4;break;case w.ColorType.UNKNOWN:default:throw new Error(`Unknown color type: ${I}`)}if(this._png.channels=U,this._compressionMethod=this.readUint8(),this._compressionMethod!==w.CompressionMethod.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const N={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(N)}decodePLTE(N){if(N%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${N}`);const I=N/3;this._hasPalette=!0;const U=[];this._palette=U;for(let K=0;K<I;K++)U.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(N){this._writingDataChunks=!0;const I=N,U=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,U,I)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(N)}decodeFDAT(N){this._writingDataChunks=!0;let I=N,U=this.offset+this.byteOffset;if(U+=4,I-=4,this._inflator.push(new Uint8Array(this.buffer,U,I)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(N)}decodetRNS(N){switch(this._colorType){case w.ColorType.GREYSCALE:case w.ColorType.TRUECOLOUR:{if(N%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${N}`);if(N/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${N/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(N/2);for(let I=0;I<N/2;I++)this._transparency[I]=this.readUint16();break}case w.ColorType.INDEXED_COLOUR:{if(N>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${N} vs ${this._palette.length})`);let I=0;for(;I<N;I++){const U=this.readByte();this._palette[I].push(U)}for(;I<this._palette.length;I++)this._palette[I].push(255);break}case w.ColorType.UNKNOWN:case w.ColorType.GREYSCALE_ALPHA:case w.ColorType.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(N){const I=(0,x.readKeyword)(this),U=this.readUint8();if(U!==w.CompressionMethod.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${U}`);const K=this.readBytes(N-I.length-2);this._png.iccEmbeddedProfile={name:I,profile:(0,f.inflate)(K)}}decodepHYs(){const N=this.readUint32(),I=this.readUint32(),U=this.readByte();this._png.resolution={x:N,y:I,unit:U}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let N=0;N<this._numberOfFrames;N++){const I={sequenceNumber:this._frames[N].sequenceNumber,delayNumber:this._frames[N].delayNumber,delayDenominator:this._frames[N].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},U=this._frames.at(N);if(U){if(U.data=(0,g.decodeInterlaceNull)({data:U.data,width:U.width,height:U.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),N===0||U.xOffset===0&&U.yOffset===0&&U.width===this._png.width&&U.height===this._png.height)I.data=U.data;else{const K=this._apng.frames.at(N-1);this.disposeFrame(U,K,I),this.addFrameDataToCanvas(I,U)}this._apng.frames.push(I)}}return this._apng}disposeFrame(N,I,U){switch(N.disposeOp){case w.DisposeOpType.NONE:break;case w.DisposeOpType.BACKGROUND:for(let K=0;K<this._png.height;K++)for(let Y=0;Y<this._png.width;Y++){const re=(K*N.width+Y)*this._png.channels;for(let se=0;se<this._png.channels;se++)U.data[re+se]=0}break;case w.DisposeOpType.PREVIOUS:U.data.set(I.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(N,I){const U=1<<this._png.depth,K=(Y,re)=>{const se=((Y+I.yOffset)*this._png.width+I.xOffset+re)*this._png.channels,Ae=(Y*I.width+re)*this._png.channels;return{index:se,frameIndex:Ae}};switch(I.blendOp){case w.BlendOpType.SOURCE:for(let Y=0;Y<I.height;Y++)for(let re=0;re<I.width;re++){const{index:se,frameIndex:Ae}=K(Y,re);for(let we=0;we<this._png.channels;we++)N.data[se+we]=I.data[Ae+we]}break;case w.BlendOpType.OVER:for(let Y=0;Y<I.height;Y++)for(let re=0;re<I.width;re++){const{index:se,frameIndex:Ae}=K(Y,re);for(let we=0;we<this._png.channels;we++){const Ce=I.data[Ae+this._png.channels-1]/U,ve=we%(this._png.channels-1)===0?1:I.data[Ae+we],ne=Math.floor(Ce*ve+(1-Ce)*N.data[se+we]);N.data[se+we]+=ne}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const N=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==w.FilterMethod.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===w.InterlaceMethod.NO_INTERLACE)this._png.data=(0,g.decodeInterlaceNull)({data:N,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===w.InterlaceMethod.ADAM7)this._png.data=(0,p.decodeInterlaceAdam7)({data:N,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const N=this._inflator.result,I=this._frames.at(-1);I?I.data=N:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:w.DisposeOpType.NONE,blendOp:w.BlendOpType.SOURCE,data:N}),this._inflator=new f.Inflate,this._writingDataChunks=!1}}function T(C){if(C!==1&&C!==2&&C!==4&&C!==8&&C!==16)throw new Error(`invalid bit depth: ${C}`);return C}}),"./node_modules/fast-png/lib-esm/PngEncoder.js":(function(c,u,l){l.r(u),l.d(u,{default:function(){return w}});var d=l("./node_modules/iobuffer/lib-esm/IOBuffer.js"),f=l("./node_modules/pako/dist/pako.esm.mjs"),A=l("./node_modules/fast-png/lib-esm/helpers/crc.js"),p=l("./node_modules/fast-png/lib-esm/helpers/signature.js"),g=l("./node_modules/fast-png/lib-esm/helpers/text.js"),y=l("./node_modules/fast-png/lib-esm/internalTypes.js");const x={level:3};class w extends d.IOBuffer{_png;_zlibOptions;_colorType;_interlaceMethod;constructor(K,Y={}){super(),this._colorType=y.ColorType.UNKNOWN,this._zlibOptions={...x,...Y.zlib},this._png=this._checkData(K),this._interlaceMethod=(Y.interlace==="Adam7"?y.InterlaceMethod.ADAM7:y.InterlaceMethod.NO_INTERLACE)??y.InterlaceMethod.NO_INTERLACE,this.setBigEndian()}encode(){if((0,p.writeSignature)(this),this.encodeIHDR(),this._png.palette&&(this.encodePLTE(),this._png.palette[0].length===4&&this.encodeTRNS()),this.encodeData(),this._png.text)for(const[K,Y]of Object.entries(this._png.text))(0,g.encodetEXt)(this,K,Y);return this.encodeIEND(),this.toArray()}encodeIHDR(){this.writeUint32(13),this.writeChars("IHDR"),this.writeUint32(this._png.width),this.writeUint32(this._png.height),this.writeByte(this._png.depth),this.writeByte(this._colorType),this.writeByte(y.CompressionMethod.DEFLATE),this.writeByte(y.FilterMethod.ADAPTIVE),this.writeByte(this._interlaceMethod),(0,A.writeCrc)(this,17)}encodeIEND(){this.writeUint32(0),this.writeChars("IEND"),(0,A.writeCrc)(this,4)}encodePLTE(){const K=this._png.palette?.length*3;this.writeUint32(K),this.writeChars("PLTE");for(const Y of this._png.palette)this.writeByte(Y[0]),this.writeByte(Y[1]),this.writeByte(Y[2]);(0,A.writeCrc)(this,4+K)}encodeTRNS(){const K=this._png.palette.filter(Y=>Y.at(-1)!==255);this.writeUint32(K.length),this.writeChars("tRNS");for(const Y of K)this.writeByte(Y.at(-1));(0,A.writeCrc)(this,4+K.length)}encodeIDAT(K){this.writeUint32(K.length),this.writeChars("IDAT"),this.writeBytes(K),(0,A.writeCrc)(this,K.length+4)}encodeData(){const{width:K,height:Y,channels:re,depth:se,data:Ae}=this._png,we=se<=8?Math.ceil(K*se/8)*re:Math.ceil(K*se/8*re/2),Ce=new d.IOBuffer().setBigEndian();let ve=0;if(this._interlaceMethod===y.InterlaceMethod.NO_INTERLACE)for(let ae=0;ae<Y;ae++)Ce.writeByte(0),se===16?ve=I(Ae,Ce,we,ve):ve=C(Ae,Ce,we,ve);else this._interlaceMethod===y.InterlaceMethod.ADAM7&&(ve=N(this._png,Ae,Ce,ve));const ne=Ce.toArray(),ce=(0,f.deflate)(ne,this._zlibOptions);this.encodeIDAT(ce)}_checkData(K){const{colorType:Y,channels:re,depth:se}=T(K,K.palette),Ae={width:E(K.width,"width"),height:E(K.height,"height"),channels:re,data:K.data,depth:se,text:K.text,palette:K.palette};this._colorType=Y;const we=se<8?Math.ceil(Ae.width*se/8)*Ae.height*re:Ae.width*Ae.height*re;if(Ae.data.length!==we)throw new RangeError(`wrong data size. Found ${Ae.data.length}, expected ${we}`);return Ae}}function E(U,K){if(Number.isInteger(U)&&U>0)return U;throw new TypeError(`${K} must be a positive integer`)}function T(U,K){const{channels:Y=4,depth:re=8}=U;if(Y!==4&&Y!==3&&Y!==2&&Y!==1)throw new RangeError(`unsupported number of channels: ${Y}`);const se={channels:Y,depth:re,colorType:y.ColorType.UNKNOWN};switch(Y){case 4:se.colorType=y.ColorType.TRUECOLOUR_ALPHA;break;case 3:se.colorType=y.ColorType.TRUECOLOUR;break;case 1:K?se.colorType=y.ColorType.INDEXED_COLOUR:se.colorType=y.ColorType.GREYSCALE;break;case 2:se.colorType=y.ColorType.GREYSCALE_ALPHA;break;default:throw new Error("unsupported number of channels")}return se}function C(U,K,Y,re){for(let se=0;se<Y;se++)K.writeByte(U[re++]);return re}function N(U,K,Y,re){const se=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],{width:Ae,height:we,channels:Ce,depth:ve}=U;let ne=0;ve===16?ne=Ce*ve/8/2:ne=Ce*ve/8;for(let ce=0;ce<7;ce++){const ae=se[ce],De=Math.floor((Ae-ae.x+ae.xStep-1)/ae.xStep),Oe=Math.floor((we-ae.y+ae.yStep-1)/ae.yStep);if(De<=0||Oe<=0)continue;const be=De*ne;for(let de=0;de<Oe;de++){const xe=ae.y+de*ae.yStep,je=ve<=8?new Uint8Array(be):new Uint16Array(be);let Me=0;for(let Re=0;Re<De;Re++){const it=ae.x+Re*ae.xStep;if(it<Ae&&xe<we){const ht=(xe*Ae+it)*ne;for(let Be=0;Be<ne;Be++)je[Me++]=K[ht+Be]}}if(Y.writeByte(0),ve===8)Y.writeBytes(je);else if(ve===16)for(const Re of je)Y.writeByte(Re>>8&255),Y.writeByte(Re&255)}}return re}function I(U,K,Y,re){for(let se=0;se<Y;se++)K.writeUint16(U[re++]);return re}}),"./node_modules/fast-png/lib-esm/convertIndexedToRgb.js":(function(c,u,l){l.r(u),l.d(u,{convertIndexedToRgb:function(){return d}});function d(A){const p=A.palette,g=A.depth;if(!p)throw new Error("Color palette is undefined.");f(A);const y=A.width*A.height,x=y*p[0].length,w=new Uint8Array(x);let E=0,T=0;const C=new Uint8Array(y);let N=255;switch(g){case 1:N=128;break;case 2:N=192;break;case 4:N=240;break;case 8:N=255;break;default:throw new Error("Incorrect depth value")}for(const I of A.data){let U=N,K=8;for(;U&&(K-=g,C[E++]=(I&U)>>K,U=U>>g,E%A.width!==0););}if(A.palette)for(const I of C){const U=A.palette.at(I);if(!U)throw new Error("Incorrect index of palette color");w.set(U,T),T+=U.length}return w}function f(A){const p=A.depth<8?Math.ceil(A.width*A.depth/8)*A.height*A.channels:A.width*A.height*A.channels;if(A.data.length!==p)throw new RangeError(`wrong data size. Found ${A.data.length}, expected ${p}`)}}),"./node_modules/fast-png/lib-esm/helpers/applyUnfilter.js":(function(c,u,l){l.r(u),l.d(u,{applyUnfilter:function(){return f}});var d=l("./node_modules/fast-png/lib-esm/helpers/unfilter.js");function f(A,p,g,y,x,w){switch(A){case 0:(0,d.unfilterNone)(p,g,x);break;case 1:(0,d.unfilterSub)(p,g,x,w);break;case 2:(0,d.unfilterUp)(p,g,y,x);break;case 3:(0,d.unfilterAverage)(p,g,y,x,w);break;case 4:(0,d.unfilterPaeth)(p,g,y,x,w);break;default:throw new Error(`Unsupported filter: ${A}`)}}}),"./node_modules/fast-png/lib-esm/helpers/crc.js":(function(c,u,l){l.r(u),l.d(u,{checkCrc:function(){return g},writeCrc:function(){return y}});const d=[];for(let x=0;x<256;x++){let w=x;for(let E=0;E<8;E++)w&1?w=3988292384^w>>>1:w=w>>>1;d[x]=w}const f=4294967295;function A(x,w,E){let T=x;for(let C=0;C<E;C++)T=d[(T^w[C])&255]^T>>>8;return T}function p(x,w){return(A(f,x,w)^f)>>>0}function g(x,w,E){const T=x.readUint32(),C=p(new Uint8Array(x.buffer,x.byteOffset+x.offset-w-4,w),w);if(C!==T)throw new Error(`CRC mismatch for chunk ${E}. Expected ${T}, found ${C}`)}function y(x,w){x.writeUint32(p(new Uint8Array(x.buffer,x.byteOffset+x.offset-w,w),w))}}),"./node_modules/fast-png/lib-esm/helpers/decodeInterlaceAdam7.js":(function(c,u,l){l.r(u),l.d(u,{decodeInterlaceAdam7:function(){return g}});var d=l("./node_modules/fast-png/lib-esm/helpers/applyUnfilter.js");const f=new Uint16Array([255]),p=new Uint8Array(f.buffer)[0]===255;function g(x){const{data:w,width:E,height:T,channels:C,depth:N}=x,I=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],U=Math.ceil(N/8)*C,K=new Uint8Array(T*E*U);let Y=0;for(let re=0;re<7;re++){const se=I[re],Ae=Math.ceil((E-se.x)/se.xStep),we=Math.ceil((T-se.y)/se.yStep);if(Ae<=0||we<=0)continue;const Ce=Ae*U,ve=new Uint8Array(Ce);for(let ne=0;ne<we;ne++){const ce=w[Y++],ae=w.subarray(Y,Y+Ce);Y+=Ce;const De=new Uint8Array(Ce);(0,d.applyUnfilter)(ce,ae,De,ve,Ce,U),ve.set(De);for(let Oe=0;Oe<Ae;Oe++){const be=se.x+Oe*se.xStep,de=se.y+ne*se.yStep;if(!(be>=E||de>=T))for(let xe=0;xe<U;xe++)K[(de*E+be)*U+xe]=De[Oe*U+xe]}}}if(N===16){const re=new Uint16Array(K.buffer);if(p)for(let se=0;se<re.length;se++)re[se]=y(re[se]);return re}else return K}function y(x){return(x&255)<<8|x>>8&255}}),"./node_modules/fast-png/lib-esm/helpers/decodeInterlaceNull.js":(function(c,u,l){l.r(u),l.d(u,{decodeInterlaceNull:function(){return y}});var d=l("./node_modules/fast-png/lib-esm/helpers/unfilter.js");const f=new Uint16Array([255]),p=new Uint8Array(f.buffer)[0]===255,g=new Uint8Array(0);function y(w){const{data:E,width:T,height:C,channels:N,depth:I}=w,U=Math.ceil(I/8)*N,K=Math.ceil(I/8*N*T),Y=new Uint8Array(C*K);let re=g,se=0,Ae,we;for(let Ce=0;Ce<C;Ce++){switch(Ae=E.subarray(se+1,se+1+K),we=Y.subarray(Ce*K,(Ce+1)*K),E[se]){case 0:(0,d.unfilterNone)(Ae,we,K);break;case 1:(0,d.unfilterSub)(Ae,we,K,U);break;case 2:(0,d.unfilterUp)(Ae,we,re,K);break;case 3:(0,d.unfilterAverage)(Ae,we,re,K,U);break;case 4:(0,d.unfilterPaeth)(Ae,we,re,K,U);break;default:throw new Error(`Unsupported filter: ${E[se]}`)}re=we,se+=K+1}if(I===16){const Ce=new Uint16Array(Y.buffer);if(p)for(let ve=0;ve<Ce.length;ve++)Ce[ve]=x(Ce[ve]);return Ce}else return Y}function x(w){return(w&255)<<8|w>>8&255}}),"./node_modules/fast-png/lib-esm/helpers/signature.js":(function(c,u,l){l.r(u),l.d(u,{checkSignature:function(){return A},hasPngSignature:function(){return p},writeSignature:function(){return f}});const d=Uint8Array.of(137,80,78,71,13,10,26,10);function f(g){g.writeBytes(d)}function A(g){if(!p(g.readBytes(d.length)))throw new Error("wrong PNG signature")}function p(g){if(g.length<d.length)return!1;for(let y=0;y<d.length;y++)if(g[y]!==d[y])return!1;return!0}}),"./node_modules/fast-png/lib-esm/helpers/text.js":(function(c,u,l){l.r(u),l.d(u,{decodetEXt:function(){return w},encodetEXt:function(){return E},readKeyword:function(){return T},readLatin1:function(){return C},textChunkName:function(){return f}});var d=l("./node_modules/fast-png/lib-esm/helpers/crc.js");const f="tEXt",A=0,p=new TextDecoder("latin1");function g(N){if(x(N),N.length===0||N.length>79)throw new Error("keyword length must be between 1 and 79")}const y=/^[\u0000-\u00FF]*$/;function x(N){if(!y.test(N))throw new Error("invalid latin1 text")}function w(N,I,U){const K=T(I);N[K]=C(I,U-K.length-1)}function E(N,I,U){g(I),x(U);const K=I.length+1+U.length;N.writeUint32(K),N.writeChars(f),N.writeChars(I),N.writeByte(A),N.writeChars(U),(0,d.writeCrc)(N,K+4)}function T(N){for(N.mark();N.readByte()!==A;);const I=N.offset;N.reset();const U=p.decode(N.readBytes(I-N.offset-1));return N.skip(1),g(U),U}function C(N,I){return p.decode(N.readBytes(I))}}),"./node_modules/fast-png/lib-esm/helpers/unfilter.js":(function(c,u,l){l.r(u),l.d(u,{unfilterAverage:function(){return p},unfilterNone:function(){return d},unfilterPaeth:function(){return g},unfilterSub:function(){return f},unfilterUp:function(){return A}});function d(x,w,E){for(let T=0;T<E;T++)w[T]=x[T]}function f(x,w,E,T){let C=0;for(;C<T;C++)w[C]=x[C];for(;C<E;C++)w[C]=x[C]+w[C-T]&255}function A(x,w,E,T){let C=0;if(E.length===0)for(;C<T;C++)w[C]=x[C];else for(;C<T;C++)w[C]=x[C]+E[C]&255}function p(x,w,E,T,C){let N=0;if(E.length===0){for(;N<C;N++)w[N]=x[N];for(;N<T;N++)w[N]=x[N]+(w[N-C]>>1)&255}else{for(;N<C;N++)w[N]=x[N]+(E[N]>>1)&255;for(;N<T;N++)w[N]=x[N]+(w[N-C]+E[N]>>1)&255}}function g(x,w,E,T,C){let N=0;if(E.length===0){for(;N<C;N++)w[N]=x[N];for(;N<T;N++)w[N]=x[N]+w[N-C]&255}else{for(;N<C;N++)w[N]=x[N]+E[N]&255;for(;N<T;N++)w[N]=x[N]+y(w[N-C],E[N],E[N-C])&255}}function y(x,w,E){const T=x+w-E,C=Math.abs(T-x),N=Math.abs(T-w),I=Math.abs(T-E);return C<=N&&C<=I?x:N<=I?w:E}}),"./node_modules/fast-png/lib-esm/index.js":(function(c,u,l){l.r(u),l.d(u,{ResolutionUnitSpecifier:function(){return p.ResolutionUnitSpecifier},convertIndexedToRgb:function(){return g.convertIndexedToRgb},decode:function(){return y},decodeApng:function(){return w},encode:function(){return x},hasPngSignature:function(){return A.hasPngSignature}});var d=l("./node_modules/fast-png/lib-esm/PngDecoder.js"),f=l("./node_modules/fast-png/lib-esm/PngEncoder.js"),A=l("./node_modules/fast-png/lib-esm/helpers/signature.js"),p=l("./node_modules/fast-png/lib-esm/types.js"),g=l("./node_modules/fast-png/lib-esm/convertIndexedToRgb.js");function y(E,T){return new d.default(E,T).decode()}function x(E,T){return new f.default(E,T).encode()}function w(E,T){return new d.default(E,T).decodeApng()}}),"./node_modules/fast-png/lib-esm/internalTypes.js":(function(c,u,l){l.r(u),l.d(u,{BlendOpType:function(){return y},ColorType:function(){return d},CompressionMethod:function(){return f},DisposeOpType:function(){return g},FilterMethod:function(){return A},InterlaceMethod:function(){return p}});const d={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},f={UNKNOWN:-1,DEFLATE:0},A={UNKNOWN:-1,ADAPTIVE:0},p={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},g={NONE:0,BACKGROUND:1,PREVIOUS:2},y={SOURCE:0,OVER:1}}),"./node_modules/fast-png/lib-esm/types.js":(function(c,u,l){l.r(u),l.d(u,{ResolutionUnitSpecifier:function(){return d}});var d;(function(f){f[f.UNKNOWN=0]="UNKNOWN",f[f.METRE=1]="METRE"})(d||(d={}))}),"./node_modules/fflate/esm/browser.js":(function(c,u,l){l.r(u),l.d(u,{AsyncCompress:function(){return rs},AsyncDecompress:function(){return po},AsyncDeflate:function(){return sn},AsyncGunzip:function(){return ds},AsyncGzip:function(){return rs},AsyncInflate:function(){return Cn},AsyncUnzipInflate:function(){return zo},AsyncUnzlib:function(){return Ws},AsyncZipDeflate:function(){return To},AsyncZlib:function(){return nu},Compress:function(){return Fs},DecodeUTF8:function(){return Ta},Decompress:function(){return kl},Deflate:function(){return ei},EncodeUTF8:function(){return Va},FlateErrorCode:function(){return je},Gunzip:function(){return Qa},Gzip:function(){return Fs},Inflate:function(){return _n},Unzip:function(){return Ht},UnzipInflate:function(){return no},UnzipPassThrough:function(){return go},Unzlib:function(){return Ya},Zip:function(){return za},ZipDeflate:function(){return fs},ZipPassThrough:function(){return Xs},Zlib:function(){return Ml},compress:function(){return qs},compressSync:function(){return Os},decompress:function(){return ro},decompressSync:function(){return pl},deflate:function(){return ss},deflateSync:function(){return ta},gunzip:function(){return bu},gunzipSync:function(){return to},gzip:function(){return qs},gzipSync:function(){return Os},inflate:function(){return Ms},inflateSync:function(){return Qs},strFromU8:function(){return gi},strToU8:function(){return Ca},unzip:function(){return ie},unzipSync:function(){return le},unzlib:function(){return ba},unzlibSync:function(){return Us},zip:function(){return zs},zipSync:function(){return qa},zlib:function(){return ml},zlibSync:function(){return ra}});var d={},f=(function(F,z,te,fe,Se){var $e=new Worker(d[z]||(d[z]=URL.createObjectURL(new Blob([F+';addEventListener("error",function(e){e=e.error;postMessage({$e$:[e.message,e.code,e.stack]})})'],{type:"text/javascript"}))));return $e.onmessage=function(ct){var P=ct.data,k=P.$e$;if(k){var D=new Error(k[0]);D.code=k[1],D.stack=k[2],Se(D,null)}else Se(null,P)},$e.postMessage(te,fe),$e}),A=Uint8Array,p=Uint16Array,g=Int32Array,y=new A([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),x=new A([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),w=new A([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),E=function(F,z){for(var te=new p(31),fe=0;fe<31;++fe)te[fe]=z+=1<<F[fe-1];for(var Se=new g(te[30]),fe=1;fe<30;++fe)for(var $e=te[fe];$e<te[fe+1];++$e)Se[$e]=$e-te[fe]<<5|fe;return{b:te,r:Se}},T=E(y,2),C=T.b,N=T.r;C[28]=258,N[258]=28;for(var I=E(x,0),U=I.b,K=I.r,Y=new p(32768),re=0;re<32768;++re){var se=(re&43690)>>1|(re&21845)<<1;se=(se&52428)>>2|(se&13107)<<2,se=(se&61680)>>4|(se&3855)<<4,Y[re]=((se&65280)>>8|(se&255)<<8)>>1}for(var Ae=(function(F,z,te){for(var fe=F.length,Se=0,$e=new p(z);Se<fe;++Se)F[Se]&&++$e[F[Se]-1];var ct=new p(z);for(Se=1;Se<z;++Se)ct[Se]=ct[Se-1]+$e[Se-1]<<1;var P;if(te){P=new p(1<<z);var k=15-z;for(Se=0;Se<fe;++Se)if(F[Se])for(var D=Se<<4|F[Se],G=z-F[Se],X=ct[F[Se]-1]++<<G,ee=X|(1<<G)-1;X<=ee;++X)P[Y[X]>>k]=D}else for(P=new p(fe),Se=0;Se<fe;++Se)F[Se]&&(P[Se]=Y[ct[F[Se]-1]++]>>15-F[Se]);return P}),we=new A(288),re=0;re<144;++re)we[re]=8;for(var re=144;re<256;++re)we[re]=9;for(var re=256;re<280;++re)we[re]=7;for(var re=280;re<288;++re)we[re]=8;for(var Ce=new A(32),re=0;re<32;++re)Ce[re]=5;var ve=Ae(we,9,0),ne=Ae(we,9,1),ce=Ae(Ce,5,0),ae=Ae(Ce,5,1),De=function(F){for(var z=F[0],te=1;te<F.length;++te)F[te]>z&&(z=F[te]);return z},Oe=function(F,z,te){var fe=z/8|0;return(F[fe]|F[fe+1]<<8)>>(z&7)&te},be=function(F,z){var te=z/8|0;return(F[te]|F[te+1]<<8|F[te+2]<<16)>>(z&7)},de=function(F){return(F+7)/8|0},xe=function(F,z,te){return(z==null||z<0)&&(z=0),(te==null||te>F.length)&&(te=F.length),new A(F.subarray(z,te))},je={UnexpectedEOF:0,InvalidBlockType:1,InvalidLengthLiteral:2,InvalidDistance:3,StreamFinished:4,NoStreamHandler:5,InvalidHeader:6,NoCallback:7,InvalidUTF8:8,ExtraFieldTooLong:9,InvalidDate:10,FilenameTooLong:11,StreamFinishing:12,InvalidZipData:13,UnknownCompressionMethod:14},Me=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Re=function(F,z,te){var fe=new Error(z||Me[F]);if(fe.code=F,Error.captureStackTrace&&Error.captureStackTrace(fe,Re),!te)throw fe;return fe},it=function(F,z,te,fe){var Se=F.length,$e=fe?fe.length:0;if(!Se||z.f&&!z.l)return te||new A(0);var ct=!te,P=ct||z.i!=2,k=z.i;ct&&(te=new A(Se*3));var D=function(Nt){var Gt=te.length;if(Nt>Gt){var Xt=new A(Math.max(Gt*2,Nt));Xt.set(te),te=Xt}},G=z.f||0,X=z.p||0,ee=z.b||0,ye=z.l,he=z.d,me=z.m,Ie=z.n,Qe=Se*8;do{if(!ye){G=Oe(F,X,1);var qe=Oe(F,X+1,3);if(X+=3,qe)if(qe==1)ye=ne,he=ae,me=9,Ie=5;else if(qe==2){var at=Oe(F,X,31)+257,Ct=Oe(F,X+10,15)+4,et=at+Oe(F,X+5,31)+1;X+=14;for(var Pt=new A(et),qt=new A(19),It=0;It<Ct;++It)qt[w[It]]=Oe(F,X+It*3,7);X+=Ct*3;for(var Je=De(qt),zt=(1<<Je)-1,Sr=Ae(qt,Je,1),It=0;It<et;){var ir=Sr[Oe(F,X,zt)];X+=ir&15;var lt=ir>>4;if(lt<16)Pt[It++]=lt;else{var Mt=0,xr=0;for(lt==16?(xr=3+Oe(F,X,3),X+=2,Mt=Pt[It-1]):lt==17?(xr=3+Oe(F,X,7),X+=3):lt==18&&(xr=11+Oe(F,X,127),X+=7);xr--;)Pt[It++]=Mt}}var st=Pt.subarray(0,at),mt=Pt.subarray(at);me=De(st),Ie=De(mt),ye=Ae(st,me,1),he=Ae(mt,Ie,1)}else Re(1);else{var lt=de(X)+4,Te=F[lt-4]|F[lt-3]<<8,Et=lt+Te;if(Et>Se){k&&Re(0);break}P&&D(ee+Te),te.set(F.subarray(lt,Et),ee),z.b=ee+=Te,z.p=X=Et*8,z.f=G;continue}if(X>Qe){k&&Re(0);break}}P&&D(ee+131072);for(var Ot=(1<<me)-1,Rt=(1<<Ie)-1,Ar=X;;Ar=X){var Mt=ye[be(F,X)&Ot],jr=Mt>>4;if(X+=Mt&15,X>Qe){k&&Re(0);break}if(Mt||Re(2),jr<256)te[ee++]=jr;else if(jr==256){Ar=X,ye=null;break}else{var Br=jr-254;if(jr>264){var It=jr-257,ar=y[It];Br=Oe(F,X,(1<<ar)-1)+C[It],X+=ar}var Lr=he[be(F,X)&Rt],hn=Lr>>4;Lr||Re(3),X+=Lr&15;var mt=U[hn];if(hn>3){var ar=x[hn];mt+=be(F,X)&(1<<ar)-1,X+=ar}if(X>Qe){k&&Re(0);break}P&&D(ee+131072);var tn=ee+Br;if(ee<mt){var We=$e-mt,St=Math.min(mt,tn);for(We+ee<0&&Re(3);ee<St;++ee)te[ee]=fe[We+ee]}for(;ee<tn;++ee)te[ee]=te[ee-mt]}}z.l=ye,z.p=Ar,z.b=ee,z.f=G,ye&&(G=1,z.m=me,z.d=he,z.n=Ie)}while(!G);return ee!=te.length&&ct?xe(te,0,ee):te.subarray(0,ee)},ht=function(F,z,te){te<<=z&7;var fe=z/8|0;F[fe]|=te,F[fe+1]|=te>>8},Be=function(F,z,te){te<<=z&7;var fe=z/8|0;F[fe]|=te,F[fe+1]|=te>>8,F[fe+2]|=te>>16},nt=function(F,z){for(var te=[],fe=0;fe<F.length;++fe)F[fe]&&te.push({s:fe,f:F[fe]});var Se=te.length,$e=te.slice();if(!Se)return{t:wt,l:0};if(Se==1){var ct=new A(te[0].s+1);return ct[te[0].s]=1,{t:ct,l:1}}te.sort(function(Et,at){return Et.f-at.f}),te.push({s:-1,f:25001});var P=te[0],k=te[1],D=0,G=1,X=2;for(te[0]={s:-1,f:P.f+k.f,l:P,r:k};G!=Se-1;)P=te[te[D].f<te[X].f?D++:X++],k=te[D!=G&&te[D].f<te[X].f?D++:X++],te[G++]={s:-1,f:P.f+k.f,l:P,r:k};for(var ee=$e[0].s,fe=1;fe<Se;++fe)$e[fe].s>ee&&(ee=$e[fe].s);var ye=new p(ee+1),he=Ge(te[G-1],ye,0);if(he>z){var fe=0,me=0,Ie=he-z,Qe=1<<Ie;for($e.sort(function(at,Ct){return ye[Ct.s]-ye[at.s]||at.f-Ct.f});fe<Se;++fe){var qe=$e[fe].s;if(ye[qe]>z)me+=Qe-(1<<he-ye[qe]),ye[qe]=z;else break}for(me>>=Ie;me>0;){var lt=$e[fe].s;ye[lt]<z?me-=1<<z-ye[lt]++-1:++fe}for(;fe>=0&&me;--fe){var Te=$e[fe].s;ye[Te]==z&&(--ye[Te],++me)}he=z}return{t:new A(ye),l:he}},Ge=function(F,z,te){return F.s==-1?Math.max(Ge(F.l,z,te+1),Ge(F.r,z,te+1)):z[F.s]=te},ft=function(F){for(var z=F.length;z&&!F[--z];);for(var te=new p(++z),fe=0,Se=F[0],$e=1,ct=function(k){te[fe++]=k},P=1;P<=z;++P)if(F[P]==Se&&P!=z)++$e;else{if(!Se&&$e>2){for(;$e>138;$e-=138)ct(32754);$e>2&&(ct($e>10?$e-11<<5|28690:$e-3<<5|12305),$e=0)}else if($e>3){for(ct(Se),--$e;$e>6;$e-=6)ct(8304);$e>2&&(ct($e-3<<5|8208),$e=0)}for(;$e--;)ct(Se);$e=1,Se=F[P]}return{c:te.subarray(0,fe),n:z}},Dt=function(F,z){for(var te=0,fe=0;fe<z.length;++fe)te+=F[fe]*z[fe];return te},rt=function(F,z,te){var fe=te.length,Se=de(z+2);F[Se]=fe&255,F[Se+1]=fe>>8,F[Se+2]=F[Se]^255,F[Se+3]=F[Se+1]^255;for(var $e=0;$e<fe;++$e)F[Se+$e+4]=te[$e];return(Se+4+fe)*8},kt=function(F,z,te,fe,Se,$e,ct,P,k,D,G){ht(z,G++,te),++Se[256];for(var X=nt(Se,15),ee=X.t,ye=X.l,he=nt($e,15),me=he.t,Ie=he.l,Qe=ft(ee),qe=Qe.c,lt=Qe.n,Te=ft(me),Et=Te.c,at=Te.n,Ct=new p(19),et=0;et<qe.length;++et)++Ct[qe[et]&31];for(var et=0;et<Et.length;++et)++Ct[Et[et]&31];for(var Pt=nt(Ct,7),qt=Pt.t,It=Pt.l,Je=19;Je>4&&!qt[w[Je-1]];--Je);var zt=D+5<<3,Sr=Dt(Se,we)+Dt($e,Ce)+ct,ir=Dt(Se,ee)+Dt($e,me)+ct+14+3*Je+Dt(Ct,qt)+2*Ct[16]+3*Ct[17]+7*Ct[18];if(k>=0&&zt<=Sr&&zt<=ir)return rt(z,G,F.subarray(k,k+D));var Mt,xr,st,mt;if(ht(z,G,1+(ir<Sr)),G+=2,ir<Sr){Mt=Ae(ee,ye,0),xr=ee,st=Ae(me,Ie,0),mt=me;var Ot=Ae(qt,It,0);ht(z,G,lt-257),ht(z,G+5,at-1),ht(z,G+10,Je-4),G+=14;for(var et=0;et<Je;++et)ht(z,G+3*et,qt[w[et]]);G+=3*Je;for(var Rt=[qe,Et],Ar=0;Ar<2;++Ar)for(var jr=Rt[Ar],et=0;et<jr.length;++et){var Br=jr[et]&31;ht(z,G,Ot[Br]),G+=qt[Br],Br>15&&(ht(z,G,jr[et]>>5&127),G+=jr[et]>>12)}}else Mt=ve,xr=we,st=ce,mt=Ce;for(var et=0;et<P;++et){var ar=fe[et];if(ar>255){var Br=ar>>18&31;Be(z,G,Mt[Br+257]),G+=xr[Br+257],Br>7&&(ht(z,G,ar>>23&31),G+=y[Br]);var Lr=ar&31;Be(z,G,st[Lr]),G+=mt[Lr],Lr>3&&(Be(z,G,ar>>5&8191),G+=x[Lr])}else Be(z,G,Mt[ar]),G+=xr[ar]}return Be(z,G,Mt[256]),G+xr[256]},_t=new g([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),wt=new A(0),Tt=function(F,z,te,fe,Se,$e){var ct=$e.z||F.length,P=new A(fe+ct+5*(1+Math.ceil(ct/7e3))+Se),k=P.subarray(fe,P.length-Se),D=$e.l,G=($e.r||0)&7;if(z){G&&(k[0]=$e.r>>3);for(var X=_t[z-1],ee=X>>13,ye=X&8191,he=(1<<te)-1,me=$e.p||new p(32768),Ie=$e.h||new p(he+1),Qe=Math.ceil(te/3),qe=2*Qe,lt=function(cr){return(F[cr]^F[cr+1]<<Qe^F[cr+2]<<qe)&he},Te=new g(25e3),Et=new p(288),at=new p(32),Ct=0,et=0,Pt=$e.i||0,qt=0,It=$e.w||0,Je=0;Pt+2<ct;++Pt){var zt=lt(Pt),Sr=Pt&32767,ir=Ie[zt];if(me[Sr]=ir,Ie[zt]=Sr,It<=Pt){var Mt=ct-Pt;if((Ct>7e3||qt>24576)&&(Mt>423||!D)){G=kt(F,k,0,Te,Et,at,et,qt,Je,Pt-Je,G),qt=Ct=et=0,Je=Pt;for(var xr=0;xr<286;++xr)Et[xr]=0;for(var xr=0;xr<30;++xr)at[xr]=0}var st=2,mt=0,Ot=ye,Rt=Sr-ir&32767;if(Mt>2&&zt==lt(Pt-Rt))for(var Ar=Math.min(ee,Mt)-1,jr=Math.min(32767,Pt),Br=Math.min(258,Mt);Rt<=jr&&--Ot&&Sr!=ir;){if(F[Pt+st]==F[Pt+st-Rt]){for(var ar=0;ar<Br&&F[Pt+ar]==F[Pt+ar-Rt];++ar);if(ar>st){if(st=ar,mt=Rt,ar>Ar)break;for(var Lr=Math.min(Rt,ar-2),hn=0,xr=0;xr<Lr;++xr){var tn=Pt-Rt+xr&32767,We=me[tn],St=tn-We&32767;St>hn&&(hn=St,ir=tn)}}}Sr=ir,ir=me[Sr],Rt+=Sr-ir&32767}if(mt){Te[qt++]=268435456|N[st]<<18|K[mt];var Nt=N[st]&31,Gt=K[mt]&31;et+=y[Nt]+x[Gt],++Et[257+Nt],++at[Gt],It=Pt+st,++Ct}else Te[qt++]=F[Pt],++Et[F[Pt]]}}for(Pt=Math.max(Pt,It);Pt<ct;++Pt)Te[qt++]=F[Pt],++Et[F[Pt]];G=kt(F,k,D,Te,Et,at,et,qt,Je,Pt-Je,G),D||($e.r=G&7|k[G/8|0]<<3,G-=7,$e.h=Ie,$e.p=me,$e.i=Pt,$e.w=It)}else{for(var Pt=$e.w||0;Pt<ct+D;Pt+=65535){var Xt=Pt+65535;Xt>=ct&&(k[G/8|0]=D,Xt=ct),G=rt(k,G+1,F.subarray(Pt,Xt))}$e.i=ct}return xe(P,0,fe+de(G)+Se)},Er=(function(){for(var F=new Int32Array(256),z=0;z<256;++z){for(var te=z,fe=9;--fe;)te=(te&1&&-306674912)^te>>>1;F[z]=te}return F})(),pr=function(){var F=-1;return{p:function(z){for(var te=F,fe=0;fe<z.length;++fe)te=Er[te&255^z[fe]]^te>>>8;F=te},d:function(){return~F}}},Xr=function(){var F=1,z=0;return{p:function(te){for(var fe=F,Se=z,$e=te.length|0,ct=0;ct!=$e;){for(var P=Math.min(ct+2655,$e);ct<P;++ct)Se+=fe+=te[ct];fe=(fe&65535)+15*(fe>>16),Se=(Se&65535)+15*(Se>>16)}F=fe,z=Se},d:function(){return F%=65521,z%=65521,(F&255)<<24|(F&65280)<<8|(z&255)<<8|z>>8}}},yn=function(F,z,te,fe,Se){if(!Se&&(Se={l:1},z.dictionary)){var $e=z.dictionary.subarray(-32768),ct=new A($e.length+F.length);ct.set($e),ct.set(F,$e.length),F=ct,Se.w=$e.length}return Tt(F,z.level==null?6:z.level,z.mem==null?Se.l?Math.ceil(Math.max(8,Math.min(13,Math.log(F.length)))*1.5):20:12+z.mem,te,fe,Se)},Mn=function(F,z){var te={};for(var fe in F)te[fe]=F[fe];for(var fe in z)te[fe]=z[fe];return te},dn=function(F,z,te){for(var fe=F(),Se=F.toString(),$e=Se.slice(Se.indexOf("[")+1,Se.lastIndexOf("]")).replace(/\s+/g,"").split(","),ct=0;ct<fe.length;++ct){var P=fe[ct],k=$e[ct];if(typeof P=="function"){z+=";"+k+"=";var D=P.toString();if(P.prototype)if(D.indexOf("[native code]")!=-1){var G=D.indexOf(" ",8)+1;z+=D.slice(G,D.indexOf("(",G))}else{z+=D;for(var X in P.prototype)z+=";"+k+".prototype."+X+"="+P.prototype[X].toString()}else z+=D}else te[k]=P}return z},pn=[],mn=function(F){var z=[];for(var te in F)F[te].buffer&&z.push((F[te]=new F[te].constructor(F[te])).buffer);return z},Kn=function(F,z,te,fe){if(!pn[te]){for(var Se="",$e={},ct=F.length-1,P=0;P<ct;++P)Se=dn(F[P],Se,$e);pn[te]={c:dn(F[ct],Se,$e),e:$e}}var k=Mn({},pn[te].e);return f(pn[te].c+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+z.toString()+"}",te,k,mn(k),fe)},Zn=function(){return[A,p,g,y,x,w,C,U,ne,ae,Y,Me,Ae,De,Oe,be,de,xe,Re,it,Qs,Qt,fr]},Li=function(){return[A,p,g,y,x,w,N,K,ve,we,ce,Ce,Y,_t,wt,Ae,ht,Be,nt,Ge,ft,Dt,rt,kt,de,xe,Tt,yn,ta,Qt]},ot=function(){return[An,li,Ur,pr,Er]},Yt=function(){return[cn,On]},kr=function(){return[Cs,Ur,Xr]},nr=function(){return[Ds]},Qt=function(F){return postMessage(F,[F.buffer])},fr=function(F){return F&&{out:F.size&&new A(F.size),dictionary:F.dictionary}},zr=function(F,z,te,fe,Se,$e){var ct=Kn(te,fe,Se,function(P,k){ct.terminate(),$e(P,k)});return ct.postMessage([F,z],z.consume?[F.buffer]:[]),function(){ct.terminate()}},Yr=function(F){return F.ondata=function(z,te){return postMessage([z,te],[z.buffer])},function(z){z.data.length?(F.push(z.data[0],z.data[1]),postMessage([z.data[0].length])):F.flush()}},Ln=function(F,z,te,fe,Se,$e,ct){var P,k=Kn(F,fe,Se,function(D,G){D?(k.terminate(),z.ondata.call(z,D)):Array.isArray(G)?G.length==1?(z.queuedSize-=G[0],z.ondrain&&z.ondrain(G[0])):(G[1]&&k.terminate(),z.ondata.call(z,D,G[0],G[1])):ct(G)});k.postMessage(te),z.queuedSize=0,z.push=function(D,G){z.ondata||Re(5),P&&z.ondata(Re(4,0,1),null,!!G),z.queuedSize+=D.length,k.postMessage([D,P=G],[D.buffer])},z.terminate=function(){k.terminate()},$e&&(z.flush=function(){k.postMessage([])})},ln=function(F,z){return F[z]|F[z+1]<<8},Jn=function(F,z){return(F[z]|F[z+1]<<8|F[z+2]<<16|F[z+3]<<24)>>>0},rn=function(F,z){return Jn(F,z)+Jn(F,z+4)*4294967296},Ur=function(F,z,te){for(;te;++z)F[z]=te,te>>>=8},An=function(F,z){var te=z.filename;if(F[0]=31,F[1]=139,F[2]=8,F[8]=z.level<2?4:z.level==9?2:0,F[9]=3,z.mtime!=0&&Ur(F,4,Math.floor(new Date(z.mtime||Date.now())/1e3)),te){F[3]=8;for(var fe=0;fe<=te.length;++fe)F[fe+10]=te.charCodeAt(fe)}},cn=function(F){(F[0]!=31||F[1]!=139||F[2]!=8)&&Re(6,"invalid gzip data");var z=F[3],te=10;z&4&&(te+=(F[10]|F[11]<<8)+2);for(var fe=(z>>3&1)+(z>>4&1);fe>0;fe-=!F[te++]);return te+(z&2)},On=function(F){var z=F.length;return(F[z-4]|F[z-3]<<8|F[z-2]<<16|F[z-1]<<24)>>>0},li=function(F){return 10+(F.filename?F.filename.length+1:0)},Cs=function(F,z){var te=z.level,fe=te==0?0:te<6?1:te==9?3:2;if(F[0]=120,F[1]=fe<<6|(z.dictionary&&32),F[1]|=31-(F[0]<<8|F[1])%31,z.dictionary){var Se=Xr();Se.p(z.dictionary),Ur(F,2,Se.d())}},Ds=function(F,z){return((F[0]&15)!=8||F[0]>>4>7||(F[0]<<8|F[1])%31)&&Re(6,"invalid zlib data"),(F[1]>>5&1)==+!z&&Re(6,"invalid zlib data: "+(F[1]&32?"need":"unexpected")+" dictionary"),(F[1]>>3&4)+2};function js(F,z){return typeof F=="function"&&(z=F,F={}),this.ondata=z,F}var ei=(function(){function F(z,te){if(typeof z=="function"&&(te=z,z={}),this.ondata=te,this.o=z||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new A(98304),this.o.dictionary){var fe=this.o.dictionary.subarray(-32768);this.b.set(fe,32768-fe.length),this.s.i=32768-fe.length}}return F.prototype.p=function(z,te){this.ondata(yn(z,this.o,0,0,this.s),te)},F.prototype.push=function(z,te){this.ondata||Re(5),this.s.l&&Re(4);var fe=z.length+this.s.z;if(fe>this.b.length){if(fe>2*this.b.length-32768){var Se=new A(fe&-32768);Se.set(this.b.subarray(0,this.s.z)),this.b=Se}var $e=this.b.length-this.s.z;this.b.set(z.subarray(0,$e),this.s.z),this.s.z=this.b.length,this.p(this.b,!1),this.b.set(this.b.subarray(-32768)),this.b.set(z.subarray($e),32768),this.s.z=z.length-$e+32768,this.s.i=32766,this.s.w=32768}else this.b.set(z,this.s.z),this.s.z+=z.length;this.s.l=te&1,(this.s.z>this.s.w+8191||te)&&(this.p(this.b,te||!1),this.s.w=this.s.i,this.s.i-=2)},F.prototype.flush=function(){this.ondata||Re(5),this.s.l&&Re(4),this.p(this.b,!1),this.s.w=this.s.i,this.s.i-=2},F})(),sn=(function(){function F(z,te){Ln([Li,function(){return[Yr,ei]}],this,js.call(this,z,te),function(fe){var Se=new ei(fe.data);onmessage=Yr(Se)},6,1)}return F})();function ss(F,z,te){return te||(te=z,z={}),typeof te!="function"&&Re(7),zr(F,z,[Li],function(fe){return Qt(ta(fe.data[0],fe.data[1]))},0,te)}function ta(F,z){return yn(F,z||{},0,0)}var _n=(function(){function F(z,te){typeof z=="function"&&(te=z,z={}),this.ondata=te;var fe=z&&z.dictionary&&z.dictionary.subarray(-32768);this.s={i:0,b:fe?fe.length:0},this.o=new A(32768),this.p=new A(0),fe&&this.o.set(fe)}return F.prototype.e=function(z){if(this.ondata||Re(5),this.d&&Re(4),!this.p.length)this.p=z;else if(z.length){var te=new A(this.p.length+z.length);te.set(this.p),te.set(z,this.p.length),this.p=te}},F.prototype.c=function(z){this.s.i=+(this.d=z||!1);var te=this.s.b,fe=it(this.p,this.s,this.o);this.ondata(xe(fe,te,this.s.b),this.d),this.o=xe(fe,this.s.b-32768),this.s.b=this.o.length,this.p=xe(this.p,this.s.p/8|0),this.s.p&=7},F.prototype.push=function(z,te){this.e(z),this.c(te)},F})(),Cn=(function(){function F(z,te){Ln([Zn,function(){return[Yr,_n]}],this,js.call(this,z,te),function(fe){var Se=new _n(fe.data);onmessage=Yr(Se)},7,0)}return F})();function Ms(F,z,te){return te||(te=z,z={}),typeof te!="function"&&Re(7),zr(F,z,[Zn],function(fe){return Qt(Qs(fe.data[0],fr(fe.data[1])))},1,te)}function Qs(F,z){return it(F,{i:2},z&&z.out,z&&z.dictionary)}var Fs=(function(){function F(z,te){this.c=pr(),this.l=0,this.v=1,ei.call(this,z,te)}return F.prototype.push=function(z,te){this.c.p(z),this.l+=z.length,ei.prototype.push.call(this,z,te)},F.prototype.p=function(z,te){var fe=yn(z,this.o,this.v&&li(this.o),te&&8,this.s);this.v&&(An(fe,this.o),this.v=0),te&&(Ur(fe,fe.length-8,this.c.d()),Ur(fe,fe.length-4,this.l)),this.ondata(fe,te)},F.prototype.flush=function(){ei.prototype.flush.call(this)},F})(),rs=(function(){function F(z,te){Ln([Li,ot,function(){return[Yr,ei,Fs]}],this,js.call(this,z,te),function(fe){var Se=new Fs(fe.data);onmessage=Yr(Se)},8,1)}return F})();function qs(F,z,te){return te||(te=z,z={}),typeof te!="function"&&Re(7),zr(F,z,[Li,ot,function(){return[Os]}],function(fe){return Qt(Os(fe.data[0],fe.data[1]))},2,te)}function Os(F,z){z||(z={});var te=pr(),fe=F.length;te.p(F);var Se=yn(F,z,li(z),8),$e=Se.length;return An(Se,z),Ur(Se,$e-8,te.d()),Ur(Se,$e-4,fe),Se}var Qa=(function(){function F(z,te){this.v=1,this.r=0,_n.call(this,z,te)}return F.prototype.push=function(z,te){if(_n.prototype.e.call(this,z),this.r+=z.length,this.v){var fe=this.p.subarray(this.v-1),Se=fe.length>3?cn(fe):4;if(Se>fe.length){if(!te)return}else this.v>1&&this.onmember&&this.onmember(this.r-fe.length);this.p=fe.subarray(Se),this.v=0}_n.prototype.c.call(this,te),this.s.f&&!this.s.l&&!te&&(this.v=de(this.s.p)+9,this.s={i:0},this.o=new A(0),this.push(new A(0),te))},F})(),ds=(function(){function F(z,te){var fe=this;Ln([Zn,Yt,function(){return[Yr,_n,Qa]}],this,js.call(this,z,te),function(Se){var $e=new Qa(Se.data);$e.onmember=function(ct){return postMessage(ct)},onmessage=Yr($e)},9,0,function(Se){return fe.onmember&&fe.onmember(Se)})}return F})();function bu(F,z,te){return te||(te=z,z={}),typeof te!="function"&&Re(7),zr(F,z,[Zn,Yt,function(){return[to]}],function(fe){return Qt(to(fe.data[0],fe.data[1]))},3,te)}function to(F,z){var te=cn(F);return te+8>F.length&&Re(6,"invalid gzip data"),it(F.subarray(te,-8),{i:2},z&&z.out||new A(On(F)),z&&z.dictionary)}var Ml=(function(){function F(z,te){this.c=Xr(),this.v=1,ei.call(this,z,te)}return F.prototype.push=function(z,te){this.c.p(z),ei.prototype.push.call(this,z,te)},F.prototype.p=function(z,te){var fe=yn(z,this.o,this.v&&(this.o.dictionary?6:2),te&&4,this.s);this.v&&(Cs(fe,this.o),this.v=0),te&&Ur(fe,fe.length-4,this.c.d()),this.ondata(fe,te)},F.prototype.flush=function(){ei.prototype.flush.call(this)},F})(),nu=(function(){function F(z,te){Ln([Li,kr,function(){return[Yr,ei,Ml]}],this,js.call(this,z,te),function(fe){var Se=new Ml(fe.data);onmessage=Yr(Se)},10,1)}return F})();function ml(F,z,te){return te||(te=z,z={}),typeof te!="function"&&Re(7),zr(F,z,[Li,kr,function(){return[ra]}],function(fe){return Qt(ra(fe.data[0],fe.data[1]))},4,te)}function ra(F,z){z||(z={});var te=Xr();te.p(F);var fe=yn(F,z,z.dictionary?6:2,4);return Cs(fe,z),Ur(fe,fe.length-4,te.d()),fe}var Ya=(function(){function F(z,te){_n.call(this,z,te),this.v=z&&z.dictionary?2:1}return F.prototype.push=function(z,te){if(_n.prototype.e.call(this,z),this.v){if(this.p.length<6&&!te)return;this.p=this.p.subarray(Ds(this.p,this.v-1)),this.v=0}te&&(this.p.length<4&&Re(6,"invalid zlib data"),this.p=this.p.subarray(0,-4)),_n.prototype.c.call(this,te)},F})(),Ws=(function(){function F(z,te){Ln([Zn,nr,function(){return[Yr,_n,Ya]}],this,js.call(this,z,te),function(fe){var Se=new Ya(fe.data);onmessage=Yr(Se)},11,0)}return F})();function ba(F,z,te){return te||(te=z,z={}),typeof te!="function"&&Re(7),zr(F,z,[Zn,nr,function(){return[Us]}],function(fe){return Qt(Us(fe.data[0],fr(fe.data[1])))},5,te)}function Us(F,z){return it(F.subarray(Ds(F,z&&z.dictionary),-4),{i:2},z&&z.out,z&&z.dictionary)}var kl=(function(){function F(z,te){this.o=js.call(this,z,te)||{},this.G=Qa,this.I=_n,this.Z=Ya}return F.prototype.i=function(){var z=this;this.s.ondata=function(te,fe){z.ondata(te,fe)}},F.prototype.push=function(z,te){if(this.ondata||Re(5),this.s)this.s.push(z,te);else{if(this.p&&this.p.length){var fe=new A(this.p.length+z.length);fe.set(this.p),fe.set(z,this.p.length)}else this.p=z;this.p.length>2&&(this.s=this.p[0]==31&&this.p[1]==139&&this.p[2]==8?new this.G(this.o):(this.p[0]&15)!=8||this.p[0]>>4>7||(this.p[0]<<8|this.p[1])%31?new this.I(this.o):new this.Z(this.o),this.i(),this.s.push(this.p,te),this.p=null)}},F})(),po=(function(){function F(z,te){kl.call(this,z,te),this.queuedSize=0,this.G=ds,this.I=Cn,this.Z=Ws}return F.prototype.i=function(){var z=this;this.s.ondata=function(te,fe,Se){z.ondata(te,fe,Se)},this.s.ondrain=function(te){z.queuedSize-=te,z.ondrain&&z.ondrain(te)}},F.prototype.push=function(z,te){this.queuedSize+=z.length,kl.prototype.push.call(this,z,te)},F})();function ro(F,z,te){return te||(te=z,z={}),typeof te!="function"&&Re(7),F[0]==31&&F[1]==139&&F[2]==8?bu(F,z,te):(F[0]&15)!=8||F[0]>>4>7||(F[0]<<8|F[1])%31?Ms(F,z,te):ba(F,z,te)}function pl(F,z){return F[0]==31&&F[1]==139&&F[2]==8?to(F,z):(F[0]&15)!=8||F[0]>>4>7||(F[0]<<8|F[1])%31?Qs(F,z):Us(F,z)}var Fl=function(F,z,te,fe){for(var Se in F){var $e=F[Se],ct=z+Se,P=fe;Array.isArray($e)&&(P=Mn(fe,$e[1]),$e=$e[0]),$e instanceof A?te[ct]=[$e,P]:(te[ct+="/"]=[new A(0),P],Fl($e,ct,te,fe))}},mc=typeof TextEncoder<"u"&&new TextEncoder,Vs=typeof TextDecoder<"u"&&new TextDecoder,ci=0;try{Vs.decode(wt,{stream:!0}),ci=1}catch{}var Ns=function(F){for(var z="",te=0;;){var fe=F[te++],Se=(fe>127)+(fe>223)+(fe>239);if(te+Se>F.length)return{s:z,r:xe(F,te-1)};Se?Se==3?(fe=((fe&15)<<18|(F[te++]&63)<<12|(F[te++]&63)<<6|F[te++]&63)-65536,z+=String.fromCharCode(55296|fe>>10,56320|fe&1023)):Se&1?z+=String.fromCharCode((fe&31)<<6|F[te++]&63):z+=String.fromCharCode((fe&15)<<12|(F[te++]&63)<<6|F[te++]&63):z+=String.fromCharCode(fe)}},Ta=(function(){function F(z){this.ondata=z,ci?this.t=new TextDecoder:this.p=wt}return F.prototype.push=function(z,te){if(this.ondata||Re(5),te=!!te,this.t){this.ondata(this.t.decode(z,{stream:!0}),te),te&&(this.t.decode().length&&Re(8),this.t=null);return}this.p||Re(4);var fe=new A(this.p.length+z.length);fe.set(this.p),fe.set(z,this.p.length);var Se=Ns(fe),$e=Se.s,ct=Se.r;te?(ct.length&&Re(8),this.p=null):this.p=ct,this.ondata($e,te)},F})(),Va=(function(){function F(z){this.ondata=z}return F.prototype.push=function(z,te){this.ondata||Re(5),this.d&&Re(4),this.ondata(Ca(z),this.d=te||!1)},F})();function Ca(F,z){if(z){for(var te=new A(F.length),fe=0;fe<F.length;++fe)te[fe]=F.charCodeAt(fe);return te}if(mc)return mc.encode(F);for(var Se=F.length,$e=new A(F.length+(F.length>>1)),ct=0,P=function(G){$e[ct++]=G},fe=0;fe<Se;++fe){if(ct+5>$e.length){var k=new A(ct+8+(Se-fe<<1));k.set($e),$e=k}var D=F.charCodeAt(fe);D<128||z?P(D):D<2048?(P(192|D>>6),P(128|D&63)):D>55295&&D<57344?(D=65536+(D&1047552)|F.charCodeAt(++fe)&1023,P(240|D>>18),P(128|D>>12&63),P(128|D>>6&63),P(128|D&63)):(P(224|D>>12),P(128|D>>6&63),P(128|D&63))}return xe($e,0,ct)}function gi(F,z){if(z){for(var te="",fe=0;fe<F.length;fe+=16384)te+=String.fromCharCode.apply(null,F.subarray(fe,fe+16384));return te}else{if(Vs)return Vs.decode(F);var Se=Ns(F),$e=Se.s,te=Se.r;return te.length&&Re(8),$e}}var Xn=function(F){return F==1?3:F<6?2:F==9?1:0},hs=function(F,z){return z+30+ln(F,z+26)+ln(F,z+28)},wa=function(F,z,te){var fe=ln(F,z+28),Se=gi(F.subarray(z+46,z+46+fe),!(ln(F,z+8)&2048)),$e=z+46+fe,ct=Jn(F,z+20),P=te&&ct==4294967295?Qo(F,$e):[ct,Jn(F,z+24),Jn(F,z+42)],k=P[0],D=P[1],G=P[2];return[ln(F,z+10),k,D,Se,$e+ln(F,z+30)+ln(F,z+32),G]},Qo=function(F,z){for(;ln(F,z)!=1;z+=4+ln(F,z+2));return[rn(F,z+12),rn(F,z+4),rn(F,z+20)]},Hi=function(F){var z=0;if(F)for(var te in F){var fe=F[te].length;fe>65535&&Re(9),z+=fe+4}return z},Vo=function(F,z,te,fe,Se,$e,ct,P){var k=fe.length,D=te.extra,G=P&&P.length,X=Hi(D);Ur(F,z,ct!=null?33639248:67324752),z+=4,ct!=null&&(F[z++]=20,F[z++]=te.os),F[z]=20,z+=2,F[z++]=te.flag<<1|($e<0&&8),F[z++]=Se&&8,F[z++]=te.compression&255,F[z++]=te.compression>>8;var ee=new Date(te.mtime==null?Date.now():te.mtime),ye=ee.getFullYear()-1980;if((ye<0||ye>119)&&Re(10),Ur(F,z,ye<<25|ee.getMonth()+1<<21|ee.getDate()<<16|ee.getHours()<<11|ee.getMinutes()<<5|ee.getSeconds()>>1),z+=4,$e!=-1&&(Ur(F,z,te.crc),Ur(F,z+4,$e<0?-$e-2:$e),Ur(F,z+8,te.size)),Ur(F,z+12,k),Ur(F,z+14,X),z+=16,ct!=null&&(Ur(F,z,G),Ur(F,z+6,te.attrs),Ur(F,z+10,ct),z+=14),F.set(fe,z),z+=k,X)for(var he in D){var me=D[he],Ie=me.length;Ur(F,z,+he),Ur(F,z+2,Ie),F.set(me,z+4),z+=4+Ie}return G&&(F.set(P,z),z+=G),z},Ea=function(F,z,te,fe,Se){Ur(F,z,101010256),Ur(F,z+8,te),Ur(F,z+10,te),Ur(F,z+12,fe),Ur(F,z+16,Se)},Xs=(function(){function F(z){this.filename=z,this.c=pr(),this.size=0,this.compression=0}return F.prototype.process=function(z,te){this.ondata(null,z,te)},F.prototype.push=function(z,te){this.ondata||Re(5),this.c.p(z),this.size+=z.length,te&&(this.crc=this.c.d()),this.process(z,te||!1)},F})(),fs=(function(){function F(z,te){var fe=this;te||(te={}),Xs.call(this,z),this.d=new ei(te,function(Se,$e){fe.ondata(null,Se,$e)}),this.compression=8,this.flag=Xn(te.level)}return F.prototype.process=function(z,te){try{this.d.push(z,te)}catch(fe){this.ondata(fe,null,te)}},F.prototype.push=function(z,te){Xs.prototype.push.call(this,z,te)},F})(),To=(function(){function F(z,te){var fe=this;te||(te={}),Xs.call(this,z),this.d=new sn(te,function(Se,$e,ct){fe.ondata(Se,$e,ct)}),this.compression=8,this.flag=Xn(te.level),this.terminate=this.d.terminate}return F.prototype.process=function(z,te){this.d.push(z,te)},F.prototype.push=function(z,te){Xs.prototype.push.call(this,z,te)},F})(),za=(function(){function F(z){this.ondata=z,this.u=[],this.d=1}return F.prototype.add=function(z){var te=this;if(this.ondata||Re(5),this.d&2)this.ondata(Re(4+(this.d&1)*8,0,1),null,!1);else{var fe=Ca(z.filename),Se=fe.length,$e=z.comment,ct=$e&&Ca($e),P=Se!=z.filename.length||ct&&$e.length!=ct.length,k=Se+Hi(z.extra)+30;Se>65535&&this.ondata(Re(11,0,1),null,!1);var D=new A(k);Vo(D,0,z,fe,P,-1);var G=[D],X=function(){for(var Ie=0,Qe=G;Ie<Qe.length;Ie++){var qe=Qe[Ie];te.ondata(null,qe,!1)}G=[]},ee=this.d;this.d=0;var ye=this.u.length,he=Mn(z,{f:fe,u:P,o:ct,t:function(){z.terminate&&z.terminate()},r:function(){if(X(),ee){var Ie=te.u[ye+1];Ie?Ie.r():te.d=1}ee=1}}),me=0;z.ondata=function(Ie,Qe,qe){if(Ie)te.ondata(Ie,Qe,qe),te.terminate();else if(me+=Qe.length,G.push(Qe),qe){var lt=new A(16);Ur(lt,0,134695760),Ur(lt,4,z.crc),Ur(lt,8,me),Ur(lt,12,z.size),G.push(lt),he.c=me,he.b=k+me+16,he.crc=z.crc,he.size=z.size,ee&&he.r(),ee=1}else ee&&X()},this.u.push(he)}},F.prototype.end=function(){var z=this;if(this.d&2){this.ondata(Re(4+(this.d&1)*8,0,1),null,!0);return}this.d?this.e():this.u.push({r:function(){z.d&1&&(z.u.splice(-1,1),z.e())},t:function(){}}),this.d=3},F.prototype.e=function(){for(var z=0,te=0,fe=0,Se=0,$e=this.u;Se<$e.length;Se++){var ct=$e[Se];fe+=46+ct.f.length+Hi(ct.extra)+(ct.o?ct.o.length:0)}for(var P=new A(fe+22),k=0,D=this.u;k<D.length;k++){var ct=D[k];Vo(P,z,ct,ct.f,ct.u,-ct.c-2,te,ct.o),z+=46+ct.f.length+Hi(ct.extra)+(ct.o?ct.o.length:0),te+=ct.b}Ea(P,z,this.u.length,fe,te),this.ondata(null,P,!0),this.d=2},F.prototype.terminate=function(){for(var z=0,te=this.u;z<te.length;z++){var fe=te[z];fe.t()}this.d=2},F})();function zs(F,z,te){te||(te=z,z={}),typeof te!="function"&&Re(7);var fe={};Fl(F,"",fe,z);var Se=Object.keys(fe),$e=Se.length,ct=0,P=0,k=$e,D=new Array($e),G=[],X=function(){for(var Ie=0;Ie<G.length;++Ie)G[Ie]()},ee=function(Ie,Qe){V(function(){te(Ie,Qe)})};V(function(){ee=te});var ye=function(){var Ie=new A(P+22),Qe=ct,qe=P-ct;P=0;for(var lt=0;lt<k;++lt){var Te=D[lt];try{var Et=Te.c.length;Vo(Ie,P,Te,Te.f,Te.u,Et);var at=30+Te.f.length+Hi(Te.extra),Ct=P+at;Ie.set(Te.c,Ct),Vo(Ie,ct,Te,Te.f,Te.u,Et,P,Te.m),ct+=16+at+(Te.m?Te.m.length:0),P=Ct+Et}catch(et){return ee(et,null)}}Ea(Ie,ct,D.length,qe,Qe),ee(null,Ie)};$e||ye();for(var he=function(Ie){var Qe=Se[Ie],qe=fe[Qe],lt=qe[0],Te=qe[1],Et=pr(),at=lt.length;Et.p(lt);var Ct=Ca(Qe),et=Ct.length,Pt=Te.comment,qt=Pt&&Ca(Pt),It=qt&&qt.length,Je=Hi(Te.extra),zt=Te.level==0?0:8,Sr=function(ir,Mt){if(ir)X(),ee(ir,null);else{var xr=Mt.length;D[Ie]=Mn(Te,{size:at,crc:Et.d(),c:Mt,f:Ct,m:qt,u:et!=Qe.length||qt&&Pt.length!=It,compression:zt}),ct+=30+et+Je+xr,P+=76+2*(et+Je)+(It||0)+xr,--$e||ye()}};if(et>65535&&Sr(Re(11,0,1),null),!zt)Sr(null,lt);else if(at<16e4)try{Sr(null,ta(lt,Te))}catch(ir){Sr(ir,null)}else G.push(ss(lt,Te,Sr))},me=0;me<k;++me)he(me);return X}function qa(F,z){z||(z={});var te={},fe=[];Fl(F,"",te,z);var Se=0,$e=0;for(var ct in te){var P=te[ct],k=P[0],D=P[1],G=D.level==0?0:8,X=Ca(ct),ee=X.length,ye=D.comment,he=ye&&Ca(ye),me=he&&he.length,Ie=Hi(D.extra);ee>65535&&Re(11);var Qe=G?ta(k,D):k,qe=Qe.length,lt=pr();lt.p(k),fe.push(Mn(D,{size:k.length,crc:lt.d(),c:Qe,f:X,m:he,u:ee!=ct.length||he&&ye.length!=me,o:Se,compression:G})),Se+=30+ee+Ie+qe,$e+=76+2*(ee+Ie)+(me||0)+qe}for(var Te=new A($e+22),Et=Se,at=$e-Se,Ct=0;Ct<fe.length;++Ct){var X=fe[Ct];Vo(Te,X.o,X,X.f,X.u,X.c.length);var et=30+X.f.length+Hi(X.extra);Te.set(X.c,X.o+et),Vo(Te,Se,X,X.f,X.u,X.c.length,X.o,X.m),Se+=16+et+(X.m?X.m.length:0)}return Ea(Te,Se,fe.length,at,Et),Te}var go=(function(){function F(){}return F.prototype.push=function(z,te){this.ondata(null,z,te)},F.compression=0,F})(),no=(function(){function F(){var z=this;this.i=new _n(function(te,fe){z.ondata(null,te,fe)})}return F.prototype.push=function(z,te){try{this.i.push(z,te)}catch(fe){this.ondata(fe,null,te)}},F.compression=8,F})(),zo=(function(){function F(z,te){var fe=this;te<32e4?this.i=new _n(function(Se,$e){fe.ondata(null,Se,$e)}):(this.i=new Cn(function(Se,$e,ct){fe.ondata(Se,$e,ct)}),this.terminate=this.i.terminate)}return F.prototype.push=function(z,te){this.i.terminate&&(z=xe(z,0)),this.i.push(z,te)},F.compression=8,F})(),Ht=(function(){function F(z){this.onfile=z,this.k=[],this.o={0:go},this.p=wt}return F.prototype.push=function(z,te){var fe=this;if(this.onfile||Re(5),this.p||Re(4),this.c>0){var Se=Math.min(this.c,z.length),$e=z.subarray(0,Se);if(this.c-=Se,this.d?this.d.push($e,!this.c):this.k[0].push($e),z=z.subarray(Se),z.length)return this.push(z,te)}else{var ct=0,P=0,k=void 0,D=void 0;this.p.length?z.length?(D=new A(this.p.length+z.length),D.set(this.p),D.set(z,this.p.length)):D=this.p:D=z;for(var G=D.length,X=this.c,ee=X&&this.d,ye=function(){var Qe,qe=Jn(D,P);if(qe==67324752){ct=1,k=P,he.d=null,he.c=0;var lt=ln(D,P+6),Te=ln(D,P+8),Et=lt&2048,at=lt&8,Ct=ln(D,P+26),et=ln(D,P+28);if(G>P+30+Ct+et){var Pt=[];he.k.unshift(Pt),ct=2;var qt=Jn(D,P+18),It=Jn(D,P+22),Je=gi(D.subarray(P+30,P+=30+Ct),!Et);qt==4294967295?(Qe=at?[-2]:Qo(D,P),qt=Qe[0],It=Qe[1]):at&&(qt=-1),P+=et,he.c=qt;var zt,Sr={name:Je,compression:Te,start:function(){if(Sr.ondata||Re(5),!qt)Sr.ondata(null,wt,!0);else{var ir=fe.o[Te];ir||Sr.ondata(Re(14,"unknown compression type "+Te,1),null,!1),zt=qt<0?new ir(Je):new ir(Je,qt,It),zt.ondata=function(mt,Ot,Rt){Sr.ondata(mt,Ot,Rt)};for(var Mt=0,xr=Pt;Mt<xr.length;Mt++){var st=xr[Mt];zt.push(st,!1)}fe.k[0]==Pt&&fe.c?fe.d=zt:zt.push(wt,!0)}},terminate:function(){zt&&zt.terminate&&zt.terminate()}};qt>=0&&(Sr.size=qt,Sr.originalSize=It),he.onfile(Sr)}return"break"}else if(X){if(qe==134695760)return k=P+=12+(X==-2&&8),ct=3,he.c=0,"break";if(qe==33639248)return k=P-=4,ct=3,he.c=0,"break"}},he=this;P<G-4;++P){var me=ye();if(me==="break")break}if(this.p=wt,X<0){var Ie=ct?D.subarray(0,k-12-(X==-2&&8)-(Jn(D,k-16)==134695760&&4)):D.subarray(0,P);ee?ee.push(Ie,!!ct):this.k[+(ct==2)].push(Ie)}if(ct&2)return this.push(D.subarray(P),te);this.p=D.subarray(P)}te&&(this.c&&Re(13),this.p=null)},F.prototype.register=function(z){this.o[z.compression]=z},F})(),V=typeof queueMicrotask=="function"?queueMicrotask:typeof setTimeout=="function"?setTimeout:function(F){F()};function ie(F,z,te){te||(te=z,z={}),typeof te!="function"&&Re(7);var fe=[],Se=function(){for(var Ie=0;Ie<fe.length;++Ie)fe[Ie]()},$e={},ct=function(Ie,Qe){V(function(){te(Ie,Qe)})};V(function(){ct=te});for(var P=F.length-22;Jn(F,P)!=101010256;--P)if(!P||F.length-P>65558)return ct(Re(13,0,1),null),Se;var k=ln(F,P+8);if(k){var D=k,G=Jn(F,P+16),X=G==4294967295||D==65535;if(X){var ee=Jn(F,P-12);X=Jn(F,ee)==101075792,X&&(D=k=Jn(F,ee+32),G=Jn(F,ee+48))}for(var ye=z&&z.filter,he=function(Ie){var Qe=wa(F,G,X),qe=Qe[0],lt=Qe[1],Te=Qe[2],Et=Qe[3],at=Qe[4],Ct=Qe[5],et=hs(F,Ct);G=at;var Pt=function(It,Je){It?(Se(),ct(It,null)):(Je&&($e[Et]=Je),--k||ct(null,$e))};if(!ye||ye({name:Et,size:lt,originalSize:Te,compression:qe}))if(!qe)Pt(null,xe(F,et,et+lt));else if(qe==8){var qt=F.subarray(et,et+lt);if(Te<524288||lt>.8*Te)try{Pt(null,Qs(qt,{out:new A(Te)}))}catch(It){Pt(It,null)}else fe.push(Ms(qt,{size:Te},Pt))}else Pt(Re(14,"unknown compression type "+qe,1),null);else Pt(null,null)},me=0;me<D;++me)he(me)}else ct(null,{});return Se}function le(F,z){for(var te={},fe=F.length-22;Jn(F,fe)!=101010256;--fe)(!fe||F.length-fe>65558)&&Re(13);var Se=ln(F,fe+8);if(!Se)return{};var $e=Jn(F,fe+16),ct=$e==4294967295||Se==65535;if(ct){var P=Jn(F,fe-12);ct=Jn(F,P)==101075792,ct&&(Se=Jn(F,P+32),$e=Jn(F,P+48))}for(var k=z&&z.filter,D=0;D<Se;++D){var G=wa(F,$e,ct),X=G[0],ee=G[1],ye=G[2],he=G[3],me=G[4],Ie=G[5],Qe=hs(F,Ie);$e=me,(!k||k({name:he,size:ee,originalSize:ye,compression:X}))&&(X?X==8?te[he]=Qs(F.subarray(Qe,Qe+ee),{out:new A(ye)}):Re(14,"unknown compression type "+X):te[he]=xe(F,Qe,Qe+ee))}return te}}),"./node_modules/iobuffer/lib-esm/IOBuffer.js":(function(c,u,l){l.r(u),l.d(u,{IOBuffer:function(){return g}});var d=l("./node_modules/iobuffer/lib-esm/text.js");const f=1024*8,A=(()=>{const y=new Uint8Array(4),x=new Uint32Array(y.buffer);return!((x[0]=1)&y[0])})(),p={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class g{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(x=f,w={}){let E=!1;typeof x=="number"?x=new ArrayBuffer(x):(E=!0,this.lastWrittenByte=x.byteLength);const T=w.offset?w.offset>>>0:0,C=x.byteLength-T;let N=T;(ArrayBuffer.isView(x)||x instanceof g)&&(x.byteLength!==x.buffer.byteLength&&(N=x.byteOffset+T),x=x.buffer),E?this.lastWrittenByte=C:this.lastWrittenByte=0,this.buffer=x,this.length=C,this.byteLength=C,this.byteOffset=N,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,N,C),this._mark=0,this._marks=[]}available(x=1){return this.offset+x<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(x=1){return this.offset+=x,this}back(x=1){return this.offset-=x,this}seek(x){return this.offset=x,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const x=this._marks.pop();if(x===void 0)throw new Error("Mark stack empty");return this.seek(x),this}rewind(){return this.offset=0,this}ensureAvailable(x=1){if(!this.available(x)){const E=(this.offset+x)*2,T=new Uint8Array(E);T.set(new Uint8Array(this.buffer)),this.buffer=T.buffer,this.length=E,this.byteLength=E,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(x=1){return this.readArray(x,"uint8")}readArray(x,w){const E=p[w].BYTES_PER_ELEMENT*x,T=this.byteOffset+this.offset,C=this.buffer.slice(T,T+E);if(this.littleEndian===A&&w!=="uint8"&&w!=="int8"){const I=new Uint8Array(this.buffer.slice(T,T+E));I.reverse();const U=new p[w](I.buffer);return this.offset+=E,U.reverse(),U}const N=new p[w](C);return this.offset+=E,N}readInt16(){const x=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,x}readUint16(){const x=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,x}readInt32(){const x=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,x}readUint32(){const x=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,x}readFloat32(){const x=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,x}readFloat64(){const x=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,x}readBigInt64(){const x=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,x}readBigUint64(){const x=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,x}readChar(){return String.fromCharCode(this.readInt8())}readChars(x=1){let w="";for(let E=0;E<x;E++)w+=this.readChar();return w}readUtf8(x=1){return(0,d.decode)(this.readBytes(x))}decodeText(x=1,w="utf8"){return(0,d.decode)(this.readBytes(x),w)}writeBoolean(x){return this.writeUint8(x?255:0),this}writeInt8(x){return this.ensureAvailable(1),this._data.setInt8(this.offset++,x),this._updateLastWrittenByte(),this}writeUint8(x){return this.ensureAvailable(1),this._data.setUint8(this.offset++,x),this._updateLastWrittenByte(),this}writeByte(x){return this.writeUint8(x)}writeBytes(x){this.ensureAvailable(x.length);for(let w=0;w<x.length;w++)this._data.setUint8(this.offset++,x[w]);return this._updateLastWrittenByte(),this}writeInt16(x){return this.ensureAvailable(2),this._data.setInt16(this.offset,x,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(x){return this.ensureAvailable(2),this._data.setUint16(this.offset,x,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(x){return this.ensureAvailable(4),this._data.setInt32(this.offset,x,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(x){return this.ensureAvailable(4),this._data.setUint32(this.offset,x,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(x){return this.ensureAvailable(4),this._data.setFloat32(this.offset,x,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(x){return this.ensureAvailable(8),this._data.setFloat64(this.offset,x,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(x){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,x,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(x){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,x,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(x){return this.writeUint8(x.charCodeAt(0))}writeChars(x){for(let w=0;w<x.length;w++)this.writeUint8(x.charCodeAt(w));return this}writeUtf8(x){return this.writeBytes((0,d.encode)(x))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}}),"./node_modules/iobuffer/lib-esm/text.js":(function(c,u,l){l.r(u),l.d(u,{decode:function(){return d},encode:function(){return A}});function d(p,g="utf8"){return new TextDecoder(g).decode(p)}const f=new TextEncoder;function A(p){return f.encode(p)}}),"./node_modules/jspdf/dist/jspdf.es.min.js":(function(c,u,l){l.r(u),l.d(u,{AcroForm:function(){return ta},AcroFormAppearance:function(){return sn},AcroFormButton:function(){return cn},AcroFormCheckBox:function(){return Ds},AcroFormChoiceField:function(){return Jn},AcroFormComboBox:function(){return Ur},AcroFormEditBox:function(){return An},AcroFormListBox:function(){return rn},AcroFormPasswordField:function(){return ei},AcroFormPushButton:function(){return On},AcroFormRadioButton:function(){return li},AcroFormTextField:function(){return js},GState:function(){return it},ShadingPattern:function(){return Be},TilingPattern:function(){return nt},default:function(){return Ge},jsPDF:function(){return Ge}});var d=l("./node_modules/@babel/runtime/helpers/esm/typeof.js"),f=l("./node_modules/fflate/esm/browser.js"),A=l("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),p=l("./node_modules/fast-png/lib-esm/index.js");var g=(function(){return typeof window<"u"?window:typeof O1<"u"?O1:typeof self<"u"?self:this})();function y(){g.console&&typeof g.console.log=="function"&&g.console.log.apply(g.console,arguments)}var x={log:y,warn:function(P){g.console&&(typeof g.console.warn=="function"?g.console.warn.apply(g.console,arguments):y.call(null,arguments))},error:function(P){g.console&&(typeof g.console.error=="function"?g.console.error.apply(g.console,arguments):y(P))}};function w(P,k,D){var G=new XMLHttpRequest;G.open("GET",P),G.responseType="blob",G.onload=function(){C(G.response,k,D)},G.onerror=function(){x.error("could not download file")},G.send()}function E(P){var k=new XMLHttpRequest;k.open("HEAD",P,!1);try{k.send()}catch{}return k.status>=200&&k.status<=299}function T(P){try{P.dispatchEvent(new MouseEvent("click"))}catch{var k=document.createEvent("MouseEvents");k.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),P.dispatchEvent(k)}}var C=g.saveAs||((typeof window>"u"?"undefined":(0,d.default)(window))!=="object"||window!==g?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(P,k,D){var G=g.URL||g.webkitURL,X=document.createElement("a");k=k||P.name||"download",X.download=k,X.rel="noopener",typeof P=="string"?(X.href=P,X.origin!==location.origin?E(X.href)?w(P,k,D):T(X,X.target="_blank"):T(X)):(X.href=G.createObjectURL(P),setTimeout(function(){G.revokeObjectURL(X.href)},4e4),setTimeout(function(){T(X)},0))}:"msSaveOrOpenBlob"in navigator?function(P,k,D){if(k=k||P.name||"download",typeof P=="string")if(E(P))w(P,k,D);else{var G=document.createElement("a");G.href=P,G.target="_blank",setTimeout(function(){T(G)})}else navigator.msSaveOrOpenBlob((function(X,ee){return ee===void 0?ee={autoBom:!1}:(0,d.default)(ee)!=="object"&&(x.warn("Deprecated: Expected third argument to be a object"),ee={autoBom:!ee}),ee.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(X.type)?new Blob(["\uFEFF",X],{type:X.type}):X})(P,D),k)}:function(P,k,D,G){if((G=G||open("","_blank"))&&(G.document.title=G.document.body.innerText="downloading..."),typeof P=="string")return w(P,k,D);var X=P.type==="application/octet-stream",ee=/constructor/i.test(g.HTMLElement)||g.safari,ye=/CriOS\/[\d]+/.test(navigator.userAgent);if((ye||X&&ee)&&(typeof FileReader>"u"?"undefined":(0,d.default)(FileReader))==="object"){var he=new FileReader;he.onloadend=function(){var Qe=he.result;Qe=ye?Qe:Qe.replace(/^data:[^;]*;/,"data:attachment/file;"),G?G.location.href=Qe:location=Qe,G=null},he.readAsDataURL(P)}else{var me=g.URL||g.webkitURL,Ie=me.createObjectURL(P);G?G.location=Ie:location.href=Ie,G=null,setTimeout(function(){me.revokeObjectURL(Ie)},4e4)}});function N(P){var k;P=P||"",this.ok=!1,P.charAt(0)=="#"&&(P=P.substr(1,6)),P={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[P=(P=P.replace(/ /g,"")).toLowerCase()]||P;for(var D=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(he){return[parseInt(he[1]),parseInt(he[2]),parseInt(he[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(he){return[parseInt(he[1],16),parseInt(he[2],16),parseInt(he[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(he){return[parseInt(he[1]+he[1],16),parseInt(he[2]+he[2],16),parseInt(he[3]+he[3],16)]}}],G=0;G<D.length;G++){var X=D[G].re,ee=D[G].process,ye=X.exec(P);ye&&(k=ee(ye),this.r=k[0],this.g=k[1],this.b=k[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var he=this.r.toString(16),me=this.g.toString(16),Ie=this.b.toString(16);return he.length==1&&(he="0"+he),me.length==1&&(me="0"+me),Ie.length==1&&(Ie="0"+Ie),"#"+he+me+Ie}}var I=g.atob.bind(g),U=g.btoa.bind(g);function K(P,k){var D=P[0],G=P[1],X=P[2],ee=P[3];D=re(D,G,X,ee,k[0],7,-680876936),ee=re(ee,D,G,X,k[1],12,-389564586),X=re(X,ee,D,G,k[2],17,606105819),G=re(G,X,ee,D,k[3],22,-1044525330),D=re(D,G,X,ee,k[4],7,-176418897),ee=re(ee,D,G,X,k[5],12,1200080426),X=re(X,ee,D,G,k[6],17,-1473231341),G=re(G,X,ee,D,k[7],22,-45705983),D=re(D,G,X,ee,k[8],7,1770035416),ee=re(ee,D,G,X,k[9],12,-1958414417),X=re(X,ee,D,G,k[10],17,-42063),G=re(G,X,ee,D,k[11],22,-1990404162),D=re(D,G,X,ee,k[12],7,1804603682),ee=re(ee,D,G,X,k[13],12,-40341101),X=re(X,ee,D,G,k[14],17,-1502002290),D=se(D,G=re(G,X,ee,D,k[15],22,1236535329),X,ee,k[1],5,-165796510),ee=se(ee,D,G,X,k[6],9,-1069501632),X=se(X,ee,D,G,k[11],14,643717713),G=se(G,X,ee,D,k[0],20,-373897302),D=se(D,G,X,ee,k[5],5,-701558691),ee=se(ee,D,G,X,k[10],9,38016083),X=se(X,ee,D,G,k[15],14,-660478335),G=se(G,X,ee,D,k[4],20,-405537848),D=se(D,G,X,ee,k[9],5,568446438),ee=se(ee,D,G,X,k[14],9,-1019803690),X=se(X,ee,D,G,k[3],14,-187363961),G=se(G,X,ee,D,k[8],20,1163531501),D=se(D,G,X,ee,k[13],5,-1444681467),ee=se(ee,D,G,X,k[2],9,-51403784),X=se(X,ee,D,G,k[7],14,1735328473),D=Ae(D,G=se(G,X,ee,D,k[12],20,-1926607734),X,ee,k[5],4,-378558),ee=Ae(ee,D,G,X,k[8],11,-2022574463),X=Ae(X,ee,D,G,k[11],16,1839030562),G=Ae(G,X,ee,D,k[14],23,-35309556),D=Ae(D,G,X,ee,k[1],4,-1530992060),ee=Ae(ee,D,G,X,k[4],11,1272893353),X=Ae(X,ee,D,G,k[7],16,-155497632),G=Ae(G,X,ee,D,k[10],23,-1094730640),D=Ae(D,G,X,ee,k[13],4,681279174),ee=Ae(ee,D,G,X,k[0],11,-358537222),X=Ae(X,ee,D,G,k[3],16,-722521979),G=Ae(G,X,ee,D,k[6],23,76029189),D=Ae(D,G,X,ee,k[9],4,-640364487),ee=Ae(ee,D,G,X,k[12],11,-421815835),X=Ae(X,ee,D,G,k[15],16,530742520),D=we(D,G=Ae(G,X,ee,D,k[2],23,-995338651),X,ee,k[0],6,-198630844),ee=we(ee,D,G,X,k[7],10,1126891415),X=we(X,ee,D,G,k[14],15,-1416354905),G=we(G,X,ee,D,k[5],21,-57434055),D=we(D,G,X,ee,k[12],6,1700485571),ee=we(ee,D,G,X,k[3],10,-1894986606),X=we(X,ee,D,G,k[10],15,-1051523),G=we(G,X,ee,D,k[1],21,-2054922799),D=we(D,G,X,ee,k[8],6,1873313359),ee=we(ee,D,G,X,k[15],10,-30611744),X=we(X,ee,D,G,k[6],15,-1560198380),G=we(G,X,ee,D,k[13],21,1309151649),D=we(D,G,X,ee,k[4],6,-145523070),ee=we(ee,D,G,X,k[11],10,-1120210379),X=we(X,ee,D,G,k[2],15,718787259),G=we(G,X,ee,D,k[9],21,-343485551),P[0]=be(D,P[0]),P[1]=be(G,P[1]),P[2]=be(X,P[2]),P[3]=be(ee,P[3])}function Y(P,k,D,G,X,ee){return k=be(be(k,P),be(G,ee)),be(k<<X|k>>>32-X,D)}function re(P,k,D,G,X,ee,ye){return Y(k&D|~k&G,P,k,X,ee,ye)}function se(P,k,D,G,X,ee,ye){return Y(k&G|D&~G,P,k,X,ee,ye)}function Ae(P,k,D,G,X,ee,ye){return Y(k^D^G,P,k,X,ee,ye)}function we(P,k,D,G,X,ee,ye){return Y(D^(k|~G),P,k,X,ee,ye)}function Ce(P){var k,D=P.length,G=[1732584193,-271733879,-1732584194,271733878];for(k=64;k<=P.length;k+=64)K(G,ve(P.substring(k-64,k)));P=P.substring(k-64);var X=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(k=0;k<P.length;k++)X[k>>2]|=P.charCodeAt(k)<<(k%4<<3);if(X[k>>2]|=128<<(k%4<<3),k>55)for(K(G,X),k=0;k<16;k++)X[k]=0;return X[14]=8*D,K(G,X),G}function ve(P){var k,D=[];for(k=0;k<64;k+=4)D[k>>2]=P.charCodeAt(k)+(P.charCodeAt(k+1)<<8)+(P.charCodeAt(k+2)<<16)+(P.charCodeAt(k+3)<<24);return D}var ne="0123456789abcdef".split("");function ce(P){for(var k="",D=0;D<4;D++)k+=ne[P>>8*D+4&15]+ne[P>>8*D&15];return k}function ae(P){return String.fromCharCode(255&P,(65280&P)>>8,(16711680&P)>>16,(4278190080&P)>>24)}function De(P){return Ce(P).map(ae).join("")}var Oe=(function(P){for(var k=0;k<P.length;k++)P[k]=ce(P[k]);return P.join("")})(Ce("hello"))!="5d41402abc4b2a76b9719d911017c592";function be(P,k){if(Oe){var D=(65535&P)+(65535&k);return(P>>16)+(k>>16)+(D>>16)<<16|65535&D}return P+k&4294967295}function de(P,k){var D,G,X,ee;if(P!==D){for(var ye=(X=P,ee=1+(256/P.length|0),new Array(ee+1).join(X)),he=[],me=0;me<256;me++)he[me]=me;var Ie=0;for(me=0;me<256;me++){var Qe=he[me];Ie=(Ie+Qe+ye.charCodeAt(me))%256,he[me]=he[Ie],he[Ie]=Qe}D=P,G=he}else he=G;var qe=k.length,lt=0,Te=0,Et="";for(me=0;me<qe;me++)Te=(Te+(Qe=he[lt=(lt+1)%256]))%256,he[lt]=he[Te],he[Te]=Qe,ye=he[(he[lt]+he[Te])%256],Et+=String.fromCharCode(k.charCodeAt(me)^ye);return Et}var xe={print:4,modify:8,copy:16,"annot-forms":32};function je(P,k,D,G){this.v=1,this.r=2;var X=192;P.forEach(function(he){if(xe.perm!==void 0)throw new Error("Invalid permission: "+he);X+=xe[he]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var ee=(k+this.padding).substr(0,32),ye=(D+this.padding).substr(0,32);this.O=this.processOwnerPassword(ee,ye),this.P=-(1+(255^X)),this.encryptionKey=De(ee+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(G)).substr(0,5),this.U=de(this.encryptionKey,this.padding)}function Me(P){if(/[^\u0000-\u00ff]/.test(P))throw new Error("Invalid PDF Name Object: "+P+", Only accept ASCII characters.");for(var k="",D=P.length,G=0;G<D;G++){var X=P.charCodeAt(G);k+=X<33||X===35||X===37||X===40||X===41||X===47||X===60||X===62||X===91||X===93||X===123||X===125||X>126?"#"+("0"+X.toString(16)).slice(-2):P[G]}return k}function Re(P){if((0,d.default)(P)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var k={};this.subscribe=function(D,G,X){if(X=X||!1,typeof D!="string"||typeof G!="function"||typeof X!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");k.hasOwnProperty(D)||(k[D]={});var ee=Math.random().toString(35);return k[D][ee]=[G,!!X],ee},this.unsubscribe=function(D){for(var G in k)if(k[G][D])return delete k[G][D],Object.keys(k[G]).length===0&&delete k[G],!0;return!1},this.publish=function(D){if(k.hasOwnProperty(D)){var G=Array.prototype.slice.call(arguments,1),X=[];for(var ee in k[D]){var ye=k[D][ee];try{ye[0].apply(P,G)}catch(he){g.console&&x.error("jsPDF PubSub Error",he.message,he)}ye[1]&&X.push(ee)}X.length&&X.forEach(this.unsubscribe)}},this.getTopics=function(){return k}}function it(P){if(!(this instanceof it))return new it(P);var k="opacity,stroke-opacity".split(",");for(var D in P)P.hasOwnProperty(D)&&k.indexOf(D)>=0&&(this[D]=P[D]);this.id="",this.objectNumber=-1}function ht(P,k){this.gState=P,this.matrix=k,this.id="",this.objectNumber=-1}function Be(P,k,D,G,X){if(!(this instanceof Be))return new Be(P,k,D,G,X);this.type=P==="axial"?2:3,this.coords=k,this.colors=D,ht.call(this,G,X)}function nt(P,k,D,G,X){if(!(this instanceof nt))return new nt(P,k,D,G,X);this.boundingBox=P,this.xStep=k,this.yStep=D,this.stream="",this.cloneIndex=0,ht.call(this,G,X)}function Ge(P){var k,D=typeof arguments[0]=="string"?arguments[0]:"p",G=arguments[1],X=arguments[2],ee=arguments[3],ye=[],he=1,me=16,Ie="S",Qe=null;(0,d.default)(P=P||{})==="object"&&(D=P.orientation,G=P.unit||G,X=P.format||X,ee=P.compress||P.compressPdf||ee,(Qe=P.encryption||null)!==null&&(Qe.userPassword=Qe.userPassword||"",Qe.ownerPassword=Qe.ownerPassword||"",Qe.userPermissions=Qe.userPermissions||[]),he=typeof P.userUnit=="number"?Math.abs(P.userUnit):1,P.precision!==void 0&&(k=P.precision),P.floatPrecision!==void 0&&(me=P.floatPrecision),Ie=P.defaultPathOperation||"S"),ye=P.filters||(ee===!0?["FlateEncode"]:ye),G=G||"mm",D=(""+(D||"P")).toLowerCase();var qe=P.putOnlyUsedFonts||!1,lt={},Te={internal:{},__private__:{}};Te.__private__.PubSub=Re;var Et="1.3",at=Te.__private__.getPdfVersion=function(){return Et};Te.__private__.setPdfVersion=function(ue){Et=ue};var Ct={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};Te.__private__.getPageFormats=function(){return Ct};var et=Te.__private__.getPageFormat=function(ue){return Ct[ue]};X=X||"a4";var Pt="compat",qt="advanced",It=Pt;function Je(){this.saveGraphicsState(),pt(new bi(ki,0,0,-ki,0,ch()*ki).toString()+" cm"),this.setFontSize(this.getFontSize()/ki),Ie="n",It=qt}function zt(){this.restoreGraphicsState(),Ie="S",It=Pt}var Sr=Te.__private__.combineFontStyleAndFontWeight=function(ue,Fe){if(ue=="bold"&&Fe=="normal"||ue=="bold"&&Fe==400||ue=="normal"&&Fe=="italic"||ue=="bold"&&Fe=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Fe&&(ue=Fe==400||Fe==="normal"?ue==="italic"?"italic":"normal":Fe!=700&&Fe!=="bold"||ue!=="normal"?(Fe==700?"bold":Fe)+""+ue:"bold"),ue};Te.advancedAPI=function(ue){var Fe=It===Pt;return Fe&&Je.call(this),typeof ue!="function"||(ue(this),Fe&&zt.call(this)),this},Te.compatAPI=function(ue){var Fe=It===qt;return Fe&&zt.call(this),typeof ue!="function"||(ue(this),Fe&&Je.call(this)),this},Te.isAdvancedAPI=function(){return It===qt};var ir,Mt=function(ue){if(It!==qt)throw new Error(ue+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},xr=Te.roundToPrecision=Te.__private__.roundToPrecision=function(ue,Fe){var yt=k||Fe;if(isNaN(ue)||isNaN(yt))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return ue.toFixed(yt).replace(/0+$/,"")};ir=Te.hpf=Te.__private__.hpf=typeof me=="number"?function(ue){if(isNaN(ue))throw new Error("Invalid argument passed to jsPDF.hpf");return xr(ue,me)}:me==="smart"?function(ue){if(isNaN(ue))throw new Error("Invalid argument passed to jsPDF.hpf");return xr(ue,ue>-1&&ue<1?16:5)}:function(ue){if(isNaN(ue))throw new Error("Invalid argument passed to jsPDF.hpf");return xr(ue,16)};var st=Te.f2=Te.__private__.f2=function(ue){if(isNaN(ue))throw new Error("Invalid argument passed to jsPDF.f2");return xr(ue,2)},mt=Te.__private__.f3=function(ue){if(isNaN(ue))throw new Error("Invalid argument passed to jsPDF.f3");return xr(ue,3)},Ot=Te.scale=Te.__private__.scale=function(ue){if(isNaN(ue))throw new Error("Invalid argument passed to jsPDF.scale");return It===Pt?ue*ki:It===qt?ue:void 0},Rt=function(ue){return Ot((function(Fe){return It===Pt?ch()-Fe:It===qt?Fe:void 0})(ue))};Te.__private__.setPrecision=Te.setPrecision=function(ue){typeof parseInt(ue,10)=="number"&&(k=parseInt(ue,10))};var Ar,jr="00000000000000000000000000000000",Br=Te.__private__.getFileId=function(){return jr},ar=Te.__private__.setFileId=function(ue){return jr=ue!==void 0&&/^[a-fA-F0-9]{32}$/.test(ue)?ue.toUpperCase():jr.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),Qe!==null&&(Bo=new je(Qe.userPermissions,Qe.userPassword,Qe.ownerPassword,jr)),jr};Te.setFileId=function(ue){return ar(ue),this},Te.getFileId=function(){return Br()};var Lr=Te.__private__.convertDateToPDFDate=function(ue){var Fe=ue.getTimezoneOffset(),yt=Fe<0?"+":"-",Lt=Math.floor(Math.abs(Fe/60)),er=Math.abs(Fe%60),$r=[yt,Nt(Lt),"'",Nt(er),"'"].join("");return["D:",ue.getFullYear(),Nt(ue.getMonth()+1),Nt(ue.getDate()),Nt(ue.getHours()),Nt(ue.getMinutes()),Nt(ue.getSeconds()),$r].join("")},hn=Te.__private__.convertPDFDateToDate=function(ue){var Fe=parseInt(ue.substr(2,4),10),yt=parseInt(ue.substr(6,2),10)-1,Lt=parseInt(ue.substr(8,2),10),er=parseInt(ue.substr(10,2),10),$r=parseInt(ue.substr(12,2),10),Zr=parseInt(ue.substr(14,2),10);return new Date(Fe,yt,Lt,er,$r,Zr,0)},tn=Te.__private__.setCreationDate=function(ue){var Fe;if(ue===void 0&&(ue=new Date),ue instanceof Date)Fe=Lr(ue);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(ue))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Fe=ue}return Ar=Fe},We=Te.__private__.getCreationDate=function(ue){var Fe=Ar;return ue==="jsDate"&&(Fe=hn(Ar)),Fe};Te.setCreationDate=function(ue){return tn(ue),this},Te.getCreationDate=function(ue){return We(ue)};var St,Nt=Te.__private__.padd2=function(ue){return("0"+parseInt(ue)).slice(-2)},Gt=Te.__private__.padd2Hex=function(ue){return("00"+(ue=ue.toString())).substr(ue.length)},Xt=0,cr=[],Nr=[],Cr=0,Gr=[],un=[],En=!1,Rn=Nr;Te.__private__.setCustomOutputDestination=function(ue){En=!0,Rn=ue};var yi=function(ue){En||(Rn=ue)};Te.__private__.resetCustomOutputDestination=function(){En=!1,Rn=Nr};var pt=Te.__private__.out=function(ue){return ue=ue.toString(),Cr+=ue.length+1,Rn.push(ue),Rn},Sn=Te.__private__.write=function(ue){return pt(arguments.length===1?ue.toString():Array.prototype.join.call(arguments," "))},Ri=Te.__private__.getArrayBuffer=function(ue){for(var Fe=ue.length,yt=new ArrayBuffer(Fe),Lt=new Uint8Array(yt);Fe--;)Lt[Fe]=ue.charCodeAt(Fe);return yt},Tn=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];Te.__private__.getStandardFonts=function(){return Tn};var nn=P.fontSize||16;Te.__private__.setFontSize=Te.setFontSize=function(ue){return nn=It===qt?ue/ki:ue,this};var ji,Fn=Te.__private__.getFontSize=Te.getFontSize=function(){return It===Pt?nn:nn*ki},Hn=P.R2L||!1;Te.__private__.setR2L=Te.setR2L=function(ue){return Hn=ue,this},Te.__private__.getR2L=Te.getR2L=function(){return Hn};var $n,ga=Te.__private__.setZoomMode=function(ue){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(ue))ji=ue;else if(isNaN(ue)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(ue)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+ue+'" is not recognized.');ji=ue}else ji=parseInt(ue,10)};Te.__private__.getZoomMode=function(){return ji};var Di,Gn=Te.__private__.setPageMode=function(ue){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(ue)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+ue+'" is not recognized.');$n=ue};Te.__private__.getPageMode=function(){return $n};var ns=Te.__private__.setLayoutMode=function(ue){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(ue)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+ue+'" is not recognized.');Di=ue};Te.__private__.getLayoutMode=function(){return Di},Te.__private__.setDisplayMode=Te.setDisplayMode=function(ue,Fe,yt){return ga(ue),ns(Fe),Gn(yt),this};var _i={title:"",subject:"",author:"",keywords:"",creator:""};Te.__private__.getDocumentProperty=function(ue){if(Object.keys(_i).indexOf(ue)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return _i[ue]},Te.__private__.getDocumentProperties=function(){return _i},Te.__private__.setDocumentProperties=Te.setProperties=Te.setDocumentProperties=function(ue){for(var Fe in _i)_i.hasOwnProperty(Fe)&&ue[Fe]&&(_i[Fe]=ue[Fe]);return this},Te.__private__.setDocumentProperty=function(ue,Fe){if(Object.keys(_i).indexOf(ue)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return _i[ue]=Fe};var Un,ki,Wn,Gi,is,Zi={},vs={},ja=[],xi={},Ys={},Qi={},ai={},da=null,Ii=0,xn=[],ls=new Re(Te),wu=P.hotfixes||[],io={},Ko={},Jl=[],bi=function ue(Fe,yt,Lt,er,$r,Zr){if(!(this instanceof ue))return new ue(Fe,yt,Lt,er,$r,Zr);isNaN(Fe)&&(Fe=1),isNaN(yt)&&(yt=0),isNaN(Lt)&&(Lt=0),isNaN(er)&&(er=1),isNaN($r)&&($r=0),isNaN(Zr)&&(Zr=0),this._matrix=[Fe,yt,Lt,er,$r,Zr]};Object.defineProperty(bi.prototype,"sx",{get:function(){return this._matrix[0]},set:function(ue){this._matrix[0]=ue}}),Object.defineProperty(bi.prototype,"shy",{get:function(){return this._matrix[1]},set:function(ue){this._matrix[1]=ue}}),Object.defineProperty(bi.prototype,"shx",{get:function(){return this._matrix[2]},set:function(ue){this._matrix[2]=ue}}),Object.defineProperty(bi.prototype,"sy",{get:function(){return this._matrix[3]},set:function(ue){this._matrix[3]=ue}}),Object.defineProperty(bi.prototype,"tx",{get:function(){return this._matrix[4]},set:function(ue){this._matrix[4]=ue}}),Object.defineProperty(bi.prototype,"ty",{get:function(){return this._matrix[5]},set:function(ue){this._matrix[5]=ue}}),Object.defineProperty(bi.prototype,"a",{get:function(){return this._matrix[0]},set:function(ue){this._matrix[0]=ue}}),Object.defineProperty(bi.prototype,"b",{get:function(){return this._matrix[1]},set:function(ue){this._matrix[1]=ue}}),Object.defineProperty(bi.prototype,"c",{get:function(){return this._matrix[2]},set:function(ue){this._matrix[2]=ue}}),Object.defineProperty(bi.prototype,"d",{get:function(){return this._matrix[3]},set:function(ue){this._matrix[3]=ue}}),Object.defineProperty(bi.prototype,"e",{get:function(){return this._matrix[4]},set:function(ue){this._matrix[4]=ue}}),Object.defineProperty(bi.prototype,"f",{get:function(){return this._matrix[5]},set:function(ue){this._matrix[5]=ue}}),Object.defineProperty(bi.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(bi.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(bi.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(bi.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),bi.prototype.join=function(ue){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(ir).join(ue)},bi.prototype.multiply=function(ue){var Fe=ue.sx*this.sx+ue.shy*this.shx,yt=ue.sx*this.shy+ue.shy*this.sy,Lt=ue.shx*this.sx+ue.sy*this.shx,er=ue.shx*this.shy+ue.sy*this.sy,$r=ue.tx*this.sx+ue.ty*this.shx+this.tx,Zr=ue.tx*this.shy+ue.ty*this.sy+this.ty;return new bi(Fe,yt,Lt,er,$r,Zr)},bi.prototype.decompose=function(){var ue=this.sx,Fe=this.shy,yt=this.shx,Lt=this.sy,er=this.tx,$r=this.ty,Zr=Math.sqrt(ue*ue+Fe*Fe),ti=(ue/=Zr)*yt+(Fe/=Zr)*Lt;yt-=ue*ti,Lt-=Fe*ti;var ri=Math.sqrt(yt*yt+Lt*Lt);return ti/=ri,ue*(Lt/=ri)<Fe*(yt/=ri)&&(ue=-ue,Fe=-Fe,ti=-ti,Zr=-Zr),{scale:new bi(Zr,0,0,ri,0,0),translate:new bi(1,0,0,1,er,$r),rotate:new bi(ue,Fe,-Fe,ue,0,0),skew:new bi(1,0,ti,1,0,0)}},bi.prototype.toString=function(ue){return this.join(" ")},bi.prototype.inversed=function(){var ue=this.sx,Fe=this.shy,yt=this.shx,Lt=this.sy,er=this.tx,$r=this.ty,Zr=1/(ue*Lt-Fe*yt),ti=Lt*Zr,ri=-Fe*Zr,Yi=-yt*Zr,as=ue*Zr;return new bi(ti,ri,Yi,as,-ti*er-Yi*$r,-ri*er-as*$r)},bi.prototype.applyToPoint=function(ue){var Fe=ue.x*this.sx+ue.y*this.shx+this.tx,yt=ue.x*this.shy+ue.y*this.sy+this.ty;return new au(Fe,yt)},bi.prototype.applyToRectangle=function(ue){var Fe=this.applyToPoint(ue),yt=this.applyToPoint(new au(ue.x+ue.w,ue.y+ue.h));return new _d(Fe.x,Fe.y,yt.x-Fe.x,yt.y-Fe.y)},bi.prototype.clone=function(){var ue=this.sx,Fe=this.shy,yt=this.shx,Lt=this.sy,er=this.tx,$r=this.ty;return new bi(ue,Fe,yt,Lt,er,$r)},Te.Matrix=bi;var Ra=Te.matrixMult=function(ue,Fe){return Fe.multiply(ue)},Xa=new bi(1,0,0,1,0,0);Te.unitMatrix=Te.identityMatrix=Xa;var Ul=function(ue,Fe){if(!Ys[ue]){var yt=(Fe instanceof Be?"Sh":"P")+(Object.keys(xi).length+1).toString(10);Fe.id=yt,Ys[ue]=yt,xi[yt]=Fe,ls.publish("addPattern",Fe)}};Te.ShadingPattern=Be,Te.TilingPattern=nt,Te.addShadingPattern=function(ue,Fe){return Mt("addShadingPattern()"),Ul(ue,Fe),this},Te.beginTilingPattern=function(ue){Mt("beginTilingPattern()"),Kc(ue.boundingBox[0],ue.boundingBox[1],ue.boundingBox[2]-ue.boundingBox[0],ue.boundingBox[3]-ue.boundingBox[1],ue.matrix)},Te.endTilingPattern=function(ue,Fe){Mt("endTilingPattern()"),Fe.stream=un[St].join(`
`),Ul(ue,Fe),ls.publish("endTilingPattern",Fe),Jl.pop().restore()};var $l,ha=Te.__private__.newObject=function(){var ue=vo();return Za(ue,!0),ue},vo=Te.__private__.newObjectDeferred=function(){return Xt++,cr[Xt]=function(){return Cr},Xt},Za=function(ue,Fe){return Fe=typeof Fe=="boolean"&&Fe,cr[ue]=Cr,Fe&&pt(ue+" 0 obj"),ue},Hc=Te.__private__.newAdditionalObject=function(){var ue={objId:vo(),content:""};return Gr.push(ue),ue},Co=vo(),pc=vo(),Ka=Te.__private__.decodeColorString=function(ue){var Fe=ue.split(" ");if(Fe.length!==2||Fe[1]!=="g"&&Fe[1]!=="G")Fe.length!==5||Fe[4]!=="k"&&Fe[4]!=="K"||(Fe=[(1-Fe[0])*(1-Fe[3]),(1-Fe[1])*(1-Fe[3]),(1-Fe[2])*(1-Fe[3]),"r"]);else{var yt=parseFloat(Fe[0]);Fe=[yt,yt,yt,"r"]}for(var Lt="#",er=0;er<3;er++)Lt+=("0"+Math.floor(255*parseFloat(Fe[er])).toString(16)).slice(-2);return Lt},Hl=Te.__private__.encodeColorString=function(ue){var Fe;typeof ue=="string"&&(ue={ch1:ue});var yt=ue.ch1,Lt=ue.ch2,er=ue.ch3,$r=ue.ch4,Zr=ue.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof yt=="string"&&yt.charAt(0)!=="#"){var ti=new N(yt);if(ti.ok)yt=ti.toHex();else if(!/^\d*\.?\d*$/.test(yt))throw new Error('Invalid color "'+yt+'" passed to jsPDF.encodeColorString.')}if(typeof yt=="string"&&/^#[0-9A-Fa-f]{3}$/.test(yt)&&(yt="#"+yt[1]+yt[1]+yt[2]+yt[2]+yt[3]+yt[3]),typeof yt=="string"&&/^#[0-9A-Fa-f]{6}$/.test(yt)){var ri=parseInt(yt.substr(1),16);yt=ri>>16&255,Lt=ri>>8&255,er=255&ri}if(Lt===void 0||$r===void 0&&yt===Lt&&Lt===er)Fe=typeof yt=="string"?yt+" "+Zr[0]:ue.precision===2?st(yt/255)+" "+Zr[0]:mt(yt/255)+" "+Zr[0];else if($r===void 0||(0,d.default)($r)==="object"){if($r&&!isNaN($r.a)&&$r.a===0)return["1.","1.","1.",Zr[1]].join(" ");Fe=typeof yt=="string"?[yt,Lt,er,Zr[1]].join(" "):ue.precision===2?[st(yt/255),st(Lt/255),st(er/255),Zr[1]].join(" "):[mt(yt/255),mt(Lt/255),mt(er/255),Zr[1]].join(" ")}else Fe=typeof yt=="string"?[yt,Lt,er,$r,Zr[2]].join(" "):ue.precision===2?[st(yt),st(Lt),st(er),st($r),Zr[2]].join(" "):[mt(yt),mt(Lt),mt(er),mt($r),Zr[2]].join(" ");return Fe},Ql=Te.__private__.getFilters=function(){return ye},Il=Te.__private__.putStream=function(ue){var Fe=(ue=ue||{}).data||"",yt=ue.filters||Ql(),Lt=ue.alreadyAppliedFilters||[],er=ue.addLength1||!1,$r=Fe.length,Zr=ue.objectId,ti=function(Wo){return Wo};if(Qe!==null&&Zr===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");Qe!==null&&(ti=Bo.encryptor(Zr,0));var ri={};yt===!0&&(yt=["FlateEncode"]);var Yi=ue.additionalKeyValues||[],as=(ri=Ge.API.processDataByFilters!==void 0?Ge.API.processDataByFilters(Fe,yt):{data:Fe,reverseChain:[]}).reverseChain+(Array.isArray(Lt)?Lt.join(" "):Lt.toString());if(ri.data.length!==0&&(Yi.push({key:"Length",value:ri.data.length}),er===!0&&Yi.push({key:"Length1",value:$r})),as.length!=0)if(as.split("/").length-1==1)Yi.push({key:"Filter",value:as});else{Yi.push({key:"Filter",value:"["+as+"]"});for(var na=0;na<Yi.length;na+=1)if(Yi[na].key==="DecodeParms"){for(var Ma=[],Oo=0;Oo<ri.reverseChain.split("/").length-1;Oo+=1)Ma.push("null");Ma.push(Yi[na].value),Yi[na].value="["+Ma.join(" ")+"]"}}pt("<<");for(var Na=0;Na<Yi.length;Na++)pt("/"+Yi[Na].key+" "+Yi[Na].value);pt(">>"),ri.data.length!==0&&(pt("stream"),pt(ti(ri.data)),pt("endstream"))},yd=Te.__private__.putPage=function(ue){var Fe=ue.number,yt=ue.data,Lt=ue.objId,er=ue.contentsObjId;Za(Lt,!0),pt("<</Type /Page"),pt("/Parent "+ue.rootDictionaryObjId+" 0 R"),pt("/Resources "+ue.resourceDictionaryObjId+" 0 R"),pt("/MediaBox ["+parseFloat(ir(ue.mediaBox.bottomLeftX))+" "+parseFloat(ir(ue.mediaBox.bottomLeftY))+" "+ir(ue.mediaBox.topRightX)+" "+ir(ue.mediaBox.topRightY)+"]"),ue.cropBox!==null&&pt("/CropBox ["+ir(ue.cropBox.bottomLeftX)+" "+ir(ue.cropBox.bottomLeftY)+" "+ir(ue.cropBox.topRightX)+" "+ir(ue.cropBox.topRightY)+"]"),ue.bleedBox!==null&&pt("/BleedBox ["+ir(ue.bleedBox.bottomLeftX)+" "+ir(ue.bleedBox.bottomLeftY)+" "+ir(ue.bleedBox.topRightX)+" "+ir(ue.bleedBox.topRightY)+"]"),ue.trimBox!==null&&pt("/TrimBox ["+ir(ue.trimBox.bottomLeftX)+" "+ir(ue.trimBox.bottomLeftY)+" "+ir(ue.trimBox.topRightX)+" "+ir(ue.trimBox.topRightY)+"]"),ue.artBox!==null&&pt("/ArtBox ["+ir(ue.artBox.bottomLeftX)+" "+ir(ue.artBox.bottomLeftY)+" "+ir(ue.artBox.topRightX)+" "+ir(ue.artBox.topRightY)+"]"),typeof ue.userUnit=="number"&&ue.userUnit!==1&&pt("/UserUnit "+ue.userUnit),ls.publish("putPage",{objId:Lt,pageContext:xn[Fe],pageNumber:Fe,page:yt}),pt("/Contents "+er+" 0 R"),pt(">>"),pt("endobj");var $r=yt.join(`
`);return It===qt&&($r+=`
Q`),Za(er,!0),Il({data:$r,filters:Ql(),objectId:er}),pt("endobj"),Lt},ec=Te.__private__.putPages=function(){var ue,Fe,yt=[];for(ue=1;ue<=Ii;ue++)xn[ue].objId=vo(),xn[ue].contentsObjId=vo();for(ue=1;ue<=Ii;ue++)yt.push(yd({number:ue,data:un[ue],objId:xn[ue].objId,contentsObjId:xn[ue].contentsObjId,mediaBox:xn[ue].mediaBox,cropBox:xn[ue].cropBox,bleedBox:xn[ue].bleedBox,trimBox:xn[ue].trimBox,artBox:xn[ue].artBox,userUnit:xn[ue].userUnit,rootDictionaryObjId:Co,resourceDictionaryObjId:pc}));Za(Co,!0),pt("<</Type /Pages");var Lt="/Kids [";for(Fe=0;Fe<Ii;Fe++)Lt+=yt[Fe]+" 0 R ";pt(Lt+"]"),pt("/Count "+Ii),pt(">>"),pt("endobj"),ls.publish("postPutPages")},Vl=function(ue){ls.publish("putFont",{font:ue,out:pt,newObject:ha,putStream:Il}),ue.isAlreadyPutted!==!0&&(ue.objectNumber=ha(),pt("<<"),pt("/Type /Font"),pt("/BaseFont /"+Me(ue.postScriptName)),pt("/Subtype /Type1"),typeof ue.encoding=="string"&&pt("/Encoding /"+ue.encoding),pt("/FirstChar 32"),pt("/LastChar 255"),pt(">>"),pt("endobj"))},gc=function(ue){ue.objectNumber=ha();var Fe=[];Fe.push({key:"Type",value:"/XObject"}),Fe.push({key:"Subtype",value:"/Form"}),Fe.push({key:"BBox",value:"["+[ir(ue.x),ir(ue.y),ir(ue.x+ue.width),ir(ue.y+ue.height)].join(" ")+"]"}),Fe.push({key:"Matrix",value:"["+ue.matrix.toString()+"]"});var yt=ue.pages[1].join(`
`);Il({data:yt,additionalKeyValues:Fe,objectId:ue.objectNumber}),pt("endobj")},xd=function(ue,Fe){Fe||(Fe=21);var yt=ha(),Lt=(function(Zr,ti){var ri,Yi=[],as=1/(ti-1);for(ri=0;ri<1;ri+=as)Yi.push(ri);if(Yi.push(1),Zr[0].offset!=0){var na={offset:0,color:Zr[0].color};Zr.unshift(na)}if(Zr[Zr.length-1].offset!=1){var Ma={offset:1,color:Zr[Zr.length-1].color};Zr.push(Ma)}for(var Oo="",Na=0,Wo=0;Wo<Yi.length;Wo++){for(ri=Yi[Wo];ri>Zr[Na+1].offset;)Na++;var O=Zr[Na].offset,Pe=(ri-O)/(Zr[Na+1].offset-O),J=Zr[Na].color,Ye=Zr[Na+1].color;Oo+=Gt(Math.round((1-Pe)*J[0]+Pe*Ye[0]).toString(16))+Gt(Math.round((1-Pe)*J[1]+Pe*Ye[1]).toString(16))+Gt(Math.round((1-Pe)*J[2]+Pe*Ye[2]).toString(16))}return Oo.trim()})(ue.colors,Fe),er=[];er.push({key:"FunctionType",value:"0"}),er.push({key:"Domain",value:"[0.0 1.0]"}),er.push({key:"Size",value:"["+Fe+"]"}),er.push({key:"BitsPerSample",value:"8"}),er.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),er.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Il({data:Lt,additionalKeyValues:er,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:yt}),pt("endobj"),ue.objectNumber=ha(),pt("<< /ShadingType "+ue.type),pt("/ColorSpace /DeviceRGB");var $r="/Coords ["+ir(parseFloat(ue.coords[0]))+" "+ir(parseFloat(ue.coords[1]))+" ";ue.type===2?$r+=ir(parseFloat(ue.coords[2]))+" "+ir(parseFloat(ue.coords[3])):$r+=ir(parseFloat(ue.coords[2]))+" "+ir(parseFloat(ue.coords[3]))+" "+ir(parseFloat(ue.coords[4]))+" "+ir(parseFloat(ue.coords[5])),pt($r+="]"),ue.matrix&&pt("/Matrix ["+ue.matrix.toString()+"]"),pt("/Function "+yt+" 0 R"),pt("/Extend [true true]"),pt(">>"),pt("endobj")},zl=function(ue,Fe){var yt=vo(),Lt=ha();Fe.push({resourcesOid:yt,objectOid:Lt}),ue.objectNumber=Lt;var er=[];er.push({key:"Type",value:"/Pattern"}),er.push({key:"PatternType",value:"1"}),er.push({key:"PaintType",value:"1"}),er.push({key:"TilingType",value:"1"}),er.push({key:"BBox",value:"["+ue.boundingBox.map(ir).join(" ")+"]"}),er.push({key:"XStep",value:ir(ue.xStep)}),er.push({key:"YStep",value:ir(ue.yStep)}),er.push({key:"Resources",value:yt+" 0 R"}),ue.matrix&&er.push({key:"Matrix",value:"["+ue.matrix.toString()+"]"}),Il({data:ue.stream,additionalKeyValues:er,objectId:ue.objectNumber}),pt("endobj")},Kl=function(ue){for(var Fe in ue.objectNumber=ha(),pt("<<"),ue)switch(Fe){case"opacity":pt("/ca "+st(ue[Fe]));break;case"stroke-opacity":pt("/CA "+st(ue[Fe]))}pt(">>"),pt("endobj")},Eu=function(ue){Za(ue.resourcesOid,!0),pt("<<"),pt("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var Fe in pt("/Font <<"),Zi)Zi.hasOwnProperty(Fe)&&(qe===!1||qe===!0&&lt.hasOwnProperty(Fe))&&pt("/"+Fe+" "+Zi[Fe].objectNumber+" 0 R");pt(">>")})(),(function(){if(Object.keys(xi).length>0){for(var Fe in pt("/Shading <<"),xi)xi.hasOwnProperty(Fe)&&xi[Fe]instanceof Be&&xi[Fe].objectNumber>=0&&pt("/"+Fe+" "+xi[Fe].objectNumber+" 0 R");ls.publish("putShadingPatternDict"),pt(">>")}})(),(function(Fe){if(Object.keys(xi).length>0){for(var yt in pt("/Pattern <<"),xi)xi.hasOwnProperty(yt)&&xi[yt]instanceof Te.TilingPattern&&xi[yt].objectNumber>=0&&xi[yt].objectNumber<Fe&&pt("/"+yt+" "+xi[yt].objectNumber+" 0 R");ls.publish("putTilingPatternDict"),pt(">>")}})(ue.objectOid),(function(){if(Object.keys(Qi).length>0){var Fe;for(Fe in pt("/ExtGState <<"),Qi)Qi.hasOwnProperty(Fe)&&Qi[Fe].objectNumber>=0&&pt("/"+Fe+" "+Qi[Fe].objectNumber+" 0 R");ls.publish("putGStateDict"),pt(">>")}})(),(function(){for(var Fe in pt("/XObject <<"),io)io.hasOwnProperty(Fe)&&io[Fe].objectNumber>=0&&pt("/"+Fe+" "+io[Fe].objectNumber+" 0 R");ls.publish("putXobjectDict"),pt(">>")})(),pt(">>"),pt("endobj")},Gl=function(ue){vs[ue.fontName]=vs[ue.fontName]||{},vs[ue.fontName][ue.fontStyle]=ue.id},Lo=function(ue,Fe,yt,Lt,er){var $r={id:"F"+(Object.keys(Zi).length+1).toString(10),postScriptName:ue,fontName:Fe,fontStyle:yt,encoding:Lt,isStandardFont:er||!1,metadata:{}};return ls.publish("addFont",{font:$r,instance:this}),Zi[$r.id]=$r,Gl($r),$r.id},gl=Te.__private__.pdfEscape=Te.pdfEscape=function(ue,Fe){return(function(yt,Lt){var er,$r,Zr,ti,ri,Yi,as,na,Ma;if(Zr=(Lt=Lt||{}).sourceEncoding||"Unicode",ri=Lt.outputEncoding,(Lt.autoencode||ri)&&Zi[Un].metadata&&Zi[Un].metadata[Zr]&&Zi[Un].metadata[Zr].encoding&&(ti=Zi[Un].metadata[Zr].encoding,!ri&&Zi[Un].encoding&&(ri=Zi[Un].encoding),!ri&&ti.codePages&&(ri=ti.codePages[0]),typeof ri=="string"&&(ri=ti[ri]),ri)){for(as=!1,Yi=[],er=0,$r=yt.length;er<$r;er++)(na=ri[yt.charCodeAt(er)])?Yi.push(String.fromCharCode(na)):Yi.push(yt[er]),Yi[er].charCodeAt(0)>>8&&(as=!0);yt=Yi.join("")}for(er=yt.length;as===void 0&&er!==0;)yt.charCodeAt(er-1)>>8&&(as=!0),er--;if(!as)return yt;for(Yi=Lt.noBOM?[]:[254,255],er=0,$r=yt.length;er<$r;er++){if((Ma=(na=yt.charCodeAt(er))>>8)>>8)throw new Error("Character at position "+er+" of string '"+yt+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Yi.push(Ma),Yi.push(na-(Ma<<8))}return String.fromCharCode.apply(void 0,Yi)})(ue,Fe).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},iu=Te.__private__.beginPage=function(ue){un[++Ii]=[],xn[Ii]={objId:0,contentsObjId:0,userUnit:Number(he),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(ue[0]),topRightY:Number(ue[1])}},tc(Ii),yi(un[St])},vc=function(ue,Fe){var yt,Lt,er;switch(D=Fe||D,typeof ue=="string"&&(yt=et(ue.toLowerCase()),Array.isArray(yt)&&(Lt=yt[0],er=yt[1])),Array.isArray(ue)&&(Lt=ue[0]*ki,er=ue[1]*ki),isNaN(Lt)&&(Lt=X[0],er=X[1]),(Lt>14400||er>14400)&&(x.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Lt=Math.min(14400,Lt),er=Math.min(14400,er)),X=[Lt,er],D.substr(0,1)){case"l":er>Lt&&(X=[er,Lt]);break;case"p":Lt>er&&(X=[er,Lt])}iu(X),jn(Zs),pt(Go),Ec!==0&&pt(Ec+" J"),zc!==0&&pt(zc+" j"),ls.publish("addPage",{pageNumber:Ii})},Hd=function(ue){ue>0&&ue<=Ii&&(un.splice(ue,1),xn.splice(ue,1),Ii--,St>Ii&&(St=Ii),this.setPage(St))},tc=function(ue){ue>0&&ue<=Ii&&(St=ue)},Gu=Te.__private__.getNumberOfPages=Te.getNumberOfPages=function(){return un.length-1},bd=function(ue,Fe,yt){var Lt,er=void 0;return yt=yt||{},ue=ue!==void 0?ue:Zi[Un].fontName,Fe=Fe!==void 0?Fe:Zi[Un].fontStyle,Lt=ue.toLowerCase(),vs[Lt]!==void 0&&vs[Lt][Fe]!==void 0?er=vs[Lt][Fe]:vs[ue]!==void 0&&vs[ue][Fe]!==void 0?er=vs[ue][Fe]:yt.disableWarning===!1&&x.warn("Unable to look up font label for font '"+ue+"', '"+Fe+"'. Refer to getFontList() for available fonts."),er||yt.noFallback||(er=vs.times[Fe])==null&&(er=vs.times.normal),er},vl=Te.__private__.putInfo=function(){var ue=ha(),Fe=function(Lt){return Lt};for(var yt in Qe!==null&&(Fe=Bo.encryptor(ue,0)),pt("<<"),pt("/Producer ("+gl(Fe("jsPDF "+Ge.version))+")"),_i)_i.hasOwnProperty(yt)&&_i[yt]&&pt("/"+yt.substr(0,1).toUpperCase()+yt.substr(1)+" ("+gl(Fe(_i[yt]))+")");pt("/CreationDate ("+gl(Fe(Ar))+")"),pt(">>"),pt("endobj")},sh=Te.__private__.putCatalog=function(ue){var Fe=(ue=ue||{}).rootDictionaryObjId||Co;switch(ha(),pt("<<"),pt("/Type /Catalog"),pt("/Pages "+Fe+" 0 R"),ji||(ji="fullwidth"),ji){case"fullwidth":pt("/OpenAction [3 0 R /FitH null]");break;case"fullheight":pt("/OpenAction [3 0 R /FitV null]");break;case"fullpage":pt("/OpenAction [3 0 R /Fit]");break;case"original":pt("/OpenAction [3 0 R /XYZ null null 1]");break;default:var yt=""+ji;yt.substr(yt.length-1)==="%"&&(ji=parseInt(ji)/100),typeof ji=="number"&&pt("/OpenAction [3 0 R /XYZ null null "+st(ji)+"]")}switch(Di||(Di="continuous"),Di){case"continuous":pt("/PageLayout /OneColumn");break;case"single":pt("/PageLayout /SinglePage");break;case"two":case"twoleft":pt("/PageLayout /TwoColumnLeft");break;case"tworight":pt("/PageLayout /TwoColumnRight")}$n&&pt("/PageMode /"+$n),ls.publish("putCatalog"),pt(">>"),pt("endobj")},Ll=Te.__private__.putTrailer=function(){pt("trailer"),pt("<<"),pt("/Size "+(Xt+1)),pt("/Root "+Xt+" 0 R"),pt("/Info "+(Xt-1)+" 0 R"),Qe!==null&&pt("/Encrypt "+Bo.oid+" 0 R"),pt("/ID [ <"+jr+"> <"+jr+"> ]"),pt(">>")},Fi=Te.__private__.putHeader=function(){pt("%PDF-"+Et),pt("%")},yc=Te.__private__.putXRef=function(){var ue="0000000000";pt("xref"),pt("0 "+(Xt+1)),pt("0000000000 65535 f ");for(var Fe=1;Fe<=Xt;Fe++)typeof cr[Fe]=="function"?pt((ue+cr[Fe]()).slice(-10)+" 00000 n "):cr[Fe]!==void 0?pt((ue+cr[Fe]).slice(-10)+" 00000 n "):pt("0000000000 00000 n ")},Qc=Te.__private__.buildDocument=function(){var ue;Xt=0,Cr=0,Nr=[],cr=[],Gr=[],Co=vo(),pc=vo(),yi(Nr),ls.publish("buildDocument"),Fi(),ec(),(function(){ls.publish("putAdditionalObjects");for(var yt=0;yt<Gr.length;yt++){var Lt=Gr[yt];Za(Lt.objId,!0),pt(Lt.content),pt("endobj")}ls.publish("postPutAdditionalObjects")})(),ue=[],(function(){for(var yt in Zi)Zi.hasOwnProperty(yt)&&(qe===!1||qe===!0&&lt.hasOwnProperty(yt))&&Vl(Zi[yt])})(),(function(){var yt;for(yt in Qi)Qi.hasOwnProperty(yt)&&Kl(Qi[yt])})(),(function(){for(var yt in io)io.hasOwnProperty(yt)&&gc(io[yt])})(),(function(yt){var Lt;for(Lt in xi)xi.hasOwnProperty(Lt)&&(xi[Lt]instanceof Be?xd(xi[Lt]):xi[Lt]instanceof nt&&zl(xi[Lt],yt))})(ue),ls.publish("putResources"),ue.forEach(Eu),Eu({resourcesOid:pc,objectOid:Number.MAX_SAFE_INTEGER}),ls.publish("postPutResources"),Qe!==null&&(Bo.oid=ha(),pt("<<"),pt("/Filter /Standard"),pt("/V "+Bo.v),pt("/R "+Bo.r),pt("/U <"+Bo.toHexString(Bo.U)+">"),pt("/O <"+Bo.toHexString(Bo.O)+">"),pt("/P "+Bo.P),pt(">>"),pt("endobj")),vl(),sh();var Fe=Cr;return yc(),Ll(),pt("startxref"),pt(""+Fe),pt("%%EOF"),yi(un[St]),Nr.join(`
`)},Vc=Te.__private__.getBlob=function(ue){return new Blob([Ri(ue)],{type:"application/pdf"})},Wu=Te.output=Te.__private__.output=($l=function(ue,Fe){switch(typeof(Fe=Fe||{})=="string"?Fe={filename:Fe}:Fe.filename=Fe.filename||"generated.pdf",ue){case void 0:return Qc();case"save":Te.save(Fe.filename);break;case"arraybuffer":return Ri(Qc());case"blob":return Vc(Qc());case"bloburi":case"bloburl":if(g.URL!==void 0&&typeof g.URL.createObjectURL=="function")return g.URL&&g.URL.createObjectURL(Vc(Qc()))||void 0;x.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var yt="",Lt=Qc();try{yt=U(Lt)}catch{yt=U(unescape(encodeURIComponent(Lt)))}return"data:application/pdf;filename="+Fe.filename+";base64,"+yt;case"pdfobjectnewwindow":if(Object.prototype.toString.call(g)==="[object Window]"){var er="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",$r=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Fe.pdfObjectUrl&&(er=Fe.pdfObjectUrl,$r="");var Zr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+er+'"'+$r+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Fe)+");<\/script></body></html>",ti=g.open();return ti!==null&&ti.document.write(Zr),ti}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(g)==="[object Window]"){var ri='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Fe.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Fe.filename+'" width="500px" height="400px" /></body></html>',Yi=g.open();if(Yi!==null){Yi.document.write(ri);var as=this;Yi.document.documentElement.querySelector("#pdfViewer").onload=function(){Yi.document.title=Fe.filename,Yi.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(as.output("bloburl"))}}return Yi}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(g)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var na='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Fe)+'"></iframe></body></html>',Ma=g.open();if(Ma!==null&&(Ma.document.write(na),Ma.document.title=Fe.filename),Ma||typeof safari>"u")return Ma;break;case"datauri":case"dataurl":return g.document.location.href=this.output("datauristring",Fe);default:return null}},$l.foo=function(){try{return $l.apply(this,arguments)}catch(yt){var ue=yt.stack||"";~ue.indexOf(" at ")&&(ue=ue.split(" at ")[1]);var Fe="Error in function "+ue.split(`
`)[0].split("<")[0]+": "+yt.message;if(!g.console)throw new Error(Fe);g.console.error(Fe,yt),g.alert&&alert(Fe)}},$l.foo.bar=$l,$l.foo),xc=function(ue){return Array.isArray(wu)===!0&&wu.indexOf(ue)>-1};switch(G){case"pt":ki=1;break;case"mm":ki=2.834645669291339;break;case"cm":ki=28.346456692913385;break;case"in":ki=72;break;case"px":ki=xc("px_scaling")==1?.75:1.3333333333333333;break;case"pc":case"em":ki=12;break;case"ex":ki=6;break;default:if(typeof G!="number")throw new Error("Invalid unit: "+G);ki=G}var Bo=null;tn(),ar();var su=Te.__private__.getPageInfo=Te.getPageInfo=function(ue){if(isNaN(ue)||ue%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:xn[ue].objId,pageNumber:ue,pageContext:xn[ue]}},v=Te.__private__.getPageInfoByObjId=function(ue){if(isNaN(ue)||ue%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Fe in xn)if(xn[Fe].objId===ue)break;return su(Fe)},_=Te.__private__.getCurrentPageInfo=Te.getCurrentPageInfo=function(){return{objId:xn[St].objId,pageNumber:St,pageContext:xn[St]}};Te.addPage=function(){return vc.apply(this,arguments),this},Te.setPage=function(){return tc.apply(this,arguments),yi.call(this,un[St]),this},Te.insertPage=function(ue){return this.addPage(),this.movePage(St,ue),this},Te.movePage=function(ue,Fe){var yt,Lt;if(ue>Fe){yt=un[ue],Lt=xn[ue];for(var er=ue;er>Fe;er--)un[er]=un[er-1],xn[er]=xn[er-1];un[Fe]=yt,xn[Fe]=Lt,this.setPage(Fe)}else if(ue<Fe){yt=un[ue],Lt=xn[ue];for(var $r=ue;$r<Fe;$r++)un[$r]=un[$r+1],xn[$r]=xn[$r+1];un[Fe]=yt,xn[Fe]=Lt,this.setPage(Fe)}return this},Te.deletePage=function(){return Hd.apply(this,arguments),this},Te.__private__.text=Te.text=function(ue,Fe,yt,Lt,er){var $r,Zr,ti,ri,Yi,as,na,Ma,Oo,Na=(Lt=Lt||{}).scope||this;if(typeof ue=="number"&&typeof Fe=="number"&&(typeof yt=="string"||Array.isArray(yt))){var Wo=yt;yt=Fe,Fe=ue,ue=Wo}if(arguments[3]instanceof bi==0?(ti=arguments[4],ri=arguments[5],(0,d.default)(na=arguments[3])==="object"&&na!==null||(typeof ti=="string"&&(ri=ti,ti=null),typeof na=="string"&&(ri=na,na=null),typeof na=="number"&&(ti=na,na=null),Lt={flags:na,angle:ti,align:ri})):(Mt("The transform parameter of text() with a Matrix value"),Oo=er),isNaN(Fe)||isNaN(yt)||ue==null)throw new Error("Invalid arguments passed to jsPDF.text");if(ue.length===0)return Na;var O,Pe="",J=typeof Lt.lineHeightFactor=="number"?Lt.lineHeightFactor:il,Ye=Na.internal.scaleFactor;function bt(sa){return sa=sa.split("	").join(Array(Lt.TabLen||9).join(" ")),gl(sa,na)}function xt(sa){for(var Ja,Is=sa.concat(),xl=[],dh=Is.length;dh--;)typeof(Ja=Is.shift())=="string"?xl.push(Ja):Array.isArray(sa)&&(Ja.length===1||Ja[1]===void 0&&Ja[2]===void 0)?xl.push(Ja[0]):xl.push([Ja[0],Ja[1],Ja[2]]);return xl}function mr(sa,Ja){var Is;if(typeof sa=="string")Is=Ja(sa)[0];else if(Array.isArray(sa)){for(var xl,dh,oA=sa.concat(),zh=[],KA=oA.length;KA--;)typeof(xl=oA.shift())=="string"?zh.push(Ja(xl)[0]):Array.isArray(xl)&&typeof xl[0]=="string"&&(dh=Ja(xl[0],xl[1],xl[2]),zh.push([dh[0],dh[1],dh[2]]));Is=zh}return Is}var Kt=!1,Dn=!0;if(typeof ue=="string")Kt=!0;else if(Array.isArray(ue)){var Ft=ue.concat();Zr=[];for(var gr,qi=Ft.length;qi--;)(typeof(gr=Ft.shift())!="string"||Array.isArray(gr)&&typeof gr[0]!="string")&&(Dn=!1);Kt=Dn}if(Kt===!1)throw new Error('Type of text must be string or Array. "'+ue+'" is not recognized.');typeof ue=="string"&&(ue=ue.match(/[\r?\n]/)?ue.split(/\r\n|\r|\n/g):[ue]);var Nn=nn/Na.internal.scaleFactor,en=Nn*(J-1);switch(Lt.baseline){case"bottom":yt-=en;break;case"top":yt+=Nn-en;break;case"hanging":yt+=Nn-2*en;break;case"middle":yt+=Nn/2-en}if((as=Lt.maxWidth||0)>0&&(typeof ue=="string"?ue=Na.splitTextToSize(ue,as):Object.prototype.toString.call(ue)==="[object Array]"&&(ue=ue.reduce(function(sa,Ja){return sa.concat(Na.splitTextToSize(Ja,as))},[]))),$r={text:ue,x:Fe,y:yt,options:Lt,mutex:{pdfEscape:gl,activeFontKey:Un,fonts:Zi,activeFontSize:nn}},ls.publish("preProcessText",$r),ue=$r.text,ti=(Lt=$r.options).angle,Oo instanceof bi==0&&ti&&typeof ti=="number"){ti*=Math.PI/180,Lt.rotationDirection===0&&(ti=-ti),It===qt&&(ti=-ti);var Pr=Math.cos(ti),Fa=Math.sin(ti);Oo=new bi(Pr,Fa,-Fa,Pr,0,0)}else ti&&ti instanceof bi&&(Oo=ti);It!==qt||Oo||(Oo=Xa),(Yi=Lt.charSpace||Yl)!==void 0&&(Pe+=ir(Ot(Yi))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Ma=Lt.horizontalScale)!==void 0&&(Pe+=ir(100*Ma)+` Tz
`),Lt.lang;var Wi=-1,Ni=Lt.renderingMode!==void 0?Lt.renderingMode:Lt.stroke,Vi=Na.internal.getCurrentPageInfo().pageContext;switch(Ni){case 0:case!1:case"fill":Wi=0;break;case 1:case!0:case"stroke":Wi=1;break;case 2:case"fillThenStroke":Wi=2;break;case 3:case"invisible":Wi=3;break;case 4:case"fillAndAddForClipping":Wi=4;break;case 5:case"strokeAndAddPathForClipping":Wi=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Wi=6;break;case 7:case"addToPathForClipping":Wi=7}var ys=Vi.usedRenderingMode!==void 0?Vi.usedRenderingMode:-1;Wi!==-1?Pe+=Wi+` Tr
`:ys!==-1&&(Pe+=`0 Tr
`),Wi!==-1&&(Vi.usedRenderingMode=Wi),ri=Lt.align||"left";var bn,xs=nn*J,Ua=Na.internal.pageSize.getWidth(),Si=Zi[Un];Yi=Lt.charSpace||Yl,as=Lt.maxWidth||0,na=Object.assign({autoencode:!0,noBOM:!0},Lt.flags);var ia=[],ks=function(sa){return Na.getStringUnitWidth(sa,{font:Si,charSpace:Yi,fontSize:nn,doKerning:!1})*nn/Ye};if(Object.prototype.toString.call(ue)==="[object Array]"){var ni;Zr=xt(ue),ri!=="left"&&(bn=Zr.map(ks));var $i,rc=0;if(ri==="right"){Fe-=bn[0],ue=[],qi=Zr.length;for(var qu=0;qu<qi;qu++)qu===0?($i=Wl(Fe),ni=_u(yt)):($i=Ot(rc-bn[qu]),ni=-xs),ue.push([Zr[qu],$i,ni]),rc=bn[qu]}else if(ri==="center"){Fe-=bn[0]/2,ue=[],qi=Zr.length;for(var ou=0;ou<qi;ou++)ou===0?($i=Wl(Fe),ni=_u(yt)):($i=Ot((rc-bn[ou])/2),ni=-xs),ue.push([Zr[ou],$i,ni]),rc=bn[ou]}else if(ri==="left"){ue=[],qi=Zr.length;for(var yl=0;yl<qi;yl++)ue.push(Zr[yl])}else if(ri==="justify"&&Si.encoding==="Identity-H"){ue=[],qi=Zr.length,as=as!==0?as:Ua;for(var nc=0,ao=0;ao<qi;ao++)if(ni=ao===0?_u(yt):-xs,$i=ao===0?Wl(Fe):nc,ao<qi-1){var zA=Ot((as-bn[ao])/(Zr[ao].split(" ").length-1)),uh=Zr[ao].split(" ");ue.push([uh[0]+" ",$i,ni]),nc=0;for(var Gc=1;Gc<uh.length;Gc++){var Wc=(ks(uh[Gc-1]+" "+uh[Gc])-ks(uh[Gc]))*Ye+zA;Gc==uh.length-1?ue.push([uh[Gc],Wc,0]):ue.push([uh[Gc]+" ",Wc,0]),nc-=Wc}}else ue.push([Zr[ao],$i,ni]);ue.push(["",nc,0])}else{if(ri!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(ue=[],qi=Zr.length,as=as!==0?as:Ua,ao=0;ao<qi;ao++){ni=ao===0?_u(yt):-xs,$i=ao===0?Wl(Fe):0;var Ro=Zr[ao].split(" ").length-1,Tf=Ro>0?(as-bn[ao])/Ro:0;ao<qi-1?ia.push(ir(Ot(Tf))):ia.push(0),ue.push([Zr[ao],$i,ni])}}}(typeof Lt.R2L=="boolean"?Lt.R2L:Hn)===!0&&(ue=mr(ue,function(sa,Ja,Is){return[sa.split("").reverse().join(""),Ja,Is]})),$r={text:ue,x:Fe,y:yt,options:Lt,mutex:{pdfEscape:gl,activeFontKey:Un,fonts:Zi,activeFontSize:nn}},ls.publish("postProcessText",$r),ue=$r.text,O=$r.mutex.isHex||!1;var Sd=Zi[Un].encoding;Sd!=="WinAnsiEncoding"&&Sd!=="StandardEncoding"||(ue=mr(ue,function(sa,Ja,Is){return[bt(sa),Ja,Is]})),Zr=xt(ue),ue=[];for(var Ji,fa,xo,Th=Array.isArray(Zr[0])?1:0,Xu="",Td=function(sa,Ja,Is){var xl="";return Is instanceof bi?(Is=typeof Lt.angle=="number"?Ra(Is,new bi(1,0,0,1,sa,Ja)):Ra(new bi(1,0,0,1,sa,Ja),Is),It===qt&&(Is=Ra(new bi(1,0,0,-1,0,0),Is)),xl=Is.join(" ")+` Tm
`):xl=ir(sa)+" "+ir(Ja)+` Td
`,xl},_c=0;_c<Zr.length;_c++){switch(Xu="",Th){case 1:xo=(O?"<":"(")+Zr[_c][0]+(O?">":")"),Ji=parseFloat(Zr[_c][1]),fa=parseFloat(Zr[_c][2]);break;case 0:xo=(O?"<":"(")+Zr[_c]+(O?">":")"),Ji=Wl(Fe),fa=_u(yt)}ia!==void 0&&ia[_c]!==void 0&&(Xu=ia[_c]+` Tw
`),_c===0?ue.push(Xu+Td(Ji,fa,Oo)+xo):Th===0?ue.push(Xu+xo):Th===1&&ue.push(Xu+Td(Ji,fa,Oo)+xo)}ue=Th===0?ue.join(` Tj
T* `):ue.join(` Tj
`),ue+=` Tj
`;var Zu=`BT
/`;return Zu+=Un+" "+nn+` Tf
`,Zu+=ir(nn*J)+` TL
`,Zu+=wc+`
`,Zu+=Pe,Zu+=ue,pt(Zu+="ET"),lt[Un]=!0,Na};var H=Te.__private__.clip=Te.clip=function(ue){return pt(ue==="evenodd"?"W*":"W"),this};Te.clipEvenOdd=function(){return H("evenodd")},Te.__private__.discardPath=Te.discardPath=function(){return pt("n"),this};var oe=Te.__private__.isValidStyle=function(ue){var Fe=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(ue)!==-1&&(Fe=!0),Fe};Te.__private__.setDefaultPathOperation=Te.setDefaultPathOperation=function(ue){return oe(ue)&&(Ie=ue),this};var Ee=Te.__private__.getStyle=Te.getStyle=function(ue){var Fe=Ie;switch(ue){case"D":case"S":Fe="S";break;case"F":Fe="f";break;case"FD":case"DF":Fe="B";break;case"f":case"f*":case"B":case"B*":Fe=ue}return Fe},Ve=Te.close=function(){return pt("h"),this};Te.stroke=function(){return pt("S"),this},Te.fill=function(ue){return jt("f",ue),this},Te.fillEvenOdd=function(ue){return jt("f*",ue),this},Te.fillStroke=function(ue){return jt("B",ue),this},Te.fillStrokeEvenOdd=function(ue){return jt("B*",ue),this};var jt=function(ue,Fe){(0,d.default)(Fe)==="object"?Vr(Fe,ue):pt(ue)},Jt=function(ue){ue===null||It===qt&&ue===void 0||(ue=Ee(ue),pt(ue))};function br(ue,Fe,yt,Lt,er){var $r=new nt(Fe||this.boundingBox,yt||this.xStep,Lt||this.yStep,this.gState,er||this.matrix);$r.stream=this.stream;var Zr=ue+"$$"+this.cloneIndex+++"$$";return Ul(Zr,$r),$r}var Vr=function(ue,Fe){var yt=Ys[ue.key],Lt=xi[yt];if(Lt instanceof Be)pt("q"),pt(vn(Fe)),Lt.gState&&Te.setGState(Lt.gState),pt(ue.matrix.toString()+" cm"),pt("/"+yt+" sh"),pt("Q");else if(Lt instanceof nt){var er=new bi(1,0,0,-1,0,ch());ue.matrix&&(er=er.multiply(ue.matrix||Xa),yt=br.call(Lt,ue.key,ue.boundingBox,ue.xStep,ue.yStep,er).id),pt("q"),pt("/Pattern cs"),pt("/"+yt+" scn"),Lt.gState&&Te.setGState(Lt.gState),pt(Fe),pt("Q")}},vn=function(ue){switch(ue){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},ui=Te.moveTo=function(ue,Fe){return pt(ir(Ot(ue))+" "+ir(Rt(Fe))+" m"),this},As=Te.lineTo=function(ue,Fe){return pt(ir(Ot(ue))+" "+ir(Rt(Fe))+" l"),this},Da=Te.curveTo=function(ue,Fe,yt,Lt,er,$r){return pt([ir(Ot(ue)),ir(Rt(Fe)),ir(Ot(yt)),ir(Rt(Lt)),ir(Ot(er)),ir(Rt($r)),"c"].join(" ")),this};Te.__private__.line=Te.line=function(ue,Fe,yt,Lt,er){if(isNaN(ue)||isNaN(Fe)||isNaN(yt)||isNaN(Lt)||!oe(er))throw new Error("Invalid arguments passed to jsPDF.line");return It===Pt?this.lines([[yt-ue,Lt-Fe]],ue,Fe,[1,1],er||"S"):this.lines([[yt-ue,Lt-Fe]],ue,Fe,[1,1]).stroke()},Te.__private__.lines=Te.lines=function(ue,Fe,yt,Lt,er,$r){var Zr,ti,ri,Yi,as,na,Ma,Oo,Na,Wo,O,Pe;if(typeof ue=="number"&&(Pe=yt,yt=Fe,Fe=ue,ue=Pe),Lt=Lt||[1,1],$r=$r||!1,isNaN(Fe)||isNaN(yt)||!Array.isArray(ue)||!Array.isArray(Lt)||!oe(er)||typeof $r!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(ui(Fe,yt),Zr=Lt[0],ti=Lt[1],Yi=ue.length,Wo=Fe,O=yt,ri=0;ri<Yi;ri++)(as=ue[ri]).length===2?(Wo=as[0]*Zr+Wo,O=as[1]*ti+O,As(Wo,O)):(na=as[0]*Zr+Wo,Ma=as[1]*ti+O,Oo=as[2]*Zr+Wo,Na=as[3]*ti+O,Wo=as[4]*Zr+Wo,O=as[5]*ti+O,Da(na,Ma,Oo,Na,Wo,O));return $r&&Ve(),Jt(er),this},Te.path=function(ue){for(var Fe=0;Fe<ue.length;Fe++){var yt=ue[Fe],Lt=yt.c;switch(yt.op){case"m":ui(Lt[0],Lt[1]);break;case"l":As(Lt[0],Lt[1]);break;case"c":Da.apply(this,Lt);break;case"h":Ve()}}return this},Te.__private__.rect=Te.rect=function(ue,Fe,yt,Lt,er){if(isNaN(ue)||isNaN(Fe)||isNaN(yt)||isNaN(Lt)||!oe(er))throw new Error("Invalid arguments passed to jsPDF.rect");return It===Pt&&(Lt=-Lt),pt([ir(Ot(ue)),ir(Rt(Fe)),ir(Ot(yt)),ir(Ot(Lt)),"re"].join(" ")),Jt(er),this},Te.__private__.triangle=Te.triangle=function(ue,Fe,yt,Lt,er,$r,Zr){if(isNaN(ue)||isNaN(Fe)||isNaN(yt)||isNaN(Lt)||isNaN(er)||isNaN($r)||!oe(Zr))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[yt-ue,Lt-Fe],[er-yt,$r-Lt],[ue-er,Fe-$r]],ue,Fe,[1,1],Zr,!0),this},Te.__private__.roundedRect=Te.roundedRect=function(ue,Fe,yt,Lt,er,$r,Zr){if(isNaN(ue)||isNaN(Fe)||isNaN(yt)||isNaN(Lt)||isNaN(er)||isNaN($r)||!oe(Zr))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var ti=4/3*(Math.SQRT2-1);return er=Math.min(er,.5*yt),$r=Math.min($r,.5*Lt),this.lines([[yt-2*er,0],[er*ti,0,er,$r-$r*ti,er,$r],[0,Lt-2*$r],[0,$r*ti,-er*ti,$r,-er,$r],[2*er-yt,0],[-er*ti,0,-er,-$r*ti,-er,-$r],[0,2*$r-Lt],[0,-$r*ti,er*ti,-$r,er,-$r]],ue+er,Fe,[1,1],Zr,!0),this},Te.__private__.ellipse=Te.ellipse=function(ue,Fe,yt,Lt,er){if(isNaN(ue)||isNaN(Fe)||isNaN(yt)||isNaN(Lt)||!oe(er))throw new Error("Invalid arguments passed to jsPDF.ellipse");var $r=4/3*(Math.SQRT2-1)*yt,Zr=4/3*(Math.SQRT2-1)*Lt;return ui(ue+yt,Fe),Da(ue+yt,Fe-Zr,ue+$r,Fe-Lt,ue,Fe-Lt),Da(ue-$r,Fe-Lt,ue-yt,Fe-Zr,ue-yt,Fe),Da(ue-yt,Fe+Zr,ue-$r,Fe+Lt,ue,Fe+Lt),Da(ue+$r,Fe+Lt,ue+yt,Fe+Zr,ue+yt,Fe),Jt(er),this},Te.__private__.circle=Te.circle=function(ue,Fe,yt,Lt){if(isNaN(ue)||isNaN(Fe)||isNaN(yt)||!oe(Lt))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(ue,Fe,yt,yt,Lt)},Te.setFont=function(ue,Fe,yt){return yt&&(Fe=Sr(Fe,yt)),Un=bd(ue,Fe,{disableWarning:!1}),this};var jo=Te.__private__.getFont=Te.getFont=function(){return Zi[bd.apply(Te,arguments)]};Te.__private__.getFontList=Te.getFontList=function(){var ue,Fe,yt={};for(ue in vs)if(vs.hasOwnProperty(ue))for(Fe in yt[ue]=[],vs[ue])vs[ue].hasOwnProperty(Fe)&&yt[ue].push(Fe);return yt},Te.addFont=function(ue,Fe,yt,Lt,er){var $r=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&$r.indexOf(arguments[3])!==-1?er=arguments[3]:arguments[3]&&$r.indexOf(arguments[3])==-1&&(yt=Sr(yt,Lt)),Lo.call(this,ue,Fe,yt,er=er||"Identity-H")};var il,Zs=P.lineWidth||.200025,la=Te.__private__.getLineWidth=Te.getLineWidth=function(){return Zs},jn=Te.__private__.setLineWidth=Te.setLineWidth=function(ue){return Zs=ue,pt(ir(Ot(ue))+" w"),this};Te.__private__.setLineDash=Ge.API.setLineDash=Ge.API.setLineDashPattern=function(ue,Fe){if(ue=ue||[],Fe=Fe||0,isNaN(Fe)||!Array.isArray(ue))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return ue=ue.map(function(yt){return ir(Ot(yt))}).join(" "),Fe=ir(Ot(Fe)),pt("["+ue+"] "+Fe+" d"),this};var Yu=Te.__private__.getLineHeight=Te.getLineHeight=function(){return nn*il};Te.__private__.getLineHeight=Te.getLineHeight=function(){return nn*il};var bc=Te.__private__.setLineHeightFactor=Te.setLineHeightFactor=function(ue){return typeof(ue=ue||1.15)=="number"&&(il=ue),this},wd=Te.__private__.getLineHeightFactor=Te.getLineHeightFactor=function(){return il};bc(P.lineHeight);var Wl=Te.__private__.getHorizontalCoordinate=function(ue){return Ot(ue)},_u=Te.__private__.getVerticalCoordinate=function(ue){return It===qt?ue:xn[St].mediaBox.topRightY-xn[St].mediaBox.bottomLeftY-Ot(ue)},so=Te.__private__.getHorizontalCoordinateString=Te.getHorizontalCoordinateString=function(ue){return ir(Wl(ue))},Su=Te.__private__.getVerticalCoordinateString=Te.getVerticalCoordinateString=function(ue){return ir(_u(ue))},Go=P.strokeColor||"0 G";Te.__private__.getStrokeColor=Te.getDrawColor=function(){return Ka(Go)},Te.__private__.setStrokeColor=Te.setDrawColor=function(ue,Fe,yt,Lt){return Go=Hl({ch1:ue,ch2:Fe,ch3:yt,ch4:Lt,pdfColorType:"draw",precision:2}),pt(Go),this};var Ed=P.fillColor||"0 g";Te.__private__.getFillColor=Te.getFillColor=function(){return Ka(Ed)},Te.__private__.setFillColor=Te.setFillColor=function(ue,Fe,yt,Lt){return Ed=Hl({ch1:ue,ch2:Fe,ch3:yt,ch4:Lt,pdfColorType:"fill",precision:2}),pt(Ed),this};var wc=P.textColor||"0 g",Qd=Te.__private__.getTextColor=Te.getTextColor=function(){return Ka(wc)};Te.__private__.setTextColor=Te.setTextColor=function(ue,Fe,yt,Lt){return wc=Hl({ch1:ue,ch2:Fe,ch3:yt,ch4:Lt,pdfColorType:"text",precision:3}),this};var Yl=P.charSpace,Tu=Te.__private__.getCharSpace=Te.getCharSpace=function(){return parseFloat(Yl||0)};Te.__private__.setCharSpace=Te.setCharSpace=function(ue){if(isNaN(ue))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Yl=ue,this};var Ec=0;Te.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},Te.__private__.setLineCap=Te.setLineCap=function(ue){var Fe=Te.CapJoinStyles[ue];if(Fe===void 0)throw new Error("Line cap style of '"+ue+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ec=Fe,pt(Fe+" J"),this};var zc=0;Te.__private__.setLineJoin=Te.setLineJoin=function(ue){var Fe=Te.CapJoinStyles[ue];if(Fe===void 0)throw new Error("Line join style of '"+ue+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return zc=Fe,pt(Fe+" j"),this},Te.__private__.setLineMiterLimit=Te.__private__.setMiterLimit=Te.setLineMiterLimit=Te.setMiterLimit=function(ue){if(ue=ue||0,isNaN(ue))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return pt(ir(Ot(ue))+" M"),this},Te.GState=it,Te.setGState=function(ue){(ue=typeof ue=="string"?Qi[ai[ue]]:Eh(null,ue)).equals(da)||(pt("/"+ue.id+" gs"),da=ue)};var Eh=function(ue,Fe){if(!ue||!ai[ue]){var yt=!1;for(var Lt in Qi)if(Qi.hasOwnProperty(Lt)&&Qi[Lt].equals(Fe)){yt=!0;break}if(yt)Fe=Qi[Lt];else{var er="GS"+(Object.keys(Qi).length+1).toString(10);Qi[er]=Fe,Fe.id=er}return ue&&(ai[ue]=Fe.id),ls.publish("addGState",Fe),Fe}};Te.addGState=function(ue,Fe){return Eh(ue,Fe),this},Te.saveGraphicsState=function(){return pt("q"),ja.push({key:Un,size:nn,color:wc}),this},Te.restoreGraphicsState=function(){pt("Q");var ue=ja.pop();return Un=ue.key,nn=ue.size,wc=ue.color,da=null,this},Te.setCurrentTransformationMatrix=function(ue){return pt(ue.toString()+" cm"),this},Te.comment=function(ue){return pt("#"+ue),this};var au=function(ue,Fe){var yt=ue||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return yt},set:function($r){isNaN($r)||(yt=parseFloat($r))}});var Lt=Fe||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Lt},set:function($r){isNaN($r)||(Lt=parseFloat($r))}});var er="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return er},set:function($r){er=$r.toString()}}),this},_d=function(ue,Fe,yt,Lt){au.call(this,ue,Fe),this.type="rect";var er=yt||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return er},set:function(Zr){isNaN(Zr)||(er=parseFloat(Zr))}});var $r=Lt||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return $r},set:function(Zr){isNaN(Zr)||($r=parseFloat(Zr))}}),this},ah=function(){this.page=Ii,this.currentPage=St,this.pages=un.slice(0),this.pagesContext=xn.slice(0),this.x=Wn,this.y=Gi,this.matrix=is,this.width=_h(St),this.height=VA(St),this.outputDestination=Rn,this.id="",this.objectNumber=-1};ah.prototype.restore=function(){Ii=this.page,St=this.currentPage,xn=this.pagesContext,un=this.pages,Wn=this.x,Gi=this.y,is=this.matrix,aA(St,this.width),oh(St,this.height),Rn=this.outputDestination};var Kc=function(ue,Fe,yt,Lt,er){Jl.push(new ah),Ii=St=0,un=[],Wn=ue,Gi=Fe,is=er,iu([yt,Lt])};for(var yo in Te.beginFormObject=function(ue,Fe,yt,Lt,er){return Kc(ue,Fe,yt,Lt,er),this},Te.endFormObject=function(ue){return(function(Fe){if(Ko[Fe])Jl.pop().restore();else{var yt=new ah,Lt="Xo"+(Object.keys(io).length+1).toString(10);yt.id=Lt,Ko[Fe]=Lt,io[Lt]=yt,ls.publish("addFormObject",yt),Jl.pop().restore()}})(ue),this},Te.doFormObject=function(ue,Fe){var yt=io[Ko[ue]];return pt("q"),pt(Fe.toString()+" cm"),pt("/"+yt.id+" Do"),pt("Q"),this},Te.getFormObject=function(ue){var Fe=io[Ko[ue]];return{x:Fe.x,y:Fe.y,width:Fe.width,height:Fe.height,matrix:Fe.matrix}},Te.save=function(ue,Fe){return ue=ue||"generated.pdf",(Fe=Fe||{}).returnPromise=Fe.returnPromise||!1,Fe.returnPromise===!1?(C(Vc(Qc()),ue),typeof C.unload=="function"&&g.setTimeout&&setTimeout(C.unload,911),this):new Promise(function(yt,Lt){try{var er=C(Vc(Qc()),ue);typeof C.unload=="function"&&g.setTimeout&&setTimeout(C.unload,911),yt(er)}catch($r){Lt($r.message)}})},Ge.API)Ge.API.hasOwnProperty(yo)&&(yo==="events"&&Ge.API.events.length?(function(ue,Fe){var yt,Lt,er;for(er=Fe.length-1;er!==-1;er--)yt=Fe[er][0],Lt=Fe[er][1],ue.subscribe.apply(ue,[yt].concat(typeof Lt=="function"?[Lt]:Lt))})(ls,Ge.API.events):Te[yo]=Ge.API[yo]);function _h(ue){return xn[ue].mediaBox.topRightX-xn[ue].mediaBox.bottomLeftX}function aA(ue,Fe){xn[ue].mediaBox.topRightX=Fe+xn[ue].mediaBox.bottomLeftX}function VA(ue){return xn[ue].mediaBox.topRightY-xn[ue].mediaBox.bottomLeftY}function oh(ue,Fe){xn[ue].mediaBox.topRightY=Fe+xn[ue].mediaBox.bottomLeftY}var lh=Te.getPageWidth=function(ue){return _h(ue=ue||St)/ki},Po=Te.setPageWidth=function(ue,Fe){aA(ue,Fe*ki)},ch=Te.getPageHeight=function(ue){return VA(ue=ue||St)/ki},Sh=Te.setPageHeight=function(ue,Fe){oh(ue,Fe*ki)};return Te.internal={pdfEscape:gl,getStyle:Ee,getFont:jo,getFontSize:Fn,getCharSpace:Tu,getTextColor:Qd,getLineHeight:Yu,getLineHeightFactor:wd,getLineWidth:la,write:Sn,getHorizontalCoordinate:Wl,getVerticalCoordinate:_u,getCoordinateString:so,getVerticalCoordinateString:Su,collections:{},newObject:ha,newAdditionalObject:Hc,newObjectDeferred:vo,newObjectDeferredBegin:Za,getFilters:Ql,putStream:Il,events:ls,scaleFactor:ki,pageSize:{getWidth:function(){return lh(St)},setWidth:function(ue){Po(St,ue)},getHeight:function(){return ch(St)},setHeight:function(ue){Sh(St,ue)}},encryptionOptions:Qe,encryption:Bo,getEncryptor:function(ue){return Qe!==null?Bo.encryptor(ue,0):function(Fe){return Fe}},output:Wu,getNumberOfPages:Gu,get pages(){return un},out:pt,f2:st,f3:mt,getPageInfo:su,getPageInfoByObjId:v,getCurrentPageInfo:_,getPDFVersion:at,Point:au,Rectangle:_d,Matrix:bi,hasHotfix:xc},Object.defineProperty(Te.internal.pageSize,"width",{get:function(){return lh(St)},set:function(ue){Po(St,ue)},enumerable:!0,configurable:!0}),Object.defineProperty(Te.internal.pageSize,"height",{get:function(){return ch(St)},set:function(ue){Sh(St,ue)},enumerable:!0,configurable:!0}),(function(ue){for(var Fe=0,yt=Tn.length;Fe<yt;Fe++){var Lt=Lo.call(this,ue[Fe][0],ue[Fe][1],ue[Fe][2],Tn[Fe][3],!0);qe===!1&&(lt[Lt]=!0);var er=ue[Fe][0].split("-");Gl({id:Lt,fontName:er[0],fontStyle:er[1]||""})}ls.publish("addFonts",{fonts:Zi,dictionary:vs})}).call(Te,Tn),Un="F1",vc(X,D),ls.publish("initialized"),Te}je.prototype.lsbFirstWord=function(P){return String.fromCharCode(255&P,P>>8&255,P>>16&255,P>>24&255)},je.prototype.toHexString=function(P){return P.split("").map(function(k){return("0"+(255&k.charCodeAt(0)).toString(16)).slice(-2)}).join("")},je.prototype.hexToBytes=function(P){for(var k=[],D=0;D<P.length;D+=2)k.push(String.fromCharCode(parseInt(P.substr(D,2),16)));return k.join("")},je.prototype.processOwnerPassword=function(P,k){return de(De(k).substr(0,5),P)},je.prototype.encryptor=function(P,k){var D=De(this.encryptionKey+String.fromCharCode(255&P,P>>8&255,P>>16&255,255&k,k>>8&255)).substr(0,10);return function(G){return de(D,G)}},it.prototype.equals=function(P){var k,D="id,objectNumber,equals";if(!P||(0,d.default)(P)!==(0,d.default)(this))return!1;var G=0;for(k in this)if(!(D.indexOf(k)>=0)){if(this.hasOwnProperty(k)&&!P.hasOwnProperty(k)||this[k]!==P[k])return!1;G++}for(k in P)P.hasOwnProperty(k)&&D.indexOf(k)<0&&G--;return G===0},Ge.API={events:[]},Ge.version="4.0.0";var ft=Ge.API,Dt=1,rt=function(P){return P.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},kt=function(P){return P.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},_t=function(P){return P.toFixed(2)},wt=function(P){return P.toFixed(5)};ft.__acroform__={};var Tt=function(P,k){P.prototype=Object.create(k.prototype),P.prototype.constructor=P},Er=function(P){return P*Dt},pr=function(P){var k=new Yr,D=sn.internal.getHeight(P)||0,G=sn.internal.getWidth(P)||0;return k.BBox=[0,0,Number(_t(G)),Number(_t(D))],k},Xr=ft.__acroform__.setBit=function(P,k){if(P=P||0,k=k||0,isNaN(P)||isNaN(k))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return P|1<<k},yn=ft.__acroform__.clearBit=function(P,k){if(P=P||0,k=k||0,isNaN(P)||isNaN(k))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return P&~(1<<k)},Mn=ft.__acroform__.getBit=function(P,k){if(isNaN(P)||isNaN(k))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return P&1<<k?1:0},dn=ft.__acroform__.getBitForPdf=function(P,k){if(isNaN(P)||isNaN(k))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Mn(P,k-1)},pn=ft.__acroform__.setBitForPdf=function(P,k){if(isNaN(P)||isNaN(k))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Xr(P,k-1)},mn=ft.__acroform__.clearBitForPdf=function(P,k){if(isNaN(P)||isNaN(k))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return yn(P,k-1)},Kn=ft.__acroform__.calculateCoordinates=function(P,k){var D=k.internal.getHorizontalCoordinate,G=k.internal.getVerticalCoordinate,X=P[0],ee=P[1],ye=P[2],he=P[3],me={};return me.lowerLeft_X=D(X)||0,me.lowerLeft_Y=G(ee+he)||0,me.upperRight_X=D(X+ye)||0,me.upperRight_Y=G(ee)||0,[Number(_t(me.lowerLeft_X)),Number(_t(me.lowerLeft_Y)),Number(_t(me.upperRight_X)),Number(_t(me.upperRight_Y))]},Zn=function(P){if(P.appearanceStreamContent)return P.appearanceStreamContent;if(P.V||P.DV){var k=[],D=P._V||P.DV,G=Li(P,D),X=P.scope.internal.getFont(P.fontName,P.fontStyle).id;k.push("/Tx BMC"),k.push("q"),k.push("BT"),k.push(P.scope.__private__.encodeColorString(P.color)),k.push("/"+X+" "+_t(G.fontSize)+" Tf"),k.push("1 0 0 1 0 0 Tm"),k.push(G.text),k.push("ET"),k.push("Q"),k.push("EMC");var ee=pr(P);return ee.scope=P.scope,ee.stream=k.join(`
`),ee}},Li=function(P,k){var D=P.fontSize===0?P.maxFontSize:P.fontSize,G={text:"",fontSize:""},X=(k=(k=k.substr(0,1)=="("?k.substr(1):k).substr(k.length-1)==")"?k.substr(0,k.length-1):k).split(" ");X=P.multiline?X.map(function(st){return st.split(`
`)}):X.map(function(st){return[st]});var ee=D,ye=sn.internal.getHeight(P)||0;ye=ye<0?-ye:ye;var he=sn.internal.getWidth(P)||0;he=he<0?-he:he;var me=function(st,mt,Ot){if(st+1<X.length){var Rt=mt+" "+X[st+1][0];return ot(Rt,P,Ot).width<=he-4}return!1};ee++;e:for(;ee>0;){k="",ee--;var Ie,Qe,qe=ot("3",P,ee).height,lt=P.multiline?ye-ee:(ye-qe)/2,Te=lt+=2,Et=0,at=0,Ct=0;if(ee<=0){k=`(...) Tj
`,k+="% Width of Text: "+ot(k,P,ee=12).width+", FieldWidth:"+he+`
`;break}for(var et="",Pt=0,qt=0;qt<X.length;qt++)if(X.hasOwnProperty(qt)){var It=!1;if(X[qt].length!==1&&Ct!==X[qt].length-1){if((qe+2)*(Pt+2)+2>ye)continue e;et+=X[qt][Ct],It=!0,at=qt,qt--}else{et=(et+=X[qt][Ct]+" ").substr(et.length-1)==" "?et.substr(0,et.length-1):et;var Je=parseInt(qt),zt=me(Je,et,ee),Sr=qt>=X.length-1;if(zt&&!Sr){et+=" ",Ct=0;continue}if(zt||Sr){if(Sr)at=Je;else if(P.multiline&&(qe+2)*(Pt+2)+2>ye)continue e}else{if(!P.multiline||(qe+2)*(Pt+2)+2>ye)continue e;at=Je}}for(var ir="",Mt=Et;Mt<=at;Mt++){var xr=X[Mt];if(P.multiline){if(Mt===at){ir+=xr[Ct]+" ",Ct=(Ct+1)%xr.length;continue}if(Mt===Et){ir+=xr[xr.length-1]+" ";continue}}ir+=xr[0]+" "}switch(ir=ir.substr(ir.length-1)==" "?ir.substr(0,ir.length-1):ir,Qe=ot(ir,P,ee).width,P.textAlign){case"right":Ie=he-Qe-2;break;case"center":Ie=(he-Qe)/2;break;default:Ie=2}k+=_t(Ie)+" "+_t(Te)+` Td
`,k+="("+rt(ir)+`) Tj
`,k+=-_t(Ie)+` 0 Td
`,Te=-(ee+2),Qe=0,Et=It?at:at+1,Pt++,et=""}break}return G.text=k,G.fontSize=ee,G},ot=function(P,k,D){var G=k.scope.internal.getFont(k.fontName,k.fontStyle),X=k.scope.getStringUnitWidth(P,{font:G,fontSize:parseFloat(D),charSpace:0})*parseFloat(D);return{height:k.scope.getStringUnitWidth("3",{font:G,fontSize:parseFloat(D),charSpace:0})*parseFloat(D)*1.5,width:X}},Yt={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},kr=function(P,k){var D={type:"reference",object:P};k.internal.getPageInfo(P.page).pageContext.annotations.find(function(G){return G.type===D.type&&G.object===D.object})===void 0&&k.internal.getPageInfo(P.page).pageContext.annotations.push(D)},nr=function(P,k){if(k.scope=P,P.internal!==void 0&&(P.internal.acroformPlugin===void 0||P.internal.acroformPlugin.isInitialized===!1)){if(ln.FieldNum=0,P.internal.acroformPlugin=JSON.parse(JSON.stringify(Yt)),P.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Dt=P.internal.scaleFactor,P.internal.acroformPlugin.acroFormDictionaryRoot=new Ln,P.internal.acroformPlugin.acroFormDictionaryRoot.scope=P,P.internal.acroformPlugin.acroFormDictionaryRoot._eventID=P.internal.events.subscribe("postPutResources",function(){(function(D){D.internal.events.unsubscribe(D.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete D.internal.acroformPlugin.acroFormDictionaryRoot._eventID,D.internal.acroformPlugin.printedOut=!0})(P)}),P.internal.events.subscribe("buildDocument",function(){(function(D){D.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var G=D.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var X in G)if(G.hasOwnProperty(X)){var ee=G[X];ee.objId=void 0,ee.hasAnnotation&&kr(ee,D)}})(P)}),P.internal.events.subscribe("putCatalog",function(){(function(D){if(D.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");D.internal.write("/AcroForm "+D.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(P)}),P.internal.events.subscribe("postPutPages",function(D){(function(G,X){var ee=!G;for(var ye in G||(X.internal.newObjectDeferredBegin(X.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),X.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),G=G||X.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(G.hasOwnProperty(ye)){var he=G[ye],me=[],Ie=he.Rect;if(he.Rect&&(he.Rect=Kn(he.Rect,X)),X.internal.newObjectDeferredBegin(he.objId,!0),he.DA=sn.createDefaultAppearanceStream(he),(0,d.default)(he)==="object"&&typeof he.getKeyValueListForStream=="function"&&(me=he.getKeyValueListForStream()),he.Rect=Ie,he.hasAppearanceStream&&!he.appearanceStreamContent){var Qe=Zn(he);me.push({key:"AP",value:"<</N "+Qe+">>"}),X.internal.acroformPlugin.xForms.push(Qe)}if(he.appearanceStreamContent){var qe="";for(var lt in he.appearanceStreamContent)if(he.appearanceStreamContent.hasOwnProperty(lt)){var Te=he.appearanceStreamContent[lt];if(qe+="/"+lt+" ",qe+="<<",Object.keys(Te).length>=1||Array.isArray(Te)){for(var ye in Te)if(Te.hasOwnProperty(ye)){var Et=Te[ye];typeof Et=="function"&&(Et=Et.call(X,he)),qe+="/"+ye+" "+Et+" ",X.internal.acroformPlugin.xForms.indexOf(Et)>=0||X.internal.acroformPlugin.xForms.push(Et)}}else typeof(Et=Te)=="function"&&(Et=Et.call(X,he)),qe+="/"+ye+" "+Et,X.internal.acroformPlugin.xForms.indexOf(Et)>=0||X.internal.acroformPlugin.xForms.push(Et);qe+=">>"}me.push({key:"AP",value:`<<
`+qe+">>"})}X.internal.putStream({additionalKeyValues:me,objectId:he.objId}),X.internal.out("endobj")}ee&&(function(at,Ct){for(var et in at)if(at.hasOwnProperty(et)){var Pt=et,qt=at[et];Ct.internal.newObjectDeferredBegin(qt.objId,!0),(0,d.default)(qt)==="object"&&typeof qt.putStream=="function"&&qt.putStream(),delete at[Pt]}})(X.internal.acroformPlugin.xForms,X)})(D,P)}),P.internal.acroformPlugin.isInitialized=!0}},Qt=ft.__acroform__.arrayToPdfArray=function(P,k,D){var G=function(ye){return ye};if(Array.isArray(P)){for(var X="[",ee=0;ee<P.length;ee++)switch(ee!==0&&(X+=" "),(0,d.default)(P[ee])){case"boolean":case"number":case"object":X+=P[ee].toString();break;case"string":P[ee].substr(0,1)!=="/"?(k!==void 0&&D&&(G=D.internal.getEncryptor(k)),X+="("+rt(G(P[ee].toString()))+")"):X+=P[ee].toString()}return X+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},fr=function(P,k,D){var G=function(X){return X};return k!==void 0&&D&&(G=D.internal.getEncryptor(k)),(P=P||"").toString(),"("+rt(G(P))+")"},zr=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(P){this._objId=P}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};zr.prototype.toString=function(){return this.objId+" 0 R"},zr.prototype.putStream=function(){var P=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:P,objectId:this.objId}),this.scope.internal.out("endobj")},zr.prototype.getKeyValueListForStream=function(){var P=[],k=Object.getOwnPropertyNames(this).filter(function(ee){return ee!="content"&&ee!="appearanceStreamContent"&&ee!="scope"&&ee!="objId"&&ee.substring(0,1)!="_"});for(var D in k)if(Object.getOwnPropertyDescriptor(this,k[D]).configurable===!1){var G=k[D],X=this[G];X&&(Array.isArray(X)?P.push({key:G,value:Qt(X,this.objId,this.scope)}):X instanceof zr?(X.scope=this.scope,P.push({key:G,value:X.objId+" 0 R"})):typeof X!="function"&&P.push({key:G,value:X}))}return P};var Yr=function(){zr.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var P,k=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return k},set:function(D){k=D}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(D){P=D.trim()},get:function(){return P||null}})};Tt(Yr,zr);var Ln=function(){zr.call(this);var P,k=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return k.length>0?k:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return k}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(P){var D=function(G){return G};return this.scope&&(D=this.scope.internal.getEncryptor(this.objId)),"("+rt(D(P))+")"}},set:function(D){P=D}})};Tt(Ln,zr);var ln=function P(){zr.call(this);var k=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return k},set:function(et){if(isNaN(et))throw new Error('Invalid value "'+et+'" for attribute F supplied.');k=et}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!dn(k,3)},set:function(et){et?this.F=pn(k,3):this.F=mn(k,3)}});var D=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return D},set:function(et){if(isNaN(et))throw new Error('Invalid value "'+et+'" for attribute Ff supplied.');D=et}});var G=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(G.length!==0)return G},set:function(et){G=et!==void 0?et:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!G||isNaN(G[0])?0:G[0]},set:function(et){G[0]=et}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!G||isNaN(G[1])?0:G[1]},set:function(et){G[1]=et}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!G||isNaN(G[2])?0:G[2]},set:function(et){G[2]=et}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!G||isNaN(G[3])?0:G[3]},set:function(et){G[3]=et}});var X="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return X},set:function(et){switch(et){case"/Btn":case"/Tx":case"/Ch":case"/Sig":X=et;break;default:throw new Error('Invalid value "'+et+'" for attribute FT supplied.')}}});var ee=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!ee||ee.length<1){if(this instanceof Cs)return;ee="FieldObject"+P.FieldNum++}var et=function(Pt){return Pt};return this.scope&&(et=this.scope.internal.getEncryptor(this.objId)),"("+rt(et(ee))+")"},set:function(et){ee=et.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return ee},set:function(et){ee=et}});var ye="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return ye},set:function(et){ye=et}});var he="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return he},set:function(et){he=et}});var me=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return me},set:function(et){me=et}});var Ie=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return Ie===void 0?50/Dt:Ie},set:function(et){Ie=et}});var Qe="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return Qe},set:function(et){Qe=et}});var qe="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!qe||this instanceof Cs||this instanceof js))return fr(qe,this.objId,this.scope)},set:function(et){et=et.toString(),qe=et}});var lt=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(lt)return this instanceof cn==0?fr(lt,this.objId,this.scope):lt},set:function(et){et=et.toString(),lt=this instanceof cn==0?et.substr(0,1)==="("?kt(et.substr(1,et.length-2)):kt(et):et}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof cn==1?kt(lt.substr(1,lt.length-1)):lt},set:function(et){et=et.toString(),lt=this instanceof cn==1?"/"+et:et}});var Te=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(Te)return Te},set:function(et){this.V=et}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(Te)return this instanceof cn==0?fr(Te,this.objId,this.scope):Te},set:function(et){et=et.toString(),Te=this instanceof cn==0?et.substr(0,1)==="("?kt(et.substr(1,et.length-2)):kt(et):et}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof cn==1?kt(Te.substr(1,Te.length-1)):Te},set:function(et){et=et.toString(),Te=this instanceof cn==1?"/"+et:et}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var Et,at=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return at},set:function(et){et=!!et,at=et}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(Et)return Et},set:function(et){Et=et}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,1)},set:function(et){et?this.Ff=pn(this.Ff,1):this.Ff=mn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,2)},set:function(et){et?this.Ff=pn(this.Ff,2):this.Ff=mn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,3)},set:function(et){et?this.Ff=pn(this.Ff,3):this.Ff=mn(this.Ff,3)}});var Ct=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(Ct!==null)return Ct},set:function(et){if([0,1,2].indexOf(et)===-1)throw new Error('Invalid value "'+et+'" for attribute Q supplied.');Ct=et}}),Object.defineProperty(this,"textAlign",{get:function(){var et;switch(Ct){case 0:default:et="left";break;case 1:et="center";break;case 2:et="right"}return et},configurable:!0,enumerable:!0,set:function(et){switch(et){case"right":case 2:Ct=2;break;case"center":case 1:Ct=1;break;default:Ct=0}}})};Tt(ln,zr);var Jn=function(){ln.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var P=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return P},set:function(D){P=D}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return P},set:function(D){P=D}});var k=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return Qt(k,this.objId,this.scope)},set:function(D){var G,X;X=[],typeof(G=D)=="string"&&(X=(function(ee,ye,he){he||(he=1);for(var me,Ie=[];me=ye.exec(ee);)Ie.push(me[he]);return Ie})(G,/\((.*?)\)/g)),k=X}}),this.getOptions=function(){return k},this.setOptions=function(D){k=D,this.sort&&k.sort()},this.addOption=function(D){D=(D=D||"").toString(),k.push(D),this.sort&&k.sort()},this.removeOption=function(D,G){for(G=G||!1,D=(D=D||"").toString();k.indexOf(D)!==-1&&(k.splice(k.indexOf(D),1),G!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,18)},set:function(D){D?this.Ff=pn(this.Ff,18):this.Ff=mn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,19)},set:function(D){this.combo===!0&&(D?this.Ff=pn(this.Ff,19):this.Ff=mn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,20)},set:function(D){D?(this.Ff=pn(this.Ff,20),k.sort()):this.Ff=mn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,22)},set:function(D){D?this.Ff=pn(this.Ff,22):this.Ff=mn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,23)},set:function(D){D?this.Ff=pn(this.Ff,23):this.Ff=mn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,27)},set:function(D){D?this.Ff=pn(this.Ff,27):this.Ff=mn(this.Ff,27)}}),this.hasAppearanceStream=!1};Tt(Jn,ln);var rn=function(){Jn.call(this),this.fontName="helvetica",this.combo=!1};Tt(rn,Jn);var Ur=function(){rn.call(this),this.combo=!0};Tt(Ur,rn);var An=function(){Ur.call(this),this.edit=!0};Tt(An,Ur);var cn=function(){ln.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,15)},set:function(D){D?this.Ff=pn(this.Ff,15):this.Ff=mn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,16)},set:function(D){D?this.Ff=pn(this.Ff,16):this.Ff=mn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,17)},set:function(D){D?this.Ff=pn(this.Ff,17):this.Ff=mn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,26)},set:function(D){D?this.Ff=pn(this.Ff,26):this.Ff=mn(this.Ff,26)}});var P,k={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var D=function(ee){return ee};if(this.scope&&(D=this.scope.internal.getEncryptor(this.objId)),Object.keys(k).length!==0){var G,X=[];for(G in X.push("<<"),k)X.push("/"+G+" ("+rt(D(k[G]))+")");return X.push(">>"),X.join(`
`)}},set:function(D){(0,d.default)(D)==="object"&&(k=D)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return k.CA||""},set:function(D){typeof D=="string"&&(k.CA=D)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return P},set:function(D){P=D}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return P.substr(1,P.length-1)},set:function(D){P="/"+D}})};Tt(cn,ln);var On=function(){cn.call(this),this.pushButton=!0};Tt(On,cn);var li=function(){cn.call(this),this.radio=!0,this.pushButton=!1;var P=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return P},set:function(k){P=k!==void 0?k:[]}})};Tt(li,cn);var Cs=function(){var P,k;ln.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return P},set:function(X){P=X}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return k},set:function(X){k=X}});var D,G={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var X=function(he){return he};this.scope&&(X=this.scope.internal.getEncryptor(this.objId));var ee,ye=[];for(ee in ye.push("<<"),G)ye.push("/"+ee+" ("+rt(X(G[ee]))+")");return ye.push(">>"),ye.join(`
`)},set:function(X){(0,d.default)(X)==="object"&&(G=X)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return G.CA||""},set:function(X){typeof X=="string"&&(G.CA=X)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return D},set:function(X){D=X}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return D.substr(1,D.length-1)},set:function(X){D="/"+X}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=sn.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Tt(Cs,ln),li.prototype.setAppearance=function(P){if(!("createAppearanceStream"in P)||!("getCA"in P))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var k in this.Kids)if(this.Kids.hasOwnProperty(k)){var D=this.Kids[k];D.appearanceStreamContent=P.createAppearanceStream(D.optionName),D.caption=P.getCA()}},li.prototype.createOption=function(P){var k=new Cs;return k.Parent=this,k.optionName=P,this.Kids.push(k),ss.call(this.scope,k),k};var Ds=function(){cn.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=sn.CheckBox.createAppearanceStream()};Tt(Ds,cn);var js=function(){ln.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,13)},set:function(k){k?this.Ff=pn(this.Ff,13):this.Ff=mn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,21)},set:function(k){k?this.Ff=pn(this.Ff,21):this.Ff=mn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,23)},set:function(k){k?this.Ff=pn(this.Ff,23):this.Ff=mn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,24)},set:function(k){k?this.Ff=pn(this.Ff,24):this.Ff=mn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,25)},set:function(k){k?this.Ff=pn(this.Ff,25):this.Ff=mn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,26)},set:function(k){k?this.Ff=pn(this.Ff,26):this.Ff=mn(this.Ff,26)}});var P=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return P},set:function(k){P=k}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return P},set:function(k){Number.isInteger(k)&&(P=k)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Tt(js,ln);var ei=function(){js.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,14)},set:function(P){P?this.Ff=pn(this.Ff,14):this.Ff=mn(this.Ff,14)}}),this.password=!0};Tt(ei,js);var sn={CheckBox:{createAppearanceStream:function(){return{N:{On:sn.CheckBox.YesNormal},D:{On:sn.CheckBox.YesPushDown,Off:sn.CheckBox.OffPushDown}}},YesPushDown:function(P){var k=pr(P);k.scope=P.scope;var D=[],G=P.scope.internal.getFont(P.fontName,P.fontStyle).id,X=P.scope.__private__.encodeColorString(P.color),ee=Li(P,P.caption);return D.push("0.749023 g"),D.push("0 0 "+_t(sn.internal.getWidth(P))+" "+_t(sn.internal.getHeight(P))+" re"),D.push("f"),D.push("BMC"),D.push("q"),D.push("0 0 1 rg"),D.push("/"+G+" "+_t(ee.fontSize)+" Tf "+X),D.push("BT"),D.push(ee.text),D.push("ET"),D.push("Q"),D.push("EMC"),k.stream=D.join(`
`),k},YesNormal:function(P){var k=pr(P);k.scope=P.scope;var D=P.scope.internal.getFont(P.fontName,P.fontStyle).id,G=P.scope.__private__.encodeColorString(P.color),X=[],ee=sn.internal.getHeight(P),ye=sn.internal.getWidth(P),he=Li(P,P.caption);return X.push("1 g"),X.push("0 0 "+_t(ye)+" "+_t(ee)+" re"),X.push("f"),X.push("q"),X.push("0 0 1 rg"),X.push("0 0 "+_t(ye-1)+" "+_t(ee-1)+" re"),X.push("W"),X.push("n"),X.push("0 g"),X.push("BT"),X.push("/"+D+" "+_t(he.fontSize)+" Tf "+G),X.push(he.text),X.push("ET"),X.push("Q"),k.stream=X.join(`
`),k},OffPushDown:function(P){var k=pr(P);k.scope=P.scope;var D=[];return D.push("0.749023 g"),D.push("0 0 "+_t(sn.internal.getWidth(P))+" "+_t(sn.internal.getHeight(P))+" re"),D.push("f"),k.stream=D.join(`
`),k}},RadioButton:{Circle:{createAppearanceStream:function(P){var k={D:{Off:sn.RadioButton.Circle.OffPushDown},N:{}};return k.N[P]=sn.RadioButton.Circle.YesNormal,k.D[P]=sn.RadioButton.Circle.YesPushDown,k},getCA:function(){return"l"},YesNormal:function(P){var k=pr(P);k.scope=P.scope;var D=[],G=sn.internal.getWidth(P)<=sn.internal.getHeight(P)?sn.internal.getWidth(P)/4:sn.internal.getHeight(P)/4;G=Number((.9*G).toFixed(5));var X=sn.internal.Bezier_C,ee=Number((G*X).toFixed(5));return D.push("q"),D.push("1 0 0 1 "+wt(sn.internal.getWidth(P)/2)+" "+wt(sn.internal.getHeight(P)/2)+" cm"),D.push(G+" 0 m"),D.push(G+" "+ee+" "+ee+" "+G+" 0 "+G+" c"),D.push("-"+ee+" "+G+" -"+G+" "+ee+" -"+G+" 0 c"),D.push("-"+G+" -"+ee+" -"+ee+" -"+G+" 0 -"+G+" c"),D.push(ee+" -"+G+" "+G+" -"+ee+" "+G+" 0 c"),D.push("f"),D.push("Q"),k.stream=D.join(`
`),k},YesPushDown:function(P){var k=pr(P);k.scope=P.scope;var D=[],G=sn.internal.getWidth(P)<=sn.internal.getHeight(P)?sn.internal.getWidth(P)/4:sn.internal.getHeight(P)/4;G=Number((.9*G).toFixed(5));var X=Number((2*G).toFixed(5)),ee=Number((X*sn.internal.Bezier_C).toFixed(5)),ye=Number((G*sn.internal.Bezier_C).toFixed(5));return D.push("0.749023 g"),D.push("q"),D.push("1 0 0 1 "+wt(sn.internal.getWidth(P)/2)+" "+wt(sn.internal.getHeight(P)/2)+" cm"),D.push(X+" 0 m"),D.push(X+" "+ee+" "+ee+" "+X+" 0 "+X+" c"),D.push("-"+ee+" "+X+" -"+X+" "+ee+" -"+X+" 0 c"),D.push("-"+X+" -"+ee+" -"+ee+" -"+X+" 0 -"+X+" c"),D.push(ee+" -"+X+" "+X+" -"+ee+" "+X+" 0 c"),D.push("f"),D.push("Q"),D.push("0 g"),D.push("q"),D.push("1 0 0 1 "+wt(sn.internal.getWidth(P)/2)+" "+wt(sn.internal.getHeight(P)/2)+" cm"),D.push(G+" 0 m"),D.push(G+" "+ye+" "+ye+" "+G+" 0 "+G+" c"),D.push("-"+ye+" "+G+" -"+G+" "+ye+" -"+G+" 0 c"),D.push("-"+G+" -"+ye+" -"+ye+" -"+G+" 0 -"+G+" c"),D.push(ye+" -"+G+" "+G+" -"+ye+" "+G+" 0 c"),D.push("f"),D.push("Q"),k.stream=D.join(`
`),k},OffPushDown:function(P){var k=pr(P);k.scope=P.scope;var D=[],G=sn.internal.getWidth(P)<=sn.internal.getHeight(P)?sn.internal.getWidth(P)/4:sn.internal.getHeight(P)/4;G=Number((.9*G).toFixed(5));var X=Number((2*G).toFixed(5)),ee=Number((X*sn.internal.Bezier_C).toFixed(5));return D.push("0.749023 g"),D.push("q"),D.push("1 0 0 1 "+wt(sn.internal.getWidth(P)/2)+" "+wt(sn.internal.getHeight(P)/2)+" cm"),D.push(X+" 0 m"),D.push(X+" "+ee+" "+ee+" "+X+" 0 "+X+" c"),D.push("-"+ee+" "+X+" -"+X+" "+ee+" -"+X+" 0 c"),D.push("-"+X+" -"+ee+" -"+ee+" -"+X+" 0 -"+X+" c"),D.push(ee+" -"+X+" "+X+" -"+ee+" "+X+" 0 c"),D.push("f"),D.push("Q"),k.stream=D.join(`
`),k}},Cross:{createAppearanceStream:function(P){var k={D:{Off:sn.RadioButton.Cross.OffPushDown},N:{}};return k.N[P]=sn.RadioButton.Cross.YesNormal,k.D[P]=sn.RadioButton.Cross.YesPushDown,k},getCA:function(){return"8"},YesNormal:function(P){var k=pr(P);k.scope=P.scope;var D=[],G=sn.internal.calculateCross(P);return D.push("q"),D.push("1 1 "+_t(sn.internal.getWidth(P)-2)+" "+_t(sn.internal.getHeight(P)-2)+" re"),D.push("W"),D.push("n"),D.push(_t(G.x1.x)+" "+_t(G.x1.y)+" m"),D.push(_t(G.x2.x)+" "+_t(G.x2.y)+" l"),D.push(_t(G.x4.x)+" "+_t(G.x4.y)+" m"),D.push(_t(G.x3.x)+" "+_t(G.x3.y)+" l"),D.push("s"),D.push("Q"),k.stream=D.join(`
`),k},YesPushDown:function(P){var k=pr(P);k.scope=P.scope;var D=sn.internal.calculateCross(P),G=[];return G.push("0.749023 g"),G.push("0 0 "+_t(sn.internal.getWidth(P))+" "+_t(sn.internal.getHeight(P))+" re"),G.push("f"),G.push("q"),G.push("1 1 "+_t(sn.internal.getWidth(P)-2)+" "+_t(sn.internal.getHeight(P)-2)+" re"),G.push("W"),G.push("n"),G.push(_t(D.x1.x)+" "+_t(D.x1.y)+" m"),G.push(_t(D.x2.x)+" "+_t(D.x2.y)+" l"),G.push(_t(D.x4.x)+" "+_t(D.x4.y)+" m"),G.push(_t(D.x3.x)+" "+_t(D.x3.y)+" l"),G.push("s"),G.push("Q"),k.stream=G.join(`
`),k},OffPushDown:function(P){var k=pr(P);k.scope=P.scope;var D=[];return D.push("0.749023 g"),D.push("0 0 "+_t(sn.internal.getWidth(P))+" "+_t(sn.internal.getHeight(P))+" re"),D.push("f"),k.stream=D.join(`
`),k}}},createDefaultAppearanceStream:function(P){var k=P.scope.internal.getFont(P.fontName,P.fontStyle).id,D=P.scope.__private__.encodeColorString(P.color);return"/"+k+" "+P.fontSize+" Tf "+D}};sn.internal={Bezier_C:.551915024494,calculateCross:function(P){var k=sn.internal.getWidth(P),D=sn.internal.getHeight(P),G=Math.min(k,D);return{x1:{x:(k-G)/2,y:(D-G)/2+G},x2:{x:(k-G)/2+G,y:(D-G)/2},x3:{x:(k-G)/2,y:(D-G)/2},x4:{x:(k-G)/2+G,y:(D-G)/2+G}}}},sn.internal.getWidth=function(P){var k=0;return(0,d.default)(P)==="object"&&(k=Er(P.Rect[2])),k},sn.internal.getHeight=function(P){var k=0;return(0,d.default)(P)==="object"&&(k=Er(P.Rect[3])),k};var ss=ft.addField=function(P){if(nr(this,P),!(P instanceof ln))throw new Error("Invalid argument passed to jsPDF.addField.");var k;return(k=P).scope.internal.acroformPlugin.printedOut&&(k.scope.internal.acroformPlugin.printedOut=!1,k.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),k.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(k),P.page=P.scope.internal.getCurrentPageInfo().pageNumber,this};ft.AcroFormChoiceField=Jn,ft.AcroFormListBox=rn,ft.AcroFormComboBox=Ur,ft.AcroFormEditBox=An,ft.AcroFormButton=cn,ft.AcroFormPushButton=On,ft.AcroFormRadioButton=li,ft.AcroFormCheckBox=Ds,ft.AcroFormTextField=js,ft.AcroFormPasswordField=ei,ft.AcroFormAppearance=sn,ft.AcroForm={ChoiceField:Jn,ListBox:rn,ComboBox:Ur,EditBox:An,Button:cn,PushButton:On,RadioButton:li,CheckBox:Ds,TextField:js,PasswordField:ei,Appearance:sn},Ge.AcroForm={ChoiceField:Jn,ListBox:rn,ComboBox:Ur,EditBox:An,Button:cn,PushButton:On,RadioButton:li,CheckBox:Ds,TextField:js,PasswordField:ei,Appearance:sn};var ta=Ge.AcroForm;function _n(P){return P.reduce(function(k,D,G){return k[D]=G,k},{})}(function(P){var k="addImage_";P.__addimage__={};var D="UNKNOWN",G={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},X=P.__addimage__.getImageFileTypeByImageData=function(st,mt){var Ot,Rt,Ar,jr,Br,ar=D;if((mt=mt||D)==="RGBA"||st.data!==void 0&&st.data instanceof Uint8ClampedArray&&"height"in st&&"width"in st)return"RGBA";if(zt(st))for(Br in G)for(Ar=G[Br],Ot=0;Ot<Ar.length;Ot+=1){for(jr=!0,Rt=0;Rt<Ar[Ot].length;Rt+=1)if(Ar[Ot][Rt]!==void 0&&Ar[Ot][Rt]!==st[Rt]){jr=!1;break}if(jr===!0){ar=Br;break}}else for(Br in G)for(Ar=G[Br],Ot=0;Ot<Ar.length;Ot+=1){for(jr=!0,Rt=0;Rt<Ar[Ot].length;Rt+=1)if(Ar[Ot][Rt]!==void 0&&Ar[Ot][Rt]!==st.charCodeAt(Rt)){jr=!1;break}if(jr===!0){ar=Br;break}}return ar===D&&mt!==D&&(ar=mt),ar},ee=function st(mt){for(var Ot=this.internal.write,Rt=this.internal.putStream,Ar=(0,this.internal.getFilters)();Ar.indexOf("FlateEncode")!==-1;)Ar.splice(Ar.indexOf("FlateEncode"),1);mt.objectId=this.internal.newObject();var jr=[];if(jr.push({key:"Type",value:"/XObject"}),jr.push({key:"Subtype",value:"/Image"}),jr.push({key:"Width",value:mt.width}),jr.push({key:"Height",value:mt.height}),mt.colorSpace===et.INDEXED?jr.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(mt.palette.length/3-1)+" "+("sMask"in mt&&mt.sMask!==void 0?mt.objectId+2:mt.objectId+1)+" 0 R]"}):(jr.push({key:"ColorSpace",value:"/"+mt.colorSpace}),mt.colorSpace===et.DEVICE_CMYK&&jr.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),jr.push({key:"BitsPerComponent",value:mt.bitsPerComponent}),"decodeParameters"in mt&&mt.decodeParameters!==void 0&&jr.push({key:"DecodeParms",value:"<<"+mt.decodeParameters+">>"}),"transparency"in mt&&Array.isArray(mt.transparency)&&mt.transparency.length>0){for(var Br="",ar=0,Lr=mt.transparency.length;ar<Lr;ar++)Br+=mt.transparency[ar]+" "+mt.transparency[ar]+" ";jr.push({key:"Mask",value:"["+Br+"]"})}mt.sMask!==void 0&&jr.push({key:"SMask",value:mt.objectId+1+" 0 R"});var hn=mt.filter!==void 0?["/"+mt.filter]:void 0;if(Rt({data:mt.data,additionalKeyValues:jr,alreadyAppliedFilters:hn,objectId:mt.objectId}),Ot("endobj"),"sMask"in mt&&mt.sMask!==void 0){var tn,We=(tn=mt.sMaskBitsPerComponent)!==null&&tn!==void 0?tn:mt.bitsPerComponent,St={width:mt.width,height:mt.height,colorSpace:"DeviceGray",bitsPerComponent:We,data:mt.sMask};"filter"in mt&&(St.decodeParameters="/Predictor ".concat(mt.predictor," /Colors 1 /BitsPerComponent ").concat(We," /Columns ").concat(mt.width),St.filter=mt.filter),st.call(this,St)}if(mt.colorSpace===et.INDEXED){var Nt=this.internal.newObject();Rt({data:ir(new Uint8Array(mt.palette)),objectId:Nt}),Ot("endobj")}},ye=function(){var st=this.internal.collections[k+"images"];for(var mt in st)ee.call(this,st[mt])},he=function(){var st,mt=this.internal.collections[k+"images"],Ot=this.internal.write;for(var Rt in mt)Ot("/I"+(st=mt[Rt]).index,st.objectId,"0","R")},me=function(){this.internal.collections[k+"images"]||(this.internal.collections[k+"images"]={},this.internal.events.subscribe("putResources",ye),this.internal.events.subscribe("putXobjectDict",he))},Ie=function(){var st=this.internal.collections[k+"images"];return me.call(this),st},Qe=function(){return Object.keys(this.internal.collections[k+"images"]).length},qe=function(st){return typeof P["process"+st.toUpperCase()]=="function"},lt=function(st){return(0,d.default)(st)==="object"&&st.nodeType===1},Te=function(st,mt){if(st.nodeName==="IMG"&&st.hasAttribute("src")){var Ot=""+st.getAttribute("src");if(Ot.indexOf("data:image/")===0)return I(unescape(Ot).split("base64,").pop());var Rt=P.loadFile(Ot,!0);if(Rt!==void 0)return Rt}if(st.nodeName==="CANVAS"){if(st.width===0||st.height===0)throw new Error("Given canvas must have data. Canvas width: "+st.width+", height: "+st.height);var Ar;switch(mt){case"PNG":Ar="image/png";break;case"WEBP":Ar="image/webp";break;default:Ar="image/jpeg"}return I(st.toDataURL(Ar,1).split("base64,").pop())}},Et=function(st){var mt=this.internal.collections[k+"images"];if(mt){for(var Ot in mt)if(st===mt[Ot].alias)return mt[Ot]}},at=function(st,mt,Ot){return st||mt||(st=-96,mt=-96),st<0&&(st=-1*Ot.width*72/st/this.internal.scaleFactor),mt<0&&(mt=-1*Ot.height*72/mt/this.internal.scaleFactor),st===0&&(st=mt*Ot.width/Ot.height),mt===0&&(mt=st*Ot.height/Ot.width),[st,mt]},Ct=function(st,mt,Ot,Rt,Ar,jr){var Br=at.call(this,Ot,Rt,Ar),ar=this.internal.getCoordinateString,Lr=this.internal.getVerticalCoordinateString,hn=Ie.call(this);if(Ot=Br[0],Rt=Br[1],hn[Ar.index]=Ar,jr){jr*=Math.PI/180;var tn=Math.cos(jr),We=Math.sin(jr),St=function(Gt){return Gt.toFixed(4)},Nt=[St(tn),St(We),St(-1*We),St(tn),0,0,"cm"]}this.internal.write("q"),jr?(this.internal.write([1,"0","0",1,ar(st),Lr(mt+Rt),"cm"].join(" ")),this.internal.write(Nt.join(" ")),this.internal.write([ar(Ot),"0","0",ar(Rt),"0","0","cm"].join(" "))):this.internal.write([ar(Ot),"0","0",ar(Rt),ar(st),Lr(mt+Rt),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Ar.index+" Do"),this.internal.write("Q")},et=P.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};P.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var Pt=P.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},qt=P.__addimage__.sHashCode=function(st){var mt,Ot,Rt=0;if(typeof st=="string")for(Ot=st.length,mt=0;mt<Ot;mt++)Rt=(Rt<<5)-Rt+st.charCodeAt(mt),Rt|=0;else if(zt(st))for(Ot=st.byteLength/2,mt=0;mt<Ot;mt++)Rt=(Rt<<5)-Rt+st[mt],Rt|=0;return Rt},It=P.__addimage__.validateStringAsBase64=function(st){(st=st||"").toString().trim();var mt=!0;return st.length===0&&(mt=!1),st.length%4!=0&&(mt=!1),/^[A-Za-z0-9+/]+$/.test(st.substr(0,st.length-2))===!1&&(mt=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(st.substr(-2))===!1&&(mt=!1),mt},Je=P.__addimage__.extractImageFromDataUrl=function(st){if(st==null||!(st=st.trim()).startsWith("data:"))return null;var mt=st.indexOf(",");return mt<0?null:st.substring(0,mt).trim().endsWith("base64")?st.substring(mt+1):null};P.__addimage__.isArrayBuffer=function(st){return st instanceof ArrayBuffer};var zt=P.__addimage__.isArrayBufferView=function(st){return st instanceof Int8Array||st instanceof Uint8Array||st instanceof Uint8ClampedArray||st instanceof Int16Array||st instanceof Uint16Array||st instanceof Int32Array||st instanceof Uint32Array||st instanceof Float32Array||st instanceof Float64Array},Sr=P.__addimage__.binaryStringToUint8Array=function(st){for(var mt=st.length,Ot=new Uint8Array(mt),Rt=0;Rt<mt;Rt++)Ot[Rt]=st.charCodeAt(Rt);return Ot},ir=P.__addimage__.arrayBufferToBinaryString=function(st){for(var mt="",Ot=zt(st)?st:new Uint8Array(st),Rt=0;Rt<Ot.length;Rt+=8192)mt+=String.fromCharCode.apply(null,Ot.subarray(Rt,Rt+8192));return mt};P.addImage=function(){var st,mt,Ot,Rt,Ar,jr,Br,ar,Lr;if(typeof arguments[1]=="number"?(mt=D,Ot=arguments[1],Rt=arguments[2],Ar=arguments[3],jr=arguments[4],Br=arguments[5],ar=arguments[6],Lr=arguments[7]):(mt=arguments[1],Ot=arguments[2],Rt=arguments[3],Ar=arguments[4],jr=arguments[5],Br=arguments[6],ar=arguments[7],Lr=arguments[8]),(0,d.default)(st=arguments[0])==="object"&&!lt(st)&&"imageData"in st){var hn=st;st=hn.imageData,mt=hn.format||mt||D,Ot=hn.x||Ot||0,Rt=hn.y||Rt||0,Ar=hn.w||hn.width||Ar,jr=hn.h||hn.height||jr,Br=hn.alias||Br,ar=hn.compression||ar,Lr=hn.rotation||hn.angle||Lr}var tn=this.internal.getFilters();if(ar===void 0&&tn.indexOf("FlateEncode")!==-1&&(ar="SLOW"),isNaN(Ot)||isNaN(Rt))throw new Error("Invalid coordinates passed to jsPDF.addImage");me.call(this);var We=Mt.call(this,st,mt,Br,ar);return Ct.call(this,Ot,Rt,Ar,jr,We,Lr),this};var Mt=function(st,mt,Ot,Rt){var Ar,jr,Br;if(typeof st=="string"&&X(st)===D){st=unescape(st);var ar=xr(st,!1);(ar!==""||(ar=P.loadFile(st,!0))!==void 0)&&(st=ar)}if(lt(st)&&(st=Te(st,mt)),mt=X(st,mt),!qe(mt))throw new Error("addImage does not support files of type '"+mt+"', please ensure that a plugin for '"+mt+"' support is added.");if(((Br=Ot)==null||Br.length===0)&&(Ot=(function(Lr){return typeof Lr=="string"||zt(Lr)?qt(Lr):zt(Lr.data)?qt(Lr.data):null})(st)),(Ar=Et.call(this,Ot))||(st instanceof Uint8Array||mt==="RGBA"||(jr=st,st=Sr(st)),Ar=this["process"+mt.toUpperCase()](st,Qe.call(this),Ot,(function(Lr){return Lr&&typeof Lr=="string"&&(Lr=Lr.toUpperCase()),Lr in P.image_compression?Lr:Pt.NONE})(Rt),jr)),!Ar)throw new Error("An unknown error occurred whilst processing the image.");return Ar},xr=P.__addimage__.convertBase64ToBinaryString=function(st,mt){mt=typeof mt!="boolean"||mt;var Ot,Rt="";if(typeof st=="string"){var Ar;Ot=(Ar=Je(st))!==null&&Ar!==void 0?Ar:st;try{Rt=I(Ot)}catch(jr){if(mt)throw It(Ot)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+jr.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return Rt};P.getImageProperties=function(st){var mt,Ot,Rt="";if(lt(st)&&(st=Te(st)),typeof st=="string"&&X(st)===D&&((Rt=xr(st,!1))===""&&(Rt=P.loadFile(st)||""),st=Rt),Ot=X(st),!qe(Ot))throw new Error("addImage does not support files of type '"+Ot+"', please ensure that a plugin for '"+Ot+"' support is added.");if(st instanceof Uint8Array||(st=Sr(st)),!(mt=this["process"+Ot.toUpperCase()](st)))throw new Error("An unknown error occurred whilst processing the image");return mt.fileType=Ot,mt}})(Ge.API),(function(P){var k=function(D){if(D!==void 0&&D!="")return!0};Ge.API.events.push(["addPage",function(D){this.internal.getPageInfo(D.pageNumber).pageContext.annotations=[]}]),P.events.push(["putPage",function(D){for(var G,X,ee,ye=this.internal.getCoordinateString,he=this.internal.getVerticalCoordinateString,me=this.internal.getPageInfoByObjId(D.objId),Ie=D.pageContext.annotations,Qe=!1,qe=0;qe<Ie.length&&!Qe;qe++)switch((G=Ie[qe]).type){case"link":(k(G.options.url)||k(G.options.pageNumber))&&(Qe=!0);break;case"reference":case"text":case"freetext":Qe=!0}if(Qe!=0){this.internal.write("/Annots [");for(var lt=0;lt<Ie.length;lt++){G=Ie[lt];var Te=this.internal.pdfEscape,Et=this.internal.getEncryptor(D.objId);switch(G.type){case"reference":this.internal.write(" "+G.object.objId+" 0 R ");break;case"text":var at=this.internal.newAdditionalObject(),Ct=this.internal.newAdditionalObject(),et=this.internal.getEncryptor(at.objId),Pt=G.title||"Note";ee="<</Type /Annot /Subtype /Text "+(X="/Rect ["+ye(G.bounds.x)+" "+he(G.bounds.y+G.bounds.h)+" "+ye(G.bounds.x+G.bounds.w)+" "+he(G.bounds.y)+"] ")+"/Contents ("+Te(et(G.contents))+")",ee+=" /Popup "+Ct.objId+" 0 R",ee+=" /P "+me.objId+" 0 R",ee+=" /T ("+Te(et(Pt))+") >>",at.content=ee;var qt=at.objId+" 0 R";ee="<</Type /Annot /Subtype /Popup "+(X="/Rect ["+ye(G.bounds.x+30)+" "+he(G.bounds.y+G.bounds.h)+" "+ye(G.bounds.x+G.bounds.w+30)+" "+he(G.bounds.y)+"] ")+" /Parent "+qt,G.open&&(ee+=" /Open true"),ee+=" >>",Ct.content=ee,this.internal.write(at.objId,"0 R",Ct.objId,"0 R");break;case"freetext":X="/Rect ["+ye(G.bounds.x)+" "+he(G.bounds.y)+" "+ye(G.bounds.x+G.bounds.w)+" "+he(G.bounds.y+G.bounds.h)+"] ";var It=G.color||"#000000";ee="<</Type /Annot /Subtype /FreeText "+X+"/Contents ("+Te(Et(G.contents))+")",ee+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+It+")",ee+=" /Border [0 0 0]",ee+=" >>",this.internal.write(ee);break;case"link":if(G.options.name){var Je=this.annotations._nameMap[G.options.name];G.options.pageNumber=Je.page,G.options.top=Je.y}else G.options.top||(G.options.top=0);if(X="/Rect ["+G.finalBounds.x+" "+G.finalBounds.y+" "+G.finalBounds.w+" "+G.finalBounds.h+"] ",ee="",G.options.url)ee="<</Type /Annot /Subtype /Link "+X+"/Border [0 0 0] /A <</S /URI /URI ("+Te(Et(G.options.url))+") >>";else if(G.options.pageNumber)switch(ee="<</Type /Annot /Subtype /Link "+X+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(G.options.pageNumber).objId+" 0 R",G.options.magFactor=G.options.magFactor||"XYZ",G.options.magFactor){case"Fit":ee+=" /Fit]";break;case"FitH":ee+=" /FitH "+G.options.top+"]";break;case"FitV":G.options.left=G.options.left||0,ee+=" /FitV "+G.options.left+"]";break;default:var zt=he(G.options.top);G.options.left=G.options.left||0,G.options.zoom===void 0&&(G.options.zoom=0),ee+=" /XYZ "+G.options.left+" "+zt+" "+G.options.zoom+"]"}ee!=""&&(ee+=" >>",this.internal.write(ee))}}this.internal.write("]")}}]),P.createAnnotation=function(D){var G=this.internal.getCurrentPageInfo();switch(D.type){case"link":this.link(D.bounds.x,D.bounds.y,D.bounds.w,D.bounds.h,D);break;case"text":case"freetext":G.pageContext.annotations.push(D)}},P.link=function(D,G,X,ee,ye){var he=this.internal.getCurrentPageInfo(),me=this.internal.getCoordinateString,Ie=this.internal.getVerticalCoordinateString;he.pageContext.annotations.push({finalBounds:{x:me(D),y:Ie(G),w:me(D+X),h:Ie(G+ee)},options:ye,type:"link"})},P.textWithLink=function(D,G,X,ee){var ye,he,me=this.getTextWidth(D),Ie=this.internal.getLineHeight()/this.internal.scaleFactor;if(ee.maxWidth!==void 0){he=ee.maxWidth;var Qe=this.splitTextToSize(D,he).length;ye=Math.ceil(Ie*Qe)}else he=me,ye=Ie;return this.text(D,G,X,ee),X+=.2*Ie,ee.align==="center"&&(G-=me/2),ee.align==="right"&&(G-=me),this.link(G,X-Ie,he,ye,ee),me},P.getTextWidth=function(D){var G=this.internal.getFontSize();return this.getStringUnitWidth(D)*G/this.internal.scaleFactor}})(Ge.API),(function(P){var k={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},D={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},G={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},X=[1570,1571,1573,1575];P.__arabicParser__={};var ee=P.__arabicParser__.isInArabicSubstitutionA=function(at){return k[at.charCodeAt(0)]!==void 0},ye=P.__arabicParser__.isArabicLetter=function(at){return typeof at=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(at)},he=P.__arabicParser__.isArabicEndLetter=function(at){return ye(at)&&ee(at)&&k[at.charCodeAt(0)].length<=2},me=P.__arabicParser__.isArabicAlfLetter=function(at){return ye(at)&&X.indexOf(at.charCodeAt(0))>=0};P.__arabicParser__.arabicLetterHasIsolatedForm=function(at){return ye(at)&&ee(at)&&k[at.charCodeAt(0)].length>=1};var Ie=P.__arabicParser__.arabicLetterHasFinalForm=function(at){return ye(at)&&ee(at)&&k[at.charCodeAt(0)].length>=2};P.__arabicParser__.arabicLetterHasInitialForm=function(at){return ye(at)&&ee(at)&&k[at.charCodeAt(0)].length>=3};var Qe=P.__arabicParser__.arabicLetterHasMedialForm=function(at){return ye(at)&&ee(at)&&k[at.charCodeAt(0)].length==4},qe=P.__arabicParser__.resolveLigatures=function(at){var Ct=0,et=D,Pt="",qt=0;for(Ct=0;Ct<at.length;Ct+=1)et[at.charCodeAt(Ct)]!==void 0?(qt++,typeof(et=et[at.charCodeAt(Ct)])=="number"&&(Pt+=String.fromCharCode(et),et=D,qt=0),Ct===at.length-1&&(et=D,Pt+=at.charAt(Ct-(qt-1)),Ct-=qt-1,qt=0)):(et=D,Pt+=at.charAt(Ct-qt),Ct-=qt,qt=0);return Pt};P.__arabicParser__.isArabicDiacritic=function(at){return at!==void 0&&G[at.charCodeAt(0)]!==void 0};var lt=P.__arabicParser__.getCorrectForm=function(at,Ct,et){return ye(at)?ee(at)===!1?-1:!Ie(at)||!ye(Ct)&&!ye(et)||!ye(et)&&he(Ct)||he(at)&&!ye(Ct)||he(at)&&me(Ct)||he(at)&&he(Ct)?0:Qe(at)&&ye(Ct)&&!he(Ct)&&ye(et)&&Ie(et)?3:he(at)||!ye(et)?1:2:-1},Te=function(at){var Ct=0,et=0,Pt=0,qt="",It="",Je="",zt=(at=at||"").split("\\s+"),Sr=[];for(Ct=0;Ct<zt.length;Ct+=1){for(Sr.push(""),et=0;et<zt[Ct].length;et+=1)qt=zt[Ct][et],It=zt[Ct][et-1],Je=zt[Ct][et+1],ye(qt)?(Pt=lt(qt,It,Je),Sr[Ct]+=Pt!==-1?String.fromCharCode(k[qt.charCodeAt(0)][Pt]):qt):Sr[Ct]+=qt;Sr[Ct]=qe(Sr[Ct])}return Sr.join(" ")},Et=P.__arabicParser__.processArabic=P.processArabic=function(){var at,Ct=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,et=[];if(Array.isArray(Ct)){var Pt=0;for(et=[],Pt=0;Pt<Ct.length;Pt+=1)Array.isArray(Ct[Pt])?et.push([Te(Ct[Pt][0]),Ct[Pt][1],Ct[Pt][2]]):et.push([Te(Ct[Pt])]);at=et}else at=Te(Ct);return typeof arguments[0]=="string"?at:(arguments[0].text=at,arguments[0])};P.events.push(["preProcessText",Et])})(Ge.API),Ge.API.autoPrint=function(P){var k;return(P=P||{}).variant=P.variant||"non-conform",P.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){k=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+k+" 0 R")})),this},(function(P){var k=function(){var D=void 0;Object.defineProperty(this,"pdf",{get:function(){return D},set:function(he){D=he}});var G=150;Object.defineProperty(this,"width",{get:function(){return G},set:function(he){G=isNaN(he)||Number.isInteger(he)===!1||he<0?150:he,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=G+1)}});var X=300;Object.defineProperty(this,"height",{get:function(){return X},set:function(he){X=isNaN(he)||Number.isInteger(he)===!1||he<0?300:he,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=X+1)}});var ee=[];Object.defineProperty(this,"childNodes",{get:function(){return ee},set:function(he){ee=he}});var ye={};Object.defineProperty(this,"style",{get:function(){return ye},set:function(he){ye=he}}),Object.defineProperty(this,"parentNode",{})};k.prototype.getContext=function(D,G){var X;if((D=D||"2d")!=="2d")return null;for(X in G)this.pdf.context2d.hasOwnProperty(X)&&(this.pdf.context2d[X]=G[X]);return this.pdf.context2d._canvas=this,this.pdf.context2d},k.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},P.events.push(["initialized",function(){this.canvas=new k,this.canvas.pdf=this}])})(Ge.API),(function(P){var k={left:0,top:0,bottom:0,right:0},D=!1,G=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},k),this.internal.__cell__.margins.width=this.getPageWidth(),X.call(this))},X=function(){this.internal.__cell__.lastCell=new ee,this.internal.__cell__.pages=1},ee=function(){var me=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return me},set:function(at){me=at}});var Ie=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Ie},set:function(at){Ie=at}});var Qe=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return Qe},set:function(at){Qe=at}});var qe=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return qe},set:function(at){qe=at}});var lt=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return lt},set:function(at){lt=at}});var Te=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return Te},set:function(at){Te=at}});var Et=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return Et},set:function(at){Et=at}}),this};ee.prototype.clone=function(){return new ee(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},ee.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},P.setHeaderFunction=function(me){return G.call(this),this.internal.__cell__.headerFunction=typeof me=="function"?me:void 0,this},P.getTextDimensions=function(me,Ie){G.call(this);var Qe=(Ie=Ie||{}).fontSize||this.getFontSize(),qe=Ie.font||this.getFont(),lt=Ie.scaleFactor||this.internal.scaleFactor,Te=0,Et=0,at=0,Ct=this;if(!Array.isArray(me)&&typeof me!="string"){if(typeof me!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");me=String(me)}var et=Ie.maxWidth;et>0?typeof me=="string"?me=this.splitTextToSize(me,et):Object.prototype.toString.call(me)==="[object Array]"&&(me=me.reduce(function(qt,It){return qt.concat(Ct.splitTextToSize(It,et))},[])):me=Array.isArray(me)?me:[me];for(var Pt=0;Pt<me.length;Pt++)Te<(at=this.getStringUnitWidth(me[Pt],{font:qe})*Qe)&&(Te=at);return Te!==0&&(Et=me.length),{w:Te/=lt,h:Math.max((Et*Qe*this.getLineHeightFactor()-Qe*(this.getLineHeightFactor()-1))/lt,0)}},P.cellAddPage=function(){G.call(this),this.addPage();var me=this.internal.__cell__.margins||k;return this.internal.__cell__.lastCell=new ee(me.left,me.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var ye=P.cell=function(){var me;me=arguments[0]instanceof ee?arguments[0]:new ee(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),G.call(this);var Ie=this.internal.__cell__.lastCell,Qe=this.internal.__cell__.padding,qe=this.internal.__cell__.margins||k,lt=this.internal.__cell__.tableHeaderRow,Te=this.internal.__cell__.printHeaders;return Ie.lineNumber!==void 0&&(Ie.lineNumber===me.lineNumber?(me.x=(Ie.x||0)+(Ie.width||0),me.y=Ie.y||0):Ie.y+Ie.height+me.height+qe.bottom>this.getPageHeight()?(this.cellAddPage(),me.y=qe.top,Te&&lt&&(this.printHeaderRow(me.lineNumber,!0),me.y+=lt[0].height)):me.y=Ie.y+Ie.height||me.y),me.text[0]!==void 0&&(this.rect(me.x,me.y,me.width,me.height,D===!0?"FD":void 0),me.align==="right"?this.text(me.text,me.x+me.width-Qe,me.y+Qe,{align:"right",baseline:"top"}):me.align==="center"?this.text(me.text,me.x+me.width/2,me.y+Qe,{align:"center",baseline:"top",maxWidth:me.width-Qe-Qe}):this.text(me.text,me.x+Qe,me.y+Qe,{align:"left",baseline:"top",maxWidth:me.width-Qe-Qe})),this.internal.__cell__.lastCell=me,this};P.table=function(me,Ie,Qe,qe,lt){if(G.call(this),!Qe)throw new Error("No data for PDF table.");var Te,Et,at,Ct,et=[],Pt=[],qt=[],It={},Je={},zt=[],Sr=[],ir=(lt=lt||{}).autoSize||!1,Mt=lt.printHeaders!==!1,xr=lt.css&&lt.css["font-size"]!==void 0?16*lt.css["font-size"]:lt.fontSize||12,st=lt.margins||Object.assign({width:this.getPageWidth()},k),mt=typeof lt.padding=="number"?lt.padding:3,Ot=lt.headerBackgroundColor||"#c8c8c8",Rt=lt.headerTextColor||"#000";if(X.call(this),this.internal.__cell__.printHeaders=Mt,this.internal.__cell__.margins=st,this.internal.__cell__.table_font_size=xr,this.internal.__cell__.padding=mt,this.internal.__cell__.headerBackgroundColor=Ot,this.internal.__cell__.headerTextColor=Rt,this.setFontSize(xr),qe==null)Pt=et=Object.keys(Qe[0]),qt=et.map(function(){return"left"});else if(Array.isArray(qe)&&(0,d.default)(qe[0])==="object")for(et=qe.map(function(hn){return hn.name}),Pt=qe.map(function(hn){return hn.prompt||hn.name||""}),qt=qe.map(function(hn){return hn.align||"left"}),Te=0;Te<qe.length;Te+=1)Je[qe[Te].name]=.7499990551181103*qe[Te].width;else Array.isArray(qe)&&typeof qe[0]=="string"&&(Pt=et=qe,qt=et.map(function(){return"left"}));if(ir||Array.isArray(qe)&&typeof qe[0]=="string")for(Te=0;Te<et.length;Te+=1){for(It[Ct=et[Te]]=Qe.map(function(hn){return hn[Ct]}),this.setFont(void 0,"bold"),zt.push(this.getTextDimensions(Pt[Te],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),Et=It[Ct],this.setFont(void 0,"normal"),at=0;at<Et.length;at+=1)zt.push(this.getTextDimensions(Et[at],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);Je[Ct]=Math.max.apply(null,zt)+mt+mt,zt=[]}if(Mt){var Ar={};for(Te=0;Te<et.length;Te+=1)Ar[et[Te]]={},Ar[et[Te]].text=Pt[Te],Ar[et[Te]].align=qt[Te];var jr=he.call(this,Ar,Je);Sr=et.map(function(hn){return new ee(me,Ie,Je[hn],jr,Ar[hn].text,void 0,Ar[hn].align)}),this.setTableHeaderRow(Sr),this.printHeaderRow(1,!1)}var Br=qe.reduce(function(hn,tn){return hn[tn.name]=tn.align,hn},{});for(Te=0;Te<Qe.length;Te+=1){"rowStart"in lt&&lt.rowStart instanceof Function&&lt.rowStart({row:Te,data:Qe[Te]},this);var ar=he.call(this,Qe[Te],Je);for(at=0;at<et.length;at+=1){var Lr=Qe[Te][et[at]];"cellStart"in lt&&lt.cellStart instanceof Function&&lt.cellStart({row:Te,col:at,data:Lr},this),ye.call(this,new ee(me,Ie,Je[et[at]],ar,Lr,Te+2,Br[et[at]]))}}return this.internal.__cell__.table_x=me,this.internal.__cell__.table_y=Ie,this};var he=function(me,Ie){var Qe=this.internal.__cell__.padding,qe=this.internal.__cell__.table_font_size,lt=this.internal.scaleFactor;return Object.keys(me).map(function(Te){var Et=me[Te];return this.splitTextToSize(Et.hasOwnProperty("text")?Et.text:Et,Ie[Te]-Qe-Qe)},this).map(function(Te){return this.getLineHeightFactor()*Te.length*qe/lt+Qe+Qe},this).reduce(function(Te,Et){return Math.max(Te,Et)},0)};P.setTableHeaderRow=function(me){G.call(this),this.internal.__cell__.tableHeaderRow=me},P.printHeaderRow=function(me,Ie){if(G.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var Qe;if(D=!0,typeof this.internal.__cell__.headerFunction=="function"){var qe=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new ee(qe[0],qe[1],qe[2],qe[3],void 0,-1)}this.setFont(void 0,"bold");for(var lt=[],Te=0;Te<this.internal.__cell__.tableHeaderRow.length;Te+=1){Qe=this.internal.__cell__.tableHeaderRow[Te].clone(),Ie&&(Qe.y=this.internal.__cell__.margins.top||0,lt.push(Qe)),Qe.lineNumber=me;var Et=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),ye.call(this,Qe),this.setTextColor(Et)}lt.length>0&&this.setTableHeaderRow(lt),this.setFont(void 0,"normal"),D=!1}})(Ge.API);var Cn={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Ms=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Qs=_n(Ms),Fs=[100,200,300,400,500,600,700,800,900],rs=_n(Fs);function qs(P){var k=P.family.replace(/"|'/g,"").toLowerCase(),D=(function(ee){return Cn[ee=ee||"normal"]?ee:"normal"})(P.style),G=(function(ee){return ee?typeof ee=="number"?ee>=100&&ee<=900&&ee%100==0?ee:400:/^\d00$/.test(ee)?parseInt(ee):ee==="bold"?700:400:400})(P.weight),X=(function(ee){return typeof Qs[ee=ee||"normal"]=="number"?ee:"normal"})(P.stretch);return{family:k,style:D,weight:G,stretch:X,src:P.src||[],ref:P.ref||{name:k,style:[X,D,G].join(" ")}}}function Os(P,k,D,G){var X;for(X=D;X>=0&&X<k.length;X+=G)if(P[k[X]])return P[k[X]];for(X=D;X>=0&&X<k.length;X-=G)if(P[k[X]])return P[k[X]]}var Qa={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},ds={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function bu(P){return[P.stretch,P.style,P.weight,P.family].join(" ")}function to(P){return P.trimLeft()}function Ml(P,k){for(var D=0;D<P.length;){if(P.charAt(D)===k)return[P.substring(0,D),P.substring(D+1)];D+=1}return null}function nu(P){var k=P.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return k===null?null:[k[0],P.substring(k[0].length)]}var ml,ra,Ya,Ws,ba,Us,kl,po,ro=["times"];function pl(P,k,D,G,X){var ee=4,ye=Vs;switch(X){case Ge.API.image_compression.FAST:ee=1,ye=mc;break;case Ge.API.image_compression.MEDIUM:ee=6,ye=ci;break;case Ge.API.image_compression.SLOW:ee=9,ye=Ns}P=(function(me,Ie,Qe,qe){for(var lt,Te=me.length/Ie,Et=new Uint8Array(me.length+Te),at=[Fl,mc,Vs,ci,Ns],Ct=0;Ct<Te;Ct+=1){var et=Ct*Ie,Pt=me.subarray(et,et+Ie);if(qe)Et.set(qe(Pt,Qe,lt),et+Ct);else{for(var qt=at.length,It=[],Je=0;Je<qt;Je+=1)It[Je]=at[Je](Pt,Qe,lt);var zt=Va(It.concat());Et.set(It[zt],et+Ct)}lt=Pt}return Et})(P,k,Math.ceil(D*G/8),ye);var he=(0,f.zlibSync)(P,{level:ee});return Ge.API.__addimage__.arrayBufferToBinaryString(he)}function Fl(P){var k=Array.apply([],P);return k.unshift(0),k}function mc(P,k){var D=P.length,G=[];G[0]=1;for(var X=0;X<D;X+=1){var ee=P[X-k]||0;G[X+1]=P[X]-ee+256&255}return G}function Vs(P,k,D){var G=P.length,X=[];X[0]=2;for(var ee=0;ee<G;ee+=1){var ye=D&&D[ee]||0;X[ee+1]=P[ee]-ye+256&255}return X}function ci(P,k,D){var G=P.length,X=[];X[0]=3;for(var ee=0;ee<G;ee+=1){var ye=P[ee-k]||0,he=D&&D[ee]||0;X[ee+1]=P[ee]+256-(ye+he>>>1)&255}return X}function Ns(P,k,D){var G=P.length,X=[];X[0]=4;for(var ee=0;ee<G;ee+=1){var ye=Ta(P[ee-k]||0,D&&D[ee]||0,D&&D[ee-k]||0);X[ee+1]=P[ee]-ye+256&255}return X}function Ta(P,k,D){if(P===k&&k===D)return P;var G=Math.abs(k-D),X=Math.abs(P-D),ee=Math.abs(P+k-D-D);return G<=X&&G<=ee?P:X<=ee?k:D}function Va(P){var k=P.map(function(D){return D.reduce(function(G,X){return G+Math.abs(X)},0)});return k.indexOf(Math.min.apply(null,k))}function Ca(P,k,D){var G=k*D,X=Math.floor(G/8),ee=16-(G-8*X+D),ye=(1<<D)-1;return Xn(P,X)>>ee&ye}function gi(P,k,D,G){var X=D*G,ee=Math.floor(X/8),ye=16-(X-8*ee+G),he=(1<<G)-1,me=(k&he)<<ye;(function(Ie,Qe,qe){if(Qe+1<Ie.byteLength)Ie.setUint16(Qe,qe,!1);else{var lt=qe>>8&255;Ie.setUint8(Qe,lt)}})(P,ee,Xn(P,ee)&~(he<<ye)&65535|me)}function Xn(P,k){return k+1<P.byteLength?P.getUint16(k,!1):P.getUint8(k)<<8}function hs(P){var k=0;if(P[k++]!==71||P[k++]!==73||P[k++]!==70||P[k++]!==56||(P[k++]+1&253)!=56||P[k++]!==97)throw new Error("Invalid GIF 87a/89a header.");var D=P[k++]|P[k++]<<8,G=P[k++]|P[k++]<<8,X=P[k++],ee=X>>7,ye=1<<1+(7&X);P[k++],P[k++];var he=null,me=null;ee&&(he=k,me=ye,k+=3*ye);var Ie=!0,Qe=[],qe=0,lt=null,Te=0,Et=null;for(this.width=D,this.height=G;Ie&&k<P.length;)switch(P[k++]){case 33:switch(P[k++]){case 255:if(P[k]!==11||P[k+1]==78&&P[k+2]==69&&P[k+3]==84&&P[k+4]==83&&P[k+5]==67&&P[k+6]==65&&P[k+7]==80&&P[k+8]==69&&P[k+9]==50&&P[k+10]==46&&P[k+11]==48&&P[k+12]==3&&P[k+13]==1&&P[k+16]==0)k+=14,Et=P[k++]|P[k++]<<8,k++;else for(k+=12;;){if(!((st=P[k++])>=0))throw Error("Invalid block size");if(st===0)break;k+=st}break;case 249:if(P[k++]!==4||P[k+4]!==0)throw new Error("Invalid graphics extension block.");var at=P[k++];qe=P[k++]|P[k++]<<8,lt=P[k++],1&at||(lt=null),Te=at>>2&7,k++;break;case 254:for(;;){if(!((st=P[k++])>=0))throw Error("Invalid block size");if(st===0)break;k+=st}break;default:throw new Error("Unknown graphic control label: 0x"+P[k-1].toString(16))}break;case 44:var Ct=P[k++]|P[k++]<<8,et=P[k++]|P[k++]<<8,Pt=P[k++]|P[k++]<<8,qt=P[k++]|P[k++]<<8,It=P[k++],Je=It>>6&1,zt=1<<1+(7&It),Sr=he,ir=me,Mt=!1;It>>7&&(Mt=!0,Sr=k,ir=zt,k+=3*zt);var xr=k;for(k++;;){var st;if(!((st=P[k++])>=0))throw Error("Invalid block size");if(st===0)break;k+=st}Qe.push({x:Ct,y:et,width:Pt,height:qt,has_local_palette:Mt,palette_offset:Sr,palette_size:ir,data_offset:xr,data_length:k-xr,transparent_index:lt,interlaced:!!Je,delay:qe,disposal:Te});break;case 59:Ie=!1;break;default:throw new Error("Unknown gif block: 0x"+P[k-1].toString(16))}this.numFrames=function(){return Qe.length},this.loopCount=function(){return Et},this.frameInfo=function(mt){if(mt<0||mt>=Qe.length)throw new Error("Frame index out of range.");return Qe[mt]},this.decodeAndBlitFrameBGRA=function(mt,Ot){var Rt=this.frameInfo(mt),Ar=Rt.width*Rt.height,jr=new Uint8Array(Ar);wa(P,Rt.data_offset,jr,Ar);var Br=Rt.palette_offset,ar=Rt.transparent_index;ar===null&&(ar=256);var Lr=Rt.width,hn=D-Lr,tn=Lr,We=4*(Rt.y*D+Rt.x),St=4*((Rt.y+Rt.height)*D+Rt.x),Nt=We,Gt=4*hn;Rt.interlaced===!0&&(Gt+=4*D*7);for(var Xt=8,cr=0,Nr=jr.length;cr<Nr;++cr){var Cr=jr[cr];if(tn===0&&(tn=Lr,(Nt+=Gt)>=St&&(Gt=4*hn+4*D*(Xt-1),Nt=We+(Lr+hn)*(Xt<<1),Xt>>=1)),Cr===ar)Nt+=4;else{var Gr=P[Br+3*Cr],un=P[Br+3*Cr+1],En=P[Br+3*Cr+2];Ot[Nt++]=En,Ot[Nt++]=un,Ot[Nt++]=Gr,Ot[Nt++]=255}--tn}},this.decodeAndBlitFrameRGBA=function(mt,Ot){var Rt=this.frameInfo(mt),Ar=Rt.width*Rt.height,jr=new Uint8Array(Ar);wa(P,Rt.data_offset,jr,Ar);var Br=Rt.palette_offset,ar=Rt.transparent_index;ar===null&&(ar=256);var Lr=Rt.width,hn=D-Lr,tn=Lr,We=4*(Rt.y*D+Rt.x),St=4*((Rt.y+Rt.height)*D+Rt.x),Nt=We,Gt=4*hn;Rt.interlaced===!0&&(Gt+=4*D*7);for(var Xt=8,cr=0,Nr=jr.length;cr<Nr;++cr){var Cr=jr[cr];if(tn===0&&(tn=Lr,(Nt+=Gt)>=St&&(Gt=4*hn+4*D*(Xt-1),Nt=We+(Lr+hn)*(Xt<<1),Xt>>=1)),Cr===ar)Nt+=4;else{var Gr=P[Br+3*Cr],un=P[Br+3*Cr+1],En=P[Br+3*Cr+2];Ot[Nt++]=Gr,Ot[Nt++]=un,Ot[Nt++]=En,Ot[Nt++]=255}--tn}}}function wa(P,k,D,G){for(var X=P[k++],ee=1<<X,ye=ee+1,he=ye+1,me=X+1,Ie=(1<<me)-1,Qe=0,qe=0,lt=0,Te=P[k++],Et=new Int32Array(4096),at=null;;){for(;Qe<16&&Te!==0;)qe|=P[k++]<<Qe,Qe+=8,Te===1?Te=P[k++]:--Te;if(Qe<me)break;var Ct=qe&Ie;if(qe>>=me,Qe-=me,Ct!==ee){if(Ct===ye)break;for(var et=Ct<he?Ct:at,Pt=0,qt=et;qt>ee;)qt=Et[qt]>>8,++Pt;var It=qt;if(lt+Pt+(et!==Ct?1:0)>G)return void x.log("Warning, gif stream longer than expected.");D[lt++]=It;var Je=lt+=Pt;for(et!==Ct&&(D[lt++]=It),qt=et;Pt--;)qt=Et[qt],D[--Je]=255&qt,qt>>=8;at!==null&&he<4096&&(Et[he++]=at<<8|It,he>=Ie+1&&me<12&&(++me,Ie=Ie<<1|1)),at=Ct}else he=ye+1,Ie=(1<<(me=X+1))-1,at=null}return lt!==G&&x.log("Warning, gif stream shorter than expected."),D}function Qo(P){var k,D,G,X,ee,ye=Math.floor,he=new Array(64),me=new Array(64),Ie=new Array(64),Qe=new Array(64),qe=new Array(65535),lt=new Array(65535),Te=new Array(64),Et=new Array(64),at=[],Ct=0,et=7,Pt=new Array(64),qt=new Array(64),It=new Array(64),Je=new Array(256),zt=new Array(2048),Sr=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],ir=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],Mt=[0,1,2,3,4,5,6,7,8,9,10,11],xr=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],st=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],mt=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Ot=[0,1,2,3,4,5,6,7,8,9,10,11],Rt=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Ar=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function jr(We,St){for(var Nt=0,Gt=0,Xt=new Array,cr=1;cr<=16;cr++){for(var Nr=1;Nr<=We[cr];Nr++)Xt[St[Gt]]=[],Xt[St[Gt]][0]=Nt,Xt[St[Gt]][1]=cr,Gt++,Nt++;Nt*=2}return Xt}function Br(We){for(var St=We[0],Nt=We[1]-1;Nt>=0;)St&1<<Nt&&(Ct|=1<<et),Nt--,--et<0&&(Ct==255?(ar(255),ar(0)):ar(Ct),et=7,Ct=0)}function ar(We){at.push(We)}function Lr(We){ar(We>>8&255),ar(255&We)}function hn(We,St,Nt,Gt,Xt){for(var cr,Nr=Xt[0],Cr=Xt[240],Gr=(function(nn,ji){var Fn,Hn,$n,ga,Di,Gn,ns,_i,Un,ki,Wn=0;for(Un=0;Un<8;++Un){Fn=nn[Wn],Hn=nn[Wn+1],$n=nn[Wn+2],ga=nn[Wn+3],Di=nn[Wn+4],Gn=nn[Wn+5],ns=nn[Wn+6];var Gi=Fn+(_i=nn[Wn+7]),is=Fn-_i,Zi=Hn+ns,vs=Hn-ns,ja=$n+Gn,xi=$n-Gn,Ys=ga+Di,Qi=ga-Di,ai=Gi+Ys,da=Gi-Ys,Ii=Zi+ja,xn=Zi-ja;nn[Wn]=ai+Ii,nn[Wn+4]=ai-Ii;var ls=.707106781*(xn+da);nn[Wn+2]=da+ls,nn[Wn+6]=da-ls;var wu=.382683433*((ai=Qi+xi)-(xn=vs+is)),io=.5411961*ai+wu,Ko=1.306562965*xn+wu,Jl=.707106781*(Ii=xi+vs),bi=is+Jl,Ra=is-Jl;nn[Wn+5]=Ra+io,nn[Wn+3]=Ra-io,nn[Wn+1]=bi+Ko,nn[Wn+7]=bi-Ko,Wn+=8}for(Wn=0,Un=0;Un<8;++Un){Fn=nn[Wn],Hn=nn[Wn+8],$n=nn[Wn+16],ga=nn[Wn+24],Di=nn[Wn+32],Gn=nn[Wn+40],ns=nn[Wn+48];var Xa=Fn+(_i=nn[Wn+56]),Ul=Fn-_i,$l=Hn+ns,ha=Hn-ns,vo=$n+Gn,Za=$n-Gn,Hc=ga+Di,Co=ga-Di,pc=Xa+Hc,Ka=Xa-Hc,Hl=$l+vo,Ql=$l-vo;nn[Wn]=pc+Hl,nn[Wn+32]=pc-Hl;var Il=.707106781*(Ql+Ka);nn[Wn+16]=Ka+Il,nn[Wn+48]=Ka-Il;var yd=.382683433*((pc=Co+Za)-(Ql=ha+Ul)),ec=.5411961*pc+yd,Vl=1.306562965*Ql+yd,gc=.707106781*(Hl=Za+ha),xd=Ul+gc,zl=Ul-gc;nn[Wn+40]=zl+ec,nn[Wn+24]=zl-ec,nn[Wn+8]=xd+Vl,nn[Wn+56]=xd-Vl,Wn++}for(Un=0;Un<64;++Un)ki=nn[Un]*ji[Un],Te[Un]=ki>0?ki+.5|0:ki-.5|0;return Te})(We,St),un=0;un<64;++un)Et[Sr[un]]=Gr[un];var En=Et[0]-Nt;Nt=Et[0],En==0?Br(Gt[0]):(Br(Gt[lt[cr=32767+En]]),Br(qe[cr]));for(var Rn=63;Rn>0&&Et[Rn]==0;)Rn--;if(Rn==0)return Br(Nr),Nt;for(var yi,pt=1;pt<=Rn;){for(var Sn=pt;Et[pt]==0&&pt<=Rn;)++pt;var Ri=pt-Sn;if(Ri>=16){yi=Ri>>4;for(var Tn=1;Tn<=yi;++Tn)Br(Cr);Ri&=15}cr=32767+Et[pt],Br(Xt[(Ri<<4)+lt[cr]]),Br(qe[cr]),pt++}return Rn!=63&&Br(Nr),Nt}function tn(We){We=Math.min(Math.max(We,1),100),ee!=We&&((function(St){for(var Nt=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Gt=0;Gt<64;Gt++){var Xt=ye((Nt[Gt]*St+50)/100);Xt=Math.min(Math.max(Xt,1),255),he[Sr[Gt]]=Xt}for(var cr=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Nr=0;Nr<64;Nr++){var Cr=ye((cr[Nr]*St+50)/100);Cr=Math.min(Math.max(Cr,1),255),me[Sr[Nr]]=Cr}for(var Gr=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],un=0,En=0;En<8;En++)for(var Rn=0;Rn<8;Rn++)Ie[un]=1/(he[Sr[un]]*Gr[En]*Gr[Rn]*8),Qe[un]=1/(me[Sr[un]]*Gr[En]*Gr[Rn]*8),un++})(We<50?Math.floor(5e3/We):Math.floor(200-2*We)),ee=We)}this.encode=function(We,St){St&&tn(St),at=new Array,Ct=0,et=7,Lr(65496),Lr(65504),Lr(16),ar(74),ar(70),ar(73),ar(70),ar(0),ar(1),ar(1),ar(0),Lr(1),Lr(1),ar(0),ar(0),(function(){Lr(65499),Lr(132),ar(0);for(var Hn=0;Hn<64;Hn++)ar(he[Hn]);ar(1);for(var $n=0;$n<64;$n++)ar(me[$n])})(),(function(Hn,$n){Lr(65472),Lr(17),ar(8),Lr($n),Lr(Hn),ar(3),ar(1),ar(17),ar(0),ar(2),ar(17),ar(1),ar(3),ar(17),ar(1)})(We.width,We.height),(function(){Lr(65476),Lr(418),ar(0);for(var Hn=0;Hn<16;Hn++)ar(ir[Hn+1]);for(var $n=0;$n<=11;$n++)ar(Mt[$n]);ar(16);for(var ga=0;ga<16;ga++)ar(xr[ga+1]);for(var Di=0;Di<=161;Di++)ar(st[Di]);ar(1);for(var Gn=0;Gn<16;Gn++)ar(mt[Gn+1]);for(var ns=0;ns<=11;ns++)ar(Ot[ns]);ar(17);for(var _i=0;_i<16;_i++)ar(Rt[_i+1]);for(var Un=0;Un<=161;Un++)ar(Ar[Un])})(),Lr(65498),Lr(12),ar(3),ar(1),ar(0),ar(2),ar(17),ar(3),ar(17),ar(0),ar(63),ar(0);var Nt=0,Gt=0,Xt=0;Ct=0,et=7,this.encode.displayName="_encode_";for(var cr,Nr,Cr,Gr,un,En,Rn,yi,pt,Sn=We.data,Ri=We.width,Tn=We.height,nn=4*Ri,ji=0;ji<Tn;){for(cr=0;cr<nn;){for(un=nn*ji+cr,Rn=-1,yi=0,pt=0;pt<64;pt++)En=un+(yi=pt>>3)*nn+(Rn=4*(7&pt)),ji+yi>=Tn&&(En-=nn*(ji+1+yi-Tn)),cr+Rn>=nn&&(En-=cr+Rn-nn+4),Nr=Sn[En++],Cr=Sn[En++],Gr=Sn[En++],Pt[pt]=(zt[Nr]+zt[Cr+256|0]+zt[Gr+512|0]>>16)-128,qt[pt]=(zt[Nr+768|0]+zt[Cr+1024|0]+zt[Gr+1280|0]>>16)-128,It[pt]=(zt[Nr+1280|0]+zt[Cr+1536|0]+zt[Gr+1792|0]>>16)-128;Nt=hn(Pt,Ie,Nt,k,G),Gt=hn(qt,Qe,Gt,D,X),Xt=hn(It,Qe,Xt,D,X),cr+=32}ji+=8}if(et>=0){var Fn=[];Fn[1]=et+1,Fn[0]=(1<<et+1)-1,Br(Fn)}return Lr(65497),new Uint8Array(at)},P=P||50,(function(){for(var We=String.fromCharCode,St=0;St<256;St++)Je[St]=We(St)})(),k=jr(ir,Mt),D=jr(mt,Ot),G=jr(xr,st),X=jr(Rt,Ar),(function(){for(var We=1,St=2,Nt=1;Nt<=15;Nt++){for(var Gt=We;Gt<St;Gt++)lt[32767+Gt]=Nt,qe[32767+Gt]=[],qe[32767+Gt][1]=Nt,qe[32767+Gt][0]=Gt;for(var Xt=-(St-1);Xt<=-We;Xt++)lt[32767+Xt]=Nt,qe[32767+Xt]=[],qe[32767+Xt][1]=Nt,qe[32767+Xt][0]=St-1+Xt;We<<=1,St<<=1}})(),(function(){for(var We=0;We<256;We++)zt[We]=19595*We,zt[We+256|0]=38470*We,zt[We+512|0]=7471*We+32768,zt[We+768|0]=-11059*We,zt[We+1024|0]=-21709*We,zt[We+1280|0]=32768*We+8421375,zt[We+1536|0]=-27439*We,zt[We+1792|0]=-5329*We})(),tn(P)}function Hi(P,k){if(this.pos=0,this.buffer=P,this.datav=new DataView(P.buffer),this.is_with_alpha=!!k,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Vo(P){function k(Mt){if(!Mt)throw Error("assert :P")}function D(Mt,xr,st){for(var mt=0;4>mt;mt++)if(Mt[xr+mt]!=st.charCodeAt(mt))return!0;return!1}function G(Mt,xr,st,mt,Ot){for(var Rt=0;Rt<Ot;Rt++)Mt[xr+Rt]=st[mt+Rt]}function X(Mt,xr,st,mt){for(var Ot=0;Ot<mt;Ot++)Mt[xr+Ot]=st}function ee(Mt){return new Int32Array(Mt)}function ye(Mt,xr){for(var st=[],mt=0;mt<Mt;mt++)st.push(new xr);return st}function he(Mt,xr){var st=[];return(function mt(Ot,Rt,Ar){for(var jr=Ar[Rt],Br=0;Br<jr&&(Ot.push(Ar.length>Rt+1?[]:new xr),!(Ar.length<Rt+1));Br++)mt(Ot[Br],Rt+1,Ar)})(st,0,Mt),st}var me=function(){var Mt=this;function xr(R,q){for(var pe=1<<q-1>>>0;R&pe;)pe>>>=1;return pe?(R&pe-1)+pe:R}function st(R,q,pe,_e,Ue){k(!(_e%pe));do R[q+(_e-=pe)]=Ue;while(0<_e)}function mt(R,q,pe,_e,Ue){if(k(2328>=Ue),512>=Ue)var Ke=ee(512);else if((Ke=ee(Ue))==null)return 0;return(function(ze,Xe,tt,vt,$t,dr){var gt,Wt,tr=Xe,Dr=1<<tt,yr=ee(16),Mr=ee(16);for(k($t!=0),k(vt!=null),k(ze!=null),k(0<tt),Wt=0;Wt<$t;++Wt){if(15<vt[Wt])return 0;++yr[vt[Wt]]}if(yr[0]==$t)return 0;for(Mr[1]=0,gt=1;15>gt;++gt){if(yr[gt]>1<<gt)return 0;Mr[gt+1]=Mr[gt]+yr[gt]}for(Wt=0;Wt<$t;++Wt)gt=vt[Wt],0<vt[Wt]&&(dr[Mr[gt]++]=Wt);if(Mr[15]==1)return(vt=new Ot).g=0,vt.value=dr[0],st(ze,tr,1,Dr,vt),Dr;var Hr,an=-1,Jr=Dr-1,Ti=0,Qn=1,Ls=1,pi=1<<tt;for(Wt=0,gt=1,$t=2;gt<=tt;++gt,$t<<=1){if(Qn+=Ls<<=1,0>(Ls-=yr[gt]))return 0;for(;0<yr[gt];--yr[gt])(vt=new Ot).g=gt,vt.value=dr[Wt++],st(ze,tr+Ti,$t,pi,vt),Ti=xr(Ti,gt)}for(gt=tt+1,$t=2;15>=gt;++gt,$t<<=1){if(Qn+=Ls<<=1,0>(Ls-=yr[gt]))return 0;for(;0<yr[gt];--yr[gt]){if(vt=new Ot,(Ti&Jr)!=an){for(tr+=pi,Hr=1<<(an=gt)-tt;15>an&&!(0>=(Hr-=yr[an]));)++an,Hr<<=1;Dr+=pi=1<<(Hr=an-tt),ze[Xe+(an=Ti&Jr)].g=Hr+tt,ze[Xe+an].value=tr-Xe-an}vt.g=gt-tt,vt.value=dr[Wt++],st(ze,tr+(Ti>>tt),$t,pi,vt),Ti=xr(Ti,gt)}}return Qn!=2*Mr[15]-1?0:Dr})(R,q,pe,_e,Ue,Ke)}function Ot(){this.value=this.g=0}function Rt(){this.value=this.g=0}function Ar(){this.G=ye(5,Ot),this.H=ee(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=ye(ks,Rt)}function jr(R,q,pe,_e){k(R!=null),k(q!=null),k(2147483648>_e),R.Ca=254,R.I=0,R.b=-8,R.Ka=0,R.oa=q,R.pa=pe,R.Jd=q,R.Yc=pe+_e,R.Zc=4<=_e?pe+_e-4+1:pe,Nr(R)}function Br(R,q){for(var pe=0;0<q--;)pe|=Gr(R,128)<<q;return pe}function ar(R,q){var pe=Br(R,q);return Cr(R)?-pe:pe}function Lr(R,q,pe,_e){var Ue,Ke=0;for(k(R!=null),k(q!=null),k(4294967288>_e),R.Sb=_e,R.Ra=0,R.u=0,R.h=0,4<_e&&(_e=4),Ue=0;Ue<_e;++Ue)Ke+=q[pe+Ue]<<8*Ue;R.Ra=Ke,R.bb=_e,R.oa=q,R.pa=pe}function hn(R){for(;8<=R.u&&R.bb<R.Sb;)R.Ra>>>=8,R.Ra+=R.oa[R.pa+R.bb]<<rc-8>>>0,++R.bb,R.u-=8;Gt(R)&&(R.h=1,R.u=0)}function tn(R,q){if(k(0<=q),!R.h&&q<=$i){var pe=Nt(R)&ni[q];return R.u+=q,hn(R),pe}return R.h=1,R.u=0}function We(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function St(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Nt(R){return R.Ra>>>(R.u&rc-1)>>>0}function Gt(R){return k(R.bb<=R.Sb),R.h||R.bb==R.Sb&&R.u>rc}function Xt(R,q){R.u=q,R.h=Gt(R)}function cr(R){R.u>=qu&&(k(R.u>=qu),hn(R))}function Nr(R){k(R!=null&&R.oa!=null),R.pa<R.Zc?(R.I=(R.oa[R.pa++]|R.I<<8)>>>0,R.b+=8):(k(R!=null&&R.oa!=null),R.pa<R.Yc?(R.b+=8,R.I=R.oa[R.pa++]|R.I<<8):R.Ka?R.b=0:(R.I<<=8,R.b+=8,R.Ka=1))}function Cr(R){return Br(R,1)}function Gr(R,q){var pe=R.Ca;0>R.b&&Nr(R);var _e=R.b,Ue=pe*q>>>8,Ke=(R.I>>>_e>Ue)+0;for(Ke?(pe-=Ue,R.I-=Ue+1<<_e>>>0):pe=Ue+1,_e=pe,Ue=0;256<=_e;)Ue+=8,_e>>=8;return _e=7^Ue+ou[_e],R.b-=_e,R.Ca=(pe<<_e)-1,Ke}function un(R,q,pe){R[q+0]=pe>>24&255,R[q+1]=pe>>16&255,R[q+2]=pe>>8&255,R[q+3]=255&pe}function En(R,q){return R[q+0]|R[q+1]<<8}function Rn(R,q){return En(R,q)|R[q+2]<<16}function yi(R,q){return En(R,q)|En(R,q+2)<<16}function pt(R,q){var pe=1<<q;return k(R!=null),k(0<q),R.X=ee(pe),R.X==null?0:(R.Mb=32-q,R.Xa=q,1)}function Sn(R,q){k(R!=null),k(q!=null),k(R.Xa==q.Xa),G(q.X,0,R.X,0,1<<q.Xa)}function Ri(){this.X=[],this.Xa=this.Mb=0}function Tn(R,q,pe,_e){k(pe!=null),k(_e!=null);var Ue=pe[0],Ke=_e[0];return Ue==0&&(Ue=(R*Ke+q/2)/q),Ke==0&&(Ke=(q*Ue+R/2)/R),0>=Ue||0>=Ke?0:(pe[0]=Ue,_e[0]=Ke,1)}function nn(R,q){return R+(1<<q)-1>>>q}function ji(R,q){return((4278255360&R)+(4278255360&q)>>>0&4278255360)+((16711935&R)+(16711935&q)>>>0&16711935)>>>0}function Fn(R,q){Mt[q]=function(pe,_e,Ue,Ke,ze,Xe,tt){var vt;for(vt=0;vt<ze;++vt){var $t=Mt[R](Xe[tt+vt-1],Ue,Ke+vt);Xe[tt+vt]=ji(pe[_e+vt],$t)}}}function Hn(){this.ud=this.hd=this.jd=0}function $n(R,q){return((4278124286&(R^q))>>>1)+(R&q)>>>0}function ga(R){return 0<=R&&256>R?R:0>R?0:255<R?255:void 0}function Di(R,q){return ga(R+(R-q+.5>>1))}function Gn(R,q,pe){return Math.abs(q-pe)-Math.abs(R-pe)}function ns(R,q,pe,_e,Ue,Ke,ze){for(_e=Ke[ze-1],pe=0;pe<Ue;++pe)Ke[ze+pe]=_e=ji(R[q+pe],_e)}function _i(R,q,pe,_e,Ue){var Ke;for(Ke=0;Ke<pe;++Ke){var ze=R[q+Ke],Xe=ze>>8&255,tt=16711935&(tt=(tt=16711935&ze)+((Xe<<16)+Xe));_e[Ue+Ke]=(4278255360&ze)+tt>>>0}}function Un(R,q){q.jd=255&R,q.hd=R>>8&255,q.ud=R>>16&255}function ki(R,q,pe,_e,Ue,Ke){var ze;for(ze=0;ze<_e;++ze){var Xe=q[pe+ze],tt=Xe>>>8,vt=Xe,$t=255&($t=($t=Xe>>>16)+((R.jd<<24>>24)*(tt<<24>>24)>>>5));vt=255&(vt=(vt+=(R.hd<<24>>24)*(tt<<24>>24)>>>5)+((R.ud<<24>>24)*($t<<24>>24)>>>5)),Ue[Ke+ze]=(4278255360&Xe)+($t<<16)+vt}}function Wn(R,q,pe,_e,Ue){Mt[q]=function(Ke,ze,Xe,tt,vt,$t,dr,gt,Wt){for(tt=dr;tt<gt;++tt)for(dr=0;dr<Wt;++dr)vt[$t++]=Ue(Xe[_e(Ke[ze++])])},Mt[R]=function(Ke,ze,Xe,tt,vt,$t,dr){var gt=8>>Ke.b,Wt=Ke.Ea,tr=Ke.K[0],Dr=Ke.w;if(8>gt)for(Ke=(1<<Ke.b)-1,Dr=(1<<gt)-1;ze<Xe;++ze){var yr,Mr=0;for(yr=0;yr<Wt;++yr)yr&Ke||(Mr=_e(tt[vt++])),$t[dr++]=Ue(tr[Mr&Dr]),Mr>>=gt}else Mt["VP8LMapColor"+pe](tt,vt,tr,Dr,$t,dr,ze,Xe,Wt)}}function Gi(R,q,pe,_e,Ue){for(pe=q+pe;q<pe;){var Ke=R[q++];_e[Ue++]=Ke>>16&255,_e[Ue++]=Ke>>8&255,_e[Ue++]=255&Ke}}function is(R,q,pe,_e,Ue){for(pe=q+pe;q<pe;){var Ke=R[q++];_e[Ue++]=Ke>>16&255,_e[Ue++]=Ke>>8&255,_e[Ue++]=255&Ke,_e[Ue++]=Ke>>24&255}}function Zi(R,q,pe,_e,Ue){for(pe=q+pe;q<pe;){var Ke=(ze=R[q++])>>16&240|ze>>12&15,ze=240&ze|ze>>28&15;_e[Ue++]=Ke,_e[Ue++]=ze}}function vs(R,q,pe,_e,Ue){for(pe=q+pe;q<pe;){var Ke=(ze=R[q++])>>16&248|ze>>13&7,ze=ze>>5&224|ze>>3&31;_e[Ue++]=Ke,_e[Ue++]=ze}}function ja(R,q,pe,_e,Ue){for(pe=q+pe;q<pe;){var Ke=R[q++];_e[Ue++]=255&Ke,_e[Ue++]=Ke>>8&255,_e[Ue++]=Ke>>16&255}}function xi(R,q,pe,_e,Ue,Ke){if(Ke==0)for(pe=q+pe;q<pe;)un(_e,((Ke=R[q++])[0]>>24|Ke[1]>>8&65280|Ke[2]<<8&16711680|Ke[3]<<24)>>>0),Ue+=32;else G(_e,Ue,R,q,pe)}function Ys(R,q){Mt[q][0]=Mt[R+"0"],Mt[q][1]=Mt[R+"1"],Mt[q][2]=Mt[R+"2"],Mt[q][3]=Mt[R+"3"],Mt[q][4]=Mt[R+"4"],Mt[q][5]=Mt[R+"5"],Mt[q][6]=Mt[R+"6"],Mt[q][7]=Mt[R+"7"],Mt[q][8]=Mt[R+"8"],Mt[q][9]=Mt[R+"9"],Mt[q][10]=Mt[R+"10"],Mt[q][11]=Mt[R+"11"],Mt[q][12]=Mt[R+"12"],Mt[q][13]=Mt[R+"13"],Mt[q][14]=Mt[R+"0"],Mt[q][15]=Mt[R+"0"]}function Qi(R){return R==xg||R==op||R==cA||R==bg}function ai(){this.eb=[],this.size=this.A=this.fb=0}function da(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Ii(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new ai,this.f.kb=new da,this.sd=null}function xn(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function ls(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function wu(R){return alert("todo:WebPSamplerProcessPlane"),R.T}function io(R,q){var pe=R.T,_e=q.ba.f.RGBA,Ue=_e.eb,Ke=_e.fb+R.ka*_e.A,ze=Nd[q.ba.S],Xe=R.y,tt=R.O,vt=R.f,$t=R.N,dr=R.ea,gt=R.W,Wt=q.cc,tr=q.dc,Dr=q.Mc,yr=q.Nc,Mr=R.ka,Hr=R.ka+R.T,an=R.U,Jr=an+1>>1;for(Mr==0?ze(Xe,tt,null,null,vt,$t,dr,gt,vt,$t,dr,gt,Ue,Ke,null,null,an):(ze(q.ec,q.fc,Xe,tt,Wt,tr,Dr,yr,vt,$t,dr,gt,Ue,Ke-_e.A,Ue,Ke,an),++pe);Mr+2<Hr;Mr+=2)Wt=vt,tr=$t,Dr=dr,yr=gt,$t+=R.Rc,gt+=R.Rc,Ke+=2*_e.A,ze(Xe,(tt+=2*R.fa)-R.fa,Xe,tt,Wt,tr,Dr,yr,vt,$t,dr,gt,Ue,Ke-_e.A,Ue,Ke,an);return tt+=R.fa,R.j+Hr<R.o?(G(q.ec,q.fc,Xe,tt,an),G(q.cc,q.dc,vt,$t,Jr),G(q.Mc,q.Nc,dr,gt,Jr),pe--):1&Hr||ze(Xe,tt,null,null,vt,$t,dr,gt,vt,$t,dr,gt,Ue,Ke+_e.A,null,null,an),pe}function Ko(R,q,pe){var _e=R.F,Ue=[R.J];if(_e!=null){var Ke=R.U,ze=q.ba.S,Xe=ze==Bl||ze==cA;q=q.ba.f.RGBA;var tt=[0],vt=R.ka;tt[0]=R.T,R.Kb&&(vt==0?--tt[0]:(--vt,Ue[0]-=R.width),R.j+R.ka+R.T==R.o&&(tt[0]=R.o-R.j-vt));var $t=q.eb;vt=q.fb+vt*q.A,R=Cu(_e,Ue[0],R.width,Ke,tt,$t,vt+(Xe?0:3),q.A),k(pe==tt),R&&Qi(ze)&&Kh($t,vt,Xe,Ke,tt,q.A)}return 0}function Jl(R){var q=R.ma,pe=q.ba.S,_e=11>pe,Ue=pe==ap||pe==GA||pe==Bl||pe==Cf||pe==12||Qi(pe);if(q.memory=null,q.Ib=null,q.Jb=null,q.Nd=null,!Ua(q.Oa,R,Ue?11:12))return 0;if(Ue&&Qi(pe)&&xt(),R.da)alert("todo:use_scaling");else{if(_e){if(q.Ib=wu,R.Kb){if(pe=R.U+1>>1,q.memory=ee(R.U+2*pe),q.memory==null)return 0;q.ec=q.memory,q.fc=0,q.cc=q.ec,q.dc=q.fc+R.U,q.Mc=q.cc,q.Nc=q.dc+pe,q.Ib=io,xt()}}else alert("todo:EmitYUV");Ue&&(q.Jb=Ko,_e&&Ye())}if(_e&&!ev){for(R=0;256>R;++R)Ng[R]=89858*(R-128)+kh>>jf,Lg[R]=-22014*(R-128)+kh,Ig[R]=-45773*(R-128),kg[R]=113618*(R-128)+kh>>jf;for(R=XA;R<jg;++R)q=76283*(R-16)+kh>>jf,Bg[R-XA]=vl(q,255),tv[R-XA]=vl(q+8>>4,15);ev=1}return 1}function bi(R){var q=R.ma,pe=R.U,_e=R.T;return k(!(1&R.ka)),0>=pe||0>=_e?0:(pe=q.Ib(R,q),q.Jb!=null&&q.Jb(R,q,pe),q.Dc+=pe,1)}function Ra(R){R.ma.memory=null}function Xa(R,q,pe,_e){return tn(R,8)!=47?0:(q[0]=tn(R,14)+1,pe[0]=tn(R,14)+1,_e[0]=tn(R,1),tn(R,3)!=0?0:!R.h)}function Ul(R,q){if(4>R)return R+1;var pe=R-2>>1;return(2+(1&R)<<pe)+tn(q,pe)+1}function $l(R,q){return 120<q?q-120:1<=(pe=((pe=wg[q-1])>>4)*R+(8-(15&pe)))?pe:1;var pe}function ha(R,q,pe){var _e=Nt(pe),Ue=R[q+=255&_e].g-8;return 0<Ue&&(Xt(pe,pe.u+8),_e=Nt(pe),q+=R[q].value,q+=_e&(1<<Ue)-1),Xt(pe,pe.u+R[q].g),R[q].value}function vo(R,q,pe){return pe.g+=R.g,pe.value+=R.value<<q>>>0,k(8>=pe.g),R.g}function Za(R,q,pe){var _e=R.xc;return k((q=_e==0?0:R.vc[R.md*(pe>>_e)+(q>>_e)])<R.Wb),R.Ya[q]}function Hc(R,q,pe,_e){var Ue=R.ab,Ke=R.c*q,ze=R.C;q=ze+q;var Xe=pe,tt=_e;for(_e=R.Ta,pe=R.Ua;0<Ue--;){var vt=R.gc[Ue],$t=ze,dr=q,gt=Xe,Wt=tt,tr=(tt=_e,Xe=pe,vt.Ea);switch(k($t<dr),k(dr<=vt.nc),vt.hc){case 2:ao(gt,Wt,(dr-$t)*tr,tt,Xe);break;case 0:var Dr=$t,yr=dr,Mr=tt,Hr=Xe,an=(pi=vt).Ea;Dr==0&&(yl(gt,Wt,null,null,1,Mr,Hr),ns(gt,Wt+1,0,0,an-1,Mr,Hr+1),Wt+=an,Hr+=an,++Dr);for(var Jr=1<<pi.b,Ti=Jr-1,Qn=nn(an,pi.b),Ls=pi.K,pi=pi.w+(Dr>>pi.b)*Qn;Dr<yr;){var ca=Ls,Pl=pi,Es=1;for(nc(gt,Wt,Mr,Hr-an,1,Mr,Hr);Es<an;){var hi=(Es&~Ti)+Jr;hi>an&&(hi=an),(0,Ro[ca[Pl++]>>8&15])(gt,Wt+ +Es,Mr,Hr+Es-an,hi-Es,Mr,Hr+Es),Es=hi}Wt+=an,Hr+=an,++Dr&Ti||(pi+=Qn)}dr!=vt.nc&&G(tt,Xe-tr,tt,Xe+(dr-$t-1)*tr,tr);break;case 1:for(tr=gt,yr=Wt,an=(gt=vt.Ea)-(Hr=gt&~(Mr=(Wt=1<<vt.b)-1)),Dr=nn(gt,vt.b),Jr=vt.K,vt=vt.w+($t>>vt.b)*Dr;$t<dr;){for(Ti=Jr,Qn=vt,Ls=new Hn,pi=yr+Hr,ca=yr+gt;yr<pi;)Un(Ti[Qn++],Ls),Tf(Ls,tr,yr,Wt,tt,Xe),yr+=Wt,Xe+=Wt;yr<ca&&(Un(Ti[Qn++],Ls),Tf(Ls,tr,yr,an,tt,Xe),yr+=an,Xe+=an),++$t&Mr||(vt+=Dr)}break;case 3:if(gt==tt&&Wt==Xe&&0<vt.b){for(yr=tt,gt=tr=Xe+(dr-$t)*tr-(Hr=(dr-$t)*nn(vt.Ea,vt.b)),Wt=tt,Mr=Xe,Dr=[],Hr=(an=Hr)-1;0<=Hr;--Hr)Dr[Hr]=Wt[Mr+Hr];for(Hr=an-1;0<=Hr;--Hr)yr[gt+Hr]=Dr[Hr];zA(vt,$t,dr,tt,tr,tt,Xe)}else zA(vt,$t,dr,gt,Wt,tt,Xe)}Xe=_e,tt=pe}tt!=pe&&G(_e,pe,Xe,tt,Ke)}function Co(R,q){var pe=R.V,_e=R.Ba+R.c*R.C,Ue=q-R.C;if(k(q<=R.l.o),k(16>=Ue),0<Ue){var Ke=R.l,ze=R.Ta,Xe=R.Ua,tt=Ke.width;if(Hc(R,Ue,pe,_e),Ue=Xe=[Xe],k((pe=R.C)<(_e=q)),k(Ke.v<Ke.va),_e>Ke.o&&(_e=Ke.o),pe<Ke.j){var vt=Ke.j-pe;pe=Ke.j,Ue[0]+=vt*tt}if(pe>=_e?pe=0:(Ue[0]+=4*Ke.v,Ke.ka=pe-Ke.j,Ke.U=Ke.va-Ke.v,Ke.T=_e-pe,pe=1),pe){if(Xe=Xe[0],11>(pe=R.ca).S){var $t=pe.f.RGBA,dr=(_e=pe.S,Ue=Ke.U,Ke=Ke.T,vt=$t.eb,$t.A),gt=Ke;for($t=$t.fb+R.Ma*$t.A;0<gt--;){var Wt=ze,tr=Xe,Dr=Ue,yr=vt,Mr=$t;switch(_e){case lA:Sd(Wt,tr,Dr,yr,Mr);break;case ap:Ji(Wt,tr,Dr,yr,Mr);break;case xg:Ji(Wt,tr,Dr,yr,Mr),Kh(yr,Mr,0,Dr,1,0);break;case vg:Th(Wt,tr,Dr,yr,Mr);break;case GA:xi(Wt,tr,Dr,yr,Mr,1);break;case op:xi(Wt,tr,Dr,yr,Mr,1),Kh(yr,Mr,0,Dr,1,0);break;case Bl:xi(Wt,tr,Dr,yr,Mr,0);break;case cA:xi(Wt,tr,Dr,yr,Mr,0),Kh(yr,Mr,1,Dr,1,0);break;case Cf:fa(Wt,tr,Dr,yr,Mr);break;case bg:fa(Wt,tr,Dr,yr,Mr),np(yr,Mr,Dr,1,0);break;case yg:xo(Wt,tr,Dr,yr,Mr);break;default:k(0)}Xe+=tt,$t+=dr}R.Ma+=Ke}else alert("todo:EmitRescaledRowsYUVA");k(R.Ma<=pe.height)}}R.C=q,k(R.C<=R.i)}function pc(R){var q;if(0<R.ua)return 0;for(q=0;q<R.Wb;++q){var pe=R.Ya[q].G,_e=R.Ya[q].H;if(0<pe[1][_e[1]+0].g||0<pe[2][_e[2]+0].g||0<pe[3][_e[3]+0].g)return 0}return 1}function Ka(R,q,pe,_e,Ue,Ke){if(R.Z!=0){var ze=R.qd,Xe=R.rd;for(k(jh[R.Z]!=null);q<pe;++q)jh[R.Z](ze,Xe,_e,Ue,_e,Ue,Ke),ze=_e,Xe=Ue,Ue+=Ke;R.qd=ze,R.rd=Xe}}function Hl(R,q){var pe=R.l.ma,_e=pe.Z==0||pe.Z==1?R.l.j:R.C;if(_e=R.C<_e?_e:R.C,k(q<=R.l.o),q>_e){var Ue=R.l.width,Ke=pe.ca,ze=pe.tb+Ue*_e,Xe=R.V,tt=R.Ba+R.c*_e,vt=R.gc;k(R.ab==1),k(vt[0].hc==3),Gc(vt[0],_e,q,Xe,tt,Ke,ze),Ka(pe,_e,q,Ke,ze,Ue)}R.C=R.Ma=q}function Ql(R,q,pe,_e,Ue,Ke,ze){var Xe=R.$/_e,tt=R.$%_e,vt=R.m,$t=R.s,dr=pe+R.$,gt=dr;Ue=pe+_e*Ue;var Wt=pe+_e*Ke,tr=280+$t.ua,Dr=R.Pb?Xe:16777216,yr=0<$t.ua?$t.Wa:null,Mr=$t.wc,Hr=dr<Wt?Za($t,tt,Xe):null;k(R.C<Ke),k(Wt<=Ue);var an=!1;e:for(;;){for(;an||dr<Wt;){var Jr=0;if(Xe>=Dr){var Ti=dr-pe;k((Dr=R).Pb),Dr.wd=Dr.m,Dr.xd=Ti,0<Dr.s.ua&&Sn(Dr.s.Wa,Dr.s.vb),Dr=Xe+q0}if(tt&Mr||(Hr=Za($t,tt,Xe)),k(Hr!=null),Hr.Qb&&(q[dr]=Hr.qb,an=!0),!an)if(cr(vt),Hr.jc){Jr=vt,Ti=q;var Qn=dr,Ls=Hr.pd[Nt(Jr)&ks-1];k(Hr.jc),256>Ls.g?(Xt(Jr,Jr.u+Ls.g),Ti[Qn]=Ls.value,Jr=0):(Xt(Jr,Jr.u+Ls.g-256),k(256<=Ls.value),Jr=Ls.value),Jr==0&&(an=!0)}else Jr=ha(Hr.G[0],Hr.H[0],vt);if(vt.h)break;if(an||256>Jr){if(!an)if(Hr.nd)q[dr]=(Hr.qb|Jr<<8)>>>0;else{if(cr(vt),an=ha(Hr.G[1],Hr.H[1],vt),cr(vt),Ti=ha(Hr.G[2],Hr.H[2],vt),Qn=ha(Hr.G[3],Hr.H[3],vt),vt.h)break;q[dr]=(Qn<<24|an<<16|Jr<<8|Ti)>>>0}if(an=!1,++dr,++tt>=_e&&(tt=0,++Xe,ze!=null&&Xe<=Ke&&!(Xe%16)&&ze(R,Xe),yr!=null))for(;gt<dr;)Jr=q[gt++],yr.X[(506832829*Jr&4294967295)>>>yr.Mb]=Jr}else if(280>Jr){if(Jr=Ul(Jr-256,vt),Ti=ha(Hr.G[4],Hr.H[4],vt),cr(vt),Ti=$l(_e,Ti=Ul(Ti,vt)),vt.h)break;if(dr-pe<Ti||Ue-dr<Jr)break e;for(Qn=0;Qn<Jr;++Qn)q[dr+Qn]=q[dr+Qn-Ti];for(dr+=Jr,tt+=Jr;tt>=_e;)tt-=_e,++Xe,ze!=null&&Xe<=Ke&&!(Xe%16)&&ze(R,Xe);if(k(dr<=Ue),tt&Mr&&(Hr=Za($t,tt,Xe)),yr!=null)for(;gt<dr;)Jr=q[gt++],yr.X[(506832829*Jr&4294967295)>>>yr.Mb]=Jr}else{if(!(Jr<tr))break e;for(an=Jr-280,k(yr!=null);gt<dr;)Jr=q[gt++],yr.X[(506832829*Jr&4294967295)>>>yr.Mb]=Jr;Jr=dr,k(!(an>>>(Ti=yr).Xa)),q[Jr]=Ti.X[an],an=!0}an||k(vt.h==Gt(vt))}if(R.Pb&&vt.h&&dr<Ue)k(R.m.h),R.a=5,R.m=R.wd,R.$=R.xd,0<R.s.ua&&Sn(R.s.vb,R.s.Wa);else{if(vt.h)break e;ze?.(R,Xe>Ke?Ke:Xe),R.a=0,R.$=dr-pe}return 1}return R.a=3,0}function Il(R){k(R!=null),R.vc=null,R.yc=null,R.Ya=null;var q=R.Wa;q!=null&&(q.X=null),R.vb=null,k(R!=null)}function yd(){var R=new Yi;return R==null?null:(R.a=0,R.xb=up,Ys("Predictor","VP8LPredictors"),Ys("Predictor","VP8LPredictors_C"),Ys("PredictorAdd","VP8LPredictorsAdd"),Ys("PredictorAdd","VP8LPredictorsAdd_C"),ao=_i,Tf=ki,Sd=Gi,Ji=is,fa=Zi,xo=vs,Th=ja,Mt.VP8LMapColor32b=uh,Mt.VP8LMapColor8b=Wc,R)}function ec(R,q,pe,_e,Ue){var Ke=1,ze=[R],Xe=[q],tt=_e.m,vt=_e.s,$t=null,dr=0;e:for(;;){if(pe)for(;Ke&&tn(tt,1);){var gt=ze,Wt=Xe,tr=_e,Dr=1,yr=tr.m,Mr=tr.gc[tr.ab],Hr=tn(yr,2);if(tr.Oc&1<<Hr)Ke=0;else{switch(tr.Oc|=1<<Hr,Mr.hc=Hr,Mr.Ea=gt[0],Mr.nc=Wt[0],Mr.K=[null],++tr.ab,k(4>=tr.ab),Hr){case 0:case 1:Mr.b=tn(yr,3)+2,Dr=ec(nn(Mr.Ea,Mr.b),nn(Mr.nc,Mr.b),0,tr,Mr.K),Mr.K=Mr.K[0];break;case 3:var an,Jr=tn(yr,8)+1,Ti=16<Jr?0:4<Jr?1:2<Jr?2:3;if(gt[0]=nn(Mr.Ea,Ti),Mr.b=Ti,an=Dr=ec(Jr,1,0,tr,Mr.K)){var Qn,Ls=Jr,pi=Mr,ca=1<<(8>>pi.b),Pl=ee(ca);if(Pl==null)an=0;else{var Es=pi.K[0],hi=pi.w;for(Pl[0]=pi.K[0][0],Qn=1;Qn<1*Ls;++Qn)Pl[Qn]=ji(Es[hi+Qn],Pl[Qn-1]);for(;Qn<4*ca;++Qn)Pl[Qn]=0;pi.K[0]=null,pi.K[0]=Pl,an=1}}Dr=an;break;case 2:break;default:k(0)}Ke=Dr}}if(ze=ze[0],Xe=Xe[0],Ke&&tn(tt,1)&&!(Ke=1<=(dr=tn(tt,4))&&11>=dr)){_e.a=3;break e}var Bn;if(Bn=Ke)t:{var sl,_s,Rs,bo=_e,ic=ze,Sc=Xe,$a=dr,Tc=pe,lu=bo.m,al=bo.s,aa=[null],zi=1,bl=0,eo=Eg[$a];r:for(;;){if(Tc&&tn(lu,1)){var Cc=tn(lu,3)+2,qc=nn(ic,Cc),oo=nn(Sc,Cc),Xc=qc*oo;if(!ec(qc,oo,0,bo,aa))break r;for(aa=aa[0],al.xc=Cc,sl=0;sl<Xc;++sl){var lo=aa[sl]>>8&65535;aa[sl]=lo,lo>=zi&&(zi=lo+1)}}if(lu.h)break r;for(_s=0;5>_s;++_s){var fn=Y0[_s];!_s&&0<$a&&(fn+=1<<$a),bl<fn&&(bl=fn)}var wo=ye(zi*eo,Ot),sc=zi,No=ye(sc,Ar);if(No==null)var ed=null;else k(65536>=sc),ed=No;var bs=ee(bl);if(ed==null||bs==null||wo==null){bo.a=1;break r}var Js=wo;for(sl=Rs=0;sl<zi;++sl){var ka=ed[sl],td=ka.G,wl=ka.H,ko=0,rd=1,jc=0;for(_s=0;5>_s;++_s){fn=Y0[_s],td[_s]=Js,wl[_s]=Rs,!_s&&0<$a&&(fn+=1<<$a);i:{var Ol,Pg=fn,mp=bo,dA=bs,qo=Js,ju=Rs,Kd=0,hh=mp.m,rv=tn(hh,1);if(X(dA,0,0,Pg),rv){var Dy=tn(hh,1)+1,My=tn(hh,1),pp=tn(hh,My==0?1:8);dA[pp]=1,Dy==2&&(dA[pp=tn(hh,8)]=1);var Zc=1}else{var Gd=ee(19),JA=tn(hh,4)+4;if(19<JA){mp.a=3;var co=0;break i}for(Ol=0;Ol<JA;++Ol)Gd[Iy[Ol]]=tn(hh,3);var gp=void 0,cu=void 0,Nf=mp,Wh=Gd,kf=Pg,Yh=dA,uu=0,qh=Nf.m,Wd=8,em=ye(128,Ot);n:for(;mt(em,0,7,Wh,19);){if(tn(qh,1)){var vp=2+2*tn(qh,3);if((gp=2+tn(qh,vp))>kf)break n}else gp=kf;for(cu=0;cu<kf&&gp--;){cr(qh);var If=em[0+(127&Nt(qh))];Xt(qh,qh.u+If.g);var hA=If.value;if(16>hA)Yh[cu++]=hA,hA!=0&&(Wd=hA);else{var nv=hA==16,tm=hA-16,Fy=_1[tm],yp=tn(qh,ky[tm])+Fy;if(cu+yp>kf)break n;for(var Uy=nv?Wd:0;0<yp--;)Yh[cu++]=Uy}}uu=1;break n}uu||(Nf.a=3),Zc=uu}(Zc=Zc&&!hh.h)&&(Kd=mt(qo,ju,8,dA,Pg)),Zc&&Kd!=0?co=Kd:(mp.a=3,co=0)}if(co==0)break r;if(rd&&WA[_s]==1&&(rd=Js[Rs].g==0),ko+=Js[Rs].g,Rs+=co,3>=_s){var xp,iv=bs[0];for(xp=1;xp<fn;++xp)bs[xp]>iv&&(iv=bs[xp]);jc+=iv}}if(ka.nd=rd,ka.Qb=0,rd&&(ka.qb=(td[3][wl[3]+0].value<<24|td[1][wl[1]+0].value<<16|td[2][wl[2]+0].value)>>>0,ko==0&&256>td[0][wl[0]+0].value&&(ka.Qb=1,ka.qb+=td[0][wl[0]+0].value<<8)),ka.jc=!ka.Qb&&6>jc,ka.jc){var va,Aa=ka;for(va=0;va<ks;++va){var Ss=va,Bs=Aa.pd[Ss],Ia=Aa.G[0][Aa.H[0]+Ss];256<=Ia.value?(Bs.g=Ia.g+256,Bs.value=Ia.value):(Bs.g=0,Bs.value=0,Ss>>=vo(Ia,8,Bs),Ss>>=vo(Aa.G[1][Aa.H[1]+Ss],16,Bs),Ss>>=vo(Aa.G[2][Aa.H[2]+Ss],0,Bs),vo(Aa.G[3][Aa.H[3]+Ss],24,Bs))}}}al.vc=aa,al.Wb=zi,al.Ya=ed,al.yc=wo,Bn=1;break t}Bn=0}if(!(Ke=Bn)){_e.a=3;break e}if(0<dr){if(vt.ua=1<<dr,!pt(vt.Wa,dr)){_e.a=1,Ke=0;break e}}else vt.ua=0;var Nu=_e,Xh=ze,rm=Xe,M=Nu.s,B=M.xc;if(Nu.c=Xh,Nu.i=rm,M.md=nn(Xh,B),M.wc=B==0?-1:(1<<B)-1,pe){_e.xb=Py;break e}if(($t=ee(ze*Xe))==null){_e.a=1,Ke=0;break e}Ke=(Ke=Ql(_e,$t,0,ze,Xe,Xe,null))&&!tt.h;break e}return Ke?(Ue!=null?Ue[0]=$t:(k($t==null),k(pe)),_e.$=0,pe||Il(vt)):Il(vt),Ke}function Vl(R,q){var pe=R.c*R.i,_e=pe+q+16*q;return k(R.c<=q),R.V=ee(_e),R.V==null?(R.Ta=null,R.Ua=0,R.a=1,0):(R.Ta=R.V,R.Ua=R.Ba+pe+q,1)}function gc(R,q){var pe=R.C,_e=q-pe,Ue=R.V,Ke=R.Ba+R.c*pe;for(k(q<=R.l.o);0<_e;){var ze=16<_e?16:_e,Xe=R.l.ma,tt=R.l.width,vt=tt*ze,$t=Xe.ca,dr=Xe.tb+tt*pe,gt=R.Ta,Wt=R.Ua;Hc(R,ze,Ue,Ke),Vd(gt,Wt,$t,dr,vt),Ka(Xe,pe,pe+ze,$t,dr,tt),_e-=ze,Ue+=ze*R.c,pe+=ze}k(pe==q),R.C=R.Ma=q}function xd(){this.ub=this.yd=this.td=this.Rb=0}function zl(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Kl(){this.Fb=this.Bb=this.Cb=0,this.Zb=ee(4),this.Lb=ee(4)}function Eu(){this.Yb=(function(){var R=[];return(function q(pe,_e,Ue){for(var Ke=Ue[_e],ze=0;ze<Ke&&(pe.push(Ue.length>_e+1?[]:0),!(Ue.length<_e+1));ze++)q(pe[ze],_e+1,Ue)})(R,0,[3,11]),R})()}function Gl(){this.jb=ee(3),this.Wc=he([4,8],Eu),this.Xc=he([4,17],Eu)}function Lo(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new ee(4),this.od=new ee(4)}function gl(){this.ld=this.La=this.dd=this.tc=0}function iu(){this.Na=this.la=0}function vc(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Hd(){this.ad=ee(384),this.Za=0,this.Ob=ee(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function tc(){this.uc=this.M=this.Nb=0,this.wa=Array(new gl),this.Y=0,this.ya=Array(new Hd),this.aa=0,this.l=new sh}function Gu(){this.y=ee(16),this.f=ee(8),this.ea=ee(8)}function bd(){this.cb=this.a=0,this.sc="",this.m=new We,this.Od=new xd,this.Kc=new zl,this.ed=new Lo,this.Qa=new Kl,this.Ic=this.$c=this.Aa=0,this.D=new tc,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=ye(8,We),this.ia=0,this.pb=ye(4,vc),this.Pa=new Gl,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Gu),this.Hd=0,this.rb=Array(new iu),this.sb=0,this.wa=Array(new gl),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Hd),this.L=this.aa=0,this.gd=he([4,2],gl),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function vl(R,q){return 0>R?0:R>q?q:R}function sh(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Ll(){var R=new bd;return R!=null&&(R.a=0,R.sc="OK",R.cb=0,R.Xb=0,uA||(uA=Vc)),R}function Fi(R,q,pe){return R.a==0&&(R.a=q,R.sc=pe,R.cb=0),0}function yc(R,q,pe){return 3<=pe&&R[q+0]==157&&R[q+1]==1&&R[q+2]==42}function Qc(R,q){if(R==null)return 0;if(R.a=0,R.sc="OK",q==null)return Fi(R,2,"null VP8Io passed to VP8GetHeaders()");var pe=q.data,_e=q.w,Ue=q.ha;if(4>Ue)return Fi(R,7,"Truncated header.");var Ke=pe[_e+0]|pe[_e+1]<<8|pe[_e+2]<<16,ze=R.Od;if(ze.Rb=!(1&Ke),ze.td=Ke>>1&7,ze.yd=Ke>>4&1,ze.ub=Ke>>5,3<ze.td)return Fi(R,3,"Incorrect keyframe parameters.");if(!ze.yd)return Fi(R,4,"Frame not displayable.");_e+=3,Ue-=3;var Xe=R.Kc;if(ze.Rb){if(7>Ue)return Fi(R,7,"cannot parse picture header");if(!yc(pe,_e,Ue))return Fi(R,3,"Bad code word");Xe.c=16383&(pe[_e+4]<<8|pe[_e+3]),Xe.Td=pe[_e+4]>>6,Xe.i=16383&(pe[_e+6]<<8|pe[_e+5]),Xe.Ud=pe[_e+6]>>6,_e+=7,Ue-=7,R.za=Xe.c+15>>4,R.Ub=Xe.i+15>>4,q.width=Xe.c,q.height=Xe.i,q.Da=0,q.j=0,q.v=0,q.va=q.width,q.o=q.height,q.da=0,q.ib=q.width,q.hb=q.height,q.U=q.width,q.T=q.height,X((Ke=R.Pa).jb,0,255,Ke.jb.length),k((Ke=R.Qa)!=null),Ke.Cb=0,Ke.Bb=0,Ke.Fb=1,X(Ke.Zb,0,0,Ke.Zb.length),X(Ke.Lb,0,0,Ke.Lb)}if(ze.ub>Ue)return Fi(R,7,"bad partition length");jr(Ke=R.m,pe,_e,ze.ub),_e+=ze.ub,Ue-=ze.ub,ze.Rb&&(Xe.Ld=Cr(Ke),Xe.Kd=Cr(Ke)),Xe=R.Qa;var tt,vt=R.Pa;if(k(Ke!=null),k(Xe!=null),Xe.Cb=Cr(Ke),Xe.Cb){if(Xe.Bb=Cr(Ke),Cr(Ke)){for(Xe.Fb=Cr(Ke),tt=0;4>tt;++tt)Xe.Zb[tt]=Cr(Ke)?ar(Ke,7):0;for(tt=0;4>tt;++tt)Xe.Lb[tt]=Cr(Ke)?ar(Ke,6):0}if(Xe.Bb)for(tt=0;3>tt;++tt)vt.jb[tt]=Cr(Ke)?Br(Ke,8):255}else Xe.Bb=0;if(Ke.Ka)return Fi(R,3,"cannot parse segment header");if((Xe=R.ed).zd=Cr(Ke),Xe.Tb=Br(Ke,6),Xe.wb=Br(Ke,3),Xe.Pc=Cr(Ke),Xe.Pc&&Cr(Ke)){for(vt=0;4>vt;++vt)Cr(Ke)&&(Xe.vd[vt]=ar(Ke,6));for(vt=0;4>vt;++vt)Cr(Ke)&&(Xe.od[vt]=ar(Ke,6))}if(R.L=Xe.Tb==0?0:Xe.zd?1:2,Ke.Ka)return Fi(R,3,"cannot parse filter header");var $t=Ue;if(Ue=tt=_e,_e=tt+$t,Xe=$t,R.Xb=(1<<Br(R.m,2))-1,$t<3*(vt=R.Xb))pe=7;else{for(tt+=3*vt,Xe-=3*vt,$t=0;$t<vt;++$t){var dr=pe[Ue+0]|pe[Ue+1]<<8|pe[Ue+2]<<16;dr>Xe&&(dr=Xe),jr(R.Jc[+$t],pe,tt,dr),tt+=dr,Xe-=dr,Ue+=3}jr(R.Jc[+vt],pe,tt,Xe),pe=tt<_e?0:5}if(pe!=0)return Fi(R,pe,"cannot parse partitions");for(pe=Br(tt=R.m,7),Ue=Cr(tt)?ar(tt,4):0,_e=Cr(tt)?ar(tt,4):0,Xe=Cr(tt)?ar(tt,4):0,vt=Cr(tt)?ar(tt,4):0,tt=Cr(tt)?ar(tt,4):0,$t=R.Qa,dr=0;4>dr;++dr){if($t.Cb){var gt=$t.Zb[dr];$t.Fb||(gt+=pe)}else{if(0<dr){R.pb[dr]=R.pb[0];continue}gt=pe}var Wt=R.pb[dr];Wt.Sc[0]=YA[vl(gt+Ue,127)],Wt.Sc[1]=_g[vl(gt+0,127)],Wt.Eb[0]=2*YA[vl(gt+_e,127)],Wt.Eb[1]=101581*_g[vl(gt+Xe,127)]>>16,8>Wt.Eb[1]&&(Wt.Eb[1]=8),Wt.Qc[0]=YA[vl(gt+vt,117)],Wt.Qc[1]=_g[vl(gt+tt,127)],Wt.lc=gt+tt}if(!ze.Rb)return Fi(R,4,"Not a key frame.");for(Cr(Ke),ze=R.Pa,pe=0;4>pe;++pe){for(Ue=0;8>Ue;++Ue)for(_e=0;3>_e;++_e)for(Xe=0;11>Xe;++Xe)vt=Gr(Ke,lp[pe][Ue][_e][Xe])?Br(Ke,8):By[pe][Ue][_e][Xe],ze.Wc[pe][Ue].Yb[_e][Xe]=vt;for(Ue=0;17>Ue;++Ue)ze.Xc[pe][Ue]=ze.Wc[pe][cp[Ue]]}return R.kc=Cr(Ke),R.kc&&(R.Bd=Br(Ke,8)),R.cb=1}function Vc(R,q,pe,_e,Ue,Ke,ze){var Xe=q[Ue].Yb[pe];for(pe=0;16>Ue;++Ue){if(!Gr(R,Xe[pe+0]))return Ue;for(;!Gr(R,Xe[pe+1]);)if(Xe=q[++Ue].Yb[0],pe=0,Ue==16)return 16;var tt=q[Ue+1].Yb;if(Gr(R,Xe[pe+2])){var vt=R,$t=0;if(Gr(vt,(gt=Xe)[(dr=pe)+3]))if(Gr(vt,gt[dr+6])){for(Xe=0,dr=2*($t=Gr(vt,gt[dr+8]))+(gt=Gr(vt,gt[dr+9+$t])),$t=0,gt=Sg[dr];gt[Xe];++Xe)$t+=$t+Gr(vt,gt[Xe]);$t+=3+(8<<dr)}else Gr(vt,gt[dr+7])?($t=7+2*Gr(vt,165),$t+=Gr(vt,145)):$t=5+Gr(vt,159);else $t=Gr(vt,gt[dr+4])?3+Gr(vt,gt[dr+5]):2;Xe=tt[2]}else $t=1,Xe=tt[1];tt=ze+Ly[Ue],0>(vt=R).b&&Nr(vt);var dr,gt=vt.b,Wt=(dr=vt.Ca>>1)-(vt.I>>gt)>>31;--vt.b,vt.Ca+=Wt,vt.Ca|=1,vt.I-=(dr+1&Wt)<<gt,Ke[tt]=(($t^Wt)-Wt)*_e[(0<Ue)+0]}return 16}function Wu(R){var q=R.rb[R.sb-1];q.la=0,q.Na=0,X(R.zc,0,0,R.zc.length),R.ja=0}function xc(R,q,pe,_e,Ue){Ue=R[q+pe+32*_e]+(Ue>>3),R[q+pe+32*_e]=-256&Ue?0>Ue?0:255:Ue}function Bo(R,q,pe,_e,Ue,Ke){xc(R,q,0,pe,_e+Ue),xc(R,q,1,pe,_e+Ke),xc(R,q,2,pe,_e-Ke),xc(R,q,3,pe,_e-Ue)}function su(R){return(20091*R>>16)+R}function v(R,q,pe,_e){var Ue,Ke=0,ze=ee(16);for(Ue=0;4>Ue;++Ue){var Xe=R[q+0]+R[q+8],tt=R[q+0]-R[q+8],vt=(35468*R[q+4]>>16)-su(R[q+12]),$t=su(R[q+4])+(35468*R[q+12]>>16);ze[Ke+0]=Xe+$t,ze[Ke+1]=tt+vt,ze[Ke+2]=tt-vt,ze[Ke+3]=Xe-$t,Ke+=4,q++}for(Ue=Ke=0;4>Ue;++Ue)Xe=(R=ze[Ke+0]+4)+ze[Ke+8],tt=R-ze[Ke+8],vt=(35468*ze[Ke+4]>>16)-su(ze[Ke+12]),xc(pe,_e,0,0,Xe+($t=su(ze[Ke+4])+(35468*ze[Ke+12]>>16))),xc(pe,_e,1,0,tt+vt),xc(pe,_e,2,0,tt-vt),xc(pe,_e,3,0,Xe-$t),Ke++,_e+=32}function _(R,q,pe,_e){var Ue=R[q+0]+4,Ke=35468*R[q+4]>>16,ze=su(R[q+4]),Xe=35468*R[q+1]>>16;Bo(pe,_e,0,Ue+ze,R=su(R[q+1]),Xe),Bo(pe,_e,1,Ue+Ke,R,Xe),Bo(pe,_e,2,Ue-Ke,R,Xe),Bo(pe,_e,3,Ue-ze,R,Xe)}function H(R,q,pe,_e,Ue){v(R,q,pe,_e),Ue&&v(R,q+16,pe,_e+4)}function oe(R,q,pe,_e){Td(R,q+0,pe,_e,1),Td(R,q+32,pe,_e+128,1)}function Ee(R,q,pe,_e){var Ue;for(R=R[q+0]+4,Ue=0;4>Ue;++Ue)for(q=0;4>q;++q)xc(pe,_e,q,Ue,R)}function Ve(R,q,pe,_e){R[q+0]&&sa(R,q+0,pe,_e),R[q+16]&&sa(R,q+16,pe,_e+4),R[q+32]&&sa(R,q+32,pe,_e+128),R[q+48]&&sa(R,q+48,pe,_e+128+4)}function jt(R,q,pe,_e){var Ue,Ke=ee(16);for(Ue=0;4>Ue;++Ue){var ze=R[q+0+Ue]+R[q+12+Ue],Xe=R[q+4+Ue]+R[q+8+Ue],tt=R[q+4+Ue]-R[q+8+Ue],vt=R[q+0+Ue]-R[q+12+Ue];Ke[0+Ue]=ze+Xe,Ke[8+Ue]=ze-Xe,Ke[4+Ue]=vt+tt,Ke[12+Ue]=vt-tt}for(Ue=0;4>Ue;++Ue)ze=(R=Ke[0+4*Ue]+3)+Ke[3+4*Ue],Xe=Ke[1+4*Ue]+Ke[2+4*Ue],tt=Ke[1+4*Ue]-Ke[2+4*Ue],vt=R-Ke[3+4*Ue],pe[_e+0]=ze+Xe>>3,pe[_e+16]=vt+tt>>3,pe[_e+32]=ze-Xe>>3,pe[_e+48]=vt-tt>>3,_e+=64}function Jt(R,q,pe){var _e,Ue=q-32,Ke=Ju,ze=255-R[Ue-1];for(_e=0;_e<pe;++_e){var Xe,tt=Ke,vt=ze+R[q-1];for(Xe=0;Xe<pe;++Xe)R[q+Xe]=tt[vt+R[Ue+Xe]];q+=32}}function br(R,q){Jt(R,q,4)}function Vr(R,q){Jt(R,q,8)}function vn(R,q){Jt(R,q,16)}function ui(R,q){var pe;for(pe=0;16>pe;++pe)G(R,q+32*pe,R,q-32,16)}function As(R,q){var pe;for(pe=16;0<pe;--pe)X(R,q,R[q-1],16),q+=32}function Da(R,q,pe){var _e;for(_e=0;16>_e;++_e)X(q,pe+32*_e,R,16)}function jo(R,q){var pe,_e=16;for(pe=0;16>pe;++pe)_e+=R[q-1+32*pe]+R[q+pe-32];Da(_e>>5,R,q)}function il(R,q){var pe,_e=8;for(pe=0;16>pe;++pe)_e+=R[q-1+32*pe];Da(_e>>4,R,q)}function Zs(R,q){var pe,_e=8;for(pe=0;16>pe;++pe)_e+=R[q+pe-32];Da(_e>>4,R,q)}function la(R,q){Da(128,R,q)}function jn(R,q,pe){return R+2*q+pe+2>>2}function Yu(R,q){var pe,_e=q-32;for(_e=new Uint8Array([jn(R[_e-1],R[_e+0],R[_e+1]),jn(R[_e+0],R[_e+1],R[_e+2]),jn(R[_e+1],R[_e+2],R[_e+3]),jn(R[_e+2],R[_e+3],R[_e+4])]),pe=0;4>pe;++pe)G(R,q+32*pe,_e,0,_e.length)}function bc(R,q){var pe=R[q-1],_e=R[q-1+32],Ue=R[q-1+64],Ke=R[q-1+96];un(R,q+0,16843009*jn(R[q-1-32],pe,_e)),un(R,q+32,16843009*jn(pe,_e,Ue)),un(R,q+64,16843009*jn(_e,Ue,Ke)),un(R,q+96,16843009*jn(Ue,Ke,Ke))}function wd(R,q){var pe,_e=4;for(pe=0;4>pe;++pe)_e+=R[q+pe-32]+R[q-1+32*pe];for(_e>>=3,pe=0;4>pe;++pe)X(R,q+32*pe,_e,4)}function Wl(R,q){var pe=R[q-1+0],_e=R[q-1+32],Ue=R[q-1+64],Ke=R[q-1-32],ze=R[q+0-32],Xe=R[q+1-32],tt=R[q+2-32],vt=R[q+3-32];R[q+0+96]=jn(_e,Ue,R[q-1+96]),R[q+1+96]=R[q+0+64]=jn(pe,_e,Ue),R[q+2+96]=R[q+1+64]=R[q+0+32]=jn(Ke,pe,_e),R[q+3+96]=R[q+2+64]=R[q+1+32]=R[q+0+0]=jn(ze,Ke,pe),R[q+3+64]=R[q+2+32]=R[q+1+0]=jn(Xe,ze,Ke),R[q+3+32]=R[q+2+0]=jn(tt,Xe,ze),R[q+3+0]=jn(vt,tt,Xe)}function _u(R,q){var pe=R[q+1-32],_e=R[q+2-32],Ue=R[q+3-32],Ke=R[q+4-32],ze=R[q+5-32],Xe=R[q+6-32],tt=R[q+7-32];R[q+0+0]=jn(R[q+0-32],pe,_e),R[q+1+0]=R[q+0+32]=jn(pe,_e,Ue),R[q+2+0]=R[q+1+32]=R[q+0+64]=jn(_e,Ue,Ke),R[q+3+0]=R[q+2+32]=R[q+1+64]=R[q+0+96]=jn(Ue,Ke,ze),R[q+3+32]=R[q+2+64]=R[q+1+96]=jn(Ke,ze,Xe),R[q+3+64]=R[q+2+96]=jn(ze,Xe,tt),R[q+3+96]=jn(Xe,tt,tt)}function so(R,q){var pe=R[q-1+0],_e=R[q-1+32],Ue=R[q-1+64],Ke=R[q-1-32],ze=R[q+0-32],Xe=R[q+1-32],tt=R[q+2-32],vt=R[q+3-32];R[q+0+0]=R[q+1+64]=Ke+ze+1>>1,R[q+1+0]=R[q+2+64]=ze+Xe+1>>1,R[q+2+0]=R[q+3+64]=Xe+tt+1>>1,R[q+3+0]=tt+vt+1>>1,R[q+0+96]=jn(Ue,_e,pe),R[q+0+64]=jn(_e,pe,Ke),R[q+0+32]=R[q+1+96]=jn(pe,Ke,ze),R[q+1+32]=R[q+2+96]=jn(Ke,ze,Xe),R[q+2+32]=R[q+3+96]=jn(ze,Xe,tt),R[q+3+32]=jn(Xe,tt,vt)}function Su(R,q){var pe=R[q+0-32],_e=R[q+1-32],Ue=R[q+2-32],Ke=R[q+3-32],ze=R[q+4-32],Xe=R[q+5-32],tt=R[q+6-32],vt=R[q+7-32];R[q+0+0]=pe+_e+1>>1,R[q+1+0]=R[q+0+64]=_e+Ue+1>>1,R[q+2+0]=R[q+1+64]=Ue+Ke+1>>1,R[q+3+0]=R[q+2+64]=Ke+ze+1>>1,R[q+0+32]=jn(pe,_e,Ue),R[q+1+32]=R[q+0+96]=jn(_e,Ue,Ke),R[q+2+32]=R[q+1+96]=jn(Ue,Ke,ze),R[q+3+32]=R[q+2+96]=jn(Ke,ze,Xe),R[q+3+64]=jn(ze,Xe,tt),R[q+3+96]=jn(Xe,tt,vt)}function Go(R,q){var pe=R[q-1+0],_e=R[q-1+32],Ue=R[q-1+64],Ke=R[q-1+96];R[q+0+0]=pe+_e+1>>1,R[q+2+0]=R[q+0+32]=_e+Ue+1>>1,R[q+2+32]=R[q+0+64]=Ue+Ke+1>>1,R[q+1+0]=jn(pe,_e,Ue),R[q+3+0]=R[q+1+32]=jn(_e,Ue,Ke),R[q+3+32]=R[q+1+64]=jn(Ue,Ke,Ke),R[q+3+64]=R[q+2+64]=R[q+0+96]=R[q+1+96]=R[q+2+96]=R[q+3+96]=Ke}function Ed(R,q){var pe=R[q-1+0],_e=R[q-1+32],Ue=R[q-1+64],Ke=R[q-1+96],ze=R[q-1-32],Xe=R[q+0-32],tt=R[q+1-32],vt=R[q+2-32];R[q+0+0]=R[q+2+32]=pe+ze+1>>1,R[q+0+32]=R[q+2+64]=_e+pe+1>>1,R[q+0+64]=R[q+2+96]=Ue+_e+1>>1,R[q+0+96]=Ke+Ue+1>>1,R[q+3+0]=jn(Xe,tt,vt),R[q+2+0]=jn(ze,Xe,tt),R[q+1+0]=R[q+3+32]=jn(pe,ze,Xe),R[q+1+32]=R[q+3+64]=jn(_e,pe,ze),R[q+1+64]=R[q+3+96]=jn(Ue,_e,pe),R[q+1+96]=jn(Ke,Ue,_e)}function wc(R,q){var pe;for(pe=0;8>pe;++pe)G(R,q+32*pe,R,q-32,8)}function Qd(R,q){var pe;for(pe=0;8>pe;++pe)X(R,q,R[q-1],8),q+=32}function Yl(R,q,pe){var _e;for(_e=0;8>_e;++_e)X(q,pe+32*_e,R,8)}function Tu(R,q){var pe,_e=8;for(pe=0;8>pe;++pe)_e+=R[q+pe-32]+R[q-1+32*pe];Yl(_e>>4,R,q)}function Ec(R,q){var pe,_e=4;for(pe=0;8>pe;++pe)_e+=R[q+pe-32];Yl(_e>>3,R,q)}function zc(R,q){var pe,_e=4;for(pe=0;8>pe;++pe)_e+=R[q-1+32*pe];Yl(_e>>3,R,q)}function Eh(R,q){Yl(128,R,q)}function au(R,q,pe){var _e=R[q-pe],Ue=R[q+0],Ke=3*(Ue-_e)+gg[1020+R[q-2*pe]-R[q+pe]],ze=sp[112+(Ke+4>>3)];R[q-pe]=Ju[255+_e+sp[112+(Ke+3>>3)]],R[q+0]=Ju[255+Ue-ze]}function _d(R,q,pe,_e){var Ue=R[q+0],Ke=R[q+pe];return Cd[255+R[q-2*pe]-R[q-pe]]>_e||Cd[255+Ke-Ue]>_e}function ah(R,q,pe,_e){return 4*Cd[255+R[q-pe]-R[q+0]]+Cd[255+R[q-2*pe]-R[q+pe]]<=_e}function Kc(R,q,pe,_e,Ue){var Ke=R[q-3*pe],ze=R[q-2*pe],Xe=R[q-pe],tt=R[q+0],vt=R[q+pe],$t=R[q+2*pe],dr=R[q+3*pe];return 4*Cd[255+Xe-tt]+Cd[255+ze-vt]>_e?0:Cd[255+R[q-4*pe]-Ke]<=Ue&&Cd[255+Ke-ze]<=Ue&&Cd[255+ze-Xe]<=Ue&&Cd[255+dr-$t]<=Ue&&Cd[255+$t-vt]<=Ue&&Cd[255+vt-tt]<=Ue}function yo(R,q,pe,_e){var Ue=2*_e+1;for(_e=0;16>_e;++_e)ah(R,q+_e,pe,Ue)&&au(R,q+_e,pe)}function _h(R,q,pe,_e){var Ue=2*_e+1;for(_e=0;16>_e;++_e)ah(R,q+_e*pe,1,Ue)&&au(R,q+_e*pe,1)}function aA(R,q,pe,_e){var Ue;for(Ue=3;0<Ue;--Ue)yo(R,q+=4*pe,pe,_e)}function VA(R,q,pe,_e){var Ue;for(Ue=3;0<Ue;--Ue)_h(R,q+=4,pe,_e)}function oh(R,q,pe,_e,Ue,Ke,ze,Xe){for(Ke=2*Ke+1;0<Ue--;){if(Kc(R,q,pe,Ke,ze))if(_d(R,q,pe,Xe))au(R,q,pe);else{var tt=R,vt=q,$t=pe,dr=tt[vt-2*$t],gt=tt[vt-$t],Wt=tt[vt+0],tr=tt[vt+$t],Dr=tt[vt+2*$t],yr=27*(Hr=gg[1020+3*(Wt-gt)+gg[1020+dr-tr]])+63>>7,Mr=18*Hr+63>>7,Hr=9*Hr+63>>7;tt[vt-3*$t]=Ju[255+tt[vt-3*$t]+Hr],tt[vt-2*$t]=Ju[255+dr+Mr],tt[vt-$t]=Ju[255+gt+yr],tt[vt+0]=Ju[255+Wt-yr],tt[vt+$t]=Ju[255+tr-Mr],tt[vt+2*$t]=Ju[255+Dr-Hr]}q+=_e}}function lh(R,q,pe,_e,Ue,Ke,ze,Xe){for(Ke=2*Ke+1;0<Ue--;){if(Kc(R,q,pe,Ke,ze))if(_d(R,q,pe,Xe))au(R,q,pe);else{var tt=R,vt=q,$t=pe,dr=tt[vt-$t],gt=tt[vt+0],Wt=tt[vt+$t],tr=sp[112+(4+(Dr=3*(gt-dr))>>3)],Dr=sp[112+(Dr+3>>3)],yr=tr+1>>1;tt[vt-2*$t]=Ju[255+tt[vt-2*$t]+yr],tt[vt-$t]=Ju[255+dr+Dr],tt[vt+0]=Ju[255+gt-tr],tt[vt+$t]=Ju[255+Wt-yr]}q+=_e}}function Po(R,q,pe,_e,Ue,Ke){oh(R,q,pe,1,16,_e,Ue,Ke)}function ch(R,q,pe,_e,Ue,Ke){oh(R,q,1,pe,16,_e,Ue,Ke)}function Sh(R,q,pe,_e,Ue,Ke){var ze;for(ze=3;0<ze;--ze)lh(R,q+=4*pe,pe,1,16,_e,Ue,Ke)}function ue(R,q,pe,_e,Ue,Ke){var ze;for(ze=3;0<ze;--ze)lh(R,q+=4,1,pe,16,_e,Ue,Ke)}function Fe(R,q,pe,_e,Ue,Ke,ze,Xe){oh(R,q,Ue,1,8,Ke,ze,Xe),oh(pe,_e,Ue,1,8,Ke,ze,Xe)}function yt(R,q,pe,_e,Ue,Ke,ze,Xe){oh(R,q,1,Ue,8,Ke,ze,Xe),oh(pe,_e,1,Ue,8,Ke,ze,Xe)}function Lt(R,q,pe,_e,Ue,Ke,ze,Xe){lh(R,q+4*Ue,Ue,1,8,Ke,ze,Xe),lh(pe,_e+4*Ue,Ue,1,8,Ke,ze,Xe)}function er(R,q,pe,_e,Ue,Ke,ze,Xe){lh(R,q+4,1,Ue,8,Ke,ze,Xe),lh(pe,_e+4,1,Ue,8,Ke,ze,Xe)}function $r(){this.ba=new Ii,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new ls,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Zr(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function ti(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function ri(){this.ua=0,this.Wa=new Ri,this.vb=new Ri,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Ar,this.yc=new Ot}function Yi(){this.xb=this.a=0,this.l=new sh,this.ca=new Ii,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new St,this.Pb=0,this.wd=new St,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new ri,this.ab=0,this.gc=ye(4,ti),this.Oc=0}function as(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new sh,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function na(R,q,pe,_e,Ue,Ke,ze){for(R=R==null?0:R[q+0],q=0;q<ze;++q)Ue[Ke+q]=R+pe[_e+q]&255,R=Ue[Ke+q]}function Ma(R,q,pe,_e,Ue,Ke,ze){var Xe;if(R==null)na(null,null,pe,_e,Ue,Ke,ze);else for(Xe=0;Xe<ze;++Xe)Ue[Ke+Xe]=R[q+Xe]+pe[_e+Xe]&255}function Oo(R,q,pe,_e,Ue,Ke,ze){if(R==null)na(null,null,pe,_e,Ue,Ke,ze);else{var Xe,tt=R[q+0],vt=tt,$t=tt;for(Xe=0;Xe<ze;++Xe)vt=$t+(tt=R[q+Xe])-vt,$t=pe[_e+Xe]+(-256&vt?0>vt?0:255:vt)&255,vt=tt,Ue[Ke+Xe]=$t}}function Na(R,q,pe,_e){var Ue=q.width,Ke=q.o;if(k(R!=null&&q!=null),0>pe||0>=_e||pe+_e>Ke)return null;if(!R.Cc){if(R.ga==null){var ze;if(R.ga=new as,(ze=R.ga==null)||(ze=q.width*q.o,k(R.Gb.length==0),R.Gb=ee(ze),R.Uc=0,R.Gb==null?ze=0:(R.mb=R.Gb,R.nb=R.Uc,R.rc=null,ze=1),ze=!ze),!ze){ze=R.ga;var Xe=R.Fa,tt=R.P,vt=R.qc,$t=R.mb,dr=R.nb,gt=tt+1,Wt=vt-1,tr=ze.l;if(k(Xe!=null&&$t!=null&&q!=null),jh[0]=null,jh[1]=na,jh[2]=Ma,jh[3]=Oo,ze.ca=$t,ze.tb=dr,ze.c=q.width,ze.i=q.height,k(0<ze.c&&0<ze.i),1>=vt)q=0;else if(ze.$a=3&Xe[tt+0],ze.Z=Xe[tt+0]>>2&3,ze.Lc=Xe[tt+0]>>4&3,tt=Xe[tt+0]>>6&3,0>ze.$a||1<ze.$a||4<=ze.Z||1<ze.Lc||tt)q=0;else if(tr.put=bi,tr.ac=Jl,tr.bc=Ra,tr.ma=ze,tr.width=q.width,tr.height=q.height,tr.Da=q.Da,tr.v=q.v,tr.va=q.va,tr.j=q.j,tr.o=q.o,ze.$a)e:{k(ze.$a==1),q=yd();t:for(;;){if(q==null){q=0;break e}if(k(ze!=null),ze.mc=q,q.c=ze.c,q.i=ze.i,q.l=ze.l,q.l.ma=ze,q.l.width=ze.c,q.l.height=ze.i,q.a=0,Lr(q.m,Xe,gt,Wt),!ec(ze.c,ze.i,1,q,null)||(q.ab==1&&q.gc[0].hc==3&&pc(q.s)?(ze.ic=1,Xe=q.c*q.i,q.Ta=null,q.Ua=0,q.V=ee(Xe),q.Ba=0,q.V==null?(q.a=1,q=0):q=1):(ze.ic=0,q=Vl(q,ze.c)),!q))break t;q=1;break e}ze.mc=null,q=0}else q=Wt>=ze.c*ze.i;ze=!q}if(ze)return null;R.ga.Lc!=1?R.Ga=0:_e=Ke-pe}k(R.ga!=null),k(pe+_e<=Ke);e:{if(q=(Xe=R.ga).c,Ke=Xe.l.o,Xe.$a==0){if(gt=R.rc,Wt=R.Vc,tr=R.Fa,tt=R.P+1+pe*q,vt=R.mb,$t=R.nb+pe*q,k(tt<=R.P+R.qc),Xe.Z!=0)for(k(jh[Xe.Z]!=null),ze=0;ze<_e;++ze)jh[Xe.Z](gt,Wt,tr,tt,vt,$t,q),gt=vt,Wt=$t,$t+=q,tt+=q;else for(ze=0;ze<_e;++ze)G(vt,$t,tr,tt,q),gt=vt,Wt=$t,$t+=q,tt+=q;R.rc=gt,R.Vc=Wt}else{if(k(Xe.mc!=null),q=pe+_e,k((ze=Xe.mc)!=null),k(q<=ze.i),ze.C>=q)q=1;else if(Xe.ic||Ye(),Xe.ic){Xe=ze.V,gt=ze.Ba,Wt=ze.c;var Dr=ze.i,yr=(tr=1,tt=ze.$/Wt,vt=ze.$%Wt,$t=ze.m,dr=ze.s,ze.$),Mr=Wt*Dr,Hr=Wt*q,an=dr.wc,Jr=yr<Hr?Za(dr,vt,tt):null;k(yr<=Mr),k(q<=Dr),k(pc(dr));t:for(;;){for(;!$t.h&&yr<Hr;){if(vt&an||(Jr=Za(dr,vt,tt)),k(Jr!=null),cr($t),256>(Dr=ha(Jr.G[0],Jr.H[0],$t)))Xe[gt+yr]=Dr,++yr,++vt>=Wt&&(vt=0,++tt<=q&&!(tt%16)&&Hl(ze,tt));else{if(!(280>Dr)){tr=0;break t}Dr=Ul(Dr-256,$t);var Ti,Qn=ha(Jr.G[4],Jr.H[4],$t);if(cr($t),!(yr>=(Qn=$l(Wt,Qn=Ul(Qn,$t)))&&Mr-yr>=Dr)){tr=0;break t}for(Ti=0;Ti<Dr;++Ti)Xe[gt+yr+Ti]=Xe[gt+yr+Ti-Qn];for(yr+=Dr,vt+=Dr;vt>=Wt;)vt-=Wt,++tt<=q&&!(tt%16)&&Hl(ze,tt);yr<Hr&&vt&an&&(Jr=Za(dr,vt,tt))}k($t.h==Gt($t))}Hl(ze,tt>q?q:tt);break t}!tr||$t.h&&yr<Mr?(tr=0,ze.a=$t.h?5:3):ze.$=yr,q=tr}else q=Ql(ze,ze.V,ze.Ba,ze.c,ze.i,q,gc);if(!q){_e=0;break e}}pe+_e>=Ke&&(R.Cc=1),_e=1}if(!_e)return null;if(R.Cc&&((_e=R.ga)!=null&&(_e.mc=null),R.ga=null,0<R.Ga))return alert("todo:WebPDequantizeLevels"),null}return R.nb+pe*Ue}function Wo(R,q,pe,_e,Ue,Ke){for(;0<Ue--;){var ze,Xe=R,tt=q+(pe?1:0),vt=R,$t=q+(pe?0:3);for(ze=0;ze<_e;++ze){var dr=vt[$t+4*ze];dr!=255&&(dr*=32897,Xe[tt+4*ze+0]=Xe[tt+4*ze+0]*dr>>23,Xe[tt+4*ze+1]=Xe[tt+4*ze+1]*dr>>23,Xe[tt+4*ze+2]=Xe[tt+4*ze+2]*dr>>23)}q+=Ke}}function O(R,q,pe,_e,Ue){for(;0<_e--;){var Ke;for(Ke=0;Ke<pe;++Ke){var ze=R[q+2*Ke+0],Xe=15&(vt=R[q+2*Ke+1]),tt=4369*Xe,vt=(240&vt|vt>>4)*tt>>16;R[q+2*Ke+0]=(240&ze|ze>>4)*tt>>16&240|(15&ze|ze<<4)*tt>>16>>4&15,R[q+2*Ke+1]=240&vt|Xe}q+=Ue}}function Pe(R,q,pe,_e,Ue,Ke,ze,Xe){var tt,vt,$t=255;for(vt=0;vt<Ue;++vt){for(tt=0;tt<_e;++tt){var dr=R[q+tt];Ke[ze+4*tt]=dr,$t&=dr}q+=pe,ze+=Xe}return $t!=255}function J(R,q,pe,_e,Ue){var Ke;for(Ke=0;Ke<Ue;++Ke)pe[_e+Ke]=R[q+Ke]>>8}function Ye(){Kh=Wo,np=O,Cu=Pe,Vd=J}function bt(R,q,pe){Mt[R]=function(_e,Ue,Ke,ze,Xe,tt,vt,$t,dr,gt,Wt,tr,Dr,yr,Mr,Hr,an){var Jr,Ti=an-1>>1,Qn=Xe[tt+0]|vt[$t+0]<<16,Ls=dr[gt+0]|Wt[tr+0]<<16;k(_e!=null);var pi=3*Qn+Ls+131074>>2;for(q(_e[Ue+0],255&pi,pi>>16,Dr,yr),Ke!=null&&(pi=3*Ls+Qn+131074>>2,q(Ke[ze+0],255&pi,pi>>16,Mr,Hr)),Jr=1;Jr<=Ti;++Jr){var ca=Xe[tt+Jr]|vt[$t+Jr]<<16,Pl=dr[gt+Jr]|Wt[tr+Jr]<<16,Es=Qn+ca+Ls+Pl+524296,hi=Es+2*(ca+Ls)>>3;pi=hi+Qn>>1,Qn=(Es=Es+2*(Qn+Pl)>>3)+ca>>1,q(_e[Ue+2*Jr-1],255&pi,pi>>16,Dr,yr+(2*Jr-1)*pe),q(_e[Ue+2*Jr-0],255&Qn,Qn>>16,Dr,yr+(2*Jr-0)*pe),Ke!=null&&(pi=Es+Ls>>1,Qn=hi+Pl>>1,q(Ke[ze+2*Jr-1],255&pi,pi>>16,Mr,Hr+(2*Jr-1)*pe),q(Ke[ze+2*Jr+0],255&Qn,Qn>>16,Mr,Hr+(2*Jr+0)*pe)),Qn=ca,Ls=Pl}1&an||(pi=3*Qn+Ls+131074>>2,q(_e[Ue+an-1],255&pi,pi>>16,Dr,yr+(an-1)*pe),Ke!=null&&(pi=3*Ls+Qn+131074>>2,q(Ke[ze+an-1],255&pi,pi>>16,Mr,Hr+(an-1)*pe)))}}function xt(){Nd[lA]=qA,Nd[ap]=Tg,Nd[vg]=J0,Nd[GA]=Oy,Nd[Bl]=Ry,Nd[Cf]=Cg,Nd[yg]=Nh,Nd[xg]=Tg,Nd[op]=Oy,Nd[cA]=Ry,Nd[bg]=Cg}function mr(R){return R&-16384?0>R?0:255:R>>dp}function Kt(R,q){return mr((19077*R>>8)+(26149*q>>8)-14234)}function Dn(R,q,pe){return mr((19077*R>>8)-(6419*q>>8)-(13320*pe>>8)+8708)}function Ft(R,q){return mr((19077*R>>8)+(33050*q>>8)-17685)}function gr(R,q,pe,_e,Ue){_e[Ue+0]=Kt(R,pe),_e[Ue+1]=Dn(R,q,pe),_e[Ue+2]=Ft(R,q)}function qi(R,q,pe,_e,Ue){_e[Ue+0]=Ft(R,q),_e[Ue+1]=Dn(R,q,pe),_e[Ue+2]=Kt(R,pe)}function Nn(R,q,pe,_e,Ue){var Ke=Dn(R,q,pe);q=Ke<<3&224|Ft(R,q)>>3,_e[Ue+0]=248&Kt(R,pe)|Ke>>5,_e[Ue+1]=q}function en(R,q,pe,_e,Ue){var Ke=240&Ft(R,q)|15;_e[Ue+0]=240&Kt(R,pe)|Dn(R,q,pe)>>4,_e[Ue+1]=Ke}function Pr(R,q,pe,_e,Ue){_e[Ue+0]=255,gr(R,q,pe,_e,Ue+1)}function Fa(R,q,pe,_e,Ue){qi(R,q,pe,_e,Ue),_e[Ue+3]=255}function Wi(R,q,pe,_e,Ue){gr(R,q,pe,_e,Ue),_e[Ue+3]=255}function Ni(R,q,pe){Mt[R]=function(_e,Ue,Ke,ze,Xe,tt,vt,$t,dr){for(var gt=$t+(-2&dr)*pe;$t!=gt;)q(_e[Ue+0],Ke[ze+0],Xe[tt+0],vt,$t),q(_e[Ue+1],Ke[ze+0],Xe[tt+0],vt,$t+pe),Ue+=2,++ze,++tt,$t+=2*pe;1&dr&&q(_e[Ue+0],Ke[ze+0],Xe[tt+0],vt,$t)}}function Vi(R,q,pe){return pe==0?R==0?q==0?6:5:q==0?4:0:pe}function ys(R,q,pe,_e,Ue){switch(R>>>30){case 3:Td(q,pe,_e,Ue,0);break;case 2:_c(q,pe,_e,Ue);break;case 1:sa(q,pe,_e,Ue)}}function bn(R,q){var pe,_e,Ue=q.M,Ke=q.Nb,ze=R.oc,Xe=R.pc+40,tt=R.oc,vt=R.pc+584,$t=R.oc,dr=R.pc+600;for(pe=0;16>pe;++pe)ze[Xe+32*pe-1]=129;for(pe=0;8>pe;++pe)tt[vt+32*pe-1]=129,$t[dr+32*pe-1]=129;for(0<Ue?ze[Xe-1-32]=tt[vt-1-32]=$t[dr-1-32]=129:(X(ze,Xe-32-1,127,21),X(tt,vt-32-1,127,9),X($t,dr-32-1,127,9)),_e=0;_e<R.za;++_e){var gt=q.ya[q.aa+_e];if(0<_e){for(pe=-1;16>pe;++pe)G(ze,Xe+32*pe-4,ze,Xe+32*pe+12,4);for(pe=-1;8>pe;++pe)G(tt,vt+32*pe-4,tt,vt+32*pe+4,4),G($t,dr+32*pe-4,$t,dr+32*pe+4,4)}var Wt=R.Gd,tr=R.Hd+_e,Dr=gt.ad,yr=gt.Hc;if(0<Ue&&(G(ze,Xe-32,Wt[tr].y,0,16),G(tt,vt-32,Wt[tr].f,0,8),G($t,dr-32,Wt[tr].ea,0,8)),gt.Za){var Mr=ze,Hr=Xe-32+16;for(0<Ue&&(_e>=R.za-1?X(Mr,Hr,Wt[tr].y[15],4):G(Mr,Hr,Wt[tr+1].y,0,4)),pe=0;4>pe;pe++)Mr[Hr+128+pe]=Mr[Hr+256+pe]=Mr[Hr+384+pe]=Mr[Hr+0+pe];for(pe=0;16>pe;++pe,yr<<=2)Mr=ze,Hr=Xe+Gh[pe],jd[gt.Ob[pe]](Mr,Hr),ys(yr,Dr,16*+pe,Mr,Hr)}else if(Mr=Vi(_e,Ue,gt.Ob[0]),Ch[Mr](ze,Xe),yr!=0)for(pe=0;16>pe;++pe,yr<<=2)ys(yr,Dr,16*+pe,ze,Xe+Gh[pe]);for(pe=gt.Gc,Mr=Vi(_e,Ue,gt.Dd),zd[Mr](tt,vt),zd[Mr]($t,dr),yr=Dr,Mr=tt,Hr=vt,255&(gt=0|pe)&&(170&gt?Zu(yr,256,Mr,Hr):Ja(yr,256,Mr,Hr)),gt=$t,yr=dr,255&(pe>>=8)&&(170&pe?Zu(Dr,320,gt,yr):Ja(Dr,320,gt,yr)),Ue<R.Ub-1&&(G(Wt[tr].y,0,ze,Xe+480,16),G(Wt[tr].f,0,tt,vt+224,8),G(Wt[tr].ea,0,$t,dr+224,8)),pe=8*Ke*R.B,Wt=R.sa,tr=R.ta+16*_e+16*Ke*R.R,Dr=R.qa,gt=R.ra+8*_e+pe,yr=R.Ha,Mr=R.Ia+8*_e+pe,pe=0;16>pe;++pe)G(Wt,tr+pe*R.R,ze,Xe+32*pe,16);for(pe=0;8>pe;++pe)G(Dr,gt+pe*R.B,tt,vt+32*pe,8),G(yr,Mr+pe*R.B,$t,dr+32*pe,8)}}function xs(R,q,pe,_e,Ue,Ke,ze,Xe,tt){var vt=[0],$t=[0],dr=0,gt=tt!=null?tt.kd:0,Wt=tt??new Zr;if(R==null||12>pe)return 7;Wt.data=R,Wt.w=q,Wt.ha=pe,q=[q],pe=[pe],Wt.gb=[Wt.gb];e:{var tr=q,Dr=pe,yr=Wt.gb;if(k(R!=null),k(Dr!=null),k(yr!=null),yr[0]=0,12<=Dr[0]&&!D(R,tr[0],"RIFF")){if(D(R,tr[0]+8,"WEBP")){yr=3;break e}var Mr=yi(R,tr[0]+4);if(12>Mr||4294967286<Mr){yr=3;break e}if(gt&&Mr>Dr[0]-8){yr=7;break e}yr[0]=Mr,tr[0]+=12,Dr[0]-=12}yr=0}if(yr!=0)return yr;for(Mr=0<Wt.gb[0],pe=pe[0];;){e:{var Hr=R;Dr=q,yr=pe;var an=vt,Jr=$t,Ti=tr=[0];if((pi=dr=[dr])[0]=0,8>yr[0])yr=7;else{if(!D(Hr,Dr[0],"VP8X")){if(yi(Hr,Dr[0]+4)!=10){yr=3;break e}if(18>yr[0]){yr=7;break e}var Qn=yi(Hr,Dr[0]+8),Ls=1+Rn(Hr,Dr[0]+12);if(2147483648<=Ls*(Hr=1+Rn(Hr,Dr[0]+15))){yr=3;break e}Ti!=null&&(Ti[0]=Qn),an!=null&&(an[0]=Ls),Jr!=null&&(Jr[0]=Hr),Dr[0]+=18,yr[0]-=18,pi[0]=1}yr=0}}if(dr=dr[0],tr=tr[0],yr!=0)return yr;if(Dr=!!(2&tr),!Mr&&dr)return 3;if(Ke!=null&&(Ke[0]=!!(16&tr)),ze!=null&&(ze[0]=Dr),Xe!=null&&(Xe[0]=0),ze=vt[0],tr=$t[0],dr&&Dr&&tt==null){yr=0;break}if(4>pe){yr=7;break}if(Mr&&dr||!Mr&&!dr&&!D(R,q[0],"ALPH")){pe=[pe],Wt.na=[Wt.na],Wt.P=[Wt.P],Wt.Sa=[Wt.Sa];e:{Qn=R,yr=q,Mr=pe;var pi=Wt.gb;an=Wt.na,Jr=Wt.P,Ti=Wt.Sa,Ls=22,k(Qn!=null),k(Mr!=null),Hr=yr[0];var ca=Mr[0];for(k(an!=null),k(Ti!=null),an[0]=null,Jr[0]=null,Ti[0]=0;;){if(yr[0]=Hr,Mr[0]=ca,8>ca){yr=7;break e}var Pl=yi(Qn,Hr+4);if(4294967286<Pl){yr=3;break e}var Es=8+Pl+1&-2;if(Ls+=Es,0<pi&&Ls>pi){yr=3;break e}if(!D(Qn,Hr,"VP8 ")||!D(Qn,Hr,"VP8L")){yr=0;break e}if(ca[0]<Es){yr=7;break e}D(Qn,Hr,"ALPH")||(an[0]=Qn,Jr[0]=Hr+8,Ti[0]=Pl),Hr+=Es,ca-=Es}}if(pe=pe[0],Wt.na=Wt.na[0],Wt.P=Wt.P[0],Wt.Sa=Wt.Sa[0],yr!=0)break}pe=[pe],Wt.Ja=[Wt.Ja],Wt.xa=[Wt.xa];e:if(pi=R,yr=q,Mr=pe,an=Wt.gb[0],Jr=Wt.Ja,Ti=Wt.xa,Qn=yr[0],Hr=!D(pi,Qn,"VP8 "),Ls=!D(pi,Qn,"VP8L"),k(pi!=null),k(Mr!=null),k(Jr!=null),k(Ti!=null),8>Mr[0])yr=7;else{if(Hr||Ls){if(pi=yi(pi,Qn+4),12<=an&&pi>an-12){yr=3;break e}if(gt&&pi>Mr[0]-8){yr=7;break e}Jr[0]=pi,yr[0]+=8,Mr[0]-=8,Ti[0]=Ls}else Ti[0]=5<=Mr[0]&&pi[Qn+0]==47&&!(pi[Qn+4]>>5),Jr[0]=Mr[0];yr=0}if(pe=pe[0],Wt.Ja=Wt.Ja[0],Wt.xa=Wt.xa[0],q=q[0],yr!=0)break;if(4294967286<Wt.Ja)return 3;if(Xe==null||Dr||(Xe[0]=Wt.xa?2:1),ze=[ze],tr=[tr],Wt.xa){if(5>pe){yr=7;break}Xe=ze,gt=tr,Dr=Ke,R==null||5>pe?R=0:5<=pe&&R[q+0]==47&&!(R[q+4]>>5)?(Mr=[0],pi=[0],an=[0],Lr(Jr=new St,R,q,pe),Xa(Jr,Mr,pi,an)?(Xe!=null&&(Xe[0]=Mr[0]),gt!=null&&(gt[0]=pi[0]),Dr!=null&&(Dr[0]=an[0]),R=1):R=0):R=0}else{if(10>pe){yr=7;break}Xe=tr,R==null||10>pe||!yc(R,q+3,pe-3)?R=0:(gt=R[q+0]|R[q+1]<<8|R[q+2]<<16,Dr=16383&(R[q+7]<<8|R[q+6]),R=16383&(R[q+9]<<8|R[q+8]),1&gt||3<(gt>>1&7)||!(gt>>4&1)||gt>>5>=Wt.Ja||!Dr||!R?R=0:(ze&&(ze[0]=Dr),Xe&&(Xe[0]=R),R=1))}if(!R||(ze=ze[0],tr=tr[0],dr&&(vt[0]!=ze||$t[0]!=tr)))return 3;tt!=null&&(tt[0]=Wt,tt.offset=q-tt.w,k(4294967286>q-tt.w),k(tt.offset==tt.ha-pe));break}return yr==0||yr==7&&dr&&tt==null?(Ke!=null&&(Ke[0]|=Wt.na!=null&&0<Wt.na.length),_e!=null&&(_e[0]=ze),Ue!=null&&(Ue[0]=tr),0):yr}function Ua(R,q,pe){var _e=q.width,Ue=q.height,Ke=0,ze=0,Xe=_e,tt=Ue;if(q.Da=R!=null&&0<R.Da,q.Da&&(Xe=R.cd,tt=R.bd,Ke=R.v,ze=R.j,11>pe||(Ke&=-2,ze&=-2),0>Ke||0>ze||0>=Xe||0>=tt||Ke+Xe>_e||ze+tt>Ue))return 0;if(q.v=Ke,q.j=ze,q.va=Ke+Xe,q.o=ze+tt,q.U=Xe,q.T=tt,q.da=R!=null&&0<R.da,q.da){if(!Tn(Xe,tt,pe=[R.ib],Ke=[R.hb]))return 0;q.ib=pe[0],q.hb=Ke[0]}return q.ob=R!=null&&R.ob,q.Kb=R==null||!R.Sd,q.da&&(q.ob=q.ib<3*_e/4&&q.hb<3*Ue/4,q.Kb=0),1}function Si(R){if(R==null)return 2;if(11>R.S){var q=R.f.RGBA;q.fb+=(R.height-1)*q.A,q.A=-q.A}else q=R.f.kb,R=R.height,q.O+=(R-1)*q.fa,q.fa=-q.fa,q.N+=(R-1>>1)*q.Ab,q.Ab=-q.Ab,q.W+=(R-1>>1)*q.Db,q.Db=-q.Db,q.F!=null&&(q.J+=(R-1)*q.lb,q.lb=-q.lb);return 0}function ia(R,q,pe,_e){if(_e==null||0>=R||0>=q)return 2;if(pe!=null){if(pe.Da){var Ue=pe.cd,Ke=pe.bd,ze=-2&pe.v,Xe=-2&pe.j;if(0>ze||0>Xe||0>=Ue||0>=Ke||ze+Ue>R||Xe+Ke>q)return 2;R=Ue,q=Ke}if(pe.da){if(!Tn(R,q,Ue=[pe.ib],Ke=[pe.hb]))return 2;R=Ue[0],q=Ke[0]}}_e.width=R,_e.height=q;e:{var tt=_e.width,vt=_e.height;if(R=_e.S,0>=tt||0>=vt||!(R>=lA&&13>R))R=2;else{if(0>=_e.Rd&&_e.sd==null){ze=Ke=Ue=q=0;var $t=(Xe=tt*ZA[R])*vt;if(11>R||(Ke=(vt+1)/2*(q=(tt+1)/2),R==12&&(ze=(Ue=tt)*vt)),(vt=ee($t+2*Ke+ze))==null){R=1;break e}_e.sd=vt,11>R?((tt=_e.f.RGBA).eb=vt,tt.fb=0,tt.A=Xe,tt.size=$t):((tt=_e.f.kb).y=vt,tt.O=0,tt.fa=Xe,tt.Fd=$t,tt.f=vt,tt.N=0+$t,tt.Ab=q,tt.Cd=Ke,tt.ea=vt,tt.W=0+$t+Ke,tt.Db=q,tt.Ed=Ke,R==12&&(tt.F=vt,tt.J=0+$t+2*Ke),tt.Tc=ze,tt.lb=Ue)}if(q=1,Ue=_e.S,Ke=_e.width,ze=_e.height,Ue>=lA&&13>Ue)if(11>Ue)R=_e.f.RGBA,q&=(Xe=Math.abs(R.A))*(ze-1)+Ke<=R.size,q&=Xe>=Ke*ZA[Ue],q&=R.eb!=null;else{R=_e.f.kb,Xe=(Ke+1)/2,$t=(ze+1)/2,tt=Math.abs(R.fa),vt=Math.abs(R.Ab);var dr=Math.abs(R.Db),gt=Math.abs(R.lb),Wt=gt*(ze-1)+Ke;q&=tt*(ze-1)+Ke<=R.Fd,q&=vt*($t-1)+Xe<=R.Cd,q=(q&=dr*($t-1)+Xe<=R.Ed)&tt>=Ke&vt>=Xe&dr>=Xe,q&=R.y!=null,q&=R.f!=null,q&=R.ea!=null,Ue==12&&(q&=gt>=Ke,q&=Wt<=R.Tc,q&=R.F!=null)}else q=0;R=q?0:2}}return R!=0||pe!=null&&pe.fd&&(R=Si(_e)),R}var ks=64,ni=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],$i=24,rc=32,qu=8,ou=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Fn("Predictor0","PredictorAdd0"),Mt.Predictor0=function(){return 4278190080},Mt.Predictor1=function(R){return R},Mt.Predictor2=function(R,q,pe){return q[pe+0]},Mt.Predictor3=function(R,q,pe){return q[pe+1]},Mt.Predictor4=function(R,q,pe){return q[pe-1]},Mt.Predictor5=function(R,q,pe){return $n($n(R,q[pe+1]),q[pe+0])},Mt.Predictor6=function(R,q,pe){return $n(R,q[pe-1])},Mt.Predictor7=function(R,q,pe){return $n(R,q[pe+0])},Mt.Predictor8=function(R,q,pe){return $n(q[pe-1],q[pe+0])},Mt.Predictor9=function(R,q,pe){return $n(q[pe+0],q[pe+1])},Mt.Predictor10=function(R,q,pe){return $n($n(R,q[pe-1]),$n(q[pe+0],q[pe+1]))},Mt.Predictor11=function(R,q,pe){var _e=q[pe+0];return 0>=Gn(_e>>24&255,R>>24&255,(q=q[pe-1])>>24&255)+Gn(_e>>16&255,R>>16&255,q>>16&255)+Gn(_e>>8&255,R>>8&255,q>>8&255)+Gn(255&_e,255&R,255&q)?_e:R},Mt.Predictor12=function(R,q,pe){var _e=q[pe+0];return(ga((R>>24&255)+(_e>>24&255)-((q=q[pe-1])>>24&255))<<24|ga((R>>16&255)+(_e>>16&255)-(q>>16&255))<<16|ga((R>>8&255)+(_e>>8&255)-(q>>8&255))<<8|ga((255&R)+(255&_e)-(255&q)))>>>0},Mt.Predictor13=function(R,q,pe){var _e=q[pe-1];return(Di((R=$n(R,q[pe+0]))>>24&255,_e>>24&255)<<24|Di(R>>16&255,_e>>16&255)<<16|Di(R>>8&255,_e>>8&255)<<8|Di(255&R,255&_e))>>>0};var yl=Mt.PredictorAdd0;Mt.PredictorAdd1=ns,Fn("Predictor2","PredictorAdd2"),Fn("Predictor3","PredictorAdd3"),Fn("Predictor4","PredictorAdd4"),Fn("Predictor5","PredictorAdd5"),Fn("Predictor6","PredictorAdd6"),Fn("Predictor7","PredictorAdd7"),Fn("Predictor8","PredictorAdd8"),Fn("Predictor9","PredictorAdd9"),Fn("Predictor10","PredictorAdd10"),Fn("Predictor11","PredictorAdd11"),Fn("Predictor12","PredictorAdd12"),Fn("Predictor13","PredictorAdd13");var nc=Mt.PredictorAdd2;Wn("ColorIndexInverseTransform","MapARGB","32b",function(R){return R>>8&255},function(R){return R}),Wn("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(R){return R},function(R){return R>>8&255});var ao,zA=Mt.ColorIndexInverseTransform,uh=Mt.MapARGB,Gc=Mt.VP8LColorIndexInverseTransformAlpha,Wc=Mt.MapAlpha,Ro=Mt.VP8LPredictorsAdd=[];Ro.length=16,(Mt.VP8LPredictors=[]).length=16,(Mt.VP8LPredictorsAdd_C=[]).length=16,(Mt.VP8LPredictors_C=[]).length=16;var Tf,Sd,Ji,fa,xo,Th,Xu,Td,_c,Zu,sa,Ja,Is,xl,dh,oA,zh,KA,Jm,ep,tp,Yc,Yo,rp,Kh,np,Cu,Vd,ip=ee(511),mg=ee(2041),pg=ee(225),G0=ee(767),W0=0,gg=mg,sp=pg,Ju=G0,Cd=ip,lA=0,ap=1,vg=2,GA=3,Bl=4,Cf=5,yg=6,xg=7,op=8,cA=9,bg=10,ky=[2,3,7],_1=[3,3,11],Y0=[280,256,256,256,40],WA=[0,1,1,1,0],Iy=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],wg=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Eg=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],q0=8,YA=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],_g=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],uA=null,Sg=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Ly=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],X0=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],By=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Z0=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],lp=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],cp=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Ch=[],jd=[],zd=[],Py=1,up=2,jh=[],Nd=[];bt("UpsampleRgbLinePair",gr,3),bt("UpsampleBgrLinePair",qi,3),bt("UpsampleRgbaLinePair",Wi,4),bt("UpsampleBgraLinePair",Fa,4),bt("UpsampleArgbLinePair",Pr,4),bt("UpsampleRgba4444LinePair",en,2),bt("UpsampleRgb565LinePair",Nn,2);var qA=Mt.UpsampleRgbLinePair,J0=Mt.UpsampleBgrLinePair,Tg=Mt.UpsampleRgbaLinePair,Oy=Mt.UpsampleBgraLinePair,Ry=Mt.UpsampleArgbLinePair,Cg=Mt.UpsampleRgba4444LinePair,Nh=Mt.UpsampleRgb565LinePair,jf=16,kh=1<<jf-1,XA=-227,jg=482,dp=6,ev=0,Ng=ee(256),kg=ee(256),Ig=ee(256),Lg=ee(256),Bg=ee(jg-XA),tv=ee(jg-XA);Ni("YuvToRgbRow",gr,3),Ni("YuvToBgrRow",qi,3),Ni("YuvToRgbaRow",Wi,4),Ni("YuvToBgraRow",Fa,4),Ni("YuvToArgbRow",Pr,4),Ni("YuvToRgba4444Row",en,2),Ni("YuvToRgb565Row",Nn,2);var Gh=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],hp=[0,2,8],fp=[8,7,6,4,4,2,2,2,1,1,1,1],Ap=1;this.WebPDecodeRGBA=function(R,q,pe,_e,Ue){var Ke=ap,ze=new $r,Xe=new Ii;ze.ba=Xe,Xe.S=Ke,Xe.width=[Xe.width],Xe.height=[Xe.height];var tt=Xe.width,vt=Xe.height,$t=new xn;if($t==null||R==null)var dr=2;else k($t!=null),dr=xs(R,q,pe,$t.width,$t.height,$t.Pd,$t.Qd,$t.format,null);if(dr!=0?tt=0:(tt!=null&&(tt[0]=$t.width[0]),vt!=null&&(vt[0]=$t.height[0]),tt=1),tt){Xe.width=Xe.width[0],Xe.height=Xe.height[0],_e!=null&&(_e[0]=Xe.width),Ue!=null&&(Ue[0]=Xe.height);e:{if(_e=new sh,(Ue=new Zr).data=R,Ue.w=q,Ue.ha=pe,Ue.kd=1,q=[0],k(Ue!=null),((R=xs(Ue.data,Ue.w,Ue.ha,null,null,null,q,null,Ue))==0||R==7)&&q[0]&&(R=4),(q=R)==0){if(k(ze!=null),_e.data=Ue.data,_e.w=Ue.w+Ue.offset,_e.ha=Ue.ha-Ue.offset,_e.put=bi,_e.ac=Jl,_e.bc=Ra,_e.ma=ze,Ue.xa){if((R=yd())==null){ze=1;break e}if((function(gt,Wt){var tr=[0],Dr=[0],yr=[0];t:for(;;){if(gt==null)return 0;if(Wt==null)return gt.a=2,0;if(gt.l=Wt,gt.a=0,Lr(gt.m,Wt.data,Wt.w,Wt.ha),!Xa(gt.m,tr,Dr,yr)){gt.a=3;break t}if(gt.xb=up,Wt.width=tr[0],Wt.height=Dr[0],!ec(tr[0],Dr[0],1,gt,null))break t;return 1}return k(gt.a!=0),0})(R,_e)){if(_e=(q=ia(_e.width,_e.height,ze.Oa,ze.ba))==0){t:{_e=R;r:for(;;){if(_e==null){_e=0;break t}if(k(_e.s.yc!=null),k(_e.s.Ya!=null),k(0<_e.s.Wb),k((pe=_e.l)!=null),k((Ue=pe.ma)!=null),_e.xb!=0){if(_e.ca=Ue.ba,_e.tb=Ue.tb,k(_e.ca!=null),!Ua(Ue.Oa,pe,GA)){_e.a=2;break r}if(!Vl(_e,pe.width)||pe.da)break r;if((pe.da||Qi(_e.ca.S))&&Ye(),11>_e.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),_e.ca.f.kb.F!=null&&Ye()),_e.Pb&&0<_e.s.ua&&_e.s.vb.X==null&&!pt(_e.s.vb,_e.s.Wa.Xa)){_e.a=1;break r}_e.xb=0}if(!Ql(_e,_e.V,_e.Ba,_e.c,_e.i,pe.o,Co))break r;Ue.Dc=_e.Ma,_e=1;break t}k(_e.a!=0),_e=0}_e=!_e}_e&&(q=R.a)}else q=R.a}else{if((R=new Ll)==null){ze=1;break e}if(R.Fa=Ue.na,R.P=Ue.P,R.qc=Ue.Sa,Qc(R,_e)){if((q=ia(_e.width,_e.height,ze.Oa,ze.ba))==0){if(R.Aa=0,pe=ze.Oa,k((Ue=R)!=null),pe!=null){if(0<(tt=0>(tt=pe.Md)?0:100<tt?255:255*tt/100)){for(vt=$t=0;4>vt;++vt)12>(dr=Ue.pb[vt]).lc&&(dr.ia=tt*fp[0>dr.lc?0:dr.lc]>>3),$t|=dr.ia;$t&&(alert("todo:VP8InitRandom"),Ue.ia=1)}Ue.Ga=pe.Id,100<Ue.Ga?Ue.Ga=100:0>Ue.Ga&&(Ue.Ga=0)}(function(gt,Wt){if(gt==null)return 0;if(Wt==null)return Fi(gt,2,"NULL VP8Io parameter in VP8Decode().");if(!gt.cb&&!Qc(gt,Wt))return 0;if(k(gt.cb),Wt.ac==null||Wt.ac(Wt)){Wt.ob&&(gt.L=0);var tr=hp[gt.L];if(gt.L==2?(gt.yb=0,gt.zb=0):(gt.yb=Wt.v-tr>>4,gt.zb=Wt.j-tr>>4,0>gt.yb&&(gt.yb=0),0>gt.zb&&(gt.zb=0)),gt.Va=Wt.o+15+tr>>4,gt.Hb=Wt.va+15+tr>>4,gt.Hb>gt.za&&(gt.Hb=gt.za),gt.Va>gt.Ub&&(gt.Va=gt.Ub),0<gt.L){var Dr=gt.ed;for(tr=0;4>tr;++tr){var yr;if(gt.Qa.Cb){var Mr=gt.Qa.Lb[tr];gt.Qa.Fb||(Mr+=Dr.Tb)}else Mr=Dr.Tb;for(yr=0;1>=yr;++yr){var Hr=gt.gd[tr][yr],an=Mr;if(Dr.Pc&&(an+=Dr.vd[0],yr&&(an+=Dr.od[0])),0<(an=0>an?0:63<an?63:an)){var Jr=an;0<Dr.wb&&(Jr=4<Dr.wb?Jr>>2:Jr>>1)>9-Dr.wb&&(Jr=9-Dr.wb),1>Jr&&(Jr=1),Hr.dd=Jr,Hr.tc=2*an+Jr,Hr.ld=40<=an?2:15<=an?1:0}else Hr.tc=0;Hr.La=yr}}}tr=0}else Fi(gt,6,"Frame setup failed"),tr=gt.a;if(tr=tr==0){if(tr){gt.$c=0,0<gt.Aa||(gt.Ic=Ap);t:{tr=gt.Ic,Dr=4*(Jr=gt.za);var Ti=32*Jr,Qn=Jr+1,Ls=0<gt.L?Jr*(0<gt.Aa?2:1):0,pi=(gt.Aa==2?2:1)*Jr;if((Hr=Dr+832+(yr=3*(16*tr+hp[gt.L])/2*Ti)+(Mr=gt.Fa!=null&&0<gt.Fa.length?gt.Kc.c*gt.Kc.i:0))!=Hr)tr=0;else{if(Hr>gt.Vb){if(gt.Vb=0,gt.Ec=ee(Hr),gt.Fc=0,gt.Ec==null){tr=Fi(gt,1,"no memory during frame initialization.");break t}gt.Vb=Hr}Hr=gt.Ec,an=gt.Fc,gt.Ac=Hr,gt.Bc=an,an+=Dr,gt.Gd=ye(Ti,Gu),gt.Hd=0,gt.rb=ye(Qn+1,iu),gt.sb=1,gt.wa=Ls?ye(Ls,gl):null,gt.Y=0,gt.D.Nb=0,gt.D.wa=gt.wa,gt.D.Y=gt.Y,0<gt.Aa&&(gt.D.Y+=Jr),k(!0),gt.oc=Hr,gt.pc=an,an+=832,gt.ya=ye(pi,Hd),gt.aa=0,gt.D.ya=gt.ya,gt.D.aa=gt.aa,gt.Aa==2&&(gt.D.aa+=Jr),gt.R=16*Jr,gt.B=8*Jr,Jr=(Ti=hp[gt.L])*gt.R,Ti=Ti/2*gt.B,gt.sa=Hr,gt.ta=an+Jr,gt.qa=gt.sa,gt.ra=gt.ta+16*tr*gt.R+Ti,gt.Ha=gt.qa,gt.Ia=gt.ra+8*tr*gt.B+Ti,gt.$c=0,an+=yr,gt.mb=Mr?Hr:null,gt.nb=Mr?an:null,k(an+Mr<=gt.Fc+gt.Vb),Wu(gt),X(gt.Ac,gt.Bc,0,Dr),tr=1}}if(tr){if(Wt.ka=0,Wt.y=gt.sa,Wt.O=gt.ta,Wt.f=gt.qa,Wt.N=gt.ra,Wt.ea=gt.Ha,Wt.Vd=gt.Ia,Wt.fa=gt.R,Wt.Rc=gt.B,Wt.F=null,Wt.J=0,!W0){for(tr=-255;255>=tr;++tr)ip[255+tr]=0>tr?-tr:tr;for(tr=-1020;1020>=tr;++tr)mg[1020+tr]=-128>tr?-128:127<tr?127:tr;for(tr=-112;112>=tr;++tr)pg[112+tr]=-16>tr?-16:15<tr?15:tr;for(tr=-255;510>=tr;++tr)G0[255+tr]=0>tr?0:255<tr?255:tr;W0=1}Xu=jt,Td=H,Zu=oe,sa=Ee,Ja=Ve,_c=_,Is=Po,xl=ch,dh=Fe,oA=yt,zh=Sh,KA=ue,Jm=Lt,ep=er,tp=yo,Yc=_h,Yo=aA,rp=VA,jd[0]=wd,jd[1]=br,jd[2]=Yu,jd[3]=bc,jd[4]=Wl,jd[5]=so,jd[6]=_u,jd[7]=Su,jd[8]=Ed,jd[9]=Go,Ch[0]=jo,Ch[1]=vn,Ch[2]=ui,Ch[3]=As,Ch[4]=il,Ch[5]=Zs,Ch[6]=la,zd[0]=Tu,zd[1]=Vr,zd[2]=wc,zd[3]=Qd,zd[4]=zc,zd[5]=Ec,zd[6]=Eh,tr=1}else tr=0}tr&&(tr=(function(ca,Pl){for(ca.M=0;ca.M<ca.Va;++ca.M){var Es,hi=ca.Jc[ca.M&ca.Xb],Bn=ca.m,sl=ca;for(Es=0;Es<sl.za;++Es){var _s=Bn,Rs=sl,bo=Rs.Ac,ic=Rs.Bc+4*Es,Sc=Rs.zc,$a=Rs.ya[Rs.aa+Es];if(Rs.Qa.Bb?$a.$b=Gr(_s,Rs.Pa.jb[0])?2+Gr(_s,Rs.Pa.jb[2]):Gr(_s,Rs.Pa.jb[1]):$a.$b=0,Rs.kc&&($a.Ad=Gr(_s,Rs.Bd)),$a.Za=!Gr(_s,145)+0,$a.Za){var Tc=$a.Ob,lu=0;for(Rs=0;4>Rs;++Rs){var al,aa=Sc[0+Rs];for(al=0;4>al;++al){aa=Z0[bo[ic+al]][aa];for(var zi=X0[Gr(_s,aa[0])];0<zi;)zi=X0[2*zi+Gr(_s,aa[zi])];aa=-zi,bo[ic+al]=aa}G(Tc,lu,bo,ic,4),lu+=4,Sc[0+Rs]=aa}}else aa=Gr(_s,156)?Gr(_s,128)?1:3:Gr(_s,163)?2:0,$a.Ob[0]=aa,X(bo,ic,aa,4),X(Sc,0,aa,4);$a.Dd=Gr(_s,142)?Gr(_s,114)?Gr(_s,183)?1:3:2:0}if(sl.m.Ka)return Fi(ca,7,"Premature end-of-partition0 encountered.");for(;ca.ja<ca.za;++ca.ja){if(sl=hi,_s=(Bn=ca).rb[Bn.sb-1],bo=Bn.rb[Bn.sb+Bn.ja],Es=Bn.ya[Bn.aa+Bn.ja],ic=Bn.kc?Es.Ad:0)_s.la=bo.la=0,Es.Za||(_s.Na=bo.Na=0),Es.Hc=0,Es.Gc=0,Es.ia=0;else{var bl,eo;if(_s=bo,bo=sl,ic=Bn.Pa.Xc,Sc=Bn.ya[Bn.aa+Bn.ja],$a=Bn.pb[Sc.$b],Rs=Sc.ad,Tc=0,lu=Bn.rb[Bn.sb-1],aa=al=0,X(Rs,Tc,0,384),Sc.Za)var Cc=0,qc=ic[3];else{zi=ee(16);var oo=_s.Na+lu.Na;if(oo=uA(bo,ic[1],oo,$a.Eb,0,zi,0),_s.Na=lu.Na=(0<oo)+0,1<oo)Xu(zi,0,Rs,Tc);else{var Xc=zi[0]+3>>3;for(zi=0;256>zi;zi+=16)Rs[Tc+zi]=Xc}Cc=1,qc=ic[0]}var lo=15&_s.la,fn=15&lu.la;for(zi=0;4>zi;++zi){var wo=1&fn;for(Xc=eo=0;4>Xc;++Xc)lo=lo>>1|(wo=(oo=uA(bo,qc,oo=wo+(1&lo),$a.Sc,Cc,Rs,Tc))>Cc)<<7,eo=eo<<2|(3<oo?3:1<oo?2:Rs[Tc+0]!=0),Tc+=16;lo>>=4,fn=fn>>1|wo<<7,al=(al<<8|eo)>>>0}for(qc=lo,Cc=fn>>4,bl=0;4>bl;bl+=2){for(eo=0,lo=_s.la>>4+bl,fn=lu.la>>4+bl,zi=0;2>zi;++zi){for(wo=1&fn,Xc=0;2>Xc;++Xc)oo=wo+(1&lo),lo=lo>>1|(wo=0<(oo=uA(bo,ic[2],oo,$a.Qc,0,Rs,Tc)))<<3,eo=eo<<2|(3<oo?3:1<oo?2:Rs[Tc+0]!=0),Tc+=16;lo>>=2,fn=fn>>1|wo<<5}aa|=eo<<4*bl,qc|=lo<<4<<bl,Cc|=(240&fn)<<bl}_s.la=qc,lu.la=Cc,Sc.Hc=al,Sc.Gc=aa,Sc.ia=43690&aa?0:$a.ia,ic=!(al|aa)}if(0<Bn.L&&(Bn.wa[Bn.Y+Bn.ja]=Bn.gd[Es.$b][Es.Za],Bn.wa[Bn.Y+Bn.ja].La|=!ic),sl.Ka)return Fi(ca,7,"Premature end-of-file encountered.")}if(Wu(ca),Bn=Pl,sl=1,Es=(hi=ca).D,_s=0<hi.L&&hi.M>=hi.zb&&hi.M<=hi.Va,hi.Aa==0)t:{if(Es.M=hi.M,Es.uc=_s,bn(hi,Es),sl=1,Es=(eo=hi.D).Nb,_s=(aa=hp[hi.L])*hi.R,bo=aa/2*hi.B,zi=16*Es*hi.R,Xc=8*Es*hi.B,ic=hi.sa,Sc=hi.ta-_s+zi,$a=hi.qa,Rs=hi.ra-bo+Xc,Tc=hi.Ha,lu=hi.Ia-bo+Xc,fn=(lo=eo.M)==0,al=lo>=hi.Va-1,hi.Aa==2&&bn(hi,eo),eo.uc)for(wo=(oo=hi).D.M,k(oo.D.uc),eo=oo.yb;eo<oo.Hb;++eo){Cc=eo,qc=wo;var sc=(No=(jc=oo).D).Nb;bl=jc.R;var No=No.wa[No.Y+Cc],ed=jc.sa,bs=jc.ta+16*sc*bl+16*Cc,Js=No.dd,ka=No.tc;if(ka!=0)if(k(3<=ka),jc.L==1)0<Cc&&Yc(ed,bs,bl,ka+4),No.La&&rp(ed,bs,bl,ka),0<qc&&tp(ed,bs,bl,ka+4),No.La&&Yo(ed,bs,bl,ka);else{var td=jc.B,wl=jc.qa,ko=jc.ra+8*sc*td+8*Cc,rd=jc.Ha,jc=jc.Ia+8*sc*td+8*Cc;sc=No.ld,0<Cc&&(xl(ed,bs,bl,ka+4,Js,sc),oA(wl,ko,rd,jc,td,ka+4,Js,sc)),No.La&&(KA(ed,bs,bl,ka,Js,sc),ep(wl,ko,rd,jc,td,ka,Js,sc)),0<qc&&(Is(ed,bs,bl,ka+4,Js,sc),dh(wl,ko,rd,jc,td,ka+4,Js,sc)),No.La&&(zh(ed,bs,bl,ka,Js,sc),Jm(wl,ko,rd,jc,td,ka,Js,sc))}}if(hi.ia&&alert("todo:DitherRow"),Bn.put!=null){if(eo=16*lo,lo=16*(lo+1),fn?(Bn.y=hi.sa,Bn.O=hi.ta+zi,Bn.f=hi.qa,Bn.N=hi.ra+Xc,Bn.ea=hi.Ha,Bn.W=hi.Ia+Xc):(eo-=aa,Bn.y=ic,Bn.O=Sc,Bn.f=$a,Bn.N=Rs,Bn.ea=Tc,Bn.W=lu),al||(lo-=aa),lo>Bn.o&&(lo=Bn.o),Bn.F=null,Bn.J=null,hi.Fa!=null&&0<hi.Fa.length&&eo<lo&&(Bn.J=Na(hi,Bn,eo,lo-eo),Bn.F=hi.mb,Bn.F==null&&Bn.F.length==0)){sl=Fi(hi,3,"Could not decode alpha data.");break t}eo<Bn.j&&(aa=Bn.j-eo,eo=Bn.j,k(!(1&aa)),Bn.O+=hi.R*aa,Bn.N+=hi.B*(aa>>1),Bn.W+=hi.B*(aa>>1),Bn.F!=null&&(Bn.J+=Bn.width*aa)),eo<lo&&(Bn.O+=Bn.v,Bn.N+=Bn.v>>1,Bn.W+=Bn.v>>1,Bn.F!=null&&(Bn.J+=Bn.v),Bn.ka=eo-Bn.j,Bn.U=Bn.va-Bn.v,Bn.T=lo-eo,sl=Bn.put(Bn))}Es+1!=hi.Ic||al||(G(hi.sa,hi.ta-_s,ic,Sc+16*hi.R,_s),G(hi.qa,hi.ra-bo,$a,Rs+8*hi.B,bo),G(hi.Ha,hi.Ia-bo,Tc,lu+8*hi.B,bo))}if(!sl)return Fi(ca,6,"Output aborted.")}return 1})(gt,Wt)),Wt.bc!=null&&Wt.bc(Wt),tr&=1}return tr?(gt.cb=0,tr):0})(R,_e)||(q=R.a)}}else q=R.a}q==0&&ze.Oa!=null&&ze.Oa.fd&&(q=Si(ze.ba))}ze=q}Ke=ze!=0?null:11>Ke?Xe.f.RGBA.eb:Xe.f.kb.y}else Ke=null;return Ke};var ZA=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function Ie(Mt,xr){for(var st="",mt=0;mt<4;mt++)st+=String.fromCharCode(Mt[xr++]);return st}function Qe(Mt,xr){return Mt[xr+0]|Mt[xr+1]<<8}function qe(Mt,xr){return(Mt[xr+0]|Mt[xr+1]<<8|Mt[xr+2]<<16)>>>0}function lt(Mt,xr){return(Mt[xr+0]|Mt[xr+1]<<8|Mt[xr+2]<<16|Mt[xr+3]<<24)>>>0}new me;var Te=[0],Et=[0],at=[],Ct=new me,et=P,Pt=(function(Mt,xr){var st={},mt=0,Ot=!1,Rt=0,Ar=0;if(st.frames=[],!(function(We,St){for(var Nt=0;Nt<4;Nt++)if(We[St+Nt]!="RIFF".charCodeAt(Nt))return!0;return!1})(Mt,xr)){for(lt(Mt,xr+=4),xr+=8;xr<Mt.length;){var jr=Ie(Mt,xr),Br=lt(Mt,xr+=4);xr+=4;var ar=Br+(1&Br);switch(jr){case"VP8 ":case"VP8L":st.frames[mt]===void 0&&(st.frames[mt]={}),(tn=st.frames[mt]).src_off=Ot?Ar:xr-8,tn.src_size=Rt+Br+8,mt++,Ot&&(Ot=!1,Rt=0,Ar=0);break;case"VP8X":(tn=st.header={}).feature_flags=Mt[xr];var Lr=xr+4;tn.canvas_width=1+qe(Mt,Lr),Lr+=3,tn.canvas_height=1+qe(Mt,Lr),Lr+=3;break;case"ALPH":Ot=!0,Rt=ar+8,Ar=xr-8;break;case"ANIM":(tn=st.header).bgcolor=lt(Mt,xr),Lr=xr+4,tn.loop_count=Qe(Mt,Lr),Lr+=2;break;case"ANMF":var hn,tn;(tn=st.frames[mt]={}).offset_x=2*qe(Mt,xr),xr+=3,tn.offset_y=2*qe(Mt,xr),xr+=3,tn.width=1+qe(Mt,xr),xr+=3,tn.height=1+qe(Mt,xr),xr+=3,tn.duration=qe(Mt,xr),xr+=3,hn=Mt[xr++],tn.dispose=1&hn,tn.blend=hn>>1&1}jr!="ANMF"&&(xr+=ar)}return st}})(et,0);Pt.response=et,Pt.rgbaoutput=!0,Pt.dataurl=!1;var qt=Pt.header?Pt.header:null,It=Pt.frames?Pt.frames:null;if(qt){qt.loop_counter=qt.loop_count,Te=[qt.canvas_height],Et=[qt.canvas_width];for(var Je=0;Je<It.length&&It[Je].blend!=0;Je++);}var zt=It[0],Sr=Ct.WebPDecodeRGBA(et,zt.src_off,zt.src_size,Et,Te);zt.rgba=Sr,zt.imgwidth=Et[0],zt.imgheight=Te[0];for(var ir=0;ir<Et[0]*Te[0]*4;ir++)at[ir]=Sr[ir];return this.width=Et,this.height=Te,this.data=at,this}(function(P){var k,D,G,X,ee,ye,he,me,Ie,Qe=function(We){return We=We||{},this.isStrokeTransparent=We.isStrokeTransparent||!1,this.strokeOpacity=We.strokeOpacity||1,this.strokeStyle=We.strokeStyle||"#000000",this.fillStyle=We.fillStyle||"#000000",this.isFillTransparent=We.isFillTransparent||!1,this.fillOpacity=We.fillOpacity||1,this.font=We.font||"10px sans-serif",this.textBaseline=We.textBaseline||"alphabetic",this.textAlign=We.textAlign||"left",this.lineWidth=We.lineWidth||1,this.lineJoin=We.lineJoin||"miter",this.lineCap=We.lineCap||"butt",this.path=We.path||[],this.transform=We.transform!==void 0?We.transform.clone():new me,this.globalCompositeOperation=We.globalCompositeOperation||"normal",this.globalAlpha=We.globalAlpha||1,this.clip_path=We.clip_path||[],this.currentPoint=We.currentPoint||new ye,this.miterLimit=We.miterLimit||10,this.lastPoint=We.lastPoint||new ye,this.lineDashOffset=We.lineDashOffset||0,this.lineDash=We.lineDash||[],this.margin=We.margin||[0,0,0,0],this.prevPageLastElemOffset=We.prevPageLastElemOffset||0,this.ignoreClearRect=typeof We.ignoreClearRect!="boolean"||We.ignoreClearRect,this};P.events.push(["initialized",function(){this.context2d=new qe(this),k=this.internal.f2,D=this.internal.getCoordinateString,G=this.internal.getVerticalCoordinateString,X=this.internal.getHorizontalCoordinate,ee=this.internal.getVerticalCoordinate,ye=this.internal.Point,he=this.internal.Rectangle,me=this.internal.Matrix,Ie=new Qe}]);var qe=function(We){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var St=We;Object.defineProperty(this,"pdf",{get:function(){return St}});var Nt=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Nt},set:function(pt){Nt=!!pt}});var Gt=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Gt},set:function(pt){Gt=!!pt}});var Xt=0;Object.defineProperty(this,"posX",{get:function(){return Xt},set:function(pt){isNaN(pt)||(Xt=pt)}});var cr=0;Object.defineProperty(this,"posY",{get:function(){return cr},set:function(pt){isNaN(pt)||(cr=pt)}}),Object.defineProperty(this,"margin",{get:function(){return Ie.margin},set:function(pt){var Sn;typeof pt=="number"?Sn=[pt,pt,pt,pt]:((Sn=new Array(4))[0]=pt[0],Sn[1]=pt.length>=2?pt[1]:Sn[0],Sn[2]=pt.length>=3?pt[2]:Sn[0],Sn[3]=pt.length>=4?pt[3]:Sn[1]),Ie.margin=Sn}});var Nr=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Nr},set:function(pt){Nr=pt}});var Cr=0;Object.defineProperty(this,"lastBreak",{get:function(){return Cr},set:function(pt){Cr=pt}});var Gr=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Gr},set:function(pt){Gr=pt}}),Object.defineProperty(this,"ctx",{get:function(){return Ie},set:function(pt){pt instanceof Qe&&(Ie=pt)}}),Object.defineProperty(this,"path",{get:function(){return Ie.path},set:function(pt){Ie.path=pt}});var un=[];Object.defineProperty(this,"ctxStack",{get:function(){return un},set:function(pt){un=pt}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(pt){var Sn;Sn=lt(pt),this.ctx.fillStyle=Sn.style,this.ctx.isFillTransparent=Sn.a===0,this.ctx.fillOpacity=Sn.a,this.pdf.setFillColor(Sn.r,Sn.g,Sn.b,{a:Sn.a}),this.pdf.setTextColor(Sn.r,Sn.g,Sn.b,{a:Sn.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(pt){var Sn=lt(pt);this.ctx.strokeStyle=Sn.style,this.ctx.isStrokeTransparent=Sn.a===0,this.ctx.strokeOpacity=Sn.a,Sn.a===0?this.pdf.setDrawColor(255,255,255):(Sn.a,this.pdf.setDrawColor(Sn.r,Sn.g,Sn.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(pt){["butt","round","square"].indexOf(pt)!==-1&&(this.ctx.lineCap=pt,this.pdf.setLineCap(pt))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(pt){isNaN(pt)||(this.ctx.lineWidth=pt,this.pdf.setLineWidth(pt))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(pt){["bevel","round","miter"].indexOf(pt)!==-1&&(this.ctx.lineJoin=pt,this.pdf.setLineJoin(pt))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(pt){isNaN(pt)||(this.ctx.miterLimit=pt,this.pdf.setMiterLimit(pt))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(pt){this.ctx.textBaseline=pt}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(pt){["right","end","center","left","start"].indexOf(pt)!==-1&&(this.ctx.textAlign=pt)}});var En=null,Rn=null,yi=null;Object.defineProperty(this,"fontFaces",{get:function(){return yi},set:function(pt){En=null,Rn=null,yi=pt}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(pt){var Sn;if(this.ctx.font=pt,(Sn=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(pt))!==null){var Ri=Sn[1];Sn[2];var Tn=Sn[3],nn=Sn[4];Sn[5];var ji=Sn[6],Fn=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(nn)[2];nn=Math.floor(Fn==="px"?parseFloat(nn)*this.pdf.internal.scaleFactor:Fn==="em"?parseFloat(nn)*this.pdf.getFontSize():parseFloat(nn)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(nn);var Hn=(function(Wn){var Gi,is,Zi=[],vs=Wn.trim();if(vs==="")return ro;if(vs in ds)return[ds[vs]];for(;vs!=="";){switch(is=null,Gi=(vs=to(vs)).charAt(0)){case'"':case"'":is=Ml(vs.substring(1),Gi);break;default:is=nu(vs)}if(is===null||(Zi.push(is[0]),(vs=to(is[1]))!==""&&vs.charAt(0)!==","))return ro;vs=vs.replace(/^,/,"")}return Zi})(ji);if(this.fontFaces){var $n=(function(Wn,Gi){var is=Wn.getFontList(),Zi=JSON.stringify(is);if(En===null||Rn!==Zi){var vs=(function(ja){var xi=[];return Object.keys(ja).forEach(function(Ys){ja[Ys].forEach(function(Qi){var ai=null;switch(Qi){case"bold":ai={family:Ys,weight:"bold"};break;case"italic":ai={family:Ys,style:"italic"};break;case"bolditalic":ai={family:Ys,weight:"bold",style:"italic"};break;case"":case"normal":ai={family:Ys}}ai!==null&&(ai.ref={name:Ys,style:Qi},xi.push(ai))})}),xi})(is);En=(function(ja){for(var xi={},Ys=0;Ys<ja.length;++Ys){var Qi=qs(ja[Ys]),ai=Qi.family,da=Qi.stretch,Ii=Qi.style,xn=Qi.weight;xi[ai]=xi[ai]||{},xi[ai][da]=xi[ai][da]||{},xi[ai][da][Ii]=xi[ai][da][Ii]||{},xi[ai][da][Ii][xn]=Qi}return xi})(vs.concat(Gi)),Rn=Zi}return En})(this.pdf,this.fontFaces),ga=Hn.map(function(Wn){return{family:Wn,stretch:"normal",weight:Tn,style:Ri}}),Di=(function(Wn,Gi,is){for(var Zi=(is=is||{}).defaultFontFamily||"times",vs=Object.assign({},Qa,is.genericFontFamilies||{}),ja=null,xi=null,Ys=0;Ys<Gi.length;++Ys)if(vs[(ja=qs(Gi[Ys])).family]&&(ja.family=vs[ja.family]),Wn.hasOwnProperty(ja.family)){xi=Wn[ja.family];break}if(!(xi=xi||Wn[Zi]))throw new Error("Could not find a font-family for the rule '"+bu(ja)+"' and default family '"+Zi+"'.");if(xi=(function(Qi,ai){if(ai[Qi])return ai[Qi];var da=Qs[Qi],Ii=da<=Qs.normal?-1:1,xn=Os(ai,Ms,da,Ii);if(!xn)throw new Error("Could not find a matching font-stretch value for "+Qi);return xn})(ja.stretch,xi),xi=(function(Qi,ai){if(ai[Qi])return ai[Qi];for(var da=Cn[Qi],Ii=0;Ii<da.length;++Ii)if(ai[da[Ii]])return ai[da[Ii]];throw new Error("Could not find a matching font-style for "+Qi)})(ja.style,xi),!(xi=(function(Qi,ai){if(ai[Qi])return ai[Qi];if(Qi===400&&ai[500])return ai[500];if(Qi===500&&ai[400])return ai[400];var da=rs[Qi],Ii=Os(ai,Fs,da,Qi<400?-1:1);if(!Ii)throw new Error("Could not find a matching font-weight for value "+Qi);return Ii})(ja.weight,xi)))throw new Error("Failed to resolve a font for the rule '"+bu(ja)+"'.");return xi})($n,ga);this.pdf.setFont(Di.ref.name,Di.ref.style)}else{var Gn="";(Tn==="bold"||parseInt(Tn,10)>=700||Ri==="bold")&&(Gn="bold"),Ri==="italic"&&(Gn+="italic"),Gn.length===0&&(Gn="normal");for(var ns="",_i={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Un=0;Un<Hn.length;Un++){if(this.pdf.internal.getFont(Hn[Un],Gn,{noFallback:!0,disableWarning:!0})!==void 0){ns=Hn[Un];break}if(Gn==="bolditalic"&&this.pdf.internal.getFont(Hn[Un],"bold",{noFallback:!0,disableWarning:!0})!==void 0)ns=Hn[Un],Gn="bold";else if(this.pdf.internal.getFont(Hn[Un],"normal",{noFallback:!0,disableWarning:!0})!==void 0){ns=Hn[Un],Gn="normal";break}}if(ns===""){for(var ki=0;ki<Hn.length;ki++)if(_i[Hn[ki]]){ns=_i[Hn[ki]];break}}ns=ns===""?"Times":ns,this.pdf.setFont(ns,Gn)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(pt){this.ctx.globalCompositeOperation=pt}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(pt){this.ctx.globalAlpha=pt}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(pt){this.ctx.lineDashOffset=pt,tn.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(pt){this.ctx.lineDash=pt,tn.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(pt){this.ctx.ignoreClearRect=!!pt}})};qe.prototype.setLineDash=function(We){this.lineDash=We},qe.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},qe.prototype.fill=function(){It.call(this,"fill",!1)},qe.prototype.stroke=function(){It.call(this,"stroke",!1)},qe.prototype.beginPath=function(){this.path=[{type:"begin"}]},qe.prototype.moveTo=function(We,St){if(isNaN(We)||isNaN(St))throw x.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Nt=this.ctx.transform.applyToPoint(new ye(We,St));this.path.push({type:"mt",x:Nt.x,y:Nt.y}),this.ctx.lastPoint=new ye(We,St)},qe.prototype.closePath=function(){var We=new ye(0,0),St=0;for(St=this.path.length-1;St!==-1;St--)if(this.path[St].type==="begin"&&(0,d.default)(this.path[St+1])==="object"&&typeof this.path[St+1].x=="number"){We=new ye(this.path[St+1].x,this.path[St+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new ye(We.x,We.y)},qe.prototype.lineTo=function(We,St){if(isNaN(We)||isNaN(St))throw x.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Nt=this.ctx.transform.applyToPoint(new ye(We,St));this.path.push({type:"lt",x:Nt.x,y:Nt.y}),this.ctx.lastPoint=new ye(Nt.x,Nt.y)},qe.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),It.call(this,null,!0)},qe.prototype.quadraticCurveTo=function(We,St,Nt,Gt){if(isNaN(Nt)||isNaN(Gt)||isNaN(We)||isNaN(St))throw x.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Xt=this.ctx.transform.applyToPoint(new ye(Nt,Gt)),cr=this.ctx.transform.applyToPoint(new ye(We,St));this.path.push({type:"qct",x1:cr.x,y1:cr.y,x:Xt.x,y:Xt.y}),this.ctx.lastPoint=new ye(Xt.x,Xt.y)},qe.prototype.bezierCurveTo=function(We,St,Nt,Gt,Xt,cr){if(isNaN(Xt)||isNaN(cr)||isNaN(We)||isNaN(St)||isNaN(Nt)||isNaN(Gt))throw x.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Nr=this.ctx.transform.applyToPoint(new ye(Xt,cr)),Cr=this.ctx.transform.applyToPoint(new ye(We,St)),Gr=this.ctx.transform.applyToPoint(new ye(Nt,Gt));this.path.push({type:"bct",x1:Cr.x,y1:Cr.y,x2:Gr.x,y2:Gr.y,x:Nr.x,y:Nr.y}),this.ctx.lastPoint=new ye(Nr.x,Nr.y)},qe.prototype.arc=function(We,St,Nt,Gt,Xt,cr){if(isNaN(We)||isNaN(St)||isNaN(Nt)||isNaN(Gt)||isNaN(Xt))throw x.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(cr=!!cr,!this.ctx.transform.isIdentity){var Nr=this.ctx.transform.applyToPoint(new ye(We,St));We=Nr.x,St=Nr.y;var Cr=this.ctx.transform.applyToPoint(new ye(0,Nt)),Gr=this.ctx.transform.applyToPoint(new ye(0,0));Nt=Math.sqrt(Math.pow(Cr.x-Gr.x,2)+Math.pow(Cr.y-Gr.y,2))}Math.abs(Xt-Gt)>=2*Math.PI&&(Gt=0,Xt=2*Math.PI),this.path.push({type:"arc",x:We,y:St,radius:Nt,startAngle:Gt,endAngle:Xt,counterclockwise:cr})},qe.prototype.arcTo=function(We,St,Nt,Gt,Xt){throw new Error("arcTo not implemented.")},qe.prototype.rect=function(We,St,Nt,Gt){if(isNaN(We)||isNaN(St)||isNaN(Nt)||isNaN(Gt))throw x.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(We,St),this.lineTo(We+Nt,St),this.lineTo(We+Nt,St+Gt),this.lineTo(We,St+Gt),this.lineTo(We,St),this.lineTo(We+Nt,St),this.lineTo(We,St)},qe.prototype.fillRect=function(We,St,Nt,Gt){if(isNaN(We)||isNaN(St)||isNaN(Nt)||isNaN(Gt))throw x.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!Te.call(this)){var Xt={};this.lineCap!=="butt"&&(Xt.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(Xt.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(We,St,Nt,Gt),this.fill(),Xt.hasOwnProperty("lineCap")&&(this.lineCap=Xt.lineCap),Xt.hasOwnProperty("lineJoin")&&(this.lineJoin=Xt.lineJoin)}},qe.prototype.strokeRect=function(We,St,Nt,Gt){if(isNaN(We)||isNaN(St)||isNaN(Nt)||isNaN(Gt))throw x.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");Et.call(this)||(this.beginPath(),this.rect(We,St,Nt,Gt),this.stroke())},qe.prototype.clearRect=function(We,St,Nt,Gt){if(isNaN(We)||isNaN(St)||isNaN(Nt)||isNaN(Gt))throw x.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(We,St,Nt,Gt))},qe.prototype.save=function(We){We=typeof We!="boolean"||We;for(var St=this.pdf.internal.getCurrentPageInfo().pageNumber,Nt=0;Nt<this.pdf.internal.getNumberOfPages();Nt++)this.pdf.setPage(Nt+1),this.pdf.internal.out("q");if(this.pdf.setPage(St),We){this.ctx.fontSize=this.pdf.internal.getFontSize();var Gt=new Qe(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Gt}},qe.prototype.restore=function(We){We=typeof We!="boolean"||We;for(var St=this.pdf.internal.getCurrentPageInfo().pageNumber,Nt=0;Nt<this.pdf.internal.getNumberOfPages();Nt++)this.pdf.setPage(Nt+1),this.pdf.internal.out("Q");this.pdf.setPage(St),We&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},qe.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var lt=function(We){var St,Nt,Gt,Xt;if(We.isCanvasGradient===!0&&(We=We.getColor()),!We)return{r:0,g:0,b:0,a:0,style:We};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(We))St=0,Nt=0,Gt=0,Xt=0;else{var cr=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(We);if(cr!==null)St=parseInt(cr[1]),Nt=parseInt(cr[2]),Gt=parseInt(cr[3]),Xt=1;else if((cr=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(We))!==null)St=parseInt(cr[1]),Nt=parseInt(cr[2]),Gt=parseInt(cr[3]),Xt=parseFloat(cr[4]);else{if(Xt=1,typeof We=="string"&&We.charAt(0)!=="#"){var Nr=new N(We);We=Nr.ok?Nr.toHex():"#000000"}We.length===4?(St=We.substring(1,2),St+=St,Nt=We.substring(2,3),Nt+=Nt,Gt=We.substring(3,4),Gt+=Gt):(St=We.substring(1,3),Nt=We.substring(3,5),Gt=We.substring(5,7)),St=parseInt(St,16),Nt=parseInt(Nt,16),Gt=parseInt(Gt,16)}}return{r:St,g:Nt,b:Gt,a:Xt,style:We}},Te=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},Et=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};qe.prototype.fillText=function(We,St,Nt,Gt){if(isNaN(St)||isNaN(Nt)||typeof We!="string")throw x.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Gt=isNaN(Gt)?void 0:Gt,!Te.call(this)){var Xt=ar(this.ctx.transform.rotation),cr=this.ctx.transform.scaleX;mt.call(this,{text:We,x:St,y:Nt,scale:cr,angle:Xt,align:this.textAlign,maxWidth:Gt})}},qe.prototype.strokeText=function(We,St,Nt,Gt){if(isNaN(St)||isNaN(Nt)||typeof We!="string")throw x.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!Et.call(this)){Gt=isNaN(Gt)?void 0:Gt;var Xt=ar(this.ctx.transform.rotation),cr=this.ctx.transform.scaleX;mt.call(this,{text:We,x:St,y:Nt,scale:cr,renderingMode:"stroke",angle:Xt,align:this.textAlign,maxWidth:Gt})}},qe.prototype.measureText=function(We){if(typeof We!="string")throw x.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var St=this.pdf,Nt=this.pdf.internal.scaleFactor,Gt=St.internal.getFontSize(),Xt=St.getStringUnitWidth(We)*Gt/St.internal.scaleFactor;return new function(cr){var Nr=(cr=cr||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Nr}}),this}({width:Xt*=Math.round(96*Nt/72*1e4)/1e4})},qe.prototype.scale=function(We,St){if(isNaN(We)||isNaN(St))throw x.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Nt=new me(We,0,0,St,0,0);this.ctx.transform=this.ctx.transform.multiply(Nt)},qe.prototype.rotate=function(We){if(isNaN(We))throw x.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var St=new me(Math.cos(We),Math.sin(We),-Math.sin(We),Math.cos(We),0,0);this.ctx.transform=this.ctx.transform.multiply(St)},qe.prototype.translate=function(We,St){if(isNaN(We)||isNaN(St))throw x.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Nt=new me(1,0,0,1,We,St);this.ctx.transform=this.ctx.transform.multiply(Nt)},qe.prototype.transform=function(We,St,Nt,Gt,Xt,cr){if(isNaN(We)||isNaN(St)||isNaN(Nt)||isNaN(Gt)||isNaN(Xt)||isNaN(cr))throw x.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Nr=new me(We,St,Nt,Gt,Xt,cr);this.ctx.transform=this.ctx.transform.multiply(Nr)},qe.prototype.setTransform=function(We,St,Nt,Gt,Xt,cr){We=isNaN(We)?1:We,St=isNaN(St)?0:St,Nt=isNaN(Nt)?0:Nt,Gt=isNaN(Gt)?1:Gt,Xt=isNaN(Xt)?0:Xt,cr=isNaN(cr)?0:cr,this.ctx.transform=new me(We,St,Nt,Gt,Xt,cr)};var at=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};qe.prototype.drawImage=function(We,St,Nt,Gt,Xt,cr,Nr,Cr,Gr){var un=this.pdf.getImageProperties(We),En=1,Rn=1,yi=1,pt=1;Gt!==void 0&&Cr!==void 0&&(yi=Cr/Gt,pt=Gr/Xt,En=un.width/Gt*Cr/Gt,Rn=un.height/Xt*Gr/Xt),cr===void 0&&(cr=St,Nr=Nt,St=0,Nt=0),Gt!==void 0&&Cr===void 0&&(Cr=Gt,Gr=Xt),Gt===void 0&&Cr===void 0&&(Cr=un.width,Gr=un.height);var Sn=this.ctx.transform.decompose(),Ri=ar(Sn.rotate.shx),Tn=new me,nn=(Tn=(Tn=(Tn=Tn.multiply(Sn.translate)).multiply(Sn.skew)).multiply(Sn.scale)).applyToRectangle(new he(cr-St*yi,Nr-Nt*pt,Gt*En,Xt*Rn));if(this.autoPaging){for(var ji,Fn=Ct.call(this,nn),Hn=[],$n=0;$n<Fn.length;$n+=1)Hn.indexOf(Fn[$n])===-1&&Hn.push(Fn[$n]);qt(Hn);for(var ga=Hn[0],Di=Hn[Hn.length-1],Gn=ga;Gn<Di+1;Gn++){this.pdf.setPage(Gn);var ns=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],_i=Gn===1?this.posY+this.margin[0]:this.margin[0],Un=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ki=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Wn=Gn===1?0:Un+(Gn-2)*ki;if(this.ctx.clip_path.length!==0){var Gi=this.path;ji=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Pt(ji,this.posX+this.margin[3],-Wn+_i+this.ctx.prevPageLastElemOffset),Je.call(this,"fill",!0),this.path=Gi}var is=JSON.parse(JSON.stringify(nn));is=Pt([is],this.posX+this.margin[3],-Wn+_i+this.ctx.prevPageLastElemOffset)[0];var Zi=(Gn>ga||Gn<Di)&&at.call(this);Zi&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ns,ki,null).clip().discardPath()),this.pdf.addImage(We,"JPEG",is.x,is.y,is.w,is.h,null,null,Ri),Zi&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(We,"JPEG",nn.x,nn.y,nn.w,nn.h,null,null,Ri)};var Ct=function(We,St,Nt){var Gt=[];St=St||this.pdf.internal.pageSize.width,Nt=Nt||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Xt=this.posY+this.ctx.prevPageLastElemOffset;switch(We.type){default:case"mt":case"lt":Gt.push(Math.floor((We.y+Xt)/Nt)+1);break;case"arc":Gt.push(Math.floor((We.y+Xt-We.radius)/Nt)+1),Gt.push(Math.floor((We.y+Xt+We.radius)/Nt)+1);break;case"qct":var cr=Lr(this.ctx.lastPoint.x,this.ctx.lastPoint.y,We.x1,We.y1,We.x,We.y);Gt.push(Math.floor((cr.y+Xt)/Nt)+1),Gt.push(Math.floor((cr.y+cr.h+Xt)/Nt)+1);break;case"bct":var Nr=hn(this.ctx.lastPoint.x,this.ctx.lastPoint.y,We.x1,We.y1,We.x2,We.y2,We.x,We.y);Gt.push(Math.floor((Nr.y+Xt)/Nt)+1),Gt.push(Math.floor((Nr.y+Nr.h+Xt)/Nt)+1);break;case"rect":Gt.push(Math.floor((We.y+Xt)/Nt)+1),Gt.push(Math.floor((We.y+We.h+Xt)/Nt)+1)}for(var Cr=0;Cr<Gt.length;Cr+=1)for(;this.pdf.internal.getNumberOfPages()<Gt[Cr];)et.call(this);return Gt},et=function(){var We=this.fillStyle,St=this.strokeStyle,Nt=this.font,Gt=this.lineCap,Xt=this.lineWidth,cr=this.lineJoin;this.pdf.addPage(),this.fillStyle=We,this.strokeStyle=St,this.font=Nt,this.lineCap=Gt,this.lineWidth=Xt,this.lineJoin=cr},Pt=function(We,St,Nt){for(var Gt=0;Gt<We.length;Gt++)switch(We[Gt].type){case"bct":We[Gt].x2+=St,We[Gt].y2+=Nt;case"qct":We[Gt].x1+=St,We[Gt].y1+=Nt;default:We[Gt].x+=St,We[Gt].y+=Nt}return We},qt=function(We){return We.sort(function(St,Nt){return St-Nt})},It=function(We,St){var Nt=this.fillStyle,Gt=this.strokeStyle,Xt=this.lineCap,cr=this.lineWidth,Nr=Math.abs(cr*this.ctx.transform.scaleX),Cr=this.lineJoin;if(this.autoPaging){for(var Gr,un,En=JSON.parse(JSON.stringify(this.path)),Rn=JSON.parse(JSON.stringify(this.path)),yi=[],pt=0;pt<Rn.length;pt++)if(Rn[pt].x!==void 0)for(var Sn=Ct.call(this,Rn[pt]),Ri=0;Ri<Sn.length;Ri+=1)yi.indexOf(Sn[Ri])===-1&&yi.push(Sn[Ri]);for(var Tn=0;Tn<yi.length;Tn++)for(;this.pdf.internal.getNumberOfPages()<yi[Tn];)et.call(this);qt(yi);for(var nn=yi[0],ji=yi[yi.length-1],Fn=nn;Fn<ji+1;Fn++){this.pdf.setPage(Fn),this.fillStyle=Nt,this.strokeStyle=Gt,this.lineCap=Xt,this.lineWidth=Nr,this.lineJoin=Cr;var Hn=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],$n=Fn===1?this.posY+this.margin[0]:this.margin[0],ga=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Di=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Gn=Fn===1?0:ga+(Fn-2)*Di;if(this.ctx.clip_path.length!==0){var ns=this.path;Gr=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Pt(Gr,this.posX+this.margin[3],-Gn+$n+this.ctx.prevPageLastElemOffset),Je.call(this,We,!0),this.path=ns}if(un=JSON.parse(JSON.stringify(En)),this.path=Pt(un,this.posX+this.margin[3],-Gn+$n+this.ctx.prevPageLastElemOffset),St===!1||Fn===0){var _i=(Fn>nn||Fn<ji)&&at.call(this);_i&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Hn,Di,null).clip().discardPath()),Je.call(this,We,St),_i&&this.pdf.restoreGraphicsState()}this.lineWidth=cr}this.path=En}else this.lineWidth=Nr,Je.call(this,We,St),this.lineWidth=cr},Je=function(We,St){if((We!=="stroke"||St||!Et.call(this))&&(We==="stroke"||St||!Te.call(this))){for(var Nt,Gt,Xt=[],cr=this.path,Nr=0;Nr<cr.length;Nr++){var Cr=cr[Nr];switch(Cr.type){case"begin":Xt.push({begin:!0});break;case"close":Xt.push({close:!0});break;case"mt":Xt.push({start:Cr,deltas:[],abs:[]});break;case"lt":var Gr=Xt.length;if(cr[Nr-1]&&!isNaN(cr[Nr-1].x)&&(Nt=[Cr.x-cr[Nr-1].x,Cr.y-cr[Nr-1].y],Gr>0)){for(;Gr>=0;Gr--)if(Xt[Gr-1].close!==!0&&Xt[Gr-1].begin!==!0){Xt[Gr-1].deltas.push(Nt),Xt[Gr-1].abs.push(Cr);break}}break;case"bct":Nt=[Cr.x1-cr[Nr-1].x,Cr.y1-cr[Nr-1].y,Cr.x2-cr[Nr-1].x,Cr.y2-cr[Nr-1].y,Cr.x-cr[Nr-1].x,Cr.y-cr[Nr-1].y],Xt[Xt.length-1].deltas.push(Nt);break;case"qct":var un=cr[Nr-1].x+2/3*(Cr.x1-cr[Nr-1].x),En=cr[Nr-1].y+2/3*(Cr.y1-cr[Nr-1].y),Rn=Cr.x+2/3*(Cr.x1-Cr.x),yi=Cr.y+2/3*(Cr.y1-Cr.y),pt=Cr.x,Sn=Cr.y;Nt=[un-cr[Nr-1].x,En-cr[Nr-1].y,Rn-cr[Nr-1].x,yi-cr[Nr-1].y,pt-cr[Nr-1].x,Sn-cr[Nr-1].y],Xt[Xt.length-1].deltas.push(Nt);break;case"arc":Xt.push({deltas:[],abs:[],arc:!0}),Array.isArray(Xt[Xt.length-1].abs)&&Xt[Xt.length-1].abs.push(Cr)}}Gt=St?null:We==="stroke"?"stroke":"fill";for(var Ri=!1,Tn=0;Tn<Xt.length;Tn++)if(Xt[Tn].arc)for(var nn=Xt[Tn].abs,ji=0;ji<nn.length;ji++){var Fn=nn[ji];Fn.type==="arc"?ir.call(this,Fn.x,Fn.y,Fn.radius,Fn.startAngle,Fn.endAngle,Fn.counterclockwise,void 0,St,!Ri):Ot.call(this,Fn.x,Fn.y),Ri=!0}else if(Xt[Tn].close===!0)this.pdf.internal.out("h"),Ri=!1;else if(Xt[Tn].begin!==!0){var Hn=Xt[Tn].start.x,$n=Xt[Tn].start.y;Rt.call(this,Xt[Tn].deltas,Hn,$n),Ri=!0}Gt&&Mt.call(this,Gt),St&&xr.call(this)}},zt=function(We){var St=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Nt=St*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return We-Nt;case"top":return We+St-Nt;case"hanging":return We+St-2*Nt;case"middle":return We+St/2-Nt;default:return We}},Sr=function(We){return We+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};qe.prototype.createLinearGradient=function(){var We=function(){};return We.colorStops=[],We.addColorStop=function(St,Nt){this.colorStops.push([St,Nt])},We.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},We.isCanvasGradient=!0,We},qe.prototype.createPattern=function(){return this.createLinearGradient()},qe.prototype.createRadialGradient=function(){return this.createLinearGradient()};var ir=function(We,St,Nt,Gt,Xt,cr,Nr,Cr,Gr){for(var un=jr.call(this,Nt,Gt,Xt,cr),En=0;En<un.length;En++){var Rn=un[En];En===0&&(Gr?st.call(this,Rn.x1+We,Rn.y1+St):Ot.call(this,Rn.x1+We,Rn.y1+St)),Ar.call(this,We,St,Rn.x2,Rn.y2,Rn.x3,Rn.y3,Rn.x4,Rn.y4)}Cr?xr.call(this):Mt.call(this,Nr)},Mt=function(We){switch(We){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},xr=function(){this.pdf.clip(),this.pdf.discardPath()},st=function(We,St){this.pdf.internal.out(D(We)+" "+G(St)+" m")},mt=function(We){var St;switch(We.align){case"right":case"end":St="right";break;case"center":St="center";break;default:St="left"}var Nt,Gt,Xt,cr=this.pdf.getTextDimensions(We.text),Nr=zt.call(this,We.y),Cr=Sr.call(this,Nr)-cr.h,Gr=this.ctx.transform.applyToPoint(new ye(We.x,Nr));if(this.autoPaging){var un=this.ctx.transform.decompose(),En=new me;En=(En=(En=En.multiply(un.translate)).multiply(un.skew)).multiply(un.scale);for(var Rn=this.ctx.transform.applyToRectangle(new he(We.x,Nr,cr.w,cr.h)),yi=En.applyToRectangle(new he(We.x,Cr,cr.w,cr.h)),pt=Ct.call(this,yi),Sn=[],Ri=0;Ri<pt.length;Ri+=1)Sn.indexOf(pt[Ri])===-1&&Sn.push(pt[Ri]);qt(Sn);for(var Tn=Sn[0],nn=Sn[Sn.length-1],ji=Tn;ji<nn+1;ji++){this.pdf.setPage(ji);var Fn=ji===1?this.posY+this.margin[0]:this.margin[0],Hn=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],$n=this.pdf.internal.pageSize.height-this.margin[2],ga=$n-this.margin[0],Di=this.pdf.internal.pageSize.width-this.margin[1],Gn=Di-this.margin[3],ns=ji===1?0:Hn+(ji-2)*ga;if(this.ctx.clip_path.length!==0){var _i=this.path;Nt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Pt(Nt,this.posX+this.margin[3],-1*ns+Fn),Je.call(this,"fill",!0),this.path=_i}var Un=Pt([JSON.parse(JSON.stringify(yi))],this.posX+this.margin[3],-ns+Fn+this.ctx.prevPageLastElemOffset)[0];We.scale>=.01&&(Gt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Gt*We.scale),Xt=this.lineWidth,this.lineWidth=Xt*We.scale);var ki=this.autoPaging!=="text";if(ki||Un.y+Un.h<=$n){if(ki||Un.y>=Fn&&Un.x<=Di){var Wn=ki?We.text:this.pdf.splitTextToSize(We.text,We.maxWidth||Di-Un.x)[0],Gi=Pt([JSON.parse(JSON.stringify(Rn))],this.posX+this.margin[3],-ns+Fn+this.ctx.prevPageLastElemOffset)[0],is=ki&&(ji>Tn||ji<nn)&&at.call(this);is&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Gn,ga,null).clip().discardPath()),this.pdf.text(Wn,Gi.x,Gi.y,{angle:We.angle,align:St,renderingMode:We.renderingMode}),is&&this.pdf.restoreGraphicsState()}}else Un.y<$n&&(this.ctx.prevPageLastElemOffset+=$n-Un.y);We.scale>=.01&&(this.pdf.setFontSize(Gt),this.lineWidth=Xt)}}else We.scale>=.01&&(Gt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Gt*We.scale),Xt=this.lineWidth,this.lineWidth=Xt*We.scale),this.pdf.text(We.text,Gr.x+this.posX,Gr.y+this.posY,{angle:We.angle,align:St,renderingMode:We.renderingMode,maxWidth:We.maxWidth}),We.scale>=.01&&(this.pdf.setFontSize(Gt),this.lineWidth=Xt)},Ot=function(We,St,Nt,Gt){Nt=Nt||0,Gt=Gt||0,this.pdf.internal.out(D(We+Nt)+" "+G(St+Gt)+" l")},Rt=function(We,St,Nt){return this.pdf.lines(We,St,Nt,null,null)},Ar=function(We,St,Nt,Gt,Xt,cr,Nr,Cr){this.pdf.internal.out([k(X(Nt+We)),k(ee(Gt+St)),k(X(Xt+We)),k(ee(cr+St)),k(X(Nr+We)),k(ee(Cr+St)),"c"].join(" "))},jr=function(We,St,Nt,Gt){for(var Xt=2*Math.PI,cr=Math.PI/2;St>Nt;)St-=Xt;var Nr=Math.abs(Nt-St);Nr<Xt&&Gt&&(Nr=Xt-Nr);for(var Cr=[],Gr=Gt?-1:1,un=St;Nr>1e-5;){var En=un+Gr*Math.min(Nr,cr);Cr.push(Br.call(this,We,un,En)),Nr-=Math.abs(En-un),un=En}return Cr},Br=function(We,St,Nt){var Gt=(Nt-St)/2,Xt=We*Math.cos(Gt),cr=We*Math.sin(Gt),Nr=Xt,Cr=-cr,Gr=Nr*Nr+Cr*Cr,un=Gr+Nr*Xt+Cr*cr,En=4/3*(Math.sqrt(2*Gr*un)-un)/(Nr*cr-Cr*Xt),Rn=Nr-En*Cr,yi=Cr+En*Nr,pt=Rn,Sn=-yi,Ri=Gt+St,Tn=Math.cos(Ri),nn=Math.sin(Ri);return{x1:We*Math.cos(St),y1:We*Math.sin(St),x2:Rn*Tn-yi*nn,y2:Rn*nn+yi*Tn,x3:pt*Tn-Sn*nn,y3:pt*nn+Sn*Tn,x4:We*Math.cos(Nt),y4:We*Math.sin(Nt)}},ar=function(We){return 180*We/Math.PI},Lr=function(We,St,Nt,Gt,Xt,cr){var Nr=We+.5*(Nt-We),Cr=St+.5*(Gt-St),Gr=Xt+.5*(Nt-Xt),un=cr+.5*(Gt-cr),En=Math.min(We,Xt,Nr,Gr),Rn=Math.max(We,Xt,Nr,Gr),yi=Math.min(St,cr,Cr,un),pt=Math.max(St,cr,Cr,un);return new he(En,yi,Rn-En,pt-yi)},hn=function(We,St,Nt,Gt,Xt,cr,Nr,Cr){var Gr,un,En,Rn,yi,pt,Sn,Ri,Tn,nn,ji,Fn,Hn,$n,ga=Nt-We,Di=Gt-St,Gn=Xt-Nt,ns=cr-Gt,_i=Nr-Xt,Un=Cr-cr;for(un=0;un<41;un++)Tn=(Sn=(En=We+(Gr=un/40)*ga)+Gr*((yi=Nt+Gr*Gn)-En))+Gr*(yi+Gr*(Xt+Gr*_i-yi)-Sn),nn=(Ri=(Rn=St+Gr*Di)+Gr*((pt=Gt+Gr*ns)-Rn))+Gr*(pt+Gr*(cr+Gr*Un-pt)-Ri),un==0?(ji=Tn,Fn=nn,Hn=Tn,$n=nn):(ji=Math.min(ji,Tn),Fn=Math.min(Fn,nn),Hn=Math.max(Hn,Tn),$n=Math.max($n,nn));return new he(Math.round(ji),Math.round(Fn),Math.round(Hn-ji),Math.round($n-Fn))},tn=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var We,St,Nt=(We=this.ctx.lineDash,St=this.ctx.lineDashOffset,JSON.stringify({lineDash:We,lineDashOffset:St}));this.prevLineDash!==Nt&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Nt)}}})(Ge.API),(function(P){var k=function(ye){var he,me,Ie,Qe,qe,lt,Te,Et,at,Ct;for(me=[],Ie=0,Qe=(ye+=he="\0\0\0\0".slice(ye.length%4||4)).length;Qe>Ie;Ie+=4)(qe=(ye.charCodeAt(Ie)<<24)+(ye.charCodeAt(Ie+1)<<16)+(ye.charCodeAt(Ie+2)<<8)+ye.charCodeAt(Ie+3))!==0?(lt=(qe=((qe=((qe=((qe=(qe-(Ct=qe%85))/85)-(at=qe%85))/85)-(Et=qe%85))/85)-(Te=qe%85))/85)%85,me.push(lt+33,Te+33,Et+33,at+33,Ct+33)):me.push(122);return(function(et,Pt){for(var qt=Pt;qt>0;qt--)et.pop()})(me,he.length),String.fromCharCode.apply(String,me)+"~>"},D=function(ye){var he,me,Ie,Qe,qe,lt=String,Te="length",Et=255,at="charCodeAt",Ct="slice",et="replace";for(ye[Ct](-2),ye=ye[Ct](0,-2)[et](/\s/g,"")[et]("z","!!!!!"),Ie=[],Qe=0,qe=(ye+=he="uuuuu"[Ct](ye[Te]%5||5))[Te];qe>Qe;Qe+=5)me=52200625*(ye[at](Qe)-33)+614125*(ye[at](Qe+1)-33)+7225*(ye[at](Qe+2)-33)+85*(ye[at](Qe+3)-33)+(ye[at](Qe+4)-33),Ie.push(Et&me>>24,Et&me>>16,Et&me>>8,Et&me);return(function(Pt,qt){for(var It=qt;It>0;It--)Pt.pop()})(Ie,he[Te]),lt.fromCharCode.apply(lt,Ie)},G=function(ye){return ye.split("").map(function(he){return("0"+he.charCodeAt().toString(16)).slice(-2)}).join("")+">"},X=function(ye){var he=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((ye=ye.replace(/\s/g,"")).indexOf(">")!==-1&&(ye=ye.substr(0,ye.indexOf(">"))),ye.length%2&&(ye+="0"),he.test(ye)===!1)return"";for(var me="",Ie=0;Ie<ye.length;Ie+=2)me+=String.fromCharCode("0x"+(ye[Ie]+ye[Ie+1]));return me},ee=function(ye){for(var he=new Uint8Array(ye.length),me=ye.length;me--;)he[me]=ye.charCodeAt(me);return(he=(0,f.zlibSync)(he)).reduce(function(Ie,Qe){return Ie+String.fromCharCode(Qe)},"")};P.processDataByFilters=function(ye,he){var me=0,Ie=ye||"",Qe=[];for(typeof(he=he||[])=="string"&&(he=[he]),me=0;me<he.length;me+=1)switch(he[me]){case"ASCII85Decode":case"/ASCII85Decode":Ie=D(Ie),Qe.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":Ie=k(Ie),Qe.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":Ie=X(Ie),Qe.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":Ie=G(Ie),Qe.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":Ie=ee(Ie),Qe.push("/FlateDecode");break;default:throw new Error('The filter: "'+he[me]+'" is not implemented')}return{data:Ie,reverseChain:Qe.reverse().join(" ")}}})(Ge.API),(function(P){P.loadFile=function(k,D,G){return(function(X,ee,ye){ee=ee!==!1,ye=typeof ye=="function"?ye:function(){};var he=void 0;try{he=(function(me,Ie,Qe){var qe=new XMLHttpRequest,lt=0,Te=function(Et){var at=Et.length,Ct=[],et=String.fromCharCode;for(lt=0;lt<at;lt+=1)Ct.push(et(255&Et.charCodeAt(lt)));return Ct.join("")};if(qe.open("GET",me,!Ie),qe.overrideMimeType("text/plain; charset=x-user-defined"),Ie===!1&&(qe.onload=function(){qe.status===200?Qe(Te(this.responseText)):Qe(void 0)}),qe.send(null),Ie&&qe.status===200)return Te(qe.responseText)})(X,ee,ye)}catch{}return he})(k,D,G)},P.allowFsRead=void 0,P.loadImageFile=P.loadFile})(Ge.API),(function(P){function k(){return(g.html2canvas?Promise.resolve(g.html2canvas):Promise.resolve().then(l.t.bind(l,"html2canvas",23))).catch(function(he){return Promise.reject(new Error("Could not load html2canvas: "+he))}).then(function(he){return he.default?he.default:he})}function D(){return(g.DOMPurify?Promise.resolve(g.DOMPurify):Promise.resolve().then(l.bind(l,"./node_modules/dompurify/dist/purify.es.mjs"))).catch(function(he){return Promise.reject(new Error("Could not load dompurify: "+he))}).then(function(he){return he.default?he.default:he})}var G=function(he){var me=(0,d.default)(he);return me==="undefined"?"undefined":me==="string"||he instanceof String?"string":me==="number"||he instanceof Number?"number":me==="function"||he instanceof Function?"function":he&&he.constructor===Array?"array":he&&he.nodeType===1?"element":me==="object"?"object":"unknown"},X=function(he,me){var Ie=document.createElement(he);for(var Qe in me.className&&(Ie.className=me.className),me.innerHTML&&me.dompurify&&(Ie.innerHTML=me.dompurify.sanitize(me.innerHTML)),me.style)Ie.style[Qe]=me.style[Qe];return Ie},ee=function he(me,Ie){for(var Qe=me.nodeType===3?document.createTextNode(me.nodeValue):me.cloneNode(!1),qe=me.firstChild;qe;qe=qe.nextSibling)Ie!==!0&&qe.nodeType===1&&qe.nodeName==="SCRIPT"||Qe.appendChild(he(qe,Ie));return me.nodeType===1&&(me.nodeName==="CANVAS"?(Qe.width=me.width,Qe.height=me.height,Qe.getContext("2d").drawImage(me,0,0)):me.nodeName!=="TEXTAREA"&&me.nodeName!=="SELECT"||(Qe.value=me.value),Qe.addEventListener("load",function(){Qe.scrollTop=me.scrollTop,Qe.scrollLeft=me.scrollLeft},!0)),Qe},ye=function he(me){var Ie=Object.assign(he.convert(Promise.resolve()),JSON.parse(JSON.stringify(he.template))),Qe=he.convert(Promise.resolve(),Ie);return(Qe=Qe.setProgress(1,he,1,[he])).set(me)};(ye.prototype=Object.create(Promise.prototype)).constructor=ye,ye.convert=function(he,me){return he.__proto__=me||ye.prototype,he},ye.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},ye.prototype.from=function(he,me){return this.then(function(){switch(me=me||(function(Ie){switch(G(Ie)){case"string":return"string";case"element":return Ie.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(he),me){case"string":return this.then(D).then(function(Ie){return this.set({src:X("div",{innerHTML:he,dompurify:Ie})})});case"element":return this.set({src:he});case"canvas":return this.set({canvas:he});case"img":return this.set({img:he});default:return this.error("Unknown source type.")}})},ye.prototype.to=function(he){switch(he){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},ye.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var he={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},me=ee(this.prop.src,this.opt.html2canvas.javascriptEnabled);me.tagName==="BODY"&&(he.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=X("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=X("div",{className:"html2pdf__container",style:he}),this.prop.container.appendChild(me),this.prop.container.firstChild.appendChild(X("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},ye.prototype.toCanvas=function(){var he=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(he).then(k).then(function(me){var Ie=Object.assign({},this.opt.html2canvas);return delete Ie.onrendered,me(this.prop.container,Ie)}).then(function(me){(this.opt.html2canvas.onrendered||function(){})(me),this.prop.canvas=me,document.body.removeChild(this.prop.overlay)})},ye.prototype.toContext2d=function(){var he=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(he).then(k).then(function(me){var Ie=this.opt.jsPDF,Qe=this.opt.fontFaces,qe=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,lt=Object.assign({async:!0,allowTaint:!0,scale:qe,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete lt.onrendered,Ie.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,Ie.context2d.posX=this.opt.x,Ie.context2d.posY=this.opt.y,Ie.context2d.margin=this.opt.margin,Ie.context2d.fontFaces=Qe,Qe)for(var Te=0;Te<Qe.length;++Te){var Et=Qe[Te],at=Et.src.find(function(Ct){return Ct.format==="truetype"});at&&Ie.addFont(at.url,Et.ref.name,Et.ref.style)}return lt.windowHeight=lt.windowHeight||0,lt.windowHeight=lt.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):lt.windowHeight,Ie.context2d.save(!0),me(this.prop.container,lt)}).then(function(me){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(me),this.prop.canvas=me,document.body.removeChild(this.prop.overlay)})},ye.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var he=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=he})},ye.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},ye.prototype.output=function(he,me,Ie){return(Ie=Ie||"pdf").toLowerCase()==="img"||Ie.toLowerCase()==="image"?this.outputImg(he,me):this.outputPdf(he,me)},ye.prototype.outputPdf=function(he,me){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(he,me)})},ye.prototype.outputImg=function(he){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(he){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+he+'" is not supported.'}})},ye.prototype.save=function(he){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(he?{filename:he}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},ye.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},ye.prototype.set=function(he){if(G(he)!=="object")return this;var me=Object.keys(he||{}).map(function(Ie){if(Ie in ye.template.prop)return function(){this.prop[Ie]=he[Ie]};switch(Ie){case"margin":return this.setMargin.bind(this,he.margin);case"jsPDF":return function(){return this.opt.jsPDF=he.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,he.pageSize);default:return function(){this.opt[Ie]=he[Ie]}}},this);return this.then(function(){return this.thenList(me)})},ye.prototype.get=function(he,me){return this.then(function(){var Ie=he in ye.template.prop?this.prop[he]:this.opt[he];return me?me(Ie):Ie})},ye.prototype.setMargin=function(he){return this.then(function(){switch(G(he)){case"number":he=[he,he,he,he];case"array":if(he.length===2&&(he=[he[0],he[1],he[0],he[1]]),he.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=he}).then(this.setPageSize)},ye.prototype.setPageSize=function(he){function me(Ie,Qe){return Math.floor(Ie*Qe/72*96)}return this.then(function(){(he=he||Ge.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(he.inner={width:he.width-this.opt.margin[1]-this.opt.margin[3],height:he.height-this.opt.margin[0]-this.opt.margin[2]},he.inner.px={width:me(he.inner.width,he.k),height:me(he.inner.height,he.k)},he.inner.ratio=he.inner.height/he.inner.width),this.prop.pageSize=he})},ye.prototype.setProgress=function(he,me,Ie,Qe){return he!=null&&(this.progress.val=he),me!=null&&(this.progress.state=me),Ie!=null&&(this.progress.n=Ie),Qe!=null&&(this.progress.stack=Qe),this.progress.ratio=this.progress.val/this.progress.state,this},ye.prototype.updateProgress=function(he,me,Ie,Qe){return this.setProgress(he?this.progress.val+he:null,me||null,Ie?this.progress.n+Ie:null,Qe?this.progress.stack.concat(Qe):null)},ye.prototype.then=function(he,me){var Ie=this;return this.thenCore(he,me,function(Qe,qe){return Ie.updateProgress(null,null,1,[Qe]),Promise.prototype.then.call(this,function(lt){return Ie.updateProgress(null,Qe),lt}).then(Qe,qe).then(function(lt){return Ie.updateProgress(1),lt})})},ye.prototype.thenCore=function(he,me,Ie){Ie=Ie||Promise.prototype.then;var Qe=this;he&&(he=he.bind(Qe)),me&&(me=me.bind(Qe));var qe=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?Qe:ye.convert(Object.assign({},Qe),Promise.prototype),lt=Ie.call(qe,he,me);return ye.convert(lt,Qe.__proto__)},ye.prototype.thenExternal=function(he,me){return Promise.prototype.then.call(this,he,me)},ye.prototype.thenList=function(he){var me=this;return he.forEach(function(Ie){me=me.thenCore(Ie)}),me},ye.prototype.catch=function(he){he&&(he=he.bind(this));var me=Promise.prototype.catch.call(this,he);return ye.convert(me,this)},ye.prototype.catchExternal=function(he){return Promise.prototype.catch.call(this,he)},ye.prototype.error=function(he){return this.then(function(){throw new Error(he)})},ye.prototype.using=ye.prototype.set,ye.prototype.saveAs=ye.prototype.save,ye.prototype.export=ye.prototype.output,ye.prototype.run=ye.prototype.then,Ge.getPageSize=function(he,me,Ie){if((0,d.default)(he)==="object"){var Qe=he;he=Qe.orientation,me=Qe.unit||me,Ie=Qe.format||Ie}me=me||"mm",Ie=Ie||"a4",he=(""+(he||"P")).toLowerCase();var qe,lt=(""+Ie).toLowerCase(),Te={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(me){case"pt":qe=1;break;case"mm":qe=2.834645669291339;break;case"cm":qe=28.346456692913385;break;case"in":qe=72;break;case"px":qe=.75;break;case"pc":case"em":qe=12;break;case"ex":qe=6;break;default:throw"Invalid unit: "+me}var Et,at=0,Ct=0;if(Te.hasOwnProperty(lt))at=Te[lt][1]/qe,Ct=Te[lt][0]/qe;else try{at=Ie[1],Ct=Ie[0]}catch{throw new Error("Invalid format: "+Ie)}if(he==="p"||he==="portrait")he="p",Ct>at&&(Et=Ct,Ct=at,at=Et);else{if(he!=="l"&&he!=="landscape")throw"Invalid orientation: "+he;he="l",at>Ct&&(Et=Ct,Ct=at,at=Et)}return{width:Ct,height:at,unit:me,k:qe,orientation:he}},P.html=function(he,me){(me=me||{}).callback=me.callback||function(){},me.html2canvas=me.html2canvas||{},me.html2canvas.canvas=me.html2canvas.canvas||this.canvas,me.jsPDF=me.jsPDF||this,me.fontFaces=me.fontFaces?me.fontFaces.map(qs):null;var Ie=new ye(me);return me.worker?Ie:Ie.from(he).doCallback()}})(Ge.API),Ge.API.addJS=function(P){return Ya=P,this.internal.events.subscribe("postPutResources",function(){ml=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(ml+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),ra=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Ya+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){ml!==void 0&&ra!==void 0&&this.internal.out("/Names <</JavaScript "+ml+" 0 R>>")}),this},(function(P){var k;P.events.push(["postPutResources",function(){var D=this,G=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var X=D.outline.render().split(/\r\n/),ee=0;ee<X.length;ee++){var ye=X[ee],he=G.exec(ye);if(he!=null){var me=he[1];D.internal.newObjectDeferredBegin(me,!1)}D.internal.write(ye)}if(this.outline.createNamedDestinations){var Ie=this.internal.pages.length,Qe=[];for(ee=0;ee<Ie;ee++){var qe=D.internal.newObject();Qe.push(qe);var lt=D.internal.getPageInfo(ee+1);D.internal.write("<< /D["+lt.objId+" 0 R /XYZ null null null]>> endobj")}var Te=D.internal.newObject();for(D.internal.write("<< /Names [ "),ee=0;ee<Qe.length;ee++)D.internal.write("(page_"+(ee+1)+")"+Qe[ee]+" 0 R");D.internal.write(" ] >>","endobj"),k=D.internal.newObject(),D.internal.write("<< /Dests "+Te+" 0 R"),D.internal.write(">>","endobj")}}]),P.events.push(["putCatalog",function(){var D=this;D.outline.root.children.length>0&&(D.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&D.internal.write("/Names "+k+" 0 R"))}]),P.events.push(["initialized",function(){var D=this;D.outline={createNamedDestinations:!1,root:{children:[]}},D.outline.add=function(G,X,ee){var ye={title:X,options:ee,children:[]};return G==null&&(G=this.root),G.children.push(ye),ye},D.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=D,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},D.outline.genIds_r=function(G){G.id=D.internal.newObjectDeferred();for(var X=0;X<G.children.length;X++)this.genIds_r(G.children[X])},D.outline.renderRoot=function(G){this.objStart(G),this.line("/Type /Outlines"),G.children.length>0&&(this.line("/First "+this.makeRef(G.children[0])),this.line("/Last "+this.makeRef(G.children[G.children.length-1]))),this.line("/Count "+this.count_r({count:0},G)),this.objEnd()},D.outline.renderItems=function(G){for(var X=this.ctx.pdf.internal.getVerticalCoordinateString,ee=0;ee<G.children.length;ee++){var ye=G.children[ee];this.objStart(ye),this.line("/Title "+this.makeString(ye.title)),this.line("/Parent "+this.makeRef(G)),ee>0&&this.line("/Prev "+this.makeRef(G.children[ee-1])),ee<G.children.length-1&&this.line("/Next "+this.makeRef(G.children[ee+1])),ye.children.length>0&&(this.line("/First "+this.makeRef(ye.children[0])),this.line("/Last "+this.makeRef(ye.children[ye.children.length-1])));var he=this.count=this.count_r({count:0},ye);if(he>0&&this.line("/Count "+he),ye.options&&ye.options.pageNumber){var me=D.internal.getPageInfo(ye.options.pageNumber);this.line("/Dest ["+me.objId+" 0 R /XYZ 0 "+X(0)+" 0]")}this.objEnd()}for(var Ie=0;Ie<G.children.length;Ie++)this.renderItems(G.children[Ie])},D.outline.line=function(G){this.ctx.val+=G+`\r
`},D.outline.makeRef=function(G){return G.id+" 0 R"},D.outline.makeString=function(G){return"("+D.internal.pdfEscape(G)+")"},D.outline.objStart=function(G){this.ctx.val+=`\r
`+G.id+` 0 obj\r
<<\r
`},D.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},D.outline.count_r=function(G,X){for(var ee=0;ee<X.children.length;ee++)G.count++,this.count_r(G,X.children[ee]);return G.count}}])})(Ge.API),(function(P){var k=[192,193,194,195,196,197,198,199];P.processJPEG=function(D,G,X,ee,ye,he){var me,Ie=this.decode.DCT_DECODE,Qe=null;if(typeof D=="string"||this.__addimage__.isArrayBuffer(D)||this.__addimage__.isArrayBufferView(D)){switch(D=ye||D,D=this.__addimage__.isArrayBuffer(D)?new Uint8Array(D):D,me=(function(qe){for(var lt,Te=256*qe.charCodeAt(4)+qe.charCodeAt(5),Et=qe.length,at={width:0,height:0,numcomponents:1},Ct=4;Ct<Et;Ct+=2){if(Ct+=Te,k.indexOf(qe.charCodeAt(Ct+1))!==-1){lt=256*qe.charCodeAt(Ct+5)+qe.charCodeAt(Ct+6),at={width:256*qe.charCodeAt(Ct+7)+qe.charCodeAt(Ct+8),height:lt,numcomponents:qe.charCodeAt(Ct+9)};break}Te=256*qe.charCodeAt(Ct+2)+qe.charCodeAt(Ct+3)}return at})(D=this.__addimage__.isArrayBufferView(D)?this.__addimage__.arrayBufferToBinaryString(D):D),me.numcomponents){case 1:he=this.color_spaces.DEVICE_GRAY;break;case 4:he=this.color_spaces.DEVICE_CMYK;break;case 3:he=this.color_spaces.DEVICE_RGB}Qe={data:D,width:me.width,height:me.height,colorSpace:he,bitsPerComponent:8,filter:Ie,index:G,alias:X}}return Qe}})(Ge.API),Ge.API.processPNG=function(P,k,D,G){if(this.__addimage__.isArrayBuffer(P)&&(P=new Uint8Array(P)),this.__addimage__.isArrayBufferView(P)){var X,ee=(0,p.decode)(P,{checkCrc:!0}),ye=ee.width,he=ee.height,me=ee.channels,Ie=ee.palette,Qe=ee.depth;X=Ie&&me===1?(function(ir){for(var Mt=ir.width,xr=ir.height,st=ir.data,mt=ir.palette,Ot=ir.depth,Rt=!1,Ar=[],jr=[],Br=void 0,ar=!1,Lr=0,hn=0;hn<mt.length;hn++){var tn=(0,A.default)(mt[hn],4),We=tn[0],St=tn[1],Nt=tn[2],Gt=tn[3];Ar.push(We,St,Nt),Gt!=null&&(Gt===0?(Lr++,jr.length<1&&jr.push(hn)):Gt<255&&(ar=!0))}if(ar||Lr>1){Rt=!0,jr=void 0;var Xt=Mt*xr;Br=new Uint8Array(Xt);for(var cr=new DataView(st.buffer),Nr=0;Nr<Xt;Nr++){var Cr=Ca(cr,Nr,Ot),Gr=(0,A.default)(mt[Cr],4)[3];Br[Nr]=Gr}}else Lr===0&&(jr=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:Rt?8:void 0,colorBytes:st,alphaBytes:Br,needSMask:Rt,palette:Ar,mask:jr}})(ee):me===2||me===4?(function(ir){for(var Mt=ir.data,xr=ir.width,st=ir.height,mt=ir.channels,Ot=ir.depth,Rt=mt===2?"DeviceGray":"DeviceRGB",Ar=mt-1,jr=xr*st,Br=Ar,ar=jr*Br,Lr=1*jr,hn=Math.ceil(ar*Ot/8),tn=Math.ceil(Lr*Ot/8),We=new Uint8Array(hn),St=new Uint8Array(tn),Nt=new DataView(Mt.buffer),Gt=new DataView(We.buffer),Xt=new DataView(St.buffer),cr=!1,Nr=0;Nr<jr;Nr++){for(var Cr=Nr*mt,Gr=0;Gr<Br;Gr++)gi(Gt,Ca(Nt,Cr+Gr,Ot),Nr*Br+Gr,Ot);var un=Ca(Nt,Cr+Br,Ot);un<(1<<Ot)-1&&(cr=!0),gi(Xt,un,1*Nr,Ot)}return{colorSpace:Rt,colorsPerPixel:Ar,sMaskBitsPerComponent:cr?Ot:void 0,colorBytes:We,alphaBytes:St,needSMask:cr}})(ee):(function(ir){var Mt=ir.data,xr=ir.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:xr,colorsPerPixel:xr==="DeviceGray"?1:3,colorBytes:Mt instanceof Uint16Array?(function(st){for(var mt=st.length,Ot=new Uint8Array(2*mt),Rt=new DataView(Ot.buffer,Ot.byteOffset,Ot.byteLength),Ar=0;Ar<mt;Ar++)Rt.setUint16(2*Ar,st[Ar],!1);return Ot})(Mt):Mt,needSMask:!1}})(ee);var qe,lt,Te,Et=X,at=Et.colorSpace,Ct=Et.colorsPerPixel,et=Et.sMaskBitsPerComponent,Pt=Et.colorBytes,qt=Et.alphaBytes,It=Et.needSMask,Je=Et.palette,zt=Et.mask,Sr=null;return G!==Ge.API.image_compression.NONE&&typeof f.zlibSync=="function"?(Sr=(function(ir){var Mt;switch(ir){case Ge.API.image_compression.FAST:Mt=11;break;case Ge.API.image_compression.MEDIUM:Mt=13;break;case Ge.API.image_compression.SLOW:Mt=14;break;default:Mt=12}return Mt})(G),qe=this.decode.FLATE_DECODE,lt="/Predictor ".concat(Sr," /Colors ").concat(Ct," /BitsPerComponent ").concat(Qe," /Columns ").concat(ye),P=pl(Pt,Math.ceil(ye*Ct*Qe/8),Ct,Qe,G),It&&(Te=pl(qt,Math.ceil(ye*et/8),1,et,G))):(qe=void 0,lt=void 0,P=Pt,It&&(Te=qt)),(this.__addimage__.isArrayBuffer(P)||this.__addimage__.isArrayBufferView(P))&&(P=this.__addimage__.arrayBufferToBinaryString(P)),(Te&&this.__addimage__.isArrayBuffer(Te)||this.__addimage__.isArrayBufferView(Te))&&(Te=this.__addimage__.arrayBufferToBinaryString(Te)),{alias:D,data:P,index:k,filter:qe,decodeParameters:lt,transparency:zt,palette:Je,sMask:Te,predictor:Sr,width:ye,height:he,bitsPerComponent:Qe,sMaskBitsPerComponent:et,colorSpace:at}}},(function(P){P.processGIF89A=function(k,D,G,X){var ee=new hs(k),ye=ee.width,he=ee.height,me=[];ee.decodeAndBlitFrameRGBA(0,me);var Ie={data:me,width:ye,height:he},Qe=new Qo(100).encode(Ie,100);return P.processJPEG.call(this,Qe,D,G,X)},P.processGIF87A=P.processGIF89A})(Ge.API),Hi.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var P=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(P);for(var k=0;k<P;k++){var D=this.datav.getUint8(this.pos++,!0),G=this.datav.getUint8(this.pos++,!0),X=this.datav.getUint8(this.pos++,!0),ee=this.datav.getUint8(this.pos++,!0);this.palette[k]={red:X,green:G,blue:D,quad:ee}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Hi.prototype.parseBGR=function(){this.pos=this.offset;try{var P="bit"+this.bitPP,k=this.width*this.height*4;this.data=new Uint8Array(k),this[P]()}catch(D){x.log("bit decode error:"+D)}},Hi.prototype.bit1=function(){var P,k=Math.ceil(this.width/8),D=k%4;for(P=this.height-1;P>=0;P--){for(var G=this.bottom_up?P:this.height-1-P,X=0;X<k;X++)for(var ee=this.datav.getUint8(this.pos++,!0),ye=G*this.width*4+8*X*4,he=0;he<8&&8*X+he<this.width;he++){var me=this.palette[ee>>7-he&1];this.data[ye+4*he]=me.blue,this.data[ye+4*he+1]=me.green,this.data[ye+4*he+2]=me.red,this.data[ye+4*he+3]=255}D!==0&&(this.pos+=4-D)}},Hi.prototype.bit4=function(){for(var P=Math.ceil(this.width/2),k=P%4,D=this.height-1;D>=0;D--){for(var G=this.bottom_up?D:this.height-1-D,X=0;X<P;X++){var ee=this.datav.getUint8(this.pos++,!0),ye=G*this.width*4+2*X*4,he=ee>>4,me=15&ee,Ie=this.palette[he];if(this.data[ye]=Ie.blue,this.data[ye+1]=Ie.green,this.data[ye+2]=Ie.red,this.data[ye+3]=255,2*X+1>=this.width)break;Ie=this.palette[me],this.data[ye+4]=Ie.blue,this.data[ye+4+1]=Ie.green,this.data[ye+4+2]=Ie.red,this.data[ye+4+3]=255}k!==0&&(this.pos+=4-k)}},Hi.prototype.bit8=function(){for(var P=this.width%4,k=this.height-1;k>=0;k--){for(var D=this.bottom_up?k:this.height-1-k,G=0;G<this.width;G++){var X=this.datav.getUint8(this.pos++,!0),ee=D*this.width*4+4*G;if(X<this.palette.length){var ye=this.palette[X];this.data[ee]=ye.red,this.data[ee+1]=ye.green,this.data[ee+2]=ye.blue,this.data[ee+3]=255}else this.data[ee]=255,this.data[ee+1]=255,this.data[ee+2]=255,this.data[ee+3]=255}P!==0&&(this.pos+=4-P)}},Hi.prototype.bit15=function(){for(var P=this.width%3,k=parseInt("11111",2),D=this.height-1;D>=0;D--){for(var G=this.bottom_up?D:this.height-1-D,X=0;X<this.width;X++){var ee=this.datav.getUint16(this.pos,!0);this.pos+=2;var ye=(ee&k)/k*255|0,he=(ee>>5&k)/k*255|0,me=(ee>>10&k)/k*255|0,Ie=ee>>15?255:0,Qe=G*this.width*4+4*X;this.data[Qe]=me,this.data[Qe+1]=he,this.data[Qe+2]=ye,this.data[Qe+3]=Ie}this.pos+=P}},Hi.prototype.bit16=function(){for(var P=this.width%3,k=parseInt("11111",2),D=parseInt("111111",2),G=this.height-1;G>=0;G--){for(var X=this.bottom_up?G:this.height-1-G,ee=0;ee<this.width;ee++){var ye=this.datav.getUint16(this.pos,!0);this.pos+=2;var he=(ye&k)/k*255|0,me=(ye>>5&D)/D*255|0,Ie=(ye>>11)/k*255|0,Qe=X*this.width*4+4*ee;this.data[Qe]=Ie,this.data[Qe+1]=me,this.data[Qe+2]=he,this.data[Qe+3]=255}this.pos+=P}},Hi.prototype.bit24=function(){for(var P=this.height-1;P>=0;P--){for(var k=this.bottom_up?P:this.height-1-P,D=0;D<this.width;D++){var G=this.datav.getUint8(this.pos++,!0),X=this.datav.getUint8(this.pos++,!0),ee=this.datav.getUint8(this.pos++,!0),ye=k*this.width*4+4*D;this.data[ye]=ee,this.data[ye+1]=X,this.data[ye+2]=G,this.data[ye+3]=255}this.pos+=this.width%4}},Hi.prototype.bit32=function(){for(var P=this.height-1;P>=0;P--)for(var k=this.bottom_up?P:this.height-1-P,D=0;D<this.width;D++){var G=this.datav.getUint8(this.pos++,!0),X=this.datav.getUint8(this.pos++,!0),ee=this.datav.getUint8(this.pos++,!0),ye=this.datav.getUint8(this.pos++,!0),he=k*this.width*4+4*D;this.data[he]=ee,this.data[he+1]=X,this.data[he+2]=G,this.data[he+3]=ye}},Hi.prototype.getData=function(){return this.data},(function(P){P.processBMP=function(k,D,G,X){var ee=new Hi(k,!1),ye=ee.width,he=ee.height,me={data:ee.getData(),width:ye,height:he},Ie=new Qo(100).encode(me,100);return P.processJPEG.call(this,Ie,D,G,X)}})(Ge.API),Vo.prototype.getData=function(){return this.data},(function(P){P.processWEBP=function(k,D,G,X){var ee=new Vo(k),ye=ee.width,he=ee.height,me={data:ee.getData(),width:ye,height:he},Ie=new Qo(100).encode(me,100);return P.processJPEG.call(this,Ie,D,G,X)}})(Ge.API),Ge.API.processRGBA=function(P,k,D){for(var G=P.data,X=G.length,ee=new Uint8Array(X/4*3),ye=new Uint8Array(X/4),he=0,me=0,Ie=0;Ie<X;Ie+=4){var Qe=G[Ie],qe=G[Ie+1],lt=G[Ie+2],Te=G[Ie+3];ee[he++]=Qe,ee[he++]=qe,ee[he++]=lt,ye[me++]=Te}var Et=this.__addimage__.arrayBufferToBinaryString(ee);return{alpha:this.__addimage__.arrayBufferToBinaryString(ye),data:Et,index:k,alias:D,colorSpace:"DeviceRGB",bitsPerComponent:8,width:P.width,height:P.height}},Ge.API.setLanguage=function(P){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[P]!==void 0&&(this.internal.languageSettings.languageCode=P,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Ws=Ge.API,ba=Ws.getCharWidthsArray=function(P,k){var D,G,X=(k=k||{}).font||this.internal.getFont(),ee=k.fontSize||this.internal.getFontSize(),ye=k.charSpace||this.internal.getCharSpace(),he=k.widths?k.widths:X.metadata.Unicode.widths,me=he.fof?he.fof:1,Ie=k.kerning?k.kerning:X.metadata.Unicode.kerning,Qe=Ie.fof?Ie.fof:1,qe=k.doKerning!==!1,lt=0,Te=P.length,Et=0,at=he[0]||me,Ct=[];for(D=0;D<Te;D++)G=P.charCodeAt(D),typeof X.metadata.widthOfString=="function"?Ct.push((X.metadata.widthOfGlyph(X.metadata.characterToGlyph(G))+ye*(1e3/ee)||0)/1e3):(lt=qe&&(0,d.default)(Ie[G])==="object"&&!isNaN(parseInt(Ie[G][Et],10))?Ie[G][Et]/Qe:0,Ct.push((he[G]||at)/me+lt)),Et=G;return Ct},Us=Ws.getStringUnitWidth=function(P,k){var D=(k=k||{}).fontSize||this.internal.getFontSize(),G=k.font||this.internal.getFont(),X=k.charSpace||this.internal.getCharSpace();return Ws.processArabic&&(P=Ws.processArabic(P)),typeof G.metadata.widthOfString=="function"?G.metadata.widthOfString(P,D,X)/D:ba.apply(this,arguments).reduce(function(ee,ye){return ee+ye},0)},kl=function(P,k,D,G){for(var X=[],ee=0,ye=P.length,he=0;ee!==ye&&he+k[ee]<D;)he+=k[ee],ee++;X.push(P.slice(0,ee));var me=ee;for(he=0;ee!==ye;)he+k[ee]>G&&(X.push(P.slice(me,ee)),he=0,me=ee),he+=k[ee],ee++;return me!==ee&&X.push(P.slice(me,ee)),X},po=function(P,k,D){D||(D={});var G,X,ee,ye,he,me,Ie,Qe=[],qe=[Qe],lt=D.textIndent||0,Te=0,Et=0,at=P.split(" "),Ct=ba.apply(this,[" ",D])[0];if(me=D.lineIndent===-1?at[0].length+2:D.lineIndent||0){var et=Array(me).join(" "),Pt=[];at.map(function(It){(It=It.split(/\s*\n/)).length>1?Pt=Pt.concat(It.map(function(Je,zt){return(zt&&Je.length?`
`:"")+Je})):Pt.push(It[0])}),at=Pt,me=Us.apply(this,[et,D])}for(ee=0,ye=at.length;ee<ye;ee++){var qt=0;if(G=at[ee],me&&G[0]==`
`&&(G=G.substr(1),qt=1),lt+Te+(Et=(X=ba.apply(this,[G,D])).reduce(function(It,Je){return It+Je},0))>k||qt){if(Et>k){for(he=kl.apply(this,[G,X,k-(lt+Te),k]),Qe.push(he.shift()),Qe=[he.pop()];he.length;)qe.push([he.shift()]);Et=X.slice(G.length-(Qe[0]?Qe[0].length:0)).reduce(function(It,Je){return It+Je},0)}else Qe=[G];qe.push(Qe),lt=Et+me,Te=Ct}else Qe.push(G),lt+=Te+Et,Te=Ct}return Ie=me?function(It,Je){return(Je?et:"")+It.join(" ")}:function(It){return It.join(" ")},qe.map(Ie)},Ws.splitTextToSize=function(P,k,D){var G,X=(D=D||{}).fontSize||this.internal.getFontSize(),ee=(function(Qe){if(Qe.widths&&Qe.kerning)return{widths:Qe.widths,kerning:Qe.kerning};var qe=this.internal.getFont(Qe.fontName,Qe.fontStyle),lt="Unicode";return qe.metadata[lt]?{widths:qe.metadata[lt].widths||{0:1},kerning:qe.metadata[lt].kerning||{}}:{font:qe.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,D);G=Array.isArray(P)?P:String(P).split(/\r?\n/);var ye=1*this.internal.scaleFactor*k/X;ee.textIndent=D.textIndent?1*D.textIndent*this.internal.scaleFactor/X:0,ee.lineIndent=D.lineIndent;var he,me,Ie=[];for(he=0,me=G.length;he<me;he++)Ie=Ie.concat(po.apply(this,[G[he],ye,ee]));return Ie},(function(P){P.__fontmetrics__=P.__fontmetrics__||{};for(var k="0123456789abcdef",D="klmnopqrstuvwxyz",G={},X={},ee=0;ee<16;ee++)G[D[ee]]=k[ee],X[k[ee]]=D[ee];var ye=function(lt){return"0x"+parseInt(lt,10).toString(16)},he=P.__fontmetrics__.compress=function(lt){var Te,Et,at,Ct,et=["{"];for(var Pt in lt){if(Te=lt[Pt],isNaN(parseInt(Pt,10))?Et="'"+Pt+"'":(Pt=parseInt(Pt,10),Et=(Et=ye(Pt).slice(2)).slice(0,-1)+X[Et.slice(-1)]),typeof Te=="number")Te<0?(at=ye(Te).slice(3),Ct="-"):(at=ye(Te).slice(2),Ct=""),at=Ct+at.slice(0,-1)+X[at.slice(-1)];else{if((0,d.default)(Te)!=="object")throw new Error("Don't know what to do with value type "+(0,d.default)(Te)+".");at=he(Te)}et.push(Et+at)}return et.push("}"),et.join("")},me=P.__fontmetrics__.uncompress=function(lt){if(typeof lt!="string")throw new Error("Invalid argument passed to uncompress.");for(var Te,Et,at,Ct,et={},Pt=1,qt=et,It=[],Je="",zt="",Sr=lt.length-1,ir=1;ir<Sr;ir+=1)(Ct=lt[ir])=="'"?Te?(at=Te.join(""),Te=void 0):Te=[]:Te?Te.push(Ct):Ct=="{"?(It.push([qt,at]),qt={},at=void 0):Ct=="}"?((Et=It.pop())[0][Et[1]]=qt,at=void 0,qt=Et[0]):Ct=="-"?Pt=-1:at===void 0?G.hasOwnProperty(Ct)?(Je+=G[Ct],at=parseInt(Je,16)*Pt,Pt=1,Je=""):Je+=Ct:G.hasOwnProperty(Ct)?(zt+=G[Ct],qt[at]=parseInt(zt,16)*Pt,Pt=1,at=void 0,zt=""):zt+=Ct;return et},Ie={codePages:["WinAnsiEncoding"],WinAnsiEncoding:me("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},Qe={Unicode:{Courier:Ie,"Courier-Bold":Ie,"Courier-BoldOblique":Ie,"Courier-Oblique":Ie,Helvetica:Ie,"Helvetica-Bold":Ie,"Helvetica-BoldOblique":Ie,"Helvetica-Oblique":Ie,"Times-Roman":Ie,"Times-Bold":Ie,"Times-BoldItalic":Ie,"Times-Italic":Ie}},qe={Unicode:{"Courier-Oblique":me("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":me("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":me("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:me("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":me("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":me("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:me("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:me("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":me("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:me("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":me("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":me("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":me("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":me("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};P.events.push(["addFont",function(lt){var Te=lt.font,Et=qe.Unicode[Te.postScriptName];Et&&(Te.metadata.Unicode={},Te.metadata.Unicode.widths=Et.widths,Te.metadata.Unicode.kerning=Et.kerning);var at=Qe.Unicode[Te.postScriptName];at&&(Te.metadata.Unicode.encoding=at,Te.encoding=at.codePages[0])}])})(Ge.API),(function(P){var k=function(D){for(var G=D.length,X=new Uint8Array(G),ee=0;ee<G;ee++)X[ee]=D.charCodeAt(ee);return X};P.API.events.push(["addFont",function(D){var G=void 0,X=D.font,ee=D.instance;if(!X.isStandardFont){if(ee===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+X.postScriptName+"').");if(typeof(G=ee.existsFileInVFS(X.postScriptName)===!1?ee.loadFile(X.postScriptName):ee.getFileFromVFS(X.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+X.postScriptName+"').");(function(ye,he){he=/^\x00\x01\x00\x00/.test(he)?k(he):k(I(he)),ye.metadata=P.API.TTFFont.open(he),ye.metadata.Unicode=ye.metadata.Unicode||{encoding:{},kerning:{},widths:[]},ye.metadata.glyIdsUsed=[0]})(X,G)}}])})(Ge),Ge.API.addSvgAsImage=function(P,k,D,G,X,ee,ye,he){if(isNaN(k)||isNaN(D))throw x.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(G)||isNaN(X))throw x.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var me=document.createElement("canvas");me.width=G,me.height=X;var Ie=me.getContext("2d");Ie.fillStyle="#fff",Ie.fillRect(0,0,me.width,me.height);var Qe={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},qe=this;return(g.canvg?Promise.resolve(g.canvg):Promise.resolve().then(l.bind(l,"./node_modules/canvg/lib/index.es.js"))).catch(function(lt){return Promise.reject(new Error("Could not load canvg: "+lt))}).then(function(lt){return lt.default?lt.default:lt}).then(function(lt){return lt.fromString(Ie,P,Qe)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(lt){return lt.render(Qe)}).then(function(){qe.addImage(me.toDataURL("image/jpeg",1),k,D,G,X,ye,he)})},Ge.API.putTotalPages=function(P){var k,D=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(k=new RegExp(P,"g"),D=this.internal.getNumberOfPages()):(k=new RegExp(this.pdfEscape16(P,this.internal.getFont()),"g"),D=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var G=1;G<=this.internal.getNumberOfPages();G++)for(var X=0;X<this.internal.pages[G].length;X++)this.internal.pages[G][X]=this.internal.pages[G][X].replace(k,D);return this},Ge.API.viewerPreferences=function(P,k){var D;P=P||{},k=k||!1;var G,X,ee,ye={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},he=Object.keys(ye),me=[],Ie=0,Qe=0,qe=0;function lt(Et,at){var Ct,et=!1;for(Ct=0;Ct<Et.length;Ct+=1)Et[Ct]===at&&(et=!0);return et}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(ye)),this.internal.viewerpreferences.isSubscribed=!1),D=this.internal.viewerpreferences.configuration,P==="reset"||k===!0){var Te=he.length;for(qe=0;qe<Te;qe+=1)D[he[qe]].value=D[he[qe]].defaultValue,D[he[qe]].explicitSet=!1}if((0,d.default)(P)==="object"){for(X in P)if(ee=P[X],lt(he,X)&&ee!==void 0){if(D[X].type==="boolean"&&typeof ee=="boolean")D[X].value=ee;else if(D[X].type==="name"&&lt(D[X].valueSet,ee))D[X].value=ee;else if(D[X].type==="integer"&&Number.isInteger(ee))D[X].value=ee;else if(D[X].type==="array"){for(Ie=0;Ie<ee.length;Ie+=1)if(G=!0,ee[Ie].length===1&&typeof ee[Ie][0]=="number")me.push(String(ee[Ie]-1));else if(ee[Ie].length>1){for(Qe=0;Qe<ee[Ie].length;Qe+=1)typeof ee[Ie][Qe]!="number"&&(G=!1);G===!0&&me.push([ee[Ie][0]-1,ee[Ie][1]-1].join(" "))}D[X].value="["+me.join(" ")+"]"}else D[X].value=D[X].defaultValue;D[X].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var Et,at=[];for(Et in D)D[Et].explicitSet===!0&&(D[Et].type==="name"?at.push("/"+Et+" /"+D[Et].value):at.push("/"+Et+" "+D[Et].value));at.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+at.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=D,this},(function(P){var k=function(){var G='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',X=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),ee=unescape(encodeURIComponent(G)),ye=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),he=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),me=unescape(encodeURIComponent("</x:xmpmeta>")),Ie=ee.length+ye.length+he.length+X.length+me.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+Ie+" >>"),this.internal.write("stream"),this.internal.write(X+ee+ye+he+me),this.internal.write("endstream"),this.internal.write("endobj")},D=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};P.addMetadata=function(G,X){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:G,namespaceuri:X||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",D),this.internal.events.subscribe("postPutResources",k)),this}})(Ge.API),(function(P){var k=P.API,D=k.pdfEscape16=function(ee,ye){for(var he,me=ye.metadata.Unicode.widths,Ie=["","0","00","000","0000"],Qe=[""],qe=0,lt=ee.length;qe<lt;++qe){if(he=ye.metadata.characterToGlyph(ee.charCodeAt(qe)),ye.metadata.glyIdsUsed.push(he),ye.metadata.toUnicode[he]=ee.charCodeAt(qe),me.indexOf(he)==-1&&(me.push(he),me.push([parseInt(ye.metadata.widthOfGlyph(he),10)])),he=="0")return Qe.join("");he=he.toString(16),Qe.push(Ie[4-he.length],he)}return Qe.join("")},G=function(ee){var ye,he,me,Ie,Qe,qe,lt;for(Qe=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,me=[],qe=0,lt=(he=Object.keys(ee).sort(function(Te,Et){return Te-Et})).length;qe<lt;qe++)ye=he[qe],me.length>=100&&(Qe+=`
`+me.length+` beginbfchar
`+me.join(`
`)+`
endbfchar`,me=[]),ee[ye]!==void 0&&ee[ye]!==null&&typeof ee[ye].toString=="function"&&(Ie=("0000"+ee[ye].toString(16)).slice(-4),ye=("0000"+(+ye).toString(16)).slice(-4),me.push("<"+ye+"><"+Ie+">"));return me.length&&(Qe+=`
`+me.length+` beginbfchar
`+me.join(`
`)+`
endbfchar
`),Qe+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};k.events.push(["putFont",function(ee){(function(ye){var he=ye.font,me=ye.out,Ie=ye.newObject,Qe=ye.putStream;if(he.metadata instanceof P.API.TTFFont&&he.encoding==="Identity-H"){for(var qe=he.metadata.Unicode.widths,lt=he.metadata.subset.encode(he.metadata.glyIdsUsed,1),Te="",Et=0;Et<lt.length;Et++)Te+=String.fromCharCode(lt[Et]);var at=Ie();Qe({data:Te,addLength1:!0,objectId:at}),me("endobj");var Ct=Ie();Qe({data:G(he.metadata.toUnicode),addLength1:!0,objectId:Ct}),me("endobj");var et=Ie();me("<<"),me("/Type /FontDescriptor"),me("/FontName /"+Me(he.fontName)),me("/FontFile2 "+at+" 0 R"),me("/FontBBox "+P.API.PDFObject.convert(he.metadata.bbox)),me("/Flags "+he.metadata.flags),me("/StemV "+he.metadata.stemV),me("/ItalicAngle "+he.metadata.italicAngle),me("/Ascent "+he.metadata.ascender),me("/Descent "+he.metadata.decender),me("/CapHeight "+he.metadata.capHeight),me(">>"),me("endobj");var Pt=Ie();me("<<"),me("/Type /Font"),me("/BaseFont /"+Me(he.fontName)),me("/FontDescriptor "+et+" 0 R"),me("/W "+P.API.PDFObject.convert(qe)),me("/CIDToGIDMap /Identity"),me("/DW 1000"),me("/Subtype /CIDFontType2"),me("/CIDSystemInfo"),me("<<"),me("/Supplement 0"),me("/Registry (Adobe)"),me("/Ordering ("+he.encoding+")"),me(">>"),me(">>"),me("endobj"),he.objectNumber=Ie(),me("<<"),me("/Type /Font"),me("/Subtype /Type0"),me("/ToUnicode "+Ct+" 0 R"),me("/BaseFont /"+Me(he.fontName)),me("/Encoding /"+he.encoding),me("/DescendantFonts ["+Pt+" 0 R]"),me(">>"),me("endobj"),he.isAlreadyPutted=!0}})(ee)}]),k.events.push(["putFont",function(ee){(function(ye){var he=ye.font,me=ye.out,Ie=ye.newObject,Qe=ye.putStream;if(he.metadata instanceof P.API.TTFFont&&he.encoding==="WinAnsiEncoding"){for(var qe=he.metadata.rawData,lt="",Te=0;Te<qe.length;Te++)lt+=String.fromCharCode(qe[Te]);var Et=Ie();Qe({data:lt,addLength1:!0,objectId:Et}),me("endobj");var at=Ie();Qe({data:G(he.metadata.toUnicode),addLength1:!0,objectId:at}),me("endobj");var Ct=Ie();me("<<"),me("/Descent "+he.metadata.decender),me("/CapHeight "+he.metadata.capHeight),me("/StemV "+he.metadata.stemV),me("/Type /FontDescriptor"),me("/FontFile2 "+Et+" 0 R"),me("/Flags 96"),me("/FontBBox "+P.API.PDFObject.convert(he.metadata.bbox)),me("/FontName /"+Me(he.fontName)),me("/ItalicAngle "+he.metadata.italicAngle),me("/Ascent "+he.metadata.ascender),me(">>"),me("endobj"),he.objectNumber=Ie();for(var et=0;et<he.metadata.hmtx.widths.length;et++)he.metadata.hmtx.widths[et]=parseInt(he.metadata.hmtx.widths[et]*(1e3/he.metadata.head.unitsPerEm));me("<</Subtype/TrueType/Type/Font/ToUnicode "+at+" 0 R/BaseFont/"+Me(he.fontName)+"/FontDescriptor "+Ct+" 0 R/Encoding/"+he.encoding+" /FirstChar 29 /LastChar 255 /Widths "+P.API.PDFObject.convert(he.metadata.hmtx.widths)+">>"),me("endobj"),he.isAlreadyPutted=!0}})(ee)}]);var X=function(ee){var ye,he=ee.text||"",me=ee.x,Ie=ee.y,Qe=ee.options||{},qe=ee.mutex||{},lt=qe.pdfEscape,Te=qe.activeFontKey,Et=qe.fonts,at=Te,Ct="",et=0,Pt="",qt=Et[at].encoding;if(Et[at].encoding!=="Identity-H")return{text:he,x:me,y:Ie,options:Qe,mutex:qe};for(Pt=he,at=Te,Array.isArray(he)&&(Pt=he[0]),et=0;et<Pt.length;et+=1)Et[at].metadata.hasOwnProperty("cmap")&&(ye=Et[at].metadata.cmap.unicode.codeMap[Pt[et].charCodeAt(0)]),ye||Pt[et].charCodeAt(0)<256&&Et[at].metadata.hasOwnProperty("Unicode")?Ct+=Pt[et]:Ct+="";var It="";return parseInt(at.slice(1))<14||qt==="WinAnsiEncoding"?It=lt(Ct,at).split("").map(function(Je){return Je.charCodeAt(0).toString(16)}).join(""):qt==="Identity-H"&&(It=D(Ct,Et[at])),qe.isHex=!0,{text:It,x:me,y:Ie,options:Qe,mutex:qe}};k.events.push(["postProcessText",function(ee){var ye=ee.text||"",he=[],me={text:ye,x:ee.x,y:ee.y,options:ee.options,mutex:ee.mutex};if(Array.isArray(ye)){var Ie=0;for(Ie=0;Ie<ye.length;Ie+=1)Array.isArray(ye[Ie])&&ye[Ie].length===3?he.push([X(Object.assign({},me,{text:ye[Ie][0]})).text,ye[Ie][1],ye[Ie][2]]):he.push(X(Object.assign({},me,{text:ye[Ie]})).text);ee.text=he}else ee.text=X(Object.assign({},me,{text:ye})).text}])})(Ge),(function(P){var k=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};P.existsFileInVFS=function(D){return k.call(this),this.internal.vFS[D]!==void 0},P.addFileToVFS=function(D,G){return k.call(this),this.internal.vFS[D]=G,this},P.getFileFromVFS=function(D){return k.call(this),this.internal.vFS[D]!==void 0?this.internal.vFS[D]:null}})(Ge.API),(function(P){P.__bidiEngine__=P.prototype.__bidiEngine__=function(G){var X,ee,ye,he,me,Ie,Qe,qe=k,lt=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],Te=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],Et={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},at={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},Ct=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],et=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),Pt=!1,qt=0;this.__bidiEngine__={};var It=function(st){var mt=st.charCodeAt(),Ot=mt>>8,Rt=at[Ot];return Rt!==void 0?qe[256*Rt+(255&mt)]:Ot===252||Ot===253?"AL":et.test(Ot)?"L":Ot===8?"R":"N"},Je=function(st){for(var mt,Ot=0;Ot<st.length;Ot++){if((mt=It(st.charAt(Ot)))==="L")return!1;if(mt==="R")return!0}return!1},zt=function(st,mt,Ot,Rt){var Ar,jr,Br,ar,Lr=mt[Rt];switch(Lr){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":Pt=!1;break;case"N":case"AN":break;case"EN":Pt&&(Lr="AN");break;case"AL":Pt=!0,Lr="R";break;case"WS":case"BN":Lr="N";break;case"CS":Rt<1||Rt+1>=mt.length||(Ar=Ot[Rt-1])!=="EN"&&Ar!=="AN"||(jr=mt[Rt+1])!=="EN"&&jr!=="AN"?Lr="N":Pt&&(jr="AN"),Lr=jr===Ar?jr:"N";break;case"ES":Lr=(Ar=Rt>0?Ot[Rt-1]:"B")==="EN"&&Rt+1<mt.length&&mt[Rt+1]==="EN"?"EN":"N";break;case"ET":if(Rt>0&&Ot[Rt-1]==="EN"){Lr="EN";break}if(Pt){Lr="N";break}for(Br=Rt+1,ar=mt.length;Br<ar&&mt[Br]==="ET";)Br++;Lr=Br<ar&&mt[Br]==="EN"?"EN":"N";break;case"NSM":if(ye&&!he){for(ar=mt.length,Br=Rt+1;Br<ar&&mt[Br]==="NSM";)Br++;if(Br<ar){var hn=st[Rt],tn=hn>=1425&&hn<=2303||hn===64286;if(Ar=mt[Br],tn&&(Ar==="R"||Ar==="AL")){Lr="R";break}}}Lr=Rt<1||(Ar=mt[Rt-1])==="B"?"N":Ot[Rt-1];break;case"B":Pt=!1,X=!0,Lr=qt;break;case"S":ee=!0,Lr="N"}return Lr},Sr=function(st,mt,Ot){var Rt=st.split("");return Ot&&ir(Rt,Ot,{hiLevel:qt}),Rt.reverse(),mt&&mt.reverse(),Rt.join("")},ir=function(st,mt,Ot){var Rt,Ar,jr,Br,ar,Lr=-1,hn=st.length,tn=0,We=[],St=qt?Te:lt,Nt=[];for(Pt=!1,X=!1,ee=!1,Ar=0;Ar<hn;Ar++)Nt[Ar]=It(st[Ar]);for(jr=0;jr<hn;jr++){if(ar=tn,We[jr]=zt(st,Nt,We,jr),Rt=240&(tn=St[ar][Et[We[jr]]]),tn&=15,mt[jr]=Br=St[tn][5],Rt>0)if(Rt===16){for(Ar=Lr;Ar<jr;Ar++)mt[Ar]=1;Lr=-1}else Lr=-1;if(St[tn][6])Lr===-1&&(Lr=jr);else if(Lr>-1){for(Ar=Lr;Ar<jr;Ar++)mt[Ar]=Br;Lr=-1}Nt[jr]==="B"&&(mt[jr]=0),Ot.hiLevel|=Br}ee&&(function(Gt,Xt,cr){for(var Nr=0;Nr<cr;Nr++)if(Gt[Nr]==="S"){Xt[Nr]=qt;for(var Cr=Nr-1;Cr>=0&&Gt[Cr]==="WS";Cr--)Xt[Cr]=qt}})(Nt,mt,hn)},Mt=function(st,mt,Ot,Rt,Ar){if(!(Ar.hiLevel<st)){if(st===1&&qt===1&&!X)return mt.reverse(),void(Ot&&Ot.reverse());for(var jr,Br,ar,Lr,hn=mt.length,tn=0;tn<hn;){if(Rt[tn]>=st){for(ar=tn+1;ar<hn&&Rt[ar]>=st;)ar++;for(Lr=tn,Br=ar-1;Lr<Br;Lr++,Br--)jr=mt[Lr],mt[Lr]=mt[Br],mt[Br]=jr,Ot&&(jr=Ot[Lr],Ot[Lr]=Ot[Br],Ot[Br]=jr);tn=ar}tn++}}},xr=function(st,mt,Ot){var Rt=st.split(""),Ar={hiLevel:qt};return Ot||(Ot=[]),ir(Rt,Ot,Ar),(function(jr,Br,ar){if(ar.hiLevel!==0&&Qe)for(var Lr,hn=0;hn<jr.length;hn++)Br[hn]===1&&(Lr=Ct.indexOf(jr[hn]))>=0&&(jr[hn]=Ct[Lr+1])})(Rt,Ot,Ar),Mt(2,Rt,mt,Ot,Ar),Mt(1,Rt,mt,Ot,Ar),Rt.join("")};return this.__bidiEngine__.doBidiReorder=function(st,mt,Ot){if((function(Ar,jr){if(jr)for(var Br=0;Br<Ar.length;Br++)jr[Br]=Br;he===void 0&&(he=Je(Ar)),Ie===void 0&&(Ie=Je(Ar))})(st,mt),ye||!me||Ie)if(ye&&me&&he^Ie)qt=he?1:0,st=Sr(st,mt,Ot);else if(!ye&&me&&Ie)qt=he?1:0,st=xr(st,mt,Ot),st=Sr(st,mt);else if(!ye||he||me||Ie){if(ye&&!me&&he^Ie)st=Sr(st,mt),he?(qt=0,st=xr(st,mt,Ot)):(qt=1,st=xr(st,mt,Ot),st=Sr(st,mt));else if(ye&&he&&!me&&Ie)qt=1,st=xr(st,mt,Ot),st=Sr(st,mt);else if(!ye&&!me&&he^Ie){var Rt=Qe;he?(qt=1,st=xr(st,mt,Ot),qt=0,Qe=!1,st=xr(st,mt,Ot),Qe=Rt):(qt=0,st=xr(st,mt,Ot),st=Sr(st,mt),qt=1,Qe=!1,st=xr(st,mt,Ot),Qe=Rt,st=Sr(st,mt))}}else qt=0,st=xr(st,mt,Ot);else qt=he?1:0,st=xr(st,mt,Ot);return st},this.__bidiEngine__.setOptions=function(st){st&&(ye=st.isInputVisual,me=st.isOutputVisual,he=st.isInputRtl,Ie=st.isOutputRtl,Qe=st.isSymmetricSwapping)},this.__bidiEngine__.setOptions(G),this.__bidiEngine__};var k=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],D=new P.__bidiEngine__({isInputVisual:!0});P.API.events.push(["postProcessText",function(G){var X=G.text;G.x,G.y;var ee=G.options||{};G.mutex,ee.lang;var ye=[];if(ee.isInputVisual=typeof ee.isInputVisual!="boolean"||ee.isInputVisual,D.setOptions(ee),Object.prototype.toString.call(X)==="[object Array]"){var he=0;for(ye=[],he=0;he<X.length;he+=1)Object.prototype.toString.call(X[he])==="[object Array]"?ye.push([D.doBidiReorder(X[he][0]),X[he][1],X[he][2]]):ye.push([D.doBidiReorder(X[he])]);G.text=ye}else G.text=D.doBidiReorder(X);D.setOptions({isInputVisual:!0})}])})(Ge),Ge.API.TTFFont=(function(){function P(k){var D;if(this.rawData=k,D=this.contents=new Xs(k),this.contents.pos=4,D.readString(4)==="ttcf")throw new Error("TTCF not supported.");D.pos=0,this.parse(),this.subset=new ct(this),this.registerTTF()}return P.open=function(k){return new P(k)},P.prototype.parse=function(){return this.directory=new fs(this.contents),this.head=new zs(this),this.name=new ie(this),this.cmap=new go(this),this.toUnicode={},this.hhea=new no(this),this.maxp=new le(this),this.hmtx=new F(this),this.post=new Ht(this),this.os2=new zo(this),this.loca=new $e(this),this.glyf=new te(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},P.prototype.registerTTF=function(){var k,D,G,X,ee;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var ye,he,me,Ie;for(Ie=[],ye=0,he=(me=this.bbox).length;ye<he;ye++)k=me[ye],Ie.push(Math.round(k*this.scaleFactor));return Ie}).call(this),this.stemV=0,this.post.exists?(G=255&(X=this.post.italic_angle),32768&(D=X>>16)&&(D=-(1+(65535^D))),this.italicAngle=+(D+"."+G)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(ee=this.familyClass)===1||ee===2||ee===3||ee===4||ee===5||ee===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},P.prototype.characterToGlyph=function(k){var D;return((D=this.cmap.unicode)!=null?D.codeMap[k]:void 0)||0},P.prototype.widthOfGlyph=function(k){var D;return D=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(k).advance*D},P.prototype.widthOfString=function(k,D,G){var X,ee,ye,he;for(ye=0,ee=0,he=(k=""+k).length;0<=he?ee<he:ee>he;ee=0<=he?++ee:--ee)X=k.charCodeAt(ee),ye+=this.widthOfGlyph(this.characterToGlyph(X))+G*(1e3/D)||0;return ye*(D/1e3)},P.prototype.lineHeight=function(k,D){var G;return D==null&&(D=!1),G=D?this.lineGap:0,(this.ascender+G-this.decender)/1e3*k},P})();var Ea,Xs=(function(){function P(k){this.data=k??[],this.pos=0,this.length=this.data.length}return P.prototype.readByte=function(){return this.data[this.pos++]},P.prototype.writeByte=function(k){return this.data[this.pos++]=k},P.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},P.prototype.writeUInt32=function(k){return this.writeByte(k>>>24&255),this.writeByte(k>>16&255),this.writeByte(k>>8&255),this.writeByte(255&k)},P.prototype.readInt32=function(){var k;return(k=this.readUInt32())>=2147483648?k-4294967296:k},P.prototype.writeInt32=function(k){return k<0&&(k+=4294967296),this.writeUInt32(k)},P.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},P.prototype.writeUInt16=function(k){return this.writeByte(k>>8&255),this.writeByte(255&k)},P.prototype.readInt16=function(){var k;return(k=this.readUInt16())>=32768?k-65536:k},P.prototype.writeInt16=function(k){return k<0&&(k+=65536),this.writeUInt16(k)},P.prototype.readString=function(k){var D,G;for(G=[],D=0;0<=k?D<k:D>k;D=0<=k?++D:--D)G[D]=String.fromCharCode(this.readByte());return G.join("")},P.prototype.writeString=function(k){var D,G,X;for(X=[],D=0,G=k.length;0<=G?D<G:D>G;D=0<=G?++D:--D)X.push(this.writeByte(k.charCodeAt(D)));return X},P.prototype.readShort=function(){return this.readInt16()},P.prototype.writeShort=function(k){return this.writeInt16(k)},P.prototype.readLongLong=function(){var k,D,G,X,ee,ye,he,me;return k=this.readByte(),D=this.readByte(),G=this.readByte(),X=this.readByte(),ee=this.readByte(),ye=this.readByte(),he=this.readByte(),me=this.readByte(),128&k?-1*(72057594037927940*(255^k)+281474976710656*(255^D)+1099511627776*(255^G)+4294967296*(255^X)+16777216*(255^ee)+65536*(255^ye)+256*(255^he)+(255^me)+1):72057594037927940*k+281474976710656*D+1099511627776*G+4294967296*X+16777216*ee+65536*ye+256*he+me},P.prototype.writeLongLong=function(k){var D,G;return D=Math.floor(k/4294967296),G=4294967295&k,this.writeByte(D>>24&255),this.writeByte(D>>16&255),this.writeByte(D>>8&255),this.writeByte(255&D),this.writeByte(G>>24&255),this.writeByte(G>>16&255),this.writeByte(G>>8&255),this.writeByte(255&G)},P.prototype.readInt=function(){return this.readInt32()},P.prototype.writeInt=function(k){return this.writeInt32(k)},P.prototype.read=function(k){var D,G;for(D=[],G=0;0<=k?G<k:G>k;G=0<=k?++G:--G)D.push(this.readByte());return D},P.prototype.write=function(k){var D,G,X,ee;for(ee=[],G=0,X=k.length;G<X;G++)D=k[G],ee.push(this.writeByte(D));return ee},P})(),fs=(function(){var P;function k(D){var G,X,ee;for(this.scalarType=D.readInt(),this.tableCount=D.readShort(),this.searchRange=D.readShort(),this.entrySelector=D.readShort(),this.rangeShift=D.readShort(),this.tables={},X=0,ee=this.tableCount;0<=ee?X<ee:X>ee;X=0<=ee?++X:--X)G={tag:D.readString(4),checksum:D.readInt(),offset:D.readInt(),length:D.readInt()},this.tables[G.tag]=G}return k.prototype.encode=function(D){var G,X,ee,ye,he,me,Ie,Qe,qe,lt,Te,Et,at;for(at in Te=Object.keys(D).length,me=Math.log(2),qe=16*Math.floor(Math.log(Te)/me),ye=Math.floor(qe/me),Qe=16*Te-qe,(X=new Xs).writeInt(this.scalarType),X.writeShort(Te),X.writeShort(qe),X.writeShort(ye),X.writeShort(Qe),ee=16*Te,Ie=X.pos+ee,he=null,Et=[],D)for(lt=D[at],X.writeString(at),X.writeInt(P(lt)),X.writeInt(Ie),X.writeInt(lt.length),Et=Et.concat(lt),at==="head"&&(he=Ie),Ie+=lt.length;Ie%4;)Et.push(0),Ie++;return X.write(Et),G=2981146554-P(X.data),X.pos=he+8,X.writeUInt32(G),X.data},P=function(D){var G,X,ee,ye;for(D=z.call(D);D.length%4;)D.push(0);for(ee=new Xs(D),X=0,G=0,ye=D.length;G<ye;G=G+=4)X+=ee.readUInt32();return 4294967295&X},k})(),To={}.hasOwnProperty,za=function(P,k){for(var D in k)To.call(k,D)&&(P[D]=k[D]);function G(){this.constructor=P}return G.prototype=k.prototype,P.prototype=new G,P.__super__=k.prototype,P};Ea=(function(){function P(k){var D;this.file=k,D=this.file.directory.tables[this.tag],this.exists=!!D,D&&(this.offset=D.offset,this.length=D.length,this.parse(this.file.contents))}return P.prototype.parse=function(){},P.prototype.encode=function(){},P.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},P})();var zs=(function(){function P(){return P.__super__.constructor.apply(this,arguments)}return za(P,Ea),P.prototype.tag="head",P.prototype.parse=function(k){return k.pos=this.offset,this.version=k.readInt(),this.revision=k.readInt(),this.checkSumAdjustment=k.readInt(),this.magicNumber=k.readInt(),this.flags=k.readShort(),this.unitsPerEm=k.readShort(),this.created=k.readLongLong(),this.modified=k.readLongLong(),this.xMin=k.readShort(),this.yMin=k.readShort(),this.xMax=k.readShort(),this.yMax=k.readShort(),this.macStyle=k.readShort(),this.lowestRecPPEM=k.readShort(),this.fontDirectionHint=k.readShort(),this.indexToLocFormat=k.readShort(),this.glyphDataFormat=k.readShort()},P.prototype.encode=function(k){var D;return(D=new Xs).writeInt(this.version),D.writeInt(this.revision),D.writeInt(this.checkSumAdjustment),D.writeInt(this.magicNumber),D.writeShort(this.flags),D.writeShort(this.unitsPerEm),D.writeLongLong(this.created),D.writeLongLong(this.modified),D.writeShort(this.xMin),D.writeShort(this.yMin),D.writeShort(this.xMax),D.writeShort(this.yMax),D.writeShort(this.macStyle),D.writeShort(this.lowestRecPPEM),D.writeShort(this.fontDirectionHint),D.writeShort(k),D.writeShort(this.glyphDataFormat),D.data},P})(),qa=(function(){function P(k,D){var G,X,ee,ye,he,me,Ie,Qe,qe,lt,Te,Et,at,Ct,et,Pt,qt;switch(this.platformID=k.readUInt16(),this.encodingID=k.readShort(),this.offset=D+k.readInt(),qe=k.pos,k.pos=this.offset,this.format=k.readUInt16(),this.length=k.readUInt16(),this.language=k.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(me=0;me<256;++me)this.codeMap[me]=k.readByte();break;case 4:for(Te=k.readUInt16(),lt=Te/2,k.pos+=6,ee=(function(){var It,Je;for(Je=[],me=It=0;0<=lt?It<lt:It>lt;me=0<=lt?++It:--It)Je.push(k.readUInt16());return Je})(),k.pos+=2,at=(function(){var It,Je;for(Je=[],me=It=0;0<=lt?It<lt:It>lt;me=0<=lt?++It:--It)Je.push(k.readUInt16());return Je})(),Ie=(function(){var It,Je;for(Je=[],me=It=0;0<=lt?It<lt:It>lt;me=0<=lt?++It:--It)Je.push(k.readUInt16());return Je})(),Qe=(function(){var It,Je;for(Je=[],me=It=0;0<=lt?It<lt:It>lt;me=0<=lt?++It:--It)Je.push(k.readUInt16());return Je})(),X=(this.length-k.pos+this.offset)/2,he=(function(){var It,Je;for(Je=[],me=It=0;0<=X?It<X:It>X;me=0<=X?++It:--It)Je.push(k.readUInt16());return Je})(),me=et=0,qt=ee.length;et<qt;me=++et)for(Ct=ee[me],G=Pt=Et=at[me];Et<=Ct?Pt<=Ct:Pt>=Ct;G=Et<=Ct?++Pt:--Pt)Qe[me]===0?ye=G+Ie[me]:(ye=he[Qe[me]/2+(G-Et)-(lt-me)]||0)!==0&&(ye+=Ie[me]),this.codeMap[G]=65535&ye}k.pos=qe}return P.encode=function(k,D){var G,X,ee,ye,he,me,Ie,Qe,qe,lt,Te,Et,at,Ct,et,Pt,qt,It,Je,zt,Sr,ir,Mt,xr,st,mt,Ot,Rt,Ar,jr,Br,ar,Lr,hn,tn,We,St,Nt,Gt,Xt,cr,Nr,Cr,Gr,un,En;switch(Rt=new Xs,ye=Object.keys(k).sort(function(Rn,yi){return Rn-yi}),D){case"macroman":for(at=0,Ct=(function(){var Rn=[];for(Et=0;Et<256;++Et)Rn.push(0);return Rn})(),Pt={0:0},ee={},Ar=0,Lr=ye.length;Ar<Lr;Ar++)Pt[Cr=k[X=ye[Ar]]]==null&&(Pt[Cr]=++at),ee[X]={old:k[X],new:Pt[k[X]]},Ct[X]=Pt[k[X]];return Rt.writeUInt16(1),Rt.writeUInt16(0),Rt.writeUInt32(12),Rt.writeUInt16(0),Rt.writeUInt16(262),Rt.writeUInt16(0),Rt.write(Ct),{charMap:ee,subtable:Rt.data,maxGlyphID:at+1};case"unicode":for(mt=[],qe=[],qt=0,Pt={},G={},et=Ie=null,jr=0,hn=ye.length;jr<hn;jr++)Pt[Je=k[X=ye[jr]]]==null&&(Pt[Je]=++qt),G[X]={old:Je,new:Pt[Je]},he=Pt[Je]-X,et!=null&&he===Ie||(et&&qe.push(et),mt.push(X),Ie=he),et=X;for(et&&qe.push(et),qe.push(65535),mt.push(65535),xr=2*(Mt=mt.length),ir=2*Math.pow(Math.log(Mt)/Math.LN2,2),lt=Math.log(ir/2)/Math.LN2,Sr=2*Mt-ir,me=[],zt=[],Te=[],Et=Br=0,tn=mt.length;Br<tn;Et=++Br){if(st=mt[Et],Qe=qe[Et],st===65535){me.push(0),zt.push(0);break}if(st-(Ot=G[st].new)>=32768)for(me.push(0),zt.push(2*(Te.length+Mt-Et)),X=ar=st;st<=Qe?ar<=Qe:ar>=Qe;X=st<=Qe?++ar:--ar)Te.push(G[X].new);else me.push(Ot-st),zt.push(0)}for(Rt.writeUInt16(3),Rt.writeUInt16(1),Rt.writeUInt32(12),Rt.writeUInt16(4),Rt.writeUInt16(16+8*Mt+2*Te.length),Rt.writeUInt16(0),Rt.writeUInt16(xr),Rt.writeUInt16(ir),Rt.writeUInt16(lt),Rt.writeUInt16(Sr),cr=0,We=qe.length;cr<We;cr++)X=qe[cr],Rt.writeUInt16(X);for(Rt.writeUInt16(0),Nr=0,St=mt.length;Nr<St;Nr++)X=mt[Nr],Rt.writeUInt16(X);for(Gr=0,Nt=me.length;Gr<Nt;Gr++)he=me[Gr],Rt.writeUInt16(he);for(un=0,Gt=zt.length;un<Gt;un++)It=zt[un],Rt.writeUInt16(It);for(En=0,Xt=Te.length;En<Xt;En++)at=Te[En],Rt.writeUInt16(at);return{charMap:G,subtable:Rt.data,maxGlyphID:qt+1}}},P})(),go=(function(){function P(){return P.__super__.constructor.apply(this,arguments)}return za(P,Ea),P.prototype.tag="cmap",P.prototype.parse=function(k){var D,G,X;for(k.pos=this.offset,this.version=k.readUInt16(),X=k.readUInt16(),this.tables=[],this.unicode=null,G=0;0<=X?G<X:G>X;G=0<=X?++G:--G)D=new qa(k,this.offset),this.tables.push(D),D.isUnicode&&this.unicode==null&&(this.unicode=D);return!0},P.encode=function(k,D){var G,X;return D==null&&(D="macroman"),G=qa.encode(k,D),(X=new Xs).writeUInt16(0),X.writeUInt16(1),G.table=X.data.concat(G.subtable),G},P})(),no=(function(){function P(){return P.__super__.constructor.apply(this,arguments)}return za(P,Ea),P.prototype.tag="hhea",P.prototype.parse=function(k){return k.pos=this.offset,this.version=k.readInt(),this.ascender=k.readShort(),this.decender=k.readShort(),this.lineGap=k.readShort(),this.advanceWidthMax=k.readShort(),this.minLeftSideBearing=k.readShort(),this.minRightSideBearing=k.readShort(),this.xMaxExtent=k.readShort(),this.caretSlopeRise=k.readShort(),this.caretSlopeRun=k.readShort(),this.caretOffset=k.readShort(),k.pos+=8,this.metricDataFormat=k.readShort(),this.numberOfMetrics=k.readUInt16()},P})(),zo=(function(){function P(){return P.__super__.constructor.apply(this,arguments)}return za(P,Ea),P.prototype.tag="OS/2",P.prototype.parse=function(k){if(k.pos=this.offset,this.version=k.readUInt16(),this.averageCharWidth=k.readShort(),this.weightClass=k.readUInt16(),this.widthClass=k.readUInt16(),this.type=k.readShort(),this.ySubscriptXSize=k.readShort(),this.ySubscriptYSize=k.readShort(),this.ySubscriptXOffset=k.readShort(),this.ySubscriptYOffset=k.readShort(),this.ySuperscriptXSize=k.readShort(),this.ySuperscriptYSize=k.readShort(),this.ySuperscriptXOffset=k.readShort(),this.ySuperscriptYOffset=k.readShort(),this.yStrikeoutSize=k.readShort(),this.yStrikeoutPosition=k.readShort(),this.familyClass=k.readShort(),this.panose=(function(){var D,G;for(G=[],D=0;D<10;++D)G.push(k.readByte());return G})(),this.charRange=(function(){var D,G;for(G=[],D=0;D<4;++D)G.push(k.readInt());return G})(),this.vendorID=k.readString(4),this.selection=k.readShort(),this.firstCharIndex=k.readShort(),this.lastCharIndex=k.readShort(),this.version>0&&(this.ascent=k.readShort(),this.descent=k.readShort(),this.lineGap=k.readShort(),this.winAscent=k.readShort(),this.winDescent=k.readShort(),this.codePageRange=(function(){var D,G;for(G=[],D=0;D<2;D=++D)G.push(k.readInt());return G})(),this.version>1))return this.xHeight=k.readShort(),this.capHeight=k.readShort(),this.defaultChar=k.readShort(),this.breakChar=k.readShort(),this.maxContext=k.readShort()},P})(),Ht=(function(){function P(){return P.__super__.constructor.apply(this,arguments)}return za(P,Ea),P.prototype.tag="post",P.prototype.parse=function(k){var D,G,X;switch(k.pos=this.offset,this.format=k.readInt(),this.italicAngle=k.readInt(),this.underlinePosition=k.readShort(),this.underlineThickness=k.readShort(),this.isFixedPitch=k.readInt(),this.minMemType42=k.readInt(),this.maxMemType42=k.readInt(),this.minMemType1=k.readInt(),this.maxMemType1=k.readInt(),this.format){case 65536:case 196608:break;case 131072:var ee;for(G=k.readUInt16(),this.glyphNameIndex=[],ee=0;0<=G?ee<G:ee>G;ee=0<=G?++ee:--ee)this.glyphNameIndex.push(k.readUInt16());for(this.names=[],X=[];k.pos<this.offset+this.length;)D=k.readByte(),X.push(this.names.push(k.readString(D)));return X;case 151552:return G=k.readUInt16(),this.offsets=k.read(G);case 262144:return this.map=(function(){var ye,he,me;for(me=[],ee=ye=0,he=this.file.maxp.numGlyphs;0<=he?ye<he:ye>he;ee=0<=he?++ye:--ye)me.push(k.readUInt32());return me}).call(this)}},P})(),V=function(P,k){this.raw=P,this.length=P.length,this.platformID=k.platformID,this.encodingID=k.encodingID,this.languageID=k.languageID},ie=(function(){function P(){return P.__super__.constructor.apply(this,arguments)}return za(P,Ea),P.prototype.tag="name",P.prototype.parse=function(k){var D,G,X,ee,ye,he,me,Ie,Qe,qe,lt;for(k.pos=this.offset,k.readShort(),D=k.readShort(),he=k.readShort(),G=[],ee=0;0<=D?ee<D:ee>D;ee=0<=D?++ee:--ee)G.push({platformID:k.readShort(),encodingID:k.readShort(),languageID:k.readShort(),nameID:k.readShort(),length:k.readShort(),offset:this.offset+he+k.readShort()});for(me={},ee=Qe=0,qe=G.length;Qe<qe;ee=++Qe)X=G[ee],k.pos=X.offset,Ie=k.readString(X.length),ye=new V(Ie,X),me[lt=X.nameID]==null&&(me[lt]=[]),me[X.nameID].push(ye);this.strings=me,this.copyright=me[0],this.fontFamily=me[1],this.fontSubfamily=me[2],this.uniqueSubfamily=me[3],this.fontName=me[4],this.version=me[5];try{this.postscriptName=me[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=me[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=me[7],this.manufacturer=me[8],this.designer=me[9],this.description=me[10],this.vendorUrl=me[11],this.designerUrl=me[12],this.license=me[13],this.licenseUrl=me[14],this.preferredFamily=me[15],this.preferredSubfamily=me[17],this.compatibleFull=me[18],this.sampleText=me[19]},P})(),le=(function(){function P(){return P.__super__.constructor.apply(this,arguments)}return za(P,Ea),P.prototype.tag="maxp",P.prototype.parse=function(k){return k.pos=this.offset,this.version=k.readInt(),this.numGlyphs=k.readUInt16(),this.maxPoints=k.readUInt16(),this.maxContours=k.readUInt16(),this.maxCompositePoints=k.readUInt16(),this.maxComponentContours=k.readUInt16(),this.maxZones=k.readUInt16(),this.maxTwilightPoints=k.readUInt16(),this.maxStorage=k.readUInt16(),this.maxFunctionDefs=k.readUInt16(),this.maxInstructionDefs=k.readUInt16(),this.maxStackElements=k.readUInt16(),this.maxSizeOfInstructions=k.readUInt16(),this.maxComponentElements=k.readUInt16(),this.maxComponentDepth=k.readUInt16()},P})(),F=(function(){function P(){return P.__super__.constructor.apply(this,arguments)}return za(P,Ea),P.prototype.tag="hmtx",P.prototype.parse=function(k){var D,G,X,ee,ye,he,me;for(k.pos=this.offset,this.metrics=[],D=0,he=this.file.hhea.numberOfMetrics;0<=he?D<he:D>he;D=0<=he?++D:--D)this.metrics.push({advance:k.readUInt16(),lsb:k.readInt16()});for(X=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var Ie,Qe;for(Qe=[],D=Ie=0;0<=X?Ie<X:Ie>X;D=0<=X?++Ie:--Ie)Qe.push(k.readInt16());return Qe})(),this.widths=(function(){var Ie,Qe,qe,lt;for(lt=[],Ie=0,Qe=(qe=this.metrics).length;Ie<Qe;Ie++)ee=qe[Ie],lt.push(ee.advance);return lt}).call(this),G=this.widths[this.widths.length-1],me=[],D=ye=0;0<=X?ye<X:ye>X;D=0<=X?++ye:--ye)me.push(this.widths.push(G));return me},P.prototype.forGlyph=function(k){return k in this.metrics?this.metrics[k]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[k-this.metrics.length]}},P})(),z=[].slice,te=(function(){function P(){return P.__super__.constructor.apply(this,arguments)}return za(P,Ea),P.prototype.tag="glyf",P.prototype.parse=function(){return this.cache={}},P.prototype.glyphFor=function(k){var D,G,X,ee,ye,he,me,Ie,Qe,qe;return k in this.cache?this.cache[k]:(ee=this.file.loca,D=this.file.contents,G=ee.indexOf(k),(X=ee.lengthOf(k))===0?this.cache[k]=null:(D.pos=this.offset+G,ye=(he=new Xs(D.read(X))).readShort(),Ie=he.readShort(),qe=he.readShort(),me=he.readShort(),Qe=he.readShort(),this.cache[k]=ye===-1?new Se(he,Ie,qe,me,Qe):new fe(he,ye,Ie,qe,me,Qe),this.cache[k]))},P.prototype.encode=function(k,D,G){var X,ee,ye,he,me;for(ye=[],ee=[],he=0,me=D.length;he<me;he++)X=k[D[he]],ee.push(ye.length),X&&(ye=ye.concat(X.encode(G)));return ee.push(ye.length),{table:ye,offsets:ee}},P})(),fe=(function(){function P(k,D,G,X,ee,ye){this.raw=k,this.numberOfContours=D,this.xMin=G,this.yMin=X,this.xMax=ee,this.yMax=ye,this.compound=!1}return P.prototype.encode=function(){return this.raw.data},P})(),Se=(function(){function P(k,D,G,X,ee){var ye,he;for(this.raw=k,this.xMin=D,this.yMin=G,this.xMax=X,this.yMax=ee,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],ye=this.raw;he=ye.readShort(),this.glyphOffsets.push(ye.pos),this.glyphIDs.push(ye.readUInt16()),32&he;)ye.pos+=1&he?4:2,128&he?ye.pos+=8:64&he?ye.pos+=4:8&he&&(ye.pos+=2)}return P.prototype.encode=function(){var k,D,G;for(D=new Xs(z.call(this.raw.data)),k=0,G=this.glyphIDs.length;k<G;++k)D.pos=this.glyphOffsets[k];return D.data},P})(),$e=(function(){function P(){return P.__super__.constructor.apply(this,arguments)}return za(P,Ea),P.prototype.tag="loca",P.prototype.parse=function(k){var D,G;return k.pos=this.offset,D=this.file.head.indexToLocFormat,this.offsets=D===0?(function(){var X,ee;for(ee=[],G=0,X=this.length;G<X;G+=2)ee.push(2*k.readUInt16());return ee}).call(this):(function(){var X,ee;for(ee=[],G=0,X=this.length;G<X;G+=4)ee.push(k.readUInt32());return ee}).call(this)},P.prototype.indexOf=function(k){return this.offsets[k]},P.prototype.lengthOf=function(k){return this.offsets[k+1]-this.offsets[k]},P.prototype.encode=function(k,D){for(var G=new Uint32Array(this.offsets.length),X=0,ee=0,ye=0;ye<G.length;++ye)if(G[ye]=X,ee<D.length&&D[ee]==ye){++ee,G[ye]=X;var he=this.offsets[ye],me=this.offsets[ye+1]-he;me>0&&(X+=me)}for(var Ie=new Array(4*G.length),Qe=0;Qe<G.length;++Qe)Ie[4*Qe+3]=255&G[Qe],Ie[4*Qe+2]=(65280&G[Qe])>>8,Ie[4*Qe+1]=(16711680&G[Qe])>>16,Ie[4*Qe]=(4278190080&G[Qe])>>24;return Ie},P})(),ct=(function(){function P(k){this.font=k,this.subset={},this.unicodes={},this.next=33}return P.prototype.generateCmap=function(){var k,D,G,X,ee;for(D in X=this.font.cmap.tables[0].codeMap,k={},ee=this.subset)G=ee[D],k[D]=X[G];return k},P.prototype.glyphsFor=function(k){var D,G,X,ee,ye,he,me;for(X={},ye=0,he=k.length;ye<he;ye++)X[ee=k[ye]]=this.font.glyf.glyphFor(ee);for(ee in D=[],X)(G=X[ee])!=null&&G.compound&&D.push.apply(D,G.glyphIDs);if(D.length>0)for(ee in me=this.glyphsFor(D))G=me[ee],X[ee]=G;return X},P.prototype.encode=function(k,D){var G,X,ee,ye,he,me,Ie,Qe,qe,lt,Te,Et,at,Ct,et;for(X in G=go.encode(this.generateCmap(),"unicode"),ye=this.glyphsFor(k),Te={0:0},et=G.charMap)Te[(me=et[X]).old]=me.new;for(Et in lt=G.maxGlyphID,ye)Et in Te||(Te[Et]=lt++);return Qe=(function(Pt){var qt,It;for(qt in It={},Pt)It[Pt[qt]]=qt;return It})(Te),qe=Object.keys(Qe).sort(function(Pt,qt){return Pt-qt}),at=(function(){var Pt,qt,It;for(It=[],Pt=0,qt=qe.length;Pt<qt;Pt++)he=qe[Pt],It.push(Qe[he]);return It})(),ee=this.font.glyf.encode(ye,at,Te),Ie=this.font.loca.encode(ee.offsets,at),Ct={cmap:this.font.cmap.raw(),glyf:ee.table,loca:Ie,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(D)},this.font.os2.exists&&(Ct["OS/2"]=this.font.os2.raw()),this.font.directory.encode(Ct)},P})();Ge.API.PDFObject=(function(){var P;function k(){}return P=function(D,G){return(Array(G+1).join("0")+D).slice(-G)},k.convert=function(D){var G,X,ee,ye;if(Array.isArray(D))return"["+(function(){var he,me,Ie;for(Ie=[],he=0,me=D.length;he<me;he++)G=D[he],Ie.push(k.convert(G));return Ie})().join(" ")+"]";if(typeof D=="string")return"/"+D;if(D?.isString)return"("+D+")";if(D instanceof Date)return"(D:"+P(D.getUTCFullYear(),4)+P(D.getUTCMonth(),2)+P(D.getUTCDate(),2)+P(D.getUTCHours(),2)+P(D.getUTCMinutes(),2)+P(D.getUTCSeconds(),2)+"Z)";if({}.toString.call(D)==="[object Object]"){for(X in ee=["<<"],D)ye=D[X],ee.push("/"+X+" "+k.convert(ye));return ee.push(">>"),ee.join(`
`)}return""+D},k})()}),"./node_modules/pako/dist/pako.esm.mjs":(function(c,u,l){l.r(u),l.d(u,{Deflate:function(){return Zr},Inflate:function(){return as},constants:function(){return Na},default:function(){return Wo},deflate:function(){return ti},deflateRaw:function(){return ri},gzip:function(){return Yi},inflate:function(){return na},inflateRaw:function(){return Ma},ungzip:function(){return Oo}});const d=4,f=0,A=1,p=2;function g(O){let Pe=O.length;for(;--Pe>=0;)O[Pe]=0}const y=0,x=1,w=2,E=3,T=258,C=29,N=256,I=N+1+C,U=30,K=19,Y=2*I+1,re=15,se=16,Ae=7,we=256,Ce=16,ve=17,ne=18,ce=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),ae=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),De=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),Oe=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),be=512,de=new Array((I+2)*2);g(de);const xe=new Array(U*2);g(xe);const je=new Array(be);g(je);const Me=new Array(T-E+1);g(Me);const Re=new Array(C);g(Re);const it=new Array(U);g(it);function ht(O,Pe,J,Ye,bt){this.static_tree=O,this.extra_bits=Pe,this.extra_base=J,this.elems=Ye,this.max_length=bt,this.has_stree=O&&O.length}let Be,nt,Ge;function ft(O,Pe){this.dyn_tree=O,this.max_code=0,this.stat_desc=Pe}const Dt=O=>O<256?je[O]:je[256+(O>>>7)],rt=(O,Pe)=>{O.pending_buf[O.pending++]=Pe&255,O.pending_buf[O.pending++]=Pe>>>8&255},kt=(O,Pe,J)=>{O.bi_valid>se-J?(O.bi_buf|=Pe<<O.bi_valid&65535,rt(O,O.bi_buf),O.bi_buf=Pe>>se-O.bi_valid,O.bi_valid+=J-se):(O.bi_buf|=Pe<<O.bi_valid&65535,O.bi_valid+=J)},_t=(O,Pe,J)=>{kt(O,J[Pe*2],J[Pe*2+1])},wt=(O,Pe)=>{let J=0;do J|=O&1,O>>>=1,J<<=1;while(--Pe>0);return J>>>1},Tt=O=>{O.bi_valid===16?(rt(O,O.bi_buf),O.bi_buf=0,O.bi_valid=0):O.bi_valid>=8&&(O.pending_buf[O.pending++]=O.bi_buf&255,O.bi_buf>>=8,O.bi_valid-=8)},Er=(O,Pe)=>{const J=Pe.dyn_tree,Ye=Pe.max_code,bt=Pe.stat_desc.static_tree,xt=Pe.stat_desc.has_stree,mr=Pe.stat_desc.extra_bits,Kt=Pe.stat_desc.extra_base,Dn=Pe.stat_desc.max_length;let Ft,gr,qi,Nn,en,Pr,Fa=0;for(Nn=0;Nn<=re;Nn++)O.bl_count[Nn]=0;for(J[O.heap[O.heap_max]*2+1]=0,Ft=O.heap_max+1;Ft<Y;Ft++)gr=O.heap[Ft],Nn=J[J[gr*2+1]*2+1]+1,Nn>Dn&&(Nn=Dn,Fa++),J[gr*2+1]=Nn,!(gr>Ye)&&(O.bl_count[Nn]++,en=0,gr>=Kt&&(en=mr[gr-Kt]),Pr=J[gr*2],O.opt_len+=Pr*(Nn+en),xt&&(O.static_len+=Pr*(bt[gr*2+1]+en)));if(Fa!==0){do{for(Nn=Dn-1;O.bl_count[Nn]===0;)Nn--;O.bl_count[Nn]--,O.bl_count[Nn+1]+=2,O.bl_count[Dn]--,Fa-=2}while(Fa>0);for(Nn=Dn;Nn!==0;Nn--)for(gr=O.bl_count[Nn];gr!==0;)qi=O.heap[--Ft],!(qi>Ye)&&(J[qi*2+1]!==Nn&&(O.opt_len+=(Nn-J[qi*2+1])*J[qi*2],J[qi*2+1]=Nn),gr--)}},pr=(O,Pe,J)=>{const Ye=new Array(re+1);let bt=0,xt,mr;for(xt=1;xt<=re;xt++)bt=bt+J[xt-1]<<1,Ye[xt]=bt;for(mr=0;mr<=Pe;mr++){let Kt=O[mr*2+1];Kt!==0&&(O[mr*2]=wt(Ye[Kt]++,Kt))}},Xr=()=>{let O,Pe,J,Ye,bt;const xt=new Array(re+1);for(J=0,Ye=0;Ye<C-1;Ye++)for(Re[Ye]=J,O=0;O<1<<ce[Ye];O++)Me[J++]=Ye;for(Me[J-1]=Ye,bt=0,Ye=0;Ye<16;Ye++)for(it[Ye]=bt,O=0;O<1<<ae[Ye];O++)je[bt++]=Ye;for(bt>>=7;Ye<U;Ye++)for(it[Ye]=bt<<7,O=0;O<1<<ae[Ye]-7;O++)je[256+bt++]=Ye;for(Pe=0;Pe<=re;Pe++)xt[Pe]=0;for(O=0;O<=143;)de[O*2+1]=8,O++,xt[8]++;for(;O<=255;)de[O*2+1]=9,O++,xt[9]++;for(;O<=279;)de[O*2+1]=7,O++,xt[7]++;for(;O<=287;)de[O*2+1]=8,O++,xt[8]++;for(pr(de,I+1,xt),O=0;O<U;O++)xe[O*2+1]=5,xe[O*2]=wt(O,5);Be=new ht(de,ce,N+1,I,re),nt=new ht(xe,ae,0,U,re),Ge=new ht(new Array(0),De,0,K,Ae)},yn=O=>{let Pe;for(Pe=0;Pe<I;Pe++)O.dyn_ltree[Pe*2]=0;for(Pe=0;Pe<U;Pe++)O.dyn_dtree[Pe*2]=0;for(Pe=0;Pe<K;Pe++)O.bl_tree[Pe*2]=0;O.dyn_ltree[we*2]=1,O.opt_len=O.static_len=0,O.sym_next=O.matches=0},Mn=O=>{O.bi_valid>8?rt(O,O.bi_buf):O.bi_valid>0&&(O.pending_buf[O.pending++]=O.bi_buf),O.bi_buf=0,O.bi_valid=0},dn=(O,Pe,J,Ye)=>{const bt=Pe*2,xt=J*2;return O[bt]<O[xt]||O[bt]===O[xt]&&Ye[Pe]<=Ye[J]},pn=(O,Pe,J)=>{const Ye=O.heap[J];let bt=J<<1;for(;bt<=O.heap_len&&(bt<O.heap_len&&dn(Pe,O.heap[bt+1],O.heap[bt],O.depth)&&bt++,!dn(Pe,Ye,O.heap[bt],O.depth));)O.heap[J]=O.heap[bt],J=bt,bt<<=1;O.heap[J]=Ye},mn=(O,Pe,J)=>{let Ye,bt,xt=0,mr,Kt;if(O.sym_next!==0)do Ye=O.pending_buf[O.sym_buf+xt++]&255,Ye+=(O.pending_buf[O.sym_buf+xt++]&255)<<8,bt=O.pending_buf[O.sym_buf+xt++],Ye===0?_t(O,bt,Pe):(mr=Me[bt],_t(O,mr+N+1,Pe),Kt=ce[mr],Kt!==0&&(bt-=Re[mr],kt(O,bt,Kt)),Ye--,mr=Dt(Ye),_t(O,mr,J),Kt=ae[mr],Kt!==0&&(Ye-=it[mr],kt(O,Ye,Kt)));while(xt<O.sym_next);_t(O,we,Pe)},Kn=(O,Pe)=>{const J=Pe.dyn_tree,Ye=Pe.stat_desc.static_tree,bt=Pe.stat_desc.has_stree,xt=Pe.stat_desc.elems;let mr,Kt,Dn=-1,Ft;for(O.heap_len=0,O.heap_max=Y,mr=0;mr<xt;mr++)J[mr*2]!==0?(O.heap[++O.heap_len]=Dn=mr,O.depth[mr]=0):J[mr*2+1]=0;for(;O.heap_len<2;)Ft=O.heap[++O.heap_len]=Dn<2?++Dn:0,J[Ft*2]=1,O.depth[Ft]=0,O.opt_len--,bt&&(O.static_len-=Ye[Ft*2+1]);for(Pe.max_code=Dn,mr=O.heap_len>>1;mr>=1;mr--)pn(O,J,mr);Ft=xt;do mr=O.heap[1],O.heap[1]=O.heap[O.heap_len--],pn(O,J,1),Kt=O.heap[1],O.heap[--O.heap_max]=mr,O.heap[--O.heap_max]=Kt,J[Ft*2]=J[mr*2]+J[Kt*2],O.depth[Ft]=(O.depth[mr]>=O.depth[Kt]?O.depth[mr]:O.depth[Kt])+1,J[mr*2+1]=J[Kt*2+1]=Ft,O.heap[1]=Ft++,pn(O,J,1);while(O.heap_len>=2);O.heap[--O.heap_max]=O.heap[1],Er(O,Pe),pr(J,Dn,O.bl_count)},Zn=(O,Pe,J)=>{let Ye,bt=-1,xt,mr=Pe[1],Kt=0,Dn=7,Ft=4;for(mr===0&&(Dn=138,Ft=3),Pe[(J+1)*2+1]=65535,Ye=0;Ye<=J;Ye++)xt=mr,mr=Pe[(Ye+1)*2+1],!(++Kt<Dn&&xt===mr)&&(Kt<Ft?O.bl_tree[xt*2]+=Kt:xt!==0?(xt!==bt&&O.bl_tree[xt*2]++,O.bl_tree[Ce*2]++):Kt<=10?O.bl_tree[ve*2]++:O.bl_tree[ne*2]++,Kt=0,bt=xt,mr===0?(Dn=138,Ft=3):xt===mr?(Dn=6,Ft=3):(Dn=7,Ft=4))},Li=(O,Pe,J)=>{let Ye,bt=-1,xt,mr=Pe[1],Kt=0,Dn=7,Ft=4;for(mr===0&&(Dn=138,Ft=3),Ye=0;Ye<=J;Ye++)if(xt=mr,mr=Pe[(Ye+1)*2+1],!(++Kt<Dn&&xt===mr)){if(Kt<Ft)do _t(O,xt,O.bl_tree);while(--Kt!==0);else xt!==0?(xt!==bt&&(_t(O,xt,O.bl_tree),Kt--),_t(O,Ce,O.bl_tree),kt(O,Kt-3,2)):Kt<=10?(_t(O,ve,O.bl_tree),kt(O,Kt-3,3)):(_t(O,ne,O.bl_tree),kt(O,Kt-11,7));Kt=0,bt=xt,mr===0?(Dn=138,Ft=3):xt===mr?(Dn=6,Ft=3):(Dn=7,Ft=4)}},ot=O=>{let Pe;for(Zn(O,O.dyn_ltree,O.l_desc.max_code),Zn(O,O.dyn_dtree,O.d_desc.max_code),Kn(O,O.bl_desc),Pe=K-1;Pe>=3&&O.bl_tree[Oe[Pe]*2+1]===0;Pe--);return O.opt_len+=3*(Pe+1)+5+5+4,Pe},Yt=(O,Pe,J,Ye)=>{let bt;for(kt(O,Pe-257,5),kt(O,J-1,5),kt(O,Ye-4,4),bt=0;bt<Ye;bt++)kt(O,O.bl_tree[Oe[bt]*2+1],3);Li(O,O.dyn_ltree,Pe-1),Li(O,O.dyn_dtree,J-1)},kr=O=>{let Pe=4093624447,J;for(J=0;J<=31;J++,Pe>>>=1)if(Pe&1&&O.dyn_ltree[J*2]!==0)return f;if(O.dyn_ltree[18]!==0||O.dyn_ltree[20]!==0||O.dyn_ltree[26]!==0)return A;for(J=32;J<N;J++)if(O.dyn_ltree[J*2]!==0)return A;return f};let nr=!1;const Qt=O=>{nr||(Xr(),nr=!0),O.l_desc=new ft(O.dyn_ltree,Be),O.d_desc=new ft(O.dyn_dtree,nt),O.bl_desc=new ft(O.bl_tree,Ge),O.bi_buf=0,O.bi_valid=0,yn(O)},fr=(O,Pe,J,Ye)=>{kt(O,(y<<1)+(Ye?1:0),3),Mn(O),rt(O,J),rt(O,~J),J&&O.pending_buf.set(O.window.subarray(Pe,Pe+J),O.pending),O.pending+=J},zr=O=>{kt(O,x<<1,3),_t(O,we,de),Tt(O)},Yr=(O,Pe,J,Ye)=>{let bt,xt,mr=0;O.level>0?(O.strm.data_type===p&&(O.strm.data_type=kr(O)),Kn(O,O.l_desc),Kn(O,O.d_desc),mr=ot(O),bt=O.opt_len+3+7>>>3,xt=O.static_len+3+7>>>3,xt<=bt&&(bt=xt)):bt=xt=J+5,J+4<=bt&&Pe!==-1?fr(O,Pe,J,Ye):O.strategy===d||xt===bt?(kt(O,(x<<1)+(Ye?1:0),3),mn(O,de,xe)):(kt(O,(w<<1)+(Ye?1:0),3),Yt(O,O.l_desc.max_code+1,O.d_desc.max_code+1,mr+1),mn(O,O.dyn_ltree,O.dyn_dtree)),yn(O),Ye&&Mn(O)},Ln=(O,Pe,J)=>(O.pending_buf[O.sym_buf+O.sym_next++]=Pe,O.pending_buf[O.sym_buf+O.sym_next++]=Pe>>8,O.pending_buf[O.sym_buf+O.sym_next++]=J,Pe===0?O.dyn_ltree[J*2]++:(O.matches++,Pe--,O.dyn_ltree[(Me[J]+N+1)*2]++,O.dyn_dtree[Dt(Pe)*2]++),O.sym_next===O.sym_end);var ln=Qt,Jn=fr,rn=Yr,Ur=Ln,An=zr,cn={_tr_init:ln,_tr_stored_block:Jn,_tr_flush_block:rn,_tr_tally:Ur,_tr_align:An},li=(O,Pe,J,Ye)=>{let bt=O&65535|0,xt=O>>>16&65535|0,mr=0;for(;J!==0;){mr=J>2e3?2e3:J,J-=mr;do bt=bt+Pe[Ye++]|0,xt=xt+bt|0;while(--mr);bt%=65521,xt%=65521}return bt|xt<<16|0};const Cs=()=>{let O,Pe=[];for(var J=0;J<256;J++){O=J;for(var Ye=0;Ye<8;Ye++)O=O&1?3988292384^O>>>1:O>>>1;Pe[J]=O}return Pe},Ds=new Uint32Array(Cs());var ei=(O,Pe,J,Ye)=>{const bt=Ds,xt=Ye+J;O^=-1;for(let mr=Ye;mr<xt;mr++)O=O>>>8^bt[(O^Pe[mr])&255];return O^-1},sn={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},ss={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:ta,_tr_stored_block:_n,_tr_flush_block:Cn,_tr_tally:Ms,_tr_align:Qs}=cn,{Z_NO_FLUSH:Fs,Z_PARTIAL_FLUSH:rs,Z_FULL_FLUSH:qs,Z_FINISH:Os,Z_BLOCK:Qa,Z_OK:ds,Z_STREAM_END:bu,Z_STREAM_ERROR:to,Z_DATA_ERROR:Ml,Z_BUF_ERROR:nu,Z_DEFAULT_COMPRESSION:ml,Z_FILTERED:ra,Z_HUFFMAN_ONLY:Ya,Z_RLE:Ws,Z_FIXED:ba,Z_DEFAULT_STRATEGY:Us,Z_UNKNOWN:kl,Z_DEFLATED:po}=ss,ro=9,pl=15,Fl=8,ci=256+1+29,Ns=30,Ta=19,Va=2*ci+1,Ca=15,gi=3,Xn=258,hs=Xn+gi+1,wa=32,Qo=42,Hi=57,Vo=69,Ea=73,Xs=91,fs=103,To=113,za=666,zs=1,qa=2,go=3,no=4,zo=3,Ht=(O,Pe)=>(O.msg=sn[Pe],Pe),V=O=>O*2-(O>4?9:0),ie=O=>{let Pe=O.length;for(;--Pe>=0;)O[Pe]=0},le=O=>{let Pe,J,Ye,bt=O.w_size;Pe=O.hash_size,Ye=Pe;do J=O.head[--Ye],O.head[Ye]=J>=bt?J-bt:0;while(--Pe);Pe=bt,Ye=Pe;do J=O.prev[--Ye],O.prev[Ye]=J>=bt?J-bt:0;while(--Pe)};let z=(O,Pe,J)=>(Pe<<O.hash_shift^J)&O.hash_mask;const te=O=>{const Pe=O.state;let J=Pe.pending;J>O.avail_out&&(J=O.avail_out),J!==0&&(O.output.set(Pe.pending_buf.subarray(Pe.pending_out,Pe.pending_out+J),O.next_out),O.next_out+=J,Pe.pending_out+=J,O.total_out+=J,O.avail_out-=J,Pe.pending-=J,Pe.pending===0&&(Pe.pending_out=0))},fe=(O,Pe)=>{Cn(O,O.block_start>=0?O.block_start:-1,O.strstart-O.block_start,Pe),O.block_start=O.strstart,te(O.strm)},Se=(O,Pe)=>{O.pending_buf[O.pending++]=Pe},$e=(O,Pe)=>{O.pending_buf[O.pending++]=Pe>>>8&255,O.pending_buf[O.pending++]=Pe&255},ct=(O,Pe,J,Ye)=>{let bt=O.avail_in;return bt>Ye&&(bt=Ye),bt===0?0:(O.avail_in-=bt,Pe.set(O.input.subarray(O.next_in,O.next_in+bt),J),O.state.wrap===1?O.adler=li(O.adler,Pe,bt,J):O.state.wrap===2&&(O.adler=ei(O.adler,Pe,bt,J)),O.next_in+=bt,O.total_in+=bt,bt)},P=(O,Pe)=>{let J=O.max_chain_length,Ye=O.strstart,bt,xt,mr=O.prev_length,Kt=O.nice_match;const Dn=O.strstart>O.w_size-hs?O.strstart-(O.w_size-hs):0,Ft=O.window,gr=O.w_mask,qi=O.prev,Nn=O.strstart+Xn;let en=Ft[Ye+mr-1],Pr=Ft[Ye+mr];O.prev_length>=O.good_match&&(J>>=2),Kt>O.lookahead&&(Kt=O.lookahead);do if(bt=Pe,!(Ft[bt+mr]!==Pr||Ft[bt+mr-1]!==en||Ft[bt]!==Ft[Ye]||Ft[++bt]!==Ft[Ye+1])){Ye+=2,bt++;do;while(Ft[++Ye]===Ft[++bt]&&Ft[++Ye]===Ft[++bt]&&Ft[++Ye]===Ft[++bt]&&Ft[++Ye]===Ft[++bt]&&Ft[++Ye]===Ft[++bt]&&Ft[++Ye]===Ft[++bt]&&Ft[++Ye]===Ft[++bt]&&Ft[++Ye]===Ft[++bt]&&Ye<Nn);if(xt=Xn-(Nn-Ye),Ye=Nn-Xn,xt>mr){if(O.match_start=Pe,mr=xt,xt>=Kt)break;en=Ft[Ye+mr-1],Pr=Ft[Ye+mr]}}while((Pe=qi[Pe&gr])>Dn&&--J!==0);return mr<=O.lookahead?mr:O.lookahead},k=O=>{const Pe=O.w_size;let J,Ye,bt;do{if(Ye=O.window_size-O.lookahead-O.strstart,O.strstart>=Pe+(Pe-hs)&&(O.window.set(O.window.subarray(Pe,Pe+Pe-Ye),0),O.match_start-=Pe,O.strstart-=Pe,O.block_start-=Pe,O.insert>O.strstart&&(O.insert=O.strstart),le(O),Ye+=Pe),O.strm.avail_in===0)break;if(J=ct(O.strm,O.window,O.strstart+O.lookahead,Ye),O.lookahead+=J,O.lookahead+O.insert>=gi)for(bt=O.strstart-O.insert,O.ins_h=O.window[bt],O.ins_h=z(O,O.ins_h,O.window[bt+1]);O.insert&&(O.ins_h=z(O,O.ins_h,O.window[bt+gi-1]),O.prev[bt&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=bt,bt++,O.insert--,!(O.lookahead+O.insert<gi)););}while(O.lookahead<hs&&O.strm.avail_in!==0)},D=(O,Pe)=>{let J=O.pending_buf_size-5>O.w_size?O.w_size:O.pending_buf_size-5,Ye,bt,xt,mr=0,Kt=O.strm.avail_in;do{if(Ye=65535,xt=O.bi_valid+42>>3,O.strm.avail_out<xt||(xt=O.strm.avail_out-xt,bt=O.strstart-O.block_start,Ye>bt+O.strm.avail_in&&(Ye=bt+O.strm.avail_in),Ye>xt&&(Ye=xt),Ye<J&&(Ye===0&&Pe!==Os||Pe===Fs||Ye!==bt+O.strm.avail_in)))break;mr=Pe===Os&&Ye===bt+O.strm.avail_in?1:0,_n(O,0,0,mr),O.pending_buf[O.pending-4]=Ye,O.pending_buf[O.pending-3]=Ye>>8,O.pending_buf[O.pending-2]=~Ye,O.pending_buf[O.pending-1]=~Ye>>8,te(O.strm),bt&&(bt>Ye&&(bt=Ye),O.strm.output.set(O.window.subarray(O.block_start,O.block_start+bt),O.strm.next_out),O.strm.next_out+=bt,O.strm.avail_out-=bt,O.strm.total_out+=bt,O.block_start+=bt,Ye-=bt),Ye&&(ct(O.strm,O.strm.output,O.strm.next_out,Ye),O.strm.next_out+=Ye,O.strm.avail_out-=Ye,O.strm.total_out+=Ye)}while(mr===0);return Kt-=O.strm.avail_in,Kt&&(Kt>=O.w_size?(O.matches=2,O.window.set(O.strm.input.subarray(O.strm.next_in-O.w_size,O.strm.next_in),0),O.strstart=O.w_size,O.insert=O.strstart):(O.window_size-O.strstart<=Kt&&(O.strstart-=O.w_size,O.window.set(O.window.subarray(O.w_size,O.w_size+O.strstart),0),O.matches<2&&O.matches++,O.insert>O.strstart&&(O.insert=O.strstart)),O.window.set(O.strm.input.subarray(O.strm.next_in-Kt,O.strm.next_in),O.strstart),O.strstart+=Kt,O.insert+=Kt>O.w_size-O.insert?O.w_size-O.insert:Kt),O.block_start=O.strstart),O.high_water<O.strstart&&(O.high_water=O.strstart),mr?no:Pe!==Fs&&Pe!==Os&&O.strm.avail_in===0&&O.strstart===O.block_start?qa:(xt=O.window_size-O.strstart,O.strm.avail_in>xt&&O.block_start>=O.w_size&&(O.block_start-=O.w_size,O.strstart-=O.w_size,O.window.set(O.window.subarray(O.w_size,O.w_size+O.strstart),0),O.matches<2&&O.matches++,xt+=O.w_size,O.insert>O.strstart&&(O.insert=O.strstart)),xt>O.strm.avail_in&&(xt=O.strm.avail_in),xt&&(ct(O.strm,O.window,O.strstart,xt),O.strstart+=xt,O.insert+=xt>O.w_size-O.insert?O.w_size-O.insert:xt),O.high_water<O.strstart&&(O.high_water=O.strstart),xt=O.bi_valid+42>>3,xt=O.pending_buf_size-xt>65535?65535:O.pending_buf_size-xt,J=xt>O.w_size?O.w_size:xt,bt=O.strstart-O.block_start,(bt>=J||(bt||Pe===Os)&&Pe!==Fs&&O.strm.avail_in===0&&bt<=xt)&&(Ye=bt>xt?xt:bt,mr=Pe===Os&&O.strm.avail_in===0&&Ye===bt?1:0,_n(O,O.block_start,Ye,mr),O.block_start+=Ye,te(O.strm)),mr?go:zs)},G=(O,Pe)=>{let J,Ye;for(;;){if(O.lookahead<hs){if(k(O),O.lookahead<hs&&Pe===Fs)return zs;if(O.lookahead===0)break}if(J=0,O.lookahead>=gi&&(O.ins_h=z(O,O.ins_h,O.window[O.strstart+gi-1]),J=O.prev[O.strstart&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=O.strstart),J!==0&&O.strstart-J<=O.w_size-hs&&(O.match_length=P(O,J)),O.match_length>=gi)if(Ye=Ms(O,O.strstart-O.match_start,O.match_length-gi),O.lookahead-=O.match_length,O.match_length<=O.max_lazy_match&&O.lookahead>=gi){O.match_length--;do O.strstart++,O.ins_h=z(O,O.ins_h,O.window[O.strstart+gi-1]),J=O.prev[O.strstart&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=O.strstart;while(--O.match_length!==0);O.strstart++}else O.strstart+=O.match_length,O.match_length=0,O.ins_h=O.window[O.strstart],O.ins_h=z(O,O.ins_h,O.window[O.strstart+1]);else Ye=Ms(O,0,O.window[O.strstart]),O.lookahead--,O.strstart++;if(Ye&&(fe(O,!1),O.strm.avail_out===0))return zs}return O.insert=O.strstart<gi-1?O.strstart:gi-1,Pe===Os?(fe(O,!0),O.strm.avail_out===0?go:no):O.sym_next&&(fe(O,!1),O.strm.avail_out===0)?zs:qa},X=(O,Pe)=>{let J,Ye,bt;for(;;){if(O.lookahead<hs){if(k(O),O.lookahead<hs&&Pe===Fs)return zs;if(O.lookahead===0)break}if(J=0,O.lookahead>=gi&&(O.ins_h=z(O,O.ins_h,O.window[O.strstart+gi-1]),J=O.prev[O.strstart&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=O.strstart),O.prev_length=O.match_length,O.prev_match=O.match_start,O.match_length=gi-1,J!==0&&O.prev_length<O.max_lazy_match&&O.strstart-J<=O.w_size-hs&&(O.match_length=P(O,J),O.match_length<=5&&(O.strategy===ra||O.match_length===gi&&O.strstart-O.match_start>4096)&&(O.match_length=gi-1)),O.prev_length>=gi&&O.match_length<=O.prev_length){bt=O.strstart+O.lookahead-gi,Ye=Ms(O,O.strstart-1-O.prev_match,O.prev_length-gi),O.lookahead-=O.prev_length-1,O.prev_length-=2;do++O.strstart<=bt&&(O.ins_h=z(O,O.ins_h,O.window[O.strstart+gi-1]),J=O.prev[O.strstart&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=O.strstart);while(--O.prev_length!==0);if(O.match_available=0,O.match_length=gi-1,O.strstart++,Ye&&(fe(O,!1),O.strm.avail_out===0))return zs}else if(O.match_available){if(Ye=Ms(O,0,O.window[O.strstart-1]),Ye&&fe(O,!1),O.strstart++,O.lookahead--,O.strm.avail_out===0)return zs}else O.match_available=1,O.strstart++,O.lookahead--}return O.match_available&&(Ye=Ms(O,0,O.window[O.strstart-1]),O.match_available=0),O.insert=O.strstart<gi-1?O.strstart:gi-1,Pe===Os?(fe(O,!0),O.strm.avail_out===0?go:no):O.sym_next&&(fe(O,!1),O.strm.avail_out===0)?zs:qa},ee=(O,Pe)=>{let J,Ye,bt,xt;const mr=O.window;for(;;){if(O.lookahead<=Xn){if(k(O),O.lookahead<=Xn&&Pe===Fs)return zs;if(O.lookahead===0)break}if(O.match_length=0,O.lookahead>=gi&&O.strstart>0&&(bt=O.strstart-1,Ye=mr[bt],Ye===mr[++bt]&&Ye===mr[++bt]&&Ye===mr[++bt])){xt=O.strstart+Xn;do;while(Ye===mr[++bt]&&Ye===mr[++bt]&&Ye===mr[++bt]&&Ye===mr[++bt]&&Ye===mr[++bt]&&Ye===mr[++bt]&&Ye===mr[++bt]&&Ye===mr[++bt]&&bt<xt);O.match_length=Xn-(xt-bt),O.match_length>O.lookahead&&(O.match_length=O.lookahead)}if(O.match_length>=gi?(J=Ms(O,1,O.match_length-gi),O.lookahead-=O.match_length,O.strstart+=O.match_length,O.match_length=0):(J=Ms(O,0,O.window[O.strstart]),O.lookahead--,O.strstart++),J&&(fe(O,!1),O.strm.avail_out===0))return zs}return O.insert=0,Pe===Os?(fe(O,!0),O.strm.avail_out===0?go:no):O.sym_next&&(fe(O,!1),O.strm.avail_out===0)?zs:qa},ye=(O,Pe)=>{let J;for(;;){if(O.lookahead===0&&(k(O),O.lookahead===0)){if(Pe===Fs)return zs;break}if(O.match_length=0,J=Ms(O,0,O.window[O.strstart]),O.lookahead--,O.strstart++,J&&(fe(O,!1),O.strm.avail_out===0))return zs}return O.insert=0,Pe===Os?(fe(O,!0),O.strm.avail_out===0?go:no):O.sym_next&&(fe(O,!1),O.strm.avail_out===0)?zs:qa};function he(O,Pe,J,Ye,bt){this.good_length=O,this.max_lazy=Pe,this.nice_length=J,this.max_chain=Ye,this.func=bt}const me=[new he(0,0,0,0,D),new he(4,4,8,4,G),new he(4,5,16,8,G),new he(4,6,32,32,G),new he(4,4,16,16,X),new he(8,16,32,32,X),new he(8,16,128,128,X),new he(8,32,128,256,X),new he(32,128,258,1024,X),new he(32,258,258,4096,X)],Ie=O=>{O.window_size=2*O.w_size,ie(O.head),O.max_lazy_match=me[O.level].max_lazy,O.good_match=me[O.level].good_length,O.nice_match=me[O.level].nice_length,O.max_chain_length=me[O.level].max_chain,O.strstart=0,O.block_start=0,O.lookahead=0,O.insert=0,O.match_length=O.prev_length=gi-1,O.match_available=0,O.ins_h=0};function Qe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=po,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(Va*2),this.dyn_dtree=new Uint16Array((2*Ns+1)*2),this.bl_tree=new Uint16Array((2*Ta+1)*2),ie(this.dyn_ltree),ie(this.dyn_dtree),ie(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(Ca+1),this.heap=new Uint16Array(2*ci+1),ie(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*ci+1),ie(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const qe=O=>{if(!O)return 1;const Pe=O.state;return!Pe||Pe.strm!==O||Pe.status!==Qo&&Pe.status!==Hi&&Pe.status!==Vo&&Pe.status!==Ea&&Pe.status!==Xs&&Pe.status!==fs&&Pe.status!==To&&Pe.status!==za?1:0},lt=O=>{if(qe(O))return Ht(O,to);O.total_in=O.total_out=0,O.data_type=kl;const Pe=O.state;return Pe.pending=0,Pe.pending_out=0,Pe.wrap<0&&(Pe.wrap=-Pe.wrap),Pe.status=Pe.wrap===2?Hi:Pe.wrap?Qo:To,O.adler=Pe.wrap===2?0:1,Pe.last_flush=-2,ta(Pe),ds},Te=O=>{const Pe=lt(O);return Pe===ds&&Ie(O.state),Pe},Et=(O,Pe)=>qe(O)||O.state.wrap!==2?to:(O.state.gzhead=Pe,ds),at=(O,Pe,J,Ye,bt,xt)=>{if(!O)return to;let mr=1;if(Pe===ml&&(Pe=6),Ye<0?(mr=0,Ye=-Ye):Ye>15&&(mr=2,Ye-=16),bt<1||bt>ro||J!==po||Ye<8||Ye>15||Pe<0||Pe>9||xt<0||xt>ba||Ye===8&&mr!==1)return Ht(O,to);Ye===8&&(Ye=9);const Kt=new Qe;return O.state=Kt,Kt.strm=O,Kt.status=Qo,Kt.wrap=mr,Kt.gzhead=null,Kt.w_bits=Ye,Kt.w_size=1<<Kt.w_bits,Kt.w_mask=Kt.w_size-1,Kt.hash_bits=bt+7,Kt.hash_size=1<<Kt.hash_bits,Kt.hash_mask=Kt.hash_size-1,Kt.hash_shift=~~((Kt.hash_bits+gi-1)/gi),Kt.window=new Uint8Array(Kt.w_size*2),Kt.head=new Uint16Array(Kt.hash_size),Kt.prev=new Uint16Array(Kt.w_size),Kt.lit_bufsize=1<<bt+6,Kt.pending_buf_size=Kt.lit_bufsize*4,Kt.pending_buf=new Uint8Array(Kt.pending_buf_size),Kt.sym_buf=Kt.lit_bufsize,Kt.sym_end=(Kt.lit_bufsize-1)*3,Kt.level=Pe,Kt.strategy=xt,Kt.method=J,Te(O)},Ct=(O,Pe)=>at(O,Pe,po,pl,Fl,Us),et=(O,Pe)=>{if(qe(O)||Pe>Qa||Pe<0)return O?Ht(O,to):to;const J=O.state;if(!O.output||O.avail_in!==0&&!O.input||J.status===za&&Pe!==Os)return Ht(O,O.avail_out===0?nu:to);const Ye=J.last_flush;if(J.last_flush=Pe,J.pending!==0){if(te(O),O.avail_out===0)return J.last_flush=-1,ds}else if(O.avail_in===0&&V(Pe)<=V(Ye)&&Pe!==Os)return Ht(O,nu);if(J.status===za&&O.avail_in!==0)return Ht(O,nu);if(J.status===Qo&&J.wrap===0&&(J.status=To),J.status===Qo){let bt=po+(J.w_bits-8<<4)<<8,xt=-1;if(J.strategy>=Ya||J.level<2?xt=0:J.level<6?xt=1:J.level===6?xt=2:xt=3,bt|=xt<<6,J.strstart!==0&&(bt|=wa),bt+=31-bt%31,$e(J,bt),J.strstart!==0&&($e(J,O.adler>>>16),$e(J,O.adler&65535)),O.adler=1,J.status=To,te(O),J.pending!==0)return J.last_flush=-1,ds}if(J.status===Hi){if(O.adler=0,Se(J,31),Se(J,139),Se(J,8),J.gzhead)Se(J,(J.gzhead.text?1:0)+(J.gzhead.hcrc?2:0)+(J.gzhead.extra?4:0)+(J.gzhead.name?8:0)+(J.gzhead.comment?16:0)),Se(J,J.gzhead.time&255),Se(J,J.gzhead.time>>8&255),Se(J,J.gzhead.time>>16&255),Se(J,J.gzhead.time>>24&255),Se(J,J.level===9?2:J.strategy>=Ya||J.level<2?4:0),Se(J,J.gzhead.os&255),J.gzhead.extra&&J.gzhead.extra.length&&(Se(J,J.gzhead.extra.length&255),Se(J,J.gzhead.extra.length>>8&255)),J.gzhead.hcrc&&(O.adler=ei(O.adler,J.pending_buf,J.pending,0)),J.gzindex=0,J.status=Vo;else if(Se(J,0),Se(J,0),Se(J,0),Se(J,0),Se(J,0),Se(J,J.level===9?2:J.strategy>=Ya||J.level<2?4:0),Se(J,zo),J.status=To,te(O),J.pending!==0)return J.last_flush=-1,ds}if(J.status===Vo){if(J.gzhead.extra){let bt=J.pending,xt=(J.gzhead.extra.length&65535)-J.gzindex;for(;J.pending+xt>J.pending_buf_size;){let Kt=J.pending_buf_size-J.pending;if(J.pending_buf.set(J.gzhead.extra.subarray(J.gzindex,J.gzindex+Kt),J.pending),J.pending=J.pending_buf_size,J.gzhead.hcrc&&J.pending>bt&&(O.adler=ei(O.adler,J.pending_buf,J.pending-bt,bt)),J.gzindex+=Kt,te(O),J.pending!==0)return J.last_flush=-1,ds;bt=0,xt-=Kt}let mr=new Uint8Array(J.gzhead.extra);J.pending_buf.set(mr.subarray(J.gzindex,J.gzindex+xt),J.pending),J.pending+=xt,J.gzhead.hcrc&&J.pending>bt&&(O.adler=ei(O.adler,J.pending_buf,J.pending-bt,bt)),J.gzindex=0}J.status=Ea}if(J.status===Ea){if(J.gzhead.name){let bt=J.pending,xt;do{if(J.pending===J.pending_buf_size){if(J.gzhead.hcrc&&J.pending>bt&&(O.adler=ei(O.adler,J.pending_buf,J.pending-bt,bt)),te(O),J.pending!==0)return J.last_flush=-1,ds;bt=0}J.gzindex<J.gzhead.name.length?xt=J.gzhead.name.charCodeAt(J.gzindex++)&255:xt=0,Se(J,xt)}while(xt!==0);J.gzhead.hcrc&&J.pending>bt&&(O.adler=ei(O.adler,J.pending_buf,J.pending-bt,bt)),J.gzindex=0}J.status=Xs}if(J.status===Xs){if(J.gzhead.comment){let bt=J.pending,xt;do{if(J.pending===J.pending_buf_size){if(J.gzhead.hcrc&&J.pending>bt&&(O.adler=ei(O.adler,J.pending_buf,J.pending-bt,bt)),te(O),J.pending!==0)return J.last_flush=-1,ds;bt=0}J.gzindex<J.gzhead.comment.length?xt=J.gzhead.comment.charCodeAt(J.gzindex++)&255:xt=0,Se(J,xt)}while(xt!==0);J.gzhead.hcrc&&J.pending>bt&&(O.adler=ei(O.adler,J.pending_buf,J.pending-bt,bt))}J.status=fs}if(J.status===fs){if(J.gzhead.hcrc){if(J.pending+2>J.pending_buf_size&&(te(O),J.pending!==0))return J.last_flush=-1,ds;Se(J,O.adler&255),Se(J,O.adler>>8&255),O.adler=0}if(J.status=To,te(O),J.pending!==0)return J.last_flush=-1,ds}if(O.avail_in!==0||J.lookahead!==0||Pe!==Fs&&J.status!==za){let bt=J.level===0?D(J,Pe):J.strategy===Ya?ye(J,Pe):J.strategy===Ws?ee(J,Pe):me[J.level].func(J,Pe);if((bt===go||bt===no)&&(J.status=za),bt===zs||bt===go)return O.avail_out===0&&(J.last_flush=-1),ds;if(bt===qa&&(Pe===rs?Qs(J):Pe!==Qa&&(_n(J,0,0,!1),Pe===qs&&(ie(J.head),J.lookahead===0&&(J.strstart=0,J.block_start=0,J.insert=0))),te(O),O.avail_out===0))return J.last_flush=-1,ds}return Pe!==Os?ds:J.wrap<=0?bu:(J.wrap===2?(Se(J,O.adler&255),Se(J,O.adler>>8&255),Se(J,O.adler>>16&255),Se(J,O.adler>>24&255),Se(J,O.total_in&255),Se(J,O.total_in>>8&255),Se(J,O.total_in>>16&255),Se(J,O.total_in>>24&255)):($e(J,O.adler>>>16),$e(J,O.adler&65535)),te(O),J.wrap>0&&(J.wrap=-J.wrap),J.pending!==0?ds:bu)},Pt=O=>{if(qe(O))return to;const Pe=O.state.status;return O.state=null,Pe===To?Ht(O,Ml):ds},qt=(O,Pe)=>{let J=Pe.length;if(qe(O))return to;const Ye=O.state,bt=Ye.wrap;if(bt===2||bt===1&&Ye.status!==Qo||Ye.lookahead)return to;if(bt===1&&(O.adler=li(O.adler,Pe,J,0)),Ye.wrap=0,J>=Ye.w_size){bt===0&&(ie(Ye.head),Ye.strstart=0,Ye.block_start=0,Ye.insert=0);let Dn=new Uint8Array(Ye.w_size);Dn.set(Pe.subarray(J-Ye.w_size,J),0),Pe=Dn,J=Ye.w_size}const xt=O.avail_in,mr=O.next_in,Kt=O.input;for(O.avail_in=J,O.next_in=0,O.input=Pe,k(Ye);Ye.lookahead>=gi;){let Dn=Ye.strstart,Ft=Ye.lookahead-(gi-1);do Ye.ins_h=z(Ye,Ye.ins_h,Ye.window[Dn+gi-1]),Ye.prev[Dn&Ye.w_mask]=Ye.head[Ye.ins_h],Ye.head[Ye.ins_h]=Dn,Dn++;while(--Ft);Ye.strstart=Dn,Ye.lookahead=gi-1,k(Ye)}return Ye.strstart+=Ye.lookahead,Ye.block_start=Ye.strstart,Ye.insert=Ye.lookahead,Ye.lookahead=0,Ye.match_length=Ye.prev_length=gi-1,Ye.match_available=0,O.next_in=mr,O.input=Kt,O.avail_in=xt,Ye.wrap=bt,ds};var It=Ct,Je=at,zt=Te,Sr=lt,ir=Et,Mt=et,xr=Pt,st=qt,mt="pako deflate (from Nodeca project)",Ot={deflateInit:It,deflateInit2:Je,deflateReset:zt,deflateResetKeep:Sr,deflateSetHeader:ir,deflate:Mt,deflateEnd:xr,deflateSetDictionary:st,deflateInfo:mt};const Rt=(O,Pe)=>Object.prototype.hasOwnProperty.call(O,Pe);var Ar=function(O){const Pe=Array.prototype.slice.call(arguments,1);for(;Pe.length;){const J=Pe.shift();if(J){if(typeof J!="object")throw new TypeError(J+"must be non-object");for(const Ye in J)Rt(J,Ye)&&(O[Ye]=J[Ye])}}return O},jr=O=>{let Pe=0;for(let Ye=0,bt=O.length;Ye<bt;Ye++)Pe+=O[Ye].length;const J=new Uint8Array(Pe);for(let Ye=0,bt=0,xt=O.length;Ye<xt;Ye++){let mr=O[Ye];J.set(mr,bt),bt+=mr.length}return J},Br={assign:Ar,flattenChunks:jr};let ar=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{ar=!1}const Lr=new Uint8Array(256);for(let O=0;O<256;O++)Lr[O]=O>=252?6:O>=248?5:O>=240?4:O>=224?3:O>=192?2:1;Lr[254]=Lr[254]=1;var hn=O=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(O);let Pe,J,Ye,bt,xt,mr=O.length,Kt=0;for(bt=0;bt<mr;bt++)J=O.charCodeAt(bt),(J&64512)===55296&&bt+1<mr&&(Ye=O.charCodeAt(bt+1),(Ye&64512)===56320&&(J=65536+(J-55296<<10)+(Ye-56320),bt++)),Kt+=J<128?1:J<2048?2:J<65536?3:4;for(Pe=new Uint8Array(Kt),xt=0,bt=0;xt<Kt;bt++)J=O.charCodeAt(bt),(J&64512)===55296&&bt+1<mr&&(Ye=O.charCodeAt(bt+1),(Ye&64512)===56320&&(J=65536+(J-55296<<10)+(Ye-56320),bt++)),J<128?Pe[xt++]=J:J<2048?(Pe[xt++]=192|J>>>6,Pe[xt++]=128|J&63):J<65536?(Pe[xt++]=224|J>>>12,Pe[xt++]=128|J>>>6&63,Pe[xt++]=128|J&63):(Pe[xt++]=240|J>>>18,Pe[xt++]=128|J>>>12&63,Pe[xt++]=128|J>>>6&63,Pe[xt++]=128|J&63);return Pe};const tn=(O,Pe)=>{if(Pe<65534&&O.subarray&&ar)return String.fromCharCode.apply(null,O.length===Pe?O:O.subarray(0,Pe));let J="";for(let Ye=0;Ye<Pe;Ye++)J+=String.fromCharCode(O[Ye]);return J};var We=(O,Pe)=>{const J=Pe||O.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(O.subarray(0,Pe));let Ye,bt;const xt=new Array(J*2);for(bt=0,Ye=0;Ye<J;){let mr=O[Ye++];if(mr<128){xt[bt++]=mr;continue}let Kt=Lr[mr];if(Kt>4){xt[bt++]=65533,Ye+=Kt-1;continue}for(mr&=Kt===2?31:Kt===3?15:7;Kt>1&&Ye<J;)mr=mr<<6|O[Ye++]&63,Kt--;if(Kt>1){xt[bt++]=65533;continue}mr<65536?xt[bt++]=mr:(mr-=65536,xt[bt++]=55296|mr>>10&1023,xt[bt++]=56320|mr&1023)}return tn(xt,bt)},St=(O,Pe)=>{Pe=Pe||O.length,Pe>O.length&&(Pe=O.length);let J=Pe-1;for(;J>=0&&(O[J]&192)===128;)J--;return J<0||J===0?Pe:J+Lr[O[J]]>Pe?J:Pe},Nt={string2buf:hn,buf2string:We,utf8border:St};function Gt(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Xt=Gt;const cr=Object.prototype.toString,{Z_NO_FLUSH:Nr,Z_SYNC_FLUSH:Cr,Z_FULL_FLUSH:Gr,Z_FINISH:un,Z_OK:En,Z_STREAM_END:Rn,Z_DEFAULT_COMPRESSION:yi,Z_DEFAULT_STRATEGY:pt,Z_DEFLATED:Sn}=ss;function Ri(O){this.options=Br.assign({level:yi,method:Sn,chunkSize:16384,windowBits:15,memLevel:8,strategy:pt},O||{});let Pe=this.options;Pe.raw&&Pe.windowBits>0?Pe.windowBits=-Pe.windowBits:Pe.gzip&&Pe.windowBits>0&&Pe.windowBits<16&&(Pe.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Xt,this.strm.avail_out=0;let J=Ot.deflateInit2(this.strm,Pe.level,Pe.method,Pe.windowBits,Pe.memLevel,Pe.strategy);if(J!==En)throw new Error(sn[J]);if(Pe.header&&Ot.deflateSetHeader(this.strm,Pe.header),Pe.dictionary){let Ye;if(typeof Pe.dictionary=="string"?Ye=Nt.string2buf(Pe.dictionary):cr.call(Pe.dictionary)==="[object ArrayBuffer]"?Ye=new Uint8Array(Pe.dictionary):Ye=Pe.dictionary,J=Ot.deflateSetDictionary(this.strm,Ye),J!==En)throw new Error(sn[J]);this._dict_set=!0}}Ri.prototype.push=function(O,Pe){const J=this.strm,Ye=this.options.chunkSize;let bt,xt;if(this.ended)return!1;for(Pe===~~Pe?xt=Pe:xt=Pe===!0?un:Nr,typeof O=="string"?J.input=Nt.string2buf(O):cr.call(O)==="[object ArrayBuffer]"?J.input=new Uint8Array(O):J.input=O,J.next_in=0,J.avail_in=J.input.length;;){if(J.avail_out===0&&(J.output=new Uint8Array(Ye),J.next_out=0,J.avail_out=Ye),(xt===Cr||xt===Gr)&&J.avail_out<=6){this.onData(J.output.subarray(0,J.next_out)),J.avail_out=0;continue}if(bt=Ot.deflate(J,xt),bt===Rn)return J.next_out>0&&this.onData(J.output.subarray(0,J.next_out)),bt=Ot.deflateEnd(this.strm),this.onEnd(bt),this.ended=!0,bt===En;if(J.avail_out===0){this.onData(J.output);continue}if(xt>0&&J.next_out>0){this.onData(J.output.subarray(0,J.next_out)),J.avail_out=0;continue}if(J.avail_in===0)break}return!0},Ri.prototype.onData=function(O){this.chunks.push(O)},Ri.prototype.onEnd=function(O){O===En&&(this.result=Br.flattenChunks(this.chunks)),this.chunks=[],this.err=O,this.msg=this.strm.msg};function Tn(O,Pe){const J=new Ri(Pe);if(J.push(O,!0),J.err)throw J.msg||sn[J.err];return J.result}function nn(O,Pe){return Pe=Pe||{},Pe.raw=!0,Tn(O,Pe)}function ji(O,Pe){return Pe=Pe||{},Pe.gzip=!0,Tn(O,Pe)}var Fn=Ri,Hn=Tn,$n=nn,ga=ji,Di={Deflate:Fn,deflate:Hn,deflateRaw:$n,gzip:ga};const Gn=16209,ns=16191;var _i=function(Pe,J){let Ye,bt,xt,mr,Kt,Dn,Ft,gr,qi,Nn,en,Pr,Fa,Wi,Ni,Vi,ys,bn,xs,Ua,Si,ia,ks,ni;const $i=Pe.state;Ye=Pe.next_in,ks=Pe.input,bt=Ye+(Pe.avail_in-5),xt=Pe.next_out,ni=Pe.output,mr=xt-(J-Pe.avail_out),Kt=xt+(Pe.avail_out-257),Dn=$i.dmax,Ft=$i.wsize,gr=$i.whave,qi=$i.wnext,Nn=$i.window,en=$i.hold,Pr=$i.bits,Fa=$i.lencode,Wi=$i.distcode,Ni=(1<<$i.lenbits)-1,Vi=(1<<$i.distbits)-1;e:do{Pr<15&&(en+=ks[Ye++]<<Pr,Pr+=8,en+=ks[Ye++]<<Pr,Pr+=8),ys=Fa[en&Ni];t:for(;;){if(bn=ys>>>24,en>>>=bn,Pr-=bn,bn=ys>>>16&255,bn===0)ni[xt++]=ys&65535;else if(bn&16){xs=ys&65535,bn&=15,bn&&(Pr<bn&&(en+=ks[Ye++]<<Pr,Pr+=8),xs+=en&(1<<bn)-1,en>>>=bn,Pr-=bn),Pr<15&&(en+=ks[Ye++]<<Pr,Pr+=8,en+=ks[Ye++]<<Pr,Pr+=8),ys=Wi[en&Vi];r:for(;;){if(bn=ys>>>24,en>>>=bn,Pr-=bn,bn=ys>>>16&255,bn&16){if(Ua=ys&65535,bn&=15,Pr<bn&&(en+=ks[Ye++]<<Pr,Pr+=8,Pr<bn&&(en+=ks[Ye++]<<Pr,Pr+=8)),Ua+=en&(1<<bn)-1,Ua>Dn){Pe.msg="invalid distance too far back",$i.mode=Gn;break e}if(en>>>=bn,Pr-=bn,bn=xt-mr,Ua>bn){if(bn=Ua-bn,bn>gr&&$i.sane){Pe.msg="invalid distance too far back",$i.mode=Gn;break e}if(Si=0,ia=Nn,qi===0){if(Si+=Ft-bn,bn<xs){xs-=bn;do ni[xt++]=Nn[Si++];while(--bn);Si=xt-Ua,ia=ni}}else if(qi<bn){if(Si+=Ft+qi-bn,bn-=qi,bn<xs){xs-=bn;do ni[xt++]=Nn[Si++];while(--bn);if(Si=0,qi<xs){bn=qi,xs-=bn;do ni[xt++]=Nn[Si++];while(--bn);Si=xt-Ua,ia=ni}}}else if(Si+=qi-bn,bn<xs){xs-=bn;do ni[xt++]=Nn[Si++];while(--bn);Si=xt-Ua,ia=ni}for(;xs>2;)ni[xt++]=ia[Si++],ni[xt++]=ia[Si++],ni[xt++]=ia[Si++],xs-=3;xs&&(ni[xt++]=ia[Si++],xs>1&&(ni[xt++]=ia[Si++]))}else{Si=xt-Ua;do ni[xt++]=ni[Si++],ni[xt++]=ni[Si++],ni[xt++]=ni[Si++],xs-=3;while(xs>2);xs&&(ni[xt++]=ni[Si++],xs>1&&(ni[xt++]=ni[Si++]))}}else if((bn&64)===0){ys=Wi[(ys&65535)+(en&(1<<bn)-1)];continue r}else{Pe.msg="invalid distance code",$i.mode=Gn;break e}break}}else if((bn&64)===0){ys=Fa[(ys&65535)+(en&(1<<bn)-1)];continue t}else if(bn&32){$i.mode=ns;break e}else{Pe.msg="invalid literal/length code",$i.mode=Gn;break e}break}}while(Ye<bt&&xt<Kt);xs=Pr>>3,Ye-=xs,Pr-=xs<<3,en&=(1<<Pr)-1,Pe.next_in=Ye,Pe.next_out=xt,Pe.avail_in=Ye<bt?5+(bt-Ye):5-(Ye-bt),Pe.avail_out=xt<Kt?257+(Kt-xt):257-(xt-Kt),$i.hold=en,$i.bits=Pr};const Un=15,ki=852,Wn=592,Gi=0,is=1,Zi=2,vs=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),ja=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),xi=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Ys=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var ai=(O,Pe,J,Ye,bt,xt,mr,Kt)=>{const Dn=Kt.bits;let Ft=0,gr=0,qi=0,Nn=0,en=0,Pr=0,Fa=0,Wi=0,Ni=0,Vi=0,ys,bn,xs,Ua,Si,ia=null,ks;const ni=new Uint16Array(Un+1),$i=new Uint16Array(Un+1);let rc=null,qu,ou,yl;for(Ft=0;Ft<=Un;Ft++)ni[Ft]=0;for(gr=0;gr<Ye;gr++)ni[Pe[J+gr]]++;for(en=Dn,Nn=Un;Nn>=1&&ni[Nn]===0;Nn--);if(en>Nn&&(en=Nn),Nn===0)return bt[xt++]=1<<24|64<<16|0,bt[xt++]=1<<24|64<<16|0,Kt.bits=1,0;for(qi=1;qi<Nn&&ni[qi]===0;qi++);for(en<qi&&(en=qi),Wi=1,Ft=1;Ft<=Un;Ft++)if(Wi<<=1,Wi-=ni[Ft],Wi<0)return-1;if(Wi>0&&(O===Gi||Nn!==1))return-1;for($i[1]=0,Ft=1;Ft<Un;Ft++)$i[Ft+1]=$i[Ft]+ni[Ft];for(gr=0;gr<Ye;gr++)Pe[J+gr]!==0&&(mr[$i[Pe[J+gr]]++]=gr);if(O===Gi?(ia=rc=mr,ks=20):O===is?(ia=vs,rc=ja,ks=257):(ia=xi,rc=Ys,ks=0),Vi=0,gr=0,Ft=qi,Si=xt,Pr=en,Fa=0,xs=-1,Ni=1<<en,Ua=Ni-1,O===is&&Ni>ki||O===Zi&&Ni>Wn)return 1;for(;;){qu=Ft-Fa,mr[gr]+1<ks?(ou=0,yl=mr[gr]):mr[gr]>=ks?(ou=rc[mr[gr]-ks],yl=ia[mr[gr]-ks]):(ou=96,yl=0),ys=1<<Ft-Fa,bn=1<<Pr,qi=bn;do bn-=ys,bt[Si+(Vi>>Fa)+bn]=qu<<24|ou<<16|yl|0;while(bn!==0);for(ys=1<<Ft-1;Vi&ys;)ys>>=1;if(ys!==0?(Vi&=ys-1,Vi+=ys):Vi=0,gr++,--ni[Ft]===0){if(Ft===Nn)break;Ft=Pe[J+mr[gr]]}if(Ft>en&&(Vi&Ua)!==xs){for(Fa===0&&(Fa=en),Si+=qi,Pr=Ft-Fa,Wi=1<<Pr;Pr+Fa<Nn&&(Wi-=ni[Pr+Fa],!(Wi<=0));)Pr++,Wi<<=1;if(Ni+=1<<Pr,O===is&&Ni>ki||O===Zi&&Ni>Wn)return 1;xs=Vi&Ua,bt[xs]=en<<24|Pr<<16|Si-xt|0}}return Vi!==0&&(bt[Si+Vi]=Ft-Fa<<24|64<<16|0),Kt.bits=en,0};const da=0,Ii=1,xn=2,{Z_FINISH:ls,Z_BLOCK:wu,Z_TREES:io,Z_OK:Ko,Z_STREAM_END:Jl,Z_NEED_DICT:bi,Z_STREAM_ERROR:Ra,Z_DATA_ERROR:Xa,Z_MEM_ERROR:Ul,Z_BUF_ERROR:$l,Z_DEFLATED:ha}=ss,vo=16180,Za=16181,Hc=16182,Co=16183,pc=16184,Ka=16185,Hl=16186,Ql=16187,Il=16188,yd=16189,ec=16190,Vl=16191,gc=16192,xd=16193,zl=16194,Kl=16195,Eu=16196,Gl=16197,Lo=16198,gl=16199,iu=16200,vc=16201,Hd=16202,tc=16203,Gu=16204,bd=16205,vl=16206,sh=16207,Ll=16208,Fi=16209,yc=16210,Qc=16211,Vc=852,Wu=592,Bo=15,su=O=>(O>>>24&255)+(O>>>8&65280)+((O&65280)<<8)+((O&255)<<24);function v(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const _=O=>{if(!O)return 1;const Pe=O.state;return!Pe||Pe.strm!==O||Pe.mode<vo||Pe.mode>Qc?1:0},H=O=>{if(_(O))return Ra;const Pe=O.state;return O.total_in=O.total_out=Pe.total=0,O.msg="",Pe.wrap&&(O.adler=Pe.wrap&1),Pe.mode=vo,Pe.last=0,Pe.havedict=0,Pe.flags=-1,Pe.dmax=32768,Pe.head=null,Pe.hold=0,Pe.bits=0,Pe.lencode=Pe.lendyn=new Int32Array(Vc),Pe.distcode=Pe.distdyn=new Int32Array(Wu),Pe.sane=1,Pe.back=-1,Ko},oe=O=>{if(_(O))return Ra;const Pe=O.state;return Pe.wsize=0,Pe.whave=0,Pe.wnext=0,H(O)},Ee=(O,Pe)=>{let J;if(_(O))return Ra;const Ye=O.state;return Pe<0?(J=0,Pe=-Pe):(J=(Pe>>4)+5,Pe<48&&(Pe&=15)),Pe&&(Pe<8||Pe>15)?Ra:(Ye.window!==null&&Ye.wbits!==Pe&&(Ye.window=null),Ye.wrap=J,Ye.wbits=Pe,oe(O))},Ve=(O,Pe)=>{if(!O)return Ra;const J=new v;O.state=J,J.strm=O,J.window=null,J.mode=vo;const Ye=Ee(O,Pe);return Ye!==Ko&&(O.state=null),Ye},jt=O=>Ve(O,Bo);let Jt=!0,br,Vr;const vn=O=>{if(Jt){br=new Int32Array(512),Vr=new Int32Array(32);let Pe=0;for(;Pe<144;)O.lens[Pe++]=8;for(;Pe<256;)O.lens[Pe++]=9;for(;Pe<280;)O.lens[Pe++]=7;for(;Pe<288;)O.lens[Pe++]=8;for(ai(Ii,O.lens,0,288,br,0,O.work,{bits:9}),Pe=0;Pe<32;)O.lens[Pe++]=5;ai(xn,O.lens,0,32,Vr,0,O.work,{bits:5}),Jt=!1}O.lencode=br,O.lenbits=9,O.distcode=Vr,O.distbits=5},ui=(O,Pe,J,Ye)=>{let bt;const xt=O.state;return xt.window===null&&(xt.wsize=1<<xt.wbits,xt.wnext=0,xt.whave=0,xt.window=new Uint8Array(xt.wsize)),Ye>=xt.wsize?(xt.window.set(Pe.subarray(J-xt.wsize,J),0),xt.wnext=0,xt.whave=xt.wsize):(bt=xt.wsize-xt.wnext,bt>Ye&&(bt=Ye),xt.window.set(Pe.subarray(J-Ye,J-Ye+bt),xt.wnext),Ye-=bt,Ye?(xt.window.set(Pe.subarray(J-Ye,J),0),xt.wnext=Ye,xt.whave=xt.wsize):(xt.wnext+=bt,xt.wnext===xt.wsize&&(xt.wnext=0),xt.whave<xt.wsize&&(xt.whave+=bt))),0},As=(O,Pe)=>{let J,Ye,bt,xt,mr,Kt,Dn,Ft,gr,qi,Nn,en,Pr,Fa,Wi=0,Ni,Vi,ys,bn,xs,Ua,Si,ia;const ks=new Uint8Array(4);let ni,$i;const rc=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(_(O)||!O.output||!O.input&&O.avail_in!==0)return Ra;J=O.state,J.mode===Vl&&(J.mode=gc),mr=O.next_out,bt=O.output,Dn=O.avail_out,xt=O.next_in,Ye=O.input,Kt=O.avail_in,Ft=J.hold,gr=J.bits,qi=Kt,Nn=Dn,ia=Ko;e:for(;;)switch(J.mode){case vo:if(J.wrap===0){J.mode=gc;break}for(;gr<16;){if(Kt===0)break e;Kt--,Ft+=Ye[xt++]<<gr,gr+=8}if(J.wrap&2&&Ft===35615){J.wbits===0&&(J.wbits=15),J.check=0,ks[0]=Ft&255,ks[1]=Ft>>>8&255,J.check=ei(J.check,ks,2,0),Ft=0,gr=0,J.mode=Za;break}if(J.head&&(J.head.done=!1),!(J.wrap&1)||(((Ft&255)<<8)+(Ft>>8))%31){O.msg="incorrect header check",J.mode=Fi;break}if((Ft&15)!==ha){O.msg="unknown compression method",J.mode=Fi;break}if(Ft>>>=4,gr-=4,Si=(Ft&15)+8,J.wbits===0&&(J.wbits=Si),Si>15||Si>J.wbits){O.msg="invalid window size",J.mode=Fi;break}J.dmax=1<<J.wbits,J.flags=0,O.adler=J.check=1,J.mode=Ft&512?yd:Vl,Ft=0,gr=0;break;case Za:for(;gr<16;){if(Kt===0)break e;Kt--,Ft+=Ye[xt++]<<gr,gr+=8}if(J.flags=Ft,(J.flags&255)!==ha){O.msg="unknown compression method",J.mode=Fi;break}if(J.flags&57344){O.msg="unknown header flags set",J.mode=Fi;break}J.head&&(J.head.text=Ft>>8&1),J.flags&512&&J.wrap&4&&(ks[0]=Ft&255,ks[1]=Ft>>>8&255,J.check=ei(J.check,ks,2,0)),Ft=0,gr=0,J.mode=Hc;case Hc:for(;gr<32;){if(Kt===0)break e;Kt--,Ft+=Ye[xt++]<<gr,gr+=8}J.head&&(J.head.time=Ft),J.flags&512&&J.wrap&4&&(ks[0]=Ft&255,ks[1]=Ft>>>8&255,ks[2]=Ft>>>16&255,ks[3]=Ft>>>24&255,J.check=ei(J.check,ks,4,0)),Ft=0,gr=0,J.mode=Co;case Co:for(;gr<16;){if(Kt===0)break e;Kt--,Ft+=Ye[xt++]<<gr,gr+=8}J.head&&(J.head.xflags=Ft&255,J.head.os=Ft>>8),J.flags&512&&J.wrap&4&&(ks[0]=Ft&255,ks[1]=Ft>>>8&255,J.check=ei(J.check,ks,2,0)),Ft=0,gr=0,J.mode=pc;case pc:if(J.flags&1024){for(;gr<16;){if(Kt===0)break e;Kt--,Ft+=Ye[xt++]<<gr,gr+=8}J.length=Ft,J.head&&(J.head.extra_len=Ft),J.flags&512&&J.wrap&4&&(ks[0]=Ft&255,ks[1]=Ft>>>8&255,J.check=ei(J.check,ks,2,0)),Ft=0,gr=0}else J.head&&(J.head.extra=null);J.mode=Ka;case Ka:if(J.flags&1024&&(en=J.length,en>Kt&&(en=Kt),en&&(J.head&&(Si=J.head.extra_len-J.length,J.head.extra||(J.head.extra=new Uint8Array(J.head.extra_len)),J.head.extra.set(Ye.subarray(xt,xt+en),Si)),J.flags&512&&J.wrap&4&&(J.check=ei(J.check,Ye,en,xt)),Kt-=en,xt+=en,J.length-=en),J.length))break e;J.length=0,J.mode=Hl;case Hl:if(J.flags&2048){if(Kt===0)break e;en=0;do Si=Ye[xt+en++],J.head&&Si&&J.length<65536&&(J.head.name+=String.fromCharCode(Si));while(Si&&en<Kt);if(J.flags&512&&J.wrap&4&&(J.check=ei(J.check,Ye,en,xt)),Kt-=en,xt+=en,Si)break e}else J.head&&(J.head.name=null);J.length=0,J.mode=Ql;case Ql:if(J.flags&4096){if(Kt===0)break e;en=0;do Si=Ye[xt+en++],J.head&&Si&&J.length<65536&&(J.head.comment+=String.fromCharCode(Si));while(Si&&en<Kt);if(J.flags&512&&J.wrap&4&&(J.check=ei(J.check,Ye,en,xt)),Kt-=en,xt+=en,Si)break e}else J.head&&(J.head.comment=null);J.mode=Il;case Il:if(J.flags&512){for(;gr<16;){if(Kt===0)break e;Kt--,Ft+=Ye[xt++]<<gr,gr+=8}if(J.wrap&4&&Ft!==(J.check&65535)){O.msg="header crc mismatch",J.mode=Fi;break}Ft=0,gr=0}J.head&&(J.head.hcrc=J.flags>>9&1,J.head.done=!0),O.adler=J.check=0,J.mode=Vl;break;case yd:for(;gr<32;){if(Kt===0)break e;Kt--,Ft+=Ye[xt++]<<gr,gr+=8}O.adler=J.check=su(Ft),Ft=0,gr=0,J.mode=ec;case ec:if(J.havedict===0)return O.next_out=mr,O.avail_out=Dn,O.next_in=xt,O.avail_in=Kt,J.hold=Ft,J.bits=gr,bi;O.adler=J.check=1,J.mode=Vl;case Vl:if(Pe===wu||Pe===io)break e;case gc:if(J.last){Ft>>>=gr&7,gr-=gr&7,J.mode=vl;break}for(;gr<3;){if(Kt===0)break e;Kt--,Ft+=Ye[xt++]<<gr,gr+=8}switch(J.last=Ft&1,Ft>>>=1,gr-=1,Ft&3){case 0:J.mode=xd;break;case 1:if(vn(J),J.mode=gl,Pe===io){Ft>>>=2,gr-=2;break e}break;case 2:J.mode=Eu;break;case 3:O.msg="invalid block type",J.mode=Fi}Ft>>>=2,gr-=2;break;case xd:for(Ft>>>=gr&7,gr-=gr&7;gr<32;){if(Kt===0)break e;Kt--,Ft+=Ye[xt++]<<gr,gr+=8}if((Ft&65535)!==(Ft>>>16^65535)){O.msg="invalid stored block lengths",J.mode=Fi;break}if(J.length=Ft&65535,Ft=0,gr=0,J.mode=zl,Pe===io)break e;case zl:J.mode=Kl;case Kl:if(en=J.length,en){if(en>Kt&&(en=Kt),en>Dn&&(en=Dn),en===0)break e;bt.set(Ye.subarray(xt,xt+en),mr),Kt-=en,xt+=en,Dn-=en,mr+=en,J.length-=en;break}J.mode=Vl;break;case Eu:for(;gr<14;){if(Kt===0)break e;Kt--,Ft+=Ye[xt++]<<gr,gr+=8}if(J.nlen=(Ft&31)+257,Ft>>>=5,gr-=5,J.ndist=(Ft&31)+1,Ft>>>=5,gr-=5,J.ncode=(Ft&15)+4,Ft>>>=4,gr-=4,J.nlen>286||J.ndist>30){O.msg="too many length or distance symbols",J.mode=Fi;break}J.have=0,J.mode=Gl;case Gl:for(;J.have<J.ncode;){for(;gr<3;){if(Kt===0)break e;Kt--,Ft+=Ye[xt++]<<gr,gr+=8}J.lens[rc[J.have++]]=Ft&7,Ft>>>=3,gr-=3}for(;J.have<19;)J.lens[rc[J.have++]]=0;if(J.lencode=J.lendyn,J.lenbits=7,ni={bits:J.lenbits},ia=ai(da,J.lens,0,19,J.lencode,0,J.work,ni),J.lenbits=ni.bits,ia){O.msg="invalid code lengths set",J.mode=Fi;break}J.have=0,J.mode=Lo;case Lo:for(;J.have<J.nlen+J.ndist;){for(;Wi=J.lencode[Ft&(1<<J.lenbits)-1],Ni=Wi>>>24,Vi=Wi>>>16&255,ys=Wi&65535,!(Ni<=gr);){if(Kt===0)break e;Kt--,Ft+=Ye[xt++]<<gr,gr+=8}if(ys<16)Ft>>>=Ni,gr-=Ni,J.lens[J.have++]=ys;else{if(ys===16){for($i=Ni+2;gr<$i;){if(Kt===0)break e;Kt--,Ft+=Ye[xt++]<<gr,gr+=8}if(Ft>>>=Ni,gr-=Ni,J.have===0){O.msg="invalid bit length repeat",J.mode=Fi;break}Si=J.lens[J.have-1],en=3+(Ft&3),Ft>>>=2,gr-=2}else if(ys===17){for($i=Ni+3;gr<$i;){if(Kt===0)break e;Kt--,Ft+=Ye[xt++]<<gr,gr+=8}Ft>>>=Ni,gr-=Ni,Si=0,en=3+(Ft&7),Ft>>>=3,gr-=3}else{for($i=Ni+7;gr<$i;){if(Kt===0)break e;Kt--,Ft+=Ye[xt++]<<gr,gr+=8}Ft>>>=Ni,gr-=Ni,Si=0,en=11+(Ft&127),Ft>>>=7,gr-=7}if(J.have+en>J.nlen+J.ndist){O.msg="invalid bit length repeat",J.mode=Fi;break}for(;en--;)J.lens[J.have++]=Si}}if(J.mode===Fi)break;if(J.lens[256]===0){O.msg="invalid code -- missing end-of-block",J.mode=Fi;break}if(J.lenbits=9,ni={bits:J.lenbits},ia=ai(Ii,J.lens,0,J.nlen,J.lencode,0,J.work,ni),J.lenbits=ni.bits,ia){O.msg="invalid literal/lengths set",J.mode=Fi;break}if(J.distbits=6,J.distcode=J.distdyn,ni={bits:J.distbits},ia=ai(xn,J.lens,J.nlen,J.ndist,J.distcode,0,J.work,ni),J.distbits=ni.bits,ia){O.msg="invalid distances set",J.mode=Fi;break}if(J.mode=gl,Pe===io)break e;case gl:J.mode=iu;case iu:if(Kt>=6&&Dn>=258){O.next_out=mr,O.avail_out=Dn,O.next_in=xt,O.avail_in=Kt,J.hold=Ft,J.bits=gr,_i(O,Nn),mr=O.next_out,bt=O.output,Dn=O.avail_out,xt=O.next_in,Ye=O.input,Kt=O.avail_in,Ft=J.hold,gr=J.bits,J.mode===Vl&&(J.back=-1);break}for(J.back=0;Wi=J.lencode[Ft&(1<<J.lenbits)-1],Ni=Wi>>>24,Vi=Wi>>>16&255,ys=Wi&65535,!(Ni<=gr);){if(Kt===0)break e;Kt--,Ft+=Ye[xt++]<<gr,gr+=8}if(Vi&&(Vi&240)===0){for(bn=Ni,xs=Vi,Ua=ys;Wi=J.lencode[Ua+((Ft&(1<<bn+xs)-1)>>bn)],Ni=Wi>>>24,Vi=Wi>>>16&255,ys=Wi&65535,!(bn+Ni<=gr);){if(Kt===0)break e;Kt--,Ft+=Ye[xt++]<<gr,gr+=8}Ft>>>=bn,gr-=bn,J.back+=bn}if(Ft>>>=Ni,gr-=Ni,J.back+=Ni,J.length=ys,Vi===0){J.mode=bd;break}if(Vi&32){J.back=-1,J.mode=Vl;break}if(Vi&64){O.msg="invalid literal/length code",J.mode=Fi;break}J.extra=Vi&15,J.mode=vc;case vc:if(J.extra){for($i=J.extra;gr<$i;){if(Kt===0)break e;Kt--,Ft+=Ye[xt++]<<gr,gr+=8}J.length+=Ft&(1<<J.extra)-1,Ft>>>=J.extra,gr-=J.extra,J.back+=J.extra}J.was=J.length,J.mode=Hd;case Hd:for(;Wi=J.distcode[Ft&(1<<J.distbits)-1],Ni=Wi>>>24,Vi=Wi>>>16&255,ys=Wi&65535,!(Ni<=gr);){if(Kt===0)break e;Kt--,Ft+=Ye[xt++]<<gr,gr+=8}if((Vi&240)===0){for(bn=Ni,xs=Vi,Ua=ys;Wi=J.distcode[Ua+((Ft&(1<<bn+xs)-1)>>bn)],Ni=Wi>>>24,Vi=Wi>>>16&255,ys=Wi&65535,!(bn+Ni<=gr);){if(Kt===0)break e;Kt--,Ft+=Ye[xt++]<<gr,gr+=8}Ft>>>=bn,gr-=bn,J.back+=bn}if(Ft>>>=Ni,gr-=Ni,J.back+=Ni,Vi&64){O.msg="invalid distance code",J.mode=Fi;break}J.offset=ys,J.extra=Vi&15,J.mode=tc;case tc:if(J.extra){for($i=J.extra;gr<$i;){if(Kt===0)break e;Kt--,Ft+=Ye[xt++]<<gr,gr+=8}J.offset+=Ft&(1<<J.extra)-1,Ft>>>=J.extra,gr-=J.extra,J.back+=J.extra}if(J.offset>J.dmax){O.msg="invalid distance too far back",J.mode=Fi;break}J.mode=Gu;case Gu:if(Dn===0)break e;if(en=Nn-Dn,J.offset>en){if(en=J.offset-en,en>J.whave&&J.sane){O.msg="invalid distance too far back",J.mode=Fi;break}en>J.wnext?(en-=J.wnext,Pr=J.wsize-en):Pr=J.wnext-en,en>J.length&&(en=J.length),Fa=J.window}else Fa=bt,Pr=mr-J.offset,en=J.length;en>Dn&&(en=Dn),Dn-=en,J.length-=en;do bt[mr++]=Fa[Pr++];while(--en);J.length===0&&(J.mode=iu);break;case bd:if(Dn===0)break e;bt[mr++]=J.length,Dn--,J.mode=iu;break;case vl:if(J.wrap){for(;gr<32;){if(Kt===0)break e;Kt--,Ft|=Ye[xt++]<<gr,gr+=8}if(Nn-=Dn,O.total_out+=Nn,J.total+=Nn,J.wrap&4&&Nn&&(O.adler=J.check=J.flags?ei(J.check,bt,Nn,mr-Nn):li(J.check,bt,Nn,mr-Nn)),Nn=Dn,J.wrap&4&&(J.flags?Ft:su(Ft))!==J.check){O.msg="incorrect data check",J.mode=Fi;break}Ft=0,gr=0}J.mode=sh;case sh:if(J.wrap&&J.flags){for(;gr<32;){if(Kt===0)break e;Kt--,Ft+=Ye[xt++]<<gr,gr+=8}if(J.wrap&4&&Ft!==(J.total&4294967295)){O.msg="incorrect length check",J.mode=Fi;break}Ft=0,gr=0}J.mode=Ll;case Ll:ia=Jl;break e;case Fi:ia=Xa;break e;case yc:return Ul;case Qc:default:return Ra}return O.next_out=mr,O.avail_out=Dn,O.next_in=xt,O.avail_in=Kt,J.hold=Ft,J.bits=gr,(J.wsize||Nn!==O.avail_out&&J.mode<Fi&&(J.mode<vl||Pe!==ls))&&ui(O,O.output,O.next_out,Nn-O.avail_out),qi-=O.avail_in,Nn-=O.avail_out,O.total_in+=qi,O.total_out+=Nn,J.total+=Nn,J.wrap&4&&Nn&&(O.adler=J.check=J.flags?ei(J.check,bt,Nn,O.next_out-Nn):li(J.check,bt,Nn,O.next_out-Nn)),O.data_type=J.bits+(J.last?64:0)+(J.mode===Vl?128:0)+(J.mode===gl||J.mode===zl?256:0),(qi===0&&Nn===0||Pe===ls)&&ia===Ko&&(ia=$l),ia},Da=O=>{if(_(O))return Ra;let Pe=O.state;return Pe.window&&(Pe.window=null),O.state=null,Ko},jo=(O,Pe)=>{if(_(O))return Ra;const J=O.state;return(J.wrap&2)===0?Ra:(J.head=Pe,Pe.done=!1,Ko)},il=(O,Pe)=>{const J=Pe.length;let Ye,bt,xt;return _(O)||(Ye=O.state,Ye.wrap!==0&&Ye.mode!==ec)?Ra:Ye.mode===ec&&(bt=1,bt=li(bt,Pe,J,0),bt!==Ye.check)?Xa:(xt=ui(O,Pe,J,J),xt?(Ye.mode=yc,Ul):(Ye.havedict=1,Ko))};var Zs=oe,la=Ee,jn=H,Yu=jt,bc=Ve,wd=As,Wl=Da,_u=jo,so=il,Su="pako inflate (from Nodeca project)",Go={inflateReset:Zs,inflateReset2:la,inflateResetKeep:jn,inflateInit:Yu,inflateInit2:bc,inflate:wd,inflateEnd:Wl,inflateGetHeader:_u,inflateSetDictionary:so,inflateInfo:Su};function Ed(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var wc=Ed;const Qd=Object.prototype.toString,{Z_NO_FLUSH:Yl,Z_FINISH:Tu,Z_OK:Ec,Z_STREAM_END:zc,Z_NEED_DICT:Eh,Z_STREAM_ERROR:au,Z_DATA_ERROR:_d,Z_MEM_ERROR:ah}=ss;function Kc(O){this.options=Br.assign({chunkSize:65536,windowBits:15,to:""},O||{});const Pe=this.options;Pe.raw&&Pe.windowBits>=0&&Pe.windowBits<16&&(Pe.windowBits=-Pe.windowBits,Pe.windowBits===0&&(Pe.windowBits=-15)),Pe.windowBits>=0&&Pe.windowBits<16&&!(O&&O.windowBits)&&(Pe.windowBits+=32),Pe.windowBits>15&&Pe.windowBits<48&&(Pe.windowBits&15)===0&&(Pe.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Xt,this.strm.avail_out=0;let J=Go.inflateInit2(this.strm,Pe.windowBits);if(J!==Ec)throw new Error(sn[J]);if(this.header=new wc,Go.inflateGetHeader(this.strm,this.header),Pe.dictionary&&(typeof Pe.dictionary=="string"?Pe.dictionary=Nt.string2buf(Pe.dictionary):Qd.call(Pe.dictionary)==="[object ArrayBuffer]"&&(Pe.dictionary=new Uint8Array(Pe.dictionary)),Pe.raw&&(J=Go.inflateSetDictionary(this.strm,Pe.dictionary),J!==Ec)))throw new Error(sn[J])}Kc.prototype.push=function(O,Pe){const J=this.strm,Ye=this.options.chunkSize,bt=this.options.dictionary;let xt,mr,Kt;if(this.ended)return!1;for(Pe===~~Pe?mr=Pe:mr=Pe===!0?Tu:Yl,Qd.call(O)==="[object ArrayBuffer]"?J.input=new Uint8Array(O):J.input=O,J.next_in=0,J.avail_in=J.input.length;;){for(J.avail_out===0&&(J.output=new Uint8Array(Ye),J.next_out=0,J.avail_out=Ye),xt=Go.inflate(J,mr),xt===Eh&&bt&&(xt=Go.inflateSetDictionary(J,bt),xt===Ec?xt=Go.inflate(J,mr):xt===_d&&(xt=Eh));J.avail_in>0&&xt===zc&&J.state.wrap>0&&O[J.next_in]!==0;)Go.inflateReset(J),xt=Go.inflate(J,mr);switch(xt){case au:case _d:case Eh:case ah:return this.onEnd(xt),this.ended=!0,!1}if(Kt=J.avail_out,J.next_out&&(J.avail_out===0||xt===zc))if(this.options.to==="string"){let Dn=Nt.utf8border(J.output,J.next_out),Ft=J.next_out-Dn,gr=Nt.buf2string(J.output,Dn);J.next_out=Ft,J.avail_out=Ye-Ft,Ft&&J.output.set(J.output.subarray(Dn,Dn+Ft),0),this.onData(gr)}else this.onData(J.output.length===J.next_out?J.output:J.output.subarray(0,J.next_out));if(!(xt===Ec&&Kt===0)){if(xt===zc)return xt=Go.inflateEnd(this.strm),this.onEnd(xt),this.ended=!0,!0;if(J.avail_in===0)break}}return!0},Kc.prototype.onData=function(O){this.chunks.push(O)},Kc.prototype.onEnd=function(O){O===Ec&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Br.flattenChunks(this.chunks)),this.chunks=[],this.err=O,this.msg=this.strm.msg};function yo(O,Pe){const J=new Kc(Pe);if(J.push(O),J.err)throw J.msg||sn[J.err];return J.result}function _h(O,Pe){return Pe=Pe||{},Pe.raw=!0,yo(O,Pe)}var aA=Kc,VA=yo,oh=_h,lh=yo,Po={Inflate:aA,inflate:VA,inflateRaw:oh,ungzip:lh};const{Deflate:ch,deflate:Sh,deflateRaw:ue,gzip:Fe}=Di,{Inflate:yt,inflate:Lt,inflateRaw:er,ungzip:$r}=Po;var Zr=ch,ti=Sh,ri=ue,Yi=Fe,as=yt,na=Lt,Ma=er,Oo=$r,Na=ss,Wo={Deflate:Zr,deflate:ti,deflateRaw:ri,gzip:Yi,Inflate:as,inflate:na,inflateRaw:Ma,ungzip:Oo,constants:Na}}),"./node_modules/performance-now/lib/performance-now.js":(function(c){(function(){var u,l,d,f,A,p;typeof performance<"u"&&performance!==null&&performance.now?c.exports=function(){return performance.now()}:typeof process<"u"&&process!==null&&process.hrtime?(c.exports=function(){return(u()-A)/1e6},l=process.hrtime,u=function(){var g;return g=l(),g[0]*1e9+g[1]},f=u(),p=process.uptime()*1e9,A=f-p):Date.now?(c.exports=function(){return Date.now()-d},d=Date.now()):(c.exports=function(){return new Date().getTime()-d},d=new Date().getTime())}).call(this)}),"./node_modules/raf/index.js":(function(c,u,l){for(var d=l("./node_modules/performance-now/lib/performance-now.js"),f=typeof window>"u"?O1:window,A=["moz","webkit"],p="AnimationFrame",g=f["request"+p],y=f["cancel"+p]||f["cancelRequest"+p],x=0;!g&&x<A.length;x++)g=f[A[x]+"Request"+p],y=f[A[x]+"Cancel"+p]||f[A[x]+"CancelRequest"+p];if(!g||!y){var w=0,E=0,T=[],C=1e3/60;g=function(N){if(T.length===0){var I=d(),U=Math.max(0,C-(I-w));w=U+I,setTimeout(function(){var K=T.slice(0);T.length=0;for(var Y=0;Y<K.length;Y++)if(!K[Y].cancelled)try{K[Y].callback(w)}catch(re){setTimeout(function(){throw re},0)}},Math.round(U))}return T.push({handle:++E,callback:N,cancelled:!1}),E},y=function(N){for(var I=0;I<T.length;I++)T[I].handle===N&&(T[I].cancelled=!0)}}c.exports=function(N){return g.call(f,N)},c.exports.cancel=function(){y.apply(f,arguments)},c.exports.polyfill=function(N){N||(N=f),N.requestAnimationFrame=g,N.cancelAnimationFrame=y}}),"./node_modules/rgbcolor/index.js":(function(c){c.exports=function(u){this.ok=!1,this.alpha=1,u.charAt(0)=="#"&&(u=u.substr(1,6)),u=u.replace(/ /g,""),u=u.toLowerCase();var l={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};u=l[u]||u;for(var d=[{re:/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*((?:\d?\.)?\d)\)$/,example:["rgba(123, 234, 45, 0.8)","rgba(255,234,245,1.0)"],process:function(x){return[parseInt(x[1]),parseInt(x[2]),parseInt(x[3]),parseFloat(x[4])]}},{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(x){return[parseInt(x[1]),parseInt(x[2]),parseInt(x[3])]}},{re:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,example:["#00ff00","336699"],process:function(x){return[parseInt(x[1],16),parseInt(x[2],16),parseInt(x[3],16)]}},{re:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,example:["#fb0","f0f"],process:function(x){return[parseInt(x[1]+x[1],16),parseInt(x[2]+x[2],16),parseInt(x[3]+x[3],16)]}}],f=0;f<d.length;f++){var A=d[f].re,p=d[f].process,g=A.exec(u);if(g){var y=p(g);this.r=y[0],this.g=y[1],this.b=y[2],y.length>3&&(this.alpha=y[3]),this.ok=!0}}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.alpha=this.alpha<0?0:this.alpha>1||isNaN(this.alpha)?1:this.alpha,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toRGBA=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.alpha+")"},this.toHex=function(){var x=this.r.toString(16),w=this.g.toString(16),E=this.b.toString(16);return x.length==1&&(x="0"+x),w.length==1&&(w="0"+w),E.length==1&&(E="0"+E),"#"+x+w+E},this.getHelpXML=function(){for(var x=new Array,w=0;w<d.length;w++)for(var E=d[w].example,T=0;T<E.length;T++)x[x.length]=E[T];for(var C in l)x[x.length]=C;var N=document.createElement("ul");N.setAttribute("id","rgbcolor-examples");for(var w=0;w<x.length;w++)try{var I=document.createElement("li"),U=new RGBColor(x[w]),K=document.createElement("div");K.style.cssText="margin: 3px; border: 1px solid black; background:"+U.toHex()+"; color:"+U.toHex(),K.appendChild(document.createTextNode("test"));var Y=document.createTextNode(" "+x[w]+" -> "+U.toRGB()+" -> "+U.toHex());I.appendChild(K),I.appendChild(Y),N.appendChild(I)}catch{}return N}}}),"./node_modules/stackblur-canvas/dist/stackblur-es.js":(function(c,u,l){l.r(u),l.d(u,{BlurStack:function(){return C},canvasRGB:function(){return E},canvasRGBA:function(){return x},image:function(){return g},imageDataRGB:function(){return T},imageDataRGBA:function(){return w}});function d(N){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?d=function(I){return typeof I}:d=function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I},d(N)}function f(N,I){if(!(N instanceof I))throw new TypeError("Cannot call a class as a function")}var A=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],p=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function g(N,I,U,K,Y,re){if(typeof N=="string"&&(N=document.getElementById(N)),!(!N||Object.prototype.toString.call(N).slice(8,-1)==="HTMLImageElement"&&!("naturalWidth"in N))){var se=Y?"offset":"natural",Ae=N[se+"Width"],we=N[se+"Height"];if(Object.prototype.toString.call(N).slice(8,-1)==="ImageBitmap"&&(Ae=N.width,we=N.height),typeof I=="string"&&(I=document.getElementById(I)),!(!I||!("getContext"in I))){re||(I.style.width=Ae+"px",I.style.height=we+"px"),I.width=Ae,I.height=we;var Ce=I.getContext("2d");Ce.clearRect(0,0,Ae,we),Ce.drawImage(N,0,0,N.naturalWidth,N.naturalHeight,0,0,Ae,we),!(isNaN(U)||U<1)&&(K?x(I,0,0,Ae,we,U):E(I,0,0,Ae,we,U))}}}function y(N,I,U,K,Y){if(typeof N=="string"&&(N=document.getElementById(N)),!N||d(N)!=="object"||!("getContext"in N))throw new TypeError("Expecting canvas with `getContext` method in processCanvasRGB(A) calls!");var re=N.getContext("2d");try{return re.getImageData(I,U,K,Y)}catch(se){throw new Error("unable to access image data: "+se)}}function x(N,I,U,K,Y,re){if(!(isNaN(re)||re<1)){re|=0;var se=y(N,I,U,K,Y);se=w(se,I,U,K,Y,re),N.getContext("2d").putImageData(se,I,U)}}function w(N,I,U,K,Y,re){for(var se=N.data,Ae=2*re+1,we=K-1,Ce=Y-1,ve=re+1,ne=ve*(ve+1)/2,ce=new C,ae=ce,De,Oe=1;Oe<Ae;Oe++)ae=ae.next=new C,Oe===ve&&(De=ae);ae.next=ce;for(var be=null,de=null,xe=0,je=0,Me=A[re],Re=p[re],it=0;it<Y;it++){ae=ce;for(var ht=se[je],Be=se[je+1],nt=se[je+2],Ge=se[je+3],ft=0;ft<ve;ft++)ae.r=ht,ae.g=Be,ae.b=nt,ae.a=Ge,ae=ae.next;for(var Dt=0,rt=0,kt=0,_t=0,wt=ve*ht,Tt=ve*Be,Er=ve*nt,pr=ve*Ge,Xr=ne*ht,yn=ne*Be,Mn=ne*nt,dn=ne*Ge,pn=1;pn<ve;pn++){var mn=je+((we<pn?we:pn)<<2),Kn=se[mn],Zn=se[mn+1],Li=se[mn+2],ot=se[mn+3],Yt=ve-pn;Xr+=(ae.r=Kn)*Yt,yn+=(ae.g=Zn)*Yt,Mn+=(ae.b=Li)*Yt,dn+=(ae.a=ot)*Yt,Dt+=Kn,rt+=Zn,kt+=Li,_t+=ot,ae=ae.next}be=ce,de=De;for(var kr=0;kr<K;kr++){var nr=dn*Me>>>Re;if(se[je+3]=nr,nr!==0){var Qt=255/nr;se[je]=(Xr*Me>>>Re)*Qt,se[je+1]=(yn*Me>>>Re)*Qt,se[je+2]=(Mn*Me>>>Re)*Qt}else se[je]=se[je+1]=se[je+2]=0;Xr-=wt,yn-=Tt,Mn-=Er,dn-=pr,wt-=be.r,Tt-=be.g,Er-=be.b,pr-=be.a;var fr=kr+re+1;fr=xe+(fr<we?fr:we)<<2,Dt+=be.r=se[fr],rt+=be.g=se[fr+1],kt+=be.b=se[fr+2],_t+=be.a=se[fr+3],Xr+=Dt,yn+=rt,Mn+=kt,dn+=_t,be=be.next;var zr=de,Yr=zr.r,Ln=zr.g,ln=zr.b,Jn=zr.a;wt+=Yr,Tt+=Ln,Er+=ln,pr+=Jn,Dt-=Yr,rt-=Ln,kt-=ln,_t-=Jn,de=de.next,je+=4}xe+=K}for(var rn=0;rn<K;rn++){je=rn<<2;var Ur=se[je],An=se[je+1],cn=se[je+2],On=se[je+3],li=ve*Ur,Cs=ve*An,Ds=ve*cn,js=ve*On,ei=ne*Ur,sn=ne*An,ss=ne*cn,ta=ne*On;ae=ce;for(var _n=0;_n<ve;_n++)ae.r=Ur,ae.g=An,ae.b=cn,ae.a=On,ae=ae.next;for(var Cn=K,Ms=0,Qs=0,Fs=0,rs=0,qs=1;qs<=re;qs++){je=Cn+rn<<2;var Os=ve-qs;ei+=(ae.r=Ur=se[je])*Os,sn+=(ae.g=An=se[je+1])*Os,ss+=(ae.b=cn=se[je+2])*Os,ta+=(ae.a=On=se[je+3])*Os,rs+=Ur,Ms+=An,Qs+=cn,Fs+=On,ae=ae.next,qs<Ce&&(Cn+=K)}je=rn,be=ce,de=De;for(var Qa=0;Qa<Y;Qa++){var ds=je<<2;se[ds+3]=On=ta*Me>>>Re,On>0?(On=255/On,se[ds]=(ei*Me>>>Re)*On,se[ds+1]=(sn*Me>>>Re)*On,se[ds+2]=(ss*Me>>>Re)*On):se[ds]=se[ds+1]=se[ds+2]=0,ei-=li,sn-=Cs,ss-=Ds,ta-=js,li-=be.r,Cs-=be.g,Ds-=be.b,js-=be.a,ds=rn+((ds=Qa+ve)<Ce?ds:Ce)*K<<2,ei+=rs+=be.r=se[ds],sn+=Ms+=be.g=se[ds+1],ss+=Qs+=be.b=se[ds+2],ta+=Fs+=be.a=se[ds+3],be=be.next,li+=Ur=de.r,Cs+=An=de.g,Ds+=cn=de.b,js+=On=de.a,rs-=Ur,Ms-=An,Qs-=cn,Fs-=On,de=de.next,je+=K}}return N}function E(N,I,U,K,Y,re){if(!(isNaN(re)||re<1)){re|=0;var se=y(N,I,U,K,Y);se=T(se,I,U,K,Y,re),N.getContext("2d").putImageData(se,I,U)}}function T(N,I,U,K,Y,re){for(var se=N.data,Ae=2*re+1,we=K-1,Ce=Y-1,ve=re+1,ne=ve*(ve+1)/2,ce=new C,ae=ce,De,Oe=1;Oe<Ae;Oe++)ae=ae.next=new C,Oe===ve&&(De=ae);ae.next=ce;for(var be=null,de=null,xe=A[re],je=p[re],Me,Re,it=0,ht=0,Be=0;Be<Y;Be++){var nt=se[ht],Ge=se[ht+1],ft=se[ht+2],Dt=ve*nt,rt=ve*Ge,kt=ve*ft,_t=ne*nt,wt=ne*Ge,Tt=ne*ft;ae=ce;for(var Er=0;Er<ve;Er++)ae.r=nt,ae.g=Ge,ae.b=ft,ae=ae.next;for(var pr=0,Xr=0,yn=0,Mn=1;Mn<ve;Mn++)Me=ht+((we<Mn?we:Mn)<<2),_t+=(ae.r=nt=se[Me])*(Re=ve-Mn),wt+=(ae.g=Ge=se[Me+1])*Re,Tt+=(ae.b=ft=se[Me+2])*Re,pr+=nt,Xr+=Ge,yn+=ft,ae=ae.next;be=ce,de=De;for(var dn=0;dn<K;dn++)se[ht]=_t*xe>>>je,se[ht+1]=wt*xe>>>je,se[ht+2]=Tt*xe>>>je,_t-=Dt,wt-=rt,Tt-=kt,Dt-=be.r,rt-=be.g,kt-=be.b,Me=it+((Me=dn+re+1)<we?Me:we)<<2,pr+=be.r=se[Me],Xr+=be.g=se[Me+1],yn+=be.b=se[Me+2],_t+=pr,wt+=Xr,Tt+=yn,be=be.next,Dt+=nt=de.r,rt+=Ge=de.g,kt+=ft=de.b,pr-=nt,Xr-=Ge,yn-=ft,de=de.next,ht+=4;it+=K}for(var pn=0;pn<K;pn++){ht=pn<<2;var mn=se[ht],Kn=se[ht+1],Zn=se[ht+2],Li=ve*mn,ot=ve*Kn,Yt=ve*Zn,kr=ne*mn,nr=ne*Kn,Qt=ne*Zn;ae=ce;for(var fr=0;fr<ve;fr++)ae.r=mn,ae.g=Kn,ae.b=Zn,ae=ae.next;for(var zr=0,Yr=0,Ln=0,ln=1,Jn=K;ln<=re;ln++)ht=Jn+pn<<2,kr+=(ae.r=mn=se[ht])*(Re=ve-ln),nr+=(ae.g=Kn=se[ht+1])*Re,Qt+=(ae.b=Zn=se[ht+2])*Re,zr+=mn,Yr+=Kn,Ln+=Zn,ae=ae.next,ln<Ce&&(Jn+=K);ht=pn,be=ce,de=De;for(var rn=0;rn<Y;rn++)Me=ht<<2,se[Me]=kr*xe>>>je,se[Me+1]=nr*xe>>>je,se[Me+2]=Qt*xe>>>je,kr-=Li,nr-=ot,Qt-=Yt,Li-=be.r,ot-=be.g,Yt-=be.b,Me=pn+((Me=rn+ve)<Ce?Me:Ce)*K<<2,kr+=zr+=be.r=se[Me],nr+=Yr+=be.g=se[Me+1],Qt+=Ln+=be.b=se[Me+2],be=be.next,Li+=mn=de.r,ot+=Kn=de.g,Yt+=Zn=de.b,zr-=mn,Yr-=Kn,Ln-=Zn,de=de.next,ht+=K}return N}var C=function N(){f(this,N),this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}}),"./node_modules/svg-pathdata/lib/SVGPathData.module.js":(function(c,u,l){l.r(u),l.d(u,{COMMAND_ARG_COUNTS:function(){return Ce},SVGPathData:function(){return we},SVGPathDataParser:function(){return Ae},SVGPathDataTransformer:function(){return E},encodeSVGPath:function(){return A}});var d=function(ve,ne){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ce,ae){ce.__proto__=ae}||function(ce,ae){for(var De in ae)Object.prototype.hasOwnProperty.call(ae,De)&&(ce[De]=ae[De])})(ve,ne)};function f(ve,ne){if(typeof ne!="function"&&ne!==null)throw new TypeError("Class extends value "+String(ne)+" is not a constructor or null");function ce(){this.constructor=ve}d(ve,ne),ve.prototype=ne===null?Object.create(ne):(ce.prototype=ne.prototype,new ce)}function A(ve){var ne="";Array.isArray(ve)||(ve=[ve]);for(var ce=0;ce<ve.length;ce++){var ae=ve[ce];if(ae.type===we.CLOSE_PATH)ne+="z";else if(ae.type===we.HORIZ_LINE_TO)ne+=(ae.relative?"h":"H")+ae.x;else if(ae.type===we.VERT_LINE_TO)ne+=(ae.relative?"v":"V")+ae.y;else if(ae.type===we.MOVE_TO)ne+=(ae.relative?"m":"M")+ae.x+" "+ae.y;else if(ae.type===we.LINE_TO)ne+=(ae.relative?"l":"L")+ae.x+" "+ae.y;else if(ae.type===we.CURVE_TO)ne+=(ae.relative?"c":"C")+ae.x1+" "+ae.y1+" "+ae.x2+" "+ae.y2+" "+ae.x+" "+ae.y;else if(ae.type===we.SMOOTH_CURVE_TO)ne+=(ae.relative?"s":"S")+ae.x2+" "+ae.y2+" "+ae.x+" "+ae.y;else if(ae.type===we.QUAD_TO)ne+=(ae.relative?"q":"Q")+ae.x1+" "+ae.y1+" "+ae.x+" "+ae.y;else if(ae.type===we.SMOOTH_QUAD_TO)ne+=(ae.relative?"t":"T")+ae.x+" "+ae.y;else{if(ae.type!==we.ARC)throw new Error('Unexpected command type "'+ae.type+'" at index '+ce+".");ne+=(ae.relative?"a":"A")+ae.rX+" "+ae.rY+" "+ae.xRot+" "+ +ae.lArcFlag+" "+ +ae.sweepFlag+" "+ae.x+" "+ae.y}}return ne}function p(ve,ne){var ce=ve[0],ae=ve[1];return[ce*Math.cos(ne)-ae*Math.sin(ne),ce*Math.sin(ne)+ae*Math.cos(ne)]}function g(){for(var ve=[],ne=0;ne<arguments.length;ne++)ve[ne]=arguments[ne];for(var ce=0;ce<ve.length;ce++)if(typeof ve[ce]!="number")throw new Error("assertNumbers arguments["+ce+"] is not a number. "+typeof ve[ce]+" == typeof "+ve[ce]);return!0}var y=Math.PI;function x(ve,ne,ce){ve.lArcFlag=ve.lArcFlag===0?0:1,ve.sweepFlag=ve.sweepFlag===0?0:1;var ae=ve.rX,De=ve.rY,Oe=ve.x,be=ve.y;ae=Math.abs(ve.rX),De=Math.abs(ve.rY);var de=p([(ne-Oe)/2,(ce-be)/2],-ve.xRot/180*y),xe=de[0],je=de[1],Me=Math.pow(xe,2)/Math.pow(ae,2)+Math.pow(je,2)/Math.pow(De,2);1<Me&&(ae*=Math.sqrt(Me),De*=Math.sqrt(Me)),ve.rX=ae,ve.rY=De;var Re=Math.pow(ae,2)*Math.pow(je,2)+Math.pow(De,2)*Math.pow(xe,2),it=(ve.lArcFlag!==ve.sweepFlag?1:-1)*Math.sqrt(Math.max(0,(Math.pow(ae,2)*Math.pow(De,2)-Re)/Re)),ht=ae*je/De*it,Be=-De*xe/ae*it,nt=p([ht,Be],ve.xRot/180*y);ve.cX=nt[0]+(ne+Oe)/2,ve.cY=nt[1]+(ce+be)/2,ve.phi1=Math.atan2((je-Be)/De,(xe-ht)/ae),ve.phi2=Math.atan2((-je-Be)/De,(-xe-ht)/ae),ve.sweepFlag===0&&ve.phi2>ve.phi1&&(ve.phi2-=2*y),ve.sweepFlag===1&&ve.phi2<ve.phi1&&(ve.phi2+=2*y),ve.phi1*=180/y,ve.phi2*=180/y}function w(ve,ne,ce){g(ve,ne,ce);var ae=ve*ve+ne*ne-ce*ce;if(0>ae)return[];if(ae===0)return[[ve*ce/(ve*ve+ne*ne),ne*ce/(ve*ve+ne*ne)]];var De=Math.sqrt(ae);return[[(ve*ce+ne*De)/(ve*ve+ne*ne),(ne*ce-ve*De)/(ve*ve+ne*ne)],[(ve*ce-ne*De)/(ve*ve+ne*ne),(ne*ce+ve*De)/(ve*ve+ne*ne)]]}var E,T=Math.PI/180;function C(ve,ne,ce){return(1-ce)*ve+ce*ne}function N(ve,ne,ce,ae){return ve+Math.cos(ae/180*y)*ne+Math.sin(ae/180*y)*ce}function I(ve,ne,ce,ae){var De=1e-6,Oe=ne-ve,be=ce-ne,de=3*Oe+3*(ae-ce)-6*be,xe=6*(be-Oe),je=3*Oe;return Math.abs(de)<De?[-je/xe]:(function(Me,Re,it){var ht=Me*Me/4-Re;if(ht<-it)return[];if(ht<=it)return[-Me/2];var Be=Math.sqrt(ht);return[-Me/2-Be,-Me/2+Be]})(xe/de,je/de,De)}function U(ve,ne,ce,ae,De){var Oe=1-De;return ve*(Oe*Oe*Oe)+ne*(3*Oe*Oe*De)+ce*(3*Oe*De*De)+ae*(De*De*De)}(function(ve){function ne(){return De((function(de,xe,je){return de.relative&&(de.x1!==void 0&&(de.x1+=xe),de.y1!==void 0&&(de.y1+=je),de.x2!==void 0&&(de.x2+=xe),de.y2!==void 0&&(de.y2+=je),de.x!==void 0&&(de.x+=xe),de.y!==void 0&&(de.y+=je),de.relative=!1),de}))}function ce(){var de=NaN,xe=NaN,je=NaN,Me=NaN;return De((function(Re,it,ht){return Re.type&we.SMOOTH_CURVE_TO&&(Re.type=we.CURVE_TO,de=isNaN(de)?it:de,xe=isNaN(xe)?ht:xe,Re.x1=Re.relative?it-de:2*it-de,Re.y1=Re.relative?ht-xe:2*ht-xe),Re.type&we.CURVE_TO?(de=Re.relative?it+Re.x2:Re.x2,xe=Re.relative?ht+Re.y2:Re.y2):(de=NaN,xe=NaN),Re.type&we.SMOOTH_QUAD_TO&&(Re.type=we.QUAD_TO,je=isNaN(je)?it:je,Me=isNaN(Me)?ht:Me,Re.x1=Re.relative?it-je:2*it-je,Re.y1=Re.relative?ht-Me:2*ht-Me),Re.type&we.QUAD_TO?(je=Re.relative?it+Re.x1:Re.x1,Me=Re.relative?ht+Re.y1:Re.y1):(je=NaN,Me=NaN),Re}))}function ae(){var de=NaN,xe=NaN;return De((function(je,Me,Re){if(je.type&we.SMOOTH_QUAD_TO&&(je.type=we.QUAD_TO,de=isNaN(de)?Me:de,xe=isNaN(xe)?Re:xe,je.x1=je.relative?Me-de:2*Me-de,je.y1=je.relative?Re-xe:2*Re-xe),je.type&we.QUAD_TO){de=je.relative?Me+je.x1:je.x1,xe=je.relative?Re+je.y1:je.y1;var it=je.x1,ht=je.y1;je.type=we.CURVE_TO,je.x1=((je.relative?0:Me)+2*it)/3,je.y1=((je.relative?0:Re)+2*ht)/3,je.x2=(je.x+2*it)/3,je.y2=(je.y+2*ht)/3}else de=NaN,xe=NaN;return je}))}function De(de){var xe=0,je=0,Me=NaN,Re=NaN;return function(it){if(isNaN(Me)&&!(it.type&we.MOVE_TO))throw new Error("path must start with moveto");var ht=de(it,xe,je,Me,Re);return it.type&we.CLOSE_PATH&&(xe=Me,je=Re),it.x!==void 0&&(xe=it.relative?xe+it.x:it.x),it.y!==void 0&&(je=it.relative?je+it.y:it.y),it.type&we.MOVE_TO&&(Me=xe,Re=je),ht}}function Oe(de,xe,je,Me,Re,it){return g(de,xe,je,Me,Re,it),De((function(ht,Be,nt,Ge){var ft=ht.x1,Dt=ht.x2,rt=ht.relative&&!isNaN(Ge),kt=ht.x!==void 0?ht.x:rt?0:Be,_t=ht.y!==void 0?ht.y:rt?0:nt;function wt(nr){return nr*nr}ht.type&we.HORIZ_LINE_TO&&xe!==0&&(ht.type=we.LINE_TO,ht.y=ht.relative?0:nt),ht.type&we.VERT_LINE_TO&&je!==0&&(ht.type=we.LINE_TO,ht.x=ht.relative?0:Be),ht.x!==void 0&&(ht.x=ht.x*de+_t*je+(rt?0:Re)),ht.y!==void 0&&(ht.y=kt*xe+ht.y*Me+(rt?0:it)),ht.x1!==void 0&&(ht.x1=ht.x1*de+ht.y1*je+(rt?0:Re)),ht.y1!==void 0&&(ht.y1=ft*xe+ht.y1*Me+(rt?0:it)),ht.x2!==void 0&&(ht.x2=ht.x2*de+ht.y2*je+(rt?0:Re)),ht.y2!==void 0&&(ht.y2=Dt*xe+ht.y2*Me+(rt?0:it));var Tt=de*Me-xe*je;if(ht.xRot!==void 0&&(de!==1||xe!==0||je!==0||Me!==1))if(Tt===0)delete ht.rX,delete ht.rY,delete ht.xRot,delete ht.lArcFlag,delete ht.sweepFlag,ht.type=we.LINE_TO;else{var Er=ht.xRot*Math.PI/180,pr=Math.sin(Er),Xr=Math.cos(Er),yn=1/wt(ht.rX),Mn=1/wt(ht.rY),dn=wt(Xr)*yn+wt(pr)*Mn,pn=2*pr*Xr*(yn-Mn),mn=wt(pr)*yn+wt(Xr)*Mn,Kn=dn*Me*Me-pn*xe*Me+mn*xe*xe,Zn=pn*(de*Me+xe*je)-2*(dn*je*Me+mn*de*xe),Li=dn*je*je-pn*de*je+mn*de*de,ot=(Math.atan2(Zn,Kn-Li)+Math.PI)%Math.PI/2,Yt=Math.sin(ot),kr=Math.cos(ot);ht.rX=Math.abs(Tt)/Math.sqrt(Kn*wt(kr)+Zn*Yt*kr+Li*wt(Yt)),ht.rY=Math.abs(Tt)/Math.sqrt(Kn*wt(Yt)-Zn*Yt*kr+Li*wt(kr)),ht.xRot=180*ot/Math.PI}return ht.sweepFlag!==void 0&&0>Tt&&(ht.sweepFlag=+!ht.sweepFlag),ht}))}function be(){return function(de){var xe={};for(var je in de)xe[je]=de[je];return xe}}ve.ROUND=function(de){function xe(je){return Math.round(je*de)/de}return de===void 0&&(de=1e13),g(de),function(je){return je.x1!==void 0&&(je.x1=xe(je.x1)),je.y1!==void 0&&(je.y1=xe(je.y1)),je.x2!==void 0&&(je.x2=xe(je.x2)),je.y2!==void 0&&(je.y2=xe(je.y2)),je.x!==void 0&&(je.x=xe(je.x)),je.y!==void 0&&(je.y=xe(je.y)),je.rX!==void 0&&(je.rX=xe(je.rX)),je.rY!==void 0&&(je.rY=xe(je.rY)),je}},ve.TO_ABS=ne,ve.TO_REL=function(){return De((function(de,xe,je){return de.relative||(de.x1!==void 0&&(de.x1-=xe),de.y1!==void 0&&(de.y1-=je),de.x2!==void 0&&(de.x2-=xe),de.y2!==void 0&&(de.y2-=je),de.x!==void 0&&(de.x-=xe),de.y!==void 0&&(de.y-=je),de.relative=!0),de}))},ve.NORMALIZE_HVZ=function(de,xe,je){return de===void 0&&(de=!0),xe===void 0&&(xe=!0),je===void 0&&(je=!0),De((function(Me,Re,it,ht,Be){if(isNaN(ht)&&!(Me.type&we.MOVE_TO))throw new Error("path must start with moveto");return xe&&Me.type&we.HORIZ_LINE_TO&&(Me.type=we.LINE_TO,Me.y=Me.relative?0:it),je&&Me.type&we.VERT_LINE_TO&&(Me.type=we.LINE_TO,Me.x=Me.relative?0:Re),de&&Me.type&we.CLOSE_PATH&&(Me.type=we.LINE_TO,Me.x=Me.relative?ht-Re:ht,Me.y=Me.relative?Be-it:Be),Me.type&we.ARC&&(Me.rX===0||Me.rY===0)&&(Me.type=we.LINE_TO,delete Me.rX,delete Me.rY,delete Me.xRot,delete Me.lArcFlag,delete Me.sweepFlag),Me}))},ve.NORMALIZE_ST=ce,ve.QT_TO_C=ae,ve.INFO=De,ve.SANITIZE=function(de){de===void 0&&(de=0),g(de);var xe=NaN,je=NaN,Me=NaN,Re=NaN;return De((function(it,ht,Be,nt,Ge){var ft=Math.abs,Dt=!1,rt=0,kt=0;if(it.type&we.SMOOTH_CURVE_TO&&(rt=isNaN(xe)?0:ht-xe,kt=isNaN(je)?0:Be-je),it.type&(we.CURVE_TO|we.SMOOTH_CURVE_TO)?(xe=it.relative?ht+it.x2:it.x2,je=it.relative?Be+it.y2:it.y2):(xe=NaN,je=NaN),it.type&we.SMOOTH_QUAD_TO?(Me=isNaN(Me)?ht:2*ht-Me,Re=isNaN(Re)?Be:2*Be-Re):it.type&we.QUAD_TO?(Me=it.relative?ht+it.x1:it.x1,Re=it.relative?Be+it.y1:it.y2):(Me=NaN,Re=NaN),it.type&we.LINE_COMMANDS||it.type&we.ARC&&(it.rX===0||it.rY===0||!it.lArcFlag)||it.type&we.CURVE_TO||it.type&we.SMOOTH_CURVE_TO||it.type&we.QUAD_TO||it.type&we.SMOOTH_QUAD_TO){var _t=it.x===void 0?0:it.relative?it.x:it.x-ht,wt=it.y===void 0?0:it.relative?it.y:it.y-Be;rt=isNaN(Me)?it.x1===void 0?rt:it.relative?it.x:it.x1-ht:Me-ht,kt=isNaN(Re)?it.y1===void 0?kt:it.relative?it.y:it.y1-Be:Re-Be;var Tt=it.x2===void 0?0:it.relative?it.x:it.x2-ht,Er=it.y2===void 0?0:it.relative?it.y:it.y2-Be;ft(_t)<=de&&ft(wt)<=de&&ft(rt)<=de&&ft(kt)<=de&&ft(Tt)<=de&&ft(Er)<=de&&(Dt=!0)}return it.type&we.CLOSE_PATH&&ft(ht-nt)<=de&&ft(Be-Ge)<=de&&(Dt=!0),Dt?[]:it}))},ve.MATRIX=Oe,ve.ROTATE=function(de,xe,je){xe===void 0&&(xe=0),je===void 0&&(je=0),g(de,xe,je);var Me=Math.sin(de),Re=Math.cos(de);return Oe(Re,Me,-Me,Re,xe-xe*Re+je*Me,je-xe*Me-je*Re)},ve.TRANSLATE=function(de,xe){return xe===void 0&&(xe=0),g(de,xe),Oe(1,0,0,1,de,xe)},ve.SCALE=function(de,xe){return xe===void 0&&(xe=de),g(de,xe),Oe(de,0,0,xe,0,0)},ve.SKEW_X=function(de){return g(de),Oe(1,0,Math.atan(de),1,0,0)},ve.SKEW_Y=function(de){return g(de),Oe(1,Math.atan(de),0,1,0,0)},ve.X_AXIS_SYMMETRY=function(de){return de===void 0&&(de=0),g(de),Oe(-1,0,0,1,de,0)},ve.Y_AXIS_SYMMETRY=function(de){return de===void 0&&(de=0),g(de),Oe(1,0,0,-1,0,de)},ve.A_TO_C=function(){return De((function(de,xe,je){return we.ARC===de.type?(function(Me,Re,it){var ht,Be,nt,Ge;Me.cX||x(Me,Re,it);for(var ft=Math.min(Me.phi1,Me.phi2),Dt=Math.max(Me.phi1,Me.phi2)-ft,rt=Math.ceil(Dt/90),kt=new Array(rt),_t=Re,wt=it,Tt=0;Tt<rt;Tt++){var Er=C(Me.phi1,Me.phi2,Tt/rt),pr=C(Me.phi1,Me.phi2,(Tt+1)/rt),Xr=pr-Er,yn=4/3*Math.tan(Xr*T/4),Mn=[Math.cos(Er*T)-yn*Math.sin(Er*T),Math.sin(Er*T)+yn*Math.cos(Er*T)],dn=Mn[0],pn=Mn[1],mn=[Math.cos(pr*T),Math.sin(pr*T)],Kn=mn[0],Zn=mn[1],Li=[Kn+yn*Math.sin(pr*T),Zn-yn*Math.cos(pr*T)],ot=Li[0],Yt=Li[1];kt[Tt]={relative:Me.relative,type:we.CURVE_TO};var kr=function(nr,Qt){var fr=p([nr*Me.rX,Qt*Me.rY],Me.xRot),zr=fr[0],Yr=fr[1];return[Me.cX+zr,Me.cY+Yr]};ht=kr(dn,pn),kt[Tt].x1=ht[0],kt[Tt].y1=ht[1],Be=kr(ot,Yt),kt[Tt].x2=Be[0],kt[Tt].y2=Be[1],nt=kr(Kn,Zn),kt[Tt].x=nt[0],kt[Tt].y=nt[1],Me.relative&&(kt[Tt].x1-=_t,kt[Tt].y1-=wt,kt[Tt].x2-=_t,kt[Tt].y2-=wt,kt[Tt].x-=_t,kt[Tt].y-=wt),_t=(Ge=[kt[Tt].x,kt[Tt].y])[0],wt=Ge[1]}return kt})(de,de.relative?0:xe,de.relative?0:je):de}))},ve.ANNOTATE_ARCS=function(){return De((function(de,xe,je){return de.relative&&(xe=0,je=0),we.ARC===de.type&&x(de,xe,je),de}))},ve.CLONE=be,ve.CALCULATE_BOUNDS=function(){var de=function(it){var ht={};for(var Be in it)ht[Be]=it[Be];return ht},xe=ne(),je=ae(),Me=ce(),Re=De((function(it,ht,Be){var nt=Me(je(xe(de(it))));function Ge(Yt){Yt>Re.maxX&&(Re.maxX=Yt),Yt<Re.minX&&(Re.minX=Yt)}function ft(Yt){Yt>Re.maxY&&(Re.maxY=Yt),Yt<Re.minY&&(Re.minY=Yt)}if(nt.type&we.DRAWING_COMMANDS&&(Ge(ht),ft(Be)),nt.type&we.HORIZ_LINE_TO&&Ge(nt.x),nt.type&we.VERT_LINE_TO&&ft(nt.y),nt.type&we.LINE_TO&&(Ge(nt.x),ft(nt.y)),nt.type&we.CURVE_TO){Ge(nt.x),ft(nt.y);for(var Dt=0,rt=I(ht,nt.x1,nt.x2,nt.x);Dt<rt.length;Dt++)0<(ot=rt[Dt])&&1>ot&&Ge(U(ht,nt.x1,nt.x2,nt.x,ot));for(var kt=0,_t=I(Be,nt.y1,nt.y2,nt.y);kt<_t.length;kt++)0<(ot=_t[kt])&&1>ot&&ft(U(Be,nt.y1,nt.y2,nt.y,ot))}if(nt.type&we.ARC){Ge(nt.x),ft(nt.y),x(nt,ht,Be);for(var wt=nt.xRot/180*Math.PI,Tt=Math.cos(wt)*nt.rX,Er=Math.sin(wt)*nt.rX,pr=-Math.sin(wt)*nt.rY,Xr=Math.cos(wt)*nt.rY,yn=nt.phi1<nt.phi2?[nt.phi1,nt.phi2]:-180>nt.phi2?[nt.phi2+360,nt.phi1+360]:[nt.phi2,nt.phi1],Mn=yn[0],dn=yn[1],pn=function(Yt){var kr=Yt[0],nr=Yt[1],Qt=180*Math.atan2(nr,kr)/Math.PI;return Qt<Mn?Qt+360:Qt},mn=0,Kn=w(pr,-Tt,0).map(pn);mn<Kn.length;mn++)(ot=Kn[mn])>Mn&&ot<dn&&Ge(N(nt.cX,Tt,pr,ot));for(var Zn=0,Li=w(Xr,-Er,0).map(pn);Zn<Li.length;Zn++){var ot;(ot=Li[Zn])>Mn&&ot<dn&&ft(N(nt.cY,Er,Xr,ot))}}return it}));return Re.minX=1/0,Re.maxX=-1/0,Re.minY=1/0,Re.maxY=-1/0,Re}})(E||(E={}));var K,Y=(function(){function ve(){}return ve.prototype.round=function(ne){return this.transform(E.ROUND(ne))},ve.prototype.toAbs=function(){return this.transform(E.TO_ABS())},ve.prototype.toRel=function(){return this.transform(E.TO_REL())},ve.prototype.normalizeHVZ=function(ne,ce,ae){return this.transform(E.NORMALIZE_HVZ(ne,ce,ae))},ve.prototype.normalizeST=function(){return this.transform(E.NORMALIZE_ST())},ve.prototype.qtToC=function(){return this.transform(E.QT_TO_C())},ve.prototype.aToC=function(){return this.transform(E.A_TO_C())},ve.prototype.sanitize=function(ne){return this.transform(E.SANITIZE(ne))},ve.prototype.translate=function(ne,ce){return this.transform(E.TRANSLATE(ne,ce))},ve.prototype.scale=function(ne,ce){return this.transform(E.SCALE(ne,ce))},ve.prototype.rotate=function(ne,ce,ae){return this.transform(E.ROTATE(ne,ce,ae))},ve.prototype.matrix=function(ne,ce,ae,De,Oe,be){return this.transform(E.MATRIX(ne,ce,ae,De,Oe,be))},ve.prototype.skewX=function(ne){return this.transform(E.SKEW_X(ne))},ve.prototype.skewY=function(ne){return this.transform(E.SKEW_Y(ne))},ve.prototype.xSymmetry=function(ne){return this.transform(E.X_AXIS_SYMMETRY(ne))},ve.prototype.ySymmetry=function(ne){return this.transform(E.Y_AXIS_SYMMETRY(ne))},ve.prototype.annotateArcs=function(){return this.transform(E.ANNOTATE_ARCS())},ve})(),re=function(ve){return ve===" "||ve==="	"||ve==="\r"||ve===`
`},se=function(ve){return 48<=ve.charCodeAt(0)&&ve.charCodeAt(0)<=57},Ae=(function(ve){function ne(){var ce=ve.call(this)||this;return ce.curNumber="",ce.curCommandType=-1,ce.curCommandRelative=!1,ce.canParseCommandOrComma=!0,ce.curNumberHasExp=!1,ce.curNumberHasExpDigits=!1,ce.curNumberHasDecimal=!1,ce.curArgs=[],ce}return f(ne,ve),ne.prototype.finish=function(ce){if(ce===void 0&&(ce=[]),this.parse(" ",ce),this.curArgs.length!==0||!this.canParseCommandOrComma)throw new SyntaxError("Unterminated command at the path end.");return ce},ne.prototype.parse=function(ce,ae){var De=this;ae===void 0&&(ae=[]);for(var Oe=function(Re){ae.push(Re),De.curArgs.length=0,De.canParseCommandOrComma=!0},be=0;be<ce.length;be++){var de=ce[be],xe=!(this.curCommandType!==we.ARC||this.curArgs.length!==3&&this.curArgs.length!==4||this.curNumber.length!==1||this.curNumber!=="0"&&this.curNumber!=="1"),je=se(de)&&(this.curNumber==="0"&&de==="0"||xe);if(!se(de)||je)if(de!=="e"&&de!=="E")if(de!=="-"&&de!=="+"||!this.curNumberHasExp||this.curNumberHasExpDigits)if(de!=="."||this.curNumberHasExp||this.curNumberHasDecimal||xe){if(this.curNumber&&this.curCommandType!==-1){var Me=Number(this.curNumber);if(isNaN(Me))throw new SyntaxError("Invalid number ending at "+be);if(this.curCommandType===we.ARC){if(this.curArgs.length===0||this.curArgs.length===1){if(0>Me)throw new SyntaxError('Expected positive number, got "'+Me+'" at index "'+be+'"')}else if((this.curArgs.length===3||this.curArgs.length===4)&&this.curNumber!=="0"&&this.curNumber!=="1")throw new SyntaxError('Expected a flag, got "'+this.curNumber+'" at index "'+be+'"')}this.curArgs.push(Me),this.curArgs.length===Ce[this.curCommandType]&&(we.HORIZ_LINE_TO===this.curCommandType?Oe({type:we.HORIZ_LINE_TO,relative:this.curCommandRelative,x:Me}):we.VERT_LINE_TO===this.curCommandType?Oe({type:we.VERT_LINE_TO,relative:this.curCommandRelative,y:Me}):this.curCommandType===we.MOVE_TO||this.curCommandType===we.LINE_TO||this.curCommandType===we.SMOOTH_QUAD_TO?(Oe({type:this.curCommandType,relative:this.curCommandRelative,x:this.curArgs[0],y:this.curArgs[1]}),we.MOVE_TO===this.curCommandType&&(this.curCommandType=we.LINE_TO)):this.curCommandType===we.CURVE_TO?Oe({type:we.CURVE_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x2:this.curArgs[2],y2:this.curArgs[3],x:this.curArgs[4],y:this.curArgs[5]}):this.curCommandType===we.SMOOTH_CURVE_TO?Oe({type:we.SMOOTH_CURVE_TO,relative:this.curCommandRelative,x2:this.curArgs[0],y2:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===we.QUAD_TO?Oe({type:we.QUAD_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===we.ARC&&Oe({type:we.ARC,relative:this.curCommandRelative,rX:this.curArgs[0],rY:this.curArgs[1],xRot:this.curArgs[2],lArcFlag:this.curArgs[3],sweepFlag:this.curArgs[4],x:this.curArgs[5],y:this.curArgs[6]})),this.curNumber="",this.curNumberHasExpDigits=!1,this.curNumberHasExp=!1,this.curNumberHasDecimal=!1,this.canParseCommandOrComma=!0}if(!re(de))if(de===","&&this.canParseCommandOrComma)this.canParseCommandOrComma=!1;else if(de!=="+"&&de!=="-"&&de!==".")if(je)this.curNumber=de,this.curNumberHasDecimal=!1;else{if(this.curArgs.length!==0)throw new SyntaxError("Unterminated command at index "+be+".");if(!this.canParseCommandOrComma)throw new SyntaxError('Unexpected character "'+de+'" at index '+be+". Command cannot follow comma");if(this.canParseCommandOrComma=!1,de!=="z"&&de!=="Z")if(de==="h"||de==="H")this.curCommandType=we.HORIZ_LINE_TO,this.curCommandRelative=de==="h";else if(de==="v"||de==="V")this.curCommandType=we.VERT_LINE_TO,this.curCommandRelative=de==="v";else if(de==="m"||de==="M")this.curCommandType=we.MOVE_TO,this.curCommandRelative=de==="m";else if(de==="l"||de==="L")this.curCommandType=we.LINE_TO,this.curCommandRelative=de==="l";else if(de==="c"||de==="C")this.curCommandType=we.CURVE_TO,this.curCommandRelative=de==="c";else if(de==="s"||de==="S")this.curCommandType=we.SMOOTH_CURVE_TO,this.curCommandRelative=de==="s";else if(de==="q"||de==="Q")this.curCommandType=we.QUAD_TO,this.curCommandRelative=de==="q";else if(de==="t"||de==="T")this.curCommandType=we.SMOOTH_QUAD_TO,this.curCommandRelative=de==="t";else{if(de!=="a"&&de!=="A")throw new SyntaxError('Unexpected character "'+de+'" at index '+be+".");this.curCommandType=we.ARC,this.curCommandRelative=de==="a"}else ae.push({type:we.CLOSE_PATH}),this.canParseCommandOrComma=!0,this.curCommandType=-1}else this.curNumber=de,this.curNumberHasDecimal=de==="."}else this.curNumber+=de,this.curNumberHasDecimal=!0;else this.curNumber+=de;else this.curNumber+=de,this.curNumberHasExp=!0;else this.curNumber+=de,this.curNumberHasExpDigits=this.curNumberHasExp}return ae},ne.prototype.transform=function(ce){return Object.create(this,{parse:{value:function(ae,De){De===void 0&&(De=[]);for(var Oe=0,be=Object.getPrototypeOf(this).parse.call(this,ae);Oe<be.length;Oe++){var de=be[Oe],xe=ce(de);Array.isArray(xe)?De.push.apply(De,xe):De.push(xe)}return De}}})},ne})(Y),we=(function(ve){function ne(ce){var ae=ve.call(this)||this;return ae.commands=typeof ce=="string"?ne.parse(ce):ce,ae}return f(ne,ve),ne.prototype.encode=function(){return ne.encode(this.commands)},ne.prototype.getBounds=function(){var ce=E.CALCULATE_BOUNDS();return this.transform(ce),ce},ne.prototype.transform=function(ce){for(var ae=[],De=0,Oe=this.commands;De<Oe.length;De++){var be=ce(Oe[De]);Array.isArray(be)?ae.push.apply(ae,be):ae.push(be)}return this.commands=ae,this},ne.encode=function(ce){return A(ce)},ne.parse=function(ce){var ae=new Ae,De=[];return ae.parse(ce,De),ae.finish(De),De},ne.CLOSE_PATH=1,ne.MOVE_TO=2,ne.HORIZ_LINE_TO=4,ne.VERT_LINE_TO=8,ne.LINE_TO=16,ne.CURVE_TO=32,ne.SMOOTH_CURVE_TO=64,ne.QUAD_TO=128,ne.SMOOTH_QUAD_TO=256,ne.ARC=512,ne.LINE_COMMANDS=ne.LINE_TO|ne.HORIZ_LINE_TO|ne.VERT_LINE_TO,ne.DRAWING_COMMANDS=ne.HORIZ_LINE_TO|ne.VERT_LINE_TO|ne.LINE_TO|ne.CURVE_TO|ne.SMOOTH_CURVE_TO|ne.QUAD_TO|ne.SMOOTH_QUAD_TO|ne.ARC,ne})(Y),Ce=((K={})[we.MOVE_TO]=2,K[we.LINE_TO]=2,K[we.HORIZ_LINE_TO]=1,K[we.VERT_LINE_TO]=1,K[we.CLOSE_PATH]=0,K[we.QUAD_TO]=4,K[we.SMOOTH_QUAD_TO]=2,K[we.CURVE_TO]=6,K[we.SMOOTH_CURVE_TO]=4,K[we.ARC]=7,K)}),"./src/plugin/hyperlinks.js":(function(c,u,l){l.r(u),l("./node_modules/core-js/modules/es.object.to-string.js"),l("./node_modules/core-js/modules/es.string.link.js"),l("./node_modules/core-js/modules/esnext.iterator.constructor.js"),l("./node_modules/core-js/modules/esnext.iterator.for-each.js"),l("./node_modules/core-js/modules/web.dom-collections.for-each.js");var d=l("./src/worker.js"),f=l("./src/utils.js"),A=[],p={toContainer:d.default.prototype.toContainer,toPdf:d.default.prototype.toPdf};d.default.prototype.toContainer=function(){return p.toContainer.call(this).then(function(){if(this.opt.enableLinks){var x=this.prop.container,w=x.querySelectorAll("a"),E=(0,f.unitConvert)(x.getBoundingClientRect(),this.prop.pageSize.k);A=[],Array.prototype.forEach.call(w,function(T){for(var C=T.getClientRects(),N=0;N<C.length;N++){var I=(0,f.unitConvert)(C[N],this.prop.pageSize.k);I.left-=E.left,I.top-=E.top;var U=Math.floor(I.top/this.prop.pageSize.inner.height)+1,K=this.opt.margin[0]+I.top%this.prop.pageSize.inner.height,Y=this.opt.margin[1]+I.left;A.push({page:U,top:K,left:Y,clientRect:I,link:T})}},this)}})},d.default.prototype.toPdf=function(){return p.toPdf.call(this).then(function(){if(this.opt.enableLinks){A.forEach(function(w){this.prop.pdf.setPage(w.page),this.prop.pdf.link(w.left,w.top,w.clientRect.width,w.clientRect.height,{url:w.link.href})},this);var x=this.prop.pdf.internal.getNumberOfPages();this.prop.pdf.setPage(x)}})}}),"./src/plugin/jspdf-plugin.js":(function(c,u,l){l.r(u),l("./node_modules/core-js/modules/es.symbol.js"),l("./node_modules/core-js/modules/es.symbol.description.js"),l("./node_modules/core-js/modules/es.symbol.iterator.js"),l("./node_modules/core-js/modules/es.array.iterator.js"),l("./node_modules/core-js/modules/es.object.to-string.js"),l("./node_modules/core-js/modules/es.string.iterator.js"),l("./node_modules/core-js/modules/web.dom-collections.iterator.js");var d=l("./node_modules/jspdf/dist/jspdf.es.min.js");function f(A){"@babel/helpers - typeof";return f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p},f(A)}d.jsPDF.getPageSize=function(A,p,g){if(f(A)==="object"){var y=A;A=y.orientation,p=y.unit||p,g=y.format||g}p=p||"mm",g=g||"a4",A=(""+(A||"P")).toLowerCase();var x=(""+g).toLowerCase(),w={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(p){case"pt":var E=1;break;case"mm":var E=72/25.4;break;case"cm":var E=72/2.54;break;case"in":var E=72;break;case"px":var E=72/96;break;case"pc":var E=12;break;case"em":var E=12;break;case"ex":var E=6;break;default:throw"Invalid unit: "+p}if(w.hasOwnProperty(x))var T=w[x][1]/E,C=w[x][0]/E;else try{var T=g[1],C=g[0]}catch{throw new Error("Invalid format: "+g)}if(A==="p"||A==="portrait"){if(A="p",C>T){var N=C;C=T,T=N}}else if(A==="l"||A==="landscape"){if(A="l",T>C){var N=C;C=T,T=N}}else throw"Invalid orientation: "+A;var I={width:C,height:T,unit:p,k:E};return I},u.default=d.jsPDF}),"./src/plugin/pagebreaks.js":(function(c,u,l){l.r(u),l("./node_modules/core-js/modules/es.array.concat.js"),l("./node_modules/core-js/modules/es.array.join.js"),l("./node_modules/core-js/modules/es.array.slice.js"),l("./node_modules/core-js/modules/es.object.keys.js"),l("./node_modules/core-js/modules/es.object.to-string.js"),l("./node_modules/core-js/modules/esnext.iterator.constructor.js"),l("./node_modules/core-js/modules/esnext.iterator.for-each.js"),l("./node_modules/core-js/modules/web.dom-collections.for-each.js");var d=l("./src/worker.js"),f=l("./src/utils.js"),A={toContainer:d.default.prototype.toContainer};d.default.template.opt.pagebreak={mode:["css","legacy"],before:[],after:[],avoid:[]},d.default.prototype.toContainer=function(){return A.toContainer.call(this).then(function(){var y=this.prop.container,x=this.prop.pageSize.inner.px.height,w=[].concat(this.opt.pagebreak.mode),E={avoidAll:w.indexOf("avoid-all")!==-1,css:w.indexOf("css")!==-1,legacy:w.indexOf("legacy")!==-1},T={},C=this;["before","after","avoid"].forEach(function(U){var K=E.avoidAll&&U==="avoid";T[U]=K?[]:[].concat(C.opt.pagebreak[U]||[]),T[U].length>0&&(T[U]=Array.prototype.slice.call(y.querySelectorAll(T[U].join(", "))))});var N=y.querySelectorAll(".html2pdf__page-break");N=Array.prototype.slice.call(N);var I=y.querySelectorAll("*");Array.prototype.forEach.call(I,function(K){var Y={before:!1,after:E.legacy&&N.indexOf(K)!==-1,avoid:E.avoidAll};if(E.css){var re=window.getComputedStyle(K),se=["always","page","left","right"],Ae=["avoid","avoid-page"];Y={before:Y.before||se.indexOf(re.breakBefore||re.pageBreakBefore)!==-1,after:Y.after||se.indexOf(re.breakAfter||re.pageBreakAfter)!==-1,avoid:Y.avoid||Ae.indexOf(re.breakInside||re.pageBreakInside)!==-1}}Object.keys(Y).forEach(function(ae){Y[ae]=Y[ae]||T[ae].indexOf(K)!==-1});var we=K.getBoundingClientRect();if(Y.avoid&&!Y.before){var Ce=Math.floor(we.top/x),ve=Math.floor(we.bottom/x),ne=Math.abs(we.bottom-we.top)/x;ve!==Ce&&ne<=1&&(Y.before=!0)}if(Y.before){var ce=(0,f.createElement)("div",{style:{display:"block",height:x-we.top%x+"px"}});K.parentNode.insertBefore(ce,K)}if(Y.after){var ce=(0,f.createElement)("div",{style:{display:"block",height:x-we.bottom%x+"px"}});K.parentNode.insertBefore(ce,K.nextSibling)}})})}}),"./src/snapdom/clone.js":(function(c,u,l){l.r(u),l.d(u,{deepCloneBasic:function(){return g}}),l("./node_modules/core-js/modules/es.symbol.js"),l("./node_modules/core-js/modules/es.symbol.description.js"),l("./node_modules/core-js/modules/es.symbol.iterator.js"),l("./node_modules/core-js/modules/es.array.concat.js"),l("./node_modules/core-js/modules/es.array.from.js"),l("./node_modules/core-js/modules/es.array.iterator.js"),l("./node_modules/core-js/modules/es.array.slice.js"),l("./node_modules/core-js/modules/es.function.name.js"),l("./node_modules/core-js/modules/es.object.to-string.js"),l("./node_modules/core-js/modules/es.regexp.exec.js"),l("./node_modules/core-js/modules/es.regexp.test.js"),l("./node_modules/core-js/modules/es.regexp.to-string.js"),l("./node_modules/core-js/modules/es.set.js"),l("./node_modules/core-js/modules/es.string.iterator.js"),l("./node_modules/core-js/modules/esnext.set.add-all.js"),l("./node_modules/core-js/modules/esnext.set.delete-all.js"),l("./node_modules/core-js/modules/esnext.set.difference.js"),l("./node_modules/core-js/modules/esnext.set.every.js"),l("./node_modules/core-js/modules/esnext.set.filter.js"),l("./node_modules/core-js/modules/esnext.set.find.js"),l("./node_modules/core-js/modules/esnext.set.intersection.js"),l("./node_modules/core-js/modules/esnext.set.is-disjoint-from.js"),l("./node_modules/core-js/modules/esnext.set.is-subset-of.js"),l("./node_modules/core-js/modules/esnext.set.is-superset-of.js"),l("./node_modules/core-js/modules/esnext.set.join.js"),l("./node_modules/core-js/modules/esnext.set.map.js"),l("./node_modules/core-js/modules/esnext.set.reduce.js"),l("./node_modules/core-js/modules/esnext.set.some.js"),l("./node_modules/core-js/modules/esnext.set.symmetric-difference.js"),l("./node_modules/core-js/modules/esnext.set.union.js"),l("./node_modules/core-js/modules/web.dom-collections.iterator.js");function d(y,x){var w=typeof Symbol<"u"&&y[Symbol.iterator]||y["@@iterator"];if(!w){if(Array.isArray(y)||(w=f(y))||x){w&&(y=w);var E=0,T=function(){};return{s:T,n:function(){return E>=y.length?{done:!0}:{done:!1,value:y[E++]}},e:function(K){throw K},f:T}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var C,N=!0,I=!1;return{s:function(){w=w.call(y)},n:function(){var K=w.next();return N=K.done,K},e:function(K){I=!0,C=K},f:function(){try{N||w.return==null||w.return()}finally{if(I)throw C}}}}function f(y,x){if(y){if(typeof y=="string")return A(y,x);var w={}.toString.call(y).slice(8,-1);return w==="Object"&&y.constructor&&(w=y.constructor.name),w==="Map"||w==="Set"?Array.from(y):w==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(w)?A(y,x):void 0}}function A(y,x){(x==null||x>y.length)&&(x=y.length);for(var w=0,E=Array(x);w<x;w++)E[w]=y[w];return E}function p(y,x){try{var w=y.currentSrc||y.src||"";if(!w)return;x.setAttribute("src",w),x.removeAttribute("srcset"),x.removeAttribute("sizes"),x.loading="eager",x.decoding="sync"}catch{}}function g(y){if(!y)throw new Error("Invalid node");var x=new Set,w=null;if(y.nodeType===Node.TEXT_NODE||y.nodeType!==Node.ELEMENT_NODE)return y.cloneNode(!0);if(y.tagName==="IFRAME"){var E=document.createElement("div");return E.style.cssText="width:".concat(y.offsetWidth,"px;height:").concat(y.offsetHeight,"px;background-image:repeating-linear-gradient(45deg,#ddd,#ddd 5px,#f9f9f9 5px,#f9f9f9 10px);display:flex;align-items:center;justify-content:center;font-size:12px;color:#555;border:1px solid #aaa;"),E}if(y.tagName==="CANVAS"){var T=y.toDataURL(),C=document.createElement("img");return C.src=T,C.width=y.width,C.height=y.height,C}var N;try{N=y.cloneNode(!1),y.tagName==="IMG"&&p(y,N)}catch(ft){throw console.error("[Snapdom] Failed to clone node:",y,ft),ft}if(y instanceof HTMLTextAreaElement){N.textContent=y.value,N.value=y.value;var I=y.getBoundingClientRect();return N.style.boxSizing="border-box",N.style.width="".concat(I.width,"px"),N.style.height="".concat(I.height,"px"),N}if(y instanceof HTMLInputElement&&(y.hasAttribute("value")&&(N.value=y.value,N.setAttribute("value",y.value)),y.checked!==void 0&&(N.checked=y.checked,y.checked&&N.setAttribute("checked",""),y.indeterminate&&(N.indeterminate=y.indeterminate))),y instanceof HTMLSelectElement&&(w=y.value),y.shadowRoot){var U=Array.from(y.shadowRoot.querySelectorAll("slot")).length>0;if(!U){var K=document.createDocumentFragment(),Y=d(y.shadowRoot.childNodes),re;try{for(Y.s();!(re=Y.n()).done;){var se=re.value;if(!(se.nodeType===Node.ELEMENT_NODE&&se.tagName==="STYLE")){var Ae=g(se);Ae&&K.appendChild(Ae)}}}catch(ft){Y.e(ft)}finally{Y.f()}N.appendChild(K)}}if(y.tagName==="SLOT"){var we,Ce=((we=y.assignedNodes)===null||we===void 0?void 0:we.call(y,{flatten:!0}))||[],ve=Ce.length>0?Ce:Array.from(y.childNodes),ne=document.createDocumentFragment(),ce=d(ve),ae;try{for(ce.s();!(ae=ce.n()).done;){var De=ae.value,Oe=g(De);Oe&&ne.appendChild(Oe)}}catch(ft){ce.e(ft)}finally{ce.f()}return ne}var be=d(y.childNodes),de;try{for(be.s();!(de=be.n()).done;){var xe=de.value;if(!x.has(xe)){var je=g(xe);je&&N.appendChild(je)}}}catch(ft){be.e(ft)}finally{be.f()}if(w!==null&&N instanceof HTMLSelectElement){N.value=w;var Me=d(N.options),Re;try{for(Me.s();!(Re=Me.n()).done;){var it=Re.value;it.value===w?it.setAttribute("selected",""):it.removeAttribute("selected")}}catch(ft){Me.e(ft)}finally{Me.f()}}var ht=y.scrollLeft,Be=y.scrollTop,nt=ht||Be;if(nt&&N instanceof HTMLElement){N.style.overflow="hidden",N.style.scrollbarWidth="none",N.style.msOverflowStyle="none";var Ge=document.createElement("div");for(Ge.style.transform="translate(".concat(-ht,"px, ").concat(-Be,"px)"),Ge.style.willChange="transform",Ge.style.display="inline-block",Ge.style.width="100%";N.firstChild;)Ge.appendChild(N.firstChild);N.appendChild(Ge)}return N}}),"./src/utils.js":(function(c,u,l){l.r(u),l.d(u,{createElement:function(){return p},objType:function(){return A},toPx:function(){return y},unitConvert:function(){return g}}),l("./node_modules/core-js/modules/es.symbol.js"),l("./node_modules/core-js/modules/es.symbol.description.js"),l("./node_modules/core-js/modules/es.symbol.iterator.js"),l("./node_modules/core-js/modules/es.array.iterator.js"),l("./node_modules/core-js/modules/es.number.constructor.js"),l("./node_modules/core-js/modules/es.object.to-string.js"),l("./node_modules/core-js/modules/es.string.iterator.js"),l("./node_modules/core-js/modules/web.dom-collections.iterator.js");var d=l("./node_modules/dompurify/dist/purify.es.mjs");function f(x){"@babel/helpers - typeof";return f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},f(x)}var A=function(w){var E=f(w);return E==="undefined"?"undefined":E==="string"||w instanceof String?"string":E==="number"||w instanceof Number?"number":E==="function"||w instanceof Function?"function":w&&w.constructor===Array?"array":w&&w.nodeType===1?"element":E==="object"?"object":"unknown"},p=function(w,E){var T=document.createElement(w);E.className&&(T.className=E.className),E.innerHTML&&(T.innerHTML=d.default.sanitize(E.innerHTML));for(var C in E.style)T.style[C]=E.style[C];return T},g=function(w,E){if(A(w)==="number")return w*72/96/E;var T={};for(var C in w)T[C]=w[C]*72/96/E;return T},y=function(w,E){return Math.floor(w*E/72*96)}}),"./src/worker.js":(function(c,u,l){l.r(u),l("./node_modules/core-js/modules/es.array.concat.js"),l("./node_modules/core-js/modules/es.array.map.js"),l("./node_modules/core-js/modules/es.function.name.js"),l("./node_modules/core-js/modules/es.json.stringify.js"),l("./node_modules/core-js/modules/es.object.assign.js"),l("./node_modules/core-js/modules/es.object.keys.js"),l("./node_modules/core-js/modules/es.object.to-string.js"),l("./node_modules/core-js/modules/es.promise.js"),l("./node_modules/core-js/modules/es.regexp.to-string.js"),l("./node_modules/core-js/modules/esnext.iterator.constructor.js"),l("./node_modules/core-js/modules/esnext.iterator.for-each.js"),l("./node_modules/core-js/modules/esnext.iterator.map.js"),l("./node_modules/core-js/modules/web.dom-collections.for-each.js"),l("./node_modules/core-js/modules/web.timers.js");var d=l("./node_modules/jspdf/dist/jspdf.es.min.js"),f=l("html2canvas"),A=l.n(f),p=l("./src/snapdom/clone.js"),g=l("./src/utils.js"),y=function x(w){var E=Object.assign(x.convert(Promise.resolve()),JSON.parse(JSON.stringify(x.template))),T=x.convert(Promise.resolve(),E);return T=T.setProgress(1,x,1,[x]),T=T.set(w),T};y.prototype=Object.create(Promise.prototype),y.prototype.constructor=y,y.convert=function(w,E){return w.__proto__=E||y.prototype,w},y.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],image:{type:"jpeg",quality:.95},enableLinks:!0,html2canvas:{},jsPDF:{}}},y.prototype.from=function(w,E){function T(C){switch((0,g.objType)(C)){case"string":return"string";case"element":return C.nodeName.toLowerCase&&C.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}return this.then(function(){switch(E=E||T(w),E){case"string":return this.set({src:(0,g.createElement)("div",{innerHTML:w})});case"element":return this.set({src:w});case"canvas":return this.set({canvas:w});case"img":return this.set({img:w});default:return this.error("Unknown source type.")}})},y.prototype.to=function(w){switch(w){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},y.prototype.toContainer=function(){var w=[function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}];return this.thenList(w).then(function(){var T={position:"fixed",overflow:"hidden",zIndex:1e3,left:0,right:0,bottom:0,top:0,backgroundColor:"rgba(0,0,0,0.8)"},C={position:"absolute",width:this.prop.pageSize.inner.width+this.prop.pageSize.unit,left:0,right:0,top:0,height:"auto",margin:"auto",backgroundColor:"white"};T.opacity=0;var N=(0,p.deepCloneBasic)(this.prop.src);return this.prop.overlay=(0,g.createElement)("div",{className:"html2pdf__overlay",style:T}),this.prop.container=(0,g.createElement)("div",{className:"html2pdf__container",style:C}),this.prop.container.appendChild(N),this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),new Promise(function(I){return setTimeout(I,10)})})},y.prototype.toCanvas=function(){var w=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(w).then(function(){var T=Object.assign({},this.opt.html2canvas);return delete T.onrendered,A()(this.prop.container,T)}).then(function(T){var C=this.opt.html2canvas.onrendered||function(){};C(T),this.prop.canvas=T,document.body.removeChild(this.prop.overlay)})},y.prototype.toImg=function(){var w=[function(){return this.prop.canvas||this.toCanvas()}];return this.thenList(w).then(function(){var T=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=T})},y.prototype.toPdf=function(){var w=[function(){return this.prop.canvas||this.toCanvas()},function(){return this.prop.pageSize||this.setPageSize()}];return this.thenList(w).then(function(){var T=this.prop.canvas,C=this.opt,N=T.height,I=Math.floor(T.width*this.prop.pageSize.inner.ratio),U=Math.ceil(N/I),K=this.prop.pageSize.inner.height,Y=document.createElement("canvas"),re=Y.getContext("2d");Y.width=T.width,Y.height=I,this.prop.pdf=this.prop.pdf||new d.jsPDF(C.jsPDF);for(var se=0;se<U;se++){se===U-1&&N%I!==0&&(Y.height=N%I,K=Y.height*this.prop.pageSize.inner.width/Y.width);var Ae=Y.width,we=Y.height;re.fillStyle="white",re.fillRect(0,0,Ae,we),re.drawImage(T,0,se*I,Ae,we,0,0,Ae,we),se&&this.prop.pdf.addPage();var Ce=Y.toDataURL("image/"+C.image.type,C.image.quality);this.prop.pdf.addImage(Ce,C.image.type,C.margin[1],C.margin[0],this.prop.pageSize.inner.width,K)}})},y.prototype.output=function(w,E,T){return T=T||"pdf",T.toLowerCase()==="img"||T.toLowerCase()==="image"?this.outputImg(w,E):this.outputPdf(w,E)},y.prototype.outputPdf=function(w,E){var T=[function(){return this.prop.pdf||this.toPdf()}];return this.thenList(T).then(function(){return this.prop.pdf.output(w,E)})},y.prototype.outputImg=function(w,E){var T=[function(){return this.prop.img||this.toImg()}];return this.thenList(T).then(function(){switch(w){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+w+'" is not supported.'}})},y.prototype.save=function(w){var E=[function(){return this.prop.pdf||this.toPdf()}];return this.thenList(E).set(w?{filename:w}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},y.prototype.set=function(w){if((0,g.objType)(w)!=="object")return this;var E=Object.keys(w||{}).map(function(T){switch(T){case"margin":return this.setMargin.bind(this,w.margin);case"jsPDF":return function(){return this.opt.jsPDF=w.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,w.pageSize);default:return T in y.template.prop?function(){this.prop[T]=w[T]}:function(){this.opt[T]=w[T]}}},this);return this.then(function(){return this.thenList(E)})},y.prototype.get=function(w,E){return this.then(function(){var C=w in y.template.prop?this.prop[w]:this.opt[w];return E?E(C):C})},y.prototype.setMargin=function(w){return this.then(function(){switch((0,g.objType)(w)){case"number":w=[w,w,w,w];case"array":if(w.length===2&&(w=[w[0],w[1],w[0],w[1]]),w.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=w}).then(this.setPageSize)},y.prototype.setPageSize=function(w){return this.then(function(){w=w||d.jsPDF.getPageSize(this.opt.jsPDF),w.hasOwnProperty("inner")||(w.inner={width:w.width-this.opt.margin[1]-this.opt.margin[3],height:w.height-this.opt.margin[0]-this.opt.margin[2]},w.inner.px={width:(0,g.toPx)(w.inner.width,w.k),height:(0,g.toPx)(w.inner.height,w.k)},w.inner.ratio=w.inner.height/w.inner.width),this.prop.pageSize=w})},y.prototype.setProgress=function(w,E,T,C){return w!=null&&(this.progress.val=w),E!=null&&(this.progress.state=E),T!=null&&(this.progress.n=T),C!=null&&(this.progress.stack=C),this.progress.ratio=this.progress.val/this.progress.state,this},y.prototype.updateProgress=function(w,E,T,C){return this.setProgress(w?this.progress.val+w:null,E||null,T?this.progress.n+T:null,C?this.progress.stack.concat(C):null)},y.prototype.then=function(w,E){var T=this;return this.thenCore(w,E,function(N,I){return T.updateProgress(null,null,1,[N]),Promise.prototype.then.call(this,function(K){return T.updateProgress(null,N),K}).then(N,I).then(function(K){return T.updateProgress(1),K})})},y.prototype.thenCore=function(w,E,T){T=T||Promise.prototype.then;var C=this;w&&(w=w.bind(C)),E&&(E=E.bind(C));var N=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise",I=N?C:y.convert(Object.assign({},C),Promise.prototype),U=T.call(I,w,E);return y.convert(U,C.__proto__)},y.prototype.thenExternal=function(w,E){return Promise.prototype.then.call(this,w,E)},y.prototype.thenList=function(w){var E=this;return w.forEach(function(C){E=E.thenCore(C)}),E},y.prototype.catch=function(x){x&&(x=x.bind(this));var w=Promise.prototype.catch.call(this,x);return y.convert(w,this)},y.prototype.catchExternal=function(w){return Promise.prototype.catch.call(this,w)},y.prototype.error=function(w){return this.then(function(){throw new Error(w)})},y.prototype.using=y.prototype.set,y.prototype.saveAs=y.prototype.save,y.prototype.export=y.prototype.output,y.prototype.run=y.prototype.then,u.default=y}),html2canvas:(function(c){c.exports=r})},i={};function s(c){var u=i[c];if(u!==void 0)return u.exports;if(n[c]===void 0){var l=new Error("Cannot find module '"+c+"'");throw l.code="MODULE_NOT_FOUND",l}var d=i[c]={exports:{}};return n[c].call(d.exports,d,d.exports,s),d.exports}(function(){s.n=function(c){var u=c&&c.__esModule?function(){return c.default}:function(){return c};return s.d(u,{a:u}),u}})(),(function(){var c=Object.getPrototypeOf?function(l){return Object.getPrototypeOf(l)}:function(l){return l.__proto__},u;s.t=function(l,d){if(d&1&&(l=this(l)),d&8||typeof l=="object"&&l&&(d&4&&l.__esModule||d&16&&typeof l.then=="function"))return l;var f=Object.create(null);s.r(f);var A={};u=u||[null,c({}),c([]),c(c)];for(var p=d&2&&l;(typeof p=="object"||typeof p=="function")&&!~u.indexOf(p);p=c(p))Object.getOwnPropertyNames(p).forEach(function(g){A[g]=function(){return l[g]}});return A.default=function(){return l},s.d(f,A),f}})(),(function(){s.d=function(c,u){for(var l in u)s.o(u,l)&&!s.o(c,l)&&Object.defineProperty(c,l,{enumerable:!0,get:u[l]})}})(),(function(){s.o=function(c,u){return Object.prototype.hasOwnProperty.call(c,u)}})(),(function(){s.r=function(c){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})}})();var o={};return(function(){s.r(o);var c=s("./src/worker.js");s("./src/plugin/jspdf-plugin.js"),s("./src/plugin/pagebreaks.js"),s("./src/plugin/hyperlinks.js");var u=function l(d,f){var A=new l.Worker(f);return d?A.from(d).save():A};u.Worker=c.default,o.default=u})(),o=o.default,o})()})})(HL)),HL.exports}var LBe=IBe();const BBe=eA(LBe),PBe=({formData:t,analysis:e,selectedAddOns:r=[],prevStep:n,goToStep:i})=>{const s=()=>{const c=document.createElement("div");c.innerHTML=`
      <div style="font-family: 'Arial', sans-serif; color: #fff; background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%); padding: 40px;">
        <!-- Header -->
        <div style="text-align: center; margin-bottom: 40px; border-bottom: 3px solid #F83B3B; padding-bottom: 20px;">
          <h1 style="color: #F83B3B; font-size: 36px; margin: 0 0 10px 0; font-weight: 900;">
            FIT FOCUS MEDIA
          </h1>
          <p style="color: #9CA3AF; font-size: 16px; margin: 0;">Combat Sports Media Production Proposal</p>
          <p style="color: #6B7280; font-size: 12px; margin: 10px 0 0 0;">${new Date().toLocaleDateString()}</p>
        </div>

        <!-- Organization Details -->
        <div style="background: #2d2d2d; border: 2px solid #374151; border-radius: 12px; padding: 30px; margin-bottom: 30px;">
          <h2 style="color: #F83B3B; font-size: 24px; margin: 0 0 20px 0; font-weight: bold;">Organization Profile</h2>
          <table style="width: 100%; border-collapse: collapse;">
            <tr>
              <td style="padding: 8px 0; color: #9CA3AF; font-size: 14px;">Organization:</td>
              <td style="padding: 8px 0; color: #fff; font-size: 14px; font-weight: bold;">${t.orgName}</td>
            </tr>
            <tr>
              <td style="padding: 8px 0; color: #9CA3AF; font-size: 14px;">Events Per Year:</td>
              <td style="padding: 8px 0; color: #fff; font-size: 14px; font-weight: bold;">${t.showsPerYear}</td>
            </tr>
            <tr>
              <td style="padding: 8px 0; color: #9CA3AF; font-size: 14px;">Average Attendance:</td>
              <td style="padding: 8px 0; color: #fff; font-size: 14px; font-weight: bold;">${t.avgAttendance.toLocaleString()}</td>
            </tr>
            <tr>
              <td style="padding: 8px 0; color: #9CA3AF; font-size: 14px;">Social Following:</td>
              <td style="padding: 8px 0; color: #fff; font-size: 14px; font-weight: bold;">${t.socialFollowing.toLocaleString()}</td>
            </tr>
            <tr>
              <td style="padding: 8px 0; color: #9CA3AF; font-size: 14px;">Organization Tier:</td>
              <td style="padding: 8px 0; color: #F83B3B; font-size: 16px; font-weight: bold;">${e?.tier}</td>
            </tr>
          </table>
        </div>

        <!-- The Grand Slam Offer -->
        <div style="background: linear-gradient(135deg, #D97706 0%, #DC2626 100%); border: 3px solid #FBBF24; border-radius: 12px; padding: 30px; margin-bottom: 30px;">
          <div style="background: rgba(255,255,255,0.2); display: inline-block; padding: 8px 16px; border-radius: 20px; margin-bottom: 15px;">
            <span style="color: #fff; font-size: 12px; font-weight: bold;"> ZERO-COST PRODUCTION</span>
          </div>
          <h2 style="color: #fff; font-size: 28px; margin: 0 0 10px 0; font-weight: bold;">Our Offer to ${t.orgName}</h2>
          <p style="color: #FEF3C7; font-size: 18px; font-weight: bold; margin: 0 0 20px 0;">
            Professional live stream production at absolutely zero cost to you
          </p>
          
          <div style="background: rgba(255,255,255,0.1); border-radius: 8px; padding: 20px; margin-bottom: 20px;">
            <h3 style="color: #fff; font-size: 16px; margin: 0 0 15px 0; font-weight: bold;"> What's Included FREE:</h3>
            <ul style="margin: 0; padding-left: 20px; color: #FEF3C7;">
              <li style="margin-bottom: 8px;">Professional live stream production (1-2 cameras)</li>
              <li style="margin-bottom: 8px;">Complete PPV/streaming setup and management</li>
              <li style="margin-bottom: 8px;">Full show recording</li>
              <li style="margin-bottom: 8px;">1 social media highlight clip</li>
              <li style="margin-bottom: 0;">Revenue share: You earn from every PPV sale</li>
            </ul>
          </div>
          
          <div style="background: rgba(16, 185, 129, 0.3); border: 2px solid #10B981; border-radius: 8px; padding: 15px; text-align: center;">
            <p style="color: #fff; font-size: 20px; font-weight: bold; margin: 0;">
              Your Production Cost: <span style="color: #6EE7B7;">$0</span>
            </p>
            <p style="color: #D1FAE5; font-size: 12px; margin: 5px 0 0 0;">
              Zero upfront cost. Zero risk. Just professional streaming + revenue sharing.
            </p>
          </div>
        </div>
        
        <!-- Premium Add-Ons -->
        <div style="background: #2d2d2d; border: 2px solid #374151; border-radius: 12px; padding: 30px; margin-bottom: 30px;">
          <h2 style="color: #F83B3B; font-size: 24px; margin: 0 0 15px 0; font-weight: bold;">Premium Add-Ons</h2>
          ${r.length>0?`
            <p style="color: #10B981; font-size: 14px; margin: 0 0 15px 0; font-weight: bold;"> Selected Add-Ons:</p>
            <ul style="margin: 0 0 20px 0; padding-left: 20px; color: #D1D5DB; line-height: 1.8;">
              ${r.map(l=>`<li style="color: #10B981;"> ${l}</li>`).join("")}
            </ul>
          `:""}
          <p style="color: #9CA3AF; font-size: 14px; margin: 0 0 15px 0;">
            ${r.length>0?"Other available options:":"Available premium upgrades:"}
          </p>
          ${e?.tier==="Grassroots"?`
            <ul style="margin: 0; padding-left: 20px; color: #D1D5DB; line-height: 1.8;">
              ${r.includes("Custom Fight Banner Graphics")?"":"<li> Custom Fight Banner Graphics ($500-$800/event)</li>"}
              ${r.includes("Professional Event Photography")?"":"<li> Professional Event Photography ($800-$1,200/event)</li>"}
              ${r.includes("Full Recording Package")?"":"<li> Full Recording Package ($500-$800/event)</li>"}
            </ul>
          `:e?.tier==="Regional"?`
            <ul style="margin: 0; padding-left: 20px; color: #D1D5DB; line-height: 1.8;">
              ${r.includes("Premium Camera Setup")?"":"<li> Premium Camera Setup ($1,500-$3,000/event)</li>"}
              ${r.includes("Social Media Content Package")?"":"<li> Social Media Content Package ($1,000-$2,000/event)</li>"}
              ${r.includes("Professional Event Photography")?"":"<li> Professional Event Photography ($800-$1,200/event)</li>"}
              ${r.includes("Custom Fight Banner Graphics")?"":"<li> Custom Fight Banner Graphics ($500-$800/event)</li>"}
            </ul>
          `:`
            <ul style="margin: 0; padding-left: 20px; color: #D1D5DB; line-height: 1.8;">
              ${r.includes("Premium Camera Setup")?"":"<li> Premium Camera Setup ($1,500-$3,000/event)</li>"}
              ${r.includes("Social Media Content Package")?"":"<li> Social Media Content Package ($1,000-$2,000/event)</li>"}
              ${r.includes("Ongoing Content Strategy")?"":"<li> Ongoing Content Strategy ($2,000-$4,000/month)</li>"}
              ${r.includes("Full Premium Package")?"":"<li> Full Premium Package Bundle ($4,000-$6,000/event)</li>"}
            </ul>
          `}
          <p style="color: #6B7280; font-size: 12px; margin: 15px 0 0 0; font-style: italic;">
            * Your revenue share applies regardless of add-ons selected
          </p>
        </div>

        <!-- Revenue Projection -->
        <div style="background: #2d2d2d; border: 2px solid #10B981; border-radius: 12px; padding: 30px; margin-bottom: 30px;">
          <h2 style="color: #10B981; font-size: 24px; margin: 0 0 20px 0; font-weight: bold;">Your Revenue Projection</h2>
          
          <div style="background: #065F46; border: 2px solid #10B981; border-radius: 8px; padding: 20px; margin-bottom: 20px; text-align: center;">
            <p style="color: #D1FAE5; font-size: 14px; margin: 0 0 10px 0;">Your Production Cost</p>
            <p style="color: #6EE7B7; font-size: 36px; font-weight: bold; margin: 0;">$0</p>
            <p style="color: #A7F3D0; font-size: 12px; margin: 10px 0 0 0;">Zero upfront investment required</p>
          </div>
          
          <table style="width: 100%; border-collapse: collapse;">
            <tr>
              <td style="padding: 12px 0; color: #9CA3AF; font-size: 14px; border-bottom: 1px solid #374151;">Estimated PPV Purchases Per Event:</td>
              <td style="padding: 12px 0; color: #60A5FA; font-size: 16px; font-weight: bold; text-align: right; border-bottom: 1px solid #374151;">${Math.round(e?.potentialStreamingRevenue?.viewerEstimate*.6).toLocaleString()}</td>
            </tr>
            <tr>
              <td style="padding: 12px 0; color: #9CA3AF; font-size: 14px; border-bottom: 1px solid #374151;">Your Revenue Per Event:</td>
              <td style="padding: 12px 0; color: #10B981; font-size: 16px; font-weight: bold; text-align: right; border-bottom: 1px solid #374151;">$${Math.round(e?.potentialStreamingRevenue?.perEvent*.3).toLocaleString()}</td>
            </tr>
            <tr>
              <td style="padding: 12px 0; color: #10B981; font-size: 14px; font-weight: bold;">Your Annual Revenue:</td>
              <td style="padding: 12px 0; color: #10B981; font-size: 20px; font-weight: bold; text-align: right;">$${Math.round(e?.potentialStreamingRevenue?.annual*.3).toLocaleString()}</td>
            </tr>
          </table>
          <p style="color: #6B7280; font-size: 11px; margin: 15px 0 0 0; font-style: italic;">
            * Conservative estimates based on industry benchmarks. 100% pure profit  revenue you weren't generating before at zero cost.
          </p>
        </div>

        <!-- Contact Information -->
        <div style="background: #2d2d2d; border: 2px solid #F83B3B; border-radius: 12px; padding: 30px; margin-bottom: 20px;">
          <h2 style="color: #F83B3B; font-size: 24px; margin: 0 0 20px 0; font-weight: bold;">Next Steps</h2>
          <p style="color: #D1D5DB; font-size: 14px; margin: 0 0 20px 0;">
            Ready to elevate your combat sports events? Contact us to discuss this proposal:
          </p>
          <table style="width: 100%;">
            <tr>
              <td style="padding: 8px 0; color: #9CA3AF; font-size: 14px;">Email:</td>
              <td style="padding: 8px 0; color: #60A5FA; font-size: 14px;">info@fitfocusmedia.com.au</td>
            </tr>
            <tr>
              <td style="padding: 8px 0; color: #9CA3AF; font-size: 14px;">Website:</td>
              <td style="padding: 8px 0; color: #60A5FA; font-size: 14px;">fitfocusmedia.com.au</td>
            </tr>
          </table>
        </div>

        <!-- Footer -->
        <div style="text-align: center; margin-top: 40px; padding-top: 20px; border-top: 1px solid #374151;">
          <p style="color: #6B7280; font-size: 12px; margin: 0;">
             2026 Fit Focus Media | Professional Combat Sports Production
          </p>
        </div>
      </div>
    `;const u={margin:0,filename:`${t.orgName.replace(/\s/g,"-")}-proposal.pdf`,image:{type:"jpeg",quality:.98},html2canvas:{scale:2,backgroundColor:"#1a1a1a"},jsPDF:{unit:"in",format:"letter",orientation:"portrait"}};BBe().set(u).from(c).save()},o=()=>{confirm("Start a new proposal? Your current data will be cleared.")&&i(1)};return a.jsx("section",{className:"min-h-screen py-12 sm:py-20 px-4",children:a.jsxs("div",{className:"max-w-5xl mx-auto",children:[a.jsxs(Or.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center mb-8 sm:mb-12",children:[a.jsx(Or.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:200},className:"inline-flex items-center justify-center w-16 h-16 sm:w-20 sm:h-20 bg-green-600 rounded-full mb-6",children:a.jsx(Qw,{className:"w-10 h-10 sm:w-12 sm:h-12 text-white"})}),a.jsx("h2",{className:"text-3xl sm:text-4xl md:text-5xl font-black mb-4",children:a.jsx("span",{className:"text-gradient",children:"Your Proposal is Ready!"})}),a.jsxs("p",{className:"text-base sm:text-lg md:text-xl text-gray-300 max-w-2xl mx-auto",children:["Here's what we've prepared for ",a.jsx("span",{className:"text-primary-400 font-bold",children:t.orgName})]})]}),a.jsx(Or.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},className:"bg-gradient-to-r from-primary-900/40 to-orange-900/40 border-2 border-primary-600 rounded-xl p-6 sm:p-8 mb-8",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-sm text-gray-300 mb-2",children:"Your Tier"}),a.jsx("p",{className:"text-2xl sm:text-3xl font-black text-white",children:e?.tier})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-sm text-gray-300 mb-2",children:"Your Production Cost"}),a.jsx("p",{className:"text-xl sm:text-2xl font-black text-green-400",children:"$0"}),a.jsx("p",{className:"text-xs text-green-300 mt-1",children:"Zero upfront investment"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-sm text-gray-300 mb-2",children:"Your Annual Revenue"}),a.jsxs("p",{className:"text-2xl sm:text-3xl font-black text-green-400",children:["$",Math.round(e?.potentialStreamingRevenue?.annual*.3).toLocaleString()]}),a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Revenue you weren't making before"})]})]})}),r.length>0&&a.jsxs(Or.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.35},className:"bg-dark-800 border border-green-600 rounded-xl p-6 sm:p-8 mb-8",children:[a.jsxs("h3",{className:"text-xl sm:text-2xl font-black text-white mb-4 flex items-center gap-2",children:[a.jsx(Qw,{className:"w-6 h-6 text-green-400"}),"Selected Premium Add-Ons"]}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:r.map((c,u)=>a.jsxs("div",{className:"flex items-start gap-3 p-3 bg-dark-900 rounded-lg border border-green-600/30",children:[a.jsx("div",{className:"flex-shrink-0 w-6 h-6 bg-green-500 rounded-full flex items-center justify-center mt-0.5",children:a.jsx(Qw,{className:"w-4 h-4 text-white"})}),a.jsx("span",{className:"text-green-400 font-semibold text-sm sm:text-base",children:c})]},u))})]}),a.jsxs(Or.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},className:"bg-dark-800 border border-gray-700 rounded-xl p-6 sm:p-8 mb-8",children:[a.jsxs("div",{className:"flex items-start gap-4 mb-6",children:[a.jsx(yhe,{className:"w-10 h-10 sm:w-12 sm:h-12 text-primary-500 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-2xl sm:text-3xl font-black text-white mb-2",children:"Next Steps"}),a.jsx("p",{className:"text-gray-300 text-sm sm:text-base",children:"Let's turn this proposal into reality"})]})]}),a.jsx("div",{className:"space-y-4",children:[{step:"1",title:"Schedule a Consultation",desc:"Free 30-minute call to discuss your specific needs and answer questions"},{step:"2",title:"Refine Your Package",desc:"We'll customize the service package to perfectly match your requirements"},{step:"3",title:"Event Planning",desc:"Work with our team to plan production logistics and content strategy"},{step:"4",title:"Production Day",desc:"Sit back while we deliver broadcast-quality coverage of your event"}].map((c,u)=>a.jsxs(Or.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.5+u*.1},className:"flex gap-4 p-4 bg-dark-900 rounded-lg border border-gray-700 hover:border-primary-600/50 transition-colors",children:[a.jsx("div",{className:"flex-shrink-0 w-10 h-10 sm:w-12 sm:h-12 bg-primary-600 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-lg sm:text-xl font-black text-white",children:c.step})}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-base sm:text-lg font-bold text-white mb-1",children:c.title}),a.jsx("p",{className:"text-sm text-gray-400",children:c.desc})]})]},u))})]}),a.jsx(Or.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.6},className:"bg-dark-800 border border-gray-700 rounded-xl p-6 sm:p-8 mb-8",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"flex justify-center mb-4",children:[1,2,3,4,5].map(c=>a.jsx("svg",{className:"w-6 h-6 text-amber-500",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},c))}),a.jsx("p",{className:"text-base sm:text-lg text-gray-300 italic mb-4",children:`"Brandon's team delivered exactly what we needed. Professional coverage, quick turnaround on highlights, and our sponsors loved the exposure. Worth every dollar."`}),a.jsx("p",{className:"text-sm text-gray-500",children:" Combat Sports Promoter, QLD"})]})}),a.jsx(Or.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.7},className:"bg-gradient-to-r from-green-900/30 to-emerald-900/30 border-2 border-green-600 rounded-xl p-6 sm:p-8 mb-8",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-4xl mb-4",children:""}),a.jsx("h3",{className:"text-2xl sm:text-3xl font-black text-white mb-4",children:"Our Satisfaction Guarantee"}),a.jsx("p",{className:"text-base sm:text-lg text-gray-200 max-w-2xl mx-auto leading-relaxed",children:"We're confident you'll love our work. If you're not completely satisfied with your first event's media package, we'll re-edit the entire deliverable at no additional cost."}),a.jsx("p",{className:"text-sm text-green-400 mt-4 font-semibold",children:"Plus: Free consultation with absolutely no commitment required."})]})}),a.jsxs(Or.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.8},className:"bg-dark-800 border border-gray-700 rounded-xl p-6 sm:p-8 mb-8",children:[a.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6 text-center",children:"Get In Touch"}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6",children:[a.jsxs("a",{href:"mailto:info@fitfocusmedia.com.au?subject=Combat Sports Media Proposal - ${formData.orgName}",className:"flex items-center gap-3 p-4 sm:p-5 bg-primary-600 hover:bg-primary-700 text-white rounded-lg transition-all hover:scale-[1.02] group",children:[a.jsx(tu,{className:"w-6 h-6 sm:w-8 sm:h-8 group-hover:rotate-12 transition-transform"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-sm sm:text-base",children:"Email Us"}),a.jsx("p",{className:"text-xs sm:text-sm text-white/80",children:"info@fitfocusmedia.com.au"})]})]}),a.jsxs("a",{href:"mailto:info@fitfocusmedia.com.au?subject=Consultation Request - ${formData.orgName}&body=Hi Brandon,%0D%0A%0D%0AI'd like to schedule a consultation to discuss media production for ${formData.orgName}.%0D%0A%0D%0APlease send me your available times.%0D%0A%0D%0AThanks!",className:"flex items-center gap-3 p-4 sm:p-5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-all hover:scale-[1.02] group",children:[a.jsx(fc,{className:"w-6 h-6 sm:w-8 sm:h-8 group-hover:rotate-12 transition-transform"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-sm sm:text-base",children:"Request a Call"}),a.jsx("p",{className:"text-xs sm:text-sm text-white/80",children:"We'll send scheduling options"})]})]})]}),a.jsx("div",{className:"text-center",children:a.jsx("p",{className:"text-sm text-gray-400",children:"Response time: Usually within 24 hours"})})]}),a.jsxs(Or.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:1},className:"space-y-3",children:[a.jsxs("button",{onClick:s,className:"w-full flex items-center justify-center gap-3 px-6 py-4 bg-green-600 hover:bg-green-700 text-white font-bold rounded-lg transition-all hover:scale-[1.02] text-base sm:text-lg",children:[a.jsx(km,{className:"w-5 h-5 sm:w-6 sm:h-6"}),"Download Proposal PDF"]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsxs("button",{onClick:n,className:"flex-1 flex items-center justify-center gap-2 px-6 py-4 bg-dark-700 hover:bg-dark-600 text-white font-bold rounded-lg transition-all text-base sm:text-lg",children:[a.jsx(U0,{className:"w-5 h-5"}),a.jsx("span",{className:"hidden sm:inline",children:"Back"})]}),a.jsx("button",{onClick:o,className:"flex-1 flex items-center justify-center gap-2 px-6 py-4 bg-dark-700 hover:bg-dark-600 text-white font-semibold rounded-lg transition-all text-sm sm:text-base",children:"New Proposal"}),a.jsx("button",{onClick:()=>i(2),className:"flex-1 flex items-center justify-center gap-2 px-6 py-4 bg-primary-600 hover:bg-primary-700 text-white font-semibold rounded-lg transition-all text-sm sm:text-base",children:"Edit Details"})]})]}),a.jsx(Or.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1.2},className:"mt-12 text-center",children:a.jsx("p",{className:"text-sm text-gray-500",children:" 2026 Fit Focus Media | Professional Combat Sports Production"})})]})})};function T5(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function OBe(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function c(d){try{l(n.next(d))}catch(f){o(f)}}function u(d){try{l(n.throw(d))}catch(f){o(f)}}function l(d){d.done?s(d.value):i(d.value).then(c,u)}l((n=n.apply(t,e||[])).next())})}const RBe=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class MM extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}}class DBe extends MM{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class tz extends MM{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class rz extends MM{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var RP;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(RP||(RP={}));class MBe{constructor(e,{headers:r={},customFetch:n,region:i=RP.Any}={}){this.url=e,this.headers=r,this.region=i,this.fetch=RBe(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return OBe(this,arguments,void 0,function*(r,n={}){var i;let s,o;try{const{headers:c,method:u,body:l,signal:d,timeout:f}=n;let A={},{region:p}=n;p||(p=this.region);const g=new URL(`${this.url}/${r}`);p&&p!=="any"&&(A["x-region"]=p,g.searchParams.set("forceFunctionRegion",p));let y;l&&(c&&!Object.prototype.hasOwnProperty.call(c,"Content-Type")||!c)?typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(A["Content-Type"]="application/octet-stream",y=l):typeof l=="string"?(A["Content-Type"]="text/plain",y=l):typeof FormData<"u"&&l instanceof FormData?y=l:(A["Content-Type"]="application/json",y=JSON.stringify(l)):l&&typeof l!="string"&&!(typeof Blob<"u"&&l instanceof Blob)&&!(l instanceof ArrayBuffer)&&!(typeof FormData<"u"&&l instanceof FormData)?y=JSON.stringify(l):y=l;let x=d;f&&(o=new AbortController,s=setTimeout(()=>o.abort(),f),d?(x=o.signal,d.addEventListener("abort",()=>o.abort())):x=o.signal);const w=yield this.fetch(g.toString(),{method:u||"POST",headers:Object.assign(Object.assign(Object.assign({},A),this.headers),c),body:y,signal:x}).catch(N=>{throw new DBe(N)}),E=w.headers.get("x-relay-error");if(E&&E==="true")throw new tz(w);if(!w.ok)throw new rz(w);let T=((i=w.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),C;return T==="application/json"?C=yield w.json():T==="application/octet-stream"||T==="application/pdf"?C=yield w.blob():T==="text/event-stream"?C=w:T==="multipart/form-data"?C=yield w.formData():C=yield w.text(),{data:C,error:null,response:w}}catch(c){return{data:null,error:c,response:c instanceof rz||c instanceof tz?c.context:void 0}}finally{s&&clearTimeout(s)}})}}var FBe=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},UBe=class{constructor(t){var e,r;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(r=t.isMaybeSingle)!==null&&r!==void 0?r:!1,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let i=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{let o=null,c=null,u=null,l=s.status,d=s.statusText;if(s.ok){var f,A;if(r.method!=="HEAD"){var p;const w=await s.text();w===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((p=r.headers.get("Accept"))===null||p===void 0)&&p.includes("application/vnd.pgrst.plan+text"))?c=w:c=JSON.parse(w))}const y=(f=r.headers.get("Prefer"))===null||f===void 0?void 0:f.match(/count=(exact|planned|estimated)/),x=(A=s.headers.get("content-range"))===null||A===void 0?void 0:A.split("/");y&&x&&x.length>1&&(u=parseInt(x[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(c)&&(c.length>1?(o={code:"PGRST116",details:`Results contain ${c.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},c=null,u=null,l=406,d="Not Acceptable"):c.length===1?c=c[0]:c=null)}else{var g;const y=await s.text();try{o=JSON.parse(y),Array.isArray(o)&&s.status===404&&(c=[],o=null,l=200,d="OK")}catch{s.status===404&&y===""?(l=204,d="No Content"):o={message:y}}if(o&&r.isMaybeSingle&&(!(o==null||(g=o.details)===null||g===void 0)&&g.includes("0 rows"))&&(o=null,l=200,d="OK"),o&&r.shouldThrowOnError)throw new FBe(o)}return{error:o,data:c,count:u,status:l,statusText:d}});return this.shouldThrowOnError||(i=i.catch(s=>{var o;let c="";const u=s?.cause;if(u){var l,d,f,A;const g=(l=u?.message)!==null&&l!==void 0?l:"",y=(d=u?.code)!==null&&d!==void 0?d:"";c=`${(f=s?.name)!==null&&f!==void 0?f:"FetchError"}: ${s?.message}`,c+=`

Caused by: ${(A=u?.name)!==null&&A!==void 0?A:"Error"}: ${g}`,y&&(c+=` (${y})`),u?.stack&&(c+=`
${u.stack}`)}else{var p;c=(p=s?.stack)!==null&&p!==void 0?p:""}return{error:{message:`${(o=s?.name)!==null&&o!==void 0?o:"FetchError"}: ${s?.message}`,details:c,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),i.then(t,e)}returns(){return this}overrideTypes(){return this}},$Be=class extends UBe{select(t){let e=!1;const r=(t??"*").split("").map(n=>/\s/.test(n)&&!e?"":(n==='"'&&(e=!e),n)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:r,foreignTable:n,referencedTable:i=n}={}){const s=i?`${i}.order`:"order",o=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${o?`${o},`:""}${t}.${e?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:r=e}={}){const n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${t}`),this}range(t,e,{foreignTable:r,referencedTable:n=r}={}){const i=typeof n>"u"?"offset":`${n}.offset`,s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(s,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:r=!1,buffers:n=!1,wal:i=!1,format:s="text"}={}){var o;const c=[t?"analyze":null,e?"verbose":null,r?"settings":null,n?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${s}; for="${u}"; options=${c};`),s==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const nz=new RegExp("[,()]");var vx=class extends $Be{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const r=Array.from(new Set(e)).map(n=>typeof n=="string"&&nz.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}notIn(t,e){const r=Array.from(new Set(e)).map(n=>typeof n=="string"&&nz.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(t,`not.in.(${r})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:r,type:n}={}){let i="";n==="plain"?i="pl":n==="phrase"?i="ph":n==="websearch"&&(i="w");const s=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${i}fts${s}.${e}`),this}match(t){return Object.entries(t).forEach(([e,r])=>{this.url.searchParams.append(e,`eq.${r}`)}),this}not(t,e,r){return this.url.searchParams.append(t,`not.${e}.${r}`),this}or(t,{foreignTable:e,referencedTable:r=e}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${t})`),this}filter(t,e,r){return this.url.searchParams.append(t,`${e}.${r}`),this}},HBe=class{constructor(t,{headers:e={},schema:r,fetch:n}){this.url=t,this.headers=new Headers(e),this.schema=r,this.fetch=n}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(t,e){const{head:r=!1,count:n}=e??{},i=r?"HEAD":"GET";let s=!1;const o=(t??"*").split("").map(l=>/\s/.test(l)&&!s?"":(l==='"'&&(s=!s),l)).join(""),{url:c,headers:u}=this.cloneRequestState();return c.searchParams.set("select",o),n&&u.append("Prefer",`count=${n}`),new vx({method:i,url:c,headers:u,schema:this.schema,fetch:this.fetch})}insert(t,{count:e,defaultToNull:r=!0}={}){var n;const i="POST",{url:s,headers:o}=this.cloneRequestState();if(e&&o.append("Prefer",`count=${e}`),r||o.append("Prefer","missing=default"),Array.isArray(t)){const c=t.reduce((u,l)=>u.concat(Object.keys(l)),[]);if(c.length>0){const u=[...new Set(c)].map(l=>`"${l}"`);s.searchParams.set("columns",u.join(","))}}return new vx({method:i,url:s,headers:o,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}upsert(t,{onConflict:e,ignoreDuplicates:r=!1,count:n,defaultToNull:i=!0}={}){var s;const o="POST",{url:c,headers:u}=this.cloneRequestState();if(u.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),e!==void 0&&c.searchParams.set("on_conflict",e),n&&u.append("Prefer",`count=${n}`),i||u.append("Prefer","missing=default"),Array.isArray(t)){const l=t.reduce((d,f)=>d.concat(Object.keys(f)),[]);if(l.length>0){const d=[...new Set(l)].map(f=>`"${f}"`);c.searchParams.set("columns",d.join(","))}}return new vx({method:o,url:c,headers:u,schema:this.schema,body:t,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}update(t,{count:e}={}){var r;const n="PATCH",{url:i,headers:s}=this.cloneRequestState();return e&&s.append("Prefer",`count=${e}`),new vx({method:n,url:i,headers:s,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:t}={}){var e;const r="DELETE",{url:n,headers:i}=this.cloneRequestState();return t&&i.append("Prefer",`count=${t}`),new vx({method:r,url:n,headers:i,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},QBe=class vre{constructor(e,{headers:r={},schema:n,fetch:i}={}){this.url=e,this.headers=new Headers(r),this.schemaName=n,this.fetch=i}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new HBe(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new vre(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,r={},{head:n=!1,get:i=!1,count:s}={}){var o;let c;const u=new URL(`${this.url}/rpc/${e}`);let l;const d=p=>p!==null&&typeof p=="object"&&(!Array.isArray(p)||p.some(d)),f=n&&Object.values(r).some(d);f?(c="POST",l=r):n||i?(c=n?"HEAD":"GET",Object.entries(r).filter(([p,g])=>g!==void 0).map(([p,g])=>[p,Array.isArray(g)?`{${g.join(",")}}`:`${g}`]).forEach(([p,g])=>{u.searchParams.append(p,g)})):(c="POST",l=r);const A=new Headers(this.headers);return f?A.set("Prefer",s?`count=${s},return=minimal`:"return=minimal"):s&&A.set("Prefer",`count=${s}`),new vx({method:c,url:u,headers:A,schema:this.schemaName,body:l,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};class VBe{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const r=globalThis.process;if(r){const n=r.versions;if(n&&n.node){const i=n.node,s=parseInt(i.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const n=this.getWebSocketConstructor();return new n(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const zBe="2.93.3",KBe=`realtime-js/${zBe}`,GBe="1.0.0",yre="2.0.0",iz=yre,DP=1e4,WBe=1e3,YBe=100;var l0;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(l0||(l0={}));var Bu;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Bu||(Bu={}));var CA;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(CA||(CA={}));var MP;(function(t){t.websocket="websocket"})(MP||(MP={}));var kv;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(kv||(kv={}));class qBe{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,r){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(e));let n=[e.join_ref,e.ref,e.topic,e.event,e.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(e){var r;return this._isArrayBuffer((r=e.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var r,n;const i=(n=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(e){var r,n;const i=(n=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},o=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(e,r,n){var i,s;const o=e.topic,c=(i=e.ref)!==null&&i!==void 0?i:"",u=(s=e.join_ref)!==null&&s!==void 0?s:"",l=e.payload.event,d=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},f=Object.keys(d).length===0?"":JSON.stringify(d);if(u.length>255)throw new Error(`joinRef length ${u.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`ref length ${c.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`userEvent length ${l.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`metadata length ${f.length} exceeds maximum of 255`);const A=this.USER_BROADCAST_PUSH_META_LENGTH+u.length+c.length+o.length+l.length+f.length,p=new ArrayBuffer(this.HEADER_LENGTH+A);let g=new DataView(p),y=0;g.setUint8(y++,this.KINDS.userBroadcastPush),g.setUint8(y++,u.length),g.setUint8(y++,c.length),g.setUint8(y++,o.length),g.setUint8(y++,l.length),g.setUint8(y++,f.length),g.setUint8(y++,r),Array.from(u,w=>g.setUint8(y++,w.charCodeAt(0))),Array.from(c,w=>g.setUint8(y++,w.charCodeAt(0))),Array.from(o,w=>g.setUint8(y++,w.charCodeAt(0))),Array.from(l,w=>g.setUint8(y++,w.charCodeAt(0))),Array.from(f,w=>g.setUint8(y++,w.charCodeAt(0)));var x=new Uint8Array(p.byteLength+n.byteLength);return x.set(new Uint8Array(p),0),x.set(new Uint8Array(n),p.byteLength),x.buffer}decode(e,r){if(this._isArrayBuffer(e)){let n=this._binaryDecode(e);return r(n)}if(typeof e=="string"){const n=JSON.parse(e),[i,s,o,c,u]=n;return r({join_ref:i,ref:s,topic:o,event:c,payload:u})}return r({})}_binaryDecode(e){const r=new DataView(e),n=r.getUint8(0),i=new TextDecoder;if(n===this.KINDS.userBroadcast)return this._decodeUserBroadcast(e,r,i)}_decodeUserBroadcast(e,r,n){const i=r.getUint8(1),s=r.getUint8(2),o=r.getUint8(3),c=r.getUint8(4);let u=this.HEADER_LENGTH+4;const l=n.decode(e.slice(u,u+i));u=u+i;const d=n.decode(e.slice(u,u+s));u=u+s;const f=n.decode(e.slice(u,u+o));u=u+o;const A=e.slice(u,e.byteLength),p=c===this.JSON_ENCODING?JSON.parse(n.decode(A)):A,g={type:this.BROADCAST_EVENT,event:d,payload:p};return o>0&&(g.meta=JSON.parse(f)),{join_ref:null,ref:null,topic:l,event:this.BROADCAST_EVENT,payload:g}}_isArrayBuffer(e){var r;return e instanceof ArrayBuffer||((r=e?.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(e,r){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([n])=>r.includes(n)))}}class xre{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var El;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(El||(El={}));const sz=(t,e,r={})=>{var n;const i=(n=r.skipTypes)!==null&&n!==void 0?n:[];return e?Object.keys(e).reduce((s,o)=>(s[o]=XBe(o,t,e,i),s),{}):{}},XBe=(t,e,r,n)=>{const i=e.find(c=>c.name===t),s=i?.type,o=r[t];return s&&!n.includes(s)?bre(s,o):FP(o)},bre=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return tPe(e,r)}switch(t){case El.bool:return ZBe(e);case El.float4:case El.float8:case El.int2:case El.int4:case El.int8:case El.numeric:case El.oid:return JBe(e);case El.json:case El.jsonb:return ePe(e);case El.timestamp:return rPe(e);case El.abstime:case El.date:case El.daterange:case El.int4range:case El.int8range:case El.money:case El.reltime:case El.text:case El.time:case El.timestamptz:case El.timetz:case El.tsrange:case El.tstzrange:return FP(e);default:return FP(e)}},FP=t=>t,ZBe=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},JBe=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},ePe=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},tPe=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let s;const o=t.slice(1,r);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(c=>bre(e,c))}return t},rPe=t=>typeof t=="string"?t.replace(" ","T"):t,wre=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class QL{constructor(e,r,n={},i=DP){this.channel=e,this.event=r,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var az;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(az||(az={}));class Xw{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:s,onLeave:o,onSync:c}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Xw.syncState(this.state,i,s,o),this.pendingDiffs.forEach(u=>{this.state=Xw.syncDiff(this.state,u,s,o)}),this.pendingDiffs=[],c()}),this.channel._on(n.diff,{},i=>{const{onJoin:s,onLeave:o,onSync:c}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Xw.syncDiff(this.state,i,s,o),c())}),this.onJoin((i,s,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:o})}),this.onLeave((i,s,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,i){const s=this.cloneDeep(e),o=this.transformState(r),c={},u={};return this.map(s,(l,d)=>{o[l]||(u[l]=d)}),this.map(o,(l,d)=>{const f=s[l];if(f){const A=d.map(x=>x.presence_ref),p=f.map(x=>x.presence_ref),g=d.filter(x=>p.indexOf(x.presence_ref)<0),y=f.filter(x=>A.indexOf(x.presence_ref)<0);g.length>0&&(c[l]=g),y.length>0&&(u[l]=y)}else c[l]=d}),this.syncDiff(s,{joins:c,leaves:u},n,i)}static syncDiff(e,r,n,i){const{joins:s,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(s,(c,u)=>{var l;const d=(l=e[c])!==null&&l!==void 0?l:[];if(e[c]=this.cloneDeep(u),d.length>0){const f=e[c].map(p=>p.presence_ref),A=d.filter(p=>f.indexOf(p.presence_ref)<0);e[c].unshift(...A)}n(c,d,u)}),this.map(o,(c,u)=>{let l=e[c];if(!l)return;const d=u.map(f=>f.presence_ref);l=l.filter(f=>d.indexOf(f.presence_ref)<0),e[c]=l,i(c,l,u),l.length===0&&delete e[c]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const i=e[n];return"metas"in i?r[n]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):r[n]=i,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var oz;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(oz||(oz={}));var Zw;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Zw||(Zw={}));var jp;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(jp||(jp={}));class tb{constructor(e,r={config:{}},n){var i,s;if(this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=Bu.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new QL(this,CA.join,this.params,this.timeout),this.rejoinTimer=new xre(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Bu.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Bu.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Bu.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Bu.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Bu.errored,this.rejoinTimer.scheduleTimeout())}),this._on(CA.reply,{},(o,c)=>{this._trigger(this._replyEventName(c),o)}),this.presence=new Xw(this),this.broadcastEndpointURL=wre(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((s=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||s===void 0)&&s.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,r=this.timeout){var n,i,s;if(this.socket.isConnected()||this.socket.connect(),this.state==Bu.closed){const{config:{broadcast:o,presence:c,private:u}}=this.params,l=(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(p=>p.filter))!==null&&i!==void 0?i:[],d=!!this.bindings[Zw.PRESENCE]&&this.bindings[Zw.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,f={},A={broadcast:o,presence:Object.assign(Object.assign({},c),{enabled:d}),postgres_changes:l,private:u};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(p=>e?.(jp.CHANNEL_ERROR,p)),this._onClose(()=>e?.(jp.CLOSED)),this.updateJoinPayload(Object.assign({config:A},f)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:p})=>{var g;if(this.socket._isManualToken()||this.socket.setAuth(),p===void 0){e?.(jp.SUBSCRIBED);return}else{const y=this.bindings.postgres_changes,x=(g=y?.length)!==null&&g!==void 0?g:0,w=[];for(let E=0;E<x;E++){const T=y[E],{filter:{event:C,schema:N,table:I,filter:U}}=T,K=p&&p[E];if(K&&K.event===C&&tb.isFilterValueEqual(K.schema,N)&&tb.isFilterValueEqual(K.table,I)&&tb.isFilterValueEqual(K.filter,U))w.push(Object.assign(Object.assign({},T),{id:K.id}));else{this.unsubscribe(),this.state=Bu.errored,e?.(jp.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=w,e&&e(jp.SUBSCRIBED);return}}).receive("error",p=>{this.state=Bu.errored,e?.(jp.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{e?.(jp.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this.state===Bu.joined&&e===Zw.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,r,n)}async httpSend(e,r,n={}){var i;if(r==null)return Promise.reject("Payload is required for httpSend()");const s={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(s.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:s,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:r,private:this.private}]})},c=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);if(c.status===202)return{success:!0};let u=c.statusText;try{const l=await c.json();u=l.error||l.message||u}catch{}return Promise.reject(new Error(u))}async send(e,r={}){var n,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:s,payload:o}=e,c={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(c.Authorization=`Bearer ${this.socket.accessTokenValue}`);const u={method:"POST",headers:c,body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o,private:this.private}]})};try{const l=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((i=l.body)===null||i===void 0?void 0:i.cancel()),l.ok?"ok":"error"}catch(l){return l.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,c,u;const l=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((u=(c=(o=this.params)===null||o===void 0?void 0:o.config)===null||c===void 0?void 0:c.broadcast)===null||u===void 0)&&u.ack)&&s("ok"),l.receive("ok",()=>s("ok")),l.receive("error",()=>s("error")),l.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Bu.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(CA.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(i=>{n=new QL(this,CA.leave,{},e),n.receive("ok",()=>{r(),i("ok")}).receive("timeout",()=>{r(),i("timed out")}).receive("error",()=>{i("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Bu.closed,this.bindings={}}async _fetchWithTimeout(e,r,n){const i=new AbortController,s=setTimeout(()=>i.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:i.signal}));return clearTimeout(s),o}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new QL(this,e,r,n);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>YBe){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var i,s;const o=e.toLocaleLowerCase(),{close:c,error:u,leave:l,join:d}=CA;if(n&&[c,u,l,d].indexOf(o)>=0&&n!==this._joinRef())return;let A=this._onMessage(o,r,n);if(r&&!A)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(p=>{var g,y,x;return((g=p.filter)===null||g===void 0?void 0:g.event)==="*"||((x=(y=p.filter)===null||y===void 0?void 0:y.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===o}).map(p=>p.callback(A,n)):(s=this.bindings[o])===null||s===void 0||s.filter(p=>{var g,y,x,w,E,T;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const C=p.id,N=(g=p.filter)===null||g===void 0?void 0:g.event;return C&&((y=r.ids)===null||y===void 0?void 0:y.includes(C))&&(N==="*"||N?.toLocaleLowerCase()===((x=r.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const C=(E=(w=p?.filter)===null||w===void 0?void 0:w.event)===null||E===void 0?void 0:E.toLocaleLowerCase();return C==="*"||C===((T=r?.event)===null||T===void 0?void 0:T.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof A=="object"&&"ids"in A){const g=A.data,{schema:y,table:x,commit_timestamp:w,type:E,errors:T}=g;A=Object.assign(Object.assign({},{schema:y,table:x,commit_timestamp:w,eventType:E,new:{},old:{},errors:T}),this._getPayloadRecords(g))}p.callback(A,n)})}_isClosed(){return this.state===Bu.closed}_isJoined(){return this.state===Bu.joined}_isJoining(){return this.state===Bu.joining}_isLeaving(){return this.state===Bu.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const i=e.toLocaleLowerCase(),s={type:i,filter:r,callback:n};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===n&&tb.isEqual(i.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}static isFilterValueEqual(e,r){return(e??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(CA.close,{},e)}_onError(e){this._on(CA.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Bu.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=sz(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=sz(e.columns,e.old_record)),r}}const VL=()=>{},rS={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},nPe=[1e3,2e3,5e3,1e4],iPe=1e4,sPe=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class aPe{constructor(e,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=DP,this.transport=null,this.heartbeatIntervalMs=rS.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=VL,this.ref=0,this.reconnectTimer=null,this.vsn=iz,this.logger=VL,this.conn=null,this.sendBuffer=[],this.serializer=new qBe,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=i=>i?(...s)=>i(...s):(...s)=>fetch(...s),!(!((n=r?.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${MP.websocket}`,this.httpEndpoint=wre(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=VBe.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case l0.connecting:return kv.Connecting;case l0.open:return kv.Open;case l0.closing:return kv.Closing;default:return kv.Closed}}isConnected(){return this.connectionState()===kv.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const n=`realtime:${e}`,i=this.getChannels().find(s=>s.topic===n);if(i)return i;{const s=new tb(`realtime:${e}`,r,this);return this.channels.push(s),s}}push(e){const{topic:r,event:n,payload:i,ref:s}=e,o=()=>{this.encode(e,c=>{var u;(u=this.conn)===null||u===void 0||u.send(c)})};this.log("push",`${r} ${n} (${s})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(WBe,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},rS.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply"&&r.ref&&r.ref===this.pendingHeartbeatRef){const l=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error",l)}catch(d){this.log("error","error in heartbeat callback",d)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:n,event:i,payload:s,ref:o}=r,c=o?`(${o})`:"",u=s.status||"";this.log("receive",`${u} ${n} ${i} ${c}`.trim(),s),this.channels.filter(l=>l._isMember(n)).forEach(l=>l._trigger(i,s,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===l0.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===l0.open||this.conn.readyState===l0.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e);try{this.heartbeatCallback("error")}catch(r){this.log("error","error in heartbeat callback",r)}}_triggerChanError(){this.channels.forEach(e=>e._trigger(CA.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",i=new URLSearchParams(r);return`${e}${n}${i}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([sPe],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r,n=!1;if(e)r=e,n=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(i){this.log("error","Error fetching access token from callback",i),r=this.accessTokenValue}else r=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(i=>{const s={access_token:r,version:KBe};r&&i.updateJoinPayload(s),i.joinedOnce&&i._isJoined()&&i._push(CA.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(r)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new xre(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},rS.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,n,i,s,o,c,u,l,d,f,A,p;switch(this.transport=(r=e?.transport)!==null&&r!==void 0?r:null,this.timeout=(n=e?.timeout)!==null&&n!==void 0?n:DP,this.heartbeatIntervalMs=(i=e?.heartbeatIntervalMs)!==null&&i!==void 0?i:rS.HEARTBEAT_INTERVAL,this.worker=(s=e?.worker)!==null&&s!==void 0?s:!1,this.accessToken=(o=e?.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(c=e?.heartbeatCallback)!==null&&c!==void 0?c:VL,this.vsn=(u=e?.vsn)!==null&&u!==void 0?u:iz,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=e?.reconnectAfterMs)!==null&&l!==void 0?l:(g=>nPe[g-1]||iPe),this.vsn){case GBe:this.encode=(d=e?.encode)!==null&&d!==void 0?d:((g,y)=>y(JSON.stringify(g))),this.decode=(f=e?.decode)!==null&&f!==void 0?f:((g,y)=>y(JSON.parse(g)));break;case yre:this.encode=(A=e?.encode)!==null&&A!==void 0?A:this.serializer.encode.bind(this.serializer),this.decode=(p=e?.decode)!==null&&p!==void 0?p:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}var HE=class extends Error{constructor(t,e){super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&e.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function oPe(t,e,r){const n=new URL(e,t);if(r)for(const[i,s]of Object.entries(r))s!==void 0&&n.searchParams.set(i,s);return n.toString()}async function lPe(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function cPe(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:i,body:s,headers:o}){const c=oPe(t.baseUrl,n,i),u=await lPe(t.auth),l=await e(c,{method:r,headers:{...s?{"Content-Type":"application/json"}:{},...u,...o},body:s?JSON.stringify(s):void 0}),d=await l.text(),f=(l.headers.get("content-type")||"").includes("application/json"),A=f&&d?JSON.parse(d):d;if(!l.ok){const p=f?A:void 0,g=p?.error;throw new HE(g?.message??`Request failed with status ${l.status}`,{status:l.status,icebergType:g?.type,icebergCode:g?.code,details:p})}return{status:l.status,headers:l.headers,data:A}}}}function nS(t){return t.join("")}var uPe=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:nS(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(t,e){const r={namespace:t.namespace,properties:e?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${nS(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${nS(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${nS(t.namespace)}`}),!0}catch(e){if(e instanceof HE&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(r){if(r instanceof HE&&r.status===409)return;throw r}}};function Xy(t){return t.join("")}var dPe=class{constructor(t,e="",r){this.client=t,this.prefix=e,this.accessDelegation=r}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Xy(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Xy(t.namespace)}/tables`,body:e,headers:r})).data.metadata}async updateTable(t,e){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Xy(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Xy(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String(e?.purge??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Xy(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Xy(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(r){if(r instanceof HE&&r.status===404)return!1;throw r}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(r){if(r instanceof HE&&r.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw r}}},hPe=class{constructor(t){let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const r=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=cPe({baseUrl:r,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=t.accessDelegation?.join(","),this.namespaceOps=new uPe(this.client,e),this.tableOps=new dPe(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},C5=class extends Error{constructor(t,e="storage",r,n){super(t),this.__isStorageError=!0,this.namespace=e,this.name=e==="vectors"?"StorageVectorsError":"StorageError",this.status=r,this.statusCode=n}};function j5(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var iS=class extends C5{constructor(t,e,r,n="storage"){super(t,n,e,r),this.name=n==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=e,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Ere=class extends C5{constructor(t,e,r="storage"){super(t,r),this.name=r==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=e}};const fPe=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),APe=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},UP=t=>{if(Array.isArray(t))return t.map(r=>UP(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const i=r.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[i]=UP(n)}),e},mPe=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function QE(t){"@babel/helpers - typeof";return QE=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},QE(t)}function pPe(t,e){if(QE(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(QE(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function gPe(t){var e=pPe(t,"string");return QE(e)=="symbol"?e:e+""}function vPe(t,e,r){return(e=gPe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function lz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function ws(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?lz(Object(r),!0).forEach(function(n){vPe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):lz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}const cz=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},yPe=async(t,e,r,n)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!r?.noResolveJson){const i=t,s=i.status||500;if(typeof i.json=="function")i.json().then(o=>{const c=o?.statusCode||o?.code||s+"";e(new iS(cz(o),s,c,n))}).catch(()=>{if(n==="vectors"){const o=s+"";e(new iS(i.statusText||`HTTP ${s} error`,s,o,n))}else{const o=s+"";e(new iS(i.statusText||`HTTP ${s} error`,s,o,n))}});else{const o=s+"";e(new iS(i.statusText||`HTTP ${s} error`,s,o,n))}}else e(new Ere(cz(t),t,n))},xPe=(t,e,r,n)=>{const i={method:t,headers:e?.headers||{}};return t==="GET"||t==="HEAD"||!n?ws(ws({},i),r):(APe(n)?(i.headers=ws({"Content-Type":"application/json"},e?.headers),i.body=JSON.stringify(n)):i.body=n,e?.duplex&&(i.duplex=e.duplex),ws(ws({},i),r))};async function Y1(t,e,r,n,i,s,o){return new Promise((c,u)=>{t(r,xPe(e,n,i,s)).then(l=>{if(!l.ok)throw l;if(n?.noResolveJson)return l;if(o==="vectors"){const d=l.headers.get("content-type");if(l.headers.get("content-length")==="0"||l.status===204)return{};if(!d||!d.includes("application/json"))return{}}return l.json()}).then(l=>c(l)).catch(l=>yPe(l,u,n,o))})}function _re(t="storage"){return{get:async(e,r,n,i)=>Y1(e,"GET",r,n,i,void 0,t),post:async(e,r,n,i,s)=>Y1(e,"POST",r,i,s,n,t),put:async(e,r,n,i,s)=>Y1(e,"PUT",r,i,s,n,t),head:async(e,r,n,i)=>Y1(e,"HEAD",r,ws(ws({},n),{},{noResolveJson:!0}),i,void 0,t),remove:async(e,r,n,i,s)=>Y1(e,"DELETE",r,i,s,n,t)}}const bPe=_re("storage"),{get:VE,post:SA,put:$P,head:wPe,remove:FM}=bPe,mf=_re("vectors");var p1=class{constructor(t,e={},r,n="storage"){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.fetch=fPe(r),this.namespace=n}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(t){var e=this;try{return{data:await t(),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(j5(r))return{data:null,error:r};throw r}}},EPe=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(j5(e))return{data:null,error:e};throw e}}};let Sre;Sre=Symbol.toStringTag;var _Pe=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[Sre]="BlobDownloadBuilder",this.promise=null}asStream(){return new EPe(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(j5(e))return{data:null,error:e};throw e}}};const SPe={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},uz={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var TPe=class extends p1{constructor(t,e={},r,n){super(t,e,n,"storage"),this.bucketId=r}async uploadOrUpdate(t,e,r,n){var i=this;return i.handleOperation(async()=>{let s;const o=ws(ws({},uz),n);let c=ws(ws({},i.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const u=o.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),u&&s.append("metadata",i.encodeMetadata(u)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.has("cacheControl")||s.append("cacheControl",o.cacheControl),u&&!s.has("metadata")&&s.append("metadata",i.encodeMetadata(u))):(s=r,c["cache-control"]=`max-age=${o.cacheControl}`,c["content-type"]=o.contentType,u&&(c["x-metadata"]=i.toBase64(i.encodeMetadata(u))),(typeof ReadableStream<"u"&&s instanceof ReadableStream||s&&typeof s=="object"&&"pipe"in s&&typeof s.pipe=="function")&&!o.duplex&&(o.duplex="half")),n?.headers&&(c=ws(ws({},c),n.headers));const l=i._removeEmptyFolders(e),d=i._getFinalPath(l),f=await(t=="PUT"?$P:SA)(i.fetch,`${i.url}/object/${d}`,s,ws({headers:c},o?.duplex?{duplex:o.duplex}:{}));return{path:l,id:f.Id,fullPath:f.Key}})}async upload(t,e,r){return this.uploadOrUpdate("POST",t,e,r)}async uploadToSignedUrl(t,e,r,n){var i=this;const s=i._removeEmptyFolders(t),o=i._getFinalPath(s),c=new URL(i.url+`/object/upload/sign/${o}`);return c.searchParams.set("token",e),i.handleOperation(async()=>{let u;const l=ws({upsert:uz.upsert},n),d=ws(ws({},i.headers),{"x-upsert":String(l.upsert)});return typeof Blob<"u"&&r instanceof Blob?(u=new FormData,u.append("cacheControl",l.cacheControl),u.append("",r)):typeof FormData<"u"&&r instanceof FormData?(u=r,u.append("cacheControl",l.cacheControl)):(u=r,d["cache-control"]=`max-age=${l.cacheControl}`,d["content-type"]=l.contentType),{path:s,fullPath:(await $P(i.fetch,c.toString(),u,{headers:d})).Key}})}async createSignedUploadUrl(t,e){var r=this;return r.handleOperation(async()=>{let n=r._getFinalPath(t);const i=ws({},r.headers);e?.upsert&&(i["x-upsert"]="true");const s=await SA(r.fetch,`${r.url}/object/upload/sign/${n}`,{},{headers:i}),o=new URL(r.url+s.url),c=o.searchParams.get("token");if(!c)throw new C5("No token returned by API");return{signedUrl:o.toString(),path:t,token:c}})}async update(t,e,r){return this.uploadOrUpdate("PUT",t,e,r)}async move(t,e,r){var n=this;return n.handleOperation(async()=>await SA(n.fetch,`${n.url}/object/move`,{bucketId:n.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r?.destinationBucket},{headers:n.headers}))}async copy(t,e,r){var n=this;return n.handleOperation(async()=>({path:(await SA(n.fetch,`${n.url}/object/copy`,{bucketId:n.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r?.destinationBucket},{headers:n.headers})).Key}))}async createSignedUrl(t,e,r){var n=this;return n.handleOperation(async()=>{let i=n._getFinalPath(t),s=await SA(n.fetch,`${n.url}/object/sign/${i}`,ws({expiresIn:e},r?.transform?{transform:r.transform}:{}),{headers:n.headers});const o=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{signedUrl:encodeURI(`${n.url}${s.signedURL}${o}`)}})}async createSignedUrls(t,e,r){var n=this;return n.handleOperation(async()=>{const i=await SA(n.fetch,`${n.url}/object/sign/${n.bucketId}`,{expiresIn:e,paths:t},{headers:n.headers}),s=r?.download?`&download=${r.download===!0?"":r.download}`:"";return i.map(o=>ws(ws({},o),{},{signedUrl:o.signedURL?encodeURI(`${n.url}${o.signedURL}${s}`):null}))})}download(t,e){const r=typeof e?.transform<"u"?"render/image/authenticated":"object",n=this.transformOptsToQueryString(e?.transform||{}),i=n?`?${n}`:"",s=this._getFinalPath(t),o=()=>VE(this.fetch,`${this.url}/${r}/${s}${i}`,{headers:this.headers,noResolveJson:!0});return new _Pe(o,this.shouldThrowOnError)}async info(t){var e=this;const r=e._getFinalPath(t);return e.handleOperation(async()=>UP(await VE(e.fetch,`${e.url}/object/info/${r}`,{headers:e.headers})))}async exists(t){var e=this;const r=e._getFinalPath(t);try{return await wPe(e.fetch,`${e.url}/object/${r}`,{headers:e.headers}),{data:!0,error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(j5(n)&&n instanceof Ere){const i=n.originalError;if([400,404].includes(i?.status))return{data:!1,error:n}}throw n}}getPublicUrl(t,e){const r=this._getFinalPath(t),n=[],i=e?.download?`download=${e.download===!0?"":e.download}`:"";i!==""&&n.push(i);const s=typeof e?.transform<"u"?"render/image":"object",o=this.transformOptsToQueryString(e?.transform||{});o!==""&&n.push(o);let c=n.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${s}/public/${r}${c}`)}}}async remove(t){var e=this;return e.handleOperation(async()=>await FM(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}))}async list(t,e,r){var n=this;return n.handleOperation(async()=>{const i=ws(ws(ws({},SPe),e),{},{prefix:t||""});return await SA(n.fetch,`${n.url}/object/list/${n.bucketId}`,i,{headers:n.headers},r)})}async listV2(t,e){var r=this;return r.handleOperation(async()=>{const n=ws({},t);return await SA(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,n,{headers:r.headers},e)})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const CPe="2.93.3",s_={"X-Client-Info":`storage-js/${CPe}`};var jPe=class extends p1{constructor(t,e={},r,n){const i=new URL(t);n?.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase."));const s=i.href.replace(/\/$/,""),o=ws(ws({},s_),e);super(s,o,r,"storage")}async listBuckets(t){var e=this;return e.handleOperation(async()=>{const r=e.listBucketOptionsToQueryString(t);return await VE(e.fetch,`${e.url}/bucket${r}`,{headers:e.headers})})}async getBucket(t){var e=this;return e.handleOperation(async()=>await VE(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}))}async createBucket(t,e={public:!1}){var r=this;return r.handleOperation(async()=>await SA(r.fetch,`${r.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:r.headers}))}async updateBucket(t,e){var r=this;return r.handleOperation(async()=>await $P(r.fetch,`${r.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:r.headers}))}async emptyBucket(t){var e=this;return e.handleOperation(async()=>await SA(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}))}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await FM(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}))}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},NPe=class extends p1{constructor(t,e={},r){const n=t.replace(/\/$/,""),i=ws(ws({},s_),e);super(n,i,r,"storage")}async createBucket(t){var e=this;return e.handleOperation(async()=>await SA(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}))}async listBuckets(t){var e=this;return e.handleOperation(async()=>{const r=new URLSearchParams;t?.limit!==void 0&&r.set("limit",t.limit.toString()),t?.offset!==void 0&&r.set("offset",t.offset.toString()),t?.sortColumn&&r.set("sortColumn",t.sortColumn),t?.sortOrder&&r.set("sortOrder",t.sortOrder),t?.search&&r.set("search",t.search);const n=r.toString(),i=n?`${e.url}/bucket?${n}`:`${e.url}/bucket`;return await VE(e.fetch,i,{headers:e.headers})})}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await FM(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}))}from(t){var e=this;if(!mPe(t))throw new C5("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new hPe({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(r,{get(i,s){const o=i[s];return typeof o!="function"?o:async(...c)=>{try{return{data:await o.apply(i,c),error:null}}catch(u){if(n)throw u;return{data:null,error:u}}}}})}},kPe=class extends p1{constructor(t,e={},r){const n=t.replace(/\/$/,""),i=ws(ws({},s_),{},{"Content-Type":"application/json"},e);super(n,i,r,"vectors")}async createIndex(t){var e=this;return e.handleOperation(async()=>await mf.post(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{})}async getIndex(t,e){var r=this;return r.handleOperation(async()=>await mf.post(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:r.headers}))}async listIndexes(t){var e=this;return e.handleOperation(async()=>await mf.post(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}))}async deleteIndex(t,e){var r=this;return r.handleOperation(async()=>await mf.post(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:r.headers})||{})}},IPe=class extends p1{constructor(t,e={},r){const n=t.replace(/\/$/,""),i=ws(ws({},s_),{},{"Content-Type":"application/json"},e);super(n,i,r,"vectors")}async putVectors(t){var e=this;if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return e.handleOperation(async()=>await mf.post(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{})}async getVectors(t){var e=this;return e.handleOperation(async()=>await mf.post(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}))}async listVectors(t){var e=this;if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return e.handleOperation(async()=>await mf.post(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}))}async queryVectors(t){var e=this;return e.handleOperation(async()=>await mf.post(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}))}async deleteVectors(t){var e=this;if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return e.handleOperation(async()=>await mf.post(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{})}},LPe=class extends p1{constructor(t,e={},r){const n=t.replace(/\/$/,""),i=ws(ws({},s_),{},{"Content-Type":"application/json"},e);super(n,i,r,"vectors")}async createBucket(t){var e=this;return e.handleOperation(async()=>await mf.post(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{})}async getBucket(t){var e=this;return e.handleOperation(async()=>await mf.post(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}))}async listBuckets(t={}){var e=this;return e.handleOperation(async()=>await mf.post(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}))}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await mf.post(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{})}},BPe=class extends LPe{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new PPe(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,r=this;return e().call(r,t)}async getBucket(t){var e=()=>super.getBucket,r=this;return e().call(r,t)}async listBuckets(t={}){var e=()=>super.listBuckets,r=this;return e().call(r,t)}async deleteBucket(t){var e=()=>super.deleteBucket,r=this;return e().call(r,t)}},PPe=class extends kPe{constructor(t,e,r,n){super(t,e,n),this.vectorBucketName=r}async createIndex(t){var e=()=>super.createIndex,r=this;return e().call(r,ws(ws({},t),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,r=this;return e().call(r,ws(ws({},t),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,r=this;return e().call(r,r.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,r=this;return e().call(r,r.vectorBucketName,t)}index(t){return new OPe(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},OPe=class extends IPe{constructor(t,e,r,n,i){super(t,e,i),this.vectorBucketName=r,this.indexName=n}async putVectors(t){var e=()=>super.putVectors,r=this;return e().call(r,ws(ws({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(t){var e=()=>super.getVectors,r=this;return e().call(r,ws(ws({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,r=this;return e().call(r,ws(ws({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,r=this;return e().call(r,ws(ws({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,r=this;return e().call(r,ws(ws({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},RPe=class extends jPe{constructor(t,e={},r,n){super(t,e,r,n)}from(t){return new TPe(this.url,this.headers,t,this.fetch)}get vectors(){return new BPe(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new NPe(this.url+"/iceberg",this.headers,this.fetch)}};const Tre="2.93.3",yx=30*1e3,HP=3,zL=HP*yx,DPe="http://localhost:9999",MPe="supabase.auth.token",FPe={"X-Client-Info":`gotrue-js/${Tre}`},QP="X-Supabase-Api-Version",Cre={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},UPe=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,$Pe=600*1e3;class zE extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function Ui(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class HPe extends zE{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function QPe(t){return Ui(t)&&t.name==="AuthApiError"}class Iv extends zE{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class hg extends zE{constructor(e,r,n,i){super(e,n,i),this.name=r,this.status=n}}class rf extends hg{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function KL(t){return Ui(t)&&t.name==="AuthSessionMissingError"}class Zy extends hg{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class sS extends hg{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class aS extends hg{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function VPe(t){return Ui(t)&&t.name==="AuthImplicitGrantRedirectError"}class dz extends hg{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class zPe extends hg{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class VP extends hg{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function GL(t){return Ui(t)&&t.name==="AuthRetryableFetchError"}class hz extends hg{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class zP extends hg{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const kj="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),fz=` 	
\r=`.split(""),KPe=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<fz.length;e+=1)t[fz[e].charCodeAt(0)]=-2;for(let e=0;e<kj.length;e+=1)t[kj[e].charCodeAt(0)]=e;return t})();function Az(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(kj[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(kj[n]),e.queuedBits-=6}}function jre(t,e,r){const n=KPe[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function mz(t){const e=[],r=o=>{e.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=o=>{YPe(o,n,r)};for(let o=0;o<t.length;o+=1)jre(t.charCodeAt(o),i,s);return e.join("")}function GPe(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function WPe(t,e){for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);if(n>55295&&n<=56319){const i=(n-55296)*1024&65535;n=(t.charCodeAt(r+1)-56320&65535|i)+65536,r+=1}GPe(n,e)}}function YPe(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let n=1;n<6;n+=1)if((t>>7-n&1)===0){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function hb(t){const e=[],r={queue:0,queuedBits:0},n=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)jre(t.charCodeAt(i),r,n);return new Uint8Array(e)}function qPe(t){const e=[];return WPe(t,r=>e.push(r)),new Uint8Array(e)}function Uv(t){const e=[],r={queue:0,queuedBits:0},n=i=>{e.push(i)};return t.forEach(i=>Az(i,r,n)),Az(null,r,n),e.join("")}function XPe(t){return Math.round(Date.now()/1e3)+t}function ZPe(){return Symbol("auth-callback")}const Od=()=>typeof window<"u"&&typeof document<"u",ov={tested:!1,writable:!1},Nre=()=>{if(!Od())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ov.tested)return ov.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),ov.tested=!0,ov.writable=!0}catch{ov.tested=!0,ov.writable=!1}return ov.writable};function JPe(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return r.searchParams.forEach((n,i)=>{e[i]=n}),e}const kre=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),eOe=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",xx=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},lv=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Ld=async(t,e)=>{await t.removeItem(e)};class N5{constructor(){this.promise=new N5.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}N5.promiseConstructor=Promise;function oS(t){const e=t.split(".");if(e.length!==3)throw new zP("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!UPe.test(e[n]))throw new zP("JWT not in base64url format");return{header:JSON.parse(mz(e[0])),payload:JSON.parse(mz(e[1])),signature:hb(e[2]),raw:{header:e[0],payload:e[1]}}}async function tOe(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function rOe(t,e){return new Promise((n,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await t(s);if(!e(s,null,o)){n(o);return}}catch(o){if(!e(s,o)){i(o);return}}})()})}function nOe(t){return("0"+t.toString(16)).substr(-2)}function iOe(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let i="";for(let s=0;s<56;s++)i+=r.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(e),Array.from(e,nOe).join("")}async function sOe(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),i=new Uint8Array(n);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function aOe(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await sOe(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Jy(t,e,r=!1){const n=iOe();let i=n;r&&(i+="/PASSWORD_RECOVERY"),await xx(t,`${e}-code-verifier`,i);const s=await aOe(n);return[s,n===s?"plain":"s256"]}const oOe=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function lOe(t){const e=t.headers.get(QP);if(!e||!e.match(oOe))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function cOe(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function uOe(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const dOe=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ex(t){if(!dOe.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function WL(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function hOe(t,e){return new Proxy(t,{get:(r,n,i)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const s=n.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)"||s==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,i)}return!e.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(r,n,i)}})}function pz(t){return JSON.parse(JSON.stringify(t))}const yv=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),fOe=[502,503,504];async function gz(t){var e;if(!eOe(t))throw new VP(yv(t),0);if(fOe.includes(t.status))throw new VP(yv(t),t.status);let r;try{r=await t.json()}catch(s){throw new Iv(yv(s),s)}let n;const i=lOe(t);if(i&&i.getTime()>=Cre["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new hz(yv(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new rf}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new hz(yv(r),t.status,r.weak_password.reasons);throw new HPe(yv(r),t.status||500,n)}const AOe=(t,e,r,n)=>{const i={method:t,headers:e?.headers||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),r))};async function ps(t,e,r,n){var i;const s=Object.assign({},n?.headers);s[QP]||(s[QP]=Cre["2024-01-01"].name),n?.jwt&&(s.Authorization=`Bearer ${n.jwt}`);const o=(i=n?.query)!==null&&i!==void 0?i:{};n?.redirectTo&&(o.redirect_to=n.redirectTo);const c=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",u=await mOe(t,e,r+c,{headers:s,noResolveJson:n?.noResolveJson},{},n?.body);return n?.xform?n?.xform(u):{data:Object.assign({},u),error:null}}async function mOe(t,e,r,n,i,s){const o=AOe(e,n,i,s);let c;try{c=await t(r,Object.assign({},o))}catch(u){throw console.error(u),new VP(yv(u),0)}if(c.ok||await gz(c),n?.noResolveJson)return c;try{return await c.json()}catch(u){await gz(u)}}function vA(t){var e;let r=null;vOe(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=XPe(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function vz(t){const e=vA(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function A0(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function pOe(t){return{data:t,error:null}}function gOe(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:i,verification_type:s}=t,o=T5(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),c={action_link:e,email_otp:r,hashed_token:n,redirect_to:i,verification_type:s},u=Object.assign({},o);return{data:{properties:c,user:u},error:null}}function yz(t){return t}function vOe(t){return t.access_token&&t.refresh_token&&t.expires_in}const YL=["global","local","others"];class yOe{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=kre(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,r=YL[0]){if(YL.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${YL.join(", ")}`);try{return await ps(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Ui(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await ps(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:A0})}catch(n){if(Ui(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=T5(e,["options"]),i=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(i.new_email=n?.newEmail,delete i.newEmail),await ps(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:gOe,redirectTo:r?.redirectTo})}catch(r){if(Ui(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await ps(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:A0})}catch(r){if(Ui(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,i,s,o,c,u;try{const l={nextPage:null,lastPage:0,total:0},d=await ps(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e?.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(s=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:yz});if(d.error)throw d.error;const f=await d.json(),A=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(u=(c=d.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&u!==void 0?u:[];return p.length>0&&(p.forEach(g=>{const y=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(g.split(";")[1].split("=")[1]);l[`${x}Page`]=y}),l.total=parseInt(A)),{data:Object.assign(Object.assign({},f),l),error:null}}catch(l){if(Ui(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){ex(e);try{return await ps(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:A0})}catch(r){if(Ui(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){ex(e);try{return await ps(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:A0})}catch(n){if(Ui(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){ex(e);try{return await ps(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:A0})}catch(n){if(Ui(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){ex(e.userId);try{const{data:r,error:n}=await ps(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:r,error:n}}catch(r){if(Ui(r))return{data:null,error:r};throw r}}async _deleteFactor(e){ex(e.userId),ex(e.id);try{return{data:await ps(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(Ui(r))return{data:null,error:r};throw r}}async _listOAuthClients(e){var r,n,i,s,o,c,u;try{const l={nextPage:null,lastPage:0,total:0},d=await ps(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e?.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(s=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:yz});if(d.error)throw d.error;const f=await d.json(),A=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(u=(c=d.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&u!==void 0?u:[];return p.length>0&&(p.forEach(g=>{const y=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(g.split(";")[1].split("=")[1]);l[`${x}Page`]=y}),l.total=parseInt(A)),{data:Object.assign(Object.assign({},f),l),error:null}}catch(l){if(Ui(l))return{data:{clients:[]},error:l};throw l}}async _createOAuthClient(e){try{return await ps(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Ui(r))return{data:null,error:r};throw r}}async _getOAuthClient(e){try{return await ps(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Ui(r))return{data:null,error:r};throw r}}async _updateOAuthClient(e,r){try{return await ps(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ui(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(e){try{return await ps(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Ui(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(e){try{return await ps(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Ui(r))return{data:null,error:r};throw r}}}function xz(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}const tx={debug:!!(globalThis&&Nre()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Ire extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class xOe extends Ire{}async function bOe(t,e,r){tx.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),tx.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async i=>{if(i){tx.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await r()}finally{tx.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw tx.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new xOe(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(tx.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function wOe(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Lre(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function EOe(t){return parseInt(t,16)}function _Oe(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,n=>n.toString(16).padStart(2,"0")).join("")}function SOe(t){var e;const{chainId:r,domain:n,expirationTime:i,issuedAt:s=new Date,nonce:o,notBefore:c,requestId:u,resources:l,scheme:d,uri:f,version:A}=t;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!f)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(A!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${A}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const p=Lre(t.address),g=d?`${d}://${n}`:n,y=t.statement?`${t.statement}
`:"",x=`${g} wants you to sign in with your Ethereum account:
${p}

${y}`;let w=`URI: ${f}
Version: ${A}
Chain ID: ${r}${o?`
Nonce: ${o}`:""}
Issued At: ${s.toISOString()}`;if(i&&(w+=`
Expiration Time: ${i.toISOString()}`),c&&(w+=`
Not Before: ${c.toISOString()}`),u&&(w+=`
Request ID: ${u}`),l){let E=`
Resources:`;for(const T of l){if(!T||typeof T!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${T}`);E+=`
- ${T}`}w+=E}return`${x}
${w}`}class fu extends Error{constructor({message:e,code:r,cause:n,name:i}){var s;super(e,{cause:n}),this.__isWebAuthnError=!0,this.name=(s=i??(n instanceof Error?n.name:void 0))!==null&&s!==void 0?s:"Unknown Error",this.code=r}}class Ij extends fu{constructor(e,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:e}),this.name="WebAuthnUnknownError",this.originalError=r}}function TOe({error:t,options:e}){var r,n,i;const{publicKey:s}=e;if(!s)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new fu({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((r=s.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new fu({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((n=s.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new fu({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((i=s.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new fu({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new fu({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new fu({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return s.pubKeyCredParams.filter(c=>c.type==="public-key").length===0?new fu({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new fu({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const o=window.location.hostname;if(Bre(o)){if(s.rp.id!==o)return new fu({message:`The RP ID "${s.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new fu({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new fu({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new fu({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new fu({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function COe({error:t,options:e}){const{publicKey:r}=e;if(!r)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new fu({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new fu({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const n=window.location.hostname;if(Bre(n)){if(r.rpId!==n)return new fu({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new fu({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new fu({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new fu({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class jOe{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const NOe=new jOe;function kOe(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:r,excludeCredentials:n}=t,i=T5(t,["challenge","user","excludeCredentials"]),s=hb(e).buffer,o=Object.assign(Object.assign({},r),{id:hb(r.id).buffer}),c=Object.assign(Object.assign({},i),{challenge:s,user:o});if(n&&n.length>0){c.excludeCredentials=new Array(n.length);for(let u=0;u<n.length;u++){const l=n[u];c.excludeCredentials[u]=Object.assign(Object.assign({},l),{id:hb(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return c}function IOe(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:r}=t,n=T5(t,["challenge","allowCredentials"]),i=hb(e).buffer,s=Object.assign(Object.assign({},n),{challenge:i});if(r&&r.length>0){s.allowCredentials=new Array(r.length);for(let o=0;o<r.length;o++){const c=r[o];s.allowCredentials[o]=Object.assign(Object.assign({},c),{id:hb(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return s}function LOe(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t;return{id:t.id,rawId:t.id,response:{attestationObject:Uv(new Uint8Array(t.response.attestationObject)),clientDataJSON:Uv(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function BOe(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t,n=t.getClientExtensionResults(),i=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Uv(new Uint8Array(i.authenticatorData)),clientDataJSON:Uv(new Uint8Array(i.clientDataJSON)),signature:Uv(new Uint8Array(i.signature)),userHandle:i.userHandle?Uv(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Bre(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function bz(){var t,e;return!!(Od()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function POe(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Ij("Browser returned unexpected credential type",e)}:{data:null,error:new Ij("Empty credential response",e)}}catch(e){return{data:null,error:TOe({error:e,options:t})}}}async function OOe(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Ij("Browser returned unexpected credential type",e)}:{data:null,error:new Ij("Empty credential response",e)}}catch(e){return{data:null,error:COe({error:e,options:t})}}}const ROe={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},DOe={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Lj(...t){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),r=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),n={};for(const i of t)if(i)for(const s in i){const o=i[s];if(o!==void 0)if(Array.isArray(o))n[s]=o;else if(r(o))n[s]=o;else if(e(o)){const c=n[s];e(c)?n[s]=Lj(c,o):n[s]=Lj(o)}else n[s]=o}return n}function MOe(t,e){return Lj(ROe,t,e||{})}function FOe(t,e){return Lj(DOe,t,e||{})}class UOe{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:r,friendlyName:n,signal:i},s){var o;try{const{data:c,error:u}=await this.client.mfa.challenge({factorId:e,webauthn:r});if(!c)return{data:null,error:u};const l=i??NOe.createNewAbortSignal();if(c.webauthn.type==="create"){const{user:d}=c.webauthn.credential_options.publicKey;if(!d.name){const f=n;if(f)d.name=`${d.id}:${f}`;else{const p=(await this.client.getUser()).data.user,g=((o=p?.user_metadata)===null||o===void 0?void 0:o.name)||p?.email||p?.id||"User";d.name=`${d.id}:${g}`}}d.displayName||(d.displayName=d.name)}switch(c.webauthn.type){case"create":{const d=MOe(c.webauthn.credential_options.publicKey,s?.create),{data:f,error:A}=await POe({publicKey:d,signal:l});return f?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:f}},error:null}:{data:null,error:A}}case"request":{const d=FOe(c.webauthn.credential_options.publicKey,s?.request),{data:f,error:A}=await OOe(Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:d,signal:l}));return f?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:f}},error:null}:{data:null,error:A}}}}catch(c){return Ui(c)?{data:null,error:c}:{data:null,error:new Iv("Unexpected error in challenge",c)}}}async _verify({challengeId:e,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:e,webauthn:n})}async _authenticate({factorId:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},s){if(!r)return{data:null,error:new zE("rpId is required for WebAuthn authentication")};try{if(!bz())return{data:null,error:new Iv("Browser does not support WebAuthn",null)};const{data:o,error:c}=await this.challenge({factorId:e,webauthn:{rpId:r,rpOrigins:n},signal:i},{request:s});if(!o)return{data:null,error:c};const{webauthn:u}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:u.type,rpId:r,rpOrigins:n,credential_response:u.credential_response}})}catch(o){return Ui(o)?{data:null,error:o}:{data:null,error:new Iv("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},s){if(!r)return{data:null,error:new zE("rpId is required for WebAuthn registration")};try{if(!bz())return{data:null,error:new Iv("Browser does not support WebAuthn",null)};const{data:o,error:c}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(d=>{var f;return(f=d.data)===null||f===void 0?void 0:f.all.find(A=>A.factor_type==="webauthn"&&A.friendly_name===e&&A.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d?.id}):void 0),{data:null,error:c};const{data:u,error:l}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:i},{create:s});return u?this._verify({factorId:o.id,challengeId:u.challengeId,webauthn:{rpId:r,rpOrigins:n,type:u.webauthn.type,credential_response:u.webauthn.credential_response}}):{data:null,error:l}}catch(o){return Ui(o)?{data:null,error:o}:{data:null,error:new Iv("Unexpected error in register",o)}}}}wOe();const $Oe={url:DPe,storageKey:MPe,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:FPe,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function wz(t,e,r){return await r()}const rx={};class KE{get jwks(){var e,r;return(r=(e=rx[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){rx[this.storageKey]=Object.assign(Object.assign({},rx[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=rx[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){rx[this.storageKey]=Object.assign(Object.assign({},rx[this.storageKey]),{cachedAt:e})}constructor(e){var r,n,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const s=Object.assign(Object.assign({},$Oe),e);if(this.storageKey=s.storageKey,this.instanceID=(r=KE.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,KE.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.instanceID>0&&Od()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=s.persistSession,this.autoRefreshToken=s.autoRefreshToken,this.admin=new yOe({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=kre(s.fetch),this.lock=s.lock||wz,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,this.throwOnError=s.throwOnError,this.lockAcquireTimeout=s.lockAcquireTimeout,s.lock?this.lock=s.lock:this.persistSession&&Od()&&(!((n=globalThis?.navigator)===null||n===void 0)&&n.locks)?this.lock=bOe:this.lock=wz,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new UOe(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:Nre()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=xz(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=xz(this.memoryStorage)),Od()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o);try{await this._notifyAllSubscribers(o.data.event,o.data.session,!1)}catch(c){this._debug("#broadcastChannel","error",c)}})}this.initialize().catch(o=>{this._debug("#initialize()","error",o)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Tre}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let r={},n="none";if(Od()&&(r=JPe(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),Od()&&this.detectSessionInUrl&&n!=="none"){const{data:i,error:s}=await this._getSessionFromURL(r,n);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),VPe(s)){const u=(e=s.details)===null||e===void 0?void 0:e.code;if(u==="identity_already_exists"||u==="identity_not_found"||u==="single_identity_not_deletable")return{error:s}}return{error:s}}const{session:o,redirectType:c}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",c),await this._saveSession(o),setTimeout(async()=>{c==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Ui(r)?this._returnResult({error:r}):this._returnResult({error:new Iv("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,i;try{const s=await ps(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e?.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(i=e?.options)===null||i===void 0?void 0:i.captchaToken}},xform:vA}),{data:o,error:c}=s;if(c||!o)return this._returnResult({data:{user:null,session:null},error:c});const u=o.session,l=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",u)),this._returnResult({data:{user:l,session:u},error:null})}catch(s){if(Ui(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signUp(e){var r,n,i;try{let s;if("email"in e){const{email:d,password:f,options:A}=e;let p=null,g=null;this.flowType==="pkce"&&([p,g]=await Jy(this.storage,this.storageKey)),s=await ps(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:A?.emailRedirectTo,body:{email:d,password:f,data:(r=A?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:A?.captchaToken},code_challenge:p,code_challenge_method:g},xform:vA})}else if("phone"in e){const{phone:d,password:f,options:A}=e;s=await ps(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(n=A?.data)!==null&&n!==void 0?n:{},channel:(i=A?.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:A?.captchaToken}},xform:vA})}else throw new sS("You must provide either an email or phone number and a password");const{data:o,error:c}=s;if(c||!o)return await Ld(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:c});const u=o.session,l=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",u)),this._returnResult({data:{user:l,session:u},error:null})}catch(s){if(await Ld(this.storage,`${this.storageKey}-code-verifier`),Ui(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithPassword(e){try{let r;if("email"in e){const{email:s,password:o,options:c}=e;r=await ps(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:vz})}else if("phone"in e){const{phone:s,password:o,options:c}=e;r=await ps(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:vz})}else throw new sS("You must provide either an email or phone number and a password");const{data:n,error:i}=r;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!n||!n.session||!n.user){const s=new Zy;return this._returnResult({data:{user:null,session:null},error:s})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i})}catch(r){if(Ui(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(e){var r,n,i,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;switch(r){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(e){var r,n,i,s,o,c,u,l,d,f,A;let p,g;if("message"in e)p=e.message,g=e.signature;else{const{chain:y,wallet:x,statement:w,options:E}=e;let T;if(Od())if(typeof x=="object")T=x;else{const Y=window;if("ethereum"in Y&&typeof Y.ethereum=="object"&&"request"in Y.ethereum&&typeof Y.ethereum.request=="function")T=Y.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!E?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");T=x}const C=new URL((r=E?.url)!==null&&r!==void 0?r:window.location.href),N=await T.request({method:"eth_requestAccounts"}).then(Y=>Y).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!N||N.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const I=Lre(N[0]);let U=(n=E?.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!U){const Y=await T.request({method:"eth_chainId"});U=EOe(Y)}const K={domain:C.host,address:I,statement:w,uri:C.href,version:"1",chainId:U,nonce:(i=E?.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(o=(s=E?.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(c=E?.signInWithEthereum)===null||c===void 0?void 0:c.expirationTime,notBefore:(u=E?.signInWithEthereum)===null||u===void 0?void 0:u.notBefore,requestId:(l=E?.signInWithEthereum)===null||l===void 0?void 0:l.requestId,resources:(d=E?.signInWithEthereum)===null||d===void 0?void 0:d.resources};p=SOe(K),g=await T.request({method:"personal_sign",params:[_Oe(p),I]})}try{const{data:y,error:x}=await ps(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:g},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(A=e.options)===null||A===void 0?void 0:A.captchaToken}}:null),xform:vA});if(x)throw x;if(!y||!y.session||!y.user){const w=new Zy;return this._returnResult({data:{user:null,session:null},error:w})}return y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),this._returnResult({data:Object.assign({},y),error:x})}catch(y){if(Ui(y))return this._returnResult({data:{user:null,session:null},error:y});throw y}}async signInWithSolana(e){var r,n,i,s,o,c,u,l,d,f,A,p;let g,y;if("message"in e)g=e.message,y=e.signature;else{const{chain:x,wallet:w,statement:E,options:T}=e;let C;if(Od())if(typeof w=="object")C=w;else{const I=window;if("solana"in I&&typeof I.solana=="object"&&("signIn"in I.solana&&typeof I.solana.signIn=="function"||"signMessage"in I.solana&&typeof I.solana.signMessage=="function"))C=I.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!T?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");C=w}const N=new URL((r=T?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in C&&C.signIn){const I=await C.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},T?.signInWithSolana),{version:"1",domain:N.host,uri:N.href}),E?{statement:E}:null));let U;if(Array.isArray(I)&&I[0]&&typeof I[0]=="object")U=I[0];else if(I&&typeof I=="object"&&"signedMessage"in I&&"signature"in I)U=I;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in U&&"signature"in U&&(typeof U.signedMessage=="string"||U.signedMessage instanceof Uint8Array)&&U.signature instanceof Uint8Array)g=typeof U.signedMessage=="string"?U.signedMessage:new TextDecoder().decode(U.signedMessage),y=U.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in C)||typeof C.signMessage!="function"||!("publicKey"in C)||typeof C!="object"||!C.publicKey||!("toBase58"in C.publicKey)||typeof C.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${N.host} wants you to sign in with your Solana account:`,C.publicKey.toBase58(),...E?["",E,""]:[""],"Version: 1",`URI: ${N.href}`,`Issued At: ${(i=(n=T?.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=T?.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${T.signInWithSolana.notBefore}`]:[],...!((o=T?.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${T.signInWithSolana.expirationTime}`]:[],...!((c=T?.signInWithSolana)===null||c===void 0)&&c.chainId?[`Chain ID: ${T.signInWithSolana.chainId}`]:[],...!((u=T?.signInWithSolana)===null||u===void 0)&&u.nonce?[`Nonce: ${T.signInWithSolana.nonce}`]:[],...!((l=T?.signInWithSolana)===null||l===void 0)&&l.requestId?[`Request ID: ${T.signInWithSolana.requestId}`]:[],...!((f=(d=T?.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||f===void 0)&&f.length?["Resources",...T.signInWithSolana.resources.map(U=>`- ${U}`)]:[]].join(`
`);const I=await C.signMessage(new TextEncoder().encode(g),"utf8");if(!I||!(I instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=I}}try{const{data:x,error:w}=await ps(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:Uv(y)},!((A=e.options)===null||A===void 0)&&A.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:vA});if(w)throw w;if(!x||!x.session||!x.user){const E=new Zy;return this._returnResult({data:{user:null,session:null},error:E})}return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),this._returnResult({data:Object.assign({},x),error:w})}catch(x){if(Ui(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async _exchangeCodeForSession(e){const r=await lv(this.storage,`${this.storageKey}-code-verifier`),[n,i]=(r??"").split("/");try{if(!n&&this.flowType==="pkce")throw new zPe;const{data:s,error:o}=await ps(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:vA});if(await Ld(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!s||!s.session||!s.user){const c=new Zy;return this._returnResult({data:{user:null,session:null,redirectType:null},error:c})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:o})}catch(s){if(await Ld(this.storage,`${this.storageKey}-code-verifier`),Ui(s))return this._returnResult({data:{user:null,session:null,redirectType:null},error:s});throw s}}async signInWithIdToken(e){try{const{options:r,provider:n,token:i,access_token:s,nonce:o}=e,c=await ps(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:vA}),{data:u,error:l}=c;if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!u||!u.session||!u.user){const d=new Zy;return this._returnResult({data:{user:null,session:null},error:d})}return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),this._returnResult({data:u,error:l})}catch(r){if(Ui(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(e){var r,n,i,s,o;try{if("email"in e){const{email:c,options:u}=e;let l=null,d=null;this.flowType==="pkce"&&([l,d]=await Jy(this.storage,this.storageKey));const{error:f}=await ps(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(r=u?.data)!==null&&r!==void 0?r:{},create_user:(n=u?.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:u?.captchaToken},code_challenge:l,code_challenge_method:d},redirectTo:u?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}if("phone"in e){const{phone:c,options:u}=e,{data:l,error:d}=await ps(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(i=u?.data)!==null&&i!==void 0?i:{},create_user:(s=u?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:u?.captchaToken},channel:(o=u?.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:l?.message_id},error:d})}throw new sS("You must provide either an email or phone number.")}catch(c){if(await Ld(this.storage,`${this.storageKey}-code-verifier`),Ui(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async verifyOtp(e){var r,n;try{let i,s;"options"in e&&(i=(r=e.options)===null||r===void 0?void 0:r.redirectTo,s=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:c}=await ps(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:vA});if(c)throw c;if(!o)throw new Error("An error occurred on token verification.");const u=o.session,l=o.user;return u?.access_token&&(await this._saveSession(u),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",u)),this._returnResult({data:{user:l,session:u},error:null})}catch(i){if(Ui(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(e){var r,n,i,s,o;try{let c=null,u=null;this.flowType==="pkce"&&([c,u]=await Jy(this.storage,this.storageKey));const l=await ps(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=e?.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:c,code_challenge_method:u}),headers:this.headers,xform:pOe});return!((s=l.data)===null||s===void 0)&&s.url&&Od()&&!(!((o=e.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(l.data.url),this._returnResult(l)}catch(c){if(await Ld(this.storage,`${this.storageKey}-code-verifier`),Ui(c))return this._returnResult({data:null,error:c});throw c}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new rf;const{error:i}=await ps(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(e){if(Ui(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:i,options:s}=e,{error:o}=await ps(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:s?.captchaToken}},redirectTo:s?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in e){const{phone:n,type:i,options:s}=e,{data:o,error:c}=await ps(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:s?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o?.message_id},error:c})}throw new sS("You must provide either an email or phone number and a type")}catch(r){if(Ui(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await lv(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<zL:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const o=await lv(this.userStorage,this.storageKey+"-user");o?.user?e.user=o.user:e.user=WL()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};e.user=hOe(e.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?this._returnResult({data:{session:null},error:s}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(e){try{return e?await ps(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:A0}):await this._useSession(async r=>{var n,i,s;const{data:o,error:c}=r;if(c)throw c;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new rf}:await ps(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:A0})})}catch(r){if(Ui(r))return KL(r)&&(await this._removeSession(),await Ld(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:i,error:s}=n;if(s)throw s;if(!i.session)throw new rf;const o=i.session;let c=null,u=null;this.flowType==="pkce"&&e.email!=null&&([c,u]=await Jy(this.storage,this.storageKey));const{data:l,error:d}=await ps(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:c,code_challenge_method:u}),jwt:o.access_token,xform:A0});if(d)throw d;return o.user=l.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(n){if(await Ld(this.storage,`${this.storageKey}-code-verifier`),Ui(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new rf;const r=Date.now()/1e3;let n=r,i=!0,s=null;const{payload:o}=oS(e.access_token);if(o.exp&&(n=o.exp,i=n<=r),i){const{data:c,error:u}=await this._callRefreshToken(e.refresh_token);if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!c)return{data:{user:null,session:null},error:null};s=c}else{const{data:c,error:u}=await this._getUser(e.access_token);if(u)return this._returnResult({data:{user:null,session:null},error:u});s={access_token:e.access_token,refresh_token:e.refresh_token,user:c.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return this._returnResult({data:{user:s.user,session:s},error:null})}catch(r){if(Ui(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:o,error:c}=r;if(c)throw c;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!e?.refresh_token)throw new rf;const{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?this._returnResult({data:{user:null,session:null},error:s}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(Ui(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(e,r){try{if(!Od())throw new aS("No browser detected.");if(e.error||e.error_description||e.error_code)throw new aS(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new dz("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new aS("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new dz("No code detected.");const{data:E,error:T}=await this._exchangeCodeForSession(e.code);if(T)throw T;const C=new URL(window.location.href);return C.searchParams.delete("code"),window.history.replaceState(window.history.state,"",C.toString()),{data:{session:E.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:i,access_token:s,refresh_token:o,expires_in:c,expires_at:u,token_type:l}=e;if(!s||!c||!o||!l)throw new aS("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(c);let A=d+f;u&&(A=parseInt(u));const p=A-d;p*1e3<=yx&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${f}s`);const g=A-f;d-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,A,d):d-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,A,d);const{data:y,error:x}=await this._getUser(s);if(x)throw x;const w={provider_token:n,provider_refresh_token:i,access_token:s,expires_in:f,expires_at:A,refresh_token:o,token_type:l,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:w,redirectType:e.type},error:null})}catch(n){if(Ui(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await lv(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:i,error:s}=r;if(s&&!KL(s))return this._returnResult({error:s});const o=(n=i.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:c}=await this.admin.signOut(o,e);if(c&&!(QPe(c)&&(c.status===404||c.status===401||c.status===403)||KL(c)))return this._returnResult({error:c})}return e!=="others"&&(await this._removeSession(),await Ld(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const r=ZPe(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,i;try{const{data:{session:s},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,r={}){let n=null,i=null;this.flowType==="pkce"&&([n,i]=await Jy(this.storage,this.storageKey,!0));try{return await ps(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(s){if(await Ld(this.storage,`${this.storageKey}-code-verifier`),Ui(s))return this._returnResult({data:null,error:s});throw s}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(r){if(Ui(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var r;try{const{data:n,error:i}=await this._useSession(async s=>{var o,c,u,l,d;const{data:f,error:A}=s;if(A)throw A;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(c=e.options)===null||c===void 0?void 0:c.scopes,queryParams:(u=e.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:!0});return await ps(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(l=f.session)===null||l===void 0?void 0:l.access_token)!==null&&d!==void 0?d:void 0})});if(i)throw i;return Od()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n?.url),this._returnResult({data:{provider:e.provider,url:n?.url},error:null})}catch(n){if(Ui(n))return this._returnResult({data:{provider:e.provider,url:null},error:n});throw n}}async linkIdentityIdToken(e){return await this._useSession(async r=>{var n;try{const{error:i,data:{session:s}}=r;if(i)throw i;const{options:o,provider:c,token:u,access_token:l,nonce:d}=e,f=await ps(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=s?.access_token)!==null&&n!==void 0?n:void 0,body:{provider:c,id_token:u,access_token:l,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:o?.captchaToken}},xform:vA}),{data:A,error:p}=f;return p?this._returnResult({data:{user:null,session:null},error:p}):!A||!A.session||!A.user?this._returnResult({data:{user:null,session:null},error:new Zy}):(A.session&&(await this._saveSession(A.session),await this._notifyAllSubscribers("USER_UPDATED",A.session)),this._returnResult({data:A,error:p}))}catch(i){if(await Ld(this.storage,`${this.storageKey}-code-verifier`),Ui(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,i;const{data:s,error:o}=r;if(o)throw o;return await ps(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(n=s.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0})})}catch(r){if(Ui(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await rOe(async i=>(i>0&&await tOe(200*Math.pow(2,i-1)),this._debug(r,"refreshing attempt",i),await ps(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:vA})),(i,s)=>{const o=200*Math.pow(2,i);return s&&GL(s)&&Date.now()+o-n<yx})}catch(n){if(this._debug(r,"error",n),Ui(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),Od()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const i=await lv(this.storage,this.storageKey);if(i&&this.userStorage){let o=await lv(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:i.user},await xx(this.userStorage,this.storageKey+"-user",o)),i.user=(e=o?.user)!==null&&e!==void 0?e:WL()}else if(i&&!i.user&&!i.user){const o=await lv(this.storage,this.storageKey+"-user");o&&o?.user?(i.user=o.user,await Ld(this.storage,this.storageKey+"-user"),await xx(this.storage,this.storageKey,i)):i.user=WL()}if(this._debug(n,"session from storage",i),!this._isValidSession(i)){this._debug(n,"session is not valid"),i!==null&&await this._removeSession();return}const s=((r=i.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<zL;if(this._debug(n,`session has${s?"":" not"} expired with margin of ${zL}s`),s){if(this.autoRefreshToken&&i.refresh_token){const{error:o}=await this._callRefreshToken(i.refresh_token);o&&(console.error(o),GL(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:c}=await this._getUser(i.access_token);!c&&o?.user?(i.user=o.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(n,"error",i),console.error(i);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new rf;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new N5;const{data:s,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!s.session)throw new rf;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const c={data:s.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(s){if(this._debug(i,"error",s),Ui(s)){const o={data:null,error:s};return GL(s)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,r,n=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(e,r)}catch(u){s.push(u)}});if(await Promise.all(o),s.length>0){for(let c=0;c<s.length;c+=1)console.error(s[c]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Ld(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},e),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await xx(this.userStorage,this.storageKey+"-user",{user:r.user});const i=Object.assign({},r);delete i.user;const s=pz(i);await xx(this.storage,this.storageKey,s)}else{const i=pz(r);await xx(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Ld(this.storage,this.storageKey),await Ld(this.storage,this.storageKey+"-code-verifier"),await Ld(this.storage,this.storageKey+"-user"),this.userStorage&&await Ld(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Od()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),yx);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e);const r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);const r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-e)/yx);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${yx}ms, refresh threshold is ${HP} ticks`),i<=HP&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Ire)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Od()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(e){this._debug("#visibilityChangedCallback","error",e)}},window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const i=[`provider=${encodeURIComponent(r)}`];if(n?.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n?.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[s,o]=await Jy(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(c.toString())}if(n?.queryParams){const s=new URLSearchParams(n.queryParams);i.push(s.toString())}return n?.skipBrowserRedirect&&i.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:i,error:s}=r;return s?this._returnResult({data:null,error:s}):await ps(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Ui(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,i;const{data:s,error:o}=r;if(o)return this._returnResult({data:null,error:o});const c=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:u,error:l}=await ps(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(n=s?.session)===null||n===void 0?void 0:n.access_token});return l?this._returnResult({data:null,error:l}):(e.factorType==="totp"&&u.type==="totp"&&(!((i=u?.totp)===null||i===void 0)&&i.qr_code)&&(u.totp.qr_code=`data:image/svg+xml;utf-8,${u.totp.qr_code}`),this._returnResult({data:u,error:null}))})}catch(r){if(Ui(r))return this._returnResult({data:null,error:r});throw r}}async _verify(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:s}=r;if(s)return this._returnResult({data:null,error:s});const o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?LOe(e.webauthn.credential_response):BOe(e.webauthn.credential_response)})}:{code:e.code}),{data:c,error:u}=await ps(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token});return u?this._returnResult({data:null,error:u}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+c.expires_in},c)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",c),this._returnResult({data:c,error:u}))})}catch(r){if(Ui(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:s}=r;if(s)return this._returnResult({data:null,error:s});const o=await ps(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token});if(o.error)return o;const{data:c}=o;if(c.type!=="webauthn")return{data:c,error:null};switch(c.webauthn.type){case"create":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:kOe(c.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:IOe(c.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(Ui(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){var e;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const i={all:[],phone:[],totp:[],webauthn:[]};for(const s of(e=r?.factors)!==null&&e!==void 0?e:[])i.all.push(s),s.status==="verified"&&i[s.factor_type].push(s);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(e){var r,n,i,s;if(e)try{const{payload:p}=oS(e);let g=null;p.aal&&(g=p.aal);let y=g;const{data:{user:x},error:w}=await this.getUser(e);if(w)return this._returnResult({data:null,error:w});((n=(r=x?.factors)===null||r===void 0?void 0:r.filter(C=>C.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(y="aal2");const T=p.amr||[];return{data:{currentLevel:g,nextLevel:y,currentAuthenticationMethods:T},error:null}}catch(p){if(Ui(p))return this._returnResult({data:null,error:p});throw p}const{data:{session:o},error:c}=await this.getSession();if(c)return this._returnResult({data:null,error:c});if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:u}=oS(o.access_token);let l=null;u.aal&&(l=u.aal);let d=l;((s=(i=o.user.factors)===null||i===void 0?void 0:i.filter(p=>p.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(d="aal2");const A=u.amr||[];return{data:{currentLevel:l,nextLevel:d,currentAuthenticationMethods:A},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async r=>{const{data:{session:n},error:i}=r;return i?this._returnResult({data:null,error:i}):n?await ps(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:n.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new rf})})}catch(r){if(Ui(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:i},error:s}=n;if(s)return this._returnResult({data:null,error:s});if(!i)return this._returnResult({data:null,error:new rf});const o=await ps(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:c=>({data:c,error:null})});return o.data&&o.data.redirect_url&&Od()&&!r?.skipBrowserRedirect&&window.location.assign(o.data.redirect_url),o})}catch(n){if(Ui(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:i},error:s}=n;if(s)return this._returnResult({data:null,error:s});if(!i)return this._returnResult({data:null,error:new rf});const o=await ps(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:c=>({data:c,error:null})});return o.data&&o.data.redirect_url&&Od()&&!r?.skipBrowserRedirect&&window.location.assign(o.data.redirect_url),o})}catch(n){if(Ui(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;return n?this._returnResult({data:null,error:n}):r?await ps(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new rf})})}catch(e){if(Ui(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async r=>{const{data:{session:n},error:i}=r;return i?this._returnResult({data:null,error:i}):n?(await ps(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new rf})})}catch(r){if(Ui(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(c=>c.kid===e);if(n)return n;const i=Date.now();if(n=this.jwks.keys.find(c=>c.kid===e),n&&this.jwks_cached_at+$Pe>i)return n;const{data:s,error:o}=await ps(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=i,n=s.keys.find(c=>c.kid===e),!n)?null:n}async getClaims(e,r={}){try{let n=e;if(!n){const{data:p,error:g}=await this.getSession();if(g||!p.session)return this._returnResult({data:null,error:g});n=p.session.access_token}const{header:i,payload:s,signature:o,raw:{header:c,payload:u}}=oS(n);r?.allowExpired||cOe(s.exp);const l=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!l){const{error:p}=await this.getUser(n);if(p)throw p;return{data:{claims:s,header:i,signature:o},error:null}}const d=uOe(i.alg),f=await crypto.subtle.importKey("jwk",l,d,!0,["verify"]);if(!await crypto.subtle.verify(d,f,o,qPe(`${c}.${u}`)))throw new zP("Invalid JWT signature");return{data:{claims:s,header:i,signature:o},error:null}}catch(n){if(Ui(n))return this._returnResult({data:null,error:n});throw n}}}KE.nextInstanceID={};const HOe=KE,QOe="2.93.3";let gw="";typeof Deno<"u"?gw="deno":typeof document<"u"?gw="web":typeof navigator<"u"&&navigator.product==="ReactNative"?gw="react-native":gw="node";const VOe={"X-Client-Info":`supabase-js-${gw}/${QOe}`},zOe={headers:VOe},KOe={schema:"public"},GOe={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},WOe={};function GE(t){"@babel/helpers - typeof";return GE=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},GE(t)}function YOe(t,e){if(GE(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(GE(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function qOe(t){var e=YOe(t,"string");return GE(e)=="symbol"?e:e+""}function XOe(t,e,r){return(e=qOe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ez(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Ic(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Ez(Object(r),!0).forEach(function(n){XOe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ez(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}const ZOe=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),JOe=()=>Headers,eRe=(t,e,r)=>{const n=ZOe(r),i=JOe();return async(s,o)=>{var c;const u=(c=await e())!==null&&c!==void 0?c:t;let l=new i(o?.headers);return l.has("apikey")||l.set("apikey",t),l.has("Authorization")||l.set("Authorization",`Bearer ${u}`),n(s,Ic(Ic({},o),{},{headers:l}))}};function tRe(t){return t.endsWith("/")?t:t+"/"}function rRe(t,e){var r,n;const{db:i,auth:s,realtime:o,global:c}=t,{db:u,auth:l,realtime:d,global:f}=e,A={db:Ic(Ic({},u),i),auth:Ic(Ic({},l),s),realtime:Ic(Ic({},d),o),storage:{},global:Ic(Ic(Ic({},f),c),{},{headers:Ic(Ic({},(r=f?.headers)!==null&&r!==void 0?r:{}),(n=c?.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return t.accessToken?A.accessToken=t.accessToken:delete A.accessToken,A}function nRe(t){const e=t?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(tRe(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var iRe=class extends HOe{constructor(t){super(t)}},sRe=class{constructor(t,e,r){var n,i;this.supabaseUrl=t,this.supabaseKey=e;const s=nRe(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",s),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",s),this.storageUrl=new URL("storage/v1",s),this.functionsUrl=new URL("functions/v1",s);const o=`sb-${s.hostname.split(".")[0]}-auth-token`,c={db:KOe,realtime:WOe,auth:Ic(Ic({},GOe),{},{storageKey:o}),global:zOe},u=rRe(r??{},c);if(this.storageKey=(n=u.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(i=u.global.headers)!==null&&i!==void 0?i:{},u.accessToken)this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(d,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}});else{var l;this.auth=this._initSupabaseAuthClient((l=u.auth)!==null&&l!==void 0?l:{},this.headers,u.global.fetch)}this.fetch=eRe(e,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Ic({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(d=>this.realtime.setAuth(d)).catch(d=>console.warn("Failed to set initial Realtime auth token:",d)),this.rest=new QBe(new URL("rest/v1",s).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new RPe(this.storageUrl.href,this.headers,this.fetch,r?.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new MBe(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,r)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,r;if(t.accessToken)return await t.accessToken();const{data:n}=await t.auth.getSession();return(e=(r=n.session)===null||r===void 0?void 0:r.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:n,userStorage:i,storageKey:s,flowType:o,lock:c,debug:u,throwOnError:l},d,f){const A={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new iRe({url:this.authUrl.href,headers:Ic(Ic({},A),d),storageKey:s,autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:n,userStorage:i,flowType:o,lock:c,debug:u,throwOnError:l,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(p=>p.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new aPe(this.realtimeUrl.href,Ic(Ic({},t),{},{params:Ic(Ic({},{apikey:this.supabaseKey}),t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e?.access_token)})}_handleTokenChanged(t,e,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const aRe=(t,e,r)=>new sRe(t,e,r);function oRe(){if(typeof window<"u")return!1;const t=globalThis.process;if(!t)return!1;const e=t.version;if(e==null)return!1;const r=e.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}oRe()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const lRe="https://gonalgubgldgpkcekaxe.supabase.co",cRe="sb_publishable_SB4LfH4EkuEyu5qeC_dffQ_G9cF8Fo_",Rr=aRe(lRe,cRe);async function uRe({name:t,email:e,phone:r,orgName:n}){const{data:i,error:s}=await Rr.from("leads").insert([{name:t,email:e,phone:r,org_name:n,completed_form:!1,source:"combat-sports-proposal"}]).select();if(s)throw s;return i?.[0]}async function dRe(t,e){const{error:r}=await Rr.from("leads").update({completed_form:!0,form_data:e}).eq("id",t);if(r)throw r}async function hRe(t){if(!t)return null;let{data:e,error:r}=await Rr.from("crm_leads").select("*").ilike("org_name",t).limit(1).single();if(e)return e;const n=t.replace(/\s*(Pty|Ltd|Inc|LLC|Pty Ltd|PTY LTD|Corporation|Corp)\.?\s*/gi,"").trim(),i=await Rr.from("crm_leads").select("*").ilike("org_name",`%${n}%`).limit(1).single();if(i.data)return i.data;const s=n.split(/\s+/).filter(o=>o.length>3);if(s.length>0){const o=s[0],c=await Rr.from("crm_leads").select("*").ilike("org_name",`%${o}%BJJ%`).limit(1).single();if(c.data)return c.data}return null}async function k5(){const{data:t,error:e}=await Rr.from("contracts").select("*").order("created_at",{ascending:!1});if(e)throw e;return t}async function Pre(t){const{data:e,error:r}=await Rr.from("contracts").select("*").eq("id",t).single();if(r)throw r;return e}async function fRe(t){const{data:e,error:r}=await Rr.from("contracts").select("*").eq("share_token",t).single();if(r)throw r;return e}async function _z(t){const e=Array.from({length:32},()=>Math.floor(Math.random()*16).toString(16)).join(""),{data:r,error:n}=await Rr.from("contracts").insert({...t,share_token:e}).select().single();if(n)throw n;return r}async function Sz(t,e){const{data:r,error:n}=await Rr.from("contracts").update({...e,updated_at:new Date().toISOString()}).eq("id",t).select().single();if(n)throw n;return r}async function ARe(t){const{error:e}=await Rr.from("contracts").delete().eq("id",t);if(e)throw e}async function mRe(t){const{data:e,error:r}=await Rr.from("contracts").update({viewed_at:new Date().toISOString(),status:"viewed",updated_at:new Date().toISOString()}).eq("id",t).select().single();if(r)throw r;return e}async function pRe(t){const{data:e,error:r}=await Rr.from("orders").insert([t]).select().single();if(r)throw r;return e}async function gRe(t,e,r=!1){const n=r?{client_signature:e,client_signed_at:new Date().toISOString(),status:"signed",updated_at:new Date().toISOString()}:{ffm_signature:e,ffm_signed_at:new Date().toISOString(),status:"sent",updated_at:new Date().toISOString()},{data:i,error:s}=await Rr.from("contracts").update(n).eq("id",t).select().single();if(s)throw s;return i}const vRe=()=>Array.from({length:24},()=>Math.floor(Math.random()*16).toString(16)).join("");async function Ore(){const{data:t,error:e}=await Rr.from("onboarding_sessions").select("*").order("created_at",{ascending:!1});if(e)throw e;return t}async function yRe(t){const{data:e,error:r}=await Rr.from("onboarding_sessions").select("*").eq("share_token",t);if(r)throw r;if(!e||e.length===0)throw new Error("Onboarding session not found. Please check your link or contact Fit Focus Media.");const n=e[0];return n&&n.status==="pending"&&(await Rr.from("onboarding_sessions").update({status:"in_progress"}).eq("share_token",t),n.status="in_progress"),n}async function Rre(t){const{data:e,error:r}=await Rr.from("onboarding_sessions").insert({...t,share_token:vRe(),status:"pending"}).select().single();if(r)throw r;if(e&&e.org_name&&e.event_name)try{await TRe(e.id,e.org_name,e.event_name)}catch(n){console.error("Failed to create Drive folders:",n)}return e}async function xRe(t,e){delete e.id,delete e.created_at,delete e.share_token,delete e.contract_id;const{data:r,error:n}=await Rr.from("onboarding_sessions").update({...e,updated_at:new Date().toISOString()}).eq("id",t).select().single();if(n)throw n;return r}async function bRe(t,e){delete e.id,delete e.created_at,delete e.share_token,delete e.contract_id;const{data:r,error:n}=await Rr.from("onboarding_sessions").update({...e,updated_at:new Date().toISOString()}).eq("share_token",t).select();if(n)throw n;if(!r||r.length===0)throw new Error("Failed to save changes - session not found");return r[0]}async function wRe(t){const e=typeof t=="string"?t:t?.share_token;if(!e)throw new Error("No share token provided for submission");const{data:r,error:n}=await Rr.from("onboarding_sessions").update({status:"submitted",submitted_at:new Date().toISOString()}).eq("share_token",e).select();if(n)throw n;if(!r||r.length===0)throw new Error("Session not found or update blocked by permissions");return r[0]}async function ERe(t,e,r){const{data:n,error:i}=await Rr.from("onboarding_sessions").update({status:"reviewed",reviewed_at:new Date().toISOString(),reviewed_by:e,admin_notes:r}).eq("id",t).select();if(i)throw i;return n}async function _Re(t){const{error:e}=await Rr.from("onboarding_files").delete().eq("session_id",t);e&&console.error("Error deleting files:",e);const{error:r}=await Rr.from("onboarding_sessions").delete().eq("id",t);if(r)throw r;return!0}const qL="onboarding";async function SRe(t,e,r,n){const{data:i}=await Rr.from("onboarding_sessions").select("org_name, event_name").eq("id",t).single(),s=w=>w?.replace(/[^a-zA-Z0-9 -]/g,"").trim().substring(0,50)||"",o=s(i?.org_name)||t.substring(0,8),c=i?.event_name?s(i.event_name):null,u=Date.now(),l=n.name.replace(/[^a-zA-Z0-9.-]/g,"_"),d=c?`${o}/${c}/${e}/${u}_${l}`:`${o}/${e}/${u}_${l}`,{data:f,error:A}=await Rr.storage.from(qL).upload(d,n,{cacheControl:"3600",upsert:!1});if(A)throw new Error(A.message||"Upload failed");const{data:p}=Rr.storage.from(qL).getPublicUrl(d),g=p?.publicUrl||null,{data:y,error:x}=await Rr.from("onboarding_files").insert({session_id:t,category:e,file_type:r,file_name:n.name,file_size:n.size,mime_type:n.type,storage_path:d,public_url:g,synced_to_drive:!1}).select().single();if(x)throw await Rr.storage.from(qL).remove([d]),new Error(x.message||"Failed to create file record");return{file:y,url:g,message:"File uploaded. Will sync to Google Drive automatically."}}async function TRe(t,e,r){return console.log("Drive folders will be created automatically during sync"),{success:!0,message:"Folders created during sync"}}async function CRe(t){const{data:e,error:r}=await Rr.from("onboarding_files").select("*").eq("session_id",t).order("created_at",{ascending:!1});if(r)throw r;return e}async function jRe(){const{data:t,error:e}=await Rr.from("livestream_events").select("*").in("status",["published","live","ended"]).order("start_time",{ascending:!0});if(e)throw e;return t}async function KP(t){const{data:e,error:r}=await Rr.from("livestream_events").select("*").eq("id",t).single();if(r)throw r;return e}async function NRe(){const{data:t,error:e}=await Rr.from("livestream_events").select("*").order("created_at",{ascending:!1});if(e)throw e;return t}async function kRe(t){const{data:e,error:r}=await Rr.from("livestream_events").insert([t]).select().single();if(r)throw r;return e}async function Jw(t,e){const{data:r,error:n}=await Rr.from("livestream_events").update({...e,updated_at:new Date().toISOString()}).eq("id",t).select().single();if(n)throw n;return r}async function IRe(t){const{error:e}=await Rr.from("livestream_events").delete().eq("id",t);if(e)throw e}async function Dre(){const{data:t,error:e}=await Rr.from("livestream_settings").select("*").eq("id",1).single();if(e&&e.code!=="PGRST116")throw e;return t||{demo_mode:!1}}async function LRe(t){const{data:e,error:r}=await Rr.from("livestream_settings").upsert({id:1,...t,updated_at:new Date().toISOString()}).select().single();if(r)throw r;return e}async function BRe(t){const{data:e,error:r}=await Rr.from("livestream_orders").insert([t]).select().single();if(r)throw r;return e}async function PRe(t,e){const{data:r,error:n}=await Rr.from("livestream_orders").select("*").eq("event_id",t).eq("email",e.toLowerCase()).eq("status","completed").order("created_at",{ascending:!1}).limit(1);if(n)throw n;return r?.[0]||null}async function ORe(t){let e=Rr.from("livestream_orders").select("*, event:livestream_events(*)").order("created_at",{ascending:!1});const{data:r,error:n}=await e;if(n)throw n;return r}async function RRe(t){const{data:e,error:r}=await Rr.from("livestream_sessions").insert([t]).select().single();if(r)throw r;return e}async function DRe(t){const{data:e,error:r}=await Rr.from("livestream_sessions").update({last_seen:new Date().toISOString()}).eq("token",t).eq("active",!0).select().single();if(r)throw r;return e}async function MRe(t,e){const{data:r,error:n}=await Rr.auth.signInWithOtp({email:t.toLowerCase(),options:{emailRedirectTo:e||window.location.origin}});if(n)throw n;return r}async function FRe(){const{data:{session:t},error:e}=await Rr.auth.getSession();if(e)throw e;return t}async function URe(){const{error:t}=await Rr.auth.signOut();if(t)throw t}function $Re(t){return Rr.auth.onAuthStateChange(t)}async function Tz(t,e){const r=e.toLowerCase(),{data:n}=await Rr.from("user_profiles").select("*").eq("email",r).single();if(n){const{data:o,error:c}=await Rr.from("user_profiles").update({auth_id:t,last_login_at:new Date().toISOString(),updated_at:new Date().toISOString()}).eq("id",n.id).select().single();if(c)throw c;return o}const{data:i,error:s}=await Rr.from("user_profiles").insert({email:r,auth_id:t,last_login_at:new Date().toISOString()}).select().single();if(s)throw s;return await Rr.from("livestream_orders").update({user_id:i.id}).eq("email",r).is("user_id",null),i}async function HRe(t){const{data:e,error:r}=await Rr.from("livestream_orders").select("*, event:livestream_events(*)").eq("email",t.toLowerCase()).eq("status","completed").order("created_at",{ascending:!1});if(r)throw r;return e}function QRe(t,e){return(e?`${t}-${e}`:t).toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,"").substring(0,60)}async function VRe(){const{data:t,error:e}=await Rr.from("proposals").select("*").order("created_at",{ascending:!1});if(e)throw e;return t}async function zRe(t){const{data:e,error:r}=await Rr.from("proposals").select("*").eq("slug",t).single();if(r)throw r;return e}async function KRe(t){const r=`${t.slug||QRe(t.org_name,t.event_name)}-${Date.now().toString(36)}`,{data:n,error:i}=await Rr.from("proposals").insert([{...t,slug:r,status:t.status||"draft"}]).select().single();if(i)throw i;return n}async function Mre(t,e){const{data:r,error:n}=await Rr.from("proposals").update({...e,updated_at:new Date().toISOString()}).eq("id",t).select().single();if(n)throw n;return r}async function GRe(t){const{error:e}=await Rr.from("proposals").delete().eq("id",t);if(e)throw e}async function WRe(t){const{data:e,error:r}=await Rr.from("proposals").select("id, views").eq("slug",t).single();if(r)throw r;const{error:n}=await Rr.from("proposals").update({views:(e.views||0)+1,last_viewed_at:new Date().toISOString()}).eq("id",e.id);if(n)throw n}async function YRe(t,e){return Mre(t,{status:e})}const qRe=()=>{const[t,e]=j.useState(1),[r,n]=j.useState({name:"",email:"",phone:""}),[i,s]=j.useState({orgName:"",showsPerYear:4,avgAttendance:200,venueCapacity:300,socialFollowing:5e3,currentMedia:"basic",geoReach:"local",sponsorshipLevel:"few",growthTrajectory:"stable"}),[o,c]=j.useState(null),[u,l]=j.useState([]),d=j.useRef(null),f=5;j.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"})},[t]),j.useEffect(()=>{t===f&&d.current&&dRe(d.current,{...i,...r,analysis:o,selectedAddOns:u}).catch(T=>console.error("Error marking lead completed:",T))},[t]);const A=()=>{t<f&&e(t+1)},p=()=>{t>1&&e(t-1)},g=T=>{T>=1&&T<=f&&e(T)},y=(T,C)=>{s(N=>({...N,[T]:C}))},x=(T,C)=>{n(N=>({...N,[T]:C}))},w=T=>{s(T)},E=async()=>{const T=await uRe({name:r.name,email:r.email,phone:r.phone,orgName:i.orgName||""});T?.id&&(d.current=T.id),A()};return a.jsxs("div",{className:"pt-16 sm:pt-20",children:[t>1&&a.jsx(Yge,{currentStep:t,totalSteps:f,goToStep:g}),a.jsxs("div",{className:"transition-opacity duration-300",children:[t===1&&a.jsx(qge,{nextStep:A}),t===2&&a.jsx(Xge,{formData:i,updateFormData:y,setFormDataBulk:w,setAnalysis:c,nextStep:A,prevStep:p}),t===3&&a.jsx(CBe,{formData:i,analysis:o,selectedAddOns:u,setSelectedAddOns:l,nextStep:A,prevStep:p}),t===4&&a.jsx(jBe,{contactData:r,updateContactData:x,formData:i,onSubmit:E,prevStep:p}),t===5&&a.jsx(PBe,{formData:i,analysis:o,selectedAddOns:u,prevStep:p,goToStep:g})]})]})},XRe=()=>{const[t,e]=j.useState({name:"",email:"",organization:"",message:""}),r=n=>{n.preventDefault();const i=encodeURIComponent(`Website Inquiry - ${t.organization||t.name}`),s=encodeURIComponent(`Name: ${t.name}
Email: ${t.email}
Organization: ${t.organization}

${t.message}`);window.location.href=`mailto:info@fitfocusmedia.com.au?subject=${i}&body=${s}`};return a.jsxs("div",{className:"pt-20 sm:pt-24",children:[a.jsx("section",{className:"py-12 sm:py-20 px-4 sm:px-6",children:a.jsx("div",{className:"max-w-7xl mx-auto text-center",children:a.jsxs(Or.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[a.jsx("h1",{className:"text-4xl sm:text-5xl md:text-6xl font-black mb-6",children:a.jsx("span",{className:"text-gradient",children:"Get In Touch"})}),a.jsx("p",{className:"text-lg sm:text-xl text-gray-400 max-w-3xl mx-auto",children:"Ready to elevate your combat sports event? Let's talk about how professional media coverage can transform your promotion."})]})})}),a.jsx("section",{className:"py-8 sm:py-12 px-4 sm:px-6",children:a.jsx("div",{className:"max-w-7xl mx-auto",children:a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 sm:gap-12",children:[a.jsx(Or.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.6},children:a.jsxs("div",{className:"bg-dark-800 border border-gray-700 rounded-xl p-6 sm:p-8",children:[a.jsx("h2",{className:"text-2xl sm:text-3xl font-black text-white mb-2",children:"Send a Message"}),a.jsx("p",{className:"text-gray-400 text-sm mb-6",children:"We typically respond within 24 hours."}),a.jsxs("form",{onSubmit:r,className:"space-y-5",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Your Name *"}),a.jsx("input",{type:"text",required:!0,value:t.name,onChange:n=>e({...t,name:n.target.value}),className:"w-full px-4 py-3 bg-dark-900 border-2 border-gray-700 rounded-lg text-white focus:border-primary-600 focus:outline-none transition-colors",placeholder:"John Smith"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Email Address *"}),a.jsx("input",{type:"email",required:!0,value:t.email,onChange:n=>e({...t,email:n.target.value}),className:"w-full px-4 py-3 bg-dark-900 border-2 border-gray-700 rounded-lg text-white focus:border-primary-600 focus:outline-none transition-colors",placeholder:"john@promotion.com"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Organization"}),a.jsx("input",{type:"text",value:t.organization,onChange:n=>e({...t,organization:n.target.value}),className:"w-full px-4 py-3 bg-dark-900 border-2 border-gray-700 rounded-lg text-white focus:border-primary-600 focus:outline-none transition-colors",placeholder:"Your promotion / gym name"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Message *"}),a.jsx("textarea",{required:!0,rows:5,value:t.message,onChange:n=>e({...t,message:n.target.value}),className:"w-full px-4 py-3 bg-dark-900 border-2 border-gray-700 rounded-lg text-white focus:border-primary-600 focus:outline-none transition-colors resize-none",placeholder:"Tell us about your event or what you're looking for..."})]}),a.jsxs("button",{type:"submit",className:"w-full flex items-center justify-center gap-2 px-6 py-4 bg-primary-600 hover:bg-primary-700 text-white font-bold rounded-lg transition-all hover:scale-[1.02] text-lg",children:[a.jsx(e3,{className:"w-5 h-5"}),"Send Message"]})]})]})}),a.jsxs(Or.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.6},className:"space-y-6",children:[a.jsxs("div",{className:"bg-dark-800 border border-gray-700 rounded-xl p-6 sm:p-8",children:[a.jsx("h3",{className:"text-xl font-bold text-white mb-6",children:"Direct Contact"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("a",{href:"mailto:info@fitfocusmedia.com.au",className:"flex items-center gap-4 p-4 bg-dark-900 rounded-lg hover:bg-primary-600/10 border border-gray-700 hover:border-primary-600/50 transition-all group",children:[a.jsx("div",{className:"w-12 h-12 bg-primary-600/20 rounded-lg flex items-center justify-center",children:a.jsx(tu,{className:"w-6 h-6 text-primary-500"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-white font-semibold",children:"Email"}),a.jsx("p",{className:"text-gray-400 text-sm group-hover:text-primary-400 transition-colors",children:"info@fitfocusmedia.com.au"})]})]}),a.jsxs("div",{className:"flex items-center gap-4 p-4 bg-dark-900 rounded-lg border border-gray-700",children:[a.jsx("div",{className:"w-12 h-12 bg-primary-600/20 rounded-lg flex items-center justify-center",children:a.jsx(th,{className:"w-6 h-6 text-primary-500"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-white font-semibold",children:"Location"}),a.jsx("p",{className:"text-gray-400 text-sm",children:"Queensland, Australia"}),a.jsx("p",{className:"text-gray-500 text-xs",children:"Servicing events Australia-wide + International"})]})]})]})]}),a.jsxs("div",{className:"bg-dark-800 border border-gray-700 rounded-xl p-6 sm:p-8",children:[a.jsx("h3",{className:"text-xl font-bold text-white mb-6",children:"Quick Actions"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("a",{href:"mailto:info@fitfocusmedia.com.au?subject=Consultation Request&body=Hi Brandon,%0D%0A%0D%0AI'd like to schedule a consultation to discuss media production for my event.%0D%0A%0D%0APlease send me your available times.%0D%0A%0D%0AThanks!",className:"flex items-center gap-3 p-4 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-all hover:scale-[1.02] group",children:[a.jsx(fc,{className:"w-6 h-6 group-hover:rotate-12 transition-transform"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-bold",children:"Request a Consultation"}),a.jsx("p",{className:"text-sm text-blue-100",children:"Free 30-min call to discuss your needs"})]})]}),a.jsxs(gs,{to:"/proposal",className:"flex items-center gap-3 p-4 bg-primary-600 hover:bg-primary-700 text-white rounded-lg transition-all hover:scale-[1.02] group",children:[a.jsx(Rh,{className:"w-6 h-6 group-hover:translate-x-1 transition-transform"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-bold",children:"Get Your Free Analysis"}),a.jsx("p",{className:"text-sm text-primary-100",children:"2-minute form, instant results"})]})]})]})]}),a.jsxs("div",{className:"bg-dark-800 border border-gray-700 rounded-xl p-6 sm:p-8",children:[a.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Follow Us"}),a.jsx("div",{className:"flex gap-3",children:[{icon:IN,label:"Instagram",href:"#"},{icon:jY,label:"YouTube",href:"#"},{icon:w2,label:"Facebook",href:"#"}].map(n=>a.jsxs("a",{href:n.href,className:"flex items-center gap-2 px-4 py-3 bg-dark-900 border border-gray-700 rounded-lg hover:border-primary-600/50 hover:bg-primary-600/10 transition-all",children:[a.jsx(n.icon,{className:"w-5 h-5 text-gray-400"}),a.jsx("span",{className:"text-gray-300 text-sm font-semibold",children:n.label})]},n.label))})]}),a.jsxs("div",{className:"p-5 bg-green-900/20 border border-green-600/40 rounded-xl",children:[a.jsx("p",{className:"text-green-300 font-semibold text-sm mb-1",children:" Fast Response"}),a.jsx("p",{className:"text-gray-400 text-sm",children:"We typically respond within 24 hours. For urgent event inquiries, mention your event date in the subject line."})]})]})]})})})]})};function ZRe(){return j.useEffect(()=>{const t=document.createElement("script");return t.src="https://static.zcal.co/embed/v1/embed.js",t.async=!0,document.body.appendChild(t),()=>{const e=document.querySelector('script[src="https://static.zcal.co/embed/v1/embed.js"]');e&&e.remove()}},[]),a.jsx("div",{className:"min-h-screen bg-dark-950 pt-24 pb-16",children:a.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsxs("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:[a.jsx("span",{className:"text-white",children:"Book a "}),a.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-primary-400 to-accent-400",children:"Meeting"})]}),a.jsx("p",{className:"text-xl text-gray-400 max-w-2xl mx-auto",children:"Schedule a call with Brandon to discuss your event media needs. Choose a time that works for you."})]}),a.jsx("div",{className:"bg-dark-900/50 backdrop-blur-sm rounded-2xl border border-dark-800 p-4 md:p-8",children:a.jsx("div",{className:"zcal-inline-widget w-full",style:{minHeight:"700px"},children:a.jsx("a",{href:"https://zcal.co/i/tG0dicG9",children:"Project Enquiry - Schedule a meeting"})})}),a.jsx("div",{className:"mt-8 text-center",children:a.jsxs("p",{className:"text-gray-500 text-sm",children:["Can't find a suitable time?"," ",a.jsx("a",{href:"mailto:info@fitfocusmedia.com.au",className:"text-primary-400 hover:text-primary-300 transition-colors",children:"Email us directly"})]})})]})})}const Jh=({value:t,prefix:e="",suffix:r="",decimals:n=0})=>{const i=Fge(0,{damping:50,stiffness:100}),s=fX(i,o=>e+o.toFixed(n).replace(/\B(?=(\d{3})+(?!\d))/g,",")+r);return j.useEffect(()=>{i.set(t)},[i,t]),a.jsx(Or.span,{children:s})},JRe=()=>{const[t,e]=j.useState(4),[r,n]=j.useState(30),[i,s]=j.useState(50),[o,c]=j.useState(300),[u,l]=j.useState(!1),[d,f]=j.useState(2e3),A=24.99,p=r*.15*350*t,g=r*.25*175*t,y=r*.05*899,x=p+g+y,w=o*1.5,E=w*A,T=E*t,C=T*.7,N=d*.2*t,I=x+C+N,U=d*t,K=U+I,Y=[{name:"Without FFM",Sponsorship:d*t,"Athlete Packages":0,"PPV Revenue":0,"Sponsorship Uplift":0},{name:"With FFM",Sponsorship:d*t,"Athlete Packages":x,"PPV Revenue":C,"Sponsorship Uplift":N}],re={Sponsorship:"#6b7280","Athlete Packages":"#22c55e","PPV Revenue":"#10b981","Sponsorship Uplift":"#14b8a6"};return a.jsx("div",{className:"py-12 px-4 sm:px-6",children:a.jsxs("div",{className:"max-w-5xl mx-auto",children:[a.jsxs(Or.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center mb-16",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-primary-600/20 rounded-2xl mb-6",children:a.jsx(gY,{className:"w-8 h-8 text-primary-500"})}),a.jsx("h1",{className:"text-4xl sm:text-5xl md:text-6xl font-black mb-4",children:a.jsx("span",{className:"text-gradient",children:"Revenue Calculator"})}),a.jsx("p",{className:"text-lg sm:text-xl text-gray-400 max-w-2xl mx-auto",children:"See how much your events could generate with professional media coverage"})]}),a.jsxs(Or.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-dark-800 border border-gray-700 rounded-2xl p-6 sm:p-8 mb-8",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("div",{className:"w-10 h-10 bg-primary-600/20 rounded-xl flex items-center justify-center",children:a.jsx("span",{className:"text-xl font-black text-primary-500",children:"1"})}),a.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Your Event Details"})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"flex justify-between text-sm font-semibold text-gray-300 mb-3",children:[a.jsx("span",{children:"Number of events per year"}),a.jsxs("span",{className:"text-primary-400",children:[t," events"]})]}),a.jsx("input",{type:"range",min:"1",max:"24",value:t,onChange:se=>e(Number(se.target.value)),className:"w-full h-2 bg-dark-700 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-5 [&::-webkit-slider-thumb]:h-5 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-primary-500 [&::-webkit-slider-thumb]:cursor-pointer [&::-moz-range-thumb]:w-5 [&::-moz-range-thumb]:h-5 [&::-moz-range-thumb]:rounded-full [&::-moz-range-thumb]:bg-primary-500 [&::-moz-range-thumb]:border-0 [&::-moz-range-thumb]:cursor-pointer"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"flex justify-between text-sm font-semibold text-gray-300 mb-3",children:[a.jsx("span",{children:"Average athletes per event"}),a.jsxs("span",{className:"text-primary-400",children:[r," athletes"]})]}),a.jsx("input",{type:"range",min:"10",max:"100",value:r,onChange:se=>n(Number(se.target.value)),className:"w-full h-2 bg-dark-700 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-5 [&::-webkit-slider-thumb]:h-5 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-primary-500 [&::-webkit-slider-thumb]:cursor-pointer [&::-moz-range-thumb]:w-5 [&::-moz-range-thumb]:h-5 [&::-moz-range-thumb]:rounded-full [&::-moz-range-thumb]:bg-primary-500 [&::-moz-range-thumb]:border-0 [&::-moz-range-thumb]:cursor-pointer"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-3",children:"Average ticket price"}),a.jsxs("div",{className:"relative",children:[a.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400",children:"$"}),a.jsx("input",{type:"number",min:"0",value:i,onChange:se=>s(Number(se.target.value)),className:"w-full bg-dark-700 border border-gray-600 rounded-lg px-10 py-3 text-white focus:outline-none focus:border-primary-500 transition-colors"})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"flex justify-between text-sm font-semibold text-gray-300 mb-3",children:[a.jsx("span",{children:"Average attendees per event"}),a.jsxs("span",{className:"text-primary-400",children:[o," people"]})]}),a.jsx("input",{type:"range",min:"50",max:"2000",step:"50",value:o,onChange:se=>c(Number(se.target.value)),className:"w-full h-2 bg-dark-700 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-5 [&::-webkit-slider-thumb]:h-5 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-primary-500 [&::-webkit-slider-thumb]:cursor-pointer [&::-moz-range-thumb]:w-5 [&::-moz-range-thumb]:h-5 [&::-moz-range-thumb]:rounded-full [&::-moz-range-thumb]:bg-primary-500 [&::-moz-range-thumb]:border-0 [&::-moz-range-thumb]:cursor-pointer"})]}),a.jsx("div",{children:a.jsxs("label",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm font-semibold text-gray-300",children:"Do you currently livestream?"}),a.jsx("button",{onClick:()=>l(!u),className:`relative inline-flex h-7 w-12 items-center rounded-full transition-colors ${u?"bg-primary-600":"bg-dark-600"}`,children:a.jsx("span",{className:`inline-block h-5 w-5 transform rounded-full bg-white transition-transform ${u?"translate-x-6":"translate-x-1"}`})})]})}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-3",children:"Current sponsorship revenue per event"}),a.jsxs("div",{className:"relative",children:[a.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400",children:"$"}),a.jsx("input",{type:"number",min:"0",value:d,onChange:se=>f(Number(se.target.value)),className:"w-full bg-dark-700 border border-gray-600 rounded-lg px-10 py-3 text-white focus:outline-none focus:border-primary-500 transition-colors"})]})]})]})]}),a.jsxs(Or.section,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:.1},className:"bg-dark-800 border border-gray-700 rounded-2xl p-6 sm:p-8 mb-8",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("div",{className:"w-10 h-10 bg-primary-600/20 rounded-xl flex items-center justify-center",children:a.jsx("span",{className:"text-xl font-black text-primary-500",children:"2"})}),a.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Revenue Projections"})]}),a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx($h,{className:"w-5 h-5 text-primary-500"}),a.jsx("h3",{className:"text-xl font-bold text-white",children:"A) Athlete Media Packages"})]}),a.jsxs("div",{className:"space-y-3 pl-7",children:[a.jsxs("div",{className:"flex justify-between items-center text-sm",children:[a.jsx("span",{className:"text-gray-400",children:"VIP Package ($350)  15% uptake"}),a.jsxs("span",{className:"text-green-400 font-semibold",children:["$",a.jsx(Jh,{value:p,decimals:0})]})]}),a.jsxs("div",{className:"flex justify-between items-center text-sm",children:[a.jsx("span",{className:"text-gray-400",children:"Match Package ($175)  25% uptake"}),a.jsxs("span",{className:"text-green-400 font-semibold",children:["$",a.jsx(Jh,{value:g,decimals:0})]})]}),a.jsxs("div",{className:"flex justify-between items-center text-sm",children:[a.jsx("span",{className:"text-gray-400",children:"Season Pass ($899/yr)  5% uptake"}),a.jsxs("span",{className:"text-green-400 font-semibold",children:["$",a.jsx(Jh,{value:y,decimals:0})]})]}),a.jsx("div",{className:"border-t border-gray-700 pt-3 mt-3",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"font-bold text-white",children:"Total Athlete Revenue"}),a.jsxs("span",{className:"text-2xl font-black text-green-400",children:["$",a.jsx(Jh,{value:x,decimals:0})]})]})})]})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(yh,{className:"w-5 h-5 text-primary-500"}),a.jsx("h3",{className:"text-xl font-bold text-white",children:"B) PPV/Live Streaming"})]}),!u&&a.jsx("div",{className:"bg-amber-900/20 border border-amber-700/50 rounded-lg p-4 mb-4 ml-7",children:a.jsx("p",{className:"text-amber-300 text-sm font-semibold",children:" You're leaving money on the table  streaming could add significant revenue"})}),a.jsxs("div",{className:"space-y-3 pl-7",children:[a.jsxs("div",{className:"flex justify-between items-center text-sm",children:[a.jsx("span",{className:"text-gray-400",children:"PPV viewers per event (attendees  1.5)"}),a.jsxs("span",{className:"text-gray-300 font-semibold",children:[a.jsx(Jh,{value:w,decimals:0})," viewers"]})]}),a.jsxs("div",{className:"flex justify-between items-center text-sm",children:[a.jsx("span",{className:"text-gray-400",children:"PPV price"}),a.jsxs("span",{className:"text-gray-300 font-semibold",children:["$",A]})]}),a.jsxs("div",{className:"flex justify-between items-center text-sm",children:[a.jsx("span",{className:"text-gray-400",children:"Revenue per event"}),a.jsxs("span",{className:"text-green-400 font-semibold",children:["$",a.jsx(Jh,{value:E,decimals:0})]})]}),a.jsxs("div",{className:"flex justify-between items-center text-sm",children:[a.jsx("span",{className:"text-gray-400",children:"Annual PPV revenue"}),a.jsxs("span",{className:"text-green-400 font-semibold",children:["$",a.jsx(Jh,{value:T,decimals:0})]})]}),a.jsx("div",{className:"bg-dark-700/50 border border-gray-600 rounded-lg p-3 my-3",children:a.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"FFM handles all production. Revenue shared 70/30 (70% to you)"})}),a.jsx("div",{className:"border-t border-gray-700 pt-3 mt-3",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"font-bold text-white",children:"Your PPV Revenue (70% share)"}),a.jsxs("span",{className:"text-2xl font-black text-green-400",children:["$",a.jsx(Jh,{value:C,decimals:0})]})]})})]})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx($A,{className:"w-5 h-5 text-primary-500"}),a.jsx("h3",{className:"text-xl font-bold text-white",children:"C) Sponsorship Uplift"})]}),a.jsxs("div",{className:"space-y-3 pl-7",children:[a.jsx("p",{className:"text-sm text-gray-400 mb-3",children:"Professional media coverage attracts bigger sponsors. Estimated 20% increase in sponsorship value."}),a.jsxs("div",{className:"flex justify-between items-center text-sm",children:[a.jsx("span",{className:"text-gray-400",children:"Current annual sponsorship"}),a.jsxs("span",{className:"text-gray-300 font-semibold",children:["$",a.jsx(Jh,{value:d*t,decimals:0})]})]}),a.jsx("div",{className:"border-t border-gray-700 pt-3 mt-3",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"font-bold text-white",children:"Additional Sponsorship (20% uplift)"}),a.jsxs("span",{className:"text-2xl font-black text-green-400",children:["$",a.jsx(Jh,{value:N,decimals:0})]})]})})]})]})]})]}),a.jsxs(Or.section,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:.2},className:"bg-gradient-to-br from-green-900/30 to-emerald-900/30 border-2 border-green-600/50 rounded-2xl p-6 sm:p-8 mb-8",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("div",{className:"w-10 h-10 bg-green-600/30 rounded-xl flex items-center justify-center",children:a.jsx("span",{className:"text-xl font-black text-green-400",children:"3"})}),a.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"The Bottom Line"})]}),a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("p",{className:"text-gray-300 mb-3 text-lg",children:"Total Additional Annual Revenue"}),a.jsxs("div",{className:"text-5xl sm:text-6xl md:text-7xl font-black text-green-400 mb-2",children:["$",a.jsx(Jh,{value:I,decimals:0})]}),a.jsx("p",{className:"text-sm text-gray-400",children:"= Athlete Packages + Your PPV Share + Sponsorship Uplift"})]}),a.jsxs("div",{className:"bg-dark-900/50 rounded-xl p-4 sm:p-6 mb-6",children:[a.jsx("h3",{className:"text-lg font-bold text-white mb-4 text-center",children:"Revenue Comparison"}),a.jsx(YC,{width:"100%",height:300,children:a.jsxs(pre,{data:Y,margin:{top:20,right:20,left:20,bottom:20},children:[a.jsx(Wte,{strokeDasharray:"3 3",stroke:"#374151"}),a.jsx(LM,{dataKey:"name",stroke:"#9ca3af"}),a.jsx(BM,{stroke:"#9ca3af",tickFormatter:se=>`$${(se/1e3).toFixed(0)}k`}),a.jsx(nCe,{contentStyle:{backgroundColor:"#1f2937",border:"1px solid #374151",borderRadius:"8px",color:"#f3f4f6"},formatter:se=>`$${se.toLocaleString()}`}),a.jsx(WZ,{}),a.jsx(eb,{dataKey:"Sponsorship",stackId:"a",fill:re.Sponsorship,radius:[0,0,0,0]}),a.jsx(eb,{dataKey:"Athlete Packages",stackId:"a",fill:re["Athlete Packages"],radius:[0,0,0,0]}),a.jsx(eb,{dataKey:"PPV Revenue",stackId:"a",fill:re["PPV Revenue"],radius:[0,0,0,0]}),a.jsx(eb,{dataKey:"Sponsorship Uplift",stackId:"a",fill:re["Sponsorship Uplift"],radius:[8,8,0,0]})]})})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"bg-dark-800/50 rounded-lg p-4 text-center",children:[a.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"Without FFM"}),a.jsxs("p",{className:"text-2xl font-bold text-gray-300",children:["$",a.jsx(Jh,{value:U,decimals:0})]})]}),a.jsxs("div",{className:"bg-green-900/30 border border-green-600/50 rounded-lg p-4 text-center",children:[a.jsx("p",{className:"text-sm text-green-300 mb-1",children:"With FFM"}),a.jsxs("p",{className:"text-2xl font-bold text-green-400",children:["$",a.jsx(Jh,{value:K,decimals:0})]})]})]})]}),a.jsxs(Or.section,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:.3},className:"bg-dark-800 border border-gray-700 rounded-2xl p-6 sm:p-8 mb-8 text-center",children:[a.jsx(_f,{className:"w-12 h-12 text-primary-500 mx-auto mb-4"}),a.jsx("h3",{className:"text-3xl sm:text-4xl font-black text-white mb-3",children:"FFM Cost to You: $0"}),a.jsx("p",{className:"text-gray-400 mb-4 max-w-2xl mx-auto",children:"We earn from production fees and a share of the revenue we help generate"}),a.jsxs("div",{className:"inline-flex items-center gap-2 px-6 py-3 bg-green-900/30 border border-green-600/50 rounded-lg",children:[a.jsx(qf,{className:"w-5 h-5 text-green-400"}),a.jsx("span",{className:"text-green-300 font-semibold",children:"No risk. No upfront cost. Just results."})]})]}),a.jsxs(Or.section,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:.4},className:"text-center",children:[a.jsx("h3",{className:"text-2xl sm:text-3xl font-bold text-white mb-6",children:"Ready to unlock this revenue?"}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[a.jsxs(gs,{to:"/proposal",className:"group inline-flex items-center justify-center gap-3 px-8 py-4 bg-primary-600 hover:bg-primary-700 text-white font-black rounded-lg text-lg transition-all hover:scale-105 card-glow",children:["Get Your Free Event Analysis",a.jsx(Rh,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]}),a.jsx(gs,{to:"/contact",className:"inline-flex items-center justify-center gap-3 px-8 py-4 bg-white/10 hover:bg-white/20 backdrop-blur-sm text-white font-bold rounded-lg text-lg transition-all border border-white/20 hover:border-white/40",children:"Contact Us"})]}),a.jsx("p",{className:"text-sm text-gray-500 mt-4",children:"Takes 2 minutes  No commitment required"})]})]})})},XL=[{id:"nba-sydney-nationals-day1-2026",name:"NBA Sydney Nationals Day 1",date:"2026-02-07"},{id:"nba-sydney-nationals-day2-2026",name:"NBA Sydney Nationals Day 2",date:"2026-02-08"}],e3e=["Bikini","Wellness","Figure","Physique","Bodybuilding","Classic Physique","Sports Model","Fitness Model","Transformation","First Timers","Masters","Other"],t3e=[{id:"iwalk",name:"I-Walk Video",price:250,description:"Your complete walk-on stage moment"},{id:"highlight",name:"Highlight Reel",price:500,description:"Fully edited cinematic highlight"},{id:"combo",name:"Combo Pack",price:700,description:"I-Walk + Highlight Reel",savings:50}],r3e=(t,e)=>t<=1?{total:e,savings:0}:t===2?{total:e*2-50,savings:50}:{total:e*t-100,savings:100},n3e=()=>{const[t]=Jb(),[e,r]=j.useState(1),[n,i]=j.useState(!1),[s,o]=j.useState(!1);j.useEffect(()=>{t.get("success")==="true"&&(i(!0),window.history.replaceState({},"",window.location.pathname)),t.get("canceled")==="true"&&(o(!0),window.history.replaceState({},"",window.location.pathname))},[t]);const[c,u]=j.useState({selectedPackage:null,selectedEvents:[],firstName:"",lastName:"",email:"",phone:"",divisions:[],instagram:"",coachName:"",coachInstagram:"",referenceImage:null,referenceImagePreview:null}),[l,d]=j.useState(!1),f=j.useRef(null),A=j.useRef(null),[p,g]=j.useState(!1),[y,x]=j.useState(!1),[w,E]=j.useState(null),[T,C]=j.useState(null);j.useEffect(()=>{T&&f.current&&(f.current.srcObject=T,f.current.play().then(()=>x(!1)).catch(()=>x(!1)))},[T,p]),j.useEffect(()=>()=>{T&&T.getTracks().forEach(ve=>ve.stop())},[T]);const N=c.selectedPackage?r3e(c.selectedEvents.length,c.selectedPackage.price):{total:0,savings:0},I=(ve,ne)=>{u(ce=>({...ce,[ve]:ne}))},U=ve=>{u(ne=>({...ne,selectedEvents:ne.selectedEvents.includes(ve)?ne.selectedEvents.filter(ce=>ce!==ve):[...ne.selectedEvents,ve]}))},K=ve=>{u(ne=>({...ne,divisions:ne.divisions.includes(ve)?ne.divisions.filter(ce=>ce!==ve):[...ne.divisions,ve]}))},Y=async()=>{try{E(null),x(!0),g(!0);const ve=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user",width:{ideal:640},height:{ideal:480}}});C(ve)}catch(ve){console.error("Camera error:",ve),g(!1),x(!1),E("Unable to access camera. Please upload a photo instead.")}},re=()=>{if(f.current&&A.current){const ve=f.current,ne=A.current;ne.width=ve.videoWidth,ne.height=ve.videoHeight,ne.getContext("2d").drawImage(ve,0,0);const ce=ne.toDataURL("image/jpeg",.8);I("referenceImage",ce),I("referenceImagePreview",ce),T&&(T.getTracks().forEach(ae=>ae.stop()),C(null)),g(!1)}},se=ve=>{const ne=ve.target.files[0];if(ne){const ce=new FileReader;ce.onloadend=()=>{I("referenceImage",ce.result),I("referenceImagePreview",ce.result)},ce.readAsDataURL(ne)}},Ae=async()=>{d(!0);try{const ve=c.selectedEvents.map(be=>XL.find(de=>de.id===be)?.name).join(", "),ne=await pRe({first_name:c.firstName,last_name:c.lastName,email:c.email,phone:c.phone,divisions:c.divisions,instagram:c.instagram,coach_name:c.coachName,coach_instagram:c.coachInstagram,show_name:ve,reference_image_url:c.referenceImage,package_type:c.selectedPackage.id,amount_paid:N.total,order_status:"pending"}),ae=await fetch("https://scarlet-sales-api-vercel.vercel.app/api/create-checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({packageId:c.selectedPackage.id,showCount:c.selectedEvents.length,showNames:ve,customerEmail:c.email,customerName:`${c.firstName} ${c.lastName}`,metadata:{orderId:ne.id,instagram:c.instagram,divisions:c.divisions.join(", "),coachName:c.coachName,coachInstagram:c.coachInstagram}})}),{url:De,error:Oe}=await ae.json();if(Oe)throw new Error(Oe);window.location.href=De}catch(ve){console.error("Order error:",ve),alert("Error creating order. Please try again."),d(!1)}},we=()=>{switch(e){case 1:return c.selectedPackage&&c.selectedEvents.length>0;case 2:return c.firstName&&c.lastName&&c.email&&c.phone&&c.divisions.length>0&&c.instagram&&c.coachName&&c.coachInstagram;case 3:return c.referenceImage;default:return!0}};if(n)return a.jsx("div",{className:"min-h-screen bg-dark-950 flex items-center justify-center p-4 pt-24",children:a.jsxs("div",{className:"bg-dark-900 rounded-2xl p-8 max-w-md w-full text-center border border-gray-800",children:[a.jsx("div",{className:"w-20 h-20 bg-green-500/20 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx("svg",{className:"w-10 h-10 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),a.jsx("h2",{className:"text-3xl font-bold text-white mb-3",children:"Payment Successful!"}),a.jsx("p",{className:"text-gray-400 mb-6",children:"Thanks for your order! We'll find your footage and start editing. You'll receive a confirmation email shortly."}),a.jsx("p",{className:"text-gray-500 text-sm mb-6",children:"Delivery: 5-7 business days"}),a.jsx(gs,{to:"/",className:"inline-block px-8 py-3 bg-primary-600 text-white rounded-lg font-medium hover:bg-primary-700",children:"Back to Home"})]})});if(s)return a.jsx("div",{className:"min-h-screen bg-dark-950 flex items-center justify-center p-4 pt-24",children:a.jsxs("div",{className:"bg-dark-900 rounded-2xl p-8 max-w-md w-full text-center border border-gray-800",children:[a.jsx("div",{className:"w-20 h-20 bg-yellow-500/20 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx("span",{className:"text-4xl",children:""})}),a.jsx("h2",{className:"text-2xl font-bold text-white mb-3",children:"Payment Canceled"}),a.jsx("p",{className:"text-gray-400 mb-6",children:"No worries  your order wasn't charged. You can try again whenever you're ready."}),a.jsx("button",{onClick:()=>o(!1),className:"px-8 py-3 bg-primary-600 text-white rounded-lg font-medium hover:bg-primary-700",children:"Try Again"})]})});const Ce=["Package & Shows","Your Info","Photo","Checkout"];return a.jsxs("div",{className:"min-h-screen bg-dark-950 pt-24 pb-12",children:[a.jsxs("div",{className:"max-w-4xl mx-auto px-4 mb-8 text-center",children:[a.jsx("div",{className:"inline-block mb-4 px-4 py-2 bg-primary-600/10 border border-primary-500/30 rounded-full text-primary-400 text-sm font-medium",children:"NBA Sydney Nationals 2026  Pre-Order Your Footage"}),a.jsxs("h1",{className:"text-4xl md:text-5xl font-black text-white mb-4",children:["Athlete ",a.jsx("span",{className:"text-gradient",children:"Content Order"})]}),a.jsx("p",{className:"text-gray-400 text-lg max-w-2xl mx-auto",children:"Professional multi-angle coverage, cinematic editing, ready for social media."})]}),a.jsxs("div",{className:"max-w-lg mx-auto px-4 mb-6",children:[a.jsx("div",{className:"flex items-center justify-between",children:Ce.map((ve,ne)=>a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold ${e>ne+1?"bg-green-500 text-white":e===ne+1?"bg-primary-600 text-white":"bg-dark-800 text-gray-500"}`,children:e>ne+1?"":ne+1}),ne<Ce.length-1&&a.jsx("div",{className:`w-8 sm:w-16 h-0.5 mx-1 ${e>ne+1?"bg-green-500":"bg-dark-800"}`})]},ne))}),a.jsx("div",{className:"flex justify-between mt-2 text-xs text-gray-500",children:Ce.map((ve,ne)=>a.jsx("span",{className:"text-center w-16",children:ve},ne))})]}),a.jsx("div",{className:"max-w-lg mx-auto px-4",children:a.jsxs("div",{className:"bg-dark-900 rounded-2xl p-6 border border-gray-800",children:[e===1&&a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"Select Package & Shows"}),a.jsx("p",{className:"text-gray-400 text-sm mb-3",children:"Package Type"}),a.jsx("div",{className:"space-y-3 mb-6",children:t3e.map(ve=>{const ne=c.selectedPackage?.id===ve.id;return a.jsx("button",{onClick:()=>I("selectedPackage",ve),className:`w-full p-4 rounded-xl border-2 text-left transition-all ${ne?"border-primary-500 bg-primary-600/10":"border-gray-800 hover:border-gray-700"}`,children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-white",children:ve.name}),a.jsx("p",{className:"text-sm text-gray-500",children:ve.description}),ve.savings&&a.jsxs("span",{className:"text-xs text-green-400",children:["Save $",ve.savings]})]}),a.jsxs("p",{className:"text-xl font-bold text-white",children:["$",ve.price]})]})},ve.id)})}),a.jsx("p",{className:"text-gray-400 text-sm mb-3",children:"Which shows did you compete in?"}),a.jsx("div",{className:"space-y-3 mb-6",children:XL.map(ve=>{const ne=c.selectedEvents.includes(ve.id);return a.jsx("button",{onClick:()=>U(ve.id),className:`w-full p-4 rounded-xl border-2 text-left transition-all ${ne?"border-primary-500 bg-primary-600/10":"border-gray-800 hover:border-gray-700"}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-white",children:ve.name}),a.jsx("p",{className:"text-sm text-gray-500",children:ve.date})]}),a.jsx("div",{className:`w-6 h-6 rounded border-2 flex items-center justify-center ${ne?"border-primary-500 bg-primary-600":"border-gray-600"}`,children:ne&&a.jsx("span",{className:"text-white text-xs",children:""})})]})},ve.id)})}),c.selectedPackage&&c.selectedEvents.length>0&&a.jsx("div",{className:"bg-dark-800/50 rounded-xl p-4",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsxs("p",{className:"text-white font-medium",children:[c.selectedPackage.name,"  ",c.selectedEvents.length," show",c.selectedEvents.length>1?"s":""]}),N.savings>0&&a.jsxs("p",{className:"text-green-400 text-sm",children:["Multi-show discount: Save $",N.savings,"!"]})]}),a.jsxs("p",{className:"text-2xl font-bold text-white",children:["$",N.total]})]})})]}),e===2&&a.jsxs("div",{className:"space-y-4",children:[a.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Your Details"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"First Name *"}),a.jsx("input",{type:"text",value:c.firstName,onChange:ve=>I("firstName",ve.target.value),className:"w-full px-4 py-3 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:border-primary-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Last Name *"}),a.jsx("input",{type:"text",value:c.lastName,onChange:ve=>I("lastName",ve.target.value),className:"w-full px-4 py-3 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:border-primary-500"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Email *"}),a.jsx("input",{type:"email",value:c.email,onChange:ve=>I("email",ve.target.value),className:"w-full px-4 py-3 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:border-primary-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Phone *"}),a.jsx("input",{type:"tel",value:c.phone,onChange:ve=>I("phone",ve.target.value),placeholder:"0412 345 678",className:"w-full px-4 py-3 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:border-primary-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Instagram Handle *"}),a.jsxs("div",{className:"relative",children:[a.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500",children:"@"}),a.jsx("input",{type:"text",value:c.instagram,onChange:ve=>I("instagram",ve.target.value.replace("@","")),placeholder:"yourhandle",className:"w-full pl-8 pr-4 py-3 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:border-primary-500"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Coach's Name *"}),a.jsx("input",{type:"text",value:c.coachName,onChange:ve=>I("coachName",ve.target.value),placeholder:"Coach name",className:"w-full px-4 py-3 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:border-primary-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Coach's Instagram *"}),a.jsxs("div",{className:"relative",children:[a.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500",children:"@"}),a.jsx("input",{type:"text",value:c.coachInstagram,onChange:ve=>I("coachInstagram",ve.target.value.replace("@","")),placeholder:"coachhandle",className:"w-full pl-8 pr-4 py-3 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:border-primary-500"})]})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm text-gray-400 mb-2",children:["Divisions * ",a.jsx("span",{className:"text-gray-600",children:"(select all that apply)"})]}),a.jsx("div",{className:"grid grid-cols-2 gap-2",children:e3e.map(ve=>{const ne=c.divisions.includes(ve);return a.jsxs("button",{type:"button",onClick:()=>K(ve),className:`px-3 py-2 rounded-lg text-sm text-left transition-all ${ne?"bg-primary-600/20 border-2 border-primary-500 text-white":"bg-dark-800 border-2 border-gray-700 text-gray-400 hover:border-gray-600"}`,children:[ne&&a.jsx("span",{className:"mr-1",children:""}),ve]},ve)})})]})]}),e===3&&a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Reference Photo"}),a.jsx("p",{className:"text-gray-500 mb-6",children:"We use AI to find you in the footage"}),c.referenceImagePreview?a.jsxs("div",{className:"text-center",children:[a.jsx("img",{src:c.referenceImagePreview,alt:"Reference",className:"w-40 h-40 object-cover rounded-xl mx-auto border-2 border-primary-500 mb-4"}),a.jsx("button",{onClick:()=>{I("referenceImage",null),I("referenceImagePreview",null)},className:"text-primary-400 text-sm",children:"Choose different photo"})]}):a.jsx("div",{className:"space-y-4",children:p?a.jsxs("div",{className:"text-center",children:[y&&a.jsx("div",{className:"w-full max-w-xs mx-auto h-60 rounded-xl border border-gray-700 bg-dark-800 flex items-center justify-center mb-4",children:a.jsx("span",{className:"text-gray-400",children:"Loading camera..."})}),a.jsx("video",{ref:f,autoPlay:!0,playsInline:!0,muted:!0,style:{width:"100%",maxWidth:"320px",height:"auto",minHeight:"240px",display:y?"none":"block"},className:"mx-auto rounded-xl border border-gray-700 bg-dark-800"}),a.jsx("canvas",{ref:A,className:"hidden"}),a.jsxs("div",{className:"flex gap-3 justify-center mt-4",children:[a.jsx("button",{onClick:()=>{T&&(T.getTracks().forEach(ve=>ve.stop()),C(null)),g(!1),x(!1)},className:"px-6 py-3 bg-gray-700 text-white rounded-lg font-medium",children:"Cancel"}),a.jsx("button",{onClick:re,className:"px-8 py-3 bg-primary-600 text-white rounded-lg font-medium",children:" Capture"})]})]}):a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:Y,className:"w-full py-8 bg-dark-800 border-2 border-dashed border-gray-700 rounded-xl text-gray-400 hover:border-primary-500 hover:text-white transition-colors flex flex-col items-center gap-2",children:[a.jsx("span",{className:"text-4xl",children:""}),a.jsx("span",{children:"Take a Selfie"})]}),w&&a.jsx("p",{className:"text-red-400 text-sm text-center",children:w}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"flex-1 h-px bg-dark-800"}),a.jsx("span",{className:"text-gray-600 text-sm",children:"or"}),a.jsx("div",{className:"flex-1 h-px bg-dark-800"})]}),a.jsxs("label",{className:"block w-full py-8 bg-dark-800 border-2 border-dashed border-gray-700 rounded-xl text-gray-400 hover:border-primary-500 hover:text-white transition-colors text-center cursor-pointer",children:[a.jsx("span",{className:"text-4xl block mb-2",children:""}),a.jsx("span",{children:"Upload Photo"}),a.jsx("input",{type:"file",accept:"image/*",onChange:se,className:"hidden"})]})]})})]}),e===4&&a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"Confirm Order"}),a.jsxs("div",{className:"space-y-4 mb-6",children:[a.jsxs("div",{className:"bg-dark-800/50 rounded-xl p-4",children:[a.jsx("p",{className:"text-gray-500 text-sm mb-2",children:"Package"}),a.jsx("p",{className:"text-white font-semibold",children:c.selectedPackage?.name}),a.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Shows:"}),c.selectedEvents.map(ve=>a.jsxs("p",{className:"text-white text-sm",children:[" ",XL.find(ne=>ne.id===ve)?.name]},ve))]}),a.jsxs("div",{className:"bg-dark-800/50 rounded-xl p-4 space-y-2",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-500",children:"Name"}),a.jsxs("span",{className:"text-white",children:[c.firstName," ",c.lastName]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-500",children:"Email"}),a.jsx("span",{className:"text-white text-sm",children:c.email})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-500",children:"Phone"}),a.jsx("span",{className:"text-white",children:c.phone})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-500",children:"Instagram"}),a.jsxs("span",{className:"text-white",children:["@",c.instagram]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-500",children:"Divisions"}),a.jsx("span",{className:"text-white text-right text-sm",children:c.divisions.join(", ")})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-500",children:"Coach"}),a.jsxs("span",{className:"text-white",children:[c.coachName," (@",c.coachInstagram,")"]})]})]}),c.referenceImagePreview&&a.jsxs("div",{className:"flex items-center gap-4 bg-dark-800/50 rounded-xl p-4",children:[a.jsx("img",{src:c.referenceImagePreview,alt:"Reference",className:"w-12 h-12 object-cover rounded-lg"}),a.jsx("span",{className:"text-gray-400 text-sm",children:"Reference photo "})]})]}),a.jsx("div",{className:"bg-primary-600/10 border border-primary-500/30 rounded-xl p-4 mb-4",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsxs("p",{className:"text-white font-semibold",children:[c.selectedPackage?.name,"  ",c.selectedEvents.length]}),N.savings>0&&a.jsxs("p",{className:"text-green-400 text-sm",children:["Saving $",N.savings]})]}),a.jsxs("p",{className:"text-3xl font-bold text-white",children:["$",N.total]})]})})]}),a.jsxs("div",{className:"flex gap-3 mt-6",children:[e>1&&a.jsx("button",{onClick:()=>r(e-1),className:"flex-1 py-3 bg-dark-800 text-white rounded-lg font-medium hover:bg-dark-700",children:"Back"}),e<4?a.jsx("button",{onClick:()=>r(e+1),disabled:!we(),className:`flex-1 py-3 rounded-lg font-medium ${we()?"bg-primary-600 text-white hover:bg-primary-700":"bg-dark-800 text-gray-600 cursor-not-allowed"}`,children:"Continue"}):a.jsx("button",{onClick:Ae,disabled:l,className:"flex-1 py-4 bg-green-500 text-white rounded-lg font-bold hover:bg-green-600 disabled:opacity-50 text-lg",children:l?"Processing...":`Pay $${N.total} AUD`})]})]})})]})};function i3e(){const[t,e]=j.useState([]),[r,n]=j.useState(!0);j.useEffect(()=>{i()},[]);async function i(){const{data:o,error:c}=await Rr.from("organizations").select("*").eq("active",!0).order("name");!c&&o&&e(o),n(!1)}const s=[{name:"Sarah M.",event:"NBA QLD State Titles",quote:"The highlight reel captured my stage moment perfectly. Worth every cent!",image:null},{name:"Jake T.",event:"WNG Championship",quote:"Professional quality footage that I use for all my social media. Highly recommend!",image:null},{name:"Michelle R.",event:"NBA Sydney Nationals",quote:"Finally have professional content of my competition. The team was amazing!",image:null}];return a.jsxs("div",{className:"min-h-screen bg-black text-white",children:[a.jsx("section",{className:"relative py-20 px-4",children:a.jsxs("div",{className:"max-w-6xl mx-auto text-center",children:[a.jsx("span",{className:"inline-block px-4 py-2 bg-red-600/20 text-red-500 rounded-full text-sm font-medium mb-6",children:"Professional Athlete Content"}),a.jsxs("h1",{className:"text-4xl md:text-6xl font-bold mb-6",children:["Capture Your ",a.jsx("span",{className:"text-red-500",children:"Moment"})]}),a.jsx("p",{className:"text-xl text-gray-400 max-w-3xl mx-auto mb-8",children:"Multi-angle coverage, cinematic editing, delivered ready for social media. We've captured thousands of athletes across bodybuilding, grappling, and combat sports."}),a.jsx("button",{onClick:()=>document.getElementById("select-org")?.scrollIntoView({behavior:"smooth"}),className:"inline-block px-8 py-4 bg-red-600 hover:bg-red-700 rounded-lg font-semibold text-lg transition-colors cursor-pointer",children:"Order Your Content "})]})}),a.jsx("section",{className:"py-16 px-4 bg-gray-900/50",children:a.jsxs("div",{className:"max-w-6xl mx-auto",children:[a.jsx("h2",{className:"text-3xl font-bold text-center mb-12",children:"What You Get"}),a.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[a.jsxs("div",{className:"bg-gray-800/50 p-6 rounded-xl border border-gray-700",children:[a.jsx("div",{className:"w-12 h-12 bg-red-600/20 rounded-lg flex items-center justify-center mb-4",children:a.jsx("svg",{className:"w-6 h-6 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),a.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Multi-Angle Coverage"}),a.jsx("p",{className:"text-gray-400",children:"Professional cameras capturing every angle of your performance"})]}),a.jsxs("div",{className:"bg-gray-800/50 p-6 rounded-xl border border-gray-700",children:[a.jsx("div",{className:"w-12 h-12 bg-red-600/20 rounded-lg flex items-center justify-center mb-4",children:a.jsx("svg",{className:"w-6 h-6 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 4V2a1 1 0 011-1h8a1 1 0 011 1v2m-9 0h10m-10 0a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V6a2 2 0 00-2-2"})})}),a.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Cinematic Editing"}),a.jsx("p",{className:"text-gray-400",children:"Color graded, music synced, ready to share highlight reels"})]}),a.jsxs("div",{className:"bg-gray-800/50 p-6 rounded-xl border border-gray-700",children:[a.jsx("div",{className:"w-12 h-12 bg-red-600/20 rounded-lg flex items-center justify-center mb-4",children:a.jsx("svg",{className:"w-6 h-6 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})}),a.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Fast Delivery"}),a.jsx("p",{className:"text-gray-400",children:"Your content delivered digitally, typically within 2 weeks"})]})]})]})}),a.jsx("section",{className:"py-16 px-4",children:a.jsxs("div",{className:"max-w-6xl mx-auto",children:[a.jsx("h2",{className:"text-3xl font-bold text-center mb-4",children:"Athletes Love Their Content"}),a.jsx("p",{className:"text-gray-400 text-center mb-12",children:"Join thousands of athletes who've captured their moments"}),a.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:s.map((o,c)=>a.jsxs("div",{className:"bg-gray-800/30 p-6 rounded-xl border border-gray-700",children:[a.jsx("div",{className:"flex items-center gap-1 mb-4",children:[...Array(5)].map((u,l)=>a.jsx("svg",{className:"w-5 h-5 text-yellow-500",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},l))}),a.jsxs("p",{className:"text-gray-300 mb-4",children:['"',o.quote,'"']}),a.jsxs("div",{className:"text-sm",children:[a.jsx("span",{className:"font-semibold text-white",children:o.name}),a.jsxs("span",{className:"text-gray-500",children:["  ",o.event]})]})]},c))})]})}),a.jsx("section",{id:"select-org",className:"py-16 px-4 bg-gray-900/50",children:a.jsxs("div",{className:"max-w-4xl mx-auto",children:[a.jsx("h2",{className:"text-3xl font-bold text-center mb-4",children:"Select Your Organization"}),a.jsx("p",{className:"text-gray-400 text-center mb-12",children:"Choose the federation or event organizer you competed with"}),r?a.jsx("div",{className:"text-center text-gray-400",children:"Loading organizations..."}):t.length===0?a.jsx("div",{className:"text-center text-gray-400",children:"No organizations available yet."}):a.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:t.map(o=>a.jsxs(gs,{to:`/order/${o.slug}`,className:"flex items-center gap-4 p-6 bg-gray-800/50 hover:bg-gray-800 border border-gray-700 hover:border-red-500/50 rounded-xl transition-all group",children:[a.jsx("div",{className:"w-16 h-16 bg-gray-700 rounded-lg flex items-center justify-center text-2xl font-bold text-red-500",children:o.name.split(" ").map(c=>c[0]).join("").slice(0,3)}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-lg font-semibold group-hover:text-red-500 transition-colors",children:o.name}),o.description&&a.jsx("p",{className:"text-sm text-gray-400",children:o.description})]}),a.jsx("svg",{className:"w-6 h-6 text-gray-500 group-hover:text-red-500 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]},o.id))})]})}),a.jsx("section",{className:"py-16 px-4",children:a.jsxs("div",{className:"max-w-3xl mx-auto",children:[a.jsx("h2",{className:"text-3xl font-bold text-center mb-12",children:"Frequently Asked Questions"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("details",{className:"bg-gray-800/30 rounded-xl border border-gray-700 p-4 group",children:[a.jsxs("summary",{className:"font-semibold cursor-pointer list-none flex justify-between items-center",children:["When will I receive my content?",a.jsx("span",{className:"text-gray-500 group-open:rotate-180 transition-transform",children:""})]}),a.jsx("p",{className:"mt-4 text-gray-400",children:"Content is typically delivered within 2 weeks of the event, depending on the package and event size."})]}),a.jsxs("details",{className:"bg-gray-800/30 rounded-xl border border-gray-700 p-4 group",children:[a.jsxs("summary",{className:"font-semibold cursor-pointer list-none flex justify-between items-center",children:["What's included in the highlight reel?",a.jsx("span",{className:"text-gray-500 group-open:rotate-180 transition-transform",children:""})]}),a.jsx("p",{className:"mt-4 text-gray-400",children:"A fully edited 60-90 second video featuring your best moments, color graded with music and transitions, optimized for social media."})]}),a.jsxs("details",{className:"bg-gray-800/30 rounded-xl border border-gray-700 p-4 group",children:[a.jsxs("summary",{className:"font-semibold cursor-pointer list-none flex justify-between items-center",children:["Can I order after the event?",a.jsx("span",{className:"text-gray-500 group-open:rotate-180 transition-transform",children:""})]}),a.jsx("p",{className:"mt-4 text-gray-400",children:"Yes! You can pre-order before the event or order afterwards. We capture all athletes at every event we cover."})]}),a.jsxs("details",{className:"bg-gray-800/30 rounded-xl border border-gray-700 p-4 group",children:[a.jsxs("summary",{className:"font-semibold cursor-pointer list-none flex justify-between items-center",children:["What if I competed in multiple shows?",a.jsx("span",{className:"text-gray-500 group-open:rotate-180 transition-transform",children:""})]}),a.jsx("p",{className:"mt-4 text-gray-400",children:"No problem! Select all the shows you competed in during checkout. Multi-show bundles may be available."})]})]})]})}),a.jsx("section",{className:"py-16 px-4 bg-gradient-to-b from-gray-900/50 to-black",children:a.jsxs("div",{className:"max-w-3xl mx-auto text-center",children:[a.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Ready to Get Your Content?"}),a.jsx("p",{className:"text-gray-400 mb-8",children:"Select your organization above to see available events and packages."}),a.jsx("button",{onClick:()=>document.getElementById("select-org")?.scrollIntoView({behavior:"smooth"}),className:"inline-block px-8 py-4 bg-red-600 hover:bg-red-700 rounded-lg font-semibold text-lg transition-colors cursor-pointer",children:"Select Organization "})]})})]})}const s3e="https://scarlet-sales-api-vercel.vercel.app";function a3e(){const{orgSlug:t}=tA(),e=Ac();Jb();const[r,n]=j.useState(null),[i,s]=j.useState([]),[o,c]=j.useState([]),[u,l]=j.useState(!0),[d,f]=j.useState(null),[A,p]=j.useState(()=>{const Be=new URLSearchParams(window.location.search),nt=window.location.hash;return Be.get("success")==="true"||nt.includes("success=true")}),[g,y]=j.useState(()=>{const Be=new URLSearchParams(window.location.search),nt=window.location.hash;return Be.get("canceled")==="true"||nt.includes("canceled=true")});j.useEffect(()=>{if(A||g){const Be=window.location.origin+window.location.pathname+"#/order/"+t;window.history.replaceState({},"",Be)}},[A,g,t]);const[x,w]=j.useState(1),[E,T]=j.useState(null),[C,N]=j.useState([]),[I,U]=j.useState({firstName:"",lastName:"",email:"",phone:"",divisions:[],instagram:"",coachName:"",coachInstagram:""}),[K,Y]=j.useState(!1);j.useEffect(()=>{re()},[t]);async function re(){l(!0),f(null);const{data:Be,error:nt}=await Rr.from("organizations").select("*").eq("slug",t).eq("active",!0).single();if(nt||!Be){f("Organization not found"),l(!1);return}n(Be);const{data:Ge}=await Rr.from("events").select("*").eq("organization_id",Be.id).eq("active",!0).order("date",{ascending:!1});s(Ge||[]);const{data:ft}=await Rr.from("packages").select("*").eq("organization_id",Be.id).eq("active",!0).order("sort_order");c(ft||[]),l(!1)}function se(Be){N(nt=>nt.includes(Be)?nt.filter(Ge=>Ge!==Be):[...nt,Be])}function Ae(Be){U(nt=>({...nt,[Be.target.name]:Be.target.value}))}function we(){return E&&C.length>0}function Ce(){return I.firstName&&I.lastName&&I.email&&I.phone&&I.divisions.length>0&&I.instagram&&I.coachName&&I.coachInstagram}const[ve,ne]=j.useState([]),[ce,ae]=j.useState([]),[De,Oe]=j.useState([]),[be,de]=j.useState(!1);j.useEffect(()=>{C.length>0?xe():(ne([]),ae([]))},[C]);async function xe(){de(!0);const{data:Be}=await Rr.from("division_categories").select("*").in("event_id",C).eq("active",!0).order("sort_order");if(Be&&Be.length>0){ne(Be);const nt=Be.map(ft=>ft.id),{data:Ge}=await Rr.from("division_subdivisions").select("*").in("category_id",nt).eq("active",!0).order("sort_order");ae(Ge||[])}else ne([]),ae([]);de(!1)}function je(Be){Oe(nt=>nt.includes(Be)?nt.filter(Ge=>Ge!==Be):[...nt,Be])}function Me(Be){return ce.filter(nt=>nt.category_id===Be)}function Re(Be,nt){const Ge=`${Be} - ${nt}`;U(ft=>({...ft,divisions:ft.divisions.includes(Ge)?ft.divisions.filter(Dt=>Dt!==Ge):[...ft.divisions,Ge]}))}function it(Be){return I.divisions.filter(nt=>nt.startsWith(Be+" - "))}async function ht(){if(Ce()){Y(!0);try{const Be=o.find(rt=>rt.id===E),nt=i.filter(rt=>C.includes(rt.id)).map(rt=>rt.name).join(", "),Ge=Be.price*C.length,Dt=await(await fetch(`${s3e}/api/create-checkout`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({packageType:Be.name,packagePrice:Ge,showNames:nt,customerName:`${I.firstName} ${I.lastName}`,customerEmail:I.email,metadata:{organizationId:r.id,organizationSlug:t,eventIds:C.join(","),packageId:E,firstName:I.firstName,lastName:I.lastName,phone:I.phone,divisions:I.divisions.join(", "),instagram:I.instagram,coachName:I.coachName,coachInstagram:I.coachInstagram}})})).json();if(Dt.url){const{error:rt}=await Rr.from("content_orders").insert({organization_id:r.id,event_id:C[0],package_id:E,first_name:I.firstName,last_name:I.lastName,email:I.email,phone:I.phone,division:I.divisions.join(", "),instagram:I.instagram,coach_name:I.coachName,coach_instagram:I.coachInstagram,amount:Ge,stripe_session_id:Dt.sessionId,status:"pending"});rt&&console.error("Failed to save order:",rt),window.location.href=Dt.url}else throw new Error("No checkout URL received")}catch(Be){console.error("Checkout error:",Be),alert("Error creating checkout. Please try again.")}finally{Y(!1)}}}return A?a.jsx("div",{className:"min-h-screen bg-black text-white flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-gray-900 rounded-2xl p-8 max-w-md w-full text-center border border-gray-800",children:[a.jsx("div",{className:"w-20 h-20 bg-green-500/20 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx("svg",{className:"w-10 h-10 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),a.jsx("h2",{className:"text-3xl font-bold mb-3",children:"You're Locked In! "}),a.jsx("p",{className:"text-gray-400 mb-6",children:"Thanks for your order! We'll capture your performance at the event and deliver your professionally edited content afterwards."}),a.jsx("p",{className:"text-gray-500 text-sm mb-6",children:"Check your email for confirmation details."}),a.jsx(gs,{to:"/content",className:"inline-block px-8 py-3 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700",children:"Back to Events"})]})}):g?a.jsx("div",{className:"min-h-screen bg-black text-white flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-gray-900 rounded-2xl p-8 max-w-md w-full text-center border border-gray-800",children:[a.jsx("div",{className:"w-20 h-20 bg-yellow-500/20 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx("span",{className:"text-4xl",children:""})}),a.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Payment Canceled"}),a.jsx("p",{className:"text-gray-400 mb-6",children:"No worries  your order wasn't charged. You can try again whenever you're ready."}),a.jsx("button",{onClick:()=>y(!1),className:"px-8 py-3 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700",children:"Try Again"})]})}):u?a.jsx("div",{className:"min-h-screen bg-black text-white flex items-center justify-center",children:a.jsx("div",{className:"text-gray-400",children:"Loading..."})}):d?a.jsxs("div",{className:"min-h-screen bg-black text-white flex flex-col items-center justify-center gap-4",children:[a.jsx("div",{className:"text-red-500",children:d}),a.jsx(gs,{to:"/content",className:"text-gray-400 hover:text-white",children:" Back to all organizations"})]}):a.jsx("div",{className:"min-h-screen bg-black text-white py-12 px-4",children:a.jsxs("div",{className:"max-w-3xl mx-auto",children:[a.jsxs("button",{onClick:()=>e("/content"),className:"inline-flex items-center gap-2 text-gray-400 hover:text-white mb-8 mt-4",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})," All Organizations"]}),a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("span",{className:"inline-block px-4 py-2 bg-red-600/20 text-red-500 rounded-full text-sm font-medium mb-4",children:r.name}),a.jsxs("h1",{className:"text-3xl md:text-4xl font-bold mb-2",children:["Order Your ",a.jsx("span",{className:"text-red-500",children:"Content"})]}),a.jsx("p",{className:"text-gray-400",children:"Select your package and events below"})]}),a.jsx("div",{className:"flex items-center justify-center gap-4 mb-12",children:[{num:1,label:"Package & Events"},{num:2,label:"Your Info"},{num:3,label:"Checkout"}].map((Be,nt)=>a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-semibold ${x>=Be.num?"bg-red-600 text-white":"bg-gray-700 text-gray-400"}`,children:Be.num}),a.jsx("span",{className:`text-sm hidden sm:inline ${x>=Be.num?"text-white":"text-gray-500"}`,children:Be.label}),nt<2&&a.jsx("div",{className:"w-8 h-px bg-gray-700 mx-2"})]},Be.num))}),x===1&&a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"bg-gray-900/50 rounded-xl p-6 border border-gray-800",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Select Package"}),a.jsx("div",{className:"space-y-3",children:o.map(Be=>a.jsx("button",{onClick:()=>T(Be.id),className:`w-full p-4 rounded-lg border text-left transition-all ${E===Be.id?"border-red-500 bg-red-500/10":"border-gray-700 hover:border-gray-600 bg-gray-800/50"}`,children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold",children:Be.name}),a.jsx("div",{className:"text-sm text-gray-400",children:Be.description}),Be.name.toLowerCase().includes("combo")&&a.jsx("span",{className:"text-xs text-green-500 mt-1 inline-block font-semibold",children:"Save $50"})]}),a.jsxs("div",{className:"text-xl font-bold",children:["$",Be.price]})]})},Be.id))})]}),a.jsxs("div",{className:"bg-gray-900/50 rounded-xl p-6 border border-gray-800",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Which events did you compete in?"}),i.length===0?a.jsx("p",{className:"text-gray-400",children:"No events available for this organization yet."}):a.jsx("div",{className:"space-y-3",children:i.map(Be=>a.jsxs("button",{onClick:()=>se(Be.id),className:`w-full p-4 rounded-lg border text-left transition-all flex justify-between items-center ${C.includes(Be.id)?"border-red-500 bg-red-500/10":"border-gray-700 hover:border-gray-600 bg-gray-800/50"}`,children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold",children:Be.name}),a.jsxs("div",{className:"text-sm text-gray-400",children:[Be.date&&new Date(Be.date).toLocaleDateString("en-AU",{year:"numeric",month:"short",day:"numeric"}),Be.location&&`  ${Be.location}`]})]}),a.jsx("div",{className:`w-6 h-6 rounded border-2 flex items-center justify-center ${C.includes(Be.id)?"border-red-500 bg-red-500":"border-gray-600"}`,children:C.includes(Be.id)&&a.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})})]},Be.id))})]}),a.jsx("button",{onClick:()=>w(2),disabled:!we(),className:`w-full py-4 rounded-lg font-semibold text-lg transition-all ${we()?"bg-red-600 hover:bg-red-700 text-white":"bg-gray-700 text-gray-500 cursor-not-allowed"}`,children:"Continue "})]}),x===2&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-gray-900/50 rounded-xl p-6 border border-gray-800",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Your Information"}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"First Name *"}),a.jsx("input",{type:"text",name:"firstName",value:I.firstName,onChange:Ae,className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg focus:border-red-500 focus:outline-none",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Last Name *"}),a.jsx("input",{type:"text",name:"lastName",value:I.lastName,onChange:Ae,className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg focus:border-red-500 focus:outline-none",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Email *"}),a.jsx("input",{type:"email",name:"email",value:I.email,onChange:Ae,className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg focus:border-red-500 focus:outline-none",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Phone *"}),a.jsx("input",{type:"tel",name:"phone",value:I.phone,onChange:Ae,className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg focus:border-red-500 focus:outline-none",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Instagram Handle *"}),a.jsx("input",{type:"text",name:"instagram",value:I.instagram,onChange:Ae,placeholder:"@yourhandle",className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg focus:border-red-500 focus:outline-none",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Coach's Name *"}),a.jsx("input",{type:"text",name:"coachName",value:I.coachName,onChange:Ae,className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg focus:border-red-500 focus:outline-none",required:!0})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Coach's Instagram Handle *"}),a.jsx("input",{type:"text",name:"coachInstagram",value:I.coachInstagram,onChange:Ae,placeholder:"@coachhandle",className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg focus:border-red-500 focus:outline-none",required:!0})]})]})]}),a.jsxs("div",{className:"bg-gray-900/50 rounded-xl p-6 border border-gray-800",children:[a.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Division/Category *"}),a.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Click a category to expand, then select your divisions"}),be?a.jsx("div",{className:"text-center text-gray-400 py-8",children:"Loading divisions..."}):ve.length===0?a.jsxs("div",{className:"text-center text-gray-400 py-8 border border-gray-700 rounded-lg",children:["No divisions configured for the selected event(s) yet.",a.jsx("br",{}),a.jsx("span",{className:"text-sm",children:"Contact the organizer to set up divisions."})]}):a.jsx("div",{className:"space-y-2",children:ve.map(Be=>{const nt=De.includes(Be.id),Ge=it(Be.name).length,ft=Me(Be.id);return a.jsxs("div",{className:"border border-gray-700 rounded-lg overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>je(Be.id),className:`w-full p-4 flex justify-between items-center transition-colors ${Ge>0?"bg-red-500/10 border-l-4 border-l-red-500":"bg-gray-800/50 hover:bg-gray-800"}`,children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"font-medium",children:Be.name}),Ge>0&&a.jsxs("span",{className:"text-xs bg-red-500 text-white px-2 py-0.5 rounded-full",children:[Ge," selected"]})]}),a.jsx("svg",{className:`w-5 h-5 text-gray-400 transition-transform ${nt?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),nt&&a.jsx("div",{className:"p-4 pt-2 bg-gray-900/50 border-t border-gray-700",children:ft.length===0?a.jsx("p",{className:"text-sm text-gray-500 italic",children:"No subdivisions available"}):a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:ft.map(Dt=>{const rt=`${Be.name} - ${Dt.name}`,kt=I.divisions.includes(rt);return a.jsx("button",{type:"button",onClick:()=>Re(Be.name,Dt.name),className:`p-3 text-sm rounded-lg border text-left transition-all ${kt?"border-red-500 bg-red-500/20 text-white":"border-gray-600 hover:border-gray-500 bg-gray-800/50 text-gray-300"}`,children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:`w-4 h-4 rounded border-2 flex items-center justify-center ${kt?"border-red-500 bg-red-500":"border-gray-500"}`,children:kt&&a.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),a.jsx("span",{children:Dt.name})]})},Dt.id)})})})]},Be.id)})}),I.divisions.length>0&&a.jsxs("div",{className:"mt-4 p-3 bg-gray-800/50 rounded-lg border border-gray-700",children:[a.jsxs("div",{className:"text-sm text-gray-400 mb-2",children:["Selected divisions (",I.divisions.length,"):"]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:I.divisions.map(Be=>a.jsxs("span",{className:"inline-flex items-center gap-1 text-xs bg-red-500/20 text-red-400 px-2 py-1 rounded-full border border-red-500/30",children:[Be,a.jsx("button",{type:"button",onClick:()=>{const[nt,Ge]=Be.split(" - ");Re(nt,Ge)},className:"hover:text-white",children:""})]},Be))})]})]}),a.jsxs("div",{className:"bg-gray-900/50 rounded-xl p-6 border border-gray-800",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Order Summary"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-400",children:"Package:"}),a.jsx("span",{children:o.find(Be=>Be.id===E)?.name})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-400",children:"Events:"}),a.jsx("span",{className:"text-right",children:i.filter(Be=>C.includes(Be.id)).map(Be=>Be.name).join(", ")})]}),a.jsx("hr",{className:"border-gray-700 my-3"}),a.jsxs("div",{className:"flex justify-between text-lg font-semibold",children:[a.jsx("span",{children:"Total:"}),a.jsxs("span",{className:"text-red-500",children:["$",(o.find(Be=>Be.id===E)?.price||0)*C.length," AUD",C.length>1&&a.jsxs("span",{className:"text-sm text-gray-400 font-normal ml-2",children:["($",o.find(Be=>Be.id===E)?.price,"  ",C.length," events)"]})]})]})]})]}),a.jsxs("div",{className:"flex gap-4",children:[a.jsx("button",{onClick:()=>w(1),className:"flex-1 py-4 rounded-lg font-semibold border border-gray-600 hover:border-gray-500 transition-colors",children:" Back"}),a.jsx("button",{onClick:ht,disabled:!Ce()||K,className:`flex-1 py-4 rounded-lg font-semibold transition-all ${Ce()&&!K?"bg-red-600 hover:bg-red-700 text-white":"bg-gray-700 text-gray-500 cursor-not-allowed"}`,children:K?"Processing...":"Proceed to Payment "})]})]})]})})}const o3e=t=>{if(!t)return"there";const e={fortitude:"Fortitude Boxing","fortitude-boxing":"Fortitude Boxing",inception:"Inception Fight Series","inception-fight-series":"Inception Fight Series",qbjjc:"QBJJC",wng:"WNG Grappling",artemis:"Artemis Grappling","artemis-grappling":"Artemis Grappling",m16:"M16 BJJ","m16-bjj":"M16 BJJ",nba:"Natural Bodybuilding Australia",eternal:"Eternal MMA","eternal-mma":"Eternal MMA",beatdown:"Beatdown Promotions",honour:"Honour Premier League",aggression:"Aggression Thai Boxing"};return e[t.toLowerCase()]?e[t.toLowerCase()]:t.split("-").map(r=>r.charAt(0).toUpperCase()+r.slice(1)).join(" ")},l3e=()=>{const{orgSlug:t}=tA(),e=o3e(t);return a.jsxs("div",{className:"pt-20 sm:pt-24 min-h-screen",children:[a.jsx("section",{className:"py-12 sm:py-20 px-4 sm:px-6 bg-gradient-to-b from-primary-950/30 to-transparent",children:a.jsx("div",{className:"max-w-4xl mx-auto text-center",children:a.jsxs(Or.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[a.jsx("img",{src:"/ffm-logo.jpg",alt:"Fit Focus Media",className:"w-24 h-24 sm:w-32 sm:h-32 mx-auto mb-6 rounded-xl"}),t&&a.jsxs("p",{className:"text-lg text-primary-400 mb-2 font-medium",children:["Hi ",e," "]}),a.jsxs("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-black mb-4",children:[a.jsx("span",{className:"text-gradient",children:"Professional Live Production"}),a.jsx("br",{}),a.jsx("span",{className:"text-white",children:"for Combat Sports"})]}),a.jsx("p",{className:"text-xl sm:text-2xl text-gray-300 mb-2 font-semibold",children:"Zero Cost. Zero Risk. New Revenue."}),a.jsx("p",{className:"text-gray-400 max-w-2xl mx-auto",children:"We produce your event for free. You earn money from PPV sales. Professional broadcast quality without the production headaches."})]})})}),a.jsx("section",{className:"py-8 sm:py-12 px-4 sm:px-6 bg-dark-900 border-y border-gray-800",children:a.jsx("div",{className:"max-w-4xl mx-auto",children:a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-6",children:[{icon:kN,value:"25+",label:"Events Produced"},{icon:E2,value:"4",label:"Countries"},{icon:$h,value:"50K+",label:"Viewers Reached"},{icon:$A,value:"100%",label:"Client Satisfaction"}].map((r,n)=>a.jsxs(Or.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:n*.1},className:"text-center",children:[a.jsx(r.icon,{className:"w-6 h-6 text-primary-500 mx-auto mb-2"}),a.jsx("p",{className:"text-2xl sm:text-3xl font-black text-primary-500",children:r.value}),a.jsx("p",{className:"text-xs sm:text-sm text-gray-400",children:r.label})]},n))})})}),a.jsx("section",{className:"py-12 sm:py-16 px-4 sm:px-6",children:a.jsxs("div",{className:"max-w-4xl mx-auto",children:[a.jsx(Or.h2,{initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0},className:"text-2xl sm:text-3xl font-black text-center mb-10",children:a.jsxs("span",{className:"text-gradient",children:["What We Can Do For ",t?e:"You"]})}),a.jsx("div",{className:"space-y-6",children:[{icon:yh,title:"Live Streaming & PPV",points:["Multi-camera professional broadcast","PPV platform setup & management","Live graphics & instant replay","Full show recording for VOD"]},{icon:gE,title:"Event Photography",points:["Ring-side action shots","Athlete portraits & walk-outs","Complete digital gallery","Same-week delivery"]},{icon:qf,title:"Content Production",points:["Social media highlight clips","Event recap videos","Fighter promo content","YouTube-ready formats"]}].map((r,n)=>a.jsxs(Or.div,{initial:{opacity:0,x:-20},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{delay:n*.1},className:"bg-dark-800 border border-gray-700 rounded-xl p-6 flex gap-4",children:[a.jsx("div",{className:"w-12 h-12 bg-primary-600/20 rounded-xl flex items-center justify-center flex-shrink-0",children:a.jsx(r.icon,{className:"w-6 h-6 text-primary-500"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg sm:text-xl font-bold text-white mb-2",children:r.title}),a.jsx("ul",{className:"grid grid-cols-1 sm:grid-cols-2 gap-1",children:r.points.map((i,s)=>a.jsxs("li",{className:"flex items-center gap-2 text-sm text-gray-300",children:[a.jsx(_o,{className:"w-4 h-4 text-green-500 flex-shrink-0"}),i]},s))})]})]},n))})]})}),a.jsx("section",{className:"py-12 sm:py-16 px-4 sm:px-6 bg-dark-900/50",children:a.jsxs("div",{className:"max-w-4xl mx-auto",children:[a.jsx(Or.h2,{initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0},className:"text-2xl sm:text-3xl font-black text-center mb-10",children:a.jsx("span",{className:"text-gradient",children:"How It Works"})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[{step:"1",title:"We Produce",desc:"Full professional broadcast production  cameras, switching, graphics, streaming. All handled by our team."},{step:"2",title:"Fans Pay",desc:"Your audience purchases PPV access at $20-30. We handle the platform, payments, and viewer experience."},{step:"3",title:"You Earn",desc:"You receive revenue share from every sale. Zero upfront cost, zero risk  just new income."}].map((r,n)=>a.jsxs(Or.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:n*.15},className:"text-center",children:[a.jsx("div",{className:"w-14 h-14 bg-primary-600 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx("span",{className:"text-2xl font-black text-white",children:r.step})}),a.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:r.title}),a.jsx("p",{className:"text-gray-400 text-sm",children:r.desc})]},n))}),a.jsxs(Or.div,{initial:{opacity:0,scale:.95},whileInView:{opacity:1,scale:1},viewport:{once:!0},className:"bg-gradient-to-r from-green-900/40 to-emerald-900/40 border-2 border-green-500/50 rounded-xl p-6 text-center",children:[a.jsx(_f,{className:"w-10 h-10 text-green-400 mx-auto mb-3"}),a.jsx("h3",{className:"text-2xl font-black text-white mb-2",children:"Your Cost: $0"}),a.jsx("p",{className:"text-gray-300 text-sm max-w-xl mx-auto",children:"We cover all production costs. You pay nothing upfront. You earn revenue from PPV sales that you weren't making before."})]})]})}),a.jsx("section",{className:"py-12 sm:py-16 px-4 sm:px-6",children:a.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[a.jsx(Or.h2,{initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0},className:"text-2xl sm:text-3xl font-black mb-6",children:a.jsx("span",{className:"text-gradient",children:"Who We've Worked With"})}),a.jsx("p",{className:"text-gray-400 mb-8",children:"Boxing, MMA, BJJ, Muay Thai, Kickboxing  we've covered them all"}),a.jsx("div",{className:"flex flex-wrap justify-center gap-4 text-sm",children:["Fortitude Boxing","WNG Grappling","Inception Fight Series","QBJJC","Natural Bodybuilding Australia","Artemis Grappling","M16 BJJ"].map((r,n)=>a.jsx("span",{className:`px-4 py-2 rounded-full text-gray-300 ${r.toLowerCase().includes(t?.toLowerCase()||"---")?"bg-primary-600/30 border border-primary-500/50 text-primary-300":"bg-dark-800 border border-gray-700"}`,children:r},n))})]})}),a.jsx("section",{className:"py-12 sm:py-16 px-4 sm:px-6 bg-dark-900/50",children:a.jsx("div",{className:"max-w-2xl mx-auto text-center",children:a.jsxs(Or.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},children:[a.jsxs("h2",{className:"text-2xl sm:text-3xl font-black mb-4",children:["Ready to ",a.jsx("span",{className:"text-gradient",children:"Get Started?"})]}),a.jsx("p",{className:"text-gray-400 mb-8",children:t?`Let's discuss how FFM can help ${e} reach more fans and generate new revenue.`:"Get a free analysis of your organization and see exactly how much revenue professional media coverage could generate."}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center mb-8",children:[a.jsxs(gs,{to:"/book",className:"group px-8 py-4 bg-primary-600 hover:bg-primary-700 text-white font-black rounded-lg text-lg transition-all hover:scale-105 inline-flex items-center justify-center gap-2",children:["Book a Call",a.jsx(Rh,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]}),a.jsxs("a",{href:"mailto:brandon@fitfocusmedia.com.au",className:"px-8 py-4 bg-white/10 hover:bg-white/20 text-white font-bold rounded-lg text-lg transition-all border border-white/20 inline-flex items-center justify-center gap-2",children:[a.jsx(tu,{className:"w-5 h-5"}),"Email Us"]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4 text-sm text-gray-400",children:[a.jsxs("a",{href:"mailto:brandon@fitfocusmedia.com.au",className:"flex items-center gap-2 hover:text-primary-400 transition-colors",children:[a.jsx(tu,{className:"w-4 h-4"}),"brandon@fitfocusmedia.com.au"]}),a.jsxs("a",{href:"tel:0411934935",className:"flex items-center gap-2 hover:text-primary-400 transition-colors",children:[a.jsx(ay,{className:"w-4 h-4"}),"0411 934 935"]})]})]})})}),a.jsx("section",{className:"py-6 px-4 sm:px-6 border-t border-gray-800",children:a.jsx("div",{className:"max-w-4xl mx-auto text-center",children:a.jsxs("p",{className:"text-sm text-gray-500",children:["Learn more at"," ",a.jsx("a",{href:"https://fitfocusmedia.com.au",className:"text-primary-400 hover:text-primary-300",children:"fitfocusmedia.com.au"})]})})})]})},Fre=j.createContext({}),UM=()=>{const t=j.useContext(Fre);if(!t)throw new Error("useAuth must be used within AuthProvider");return t},c3e=({children:t})=>{const[e,r]=j.useState(null),[n,i]=j.useState(null),[s,o]=j.useState(!0);j.useEffect(()=>{Rr.auth.getSession().then(({data:{session:A}})=>{i(A),r(A?.user??null),o(!1)});const{data:{subscription:f}}=Rr.auth.onAuthStateChange((A,p)=>{i(p),r(p?.user??null)});return()=>f.unsubscribe()},[]);const d={user:e,session:n,loading:s,signIn:async(f,A)=>{const{data:p,error:g}=await Rr.auth.signInWithPassword({email:f,password:A});if(g)throw g;return p},signInWithMagicLink:async(f,A)=>{const{data:p,error:g}=await Rr.auth.signInWithOtp({email:f.toLowerCase(),options:{emailRedirectTo:A||window.location.origin}});if(g)throw g;return p},signOut:async()=>{const{error:f}=await Rr.auth.signOut();if(f)throw f}};return a.jsx(Fre.Provider,{value:d,children:t})};function id({children:t}){const{user:e,loading:r}=UM();return r?a.jsx("div",{className:"min-h-screen bg-dark-950 flex items-center justify-center",children:a.jsx("div",{className:"text-white text-xl",children:"Loading..."})}):e?t:a.jsx(aue,{to:"/portal",replace:!0})}function Bd({children:t}){const{user:e,signOut:r}=UM(),n=Ac(),i=Ef(),s=async()=>{try{await r(),n("/portal")}catch(u){console.error("Error signing out:",u)}},o=u=>i.pathname.startsWith(u),c=[{name:"Contracts",path:"/portal/contracts"},{name:"Pipeline",path:"/portal/pipeline"},{name:"Proposals",path:"/portal/proposals"},{name:"Outreach",path:"/portal/outreach"},{name:"Onboarding",path:"/portal/onboarding"},{name:"Content",path:"/portal/content-admin"},{name:"Orders",path:"/portal/orders"},{name:"Livestream",path:"/portal/livestream"},{name:"Crews",path:"/portal/crews"},{name:"Pricing",path:"/portal/pricing"}];return a.jsxs("div",{className:"min-h-screen bg-[#0d0d1a] flex flex-col overflow-x-hidden w-full max-w-full",children:[a.jsx("header",{className:"print:hidden bg-gradient-to-r from-[#1a1a2e] to-[#16162a] border-b border-gray-800/50 w-full max-w-full overflow-hidden",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-3 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"flex items-center justify-between h-16",children:[a.jsxs("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>n("/portal/contracts"),children:[a.jsxs("span",{className:"text-lg font-black tracking-wider",children:[a.jsx("span",{className:"text-red-500",children:"FIT FOCUS"})," ",a.jsx("span",{className:"text-white",children:"MEDIA"})]}),a.jsx("span",{className:"text-gray-700",children:"|"}),a.jsx("span",{className:"text-gray-400 font-medium",children:"Portal"})]}),e&&a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("span",{className:"text-gray-500 text-sm hidden sm:block",children:e.email}),a.jsx("button",{onClick:s,className:"px-4 py-2 bg-gray-800 hover:bg-gray-700 text-gray-300 hover:text-white rounded-lg transition-all text-sm font-medium border border-gray-700/50",children:"Sign Out"})]})]}),e&&a.jsx("div",{className:"flex gap-1 sm:gap-4 -mb-px overflow-x-auto scrollbar-hide pb-px",children:c.map(u=>a.jsxs("button",{onClick:()=>n(u.path),className:`relative px-3 sm:px-4 py-3 font-bold text-xs sm:text-sm transition-colors whitespace-nowrap flex-shrink-0 ${o(u.path)?"text-red-500":"text-gray-400 hover:text-gray-300"}`,children:[u.name,o(u.path)&&a.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-red-500"})]},u.path))})]})}),a.jsx("main",{className:"flex-1",children:t})]})}function u3e(){const[t,e]=j.useState(""),[r,n]=j.useState(""),[i,s]=j.useState(""),[o,c]=j.useState(!1),{signIn:u}=UM(),l=Ac(),d=async f=>{f.preventDefault(),s(""),c(!0);try{await u(t,r),l("/portal/contracts")}catch(A){s(A.message||"Failed to sign in")}finally{c(!1)}};return a.jsx("div",{className:"min-h-screen bg-dark-950 flex items-center justify-center px-4",children:a.jsxs("div",{className:"max-w-md w-full",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"Portal Login"}),a.jsx("p",{className:"text-gray-400",children:"Fit Focus Media Contract Management"})]}),a.jsx("div",{className:"bg-dark-900 rounded-lg p-8 shadow-xl",children:a.jsxs("form",{onSubmit:d,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300 mb-2",children:"Email"}),a.jsx("input",{id:"email",type:"email",value:t,onChange:f=>e(f.target.value),required:!0,className:"w-full px-4 py-3 bg-dark-800 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your email"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300 mb-2",children:"Password"}),a.jsx("input",{id:"password",type:"password",value:r,onChange:f=>n(f.target.value),required:!0,className:"w-full px-4 py-3 bg-dark-800 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:""})]}),i&&a.jsx("div",{className:"bg-red-900/30 border border-red-500 text-red-200 px-4 py-3 rounded-lg",children:i}),a.jsx("button",{type:"submit",disabled:o,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-800 text-white font-medium py-3 px-6 rounded-lg transition-colors",children:o?"Signing in...":"Sign In"})]})})]})})}function $M(t){const e=t.contract_data||{},r=(u,l="[NOT SET]")=>u||`<span class="text-gray-500">${l}</span>`,n=(u,l,d="[NOT SET]")=>!u&&!l?`<span class="text-gray-500">${d}</span>`:u?!l||l===u?u:`${u}${l}`:l,i=u=>u?"":"";let s="";e.multi_events&&e.multi_events.length>0&&e.multi_events.forEach((u,l)=>{(u.name||u.date||u.venue)&&(s+=`
          <tr>
            <td class="border border-gray-700 px-4 py-2">${l+1}</td>
            <td class="border border-gray-700 px-4 py-2">${r(u.name)}</td>
            <td class="border border-gray-700 px-4 py-2">${r(u.date)}</td>
            <td class="border border-gray-700 px-4 py-2">${r(u.venue)}</td>
          </tr>
        `)});const o=u=>u?`$${parseFloat(u).toLocaleString()}`:"$0";let c="";return e.athlete_revenue_ffm_100?c="<p><strong> FFM retains 100%</strong> of Athlete Media Package sales. This is reflected in the zero upfront cost and Client deliverables provided at no charge.</p>":c=`
      <table class="w-full border-collapse border border-gray-700 my-4">
        <tr><th class="border border-gray-700 px-4 py-2 bg-gray-800">Party</th><th class="border border-gray-700 px-4 py-2 bg-gray-800">Share</th></tr>
        <tr><td class="border border-gray-700 px-4 py-2"><strong>FFM</strong></td><td class="border border-gray-700 px-4 py-2">${r(e.athlete_ffm_split,"80")}%</td></tr>
        <tr><td class="border border-gray-700 px-4 py-2"><strong>Client</strong></td><td class="border border-gray-700 px-4 py-2">${r(e.athlete_client_split,"20")}%</td></tr>
      </table>
      <p>The Client's share will be paid monthly, with a statement of sales provided.</p>
    `,`
    <div class="contract-content prose prose-invert max-w-none">
      <h1 class="text-3xl font-bold mb-6">EVENT MEDIA COVERAGE & PARTNERSHIP AGREEMENT</h1>
      
      <p><strong>AGREEMENT</strong> made on <strong>${r(e.agreement_date,new Date().toLocaleDateString())}</strong></p>
      
      <p><strong>BETWEEN:</strong></p>
      
      <p>
        <strong>Fit Focus Media</strong> ABN ${r(e.ffm_abn,"[ABN]")}<br>
        Represented by: Brandon Hibbs<br>
        Email: info@fitfocusmedia.com.au<br>
        Website: www.fitfocusmedia.com.au<br>
        (hereinafter referred to as <strong>"FFM"</strong> or <strong>"the Media Provider"</strong>)
      </p>
      
      <p><strong>AND:</strong></p>
      
      <p>
        <strong>${r(e.org_name,"[ORGANIZATION NAME]")}</strong><br>
        Represented by: ${r(e.promoter_name,"[PROMOTER NAME]")}<br>
        Position: ${r(e.promoter_position,"[POSITION]")}<br>
        Email: ${r(e.promoter_email,"[EMAIL]")}<br>
        Phone: ${r(e.promoter_phone,"[PHONE]")}<br>
        (hereinafter referred to as <strong>"the Client"</strong> or <strong>"the Event Organiser"</strong>)
      </p>
      
      <hr class="my-6 border-gray-700">
      
      <h2 class="text-2xl font-bold mt-6 mb-4">1. EVENT DETAILS</h2>
      <table class="w-full border-collapse border border-gray-700 my-4">
        <tr><th class="border border-gray-700 px-4 py-2 bg-gray-800">Field</th><th class="border border-gray-700 px-4 py-2 bg-gray-800">Details</th></tr>
        <tr><td class="border border-gray-700 px-4 py-2"><strong>Event Name</strong></td><td class="border border-gray-700 px-4 py-2">${r(e.event_name)}</td></tr>
        <tr><td class="border border-gray-700 px-4 py-2"><strong>Event Date(s)</strong></td><td class="border border-gray-700 px-4 py-2">${r(e.event_date)}</td></tr>
        <tr><td class="border border-gray-700 px-4 py-2"><strong>Event Location</strong></td><td class="border border-gray-700 px-4 py-2">${r(e.event_location)}</td></tr>
        <tr><td class="border border-gray-700 px-4 py-2"><strong>Event Type</strong></td><td class="border border-gray-700 px-4 py-2">${r(e.event_type,"BJJ / Grappling Competition")}</td></tr>
        <tr><td class="border border-gray-700 px-4 py-2"><strong>Estimated Matches</strong></td><td class="border border-gray-700 px-4 py-2">${r(e.estimated_matches)}</td></tr>
        <tr><td class="border border-gray-700 px-4 py-2"><strong>Expected Athlete Participants</strong></td><td class="border border-gray-700 px-4 py-2">${r(e.expected_athletes)}</td></tr>
        <tr><td class="border border-gray-700 px-4 py-2"><strong>Expected Audience</strong></td><td class="border border-gray-700 px-4 py-2">${r(e.expected_audience)}</td></tr>
      </table>
      
      <h2 class="text-2xl font-bold mt-6 mb-4">2. PARTNERSHIP MODEL  ZERO UPFRONT COST</h2>
      
      <h3 class="text-xl font-bold mt-4 mb-2">2.1 No Upfront Fee</h3>
      <p>FFM will provide full professional media coverage for the Event at <strong>no upfront cost</strong> to the Client.</p>
      
      <h3 class="text-xl font-bold mt-4 mb-2">2.2 What FFM Provides at Zero Cost</h3>
      <ul class="list-disc pl-6 my-4">
        <li>Multi-camera professional video coverage (${n(e.camera_angles,e.camera_angles_max,"2")} camera angles)</li>
        ${e.photography_type==="professional"?"<li>Professional event photography</li>":""}
        ${e.photography_type==="base"?"<li>Base event photography</li>":""}
        <li>Livestream and/or PPV broadcast production (if applicable)</li>
        <li>Post-event highlight reel for the Client's promotional use</li>
        <li>Access to the FFM Athlete Media Portal for athlete content delivery</li>
        <li>On-site crew (${n(e.crew_size,e.crew_size_max,"2")} persons)</li>
      </ul>
      
      <h3 class="text-xl font-bold mt-4 mb-2">2.3 Multi-Event Commitment</h3>
      <p>This Agreement covers <strong>${r(e.multi_event_count,"1")}</strong> events over a period of <strong>${r(e.multi_event_duration,"[DURATION]")}</strong>${s?", as scheduled below:":"."}</p>
      
      ${s?`
        <table class="w-full border-collapse border border-gray-700 my-4">
          <tr><th class="border border-gray-700 px-4 py-2 bg-gray-800">#</th><th class="border border-gray-700 px-4 py-2 bg-gray-800">Event Name</th><th class="border border-gray-700 px-4 py-2 bg-gray-800">Date</th><th class="border border-gray-700 px-4 py-2 bg-gray-800">Venue</th></tr>
          ${s}
        </table>
      `:""}
      
      <h2 class="text-2xl font-bold mt-6 mb-4">3. SCOPE OF MEDIA COVERAGE</h2>
      
      <h3 class="text-xl font-bold mt-4 mb-2">3.1 Post-Production Deliverables for the Client</h3>
      <ul class="list-disc pl-6 my-4">
        <li>One (1) Event Highlight Reel (60120 seconds) within ${n(e.highlight_delivery_days,e.highlight_delivery_days_max,"7")} business days</li>
        <li>${n(e.social_clips_count,e.social_clips_count_max,"5")} social media clips within ${n(e.social_clips_delivery_days,e.social_clips_delivery_days_max,"5")} business days</li>
        ${e.photography_type&&e.photography_type!=="none"?`<li>Curated photo gallery of ${n(e.photo_count,e.photo_count_max,"50")} edited images</li>`:""}
      </ul>
      
      <h3 class="text-xl font-bold mt-4 mb-2">3.2 Livestream / PPV Production</h3>
      <p>
        <strong>Livestream included:</strong> ${i(e.livestream_included)} ${e.livestream_included?"Yes":"No"}<br>
        <strong>PPV included:</strong> ${i(e.ppv_included)} ${e.ppv_included?"Yes":"No"}
      </p>
      ${e.ppv_included?`
        <p>
          <strong>Platform:</strong> ${r(e.ppv_platform)}<br>
          <strong>PPV Price Point:</strong> ${e.ppv_price_type==="range"&&e.ppv_price_max?`${o(e.ppv_price)} - ${o(e.ppv_price_max)}`:o(e.ppv_price)} per viewer
        </p>
      `:""}
      
      <h2 class="text-2xl font-bold mt-6 mb-4">4. LIVESTREAM & PPV REVENUE SHARE</h2>
      ${e.ppv_included?`
        <table class="w-full border-collapse border border-gray-700 my-4">
          <tr><th class="border border-gray-700 px-4 py-2 bg-gray-800">Party</th><th class="border border-gray-700 px-4 py-2 bg-gray-800">Share</th></tr>
          <tr><td class="border border-gray-700 px-4 py-2"><strong>FFM</strong></td><td class="border border-gray-700 px-4 py-2">${r(e.ppv_ffm_split,"70")}%</td></tr>
          <tr><td class="border border-gray-700 px-4 py-2"><strong>Client</strong></td><td class="border border-gray-700 px-4 py-2">${r(e.ppv_client_split,"30")}%</td></tr>
        </table>
        <p>The Client's share will be paid within ${r(e.ppv_payment_days,"21")} days of each Event via bank transfer.</p>
      `:"<p>PPV not included in this agreement.</p>"}
      
      <h2 class="text-2xl font-bold mt-6 mb-4">5. ATHLETE MEDIA PACKAGES</h2>
      
      <h3 class="text-xl font-bold mt-4 mb-2">5.1 Overview</h3>
      <p>FFM operates a direct-to-athlete media sales model through the <strong>FFM Athlete Media Portal</strong>.</p>
      
      <h3 class="text-xl font-bold mt-4 mb-2">5.2 Available Packages</h3>
      ${e.athlete_packages&&e.athlete_packages.length>0?`
        <table class="w-full border-collapse border border-gray-700 my-4">
          <tr>
            <th class="border border-gray-700 px-4 py-2 bg-gray-800 text-left">Package</th>
            <th class="border border-gray-700 px-4 py-2 bg-gray-800 text-left">Price</th>
            <th class="border border-gray-700 px-4 py-2 bg-gray-800 text-left">Description</th>
          </tr>
          ${e.athlete_packages.map(u=>`
            <tr>
              <td class="border border-gray-700 px-4 py-2"><strong>${u.name||"[Package Name]"}</strong></td>
              <td class="border border-gray-700 px-4 py-2">${o(u.price)}</td>
              <td class="border border-gray-700 px-4 py-2">${u.description||"-"}</td>
            </tr>
          `).join("")}
        </table>
      `:`
        <p><strong> VIP COVERAGE</strong>  ${o(e.vip_price||350)}</p>
        <p><strong> MATCH PACKAGE</strong>  ${o(e.match_price||175)}</p>
        <p><strong> SEASON PASS</strong>  ${o(e.season_price||899)}/year</p>
      `}
      
      <h3 class="text-xl font-bold mt-4 mb-2">5.3 Athlete Media Package Revenue Split</h3>
      ${c}
      
      ${e.add_ons&&e.add_ons.length>0?`
      <h2 class="text-2xl font-bold mt-6 mb-4">6. CLIENT ADD-ONS</h2>
      <p>The following additional services have been included in this Agreement at the Client's request:</p>
      <table class="w-full border-collapse border border-gray-700 my-4">
        <tr>
          <th class="border border-gray-700 px-4 py-2 bg-gray-800 text-left">Add-On</th>
          <th class="border border-gray-700 px-4 py-2 bg-gray-800 text-left">Price</th>
          <th class="border border-gray-700 px-4 py-2 bg-gray-800 text-left">Description</th>
        </tr>
        ${e.add_ons.map(u=>`
          <tr>
            <td class="border border-gray-700 px-4 py-2"><strong>${u.name||"[Add-On Name]"}</strong></td>
            <td class="border border-gray-700 px-4 py-2">${o(u.price)}</td>
            <td class="border border-gray-700 px-4 py-2">${u.description||"-"}</td>
          </tr>
        `).join("")}
        <tr class="bg-gray-800">
          <td class="border border-gray-700 px-4 py-2"><strong>TOTAL ADD-ONS</strong></td>
          <td class="border border-gray-700 px-4 py-2"><strong>${o(e.add_ons.reduce((u,l)=>u+(parseFloat(l.price)||0),0))}</strong></td>
          <td class="border border-gray-700 px-4 py-2"></td>
        </tr>
      </table>
      <p>Payment for add-ons is due prior to the Event date unless otherwise agreed in writing.</p>
      
      <h2 class="text-2xl font-bold mt-6 mb-4">7. EXCLUSIVE MEDIA COVERAGE RIGHTS</h2>
      `:`
      <h2 class="text-2xl font-bold mt-6 mb-4">6. EXCLUSIVE MEDIA COVERAGE RIGHTS</h2>
      `}
      <p>The Client grants FFM <strong>exclusive rights</strong> to provide professional video and photography media coverage services at the Event.</p>
      
      <h2 class="text-2xl font-bold mt-6 mb-4">7. ACCESS & LOGISTICS</h2>
      <ul class="list-disc pl-6 my-4">
        <li>FFM requires venue access at least ${r(e.setup_hours,"2")} hours prior to first match</li>
        <li>Crew size: ${n(e.crew_size,e.crew_size_max,"2")} persons with complimentary entry</li>
        ${e.internet_speed?`<li>Internet upload speed: minimum ${e.internet_speed} Mbps</li>`:""}
        <li>Event schedule to be provided ${r(e.schedule_hours_before,"48")} hours before Event</li>
        <li>Athlete list to be provided ${r(e.athlete_list_days_before,"7")} days before Event</li>
      </ul>
      
      <h3 class="text-xl font-bold mt-4 mb-2">7.1 Athlete Contact Information</h3>
      <p>The Client <strong>must provide</strong> FFM with contact information for all registered athletes, including but not limited to:</p>
      <ul class="list-disc pl-6 my-4">
        <li>Full name</li>
        <li>Email address</li>
        <li>Phone number (where available)</li>
        <li>Social media handles (Instagram, etc.)</li>
      </ul>
      <p>This information will be used by FFM for:</p>
      <ul class="list-disc pl-6 my-4">
        <li>Delivering content and media packages to athletes via the FFM Athlete Media Portal</li>
        <li>Marketing and promotional communications regarding event content and athlete media services</li>
        <li>Tagging athletes in social media content</li>
      </ul>
      <p>The Client warrants that appropriate consent has been obtained from athletes for their contact information to be shared with FFM for these purposes, as outlined in Section 12.</p>
      
      <h2 class="text-2xl font-bold mt-6 mb-4">8. CANCELLATION & RESCHEDULING</h2>
      <p>Cancellation less than 15 days before Event: Client will pay ${o(e.cancellation_fee||500)} cancellation fee plus non-recoverable expenses.</p>
      
      <h2 class="text-2xl font-bold mt-6 mb-4">9. TERM & TERMINATION</h2>
      <p>Initial term: ${r(e.initial_term_months,"12")} months. Auto-renews for ${r(e.renewal_period_months,"12")}-month periods unless ${r(e.nonrenewal_notice_days,"60")} days' written notice provided.</p>
      <p>Termination: ${r(e.termination_notice_days,"30")} days' written notice. Remedy period: ${r(e.remedy_period_days,"14")} days.</p>
      
      <h2 class="text-2xl font-bold mt-6 mb-4">10. LIABILITY & INSURANCE</h2>
      <p>FFM holds public liability insurance of ${o(e.pli_amount||2e7)}.</p>
      
      <h2 class="text-2xl font-bold mt-6 mb-4">11. INTELLECTUAL PROPERTY & OWNERSHIP</h2>
      
      <h3 class="text-xl font-bold mt-4 mb-2">11.1 Ownership of Content</h3>
      <p>The Client agrees that, subject to the rights and licenses granted herein, FFM is and will remain the <strong>sole and exclusive owner</strong> of all right, title, and interest, throughout the world, to all video footage, photographs, and other media content ("Content") produced under this Agreement, and any copies thereof. Except as expressly provided in this Agreement, FFM reserves all rights and licenses not expressly granted.</p>
      
      <h3 class="text-xl font-bold mt-4 mb-2">11.2 License to Client</h3>
      <p>FFM hereby grants to the Client a <strong>non-exclusive, perpetual license</strong> to use the deliverables specified in Section 3.1 (Event Highlight Reel, social media clips, and curated photo gallery) for promotional purposes related to the Event and Client's organization. This license is non-transferable and does not include the right to sublicense.</p>
      
      <h3 class="text-xl font-bold mt-4 mb-2">11.3 Restrictions on Use</h3>
      <p>The Client will NOT use the Content for any of the following purposes without prior written permission from FFM:</p>
      <ul class="list-disc pl-6 my-4">
        <li><strong>No Unlawful Use:</strong> The Client will not use the Content in any unlawful manner, including but not limited to pornography or defamation.</li>
        <li><strong>No Standalone File Distribution:</strong> The Client will not distribute raw footage or allow Content to be downloaded, extracted, or redistributed by third parties.</li>
        <li><strong>No Trademark Use:</strong> The Client will not use the Content in any trademark, design, logo, or service mark without FFM's written consent.</li>
        <li><strong>No Products for Resale:</strong> The Client will not use the Content in any goods or products where the Content is the primary value.</li>
        <li><strong>No Alterations:</strong> The Client will not alter, modify, or create derivative works from the Content without prior written permission from FFM.</li>
        <li><strong>No Sublicensing:</strong> The Client will not sublicense, sell, or transfer rights to the Content to any third party.</li>
      </ul>
      
      <h3 class="text-xl font-bold mt-4 mb-2">11.4 Credit Requirements</h3>
      <p>The Client must include appropriate credit to <strong>"Fit Focus Media"</strong> or <strong>"@fitfocusmedia"</strong> when publishing or sharing any Content produced under this Agreement on social media, websites, or promotional materials.</p>
      
      <h2 class="text-2xl font-bold mt-6 mb-4">12. MEDIA RELEASE & CONSENT</h2>
      
      <h3 class="text-xl font-bold mt-4 mb-2">12.1 Athlete Media Release</h3>
      <p>The Client acknowledges that FFM will capture video footage and photographs of athletes, coaches, officials, and spectators at the Event. The Client warrants that:</p>
      <ul class="list-disc pl-6 my-4">
        <li>Appropriate media release and consent has been obtained from all athletes participating in the Event, either through registration terms & conditions or separate media release forms.</li>
        <li>Athletes have been informed that professional media coverage will be present and content may be used for promotional, commercial, and broadcast purposes.</li>
        <li>Minors participating in the Event have appropriate parental/guardian consent for media capture and publication.</li>
      </ul>
      
      <h3 class="text-xl font-bold mt-4 mb-2">12.2 Grant of Rights</h3>
      <p>FFM is granted the <strong>perpetual and irrevocable right</strong> to use, publish, and distribute video and photographs captured at the Event for editorial, trade, advertising, promotional, and commercial purposes in any manner and medium, including but not limited to:</p>
      <ul class="list-disc pl-6 my-4">
        <li>Social media platforms and websites</li>
        <li>Marketing and promotional materials</li>
        <li>Broadcast and streaming services</li>
        <li>Athlete Media Packages sold through the FFM Portal</li>
        <li>Portfolio and showcase purposes</li>
      </ul>
      
      <h3 class="text-xl font-bold mt-4 mb-2">12.3 Implied Consent & Opt-Out Procedure</h3>
      <p>The parties agree that:</p>
      <ul class="list-disc pl-6 my-4">
        <li><strong>Implied Consent:</strong> All athletes, by registering for and competing in the Event, are deemed to have consented to the capture, use, and publication of their image, likeness, and performance by FFM for the purposes outlined in this Agreement.</li>
        <li><strong>Opt-Out Requirement:</strong> Any athlete who does not consent to media capture and publication must notify FFM <strong>in writing</strong> (via email to info@fitfocusmedia.com.au) no less than <strong>48 hours prior</strong> to the Event. FFM will make reasonable efforts to exclude such athletes from published content, however FFM cannot guarantee exclusion from all footage, particularly wide-angle or crowd shots.</li>
        <li><strong>Client Responsibility:</strong> The Client is solely responsible for communicating media coverage terms to athletes through registration materials, event signage, and/or announcements. The Client shall include appropriate notice in registration terms and conditions that professional media coverage will be present and content may be used commercially.</li>
        <li><strong>Liability:</strong> The Client assumes all liability for any claims arising from athletes who allege they did not consent to media capture. FFM shall not be held liable for any such claims, and the Client shall indemnify FFM accordingly as outlined in Section 13.</li>
      </ul>
      
      <h2 class="text-2xl font-bold mt-6 mb-4">13. INDEMNIFICATION</h2>
      <p>The Client will <strong>indemnify, defend, and hold harmless</strong> FFM, its officers, employees, agents, and contractors from all liability, claims, demands, causes of action, judgments, damages, and expenses (including reasonable attorneys' fees and costs) arising out of or as a result of:</p>
      <ul class="list-disc pl-6 my-4">
        <li>The Client's use of the Content in violation of this Agreement</li>
        <li>Any breach of the Client's representations or warranties under this Agreement</li>
        <li>Any claim by a third party (including athletes, spectators, or venue operators) relating to the Event</li>
        <li>The Client's failure to obtain proper media releases or consents</li>
      </ul>
      <p>This indemnification does not apply to claims arising solely from FFM's willful misconduct, gross negligence, or bad faith.</p>
      
      <h2 class="text-2xl font-bold mt-6 mb-4">14. LIMITATION OF LIABILITY</h2>
      <p><strong>EXCEPT FOR ANY REMEDIES THAT CANNOT BE EXCLUDED OR LIMITED BY LAW, NEITHER PARTY, NOR ANY AFFILIATE, WILL BE LIABLE UNDER THIS AGREEMENT TO THE OTHER PARTY FOR ANY INDIRECT, INCIDENTAL, CONSEQUENTIAL, SPECIAL, RELIANCE, OR PUNITIVE DAMAGES OR LOST OR IMPUTED PROFITS, LOST DATA, OR COST OF PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES.</strong></p>
      <p>FFM's total liability under this Agreement shall not exceed the total fees paid or payable by the Client under this Agreement in the twelve (12) months preceding the claim.</p>
      
      <h2 class="text-2xl font-bold mt-6 mb-4">15. FORCE MAJEURE</h2>
      <p>Neither party shall be liable for any failure or delay in performing their obligations under this Agreement if such failure or delay results from circumstances beyond the reasonable control of that party, including but not limited to: acts of God, natural disasters, pandemic, government actions, war, terrorism, civil unrest, or failure of third-party services.</p>
      
      <h2 class="text-2xl font-bold mt-6 mb-4">16. CONFIDENTIALITY</h2>
      <p>Each party agrees to keep confidential and not disclose to any third party any confidential information received from the other party, including but not limited to business strategies, financial information, athlete data, and the specific commercial terms of this Agreement, except as required by law or with prior written consent.</p>
      
      <h2 class="text-2xl font-bold mt-6 mb-4">17. ASSIGNMENT</h2>
      <p>This Agreement may not be assigned by the Client without FFM's prior written consent. FFM may assign this Agreement, in whole or in part, to any affiliate or successor without the Client's consent.</p>
      
      <h2 class="text-2xl font-bold mt-6 mb-4">18. DISPUTE RESOLUTION</h2>
      <p>Any dispute arising from this Agreement shall first be resolved through good-faith negotiation between the parties. If the dispute cannot be resolved through negotiation within thirty (30) days, the dispute shall be submitted to mediation. If mediation fails, the dispute will be resolved through binding arbitration conducted in Brisbane, Queensland in accordance with the rules of the Resolution Institute.</p>
      
      <h2 class="text-2xl font-bold mt-6 mb-4">19. GOVERNING LAW</h2>
      <p>This Agreement shall be governed by and construed in accordance with the laws of <strong>Queensland, Australia</strong>, without reference to rules governing choice of laws. The parties submit to the exclusive jurisdiction of the courts of Queensland.</p>
      
      <h2 class="text-2xl font-bold mt-6 mb-4">20. SEVERABILITY</h2>
      <p>If any provision of this Agreement is held invalid, illegal, or unenforceable by a court of competent jurisdiction, the remainder of the Agreement will remain valid and enforceable, and the parties will negotiate in good faith a substitute provision which most nearly reflects the original intent.</p>
      
      <h2 class="text-2xl font-bold mt-6 mb-4">21. ENTIRE AGREEMENT</h2>
      <p>This Agreement represents and constitutes the <strong>entire agreement</strong> between the parties with respect to the subject matter hereof, and supersedes and merges all prior negotiations, agreements, and understandings, oral or written. This Agreement may not be altered, modified, or amended except in writing signed by both parties.</p>
      
      <h2 class="text-2xl font-bold mt-6 mb-4">22. NOTICES</h2>
      <p>All notices, demands, or other communications under this Agreement shall be in writing and delivered via email with read receipt, registered mail, or hand delivery to the addresses specified in this Agreement. Notices delivered by email shall be deemed received on the business day sent (or the next business day if sent after 5pm AEST). Mailed notices shall be deemed received three (3) business days after posting.</p>
      
      ${e.custom_notes&&e.custom_notes.length>0?`
      <h2 class="text-2xl font-bold mt-6 mb-4">ADDITIONAL TERMS & NOTES</h2>
      <p>The following additional terms and event-specific provisions apply to this Agreement:</p>
      ${e.custom_notes.map((u,l)=>`
        <div class="bg-gray-800/50 border border-gray-700 rounded-lg p-4 my-4">
          <h3 class="text-lg font-bold mb-2">${u.title||`Custom Note ${l+1}`}</h3>
          <p class="whitespace-pre-wrap">${u.content||"[No content provided]"}</p>
        </div>
      `).join("")}
      `:""}
      
      <hr class="my-6 border-gray-700">
      
      <h2 class="text-2xl font-bold mt-6 mb-4">SIGNATURES</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-6">
        <div class="border border-gray-700 rounded-lg p-6">
          <h3 class="text-lg font-bold mb-4">Fit Focus Media</h3>
          ${t.ffm_signature?`
            <img src="${t.ffm_signature}" alt="FFM Signature" class="max-w-full h-auto border border-gray-600 p-2 rounded bg-white mb-4" style="max-width: 300px;">
            <p><strong>Name:</strong> Brandon Hibbs</p>
            <p><strong>Signed:</strong> ${new Date(t.ffm_signed_at).toLocaleString("en-AU",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0,timeZoneName:"short"})}</p>
          `:'<p class="text-gray-500">[PENDING FFM SIGNATURE]</p>'}
        </div>
        
        <div class="border border-gray-700 rounded-lg p-6">
          <h3 class="text-lg font-bold mb-4">${r(e.org_name,"[ORGANIZATION]")}</h3>
          ${t.client_signature?`
            <img src="${t.client_signature}" alt="Client Signature" class="max-w-full h-auto border border-gray-600 p-2 rounded bg-white mb-4" style="max-width: 300px;">
            <p><strong>Name:</strong> ${r(e.promoter_name)}</p>
            <p><strong>Position:</strong> ${r(e.promoter_position)}</p>
            <p><strong>Signed:</strong> ${new Date(t.client_signed_at).toLocaleString("en-AU",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0,timeZoneName:"short"})}</p>
          `:'<p class="text-gray-500">[PENDING CLIENT SIGNATURE]</p>'}
        </div>
      </div>
    </div>
  `}function GP(t){const e=document.createElement("canvas");e.width=t.width,e.height=t.height;const r=e.getContext("2d"),s=t.getContext("2d").getImageData(0,0,t.width,t.height).data,o=r.createImageData(t.width,t.height),c=o.data;for(let u=0;u<s.length;u+=4)s[u+3]>10?(c[u]=0,c[u+1]=0,c[u+2]=0,c[u+3]=255):(c[u]=255,c[u+1]=255,c[u+2]=255,c[u+3]=255);return r.putImageData(o,0,0),e.toDataURL("image/png")}function Ure(t){return t.getContext("2d").getImageData(0,0,t.width,t.height).data.some(n=>n!==0)}function WP(t){const e=window.location.hostname;let r;return e==="localhost"||e.includes("192.168.")||e.includes("100.")?r="https://clawdbots-mini.tailcfdc1.ts.net:5198":r=window.location.origin,`${r}/#/contract/${t}`}function d3e(t,e,r){const n=WP(t);return{subject:`Event Media Coverage Agreement  Fit Focus Media  ${r}`,body:`Hi ${e},

Please find your Event Media Coverage & Partnership Agreement with Fit Focus Media ready for review and signature.

Review & Sign Here:
${n}

Once you've reviewed the terms, you can sign directly on the page. If you have any questions, reply to this email.

Cheers,
Brandon Hibbs
Fit Focus Media
info@fitfocusmedia.com.au
www.fitfocusmedia.com.au`}}function HM(t){return{draft:"",sent:"",viewed:"",signed:"",expired:""}[t]||""}function $re(t){return`${{draft:"bg-gray-600",sent:"bg-blue-600",viewed:"bg-yellow-600",signed:"bg-green-600",expired:"bg-red-600"}[t]||"bg-gray-600"} text-white px-3 py-1 rounded-full text-sm font-medium inline-flex items-center gap-2`}const h3e={draft:"bg-gray-700 text-gray-200",sent:"bg-blue-600/20 text-blue-400 border border-blue-500/30",viewed:"bg-yellow-600/20 text-yellow-400 border border-yellow-500/30",signed:"bg-green-600/20 text-green-400 border border-green-500/30",expired:"bg-red-600/20 text-red-400 border border-red-500/30"};function f3e(){const[t,e]=j.useState([]),[r,n]=j.useState([]),[i,s]=j.useState(!0),[o,c]=j.useState(""),[u,l]=j.useState(""),[d,f]=j.useState("created_desc"),[A,p]=j.useState({total:0,signedThisMonth:0,pending:0,drafts:0,value:0}),g=Ac();j.useEffect(()=>{y()},[]),j.useEffect(()=>{w()},[t,o,u,d]);const y=async()=>{try{const E=await k5();e(E),x(E)}catch(E){console.error("Error loading contracts:",E)}finally{s(!1)}},x=E=>{const T=new Date,C=E.filter(K=>{if(K.status!=="signed")return!1;const Y=new Date(K.created_at);return Y.getMonth()===T.getMonth()&&Y.getFullYear()===T.getFullYear()}),N=E.filter(K=>K.status==="sent"||K.status==="viewed"),I=E.filter(K=>K.status==="draft"),U=E.reduce((K,Y)=>{const re=Y.contract_data?.vip_price||0,se=Y.contract_data?.expected_athletes||0;return K+re*se*.3},0);p({total:E.length,signedThisMonth:C.length,pending:N.length,drafts:I.length,value:Math.round(U)})},w=()=>{let E=[...t];if(o){const T=o.toLowerCase();E=E.filter(C=>(C.org_name||"").toLowerCase().includes(T)||(C.promoter_name||"").toLowerCase().includes(T)||(C.promoter_email||"").toLowerCase().includes(T))}u&&(E=E.filter(T=>T.status===u)),E.sort((T,C)=>{switch(d){case"created_asc":return new Date(T.created_at)-new Date(C.created_at);case"created_desc":return new Date(C.created_at)-new Date(T.created_at);case"org_name":return(T.org_name||"").localeCompare(C.org_name||"");case"status":return(T.status||"").localeCompare(C.status||"");default:return 0}}),n(E)};return i?a.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:a.jsx("div",{className:"text-gray-400 text-lg",children:"Loading contracts..."})}):a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"flex items-center justify-between mb-8",children:[a.jsxs("h1",{className:"text-3xl font-black text-white tracking-tight",children:[a.jsx("span",{className:"text-red-500",children:"CONTRACT"})," MANAGEMENT"]}),a.jsxs("button",{onClick:()=>g("/portal/contracts/new"),className:"bg-red-600 hover:bg-red-700 text-white px-6 py-3 rounded-lg font-bold transition-all hover:scale-105 flex items-center gap-2",children:[a.jsx("span",{className:"text-lg",children:"+"})," Create New Contract"]})]}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-8",children:[{label:"TOTAL CONTRACTS",value:A.total,color:"text-white",filter:""},{label:"DRAFTS",value:A.drafts,color:"text-yellow-500",filter:"draft"},{label:"SIGNED THIS MONTH",value:A.signedThisMonth,color:"text-green-500",filter:"signed"},{label:"PENDING SIGNATURES",value:A.pending,color:"text-blue-400",filter:""},{label:"TOTAL VALUE",value:`$${A.value.toLocaleString()}`,color:"text-red-400",filter:""}].map(({label:E,value:T,color:C,filter:N})=>a.jsxs("div",{onClick:()=>N!==void 0&&l(N),className:`bg-[#1a1a2e] rounded-xl p-5 border border-gray-800/50 ${N!==""?"cursor-pointer hover:border-gray-600 transition-colors":""}`,children:[a.jsx("div",{className:"text-[11px] font-bold text-gray-500 tracking-widest uppercase mb-3",children:E}),a.jsx("div",{className:`text-3xl font-black ${C}`,children:T})]},E))}),a.jsxs("div",{className:"flex flex-col md:flex-row gap-3 mb-6",children:[a.jsx("input",{type:"text",value:o,onChange:E=>c(E.target.value),placeholder:"Search by organization name...",className:"flex-1 px-4 py-3 bg-[#1a1a2e] border border-gray-800/50 rounded-xl text-white placeholder-gray-600 focus:outline-none focus:ring-2 focus:ring-red-500/40 focus:border-red-500/40"}),a.jsxs("select",{value:u,onChange:E=>l(E.target.value),className:"px-4 py-3 bg-[#1a1a2e] border border-gray-800/50 rounded-xl text-gray-300 focus:outline-none focus:ring-2 focus:ring-red-500/40 min-w-[160px]",children:[a.jsx("option",{value:"",children:"All Statuses"}),a.jsx("option",{value:"draft",children:"Draft"}),a.jsx("option",{value:"sent",children:"Sent"}),a.jsx("option",{value:"viewed",children:"Viewed"}),a.jsx("option",{value:"signed",children:"Signed"}),a.jsx("option",{value:"expired",children:"Expired"})]}),a.jsxs("select",{value:d,onChange:E=>f(E.target.value),className:"px-4 py-3 bg-[#1a1a2e] border border-gray-800/50 rounded-xl text-gray-300 focus:outline-none focus:ring-2 focus:ring-red-500/40 min-w-[160px]",children:[a.jsx("option",{value:"created_desc",children:"Newest First"}),a.jsx("option",{value:"created_asc",children:"Oldest First"}),a.jsx("option",{value:"org_name",children:"Organization A-Z"}),a.jsx("option",{value:"status",children:"Status"})]})]}),r.length===0?a.jsxs("div",{className:"bg-[#1a1a2e] rounded-xl p-12 text-center border border-gray-800/50",children:[a.jsx("div",{className:"text-6xl mb-4",children:""}),a.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:t.length===0?"No Contracts Yet":"No Contracts Found"}),a.jsx("p",{className:"text-gray-500 mb-6",children:t.length===0?"Create your first contract to get started":"Try adjusting your search or filters"}),t.length===0&&a.jsx("button",{onClick:()=>g("/portal/contracts/new"),className:"bg-red-600 hover:bg-red-700 text-white px-6 py-3 rounded-lg font-bold transition-all",children:"Create New Contract"})]}):a.jsx("div",{className:"flex flex-col gap-3",children:r.map(E=>{const T=E.contract_data?.event_date?new Date(E.contract_data.event_date).toLocaleDateString("en-AU"):"Not set",C=new Date(E.created_at).toLocaleDateString("en-AU");return a.jsx("div",{onClick:()=>E.status==="draft"?g(`/portal/contracts/${E.id}/edit`):g(`/portal/contracts/${E.id}`),className:`bg-[#1a1a2e] rounded-xl p-5 border-l-4 ${E.status==="draft"?"border-l-yellow-500":"border-l-red-600"} border border-gray-800/50 hover:border-gray-700 cursor-pointer transition-all hover:bg-[#1f1f35] group`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-lg font-bold text-white group-hover:text-red-400 transition-colors",children:E.org_name||"Untitled Contract"}),a.jsxs("div",{className:"flex flex-wrap gap-x-6 gap-y-1 mt-2 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-[10px] font-bold text-gray-600 uppercase tracking-wider",children:"Promoter"}),a.jsx("div",{className:"text-gray-300",children:E.promoter_name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-[10px] font-bold text-gray-600 uppercase tracking-wider",children:"Event Date"}),a.jsx("div",{className:"text-gray-300",children:T})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-[10px] font-bold text-gray-600 uppercase tracking-wider",children:"Created"}),a.jsx("div",{className:"text-gray-300",children:C})]})]})]}),a.jsxs("span",{className:`px-3 py-1.5 rounded-full text-xs font-bold uppercase tracking-wider ${h3e[E.status]||"bg-gray-700 text-gray-300"}`,children:[HM(E.status)," ",E.status]})]})},E.id)})})]})}function Hre({onSignatureChange:t,className:e=""}){const r=j.useRef(null),n=j.useRef(!1),i=j.useRef({x:0,y:0});j.useEffect(()=>{const o=r.current;if(!o)return;const c=()=>{const u=o.getBoundingClientRect();o.width=u.width,o.height=u.height,o.getContext("2d").clearRect(0,0,o.width,o.height)};return setTimeout(c,100),window.addEventListener("resize",c),()=>window.removeEventListener("resize",c)},[]),j.useEffect(()=>{const o=r.current;if(!o)return;const c=o.getContext("2d"),u=A=>{const p=o.getBoundingClientRect(),g=(A.clientX||A.touches?.[0]?.clientX||0)-p.left,y=(A.clientY||A.touches?.[0]?.clientY||0)-p.top;return{x:g,y}},l=A=>{A.preventDefault(),n.current=!0;const p=u(A);i.current=p},d=A=>{if(!n.current)return;A.preventDefault();const p=u(A);c.strokeStyle="#ffffff",c.lineWidth=2,c.lineCap="round",c.lineJoin="round",c.beginPath(),c.moveTo(i.current.x,i.current.y),c.lineTo(p.x,p.y),c.stroke(),i.current=p,t&&t(o)},f=()=>{n.current=!1};return o.addEventListener("mousedown",l),o.addEventListener("mousemove",d),o.addEventListener("mouseup",f),o.addEventListener("mouseout",f),o.addEventListener("touchstart",l),o.addEventListener("touchmove",d),o.addEventListener("touchend",f),()=>{o.removeEventListener("mousedown",l),o.removeEventListener("mousemove",d),o.removeEventListener("mouseup",f),o.removeEventListener("mouseout",f),o.removeEventListener("touchstart",l),o.removeEventListener("touchmove",d),o.removeEventListener("touchend",f)}},[t]);const s=()=>{const o=r.current;if(!o)return;o.getContext("2d").clearRect(0,0,o.width,o.height),t&&t(o)};return a.jsxs("div",{className:"signature-canvas-container",children:[a.jsx("canvas",{ref:r,className:`border-2 border-gray-600 rounded-lg bg-gray-900 cursor-crosshair touch-none ${e}`,style:{width:"100%",height:"200px"}}),a.jsx("button",{type:"button",onClick:s,className:"mt-2 px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg transition-colors",children:"Clear Signature"})]})}const nx=6;function Cz({editMode:t=!1}){const{id:e}=tA(),[r,n]=j.useState(1),[i,s]=j.useState({agreement_date:new Date().toISOString().split("T")[0],ffm_abn:"",org_name:"",promoter_name:"",promoter_position:"",promoter_email:"",promoter_phone:"",org_instagram:"",org_facebook:"",org_website:"",event_name:"",event_date:"",event_location:"",event_type:"BJJ / Grappling Competition",estimated_matches:"",expected_athletes:"",expected_audience:"",camera_angles:"2",camera_angles_max:"",crew_size:"2",crew_size_max:"",multi_event_count:"1",multi_event_duration:"",highlight_delivery_days:"7",highlight_delivery_days_max:"",social_clips_count:"5",social_clips_count_max:"",social_clips_delivery_days:"5",social_clips_delivery_days_max:"",photo_count:"50",photo_count_max:"",photography_included:!0,photography_type:"professional",livestream_included:!1,ppv_included:!1,ppv_platform:"",ppv_price:"",ppv_price_type:"fixed",ppv_price_max:"",ppv_ffm_split:"70",ppv_client_split:"30",ppv_payment_days:"21",vip_price:"350",match_price:"175",season_price:"899",athlete_revenue_ffm_100:!0,athlete_ffm_split:"80",athlete_client_split:"20",setup_hours:"2",internet_speed:"",schedule_hours_before:"48",athlete_list_days_before:"7",cancellation_fee:"500",initial_term_months:"12",renewal_period_months:"12",nonrenewal_notice_days:"60",termination_notice_days:"30",remedy_period_days:"14",pli_amount:"20000000"}),[o,c]=j.useState([]),[u,l]=j.useState([{name:"VIP Coverage",price:"350",description:"Full event coverage with priority editing, professional highlight reel, all match recordings, and premium photo package."},{name:"Match Package",price:"175",description:"Individual match recording with edited highlights and action photos from your matches."},{name:"Season Pass",price:"899",description:"Full season coverage across all events, priority processing, and exclusive content access."}]),[d,f]=j.useState([]),[A,p]=j.useState([]),[g,y]=j.useState(!1),[x,w]=j.useState(!1),[E,T]=j.useState(null),[C,N]=j.useState(t),[I,U]=j.useState(!0);j.useRef(null);const[K,Y]=j.useState(null),[re,se]=j.useState(!1),[Ae,we]=j.useState(null),Ce=Ac();j.useEffect(()=>{t&&e&&ve()},[t,e]);const ve=async()=>{try{N(!0);const wt=await Pre(e);T(wt);const Tt=wt.contract_data||{};s(Er=>({...Er,...Tt})),Tt.multi_events&&c(Tt.multi_events),Tt.athlete_packages&&l(Tt.athlete_packages),Tt.add_ons&&f(Tt.add_ons),Tt.custom_notes&&p(Tt.custom_notes)}catch(wt){console.error("Error loading contract:",wt),alert("Failed to load contract for editing"),Ce("/portal/contracts")}finally{N(!1)}};j.useEffect(()=>{if(!t){const wt=localStorage.getItem("contractBuilderData");if(wt)try{const Tt=JSON.parse(wt);s(Tt.formData||i),c(Tt.multiEvents||[]),Tt.athletePackages&&l(Tt.athletePackages),Tt.addOns&&f(Tt.addOns),Tt.customNotes&&p(Tt.customNotes),n(Tt.currentStep||1)}catch(Tt){console.error("Error loading saved data:",Tt)}}},[t]),j.useEffect(()=>{localStorage.setItem("contractBuilderData",JSON.stringify({formData:i,multiEvents:o,athletePackages:u,addOns:d,customNotes:A,currentStep:r}))},[i,o,u,d,A,r]);const ne=wt=>{const{name:Tt,value:Er,type:pr,checked:Xr}=wt.target;s(yn=>({...yn,[Tt]:pr==="checkbox"?Xr:Er}))},ce=()=>{c([...o,{name:"",date:"",venue:""}])},ae=wt=>{c(o.filter((Tt,Er)=>Er!==wt))},De=(wt,Tt,Er)=>{const pr=[...o];pr[wt][Tt]=Er,c(pr)},Oe=(wt,Tt)=>{const Er=wt+Tt;if(Er<0||Er>=o.length)return;const pr=[...o],[Xr]=pr.splice(wt,1);pr.splice(Er,0,Xr),c(pr)},be=()=>{l([...u,{name:"",price:"",description:""}])},de=wt=>{l(u.filter((Tt,Er)=>Er!==wt))},xe=(wt,Tt,Er)=>{const pr=[...u];pr[wt][Tt]=Er,l(pr)},je=()=>{f([...d,{name:"",price:"",description:"",included:!0}])},Me=wt=>{f(d.filter((Tt,Er)=>Er!==wt))},Re=(wt,Tt,Er)=>{const pr=[...d];pr[wt][Tt]=Er,f(pr)},it=()=>{p([...A,{title:"",content:""}])},ht=wt=>{p(A.filter((Tt,Er)=>Er!==wt))},Be=(wt,Tt,Er)=>{const pr=[...A];pr[wt][Tt]=Er,p(pr)},nt=wt=>{const Er={1:["org_name","promoter_name","promoter_position","promoter_email","promoter_phone"],2:["event_name","event_date","event_location","estimated_matches","expected_athletes","expected_audience"],3:[],4:[],5:[],6:[]}[wt]||[];for(const pr of Er)if(!i[pr]||i[pr].trim()==="")return alert("Please fill in all required fields in this step."),!1;return!0},Ge=()=>{nt(r)&&r<nx&&(n(r+1),window.scrollTo({top:0,behavior:"smooth"}))},ft=()=>{r>1&&(n(r-1),window.scrollTo({top:0,behavior:"smooth"}))},Dt=wt=>{n(wt),window.scrollTo({top:0,behavior:"smooth"})},rt=async wt=>{wt.preventDefault();const Tt=K&&Ure(K);if(!t){if(!Tt){alert("Please sign the contract before submitting.");return}if(!re){alert("Please confirm your signature.");return}}y(!0);try{const Er={...i,multi_events:o,athlete_packages:u,add_ons:d,custom_notes:A};if(t&&E){const pr={org_name:i.org_name,promoter_name:i.promoter_name,promoter_email:i.promoter_email,promoter_phone:i.promoter_phone,contract_data:Er,updated_at:new Date().toISOString()};Tt&&re&&(pr.ffm_signature=GP(K),pr.ffm_signed_at=new Date().toISOString()),await Sz(e,pr),alert("Contract updated successfully!"),Ce(`/portal/contracts/${e}`)}else{const pr=GP(K),Xr=await _z({status:"sent",org_name:i.org_name,promoter_name:i.promoter_name,promoter_email:i.promoter_email,promoter_phone:i.promoter_phone,contract_data:Er,ffm_signature:pr,ffm_signed_at:new Date().toISOString()});localStorage.removeItem("contractBuilderData"),alert("Contract created successfully! You can now share it with the client."),Ce(`/portal/contracts/${Xr.id}`)}}catch(Er){console.error("Error saving contract:",Er),alert("Failed to save contract: "+Er.message)}finally{y(!1)}},kt=async()=>{w(!0);try{const wt={...i,multi_events:o,athlete_packages:u,add_ons:d,custom_notes:A};if(t&&E)await Sz(e,{status:E.status==="draft"?"draft":E.status,org_name:i.org_name||"Untitled Draft",promoter_name:i.promoter_name,promoter_email:i.promoter_email,promoter_phone:i.promoter_phone,contract_data:wt}),we(new Date),alert("Draft saved!");else{const Tt=await _z({status:"draft",org_name:i.org_name||"Untitled Draft",promoter_name:i.promoter_name,promoter_email:i.promoter_email,promoter_phone:i.promoter_phone,contract_data:wt});localStorage.removeItem("contractBuilderData"),Ce(`/portal/contracts/${Tt.id}/edit`,{replace:!0}),T(Tt),we(new Date),alert("Draft saved! You can continue editing or come back later.")}}catch(wt){console.error("Error saving draft:",wt),alert("Failed to save draft: "+wt.message)}finally{w(!1)}},_t={contract_data:{...i,multi_events:o,athlete_packages:u,add_ons:d,custom_notes:A},ffm_signature:null,client_signature:null};return C?a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:a.jsx("div",{className:"text-white text-xl",children:"Loading contract..."})}):a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"flex items-center justify-between mb-8",children:[a.jsxs("div",{children:[a.jsxs("button",{onClick:()=>Ce(t?`/portal/contracts/${e}`:"/portal/contracts"),className:"text-gray-400 hover:text-white mb-2 inline-flex items-center gap-2",children:[" ",t?"Back to Contract":"Back to Dashboard"]}),a.jsx("h1",{className:"text-3xl font-bold text-white",children:t?`Edit Contract: ${i.org_name||"Untitled"}`:"Create New Contract"})]}),a.jsxs("button",{onClick:()=>U(!I),className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg transition-colors",children:[I?"Hide":"Show"," Preview"]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"bg-dark-900 rounded-lg p-6 mb-6 border border-gray-800",children:[a.jsx("div",{className:"flex items-center justify-between mb-4",children:Array.from({length:nx},(wt,Tt)=>Tt+1).map(wt=>a.jsx("button",{onClick:()=>Dt(wt),className:`flex-1 text-center py-2 px-3 rounded-lg font-medium transition-colors ${wt===r?"bg-blue-600 text-white":wt<r?"bg-green-600 text-white":"bg-gray-800 text-gray-400"} ${wt<nx?"mr-2":""}`,children:wt},wt))}),a.jsxs("div",{className:"text-center text-gray-400 text-sm",children:["Step ",r," of ",nx]})]}),a.jsxs("form",{onSubmit:rt,noValidate:!0,className:"bg-dark-900 rounded-lg p-6 border border-gray-800",children:[r===1&&a.jsxs("div",{className:"space-y-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Step 1: Party Details"}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Agreement Date ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"date",name:"agreement_date",value:i.agreement_date,onChange:ne,required:!0,className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"FFM ABN"}),a.jsx("input",{type:"text",name:"ffm_abn",value:i.ffm_abn,onChange:ne,placeholder:"Enter ABN if available",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Organization Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",name:"org_name",value:i.org_name,onChange:ne,required:!0,placeholder:"e.g., Queensland Grappling Association",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Promoter Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",name:"promoter_name",value:i.promoter_name,onChange:ne,required:!0,placeholder:"Full name of the promoter",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Promoter Position ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",name:"promoter_position",value:i.promoter_position,onChange:ne,required:!0,placeholder:"e.g., Event Director, CEO",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Promoter Email ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"email",name:"promoter_email",value:i.promoter_email,onChange:ne,required:!0,placeholder:"email@example.com",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Promoter Phone ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"tel",name:"promoter_phone",value:i.promoter_phone,onChange:ne,required:!0,placeholder:"+61 4XX XXX XXX",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{className:"pt-4 border-t border-gray-700",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-300 mb-4",children:"Social & Web (Optional)"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Instagram"}),a.jsx("input",{type:"text",name:"org_instagram",value:i.org_instagram,onChange:ne,placeholder:"@yourorg",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Facebook"}),a.jsx("input",{type:"text",name:"org_facebook",value:i.org_facebook,onChange:ne,placeholder:"facebook.com/yourorg",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Website"}),a.jsx("input",{type:"text",name:"org_website",value:i.org_website,onChange:ne,placeholder:"https://yourorg.com",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]})]}),r===2&&a.jsxs("div",{className:"space-y-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Step 2: Event Details"}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Event Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",name:"event_name",value:i.event_name,onChange:ne,required:!0,placeholder:"e.g., Queensland Open 2024",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Event Date ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"date",name:"event_date",value:i.event_date,onChange:ne,required:!0,className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Event Location ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",name:"event_location",value:i.event_location,onChange:ne,required:!0,placeholder:"Venue name and address",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Event Type"}),a.jsx("input",{type:"text",name:"event_type",value:i.event_type,onChange:ne,placeholder:"e.g., BJJ / Grappling Competition",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Estimated Matches ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"number",name:"estimated_matches",value:i.estimated_matches,onChange:ne,required:!0,placeholder:"e.g., 200",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Expected Athlete Participants ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"number",name:"expected_athletes",value:i.expected_athletes,onChange:ne,required:!0,placeholder:"e.g., 400",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Expected Audience ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"number",name:"expected_audience",value:i.expected_audience,onChange:ne,required:!0,placeholder:"e.g., 300",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Multi-Event Count"}),a.jsx("input",{type:"number",name:"multi_event_count",value:i.multi_event_count,onChange:ne,placeholder:"e.g., 1",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Multi-Event Duration"}),a.jsx("input",{type:"text",name:"multi_event_duration",value:i.multi_event_duration,onChange:ne,placeholder:"e.g., 12 months",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Event Schedule (Optional)"}),a.jsx("button",{type:"button",onClick:ce,className:"px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white rounded text-sm transition-colors",children:"+ Add Event"})]}),o.map((wt,Tt)=>a.jsx("div",{className:"bg-dark-800 p-4 rounded-lg mb-2",children:a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsxs("span",{className:"text-gray-400 text-sm font-medium w-6",children:["#",Tt+1]}),a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx("button",{type:"button",onClick:()=>Oe(Tt,-1),disabled:Tt===0,className:`px-2 py-0.5 rounded text-xs ${Tt===0?"text-gray-600 cursor-not-allowed":"text-gray-400 hover:text-white hover:bg-dark-600"}`,title:"Move up",children:""}),a.jsx("button",{type:"button",onClick:()=>Oe(Tt,1),disabled:Tt===o.length-1,className:`px-2 py-0.5 rounded text-xs ${Tt===o.length-1?"text-gray-600 cursor-not-allowed":"text-gray-400 hover:text-white hover:bg-dark-600"}`,title:"Move down",children:""})]}),a.jsxs("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-3 gap-2",children:[a.jsx("input",{type:"text",value:wt.name,onChange:Er=>De(Tt,"name",Er.target.value),placeholder:"Event Name",className:"px-3 py-2 bg-dark-700 border border-gray-600 rounded text-white focus:outline-none focus:ring-2 focus:ring-blue-500"}),a.jsx("input",{type:"date",value:wt.date,onChange:Er=>De(Tt,"date",Er.target.value),className:"px-3 py-2 bg-dark-700 border border-gray-600 rounded text-white focus:outline-none focus:ring-2 focus:ring-blue-500"}),a.jsx("input",{type:"text",value:wt.venue,onChange:Er=>De(Tt,"venue",Er.target.value),placeholder:"Venue",className:"px-3 py-2 bg-dark-700 border border-gray-600 rounded text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsx("button",{type:"button",onClick:()=>ae(Tt),className:"text-red-500 hover:text-red-400 text-sm px-2",title:"Remove event",children:""})]})},Tt))]})]}),r===3&&a.jsxs("div",{className:"space-y-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Step 3: Coverage & Deliverables"}),a.jsx("p",{className:"text-sm text-gray-400 mb-4",children:' All fields support ranges. Leave "Max" empty for a single value, or enter a max to specify a range (e.g., "2-3").'}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Camera Angles"}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("input",{type:"number",name:"camera_angles",value:i.camera_angles,onChange:ne,placeholder:"Min",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"}),a.jsx("span",{className:"text-xs text-gray-500 mt-1 block",children:"Min"})]}),a.jsxs("div",{children:[a.jsx("input",{type:"number",name:"camera_angles_max",value:i.camera_angles_max,onChange:ne,placeholder:"Max (optional)",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"}),a.jsx("span",{className:"text-xs text-gray-500 mt-1 block",children:"Max (optional)"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"On-Site Crew Size"}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("input",{type:"number",name:"crew_size",value:i.crew_size,onChange:ne,placeholder:"Min",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"}),a.jsx("span",{className:"text-xs text-gray-500 mt-1 block",children:"Min"})]}),a.jsxs("div",{children:[a.jsx("input",{type:"number",name:"crew_size_max",value:i.crew_size_max,onChange:ne,placeholder:"Max (optional)",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"}),a.jsx("span",{className:"text-xs text-gray-500 mt-1 block",children:"Max (optional)"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Highlight Reel Delivery (Days)"}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("input",{type:"number",name:"highlight_delivery_days",value:i.highlight_delivery_days,onChange:ne,placeholder:"Min",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"}),a.jsx("span",{className:"text-xs text-gray-500 mt-1 block",children:"Min"})]}),a.jsxs("div",{children:[a.jsx("input",{type:"number",name:"highlight_delivery_days_max",value:i.highlight_delivery_days_max,onChange:ne,placeholder:"Max (optional)",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"}),a.jsx("span",{className:"text-xs text-gray-500 mt-1 block",children:"Max (optional)"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Social Media Clips Count"}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("input",{type:"number",name:"social_clips_count",value:i.social_clips_count,onChange:ne,placeholder:"Min",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"}),a.jsx("span",{className:"text-xs text-gray-500 mt-1 block",children:"Min"})]}),a.jsxs("div",{children:[a.jsx("input",{type:"number",name:"social_clips_count_max",value:i.social_clips_count_max,onChange:ne,placeholder:"Max (optional)",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"}),a.jsx("span",{className:"text-xs text-gray-500 mt-1 block",children:"Max (optional)"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Social Clips Delivery (Days)"}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("input",{type:"number",name:"social_clips_delivery_days",value:i.social_clips_delivery_days,onChange:ne,placeholder:"Min",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"}),a.jsx("span",{className:"text-xs text-gray-500 mt-1 block",children:"Min"})]}),a.jsxs("div",{children:[a.jsx("input",{type:"number",name:"social_clips_delivery_days_max",value:i.social_clips_delivery_days_max,onChange:ne,placeholder:"Max (optional)",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"}),a.jsx("span",{className:"text-xs text-gray-500 mt-1 block",children:"Max (optional)"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Photography"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[a.jsx("input",{type:"radio",name:"photography_type",value:"none",checked:i.photography_type==="none",onChange:ne,className:"w-4 h-4 text-blue-600 bg-dark-800 border-gray-700 focus:ring-2 focus:ring-blue-500"}),a.jsx("span",{className:"text-gray-300",children:"No photography included"})]}),a.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[a.jsx("input",{type:"radio",name:"photography_type",value:"base",checked:i.photography_type==="base",onChange:ne,className:"w-4 h-4 text-blue-600 bg-dark-800 border-gray-700 focus:ring-2 focus:ring-blue-500"}),a.jsx("span",{className:"text-gray-300",children:"Base event photography"})]}),a.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[a.jsx("input",{type:"radio",name:"photography_type",value:"professional",checked:i.photography_type==="professional",onChange:ne,className:"w-4 h-4 text-blue-600 bg-dark-800 border-gray-700 focus:ring-2 focus:ring-blue-500"}),a.jsx("span",{className:"text-gray-300",children:"Professional event photography"})]})]})]}),i.photography_type!=="none"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Photo Count"}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("input",{type:"number",name:"photo_count",value:i.photo_count,onChange:ne,placeholder:"Min",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"}),a.jsx("span",{className:"text-xs text-gray-500 mt-1 block",children:"Min"})]}),a.jsxs("div",{children:[a.jsx("input",{type:"number",name:"photo_count_max",value:i.photo_count_max,onChange:ne,placeholder:"Max (optional)",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"}),a.jsx("span",{className:"text-xs text-gray-500 mt-1 block",children:"Max (optional)"})]})]})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",id:"livestream_included",name:"livestream_included",checked:i.livestream_included,onChange:ne,className:"w-4 h-4 text-blue-600 bg-dark-800 border-gray-700 rounded focus:ring-2 focus:ring-blue-500"}),a.jsx("label",{htmlFor:"livestream_included",className:"ml-2 text-sm font-medium text-gray-300",children:"Livestream Included"})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",id:"ppv_included",name:"ppv_included",checked:i.ppv_included,onChange:ne,className:"w-4 h-4 text-blue-600 bg-dark-800 border-gray-700 rounded focus:ring-2 focus:ring-blue-500"}),a.jsx("label",{htmlFor:"ppv_included",className:"ml-2 text-sm font-medium text-gray-300",children:"PPV Included"})]}),i.ppv_included&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"PPV Platform"}),a.jsx("input",{type:"text",name:"ppv_platform",value:i.ppv_platform,onChange:ne,placeholder:"e.g., Vimeo, YouTube Live",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"PPV Pricing Type"}),a.jsxs("div",{className:"flex gap-4 mb-3",children:[a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[a.jsx("input",{type:"radio",name:"ppv_price_type",value:"fixed",checked:i.ppv_price_type==="fixed",onChange:ne,className:"text-orange-500 focus:ring-orange-500"}),a.jsx("span",{className:"text-gray-300",children:"Fixed Price"})]}),a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[a.jsx("input",{type:"radio",name:"ppv_price_type",value:"range",checked:i.ppv_price_type==="range",onChange:ne,className:"text-orange-500 focus:ring-orange-500"}),a.jsx("span",{className:"text-gray-300",children:"Price Range"})]})]}),i.ppv_price_type==="fixed"?a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"PPV Price per Viewer"}),a.jsx("input",{type:"number",name:"ppv_price",value:i.ppv_price,onChange:ne,placeholder:"e.g., 25.00",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}):a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Minimum Price"}),a.jsx("input",{type:"number",name:"ppv_price",value:i.ppv_price,onChange:ne,placeholder:"e.g., 25.00",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Maximum Price"}),a.jsx("input",{type:"number",name:"ppv_price_max",value:i.ppv_price_max,onChange:ne,placeholder:"e.g., 35.00",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]})]})]}),r===4&&a.jsxs("div",{className:"space-y-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Step 4: Financial Terms"}),i.ppv_included&&a.jsxs(a.Fragment,{children:[a.jsx("h3",{className:"text-lg font-bold text-white mt-6",children:"PPV Revenue Split"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"FFM PPV Share (%)"}),a.jsx("input",{type:"number",name:"ppv_ffm_split",value:i.ppv_ffm_split,onChange:ne,placeholder:"e.g., 70",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Client PPV Share (%)"}),a.jsx("input",{type:"number",name:"ppv_client_split",value:i.ppv_client_split,onChange:ne,placeholder:"e.g., 30",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"PPV Payment Within (Days)"}),a.jsx("input",{type:"number",name:"ppv_payment_days",value:i.ppv_payment_days,onChange:ne,placeholder:"e.g., 21",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-bold text-white",children:"Athlete Media Packages"}),a.jsx("button",{type:"button",onClick:be,className:"px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white rounded text-sm transition-colors",children:"+ Add Package"})]}),u.length===0&&a.jsx("p",{className:"text-gray-400 text-sm mb-4",children:'No packages added. Click "+ Add Package" to create athlete media packages.'}),u.map((wt,Tt)=>a.jsxs("div",{className:"bg-dark-800 p-4 rounded-lg mb-4 border border-gray-700",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("span",{className:"text-sm font-medium text-gray-400",children:["Package ",Tt+1]}),a.jsx("button",{type:"button",onClick:()=>de(Tt),className:"text-red-500 hover:text-red-400 text-sm",children:"Remove"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mb-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Package Name"}),a.jsx("input",{type:"text",value:wt.name,onChange:Er=>xe(Tt,"name",Er.target.value),placeholder:"e.g., VIP Coverage",className:"w-full px-3 py-2 bg-dark-700 border border-gray-600 rounded text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Price ($)"}),a.jsx("input",{type:"number",value:wt.price,onChange:Er=>xe(Tt,"price",Er.target.value),placeholder:"e.g., 350",className:"w-full px-3 py-2 bg-dark-700 border border-gray-600 rounded text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Description (what's included)"}),a.jsx("textarea",{value:wt.description,onChange:Er=>xe(Tt,"description",Er.target.value),placeholder:"Describe what this package includes...",rows:2,className:"w-full px-3 py-2 bg-dark-700 border border-gray-600 rounded text-white focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none"})]})]},Tt))]}),a.jsxs("div",{className:"mt-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-bold text-white",children:"Client Add-Ons"}),a.jsx("button",{type:"button",onClick:je,className:"px-3 py-1 bg-green-600 hover:bg-green-700 text-white rounded text-sm transition-colors",children:"+ Add Add-On"})]}),a.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"Optional services or packages the client has opted into for this event."}),d.length===0&&a.jsx("p",{className:"text-gray-500 text-sm italic mb-4",children:'No add-ons added. Click "+ Add Add-On" to include optional services.'}),d.map((wt,Tt)=>a.jsxs("div",{className:"bg-dark-800 p-4 rounded-lg mb-4 border border-green-900",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("span",{className:"text-sm font-medium text-green-400",children:["Add-On ",Tt+1]}),a.jsx("button",{type:"button",onClick:()=>Me(Tt),className:"text-red-500 hover:text-red-400 text-sm",children:"Remove"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mb-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Add-On Name"}),a.jsx("input",{type:"text",value:wt.name,onChange:Er=>Re(Tt,"name",Er.target.value),placeholder:"e.g., Additional Camera Operator",className:"w-full px-3 py-2 bg-dark-700 border border-gray-600 rounded text-white focus:outline-none focus:ring-2 focus:ring-green-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Price ($)"}),a.jsx("input",{type:"number",value:wt.price,onChange:Er=>Re(Tt,"price",Er.target.value),placeholder:"e.g., 500",className:"w-full px-3 py-2 bg-dark-700 border border-gray-600 rounded text-white focus:outline-none focus:ring-2 focus:ring-green-500"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Description"}),a.jsx("textarea",{value:wt.description,onChange:Er=>Re(Tt,"description",Er.target.value),placeholder:"Describe what this add-on includes...",rows:2,className:"w-full px-3 py-2 bg-dark-700 border border-gray-600 rounded text-white focus:outline-none focus:ring-2 focus:ring-green-500 resize-none"})]})]},Tt))]}),a.jsx("h3",{className:"text-lg font-bold text-white mt-6",children:"Athlete Revenue Split"}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",id:"athlete_revenue_ffm_100",name:"athlete_revenue_ffm_100",checked:i.athlete_revenue_ffm_100,onChange:ne,className:"w-4 h-4 text-blue-600 bg-dark-800 border-gray-700 rounded focus:ring-2 focus:ring-blue-500"}),a.jsx("label",{htmlFor:"athlete_revenue_ffm_100",className:"ml-2 text-sm font-medium text-gray-300",children:"FFM Retains 100% of Athlete Media Package Sales"})]}),!i.athlete_revenue_ffm_100&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"FFM Athlete Revenue Share (%)"}),a.jsx("input",{type:"number",name:"athlete_ffm_split",value:i.athlete_ffm_split,onChange:ne,placeholder:"e.g., 80",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Client Athlete Revenue Share (%)"}),a.jsx("input",{type:"number",name:"athlete_client_split",value:i.athlete_client_split,onChange:ne,placeholder:"e.g., 20",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),r===5&&a.jsxs("div",{className:"space-y-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Step 5: Terms & Conditions"}),a.jsx("h3",{className:"text-lg font-bold text-white",children:"Access & Logistics"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Setup Hours Before Event"}),a.jsx("input",{type:"number",name:"setup_hours",value:i.setup_hours,onChange:ne,placeholder:"e.g., 2",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Internet Upload Speed (Mbps)"}),a.jsx("input",{type:"text",name:"internet_speed",value:i.internet_speed,onChange:ne,placeholder:"e.g., 50",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Event Schedule Provided (Hours Before)"}),a.jsx("input",{type:"number",name:"schedule_hours_before",value:i.schedule_hours_before,onChange:ne,placeholder:"e.g., 48",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Athlete List Provided (Days Before)"}),a.jsx("input",{type:"number",name:"athlete_list_days_before",value:i.athlete_list_days_before,onChange:ne,placeholder:"e.g., 7",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsx("h3",{className:"text-lg font-bold text-white mt-6",children:"Cancellation & Term"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Cancellation Fee"}),a.jsx("input",{type:"number",name:"cancellation_fee",value:i.cancellation_fee,onChange:ne,placeholder:"e.g., 500",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Initial Term (Months)"}),a.jsx("input",{type:"number",name:"initial_term_months",value:i.initial_term_months,onChange:ne,placeholder:"e.g., 12",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Auto-Renewal Period (Months)"}),a.jsx("input",{type:"number",name:"renewal_period_months",value:i.renewal_period_months,onChange:ne,placeholder:"e.g., 12",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Non-Renewal Notice (Days)"}),a.jsx("input",{type:"number",name:"nonrenewal_notice_days",value:i.nonrenewal_notice_days,onChange:ne,placeholder:"e.g., 60",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Termination Notice (Days)"}),a.jsx("input",{type:"number",name:"termination_notice_days",value:i.termination_notice_days,onChange:ne,placeholder:"e.g., 30",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Remedy Period (Days)"}),a.jsx("input",{type:"number",name:"remedy_period_days",value:i.remedy_period_days,onChange:ne,placeholder:"e.g., 14",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Public Liability Insurance Amount"}),a.jsx("input",{type:"number",name:"pli_amount",value:i.pli_amount,onChange:ne,placeholder:"e.g., 20000000",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-700",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-bold text-white",children:"Custom Contract Notes"}),a.jsx("p",{className:"text-gray-400 text-sm",children:"Add event-specific details like geo-blocking, special requirements, or custom terms."})]}),a.jsx("button",{type:"button",onClick:it,className:"px-3 py-1 bg-purple-600 hover:bg-purple-700 text-white rounded text-sm transition-colors",children:"+ Add Note"})]}),A.length===0&&a.jsx("p",{className:"text-gray-500 text-sm italic mb-4",children:'No custom notes added. Click "+ Add Note" to include event-specific details.'}),A.map((wt,Tt)=>a.jsxs("div",{className:"bg-dark-800 p-4 rounded-lg mb-4 border border-purple-900",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("span",{className:"text-sm font-medium text-purple-400",children:["Custom Note ",Tt+1]}),a.jsx("button",{type:"button",onClick:()=>ht(Tt),className:"text-red-500 hover:text-red-400 text-sm",children:"Remove"})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Note Title"}),a.jsx("input",{type:"text",value:wt.title,onChange:Er=>Be(Tt,"title",Er.target.value),placeholder:"e.g., Geo-Blocking Requirements, Special Access, etc.",className:"w-full px-3 py-2 bg-dark-700 border border-gray-600 rounded text-white focus:outline-none focus:ring-2 focus:ring-purple-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Note Content"}),a.jsx("textarea",{value:wt.content,onChange:Er=>Be(Tt,"content",Er.target.value),placeholder:"Enter the details for this custom note...",rows:3,className:"w-full px-3 py-2 bg-dark-700 border border-gray-600 rounded text-white focus:outline-none focus:ring-2 focus:ring-purple-500 resize-none"})]})]},Tt))]})]}),r===6&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("h2",{className:"text-2xl font-bold text-white mb-4",children:["Step 6: ",t?"Review & Save":"Sign Contract"]}),t&&E?.ffm_signature&&a.jsxs("div",{className:"bg-green-900/20 border border-green-600 rounded-lg p-4 mb-4",children:[a.jsx("p",{className:"text-green-200 text-sm mb-3",children:" This contract already has an FFM signature. You can update the contract details without re-signing, or provide a new signature below if needed."}),a.jsx("div",{className:"bg-white p-2 rounded inline-block",children:a.jsx("img",{src:E.ffm_signature,alt:"Existing FFM Signature",className:"max-h-24"})}),a.jsxs("p",{className:"text-green-300 text-xs mt-2",children:["Signed: ",new Date(E.ffm_signed_at).toLocaleString()]})]}),a.jsx("div",{className:"bg-yellow-900/20 border border-yellow-600 rounded-lg p-4",children:a.jsx("p",{className:"text-yellow-200 text-sm",children:t?" Review your changes. If you want to update the signature, draw a new one below and check the confirmation box.":" By signing this contract, you confirm that all information provided is accurate and you are authorized to create this agreement on behalf of Fit Focus Media."})}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:t?"New FFM Signature (optional)":"FFM Signature"}),a.jsx(Hre,{onSignatureChange:wt=>Y(wt)})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",id:"confirmSignature",checked:re,onChange:wt=>se(wt.target.checked),className:"w-4 h-4 text-blue-600 bg-dark-800 border-gray-700 rounded focus:ring-2 focus:ring-blue-500"}),a.jsx("label",{htmlFor:"confirmSignature",className:"ml-2 text-sm font-medium text-gray-300",children:t?"I want to update the signature with the new one above":"I confirm this is my signature and I am authorized to sign this contract"})]})]}),a.jsxs("div",{className:"flex items-center justify-between mt-8 pt-6 border-t border-gray-700",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[r>1&&a.jsx("button",{type:"button",onClick:ft,className:"px-6 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg transition-colors",children:" Previous"}),a.jsx("button",{type:"button",onClick:kt,disabled:x,className:"px-4 py-2 bg-yellow-600 hover:bg-yellow-700 disabled:bg-yellow-800 text-white rounded-lg transition-colors flex items-center gap-2",children:x?a.jsx(a.Fragment,{children:" Saving..."}):a.jsx(a.Fragment,{children:" Save Draft"})}),Ae&&a.jsxs("span",{className:"text-xs text-gray-500",children:["Saved ",Ae.toLocaleTimeString()]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[r<nx&&a.jsx("button",{type:"button",onClick:Ge,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:"Next "}),r===nx&&a.jsx("button",{type:"submit",disabled:g,className:"px-6 py-2 bg-green-600 hover:bg-green-700 disabled:bg-green-800 text-white rounded-lg transition-colors",children:g?t?"Updating Contract...":"Creating Contract...":t?"Update Contract":"Sign & Send Contract"})]})]})]})]}),I&&a.jsx("div",{className:"lg:sticky lg:top-8 lg:h-[calc(100vh-4rem)]",children:a.jsxs("div",{className:"bg-dark-900 rounded-lg p-6 border border-gray-800 overflow-y-auto h-full",children:[a.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Live Preview"}),a.jsx("div",{className:"text-sm",dangerouslySetInnerHTML:{__html:$M(_t)}})]})})]})]})}function A3e(){const{id:t}=tA(),[e,r]=j.useState(null),[n,i]=j.useState(!0),s=Ac();j.useEffect(()=>{o()},[t]);const o=async()=>{try{const p=await Pre(t);r(p)}catch(p){console.error("Error loading contract:",p),alert("Contract not found"),s("/portal/contracts")}finally{i(!1)}},[c,u]=j.useState(!1),l=async()=>{const p=WP(e.share_token);try{if(navigator.clipboard&&navigator.clipboard.writeText)await navigator.clipboard.writeText(p);else{const g=document.createElement("textarea");g.value=p,g.style.position="fixed",g.style.left="-9999px",document.body.appendChild(g),g.focus(),g.select(),document.execCommand("copy"),document.body.removeChild(g)}u(!0),setTimeout(()=>u(!1),3e3)}catch{alert(`Copy this link:

`+p)}},d=()=>{const{subject:p,body:g}=d3e(e.share_token,e.contract_data?.promoter_name||"there",e.org_name||"Organization"),x=`mailto:${e.contract_data?.promoter_email||""}?subject=${encodeURIComponent(p)}&body=${encodeURIComponent(g)}`;window.open(x,"_blank"),navigator.clipboard.writeText(WP(e.share_token)).catch(()=>{})},f=()=>{window.print()},A=async()=>{if(confirm("Are you sure you want to delete this contract? This cannot be undone."))try{await ARe(e.id),alert("Contract deleted successfully."),s("/portal/contracts")}catch(p){console.error("Error deleting contract:",p),alert("Failed to delete contract: "+p.message)}};return n?a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:a.jsx("div",{className:"text-white text-xl",children:"Loading contract..."})}):e?a.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"mb-6 print:hidden",children:[a.jsx("button",{onClick:()=>s("/portal/contracts"),className:"text-gray-400 hover:text-white mb-2 inline-flex items-center gap-2",children:" Back to Dashboard"}),a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:e.org_name||"Untitled Contract"}),a.jsx("p",{className:"text-gray-400",children:e.promoter_name||"No promoter name"})]}),a.jsxs("span",{className:$re(e.status),children:[HM(e.status)," ",e.status]})]})]}),a.jsxs("div",{className:"flex flex-wrap gap-3 mb-6 print:hidden",children:[a.jsx("button",{onClick:l,className:`px-4 py-2 ${c?"bg-green-600":"bg-gray-700 hover:bg-gray-600"} text-white rounded-lg transition-colors`,children:c?" Copied!":" Copy Link"}),e.status!=="signed"&&a.jsx("button",{onClick:d,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:" Send to Client"}),a.jsx("button",{onClick:f,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:" Download PDF"}),e.status!=="signed"&&a.jsx("button",{onClick:()=>s(`/portal/contracts/${e.id}/edit`),className:"px-4 py-2 bg-yellow-600 hover:bg-yellow-700 text-white rounded-lg transition-colors",children:" Edit Contract"}),a.jsx("button",{onClick:A,className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors ml-auto",children:" Delete"})]}),a.jsx("div",{className:"bg-dark-900 rounded-lg p-8 border border-gray-800",dangerouslySetInnerHTML:{__html:$M(e)}})]}):null}function m3e(){const{shareToken:t}=tA(),[e,r]=j.useState(null),[n,i]=j.useState(!0),[s,o]=j.useState(!1),[c,u]=j.useState(null);j.useEffect(()=>{l()},[t]);const l=async()=>{try{const A=await fRe(t);r(A),A.status==="sent"&&!A.viewed_at&&(await mRe(A.id),r({...A,status:"viewed",viewed_at:new Date().toISOString()}))}catch(A){console.error("Error loading contract:",A),alert("Contract not found")}finally{i(!1)}},d=async()=>{if(!c||!Ure(c)){alert("Please sign before submitting.");return}if(confirm("By signing, you agree to all terms and conditions in this agreement. This action cannot be undone.")){o(!0);try{const A=GP(c),p=await gRe(e.id,A,!0);r(p),alert("Contract signed successfully! Both parties will receive confirmation.")}catch(A){console.error("Error submitting signature:",A),alert("Failed to submit signature: "+A.message)}finally{o(!1)}}};if(n)return a.jsx("div",{className:"min-h-screen bg-dark-950 flex items-center justify-center",children:a.jsx("div",{className:"text-white text-xl",children:"Loading contract..."})});if(!e)return a.jsx("div",{className:"min-h-screen bg-dark-950 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-6xl mb-4",children:""}),a.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Contract Not Found"}),a.jsx("p",{className:"text-gray-400",children:"This contract link may be invalid or expired."})]})});const f=e.status!=="signed"&&!e.client_signature&&e.ffm_signature;return a.jsxs("div",{className:"min-h-screen bg-dark-950",children:[a.jsx("header",{className:"bg-dark-900 border-b border-gray-800 print:hidden",children:a.jsx("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-white mb-1",children:"Fit Focus Media"}),a.jsx("p",{className:"text-gray-400",children:"Event Media Coverage Agreement"})]}),a.jsxs("span",{className:$re(e.status),children:[HM(e.status)," ",e.status]})]})})}),a.jsxs("main",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsx("div",{className:"bg-dark-900 rounded-lg p-8 border border-gray-800 mb-8",dangerouslySetInnerHTML:{__html:$M(e)}}),f&&a.jsxs("div",{className:"bg-dark-900 rounded-lg p-8 border border-gray-800 print:hidden",children:[a.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Sign Agreement"}),a.jsx("div",{className:"bg-yellow-900/20 border border-yellow-600 rounded-lg p-4 mb-6",children:a.jsx("p",{className:"text-yellow-200 text-sm",children:" By signing this agreement, you acknowledge that you have read, understood, and agree to all terms and conditions outlined above. This signature is legally binding."})}),a.jsxs("div",{className:"mb-6",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Your Signature"}),a.jsx(Hre,{onSignatureChange:A=>u(A)})]}),a.jsx("button",{onClick:d,disabled:s,className:"w-full bg-green-600 hover:bg-green-700 disabled:bg-green-800 text-white font-medium py-3 px-6 rounded-lg transition-colors",children:s?"Submitting...":" Accept & Sign Contract"})]}),e.status==="signed"&&a.jsxs("div",{className:"bg-green-900/20 border border-green-600 rounded-lg p-6 text-center print:hidden",children:[a.jsx("div",{className:"text-5xl mb-3",children:""}),a.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Contract Fully Executed"}),a.jsx("p",{className:"text-gray-300",children:"This contract has been signed by both parties. Both parties will receive confirmation."})]})]})]})}async function a_(){const{data:t,error:e}=await Rr.from("crm_leads").select("*").order("priority_score",{ascending:!1});return e?(console.error("Error fetching leads:",e),[]):t||[]}async function p3e(t){const{data:e,error:r}=await Rr.from("crm_leads").select("*").eq("id",t).single();return r?(console.error("Error fetching lead:",r),null):e}async function Qre(t,e){const{data:r,error:n}=await Rr.from("crm_leads").update({...e,updated_at:new Date().toISOString()}).eq("id",t).select().single();if(n)throw console.error("Error updating lead:",n),n;return r}async function q1(t){const{data:e,error:r}=await Rr.from("crm_activities").select("*").eq("lead_id",t).order("created_at",{ascending:!1});return r?(console.error("Error fetching activities:",r),[]):e||[]}async function jz(t,e){const{data:r,error:n}=await Rr.from("crm_activities").insert([{lead_id:t,type:e.type,notes:e.notes,created_at:new Date().toISOString()}]).select().single();if(n)throw console.error("Error adding activity:",n),n;return await Rr.from("crm_leads").update({last_contact:new Date().toISOString()}).eq("id",t),r}async function g3e(t,e){const{data:r,error:n}=await Rr.from("crm_activities").update({type:e.type,notes:e.notes}).eq("id",t).select().single();if(n)throw console.error("Error updating activity:",n),n;return r}async function v3e(t){const{error:e}=await Rr.from("crm_activities").delete().eq("id",t);if(e)throw console.error("Error deleting activity:",e),e;return!0}const Vre=[{id:"cold-outreach",name:"Cold Outreach",subject:"{{org_name}}  free event coverage?",body:`{{decision_maker || "Hey"}},

I'll keep this short.

We film {{sport}} events  multi-camera, professional grade, full match coverage for every athlete. Livestream if you want it.

Here's the thing: you pay nothing.

We make money when athletes buy their footage through our portal after the event. You get free professional coverage. Athletes get content they actually want. Everyone wins.

We just covered NBA Sydney Nationals  400 athletes across 2 days. The org paid $0.

If that sounds interesting, I'll explain how it works in 10 minutes. If not, no worries.

Brandon
0411 934 935`},{id:"follow-up-1",name:"Follow-up #1",subject:"Re: {{org_name}} coverage",body:`{{decision_maker || "Hey"}},

Following up on my last email.

I know you're busy running events, so here's the short version:

 Professional multi-camera coverage for {{org_name}}
 Athletes buy their own footage (you don't lift a finger)
 You pay nothing. Ever.

We've done this for grappling comps, bodybuilding shows, and fight nights. Happy to send examples if useful.

10 minutes to see if it fits?

Brandon
0411 934 935`},{id:"meeting-request",name:"Meeting Request",subject:"{{org_name}}  quick call?",body:`{{decision_maker || "Hey"}},

Thanks for getting back.

Here's what I'll cover (10 min max):
1. How the zero-cost model works (and why there's no catch)
2. What your athletes would actually receive
3. What we'd need from you (almost nothing)

Send me a time that works or just call me direct.

Brandon
0411 934 935`},{id:"post-meeting",name:"Post-Meeting Follow-up",subject:"{{org_name}}  next steps",body:`{{decision_maker || "Hey"}},

Good chat. Here's the recap:

WHAT YOU GET (at zero cost):
 Multi-camera coverage, every mat, every match
 Livestream/PPV if you want it
 Event highlight reel for your socials
 Full photo gallery

WHAT ATHLETES GET:
 Professional footage of their matches
 Access through our portal
 Delivered within days of the event

WHAT IT COSTS YOU:
 $0 upfront
 $0 ongoing
 We make money on athlete purchases only

NEXT STEP:
I'm sending the agreement now. Read it, flag anything, we lock in the dates.

Questions? Call me.

Brandon
0411 934 935`},{id:"breakup",name:"Breakup Email",subject:"{{org_name}}  closing the loop",body:`{{decision_maker || "Hey"}},

I've sent a few emails about covering {{org_name}} events. Haven't heard back, so I'll assume the timing's not right.

All good. If you ever want professional coverage at no cost, the offer stands.

Good luck with the season.

Brandon`}];function y3e(){return Vre}function x3e(t,e){const r=Vre.find(u=>u.id===t);if(!r)return null;const n={org_name:e.org_name||"",decision_maker:e.contact?.decision_maker||"",sport:e.sport||"",upcoming_event:e.events?.upcoming?.[0]||"",event_date:e.events?.upcoming?.[0]?.split(":")?.[1]?.trim()||""};let i=r.subject,s=r.body;const o=/\{\{(\w+)\s*\|\|\s*"([^"]*)"\}\}/g;i=i.replace(o,(u,l,d)=>n[l]||d),s=s.replace(o,(u,l,d)=>n[l]||d);const c=/\{\{(\w+)\}\}/g;return i=i.replace(c,(u,l)=>n[l]||""),s=s.replace(c,(u,l)=>n[l]||""),{subject:i,body:s}}async function zre(){const t=await a_(),{data:e}=await Rr.from("crm_activities").select("*").order("created_at",{ascending:!1}),r=e||[],n={new:0,contacted:0,meeting:0,proposal:0,negotiating:0,signed:0,lost:0};t.forEach(g=>{const y=g.stage||"new";n.hasOwnProperty(y)&&n[y]++});const i=t.length,s=t.filter(g=>!["signed","lost","do_not_contact"].includes(g.stage)).length,o=n.signed,c=i>0?Math.round(o/i*100):0;let u=0;t.forEach(g=>{if(["proposal","negotiating","signed"].includes(g.stage)){const y=g.revenue_potential?.match(/\$(\d+)K/);y&&(u+=parseInt(y[1])*1e3)}});const l=new Date,d=new Date(l);d.setDate(l.getDate()-l.getDay()),d.setHours(0,0,0,0);const f=r.filter(g=>g.type==="Meeting"&&new Date(g.created_at)>=d).length,A=r.slice(0,10).map(g=>{const y=t.find(x=>x.id===g.lead_id);return{...g,lead_name:y?.org_name||"Unknown"}}),p={1:0,2:0,3:0};return t.forEach(g=>{p.hasOwnProperty(g.tier)&&p[g.tier]++}),{totalLeads:i,activeLeads:s,signedLeads:o,conversionRate:c,pipelineValue:u,meetingsThisWeek:f,stageCounts:n,tierCounts:p,recentActivities:A}}const YP=[{touch:1,name:"Initial Outreach",daysAfterPrevious:0,type:"initial"},{touch:2,name:"Value-Add Follow-up",daysAfterPrevious:3,type:"value"},{touch:3,name:"Social Proof",daysAfterPrevious:5,type:"proof"},{touch:4,name:"Meeting Request",daysAfterPrevious:5,type:"meeting"},{touch:5,name:"Permission to Close",daysAfterPrevious:7,type:"breakup"}];function b3e(t,e=1){if(!t)return null;const r=new Date(t),n=YP[e];if(!n)return null;let i=0;for(let o=1;o<=e;o++)i+=YP[o].daysAfterPrevious;const s=new Date(r);return s.setDate(s.getDate()+i),{touch:n.touch,name:n.name,type:n.type,dueDate:s,daysUntilDue:Math.ceil((s-new Date)/(1e3*60*60*24))}}function w3e(t){let e=1;(t.stage==="contacted"||t.stage==="meeting"||t.stage==="proposal")&&(e=1);const r=b3e(t.last_contact,e);if(!r)return{status:"complete",...t};const{daysUntilDue:n}=r;let i="upcoming";return n<0?i="overdue":n===0?i="today":n<=2&&(i="soon"),{...t,nextTouch:r,status:i,daysUntilDue:n}}function E3e(){const[t,e]=j.useState([]),[r,n]=j.useState(!0),[i,s]=j.useState("all");j.useEffect(()=>{o()},[]);const o=async()=>{n(!0);try{const p=(await a_()).filter(g=>["new","contacted","meeting"].includes(g.stage)&&g.last_contact);e(p.map(w3e))}catch(A){console.error("Error loading leads:",A)}finally{n(!1)}},u=i==="all"?t:t.filter(A=>A.status===i),l=t.filter(A=>A.status==="overdue").length,d=t.filter(A=>A.status==="today").length,f=t.filter(A=>A.status==="soon").length;return r?a.jsx("div",{className:"text-gray-400",children:"Loading follow-ups..."}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-white",children:"Follow-Up Scheduler"}),a.jsx("p",{className:"text-gray-400 text-xs sm:text-sm mt-1",children:"5-Touch outreach strategy tracker"})]}),a.jsxs("div",{className:"flex gap-4 sm:gap-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-xl sm:text-2xl font-bold text-red-500",children:l}),a.jsx("div",{className:"text-xs text-gray-400",children:"Overdue"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-xl sm:text-2xl font-bold text-yellow-500",children:d}),a.jsx("div",{className:"text-xs text-gray-400",children:"Today"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-xl sm:text-2xl font-bold text-blue-500",children:f}),a.jsx("div",{className:"text-xs text-gray-400",children:"Soon"})]})]})]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:["all","overdue","today","soon","upcoming"].map(A=>a.jsx("button",{onClick:()=>s(A),className:`px-3 sm:px-4 py-2 rounded-lg text-xs sm:text-sm font-medium transition-all ${i===A?"bg-red-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:A.charAt(0).toUpperCase()+A.slice(1)},A))}),u.length===0?a.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 sm:p-8 text-center text-gray-400",children:[a.jsx(Qw,{className:"w-10 h-10 sm:w-12 sm:h-12 mx-auto mb-2 sm:mb-3 text-green-500"}),a.jsxs("p",{className:"text-sm sm:text-base",children:["No follow-ups ",i!=="all"?i:"needed","!"]})]}):a.jsx("div",{className:"space-y-3",children:u.map(A=>a.jsx("div",{className:`bg-gray-800 rounded-lg p-3 sm:p-4 border-l-4 ${A.status==="overdue"?"border-red-500":A.status==="today"?"border-yellow-500":A.status==="soon"?"border-blue-500":"border-gray-600"}`,children:a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mb-2 flex-wrap",children:[a.jsx("h3",{className:"text-base sm:text-lg font-bold text-white truncate",children:A.org_name}),a.jsxs("span",{className:`px-2 py-0.5 sm:py-1 rounded text-xs font-medium flex-shrink-0 ${A.tier===1?"bg-red-900 text-red-200":A.tier===2?"bg-yellow-900 text-yellow-200":"bg-blue-900 text-blue-200"}`,children:["Tier ",A.tier]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-4 text-xs sm:text-sm text-gray-400",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(tu,{className:"w-3 h-3 sm:w-4 sm:h-4 flex-shrink-0"}),a.jsxs("span",{className:"truncate",children:["Touch ",A.nextTouch.touch,": ",A.nextTouch.name]})]}),a.jsxs("div",{className:"flex items-center gap-4 sm:gap-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(fc,{className:"w-3 h-3 sm:w-4 sm:h-4 flex-shrink-0"}),a.jsxs("span",{children:["Due: ",A.nextTouch.dueDate.toLocaleDateString()]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(DA,{className:"w-3 h-3 sm:w-4 sm:h-4 flex-shrink-0"}),a.jsx("span",{className:A.status==="overdue"?"text-red-400 font-medium":A.status==="today"?"text-yellow-400 font-medium":"text-gray-400",children:A.daysUntilDue===0?"Today":A.daysUntilDue<0?`${Math.abs(A.daysUntilDue)} days overdue`:`In ${A.daysUntilDue} days`})]})]})]})]}),a.jsxs("div",{className:"flex items-center gap-2 self-end sm:self-auto",children:[A.status==="overdue"&&a.jsx(k0,{className:"w-5 h-5 text-red-500 hidden sm:block"}),a.jsx("button",{className:"bg-red-600 hover:bg-red-700 text-white px-3 sm:px-4 py-2 rounded-lg text-xs sm:text-sm font-medium transition-all whitespace-nowrap",children:"Send Follow-Up"})]})]})},A.id))}),a.jsxs("details",{className:"bg-gray-800 rounded-lg",children:[a.jsxs("summary",{className:"p-3 sm:p-4 text-xs sm:text-sm font-bold text-white cursor-pointer list-none flex items-center justify-between",children:["5-Touch Strategy Timeline",a.jsx("span",{className:"text-gray-500 text-xs",children:"tap to expand"})]}),a.jsxs("div",{className:"px-3 sm:px-4 pb-3 sm:pb-4 space-y-2 text-xs sm:text-sm",children:[YP.map((A,p)=>a.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 text-gray-400",children:[a.jsxs("span",{className:"font-mono text-[10px] sm:text-xs bg-gray-700 px-1.5 sm:px-2 py-0.5 sm:py-1 rounded",children:["T",A.touch]}),a.jsx("span",{className:"flex-1 text-xs sm:text-sm",children:A.name}),a.jsx("span",{className:"text-[10px] sm:text-xs",children:p===0?"Initial":`+${A.daysAfterPrevious} days`})]},A.touch)),a.jsx("div",{className:"mt-3 pt-3 border-t border-gray-700 text-[10px] sm:text-xs text-gray-500",children:" Research shows 80% of sales happen between Touch 5-12. Don't give up early!"})]})]})]})}const ZL=["#ef4444","#f59e0b","#3b82f6"],ix={new:"#6b7280",contacted:"#3b82f6",meeting:"#8b5cf6",proposal:"#eab308",negotiating:"#f97316",signed:"#10b981"};function _3e(){const t=Ac(),[e,r]=j.useState(null),[n,i]=j.useState([]),[s,o]=j.useState(!0),[c,u]=j.useState(""),[l,d]=j.useState(""),[f,A]=j.useState("");j.useEffect(()=>{p()},[]);const p=async()=>{o(!0);try{const[w,E]=await Promise.all([zre(),a_()]);r(w),i(E)}catch(w){console.error("Error loading CRM data:",w)}finally{o(!1)}},g=()=>{let w=n;return c&&(w=w.filter(E=>E.tier===parseInt(c))),l&&(w=w.filter(E=>E.sport?.toLowerCase().includes(l.toLowerCase()))),f&&(w=w.filter(E=>E.stage===f)),w};if(s)return a.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:a.jsx("div",{className:"text-gray-400 text-lg",children:"Loading CRM data..."})});const y=[{name:"New",value:e.stageCounts.new,color:ix.new},{name:"Contacted",value:e.stageCounts.contacted,color:ix.contacted},{name:"Meeting",value:e.stageCounts.meeting,color:ix.meeting},{name:"Proposal",value:e.stageCounts.proposal,color:ix.proposal},{name:"Negotiating",value:e.stageCounts.negotiating,color:ix.negotiating},{name:"Signed",value:e.stageCounts.signed,color:ix.signed}],x=[{name:"Tier 1",value:e.tierCounts[1]||0,color:ZL[0]},{name:"Tier 2",value:e.tierCounts[2]||0,color:ZL[1]},{name:"Tier 3",value:e.tierCounts[3]||0,color:ZL[2]}].filter(w=>w.value>0);return a.jsxs("div",{className:"max-w-7xl mx-auto px-3 sm:px-6 lg:px-8 py-4 sm:py-8",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 sm:gap-4 mb-6 sm:mb-8",children:[a.jsxs("h1",{className:"text-2xl sm:text-3xl font-black text-white tracking-tight",children:[a.jsx("span",{className:"text-red-500",children:"CRM"})," DASHBOARD"]}),a.jsxs("div",{className:"flex gap-2 sm:gap-3 w-full sm:w-auto",children:[a.jsxs("button",{onClick:p,className:"bg-gray-700 hover:bg-gray-600 text-white px-3 sm:px-4 py-2 rounded-lg font-medium transition-all flex items-center justify-center gap-2 text-xs sm:text-sm flex-1 sm:flex-none",children:[a.jsx(e1,{size:16,className:"sm:w-[18px] sm:h-[18px]"}),"Refresh"]}),a.jsx("button",{onClick:()=>t("/portal/pipeline/board"),className:"bg-red-600 hover:bg-red-700 text-white px-4 sm:px-6 py-2 rounded-lg font-bold transition-all hover:scale-105 text-xs sm:text-sm flex-1 sm:flex-none whitespace-nowrap",children:"View Pipeline Board"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 sm:gap-4 mb-6 sm:mb-8",children:[a.jsxs("div",{className:"bg-[#1a1a2e] rounded-xl p-3 sm:p-5 border border-gray-800/50",children:[a.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mb-2 sm:mb-3",children:[a.jsx($h,{size:16,className:"text-gray-500 sm:w-5 sm:h-5"}),a.jsx("div",{className:"text-[9px] sm:text-[11px] font-bold text-gray-500 tracking-wider sm:tracking-widest uppercase",children:"Total Leads"})]}),a.jsx("div",{className:"text-2xl sm:text-3xl font-black text-white",children:e.totalLeads})]}),a.jsxs("div",{className:"bg-[#1a1a2e] rounded-xl p-3 sm:p-5 border border-gray-800/50",children:[a.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mb-2 sm:mb-3",children:[a.jsx($A,{size:16,className:"text-pink-500 sm:w-5 sm:h-5"}),a.jsx("div",{className:"text-[9px] sm:text-[11px] font-bold text-gray-500 tracking-wider sm:tracking-widest uppercase",children:"Conversion"})]}),a.jsxs("div",{className:"text-2xl sm:text-3xl font-black text-pink-500",children:[e.conversionRate,"%"]})]}),a.jsxs("div",{className:"bg-[#1a1a2e] rounded-xl p-3 sm:p-5 border border-gray-800/50",children:[a.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mb-2 sm:mb-3",children:[a.jsx(DA,{size:16,className:"text-purple-500 sm:w-5 sm:h-5"}),a.jsx("div",{className:"text-[9px] sm:text-[11px] font-bold text-gray-500 tracking-wider sm:tracking-widest uppercase",children:"Meetings"})]}),a.jsx("div",{className:"text-2xl sm:text-3xl font-black text-purple-500",children:e.meetingsThisWeek})]}),a.jsxs("div",{className:"bg-[#1a1a2e] rounded-xl p-3 sm:p-5 border border-gray-800/50",children:[a.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mb-2 sm:mb-3",children:[a.jsx(_f,{size:16,className:"text-red-400 sm:w-5 sm:h-5"}),a.jsx("div",{className:"text-[9px] sm:text-[11px] font-bold text-gray-500 tracking-wider sm:tracking-widest uppercase",children:"Pipeline"})]}),a.jsxs("div",{className:"text-2xl sm:text-3xl font-black text-red-400",children:["$",(e.pipelineValue/1e3).toFixed(0),"K"]})]})]}),a.jsx("div",{className:"mb-6 sm:mb-8",children:a.jsx(E3e,{})}),a.jsxs("div",{className:"hidden sm:grid md:grid-cols-3 gap-4 sm:gap-6 mb-6 sm:mb-8",children:[a.jsxs("div",{className:"md:col-span-2 bg-[#1a1a2e] rounded-xl p-4 sm:p-6 border border-gray-800/50",children:[a.jsx("h3",{className:"text-base sm:text-lg font-bold text-white mb-3 sm:mb-4",children:"Pipeline Funnel"}),a.jsx(YC,{width:"100%",height:200,children:a.jsxs(pre,{data:y,layout:"vertical",children:[a.jsx(LM,{type:"number",stroke:"#6b7280"}),a.jsx(BM,{dataKey:"name",type:"category",stroke:"#6b7280",width:80,tick:{fontSize:12}}),a.jsx(eb,{dataKey:"value",radius:[0,8,8,0],children:y.map((w,E)=>a.jsx(Ub,{fill:w.color},`cell-${E}`))})]})})]}),a.jsxs("div",{className:"bg-[#1a1a2e] rounded-xl p-4 sm:p-6 border border-gray-800/50",children:[a.jsx("h3",{className:"text-base sm:text-lg font-bold text-white mb-3 sm:mb-4",children:"Leads by Tier"}),a.jsx(YC,{width:"100%",height:200,children:a.jsx(pBe,{children:a.jsx(Ote,{data:x,cx:"50%",cy:"50%",innerRadius:50,outerRadius:75,dataKey:"value",label:w=>`${w.name}: ${w.value}`,children:x.map((w,E)=>a.jsx(Ub,{fill:w.color},`cell-${E}`))})})})]})]}),a.jsxs("div",{className:"bg-[#1a1a2e] rounded-xl p-4 sm:p-6 border border-gray-800/50 mb-4 sm:mb-6",children:[a.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mb-3 sm:mb-4",children:[a.jsx(vY,{size:16,className:"text-gray-500 sm:w-5 sm:h-5"}),a.jsx("h3",{className:"text-base sm:text-lg font-bold text-white",children:"Quick Filters"})]}),a.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2 sm:gap-4",children:[a.jsxs("select",{value:c,onChange:w=>u(w.target.value),className:"px-3 sm:px-4 py-2 sm:py-3 bg-[#12122a] border border-gray-800/50 rounded-lg sm:rounded-xl text-gray-300 text-sm focus:outline-none focus:ring-2 focus:ring-red-500/40",children:[a.jsx("option",{value:"",children:"All Tiers"}),a.jsx("option",{value:"1",children:"Tier 1"}),a.jsx("option",{value:"2",children:"Tier 2"}),a.jsx("option",{value:"3",children:"Tier 3"})]}),a.jsxs("select",{value:f,onChange:w=>A(w.target.value),className:"px-3 sm:px-4 py-2 sm:py-3 bg-[#12122a] border border-gray-800/50 rounded-lg sm:rounded-xl text-gray-300 text-sm focus:outline-none focus:ring-2 focus:ring-red-500/40",children:[a.jsx("option",{value:"",children:"All Statuses"}),a.jsx("option",{value:"new",children:"New"}),a.jsx("option",{value:"contacted",children:"Contacted"}),a.jsx("option",{value:"meeting",children:"Meeting Booked"}),a.jsx("option",{value:"proposal",children:"Proposal Sent"}),a.jsx("option",{value:"negotiating",children:"Negotiating"}),a.jsx("option",{value:"signed",children:"Signed"}),a.jsx("option",{value:"lost",children:"Lost"})]}),a.jsx("input",{type:"text",value:l,onChange:w=>d(w.target.value),placeholder:"Filter by sport...",className:"col-span-2 sm:col-span-1 px-3 sm:px-4 py-2 sm:py-3 bg-[#12122a] border border-gray-800/50 rounded-lg sm:rounded-xl text-white placeholder-gray-600 text-sm focus:outline-none focus:ring-2 focus:ring-red-500/40"})]}),(c||l||f)&&a.jsx("div",{className:"mt-3 sm:mt-4",children:a.jsxs("div",{className:"text-xs sm:text-sm text-gray-400",children:["Showing ",g().length," of ",e.totalLeads," leads"]})})]}),a.jsxs("div",{className:"bg-[#1a1a2e] rounded-xl p-4 sm:p-6 border border-gray-800/50 mb-4 sm:mb-6",children:[a.jsx("h3",{className:"text-base sm:text-lg font-bold text-white mb-3 sm:mb-4",children:"Recent Activity"}),e.recentActivities.length===0?a.jsx("div",{className:"text-gray-500 text-center py-6 sm:py-8 text-sm",children:"No recent activity"}):a.jsx("div",{className:"space-y-2 sm:space-y-3",children:e.recentActivities.map(w=>a.jsxs("div",{className:"flex items-start gap-3 sm:gap-4 p-3 sm:p-4 bg-[#12122a] rounded-lg border border-gray-800/50 hover:border-gray-700 transition-all",children:[a.jsx("div",{className:"flex-shrink-0 w-8 h-8 sm:w-10 sm:h-10 bg-red-600/20 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-red-400 text-base sm:text-xl",children:w.type==="Phone Call"?"":w.type==="Email"?"":w.type==="Meeting"?"":""})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[a.jsx("span",{className:"font-bold text-white text-sm sm:text-base",children:w.lead_name}),a.jsx("span",{className:"text-gray-600",children:""}),a.jsx("span",{className:"text-[10px] sm:text-xs font-bold text-gray-500 uppercase",children:w.type})]}),a.jsx("p",{className:"text-xs sm:text-sm text-gray-400 mb-1 line-clamp-2",children:w.notes}),a.jsx("div",{className:"text-[10px] sm:text-xs text-gray-600",children:new Date(w.created_at).toLocaleDateString("en-AU",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})})]})]},w.id))})]}),a.jsxs("div",{className:"bg-[#1a1a2e] rounded-xl p-4 sm:p-6 border border-gray-800/50",children:[a.jsx("h3",{className:"text-base sm:text-lg font-bold text-white mb-3 sm:mb-4",children:"Follow-up Reminders"}),a.jsxs("div",{className:"text-gray-500 text-center py-6 sm:py-8 text-sm",children:["No pending follow-ups",a.jsx("div",{className:"text-xs sm:text-sm mt-2",children:"Add activities with due dates to see reminders here"})]})]})]})}const S3e=[{id:"new",name:"New",color:"bg-gray-600",textColor:"text-gray-300"},{id:"contacted",name:"Contacted",color:"bg-blue-600",textColor:"text-blue-400"},{id:"meeting",name:"Meeting Booked",color:"bg-purple-600",textColor:"text-purple-400"},{id:"proposal",name:"Proposal Sent",color:"bg-yellow-600",textColor:"text-yellow-400"},{id:"negotiating",name:"Negotiating",color:"bg-orange-600",textColor:"text-orange-400"},{id:"signed",name:"Signed",color:"bg-green-600",textColor:"text-green-400"},{id:"lost",name:"Lost",color:"bg-red-600",textColor:"text-red-400"}];function T3e({lead:t,onDragStart:e}){const r=Ac(),n=i=>i>=80?"bg-red-600 text-red-100":i>=60?"bg-orange-600 text-orange-100":"bg-gray-600 text-gray-100";return a.jsxs("div",{draggable:!0,onDragStart:e,onClick:()=>r(`/portal/pipeline/leads/${t.id}`),className:"bg-[#12122a] rounded-lg p-4 border border-gray-800/50 hover:border-gray-700 cursor-move hover:bg-[#16162e] transition-all group",children:[a.jsx("h4",{className:"font-bold text-white group-hover:text-red-400 transition-colors mb-2 line-clamp-2",children:t.org_name}),a.jsxs("div",{className:"space-y-1.5 mb-3",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400",children:[a.jsx(CY,{size:14}),a.jsx("span",{className:"truncate",children:t.sport})]}),a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400",children:[a.jsx(th,{size:14}),a.jsx("span",{className:"truncate",children:t.location})]})]}),a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("span",{className:`px-2 py-1 rounded text-xs font-bold ${n(t.priority_score)}`,children:["Priority: ",t.priority_score]}),a.jsxs("span",{className:"text-xs font-bold text-gray-600 uppercase",children:["Tier ",t.tier]})]}),a.jsxs("div",{className:"pt-3 border-t border-gray-800/50 space-y-1",children:[a.jsxs("div",{className:"text-xs text-gray-600",children:[a.jsx("span",{className:"font-bold",children:"Last Contact:"})," ",t.last_contact?new Date(t.last_contact).toLocaleDateString("en-AU"):"Never"]}),t.revenue_potential&&a.jsx("div",{className:"text-xs text-green-400 font-medium",children:t.revenue_potential})]})]})}function C3e({column:t,leads:e,onDrop:r,onDragOver:n}){return a.jsxs("div",{onDrop:r,onDragOver:n,className:"flex flex-col min-h-[500px]",children:[a.jsx("div",{className:`${t.color} rounded-t-xl px-4 py-3 mb-3`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"font-bold text-white text-sm uppercase tracking-wider",children:t.name}),a.jsx("span",{className:"bg-white/20 px-2 py-0.5 rounded-full text-xs font-bold text-white",children:e.length})]})}),a.jsx("div",{className:"flex-1 space-y-3 px-2",children:e.length===0?a.jsx("div",{className:"text-center text-gray-600 text-sm py-8",children:"No leads"}):e.map(i=>a.jsx(T3e,{lead:i,onDragStart:s=>{s.dataTransfer.effectAllowed="move",s.dataTransfer.setData("leadId",i.id)}},i.id))})]})}function j3e(){const t=Ac(),[e,r]=j.useState([]),[n,i]=j.useState({totalLeads:0,activeLeads:0,meetingsThisWeek:0,pipelineValue:0}),[s,o]=j.useState(!0);j.useEffect(()=>{c()},[]);const c=async()=>{o(!0);try{const[f,A]=await Promise.all([a_(),zre()]);r(f),i({totalLeads:A.totalLeads,activeLeads:A.activeLeads,meetingsThisWeek:A.meetingsThisWeek,pipelineValue:A.pipelineValue})}catch(f){console.error("Error loading pipeline data:",f)}finally{o(!1)}},u=async(f,A)=>{f.preventDefault();const p=f.dataTransfer.getData("leadId");if(p)try{await Qre(p,{stage:A}),await c()}catch(g){console.error("Error updating lead:",g)}},l=f=>{f.preventDefault()},d=f=>e.filter(A=>A.stage===f);return s?a.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:a.jsx("div",{className:"text-gray-400 text-lg",children:"Loading pipeline..."})}):a.jsxs("div",{className:"min-h-screen bg-[#0d0d1a] pb-8",children:[a.jsx("div",{className:"bg-[#1a1a2e] border-b border-gray-800/50 mb-6",children:a.jsxs("div",{className:"max-w-[1600px] mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("button",{onClick:()=>t("/portal/pipeline"),className:"text-gray-400 hover:text-white transition-colors",children:a.jsx(U0,{size:24})}),a.jsxs("h1",{className:"text-3xl font-black text-white tracking-tight",children:[a.jsx("span",{className:"text-red-500",children:"PIPELINE"})," BOARD"]})]}),a.jsxs("button",{onClick:c,className:"bg-gray-700 hover:bg-gray-600 text-white px-4 py-2 rounded-lg font-medium transition-all flex items-center gap-2 text-sm",children:[a.jsx(e1,{size:18}),"Refresh"]})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"bg-[#12122a] rounded-xl p-4 border border-gray-800/50",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx($h,{size:18,className:"text-gray-500"}),a.jsx("div",{className:"text-[10px] font-bold text-gray-500 tracking-widest uppercase",children:"Total Leads"})]}),a.jsx("div",{className:"text-2xl font-black text-white",children:n.totalLeads})]}),a.jsxs("div",{className:"bg-[#12122a] rounded-xl p-4 border border-gray-800/50",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx($A,{size:18,className:"text-pink-500"}),a.jsx("div",{className:"text-[10px] font-bold text-gray-500 tracking-widest uppercase",children:"Active Pipeline"})]}),a.jsx("div",{className:"text-2xl font-black text-pink-500",children:n.activeLeads})]}),a.jsxs("div",{className:"bg-[#12122a] rounded-xl p-4 border border-gray-800/50",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(fc,{size:18,className:"text-purple-500"}),a.jsx("div",{className:"text-[10px] font-bold text-gray-500 tracking-widest uppercase",children:"Meetings This Week"})]}),a.jsx("div",{className:"text-2xl font-black text-purple-500",children:n.meetingsThisWeek})]}),a.jsxs("div",{className:"bg-[#12122a] rounded-xl p-4 border border-gray-800/50",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(_f,{size:18,className:"text-red-400"}),a.jsx("div",{className:"text-[10px] font-bold text-gray-500 tracking-widest uppercase",children:"Pipeline Value"})]}),a.jsxs("div",{className:"text-2xl font-black text-red-400",children:["$",(n.pipelineValue/1e3).toFixed(0),"K"]})]})]})]})}),a.jsx("div",{className:"max-w-[1600px] mx-auto px-4 sm:px-6 lg:px-8",children:a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-7 gap-4",children:S3e.map(f=>a.jsx(C3e,{column:f,leads:d(f.id),onDrop:A=>u(A,f.id),onDragOver:l},f.id))})})]})}const JL=[{value:"new",label:"New",color:"bg-gray-600"},{value:"contacted",label:"Contacted",color:"bg-blue-600"},{value:"meeting",label:"Meeting Booked",color:"bg-purple-600"},{value:"proposal",label:"Proposal Sent",color:"bg-yellow-600"},{value:"negotiating",label:"Negotiating",color:"bg-orange-600"},{value:"signed",label:"Signed",color:"bg-green-600"},{value:"lost",label:"Lost",color:"bg-red-600"}],e4=[{value:"Phone Call",icon:""},{value:"Email",icon:""},{value:"Meeting",icon:""},{value:"Note",icon:""},{value:"Follow-up",icon:""}];function N3e(){const{id:t}=tA(),e=Ac(),[r,n]=j.useState(null),[i,s]=j.useState([]),[o,c]=j.useState(!1),[u,l]=j.useState(null),[d,f]=j.useState(!0),[A,p]=j.useState(!1),[g,y]=j.useState(!1),[x,w]=j.useState("Phone Call"),[E,T]=j.useState(""),[C,N]=j.useState(null),[I,U]=j.useState(""),[K,Y]=j.useState("");j.useEffect(()=>{t&&re()},[t]);const re=async()=>{f(!0);try{const[ae,De]=await Promise.all([p3e(t),q1(t)]);ae&&(n(ae),l(ae),s(De))}catch(ae){console.error("Error loading lead:",ae)}finally{f(!1)}};if(d)return a.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:a.jsx("div",{className:"text-gray-400 text-lg",children:"Loading lead..."})});if(!r)return a.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:a.jsx("div",{className:"text-gray-400 text-lg",children:"Lead not found"})});const se=async()=>{p(!0);try{await Qre(t,u),n(u),c(!1)}catch(ae){console.error("Error saving lead:",ae),alert("Error saving lead")}finally{p(!1)}},Ae=async()=>{if(!E.trim()){alert("Please enter activity notes");return}try{await jz(t,{type:x,notes:E});const ae=await q1(t);s(ae),T(""),y(!1)}catch(ae){console.error("Error adding activity:",ae),alert("Error adding activity")}},we=ae=>{N(ae.id),U(ae.type),Y(ae.notes)},Ce=async()=>{try{await g3e(C,{type:I,notes:K});const ae=await q1(t);s(ae),N(null)}catch(ae){console.error("Error updating activity:",ae),alert("Error updating activity")}},ve=async ae=>{if(confirm("Are you sure you want to delete this activity?"))try{await v3e(ae);const De=await q1(t);s(De)}catch(De){console.error("Error deleting activity:",De),alert("Error deleting activity")}},ne=async ae=>{try{await jz(t,{type:ae,notes:`Quick ${ae.toLowerCase()} logged`});const De=await q1(t);s(De)}catch(De){console.error("Error logging activity:",De)}},ce=JL.find(ae=>ae.value===r.stage)?.color||"bg-gray-600";return a.jsxs("div",{className:"min-h-screen bg-[#0d0d1a]",children:[a.jsx("div",{className:"bg-gradient-to-r from-[#1a1a2e] to-[#16162a] border-b border-gray-800/50",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("button",{onClick:()=>e("/portal/pipeline/board"),className:"text-gray-400 hover:text-white transition-colors",children:a.jsx(U0,{size:24})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-black text-white tracking-tight",children:r.org_name}),a.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[a.jsx("span",{className:"text-sm text-gray-400",children:r.sport}),a.jsx("span",{className:"text-gray-700",children:""}),a.jsx("span",{className:"text-sm text-gray-400",children:r.location}),a.jsx("span",{className:"text-gray-700",children:""}),a.jsx("span",{className:"text-sm text-gray-400",children:r.type})]})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:`${ce} px-4 py-2 rounded-lg text-white text-sm font-bold uppercase`,children:JL.find(ae=>ae.value===r.stage)?.label||r.stage}),o?a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:se,disabled:A,className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-medium transition-all flex items-center gap-2 disabled:opacity-50",children:[a.jsx(EY,{size:16})," ",A?"Saving...":"Save"]}),a.jsxs("button",{onClick:()=>{c(!1),l(r)},className:"bg-gray-700 hover:bg-gray-600 text-white px-4 py-2 rounded-lg font-medium transition-all flex items-center gap-2",children:[a.jsx(B0,{size:16})," Cancel"]})]}):a.jsxs("button",{onClick:()=>c(!0),className:"bg-gray-700 hover:bg-gray-600 text-white px-4 py-2 rounded-lg font-medium transition-all flex items-center gap-2",children:[a.jsx(cB,{size:16})," Edit"]})]})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"bg-red-600/20 border border-red-500/30 px-3 py-1 rounded-full",children:a.jsxs("span",{className:"text-red-400 font-bold text-sm",children:["Priority: ",r.priority_score]})}),a.jsx("div",{className:"bg-blue-600/20 border border-blue-500/30 px-3 py-1 rounded-full",children:a.jsxs("span",{className:"text-blue-400 font-bold text-sm",children:["Tier ",r.tier]})}),a.jsx("div",{className:`${r.verification_status==="verified"?"bg-green-600/20 border-green-500/30 text-green-400":"bg-yellow-600/20 border-yellow-500/30 text-yellow-400"} border px-3 py-1 rounded-full`,children:a.jsxs("span",{className:"font-bold text-sm flex items-center gap-1",children:[a.jsx(oy,{size:14})," ",r.verification_status]})})]})]})}),a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:a.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[a.jsxs("div",{className:"bg-[#1a1a2e] rounded-xl p-6 border border-gray-800/50",children:[a.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Contact Information"}),o?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-bold text-gray-600 uppercase mb-1 block",children:"Email"}),a.jsx("input",{type:"email",value:u.contact?.email||"",onChange:ae=>l({...u,contact:{...u.contact,email:ae.target.value}}),className:"w-full bg-[#12122a] border border-gray-700 rounded-lg px-3 py-2 text-white text-sm focus:border-red-500 focus:outline-none",placeholder:"email@example.com"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-bold text-gray-600 uppercase mb-1 block",children:"Phone"}),a.jsx("input",{type:"tel",value:u.contact?.phone||"",onChange:ae=>l({...u,contact:{...u.contact,phone:ae.target.value}}),className:"w-full bg-[#12122a] border border-gray-700 rounded-lg px-3 py-2 text-white text-sm focus:border-red-500 focus:outline-none",placeholder:"0400 000 000"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-bold text-gray-600 uppercase mb-1 block",children:"Website"}),a.jsx("input",{type:"url",value:u.contact?.website||"",onChange:ae=>l({...u,contact:{...u.contact,website:ae.target.value}}),className:"w-full bg-[#12122a] border border-gray-700 rounded-lg px-3 py-2 text-white text-sm focus:border-red-500 focus:outline-none",placeholder:"https://example.com"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-bold text-gray-600 uppercase mb-1 block",children:"Instagram"}),a.jsx("input",{type:"text",value:u.contact?.instagram||"",onChange:ae=>l({...u,contact:{...u.contact,instagram:ae.target.value}}),className:"w-full bg-[#12122a] border border-gray-700 rounded-lg px-3 py-2 text-white text-sm focus:border-red-500 focus:outline-none",placeholder:"@username"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-bold text-gray-600 uppercase mb-1 block",children:"Facebook"}),a.jsx("input",{type:"text",value:u.contact?.facebook||"",onChange:ae=>l({...u,contact:{...u.contact,facebook:ae.target.value}}),className:"w-full bg-[#12122a] border border-gray-700 rounded-lg px-3 py-2 text-white text-sm focus:border-red-500 focus:outline-none",placeholder:"PageName"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-bold text-gray-600 uppercase mb-1 block",children:"Contact Form URL"}),a.jsx("input",{type:"url",value:u.contact?.contact_form||"",onChange:ae=>l({...u,contact:{...u.contact,contact_form:ae.target.value}}),className:"w-full bg-[#12122a] border border-gray-700 rounded-lg px-3 py-2 text-white text-sm focus:border-red-500 focus:outline-none",placeholder:"https://example.com/contact"})]})]}),a.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-bold text-gray-600 uppercase mb-1 block",children:"Decision Maker"}),a.jsx("input",{type:"text",value:u.contact?.decision_maker||"",onChange:ae=>l({...u,contact:{...u.contact,decision_maker:ae.target.value}}),className:"w-full bg-[#12122a] border border-gray-700 rounded-lg px-3 py-2 text-white text-sm focus:border-red-500 focus:outline-none",placeholder:"Name"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-bold text-gray-600 uppercase mb-1 block",children:"Avatar URL"}),a.jsx("input",{type:"url",value:u.contact?.avatar||"",onChange:ae=>l({...u,contact:{...u.contact,avatar:ae.target.value}}),className:"w-full bg-[#12122a] border border-gray-700 rounded-lg px-3 py-2 text-white text-sm focus:border-red-500 focus:outline-none",placeholder:"https://example.com/photo.jpg"})]})]})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[(r.contact?.email||o)&&a.jsxs("a",{href:`mailto:${r.contact?.email}`,className:"flex items-center gap-3 p-3 bg-[#12122a] rounded-lg border border-gray-800/50 hover:border-red-500/30 transition-all group",children:[a.jsx(tu,{size:20,className:"text-gray-500 group-hover:text-red-400"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-[10px] font-bold text-gray-600 uppercase mb-0.5",children:"Email"}),a.jsx("div",{className:"text-sm text-gray-300 group-hover:text-red-400 truncate",children:r.contact?.email||""})]})]}),(r.contact?.phone||o)&&a.jsxs("a",{href:`tel:${r.contact?.phone}`,className:"flex items-center gap-3 p-3 bg-[#12122a] rounded-lg border border-gray-800/50 hover:border-red-500/30 transition-all group",children:[a.jsx(ay,{size:20,className:"text-gray-500 group-hover:text-red-400"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-[10px] font-bold text-gray-600 uppercase mb-0.5",children:"Phone"}),a.jsx("div",{className:"text-sm text-gray-300 group-hover:text-red-400",children:r.contact?.phone||""})]})]}),(r.contact?.website||o)&&a.jsxs("a",{href:r.contact?.website,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 p-3 bg-[#12122a] rounded-lg border border-gray-800/50 hover:border-red-500/30 transition-all group",children:[a.jsx(E2,{size:20,className:"text-gray-500 group-hover:text-red-400"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-[10px] font-bold text-gray-600 uppercase mb-0.5",children:"Website"}),a.jsx("div",{className:"text-sm text-gray-300 group-hover:text-red-400 truncate",children:r.contact?.website||""})]})]}),(r.contact?.instagram||o)&&a.jsxs("a",{href:`https://instagram.com/${r.contact?.instagram?.replace("@","")}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 p-3 bg-[#12122a] rounded-lg border border-gray-800/50 hover:border-red-500/30 transition-all group",children:[a.jsx(IN,{size:20,className:"text-gray-500 group-hover:text-red-400"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-[10px] font-bold text-gray-600 uppercase mb-0.5",children:"Instagram"}),a.jsx("div",{className:"text-sm text-gray-300 group-hover:text-red-400",children:r.contact?.instagram||""})]})]}),r.contact?.facebook&&a.jsxs("a",{href:`https://facebook.com/${r.contact?.facebook}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 p-3 bg-[#12122a] rounded-lg border border-gray-800/50 hover:border-red-500/30 transition-all group",children:[a.jsx(w2,{size:20,className:"text-gray-500 group-hover:text-red-400"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-[10px] font-bold text-gray-600 uppercase mb-0.5",children:"Facebook"}),a.jsx("div",{className:"text-sm text-gray-300 group-hover:text-red-400",children:r.contact?.facebook||""})]})]}),r.contact?.linkedin&&a.jsxs("a",{href:`https://linkedin.com/in/${r.contact?.linkedin}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 p-3 bg-[#12122a] rounded-lg border border-gray-800/50 hover:border-red-500/30 transition-all group",children:[a.jsx(Kde,{size:20,className:"text-gray-500 group-hover:text-red-400"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-[10px] font-bold text-gray-600 uppercase mb-0.5",children:"LinkedIn"}),a.jsx("div",{className:"text-sm text-gray-300 group-hover:text-red-400 truncate",children:r.contact?.linkedin||""})]})]}),r.contact?.decision_maker_instagram&&a.jsxs("a",{href:`https://instagram.com/${r.contact?.decision_maker_instagram?.replace("@","")}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 p-3 bg-[#12122a] rounded-lg border border-gray-800/50 hover:border-red-500/30 transition-all group",children:[a.jsx(zp,{size:20,className:"text-gray-500 group-hover:text-red-400"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-[10px] font-bold text-gray-600 uppercase mb-0.5",children:"Decision Maker IG"}),a.jsx("div",{className:"text-sm text-gray-300 group-hover:text-red-400",children:r.contact?.decision_maker_instagram||""})]})]})]}),(r.contact?.decision_maker||o)&&a.jsxs("div",{className:"mt-4 p-3 bg-[#12122a] rounded-lg border border-gray-800/50",children:[a.jsx("div",{className:"text-[10px] font-bold text-gray-600 uppercase mb-1",children:"Decision Maker"}),a.jsxs("div",{className:"flex items-center gap-3",children:[r.contact?.avatar&&a.jsx("img",{src:r.contact.avatar,alt:r.contact.decision_maker,className:"w-12 h-12 rounded-full object-cover border-2 border-gray-700"}),a.jsx("div",{className:"text-white font-bold",children:r.contact?.decision_maker||""})]})]})]})]}),a.jsxs("div",{className:"bg-[#1a1a2e] rounded-xl p-6 border border-gray-800/50",children:[a.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Event Information"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(fc,{size:20,className:"text-gray-500 mt-0.5"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-[10px] font-bold text-gray-600 uppercase mb-1",children:"Frequency"}),a.jsx("div",{className:"text-gray-300",children:r.events?.frequency||"Not specified"})]})]}),r.events?.upcoming?.length>0&&a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(CY,{size:20,className:"text-gray-500 mt-0.5"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-[10px] font-bold text-gray-600 uppercase mb-1",children:"Upcoming Events"}),a.jsx("div",{className:"text-gray-300 space-y-1",children:r.events.upcoming.map((ae,De)=>a.jsx("div",{children:ae},De))})]})]}),a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(th,{size:20,className:"text-gray-500 mt-0.5"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-[10px] font-bold text-gray-600 uppercase mb-1",children:"Typical Venue"}),a.jsx("div",{className:"text-gray-300",children:r.events?.typical_venue||"Not specified"})]})]})]})]}),a.jsxs("div",{className:"bg-[#1a1a2e] rounded-xl p-6 border border-gray-800/50",children:[a.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Media & Revenue Assessment"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-[10px] font-bold text-gray-600 uppercase mb-2",children:"Media Quality"}),a.jsx("div",{className:"text-gray-300 text-sm",children:r.media_quality||"Not assessed"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(_f,{size:20,className:"text-green-500"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-[10px] font-bold text-gray-600 uppercase mb-1",children:"Revenue Potential"}),a.jsx("div",{className:"text-green-400 font-bold",children:r.revenue_potential||"TBD"})]})]})]})]}),a.jsxs("div",{className:"bg-[#1a1a2e] rounded-xl p-6 border border-gray-800/50",children:[a.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Internal Notes"}),o?a.jsx("textarea",{value:u.notes||"",onChange:ae=>l({...u,notes:ae.target.value}),rows:4,className:"w-full px-4 py-3 bg-[#12122a] border border-gray-800/50 rounded-xl text-white placeholder-gray-600 focus:outline-none focus:ring-2 focus:ring-red-500/40"}):a.jsx("div",{className:"text-gray-300 text-sm whitespace-pre-wrap",children:r.notes||"No notes"})]}),a.jsxs("div",{className:"bg-[#1a1a2e] rounded-xl p-6 border border-gray-800/50",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-bold text-white",children:"Activity Timeline"}),a.jsxs("button",{onClick:()=>y(!g),className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg font-medium transition-all flex items-center gap-2 text-sm",children:[a.jsx(L0,{size:16})," Add Activity"]})]}),g&&a.jsx("div",{className:"mb-6 p-4 bg-[#12122a] rounded-lg border border-gray-800/50",children:a.jsxs("div",{className:"grid gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Activity Type"}),a.jsx("select",{value:x,onChange:ae=>w(ae.target.value),className:"w-full px-4 py-3 bg-[#1a1a2e] border border-gray-800/50 rounded-xl text-gray-300 focus:outline-none focus:ring-2 focus:ring-red-500/40",children:e4.map(ae=>a.jsxs("option",{value:ae.value,children:[ae.icon," ",ae.value]},ae.value))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Notes"}),a.jsx("textarea",{value:E,onChange:ae=>T(ae.target.value),rows:3,placeholder:"What happened?",className:"w-full px-4 py-3 bg-[#1a1a2e] border border-gray-800/50 rounded-xl text-white placeholder-gray-600 focus:outline-none focus:ring-2 focus:ring-red-500/40"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:Ae,className:"flex-1 bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg font-medium transition-all",children:"Add Activity"}),a.jsx("button",{onClick:()=>y(!1),className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 text-gray-300 rounded-lg font-medium transition-all",children:"Cancel"})]})]})}),i.length===0?a.jsx("div",{className:"text-center text-gray-500 py-8",children:"No activities yet. Add your first activity above."}):a.jsx("div",{className:"space-y-3",children:i.map(ae=>{const De=e4.find(be=>be.value===ae.type),Oe=C===ae.id;return a.jsxs("div",{className:"flex items-start gap-4 p-4 bg-[#12122a] rounded-lg border border-gray-800/50",children:[a.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-red-600/20 rounded-full flex items-center justify-center text-xl",children:De?.icon||""}),a.jsx("div",{className:"flex-1 min-w-0",children:Oe?a.jsxs("div",{className:"space-y-3",children:[a.jsx("select",{value:I,onChange:be=>U(be.target.value),className:"w-full px-3 py-2 bg-[#1a1a2e] border border-gray-700 rounded-lg text-gray-300 text-sm focus:outline-none focus:ring-2 focus:ring-red-500/40",children:e4.map(be=>a.jsxs("option",{value:be.value,children:[be.icon," ",be.value]},be.value))}),a.jsx("textarea",{value:K,onChange:be=>Y(be.target.value),rows:3,className:"w-full px-3 py-2 bg-[#1a1a2e] border border-gray-700 rounded-lg text-white text-sm focus:outline-none focus:ring-2 focus:ring-red-500/40"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:Ce,className:"px-3 py-1 bg-green-600 hover:bg-green-700 text-white rounded text-sm",children:"Save"}),a.jsx("button",{onClick:()=>N(null),className:"px-3 py-1 bg-gray-600 hover:bg-gray-700 text-white rounded text-sm",children:"Cancel"})]})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xs font-bold text-gray-500 uppercase",children:ae.type}),a.jsx("span",{className:"text-gray-700",children:""}),a.jsx("span",{className:"text-xs text-gray-600",children:new Date(ae.created_at).toLocaleDateString("en-AU",{day:"numeric",month:"short",year:"numeric"})})]}),a.jsxs("div",{className:"flex gap-1",children:[a.jsx("button",{onClick:()=>we(ae),className:"p-1 text-gray-500 hover:text-blue-400 transition-colors",title:"Edit",children:a.jsx(cB,{size:14})}),a.jsx("button",{onClick:()=>ve(ae.id),className:"p-1 text-gray-500 hover:text-red-400 transition-colors",title:"Delete",children:a.jsx(B0,{size:14})})]})]}),a.jsx("p",{className:"text-sm text-gray-300",children:ae.notes})]})})]},ae.id)})})]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-[#1a1a2e] rounded-xl p-6 border border-gray-800/50",children:[a.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Quick Actions"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("button",{onClick:()=>ne("Phone Call"),className:"w-full bg-blue-600 hover:bg-blue-700 text-white px-4 py-3 rounded-lg font-medium transition-all flex items-center justify-center gap-2",children:[a.jsx(ay,{size:18})," Log Call"]}),a.jsxs("button",{onClick:()=>e("/portal/outreach"),className:"w-full bg-purple-600 hover:bg-purple-700 text-white px-4 py-3 rounded-lg font-medium transition-all flex items-center justify-center gap-2",children:[a.jsx(tu,{size:18})," Send Email"]}),a.jsxs("button",{onClick:()=>ne("Meeting"),className:"w-full bg-green-600 hover:bg-green-700 text-white px-4 py-3 rounded-lg font-medium transition-all flex items-center justify-center gap-2",children:[a.jsx(fc,{size:18})," Schedule Meeting"]}),a.jsxs("button",{onClick:()=>y(!0),className:"w-full bg-gray-700 hover:bg-gray-600 text-white px-4 py-3 rounded-lg font-medium transition-all flex items-center justify-center gap-2",children:[a.jsx(L0,{size:18})," Add Note"]})]})]}),o&&a.jsxs("div",{className:"bg-[#1a1a2e] rounded-xl p-6 border border-gray-800/50",children:[a.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Change Stage"}),a.jsx("select",{value:u.stage,onChange:ae=>l({...u,stage:ae.target.value}),className:"w-full px-4 py-3 bg-[#12122a] border border-gray-800/50 rounded-xl text-gray-300 focus:outline-none focus:ring-2 focus:ring-red-500/40",children:JL.map(ae=>a.jsx("option",{value:ae.value,children:ae.label},ae.value))})]}),a.jsxs("div",{className:"bg-[#1a1a2e] rounded-xl p-6 border border-gray-800/50",children:[a.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[a.jsx(SY,{size:18})," Tags"]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:r.tags?.map((ae,De)=>a.jsx("span",{className:"px-3 py-1 bg-gray-700 text-gray-300 rounded-full text-xs font-medium",children:ae},De))})]})]})]})})]})}function k3e(){const[t]=j.useState(y3e()),[e,r]=j.useState(t[0]),[n,i]=j.useState(null),[s,o]=j.useState([]),[c,u]=j.useState(null),[l,d]=j.useState(!1),[f,A]=j.useState(!0),p=j.useRef(null);j.useEffect(()=>{(async()=>{A(!0);const w=await a_();o(w),A(!1)})()},[]),j.useEffect(()=>{if(e&&n){const x=x3e(e.id,n);u(x)}else u(null)},[e,n]);const g=async()=>{const x=c?`Subject: ${c.subject}

${c.body}`:"";if(navigator.clipboard&&window.isSecureContext)try{await navigator.clipboard.writeText(x),d(!0),setTimeout(()=>d(!1),2e3);return}catch{console.log("Clipboard API failed, falling back to textarea method")}if(p.current){p.current.value=x,p.current.style.display="block",p.current.select(),p.current.setSelectionRange(0,99999);try{document.execCommand("copy"),d(!0),setTimeout(()=>d(!1),2e3)}catch{alert("Copy failed. Please select and copy manually.")}p.current.style.display="none"}},y=()=>{if(!c||!n?.contact?.email){alert("No email address available for this lead");return}const x=encodeURIComponent(c.subject),w=encodeURIComponent(c.body),E=`mailto:${n.contact.email}?subject=${x}&body=${w}`;window.location.href=E};return a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsx("textarea",{ref:p,style:{position:"absolute",left:"-9999px",display:"none"},readOnly:!0}),a.jsxs("div",{className:"mb-8",children:[a.jsxs("h1",{className:"text-3xl font-black text-white tracking-tight mb-2",children:[a.jsx("span",{className:"text-red-500",children:"OUTREACH"})," TEMPLATES"]}),a.jsx("p",{className:"text-gray-400",children:"Pre-built email templates for sales outreach"})]}),a.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"lg:col-span-1 space-y-4",children:[a.jsxs("div",{className:"bg-[#1a1a2e] rounded-xl p-6 border border-gray-800/50",children:[a.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Templates"}),a.jsx("div",{className:"space-y-2",children:t.map(x=>a.jsx("button",{onClick:()=>r(x),className:`w-full text-left px-4 py-3 rounded-lg font-medium transition-all ${e?.id===x.id?"bg-red-600 text-white":"bg-[#12122a] text-gray-300 hover:bg-[#16162e]"}`,children:x.name},x.id))})]}),a.jsxs("div",{className:"bg-[#1a1a2e] rounded-xl p-6 border border-gray-800/50",children:[a.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Select Lead"}),a.jsxs("select",{value:n?.id||"",onChange:x=>{const w=s.find(E=>E.id===x.target.value);i(w)},className:"w-full px-4 py-3 bg-[#12122a] border border-gray-800/50 rounded-xl text-gray-300 focus:outline-none focus:ring-2 focus:ring-red-500/40",children:[a.jsx("option",{value:"",children:"-- Select a lead --"}),s.filter(x=>x.stage!=="lost"&&x.verification_status!=="do_not_contact").map(x=>a.jsx("option",{value:x.id,children:x.org_name},x.id))]}),n&&a.jsxs("div",{className:"mt-4 p-3 bg-[#12122a] rounded-lg border border-gray-800/50",children:[a.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Selected Lead"}),a.jsx("div",{className:"text-white font-bold mb-1",children:n.org_name}),a.jsx("div",{className:"text-sm text-gray-400",children:n.sport}),a.jsx("div",{className:"text-sm text-gray-400",children:n.location}),n.contact.email&&a.jsxs("div",{className:"text-sm text-green-400 mt-2 flex items-center gap-1",children:[a.jsx(tu,{size:14})," ",n.contact.email]})]})]})]}),a.jsxs("div",{className:"lg:col-span-2",children:[a.jsxs("div",{className:"bg-[#1a1a2e] rounded-xl p-6 border border-gray-800/50",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-lg font-bold text-white",children:"Preview"}),c&&a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:g,className:`${l?"bg-green-600":"bg-gray-700 hover:bg-gray-600"} text-white px-4 py-2 rounded-lg font-medium transition-all flex items-center gap-2`,children:l?a.jsxs(a.Fragment,{children:[a.jsx(_o,{size:16})," Copied!"]}):a.jsxs(a.Fragment,{children:[a.jsx(vE,{size:16})," Copy to Clipboard"]})}),a.jsxs("button",{onClick:y,className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg font-medium transition-all flex items-center gap-2",children:[a.jsx(tu,{size:16})," Open in Email"]})]})]}),c?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Subject Line"}),a.jsx("div",{className:"px-4 py-3 bg-[#12122a] border border-gray-800/50 rounded-xl text-white font-medium",children:c.subject})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Email Body"}),a.jsx("div",{className:"px-4 py-4 bg-[#12122a] border border-gray-800/50 rounded-xl text-gray-300 whitespace-pre-wrap font-mono text-sm leading-relaxed min-h-[400px]",children:c.body})]}),a.jsxs("div",{className:"p-4 bg-blue-600/10 border border-blue-500/20 rounded-lg",children:[a.jsx("div",{className:"text-xs font-bold text-blue-400 uppercase mb-2",children:"Available Variables"}),a.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-blue-300",children:[a.jsx("div",{children:a.jsx("code",{className:"bg-blue-900/30 px-2 py-1 rounded",children:"{{org_name}}"})}),a.jsx("div",{children:a.jsx("code",{className:"bg-blue-900/30 px-2 py-1 rounded",children:"{{decision_maker}}"})}),a.jsx("div",{children:a.jsx("code",{className:"bg-blue-900/30 px-2 py-1 rounded",children:"{{sport}}"})}),a.jsx("div",{children:a.jsx("code",{className:"bg-blue-900/30 px-2 py-1 rounded",children:"{{upcoming_event}}"})})]})]})]}):a.jsxs("div",{className:"text-center text-gray-500 py-12",children:[a.jsx(tu,{size:48,className:"mx-auto mb-4 opacity-50"}),a.jsx("p",{children:"Select a template and lead to preview"})]})]}),a.jsxs("div",{className:"mt-4 p-4 bg-green-600/10 border border-green-500/20 rounded-lg",children:[a.jsx("div",{className:"text-xs font-bold text-green-400 uppercase mb-1",children:" Templates Ready"}),a.jsx("div",{className:"text-sm text-green-300",children:"All email templates are pre-configured with FFM branding. Select a lead and template to preview, then copy or open in your email client."})]})]})]}),a.jsxs("div",{className:"mt-8 bg-[#1a1a2e] rounded-xl p-6 border border-gray-800/50",children:[a.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Outreach Strategy Guide"}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-6 text-sm",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-bold text-red-400 mb-2",children:"Cold Outreach (First Contact)"}),a.jsxs("ul",{className:"space-y-1 text-gray-400",children:[a.jsx("li",{children:" Keep it short and personal"}),a.jsx("li",{children:" Lead with value, not features"}),a.jsx("li",{children:" Mention specific details about their organization"}),a.jsx("li",{children:" End with a clear, low-pressure CTA"})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-bold text-red-400 mb-2",children:"Follow-up #1 (3-5 days later)"}),a.jsxs("ul",{className:"space-y-1 text-gray-400",children:[a.jsx("li",{children:" Acknowledge they're busy"}),a.jsx("li",{children:" Share a relevant work example"}),a.jsx("li",{children:" Reiterate availability"}),a.jsx("li",{children:" Keep it brief"})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-bold text-red-400 mb-2",children:"Meeting Request (After engagement)"}),a.jsxs("ul",{className:"space-y-1 text-gray-400",children:[a.jsx("li",{children:" Be specific about what you'll cover"}),a.jsx("li",{children:" Show you've researched them"}),a.jsx("li",{children:" Offer flexible scheduling"}),a.jsx("li",{children:" Include calendar link if available"})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-bold text-red-400 mb-2",children:"Post-Meeting (Same day)"}),a.jsxs("ul",{className:"space-y-1 text-gray-400",children:[a.jsx("li",{children:" Send within 2 hours of meeting"}),a.jsx("li",{children:" Recap what was discussed"}),a.jsx("li",{children:" Outline next steps clearly"}),a.jsx("li",{children:" Attach proposal or contract"})]})]})]})]})]})}const t4=[{id:"branding",category:"Branding & Assets",icon:"",items:[{id:"logo",label:"High-resolution logo",type:"file",priority:"essential"},{id:"brand_kit",label:"Brand kit (colors, fonts, guidelines)",type:"file",priority:"important"},{id:"event_graphics",label:"Event-specific graphics/banners",type:"file",priority:"important"},{id:"sponsor_logos",label:"Sponsor logos for on-screen display",type:"file",priority:"nice"}]},{id:"athletes",category:"Athlete Information",icon:"",items:[{id:"registration_list",label:"Registration list (Name, Email, Phone, Instagram)",type:"file",priority:"essential"},{id:"notable_athletes",label:"Notable athletes to feature",type:"textarea",priority:"important"}]},{id:"venue",category:"Venue & Technical",icon:"",items:[{id:"floor_plan",label:"Venue floor plan (mat layout)",type:"file",priority:"essential"},{id:"internet_specs",label:"Internet specs (upload speed, hardwired access)",type:"textarea",priority:"essential"},{id:"power_locations",label:"Power outlet locations",type:"textarea",priority:"important"},{id:"load_in_time",label:"Load-in/crew access time",type:"text",priority:"important"},{id:"venue_contact",label:"Venue contact for event day",type:"contact",priority:"important"}]},{id:"event",category:"Event Operations",icon:"",items:[{id:"mat_count",label:"Number of mats running",type:"number",priority:"essential"},{id:"schedule",label:"Event schedule/run sheet",type:"file",priority:"essential"},{id:"bracket_system",label:"Bracket/scoring system used",type:"text",priority:"important"},{id:"match_comms_method",label:"How match order will be communicated",type:"textarea",priority:"important"}]},{id:"social",category:"Social & Promotion",icon:"",items:[{id:"org_instagram",label:"Organization Instagram",type:"text",priority:"important"},{id:"org_facebook",label:"Organization Facebook",type:"text",priority:"nice"},{id:"org_website",label:"Organization Website",type:"text",priority:"nice"},{id:"existing_content",label:"Existing footage/photos for promos",type:"file",priority:"nice"},{id:"existing_content_links",label:"Links to existing footage (Google Drive, Dropbox, etc.)",type:"textarea",priority:"nice"}]}];function I3e({session:t,onClose:e,onSave:r}){const[n,i]=j.useState("checklist"),[s,o]=j.useState(!1),[c,u]=j.useState({}),[l,d]=j.useState({}),[f,A]=j.useState({}),[p,g]=j.useState({});j.useEffect(()=>{if(!t)return;const U={};t4.forEach(K=>{U[K.id]={},K.items.forEach(Y=>{const re=t.checklist_config?.[K.id]?.[Y.id]||{};U[K.id][Y.id]={enabled:re.enabled!==!1,priority:re.priority||Y.priority,alreadyHave:re.alreadyHave||!1}})}),u(U),d(t.collected_data||{}),A(t.admin_item_notes||{}),g(t.manual_completions||{})},[t]);const y=(U,K)=>{u(Y=>({...Y,[U]:{...Y[U],[K]:{...Y[U][K],enabled:!Y[U][K].enabled}}}))},x=(U,K)=>{u(Y=>({...Y,[U]:{...Y[U],[K]:{...Y[U][K],alreadyHave:!Y[U][K].alreadyHave}}}))},w=(U,K,Y)=>{u(re=>({...re,[U]:{...re[U],[K]:{...re[U][K],priority:Y}}}))},E=(U,K,Y)=>{A(re=>({...re,[`${U}.${K}`]:Y}))},T=(U,K)=>{const Y=`${U}.${K}`;g(re=>({...re,[Y]:!re[Y]}))},C=(U,K,Y)=>{d(re=>({...re,[U]:{...re[U]||{},[K]:Y}}))},N=async()=>{o(!0);try{const U={checklist_config:c,collected_data:l,admin_item_notes:f,manual_completions:p};await xRe(t.id,U),r&&r(U),e()}catch(U){console.error("Error saving:",U),alert("Failed to save changes: "+U.message)}finally{o(!1)}},I=(U,K)=>{const Y=l[U]||{},re=Y[K]||Y[`${K}_url`],se=p[`${U}.${K}`],Ae=c[U]?.[K]?.alreadyHave;return se?{status:"manual",label:"Manually Complete",color:"blue"}:re?{status:"complete",label:"Client Provided",color:"green"}:Ae?{status:"already",label:"Already Have",color:"purple"}:{status:"pending",label:"Pending",color:"gray"}};return t?a.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4 overflow-y-auto",onClick:e,children:a.jsxs("div",{className:"bg-gray-800 rounded-2xl w-full max-w-5xl my-8 border border-gray-700 shadow-2xl",onClick:U=>U.stopPropagation(),children:[a.jsxs("div",{className:"p-6 border-b border-gray-700 flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold mb-2 text-white",children:"Edit Session"}),a.jsx("p",{className:"text-gray-400",children:t.org_name})]}),a.jsx("button",{onClick:e,className:"text-gray-500 hover:text-white text-xl",children:""})]}),a.jsx("div",{className:"border-b border-gray-700",children:a.jsx("div",{className:"flex gap-1 px-6",children:[{id:"checklist",label:"Checklist Config",icon:""},{id:"data",label:"Collected Data",icon:""}].map(U=>a.jsxs("button",{onClick:()=>i(U.id),className:`flex items-center gap-2 px-4 py-3 font-medium transition-colors border-b-2 ${n===U.id?"border-orange-500 text-white":"border-transparent text-gray-500 hover:text-white"}`,children:[a.jsx("span",{children:U.icon})," ",U.label]},U.id))})}),a.jsxs("div",{className:"p-6 max-h-[600px] overflow-y-auto",children:[n==="checklist"&&a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-4",children:a.jsxs("p",{className:"text-blue-200 text-sm",children:[a.jsx("strong",{children:" What this does:"}),' Configure what items the client sees, set priorities, mark items as "already have", and add internal notes for your team.']})}),t4.map(U=>a.jsxs("div",{className:"bg-gray-900/50 rounded-lg border border-gray-700",children:[a.jsx("div",{className:"px-4 py-3 border-b border-gray-700 bg-gray-800/50",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"text-2xl",children:U.icon}),a.jsx("h3",{className:"font-bold text-white",children:U.category})]})}),a.jsx("div",{className:"p-4 space-y-4",children:U.items.map(K=>{const Y=c[U.id]?.[K.id]||{},re=I(U.id,K.id),se=f[`${U.id}.${K.id}`]||"";return a.jsx("div",{className:`p-4 rounded-lg border transition-all ${Y.enabled?"bg-gray-800/50 border-gray-700":"bg-gray-900/30 border-gray-800 opacity-60"}`,children:a.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[a.jsx("button",{onClick:()=>y(U.id,K.id),className:`flex-shrink-0 w-6 h-6 rounded border-2 flex items-center justify-center transition-colors ${Y.enabled?"bg-orange-500 border-orange-500":"bg-transparent border-gray-600"}`,children:Y.enabled&&a.jsx("span",{className:"text-white text-sm",children:""})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:`font-medium ${Y.enabled?"text-white":"text-gray-500"}`,children:K.label}),a.jsx("span",{className:`text-xs px-2 py-1 rounded-full bg-${re.color}-500/20 text-${re.color}-400 border border-${re.color}-500/30`,children:re.label})]}),Y.enabled&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[a.jsxs("select",{value:Y.priority,onChange:Ae=>w(U.id,K.id,Ae.target.value),className:"text-xs bg-gray-900 border border-gray-700 rounded px-2 py-1 text-white focus:outline-none focus:border-orange-500",children:[a.jsx("option",{value:"essential",children:"Essential"}),a.jsx("option",{value:"important",children:"Important"}),a.jsx("option",{value:"nice",children:"Nice to have"})]}),a.jsx("button",{onClick:()=>x(U.id,K.id),className:`text-xs px-3 py-1 rounded border transition-colors ${Y.alreadyHave?"bg-purple-500/20 text-purple-400 border-purple-500/30":"bg-gray-900 text-gray-400 border-gray-700"}`,children:Y.alreadyHave?" Already Have":'Mark "Already Have"'}),a.jsx("button",{onClick:()=>T(U.id,K.id),className:`text-xs px-3 py-1 rounded border transition-colors ${p[`${U.id}.${K.id}`]?"bg-blue-500/20 text-blue-400 border-blue-500/30":"bg-gray-900 text-gray-400 border-gray-700"}`,children:p[`${U.id}.${K.id}`]?" Manually Complete":"Mark Complete"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Internal Note (not visible to client)"}),a.jsx("textarea",{value:se,onChange:Ae=>E(U.id,K.id,Ae.target.value),placeholder:"e.g., Client sent logo via email - see Drive folder",rows:2,className:"w-full text-sm bg-gray-900 border border-gray-700 rounded px-3 py-2 text-white placeholder-gray-600 focus:outline-none focus:border-orange-500 resize-none"})]})]})]})]})},K.id)})})]},U.id))]}),n==="data"&&a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-4",children:a.jsxs("p",{className:"text-yellow-200 text-sm",children:[a.jsx("strong",{children:" Caution:"})," You're editing data the client submitted. Only modify if you need to correct errors or add information on their behalf."]})}),t4.map(U=>{const K=l[U.id]||{};return a.jsxs("div",{className:"bg-gray-900/50 rounded-lg border border-gray-700",children:[a.jsx("div",{className:"px-4 py-3 border-b border-gray-700 bg-gray-800/50",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"text-2xl",children:U.icon}),a.jsx("h3",{className:"font-bold text-white",children:U.category})]})}),a.jsx("div",{className:"p-4 space-y-4",children:U.items.filter(Y=>c[U.id]?.[Y.id]?.enabled!==!1).map(Y=>{const re=K[Y.id]||"",se=K[`${Y.id}_url`]||"";return a.jsxs("div",{className:"p-3 rounded-lg bg-gray-800/50 border border-gray-700",children:[a.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:Y.label}),Y.type==="file"&&a.jsxs("div",{children:[a.jsx("input",{type:"text",value:se,onChange:Ae=>C(U.id,`${Y.id}_url`,Ae.target.value),placeholder:"File URL (if uploaded)",className:"w-full text-sm bg-gray-900 border border-gray-700 rounded px-3 py-2 text-white placeholder-gray-600 focus:outline-none focus:border-orange-500"}),se&&a.jsx("a",{href:se,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-orange-500 hover:underline mt-1 inline-block",children:"View uploaded file "})]}),Y.type==="text"&&a.jsx("input",{type:"text",value:re,onChange:Ae=>C(U.id,Y.id,Ae.target.value),placeholder:Y.placeholder||"",className:"w-full text-sm bg-gray-900 border border-gray-700 rounded px-3 py-2 text-white placeholder-gray-600 focus:outline-none focus:border-orange-500"}),Y.type==="number"&&a.jsx("input",{type:"number",value:re,onChange:Ae=>C(U.id,Y.id,Ae.target.value),placeholder:Y.placeholder||"",className:"w-full text-sm bg-gray-900 border border-gray-700 rounded px-3 py-2 text-white placeholder-gray-600 focus:outline-none focus:border-orange-500"}),Y.type==="textarea"&&a.jsx("textarea",{value:re,onChange:Ae=>C(U.id,Y.id,Ae.target.value),placeholder:Y.placeholder||"",rows:3,className:"w-full text-sm bg-gray-900 border border-gray-700 rounded px-3 py-2 text-white placeholder-gray-600 focus:outline-none focus:border-orange-500 resize-none"}),Y.type==="contact"&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("input",{type:"text",value:K[`${Y.id}_name`]||"",onChange:Ae=>C(U.id,`${Y.id}_name`,Ae.target.value),placeholder:"Contact name",className:"w-full text-sm bg-gray-900 border border-gray-700 rounded px-3 py-2 text-white placeholder-gray-600 focus:outline-none focus:border-orange-500"}),a.jsx("input",{type:"tel",value:K[`${Y.id}_phone`]||"",onChange:Ae=>C(U.id,`${Y.id}_phone`,Ae.target.value),placeholder:"Phone number",className:"w-full text-sm bg-gray-900 border border-gray-700 rounded px-3 py-2 text-white placeholder-gray-600 focus:outline-none focus:border-orange-500"}),a.jsx("input",{type:"email",value:K[`${Y.id}_email`]||"",onChange:Ae=>C(U.id,`${Y.id}_email`,Ae.target.value),placeholder:"Email address",className:"w-full text-sm bg-gray-900 border border-gray-700 rounded px-3 py-2 text-white placeholder-gray-600 focus:outline-none focus:border-orange-500"})]})]},Y.id)})})]},U.id)})]})]}),a.jsxs("div",{className:"p-6 border-t border-gray-700 flex justify-end gap-3",children:[a.jsx("button",{onClick:e,className:"px-6 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg transition-colors",children:"Cancel"}),a.jsx("button",{onClick:N,disabled:s,className:"px-6 py-2 bg-orange-500 hover:bg-orange-600 disabled:bg-gray-600 text-white rounded-lg transition-colors flex items-center gap-2",children:s?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full"}),"Saving..."]}):a.jsx(a.Fragment,{children:" Save Changes"})})]})]})}):null}const Nz=[{id:"branding",category:"Branding & Assets",icon:"",items:[{id:"logo",label:"High-resolution logo",type:"file"},{id:"brand_kit",label:"Brand kit (colors, fonts, guidelines)",type:"file"},{id:"event_graphics",label:"Event-specific graphics/banners",type:"file"},{id:"sponsor_logos",label:"Sponsor logos for on-screen display",type:"file"}]},{id:"athletes",category:"Athlete Information",icon:"",items:[{id:"registration_list",label:"Registration list",type:"file"},{id:"notable_athletes",label:"Notable athletes to feature",type:"textarea"}]},{id:"venue",category:"Venue & Technical",icon:"",items:[{id:"floor_plan",label:"Venue floor plan",type:"file"},{id:"internet_specs",label:"Internet specs",type:"textarea"},{id:"power_locations",label:"Power outlet locations",type:"textarea"},{id:"load_in_time",label:"Load-in/crew access time",type:"text"},{id:"venue_contact",label:"Venue contact for event day",type:"contact"}]},{id:"event",category:"Event Operations",icon:"",items:[{id:"mat_count",label:"Number of mats running",type:"number"},{id:"schedule",label:"Event schedule/run sheet",type:"file"},{id:"bracket_system",label:"Bracket/scoring system used",type:"text"},{id:"match_comms_method",label:"How match order will be communicated",type:"textarea"}]},{id:"social",category:"Social & Promotion",icon:"",items:[{id:"org_instagram",label:"Organization Instagram",type:"text"},{id:"org_facebook",label:"Organization Facebook",type:"text"},{id:"org_website",label:"Organization Website",type:"text"},{id:"existing_content",label:"Existing footage/photos for promos",type:"file"},{id:"existing_content_links",label:"Links to existing footage",type:"textarea"}]}],L3e=t=>{if(!t)return{icon:y8,type:"file",isImage:!1};const e=t.toLowerCase();return e.match(/\.(jpg|jpeg|png|gif|webp|svg|bmp)(\?|$)/i)?{icon:E0,type:"image",isImage:!0}:e.match(/\.(mp4|mov|avi|webm|mkv)(\?|$)/i)?{icon:gf,type:"video",isImage:!1}:e.match(/\.(mp3|wav|aac|ogg|m4a)(\?|$)/i)?{icon:ahe,type:"audio",isImage:!1}:e.match(/\.(pdf|doc|docx|xls|xlsx|ppt|pptx|txt|csv)(\?|$)/i)?{icon:jb,type:"document",isImage:!1}:e.match(/\.(zip|rar|7z|tar|gz)(\?|$)/i)?{icon:mY,type:"archive",isImage:!1}:{icon:y8,type:"file",isImage:!1}},B3e=t=>{if(!t)return"File";try{const n=new URL(t).pathname.split("/").pop(),i=decodeURIComponent(n);return i.length>40?i.substring(0,37)+"...":i}catch{return"File"}};function P3e({url:t,label:e}){const{icon:r,type:n,isImage:i}=L3e(t),s=B3e(t);return a.jsx("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"group block",children:a.jsxs("div",{className:"border border-gray-700 rounded-xl overflow-hidden hover:border-orange-500/50 transition-all",children:[a.jsxs("div",{className:"bg-gray-900 aspect-video flex items-center justify-center relative overflow-hidden",children:[i?a.jsx("img",{src:t,alt:e,className:"w-full h-full object-cover group-hover:scale-105 transition-transform",onError:o=>{o.target.style.display="none",o.target.nextSibling.style.display="flex"}}):null,a.jsxs("div",{className:`flex flex-col items-center justify-center text-gray-500 ${i?"hidden":""}`,style:i?{display:"none"}:{},children:[a.jsx(r,{size:48,className:"mb-2"}),a.jsx("span",{className:"text-xs uppercase tracking-wide",children:n})]}),a.jsx("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-3",children:a.jsx("div",{className:"bg-orange-500 text-white p-2 rounded-full",children:a.jsx(yE,{size:20})})})]}),a.jsxs("div",{className:"p-3 bg-gray-800",children:[a.jsx("p",{className:"text-sm text-white truncate",children:s}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:e})]})]})})}function O3e({value:t,isUrl:e}){return t?Array.isArray(t)?t.length===0?a.jsx("span",{className:"text-gray-500 italic",children:"No links provided"}):a.jsx("div",{className:"space-y-1",children:t.map((r,n)=>a.jsxs("a",{href:r,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 break-all flex items-center gap-1 block",children:[" ",r.includes("drive.google")?"Google Drive":r.includes("dropbox")?"Dropbox":"External"," link",a.jsx(yE,{size:14})]},n))}):e||t.startsWith("http://")||t.startsWith("https://")?a.jsxs("a",{href:t.startsWith("http")?t:`https://${t}`,target:"_blank",rel:"noopener noreferrer",className:"text-orange-500 hover:text-orange-400 break-all flex items-center gap-1",children:[t,a.jsx(yE,{size:14})]}):t.includes(`
`)?a.jsx("p",{className:"text-white whitespace-pre-wrap",children:t}):a.jsx("span",{className:"text-white",children:t}):a.jsx("span",{className:"text-gray-500 italic",children:"Not provided"})}function R3e({data:t,itemId:e}){const r=t[`${e}_name`],n=t[`${e}_phone`],i=t[`${e}_email`];return!r&&!n&&!i?a.jsx("span",{className:"text-gray-500 italic",children:"Not provided"}):a.jsxs("div",{className:"space-y-1",children:[r&&a.jsx("p",{className:"text-white font-medium",children:r}),n&&a.jsxs("a",{href:`tel:${n}`,className:"text-orange-500 hover:text-orange-400 block",children:[" ",n]}),i&&a.jsxs("a",{href:`mailto:${i}`,className:"text-orange-500 hover:text-orange-400 block",children:[" ",i]})]})}function D3e({data:t,files:e=[],checklistConfig:r}){const[n,i]=j.useState(new Set(Nz.map(f=>f.id))),s=r||Nz,o=(f,A)=>{const p=s.find(y=>y.id===f);return p&&p.items.find(y=>y.id===A)?.label||null},c={};for(const f of e){if(!f.category)continue;c[f.category]||(c[f.category]=[]);const A=o(f.category,f.file_type);c[f.category].push({id:f.file_type||f.id,label:A||f.file_type||"Uploaded file",url:f.drive_file_url||f.public_url,fileName:f.file_name,mimeType:f.mime_type})}const u=f=>{i(A=>{const p=new Set(A);return p.has(f)?p.delete(f):p.add(f),p})},l=f=>{if(c[f]?.length>0)return!0;const A=t?.[f];return A?Object.values(A).some(p=>p&&p!==""):!1},d=f=>{const A=t?.[f.id]||{},p=c[f.id]||[];let g=0,y=f.items.length;const x=new Set(p.map(w=>w.id));return f.items.forEach(w=>{if(w.type==="file")(x.has(w.id)||A[`${w.id}_url`])&&g++;else if(w.type==="contact")(A[`${w.id}_name`]||A[`${w.id}_phone`]||A[`${w.id}_email`])&&g++;else{const E=A[w.id];E&&E!==""&&g++}}),{completed:g,total:y}};return!t||Object.keys(t).length===0?a.jsx("div",{className:"text-center py-8 text-gray-500",children:a.jsx("p",{children:"No information collected yet"})}):a.jsx("div",{className:"space-y-4",children:s.map(f=>{const A=t[f.id]||{},p=n.has(f.id),g=l(f.id),y=d(f),x=c[f.id]||[],w=new Set(x.map(N=>N.id)),E=f.items.filter(N=>N.type==="file").filter(N=>!w.has(N.id)).map(N=>({...N,url:A[`${N.id}_url`]||A[N.id]})).filter(N=>N.url&&N.url.startsWith("http")),T=[...x,...E],C=f.items.filter(N=>N.type!=="file");return a.jsxs("div",{className:`border rounded-xl overflow-hidden transition-colors ${g?"border-gray-700 bg-gray-800/50":"border-gray-800 bg-gray-900/30"}`,children:[a.jsxs("button",{onClick:()=>u(f.id),className:"w-full flex items-center justify-between p-4 hover:bg-gray-700/30 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"text-2xl",children:f.icon}),a.jsxs("div",{className:"text-left",children:[a.jsx("h3",{className:"font-semibold text-white",children:f.category}),a.jsxs("p",{className:"text-xs text-gray-500",children:[y.completed,"/",y.total," items provided"]})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[y.completed===y.total?a.jsx("span",{className:"text-green-400 text-sm",children:" Complete"}):y.completed>0?a.jsxs("span",{className:"text-yellow-400 text-sm",children:[y.completed,"/",y.total]}):a.jsx("span",{className:"text-gray-500 text-sm",children:"Empty"}),p?a.jsx(EC,{size:20,className:"text-gray-400"}):a.jsx(sy,{size:20,className:"text-gray-400"})]})]}),p&&a.jsxs("div",{className:"border-t border-gray-700 p-4",children:[T.length>0&&a.jsxs("div",{className:"mb-6",children:[a.jsxs("h4",{className:"text-xs text-gray-500 uppercase mb-3",children:["Files (",T.length,")"]}),a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:T.map((N,I)=>a.jsx(P3e,{url:N.url,label:N.label||N.fileName||"Uploaded file"},N.id||I))})]}),C.length>0&&a.jsxs("div",{className:T.length>0?"mt-4 pt-4 border-t border-gray-700":"",children:[a.jsx("h4",{className:"text-xs text-gray-500 uppercase mb-3",children:"Details"}),a.jsx("div",{className:"space-y-4",children:C.map(N=>{const I=A[N.id],U=N.type==="contact"?A[`${N.id}_name`]||A[`${N.id}_phone`]||A[`${N.id}_email`]:I&&I!=="";return a.jsxs("div",{className:`${U?"":"opacity-50"}`,children:[a.jsx("label",{className:"text-sm text-gray-400 block mb-1",children:N.label}),N.type==="contact"?a.jsx(R3e,{data:A,itemId:N.id}):a.jsx(O3e,{value:I,isUrl:N.id.includes("website")||N.id.includes("facebook")||N.id.includes("instagram")})]},N.id)})})]}),Object.entries(A).filter(([N,I])=>N.endsWith("_links")&&Array.isArray(I)&&I.length>0).length>0&&a.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-700",children:[a.jsx("h4",{className:"text-xs text-gray-500 uppercase mb-3",children:"External Links"}),a.jsx("div",{className:"space-y-4",children:Object.entries(A).filter(([N,I])=>N.endsWith("_links")&&Array.isArray(I)&&I.length>0).map(([N,I])=>{const U=N.replace(/_links$/,""),Y=f.items.find(re=>re.id===U)?.label||U.replace(/_/g," ").replace(/\b\w/g,re=>re.toUpperCase());return a.jsxs("div",{children:[a.jsxs("label",{className:"text-sm text-gray-400 block mb-1",children:[Y," (external links)"]}),a.jsx("div",{className:"space-y-1",children:I.map((re,se)=>a.jsxs("a",{href:re,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 break-all flex items-center gap-2 p-2 bg-blue-500/10 rounded-lg text-sm",children:[a.jsx("span",{children:""}),a.jsxs("span",{className:"flex-1 truncate",children:[re.includes("drive.google")?"Google Drive":re.includes("dropbox")?"Dropbox":"External"," link"]}),a.jsx(yE,{size:14})]},se))})]},N)})})]}),T.length===0&&C.every(N=>{const I=A[N.id];return N.type==="contact"?!(A[`${N.id}_name`]||A[`${N.id}_phone`]||A[`${N.id}_email`]):!I||I===""})&&a.jsx("p",{className:"text-gray-500 text-center py-4 italic",children:"No information provided for this category"})]})]},f.id)})})}function M3e(){const t=Ac(),[e,r]=j.useState([]),[n,i]=j.useState([]),[s,o]=j.useState(!0),[c,u]=j.useState(null),[l,d]=j.useState(null),[f,A]=j.useState([]),[p,g]=j.useState("all"),[y,x]=j.useState(""),[w,E]=j.useState(!1),[T,C]=j.useState(!1),[N,I]=j.useState(!1),[U,K]=j.useState(!1),[Y,re]=j.useState({org_name:"",contact_name:"",contact_email:"",contact_phone:"",event_name:"",event_date:"",event_location:""});j.useEffect(()=>{se()},[]);const se=async()=>{try{const[de,xe]=await Promise.all([Ore(),k5()]);r(de||[]),i(xe||[])}catch(de){u(de.message)}finally{o(!1)}},Ae=async de=>{de.preventDefault(),K(!0);try{const xe=await Rre(Y);r(je=>[xe,...je]),E(!1),re({org_name:"",contact_name:"",contact_email:"",contact_phone:"",event_name:"",event_date:"",event_location:""})}catch(xe){alert("Error: "+xe.message)}finally{K(!1)}},we=async de=>{try{await ERe(de,"Brandon Hibbs"),await se(),d(null)}catch(xe){alert("Error: "+xe.message)}},Ce=async de=>{if(confirm("Are you sure you want to delete this onboarding session? This cannot be undone."))try{await _Re(de),r(xe=>xe.filter(je=>je.id!==de)),d(null)}catch(xe){alert("Error deleting session: "+xe.message)}},ve=de=>{r(xe=>xe.map(je=>je.id===l.id?{...je,...de}:je)),d(xe=>({...xe,...de})),I(!1)},ne=async de=>{d(de);try{const xe=await CRe(de.id);A(xe||[])}catch(xe){console.error("Error fetching files:",xe),A([])}},ce=de=>{const xe={pending:"bg-yellow-500/20 text-yellow-400",in_progress:"bg-blue-500/20 text-blue-400",submitted:"bg-green-500/20 text-green-400",reviewed:"bg-purple-500/20 text-purple-400"},je={pending:"Pending",in_progress:"In Progress",submitted:"Submitted",reviewed:"Reviewed"};return a.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${xe[de]||xe.pending}`,children:je[de]||"Unknown"})},ae=de=>{const xe=de.checklist_progress||{},je=18,Me=Object.values(xe).filter(Re=>Re).length;return Math.round(Me/je*100)},De=e.filter(de=>!(p!=="all"&&de.status!==p||y&&!de.org_name?.toLowerCase().includes(y.toLowerCase()))),Oe=de=>`${window.location.origin}/#/onboarding/${de}`,be=n.filter(de=>de.status==="signed");return s?a.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:a.jsx("div",{className:"animate-spin w-12 h-12 border-4 border-orange-500 border-t-transparent rounded-full"})}):a.jsxs("div",{className:"min-h-screen bg-gray-900 text-white",children:[a.jsx("div",{className:"bg-gray-800 border-b border-gray-700",children:a.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-4 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{onClick:()=>t("/portal/contracts"),className:"text-gray-400 hover:text-white",children:" Back"}),a.jsx("h1",{className:"text-xl font-bold",children:"Partner Onboarding"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>C(!0),className:"bg-gray-700 hover:bg-gray-600 text-white px-4 py-2 rounded-lg text-sm flex items-center gap-2",children:" From Contract"}),a.jsx("button",{onClick:()=>E(!0),className:"bg-orange-500 hover:bg-orange-600 text-white px-4 py-2 rounded-lg text-sm flex items-center gap-2",children:" New Session"})]})]})}),a.jsx("div",{className:"max-w-6xl mx-auto px-4 py-6",children:a.jsx("div",{className:"grid grid-cols-4 gap-4",children:[{label:"Total",value:e.length,color:"orange"},{label:"Pending",value:e.filter(de=>de.status==="pending").length,color:"yellow"},{label:"Submitted",value:e.filter(de=>de.status==="submitted").length,color:"green"},{label:"Reviewed",value:e.filter(de=>de.status==="reviewed").length,color:"purple"}].map((de,xe)=>a.jsxs("div",{className:"bg-gray-800 rounded-xl p-4 border border-gray-700",children:[a.jsx("div",{className:`text-3xl font-bold text-${de.color}-500`,children:de.value}),a.jsx("div",{className:"text-sm text-gray-500",children:de.label})]},xe))})}),a.jsx("div",{className:"max-w-6xl mx-auto px-4 mb-6",children:a.jsxs("div",{className:"flex gap-3",children:[a.jsx("input",{type:"text",placeholder:"Search organizations...",value:y,onChange:de=>x(de.target.value),className:"flex-1 max-w-xs px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:border-orange-500 focus:outline-none"}),a.jsxs("select",{value:p,onChange:de=>g(de.target.value),className:"px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:border-orange-500 focus:outline-none",children:[a.jsx("option",{value:"all",children:"All Status"}),a.jsx("option",{value:"pending",children:"Pending"}),a.jsx("option",{value:"in_progress",children:"In Progress"}),a.jsx("option",{value:"submitted",children:"Submitted"}),a.jsx("option",{value:"reviewed",children:"Reviewed"})]})]})}),a.jsx("div",{className:"max-w-6xl mx-auto px-4 pb-12",children:De.length===0?a.jsxs("div",{className:"bg-gray-800 rounded-xl p-12 text-center border border-gray-700",children:[a.jsx("div",{className:"text-4xl mb-4",children:""}),a.jsx("p",{className:"text-gray-400",children:"No onboarding sessions found"}),a.jsx("button",{onClick:()=>E(!0),className:"mt-4 bg-orange-500 hover:bg-orange-600 text-white px-6 py-2 rounded-lg text-sm",children:"Create First Session"})]}):a.jsx("div",{className:"space-y-3",children:De.map(de=>a.jsx("div",{onClick:()=>ne(de),className:"bg-gray-800 rounded-xl p-5 border border-gray-700 hover:border-gray-600 cursor-pointer transition-colors",children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("h3",{className:"font-semibold text-lg",children:de.org_name}),ce(de.status)]}),a.jsxs("div",{className:"flex gap-4 text-sm text-gray-500",children:[de.event_name&&a.jsxs("span",{children:[" ",de.event_name]}),de.contact_name&&a.jsxs("span",{children:[" ",de.contact_name]}),de.event_date&&a.jsxs("span",{children:[" ",new Date(de.event_date).toLocaleDateString()]})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:"text-2xl font-bold text-orange-500",children:[ae(de),"%"]}),a.jsx("div",{className:"text-xs text-gray-500",children:"Complete"})]})]})},de.id))})}),l&&a.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:()=>d(null),children:a.jsxs("div",{className:"bg-gray-800 rounded-2xl max-w-3xl w-full max-h-[90vh] overflow-auto border border-gray-700",onClick:de=>de.stopPropagation(),children:[a.jsxs("div",{className:"p-6 border-b border-gray-700 flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold mb-2",children:l.org_name}),ce(l.status)]}),a.jsx("button",{onClick:()=>d(null),className:"text-gray-500 hover:text-white text-xl",children:""})]}),a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-xs text-gray-500 uppercase mb-2",children:"Event Details"}),a.jsxs("div",{className:"space-y-1 text-sm",children:[l.event_name&&a.jsxs("p",{children:[a.jsx("strong",{children:"Event:"})," ",l.event_name]}),l.event_date&&a.jsxs("p",{children:[a.jsx("strong",{children:"Date:"})," ",new Date(l.event_date).toLocaleDateString()]}),l.event_location&&a.jsxs("p",{children:[a.jsx("strong",{children:"Location:"})," ",l.event_location]})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-xs text-gray-500 uppercase mb-2",children:"Contact"}),a.jsxs("div",{className:"space-y-1 text-sm",children:[l.contact_name&&a.jsxs("p",{children:[a.jsx("strong",{children:"Name:"})," ",l.contact_name]}),l.contact_email&&a.jsxs("p",{children:[a.jsx("strong",{children:"Email:"})," ",a.jsx("a",{href:`mailto:${l.contact_email}`,className:"text-orange-500",children:l.contact_email})]}),l.contact_phone&&a.jsxs("p",{children:[a.jsx("strong",{children:"Phone:"})," ",a.jsx("a",{href:`tel:${l.contact_phone}`,className:"text-orange-500",children:l.contact_phone})]})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-xs text-gray-500 uppercase mb-2",children:"Progress"}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"flex-1 h-2 bg-gray-700 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-orange-500",style:{width:`${ae(l)}%`}})}),a.jsxs("span",{className:"font-bold text-orange-500",children:[ae(l),"%"]})]})]}),l.collected_data&&Object.keys(l.collected_data).length>0||f.length>0?a.jsxs("div",{children:[a.jsx("h4",{className:"text-xs text-gray-500 uppercase mb-3",children:"Collected Information"}),a.jsx(D3e,{data:l.collected_data,files:f})]}):null,a.jsxs("div",{children:[a.jsx("h4",{className:"text-xs text-gray-500 uppercase mb-2",children:"Google Drive Status"}),l.drive_folder_id?a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-green-400",children:""}),a.jsx("span",{className:"text-sm",children:"Synced to Google Drive"})]}),(l.shared_with||[]).length>0&&a.jsxs("div",{className:"mt-2",children:[a.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Team access:"}),l.shared_with.map((de,xe)=>a.jsxs("span",{className:"text-xs text-gray-400",children:[de.email,xe<l.shared_with.length-1?", ":""]},xe))]})]}):a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-yellow-400",children:""}),a.jsx("span",{className:"text-sm text-gray-400",children:"Pending sync (runs every 10 min)"})]})]}),a.jsxs("div",{className:"flex flex-wrap gap-2 pt-4 border-t border-gray-700",children:[a.jsx("button",{onClick:()=>I(!0),className:"bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg text-sm",children:" Edit Session"}),a.jsx("a",{href:Oe(l.share_token),target:"_blank",rel:"noopener noreferrer",className:"bg-gray-700 hover:bg-gray-600 text-white px-4 py-2 rounded-lg text-sm",children:" View Portal"}),a.jsx("button",{onClick:()=>{navigator.clipboard.writeText(Oe(l.share_token)),alert("Link copied!")},className:"bg-gray-700 hover:bg-gray-600 text-white px-4 py-2 rounded-lg text-sm",children:" Copy Link"}),l.drive_folder_id&&a.jsx("a",{href:l.drive_folder_url||`https://drive.google.com/drive/folders/${l.drive_folder_id}`,target:"_blank",rel:"noopener noreferrer",className:"bg-gray-700 hover:bg-gray-600 text-white px-4 py-2 rounded-lg text-sm",children:" View Drive Folder"}),l.status==="submitted"&&a.jsx("button",{onClick:()=>we(l.id),className:"bg-green-600 hover:bg-green-500 text-white px-4 py-2 rounded-lg text-sm",children:" Mark Reviewed"}),a.jsx("button",{onClick:()=>Ce(l.id),className:"bg-red-600 hover:bg-red-500 text-white px-4 py-2 rounded-lg text-sm",children:" Delete"})]})]})]})}),w&&a.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:()=>E(!1),children:a.jsxs("div",{className:"bg-gray-800 rounded-2xl max-w-md w-full border border-gray-700",onClick:de=>de.stopPropagation(),children:[a.jsx("div",{className:"p-6 border-b border-gray-700",children:a.jsx("h2",{className:"text-lg font-bold",children:"Create Onboarding Session"})}),a.jsxs("form",{onSubmit:Ae,className:"p-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Organization Name *"}),a.jsx("input",{required:!0,value:Y.org_name,onChange:de=>re({...Y,org_name:de.target.value}),className:"w-full px-4 py-2 bg-gray-900 border border-gray-700 rounded-lg text-white focus:border-orange-500 focus:outline-none"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Contact Name"}),a.jsx("input",{value:Y.contact_name,onChange:de=>re({...Y,contact_name:de.target.value}),className:"w-full px-4 py-2 bg-gray-900 border border-gray-700 rounded-lg text-white focus:border-orange-500 focus:outline-none"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Contact Email"}),a.jsx("input",{type:"email",value:Y.contact_email,onChange:de=>re({...Y,contact_email:de.target.value}),className:"w-full px-4 py-2 bg-gray-900 border border-gray-700 rounded-lg text-white focus:border-orange-500 focus:outline-none"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Event Name"}),a.jsx("input",{value:Y.event_name,onChange:de=>re({...Y,event_name:de.target.value}),className:"w-full px-4 py-2 bg-gray-900 border border-gray-700 rounded-lg text-white focus:border-orange-500 focus:outline-none"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Event Date"}),a.jsx("input",{type:"date",value:Y.event_date,onChange:de=>re({...Y,event_date:de.target.value}),className:"w-full px-4 py-2 bg-gray-900 border border-gray-700 rounded-lg text-white focus:border-orange-500 focus:outline-none"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Location"}),a.jsx("input",{value:Y.event_location,onChange:de=>re({...Y,event_location:de.target.value}),className:"w-full px-4 py-2 bg-gray-900 border border-gray-700 rounded-lg text-white focus:border-orange-500 focus:outline-none"})]})]})]}),a.jsxs("div",{className:"flex gap-3 mt-6",children:[a.jsx("button",{type:"button",onClick:()=>E(!1),className:"flex-1 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:U,className:"flex-1 py-2 bg-orange-500 hover:bg-orange-600 rounded-lg disabled:opacity-50",children:U?"Creating...":"Create"})]})]})]})}),T&&a.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:()=>C(!1),children:a.jsxs("div",{className:"bg-gray-800 rounded-2xl max-w-md w-full border border-gray-700",onClick:de=>de.stopPropagation(),children:[a.jsx("div",{className:"p-6 border-b border-gray-700",children:a.jsx("h2",{className:"text-lg font-bold",children:"Create From Signed Contract"})}),a.jsxs("div",{className:"p-6",children:[be.length===0?a.jsx("p",{className:"text-gray-400 text-center py-8",children:"No signed contracts available"}):a.jsx("div",{className:"space-y-2 max-h-80 overflow-auto",children:be.map(de=>{const xe=e.some(je=>je.contract_id===de.id);return a.jsxs("button",{onClick:()=>!xe&&t(`/portal/onboarding/new?contractId=${de.id}`),disabled:xe,className:`w-full p-4 rounded-xl text-left transition-colors ${xe?"bg-gray-700/50 cursor-not-allowed opacity-50":"bg-gray-700 hover:bg-gray-600"}`,children:[a.jsx("div",{className:"font-medium",children:de.org_name}),a.jsx("div",{className:"text-sm text-gray-400",children:de.promoter_name}),xe&&a.jsx("div",{className:"text-xs text-orange-500 mt-1",children:"Session already exists"})]},de.id)})}),a.jsx("button",{onClick:()=>C(!1),className:"w-full mt-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg",children:"Close"})]})]})}),N&&l&&a.jsx(I3e,{session:l,onClose:()=>I(!1),onSave:ve})]})}const X1=[{id:"branding",category:"Branding & Assets",icon:"",items:[{id:"logo",label:"High-resolution logo",type:"file",priority:"essential"},{id:"brand_kit",label:"Brand kit (colors, fonts, guidelines)",type:"file",priority:"important"},{id:"event_graphics",label:"Event-specific graphics/banners",type:"file",priority:"important"},{id:"sponsor_logos",label:"Sponsor logos for on-screen display",type:"file",priority:"nice"}]},{id:"athletes",category:"Athlete Information",icon:"",items:[{id:"registration_list",label:"Registration list (Name, Email, Phone, Instagram)",type:"file",priority:"essential"},{id:"notable_athletes",label:"Notable athletes to feature",type:"textarea",priority:"important"}]},{id:"venue",category:"Venue & Technical",icon:"",items:[{id:"floor_plan",label:"Venue floor plan (mat layout)",type:"file",priority:"essential"},{id:"internet_specs",label:"Internet specs (upload speed, hardwired access)",type:"textarea",priority:"essential"},{id:"power_locations",label:"Power outlet locations",type:"textarea",priority:"important"},{id:"load_in_time",label:"Load-in/crew access time",type:"text",priority:"important"},{id:"venue_contact",label:"Venue contact for event day",type:"contact",priority:"important"}]},{id:"event",category:"Event Operations",icon:"",items:[{id:"mat_count",label:"Number of mats running",type:"number",priority:"essential"},{id:"schedule",label:"Event schedule/run sheet",type:"file",priority:"essential"},{id:"bracket_system",label:"Bracket/scoring system used",type:"text",priority:"important"},{id:"match_comms_method",label:"How match order will be communicated",type:"textarea",priority:"important"}]},{id:"social",category:"Social & Promotion",icon:"",items:[{id:"org_instagram",label:"Organization Instagram",type:"text",priority:"important"},{id:"org_facebook",label:"Organization Facebook",type:"text",priority:"nice"},{id:"org_website",label:"Organization Website",type:"text",priority:"nice"},{id:"existing_content",label:"Existing footage/photos for promos",type:"file",priority:"nice"},{id:"existing_content_links",label:"Links to existing footage (Google Drive, Dropbox, etc.)",type:"textarea",priority:"nice"}]}];function F3e(){const t=Ac(),[e]=Jb(),[r,n]=j.useState(1),[i,s]=j.useState([]),[o,c]=j.useState(null),[u,l]=j.useState(!0),[d,f]=j.useState(!1),[A]=j.useState(()=>e.get("contractId")),[p,g]=j.useState({orgName:"",contactName:"",email:"",phone:"",eventName:"",eventDate:"",eventLocation:"",contractId:"",orgInstagram:"",orgFacebook:"",orgWebsite:""}),[y,x]=j.useState(()=>{const rt={};return X1.forEach(kt=>{rt[kt.id]={},kt.items.forEach(_t=>{rt[kt.id][_t.id]={enabled:!0,priority:_t.priority,alreadyHave:!1,prefilledValue:""}})}),rt}),[w,E]=j.useState({}),[T,C]=j.useState({}),[N,I]=j.useState(null),[U,K]=j.useState(""),[Y,re]=j.useState("text"),[se,Ae]=j.useState(null);j.useEffect(()=>{we()},[]),j.useEffect(()=>{A&&i.length>0&&!o&&i.find(kt=>kt.id===A)&&Ce(A)},[i,A]);const we=async()=>{try{const kt=(await k5()).filter(_t=>_t.status==="signed");s(kt)}catch(rt){console.error("Error loading contracts:",rt)}finally{l(!1)}},Ce=async rt=>{if(!rt){c(null),ae();return}const kt=i.find(Er=>Er.id===rt);if(!kt)return;c(kt);const _t=kt.contract_data||{};let wt=null;try{wt=await hRe(kt.org_name)}catch(Er){console.log("No CRM lead found:",Er)}const Tt=wt?.contact||{};g({orgName:kt.org_name||"",contactName:kt.promoter_name||kt.contact_name||"",email:kt.promoter_email||kt.contact_email||"",phone:kt.promoter_phone||kt.contact_phone||"",eventName:_t.event_name||"",eventDate:_t.event_date||"",eventLocation:_t.event_location||_t.venue||"",contractId:kt.id,orgInstagram:ne(Tt.instagram||_t.org_instagram||""),orgFacebook:ce(Tt.facebook||_t.org_facebook||""),orgWebsite:Tt.website||_t.org_website||""}),De("social","org_instagram",ne(Tt.instagram||_t.org_instagram||"")),De("social","org_facebook",ce(Tt.facebook||_t.org_facebook||"")),De("social","org_website",Tt.website||_t.org_website||"")},ve=async rt=>{const kt=rt.target.value;Ce(kt)},ne=rt=>rt?rt.startsWith("@")?rt:`@${rt}`:"",ce=rt=>rt?rt.startsWith("http")?rt:`https://facebook.com/${rt.replace(/^@/,"").replace(/^\//,"")}`:"",ae=()=>{g({orgName:"",contactName:"",email:"",phone:"",eventName:"",eventDate:"",eventLocation:"",contractId:"",orgInstagram:"",orgFacebook:"",orgWebsite:""})},De=(rt,kt,_t)=>{x(wt=>({...wt,[rt]:{...wt[rt],[kt]:{...wt[rt][kt],prefilledValue:_t}}}))},Oe=rt=>{const{name:kt,value:_t}=rt.target;g(wt=>({...wt,[kt]:_t})),w[kt]&&E(wt=>({...wt,[kt]:""}))},be=(rt,kt)=>{x(_t=>({..._t,[rt]:{..._t[rt],[kt]:{..._t[rt][kt],enabled:!_t[rt][kt].enabled}}}))},de=(rt,kt)=>{x(_t=>({..._t,[rt]:{..._t[rt],[kt]:{..._t[rt][kt],alreadyHave:!_t[rt][kt].alreadyHave}}}))},xe=(rt,kt,_t)=>{x(wt=>({...wt,[rt]:{...wt[rt],[kt]:{...wt[rt][kt],priority:_t}}}))},je=rt=>{if(!U.trim())return;const kt=`custom_${Date.now()}`,_t={id:kt,label:U.trim(),type:Y,priority:"important",isCustom:!0};C(wt=>({...wt,[rt]:[...wt[rt]||[],_t]})),x(wt=>({...wt,[rt]:{...wt[rt],[kt]:{enabled:!0,priority:"important",alreadyHave:!1,prefilledValue:"",isCustom:!0,label:U.trim(),type:Y}}})),K(""),re("text"),I(null)},Me=(rt,kt)=>{C(_t=>({..._t,[rt]:(_t[rt]||[]).filter(wt=>wt.id!==kt)})),x(_t=>{const wt={..._t};return wt[rt][kt]?.isCustom?delete wt[rt][kt]:wt[rt][kt]={...wt[rt][kt],enabled:!1},wt})},Re=(rt,kt,_t)=>{_t.trim()&&(C(wt=>({...wt,[rt]:(wt[rt]||[]).map(Tt=>Tt.id===kt?{...Tt,label:_t.trim()}:Tt)})),x(wt=>({...wt,[rt]:{...wt[rt],[kt]:{...wt[rt][kt],label:_t.trim()}}})),Ae(null))},it=rt=>{const kt=rt.items,_t=T[rt.id]||[];return[...kt,..._t]},ht=()=>{const rt={};return p.orgName.trim()||(rt.orgName="Organization name is required"),p.contactName.trim()||(rt.contactName="Contact name is required"),p.email.trim()?/\S+@\S+\.\S+/.test(p.email)||(rt.email="Email is invalid"):rt.email="Email is required",p.eventDate||(rt.eventDate="Event date is required"),E(rt),Object.keys(rt).length===0},Be=()=>{r===1?ht()&&n(2):r===2&&n(3)},nt=()=>{r>1?n(r-1):t("/portal/onboarding")},Ge=async()=>{f(!0);try{const rt={};X1.forEach(Tt=>{Tt.items.forEach(Er=>{const pr=y[Tt.id][Er.id];pr.enabled&&pr.prefilledValue&&(rt[Tt.id]||(rt[Tt.id]={}),rt[Tt.id][Er.id]=pr.prefilledValue)})});const kt={};Object.keys(y).forEach(Tt=>{kt[Tt]={},Object.keys(y[Tt]).forEach(Er=>{const pr=y[Tt][Er];kt[Tt][Er]={enabled:pr.enabled,priority:pr.priority,alreadyHave:pr.alreadyHave,...pr.isCustom?{isCustom:!0,label:pr.label,type:pr.type}:{}}})});const _t={org_name:p.orgName,contact_name:p.contactName,contact_email:p.email,contact_phone:p.phone,event_name:p.eventName,event_date:p.eventDate,event_location:p.eventLocation,contract_id:p.contractId||null,collected_data:rt,checklist_config:kt},wt=await Rre(_t);t(`/portal/onboarding/${wt.id}`)}catch(rt){console.error("Error creating onboarding:",rt),alert("Failed to create onboarding session: "+rt.message)}finally{f(!1)}},Dt=(()=>{let rt=0,kt=0;return X1.forEach(_t=>{it(_t).forEach(Tt=>{kt++,y[_t.id]?.[Tt.id]?.enabled&&rt++})}),{enabled:rt,total:kt}})();return u?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#0d0d1a] to-[#1a1a2e] flex items-center justify-center",children:a.jsx("div",{className:"animate-spin w-12 h-12 border-4 border-red-500 border-t-transparent rounded-full"})}):a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#0d0d1a] to-[#1a1a2e] py-8 px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("button",{onClick:nt,className:"flex items-center gap-2 text-gray-400 hover:text-white transition-colors mb-6",children:[a.jsx(U0,{size:20}),"Back"]}),a.jsx("div",{className:"mb-8",children:a.jsx("div",{className:"flex items-center justify-center gap-4",children:[{num:1,label:"Contract & Details"},{num:2,label:"Customize Checklist"},{num:3,label:"Preview & Confirm"}].map((rt,kt)=>a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:`flex items-center gap-3 ${r>=rt.num?"opacity-100":"opacity-40"}`,children:[a.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold border-2 ${r>=rt.num?"bg-red-500 border-red-500 text-white":"bg-transparent border-gray-600 text-gray-600"}`,children:r>rt.num?a.jsx(_o,{size:20}):rt.num}),a.jsx("div",{className:"hidden sm:block",children:a.jsx("div",{className:"text-sm font-medium text-white",children:rt.label})})]}),kt<2&&a.jsx(Cb,{size:20,className:r>rt.num?"text-red-500":"text-gray-600"})]},rt.num))})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"lg:col-span-2",children:[a.jsxs(Or.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"bg-gradient-to-br from-[#1a1a2e] to-[#16162a] border border-gray-800/50 rounded-xl p-6",children:[r===1&&a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("div",{className:"w-12 h-12 bg-red-500/20 rounded-xl flex items-center justify-center",children:a.jsx(jb,{className:"text-red-500",size:24})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-black text-white",children:"Contract & Details"}),a.jsx("p",{className:"text-gray-400",children:"Select contract or enter details manually"})]})]}),a.jsxs("div",{className:"space-y-5",children:[i.length>0&&a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-bold text-white mb-2",children:[a.jsx(qf,{className:"inline mr-2",size:16}),"Link to Existing Contract (Auto-fill)"]}),a.jsxs("select",{value:o?.id||"",onChange:ve,className:"w-full bg-gray-900/50 border border-gray-700 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-red-500 transition-colors",children:[a.jsx("option",{value:"",children:"Create from scratch"}),a.jsx("optgroup",{label:"Signed Contracts",children:i.map(rt=>a.jsxs("option",{value:rt.id,children:[rt.org_name," - ",rt.promoter_name||rt.contact_name]},rt.id))})]}),o&&a.jsxs("p",{className:"text-sm text-green-400 mt-2 flex items-center gap-2",children:[a.jsx(_o,{size:16})," Contract data loaded! Review and edit below."]})]}),a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"orgName",className:"block text-sm font-bold text-white mb-2",children:["Organization Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",id:"orgName",name:"orgName",value:p.orgName,onChange:Oe,placeholder:"e.g., Eternal MMA",className:`w-full bg-gray-900/50 border rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none transition-colors ${w.orgName?"border-red-500":"border-gray-700 focus:border-red-500"}`}),w.orgName&&a.jsx("p",{className:"text-red-400 text-sm mt-1",children:w.orgName})]}),a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"contactName",className:"block text-sm font-bold text-white mb-2",children:["Contact Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",id:"contactName",name:"contactName",value:p.contactName,onChange:Oe,placeholder:"Primary contact person",className:`w-full bg-gray-900/50 border rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none transition-colors ${w.contactName?"border-red-500":"border-gray-700 focus:border-red-500"}`}),w.contactName&&a.jsx("p",{className:"text-red-400 text-sm mt-1",children:w.contactName})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"email",className:"block text-sm font-bold text-white mb-2",children:["Email ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"email",id:"email",name:"email",value:p.email,onChange:Oe,placeholder:"contact@org.com",className:`w-full bg-gray-900/50 border rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none transition-colors ${w.email?"border-red-500":"border-gray-700 focus:border-red-500"}`}),w.email&&a.jsx("p",{className:"text-red-400 text-sm mt-1",children:w.email})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"phone",className:"block text-sm font-bold text-white mb-2",children:"Phone"}),a.jsx("input",{type:"tel",id:"phone",name:"phone",value:p.phone,onChange:Oe,placeholder:"0400 000 000",className:"w-full bg-gray-900/50 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-red-500 transition-colors"})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"eventName",className:"block text-sm font-bold text-white mb-2",children:"Event Name"}),a.jsx("input",{type:"text",id:"eventName",name:"eventName",value:p.eventName,onChange:Oe,placeholder:"e.g., Summer Showdown 2026",className:"w-full bg-gray-900/50 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-red-500 transition-colors"})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"eventDate",className:"block text-sm font-bold text-white mb-2",children:["Event Date ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"date",id:"eventDate",name:"eventDate",value:p.eventDate,onChange:Oe,className:`w-full bg-gray-900/50 border rounded-lg px-4 py-3 text-white focus:outline-none transition-colors ${w.eventDate?"border-red-500":"border-gray-700 focus:border-red-500"}`}),w.eventDate&&a.jsx("p",{className:"text-red-400 text-sm mt-1",children:w.eventDate})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"eventLocation",className:"block text-sm font-bold text-white mb-2",children:"Event Location"}),a.jsx("input",{type:"text",id:"eventLocation",name:"eventLocation",value:p.eventLocation,onChange:Oe,placeholder:"e.g., Brisbane Convention Centre",className:"w-full bg-gray-900/50 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-red-500 transition-colors"})]})]})]})]}),r===2&&a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("div",{className:"w-12 h-12 bg-red-500/20 rounded-xl flex items-center justify-center",children:a.jsx(_he,{className:"text-red-500",size:24})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-black text-white",children:"Customize Checklist"}),a.jsx("p",{className:"text-gray-400",children:"Toggle items, set priorities, mark what they already have"})]})]}),a.jsx("div",{className:"mb-6 bg-blue-500/10 border border-blue-500/30 rounded-lg p-4",children:a.jsxs("p",{className:"text-blue-200 text-sm flex items-start gap-2",children:[a.jsx(k0,{size:18,className:"flex-shrink-0 mt-0.5"}),a.jsxs("span",{children:[a.jsx("strong",{children:"Disabled items won't show to the client."}),` Use "Already Have" to pre-check items they've provided. Change priorities to indicate urgency.`]})]})}),a.jsx("div",{className:"space-y-4 max-h-[600px] overflow-y-auto pr-2",children:X1.map(rt=>{const kt=it(rt),_t=kt.filter(wt=>y[rt.id]?.[wt.id]?.enabled).length;return a.jsxs("div",{className:"bg-gray-900/50 rounded-lg border border-gray-700",children:[a.jsx("div",{className:"px-4 py-3 border-b border-gray-700 bg-gray-800/50",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"text-2xl",children:rt.icon}),a.jsx("h3",{className:"font-bold text-white",children:rt.category}),a.jsxs("span",{className:"text-sm text-gray-400 ml-auto",children:[_t,"/",kt.length," enabled"]})]})}),a.jsxs("div",{className:"p-4 space-y-3",children:[kt.map(wt=>{const Tt=y[rt.id]?.[wt.id]||{enabled:!0,priority:wt.priority},Er=wt.isCustom||Tt.isCustom,pr=Tt.label||wt.label,Xr=se?.categoryId===rt.id&&se?.itemId===wt.id;return a.jsx("div",{className:`p-3 rounded-lg border transition-all ${Tt.enabled?"bg-gray-800/50 border-gray-700":"bg-gray-900/30 border-gray-800 opacity-50"}`,children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("button",{onClick:()=>be(rt.id,wt.id),className:`flex-shrink-0 w-6 h-6 rounded border-2 flex items-center justify-center transition-colors ${Tt.enabled?"bg-red-500 border-red-500":"bg-transparent border-gray-600"}`,children:Tt.enabled&&a.jsx(_o,{size:16,className:"text-white"})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[Xr?a.jsx("div",{className:"flex items-center gap-2 flex-1",children:a.jsx("input",{type:"text",defaultValue:pr,autoFocus:!0,onKeyDown:yn=>{yn.key==="Enter"?Re(rt.id,wt.id,yn.target.value):yn.key==="Escape"&&Ae(null)},onBlur:yn=>Re(rt.id,wt.id,yn.target.value),className:"flex-1 bg-gray-900 border border-red-500 rounded px-2 py-1 text-white text-sm focus:outline-none"})}):a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:`font-medium ${Tt.enabled?"text-white":"text-gray-500"}`,children:pr}),Er&&a.jsx("span",{className:"text-xs bg-purple-500/20 text-purple-400 px-2 py-0.5 rounded border border-purple-500/30",children:"Custom"}),Er&&Tt.enabled&&a.jsx("button",{onClick:()=>Ae({categoryId:rt.id,itemId:wt.id,label:pr}),className:"text-gray-500 hover:text-white transition-colors",children:a.jsx(dhe,{size:14})})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[Tt.prefilledValue&&a.jsx("span",{className:"text-xs bg-green-500/20 text-green-400 px-2 py-1 rounded-full border border-green-500/30",children:"Pre-filled "}),a.jsx("button",{onClick:()=>Me(rt.id,wt.id),className:"text-gray-500 hover:text-red-400 transition-colors",title:Er?"Remove field":"Disable field",children:a.jsx(_2,{size:16})})]})]}),Tt.enabled&&a.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[a.jsxs("select",{value:Tt.priority||"important",onChange:yn=>xe(rt.id,wt.id,yn.target.value),className:"text-xs bg-gray-900 border border-gray-700 rounded px-2 py-1 text-white focus:outline-none focus:border-red-500",children:[a.jsx("option",{value:"essential",children:"Essential"}),a.jsx("option",{value:"important",children:"Important"}),a.jsx("option",{value:"nice",children:"Nice to have"})]}),a.jsx("button",{onClick:()=>de(rt.id,wt.id),className:`text-xs px-3 py-1 rounded border transition-colors ${Tt.alreadyHave?"bg-green-500/20 text-green-400 border-green-500/30":"bg-gray-900 text-gray-400 border-gray-700"}`,children:Tt.alreadyHave?" Already Have":'Mark as "Already Have"'}),a.jsxs("span",{className:"text-xs text-gray-500",children:["(",wt.type||Tt.type||"text",")"]})]})]})]})},wt.id)}),N===rt.id?a.jsxs("div",{className:"p-3 rounded-lg border border-dashed border-green-500/50 bg-green-500/5",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("input",{type:"text",value:U,onChange:wt=>K(wt.target.value),placeholder:"Field label...",autoFocus:!0,onKeyDown:wt=>{wt.key==="Enter"&&je(rt.id),wt.key==="Escape"&&I(null)},className:"flex-1 bg-gray-900 border border-gray-700 rounded px-3 py-2 text-white text-sm placeholder-gray-500 focus:outline-none focus:border-green-500"}),a.jsxs("select",{value:Y,onChange:wt=>re(wt.target.value),className:"bg-gray-900 border border-gray-700 rounded px-2 py-2 text-white text-sm focus:outline-none focus:border-green-500",children:[a.jsx("option",{value:"text",children:"Text"}),a.jsx("option",{value:"textarea",children:"Long Text"}),a.jsx("option",{value:"file",children:"File Upload"}),a.jsx("option",{value:"number",children:"Number"})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>je(rt.id),disabled:!U.trim(),className:"flex-1 bg-green-600 hover:bg-green-500 disabled:bg-gray-700 text-white text-sm font-medium py-2 rounded transition-colors",children:"Add Field"}),a.jsx("button",{onClick:()=>{I(null),K(""),re("text")},className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white text-sm rounded transition-colors",children:"Cancel"})]})]}):a.jsxs("button",{onClick:()=>I(rt.id),className:"w-full p-3 rounded-lg border border-dashed border-gray-700 hover:border-green-500/50 hover:bg-green-500/5 text-gray-500 hover:text-green-400 transition-all flex items-center justify-center gap-2",children:[a.jsx(pde,{size:18}),"Add Custom Field"]})]})]},rt.id)})})]}),r===3&&a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("div",{className:"w-12 h-12 bg-red-500/20 rounded-xl flex items-center justify-center",children:a.jsx(I0,{className:"text-red-500",size:24})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-black text-white",children:"Review & Confirm"}),a.jsx("p",{className:"text-gray-400",children:"Everything looks good? Create the onboarding session!"})]})]}),a.jsxs("div",{className:"space-y-4 mb-6",children:[a.jsxs("div",{className:"bg-gray-900/50 rounded-lg p-4 border border-gray-700",children:[a.jsx("h3",{className:"font-bold text-white mb-3",children:"Organization Details"}),a.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Organization:"}),a.jsx("div",{className:"text-white font-medium",children:p.orgName})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Contact:"}),a.jsx("div",{className:"text-white font-medium",children:p.contactName})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Email:"}),a.jsx("div",{className:"text-white font-medium",children:p.email})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Phone:"}),a.jsx("div",{className:"text-white font-medium",children:p.phone||"Not provided"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Event:"}),a.jsx("div",{className:"text-white font-medium",children:p.eventName||"Not specified"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Date:"}),a.jsx("div",{className:"text-white font-medium",children:p.eventDate})]})]})]}),a.jsxs("div",{className:"bg-gray-900/50 rounded-lg p-4 border border-gray-700",children:[a.jsx("h3",{className:"font-bold text-white mb-3",children:"Checklist Configuration"}),a.jsxs("div",{className:"grid grid-cols-3 gap-3 text-center",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold text-green-500",children:Dt.enabled}),a.jsx("div",{className:"text-xs text-gray-500",children:"Enabled Items"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold text-gray-500",children:Dt.total-Dt.enabled}),a.jsx("div",{className:"text-xs text-gray-500",children:"Disabled Items"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold text-blue-500",children:Object.keys(y).reduce((rt,kt)=>rt+Object.keys(y[kt]).filter(_t=>y[kt][_t].prefilledValue).length,0)}),a.jsx("div",{className:"text-xs text-gray-500",children:"Pre-filled"})]})]})]})]}),Dt.enabled<Dt.total/2&&a.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-4 mb-6",children:a.jsxs("p",{className:"text-yellow-200 text-sm flex items-start gap-2",children:[a.jsx(k0,{size:18,className:"flex-shrink-0 mt-0.5"}),a.jsx("span",{children:"You've disabled more than half the checklist items. Make sure this is intentional  clients need these details for quality coverage."})]})})]})]},r),a.jsxs("div",{className:"flex gap-3 mt-6",children:[a.jsx("button",{onClick:nt,className:"px-6 py-3 bg-gray-800 hover:bg-gray-700 text-white rounded-lg transition-all font-medium border border-gray-700",children:r===1?"Cancel":"Back"}),r<3?a.jsxs("button",{onClick:Be,className:"flex-1 px-6 py-3 bg-gradient-to-r from-red-600 to-red-500 hover:from-red-500 hover:to-red-400 text-white font-bold rounded-lg transition-all shadow-lg shadow-red-500/20 flex items-center justify-center gap-2",children:["Next Step",a.jsx(Cb,{size:20})]}):a.jsx("button",{onClick:Ge,disabled:d,className:"flex-1 px-6 py-3 bg-gradient-to-r from-green-600 to-green-500 hover:from-green-500 hover:to-green-400 disabled:from-gray-600 disabled:to-gray-500 text-white font-bold rounded-lg transition-all shadow-lg shadow-green-500/20 flex items-center justify-center gap-2",children:d?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin w-5 h-5 border-2 border-white border-t-transparent rounded-full"}),"Creating..."]}):a.jsxs(a.Fragment,{children:[a.jsx(L0,{size:20}),"Create Onboarding Session"]})})]})]}),a.jsx("div",{className:"lg:col-span-1",children:a.jsx("div",{className:"sticky top-6",children:a.jsxs("div",{className:"bg-gradient-to-br from-[#1a1a2e] to-[#16162a] border border-gray-800/50 rounded-xl p-5",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(I0,{size:20,className:"text-red-500"}),a.jsx("h3",{className:"font-bold text-white",children:"Client Preview"})]}),a.jsxs("p",{className:"text-xs text-gray-500 mb-4",children:["This is what ",p.orgName||"the client"," will see"]}),a.jsxs("div",{className:"bg-gray-900 rounded-lg border border-gray-800 overflow-hidden",children:[a.jsx("div",{className:"bg-gray-800 px-3 py-2 border-b border-gray-700",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-6 h-6 bg-red-500 rounded-lg"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-semibold text-white",children:"Fit Focus Media"}),a.jsx("div",{className:"text-[10px] text-gray-500",children:p.orgName||"Organization"})]})]})}),a.jsxs("div",{className:"p-4 space-y-3 max-h-[500px] overflow-y-auto",children:[a.jsxs("div",{className:"text-sm",children:[a.jsx("div",{className:"text-gray-500 text-xs mb-2",children:"Event Details"}),a.jsx("div",{className:"text-white font-medium",children:p.eventName||"Event Name"}),a.jsx("div",{className:"text-gray-400 text-xs",children:p.eventDate||"Date not set"})]}),a.jsxs("div",{className:"border-t border-gray-800 pt-3",children:[a.jsxs("div",{className:"text-xs text-gray-500 mb-2",children:["Checklist (",Dt.enabled," items)"]}),X1.map(rt=>{const _t=it(rt).filter(wt=>y[rt.id]?.[wt.id]?.enabled);return _t.length===0?null:a.jsxs("div",{className:"mb-3",children:[a.jsxs("div",{className:"text-xs font-medium text-white flex items-center gap-2 mb-1",children:[a.jsx("span",{children:rt.icon}),rt.category]}),a.jsx("div",{className:"space-y-1",children:_t.map(wt=>{const Tt=y[rt.id]?.[wt.id]||{},Er=Tt.label||wt.label;return a.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[a.jsx("div",{className:`w-3 h-3 rounded border ${Tt.alreadyHave?"bg-green-500 border-green-500":"border-gray-600"}`,children:Tt.alreadyHave&&a.jsx(_o,{size:10,className:"text-white"})}),a.jsxs("span",{className:`flex-1 ${Tt.alreadyHave?"text-gray-500 line-through":"text-gray-400"}`,children:[Er,(wt.isCustom||Tt.isCustom)&&a.jsx("span",{className:"text-purple-400 ml-1",children:"*"})]}),Tt.prefilledValue&&a.jsx("span",{className:"text-green-400",children:""})]},wt.id)})})]},rt.id)})]})]})]}),a.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-2 text-xs",children:[a.jsxs("div",{className:"bg-gray-900/50 rounded p-2 text-center border border-gray-800",children:[a.jsx("div",{className:"text-lg font-bold text-red-500",children:Dt.enabled}),a.jsx("div",{className:"text-gray-500",children:"Items to collect"})]}),a.jsxs("div",{className:"bg-gray-900/50 rounded p-2 text-center border border-gray-800",children:[a.jsx("div",{className:"text-lg font-bold text-green-500",children:Object.keys(y).reduce((rt,kt)=>rt+Object.keys(y[kt]).filter(_t=>y[kt][_t].prefilledValue||y[kt][_t].alreadyHave).length,0)}),a.jsx("div",{className:"text-gray-500",children:"Pre-filled/Have"})]})]})]})})})]})]})})}const QM="ffm_onboarding_workflows";function U3e(t,e){if(t.completed)return"complete";if(t.inProgress)return"in-progress";const r=new Date;r.setHours(0,0,0,0);const n=new Date(e);return n.setHours(0,0,0,0),n<r?"overdue":"pending"}function VM(){const t=localStorage.getItem(QM);return t?JSON.parse(t):[]}function Kre(t){return VM().find(r=>r.id===t)}function r4(t,e,r){const n=VM(),i=n.find(o=>o.id===t);return i?(i.steps[e]={...i.steps[e],...r},r.completed&&!i.steps[e].completedDate&&(i.steps[e].completedDate=new Date().toISOString().split("T")[0]),i.steps.every(o=>o.completed)&&i.status==="active"&&(i.status="completed"),localStorage.setItem(QM,JSON.stringify(n)),i):null}function $3e(t){const r=VM().filter(n=>n.id!==t);return localStorage.setItem(QM,JSON.stringify(r)),!0}function H3e(t){const e=Kre(t);return e?`
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Onboarding Checklist - ${e.orgName}</title>
  <style>
    body { font-family: Arial, sans-serif; max-width: 800px; margin: 40px auto; padding: 20px; }
    h1 { color: #e51d1d; }
    .header { border-bottom: 2px solid #e51d1d; padding-bottom: 20px; margin-bottom: 30px; }
    .info { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin-bottom: 30px; }
    .phase { margin-bottom: 40px; }
    .phase-title { background: #f5f5f5; padding: 10px; font-weight: bold; margin-bottom: 15px; }
    .step { margin-bottom: 25px; padding-left: 30px; position: relative; }
    .step-number { position: absolute; left: 0; font-weight: bold; }
    .checkbox { display: inline-block; width: 18px; height: 18px; border: 2px solid #333; margin-right: 10px; }
    .subtasks { margin-top: 10px; padding-left: 20px; font-size: 0.9em; color: #666; }
    .subtasks li { margin-bottom: 5px; }
  </style>
</head>
<body>
  <div class="header">
    <h1>Client Onboarding Checklist</h1>
    <div class="info">
      <div><strong>Organization:</strong> ${e.orgName}</div>
      <div><strong>Contact:</strong> ${e.contactName}</div>
      <div><strong>Email:</strong> ${e.email}</div>
      <div><strong>Phone:</strong> ${e.phone}</div>
      <div><strong>Sport:</strong> ${e.sport}</div>
      <div><strong>First Event:</strong> ${e.firstEventDate}</div>
      <div><strong>Signing Date:</strong> ${e.signingDate}</div>
      <div><strong>Generated:</strong> ${new Date().toLocaleDateString()}</div>
    </div>
  </div>
  
  ${[1,2,3].map(n=>`
    <div class="phase">
      <div class="phase-title">
        ${n===1?"Phase 1: Welcome & Setup":n===2?"Phase 2: Pre-Event Prep":"Phase 3: Go-Live"}
      </div>
      ${e.steps.filter(i=>i.phase===n).map(i=>`
        <div class="step">
          <span class="step-number">${i.id}.</span>
          <div>
            <div><span class="checkbox"></span><strong>${i.title}</strong> (Due: ${i.dueDate})</div>
            <div style="color: #666; margin-top: 5px;">${i.description}</div>
            ${i.subTasks&&i.subTasks.length>0?`
              <ul class="subtasks">
                ${i.subTasks.map(s=>`<li>${s}</li>`).join("")}
              </ul>
            `:""}
          </div>
        </div>
      `).join("")}
    </div>
  `).join("")}
</body>
</html>
  `:null}function Q3e(){const{id:t}=tA(),e=Ac(),[r,n]=j.useState(null),[i,s]=j.useState(null),[o,c]=j.useState(!1);j.useEffect(()=>{u()},[t]);const u=()=>{const U=Kre(t);U?n(U):e("/portal/onboarding")},l=U=>{const K=r.steps[U],Y=r4(t,U,{completed:!K.completed,completedDate:K.completed?null:new Date().toISOString().split("T")[0]});n(Y)},d=U=>{const K=r.steps[U],Y=r4(t,U,{inProgress:!K.inProgress});n(Y)},f=(U,K)=>{const Y=r4(t,U,{notes:K});n(Y)},A=()=>{$3e(t),e("/portal/onboarding")},p=()=>{const U=H3e(t),K=new Blob([U],{type:"text/html"}),Y=URL.createObjectURL(K),re=document.createElement("a");re.href=Y,re.download=`onboarding-${r.orgName.replace(/\s+/g,"-")}.html`,re.click(),URL.revokeObjectURL(Y)},g=()=>{const U=r.steps.findIndex(K=>!K.completed);U!==-1&&(s(U),document.getElementById(`step-${U}`)?.scrollIntoView({behavior:"smooth",block:"center"}))};if(!r)return null;const y=r.steps.filter(U=>U.completed).length,x=r.steps.length,w=Math.round(y/x*100),E=U=>r.steps.filter(K=>K.phase===U),T=U=>{const K=E(U),Y=K.filter(re=>re.completed).length;return{completed:Y,total:K.length,percentage:Math.round(Y/K.length*100)}},C={1:"Welcome & Setup",2:"Pre-Event Prep",3:"Go-Live"},N=U=>{switch(U){case"complete":return"text-green-400 bg-green-600/20 border-green-500/30";case"overdue":return"text-red-400 bg-red-600/20 border-red-500/30";case"in-progress":return"text-yellow-400 bg-yellow-600/20 border-yellow-500/30";default:return"text-gray-400 bg-gray-800/30 border-gray-700/30"}},I=U=>{switch(U){case"complete":return a.jsx(lb,{size:18,className:"text-green-400"});case"overdue":return a.jsx(k0,{size:18,className:"text-red-400"});case"in-progress":return a.jsx(DA,{size:18,className:"text-yellow-400"});default:return a.jsx(v8,{size:18,className:"text-gray-400"})}};return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[#0d0d1a] to-[#1a1a2e]",children:[a.jsx("div",{className:"bg-gradient-to-r from-[#1a1a2e] to-[#16162a] border-b border-gray-800/50",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[a.jsxs("button",{onClick:()=>e("/portal/onboarding"),className:"flex items-center gap-2 text-gray-400 hover:text-white transition-colors mb-4",children:[a.jsx(U0,{size:20}),"Back to Dashboard"]}),a.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-black text-white mb-2",children:r.orgName}),a.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-400",children:[a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(zp,{size:16}),r.contactName]}),a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(tu,{size:16}),r.email]}),r.phone&&a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(ay,{size:16}),r.phone]}),a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(fc,{size:16}),"Event: ",new Date(r.firstEventDate).toLocaleDateString("en-AU")]})]})]}),a.jsxs("div",{className:"flex flex-wrap gap-3",children:[a.jsxs(Or.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:g,disabled:y===x,className:"px-4 py-2 bg-blue-600 hover:bg-blue-500 disabled:bg-gray-700 disabled:text-gray-500 text-white font-medium rounded-lg transition-all flex items-center gap-2",children:[a.jsx(DA,{size:18}),"Next Step"]}),a.jsxs(Or.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:p,className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white font-medium rounded-lg transition-all flex items-center gap-2",children:[a.jsx(km,{size:18}),"Export"]}),a.jsxs(Or.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>c(!0),className:"px-4 py-2 bg-red-600/20 hover:bg-red-600/30 text-red-400 font-medium rounded-lg transition-all flex items-center gap-2 border border-red-500/30",children:[a.jsx(_2,{size:18}),"Delete"]})]})]}),a.jsxs("div",{className:"mt-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("span",{className:"text-sm font-medium text-gray-400",children:["Overall Progress: ",y,"/",x," steps"]}),a.jsxs("span",{className:"text-lg font-bold text-white",children:[w,"%"]})]}),a.jsx("div",{className:"w-full bg-gray-800 rounded-full h-3 overflow-hidden",children:a.jsx(Or.div,{initial:{width:0},animate:{width:`${w}%`},transition:{duration:.5},className:`h-full rounded-full ${w===100?"bg-gradient-to-r from-green-600 to-green-500":"bg-gradient-to-r from-red-600 to-red-500"}`})})]})]})}),a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsx("div",{className:"lg:col-span-1",children:a.jsxs("div",{className:"bg-gradient-to-br from-[#1a1a2e] to-[#16162a] border border-gray-800/50 rounded-xl p-6 sticky top-4",children:[a.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Client Information"}),a.jsxs("div",{className:"space-y-3 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500 block mb-1",children:"Organization"}),a.jsx("span",{className:"text-white font-medium",children:r.orgName})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500 block mb-1",children:"Contact"}),a.jsx("span",{className:"text-white font-medium",children:r.contactName})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500 block mb-1",children:"Email"}),a.jsx("span",{className:"text-white font-medium break-all",children:r.email})]}),r.phone&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500 block mb-1",children:"Phone"}),a.jsx("span",{className:"text-white font-medium",children:r.phone})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500 block mb-1",children:"Sport"}),a.jsx("span",{className:"text-white font-medium",children:r.sport})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500 block mb-1",children:"First Event Date"}),a.jsx("span",{className:"text-white font-medium",children:new Date(r.firstEventDate).toLocaleDateString("en-AU",{weekday:"short",year:"numeric",month:"short",day:"numeric"})})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500 block mb-1",children:"Signing Date"}),a.jsx("span",{className:"text-white font-medium",children:new Date(r.signingDate).toLocaleDateString("en-AU")})]}),r.contractId&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500 block mb-1",children:"Contract ID"}),a.jsx("span",{className:"text-white font-medium font-mono text-xs",children:r.contractId})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500 block mb-1",children:"Status"}),a.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-bold ${r.status==="completed"?"bg-green-600/20 text-green-400 border border-green-500/30":"bg-blue-600/20 text-blue-400 border border-blue-500/30"}`,children:r.status==="completed"?"Completed":"Active"})]})]})]})}),a.jsx("div",{className:"lg:col-span-2 space-y-6",children:[1,2,3].map(U=>{const K=T(U),Y=E(U);return a.jsxs("div",{className:"bg-gradient-to-br from-[#1a1a2e] to-[#16162a] border border-gray-800/50 rounded-xl p-6",children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("h2",{className:"text-xl font-bold text-white",children:["Phase ",U,": ",C[U]]}),a.jsxs("span",{className:"text-sm font-bold text-gray-400",children:[K.completed,"/",K.total]})]}),a.jsx("div",{className:"w-full bg-gray-800 rounded-full h-2 overflow-hidden",children:a.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${K.percentage===100?"bg-green-600":"bg-red-600"}`,style:{width:`${K.percentage}%`}})})]}),a.jsx("div",{className:"space-y-4",children:Y.map((re,se)=>{const Ae=r.steps.findIndex(ae=>ae.id===re.id),we=U3e(re,re.dueDate),Ce=i===Ae,ve=new Date(re.dueDate),ce=Math.ceil((ve-new Date)/(1e3*60*60*24));return a.jsxs("div",{id:`step-${Ae}`,className:`border rounded-lg transition-all ${re.completed?"border-green-500/30 bg-green-600/5":we==="overdue"?"border-red-500/30 bg-red-600/5":"border-gray-700/50"}`,children:[a.jsx("div",{className:"p-4",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("button",{onClick:()=>l(Ae),className:"flex-shrink-0 mt-1",children:re.completed?a.jsx(lb,{size:24,className:"text-green-400"}):a.jsx(v8,{size:24,className:"text-gray-600 hover:text-gray-400 transition-colors"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-2 mb-2",children:[a.jsxs("h3",{className:`text-lg font-bold ${re.completed?"text-green-400 line-through":"text-white"}`,children:[re.id,". ",re.title]}),a.jsxs("div",{className:"flex items-center gap-2",children:[!re.completed&&a.jsx("button",{onClick:()=>d(Ae),className:`px-3 py-1 rounded-full text-xs font-bold transition-all ${re.inProgress?"bg-yellow-600/20 text-yellow-400 border border-yellow-500/30":"bg-gray-800 text-gray-500 border border-gray-700 hover:bg-gray-700"}`,children:re.inProgress?"In Progress":"Mark In Progress"}),a.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-bold border flex items-center gap-1 ${N(we)}`,children:[I(we),re.completed?"Complete":we==="overdue"?`${Math.abs(ce)}d overdue`:we==="in-progress"?"In Progress":ce===0?"Due today":ce===1?"Due tomorrow":`${ce}d remaining`]})]})]}),a.jsx("p",{className:"text-gray-400 text-sm mb-2",children:re.description}),a.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(fc,{size:14}),"Due: ",new Date(re.dueDate).toLocaleDateString("en-AU")]}),re.completedDate&&a.jsxs("span",{className:"flex items-center gap-1 text-green-400",children:[a.jsx(lb,{size:14}),"Completed: ",new Date(re.completedDate).toLocaleDateString("en-AU")]})]}),a.jsx("button",{onClick:()=>s(Ce?null:Ae),className:"mt-3 text-sm text-red-500 hover:text-red-400 font-medium flex items-center gap-1 transition-colors",children:Ce?a.jsxs(a.Fragment,{children:[a.jsx(EC,{size:16}),"Hide Details"]}):a.jsxs(a.Fragment,{children:[a.jsx(sy,{size:16}),"Show Details & Notes"]})})]})]})}),a.jsx(_0,{children:Ce&&a.jsx(Or.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden",children:a.jsxs("div",{className:"px-4 pb-4 pt-0 border-t border-gray-700/50 mt-4",children:[re.subTasks&&re.subTasks.length>0&&a.jsxs("div",{className:"mt-4",children:[a.jsx("h4",{className:"text-sm font-bold text-white mb-2",children:"Checklist:"}),a.jsx("ul",{className:"space-y-1.5",children:re.subTasks.map((ae,De)=>a.jsxs("li",{className:"text-sm text-gray-400 flex items-start gap-2",children:[a.jsx("span",{className:"text-red-500 mt-0.5",children:""}),a.jsx("span",{children:ae})]},De))})]}),re.emailTemplate&&a.jsxs("div",{className:"mt-4",children:[a.jsxs("h4",{className:"text-sm font-bold text-white mb-2 flex items-center gap-2",children:[a.jsx(e3,{size:14}),"Email Template:"]}),a.jsx("div",{className:"bg-gray-900/50 rounded-lg p-4 border border-gray-800",children:a.jsx("pre",{className:"text-xs text-gray-300 whitespace-pre-wrap font-mono",children:re.emailTemplate.replace("[CLIENT_NAME]",r.contactName).replace("[ORG_NAME]",r.orgName)})})]}),a.jsxs("div",{className:"mt-4",children:[a.jsxs("label",{className:"text-sm font-bold text-white mb-2 block flex items-center gap-2",children:[a.jsx(jb,{size:14}),"Notes:"]}),a.jsx("textarea",{value:re.notes,onChange:ae=>f(Ae,ae.target.value),placeholder:"Add notes, links, or details for this step...",className:"w-full bg-gray-900/50 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-red-500 transition-colors text-sm min-h-[100px] resize-y"})]})]})})})]},re.id)})})]},U)})})]})}),a.jsx(_0,{children:o&&a.jsx(Or.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50",onClick:()=>c(!1),children:a.jsxs(Or.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:U=>U.stopPropagation(),className:"bg-gradient-to-br from-[#1a1a2e] to-[#16162a] border border-red-500/30 rounded-xl p-6 max-w-md w-full",children:[a.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Delete Onboarding?"}),a.jsxs("p",{className:"text-gray-400 mb-6",children:["Are you sure you want to delete the onboarding workflow for ",a.jsx("strong",{className:"text-white",children:r.orgName}),"? This action cannot be undone."]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:A,className:"flex-1 px-4 py-3 bg-red-600 hover:bg-red-500 text-white font-bold rounded-lg transition-all",children:"Yes, Delete"}),a.jsx("button",{onClick:()=>c(!1),className:"flex-1 px-4 py-3 bg-gray-700 hover:bg-gray-600 text-white font-bold rounded-lg transition-all",children:"Cancel"})]})]})})})]})}const V3e=".pdf,.doc,.docx,.xls,.xlsx,.csv,.zip",Qg=`image/*,video/*,${V3e},.svg,.ai,.eps`,kz=[{id:"branding",category:"Branding & Assets",icon:"",items:[{id:"logo",label:"High-resolution logo",type:"file",accept:Qg,priority:"essential"},{id:"brand_kit",label:"Brand kit (colors, fonts, guidelines)",type:"file",accept:Qg,priority:"important"},{id:"event_graphics",label:"Event-specific graphics/banners",type:"file",accept:Qg,priority:"important"},{id:"sponsor_logos",label:"Sponsor logos for on-screen display",type:"file",accept:Qg,priority:"nice"}]},{id:"athletes",category:"Athlete Information",icon:"",items:[{id:"registration_list",label:"Registration list (Name, Email, Phone, Instagram)",type:"file",accept:Qg,priority:"essential"},{id:"notable_athletes",label:"Notable athletes to feature",type:"textarea",placeholder:"Champions, rising stars, fan favorites...",priority:"important"}]},{id:"venue",category:"Venue & Technical",icon:"",items:[{id:"floor_plan",label:"Venue floor plan (mat layout)",type:"file",accept:Qg,priority:"essential"},{id:"internet_specs",label:"Internet specs (upload speed, hardwired access)",type:"textarea",placeholder:"e.g., 100Mbps up/down, ethernet available at...",priority:"essential"},{id:"power_locations",label:"Power outlet locations",type:"textarea",placeholder:"Describe where power is available...",priority:"important"},{id:"load_in_time",label:"Load-in/crew access time",type:"text",placeholder:"e.g., 6:00 AM",priority:"important"},{id:"venue_contact",label:"Venue contact for event day",type:"contact",priority:"important"}]},{id:"event",category:"Event Operations",icon:"",items:[{id:"mat_count",label:"Number of mats running",type:"number",placeholder:"e.g., 4",priority:"essential"},{id:"schedule",label:"Event schedule/run sheet",type:"file",accept:Qg,priority:"essential"},{id:"bracket_system",label:"Bracket/scoring system used",type:"text",placeholder:"e.g., Smoothcomp, FloArena...",priority:"important"},{id:"match_comms_method",label:"How match order will be communicated",type:"textarea",placeholder:"e.g., WhatsApp group, printed sheets...",priority:"important"}]},{id:"social",category:"Social & Promotion",icon:"",items:[{id:"org_instagram",label:"Organization Instagram",type:"text",placeholder:"@yourorg",priority:"important"},{id:"org_facebook",label:"Organization Facebook",type:"text",placeholder:"facebook.com/yourorg",priority:"nice"},{id:"org_website",label:"Organization Website",type:"text",placeholder:"https://...",priority:"nice"},{id:"existing_content",label:"Existing footage/photos for promos",type:"file",accept:Qg,priority:"nice"},{id:"existing_content_links",label:"Links to existing footage (Google Drive, Dropbox, etc.)",type:"textarea",placeholder:"Paste links to your existing footage, one per line...",priority:"nice"}]}],z3e=[{id:1,title:"Information Gathering",description:"Complete the checklist so we can prepare everything perfectly",duration:"Week 1-2"},{id:2,title:"Pre-Production",description:"We create custom graphics, overlays, and streaming layouts",duration:"Week 2-3"},{id:3,title:"Technical Setup",description:"Site visit (if needed), equipment prep, streaming tests",duration:"Week 3-4"},{id:4,title:"Athlete Outreach",description:"We contact athletes about media packages and content options",duration:"Week 3-4"},{id:5,title:"Event Day",description:"Our crew arrives, sets up, and delivers world-class coverage",duration:"Show Time!"}];function K3e(){const{token:t}=tA(),[e,r]=j.useState(null),[n,i]=j.useState(!0),[s,o]=j.useState(null),[c,u]=j.useState(new Set(["branding"])),[l,d]=j.useState(!0),[f,A]=j.useState("checklist"),[p,g]=j.useState(!1),[y,x]=j.useState(!1),[w,E]=j.useState(null),[T,C]=j.useState(0),[N,I]=j.useState({}),[U,K]=j.useState({}),[Y,re]=j.useState(!1),[se,Ae]=j.useState(null),[we,Ce]=j.useState("");j.useEffect(()=>{if(!t){i(!1),o("No onboarding session found. Please use the link provided by Fit Focus Media.");return}ve()},[t]);const ve=async()=>{try{const Be=await yRe(t);r(Be),I(Be.collected_data||{}),(Be.status==="submitted"||Be.status==="reviewed")&&(re(!0),d(!1))}catch(Be){o(Be.message)}finally{i(!1)}},ne=()=>e?.checklist_config?kz.map(Be=>{const nt=e.checklist_config[Be.id]||{};let Ge=Be.items.filter(ft=>nt[ft.id]?.enabled!==!1).map(ft=>{const Dt=nt[ft.id];return{...ft,priority:Dt?.priority||ft.priority,alreadyHave:Dt?.alreadyHave||!1}});return Object.entries(nt).forEach(([ft,Dt])=>{Dt.isCustom&&Dt.enabled!==!1&&(Be.items.some(kt=>kt.id===ft)||Ge.push({id:ft,label:Dt.label,type:Dt.type,priority:Dt.priority,isCustom:!0,alreadyHave:Dt.alreadyHave||!1,accept:Dt.type==="file"?"image/*,video/*,.pdf,.doc,.docx,.xls,.xlsx,.csv,.zip,.svg,.ai,.eps":void 0,placeholder:Dt.placeholder||""}))}),{...Be,items:Ge}}).filter(Be=>Be.items.length>0):kz,ce=ne(),ae=j.useCallback(async Be=>{if(!(!e||!t)){g(!0);try{await bRe(t,{collected_data:Be,checklist_progress:De(Be)})}catch(nt){console.error("Save error:",nt)}finally{g(!1)}}},[e,t]),De=Be=>{const nt={};return ne().forEach(ft=>{ft.items.forEach(Dt=>{const rt=Be[ft.id]||{},kt=rt[Dt.id]||rt[`${Dt.id}_url`];nt[`${ft.id}.${Dt.id}`]=!!kt&&kt!==""})}),nt},Oe=(Be,nt,Ge)=>{const ft={...N,[Be]:{...N[Be]||{},[nt]:Ge}};I(ft),clearTimeout(window.saveTimeout),window.saveTimeout=setTimeout(()=>ae(ft),1e3)},be=20*1024*1024,de=async(Be,nt,Ge)=>{if(!(!Ge||Ge.length===0||!e)){for(const ft of Ge)if(ft.size>be){const Dt=(ft.size/1048576).toFixed(1);Ae({fileName:ft.name,sizeMB:Dt,categoryId:Be,itemId:nt}),Ce("");return}E(`${Be}.${nt}`),C(0);try{for(const ft of Ge){const Dt=setInterval(()=>{C(_t=>_t>=90?_t:_t+Math.random()*15)},200),rt=await SRe(e.id,Be,nt,ft);clearInterval(Dt),C(100),K(_t=>({..._t,[`${Be}.${nt}`]:[..._t[`${Be}.${nt}`]||[],{name:ft.name,url:rt.url,id:rt.file.id}]}));const kt={...N,[Be]:{...N[Be]||{},[`${nt}_url`]:rt.url}};I(kt),ae(kt)}}catch(ft){console.error("Upload error:",ft),Ae({fileName:"Upload",sizeMB:null,error:ft.message})}finally{setTimeout(()=>{E(null),C(0)},500)}}},xe=async()=>{if(!(!e||!t||y)){x(!0);try{await wRe(t),re(!0),A("checklist")}catch(Be){console.error("Submit error:",Be),alert("Submission failed: "+Be.message)}finally{x(!1)}}},je=()=>{if(!we.trim()||!se)return;const{categoryId:Be,itemId:nt}=se,Ge=`${nt}_links`,ft=N[Be]?.[Ge]||[],Dt=we.trim(),rt=ft.includes(Dt)?ft:[...ft,Dt],kt={...N,[Be]:{...N[Be]||{},[Ge]:rt}};I(kt),ae(kt),Ae(null),Ce("")},Re=(()=>{let Be=0,nt=0;return ce.forEach(Ge=>{Ge.items.forEach(ft=>{nt++;const Dt=N[Ge.id]||{},rt=Dt[ft.id]||Dt[`${ft.id}_url`];rt&&rt!==""&&Be++})}),{completed:Be,total:nt,percent:Math.round(Be/nt*100)}})(),it=Be=>{u(nt=>{const Ge=new Set(nt);return Ge.has(Be)?Ge.delete(Be):Ge.add(Be),Ge})},ht=Be=>{const nt={essential:"bg-red-500/20 text-red-400",important:"bg-yellow-500/20 text-yellow-400",nice:"bg-green-500/20 text-green-400"},Ge={essential:"Essential",important:"Important",nice:"Nice to have"};return a.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${nt[Be]}`,children:Ge[Be]})};return n?a.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin w-12 h-12 border-4 border-orange-500 border-t-transparent rounded-full mx-auto mb-4"}),a.jsx("p",{className:"text-gray-400",children:"Loading your onboarding portal..."})]})}):s&&!e?a.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-gray-800 rounded-2xl p-8 max-w-md text-center border border-gray-700",children:[a.jsx("div",{className:"text-red-500 text-4xl mb-4",children:""}),a.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Session Not Found"}),a.jsx("p",{className:"text-gray-400",children:s})]})}):a.jsxs("div",{className:"min-h-screen bg-gray-900",children:[se&&a.jsx("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:a.jsx("div",{className:"bg-gray-800 rounded-2xl p-6 max-w-md w-full border border-gray-700 shadow-xl",children:se.error?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-16 h-16 bg-red-500/20 rounded-2xl flex items-center justify-center mx-auto mb-4",children:a.jsx("span",{className:"text-3xl",children:""})}),a.jsx("h3",{className:"text-xl font-bold text-white text-center mb-2",children:"Upload Failed"}),a.jsx("p",{className:"text-gray-400 text-center mb-6",children:se.error}),a.jsx("button",{onClick:()=>Ae(null),className:"w-full bg-gray-700 hover:bg-gray-600 text-white font-semibold py-3 rounded-xl transition-colors",children:"Close"})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-16 h-16 bg-orange-500/20 rounded-2xl flex items-center justify-center mx-auto mb-4",children:a.jsx("span",{className:"text-3xl",children:""})}),a.jsx("h3",{className:"text-xl font-bold text-white text-center mb-2",children:"File Too Large"}),a.jsxs("p",{className:"text-gray-400 text-center mb-4",children:[a.jsxs("span",{className:"text-white font-medium",children:['"',se.fileName,'"']})," is ",se.sizeMB,"MB  our upload limit is 20MB."]}),a.jsxs("div",{className:"bg-gray-900 rounded-xl p-4 mb-4",children:[a.jsx("p",{className:"text-orange-500 font-medium mb-3",children:" Paste a share link instead:"}),a.jsx("input",{type:"url",value:we,onChange:Be=>Ce(Be.target.value),placeholder:"https://drive.google.com/... or Dropbox link",className:"w-full p-3 bg-gray-800 border border-gray-600 rounded-xl text-white placeholder-gray-500 focus:border-orange-500 focus:outline-none mb-3"}),a.jsx("p",{className:"text-gray-500 text-xs",children:"Upload to Google Drive or Dropbox, then paste the share link above"})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>{Ae(null),Ce("")},className:"flex-1 bg-gray-700 hover:bg-gray-600 text-white font-semibold py-3 rounded-xl transition-colors",children:"Cancel"}),a.jsx("button",{onClick:je,disabled:!we.trim(),className:"flex-1 bg-orange-500 hover:bg-orange-600 disabled:bg-gray-700 disabled:cursor-not-allowed text-white font-semibold py-3 rounded-xl transition-colors",children:"Save Link "})]})]})})}),l&&e&&a.jsx("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-gray-800 rounded-2xl p-8 max-w-md text-center border border-orange-500/30 shadow-xl shadow-orange-500/10",children:[a.jsx("div",{className:"w-20 h-20 bg-orange-500/20 rounded-2xl flex items-center justify-center mx-auto mb-6",children:a.jsx("span",{className:"text-4xl",children:""})}),a.jsxs("h1",{className:"text-2xl font-bold text-white mb-2",children:["Welcome, ",e.org_name,"! "]}),a.jsx("p",{className:"text-orange-500 font-medium mb-4",children:e.event_name}),a.jsx("p",{className:"text-gray-400 mb-6",children:"We're thrilled to partner with you! This portal will guide you through everything we need to deliver world-class coverage."}),a.jsx("button",{onClick:()=>d(!1),className:"bg-orange-500 hover:bg-orange-600 text-white font-semibold px-8 py-3 rounded-full transition-colors flex items-center gap-2 mx-auto",children:"Let's Get Started "})]})}),a.jsx("header",{className:"sticky top-0 z-40 bg-gray-900/95 backdrop-blur-lg border-b border-gray-800",children:a.jsxs("div",{className:"max-w-3xl mx-auto px-4 h-16 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("img",{src:"/ffm-logo.jpg",alt:"Fit Focus Media",className:"w-10 h-10 rounded-xl object-cover"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold text-white",children:"Fit Focus Media"}),a.jsx("div",{className:"text-xs text-gray-500",children:e?.org_name||"Partner Onboarding"})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[p&&a.jsx("span",{className:"text-orange-500 text-sm animate-pulse",children:"Saving..."}),a.jsxs("div",{className:"bg-orange-500/20 text-orange-500 px-3 py-1 rounded-full text-sm font-semibold",children:[Re.percent,"% Complete"]})]})]})}),a.jsx("div",{className:"bg-gray-800/50",children:a.jsx("div",{className:"max-w-3xl mx-auto px-4",children:a.jsx("div",{className:"h-1 bg-gray-700 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-gradient-to-r from-orange-500 to-orange-400 transition-all duration-500",style:{width:`${Re.percent}%`}})})})}),a.jsx("div",{className:"border-b border-gray-800",children:a.jsx("div",{className:"max-w-3xl mx-auto px-4",children:a.jsx("div",{className:"flex gap-1",children:[{id:"checklist",label:"What We Need",icon:""},{id:"timeline",label:"What's Next",icon:""},{id:"contact",label:"Get In Touch",icon:""}].map(Be=>a.jsxs("button",{onClick:()=>A(Be.id),className:`flex items-center gap-2 px-4 py-3 font-medium transition-colors border-b-2 ${f===Be.id?"border-orange-500 text-white":"border-transparent text-gray-500 hover:text-white"}`,children:[a.jsx("span",{children:Be.icon})," ",Be.label]},Be.id))})})}),a.jsxs("main",{className:"max-w-3xl mx-auto px-4 py-8",children:[f==="checklist"&&a.jsxs("div",{children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Information Checklist"}),a.jsx("p",{className:"text-gray-400",children:"Upload files and provide details for the best coverage"})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-8",children:[a.jsxs("div",{className:"bg-gray-800 rounded-xl p-4 text-center border border-gray-700",children:[a.jsx("div",{className:"text-2xl font-bold text-orange-500",children:Re.completed}),a.jsx("div",{className:"text-xs text-gray-500",children:"Completed"})]}),a.jsxs("div",{className:"bg-gray-800 rounded-xl p-4 text-center border border-gray-700",children:[a.jsx("div",{className:"text-2xl font-bold text-yellow-500",children:Re.total-Re.completed}),a.jsx("div",{className:"text-xs text-gray-500",children:"Remaining"})]}),a.jsxs("div",{className:"bg-gray-800 rounded-xl p-4 text-center border border-gray-700",children:[a.jsx("div",{className:"text-2xl font-bold text-green-500",children:Re.total}),a.jsx("div",{className:"text-xs text-gray-500",children:"Total"})]})]}),a.jsx("div",{className:"space-y-3",children:ce.map(Be=>{const nt=N[Be.id]||{},Ge=Be.items.filter(Dt=>{const rt=nt[Dt.id]||nt[`${Dt.id}_url`];return rt&&rt!==""}).length,ft=c.has(Be.id);return a.jsxs("div",{className:"bg-gray-800 rounded-xl border border-gray-700 overflow-hidden",children:[a.jsxs("button",{onClick:()=>it(Be.id),className:"w-full flex items-center justify-between p-4 hover:bg-gray-700/50 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-orange-500/20 rounded-xl flex items-center justify-center text-xl",children:Be.icon}),a.jsxs("div",{className:"text-left",children:[a.jsx("div",{className:"font-semibold text-white",children:Be.category}),a.jsxs("div",{className:"text-sm text-gray-500",children:[Ge,"/",Be.items.length," completed"]})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-20 h-1.5 bg-gray-700 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-orange-500 transition-all duration-300",style:{width:`${Ge/Be.items.length*100}%`}})}),a.jsx("span",{className:`text-gray-400 transition-transform ${ft?"rotate-180":""}`,children:""})]})]}),ft&&a.jsx("div",{className:"border-t border-gray-700 p-4 space-y-4",children:Be.items.map(Dt=>{const rt=nt[Dt.id]||nt[`${Dt.id}_url`]||"",kt=rt!=="",_t=w===`${Be.id}.${Dt.id}`,wt=U[`${Be.id}.${Dt.id}`]||[],Er=e?.checklist_config?.[Be.id]?.[Dt.id]?.alreadyHave||!1;return a.jsxs("div",{className:`p-4 rounded-xl border ${kt?"bg-orange-500/5 border-orange-500/30":"bg-gray-900/50 border-gray-700"}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center text-xs ${kt||Er?"bg-orange-500 border-orange-500 text-white":"border-gray-600"}`,children:(kt||Er)&&""}),a.jsx("span",{className:"font-medium text-white",children:Dt.label}),Er&&!kt&&a.jsx("span",{className:"text-xs bg-blue-500/20 text-blue-400 px-2 py-0.5 rounded-full border border-blue-500/30",children:"Already Provided"})]}),ht(Dt.priority)]}),Dt.type==="file"&&a.jsxs("div",{children:[_t?a.jsxs("div",{className:"p-4 border-2 border-orange-500/50 rounded-xl bg-orange-500/5",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[a.jsx("div",{className:"animate-spin text-orange-500",children:""}),a.jsxs("span",{className:"text-white font-medium",children:["Uploading... ",Math.round(T),"%"]})]}),a.jsx("div",{className:"h-2 bg-gray-700 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-gradient-to-r from-orange-500 to-orange-400 transition-all duration-300 ease-out",style:{width:`${T}%`}})})]}):a.jsxs("label",{className:"flex items-center justify-center gap-2 p-4 border-2 border-dashed border-gray-600 rounded-xl cursor-pointer hover:border-orange-500/50 transition-colors",children:[a.jsx("span",{className:"text-orange-500",children:""}),a.jsx("span",{className:"text-gray-400",children:"Click to upload"}),a.jsx("input",{type:"file",accept:Dt.accept,onChange:pr=>de(Be.id,Dt.id,pr.target.files),className:"hidden"})]}),(wt.length>0||rt)&&a.jsxs("div",{className:"mt-2 space-y-1",children:[wt.map((pr,Xr)=>a.jsxs("div",{className:"flex items-center gap-2 p-2 bg-orange-500/10 rounded-lg text-sm",children:[a.jsx("span",{className:"text-orange-500",children:""}),a.jsx("span",{className:"flex-1 text-white truncate",children:pr.name}),a.jsx("a",{href:pr.url,target:"_blank",rel:"noopener noreferrer",className:"text-orange-500 hover:underline",children:"View"})]},Xr)),rt&&wt.length===0&&a.jsxs("div",{className:"flex items-center gap-2 p-2 bg-orange-500/10 rounded-lg text-sm",children:[a.jsx("span",{className:"text-orange-500",children:""}),a.jsx("span",{className:"text-white",children:"File uploaded"}),a.jsx("a",{href:rt,target:"_blank",rel:"noopener noreferrer",className:"text-orange-500 hover:underline ml-auto",children:"View"})]})]}),nt[`${Dt.id}_links`]?.length>0&&a.jsx("div",{className:"mt-2 space-y-1",children:nt[`${Dt.id}_links`].map((pr,Xr)=>a.jsxs("div",{className:"flex items-center gap-2 p-2 bg-blue-500/10 rounded-lg text-sm",children:[a.jsx("span",{className:"text-blue-400",children:""}),a.jsxs("span",{className:"flex-1 text-white truncate",children:[pr.includes("drive.google")?"Google Drive":pr.includes("dropbox")?"Dropbox":"External"," link"]}),a.jsx("a",{href:pr,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:underline",children:"Open"})]},`link-${Xr}`))})]}),Dt.type==="text"&&a.jsx("input",{type:"text",value:rt,onChange:pr=>Oe(Be.id,Dt.id,pr.target.value),placeholder:Dt.placeholder,className:"w-full p-3 bg-gray-900 border border-gray-700 rounded-xl text-white placeholder-gray-500 focus:border-orange-500 focus:outline-none"}),Dt.type==="number"&&a.jsx("input",{type:"number",value:rt,onChange:pr=>Oe(Be.id,Dt.id,pr.target.value),placeholder:Dt.placeholder,className:"w-full p-3 bg-gray-900 border border-gray-700 rounded-xl text-white placeholder-gray-500 focus:border-orange-500 focus:outline-none"}),Dt.type==="textarea"&&a.jsx("textarea",{value:rt,onChange:pr=>Oe(Be.id,Dt.id,pr.target.value),placeholder:Dt.placeholder,rows:3,className:"w-full p-3 bg-gray-900 border border-gray-700 rounded-xl text-white placeholder-gray-500 focus:border-orange-500 focus:outline-none resize-none"}),Dt.type==="contact"&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("input",{type:"text",value:nt[`${Dt.id}_name`]||"",onChange:pr=>Oe(Be.id,`${Dt.id}_name`,pr.target.value),placeholder:"Contact name",className:"w-full p-3 bg-gray-900 border border-gray-700 rounded-xl text-white placeholder-gray-500 focus:border-orange-500 focus:outline-none"}),a.jsx("input",{type:"tel",value:nt[`${Dt.id}_phone`]||"",onChange:pr=>Oe(Be.id,`${Dt.id}_phone`,pr.target.value),placeholder:"Phone number",className:"w-full p-3 bg-gray-900 border border-gray-700 rounded-xl text-white placeholder-gray-500 focus:border-orange-500 focus:outline-none"}),a.jsx("input",{type:"email",value:nt[`${Dt.id}_email`]||"",onChange:pr=>Oe(Be.id,`${Dt.id}_email`,pr.target.value),placeholder:"Email address",className:"w-full p-3 bg-gray-900 border border-gray-700 rounded-xl text-white placeholder-gray-500 focus:border-orange-500 focus:outline-none"})]})]},Dt.id)})})]},Be.id)})}),a.jsxs("div",{className:"mt-8 text-center",children:[Y&&a.jsx("div",{className:"mb-4 p-4 bg-green-500/20 border border-green-500/30 rounded-xl inline-block",children:a.jsx("p",{className:"text-green-400 font-medium",children:" Already submitted  you can still make changes below"})}),a.jsx("button",{onClick:xe,disabled:Re.completed===0||y,className:"bg-orange-500 hover:bg-orange-600 disabled:bg-gray-700 disabled:cursor-not-allowed text-white font-semibold px-8 py-4 rounded-full transition-all inline-flex items-center gap-2",children:y?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"animate-spin",children:""})," Submitting..."]}):a.jsxs(a.Fragment,{children:[a.jsx("span",{children:""})," ",Y?"Update Submission":"Submit Onboarding Information"]})}),a.jsxs("p",{className:"text-gray-500 text-sm mt-3 flex items-center justify-center gap-2",children:[p&&a.jsx("span",{className:"text-orange-500 animate-pulse",children:" Saving..."}),!p&&(Y?"Changes are auto-saved  click to notify us of updates":"You can submit anytime  we'll reach out if we need anything else")]})]})]}),f==="timeline"&&a.jsxs("div",{children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"What Happens Next"}),a.jsx("p",{className:"text-gray-400",children:"Here's our process from signup to showtime"})]}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute left-8 top-0 bottom-0 w-0.5 bg-gradient-to-b from-orange-500 to-orange-500/20"}),a.jsx("div",{className:"space-y-6",children:z3e.map(Be=>a.jsxs("div",{className:"flex gap-6",children:[a.jsx("div",{className:"w-16 h-16 bg-gray-800 rounded-2xl border-2 border-orange-500 flex items-center justify-center text-orange-500 text-2xl font-bold relative z-10",children:Be.id}),a.jsxs("div",{className:"flex-1 bg-gray-800 rounded-xl p-5 border border-gray-700",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("h3",{className:"font-semibold text-white",children:Be.title}),a.jsx("span",{className:"text-xs bg-orange-500/20 text-orange-500 px-2 py-1 rounded-full",children:Be.duration})]}),a.jsx("p",{className:"text-gray-400 text-sm",children:Be.description})]})]},Be.id))})]})]}),f==="contact"&&a.jsxs("div",{children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Get In Touch"}),a.jsx("p",{className:"text-gray-400",children:"Have questions? We're here to help"})]}),a.jsxs("div",{className:"bg-gray-800 rounded-xl p-6 border border-gray-700",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-16 h-16 bg-orange-500/20 rounded-2xl flex items-center justify-center text-3xl",children:""}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-white text-lg",children:"Brandon Hibbs"}),a.jsx("p",{className:"text-gray-400",children:"Founder, Fit Focus Media"})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("a",{href:"mailto:brandon@fitfocusmedia.com.au",className:"flex items-center gap-3 p-4 bg-gray-900 rounded-xl hover:bg-gray-700 transition-colors",children:[a.jsx("span",{className:"text-orange-500",children:""}),a.jsx("span",{className:"text-white",children:"brandon@fitfocusmedia.com.au"})]}),a.jsxs("a",{href:"tel:0411934935",className:"flex items-center gap-3 p-4 bg-gray-900 rounded-xl hover:bg-gray-700 transition-colors",children:[a.jsx("span",{className:"text-orange-500",children:""}),a.jsx("span",{className:"text-white",children:"0411 934 935"})]}),a.jsxs("a",{href:"https://instagram.com/fitfocusmedia",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 p-4 bg-gray-900 rounded-xl hover:bg-gray-700 transition-colors",children:[a.jsx("span",{className:"text-orange-500",children:""}),a.jsx("span",{className:"text-white",children:"@fitfocusmedia"})]})]})]})]})]}),a.jsxs("footer",{className:"border-t border-gray-800 py-6 text-center",children:[a.jsx("p",{className:"text-gray-600 text-sm",children:" 2026 Fit Focus Media. All rights reserved."}),a.jsx("p",{className:"text-gray-700 text-xs mt-1",children:"Delivering world-class event coverage across Australia "})]})]})}const G3e=[{id:"event-wng3-2024",name:"WNG 3  Who's Next Grappling",date:"2024-03-15",venue:"Brisbane Convention Centre",org_name:"Who's Next",created_at:"2024-03-01T10:00:00Z"},{id:"event-afn8-2024",name:"Aggression Fight Night 8",date:"2024-02-10",venue:"The Fortitude Music Hall",org_name:"Aggression",created_at:"2024-02-01T10:00:00Z"}],W3e=[{id:"athlete-jsmith-001",name:"Jake Smith",email:"jake.smith@example.com",sport:"Brazilian Jiu-Jitsu",gym:"Gracie Brisbane",created_at:"2024-01-15T08:00:00Z"},{id:"athlete-mchen-002",name:"Michelle Chen",email:"michelle.chen@example.com",sport:"MMA",gym:"Integrated MMA",created_at:"2024-01-20T09:00:00Z"},{id:"athlete-rjones-003",name:"Ryan Jones",email:"ryan.jones@example.com",sport:"Muay Thai",gym:"Roundhouse Brisbane",created_at:"2024-02-01T10:00:00Z"}],Y3e=[{id:"content-001",athlete_id:"athlete-jsmith-001",event_id:"event-wng3-2024",type:"photo",title:"Match Action - Guard Pass",drive_url:"https://via.placeholder.com/1200x800/0d0d1a/e51d1d?text=Guard+Pass",thumbnail_url:"https://via.placeholder.com/400x300/0d0d1a/e51d1d?text=Guard+Pass",package_type:"vip",created_at:"2024-03-16T10:00:00Z"},{id:"content-002",athlete_id:"athlete-jsmith-001",event_id:"event-wng3-2024",type:"photo",title:"Submission Attempt",drive_url:"https://via.placeholder.com/1200x800/0d0d1a/e51d1d?text=Submission",thumbnail_url:"https://via.placeholder.com/400x300/0d0d1a/e51d1d?text=Submission",package_type:"vip",created_at:"2024-03-16T10:05:00Z"},{id:"content-003",athlete_id:"athlete-jsmith-001",event_id:"event-wng3-2024",type:"photo",title:"Victory Moment",drive_url:"https://via.placeholder.com/1200x800/0d0d1a/FFD700?text=Victory",thumbnail_url:"https://via.placeholder.com/400x300/0d0d1a/FFD700?text=Victory",package_type:"vip",created_at:"2024-03-16T10:10:00Z"},{id:"content-004",athlete_id:"athlete-jsmith-001",event_id:"event-wng3-2024",type:"photo",title:"Podium Celebration",drive_url:"https://via.placeholder.com/1200x800/0d0d1a/FFD700?text=Podium",thumbnail_url:"https://via.placeholder.com/400x300/0d0d1a/FFD700?text=Podium",package_type:"vip",created_at:"2024-03-16T10:15:00Z"},{id:"content-005",athlete_id:"athlete-jsmith-001",event_id:"event-wng3-2024",type:"video",title:"Walkout",drive_url:"https://via.placeholder.com/1920x1080/0d0d1a/e51d1d?text=Walkout+Video",thumbnail_url:"https://via.placeholder.com/640x360/0d0d1a/e51d1d?text=Walkout+Video",package_type:"vip",duration:"0:45",created_at:"2024-03-16T11:00:00Z"},{id:"content-006",athlete_id:"athlete-jsmith-001",event_id:"event-wng3-2024",type:"video",title:"Match Highlight",drive_url:"https://via.placeholder.com/1920x1080/0d0d1a/e51d1d?text=Match+Highlight",thumbnail_url:"https://via.placeholder.com/640x360/0d0d1a/e51d1d?text=Match+Highlight",package_type:"vip",duration:"2:30",created_at:"2024-03-16T11:05:00Z"},{id:"content-007",athlete_id:"athlete-jsmith-001",event_id:"event-wng3-2024",type:"video",title:"Victory Moment",drive_url:"https://via.placeholder.com/1920x1080/0d0d1a/FFD700?text=Victory+Video",thumbnail_url:"https://via.placeholder.com/640x360/0d0d1a/FFD700?text=Victory+Video",package_type:"vip",duration:"0:30",created_at:"2024-03-16T11:10:00Z"},{id:"content-008",athlete_id:"athlete-mchen-002",event_id:"event-afn8-2024",type:"photo",title:"Opening Exchange",drive_url:"https://via.placeholder.com/1200x800/0d0d1a/e51d1d?text=Opening+Exchange",thumbnail_url:"https://via.placeholder.com/400x300/0d0d1a/e51d1d?text=Opening+Exchange",package_type:"match",created_at:"2024-02-11T10:00:00Z"},{id:"content-009",athlete_id:"athlete-mchen-002",event_id:"event-afn8-2024",type:"photo",title:"Head Kick",drive_url:"https://via.placeholder.com/1200x800/0d0d1a/e51d1d?text=Head+Kick",thumbnail_url:"https://via.placeholder.com/400x300/0d0d1a/e51d1d?text=Head+Kick",package_type:"match",created_at:"2024-02-11T10:05:00Z"},{id:"content-010",athlete_id:"athlete-mchen-002",event_id:"event-afn8-2024",type:"photo",title:"Ground Control",drive_url:"https://via.placeholder.com/1200x800/0d0d1a/e51d1d?text=Ground+Control",thumbnail_url:"https://via.placeholder.com/400x300/0d0d1a/e51d1d?text=Ground+Control",package_type:"match",created_at:"2024-02-11T10:10:00Z"},{id:"content-011",athlete_id:"athlete-mchen-002",event_id:"event-afn8-2024",type:"video",title:"Match Highlight",drive_url:"https://via.placeholder.com/1920x1080/0d0d1a/e51d1d?text=Match+Highlight",thumbnail_url:"https://via.placeholder.com/640x360/0d0d1a/e51d1d?text=Match+Highlight",package_type:"match",duration:"1:45",created_at:"2024-02-11T11:00:00Z"},{id:"content-012",athlete_id:"athlete-rjones-003",event_id:"event-wng3-2024",type:"photo",title:"Clinch Work",drive_url:"https://via.placeholder.com/1200x800/0d0d1a/e51d1d?text=Clinch+Work",thumbnail_url:"https://via.placeholder.com/400x300/0d0d1a/e51d1d?text=Clinch+Work",package_type:"match",created_at:"2024-03-16T12:00:00Z"},{id:"content-013",athlete_id:"athlete-rjones-003",event_id:"event-wng3-2024",type:"photo",title:"Knee Strike",drive_url:"https://via.placeholder.com/1200x800/0d0d1a/e51d1d?text=Knee+Strike",thumbnail_url:"https://via.placeholder.com/400x300/0d0d1a/e51d1d?text=Knee+Strike",package_type:"match",created_at:"2024-03-16T12:05:00Z"},{id:"content-014",athlete_id:"athlete-rjones-003",event_id:"event-wng3-2024",type:"video",title:"Match Highlight",drive_url:"https://via.placeholder.com/1920x1080/0d0d1a/e51d1d?text=Match+Highlight",thumbnail_url:"https://via.placeholder.com/640x360/0d0d1a/e51d1d?text=Match+Highlight",package_type:"match",duration:"1:30",created_at:"2024-03-16T12:30:00Z"}],q3e=[{athlete_id:"athlete-jsmith-001",event_id:"event-wng3-2024",package_type:"vip",granted_at:"2024-03-16T09:00:00Z"},{athlete_id:"athlete-mchen-002",event_id:"event-afn8-2024",package_type:"match",granted_at:"2024-02-11T09:00:00Z"},{athlete_id:"athlete-rjones-003",event_id:"event-wng3-2024",package_type:"match",granted_at:"2024-03-16T09:00:00Z"}],X3e=()=>{const t=localStorage.getItem("ffm_athlete_profiles"),e=localStorage.getItem("ffm_athlete_events"),r=localStorage.getItem("ffm_athlete_content"),n=localStorage.getItem("ffm_athlete_access");t||localStorage.setItem("ffm_athlete_profiles",JSON.stringify(W3e)),e||localStorage.setItem("ffm_athlete_events",JSON.stringify(G3e)),r||localStorage.setItem("ffm_athlete_content",JSON.stringify(Y3e)),n||localStorage.setItem("ffm_athlete_access",JSON.stringify(q3e)),console.log(" Athlete portal seed data loaded")};function Z3e(){const t=Ac(),[e,r]=j.useState(""),[n,i]=j.useState(""),[s,o]=j.useState(""),[c,u]=j.useState(!1);j.useEffect(()=>{X3e()},[]);const l=async d=>{d.preventDefault(),o(""),u(!0),setTimeout(()=>{const A=JSON.parse(localStorage.getItem("ffm_athlete_profiles")||"[]").find(p=>p.email===e);A?(sessionStorage.setItem("athlete_user",JSON.stringify(A)),t("/athlete/dashboard")):(o("Invalid email or password. Try: jake.smith@example.com"),u(!1))},800)};return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#0d0d1a] via-[#1a1a2e] to-[#0d0d1a] flex items-center justify-center px-4",children:a.jsxs(Or.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-md",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsxs(Or.h1,{initial:{scale:.9},animate:{scale:1},transition:{duration:.5,delay:.1},className:"text-4xl md:text-5xl font-black text-white mb-2",children:["FIT FOCUS ",a.jsx("span",{className:"text-[#e51d1d]",children:"MEDIA"})]}),a.jsx("p",{className:"text-gray-400 text-lg",children:"Athlete Portal"})]}),a.jsxs(Or.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"bg-[#1a1a2e]/80 backdrop-blur-xl border border-white/10 rounded-2xl p-8 shadow-2xl",children:[a.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"Sign In"}),s&&a.jsxs(Or.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"mb-6 p-4 bg-red-500/10 border border-red-500/30 rounded-lg flex items-start gap-3",children:[a.jsx(k0,{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5"}),a.jsx("p",{className:"text-sm text-red-400",children:s})]}),a.jsxs("form",{onSubmit:l,className:"space-y-5",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300 mb-2",children:"Email Address"}),a.jsxs("div",{className:"relative",children:[a.jsx(zp,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500"}),a.jsx("input",{id:"email",type:"email",value:e,onChange:d=>r(d.target.value),className:"w-full bg-[#0d0d1a]/50 border border-white/10 rounded-lg pl-11 pr-4 py-3 text-white placeholder:text-gray-500 focus:outline-none focus:ring-2 focus:ring-[#e51d1d]/50 focus:border-[#e51d1d]/50 transition-all",placeholder:"your.email@example.com",required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300 mb-2",children:"Password"}),a.jsxs("div",{className:"relative",children:[a.jsx(Nb,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500"}),a.jsx("input",{id:"password",type:"password",value:n,onChange:d=>i(d.target.value),className:"w-full bg-[#0d0d1a]/50 border border-white/10 rounded-lg pl-11 pr-4 py-3 text-white placeholder:text-gray-500 focus:outline-none focus:ring-2 focus:ring-[#e51d1d]/50 focus:border-[#e51d1d]/50 transition-all",placeholder:"",required:!0})]})]}),a.jsx("div",{className:"flex justify-end",children:a.jsx(gs,{to:"/athlete/forgot-password",className:"text-sm text-[#e51d1d] hover:text-red-400 transition-colors",children:"Forgot password?"})}),a.jsx("button",{type:"submit",disabled:c,className:"w-full bg-gradient-to-r from-[#e51d1d] to-red-600 text-white font-semibold py-3 rounded-lg hover:from-red-600 hover:to-[#e51d1d] transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:c?a.jsxs(a.Fragment,{children:[a.jsx(xY,{className:"w-5 h-5 animate-spin"}),"Signing in..."]}):"Sign In"})]}),a.jsx("div",{className:"mt-6 pt-6 border-t border-white/10 text-center",children:a.jsxs("p",{className:"text-gray-400",children:["New athlete?"," ",a.jsx(gs,{to:"/athlete/register",className:"text-[#e51d1d] hover:text-red-400 font-semibold transition-colors",children:"Register here"})]})}),a.jsx("div",{className:"mt-4 text-center",children:a.jsx(gs,{to:"/athlete/packages",className:"text-sm text-gray-500 hover:text-gray-300 transition-colors",children:"Browse Packages"})})]}),a.jsx(Or.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.4},className:"mt-6 p-4 bg-blue-500/10 border border-blue-500/30 rounded-lg text-center",children:a.jsxs("p",{className:"text-sm text-blue-300",children:[a.jsx("strong",{children:"Demo:"})," jake.smith@example.com | michelle.chen@example.com | ryan.jones@example.com"]})})]})})}const Qu={PROFILES:"ffm_athlete_profiles",EVENTS:"ffm_athlete_events",CONTENT:"ffm_athlete_content",ACCESS:"ffm_athlete_access"},bh=t=>{try{const e=localStorage.getItem(t);return e?JSON.parse(e):[]}catch(e){return console.error(`Error reading ${t}:`,e),[]}},Bj=(t,e)=>{try{localStorage.setItem(t,JSON.stringify(e))}catch(r){console.error(`Error writing ${t}:`,r)}},zM=()=>`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,J3e=t=>{const e=bh(Qu.PROFILES),r={id:zM(),name:t.name,email:t.email,sport:t.sport||"",gym:t.gym||"",created_at:new Date().toISOString()};return e.push(r),Bj(Qu.PROFILES,e),r},eDe=()=>bh(Qu.PROFILES),tDe=()=>bh(Qu.EVENTS).sort((t,e)=>new Date(e.date)-new Date(t.date)),rDe=t=>bh(Qu.EVENTS).find(r=>r.id===t),nDe=t=>{const e=bh(Qu.EVENTS),r={id:zM(),name:t.name,date:t.date,venue:t.venue||"",org_name:t.org_name||"",created_at:new Date().toISOString()};return e.push(r),Bj(Qu.EVENTS,e),r},KM=t=>{const e=bh(Qu.ACCESS),r=bh(Qu.EVENTS),n=e.filter(s=>s.athlete_id===t),i=[...new Set(n.map(s=>s.event_id))];return r.filter(s=>i.includes(s.id)).map(s=>{const o=n.find(c=>c.event_id===s.id);return{...s,package_type:o?.package_type||"match",granted_at:o?.granted_at}}).sort((s,o)=>new Date(o.date)-new Date(s.date))},iDe=(t,e)=>{const r=bh(Qu.CONTENT);return bh(Qu.ACCESS).some(s=>s.athlete_id===t&&s.event_id===e)?r.filter(s=>s.athlete_id===t&&s.event_id===e).sort((s,o)=>new Date(o.created_at)-new Date(s.created_at)):[]},Iz=t=>bh(Qu.CONTENT).filter(r=>r.athlete_id===t).sort((r,n)=>new Date(n.created_at)-new Date(r.created_at)),sDe=t=>{const e=bh(Qu.CONTENT),r=KM(t),n=e.filter(c=>c.athlete_id===t),i=n.filter(c=>c.type==="photo"),s=n.filter(c=>c.type==="video"),o=r.length>0?r[0].package_type:null;return{totalEvents:r.length,totalPhotos:i.length,totalVideos:s.length,activePackage:o}},aDe=(t,e,r,n)=>{const i=bh(Qu.CONTENT),s=bh(Qu.ACCESS),o=r.map(u=>({id:zM(),athlete_id:t,event_id:e,type:u.type,title:u.title||"",drive_url:u.drive_url,thumbnail_url:u.thumbnail_url||u.drive_url,package_type:n,duration:u.duration||null,created_at:new Date().toISOString()}));return i.push(...o),Bj(Qu.CONTENT,i),s.find(u=>u.athlete_id===t&&u.event_id===e)||(s.push({athlete_id:t,event_id:e,package_type:n,granted_at:new Date().toISOString()}),Bj(Qu.ACCESS,s)),o},oDe=t=>bh(Qu.CONTENT).filter(r=>r.event_id===t),lDe=t=>{const r=bh(Qu.CONTENT).filter(i=>i.athlete_id===t),n=KM(t);return{totalEvents:n.length,totalPhotos:r.filter(i=>i.type==="photo").length,totalVideos:r.filter(i=>i.type==="video").length,packages:n.map(i=>i.package_type)}},qP=t=>({vip:"VIP Package",match:"Match Package",season:"Season Pass"})[t]||t,Gre=t=>({vip:"from-yellow-500/20 to-amber-600/20 border-yellow-500/30",match:"from-blue-500/20 to-cyan-600/20 border-blue-500/30",season:"from-purple-500/20 to-pink-600/20 border-purple-500/30"})[t]||"from-gray-500/20 to-gray-600/20 border-gray-500/30",Wre=t=>new Date(t).toLocaleDateString("en-AU",{year:"numeric",month:"long",day:"numeric"}),lS=t=>{const e=[/\/file\/d\/([a-zA-Z0-9_-]+)/,/id=([a-zA-Z0-9_-]+)/,/\/d\/([a-zA-Z0-9_-]+)/];for(const r of e){const n=t.match(r);if(n)return`https://drive.google.com/uc?export=download&id=${n[1]}`}return t},cDe=["Brazilian Jiu-Jitsu","MMA","Muay Thai","Boxing","Wrestling","Judo","Kickboxing","Other"];function uDe(){const t=Ac(),[e,r]=j.useState({name:"",email:"",password:"",confirmPassword:"",sport:"",gym:""}),[n,i]=j.useState(""),[s,o]=j.useState(!1),c=l=>{r({...e,[l.target.name]:l.target.value})},u=async l=>{if(l.preventDefault(),i(""),e.password!==e.confirmPassword){i("Passwords do not match");return}if(e.password.length<6){i("Password must be at least 6 characters");return}o(!0),setTimeout(()=>{try{if(JSON.parse(localStorage.getItem("ffm_athlete_profiles")||"[]").find(p=>p.email===e.email)){i("An account with this email already exists"),o(!1);return}const A=J3e({name:e.name,email:e.email,sport:e.sport,gym:e.gym});sessionStorage.setItem("athlete_user",JSON.stringify(A)),t("/athlete/dashboard")}catch{i("Registration failed. Please try again."),o(!1)}},800)};return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#0d0d1a] via-[#1a1a2e] to-[#0d0d1a] flex items-center justify-center px-4 py-12",children:a.jsxs(Or.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-md",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsxs(Or.h1,{initial:{scale:.9},animate:{scale:1},transition:{duration:.5,delay:.1},className:"text-4xl md:text-5xl font-black text-white mb-2",children:["FIT FOCUS ",a.jsx("span",{className:"text-[#e51d1d]",children:"MEDIA"})]}),a.jsx("p",{className:"text-gray-400 text-lg",children:"Athlete Portal"})]}),a.jsxs(Or.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"bg-[#1a1a2e]/80 backdrop-blur-xl border border-white/10 rounded-2xl p-8 shadow-2xl",children:[a.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Create Account"}),a.jsx("p",{className:"text-gray-400 text-sm mb-6",children:"Join the FFM athlete community"}),n&&a.jsxs(Or.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"mb-6 p-4 bg-red-500/10 border border-red-500/30 rounded-lg flex items-start gap-3",children:[a.jsx(k0,{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5"}),a.jsx("p",{className:"text-sm text-red-400",children:n})]}),a.jsxs("form",{onSubmit:u,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-300 mb-2",children:"Full Name"}),a.jsxs("div",{className:"relative",children:[a.jsx(zp,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500"}),a.jsx("input",{id:"name",name:"name",type:"text",value:e.name,onChange:c,className:"w-full bg-[#0d0d1a]/50 border border-white/10 rounded-lg pl-11 pr-4 py-3 text-white placeholder:text-gray-500 focus:outline-none focus:ring-2 focus:ring-[#e51d1d]/50 focus:border-[#e51d1d]/50 transition-all",placeholder:"John Smith",required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300 mb-2",children:"Email Address"}),a.jsxs("div",{className:"relative",children:[a.jsx(tu,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500"}),a.jsx("input",{id:"email",name:"email",type:"email",value:e.email,onChange:c,className:"w-full bg-[#0d0d1a]/50 border border-white/10 rounded-lg pl-11 pr-4 py-3 text-white placeholder:text-gray-500 focus:outline-none focus:ring-2 focus:ring-[#e51d1d]/50 focus:border-[#e51d1d]/50 transition-all",placeholder:"your.email@example.com",required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"sport",className:"block text-sm font-medium text-gray-300 mb-2",children:"Sport / Discipline"}),a.jsxs("div",{className:"relative",children:[a.jsx(Nde,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500"}),a.jsxs("select",{id:"sport",name:"sport",value:e.sport,onChange:c,className:"w-full bg-[#0d0d1a]/50 border border-white/10 rounded-lg pl-11 pr-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-[#e51d1d]/50 focus:border-[#e51d1d]/50 transition-all appearance-none",required:!0,children:[a.jsx("option",{value:"",children:"Select your sport"}),cDe.map(l=>a.jsx("option",{value:l,children:l},l))]})]})]}),a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"gym",className:"block text-sm font-medium text-gray-300 mb-2",children:["Gym / Team ",a.jsx("span",{className:"text-gray-500 text-xs",children:"(optional)"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(rde,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500"}),a.jsx("input",{id:"gym",name:"gym",type:"text",value:e.gym,onChange:c,className:"w-full bg-[#0d0d1a]/50 border border-white/10 rounded-lg pl-11 pr-4 py-3 text-white placeholder:text-gray-500 focus:outline-none focus:ring-2 focus:ring-[#e51d1d]/50 focus:border-[#e51d1d]/50 transition-all",placeholder:"Your gym or team"})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300 mb-2",children:"Password"}),a.jsxs("div",{className:"relative",children:[a.jsx(Nb,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500"}),a.jsx("input",{id:"password",name:"password",type:"password",value:e.password,onChange:c,className:"w-full bg-[#0d0d1a]/50 border border-white/10 rounded-lg pl-11 pr-4 py-3 text-white placeholder:text-gray-500 focus:outline-none focus:ring-2 focus:ring-[#e51d1d]/50 focus:border-[#e51d1d]/50 transition-all",placeholder:"",required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-300 mb-2",children:"Confirm Password"}),a.jsxs("div",{className:"relative",children:[a.jsx(Qw,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500"}),a.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",value:e.confirmPassword,onChange:c,className:"w-full bg-[#0d0d1a]/50 border border-white/10 rounded-lg pl-11 pr-4 py-3 text-white placeholder:text-gray-500 focus:outline-none focus:ring-2 focus:ring-[#e51d1d]/50 focus:border-[#e51d1d]/50 transition-all",placeholder:"",required:!0})]})]}),a.jsx("button",{type:"submit",disabled:s,className:"w-full bg-gradient-to-r from-[#e51d1d] to-red-600 text-white font-semibold py-3 rounded-lg hover:from-red-600 hover:to-[#e51d1d] transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 mt-6",children:s?a.jsxs(a.Fragment,{children:[a.jsx(xY,{className:"w-5 h-5 animate-spin"}),"Creating account..."]}):"Create Account"})]}),a.jsx("div",{className:"mt-6 pt-6 border-t border-white/10 text-center",children:a.jsxs("p",{className:"text-gray-400",children:["Already have an account?"," ",a.jsx(gs,{to:"/athlete",className:"text-[#e51d1d] hover:text-red-400 font-semibold transition-colors",children:"Sign in"})]})})]})]})})}const dDe=[{id:"match",name:"Match Package",price:175,icon:y0,color:"from-blue-500/20 to-cyan-600/20",borderColor:"border-blue-500/30",textColor:"text-blue-400",features:["All fight photos (high resolution)","Match highlight video clip","Instant download access","Share on social media","Available within 48 hours"]},{id:"vip",name:"VIP Package",price:350,icon:Sde,color:"from-yellow-500/20 to-amber-600/20",borderColor:"border-yellow-500/30",textColor:"text-yellow-400",badge:"Most Popular",features:["All fight photos (high resolution)","Match highlight video","Walkout video","Victory moment video","Behind-the-scenes content","Priority delivery (24 hours)","Unlimited downloads"]},{id:"season",name:"Season Pass",price:899,priceNote:"/year",icon:kb,color:"from-purple-500/20 to-pink-600/20",borderColor:"border-purple-500/30",textColor:"text-purple-400",badge:"Best Value",features:["All content from every event","Unlimited events for full year","VIP package benefits for each event","Early access to content","Exclusive athlete portal access","Personalized highlight reels","Save over $1,000 per year"]}],hDe=[{question:"When will I get my content?",answer:"Match Package content is delivered within 48 hours of the event. VIP Package customers receive priority delivery within 24 hours. Season Pass holders get early access as soon as content is ready."},{question:"What format are the files?",answer:"Photos are delivered in high-resolution JPEG format (4K-6K resolution). Videos are provided in MP4 format at 1080p or 4K, optimized for both social media sharing and archival quality."},{question:"Can I share my content on social media?",answer:"Absolutely! All content is yours to share. We encourage you to share your highlight moments on Instagram, Facebook, TikTok, and other platforms. Your success is our success!"},{question:"How do I access my content?",answer:"After purchasing, you'll receive an email with login credentials to your personal athlete portal. All your content is organized by event and available for instant download anytime, anywhere."},{question:"Can I purchase content after the event?",answer:"Yes! Content is available for purchase for 90 days after the event. However, we recommend purchasing in advance to ensure priority processing and the best pricing."},{question:"What if I compete in multiple events?",answer:"If you compete in 3+ events per year, the Season Pass is your best value. It covers all events for an entire year and saves you over $1,000 compared to individual packages."}];function fDe(){const[t,e]=j.useState(null);return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[#0d0d1a] via-[#1a1a2e] to-[#0d0d1a]",children:[a.jsx("div",{className:"bg-[#1a1a2e]/50 backdrop-blur-xl border-b border-white/10",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs(gs,{to:"/athlete",className:"text-2xl font-black text-white",children:["FIT FOCUS ",a.jsx("span",{className:"text-[#e51d1d]",children:"MEDIA"})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(gs,{to:"/athlete",className:"text-sm text-gray-400 hover:text-white transition-colors",children:"Sign In"}),a.jsx(gs,{to:"/athlete/register",className:"bg-gradient-to-r from-[#e51d1d] to-red-600 text-white font-semibold px-6 py-2 rounded-lg hover:from-red-600 hover:to-[#e51d1d] transition-all text-sm",children:"Get Started"})]})]})})}),a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 md:py-20",children:[a.jsxs(Or.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center mb-16",children:[a.jsxs("div",{className:"inline-flex items-center gap-2 bg-[#e51d1d]/20 border border-[#e51d1d]/30 px-4 py-2 rounded-full mb-6",children:[a.jsx(xE,{className:"w-4 h-4 text-[#e51d1d]"}),a.jsx("span",{className:"text-sm font-semibold text-[#e51d1d]",children:"Professional Fight Media"})]}),a.jsxs("h1",{className:"text-4xl md:text-6xl font-black text-white mb-6",children:["Capture Your ",a.jsx("span",{className:"text-[#e51d1d]",children:"Victory"})]}),a.jsx("p",{className:"text-xl text-gray-400 max-w-3xl mx-auto",children:"Professional fight photography and videography packages for combat sports athletes. Relive your moments, share your glory."})]}),a.jsx("div",{className:"grid md:grid-cols-3 gap-8 mb-20",children:dDe.map((r,n)=>{const i=r.icon;return a.jsxs(Or.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:n*.1},className:`bg-gradient-to-br ${r.color} backdrop-blur-xl border ${r.borderColor} rounded-2xl p-8 hover:scale-105 transition-transform relative`,children:[r.badge&&a.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2",children:a.jsx("div",{className:"bg-gradient-to-r from-[#e51d1d] to-red-600 text-white text-xs font-bold px-4 py-1 rounded-full",children:r.badge})}),a.jsx("div",{className:`w-12 h-12 rounded-lg bg-gradient-to-br ${r.color} border ${r.borderColor} flex items-center justify-center mb-4`,children:a.jsx(i,{className:`w-6 h-6 ${r.textColor}`})}),a.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:r.name}),a.jsxs("div",{className:"mb-6",children:[a.jsxs("span",{className:"text-4xl font-black text-white",children:["$",r.price]}),r.priceNote&&a.jsx("span",{className:"text-gray-400 text-lg",children:r.priceNote})]}),a.jsx("ul",{className:"space-y-3 mb-8",children:r.features.map((s,o)=>a.jsxs("li",{className:"flex items-start gap-3",children:[a.jsx(_o,{className:`w-5 h-5 ${r.textColor} flex-shrink-0 mt-0.5`}),a.jsx("span",{className:"text-gray-300 text-sm",children:s})]},o))}),a.jsx("a",{href:`mailto:info@fitfocusmedia.com.au?subject=Purchase ${r.name}&body=Hi Brandon, I'd like to purchase the ${r.name} ($${r.price}).`,className:`block w-full bg-gradient-to-r ${r.color} border ${r.borderColor} ${r.textColor} font-semibold py-3 rounded-lg hover:scale-105 transition-transform text-center`,children:"Purchase Now"})]},r.id)})}),a.jsxs(Or.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-[#1a1a2e]/50 backdrop-blur-xl border border-white/10 rounded-2xl overflow-hidden mb-20",children:[a.jsxs("div",{className:"p-8 border-b border-white/10",children:[a.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Package Comparison"}),a.jsx("p",{className:"text-gray-400",children:"Choose the package that fits your needs"})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-[#0d0d1a]/50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"text-left p-4 text-gray-400 font-semibold",children:"Feature"}),a.jsx("th",{className:"text-center p-4 text-gray-400 font-semibold",children:"Match"}),a.jsx("th",{className:"text-center p-4 text-gray-400 font-semibold",children:"VIP"}),a.jsx("th",{className:"text-center p-4 text-gray-400 font-semibold",children:"Season"})]})}),a.jsxs("tbody",{className:"divide-y divide-white/10",children:[a.jsxs("tr",{children:[a.jsx("td",{className:"p-4 text-gray-300",children:"Fight Photos (High-Res)"}),a.jsx("td",{className:"text-center p-4",children:a.jsx(_o,{className:"w-5 h-5 text-green-400 mx-auto"})}),a.jsx("td",{className:"text-center p-4",children:a.jsx(_o,{className:"w-5 h-5 text-green-400 mx-auto"})}),a.jsx("td",{className:"text-center p-4",children:a.jsx(_o,{className:"w-5 h-5 text-green-400 mx-auto"})})]}),a.jsxs("tr",{children:[a.jsx("td",{className:"p-4 text-gray-300",children:"Match Highlight Video"}),a.jsx("td",{className:"text-center p-4",children:a.jsx(_o,{className:"w-5 h-5 text-green-400 mx-auto"})}),a.jsx("td",{className:"text-center p-4",children:a.jsx(_o,{className:"w-5 h-5 text-green-400 mx-auto"})}),a.jsx("td",{className:"text-center p-4",children:a.jsx(_o,{className:"w-5 h-5 text-green-400 mx-auto"})})]}),a.jsxs("tr",{children:[a.jsx("td",{className:"p-4 text-gray-300",children:"Walkout Video"}),a.jsx("td",{className:"text-center p-4 text-gray-600",children:""}),a.jsx("td",{className:"text-center p-4",children:a.jsx(_o,{className:"w-5 h-5 text-green-400 mx-auto"})}),a.jsx("td",{className:"text-center p-4",children:a.jsx(_o,{className:"w-5 h-5 text-green-400 mx-auto"})})]}),a.jsxs("tr",{children:[a.jsx("td",{className:"p-4 text-gray-300",children:"Victory Moment Video"}),a.jsx("td",{className:"text-center p-4 text-gray-600",children:""}),a.jsx("td",{className:"text-center p-4",children:a.jsx(_o,{className:"w-5 h-5 text-green-400 mx-auto"})}),a.jsx("td",{className:"text-center p-4",children:a.jsx(_o,{className:"w-5 h-5 text-green-400 mx-auto"})})]}),a.jsxs("tr",{children:[a.jsx("td",{className:"p-4 text-gray-300",children:"Delivery Time"}),a.jsx("td",{className:"text-center p-4 text-gray-300",children:"48hrs"}),a.jsx("td",{className:"text-center p-4 text-yellow-400",children:"24hrs"}),a.jsx("td",{className:"text-center p-4 text-purple-400",children:"Priority"})]}),a.jsxs("tr",{children:[a.jsx("td",{className:"p-4 text-gray-300",children:"Number of Events"}),a.jsx("td",{className:"text-center p-4 text-gray-300",children:"1"}),a.jsx("td",{className:"text-center p-4 text-gray-300",children:"1"}),a.jsx("td",{className:"text-center p-4 text-purple-400",children:"Unlimited"})]})]})]})})]}),a.jsxs(Or.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:[a.jsxs("div",{className:"text-center mb-12",children:[a.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-white mb-4",children:"Frequently Asked Questions"}),a.jsx("p",{className:"text-gray-400",children:"Everything you need to know about our packages"})]}),a.jsx("div",{className:"max-w-3xl mx-auto space-y-4",children:hDe.map((r,n)=>a.jsxs(Or.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.6+n*.05},className:"bg-[#1a1a2e]/50 backdrop-blur-xl border border-white/10 rounded-xl overflow-hidden",children:[a.jsxs("button",{onClick:()=>e(t===n?null:n),className:"w-full p-6 flex items-center justify-between text-left hover:bg-white/5 transition-colors",children:[a.jsx("span",{className:"text-lg font-semibold text-white pr-4",children:r.question}),a.jsx(sy,{className:`w-5 h-5 text-gray-400 flex-shrink-0 transition-transform ${t===n?"rotate-180":""}`})]}),t===n&&a.jsx(Or.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"px-6 pb-6",children:a.jsx("p",{className:"text-gray-400 leading-relaxed",children:r.answer})})]},n))})]}),a.jsxs(Or.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8},className:"mt-20 bg-gradient-to-r from-[#e51d1d]/20 via-red-600/20 to-purple-600/20 border border-[#e51d1d]/30 rounded-2xl p-12 text-center",children:[a.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-white mb-4",children:"Ready to Capture Your Glory?"}),a.jsx("p",{className:"text-xl text-gray-300 mb-8 max-w-2xl mx-auto",children:"Create an account or contact us to purchase a package for your next event."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[a.jsx(gs,{to:"/athlete/register",className:"bg-gradient-to-r from-[#e51d1d] to-red-600 text-white font-bold px-8 py-4 rounded-lg hover:from-red-600 hover:to-[#e51d1d] transition-all text-lg",children:"Create Account"}),a.jsxs("a",{href:"mailto:info@fitfocusmedia.com.au?subject=Package Inquiry",className:"flex items-center gap-2 bg-white/10 border border-white/20 text-white font-semibold px-8 py-4 rounded-lg hover:bg-white/20 transition-all text-lg",children:[a.jsx(tu,{className:"w-5 h-5"}),"Contact Us"]})]})]})]})]})}function Yre({children:t}){const e=Ac(),r=Ef(),[n,i]=j.useState(null),[s,o]=j.useState(!1);j.useEffect(()=>{const l=sessionStorage.getItem("athlete_user");if(!l){e("/athlete");return}i(JSON.parse(l))},[e]);const c=()=>{sessionStorage.removeItem("athlete_user"),e("/athlete")},u=[{path:"/athlete/dashboard",label:"Dashboard",icon:$de},{path:"/athlete/content",label:"My Content",icon:E0},{path:"/athlete/packages",label:"Packages",icon:y0},{path:"/athlete/account",label:"Account",icon:zp}];return n?a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[#0d0d1a] via-[#1a1a2e] to-[#0d0d1a]",children:[a.jsxs("header",{className:"bg-[#1a1a2e]/50 backdrop-blur-xl border-b border-white/10 sticky top-0 z-50",children:[a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex items-center justify-between h-16",children:[a.jsxs(gs,{to:"/athlete/dashboard",className:"flex items-center gap-3",children:[a.jsxs("div",{className:"text-2xl font-black text-white",children:["FIT FOCUS ",a.jsx("span",{className:"text-[#e51d1d]",children:"MEDIA"})]}),a.jsx("div",{className:"hidden sm:block h-6 w-px bg-white/20"}),a.jsx("div",{className:"hidden sm:block text-sm text-gray-400",children:"Athlete Portal"})]}),a.jsx("nav",{className:"hidden md:flex items-center gap-1",children:u.map(l=>{const d=l.icon,f=r.pathname===l.path;return a.jsxs(gs,{to:l.path,className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-all ${f?"bg-[#e51d1d] text-white":"text-gray-400 hover:text-white hover:bg-white/5"}`,children:[a.jsx(d,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm font-medium",children:l.label})]},l.path)})}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"hidden lg:flex items-center gap-3",children:[a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-sm font-semibold text-white",children:n.name}),a.jsx("div",{className:"text-xs text-gray-400",children:n.sport})]}),a.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-[#e51d1d] to-red-600 flex items-center justify-center text-white font-bold",children:n.name.charAt(0)})]}),a.jsxs("button",{onClick:c,className:"hidden md:flex items-center gap-2 px-4 py-2 text-sm text-gray-400 hover:text-white hover:bg-white/5 rounded-lg transition-all",children:[a.jsx(lB,{className:"w-4 h-4"}),a.jsx("span",{children:"Sign Out"})]}),a.jsx("button",{onClick:()=>o(!s),className:"md:hidden p-2 text-gray-400 hover:text-white transition-colors",children:s?a.jsx(B0,{className:"w-6 h-6"}):a.jsx(bY,{className:"w-6 h-6"})})]})]})}),s&&a.jsx(Or.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"md:hidden border-t border-white/10 bg-[#0d0d1a]/95 backdrop-blur-xl",children:a.jsxs("div",{className:"px-4 py-4 space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-3 pb-4 border-b border-white/10",children:[a.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-[#e51d1d] to-red-600 flex items-center justify-center text-white font-bold text-lg",children:n.name.charAt(0)}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-semibold text-white",children:n.name}),a.jsx("div",{className:"text-xs text-gray-400",children:n.sport})]})]}),u.map(l=>{const d=l.icon,f=r.pathname===l.path;return a.jsxs(gs,{to:l.path,onClick:()=>o(!1),className:`flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${f?"bg-[#e51d1d] text-white":"text-gray-400 hover:text-white hover:bg-white/5"}`,children:[a.jsx(d,{className:"w-5 h-5"}),a.jsx("span",{className:"font-medium",children:l.label})]},l.path)}),a.jsxs("button",{onClick:c,className:"flex items-center gap-3 px-4 py-3 text-gray-400 hover:text-white hover:bg-white/5 rounded-lg transition-all w-full",children:[a.jsx(lB,{className:"w-5 h-5"}),a.jsx("span",{className:"font-medium",children:"Sign Out"})]})]})})]}),a.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:t}),a.jsx("footer",{className:"border-t border-white/10 bg-[#0d0d1a]/50 mt-20",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:a.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:[a.jsxs("p",{className:"text-sm text-gray-400",children:[" ",new Date().getFullYear()," Fit Focus Media. All rights reserved."]}),a.jsxs("div",{className:"flex items-center gap-6",children:[a.jsx(gs,{to:"/athlete/packages",className:"text-sm text-gray-400 hover:text-white transition-colors",children:"Packages"}),a.jsx("a",{href:"mailto:info@fitfocusmedia.com.au",className:"text-sm text-gray-400 hover:text-white transition-colors",children:"Support"})]})]})})})]}):null}function ADe(){const t=Ac(),[e,r]=j.useState(null),[n,i]=j.useState([]),[s,o]=j.useState([]),[c,u]=j.useState({totalEvents:0,totalPhotos:0,totalVideos:0,activePackage:null});return j.useEffect(()=>{const l=sessionStorage.getItem("athlete_user");if(!l){t("/athlete");return}const d=JSON.parse(l);r(d);const f=KM(d.id),A=Iz(d.id),p=sDe(d.id);i(f),o(A.slice(0,6)),u(p)},[t]),e?a.jsxs(Yre,{children:[a.jsxs(Or.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-r from-[#e51d1d]/20 via-red-600/20 to-purple-600/20 border border-[#e51d1d]/30 rounded-2xl p-8 mb-8",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(qf,{className:"w-6 h-6 text-[#e51d1d]"}),a.jsxs("h1",{className:"text-3xl font-bold text-white",children:["Welcome back, ",e.name.split(" ")[0],"!"]})]}),a.jsx("p",{className:"text-gray-300",children:"Access your fight photos, highlight videos, and exclusive content."})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[a.jsx(Or.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.1},className:"bg-[#1a1a2e]/50 backdrop-blur-xl border border-white/10 rounded-xl p-6",children:a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-500/20 flex items-center justify-center",children:a.jsx(fc,{className:"w-5 h-5 text-blue-400"})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold text-white",children:c.totalEvents}),a.jsx("div",{className:"text-sm text-gray-400",children:"Events"})]})]})}),a.jsx(Or.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.2},className:"bg-[#1a1a2e]/50 backdrop-blur-xl border border-white/10 rounded-xl p-6",children:a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-green-500/20 flex items-center justify-center",children:a.jsx(E0,{className:"w-5 h-5 text-green-400"})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold text-white",children:c.totalPhotos}),a.jsx("div",{className:"text-sm text-gray-400",children:"Photos"})]})]})}),a.jsx(Or.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.3},className:"bg-[#1a1a2e]/50 backdrop-blur-xl border border-white/10 rounded-xl p-6",children:a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-purple-500/20 flex items-center justify-center",children:a.jsx(yh,{className:"w-5 h-5 text-purple-400"})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold text-white",children:c.totalVideos}),a.jsx("div",{className:"text-sm text-gray-400",children:"Videos"})]})]})}),a.jsx(Or.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.4},className:"bg-[#1a1a2e]/50 backdrop-blur-xl border border-white/10 rounded-xl p-6",children:a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-yellow-500/20 flex items-center justify-center",children:a.jsx(y0,{className:"w-5 h-5 text-yellow-400"})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-semibold text-white",children:c.activePackage?qP(c.activePackage):"None"}),a.jsx("div",{className:"text-xs text-gray-400",children:"Active Package"})]})]})})]}),a.jsxs(Or.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"mb-8",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-white",children:"My Events"}),a.jsxs(gs,{to:"/athlete/packages",className:"text-sm text-[#e51d1d] hover:text-red-400 transition-colors font-medium flex items-center gap-1",children:["Browse Packages",a.jsx(Cb,{className:"w-4 h-4"})]})]}),n.length===0?a.jsxs("div",{className:"bg-[#1a1a2e]/50 backdrop-blur-xl border border-white/10 rounded-xl p-12 text-center",children:[a.jsx(y0,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),a.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"No content yet"}),a.jsx("p",{className:"text-gray-400 mb-6",children:"Your media will appear here after your next event!"}),a.jsxs(gs,{to:"/athlete/packages",className:"inline-flex items-center gap-2 bg-gradient-to-r from-[#e51d1d] to-red-600 text-white font-semibold px-6 py-3 rounded-lg hover:from-red-600 hover:to-[#e51d1d] transition-all",children:[a.jsx(y0,{className:"w-5 h-5"}),"Browse Packages"]})]}):a.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:n.map((l,d)=>{const A=Iz(e.id).filter(y=>y.event_id===l.id),p=A.filter(y=>y.type==="photo").length,g=A.filter(y=>y.type==="video").length;return a.jsx(Or.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6+d*.1},children:a.jsx(gs,{to:`/athlete/events/${l.id}`,className:"block group",children:a.jsxs("div",{className:"bg-[#1a1a2e]/50 backdrop-blur-xl border border-white/10 rounded-xl p-6 hover:border-[#e51d1d]/50 transition-all",children:[a.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-1 rounded-full bg-gradient-to-r ${Gre(l.package_type)} border mb-4`,children:[a.jsx(y0,{className:"w-3 h-3"}),a.jsx("span",{className:"text-xs font-semibold",children:qP(l.package_type)})]}),a.jsx("h3",{className:"text-xl font-bold text-white mb-2 group-hover:text-[#e51d1d] transition-colors",children:l.name}),a.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-400 mb-4",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(fc,{className:"w-4 h-4"}),a.jsx("span",{children:Wre(l.date)})]}),l.venue&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(th,{className:"w-4 h-4"}),a.jsx("span",{children:l.venue})]})]}),a.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[a.jsxs("div",{className:"flex items-center gap-2 text-green-400",children:[a.jsx(E0,{className:"w-4 h-4"}),a.jsxs("span",{className:"font-medium",children:[p," Photos"]})]}),a.jsxs("div",{className:"flex items-center gap-2 text-purple-400",children:[a.jsx(yh,{className:"w-4 h-4"}),a.jsxs("span",{className:"font-medium",children:[g," Videos"]})]})]}),a.jsxs("div",{className:"mt-4 pt-4 border-t border-white/10 flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-gray-400",children:"View content"}),a.jsx(Cb,{className:"w-5 h-5 text-[#e51d1d] group-hover:translate-x-1 transition-transform"})]})]})})},l.id)})})]}),s.length>0&&a.jsxs(Or.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},children:[a.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"Recent Content"}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:s.map((l,d)=>a.jsxs(Or.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.8+d*.05},className:"group relative aspect-square rounded-lg overflow-hidden bg-[#1a1a2e]/50 border border-white/10 hover:border-[#e51d1d]/50 transition-all",children:[a.jsx("img",{src:l.thumbnail_url,alt:l.title,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity flex items-end p-3",children:a.jsxs("div",{className:"flex items-center gap-1 text-white",children:[l.type==="video"?a.jsx(yh,{className:"w-4 h-4"}):a.jsx(E0,{className:"w-4 h-4"}),a.jsx("span",{className:"text-xs font-medium truncate",children:l.title})]})})]},l.id))})]})]}):null}function mDe(){const{eventId:t}=tA(),e=Ac(),[r,n]=j.useState(null),[i,s]=j.useState(null),[o,c]=j.useState([]),[u,l]=j.useState("photos"),[d,f]=j.useState(!1),[A,p]=j.useState(0);j.useEffect(()=>{const I=sessionStorage.getItem("athlete_user");if(!I){e("/athlete");return}const U=JSON.parse(I);n(U);const K=rDe(t);if(!K){e("/athlete/dashboard");return}const Y=iDe(U.id,t);s(K),c(Y);const re=Y.filter(Ae=>Ae.type==="photo"),se=Y.filter(Ae=>Ae.type==="video");re.length===0&&se.length>0&&l("videos")},[t,e]);const g=o.filter(I=>I.type==="photo"),y=o.filter(I=>I.type==="video"),x=I=>{(I==="photos"?g:y).forEach((K,Y)=>{setTimeout(()=>{const re=document.createElement("a");re.href=lS(K.drive_url),re.download=K.title||`${I}-${Y+1}`,re.click()},Y*500)})},w=(I,U)=>{const K=encodeURIComponent(I.drive_url),Y=encodeURIComponent(`Check out my ${I.title} from ${i.name}!`),re={facebook:`https://www.facebook.com/sharer/sharer.php?u=${K}`,instagram:I.drive_url,twitter:`https://twitter.com/intent/tweet?url=${K}&text=${Y}`};U==="instagram"?(navigator.clipboard.writeText(I.drive_url),alert("Link copied! Paste it in your Instagram post.")):window.open(re[U],"_blank","width=600,height=400")},E=I=>{p(I),f(!0)},T=()=>{f(!1)},C=()=>{p(I=>(I+1)%g.length)},N=()=>{p(I=>(I-1+g.length)%g.length)};return!r||!i?null:a.jsxs(Yre,{children:[a.jsxs(gs,{to:"/athlete/dashboard",className:"inline-flex items-center gap-2 text-gray-400 hover:text-white transition-colors mb-6",children:[a.jsx(oB,{className:"w-4 h-4"}),a.jsx("span",{children:"Back to Dashboard"})]}),a.jsxs(Or.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-r from-[#1a1a2e]/80 to-[#1a1a2e]/50 backdrop-blur-xl border border-white/10 rounded-2xl p-8 mb-8",children:[a.jsxs("div",{className:`inline-flex items-center gap-2 px-4 py-2 rounded-full bg-gradient-to-r ${Gre(o[0]?.package_type)} border mb-4`,children:[a.jsx(y0,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm font-semibold",children:qP(o[0]?.package_type)})]}),a.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-white mb-4",children:i.name}),a.jsxs("div",{className:"flex flex-wrap items-center gap-6 text-gray-300",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(fc,{className:"w-5 h-5 text-[#e51d1d]"}),a.jsx("span",{children:Wre(i.date)})]}),i.venue&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(th,{className:"w-5 h-5 text-[#e51d1d]"}),a.jsx("span",{children:i.venue})]}),i.org_name&&a.jsxs("div",{className:"text-gray-400",children:["Organized by ",a.jsx("span",{className:"text-white font-semibold",children:i.org_name})]})]})]}),a.jsxs("div",{className:"flex items-center gap-4 mb-6 border-b border-white/10",children:[a.jsxs("button",{onClick:()=>l("photos"),className:`flex items-center gap-2 px-4 py-3 font-semibold transition-all ${u==="photos"?"text-[#e51d1d] border-b-2 border-[#e51d1d]":"text-gray-400 hover:text-white"}`,children:[a.jsx(E0,{className:"w-5 h-5"}),a.jsxs("span",{children:["Photos (",g.length,")"]})]}),a.jsxs("button",{onClick:()=>l("videos"),className:`flex items-center gap-2 px-4 py-3 font-semibold transition-all ${u==="videos"?"text-[#e51d1d] border-b-2 border-[#e51d1d]":"text-gray-400 hover:text-white"}`,children:[a.jsx(yh,{className:"w-5 h-5"}),a.jsxs("span",{children:["Videos (",y.length,")"]})]})]}),u==="photos"&&a.jsx(Or.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:g.length===0?a.jsxs("div",{className:"bg-[#1a1a2e]/50 backdrop-blur-xl border border-white/10 rounded-xl p-12 text-center",children:[a.jsx(E0,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),a.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"No photos available"}),a.jsx("p",{className:"text-gray-400",children:"Photos for this event will be added soon."})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"flex justify-end mb-4",children:a.jsxs("button",{onClick:()=>x("photos"),className:"flex items-center gap-2 bg-gradient-to-r from-[#e51d1d] to-red-600 text-white font-semibold px-6 py-3 rounded-lg hover:from-red-600 hover:to-[#e51d1d] transition-all",children:[a.jsx(km,{className:"w-5 h-5"}),"Download All Photos"]})}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:g.map((I,U)=>a.jsxs(Or.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:U*.05},className:"group relative aspect-square rounded-lg overflow-hidden bg-[#1a1a2e]/50 border border-white/10 hover:border-[#e51d1d]/50 transition-all cursor-pointer",onClick:()=>E(U),children:[a.jsx("img",{src:I.thumbnail_url,alt:I.title,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity flex items-end p-4",children:a.jsx("p",{className:"text-white text-sm font-medium truncate",children:I.title})}),a.jsx("div",{className:"absolute top-2 right-2 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsx("a",{href:lS(I.drive_url),download:!0,onClick:K=>K.stopPropagation(),className:"bg-black/50 backdrop-blur-sm p-2 rounded-lg hover:bg-[#e51d1d] transition-colors",children:a.jsx(km,{className:"w-4 h-4 text-white"})})})]},I.id))})]})}),u==="videos"&&a.jsx(Or.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:y.length===0?a.jsxs("div",{className:"bg-[#1a1a2e]/50 backdrop-blur-xl border border-white/10 rounded-xl p-12 text-center",children:[a.jsx(yh,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),a.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"No videos available"}),a.jsx("p",{className:"text-gray-400",children:"Videos for this event will be added soon."})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"flex justify-end mb-4",children:a.jsxs("button",{onClick:()=>x("videos"),className:"flex items-center gap-2 bg-gradient-to-r from-[#e51d1d] to-red-600 text-white font-semibold px-6 py-3 rounded-lg hover:from-red-600 hover:to-[#e51d1d] transition-all",children:[a.jsx(km,{className:"w-5 h-5"}),"Download All Videos"]})}),a.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:y.map((I,U)=>a.jsxs(Or.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:U*.1},className:"bg-[#1a1a2e]/50 backdrop-blur-xl border border-white/10 rounded-xl overflow-hidden hover:border-[#e51d1d]/50 transition-all",children:[a.jsxs("div",{className:"relative aspect-video bg-black group",children:[a.jsx("img",{src:I.thumbnail_url,alt:I.title,className:"w-full h-full object-cover"}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30 group-hover:bg-black/50 transition-colors",children:a.jsx("div",{className:"w-16 h-16 rounded-full bg-[#e51d1d]/80 backdrop-blur-sm flex items-center justify-center group-hover:scale-110 transition-transform",children:a.jsx(gf,{className:"w-8 h-8 text-white ml-1"})})}),I.duration&&a.jsx("div",{className:"absolute bottom-3 right-3 bg-black/80 backdrop-blur-sm px-2 py-1 rounded text-xs text-white font-medium",children:I.duration})]}),a.jsxs("div",{className:"p-5",children:[a.jsx("h3",{className:"text-lg font-bold text-white mb-3",children:I.title}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsxs("a",{href:lS(I.drive_url),download:!0,className:"flex items-center gap-2 bg-gradient-to-r from-[#e51d1d] to-red-600 text-white font-semibold px-4 py-2 rounded-lg hover:from-red-600 hover:to-[#e51d1d] transition-all text-sm",children:[a.jsx(km,{className:"w-4 h-4"}),"Download"]}),a.jsxs("button",{onClick:()=>w(I,"facebook"),className:"flex items-center gap-2 bg-blue-600/20 border border-blue-500/30 text-blue-400 font-medium px-4 py-2 rounded-lg hover:bg-blue-600/30 transition-all text-sm",children:[a.jsx(w2,{className:"w-4 h-4"}),"Share"]}),a.jsxs("button",{onClick:()=>w(I,"instagram"),className:"flex items-center gap-2 bg-pink-600/20 border border-pink-500/30 text-pink-400 font-medium px-4 py-2 rounded-lg hover:bg-pink-600/30 transition-all text-sm",children:[a.jsx(IN,{className:"w-4 h-4"}),"Copy Link"]})]})]})]},I.id))})]})}),a.jsx(_0,{children:d&&g[A]&&a.jsxs(Or.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/95 backdrop-blur-xl flex items-center justify-center p-4",onClick:T,children:[a.jsx("button",{onClick:T,className:"absolute top-4 right-4 p-2 rounded-lg bg-white/10 hover:bg-white/20 transition-colors z-10",children:a.jsx(B0,{className:"w-6 h-6 text-white"})}),g.length>1&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:I=>{I.stopPropagation(),N()},className:"absolute left-4 p-3 rounded-lg bg-white/10 hover:bg-white/20 transition-colors z-10",children:a.jsx(oB,{className:"w-6 h-6 text-white"})}),a.jsx("button",{onClick:I=>{I.stopPropagation(),C()},className:"absolute right-4 p-3 rounded-lg bg-white/10 hover:bg-white/20 transition-colors z-10",children:a.jsx(Cb,{className:"w-6 h-6 text-white"})})]}),a.jsx(Or.img,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},src:g[A].drive_url,alt:g[A].title,className:"max-w-full max-h-full object-contain",onClick:I=>I.stopPropagation()},A),a.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-6",children:a.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-white font-semibold",children:g[A].title}),a.jsxs("p",{className:"text-gray-400 text-sm",children:[A+1," of ",g.length]})]}),a.jsxs("a",{href:lS(g[A].drive_url),download:!0,onClick:I=>I.stopPropagation(),className:"flex items-center gap-2 bg-[#e51d1d] text-white font-semibold px-6 py-3 rounded-lg hover:bg-red-600 transition-all",children:[a.jsx(km,{className:"w-5 h-5"}),"Download"]})]})})]})})]})}function pDe(){const[t,e]=j.useState("upload"),[r,n]=j.useState([]),[i,s]=j.useState([]),[o,c]=j.useState(""),[u,l]=j.useState(""),[d,f]=j.useState("match"),[A,p]=j.useState([{type:"photo",title:"",drive_url:"",thumbnail_url:""}]),[g,y]=j.useState(!1),[x,w]=j.useState({name:"",date:"",venue:"",org_name:""});j.useEffect(()=>{E()},[]);const E=()=>{n(eDe()),s(tDe())},T=()=>{p([...A,{type:"photo",title:"",drive_url:"",thumbnail_url:""}])},C=Y=>{p(A.filter((re,se)=>se!==Y))},N=(Y,re,se)=>{const Ae=[...A];Ae[Y][re]=se,p(Ae)},I=()=>{if(!o||!u){alert("Please select both an athlete and an event");return}const Y=A.filter(re=>re.drive_url.trim()!=="");if(Y.length===0){alert("Please add at least one content item with a Drive URL");return}aDe(o,u,Y,d),alert("Content assigned successfully!"),p([{type:"photo",title:"",drive_url:"",thumbnail_url:""}]),c(""),l(""),E()},U=()=>{if(!x.name||!x.date){alert("Please provide event name and date");return}nDe(x),w({name:"",date:"",venue:"",org_name:""}),y(!1),E()},K=Y=>{const se=Y.split(`
`).filter(Ae=>Ae.trim()!=="").map(Ae=>({type:"photo",title:"",drive_url:Ae.trim(),thumbnail_url:Ae.trim()}));p([...A,...se])};return a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Content Manager"}),a.jsx("p",{className:"text-gray-400",children:"Manage athlete content and access"})]}),a.jsxs("div",{className:"flex items-center gap-4 border-b border-white/10",children:[a.jsxs("button",{onClick:()=>e("upload"),className:`flex items-center gap-2 px-4 py-3 font-semibold transition-all ${t==="upload"?"text-[#e51d1d] border-b-2 border-[#e51d1d]":"text-gray-400 hover:text-white"}`,children:[a.jsx(zhe,{className:"w-5 h-5"}),a.jsx("span",{children:"Upload Content"})]}),a.jsxs("button",{onClick:()=>e("athletes"),className:`flex items-center gap-2 px-4 py-3 font-semibold transition-all ${t==="athletes"?"text-[#e51d1d] border-b-2 border-[#e51d1d]":"text-gray-400 hover:text-white"}`,children:[a.jsx($h,{className:"w-5 h-5"}),a.jsx("span",{children:"Manage Athletes"})]}),a.jsxs("button",{onClick:()=>e("events"),className:`flex items-center gap-2 px-4 py-3 font-semibold transition-all ${t==="events"?"text-[#e51d1d] border-b-2 border-[#e51d1d]":"text-gray-400 hover:text-white"}`,children:[a.jsx(fc,{className:"w-5 h-5"}),a.jsx("span",{children:"Manage Events"})]})]}),t==="upload"&&a.jsxs(Or.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-[#1a1a2e]/50 backdrop-blur-xl border border-white/10 rounded-xl p-6",children:[a.jsx("h2",{className:"text-xl font-bold text-white mb-6",children:"Assign Content to Athlete"}),a.jsxs("div",{className:"mb-6",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Select Athlete"}),a.jsxs("select",{value:o,onChange:Y=>c(Y.target.value),className:"w-full bg-[#0d0d1a]/50 border border-white/10 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-[#e51d1d]/50",children:[a.jsx("option",{value:"",children:"Choose an athlete..."}),r.map(Y=>a.jsxs("option",{value:Y.id,children:[Y.name," - ",Y.email]},Y.id))]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Select Event"}),a.jsxs("button",{onClick:()=>y(!g),className:"text-sm text-[#e51d1d] hover:text-red-400 transition-colors flex items-center gap-1",children:[a.jsx(L0,{className:"w-4 h-4"}),"New Event"]})]}),g&&a.jsxs("div",{className:"bg-[#0d0d1a]/50 border border-white/10 rounded-lg p-4 mb-4 space-y-3",children:[a.jsx("input",{type:"text",placeholder:"Event name",value:x.name,onChange:Y=>w({...x,name:Y.target.value}),className:"w-full bg-[#1a1a2e]/50 border border-white/10 rounded px-3 py-2 text-white text-sm"}),a.jsx("input",{type:"date",value:x.date,onChange:Y=>w({...x,date:Y.target.value}),className:"w-full bg-[#1a1a2e]/50 border border-white/10 rounded px-3 py-2 text-white text-sm"}),a.jsx("input",{type:"text",placeholder:"Venue (optional)",value:x.venue,onChange:Y=>w({...x,venue:Y.target.value}),className:"w-full bg-[#1a1a2e]/50 border border-white/10 rounded px-3 py-2 text-white text-sm"}),a.jsx("input",{type:"text",placeholder:"Organization name (optional)",value:x.org_name,onChange:Y=>w({...x,org_name:Y.target.value}),className:"w-full bg-[#1a1a2e]/50 border border-white/10 rounded px-3 py-2 text-white text-sm"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:U,className:"flex-1 bg-[#e51d1d] text-white px-4 py-2 rounded text-sm font-medium hover:bg-red-600 transition-colors",children:"Create Event"}),a.jsx("button",{onClick:()=>y(!1),className:"px-4 py-2 text-gray-400 hover:text-white transition-colors text-sm",children:"Cancel"})]})]}),a.jsxs("select",{value:u,onChange:Y=>l(Y.target.value),className:"w-full bg-[#0d0d1a]/50 border border-white/10 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-[#e51d1d]/50",children:[a.jsx("option",{value:"",children:"Choose an event..."}),i.map(Y=>a.jsxs("option",{value:Y.id,children:[Y.name," - ",new Date(Y.date).toLocaleDateString()]},Y.id))]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Package Type"}),a.jsx("div",{className:"grid grid-cols-3 gap-4",children:["match","vip","season"].map(Y=>a.jsx("button",{onClick:()=>f(Y),className:`px-4 py-3 rounded-lg border-2 transition-all ${d===Y?"border-[#e51d1d] bg-[#e51d1d]/20 text-white":"border-white/10 text-gray-400 hover:border-white/30"}`,children:Y.charAt(0).toUpperCase()+Y.slice(1)},Y))})]}),a.jsxs("div",{className:"mb-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Content Items"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>{const Y=prompt("Paste Google Drive URLs (one per line):");Y&&K(Y)},className:"text-sm text-[#e51d1d] hover:text-red-400 transition-colors flex items-center gap-1",children:[a.jsx(yY,{className:"w-4 h-4"}),"Batch Add URLs"]}),a.jsxs("button",{onClick:T,className:"text-sm text-[#e51d1d] hover:text-red-400 transition-colors flex items-center gap-1",children:[a.jsx(L0,{className:"w-4 h-4"}),"Add Row"]})]})]}),a.jsx("div",{className:"space-y-3",children:A.map((Y,re)=>a.jsxs("div",{className:"grid grid-cols-12 gap-2 items-start",children:[a.jsxs("select",{value:Y.type,onChange:se=>N(re,"type",se.target.value),className:"col-span-2 bg-[#0d0d1a]/50 border border-white/10 rounded px-3 py-2 text-white text-sm",children:[a.jsx("option",{value:"photo",children:"Photo"}),a.jsx("option",{value:"video",children:"Video"})]}),a.jsx("input",{type:"text",placeholder:"Title",value:Y.title,onChange:se=>N(re,"title",se.target.value),className:"col-span-3 bg-[#0d0d1a]/50 border border-white/10 rounded px-3 py-2 text-white text-sm placeholder:text-gray-500"}),a.jsx("input",{type:"text",placeholder:"Google Drive URL",value:Y.drive_url,onChange:se=>N(re,"drive_url",se.target.value),className:"col-span-6 bg-[#0d0d1a]/50 border border-white/10 rounded px-3 py-2 text-white text-sm placeholder:text-gray-500"}),a.jsx("button",{onClick:()=>C(re),className:"col-span-1 p-2 text-red-400 hover:text-red-300 transition-colors",children:a.jsx(B0,{className:"w-4 h-4"})})]},re))})]}),a.jsxs("button",{onClick:I,className:"w-full bg-gradient-to-r from-[#e51d1d] to-red-600 text-white font-semibold py-3 rounded-lg hover:from-red-600 hover:to-[#e51d1d] transition-all flex items-center justify-center gap-2",children:[a.jsx(EY,{className:"w-5 h-5"}),"Grant Access & Save"]})]}),t==="athletes"&&a.jsx(Or.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-4",children:a.jsx("div",{className:"bg-[#1a1a2e]/50 backdrop-blur-xl border border-white/10 rounded-xl overflow-hidden",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-[#0d0d1a]/50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"text-left p-4 text-gray-400 font-semibold",children:"Athlete"}),a.jsx("th",{className:"text-left p-4 text-gray-400 font-semibold",children:"Sport"}),a.jsx("th",{className:"text-center p-4 text-gray-400 font-semibold",children:"Events"}),a.jsx("th",{className:"text-center p-4 text-gray-400 font-semibold",children:"Photos"}),a.jsx("th",{className:"text-center p-4 text-gray-400 font-semibold",children:"Videos"}),a.jsx("th",{className:"text-left p-4 text-gray-400 font-semibold",children:"Contact"})]})}),a.jsx("tbody",{className:"divide-y divide-white/10",children:r.map(Y=>{const re=lDe(Y.id);return a.jsxs("tr",{className:"hover:bg-white/5 transition-colors",children:[a.jsx("td",{className:"p-4",children:a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold text-white",children:Y.name}),Y.gym&&a.jsx("div",{className:"text-sm text-gray-400",children:Y.gym})]})}),a.jsx("td",{className:"p-4 text-gray-300",children:Y.sport}),a.jsx("td",{className:"text-center p-4 text-gray-300",children:re.totalEvents}),a.jsx("td",{className:"text-center p-4 text-green-400",children:re.totalPhotos}),a.jsx("td",{className:"text-center p-4 text-purple-400",children:re.totalVideos}),a.jsx("td",{className:"p-4 text-gray-400 text-sm",children:Y.email})]},Y.id)})})]})})}),t==="events"&&a.jsx(Or.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-4",children:i.map(Y=>{const re=oDe(Y.id),se=[...new Set(re.map(Ae=>Ae.athlete_id))];return a.jsxs("div",{className:"bg-[#1a1a2e]/50 backdrop-blur-xl border border-white/10 rounded-xl p-6",children:[a.jsx("div",{className:"flex items-start justify-between mb-4",children:a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:Y.name}),a.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-400",children:[a.jsx("span",{children:new Date(Y.date).toLocaleDateString()}),Y.venue&&a.jsxs("span",{children:[" ",Y.venue]}),Y.org_name&&a.jsxs("span",{children:[" ",Y.org_name]})]})]})}),a.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-4",children:[a.jsxs("div",{className:"bg-[#0d0d1a]/50 border border-white/10 rounded-lg p-4",children:[a.jsx("div",{className:"text-2xl font-bold text-white",children:se.length}),a.jsx("div",{className:"text-sm text-gray-400",children:"Athletes"})]}),a.jsxs("div",{className:"bg-[#0d0d1a]/50 border border-white/10 rounded-lg p-4",children:[a.jsx("div",{className:"text-2xl font-bold text-green-400",children:re.filter(Ae=>Ae.type==="photo").length}),a.jsx("div",{className:"text-sm text-gray-400",children:"Photos"})]}),a.jsxs("div",{className:"bg-[#0d0d1a]/50 border border-white/10 rounded-lg p-4",children:[a.jsx("div",{className:"text-2xl font-bold text-purple-400",children:re.filter(Ae=>Ae.type==="video").length}),a.jsx("div",{className:"text-sm text-gray-400",children:"Videos"})]})]})]},Y.id)})})]})}function gDe(){const[t,e]=j.useState([]),[r,n]=j.useState(null),[i,s]=j.useState([]),[o,c]=j.useState([]),[u,l]=j.useState([]),[d,f]=j.useState([]),[A,p]=j.useState([]),[g,y]=j.useState(!0),[x,w]=j.useState("events"),[E,T]=j.useState(!1),[C,N]=j.useState(null),[I,U]=j.useState(null),[K,Y]=j.useState({}),[re,se]=j.useState(null),[Ae,we]=j.useState([]);j.useEffect(()=>{Ce()},[]),j.useEffect(()=>{r&&ve(r.id)},[r]);async function Ce(){y(!0);const{data:xe}=await Rr.from("organizations").select("*").order("name");e(xe||[]),y(!1)}async function ve(xe){const[je,Me,Re]=await Promise.all([Rr.from("events").select("*").eq("organization_id",xe).order("date",{ascending:!0}),Rr.from("packages").select("*").eq("organization_id",xe).order("sort_order"),Rr.from("content_orders").select("*, events(name), packages(name)").eq("organization_id",xe).order("created_at",{ascending:!1}).limit(50)]);s(je.data||[]),c(Me.data||[]),p(Re.data||[]);const it=(je.data||[]).map(ht=>ht.id);if(it.length>0){const[ht,Be]=await Promise.all([Rr.from("division_categories").select("*").in("event_id",it).order("sort_order"),Rr.from("division_subdivisions").select("*").order("sort_order")]);l(ht.data||[]);const nt=(ht.data||[]).map(Ge=>Ge.id);f((Be.data||[]).filter(Ge=>nt.includes(Ge.category_id)))}else l([]),f([])}function ne(xe){return u.filter(je=>je.event_id===xe)}function ce(xe){return d.filter(je=>je.category_id===xe)}function ae(xe,je=null,Me=null){N(xe),U(je),xe==="org"?Y(je||{name:"",slug:"",description:"",logo_url:"",active:!0}):xe==="event"?Y(je||{organization_id:r?.id,name:"",date:"",location:"",status:"upcoming",active:!0}):xe==="package"?Y(je||{organization_id:r?.id,name:"",description:"",price:"",sort_order:0,active:!0}):xe==="division-cat"?Y(je||{event_id:Me||re,name:"",sort_order:0,active:!0}):xe==="division-sub"&&Y(je||{category_id:Me,name:"",sort_order:0,active:!0}),T(!0)}async function De(){try{if(C==="org")I?.id?await Rr.from("organizations").update(K).eq("id",I.id):await Rr.from("organizations").insert(K),Ce();else if(C==="event"){const xe={...K,organization_id:r.id};I?.id?await Rr.from("events").update(xe).eq("id",I.id):await Rr.from("events").insert(xe),ve(r.id)}else if(C==="package"){const xe={...K,organization_id:r.id,price:parseFloat(K.price)};I?.id?await Rr.from("packages").update(xe).eq("id",I.id):await Rr.from("packages").insert(xe),ve(r.id)}else C==="division-cat"?(I?.id?await Rr.from("division_categories").update(K).eq("id",I.id):await Rr.from("division_categories").insert(K),ve(r.id)):C==="division-sub"&&(I?.id?await Rr.from("division_subdivisions").update(K).eq("id",I.id):await Rr.from("division_subdivisions").insert(K),ve(r.id));T(!1)}catch(xe){console.error("Save error:",xe),alert("Error saving. Check console.")}}async function Oe(xe,je){if(!confirm("Are you sure you want to delete this item?"))return;const{error:Me}=await Rr.from(xe).delete().eq("id",je);if(Me){console.error("Delete error:",Me),alert(`Failed to delete: ${Me.message}`);return}xe==="organizations"?(Ce(),r?.id===je&&n(null)):ve(r.id)}async function be(xe,je,Me){await Rr.from(xe).update({active:!Me}).eq("id",je),xe==="organizations"?Ce():ve(r.id)}if(g)return a.jsx("div",{className:"p-8 text-gray-400",children:"Loading..."});if(!r)return a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Content Management"}),a.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Select an organization to manage its events, packages, and divisions"})]}),a.jsx("button",{onClick:()=>ae("org"),className:"px-4 py-2 bg-red-600 hover:bg-red-700 rounded-lg text-sm font-medium",children:"+ Add Organization"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(xe=>a.jsxs("div",{onClick:()=>n(xe),className:"bg-gray-900/50 rounded-xl border border-gray-800 p-6 cursor-pointer hover:border-red-500/50 hover:bg-gray-900/80 transition-all group",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[xe.logo_url?a.jsx("img",{src:xe.logo_url,alt:xe.name,className:"w-12 h-12 rounded-lg object-cover"}):a.jsx("div",{className:"w-12 h-12 rounded-lg bg-gradient-to-br from-red-600 to-red-800 flex items-center justify-center text-xl font-bold",children:xe.name.charAt(0)}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-lg group-hover:text-red-400 transition-colors",children:xe.name}),a.jsxs("p",{className:"text-xs text-gray-500",children:["/",xe.slug]})]})]}),!xe.active&&a.jsx("span",{className:"text-xs bg-gray-700 px-2 py-1 rounded",children:"Inactive"})]}),xe.description&&a.jsx("p",{className:"text-sm text-gray-400 line-clamp-2",children:xe.description}),a.jsxs("div",{className:"mt-4 flex gap-2",children:[a.jsx("button",{onClick:je=>{je.stopPropagation(),ae("org",xe)},className:"text-xs text-blue-400 hover:text-blue-300",children:"Edit"}),a.jsx("button",{onClick:je=>{je.stopPropagation(),be("organizations",xe.id,xe.active)},className:"text-xs text-gray-400 hover:text-white",children:xe.active?"Deactivate":"Activate"})]})]},xe.id))}),E&&de()]});return a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("button",{onClick:()=>n(null),className:"text-gray-400 hover:text-white transition-colors",children:" Back"}),a.jsxs("div",{className:"flex items-center gap-3",children:[r.logo_url?a.jsx("img",{src:r.logo_url,alt:r.name,className:"w-10 h-10 rounded-lg object-cover"}):a.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-red-600 to-red-800 flex items-center justify-center text-lg font-bold",children:r.name.charAt(0)}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold",children:r.name}),a.jsxs("p",{className:"text-xs text-gray-500",children:["/",r.slug]})]})]})]}),a.jsx("div",{className:"flex gap-2 mb-6 border-b border-gray-700 pb-2",children:["events","packages","divisions","orders"].map(xe=>a.jsxs("button",{onClick:()=>w(xe),className:`px-4 py-2 rounded-t-lg capitalize transition-colors ${x===xe?"bg-red-600 text-white":"text-gray-400 hover:text-white"}`,children:[xe," ",xe==="events"&&`(${i.length})`,xe==="packages"&&`(${o.length})`,xe==="orders"&&`(${A.length})`]},xe))}),x==="events"&&a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-lg font-semibold",children:"Upcoming Events"}),a.jsx("button",{onClick:()=>ae("event"),className:"px-4 py-2 bg-red-600 hover:bg-red-700 rounded-lg text-sm",children:"+ Add Event"})]}),i.length===0?a.jsx("div",{className:"bg-gray-900/50 rounded-xl border border-gray-800 p-8 text-center text-gray-400",children:"No events yet. Add one to get started."}):a.jsx("div",{className:"bg-gray-900/50 rounded-xl border border-gray-800 overflow-hidden",children:a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{className:"bg-gray-800",children:a.jsxs("tr",{children:[a.jsx("th",{className:"text-left p-3",children:"Event Name"}),a.jsx("th",{className:"text-left p-3",children:"Date"}),a.jsx("th",{className:"text-left p-3",children:"Location"}),a.jsx("th",{className:"text-center p-3",children:"Status"}),a.jsx("th",{className:"text-center p-3",children:"Active"}),a.jsx("th",{className:"text-right p-3",children:"Actions"})]})}),a.jsx("tbody",{children:i.map(xe=>a.jsxs("tr",{className:"border-t border-gray-800",children:[a.jsx("td",{className:"p-3 font-medium",children:xe.name}),a.jsx("td",{className:"p-3 text-gray-400",children:xe.date&&new Date(xe.date).toLocaleDateString("en-AU",{weekday:"short",day:"numeric",month:"short",year:"numeric"})}),a.jsx("td",{className:"p-3 text-gray-400",children:xe.location}),a.jsx("td",{className:"p-3 text-center",children:a.jsx("span",{className:`px-2 py-1 rounded text-xs ${xe.status==="upcoming"?"bg-blue-600":xe.status==="active"?"bg-green-600":"bg-gray-600"}`,children:xe.status})}),a.jsx("td",{className:"p-3 text-center",children:a.jsx("button",{onClick:()=>be("events",xe.id,xe.active),className:`px-2 py-1 rounded text-xs ${xe.active?"bg-green-600":"bg-gray-600"}`,children:xe.active?"Yes":"No"})}),a.jsxs("td",{className:"p-3 text-right space-x-2",children:[a.jsx("button",{onClick:()=>ae("event",xe),className:"text-blue-400 hover:text-blue-300",children:"Edit"}),a.jsx("button",{onClick:()=>Oe("events",xe.id),className:"text-red-400 hover:text-red-300",children:"Delete"})]})]},xe.id))})]})})]}),x==="packages"&&a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-lg font-semibold",children:"Content Packages"}),a.jsx("button",{onClick:()=>ae("package"),className:"px-4 py-2 bg-red-600 hover:bg-red-700 rounded-lg text-sm",children:"+ Add Package"})]}),o.length===0?a.jsx("div",{className:"bg-gray-900/50 rounded-xl border border-gray-800 p-8 text-center text-gray-400",children:"No packages yet. Add one to get started."}):a.jsx("div",{className:"bg-gray-900/50 rounded-xl border border-gray-800 overflow-hidden",children:a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{className:"bg-gray-800",children:a.jsxs("tr",{children:[a.jsx("th",{className:"text-left p-3",children:"Package Name"}),a.jsx("th",{className:"text-left p-3",children:"Description"}),a.jsx("th",{className:"text-right p-3",children:"Price"}),a.jsx("th",{className:"text-center p-3",children:"Active"}),a.jsx("th",{className:"text-right p-3",children:"Actions"})]})}),a.jsx("tbody",{children:o.map(xe=>a.jsxs("tr",{className:"border-t border-gray-800",children:[a.jsx("td",{className:"p-3 font-medium",children:xe.name}),a.jsx("td",{className:"p-3 text-gray-400 truncate max-w-xs",children:xe.description}),a.jsxs("td",{className:"p-3 text-right font-semibold text-green-400",children:["$",xe.price]}),a.jsx("td",{className:"p-3 text-center",children:a.jsx("button",{onClick:()=>be("packages",xe.id,xe.active),className:`px-2 py-1 rounded text-xs ${xe.active?"bg-green-600":"bg-gray-600"}`,children:xe.active?"Yes":"No"})}),a.jsxs("td",{className:"p-3 text-right space-x-2",children:[a.jsx("button",{onClick:()=>ae("package",xe),className:"text-blue-400 hover:text-blue-300",children:"Edit"}),a.jsx("button",{onClick:()=>Oe("packages",xe.id),className:"text-red-400 hover:text-red-300",children:"Delete"})]})]},xe.id))})]})})]}),x==="divisions"&&a.jsx("div",{children:a.jsxs("div",{className:"mb-6",children:[a.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Divisions by Event"}),a.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Select an event to manage its division categories and subdivisions"}),i.length===0?a.jsx("div",{className:"bg-gray-900/50 rounded-xl border border-gray-800 p-8 text-center text-gray-400",children:"Add events first, then you can manage their divisions."}):a.jsxs(a.Fragment,{children:[a.jsxs("select",{value:re||"",onChange:xe=>se(xe.target.value),className:"w-full max-w-md px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg",children:[a.jsx("option",{value:"",children:"Select an event..."}),i.map(xe=>a.jsxs("option",{value:xe.id,children:[xe.name," (",xe.date&&new Date(xe.date).toLocaleDateString("en-AU"),")"]},xe.id))]}),re&&a.jsxs("div",{className:"mt-6 space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("h3",{className:"text-lg font-semibold",children:["Division Categories (",ne(re).length,")"]}),a.jsx("button",{onClick:()=>ae("division-cat",null,re),className:"px-4 py-2 bg-red-600 hover:bg-red-700 rounded-lg text-sm",children:"+ Add Category"})]}),ne(re).length===0?a.jsx("div",{className:"bg-gray-900/50 rounded-xl border border-gray-800 p-8 text-center text-gray-400",children:"No division categories for this event yet."}):a.jsx("div",{className:"space-y-3",children:ne(re).map(xe=>a.jsxs("div",{className:"bg-gray-900/50 rounded-xl border border-gray-800 overflow-hidden",children:[a.jsxs("div",{className:"p-4 flex justify-between items-center bg-gray-800/50",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{onClick:()=>we(je=>je.includes(xe.id)?je.filter(Me=>Me!==xe.id):[...je,xe.id]),className:"text-gray-400 hover:text-white",children:a.jsx("svg",{className:`w-5 h-5 transition-transform ${Ae.includes(xe.id)?"rotate-90":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),a.jsx("span",{className:"font-semibold",children:xe.name}),a.jsxs("span",{className:"text-xs text-gray-400",children:["(",ce(xe.id).length," subdivisions)"]}),!xe.active&&a.jsx("span",{className:"text-xs bg-gray-600 px-2 py-0.5 rounded",children:"Inactive"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>ae("division-cat",xe),className:"text-blue-400 hover:text-blue-300 text-sm",children:"Edit"}),a.jsx("button",{onClick:()=>Oe("division_categories",xe.id),className:"text-red-400 hover:text-red-300 text-sm",children:"Delete"})]})]}),Ae.includes(xe.id)&&a.jsxs("div",{className:"p-4 border-t border-gray-700",children:[a.jsxs("div",{className:"flex justify-between items-center mb-3",children:[a.jsx("span",{className:"text-sm text-gray-400",children:"Subdivisions:"}),a.jsx("button",{onClick:()=>ae("division-sub",null,xe.id),className:"text-sm text-green-400 hover:text-green-300",children:"+ Add Subdivision"})]}),ce(xe.id).length===0?a.jsx("p",{className:"text-sm text-gray-500 italic",children:"No subdivisions yet"}):a.jsx("div",{className:"flex flex-wrap gap-2",children:ce(xe.id).map(je=>a.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-1.5 rounded-lg border text-sm ${je.active?"bg-gray-800 border-gray-600":"bg-gray-900 border-gray-700 opacity-50"}`,children:[a.jsx("span",{children:je.name}),a.jsx("button",{onClick:()=>ae("division-sub",je,xe.id),className:"text-blue-400 hover:text-blue-300",children:""}),a.jsx("button",{onClick:()=>Oe("division_subdivisions",je.id),className:"text-red-400 hover:text-red-300",children:""})]},je.id))})]})]},xe.id))}),r.slug==="nba"&&a.jsxs("div",{className:"mt-6 p-4 bg-blue-900/20 border border-blue-800 rounded-xl",children:[a.jsx("h4",{className:"font-semibold text-blue-400 mb-2",children:"Quick Add: Standard NBA Divisions"}),a.jsx("p",{className:"text-sm text-gray-400 mb-3",children:"Add all standard NBA bodybuilding divisions for this event"}),a.jsx("button",{onClick:async xe=>{const je=xe.target,Me=je.innerText;if(!re){alert("Please select an event first");return}if(window.confirm("Add all standard NBA divisions to this event?")){je.disabled=!0,je.innerText="Adding divisions...";try{const Re={"Men's Physique":["Novice","Open","Masters 40+","Masters 50+","Junior"],"Classic Physique":["Novice","Open","Masters 40+","Masters 50+"],Bodybuilding:["Novice","Open","Masters 40+","Masters 50+","Junior"],Figure:["Novice","Open","Masters 35+","Masters 45+","Junior"],Bikini:["Novice","Open","Masters 35+","Masters 45+","Junior"],Wellness:["Novice","Open","Masters 35+","Masters 45+"],"Fitness Model":["Open","Masters"],"Sports Model":["Open","Masters"],Transformation:["Open"]};let it=0,ht=0;for(const[Be,nt]of Object.entries(Re)){const{data:Ge,error:ft}=await Rr.from("division_categories").insert({event_id:re,name:Be,sort_order:it++,active:!0}).select().single();if(ft){console.error("Error adding category:",Be,ft);continue}if(Ge){ht++;let Dt=0;for(const rt of nt){const{error:kt}=await Rr.from("division_subdivisions").insert({category_id:Ge.id,name:rt,sort_order:Dt++,active:!0});kt&&console.error("Error adding subdivision:",rt,kt)}}}alert(`Added ${ht} division categories with subdivisions!`),await ve(r.id)}catch(Re){console.error("Error adding divisions:",Re),alert("Error adding divisions: "+Re.message)}finally{je.disabled=!1,je.innerText=Me}}},className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg text-sm disabled:opacity-50",children:"Add Standard NBA Divisions"})]})]})]})]})}),x==="orders"&&a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Recent Orders"}),a.jsx("div",{className:"bg-gray-900/50 rounded-xl border border-gray-800 overflow-hidden",children:a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{className:"bg-gray-800",children:a.jsxs("tr",{children:[a.jsx("th",{className:"text-left p-3",children:"Date"}),a.jsx("th",{className:"text-left p-3",children:"Athlete"}),a.jsx("th",{className:"text-left p-3",children:"Email"}),a.jsx("th",{className:"text-left p-3",children:"Event"}),a.jsx("th",{className:"text-left p-3",children:"Package"}),a.jsx("th",{className:"text-right p-3",children:"Amount"}),a.jsx("th",{className:"text-center p-3",children:"Status"})]})}),a.jsx("tbody",{children:A.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:"7",className:"p-8 text-center text-gray-400",children:"No orders yet"})}):A.map(xe=>a.jsxs("tr",{className:"border-t border-gray-800",children:[a.jsx("td",{className:"p-3 text-gray-400",children:new Date(xe.created_at).toLocaleDateString("en-AU")}),a.jsxs("td",{className:"p-3 font-medium",children:[xe.first_name," ",xe.last_name]}),a.jsx("td",{className:"p-3 text-gray-400",children:xe.email}),a.jsx("td",{className:"p-3 text-gray-400",children:xe.events?.name}),a.jsx("td",{className:"p-3 text-gray-400",children:xe.packages?.name}),a.jsxs("td",{className:"p-3 text-right font-semibold",children:["$",xe.amount]}),a.jsx("td",{className:"p-3 text-center",children:a.jsx("span",{className:`px-2 py-1 rounded text-xs ${xe.status==="paid"?"bg-green-600":xe.status==="delivered"?"bg-blue-600":xe.status==="pending"?"bg-yellow-600":"bg-gray-600"}`,children:xe.status})})]},xe.id))})]})})]}),E&&de()]});function de(){return a.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-gray-900 rounded-xl border border-gray-700 p-6 w-full max-w-md",children:[a.jsxs("h3",{className:"text-lg font-semibold mb-4",children:[I?"Edit":"Add"," ",C==="org"?"Organization":C==="event"?"Event":C==="package"?"Package":C==="division-cat"?"Division Category":C==="division-sub"?"Subdivision":""]}),a.jsxs("div",{className:"space-y-4",children:[C==="org"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Name"}),a.jsx("input",{type:"text",value:K.name||"",onChange:xe=>Y({...K,name:xe.target.value}),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Slug (URL-friendly)"}),a.jsx("input",{type:"text",value:K.slug||"",onChange:xe=>Y({...K,slug:xe.target.value.toLowerCase().replace(/\s+/g,"-")}),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Logo URL"}),a.jsx("input",{type:"text",value:K.logo_url||"",onChange:xe=>Y({...K,logo_url:xe.target.value}),placeholder:"https://...",className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Description"}),a.jsx("textarea",{value:K.description||"",onChange:xe=>Y({...K,description:xe.target.value}),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg",rows:3})]})]}),C==="event"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Event Name"}),a.jsx("input",{type:"text",value:K.name||"",onChange:xe=>Y({...K,name:xe.target.value}),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Date"}),a.jsx("input",{type:"date",value:K.date||"",onChange:xe=>Y({...K,date:xe.target.value}),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Location"}),a.jsx("input",{type:"text",value:K.location||"",onChange:xe=>Y({...K,location:xe.target.value}),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Status"}),a.jsxs("select",{value:K.status||"upcoming",onChange:xe=>Y({...K,status:xe.target.value}),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg",children:[a.jsx("option",{value:"upcoming",children:"Upcoming"}),a.jsx("option",{value:"active",children:"Active"}),a.jsx("option",{value:"completed",children:"Completed"})]})]})]}),C==="package"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Package Name"}),a.jsx("input",{type:"text",value:K.name||"",onChange:xe=>Y({...K,name:xe.target.value}),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Description"}),a.jsx("input",{type:"text",value:K.description||"",onChange:xe=>Y({...K,description:xe.target.value}),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Price (AUD)"}),a.jsx("input",{type:"number",value:K.price||"",onChange:xe=>Y({...K,price:xe.target.value}),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Sort Order"}),a.jsx("input",{type:"number",value:K.sort_order||0,onChange:xe=>Y({...K,sort_order:parseInt(xe.target.value)}),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg"})]})]})]}),C==="division-cat"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Category Name"}),a.jsx("input",{type:"text",value:K.name||"",onChange:xe=>Y({...K,name:xe.target.value}),placeholder:"e.g., Men's Physique, Bikini, Figure",className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Sort Order"}),a.jsx("input",{type:"number",value:K.sort_order||0,onChange:xe=>Y({...K,sort_order:parseInt(xe.target.value)}),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg"})]})]}),C==="division-sub"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Subdivision Name"}),a.jsx("input",{type:"text",value:K.name||"",onChange:xe=>Y({...K,name:xe.target.value}),placeholder:"e.g., Novice, Open, Masters 40+",className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Sort Order"}),a.jsx("input",{type:"number",value:K.sort_order||0,onChange:xe=>Y({...K,sort_order:parseInt(xe.target.value)}),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg"})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",id:"active",checked:K.active??!0,onChange:xe=>Y({...K,active:xe.target.checked}),className:"rounded"}),a.jsx("label",{htmlFor:"active",className:"text-sm text-gray-400",children:"Active"})]})]}),a.jsxs("div",{className:"flex gap-3 mt-6",children:[a.jsx("button",{onClick:()=>T(!1),className:"flex-1 py-2 border border-gray-600 rounded-lg hover:bg-gray-800",children:"Cancel"}),a.jsx("button",{onClick:De,className:"flex-1 py-2 bg-red-600 hover:bg-red-700 rounded-lg",children:"Save"})]})]})})}}function vDe(){const[t,e]=j.useState([]),[r,n]=j.useState([]),[i,s]=j.useState([]),[o,c]=j.useState([]),[u,l]=j.useState(!0),[d,f]=j.useState("all"),[A,p]=j.useState("all"),[g,y]=j.useState(""),[x,w]=j.useState(""),[E,T]=j.useState(""),[C,N]=j.useState(null);j.useEffect(()=>{I()},[]);async function I(){l(!0);const{data:Ce}=await Rr.from("organizations").select("*").order("name");n(Ce||[]);const{data:ve}=await Rr.from("events").select("*").order("date",{ascending:!1});s(ve||[]);const{data:ne}=await Rr.from("packages").select("*").order("name");c(ne||[]);const{data:ce}=await Rr.from("content_orders").select("*").order("created_at",{ascending:!1});e(ce||[]),l(!1)}async function U(Ce){const{error:ve}=await Rr.from("content_orders").update({status:"delivered",delivered_at:new Date().toISOString()}).eq("id",Ce);ve?alert("Failed to update order status"):I()}function K(Ce){return r.find(ve=>ve.id===Ce)?.name||"Unknown"}function Y(Ce){return i.find(ve=>ve.id===Ce)?.name||"Unknown"}function re(Ce){return o.find(ve=>ve.id===Ce)?.name||"Unknown"}const se=t.filter(Ce=>{if(d!=="all"&&Ce.organization_id!==d||A!=="all"&&Ce.status!==A||g&&new Date(Ce.created_at)<new Date(g)||x&&new Date(Ce.created_at)>new Date(x+"T23:59:59"))return!1;if(E){const ve=E.toLowerCase(),ne=`${Ce.first_name} ${Ce.last_name}`.toLowerCase(),ce=Ce.email?.toLowerCase()||"",ae=Ce.phone?.toLowerCase()||"";if(!ne.includes(ve)&&!ce.includes(ve)&&!ae.includes(ve))return!1}return!0}),Ae=se.filter(Ce=>Ce.status==="paid"||Ce.status==="delivered").reduce((Ce,ve)=>Ce+(parseFloat(ve.amount)||0),0);function we(){const Ce=["Date","Customer","Email","Phone","Organization","Event","Package","Amount","Status"],ve=se.map(Oe=>[new Date(Oe.created_at).toLocaleDateString(),`${Oe.first_name} ${Oe.last_name}`,Oe.email,Oe.phone||"",K(Oe.organization_id),Y(Oe.event_id),re(Oe.package_id),Oe.amount,Oe.status]),ne=[Ce,...ve].map(Oe=>Oe.join(",")).join(`
`),ce=new Blob([ne],{type:"text/csv"}),ae=URL.createObjectURL(ce),De=document.createElement("a");De.href=ae,De.download=`orders-${new Date().toISOString().split("T")[0]}.csv`,De.click()}return u?a.jsx("div",{className:"min-h-screen bg-black text-white flex items-center justify-center",children:a.jsx("div",{className:"text-gray-400",children:"Loading orders..."})}):a.jsxs("div",{className:"min-h-screen bg-black text-white p-6",children:[a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"flex justify-between items-center mb-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Order Management"}),a.jsxs("p",{className:"text-gray-400 mt-1",children:[se.length," orders  $",Ae.toFixed(2)," AUD revenue"]})]}),a.jsxs("button",{onClick:we,className:"px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg hover:bg-gray-700 flex items-center gap-2",children:[a.jsx("span",{children:""}),"Export CSV"]})]}),a.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 mb-6 border border-gray-800",children:[a.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Filters"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Organization"}),a.jsxs("select",{value:d,onChange:Ce=>f(Ce.target.value),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg",children:[a.jsx("option",{value:"all",children:"All Organizations"}),r.map(Ce=>a.jsx("option",{value:Ce.id,children:Ce.name},Ce.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Status"}),a.jsxs("select",{value:A,onChange:Ce=>p(Ce.target.value),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg",children:[a.jsx("option",{value:"all",children:"All Statuses"}),a.jsx("option",{value:"pending",children:"Pending"}),a.jsx("option",{value:"paid",children:"Paid"}),a.jsx("option",{value:"processing",children:"Processing"}),a.jsx("option",{value:"delivered",children:"Delivered"}),a.jsx("option",{value:"refunded",children:"Refunded"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"From Date"}),a.jsx("input",{type:"date",value:g,onChange:Ce=>y(Ce.target.value),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"To Date"}),a.jsx("input",{type:"date",value:x,onChange:Ce=>w(Ce.target.value),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg"})]})]}),a.jsxs("div",{className:"mt-4",children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Search (Name, Email, Phone)"}),a.jsx("input",{type:"text",value:E,onChange:Ce=>T(Ce.target.value),placeholder:"Search orders...",className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg"})]})]}),a.jsx("div",{className:"bg-gray-900 rounded-lg overflow-hidden border border-gray-800",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-800",children:a.jsxs("tr",{children:[a.jsx("th",{className:"text-left p-4 text-sm font-semibold",children:"Date"}),a.jsx("th",{className:"text-left p-4 text-sm font-semibold",children:"Customer"}),a.jsx("th",{className:"text-left p-4 text-sm font-semibold",children:"Organization"}),a.jsx("th",{className:"text-left p-4 text-sm font-semibold",children:"Event"}),a.jsx("th",{className:"text-left p-4 text-sm font-semibold",children:"Package"}),a.jsx("th",{className:"text-right p-4 text-sm font-semibold",children:"Amount"}),a.jsx("th",{className:"text-center p-4 text-sm font-semibold",children:"Status"}),a.jsx("th",{className:"text-center p-4 text-sm font-semibold",children:"Actions"})]})}),a.jsx("tbody",{children:se.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:"8",className:"text-center p-8 text-gray-500",children:"No orders found"})}):se.map(Ce=>a.jsxs("tr",{className:"border-t border-gray-800 hover:bg-gray-800/50",children:[a.jsxs("td",{className:"p-4 text-sm",children:[new Date(Ce.created_at).toLocaleDateString(),a.jsx("div",{className:"text-xs text-gray-500",children:new Date(Ce.created_at).toLocaleTimeString()})]}),a.jsxs("td",{className:"p-4",children:[a.jsxs("div",{className:"font-medium",children:[Ce.first_name," ",Ce.last_name]}),a.jsx("div",{className:"text-sm text-gray-400",children:Ce.email}),Ce.phone&&a.jsx("div",{className:"text-xs text-gray-500",children:Ce.phone})]}),a.jsx("td",{className:"p-4 text-sm",children:K(Ce.organization_id)}),a.jsx("td",{className:"p-4 text-sm",children:Y(Ce.event_id)}),a.jsx("td",{className:"p-4 text-sm",children:re(Ce.package_id)}),a.jsxs("td",{className:"p-4 text-right font-semibold",children:["$",Ce.amount]}),a.jsx("td",{className:"p-4 text-center",children:a.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-medium ${Ce.status==="delivered"?"bg-green-500/20 text-green-400":Ce.status==="paid"?"bg-blue-500/20 text-blue-400":Ce.status==="processing"?"bg-yellow-500/20 text-yellow-400":Ce.status==="refunded"?"bg-red-500/20 text-red-400":"bg-gray-500/20 text-gray-400"}`,children:Ce.status})}),a.jsxs("td",{className:"p-4 text-center",children:[a.jsx("button",{onClick:()=>N(Ce),className:"text-blue-400 hover:text-blue-300 text-sm mr-3",children:"View"}),Ce.status==="paid"&&a.jsx("button",{onClick:()=>U(Ce.id),className:"text-green-400 hover:text-green-300 text-sm",children:"Mark Delivered"})]})]},Ce.id))})]})})]}),C&&a.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onClick:()=>N(null),children:a.jsxs("div",{className:"bg-gray-900 rounded-lg max-w-2xl w-full p-6 border border-gray-800",onClick:Ce=>Ce.stopPropagation(),children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-2xl font-bold",children:"Order Details"}),a.jsx("button",{onClick:()=>N(null),className:"text-gray-400 hover:text-white",children:""})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-4",children:[a.jsx("h3",{className:"font-semibold mb-3 text-red-500",children:"Customer Information"}),a.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-400",children:"Name:"}),a.jsxs("div",{className:"font-medium",children:[C.first_name," ",C.last_name]})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-400",children:"Email:"}),a.jsx("div",{className:"font-medium",children:C.email})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-400",children:"Phone:"}),a.jsx("div",{className:"font-medium",children:C.phone||"N/A"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-400",children:"Instagram:"}),a.jsxs("div",{className:"font-medium",children:["@",C.instagram||"N/A"]})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-400",children:"Division:"}),a.jsx("div",{className:"font-medium",children:C.division||"N/A"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-400",children:"Coach:"}),a.jsxs("div",{className:"font-medium",children:[C.coach_name||"N/A"," (@",C.coach_instagram||"N/A",")"]})]})]})]}),a.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-4",children:[a.jsx("h3",{className:"font-semibold mb-3 text-red-500",children:"Order Information"}),a.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-400",children:"Organization:"}),a.jsx("div",{className:"font-medium",children:K(C.organization_id)})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-400",children:"Event:"}),a.jsx("div",{className:"font-medium",children:Y(C.event_id)})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-400",children:"Package:"}),a.jsx("div",{className:"font-medium",children:re(C.package_id)})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-400",children:"Amount:"}),a.jsxs("div",{className:"font-medium text-lg",children:["$",C.amount," ",C.currency]})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-400",children:"Status:"}),a.jsx("div",{className:"font-medium",children:C.status})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-400",children:"Order Date:"}),a.jsx("div",{className:"font-medium",children:new Date(C.created_at).toLocaleString()})]}),C.paid_at&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-400",children:"Paid At:"}),a.jsx("div",{className:"font-medium",children:new Date(C.paid_at).toLocaleString()})]}),C.delivered_at&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-400",children:"Delivered At:"}),a.jsx("div",{className:"font-medium",children:new Date(C.delivered_at).toLocaleString()})]})]})]}),a.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-4",children:[a.jsx("h3",{className:"font-semibold mb-3 text-red-500",children:"Payment Information"}),a.jsxs("div",{className:"text-sm space-y-2",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-400",children:"Stripe Session ID:"}),a.jsx("div",{className:"font-mono text-xs break-all",children:C.stripe_session_id})]}),C.stripe_payment_id&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-400",children:"Payment Intent ID:"}),a.jsx("div",{className:"font-mono text-xs break-all",children:C.stripe_payment_id})]})]})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[C.status==="paid"&&a.jsx("button",{onClick:()=>{U(C.id),N(null)},className:"flex-1 px-4 py-2 bg-green-600 hover:bg-green-700 rounded-lg font-medium",children:"Mark as Delivered"}),a.jsx("button",{onClick:()=>N(null),className:"flex-1 px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg font-medium",children:"Close"})]})]})]})})]})}const yDe={1:1,2:1.8,3:2.4,4:2.9},xDe={1:"Base rate",2:"+80% for 2nd person",3:"+60% for 3rd person",4:"+50% for 4th person"},Lz=[{id:"teleprompter",name:"Teleprompter",price:150},{id:"drone",name:"Drone Footage",price:300,perDay:!0},{id:"music",name:"Licensed Music",price:75},{id:"script",name:"Script Writing",price:250},{id:"skin",name:"Skin Smoothing",price:100},{id:"rush",name:"Rush Delivery",price:0,multiplier:1.5},{id:"revisions",name:"Extra Revisions",price:150,note:"3 rounds"}],Bz=[{id:"horizontal",name:"Horizontal (16:9)",icon:""},{id:"vertical",name:"Vertical (9:16)",icon:""},{id:"square",name:"Square (1:1)",icon:""}];function bDe(){const[t,e]=j.useState(1e3),[r,n]=j.useState(2),[i,s]=j.useState(1),[o,c]=j.useState(4),[u,l]=j.useState(0),[d,f]=j.useState([{id:1,name:"Main Video",length:2,format:"horizontal"}]),[A,p]=j.useState(500),[g,y]=j.useState(300),[x,w]=j.useState(200),[E,T]=j.useState("none"),[C,N]=j.useState(0),[I,U]=j.useState({}),[K,Y]=j.useState({}),re=()=>{const ne=Math.max(...d.map(ce=>ce.id),0)+1;f([...d,{id:ne,name:`Video ${ne}`,length:1,format:"horizontal"}])},se=ne=>{d.length>1&&f(d.filter(ce=>ce.id!==ne))},Ae=(ne,ce,ae)=>{f(d.map(De=>De.id===ne?{...De,[ce]:ae}:De))},we=j.useCallback(()=>{const ne=t*.4,ce=t*.6/7,ae=Math.max(0,o-1),De=ne+ae*ce,Oe=yDe[r],de=De*Oe*i,xe=u*2,je=Math.ceil(xe/50)*50,Me=u>0?je:0;let Re=0;const it=d.map((_t,wt)=>{const Tt=wt===0?A:g,Er=Math.max(0,_t.length-1)*x,pr=Tt+Er;return Re+=pr,{..._t,cost:pr}});let ht=0,Be=[],nt=1;Object.entries(I).forEach(([_t,wt])=>{if(!wt)return;const Tt=Lz.find(Er=>Er.id===_t);if(Tt){if(Tt.multiplier)nt=Tt.multiplier,Be.push("Rush (+50%)");else if(Tt.price>0){const Er=Tt.perDay?Tt.price*i:Tt.price;ht+=Er,Be.push(Tt.name)}}});let Ge=(de+Me+Re+ht)*nt,ft=0;E==="percent"&&C>0?ft=Ge*(C/100):E==="fixed"&&C>0&&(ft=C);const Dt=Ge-ft,rt=Dt/1.1,kt=Dt-rt;Y({baseRate:Math.round(ne),hourlyRate:Math.round(ce),shootTotal:Math.round(de),roundTripKm:xe,travelTotal:Me,deliverablesTotal:Math.round(Re),deliverableBreakdown:it,addonsTotal:Math.round(ht),addonsItems:Be,discountAmount:Math.round(ft),grandTotal:Math.round(Dt),exGst:Math.round(rt),gstAmount:Math.round(kt)})},[t,r,i,o,u,d,A,g,x,E,C,I]);j.useEffect(()=>{we()},[we]);const Ce=ne=>{U(ce=>({...ce,[ne]:!ce[ne]}))},ve=()=>{const ne=d.map((ae,De)=>{const Oe=Bz.find(be=>be.id===ae.format);return` ${ae.name}: ${ae.length} min ${Oe?.name||""}  $${K.deliverableBreakdown?.[De]?.cost?.toLocaleString()||0}`}).join(`
`),ce=`
FFM PROJECT QUOTE
==================

PRODUCTION
 Crew: ${r} person${r>1?"s":""}
 Duration: ${i} day${i>1?"s":""}  ${o} hours
 Production: $${K.shootTotal?.toLocaleString()}

TRAVEL
 ${K.roundTripKm>0?`${K.roundTripKm}km round trip`:"Local (no charge)"}
 Travel: $${K.travelTotal?.toLocaleString()}

DELIVERABLES (${d.length} video${d.length>1?"s":""})
${ne}
 Total Editing: $${K.deliverablesTotal?.toLocaleString()}

${K.addonsItems?.length>0?`ADD-ONS
 ${K.addonsItems.join(`
 `)}
 Add-ons: $${K.addonsTotal?.toLocaleString()}
`:""}
==================
TOTAL: $${K.grandTotal?.toLocaleString()} (Inc. GST)
Ex. GST: $${K.exGst?.toLocaleString()}

Valid for 30 days.
    `.trim();navigator.clipboard.writeText(ce).then(()=>{alert("Quote copied to clipboard!")})};return a.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-red-500",children:"Project Pricing Calculator"}),a.jsx("p",{className:"text-gray-400 mt-1",children:"Structure-based pricing for video production"})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[a.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[a.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6 border border-gray-700/50",children:[a.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[a.jsx("span",{className:"text-2xl",children:""})," Base Day Rate"]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Day Rate (AUD)"}),a.jsxs("div",{className:"relative",children:[a.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",children:"$"}),a.jsx("input",{type:"number",value:t,onChange:ne=>e(parseFloat(ne.target.value)||0),min:"100",step:"50",className:"w-full bg-gray-700 border border-gray-600 rounded-lg pl-8 pr-4 py-3 text-lg font-semibold focus:border-red-500 focus:outline-none transition"})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"All prices auto-scale from this"})]}),a.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-4",children:[a.jsx("div",{className:"text-sm text-gray-400",children:"Calculated Rates:"}),a.jsxs("div",{className:"mt-2 space-y-1 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Base Rate (40%):"}),a.jsxs("span",{className:"font-semibold text-green-400",children:["$",K.baseRate]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Hourly Rate:"}),a.jsxs("span",{className:"font-semibold text-green-400",children:["$",K.hourlyRate,"/hr"]})]})]})]})]})]}),a.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6 border border-gray-700/50",children:[a.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[a.jsx("span",{className:"text-2xl",children:""})," Crew & Shooting Time"]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Crew Size"}),a.jsxs("select",{value:r,onChange:ne=>n(parseInt(ne.target.value)),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 focus:border-red-500 focus:outline-none",children:[a.jsx("option",{value:"1",children:"1 Person"}),a.jsx("option",{value:"2",children:"2 People"}),a.jsx("option",{value:"3",children:"3 People"}),a.jsx("option",{value:"4",children:"4 People"})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:xDe[r]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Shoot Days"}),a.jsx("input",{type:"number",value:i,onChange:ne=>s(parseInt(ne.target.value)||1),min:"1",max:"30",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 focus:border-red-500 focus:outline-none"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Hours Per Day"}),a.jsx("input",{type:"number",value:o,onChange:ne=>c(parseFloat(ne.target.value)||1),min:"1",max:"12",step:"0.5",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 focus:border-red-500 focus:outline-none"})]})]})]}),a.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6 border border-gray-700/50",children:[a.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[a.jsx("span",{className:"text-2xl",children:""})," Travel"]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Distance (KM, one way)"}),a.jsx("input",{type:"number",value:u,onChange:ne=>l(parseFloat(ne.target.value)||0),min:"0",step:"10",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 focus:border-red-500 focus:outline-none"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"$50 per 50km (round trip calculated)"})]}),a.jsx("div",{className:"bg-gray-700/50 rounded-lg p-4 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-sm text-gray-400",children:"Round Trip"}),a.jsxs("div",{className:"text-2xl font-bold text-red-400",children:[K.roundTripKm||0," km"]})]})})]})]}),a.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6 border border-gray-700/50",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h2",{className:"text-xl font-semibold flex items-center gap-2",children:[a.jsx("span",{className:"text-2xl",children:""})," Deliverables"]}),a.jsx("button",{onClick:re,className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg text-sm font-medium transition",children:"+ Add Video"})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6 p-4 bg-gray-700/30 rounded-lg",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"First Video Base"}),a.jsxs("div",{className:"relative",children:[a.jsx("span",{className:"absolute left-2 top-1/2 -translate-y-1/2 text-gray-400 text-sm",children:"$"}),a.jsx("input",{type:"number",value:A,onChange:ne=>p(parseFloat(ne.target.value)||0),className:"w-full bg-gray-700 border border-gray-600 rounded-lg pl-6 pr-2 py-2 text-sm focus:border-red-500 focus:outline-none"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Additional Videos"}),a.jsxs("div",{className:"relative",children:[a.jsx("span",{className:"absolute left-2 top-1/2 -translate-y-1/2 text-gray-400 text-sm",children:"$"}),a.jsx("input",{type:"number",value:g,onChange:ne=>y(parseFloat(ne.target.value)||0),className:"w-full bg-gray-700 border border-gray-600 rounded-lg pl-6 pr-2 py-2 text-sm focus:border-red-500 focus:outline-none"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Per Extra Minute"}),a.jsxs("div",{className:"relative",children:[a.jsx("span",{className:"absolute left-2 top-1/2 -translate-y-1/2 text-gray-400 text-sm",children:"$"}),a.jsx("input",{type:"number",value:x,onChange:ne=>w(parseFloat(ne.target.value)||0),className:"w-full bg-gray-700 border border-gray-600 rounded-lg pl-6 pr-2 py-2 text-sm focus:border-red-500 focus:outline-none"})]})]})]}),a.jsx("div",{className:"space-y-3",children:d.map((ne,ce)=>a.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${ce===0?"bg-red-600 text-white":"bg-gray-600 text-gray-300"}`,children:ce===0?"Primary":`+${ce}`}),a.jsx("input",{type:"text",value:ne.name,onChange:ae=>Ae(ne.id,"name",ae.target.value),className:"bg-transparent border-b border-gray-600 focus:border-red-500 outline-none text-white font-medium",placeholder:"Video name"})]}),d.length>1&&a.jsx("button",{onClick:()=>se(ne.id),className:"text-red-400 hover:text-red-300 text-sm",children:"Remove"})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Length (min)"}),a.jsx("input",{type:"number",value:ne.length,onChange:ae=>Ae(ne.id,"length",parseInt(ae.target.value)||1),min:"1",max:"60",className:"w-full bg-gray-600 border border-gray-500 rounded px-3 py-2 text-sm focus:border-red-500 focus:outline-none"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Format"}),a.jsx("select",{value:ne.format,onChange:ae=>Ae(ne.id,"format",ae.target.value),className:"w-full bg-gray-600 border border-gray-500 rounded px-3 py-2 text-sm focus:border-red-500 focus:outline-none",children:Bz.map(ae=>a.jsxs("option",{value:ae.id,children:[ae.icon," ",ae.name]},ae.id))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Cost"}),a.jsxs("div",{className:"bg-gray-600/50 rounded px-3 py-2 text-sm font-semibold text-green-400",children:["$",K.deliverableBreakdown?.[ce]?.cost?.toLocaleString()||0]})]})]})]},ne.id))}),a.jsxs("div",{className:"mt-4 p-3 bg-gray-700/50 rounded-lg text-sm text-gray-400",children:[a.jsx("strong",{children:"Each video includes:"})," Color correction, color grading, audio mixing, lower thirds, file conversion"]})]}),a.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6 border border-gray-700/50",children:[a.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[a.jsx("span",{className:"text-2xl",children:""})," Add-Ons"]}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:Lz.map(ne=>a.jsxs("label",{className:`flex items-center gap-3 rounded-lg p-3 cursor-pointer transition ${I[ne.id]?"bg-red-600/20 border border-red-500/50":"bg-gray-700/50 hover:bg-gray-700"}`,children:[a.jsx("input",{type:"checkbox",checked:I[ne.id]||!1,onChange:()=>Ce(ne.id),className:"w-5 h-5 rounded accent-red-500"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:ne.name}),a.jsxs("div",{className:"text-sm text-gray-400",children:[ne.multiplier?"+50%":`$${ne.price}${ne.perDay?"/day":""}`,ne.note&&` (${ne.note})`]})]})]},ne.id))})]}),a.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6 border border-gray-700/50",children:[a.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[a.jsx("span",{className:"text-2xl",children:""})," Package Discount"]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Discount Type"}),a.jsxs("select",{value:E,onChange:ne=>{T(ne.target.value),ne.target.value==="none"&&N(0)},className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 focus:border-red-500 focus:outline-none",children:[a.jsx("option",{value:"none",children:"No Discount"}),a.jsx("option",{value:"percent",children:"Percentage"}),a.jsx("option",{value:"fixed",children:"Fixed Amount"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Discount Value"}),a.jsx("input",{type:"number",value:C,onChange:ne=>N(parseFloat(ne.target.value)||0),min:"0",disabled:E==="none",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 focus:border-red-500 focus:outline-none disabled:opacity-50"})]})]})]})]}),a.jsx("div",{className:"lg:col-span-1",children:a.jsxs("div",{className:"bg-gradient-to-br from-red-600 to-red-800 rounded-xl p-6 sticky top-8",children:[a.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Quote Summary"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-black/20 rounded-lg p-4",children:[a.jsx("div",{className:"text-sm text-red-200",children:"Production (Shoot)"}),a.jsxs("div",{className:"text-2xl font-bold",children:["$",K.shootTotal?.toLocaleString()]}),a.jsxs("div",{className:"text-xs text-red-300 mt-1",children:[r," crew  ",o,"h  ",i," day",i>1?"s":""]})]}),a.jsxs("div",{className:"bg-black/20 rounded-lg p-4",children:[a.jsx("div",{className:"text-sm text-red-200",children:"Travel"}),a.jsxs("div",{className:"text-2xl font-bold",children:["$",K.travelTotal?.toLocaleString()]}),a.jsx("div",{className:"text-xs text-red-300 mt-1",children:u>0?`${K.roundTripKm}km round trip`:"Local (no charge)"})]}),a.jsxs("div",{className:"bg-black/20 rounded-lg p-4",children:[a.jsxs("div",{className:"text-sm text-red-200",children:["Deliverables (",d.length," video",d.length>1?"s":"",")"]}),a.jsxs("div",{className:"text-2xl font-bold",children:["$",K.deliverablesTotal?.toLocaleString()]}),a.jsx("div",{className:"text-xs text-red-300 mt-1 space-y-0.5",children:K.deliverableBreakdown?.map((ne,ce)=>a.jsxs("div",{children:[ne.name,": ",ne.length,"min  $",ne.cost?.toLocaleString()]},ce))})]}),a.jsxs("div",{className:"bg-black/20 rounded-lg p-4",children:[a.jsx("div",{className:"text-sm text-red-200",children:"Add-Ons"}),a.jsxs("div",{className:"text-2xl font-bold",children:["$",K.addonsTotal?.toLocaleString()]}),a.jsx("div",{className:"text-xs text-red-300 mt-1",children:K.addonsItems?.length>0?K.addonsItems.join(", "):"None selected"})]}),K.discountAmount>0&&a.jsxs("div",{className:"bg-black/20 rounded-lg p-4",children:[a.jsx("div",{className:"text-sm text-red-200",children:"Discount"}),a.jsxs("div",{className:"text-2xl font-bold text-green-400",children:["-$",K.discountAmount?.toLocaleString()]})]})]}),a.jsx("div",{className:"mt-6 pt-6 border-t border-red-400/30",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-red-200",children:"TOTAL QUOTE"}),a.jsx("div",{className:"text-xs text-red-300",children:"Inc. GST"})]}),a.jsxs("div",{className:"text-4xl font-bold",children:["$",K.grandTotal?.toLocaleString()]})]})}),a.jsxs("div",{className:"mt-6 pt-4 border-t border-red-400/30",children:[a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-red-200",children:"Ex. GST:"}),a.jsxs("span",{className:"font-semibold",children:["$",K.exGst?.toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between text-sm mt-1",children:[a.jsx("span",{className:"text-red-200",children:"GST (10%):"}),a.jsxs("span",{className:"font-semibold",children:["$",K.gstAmount?.toLocaleString()]})]})]}),a.jsx("div",{className:"mt-6",children:a.jsx("button",{onClick:ve,className:"w-full bg-white text-red-600 font-semibold py-3 rounded-lg hover:bg-red-100 transition",children:" Copy Quote Text"})})]})})]}),a.jsx("div",{className:"mt-12 text-center text-gray-500 text-sm",children:a.jsx("p",{children:"Pricing based on structure-based methodology. All prices in AUD."})})]})}function wDe({event:t,crew:e,equipment:r,onClose:n}){if(!t)return null;const i=f=>(f||[]).map(A=>e.find(p=>p.id===A)).filter(Boolean),s=f=>(f||[]).map(A=>r.find(p=>p.id===A)).filter(Boolean);function o(f){return new Date(f).toLocaleDateString("en-AU",{weekday:"long",day:"numeric",month:"long",year:"numeric"})}const c=i(t.crew_ids),u=s(t.equipment_ids),l=u.reduce((f,A)=>{const p=A.category||"Other";return f[p]||(f[p]=[]),f[p].push(A),f},{}),d={confirmed:"#10b981",tentative:"#f59e0b",completed:"#6b7280",cancelled:"#ef4444"};return a.jsxs("div",{className:"fixed inset-0 bg-black/80 flex items-start justify-center z-50 p-4 overflow-y-auto",children:[a.jsxs("div",{className:"print:hidden fixed top-4 right-4 flex items-center gap-3 z-10",children:[a.jsxs("button",{onClick:()=>window.print(),className:"px-4 py-2 bg-orange-600 hover:bg-orange-700 rounded-lg text-white font-medium flex items-center gap-2",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),"Print Brief"]}),a.jsx("button",{onClick:n,className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg text-white",children:"Close"})]}),a.jsxs("div",{id:"event-brief",className:"bg-white text-gray-900 w-full max-w-3xl my-4 rounded-xl overflow-hidden print:m-0 print:rounded-none print:shadow-none",style:{fontFamily:"system-ui, -apple-system, sans-serif"},children:[a.jsx("div",{style:{background:"linear-gradient(135deg, #1a1a2e 0%, #16213e 100%)",color:"white",padding:"32px"},children:a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",gap:"16px"},children:[a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:"12px",textTransform:"uppercase",letterSpacing:"2px",color:"#e5383b",fontWeight:"700",marginBottom:"8px"},children:"FIT FOCUS MEDIA  PRODUCTION BRIEF"}),a.jsx("h1",{style:{fontSize:"28px",fontWeight:"800",margin:"0 0 8px"},children:t.name}),a.jsx("p",{style:{fontSize:"16px",color:"#e5383b",margin:"0"},children:t.client})]}),a.jsx("div",{style:{textAlign:"right"},children:a.jsx("span",{style:{background:d[t.status]||"#6b7280",color:"white",padding:"4px 12px",borderRadius:"20px",fontSize:"12px",fontWeight:"700",textTransform:"uppercase",letterSpacing:"1px"},children:t.status})})]})}),a.jsxs("div",{style:{padding:"32px"},children:[a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"24px",marginBottom:"32px"},children:[a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:"10px",textTransform:"uppercase",letterSpacing:"1px",color:"#9ca3af",marginBottom:"6px"},children:"DATE"}),a.jsx("div",{style:{fontSize:"15px",fontWeight:"600",color:"#111827"},children:o(t.date)})]}),a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:"10px",textTransform:"uppercase",letterSpacing:"1px",color:"#9ca3af",marginBottom:"6px"},children:"LOCATION"}),a.jsx("div",{style:{fontSize:"15px",fontWeight:"600",color:"#111827"},children:t.location||"TBC"})]}),a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:"10px",textTransform:"uppercase",letterSpacing:"1px",color:"#9ca3af",marginBottom:"6px"},children:"CLIENT"}),a.jsx("div",{style:{fontSize:"15px",fontWeight:"600",color:"#111827"},children:t.client})]})]}),a.jsx("div",{style:{borderTop:"1px solid #e5e7eb",marginBottom:"28px"}}),a.jsxs("div",{style:{marginBottom:"28px"},children:[a.jsxs("h2",{style:{fontSize:"14px",fontWeight:"700",textTransform:"uppercase",letterSpacing:"1px",color:"#374151",marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"},children:[" Crew (",c.length,")"]}),c.length>0?a.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[a.jsx("thead",{children:a.jsxs("tr",{style:{background:"#f9fafb"},children:[a.jsx("th",{style:{padding:"8px 12px",textAlign:"left",fontSize:"11px",color:"#6b7280",textTransform:"uppercase",borderBottom:"1px solid #e5e7eb"},children:"Name"}),a.jsx("th",{style:{padding:"8px 12px",textAlign:"left",fontSize:"11px",color:"#6b7280",textTransform:"uppercase",borderBottom:"1px solid #e5e7eb"},children:"Role"}),a.jsx("th",{style:{padding:"8px 12px",textAlign:"left",fontSize:"11px",color:"#6b7280",textTransform:"uppercase",borderBottom:"1px solid #e5e7eb"},children:"Phone"}),a.jsx("th",{style:{padding:"8px 12px",textAlign:"left",fontSize:"11px",color:"#6b7280",textTransform:"uppercase",borderBottom:"1px solid #e5e7eb"},children:"Email"})]})}),a.jsx("tbody",{children:c.map((f,A)=>a.jsxs("tr",{style:{background:A%2===0?"white":"#f9fafb"},children:[a.jsx("td",{style:{padding:"10px 12px",fontWeight:"600",fontSize:"14px",borderBottom:"1px solid #f3f4f6"},children:f.name}),a.jsx("td",{style:{padding:"10px 12px",fontSize:"13px",color:"#6b7280",borderBottom:"1px solid #f3f4f6"},children:f.role||""}),a.jsx("td",{style:{padding:"10px 12px",fontSize:"13px",borderBottom:"1px solid #f3f4f6"},children:f.phone||""}),a.jsx("td",{style:{padding:"10px 12px",fontSize:"13px",borderBottom:"1px solid #f3f4f6"},children:f.email||""})]},f.id))})]}):a.jsx("p",{style:{color:"#9ca3af",fontSize:"14px",fontStyle:"italic"},children:"No crew assigned yet. Assign crew from the Crew & Logistics portal."})]}),u.length>0&&a.jsxs("div",{style:{marginBottom:"28px"},children:[a.jsxs("h2",{style:{fontSize:"14px",fontWeight:"700",textTransform:"uppercase",letterSpacing:"1px",color:"#374151",marginBottom:"12px"},children:[" Equipment (",u.length," items)"]}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px"},children:Object.entries(l).map(([f,A])=>a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:"11px",fontWeight:"700",textTransform:"uppercase",letterSpacing:"1px",color:"#9ca3af",marginBottom:"6px"},children:f}),A.map(p=>a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 0",borderBottom:"1px solid #f3f4f6",fontSize:"13px"},children:[a.jsx("span",{style:{color:"#111827"},children:p.name}),a.jsxs("span",{style:{color:"#6b7280"},children:["",p.quantity]})]},p.id))]},f))})]}),(t.flight_links?.length||0)+(t.accommodation_links?.length||0)+(t.rental_links?.length||0)>0&&a.jsxs("div",{style:{marginBottom:"28px"},children:[a.jsx("h2",{style:{fontSize:"14px",fontWeight:"700",textTransform:"uppercase",letterSpacing:"1px",color:"#374151",marginBottom:"12px"},children:" Travel & Logistics"}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"16px"},children:[t.flight_links?.length>0&&a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:"11px",fontWeight:"700",color:"#9ca3af",textTransform:"uppercase",marginBottom:"6px"},children:"Flights"}),t.flight_links.map((f,A)=>a.jsxs("a",{href:f,style:{display:"block",color:"#2563eb",fontSize:"13px",marginBottom:"4px",wordBreak:"break-all"},children:[" Flight ",A+1]},A))]}),t.accommodation_links?.length>0&&a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:"11px",fontWeight:"700",color:"#9ca3af",textTransform:"uppercase",marginBottom:"6px"},children:"Accommodation"}),t.accommodation_links.map((f,A)=>a.jsxs("a",{href:f,style:{display:"block",color:"#2563eb",fontSize:"13px",marginBottom:"4px",wordBreak:"break-all"},children:[" Booking ",A+1]},A))]}),t.rental_links?.length>0&&a.jsxs("div",{children:[a.jsx("div",{style:{fontSize:"11px",fontWeight:"700",color:"#9ca3af",textTransform:"uppercase",marginBottom:"6px"},children:"Rental Cars"}),t.rental_links.map((f,A)=>a.jsxs("a",{href:f,style:{display:"block",color:"#2563eb",fontSize:"13px",marginBottom:"4px",wordBreak:"break-all"},children:[" Rental ",A+1]},A))]})]})]}),t.notes&&a.jsxs("div",{style:{marginBottom:"28px"},children:[a.jsx("h2",{style:{fontSize:"14px",fontWeight:"700",textTransform:"uppercase",letterSpacing:"1px",color:"#374151",marginBottom:"12px"},children:" Notes"}),a.jsx("div",{style:{background:"#f9fafb",borderLeft:"3px solid #e5383b",padding:"12px 16px",borderRadius:"4px",fontSize:"14px",lineHeight:"1.6",color:"#374151"},children:t.notes})]}),a.jsxs("div",{style:{marginBottom:"20px"},children:[a.jsx("h2",{style:{fontSize:"14px",fontWeight:"700",textTransform:"uppercase",letterSpacing:"1px",color:"#374151",marginBottom:"12px"},children:" Shot List / Run Sheet"}),a.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[a.jsx("thead",{children:a.jsxs("tr",{style:{background:"#f9fafb"},children:[a.jsx("th",{style:{width:"60px",padding:"8px 12px",textAlign:"left",fontSize:"11px",color:"#6b7280",textTransform:"uppercase",borderBottom:"1px solid #e5e7eb"},children:"#"}),a.jsx("th",{style:{width:"80px",padding:"8px 12px",textAlign:"left",fontSize:"11px",color:"#6b7280",textTransform:"uppercase",borderBottom:"1px solid #e5e7eb"},children:"Time"}),a.jsx("th",{style:{padding:"8px 12px",textAlign:"left",fontSize:"11px",color:"#6b7280",textTransform:"uppercase",borderBottom:"1px solid #e5e7eb"},children:"Shot / Activity"}),a.jsx("th",{style:{width:"80px",padding:"8px 12px",textAlign:"left",fontSize:"11px",color:"#6b7280",textTransform:"uppercase",borderBottom:"1px solid #e5e7eb"},children:"Done"})]})}),a.jsx("tbody",{children:[1,2,3,4,5,6,7,8].map(f=>a.jsxs("tr",{style:{borderBottom:"1px solid #f3f4f6"},children:[a.jsx("td",{style:{padding:"12px",color:"#9ca3af",fontSize:"13px"},children:f}),a.jsx("td",{style:{padding:"12px"}}),a.jsx("td",{style:{padding:"12px"}}),a.jsx("td",{style:{padding:"12px",textAlign:"center"},children:""})]},f))})]})]}),a.jsxs("div",{style:{borderTop:"1px solid #e5e7eb",paddingTop:"16px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a.jsxs("div",{style:{fontSize:"11px",color:"#9ca3af"},children:["Generated by FIT FOCUS MEDIA Portal  ",new Date().toLocaleDateString("en-AU",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})]}),a.jsx("div",{style:{fontSize:"11px",color:"#9ca3af"},children:"fitfocusmedia.com.au"})]})]})]})]})}const I5=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function g1(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function GM(t){return"nodeType"in t}function wh(t){var e,r;return t?g1(t)?t:GM(t)&&(e=(r=t.ownerDocument)==null?void 0:r.defaultView)!=null?e:window:window}function WM(t){const{Document:e}=wh(t);return t instanceof e}function o_(t){return g1(t)?!1:t instanceof wh(t).HTMLElement}function qre(t){return t instanceof wh(t).SVGElement}function v1(t){return t?g1(t)?t.document:GM(t)?WM(t)?t:o_(t)||qre(t)?t.ownerDocument:document:document:document}const tg=I5?j.useLayoutEffect:j.useEffect;function L5(t){const e=j.useRef(t);return tg(()=>{e.current=t}),j.useCallback(function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return e.current==null?void 0:e.current(...n)},[])}function EDe(){const t=j.useRef(null),e=j.useCallback((n,i)=>{t.current=setInterval(n,i)},[]),r=j.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,r]}function WE(t,e){e===void 0&&(e=[t]);const r=j.useRef(t);return tg(()=>{r.current!==t&&(r.current=t)},e),r}function l_(t,e){const r=j.useRef();return j.useMemo(()=>{const n=t(r.current);return r.current=n,n},[...e])}function Pj(t){const e=L5(t),r=j.useRef(null),n=j.useCallback(i=>{i!==r.current&&e?.(i,r.current),r.current=i},[]);return[r,n]}function Oj(t){const e=j.useRef();return j.useEffect(()=>{e.current=t},[t]),e.current}let n4={};function B5(t,e){return j.useMemo(()=>{if(e)return e;const r=n4[t]==null?0:n4[t]+1;return n4[t]=r,t+"-"+r},[t,e])}function Xre(t){return function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return n.reduce((s,o)=>{const c=Object.entries(o);for(const[u,l]of c){const d=s[u];d!=null&&(s[u]=d+t*l)}return s},{...e})}}const fb=Xre(1),Rj=Xre(-1);function _De(t){return"clientX"in t&&"clientY"in t}function YM(t){if(!t)return!1;const{KeyboardEvent:e}=wh(t.target);return e&&t instanceof e}function SDe(t){if(!t)return!1;const{TouchEvent:e}=wh(t.target);return e&&t instanceof e}function Dj(t){if(SDe(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:r}=t.touches[0];return{x:e,y:r}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:r}=t.changedTouches[0];return{x:e,y:r}}}return _De(t)?{x:t.clientX,y:t.clientY}:null}const YE=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:r}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:r}=t;return"scaleX("+e+") scaleY("+r+")"}},Transform:{toString(t){if(t)return[YE.Translate.toString(t),YE.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:r,easing:n}=t;return e+" "+r+"ms "+n}}}),Pz="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function TDe(t){return t.matches(Pz)?t:t.querySelector(Pz)}const CDe={display:"none"};function jDe(t){let{id:e,value:r}=t;return So.createElement("div",{id:e,style:CDe},r)}function NDe(t){let{id:e,announcement:r,ariaLiveType:n="assertive"}=t;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return So.createElement("div",{id:e,style:i,role:"status","aria-live":n,"aria-atomic":!0},r)}function kDe(){const[t,e]=j.useState("");return{announce:j.useCallback(n=>{n!=null&&e(n)},[]),announcement:t}}const Zre=j.createContext(null);function IDe(t){const e=j.useContext(Zre);j.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function LDe(){const[t]=j.useState(()=>new Set),e=j.useCallback(n=>(t.add(n),()=>t.delete(n)),[t]);return[j.useCallback(n=>{let{type:i,event:s}=n;t.forEach(o=>{var c;return(c=o[i])==null?void 0:c.call(o,s)})},[t]),e]}const BDe={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},PDe={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:r}=t;return r?"Draggable item "+e.id+" was moved over droppable area "+r.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:r}=t;return r?"Draggable item "+e.id+" was dropped over droppable area "+r.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function ODe(t){let{announcements:e=PDe,container:r,hiddenTextDescribedById:n,screenReaderInstructions:i=BDe}=t;const{announce:s,announcement:o}=kDe(),c=B5("DndLiveRegion"),[u,l]=j.useState(!1);if(j.useEffect(()=>{l(!0)},[]),IDe(j.useMemo(()=>({onDragStart(f){let{active:A}=f;s(e.onDragStart({active:A}))},onDragMove(f){let{active:A,over:p}=f;e.onDragMove&&s(e.onDragMove({active:A,over:p}))},onDragOver(f){let{active:A,over:p}=f;s(e.onDragOver({active:A,over:p}))},onDragEnd(f){let{active:A,over:p}=f;s(e.onDragEnd({active:A,over:p}))},onDragCancel(f){let{active:A,over:p}=f;s(e.onDragCancel({active:A,over:p}))}}),[s,e])),!u)return null;const d=So.createElement(So.Fragment,null,So.createElement(jDe,{id:n,value:i.draggable}),So.createElement(NDe,{id:c,announcement:o}));return r?v0.createPortal(d,r):d}var Mu;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(Mu||(Mu={}));function Mj(){}function i4(t,e){return j.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function RDe(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return j.useMemo(()=>[...e].filter(n=>n!=null),[...e])}const FA=Object.freeze({x:0,y:0});function DDe(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function MDe(t,e){const r=Dj(t);if(!r)return"0 0";const n={x:(r.x-e.left)/e.width*100,y:(r.y-e.top)/e.height*100};return n.x+"% "+n.y+"%"}function FDe(t,e){let{data:{value:r}}=t,{data:{value:n}}=e;return r-n}function UDe(t,e){let{data:{value:r}}=t,{data:{value:n}}=e;return n-r}function $De(t,e){if(!t||t.length===0)return null;const[r]=t;return r[e]}function Oz(t,e,r){return e===void 0&&(e=t.left),r===void 0&&(r=t.top),{x:e+t.width*.5,y:r+t.height*.5}}const HDe=t=>{let{collisionRect:e,droppableRects:r,droppableContainers:n}=t;const i=Oz(e,e.left,e.top),s=[];for(const o of n){const{id:c}=o,u=r.get(c);if(u){const l=DDe(Oz(u),i);s.push({id:c,data:{droppableContainer:o,value:l}})}}return s.sort(FDe)};function QDe(t,e){const r=Math.max(e.top,t.top),n=Math.max(e.left,t.left),i=Math.min(e.left+e.width,t.left+t.width),s=Math.min(e.top+e.height,t.top+t.height),o=i-n,c=s-r;if(n<i&&r<s){const u=e.width*e.height,l=t.width*t.height,d=o*c,f=d/(u+l-d);return Number(f.toFixed(4))}return 0}const VDe=t=>{let{collisionRect:e,droppableRects:r,droppableContainers:n}=t;const i=[];for(const s of n){const{id:o}=s,c=r.get(o);if(c){const u=QDe(c,e);u>0&&i.push({id:o,data:{droppableContainer:s,value:u}})}}return i.sort(UDe)};function zDe(t,e,r){return{...t,scaleX:e&&r?e.width/r.width:1,scaleY:e&&r?e.height/r.height:1}}function Jre(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:FA}function KDe(t){return function(r){for(var n=arguments.length,i=new Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];return i.reduce((o,c)=>({...o,top:o.top+t*c.y,bottom:o.bottom+t*c.y,left:o.left+t*c.x,right:o.right+t*c.x}),{...r})}}const GDe=KDe(1);function ene(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function WDe(t,e,r){const n=ene(e);if(!n)return t;const{scaleX:i,scaleY:s,x:o,y:c}=n,u=t.left-o-(1-i)*parseFloat(r),l=t.top-c-(1-s)*parseFloat(r.slice(r.indexOf(" ")+1)),d=i?t.width/i:t.width,f=s?t.height/s:t.height;return{width:d,height:f,top:l,right:u+d,bottom:l+f,left:u}}const YDe={ignoreTransform:!1};function c_(t,e){e===void 0&&(e=YDe);let r=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:l,transformOrigin:d}=wh(t).getComputedStyle(t);l&&(r=WDe(r,l,d))}const{top:n,left:i,width:s,height:o,bottom:c,right:u}=r;return{top:n,left:i,width:s,height:o,bottom:c,right:u}}function Rz(t){return c_(t,{ignoreTransform:!0})}function qDe(t){const e=t.innerWidth,r=t.innerHeight;return{top:0,left:0,right:e,bottom:r,width:e,height:r}}function XDe(t,e){return e===void 0&&(e=wh(t).getComputedStyle(t)),e.position==="fixed"}function ZDe(t,e){e===void 0&&(e=wh(t).getComputedStyle(t));const r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const s=e[i];return typeof s=="string"?r.test(s):!1})}function qM(t,e){const r=[];function n(i){if(e!=null&&r.length>=e||!i)return r;if(WM(i)&&i.scrollingElement!=null&&!r.includes(i.scrollingElement))return r.push(i.scrollingElement),r;if(!o_(i)||qre(i)||r.includes(i))return r;const s=wh(t).getComputedStyle(i);return i!==t&&ZDe(i,s)&&r.push(i),XDe(i,s)?r:n(i.parentNode)}return t?n(t):r}function tne(t){const[e]=qM(t,1);return e??null}function s4(t){return!I5||!t?null:g1(t)?t:GM(t)?WM(t)||t===v1(t).scrollingElement?window:o_(t)?t:null:null}function rne(t){return g1(t)?t.scrollX:t.scrollLeft}function nne(t){return g1(t)?t.scrollY:t.scrollTop}function XP(t){return{x:rne(t),y:nne(t)}}var hd;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(hd||(hd={}));function ine(t){return!I5||!t?!1:t===document.scrollingElement}function sne(t){const e={x:0,y:0},r=ine(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},n={x:t.scrollWidth-r.width,y:t.scrollHeight-r.height},i=t.scrollTop<=e.y,s=t.scrollLeft<=e.x,o=t.scrollTop>=n.y,c=t.scrollLeft>=n.x;return{isTop:i,isLeft:s,isBottom:o,isRight:c,maxScroll:n,minScroll:e}}const JDe={x:.2,y:.2};function eMe(t,e,r,n,i){let{top:s,left:o,right:c,bottom:u}=r;n===void 0&&(n=10),i===void 0&&(i=JDe);const{isTop:l,isBottom:d,isLeft:f,isRight:A}=sne(t),p={x:0,y:0},g={x:0,y:0},y={height:e.height*i.y,width:e.width*i.x};return!l&&s<=e.top+y.height?(p.y=hd.Backward,g.y=n*Math.abs((e.top+y.height-s)/y.height)):!d&&u>=e.bottom-y.height&&(p.y=hd.Forward,g.y=n*Math.abs((e.bottom-y.height-u)/y.height)),!A&&c>=e.right-y.width?(p.x=hd.Forward,g.x=n*Math.abs((e.right-y.width-c)/y.width)):!f&&o<=e.left+y.width&&(p.x=hd.Backward,g.x=n*Math.abs((e.left+y.width-o)/y.width)),{direction:p,speed:g}}function tMe(t){if(t===document.scrollingElement){const{innerWidth:s,innerHeight:o}=window;return{top:0,left:0,right:s,bottom:o,width:s,height:o}}const{top:e,left:r,right:n,bottom:i}=t.getBoundingClientRect();return{top:e,left:r,right:n,bottom:i,width:t.clientWidth,height:t.clientHeight}}function ane(t){return t.reduce((e,r)=>fb(e,XP(r)),FA)}function rMe(t){return t.reduce((e,r)=>e+rne(r),0)}function nMe(t){return t.reduce((e,r)=>e+nne(r),0)}function one(t,e){if(e===void 0&&(e=c_),!t)return;const{top:r,left:n,bottom:i,right:s}=e(t);tne(t)&&(i<=0||s<=0||r>=window.innerHeight||n>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const iMe=[["x",["left","right"],rMe],["y",["top","bottom"],nMe]];class XM{constructor(e,r){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const n=qM(r),i=ane(n);this.rect={...e},this.width=e.width,this.height=e.height;for(const[s,o,c]of iMe)for(const u of o)Object.defineProperty(this,u,{get:()=>{const l=c(n),d=i[s]-l;return this.rect[u]+d},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class eE{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(r=>{var n;return(n=this.target)==null?void 0:n.removeEventListener(...r)})},this.target=e}add(e,r,n){var i;(i=this.target)==null||i.addEventListener(e,r,n),this.listeners.push([e,r,n])}}function sMe(t){const{EventTarget:e}=wh(t);return t instanceof e?t:v1(t)}function a4(t,e){const r=Math.abs(t.x),n=Math.abs(t.y);return typeof e=="number"?Math.sqrt(r**2+n**2)>e:"x"in e&&"y"in e?r>e.x&&n>e.y:"x"in e?r>e.x:"y"in e?n>e.y:!1}var Vf;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(Vf||(Vf={}));function Dz(t){t.preventDefault()}function aMe(t){t.stopPropagation()}var ol;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(ol||(ol={}));const lne={start:[ol.Space,ol.Enter],cancel:[ol.Esc],end:[ol.Space,ol.Enter,ol.Tab]},oMe=(t,e)=>{let{currentCoordinates:r}=e;switch(t.code){case ol.Right:return{...r,x:r.x+25};case ol.Left:return{...r,x:r.x-25};case ol.Down:return{...r,y:r.y+25};case ol.Up:return{...r,y:r.y-25}}};class ZM{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:r}}=e;this.props=e,this.listeners=new eE(v1(r)),this.windowListeners=new eE(wh(r)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Vf.Resize,this.handleCancel),this.windowListeners.add(Vf.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Vf.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:r}=this.props,n=e.node.current;n&&one(n),r(FA)}handleKeyDown(e){if(YM(e)){const{active:r,context:n,options:i}=this.props,{keyboardCodes:s=lne,coordinateGetter:o=oMe,scrollBehavior:c="smooth"}=i,{code:u}=e;if(s.end.includes(u)){this.handleEnd(e);return}if(s.cancel.includes(u)){this.handleCancel(e);return}const{collisionRect:l}=n.current,d=l?{x:l.left,y:l.top}:FA;this.referenceCoordinates||(this.referenceCoordinates=d);const f=o(e,{active:r,context:n.current,currentCoordinates:d});if(f){const A=Rj(f,d),p={x:0,y:0},{scrollableAncestors:g}=n.current;for(const y of g){const x=e.code,{isTop:w,isRight:E,isLeft:T,isBottom:C,maxScroll:N,minScroll:I}=sne(y),U=tMe(y),K={x:Math.min(x===ol.Right?U.right-U.width/2:U.right,Math.max(x===ol.Right?U.left:U.left+U.width/2,f.x)),y:Math.min(x===ol.Down?U.bottom-U.height/2:U.bottom,Math.max(x===ol.Down?U.top:U.top+U.height/2,f.y))},Y=x===ol.Right&&!E||x===ol.Left&&!T,re=x===ol.Down&&!C||x===ol.Up&&!w;if(Y&&K.x!==f.x){const se=y.scrollLeft+A.x,Ae=x===ol.Right&&se<=N.x||x===ol.Left&&se>=I.x;if(Ae&&!A.y){y.scrollTo({left:se,behavior:c});return}Ae?p.x=y.scrollLeft-se:p.x=x===ol.Right?y.scrollLeft-N.x:y.scrollLeft-I.x,p.x&&y.scrollBy({left:-p.x,behavior:c});break}else if(re&&K.y!==f.y){const se=y.scrollTop+A.y,Ae=x===ol.Down&&se<=N.y||x===ol.Up&&se>=I.y;if(Ae&&!A.x){y.scrollTo({top:se,behavior:c});return}Ae?p.y=y.scrollTop-se:p.y=x===ol.Down?y.scrollTop-N.y:y.scrollTop-I.y,p.y&&y.scrollBy({top:-p.y,behavior:c});break}}this.handleMove(e,fb(Rj(f,this.referenceCoordinates),p))}}}handleMove(e,r){const{onMove:n}=this.props;e.preventDefault(),n(r)}handleEnd(e){const{onEnd:r}=this.props;e.preventDefault(),this.detach(),r()}handleCancel(e){const{onCancel:r}=this.props;e.preventDefault(),this.detach(),r()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}ZM.activators=[{eventName:"onKeyDown",handler:(t,e,r)=>{let{keyboardCodes:n=lne,onActivation:i}=e,{active:s}=r;const{code:o}=t.nativeEvent;if(n.start.includes(o)){const c=s.activatorNode.current;return c&&t.target!==c?!1:(t.preventDefault(),i?.({event:t.nativeEvent}),!0)}return!1}}];function Mz(t){return!!(t&&"distance"in t)}function Fz(t){return!!(t&&"delay"in t)}class JM{constructor(e,r,n){var i;n===void 0&&(n=sMe(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=r;const{event:s}=e,{target:o}=s;this.props=e,this.events=r,this.document=v1(o),this.documentListeners=new eE(this.document),this.listeners=new eE(n),this.windowListeners=new eE(wh(o)),this.initialCoordinates=(i=Dj(s))!=null?i:FA,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:r,bypassActivationConstraint:n}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Vf.Resize,this.handleCancel),this.windowListeners.add(Vf.DragStart,Dz),this.windowListeners.add(Vf.VisibilityChange,this.handleCancel),this.windowListeners.add(Vf.ContextMenu,Dz),this.documentListeners.add(Vf.Keydown,this.handleKeydown),r){if(n!=null&&n({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Fz(r)){this.timeoutId=setTimeout(this.handleStart,r.delay),this.handlePending(r);return}if(Mz(r)){this.handlePending(r);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,r){const{active:n,onPending:i}=this.props;i(n,e,this.initialCoordinates,r)}handleStart(){const{initialCoordinates:e}=this,{onStart:r}=this.props;e&&(this.activated=!0,this.documentListeners.add(Vf.Click,aMe,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Vf.SelectionChange,this.removeTextSelection),r(e))}handleMove(e){var r;const{activated:n,initialCoordinates:i,props:s}=this,{onMove:o,options:{activationConstraint:c}}=s;if(!i)return;const u=(r=Dj(e))!=null?r:FA,l=Rj(i,u);if(!n&&c){if(Mz(c)){if(c.tolerance!=null&&a4(l,c.tolerance))return this.handleCancel();if(a4(l,c.distance))return this.handleStart()}if(Fz(c)&&a4(l,c.tolerance))return this.handleCancel();this.handlePending(c,l);return}e.cancelable&&e.preventDefault(),o(u)}handleEnd(){const{onAbort:e,onEnd:r}=this.props;this.detach(),this.activated||e(this.props.active),r()}handleCancel(){const{onAbort:e,onCancel:r}=this.props;this.detach(),this.activated||e(this.props.active),r()}handleKeydown(e){e.code===ol.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const lMe={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class eF extends JM{constructor(e){const{event:r}=e,n=v1(r.target);super(e,lMe,n)}}eF.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:r}=t,{onActivation:n}=e;return!r.isPrimary||r.button!==0?!1:(n?.({event:r}),!0)}}];const cMe={move:{name:"mousemove"},end:{name:"mouseup"}};var ZP;(function(t){t[t.RightClick=2]="RightClick"})(ZP||(ZP={}));class uMe extends JM{constructor(e){super(e,cMe,v1(e.event.target))}}uMe.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:r}=t,{onActivation:n}=e;return r.button===ZP.RightClick?!1:(n?.({event:r}),!0)}}];const o4={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class cne extends JM{constructor(e){super(e,o4)}static setup(){return window.addEventListener(o4.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(o4.move.name,e)};function e(){}}}cne.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:r}=t,{onActivation:n}=e;const{touches:i}=r;return i.length>1?!1:(n?.({event:r}),!0)}}];var tE;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(tE||(tE={}));var Fj;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(Fj||(Fj={}));function dMe(t){let{acceleration:e,activator:r=tE.Pointer,canScroll:n,draggingRect:i,enabled:s,interval:o=5,order:c=Fj.TreeOrder,pointerCoordinates:u,scrollableAncestors:l,scrollableAncestorRects:d,delta:f,threshold:A}=t;const p=fMe({delta:f,disabled:!s}),[g,y]=EDe(),x=j.useRef({x:0,y:0}),w=j.useRef({x:0,y:0}),E=j.useMemo(()=>{switch(r){case tE.Pointer:return u?{top:u.y,bottom:u.y,left:u.x,right:u.x}:null;case tE.DraggableRect:return i}},[r,i,u]),T=j.useRef(null),C=j.useCallback(()=>{const I=T.current;if(!I)return;const U=x.current.x*w.current.x,K=x.current.y*w.current.y;I.scrollBy(U,K)},[]),N=j.useMemo(()=>c===Fj.TreeOrder?[...l].reverse():l,[c,l]);j.useEffect(()=>{if(!s||!l.length||!E){y();return}for(const I of N){if(n?.(I)===!1)continue;const U=l.indexOf(I),K=d[U];if(!K)continue;const{direction:Y,speed:re}=eMe(I,K,E,e,A);for(const se of["x","y"])p[se][Y[se]]||(re[se]=0,Y[se]=0);if(re.x>0||re.y>0){y(),T.current=I,g(C,o),x.current=re,w.current=Y;return}}x.current={x:0,y:0},w.current={x:0,y:0},y()},[e,C,n,y,s,o,JSON.stringify(E),JSON.stringify(p),g,l,N,d,JSON.stringify(A)])}const hMe={x:{[hd.Backward]:!1,[hd.Forward]:!1},y:{[hd.Backward]:!1,[hd.Forward]:!1}};function fMe(t){let{delta:e,disabled:r}=t;const n=Oj(e);return l_(i=>{if(r||!n||!i)return hMe;const s={x:Math.sign(e.x-n.x),y:Math.sign(e.y-n.y)};return{x:{[hd.Backward]:i.x[hd.Backward]||s.x===-1,[hd.Forward]:i.x[hd.Forward]||s.x===1},y:{[hd.Backward]:i.y[hd.Backward]||s.y===-1,[hd.Forward]:i.y[hd.Forward]||s.y===1}}},[r,e,n])}function AMe(t,e){const r=e!=null?t.get(e):void 0,n=r?r.node.current:null;return l_(i=>{var s;return e==null?null:(s=n??i)!=null?s:null},[n,e])}function mMe(t,e){return j.useMemo(()=>t.reduce((r,n)=>{const{sensor:i}=n,s=i.activators.map(o=>({eventName:o.eventName,handler:e(o.handler,n)}));return[...r,...s]},[]),[t,e])}var qE;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(qE||(qE={}));var JP;(function(t){t.Optimized="optimized"})(JP||(JP={}));const Uz=new Map;function pMe(t,e){let{dragging:r,dependencies:n,config:i}=e;const[s,o]=j.useState(null),{frequency:c,measure:u,strategy:l}=i,d=j.useRef(t),f=x(),A=WE(f),p=j.useCallback(function(w){w===void 0&&(w=[]),!A.current&&o(E=>E===null?w:E.concat(w.filter(T=>!E.includes(T))))},[A]),g=j.useRef(null),y=l_(w=>{if(f&&!r)return Uz;if(!w||w===Uz||d.current!==t||s!=null){const E=new Map;for(let T of t){if(!T)continue;if(s&&s.length>0&&!s.includes(T.id)&&T.rect.current){E.set(T.id,T.rect.current);continue}const C=T.node.current,N=C?new XM(u(C),C):null;T.rect.current=N,N&&E.set(T.id,N)}return E}return w},[t,s,r,f,u]);return j.useEffect(()=>{d.current=t},[t]),j.useEffect(()=>{f||p()},[r,f]),j.useEffect(()=>{s&&s.length>0&&o(null)},[JSON.stringify(s)]),j.useEffect(()=>{f||typeof c!="number"||g.current!==null||(g.current=setTimeout(()=>{p(),g.current=null},c))},[c,f,p,...n]),{droppableRects:y,measureDroppableContainers:p,measuringScheduled:s!=null};function x(){switch(l){case qE.Always:return!1;case qE.BeforeDragging:return r;default:return!r}}}function tF(t,e){return l_(r=>t?r||(typeof e=="function"?e(t):t):null,[e,t])}function gMe(t,e){return tF(t,e)}function vMe(t){let{callback:e,disabled:r}=t;const n=L5(e),i=j.useMemo(()=>{if(r||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:s}=window;return new s(n)},[n,r]);return j.useEffect(()=>()=>i?.disconnect(),[i]),i}function P5(t){let{callback:e,disabled:r}=t;const n=L5(e),i=j.useMemo(()=>{if(r||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:s}=window;return new s(n)},[r]);return j.useEffect(()=>()=>i?.disconnect(),[i]),i}function yMe(t){return new XM(c_(t),t)}function $z(t,e,r){e===void 0&&(e=yMe);const[n,i]=j.useState(null);function s(){i(u=>{if(!t)return null;if(t.isConnected===!1){var l;return(l=u??r)!=null?l:null}const d=e(t);return JSON.stringify(u)===JSON.stringify(d)?u:d})}const o=vMe({callback(u){if(t)for(const l of u){const{type:d,target:f}=l;if(d==="childList"&&f instanceof HTMLElement&&f.contains(t)){s();break}}}}),c=P5({callback:s});return tg(()=>{s(),t?(c?.observe(t),o?.observe(document.body,{childList:!0,subtree:!0})):(c?.disconnect(),o?.disconnect())},[t]),n}function xMe(t){const e=tF(t);return Jre(t,e)}const Hz=[];function bMe(t){const e=j.useRef(t),r=l_(n=>t?n&&n!==Hz&&t&&e.current&&t.parentNode===e.current.parentNode?n:qM(t):Hz,[t]);return j.useEffect(()=>{e.current=t},[t]),r}function wMe(t){const[e,r]=j.useState(null),n=j.useRef(t),i=j.useCallback(s=>{const o=s4(s.target);o&&r(c=>c?(c.set(o,XP(o)),new Map(c)):null)},[]);return j.useEffect(()=>{const s=n.current;if(t!==s){o(s);const c=t.map(u=>{const l=s4(u);return l?(l.addEventListener("scroll",i,{passive:!0}),[l,XP(l)]):null}).filter(u=>u!=null);r(c.length?new Map(c):null),n.current=t}return()=>{o(t),o(s)};function o(c){c.forEach(u=>{const l=s4(u);l?.removeEventListener("scroll",i)})}},[i,t]),j.useMemo(()=>t.length?e?Array.from(e.values()).reduce((s,o)=>fb(s,o),FA):ane(t):FA,[t,e])}function Qz(t,e){e===void 0&&(e=[]);const r=j.useRef(null);return j.useEffect(()=>{r.current=null},e),j.useEffect(()=>{const n=t!==FA;n&&!r.current&&(r.current=t),!n&&r.current&&(r.current=null)},[t]),r.current?Rj(t,r.current):FA}function EMe(t){j.useEffect(()=>{if(!I5)return;const e=t.map(r=>{let{sensor:n}=r;return n.setup==null?void 0:n.setup()});return()=>{for(const r of e)r?.()}},t.map(e=>{let{sensor:r}=e;return r}))}function _Me(t,e){return j.useMemo(()=>t.reduce((r,n)=>{let{eventName:i,handler:s}=n;return r[i]=o=>{s(o,e)},r},{}),[t,e])}function une(t){return j.useMemo(()=>t?qDe(t):null,[t])}const Vz=[];function SMe(t,e){e===void 0&&(e=c_);const[r]=t,n=une(r?wh(r):null),[i,s]=j.useState(Vz);function o(){s(()=>t.length?t.map(u=>ine(u)?n:new XM(e(u),u)):Vz)}const c=P5({callback:o});return tg(()=>{c?.disconnect(),o(),t.forEach(u=>c?.observe(u))},[t]),i}function dne(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return o_(e)?e:t}function TMe(t){let{measure:e}=t;const[r,n]=j.useState(null),i=j.useCallback(l=>{for(const{target:d}of l)if(o_(d)){n(f=>{const A=e(d);return f?{...f,width:A.width,height:A.height}:A});break}},[e]),s=P5({callback:i}),o=j.useCallback(l=>{const d=dne(l);s?.disconnect(),d&&s?.observe(d),n(d?e(d):null)},[e,s]),[c,u]=Pj(o);return j.useMemo(()=>({nodeRef:c,rect:r,setRef:u}),[r,c,u])}const CMe=[{sensor:eF,options:{}},{sensor:ZM,options:{}}],jMe={current:{}},nT={draggable:{measure:Rz},droppable:{measure:Rz,strategy:qE.WhileDragging,frequency:JP.Optimized},dragOverlay:{measure:c_}};class rE extends Map{get(e){var r;return e!=null&&(r=super.get(e))!=null?r:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:r}=e;return!r})}getNodeFor(e){var r,n;return(r=(n=this.get(e))==null?void 0:n.node.current)!=null?r:void 0}}const NMe={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new rE,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Mj},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:nT,measureDroppableContainers:Mj,windowRect:null,measuringScheduled:!1},hne={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Mj,draggableNodes:new Map,over:null,measureDroppableContainers:Mj},u_=j.createContext(hne),fne=j.createContext(NMe);function kMe(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new rE}}}function IMe(t,e){switch(e.type){case Mu.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Mu.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case Mu.DragEnd:case Mu.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Mu.RegisterDroppable:{const{element:r}=e,{id:n}=r,i=new rE(t.droppable.containers);return i.set(n,r),{...t,droppable:{...t.droppable,containers:i}}}case Mu.SetDroppableDisabled:{const{id:r,key:n,disabled:i}=e,s=t.droppable.containers.get(r);if(!s||n!==s.key)return t;const o=new rE(t.droppable.containers);return o.set(r,{...s,disabled:i}),{...t,droppable:{...t.droppable,containers:o}}}case Mu.UnregisterDroppable:{const{id:r,key:n}=e,i=t.droppable.containers.get(r);if(!i||n!==i.key)return t;const s=new rE(t.droppable.containers);return s.delete(r),{...t,droppable:{...t.droppable,containers:s}}}default:return t}}function LMe(t){let{disabled:e}=t;const{active:r,activatorEvent:n,draggableNodes:i}=j.useContext(u_),s=Oj(n),o=Oj(r?.id);return j.useEffect(()=>{if(!e&&!n&&s&&o!=null){if(!YM(s)||document.activeElement===s.target)return;const c=i.get(o);if(!c)return;const{activatorNode:u,node:l}=c;if(!u.current&&!l.current)return;requestAnimationFrame(()=>{for(const d of[u.current,l.current]){if(!d)continue;const f=TDe(d);if(f){f.focus();break}}})}},[n,e,i,o,s]),null}function Ane(t,e){let{transform:r,...n}=e;return t!=null&&t.length?t.reduce((i,s)=>s({transform:i,...n}),r):r}function BMe(t){return j.useMemo(()=>({draggable:{...nT.draggable,...t?.draggable},droppable:{...nT.droppable,...t?.droppable},dragOverlay:{...nT.dragOverlay,...t?.dragOverlay}}),[t?.draggable,t?.droppable,t?.dragOverlay])}function PMe(t){let{activeNode:e,measure:r,initialRect:n,config:i=!0}=t;const s=j.useRef(!1),{x:o,y:c}=typeof i=="boolean"?{x:i,y:i}:i;tg(()=>{if(!o&&!c||!e){s.current=!1;return}if(s.current||!n)return;const l=e?.node.current;if(!l||l.isConnected===!1)return;const d=r(l),f=Jre(d,n);if(o||(f.x=0),c||(f.y=0),s.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const A=tne(l);A&&A.scrollBy({top:f.y,left:f.x})}},[e,o,c,n,r])}const O5=j.createContext({...FA,scaleX:1,scaleY:1});var c0;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(c0||(c0={}));const OMe=j.memo(function(e){var r,n,i,s;let{id:o,accessibility:c,autoScroll:u=!0,children:l,sensors:d=CMe,collisionDetection:f=VDe,measuring:A,modifiers:p,...g}=e;const y=j.useReducer(IMe,void 0,kMe),[x,w]=y,[E,T]=LDe(),[C,N]=j.useState(c0.Uninitialized),I=C===c0.Initialized,{draggable:{active:U,nodes:K,translate:Y},droppable:{containers:re}}=x,se=U!=null?K.get(U):null,Ae=j.useRef({initial:null,translated:null}),we=j.useMemo(()=>{var Ur;return U!=null?{id:U,data:(Ur=se?.data)!=null?Ur:jMe,rect:Ae}:null},[U,se]),Ce=j.useRef(null),[ve,ne]=j.useState(null),[ce,ae]=j.useState(null),De=WE(g,Object.values(g)),Oe=B5("DndDescribedBy",o),be=j.useMemo(()=>re.getEnabled(),[re]),de=BMe(A),{droppableRects:xe,measureDroppableContainers:je,measuringScheduled:Me}=pMe(be,{dragging:I,dependencies:[Y.x,Y.y],config:de.droppable}),Re=AMe(K,U),it=j.useMemo(()=>ce?Dj(ce):null,[ce]),ht=rn(),Be=gMe(Re,de.draggable.measure);PMe({activeNode:U!=null?K.get(U):null,config:ht.layoutShiftCompensation,initialRect:Be,measure:de.draggable.measure});const nt=$z(Re,de.draggable.measure,Be),Ge=$z(Re?Re.parentElement:null),ft=j.useRef({activatorEvent:null,active:null,activeNode:Re,collisionRect:null,collisions:null,droppableRects:xe,draggableNodes:K,draggingNode:null,draggingNodeRect:null,droppableContainers:re,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Dt=re.getNodeFor((r=ft.current.over)==null?void 0:r.id),rt=TMe({measure:de.dragOverlay.measure}),kt=(n=rt.nodeRef.current)!=null?n:Re,_t=I?(i=rt.rect)!=null?i:nt:null,wt=!!(rt.nodeRef.current&&rt.rect),Tt=xMe(wt?null:nt),Er=une(kt?wh(kt):null),pr=bMe(I?Dt??Re:null),Xr=SMe(pr),yn=Ane(p,{transform:{x:Y.x-Tt.x,y:Y.y-Tt.y,scaleX:1,scaleY:1},activatorEvent:ce,active:we,activeNodeRect:nt,containerNodeRect:Ge,draggingNodeRect:_t,over:ft.current.over,overlayNodeRect:rt.rect,scrollableAncestors:pr,scrollableAncestorRects:Xr,windowRect:Er}),Mn=it?fb(it,Y):null,dn=wMe(pr),pn=Qz(dn),mn=Qz(dn,[nt]),Kn=fb(yn,pn),Zn=_t?GDe(_t,yn):null,Li=we&&Zn?f({active:we,collisionRect:Zn,droppableRects:xe,droppableContainers:be,pointerCoordinates:Mn}):null,ot=$De(Li,"id"),[Yt,kr]=j.useState(null),nr=wt?yn:fb(yn,mn),Qt=zDe(nr,(s=Yt?.rect)!=null?s:null,nt),fr=j.useRef(null),zr=j.useCallback((Ur,An)=>{let{sensor:cn,options:On}=An;if(Ce.current==null)return;const li=K.get(Ce.current);if(!li)return;const Cs=Ur.nativeEvent,Ds=new cn({active:Ce.current,activeNode:li,event:Cs,options:On,context:ft,onAbort(ei){if(!K.get(ei))return;const{onDragAbort:ss}=De.current,ta={id:ei};ss?.(ta),E({type:"onDragAbort",event:ta})},onPending(ei,sn,ss,ta){if(!K.get(ei))return;const{onDragPending:Cn}=De.current,Ms={id:ei,constraint:sn,initialCoordinates:ss,offset:ta};Cn?.(Ms),E({type:"onDragPending",event:Ms})},onStart(ei){const sn=Ce.current;if(sn==null)return;const ss=K.get(sn);if(!ss)return;const{onDragStart:ta}=De.current,_n={activatorEvent:Cs,active:{id:sn,data:ss.data,rect:Ae}};v0.unstable_batchedUpdates(()=>{ta?.(_n),N(c0.Initializing),w({type:Mu.DragStart,initialCoordinates:ei,active:sn}),E({type:"onDragStart",event:_n}),ne(fr.current),ae(Cs)})},onMove(ei){w({type:Mu.DragMove,coordinates:ei})},onEnd:js(Mu.DragEnd),onCancel:js(Mu.DragCancel)});fr.current=Ds;function js(ei){return async function(){const{active:ss,collisions:ta,over:_n,scrollAdjustedTranslate:Cn}=ft.current;let Ms=null;if(ss&&Cn){const{cancelDrop:Qs}=De.current;Ms={activatorEvent:Cs,active:ss,collisions:ta,delta:Cn,over:_n},ei===Mu.DragEnd&&typeof Qs=="function"&&await Promise.resolve(Qs(Ms))&&(ei=Mu.DragCancel)}Ce.current=null,v0.unstable_batchedUpdates(()=>{w({type:ei}),N(c0.Uninitialized),kr(null),ne(null),ae(null),fr.current=null;const Qs=ei===Mu.DragEnd?"onDragEnd":"onDragCancel";if(Ms){const Fs=De.current[Qs];Fs?.(Ms),E({type:Qs,event:Ms})}})}}},[K]),Yr=j.useCallback((Ur,An)=>(cn,On)=>{const li=cn.nativeEvent,Cs=K.get(On);if(Ce.current!==null||!Cs||li.dndKit||li.defaultPrevented)return;const Ds={active:Cs};Ur(cn,An.options,Ds)===!0&&(li.dndKit={capturedBy:An.sensor},Ce.current=On,zr(cn,An))},[K,zr]),Ln=mMe(d,Yr);EMe(d),tg(()=>{nt&&C===c0.Initializing&&N(c0.Initialized)},[nt,C]),j.useEffect(()=>{const{onDragMove:Ur}=De.current,{active:An,activatorEvent:cn,collisions:On,over:li}=ft.current;if(!An||!cn)return;const Cs={active:An,activatorEvent:cn,collisions:On,delta:{x:Kn.x,y:Kn.y},over:li};v0.unstable_batchedUpdates(()=>{Ur?.(Cs),E({type:"onDragMove",event:Cs})})},[Kn.x,Kn.y]),j.useEffect(()=>{const{active:Ur,activatorEvent:An,collisions:cn,droppableContainers:On,scrollAdjustedTranslate:li}=ft.current;if(!Ur||Ce.current==null||!An||!li)return;const{onDragOver:Cs}=De.current,Ds=On.get(ot),js=Ds&&Ds.rect.current?{id:Ds.id,rect:Ds.rect.current,data:Ds.data,disabled:Ds.disabled}:null,ei={active:Ur,activatorEvent:An,collisions:cn,delta:{x:li.x,y:li.y},over:js};v0.unstable_batchedUpdates(()=>{kr(js),Cs?.(ei),E({type:"onDragOver",event:ei})})},[ot]),tg(()=>{ft.current={activatorEvent:ce,active:we,activeNode:Re,collisionRect:Zn,collisions:Li,droppableRects:xe,draggableNodes:K,draggingNode:kt,draggingNodeRect:_t,droppableContainers:re,over:Yt,scrollableAncestors:pr,scrollAdjustedTranslate:Kn},Ae.current={initial:_t,translated:Zn}},[we,Re,Li,Zn,K,kt,_t,xe,re,Yt,pr,Kn]),dMe({...ht,delta:Y,draggingRect:Zn,pointerCoordinates:Mn,scrollableAncestors:pr,scrollableAncestorRects:Xr});const ln=j.useMemo(()=>({active:we,activeNode:Re,activeNodeRect:nt,activatorEvent:ce,collisions:Li,containerNodeRect:Ge,dragOverlay:rt,draggableNodes:K,droppableContainers:re,droppableRects:xe,over:Yt,measureDroppableContainers:je,scrollableAncestors:pr,scrollableAncestorRects:Xr,measuringConfiguration:de,measuringScheduled:Me,windowRect:Er}),[we,Re,nt,ce,Li,Ge,rt,K,re,xe,Yt,je,pr,Xr,de,Me,Er]),Jn=j.useMemo(()=>({activatorEvent:ce,activators:Ln,active:we,activeNodeRect:nt,ariaDescribedById:{draggable:Oe},dispatch:w,draggableNodes:K,over:Yt,measureDroppableContainers:je}),[ce,Ln,we,nt,w,Oe,K,Yt,je]);return So.createElement(Zre.Provider,{value:T},So.createElement(u_.Provider,{value:Jn},So.createElement(fne.Provider,{value:ln},So.createElement(O5.Provider,{value:Qt},l)),So.createElement(LMe,{disabled:c?.restoreFocus===!1})),So.createElement(ODe,{...c,hiddenTextDescribedById:Oe}));function rn(){const Ur=ve?.autoScrollEnabled===!1,An=typeof u=="object"?u.enabled===!1:u===!1,cn=I&&!Ur&&!An;return typeof u=="object"?{...u,enabled:cn}:{enabled:cn}}}),RMe=j.createContext(null),zz="button",DMe="Draggable";function MMe(t){let{id:e,data:r,disabled:n=!1,attributes:i}=t;const s=B5(DMe),{activators:o,activatorEvent:c,active:u,activeNodeRect:l,ariaDescribedById:d,draggableNodes:f,over:A}=j.useContext(u_),{role:p=zz,roleDescription:g="draggable",tabIndex:y=0}=i??{},x=u?.id===e,w=j.useContext(x?O5:RMe),[E,T]=Pj(),[C,N]=Pj(),I=_Me(o,e),U=WE(r);tg(()=>(f.set(e,{id:e,key:s,node:E,activatorNode:C,data:U}),()=>{const Y=f.get(e);Y&&Y.key===s&&f.delete(e)}),[f,e]);const K=j.useMemo(()=>({role:p,tabIndex:y,"aria-disabled":n,"aria-pressed":x&&p===zz?!0:void 0,"aria-roledescription":g,"aria-describedby":d.draggable}),[n,p,y,x,g,d.draggable]);return{active:u,activatorEvent:c,activeNodeRect:l,attributes:K,isDragging:x,listeners:n?void 0:I,node:E,over:A,setNodeRef:T,setActivatorNodeRef:N,transform:w}}function FMe(){return j.useContext(fne)}const UMe="Droppable",$Me={timeout:25};function HMe(t){let{data:e,disabled:r=!1,id:n,resizeObserverConfig:i}=t;const s=B5(UMe),{active:o,dispatch:c,over:u,measureDroppableContainers:l}=j.useContext(u_),d=j.useRef({disabled:r}),f=j.useRef(!1),A=j.useRef(null),p=j.useRef(null),{disabled:g,updateMeasurementsFor:y,timeout:x}={...$Me,...i},w=WE(y??n),E=j.useCallback(()=>{if(!f.current){f.current=!0;return}p.current!=null&&clearTimeout(p.current),p.current=setTimeout(()=>{l(Array.isArray(w.current)?w.current:[w.current]),p.current=null},x)},[x]),T=P5({callback:E,disabled:g||!o}),C=j.useCallback((K,Y)=>{T&&(Y&&(T.unobserve(Y),f.current=!1),K&&T.observe(K))},[T]),[N,I]=Pj(C),U=WE(e);return j.useEffect(()=>{!T||!N.current||(T.disconnect(),f.current=!1,T.observe(N.current))},[N,T]),j.useEffect(()=>(c({type:Mu.RegisterDroppable,element:{id:n,key:s,disabled:r,node:N,rect:A,data:U}}),()=>c({type:Mu.UnregisterDroppable,key:s,id:n})),[n]),j.useEffect(()=>{r!==d.current.disabled&&(c({type:Mu.SetDroppableDisabled,id:n,key:s,disabled:r}),d.current.disabled=r)},[n,s,r,c]),{active:o,rect:A,isOver:u?.id===n,node:N,over:u,setNodeRef:I}}function QMe(t){let{animation:e,children:r}=t;const[n,i]=j.useState(null),[s,o]=j.useState(null),c=Oj(r);return!r&&!n&&c&&i(c),tg(()=>{if(!s)return;const u=n?.key,l=n?.props.id;if(u==null||l==null){i(null);return}Promise.resolve(e(l,s)).then(()=>{i(null)})},[e,n,s]),So.createElement(So.Fragment,null,r,n?j.cloneElement(n,{ref:o}):null)}const VMe={x:0,y:0,scaleX:1,scaleY:1};function zMe(t){let{children:e}=t;return So.createElement(u_.Provider,{value:hne},So.createElement(O5.Provider,{value:VMe},e))}const KMe={position:"fixed",touchAction:"none"},GMe=t=>YM(t)?"transform 250ms ease":void 0,WMe=j.forwardRef((t,e)=>{let{as:r,activatorEvent:n,adjustScale:i,children:s,className:o,rect:c,style:u,transform:l,transition:d=GMe}=t;if(!c)return null;const f=i?l:{...l,scaleX:1,scaleY:1},A={...KMe,width:c.width,height:c.height,top:c.top,left:c.left,transform:YE.Transform.toString(f),transformOrigin:i&&n?MDe(n,c):void 0,transition:typeof d=="function"?d(n):d,...u};return So.createElement(r,{className:o,style:A,ref:e},s)}),YMe=t=>e=>{let{active:r,dragOverlay:n}=e;const i={},{styles:s,className:o}=t;if(s!=null&&s.active)for(const[c,u]of Object.entries(s.active))u!==void 0&&(i[c]=r.node.style.getPropertyValue(c),r.node.style.setProperty(c,u));if(s!=null&&s.dragOverlay)for(const[c,u]of Object.entries(s.dragOverlay))u!==void 0&&n.node.style.setProperty(c,u);return o!=null&&o.active&&r.node.classList.add(o.active),o!=null&&o.dragOverlay&&n.node.classList.add(o.dragOverlay),function(){for(const[u,l]of Object.entries(i))r.node.style.setProperty(u,l);o!=null&&o.active&&r.node.classList.remove(o.active)}},qMe=t=>{let{transform:{initial:e,final:r}}=t;return[{transform:YE.Transform.toString(e)},{transform:YE.Transform.toString(r)}]},XMe={duration:250,easing:"ease",keyframes:qMe,sideEffects:YMe({styles:{active:{opacity:"0"}}})};function ZMe(t){let{config:e,draggableNodes:r,droppableContainers:n,measuringConfiguration:i}=t;return L5((s,o)=>{if(e===null)return;const c=r.get(s);if(!c)return;const u=c.node.current;if(!u)return;const l=dne(o);if(!l)return;const{transform:d}=wh(o).getComputedStyle(o),f=ene(d);if(!f)return;const A=typeof e=="function"?e:JMe(e);return one(u,i.draggable.measure),A({active:{id:s,data:c.data,node:u,rect:i.draggable.measure(u)},draggableNodes:r,dragOverlay:{node:o,rect:i.dragOverlay.measure(l)},droppableContainers:n,measuringConfiguration:i,transform:f})})}function JMe(t){const{duration:e,easing:r,sideEffects:n,keyframes:i}={...XMe,...t};return s=>{let{active:o,dragOverlay:c,transform:u,...l}=s;if(!e)return;const d={x:c.rect.left-o.rect.left,y:c.rect.top-o.rect.top},f={scaleX:u.scaleX!==1?o.rect.width*u.scaleX/c.rect.width:1,scaleY:u.scaleY!==1?o.rect.height*u.scaleY/c.rect.height:1},A={x:u.x-d.x,y:u.y-d.y,...f},p=i({...l,active:o,dragOverlay:c,transform:{initial:u,final:A}}),[g]=p,y=p[p.length-1];if(JSON.stringify(g)===JSON.stringify(y))return;const x=n?.({active:o,dragOverlay:c,...l}),w=c.node.animate(p,{duration:e,easing:r,fill:"forwards"});return new Promise(E=>{w.onfinish=()=>{x?.(),E()}})}}let Kz=0;function eFe(t){return j.useMemo(()=>{if(t!=null)return Kz++,Kz},[t])}const tFe=So.memo(t=>{let{adjustScale:e=!1,children:r,dropAnimation:n,style:i,transition:s,modifiers:o,wrapperElement:c="div",className:u,zIndex:l=999}=t;const{activatorEvent:d,active:f,activeNodeRect:A,containerNodeRect:p,draggableNodes:g,droppableContainers:y,dragOverlay:x,over:w,measuringConfiguration:E,scrollableAncestors:T,scrollableAncestorRects:C,windowRect:N}=FMe(),I=j.useContext(O5),U=eFe(f?.id),K=Ane(o,{activatorEvent:d,active:f,activeNodeRect:A,containerNodeRect:p,draggingNodeRect:x.rect,over:w,overlayNodeRect:x.rect,scrollableAncestors:T,scrollableAncestorRects:C,transform:I,windowRect:N}),Y=tF(A),re=ZMe({config:n,draggableNodes:g,droppableContainers:y,measuringConfiguration:E}),se=Y?x.setRef:void 0;return So.createElement(zMe,null,So.createElement(QMe,{animation:re},f&&U?So.createElement(WMe,{key:U,id:f.id,ref:se,as:c,activatorEvent:d,adjustScale:e,className:u,transition:s,rect:Y,style:{zIndex:l,...i},transform:K},r):null))});function Gz({id:t,children:e,data:r}){const{attributes:n,listeners:i,setNodeRef:s,transform:o,isDragging:c}=MMe({id:t,data:r}),u=o?{transform:`translate3d(${o.x}px, ${o.y}px, 0)`}:void 0;return a.jsx("div",{ref:s,style:u,...i,...n,className:`cursor-grab active:cursor-grabbing ${c?"opacity-50":""}`,children:e})}function rFe({event:t,children:e,isOver:r}){const{setNodeRef:n}=HMe({id:`event-${t.id}`,data:{event:t}});return a.jsx("div",{ref:n,className:`bg-gray-800/50 rounded-xl border-2 transition-all ${r?"border-orange-500 bg-orange-500/10":"border-gray-700/50"}`,children:e})}function nFe({events:t,crewMembers:e,equipment:r,onAssignCrew:n,onUnassignCrew:i,onAssignEquipment:s,onUnassignEquipment:o}){const[c,u]=j.useState(null),[l,d]=j.useState(null),[f,A]=j.useState(null),p=RDe(i4(eF,{activationConstraint:{distance:8}}),i4(cne,{activationConstraint:{delay:250,tolerance:5}}),i4(ZM)),g=new Date;g.setHours(0,0,0,0);const y=t.filter(N=>new Date(N.date)>=g&&N.status!=="cancelled"&&N.status!=="completed").sort((N,I)=>new Date(N.date)-new Date(I.date));function x(N){u(N.active.id),d(N.active.data.current)}function w(N){A(N.over?.id||null)}function E(N){const{active:I,over:U}=N;if(U&&U.id.toString().startsWith("event-")){const K=U.id.toString().replace("event-",""),Y=t.find(re=>re.id===K);if(Y&&I.data.current){const{type:re,item:se}=I.data.current;re==="crew"?n(Y,se):re==="equipment"&&s(Y,se)}}u(null),d(null),A(null)}function T(){u(null),d(null),A(null)}function C(N){return new Date(N+"T00:00:00").toLocaleDateString("en-AU",{weekday:"short",day:"numeric",month:"short"})}return new Set(y.flatMap(N=>N.crew_ids||[])),new Set(y.flatMap(N=>N.equipment_ids||[])),a.jsxs(OMe,{sensors:p,collisionDetection:HDe,onDragStart:x,onDragOver:w,onDragEnd:E,onDragCancel:T,children:[a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[a.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[" Upcoming Events",a.jsx("span",{className:"text-sm font-normal text-gray-400",children:"Drop crew & equipment here"})]}),a.jsxs("div",{className:"space-y-3 max-h-[600px] overflow-y-auto pr-2",children:[y.map(N=>{const I=f===`event-${N.id}`,U=e.filter(Y=>(N.crew_ids||[]).includes(Y.id)),K=r.filter(Y=>(N.equipment_ids||[]).includes(Y.id));return a.jsx(rFe,{event:N,isOver:I,children:a.jsxs("div",{className:"p-4",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-bold text-white",children:N.name}),a.jsx("p",{className:"text-orange-500 text-sm",children:N.client})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-sm text-gray-400",children:C(N.date)}),a.jsx("div",{className:`text-xs px-2 py-0.5 rounded-full inline-block mt-1 ${N.status==="confirmed"?"bg-green-500/20 text-green-400":N.status==="tentative"?"bg-yellow-500/20 text-yellow-400":"bg-gray-500/20 text-gray-400"}`,children:N.status})]})]}),a.jsxs("div",{className:"mb-2",children:[a.jsxs("div",{className:"text-xs text-gray-500 mb-1",children:[" Crew (",U.length,")"]}),a.jsx("div",{className:"flex flex-wrap gap-1",children:U.length===0?a.jsx("span",{className:"text-xs text-gray-600 italic",children:"No crew assigned"}):U.map(Y=>a.jsxs("span",{className:"text-xs bg-green-500/20 text-green-400 px-2 py-1 rounded flex items-center gap-1 group",children:[Y.name,a.jsx("button",{onClick:()=>i(N,Y),className:"opacity-0 group-hover:opacity-100 hover:text-red-400 transition",children:""})]},Y.id))})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"text-xs text-gray-500 mb-1",children:[" Equipment (",K.length,")"]}),a.jsx("div",{className:"flex flex-wrap gap-1",children:K.length===0?a.jsx("span",{className:"text-xs text-gray-600 italic",children:"No equipment assigned"}):K.map(Y=>a.jsxs("span",{className:"text-xs bg-blue-500/20 text-blue-400 px-2 py-1 rounded flex items-center gap-1 group",children:[Y.name,a.jsx("button",{onClick:()=>o(N,Y),className:"opacity-0 group-hover:opacity-100 hover:text-red-400 transition",children:""})]},Y.id))})]})]})},N.id)}),y.length===0&&a.jsx("div",{className:"text-center text-gray-500 py-12",children:"No upcoming events to assign"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-gray-800/30 rounded-xl border border-gray-700/50 p-4",children:[a.jsx("h3",{className:"text-lg font-bold text-white mb-3 flex items-center gap-2",children:" Crew Pool"}),a.jsxs("div",{className:"space-y-2 max-h-[250px] overflow-y-auto",children:[e.map(N=>a.jsx(Gz,{id:`crew-${N.id}`,data:{type:"crew",item:N},children:a.jsxs("div",{className:"p-2 bg-gray-700/50 rounded-lg border border-gray-600/50 hover:border-green-500/50 transition",children:[a.jsx("div",{className:"font-medium text-white text-sm",children:N.name}),a.jsx("div",{className:"text-xs text-gray-400",children:N.role||"No role"})]})},N.id)),e.length===0&&a.jsx("p",{className:"text-gray-500 text-sm text-center py-4",children:"No crew members"})]})]}),a.jsxs("div",{className:"bg-gray-800/30 rounded-xl border border-gray-700/50 p-4",children:[a.jsx("h3",{className:"text-lg font-bold text-white mb-3 flex items-center gap-2",children:" Equipment Pool"}),a.jsxs("div",{className:"space-y-2 max-h-[250px] overflow-y-auto",children:[r.map(N=>a.jsx(Gz,{id:`equip-${N.id}`,data:{type:"equipment",item:N},children:a.jsxs("div",{className:"p-2 bg-gray-700/50 rounded-lg border border-gray-600/50 hover:border-blue-500/50 transition",children:[a.jsx("div",{className:"font-medium text-white text-sm",children:N.name}),a.jsxs("div",{className:"text-xs text-gray-400",children:[N.category,"  ",N.quantity]})]})},N.id)),r.length===0&&a.jsx("p",{className:"text-gray-500 text-sm text-center py-4",children:"No equipment"})]})]})]})]}),a.jsx(tFe,{children:c&&l&&a.jsx("div",{className:`p-2 rounded-lg border shadow-xl ${l.type==="crew"?"bg-green-600 border-green-500":"bg-blue-600 border-blue-500"}`,children:a.jsx("div",{className:"font-medium text-white text-sm",children:l.item.name})})})]})}function iFe(){const[t,e]=j.useState([]),[r,n]=j.useState([]),[i,s]=j.useState([]),[o,c]=j.useState(!0),[u,l]=j.useState("grid"),[d,f]=j.useState(null),[A,p]=j.useState("events"),[g,y]=j.useState(!1),[x,w]=j.useState(!1),[E,T]=j.useState(!1),[C,N]=j.useState(null),[I,U]=j.useState(null),[K,Y]=j.useState(null),[re,se]=j.useState(null),[Ae,we]=j.useState({name:"",client:"",date:"",location:"",status:"tentative",notes:"",crew_ids:[],equipment_ids:[],flight_links:"",accommodation_links:"",rental_links:""}),[Ce,ve]=j.useState({name:"",role:"",phone:"",email:""}),[ne,ce]=j.useState({name:"",category:"Camera",quantity:1,notes:""}),[ae,De]=j.useState("upcoming"),[Oe,be]=j.useState(new Date);j.useEffect(()=>{de()},[]);async function de(){c(!0);const[ot,Yt,kr]=await Promise.all([Rr.from("production_events").select("*").order("date",{ascending:!0}),Rr.from("crew_members").select("*").order("name"),Rr.from("equipment_inventory").select("*").order("category, name")]);e(ot.data||[]),n(Yt.data||[]),s(kr.data||[]),c(!1)}const xe=new Date;xe.setHours(0,0,0,0);const je=t.filter(ot=>new Date(ot.date)>=xe&&ot.status!=="cancelled").length,Me=t.filter(ot=>{const Yt=new Date(ot.date);return Yt.getMonth()===xe.getMonth()&&Yt.getFullYear()===xe.getFullYear()&&ot.status!=="cancelled"}).length,Re=t.filter(ot=>new Date(ot.date)>=xe&&(!ot.crew_ids||ot.crew_ids.length===0)).length,it=t.filter(ot=>{const Yt=new Date(ot.date);return ae==="upcoming"?Yt>=xe&&ot.status!=="completed"&&ot.status!=="cancelled":ae==="completed"?ot.status==="completed":ae==="thisMonth"?Yt.getMonth()===xe.getMonth()&&Yt.getFullYear()===xe.getFullYear():!0});async function ht(ot){ot.preventDefault();const Yt={name:Ae.name,client:Ae.client,date:Ae.date,location:Ae.location,status:Ae.status,notes:Ae.notes,crew_ids:Ae.crew_ids,equipment_ids:Ae.equipment_ids,flight_links:Ae.flight_links.split(",").map(kr=>kr.trim()).filter(Boolean),accommodation_links:Ae.accommodation_links.split(",").map(kr=>kr.trim()).filter(Boolean),rental_links:Ae.rental_links.split(",").map(kr=>kr.trim()).filter(Boolean)};I?await Rr.from("production_events").update(Yt).eq("id",I.id):await Rr.from("production_events").insert([Yt]),y(!1),U(null),Ge(),de()}async function Be(ot){confirm("Delete this event? This cannot be undone.")&&(await Rr.from("production_events").delete().eq("id",ot),N(null),de())}function nt(ot){U(ot),we({name:ot.name,client:ot.client,date:ot.date,location:ot.location||"",status:ot.status,notes:ot.notes||"",crew_ids:ot.crew_ids||[],equipment_ids:ot.equipment_ids||[],flight_links:(ot.flight_links||[]).join(", "),accommodation_links:(ot.accommodation_links||[]).join(", "),rental_links:(ot.rental_links||[]).join(", ")}),y(!0)}function Ge(){we({name:"",client:"",date:"",location:"",status:"tentative",notes:"",crew_ids:[],equipment_ids:[],flight_links:"",accommodation_links:"",rental_links:""})}async function ft(ot){ot.preventDefault(),K?await Rr.from("crew_members").update(Ce).eq("id",K.id):await Rr.from("crew_members").insert([Ce]),w(!1),Y(null),ve({name:"",role:"",phone:"",email:""}),de()}function Dt(ot){Y(ot),ve({name:ot.name,role:ot.role||"",phone:ot.phone||"",email:ot.email||""}),w(!0)}async function rt(ot){confirm("Delete this crew member?")&&(await Rr.from("crew_members").delete().eq("id",ot),de())}async function kt(ot){ot.preventDefault(),re?await Rr.from("equipment_inventory").update(ne).eq("id",re.id):await Rr.from("equipment_inventory").insert([ne]),T(!1),se(null),ce({name:"",category:"Camera",quantity:1,notes:""}),de()}function _t(ot){se(ot),ce({name:ot.name,category:ot.category||"Camera",quantity:ot.quantity||1,notes:ot.notes||""}),T(!0)}async function wt(ot){confirm("Delete this equipment?")&&(await Rr.from("equipment_inventory").delete().eq("id",ot),de())}async function Tt(ot,Yt,kr){const nr=t.find(fr=>fr.id===ot);if(!nr)return;const Qt=kr?[...nr.crew_ids||[],Yt]:(nr.crew_ids||[]).filter(fr=>fr!==Yt);await Rr.from("production_events").update({crew_ids:Qt}).eq("id",ot),de(),C?.id===ot&&N({...C,crew_ids:Qt})}async function Er(ot,Yt,kr){const nr=t.find(fr=>fr.id===ot);if(!nr)return;const Qt=kr?[...nr.equipment_ids||[],Yt]:(nr.equipment_ids||[]).filter(fr=>fr!==Yt);await Rr.from("production_events").update({equipment_ids:Qt}).eq("id",ot),de(),C?.id===ot&&N({...C,equipment_ids:Qt})}function pr(ot){return new Date(ot).toLocaleDateString("en-AU",{weekday:"short",day:"numeric",month:"short"})}function Xr(ot){return new Date(ot).toLocaleDateString("en-AU",{weekday:"long",day:"numeric",month:"long",year:"numeric"})}function yn(ot){return(ot||[]).map(Yt=>r.find(kr=>kr.id===Yt)).filter(Boolean)}function Mn(ot){return(ot||[]).map(Yt=>i.find(kr=>kr.id===Yt)).filter(Boolean)}function dn(ot){const[Yt,kr,nr]=ot.split("-").map(Number),Qt=new Date(Yt,kr-1,nr),fr=new Date;fr.setHours(0,0,0,0);const zr=Math.round((Qt-fr)/(1e3*60*60*24));return zr===0?"Today":zr===1?"Tomorrow":zr<0?`${Math.abs(zr)}d ago`:`${zr}d`}const pn={confirmed:"bg-green-500",tentative:"bg-yellow-500",completed:"bg-gray-500",cancelled:"bg-red-500"},mn={confirmed:"border-green-500/30",tentative:"border-yellow-500/30",completed:"border-gray-500/30",cancelled:"border-red-500/30"},Kn=["Camera","Lens","Audio","Lighting","Support","Monitor","Power","Media","Transport","Other"];function Zn(){const ot=Oe.getFullYear(),Yt=Oe.getMonth(),kr=new Date(ot,Yt,1),nr=new Date(ot,Yt+1,0),Qt=kr.getDay(),fr=[];for(let Yr=Qt-1;Yr>=0;Yr--){const Ln=new Date(ot,Yt,-Yr);fr.push({date:Ln,isCurrentMonth:!1})}for(let Yr=1;Yr<=nr.getDate();Yr++)fr.push({date:new Date(ot,Yt,Yr),isCurrentMonth:!0});const zr=42-fr.length;for(let Yr=1;Yr<=zr;Yr++)fr.push({date:new Date(ot,Yt+1,Yr),isCurrentMonth:!1});return fr}function Li(ot){const Yt=ot.getFullYear(),kr=String(ot.getMonth()+1).padStart(2,"0"),nr=String(ot.getDate()).padStart(2,"0"),Qt=`${Yt}-${kr}-${nr}`;return t.filter(fr=>fr.date===Qt)}return o?a.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:a.jsx("div",{className:"animate-pulse text-gray-400",children:"Loading..."})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-white",children:"Crew & Logistics"}),a.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Manage teams, equipment, and travel for events"})]}),A==="events"&&a.jsxs("button",{onClick:()=>{Ge(),U(null),y(!0)},className:"bg-orange-600 hover:bg-orange-700 px-4 py-2.5 rounded-lg font-medium flex items-center justify-center sm:justify-start",children:[a.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Event"]}),A==="crew"&&a.jsxs("button",{onClick:()=>{Y(null),ve({name:"",role:"",phone:"",email:""}),w(!0)},className:"bg-green-600 hover:bg-green-700 px-4 py-2.5 rounded-lg font-medium flex items-center justify-center sm:justify-start",children:[a.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Crew"]}),A==="equipment"&&a.jsxs("button",{onClick:()=>{se(null),ce({name:"",category:"Camera",quantity:1,notes:""}),T(!0)},className:"bg-blue-600 hover:bg-blue-700 px-4 py-2.5 rounded-lg font-medium flex items-center justify-center sm:justify-start",children:[a.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Equipment"]})]}),a.jsxs("div",{className:"flex space-x-1 bg-gray-800/50 rounded-xl p-1 border border-gray-700/50",children:[a.jsxs("button",{onClick:()=>p("events"),className:`flex-1 px-4 py-3 rounded-lg font-medium transition flex items-center justify-center gap-2 ${A==="events"?"bg-orange-600 text-white":"text-gray-400 hover:text-white hover:bg-gray-700/50"}`,children:[a.jsx("span",{children:""}),a.jsx("span",{children:"Events"}),a.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${A==="events"?"bg-orange-700":"bg-gray-700"}`,children:je})]}),a.jsxs("button",{onClick:()=>p("crew"),className:`flex-1 px-4 py-3 rounded-lg font-medium transition flex items-center justify-center gap-2 ${A==="crew"?"bg-green-600 text-white":"text-gray-400 hover:text-white hover:bg-gray-700/50"}`,children:[a.jsx("span",{children:""}),a.jsx("span",{children:"Crew"}),a.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${A==="crew"?"bg-green-700":"bg-gray-700"}`,children:r.length})]}),a.jsxs("button",{onClick:()=>p("equipment"),className:`flex-1 px-4 py-3 rounded-lg font-medium transition flex items-center justify-center gap-2 ${A==="equipment"?"bg-blue-600 text-white":"text-gray-400 hover:text-white hover:bg-gray-700/50"}`,children:[a.jsx("span",{children:""}),a.jsx("span",{children:"Equipment"}),a.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${A==="equipment"?"bg-blue-700":"bg-gray-700"}`,children:i.length})]}),a.jsxs("button",{onClick:()=>p("assign"),className:`flex-1 px-4 py-3 rounded-lg font-medium transition flex items-center justify-center gap-2 ${A==="assign"?"bg-purple-600 text-white":"text-gray-400 hover:text-white hover:bg-gray-700/50"}`,children:[a.jsx("span",{children:""}),a.jsx("span",{className:"hidden sm:inline",children:"Assign"})]})]}),A==="events"&&a.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4",children:[a.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-4 border border-gray-700/50",children:[a.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-orange-500",children:je}),a.jsx("div",{className:"text-gray-400 text-xs sm:text-sm",children:"Upcoming Events"})]}),a.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-4 border border-gray-700/50",children:[a.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-green-500",children:r.length}),a.jsx("div",{className:"text-gray-400 text-xs sm:text-sm",children:"Crew Members"})]}),a.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-4 border border-gray-700/50",children:[a.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-blue-500",children:i.length}),a.jsx("div",{className:"text-gray-400 text-xs sm:text-sm",children:"Equipment Items"})]}),a.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-4 border border-gray-700/50",children:[a.jsx("div",{className:`text-2xl sm:text-3xl font-bold ${Re>0?"text-red-500":"text-purple-500"}`,children:Re>0?Re:Me}),a.jsx("div",{className:"text-gray-400 text-xs sm:text-sm",children:Re>0?" Need Crew":"This Month"})]})]}),A==="events"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:[a.jsxs("div",{className:"flex items-center overflow-x-auto pb-2 sm:pb-0 -mx-1 px-1",children:[a.jsx("span",{className:"text-gray-400 text-sm mr-3 whitespace-nowrap",children:"Filter:"}),a.jsx("div",{className:"flex space-x-2",children:[{key:"upcoming",label:"Upcoming"},{key:"all",label:"All"},{key:"thisMonth",label:"This Month"},{key:"completed",label:"Completed"}].map(ot=>a.jsx("button",{onClick:()=>De(ot.key),className:`px-3 py-1.5 rounded-lg text-sm whitespace-nowrap transition ${ae===ot.key?"bg-orange-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:ot.label},ot.key))})]}),a.jsxs("div",{className:"flex items-center space-x-1 bg-gray-800 rounded-lg p-1",children:[a.jsx("button",{onClick:()=>l("grid"),className:`p-2 rounded ${u==="grid"?"bg-gray-700 text-white":"text-gray-400 hover:text-white"}`,title:"Grid View",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})}),a.jsx("button",{onClick:()=>l("list"),className:`p-2 rounded ${u==="list"?"bg-gray-700 text-white":"text-gray-400 hover:text-white"}`,title:"List View",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})})}),a.jsx("button",{onClick:()=>l("calendar"),className:`p-2 rounded ${u==="calendar"?"bg-gray-700 text-white":"text-gray-400 hover:text-white"}`,title:"Calendar View",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})})]})]}),u==="grid"&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:[it.map(ot=>a.jsxs("div",{onClick:()=>N(ot),className:`bg-gray-800/50 rounded-xl border ${mn[ot.status]} p-4 sm:p-5 hover:border-orange-500/50 transition cursor-pointer`,children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsx("span",{className:`${pn[ot.status]} px-2 py-0.5 rounded text-xs font-medium capitalize`,children:ot.status}),a.jsxs("div",{className:"text-right",children:[a.jsx("span",{className:"text-gray-400 text-sm",children:pr(ot.date)}),a.jsx("div",{className:`text-xs ${new Date(ot.date)<xe?"text-gray-500":"text-orange-400"}`,children:dn(ot.date)})]})]}),a.jsx("h3",{className:"font-bold text-white mb-1 line-clamp-1",children:ot.name}),a.jsx("p",{className:"text-orange-500 text-sm mb-3",children:ot.client}),ot.location&&a.jsxs("p",{className:"text-gray-400 text-sm mb-3 flex items-center",children:[a.jsx("svg",{className:"w-4 h-4 mr-1 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"})}),a.jsx("span",{className:"truncate",children:ot.location})]}),a.jsxs("div",{className:"flex items-center flex-wrap gap-2 text-xs",children:[a.jsxs("span",{className:`px-2 py-1 rounded ${(ot.crew_ids?.length||0)>0?"bg-green-500/20 text-green-400":"bg-gray-700 text-gray-500"}`,children:[" ",ot.crew_ids?.length||0," crew"]}),a.jsxs("span",{className:`px-2 py-1 rounded ${(ot.equipment_ids?.length||0)>0?"bg-blue-500/20 text-blue-400":"bg-gray-700 text-gray-500"}`,children:[" ",ot.equipment_ids?.length||0," items"]}),(ot.flight_links?.length||0)+(ot.accommodation_links?.length||0)+(ot.rental_links?.length||0)>0&&a.jsx("span",{className:"px-2 py-1 rounded bg-purple-500/20 text-purple-400",children:" Travel"})]})]},ot.id)),it.length===0&&a.jsx("div",{className:"col-span-full text-center py-12 text-gray-500",children:a.jsx("p",{children:"No events found."})})]}),u==="list"&&a.jsxs("div",{className:"bg-gray-800/30 rounded-xl border border-gray-700/50 overflow-hidden",children:[a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[600px]",children:[a.jsx("thead",{className:"bg-gray-800/50",children:a.jsxs("tr",{className:"text-left text-gray-400 text-xs uppercase",children:[a.jsx("th",{className:"px-4 py-3",children:"Date"}),a.jsx("th",{className:"px-4 py-3",children:"Event"}),a.jsx("th",{className:"px-4 py-3 hidden sm:table-cell",children:"Client"}),a.jsx("th",{className:"px-4 py-3",children:"Status"}),a.jsx("th",{className:"px-4 py-3 text-center",children:"Crew"}),a.jsx("th",{className:"px-4 py-3 text-center",children:"Gear"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-700/50",children:it.map(ot=>a.jsxs("tr",{onClick:()=>N(ot),className:"hover:bg-gray-800/50 cursor-pointer transition",children:[a.jsxs("td",{className:"px-4 py-3",children:[a.jsx("div",{className:"text-white text-sm",children:pr(ot.date)}),a.jsx("div",{className:`text-xs ${new Date(ot.date)<xe?"text-gray-500":"text-orange-400"}`,children:dn(ot.date)})]}),a.jsxs("td",{className:"px-4 py-3",children:[a.jsx("div",{className:"font-medium text-white",children:ot.name}),a.jsx("div",{className:"text-sm text-gray-400 sm:hidden",children:ot.client})]}),a.jsx("td",{className:"px-4 py-3 text-orange-500 text-sm hidden sm:table-cell",children:ot.client}),a.jsx("td",{className:"px-4 py-3",children:a.jsx("span",{className:`${pn[ot.status]} px-2 py-0.5 rounded text-xs font-medium capitalize`,children:ot.status})}),a.jsx("td",{className:"px-4 py-3 text-center",children:a.jsx("span",{className:`text-sm ${(ot.crew_ids?.length||0)>0?"text-green-400":"text-gray-500"}`,children:ot.crew_ids?.length||0})}),a.jsx("td",{className:"px-4 py-3 text-center",children:a.jsx("span",{className:`text-sm ${(ot.equipment_ids?.length||0)>0?"text-blue-400":"text-gray-500"}`,children:ot.equipment_ids?.length||0})})]},ot.id))})]})}),it.length===0&&a.jsx("div",{className:"text-center py-12 text-gray-500",children:"No events found."})]}),u==="calendar"&&a.jsxs("div",{className:"bg-gray-800/30 rounded-xl border border-gray-700/50 p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("button",{onClick:()=>be(new Date(Oe.getFullYear(),Oe.getMonth()-1)),className:"p-2 hover:bg-gray-700 rounded-lg text-gray-400 hover:text-white",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),a.jsx("h3",{className:"text-lg font-bold text-white",children:Oe.toLocaleDateString("en-AU",{month:"long",year:"numeric"})}),a.jsx("button",{onClick:()=>be(new Date(Oe.getFullYear(),Oe.getMonth()+1)),className:"p-2 hover:bg-gray-700 rounded-lg text-gray-400 hover:text-white",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),a.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(ot=>a.jsx("div",{className:"text-center text-xs text-gray-500 py-2 font-medium",children:ot},ot)),Zn().map((ot,Yt)=>{const kr=Li(ot.date),nr=ot.date.toDateString()===new Date().toDateString();return a.jsxs("div",{className:`min-h-[80px] sm:min-h-[100px] p-1 border border-gray-700/30 rounded ${ot.isCurrentMonth?"bg-gray-800/30":"bg-gray-900/30"} ${nr?"ring-2 ring-orange-500":""}`,children:[a.jsx("div",{className:`text-xs mb-1 ${ot.isCurrentMonth?"text-gray-400":"text-gray-600"} ${nr?"text-orange-500 font-bold":""}`,children:ot.date.getDate()}),a.jsxs("div",{className:"space-y-1",children:[kr.slice(0,2).map(Qt=>a.jsx("div",{onClick:fr=>{fr.stopPropagation(),N(Qt)},className:`text-xs px-1 py-0.5 rounded truncate cursor-pointer ${pn[Qt.status]} text-white`,children:Qt.name},Qt.id)),kr.length>2&&a.jsxs("div",{className:"text-xs text-gray-500 px-1",children:["+",kr.length-2," more"]})]})]},Yt)})]})]})]}),A==="crew"&&a.jsxs("div",{className:"bg-gray-800/30 rounded-xl border border-gray-700/50 p-4 sm:p-6",children:[a.jsx("div",{className:"flex items-center justify-between mb-4",children:a.jsx("h3",{className:"text-lg font-bold text-white",children:" Crew Members"})}),a.jsxs("div",{className:"space-y-2",children:[r.map(ot=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-700/30 rounded-lg hover:bg-gray-700/50 cursor-pointer transition",onClick:()=>Dt(ot),children:[a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("div",{className:"font-medium text-white",children:ot.name}),a.jsx("div",{className:"text-sm text-gray-400 truncate",children:ot.role||"No role assigned"})]}),a.jsxs("div",{className:"flex items-center space-x-2 ml-2",children:[ot.phone&&a.jsx("a",{href:`tel:${ot.phone}`,onClick:Yt=>Yt.stopPropagation(),className:"p-2 text-gray-400 hover:text-white hover:bg-gray-700 rounded",children:""}),ot.email&&a.jsx("a",{href:`mailto:${ot.email}`,onClick:Yt=>Yt.stopPropagation(),className:"p-2 text-gray-400 hover:text-white hover:bg-gray-700 rounded",children:""}),a.jsx("button",{onClick:Yt=>{Yt.stopPropagation(),rt(ot.id)},className:"p-2 text-red-500/50 hover:text-red-500 hover:bg-red-500/10 rounded",children:""})]})]},ot.id)),r.length===0&&a.jsx("p",{className:"text-gray-500 text-center py-8",children:'No crew members yet. Click "Add Crew" to add one.'})]})]}),A==="equipment"&&a.jsxs("div",{className:"bg-gray-800/30 rounded-xl border border-gray-700/50 p-4 sm:p-6",children:[a.jsx("div",{className:"flex items-center justify-between mb-4",children:a.jsx("h3",{className:"text-lg font-bold text-white",children:" Equipment Inventory"})}),a.jsxs("div",{className:"space-y-3 max-h-[400px] overflow-y-auto",children:[Kn.filter(ot=>i.some(Yt=>Yt.category===ot)).map(ot=>a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wide mb-2 sticky top-0 bg-gray-800/90 py-1",children:ot}),i.filter(Yt=>Yt.category===ot).map(Yt=>a.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-700/30 rounded mb-1 hover:bg-gray-700/50 cursor-pointer transition",onClick:()=>_t(Yt),children:[a.jsx("span",{className:"text-white text-sm",children:Yt.name}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("span",{className:"text-sm text-gray-400",children:["",Yt.quantity]}),a.jsx("button",{onClick:kr=>{kr.stopPropagation(),wt(Yt.id)},className:"text-red-500/50 hover:text-red-500 text-xs",children:""})]})]},Yt.id))]},ot)),i.length===0&&a.jsx("p",{className:"text-gray-500 text-center py-8",children:'No equipment yet. Click "Add Equipment" to add some.'})]})]}),A==="assign"&&a.jsx(nFe,{events:t,crewMembers:r,equipment:i,onAssignCrew:async(ot,Yt)=>{const kr=[...ot.crew_ids||[],Yt.id];await Rr.from("production_events").update({crew_ids:kr}).eq("id",ot.id),e(t.map(nr=>nr.id===ot.id?{...nr,crew_ids:kr}:nr))},onUnassignCrew:async(ot,Yt)=>{const kr=(ot.crew_ids||[]).filter(nr=>nr!==Yt.id);await Rr.from("production_events").update({crew_ids:kr}).eq("id",ot.id),e(t.map(nr=>nr.id===ot.id?{...nr,crew_ids:kr}:nr))},onAssignEquipment:async(ot,Yt)=>{const kr=[...ot.equipment_ids||[],Yt.id];await Rr.from("production_events").update({equipment_ids:kr}).eq("id",ot.id),e(t.map(nr=>nr.id===ot.id?{...nr,equipment_ids:kr}:nr))},onUnassignEquipment:async(ot,Yt)=>{const kr=(ot.equipment_ids||[]).filter(nr=>nr!==Yt.id);await Rr.from("production_events").update({equipment_ids:kr}).eq("id",ot.id),e(t.map(nr=>nr.id===ot.id?{...nr,equipment_ids:kr}:nr))}}),g&&a.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-start sm:items-center justify-center z-50 p-4 overflow-y-auto",children:a.jsxs("div",{className:"bg-gray-800 rounded-xl w-full max-w-2xl my-4",children:[a.jsxs("div",{className:"p-4 sm:p-6 border-b border-gray-700 flex items-center justify-between sticky top-0 bg-gray-800 rounded-t-xl",children:[a.jsx("h3",{className:"text-xl font-bold text-white",children:I?"Edit Event":"New Event"}),a.jsx("button",{onClick:()=>y(!1),className:"text-gray-400 hover:text-white text-2xl leading-none",children:""})]}),a.jsxs("form",{onSubmit:ht,className:"p-4 sm:p-6 space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Event Name *"}),a.jsx("input",{type:"text",required:!0,value:Ae.name,onChange:ot=>we({...Ae,name:ot.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2.5 text-white focus:border-orange-500 focus:outline-none"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Client *"}),a.jsx("input",{type:"text",required:!0,value:Ae.client,onChange:ot=>we({...Ae,client:ot.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2.5 text-white focus:border-orange-500 focus:outline-none"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Date *"}),a.jsx("input",{type:"date",required:!0,value:Ae.date,onChange:ot=>we({...Ae,date:ot.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2.5 text-white focus:border-orange-500 focus:outline-none"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Status"}),a.jsxs("select",{value:Ae.status,onChange:ot=>we({...Ae,status:ot.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2.5 text-white focus:border-orange-500 focus:outline-none",children:[a.jsx("option",{value:"tentative",children:"Tentative"}),a.jsx("option",{value:"confirmed",children:"Confirmed"}),a.jsx("option",{value:"completed",children:"Completed"}),a.jsx("option",{value:"cancelled",children:"Cancelled"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Location"}),a.jsx("input",{type:"text",value:Ae.location,onChange:ot=>we({...Ae,location:ot.target.value}),placeholder:"Venue, City",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2.5 text-white focus:border-orange-500 focus:outline-none"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Notes"}),a.jsx("textarea",{rows:"2",value:Ae.notes,onChange:ot=>we({...Ae,notes:ot.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2.5 text-white focus:border-orange-500 focus:outline-none resize-none"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Assign Crew"}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 max-h-32 overflow-y-auto bg-gray-900/50 rounded-lg p-2",children:[r.map(ot=>a.jsxs("label",{className:"flex items-center space-x-2 p-2 bg-gray-700/30 rounded cursor-pointer hover:bg-gray-700/50",children:[a.jsx("input",{type:"checkbox",checked:Ae.crew_ids.includes(ot.id),onChange:Yt=>{const kr=Yt.target.checked?[...Ae.crew_ids,ot.id]:Ae.crew_ids.filter(nr=>nr!==ot.id);we({...Ae,crew_ids:kr})},className:"rounded border-gray-600 text-orange-500 focus:ring-orange-500"}),a.jsx("span",{className:"text-white text-sm",children:ot.name})]},ot.id)),r.length===0&&a.jsx("p",{className:"text-gray-500 text-sm col-span-2 text-center py-2",children:"No crew members to assign"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Assign Equipment"}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 max-h-40 overflow-y-auto bg-gray-900/50 rounded-lg p-2",children:[i.map(ot=>a.jsxs("label",{className:"flex items-center space-x-2 p-2 bg-gray-700/30 rounded cursor-pointer hover:bg-gray-700/50",children:[a.jsx("input",{type:"checkbox",checked:Ae.equipment_ids.includes(ot.id),onChange:Yt=>{const kr=Yt.target.checked?[...Ae.equipment_ids,ot.id]:Ae.equipment_ids.filter(nr=>nr!==ot.id);we({...Ae,equipment_ids:kr})},className:"rounded border-gray-600 text-blue-500 focus:ring-blue-500"}),a.jsx("span",{className:"text-sm text-white truncate",children:ot.name})]},ot.id)),i.length===0&&a.jsx("p",{className:"text-gray-500 text-sm col-span-2 text-center py-2",children:"No equipment to assign"})]})]}),a.jsxs("div",{className:"border-t border-gray-700 pt-4",children:[a.jsx("h4",{className:"font-medium text-white mb-3",children:" Travel & Logistics"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Flight Links"}),a.jsx("input",{type:"text",value:Ae.flight_links,onChange:ot=>we({...Ae,flight_links:ot.target.value}),placeholder:"Comma-separated URLs",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white text-sm focus:border-orange-500 focus:outline-none"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Accommodation Links"}),a.jsx("input",{type:"text",value:Ae.accommodation_links,onChange:ot=>we({...Ae,accommodation_links:ot.target.value}),placeholder:"Comma-separated URLs",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white text-sm focus:border-orange-500 focus:outline-none"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Rental Car Links"}),a.jsx("input",{type:"text",value:Ae.rental_links,onChange:ot=>we({...Ae,rental_links:ot.target.value}),placeholder:"Comma-separated URLs",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white text-sm focus:border-orange-500 focus:outline-none"})]})]})]}),a.jsxs("div",{className:"flex flex-col-reverse sm:flex-row justify-end gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>y(!1),className:"px-4 py-2.5 bg-gray-700 hover:bg-gray-600 rounded-lg text-white",children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-6 py-2.5 bg-orange-600 hover:bg-orange-700 rounded-lg font-medium text-white",children:I?"Save Changes":"Create Event"})]})]})]})}),C&&a.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-start sm:items-center justify-center z-50 p-4 overflow-y-auto",children:a.jsxs("div",{className:"bg-gray-800 rounded-xl w-full max-w-3xl my-4",children:[a.jsxs("div",{className:"p-4 sm:p-6 border-b border-gray-700 flex items-center justify-between sticky top-0 bg-gray-800 rounded-t-xl",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-bold text-white",children:C.name}),a.jsx("p",{className:"text-orange-500 text-sm",children:C.client})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>{f(C),N(null)},className:"px-3 py-1.5 bg-gray-700 hover:bg-gray-600 rounded text-sm font-medium flex items-center gap-1",children:" Brief"}),a.jsx("button",{onClick:()=>{nt(C),N(null)},className:"px-3 py-1.5 bg-orange-600 hover:bg-orange-700 rounded text-sm font-medium",children:"Edit"}),a.jsx("button",{onClick:()=>N(null),className:"text-gray-400 hover:text-white text-2xl leading-none",children:""})]})]}),a.jsxs("div",{className:"p-4 sm:p-6 space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500 text-xs uppercase",children:"Date"}),a.jsx("p",{className:"font-medium text-white",children:Xr(C.date)}),a.jsx("p",{className:`text-sm ${new Date(C.date)<xe?"text-gray-500":"text-orange-400"}`,children:dn(C.date)})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500 text-xs uppercase",children:"Location"}),a.jsx("p",{className:"font-medium text-white",children:C.location||"TBD"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500 text-xs uppercase",children:"Status"}),a.jsx("p",{children:a.jsx("span",{className:`${pn[C.status]} px-2 py-0.5 rounded text-xs font-medium capitalize`,children:C.status})})]})]}),C.notes&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500 text-xs uppercase",children:"Notes"}),a.jsx("p",{className:"mt-1 text-gray-300 text-sm",children:C.notes})]}),a.jsxs("div",{children:[a.jsx("div",{className:"flex items-center justify-between mb-3",children:a.jsxs("h4",{className:"font-medium text-white",children:[" Crew (",yn(C.crew_ids).length,")"]})}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:r.map(ot=>{const Yt=(C.crew_ids||[]).includes(ot.id);return a.jsxs("div",{onClick:()=>Tt(C.id,ot.id,!Yt),className:`p-3 rounded-lg cursor-pointer transition flex items-center justify-between ${Yt?"bg-green-500/20 border border-green-500/50":"bg-gray-700/30 border border-gray-700 hover:border-gray-600"}`,children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-white",children:ot.name}),a.jsx("span",{className:"text-gray-400 text-sm ml-2",children:ot.role})]}),Yt?a.jsx("span",{className:"text-green-400 text-sm",children:" Assigned"}):a.jsx("span",{className:"text-gray-500 text-sm",children:"+ Add"})]},ot.id)})})]}),a.jsxs("div",{children:[a.jsx("div",{className:"flex items-center justify-between mb-3",children:a.jsxs("h4",{className:"font-medium text-white",children:[" Equipment (",Mn(C.equipment_ids).length,")"]})}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2 max-h-48 overflow-y-auto",children:i.map(ot=>{const Yt=(C.equipment_ids||[]).includes(ot.id);return a.jsxs("div",{onClick:()=>Er(C.id,ot.id,!Yt),className:`p-2 rounded-lg cursor-pointer transition flex items-center justify-between ${Yt?"bg-blue-500/20 border border-blue-500/50":"bg-gray-700/30 border border-gray-700 hover:border-gray-600"}`,children:[a.jsx("span",{className:"text-white text-sm truncate",children:ot.name}),Yt?a.jsx("span",{className:"text-blue-400 text-xs ml-2",children:""}):a.jsx("span",{className:"text-gray-500 text-xs ml-2",children:"+"})]},ot.id)})})]}),a.jsxs("div",{className:"border-t border-gray-700 pt-4",children:[a.jsx("h4",{className:"font-medium text-white mb-4",children:" Travel & Logistics"}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500 text-xs uppercase",children:"Flights"}),C.flight_links?.length?C.flight_links.map((ot,Yt)=>a.jsxs("a",{href:ot,target:"_blank",rel:"noopener noreferrer",className:"block text-blue-400 hover:underline text-sm truncate mt-1",children:[" Flight ",Yt+1]},Yt)):a.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"None added"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500 text-xs uppercase",children:"Accommodation"}),C.accommodation_links?.length?C.accommodation_links.map((ot,Yt)=>a.jsxs("a",{href:ot,target:"_blank",rel:"noopener noreferrer",className:"block text-blue-400 hover:underline text-sm truncate mt-1",children:[" Booking ",Yt+1]},Yt)):a.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"None added"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500 text-xs uppercase",children:"Rental Cars"}),C.rental_links?.length?C.rental_links.map((ot,Yt)=>a.jsxs("a",{href:ot,target:"_blank",rel:"noopener noreferrer",className:"block text-blue-400 hover:underline text-sm truncate mt-1",children:[" Rental ",Yt+1]},Yt)):a.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"None added"})]})]})]}),a.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-700",children:a.jsx("button",{onClick:()=>Be(C.id),className:"px-4 py-2 text-red-500 hover:bg-red-500/10 rounded-lg text-sm",children:" Delete Event"})})]})]})}),x&&a.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-gray-800 rounded-xl w-full max-w-md",children:[a.jsxs("div",{className:"p-4 sm:p-6 border-b border-gray-700 flex items-center justify-between",children:[a.jsx("h3",{className:"text-xl font-bold text-white",children:K?"Edit Crew Member":"Add Crew Member"}),a.jsx("button",{onClick:()=>w(!1),className:"text-gray-400 hover:text-white text-2xl leading-none",children:""})]}),a.jsxs("form",{onSubmit:ft,className:"p-4 sm:p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Name *"}),a.jsx("input",{type:"text",required:!0,value:Ce.name,onChange:ot=>ve({...Ce,name:ot.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2.5 text-white focus:border-orange-500 focus:outline-none"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Role"}),a.jsx("input",{type:"text",value:Ce.role,onChange:ot=>ve({...Ce,role:ot.target.value}),placeholder:"e.g. Camera Operator, Director, Audio",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2.5 text-white focus:border-orange-500 focus:outline-none"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Phone"}),a.jsx("input",{type:"tel",value:Ce.phone,onChange:ot=>ve({...Ce,phone:ot.target.value}),placeholder:"0400 000 000",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2.5 text-white focus:border-orange-500 focus:outline-none"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Email"}),a.jsx("input",{type:"email",value:Ce.email,onChange:ot=>ve({...Ce,email:ot.target.value}),placeholder:"name@email.com",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2.5 text-white focus:border-orange-500 focus:outline-none"})]}),a.jsxs("div",{className:"flex flex-col-reverse sm:flex-row justify-end gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>w(!1),className:"px-4 py-2.5 bg-gray-700 hover:bg-gray-600 rounded-lg text-white",children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-6 py-2.5 bg-orange-600 hover:bg-orange-700 rounded-lg font-medium text-white",children:K?"Save Changes":"Add Crew"})]})]})]})}),d&&a.jsx(wDe,{event:d,crew:r,equipment:i,onClose:()=>f(null)}),E&&a.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-gray-800 rounded-xl w-full max-w-md",children:[a.jsxs("div",{className:"p-4 sm:p-6 border-b border-gray-700 flex items-center justify-between",children:[a.jsx("h3",{className:"text-xl font-bold text-white",children:re?"Edit Equipment":"Add Equipment"}),a.jsx("button",{onClick:()=>T(!1),className:"text-gray-400 hover:text-white text-2xl leading-none",children:""})]}),a.jsxs("form",{onSubmit:kt,className:"p-4 sm:p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Equipment Name *"}),a.jsx("input",{type:"text",required:!0,value:ne.name,onChange:ot=>ce({...ne,name:ot.target.value}),placeholder:"e.g. Sony FX6",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2.5 text-white focus:border-blue-500 focus:outline-none"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Category"}),a.jsx("select",{value:ne.category,onChange:ot=>ce({...ne,category:ot.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2.5 text-white focus:border-blue-500 focus:outline-none",children:Kn.map(ot=>a.jsx("option",{value:ot,children:ot},ot))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Quantity"}),a.jsx("input",{type:"number",min:"1",value:ne.quantity,onChange:ot=>ce({...ne,quantity:parseInt(ot.target.value)||1}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2.5 text-white focus:border-blue-500 focus:outline-none"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Notes"}),a.jsx("input",{type:"text",value:ne.notes||"",onChange:ot=>ce({...ne,notes:ot.target.value}),placeholder:"Serial number, condition, etc.",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2.5 text-white focus:border-blue-500 focus:outline-none"})]}),a.jsxs("div",{className:"flex flex-col-reverse sm:flex-row justify-end gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>T(!1),className:"px-4 py-2.5 bg-gray-700 hover:bg-gray-600 rounded-lg text-white",children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-6 py-2.5 bg-blue-600 hover:bg-blue-700 rounded-lg font-medium text-white",children:re?"Save Changes":"Add Equipment"})]})]})]})})]})}function sFe(t,e){const r=j.useRef(e);j.useEffect(function(){e!==r.current&&t.attributionControl!=null&&(r.current!=null&&t.attributionControl.removeAttribution(r.current),e!=null&&t.attributionControl.addAttribution(e)),r.current=e},[t,e])}function aFe(t,e,r){e.center!==r.center&&t.setLatLng(e.center),e.radius!=null&&e.radius!==r.radius&&t.setRadius(e.radius)}const oFe=1;function lFe(t){return Object.freeze({__version:oFe,map:t})}function mne(t,e){return Object.freeze({...t,...e})}const rF=j.createContext(null);function nF(){const t=j.use(rF);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function pne(t){function e(r,n){const{instance:i,context:s}=t(r).current;j.useImperativeHandle(n,()=>i);const{children:o}=r;return o==null?null:So.createElement(rF,{value:s},o)}return j.forwardRef(e)}function cFe(t){function e(r,n){const{instance:i}=t(r).current;return j.useImperativeHandle(n,()=>i),null}return j.forwardRef(e)}function gne(t,e){const r=j.useRef(void 0);j.useEffect(function(){return e!=null&&t.instance.on(e),r.current=e,function(){r.current!=null&&t.instance.off(r.current),r.current=null}},[t,e])}function iF(t,e){const r=t.pane??e.pane;return r?{...t,pane:r}:t}var vw={exports:{}};var uFe=vw.exports,Wz;function dFe(){return Wz||(Wz=1,(function(t,e){(function(r,n){n(e)})(uFe,(function(r){var n="1.9.4";function i(v){var _,H,oe,Ee;for(H=1,oe=arguments.length;H<oe;H++){Ee=arguments[H];for(_ in Ee)v[_]=Ee[_]}return v}var s=Object.create||(function(){function v(){}return function(_){return v.prototype=_,new v}})();function o(v,_){var H=Array.prototype.slice;if(v.bind)return v.bind.apply(v,H.call(arguments,1));var oe=H.call(arguments,2);return function(){return v.apply(_,oe.length?oe.concat(H.call(arguments)):arguments)}}var c=0;function u(v){return"_leaflet_id"in v||(v._leaflet_id=++c),v._leaflet_id}function l(v,_,H){var oe,Ee,Ve,jt;return jt=function(){oe=!1,Ee&&(Ve.apply(H,Ee),Ee=!1)},Ve=function(){oe?Ee=arguments:(v.apply(H,arguments),setTimeout(jt,_),oe=!0)},Ve}function d(v,_,H){var oe=_[1],Ee=_[0],Ve=oe-Ee;return v===oe&&H?v:((v-Ee)%Ve+Ve)%Ve+Ee}function f(){return!1}function A(v,_){if(_===!1)return v;var H=Math.pow(10,_===void 0?6:_);return Math.round(v*H)/H}function p(v){return v.trim?v.trim():v.replace(/^\s+|\s+$/g,"")}function g(v){return p(v).split(/\s+/)}function y(v,_){Object.prototype.hasOwnProperty.call(v,"options")||(v.options=v.options?s(v.options):{});for(var H in _)v.options[H]=_[H];return v.options}function x(v,_,H){var oe=[];for(var Ee in v)oe.push(encodeURIComponent(H?Ee.toUpperCase():Ee)+"="+encodeURIComponent(v[Ee]));return(!_||_.indexOf("?")===-1?"?":"&")+oe.join("&")}var w=/\{ *([\w_ -]+) *\}/g;function E(v,_){return v.replace(w,function(H,oe){var Ee=_[oe];if(Ee===void 0)throw new Error("No value provided for variable "+H);return typeof Ee=="function"&&(Ee=Ee(_)),Ee})}var T=Array.isArray||function(v){return Object.prototype.toString.call(v)==="[object Array]"};function C(v,_){for(var H=0;H<v.length;H++)if(v[H]===_)return H;return-1}var N="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function I(v){return window["webkit"+v]||window["moz"+v]||window["ms"+v]}var U=0;function K(v){var _=+new Date,H=Math.max(0,16-(_-U));return U=_+H,window.setTimeout(v,H)}var Y=window.requestAnimationFrame||I("RequestAnimationFrame")||K,re=window.cancelAnimationFrame||I("CancelAnimationFrame")||I("CancelRequestAnimationFrame")||function(v){window.clearTimeout(v)};function se(v,_,H){if(H&&Y===K)v.call(_);else return Y.call(window,o(v,_))}function Ae(v){v&&re.call(window,v)}var we={__proto__:null,extend:i,create:s,bind:o,get lastId(){return c},stamp:u,throttle:l,wrapNum:d,falseFn:f,formatNum:A,trim:p,splitWords:g,setOptions:y,getParamString:x,template:E,isArray:T,indexOf:C,emptyImageUrl:N,requestFn:Y,cancelFn:re,requestAnimFrame:se,cancelAnimFrame:Ae};function Ce(){}Ce.extend=function(v){var _=function(){y(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},H=_.__super__=this.prototype,oe=s(H);oe.constructor=_,_.prototype=oe;for(var Ee in this)Object.prototype.hasOwnProperty.call(this,Ee)&&Ee!=="prototype"&&Ee!=="__super__"&&(_[Ee]=this[Ee]);return v.statics&&i(_,v.statics),v.includes&&(ve(v.includes),i.apply(null,[oe].concat(v.includes))),i(oe,v),delete oe.statics,delete oe.includes,oe.options&&(oe.options=H.options?s(H.options):{},i(oe.options,v.options)),oe._initHooks=[],oe.callInitHooks=function(){if(!this._initHooksCalled){H.callInitHooks&&H.callInitHooks.call(this),this._initHooksCalled=!0;for(var Ve=0,jt=oe._initHooks.length;Ve<jt;Ve++)oe._initHooks[Ve].call(this)}},_},Ce.include=function(v){var _=this.prototype.options;return i(this.prototype,v),v.options&&(this.prototype.options=_,this.mergeOptions(v.options)),this},Ce.mergeOptions=function(v){return i(this.prototype.options,v),this},Ce.addInitHook=function(v){var _=Array.prototype.slice.call(arguments,1),H=typeof v=="function"?v:function(){this[v].apply(this,_)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(H),this};function ve(v){if(!(typeof L>"u"||!L||!L.Mixin)){v=T(v)?v:[v];for(var _=0;_<v.length;_++)v[_]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var ne={on:function(v,_,H){if(typeof v=="object")for(var oe in v)this._on(oe,v[oe],_);else{v=g(v);for(var Ee=0,Ve=v.length;Ee<Ve;Ee++)this._on(v[Ee],_,H)}return this},off:function(v,_,H){if(!arguments.length)delete this._events;else if(typeof v=="object")for(var oe in v)this._off(oe,v[oe],_);else{v=g(v);for(var Ee=arguments.length===1,Ve=0,jt=v.length;Ve<jt;Ve++)Ee?this._off(v[Ve]):this._off(v[Ve],_,H)}return this},_on:function(v,_,H,oe){if(typeof _!="function"){console.warn("wrong listener type: "+typeof _);return}if(this._listens(v,_,H)===!1){H===this&&(H=void 0);var Ee={fn:_,ctx:H};oe&&(Ee.once=!0),this._events=this._events||{},this._events[v]=this._events[v]||[],this._events[v].push(Ee)}},_off:function(v,_,H){var oe,Ee,Ve;if(this._events&&(oe=this._events[v],!!oe)){if(arguments.length===1){if(this._firingCount)for(Ee=0,Ve=oe.length;Ee<Ve;Ee++)oe[Ee].fn=f;delete this._events[v];return}if(typeof _!="function"){console.warn("wrong listener type: "+typeof _);return}var jt=this._listens(v,_,H);if(jt!==!1){var Jt=oe[jt];this._firingCount&&(Jt.fn=f,this._events[v]=oe=oe.slice()),oe.splice(jt,1)}}},fire:function(v,_,H){if(!this.listens(v,H))return this;var oe=i({},_,{type:v,target:this,sourceTarget:_&&_.sourceTarget||this});if(this._events){var Ee=this._events[v];if(Ee){this._firingCount=this._firingCount+1||1;for(var Ve=0,jt=Ee.length;Ve<jt;Ve++){var Jt=Ee[Ve],br=Jt.fn;Jt.once&&this.off(v,br,Jt.ctx),br.call(Jt.ctx||this,oe)}this._firingCount--}}return H&&this._propagateEvent(oe),this},listens:function(v,_,H,oe){typeof v!="string"&&console.warn('"string" type argument expected');var Ee=_;typeof _!="function"&&(oe=!!_,Ee=void 0,H=void 0);var Ve=this._events&&this._events[v];if(Ve&&Ve.length&&this._listens(v,Ee,H)!==!1)return!0;if(oe){for(var jt in this._eventParents)if(this._eventParents[jt].listens(v,_,H,oe))return!0}return!1},_listens:function(v,_,H){if(!this._events)return!1;var oe=this._events[v]||[];if(!_)return!!oe.length;H===this&&(H=void 0);for(var Ee=0,Ve=oe.length;Ee<Ve;Ee++)if(oe[Ee].fn===_&&oe[Ee].ctx===H)return Ee;return!1},once:function(v,_,H){if(typeof v=="object")for(var oe in v)this._on(oe,v[oe],_,!0);else{v=g(v);for(var Ee=0,Ve=v.length;Ee<Ve;Ee++)this._on(v[Ee],_,H,!0)}return this},addEventParent:function(v){return this._eventParents=this._eventParents||{},this._eventParents[u(v)]=v,this},removeEventParent:function(v){return this._eventParents&&delete this._eventParents[u(v)],this},_propagateEvent:function(v){for(var _ in this._eventParents)this._eventParents[_].fire(v.type,i({layer:v.target,propagatedFrom:v.target},v),!0)}};ne.addEventListener=ne.on,ne.removeEventListener=ne.clearAllEventListeners=ne.off,ne.addOneTimeEventListener=ne.once,ne.fireEvent=ne.fire,ne.hasEventListeners=ne.listens;var ce=Ce.extend(ne);function ae(v,_,H){this.x=H?Math.round(v):v,this.y=H?Math.round(_):_}var De=Math.trunc||function(v){return v>0?Math.floor(v):Math.ceil(v)};ae.prototype={clone:function(){return new ae(this.x,this.y)},add:function(v){return this.clone()._add(Oe(v))},_add:function(v){return this.x+=v.x,this.y+=v.y,this},subtract:function(v){return this.clone()._subtract(Oe(v))},_subtract:function(v){return this.x-=v.x,this.y-=v.y,this},divideBy:function(v){return this.clone()._divideBy(v)},_divideBy:function(v){return this.x/=v,this.y/=v,this},multiplyBy:function(v){return this.clone()._multiplyBy(v)},_multiplyBy:function(v){return this.x*=v,this.y*=v,this},scaleBy:function(v){return new ae(this.x*v.x,this.y*v.y)},unscaleBy:function(v){return new ae(this.x/v.x,this.y/v.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=De(this.x),this.y=De(this.y),this},distanceTo:function(v){v=Oe(v);var _=v.x-this.x,H=v.y-this.y;return Math.sqrt(_*_+H*H)},equals:function(v){return v=Oe(v),v.x===this.x&&v.y===this.y},contains:function(v){return v=Oe(v),Math.abs(v.x)<=Math.abs(this.x)&&Math.abs(v.y)<=Math.abs(this.y)},toString:function(){return"Point("+A(this.x)+", "+A(this.y)+")"}};function Oe(v,_,H){return v instanceof ae?v:T(v)?new ae(v[0],v[1]):v==null?v:typeof v=="object"&&"x"in v&&"y"in v?new ae(v.x,v.y):new ae(v,_,H)}function be(v,_){if(v)for(var H=_?[v,_]:v,oe=0,Ee=H.length;oe<Ee;oe++)this.extend(H[oe])}be.prototype={extend:function(v){var _,H;if(!v)return this;if(v instanceof ae||typeof v[0]=="number"||"x"in v)_=H=Oe(v);else if(v=de(v),_=v.min,H=v.max,!_||!H)return this;return!this.min&&!this.max?(this.min=_.clone(),this.max=H.clone()):(this.min.x=Math.min(_.x,this.min.x),this.max.x=Math.max(H.x,this.max.x),this.min.y=Math.min(_.y,this.min.y),this.max.y=Math.max(H.y,this.max.y)),this},getCenter:function(v){return Oe((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,v)},getBottomLeft:function(){return Oe(this.min.x,this.max.y)},getTopRight:function(){return Oe(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(v){var _,H;return typeof v[0]=="number"||v instanceof ae?v=Oe(v):v=de(v),v instanceof be?(_=v.min,H=v.max):_=H=v,_.x>=this.min.x&&H.x<=this.max.x&&_.y>=this.min.y&&H.y<=this.max.y},intersects:function(v){v=de(v);var _=this.min,H=this.max,oe=v.min,Ee=v.max,Ve=Ee.x>=_.x&&oe.x<=H.x,jt=Ee.y>=_.y&&oe.y<=H.y;return Ve&&jt},overlaps:function(v){v=de(v);var _=this.min,H=this.max,oe=v.min,Ee=v.max,Ve=Ee.x>_.x&&oe.x<H.x,jt=Ee.y>_.y&&oe.y<H.y;return Ve&&jt},isValid:function(){return!!(this.min&&this.max)},pad:function(v){var _=this.min,H=this.max,oe=Math.abs(_.x-H.x)*v,Ee=Math.abs(_.y-H.y)*v;return de(Oe(_.x-oe,_.y-Ee),Oe(H.x+oe,H.y+Ee))},equals:function(v){return v?(v=de(v),this.min.equals(v.getTopLeft())&&this.max.equals(v.getBottomRight())):!1}};function de(v,_){return!v||v instanceof be?v:new be(v,_)}function xe(v,_){if(v)for(var H=_?[v,_]:v,oe=0,Ee=H.length;oe<Ee;oe++)this.extend(H[oe])}xe.prototype={extend:function(v){var _=this._southWest,H=this._northEast,oe,Ee;if(v instanceof Me)oe=v,Ee=v;else if(v instanceof xe){if(oe=v._southWest,Ee=v._northEast,!oe||!Ee)return this}else return v?this.extend(Re(v)||je(v)):this;return!_&&!H?(this._southWest=new Me(oe.lat,oe.lng),this._northEast=new Me(Ee.lat,Ee.lng)):(_.lat=Math.min(oe.lat,_.lat),_.lng=Math.min(oe.lng,_.lng),H.lat=Math.max(Ee.lat,H.lat),H.lng=Math.max(Ee.lng,H.lng)),this},pad:function(v){var _=this._southWest,H=this._northEast,oe=Math.abs(_.lat-H.lat)*v,Ee=Math.abs(_.lng-H.lng)*v;return new xe(new Me(_.lat-oe,_.lng-Ee),new Me(H.lat+oe,H.lng+Ee))},getCenter:function(){return new Me((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Me(this.getNorth(),this.getWest())},getSouthEast:function(){return new Me(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(v){typeof v[0]=="number"||v instanceof Me||"lat"in v?v=Re(v):v=je(v);var _=this._southWest,H=this._northEast,oe,Ee;return v instanceof xe?(oe=v.getSouthWest(),Ee=v.getNorthEast()):oe=Ee=v,oe.lat>=_.lat&&Ee.lat<=H.lat&&oe.lng>=_.lng&&Ee.lng<=H.lng},intersects:function(v){v=je(v);var _=this._southWest,H=this._northEast,oe=v.getSouthWest(),Ee=v.getNorthEast(),Ve=Ee.lat>=_.lat&&oe.lat<=H.lat,jt=Ee.lng>=_.lng&&oe.lng<=H.lng;return Ve&&jt},overlaps:function(v){v=je(v);var _=this._southWest,H=this._northEast,oe=v.getSouthWest(),Ee=v.getNorthEast(),Ve=Ee.lat>_.lat&&oe.lat<H.lat,jt=Ee.lng>_.lng&&oe.lng<H.lng;return Ve&&jt},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(v,_){return v?(v=je(v),this._southWest.equals(v.getSouthWest(),_)&&this._northEast.equals(v.getNorthEast(),_)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function je(v,_){return v instanceof xe?v:new xe(v,_)}function Me(v,_,H){if(isNaN(v)||isNaN(_))throw new Error("Invalid LatLng object: ("+v+", "+_+")");this.lat=+v,this.lng=+_,H!==void 0&&(this.alt=+H)}Me.prototype={equals:function(v,_){if(!v)return!1;v=Re(v);var H=Math.max(Math.abs(this.lat-v.lat),Math.abs(this.lng-v.lng));return H<=(_===void 0?1e-9:_)},toString:function(v){return"LatLng("+A(this.lat,v)+", "+A(this.lng,v)+")"},distanceTo:function(v){return ht.distance(this,Re(v))},wrap:function(){return ht.wrapLatLng(this)},toBounds:function(v){var _=180*v/40075017,H=_/Math.cos(Math.PI/180*this.lat);return je([this.lat-_,this.lng-H],[this.lat+_,this.lng+H])},clone:function(){return new Me(this.lat,this.lng,this.alt)}};function Re(v,_,H){return v instanceof Me?v:T(v)&&typeof v[0]!="object"?v.length===3?new Me(v[0],v[1],v[2]):v.length===2?new Me(v[0],v[1]):null:v==null?v:typeof v=="object"&&"lat"in v?new Me(v.lat,"lng"in v?v.lng:v.lon,v.alt):_===void 0?null:new Me(v,_,H)}var it={latLngToPoint:function(v,_){var H=this.projection.project(v),oe=this.scale(_);return this.transformation._transform(H,oe)},pointToLatLng:function(v,_){var H=this.scale(_),oe=this.transformation.untransform(v,H);return this.projection.unproject(oe)},project:function(v){return this.projection.project(v)},unproject:function(v){return this.projection.unproject(v)},scale:function(v){return 256*Math.pow(2,v)},zoom:function(v){return Math.log(v/256)/Math.LN2},getProjectedBounds:function(v){if(this.infinite)return null;var _=this.projection.bounds,H=this.scale(v),oe=this.transformation.transform(_.min,H),Ee=this.transformation.transform(_.max,H);return new be(oe,Ee)},infinite:!1,wrapLatLng:function(v){var _=this.wrapLng?d(v.lng,this.wrapLng,!0):v.lng,H=this.wrapLat?d(v.lat,this.wrapLat,!0):v.lat,oe=v.alt;return new Me(H,_,oe)},wrapLatLngBounds:function(v){var _=v.getCenter(),H=this.wrapLatLng(_),oe=_.lat-H.lat,Ee=_.lng-H.lng;if(oe===0&&Ee===0)return v;var Ve=v.getSouthWest(),jt=v.getNorthEast(),Jt=new Me(Ve.lat-oe,Ve.lng-Ee),br=new Me(jt.lat-oe,jt.lng-Ee);return new xe(Jt,br)}},ht=i({},it,{wrapLng:[-180,180],R:6371e3,distance:function(v,_){var H=Math.PI/180,oe=v.lat*H,Ee=_.lat*H,Ve=Math.sin((_.lat-v.lat)*H/2),jt=Math.sin((_.lng-v.lng)*H/2),Jt=Ve*Ve+Math.cos(oe)*Math.cos(Ee)*jt*jt,br=2*Math.atan2(Math.sqrt(Jt),Math.sqrt(1-Jt));return this.R*br}}),Be=6378137,nt={R:Be,MAX_LATITUDE:85.0511287798,project:function(v){var _=Math.PI/180,H=this.MAX_LATITUDE,oe=Math.max(Math.min(H,v.lat),-H),Ee=Math.sin(oe*_);return new ae(this.R*v.lng*_,this.R*Math.log((1+Ee)/(1-Ee))/2)},unproject:function(v){var _=180/Math.PI;return new Me((2*Math.atan(Math.exp(v.y/this.R))-Math.PI/2)*_,v.x*_/this.R)},bounds:(function(){var v=Be*Math.PI;return new be([-v,-v],[v,v])})()};function Ge(v,_,H,oe){if(T(v)){this._a=v[0],this._b=v[1],this._c=v[2],this._d=v[3];return}this._a=v,this._b=_,this._c=H,this._d=oe}Ge.prototype={transform:function(v,_){return this._transform(v.clone(),_)},_transform:function(v,_){return _=_||1,v.x=_*(this._a*v.x+this._b),v.y=_*(this._c*v.y+this._d),v},untransform:function(v,_){return _=_||1,new ae((v.x/_-this._b)/this._a,(v.y/_-this._d)/this._c)}};function ft(v,_,H,oe){return new Ge(v,_,H,oe)}var Dt=i({},ht,{code:"EPSG:3857",projection:nt,transformation:(function(){var v=.5/(Math.PI*nt.R);return ft(v,.5,-v,.5)})()}),rt=i({},Dt,{code:"EPSG:900913"});function kt(v){return document.createElementNS("http://www.w3.org/2000/svg",v)}function _t(v,_){var H="",oe,Ee,Ve,jt,Jt,br;for(oe=0,Ve=v.length;oe<Ve;oe++){for(Jt=v[oe],Ee=0,jt=Jt.length;Ee<jt;Ee++)br=Jt[Ee],H+=(Ee?"L":"M")+br.x+" "+br.y;H+=_?Cn.svg?"z":"x":""}return H||"M0 0"}var wt=document.documentElement.style,Tt="ActiveXObject"in window,Er=Tt&&!document.addEventListener,pr="msLaunchUri"in navigator&&!("documentMode"in document),Xr=_n("webkit"),yn=_n("android"),Mn=_n("android 2")||_n("android 3"),dn=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),pn=yn&&_n("Google")&&dn<537&&!("AudioNode"in window),mn=!!window.opera,Kn=!pr&&_n("chrome"),Zn=_n("gecko")&&!Xr&&!mn&&!Tt,Li=!Kn&&_n("safari"),ot=_n("phantom"),Yt="OTransition"in wt,kr=navigator.platform.indexOf("Win")===0,nr=Tt&&"transition"in wt,Qt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Mn,fr="MozPerspective"in wt,zr=!window.L_DISABLE_3D&&(nr||Qt||fr)&&!Yt&&!ot,Yr=typeof orientation<"u"||_n("mobile"),Ln=Yr&&Xr,ln=Yr&&Qt,Jn=!window.PointerEvent&&window.MSPointerEvent,rn=!!(window.PointerEvent||Jn),Ur="ontouchstart"in window||!!window.TouchEvent,An=!window.L_NO_TOUCH&&(Ur||rn),cn=Yr&&mn,On=Yr&&Zn,li=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Cs=(function(){var v=!1;try{var _=Object.defineProperty({},"passive",{get:function(){v=!0}});window.addEventListener("testPassiveEventSupport",f,_),window.removeEventListener("testPassiveEventSupport",f,_)}catch{}return v})(),Ds=(function(){return!!document.createElement("canvas").getContext})(),js=!!(document.createElementNS&&kt("svg").createSVGRect),ei=!!js&&(function(){var v=document.createElement("div");return v.innerHTML="<svg/>",(v.firstChild&&v.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),sn=!js&&(function(){try{var v=document.createElement("div");v.innerHTML='<v:shape adj="1"/>';var _=v.firstChild;return _.style.behavior="url(#default#VML)",_&&typeof _.adj=="object"}catch{return!1}})(),ss=navigator.platform.indexOf("Mac")===0,ta=navigator.platform.indexOf("Linux")===0;function _n(v){return navigator.userAgent.toLowerCase().indexOf(v)>=0}var Cn={ie:Tt,ielt9:Er,edge:pr,webkit:Xr,android:yn,android23:Mn,androidStock:pn,opera:mn,chrome:Kn,gecko:Zn,safari:Li,phantom:ot,opera12:Yt,win:kr,ie3d:nr,webkit3d:Qt,gecko3d:fr,any3d:zr,mobile:Yr,mobileWebkit:Ln,mobileWebkit3d:ln,msPointer:Jn,pointer:rn,touch:An,touchNative:Ur,mobileOpera:cn,mobileGecko:On,retina:li,passiveEvents:Cs,canvas:Ds,svg:js,vml:sn,inlineSvg:ei,mac:ss,linux:ta},Ms=Cn.msPointer?"MSPointerDown":"pointerdown",Qs=Cn.msPointer?"MSPointerMove":"pointermove",Fs=Cn.msPointer?"MSPointerUp":"pointerup",rs=Cn.msPointer?"MSPointerCancel":"pointercancel",qs={touchstart:Ms,touchmove:Qs,touchend:Fs,touchcancel:rs},Os={touchstart:Ws,touchmove:Ya,touchend:Ya,touchcancel:Ya},Qa={},ds=!1;function bu(v,_,H){return _==="touchstart"&&ra(),Os[_]?(H=Os[_].bind(this,H),v.addEventListener(qs[_],H,!1),H):(console.warn("wrong event specified:",_),f)}function to(v,_,H){if(!qs[_]){console.warn("wrong event specified:",_);return}v.removeEventListener(qs[_],H,!1)}function Ml(v){Qa[v.pointerId]=v}function nu(v){Qa[v.pointerId]&&(Qa[v.pointerId]=v)}function ml(v){delete Qa[v.pointerId]}function ra(){ds||(document.addEventListener(Ms,Ml,!0),document.addEventListener(Qs,nu,!0),document.addEventListener(Fs,ml,!0),document.addEventListener(rs,ml,!0),ds=!0)}function Ya(v,_){if(_.pointerType!==(_.MSPOINTER_TYPE_MOUSE||"mouse")){_.touches=[];for(var H in Qa)_.touches.push(Qa[H]);_.changedTouches=[_],v(_)}}function Ws(v,_){_.MSPOINTER_TYPE_TOUCH&&_.pointerType===_.MSPOINTER_TYPE_TOUCH&&ye(_),Ya(v,_)}function ba(v){var _={},H,oe;for(oe in v)H=v[oe],_[oe]=H&&H.bind?H.bind(v):H;return v=_,_.type="dblclick",_.detail=2,_.isTrusted=!1,_._simulated=!0,_}var Us=200;function kl(v,_){v.addEventListener("dblclick",_);var H=0,oe;function Ee(Ve){if(Ve.detail!==1){oe=Ve.detail;return}if(!(Ve.pointerType==="mouse"||Ve.sourceCapabilities&&!Ve.sourceCapabilities.firesTouchEvents)){var jt=me(Ve);if(!(jt.some(function(br){return br instanceof HTMLLabelElement&&br.attributes.for})&&!jt.some(function(br){return br instanceof HTMLInputElement||br instanceof HTMLSelectElement}))){var Jt=Date.now();Jt-H<=Us?(oe++,oe===2&&_(ba(Ve))):oe=1,H=Jt}}}return v.addEventListener("click",Ee),{dblclick:_,simDblclick:Ee}}function po(v,_){v.removeEventListener("dblclick",_.dblclick),v.removeEventListener("click",_.simDblclick)}var ro=Ea(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),pl=Ea(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Fl=pl==="webkitTransition"||pl==="OTransition"?pl+"End":"transitionend";function mc(v){return typeof v=="string"?document.getElementById(v):v}function Vs(v,_){var H=v.style[_]||v.currentStyle&&v.currentStyle[_];if((!H||H==="auto")&&document.defaultView){var oe=document.defaultView.getComputedStyle(v,null);H=oe?oe[_]:null}return H==="auto"?null:H}function ci(v,_,H){var oe=document.createElement(v);return oe.className=_||"",H&&H.appendChild(oe),oe}function Ns(v){var _=v.parentNode;_&&_.removeChild(v)}function Ta(v){for(;v.firstChild;)v.removeChild(v.firstChild)}function Va(v){var _=v.parentNode;_&&_.lastChild!==v&&_.appendChild(v)}function Ca(v){var _=v.parentNode;_&&_.firstChild!==v&&_.insertBefore(v,_.firstChild)}function gi(v,_){if(v.classList!==void 0)return v.classList.contains(_);var H=Qo(v);return H.length>0&&new RegExp("(^|\\s)"+_+"(\\s|$)").test(H)}function Xn(v,_){if(v.classList!==void 0)for(var H=g(_),oe=0,Ee=H.length;oe<Ee;oe++)v.classList.add(H[oe]);else if(!gi(v,_)){var Ve=Qo(v);wa(v,(Ve?Ve+" ":"")+_)}}function hs(v,_){v.classList!==void 0?v.classList.remove(_):wa(v,p((" "+Qo(v)+" ").replace(" "+_+" "," ")))}function wa(v,_){v.className.baseVal===void 0?v.className=_:v.className.baseVal=_}function Qo(v){return v.correspondingElement&&(v=v.correspondingElement),v.className.baseVal===void 0?v.className:v.className.baseVal}function Hi(v,_){"opacity"in v.style?v.style.opacity=_:"filter"in v.style&&Vo(v,_)}function Vo(v,_){var H=!1,oe="DXImageTransform.Microsoft.Alpha";try{H=v.filters.item(oe)}catch{if(_===1)return}_=Math.round(_*100),H?(H.Enabled=_!==100,H.Opacity=_):v.style.filter+=" progid:"+oe+"(opacity="+_+")"}function Ea(v){for(var _=document.documentElement.style,H=0;H<v.length;H++)if(v[H]in _)return v[H];return!1}function Xs(v,_,H){var oe=_||new ae(0,0);v.style[ro]=(Cn.ie3d?"translate("+oe.x+"px,"+oe.y+"px)":"translate3d("+oe.x+"px,"+oe.y+"px,0)")+(H?" scale("+H+")":"")}function fs(v,_){v._leaflet_pos=_,Cn.any3d?Xs(v,_):(v.style.left=_.x+"px",v.style.top=_.y+"px")}function To(v){return v._leaflet_pos||new ae(0,0)}var za,zs,qa;if("onselectstart"in document)za=function(){fe(window,"selectstart",ye)},zs=function(){$e(window,"selectstart",ye)};else{var go=Ea(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);za=function(){if(go){var v=document.documentElement.style;qa=v[go],v[go]="none"}},zs=function(){go&&(document.documentElement.style[go]=qa,qa=void 0)}}function no(){fe(window,"dragstart",ye)}function zo(){$e(window,"dragstart",ye)}var Ht,V;function ie(v){for(;v.tabIndex===-1;)v=v.parentNode;v.style&&(le(),Ht=v,V=v.style.outlineStyle,v.style.outlineStyle="none",fe(window,"keydown",le))}function le(){Ht&&(Ht.style.outlineStyle=V,Ht=void 0,V=void 0,$e(window,"keydown",le))}function F(v){do v=v.parentNode;while((!v.offsetWidth||!v.offsetHeight)&&v!==document.body);return v}function z(v){var _=v.getBoundingClientRect();return{x:_.width/v.offsetWidth||1,y:_.height/v.offsetHeight||1,boundingClientRect:_}}var te={__proto__:null,TRANSFORM:ro,TRANSITION:pl,TRANSITION_END:Fl,get:mc,getStyle:Vs,create:ci,remove:Ns,empty:Ta,toFront:Va,toBack:Ca,hasClass:gi,addClass:Xn,removeClass:hs,setClass:wa,getClass:Qo,setOpacity:Hi,testProp:Ea,setTransform:Xs,setPosition:fs,getPosition:To,get disableTextSelection(){return za},get enableTextSelection(){return zs},disableImageDrag:no,enableImageDrag:zo,preventOutline:ie,restoreOutline:le,getSizedParentNode:F,getScale:z};function fe(v,_,H,oe){if(_&&typeof _=="object")for(var Ee in _)k(v,Ee,_[Ee],H);else{_=g(_);for(var Ve=0,jt=_.length;Ve<jt;Ve++)k(v,_[Ve],H,oe)}return this}var Se="_leaflet_events";function $e(v,_,H,oe){if(arguments.length===1)ct(v),delete v[Se];else if(_&&typeof _=="object")for(var Ee in _)D(v,Ee,_[Ee],H);else if(_=g(_),arguments.length===2)ct(v,function(Jt){return C(_,Jt)!==-1});else for(var Ve=0,jt=_.length;Ve<jt;Ve++)D(v,_[Ve],H,oe);return this}function ct(v,_){for(var H in v[Se]){var oe=H.split(/\d/)[0];(!_||_(oe))&&D(v,oe,null,null,H)}}var P={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function k(v,_,H,oe){var Ee=_+u(H)+(oe?"_"+u(oe):"");if(v[Se]&&v[Se][Ee])return this;var Ve=function(Jt){return H.call(oe||v,Jt||window.event)},jt=Ve;!Cn.touchNative&&Cn.pointer&&_.indexOf("touch")===0?Ve=bu(v,_,Ve):Cn.touch&&_==="dblclick"?Ve=kl(v,Ve):"addEventListener"in v?_==="touchstart"||_==="touchmove"||_==="wheel"||_==="mousewheel"?v.addEventListener(P[_]||_,Ve,Cn.passiveEvents?{passive:!1}:!1):_==="mouseenter"||_==="mouseleave"?(Ve=function(Jt){Jt=Jt||window.event,lt(v,Jt)&&jt(Jt)},v.addEventListener(P[_],Ve,!1)):v.addEventListener(_,jt,!1):v.attachEvent("on"+_,Ve),v[Se]=v[Se]||{},v[Se][Ee]=Ve}function D(v,_,H,oe,Ee){Ee=Ee||_+u(H)+(oe?"_"+u(oe):"");var Ve=v[Se]&&v[Se][Ee];if(!Ve)return this;!Cn.touchNative&&Cn.pointer&&_.indexOf("touch")===0?to(v,_,Ve):Cn.touch&&_==="dblclick"?po(v,Ve):"removeEventListener"in v?v.removeEventListener(P[_]||_,Ve,!1):v.detachEvent("on"+_,Ve),v[Se][Ee]=null}function G(v){return v.stopPropagation?v.stopPropagation():v.originalEvent?v.originalEvent._stopped=!0:v.cancelBubble=!0,this}function X(v){return k(v,"wheel",G),this}function ee(v){return fe(v,"mousedown touchstart dblclick contextmenu",G),v._leaflet_disable_click=!0,this}function ye(v){return v.preventDefault?v.preventDefault():v.returnValue=!1,this}function he(v){return ye(v),G(v),this}function me(v){if(v.composedPath)return v.composedPath();for(var _=[],H=v.target;H;)_.push(H),H=H.parentNode;return _}function Ie(v,_){if(!_)return new ae(v.clientX,v.clientY);var H=z(_),oe=H.boundingClientRect;return new ae((v.clientX-oe.left)/H.x-_.clientLeft,(v.clientY-oe.top)/H.y-_.clientTop)}var Qe=Cn.linux&&Cn.chrome?window.devicePixelRatio:Cn.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function qe(v){return Cn.edge?v.wheelDeltaY/2:v.deltaY&&v.deltaMode===0?-v.deltaY/Qe:v.deltaY&&v.deltaMode===1?-v.deltaY*20:v.deltaY&&v.deltaMode===2?-v.deltaY*60:v.deltaX||v.deltaZ?0:v.wheelDelta?(v.wheelDeltaY||v.wheelDelta)/2:v.detail&&Math.abs(v.detail)<32765?-v.detail*20:v.detail?v.detail/-32765*60:0}function lt(v,_){var H=_.relatedTarget;if(!H)return!0;try{for(;H&&H!==v;)H=H.parentNode}catch{return!1}return H!==v}var Te={__proto__:null,on:fe,off:$e,stopPropagation:G,disableScrollPropagation:X,disableClickPropagation:ee,preventDefault:ye,stop:he,getPropagationPath:me,getMousePosition:Ie,getWheelDelta:qe,isExternalTarget:lt,addListener:fe,removeListener:$e},Et=ce.extend({run:function(v,_,H,oe){this.stop(),this._el=v,this._inProgress=!0,this._duration=H||.25,this._easeOutPower=1/Math.max(oe||.5,.2),this._startPos=To(v),this._offset=_.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=se(this._animate,this),this._step()},_step:function(v){var _=+new Date-this._startTime,H=this._duration*1e3;_<H?this._runFrame(this._easeOut(_/H),v):(this._runFrame(1),this._complete())},_runFrame:function(v,_){var H=this._startPos.add(this._offset.multiplyBy(v));_&&H._round(),fs(this._el,H),this.fire("step")},_complete:function(){Ae(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(v){return 1-Math.pow(1-v,this._easeOutPower)}}),at=ce.extend({options:{crs:Dt,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(v,_){_=y(this,_),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(v),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),_.maxBounds&&this.setMaxBounds(_.maxBounds),_.zoom!==void 0&&(this._zoom=this._limitZoom(_.zoom)),_.center&&_.zoom!==void 0&&this.setView(Re(_.center),_.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=pl&&Cn.any3d&&!Cn.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),fe(this._proxy,Fl,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(v,_,H){if(_=_===void 0?this._zoom:this._limitZoom(_),v=this._limitCenter(Re(v),_,this.options.maxBounds),H=H||{},this._stop(),this._loaded&&!H.reset&&H!==!0){H.animate!==void 0&&(H.zoom=i({animate:H.animate},H.zoom),H.pan=i({animate:H.animate,duration:H.duration},H.pan));var oe=this._zoom!==_?this._tryAnimatedZoom&&this._tryAnimatedZoom(v,_,H.zoom):this._tryAnimatedPan(v,H.pan);if(oe)return clearTimeout(this._sizeTimer),this}return this._resetView(v,_,H.pan&&H.pan.noMoveStart),this},setZoom:function(v,_){return this._loaded?this.setView(this.getCenter(),v,{zoom:_}):(this._zoom=v,this)},zoomIn:function(v,_){return v=v||(Cn.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+v,_)},zoomOut:function(v,_){return v=v||(Cn.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-v,_)},setZoomAround:function(v,_,H){var oe=this.getZoomScale(_),Ee=this.getSize().divideBy(2),Ve=v instanceof ae?v:this.latLngToContainerPoint(v),jt=Ve.subtract(Ee).multiplyBy(1-1/oe),Jt=this.containerPointToLatLng(Ee.add(jt));return this.setView(Jt,_,{zoom:H})},_getBoundsCenterZoom:function(v,_){_=_||{},v=v.getBounds?v.getBounds():je(v);var H=Oe(_.paddingTopLeft||_.padding||[0,0]),oe=Oe(_.paddingBottomRight||_.padding||[0,0]),Ee=this.getBoundsZoom(v,!1,H.add(oe));if(Ee=typeof _.maxZoom=="number"?Math.min(_.maxZoom,Ee):Ee,Ee===1/0)return{center:v.getCenter(),zoom:Ee};var Ve=oe.subtract(H).divideBy(2),jt=this.project(v.getSouthWest(),Ee),Jt=this.project(v.getNorthEast(),Ee),br=this.unproject(jt.add(Jt).divideBy(2).add(Ve),Ee);return{center:br,zoom:Ee}},fitBounds:function(v,_){if(v=je(v),!v.isValid())throw new Error("Bounds are not valid.");var H=this._getBoundsCenterZoom(v,_);return this.setView(H.center,H.zoom,_)},fitWorld:function(v){return this.fitBounds([[-90,-180],[90,180]],v)},panTo:function(v,_){return this.setView(v,this._zoom,{pan:_})},panBy:function(v,_){if(v=Oe(v).round(),_=_||{},!v.x&&!v.y)return this.fire("moveend");if(_.animate!==!0&&!this.getSize().contains(v))return this._resetView(this.unproject(this.project(this.getCenter()).add(v)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Et,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),_.noMoveStart||this.fire("movestart"),_.animate!==!1){Xn(this._mapPane,"leaflet-pan-anim");var H=this._getMapPanePos().subtract(v).round();this._panAnim.run(this._mapPane,H,_.duration||.25,_.easeLinearity)}else this._rawPanBy(v),this.fire("move").fire("moveend");return this},flyTo:function(v,_,H){if(H=H||{},H.animate===!1||!Cn.any3d)return this.setView(v,_,H);this._stop();var oe=this.project(this.getCenter()),Ee=this.project(v),Ve=this.getSize(),jt=this._zoom;v=Re(v),_=_===void 0?jt:_;var Jt=Math.max(Ve.x,Ve.y),br=Jt*this.getZoomScale(jt,_),Vr=Ee.distanceTo(oe)||1,vn=1.42,ui=vn*vn;function As(so){var Su=so?-1:1,Go=so?br:Jt,Ed=br*br-Jt*Jt+Su*ui*ui*Vr*Vr,wc=2*Go*ui*Vr,Qd=Ed/wc,Yl=Math.sqrt(Qd*Qd+1)-Qd,Tu=Yl<1e-9?-18:Math.log(Yl);return Tu}function Da(so){return(Math.exp(so)-Math.exp(-so))/2}function jo(so){return(Math.exp(so)+Math.exp(-so))/2}function il(so){return Da(so)/jo(so)}var Zs=As(0);function la(so){return Jt*(jo(Zs)/jo(Zs+vn*so))}function jn(so){return Jt*(jo(Zs)*il(Zs+vn*so)-Da(Zs))/ui}function Yu(so){return 1-Math.pow(1-so,1.5)}var bc=Date.now(),wd=(As(1)-Zs)/vn,Wl=H.duration?1e3*H.duration:1e3*wd*.8;function _u(){var so=(Date.now()-bc)/Wl,Su=Yu(so)*wd;so<=1?(this._flyToFrame=se(_u,this),this._move(this.unproject(oe.add(Ee.subtract(oe).multiplyBy(jn(Su)/Vr)),jt),this.getScaleZoom(Jt/la(Su),jt),{flyTo:!0})):this._move(v,_)._moveEnd(!0)}return this._moveStart(!0,H.noMoveStart),_u.call(this),this},flyToBounds:function(v,_){var H=this._getBoundsCenterZoom(v,_);return this.flyTo(H.center,H.zoom,_)},setMaxBounds:function(v){return v=je(v),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),v.isValid()?(this.options.maxBounds=v,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(v){var _=this.options.minZoom;return this.options.minZoom=v,this._loaded&&_!==v&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(v):this},setMaxZoom:function(v){var _=this.options.maxZoom;return this.options.maxZoom=v,this._loaded&&_!==v&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(v):this},panInsideBounds:function(v,_){this._enforcingBounds=!0;var H=this.getCenter(),oe=this._limitCenter(H,this._zoom,je(v));return H.equals(oe)||this.panTo(oe,_),this._enforcingBounds=!1,this},panInside:function(v,_){_=_||{};var H=Oe(_.paddingTopLeft||_.padding||[0,0]),oe=Oe(_.paddingBottomRight||_.padding||[0,0]),Ee=this.project(this.getCenter()),Ve=this.project(v),jt=this.getPixelBounds(),Jt=de([jt.min.add(H),jt.max.subtract(oe)]),br=Jt.getSize();if(!Jt.contains(Ve)){this._enforcingBounds=!0;var Vr=Ve.subtract(Jt.getCenter()),vn=Jt.extend(Ve).getSize().subtract(br);Ee.x+=Vr.x<0?-vn.x:vn.x,Ee.y+=Vr.y<0?-vn.y:vn.y,this.panTo(this.unproject(Ee),_),this._enforcingBounds=!1}return this},invalidateSize:function(v){if(!this._loaded)return this;v=i({animate:!1,pan:!0},v===!0?{animate:!0}:v);var _=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var H=this.getSize(),oe=_.divideBy(2).round(),Ee=H.divideBy(2).round(),Ve=oe.subtract(Ee);return!Ve.x&&!Ve.y?this:(v.animate&&v.pan?this.panBy(Ve):(v.pan&&this._rawPanBy(Ve),this.fire("move"),v.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:_,newSize:H}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(v){if(v=this._locateOptions=i({timeout:1e4,watch:!1},v),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var _=o(this._handleGeolocationResponse,this),H=o(this._handleGeolocationError,this);return v.watch?this._locationWatchId=navigator.geolocation.watchPosition(_,H,v):navigator.geolocation.getCurrentPosition(_,H,v),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(v){if(this._container._leaflet_id){var _=v.code,H=v.message||(_===1?"permission denied":_===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:_,message:"Geolocation error: "+H+"."})}},_handleGeolocationResponse:function(v){if(this._container._leaflet_id){var _=v.coords.latitude,H=v.coords.longitude,oe=new Me(_,H),Ee=oe.toBounds(v.coords.accuracy*2),Ve=this._locateOptions;if(Ve.setView){var jt=this.getBoundsZoom(Ee);this.setView(oe,Ve.maxZoom?Math.min(jt,Ve.maxZoom):jt)}var Jt={latlng:oe,bounds:Ee,timestamp:v.timestamp};for(var br in v.coords)typeof v.coords[br]=="number"&&(Jt[br]=v.coords[br]);this.fire("locationfound",Jt)}},addHandler:function(v,_){if(!_)return this;var H=this[v]=new _(this);return this._handlers.push(H),this.options[v]&&H.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Ns(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(Ae(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var v;for(v in this._layers)this._layers[v].remove();for(v in this._panes)Ns(this._panes[v]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(v,_){var H="leaflet-pane"+(v?" leaflet-"+v.replace("Pane","")+"-pane":""),oe=ci("div",H,_||this._mapPane);return v&&(this._panes[v]=oe),oe},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var v=this.getPixelBounds(),_=this.unproject(v.getBottomLeft()),H=this.unproject(v.getTopRight());return new xe(_,H)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(v,_,H){v=je(v),H=Oe(H||[0,0]);var oe=this.getZoom()||0,Ee=this.getMinZoom(),Ve=this.getMaxZoom(),jt=v.getNorthWest(),Jt=v.getSouthEast(),br=this.getSize().subtract(H),Vr=de(this.project(Jt,oe),this.project(jt,oe)).getSize(),vn=Cn.any3d?this.options.zoomSnap:1,ui=br.x/Vr.x,As=br.y/Vr.y,Da=_?Math.max(ui,As):Math.min(ui,As);return oe=this.getScaleZoom(Da,oe),vn&&(oe=Math.round(oe/(vn/100))*(vn/100),oe=_?Math.ceil(oe/vn)*vn:Math.floor(oe/vn)*vn),Math.max(Ee,Math.min(Ve,oe))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new ae(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(v,_){var H=this._getTopLeftPoint(v,_);return new be(H,H.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(v){return this.options.crs.getProjectedBounds(v===void 0?this.getZoom():v)},getPane:function(v){return typeof v=="string"?this._panes[v]:v},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(v,_){var H=this.options.crs;return _=_===void 0?this._zoom:_,H.scale(v)/H.scale(_)},getScaleZoom:function(v,_){var H=this.options.crs;_=_===void 0?this._zoom:_;var oe=H.zoom(v*H.scale(_));return isNaN(oe)?1/0:oe},project:function(v,_){return _=_===void 0?this._zoom:_,this.options.crs.latLngToPoint(Re(v),_)},unproject:function(v,_){return _=_===void 0?this._zoom:_,this.options.crs.pointToLatLng(Oe(v),_)},layerPointToLatLng:function(v){var _=Oe(v).add(this.getPixelOrigin());return this.unproject(_)},latLngToLayerPoint:function(v){var _=this.project(Re(v))._round();return _._subtract(this.getPixelOrigin())},wrapLatLng:function(v){return this.options.crs.wrapLatLng(Re(v))},wrapLatLngBounds:function(v){return this.options.crs.wrapLatLngBounds(je(v))},distance:function(v,_){return this.options.crs.distance(Re(v),Re(_))},containerPointToLayerPoint:function(v){return Oe(v).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(v){return Oe(v).add(this._getMapPanePos())},containerPointToLatLng:function(v){var _=this.containerPointToLayerPoint(Oe(v));return this.layerPointToLatLng(_)},latLngToContainerPoint:function(v){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Re(v)))},mouseEventToContainerPoint:function(v){return Ie(v,this._container)},mouseEventToLayerPoint:function(v){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(v))},mouseEventToLatLng:function(v){return this.layerPointToLatLng(this.mouseEventToLayerPoint(v))},_initContainer:function(v){var _=this._container=mc(v);if(_){if(_._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");fe(_,"scroll",this._onScroll,this),this._containerId=u(_)},_initLayout:function(){var v=this._container;this._fadeAnimated=this.options.fadeAnimation&&Cn.any3d,Xn(v,"leaflet-container"+(Cn.touch?" leaflet-touch":"")+(Cn.retina?" leaflet-retina":"")+(Cn.ielt9?" leaflet-oldie":"")+(Cn.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var _=Vs(v,"position");_!=="absolute"&&_!=="relative"&&_!=="fixed"&&_!=="sticky"&&(v.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var v=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),fs(this._mapPane,new ae(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Xn(v.markerPane,"leaflet-zoom-hide"),Xn(v.shadowPane,"leaflet-zoom-hide"))},_resetView:function(v,_,H){fs(this._mapPane,new ae(0,0));var oe=!this._loaded;this._loaded=!0,_=this._limitZoom(_),this.fire("viewprereset");var Ee=this._zoom!==_;this._moveStart(Ee,H)._move(v,_)._moveEnd(Ee),this.fire("viewreset"),oe&&this.fire("load")},_moveStart:function(v,_){return v&&this.fire("zoomstart"),_||this.fire("movestart"),this},_move:function(v,_,H,oe){_===void 0&&(_=this._zoom);var Ee=this._zoom!==_;return this._zoom=_,this._lastCenter=v,this._pixelOrigin=this._getNewPixelOrigin(v),oe?H&&H.pinch&&this.fire("zoom",H):((Ee||H&&H.pinch)&&this.fire("zoom",H),this.fire("move",H)),this},_moveEnd:function(v){return v&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return Ae(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(v){fs(this._mapPane,this._getMapPanePos().subtract(v))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(v){this._targets={},this._targets[u(this._container)]=this;var _=v?$e:fe;_(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&_(window,"resize",this._onResize,this),Cn.any3d&&this.options.transform3DLimit&&(v?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){Ae(this._resizeRequest),this._resizeRequest=se(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var v=this._getMapPanePos();Math.max(Math.abs(v.x),Math.abs(v.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(v,_){for(var H=[],oe,Ee=_==="mouseout"||_==="mouseover",Ve=v.target||v.srcElement,jt=!1;Ve;){if(oe=this._targets[u(Ve)],oe&&(_==="click"||_==="preclick")&&this._draggableMoved(oe)){jt=!0;break}if(oe&&oe.listens(_,!0)&&(Ee&&!lt(Ve,v)||(H.push(oe),Ee))||Ve===this._container)break;Ve=Ve.parentNode}return!H.length&&!jt&&!Ee&&this.listens(_,!0)&&(H=[this]),H},_isClickDisabled:function(v){for(;v&&v!==this._container;){if(v._leaflet_disable_click)return!0;v=v.parentNode}},_handleDOMEvent:function(v){var _=v.target||v.srcElement;if(!(!this._loaded||_._leaflet_disable_events||v.type==="click"&&this._isClickDisabled(_))){var H=v.type;H==="mousedown"&&ie(_),this._fireDOMEvent(v,H)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(v,_,H){if(v.type==="click"){var oe=i({},v);oe.type="preclick",this._fireDOMEvent(oe,oe.type,H)}var Ee=this._findEventTargets(v,_);if(H){for(var Ve=[],jt=0;jt<H.length;jt++)H[jt].listens(_,!0)&&Ve.push(H[jt]);Ee=Ve.concat(Ee)}if(Ee.length){_==="contextmenu"&&ye(v);var Jt=Ee[0],br={originalEvent:v};if(v.type!=="keypress"&&v.type!=="keydown"&&v.type!=="keyup"){var Vr=Jt.getLatLng&&(!Jt._radius||Jt._radius<=10);br.containerPoint=Vr?this.latLngToContainerPoint(Jt.getLatLng()):this.mouseEventToContainerPoint(v),br.layerPoint=this.containerPointToLayerPoint(br.containerPoint),br.latlng=Vr?Jt.getLatLng():this.layerPointToLatLng(br.layerPoint)}for(jt=0;jt<Ee.length;jt++)if(Ee[jt].fire(_,br,!0),br.originalEvent._stopped||Ee[jt].options.bubblingMouseEvents===!1&&C(this._mouseEvents,_)!==-1)return}},_draggableMoved:function(v){return v=v.dragging&&v.dragging.enabled()?v:this,v.dragging&&v.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var v=0,_=this._handlers.length;v<_;v++)this._handlers[v].disable()},whenReady:function(v,_){return this._loaded?v.call(_||this,{target:this}):this.on("load",v,_),this},_getMapPanePos:function(){return To(this._mapPane)||new ae(0,0)},_moved:function(){var v=this._getMapPanePos();return v&&!v.equals([0,0])},_getTopLeftPoint:function(v,_){var H=v&&_!==void 0?this._getNewPixelOrigin(v,_):this.getPixelOrigin();return H.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(v,_){var H=this.getSize()._divideBy(2);return this.project(v,_)._subtract(H)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(v,_,H){var oe=this._getNewPixelOrigin(H,_);return this.project(v,_)._subtract(oe)},_latLngBoundsToNewLayerBounds:function(v,_,H){var oe=this._getNewPixelOrigin(H,_);return de([this.project(v.getSouthWest(),_)._subtract(oe),this.project(v.getNorthWest(),_)._subtract(oe),this.project(v.getSouthEast(),_)._subtract(oe),this.project(v.getNorthEast(),_)._subtract(oe)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(v){return this.latLngToLayerPoint(v).subtract(this._getCenterLayerPoint())},_limitCenter:function(v,_,H){if(!H)return v;var oe=this.project(v,_),Ee=this.getSize().divideBy(2),Ve=new be(oe.subtract(Ee),oe.add(Ee)),jt=this._getBoundsOffset(Ve,H,_);return Math.abs(jt.x)<=1&&Math.abs(jt.y)<=1?v:this.unproject(oe.add(jt),_)},_limitOffset:function(v,_){if(!_)return v;var H=this.getPixelBounds(),oe=new be(H.min.add(v),H.max.add(v));return v.add(this._getBoundsOffset(oe,_))},_getBoundsOffset:function(v,_,H){var oe=de(this.project(_.getNorthEast(),H),this.project(_.getSouthWest(),H)),Ee=oe.min.subtract(v.min),Ve=oe.max.subtract(v.max),jt=this._rebound(Ee.x,-Ve.x),Jt=this._rebound(Ee.y,-Ve.y);return new ae(jt,Jt)},_rebound:function(v,_){return v+_>0?Math.round(v-_)/2:Math.max(0,Math.ceil(v))-Math.max(0,Math.floor(_))},_limitZoom:function(v){var _=this.getMinZoom(),H=this.getMaxZoom(),oe=Cn.any3d?this.options.zoomSnap:1;return oe&&(v=Math.round(v/oe)*oe),Math.max(_,Math.min(H,v))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){hs(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(v,_){var H=this._getCenterOffset(v)._trunc();return(_&&_.animate)!==!0&&!this.getSize().contains(H)?!1:(this.panBy(H,_),!0)},_createAnimProxy:function(){var v=this._proxy=ci("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(v),this.on("zoomanim",function(_){var H=ro,oe=this._proxy.style[H];Xs(this._proxy,this.project(_.center,_.zoom),this.getZoomScale(_.zoom,1)),oe===this._proxy.style[H]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Ns(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var v=this.getCenter(),_=this.getZoom();Xs(this._proxy,this.project(v,_),this.getZoomScale(_,1))},_catchTransitionEnd:function(v){this._animatingZoom&&v.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(v,_,H){if(this._animatingZoom)return!0;if(H=H||{},!this._zoomAnimated||H.animate===!1||this._nothingToAnimate()||Math.abs(_-this._zoom)>this.options.zoomAnimationThreshold)return!1;var oe=this.getZoomScale(_),Ee=this._getCenterOffset(v)._divideBy(1-1/oe);return H.animate!==!0&&!this.getSize().contains(Ee)?!1:(se(function(){this._moveStart(!0,H.noMoveStart||!1)._animateZoom(v,_,!0)},this),!0)},_animateZoom:function(v,_,H,oe){this._mapPane&&(H&&(this._animatingZoom=!0,this._animateToCenter=v,this._animateToZoom=_,Xn(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:v,zoom:_,noUpdate:oe}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&hs(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Ct(v,_){return new at(v,_)}var et=Ce.extend({options:{position:"topright"},initialize:function(v){y(this,v)},getPosition:function(){return this.options.position},setPosition:function(v){var _=this._map;return _&&_.removeControl(this),this.options.position=v,_&&_.addControl(this),this},getContainer:function(){return this._container},addTo:function(v){this.remove(),this._map=v;var _=this._container=this.onAdd(v),H=this.getPosition(),oe=v._controlCorners[H];return Xn(_,"leaflet-control"),H.indexOf("bottom")!==-1?oe.insertBefore(_,oe.firstChild):oe.appendChild(_),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Ns(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(v){this._map&&v&&v.screenX>0&&v.screenY>0&&this._map.getContainer().focus()}}),Pt=function(v){return new et(v)};at.include({addControl:function(v){return v.addTo(this),this},removeControl:function(v){return v.remove(),this},_initControlPos:function(){var v=this._controlCorners={},_="leaflet-",H=this._controlContainer=ci("div",_+"control-container",this._container);function oe(Ee,Ve){var jt=_+Ee+" "+_+Ve;v[Ee+Ve]=ci("div",jt,H)}oe("top","left"),oe("top","right"),oe("bottom","left"),oe("bottom","right")},_clearControlPos:function(){for(var v in this._controlCorners)Ns(this._controlCorners[v]);Ns(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var qt=et.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(v,_,H,oe){return H<oe?-1:oe<H?1:0}},initialize:function(v,_,H){y(this,H),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var oe in v)this._addLayer(v[oe],oe);for(oe in _)this._addLayer(_[oe],oe,!0)},onAdd:function(v){this._initLayout(),this._update(),this._map=v,v.on("zoomend",this._checkDisabledLayers,this);for(var _=0;_<this._layers.length;_++)this._layers[_].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(v){return et.prototype.addTo.call(this,v),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var v=0;v<this._layers.length;v++)this._layers[v].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(v,_){return this._addLayer(v,_),this._map?this._update():this},addOverlay:function(v,_){return this._addLayer(v,_,!0),this._map?this._update():this},removeLayer:function(v){v.off("add remove",this._onLayerChange,this);var _=this._getLayer(u(v));return _&&this._layers.splice(this._layers.indexOf(_),1),this._map?this._update():this},expand:function(){Xn(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var v=this._map.getSize().y-(this._container.offsetTop+50);return v<this._section.clientHeight?(Xn(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=v+"px"):hs(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return hs(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var v="leaflet-control-layers",_=this._container=ci("div",v),H=this.options.collapsed;_.setAttribute("aria-haspopup",!0),ee(_),X(_);var oe=this._section=ci("section",v+"-list");H&&(this._map.on("click",this.collapse,this),fe(_,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var Ee=this._layersLink=ci("a",v+"-toggle",_);Ee.href="#",Ee.title="Layers",Ee.setAttribute("role","button"),fe(Ee,{keydown:function(Ve){Ve.keyCode===13&&this._expandSafely()},click:function(Ve){ye(Ve),this._expandSafely()}},this),H||this.expand(),this._baseLayersList=ci("div",v+"-base",oe),this._separator=ci("div",v+"-separator",oe),this._overlaysList=ci("div",v+"-overlays",oe),_.appendChild(oe)},_getLayer:function(v){for(var _=0;_<this._layers.length;_++)if(this._layers[_]&&u(this._layers[_].layer)===v)return this._layers[_]},_addLayer:function(v,_,H){this._map&&v.on("add remove",this._onLayerChange,this),this._layers.push({layer:v,name:_,overlay:H}),this.options.sortLayers&&this._layers.sort(o(function(oe,Ee){return this.options.sortFunction(oe.layer,Ee.layer,oe.name,Ee.name)},this)),this.options.autoZIndex&&v.setZIndex&&(this._lastZIndex++,v.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Ta(this._baseLayersList),Ta(this._overlaysList),this._layerControlInputs=[];var v,_,H,oe,Ee=0;for(H=0;H<this._layers.length;H++)oe=this._layers[H],this._addItem(oe),_=_||oe.overlay,v=v||!oe.overlay,Ee+=oe.overlay?0:1;return this.options.hideSingleBase&&(v=v&&Ee>1,this._baseLayersList.style.display=v?"":"none"),this._separator.style.display=_&&v?"":"none",this},_onLayerChange:function(v){this._handlingClick||this._update();var _=this._getLayer(u(v.target)),H=_.overlay?v.type==="add"?"overlayadd":"overlayremove":v.type==="add"?"baselayerchange":null;H&&this._map.fire(H,_)},_createRadioElement:function(v,_){var H='<input type="radio" class="leaflet-control-layers-selector" name="'+v+'"'+(_?' checked="checked"':"")+"/>",oe=document.createElement("div");return oe.innerHTML=H,oe.firstChild},_addItem:function(v){var _=document.createElement("label"),H=this._map.hasLayer(v.layer),oe;v.overlay?(oe=document.createElement("input"),oe.type="checkbox",oe.className="leaflet-control-layers-selector",oe.defaultChecked=H):oe=this._createRadioElement("leaflet-base-layers_"+u(this),H),this._layerControlInputs.push(oe),oe.layerId=u(v.layer),fe(oe,"click",this._onInputClick,this);var Ee=document.createElement("span");Ee.innerHTML=" "+v.name;var Ve=document.createElement("span");_.appendChild(Ve),Ve.appendChild(oe),Ve.appendChild(Ee);var jt=v.overlay?this._overlaysList:this._baseLayersList;return jt.appendChild(_),this._checkDisabledLayers(),_},_onInputClick:function(){if(!this._preventClick){var v=this._layerControlInputs,_,H,oe=[],Ee=[];this._handlingClick=!0;for(var Ve=v.length-1;Ve>=0;Ve--)_=v[Ve],H=this._getLayer(_.layerId).layer,_.checked?oe.push(H):_.checked||Ee.push(H);for(Ve=0;Ve<Ee.length;Ve++)this._map.hasLayer(Ee[Ve])&&this._map.removeLayer(Ee[Ve]);for(Ve=0;Ve<oe.length;Ve++)this._map.hasLayer(oe[Ve])||this._map.addLayer(oe[Ve]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var v=this._layerControlInputs,_,H,oe=this._map.getZoom(),Ee=v.length-1;Ee>=0;Ee--)_=v[Ee],H=this._getLayer(_.layerId).layer,_.disabled=H.options.minZoom!==void 0&&oe<H.options.minZoom||H.options.maxZoom!==void 0&&oe>H.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var v=this._section;this._preventClick=!0,fe(v,"click",ye),this.expand();var _=this;setTimeout(function(){$e(v,"click",ye),_._preventClick=!1})}}),It=function(v,_,H){return new qt(v,_,H)},Je=et.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(v){var _="leaflet-control-zoom",H=ci("div",_+" leaflet-bar"),oe=this.options;return this._zoomInButton=this._createButton(oe.zoomInText,oe.zoomInTitle,_+"-in",H,this._zoomIn),this._zoomOutButton=this._createButton(oe.zoomOutText,oe.zoomOutTitle,_+"-out",H,this._zoomOut),this._updateDisabled(),v.on("zoomend zoomlevelschange",this._updateDisabled,this),H},onRemove:function(v){v.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(v){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(v.shiftKey?3:1))},_zoomOut:function(v){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(v.shiftKey?3:1))},_createButton:function(v,_,H,oe,Ee){var Ve=ci("a",H,oe);return Ve.innerHTML=v,Ve.href="#",Ve.title=_,Ve.setAttribute("role","button"),Ve.setAttribute("aria-label",_),ee(Ve),fe(Ve,"click",he),fe(Ve,"click",Ee,this),fe(Ve,"click",this._refocusOnMap,this),Ve},_updateDisabled:function(){var v=this._map,_="leaflet-disabled";hs(this._zoomInButton,_),hs(this._zoomOutButton,_),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||v._zoom===v.getMinZoom())&&(Xn(this._zoomOutButton,_),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||v._zoom===v.getMaxZoom())&&(Xn(this._zoomInButton,_),this._zoomInButton.setAttribute("aria-disabled","true"))}});at.mergeOptions({zoomControl:!0}),at.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Je,this.addControl(this.zoomControl))});var zt=function(v){return new Je(v)},Sr=et.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(v){var _="leaflet-control-scale",H=ci("div",_),oe=this.options;return this._addScales(oe,_+"-line",H),v.on(oe.updateWhenIdle?"moveend":"move",this._update,this),v.whenReady(this._update,this),H},onRemove:function(v){v.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(v,_,H){v.metric&&(this._mScale=ci("div",_,H)),v.imperial&&(this._iScale=ci("div",_,H))},_update:function(){var v=this._map,_=v.getSize().y/2,H=v.distance(v.containerPointToLatLng([0,_]),v.containerPointToLatLng([this.options.maxWidth,_]));this._updateScales(H)},_updateScales:function(v){this.options.metric&&v&&this._updateMetric(v),this.options.imperial&&v&&this._updateImperial(v)},_updateMetric:function(v){var _=this._getRoundNum(v),H=_<1e3?_+" m":_/1e3+" km";this._updateScale(this._mScale,H,_/v)},_updateImperial:function(v){var _=v*3.2808399,H,oe,Ee;_>5280?(H=_/5280,oe=this._getRoundNum(H),this._updateScale(this._iScale,oe+" mi",oe/H)):(Ee=this._getRoundNum(_),this._updateScale(this._iScale,Ee+" ft",Ee/_))},_updateScale:function(v,_,H){v.style.width=Math.round(this.options.maxWidth*H)+"px",v.innerHTML=_},_getRoundNum:function(v){var _=Math.pow(10,(Math.floor(v)+"").length-1),H=v/_;return H=H>=10?10:H>=5?5:H>=3?3:H>=2?2:1,_*H}}),ir=function(v){return new Sr(v)},Mt='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',xr=et.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Cn.inlineSvg?Mt+" ":"")+"Leaflet</a>"},initialize:function(v){y(this,v),this._attributions={}},onAdd:function(v){v.attributionControl=this,this._container=ci("div","leaflet-control-attribution"),ee(this._container);for(var _ in v._layers)v._layers[_].getAttribution&&this.addAttribution(v._layers[_].getAttribution());return this._update(),v.on("layeradd",this._addAttribution,this),this._container},onRemove:function(v){v.off("layeradd",this._addAttribution,this)},_addAttribution:function(v){v.layer.getAttribution&&(this.addAttribution(v.layer.getAttribution()),v.layer.once("remove",function(){this.removeAttribution(v.layer.getAttribution())},this))},setPrefix:function(v){return this.options.prefix=v,this._update(),this},addAttribution:function(v){return v?(this._attributions[v]||(this._attributions[v]=0),this._attributions[v]++,this._update(),this):this},removeAttribution:function(v){return v?(this._attributions[v]&&(this._attributions[v]--,this._update()),this):this},_update:function(){if(this._map){var v=[];for(var _ in this._attributions)this._attributions[_]&&v.push(_);var H=[];this.options.prefix&&H.push(this.options.prefix),v.length&&H.push(v.join(", ")),this._container.innerHTML=H.join(' <span aria-hidden="true">|</span> ')}}});at.mergeOptions({attributionControl:!0}),at.addInitHook(function(){this.options.attributionControl&&new xr().addTo(this)});var st=function(v){return new xr(v)};et.Layers=qt,et.Zoom=Je,et.Scale=Sr,et.Attribution=xr,Pt.layers=It,Pt.zoom=zt,Pt.scale=ir,Pt.attribution=st;var mt=Ce.extend({initialize:function(v){this._map=v},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});mt.addTo=function(v,_){return v.addHandler(_,this),this};var Ot={Events:ne},Rt=Cn.touch?"touchstart mousedown":"mousedown",Ar=ce.extend({options:{clickTolerance:3},initialize:function(v,_,H,oe){y(this,oe),this._element=v,this._dragStartTarget=_||v,this._preventOutline=H},enable:function(){this._enabled||(fe(this._dragStartTarget,Rt,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Ar._dragging===this&&this.finishDrag(!0),$e(this._dragStartTarget,Rt,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(v){if(this._enabled&&(this._moved=!1,!gi(this._element,"leaflet-zoom-anim"))){if(v.touches&&v.touches.length!==1){Ar._dragging===this&&this.finishDrag();return}if(!(Ar._dragging||v.shiftKey||v.which!==1&&v.button!==1&&!v.touches)&&(Ar._dragging=this,this._preventOutline&&ie(this._element),no(),za(),!this._moving)){this.fire("down");var _=v.touches?v.touches[0]:v,H=F(this._element);this._startPoint=new ae(_.clientX,_.clientY),this._startPos=To(this._element),this._parentScale=z(H);var oe=v.type==="mousedown";fe(document,oe?"mousemove":"touchmove",this._onMove,this),fe(document,oe?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(v){if(this._enabled){if(v.touches&&v.touches.length>1){this._moved=!0;return}var _=v.touches&&v.touches.length===1?v.touches[0]:v,H=new ae(_.clientX,_.clientY)._subtract(this._startPoint);!H.x&&!H.y||Math.abs(H.x)+Math.abs(H.y)<this.options.clickTolerance||(H.x/=this._parentScale.x,H.y/=this._parentScale.y,ye(v),this._moved||(this.fire("dragstart"),this._moved=!0,Xn(document.body,"leaflet-dragging"),this._lastTarget=v.target||v.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Xn(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(H),this._moving=!0,this._lastEvent=v,this._updatePosition())}},_updatePosition:function(){var v={originalEvent:this._lastEvent};this.fire("predrag",v),fs(this._element,this._newPos),this.fire("drag",v)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(v){hs(document.body,"leaflet-dragging"),this._lastTarget&&(hs(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),$e(document,"mousemove touchmove",this._onMove,this),$e(document,"mouseup touchend touchcancel",this._onUp,this),zo(),zs();var _=this._moved&&this._moving;this._moving=!1,Ar._dragging=!1,_&&this.fire("dragend",{noInertia:v,distance:this._newPos.distanceTo(this._startPos)})}});function jr(v,_,H){var oe,Ee=[1,4,2,8],Ve,jt,Jt,br,Vr,vn,ui,As;for(Ve=0,vn=v.length;Ve<vn;Ve++)v[Ve]._code=Cr(v[Ve],_);for(Jt=0;Jt<4;Jt++){for(ui=Ee[Jt],oe=[],Ve=0,vn=v.length,jt=vn-1;Ve<vn;jt=Ve++)br=v[Ve],Vr=v[jt],br._code&ui?Vr._code&ui||(As=Nr(Vr,br,ui,_,H),As._code=Cr(As,_),oe.push(As)):(Vr._code&ui&&(As=Nr(Vr,br,ui,_,H),As._code=Cr(As,_),oe.push(As)),oe.push(br));v=oe}return v}function Br(v,_){var H,oe,Ee,Ve,jt,Jt,br,Vr,vn;if(!v||v.length===0)throw new Error("latlngs not passed");En(v)||(console.warn("latlngs are not flat! Only the first ring will be used"),v=v[0]);var ui=Re([0,0]),As=je(v),Da=As.getNorthWest().distanceTo(As.getSouthWest())*As.getNorthEast().distanceTo(As.getNorthWest());Da<1700&&(ui=ar(v));var jo=v.length,il=[];for(H=0;H<jo;H++){var Zs=Re(v[H]);il.push(_.project(Re([Zs.lat-ui.lat,Zs.lng-ui.lng])))}for(Jt=br=Vr=0,H=0,oe=jo-1;H<jo;oe=H++)Ee=il[H],Ve=il[oe],jt=Ee.y*Ve.x-Ve.y*Ee.x,br+=(Ee.x+Ve.x)*jt,Vr+=(Ee.y+Ve.y)*jt,Jt+=jt*3;Jt===0?vn=il[0]:vn=[br/Jt,Vr/Jt];var la=_.unproject(Oe(vn));return Re([la.lat+ui.lat,la.lng+ui.lng])}function ar(v){for(var _=0,H=0,oe=0,Ee=0;Ee<v.length;Ee++){var Ve=Re(v[Ee]);_+=Ve.lat,H+=Ve.lng,oe++}return Re([_/oe,H/oe])}var Lr={__proto__:null,clipPolygon:jr,polygonCenter:Br,centroid:ar};function hn(v,_){if(!_||!v.length)return v.slice();var H=_*_;return v=Gt(v,H),v=St(v,H),v}function tn(v,_,H){return Math.sqrt(un(v,_,H,!0))}function We(v,_,H){return un(v,_,H)}function St(v,_){var H=v.length,oe=typeof Uint8Array<"u"?Uint8Array:Array,Ee=new oe(H);Ee[0]=Ee[H-1]=1,Nt(v,Ee,_,0,H-1);var Ve,jt=[];for(Ve=0;Ve<H;Ve++)Ee[Ve]&&jt.push(v[Ve]);return jt}function Nt(v,_,H,oe,Ee){var Ve=0,jt,Jt,br;for(Jt=oe+1;Jt<=Ee-1;Jt++)br=un(v[Jt],v[oe],v[Ee],!0),br>Ve&&(jt=Jt,Ve=br);Ve>H&&(_[jt]=1,Nt(v,_,H,oe,jt),Nt(v,_,H,jt,Ee))}function Gt(v,_){for(var H=[v[0]],oe=1,Ee=0,Ve=v.length;oe<Ve;oe++)Gr(v[oe],v[Ee])>_&&(H.push(v[oe]),Ee=oe);return Ee<Ve-1&&H.push(v[Ve-1]),H}var Xt;function cr(v,_,H,oe,Ee){var Ve=oe?Xt:Cr(v,H),jt=Cr(_,H),Jt,br,Vr;for(Xt=jt;;){if(!(Ve|jt))return[v,_];if(Ve&jt)return!1;Jt=Ve||jt,br=Nr(v,_,Jt,H,Ee),Vr=Cr(br,H),Jt===Ve?(v=br,Ve=Vr):(_=br,jt=Vr)}}function Nr(v,_,H,oe,Ee){var Ve=_.x-v.x,jt=_.y-v.y,Jt=oe.min,br=oe.max,Vr,vn;return H&8?(Vr=v.x+Ve*(br.y-v.y)/jt,vn=br.y):H&4?(Vr=v.x+Ve*(Jt.y-v.y)/jt,vn=Jt.y):H&2?(Vr=br.x,vn=v.y+jt*(br.x-v.x)/Ve):H&1&&(Vr=Jt.x,vn=v.y+jt*(Jt.x-v.x)/Ve),new ae(Vr,vn,Ee)}function Cr(v,_){var H=0;return v.x<_.min.x?H|=1:v.x>_.max.x&&(H|=2),v.y<_.min.y?H|=4:v.y>_.max.y&&(H|=8),H}function Gr(v,_){var H=_.x-v.x,oe=_.y-v.y;return H*H+oe*oe}function un(v,_,H,oe){var Ee=_.x,Ve=_.y,jt=H.x-Ee,Jt=H.y-Ve,br=jt*jt+Jt*Jt,Vr;return br>0&&(Vr=((v.x-Ee)*jt+(v.y-Ve)*Jt)/br,Vr>1?(Ee=H.x,Ve=H.y):Vr>0&&(Ee+=jt*Vr,Ve+=Jt*Vr)),jt=v.x-Ee,Jt=v.y-Ve,oe?jt*jt+Jt*Jt:new ae(Ee,Ve)}function En(v){return!T(v[0])||typeof v[0][0]!="object"&&typeof v[0][0]<"u"}function Rn(v){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),En(v)}function yi(v,_){var H,oe,Ee,Ve,jt,Jt,br,Vr;if(!v||v.length===0)throw new Error("latlngs not passed");En(v)||(console.warn("latlngs are not flat! Only the first ring will be used"),v=v[0]);var vn=Re([0,0]),ui=je(v),As=ui.getNorthWest().distanceTo(ui.getSouthWest())*ui.getNorthEast().distanceTo(ui.getNorthWest());As<1700&&(vn=ar(v));var Da=v.length,jo=[];for(H=0;H<Da;H++){var il=Re(v[H]);jo.push(_.project(Re([il.lat-vn.lat,il.lng-vn.lng])))}for(H=0,oe=0;H<Da-1;H++)oe+=jo[H].distanceTo(jo[H+1])/2;if(oe===0)Vr=jo[0];else for(H=0,Ve=0;H<Da-1;H++)if(jt=jo[H],Jt=jo[H+1],Ee=jt.distanceTo(Jt),Ve+=Ee,Ve>oe){br=(Ve-oe)/Ee,Vr=[Jt.x-br*(Jt.x-jt.x),Jt.y-br*(Jt.y-jt.y)];break}var Zs=_.unproject(Oe(Vr));return Re([Zs.lat+vn.lat,Zs.lng+vn.lng])}var pt={__proto__:null,simplify:hn,pointToSegmentDistance:tn,closestPointOnSegment:We,clipSegment:cr,_getEdgeIntersection:Nr,_getBitCode:Cr,_sqClosestPointOnSegment:un,isFlat:En,_flat:Rn,polylineCenter:yi},Sn={project:function(v){return new ae(v.lng,v.lat)},unproject:function(v){return new Me(v.y,v.x)},bounds:new be([-180,-90],[180,90])},Ri={R:6378137,R_MINOR:6356752314245179e-9,bounds:new be([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(v){var _=Math.PI/180,H=this.R,oe=v.lat*_,Ee=this.R_MINOR/H,Ve=Math.sqrt(1-Ee*Ee),jt=Ve*Math.sin(oe),Jt=Math.tan(Math.PI/4-oe/2)/Math.pow((1-jt)/(1+jt),Ve/2);return oe=-H*Math.log(Math.max(Jt,1e-10)),new ae(v.lng*_*H,oe)},unproject:function(v){for(var _=180/Math.PI,H=this.R,oe=this.R_MINOR/H,Ee=Math.sqrt(1-oe*oe),Ve=Math.exp(-v.y/H),jt=Math.PI/2-2*Math.atan(Ve),Jt=0,br=.1,Vr;Jt<15&&Math.abs(br)>1e-7;Jt++)Vr=Ee*Math.sin(jt),Vr=Math.pow((1-Vr)/(1+Vr),Ee/2),br=Math.PI/2-2*Math.atan(Ve*Vr)-jt,jt+=br;return new Me(jt*_,v.x*_/H)}},Tn={__proto__:null,LonLat:Sn,Mercator:Ri,SphericalMercator:nt},nn=i({},ht,{code:"EPSG:3395",projection:Ri,transformation:(function(){var v=.5/(Math.PI*Ri.R);return ft(v,.5,-v,.5)})()}),ji=i({},ht,{code:"EPSG:4326",projection:Sn,transformation:ft(1/180,1,-1/180,.5)}),Fn=i({},it,{projection:Sn,transformation:ft(1,0,-1,0),scale:function(v){return Math.pow(2,v)},zoom:function(v){return Math.log(v)/Math.LN2},distance:function(v,_){var H=_.lng-v.lng,oe=_.lat-v.lat;return Math.sqrt(H*H+oe*oe)},infinite:!0});it.Earth=ht,it.EPSG3395=nn,it.EPSG3857=Dt,it.EPSG900913=rt,it.EPSG4326=ji,it.Simple=Fn;var Hn=ce.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(v){return v.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(v){return v&&v.removeLayer(this),this},getPane:function(v){return this._map.getPane(v?this.options[v]||v:this.options.pane)},addInteractiveTarget:function(v){return this._map._targets[u(v)]=this,this},removeInteractiveTarget:function(v){return delete this._map._targets[u(v)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(v){var _=v.target;if(_.hasLayer(this)){if(this._map=_,this._zoomAnimated=_._zoomAnimated,this.getEvents){var H=this.getEvents();_.on(H,this),this.once("remove",function(){_.off(H,this)},this)}this.onAdd(_),this.fire("add"),_.fire("layeradd",{layer:this})}}});at.include({addLayer:function(v){if(!v._layerAdd)throw new Error("The provided object is not a Layer.");var _=u(v);return this._layers[_]?this:(this._layers[_]=v,v._mapToAdd=this,v.beforeAdd&&v.beforeAdd(this),this.whenReady(v._layerAdd,v),this)},removeLayer:function(v){var _=u(v);return this._layers[_]?(this._loaded&&v.onRemove(this),delete this._layers[_],this._loaded&&(this.fire("layerremove",{layer:v}),v.fire("remove")),v._map=v._mapToAdd=null,this):this},hasLayer:function(v){return u(v)in this._layers},eachLayer:function(v,_){for(var H in this._layers)v.call(_,this._layers[H]);return this},_addLayers:function(v){v=v?T(v)?v:[v]:[];for(var _=0,H=v.length;_<H;_++)this.addLayer(v[_])},_addZoomLimit:function(v){(!isNaN(v.options.maxZoom)||!isNaN(v.options.minZoom))&&(this._zoomBoundLayers[u(v)]=v,this._updateZoomLevels())},_removeZoomLimit:function(v){var _=u(v);this._zoomBoundLayers[_]&&(delete this._zoomBoundLayers[_],this._updateZoomLevels())},_updateZoomLevels:function(){var v=1/0,_=-1/0,H=this._getZoomSpan();for(var oe in this._zoomBoundLayers){var Ee=this._zoomBoundLayers[oe].options;v=Ee.minZoom===void 0?v:Math.min(v,Ee.minZoom),_=Ee.maxZoom===void 0?_:Math.max(_,Ee.maxZoom)}this._layersMaxZoom=_===-1/0?void 0:_,this._layersMinZoom=v===1/0?void 0:v,H!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var $n=Hn.extend({initialize:function(v,_){y(this,_),this._layers={};var H,oe;if(v)for(H=0,oe=v.length;H<oe;H++)this.addLayer(v[H])},addLayer:function(v){var _=this.getLayerId(v);return this._layers[_]=v,this._map&&this._map.addLayer(v),this},removeLayer:function(v){var _=v in this._layers?v:this.getLayerId(v);return this._map&&this._layers[_]&&this._map.removeLayer(this._layers[_]),delete this._layers[_],this},hasLayer:function(v){var _=typeof v=="number"?v:this.getLayerId(v);return _ in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(v){var _=Array.prototype.slice.call(arguments,1),H,oe;for(H in this._layers)oe=this._layers[H],oe[v]&&oe[v].apply(oe,_);return this},onAdd:function(v){this.eachLayer(v.addLayer,v)},onRemove:function(v){this.eachLayer(v.removeLayer,v)},eachLayer:function(v,_){for(var H in this._layers)v.call(_,this._layers[H]);return this},getLayer:function(v){return this._layers[v]},getLayers:function(){var v=[];return this.eachLayer(v.push,v),v},setZIndex:function(v){return this.invoke("setZIndex",v)},getLayerId:function(v){return u(v)}}),ga=function(v,_){return new $n(v,_)},Di=$n.extend({addLayer:function(v){return this.hasLayer(v)?this:(v.addEventParent(this),$n.prototype.addLayer.call(this,v),this.fire("layeradd",{layer:v}))},removeLayer:function(v){return this.hasLayer(v)?(v in this._layers&&(v=this._layers[v]),v.removeEventParent(this),$n.prototype.removeLayer.call(this,v),this.fire("layerremove",{layer:v})):this},setStyle:function(v){return this.invoke("setStyle",v)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var v=new xe;for(var _ in this._layers){var H=this._layers[_];v.extend(H.getBounds?H.getBounds():H.getLatLng())}return v}}),Gn=function(v,_){return new Di(v,_)},ns=Ce.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(v){y(this,v)},createIcon:function(v){return this._createIcon("icon",v)},createShadow:function(v){return this._createIcon("shadow",v)},_createIcon:function(v,_){var H=this._getIconUrl(v);if(!H){if(v==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var oe=this._createImg(H,_&&_.tagName==="IMG"?_:null);return this._setIconStyles(oe,v),(this.options.crossOrigin||this.options.crossOrigin==="")&&(oe.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),oe},_setIconStyles:function(v,_){var H=this.options,oe=H[_+"Size"];typeof oe=="number"&&(oe=[oe,oe]);var Ee=Oe(oe),Ve=Oe(_==="shadow"&&H.shadowAnchor||H.iconAnchor||Ee&&Ee.divideBy(2,!0));v.className="leaflet-marker-"+_+" "+(H.className||""),Ve&&(v.style.marginLeft=-Ve.x+"px",v.style.marginTop=-Ve.y+"px"),Ee&&(v.style.width=Ee.x+"px",v.style.height=Ee.y+"px")},_createImg:function(v,_){return _=_||document.createElement("img"),_.src=v,_},_getIconUrl:function(v){return Cn.retina&&this.options[v+"RetinaUrl"]||this.options[v+"Url"]}});function _i(v){return new ns(v)}var Un=ns.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(v){return typeof Un.imagePath!="string"&&(Un.imagePath=this._detectIconPath()),(this.options.imagePath||Un.imagePath)+ns.prototype._getIconUrl.call(this,v)},_stripUrl:function(v){var _=function(H,oe,Ee){var Ve=oe.exec(H);return Ve&&Ve[Ee]};return v=_(v,/^url\((['"])?(.+)\1\)$/,2),v&&_(v,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var v=ci("div","leaflet-default-icon-path",document.body),_=Vs(v,"background-image")||Vs(v,"backgroundImage");if(document.body.removeChild(v),_=this._stripUrl(_),_)return _;var H=document.querySelector('link[href$="leaflet.css"]');return H?H.href.substring(0,H.href.length-11-1):""}}),ki=mt.extend({initialize:function(v){this._marker=v},addHooks:function(){var v=this._marker._icon;this._draggable||(this._draggable=new Ar(v,v,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Xn(v,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&hs(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(v){var _=this._marker,H=_._map,oe=this._marker.options.autoPanSpeed,Ee=this._marker.options.autoPanPadding,Ve=To(_._icon),jt=H.getPixelBounds(),Jt=H.getPixelOrigin(),br=de(jt.min._subtract(Jt).add(Ee),jt.max._subtract(Jt).subtract(Ee));if(!br.contains(Ve)){var Vr=Oe((Math.max(br.max.x,Ve.x)-br.max.x)/(jt.max.x-br.max.x)-(Math.min(br.min.x,Ve.x)-br.min.x)/(jt.min.x-br.min.x),(Math.max(br.max.y,Ve.y)-br.max.y)/(jt.max.y-br.max.y)-(Math.min(br.min.y,Ve.y)-br.min.y)/(jt.min.y-br.min.y)).multiplyBy(oe);H.panBy(Vr,{animate:!1}),this._draggable._newPos._add(Vr),this._draggable._startPos._add(Vr),fs(_._icon,this._draggable._newPos),this._onDrag(v),this._panRequest=se(this._adjustPan.bind(this,v))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(v){this._marker.options.autoPan&&(Ae(this._panRequest),this._panRequest=se(this._adjustPan.bind(this,v)))},_onDrag:function(v){var _=this._marker,H=_._shadow,oe=To(_._icon),Ee=_._map.layerPointToLatLng(oe);H&&fs(H,oe),_._latlng=Ee,v.latlng=Ee,v.oldLatLng=this._oldLatLng,_.fire("move",v).fire("drag",v)},_onDragEnd:function(v){Ae(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",v)}}),Wn=Hn.extend({options:{icon:new Un,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(v,_){y(this,_),this._latlng=Re(v)},onAdd:function(v){this._zoomAnimated=this._zoomAnimated&&v.options.markerZoomAnimation,this._zoomAnimated&&v.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(v){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&v.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(v){var _=this._latlng;return this._latlng=Re(v),this.update(),this.fire("move",{oldLatLng:_,latlng:this._latlng})},setZIndexOffset:function(v){return this.options.zIndexOffset=v,this.update()},getIcon:function(){return this.options.icon},setIcon:function(v){return this.options.icon=v,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var v=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(v)}return this},_initIcon:function(){var v=this.options,_="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),H=v.icon.createIcon(this._icon),oe=!1;H!==this._icon&&(this._icon&&this._removeIcon(),oe=!0,v.title&&(H.title=v.title),H.tagName==="IMG"&&(H.alt=v.alt||"")),Xn(H,_),v.keyboard&&(H.tabIndex="0",H.setAttribute("role","button")),this._icon=H,v.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&fe(H,"focus",this._panOnFocus,this);var Ee=v.icon.createShadow(this._shadow),Ve=!1;Ee!==this._shadow&&(this._removeShadow(),Ve=!0),Ee&&(Xn(Ee,_),Ee.alt=""),this._shadow=Ee,v.opacity<1&&this._updateOpacity(),oe&&this.getPane().appendChild(this._icon),this._initInteraction(),Ee&&Ve&&this.getPane(v.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&$e(this._icon,"focus",this._panOnFocus,this),Ns(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Ns(this._shadow),this._shadow=null},_setPos:function(v){this._icon&&fs(this._icon,v),this._shadow&&fs(this._shadow,v),this._zIndex=v.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(v){this._icon&&(this._icon.style.zIndex=this._zIndex+v)},_animateZoom:function(v){var _=this._map._latLngToNewLayerPoint(this._latlng,v.zoom,v.center).round();this._setPos(_)},_initInteraction:function(){if(this.options.interactive&&(Xn(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),ki)){var v=this.options.draggable;this.dragging&&(v=this.dragging.enabled(),this.dragging.disable()),this.dragging=new ki(this),v&&this.dragging.enable()}},setOpacity:function(v){return this.options.opacity=v,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var v=this.options.opacity;this._icon&&Hi(this._icon,v),this._shadow&&Hi(this._shadow,v)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var v=this._map;if(v){var _=this.options.icon.options,H=_.iconSize?Oe(_.iconSize):Oe(0,0),oe=_.iconAnchor?Oe(_.iconAnchor):Oe(0,0);v.panInside(this._latlng,{paddingTopLeft:oe,paddingBottomRight:H.subtract(oe)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Gi(v,_){return new Wn(v,_)}var is=Hn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(v){this._renderer=v.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(v){return y(this,v),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&v&&Object.prototype.hasOwnProperty.call(v,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Zi=is.extend({options:{fill:!0,radius:10},initialize:function(v,_){y(this,_),this._latlng=Re(v),this._radius=this.options.radius},setLatLng:function(v){var _=this._latlng;return this._latlng=Re(v),this.redraw(),this.fire("move",{oldLatLng:_,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(v){return this.options.radius=this._radius=v,this.redraw()},getRadius:function(){return this._radius},setStyle:function(v){var _=v&&v.radius||this._radius;return is.prototype.setStyle.call(this,v),this.setRadius(_),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var v=this._radius,_=this._radiusY||v,H=this._clickTolerance(),oe=[v+H,_+H];this._pxBounds=new be(this._point.subtract(oe),this._point.add(oe))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(v){return v.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function vs(v,_){return new Zi(v,_)}var ja=Zi.extend({initialize:function(v,_,H){if(typeof _=="number"&&(_=i({},H,{radius:_})),y(this,_),this._latlng=Re(v),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(v){return this._mRadius=v,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var v=[this._radius,this._radiusY||this._radius];return new xe(this._map.layerPointToLatLng(this._point.subtract(v)),this._map.layerPointToLatLng(this._point.add(v)))},setStyle:is.prototype.setStyle,_project:function(){var v=this._latlng.lng,_=this._latlng.lat,H=this._map,oe=H.options.crs;if(oe.distance===ht.distance){var Ee=Math.PI/180,Ve=this._mRadius/ht.R/Ee,jt=H.project([_+Ve,v]),Jt=H.project([_-Ve,v]),br=jt.add(Jt).divideBy(2),Vr=H.unproject(br).lat,vn=Math.acos((Math.cos(Ve*Ee)-Math.sin(_*Ee)*Math.sin(Vr*Ee))/(Math.cos(_*Ee)*Math.cos(Vr*Ee)))/Ee;(isNaN(vn)||vn===0)&&(vn=Ve/Math.cos(Math.PI/180*_)),this._point=br.subtract(H.getPixelOrigin()),this._radius=isNaN(vn)?0:br.x-H.project([Vr,v-vn]).x,this._radiusY=br.y-jt.y}else{var ui=oe.unproject(oe.project(this._latlng).subtract([this._mRadius,0]));this._point=H.latLngToLayerPoint(this._latlng),this._radius=this._point.x-H.latLngToLayerPoint(ui).x}this._updateBounds()}});function xi(v,_,H){return new ja(v,_,H)}var Ys=is.extend({options:{smoothFactor:1,noClip:!1},initialize:function(v,_){y(this,_),this._setLatLngs(v)},getLatLngs:function(){return this._latlngs},setLatLngs:function(v){return this._setLatLngs(v),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(v){for(var _=1/0,H=null,oe=un,Ee,Ve,jt=0,Jt=this._parts.length;jt<Jt;jt++)for(var br=this._parts[jt],Vr=1,vn=br.length;Vr<vn;Vr++){Ee=br[Vr-1],Ve=br[Vr];var ui=oe(v,Ee,Ve,!0);ui<_&&(_=ui,H=oe(v,Ee,Ve))}return H&&(H.distance=Math.sqrt(_)),H},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return yi(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(v,_){return _=_||this._defaultShape(),v=Re(v),_.push(v),this._bounds.extend(v),this.redraw()},_setLatLngs:function(v){this._bounds=new xe,this._latlngs=this._convertLatLngs(v)},_defaultShape:function(){return En(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(v){for(var _=[],H=En(v),oe=0,Ee=v.length;oe<Ee;oe++)H?(_[oe]=Re(v[oe]),this._bounds.extend(_[oe])):_[oe]=this._convertLatLngs(v[oe]);return _},_project:function(){var v=new be;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,v),this._bounds.isValid()&&v.isValid()&&(this._rawPxBounds=v,this._updateBounds())},_updateBounds:function(){var v=this._clickTolerance(),_=new ae(v,v);this._rawPxBounds&&(this._pxBounds=new be([this._rawPxBounds.min.subtract(_),this._rawPxBounds.max.add(_)]))},_projectLatlngs:function(v,_,H){var oe=v[0]instanceof Me,Ee=v.length,Ve,jt;if(oe){for(jt=[],Ve=0;Ve<Ee;Ve++)jt[Ve]=this._map.latLngToLayerPoint(v[Ve]),H.extend(jt[Ve]);_.push(jt)}else for(Ve=0;Ve<Ee;Ve++)this._projectLatlngs(v[Ve],_,H)},_clipPoints:function(){var v=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(v))){if(this.options.noClip){this._parts=this._rings;return}var _=this._parts,H,oe,Ee,Ve,jt,Jt,br;for(H=0,Ee=0,Ve=this._rings.length;H<Ve;H++)for(br=this._rings[H],oe=0,jt=br.length;oe<jt-1;oe++)Jt=cr(br[oe],br[oe+1],v,oe,!0),Jt&&(_[Ee]=_[Ee]||[],_[Ee].push(Jt[0]),(Jt[1]!==br[oe+1]||oe===jt-2)&&(_[Ee].push(Jt[1]),Ee++))}},_simplifyPoints:function(){for(var v=this._parts,_=this.options.smoothFactor,H=0,oe=v.length;H<oe;H++)v[H]=hn(v[H],_)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(v,_){var H,oe,Ee,Ve,jt,Jt,br=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(v))return!1;for(H=0,Ve=this._parts.length;H<Ve;H++)for(Jt=this._parts[H],oe=0,jt=Jt.length,Ee=jt-1;oe<jt;Ee=oe++)if(!(!_&&oe===0)&&tn(v,Jt[Ee],Jt[oe])<=br)return!0;return!1}});function Qi(v,_){return new Ys(v,_)}Ys._flat=Rn;var ai=Ys.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Br(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(v){var _=Ys.prototype._convertLatLngs.call(this,v),H=_.length;return H>=2&&_[0]instanceof Me&&_[0].equals(_[H-1])&&_.pop(),_},_setLatLngs:function(v){Ys.prototype._setLatLngs.call(this,v),En(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return En(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var v=this._renderer._bounds,_=this.options.weight,H=new ae(_,_);if(v=new be(v.min.subtract(H),v.max.add(H)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(v))){if(this.options.noClip){this._parts=this._rings;return}for(var oe=0,Ee=this._rings.length,Ve;oe<Ee;oe++)Ve=jr(this._rings[oe],v,!0),Ve.length&&this._parts.push(Ve)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(v){var _=!1,H,oe,Ee,Ve,jt,Jt,br,Vr;if(!this._pxBounds||!this._pxBounds.contains(v))return!1;for(Ve=0,br=this._parts.length;Ve<br;Ve++)for(H=this._parts[Ve],jt=0,Vr=H.length,Jt=Vr-1;jt<Vr;Jt=jt++)oe=H[jt],Ee=H[Jt],oe.y>v.y!=Ee.y>v.y&&v.x<(Ee.x-oe.x)*(v.y-oe.y)/(Ee.y-oe.y)+oe.x&&(_=!_);return _||Ys.prototype._containsPoint.call(this,v,!0)}});function da(v,_){return new ai(v,_)}var Ii=Di.extend({initialize:function(v,_){y(this,_),this._layers={},v&&this.addData(v)},addData:function(v){var _=T(v)?v:v.features,H,oe,Ee;if(_){for(H=0,oe=_.length;H<oe;H++)Ee=_[H],(Ee.geometries||Ee.geometry||Ee.features||Ee.coordinates)&&this.addData(Ee);return this}var Ve=this.options;if(Ve.filter&&!Ve.filter(v))return this;var jt=xn(v,Ve);return jt?(jt.feature=Ra(v),jt.defaultOptions=jt.options,this.resetStyle(jt),Ve.onEachFeature&&Ve.onEachFeature(v,jt),this.addLayer(jt)):this},resetStyle:function(v){return v===void 0?this.eachLayer(this.resetStyle,this):(v.options=i({},v.defaultOptions),this._setLayerStyle(v,this.options.style),this)},setStyle:function(v){return this.eachLayer(function(_){this._setLayerStyle(_,v)},this)},_setLayerStyle:function(v,_){v.setStyle&&(typeof _=="function"&&(_=_(v.feature)),v.setStyle(_))}});function xn(v,_){var H=v.type==="Feature"?v.geometry:v,oe=H?H.coordinates:null,Ee=[],Ve=_&&_.pointToLayer,jt=_&&_.coordsToLatLng||wu,Jt,br,Vr,vn;if(!oe&&!H)return null;switch(H.type){case"Point":return Jt=jt(oe),ls(Ve,v,Jt,_);case"MultiPoint":for(Vr=0,vn=oe.length;Vr<vn;Vr++)Jt=jt(oe[Vr]),Ee.push(ls(Ve,v,Jt,_));return new Di(Ee);case"LineString":case"MultiLineString":return br=io(oe,H.type==="LineString"?0:1,jt),new Ys(br,_);case"Polygon":case"MultiPolygon":return br=io(oe,H.type==="Polygon"?1:2,jt),new ai(br,_);case"GeometryCollection":for(Vr=0,vn=H.geometries.length;Vr<vn;Vr++){var ui=xn({geometry:H.geometries[Vr],type:"Feature",properties:v.properties},_);ui&&Ee.push(ui)}return new Di(Ee);case"FeatureCollection":for(Vr=0,vn=H.features.length;Vr<vn;Vr++){var As=xn(H.features[Vr],_);As&&Ee.push(As)}return new Di(Ee);default:throw new Error("Invalid GeoJSON object.")}}function ls(v,_,H,oe){return v?v(_,H):new Wn(H,oe&&oe.markersInheritOptions&&oe)}function wu(v){return new Me(v[1],v[0],v[2])}function io(v,_,H){for(var oe=[],Ee=0,Ve=v.length,jt;Ee<Ve;Ee++)jt=_?io(v[Ee],_-1,H):(H||wu)(v[Ee]),oe.push(jt);return oe}function Ko(v,_){return v=Re(v),v.alt!==void 0?[A(v.lng,_),A(v.lat,_),A(v.alt,_)]:[A(v.lng,_),A(v.lat,_)]}function Jl(v,_,H,oe){for(var Ee=[],Ve=0,jt=v.length;Ve<jt;Ve++)Ee.push(_?Jl(v[Ve],En(v[Ve])?0:_-1,H,oe):Ko(v[Ve],oe));return!_&&H&&Ee.length>0&&Ee.push(Ee[0].slice()),Ee}function bi(v,_){return v.feature?i({},v.feature,{geometry:_}):Ra(_)}function Ra(v){return v.type==="Feature"||v.type==="FeatureCollection"?v:{type:"Feature",properties:{},geometry:v}}var Xa={toGeoJSON:function(v){return bi(this,{type:"Point",coordinates:Ko(this.getLatLng(),v)})}};Wn.include(Xa),ja.include(Xa),Zi.include(Xa),Ys.include({toGeoJSON:function(v){var _=!En(this._latlngs),H=Jl(this._latlngs,_?1:0,!1,v);return bi(this,{type:(_?"Multi":"")+"LineString",coordinates:H})}}),ai.include({toGeoJSON:function(v){var _=!En(this._latlngs),H=_&&!En(this._latlngs[0]),oe=Jl(this._latlngs,H?2:_?1:0,!0,v);return _||(oe=[oe]),bi(this,{type:(H?"Multi":"")+"Polygon",coordinates:oe})}}),$n.include({toMultiPoint:function(v){var _=[];return this.eachLayer(function(H){_.push(H.toGeoJSON(v).geometry.coordinates)}),bi(this,{type:"MultiPoint",coordinates:_})},toGeoJSON:function(v){var _=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(_==="MultiPoint")return this.toMultiPoint(v);var H=_==="GeometryCollection",oe=[];return this.eachLayer(function(Ee){if(Ee.toGeoJSON){var Ve=Ee.toGeoJSON(v);if(H)oe.push(Ve.geometry);else{var jt=Ra(Ve);jt.type==="FeatureCollection"?oe.push.apply(oe,jt.features):oe.push(jt)}}}),H?bi(this,{geometries:oe,type:"GeometryCollection"}):{type:"FeatureCollection",features:oe}}});function Ul(v,_){return new Ii(v,_)}var $l=Ul,ha=Hn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(v,_,H){this._url=v,this._bounds=je(_),y(this,H)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Xn(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Ns(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(v){return this.options.opacity=v,this._image&&this._updateOpacity(),this},setStyle:function(v){return v.opacity&&this.setOpacity(v.opacity),this},bringToFront:function(){return this._map&&Va(this._image),this},bringToBack:function(){return this._map&&Ca(this._image),this},setUrl:function(v){return this._url=v,this._image&&(this._image.src=v),this},setBounds:function(v){return this._bounds=je(v),this._map&&this._reset(),this},getEvents:function(){var v={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(v.zoomanim=this._animateZoom),v},setZIndex:function(v){return this.options.zIndex=v,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var v=this._url.tagName==="IMG",_=this._image=v?this._url:ci("img");if(Xn(_,"leaflet-image-layer"),this._zoomAnimated&&Xn(_,"leaflet-zoom-animated"),this.options.className&&Xn(_,this.options.className),_.onselectstart=f,_.onmousemove=f,_.onload=o(this.fire,this,"load"),_.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(_.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),v){this._url=_.src;return}_.src=this._url,_.alt=this.options.alt},_animateZoom:function(v){var _=this._map.getZoomScale(v.zoom),H=this._map._latLngBoundsToNewLayerBounds(this._bounds,v.zoom,v.center).min;Xs(this._image,H,_)},_reset:function(){var v=this._image,_=new be(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),H=_.getSize();fs(v,_.min),v.style.width=H.x+"px",v.style.height=H.y+"px"},_updateOpacity:function(){Hi(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var v=this.options.errorOverlayUrl;v&&this._url!==v&&(this._url=v,this._image.src=v)},getCenter:function(){return this._bounds.getCenter()}}),vo=function(v,_,H){return new ha(v,_,H)},Za=ha.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var v=this._url.tagName==="VIDEO",_=this._image=v?this._url:ci("video");if(Xn(_,"leaflet-image-layer"),this._zoomAnimated&&Xn(_,"leaflet-zoom-animated"),this.options.className&&Xn(_,this.options.className),_.onselectstart=f,_.onmousemove=f,_.onloadeddata=o(this.fire,this,"load"),v){for(var H=_.getElementsByTagName("source"),oe=[],Ee=0;Ee<H.length;Ee++)oe.push(H[Ee].src);this._url=H.length>0?oe:[_.src];return}T(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(_.style,"objectFit")&&(_.style.objectFit="fill"),_.autoplay=!!this.options.autoplay,_.loop=!!this.options.loop,_.muted=!!this.options.muted,_.playsInline=!!this.options.playsInline;for(var Ve=0;Ve<this._url.length;Ve++){var jt=ci("source");jt.src=this._url[Ve],_.appendChild(jt)}}});function Hc(v,_,H){return new Za(v,_,H)}var Co=ha.extend({_initImage:function(){var v=this._image=this._url;Xn(v,"leaflet-image-layer"),this._zoomAnimated&&Xn(v,"leaflet-zoom-animated"),this.options.className&&Xn(v,this.options.className),v.onselectstart=f,v.onmousemove=f}});function pc(v,_,H){return new Co(v,_,H)}var Ka=Hn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(v,_){v&&(v instanceof Me||T(v))?(this._latlng=Re(v),y(this,_)):(y(this,v),this._source=_),this.options.content&&(this._content=this.options.content)},openOn:function(v){return v=arguments.length?v:this._source._map,v.hasLayer(this)||v.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(v){return this._map?this.close():(arguments.length?this._source=v:v=this._source,this._prepareOpen(),this.openOn(v._map)),this},onAdd:function(v){this._zoomAnimated=v._zoomAnimated,this._container||this._initLayout(),v._fadeAnimated&&Hi(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),v._fadeAnimated&&Hi(this._container,1),this.bringToFront(),this.options.interactive&&(Xn(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(v){v._fadeAnimated?(Hi(this._container,0),this._removeTimeout=setTimeout(o(Ns,void 0,this._container),200)):Ns(this._container),this.options.interactive&&(hs(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(v){return this._latlng=Re(v),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(v){return this._content=v,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var v={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(v.zoomanim=this._animateZoom),v},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Va(this._container),this},bringToBack:function(){return this._map&&Ca(this._container),this},_prepareOpen:function(v){var _=this._source;if(!_._map)return!1;if(_ instanceof Di){_=null;var H=this._source._layers;for(var oe in H)if(H[oe]._map){_=H[oe];break}if(!_)return!1;this._source=_}if(!v)if(_.getCenter)v=_.getCenter();else if(_.getLatLng)v=_.getLatLng();else if(_.getBounds)v=_.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(v),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var v=this._contentNode,_=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof _=="string")v.innerHTML=_;else{for(;v.hasChildNodes();)v.removeChild(v.firstChild);v.appendChild(_)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var v=this._map.latLngToLayerPoint(this._latlng),_=Oe(this.options.offset),H=this._getAnchor();this._zoomAnimated?fs(this._container,v.add(H)):_=_.add(v).add(H);var oe=this._containerBottom=-_.y,Ee=this._containerLeft=-Math.round(this._containerWidth/2)+_.x;this._container.style.bottom=oe+"px",this._container.style.left=Ee+"px"}},_getAnchor:function(){return[0,0]}});at.include({_initOverlay:function(v,_,H,oe){var Ee=_;return Ee instanceof v||(Ee=new v(oe).setContent(_)),H&&Ee.setLatLng(H),Ee}}),Hn.include({_initOverlay:function(v,_,H,oe){var Ee=H;return Ee instanceof v?(y(Ee,oe),Ee._source=this):(Ee=_&&!oe?_:new v(oe,this),Ee.setContent(H)),Ee}});var Hl=Ka.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(v){return v=arguments.length?v:this._source._map,!v.hasLayer(this)&&v._popup&&v._popup.options.autoClose&&v.removeLayer(v._popup),v._popup=this,Ka.prototype.openOn.call(this,v)},onAdd:function(v){Ka.prototype.onAdd.call(this,v),v.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof is||this._source.on("preclick",G))},onRemove:function(v){Ka.prototype.onRemove.call(this,v),v.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof is||this._source.off("preclick",G))},getEvents:function(){var v=Ka.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(v.preclick=this.close),this.options.keepInView&&(v.moveend=this._adjustPan),v},_initLayout:function(){var v="leaflet-popup",_=this._container=ci("div",v+" "+(this.options.className||"")+" leaflet-zoom-animated"),H=this._wrapper=ci("div",v+"-content-wrapper",_);if(this._contentNode=ci("div",v+"-content",H),ee(_),X(this._contentNode),fe(_,"contextmenu",G),this._tipContainer=ci("div",v+"-tip-container",_),this._tip=ci("div",v+"-tip",this._tipContainer),this.options.closeButton){var oe=this._closeButton=ci("a",v+"-close-button",_);oe.setAttribute("role","button"),oe.setAttribute("aria-label","Close popup"),oe.href="#close",oe.innerHTML='<span aria-hidden="true">&#215;</span>',fe(oe,"click",function(Ee){ye(Ee),this.close()},this)}},_updateLayout:function(){var v=this._contentNode,_=v.style;_.width="",_.whiteSpace="nowrap";var H=v.offsetWidth;H=Math.min(H,this.options.maxWidth),H=Math.max(H,this.options.minWidth),_.width=H+1+"px",_.whiteSpace="",_.height="";var oe=v.offsetHeight,Ee=this.options.maxHeight,Ve="leaflet-popup-scrolled";Ee&&oe>Ee?(_.height=Ee+"px",Xn(v,Ve)):hs(v,Ve),this._containerWidth=this._container.offsetWidth},_animateZoom:function(v){var _=this._map._latLngToNewLayerPoint(this._latlng,v.zoom,v.center),H=this._getAnchor();fs(this._container,_.add(H))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var v=this._map,_=parseInt(Vs(this._container,"marginBottom"),10)||0,H=this._container.offsetHeight+_,oe=this._containerWidth,Ee=new ae(this._containerLeft,-H-this._containerBottom);Ee._add(To(this._container));var Ve=v.layerPointToContainerPoint(Ee),jt=Oe(this.options.autoPanPadding),Jt=Oe(this.options.autoPanPaddingTopLeft||jt),br=Oe(this.options.autoPanPaddingBottomRight||jt),Vr=v.getSize(),vn=0,ui=0;Ve.x+oe+br.x>Vr.x&&(vn=Ve.x+oe-Vr.x+br.x),Ve.x-vn-Jt.x<0&&(vn=Ve.x-Jt.x),Ve.y+H+br.y>Vr.y&&(ui=Ve.y+H-Vr.y+br.y),Ve.y-ui-Jt.y<0&&(ui=Ve.y-Jt.y),(vn||ui)&&(this.options.keepInView&&(this._autopanning=!0),v.fire("autopanstart").panBy([vn,ui]))}},_getAnchor:function(){return Oe(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Ql=function(v,_){return new Hl(v,_)};at.mergeOptions({closePopupOnClick:!0}),at.include({openPopup:function(v,_,H){return this._initOverlay(Hl,v,_,H).openOn(this),this},closePopup:function(v){return v=arguments.length?v:this._popup,v&&v.close(),this}}),Hn.include({bindPopup:function(v,_){return this._popup=this._initOverlay(Hl,this._popup,v,_),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(v){return this._popup&&(this instanceof Di||(this._popup._source=this),this._popup._prepareOpen(v||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(v){return this._popup&&this._popup.setContent(v),this},getPopup:function(){return this._popup},_openPopup:function(v){if(!(!this._popup||!this._map)){he(v);var _=v.layer||v.target;if(this._popup._source===_&&!(_ instanceof is)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(v.latlng);return}this._popup._source=_,this.openPopup(v.latlng)}},_movePopup:function(v){this._popup.setLatLng(v.latlng)},_onKeyPress:function(v){v.originalEvent.keyCode===13&&this._openPopup(v)}});var Il=Ka.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(v){Ka.prototype.onAdd.call(this,v),this.setOpacity(this.options.opacity),v.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(v){Ka.prototype.onRemove.call(this,v),v.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var v=Ka.prototype.getEvents.call(this);return this.options.permanent||(v.preclick=this.close),v},_initLayout:function(){var v="leaflet-tooltip",_=v+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ci("div",_),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+u(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(v){var _,H,oe=this._map,Ee=this._container,Ve=oe.latLngToContainerPoint(oe.getCenter()),jt=oe.layerPointToContainerPoint(v),Jt=this.options.direction,br=Ee.offsetWidth,Vr=Ee.offsetHeight,vn=Oe(this.options.offset),ui=this._getAnchor();Jt==="top"?(_=br/2,H=Vr):Jt==="bottom"?(_=br/2,H=0):Jt==="center"?(_=br/2,H=Vr/2):Jt==="right"?(_=0,H=Vr/2):Jt==="left"?(_=br,H=Vr/2):jt.x<Ve.x?(Jt="right",_=0,H=Vr/2):(Jt="left",_=br+(vn.x+ui.x)*2,H=Vr/2),v=v.subtract(Oe(_,H,!0)).add(vn).add(ui),hs(Ee,"leaflet-tooltip-right"),hs(Ee,"leaflet-tooltip-left"),hs(Ee,"leaflet-tooltip-top"),hs(Ee,"leaflet-tooltip-bottom"),Xn(Ee,"leaflet-tooltip-"+Jt),fs(Ee,v)},_updatePosition:function(){var v=this._map.latLngToLayerPoint(this._latlng);this._setPosition(v)},setOpacity:function(v){this.options.opacity=v,this._container&&Hi(this._container,v)},_animateZoom:function(v){var _=this._map._latLngToNewLayerPoint(this._latlng,v.zoom,v.center);this._setPosition(_)},_getAnchor:function(){return Oe(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),yd=function(v,_){return new Il(v,_)};at.include({openTooltip:function(v,_,H){return this._initOverlay(Il,v,_,H).openOn(this),this},closeTooltip:function(v){return v.close(),this}}),Hn.include({bindTooltip:function(v,_){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Il,this._tooltip,v,_),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(v){if(!(!v&&this._tooltipHandlersAdded)){var _=v?"off":"on",H={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?H.add=this._openTooltip:(H.mouseover=this._openTooltip,H.mouseout=this.closeTooltip,H.click=this._openTooltip,this._map?this._addFocusListeners():H.add=this._addFocusListeners),this._tooltip.options.sticky&&(H.mousemove=this._moveTooltip),this[_](H),this._tooltipHandlersAdded=!v}},openTooltip:function(v){return this._tooltip&&(this instanceof Di||(this._tooltip._source=this),this._tooltip._prepareOpen(v)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(v){return this._tooltip&&this._tooltip.setContent(v),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(v){var _=typeof v.getElement=="function"&&v.getElement();_&&(fe(_,"focus",function(){this._tooltip._source=v,this.openTooltip()},this),fe(_,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(v){var _=typeof v.getElement=="function"&&v.getElement();_&&_.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(v){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var _=this;this._map.once("moveend",function(){_._openOnceFlag=!1,_._openTooltip(v)});return}this._tooltip._source=v.layer||v.target,this.openTooltip(this._tooltip.options.sticky?v.latlng:void 0)}},_moveTooltip:function(v){var _=v.latlng,H,oe;this._tooltip.options.sticky&&v.originalEvent&&(H=this._map.mouseEventToContainerPoint(v.originalEvent),oe=this._map.containerPointToLayerPoint(H),_=this._map.layerPointToLatLng(oe)),this._tooltip.setLatLng(_)}});var ec=ns.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(v){var _=v&&v.tagName==="DIV"?v:document.createElement("div"),H=this.options;if(H.html instanceof Element?(Ta(_),_.appendChild(H.html)):_.innerHTML=H.html!==!1?H.html:"",H.bgPos){var oe=Oe(H.bgPos);_.style.backgroundPosition=-oe.x+"px "+-oe.y+"px"}return this._setIconStyles(_,"icon"),_},createShadow:function(){return null}});function Vl(v){return new ec(v)}ns.Default=Un;var gc=Hn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Cn.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(v){y(this,v)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(v){v._addZoomLimit(this)},onRemove:function(v){this._removeAllTiles(),Ns(this._container),v._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Va(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Ca(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(v){return this.options.opacity=v,this._updateOpacity(),this},setZIndex:function(v){return this.options.zIndex=v,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var v=this._clampZoom(this._map.getZoom());v!==this._tileZoom&&(this._tileZoom=v,this._updateLevels()),this._update()}return this},getEvents:function(){var v={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=l(this._onMoveEnd,this.options.updateInterval,this)),v.move=this._onMove),this._zoomAnimated&&(v.zoomanim=this._animateZoom),v},createTile:function(){return document.createElement("div")},getTileSize:function(){var v=this.options.tileSize;return v instanceof ae?v:new ae(v,v)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(v){for(var _=this.getPane().children,H=-v(-1/0,1/0),oe=0,Ee=_.length,Ve;oe<Ee;oe++)Ve=_[oe].style.zIndex,_[oe]!==this._container&&Ve&&(H=v(H,+Ve));isFinite(H)&&(this.options.zIndex=H+v(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Cn.ielt9){Hi(this._container,this.options.opacity);var v=+new Date,_=!1,H=!1;for(var oe in this._tiles){var Ee=this._tiles[oe];if(!(!Ee.current||!Ee.loaded)){var Ve=Math.min(1,(v-Ee.loaded)/200);Hi(Ee.el,Ve),Ve<1?_=!0:(Ee.active?H=!0:this._onOpaqueTile(Ee),Ee.active=!0)}}H&&!this._noPrune&&this._pruneTiles(),_&&(Ae(this._fadeFrame),this._fadeFrame=se(this._updateOpacity,this))}},_onOpaqueTile:f,_initContainer:function(){this._container||(this._container=ci("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var v=this._tileZoom,_=this.options.maxZoom;if(v!==void 0){for(var H in this._levels)H=Number(H),this._levels[H].el.children.length||H===v?(this._levels[H].el.style.zIndex=_-Math.abs(v-H),this._onUpdateLevel(H)):(Ns(this._levels[H].el),this._removeTilesAtZoom(H),this._onRemoveLevel(H),delete this._levels[H]);var oe=this._levels[v],Ee=this._map;return oe||(oe=this._levels[v]={},oe.el=ci("div","leaflet-tile-container leaflet-zoom-animated",this._container),oe.el.style.zIndex=_,oe.origin=Ee.project(Ee.unproject(Ee.getPixelOrigin()),v).round(),oe.zoom=v,this._setZoomTransform(oe,Ee.getCenter(),Ee.getZoom()),f(oe.el.offsetWidth),this._onCreateLevel(oe)),this._level=oe,oe}},_onUpdateLevel:f,_onRemoveLevel:f,_onCreateLevel:f,_pruneTiles:function(){if(this._map){var v,_,H=this._map.getZoom();if(H>this.options.maxZoom||H<this.options.minZoom){this._removeAllTiles();return}for(v in this._tiles)_=this._tiles[v],_.retain=_.current;for(v in this._tiles)if(_=this._tiles[v],_.current&&!_.active){var oe=_.coords;this._retainParent(oe.x,oe.y,oe.z,oe.z-5)||this._retainChildren(oe.x,oe.y,oe.z,oe.z+2)}for(v in this._tiles)this._tiles[v].retain||this._removeTile(v)}},_removeTilesAtZoom:function(v){for(var _ in this._tiles)this._tiles[_].coords.z===v&&this._removeTile(_)},_removeAllTiles:function(){for(var v in this._tiles)this._removeTile(v)},_invalidateAll:function(){for(var v in this._levels)Ns(this._levels[v].el),this._onRemoveLevel(Number(v)),delete this._levels[v];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(v,_,H,oe){var Ee=Math.floor(v/2),Ve=Math.floor(_/2),jt=H-1,Jt=new ae(+Ee,+Ve);Jt.z=+jt;var br=this._tileCoordsToKey(Jt),Vr=this._tiles[br];return Vr&&Vr.active?(Vr.retain=!0,!0):(Vr&&Vr.loaded&&(Vr.retain=!0),jt>oe?this._retainParent(Ee,Ve,jt,oe):!1)},_retainChildren:function(v,_,H,oe){for(var Ee=2*v;Ee<2*v+2;Ee++)for(var Ve=2*_;Ve<2*_+2;Ve++){var jt=new ae(Ee,Ve);jt.z=H+1;var Jt=this._tileCoordsToKey(jt),br=this._tiles[Jt];if(br&&br.active){br.retain=!0;continue}else br&&br.loaded&&(br.retain=!0);H+1<oe&&this._retainChildren(Ee,Ve,H+1,oe)}},_resetView:function(v){var _=v&&(v.pinch||v.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),_,_)},_animateZoom:function(v){this._setView(v.center,v.zoom,!0,v.noUpdate)},_clampZoom:function(v){var _=this.options;return _.minNativeZoom!==void 0&&v<_.minNativeZoom?_.minNativeZoom:_.maxNativeZoom!==void 0&&_.maxNativeZoom<v?_.maxNativeZoom:v},_setView:function(v,_,H,oe){var Ee=Math.round(_);this.options.maxZoom!==void 0&&Ee>this.options.maxZoom||this.options.minZoom!==void 0&&Ee<this.options.minZoom?Ee=void 0:Ee=this._clampZoom(Ee);var Ve=this.options.updateWhenZooming&&Ee!==this._tileZoom;(!oe||Ve)&&(this._tileZoom=Ee,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),Ee!==void 0&&this._update(v),H||this._pruneTiles(),this._noPrune=!!H),this._setZoomTransforms(v,_)},_setZoomTransforms:function(v,_){for(var H in this._levels)this._setZoomTransform(this._levels[H],v,_)},_setZoomTransform:function(v,_,H){var oe=this._map.getZoomScale(H,v.zoom),Ee=v.origin.multiplyBy(oe).subtract(this._map._getNewPixelOrigin(_,H)).round();Cn.any3d?Xs(v.el,Ee,oe):fs(v.el,Ee)},_resetGrid:function(){var v=this._map,_=v.options.crs,H=this._tileSize=this.getTileSize(),oe=this._tileZoom,Ee=this._map.getPixelWorldBounds(this._tileZoom);Ee&&(this._globalTileRange=this._pxBoundsToTileRange(Ee)),this._wrapX=_.wrapLng&&!this.options.noWrap&&[Math.floor(v.project([0,_.wrapLng[0]],oe).x/H.x),Math.ceil(v.project([0,_.wrapLng[1]],oe).x/H.y)],this._wrapY=_.wrapLat&&!this.options.noWrap&&[Math.floor(v.project([_.wrapLat[0],0],oe).y/H.x),Math.ceil(v.project([_.wrapLat[1],0],oe).y/H.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(v){var _=this._map,H=_._animatingZoom?Math.max(_._animateToZoom,_.getZoom()):_.getZoom(),oe=_.getZoomScale(H,this._tileZoom),Ee=_.project(v,this._tileZoom).floor(),Ve=_.getSize().divideBy(oe*2);return new be(Ee.subtract(Ve),Ee.add(Ve))},_update:function(v){var _=this._map;if(_){var H=this._clampZoom(_.getZoom());if(v===void 0&&(v=_.getCenter()),this._tileZoom!==void 0){var oe=this._getTiledPixelBounds(v),Ee=this._pxBoundsToTileRange(oe),Ve=Ee.getCenter(),jt=[],Jt=this.options.keepBuffer,br=new be(Ee.getBottomLeft().subtract([Jt,-Jt]),Ee.getTopRight().add([Jt,-Jt]));if(!(isFinite(Ee.min.x)&&isFinite(Ee.min.y)&&isFinite(Ee.max.x)&&isFinite(Ee.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Vr in this._tiles){var vn=this._tiles[Vr].coords;(vn.z!==this._tileZoom||!br.contains(new ae(vn.x,vn.y)))&&(this._tiles[Vr].current=!1)}if(Math.abs(H-this._tileZoom)>1){this._setView(v,H);return}for(var ui=Ee.min.y;ui<=Ee.max.y;ui++)for(var As=Ee.min.x;As<=Ee.max.x;As++){var Da=new ae(As,ui);if(Da.z=this._tileZoom,!!this._isValidTile(Da)){var jo=this._tiles[this._tileCoordsToKey(Da)];jo?jo.current=!0:jt.push(Da)}}if(jt.sort(function(Zs,la){return Zs.distanceTo(Ve)-la.distanceTo(Ve)}),jt.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var il=document.createDocumentFragment();for(As=0;As<jt.length;As++)this._addTile(jt[As],il);this._level.el.appendChild(il)}}}},_isValidTile:function(v){var _=this._map.options.crs;if(!_.infinite){var H=this._globalTileRange;if(!_.wrapLng&&(v.x<H.min.x||v.x>H.max.x)||!_.wrapLat&&(v.y<H.min.y||v.y>H.max.y))return!1}if(!this.options.bounds)return!0;var oe=this._tileCoordsToBounds(v);return je(this.options.bounds).overlaps(oe)},_keyToBounds:function(v){return this._tileCoordsToBounds(this._keyToTileCoords(v))},_tileCoordsToNwSe:function(v){var _=this._map,H=this.getTileSize(),oe=v.scaleBy(H),Ee=oe.add(H),Ve=_.unproject(oe,v.z),jt=_.unproject(Ee,v.z);return[Ve,jt]},_tileCoordsToBounds:function(v){var _=this._tileCoordsToNwSe(v),H=new xe(_[0],_[1]);return this.options.noWrap||(H=this._map.wrapLatLngBounds(H)),H},_tileCoordsToKey:function(v){return v.x+":"+v.y+":"+v.z},_keyToTileCoords:function(v){var _=v.split(":"),H=new ae(+_[0],+_[1]);return H.z=+_[2],H},_removeTile:function(v){var _=this._tiles[v];_&&(Ns(_.el),delete this._tiles[v],this.fire("tileunload",{tile:_.el,coords:this._keyToTileCoords(v)}))},_initTile:function(v){Xn(v,"leaflet-tile");var _=this.getTileSize();v.style.width=_.x+"px",v.style.height=_.y+"px",v.onselectstart=f,v.onmousemove=f,Cn.ielt9&&this.options.opacity<1&&Hi(v,this.options.opacity)},_addTile:function(v,_){var H=this._getTilePos(v),oe=this._tileCoordsToKey(v),Ee=this.createTile(this._wrapCoords(v),o(this._tileReady,this,v));this._initTile(Ee),this.createTile.length<2&&se(o(this._tileReady,this,v,null,Ee)),fs(Ee,H),this._tiles[oe]={el:Ee,coords:v,current:!0},_.appendChild(Ee),this.fire("tileloadstart",{tile:Ee,coords:v})},_tileReady:function(v,_,H){_&&this.fire("tileerror",{error:_,tile:H,coords:v});var oe=this._tileCoordsToKey(v);H=this._tiles[oe],H&&(H.loaded=+new Date,this._map._fadeAnimated?(Hi(H.el,0),Ae(this._fadeFrame),this._fadeFrame=se(this._updateOpacity,this)):(H.active=!0,this._pruneTiles()),_||(Xn(H.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:H.el,coords:v})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Cn.ielt9||!this._map._fadeAnimated?se(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(v){return v.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(v){var _=new ae(this._wrapX?d(v.x,this._wrapX):v.x,this._wrapY?d(v.y,this._wrapY):v.y);return _.z=v.z,_},_pxBoundsToTileRange:function(v){var _=this.getTileSize();return new be(v.min.unscaleBy(_).floor(),v.max.unscaleBy(_).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var v in this._tiles)if(!this._tiles[v].loaded)return!1;return!0}});function xd(v){return new gc(v)}var zl=gc.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(v,_){this._url=v,_=y(this,_),_.detectRetina&&Cn.retina&&_.maxZoom>0?(_.tileSize=Math.floor(_.tileSize/2),_.zoomReverse?(_.zoomOffset--,_.minZoom=Math.min(_.maxZoom,_.minZoom+1)):(_.zoomOffset++,_.maxZoom=Math.max(_.minZoom,_.maxZoom-1)),_.minZoom=Math.max(0,_.minZoom)):_.zoomReverse?_.minZoom=Math.min(_.maxZoom,_.minZoom):_.maxZoom=Math.max(_.minZoom,_.maxZoom),typeof _.subdomains=="string"&&(_.subdomains=_.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(v,_){return this._url===v&&_===void 0&&(_=!0),this._url=v,_||this.redraw(),this},createTile:function(v,_){var H=document.createElement("img");return fe(H,"load",o(this._tileOnLoad,this,_,H)),fe(H,"error",o(this._tileOnError,this,_,H)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(H.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(H.referrerPolicy=this.options.referrerPolicy),H.alt="",H.src=this.getTileUrl(v),H},getTileUrl:function(v){var _={r:Cn.retina?"@2x":"",s:this._getSubdomain(v),x:v.x,y:v.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var H=this._globalTileRange.max.y-v.y;this.options.tms&&(_.y=H),_["-y"]=H}return E(this._url,i(_,this.options))},_tileOnLoad:function(v,_){Cn.ielt9?setTimeout(o(v,this,null,_),0):v(null,_)},_tileOnError:function(v,_,H){var oe=this.options.errorTileUrl;oe&&_.getAttribute("src")!==oe&&(_.src=oe),v(H,_)},_onTileRemove:function(v){v.tile.onload=null},_getZoomForUrl:function(){var v=this._tileZoom,_=this.options.maxZoom,H=this.options.zoomReverse,oe=this.options.zoomOffset;return H&&(v=_-v),v+oe},_getSubdomain:function(v){var _=Math.abs(v.x+v.y)%this.options.subdomains.length;return this.options.subdomains[_]},_abortLoading:function(){var v,_;for(v in this._tiles)if(this._tiles[v].coords.z!==this._tileZoom&&(_=this._tiles[v].el,_.onload=f,_.onerror=f,!_.complete)){_.src=N;var H=this._tiles[v].coords;Ns(_),delete this._tiles[v],this.fire("tileabort",{tile:_,coords:H})}},_removeTile:function(v){var _=this._tiles[v];if(_)return _.el.setAttribute("src",N),gc.prototype._removeTile.call(this,v)},_tileReady:function(v,_,H){if(!(!this._map||H&&H.getAttribute("src")===N))return gc.prototype._tileReady.call(this,v,_,H)}});function Kl(v,_){return new zl(v,_)}var Eu=zl.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(v,_){this._url=v;var H=i({},this.defaultWmsParams);for(var oe in _)oe in this.options||(H[oe]=_[oe]);_=y(this,_);var Ee=_.detectRetina&&Cn.retina?2:1,Ve=this.getTileSize();H.width=Ve.x*Ee,H.height=Ve.y*Ee,this.wmsParams=H},onAdd:function(v){this._crs=this.options.crs||v.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var _=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[_]=this._crs.code,zl.prototype.onAdd.call(this,v)},getTileUrl:function(v){var _=this._tileCoordsToNwSe(v),H=this._crs,oe=de(H.project(_[0]),H.project(_[1])),Ee=oe.min,Ve=oe.max,jt=(this._wmsVersion>=1.3&&this._crs===ji?[Ee.y,Ee.x,Ve.y,Ve.x]:[Ee.x,Ee.y,Ve.x,Ve.y]).join(","),Jt=zl.prototype.getTileUrl.call(this,v);return Jt+x(this.wmsParams,Jt,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+jt},setParams:function(v,_){return i(this.wmsParams,v),_||this.redraw(),this}});function Gl(v,_){return new Eu(v,_)}zl.WMS=Eu,Kl.wms=Gl;var Lo=Hn.extend({options:{padding:.1},initialize:function(v){y(this,v),u(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Xn(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var v={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(v.zoomanim=this._onAnimZoom),v},_onAnimZoom:function(v){this._updateTransform(v.center,v.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(v,_){var H=this._map.getZoomScale(_,this._zoom),oe=this._map.getSize().multiplyBy(.5+this.options.padding),Ee=this._map.project(this._center,_),Ve=oe.multiplyBy(-H).add(Ee).subtract(this._map._getNewPixelOrigin(v,_));Cn.any3d?Xs(this._container,Ve,H):fs(this._container,Ve)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var v in this._layers)this._layers[v]._reset()},_onZoomEnd:function(){for(var v in this._layers)this._layers[v]._project()},_updatePaths:function(){for(var v in this._layers)this._layers[v]._update()},_update:function(){var v=this.options.padding,_=this._map.getSize(),H=this._map.containerPointToLayerPoint(_.multiplyBy(-v)).round();this._bounds=new be(H,H.add(_.multiplyBy(1+v*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),gl=Lo.extend({options:{tolerance:0},getEvents:function(){var v=Lo.prototype.getEvents.call(this);return v.viewprereset=this._onViewPreReset,v},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Lo.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var v=this._container=document.createElement("canvas");fe(v,"mousemove",this._onMouseMove,this),fe(v,"click dblclick mousedown mouseup contextmenu",this._onClick,this),fe(v,"mouseout",this._handleMouseOut,this),v._leaflet_disable_events=!0,this._ctx=v.getContext("2d")},_destroyContainer:function(){Ae(this._redrawRequest),delete this._ctx,Ns(this._container),$e(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var v;this._redrawBounds=null;for(var _ in this._layers)v=this._layers[_],v._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Lo.prototype._update.call(this);var v=this._bounds,_=this._container,H=v.getSize(),oe=Cn.retina?2:1;fs(_,v.min),_.width=oe*H.x,_.height=oe*H.y,_.style.width=H.x+"px",_.style.height=H.y+"px",Cn.retina&&this._ctx.scale(2,2),this._ctx.translate(-v.min.x,-v.min.y),this.fire("update")}},_reset:function(){Lo.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(v){this._updateDashArray(v),this._layers[u(v)]=v;var _=v._order={layer:v,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=_),this._drawLast=_,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(v){this._requestRedraw(v)},_removePath:function(v){var _=v._order,H=_.next,oe=_.prev;H?H.prev=oe:this._drawLast=oe,oe?oe.next=H:this._drawFirst=H,delete v._order,delete this._layers[u(v)],this._requestRedraw(v)},_updatePath:function(v){this._extendRedrawBounds(v),v._project(),v._update(),this._requestRedraw(v)},_updateStyle:function(v){this._updateDashArray(v),this._requestRedraw(v)},_updateDashArray:function(v){if(typeof v.options.dashArray=="string"){var _=v.options.dashArray.split(/[, ]+/),H=[],oe,Ee;for(Ee=0;Ee<_.length;Ee++){if(oe=Number(_[Ee]),isNaN(oe))return;H.push(oe)}v.options._dashArray=H}else v.options._dashArray=v.options.dashArray},_requestRedraw:function(v){this._map&&(this._extendRedrawBounds(v),this._redrawRequest=this._redrawRequest||se(this._redraw,this))},_extendRedrawBounds:function(v){if(v._pxBounds){var _=(v.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new be,this._redrawBounds.extend(v._pxBounds.min.subtract([_,_])),this._redrawBounds.extend(v._pxBounds.max.add([_,_]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var v=this._redrawBounds;if(v){var _=v.getSize();this._ctx.clearRect(v.min.x,v.min.y,_.x,_.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var v,_=this._redrawBounds;if(this._ctx.save(),_){var H=_.getSize();this._ctx.beginPath(),this._ctx.rect(_.min.x,_.min.y,H.x,H.y),this._ctx.clip()}this._drawing=!0;for(var oe=this._drawFirst;oe;oe=oe.next)v=oe.layer,(!_||v._pxBounds&&v._pxBounds.intersects(_))&&v._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(v,_){if(this._drawing){var H,oe,Ee,Ve,jt=v._parts,Jt=jt.length,br=this._ctx;if(Jt){for(br.beginPath(),H=0;H<Jt;H++){for(oe=0,Ee=jt[H].length;oe<Ee;oe++)Ve=jt[H][oe],br[oe?"lineTo":"moveTo"](Ve.x,Ve.y);_&&br.closePath()}this._fillStroke(br,v)}}},_updateCircle:function(v){if(!(!this._drawing||v._empty())){var _=v._point,H=this._ctx,oe=Math.max(Math.round(v._radius),1),Ee=(Math.max(Math.round(v._radiusY),1)||oe)/oe;Ee!==1&&(H.save(),H.scale(1,Ee)),H.beginPath(),H.arc(_.x,_.y/Ee,oe,0,Math.PI*2,!1),Ee!==1&&H.restore(),this._fillStroke(H,v)}},_fillStroke:function(v,_){var H=_.options;H.fill&&(v.globalAlpha=H.fillOpacity,v.fillStyle=H.fillColor||H.color,v.fill(H.fillRule||"evenodd")),H.stroke&&H.weight!==0&&(v.setLineDash&&v.setLineDash(_.options&&_.options._dashArray||[]),v.globalAlpha=H.opacity,v.lineWidth=H.weight,v.strokeStyle=H.color,v.lineCap=H.lineCap,v.lineJoin=H.lineJoin,v.stroke())},_onClick:function(v){for(var _=this._map.mouseEventToLayerPoint(v),H,oe,Ee=this._drawFirst;Ee;Ee=Ee.next)H=Ee.layer,H.options.interactive&&H._containsPoint(_)&&(!(v.type==="click"||v.type==="preclick")||!this._map._draggableMoved(H))&&(oe=H);this._fireEvent(oe?[oe]:!1,v)},_onMouseMove:function(v){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var _=this._map.mouseEventToLayerPoint(v);this._handleMouseHover(v,_)}},_handleMouseOut:function(v){var _=this._hoveredLayer;_&&(hs(this._container,"leaflet-interactive"),this._fireEvent([_],v,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(v,_){if(!this._mouseHoverThrottled){for(var H,oe,Ee=this._drawFirst;Ee;Ee=Ee.next)H=Ee.layer,H.options.interactive&&H._containsPoint(_)&&(oe=H);oe!==this._hoveredLayer&&(this._handleMouseOut(v),oe&&(Xn(this._container,"leaflet-interactive"),this._fireEvent([oe],v,"mouseover"),this._hoveredLayer=oe)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,v),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(v,_,H){this._map._fireDOMEvent(_,H||_.type,v)},_bringToFront:function(v){var _=v._order;if(_){var H=_.next,oe=_.prev;if(H)H.prev=oe;else return;oe?oe.next=H:H&&(this._drawFirst=H),_.prev=this._drawLast,this._drawLast.next=_,_.next=null,this._drawLast=_,this._requestRedraw(v)}},_bringToBack:function(v){var _=v._order;if(_){var H=_.next,oe=_.prev;if(oe)oe.next=H;else return;H?H.prev=oe:oe&&(this._drawLast=oe),_.prev=null,_.next=this._drawFirst,this._drawFirst.prev=_,this._drawFirst=_,this._requestRedraw(v)}}});function iu(v){return Cn.canvas?new gl(v):null}var vc=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(v){return document.createElement("<lvml:"+v+' class="lvml">')}}catch{}return function(v){return document.createElement("<"+v+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),Hd={_initContainer:function(){this._container=ci("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Lo.prototype._update.call(this),this.fire("update"))},_initPath:function(v){var _=v._container=vc("shape");Xn(_,"leaflet-vml-shape "+(this.options.className||"")),_.coordsize="1 1",v._path=vc("path"),_.appendChild(v._path),this._updateStyle(v),this._layers[u(v)]=v},_addPath:function(v){var _=v._container;this._container.appendChild(_),v.options.interactive&&v.addInteractiveTarget(_)},_removePath:function(v){var _=v._container;Ns(_),v.removeInteractiveTarget(_),delete this._layers[u(v)]},_updateStyle:function(v){var _=v._stroke,H=v._fill,oe=v.options,Ee=v._container;Ee.stroked=!!oe.stroke,Ee.filled=!!oe.fill,oe.stroke?(_||(_=v._stroke=vc("stroke")),Ee.appendChild(_),_.weight=oe.weight+"px",_.color=oe.color,_.opacity=oe.opacity,oe.dashArray?_.dashStyle=T(oe.dashArray)?oe.dashArray.join(" "):oe.dashArray.replace(/( *, *)/g," "):_.dashStyle="",_.endcap=oe.lineCap.replace("butt","flat"),_.joinstyle=oe.lineJoin):_&&(Ee.removeChild(_),v._stroke=null),oe.fill?(H||(H=v._fill=vc("fill")),Ee.appendChild(H),H.color=oe.fillColor||oe.color,H.opacity=oe.fillOpacity):H&&(Ee.removeChild(H),v._fill=null)},_updateCircle:function(v){var _=v._point.round(),H=Math.round(v._radius),oe=Math.round(v._radiusY||H);this._setPath(v,v._empty()?"M0 0":"AL "+_.x+","+_.y+" "+H+","+oe+" 0,"+65535*360)},_setPath:function(v,_){v._path.v=_},_bringToFront:function(v){Va(v._container)},_bringToBack:function(v){Ca(v._container)}},tc=Cn.vml?vc:kt,Gu=Lo.extend({_initContainer:function(){this._container=tc("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=tc("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Ns(this._container),$e(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Lo.prototype._update.call(this);var v=this._bounds,_=v.getSize(),H=this._container;(!this._svgSize||!this._svgSize.equals(_))&&(this._svgSize=_,H.setAttribute("width",_.x),H.setAttribute("height",_.y)),fs(H,v.min),H.setAttribute("viewBox",[v.min.x,v.min.y,_.x,_.y].join(" ")),this.fire("update")}},_initPath:function(v){var _=v._path=tc("path");v.options.className&&Xn(_,v.options.className),v.options.interactive&&Xn(_,"leaflet-interactive"),this._updateStyle(v),this._layers[u(v)]=v},_addPath:function(v){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(v._path),v.addInteractiveTarget(v._path)},_removePath:function(v){Ns(v._path),v.removeInteractiveTarget(v._path),delete this._layers[u(v)]},_updatePath:function(v){v._project(),v._update()},_updateStyle:function(v){var _=v._path,H=v.options;_&&(H.stroke?(_.setAttribute("stroke",H.color),_.setAttribute("stroke-opacity",H.opacity),_.setAttribute("stroke-width",H.weight),_.setAttribute("stroke-linecap",H.lineCap),_.setAttribute("stroke-linejoin",H.lineJoin),H.dashArray?_.setAttribute("stroke-dasharray",H.dashArray):_.removeAttribute("stroke-dasharray"),H.dashOffset?_.setAttribute("stroke-dashoffset",H.dashOffset):_.removeAttribute("stroke-dashoffset")):_.setAttribute("stroke","none"),H.fill?(_.setAttribute("fill",H.fillColor||H.color),_.setAttribute("fill-opacity",H.fillOpacity),_.setAttribute("fill-rule",H.fillRule||"evenodd")):_.setAttribute("fill","none"))},_updatePoly:function(v,_){this._setPath(v,_t(v._parts,_))},_updateCircle:function(v){var _=v._point,H=Math.max(Math.round(v._radius),1),oe=Math.max(Math.round(v._radiusY),1)||H,Ee="a"+H+","+oe+" 0 1,0 ",Ve=v._empty()?"M0 0":"M"+(_.x-H)+","+_.y+Ee+H*2+",0 "+Ee+-H*2+",0 ";this._setPath(v,Ve)},_setPath:function(v,_){v._path.setAttribute("d",_)},_bringToFront:function(v){Va(v._path)},_bringToBack:function(v){Ca(v._path)}});Cn.vml&&Gu.include(Hd);function bd(v){return Cn.svg||Cn.vml?new Gu(v):null}at.include({getRenderer:function(v){var _=v.options.renderer||this._getPaneRenderer(v.options.pane)||this.options.renderer||this._renderer;return _||(_=this._renderer=this._createRenderer()),this.hasLayer(_)||this.addLayer(_),_},_getPaneRenderer:function(v){if(v==="overlayPane"||v===void 0)return!1;var _=this._paneRenderers[v];return _===void 0&&(_=this._createRenderer({pane:v}),this._paneRenderers[v]=_),_},_createRenderer:function(v){return this.options.preferCanvas&&iu(v)||bd(v)}});var vl=ai.extend({initialize:function(v,_){ai.prototype.initialize.call(this,this._boundsToLatLngs(v),_)},setBounds:function(v){return this.setLatLngs(this._boundsToLatLngs(v))},_boundsToLatLngs:function(v){return v=je(v),[v.getSouthWest(),v.getNorthWest(),v.getNorthEast(),v.getSouthEast()]}});function sh(v,_){return new vl(v,_)}Gu.create=tc,Gu.pointsToPath=_t,Ii.geometryToLayer=xn,Ii.coordsToLatLng=wu,Ii.coordsToLatLngs=io,Ii.latLngToCoords=Ko,Ii.latLngsToCoords=Jl,Ii.getFeature=bi,Ii.asFeature=Ra,at.mergeOptions({boxZoom:!0});var Ll=mt.extend({initialize:function(v){this._map=v,this._container=v._container,this._pane=v._panes.overlayPane,this._resetStateTimeout=0,v.on("unload",this._destroy,this)},addHooks:function(){fe(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){$e(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Ns(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(v){if(!v.shiftKey||v.which!==1&&v.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),za(),no(),this._startPoint=this._map.mouseEventToContainerPoint(v),fe(document,{contextmenu:he,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(v){this._moved||(this._moved=!0,this._box=ci("div","leaflet-zoom-box",this._container),Xn(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(v);var _=new be(this._point,this._startPoint),H=_.getSize();fs(this._box,_.min),this._box.style.width=H.x+"px",this._box.style.height=H.y+"px"},_finish:function(){this._moved&&(Ns(this._box),hs(this._container,"leaflet-crosshair")),zs(),zo(),$e(document,{contextmenu:he,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(v){if(!(v.which!==1&&v.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var _=new xe(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(_).fire("boxzoomend",{boxZoomBounds:_})}},_onKeyDown:function(v){v.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});at.addInitHook("addHandler","boxZoom",Ll),at.mergeOptions({doubleClickZoom:!0});var Fi=mt.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(v){var _=this._map,H=_.getZoom(),oe=_.options.zoomDelta,Ee=v.originalEvent.shiftKey?H-oe:H+oe;_.options.doubleClickZoom==="center"?_.setZoom(Ee):_.setZoomAround(v.containerPoint,Ee)}});at.addInitHook("addHandler","doubleClickZoom",Fi),at.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var yc=mt.extend({addHooks:function(){if(!this._draggable){var v=this._map;this._draggable=new Ar(v._mapPane,v._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),v.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),v.on("zoomend",this._onZoomEnd,this),v.whenReady(this._onZoomEnd,this))}Xn(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){hs(this._map._container,"leaflet-grab"),hs(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var v=this._map;if(v._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var _=je(this._map.options.maxBounds);this._offsetLimit=de(this._map.latLngToContainerPoint(_.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(_.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;v.fire("movestart").fire("dragstart"),v.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(v){if(this._map.options.inertia){var _=this._lastTime=+new Date,H=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(H),this._times.push(_),this._prunePositions(_)}this._map.fire("move",v).fire("drag",v)},_prunePositions:function(v){for(;this._positions.length>1&&v-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var v=this._map.getSize().divideBy(2),_=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=_.subtract(v).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(v,_){return v-(v-_)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var v=this._draggable._newPos.subtract(this._draggable._startPos),_=this._offsetLimit;v.x<_.min.x&&(v.x=this._viscousLimit(v.x,_.min.x)),v.y<_.min.y&&(v.y=this._viscousLimit(v.y,_.min.y)),v.x>_.max.x&&(v.x=this._viscousLimit(v.x,_.max.x)),v.y>_.max.y&&(v.y=this._viscousLimit(v.y,_.max.y)),this._draggable._newPos=this._draggable._startPos.add(v)}},_onPreDragWrap:function(){var v=this._worldWidth,_=Math.round(v/2),H=this._initialWorldOffset,oe=this._draggable._newPos.x,Ee=(oe-_+H)%v+_-H,Ve=(oe+_+H)%v-_-H,jt=Math.abs(Ee+H)<Math.abs(Ve+H)?Ee:Ve;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=jt},_onDragEnd:function(v){var _=this._map,H=_.options,oe=!H.inertia||v.noInertia||this._times.length<2;if(_.fire("dragend",v),oe)_.fire("moveend");else{this._prunePositions(+new Date);var Ee=this._lastPos.subtract(this._positions[0]),Ve=(this._lastTime-this._times[0])/1e3,jt=H.easeLinearity,Jt=Ee.multiplyBy(jt/Ve),br=Jt.distanceTo([0,0]),Vr=Math.min(H.inertiaMaxSpeed,br),vn=Jt.multiplyBy(Vr/br),ui=Vr/(H.inertiaDeceleration*jt),As=vn.multiplyBy(-ui/2).round();!As.x&&!As.y?_.fire("moveend"):(As=_._limitOffset(As,_.options.maxBounds),se(function(){_.panBy(As,{duration:ui,easeLinearity:jt,noMoveStart:!0,animate:!0})}))}}});at.addInitHook("addHandler","dragging",yc),at.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Qc=mt.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(v){this._map=v,this._setPanDelta(v.options.keyboardPanDelta),this._setZoomDelta(v.options.zoomDelta)},addHooks:function(){var v=this._map._container;v.tabIndex<=0&&(v.tabIndex="0"),fe(v,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),$e(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var v=document.body,_=document.documentElement,H=v.scrollTop||_.scrollTop,oe=v.scrollLeft||_.scrollLeft;this._map._container.focus(),window.scrollTo(oe,H)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(v){var _=this._panKeys={},H=this.keyCodes,oe,Ee;for(oe=0,Ee=H.left.length;oe<Ee;oe++)_[H.left[oe]]=[-1*v,0];for(oe=0,Ee=H.right.length;oe<Ee;oe++)_[H.right[oe]]=[v,0];for(oe=0,Ee=H.down.length;oe<Ee;oe++)_[H.down[oe]]=[0,v];for(oe=0,Ee=H.up.length;oe<Ee;oe++)_[H.up[oe]]=[0,-1*v]},_setZoomDelta:function(v){var _=this._zoomKeys={},H=this.keyCodes,oe,Ee;for(oe=0,Ee=H.zoomIn.length;oe<Ee;oe++)_[H.zoomIn[oe]]=v;for(oe=0,Ee=H.zoomOut.length;oe<Ee;oe++)_[H.zoomOut[oe]]=-v},_addHooks:function(){fe(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){$e(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(v){if(!(v.altKey||v.ctrlKey||v.metaKey)){var _=v.keyCode,H=this._map,oe;if(_ in this._panKeys){if(!H._panAnim||!H._panAnim._inProgress)if(oe=this._panKeys[_],v.shiftKey&&(oe=Oe(oe).multiplyBy(3)),H.options.maxBounds&&(oe=H._limitOffset(Oe(oe),H.options.maxBounds)),H.options.worldCopyJump){var Ee=H.wrapLatLng(H.unproject(H.project(H.getCenter()).add(oe)));H.panTo(Ee)}else H.panBy(oe)}else if(_ in this._zoomKeys)H.setZoom(H.getZoom()+(v.shiftKey?3:1)*this._zoomKeys[_]);else if(_===27&&H._popup&&H._popup.options.closeOnEscapeKey)H.closePopup();else return;he(v)}}});at.addInitHook("addHandler","keyboard",Qc),at.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Vc=mt.extend({addHooks:function(){fe(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){$e(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(v){var _=qe(v),H=this._map.options.wheelDebounceTime;this._delta+=_,this._lastMousePos=this._map.mouseEventToContainerPoint(v),this._startTime||(this._startTime=+new Date);var oe=Math.max(H-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),oe),he(v)},_performZoom:function(){var v=this._map,_=v.getZoom(),H=this._map.options.zoomSnap||0;v._stop();var oe=this._delta/(this._map.options.wheelPxPerZoomLevel*4),Ee=4*Math.log(2/(1+Math.exp(-Math.abs(oe))))/Math.LN2,Ve=H?Math.ceil(Ee/H)*H:Ee,jt=v._limitZoom(_+(this._delta>0?Ve:-Ve))-_;this._delta=0,this._startTime=null,jt&&(v.options.scrollWheelZoom==="center"?v.setZoom(_+jt):v.setZoomAround(this._lastMousePos,_+jt))}});at.addInitHook("addHandler","scrollWheelZoom",Vc);var Wu=600;at.mergeOptions({tapHold:Cn.touchNative&&Cn.safari&&Cn.mobile,tapTolerance:15});var xc=mt.extend({addHooks:function(){fe(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){$e(this._map._container,"touchstart",this._onDown,this)},_onDown:function(v){if(clearTimeout(this._holdTimeout),v.touches.length===1){var _=v.touches[0];this._startPos=this._newPos=new ae(_.clientX,_.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(fe(document,"touchend",ye),fe(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",_))},this),Wu),fe(document,"touchend touchcancel contextmenu",this._cancel,this),fe(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function v(){$e(document,"touchend",ye),$e(document,"touchend touchcancel",v)},_cancel:function(){clearTimeout(this._holdTimeout),$e(document,"touchend touchcancel contextmenu",this._cancel,this),$e(document,"touchmove",this._onMove,this)},_onMove:function(v){var _=v.touches[0];this._newPos=new ae(_.clientX,_.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(v,_){var H=new MouseEvent(v,{bubbles:!0,cancelable:!0,view:window,screenX:_.screenX,screenY:_.screenY,clientX:_.clientX,clientY:_.clientY});H._simulated=!0,_.target.dispatchEvent(H)}});at.addInitHook("addHandler","tapHold",xc),at.mergeOptions({touchZoom:Cn.touch,bounceAtZoomLimits:!0});var Bo=mt.extend({addHooks:function(){Xn(this._map._container,"leaflet-touch-zoom"),fe(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){hs(this._map._container,"leaflet-touch-zoom"),$e(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(v){var _=this._map;if(!(!v.touches||v.touches.length!==2||_._animatingZoom||this._zooming)){var H=_.mouseEventToContainerPoint(v.touches[0]),oe=_.mouseEventToContainerPoint(v.touches[1]);this._centerPoint=_.getSize()._divideBy(2),this._startLatLng=_.containerPointToLatLng(this._centerPoint),_.options.touchZoom!=="center"&&(this._pinchStartLatLng=_.containerPointToLatLng(H.add(oe)._divideBy(2))),this._startDist=H.distanceTo(oe),this._startZoom=_.getZoom(),this._moved=!1,this._zooming=!0,_._stop(),fe(document,"touchmove",this._onTouchMove,this),fe(document,"touchend touchcancel",this._onTouchEnd,this),ye(v)}},_onTouchMove:function(v){if(!(!v.touches||v.touches.length!==2||!this._zooming)){var _=this._map,H=_.mouseEventToContainerPoint(v.touches[0]),oe=_.mouseEventToContainerPoint(v.touches[1]),Ee=H.distanceTo(oe)/this._startDist;if(this._zoom=_.getScaleZoom(Ee,this._startZoom),!_.options.bounceAtZoomLimits&&(this._zoom<_.getMinZoom()&&Ee<1||this._zoom>_.getMaxZoom()&&Ee>1)&&(this._zoom=_._limitZoom(this._zoom)),_.options.touchZoom==="center"){if(this._center=this._startLatLng,Ee===1)return}else{var Ve=H._add(oe)._divideBy(2)._subtract(this._centerPoint);if(Ee===1&&Ve.x===0&&Ve.y===0)return;this._center=_.unproject(_.project(this._pinchStartLatLng,this._zoom).subtract(Ve),this._zoom)}this._moved||(_._moveStart(!0,!1),this._moved=!0),Ae(this._animRequest);var jt=o(_._move,_,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=se(jt,this,!0),ye(v)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,Ae(this._animRequest),$e(document,"touchmove",this._onTouchMove,this),$e(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});at.addInitHook("addHandler","touchZoom",Bo),at.BoxZoom=Ll,at.DoubleClickZoom=Fi,at.Drag=yc,at.Keyboard=Qc,at.ScrollWheelZoom=Vc,at.TapHold=xc,at.TouchZoom=Bo,r.Bounds=be,r.Browser=Cn,r.CRS=it,r.Canvas=gl,r.Circle=ja,r.CircleMarker=Zi,r.Class=Ce,r.Control=et,r.DivIcon=ec,r.DivOverlay=Ka,r.DomEvent=Te,r.DomUtil=te,r.Draggable=Ar,r.Evented=ce,r.FeatureGroup=Di,r.GeoJSON=Ii,r.GridLayer=gc,r.Handler=mt,r.Icon=ns,r.ImageOverlay=ha,r.LatLng=Me,r.LatLngBounds=xe,r.Layer=Hn,r.LayerGroup=$n,r.LineUtil=pt,r.Map=at,r.Marker=Wn,r.Mixin=Ot,r.Path=is,r.Point=ae,r.PolyUtil=Lr,r.Polygon=ai,r.Polyline=Ys,r.Popup=Hl,r.PosAnimation=Et,r.Projection=Tn,r.Rectangle=vl,r.Renderer=Lo,r.SVG=Gu,r.SVGOverlay=Co,r.TileLayer=zl,r.Tooltip=Il,r.Transformation=Ge,r.Util=we,r.VideoOverlay=Za,r.bind=o,r.bounds=de,r.canvas=iu,r.circle=xi,r.circleMarker=vs,r.control=Pt,r.divIcon=Vl,r.extend=i,r.featureGroup=Gn,r.geoJSON=Ul,r.geoJson=$l,r.gridLayer=xd,r.icon=_i,r.imageOverlay=vo,r.latLng=Re,r.latLngBounds=je,r.layerGroup=ga,r.map=Ct,r.marker=Gi,r.point=Oe,r.polygon=da,r.polyline=Qi,r.popup=Ql,r.rectangle=sh,r.setOptions=y,r.stamp=u,r.svg=bd,r.svgOverlay=pc,r.tileLayer=Kl,r.tooltip=yd,r.transformation=ft,r.version=n,r.videoOverlay=Hc;var su=window.L;r.noConflict=function(){return window.L=su,this},window.L=r}))})(vw,vw.exports)),vw.exports}var d_=dFe();const vne=eA(d_);function sF(t,e,r){return Object.freeze({instance:t,context:e,container:r})}function aF(t,e){return e==null?function(n,i){const s=j.useRef(void 0);return s.current||(s.current=t(n,i)),s}:function(n,i){const s=j.useRef(void 0);s.current||(s.current=t(n,i));const o=j.useRef(n),{instance:c}=s.current;return j.useEffect(function(){o.current!==n&&(e(c,n,o.current),o.current=n)},[c,n,e]),s}}function yne(t,e){j.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){e.layerContainer?.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function xne(t){return function(r){const n=nF(),i=t(iF(r,n),n);return sFe(n.map,r.attribution),gne(i.current,r.eventHandlers),yne(i.current,n),i}}function hFe(t,e){const r=j.useRef(void 0);j.useEffect(function(){if(e.pathOptions!==r.current){const i=e.pathOptions??{};t.instance.setStyle(i),r.current=i}},[t,e])}function fFe(t){return function(r){const n=nF(),i=t(iF(r,n),n);return gne(i.current,r.eventHandlers),yne(i.current,n),hFe(i.current,r),i}}function AFe(t,e){const r=aF(t,e),n=xne(r);return pne(n)}function mFe(t,e){const r=aF(t,e),n=fFe(r);return pne(n)}function pFe(t,e){const r=aF(t,e),n=xne(r);return cFe(n)}function gFe(t,e,r){const{opacity:n,zIndex:i}=e;n!=null&&n!==r.opacity&&t.setOpacity(n),i!=null&&i!==r.zIndex&&t.setZIndex(i)}function bne(){return nF().map}function vFe(t){const e=bne();return j.useEffect(function(){return e.on(t),function(){e.off(t)}},[e,t]),e}const yFe=mFe(function({center:e,children:r,...n},i){const s=new d_.Circle(e,n);return sF(s,mne(i,{overlayContainer:s}))},aFe);function xFe({bounds:t,boundsOptions:e,center:r,children:n,className:i,id:s,placeholder:o,style:c,whenReady:u,zoom:l,...d},f){const[A]=j.useState({className:i,id:s,style:c}),[p,g]=j.useState(null),y=j.useRef(void 0);j.useImperativeHandle(f,()=>p?.map??null,[p]);const x=j.useCallback(E=>{if(E!==null&&!y.current){const T=new d_.Map(E,d);y.current=T,r!=null&&l!=null?T.setView(r,l):t!=null&&T.fitBounds(t,e),u!=null&&T.whenReady(u),g(lFe(T))}},[]);j.useEffect(()=>()=>{p?.map.remove()},[p]);const w=p?So.createElement(rF,{value:p},n):o??null;return So.createElement("div",{...A,ref:x},w)}const bFe=j.forwardRef(xFe),wFe=AFe(function({position:e,...r},n){const i=new d_.Marker(e,r);return sF(i,mne(n,{overlayContainer:i}))},function(e,r,n){r.position!==n.position&&e.setLatLng(r.position),r.icon!=null&&r.icon!==n.icon&&e.setIcon(r.icon),r.zIndexOffset!=null&&r.zIndexOffset!==n.zIndexOffset&&e.setZIndexOffset(r.zIndexOffset),r.opacity!=null&&r.opacity!==n.opacity&&e.setOpacity(r.opacity),e.dragging!=null&&r.draggable!==n.draggable&&(r.draggable===!0?e.dragging.enable():e.dragging.disable())}),EFe=pFe(function({url:e,...r},n){const i=new d_.TileLayer(e,iF(r,n));return sF(i,n)},function(e,r,n){gFe(e,r,n);const{url:i}=r;i!=null&&i!==n.url&&e.setUrl(i)});delete vne.Icon.Default.prototype._getIconUrl;vne.Icon.Default.mergeOptions({iconRetinaUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png",iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png"});function _Fe({center:t,zoom:e}){const r=bne();return j.useEffect(()=>{t&&r.setView(t,e)},[t,e,r]),null}function SFe({onMapClick:t}){return vFe({click:e=>{t&&t(e.latlng)}}),null}function TFe({latitude:t,longitude:e,radius:r=50,address:n="",onLocationChange:i,onRadiusChange:s,className:o=""}){const[c,u]=j.useState(n),[l,d]=j.useState(!1),[f,A]=j.useState(null),[p,g]=j.useState([t||-27.4698,e||153.0251]),[y,x]=j.useState(t&&e?[t,e]:null),[w,E]=j.useState(r),T=async()=>{if(c.trim()){d(!0),A(null);try{const U=await(await fetch(`https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(c)}&format=json&limit=1&countrycodes=au`)).json();if(U.length===0){A("Location not found. Try a more specific address.");return}const K=U[0],Y=parseFloat(K.lat),re=parseFloat(K.lon);g([Y,re]),x([Y,re]),i&&i({latitude:Y,longitude:re,address:K.display_name})}catch(I){A("Search failed. Please try again."),console.error("Geocoding error:",I)}finally{d(!1)}}},C=I=>{x([I.lat,I.lng]),i&&i({latitude:I.lat,longitude:I.lng,address:""})},N=I=>{const U=parseInt(I.target.value)||50;E(U),s&&s(U)};return j.useEffect(()=>{t&&e&&(g([t,e]),x([t,e]))},[t,e]),j.useEffect(()=>{E(r||50)},[r]),a.jsxs("div",{className:`space-y-4 ${o}`,children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Search Venue Address"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(_C,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500"}),a.jsx("input",{type:"text",value:c,onChange:I=>u(I.target.value),onKeyDown:I=>I.key==="Enter"&&T(),placeholder:"Enter venue address (e.g., '8 Annerley Rd, Woolloongabba QLD')",className:"w-full pl-10 pr-4 py-2 bg-dark-800 border border-dark-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-red-500"})]}),a.jsx("button",{type:"button",onClick:T,disabled:l||!c.trim(),className:"px-4 py-2 bg-red-500 hover:bg-red-600 disabled:bg-dark-700 disabled:cursor-not-allowed text-white font-medium rounded-lg transition-colors",children:l?"Searching...":"Search"})]}),f&&a.jsx("p",{className:"mt-2 text-sm text-red-500",children:f}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Or click on the map to manually place the venue marker"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Geo-Blocking Radius: ",w,"km"]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("input",{type:"range",min:"1",max:"200",step:"1",value:w,onChange:N,className:"flex-1 h-2 bg-dark-700 rounded-lg appearance-none cursor-pointer slider"}),a.jsx("input",{type:"number",min:"1",max:"200",value:w,onChange:N,className:"w-20 px-3 py-2 bg-dark-800 border border-dark-700 rounded-lg text-white text-center focus:outline-none focus:border-red-500"})]}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Viewers within this radius will be blocked from purchasing online access"})]}),a.jsxs("div",{className:"relative rounded-lg overflow-hidden border border-dark-700",style:{height:"400px"},children:[a.jsxs(bFe,{center:p,zoom:y?11:10,style:{height:"100%",width:"100%"},className:"z-0",children:[a.jsx(EFe,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),a.jsx(_Fe,{center:p,zoom:y?11:10}),a.jsx(SFe,{onMapClick:C}),y&&a.jsxs(a.Fragment,{children:[a.jsx(wFe,{position:y}),a.jsx(yFe,{center:y,radius:(w||50)*1e3,pathOptions:{color:"#e63946",fillColor:"#e63946",fillOpacity:.2,weight:2}})]})]}),!y&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-dark-900/50 pointer-events-none z-10",children:a.jsxs("div",{className:"text-center",children:[a.jsx(th,{className:"w-12 h-12 text-gray-600 mx-auto mb-2"}),a.jsx("p",{className:"text-gray-400",children:"Search for a venue or click on the map"})]})})]}),y&&a.jsxs("div",{className:"p-4 bg-dark-800 rounded-lg border border-dark-700",children:[a.jsx("h4",{className:"text-sm font-medium text-white mb-2",children:"Current Settings"}),a.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Latitude:"}),a.jsx("span",{className:"ml-2 text-white font-mono",children:y[0].toFixed(6)})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Longitude:"}),a.jsx("span",{className:"ml-2 text-white font-mono",children:y[1].toFixed(6)})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Radius:"}),a.jsxs("span",{className:"ml-2 text-white font-mono",children:[w,"km"]})]})]})]})]})}function CFe({event:t,onStatusUpdate:e,compact:r=!1}){const[n,i]=j.useState(!1),[s,o]=j.useState(null),c=async()=>{if(t?.mux_live_stream_id){i(!0);try{const{data:A,error:p}=await Rr.functions.invoke("mux-stream",{body:{action:"status",event_id:t.id}});!p&&A&&(o(new Date),e&&e(A))}catch(A){console.error("Status check failed:",A)}finally{i(!1)}}};if(!t?.mux_live_stream_id&&!t?.mux_stream_key)return a.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2 py-1 rounded text-xs font-medium bg-gray-500/20 text-gray-400 ${r?"":"mr-2"}`,children:[a.jsx(x8,{className:"w-3 h-3"}),!r&&"No Stream"]});const u=t?.stream_status||t?.is_live?"active":"idle";u==="active"||t?.is_live;const l={active:{bg:"bg-red-500",text:"text-white",icon:wY,label:"LIVE",pulse:!0},idle:{bg:"bg-yellow-500/20",text:"text-yellow-500",icon:Xhe,label:"Ready",pulse:!1},disabled:{bg:"bg-gray-500/20",text:"text-gray-400",icon:x8,label:"Offline",pulse:!1}},d=l[u]||l.idle,f=d.icon;return a.jsxs("div",{className:`inline-flex items-center gap-2 ${r?"":"mr-2"}`,children:[a.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2 py-1 rounded text-xs font-medium ${d.bg} ${d.text}`,children:[a.jsx(f,{className:`w-3 h-3 ${d.pulse?"animate-pulse":""}`}),d.label]}),!r&&a.jsx("button",{onClick:c,disabled:n,className:"p-1 text-gray-500 hover:text-white transition-colors disabled:opacity-50",title:"Check stream status",children:a.jsx(e1,{className:`w-3.5 h-3.5 ${n?"animate-spin":""}`})})]})}function jFe(){const[t,e]=j.useState([]),[r,n]=j.useState([]),[i,s]=j.useState({demo_mode:!1}),[o,c]=j.useState(!0),[u,l]=j.useState(!1),[d,f]=j.useState(null),[A,p]=j.useState("events"),[g,y]=j.useState({funnel:[],blockedLocations:[],recentEvents:[]}),[x,w]=j.useState("all"),[E,T]=j.useState([]),[C,N]=j.useState(!1),[I,U]=j.useState("all");j.useEffect(()=>{K()},[]);const K=async()=>{try{const[ce,ae,De]=await Promise.all([NRe(),ORe(),Dre()]);e(ce||[]),n(ae||[]),s(De||{demo_mode:!1}),await Y()}catch(ce){console.error("Failed to load data:",ce)}finally{c(!1)}},Y=async(ce=null)=>{try{let ae=Rr.from("livestream_funnel_summary").select("*");ce&&ce!=="all"&&(ae=ae.eq("event_id",ce));const{data:De}=await ae;let Oe=Rr.from("livestream_blocked_locations").select("*").limit(50);ce&&ce!=="all"&&(Oe=Oe.eq("event_id",ce));const{data:be}=await Oe;let de=Rr.from("livestream_analytics").select("*").order("created_at",{ascending:!1}).limit(100);ce&&ce!=="all"&&(de=de.eq("event_id",ce));const{data:xe}=await de;y({funnel:De||[],blockedLocations:be||[],recentEvents:xe||[]})}catch(ae){console.error("Failed to load analytics:",ae)}},re=async()=>{N(!0);try{const{data:ce,error:ae}=await Rr.functions.invoke("mux-assets",{body:{action:"list"}});if(ae)throw ae;T(ce?.assets||[])}catch(ce){console.error("Failed to load recordings:",ce)}finally{N(!1)}},se=async ce=>{if(confirm("End this stream? This will finalize the recording."))try{await Jw(ce,{status:"ended",is_live:!1,ended_at:new Date().toISOString()});const ae=t.find(De=>De.id===ce);ae?.mux_stream_id&&await Rr.functions.invoke("mux-stream",{body:{action:"disable",stream_id:ae.mux_stream_id}}),K()}catch(ae){console.error("Failed to end stream:",ae),alert("Failed to end stream")}},Ae=async()=>{try{const ce=!i.demo_mode,ae=await LRe({demo_mode:ce});ae&&s(ae)}catch(ce){console.error("Failed to toggle demo mode:",ce),alert("Failed to toggle demo mode: "+ce.message)}},we=async ce=>{if(confirm("Delete this event? This cannot be undone."))try{await IRe(ce),e(t.filter(ae=>ae.id!==ce))}catch{alert("Failed to delete event")}},Ce=r.filter(ce=>ce.status==="completed").reduce((ce,ae)=>ce+Number(ae.amount),0),ve=r.filter(ce=>ce.status==="completed").length,ne=t.filter(ce=>ce.status==="live"||ce.is_live).length;return o?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-red-500"})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-white",children:"Livestream Events"}),a.jsx("p",{className:"text-gray-400",children:"Manage PPV events and view orders"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("button",{onClick:Ae,className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-colors ${i.demo_mode?"bg-yellow-500/20 text-yellow-500 border border-yellow-500/30":"bg-dark-800 text-gray-400 border border-dark-700"}`,children:[i.demo_mode?a.jsx(Dhe,{className:"w-5 h-5"}):a.jsx(Ohe,{className:"w-5 h-5"}),"Demo Mode ",i.demo_mode?"ON":"OFF"]}),a.jsxs("button",{onClick:()=>{f(null),l(!0)},className:"flex items-center gap-2 px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg font-medium transition-colors",children:[a.jsx(L0,{className:"w-5 h-5"}),"New Event"]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[a.jsx("div",{className:"bg-dark-900 rounded-xl p-5 border border-dark-800",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-3 bg-green-500/10 rounded-lg",children:a.jsx(_f,{className:"w-6 h-6 text-green-500"})}),a.jsxs("div",{children:[a.jsxs("p",{className:"text-2xl font-bold text-white",children:["$",Ce.toFixed(2)]}),a.jsx("p",{className:"text-sm text-gray-400",children:"Total Revenue"})]})]})}),a.jsx("div",{className:"bg-dark-900 rounded-xl p-5 border border-dark-800",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-3 bg-blue-500/10 rounded-lg",children:a.jsx($h,{className:"w-6 h-6 text-blue-500"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold text-white",children:ve}),a.jsx("p",{className:"text-sm text-gray-400",children:"Total Orders"})]})]})}),a.jsx("div",{className:"bg-dark-900 rounded-xl p-5 border border-dark-800",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-3 bg-red-500/10 rounded-lg",children:a.jsx(fc,{className:"w-6 h-6 text-red-500"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold text-white",children:t.length}),a.jsxs("p",{className:"text-sm text-gray-400",children:["Total Events (",ne," live)"]})]})]})})]}),a.jsx("div",{className:"border-b border-dark-800",children:a.jsxs("div",{className:"flex gap-6",children:[a.jsxs("button",{onClick:()=>p("events"),className:`pb-3 px-1 font-medium transition-colors ${A==="events"?"text-red-500 border-b-2 border-red-500":"text-gray-400 hover:text-white"}`,children:["Events (",t.length,")"]}),a.jsxs("button",{onClick:()=>p("orders"),className:`pb-3 px-1 font-medium transition-colors ${A==="orders"?"text-red-500 border-b-2 border-red-500":"text-gray-400 hover:text-white"}`,children:["Orders (",r.length,")"]}),a.jsxs("button",{onClick:()=>{p("analytics"),Y(x)},className:`pb-3 px-1 font-medium transition-colors flex items-center gap-2 ${A==="analytics"?"text-red-500 border-b-2 border-red-500":"text-gray-400 hover:text-white"}`,children:[a.jsx(g8,{size:16})," Analytics"]}),a.jsxs("button",{onClick:()=>{p("recordings"),re()},className:`pb-3 px-1 font-medium transition-colors flex items-center gap-2 ${A==="recordings"?"text-red-500 border-b-2 border-red-500":"text-gray-400 hover:text-white"}`,children:[a.jsx(Vk,{size:16})," Recordings"]})]})}),A==="events"&&a.jsx("div",{className:"flex gap-2",children:["all","upcoming","live","ended"].map(ce=>a.jsx("button",{onClick:()=>U(ce),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${I===ce?"bg-red-500 text-white":"bg-dark-800 text-gray-400 hover:text-white"}`,children:ce.charAt(0).toUpperCase()+ce.slice(1)},ce))}),A==="events"&&a.jsx("div",{className:"space-y-4",children:t.length===0?a.jsx("div",{className:"text-center py-12 text-gray-400",children:"No events yet. Create your first event!"}):t.filter(ce=>I==="all"?!0:I==="live"?ce.is_live||ce.status==="live":I==="ended"?ce.status==="ended":I==="upcoming"?!ce.is_live&&ce.status!=="ended"&&new Date(ce.start_time)>new Date:!0).map(ce=>a.jsx("div",{className:"bg-dark-900 rounded-xl p-5 border border-dark-800",children:a.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2 flex-wrap",children:[a.jsx("h3",{className:"text-lg font-bold text-white",children:ce.title}),a.jsx(CFe,{event:ce,compact:!0}),a.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded ${ce.status==="live"?"bg-red-500 text-white":ce.status==="published"?"bg-green-500/20 text-green-500":ce.status==="ended"?"bg-gray-500/20 text-gray-400":"bg-yellow-500/20 text-yellow-500"}`,children:ce.status||"draft"}),ce.category&&a.jsxs("span",{className:"px-2 py-0.5 text-xs font-medium rounded bg-purple-500/20 text-purple-400 flex items-center gap-1",children:[a.jsx(SY,{className:"w-3 h-3"}),ce.category]}),ce.vod_enabled&&a.jsx("span",{className:"px-2 py-0.5 text-xs font-medium rounded bg-blue-500/20 text-blue-400",children:"VOD"})]}),a.jsx("p",{className:"text-gray-400 mb-2",children:ce.organization}),a.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-500",children:[a.jsx("span",{children:new Date(ce.start_time).toLocaleDateString("en-AU")}),a.jsx("span",{children:ce.venue}),a.jsxs("span",{className:"font-medium text-green-500",children:["$",ce.price," AUD"]})]})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[ce.status!=="ended"?a.jsx("button",{onClick:async()=>{const ae=!ce.is_live;await Jw(ce.id,{is_live:ae,status:ae?"live":"published"}),K()},className:`p-2 rounded-lg transition-colors ${ce.is_live?"text-red-500 bg-red-500/20 hover:bg-red-500/30":"text-gray-400 hover:text-red-500 hover:bg-dark-800"}`,title:ce.is_live?"Stop Live":"Go Live",children:a.jsx(wY,{className:"w-5 h-5"})}):a.jsx("span",{className:"p-2 text-gray-600",title:"Event Ended",children:a.jsx(mY,{className:"w-5 h-5"})}),(ce.is_live||ce.status==="live"||ce.status==="published")&&a.jsx("button",{onClick:()=>se(ce.id),className:"p-2 text-gray-400 hover:text-orange-500 hover:bg-dark-800 rounded-lg transition-colors",title:"End & Archive Stream",children:a.jsx(vde,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>{navigator.clipboard.writeText(`https://fitfocusmedia.com.au/#/live/${ce.id}`),alert("Event link copied!")},className:"p-2 text-gray-400 hover:text-white hover:bg-dark-800 rounded-lg transition-colors",title:"Copy Link",children:a.jsx(vE,{className:"w-5 h-5"})}),a.jsx("a",{href:`#/live/${ce.id}`,target:"_blank",className:"p-2 text-gray-400 hover:text-white hover:bg-dark-800 rounded-lg transition-colors",title:"View Event Page",children:a.jsx(I0,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>{f(ce),l(!0)},className:"p-2 text-gray-400 hover:text-white hover:bg-dark-800 rounded-lg transition-colors",title:"Edit",children:a.jsx(Nhe,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>we(ce.id),className:"p-2 text-gray-400 hover:text-red-500 hover:bg-dark-800 rounded-lg transition-colors",title:"Delete",children:a.jsx(_2,{className:"w-5 h-5"})})]})]})},ce.id))}),A==="orders"&&a.jsxs("div",{className:"bg-dark-900 rounded-xl border border-dark-800 overflow-hidden",children:[r.length>0&&a.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-dark-800",children:[a.jsxs("p",{className:"text-sm text-gray-400",children:[r.filter(ce=>ce.status==="completed").length," completed orders",a.jsxs("span",{className:"text-green-500 ml-2",children:["$",r.filter(ce=>ce.status==="completed").reduce((ce,ae)=>ce+parseFloat(ae.amount||0),0).toFixed(2)," total"]})]}),a.jsxs("button",{onClick:()=>{const ce=["Order ID","Email","Event","Amount","Status","Date","Payment Method"],ae=r.map(xe=>[xe.id,xe.email,xe.event?.title||"",xe.amount,xe.status,new Date(xe.created_at).toLocaleString("en-AU"),xe.payment_method||"stripe"]),De=[ce,...ae].map(xe=>xe.map(je=>`"${je}"`).join(",")).join(`
`),Oe=new Blob([De],{type:"text/csv"}),be=URL.createObjectURL(Oe),de=document.createElement("a");de.href=be,de.download=`livestream-orders-${new Date().toISOString().slice(0,10)}.csv`,de.click(),URL.revokeObjectURL(be)},className:"flex items-center gap-2 px-3 py-1.5 bg-dark-800 hover:bg-dark-700 text-gray-300 hover:text-white rounded-lg text-sm transition-colors",children:[a.jsx(km,{className:"w-4 h-4"}),"Export CSV"]})]}),r.length===0?a.jsx("div",{className:"text-center py-12 text-gray-400",children:"No orders yet."}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-dark-800",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-400",children:"Order"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-400",children:"Email"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-400",children:"Event"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-400",children:"Amount"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-400",children:"Status"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-400",children:"Date"})]})}),a.jsx("tbody",{className:"divide-y divide-dark-800",children:r.map(ce=>a.jsxs("tr",{className:"hover:bg-dark-800/50",children:[a.jsx("td",{className:"px-4 py-3",children:a.jsx("code",{className:"text-xs text-gray-400",children:ce.id.slice(0,8)})}),a.jsx("td",{className:"px-4 py-3 text-white",children:ce.email}),a.jsx("td",{className:"px-4 py-3 text-gray-400",children:ce.event?.title||"Unknown"}),a.jsxs("td",{className:"px-4 py-3 text-green-500 font-medium",children:["$",ce.amount]}),a.jsx("td",{className:"px-4 py-3",children:a.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded ${ce.status==="completed"?"bg-green-500/20 text-green-500":ce.status==="pending"?"bg-yellow-500/20 text-yellow-500":"bg-red-500/20 text-red-500"}`,children:ce.payment_method==="demo"?" Demo":ce.status})}),a.jsx("td",{className:"px-4 py-3 text-gray-400 text-sm",children:new Date(ce.created_at).toLocaleString("en-AU")})]},ce.id))})]})})]}),A==="analytics"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("label",{className:"text-gray-400",children:"Filter by Event:"}),a.jsxs("select",{value:x,onChange:ce=>{w(ce.target.value),Y(ce.target.value)},className:"bg-dark-800 border border-dark-700 rounded-lg px-3 py-2 text-white",children:[a.jsx("option",{value:"all",children:"All Events"}),t.map(ce=>a.jsx("option",{value:ce.id,children:ce.title},ce.id))]})]}),a.jsxs("div",{className:"bg-dark-900 rounded-xl border border-dark-800 p-6",children:[a.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[a.jsx($A,{className:"text-red-500"})," Conversion Funnel"]}),g.funnel.length===0?a.jsx("p",{className:"text-gray-400",children:"No analytics data yet. Data will appear after users visit event pages."}):a.jsx("div",{className:"space-y-4",children:g.funnel.map((ce,ae)=>{const De=t.find(Oe=>Oe.id===ce.event_id)?.title||"Unknown Event";return a.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[a.jsx("h4",{className:"font-medium text-white mb-3",children:De}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-4 text-center",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold text-white",children:ce.page_views||0}),a.jsx("p",{className:"text-xs text-gray-400",children:"Page Views"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold text-yellow-500",children:ce.geo_blocked||0}),a.jsx("p",{className:"text-xs text-gray-400",children:"Geo Blocked"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold text-green-500",children:ce.geo_passed||0}),a.jsx("p",{className:"text-xs text-gray-400",children:"Geo Passed"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold text-blue-500",children:ce.purchase_views||0}),a.jsx("p",{className:"text-xs text-gray-400",children:"Saw Checkout"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold text-purple-500",children:ce.checkout_starts||0}),a.jsx("p",{className:"text-xs text-gray-400",children:"Started Checkout"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold text-green-400",children:ce.purchases||0}),a.jsx("p",{className:"text-xs text-gray-400",children:"Purchased"})]}),a.jsxs("div",{children:[a.jsxs("p",{className:"text-2xl font-bold text-red-500",children:[ce.checkout_conversion_pct||0,"%"]}),a.jsx("p",{className:"text-xs text-gray-400",children:"Conversion"})]})]})]},ae)})})]}),a.jsxs("div",{className:"bg-dark-900 rounded-xl border border-dark-800 p-6",children:[a.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[a.jsx(th,{className:"text-yellow-500"})," Blocked User Locations"]}),g.blockedLocations.length===0?a.jsx("p",{className:"text-gray-400",children:"No blocked users yet."}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-dark-800",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-400",children:"City"}),a.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-400",children:"Region"}),a.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-400",children:"Country"}),a.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-400",children:"Blocked Count"}),a.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-400",children:"Avg Distance"})]})}),a.jsx("tbody",{className:"divide-y divide-dark-800",children:g.blockedLocations.map((ce,ae)=>a.jsxs("tr",{className:"hover:bg-dark-800/50",children:[a.jsx("td",{className:"px-4 py-2 text-white",children:ce.city||""}),a.jsx("td",{className:"px-4 py-2 text-gray-400",children:ce.region||""}),a.jsx("td",{className:"px-4 py-2 text-gray-400",children:ce.country||""}),a.jsx("td",{className:"px-4 py-2 text-yellow-500 font-medium",children:ce.blocked_count}),a.jsx("td",{className:"px-4 py-2 text-gray-400",children:ce.avg_distance_km?`${ce.avg_distance_km}km`:""})]},ae))})]})})]}),a.jsxs("div",{className:"bg-dark-900 rounded-xl border border-dark-800 p-6",children:[a.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[a.jsx(g8,{className:"text-blue-500"})," Recent Activity (Last 100)"]}),g.recentEvents.length===0?a.jsx("p",{className:"text-gray-400",children:"No recent activity."}):a.jsx("div",{className:"overflow-x-auto max-h-96 overflow-y-auto",children:a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{className:"bg-dark-800 sticky top-0",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-400",children:"Time"}),a.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-400",children:"Event Type"}),a.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-400",children:"Device"}),a.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-400",children:"Location"}),a.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-400",children:"Accuracy"}),a.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-400",children:"Email"})]})}),a.jsx("tbody",{className:"divide-y divide-dark-800",children:g.recentEvents.map((ce,ae)=>a.jsxs("tr",{className:"hover:bg-dark-800/50",children:[a.jsx("td",{className:"px-3 py-2 text-gray-400 whitespace-nowrap",children:new Date(ce.created_at).toLocaleString("en-AU",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}),a.jsx("td",{className:"px-3 py-2",children:a.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded ${ce.event_type==="purchase_complete"?"bg-green-500/20 text-green-500":ce.event_type==="geo_blocked"?"bg-yellow-500/20 text-yellow-500":ce.event_type==="geo_passed"?"bg-blue-500/20 text-blue-500":ce.event_type==="checkout_start"?"bg-purple-500/20 text-purple-500":"bg-gray-500/20 text-gray-400"}`,children:ce.event_type})}),a.jsx("td",{className:"px-3 py-2 text-gray-400",children:ce.device_type||""}),a.jsx("td",{className:"px-3 py-2 text-gray-400",children:ce.latitude&&ce.longitude?`${ce.latitude.toFixed(4)}, ${ce.longitude.toFixed(4)}`:""}),a.jsx("td",{className:"px-3 py-2 text-gray-400",children:ce.accuracy_meters?`${Math.round(ce.accuracy_meters)}m`:""}),a.jsx("td",{className:"px-3 py-2 text-gray-400",children:ce.customer_email||""})]},ae))})]})})]})]}),A==="recordings"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("p",{className:"text-gray-400",children:"Video recordings from your livestreams"}),a.jsxs("button",{onClick:re,className:"flex items-center gap-2 px-3 py-1.5 bg-dark-800 hover:bg-dark-700 text-gray-300 rounded-lg text-sm transition-colors",children:[a.jsx(e1,{className:"w-4 h-4"}),"Refresh"]})]}),C?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-red-500"})}):E.length===0?a.jsxs("div",{className:"text-center py-12 text-gray-400",children:[a.jsx(Vk,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),a.jsx("p",{children:"No recordings yet."}),a.jsx("p",{className:"text-sm",children:"Recordings appear here after streams end."})]}):a.jsx("div",{className:"grid gap-4",children:E.map(ce=>a.jsx("div",{className:"bg-dark-900 rounded-xl p-5 border border-dark-800",children:a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[ce.thumbnail_url?a.jsx("img",{src:ce.thumbnail_url,alt:"",className:"w-32 h-20 object-cover rounded-lg"}):a.jsx("div",{className:"w-32 h-20 bg-dark-800 rounded-lg flex items-center justify-center",children:a.jsx(Vk,{className:"w-8 h-8 text-gray-600"})}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-white",children:ce.event_title||"Untitled Recording"}),a.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-400 mt-1",children:[a.jsx("span",{children:ce.duration?`${Math.floor(ce.duration/60)}m ${Math.round(ce.duration%60)}s`:""}),a.jsx("span",{children:ce.created_at?new Date(ce.created_at*1e3).toLocaleDateString("en-AU"):""}),a.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded ${ce.status==="ready"?"bg-green-500/20 text-green-500":ce.status==="preparing"?"bg-yellow-500/20 text-yellow-500":"bg-gray-500/20 text-gray-400"}`,children:ce.status})]})]})]}),a.jsx("div",{className:"flex items-center gap-2",children:ce.playback_id&&ce.status==="ready"&&a.jsxs(a.Fragment,{children:[a.jsxs("a",{href:`https://stream.mux.com/${ce.playback_id}.m3u8`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-3 py-2 bg-dark-800 hover:bg-dark-700 text-gray-300 rounded-lg text-sm transition-colors",children:[a.jsx(gf,{className:"w-4 h-4"}),"Preview"]}),a.jsxs("a",{href:`https://stream.mux.com/${ce.playback_id}/high.mp4`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-3 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg text-sm transition-colors",children:[a.jsx(km,{className:"w-4 h-4"}),"Download MP4"]})]})})]})},ce.id))})]}),u&&a.jsx(NFe,{event:d,onClose:()=>{l(!1),f(null)},onSave:async ce=>{try{let ae=d?.id;const{category:De,crew_bypass_token:Oe,bypass_created_at:be,player_poster_url:de,vod_enabled:xe,geo_venue_address:je,...Me}=ce;if(d)await Jw(d.id,Me);else{ae=(await kRe(Me)).id;try{const{data:it,error:ht}=await Rr.functions.invoke("mux-stream",{body:{action:"create",event_id:ae}});if(ht)console.error("MUX stream creation failed:",ht);else if(it?.stream_key){const Be=`Server: ${it.rtmp_url}
Stream Key: ${it.stream_key}`;navigator.clipboard.writeText(it.stream_key).then(()=>{alert(`MUX Stream Created! 

Stream Key copied to clipboard!

For OBS:
 Server: ${it.rtmp_url}
 Stream Key: (already copied)

Just paste (Cmd+V) in OBS Stream Key field.`)}).catch(()=>{prompt("MUX Stream Created! Copy this Stream Key:",it.stream_key)})}}catch(it){console.error("MUX stream creation failed:",it)}}await K(),l(!1),f(null)}catch(ae){console.error("Save event error:",ae),alert(`Failed to save event: ${ae.message||ae}`)}}})]})}function NFe({event:t,onClose:e,onSave:r}){const[n,i]=j.useState({title:t?.title||"",organization:t?.organization||"",venue:t?.venue||"",start_time:t?.start_time?.slice(0,16)||"",end_time:t?.end_time?.slice(0,16)||"",price:t?.price||29.99,description:t?.description||"",category:t?.category||"",thumbnail_url:t?.thumbnail_url||"",player_poster_url:t?.player_poster_url||"",ticket_url:t?.ticket_url||"",vod_enabled:t?.vod_enabled||!1,status:t?.status||"draft",mux_playback_id:t?.mux_playback_id||"",mux_stream_key:t?.mux_stream_key||"",geo_blocking_enabled:t?.geo_blocking_enabled||!1,geo_lat:t?.geo_lat||null,geo_lng:t?.geo_lng||null,geo_radius_km:t?.geo_radius_km||50,geo_venue_address:t?.geo_venue_address||"",crew_bypass_token:t?.crew_bypass_token||null,bypass_created_at:t?.bypass_created_at||null}),[s,o]=j.useState(!1),[c,u]=j.useState([]),[l,d]=j.useState(!0);j.useEffect(()=>{t?d(!1):(async()=>{try{const[y,x]=await Promise.all([Ore(),k5()]),w=[];y&&y.forEach(E=>{E.event_name&&w.push({id:`onboarding-${E.id}`,source:"Onboarding",title:E.event_name,organization:E.org_name,venue:E.event_location||"",date:E.event_date,contact:E.contact_name})}),x&&x.forEach(E=>{const T=E.contract_data||{};T.event_name&&w.push({id:`contract-${E.id}`,source:"Contract",title:T.event_name,organization:E.org_name,venue:T.event_location||"",date:T.event_date,contact:E.promoter_name})}),u(w)}catch(y){console.error("Failed to load existing events:",y)}finally{d(!1)}})()},[t]);const f=g=>{if(!g)return;const y=c.find(E=>E.id===g);if(!y)return;let x="",w="";if(y.date){const E=new Date(y.date);isNaN(E.getTime())||(E.setHours(18,0,0),x=E.toISOString().slice(0,16),E.setHours(22,0,0),w=E.toISOString().slice(0,16))}i(E=>({...E,title:y.title||E.title,organization:y.organization||E.organization,venue:y.venue||E.venue,start_time:x||E.start_time,end_time:w||E.end_time}))},A=g=>{if(!g||g.trim()==="")return"";const y=g.trim();return y.startsWith("http://")||y.startsWith("https://")?y:"https://"+y},p=async g=>{g.preventDefault(),o(!0);const y={...n,thumbnail_url:A(n.thumbnail_url),ticket_url:A(n.ticket_url)};await r(y),o(!1)};return a.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-dark-900 rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsx("div",{className:"p-6 border-b border-dark-800",children:a.jsx("h2",{className:"text-xl font-bold text-white",children:t?"Edit Event":"Create Event"})}),a.jsxs("form",{onSubmit:p,className:"p-6 space-y-4",children:[!t&&c.length>0&&a.jsxs("div",{className:"p-4 bg-blue-500/10 border border-blue-500/20 rounded-lg",children:[a.jsxs("label",{className:"block text-sm font-medium text-blue-400 mb-2 flex items-center gap-2",children:[a.jsx(km,{className:"w-4 h-4"}),"Import from existing event"]}),a.jsxs("select",{onChange:g=>f(g.target.value),className:"w-full px-3 py-2 bg-dark-800 border border-dark-700 rounded-lg text-white",defaultValue:"",children:[a.jsx("option",{value:"",children:" Select to auto-fill "}),c.map(g=>a.jsxs("option",{value:g.id,children:["[",g.source,"] ",g.title,"  ",g.organization]},g.id))]})]}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Title *"}),a.jsx("input",{type:"text",value:n.title,onChange:g=>i({...n,title:g.target.value}),className:"w-full px-3 py-2 bg-dark-800 border border-dark-700 rounded-lg text-white",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Organization *"}),a.jsx("input",{type:"text",value:n.organization,onChange:g=>i({...n,organization:g.target.value}),className:"w-full px-3 py-2 bg-dark-800 border border-dark-700 rounded-lg text-white",required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Venue *"}),a.jsx("input",{type:"text",value:n.venue,onChange:g=>i({...n,venue:g.target.value}),className:"w-full px-3 py-2 bg-dark-800 border border-dark-700 rounded-lg text-white",required:!0})]}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Start Time *"}),a.jsx("input",{type:"datetime-local",value:n.start_time,onChange:g=>i({...n,start_time:g.target.value}),className:"w-full px-3 py-2 bg-dark-800 border border-dark-700 rounded-lg text-white",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"End Time *"}),a.jsx("input",{type:"datetime-local",value:n.end_time,onChange:g=>i({...n,end_time:g.target.value}),className:"w-full px-3 py-2 bg-dark-800 border border-dark-700 rounded-lg text-white",required:!0})]})]}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Price (AUD) *"}),a.jsx("input",{type:"number",step:"0.01",value:n.price,onChange:g=>i({...n,price:parseFloat(g.target.value)}),className:"w-full px-3 py-2 bg-dark-800 border border-dark-700 rounded-lg text-white",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Status"}),a.jsxs("select",{value:n.status,onChange:g=>i({...n,status:g.target.value}),className:"w-full px-3 py-2 bg-dark-800 border border-dark-700 rounded-lg text-white",children:[a.jsx("option",{value:"draft",children:"Draft"}),a.jsx("option",{value:"published",children:"Published"}),a.jsx("option",{value:"live",children:"Live"}),a.jsx("option",{value:"ended",children:"Ended"})]})]})]}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Category"}),a.jsxs("select",{value:n.category,onChange:g=>i({...n,category:g.target.value}),className:"w-full px-3 py-2 bg-dark-800 border border-dark-700 rounded-lg text-white",children:[a.jsx("option",{value:"",children:"Select Category"}),a.jsx("option",{value:"boxing",children:"Boxing"}),a.jsx("option",{value:"mma",children:"MMA"}),a.jsx("option",{value:"kickboxing",children:"Kickboxing"}),a.jsx("option",{value:"muay-thai",children:"Muay Thai"}),a.jsx("option",{value:"bjj",children:"BJJ / Grappling"}),a.jsx("option",{value:"wrestling",children:"Wrestling"}),a.jsx("option",{value:"other",children:"Other"})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:n.vod_enabled,onChange:g=>i({...n,vod_enabled:g.target.checked}),className:"sr-only peer"}),a.jsx("div",{className:"w-11 h-6 bg-dark-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-red-500 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-red-500"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-sm font-medium text-gray-300",children:"VOD Replay"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Allow replay after event ends"})]})]})]}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"MUX Playback ID"}),a.jsx("input",{type:"text",value:n.mux_playback_id,onChange:g=>i({...n,mux_playback_id:g.target.value}),className:"w-full px-3 py-2 bg-dark-800 border border-dark-700 rounded-lg text-white",placeholder:"Auto-generated on create"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"MUX Stream Key (for OBS)"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",value:n.mux_stream_key,readOnly:!0,className:"flex-1 px-3 py-2 bg-dark-900 border border-dark-700 rounded-lg text-gray-400 font-mono text-sm",placeholder:n.mux_stream_key?"":"Click Generate to create"}),n.mux_stream_key?a.jsx("button",{type:"button",onClick:()=>{navigator.clipboard.writeText(n.mux_stream_key),alert("Stream Key copied!")},className:"px-3 py-2 bg-dark-700 hover:bg-dark-600 text-white rounded-lg transition-colors",children:"Copy"}):t?.id&&a.jsx("button",{type:"button",onClick:async()=>{try{const{data:g,error:y}=await Rr.functions.invoke("mux-stream",{body:{action:"create",event_id:t.id}});if(y){alert("Failed to create stream: "+y.message);return}g?.stream_key&&(i(x=>({...x,mux_stream_key:g.stream_key,mux_playback_id:g.playback_id})),navigator.clipboard.writeText(g.stream_key),alert("MUX Stream created! Stream Key copied to clipboard."))}catch(g){alert("Failed to create stream: "+g.message)}},className:"px-3 py-2 bg-green-600 hover:bg-green-500 text-white rounded-lg transition-colors whitespace-nowrap",children:"Generate"})]}),a.jsx("p",{className:"text-sm text-amber-400 mt-1 font-medium",children:" RTMP Server: rtmps://global-live.mux.com:443/app"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Description"}),a.jsx("textarea",{value:n.description,onChange:g=>i({...n,description:g.target.value}),className:"w-full px-3 py-2 bg-dark-800 border border-dark-700 rounded-lg text-white",rows:3})]}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Thumbnail URL"}),a.jsx("input",{type:"text",value:n.thumbnail_url,onChange:g=>i({...n,thumbnail_url:g.target.value}),className:"w-full px-3 py-2 bg-dark-800 border border-dark-700 rounded-lg text-white",placeholder:"For event cards"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Used on event listing cards"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Player Poster URL"}),a.jsx("input",{type:"text",value:n.player_poster_url,onChange:g=>i({...n,player_poster_url:g.target.value}),className:"w-full px-3 py-2 bg-dark-800 border border-dark-700 rounded-lg text-white",placeholder:"For video player (optional)"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Shows before/after stream. Falls back to thumbnail if empty."})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Ticket URL"}),a.jsx("input",{type:"text",value:n.ticket_url,onChange:g=>i({...n,ticket_url:g.target.value}),className:"w-full px-3 py-2 bg-dark-800 border border-dark-700 rounded-lg text-white",placeholder:"www.instagram.com/fitfocusmedia"})]}),a.jsxs("div",{className:"pt-6 border-t border-dark-800",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-white",children:"Geo-Blocking"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Block online streaming near the venue"})]}),a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:n.geo_blocking_enabled,onChange:g=>i({...n,geo_blocking_enabled:g.target.checked}),className:"sr-only peer"}),a.jsx("div",{className:"w-11 h-6 bg-dark-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-red-500 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-red-500"}),a.jsx("span",{className:"ml-3 text-sm font-medium text-gray-400",children:n.geo_blocking_enabled?"Enabled":"Disabled"})]})]}),n.geo_blocking_enabled&&a.jsx(TFe,{latitude:n.geo_lat,longitude:n.geo_lng,radius:n.geo_radius_km,address:n.geo_venue_address||n.venue,onLocationChange:({latitude:g,longitude:y,address:x})=>{i({...n,geo_lat:g,geo_lng:y,geo_venue_address:x||n.venue})},onRadiusChange:g=>{i({...n,geo_radius_km:g})}}),t?.id&&a.jsxs("div",{className:"mt-6 p-4 bg-blue-500/10 border border-blue-500/20 rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx(oy,{className:"w-5 h-5 text-blue-500"}),a.jsx("h4",{className:"font-semibold text-white",children:"Crew Access"})]}),a.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Generate a bypass link for crew members at the venue who need to access the stream."}),n.crew_bypass_token?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:" Live Stream (for monitoring during event)"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"text",readOnly:!0,value:`https://fitfocusmedia.com.au/#/watch/${t.id}?bypass=${n.crew_bypass_token}`,className:"flex-1 px-3 py-2 bg-dark-900 border border-dark-700 rounded-lg text-gray-400 font-mono text-xs"}),a.jsx("button",{type:"button",onClick:()=>{navigator.clipboard.writeText(`https://fitfocusmedia.com.au/#/watch/${t.id}?bypass=${n.crew_bypass_token}`),alert("Live stream link copied!")},className:"px-3 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg transition-colors",title:"Copy Link",children:a.jsx(vE,{className:"w-4 h-4"})})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:" Preview Player (for design testing before event)"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"text",readOnly:!0,value:`https://fitfocusmedia.com.au/#/watch/${t.id}?bypass=${n.crew_bypass_token}&preview=player`,className:"flex-1 px-3 py-2 bg-dark-900 border border-dark-700 rounded-lg text-gray-400 font-mono text-xs"}),a.jsx("button",{type:"button",onClick:()=>{navigator.clipboard.writeText(`https://fitfocusmedia.com.au/#/watch/${t.id}?bypass=${n.crew_bypass_token}&preview=player`),alert("Preview player link copied!")},className:"px-3 py-2 bg-purple-600 hover:bg-purple-500 text-white rounded-lg transition-colors",title:"Copy Link",children:a.jsx(vE,{className:"w-4 h-4"})})]})]}),a.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-dark-700",children:[a.jsxs("p",{className:"text-xs text-gray-500",children:["Created: ",n.bypass_created_at?new Date(n.bypass_created_at).toLocaleString("en-AU"):"Unknown"]}),a.jsxs("button",{type:"button",onClick:async()=>{if(!confirm("Regenerate bypass token? Both links will stop working immediately."))return;const g=crypto.randomUUID(),y=new Date().toISOString();await Jw(t.id,{crew_bypass_token:g,bypass_created_at:y}),i(x=>({...x,crew_bypass_token:g,bypass_created_at:y})),alert("New bypass token generated!")},className:"flex items-center gap-1 px-3 py-1.5 bg-yellow-600 hover:bg-yellow-500 text-white text-sm rounded-lg transition-colors",children:[a.jsx(e1,{className:"w-3 h-3"}),"Regenerate"]})]})]}):a.jsxs("button",{type:"button",onClick:async()=>{const g=crypto.randomUUID(),y=new Date().toISOString();await Jw(t.id,{crew_bypass_token:g,bypass_created_at:y}),i(x=>({...x,crew_bypass_token:g,bypass_created_at:y})),navigator.clipboard.writeText(`https://fitfocusmedia.com.au/#/watch/${t.id}?bypass=${g}`),alert("Crew bypass link generated and copied to clipboard!")},className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg transition-colors",children:[a.jsx(oy,{className:"w-4 h-4"}),"Generate Crew Bypass Link"]})]})]}),a.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-dark-800",children:[a.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-gray-400 hover:text-white transition-colors",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:s,className:"px-6 py-2 bg-red-500 hover:bg-red-600 disabled:bg-dark-700 text-white font-medium rounded-lg transition-colors",children:s?"Saving...":t?"Update Event":"Create Event"})]})]})]})})}const kFe=[{id:"standard",name:"Standard",description:"Single-camera livestream coverage"},{id:"premium",name:"Premium",description:"Multi-camera with graphics package"},{id:"enterprise",name:"Enterprise",description:"Full production with replays & commentary"}],Yz={standard:["Professional single-camera livestream","Basic graphics overlay","YouTube/Facebook streaming","Post-event highlight reel (60-90s)"],premium:["Multi-camera setup (2-3 cameras)","Professional graphics package","Multi-platform streaming","On-screen score/time overlays","Post-event highlight reel (2-3 mins)","Full event replay access"],enterprise:["Full multi-camera production (4+ cameras)","Premium graphics & animations","Live instant replays","Commentary integration","Multi-platform streaming","Athlete social media clips","Full event replay with chapters","Dedicated production manager"]},IFe=["Combat Sports","MMA","Boxing","BJJ/Grappling","Muay Thai/Kickboxing","Bodybuilding/Fitness","Powerlifting","CrossFit","Other"],LFe={draft:"bg-gray-500/20 text-gray-300",sent:"bg-blue-500/20 text-blue-300",viewed:"bg-yellow-500/20 text-yellow-300",accepted:"bg-green-500/20 text-green-300",declined:"bg-red-500/20 text-red-300"};function BFe(){const[t,e]=j.useState([]),[r,n]=j.useState(!0),[i,s]=j.useState(null),[o,c]=j.useState(""),[u,l]=j.useState("all"),[d,f]=j.useState(!1),[A,p]=j.useState(null),[g,y]=j.useState(null);j.useEffect(()=>{x()},[]);async function x(){try{n(!0);const I=await VRe();e(I||[])}catch(I){console.error("Error loading proposals:",I),s(I.message)}finally{n(!1)}}const w=t.filter(I=>{const U=I.org_name?.toLowerCase().includes(o.toLowerCase())||I.contact_name?.toLowerCase().includes(o.toLowerCase())||I.event_name?.toLowerCase().includes(o.toLowerCase()),K=u==="all"||I.status===u;return U&&K});function E(I){const U=`${window.location.origin}/#/proposals/${I}`;navigator.clipboard.writeText(U),y(I),setTimeout(()=>y(null),2e3)}async function T(I,U){try{await YRe(I,U),e(K=>K.map(Y=>Y.id===I?{...Y,status:U}:Y))}catch(K){console.error("Error updating status:",K)}}async function C(I){if(confirm("Are you sure you want to delete this proposal?"))try{await GRe(I),e(U=>U.filter(K=>K.id!==I))}catch(U){console.error("Error deleting proposal:",U)}}const N={total:t.length,sent:t.filter(I=>I.status==="sent").length,viewed:t.filter(I=>I.status==="viewed").length,accepted:t.filter(I=>I.status==="accepted").length,totalViews:t.reduce((I,U)=>I+(U.views||0),0)};return a.jsx("div",{className:"min-h-screen bg-[#0a0a0f] text-white p-6",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Proposal Generator"}),a.jsx("p",{className:"text-gray-400 mt-1",children:"Create and manage custom proposals for prospects"})]}),a.jsxs("button",{onClick:()=>f(!0),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-red-600 to-orange-600 rounded-lg font-medium hover:opacity-90 transition-opacity",children:[a.jsx(L0,{size:20}),"New Proposal"]})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-8",children:[a.jsx(Z1,{label:"Total",value:N.total,icon:jb}),a.jsx(Z1,{label:"Sent",value:N.sent,icon:e3,color:"blue"}),a.jsx(Z1,{label:"Viewed",value:N.viewed,icon:I0,color:"yellow"}),a.jsx(Z1,{label:"Accepted",value:N.accepted,icon:_o,color:"green"}),a.jsx(Z1,{label:"Total Views",value:N.totalViews,icon:$A,color:"purple"})]}),a.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(_C,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),a.jsx("input",{type:"text",placeholder:"Search proposals...",value:o,onChange:I=>c(I.target.value),className:"w-full pl-10 pr-4 py-2 bg-white/5 border border-white/10 rounded-lg focus:outline-none focus:border-red-500/50"})]}),a.jsxs("select",{value:u,onChange:I=>l(I.target.value),className:"px-4 py-2 bg-white/5 border border-white/10 rounded-lg focus:outline-none focus:border-red-500/50",children:[a.jsx("option",{value:"all",children:"All Status"}),a.jsx("option",{value:"draft",children:"Draft"}),a.jsx("option",{value:"sent",children:"Sent"}),a.jsx("option",{value:"viewed",children:"Viewed"}),a.jsx("option",{value:"accepted",children:"Accepted"}),a.jsx("option",{value:"declined",children:"Declined"})]})]}),r?a.jsx("div",{className:"text-center py-12 text-gray-400",children:"Loading proposals..."}):i?a.jsx("div",{className:"text-center py-12 text-red-400",children:i}):w.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(jb,{size:48,className:"mx-auto text-gray-600 mb-4"}),a.jsx("p",{className:"text-gray-400",children:"No proposals found"}),a.jsx("button",{onClick:()=>f(!0),className:"mt-4 text-red-400 hover:text-red-300",children:"Create your first proposal"})]}):a.jsx("div",{className:"space-y-4",children:w.map(I=>a.jsx(PFe,{proposal:I,onEdit:()=>p(I),onDelete:()=>C(I.id),onCopyLink:()=>E(I.slug),onStatusChange:U=>T(I.id,U),copied:g===I.slug},I.id))}),a.jsx(_0,{children:(d||A)&&a.jsx(OFe,{proposal:A,onClose:()=>{f(!1),p(null)},onSave:async I=>{A?await Mre(A.id,I):await KRe(I),x(),f(!1),p(null)}})})]})})}function Z1({label:t,value:e,icon:r,color:n="gray"}){const i={gray:"from-gray-600 to-gray-700",blue:"from-blue-600 to-blue-700",yellow:"from-yellow-600 to-yellow-700",green:"from-green-600 to-green-700",purple:"from-purple-600 to-purple-700"};return a.jsx("div",{className:"bg-white/5 border border-white/10 rounded-xl p-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`p-2 rounded-lg bg-gradient-to-br ${i[n]}`,children:a.jsx(r,{size:20})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold",children:e}),a.jsx("p",{className:"text-sm text-gray-400",children:t})]})]})})}function PFe({proposal:t,onEdit:e,onDelete:r,onCopyLink:n,onStatusChange:i,copied:s}){const[o,c]=j.useState(!1);return a.jsx(Or.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-white/5 border border-white/10 rounded-xl p-6 hover:border-white/20 transition-colors",children:a.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("h3",{className:"text-xl font-semibold",children:t.org_name}),a.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${LFe[t.status]}`,children:t.status})]}),a.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-400",children:[t.event_name&&a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(fc,{size:14}),t.event_name]}),t.contact_name&&a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(zp,{size:14}),t.contact_name]}),t.price&&a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(_f,{size:14}),"$",t.price.toLocaleString()]}),t.views>0&&a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(I0,{size:14}),t.views," view",t.views!==1?"s":""]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:()=>c(!o),className:"flex items-center gap-1 px-3 py-1.5 bg-white/5 rounded-lg hover:bg-white/10 transition-colors text-sm",children:["Status",a.jsx(sy,{size:14})]}),o&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>c(!1)}),a.jsx("div",{className:"absolute right-0 top-full mt-1 bg-[#1a1a2e] border border-white/10 rounded-lg shadow-xl z-20 min-w-[120px]",children:["draft","sent","viewed","accepted","declined"].map(u=>a.jsx("button",{onClick:()=>{i(u),c(!1)},className:`w-full text-left px-3 py-2 hover:bg-white/5 text-sm capitalize ${t.status===u?"text-red-400":""}`,children:u},u))})]})]}),a.jsx("button",{onClick:n,className:"p-2 bg-white/5 rounded-lg hover:bg-white/10 transition-colors",title:"Copy proposal link",children:s?a.jsx(_o,{size:18,className:"text-green-400"}):a.jsx(vE,{size:18})}),a.jsx("a",{href:`/#/proposals/${t.slug}`,target:"_blank",rel:"noopener noreferrer",className:"p-2 bg-white/5 rounded-lg hover:bg-white/10 transition-colors",title:"View proposal",children:a.jsx(yE,{size:18})}),a.jsx("button",{onClick:e,className:"p-2 bg-white/5 rounded-lg hover:bg-white/10 transition-colors",title:"Edit proposal",children:a.jsx(cB,{size:18})}),a.jsx("button",{onClick:r,className:"p-2 bg-white/5 rounded-lg hover:bg-red-500/20 hover:text-red-400 transition-colors",title:"Delete proposal",children:a.jsx(_2,{size:18})})]})]})})}function OFe({proposal:t,onClose:e,onSave:r}){const[n,i]=j.useState(!1),[s,o]=j.useState("form"),[c,u]=j.useState({org_name:t?.org_name||"",contact_name:t?.contact_name||"",contact_email:t?.contact_email||"",contact_phone:t?.contact_phone||"",event_name:t?.event_name||"",event_date:t?.event_date||"",event_type:t?.event_type||"Combat Sports",package:t?.package||"premium",price:t?.price||"",inclusions:t?.inclusions||Yz.premium,custom_notes:t?.custom_notes||"",status:t?.status||"draft"});function l(g){u(y=>({...y,package:g,inclusions:Yz[g]||[]}))}function d(){u(g=>({...g,inclusions:[...g.inclusions||[],""]}))}function f(g,y){u(x=>({...x,inclusions:x.inclusions.map((w,E)=>E===g?y:w)}))}function A(g){u(y=>({...y,inclusions:y.inclusions.filter((x,w)=>w!==g)}))}async function p(g){g.preventDefault(),i(!0);try{await r({...c,price:c.price?parseFloat(c.price):null,inclusions:c.inclusions.filter(y=>y.trim())})}catch(y){console.error("Error saving proposal:",y),alert("Error saving proposal: "+y.message)}finally{i(!1)}}return a.jsx(Or.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/90 flex items-stretch z-50",onClick:e,children:a.jsxs(Or.div,{initial:{scale:.98,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.98,opacity:0},onClick:g=>g.stopPropagation(),className:"flex flex-col lg:flex-row w-full h-full",children:[a.jsxs("div",{className:"lg:hidden flex border-b border-white/10 bg-[#12121a]",children:[a.jsx("button",{onClick:()=>o("form"),className:`flex-1 py-3 text-center font-medium ${s==="form"?"text-red-400 border-b-2 border-red-400":"text-gray-400"}`,children:"Edit Form"}),a.jsx("button",{onClick:()=>o("preview"),className:`flex-1 py-3 text-center font-medium ${s==="preview"?"text-red-400 border-b-2 border-red-400":"text-gray-400"}`,children:"Live Preview"})]}),a.jsx("div",{className:`lg:w-1/2 bg-[#12121a] flex flex-col overflow-hidden ${s==="form"?"flex":"hidden lg:flex"}`,children:a.jsxs("form",{onSubmit:p,className:"flex flex-col h-full",children:[a.jsxs("div",{className:"shrink-0 border-b border-white/10 p-4 lg:p-6 flex items-center justify-between",children:[a.jsx("h2",{className:"text-xl lg:text-2xl font-bold",children:t?"Edit Proposal":"Create New Proposal"}),a.jsx("button",{type:"button",onClick:e,className:"p-2 hover:bg-white/10 rounded-lg transition-colors",children:""})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-4 lg:p-6 space-y-6",children:[a.jsxs("section",{children:[a.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[a.jsx(pY,{size:20,className:"text-red-400"}),"Organization Details"]}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Organization Name *"}),a.jsx("input",{type:"text",required:!0,value:c.org_name,onChange:g=>u(y=>({...y,org_name:g.target.value})),className:"w-full px-4 py-2 bg-white/5 border border-white/10 rounded-lg focus:outline-none focus:border-red-500/50",placeholder:"e.g., Inception Fight Series"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Event Type"}),a.jsx("select",{value:c.event_type,onChange:g=>u(y=>({...y,event_type:g.target.value})),className:"w-full px-4 py-2 bg-white/5 border border-white/10 rounded-lg focus:outline-none focus:border-red-500/50",children:IFe.map(g=>a.jsx("option",{value:g,children:g},g))})]})]})]}),a.jsxs("section",{children:[a.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[a.jsx(zp,{size:20,className:"text-red-400"}),"Contact Details"]}),a.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Contact Name"}),a.jsx("input",{type:"text",value:c.contact_name,onChange:g=>u(y=>({...y,contact_name:g.target.value})),className:"w-full px-4 py-2 bg-white/5 border border-white/10 rounded-lg focus:outline-none focus:border-red-500/50",placeholder:"John Smith"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Email"}),a.jsx("input",{type:"email",value:c.contact_email,onChange:g=>u(y=>({...y,contact_email:g.target.value})),className:"w-full px-4 py-2 bg-white/5 border border-white/10 rounded-lg focus:outline-none focus:border-red-500/50",placeholder:"john@example.com"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Phone"}),a.jsx("input",{type:"tel",value:c.contact_phone,onChange:g=>u(y=>({...y,contact_phone:g.target.value})),className:"w-full px-4 py-2 bg-white/5 border border-white/10 rounded-lg focus:outline-none focus:border-red-500/50",placeholder:"0400 000 000"})]})]})]}),a.jsxs("section",{children:[a.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[a.jsx(fc,{size:20,className:"text-red-400"}),"Event Details"]}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Event Name"}),a.jsx("input",{type:"text",value:c.event_name,onChange:g=>u(y=>({...y,event_name:g.target.value})),className:"w-full px-4 py-2 bg-white/5 border border-white/10 rounded-lg focus:outline-none focus:border-red-500/50",placeholder:"e.g., Fight Night 12"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Event Date"}),a.jsx("input",{type:"date",value:c.event_date,onChange:g=>u(y=>({...y,event_date:g.target.value})),className:"w-full px-4 py-2 bg-white/5 border border-white/10 rounded-lg focus:outline-none focus:border-red-500/50"})]})]})]}),a.jsxs("section",{children:[a.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[a.jsx(_f,{size:20,className:"text-red-400"}),"Package & Pricing"]}),a.jsx("div",{className:"grid md:grid-cols-3 gap-3 mb-4",children:kFe.map(g=>a.jsxs("button",{type:"button",onClick:()=>l(g.id),className:`p-3 rounded-xl border-2 text-left transition-all ${c.package===g.id?"border-red-500 bg-red-500/10":"border-white/10 hover:border-white/20"}`,children:[a.jsx("p",{className:"font-semibold text-sm",children:g.name}),a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:g.description})]},g.id))}),a.jsxs("div",{className:"max-w-xs",children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Price (AUD)"}),a.jsxs("div",{className:"relative",children:[a.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400",children:"$"}),a.jsx("input",{type:"number",value:c.price,onChange:g=>u(y=>({...y,price:g.target.value})),className:"w-full pl-8 pr-4 py-2 bg-white/5 border border-white/10 rounded-lg focus:outline-none focus:border-red-500/50",placeholder:"0.00",step:"0.01",min:"0"})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Leave blank for "Contact for pricing"'})]})]}),a.jsxs("section",{children:[a.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[a.jsx(lb,{size:20,className:"text-red-400"}),"What's Included"]}),a.jsxs("div",{className:"space-y-2",children:[(c.inclusions||[]).map((g,y)=>a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",value:g,onChange:x=>f(y,x.target.value),className:"flex-1 px-4 py-2 bg-white/5 border border-white/10 rounded-lg focus:outline-none focus:border-red-500/50 text-sm",placeholder:"Inclusion item..."}),a.jsx("button",{type:"button",onClick:()=>A(y),className:"p-2 text-gray-400 hover:text-red-400",children:a.jsx(_2,{size:18})})]},y)),a.jsxs("button",{type:"button",onClick:d,className:"text-sm text-red-400 hover:text-red-300 flex items-center gap-1",children:[a.jsx(L0,{size:16}),"Add inclusion"]})]})]}),a.jsxs("section",{children:[a.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[a.jsx(jb,{size:20,className:"text-red-400"}),"Custom Notes"]}),a.jsx("textarea",{value:c.custom_notes,onChange:g=>u(y=>({...y,custom_notes:g.target.value})),rows:3,className:"w-full px-4 py-2 bg-white/5 border border-white/10 rounded-lg focus:outline-none focus:border-red-500/50 resize-none text-sm",placeholder:"Any additional notes or custom terms..."})]}),a.jsxs("section",{children:[a.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Status"}),a.jsxs("select",{value:c.status,onChange:g=>u(y=>({...y,status:g.target.value})),className:"px-4 py-2 bg-white/5 border border-white/10 rounded-lg focus:outline-none focus:border-red-500/50",children:[a.jsx("option",{value:"draft",children:"Draft"}),a.jsx("option",{value:"sent",children:"Sent"}),a.jsx("option",{value:"viewed",children:"Viewed"}),a.jsx("option",{value:"accepted",children:"Accepted"}),a.jsx("option",{value:"declined",children:"Declined"})]})]})]}),a.jsxs("div",{className:"shrink-0 border-t border-white/10 p-4 lg:p-6 flex justify-end gap-4 bg-[#12121a]",children:[a.jsx("button",{type:"button",onClick:e,className:"px-6 py-2 bg-white/5 rounded-lg hover:bg-white/10 transition-colors",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:n||!c.org_name,className:"px-6 py-2 bg-gradient-to-r from-red-600 to-orange-600 rounded-lg font-medium hover:opacity-90 transition-opacity disabled:opacity-50",children:n?"Saving...":t?"Update Proposal":"Create Proposal"})]})]})}),a.jsxs("div",{className:`lg:w-1/2 bg-[#0a0a0f] flex flex-col overflow-hidden border-l border-white/10 ${s==="preview"?"flex":"hidden lg:flex"}`,children:[a.jsx("div",{className:"shrink-0 border-b border-white/10 p-4 lg:p-6 bg-[#0a0a0f]",children:a.jsxs("div",{className:"flex items-center gap-2 text-gray-400",children:[a.jsx(I0,{size:18}),a.jsx("span",{className:"font-medium",children:"Live Preview"}),a.jsx("span",{className:"text-xs text-gray-500 ml-auto",children:"Updates as you type"})]})}),a.jsx("div",{className:"flex-1 overflow-y-auto",children:a.jsx(RFe,{form:c})})]})]})})}function RFe({form:t}){const e=[{value:"25+",label:"Events",icon:yh},{value:"4",label:"Countries",icon:E2},{value:"50K+",label:"Viewers",icon:$h},{value:"100%",label:"Satisfaction",icon:kN}];return a.jsxs("div",{className:"min-h-full bg-[#0a0a0f] text-white",children:[a.jsxs("section",{className:"relative py-12 px-6 overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-red-600/10 via-transparent to-transparent"}),a.jsx("div",{className:"absolute top-1/4 left-1/4 w-64 h-64 bg-red-600/20 rounded-full blur-3xl"}),a.jsxs("div",{className:"max-w-2xl mx-auto text-center relative z-10",children:[a.jsx("p",{className:"text-red-400 font-medium mb-3 tracking-wide text-sm",children:"PREPARED FOR"}),a.jsx("h1",{className:"text-2xl md:text-4xl font-bold mb-4 bg-gradient-to-r from-white via-gray-200 to-gray-400 bg-clip-text text-transparent",children:t.org_name||"Organization Name"}),(t.event_name||t.event_date)&&a.jsxs("p",{className:"text-lg text-gray-300 mb-6",children:[t.event_name||"Event Name",t.event_date&&a.jsxs("span",{className:"text-gray-500",children:["  ",new Date(t.event_date).toLocaleDateString("en-AU",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]})]}),a.jsx("p",{className:"text-sm text-gray-400 max-w-xl mx-auto",children:"Professional livestream production that brings your events to audiences worldwide  at zero upfront cost to you."})]})]}),a.jsx("section",{className:"py-4 border-y border-white/10 bg-white/5",children:a.jsx("div",{className:"max-w-4xl mx-auto px-6",children:a.jsx("div",{className:"grid grid-cols-4 gap-4",children:e.map((r,n)=>a.jsxs("div",{className:"text-center",children:[a.jsx(r.icon,{className:"w-4 h-4 mx-auto mb-1 text-red-400"}),a.jsx("p",{className:"text-lg font-bold",children:r.value}),a.jsx("p",{className:"text-xs text-gray-400",children:r.label})]},n))})})}),a.jsx("section",{className:"py-8 px-6",children:a.jsx("div",{className:"max-w-2xl mx-auto",children:a.jsxs("div",{className:"bg-gradient-to-br from-white/10 to-white/5 border border-white/20 rounded-2xl p-6",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6 pb-6 border-b border-white/10",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-red-400 font-medium mb-1 text-sm",children:"YOUR PACKAGE"}),a.jsxs("h2",{className:"text-xl font-bold capitalize",children:[t.package||"Custom"," Package"]}),t.event_type&&a.jsx("p",{className:"text-gray-400 text-sm mt-1",children:t.event_type})]}),a.jsx("div",{className:"text-right",children:t.price?a.jsxs(a.Fragment,{children:[a.jsxs("p",{className:"text-2xl font-bold text-white",children:["$",parseFloat(t.price).toLocaleString()]}),a.jsx("p",{className:"text-xs text-gray-400",children:"AUD"})]}):a.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Contact for pricing"})})]}),t.inclusions&&t.inclusions.filter(r=>r.trim()).length>0&&a.jsxs("div",{className:"mb-6",children:[a.jsxs("h3",{className:"text-sm font-semibold mb-3 flex items-center gap-2",children:[a.jsx(lb,{className:"text-green-400",size:16}),"What's Included"]}),a.jsx("ul",{className:"grid md:grid-cols-2 gap-2",children:t.inclusions.filter(r=>r.trim()).map((r,n)=>a.jsxs("li",{className:"flex items-start gap-2 text-sm",children:[a.jsx(_o,{className:"w-4 h-4 text-green-400 shrink-0 mt-0.5"}),a.jsx("span",{className:"text-gray-300",children:r})]},n))})]}),t.custom_notes&&a.jsxs("div",{className:"bg-white/5 rounded-xl p-4 mb-6",children:[a.jsx("h3",{className:"font-semibold mb-2 text-sm",children:"Additional Notes"}),a.jsx("p",{className:"text-gray-300 whitespace-pre-wrap text-sm",children:t.custom_notes})]}),a.jsx("div",{className:"bg-gradient-to-r from-green-600/20 to-emerald-600/20 border border-green-500/30 rounded-xl p-4",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"p-2 bg-green-500/20 rounded-lg",children:a.jsx(_f,{className:"w-5 h-5 text-green-400"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-semibold text-green-400 mb-1",children:"Zero Upfront Cost Model"}),a.jsx("p",{className:"text-gray-300 text-xs",children:"FFM operates on a revenue-share model. You pay nothing upfront  we earn through pay-per-view ticket sales."})]})]})})]})})}),a.jsx("section",{className:"py-8 px-6 bg-white/5",children:a.jsxs("div",{className:"max-w-2xl mx-auto",children:[a.jsx("h2",{className:"text-lg font-bold text-center mb-6",children:"How It Works"}),a.jsx("div",{className:"grid grid-cols-3 gap-4",children:[{step:"1",title:"We Produce",icon:yh},{step:"2",title:"Fans Watch",icon:$h},{step:"3",title:"You Earn",icon:$A}].map((r,n)=>a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-10 h-10 mx-auto mb-2 bg-gradient-to-br from-red-600 to-orange-600 rounded-xl flex items-center justify-center",children:a.jsx(r.icon,{size:18})}),a.jsx("h3",{className:"text-sm font-semibold",children:r.title})]},n))})]})}),a.jsx("section",{className:"py-8 px-6",children:a.jsx("div",{className:"max-w-2xl mx-auto",children:a.jsxs("div",{className:"bg-gradient-to-br from-red-600/20 to-orange-600/20 border border-red-500/30 rounded-2xl p-6 text-center",children:[a.jsx("h2",{className:"text-xl font-bold mb-2",children:"Ready to Get Started?"}),a.jsxs("p",{className:"text-gray-300 mb-4 text-sm",children:["Let's discuss how we can bring professional livestream production to ",t.org_name||"your organization","."]}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-3",children:[a.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-red-600 to-orange-600 rounded-xl font-medium text-sm",children:[a.jsx(ay,{size:16}),"0411 934 935"]}),a.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-white/10 border border-white/20 rounded-xl font-medium text-sm",children:[a.jsx(tu,{size:16}),"Email Us"]})]}),t.contact_name&&a.jsxs("p",{className:"mt-4 text-xs text-gray-400",children:["Prepared for ",t.contact_name,t.contact_email&&` (${t.contact_email})`]})]})})}),a.jsx("footer",{className:"py-4 px-6 border-t border-white/10 text-center text-gray-400 text-xs",children:a.jsxs("p",{children:[" ",new Date().getFullYear()," Fit Focus Media"]})})]})}const DFe=[{value:"25+",label:"Events Produced",icon:yh},{value:"4",label:"Countries",icon:E2},{value:"50K+",label:"Viewers Reached",icon:$h},{value:"100%",label:"Client Satisfaction",icon:kN}],l4=[{quote:"FFM transformed how we share our events with the world. Professional quality, zero hassle.",author:"Phil Cassidy",role:"Inception Fight Series"},{quote:"The athlete content packages have been a game-changer for our fighters' social media presence.",author:"Event Promoter",role:"Combat Sports Organisation"}];function MFe(){const{slug:t}=tA(),[e,r]=j.useState(null),[n,i]=j.useState(!0),[s,o]=j.useState(null);j.useEffect(()=>{c()},[t]);async function c(){try{i(!0);const u=await zRe(t);r(u),WRe(t).catch(console.error)}catch(u){console.error("Error loading proposal:",u),o("Proposal not found")}finally{i(!1)}}return n?a.jsx("div",{className:"min-h-screen bg-[#0a0a0f] flex items-center justify-center",children:a.jsx("div",{className:"animate-pulse text-gray-400",children:"Loading proposal..."})}):s||!e?a.jsxs("div",{className:"min-h-screen bg-[#0a0a0f] flex flex-col items-center justify-center text-center p-6",children:[a.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"Proposal Not Found"}),a.jsx("p",{className:"text-gray-400 mb-6",children:"This proposal may have expired or been removed."}),a.jsx(gs,{to:"/",className:"px-6 py-3 bg-gradient-to-r from-red-600 to-orange-600 rounded-lg font-medium",children:"Visit Our Website"})]}):a.jsxs("div",{className:"min-h-screen bg-[#0a0a0f] text-white",children:[a.jsxs("section",{className:"relative py-20 px-6 overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-red-600/10 via-transparent to-transparent"}),a.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-red-600/20 rounded-full blur-3xl"}),a.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-96 h-96 bg-orange-600/20 rounded-full blur-3xl"}),a.jsx("div",{className:"max-w-4xl mx-auto text-center relative z-10",children:a.jsxs(Or.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[a.jsx("div",{className:"flex justify-center mb-8",children:a.jsx("img",{src:"/logo.png",alt:"Fit Focus Media",className:"h-16 w-auto",onError:u=>u.target.style.display="none"})}),a.jsx("p",{className:"text-red-400 font-medium mb-4 tracking-wide",children:"PREPARED FOR"}),a.jsx("h1",{className:"text-4xl md:text-6xl font-bold mb-6 bg-gradient-to-r from-white via-gray-200 to-gray-400 bg-clip-text text-transparent",children:e.org_name}),e.event_name&&a.jsxs("p",{className:"text-xl text-gray-300 mb-8",children:[e.event_name,e.event_date&&a.jsxs("span",{className:"text-gray-500",children:["  ",new Date(e.event_date).toLocaleDateString("en-AU",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]})]}),a.jsx("p",{className:"text-lg text-gray-400 max-w-2xl mx-auto",children:"Professional livestream production that brings your events to audiences worldwide  at zero upfront cost to you."})]})})]}),a.jsx("section",{className:"py-8 border-y border-white/10 bg-white/5",children:a.jsx("div",{className:"max-w-6xl mx-auto px-6",children:a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:DFe.map((u,l)=>a.jsxs(Or.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:l*.1},className:"text-center",children:[a.jsx(u.icon,{className:"w-6 h-6 mx-auto mb-2 text-red-400"}),a.jsx("p",{className:"text-2xl font-bold",children:u.value}),a.jsx("p",{className:"text-sm text-gray-400",children:u.label})]},l))})})}),a.jsx("section",{className:"py-16 px-6",children:a.jsx("div",{className:"max-w-4xl mx-auto",children:a.jsxs(Or.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-gradient-to-br from-white/10 to-white/5 border border-white/20 rounded-3xl p-8 md:p-12",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-6 mb-8 pb-8 border-b border-white/10",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-red-400 font-medium mb-2",children:"YOUR PACKAGE"}),a.jsxs("h2",{className:"text-3xl font-bold capitalize",children:[e.package||"Custom"," Package"]}),e.event_type&&a.jsx("p",{className:"text-gray-400 mt-1",children:e.event_type})]}),a.jsx("div",{className:"text-right",children:e.price?a.jsxs(a.Fragment,{children:[a.jsxs("p",{className:"text-4xl font-bold text-white",children:["$",e.price.toLocaleString()]}),a.jsx("p",{className:"text-sm text-gray-400",children:"AUD"})]}):a.jsx("p",{className:"text-xl font-medium text-gray-300",children:"Contact for pricing"})})]}),e.inclusions&&e.inclusions.length>0&&a.jsxs("div",{className:"mb-8",children:[a.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[a.jsx(lb,{className:"text-green-400",size:20}),"What's Included"]}),a.jsx("ul",{className:"grid md:grid-cols-2 gap-3",children:e.inclusions.map((u,l)=>a.jsxs("li",{className:"flex items-start gap-3",children:[a.jsx(_o,{className:"w-5 h-5 text-green-400 shrink-0 mt-0.5"}),a.jsx("span",{className:"text-gray-300",children:u})]},l))})]}),e.custom_notes&&a.jsxs("div",{className:"bg-white/5 rounded-xl p-6 mb-8",children:[a.jsx("h3",{className:"font-semibold mb-2",children:"Additional Notes"}),a.jsx("p",{className:"text-gray-300 whitespace-pre-wrap",children:e.custom_notes})]}),a.jsx("div",{className:"bg-gradient-to-r from-green-600/20 to-emerald-600/20 border border-green-500/30 rounded-xl p-6",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"p-3 bg-green-500/20 rounded-xl",children:a.jsx(_f,{className:"w-6 h-6 text-green-400"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-green-400 mb-2",children:"Zero Upfront Cost Model"}),a.jsx("p",{className:"text-gray-300",children:"FFM operates on a revenue-share model for livestream events. You pay nothing upfront  we earn through pay-per-view ticket sales. Your success is our success."})]})]})})]})})}),a.jsx("section",{className:"py-16 px-6 bg-white/5",children:a.jsxs("div",{className:"max-w-4xl mx-auto",children:[a.jsx("h2",{className:"text-2xl font-bold text-center mb-12",children:"How It Works"}),a.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:[{step:"1",title:"We Produce",description:"Professional multi-camera production, graphics, and streaming setup.",icon:yh},{step:"2",title:"Fans Watch",description:"Viewers purchase pay-per-view access through our platform.",icon:$h},{step:"3",title:"You Earn",description:"Revenue is shared  you profit from your event without the production headache.",icon:$A}].map((u,l)=>a.jsxs(Or.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3+l*.1},className:"text-center",children:[a.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gradient-to-br from-red-600 to-orange-600 rounded-2xl flex items-center justify-center",children:a.jsx(u.icon,{size:28})}),a.jsx("h3",{className:"text-lg font-semibold mb-2",children:u.title}),a.jsx("p",{className:"text-gray-400",children:u.description})]},l))})]})}),a.jsx("section",{className:"py-16 px-6",children:a.jsxs("div",{className:"max-w-3xl mx-auto text-center",children:[a.jsx("div",{className:"flex justify-center mb-4",children:[...Array(5)].map((u,l)=>a.jsx(kb,{className:"w-5 h-5 text-yellow-400 fill-yellow-400"},l))}),a.jsxs("blockquote",{className:"text-xl md:text-2xl text-gray-200 italic mb-6",children:['"',l4[0].quote,'"']}),a.jsxs("p",{className:"text-gray-400",children:[a.jsx("span",{className:"font-semibold text-white",children:l4[0].author}),"  ",l4[0].role]})]})}),a.jsx("section",{className:"py-16 px-6",children:a.jsx("div",{className:"max-w-4xl mx-auto",children:a.jsxs(Or.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.4},className:"bg-gradient-to-br from-red-600/20 to-orange-600/20 border border-red-500/30 rounded-3xl p-8 md:p-12 text-center",children:[a.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Ready to Get Started?"}),a.jsxs("p",{className:"text-gray-300 mb-8 max-w-xl mx-auto",children:["Let's discuss how we can bring professional livestream production to ",e.org_name,"."]}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[a.jsxs("a",{href:"tel:0411934935",className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-red-600 to-orange-600 rounded-xl font-medium hover:opacity-90 transition-opacity",children:[a.jsx(ay,{size:20}),"Call Brandon: 0411 934 935"]}),a.jsxs("a",{href:"mailto:brandon@fitfocusmedia.com.au",className:"flex items-center gap-2 px-6 py-3 bg-white/10 border border-white/20 rounded-xl font-medium hover:bg-white/15 transition-colors",children:[a.jsx(tu,{size:20}),"Email Us"]})]}),e.contact_name&&a.jsxs("p",{className:"mt-6 text-sm text-gray-400",children:["This proposal was prepared for ",e.contact_name,e.contact_email&&` (${e.contact_email})`]})]})})}),a.jsxs("footer",{className:"py-8 px-6 border-t border-white/10 text-center text-gray-400 text-sm",children:[a.jsxs("p",{children:[" ",new Date().getFullYear()," Fit Focus Media. All rights reserved."]}),a.jsx("p",{className:"mt-2",children:a.jsx("a",{href:"https://fitfocusmedia.com.au",className:"hover:text-white transition-colors",children:"fitfocusmedia.com.au"})})]})]})}function FFe({targetDate:t}){const[e,r]=j.useState(n(t));j.useEffect(()=>{const i=setInterval(()=>{r(n(t))},1e3);return()=>clearInterval(i)},[t]);function n(i){const s=new Date(i)-new Date;return s<=0?null:{days:Math.floor(s/(1e3*60*60*24)),hours:Math.floor(s/(1e3*60*60)%24),minutes:Math.floor(s/1e3/60%60),seconds:Math.floor(s/1e3%60)}}return e?a.jsx("div",{className:"flex gap-3 md:gap-4",children:[{value:e.days,label:"DAYS"},{value:e.hours,label:"HRS"},{value:e.minutes,label:"MIN"},{value:e.seconds,label:"SEC"}].map((i,s)=>a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"bg-dark-800/80 backdrop-blur-sm rounded-lg px-3 py-2 md:px-4 md:py-3 min-w-[50px] md:min-w-[70px]",children:a.jsx("span",{className:"text-2xl md:text-4xl font-bold text-white tabular-nums",children:String(i.value).padStart(2,"0")})}),a.jsx("span",{className:"text-[10px] md:text-xs text-gray-400 mt-1 block",children:i.label})]},s))}):a.jsx("span",{className:"text-green-400 font-bold",children:"Starting Soon!"})}function c4({title:t,events:e,icon:r,accentColor:n="red"}){const i=j.useState(null);return!e||e.length===0?null:a.jsxs("section",{className:"mb-10",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4 px-1",children:[a.jsxs("h2",{className:"text-xl md:text-2xl font-bold text-white flex items-center gap-2",children:[r,t]}),e.length>3&&a.jsxs("span",{className:"text-sm text-gray-500",children:[e.length," events"]})]}),a.jsx("div",{className:"relative group",children:a.jsx("div",{ref:i,className:"flex gap-4 overflow-x-auto pb-4 snap-x snap-mandatory scrollbar-hide",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:e.map(s=>a.jsx("div",{className:"flex-shrink-0 w-[280px] md:w-[320px] snap-start",children:a.jsx(iT,{event:s,compact:!0})},s.id))})})]})}function iT({event:t,featured:e=!1,compact:r=!1}){const n=new Date(t.start_time),i=new Date,s=t.status==="live"||t.is_live,o=t.status==="ended"||new Date(t.end_time)<i,c=!s&&!o,u=n.toDateString()===i.toDateString(),l=n.toDateString()===new Date(i.getTime()+864e5).toDateString();return e?a.jsx(gs,{to:`/live/${t.id}`,className:"block group",children:a.jsxs("div",{className:"relative rounded-2xl overflow-hidden aspect-[21/9] md:aspect-[21/8]",children:[a.jsxs("div",{className:"absolute inset-0",children:[t.thumbnail_url?a.jsx("img",{src:t.thumbnail_url,alt:t.title,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-105"}):a.jsx("div",{className:"w-full h-full bg-gradient-to-br from-red-900 to-dark-900"}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-black/50 to-transparent"}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 via-transparent to-transparent"})]}),a.jsxs("div",{className:"absolute inset-0 p-6 md:p-10 flex flex-col justify-end",children:[a.jsxs("div",{className:"mb-3",children:[s&&a.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 bg-red-500 text-white text-sm font-bold rounded-full",children:[a.jsx("span",{className:"w-2 h-2 bg-white rounded-full animate-pulse"}),"LIVE NOW"]}),c&&u&&a.jsx("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 bg-amber-500 text-black text-sm font-bold rounded-full",children:"TODAY"}),c&&l&&a.jsx("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 bg-blue-500 text-white text-sm font-bold rounded-full",children:"TOMORROW"})]}),a.jsx("p",{className:"text-red-400 font-semibold text-sm md:text-base mb-1",children:t.organization}),a.jsx("h2",{className:"text-2xl md:text-4xl lg:text-5xl font-bold text-white mb-3 group-hover:text-red-400 transition-colors",children:t.title}),a.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm md:text-base text-gray-300 mb-4",children:[a.jsxs("span",{className:"flex items-center gap-1.5",children:[a.jsx(fc,{className:"w-4 h-4"}),n.toLocaleDateString("en-AU",{weekday:"short",day:"numeric",month:"short"})]}),a.jsxs("span",{className:"flex items-center gap-1.5",children:[a.jsx(DA,{className:"w-4 h-4"}),n.toLocaleTimeString("en-AU",{hour:"2-digit",minute:"2-digit"})]}),a.jsxs("span",{className:"flex items-center gap-1.5",children:[a.jsx(th,{className:"w-4 h-4"}),t.venue]})]}),a.jsxs("div",{className:"flex items-end justify-between gap-4",children:[c&&a.jsx(FFe,{targetDate:t.start_time}),s&&a.jsxs("span",{className:"px-6 py-3 bg-red-500 hover:bg-red-600 text-white font-bold rounded-lg transition-colors flex items-center gap-2",children:[a.jsx(gf,{className:"w-5 h-5 fill-current"}),"Watch Now"]}),a.jsxs("div",{className:"ml-auto",children:[a.jsxs("span",{className:"text-3xl md:text-4xl font-bold text-white",children:["$",t.price]}),a.jsx("span",{className:"text-gray-400 ml-1",children:"AUD"})]})]})]})]})}):a.jsxs(gs,{to:`/live/${t.id}`,className:"group bg-dark-900 rounded-xl overflow-hidden border border-dark-800 hover:border-red-500/50 hover:shadow-lg hover:shadow-red-500/10 transition-all duration-300 ",children:[a.jsxs("div",{className:"relative aspect-video bg-dark-800 overflow-hidden",children:[t.thumbnail_url?a.jsx("img",{src:t.thumbnail_url,alt:t.title,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"}):a.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-dark-800 to-dark-900",children:a.jsx(gf,{className:"w-12 h-12 text-dark-600"})}),a.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/40 transition-colors flex items-center justify-center",children:a.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity transform scale-90 group-hover:scale-100",children:a.jsx("div",{className:"w-14 h-14 rounded-full bg-red-500/90 flex items-center justify-center",children:a.jsx(gf,{className:"w-6 h-6 text-white fill-current ml-1"})})})}),s&&a.jsxs("div",{className:"absolute top-3 left-3 px-2.5 py-1 bg-red-500 text-white text-xs font-bold rounded-full flex items-center gap-1.5 shadow-lg",children:[a.jsx("span",{className:"w-1.5 h-1.5 bg-white rounded-full animate-pulse"}),"LIVE"]}),o&&t.mux_playback_id&&a.jsx("div",{className:"absolute top-3 left-3 px-2.5 py-1 bg-green-600 text-white text-xs font-medium rounded-full shadow-lg",children:"Replay"}),c&&u&&a.jsx("div",{className:"absolute top-3 left-3 px-2.5 py-1 bg-amber-500 text-black text-xs font-bold rounded-full shadow-lg",children:"TODAY"}),c&&l&&a.jsx("div",{className:"absolute top-3 left-3 px-2.5 py-1 bg-blue-500 text-white text-xs font-bold rounded-full shadow-lg",children:"TOMORROW"}),a.jsxs("div",{className:"absolute bottom-3 right-3 px-2.5 py-1 bg-black/80 backdrop-blur-sm text-white font-bold text-sm rounded-lg",children:["$",t.price]}),a.jsx("div",{className:"absolute bottom-3 left-3 px-2.5 py-1 bg-dark-900/80 backdrop-blur-sm text-gray-300 text-xs font-medium rounded-lg",children:t.organization})]}),a.jsxs("div",{className:"p-4",children:[a.jsx("h3",{className:"text-lg font-bold text-white mb-2 group-hover:text-red-400 transition-colors line-clamp-1",children:t.title}),a.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-500",children:[a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(fc,{className:"w-3.5 h-3.5"}),n.toLocaleDateString("en-AU",{day:"numeric",month:"short"})]}),a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(DA,{className:"w-3.5 h-3.5"}),n.toLocaleTimeString("en-AU",{hour:"2-digit",minute:"2-digit"})]})]})]})]})}function UFe(){const[t,e]=j.useState([]),[r,n]=j.useState(!0),[i,s]=j.useState(null),[o,c]=j.useState(""),[u,l]=j.useState("all");j.useEffect(()=>{d()},[]);const d=async()=>{try{const C=await jRe();e(C||[])}catch(C){s("Failed to load events"),console.error(C)}finally{n(!1)}},f=j.useMemo(()=>[...new Set(t.map(N=>N.organization).filter(Boolean))].sort(),[t]),A=j.useMemo(()=>{let C=t;if(u!=="all"&&(C=C.filter(N=>N.organization===u)),o.trim()){const N=o.toLowerCase();C=C.filter(I=>I.title?.toLowerCase().includes(N)||I.organization?.toLowerCase().includes(N)||I.venue?.toLowerCase().includes(N))}return C},[t,u,o]),p=new Date,g=A.filter(C=>C.status==="live"||C.is_live),y=A.filter(C=>new Date(C.start_time)>p&&C.status!=="ended"&&C.status!=="live"&&!C.is_live).sort((C,N)=>new Date(C.start_time)-new Date(N.start_time)),x=y.filter(C=>(new Date(C.start_time)-p)/36e5<=168),w=y.filter(C=>(new Date(C.start_time)-p)/36e5>168),E=A.filter(C=>C.status==="ended"||new Date(C.end_time)<p).sort((C,N)=>new Date(N.start_time)-new Date(C.start_time)),T=g[0]||y[0];return r?a.jsx("div",{className:"min-h-[80vh] flex items-center justify-center bg-dark-950",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-red-500 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-400",children:"Loading events..."})]})}):i?a.jsx("div",{className:"min-h-[80vh] flex items-center justify-center bg-dark-950",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-red-500 mb-4",children:i}),a.jsx("button",{onClick:d,className:"px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg transition-colors",children:"Try Again"})]})}):a.jsxs("div",{className:"min-h-screen bg-dark-950",children:[T&&!o&&u==="all"&&a.jsx("section",{className:"px-4 pt-8 pb-6",children:a.jsx("div",{className:"max-w-7xl mx-auto",children:a.jsx(iT,{event:T,featured:!0})})}),a.jsx("div",{className:"sticky top-0 z-20 bg-dark-950/95 backdrop-blur-md border-b border-dark-800",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:a.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[a.jsxs("div",{className:"relative flex-1 max-w-md",children:[a.jsx(_C,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500"}),a.jsx("input",{type:"text",placeholder:"Search events, organizations, venues...",value:o,onChange:C=>c(C.target.value),className:"w-full pl-10 pr-10 py-2.5 bg-dark-800 border border-dark-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent transition-all"}),o&&a.jsx("button",{onClick:()=>c(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-white transition-colors",children:a.jsx(B0,{className:"w-4 h-4"})})]}),a.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-1 scrollbar-hide",children:[a.jsx("button",{onClick:()=>l("all"),className:`flex-shrink-0 px-4 py-2 rounded-lg font-medium transition-all ${u==="all"?"bg-red-500 text-white":"bg-dark-800 text-gray-400 hover:bg-dark-700 hover:text-white"}`,children:"All Events"}),f.map(C=>a.jsx("button",{onClick:()=>l(C),className:`flex-shrink-0 px-4 py-2 rounded-lg font-medium transition-all ${u===C?"bg-red-500 text-white":"bg-dark-800 text-gray-400 hover:bg-dark-700 hover:text-white"}`,children:C},C))]}),a.jsxs(gs,{to:"/my-purchases",className:"flex-shrink-0 flex items-center justify-center gap-2 px-4 py-2 bg-dark-800 hover:bg-dark-700 text-white rounded-lg transition-colors",children:[a.jsx(uB,{className:"w-5 h-5"}),a.jsx("span",{className:"hidden sm:inline",children:"My Purchases"})]})]})})}),a.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[(o||u!=="all")&&a.jsx("div",{className:"mb-6",children:a.jsxs("p",{className:"text-gray-400",children:[A.length," ",A.length===1?"event":"events"," found",o&&a.jsxs("span",{children:[' for "',o,'"']}),u!=="all"&&a.jsxs("span",{children:[" in ",u]})]})}),g.length>0&&a.jsxs("section",{className:"mb-10",children:[a.jsxs("h2",{className:"text-xl md:text-2xl font-bold text-white mb-4 flex items-center gap-2",children:[a.jsx("span",{className:"w-3 h-3 bg-red-500 rounded-full animate-pulse"}),"Live Now"]}),a.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:g.map(C=>a.jsx(iT,{event:C},C.id))})]}),x.length>0&&!o&&a.jsx(c4,{title:"This Week",events:x,icon:a.jsx(fc,{className:"w-5 h-5 text-amber-500"})}),w.length>0&&!o&&a.jsx(c4,{title:"Coming Soon",events:w,icon:a.jsx(DA,{className:"w-5 h-5 text-blue-500"})}),(o||u!=="all")&&y.length>0&&a.jsxs("section",{className:"mb-10",children:[a.jsx("h2",{className:"text-xl md:text-2xl font-bold text-white mb-4",children:"Upcoming Events"}),a.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:y.map(C=>a.jsx(iT,{event:C},C.id))})]}),E.length>0&&a.jsx(c4,{title:"Replays Available",events:E.filter(C=>C.mux_playback_id),icon:a.jsx(gf,{className:"w-5 h-5 text-green-500"})}),A.length===0&&a.jsxs("div",{className:"text-center py-16",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-dark-800 flex items-center justify-center mx-auto mb-4",children:a.jsx(_C,{className:"w-8 h-8 text-gray-600"})}),a.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"No events found"}),a.jsx("p",{className:"text-gray-400 mb-6",children:o?`No events match "${o}"`:u!=="all"?`No events from ${u}`:"No events scheduled yet. Check back soon!"}),(o||u!=="all")&&a.jsx("button",{onClick:()=>{c(""),l("all")},className:"px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg transition-colors",children:"Clear Filters"})]})]})]})}const $Fe=()=>{let t=localStorage.getItem("ffm_session_id");return t||(t="sess_"+Math.random().toString(36).substring(2)+Date.now().toString(36),localStorage.setItem("ffm_session_id",t)),t},Cy=async(t,e=null,r={})=>{try{await Rr.from("livestream_analytics").insert({event_type:t,event_id:e,session_id:$Fe(),device_type:/mobile/i.test(navigator.userAgent)?"mobile":/tablet|ipad/i.test(navigator.userAgent)?"tablet":"desktop",user_agent:navigator.userAgent?.substring(0,500),...r,created_at:new Date().toISOString()})}catch(n){console.warn("Analytics tracking failed:",n.message)}},HFe=t=>Cy("page_view",t),QFe=t=>Cy("geo_check",t),VFe=(t,e,r,n,i,s,o,c)=>Cy("geo_blocked",t,{blocked_distance_km:e,venue_lat:r,venue_lng:n,block_radius_km:i,latitude:s,longitude:o,accuracy_meters:c}),zFe=(t,e,r,n)=>Cy("geo_passed",t,{latitude:e,longitude:r,accuracy_meters:n}),qz=t=>Cy("purchase_view",t),KFe=(t,e)=>Cy("checkout_start",t,{customer_email:e}),GFe=(t,e,r)=>Cy("purchase_complete",t,{customer_email:e,customer_id:r});function wne({targetDate:t,onComplete:e,className:r=""}){const n=A=>{if(!A)return new Date;const p=A.replace(/[Z+].*$/,"").replace(/\.000$/,"");return new Date(p)},i=()=>{const A=n(t)-new Date;return A<=0?null:{days:Math.floor(A/864e5),hours:Math.floor(A/36e5%24),minutes:Math.floor(A/1e3/60%60),seconds:Math.floor(A/1e3%60)}},[s,o]=j.useState(i()),[c,u]=j.useState(null),l=j.useRef(!1);if(j.useEffect(()=>{l.current=!1;const A=setInterval(()=>{const p=i();u(s),o(p),!p&&e&&!l.current&&(l.current=!0,e())},1e3);return()=>clearInterval(A)},[t]),!s)return a.jsx("div",{className:`text-center ${r}`,children:a.jsxs("div",{className:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-red-500 to-red-600 text-white font-bold rounded-full animate-pulse",children:[a.jsx("span",{className:"w-3 h-3 bg-white rounded-full animate-ping"}),"Event Starting Now"]})});const d=({value:A,label:p,prevValue:g})=>{const y=g!==void 0&&g!==A;return a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("div",{className:"relative",children:a.jsxs("div",{className:"relative w-16 h-20 md:w-24 md:h-28 perspective-1000",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-dark-700 to-dark-800 rounded-lg shadow-xl border border-dark-600",children:a.jsx("div",{className:"absolute top-1/2 left-0 right-0 h-px bg-dark-900/50"})}),a.jsx("div",{className:`relative z-10 w-full h-full flex items-center justify-center ${y?"animate-flip":""}`,children:a.jsx("span",{className:"text-3xl md:text-5xl font-bold text-white tabular-nums tracking-tight",children:String(A).padStart(2,"0")})}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-white/5 to-transparent rounded-lg pointer-events-none"})]})}),a.jsx("span",{className:"text-xs md:text-sm text-gray-500 mt-2 uppercase tracking-widest font-medium",children:p})]})},f=()=>a.jsxs("div",{className:"flex flex-col items-center justify-center gap-2 px-1 md:px-3",children:[a.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500 animate-pulse"}),a.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500 animate-pulse",style:{animationDelay:"0.5s"}})]});return a.jsxs("div",{className:`${r}`,children:[a.jsx("p",{className:"text-center text-gray-400 mb-4 text-sm uppercase tracking-widest font-medium",children:" Event Starts In"}),a.jsxs("div",{className:"flex items-start justify-center",children:[s.days>0&&a.jsxs(a.Fragment,{children:[a.jsx(d,{value:s.days,label:"Days",prevValue:c?.days}),a.jsx(f,{})]}),a.jsx(d,{value:s.hours,label:"Hours",prevValue:c?.hours}),a.jsx(f,{}),a.jsx(d,{value:s.minutes,label:"Mins",prevValue:c?.minutes}),a.jsx(f,{}),a.jsx(d,{value:s.seconds,label:"Secs",prevValue:c?.seconds})]}),s.days===0&&s.hours<2&&a.jsx("div",{className:"mt-4 text-center",children:a.jsxs("span",{className:"inline-flex items-center gap-2 px-4 py-2 bg-red-500/10 border border-red-500/20 rounded-full text-red-400 text-sm",children:[a.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),"Starting soon  Don't miss it!"]})})]})}function WFe({price:t,originalPrice:e=null,currency:r="AUD",email:n,onEmailChange:i,onPurchase:s,purchasing:o=!1,error:c=null,demoMode:u=!1,isLive:l=!1,isPast:d=!1,className:f=""}){const[A,p]=j.useState(!1),g=e?Math.round((1-t/e)*100):null,y=[{icon:xE,text:"Instant access after payment",highlight:!0},{icon:gf,text:"Watch live + replay for 7 days"},{icon:kb,text:"HD quality streaming"},{icon:oy,text:"Secure payment via Stripe"}];return a.jsxs("div",{className:`relative ${f}`,children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-red-500/20 to-orange-500/20 blur-xl rounded-3xl"}),a.jsxs("div",{className:"relative bg-dark-900/90 backdrop-blur-xl border border-dark-700/50 rounded-2xl overflow-hidden",children:[a.jsxs("div",{className:"bg-gradient-to-r from-dark-800 to-dark-800/50 px-6 py-4 border-b border-dark-700/50",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-400 font-medium",children:"Stream Access"}),g&&a.jsxs("span",{className:"px-2 py-1 bg-green-500/20 text-green-400 text-xs font-bold rounded-full",children:[g,"% OFF"]})]}),a.jsxs("div",{className:"mt-2 flex items-baseline gap-2",children:[a.jsxs("span",{className:"text-4xl font-bold text-white",children:["$",t]}),a.jsx("span",{className:"text-lg text-gray-500",children:r}),e&&a.jsxs("span",{className:"text-lg text-gray-600 line-through",children:["$",e]})]})]}),a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Email Address"}),a.jsxs("div",{className:`relative transition-all duration-300 ${A?"scale-[1.02]":""}`,children:[a.jsx(tu,{className:`absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 transition-colors ${A?"text-red-500":"text-gray-500"}`}),a.jsx("input",{type:"email",value:n,onChange:x=>i(x.target.value),onFocus:()=>p(!0),onBlur:()=>p(!1),placeholder:"your@email.com",className:`w-full pl-12 pr-4 py-4 bg-dark-800/50 border rounded-xl text-white placeholder-gray-500 outline-none transition-all duration-300 ${A?"border-red-500 ring-2 ring-red-500/20":"border-dark-700 hover:border-dark-600"}`,required:!0})]}),a.jsxs("p",{className:"text-xs text-gray-500 mt-2 flex items-center gap-1",children:[a.jsx(Nb,{className:"w-3 h-3"}),"Your access link will be sent here"]})]}),c&&a.jsx("div",{className:"mb-4 p-3 bg-red-500/10 border border-red-500/20 rounded-lg",children:a.jsx("p",{className:"text-red-400 text-sm",children:c})}),a.jsx("button",{onClick:s,disabled:o||!n,className:`w-full py-4 rounded-xl font-bold text-lg transition-all duration-300 flex items-center justify-center gap-3 ${o||!n?"bg-dark-700 text-gray-500 cursor-not-allowed":"bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white shadow-lg shadow-red-500/25 hover:shadow-red-500/40 hover:scale-[1.02] active:scale-[0.98]"}`,children:o?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"}),"Processing..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Ede,{className:"w-5 h-5"}),d?"Buy Replay Access":l?"Watch Now":"Buy Access"]})}),a.jsx("div",{className:"mt-6 space-y-3",children:y.map((x,w)=>a.jsxs("div",{className:`flex items-center gap-3 text-sm ${x.highlight?"text-white":"text-gray-400"}`,children:[a.jsx("div",{className:`w-5 h-5 rounded-full flex items-center justify-center ${x.highlight?"bg-green-500/20 text-green-400":"bg-dark-700 text-gray-500"}`,children:a.jsx(_o,{className:"w-3 h-3"})}),x.text]},w))}),u&&a.jsx("div",{className:"mt-6",children:a.jsxs("button",{onClick:s,disabled:o||!n,className:"w-full py-3 bg-gradient-to-r from-yellow-500/20 to-orange-500/20 border border-yellow-500/30 text-yellow-400 font-semibold rounded-xl hover:from-yellow-500/30 hover:to-orange-500/30 transition-all duration-300 flex items-center justify-center gap-2",children:[a.jsx(xE,{className:"w-4 h-4"}),"Demo Mode  No payment required"]})})]}),a.jsx("div",{className:"px-6 py-4 bg-dark-800/30 border-t border-dark-700/30",children:a.jsxs("div",{className:"flex items-center justify-center gap-4 text-xs text-gray-500",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Nb,{className:"w-3 h-3"}),"SSL Secured"]}),a.jsx("div",{className:"w-1 h-1 bg-gray-600 rounded-full"}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(oy,{className:"w-3 h-3"}),"Stripe Payments"]}),a.jsx("div",{className:"w-1 h-1 bg-gray-600 rounded-full"}),a.jsx("span",{children:" Australian Business"})]})})]})]})}function YFe({url:t,title:e,description:r,className:n=""}){const[i,s]=j.useState(!1),[o,c]=j.useState(!1),u=t||window.location.href,l=e||document.title,d=r||"",f={twitter:`https://twitter.com/intent/tweet?text=${encodeURIComponent(l)}&url=${encodeURIComponent(u)}`,facebook:`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(u)}`,whatsapp:`https://wa.me/?text=${encodeURIComponent(l+" "+u)}`},A=async()=>{try{await navigator.clipboard.writeText(u),s(!0),setTimeout(()=>s(!1),2e3)}catch(g){console.error("Failed to copy:",g)}},p=async()=>{if(navigator.share)try{await navigator.share({title:l,text:d,url:u})}catch{c(!0)}else c(!o)};return a.jsxs("div",{className:`relative ${n}`,children:[a.jsxs("button",{onClick:p,className:"flex items-center gap-2 px-4 py-2 bg-dark-800 hover:bg-dark-700 border border-dark-700 rounded-lg text-gray-300 hover:text-white transition-colors",children:[a.jsx(_Y,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm font-medium",children:"Share Event"})]}),o&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>c(!1)}),a.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-dark-800 border border-dark-700 rounded-lg shadow-xl z-50 overflow-hidden",children:[a.jsxs("a",{href:f.twitter,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 px-4 py-3 hover:bg-dark-700 text-gray-300 hover:text-white transition-colors",onClick:()=>c(!1),children:[a.jsx(Qhe,{className:"w-4 h-4 text-[#1DA1F2]"}),a.jsx("span",{className:"text-sm",children:"Twitter"})]}),a.jsxs("a",{href:f.facebook,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 px-4 py-3 hover:bg-dark-700 text-gray-300 hover:text-white transition-colors",onClick:()=>c(!1),children:[a.jsx(w2,{className:"w-4 h-4 text-[#4267B2]"}),a.jsx("span",{className:"text-sm",children:"Facebook"})]}),a.jsxs("a",{href:f.whatsapp,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 px-4 py-3 hover:bg-dark-700 text-gray-300 hover:text-white transition-colors",onClick:()=>c(!1),children:[a.jsx(rhe,{className:"w-4 h-4 text-[#25D366]"}),a.jsx("span",{className:"text-sm",children:"WhatsApp"})]}),a.jsxs("button",{onClick:()=>{A(),c(!1)},className:"flex items-center gap-3 px-4 py-3 hover:bg-dark-700 text-gray-300 hover:text-white transition-colors w-full border-t border-dark-700",children:[a.jsx(yY,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm",children:i?"Copied!":"Copy Link"})]})]})]})]})}function qFe({title:t,description:e,image:r,url:n,type:i="website"}){return j.useEffect(()=>{t&&(document.title=`${t} | Fit Focus Media`);const s=(o,c)=>{if(!c)return;let u=document.querySelector(`meta[property="${o}"]`)||document.querySelector(`meta[name="${o}"]`);u||(u=document.createElement("meta"),o.startsWith("og:")||o.startsWith("twitter:")?u.setAttribute("property",o):u.setAttribute("name",o),document.head.appendChild(u)),u.setAttribute("content",c)};return s("og:title",t),s("og:description",e),s("og:image",r),s("og:url",n||window.location.href),s("og:type",i),s("twitter:card","summary_large_image"),s("twitter:title",t),s("twitter:description",e),s("twitter:image",r),s("description",e),()=>{document.title="Fit Focus Media"}},[t,e,r,n,i]),null}function XFe({event:t,className:e=""}){const[r,n]=j.useState(!1);if(!t)return null;const i=new Date(t.start_time),s=t.end_time?new Date(t.end_time):new Date(i.getTime()+10800*1e3),o=g=>g.toISOString().replace(/-|:|\.\d+/g,""),c=g=>g.toISOString().replace(/-|:|\.\d+/g,"").slice(0,15)+"Z",u=encodeURIComponent(t.title),l=encodeURIComponent(`${t.organization}

Watch live at: https://fitfocusmedia.com.au/#/live/${t.id}`),d=encodeURIComponent(t.venue||"Online"),f=`https://calendar.google.com/calendar/render?action=TEMPLATE&text=${u}&dates=${o(i)}/${o(s)}&details=${l}&location=${d}`,A=`https://outlook.live.com/calendar/0/deeplink/compose?subject=${u}&startdt=${i.toISOString()}&enddt=${s.toISOString()}&body=${l}&location=${d}`,p=()=>{const g=`BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//Fit Focus Media//Livestream//EN
BEGIN:VEVENT
UID:${t.id}@fitfocusmedia.com.au
DTSTAMP:${c(new Date)}
DTSTART:${c(i)}
DTEND:${c(s)}
SUMMARY:${t.title}
DESCRIPTION:${t.organization}\\n\\nWatch live at: https://fitfocusmedia.com.au/#/live/${t.id}
LOCATION:${t.venue||"Online"}
END:VEVENT
END:VCALENDAR`,y=new Blob([g],{type:"text/calendar;charset=utf-8"}),x=URL.createObjectURL(y),w=document.createElement("a");w.href=x,w.download=`${t.title.replace(/[^a-z0-9]/gi,"_")}.ics`,document.body.appendChild(w),w.click(),document.body.removeChild(w),URL.revokeObjectURL(x),n(!1)};return a.jsxs("div",{className:`relative ${e}`,children:[a.jsxs("button",{onClick:()=>n(!r),className:"flex items-center gap-2 px-4 py-2 bg-dark-800 hover:bg-dark-700 border border-dark-700 rounded-lg text-gray-300 hover:text-white transition-colors",children:[a.jsx(fc,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm font-medium",children:"Add to Calendar"}),a.jsx(sy,{className:`w-4 h-4 transition-transform ${r?"rotate-180":""}`})]}),r&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>n(!1)}),a.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-dark-800 border border-dark-700 rounded-lg shadow-xl z-50 overflow-hidden",children:[a.jsxs("a",{href:f,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 px-4 py-3 hover:bg-dark-700 text-gray-300 hover:text-white transition-colors",onClick:()=>n(!1),children:[a.jsx("span",{className:"text-lg",children:""}),a.jsx("span",{className:"text-sm",children:"Google Calendar"})]}),a.jsxs("button",{onClick:p,className:"flex items-center gap-3 px-4 py-3 hover:bg-dark-700 text-gray-300 hover:text-white transition-colors w-full",children:[a.jsx("span",{className:"text-lg",children:""}),a.jsx("span",{className:"text-sm",children:"Apple Calendar"})]}),a.jsxs("a",{href:A,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 px-4 py-3 hover:bg-dark-700 text-gray-300 hover:text-white transition-colors",onClick:()=>n(!1),children:[a.jsx("span",{className:"text-lg",children:""}),a.jsx("span",{className:"text-sm",children:"Outlook"})]})]})]})]})}function ZFe(){const{eventId:t}=tA(),e=Ac(),[r]=Jb(),[n,i]=j.useState(null),[s,o]=j.useState({demo_mode:!1}),[c,u]=j.useState(""),[l,d]=j.useState(!0),[f,A]=j.useState(!1),[p,g]=j.useState(null),[y,x]=j.useState(null),[w,E]=j.useState(null),[T,C]=j.useState(!1),[N,I]=j.useState(!1),[U,K]=j.useState(!1),[Y,re]=j.useState(!1),[se,Ae]=j.useState(null),[we,Ce]=j.useState(!1),ve=j.useRef({pageView:!1,geoCheck:!1,purchaseView:!1});j.useEffect(()=>{De(),ve.current.pageView||(HFe(t),ve.current.pageView=!0)},[t]),j.useEffect(()=>{n&&n.geo_blocking_enabled?ne():n&&!n.geo_blocking_enabled&&(re(!0),ve.current.purchaseView||(qz(t),ve.current.purchaseView=!0))},[n]);const ne=async()=>{try{const Me=await navigator.permissions.query({name:"geolocation"});Me.state==="granted"?ce():Me.state==="denied"?(K(!0),re(!0)):I(!0)}catch{I(!0)}},ce=()=>{C(!0),I(!1),ve.current.geoCheck||(QFe(t),ve.current.geoCheck=!0),navigator.geolocation.getCurrentPosition(async Me=>{const Re=Me.coords.latitude,it=Me.coords.longitude,ht=Me.coords.accuracy;try{const Be=r.get("bypass"),Ge=await(await fetch("https://gonalgubgldgpkcekaxe.supabase.co/functions/v1/geo-check",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({venue_lat:n.geo_lat,venue_lng:n.geo_lng,radius_km:n.geo_radius_km||50,user_lat:Re,user_lng:it,event_id:t,bypass_token:Be})})).json();Ge.bypass?(x(!1),E({...Ge,crew_bypass:!0})):(x(Ge.blocked),E(Ge)),Ae({lat:Re,lng:it,distance_km:Ge.distance_km,accuracy_meters:ht}),Ge.blocked?VFe(t,Ge.distance_km,n.geo_lat,n.geo_lng,n.geo_radius_km,Re,it,ht):(zFe(t,Re,it,ht),ve.current.purchaseView||(qz(t),ve.current.purchaseView=!0))}catch(Be){console.error("Geo check failed:",Be),x(!1),Ae({lat:Re,lng:it})}finally{C(!1),re(!0)}},Me=>{console.error("Geolocation error:",Me),Me.code===Me.PERMISSION_DENIED&&K(!0),C(!1),re(!0)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})},ae=()=>{ce()},De=async()=>{try{const[Me,Re]=await Promise.all([KP(t),Dre()]);i(Me),o(Re||{demo_mode:!1})}catch(Me){g("Event not found"),console.error(Me)}finally{d(!1)}},Oe=async Me=>{if(Me&&Me.preventDefault(),!c){g("Please enter your email");return}A(!0),g(null),KFe(t,c);try{if(s.demo_mode)await BRe({event_id:t,email:c.toLowerCase(),amount:n.price,currency:"AUD",status:"completed",payment_method:"demo",completed_at:new Date().toISOString(),buyer_lat:se?.lat,buyer_lng:se?.lng,distance_from_venue_km:se?.distance_km}),e(`/watch/${t}?email=${encodeURIComponent(c)}`);else{const{data:Re,error:it}=await Rr.functions.invoke("livestream_checkout",{body:{event_id:t,email:c,buyer_lat:se?.lat,buyer_lng:se?.lng,distance_from_venue_km:se?.distance_km}});if(it)throw it;if(Re.demo&&Re.redirect)window.location.href=Re.redirect;else if(Re.url)window.location.href=Re.url;else throw new Error(Re.error||"Checkout failed")}}catch(Re){g(Re.message||"Purchase failed. Please try again.")}finally{A(!1)}};if(l)return a.jsx("div",{className:"min-h-[60vh] flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-dark-700 border-t-red-500 mx-auto"}),a.jsx(qf,{className:"absolute inset-0 m-auto w-6 h-6 text-red-500 animate-pulse"})]}),a.jsx("p",{className:"text-gray-400 mt-4",children:"Loading event..."})]})});if(p&&!n)return a.jsx("div",{className:"min-h-[60vh] flex items-center justify-center p-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx(dB,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),a.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Event Not Found"}),a.jsx("p",{className:"text-gray-400",children:p})]})});if(N&&n?.geo_blocking_enabled)return a.jsx("div",{className:"min-h-[60vh] flex items-center justify-center p-4",children:a.jsxs("div",{className:"max-w-md w-full relative",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-red-500/20 to-orange-500/20 blur-2xl rounded-3xl"}),a.jsxs("div",{className:"relative bg-dark-900/95 backdrop-blur-xl rounded-2xl border border-dark-700/50 p-8 text-center",children:[a.jsx("div",{className:"w-20 h-20 mx-auto mb-6 rounded-full bg-gradient-to-br from-red-500/20 to-orange-500/20 flex items-center justify-center",children:a.jsx(lhe,{className:"w-10 h-10 text-red-500"})}),a.jsx("h2",{className:"text-2xl font-bold text-white mb-3",children:"Location Verification"}),a.jsx("p",{className:"text-gray-400 mb-4",children:"To protect ticket sales at the venue, we verify your location before streaming."}),a.jsxs("p",{className:"text-gray-500 text-sm mb-6",children:["Online streaming is restricted within ",n.geo_radius_km||50,"km of ",n.venue,"."]}),a.jsxs("label",{className:"flex items-start gap-3 text-left mb-6 cursor-pointer group",children:[a.jsx("div",{className:"relative mt-1",children:a.jsx("input",{type:"checkbox",checked:we,onChange:Me=>Ce(Me.target.checked),className:"w-5 h-5 rounded border-dark-600 bg-dark-800 text-red-500 focus:ring-red-500 focus:ring-offset-dark-900 cursor-pointer"})}),a.jsxs("span",{className:"text-gray-400 text-sm group-hover:text-gray-300 transition-colors",children:["I agree to the"," ",a.jsx("a",{href:"/#/privacy",target:"_blank",className:"text-red-500 hover:text-red-400 underline",children:"Privacy Policy"})," ","and"," ",a.jsx("a",{href:"/#/terms",target:"_blank",className:"text-red-500 hover:text-red-400 underline",children:"Terms of Service"})]})]}),a.jsxs("button",{onClick:ae,disabled:!we,className:"w-full py-4 bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 disabled:from-dark-700 disabled:to-dark-700 disabled:cursor-not-allowed text-white font-bold rounded-xl transition-all duration-300 flex items-center justify-center gap-2 shadow-lg shadow-red-500/25 disabled:shadow-none",children:[a.jsx(th,{className:"w-5 h-5"}),"Enable Location Access"]}),a.jsx("p",{className:"text-gray-600 text-xs mt-4",children:'Click "Allow" when your browser asks for permission'})]})]})});if(U&&n?.geo_blocking_enabled)return a.jsx("div",{className:"min-h-[60vh] flex items-center justify-center p-4",children:a.jsxs("div",{className:"max-w-md w-full bg-dark-900/95 backdrop-blur-xl rounded-2xl border border-dark-700/50 p-8 text-center",children:[a.jsx(dB,{className:"w-16 h-16 text-yellow-500 mx-auto mb-4"}),a.jsx("h2",{className:"text-2xl font-bold text-white mb-3",children:"Location Access Blocked"}),a.jsx("p",{className:"text-gray-400 mb-4",children:"Location access is required to verify you're not at the venue."}),a.jsxs("div",{className:"bg-dark-800/50 rounded-xl p-4 mb-6 text-left border border-dark-700/50",children:[a.jsx("p",{className:"text-white font-semibold mb-2",children:"To enable location:"}),a.jsxs("ol",{className:"text-gray-400 text-sm space-y-2",children:[a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-red-500 font-bold",children:"1."}),"Click the  icon in your address bar"]}),a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-red-500 font-bold",children:"2."}),'Find "Location" and change it to "Allow"']}),a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-red-500 font-bold",children:"3."}),"Click the button below to try again"]})]})]}),a.jsx("button",{onClick:()=>{K(!1),I(!0)},className:"w-full py-4 bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white font-bold rounded-xl transition-all duration-300 shadow-lg shadow-red-500/25",children:"Try Again"})]})});if(T)return a.jsx("div",{className:"min-h-[60vh] flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-dark-700 border-t-red-500 mx-auto"}),a.jsx(th,{className:"absolute inset-0 m-auto w-6 h-6 text-red-500"})]}),a.jsx("p",{className:"text-gray-400 mt-4",children:"Verifying your location..."}),a.jsx("p",{className:"text-gray-600 text-sm mt-2",children:"This only takes a moment"})]})});if(y)return a.jsx("div",{className:"min-h-[60vh] flex items-center justify-center p-4",children:a.jsxs("div",{className:"max-w-md w-full relative",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-yellow-500/10 to-orange-500/10 blur-2xl rounded-3xl"}),a.jsxs("div",{className:"relative bg-dark-900/95 backdrop-blur-xl rounded-2xl border border-dark-700/50 p-8 text-center",children:[a.jsx("div",{className:"w-20 h-20 mx-auto mb-6 rounded-full bg-gradient-to-br from-yellow-500/20 to-orange-500/20 flex items-center justify-center",children:a.jsx(th,{className:"w-10 h-10 text-yellow-500"})}),a.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"You're Close to the Venue!"}),a.jsxs("p",{className:"text-gray-400 mb-4",children:["Online streaming is not available within ",n.geo_radius_km||50,"km of the venue."]}),w?.user_location&&a.jsxs("p",{className:"text-gray-500 text-sm mb-4",children:["Distance from venue: ",a.jsxs("span",{className:"text-white font-semibold",children:[w.distance_km,"km"]})]}),a.jsxs("div",{className:"bg-dark-800/50 rounded-xl p-4 mb-6 border border-dark-700/50",children:[a.jsx("p",{className:"text-gray-400 text-sm mb-2",children:"Great news  watch live in person!"}),a.jsx("p",{className:"text-white font-semibold",children:n.venue})]}),n.ticket_url?a.jsxs("a",{href:n.ticket_url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-8 py-4 bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white font-bold rounded-xl transition-all duration-300 shadow-lg shadow-red-500/25",children:[a.jsx(gf,{className:"w-5 h-5"}),"Get Tickets"]}):a.jsx("p",{className:"text-gray-500",children:"Contact the venue for ticket information."})]})]})});const be=Me=>{if(!Me)return new Date;const Re=Me.replace(/[Z+].*$/,"").replace(/\.000$/,"");return new Date(Re)},de=be(n.start_time),xe=n.is_live||n.status==="live",je=n.status==="ended"||be(n.end_time)<new Date;return a.jsxs(a.Fragment,{children:[a.jsx(qFe,{title:`${n.title} - ${n.organization}`,description:`Watch ${n.title} live! ${de.toLocaleDateString("en-AU")} at ${n.venue}. Stream access $${n.price} AUD.`,image:n.thumbnail_url,type:"video.other"}),a.jsx("div",{className:"py-12 md:py-16 px-4",children:a.jsx("div",{className:"max-w-6xl mx-auto",children:a.jsxs("div",{className:"grid lg:grid-cols-5 gap-8 lg:gap-12",children:[a.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[a.jsxs("div",{className:"relative aspect-video bg-dark-800 rounded-2xl overflow-hidden group",children:[n.thumbnail_url?a.jsx("img",{src:n.thumbnail_url,alt:n.title,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"}):a.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-dark-800 to-dark-900",children:a.jsx("span",{className:"text-8xl",children:""})}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-dark-900 via-transparent to-transparent opacity-60"}),xe&&a.jsx("div",{className:"absolute top-4 left-4",children:a.jsxs("div",{className:"px-4 py-2 bg-red-500 text-white font-bold rounded-full flex items-center gap-2 shadow-lg shadow-red-500/50",children:[a.jsx("span",{className:"w-2 h-2 bg-white rounded-full animate-pulse"}),"LIVE NOW"]})}),a.jsx("div",{className:"absolute bottom-4 left-4",children:a.jsx("span",{className:"px-3 py-1 bg-dark-900/80 backdrop-blur-sm text-white text-sm font-medium rounded-full border border-dark-700/50",children:n.organization})})]}),a.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-white mb-2",children:n.title}),a.jsxs("div",{className:"flex items-center gap-3 text-gray-400",children:[a.jsx($h,{className:"w-4 h-4"}),a.jsx("span",{children:n.organization}),w?.crew_bypass&&a.jsx("span",{className:"px-2 py-0.5 bg-green-500/20 text-green-400 text-xs font-medium rounded-full",children:"Crew Access"})]})]}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsx(XFe,{event:n}),a.jsx(YFe,{title:`Watch ${n.title} Live!`,description:`${n.organization} - ${de.toLocaleDateString("en-AU")}`})]})]}),!xe&&!je&&a.jsx("div",{className:"p-6 md:p-8 bg-dark-800/30 rounded-2xl border border-dark-700/50 backdrop-blur-sm",children:a.jsx(wne,{targetDate:n.start_time,onComplete:()=>De()})}),a.jsxs("div",{className:"grid sm:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"flex items-center gap-4 p-4 bg-dark-800/30 rounded-xl border border-dark-700/30",children:[a.jsx("div",{className:"w-12 h-12 rounded-xl bg-red-500/10 flex items-center justify-center",children:a.jsx(fc,{className:"w-6 h-6 text-red-500"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Date"}),a.jsx("p",{className:"text-white font-medium",children:de.toLocaleDateString("en-AU",{weekday:"short",day:"numeric",month:"short"})})]})]}),a.jsxs("div",{className:"flex items-center gap-4 p-4 bg-dark-800/30 rounded-xl border border-dark-700/30",children:[a.jsx("div",{className:"w-12 h-12 rounded-xl bg-red-500/10 flex items-center justify-center",children:a.jsx(DA,{className:"w-6 h-6 text-red-500"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Time"}),a.jsxs("p",{className:"text-white font-medium",children:[de.toLocaleTimeString("en-AU",{hour:"2-digit",minute:"2-digit"})," AEST"]})]})]}),a.jsxs("div",{className:"flex items-center gap-4 p-4 bg-dark-800/30 rounded-xl border border-dark-700/30 sm:col-span-1",children:[a.jsx("div",{className:"w-12 h-12 rounded-xl bg-red-500/10 flex items-center justify-center",children:a.jsx(th,{className:"w-6 h-6 text-red-500"})}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Venue"}),a.jsx("p",{className:"text-white font-medium truncate",children:n.venue})]})]})]}),n.description&&a.jsxs("div",{className:"p-6 bg-dark-800/20 rounded-2xl border border-dark-700/30",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx(kb,{className:"w-5 h-5 text-red-500"}),a.jsx("h3",{className:"text-lg font-semibold text-white",children:"About This Event"})]}),a.jsx("p",{className:"text-gray-400 leading-relaxed",children:n.description})]})]}),a.jsx("div",{className:"lg:col-span-2",children:a.jsx("div",{className:"sticky top-24",children:a.jsx(WFe,{price:n.price,currency:"AUD",email:c,onEmailChange:u,onPurchase:Oe,purchasing:f,error:p,demoMode:s.demo_mode,isLive:xe,isPast:je})})})]})})})]})}var JFe=Object.create,Ene=Object.defineProperty,eUe=Object.getOwnPropertyDescriptor,tUe=Object.getOwnPropertyNames,rUe=Object.getPrototypeOf,nUe=Object.prototype.hasOwnProperty,_ne=function(t,e){return function(){return t&&(e=t(t=0)),e}},Vh=function(t,e){return function(){return e||t((e={exports:{}}).exports,e),e.exports}},iUe=function(t,e,r,n){if(e&&typeof e=="object"||typeof e=="function")for(var i=tUe(e),s=0,o=i.length,c;s<o;s++)c=i[s],!nUe.call(t,c)&&c!==r&&Ene(t,c,{get:(function(u){return e[u]}).bind(null,c),enumerable:!(n=eUe(e,c))||n.enumerable});return t},nA=function(t,e,r){return r=t!=null?JFe(rUe(t)):{},iUe(!t||!t.__esModule?Ene(r,"default",{value:t,enumerable:!0}):r,t)},Zm=Vh(function(t,e){var r;typeof window<"u"?r=window:typeof global<"u"?r=global:typeof self<"u"?r=self:r={},e.exports=r});function jy(t,e){return e!=null&&typeof Symbol<"u"&&e[Symbol.hasInstance]?!!e[Symbol.hasInstance](t):jy(t,e)}var Ny=_ne(function(){Ny()});function Sne(t){"@swc/helpers - typeof";return t&&typeof Symbol<"u"&&t.constructor===Symbol?"symbol":typeof t}var Tne=_ne(function(){}),Cne=Vh(function(t,e){var r=Array.prototype.slice;e.exports=n;function n(i,s){for(("length"in i)||(i=[i]),i=r.call(i);i.length;){var o=i.shift(),c=s(o);if(c)return c;o.childNodes&&o.childNodes.length&&(i=r.call(o.childNodes).concat(i))}}}),sUe=Vh(function(t,e){Ny(),e.exports=r;function r(n,i){if(!jy(this,r))return new r(n,i);this.data=n,this.nodeValue=n,this.length=n.length,this.ownerDocument=i||null}r.prototype.nodeType=8,r.prototype.nodeName="#comment",r.prototype.toString=function(){return"[object Comment]"}}),aUe=Vh(function(t,e){Ny(),e.exports=r;function r(n,i){if(!jy(this,r))return new r(n);this.data=n||"",this.length=this.data.length,this.ownerDocument=i||null}r.prototype.type="DOMTextNode",r.prototype.nodeType=3,r.prototype.nodeName="#text",r.prototype.toString=function(){return this.data},r.prototype.replaceData=function(n,i,s){var o=this.data,c=o.substring(0,n),u=o.substring(n+i,o.length);this.data=c+s+u,this.length=this.data.length}}),jne=Vh(function(t,e){e.exports=r;function r(n){var i=this,s=n.type;n.target||(n.target=i),i.listeners||(i.listeners={});var o=i.listeners[s];if(o)return o.forEach(function(c){n.currentTarget=i,typeof c=="function"?c(n):c.handleEvent(n)});i.parentNode&&i.parentNode.dispatchEvent(n)}}),Nne=Vh(function(t,e){e.exports=r;function r(n,i){var s=this;s.listeners||(s.listeners={}),s.listeners[n]||(s.listeners[n]=[]),s.listeners[n].indexOf(i)===-1&&s.listeners[n].push(i)}}),kne=Vh(function(t,e){e.exports=r;function r(n,i){var s=this;if(s.listeners&&s.listeners[n]){var o=s.listeners[n],c=o.indexOf(i);c!==-1&&o.splice(c,1)}}}),oUe=Vh(function(t,e){Tne(),e.exports=n;var r=["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"];function n(A){switch(A.nodeType){case 3:return d(A.data);case 8:return"<!--"+A.data+"-->";default:return i(A)}}function i(A){var p=[],g=A.tagName;return A.namespaceURI==="http://www.w3.org/1999/xhtml"&&(g=g.toLowerCase()),p.push("<"+g+l(A)+c(A)),r.indexOf(g)>-1?p.push(" />"):(p.push(">"),A.childNodes.length?p.push.apply(p,A.childNodes.map(n)):A.textContent||A.innerText?p.push(d(A.textContent||A.innerText)):A.innerHTML&&p.push(A.innerHTML),p.push("</"+g+">")),p.join("")}function s(A,p){var g=Sne(A[p]);return p==="style"&&Object.keys(A.style).length>0?!0:A.hasOwnProperty(p)&&(g==="string"||g==="boolean"||g==="number")&&p!=="nodeName"&&p!=="className"&&p!=="tagName"&&p!=="textContent"&&p!=="innerText"&&p!=="namespaceURI"&&p!=="innerHTML"}function o(A){if(typeof A=="string")return A;var p="";return Object.keys(A).forEach(function(g){var y=A[g];g=g.replace(/[A-Z]/g,function(x){return"-"+x.toLowerCase()}),p+=g+":"+y+";"}),p}function c(A){var p=A.dataset,g=[];for(var y in p)g.push({name:"data-"+y,value:p[y]});return g.length?u(g):""}function u(A){var p=[];return A.forEach(function(g){var y=g.name,x=g.value;y==="style"&&(x=o(x)),p.push(y+'="'+f(x)+'"')}),p.length?" "+p.join(" "):""}function l(A){var p=[];for(var g in A)s(A,g)&&p.push({name:g,value:A[g]});for(var y in A._attributes)for(var x in A._attributes[y]){var w=A._attributes[y][x],E=(w.prefix?w.prefix+":":"")+x;p.push({name:E,value:w.value})}return A.className&&p.push({name:"class",value:A.className}),p.length?u(p):""}function d(A){var p="";return typeof A=="string"?p=A:A&&(p=A.toString()),p.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function f(A){return d(A).replace(/"/g,"&quot;")}}),Ine=Vh(function(t,e){Ny();var r=Cne(),n=jne(),i=Nne(),s=kne(),o=oUe(),c="http://www.w3.org/1999/xhtml";e.exports=u;function u(l,d,f){if(!jy(this,u))return new u(l);var A=f===void 0?c:f||null;this.tagName=A===c?String(l).toUpperCase():l,this.nodeName=this.tagName,this.className="",this.dataset={},this.childNodes=[],this.parentNode=null,this.style={},this.ownerDocument=d||null,this.namespaceURI=A,this._attributes={},this.tagName==="INPUT"&&(this.type="text")}u.prototype.type="DOMElement",u.prototype.nodeType=1,u.prototype.appendChild=function(l){return l.parentNode&&l.parentNode.removeChild(l),this.childNodes.push(l),l.parentNode=this,l},u.prototype.replaceChild=function(l,d){l.parentNode&&l.parentNode.removeChild(l);var f=this.childNodes.indexOf(d);return d.parentNode=null,this.childNodes[f]=l,l.parentNode=this,d},u.prototype.removeChild=function(l){var d=this.childNodes.indexOf(l);return this.childNodes.splice(d,1),l.parentNode=null,l},u.prototype.insertBefore=function(l,d){l.parentNode&&l.parentNode.removeChild(l);var f=d==null?-1:this.childNodes.indexOf(d);return f>-1?this.childNodes.splice(f,0,l):this.childNodes.push(l),l.parentNode=this,l},u.prototype.setAttributeNS=function(l,d,f){var A=null,p=d,g=d.indexOf(":");if(g>-1&&(A=d.substr(0,g),p=d.substr(g+1)),this.tagName==="INPUT"&&d==="type")this.type=f;else{var y=this._attributes[l]||(this._attributes[l]={});y[p]={value:f,prefix:A}}},u.prototype.getAttributeNS=function(l,d){var f=this._attributes[l],A=f&&f[d]&&f[d].value;return this.tagName==="INPUT"&&d==="type"?this.type:typeof A!="string"?null:A},u.prototype.removeAttributeNS=function(l,d){var f=this._attributes[l];f&&delete f[d]},u.prototype.hasAttributeNS=function(l,d){var f=this._attributes[l];return!!f&&d in f},u.prototype.setAttribute=function(l,d){return this.setAttributeNS(null,l,d)},u.prototype.getAttribute=function(l){return this.getAttributeNS(null,l)},u.prototype.removeAttribute=function(l){return this.removeAttributeNS(null,l)},u.prototype.hasAttribute=function(l){return this.hasAttributeNS(null,l)},u.prototype.removeEventListener=s,u.prototype.addEventListener=i,u.prototype.dispatchEvent=n,u.prototype.focus=function(){},u.prototype.toString=function(){return o(this)},u.prototype.getElementsByClassName=function(l){var d=l.split(" "),f=[];return r(this,function(A){if(A.nodeType===1){var p=A.className||"",g=p.split(" ");d.every(function(y){return g.indexOf(y)!==-1})&&f.push(A)}}),f},u.prototype.getElementsByTagName=function(l){l=l.toLowerCase();var d=[];return r(this.childNodes,function(f){f.nodeType===1&&(l==="*"||f.tagName.toLowerCase()===l)&&d.push(f)}),d},u.prototype.contains=function(l){return r(this,function(d){return l===d})||!1}}),lUe=Vh(function(t,e){Ny();var r=Ine();e.exports=n;function n(i){if(!jy(this,n))return new n;this.childNodes=[],this.parentNode=null,this.ownerDocument=i||null}n.prototype.type="DocumentFragment",n.prototype.nodeType=11,n.prototype.nodeName="#document-fragment",n.prototype.appendChild=r.prototype.appendChild,n.prototype.replaceChild=r.prototype.replaceChild,n.prototype.removeChild=r.prototype.removeChild,n.prototype.toString=function(){return this.childNodes.map(function(i){return String(i)}).join("")}}),cUe=Vh(function(t,e){e.exports=r;function r(n){}r.prototype.initEvent=function(n,i,s){this.type=n,this.bubbles=i,this.cancelable=s},r.prototype.preventDefault=function(){}}),uUe=Vh(function(t,e){Ny();var r=Cne(),n=sUe(),i=aUe(),s=Ine(),o=lUe(),c=cUe(),u=jne(),l=Nne(),d=kne();e.exports=f;function f(){if(!jy(this,f))return new f;this.head=this.createElement("head"),this.body=this.createElement("body"),this.documentElement=this.createElement("html"),this.documentElement.appendChild(this.head),this.documentElement.appendChild(this.body),this.childNodes=[this.documentElement],this.nodeType=9}var A=f.prototype;A.createTextNode=function(p){return new i(p,this)},A.createElementNS=function(p,g){var y=p===null?null:String(p);return new s(g,this,y)},A.createElement=function(p){return new s(p,this)},A.createDocumentFragment=function(){return new o(this)},A.createEvent=function(p){return new c(p)},A.createComment=function(p){return new n(p,this)},A.getElementById=function(p){p=String(p);var g=r(this.childNodes,function(y){if(String(y.id)===p)return y});return g||null},A.getElementsByClassName=s.prototype.getElementsByClassName,A.getElementsByTagName=s.prototype.getElementsByTagName,A.contains=s.prototype.contains,A.removeEventListener=d,A.addEventListener=l,A.dispatchEvent=u}),dUe=Vh(function(t,e){var r=uUe();e.exports=new r}),Lne=Vh(function(t,e){var r=typeof global<"u"?global:typeof window<"u"?window:{},n=dUe(),i;typeof document<"u"?i=document:(i=r["__GLOBAL_DOCUMENT_CACHE@4"],i||(i=r["__GLOBAL_DOCUMENT_CACHE@4"]=n)),e.exports=i});function hUe(t){if(Array.isArray(t))return t}function fUe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n=[],i=!0,s=!1,o,c;try{for(r=r.call(t);!(i=(o=r.next()).done)&&(n.push(o.value),!(e&&n.length===e));i=!0);}catch(u){s=!0,c=u}finally{try{!i&&r.return!=null&&r.return()}finally{if(s)throw c}}return n}}function AUe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eO(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Bne(t,e){if(t){if(typeof t=="string")return eO(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(r);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eO(t,e)}}function rg(t,e){return hUe(t)||fUe(t,e)||Bne(t,e)||AUe()}var nE=nA(Zm()),Xz=nA(Zm()),mUe=nA(Zm()),pUe={now:function(){var t=mUe.default.performance,e=t&&t.timing,r=e&&e.navigationStart,n=typeof r=="number"&&typeof t.now=="function"?r+t.now():Date.now();return Math.round(n)}},md=pUe,XE=function(){var t,e,r;if(typeof((t=Xz.default.crypto)===null||t===void 0?void 0:t.getRandomValues)=="function"){r=new Uint8Array(32),Xz.default.crypto.getRandomValues(r);for(var n=0;n<32;n++)r[n]=r[n]%16}else{r=[];for(var i=0;i<32;i++)r[i]=Math.random()*16|0}var s=0;e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(u){var l=u==="x"?r[s]:r[s]&3|8;return s++,l.toString(16)});var o=md.now(),c=o?.toString(16).substring(3);return c?e.substring(0,28)+c:e},Pne=function(){return("000000"+(Math.random()*Math.pow(36,6)<<0).toString(36)).slice(-6)},yA=function(t){if(t&&typeof t.nodeName<"u")return t.muxId||(t.muxId=Pne()),t.muxId;var e;try{e=document.querySelector(t)}catch{}return e&&!e.muxId&&(e.muxId=t),e?.muxId||t},Uj=function(t){var e;t&&typeof t.nodeName<"u"?(e=t,t=yA(e)):e=document.querySelector(t);var r=e&&e.nodeName?e.nodeName.toLowerCase():"";return[e,t,r]};function gUe(t){if(Array.isArray(t))return eO(t)}function vUe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function yUe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xA(t){return gUe(t)||vUe(t)||Bne(t)||yUe()}var Lv={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4},xUe=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3,r,n,i,s,o,c=[console,t],u=(r=console.trace).bind.apply(r,xA(c)),l=(n=console.info).bind.apply(n,xA(c)),d=(i=console.debug).bind.apply(i,xA(c)),f=(s=console.warn).bind.apply(s,xA(c)),A=(o=console.error).bind.apply(o,xA(c)),p=e;return{trace:function(){for(var g=arguments.length,y=new Array(g),x=0;x<g;x++)y[x]=arguments[x];if(!(p>Lv.TRACE))return u.apply(void 0,xA(y))},debug:function(){for(var g=arguments.length,y=new Array(g),x=0;x<g;x++)y[x]=arguments[x];if(!(p>Lv.DEBUG))return d.apply(void 0,xA(y))},info:function(){for(var g=arguments.length,y=new Array(g),x=0;x<g;x++)y[x]=arguments[x];if(!(p>Lv.INFO))return l.apply(void 0,xA(y))},warn:function(){for(var g=arguments.length,y=new Array(g),x=0;x<g;x++)y[x]=arguments[x];if(!(p>Lv.WARN))return f.apply(void 0,xA(y))},error:function(){for(var g=arguments.length,y=new Array(g),x=0;x<g;x++)y[x]=arguments[x];if(!(p>Lv.ERROR))return A.apply(void 0,xA(y))},get level(){return p},set level(g){g!==this.level&&(p=g??e)}}},ll=xUe("[mux]"),u4=nA(Zm());function tO(){var t=u4.default.doNotTrack||u4.default.navigator&&u4.default.navigator.doNotTrack;return t==="1"}function ms(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}Ny();function xu(t,e){if(!jy(t,e))throw new TypeError("Cannot call a class as a function")}function bUe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function QA(t,e,r){return e&&bUe(t.prototype,e),t}function In(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function $b(t){return $b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},$b(t)}function wUe(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&(t=$b(t),t!==null););return t}function sT(t,e,r){return typeof Reflect<"u"&&Reflect.get?sT=Reflect.get:sT=function(n,i,s){var o=wUe(n,i);if(o){var c=Object.getOwnPropertyDescriptor(o,i);return c.get?c.get.call(s||n):c.value}},sT(t,e,r||t)}function rO(t,e){return rO=Object.setPrototypeOf||function(r,n){return r.__proto__=n,r},rO(t,e)}function EUe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&rO(t,e)}function _Ue(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,s;for(s=0;s<n.length;s++)i=n[s],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function SUe(t,e){if(t==null)return{};var r=_Ue(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function TUe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}Tne();function CUe(t,e){return e&&(Sne(e)==="object"||typeof e=="function")?e:ms(t)}function jUe(t){var e=TUe();return function(){var r=$b(t),n;if(e){var i=$b(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return CUe(this,n)}}var NA=function(t){return ZE(t)[0]},ZE=function(t){if(typeof t!="string"||t==="")return["localhost"];var e=/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,r=t.match(e)||[],n=r[4],i;return n&&(i=(n.match(/[^\.]+\.[^\.]+$/)||[])[0]),[n,i]},d4=nA(Zm()),NUe={exists:function(){var t=d4.default.performance,e=t&&t.timing;return e!==void 0},domContentLoadedEventEnd:function(){var t=d4.default.performance,e=t&&t.timing;return e&&e.domContentLoadedEventEnd},navigationStart:function(){var t=d4.default.performance,e=t&&t.timing;return e&&e.navigationStart}},$j=NUe;function $u(t,e,r){r=r===void 0?1:r,t[e]=t[e]||0,t[e]+=r}function Hj(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable}))),n.forEach(function(i){In(t,i,r[i])})}return t}function kUe(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r.push.apply(r,n)}return r}function oF(t,e){return e=e??{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):kUe(Object(e)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}),t}var IUe=["x-cdn","content-type"],One=["x-request-id","cf-ray","x-amz-cf-id","x-akamai-request-id"],LUe=IUe.concat(One);function lF(t){t=t||"";var e={},r=t.trim().split(/[\r\n]+/);return r.forEach(function(n){if(n){var i=n.split(": "),s=i.shift();s&&(LUe.indexOf(s.toLowerCase())>=0||s.toLowerCase().indexOf("x-litix-")===0)&&(e[s]=i.join(": "))}}),e}function Qj(t){if(t){var e=One.find(function(r){return t[r]!==void 0});return e?t[e]:void 0}}var BUe=function(t){var e={};for(var r in t){var n=t[r],i=n["DATA-ID"].search("io.litix.data.");if(i!==-1){var s=n["DATA-ID"].replace("io.litix.data.","");e[s]=n.VALUE}}return e},Rne=BUe,cS=function(t){if(!t)return{};var e=$j.navigationStart(),r=t.loading,n=r?r.start:t.trequest,i=r?r.first:t.tfirst,s=r?r.end:t.tload;return{bytesLoaded:t.total,requestStart:Math.round(e+n),responseStart:Math.round(e+i),responseEnd:Math.round(e+s)}},J1=function(t){if(!(!t||typeof t.getAllResponseHeaders!="function"))return lF(t.getAllResponseHeaders())},PUe=function(t,e,r){var n=arguments.length>4?arguments[4]:void 0,i=t.log,s=t.utils.secondsToMs,o=function(x){var w=parseInt(n.version),E;return w===1&&x.programDateTime!==null&&(E=x.programDateTime),w===0&&x.pdt!==null&&(E=x.pdt),E};if(!$j.exists()){i.warn("performance timing not supported. Not tracking HLS.js.");return}var c=function(x,w){return t.emit(e,x,w)},u=function(x,w){var E=w.levels,T=w.audioTracks,C=w.url,N=w.stats,I=w.networkDetails,U=w.sessionData,K={},Y={};E.forEach(function(ve,ne){K[ne]={width:ve.width,height:ve.height,bitrate:ve.bitrate,attrs:ve.attrs}}),T.forEach(function(ve,ne){Y[ne]={name:ve.name,language:ve.lang,bitrate:ve.bitrate}});var re=cS(N),se=re.bytesLoaded,Ae=re.requestStart,we=re.responseStart,Ce=re.responseEnd;c("requestcompleted",oF(Hj({},Rne(U)),{request_event_type:x,request_bytes_loaded:se,request_start:Ae,request_response_start:we,request_response_end:Ce,request_type:"manifest",request_hostname:NA(C),request_response_headers:J1(I),request_rendition_lists:{media:K,audio:Y,video:{}}}))};r.on(n.Events.MANIFEST_LOADED,u);var l=function(x,w){var E=w.details,T=w.level,C=w.networkDetails,N=w.stats,I=cS(N),U=I.bytesLoaded,K=I.requestStart,Y=I.responseStart,re=I.responseEnd,se=E.fragments[E.fragments.length-1],Ae=o(se)+s(se.duration);c("requestcompleted",{request_event_type:x,request_bytes_loaded:U,request_start:K,request_response_start:Y,request_response_end:re,request_current_level:T,request_type:"manifest",request_hostname:NA(E.url),request_response_headers:J1(C),video_holdback:E.holdBack&&s(E.holdBack),video_part_holdback:E.partHoldBack&&s(E.partHoldBack),video_part_target_duration:E.partTarget&&s(E.partTarget),video_target_duration:E.targetduration&&s(E.targetduration),video_source_is_live:E.live,player_manifest_newest_program_time:isNaN(Ae)?void 0:Ae})};r.on(n.Events.LEVEL_LOADED,l);var d=function(x,w){var E=w.details,T=w.networkDetails,C=w.stats,N=cS(C),I=N.bytesLoaded,U=N.requestStart,K=N.responseStart,Y=N.responseEnd;c("requestcompleted",{request_event_type:x,request_bytes_loaded:I,request_start:U,request_response_start:K,request_response_end:Y,request_type:"manifest",request_hostname:NA(E.url),request_response_headers:J1(T)})};r.on(n.Events.AUDIO_TRACK_LOADED,d);var f=function(x,w){var E=w.stats,T=w.networkDetails,C=w.frag;E=E||C.stats;var N=cS(E),I=N.bytesLoaded,U=N.requestStart,K=N.responseStart,Y=N.responseEnd,re=T?J1(T):void 0,se={request_event_type:x,request_bytes_loaded:I,request_start:U,request_response_start:K,request_response_end:Y,request_hostname:T?NA(T.responseURL):void 0,request_id:re?Qj(re):void 0,request_response_headers:re,request_media_duration:C.duration,request_url:T?.responseURL};C.type==="main"?(se.request_type="media",se.request_current_level=C.level,se.request_video_width=(r.levels[C.level]||{}).width,se.request_video_height=(r.levels[C.level]||{}).height,se.request_labeled_bitrate=(r.levels[C.level]||{}).bitrate):se.request_type=C.type,c("requestcompleted",se)};r.on(n.Events.FRAG_LOADED,f);var A=function(x,w){var E=w.frag,T=E.start,C=o(E),N={currentFragmentPDT:C,currentFragmentStart:s(T)};c("fragmentchange",N)};r.on(n.Events.FRAG_CHANGED,A);var p=function(x,w){var E=w.type,T=w.details,C=w.response,N=w.fatal,I=w.frag,U=w.networkDetails,K=I?.url||w.url||"",Y=U?J1(U):void 0;if((T===n.ErrorDetails.MANIFEST_LOAD_ERROR||T===n.ErrorDetails.MANIFEST_LOAD_TIMEOUT||T===n.ErrorDetails.FRAG_LOAD_ERROR||T===n.ErrorDetails.FRAG_LOAD_TIMEOUT||T===n.ErrorDetails.LEVEL_LOAD_ERROR||T===n.ErrorDetails.LEVEL_LOAD_TIMEOUT||T===n.ErrorDetails.AUDIO_TRACK_LOAD_ERROR||T===n.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT||T===n.ErrorDetails.SUBTITLE_LOAD_ERROR||T===n.ErrorDetails.SUBTITLE_LOAD_TIMEOUT||T===n.ErrorDetails.KEY_LOAD_ERROR||T===n.ErrorDetails.KEY_LOAD_TIMEOUT)&&c("requestfailed",{request_error:T,request_url:K,request_hostname:NA(K),request_id:Y?Qj(Y):void 0,request_type:T===n.ErrorDetails.FRAG_LOAD_ERROR||T===n.ErrorDetails.FRAG_LOAD_TIMEOUT?"media":T===n.ErrorDetails.AUDIO_TRACK_LOAD_ERROR||T===n.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT?"audio":T===n.ErrorDetails.SUBTITLE_LOAD_ERROR||T===n.ErrorDetails.SUBTITLE_LOAD_TIMEOUT?"subtitle":T===n.ErrorDetails.KEY_LOAD_ERROR||T===n.ErrorDetails.KEY_LOAD_TIMEOUT?"encryption":"manifest",request_error_code:C?.code,request_error_text:C?.text}),N){var re,se="".concat(K?"url: ".concat(K,`
`):"")+"".concat(C&&(C.code||C.text)?"response: ".concat(C.code,", ").concat(C.text,`
`):"")+"".concat(w.reason?"failure reason: ".concat(w.reason,`
`):"")+"".concat(w.level?"level: ".concat(w.level,`
`):"")+"".concat(w.parent?"parent stream controller: ".concat(w.parent,`
`):"")+"".concat(w.buffer?"buffer length: ".concat(w.buffer,`
`):"")+"".concat(w.error?"error: ".concat(w.error,`
`):"")+"".concat(w.event?"event: ".concat(w.event,`
`):"")+"".concat(w.err?"error message: ".concat((re=w.err)===null||re===void 0?void 0:re.message,`
`):"");c("error",{player_error_code:E,player_error_message:T,player_error_context:se})}};r.on(n.Events.ERROR,p);var g=function(x,w){var E=w.frag,T=E&&E._url||"";c("requestcanceled",{request_event_type:x,request_url:T,request_type:"media",request_hostname:NA(T)})};r.on(n.Events.FRAG_LOAD_EMERGENCY_ABORTED,g);var y=function(x,w){var E=w.level,T=r.levels[E];if(T&&T.attrs&&T.attrs.BANDWIDTH){var C=T.attrs.BANDWIDTH,N,I=parseFloat(T.attrs["FRAME-RATE"]);isNaN(I)||(N=I),C?c("renditionchange",{video_source_fps:N,video_source_bitrate:C,video_source_width:T.width,video_source_height:T.height,video_source_rendition_name:T.name,video_source_codec:T?.videoCodec}):i.warn("missing BANDWIDTH from HLS manifest parsed by HLS.js")}};r.on(n.Events.LEVEL_SWITCHED,y),r._stopMuxMonitor=function(){r.off(n.Events.MANIFEST_LOADED,u),r.off(n.Events.LEVEL_LOADED,l),r.off(n.Events.AUDIO_TRACK_LOADED,d),r.off(n.Events.FRAG_LOADED,f),r.off(n.Events.FRAG_CHANGED,A),r.off(n.Events.ERROR,p),r.off(n.Events.FRAG_LOAD_EMERGENCY_ABORTED,g),r.off(n.Events.LEVEL_SWITCHED,y),r.off(n.Events.DESTROYING,r._stopMuxMonitor),delete r._stopMuxMonitor},r.on(n.Events.DESTROYING,r._stopMuxMonitor)},OUe=function(t){t&&typeof t._stopMuxMonitor=="function"&&t._stopMuxMonitor()},Zz=function(t,e){if(!t||!t.requestEndDate)return{};var r=NA(t.url),n=t.url,i=t.bytesLoaded,s=new Date(t.requestStartDate).getTime(),o=new Date(t.firstByteDate).getTime(),c=new Date(t.requestEndDate).getTime(),u=isNaN(t.duration)?0:t.duration,l=typeof e.getMetricsFor=="function"?e.getMetricsFor(t.mediaType).HttpList:e.getDashMetrics().getHttpRequests(t.mediaType),d;l.length>0&&(d=lF(l[l.length-1]._responseHeaders||""));var f=d?Qj(d):void 0;return{requestStart:s,requestResponseStart:o,requestResponseEnd:c,requestBytesLoaded:i,requestResponseHeaders:d,requestMediaDuration:u,requestHostname:r,requestUrl:n,requestId:f}},RUe=function(t,e){var r=e.getQualityFor(t),n=e.getCurrentTrackFor(t).bitrateList;return n?{currentLevel:r,renditionWidth:n[r].width||null,renditionHeight:n[r].height||null,renditionBitrate:n[r].bandwidth}:{}},DUe=function(t){var e;return(e=t.match(/.*codecs\*?="(.*)"/))===null||e===void 0?void 0:e[1]},MUe=function(t){try{var e,r,n=(r=t.getVersion)===null||r===void 0||(e=r.call(t))===null||e===void 0?void 0:e.split(".").map(function(i){return parseInt(i)})[0];return n}catch{return!1}},FUe=function(t,e,r){var n=t.log;if(!r||!r.on){n.warn("Invalid dash.js player reference. Monitoring blocked.");return}var i=MUe(r),s=function(E,T){return t.emit(e,E,T)},o=function(E){var T=E.type,C=E.data,N=(C||{}).url;s("requestcompleted",{request_event_type:T,request_start:0,request_response_start:0,request_response_end:0,request_bytes_loaded:-1,request_type:"manifest",request_hostname:NA(N),request_url:N})};r.on("manifestLoaded",o);var c={},u=function(E){if(typeof E.getRequests!="function")return null;var T=E.getRequests({state:"executed"});return T.length===0?null:T[T.length-1]},l=function(E){var T=E.type,C=E.fragmentModel,N=E.chunk,I=u(C);d({type:T,request:I,chunk:N})},d=function(E){var T=E.type,C=E.chunk,N=E.request,I=(C||{}).mediaInfo,U=I||{},K=U.type,Y=U.bitrateList;Y=Y||[];var re={};Y.forEach(function(Oe,be){re[be]={},re[be].width=Oe.width,re[be].height=Oe.height,re[be].bitrate=Oe.bandwidth,re[be].attrs={}}),K==="video"?c.video=re:K==="audio"?c.audio=re:c.media=re;var se=Zz(N,r),Ae=se.requestStart,we=se.requestResponseStart,Ce=se.requestResponseEnd,ve=se.requestResponseHeaders,ne=se.requestMediaDuration,ce=se.requestHostname,ae=se.requestUrl,De=se.requestId;s("requestcompleted",{request_event_type:T,request_start:Ae,request_response_start:we,request_response_end:Ce,request_bytes_loaded:-1,request_type:K+"_init",request_response_headers:ve,request_hostname:ce,request_id:De,request_url:ae,request_media_duration:ne,request_rendition_lists:c})};i>=4?r.on("initFragmentLoaded",d):r.on("initFragmentLoaded",l);var f=function(E){var T=E.type,C=E.fragmentModel,N=E.chunk,I=u(C);A({type:T,request:I,chunk:N})},A=function(E){var T=E.type,C=E.chunk,N=E.request,I=C||{},U=I.mediaInfo,K=I.start,Y=U||{},re=Y.type,se=Zz(N,r),Ae=se.requestStart,we=se.requestResponseStart,Ce=se.requestResponseEnd,ve=se.requestBytesLoaded,ne=se.requestResponseHeaders,ce=se.requestMediaDuration,ae=se.requestHostname,De=se.requestUrl,Oe=se.requestId,be=RUe(re,r),de=be.currentLevel,xe=be.renditionWidth,je=be.renditionHeight,Me=be.renditionBitrate;s("requestcompleted",{request_event_type:T,request_start:Ae,request_response_start:we,request_response_end:Ce,request_bytes_loaded:ve,request_type:re,request_response_headers:ne,request_hostname:ae,request_id:Oe,request_url:De,request_media_start_time:K,request_media_duration:ce,request_current_level:de,request_labeled_bitrate:Me,request_video_width:xe,request_video_height:je})};i>=4?r.on("mediaFragmentLoaded",A):r.on("mediaFragmentLoaded",f);var p={video:void 0,audio:void 0,totalBitrate:void 0},g=function(){if(p.video&&typeof p.video.bitrate=="number"){if(!(p.video.width&&p.video.height)){n.warn("have bitrate info for video but missing width/height");return}var E=p.video.bitrate;if(p.audio&&typeof p.audio.bitrate=="number"&&(E+=p.audio.bitrate),E!==p.totalBitrate)return p.totalBitrate=E,{video_source_bitrate:E,video_source_height:p.video.height,video_source_width:p.video.width,video_source_codec:DUe(p.video.codec)}}},y=function(E,T,C){if(typeof E.newQuality!="number"){n.warn("missing evt.newQuality in qualityChangeRendered event",E);return}var N=E.mediaType;if(N==="audio"||N==="video"){var I=r.getBitrateInfoListFor(N).find(function(K){var Y=K.qualityIndex;return Y===E.newQuality});if(!(I&&typeof I.bitrate=="number")){n.warn("missing bitrate info for ".concat(N));return}p[N]=oF(Hj({},I),{codec:r.getCurrentTrackFor(N).codec});var U=g();U&&s("renditionchange",U)}};r.on("qualityChangeRendered",y);var x=function(E){var T=E.request,C=E.mediaType;T=T||{},s("requestcanceled",{request_event_type:T.type+"_"+T.action,request_url:T.url,request_type:C,request_hostname:NA(T.url)})};r.on("fragmentLoadingAbandoned",x);var w=function(E){var T=E.error,C,N,I=(T==null||(C=T.data)===null||C===void 0?void 0:C.request)||{},U=(T==null||(N=T.data)===null||N===void 0?void 0:N.response)||{};T?.code===27&&s("requestfailed",{request_error:I.type+"_"+I.action,request_url:I.url,request_hostname:NA(I.url),request_type:I.mediaType,request_error_code:U.status,request_error_text:U.statusText});var K="".concat(I!=null&&I.url?"url: ".concat(I.url,`
`):"")+"".concat(U!=null&&U.status||U!=null&&U.statusText?"response: ".concat(U?.status,", ").concat(U?.statusText,`
`):"");s("error",{player_error_code:T?.code,player_error_message:T?.message,player_error_context:K})};r.on("error",w),r._stopMuxMonitor=function(){r.off("manifestLoaded",o),r.off("initFragmentLoaded",d),r.off("mediaFragmentLoaded",A),r.off("qualityChangeRendered",y),r.off("error",w),r.off("fragmentLoadingAbandoned",x),delete r._stopMuxMonitor}},UUe=function(t){t&&typeof t._stopMuxMonitor=="function"&&t._stopMuxMonitor()},Jz=0,$Ue=(function(){function t(){xu(this,t),In(this,"_listeners",void 0)}return QA(t,[{key:"on",value:function(e,r,n){return r._eventEmitterGuid=r._eventEmitterGuid||++Jz,this._listeners=this._listeners||{},this._listeners[e]=this._listeners[e]||[],n&&(r=r.bind(n)),this._listeners[e].push(r),r}},{key:"off",value:function(e,r){var n=this._listeners&&this._listeners[e];n&&n.forEach(function(i,s){i._eventEmitterGuid===r._eventEmitterGuid&&n.splice(s,1)})}},{key:"one",value:function(e,r,n){var i=this;r._eventEmitterGuid=r._eventEmitterGuid||++Jz;var s=function(){i.off(e,s),r.apply(n||this,arguments)};s._eventEmitterGuid=r._eventEmitterGuid,this.on(e,s)}},{key:"emit",value:function(e,r){var n=this;if(this._listeners){r=r||{};var i=this._listeners["before"+e]||[],s=this._listeners["before*"]||[],o=this._listeners[e]||[],c=this._listeners["after"+e]||[],u=function(l,d){l=l.slice(),l.forEach(function(f){f.call(n,{type:e},d)})};u(i,r),u(s,r),u(o,r),u(c,r)}}}]),t})(),HUe=$Ue,h4=nA(Zm()),QUe=(function(){function t(e){var r=this;xu(this,t),In(this,"_playbackHeartbeatInterval",void 0),In(this,"_playheadShouldBeProgressing",void 0),In(this,"pm",void 0),this.pm=e,this._playbackHeartbeatInterval=null,this._playheadShouldBeProgressing=!1,e.on("playing",function(){r._playheadShouldBeProgressing=!0}),e.on("play",this._startPlaybackHeartbeatInterval.bind(this)),e.on("playing",this._startPlaybackHeartbeatInterval.bind(this)),e.on("adbreakstart",this._startPlaybackHeartbeatInterval.bind(this)),e.on("adplay",this._startPlaybackHeartbeatInterval.bind(this)),e.on("adplaying",this._startPlaybackHeartbeatInterval.bind(this)),e.on("devicewake",this._startPlaybackHeartbeatInterval.bind(this)),e.on("viewstart",this._startPlaybackHeartbeatInterval.bind(this)),e.on("rebufferstart",this._startPlaybackHeartbeatInterval.bind(this)),e.on("pause",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("ended",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("viewend",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("error",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("aderror",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("adpause",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("adended",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("adbreakend",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("seeked",function(){e.data.player_is_paused?r._stopPlaybackHeartbeatInterval():r._startPlaybackHeartbeatInterval()}),e.on("timeupdate",function(){r._playbackHeartbeatInterval!==null&&e.emit("playbackheartbeat")}),e.on("devicesleep",function(n,i){r._playbackHeartbeatInterval!==null&&(h4.default.clearInterval(r._playbackHeartbeatInterval),e.emit("playbackheartbeatend",{viewer_time:i.viewer_time}),r._playbackHeartbeatInterval=null)})}return QA(t,[{key:"_startPlaybackHeartbeatInterval",value:function(){var e=this;this._playbackHeartbeatInterval===null&&(this.pm.emit("playbackheartbeat"),this._playbackHeartbeatInterval=h4.default.setInterval(function(){e.pm.emit("playbackheartbeat")},this.pm.playbackHeartbeatTime))}},{key:"_stopPlaybackHeartbeatInterval",value:function(){this._playheadShouldBeProgressing=!1,this._playbackHeartbeatInterval!==null&&(h4.default.clearInterval(this._playbackHeartbeatInterval),this.pm.emit("playbackheartbeatend"),this._playbackHeartbeatInterval=null)}}]),t})(),VUe=QUe,zUe=function t(e){var r=this;xu(this,t),In(this,"viewErrored",void 0),e.on("viewinit",function(){r.viewErrored=!1}),e.on("error",function(n,i){try{var s=e.errorTranslator({player_error_code:i.player_error_code,player_error_message:i.player_error_message,player_error_context:i.player_error_context,player_error_severity:i.player_error_severity,player_error_business_exception:i.player_error_business_exception});s&&(e.data.player_error_code=s.player_error_code||i.player_error_code,e.data.player_error_message=s.player_error_message||i.player_error_message,e.data.player_error_context=s.player_error_context||i.player_error_context,e.data.player_error_severity=s.player_error_severity||i.player_error_severity,e.data.player_error_business_exception=s.player_error_business_exception||i.player_error_business_exception,r.viewErrored=!0)}catch(o){e.mux.log.warn("Exception in error translator callback.",o),r.viewErrored=!0}}),e.on("aftererror",function(){var n,i,s,o,c;(n=e.data)===null||n===void 0||delete n.player_error_code,(i=e.data)===null||i===void 0||delete i.player_error_message,(s=e.data)===null||s===void 0||delete s.player_error_context,(o=e.data)===null||o===void 0||delete o.player_error_severity,(c=e.data)===null||c===void 0||delete c.player_error_business_exception})},KUe=zUe,GUe=(function(){function t(e){xu(this,t),In(this,"_watchTimeTrackerLastCheckedTime",void 0),In(this,"pm",void 0),this.pm=e,this._watchTimeTrackerLastCheckedTime=null,e.on("playbackheartbeat",this._updateWatchTime.bind(this)),e.on("playbackheartbeatend",this._clearWatchTimeState.bind(this))}return QA(t,[{key:"_updateWatchTime",value:function(e,r){var n=r.viewer_time;this._watchTimeTrackerLastCheckedTime===null&&(this._watchTimeTrackerLastCheckedTime=n),$u(this.pm.data,"view_watch_time",n-this._watchTimeTrackerLastCheckedTime),this._watchTimeTrackerLastCheckedTime=n}},{key:"_clearWatchTimeState",value:function(e,r){this._updateWatchTime(e,r),this._watchTimeTrackerLastCheckedTime=null}}]),t})(),WUe=GUe,YUe=(function(){function t(e){var r=this;xu(this,t),In(this,"_playbackTimeTrackerLastPlayheadPosition",void 0),In(this,"_lastTime",void 0),In(this,"_isAdPlaying",void 0),In(this,"_callbackUpdatePlaybackTime",void 0),In(this,"pm",void 0),this.pm=e,this._playbackTimeTrackerLastPlayheadPosition=-1,this._lastTime=md.now(),this._isAdPlaying=!1,this._callbackUpdatePlaybackTime=null,e.on("viewinit",function(){r.pm.data.view_playing_time_ms_cumulative=0});var n=this._startPlaybackTimeTracking.bind(this);e.on("playing",n),e.on("adplaying",n),e.on("seeked",n),e.on("rebufferend",n);var i=this._stopPlaybackTimeTracking.bind(this);e.on("playbackheartbeatend",i),e.on("seeking",i),e.on("rebufferstart",i),e.on("adplaying",function(){r._isAdPlaying=!0}),e.on("adended",function(){r._isAdPlaying=!1}),e.on("adpause",function(){r._isAdPlaying=!1}),e.on("adbreakstart",function(){r._isAdPlaying=!1}),e.on("adbreakend",function(){r._isAdPlaying=!1}),e.on("adplay",function(){r._isAdPlaying=!1}),e.on("viewinit",function(){r._playbackTimeTrackerLastPlayheadPosition=-1,r._lastTime=md.now(),r._isAdPlaying=!1,r._callbackUpdatePlaybackTime=null})}return QA(t,[{key:"_startPlaybackTimeTracking",value:function(){this._callbackUpdatePlaybackTime===null&&(this._callbackUpdatePlaybackTime=this._updatePlaybackTime.bind(this),this._playbackTimeTrackerLastPlayheadPosition=this.pm.data.player_playhead_time,this._lastTime=md.now(),this.pm.on("playbackheartbeat",this._callbackUpdatePlaybackTime))}},{key:"_stopPlaybackTimeTracking",value:function(){this._callbackUpdatePlaybackTime&&(this._updatePlaybackTime(),this.pm.off("playbackheartbeat",this._callbackUpdatePlaybackTime),this._callbackUpdatePlaybackTime=null,this._playbackTimeTrackerLastPlayheadPosition=-1)}},{key:"_updatePlaybackTime",value:function(){var e=this.pm.data.player_playhead_time||0,r=md.now(),n=r-this._lastTime,i=-1;this._playbackTimeTrackerLastPlayheadPosition>=0&&e>this._playbackTimeTrackerLastPlayheadPosition?i=e-this._playbackTimeTrackerLastPlayheadPosition:this._isAdPlaying&&(i=n),i>0&&i<=1e3&&$u(this.pm.data,"view_content_playback_time",i),this._callbackUpdatePlaybackTime!==null&&n>0&&n<=1e3&&(this._isAdPlaying&&$u(this.pm.data,"ad_playing_time_ms_cumulative",n),$u(this.pm.data,"view_playing_time_ms_cumulative",n)),this._playbackTimeTrackerLastPlayheadPosition=e,this._lastTime=r}}]),t})(),qUe=YUe,XUe=(function(){function t(e){xu(this,t),In(this,"pm",void 0),this.pm=e;var r=this._updatePlayheadTime.bind(this);e.on("playbackheartbeat",r),e.on("playbackheartbeatend",r),e.on("timeupdate",r),e.on("destroy",function(){e.off("timeupdate",r)})}return QA(t,[{key:"_updateMaxPlayheadPosition",value:function(){this.pm.data.view_max_playhead_position=typeof this.pm.data.view_max_playhead_position>"u"?this.pm.data.player_playhead_time:Math.max(this.pm.data.view_max_playhead_position,this.pm.data.player_playhead_time)}},{key:"_updatePlayheadTime",value:function(e,r){var n=this,i=function(){n.pm.currentFragmentPDT&&n.pm.currentFragmentStart&&(n.pm.data.player_program_time=n.pm.currentFragmentPDT+n.pm.data.player_playhead_time-n.pm.currentFragmentStart)};if(r&&r.player_playhead_time)this.pm.data.player_playhead_time=r.player_playhead_time,i(),this._updateMaxPlayheadPosition();else if(this.pm.getPlayheadTime){var s=this.pm.getPlayheadTime();typeof s<"u"&&(this.pm.data.player_playhead_time=s,i(),this._updateMaxPlayheadPosition())}}}]),t})(),ZUe=XUe,eK=300*1e3,JUe=function t(e){if(xu(this,t),!e.disableRebufferTracking){var r,n=function(s,o){i(o),r=void 0},i=function(s){if(r){var o=s.viewer_time-r;$u(e.data,"view_rebuffer_duration",o),r=s.viewer_time,e.data.view_rebuffer_duration>eK&&(e.emit("viewend"),e.send("viewend"),e.mux.log.warn("Ending view after rebuffering for longer than ".concat(eK,"ms, future events will be ignored unless a programchange or videochange occurs.")))}e.data.view_watch_time>=0&&e.data.view_rebuffer_count>0&&(e.data.view_rebuffer_frequency=e.data.view_rebuffer_count/e.data.view_watch_time,e.data.view_rebuffer_percentage=e.data.view_rebuffer_duration/e.data.view_watch_time)};e.on("playbackheartbeat",function(s,o){return i(o)}),e.on("rebufferstart",function(s,o){r||($u(e.data,"view_rebuffer_count",1),r=o.viewer_time,e.one("rebufferend",n))}),e.on("viewinit",function(){r=void 0,e.off("rebufferend",n)})}},e6e=JUe,t6e=(function(){function t(e){var r=this;xu(this,t),In(this,"_lastCheckedTime",void 0),In(this,"_lastPlayheadTime",void 0),In(this,"_lastPlayheadTimeUpdatedTime",void 0),In(this,"_rebuffering",void 0),In(this,"pm",void 0),this.pm=e,!(e.disableRebufferTracking||e.disablePlayheadRebufferTracking)&&(this._lastCheckedTime=null,this._lastPlayheadTime=null,this._lastPlayheadTimeUpdatedTime=null,e.on("playbackheartbeat",this._checkIfRebuffering.bind(this)),e.on("playbackheartbeatend",this._cleanupRebufferTracker.bind(this)),e.on("seeking",function(){r._cleanupRebufferTracker(null,{viewer_time:md.now()})}))}return QA(t,[{key:"_checkIfRebuffering",value:function(e,r){if(this.pm.seekingTracker.isSeeking||this.pm.adTracker.isAdBreak||!this.pm.playbackHeartbeat._playheadShouldBeProgressing){this._cleanupRebufferTracker(e,r);return}if(this._lastCheckedTime===null){this._prepareRebufferTrackerState(r.viewer_time);return}if(this._lastPlayheadTime!==this.pm.data.player_playhead_time){this._cleanupRebufferTracker(e,r,!0);return}var n=r.viewer_time-this._lastPlayheadTimeUpdatedTime;typeof this.pm.sustainedRebufferThreshold=="number"&&n>=this.pm.sustainedRebufferThreshold&&(this._rebuffering||(this._rebuffering=!0,this.pm.emit("rebufferstart",{viewer_time:this._lastPlayheadTimeUpdatedTime}))),this._lastCheckedTime=r.viewer_time}},{key:"_clearRebufferTrackerState",value:function(){this._lastCheckedTime=null,this._lastPlayheadTime=null,this._lastPlayheadTimeUpdatedTime=null}},{key:"_prepareRebufferTrackerState",value:function(e){this._lastCheckedTime=e,this._lastPlayheadTime=this.pm.data.player_playhead_time,this._lastPlayheadTimeUpdatedTime=e}},{key:"_cleanupRebufferTracker",value:function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(this._rebuffering)this._rebuffering=!1,this.pm.emit("rebufferend",{viewer_time:r.viewer_time});else{if(this._lastCheckedTime===null)return;var i=this.pm.data.player_playhead_time-this._lastPlayheadTime,s=r.viewer_time-this._lastPlayheadTimeUpdatedTime;typeof this.pm.minimumRebufferDuration=="number"&&i>0&&s-i>this.pm.minimumRebufferDuration&&(this._lastCheckedTime=null,this.pm.emit("rebufferstart",{viewer_time:this._lastPlayheadTimeUpdatedTime}),this.pm.emit("rebufferend",{viewer_time:this._lastPlayheadTimeUpdatedTime+s-i}))}n?this._prepareRebufferTrackerState(r.viewer_time):this._clearRebufferTrackerState()}}]),t})(),r6e=t6e,n6e=(function(){function t(e){var r=this;xu(this,t),In(this,"pm",void 0),this.pm=e,e.on("viewinit",function(){var n=e.data,i=n.view_id;if(!n.view_program_changed){var s=function(o,c){var u=c.viewer_time;(o.type==="playing"&&typeof e.data.view_time_to_first_frame>"u"||o.type==="adplaying"&&(typeof e.data.view_time_to_first_frame>"u"||r._inPrerollPosition()))&&r.calculateTimeToFirstFrame(u||md.now(),i)};e.one("playing",s),e.one("adplaying",s),e.one("viewend",function(){e.off("playing",s),e.off("adplaying",s)})}})}return QA(t,[{key:"_inPrerollPosition",value:function(){return typeof this.pm.data.view_content_playback_time>"u"||this.pm.data.view_content_playback_time<=1e3}},{key:"calculateTimeToFirstFrame",value:function(e,r){r===this.pm.data.view_id&&(this.pm.watchTimeTracker._updateWatchTime(null,{viewer_time:e}),this.pm.data.view_time_to_first_frame=this.pm.data.view_watch_time,(this.pm.data.player_autoplay_on||this.pm.data.video_is_autoplay)&&this.pm.pageLoadInitTime&&(this.pm.data.view_aggregate_startup_time=this.pm.data.view_start+this.pm.data.view_watch_time-this.pm.pageLoadInitTime))}}]),t})(),i6e=n6e,s6e=function t(e){var r=this;xu(this,t),In(this,"_lastPlayerHeight",void 0),In(this,"_lastPlayerWidth",void 0),In(this,"_lastPlayheadPosition",void 0),In(this,"_lastSourceHeight",void 0),In(this,"_lastSourceWidth",void 0),e.on("viewinit",function(){r._lastPlayheadPosition=-1});var n=["pause","rebufferstart","seeking","error","adbreakstart","hb","renditionchange","orientationchange","viewend","playbackmodechange"],i=["playing","hb","renditionchange","orientationchange","playbackmodechange"];n.forEach(function(s){e.on(s,function(){if(r._lastPlayheadPosition>=0&&e.data.player_playhead_time>=0&&r._lastPlayerWidth>=0&&r._lastSourceWidth>0&&r._lastPlayerHeight>=0&&r._lastSourceHeight>0){var o=e.data.player_playhead_time-r._lastPlayheadPosition;if(o<0){r._lastPlayheadPosition=-1;return}var c=Math.min(r._lastPlayerWidth/r._lastSourceWidth,r._lastPlayerHeight/r._lastSourceHeight),u=Math.max(0,c-1),l=Math.max(0,1-c);e.data.view_max_upscale_percentage=Math.max(e.data.view_max_upscale_percentage||0,u),e.data.view_max_downscale_percentage=Math.max(e.data.view_max_downscale_percentage||0,l),$u(e.data,"view_total_content_playback_time",o),$u(e.data,"view_total_upscaling",u*o),$u(e.data,"view_total_downscaling",l*o)}r._lastPlayheadPosition=-1})}),i.forEach(function(s){e.on(s,function(){r._lastPlayheadPosition=e.data.player_playhead_time,r._lastPlayerWidth=e.data.player_width,r._lastPlayerHeight=e.data.player_height,r._lastSourceWidth=e.data.video_source_width,r._lastSourceHeight=e.data.video_source_height})})},a6e=s6e,o6e=2e3,l6e=function t(e){var r=this;xu(this,t),In(this,"isSeeking",void 0),this.isSeeking=!1;var n=-1,i=function(){var s=md.now(),o=(e.data.viewer_time||s)-(n||s);$u(e.data,"view_seek_duration",o),e.data.view_max_seek_time=Math.max(e.data.view_max_seek_time||0,o),r.isSeeking=!1,n=-1};e.on("seeking",function(s,o){if(Object.assign(e.data,o),r.isSeeking&&o.viewer_time-n<=o6e){n=o.viewer_time;return}r.isSeeking&&i(),r.isSeeking=!0,n=o.viewer_time,$u(e.data,"view_seek_count",1),e.send("seeking")}),e.on("seeked",function(){i()}),e.on("viewend",function(){r.isSeeking&&(i(),e.send("seeked")),r.isSeeking=!1,n=-1})},c6e=l6e,tK=function(t,e){t.push(e),t.sort(function(r,n){return r.viewer_time-n.viewer_time})},u6e=["adbreakstart","adrequest","adresponse","adplay","adplaying","adpause","adended","adbreakend","aderror","adclicked","adskipped"],d6e=(function(){function t(e){var r=this;xu(this,t),In(this,"_adHasPlayed",void 0),In(this,"_adRequests",void 0),In(this,"_adResponses",void 0),In(this,"_currentAdRequestNumber",void 0),In(this,"_currentAdResponseNumber",void 0),In(this,"_prerollPlayTime",void 0),In(this,"_wouldBeNewAdPlay",void 0),In(this,"isAdBreak",void 0),In(this,"pm",void 0),this.pm=e,e.on("viewinit",function(){r.isAdBreak=!1,r._currentAdRequestNumber=0,r._currentAdResponseNumber=0,r._adRequests=[],r._adResponses=[],r._adHasPlayed=!1,r._wouldBeNewAdPlay=!0,r._prerollPlayTime=void 0}),u6e.forEach(function(i){return e.on(i,r._updateAdData.bind(r))});var n=function(){r.isAdBreak=!1};e.on("adbreakstart",function(){r.isAdBreak=!0}),e.on("play",n),e.on("playing",n),e.on("viewend",n),e.on("adrequest",function(i,s){s=Object.assign({ad_request_id:"generatedAdRequestId"+r._currentAdRequestNumber++},s),tK(r._adRequests,s),$u(e.data,"view_ad_request_count"),r.inPrerollPosition()&&(e.data.view_preroll_requested=!0,r._adHasPlayed||$u(e.data,"view_preroll_request_count"))}),e.on("adresponse",function(i,s){s=Object.assign({ad_request_id:"generatedAdRequestId"+r._currentAdResponseNumber++},s),tK(r._adResponses,s);var o=r.findAdRequest(s.ad_request_id);o&&$u(e.data,"view_ad_request_time",Math.max(0,s.viewer_time-o.viewer_time))}),e.on("adplay",function(i,s){r._adHasPlayed=!0,r._wouldBeNewAdPlay&&(r._wouldBeNewAdPlay=!1,$u(e.data,"view_ad_played_count")),r.inPrerollPosition()&&!e.data.view_preroll_played&&(e.data.view_preroll_played=!0,r._adRequests.length>0&&(e.data.view_preroll_request_time=Math.max(0,s.viewer_time-r._adRequests[0].viewer_time)),e.data.view_start&&(e.data.view_startup_preroll_request_time=Math.max(0,s.viewer_time-e.data.view_start)),r._prerollPlayTime=s.viewer_time)}),e.on("adplaying",function(i,s){r.inPrerollPosition()&&typeof e.data.view_preroll_load_time>"u"&&typeof r._prerollPlayTime<"u"&&(e.data.view_preroll_load_time=s.viewer_time-r._prerollPlayTime,e.data.view_startup_preroll_load_time=s.viewer_time-r._prerollPlayTime)}),e.on("adclicked",function(i,s){r._wouldBeNewAdPlay||$u(e.data,"view_ad_clicked_count")}),e.on("adskipped",function(i,s){r._wouldBeNewAdPlay||$u(e.data,"view_ad_skipped_count")}),e.on("adended",function(){r._wouldBeNewAdPlay=!0}),e.on("aderror",function(){r._wouldBeNewAdPlay=!0})}return QA(t,[{key:"inPrerollPosition",value:function(){return typeof this.pm.data.view_content_playback_time>"u"||this.pm.data.view_content_playback_time<=1e3}},{key:"findAdRequest",value:function(e){for(var r=0;r<this._adRequests.length;r++)if(this._adRequests[r].ad_request_id===e)return this._adRequests[r]}},{key:"_updateAdData",value:function(e,r){if(this.inPrerollPosition()){if(!this.pm.data.view_preroll_ad_tag_hostname&&r.ad_tag_url){var n=rg(ZE(r.ad_tag_url),2),i=n[0],s=n[1];this.pm.data.view_preroll_ad_tag_domain=s,this.pm.data.view_preroll_ad_tag_hostname=i}if(!this.pm.data.view_preroll_ad_asset_hostname&&r.ad_asset_url){var o=rg(ZE(r.ad_asset_url),2),c=o[0],u=o[1];this.pm.data.view_preroll_ad_asset_domain=u,this.pm.data.view_preroll_ad_asset_hostname=c}this.pm.data.ad_type="preroll"}this.pm.data.ad_asset_url=r?.ad_asset_url,this.pm.data.ad_tag_url=r?.ad_tag_url,this.pm.data.ad_creative_id=r?.ad_creative_id,this.pm.data.ad_id=r?.ad_id,this.pm.data.ad_universal_id=r?.ad_universal_id,r!=null&&r.ad_type&&(this.pm.data.ad_type=r?.ad_type)}}]),t})(),h6e=d6e,f6e=function t(e){var r=this;xu(this,t),In(this,"lastWallClockTime",void 0);var n=function(){r.lastWallClockTime=md.now(),e.on("before*",i)},i=function(s){var o=md.now(),c=r.lastWallClockTime;r.lastWallClockTime=o,o-c>3e4&&(e.emit("devicesleep",{viewer_time:c}),Object.assign(e.data,{viewer_time:c}),e.send("devicesleep"),e.emit("devicewake",{viewer_time:o}),Object.assign(e.data,{viewer_time:o}),e.send("devicewake"))};e.one("playbackheartbeat",n),e.on("playbackheartbeatend",function(){e.off("before*",i),e.one("playbackheartbeat",n)})},A6e=f6e,f4=nA(Zm()),Dne=(function(t){return t()})(function(){var t=function(){for(var r=0,n={};r<arguments.length;r++){var i=arguments[r];for(var s in i)n[s]=i[s]}return n};function e(r){function n(i,s,o){var c;if(typeof document<"u"){if(arguments.length>1){if(o=t({path:"/"},n.defaults,o),typeof o.expires=="number"){var u=new Date;u.setMilliseconds(u.getMilliseconds()+o.expires*864e5),o.expires=u}try{c=JSON.stringify(s),/^[\{\[]/.test(c)&&(s=c)}catch{}return r.write?s=r.write(s,i):s=encodeURIComponent(String(s)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),i=encodeURIComponent(String(i)),i=i.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),i=i.replace(/[\(\)]/g,escape),document.cookie=[i,"=",s,o.expires?"; expires="+o.expires.toUTCString():"",o.path?"; path="+o.path:"",o.domain?"; domain="+o.domain:"",o.secure?"; secure":""].join("")}i||(c={});for(var l=document.cookie?document.cookie.split("; "):[],d=/(%[0-9A-Z]{2})+/g,f=0;f<l.length;f++){var A=l[f].split("="),p=A.slice(1).join("=");p.charAt(0)==='"'&&(p=p.slice(1,-1));try{var g=A[0].replace(d,decodeURIComponent);if(p=r.read?r.read(p,g):r(p,g)||p.replace(d,decodeURIComponent),this.json)try{p=JSON.parse(p)}catch{}if(i===g){c=p;break}i||(c[g]=p)}catch{}}return c}}return n.set=n,n.get=function(i){return n.call(n,i)},n.getJSON=function(){return n.apply({json:!0},[].slice.call(arguments))},n.defaults={},n.remove=function(i,s){n(i,"",t(s,{expires:-1}))},n.withConverter=e,n}return e(function(){})}),Mne="muxData",m6e=function(t){return Object.entries(t).map(function(e){var r=rg(e,2),n=r[0],i=r[1];return"".concat(n,"=").concat(i)}).join("&")},p6e=function(t){return t.split("&").reduce(function(e,r){var n=rg(r.split("="),2),i=n[0],s=n[1],o=+s,c=s&&o==s?o:s;return e[i]=c,e},{})},Fne=function(){var t;try{t=p6e(Dne.get(Mne)||"")}catch{t={}}return t},Une=function(t){try{Dne.set(Mne,m6e(t),{expires:365})}catch{}},g6e=function(){var t=Fne();return t.mux_viewer_id=t.mux_viewer_id||XE(),t.msn=t.msn||Math.random(),Une(t),{mux_viewer_id:t.mux_viewer_id,mux_sample_number:t.msn}},v6e=function(){var t=Fne(),e=md.now();return t.session_start&&(t.sst=t.session_start,delete t.session_start),t.session_id&&(t.sid=t.session_id,delete t.session_id),t.session_expires&&(t.sex=t.session_expires,delete t.session_expires),(!t.sex||t.sex<e)&&(t.sid=XE(),t.sst=e),t.sex=e+1500*1e3,Une(t),{session_id:t.sid,session_start:t.sst,session_expires:t.sex}};function y6e(t,e){var r=e.beaconCollectionDomain,n=e.beaconDomain;if(r)return"https://"+r;t=t||"inferred";var i=n||"litix.io";return t.match(/^[a-z0-9]+$/)?"https://"+t+"."+i:"https://img.litix.io/a.gif"}var x6e=nA(Zm()),$ne=function(){var t;switch(Hne()){case"cellular":t="cellular";break;case"ethernet":t="wired";break;case"wifi":t="wifi";break;case void 0:break;default:t="other"}return t},Hne=function(){var t=x6e.default.navigator,e=t&&(t.connection||t.mozConnection||t.webkitConnection);return e&&e.type};$ne.getConnectionFromAPI=Hne;var b6e=$ne,w6e={a:"env",b:"beacon",c:"custom",d:"ad",e:"event",f:"experiment",i:"internal",m:"mux",n:"response",p:"player",q:"request",r:"retry",s:"session",t:"timestamp",u:"viewer",v:"video",w:"page",x:"view",y:"sub"},E6e=Qne(w6e),_6e={ad:"ad",af:"affiliate",ag:"aggregate",ap:"api",al:"application",ao:"audio",ar:"architecture",as:"asset",au:"autoplay",av:"average",bi:"bitrate",bn:"brand",br:"break",bw:"browser",by:"bytes",bz:"business",ca:"cached",cb:"cancel",cc:"codec",cd:"code",cg:"category",ch:"changed",ci:"client",ck:"clicked",cl:"canceled",cm:"cmcd",cn:"config",co:"count",ce:"counter",cp:"complete",cq:"creator",cr:"creative",cs:"captions",ct:"content",cu:"current",cv:"cumulative",cx:"connection",cz:"context",da:"data",dg:"downscaling",dm:"domain",dn:"cdn",do:"downscale",dr:"drm",dp:"dropped",du:"duration",dv:"device",dy:"dynamic",eb:"enabled",ec:"encoding",ed:"edge",en:"end",eg:"engine",em:"embed",er:"error",ep:"experiments",es:"errorcode",et:"errortext",ee:"event",ev:"events",ex:"expires",ez:"exception",fa:"failed",fi:"first",fm:"family",ft:"format",fp:"fps",fq:"frequency",fr:"frame",fs:"fullscreen",ha:"has",hb:"holdback",he:"headers",ho:"host",hn:"hostname",ht:"height",id:"id",ii:"init",in:"instance",ip:"ip",is:"is",ke:"key",la:"language",lb:"labeled",le:"level",li:"live",ld:"loaded",lo:"load",ls:"lists",lt:"latency",ma:"max",md:"media",me:"message",mf:"manifest",mi:"mime",ml:"midroll",mm:"min",mn:"manufacturer",mo:"model",mp:"mode",ms:"ms",mx:"mux",ne:"newest",nm:"name",no:"number",on:"on",or:"origin",os:"os",pa:"paused",pb:"playback",pd:"producer",pe:"percentage",pf:"played",pg:"program",ph:"playhead",pi:"plugin",pl:"preroll",pn:"playing",po:"poster",pp:"pip",pr:"preload",ps:"position",pt:"part",pv:"previous",py:"property",px:"pop",pz:"plan",ra:"rate",rd:"requested",re:"rebuffer",rf:"rendition",rg:"range",rm:"remote",ro:"ratio",rp:"response",rq:"request",rs:"requests",sa:"sample",sd:"skipped",se:"session",sh:"shift",sk:"seek",sm:"stream",so:"source",sq:"sequence",sr:"series",ss:"status",st:"start",su:"startup",sv:"server",sw:"software",sy:"severity",ta:"tag",tc:"tech",te:"text",tg:"target",th:"throughput",ti:"time",tl:"total",to:"to",tt:"title",ty:"type",ug:"upscaling",un:"universal",up:"upscale",ur:"url",us:"user",va:"variant",vd:"viewed",vi:"video",ve:"version",vw:"view",vr:"viewer",wd:"width",wa:"watch",wt:"waiting"},rK=Qne(_6e);function Qne(t){var e={};for(var r in t)t.hasOwnProperty(r)&&(e[t[r]]=r);return e}function nO(t){var e={},r={};return Object.keys(t).forEach(function(n){var i=!1;if(t.hasOwnProperty(n)&&t[n]!==void 0){var s=n.split("_"),o=s[0],c=E6e[o];c||(ll.info("Data key word `"+s[0]+"` not expected in "+n),c=o+"_"),s.splice(1).forEach(function(u){u==="url"&&(i=!0),rK[u]?c+=rK[u]:Number.isInteger(Number(u))?c+=u:(ll.info("Data key word `"+u+"` not expected in "+n),c+="_"+u+"_")}),i?r[c]=t[n]:e[c]=t[n]}}),Object.assign(e,r)}var $v=nA(Zm()),S6e=nA(Lne()),T6e={maxBeaconSize:300,maxQueueLength:3600,baseTimeBetweenBeacons:1e4,maxPayloadKBSize:500},C6e=56*1024,j6e=["hb","requestcompleted","requestfailed","requestcanceled"],N6e="https://img.litix.io",fg=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this._beaconUrl=t||N6e,this._eventQueue=[],this._postInFlight=!1,this._resendAfterPost=!1,this._failureCount=0,this._sendTimeout=!1,this._options=Object.assign({},T6e,e)};fg.prototype.queueEvent=function(t,e){var r=Object.assign({},e);return this._eventQueue.length<=this._options.maxQueueLength||t==="eventrateexceeded"?(this._eventQueue.push(r),this._sendTimeout||this._startBeaconSending(),this._eventQueue.length<=this._options.maxQueueLength):!1};fg.prototype.flushEvents=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(t&&this._eventQueue.length===1){this._eventQueue.pop();return}this._eventQueue.length&&this._sendBeaconQueue(),this._startBeaconSending()};fg.prototype.destroy=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this.destroyed=!0,t?this._clearBeaconQueue():this.flushEvents(),$v.default.clearTimeout(this._sendTimeout)};fg.prototype._clearBeaconQueue=function(){var t=this._eventQueue.length>this._options.maxBeaconSize?this._eventQueue.length-this._options.maxBeaconSize:0,e=this._eventQueue.slice(t);t>0&&Object.assign(e[e.length-1],nO({mux_view_message:"event queue truncated"}));var r=this._createPayload(e);Vne(this._beaconUrl,r,!0,function(){})};fg.prototype._sendBeaconQueue=function(){var t=this;if(this._postInFlight){this._resendAfterPost=!0;return}var e=this._eventQueue.slice(0,this._options.maxBeaconSize);this._eventQueue=this._eventQueue.slice(this._options.maxBeaconSize),this._postInFlight=!0;var r=this._createPayload(e),n=md.now();Vne(this._beaconUrl,r,!1,function(i,s){s?(t._eventQueue=e.concat(t._eventQueue),t._failureCount+=1,ll.info("Error sending beacon: "+s)):t._failureCount=0,t._roundTripTime=md.now()-n,t._postInFlight=!1,t._resendAfterPost&&(t._resendAfterPost=!1,t._eventQueue.length>0&&t._sendBeaconQueue())})};fg.prototype._getNextBeaconTime=function(){if(!this._failureCount)return this._options.baseTimeBetweenBeacons;var t=Math.pow(2,this._failureCount-1);return t=t*Math.random(),(1+t)*this._options.baseTimeBetweenBeacons};fg.prototype._startBeaconSending=function(){var t=this;$v.default.clearTimeout(this._sendTimeout),!this.destroyed&&(this._sendTimeout=$v.default.setTimeout(function(){t._eventQueue.length&&t._sendBeaconQueue(),t._startBeaconSending()},this._getNextBeaconTime()))};fg.prototype._createPayload=function(t){var e=this,r={transmission_timestamp:Math.round(md.now())};this._roundTripTime&&(r.rtt_ms=Math.round(this._roundTripTime));var n,i,s,o=function(){n=JSON.stringify({metadata:r,events:i||t}),s=n.length/1024},c=function(){return s<=e._options.maxPayloadKBSize};return o(),c()||(ll.info("Payload size is too big ("+s+" kb). Removing unnecessary events."),i=t.filter(function(u){return j6e.indexOf(u.e)===-1}),o()),c()||(ll.info("Payload size still too big ("+s+" kb). Cropping fields.."),i.forEach(function(u){for(var l in u){var d=u[l],f=50*1024;typeof d=="string"&&d.length>f&&(u[l]=d.substring(0,f))}}),o()),n};var k6e=typeof S6e.default.exitPictureInPicture=="function"?function(t){return t.length<=C6e}:function(t){return!1},Vne=function(t,e,r,n){if(r&&navigator&&navigator.sendBeacon&&navigator.sendBeacon(t,e)){n();return}if($v.default.fetch){$v.default.fetch(t,{method:"POST",body:e,headers:{"Content-Type":"text/plain"},keepalive:k6e(e)}).then(function(s){return n(null,s.ok?null:"Error")}).catch(function(s){return n(null,s)});return}if($v.default.XMLHttpRequest){var i=new $v.default.XMLHttpRequest;i.onreadystatechange=function(){if(i.readyState===4)return n(null,i.status!==200?"error":void 0)},i.open("POST",t),i.setRequestHeader("Content-Type","text/plain"),i.send(e);return}n()},I6e=fg,L6e=["env_key","view_id","view_sequence_number","player_sequence_number","beacon_domain","player_playhead_time","viewer_time","mux_api_version","event","video_id","player_instance_id","player_error_code","player_error_message","player_error_context","player_error_severity","player_error_business_exception","view_playing_time_ms_cumulative","ad_playing_time_ms_cumulative"],B6e=["adplay","adplaying","adpause","adfirstquartile","admidpoint","adthirdquartile","adended","adresponse","adrequest"],P6e=["ad_id","ad_creative_id","ad_universal_id"],O6e=["viewstart","error","ended","viewend"],R6e=600*1e3,D6e=(function(){function t(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};xu(this,t);var i,s,o,c,u,l,d,f,A,p,g,y;In(this,"mux",void 0),In(this,"envKey",void 0),In(this,"options",void 0),In(this,"eventQueue",void 0),In(this,"sampleRate",void 0),In(this,"disableCookies",void 0),In(this,"respectDoNotTrack",void 0),In(this,"previousBeaconData",void 0),In(this,"lastEventTime",void 0),In(this,"rateLimited",void 0),In(this,"pageLevelData",void 0),In(this,"viewerData",void 0),this.mux=e,this.envKey=r,this.options=n,this.previousBeaconData=null,this.lastEventTime=0,this.rateLimited=!1,this.eventQueue=new I6e(y6e(this.envKey,this.options));var x;this.sampleRate=(x=this.options.sampleRate)!==null&&x!==void 0?x:1;var w;this.disableCookies=(w=this.options.disableCookies)!==null&&w!==void 0?w:!1;var E;this.respectDoNotTrack=(E=this.options.respectDoNotTrack)!==null&&E!==void 0?E:!1,this.previousBeaconData=null,this.lastEventTime=0,this.rateLimited=!1,this.pageLevelData={mux_api_version:this.mux.API_VERSION,mux_embed:this.mux.NAME,mux_embed_version:this.mux.VERSION,viewer_application_name:(i=this.options.platform)===null||i===void 0?void 0:i.name,viewer_application_version:(s=this.options.platform)===null||s===void 0?void 0:s.version,viewer_application_engine:(o=this.options.platform)===null||o===void 0?void 0:o.layout,viewer_device_name:(c=this.options.platform)===null||c===void 0?void 0:c.product,viewer_device_category:"",viewer_device_manufacturer:(u=this.options.platform)===null||u===void 0?void 0:u.manufacturer,viewer_os_family:(d=this.options.platform)===null||d===void 0||(l=d.os)===null||l===void 0?void 0:l.family,viewer_os_architecture:(A=this.options.platform)===null||A===void 0||(f=A.os)===null||f===void 0?void 0:f.architecture,viewer_os_version:(g=this.options.platform)===null||g===void 0||(p=g.os)===null||p===void 0?void 0:p.version,viewer_connection_type:b6e(),page_url:f4.default===null||f4.default===void 0||(y=f4.default.location)===null||y===void 0?void 0:y.href},this.viewerData=this.disableCookies?{}:g6e()}return QA(t,[{key:"send",value:function(e,r){if(!(!e||!(r!=null&&r.view_id))){if(this.respectDoNotTrack&&tO())return ll.info("Not sending `"+e+"` because Do Not Track is enabled");if(!r||typeof r!="object")return ll.error("A data object was expected in send() but was not provided");var n=this.disableCookies?{}:v6e(),i=oF(Hj({},this.pageLevelData,r,n,this.viewerData),{event:e,env_key:this.envKey});i.user_id&&(i.viewer_user_id=i.user_id,delete i.user_id);var s,o=((s=i.mux_sample_number)!==null&&s!==void 0?s:0)>=this.sampleRate,c=this._deduplicateBeaconData(e,i),u=nO(c);if(this.lastEventTime=this.mux.utils.now(),o)return ll.info("Not sending event due to sample rate restriction",e,i,u);if(this.envKey||ll.info("Missing environment key (envKey) - beacons will be dropped if the video source is not a valid mux video URL",e,i,u),!this.rateLimited)if(ll.info("Sending event",e,i,u),this.rateLimited=!this.eventQueue.queueEvent(e,u),this.mux.WINDOW_UNLOADING&&e==="viewend")this.eventQueue.destroy(!0);else{if(this.mux.WINDOW_HIDDEN&&e==="hb")this.eventQueue.flushEvents(!0);else if(O6e.indexOf(e)>=0){if(e==="error"&&r.player_error_severity==="warning")return;this.eventQueue.flushEvents()}if(this.rateLimited)return i.event="eventrateexceeded",u=nO(i),this.eventQueue.queueEvent(i.event,u),ll.error("Beaconing disabled due to rate limit.")}}}},{key:"destroy",value:function(){this.eventQueue.destroy(!1)}},{key:"_deduplicateBeaconData",value:function(e,r){var n=this,i={},s=r.view_id;if(s==="-1"||e==="viewstart"||e==="viewend"||!this.previousBeaconData||this.mux.utils.now()-this.lastEventTime>=R6e)i=Hj({},r),s&&(this.previousBeaconData=i),s&&e==="viewend"&&(this.previousBeaconData=null);else{var o=e.indexOf("request")===0;Object.entries(r).forEach(function(c){var u=rg(c,2),l=u[0],d=u[1];n.previousBeaconData&&(d!==n.previousBeaconData[l]||L6e.indexOf(l)>-1||n.objectHasChanged(o,l,d,n.previousBeaconData[l])||n.eventRequiresKey(e,l))&&(i[l]=d,n.previousBeaconData[l]=d)})}return i}},{key:"objectHasChanged",value:function(e,r,n,i){return!e||r.indexOf("request_")!==0?!1:r==="request_response_headers"||typeof n!="object"||typeof i!="object"?!0:Object.keys(n||{}).length!==Object.keys(i||{}).length}},{key:"eventRequiresKey",value:function(e,r){return!!(e==="renditionchange"&&r.indexOf("video_source_")===0||P6e.includes(r)&&B6e.includes(e))}}]),t})(),M6e=function t(e){xu(this,t);var r=0,n=0,i=0,s=0,o=0,c=0,u=0,l=function(A,p){var g=p.request_start,y=p.request_response_start,x=p.request_response_end,w=p.request_bytes_loaded;s++;var E,T;if(y?(E=y-(g??0),T=(x??0)-y):T=(x??0)-(g??0),T>0&&w&&w>0){var C=w/T*8e3;o++,n+=w,i+=T,e.data.view_min_request_throughput=Math.min(e.data.view_min_request_throughput||1/0,C),e.data.view_average_request_throughput=n/i*8e3,e.data.view_request_count=s,E>0&&(r+=E,e.data.view_max_request_latency=Math.max(e.data.view_max_request_latency||0,E),e.data.view_average_request_latency=r/o)}},d=function(A,p){s++,c++,e.data.view_request_count=s,e.data.view_request_failed_count=c},f=function(A,p){s++,u++,e.data.view_request_count=s,e.data.view_request_canceled_count=u};e.on("requestcompleted",l),e.on("requestfailed",d),e.on("requestcanceled",f)},F6e=M6e,U6e=3600*1e3,$6e=function t(e){var r=this;xu(this,t),In(this,"_lastEventTime",void 0),e.on("before*",function(n,i){var s=i.viewer_time,o=md.now(),c=r._lastEventTime;if(r._lastEventTime=o,c&&o-c>U6e){var u=Object.keys(e.data).reduce(function(d,f){return f.indexOf("video_")===0?Object.assign(d,In({},f,e.data[f])):d},{});e.mux.log.info("Received event after at least an hour inactivity, creating a new view");var l=e.playbackHeartbeat._playheadShouldBeProgressing;e._resetView(Object.assign({viewer_time:s},u)),e.playbackHeartbeat._playheadShouldBeProgressing=l,e.playbackHeartbeat._playheadShouldBeProgressing&&n.type!=="play"&&n.type!=="adbreakstart"&&(e.emit("play",{viewer_time:s}),n.type!=="playing"&&e.emit("playing",{viewer_time:s}))}})},H6e=$6e,Q6e=function t(e){xu(this,t);var r=function(c){var u=V6e(c),l=z6e(c);if(u!=null&&!nK(u,s)&&o<=l){s=u,o=l;var d={video_cdn:u};e.emit("cdnchange",d)}},n=null,i=null,s=null,o=0;e.on("viewinit",function(){n=null,i=null,s=null,o=0}),e.on("beforecdnchange",function(c,u){var l=u?.video_cdn;l&&(typeof u.video_previous_cdn>"u"||u.video_previous_cdn===null)&&(nK(l,i)?u.video_previous_cdn=n??void 0:(u.video_previous_cdn=i??void 0,n=i,i=l))}),e.on("requestcompleted",function(c,u){r(u)})};function nK(t,e){return t?.toLowerCase()===e?.toLowerCase()}function V6e(t){var e;return t!=null&&t.request_type&&(t.request_type==="media"||t.request_type==="video")&&!((e=t.request_response_headers)===null||e===void 0)&&e["x-cdn"]?t.request_response_headers["x-cdn"]:t!=null&&t.video_cdn?t.video_cdn:null}function z6e(t){return t!=null&&t.request_start?t.request_start:t!=null&&t.viewer_time?t.viewer_time:Date.now()}var K6e=Q6e,G6e=function(t){try{return JSON.parse(t),!0}catch{return!1}},W6e=function t(e){var r=this;xu(this,t),In(this,"_emittingAutomaticEvent",!1),In(this,"_hasInitialized",!1),In(this,"_currentMode","standard"),e.on("viewstart",function(){r._hasInitialized||(r._hasInitialized=!0,r._currentMode=e.data.player_playback_mode||"standard",r._emittingAutomaticEvent=!0,e.emit("playbackmodechange",{player_playback_mode:r._currentMode,player_playback_mode_data:"{}"}),r._emittingAutomaticEvent=!1)}),e.on("viewend",function(){r._hasInitialized=!1}),e.on("playbackmodechange",function(n,i){r._emittingAutomaticEvent||(i.player_playback_mode_data?G6e(i.player_playback_mode_data)||(e.mux.log.warn("Invalid JSON string for player_playback_mode_data"),i.player_playback_mode_data="{}"):i.player_playback_mode_data="{}",e.data.player_playback_mode_data=i.player_playback_mode_data,e.data.player_playback_mode=i.player_playback_mode,r._currentMode=i.player_playback_mode)})},Y6e=W6e,q6e=(function(){function t(e){xu(this,t),In(this,"pm",void 0),In(this,"_currentRangeStart",void 0),In(this,"_lastPlayheadTime",void 0),this.pm=e,this._currentRangeStart=null,this._lastPlayheadTime=null,e.on("playbackheartbeat",this._updatePlaybackRange.bind(this)),e.on("playbackheartbeatend",this._endPlaybackRange.bind(this))}return QA(t,[{key:"_updateLastRangeEnd",value:function(){var e=this.pm.data.video_playback_ranges;if(e&&e.length>0){var r=this.pm.data.player_playhead_time||0;e[e.length-1][1]=r}}},{key:"_updatePlaybackRange",value:function(){var e,r=this.pm.data.player_playhead_time||0;if(!(!this.pm.disableAdPlaybackRangeFiltering&&!((e=this.pm.adTracker)===null||e===void 0)&&e.isAdBreak&&this._lastPlayheadTime!==null&&r<this._lastPlayheadTime)){if(this._lastPlayheadTime!==null&&this._currentRangeStart!==null){var n=Math.abs(r-this._lastPlayheadTime);if(n>1e3){var i=this.pm.data.video_playback_ranges;i&&i.length>0&&(i[i.length-1][1]=this._lastPlayheadTime),this._currentRangeStart=null}}if(this._currentRangeStart===null){var s=this.pm.data.video_playback_ranges||[];s.length>0&&s[s.length-1][1]===r?this._currentRangeStart=s[s.length-1][0]:(this._currentRangeStart=r,s.push([r,r])),this.pm.data.video_playback_ranges=s}else this._updateLastRangeEnd();this._lastPlayheadTime=r}}},{key:"_endPlaybackRange",value:function(){this._currentRangeStart!==null&&(this._updateLastRangeEnd(),this._currentRangeStart=null,this._lastPlayheadTime=null)}}]),t})(),X6e=q6e,Z6e=["viewstart","ended","loadstart","pause","play","playing","ratechange","waiting","adplay","adpause","adended","aderror","adplaying","adrequest","adresponse","adbreakstart","adbreakend","adfirstquartile","admidpoint","adthirdquartile","rebufferstart","rebufferend","seeked","error","hb","requestcompleted","requestfailed","requestcanceled","renditionchange","cdnchange","playbackmodechange"],J6e=new Set(["requestcompleted","requestfailed","requestcanceled"]),e8e=(function(t){EUe(r,t);var e=jUe(r);function r(n,i,s){xu(this,r);var o;o=e.call(this),In(ms(o),"pageLoadEndTime",void 0),In(ms(o),"pageLoadInitTime",void 0),In(ms(o),"_destroyed",void 0),In(ms(o),"_heartBeatTimeout",void 0),In(ms(o),"adTracker",void 0),In(ms(o),"dashjs",void 0),In(ms(o),"data",void 0),In(ms(o),"disablePlayheadRebufferTracking",void 0),In(ms(o),"disableRebufferTracking",void 0),In(ms(o),"disableAdPlaybackRangeFiltering",void 0),In(ms(o),"errorTracker",void 0),In(ms(o),"errorTranslator",void 0),In(ms(o),"emitTranslator",void 0),In(ms(o),"getAdData",void 0),In(ms(o),"getPlayheadTime",void 0),In(ms(o),"getStateData",void 0),In(ms(o),"stateDataTranslator",void 0),In(ms(o),"hlsjs",void 0),In(ms(o),"id",void 0),In(ms(o),"longResumeTracker",void 0),In(ms(o),"minimumRebufferDuration",void 0),In(ms(o),"mux",void 0),In(ms(o),"playbackEventDispatcher",void 0),In(ms(o),"playbackHeartbeat",void 0),In(ms(o),"playbackHeartbeatTime",void 0),In(ms(o),"playheadTime",void 0),In(ms(o),"seekingTracker",void 0),In(ms(o),"sustainedRebufferThreshold",void 0),In(ms(o),"watchTimeTracker",void 0),In(ms(o),"currentFragmentPDT",void 0),In(ms(o),"currentFragmentStart",void 0),o.pageLoadInitTime=$j.navigationStart(),o.pageLoadEndTime=$j.domContentLoadedEventEnd();var c={debug:!1,minimumRebufferDuration:250,sustainedRebufferThreshold:1e3,playbackHeartbeatTime:25,beaconDomain:"litix.io",sampleRate:1,disableCookies:!1,respectDoNotTrack:!1,disableRebufferTracking:!1,disablePlayheadRebufferTracking:!1,disableAdPlaybackRangeFiltering:!1,errorTranslator:function(A){return A},emitTranslator:function(){for(var A=arguments.length,p=new Array(A),g=0;g<A;g++)p[g]=arguments[g];return p},stateDataTranslator:function(A){return A}};o.mux=n,o.id=i,s!=null&&s.beaconDomain&&o.mux.log.warn("The `beaconDomain` setting has been deprecated in favor of `beaconCollectionDomain`. Please change your integration to use `beaconCollectionDomain` instead of `beaconDomain`."),s=Object.assign(c,s),s.data=s.data||{},s.data.property_key&&(s.data.env_key=s.data.property_key,delete s.data.property_key),ll.level=s.debug?Lv.DEBUG:Lv.WARN,o.getPlayheadTime=s.getPlayheadTime,o.getStateData=s.getStateData||function(){return{}},o.getAdData=s.getAdData||function(){},o.minimumRebufferDuration=s.minimumRebufferDuration,o.sustainedRebufferThreshold=s.sustainedRebufferThreshold,o.playbackHeartbeatTime=s.playbackHeartbeatTime,o.disableRebufferTracking=s.disableRebufferTracking,o.disableRebufferTracking&&o.mux.log.warn("Disabling rebuffer tracking. This should only be used in specific circumstances as a last resort when your player is known to unreliably track rebuffering."),o.disablePlayheadRebufferTracking=s.disablePlayheadRebufferTracking,o.disableAdPlaybackRangeFiltering=s.disableAdPlaybackRangeFiltering,o.errorTranslator=s.errorTranslator,o.emitTranslator=s.emitTranslator,o.stateDataTranslator=s.stateDataTranslator,o.playbackEventDispatcher=new D6e(n,s.data.env_key,s),o.data={player_instance_id:XE(),mux_sample_rate:s.sampleRate,beacon_domain:s.beaconCollectionDomain||s.beaconDomain},o.data.view_sequence_number=1,o.data.player_sequence_number=1;var u=(function(){typeof this.data.view_start>"u"&&(this.data.view_start=this.mux.utils.now(),this.emit("viewstart"),this.emit("renditionchange"))}).bind(ms(o));if(o.on("viewinit",function(A,p){this._resetVideoData(),this._resetViewData(),this._resetErrorData(),this._updateStateData(),Object.assign(this.data,p),this._initializeViewData(),this.one("play",u),this.one("adbreakstart",u)}),o.on("videochange",function(A,p){this._resetView(p)}),o.on("programchange",function(A,p){this.data.player_is_paused&&this.mux.log.warn("The `programchange` event is intended to be used when the content changes mid playback without the video source changing, however the video is not currently playing. If the video source is changing please use the videochange event otherwise you will lose startup time information."),this._resetView(Object.assign(p,{view_program_changed:!0})),u(),this.emit("play"),this.emit("playing")}),o.on("fragmentchange",function(A,p){this.currentFragmentPDT=p.currentFragmentPDT,this.currentFragmentStart=p.currentFragmentStart}),o.on("destroy",o.destroy),typeof window<"u"&&typeof window.addEventListener=="function"&&typeof window.removeEventListener=="function"){var l=function(){var A=typeof o.data.view_start<"u";o.mux.WINDOW_HIDDEN=document.visibilityState==="hidden",A&&o.mux.WINDOW_HIDDEN&&(o.data.player_is_paused||o.emit("hb"))};window.addEventListener("visibilitychange",l,!1);var d=function(A){A.persisted||o.destroy()};window.addEventListener("pagehide",d,!1),o.on("destroy",function(){window.removeEventListener("visibilitychange",l),window.removeEventListener("pagehide",d)})}o.on("playerready",function(A,p){Object.assign(this.data,p)}),Z6e.forEach(function(A){o.on(A,function(p,g){A.indexOf("ad")!==0&&this._updateStateData(),Object.assign(this.data,g),this._sanitizeData()}),o.on("after"+A,function(){(A!=="error"||this.errorTracker.viewErrored)&&this.send(A)})}),o.on("viewend",function(A,p){Object.assign(o.data,p)});var f=function(A){var p=this.mux.utils.now();this.data.player_init_time&&(this.data.player_startup_time=p-this.data.player_init_time),this.pageLoadInitTime=this.data.page_load_init_time||this.pageLoadInitTime,this.pageLoadEndTime=this.data.page_load_end_time||this.pageLoadEndTime,!this.mux.PLAYER_TRACKED&&this.pageLoadInitTime&&(this.mux.PLAYER_TRACKED=!0,(this.data.player_init_time||this.pageLoadEndTime)&&(this.data.page_load_time=Math.min(this.data.player_init_time||1/0,this.pageLoadEndTime||1/0)-this.pageLoadInitTime)),this.send("playerready"),delete this.data.player_startup_time,delete this.data.page_load_time};return o.one("playerready",f),o.longResumeTracker=new H6e(ms(o)),o.errorTracker=new KUe(ms(o)),new A6e(ms(o)),o.seekingTracker=new c6e(ms(o)),o.playheadTime=new ZUe(ms(o)),o.playbackHeartbeat=new VUe(ms(o)),new a6e(ms(o)),o.watchTimeTracker=new WUe(ms(o)),new qUe(ms(o)),new X6e(ms(o)),o.adTracker=new h6e(ms(o)),new r6e(ms(o)),new e6e(ms(o)),new i6e(ms(o)),new F6e(ms(o)),new K6e(ms(o)),new Y6e(ms(o)),s.hlsjs&&o.addHLSJS(s),s.dashjs&&o.addDashJS(s),o.emit("viewinit",s.data),o}return QA(r,[{key:"emit",value:function(n,i){var s,o=Object.assign({viewer_time:this.mux.utils.now()},i),c=[n,o];if(this.emitTranslator)try{c=this.emitTranslator(n,o)}catch(u){this.mux.log.warn("Exception in emit translator callback.",u)}c!=null&&c.length&&(s=sT($b(r.prototype),"emit",this)).call.apply(s,[this].concat(xA(c)))}},{key:"destroy",value:function(){this._destroyed||(this._destroyed=!0,typeof this.data.view_start<"u"&&(this.emit("viewend"),this.send("viewend")),this.playbackEventDispatcher.destroy(),this.removeHLSJS(),this.removeDashJS(),window.clearTimeout(this._heartBeatTimeout))}},{key:"send",value:function(n){if(this.data.view_id){var i=Object.assign({},this.data),s=["player_program_time","player_manifest_newest_program_time","player_live_edge_program_time","player_program_time","video_holdback","video_part_holdback","video_target_duration","video_part_target_duration"];if(i.video_source_is_live===void 0&&(i.player_source_duration===1/0||i.video_source_duration===1/0?i.video_source_is_live=!0:(i.player_source_duration>0||i.video_source_duration>0)&&(i.video_source_is_live=!1)),i.video_source_is_live||s.forEach(function(l){i[l]=void 0}),i.video_source_url=i.video_source_url||i.player_source_url,i.video_source_url){var o=rg(ZE(i.video_source_url),2),c=o[0],u=o[1];i.video_source_domain=u,i.video_source_hostname=c}delete i.ad_request_id,i.video_playback_ranges&&(i.video_playback_range=JSON.stringify(i.video_playback_ranges.filter(function(l){return l[0]!==l[1]}).map(function(l){return"".concat(l[0],":").concat(l[1])})),delete i.video_playback_ranges),this.playbackEventDispatcher.send(n,i),this.data.view_sequence_number++,this.data.player_sequence_number++,J6e.has(n)||this._restartHeartBeat(),n==="viewend"&&delete this.data.view_id}}},{key:"_resetView",value:function(n){this.emit("viewend"),this.send("viewend"),this.emit("viewinit",n)}},{key:"_updateStateData",value:function(){var n,i=this.getStateData();if(typeof this.stateDataTranslator=="function")try{i=this.stateDataTranslator(i)}catch(o){this.mux.log.warn("Exception in stateDataTranslator translator callback.",o)}if(!((n=this.data)===null||n===void 0)&&n.video_cdn&&i!=null&&i.video_cdn){i.video_cdn;var s=SUe(i,["video_cdn"]);i=s}Object.assign(this.data,i),this.playheadTime._updatePlayheadTime(),this._sanitizeData()}},{key:"_sanitizeData",value:function(){var n=this,i=["player_width","player_height","video_source_width","video_source_height","player_playhead_time","video_source_bitrate"];i.forEach(function(o){var c=parseInt(n.data[o],10);n.data[o]=isNaN(c)?void 0:c});var s=["player_source_url","video_source_url"];s.forEach(function(o){if(n.data[o]){var c=n.data[o].toLowerCase();(c.indexOf("data:")===0||c.indexOf("blob:")===0)&&(n.data[o]="MSE style URL")}})}},{key:"_resetVideoData",value:function(){var n=this;Object.keys(this.data).forEach(function(i){i.indexOf("video_")===0&&delete n.data[i]})}},{key:"_resetViewData",value:function(){var n=this;Object.keys(this.data).forEach(function(i){i.indexOf("view_")===0&&delete n.data[i]}),this.data.view_sequence_number=1}},{key:"_resetErrorData",value:function(){delete this.data.player_error_code,delete this.data.player_error_message,delete this.data.player_error_context,delete this.data.player_error_severity,delete this.data.player_error_business_exception}},{key:"_initializeViewData",value:function(){var n=this,i=this.data.view_id=XE(),s=function(){i===n.data.view_id&&$u(n.data,"player_view_count",1)};this.data.player_is_paused?this.one("play",s):s()}},{key:"_restartHeartBeat",value:function(){var n=this;window.clearTimeout(this._heartBeatTimeout),this._heartBeatTimeout=window.setTimeout(function(){n.data.player_is_paused||n.emit("hb")},1e4)}},{key:"addHLSJS",value:function(n){if(!n.hlsjs){this.mux.log.warn("You must pass a valid hlsjs instance in order to track it.");return}if(this.hlsjs){this.mux.log.warn("An instance of HLS.js is already being monitored for this player.");return}this.hlsjs=n.hlsjs,PUe(this.mux,this.id,n.hlsjs,{},n.Hls||window.Hls)}},{key:"removeHLSJS",value:function(){this.hlsjs&&(OUe(this.hlsjs),this.hlsjs=void 0)}},{key:"addDashJS",value:function(n){if(!n.dashjs){this.mux.log.warn("You must pass a valid dashjs instance in order to track it.");return}if(this.dashjs){this.mux.log.warn("An instance of Dash.js is already being monitored for this player.");return}this.dashjs=n.dashjs,FUe(this.mux,this.id,n.dashjs)}},{key:"removeDashJS",value:function(){this.dashjs&&(UUe(this.dashjs),this.dashjs=void 0)}}]),r})(HUe),t8e=e8e,ew=nA(Lne());function A4(){return ew.default&&!!(ew.default.fullscreenElement||ew.default.webkitFullscreenElement||ew.default.mozFullScreenElement||ew.default.msFullscreenElement)}var r8e=["loadstart","pause","play","playing","seeking","seeked","timeupdate","ratechange","stalled","waiting","error","ended"],n8e={1:"MEDIA_ERR_ABORTED",2:"MEDIA_ERR_NETWORK",3:"MEDIA_ERR_DECODE",4:"MEDIA_ERR_SRC_NOT_SUPPORTED"};function i8e(t,e,r){var n=rg(Uj(e),3),i=n[0],s=n[1],o=n[2],c=t.log,u=t.utils.getComputedStyle,l=t.utils.secondsToMs,d={automaticErrorTracking:!0};if(i){if(o!=="video"&&o!=="audio")return c.error("The element of `"+s+"` was not a media element.")}else return c.error("No element was found with the `"+s+"` query selector.");i.mux&&(i.mux.destroy(),delete i.mux,c.warn("Already monitoring this video element, replacing existing event listeners"));var f={getPlayheadTime:function(){return l(i.currentTime)},getStateData:function(){var p,g,y,x=((p=(g=this).getPlayheadTime)===null||p===void 0?void 0:p.call(g))||l(i.currentTime),w=this.hlsjs&&this.hlsjs.url,E=this.dashjs&&typeof this.dashjs.getSource=="function"&&this.dashjs.getSource(),T={player_is_paused:i.paused,player_width:parseInt(u(i,"width")),player_height:parseInt(u(i,"height")),player_autoplay_on:i.autoplay,player_preload_on:i.preload,player_language_code:i.lang,player_is_fullscreen:A4(),video_poster_url:i.poster,video_source_url:w||E||i.currentSrc,video_source_duration:l(i.duration),video_source_height:i.videoHeight,video_source_width:i.videoWidth,view_dropped_frame_count:i==null||(y=i.getVideoPlaybackQuality)===null||y===void 0?void 0:y.call(i).droppedVideoFrames};if(i.getStartDate&&x>0){var C=i.getStartDate();if(C&&typeof C.getTime=="function"&&C.getTime()){var N=C.getTime();if(T.player_program_time=N+x,i.seekable.length>0){var I=N+i.seekable.end(i.seekable.length-1);T.player_live_edge_program_time=I}}}return T}};r=Object.assign(d,r,f),r.data=Object.assign({player_software:"HTML5 Video Element",player_mux_plugin_name:"VideoElementMonitor",player_mux_plugin_version:t.VERSION},r.data),i.mux=i.mux||{},i.mux.deleted=!1,i.mux.emit=function(p,g){t.emit(s,p,g)},i.mux.updateData=function(p){i.mux.emit("hb",p)};var A=function(){c.error("The monitor for this video element has already been destroyed.")};i.mux.destroy=function(){Object.keys(i.mux.listeners).forEach(function(p){i.removeEventListener(p,i.mux.listeners[p],!1)}),delete i.mux.listeners,i.mux.fullscreenChangeListener&&(document.removeEventListener("fullscreenchange",i.mux.fullscreenChangeListener,!1),delete i.mux.fullscreenChangeListener),i.mux.destroy=A,i.mux.swapElement=A,i.mux.emit=A,i.mux.addHLSJS=A,i.mux.addDashJS=A,i.mux.removeHLSJS=A,i.mux.removeDashJS=A,i.mux.updateData=A,i.mux.setEmitTranslator=A,i.mux.setStateDataTranslator=A,i.mux.setGetPlayheadTime=A,i.mux.deleted=!0,t.emit(s,"destroy")},i.mux.swapElement=function(p){var g=rg(Uj(p),3),y=g[0],x=g[1],w=g[2];if(y){if(w!=="video"&&w!=="audio")return t.log.error("The element of `"+x+"` was not a media element.")}else return t.log.error("No element was found with the `"+x+"` query selector.");y.muxId=i.muxId,delete i.muxId,y.mux=y.mux||{},y.mux.listeners=Object.assign({},i.mux.listeners),delete i.mux.listeners,Object.keys(y.mux.listeners).forEach(function(E){i.removeEventListener(E,y.mux.listeners[E],!1),y.addEventListener(E,y.mux.listeners[E],!1)}),y.mux.fullscreenChangeListener=i.mux.fullscreenChangeListener,delete i.mux.fullscreenChangeListener,y.mux.swapElement=i.mux.swapElement,y.mux.destroy=i.mux.destroy,delete i.mux,i=y},i.mux.addHLSJS=function(p){t.addHLSJS(s,p)},i.mux.addDashJS=function(p){t.addDashJS(s,p)},i.mux.removeHLSJS=function(){t.removeHLSJS(s)},i.mux.removeDashJS=function(){t.removeDashJS(s)},i.mux.setEmitTranslator=function(p){t.setEmitTranslator(s,p)},i.mux.setStateDataTranslator=function(p){t.setStateDataTranslator(s,p)},i.mux.setGetPlayheadTime=function(p){p||(p=r.getPlayheadTime),t.setGetPlayheadTime(s,p)},t.init(s,r),t.emit(s,"playerready"),i.paused||(t.emit(s,"play"),i.readyState>2&&t.emit(s,"playing")),i.mux.listeners={},r8e.forEach(function(p){p==="error"&&!r.automaticErrorTracking||(i.mux.listeners[p]=function(){var g={};if(p==="error"){if(!i.error||i.error.code===1)return;g.player_error_code=i.error.code,g.player_error_message=n8e[i.error.code]||i.error.message}t.emit(s,p,g)},i.addEventListener(p,i.mux.listeners[p],!1))}),i.mux.listeners.enterpictureinpicture=function(){t.emit(s,"playbackmodechange",{player_playback_mode:"pip",player_playback_mode_data:"{}"})},i.mux.listeners.leavepictureinpicture=function(){var p=A4()?"fullscreen":"standard";t.emit(s,"playbackmodechange",{player_playback_mode:p,player_playback_mode_data:"{}"})},i.addEventListener("enterpictureinpicture",i.mux.listeners.enterpictureinpicture,!1),i.addEventListener("leavepictureinpicture",i.mux.listeners.leavepictureinpicture,!1),i.mux.fullscreenChangeListener=function(){var p=A4(),g=document.fullscreenElement;if(p&&(g===i||g!=null&&g.contains(i)))t.emit(s,"playbackmodechange",{player_playback_mode:"fullscreen",player_playback_mode_data:"{}"});else if(!p){var y=document.pictureInPictureElement===i,x=y?"pip":"standard";t.emit(s,"playbackmodechange",{player_playback_mode:x,player_playback_mode_data:"{}"})}},document.addEventListener("fullscreenchange",i.mux.fullscreenChangeListener,!1)}function s8e(t,e,r,n){var i=n;if(t&&typeof t[e]=="function")try{i=t[e].apply(t,r)}catch(s){ll.info("safeCall error",s)}return i}var iE=nA(Zm()),bx;iE.default&&iE.default.WeakMap&&(bx=new WeakMap);function a8e(t,e){if(!t||!e||!iE.default||typeof iE.default.getComputedStyle!="function")return"";var r;return bx&&bx.has(t)&&(r=bx.get(t)),r||(r=iE.default.getComputedStyle(t,null),bx&&bx.set(t,r)),r.getPropertyValue(e)}function o8e(t){return Math.floor(t*1e3)}var cv={TARGET_DURATION:"#EXT-X-TARGETDURATION",PART_INF:"#EXT-X-PART-INF",SERVER_CONTROL:"#EXT-X-SERVER-CONTROL",INF:"#EXTINF",PROGRAM_DATE_TIME:"#EXT-X-PROGRAM-DATE-TIME",VERSION:"#EXT-X-VERSION",SESSION_DATA:"#EXT-X-SESSION-DATA"},R5=function(t){return this.buffer="",this.manifest={segments:[],serverControl:{},sessionData:{}},this.currentUri={},this.process(t),this.manifest};R5.prototype.process=function(t){var e;for(this.buffer+=t,e=this.buffer.indexOf(`
`);e>-1;e=this.buffer.indexOf(`
`))this.processLine(this.buffer.substring(0,e)),this.buffer=this.buffer.substring(e+1)};R5.prototype.processLine=function(t){var e=t.indexOf(":"),r=d8e(t,e),n=r[0],i=r.length===2?cF(r[1]):void 0;if(n[0]!=="#")this.currentUri.uri=n,this.manifest.segments.push(this.currentUri),this.manifest.targetDuration&&!("duration"in this.currentUri)&&(this.currentUri.duration=this.manifest.targetDuration),this.currentUri={};else switch(n){case cv.TARGET_DURATION:{if(!isFinite(i)||i<0)return;this.manifest.targetDuration=i,this.setHoldBack();break}case cv.PART_INF:{m4(this.manifest,r),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),this.setHoldBack();break}case cv.SERVER_CONTROL:{m4(this.manifest,r),this.setHoldBack();break}case cv.INF:{i===0?this.currentUri.duration=.01:i>0&&(this.currentUri.duration=i);break}case cv.PROGRAM_DATE_TIME:{var s=i,o=new Date(s);this.manifest.dateTimeString||(this.manifest.dateTimeString=s,this.manifest.dateTimeObject=o),this.currentUri.dateTimeString=s,this.currentUri.dateTimeObject=o;break}case cv.VERSION:{m4(this.manifest,r);break}case cv.SESSION_DATA:{var c=h8e(r[1]),u=Rne(c);Object.assign(this.manifest.sessionData,u)}}};R5.prototype.setHoldBack=function(){var t=this.manifest,e=t.serverControl,r=t.targetDuration,n=t.partTargetDuration;if(e){var i="holdBack",s="partHoldBack",o=r&&r*3,c=n&&n*2;r&&!e.hasOwnProperty(i)&&(e[i]=o),o&&e[i]<o&&(e[i]=o),n&&!e.hasOwnProperty(s)&&(e[s]=n*3),n&&e[s]<c&&(e[s]=c)}};var m4=function(t,e){var r=zne(e[0].replace("#EXT-X-","")),n;u8e(e[1])?(n={},n=Object.assign(c8e(e[1]),n)):n=cF(e[1]),t[r]=n},zne=function(t){return t.toLowerCase().replace(/-(\w)/g,function(e){return e[1].toUpperCase()})},cF=function(t){if(t.toLowerCase()==="yes"||t.toLowerCase()==="no")return t.toLowerCase()==="yes";var e=t.indexOf(":")!==-1?t:parseFloat(t);return isNaN(e)?t:e},l8e=function(t){var e={},r=t.split("=");if(r.length>1){var n=zne(r[0]);e[n]=cF(r[1])}return e},c8e=function(t){for(var e=t.split(","),r={},n=0;e.length>n;n++){var i=e[n],s=l8e(i);r=Object.assign(s,r)}return r},u8e=function(t){return t.indexOf("=")>-1},d8e=function(t,e){return e===-1?[t]:[t.substring(0,e),t.substring(e+1)]},h8e=function(t){var e={};if(t){var r=t.search(","),n=t.slice(0,r),i=t.slice(r+1),s=[n,i];return s.forEach(function(o,c){for(var u=o.replace(/['"]+/g,"").split("="),l=0;l<u.length;l++)u[l]==="DATA-ID"&&(e["DATA-ID"]=u[1-l]),u[l]==="VALUE"&&(e.VALUE=u[1-l])}),{data:e}}},f8e=R5,A8e={safeCall:s8e,safeIncrement:$u,getComputedStyle:a8e,secondsToMs:o8e,assign:Object.assign,headersStringToObject:lF,cdnHeadersToRequestId:Qj,extractHostnameAndDomain:ZE,extractHostname:NA,manifestParser:f8e,generateShortID:Pne,generateUUID:XE,now:md.now,findMediaElement:Uj},m8e=A8e,p8e={PLAYER_READY:"playerready",VIEW_INIT:"viewinit",VIDEO_CHANGE:"videochange",PLAY:"play",PAUSE:"pause",PLAYING:"playing",TIME_UPDATE:"timeupdate",SEEKING:"seeking",SEEKED:"seeked",REBUFFER_START:"rebufferstart",REBUFFER_END:"rebufferend",ERROR:"error",ENDED:"ended",RENDITION_CHANGE:"renditionchange",ORIENTATION_CHANGE:"orientationchange",PLAYBACK_MODE_CHANGE:"playbackmodechange",AD_REQUEST:"adrequest",AD_RESPONSE:"adresponse",AD_BREAK_START:"adbreakstart",AD_PLAY:"adplay",AD_PLAYING:"adplaying",AD_PAUSE:"adpause",AD_FIRST_QUARTILE:"adfirstquartile",AD_MID_POINT:"admidpoint",AD_THIRD_QUARTILE:"adthirdquartile",AD_ENDED:"adended",AD_BREAK_END:"adbreakend",AD_ERROR:"aderror",REQUEST_COMPLETED:"requestcompleted",REQUEST_FAILED:"requestfailed",REQUEST_CANCELLED:"requestcanceled",HEARTBEAT:"hb",DESTROY:"destroy"},g8e=p8e,v8e="mux-embed",y8e="5.16.1",x8e="2.1",du={},C0=function(t){var e=arguments;typeof t=="string"?C0.hasOwnProperty(t)?nE.default.setTimeout(function(){e=Array.prototype.splice.call(e,1),C0[t].apply(null,e)},0):ll.warn("`"+t+"` is an unknown task"):typeof t=="function"?nE.default.setTimeout(function(){t(C0)},0):ll.warn("`"+t+"` is invalid.")},b8e={loaded:md.now(),NAME:v8e,VERSION:y8e,API_VERSION:x8e,PLAYER_TRACKED:!1,monitor:function(t,e){return i8e(C0,t,e)},destroyMonitor:function(t){var e=rg(Uj(t),1),r=e[0];r&&r.mux&&typeof r.mux.destroy=="function"?r.mux.destroy():ll.error("A video element monitor for `"+t+"` has not been initialized via `mux.monitor`.")},addHLSJS:function(t,e){var r=yA(t);du[r]?du[r].addHLSJS(e):ll.error("A monitor for `"+r+"` has not been initialized.")},addDashJS:function(t,e){var r=yA(t);du[r]?du[r].addDashJS(e):ll.error("A monitor for `"+r+"` has not been initialized.")},removeHLSJS:function(t){var e=yA(t);du[e]?du[e].removeHLSJS():ll.error("A monitor for `"+e+"` has not been initialized.")},removeDashJS:function(t){var e=yA(t);du[e]?du[e].removeDashJS():ll.error("A monitor for `"+e+"` has not been initialized.")},init:function(t,e){tO()&&e&&e.respectDoNotTrack&&ll.info("The browser's Do Not Track flag is enabled - Mux beaconing is disabled.");var r=yA(t);du[r]=new t8e(C0,r,e)},emit:function(t,e,r){var n=yA(t);du[n]?(du[n].emit(e,r),e==="destroy"&&delete du[n]):ll.error("A monitor for `"+n+"` has not been initialized.")},updateData:function(t,e){var r=yA(t);du[r]?du[r].emit("hb",e):ll.error("A monitor for `"+r+"` has not been initialized.")},setEmitTranslator:function(t,e){var r=yA(t);du[r]?du[r].emitTranslator=e:ll.error("A monitor for `"+r+"` has not been initialized.")},setStateDataTranslator:function(t,e){var r=yA(t);du[r]?du[r].stateDataTranslator=e:ll.error("A monitor for `"+r+"` has not been initialized.")},setGetPlayheadTime:function(t,e){var r=yA(t);du[r]?du[r].getPlayheadTime=e:ll.error("A monitor for `"+r+"` has not been initialized.")},checkDoNotTrack:tO,log:ll,utils:m8e,events:g8e,WINDOW_HIDDEN:!1,WINDOW_UNLOADING:!1};Object.assign(C0,b8e);typeof nE.default<"u"&&typeof nE.default.addEventListener=="function"&&nE.default.addEventListener("pagehide",function(t){t.persisted||(C0.WINDOW_UNLOADING=!0)},!1);var uF=C0;const qn=Number.isFinite||function(t){return typeof t=="number"&&isFinite(t)},w8e=Number.isSafeInteger||function(t){return typeof t=="number"&&Math.abs(t)<=E8e},E8e=Number.MAX_SAFE_INTEGER||9007199254740991;let Oi=(function(t){return t.NETWORK_ERROR="networkError",t.MEDIA_ERROR="mediaError",t.KEY_SYSTEM_ERROR="keySystemError",t.MUX_ERROR="muxError",t.OTHER_ERROR="otherError",t})({}),vr=(function(t){return t.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",t.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",t.KEY_SYSTEM_NO_SESSION="keySystemNoSession",t.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",t.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",t.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",t.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",t.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",t.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",t.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",t.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR="keySystemDestroyMediaKeysError",t.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR="keySystemDestroyCloseSessionError",t.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR="keySystemDestroyRemoveSessionError",t.MANIFEST_LOAD_ERROR="manifestLoadError",t.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",t.MANIFEST_PARSING_ERROR="manifestParsingError",t.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",t.LEVEL_EMPTY_ERROR="levelEmptyError",t.LEVEL_LOAD_ERROR="levelLoadError",t.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",t.LEVEL_PARSING_ERROR="levelParsingError",t.LEVEL_SWITCH_ERROR="levelSwitchError",t.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",t.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",t.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",t.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",t.FRAG_LOAD_ERROR="fragLoadError",t.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",t.FRAG_DECRYPT_ERROR="fragDecryptError",t.FRAG_PARSING_ERROR="fragParsingError",t.FRAG_GAP="fragGap",t.REMUX_ALLOC_ERROR="remuxAllocError",t.KEY_LOAD_ERROR="keyLoadError",t.KEY_LOAD_TIMEOUT="keyLoadTimeOut",t.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",t.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",t.BUFFER_APPEND_ERROR="bufferAppendError",t.BUFFER_APPENDING_ERROR="bufferAppendingError",t.BUFFER_STALLED_ERROR="bufferStalledError",t.BUFFER_FULL_ERROR="bufferFullError",t.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",t.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",t.ASSET_LIST_LOAD_ERROR="assetListLoadError",t.ASSET_LIST_LOAD_TIMEOUT="assetListLoadTimeout",t.ASSET_LIST_PARSING_ERROR="assetListParsingError",t.INTERSTITIAL_ASSET_ITEM_ERROR="interstitialAssetItemError",t.INTERNAL_EXCEPTION="internalException",t.INTERNAL_ABORTED="aborted",t.ATTACH_MEDIA_ERROR="attachMediaError",t.UNKNOWN="unknown",t})({}),Le=(function(t){return t.MEDIA_ATTACHING="hlsMediaAttaching",t.MEDIA_ATTACHED="hlsMediaAttached",t.MEDIA_DETACHING="hlsMediaDetaching",t.MEDIA_DETACHED="hlsMediaDetached",t.MEDIA_ENDED="hlsMediaEnded",t.STALL_RESOLVED="hlsStallResolved",t.BUFFER_RESET="hlsBufferReset",t.BUFFER_CODECS="hlsBufferCodecs",t.BUFFER_CREATED="hlsBufferCreated",t.BUFFER_APPENDING="hlsBufferAppending",t.BUFFER_APPENDED="hlsBufferAppended",t.BUFFER_EOS="hlsBufferEos",t.BUFFERED_TO_END="hlsBufferedToEnd",t.BUFFER_FLUSHING="hlsBufferFlushing",t.BUFFER_FLUSHED="hlsBufferFlushed",t.MANIFEST_LOADING="hlsManifestLoading",t.MANIFEST_LOADED="hlsManifestLoaded",t.MANIFEST_PARSED="hlsManifestParsed",t.LEVEL_SWITCHING="hlsLevelSwitching",t.LEVEL_SWITCHED="hlsLevelSwitched",t.LEVEL_LOADING="hlsLevelLoading",t.LEVEL_LOADED="hlsLevelLoaded",t.LEVEL_UPDATED="hlsLevelUpdated",t.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",t.LEVELS_UPDATED="hlsLevelsUpdated",t.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",t.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",t.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",t.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",t.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",t.AUDIO_TRACK_UPDATED="hlsAudioTrackUpdated",t.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",t.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",t.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",t.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",t.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",t.SUBTITLE_TRACK_UPDATED="hlsSubtitleTrackUpdated",t.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",t.CUES_PARSED="hlsCuesParsed",t.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",t.INIT_PTS_FOUND="hlsInitPtsFound",t.FRAG_LOADING="hlsFragLoading",t.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",t.FRAG_LOADED="hlsFragLoaded",t.FRAG_DECRYPTED="hlsFragDecrypted",t.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",t.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",t.FRAG_PARSING_METADATA="hlsFragParsingMetadata",t.FRAG_PARSED="hlsFragParsed",t.FRAG_BUFFERED="hlsFragBuffered",t.FRAG_CHANGED="hlsFragChanged",t.FPS_DROP="hlsFpsDrop",t.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",t.MAX_AUTO_LEVEL_UPDATED="hlsMaxAutoLevelUpdated",t.ERROR="hlsError",t.DESTROYING="hlsDestroying",t.KEY_LOADING="hlsKeyLoading",t.KEY_LOADED="hlsKeyLoaded",t.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",t.BACK_BUFFER_REACHED="hlsBackBufferReached",t.STEERING_MANIFEST_LOADED="hlsSteeringManifestLoaded",t.ASSET_LIST_LOADING="hlsAssetListLoading",t.ASSET_LIST_LOADED="hlsAssetListLoaded",t.INTERSTITIALS_UPDATED="hlsInterstitialsUpdated",t.INTERSTITIALS_BUFFERED_TO_BOUNDARY="hlsInterstitialsBufferedToBoundary",t.INTERSTITIAL_ASSET_PLAYER_CREATED="hlsInterstitialAssetPlayerCreated",t.INTERSTITIAL_STARTED="hlsInterstitialStarted",t.INTERSTITIAL_ASSET_STARTED="hlsInterstitialAssetStarted",t.INTERSTITIAL_ASSET_ENDED="hlsInterstitialAssetEnded",t.INTERSTITIAL_ASSET_ERROR="hlsInterstitialAssetError",t.INTERSTITIAL_ENDED="hlsInterstitialEnded",t.INTERSTITIALS_PRIMARY_RESUMED="hlsInterstitialsPrimaryResumed",t.PLAYOUT_LIMIT_REACHED="hlsPlayoutLimitReached",t.EVENT_CUE_ENTER="hlsEventCueEnter",t})({});var xa={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},fi={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"};class sx{constructor(e,r=0,n=0){this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=r,this.totalWeight_=n}sample(e,r){const n=Math.pow(this.alpha_,e);this.estimate_=r*(1-n)+n*this.estimate_,this.totalWeight_+=e}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){const e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_}}class _8e{constructor(e,r,n,i=100){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=n,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new sx(e),this.fast_=new sx(r),this.defaultTTFB_=i,this.ttfb_=new sx(e)}update(e,r){const{slow_:n,fast_:i,ttfb_:s}=this;n.halfLife!==e&&(this.slow_=new sx(e,n.getEstimate(),n.getTotalWeight())),i.halfLife!==r&&(this.fast_=new sx(r,i.getEstimate(),i.getTotalWeight())),s.halfLife!==e&&(this.ttfb_=new sx(e,s.getEstimate(),s.getTotalWeight()))}sample(e,r){e=Math.max(e,this.minDelayMs_);const n=8*r,i=e/1e3,s=n/i;this.fast_.sample(i,s),this.slow_.sample(i,s)}sampleTTFB(e){const r=e/1e3,n=Math.sqrt(2)*Math.exp(-Math.pow(r,2)/2);this.ttfb_.sample(n,Math.max(e,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}get defaultEstimate(){return this.defaultEstimate_}destroy(){}}function S8e(t,e,r){return(e=C8e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function nl(){return nl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},nl.apply(null,arguments)}function iK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Uo(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?iK(Object(r),!0).forEach(function(n){S8e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):iK(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function T8e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function C8e(t){var e=T8e(t,"string");return typeof e=="symbol"?e:e+""}class iA{constructor(e,r){this.trace=void 0,this.debug=void 0,this.log=void 0,this.warn=void 0,this.info=void 0,this.error=void 0;const n=`[${e}]:`;this.trace=u0,this.debug=r.debug.bind(null,n),this.log=r.log.bind(null,n),this.warn=r.warn.bind(null,n),this.info=r.info.bind(null,n),this.error=r.error.bind(null,n)}}const u0=function(){},j8e={trace:u0,debug:u0,log:u0,warn:u0,info:u0,error:u0};function iO(){return nl({},j8e)}function N8e(t,e){const r=self.console[t];return r?r.bind(self.console,`${e?"["+e+"] ":""}[${t}] >`):u0}function sK(t,e,r){return e[t]?e[t].bind(e):N8e(t,r)}const sO=iO();function k8e(t,e,r){const n=iO();if(typeof console=="object"&&t===!0||typeof t=="object"){const i=["debug","log","info","warn","error"];i.forEach(s=>{n[s]=sK(s,t,r)});try{n.log(`Debug logs enabled for "${e}" in hls.js version 1.6.15`)}catch{return iO()}i.forEach(s=>{sO[s]=sK(s,t)})}else nl(sO,n);return n}const Ho=sO;function D0(t=!0){return typeof self>"u"?void 0:(t||!self.MediaSource)&&self.ManagedMediaSource||self.MediaSource||self.WebKitMediaSource}function I8e(t){return typeof self<"u"&&t===self.ManagedMediaSource}function Kne(t,e){const r=Object.keys(t),n=Object.keys(e),i=r.length,s=n.length;return!i||!s||i===s&&!r.some(o=>n.indexOf(o)===-1)}function yf(t,e=!1){if(typeof TextDecoder<"u"){const l=new TextDecoder("utf-8").decode(t);if(e){const d=l.indexOf("\0");return d!==-1?l.substring(0,d):l}return l.replace(/\0/g,"")}const r=t.length;let n,i,s,o="",c=0;for(;c<r;){if(n=t[c++],n===0&&e)return o;if(n===0||n===3)continue;switch(n>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:o+=String.fromCharCode(n);break;case 12:case 13:i=t[c++],o+=String.fromCharCode((n&31)<<6|i&63);break;case 14:i=t[c++],s=t[c++],o+=String.fromCharCode((n&15)<<12|(i&63)<<6|(s&63)<<0);break}}return o}function Ud(t){let e="";for(let r=0;r<t.length;r++){let n=t[r].toString(16);n.length<2&&(n="0"+n),e+=n}return e}function Gne(t){return Uint8Array.from(t.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}function L8e(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var p4={exports:{}},aK;function B8e(){return aK||(aK=1,(function(t,e){(function(r){var n=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,i=/^(?=([^\/?#]*))\1([^]*)$/,s=/(?:\/|^)\.(?=\/)/g,o=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,c={buildAbsoluteURL:function(u,l,d){if(d=d||{},u=u.trim(),l=l.trim(),!l){if(!d.alwaysNormalize)return u;var f=c.parseURL(u);if(!f)throw new Error("Error trying to parse base URL.");return f.path=c.normalizePath(f.path),c.buildURLFromParts(f)}var A=c.parseURL(l);if(!A)throw new Error("Error trying to parse relative URL.");if(A.scheme)return d.alwaysNormalize?(A.path=c.normalizePath(A.path),c.buildURLFromParts(A)):l;var p=c.parseURL(u);if(!p)throw new Error("Error trying to parse base URL.");if(!p.netLoc&&p.path&&p.path[0]!=="/"){var g=i.exec(p.path);p.netLoc=g[1],p.path=g[2]}p.netLoc&&!p.path&&(p.path="/");var y={scheme:p.scheme,netLoc:A.netLoc,path:null,params:A.params,query:A.query,fragment:A.fragment};if(!A.netLoc&&(y.netLoc=p.netLoc,A.path[0]!=="/"))if(!A.path)y.path=p.path,A.params||(y.params=p.params,A.query||(y.query=p.query));else{var x=p.path,w=x.substring(0,x.lastIndexOf("/")+1)+A.path;y.path=c.normalizePath(w)}return y.path===null&&(y.path=d.alwaysNormalize?c.normalizePath(A.path):A.path),c.buildURLFromParts(y)},parseURL:function(u){var l=n.exec(u);return l?{scheme:l[1]||"",netLoc:l[2]||"",path:l[3]||"",params:l[4]||"",query:l[5]||"",fragment:l[6]||""}:null},normalizePath:function(u){for(u=u.split("").reverse().join("").replace(s,"");u.length!==(u=u.replace(o,"")).length;);return u.split("").reverse().join("")},buildURLFromParts:function(u){return u.scheme+u.netLoc+u.path+u.params+u.query+u.fragment}};t.exports=c})()})(p4)),p4.exports}var dF=B8e();class hF{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}var cl={AUDIO:"audio",VIDEO:"video",AUDIOVIDEO:"audiovideo"};class Wne{constructor(e){this._byteRange=null,this._url=null,this._stats=null,this._streams=null,this.base=void 0,this.relurl=void 0,typeof e=="string"&&(e={url:e}),this.base=e,O8e(this,"stats")}setByteRange(e,r){const n=e.split("@",2);let i;n.length===1?i=r?.byteRangeEndOffset||0:i=parseInt(n[1]),this._byteRange=[i,parseInt(n[0])+i]}get baseurl(){return this.base.url}get byteRange(){return this._byteRange===null?[]:this._byteRange}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get elementaryStreams(){return this._streams===null&&(this._streams={[cl.AUDIO]:null,[cl.VIDEO]:null,[cl.AUDIOVIDEO]:null}),this._streams}set elementaryStreams(e){this._streams=e}get hasStats(){return this._stats!==null}get hasStreams(){return this._streams!==null}get stats(){return this._stats===null&&(this._stats=new hF),this._stats}set stats(e){this._stats=e}get url(){return!this._url&&this.baseurl&&this.relurl&&(this._url=dF.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""}set url(e){this._url=e}clearElementaryStreamInfo(){const{elementaryStreams:e}=this;e[cl.AUDIO]=null,e[cl.VIDEO]=null,e[cl.AUDIOVIDEO]=null}}function eu(t){return t.sn!=="initSegment"}class g4 extends Wne{constructor(e,r){super(r),this._decryptdata=null,this._programDateTime=null,this._ref=null,this._bitrate=void 0,this.rawProgramDateTime=null,this.tagList=[],this.duration=0,this.sn=0,this.levelkeys=void 0,this.type=void 0,this.loader=null,this.keyLoader=null,this.level=-1,this.cc=0,this.startPTS=void 0,this.endPTS=void 0,this.startDTS=void 0,this.endDTS=void 0,this.start=0,this.playlistOffset=0,this.deltaPTS=void 0,this.maxStartPTS=void 0,this.minEndPTS=void 0,this.data=void 0,this.bitrateTest=!1,this.title=null,this.initSegment=null,this.endList=void 0,this.gap=void 0,this.urlId=0,this.type=e}get byteLength(){if(this.hasStats){const e=this.stats.total;if(e)return e}if(this.byteRange.length){const e=this.byteRange[0],r=this.byteRange[1];if(qn(e)&&qn(r))return r-e}return null}get bitrate(){return this.byteLength?this.byteLength*8/this.duration:this._bitrate?this._bitrate:null}set bitrate(e){this._bitrate=e}get decryptdata(){var e;const{levelkeys:r}=this;if(!r||r.NONE)return null;if(r.identity)this._decryptdata||(this._decryptdata=r.identity.getDecryptData(this.sn));else if(!((e=this._decryptdata)!=null&&e.keyId)){const n=Object.keys(r);if(n.length===1){const i=this._decryptdata=r[n[0]]||null;i&&(this._decryptdata=i.getDecryptData(this.sn,r))}}return this._decryptdata}get end(){return this.start+this.duration}get endProgramDateTime(){if(this.programDateTime===null)return null;const e=qn(this.duration)?this.duration:0;return this.programDateTime+e*1e3}get encrypted(){var e;if((e=this._decryptdata)!=null&&e.encrypted)return!0;if(this.levelkeys){var r;const n=Object.keys(this.levelkeys),i=n.length;if(i>1||i===1&&(r=this.levelkeys[n[0]])!=null&&r.encrypted)return!0}return!1}get programDateTime(){return this._programDateTime===null&&this.rawProgramDateTime&&(this.programDateTime=Date.parse(this.rawProgramDateTime)),this._programDateTime}set programDateTime(e){if(!qn(e)){this._programDateTime=this.rawProgramDateTime=null;return}this._programDateTime=e}get ref(){return eu(this)?(this._ref||(this._ref={base:this.base,start:this.start,duration:this.duration,sn:this.sn,programDateTime:this.programDateTime}),this._ref):null}addStart(e){this.setStart(this.start+e)}setStart(e){this.start=e,this._ref&&(this._ref.start=e)}setDuration(e){this.duration=e,this._ref&&(this._ref.duration=e)}setKeyFormat(e){const r=this.levelkeys;if(r){var n;const i=r[e];i&&!((n=this._decryptdata)!=null&&n.keyId)&&(this._decryptdata=i.getDecryptData(this.sn,r))}}abortRequests(){var e,r;(e=this.loader)==null||e.abort(),(r=this.keyLoader)==null||r.abort()}setElementaryStreamInfo(e,r,n,i,s,o=!1){const{elementaryStreams:c}=this,u=c[e];if(!u){c[e]={startPTS:r,endPTS:n,startDTS:i,endDTS:s,partial:o};return}u.startPTS=Math.min(u.startPTS,r),u.endPTS=Math.max(u.endPTS,n),u.startDTS=Math.min(u.startDTS,i),u.endDTS=Math.max(u.endDTS,s)}}let P8e=class extends Wne{constructor(e,r,n,i,s){super(n),this.fragOffset=0,this.duration=0,this.gap=!1,this.independent=!1,this.relurl=void 0,this.fragment=void 0,this.index=void 0,this.duration=e.decimalFloatingPoint("DURATION"),this.gap=e.bool("GAP"),this.independent=e.bool("INDEPENDENT"),this.relurl=e.enumeratedString("URI"),this.fragment=r,this.index=i;const o=e.enumeratedString("BYTERANGE");o&&this.setByteRange(o,s),s&&(this.fragOffset=s.fragOffset+s.duration)}get start(){return this.fragment.start+this.fragOffset}get end(){return this.start+this.duration}get loaded(){const{elementaryStreams:e}=this;return!!(e.audio||e.video||e.audiovideo)}};function Yne(t,e){const r=Object.getPrototypeOf(t);if(r){const n=Object.getOwnPropertyDescriptor(r,e);return n||Yne(r,e)}}function O8e(t,e){const r=Yne(t,e);r&&(r.enumerable=!0,Object.defineProperty(t,e,r))}const oK=Math.pow(2,32)-1,R8e=[].push,qne={video:1,audio:2,id3:3,text:4};function Ru(t){return String.fromCharCode.apply(null,t)}function Xne(t,e){const r=t[e]<<8|t[e+1];return r<0?65536+r:r}function Ps(t,e){const r=Zne(t,e);return r<0?4294967296+r:r}function lK(t,e){let r=Ps(t,e);return r*=Math.pow(2,32),r+=Ps(t,e+4),r}function Zne(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}function D8e(t){const e=t.byteLength;for(let r=0;r<e;){const n=Ps(t,r);if(n>8&&t[r+4]===109&&t[r+5]===111&&t[r+6]===111&&t[r+7]===102)return!0;r=n>1?r+n:e}return!1}function pa(t,e){const r=[];if(!e.length)return r;const n=t.byteLength;for(let i=0;i<n;){const s=Ps(t,i),o=Ru(t.subarray(i+4,i+8)),c=s>1?i+s:n;if(o===e[0])if(e.length===1)r.push(t.subarray(i+8,c));else{const u=pa(t.subarray(i+8,c),e.slice(1));u.length&&R8e.apply(r,u)}i=c}return r}function M8e(t){const e=[],r=t[0];let n=8;const i=Ps(t,n);n+=4;let s=0,o=0;r===0?(s=Ps(t,n),o=Ps(t,n+4),n+=8):(s=lK(t,n),o=lK(t,n+8),n+=16),n+=2;let c=t.length+o;const u=Xne(t,n);n+=2;for(let l=0;l<u;l++){let d=n;const f=Ps(t,d);d+=4;const A=f&2147483647;if((f&2147483648)>>>31===1)return Ho.warn("SIDX has hierarchical references (not supported)"),null;const g=Ps(t,d);d+=4,e.push({referenceSize:A,subsegmentDuration:g,info:{duration:g/i,start:c,end:c+A-1}}),c+=A,d+=4,n=d}return{earliestPresentationTime:s,timescale:i,version:r,referencesCount:u,references:e}}function Jne(t){const e=[],r=pa(t,["moov","trak"]);for(let i=0;i<r.length;i++){const s=r[i],o=pa(s,["tkhd"])[0];if(o){let c=o[0];const u=Ps(o,c===0?12:20),l=pa(s,["mdia","mdhd"])[0];if(l){c=l[0];const d=Ps(l,c===0?12:20),f=pa(s,["mdia","hdlr"])[0];if(f){const A=Ru(f.subarray(8,12)),p={soun:cl.AUDIO,vide:cl.VIDEO}[A],g=pa(s,["mdia","minf","stbl","stsd"])[0],y=F8e(g);p?(e[u]={timescale:d,type:p,stsd:y},e[p]=Uo({timescale:d,id:u},y)):e[u]={timescale:d,type:A,stsd:y}}}}}return pa(t,["moov","mvex","trex"]).forEach(i=>{const s=Ps(i,4),o=e[s];o&&(o.default={duration:Ps(i,12),flags:Ps(i,20)})}),e}function F8e(t){const e=t.subarray(8),r=e.subarray(86),n=Ru(e.subarray(4,8));let i=n,s;const o=n==="enca"||n==="encv";if(o){const l=pa(e,[n])[0].subarray(n==="enca"?28:78);pa(l,["sinf"]).forEach(f=>{const A=pa(f,["schm"])[0];if(A){const p=Ru(A.subarray(4,8));if(p==="cbcs"||p==="cenc"){const g=pa(f,["frma"])[0];g&&(i=Ru(g))}}})}const c=i;switch(i){case"avc1":case"avc2":case"avc3":case"avc4":{const u=pa(r,["avcC"])[0];u&&u.length>3&&(i+="."+dS(u[1])+dS(u[2])+dS(u[3]),s=uS(c==="avc1"?"dva1":"dvav",r));break}case"mp4a":{const u=pa(e,[n])[0],l=pa(u.subarray(28),["esds"])[0];if(l&&l.length>7){let d=4;if(l[d++]!==3)break;d=v4(l,d),d+=2;const f=l[d++];if(f&128&&(d+=2),f&64&&(d+=l[d++]),l[d++]!==4)break;d=v4(l,d);const A=l[d++];if(A===64)i+="."+dS(A);else break;if(d+=12,l[d++]!==5)break;d=v4(l,d);const p=l[d++];let g=(p&248)>>3;g===31&&(g+=1+((p&7)<<3)+((l[d]&224)>>5)),i+="."+g}break}case"hvc1":case"hev1":{const u=pa(r,["hvcC"])[0];if(u&&u.length>12){const l=u[1],d=["","A","B","C"][l>>6],f=l&31,A=Ps(u,2),p=(l&32)>>5?"H":"L",g=u[12],y=u.subarray(6,12);i+="."+d+f,i+="."+U8e(A).toString(16).toUpperCase(),i+="."+p+g;let x="";for(let w=y.length;w--;){const E=y[w];(E||x)&&(x="."+E.toString(16).toUpperCase()+x)}i+=x}s=uS(c=="hev1"?"dvhe":"dvh1",r);break}case"dvh1":case"dvhe":case"dvav":case"dva1":case"dav1":{i=uS(i,r)||i;break}case"vp09":{const u=pa(r,["vpcC"])[0];if(u&&u.length>6){const l=u[4],d=u[5],f=u[6]>>4&15;i+="."+Tm(l)+"."+Tm(d)+"."+Tm(f)}break}case"av01":{const u=pa(r,["av1C"])[0];if(u&&u.length>2){const l=u[1]>>>5,d=u[1]&31,f=u[2]>>>7?"H":"M",A=(u[2]&64)>>6,p=(u[2]&32)>>5,g=l===2&&A?p?12:10:A?10:8,y=(u[2]&16)>>4,x=(u[2]&8)>>3,w=(u[2]&4)>>2,E=u[2]&3;i+="."+l+"."+Tm(d)+f+"."+Tm(g)+"."+y+"."+x+w+E+"."+Tm(1)+"."+Tm(1)+"."+Tm(1)+"."+0,s=uS("dav1",r)}break}}return{codec:i,encrypted:o,supplemental:s}}function uS(t,e){const r=pa(e,["dvvC"]),n=r.length?r[0]:pa(e,["dvcC"])[0];if(n){const i=n[2]>>1&127,s=n[2]<<5&32|n[3]>>3&31;return t+"."+Tm(i)+"."+Tm(s)}}function U8e(t){let e=0;for(let r=0;r<32;r++)e|=(t>>r&1)<<31-r;return e>>>0}function v4(t,e){const r=e+5;for(;t[e++]&128&&e<r;);return e}function dS(t){return("0"+t.toString(16).toUpperCase()).slice(-2)}function Tm(t){return(t<10?"0":"")+t}function $8e(t,e){if(!t||!e)return;const r=e.keyId;r&&e.isCommonEncryption&&eie(t,(n,i)=>{const s=n.subarray(8,24);s.some(o=>o!==0)||(Ho.log(`[eme] Patching keyId in 'enc${i?"a":"v"}>sinf>>tenc' box: ${Ud(s)} -> ${Ud(r)}`),n.set(r,8))})}function H8e(t){const e=[];return eie(t,r=>e.push(r.subarray(8,24))),e}function eie(t,e){pa(t,["moov","trak"]).forEach(n=>{const i=pa(n,["mdia","minf","stbl","stsd"])[0];if(!i)return;const s=i.subarray(8);let o=pa(s,["enca"]);const c=o.length>0;c||(o=pa(s,["encv"])),o.forEach(u=>{const l=c?u.subarray(28):u.subarray(78);pa(l,["sinf"]).forEach(f=>{const A=tie(f);A&&e(A,c)})})})}function tie(t){const e=pa(t,["schm"])[0];if(e){const r=Ru(e.subarray(4,8));if(r==="cbcs"||r==="cenc"){const n=pa(t,["schi","tenc"])[0];if(n)return n}}}function Q8e(t,e,r){const n={},i=pa(t,["moof","traf"]);for(let s=0;s<i.length;s++){const o=i[s],c=pa(o,["tfhd"])[0],u=Ps(c,4),l=e[u];if(!l)continue;n[u]||(n[u]={start:NaN,duration:0,sampleCount:0,timescale:l.timescale,type:l.type});const d=n[u],f=pa(o,["tfdt"])[0];if(f){const T=f[0];let C=Ps(f,4);T===1&&(C===oK?r.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"):(C*=oK+1,C+=Ps(f,8))),qn(C)&&(!qn(d.start)||C<d.start)&&(d.start=C)}const A=l.default,p=Ps(c,0)|A?.flags;let g=A?.duration||0;p&8&&(p&2?g=Ps(c,12):g=Ps(c,8));const y=pa(o,["trun"]);let x=d.start||0,w=0,E=g;for(let T=0;T<y.length;T++){const C=y[T],N=Ps(C,4),I=d.sampleCount;d.sampleCount+=N;const U=C[3]&1,K=C[3]&4,Y=C[2]&1,re=C[2]&2,se=C[2]&4,Ae=C[2]&8;let we=8,Ce=N;for(U&&(we+=4),K&&N&&(!(C[we+1]&1)&&d.keyFrameIndex===void 0&&(d.keyFrameIndex=I),we+=4,Y?(E=Ps(C,we),we+=4):E=g,re&&(we+=4),Ae&&(we+=4),x+=E,w+=E,Ce--);Ce--;)Y?(E=Ps(C,we),we+=4):E=g,re&&(we+=4),se&&(C[we+1]&1||d.keyFrameIndex===void 0&&(d.keyFrameIndex=d.sampleCount-(Ce+1),d.keyFrameStart=x),we+=4),Ae&&(we+=4),x+=E,w+=E;!w&&g&&(w+=g*N)}d.duration+=w}if(!Object.keys(n).some(s=>n[s].duration)){let s=1/0,o=0;const c=pa(t,["sidx"]);for(let u=0;u<c.length;u++){const l=M8e(c[u]);if(l!=null&&l.references){s=Math.min(s,l.earliestPresentationTime/l.timescale);const d=l.references.reduce((f,A)=>f+A.info.duration||0,0);o=Math.max(o,d+l.earliestPresentationTime/l.timescale)}}o&&qn(o)&&Object.keys(n).forEach(u=>{n[u].duration||(n[u].duration=o*n[u].timescale-n[u].start)})}return n}function V8e(t){const e={valid:null,remainder:null},r=pa(t,["moof"]);if(r.length<2)return e.remainder=t,e;const n=r[r.length-1];return e.valid=t.slice(0,n.byteOffset-8),e.remainder=t.slice(n.byteOffset-8),e}function Jf(t,e){const r=new Uint8Array(t.length+e.length);return r.set(t),r.set(e,t.length),r}function cK(t,e){const r=[],n=e.samples,i=e.timescale,s=e.id;let o=!1;return pa(n,["moof"]).map(u=>{const l=u.byteOffset-8;pa(u,["traf"]).map(f=>{const A=pa(f,["tfdt"]).map(p=>{const g=p[0];let y=Ps(p,4);return g===1&&(y*=Math.pow(2,32),y+=Ps(p,8)),y/i})[0];return A!==void 0&&(t=A),pa(f,["tfhd"]).map(p=>{const g=Ps(p,4),y=Ps(p,0)&16777215,x=(y&1)!==0,w=(y&2)!==0,E=(y&8)!==0;let T=0;const C=(y&16)!==0;let N=0;const I=(y&32)!==0;let U=8;g===s&&(x&&(U+=8),w&&(U+=4),E&&(T=Ps(p,U),U+=4),C&&(N=Ps(p,U),U+=4),I&&(U+=4),e.type==="video"&&(o=D5(e.codec)),pa(f,["trun"]).map(K=>{const Y=K[0],re=Ps(K,0)&16777215,se=(re&1)!==0;let Ae=0;const we=(re&4)!==0,Ce=(re&256)!==0;let ve=0;const ne=(re&512)!==0;let ce=0;const ae=(re&1024)!==0,De=(re&2048)!==0;let Oe=0;const be=Ps(K,4);let de=8;se&&(Ae=Ps(K,de),de+=4),we&&(de+=4);let xe=Ae+l;for(let je=0;je<be;je++){if(Ce?(ve=Ps(K,de),de+=4):ve=T,ne?(ce=Ps(K,de),de+=4):ce=N,ae&&(de+=4),De&&(Y===0?Oe=Ps(K,de):Oe=Zne(K,de),de+=4),e.type===cl.VIDEO){let Me=0;for(;Me<ce;){const Re=Ps(n,xe);if(xe+=4,z8e(o,n[xe])){const it=n.subarray(xe,xe+Re);fF(it,o?2:1,t+Oe/i,r)}xe+=Re,Me+=Re+4}}t+=ve/i}}))})})}),r}function D5(t){if(!t)return!1;const e=t.substring(0,4);return e==="hvc1"||e==="hev1"||e==="dvh1"||e==="dvhe"}function z8e(t,e){if(t){const r=e>>1&63;return r===39||r===40}else return(e&31)===6}function fF(t,e,r,n){const i=rie(t);let s=0;s+=e;let o=0,c=0,u=0;for(;s<i.length;){o=0;do{if(s>=i.length)break;u=i[s++],o+=u}while(u===255);c=0;do{if(s>=i.length)break;u=i[s++],c+=u}while(u===255);const l=i.length-s;let d=s;if(c<l)s+=c;else if(c>l){Ho.error(`Malformed SEI payload. ${c} is too small, only ${l} bytes left to parse.`);break}if(o===4){if(i[d++]===181){const A=Xne(i,d);if(d+=2,A===49){const p=Ps(i,d);if(d+=4,p===1195456820){const g=i[d++];if(g===3){const y=i[d++],x=31&y,w=64&y,E=w?2+x*3:0,T=new Uint8Array(E);if(w){T[0]=y;for(let C=1;C<E;C++)T[C]=i[d++]}n.push({type:g,payloadType:o,pts:r,bytes:T})}}}}}else if(o===5&&c>16){const f=[];for(let g=0;g<16;g++){const y=i[d++].toString(16);f.push(y.length==1?"0"+y:y),(g===3||g===5||g===7||g===9)&&f.push("-")}const A=c-16,p=new Uint8Array(A);for(let g=0;g<A;g++)p[g]=i[d++];n.push({payloadType:o,pts:r,uuid:f.join(""),userData:yf(p),userDataBytes:p})}}}function rie(t){const e=t.byteLength,r=[];let n=1;for(;n<e-2;)t[n]===0&&t[n+1]===0&&t[n+2]===3?(r.push(n+2),n+=2):n++;if(r.length===0)return t;const i=e-r.length,s=new Uint8Array(i);let o=0;for(n=0;n<i;o++,n++)o===r[0]&&(o++,r.shift()),s[n]=t[o];return s}function K8e(t){const e=t[0];let r="",n="",i=0,s=0,o=0,c=0,u=0,l=0;if(e===0){for(;Ru(t.subarray(l,l+1))!=="\0";)r+=Ru(t.subarray(l,l+1)),l+=1;for(r+=Ru(t.subarray(l,l+1)),l+=1;Ru(t.subarray(l,l+1))!=="\0";)n+=Ru(t.subarray(l,l+1)),l+=1;n+=Ru(t.subarray(l,l+1)),l+=1,i=Ps(t,12),s=Ps(t,16),c=Ps(t,20),u=Ps(t,24),l=28}else if(e===1){l+=4,i=Ps(t,l),l+=4;const f=Ps(t,l);l+=4;const A=Ps(t,l);for(l+=4,o=2**32*f+A,w8e(o)||(o=Number.MAX_SAFE_INTEGER,Ho.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),c=Ps(t,l),l+=4,u=Ps(t,l),l+=4;Ru(t.subarray(l,l+1))!=="\0";)r+=Ru(t.subarray(l,l+1)),l+=1;for(r+=Ru(t.subarray(l,l+1)),l+=1;Ru(t.subarray(l,l+1))!=="\0";)n+=Ru(t.subarray(l,l+1)),l+=1;n+=Ru(t.subarray(l,l+1)),l+=1}const d=t.subarray(l,t.byteLength);return{schemeIdUri:r,value:n,timeScale:i,presentationTime:o,presentationTimeDelta:s,eventDuration:c,id:u,payload:d}}function G8e(t,...e){const r=e.length;let n=8,i=r;for(;i--;)n+=e[i].byteLength;const s=new Uint8Array(n);for(s[0]=n>>24&255,s[1]=n>>16&255,s[2]=n>>8&255,s[3]=n&255,s.set(t,4),i=0,n=8;i<r;i++)s.set(e[i],n),n+=e[i].byteLength;return s}function W8e(t,e,r){if(t.byteLength!==16)throw new RangeError("Invalid system id");let n,i;n=0,i=new Uint8Array;let s;n>0?(s=new Uint8Array(4),e.length>0&&new DataView(s.buffer).setUint32(0,e.length,!1)):s=new Uint8Array;const o=new Uint8Array(4);return r.byteLength>0&&new DataView(o.buffer).setUint32(0,r.byteLength,!1),G8e([112,115,115,104],new Uint8Array([n,0,0,0]),t,s,i,o,r)}function Y8e(t){const e=[];if(t instanceof ArrayBuffer){const r=t.byteLength;let n=0;for(;n+32<r;){const i=new DataView(t,n),s=q8e(i);e.push(s),n+=s.size}}return e}function q8e(t){const e=t.getUint32(0),r=t.byteOffset,n=t.byteLength;if(n<e)return{offset:r,size:n};if(t.getUint32(4)!==1886614376)return{offset:r,size:e};const s=t.getUint32(8)>>>24;if(s!==0&&s!==1)return{offset:r,size:e};const o=t.buffer,c=Ud(new Uint8Array(o,r+12,16));let u=null,l=null,d=0;if(s===0)d=28;else{const A=t.getUint32(28);if(!A||n<32+A*16)return{offset:r,size:e};u=[];for(let p=0;p<A;p++)u.push(new Uint8Array(o,r+32+p*16,16));d=32+A*16}if(!d)return{offset:r,size:e};const f=t.getUint32(d);return e-32<f?{offset:r,size:e}:(l=new Uint8Array(o,r+d+4,f),{version:s,systemId:c,kids:u,data:l,offset:r,size:e})}const nie=()=>/\(Windows.+Firefox\//i.test(navigator.userAgent),Hb={audio:{a3ds:1,"ac-3":.95,"ac-4":1,alac:.9,alaw:1,dra1:1,"dts+":1,"dts-":1,dtsc:1,dtse:1,dtsh:1,"ec-3":.9,enca:1,fLaC:.9,flac:.9,FLAC:.9,g719:1,g726:1,m4ae:1,mha1:1,mha2:1,mhm1:1,mhm2:1,mlpa:1,mp4a:1,"raw ":1,Opus:1,opus:1,samr:1,sawb:1,sawp:1,sevc:1,sqcp:1,ssmv:1,twos:1,ulaw:1},video:{avc1:1,avc2:1,avc3:1,avc4:1,avcp:1,av01:.8,dav1:.8,drac:1,dva1:1,dvav:1,dvh1:.7,dvhe:.7,encv:1,hev1:.75,hvc1:.75,mjp2:1,mp4v:1,mvc1:1,mvc2:1,mvc3:1,mvc4:1,resv:1,rv60:1,s263:1,svc1:1,svc2:1,"vc-1":1,vp08:1,vp09:.9},text:{stpp:1,wvtt:1}};function AF(t,e){const r=Hb[e];return!!r&&!!r[t.slice(0,4)]}function JE(t,e,r=!0){return!t.split(",").some(n=>!mF(n,e,r))}function mF(t,e,r=!0){var n;const i=D0(r);return(n=i?.isTypeSupported(e2(t,e)))!=null?n:!1}function e2(t,e){return`${e}/mp4;codecs=${t}`}function uK(t){if(t){const e=t.substring(0,4);return Hb.video[e]}return 2}function Vj(t){const e=nie();return t.split(",").reduce((r,n)=>{const s=e&&D5(n)?9:Hb.video[n];return s?(s*2+r)/(r?3:2):(Hb.audio[n]+r)/(r?2:1)},0)}const y4={};function X8e(t,e=!0){if(y4[t])return y4[t];const r={flac:["flac","fLaC","FLAC"],opus:["opus","Opus"],"mp4a.40.34":["mp3"]}[t];for(let i=0;i<r.length;i++){var n;if(mF(r[i],"audio",e))return y4[t]=r[i],r[i];if(r[i]==="mp3"&&(n=D0(e))!=null&&n.isTypeSupported("audio/mpeg"))return""}return t}const Z8e=/flac|opus|mp4a\.40\.34/i;function zj(t,e=!0){return t.replace(Z8e,r=>X8e(r.toLowerCase(),e))}function J8e(t,e){const r=[];if(t){const n=t.split(",");for(let i=0;i<n.length;i++)AF(n[i],"video")||r.push(n[i])}return e&&r.push(e),r.join(",")}function aT(t,e){if(t&&(t.length>4||["ac-3","ec-3","alac","fLaC","Opus"].indexOf(t)!==-1)&&(dK(t,"audio")||dK(t,"video")))return t;if(e){const r=e.split(",");if(r.length>1){if(t){for(let n=r.length;n--;)if(r[n].substring(0,4)===t.substring(0,4))return r[n]}return r[0]}}return e||t}function dK(t,e){return AF(t,e)&&mF(t,e)}function e7e(t){const e=t.split(",");for(let r=0;r<e.length;r++){const n=e[r].split(".");n.length>2&&n[0]==="avc1"&&(e[r]=`avc1.${parseInt(n[1]).toString(16)}${("000"+parseInt(n[2]).toString(16)).slice(-4)}`)}return e.join(",")}function t7e(t){if(t.startsWith("av01.")){const e=t.split("."),r=["0","111","01","01","01","0"];for(let n=e.length;n>4&&n<10;n++)e[n]=r[n-4];return e.join(".")}return t}function hK(t){const e=D0(t)||{isTypeSupported:()=>!1};return{mpeg:e.isTypeSupported("audio/mpeg"),mp3:e.isTypeSupported('audio/mp4; codecs="mp3"'),ac3:e.isTypeSupported('audio/mp4; codecs="ac-3"')}}function aO(t){return t.replace(/^.+codecs=["']?([^"']+).*$/,"$1")}const r7e={supported:!0,powerEfficient:!0,smooth:!0},n7e={supported:!1,smooth:!1,powerEfficient:!1},iie={supported:!0,configurations:[],decodingInfoResults:[r7e]};function sie(t,e){return{supported:!1,configurations:e,decodingInfoResults:[n7e],error:t}}function i7e(t,e,r,n,i,s){const o=t.videoCodec,c=t.audioCodec?t.audioGroups:null,u=s?.audioCodec,l=s?.channels,d=l?parseInt(l):u?1/0:2;let f=null;if(c!=null&&c.length)try{c.length===1&&c[0]?f=e.groups[c[0]].channels:f=c.reduce((A,p)=>{if(p){const g=e.groups[p];if(!g)throw new Error(`Audio track group ${p} not found`);Object.keys(g.channels).forEach(y=>{A[y]=(A[y]||0)+g.channels[y]})}return A},{2:0})}catch{return!0}return o!==void 0&&(o.split(",").some(A=>D5(A))||t.width>1920&&t.height>1088||t.height>1920&&t.width>1088||t.frameRate>Math.max(n,30)||t.videoRange!=="SDR"&&t.videoRange!==r||t.bitrate>Math.max(i,8e6))||!!f&&qn(d)&&Object.keys(f).some(A=>parseInt(A)>d)}function aie(t,e,r,n={}){const i=t.videoCodec;if(!i&&!t.audioCodec||!r)return Promise.resolve(iie);const s=[],o=s7e(t),c=o.length,u=a7e(t,e,c>0),l=u.length;for(let d=c||1*l||1;d--;){const f={type:"media-source"};if(c&&(f.video=o[d%c]),l){f.audio=u[d%l];const A=f.audio.bitrate;f.video&&A&&(f.video.bitrate-=A)}s.push(f)}if(i){const d=navigator.userAgent;if(i.split(",").some(f=>D5(f))&&nie())return Promise.resolve(sie(new Error(`Overriding Windows Firefox HEVC MediaCapabilities result based on user-agent string: (${d})`),s))}return Promise.all(s.map(d=>{const f=l7e(d);return n[f]||(n[f]=r.decodingInfo(d))})).then(d=>({supported:!d.some(f=>!f.supported),configurations:s,decodingInfoResults:d})).catch(d=>({supported:!1,configurations:s,decodingInfoResults:[],error:d}))}function s7e(t){var e;const r=(e=t.videoCodec)==null?void 0:e.split(","),n=oie(t),i=t.width||640,s=t.height||480,o=t.frameRate||30,c=t.videoRange.toLowerCase();return r?r.map(u=>{const l={contentType:e2(t7e(u),"video"),width:i,height:s,bitrate:n,framerate:o};return c!=="sdr"&&(l.transferFunction=c),l}):[]}function a7e(t,e,r){var n;const i=(n=t.audioCodec)==null?void 0:n.split(","),s=oie(t);return i&&t.audioGroups?t.audioGroups.reduce((o,c)=>{var u;const l=c?(u=e.groups[c])==null?void 0:u.tracks:null;return l?l.reduce((d,f)=>{if(f.groupId===c){const A=parseFloat(f.channels||"");i.forEach(p=>{const g={contentType:e2(p,"audio"),bitrate:r?o7e(p,s):s};A&&(g.channels=""+A),d.push(g)})}return d},o):o},[]):[]}function o7e(t,e){if(e<=1)return 1;let r=128e3;return t==="ec-3"?r=768e3:t==="ac-3"&&(r=64e4),Math.min(e/2,r)}function oie(t){return Math.ceil(Math.max(t.bitrate*.9,t.averageBitrate)/1e3)*1e3||1}function l7e(t){let e="";const{audio:r,video:n}=t;if(n){const i=aO(n.contentType);e+=`${i}_r${n.height}x${n.width}f${Math.ceil(n.framerate)}${n.transferFunction||"sd"}_${Math.ceil(n.bitrate/1e5)}`}if(r){const i=aO(r.contentType);e+=`${n?"_":""}${i}_c${r.channels}`}return e}const oO=["NONE","TYPE-0","TYPE-1",null];function c7e(t){return oO.indexOf(t)>-1}const Kj=["SDR","PQ","HLG"];function u7e(t){return!!t&&Kj.indexOf(t)>-1}var oT={No:"",Yes:"YES",v2:"v2"};function fK(t){const{canSkipUntil:e,canSkipDateRanges:r,age:n}=t,i=n<e/2;return e&&i?r?oT.v2:oT.Yes:oT.No}class AK{constructor(e,r,n){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=r,this.skip=n}addDirectives(e){const r=new self.URL(e);return this.msn!==void 0&&r.searchParams.set("_HLS_msn",this.msn.toString()),this.part!==void 0&&r.searchParams.set("_HLS_part",this.part.toString()),this.skip&&r.searchParams.set("_HLS_skip",this.skip),r.href}}class t2{constructor(e){if(this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.url=void 0,this.frameRate=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.supplemental=void 0,this.videoCodec=void 0,this.width=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.supportedPromise=void 0,this.supportedResult=void 0,this._avgBitrate=0,this._audioGroups=void 0,this._subtitleGroups=void 0,this._urlId=0,this.url=[e.url],this._attrs=[e.attrs],this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.frameRate=e.attrs.optionalFloat("FRAME-RATE",0),this._avgBitrate=e.attrs.decimalInteger("AVERAGE-BANDWIDTH"),this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.codecSet=[e.videoCodec,e.audioCodec].filter(n=>!!n).map(n=>n.substring(0,4)).join(","),"supplemental"in e){var r;this.supplemental=e.supplemental;const n=(r=e.supplemental)==null?void 0:r.videoCodec;n&&n!==e.videoCodec&&(this.codecSet+=`,${n.substring(0,4)}`)}this.addGroupId("audio",e.attrs.AUDIO),this.addGroupId("text",e.attrs.SUBTITLES)}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get averageBitrate(){return this._avgBitrate||this.realBitrate||this.bitrate}get attrs(){return this._attrs[0]}get codecs(){return this.attrs.CODECS||""}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get videoRange(){return this.attrs["VIDEO-RANGE"]||"SDR"}get score(){return this.attrs.optionalFloat("SCORE",0)}get uri(){return this.url[0]||""}hasAudioGroup(e){return mK(this._audioGroups,e)}hasSubtitleGroup(e){return mK(this._subtitleGroups,e)}get audioGroups(){return this._audioGroups}get subtitleGroups(){return this._subtitleGroups}addGroupId(e,r){if(r){if(e==="audio"){let n=this._audioGroups;n||(n=this._audioGroups=[]),n.indexOf(r)===-1&&n.push(r)}else if(e==="text"){let n=this._subtitleGroups;n||(n=this._subtitleGroups=[]),n.indexOf(r)===-1&&n.push(r)}}}get urlId(){return 0}set urlId(e){}get audioGroupIds(){return this.audioGroups?[this.audioGroupId]:void 0}get textGroupIds(){return this.subtitleGroups?[this.textGroupId]:void 0}get audioGroupId(){var e;return(e=this.audioGroups)==null?void 0:e[0]}get textGroupId(){var e;return(e=this.subtitleGroups)==null?void 0:e[0]}addFallback(){}}function mK(t,e){return!e||!t?!1:t.indexOf(e)!==-1}function d7e(){if(typeof matchMedia=="function"){const t=matchMedia("(dynamic-range: high)"),e=matchMedia("bad query");if(t.media!==e.media)return t.matches===!0}return!1}function h7e(t,e){let r=!1,n=[];if(t&&(r=t!=="SDR",n=[t]),e){n=e.allowedVideoRanges||Kj.slice(0);const i=n.join("")!=="SDR"&&!e.videoCodec;r=e.preferHDR!==void 0?e.preferHDR:i&&d7e(),r||(n=["SDR"])}return{preferHDR:r,allowedVideoRanges:n}}const f7e=t=>{const e=new WeakSet;return(r,n)=>{if(t&&(n=t(r,n)),typeof n=="object"&&n!==null){if(e.has(n))return;e.add(n)}return n}},fl=(t,e)=>JSON.stringify(t,f7e(e));function A7e(t,e,r,n,i){const s=Object.keys(t),o=n?.channels,c=n?.audioCodec,u=i?.videoCodec,l=o&&parseInt(o)===2;let d=!1,f=!1,A=1/0,p=1/0,g=1/0,y=1/0,x=0,w=[];const{preferHDR:E,allowedVideoRanges:T}=h7e(e,i);for(let K=s.length;K--;){const Y=t[s[K]];d||(d=Y.channels[2]>0),A=Math.min(A,Y.minHeight),p=Math.min(p,Y.minFramerate),g=Math.min(g,Y.minBitrate),T.filter(se=>Y.videoRanges[se]>0).length>0&&(f=!0)}A=qn(A)?A:0,p=qn(p)?p:0;const C=Math.max(1080,A),N=Math.max(30,p);g=qn(g)?g:r,r=Math.max(g,r),f||(e=void 0);const I=s.length>1;return{codecSet:s.reduce((K,Y)=>{const re=t[Y];if(Y===K)return K;if(w=f?T.filter(se=>re.videoRanges[se]>0):[],I){if(re.minBitrate>r)return cm(Y,`min bitrate of ${re.minBitrate} > current estimate of ${r}`),K;if(!re.hasDefaultAudio)return cm(Y,"no renditions with default or auto-select sound found"),K;if(c&&Y.indexOf(c.substring(0,4))%5!==0)return cm(Y,`audio codec preference "${c}" not found`),K;if(o&&!l){if(!re.channels[o])return cm(Y,`no renditions with ${o} channel sound found (channels options: ${Object.keys(re.channels)})`),K}else if((!c||l)&&d&&re.channels[2]===0)return cm(Y,"no renditions with stereo sound found"),K;if(re.minHeight>C)return cm(Y,`min resolution of ${re.minHeight} > maximum of ${C}`),K;if(re.minFramerate>N)return cm(Y,`min framerate of ${re.minFramerate} > maximum of ${N}`),K;if(!w.some(se=>re.videoRanges[se]>0))return cm(Y,`no variants with VIDEO-RANGE of ${fl(w)} found`),K;if(u&&Y.indexOf(u.substring(0,4))%5!==0)return cm(Y,`video codec preference "${u}" not found`),K;if(re.maxScore<x)return cm(Y,`max score of ${re.maxScore} < selected max of ${x}`),K}return K&&(Vj(Y)>=Vj(K)||re.fragmentError>t[K].fragmentError)?K:(y=re.minIndex,x=re.maxScore,Y)},void 0),videoRanges:w,preferHDR:E,minFramerate:p,minBitrate:g,minIndex:y}}function cm(t,e){Ho.log(`[abr] start candidates with "${t}" ignored because ${e}`)}function lie(t){return t.reduce((e,r)=>{let n=e.groups[r.groupId];n||(n=e.groups[r.groupId]={tracks:[],channels:{2:0},hasDefault:!1,hasAutoSelect:!1}),n.tracks.push(r);const i=r.channels||"2";return n.channels[i]=(n.channels[i]||0)+1,n.hasDefault=n.hasDefault||r.default,n.hasAutoSelect=n.hasAutoSelect||r.autoselect,n.hasDefault&&(e.hasDefaultAudio=!0),n.hasAutoSelect&&(e.hasAutoSelectAudio=!0),e},{hasDefaultAudio:!1,hasAutoSelectAudio:!1,groups:{}})}function m7e(t,e,r,n){return t.slice(r,n+1).reduce((i,s,o)=>{if(!s.codecSet)return i;const c=s.audioGroups;let u=i[s.codecSet];u||(i[s.codecSet]=u={minBitrate:1/0,minHeight:1/0,minFramerate:1/0,minIndex:o,maxScore:0,videoRanges:{SDR:0},channels:{2:0},hasDefaultAudio:!c,fragmentError:0}),u.minBitrate=Math.min(u.minBitrate,s.bitrate);const l=Math.min(s.height,s.width);return u.minHeight=Math.min(u.minHeight,l),u.minFramerate=Math.min(u.minFramerate,s.frameRate),u.minIndex=Math.min(u.minIndex,o),u.maxScore=Math.max(u.maxScore,s.score),u.fragmentError+=s.fragmentError,u.videoRanges[s.videoRange]=(u.videoRanges[s.videoRange]||0)+1,c&&c.forEach(d=>{if(!d)return;const f=e.groups[d];f&&(u.hasDefaultAudio=u.hasDefaultAudio||e.hasDefaultAudio?f.hasDefault:f.hasAutoSelect||!e.hasDefaultAudio&&!e.hasAutoSelectAudio,Object.keys(f.channels).forEach(A=>{u.channels[A]=(u.channels[A]||0)+f.channels[A]}))}),i},{})}function pK(t){if(!t)return t;const{lang:e,assocLang:r,characteristics:n,channels:i,audioCodec:s}=t;return{lang:e,assocLang:r,characteristics:n,channels:i,audioCodec:s}}function Om(t,e,r){if("attrs"in t){const n=e.indexOf(t);if(n!==-1)return n}for(let n=0;n<e.length;n++){const i=e[n];if(Xv(t,i,r))return n}return-1}function Xv(t,e,r){const{groupId:n,name:i,lang:s,assocLang:o,default:c}=t,u=t.forced;return(n===void 0||e.groupId===n)&&(i===void 0||e.name===i)&&(s===void 0||p7e(s,e.lang))&&(s===void 0||e.assocLang===o)&&(c===void 0||e.default===c)&&(u===void 0||e.forced===u)&&(!("characteristics"in t)||g7e(t.characteristics||"",e.characteristics))&&(r===void 0||r(t,e))}function p7e(t,e="--"){return t.length===e.length?t===e:t.startsWith(e)||e.startsWith(t)}function g7e(t,e=""){const r=t.split(","),n=e.split(",");return r.length===n.length&&!r.some(i=>n.indexOf(i)===-1)}function xv(t,e){const{audioCodec:r,channels:n}=t;return(r===void 0||(e.audioCodec||"").substring(0,4)===r.substring(0,4))&&(n===void 0||n===(e.channels||"2"))}function v7e(t,e,r,n,i){const s=e[n],c=e.reduce((A,p,g)=>{const y=p.uri;return(A[y]||(A[y]=[])).push(g),A},{})[s.uri];c.length>1&&(n=Math.max.apply(Math,c));const u=s.videoRange,l=s.frameRate,d=s.codecSet.substring(0,4),f=gK(e,n,A=>{if(A.videoRange!==u||A.frameRate!==l||A.codecSet.substring(0,4)!==d)return!1;const p=A.audioGroups,g=r.filter(y=>!p||p.indexOf(y.groupId)!==-1);return Om(t,g,i)>-1});return f>-1?f:gK(e,n,A=>{const p=A.audioGroups,g=r.filter(y=>!p||p.indexOf(y.groupId)!==-1);return Om(t,g,i)>-1})}function gK(t,e,r){for(let n=e;n>-1;n--)if(r(t[n]))return n;for(let n=e+1;n<t.length;n++)if(r(t[n]))return n;return-1}function Gj(t,e){var r;return!!t&&t!==((r=e.loadLevelObj)==null?void 0:r.uri)}class y7e extends iA{constructor(e){super("abr",e.logger),this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=-1,this.firstSelection=-1,this._nextAutoLevel=-1,this.nextAutoLevelKey="",this.audioTracksByGroup=null,this.codecTiers=null,this.timer=-1,this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.rebufferNotice=-1,this.supportedCache={},this.bwEstimator=void 0,this._abandonRulesCheck=r=>{var n;const{fragCurrent:i,partCurrent:s,hls:o}=this,{autoLevelEnabled:c,media:u}=o;if(!i||!u)return;const l=performance.now(),d=s?s.stats:i.stats,f=s?s.duration:i.duration,A=l-d.loading.start,p=o.minAutoLevel,g=i.level,y=this._nextAutoLevel;if(d.aborted||d.loaded&&d.loaded===d.total||g<=p){this.clearTimer(),this._nextAutoLevel=-1;return}if(!c)return;const x=y>-1&&y!==g,w=!!r||x;if(!w&&(u.paused||!u.playbackRate||!u.readyState))return;const E=o.mainForwardBufferInfo;if(!w&&E===null)return;const T=this.bwEstimator.getEstimateTTFB(),C=Math.abs(u.playbackRate);if(A<=Math.max(T,1e3*(f/(C*2))))return;const N=E?E.len/C:0,I=d.loading.first?d.loading.first-d.loading.start:-1,U=d.loaded&&I>-1,K=this.getBwEstimate(),Y=o.levels,re=Y[g],se=Math.max(d.loaded,Math.round(f*(i.bitrate||re.averageBitrate)/8));let Ae=U?A-I:A;Ae<1&&U&&(Ae=Math.min(A,d.loaded*8/K));const we=U?d.loaded*1e3/Ae:0,Ce=T/1e3,ve=we?(se-d.loaded)/we:se*8/K+Ce;if(ve<=N)return;const ne=we?we*8:K,ce=((n=r?.details||this.hls.latestLevelDetails)==null?void 0:n.live)===!0,ae=this.hls.config.abrBandWidthUpFactor;let De=Number.POSITIVE_INFINITY,Oe;for(Oe=g-1;Oe>p;Oe--){const je=Y[Oe].maxBitrate,Me=!Y[Oe].details||ce;if(De=this.getTimeToLoadFrag(Ce,ne,f*je,Me),De<Math.min(N,f+Ce))break}if(De>=ve||De>f*10)return;U?this.bwEstimator.sample(A-Math.min(T,I),d.loaded):this.bwEstimator.sampleTTFB(A);const be=Y[Oe].maxBitrate;this.getBwEstimate()*ae>be&&this.resetEstimator(be);const de=this.findBestLevel(be,p,Oe,0,N,1,1);de>-1&&(Oe=de),this.warn(`Fragment ${i.sn}${s?" part "+s.index:""} of level ${g} is loading too slowly;
      Fragment duration: ${i.duration.toFixed(3)}
      Time to underbuffer: ${N.toFixed(3)} s
      Estimated load time for current fragment: ${ve.toFixed(3)} s
      Estimated load time for down switch fragment: ${De.toFixed(3)} s
      TTFB estimate: ${I|0} ms
      Current BW estimate: ${qn(K)?K|0:"Unknown"} bps
      New BW estimate: ${this.getBwEstimate()|0} bps
      Switching to level ${Oe} @ ${be|0} bps`),o.nextLoadLevel=o.nextAutoLevel=Oe,this.clearTimer();const xe=()=>{if(this.clearTimer(),this.fragCurrent===i&&this.hls.loadLevel===Oe&&Oe>0){const je=this.getStarvationDelay();if(this.warn(`Aborting inflight request ${Oe>0?"and switching down":""}
      Fragment duration: ${i.duration.toFixed(3)} s
      Time to underbuffer: ${je.toFixed(3)} s`),i.abortRequests(),this.fragCurrent=this.partCurrent=null,Oe>p){let Me=this.findBestLevel(this.hls.levels[p].bitrate,p,Oe,0,je,1,1);Me===-1&&(Me=p),this.hls.nextLoadLevel=this.hls.nextAutoLevel=Me,this.resetEstimator(this.hls.levels[Me].bitrate)}}};x||ve>De*2?xe():this.timer=self.setInterval(xe,De*1e3),o.trigger(Le.FRAG_LOAD_EMERGENCY_ABORTED,{frag:i,part:s,stats:d})},this.hls=e,this.bwEstimator=this.initEstimator(),this.registerListeners()}resetEstimator(e){e&&(this.log(`setting initial bwe to ${e}`),this.hls.config.abrEwmaDefaultEstimate=e),this.firstSelection=-1,this.bwEstimator=this.initEstimator()}initEstimator(){const e=this.hls.config;return new _8e(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate)}registerListeners(){const{hls:e}=this;e.on(Le.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Le.FRAG_LOADING,this.onFragLoading,this),e.on(Le.FRAG_LOADED,this.onFragLoaded,this),e.on(Le.FRAG_BUFFERED,this.onFragBuffered,this),e.on(Le.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(Le.LEVEL_LOADED,this.onLevelLoaded,this),e.on(Le.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(Le.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.on(Le.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e&&(e.off(Le.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Le.FRAG_LOADING,this.onFragLoading,this),e.off(Le.FRAG_LOADED,this.onFragLoaded,this),e.off(Le.FRAG_BUFFERED,this.onFragBuffered,this),e.off(Le.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(Le.LEVEL_LOADED,this.onLevelLoaded,this),e.off(Le.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(Le.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.off(Le.ERROR,this.onError,this))}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this._abandonRulesCheck=this.supportedCache=null,this.fragCurrent=this.partCurrent=null}onManifestLoading(e,r){this.lastLoadedFragLevel=-1,this.firstSelection=-1,this.lastLevelLoadSec=0,this.supportedCache={},this.fragCurrent=this.partCurrent=null,this.onLevelsUpdated(),this.clearTimer()}onLevelsUpdated(){this.lastLoadedFragLevel>-1&&this.fragCurrent&&(this.lastLoadedFragLevel=this.fragCurrent.level),this._nextAutoLevel=-1,this.onMaxAutoLevelUpdated(),this.codecTiers=null,this.audioTracksByGroup=null}onMaxAutoLevelUpdated(){this.firstSelection=-1,this.nextAutoLevelKey=""}onFragLoading(e,r){const n=r.frag;if(!this.ignoreFragment(n)){if(!n.bitrateTest){var i;this.fragCurrent=n,this.partCurrent=(i=r.part)!=null?i:null}this.clearTimer(),this.timer=self.setInterval(this._abandonRulesCheck,100)}}onLevelSwitching(e,r){this.clearTimer()}onError(e,r){if(!r.fatal)switch(r.details){case vr.BUFFER_ADD_CODEC_ERROR:case vr.BUFFER_APPEND_ERROR:this.lastLoadedFragLevel=-1,this.firstSelection=-1;break;case vr.FRAG_LOAD_TIMEOUT:{const n=r.frag,{fragCurrent:i,partCurrent:s}=this;if(n&&i&&n.sn===i.sn&&n.level===i.level){const o=performance.now(),c=s?s.stats:n.stats,u=o-c.loading.start,l=c.loading.first?c.loading.first-c.loading.start:-1;if(c.loaded&&l>-1){const f=this.bwEstimator.getEstimateTTFB();this.bwEstimator.sample(u-Math.min(f,l),c.loaded)}else this.bwEstimator.sampleTTFB(u)}break}}}getTimeToLoadFrag(e,r,n,i){const s=e+n/r,o=i?e+this.lastLevelLoadSec:0;return s+o}onLevelLoaded(e,r){const n=this.hls.config,{loading:i}=r.stats,s=i.end-i.first;qn(s)&&(this.lastLevelLoadSec=s/1e3),r.details.live?this.bwEstimator.update(n.abrEwmaSlowLive,n.abrEwmaFastLive):this.bwEstimator.update(n.abrEwmaSlowVoD,n.abrEwmaFastVoD),this.timer>-1&&this._abandonRulesCheck(r.levelInfo)}onFragLoaded(e,{frag:r,part:n}){const i=n?n.stats:r.stats;if(r.type===fi.MAIN&&this.bwEstimator.sampleTTFB(i.loading.first-i.loading.start),!this.ignoreFragment(r)){if(this.clearTimer(),r.level===this._nextAutoLevel&&(this._nextAutoLevel=-1),this.firstSelection=-1,this.hls.config.abrMaxWithRealBitrate){const s=n?n.duration:r.duration,o=this.hls.levels[r.level],c=(o.loaded?o.loaded.bytes:0)+i.loaded,u=(o.loaded?o.loaded.duration:0)+s;o.loaded={bytes:c,duration:u},o.realBitrate=Math.round(8*c/u)}if(r.bitrateTest){const s={stats:i,frag:r,part:n,id:r.type};this.onFragBuffered(Le.FRAG_BUFFERED,s),r.bitrateTest=!1}else this.lastLoadedFragLevel=r.level}}onFragBuffered(e,r){const{frag:n,part:i}=r,s=i!=null&&i.stats.loaded?i.stats:n.stats;if(s.aborted||this.ignoreFragment(n))return;const o=s.parsing.end-s.loading.start-Math.min(s.loading.first-s.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(o,s.loaded),s.bwEstimate=this.getBwEstimate(),n.bitrateTest?this.bitrateTestDelay=o/1e3:this.bitrateTestDelay=0}ignoreFragment(e){return e.type!==fi.MAIN||e.sn==="initSegment"}clearTimer(){this.timer>-1&&(self.clearInterval(this.timer),this.timer=-1)}get firstAutoLevel(){const{maxAutoLevel:e,minAutoLevel:r}=this.hls,n=this.getBwEstimate(),i=this.hls.config.maxStarvationDelay,s=this.findBestLevel(n,r,e,0,i,1,1);if(s>-1)return s;const o=this.hls.firstLevel,c=Math.min(Math.max(o,r),e);return this.warn(`Could not find best starting auto level. Defaulting to first in playlist ${o} clamped to ${c}`),c}get forcedAutoLevel(){return this.nextAutoLevelKey?-1:this._nextAutoLevel}get nextAutoLevel(){const e=this.forcedAutoLevel,n=this.bwEstimator.canEstimate(),i=this.lastLoadedFragLevel>-1;if(e!==-1&&(!n||!i||this.nextAutoLevelKey===this.getAutoLevelKey()))return e;const s=n&&i?this.getNextABRAutoLevel():this.firstAutoLevel;if(e!==-1){const o=this.hls.levels;if(o.length>Math.max(e,s)&&o[e].loadError<=o[s].loadError)return e}return this._nextAutoLevel=s,this.nextAutoLevelKey=this.getAutoLevelKey(),s}getAutoLevelKey(){return`${this.getBwEstimate()}_${this.getStarvationDelay().toFixed(2)}`}getNextABRAutoLevel(){const{fragCurrent:e,partCurrent:r,hls:n}=this;if(n.levels.length<=1)return n.loadLevel;const{maxAutoLevel:i,config:s,minAutoLevel:o}=n,c=r?r.duration:e?e.duration:0,u=this.getBwEstimate(),l=this.getStarvationDelay();let d=s.abrBandWidthFactor,f=s.abrBandWidthUpFactor;if(l){const x=this.findBestLevel(u,o,i,l,0,d,f);if(x>=0)return this.rebufferNotice=-1,x}let A=c?Math.min(c,s.maxStarvationDelay):s.maxStarvationDelay;if(!l){const x=this.bitrateTestDelay;x&&(A=(c?Math.min(c,s.maxLoadingDelay):s.maxLoadingDelay)-x,this.info(`bitrate test took ${Math.round(1e3*x)}ms, set first fragment max fetchDuration to ${Math.round(1e3*A)} ms`),d=f=1)}const p=this.findBestLevel(u,o,i,l,A,d,f);if(this.rebufferNotice!==p&&(this.rebufferNotice=p,this.info(`${l?"rebuffering expected":"buffer is empty"}, optimal quality level ${p}`)),p>-1)return p;const g=n.levels[o],y=n.loadLevelObj;return y&&g?.bitrate<y.bitrate?o:n.loadLevel}getStarvationDelay(){const e=this.hls,r=e.media;if(!r)return 1/0;const n=r&&r.playbackRate!==0?Math.abs(r.playbackRate):1,i=e.mainForwardBufferInfo;return(i?i.len:0)/n}getBwEstimate(){return this.bwEstimator.canEstimate()?this.bwEstimator.getEstimate():this.hls.config.abrEwmaDefaultEstimate}findBestLevel(e,r,n,i,s,o,c){var u;const l=i+s,d=this.lastLoadedFragLevel,f=d===-1?this.hls.firstLevel:d,{fragCurrent:A,partCurrent:p}=this,{levels:g,allAudioTracks:y,loadLevel:x,config:w}=this.hls;if(g.length===1)return 0;const E=g[f],T=!!((u=this.hls.latestLevelDetails)!=null&&u.live),C=x===-1||d===-1;let N,I="SDR",U=E?.frameRate||0;const{audioPreference:K,videoPreference:Y}=w,re=this.audioTracksByGroup||(this.audioTracksByGroup=lie(y));let se=-1;if(C){if(this.firstSelection!==-1)return this.firstSelection;const ne=this.codecTiers||(this.codecTiers=m7e(g,re,r,n)),ce=A7e(ne,I,e,K,Y),{codecSet:ae,videoRanges:De,minFramerate:Oe,minBitrate:be,minIndex:de,preferHDR:xe}=ce;se=de,N=ae,I=xe?De[De.length-1]:De[0],U=Oe,e=Math.max(e,be),this.log(`picked start tier ${fl(ce)}`)}else N=E?.codecSet,I=E?.videoRange;const Ae=p?p.duration:A?A.duration:0,we=this.bwEstimator.getEstimateTTFB()/1e3,Ce=[];for(let ne=n;ne>=r;ne--){var ve;const ce=g[ne],ae=ne>f;if(!ce)continue;if(w.useMediaCapabilities&&!ce.supportedResult&&!ce.supportedPromise){const Me=navigator.mediaCapabilities;typeof Me?.decodingInfo=="function"&&i7e(ce,re,I,U,e,K)?(ce.supportedPromise=aie(ce,re,Me,this.supportedCache),ce.supportedPromise.then(Re=>{if(!this.hls)return;ce.supportedResult=Re;const it=this.hls.levels,ht=it.indexOf(ce);Re.error?this.warn(`MediaCapabilities decodingInfo error: "${Re.error}" for level ${ht} ${fl(Re)}`):Re.supported?Re.decodingInfoResults.some(Be=>Be.smooth===!1||Be.powerEfficient===!1)&&this.log(`MediaCapabilities decodingInfo for level ${ht} not smooth or powerEfficient: ${fl(Re)}`):(this.warn(`Unsupported MediaCapabilities decodingInfo result for level ${ht} ${fl(Re)}`),ht>-1&&it.length>1&&(this.log(`Removing unsupported level ${ht}`),this.hls.removeLevel(ht),this.hls.loadLevel===-1&&(this.hls.nextLoadLevel=0)))}).catch(Re=>{this.warn(`Error handling MediaCapabilities decodingInfo: ${Re}`)})):ce.supportedResult=iie}if((N&&ce.codecSet!==N||I&&ce.videoRange!==I||ae&&U>ce.frameRate||!ae&&U>0&&U<ce.frameRate||(ve=ce.supportedResult)!=null&&(ve=ve.decodingInfoResults)!=null&&ve.some(Me=>Me.smooth===!1))&&(!C||ne!==se)){Ce.push(ne);continue}const De=ce.details,Oe=(p?De?.partTarget:De?.averagetargetduration)||Ae;let be;ae?be=c*e:be=o*e;const de=Ae&&i>=Ae*2&&s===0?ce.averageBitrate:ce.maxBitrate,xe=this.getTimeToLoadFrag(we,be,de*Oe,De===void 0);if(be>=de&&(ne===d||ce.loadError===0&&ce.fragmentError===0)&&(xe<=we||!qn(xe)||T&&!this.bitrateTestDelay||xe<l)){const Me=this.forcedAutoLevel;return ne!==x&&(Me===-1||Me!==x)&&(Ce.length&&this.trace(`Skipped level(s) ${Ce.join(",")} of ${n} max with CODECS and VIDEO-RANGE:"${g[Ce[0]].codecs}" ${g[Ce[0]].videoRange}; not compatible with "${N}" ${I}`),this.info(`switch candidate:${f}->${ne} adjustedbw(${Math.round(be)})-bitrate=${Math.round(be-de)} ttfb:${we.toFixed(1)} avgDuration:${Oe.toFixed(1)} maxFetchDuration:${l.toFixed(1)} fetchDuration:${xe.toFixed(1)} firstSelection:${C} codecSet:${ce.codecSet} videoRange:${ce.videoRange} hls.loadLevel:${x}`)),C&&(this.firstSelection=ne),ne}}return-1}set nextAutoLevel(e){const r=this.deriveNextAutoLevel(e);this._nextAutoLevel!==r&&(this.nextAutoLevelKey="",this._nextAutoLevel=r)}deriveNextAutoLevel(e){const{maxAutoLevel:r,minAutoLevel:n}=this.hls;return Math.min(Math.max(e,n),r)}}const cie={search:function(t,e){let r=0,n=t.length-1,i=null,s=null;for(;r<=n;){i=(r+n)/2|0,s=t[i];const o=e(s);if(o>0)r=i+1;else if(o<0)n=i-1;else return s}return null}};function x7e(t,e,r){if(e===null||!Array.isArray(t)||!t.length||!qn(e))return null;const n=t[0].programDateTime;if(e<(n||0))return null;const i=t[t.length-1].endProgramDateTime;if(e>=(i||0))return null;for(let s=0;s<t.length;++s){const o=t[s];if(w7e(e,r,o))return o}return null}function yy(t,e,r=0,n=0,i=.005){let s=null;if(t){s=e[1+t.sn-e[0].sn]||null;const c=t.endDTS-r;c>0&&c<15e-7&&(r+=15e-7),s&&t.level!==s.level&&s.end<=t.end&&(s=e[2+t.sn-e[0].sn]||null)}else r===0&&e[0].start===0&&(s=e[0]);if(s&&((!t||t.level===s.level)&&vK(r,n,s)===0||b7e(s,t,Math.min(i,n))))return s;const o=cie.search(e,vK.bind(null,r,n));return o&&(o!==t||!s)?o:s}function b7e(t,e,r){if(e&&e.start===0&&e.level<t.level&&(e.endPTS||0)>0){const n=e.tagList.reduce((i,s)=>(s[0]==="INF"&&(i+=parseFloat(s[1])),i),r);return t.start<=n}return!1}function vK(t=0,e=0,r){if(r.start<=t&&r.start+r.duration>t)return 0;const n=Math.min(e,r.duration+(r.deltaPTS?r.deltaPTS:0));return r.start+r.duration-n<=t?1:r.start-n>t&&r.start?-1:0}function w7e(t,e,r){const n=Math.min(e,r.duration+(r.deltaPTS?r.deltaPTS:0))*1e3;return(r.endProgramDateTime||0)-n>t}function uie(t,e,r){if(t&&t.startCC<=e&&t.endCC>=e){let n=t.fragments;const{fragmentHint:i}=t;i&&(n=n.concat(i));let s;return cie.search(n,o=>o.cc<e?1:o.cc>e?-1:(s=o,o.end<=r?1:o.start>r?-1:0)),s||null}return null}function Wj(t){switch(t.details){case vr.FRAG_LOAD_TIMEOUT:case vr.KEY_LOAD_TIMEOUT:case vr.LEVEL_LOAD_TIMEOUT:case vr.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function die(t){return t.details.startsWith("key")}function hie(t){return die(t)&&!!t.frag&&!t.frag.decryptdata}function yK(t,e){const r=Wj(e);return t.default[`${r?"timeout":"error"}Retry`]}function pF(t,e){const r=t.backoff==="linear"?1:Math.pow(2,e);return Math.min(r*t.retryDelayMs,t.maxRetryDelayMs)}function xK(t){return Uo(Uo({},t),{errorRetry:null,timeoutRetry:null})}function Yj(t,e,r,n){if(!t)return!1;const i=n?.code,s=e<t.maxNumRetry&&(E7e(i)||!!r);return t.shouldRetry?t.shouldRetry(t,e,r,n,s):s}function E7e(t){return lO(t)||!!t&&(t<400||t>499)}function lO(t){return t===0&&navigator.onLine===!1}var Fd={DoNothing:0,SendAlternateToPenaltyBox:2,RemoveAlternatePermanently:3,RetryRequest:5},of={None:0,MoveAllAlternatesMatchingHost:1,MoveAllAlternatesMatchingHDCP:2,MoveAllAlternatesMatchingKey:4};class _7e extends iA{constructor(e){super("error-controller",e.logger),this.hls=void 0,this.playlistError=0,this.hls=e,this.registerListeners()}registerListeners(){const e=this.hls;e.on(Le.ERROR,this.onError,this),e.on(Le.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Le.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){const e=this.hls;e&&(e.off(Le.ERROR,this.onError,this),e.off(Le.ERROR,this.onErrorOut,this),e.off(Le.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Le.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null}startLoad(e){}stopLoad(){this.playlistError=0}getVariantLevelIndex(e){return e?.type===fi.MAIN?e.level:this.getVariantIndex()}getVariantIndex(){var e;const r=this.hls,n=r.currentLevel;return(e=r.loadLevelObj)!=null&&e.details||n===-1?r.loadLevel:n}variantHasKey(e,r){if(e){var n;if((n=e.details)!=null&&n.hasKey(r))return!0;const i=e.audioGroups;if(i)return this.hls.allAudioTracks.filter(o=>i.indexOf(o.groupId)>=0).some(o=>{var c;return(c=o.details)==null?void 0:c.hasKey(r)})}return!1}onManifestLoading(){this.playlistError=0}onLevelUpdated(){this.playlistError=0}onError(e,r){var n;if(r.fatal)return;const i=this.hls,s=r.context;switch(r.details){case vr.FRAG_LOAD_ERROR:case vr.FRAG_LOAD_TIMEOUT:case vr.KEY_LOAD_ERROR:case vr.KEY_LOAD_TIMEOUT:r.errorAction=this.getFragRetryOrSwitchAction(r);return;case vr.FRAG_PARSING_ERROR:if((n=r.frag)!=null&&n.gap){r.errorAction=Ab();return}case vr.FRAG_GAP:case vr.FRAG_DECRYPT_ERROR:{r.errorAction=this.getFragRetryOrSwitchAction(r),r.errorAction.action=Fd.SendAlternateToPenaltyBox;return}case vr.LEVEL_EMPTY_ERROR:case vr.LEVEL_PARSING_ERROR:{var o;const u=r.parent===fi.MAIN?r.level:i.loadLevel;r.details===vr.LEVEL_EMPTY_ERROR&&((o=r.context)!=null&&(o=o.levelDetails)!=null&&o.live)?r.errorAction=this.getPlaylistRetryOrSwitchAction(r,u):(r.levelRetry=!1,r.errorAction=this.getLevelSwitchAction(r,u))}return;case vr.LEVEL_LOAD_ERROR:case vr.LEVEL_LOAD_TIMEOUT:typeof s?.level=="number"&&(r.errorAction=this.getPlaylistRetryOrSwitchAction(r,s.level));return;case vr.AUDIO_TRACK_LOAD_ERROR:case vr.AUDIO_TRACK_LOAD_TIMEOUT:case vr.SUBTITLE_LOAD_ERROR:case vr.SUBTITLE_TRACK_LOAD_TIMEOUT:if(s){const u=i.loadLevelObj;if(u&&(s.type===xa.AUDIO_TRACK&&u.hasAudioGroup(s.groupId)||s.type===xa.SUBTITLE_TRACK&&u.hasSubtitleGroup(s.groupId))){r.errorAction=this.getPlaylistRetryOrSwitchAction(r,i.loadLevel),r.errorAction.action=Fd.SendAlternateToPenaltyBox,r.errorAction.flags=of.MoveAllAlternatesMatchingHost;return}}return;case vr.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:r.errorAction={action:Fd.SendAlternateToPenaltyBox,flags:of.MoveAllAlternatesMatchingHDCP};return;case vr.KEY_SYSTEM_SESSION_UPDATE_FAILED:case vr.KEY_SYSTEM_STATUS_INTERNAL_ERROR:case vr.KEY_SYSTEM_NO_SESSION:r.errorAction={action:Fd.SendAlternateToPenaltyBox,flags:of.MoveAllAlternatesMatchingKey};return;case vr.BUFFER_ADD_CODEC_ERROR:case vr.REMUX_ALLOC_ERROR:case vr.BUFFER_APPEND_ERROR:if(!r.errorAction){var c;r.errorAction=this.getLevelSwitchAction(r,(c=r.level)!=null?c:i.loadLevel)}return;case vr.INTERNAL_EXCEPTION:case vr.BUFFER_APPENDING_ERROR:case vr.BUFFER_FULL_ERROR:case vr.LEVEL_SWITCH_ERROR:case vr.BUFFER_STALLED_ERROR:case vr.BUFFER_SEEK_OVER_HOLE:case vr.BUFFER_NUDGE_ON_STALL:r.errorAction=Ab();return}r.type===Oi.KEY_SYSTEM_ERROR&&(r.levelRetry=!1,r.errorAction=Ab())}getPlaylistRetryOrSwitchAction(e,r){const n=this.hls,i=yK(n.config.playlistLoadPolicy,e),s=this.playlistError++;if(Yj(i,s,Wj(e),e.response))return{action:Fd.RetryRequest,flags:of.None,retryConfig:i,retryCount:s};const c=this.getLevelSwitchAction(e,r);return i&&(c.retryConfig=i,c.retryCount=s),c}getFragRetryOrSwitchAction(e){const r=this.hls,n=this.getVariantLevelIndex(e.frag),i=r.levels[n],{fragLoadPolicy:s,keyLoadPolicy:o}=r.config,c=yK(die(e)?o:s,e),u=r.levels.reduce((d,f)=>d+f.fragmentError,0);if(i&&(e.details!==vr.FRAG_GAP&&i.fragmentError++,!hie(e)&&Yj(c,u,Wj(e),e.response)))return{action:Fd.RetryRequest,flags:of.None,retryConfig:c,retryCount:u};const l=this.getLevelSwitchAction(e,n);return c&&(l.retryConfig=c,l.retryCount=u),l}getLevelSwitchAction(e,r){const n=this.hls;r==null&&(r=n.loadLevel);const i=this.hls.levels[r];if(i){var s,o;const l=e.details;i.loadError++,l===vr.BUFFER_APPEND_ERROR&&i.fragmentError++;let d=-1;const{levels:f,loadLevel:A,minAutoLevel:p,maxAutoLevel:g}=n;!n.autoLevelEnabled&&!n.config.preserveManualLevelOnError&&(n.loadLevel=-1);const y=(s=e.frag)==null?void 0:s.type,w=(y===fi.AUDIO&&l===vr.FRAG_PARSING_ERROR||e.sourceBufferName==="audio"&&(l===vr.BUFFER_ADD_CODEC_ERROR||l===vr.BUFFER_APPEND_ERROR))&&f.some(({audioCodec:I})=>i.audioCodec!==I),T=e.sourceBufferName==="video"&&(l===vr.BUFFER_ADD_CODEC_ERROR||l===vr.BUFFER_APPEND_ERROR)&&f.some(({codecSet:I,audioCodec:U})=>i.codecSet!==I&&i.audioCodec===U),{type:C,groupId:N}=(o=e.context)!=null?o:{};for(let I=f.length;I--;){const U=(I+A)%f.length;if(U!==A&&U>=p&&U<=g&&f[U].loadError===0){var c,u;const K=f[U];if(l===vr.FRAG_GAP&&y===fi.MAIN&&e.frag){const Y=f[U].details;if(Y){const re=yy(e.frag,Y.fragments,e.frag.start);if(re!=null&&re.gap)continue}}else{if(C===xa.AUDIO_TRACK&&K.hasAudioGroup(N)||C===xa.SUBTITLE_TRACK&&K.hasSubtitleGroup(N))continue;if(y===fi.AUDIO&&(c=i.audioGroups)!=null&&c.some(Y=>K.hasAudioGroup(Y))||y===fi.SUBTITLE&&(u=i.subtitleGroups)!=null&&u.some(Y=>K.hasSubtitleGroup(Y))||w&&i.audioCodec===K.audioCodec||T&&i.codecSet===K.codecSet||!w&&i.codecSet!==K.codecSet)continue}d=U;break}}if(d>-1&&n.loadLevel!==d)return e.levelRetry=!0,this.playlistError=0,{action:Fd.SendAlternateToPenaltyBox,flags:of.None,nextAutoLevel:d}}return{action:Fd.SendAlternateToPenaltyBox,flags:of.MoveAllAlternatesMatchingHost}}onErrorOut(e,r){var n;switch((n=r.errorAction)==null?void 0:n.action){case Fd.DoNothing:break;case Fd.SendAlternateToPenaltyBox:this.sendAlternateToPenaltyBox(r),!r.errorAction.resolved&&r.details!==vr.FRAG_GAP?r.fatal=!0:/MediaSource readyState: ended/.test(r.error.message)&&(this.warn(`MediaSource ended after "${r.sourceBufferName}" sourceBuffer append error. Attempting to recover from media error.`),this.hls.recoverMediaError());break}if(r.fatal){this.hls.stopLoad();return}}sendAlternateToPenaltyBox(e){const r=this.hls,n=e.errorAction;if(!n)return;const{flags:i}=n,s=n.nextAutoLevel;switch(i){case of.None:this.switchLevel(e,s);break;case of.MoveAllAlternatesMatchingHDCP:{const u=this.getVariantLevelIndex(e.frag),l=r.levels[u],d=l?.attrs["HDCP-LEVEL"];if(n.hdcpLevel=d,d==="NONE")this.warn("HDCP policy resticted output with HDCP-LEVEL=NONE");else if(d){r.maxHdcpLevel=oO[oO.indexOf(d)-1],n.resolved=!0,this.warn(`Restricting playback to HDCP-LEVEL of "${r.maxHdcpLevel}" or lower`);break}}case of.MoveAllAlternatesMatchingKey:{const u=e.decryptdata;if(u){const l=this.hls.levels,d=l.length;for(let A=d;A--;)if(this.variantHasKey(l[A],u)){var o,c;this.log(`Banned key found in level ${A} (${l[A].bitrate}bps) or audio group "${(o=l[A].audioGroups)==null?void 0:o.join(",")}" (${(c=e.frag)==null?void 0:c.type} fragment) ${Ud(u.keyId||[])}`),l[A].fragmentError++,l[A].loadError++,this.log(`Removing level ${A} with key error (${e.error})`),this.hls.removeLevel(A)}const f=e.frag;if(this.hls.levels.length<d)n.resolved=!0;else if(f&&f.type!==fi.MAIN){const A=f.decryptdata;A&&!u.matches(A)&&(n.resolved=!0)}}break}}n.resolved||this.switchLevel(e,s)}switchLevel(e,r){if(r!==void 0&&e.errorAction&&(this.warn(`switching to level ${r} after ${e.details}`),this.hls.nextAutoLevel=r,e.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel,e.details===vr.BUFFER_ADD_CODEC_ERROR&&e.mimeType&&e.sourceBufferName!=="audiovideo")){const n=aO(e.mimeType),i=this.hls.levels;for(let s=i.length;s--;)i[s][`${e.sourceBufferName}Codec`]===n&&(this.log(`Removing level ${s} for ${e.details} ("${n}" not supported)`),this.hls.removeLevel(s))}}}function Ab(t){const e={action:Fd.DoNothing,flags:of.None};return t&&(e.resolved=!0),e}var Fu={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"};class S7e{constructor(e){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=e,this._registerListeners()}_registerListeners(){const{hls:e}=this;e&&(e.on(Le.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Le.BUFFER_APPENDED,this.onBufferAppended,this),e.on(Le.FRAG_BUFFERED,this.onFragBuffered,this),e.on(Le.FRAG_LOADED,this.onFragLoaded,this))}_unregisterListeners(){const{hls:e}=this;e&&(e.off(Le.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Le.BUFFER_APPENDED,this.onBufferAppended,this),e.off(Le.FRAG_BUFFERED,this.onFragBuffered,this),e.off(Le.FRAG_LOADED,this.onFragLoaded,this))}destroy(){this._unregisterListeners(),this.hls=this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null}getAppendedFrag(e,r){const n=this.activePartLists[r];if(n)for(let i=n.length;i--;){const s=n[i];if(!s)break;if(s.start<=e&&e<=s.end&&s.loaded)return s}return this.getBufferedFrag(e,r)}getBufferedFrag(e,r){return this.getFragAtPos(e,r,!0)}getFragAtPos(e,r,n){const{fragments:i}=this,s=Object.keys(i);for(let o=s.length;o--;){const c=i[s[o]];if(c?.body.type===r&&(!n||c.buffered)){const u=c.body;if(u.start<=e&&e<=u.end)return u}}return null}detectEvictedFragments(e,r,n,i,s){this.timeRanges&&(this.timeRanges[e]=r);const o=i?.fragment.sn||-1;Object.keys(this.fragments).forEach(c=>{const u=this.fragments[c];if(!u||o>=u.body.sn)return;if(!u.buffered&&(!u.loaded||s)){u.body.type===n&&this.removeFragment(u.body);return}const l=u.range[e];if(l){if(l.time.length===0){this.removeFragment(u.body);return}l.time.some(d=>{const f=!this.isTimeBuffered(d.startPTS,d.endPTS,r);return f&&this.removeFragment(u.body),f})}})}detectPartialFragments(e){const r=this.timeRanges;if(!r||e.frag.sn==="initSegment")return;const n=e.frag,i=ax(n),s=this.fragments[i];if(!s||s.buffered&&n.gap)return;const o=!n.relurl;Object.keys(r).forEach(c=>{const u=n.elementaryStreams[c];if(!u)return;const l=r[c],d=o||u.partial===!0;s.range[c]=this.getBufferedTimes(n,e.part,d,l)}),s.loaded=null,Object.keys(s.range).length?(this.bufferedEnd(s,n),hS(s)||this.removeParts(n.sn-1,n.type)):this.removeFragment(s.body)}bufferedEnd(e,r){e.buffered=!0,(e.body.endList=r.endList||e.body.endList)&&(this.endListFragments[e.body.type]=e)}removeParts(e,r){const n=this.activePartLists[r];n&&(this.activePartLists[r]=bK(n,i=>i.fragment.sn>=e))}fragBuffered(e,r){const n=ax(e);let i=this.fragments[n];!i&&r&&(i=this.fragments[n]={body:e,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},e.gap&&(this.hasGaps=!0)),i&&(i.loaded=null,this.bufferedEnd(i,e))}getBufferedTimes(e,r,n,i){const s={time:[],partial:n},o=e.start,c=e.end,u=e.minEndPTS||c,l=e.maxStartPTS||o;for(let d=0;d<i.length;d++){const f=i.start(d)-this.bufferPadding,A=i.end(d)+this.bufferPadding;if(l>=f&&u<=A){s.time.push({startPTS:Math.max(o,i.start(d)),endPTS:Math.min(c,i.end(d))});break}else if(o<A&&c>f){const p=Math.max(o,i.start(d)),g=Math.min(c,i.end(d));g>p&&(s.partial=!0,s.time.push({startPTS:p,endPTS:g}))}else if(c<=f)break}return s}getPartialFragment(e){let r=null,n,i,s,o=0;const{bufferPadding:c,fragments:u}=this;return Object.keys(u).forEach(l=>{const d=u[l];d&&hS(d)&&(i=d.body.start-c,s=d.body.end+c,e>=i&&e<=s&&(n=Math.min(e-i,s-e),o<=n&&(r=d.body,o=n)))}),r}isEndListAppended(e){const r=this.endListFragments[e];return r!==void 0&&(r.buffered||hS(r))}getState(e){const r=ax(e),n=this.fragments[r];return n?n.buffered?hS(n)?Fu.PARTIAL:Fu.OK:Fu.APPENDING:Fu.NOT_LOADED}isTimeBuffered(e,r,n){let i,s;for(let o=0;o<n.length;o++){if(i=n.start(o)-this.bufferPadding,s=n.end(o)+this.bufferPadding,e>=i&&r<=s)return!0;if(r<=i)return!1}return!1}onManifestLoading(){this.removeAllFragments()}onFragLoaded(e,r){if(r.frag.sn==="initSegment"||r.frag.bitrateTest)return;const n=r.frag,i=r.part?null:r,s=ax(n);this.fragments[s]={body:n,appendedPTS:null,loaded:i,buffered:!1,range:Object.create(null)}}onBufferAppended(e,r){const{frag:n,part:i,timeRanges:s,type:o}=r;if(n.sn==="initSegment")return;const c=n.type;if(i){let l=this.activePartLists[c];l||(this.activePartLists[c]=l=[]),l.push(i)}this.timeRanges=s;const u=s[o];this.detectEvictedFragments(o,u,c,i)}onFragBuffered(e,r){this.detectPartialFragments(r)}hasFragment(e){const r=ax(e);return!!this.fragments[r]}hasFragments(e){const{fragments:r}=this,n=Object.keys(r);if(!e)return n.length>0;for(let i=n.length;i--;){const s=r[n[i]];if(s?.body.type===e)return!0}return!1}hasParts(e){var r;return!!((r=this.activePartLists[e])!=null&&r.length)}removeFragmentsInRange(e,r,n,i,s){i&&!this.hasGaps||Object.keys(this.fragments).forEach(o=>{const c=this.fragments[o];if(!c)return;const u=c.body;u.type!==n||i&&!u.gap||u.start<r&&u.end>e&&(c.buffered||s)&&this.removeFragment(u)})}removeFragment(e){const r=ax(e);e.clearElementaryStreamInfo();const n=this.activePartLists[e.type];if(n){const i=e.sn;this.activePartLists[e.type]=bK(n,s=>s.fragment.sn!==i)}delete this.fragments[r],e.endList&&delete this.endListFragments[e.type]}removeAllFragments(){var e;this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1;const r=(e=this.hls)==null||(e=e.latestLevelDetails)==null?void 0:e.partList;r&&r.forEach(n=>n.clearElementaryStreamInfo())}}function hS(t){var e,r,n;return t.buffered&&!!(t.body.gap||(e=t.range.video)!=null&&e.partial||(r=t.range.audio)!=null&&r.partial||(n=t.range.audiovideo)!=null&&n.partial)}function ax(t){return`${t.type}_${t.level}_${t.sn}`}function bK(t,e){return t.filter(r=>{const n=e(r);return n||r.clearElementaryStreamInfo(),n})}var M0={cbc:0,ctr:1};class T7e{constructor(e,r,n){this.subtle=void 0,this.aesIV=void 0,this.aesMode=void 0,this.subtle=e,this.aesIV=r,this.aesMode=n}decrypt(e,r){switch(this.aesMode){case M0.cbc:return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},r,e);case M0.ctr:return this.subtle.decrypt({name:"AES-CTR",counter:this.aesIV,length:64},r,e);default:throw new Error(`[AESCrypto] invalid aes mode ${this.aesMode}`)}}}function C7e(t){const e=t.byteLength,r=e&&new DataView(t.buffer).getUint8(e-1);return r?t.slice(0,e-r):t}class j7e{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(e){const r=new DataView(e),n=new Uint32Array(4);for(let i=0;i<4;i++)n[i]=r.getUint32(i*4);return n}initTable(){const e=this.sBox,r=this.invSBox,n=this.subMix,i=n[0],s=n[1],o=n[2],c=n[3],u=this.invSubMix,l=u[0],d=u[1],f=u[2],A=u[3],p=new Uint32Array(256);let g=0,y=0,x=0;for(x=0;x<256;x++)x<128?p[x]=x<<1:p[x]=x<<1^283;for(x=0;x<256;x++){let w=y^y<<1^y<<2^y<<3^y<<4;w=w>>>8^w&255^99,e[g]=w,r[w]=g;const E=p[g],T=p[E],C=p[T];let N=p[w]*257^w*16843008;i[g]=N<<24|N>>>8,s[g]=N<<16|N>>>16,o[g]=N<<8|N>>>24,c[g]=N,N=C*16843009^T*65537^E*257^g*16843008,l[w]=N<<24|N>>>8,d[w]=N<<16|N>>>16,f[w]=N<<8|N>>>24,A[w]=N,g?(g=E^p[p[p[C^E]]],y^=p[p[y]]):g=y=1}}expandKey(e){const r=this.uint8ArrayToUint32Array_(e);let n=!0,i=0;for(;i<r.length&&n;)n=r[i]===this.key[i],i++;if(n)return;this.key=r;const s=this.keySize=r.length;if(s!==4&&s!==6&&s!==8)throw new Error("Invalid aes key size="+s);const o=this.ksRows=(s+6+1)*4;let c,u;const l=this.keySchedule=new Uint32Array(o),d=this.invKeySchedule=new Uint32Array(o),f=this.sBox,A=this.rcon,p=this.invSubMix,g=p[0],y=p[1],x=p[2],w=p[3];let E,T;for(c=0;c<o;c++){if(c<s){E=l[c]=r[c];continue}T=E,c%s===0?(T=T<<8|T>>>24,T=f[T>>>24]<<24|f[T>>>16&255]<<16|f[T>>>8&255]<<8|f[T&255],T^=A[c/s|0]<<24):s>6&&c%s===4&&(T=f[T>>>24]<<24|f[T>>>16&255]<<16|f[T>>>8&255]<<8|f[T&255]),l[c]=E=(l[c-s]^T)>>>0}for(u=0;u<o;u++)c=o-u,u&3?T=l[c]:T=l[c-4],u<4||c<=4?d[u]=T:d[u]=g[f[T>>>24]]^y[f[T>>>16&255]]^x[f[T>>>8&255]]^w[f[T&255]],d[u]=d[u]>>>0}networkToHostOrderSwap(e){return e<<24|(e&65280)<<8|(e&16711680)>>8|e>>>24}decrypt(e,r,n){const i=this.keySize+6,s=this.invKeySchedule,o=this.invSBox,c=this.invSubMix,u=c[0],l=c[1],d=c[2],f=c[3],A=this.uint8ArrayToUint32Array_(n);let p=A[0],g=A[1],y=A[2],x=A[3];const w=new Int32Array(e),E=new Int32Array(w.length);let T,C,N,I,U,K,Y,re,se,Ae,we,Ce,ve,ne;const ce=this.networkToHostOrderSwap;for(;r<w.length;){for(se=ce(w[r]),Ae=ce(w[r+1]),we=ce(w[r+2]),Ce=ce(w[r+3]),U=se^s[0],K=Ce^s[1],Y=we^s[2],re=Ae^s[3],ve=4,ne=1;ne<i;ne++)T=u[U>>>24]^l[K>>16&255]^d[Y>>8&255]^f[re&255]^s[ve],C=u[K>>>24]^l[Y>>16&255]^d[re>>8&255]^f[U&255]^s[ve+1],N=u[Y>>>24]^l[re>>16&255]^d[U>>8&255]^f[K&255]^s[ve+2],I=u[re>>>24]^l[U>>16&255]^d[K>>8&255]^f[Y&255]^s[ve+3],U=T,K=C,Y=N,re=I,ve=ve+4;T=o[U>>>24]<<24^o[K>>16&255]<<16^o[Y>>8&255]<<8^o[re&255]^s[ve],C=o[K>>>24]<<24^o[Y>>16&255]<<16^o[re>>8&255]<<8^o[U&255]^s[ve+1],N=o[Y>>>24]<<24^o[re>>16&255]<<16^o[U>>8&255]<<8^o[K&255]^s[ve+2],I=o[re>>>24]<<24^o[U>>16&255]<<16^o[K>>8&255]<<8^o[Y&255]^s[ve+3],E[r]=ce(T^p),E[r+1]=ce(I^g),E[r+2]=ce(N^y),E[r+3]=ce(C^x),p=se,g=Ae,y=we,x=Ce,r=r+4}return E.buffer}}class N7e{constructor(e,r,n){this.subtle=void 0,this.key=void 0,this.aesMode=void 0,this.subtle=e,this.key=r,this.aesMode=n}expandKey(){const e=k7e(this.aesMode);return this.subtle.importKey("raw",this.key,{name:e},!1,["encrypt","decrypt"])}}function k7e(t){switch(t){case M0.cbc:return"AES-CBC";case M0.ctr:return"AES-CTR";default:throw new Error(`[FastAESKey] invalid aes mode ${t}`)}}const I7e=16;class gF{constructor(e,{removePKCS7Padding:r=!0}={}){if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.enableSoftwareAES=void 0,this.enableSoftwareAES=e.enableSoftwareAES,this.removePKCS7Padding=r,r)try{const n=self.crypto;n&&(this.subtle=n.subtle||n.webkitSubtle)}catch{}this.useSoftware=!this.subtle}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){const{currentResult:e,remainderData:r}=this;if(!e||r)return this.reset(),null;const n=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?C7e(n):n}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(e,r,n,i){return this.useSoftware?new Promise((s,o)=>{const c=ArrayBuffer.isView(e)?e:new Uint8Array(e);this.softwareDecrypt(c,r,n,i);const u=this.flush();u?s(u.buffer):o(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(e),r,n,i)}softwareDecrypt(e,r,n,i){const{currentIV:s,currentResult:o,remainderData:c}=this;if(i!==M0.cbc||r.byteLength!==16)return Ho.warn("SoftwareDecrypt: can only handle AES-128-CBC"),null;this.logOnce("JS AES decrypt"),c&&(e=Jf(c,e),this.remainderData=null);const u=this.getValidChunk(e);if(!u.length)return null;s&&(n=s);let l=this.softwareDecrypter;l||(l=this.softwareDecrypter=new j7e),l.expandKey(r);const d=o;return this.currentResult=l.decrypt(u.buffer,0,n),this.currentIV=u.slice(-16).buffer,d||null}webCryptoDecrypt(e,r,n,i){if(this.key!==r||!this.fastAesKey){if(!this.subtle)return Promise.resolve(this.onWebCryptoError(e,r,n,i));this.key=r,this.fastAesKey=new N7e(this.subtle,r,i)}return this.fastAesKey.expandKey().then(s=>this.subtle?(this.logOnce("WebCrypto AES decrypt"),new T7e(this.subtle,new Uint8Array(n),i).decrypt(e.buffer,s)):Promise.reject(new Error("web crypto not initialized"))).catch(s=>(Ho.warn(`[decrypter]: WebCrypto Error, disable WebCrypto API, ${s.name}: ${s.message}`),this.onWebCryptoError(e,r,n,i)))}onWebCryptoError(e,r,n,i){const s=this.enableSoftwareAES;if(s){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,r,n,i);const o=this.flush();if(o)return o.buffer}throw new Error("WebCrypto"+(s?" and softwareDecrypt":"")+": failed to decrypt data")}getValidChunk(e){let r=e;const n=e.length-e.length%I7e;return n!==e.length&&(r=e.slice(0,n),this.remainderData=e.slice(n)),r}logOnce(e){this.logEnabled&&(Ho.log(`[decrypter]: ${e}`),this.logEnabled=!1)}}const wK=Math.pow(2,17);class L7e{constructor(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(e,r){const n=e.url;if(!n)return Promise.reject(new Np({type:Oi.NETWORK_ERROR,details:vr.FRAG_LOAD_ERROR,fatal:!1,frag:e,error:new Error(`Fragment does not have a ${n?"part list":"url"}`),networkDetails:null}));this.abort();const i=this.config,s=i.fLoader,o=i.loader;return new Promise((c,u)=>{if(this.loader&&this.loader.destroy(),e.gap)if(e.tagList.some(g=>g[0]==="GAP")){u(_K(e));return}else e.gap=!1;const l=this.loader=s?new s(i):new o(i),d=EK(e);e.loader=l;const f=xK(i.fragLoadPolicy.default),A={loadPolicy:f,timeout:f.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:e.sn==="initSegment"?1/0:wK};e.stats=l.stats;const p={onSuccess:(g,y,x,w)=>{this.resetLoader(e,l);let E=g.data;x.resetIV&&e.decryptdata&&(e.decryptdata.iv=new Uint8Array(E.slice(0,16)),E=E.slice(16)),c({frag:e,part:null,payload:E,networkDetails:w})},onError:(g,y,x,w)=>{this.resetLoader(e,l),u(new Np({type:Oi.NETWORK_ERROR,details:vr.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:Uo({url:n,data:void 0},g),error:new Error(`HTTP Error ${g.code} ${g.text}`),networkDetails:x,stats:w}))},onAbort:(g,y,x)=>{this.resetLoader(e,l),u(new Np({type:Oi.NETWORK_ERROR,details:vr.INTERNAL_ABORTED,fatal:!1,frag:e,error:new Error("Aborted"),networkDetails:x,stats:g}))},onTimeout:(g,y,x)=>{this.resetLoader(e,l),u(new Np({type:Oi.NETWORK_ERROR,details:vr.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,error:new Error(`Timeout after ${A.timeout}ms`),networkDetails:x,stats:g}))}};r&&(p.onProgress=(g,y,x,w)=>r({frag:e,part:null,payload:x,networkDetails:w})),l.load(d,A,p)})}loadPart(e,r,n){this.abort();const i=this.config,s=i.fLoader,o=i.loader;return new Promise((c,u)=>{if(this.loader&&this.loader.destroy(),e.gap||r.gap){u(_K(e,r));return}const l=this.loader=s?new s(i):new o(i),d=EK(e,r);e.loader=l;const f=xK(i.fragLoadPolicy.default),A={loadPolicy:f,timeout:f.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:wK};r.stats=l.stats,l.load(d,A,{onSuccess:(p,g,y,x)=>{this.resetLoader(e,l),this.updateStatsFromPart(e,r);const w={frag:e,part:r,payload:p.data,networkDetails:x};n(w),c(w)},onError:(p,g,y,x)=>{this.resetLoader(e,l),u(new Np({type:Oi.NETWORK_ERROR,details:vr.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:r,response:Uo({url:d.url,data:void 0},p),error:new Error(`HTTP Error ${p.code} ${p.text}`),networkDetails:y,stats:x}))},onAbort:(p,g,y)=>{e.stats.aborted=r.stats.aborted,this.resetLoader(e,l),u(new Np({type:Oi.NETWORK_ERROR,details:vr.INTERNAL_ABORTED,fatal:!1,frag:e,part:r,error:new Error("Aborted"),networkDetails:y,stats:p}))},onTimeout:(p,g,y)=>{this.resetLoader(e,l),u(new Np({type:Oi.NETWORK_ERROR,details:vr.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:r,error:new Error(`Timeout after ${A.timeout}ms`),networkDetails:y,stats:p}))}})})}updateStatsFromPart(e,r){const n=e.stats,i=r.stats,s=i.total;if(n.loaded+=i.loaded,s){const u=Math.round(e.duration/r.duration),l=Math.min(Math.round(n.loaded/s),u),f=(u-l)*Math.round(n.loaded/l);n.total=n.loaded+f}else n.total=Math.max(n.loaded,n.total);const o=n.loading,c=i.loading;o.start?o.first+=c.first-c.start:(o.start=c.start,o.first=c.first),o.end=c.end}resetLoader(e,r){e.loader=null,this.loader===r&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),r.destroy()}}function EK(t,e=null){const r=e||t,n={frag:t,part:e,responseType:"arraybuffer",url:r.url,headers:{},rangeStart:0,rangeEnd:0},i=r.byteRangeStartOffset,s=r.byteRangeEndOffset;if(qn(i)&&qn(s)){var o;let c=i,u=s;if(t.sn==="initSegment"&&B7e((o=t.decryptdata)==null?void 0:o.method)){const l=s-i;l%16&&(u=s+(16-l%16)),i!==0&&(n.resetIV=!0,c=i-16)}n.rangeStart=c,n.rangeEnd=u}return n}function _K(t,e){const r=new Error(`GAP ${t.gap?"tag":"attribute"} found`),n={type:Oi.MEDIA_ERROR,details:vr.FRAG_GAP,fatal:!1,frag:t,error:r,networkDetails:null};return e&&(n.part=e),(e||t).stats.aborted=!0,new Np(n)}function B7e(t){return t==="AES-128"||t==="AES-256"}class Np extends Error{constructor(e){super(e.error.message),this.data=void 0,this.data=e}}class fie extends iA{constructor(e,r){super(e,r),this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(e){return this._tickInterval?!1:(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,e),!0)}clearInterval(){return this._tickInterval?(self.clearInterval(this._tickInterval),this._tickInterval=null,!0):!1}clearNextTick(){return this._tickTimer?(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0):!1}tick(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}class vF{constructor(e,r,n,i=0,s=-1,o=!1){this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing=fS(),this.buffering={audio:fS(),video:fS(),audiovideo:fS()},this.level=e,this.sn=r,this.id=n,this.size=i,this.part=s,this.partial=o}}function fS(){return{start:0,executeStart:0,executeEnd:0,end:0}}const SK={length:0,start:()=>0,end:()=>0};class Hs{static isBuffered(e,r){if(e){const n=Hs.getBuffered(e);for(let i=n.length;i--;)if(r>=n.start(i)&&r<=n.end(i))return!0}return!1}static bufferedRanges(e){if(e){const r=Hs.getBuffered(e);return Hs.timeRangesToArray(r)}return[]}static timeRangesToArray(e){const r=[];for(let n=0;n<e.length;n++)r.push({start:e.start(n),end:e.end(n)});return r}static bufferInfo(e,r,n){if(e){const i=Hs.bufferedRanges(e);if(i.length)return Hs.bufferedInfo(i,r,n)}return{len:0,start:r,end:r,bufferedIndex:-1}}static bufferedInfo(e,r,n){r=Math.max(0,r),e.length>1&&e.sort((d,f)=>d.start-f.start||f.end-d.end);let i=-1,s=[];if(n)for(let d=0;d<e.length;d++){r>=e[d].start&&r<=e[d].end&&(i=d);const f=s.length;if(f){const A=s[f-1].end;e[d].start-A<n?e[d].end>A&&(s[f-1].end=e[d].end):s.push(e[d])}else s.push(e[d])}else s=e;let o=0,c,u=r,l=r;for(let d=0;d<s.length;d++){const f=s[d].start,A=s[d].end;if(i===-1&&r>=f&&r<=A&&(i=d),r+n>=f&&r<A)u=f,l=A,o=l-r;else if(r+n<f){c=f;break}}return{len:o,start:u||0,end:l||0,nextStart:c,buffered:e,bufferedIndex:i}}static getBuffered(e){try{return e.buffered||SK}catch(r){return Ho.log("failed to get media.buffered",r),SK}}}const Aie=/\{\$([a-zA-Z0-9-_]+)\}/g;function TK(t){return Aie.test(t)}function cO(t,e){if(t.variableList!==null||t.hasVariableRefs){const r=t.variableList;return e.replace(Aie,n=>{const i=n.substring(2,n.length-1),s=r?.[i];return s===void 0?(t.playlistParsingError||(t.playlistParsingError=new Error(`Missing preceding EXT-X-DEFINE tag for Variable Reference: "${i}"`)),n):s})}return e}function CK(t,e,r){let n=t.variableList;n||(t.variableList=n={});let i,s;if("QUERYPARAM"in e){i=e.QUERYPARAM;try{const o=new self.URL(r).searchParams;if(o.has(i))s=o.get(i);else throw new Error(`"${i}" does not match any query parameter in URI: "${r}"`)}catch(o){t.playlistParsingError||(t.playlistParsingError=new Error(`EXT-X-DEFINE QUERYPARAM: ${o.message}`))}}else i=e.NAME,s=e.VALUE;i in n?t.playlistParsingError||(t.playlistParsingError=new Error(`EXT-X-DEFINE duplicate Variable Name declarations: "${i}"`)):n[i]=s||""}function P7e(t,e,r){const n=e.IMPORT;if(r&&n in r){let i=t.variableList;i||(t.variableList=i={}),i[n]=r[n]}else t.playlistParsingError||(t.playlistParsingError=new Error(`EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "${n}"`))}const O7e=/^(\d+)x(\d+)$/,jK=/(.+?)=(".*?"|.*?)(?:,|$)/g;class lc{constructor(e,r){typeof e=="string"&&(e=lc.parseAttrList(e,r)),nl(this,e)}get clientAttrs(){return Object.keys(this).filter(e=>e.substring(0,2)==="X-")}decimalInteger(e){const r=parseInt(this[e],10);return r>Number.MAX_SAFE_INTEGER?1/0:r}hexadecimalInteger(e){if(this[e]){let r=(this[e]||"0x").slice(2);r=(r.length&1?"0":"")+r;const n=new Uint8Array(r.length/2);for(let i=0;i<r.length/2;i++)n[i]=parseInt(r.slice(i*2,i*2+2),16);return n}return null}hexadecimalIntegerAsNumber(e){const r=parseInt(this[e],16);return r>Number.MAX_SAFE_INTEGER?1/0:r}decimalFloatingPoint(e){return parseFloat(this[e])}optionalFloat(e,r){const n=this[e];return n?parseFloat(n):r}enumeratedString(e){return this[e]}enumeratedStringList(e,r){const n=this[e];return(n?n.split(/[ ,]+/):[]).reduce((i,s)=>(i[s.toLowerCase()]=!0,i),r)}bool(e){return this[e]==="YES"}decimalResolution(e){const r=O7e.exec(this[e]);if(r!==null)return{width:parseInt(r[1],10),height:parseInt(r[2],10)}}static parseAttrList(e,r){let n;const i={};for(jK.lastIndex=0;(n=jK.exec(e))!==null;){const o=n[1].trim();let c=n[2];const u=c.indexOf('"')===0&&c.lastIndexOf('"')===c.length-1;let l=!1;if(u)c=c.slice(1,-1);else switch(o){case"IV":case"SCTE35-CMD":case"SCTE35-IN":case"SCTE35-OUT":l=!0}if(r&&(u||l))c=cO(r,c);else if(!l&&!u)switch(o){case"CLOSED-CAPTIONS":if(c==="NONE")break;case"ALLOWED-CPC":case"CLASS":case"ASSOC-LANGUAGE":case"AUDIO":case"BYTERANGE":case"CHANNELS":case"CHARACTERISTICS":case"CODECS":case"DATA-ID":case"END-DATE":case"GROUP-ID":case"ID":case"IMPORT":case"INSTREAM-ID":case"KEYFORMAT":case"KEYFORMATVERSIONS":case"LANGUAGE":case"NAME":case"PATHWAY-ID":case"QUERYPARAM":case"RECENTLY-REMOVED-DATERANGES":case"SERVER-URI":case"STABLE-RENDITION-ID":case"STABLE-VARIANT-ID":case"START-DATE":case"SUBTITLES":case"SUPPLEMENTAL-CODECS":case"URI":case"VALUE":case"VIDEO":case"X-ASSET-LIST":case"X-ASSET-URI":Ho.warn(`${e}: attribute ${o} is missing quotes`)}i[o]=c}return i}}const R7e="com.apple.hls.interstitial";function D7e(t){return t!=="ID"&&t!=="CLASS"&&t!=="CUE"&&t!=="START-DATE"&&t!=="DURATION"&&t!=="END-DATE"&&t!=="END-ON-NEXT"}function M7e(t){return t==="SCTE35-OUT"||t==="SCTE35-IN"||t==="SCTE35-CMD"}class mie{constructor(e,r,n=0){var i;if(this.attr=void 0,this.tagAnchor=void 0,this.tagOrder=void 0,this._startDate=void 0,this._endDate=void 0,this._dateAtEnd=void 0,this._cue=void 0,this._badValueForSameId=void 0,this.tagAnchor=r?.tagAnchor||null,this.tagOrder=(i=r?.tagOrder)!=null?i:n,r){const s=r.attr;for(const o in s)if(Object.prototype.hasOwnProperty.call(e,o)&&e[o]!==s[o]){Ho.warn(`DATERANGE tag attribute: "${o}" does not match for tags with ID: "${e.ID}"`),this._badValueForSameId=o;break}e=nl(new lc({}),s,e)}if(this.attr=e,r?(this._startDate=r._startDate,this._cue=r._cue,this._endDate=r._endDate,this._dateAtEnd=r._dateAtEnd):this._startDate=new Date(e["START-DATE"]),"END-DATE"in this.attr){const s=r?.endDate||new Date(this.attr["END-DATE"]);qn(s.getTime())&&(this._endDate=s)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get cue(){const e=this._cue;return e===void 0?this._cue=this.attr.enumeratedStringList(this.attr.CUE?"CUE":"X-CUE",{pre:!1,post:!1,once:!1}):e}get startTime(){const{tagAnchor:e}=this;return e===null||e.programDateTime===null?(Ho.warn(`Expected tagAnchor Fragment with PDT set for DateRange "${this.id}": ${e}`),NaN):e.start+(this.startDate.getTime()-e.programDateTime)/1e3}get startDate(){return this._startDate}get endDate(){const e=this._endDate||this._dateAtEnd;if(e)return e;const r=this.duration;return r!==null?this._dateAtEnd=new Date(this._startDate.getTime()+r*1e3):null}get duration(){if("DURATION"in this.attr){const e=this.attr.decimalFloatingPoint("DURATION");if(qn(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isInterstitial(){return this.class===R7e}get isValid(){return!!this.id&&!this._badValueForSameId&&qn(this.startDate.getTime())&&(this.duration===null||this.duration>=0)&&(!this.endOnNext||!!this.class)&&(!this.attr.CUE||!this.cue.pre&&!this.cue.post||this.cue.pre!==this.cue.post)&&(!this.isInterstitial||"X-ASSET-URI"in this.attr||"X-ASSET-LIST"in this.attr)}}const F7e=10;class U7e{constructor(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.dateRangeTagCount=0,this.live=!0,this.requestScheduled=-1,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.appliedTimelineOffset=void 0,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=e}reloaded(e){if(!e){this.advanced=!0,this.updated=!0;return}const r=this.lastPartSn-e.lastPartSn,n=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!n||!!r||!this.live,this.advanced=this.endSN>e.endSN||r>0||r===0&&n>0,this.updated||this.advanced?this.misses=Math.floor(e.misses*.6):this.misses=e.misses+1}hasKey(e){return this.encryptedFragments.some(r=>{let n=r.decryptdata;return n||(r.setKeyFormat(e.keyFormat),n=r.decryptdata),!!n&&e.matches(n)})}get hasProgramDateTime(){return this.fragments.length?qn(this.fragments[this.fragments.length-1].programDateTime):!1}get levelTargetDuration(){return this.averagetargetduration||this.targetduration||F7e}get drift(){const e=this.driftEndTime-this.driftStartTime;return e>0?(this.driftEnd-this.driftStart)*1e3/e:1}get edge(){return this.partEnd||this.fragmentEnd}get partEnd(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}get fragmentEnd(){return this.fragments.length?this.fragments[this.fragments.length-1].end:0}get fragmentStart(){return this.fragments.length?this.fragments[0].start:0}get age(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}get lastPartIndex(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].index:-1}get maxPartIndex(){const e=this.partList;if(e){const r=this.lastPartIndex;if(r!==-1){for(let n=e.length;n--;)if(e[n].index>r)return e[n].index;return r}}return 0}get lastPartSn(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}get expired(){if(this.live&&this.age&&this.misses<3){const e=this.partEnd-this.fragmentStart;return this.age>Math.max(e,this.totalduration)+this.levelTargetDuration}return!1}}function qj(t,e){return t.length===e.length?!t.some((r,n)=>r!==e[n]):!1}function NK(t,e){return!t&&!e?!0:!t||!e?!1:qj(t,e)}function mb(t){return t==="AES-128"||t==="AES-256"||t==="AES-256-CTR"}function yF(t){switch(t){case"AES-128":case"AES-256":return M0.cbc;case"AES-256-CTR":return M0.ctr;default:throw new Error(`invalid full segment method ${t}`)}}function xF(t){return Uint8Array.from(atob(t),e=>e.charCodeAt(0))}function uO(t){return Uint8Array.from(unescape(encodeURIComponent(t)),e=>e.charCodeAt(0))}function $7e(t){const e=uO(t).subarray(0,16),r=new Uint8Array(16);return r.set(e,16-e.length),r}function pie(t){const e=function(n,i,s){const o=n[i];n[i]=n[s],n[s]=o};e(t,0,3),e(t,1,2),e(t,4,5),e(t,6,7)}function gie(t){const e=t.split(":");let r=null;if(e[0]==="data"&&e.length===2){const n=e[1].split(";"),i=n[n.length-1].split(",");if(i.length===2){const s=i[0]==="base64",o=i[1];s?(n.splice(-1,1),r=xF(o)):r=$7e(o)}}return r}const Xj=typeof self<"u"?self:void 0;var dc={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},$d={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.streamingkeydelivery",PLAYREADY:"com.microsoft.playready",WIDEVINE:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"};function lT(t){switch(t){case $d.FAIRPLAY:return dc.FAIRPLAY;case $d.PLAYREADY:return dc.PLAYREADY;case $d.WIDEVINE:return dc.WIDEVINE;case $d.CLEARKEY:return dc.CLEARKEY}}function x4(t){switch(t){case dc.FAIRPLAY:return $d.FAIRPLAY;case dc.PLAYREADY:return $d.PLAYREADY;case dc.WIDEVINE:return $d.WIDEVINE;case dc.CLEARKEY:return $d.CLEARKEY}}function yw(t){const{drmSystems:e,widevineLicenseUrl:r}=t,n=e?[dc.FAIRPLAY,dc.WIDEVINE,dc.PLAYREADY,dc.CLEARKEY].filter(i=>!!e[i]):[];return!n[dc.WIDEVINE]&&r&&n.push(dc.WIDEVINE),n}const vie=(function(t){return Xj!=null&&(t=Xj.navigator)!=null&&t.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null})();function H7e(t,e,r,n){let i;switch(t){case dc.FAIRPLAY:i=["cenc","sinf"];break;case dc.WIDEVINE:case dc.PLAYREADY:i=["cenc"];break;case dc.CLEARKEY:i=["cenc","keyids"];break;default:throw new Error(`Unknown key-system: ${t}`)}return Q7e(i,e,r,n)}function Q7e(t,e,r,n){return[{initDataTypes:t,persistentState:n.persistentState||"optional",distinctiveIdentifier:n.distinctiveIdentifier||"optional",sessionTypes:n.sessionTypes||[n.sessionType||"temporary"],audioCapabilities:e.map(s=>({contentType:`audio/mp4; codecs=${s}`,robustness:n.audioRobustness||"",encryptionScheme:n.audioEncryptionScheme||null})),videoCapabilities:r.map(s=>({contentType:`video/mp4; codecs=${s}`,robustness:n.videoRobustness||"",encryptionScheme:n.videoEncryptionScheme||null}))}]}function V7e(t){var e;return!!t&&(t.sessionType==="persistent-license"||!!((e=t.sessionTypes)!=null&&e.some(r=>r==="persistent-license")))}function yie(t){const e=new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2),r=String.fromCharCode.apply(null,Array.from(e)),n=r.substring(r.indexOf("<"),r.length),o=new DOMParser().parseFromString(n,"text/xml").getElementsByTagName("KID")[0];if(o){const c=o.childNodes[0]?o.childNodes[0].nodeValue:o.getAttribute("VALUE");if(c){const u=xF(c).subarray(0,16);return pie(u),u}}return null}let ox={};class j0{static clearKeyUriToKeyIdMap(){ox={}}static setKeyIdForUri(e,r){ox[e]=r}static addKeyIdForUri(e){const r=Object.keys(ox).length%Number.MAX_SAFE_INTEGER,n=new Uint8Array(16);return new DataView(n.buffer,12,4).setUint32(0,r),ox[e]=n,n}constructor(e,r,n,i=[1],s=null,o){this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=e,this.uri=r,this.keyFormat=n,this.keyFormatVersions=i,this.iv=s,this.encrypted=e?e!=="NONE":!1,this.isCommonEncryption=this.encrypted&&!mb(e),o!=null&&o.startsWith("0x")&&(this.keyId=new Uint8Array(Gne(o)))}matches(e){return e.uri===this.uri&&e.method===this.method&&e.encrypted===this.encrypted&&e.keyFormat===this.keyFormat&&qj(e.keyFormatVersions,this.keyFormatVersions)&&NK(e.iv,this.iv)&&NK(e.keyId,this.keyId)}isSupported(){if(this.method){if(mb(this.method)||this.method==="NONE")return!0;if(this.keyFormat==="identity")return this.method==="SAMPLE-AES";switch(this.keyFormat){case $d.FAIRPLAY:case $d.WIDEVINE:case $d.PLAYREADY:case $d.CLEARKEY:return["SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)!==-1}}return!1}getDecryptData(e,r){if(!this.encrypted||!this.uri)return null;if(mb(this.method)){let s=this.iv;return s||(typeof e!="number"&&(Ho.warn(`missing IV for initialization segment with method="${this.method}" - compliance issue`),e=0),s=K7e(e)),new j0(this.method,this.uri,"identity",this.keyFormatVersions,s)}if(this.keyId){const s=ox[this.uri];if(s&&!qj(this.keyId,s)&&j0.setKeyIdForUri(this.uri,this.keyId),this.pssh)return this}const n=gie(this.uri);if(n)switch(this.keyFormat){case $d.WIDEVINE:if(this.pssh=n,!this.keyId){const s=Y8e(n.buffer);if(s.length){var i;const o=s[0];this.keyId=(i=o.kids)!=null&&i.length?o.kids[0]:null}}this.keyId||(this.keyId=kK(r));break;case $d.PLAYREADY:{const s=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=W8e(s,null,n),this.keyId=yie(n);break}default:{let s=n.subarray(0,16);if(s.length!==16){const o=new Uint8Array(16);o.set(s,16-s.length),s=o}this.keyId=s;break}}if(!this.keyId||this.keyId.byteLength!==16){let s;s=z7e(r),s||(s=kK(r),s||(s=ox[this.uri])),s&&(this.keyId=s,j0.setKeyIdForUri(this.uri,s))}return this}}function z7e(t){const e=t?.[$d.WIDEVINE];return e?e.keyId:null}function kK(t){const e=t?.[$d.PLAYREADY];if(e){const r=gie(e.uri);if(r)return yie(r)}return null}function K7e(t){const e=new Uint8Array(16);for(let r=12;r<16;r++)e[r]=t>>8*(15-r)&255;return e}const IK=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,LK=/#EXT-X-MEDIA:(.*)/g,G7e=/^#EXT(?:INF|-X-TARGETDURATION):/m,b4=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[^\r\n]*)/.source,/#.*/.source].join("|"),"g"),W7e=new RegExp([/#EXT-X-(PROGRAM-DATE-TIME|BYTERANGE|DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP|INDEPENDENT-SEGMENTS)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|"));class Rm{static findGroup(e,r){for(let n=0;n<e.length;n++){const i=e[n];if(i.id===r)return i}}static resolve(e,r){return dF.buildAbsoluteURL(r,e,{alwaysNormalize:!0})}static isMediaPlaylist(e){return G7e.test(e)}static parseMasterPlaylist(e,r){const n=TK(e),i={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:n},s=[];if(IK.lastIndex=0,!e.startsWith("#EXTM3U"))return i.playlistParsingError=new Error("no EXTM3U delimiter"),i;let o;for(;(o=IK.exec(e))!=null;)if(o[1]){var c;const l=new lc(o[1],i),d=cO(i,o[2]),f={attrs:l,bitrate:l.decimalInteger("BANDWIDTH")||l.decimalInteger("AVERAGE-BANDWIDTH"),name:l.NAME,url:Rm.resolve(d,r)},A=l.decimalResolution("RESOLUTION");A&&(f.width=A.width,f.height=A.height),OK(l.CODECS,f);const p=l["SUPPLEMENTAL-CODECS"];p&&(f.supplemental={},OK(p,f.supplemental)),(c=f.unknownCodecs)!=null&&c.length||s.push(f),i.levels.push(f)}else if(o[3]){const l=o[3],d=o[4];switch(l){case"SESSION-DATA":{const f=new lc(d,i),A=f["DATA-ID"];A&&(i.sessionData===null&&(i.sessionData={}),i.sessionData[A]=f);break}case"SESSION-KEY":{const f=BK(d,r,i);f.encrypted&&f.isSupported()?(i.sessionKeys===null&&(i.sessionKeys=[]),i.sessionKeys.push(f)):Ho.warn(`[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "${d}"`);break}case"DEFINE":{{const f=new lc(d,i);CK(i,f,r)}break}case"CONTENT-STEERING":{const f=new lc(d,i);i.contentSteering={uri:Rm.resolve(f["SERVER-URI"],r),pathwayId:f["PATHWAY-ID"]||"."};break}case"START":{i.startTimeOffset=PK(d);break}}}const u=s.length>0&&s.length<i.levels.length;return i.levels=u?s:i.levels,i.levels.length===0&&(i.playlistParsingError=new Error("no levels found in manifest")),i}static parseMasterPlaylistMedia(e,r,n){let i;const s={},o=n.levels,c={AUDIO:o.map(l=>({id:l.attrs.AUDIO,audioCodec:l.audioCodec})),SUBTITLES:o.map(l=>({id:l.attrs.SUBTITLES,textCodec:l.textCodec})),"CLOSED-CAPTIONS":[]};let u=0;for(LK.lastIndex=0;(i=LK.exec(e))!==null;){const l=new lc(i[1],n),d=l.TYPE;if(d){const f=c[d],A=s[d]||[];s[d]=A;const p=l.LANGUAGE,g=l["ASSOC-LANGUAGE"],y=l.CHANNELS,x=l.CHARACTERISTICS,w=l["INSTREAM-ID"],E={attrs:l,bitrate:0,id:u++,groupId:l["GROUP-ID"]||"",name:l.NAME||p||"",type:d,default:l.bool("DEFAULT"),autoselect:l.bool("AUTOSELECT"),forced:l.bool("FORCED"),lang:p,url:l.URI?Rm.resolve(l.URI,r):""};if(g&&(E.assocLang=g),y&&(E.channels=y),x&&(E.characteristics=x),w&&(E.instreamId=w),f!=null&&f.length){const T=Rm.findGroup(f,E.groupId)||f[0];RK(E,T,"audioCodec"),RK(E,T,"textCodec")}A.push(E)}}return s}static parseLevelPlaylist(e,r,n,i,s,o){var c;const u={url:r},l=new U7e(r),d=l.fragments,f=[];let A=null,p=0,g=0,y=0,x=0,w=0,E=null,T=new g4(i,u),C,N,I,U=-1,K=!1,Y=null,re;if(b4.lastIndex=0,l.m3u8=e,l.hasVariableRefs=TK(e),((c=b4.exec(e))==null?void 0:c[0])!=="#EXTM3U")return l.playlistParsingError=new Error("Missing format identifier #EXTM3U"),l;for(;(C=b4.exec(e))!==null;){K&&(K=!1,T=new g4(i,u),T.playlistOffset=y,T.setStart(y),T.sn=p,T.cc=x,w&&(T.bitrate=w),T.level=n,A&&(T.initSegment=A,A.rawProgramDateTime&&(T.rawProgramDateTime=A.rawProgramDateTime,A.rawProgramDateTime=null),Y&&(T.setByteRange(Y),Y=null)));const Ce=C[1];if(Ce){T.duration=parseFloat(Ce);const ve=(" "+C[2]).slice(1);T.title=ve||null,T.tagList.push(ve?["INF",Ce,ve]:["INF",Ce])}else if(C[3]){if(qn(T.duration)){T.playlistOffset=y,T.setStart(y),I&&MK(T,I,l),T.sn=p,T.level=n,T.cc=x,d.push(T);const ve=(" "+C[3]).slice(1);T.relurl=cO(l,ve),dO(T,E,f),E=T,y+=T.duration,p++,g=0,K=!0}}else{if(C=C[0].match(W7e),!C){Ho.warn("No matches on slow regex match for level playlist!");continue}for(N=1;N<C.length&&C[N]===void 0;N++);const ve=(" "+C[N]).slice(1),ne=(" "+C[N+1]).slice(1),ce=C[N+2]?(" "+C[N+2]).slice(1):null;switch(ve){case"BYTERANGE":E?T.setByteRange(ne,E):T.setByteRange(ne);break;case"PROGRAM-DATE-TIME":T.rawProgramDateTime=ne,T.tagList.push(["PROGRAM-DATE-TIME",ne]),U===-1&&(U=d.length);break;case"PLAYLIST-TYPE":l.type&&wp(l,ve,C),l.type=ne.toUpperCase();break;case"MEDIA-SEQUENCE":l.startSN!==0?wp(l,ve,C):d.length>0&&FK(l,ve,C),p=l.startSN=parseInt(ne);break;case"SKIP":{l.skippedSegments&&wp(l,ve,C);const ae=new lc(ne,l),De=ae.decimalInteger("SKIPPED-SEGMENTS");if(qn(De)){l.skippedSegments+=De;for(let be=De;be--;)d.push(null);p+=De}const Oe=ae.enumeratedString("RECENTLY-REMOVED-DATERANGES");Oe&&(l.recentlyRemovedDateranges=(l.recentlyRemovedDateranges||[]).concat(Oe.split("	")));break}case"TARGETDURATION":l.targetduration!==0&&wp(l,ve,C),l.targetduration=Math.max(parseInt(ne),1);break;case"VERSION":l.version!==null&&wp(l,ve,C),l.version=parseInt(ne);break;case"INDEPENDENT-SEGMENTS":break;case"ENDLIST":l.live||wp(l,ve,C),l.live=!1;break;case"#":(ne||ce)&&T.tagList.push(ce?[ne,ce]:[ne]);break;case"DISCONTINUITY":x++,T.tagList.push(["DIS"]);break;case"GAP":T.gap=!0,T.tagList.push([ve]);break;case"BITRATE":T.tagList.push([ve,ne]),w=parseInt(ne)*1e3,qn(w)?T.bitrate=w:w=0;break;case"DATERANGE":{const ae=new lc(ne,l),De=new mie(ae,l.dateRanges[ae.ID],l.dateRangeTagCount);l.dateRangeTagCount++,De.isValid||l.skippedSegments?l.dateRanges[De.id]=De:Ho.warn(`Ignoring invalid DATERANGE tag: "${ne}"`),T.tagList.push(["EXT-X-DATERANGE",ne]);break}case"DEFINE":{{const ae=new lc(ne,l);"IMPORT"in ae?P7e(l,ae,o):CK(l,ae,r)}break}case"DISCONTINUITY-SEQUENCE":l.startCC!==0?wp(l,ve,C):d.length>0&&FK(l,ve,C),l.startCC=x=parseInt(ne);break;case"KEY":{const ae=BK(ne,r,l);if(ae.isSupported()){if(ae.method==="NONE"){I=void 0;break}I||(I={});const De=I[ae.keyFormat];De!=null&&De.matches(ae)||(De&&(I=nl({},I)),I[ae.keyFormat]=ae)}else Ho.warn(`[Keys] Ignoring unsupported EXT-X-KEY tag: "${ne}"`);break}case"START":l.startTimeOffset=PK(ne);break;case"MAP":{const ae=new lc(ne,l);if(T.duration){const De=new g4(i,u);DK(De,ae,n,I),A=De,T.initSegment=A,A.rawProgramDateTime&&!T.rawProgramDateTime&&(T.rawProgramDateTime=A.rawProgramDateTime)}else{const De=T.byteRangeEndOffset;if(De){const Oe=T.byteRangeStartOffset;Y=`${De-Oe}@${Oe}`}else Y=null;DK(T,ae,n,I),A=T,K=!0}A.cc=x;break}case"SERVER-CONTROL":{re&&wp(l,ve,C),re=new lc(ne),l.canBlockReload=re.bool("CAN-BLOCK-RELOAD"),l.canSkipUntil=re.optionalFloat("CAN-SKIP-UNTIL",0),l.canSkipDateRanges=l.canSkipUntil>0&&re.bool("CAN-SKIP-DATERANGES"),l.partHoldBack=re.optionalFloat("PART-HOLD-BACK",0),l.holdBack=re.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{l.partTarget&&wp(l,ve,C);const ae=new lc(ne);l.partTarget=ae.decimalFloatingPoint("PART-TARGET");break}case"PART":{let ae=l.partList;ae||(ae=l.partList=[]);const De=g>0?ae[ae.length-1]:void 0,Oe=g++,be=new lc(ne,l),de=new P8e(be,T,u,Oe,De);ae.push(de),T.duration+=de.duration;break}case"PRELOAD-HINT":{const ae=new lc(ne,l);l.preloadHint=ae;break}case"RENDITION-REPORT":{const ae=new lc(ne,l);l.renditionReports=l.renditionReports||[],l.renditionReports.push(ae);break}default:Ho.warn(`line parsed but not handled: ${C}`);break}}}E&&!E.relurl?(d.pop(),y-=E.duration,l.partList&&(l.fragmentHint=E)):l.partList&&(dO(T,E,f),T.cc=x,l.fragmentHint=T,I&&MK(T,I,l)),l.targetduration||(l.playlistParsingError=new Error("Missing Target Duration"));const se=d.length,Ae=d[0],we=d[se-1];if(y+=l.skippedSegments*l.targetduration,y>0&&se&&we){l.averagetargetduration=y/se;const Ce=we.sn;l.endSN=Ce!=="initSegment"?Ce:0,l.live||(we.endList=!0),U>0&&(q7e(d,U),Ae&&f.unshift(Ae))}return l.fragmentHint&&(y+=l.fragmentHint.duration),l.totalduration=y,f.length&&l.dateRangeTagCount&&Ae&&xie(f,l),l.endCC=x,l}}function xie(t,e){let r=t.length;if(!r)if(e.hasProgramDateTime){const c=e.fragments[e.fragments.length-1];t.push(c),r++}else return;const n=t[r-1],i=e.live?1/0:e.totalduration,s=Object.keys(e.dateRanges);for(let c=s.length;c--;){const u=e.dateRanges[s[c]],l=u.startDate.getTime();u.tagAnchor=n.ref;for(let d=r;d--;){var o;if(((o=t[d])==null?void 0:o.sn)<e.startSN)break;const f=Y7e(e,l,t,d,i);if(f!==-1){u.tagAnchor=e.fragments[f].ref;break}}}}function Y7e(t,e,r,n,i){const s=r[n];if(s){const c=s.programDateTime;if(e>=c||n===0){var o;const u=(((o=r[n+1])==null?void 0:o.start)||i)-s.start;if(e<=c+u*1e3){const l=r[n].sn-t.startSN;if(l<0)return-1;const d=t.fragments;if(d.length>r.length){const A=(r[n+1]||d[d.length-1]).sn-t.startSN;for(let p=A;p>l;p--){const g=d[p].programDateTime;if(e>=g&&e<g+d[p].duration*1e3)return p}}return l}}}return-1}function BK(t,e,r){var n,i;const s=new lc(t,r),o=(n=s.METHOD)!=null?n:"",c=s.URI,u=s.hexadecimalInteger("IV"),l=s.KEYFORMATVERSIONS,d=(i=s.KEYFORMAT)!=null?i:"identity";c&&s.IV&&!u&&Ho.error(`Invalid IV: ${s.IV}`);const f=c?Rm.resolve(c,e):"",A=(l||"1").split("/").map(Number).filter(Number.isFinite);return new j0(o,f,d,A,u,s.KEYID)}function PK(t){const r=new lc(t).decimalFloatingPoint("TIME-OFFSET");return qn(r)?r:null}function OK(t,e){let r=(t||"").split(/[ ,]+/).filter(n=>n);["video","audio","text"].forEach(n=>{const i=r.filter(s=>AF(s,n));i.length&&(e[`${n}Codec`]=i.map(s=>s.split("/")[0]).join(","),r=r.filter(s=>i.indexOf(s)===-1))}),e.unknownCodecs=r}function RK(t,e,r){const n=e[r];n&&(t[r]=n)}function q7e(t,e){let r=t[e];for(let n=e;n--;){const i=t[n];if(!i)return;i.programDateTime=r.programDateTime-i.duration*1e3,r=i}}function dO(t,e,r){t.rawProgramDateTime?r.push(t):e!=null&&e.programDateTime&&(t.programDateTime=e.endProgramDateTime)}function DK(t,e,r,n){t.relurl=e.URI,e.BYTERANGE&&t.setByteRange(e.BYTERANGE),t.level=r,t.sn="initSegment",n&&(t.levelkeys=n),t.initSegment=null}function MK(t,e,r){t.levelkeys=e;const{encryptedFragments:n}=r;(!n.length||n[n.length-1].levelkeys!==e)&&Object.keys(e).some(i=>e[i].isCommonEncryption)&&n.push(t)}function wp(t,e,r){t.playlistParsingError=new Error(`#EXT-X-${e} must not appear more than once (${r[0]})`)}function FK(t,e,r){t.playlistParsingError=new Error(`#EXT-X-${e} must appear before the first Media Segment (${r[0]})`)}function w4(t,e){const r=e.startPTS;if(qn(r)){let n=0,i;e.sn>t.sn?(n=r-t.start,i=t):(n=t.start-r,i=e),i.duration!==n&&i.setDuration(n)}else e.sn>t.sn?t.cc===e.cc&&t.minEndPTS?e.setStart(t.start+(t.minEndPTS-t.start)):e.setStart(t.start+t.duration):e.setStart(Math.max(t.start-e.duration,0))}function bie(t,e,r,n,i,s,o){n-r<=0&&(o.warn("Fragment should have a positive duration",e),n=r+e.duration,s=i+e.duration);let u=r,l=n;const d=e.startPTS,f=e.endPTS;if(qn(d)){const w=Math.abs(d-r);t&&w>t.totalduration?o.warn(`media timestamps and playlist times differ by ${w}s for level ${e.level} ${t.url}`):qn(e.deltaPTS)?e.deltaPTS=Math.max(w,e.deltaPTS):e.deltaPTS=w,u=Math.max(r,d),r=Math.min(r,d),i=e.startDTS!==void 0?Math.min(i,e.startDTS):i,l=Math.min(n,f),n=Math.max(n,f),s=e.endDTS!==void 0?Math.max(s,e.endDTS):s}const A=r-e.start;e.start!==0&&e.setStart(r),e.setDuration(n-e.start),e.startPTS=r,e.maxStartPTS=u,e.startDTS=i,e.endPTS=n,e.minEndPTS=l,e.endDTS=s;const p=e.sn;if(!t||p<t.startSN||p>t.endSN)return 0;let g;const y=p-t.startSN,x=t.fragments;for(x[y]=e,g=y;g>0;g--)w4(x[g],x[g-1]);for(g=y;g<x.length-1;g++)w4(x[g],x[g+1]);return t.fragmentHint&&w4(x[x.length-1],t.fragmentHint),t.PTSKnown=t.alignedSliding=!0,A}function X7e(t,e,r){if(t===e)return;let n=null;const i=t.fragments;for(let d=i.length-1;d>=0;d--){const f=i[d].initSegment;if(f){n=f;break}}t.fragmentHint&&delete t.fragmentHint.endPTS;let s;e$e(t,e,(d,f,A,p)=>{if((!e.startCC||e.skippedSegments)&&f.cc!==d.cc){const g=d.cc-f.cc;for(let y=A;y<p.length;y++)p[y].cc+=g;e.endCC=p[p.length-1].cc}qn(d.startPTS)&&qn(d.endPTS)&&(f.setStart(f.startPTS=d.startPTS),f.startDTS=d.startDTS,f.maxStartPTS=d.maxStartPTS,f.endPTS=d.endPTS,f.endDTS=d.endDTS,f.minEndPTS=d.minEndPTS,f.setDuration(d.endPTS-d.startPTS),f.duration&&(s=f),e.PTSKnown=e.alignedSliding=!0),d.hasStreams&&(f.elementaryStreams=d.elementaryStreams),f.loader=d.loader,d.hasStats&&(f.stats=d.stats),d.initSegment&&(f.initSegment=d.initSegment,n=d.initSegment)});const o=e.fragments,c=e.fragmentHint?o.concat(e.fragmentHint):o;if(n&&c.forEach(d=>{var f;d&&(!d.initSegment||d.initSegment.relurl===((f=n)==null?void 0:f.relurl))&&(d.initSegment=n)}),e.skippedSegments){if(e.deltaUpdateFailed=o.some(d=>!d),e.deltaUpdateFailed){r.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let d=e.skippedSegments;d--;)o.shift();e.startSN=o[0].sn}else{e.canSkipDateRanges&&(e.dateRanges=Z7e(t.dateRanges,e,r));const d=t.fragments.filter(f=>f.rawProgramDateTime);if(t.hasProgramDateTime&&!e.hasProgramDateTime)for(let f=1;f<c.length;f++)c[f].programDateTime===null&&dO(c[f],c[f-1],d);xie(d,e)}e.endCC=o[o.length-1].cc}if(!e.startCC){var u;const d=_ie(t,e.startSN-1);e.startCC=(u=d?.cc)!=null?u:o[0].cc}J7e(t.partList,e.partList,(d,f)=>{f.elementaryStreams=d.elementaryStreams,f.stats=d.stats}),s?bie(e,s,s.startPTS,s.endPTS,s.startDTS,s.endDTS,r):wie(t,e),o.length&&(e.totalduration=e.edge-o[0].start),e.driftStartTime=t.driftStartTime,e.driftStart=t.driftStart;const l=e.advancedDateTime;if(e.advanced&&l){const d=e.edge;e.driftStart||(e.driftStartTime=l,e.driftStart=d),e.driftEndTime=l,e.driftEnd=d}else e.driftEndTime=t.driftEndTime,e.driftEnd=t.driftEnd,e.advancedDateTime=t.advancedDateTime;e.requestScheduled===-1&&(e.requestScheduled=t.requestScheduled)}function Z7e(t,e,r){const{dateRanges:n,recentlyRemovedDateranges:i}=e,s=nl({},t);i&&i.forEach(u=>{delete s[u]});const c=Object.keys(s).length;return c?(Object.keys(n).forEach(u=>{const l=s[u],d=new mie(n[u].attr,l);d.isValid?(s[u]=d,l||(d.tagOrder+=c)):r.warn(`Ignoring invalid Playlist Delta Update DATERANGE tag: "${fl(n[u].attr)}"`)}),s):n}function J7e(t,e,r){if(t&&e){let n=0;for(let i=0,s=t.length;i<=s;i++){const o=t[i],c=e[i+n];o&&c&&o.index===c.index&&o.fragment.sn===c.fragment.sn?r(o,c):n--}}}function e$e(t,e,r){const n=e.skippedSegments,i=Math.max(t.startSN,e.startSN)-e.startSN,s=(t.fragmentHint?1:0)+(n?e.endSN:Math.min(t.endSN,e.endSN))-e.startSN,o=e.startSN-t.startSN,c=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments,u=t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments;for(let l=i;l<=s;l++){const d=u[o+l];let f=c[l];if(n&&!f&&d&&(f=e.fragments[l]=d),d&&f){r(d,f,l,c);const A=d.relurl,p=f.relurl;if(A&&t$e(A,p)){e.playlistParsingError=UK(`media sequence mismatch ${f.sn}:`,t,e,d,f);return}else if(d.cc!==f.cc){e.playlistParsingError=UK(`discontinuity sequence mismatch (${d.cc}!=${f.cc})`,t,e,d,f);return}}}}function UK(t,e,r,n,i){return new Error(`${t} ${i.url}
Playlist starting @${e.startSN}
${e.m3u8}

Playlist starting @${r.startSN}
${r.m3u8}`)}function wie(t,e,r=!0){const n=e.startSN+e.skippedSegments-t.startSN,i=t.fragments,s=n>=0;let o=0;if(s&&n<i.length)o=i[n].start;else if(s&&e.startSN===t.endSN+1)o=t.fragmentEnd;else if(s&&r)o=t.fragmentStart+n*e.levelTargetDuration;else if(!e.skippedSegments&&e.fragmentStart===0)o=t.fragmentStart;else return;hO(e,o)}function hO(t,e){if(e){const r=t.fragments;for(let n=t.skippedSegments;n<r.length;n++)r[n].addStart(e);t.fragmentHint&&t.fragmentHint.addStart(e)}}function Eie(t,e=1/0){let r=1e3*t.targetduration;if(t.updated){const n=t.fragments;if(n.length&&r*4>e){const s=n[n.length-1].duration*1e3;s<r&&(r=s)}}else r/=2;return Math.round(r)}function _ie(t,e,r){if(!t)return null;let n=t.fragments[e-t.startSN];return n||(n=t.fragmentHint,n&&n.sn===e)?n:e<t.startSN&&r&&r.sn===e?r:null}function $K(t,e,r){return t?Sie(t.partList,e,r):null}function Sie(t,e,r){if(t)for(let n=t.length;n--;){const i=t[n];if(i.index===r&&i.fragment.sn===e)return i}return null}function Tie(t){t.forEach((e,r)=>{var n;(n=e.details)==null||n.fragments.forEach(i=>{i.level=r,i.initSegment&&(i.initSegment.level=r)})})}function t$e(t,e){return t!==e&&e?HK(t)!==HK(e):!1}function HK(t){return t.replace(/\?[^?]*$/,"")}function sE(t,e){for(let n=0,i=t.length;n<i;n++){var r;if(((r=t[n])==null?void 0:r.cc)===e)return t[n]}return null}function r$e(t,e){return!!(t&&e.startCC<t.endCC&&e.endCC>t.startCC)}function QK(t,e){const r=t.start+e;t.startPTS=r,t.setStart(r),t.endPTS=r+t.duration}function Cie(t,e){const r=e.fragments;for(let n=0,i=r.length;n<i;n++)QK(r[n],t);e.fragmentHint&&QK(e.fragmentHint,t),e.alignedSliding=!0}function n$e(t,e){t&&(jie(e,t),e.alignedSliding||Zj(e,t),!e.alignedSliding&&!e.skippedSegments&&wie(t,e,!1))}function jie(t,e){if(!r$e(e,t))return;const r=Math.min(e.endCC,t.endCC),n=sE(e.fragments,r),i=sE(t.fragments,r);if(!n||!i)return;Ho.log(`Aligning playlist at start of dicontinuity sequence ${r}`);const s=n.start-i.start;Cie(s,t)}function Zj(t,e){if(!t.hasProgramDateTime||!e.hasProgramDateTime)return;const r=t.fragments,n=e.fragments;if(!r.length||!n.length)return;let i,s;const o=Math.min(e.endCC,t.endCC);e.startCC<o&&t.startCC<o&&(i=sE(n,o),s=sE(r,o)),(!i||!s)&&(i=n[Math.floor(n.length/2)],s=sE(r,i.cc)||r[Math.floor(r.length/2)]);const c=i.programDateTime,u=s.programDateTime;if(!c||!u)return;const l=(u-c)/1e3-(s.start-i.start);Cie(l,t)}function vh(t,e,r){Uh(t,e,r),t.addEventListener(e,r)}function Uh(t,e,r){t.removeEventListener(e,r)}const i$e={toString:function(t){let e="";const r=t.length;for(let n=0;n<r;n++)e+=`[${t.start(n).toFixed(3)}-${t.end(n).toFixed(3)}]`;return e}},Kr={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"};class bF extends fie{constructor(e,r,n,i,s){super(i,e.logger),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state=Kr.STOPPED,this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.buffering=!0,this.loadingParts=!1,this.loopSn=void 0,this.onMediaSeeking=()=>{const{config:o,fragCurrent:c,media:u,mediaBuffer:l,state:d}=this,f=u?u.currentTime:0,A=Hs.bufferInfo(l||u,f,o.maxBufferHole),p=!A.len;if(this.log(`Media seeking to ${qn(f)?f.toFixed(3):f}, state: ${d}, ${p?"out of":"in"} buffer`),this.state===Kr.ENDED)this.resetLoadingState();else if(c){const g=o.maxFragLookUpTolerance,y=c.start-g,x=c.start+c.duration+g;if(p||x<A.start||y>A.end){const w=f>x;(f<y||w)&&(w&&c.loader&&(this.log(`Cancelling fragment load for seek (sn: ${c.sn})`),c.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}if(u){this.fragmentTracker.removeFragmentsInRange(f,1/0,this.playlistType,!0);const g=this.lastCurrentTime;if(f>g&&(this.lastCurrentTime=f),!this.loadingParts){const y=Math.max(A.end,f),x=this.shouldLoadParts(this.getLevelDetails(),y);x&&(this.log(`LL-Part loading ON after seeking to ${f.toFixed(2)} with buffer @${y.toFixed(2)}`),this.loadingParts=x)}}this.hls.hasEnoughToStart||(this.log(`Setting ${p?"startPosition":"nextLoadPosition"} to ${f} for seek without enough to start`),this.nextLoadPosition=f,p&&(this.startPosition=f)),p&&this.state===Kr.IDLE&&this.tickImmediate()},this.onMediaEnded=()=>{this.log("setting startPosition to 0 because media ended"),this.startPosition=this.lastCurrentTime=0},this.playlistType=s,this.hls=e,this.fragmentLoader=new L7e(e.config),this.keyLoader=n,this.fragmentTracker=r,this.config=e.config,this.decrypter=new gF(e.config)}registerListeners(){const{hls:e}=this;e.on(Le.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(Le.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(Le.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Le.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(Le.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(Le.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(Le.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(Le.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Le.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(Le.ERROR,this.onError,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(e){}stopLoad(){if(this.state===Kr.STOPPED)return;this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);const e=this.fragCurrent;e!=null&&e.loader&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=Kr.STOPPED}get startPositionValue(){const{nextLoadPosition:e,startPosition:r}=this;return r===-1&&e?e:r}get bufferingEnabled(){return this.buffering}pauseBuffering(){this.buffering=!1}resumeBuffering(){this.buffering=!0}get inFlightFrag(){return{frag:this.fragCurrent,state:this.state}}_streamEnded(e,r){if(r.live||!this.media)return!1;const n=e.end||0,i=this.config.timelineOffset||0;if(n<=i)return!1;const s=e.buffered;this.config.maxBufferHole&&s&&s.length>1&&(e=Hs.bufferedInfo(s,e.start,0));const o=e.nextStart;if(o&&o>i&&o<r.edge||this.media.currentTime<e.start)return!1;const u=r.partList;if(u!=null&&u.length){const d=u[u.length-1];return Hs.isBuffered(this.media,d.start+d.duration/2)}const l=r.fragments[r.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(l)}getLevelDetails(){if(this.levels&&this.levelLastLoaded!==null)return this.levelLastLoaded.details}get timelineOffset(){const e=this.config.timelineOffset;if(e){var r;return((r=this.getLevelDetails())==null?void 0:r.appliedTimelineOffset)||e}return 0}onMediaAttached(e,r){const n=this.media=this.mediaBuffer=r.media;vh(n,"seeking",this.onMediaSeeking),vh(n,"ended",this.onMediaEnded);const i=this.config;this.levels&&i.autoStartLoad&&this.state===Kr.STOPPED&&this.startLoad(i.startPosition)}onMediaDetaching(e,r){const n=!!r.transferMedia,i=this.media;if(i!==null){if(i.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),Uh(i,"seeking",this.onMediaSeeking),Uh(i,"ended",this.onMediaEnded),this.keyLoader&&!n&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loopSn=void 0,n){this.resetLoadingState(),this.resetTransmuxer();return}this.loadingParts=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}}onManifestLoading(){this.initPTS=[],this.levels=this.levelLastLoaded=this.fragCurrent=null,this.lastCurrentTime=this.startPosition=0,this.startFragRequested=!1}onError(e,r){}onManifestLoaded(e,r){this.startTimeOffset=r.startTimeOffset}onHandlerDestroying(){this.stopLoad(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),super.onHandlerDestroying(),this.hls=this.onMediaSeeking=this.onMediaEnded=null}onHandlerDestroyed(){this.state=Kr.STOPPED,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(e,r,n){this.startFragRequested=!0,this._loadFragForPlayback(e,r,n)}_loadFragForPlayback(e,r,n){const i=s=>{const o=s.frag;if(this.fragContextChanged(o)){this.warn(`${o.type} sn: ${o.sn}${s.part?" part: "+s.part.index:""} of ${this.fragInfo(o,!1,s.part)}) was dropped during download.`),this.fragmentTracker.removeFragment(o);return}o.stats.chunkCount++,this._handleFragmentLoadProgress(s)};this._doFragLoad(e,r,n,i).then(s=>{if(!s)return;const o=this.state,c=s.frag;if(this.fragContextChanged(c)){(o===Kr.FRAG_LOADING||!this.fragCurrent&&o===Kr.PARSING)&&(this.fragmentTracker.removeFragment(c),this.state=Kr.IDLE);return}"payload"in s&&(this.log(`Loaded ${c.type} sn: ${c.sn} of ${this.playlistLabel()} ${c.level}`),this.hls.trigger(Le.FRAG_LOADED,s)),this._handleFragmentLoadComplete(s)}).catch(s=>{this.state===Kr.STOPPED||this.state===Kr.ERROR||(this.warn(`Frag error: ${s?.message||s}`),this.resetFragmentLoading(e))})}clearTrackerIfNeeded(e){var r;const{fragmentTracker:n}=this;if(n.getState(e)===Fu.APPENDING){const s=e.type,o=this.getFwdBufferInfo(this.mediaBuffer,s),c=Math.max(e.duration,o?o.len:this.config.maxBufferLength),u=this.backtrackFragment;((u?e.sn-u.sn:0)===1||this.reduceMaxBufferLength(c,e.duration))&&n.removeFragment(e)}else((r=this.mediaBuffer)==null?void 0:r.buffered.length)===0?n.removeAllFragments():n.hasParts(e.type)&&(n.detectPartialFragments({frag:e,part:null,stats:e.stats,id:e.type}),n.getState(e)===Fu.PARTIAL&&n.removeFragment(e))}checkLiveUpdate(e){if(e.updated&&!e.live){const r=e.fragments[e.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:r,part:null,stats:r.stats,id:r.type})}e.fragments[0]||(e.deltaUpdateFailed=!0)}waitForLive(e){const r=e.details;return r?.live&&r.type!=="EVENT"&&(this.levelLastLoaded!==e||r.expired)}flushMainBuffer(e,r,n=null){if(!(e-r))return;const i={startOffset:e,endOffset:r,type:n};this.hls.trigger(Le.BUFFER_FLUSHING,i)}_loadInitSegment(e,r){this._doFragLoad(e,r).then(n=>{const i=n?.frag;if(!i||this.fragContextChanged(i)||!this.levels)throw new Error("init load aborted");return n}).then(n=>{const{hls:i}=this,{frag:s,payload:o}=n,c=s.decryptdata;if(o&&o.byteLength>0&&c!=null&&c.key&&c.iv&&mb(c.method)){const u=self.performance.now();return this.decrypter.decrypt(new Uint8Array(o),c.key.buffer,c.iv.buffer,yF(c.method)).catch(l=>{throw i.trigger(Le.ERROR,{type:Oi.MEDIA_ERROR,details:vr.FRAG_DECRYPT_ERROR,fatal:!1,error:l,reason:l.message,frag:s}),l}).then(l=>{const d=self.performance.now();return i.trigger(Le.FRAG_DECRYPTED,{frag:s,payload:l,stats:{tstart:u,tdecrypt:d}}),n.payload=l,this.completeInitSegmentLoad(n)})}return this.completeInitSegmentLoad(n)}).catch(n=>{this.state===Kr.STOPPED||this.state===Kr.ERROR||(this.warn(n),this.resetFragmentLoading(e))})}completeInitSegmentLoad(e){const{levels:r}=this;if(!r)throw new Error("init load aborted, missing levels");const n=e.frag.stats;this.state!==Kr.STOPPED&&(this.state=Kr.IDLE),e.frag.data=new Uint8Array(e.payload),n.parsing.start=n.buffering.start=self.performance.now(),n.parsing.end=n.buffering.end=self.performance.now(),this.tick()}unhandledEncryptionError(e,r){var n,i;const s=e.tracks;if(s&&!r.encrypted&&((n=s.audio)!=null&&n.encrypted||(i=s.video)!=null&&i.encrypted)&&(!this.config.emeEnabled||!this.keyLoader.emeController)){const o=this.media,c=new Error(`Encrypted track with no key in ${this.fragInfo(r)} (media ${o?"attached mediaKeys: "+o.mediaKeys:"detached"})`);return this.warn(c.message),!o||o.mediaKeys?!1:(this.hls.trigger(Le.ERROR,{type:Oi.KEY_SYSTEM_ERROR,details:vr.KEY_SYSTEM_NO_KEYS,fatal:!1,error:c,frag:r}),this.resetTransmuxer(),!0)}return!1}fragContextChanged(e){const{fragCurrent:r}=this;return!e||!r||e.sn!==r.sn||e.level!==r.level}fragBufferedComplete(e,r){const n=this.mediaBuffer?this.mediaBuffer:this.media;if(this.log(`Buffered ${e.type} sn: ${e.sn}${r?" part: "+r.index:""} of ${this.fragInfo(e,!1,r)} > buffer:${n?i$e.toString(Hs.getBuffered(n)):"(detached)"})`),eu(e)){var i;if(e.type!==fi.SUBTITLE){const o=e.elementaryStreams;if(!Object.keys(o).some(c=>!!o[c])){this.state=Kr.IDLE;return}}const s=(i=this.levels)==null?void 0:i[e.level];s!=null&&s.fragmentError&&(this.log(`Resetting level fragment error count of ${s.fragmentError} on frag buffered`),s.fragmentError=0)}this.state=Kr.IDLE}_handleFragmentLoadComplete(e){const{transmuxer:r}=this;if(!r)return;const{frag:n,part:i,partsLoaded:s}=e,o=!s||s.length===0||s.some(u=>!u),c=new vF(n.level,n.sn,n.stats.chunkCount+1,0,i?i.index:-1,!o);r.flush(c)}_handleFragmentLoadProgress(e){}_doFragLoad(e,r,n=null,i){var s;this.fragCurrent=e;const o=r.details;if(!this.levels||!o)throw new Error(`frag load aborted, missing level${o?"":" detail"}s`);let c=null;if(e.encrypted&&!((s=e.decryptdata)!=null&&s.key)){if(this.log(`Loading key for ${e.sn} of [${o.startSN}-${o.endSN}], ${this.playlistLabel()} ${e.level}`),this.state=Kr.KEY_LOADING,this.fragCurrent=e,c=this.keyLoader.load(e).then(A=>{if(!this.fragContextChanged(A.frag))return this.hls.trigger(Le.KEY_LOADED,A),this.state===Kr.KEY_LOADING&&(this.state=Kr.IDLE),A}),this.hls.trigger(Le.KEY_LOADING,{frag:e}),this.fragCurrent===null)return this.log("context changed in KEY_LOADING"),Promise.resolve(null)}else e.encrypted||(c=this.keyLoader.loadClear(e,o.encryptedFragments,this.startFragRequested),c&&this.log("[eme] blocking frag load until media-keys acquired"));const u=this.fragPrevious;if(eu(e)&&(!u||e.sn!==u.sn)){const A=this.shouldLoadParts(r.details,e.end);A!==this.loadingParts&&(this.log(`LL-Part loading ${A?"ON":"OFF"} loading sn ${u?.sn}->${e.sn}`),this.loadingParts=A)}if(n=Math.max(e.start,n||0),this.loadingParts&&eu(e)){const A=o.partList;if(A&&i){n>o.fragmentEnd&&o.fragmentHint&&(e=o.fragmentHint);const p=this.getNextPart(A,e,n);if(p>-1){const g=A[p];e=this.fragCurrent=g.fragment,this.log(`Loading ${e.type} sn: ${e.sn} part: ${g.index} (${p}/${A.length-1}) of ${this.fragInfo(e,!1,g)}) cc: ${e.cc} [${o.startSN}-${o.endSN}], target: ${parseFloat(n.toFixed(3))}`),this.nextLoadPosition=g.start+g.duration,this.state=Kr.FRAG_LOADING;let y;return c?y=c.then(x=>!x||this.fragContextChanged(x.frag)?null:this.doFragPartsLoad(e,g,r,i)).catch(x=>this.handleFragLoadError(x)):y=this.doFragPartsLoad(e,g,r,i).catch(x=>this.handleFragLoadError(x)),this.hls.trigger(Le.FRAG_LOADING,{frag:e,part:g,targetBufferTime:n}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):y}else if(!e.url||this.loadedEndOfParts(A,n))return Promise.resolve(null)}}if(eu(e)&&this.loadingParts){var l;this.log(`LL-Part loading OFF after next part miss @${n.toFixed(2)} Check buffer at sn: ${e.sn} loaded parts: ${(l=o.partList)==null?void 0:l.filter(A=>A.loaded).map(A=>`[${A.start}-${A.end}]`)}`),this.loadingParts=!1}else if(!e.url)return Promise.resolve(null);this.log(`Loading ${e.type} sn: ${e.sn} of ${this.fragInfo(e,!1)}) cc: ${e.cc} ${"["+o.startSN+"-"+o.endSN+"]"}, target: ${parseFloat(n.toFixed(3))}`),qn(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=Kr.FRAG_LOADING;const d=this.config.progressive&&e.type!==fi.SUBTITLE;let f;return d&&c?f=c.then(A=>!A||this.fragContextChanged(A.frag)?null:this.fragmentLoader.load(e,i)).catch(A=>this.handleFragLoadError(A)):f=Promise.all([this.fragmentLoader.load(e,d?i:void 0),c]).then(([A])=>(!d&&i&&i(A),A)).catch(A=>this.handleFragLoadError(A)),this.hls.trigger(Le.FRAG_LOADING,{frag:e,targetBufferTime:n}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):f}doFragPartsLoad(e,r,n,i){return new Promise((s,o)=>{var c;const u=[],l=(c=n.details)==null?void 0:c.partList,d=f=>{this.fragmentLoader.loadPart(e,f,i).then(A=>{u[f.index]=A;const p=A.part;this.hls.trigger(Le.FRAG_LOADED,A);const g=$K(n.details,e.sn,f.index+1)||Sie(l,e.sn,f.index+1);if(g)d(g);else return s({frag:e,part:p,partsLoaded:u})}).catch(o)};d(r)})}handleFragLoadError(e){if("data"in e){const r=e.data;r.frag&&r.details===vr.INTERNAL_ABORTED?this.handleFragLoadAborted(r.frag,r.part):r.frag&&r.type===Oi.KEY_SYSTEM_ERROR?(r.frag.abortRequests(),this.resetStartWhenNotLoaded(),this.resetFragmentLoading(r.frag)):this.hls.trigger(Le.ERROR,r)}else this.hls.trigger(Le.ERROR,{type:Oi.OTHER_ERROR,details:vr.INTERNAL_EXCEPTION,err:e,error:e,fatal:!0});return null}_handleTransmuxerFlush(e){const r=this.getCurrentContext(e);if(!r||this.state!==Kr.PARSING){!this.fragCurrent&&this.state!==Kr.STOPPED&&this.state!==Kr.ERROR&&(this.state=Kr.IDLE);return}const{frag:n,part:i,level:s}=r,o=self.performance.now();n.stats.parsing.end=o,i&&(i.stats.parsing.end=o);const c=this.getLevelDetails(),l=c&&n.sn>c.endSN||this.shouldLoadParts(c,n.end);l!==this.loadingParts&&(this.log(`LL-Part loading ${l?"ON":"OFF"} after parsing segment ending @${n.end.toFixed(2)}`),this.loadingParts=l),this.updateLevelTiming(n,i,s,e.partial)}shouldLoadParts(e,r){if(this.config.lowLatencyMode){if(!e)return this.loadingParts;if(e.partList){var n;const s=e.partList[0];if(s.fragment.type===fi.SUBTITLE)return!1;const o=s.end+(((n=e.fragmentHint)==null?void 0:n.duration)||0);if(r>=o){var i;if((this.hls.hasEnoughToStart?((i=this.media)==null?void 0:i.currentTime)||this.lastCurrentTime:this.getLoadPosition())>s.start-s.fragment.duration)return!0}}}return!1}getCurrentContext(e){const{levels:r,fragCurrent:n}=this,{level:i,sn:s,part:o}=e;if(!(r!=null&&r[i]))return this.warn(`Levels object was unset while buffering fragment ${s} of ${this.playlistLabel()} ${i}. The current chunk will not be buffered.`),null;const c=r[i],u=c.details,l=o>-1?$K(u,s,o):null,d=l?l.fragment:_ie(u,s,n);return d?(n&&n!==d&&(d.stats=n.stats),{frag:d,part:l,level:c}):null}bufferFragmentData(e,r,n,i,s){if(this.state!==Kr.PARSING)return;const{data1:o,data2:c}=e;let u=o;if(c&&(u=Jf(o,c)),!u.length)return;const l=this.initPTS[r.cc],d=l?-l.baseTime/l.timescale:void 0,f={type:e.type,frag:r,part:n,chunkMeta:i,offset:d,parent:r.type,data:u};if(this.hls.trigger(Le.BUFFER_APPENDING,f),e.dropped&&e.independent&&!n){if(s)return;this.flushBufferGap(r)}}flushBufferGap(e){const r=this.media;if(!r)return;if(!Hs.isBuffered(r,r.currentTime)){this.flushMainBuffer(0,e.start);return}const n=r.currentTime,i=Hs.bufferInfo(r,n,0),s=e.duration,o=Math.min(this.config.maxFragLookUpTolerance*2,s*.25),c=Math.max(Math.min(e.start-o,i.end-o),n+o);e.start-c>o&&this.flushMainBuffer(c,e.start)}getFwdBufferInfo(e,r){var n;const i=this.getLoadPosition();if(!qn(i))return null;const o=this.lastCurrentTime>i||(n=this.media)!=null&&n.paused?0:this.config.maxBufferHole;return this.getFwdBufferInfoAtPos(e,i,r,o)}getFwdBufferInfoAtPos(e,r,n,i){const s=Hs.bufferInfo(e,r,i);if(s.len===0&&s.nextStart!==void 0){const o=this.fragmentTracker.getBufferedFrag(r,n);if(o&&(s.nextStart<=o.end||o.gap)){const c=Math.max(Math.min(s.nextStart,o.end)-r,i);return Hs.bufferInfo(e,r,c)}}return s}getMaxBufferLength(e){const{config:r}=this;let n;return e?n=Math.max(8*r.maxBufferSize/e,r.maxBufferLength):n=r.maxBufferLength,Math.min(n,r.maxMaxBufferLength)}reduceMaxBufferLength(e,r){const n=this.config,i=Math.max(Math.min(e-r,n.maxBufferLength),r),s=Math.max(e-r*3,n.maxMaxBufferLength/2,i);return s>=i?(n.maxMaxBufferLength=s,this.warn(`Reduce max buffer length to ${s}s`),!0):!1}getAppendedFrag(e,r=fi.MAIN){const n=this.fragmentTracker?this.fragmentTracker.getAppendedFrag(e,r):null;return n&&"fragment"in n?n.fragment:n}getNextFragment(e,r){const n=r.fragments,i=n.length;if(!i)return null;const{config:s}=this,o=n[0].start,c=s.lowLatencyMode&&!!r.partList;let u=null;if(r.live){const f=s.initialLiveManifestSize;if(i<f)return this.warn(`Not enough fragments to start playback (have: ${i}, need: ${f})`),null;if(!r.PTSKnown&&!this.startFragRequested&&this.startPosition===-1||e<o){var l;c&&!this.loadingParts&&(this.log("LL-Part loading ON for initial live fragment"),this.loadingParts=!0),u=this.getInitialLiveFragment(r);const A=this.hls.startPosition,p=this.hls.liveSyncPosition,g=u?(A!==-1&&A>=o?A:p)||u.start:e;this.log(`Setting startPosition to ${g} to match start frag at live edge. mainStart: ${A} liveSyncPosition: ${p} frag.start: ${(l=u)==null?void 0:l.start}`),this.startPosition=this.nextLoadPosition=g}}else e<=o&&(u=n[0]);if(!u){const f=this.loadingParts?r.partEnd:r.fragmentEnd;u=this.getFragmentAtPosition(e,f,r)}let d=this.filterReplacedPrimary(u,r);if(!d&&u){const f=u.sn-r.startSN;d=this.filterReplacedPrimary(n[f+1]||null,r)}return this.mapToInitFragWhenRequired(d)}isLoopLoading(e,r){const n=this.fragmentTracker.getState(e);return(n===Fu.OK||n===Fu.PARTIAL&&!!e.gap)&&this.nextLoadPosition>r}getNextFragmentLoopLoading(e,r,n,i,s){let o=null;if(e.gap&&(o=this.getNextFragment(this.nextLoadPosition,r),o&&!o.gap&&n.nextStart)){const c=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,n.nextStart,i,0);if(c!==null&&n.len+c.len>=s){const u=o.sn;return this.loopSn!==u&&(this.log(`buffer full after gaps in "${i}" playlist starting at sn: ${u}`),this.loopSn=u),null}}return this.loopSn=void 0,o}get primaryPrefetch(){if(VK(this.config)){var e;if((e=this.hls.interstitialsManager)==null||(e=e.playingItem)==null?void 0:e.event)return!0}return!1}filterReplacedPrimary(e,r){if(!e)return e;if(VK(this.config)&&e.type!==fi.SUBTITLE){const n=this.hls.interstitialsManager,i=n?.bufferingItem;if(i){const o=i.event;if(o){if(o.appendInPlace||Math.abs(e.start-i.start)>1||i.start===0)return null}else if(e.end<=i.start&&r?.live===!1||e.start>i.end&&i.nextEvent&&(i.nextEvent.appendInPlace||e.start-i.end>1))return null}const s=n?.playerQueue;if(s)for(let o=s.length;o--;){const c=s[o].interstitial;if(c.appendInPlace&&e.start>=c.startTime&&e.end<=c.resumeTime)return null}}return e}mapToInitFragWhenRequired(e){return e!=null&&e.initSegment&&!e.initSegment.data&&!this.bitrateTest?e.initSegment:e}getNextPart(e,r,n){let i=-1,s=!1,o=!0;for(let c=0,u=e.length;c<u;c++){const l=e[c];if(o=o&&!l.independent,i>-1&&n<l.start)break;const d=l.loaded;d?i=-1:(s||(l.independent||o)&&l.fragment===r)&&(l.fragment!==r&&this.warn(`Need buffer at ${n} but next unloaded part starts at ${l.start}`),i=c),s=d}return i}loadedEndOfParts(e,r){let n;for(let i=e.length;i--;){if(n=e[i],!n.loaded)return!1;if(r>n.start)return!0}return!1}getInitialLiveFragment(e){const r=e.fragments,n=this.fragPrevious;let i=null;if(n){if(e.hasProgramDateTime&&(this.log(`Live playlist, switching playlist, load frag with same PDT: ${n.programDateTime}`),i=x7e(r,n.endProgramDateTime,this.config.maxFragLookUpTolerance)),!i){const s=n.sn+1;if(s>=e.startSN&&s<=e.endSN){const o=r[s-e.startSN];n.cc===o.cc&&(i=o,this.log(`Live playlist, switching playlist, load frag with next SN: ${i.sn}`))}i||(i=uie(e,n.cc,n.end),i&&this.log(`Live playlist, switching playlist, load frag with same CC: ${i.sn}`))}}else{const s=this.hls.liveSyncPosition;s!==null&&(i=this.getFragmentAtPosition(s,this.bitrateTest?e.fragmentEnd:e.edge,e))}return i}getFragmentAtPosition(e,r,n){const{config:i}=this;let{fragPrevious:s}=this,{fragments:o,endSN:c}=n;const{fragmentHint:u}=n,{maxFragLookUpTolerance:l}=i,d=n.partList,f=!!(this.loadingParts&&d!=null&&d.length&&u);f&&!this.bitrateTest&&d[d.length-1].fragment.sn===u.sn&&(o=o.concat(u),c=u.sn);let A;if(e<r){var p;const y=e<this.lastCurrentTime||e>r-l||(p=this.media)!=null&&p.paused||!this.startFragRequested?0:l;A=yy(s,o,e,y)}else A=o[o.length-1];if(A){const g=A.sn-n.startSN,y=this.fragmentTracker.getState(A);if((y===Fu.OK||y===Fu.PARTIAL&&A.gap)&&(s=A),s&&A.sn===s.sn&&(!f||d[0].fragment.sn>A.sn||!n.live)&&A.level===s.level){const w=o[g+1];A.sn<c&&this.fragmentTracker.getState(w)!==Fu.OK?A=w:A=null}}return A}alignPlaylists(e,r,n){const i=e.fragments.length;if(!i)return this.warn("No fragments in live playlist"),0;const s=e.fragmentStart,o=!r,c=e.alignedSliding&&qn(s);if(o||!c&&!s){n$e(n,e);const u=e.fragmentStart;return this.log(`Live playlist sliding: ${u.toFixed(2)} start-sn: ${r?r.startSN:"na"}->${e.startSN} fragments: ${i}`),u}return s}waitForCdnTuneIn(e){return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,e.partTarget*3)}setStartPosition(e,r){let n=this.startPosition;n<r&&(n=-1);const i=this.timelineOffset;if(n===-1){const s=this.startTimeOffset!==null,o=s?this.startTimeOffset:e.startTimeOffset;o!==null&&qn(o)?(n=r+o,o<0&&(n+=e.edge),n=Math.min(Math.max(r,n),r+e.totalduration),this.log(`Setting startPosition to ${n} for start time offset ${o} found in ${s?"multivariant":"media"} playlist`),this.startPosition=n):e.live?(n=this.hls.liveSyncPosition||r,this.log(`Setting startPosition to -1 to start at live edge ${n}`),this.startPosition=-1):(this.log("setting startPosition to 0 by default"),this.startPosition=n=0),this.lastCurrentTime=n+i}this.nextLoadPosition=n+i}getLoadPosition(){var e;const{media:r}=this;let n=0;return(e=this.hls)!=null&&e.hasEnoughToStart&&r?n=r.currentTime:this.nextLoadPosition>=0&&(n=this.nextLoadPosition),n}handleFragLoadAborted(e,r){this.transmuxer&&e.type===this.playlistType&&eu(e)&&e.stats.aborted&&(this.log(`Fragment ${e.sn}${r?" part "+r.index:""} of ${this.playlistLabel()} ${e.level} was aborted`),this.resetFragmentLoading(e))}resetFragmentLoading(e){(!this.fragCurrent||!this.fragContextChanged(e)&&this.state!==Kr.FRAG_LOADING_WAITING_RETRY)&&(this.state=Kr.IDLE)}onFragmentOrKeyLoadError(e,r){var n;if(r.chunkMeta&&!r.frag){const w=this.getCurrentContext(r.chunkMeta);w&&(r.frag=w.frag)}const i=r.frag;if(!i||i.type!==e||!this.levels)return;if(this.fragContextChanged(i)){var s;this.warn(`Frag load error must match current frag to retry ${i.url} > ${(s=this.fragCurrent)==null?void 0:s.url}`);return}const o=r.details===vr.FRAG_GAP;o&&this.fragmentTracker.fragBuffered(i,!0);const c=r.errorAction;if(!c){this.state=Kr.ERROR;return}const{action:u,flags:l,retryCount:d=0,retryConfig:f}=c,A=!!f,p=A&&u===Fd.RetryRequest,g=A&&!c.resolved&&l===of.MoveAllAlternatesMatchingHost,y=(n=this.hls.latestLevelDetails)==null?void 0:n.live;if(!p&&g&&eu(i)&&!i.endList&&y&&!hie(r))this.resetFragmentErrors(e),this.treatAsGap(i),c.resolved=!0;else if((p||g)&&d<f.maxNumRetry){var x;const w=lO((x=r.response)==null?void 0:x.code),E=pF(f,d);if(this.resetStartWhenNotLoaded(),this.retryDate=self.performance.now()+E,this.state=Kr.FRAG_LOADING_WAITING_RETRY,c.resolved=!0,w){this.log("Waiting for connection (offline)"),this.retryDate=1/0,r.reason="offline";return}this.warn(`Fragment ${i.sn} of ${e} ${i.level} errored with ${r.details}, retrying loading ${d+1}/${f.maxNumRetry} in ${E}ms`)}else if(f)if(this.resetFragmentErrors(e),d<f.maxNumRetry)!o&&u!==Fd.RemoveAlternatePermanently&&(c.resolved=!0);else{this.warn(`${r.details} reached or exceeded max retry (${d})`);return}else u===Fd.SendAlternateToPenaltyBox?this.state=Kr.WAITING_LEVEL:this.state=Kr.ERROR;this.tickImmediate()}checkRetryDate(){const e=self.performance.now(),r=this.retryDate,n=r===1/0;(!r||e>=r||n&&!lO(0))&&(n&&this.log("Connection restored (online)"),this.resetStartWhenNotLoaded(),this.state=Kr.IDLE)}reduceLengthAndFlushBuffer(e){if(this.state===Kr.PARSING||this.state===Kr.PARSED){const r=e.frag,n=e.parent,i=this.getFwdBufferInfo(this.mediaBuffer,n),s=i&&i.len>.5;s&&this.reduceMaxBufferLength(i.len,r?.duration||10);const o=!s;return o&&this.warn(`Buffer full error while media.currentTime (${this.getLoadPosition()}) is not buffered, flush ${n} buffer`),r&&(this.fragmentTracker.removeFragment(r),this.nextLoadPosition=r.start),this.resetLoadingState(),o}return!1}resetFragmentErrors(e){e===fi.AUDIO&&(this.fragCurrent=null),this.hls.hasEnoughToStart||(this.startFragRequested=!1),this.state!==Kr.STOPPED&&(this.state=Kr.IDLE)}afterBufferFlushed(e,r,n){if(!e)return;const i=Hs.getBuffered(e);this.fragmentTracker.detectEvictedFragments(r,i,n),this.state===Kr.ENDED&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state!==Kr.STOPPED&&(this.state=Kr.IDLE)}resetStartWhenNotLoaded(){if(!this.hls.hasEnoughToStart){this.startFragRequested=!1;const e=this.levelLastLoaded,r=e?e.details:null;r!=null&&r.live?(this.log("resetting startPosition for live start"),this.startPosition=-1,this.setStartPosition(r,r.fragmentStart),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(e){this.log(`Loading context changed while buffering sn ${e.sn} of ${this.playlistLabel()} ${e.level===-1?"<removed>":e.level}. This chunk will not be buffered.`),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(),this.resetLoadingState()}removeUnbufferedFrags(e=0){this.fragmentTracker.removeFragmentsInRange(e,1/0,this.playlistType,!1,!0)}updateLevelTiming(e,r,n,i){const s=n.details;if(!s){this.warn("level.details undefined");return}if(!Object.keys(e.elementaryStreams).reduce((u,l)=>{const d=e.elementaryStreams[l];if(d){const f=d.endPTS-d.startPTS;if(f<=0)return this.warn(`Could not parse fragment ${e.sn} ${l} duration reliably (${f})`),u||!1;const A=i?0:bie(s,e,d.startPTS,d.endPTS,d.startDTS,d.endDTS,this);return this.hls.trigger(Le.LEVEL_PTS_UPDATED,{details:s,level:n,drift:A,type:l,frag:e,start:d.startPTS,end:d.endPTS}),!0}return u},!1)){var c;const u=((c=this.transmuxer)==null?void 0:c.error)===null;if((n.fragmentError===0||u&&(n.fragmentError<2||e.endList))&&this.treatAsGap(e,n),u){const l=new Error(`Found no media in fragment ${e.sn} of ${this.playlistLabel()} ${e.level} resetting transmuxer to fallback to playlist timing`);if(this.warn(l.message),this.hls.trigger(Le.ERROR,{type:Oi.MEDIA_ERROR,details:vr.FRAG_PARSING_ERROR,fatal:!1,error:l,frag:e,reason:`Found no media in msn ${e.sn} of ${this.playlistLabel()} "${n.url}"`}),!this.hls)return;this.resetTransmuxer()}}this.state=Kr.PARSED,this.log(`Parsed ${e.type} sn: ${e.sn}${r?" part: "+r.index:""} of ${this.fragInfo(e,!1,r)})`),this.hls.trigger(Le.FRAG_PARSED,{frag:e,part:r})}playlistLabel(){return this.playlistType===fi.MAIN?"level":"track"}fragInfo(e,r=!0,n){var i,s;return`${this.playlistLabel()} ${e.level} (${n?"part":"frag"}:[${((i=r&&!n?e.startPTS:(n||e).start)!=null?i:NaN).toFixed(3)}-${((s=r&&!n?e.endPTS:(n||e).end)!=null?s:NaN).toFixed(3)}]${n&&e.type==="main"?"INDEPENDENT="+(n.independent?"YES":"NO"):""}`}treatAsGap(e,r){r&&r.fragmentError++,e.gap=!0,this.fragmentTracker.removeFragment(e),this.fragmentTracker.fragBuffered(e,!0)}resetTransmuxer(){var e;(e=this.transmuxer)==null||e.reset()}recoverWorkerError(e){e.event==="demuxerWorker"&&(this.fragmentTracker.removeAllFragments(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),this.resetStartWhenNotLoaded(),this.resetLoadingState())}set state(e){const r=this._state;r!==e&&(this._state=e,this.log(`${r}->${e}`))}get state(){return this._state}}function VK(t){return!!t.interstitialsController&&t.enableInterstitialPlayback!==!1}class Nie{constructor(){this.chunks=[],this.dataLength=0}push(e){this.chunks.push(e),this.dataLength+=e.length}flush(){const{chunks:e,dataLength:r}=this;let n;if(e.length)e.length===1?n=e[0]:n=s$e(e,r);else return new Uint8Array(0);return this.reset(),n}reset(){this.chunks.length=0,this.dataLength=0}}function s$e(t,e){const r=new Uint8Array(e);let n=0;for(let i=0;i<t.length;i++){const s=t[i];r.set(s,n),n+=s.length}return r}var E4={exports:{}},zK;function a$e(){return zK||(zK=1,(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(u,l,d){this.fn=u,this.context=l,this.once=d||!1}function s(u,l,d,f,A){if(typeof d!="function")throw new TypeError("The listener must be a function");var p=new i(d,f||u,A),g=r?r+l:l;return u._events[g]?u._events[g].fn?u._events[g]=[u._events[g],p]:u._events[g].push(p):(u._events[g]=p,u._eventsCount++),u}function o(u,l){--u._eventsCount===0?u._events=new n:delete u._events[l]}function c(){this._events=new n,this._eventsCount=0}c.prototype.eventNames=function(){var l=[],d,f;if(this._eventsCount===0)return l;for(f in d=this._events)e.call(d,f)&&l.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(d)):l},c.prototype.listeners=function(l){var d=r?r+l:l,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var A=0,p=f.length,g=new Array(p);A<p;A++)g[A]=f[A].fn;return g},c.prototype.listenerCount=function(l){var d=r?r+l:l,f=this._events[d];return f?f.fn?1:f.length:0},c.prototype.emit=function(l,d,f,A,p,g){var y=r?r+l:l;if(!this._events[y])return!1;var x=this._events[y],w=arguments.length,E,T;if(x.fn){switch(x.once&&this.removeListener(l,x.fn,void 0,!0),w){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,d),!0;case 3:return x.fn.call(x.context,d,f),!0;case 4:return x.fn.call(x.context,d,f,A),!0;case 5:return x.fn.call(x.context,d,f,A,p),!0;case 6:return x.fn.call(x.context,d,f,A,p,g),!0}for(T=1,E=new Array(w-1);T<w;T++)E[T-1]=arguments[T];x.fn.apply(x.context,E)}else{var C=x.length,N;for(T=0;T<C;T++)switch(x[T].once&&this.removeListener(l,x[T].fn,void 0,!0),w){case 1:x[T].fn.call(x[T].context);break;case 2:x[T].fn.call(x[T].context,d);break;case 3:x[T].fn.call(x[T].context,d,f);break;case 4:x[T].fn.call(x[T].context,d,f,A);break;default:if(!E)for(N=1,E=new Array(w-1);N<w;N++)E[N-1]=arguments[N];x[T].fn.apply(x[T].context,E)}}return!0},c.prototype.on=function(l,d,f){return s(this,l,d,f,!1)},c.prototype.once=function(l,d,f){return s(this,l,d,f,!0)},c.prototype.removeListener=function(l,d,f,A){var p=r?r+l:l;if(!this._events[p])return this;if(!d)return o(this,p),this;var g=this._events[p];if(g.fn)g.fn===d&&(!A||g.once)&&(!f||g.context===f)&&o(this,p);else{for(var y=0,x=[],w=g.length;y<w;y++)(g[y].fn!==d||A&&!g[y].once||f&&g[y].context!==f)&&x.push(g[y]);x.length?this._events[p]=x.length===1?x[0]:x:o(this,p)}return this},c.prototype.removeAllListeners=function(l){var d;return l?(d=r?r+l:l,this._events[d]&&o(this,d)):(this._events=new n,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=r,c.EventEmitter=c,t.exports=c})(E4)),E4.exports}var o$e=a$e(),wF=L8e(o$e);const r2="1.6.15",Qb={};function l$e(){return typeof __HLS_WORKER_BUNDLE__=="function"}function c$e(){const t=Qb[r2];if(t)return t.clientCount++,t;const e=new self.Blob([`var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(${__HLS_WORKER_BUNDLE__.toString()})(true);`],{type:"text/javascript"}),r=self.URL.createObjectURL(e),i={worker:new self.Worker(r),objectURL:r,clientCount:1};return Qb[r2]=i,i}function u$e(t){const e=Qb[t];if(e)return e.clientCount++,e;const r=new self.URL(t,self.location.href).href,i={worker:new self.Worker(r),scriptURL:r,clientCount:1};return Qb[t]=i,i}function d$e(t){const e=Qb[t||r2];if(e&&e.clientCount--===1){const{worker:n,objectURL:i}=e;delete Qb[t||r2],i&&self.URL.revokeObjectURL(i),n.terminate()}}function kie(t,e){return e+10<=t.length&&t[e]===51&&t[e+1]===68&&t[e+2]===73&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128}function EF(t,e){return e+10<=t.length&&t[e]===73&&t[e+1]===68&&t[e+2]===51&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128}function M5(t,e){let r=0;return r=(t[e]&127)<<21,r|=(t[e+1]&127)<<14,r|=(t[e+2]&127)<<7,r|=t[e+3]&127,r}function n2(t,e){const r=e;let n=0;for(;EF(t,e);){n+=10;const i=M5(t,e+6);n+=i,kie(t,e+10)&&(n+=10),e+=n}if(n>0)return t.subarray(r,r+n)}function h$e(t,e,r,n){const i=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],s=e[r+2],o=s>>2&15;if(o>12){const p=new Error(`invalid ADTS sampling index:${o}`);t.emit(Le.ERROR,Le.ERROR,{type:Oi.MEDIA_ERROR,details:vr.FRAG_PARSING_ERROR,fatal:!0,error:p,reason:p.message});return}const c=(s>>6&3)+1,u=e[r+3]>>6&3|(s&1)<<2,l="mp4a.40."+c,d=i[o];let f=o;(c===5||c===29)&&(f-=3);const A=[c<<3|(f&14)>>1,(f&1)<<7|u<<3];return Ho.log(`manifest codec:${n}, parsed codec:${l}, channels:${u}, rate:${d} (ADTS object type:${c} sampling index:${o})`),{config:A,samplerate:d,channelCount:u,codec:l,parsedCodec:l,manifestCodec:n}}function Iie(t,e){return t[e]===255&&(t[e+1]&246)===240}function Lie(t,e){return t[e+1]&1?7:9}function _F(t,e){return(t[e+3]&3)<<11|t[e+4]<<3|(t[e+5]&224)>>>5}function f$e(t,e){return e+5<t.length}function Jj(t,e){return e+1<t.length&&Iie(t,e)}function A$e(t,e){return f$e(t,e)&&Iie(t,e)&&_F(t,e)<=t.length-e}function m$e(t,e){if(Jj(t,e)){const r=Lie(t,e);if(e+r>=t.length)return!1;const n=_F(t,e);if(n<=r)return!1;const i=e+n;return i===t.length||Jj(t,i)}return!1}function Bie(t,e,r,n,i){if(!t.samplerate){const s=h$e(e,r,n,i);if(!s)return;nl(t,s)}}function Pie(t){return 1024*9e4/t}function p$e(t,e){const r=Lie(t,e);if(e+r<=t.length){const n=_F(t,e)-r;if(n>0)return{headerLength:r,frameLength:n}}}function Oie(t,e,r,n,i){const s=Pie(t.samplerate),o=n+i*s,c=p$e(e,r);let u;if(c){const{frameLength:f,headerLength:A}=c,p=A+f,g=Math.max(0,r+p-e.length);g?(u=new Uint8Array(p-A),u.set(e.subarray(r+A,e.length),0)):u=e.subarray(r+A,r+p);const y={unit:u,pts:o};return g||t.samples.push(y),{sample:y,length:p,missing:g}}const l=e.length-r;return u=new Uint8Array(l),u.set(e.subarray(r,e.length),0),{sample:{unit:u,pts:o},length:l,missing:-1}}function g$e(t,e){return EF(t,e)&&M5(t,e+6)+10<=t.length-e}function v$e(t){return t instanceof ArrayBuffer?t:t.byteOffset==0&&t.byteLength==t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer}function _4(t,e=0,r=1/0){return y$e(t,e,r,Uint8Array)}function y$e(t,e,r,n){const i=x$e(t);let s=1;"BYTES_PER_ELEMENT"in n&&(s=n.BYTES_PER_ELEMENT);const o=b$e(t)?t.byteOffset:0,c=(o+t.byteLength)/s,u=(o+e)/s,l=Math.floor(Math.max(0,Math.min(u,c))),d=Math.floor(Math.min(l+Math.max(r,0),c));return new n(i,l,d-l)}function x$e(t){return t instanceof ArrayBuffer?t:t.buffer}function b$e(t){return t&&t.buffer instanceof ArrayBuffer&&t.byteLength!==void 0&&t.byteOffset!==void 0}function w$e(t){const e={key:t.type,description:"",data:"",mimeType:null,pictureType:null},r=3;if(t.size<2)return;if(t.data[0]!==r){console.log("Ignore frame with unrecognized character encoding");return}const n=t.data.subarray(1).indexOf(0);if(n===-1)return;const i=yf(_4(t.data,1,n)),s=t.data[2+n],o=t.data.subarray(3+n).indexOf(0);if(o===-1)return;const c=yf(_4(t.data,3+n,o));let u;return i==="-->"?u=yf(_4(t.data,4+n+o)):u=v$e(t.data.subarray(4+n+o)),e.mimeType=i,e.pictureType=s,e.description=c,e.data=u,e}function E$e(t){if(t.size<2)return;const e=yf(t.data,!0),r=new Uint8Array(t.data.subarray(e.length+1));return{key:t.type,info:e,data:r.buffer}}function _$e(t){if(t.size<2)return;if(t.type==="TXXX"){let r=1;const n=yf(t.data.subarray(r),!0);r+=n.length+1;const i=yf(t.data.subarray(r));return{key:t.type,info:n,data:i}}const e=yf(t.data.subarray(1));return{key:t.type,info:"",data:e}}function S$e(t){if(t.type==="WXXX"){if(t.size<2)return;let r=1;const n=yf(t.data.subarray(r),!0);r+=n.length+1;const i=yf(t.data.subarray(r));return{key:t.type,info:n,data:i}}const e=yf(t.data);return{key:t.type,info:"",data:e}}function T$e(t){return t.type==="PRIV"?E$e(t):t.type[0]==="W"?S$e(t):t.type==="APIC"?w$e(t):_$e(t)}function C$e(t){const e=String.fromCharCode(t[0],t[1],t[2],t[3]),r=M5(t,4),n=10;return{type:e,size:r,data:t.subarray(n,n+r)}}const AS=10,j$e=10;function Rie(t){let e=0;const r=[];for(;EF(t,e);){const n=M5(t,e+6);t[e+5]>>6&1&&(e+=AS),e+=AS;const i=e+n;for(;e+j$e<i;){const s=C$e(t.subarray(e)),o=T$e(s);o&&r.push(o),e+=s.size+AS}kie(t,e)&&(e+=AS)}return r}function Die(t){return t&&t.key==="PRIV"&&t.info==="com.apple.streaming.transportStreamTimestamp"}function N$e(t){if(t.data.byteLength===8){const e=new Uint8Array(t.data),r=e[3]&1;let n=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return n/=45,r&&(n+=4772185884e-2),Math.round(n)}}function SF(t){const e=Rie(t);for(let r=0;r<e.length;r++){const n=e[r];if(Die(n))return N$e(n)}}let hf=(function(t){return t.audioId3="org.id3",t.dateRange="com.apple.quicktime.HLS",t.emsg="https://aomedia.org/emsg/ID3",t.misbklv="urn:misb:KLV:bin:1910.1",t})({});function jm(t="",e=9e4){return{type:t,id:-1,pid:-1,inputTimeScale:e,sequenceNumber:-1,samples:[],dropped:0}}class TF{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(e,r,n,i){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(e){this.initPTS=e,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(e,r){return!1}appendFrame(e,r,n){}demux(e,r){this.cachedData&&(e=Jf(this.cachedData,e),this.cachedData=null);let n=n2(e,0),i=n?n.length:0,s;const o=this._audioTrack,c=this._id3Track,u=n?SF(n):void 0,l=e.length;for((this.basePTS===null||this.frameIndex===0&&qn(u))&&(this.basePTS=k$e(u,r,this.initPTS),this.lastPTS=this.basePTS),this.lastPTS===null&&(this.lastPTS=this.basePTS),n&&n.length>0&&c.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:n,type:hf.audioId3,duration:Number.POSITIVE_INFINITY});i<l;){if(this.canParse(e,i)){const d=this.appendFrame(o,e,i);d?(this.frameIndex++,this.lastPTS=d.sample.pts,i+=d.length,s=i):i=l}else g$e(e,i)?(n=n2(e,i),c.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:n,type:hf.audioId3,duration:Number.POSITIVE_INFINITY}),i+=n.length,s=i):i++;if(i===l&&s!==l){const d=e.slice(s);this.cachedData?this.cachedData=Jf(this.cachedData,d):this.cachedData=d}}return{audioTrack:o,videoTrack:jm(),id3Track:c,textTrack:jm()}}demuxSampleAes(e,r,n){return Promise.reject(new Error(`[${this}] This demuxer does not support Sample-AES decryption`))}flush(e){const r=this.cachedData;return r&&(this.cachedData=null,this.demux(r,0)),{audioTrack:this._audioTrack,videoTrack:jm(),id3Track:this._id3Track,textTrack:jm()}}destroy(){this.cachedData=null,this._audioTrack=this._id3Track=void 0}}const k$e=(t,e,r)=>{if(qn(t))return t*90;const n=r?r.baseTime*9e4/r.timescale:0;return e*9e4+n};let mS=null;const I$e=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],L$e=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],B$e=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],P$e=[0,1,1,4];function Mie(t,e,r,n,i){if(r+24>e.length)return;const s=Fie(e,r);if(s&&r+s.frameLength<=e.length){const o=s.samplesPerFrame*9e4/s.sampleRate,c=n+i*o,u={unit:e.subarray(r,r+s.frameLength),pts:c,dts:c};return t.config=[],t.channelCount=s.channelCount,t.samplerate=s.sampleRate,t.samples.push(u),{sample:u,length:s.frameLength,missing:0}}}function Fie(t,e){const r=t[e+1]>>3&3,n=t[e+1]>>1&3,i=t[e+2]>>4&15,s=t[e+2]>>2&3;if(r!==1&&i!==0&&i!==15&&s!==3){const o=t[e+2]>>1&1,c=t[e+3]>>6,u=r===3?3-n:n===3?3:4,l=I$e[u*14+i-1]*1e3,f=L$e[(r===3?0:r===2?1:2)*3+s],A=c===3?1:2,p=B$e[r][n],g=P$e[n],y=p*8*g,x=Math.floor(p*l/f+o)*g;if(mS===null){const T=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);mS=T?parseInt(T[1]):0}return mS&&mS<=87&&n===2&&l>=224e3&&c===0&&(t[e+3]=t[e+3]|128),{sampleRate:f,channelCount:A,frameLength:x,samplesPerFrame:y}}}function CF(t,e){return t[e]===255&&(t[e+1]&224)===224&&(t[e+1]&6)!==0}function Uie(t,e){return e+1<t.length&&CF(t,e)}function O$e(t,e){return CF(t,e)&&4<=t.length-e}function $ie(t,e){if(e+1<t.length&&CF(t,e)){const n=Fie(t,e);let i=4;n!=null&&n.frameLength&&(i=n.frameLength);const s=e+i;return s===t.length||Uie(t,s)}return!1}class R$e extends TF{constructor(e,r){super(),this.observer=void 0,this.config=void 0,this.observer=e,this.config=r}resetInitSegment(e,r,n,i){super.resetInitSegment(e,r,n,i),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:r,duration:i,inputTimeScale:9e4,dropped:0}}static probe(e,r){if(!e)return!1;const n=n2(e,0);let i=n?.length||0;if($ie(e,i))return!1;for(let s=e.length;i<s;i++)if(m$e(e,i))return r.log("ADTS sync word found !"),!0;return!1}canParse(e,r){return A$e(e,r)}appendFrame(e,r,n){Bie(e,this.observer,r,n,e.manifestCodec);const i=Oie(e,r,n,this.basePTS,this.frameIndex);if(i&&i.missing===0)return i}}const Hie=(t,e)=>{let r=0,n=5;e+=n;const i=new Uint32Array(1),s=new Uint32Array(1),o=new Uint8Array(1);for(;n>0;){o[0]=t[e];const c=Math.min(n,8),u=8-c;s[0]=4278190080>>>24+u<<u,i[0]=(o[0]&s[0])>>u,r=r?r<<c|i[0]:i[0],e+=1,n-=c}return r};class D$e extends TF{constructor(e){super(),this.observer=void 0,this.observer=e}resetInitSegment(e,r,n,i){super.resetInitSegment(e,r,n,i),this._audioTrack={container:"audio/ac-3",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"ac3",samples:[],manifestCodec:r,duration:i,inputTimeScale:9e4,dropped:0}}canParse(e,r){return r+64<e.length}appendFrame(e,r,n){const i=Qie(e,r,n,this.basePTS,this.frameIndex);if(i!==-1)return{sample:e.samples[e.samples.length-1],length:i,missing:0}}static probe(e){if(!e)return!1;const r=n2(e,0);if(!r)return!1;const n=r.length;return e[n]===11&&e[n+1]===119&&SF(r)!==void 0&&Hie(e,n)<16}}function Qie(t,e,r,n,i){if(r+8>e.length||e[r]!==11||e[r+1]!==119)return-1;const s=e[r+4]>>6;if(s>=3)return-1;const c=[48e3,44100,32e3][s],u=e[r+4]&63,d=[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][u*3+s]*2;if(r+d>e.length)return-1;const f=e[r+6]>>5;let A=0;f===2?A+=2:(f&1&&f!==1&&(A+=2),f&4&&(A+=2));const p=(e[r+6]<<8|e[r+7])>>12-A&1,y=[2,1,2,3,3,4,4,5][f]+p,x=e[r+5]>>3,w=e[r+5]&7,E=new Uint8Array([s<<6|x<<1|w>>2,(w&3)<<6|f<<3|p<<2|u>>4,u<<4&224]),T=1536/c*9e4,C=n+i*T,N=e.subarray(r,r+d);return t.config=E,t.channelCount=y,t.samplerate=c,t.samples.push({unit:N,pts:C}),d}class M$e extends TF{resetInitSegment(e,r,n,i){super.resetInitSegment(e,r,n,i),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:r,duration:i,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;const r=n2(e,0);let n=r?.length||0;if(r&&e[n]===11&&e[n+1]===119&&SF(r)!==void 0&&Hie(e,n)<=16)return!1;for(let i=e.length;n<i;n++)if($ie(e,n))return Ho.log("MPEG Audio sync word found !"),!0;return!1}canParse(e,r){return O$e(e,r)}appendFrame(e,r,n){if(this.basePTS!==null)return Mie(e,r,n,this.basePTS,this.frameIndex)}}const F$e=/\/emsg[-/]ID3/i;class U$e{constructor(e,r){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=r}resetTimeStamp(){}resetInitSegment(e,r,n,i){const s=this.videoTrack=jm("video",1),o=this.audioTrack=jm("audio",1),c=this.txtTrack=jm("text",1);if(this.id3Track=jm("id3",1),this.timeOffset=0,!(e!=null&&e.byteLength))return;const u=Jne(e);if(u.video){const{id:l,timescale:d,codec:f,supplemental:A}=u.video;s.id=l,s.timescale=c.timescale=d,s.codec=f,s.supplemental=A}if(u.audio){const{id:l,timescale:d,codec:f}=u.audio;o.id=l,o.timescale=d,o.codec=f}c.id=qne.text,s.sampleDuration=0,s.duration=o.duration=i}resetContiguity(){this.remainderData=null}static probe(e){return D8e(e)}demux(e,r){this.timeOffset=r;let n=e;const i=this.videoTrack,s=this.txtTrack;if(this.config.progressive){this.remainderData&&(n=Jf(this.remainderData,e));const c=V8e(n);this.remainderData=c.remainder,i.samples=c.valid||new Uint8Array}else i.samples=n;const o=this.extractID3Track(i,r);return s.samples=cK(r,i),{videoTrack:i,audioTrack:this.audioTrack,id3Track:o,textTrack:this.txtTrack}}flush(){const e=this.timeOffset,r=this.videoTrack,n=this.txtTrack;r.samples=this.remainderData||new Uint8Array,this.remainderData=null;const i=this.extractID3Track(r,this.timeOffset);return n.samples=cK(e,r),{videoTrack:r,audioTrack:jm(),id3Track:i,textTrack:jm()}}extractID3Track(e,r){const n=this.id3Track;if(e.samples.length){const i=pa(e.samples,["emsg"]);i&&i.forEach(s=>{const o=K8e(s);if(F$e.test(o.schemeIdUri)){const c=KK(o,r);let u=o.eventDuration===4294967295?Number.POSITIVE_INFINITY:o.eventDuration/o.timeScale;u<=.001&&(u=Number.POSITIVE_INFINITY);const l=o.payload;n.samples.push({data:l,len:l.byteLength,dts:c,pts:c,type:hf.emsg,duration:u})}else if(this.config.enableEmsgKLVMetadata&&o.schemeIdUri.startsWith("urn:misb:KLV:bin:1910.1")){const c=KK(o,r);n.samples.push({data:o.payload,len:o.payload.byteLength,dts:c,pts:c,type:hf.misbklv,duration:Number.POSITIVE_INFINITY})}})}return n}demuxSampleAes(e,r,n){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){this.config=null,this.remainderData=null,this.videoTrack=this.audioTrack=this.id3Track=this.txtTrack=void 0}}function KK(t,e){return qn(t.presentationTime)?t.presentationTime/t.timeScale:e+t.presentationTimeDelta/t.timeScale}class $$e{constructor(e,r,n){this.keyData=void 0,this.decrypter=void 0,this.keyData=n,this.decrypter=new gF(r,{removePKCS7Padding:!1})}decryptBuffer(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer,M0.cbc)}decryptAacSample(e,r,n){const i=e[r].unit;if(i.length<=16)return;const s=i.subarray(16,i.length-i.length%16),o=s.buffer.slice(s.byteOffset,s.byteOffset+s.length);this.decryptBuffer(o).then(c=>{const u=new Uint8Array(c);i.set(u,16),this.decrypter.isSync()||this.decryptAacSamples(e,r+1,n)}).catch(n)}decryptAacSamples(e,r,n){for(;;r++){if(r>=e.length){n();return}if(!(e[r].unit.length<32)&&(this.decryptAacSample(e,r,n),!this.decrypter.isSync()))return}}getAvcEncryptedData(e){const r=Math.floor((e.length-48)/160)*16+16,n=new Int8Array(r);let i=0;for(let s=32;s<e.length-16;s+=160,i+=16)n.set(e.subarray(s,s+16),i);return n}getAvcDecryptedUnit(e,r){const n=new Uint8Array(r);let i=0;for(let s=32;s<e.length-16;s+=160,i+=16)e.set(n.subarray(i,i+16),s);return e}decryptAvcSample(e,r,n,i,s){const o=rie(s.data),c=this.getAvcEncryptedData(o);this.decryptBuffer(c.buffer).then(u=>{s.data=this.getAvcDecryptedUnit(o,u),this.decrypter.isSync()||this.decryptAvcSamples(e,r,n+1,i)}).catch(i)}decryptAvcSamples(e,r,n,i){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;r++,n=0){if(r>=e.length){i();return}const s=e[r].units;for(;!(n>=s.length);n++){const o=s[n];if(!(o.data.length<=48||o.type!==1&&o.type!==5)&&(this.decryptAvcSample(e,r,n,i,o),!this.decrypter.isSync()))return}}}}class Vie{constructor(){this.VideoSample=null}createVideoSample(e,r,n){return{key:e,frame:!1,pts:r,dts:n,units:[],length:0}}getLastNalUnit(e){var r;let n=this.VideoSample,i;if((!n||n.units.length===0)&&(n=e[e.length-1]),(r=n)!=null&&r.units){const s=n.units;i=s[s.length-1]}return i}pushAccessUnit(e,r){if(e.units.length&&e.frame){if(e.pts===void 0){const n=r.samples,i=n.length;if(i){const s=n[i-1];e.pts=s.pts,e.dts=s.dts}else{r.dropped++;return}}r.samples.push(e)}}parseNALu(e,r,n){const i=r.byteLength;let s=e.naluState||0;const o=s,c=[];let u=0,l,d,f,A=-1,p=0;for(s===-1&&(A=0,p=this.getNALuType(r,0),s=0,u=1);u<i;){if(l=r[u++],!s){s=l?0:1;continue}if(s===1){s=l?0:2;continue}if(!l)s=3;else if(l===1){if(d=u-s-1,A>=0){const g={data:r.subarray(A,d),type:p};c.push(g)}else{const g=this.getLastNalUnit(e.samples);g&&(o&&u<=4-o&&g.state&&(g.data=g.data.subarray(0,g.data.byteLength-o)),d>0&&(g.data=Jf(g.data,r.subarray(0,d)),g.state=0))}u<i?(f=this.getNALuType(r,u),A=u,p=f,s=0):s=-1}else s=0}if(A>=0&&s>=0){const g={data:r.subarray(A,i),type:p,state:s};c.push(g)}if(c.length===0){const g=this.getLastNalUnit(e.samples);g&&(g.data=Jf(g.data,r))}return e.naluState=s,c}}class aE{constructor(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){const e=this.data,r=this.bytesAvailable,n=e.byteLength-r,i=new Uint8Array(4),s=Math.min(4,r);if(s===0)throw new Error("no bytes available");i.set(e.subarray(n,n+s)),this.word=new DataView(i.buffer).getUint32(0),this.bitsAvailable=s*8,this.bytesAvailable-=s}skipBits(e){let r;e=Math.min(e,this.bytesAvailable*8+this.bitsAvailable),this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,r=e>>3,e-=r<<3,this.bytesAvailable-=r,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}readBits(e){let r=Math.min(this.bitsAvailable,e);const n=this.word>>>32-r;if(e>32&&Ho.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=r,this.bitsAvailable>0)this.word<<=r;else if(this.bytesAvailable>0)this.loadWord();else throw new Error("no bits available");return r=e-r,r>0&&this.bitsAvailable?n<<r|this.readBits(r):n}skipLZ(){let e;for(e=0;e<this.bitsAvailable;++e)if((this.word&2147483648>>>e)!==0)return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){const e=this.skipLZ();return this.readBits(e+1)-1}readEG(){const e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}readBoolean(){return this.readBits(1)===1}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}}class H$e extends Vie{parsePES(e,r,n,i){const s=this.parseNALu(e,n.data,i);let o=this.VideoSample,c,u=!1;n.data=null,o&&s.length&&!e.audFound&&(this.pushAccessUnit(o,e),o=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts)),s.forEach(l=>{var d,f;switch(l.type){case 1:{let y=!1;c=!0;const x=l.data;if(u&&x.length>4){const w=this.readSliceType(x);(w===2||w===4||w===7||w===9)&&(y=!0)}if(y){var A;(A=o)!=null&&A.frame&&!o.key&&(this.pushAccessUnit(o,e),o=this.VideoSample=null)}o||(o=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),o.frame=!0,o.key=y;break}case 5:c=!0,(d=o)!=null&&d.frame&&!o.key&&(this.pushAccessUnit(o,e),o=this.VideoSample=null),o||(o=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),o.key=!0,o.frame=!0;break;case 6:{c=!0,fF(l.data,1,n.pts,r.samples);break}case 7:{var p,g;c=!0,u=!0;const y=l.data,x=this.readSPS(y);if(!e.sps||e.width!==x.width||e.height!==x.height||((p=e.pixelRatio)==null?void 0:p[0])!==x.pixelRatio[0]||((g=e.pixelRatio)==null?void 0:g[1])!==x.pixelRatio[1]){e.width=x.width,e.height=x.height,e.pixelRatio=x.pixelRatio,e.sps=[y];const w=y.subarray(1,4);let E="avc1.";for(let T=0;T<3;T++){let C=w[T].toString(16);C.length<2&&(C="0"+C),E+=C}e.codec=E}break}case 8:c=!0,e.pps=[l.data];break;case 9:c=!0,e.audFound=!0,(f=o)!=null&&f.frame&&(this.pushAccessUnit(o,e),o=null),o||(o=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts));break;case 12:c=!0;break;default:c=!1;break}o&&c&&o.units.push(l)}),i&&o&&(this.pushAccessUnit(o,e),this.VideoSample=null)}getNALuType(e,r){return e[r]&31}readSliceType(e){const r=new aE(e);return r.readUByte(),r.readUEG(),r.readUEG()}skipScalingList(e,r){let n=8,i=8,s;for(let o=0;o<e;o++)i!==0&&(s=r.readEG(),i=(n+s+256)%256),n=i===0?n:i}readSPS(e){const r=new aE(e);let n=0,i=0,s=0,o=0,c,u,l;const d=r.readUByte.bind(r),f=r.readBits.bind(r),A=r.readUEG.bind(r),p=r.readBoolean.bind(r),g=r.skipBits.bind(r),y=r.skipEG.bind(r),x=r.skipUEG.bind(r),w=this.skipScalingList.bind(this);d();const E=d();if(f(5),g(3),d(),x(),E===100||E===110||E===122||E===244||E===44||E===83||E===86||E===118||E===128){const K=A();if(K===3&&g(1),x(),x(),g(1),p())for(u=K!==3?8:12,l=0;l<u;l++)p()&&(l<6?w(16,r):w(64,r))}x();const T=A();if(T===0)A();else if(T===1)for(g(1),y(),y(),c=A(),l=0;l<c;l++)y();x(),g(1);const C=A(),N=A(),I=f(1);I===0&&g(1),g(1),p()&&(n=A(),i=A(),s=A(),o=A());let U=[1,1];if(p()&&p())switch(d()){case 1:U=[1,1];break;case 2:U=[12,11];break;case 3:U=[10,11];break;case 4:U=[16,11];break;case 5:U=[40,33];break;case 6:U=[24,11];break;case 7:U=[20,11];break;case 8:U=[32,11];break;case 9:U=[80,33];break;case 10:U=[18,11];break;case 11:U=[15,11];break;case 12:U=[64,33];break;case 13:U=[160,99];break;case 14:U=[4,3];break;case 15:U=[3,2];break;case 16:U=[2,1];break;case 255:{U=[d()<<8|d(),d()<<8|d()];break}}return{width:Math.ceil((C+1)*16-n*2-i*2),height:(2-I)*(N+1)*16-(I?2:4)*(s+o),pixelRatio:U}}}class Q$e extends Vie{constructor(...e){super(...e),this.initVPS=null}parsePES(e,r,n,i){const s=this.parseNALu(e,n.data,i);let o=this.VideoSample,c,u=!1;n.data=null,o&&s.length&&!e.audFound&&(this.pushAccessUnit(o,e),o=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts)),s.forEach(l=>{var d,f;switch(l.type){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:o||(o=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts)),o.frame=!0,c=!0;break;case 16:case 17:case 18:case 21:if(c=!0,u){var A;(A=o)!=null&&A.frame&&!o.key&&(this.pushAccessUnit(o,e),o=this.VideoSample=null)}o||(o=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),o.key=!0,o.frame=!0;break;case 19:case 20:c=!0,(d=o)!=null&&d.frame&&!o.key&&(this.pushAccessUnit(o,e),o=this.VideoSample=null),o||(o=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),o.key=!0,o.frame=!0;break;case 39:c=!0,fF(l.data,2,n.pts,r.samples);break;case 32:c=!0,e.vps||(typeof e.params!="object"&&(e.params={}),e.params=nl(e.params,this.readVPS(l.data)),this.initVPS=l.data),e.vps=[l.data];break;case 33:if(c=!0,u=!0,e.vps!==void 0&&e.vps[0]!==this.initVPS&&e.sps!==void 0&&!this.matchSPS(e.sps[0],l.data)&&(this.initVPS=e.vps[0],e.sps=e.pps=void 0),!e.sps){const p=this.readSPS(l.data);e.width=p.width,e.height=p.height,e.pixelRatio=p.pixelRatio,e.codec=p.codecString,e.sps=[],typeof e.params!="object"&&(e.params={});for(const g in p.params)e.params[g]=p.params[g]}this.pushParameterSet(e.sps,l.data,e.vps),o||(o=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),o.key=!0;break;case 34:if(c=!0,typeof e.params=="object"){if(!e.pps){e.pps=[];const p=this.readPPS(l.data);for(const g in p)e.params[g]=p[g]}this.pushParameterSet(e.pps,l.data,e.vps)}break;case 35:c=!0,e.audFound=!0,(f=o)!=null&&f.frame&&(this.pushAccessUnit(o,e),o=null),o||(o=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts));break;default:c=!1;break}o&&c&&o.units.push(l)}),i&&o&&(this.pushAccessUnit(o,e),this.VideoSample=null)}pushParameterSet(e,r,n){(n&&n[0]===this.initVPS||!n&&!e.length)&&e.push(r)}getNALuType(e,r){return(e[r]&126)>>>1}ebsp2rbsp(e){const r=new Uint8Array(e.byteLength);let n=0;for(let i=0;i<e.byteLength;i++)i>=2&&e[i]===3&&e[i-1]===0&&e[i-2]===0||(r[n]=e[i],n++);return new Uint8Array(r.buffer,0,n)}pushAccessUnit(e,r){super.pushAccessUnit(e,r),this.initVPS&&(this.initVPS=null)}readVPS(e){const r=new aE(e);r.readUByte(),r.readUByte(),r.readBits(4),r.skipBits(2),r.readBits(6);const n=r.readBits(3),i=r.readBoolean();return{numTemporalLayers:n+1,temporalIdNested:i}}readSPS(e){const r=new aE(this.ebsp2rbsp(e));r.readUByte(),r.readUByte(),r.readBits(4);const n=r.readBits(3);r.readBoolean();const i=r.readBits(2),s=r.readBoolean(),o=r.readBits(5),c=r.readUByte(),u=r.readUByte(),l=r.readUByte(),d=r.readUByte(),f=r.readUByte(),A=r.readUByte(),p=r.readUByte(),g=r.readUByte(),y=r.readUByte(),x=r.readUByte(),w=r.readUByte(),E=[],T=[];for(let _t=0;_t<n;_t++)E.push(r.readBoolean()),T.push(r.readBoolean());if(n>0)for(let _t=n;_t<8;_t++)r.readBits(2);for(let _t=0;_t<n;_t++)E[_t]&&(r.readUByte(),r.readUByte(),r.readUByte(),r.readUByte(),r.readUByte(),r.readUByte(),r.readUByte(),r.readUByte(),r.readUByte(),r.readUByte(),r.readUByte()),T[_t]&&r.readUByte();r.readUEG();const C=r.readUEG();C==3&&r.skipBits(1);const N=r.readUEG(),I=r.readUEG(),U=r.readBoolean();let K=0,Y=0,re=0,se=0;U&&(K+=r.readUEG(),Y+=r.readUEG(),re+=r.readUEG(),se+=r.readUEG());const Ae=r.readUEG(),we=r.readUEG(),Ce=r.readUEG(),ve=r.readBoolean();for(let _t=ve?0:n;_t<=n;_t++)r.skipUEG(),r.skipUEG(),r.skipUEG();if(r.skipUEG(),r.skipUEG(),r.skipUEG(),r.skipUEG(),r.skipUEG(),r.skipUEG(),r.readBoolean()&&r.readBoolean())for(let wt=0;wt<4;wt++)for(let Tt=0;Tt<(wt===3?2:6);Tt++)if(!r.readBoolean())r.readUEG();else{const pr=Math.min(64,1<<4+(wt<<1));wt>1&&r.readEG();for(let Xr=0;Xr<pr;Xr++)r.readEG()}r.readBoolean(),r.readBoolean(),r.readBoolean()&&(r.readUByte(),r.skipUEG(),r.skipUEG(),r.readBoolean());const ae=r.readUEG();let De=0;for(let _t=0;_t<ae;_t++){let wt=!1;if(_t!==0&&(wt=r.readBoolean()),wt){_t===ae&&r.readUEG(),r.readBoolean(),r.readUEG();let Tt=0;for(let Er=0;Er<=De;Er++){const pr=r.readBoolean();let Xr=!1;pr||(Xr=r.readBoolean()),(pr||Xr)&&Tt++}De=Tt}else{const Tt=r.readUEG(),Er=r.readUEG();De=Tt+Er;for(let pr=0;pr<Tt;pr++)r.readUEG(),r.readBoolean();for(let pr=0;pr<Er;pr++)r.readUEG(),r.readBoolean()}}if(r.readBoolean()){const _t=r.readUEG();for(let wt=0;wt<_t;wt++){for(let Tt=0;Tt<Ce+4;Tt++)r.readBits(1);r.readBits(1)}}let be=0,de=1,xe=1,je=!0,Me=1,Re=0;r.readBoolean(),r.readBoolean();let it=!1;if(r.readBoolean()){if(r.readBoolean()){const yn=r.readUByte(),Mn=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],dn=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];yn>0&&yn<16?(de=Mn[yn-1],xe=dn[yn-1]):yn===255&&(de=r.readBits(16),xe=r.readBits(16))}if(r.readBoolean()&&r.readBoolean(),r.readBoolean()&&(r.readBits(3),r.readBoolean(),r.readBoolean()&&(r.readUByte(),r.readUByte(),r.readUByte())),r.readBoolean()&&(r.readUEG(),r.readUEG()),r.readBoolean(),r.readBoolean(),r.readBoolean(),it=r.readBoolean(),it&&(r.skipUEG(),r.skipUEG(),r.skipUEG(),r.skipUEG()),r.readBoolean()&&(Me=r.readBits(32),Re=r.readBits(32),r.readBoolean()&&r.readUEG(),r.readBoolean())){const dn=r.readBoolean(),pn=r.readBoolean();let mn=!1;(dn||pn)&&(mn=r.readBoolean(),mn&&(r.readUByte(),r.readBits(5),r.readBoolean(),r.readBits(5)),r.readBits(4),r.readBits(4),mn&&r.readBits(4),r.readBits(5),r.readBits(5),r.readBits(5));for(let Kn=0;Kn<=n;Kn++){je=r.readBoolean();const Zn=je||r.readBoolean();let Li=!1;Zn?r.readEG():Li=r.readBoolean();const ot=Li?1:r.readUEG()+1;if(dn)for(let Yt=0;Yt<ot;Yt++)r.readUEG(),r.readUEG(),mn&&(r.readUEG(),r.readUEG()),r.skipBits(1);if(pn)for(let Yt=0;Yt<ot;Yt++)r.readUEG(),r.readUEG(),mn&&(r.readUEG(),r.readUEG()),r.skipBits(1)}}r.readBoolean()&&(r.readBoolean(),r.readBoolean(),r.readBoolean(),be=r.readUEG())}let Be=N,nt=I;if(U){let _t=1,wt=1;C===1?_t=wt=2:C==2&&(_t=2),Be=N-_t*Y-_t*K,nt=I-wt*se-wt*re}const Ge=i?["A","B","C"][i]:"",ft=c<<24|u<<16|l<<8|d;let Dt=0;for(let _t=0;_t<32;_t++)Dt=(Dt|(ft>>_t&1)<<31-_t)>>>0;let rt=Dt.toString(16);return o===1&&rt==="2"&&(rt="6"),{codecString:`hvc1.${Ge}${o}.${rt}.${s?"H":"L"}${w}.B0`,params:{general_tier_flag:s,general_profile_idc:o,general_profile_space:i,general_profile_compatibility_flags:[c,u,l,d],general_constraint_indicator_flags:[f,A,p,g,y,x],general_level_idc:w,bit_depth:Ae+8,bit_depth_luma_minus8:Ae,bit_depth_chroma_minus8:we,min_spatial_segmentation_idc:be,chroma_format_idc:C,frame_rate:{fixed:je,fps:Re/Me}},width:Be,height:nt,pixelRatio:[de,xe]}}readPPS(e){const r=new aE(this.ebsp2rbsp(e));r.readUByte(),r.readUByte(),r.skipUEG(),r.skipUEG(),r.skipBits(2),r.skipBits(3),r.skipBits(2),r.skipUEG(),r.skipUEG(),r.skipEG(),r.skipBits(2),r.readBoolean()&&r.skipUEG(),r.skipEG(),r.skipEG(),r.skipBits(4);const i=r.readBoolean(),s=r.readBoolean();let o=1;return s&&i?o=0:s?o=3:i&&(o=2),{parallelismType:o}}matchSPS(e,r){return String.fromCharCode.apply(null,e).substr(3)===String.fromCharCode.apply(null,r).substr(3)}}const sd=188;class d0{constructor(e,r,n,i){this.logger=void 0,this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._pmtId=-1,this._videoTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.remainderData=null,this.videoParser=void 0,this.observer=e,this.config=r,this.typeSupported=n,this.logger=i,this.videoParser=null}static probe(e,r){const n=d0.syncOffset(e);return n>0&&r.warn(`MPEG2-TS detected but first sync word found @ offset ${n}`),n!==-1}static syncOffset(e){const r=e.length;let n=Math.min(sd*5,r-sd)+1,i=0;for(;i<n;){let s=!1,o=-1,c=0;for(let u=i;u<r;u+=sd)if(e[u]===71&&(r-u===sd||e[u+sd]===71)){if(c++,o===-1&&(o=u,o!==0&&(n=Math.min(o+sd*99,e.length-sd)+1)),s||(s=fO(e,u)===0),s&&c>1&&(o===0&&c>2||u+sd>n))return o}else{if(c)return-1;break}i++}return-1}static createTrack(e,r){return{container:e==="video"||e==="audio"?"video/mp2t":void 0,type:e,id:qne[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:e==="audio"?r:void 0}}resetInitSegment(e,r,n,i){this.pmtParsed=!1,this._pmtId=-1,this._videoTrack=d0.createTrack("video"),this._videoTrack.duration=i,this._audioTrack=d0.createTrack("audio",i),this._id3Track=d0.createTrack("id3"),this._txtTrack=d0.createTrack("text"),this._audioTrack.segmentCodec="aac",this.videoParser=null,this.aacOverFlow=null,this.remainderData=null,this.audioCodec=r,this.videoCodec=n}resetTimeStamp(){}resetContiguity(){const{_audioTrack:e,_videoTrack:r,_id3Track:n}=this;e&&(e.pesData=null),r&&(r.pesData=null),n&&(n.pesData=null),this.aacOverFlow=null,this.remainderData=null}demux(e,r,n=!1,i=!1){n||(this.sampleAes=null);let s;const o=this._videoTrack,c=this._audioTrack,u=this._id3Track,l=this._txtTrack;let d=o.pid,f=o.pesData,A=c.pid,p=u.pid,g=c.pesData,y=u.pesData,x=null,w=this.pmtParsed,E=this._pmtId,T=e.length;if(this.remainderData&&(e=Jf(this.remainderData,e),T=e.length,this.remainderData=null),T<sd&&!i)return this.remainderData=e,{audioTrack:c,videoTrack:o,id3Track:u,textTrack:l};const C=Math.max(0,d0.syncOffset(e));T-=(T-C)%sd,T<e.byteLength&&!i&&(this.remainderData=new Uint8Array(e.buffer,T,e.buffer.byteLength-T));let N=0;for(let U=C;U<T;U+=sd)if(e[U]===71){const K=!!(e[U+1]&64),Y=fO(e,U),re=(e[U+3]&48)>>4;let se;if(re>1){if(se=U+5+e[U+4],se===U+sd)continue}else se=U+4;switch(Y){case d:K&&(f&&(s=lx(f,this.logger))&&(this.readyVideoParser(o.segmentCodec),this.videoParser!==null&&this.videoParser.parsePES(o,l,s,!1)),f={data:[],size:0}),f&&(f.data.push(e.subarray(se,U+sd)),f.size+=U+sd-se);break;case A:if(K){if(g&&(s=lx(g,this.logger)))switch(c.segmentCodec){case"aac":this.parseAACPES(c,s);break;case"mp3":this.parseMPEGPES(c,s);break;case"ac3":this.parseAC3PES(c,s);break}g={data:[],size:0}}g&&(g.data.push(e.subarray(se,U+sd)),g.size+=U+sd-se);break;case p:K&&(y&&(s=lx(y,this.logger))&&this.parseID3PES(u,s),y={data:[],size:0}),y&&(y.data.push(e.subarray(se,U+sd)),y.size+=U+sd-se);break;case 0:K&&(se+=e[se]+1),E=this._pmtId=V$e(e,se);break;case E:{K&&(se+=e[se]+1);const Ae=z$e(e,se,this.typeSupported,n,this.observer,this.logger);d=Ae.videoPid,d>0&&(o.pid=d,o.segmentCodec=Ae.segmentVideoCodec),A=Ae.audioPid,A>0&&(c.pid=A,c.segmentCodec=Ae.segmentAudioCodec),p=Ae.id3Pid,p>0&&(u.pid=p),x!==null&&!w&&(this.logger.warn(`MPEG-TS PMT found at ${U} after unknown PID '${x}'. Backtracking to sync byte @${C} to parse all TS packets.`),x=null,U=C-188),w=this.pmtParsed=!0;break}case 17:case 8191:break;default:x=Y;break}}else N++;N>0&&AO(this.observer,new Error(`Found ${N} TS packet/s that do not start with 0x47`),void 0,this.logger),o.pesData=f,c.pesData=g,u.pesData=y;const I={audioTrack:c,videoTrack:o,id3Track:u,textTrack:l};return i&&this.extractRemainingSamples(I),I}flush(){const{remainderData:e}=this;this.remainderData=null;let r;return e?r=this.demux(e,-1,!1,!0):r={videoTrack:this._videoTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(r),this.sampleAes?this.decrypt(r,this.sampleAes):r}extractRemainingSamples(e){const{audioTrack:r,videoTrack:n,id3Track:i,textTrack:s}=e,o=n.pesData,c=r.pesData,u=i.pesData;let l;if(o&&(l=lx(o,this.logger))?(this.readyVideoParser(n.segmentCodec),this.videoParser!==null&&(this.videoParser.parsePES(n,s,l,!0),n.pesData=null)):n.pesData=o,c&&(l=lx(c,this.logger))){switch(r.segmentCodec){case"aac":this.parseAACPES(r,l);break;case"mp3":this.parseMPEGPES(r,l);break;case"ac3":this.parseAC3PES(r,l);break}r.pesData=null}else c!=null&&c.size&&this.logger.log("last AAC PES packet truncated,might overlap between fragments"),r.pesData=c;u&&(l=lx(u,this.logger))?(this.parseID3PES(i,l),i.pesData=null):i.pesData=u}demuxSampleAes(e,r,n){const i=this.demux(e,n,!0,!this.config.progressive),s=this.sampleAes=new $$e(this.observer,this.config,r);return this.decrypt(i,s)}readyVideoParser(e){this.videoParser===null&&(e==="avc"?this.videoParser=new H$e:e==="hevc"&&(this.videoParser=new Q$e))}decrypt(e,r){return new Promise(n=>{const{audioTrack:i,videoTrack:s}=e;i.samples&&i.segmentCodec==="aac"?r.decryptAacSamples(i.samples,0,()=>{s.samples?r.decryptAvcSamples(s.samples,0,0,()=>{n(e)}):n(e)}):s.samples&&r.decryptAvcSamples(s.samples,0,0,()=>{n(e)})})}destroy(){this.observer&&this.observer.removeAllListeners(),this.config=this.logger=this.observer=null,this.aacOverFlow=this.videoParser=this.remainderData=this.sampleAes=null,this._videoTrack=this._audioTrack=this._id3Track=this._txtTrack=void 0}parseAACPES(e,r){let n=0;const i=this.aacOverFlow;let s=r.data;if(i){this.aacOverFlow=null;const f=i.missing,A=i.sample.unit.byteLength;if(f===-1)s=Jf(i.sample.unit,s);else{const p=A-f;i.sample.unit.set(s.subarray(0,f),p),e.samples.push(i.sample),n=i.missing}}let o,c;for(o=n,c=s.length;o<c-1&&!Jj(s,o);o++);if(o!==n){let f;const A=o<c-1;if(A?f=`AAC PES did not start with ADTS header,offset:${o}`:f="No ADTS header found in AAC PES",AO(this.observer,new Error(f),A,this.logger),!A)return}Bie(e,this.observer,s,o,this.audioCodec);let u;if(r.pts!==void 0)u=r.pts;else if(i){const f=Pie(e.samplerate);u=i.sample.pts+f}else{this.logger.warn("[tsdemuxer]: AAC PES unknown PTS");return}let l=0,d;for(;o<c;)if(d=Oie(e,s,o,u,l),o+=d.length,d.missing){this.aacOverFlow=d;break}else for(l++;o<c-1&&!Jj(s,o);o++);}parseMPEGPES(e,r){const n=r.data,i=n.length;let s=0,o=0;const c=r.pts;if(c===void 0){this.logger.warn("[tsdemuxer]: MPEG PES unknown PTS");return}for(;o<i;)if(Uie(n,o)){const u=Mie(e,n,o,c,s);if(u)o+=u.length,s++;else break}else o++}parseAC3PES(e,r){{const n=r.data,i=r.pts;if(i===void 0){this.logger.warn("[tsdemuxer]: AC3 PES unknown PTS");return}const s=n.length;let o=0,c=0,u;for(;c<s&&(u=Qie(e,n,c,i,o++))>0;)c+=u}}parseID3PES(e,r){if(r.pts===void 0){this.logger.warn("[tsdemuxer]: ID3 PES unknown PTS");return}const n=nl({},r,{type:this._videoTrack?hf.emsg:hf.audioId3,duration:Number.POSITIVE_INFINITY});e.samples.push(n)}}function fO(t,e){return((t[e+1]&31)<<8)+t[e+2]}function V$e(t,e){return(t[e+10]&31)<<8|t[e+11]}function z$e(t,e,r,n,i,s){const o={audioPid:-1,videoPid:-1,id3Pid:-1,segmentVideoCodec:"avc",segmentAudioCodec:"aac"},c=(t[e+1]&15)<<8|t[e+2],u=e+3+c-4,l=(t[e+10]&15)<<8|t[e+11];for(e+=12+l;e<u;){const d=fO(t,e),f=(t[e+3]&15)<<8|t[e+4];switch(t[e]){case 207:if(!n){S4("ADTS AAC",s);break}case 15:o.audioPid===-1&&(o.audioPid=d);break;case 21:o.id3Pid===-1&&(o.id3Pid=d);break;case 219:if(!n){S4("H.264",s);break}case 27:o.videoPid===-1&&(o.videoPid=d);break;case 3:case 4:!r.mpeg&&!r.mp3?s.log("MPEG audio found, not supported in this browser"):o.audioPid===-1&&(o.audioPid=d,o.segmentAudioCodec="mp3");break;case 193:if(!n){S4("AC-3",s);break}case 129:r.ac3?o.audioPid===-1&&(o.audioPid=d,o.segmentAudioCodec="ac3"):s.log("AC-3 audio found, not supported in this browser");break;case 6:if(o.audioPid===-1&&f>0){let A=e+5,p=f;for(;p>2;){t[A]===106&&(r.ac3!==!0?s.log("AC-3 audio found, not supported in this browser for now"):(o.audioPid=d,o.segmentAudioCodec="ac3"));const y=t[A+1]+2;A+=y,p-=y}}break;case 194:case 135:return AO(i,new Error("Unsupported EC-3 in M2TS found"),void 0,s),o;case 36:o.videoPid===-1&&(o.videoPid=d,o.segmentVideoCodec="hevc",s.log("HEVC in M2TS found"));break}e+=f+5}return o}function AO(t,e,r,n){n.warn(`parsing error: ${e.message}`),t.emit(Le.ERROR,Le.ERROR,{type:Oi.MEDIA_ERROR,details:vr.FRAG_PARSING_ERROR,fatal:!1,levelRetry:r,error:e,reason:e.message})}function S4(t,e){e.log(`${t} with AES-128-CBC encryption found in unencrypted stream`)}function lx(t,e){let r=0,n,i,s,o,c;const u=t.data;if(!t||t.size===0)return null;for(;u[0].length<19&&u.length>1;)u[0]=Jf(u[0],u[1]),u.splice(1,1);if(n=u[0],(n[0]<<16)+(n[1]<<8)+n[2]===1){if(i=(n[4]<<8)+n[5],i&&i>t.size-6)return null;const d=n[7];d&192&&(o=(n[9]&14)*536870912+(n[10]&255)*4194304+(n[11]&254)*16384+(n[12]&255)*128+(n[13]&254)/2,d&64?(c=(n[14]&14)*536870912+(n[15]&255)*4194304+(n[16]&254)*16384+(n[17]&255)*128+(n[18]&254)/2,o-c>60*9e4&&(e.warn(`${Math.round((o-c)/9e4)}s delta between PTS and DTS, align them`),o=c)):c=o),s=n[8];let f=s+9;if(t.size<=f)return null;t.size-=f;const A=new Uint8Array(t.size);for(let p=0,g=u.length;p<g;p++){n=u[p];let y=n.byteLength;if(f)if(f>y){f-=y;continue}else n=n.subarray(f),y-=f,f=0;A.set(n,r),r+=y}return i&&(i-=s+3),{data:A,pts:o,dts:c,len:i}}return null}class K$e{static getSilentFrame(e,r){switch(e){case"mp4a.40.2":if(r===1)return new Uint8Array([0,200,0,128,35,128]);if(r===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(r===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(r===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(r===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(r===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(r===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(r===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(r===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}}}const Vg=Math.pow(2,32)-1;class hr{static init(){hr.types={avc1:[],avcC:[],hvc1:[],hvcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],dac3:[],"ac-3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};let e;for(e in hr.types)hr.types.hasOwnProperty(e)&&(hr.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);const r=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);hr.HDLR_TYPES={video:r,audio:n};const i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),s=new Uint8Array([0,0,0,0,0,0,0,0]);hr.STTS=hr.STSC=hr.STCO=s,hr.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),hr.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),hr.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),hr.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const o=new Uint8Array([105,115,111,109]),c=new Uint8Array([97,118,99,49]),u=new Uint8Array([0,0,0,1]);hr.FTYP=hr.box(hr.types.ftyp,o,u,o,c),hr.DINF=hr.box(hr.types.dinf,hr.box(hr.types.dref,i))}static box(e,...r){let n=8,i=r.length;const s=i;for(;i--;)n+=r[i].byteLength;const o=new Uint8Array(n);for(o[0]=n>>24&255,o[1]=n>>16&255,o[2]=n>>8&255,o[3]=n&255,o.set(e,4),i=0,n=8;i<s;i++)o.set(r[i],n),n+=r[i].byteLength;return o}static hdlr(e){return hr.box(hr.types.hdlr,hr.HDLR_TYPES[e])}static mdat(e){return hr.box(hr.types.mdat,e)}static mdhd(e,r){r*=e;const n=Math.floor(r/(Vg+1)),i=Math.floor(r%(Vg+1));return hr.box(hr.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,n>>24,n>>16&255,n>>8&255,n&255,i>>24,i>>16&255,i>>8&255,i&255,85,196,0,0]))}static mdia(e){return hr.box(hr.types.mdia,hr.mdhd(e.timescale||0,e.duration||0),hr.hdlr(e.type),hr.minf(e))}static mfhd(e){return hr.box(hr.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,e&255]))}static minf(e){return e.type==="audio"?hr.box(hr.types.minf,hr.box(hr.types.smhd,hr.SMHD),hr.DINF,hr.stbl(e)):hr.box(hr.types.minf,hr.box(hr.types.vmhd,hr.VMHD),hr.DINF,hr.stbl(e))}static moof(e,r,n){return hr.box(hr.types.moof,hr.mfhd(e),hr.traf(n,r))}static moov(e){let r=e.length;const n=[];for(;r--;)n[r]=hr.trak(e[r]);return hr.box.apply(null,[hr.types.moov,hr.mvhd(e[0].timescale||0,e[0].duration||0)].concat(n).concat(hr.mvex(e)))}static mvex(e){let r=e.length;const n=[];for(;r--;)n[r]=hr.trex(e[r]);return hr.box.apply(null,[hr.types.mvex,...n])}static mvhd(e,r){r*=e;const n=Math.floor(r/(Vg+1)),i=Math.floor(r%(Vg+1)),s=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,n>>24,n>>16&255,n>>8&255,n&255,i>>24,i>>16&255,i>>8&255,i&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return hr.box(hr.types.mvhd,s)}static sdtp(e){const r=e.samples||[],n=new Uint8Array(4+r.length);let i,s;for(i=0;i<r.length;i++)s=r[i].flags,n[i+4]=s.dependsOn<<4|s.isDependedOn<<2|s.hasRedundancy;return hr.box(hr.types.sdtp,n)}static stbl(e){return hr.box(hr.types.stbl,hr.stsd(e),hr.box(hr.types.stts,hr.STTS),hr.box(hr.types.stsc,hr.STSC),hr.box(hr.types.stsz,hr.STSZ),hr.box(hr.types.stco,hr.STCO))}static avc1(e){let r=[],n=[],i,s,o;for(i=0;i<e.sps.length;i++)s=e.sps[i],o=s.byteLength,r.push(o>>>8&255),r.push(o&255),r=r.concat(Array.prototype.slice.call(s));for(i=0;i<e.pps.length;i++)s=e.pps[i],o=s.byteLength,n.push(o>>>8&255),n.push(o&255),n=n.concat(Array.prototype.slice.call(s));const c=hr.box(hr.types.avcC,new Uint8Array([1,r[3],r[4],r[5],255,224|e.sps.length].concat(r).concat([e.pps.length]).concat(n))),u=e.width,l=e.height,d=e.pixelRatio[0],f=e.pixelRatio[1];return hr.box(hr.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,u>>8&255,u&255,l>>8&255,l&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),c,hr.box(hr.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),hr.box(hr.types.pasp,new Uint8Array([d>>24,d>>16&255,d>>8&255,d&255,f>>24,f>>16&255,f>>8&255,f&255])))}static esds(e){const r=e.config;return new Uint8Array([0,0,0,0,3,25,0,1,0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,...r,6,1,2])}static audioStsd(e){const r=e.samplerate||0;return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount||0,0,16,0,0,0,0,r>>8&255,r&255,0,0])}static mp4a(e){return hr.box(hr.types.mp4a,hr.audioStsd(e),hr.box(hr.types.esds,hr.esds(e)))}static mp3(e){return hr.box(hr.types[".mp3"],hr.audioStsd(e))}static ac3(e){return hr.box(hr.types["ac-3"],hr.audioStsd(e),hr.box(hr.types.dac3,e.config))}static stsd(e){const{segmentCodec:r}=e;if(e.type==="audio"){if(r==="aac")return hr.box(hr.types.stsd,hr.STSD,hr.mp4a(e));if(r==="ac3"&&e.config)return hr.box(hr.types.stsd,hr.STSD,hr.ac3(e));if(r==="mp3"&&e.codec==="mp3")return hr.box(hr.types.stsd,hr.STSD,hr.mp3(e))}else if(e.pps&&e.sps){if(r==="avc")return hr.box(hr.types.stsd,hr.STSD,hr.avc1(e));if(r==="hevc"&&e.vps)return hr.box(hr.types.stsd,hr.STSD,hr.hvc1(e))}else throw new Error("video track missing pps or sps");throw new Error(`unsupported ${e.type} segment codec (${r}/${e.codec})`)}static tkhd(e){const r=e.id,n=(e.duration||0)*(e.timescale||0),i=e.width||0,s=e.height||0,o=Math.floor(n/(Vg+1)),c=Math.floor(n%(Vg+1));return hr.box(hr.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,r>>24&255,r>>16&255,r>>8&255,r&255,0,0,0,0,o>>24,o>>16&255,o>>8&255,o&255,c>>24,c>>16&255,c>>8&255,c&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,i>>8&255,i&255,0,0,s>>8&255,s&255,0,0]))}static traf(e,r){const n=hr.sdtp(e),i=e.id,s=Math.floor(r/(Vg+1)),o=Math.floor(r%(Vg+1));return hr.box(hr.types.traf,hr.box(hr.types.tfhd,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,i&255])),hr.box(hr.types.tfdt,new Uint8Array([1,0,0,0,s>>24,s>>16&255,s>>8&255,s&255,o>>24,o>>16&255,o>>8&255,o&255])),hr.trun(e,n.length+16+20+8+16+8+8),n)}static trak(e){return e.duration=e.duration||4294967295,hr.box(hr.types.trak,hr.tkhd(e),hr.mdia(e))}static trex(e){const r=e.id;return hr.box(hr.types.trex,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,r&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(e,r){const n=e.samples||[],i=n.length,s=12+16*i,o=new Uint8Array(s);let c,u,l,d,f,A;for(r+=8+s,o.set([e.type==="video"?1:0,0,15,1,i>>>24&255,i>>>16&255,i>>>8&255,i&255,r>>>24&255,r>>>16&255,r>>>8&255,r&255],0),c=0;c<i;c++)u=n[c],l=u.duration,d=u.size,f=u.flags,A=u.cts,o.set([l>>>24&255,l>>>16&255,l>>>8&255,l&255,d>>>24&255,d>>>16&255,d>>>8&255,d&255,f.isLeading<<2|f.dependsOn,f.isDependedOn<<6|f.hasRedundancy<<4|f.paddingValue<<1|f.isNonSync,f.degradPrio&61440,f.degradPrio&15,A>>>24&255,A>>>16&255,A>>>8&255,A&255],12+16*c);return hr.box(hr.types.trun,o)}static initSegment(e){hr.types||hr.init();const r=hr.moov(e);return Jf(hr.FTYP,r)}static hvc1(e){const r=e.params,n=[e.vps,e.sps,e.pps],i=4,s=new Uint8Array([1,r.general_profile_space<<6|(r.general_tier_flag?32:0)|r.general_profile_idc,r.general_profile_compatibility_flags[0],r.general_profile_compatibility_flags[1],r.general_profile_compatibility_flags[2],r.general_profile_compatibility_flags[3],r.general_constraint_indicator_flags[0],r.general_constraint_indicator_flags[1],r.general_constraint_indicator_flags[2],r.general_constraint_indicator_flags[3],r.general_constraint_indicator_flags[4],r.general_constraint_indicator_flags[5],r.general_level_idc,240|r.min_spatial_segmentation_idc>>8,255&r.min_spatial_segmentation_idc,252|r.parallelismType,252|r.chroma_format_idc,248|r.bit_depth_luma_minus8,248|r.bit_depth_chroma_minus8,0,parseInt(r.frame_rate.fps),i-1|r.temporal_id_nested<<2|r.num_temporal_layers<<3|(r.frame_rate.fixed?64:0),n.length]);let o=s.length;for(let g=0;g<n.length;g+=1){o+=3;for(let y=0;y<n[g].length;y+=1)o+=2+n[g][y].length}const c=new Uint8Array(o);c.set(s,0),o=s.length;const u=n.length-1;for(let g=0;g<n.length;g+=1){c.set(new Uint8Array([32+g|(g===u?128:0),0,n[g].length]),o),o+=3;for(let y=0;y<n[g].length;y+=1)c.set(new Uint8Array([n[g][y].length>>8,n[g][y].length&255]),o),o+=2,c.set(n[g][y],o),o+=n[g][y].length}const l=hr.box(hr.types.hvcC,c),d=e.width,f=e.height,A=e.pixelRatio[0],p=e.pixelRatio[1];return hr.box(hr.types.hvc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,d>>8&255,d&255,f>>8&255,f&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),l,hr.box(hr.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),hr.box(hr.types.pasp,new Uint8Array([A>>24,A>>16&255,A>>8&255,A&255,p>>24,p>>16&255,p>>8&255,p&255])))}}hr.types=void 0;hr.HDLR_TYPES=void 0;hr.STTS=void 0;hr.STSC=void 0;hr.STCO=void 0;hr.STSZ=void 0;hr.VMHD=void 0;hr.SMHD=void 0;hr.STSD=void 0;hr.FTYP=void 0;hr.DINF=void 0;const zie=9e4;function jF(t,e,r=1,n=!1){const i=t*e*r;return n?Math.round(i):i}function G$e(t,e,r=1,n=!1){return jF(t,e,1/r,n)}function tw(t,e=!1){return jF(t,1e3,1/zie,e)}function W$e(t,e=1){return jF(t,zie,1/e)}function GK(t){const{baseTime:e,timescale:r,trackId:n}=t;return`${e/r} (${e}/${r}) trackId: ${n}`}const Y$e=10*1e3,q$e=1024,X$e=1152,Z$e=1536;let cx=null,T4=null;function WK(t,e,r,n){return{duration:e,size:r,cts:n,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:t?2:1,isNonSync:t?0:1}}}class cT extends iA{constructor(e,r,n,i){if(super("mp4-remuxer",i),this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextVideoTs=null,this.nextAudioTs=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.videoTrackConfig=void 0,this.observer=e,this.config=r,this.typeSupported=n,this.ISGenerated=!1,cx===null){const o=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);cx=o?parseInt(o[1]):0}if(T4===null){const s=navigator.userAgent.match(/Safari\/(\d+)/i);T4=s?parseInt(s[1]):0}}destroy(){this.config=this.videoTrackConfig=this._initPTS=this._initDTS=null}resetTimeStamp(e){const r=this._initPTS;(!r||!e||e.trackId!==r.trackId||e.baseTime!==r.baseTime||e.timescale!==r.timescale)&&this.log(`Reset initPTS: ${r&&GK(r)} > ${e&&GK(e)}`),this._initPTS=this._initDTS=e}resetNextTimestamp(){this.log("reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){this.log("ISGenerated flag reset"),this.ISGenerated=!1,this.videoTrackConfig=void 0}getVideoStartPts(e){let r=!1;const n=e[0].pts,i=e.reduce((s,o)=>{let c=o.pts,u=c-s;return u<-4294967296&&(r=!0,c=cf(c,n),u=c-s),u>0?s:c},n);return r&&this.debug("PTS rollover detected"),i}remux(e,r,n,i,s,o,c,u){let l,d,f,A,p,g,y=s,x=s;const w=e.pid>-1,E=r.pid>-1,T=r.samples.length,C=e.samples.length>0,N=c&&T>0||T>1;if((!w||C)&&(!E||N)||this.ISGenerated||c){if(this.ISGenerated){var U,K,Y,re;const Ce=this.videoTrackConfig;(Ce&&(r.width!==Ce.width||r.height!==Ce.height||((U=r.pixelRatio)==null?void 0:U[0])!==((K=Ce.pixelRatio)==null?void 0:K[0])||((Y=r.pixelRatio)==null?void 0:Y[1])!==((re=Ce.pixelRatio)==null?void 0:re[1]))||!Ce&&N||this.nextAudioTs===null&&C)&&this.resetInitSegment()}this.ISGenerated||(f=this.generateIS(e,r,s,o));const se=this.isVideoContiguous;let Ae=-1,we;if(N&&(Ae=J$e(r.samples),!se&&this.config.forceKeyFrameOnDiscontinuity))if(g=!0,Ae>0){this.warn(`Dropped ${Ae} out of ${T} video samples due to a missing keyframe`);const Ce=this.getVideoStartPts(r.samples);r.samples=r.samples.slice(Ae),r.dropped+=Ae,x+=(r.samples[0].pts-Ce)/r.inputTimeScale,we=x}else Ae===-1&&(this.warn(`No keyframe found out of ${T} video samples`),g=!1);if(this.ISGenerated){if(C&&N){const Ce=this.getVideoStartPts(r.samples),ne=(cf(e.samples[0].pts,Ce)-Ce)/r.inputTimeScale;y+=Math.max(0,ne),x+=Math.max(0,-ne)}if(C){if(e.samplerate||(this.warn("regenerate InitSegment as audio detected"),f=this.generateIS(e,r,s,o)),d=this.remuxAudio(e,y,this.isAudioContiguous,o,E||N||u===fi.AUDIO?x:void 0),N){const Ce=d?d.endPTS-d.startPTS:0;r.inputTimeScale||(this.warn("regenerate InitSegment as video detected"),f=this.generateIS(e,r,s,o)),l=this.remuxVideo(r,x,se,Ce)}}else N&&(l=this.remuxVideo(r,x,se,0));l&&(l.firstKeyFrame=Ae,l.independent=Ae!==-1,l.firstKeyFramePTS=we)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(n.samples.length&&(p=Kie(n,s,this._initPTS,this._initDTS)),i.samples.length&&(A=Gie(i,s,this._initPTS))),{audio:d,video:l,initSegment:f,independent:g,text:A,id3:p}}computeInitPts(e,r,n,i){const s=Math.round(n*r);let o=cf(e,s);if(o<s+r)for(this.log(`Adjusting PTS for rollover in timeline near ${(s-o)/r} ${i}`);o<s+r;)o+=8589934592;return o-s}generateIS(e,r,n,i){const s=e.samples,o=r.samples,c=this.typeSupported,u={},l=this._initPTS;let d=!l||i,f="audio/mp4",A,p,g,y=-1;if(d&&(A=p=1/0),e.config&&s.length){switch(e.timescale=e.samplerate,e.segmentCodec){case"mp3":c.mpeg?(f="audio/mpeg",e.codec=""):c.mp3&&(e.codec="mp3");break;case"ac3":e.codec="ac-3";break}u.audio={id:"audio",container:f,codec:e.codec,initSegment:e.segmentCodec==="mp3"&&c.mpeg?new Uint8Array(0):hr.initSegment([e]),metadata:{channelCount:e.channelCount}},d&&(y=e.id,g=e.inputTimeScale,!l||g!==l.timescale?A=p=this.computeInitPts(s[0].pts,g,n,"audio"):d=!1)}if(r.sps&&r.pps&&o.length){if(r.timescale=r.inputTimeScale,u.video={id:"main",container:"video/mp4",codec:r.codec,initSegment:hr.initSegment([r]),metadata:{width:r.width,height:r.height}},d)if(y=r.id,g=r.inputTimeScale,!l||g!==l.timescale){const x=this.getVideoStartPts(o),w=cf(o[0].dts,x),E=this.computeInitPts(w,g,n,"video"),T=this.computeInitPts(x,g,n,"video");p=Math.min(p,E),A=Math.min(A,T)}else d=!1;this.videoTrackConfig={width:r.width,height:r.height,pixelRatio:r.pixelRatio}}if(Object.keys(u).length)return this.ISGenerated=!0,d?(l&&this.warn(`Timestamps at playlist time: ${i?"":"~"}${n} ${A/g} != initPTS: ${l.baseTime/l.timescale} (${l.baseTime}/${l.timescale}) trackId: ${l.trackId}`),this.log(`Found initPTS at playlist time: ${n} offset: ${A/g} (${A}/${g}) trackId: ${y}`),this._initPTS={baseTime:A,timescale:g,trackId:y},this._initDTS={baseTime:p,timescale:g,trackId:y}):A=g=void 0,{tracks:u,initPTS:A,timescale:g,trackId:y}}remuxVideo(e,r,n,i){const s=e.inputTimeScale,o=e.samples,c=[],u=o.length,l=this._initPTS,d=l.baseTime*s/l.timescale;let f=this.nextVideoTs,A=8,p=this.videoSampleDuration,g,y,x=Number.POSITIVE_INFINITY,w=Number.NEGATIVE_INFINITY,E=!1;if(!n||f===null){const be=d+r*s,de=o[0].pts-cf(o[0].dts,o[0].pts);cx&&f!==null&&Math.abs(be-de-(f+d))<15e3?n=!0:f=be-de-d}const T=f+d;for(let be=0;be<u;be++){const de=o[be];de.pts=cf(de.pts,T),de.dts=cf(de.dts,T),de.dts<o[be>0?be-1:be].dts&&(E=!0)}E&&o.sort(function(be,de){const xe=be.dts-de.dts,je=be.pts-de.pts;return xe||je}),g=o[0].dts,y=o[o.length-1].dts;const C=y-g,N=C?Math.round(C/(u-1)):p||e.inputTimeScale/30;if(n){const be=g-T,de=be>N,xe=be<-1;if((de||xe)&&(de?this.warn(`${(e.segmentCodec||"").toUpperCase()}: ${tw(be,!0)} ms (${be}dts) hole between fragments detected at ${r.toFixed(3)}`):this.warn(`${(e.segmentCodec||"").toUpperCase()}: ${tw(-be,!0)} ms (${be}dts) overlapping between fragments detected at ${r.toFixed(3)}`),!xe||T>=o[0].pts||cx)){g=T;const je=o[0].pts-be;if(de)o[0].dts=g,o[0].pts=je;else{let Me=!0;for(let Re=0;Re<o.length&&!(o[Re].dts>je&&Me);Re++){const it=o[Re].pts;if(o[Re].dts-=be,o[Re].pts-=be,Re<o.length-1){const ht=o[Re+1].pts,Be=o[Re].pts,nt=ht<=Be,Ge=ht<=it;Me=nt==Ge}}}this.log(`Video: Initial PTS/DTS adjusted: ${tw(je,!0)}/${tw(g,!0)}, delta: ${tw(be,!0)} ms`)}}g=Math.max(0,g);let I=0,U=0,K=g;for(let be=0;be<u;be++){const de=o[be],xe=de.units,je=xe.length;let Me=0;for(let Re=0;Re<je;Re++)Me+=xe[Re].data.length;U+=Me,I+=je,de.length=Me,de.dts<K?(de.dts=K,K+=N/4|0||1):K=de.dts,x=Math.min(de.pts,x),w=Math.max(de.pts,w)}y=o[u-1].dts;const Y=U+4*I+8;let re;try{re=new Uint8Array(Y)}catch(be){this.observer.emit(Le.ERROR,Le.ERROR,{type:Oi.MUX_ERROR,details:vr.REMUX_ALLOC_ERROR,fatal:!1,error:be,bytes:Y,reason:`fail allocating video mdat ${Y}`});return}const se=new DataView(re.buffer);se.setUint32(0,Y),re.set(hr.types.mdat,4);let Ae=!1,we=Number.POSITIVE_INFINITY,Ce=Number.POSITIVE_INFINITY,ve=Number.NEGATIVE_INFINITY,ne=Number.NEGATIVE_INFINITY;for(let be=0;be<u;be++){const de=o[be],xe=de.units;let je=0;for(let it=0,ht=xe.length;it<ht;it++){const Be=xe[it],nt=Be.data,Ge=Be.data.byteLength;se.setUint32(A,Ge),A+=4,re.set(nt,A),A+=Ge,je+=4+Ge}let Me;if(be<u-1)p=o[be+1].dts-de.dts,Me=o[be+1].pts-de.pts;else{const it=this.config,ht=be>0?de.dts-o[be-1].dts:N;if(Me=be>0?de.pts-o[be-1].pts:N,it.stretchShortVideoTrack&&this.nextAudioTs!==null){const Be=Math.floor(it.maxBufferHole*s),nt=(i?x+i*s:this.nextAudioTs+d)-de.pts;nt>Be?(p=nt-ht,p<0?p=ht:Ae=!0,this.log(`It is approximately ${nt/90} ms to the next segment; using duration ${p/90} ms for the last video frame.`)):p=ht}else p=ht}const Re=Math.round(de.pts-de.dts);we=Math.min(we,p),ve=Math.max(ve,p),Ce=Math.min(Ce,Me),ne=Math.max(ne,Me),c.push(WK(de.key,p,je,Re))}if(c.length){if(cx){if(cx<70){const be=c[0].flags;be.dependsOn=2,be.isNonSync=0}}else if(T4&&ne-Ce<ve-we&&N/ve<.025&&c[0].cts===0){this.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let be=g;for(let de=0,xe=c.length;de<xe;de++){const je=be+c[de].duration,Me=be+c[de].cts;if(de<xe-1){const Re=je+c[de+1].cts;c[de].duration=Re-Me}else c[de].duration=de?c[de-1].duration:N;c[de].cts=0,be=je}}}p=Ae||!p?N:p;const ce=y+p;this.nextVideoTs=f=ce-d,this.videoSampleDuration=p,this.isVideoContiguous=!0;const Oe={data1:hr.moof(e.sequenceNumber++,g,nl(e,{samples:c})),data2:re,startPTS:(x-d)/s,endPTS:(w+p-d)/s,startDTS:(g-d)/s,endDTS:f/s,type:"video",hasAudio:!1,hasVideo:!0,nb:c.length,dropped:e.dropped};return e.samples=[],e.dropped=0,Oe}getSamplesPerFrame(e){switch(e.segmentCodec){case"mp3":return X$e;case"ac3":return Z$e;default:return q$e}}remuxAudio(e,r,n,i,s){const o=e.inputTimeScale,c=e.samplerate?e.samplerate:o,u=o/c,l=this.getSamplesPerFrame(e),d=l*u,f=this._initPTS,A=e.segmentCodec==="mp3"&&this.typeSupported.mpeg,p=[],g=s!==void 0;let y=e.samples,x=A?0:8,w=this.nextAudioTs||-1;const E=f.baseTime*o/f.timescale,T=E+r*o;if(this.isAudioContiguous=n=n||y.length&&w>0&&(i&&Math.abs(T-(w+E))<9e3||Math.abs(cf(y[0].pts,T)-(w+E))<20*d),y.forEach(function(ne){ne.pts=cf(ne.pts,T)}),!n||w<0){const ne=y.length;if(y=y.filter(ce=>ce.pts>=0),ne!==y.length&&this.warn(`Removed ${y.length-ne} of ${ne} samples (initPTS ${E} / ${o})`),!y.length)return;s===0?w=0:i&&!g?w=Math.max(0,T-E):w=y[0].pts-E}if(e.segmentCodec==="aac"){const ne=this.config.maxAudioFramesDrift;for(let ce=0,ae=w+E;ce<y.length;ce++){const De=y[ce],Oe=De.pts,be=Oe-ae,de=Math.abs(1e3*be/o);if(be<=-ne*d&&g)ce===0&&(this.warn(`Audio frame @ ${(Oe/o).toFixed(3)}s overlaps marker by ${Math.round(1e3*be/o)} ms.`),this.nextAudioTs=w=Oe-E,ae=Oe);else if(be>=ne*d&&de<Y$e&&g){let xe=Math.round(be/d);for(ae=Oe-xe*d;ae<0&&xe&&d;)xe--,ae+=d;ce===0&&(this.nextAudioTs=w=ae-E),this.warn(`Injecting ${xe} audio frames @ ${((ae-E)/o).toFixed(3)}s due to ${Math.round(1e3*be/o)} ms gap.`);for(let je=0;je<xe;je++){let Me=K$e.getSilentFrame(e.parsedCodec||e.manifestCodec||e.codec,e.channelCount);Me||(this.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),Me=De.unit.subarray()),y.splice(ce,0,{unit:Me,pts:ae}),ae+=d,ce++}}De.pts=ae,ae+=d}}let C=null,N=null,I,U=0,K=y.length;for(;K--;)U+=y[K].unit.byteLength;for(let ne=0,ce=y.length;ne<ce;ne++){const ae=y[ne],De=ae.unit;let Oe=ae.pts;if(N!==null){const de=p[ne-1];de.duration=Math.round((Oe-N)/u)}else if(n&&e.segmentCodec==="aac"&&(Oe=w+E),C=Oe,U>0){U+=x;try{I=new Uint8Array(U)}catch(de){this.observer.emit(Le.ERROR,Le.ERROR,{type:Oi.MUX_ERROR,details:vr.REMUX_ALLOC_ERROR,fatal:!1,error:de,bytes:U,reason:`fail allocating audio mdat ${U}`});return}A||(new DataView(I.buffer).setUint32(0,U),I.set(hr.types.mdat,4))}else return;I.set(De,x);const be=De.byteLength;x+=be,p.push(WK(!0,l,be,0)),N=Oe}const Y=p.length;if(!Y)return;const re=p[p.length-1];w=N-E,this.nextAudioTs=w+u*re.duration;const se=A?new Uint8Array(0):hr.moof(e.sequenceNumber++,C/u,nl({},e,{samples:p}));e.samples=[];const Ae=(C-E)/o,we=this.nextAudioTs/o,ve={data1:se,data2:I,startPTS:Ae,endPTS:we,startDTS:Ae,endDTS:we,type:"audio",hasAudio:!0,hasVideo:!1,nb:Y};return this.isAudioContiguous=!0,ve}}function cf(t,e){let r;if(e===null)return t;for(e<t?r=-8589934592:r=8589934592;Math.abs(t-e)>4294967296;)t+=r;return t}function J$e(t){for(let e=0;e<t.length;e++)if(t[e].key)return e;return-1}function Kie(t,e,r,n){const i=t.samples.length;if(!i)return;const s=t.inputTimeScale;for(let c=0;c<i;c++){const u=t.samples[c];u.pts=cf(u.pts-r.baseTime*s/r.timescale,e*s)/s,u.dts=cf(u.dts-n.baseTime*s/n.timescale,e*s)/s}const o=t.samples;return t.samples=[],{samples:o}}function Gie(t,e,r){const n=t.samples.length;if(!n)return;const i=t.inputTimeScale;for(let o=0;o<n;o++){const c=t.samples[o];c.pts=cf(c.pts-r.baseTime*i/r.timescale,e*i)/i}t.samples.sort((o,c)=>o.pts-c.pts);const s=t.samples;return t.samples=[],{samples:s}}class e9e extends iA{constructor(e,r,n,i){super("passthrough-remuxer",i),this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null,this.isVideoContiguous=!1}destroy(){}resetTimeStamp(e){this.lastEndTime=null;const r=this.initPTS;r&&e&&r.baseTime===e.baseTime&&r.timescale===e.timescale||(this.initPTS=e)}resetNextTimestamp(){this.isVideoContiguous=!1,this.lastEndTime=null}resetInitSegment(e,r,n,i){this.audioCodec=r,this.videoCodec=n,this.generateInitSegment(e,i),this.emitInitSegment=!0}generateInitSegment(e,r){let{audioCodec:n,videoCodec:i}=this;if(!(e!=null&&e.byteLength)){this.initTracks=void 0,this.initData=void 0;return}const{audio:s,video:o}=this.initData=Jne(e);if(r)$8e(e,r);else{const u=s||o;u!=null&&u.encrypted&&this.warn(`Init segment with encrypted track with has no key ("${u.codec}")!`)}s&&(n=YK(s,cl.AUDIO,this)),o&&(i=YK(o,cl.VIDEO,this));const c={};s&&o?c.audiovideo={container:"video/mp4",codec:n+","+i,supplemental:o.supplemental,encrypted:o.encrypted,initSegment:e,id:"main"}:s?c.audio={container:"audio/mp4",codec:n,encrypted:s.encrypted,initSegment:e,id:"audio"}:o?c.video={container:"video/mp4",codec:i,supplemental:o.supplemental,encrypted:o.encrypted,initSegment:e,id:"main"}:this.warn("initSegment does not contain moov or trak boxes."),this.initTracks=c}remux(e,r,n,i,s,o){var c,u;let{initPTS:l,lastEndTime:d}=this;const f={audio:void 0,video:void 0,text:i,id3:n,initSegment:void 0};qn(d)||(d=this.lastEndTime=s||0);const A=r.samples;if(!A.length)return f;const p={initPTS:void 0,timescale:void 0,trackId:void 0};let g=this.initData;if((c=g)!=null&&c.length||(this.generateInitSegment(A),g=this.initData),!((u=g)!=null&&u.length))return this.warn("Failed to generate initSegment."),f;this.emitInitSegment&&(p.tracks=this.initTracks,this.emitInitSegment=!1);const y=Q8e(A,g,this),x=g.audio?y[g.audio.id]:null,w=g.video?y[g.video.id]:null,E=pS(w,1/0),T=pS(x,1/0),C=pS(w,0,!0),N=pS(x,0,!0);let I=s,U=0;const K=x&&(!w||!l&&T<E||l&&l.trackId===g.audio.id),Y=K?x:w;if(Y){const ae=Y.timescale,De=Y.start-s*ae,Oe=K?g.audio.id:g.video.id;I=Y.start/ae,U=K?N-T:C-E,(o||!l)&&(t9e(l,I,s,U)||ae!==l.timescale)&&(l&&this.warn(`Timestamps at playlist time: ${o?"":"~"}${s} ${De/ae} != initPTS: ${l.baseTime/l.timescale} (${l.baseTime}/${l.timescale}) trackId: ${l.trackId}`),this.log(`Found initPTS at playlist time: ${s} offset: ${I-s} (${De}/${ae}) trackId: ${Oe}`),l=null,p.initPTS=De,p.timescale=ae,p.trackId=Oe)}else this.warn(`No audio or video samples found for initPTS at playlist time: ${s}`);l?(p.initPTS=l.baseTime,p.timescale=l.timescale,p.trackId=l.trackId):((!p.timescale||p.trackId===void 0||p.initPTS===void 0)&&(this.warn("Could not set initPTS"),p.initPTS=I,p.timescale=1,p.trackId=-1),this.initPTS=l={baseTime:p.initPTS,timescale:p.timescale,trackId:p.trackId});const re=I-l.baseTime/l.timescale,se=re+U;U>0?this.lastEndTime=se:(this.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());const Ae=!!g.audio,we=!!g.video;let Ce="";Ae&&(Ce+="audio"),we&&(Ce+="video");const ve=(g.audio?g.audio.encrypted:!1)||(g.video?g.video.encrypted:!1),ne={data1:A,startPTS:re,startDTS:re,endPTS:se,endDTS:se,type:Ce,hasAudio:Ae,hasVideo:we,nb:1,dropped:0,encrypted:ve};f.audio=Ae&&!we?ne:void 0,f.video=we?ne:void 0;const ce=w?.sampleCount;if(ce){const ae=w.keyFrameIndex,De=ae!==-1;ne.nb=ce,ne.dropped=ae===0||this.isVideoContiguous?0:De?ae:ce,ne.independent=De,ne.firstKeyFrame=ae,De&&w.keyFrameStart&&(ne.firstKeyFramePTS=(w.keyFrameStart-l.baseTime)/l.timescale),this.isVideoContiguous||(f.independent=De),this.isVideoContiguous||(this.isVideoContiguous=De),ne.dropped&&this.warn(`fmp4 does not start with IDR: firstIDR ${ae}/${ce} dropped: ${ne.dropped} start: ${ne.firstKeyFramePTS||"NA"}`)}return f.initSegment=p,f.id3=Kie(n,s,l,l),i.samples.length&&(f.text=Gie(i,s,l)),f}}function pS(t,e,r=!1){return t?.start!==void 0?(t.start+(r?t.duration:0))/t.timescale:e}function t9e(t,e,r,n){if(t===null)return!0;const i=Math.max(n,1),s=e-t.baseTime/t.timescale;return Math.abs(s-r)>i}function YK(t,e,r){const n=t.codec;return n&&n.length>4?n:e===cl.AUDIO?n==="ec-3"||n==="ac-3"||n==="alac"?n:n==="fLaC"||n==="Opus"?zj(n,!1):(r.warn(`Unhandled audio codec "${n}" in mp4 MAP`),n||"mp4a"):(r.warn(`Unhandled video codec "${n}" in mp4 MAP`),n||"avc1")}let kp;try{kp=self.performance.now.bind(self.performance)}catch{kp=Date.now}const uT=[{demux:U$e,remux:e9e},{demux:d0,remux:cT},{demux:R$e,remux:cT},{demux:M$e,remux:cT}];uT.splice(2,0,{demux:D$e,remux:cT});class qK{constructor(e,r,n,i,s,o){this.asyncResult=!1,this.logger=void 0,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=r,this.config=n,this.id=s,this.logger=o}configure(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()}push(e,r,n,i){const s=n.transmuxing;s.executeStart=kp();let o=new Uint8Array(e);const{currentTransmuxState:c,transmuxConfig:u}=this;i&&(this.currentTransmuxState=i);const{contiguous:l,discontinuity:d,trackSwitch:f,accurateTimeOffset:A,timeOffset:p,initSegmentChange:g}=i||c,{audioCodec:y,videoCodec:x,defaultInitPts:w,duration:E,initSegmentData:T}=u,C=r9e(o,r);if(C&&mb(C.method)){const K=this.getDecrypter(),Y=yF(C.method);if(K.isSync()){let re=K.softwareDecrypt(o,C.key.buffer,C.iv.buffer,Y);if(n.part>-1){const Ae=K.flush();re=Ae&&Ae.buffer}if(!re)return s.executeEnd=kp(),C4(n);o=new Uint8Array(re)}else return this.asyncResult=!0,this.decryptionPromise=K.webCryptoDecrypt(o,C.key.buffer,C.iv.buffer,Y).then(re=>{const se=this.push(re,null,n);return this.decryptionPromise=null,se}),this.decryptionPromise}const N=this.needsProbing(d,f);if(N){const K=this.configureTransmuxer(o);if(K)return this.logger.warn(`[transmuxer] ${K.message}`),this.observer.emit(Le.ERROR,Le.ERROR,{type:Oi.MEDIA_ERROR,details:vr.FRAG_PARSING_ERROR,fatal:!1,error:K,reason:K.message}),s.executeEnd=kp(),C4(n)}(d||f||g||N)&&this.resetInitSegment(T,y,x,E,r),(d||g||N)&&this.resetInitialTimestamp(w),l||this.resetContiguity();const I=this.transmux(o,C,p,A,n);this.asyncResult=i2(I);const U=this.currentTransmuxState;return U.contiguous=!0,U.discontinuity=!1,U.trackSwitch=!1,s.executeEnd=kp(),I}flush(e){const r=e.transmuxing;r.executeStart=kp();const{decrypter:n,currentTransmuxState:i,decryptionPromise:s}=this;if(s)return this.asyncResult=!0,s.then(()=>this.flush(e));const o=[],{timeOffset:c}=i;if(n){const f=n.flush();f&&o.push(this.push(f.buffer,null,e))}const{demuxer:u,remuxer:l}=this;if(!u||!l){r.executeEnd=kp();const f=[C4(e)];return this.asyncResult?Promise.resolve(f):f}const d=u.flush(c);return i2(d)?(this.asyncResult=!0,d.then(f=>(this.flushRemux(o,f,e),o))):(this.flushRemux(o,d,e),this.asyncResult?Promise.resolve(o):o)}flushRemux(e,r,n){const{audioTrack:i,videoTrack:s,id3Track:o,textTrack:c}=r,{accurateTimeOffset:u,timeOffset:l}=this.currentTransmuxState;this.logger.log(`[transmuxer.ts]: Flushed ${this.id} sn: ${n.sn}${n.part>-1?" part: "+n.part:""} of ${this.id===fi.MAIN?"level":"track"} ${n.level}`);const d=this.remuxer.remux(i,s,o,c,l,u,!0,this.id);e.push({remuxResult:d,chunkMeta:n}),n.transmuxing.executeEnd=kp()}resetInitialTimestamp(e){const{demuxer:r,remuxer:n}=this;!r||!n||(r.resetTimeStamp(e),n.resetTimeStamp(e))}resetContiguity(){const{demuxer:e,remuxer:r}=this;!e||!r||(e.resetContiguity(),r.resetNextTimestamp())}resetInitSegment(e,r,n,i,s){const{demuxer:o,remuxer:c}=this;!o||!c||(o.resetInitSegment(e,r,n,i),c.resetInitSegment(e,r,n,s))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(e,r,n,i,s){let o;return r&&r.method==="SAMPLE-AES"?o=this.transmuxSampleAes(e,r,n,i,s):o=this.transmuxUnencrypted(e,n,i,s),o}transmuxUnencrypted(e,r,n,i){const{audioTrack:s,videoTrack:o,id3Track:c,textTrack:u}=this.demuxer.demux(e,r,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(s,o,c,u,r,n,!1,this.id),chunkMeta:i}}transmuxSampleAes(e,r,n,i,s){return this.demuxer.demuxSampleAes(e,r,n).then(o=>({remuxResult:this.remuxer.remux(o.audioTrack,o.videoTrack,o.id3Track,o.textTrack,n,i,!1,this.id),chunkMeta:s}))}configureTransmuxer(e){const{config:r,observer:n,typeSupported:i}=this;let s;for(let f=0,A=uT.length;f<A;f++){var o;if((o=uT[f].demux)!=null&&o.probe(e,this.logger)){s=uT[f];break}}if(!s)return new Error("Failed to find demuxer by probing fragment data");const c=this.demuxer,u=this.remuxer,l=s.remux,d=s.demux;(!u||!(u instanceof l))&&(this.remuxer=new l(n,r,i,this.logger)),(!c||!(c instanceof d))&&(this.demuxer=new d(n,r,i,this.logger),this.probe=d.probe)}needsProbing(e,r){return!this.demuxer||!this.remuxer||e||r}getDecrypter(){let e=this.decrypter;return e||(e=this.decrypter=new gF(this.config)),e}}function r9e(t,e){let r=null;return t.byteLength>0&&e?.key!=null&&e.iv!==null&&e.method!=null&&(r=e),r}const C4=t=>({remuxResult:{},chunkMeta:t});function i2(t){return"then"in t&&t.then instanceof Function}class n9e{constructor(e,r,n,i,s){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=r,this.initSegmentData=n,this.duration=i,this.defaultInitPts=s||null}}class i9e{constructor(e,r,n,i,s,o){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=r,this.accurateTimeOffset=n,this.trackSwitch=i,this.timeOffset=s,this.initSegmentChange=o}}let XK=0;class Wie{constructor(e,r,n,i){this.error=null,this.hls=void 0,this.id=void 0,this.instanceNo=XK++,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0,this.onWorkerMessage=u=>{const l=u.data,d=this.hls;if(!(!d||!(l!=null&&l.event)||l.instanceNo!==this.instanceNo))switch(l.event){case"init":{var f;const A=(f=this.workerContext)==null?void 0:f.objectURL;A&&self.URL.revokeObjectURL(A);break}case"transmuxComplete":{this.handleTransmuxComplete(l.data);break}case"flush":{this.onFlush(l.data);break}case"workerLog":{d.logger[l.data.logType]&&d.logger[l.data.logType](l.data.message);break}default:{l.data=l.data||{},l.data.frag=this.frag,l.data.part=this.part,l.data.id=this.id,d.trigger(l.event,l.data);break}}},this.onWorkerError=u=>{if(!this.hls)return;const l=new Error(`${u.message}  (${u.filename}:${u.lineno})`);this.hls.config.enableWorker=!1,this.hls.logger.warn(`Error in "${this.id}" Web Worker, fallback to inline`),this.hls.trigger(Le.ERROR,{type:Oi.OTHER_ERROR,details:vr.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:l})};const s=e.config;this.hls=e,this.id=r,this.useWorker=!!s.enableWorker,this.onTransmuxComplete=n,this.onFlush=i;const o=(u,l)=>{l=l||{},l.frag=this.frag||void 0,u===Le.ERROR&&(l=l,l.parent=this.id,l.part=this.part,this.error=l.error),this.hls.trigger(u,l)};this.observer=new wF,this.observer.on(Le.FRAG_DECRYPTED,o),this.observer.on(Le.ERROR,o);const c=hK(s.preferManagedMediaSource);if(this.useWorker&&typeof Worker<"u"){const u=this.hls.logger;if(s.workerPath||l$e()){try{s.workerPath?(u.log(`loading Web Worker ${s.workerPath} for "${r}"`),this.workerContext=u$e(s.workerPath)):(u.log(`injecting Web Worker for "${r}"`),this.workerContext=c$e());const{worker:d}=this.workerContext;d.addEventListener("message",this.onWorkerMessage),d.addEventListener("error",this.onWorkerError),d.postMessage({instanceNo:this.instanceNo,cmd:"init",typeSupported:c,id:r,config:fl(s)})}catch(d){u.warn(`Error setting up "${r}" Web Worker, fallback to inline`,d),this.terminateWorker(),this.error=null,this.transmuxer=new qK(this.observer,c,s,"",r,e.logger)}return}}this.transmuxer=new qK(this.observer,c,s,"",r,e.logger)}reset(){if(this.frag=null,this.part=null,this.workerContext){const e=this.instanceNo;this.instanceNo=XK++;const r=this.hls.config,n=hK(r.preferManagedMediaSource);this.workerContext.worker.postMessage({instanceNo:this.instanceNo,cmd:"reset",resetNo:e,typeSupported:n,id:this.id,config:fl(r)})}}terminateWorker(){if(this.workerContext){const{worker:e}=this.workerContext;this.workerContext=null,e.removeEventListener("message",this.onWorkerMessage),e.removeEventListener("error",this.onWorkerError),d$e(this.hls.config.workerPath)}}destroy(){if(this.workerContext)this.terminateWorker(),this.onWorkerMessage=this.onWorkerError=null;else{const r=this.transmuxer;r&&(r.destroy(),this.transmuxer=null)}const e=this.observer;e&&e.removeAllListeners(),this.frag=null,this.part=null,this.observer=null,this.hls=null}push(e,r,n,i,s,o,c,u,l,d){var f,A;l.transmuxing.start=self.performance.now();const{instanceNo:p,transmuxer:g}=this,y=o?o.start:s.start,x=s.decryptdata,w=this.frag,E=!(w&&s.cc===w.cc),T=!(w&&l.level===w.level),C=w?l.sn-w.sn:-1,N=this.part?l.part-this.part.index:-1,I=C===0&&l.id>1&&l.id===w?.stats.chunkCount,U=!T&&(C===1||C===0&&(N===1||I&&N<=0)),K=self.performance.now();(T||C||s.stats.parsing.start===0)&&(s.stats.parsing.start=K),o&&(N||!U)&&(o.stats.parsing.start=K);const Y=!(w&&((f=s.initSegment)==null?void 0:f.url)===((A=w.initSegment)==null?void 0:A.url)),re=new i9e(E,U,u,T,y,Y);if(!U||E||Y){this.hls.logger.log(`[transmuxer-interface]: Starting new transmux session for ${s.type} sn: ${l.sn}${l.part>-1?" part: "+l.part:""} ${this.id===fi.MAIN?"level":"track"}: ${l.level} id: ${l.id}
        discontinuity: ${E}
        trackSwitch: ${T}
        contiguous: ${U}
        accurateTimeOffset: ${u}
        timeOffset: ${y}
        initSegmentChange: ${Y}`);const se=new n9e(n,i,r,c,d);this.configureTransmuxer(se)}if(this.frag=s,this.part=o,this.workerContext)this.workerContext.worker.postMessage({instanceNo:p,cmd:"demux",data:e,decryptdata:x,chunkMeta:l,state:re},e instanceof ArrayBuffer?[e]:[]);else if(g){const se=g.push(e,x,l,re);i2(se)?se.then(Ae=>{this.handleTransmuxComplete(Ae)}).catch(Ae=>{this.transmuxerError(Ae,l,"transmuxer-interface push error")}):this.handleTransmuxComplete(se)}}flush(e){e.transmuxing.start=self.performance.now();const{instanceNo:r,transmuxer:n}=this;if(this.workerContext)this.workerContext.worker.postMessage({instanceNo:r,cmd:"flush",chunkMeta:e});else if(n){const i=n.flush(e);i2(i)?i.then(s=>{this.handleFlushResult(s,e)}).catch(s=>{this.transmuxerError(s,e,"transmuxer-interface flush error")}):this.handleFlushResult(i,e)}}transmuxerError(e,r,n){this.hls&&(this.error=e,this.hls.trigger(Le.ERROR,{type:Oi.MEDIA_ERROR,details:vr.FRAG_PARSING_ERROR,chunkMeta:r,frag:this.frag||void 0,part:this.part||void 0,fatal:!1,error:e,err:e,reason:n}))}handleFlushResult(e,r){e.forEach(n=>{this.handleTransmuxComplete(n)}),this.onFlush(r)}configureTransmuxer(e){const{instanceNo:r,transmuxer:n}=this;this.workerContext?this.workerContext.worker.postMessage({instanceNo:r,cmd:"configure",config:e}):n&&n.configure(e)}handleTransmuxComplete(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)}}const ZK=100;class s9e extends bF{constructor(e,r,n){super(e,r,n,"audio-stream-controller",fi.AUDIO),this.mainAnchor=null,this.mainFragLoading=null,this.audioOnly=!1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.flushing=!1,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.resetItem()}resetItem(){this.mainDetails=this.mainAnchor=this.mainFragLoading=this.bufferedTrack=this.switchingTrack=this.waitingData=this.cachedTrackLoadedData=null}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(Le.LEVEL_LOADED,this.onLevelLoaded,this),e.on(Le.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(Le.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(Le.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(Le.BUFFER_RESET,this.onBufferReset,this),e.on(Le.BUFFER_CREATED,this.onBufferCreated,this),e.on(Le.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(Le.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(Le.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(Le.FRAG_LOADING,this.onFragLoading,this),e.on(Le.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){const{hls:e}=this;e&&(super.unregisterListeners(),e.off(Le.LEVEL_LOADED,this.onLevelLoaded,this),e.off(Le.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(Le.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(Le.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(Le.BUFFER_RESET,this.onBufferReset,this),e.off(Le.BUFFER_CREATED,this.onBufferCreated,this),e.off(Le.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(Le.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(Le.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(Le.FRAG_LOADING,this.onFragLoading,this),e.off(Le.FRAG_BUFFERED,this.onFragBuffered,this))}onInitPtsFound(e,{frag:r,id:n,initPTS:i,timescale:s,trackId:o}){if(n===fi.MAIN){const c=r.cc,u=this.fragCurrent;if(this.initPTS[c]={baseTime:i,timescale:s,trackId:o},this.log(`InitPTS for cc: ${c} found from main: ${i/s} (${i}/${s}) trackId: ${o}`),this.mainAnchor=r,this.state===Kr.WAITING_INIT_PTS){const l=this.waitingData;(!l&&!this.loadingParts||l&&l.frag.cc!==c)&&this.syncWithAnchor(r,l?.frag)}else!this.hls.hasEnoughToStart&&u&&u.cc!==c?(u.abortRequests(),this.syncWithAnchor(r,u)):this.state===Kr.IDLE&&this.tick()}}getLoadPosition(){return!this.startFragRequested&&this.nextLoadPosition>=0?this.nextLoadPosition:super.getLoadPosition()}syncWithAnchor(e,r){var n;const i=((n=this.mainFragLoading)==null?void 0:n.frag)||null;if(r&&i?.cc===r.cc)return;const s=(i||e).cc,o=this.getLevelDetails(),c=this.getLoadPosition(),u=uie(o,s,c);u&&(this.log(`Syncing with main frag at ${u.start} cc ${u.cc}`),this.startFragRequested=!1,this.nextLoadPosition=u.start,this.resetLoadingState(),this.state===Kr.IDLE&&this.doTickIdle())}startLoad(e,r){if(!this.levels){this.startPosition=e,this.state=Kr.STOPPED;return}const n=this.lastCurrentTime;this.stopLoad(),this.setInterval(ZK),n>0&&e===-1?(this.log(`Override startPosition with lastCurrentTime @${n.toFixed(3)}`),e=n,this.state=Kr.IDLE):this.state=Kr.WAITING_TRACK,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=r?-1:e,this.tick()}doTick(){switch(this.state){case Kr.IDLE:this.doTickIdle();break;case Kr.WAITING_TRACK:{const{levels:e,trackId:r}=this,n=e?.[r],i=n?.details;if(i&&!this.waitForLive(n)){if(this.waitForCdnTuneIn(i))break;this.state=Kr.WAITING_INIT_PTS}break}case Kr.FRAG_LOADING_WAITING_RETRY:{this.checkRetryDate();break}case Kr.WAITING_INIT_PTS:{const e=this.waitingData;if(e){const{frag:r,part:n,cache:i,complete:s}=e,o=this.mainAnchor;if(this.initPTS[r.cc]!==void 0){this.waitingData=null,this.state=Kr.FRAG_LOADING;const c=i.flush().buffer,u={frag:r,part:n,payload:c,networkDetails:null};this._handleFragmentLoadProgress(u),s&&super._handleFragmentLoadComplete(u)}else o&&o.cc!==e.frag.cc&&this.syncWithAnchor(o,e.frag)}else this.state=Kr.IDLE}}this.onTickEnd()}resetLoadingState(){const e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null),super.resetLoadingState()}onTickEnd(){const{media:e}=this;e!=null&&e.readyState&&(this.lastCurrentTime=e.currentTime)}doTickIdle(){var e;const{hls:r,levels:n,media:i,trackId:s}=this,o=r.config;if(!this.buffering||!i&&!this.primaryPrefetch&&(this.startFragRequested||!o.startFragPrefetch)||!(n!=null&&n[s]))return;const c=n[s],u=c.details;if(!u||this.waitForLive(c)||this.waitForCdnTuneIn(u)){this.state=Kr.WAITING_TRACK,this.startFragRequested=!1;return}const l=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&l&&(this.bufferFlushed=!1,this.afterBufferFlushed(l,cl.AUDIO,fi.AUDIO));const d=this.getFwdBufferInfo(l,fi.AUDIO);if(d===null)return;if(!this.switchingTrack&&this._streamEnded(d,u)){r.trigger(Le.BUFFER_EOS,{type:"audio"}),this.state=Kr.ENDED;return}const f=d.len,A=r.maxBufferLength,p=u.fragments,g=p[0].start,y=this.getLoadPosition(),x=this.flushing?y:d.end;if(this.switchingTrack&&i){const T=y;u.PTSKnown&&T<g&&(d.end>g||d.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),i.currentTime=g+.05)}if(f>=A&&!this.switchingTrack&&x<p[p.length-1].start)return;let w=this.getNextFragment(x,u);if(w&&this.isLoopLoading(w,x)&&(w=this.getNextFragmentLoopLoading(w,u,d,fi.MAIN,A)),!w){this.bufferFlushed=!0;return}let E=((e=this.mainFragLoading)==null?void 0:e.frag)||null;if(!this.audioOnly&&this.startFragRequested&&E&&eu(w)&&!w.endList&&(!u.live||!this.loadingParts&&x<this.hls.liveSyncPosition)&&(this.fragmentTracker.getState(E)===Fu.OK&&(this.mainFragLoading=E=null),E&&eu(E))){if(w.start>E.end){const C=this.fragmentTracker.getFragAtPos(x,fi.MAIN);C&&C.end>E.end&&(E=C,this.mainFragLoading={frag:C,targetBufferTime:null})}if(w.start>E.end)return}this.loadFragment(w,c,x)}onMediaDetaching(e,r){this.bufferFlushed=this.flushing=!1,super.onMediaDetaching(e,r)}onAudioTracksUpdated(e,{audioTracks:r}){this.resetTransmuxer(),this.levels=r.map(n=>new t2(n))}onAudioTrackSwitching(e,r){const n=!!r.url;this.trackId=r.id;const{fragCurrent:i}=this;i&&(i.abortRequests(),this.removeUnbufferedFrags(i.start)),this.resetLoadingState(),n?(this.switchingTrack=r,this.flushAudioIfNeeded(r),this.state!==Kr.STOPPED&&(this.setInterval(ZK),this.state=Kr.IDLE,this.tick())):(this.resetTransmuxer(),this.switchingTrack=null,this.bufferedTrack=r,this.clearInterval())}onManifestLoading(){super.onManifestLoading(),this.bufferFlushed=this.flushing=this.audioOnly=!1,this.resetItem(),this.trackId=-1}onLevelLoaded(e,r){this.mainDetails=r.details;const n=this.cachedTrackLoadedData;n&&(this.cachedTrackLoadedData=null,this.onAudioTrackLoaded(Le.AUDIO_TRACK_LOADED,n))}onAudioTrackLoaded(e,r){var n;const{levels:i}=this,{details:s,id:o,groupId:c,track:u}=r;if(!i){this.warn(`Audio tracks reset while loading track ${o} "${u.name}" of "${c}"`);return}const l=this.mainDetails;if(!l||s.endCC>l.endCC||l.expired){this.cachedTrackLoadedData=r,this.state!==Kr.STOPPED&&(this.state=Kr.WAITING_TRACK);return}this.cachedTrackLoadedData=null,this.log(`Audio track ${o} "${u.name}" of "${c}" loaded [${s.startSN},${s.endSN}]${s.lastPartSn?`[part-${s.lastPartSn}-${s.lastPartIndex}]`:""},duration:${s.totalduration}`);const d=i[o];let f=0;if(s.live||(n=d.details)!=null&&n.live){if(this.checkLiveUpdate(s),s.deltaUpdateFailed)return;if(d.details){var A;f=this.alignPlaylists(s,d.details,(A=this.levelLastLoaded)==null?void 0:A.details)}s.alignedSliding||(jie(s,l),s.alignedSliding||Zj(s,l),f=s.fragmentStart)}d.details=s,this.levelLastLoaded=d,this.startFragRequested||this.setStartPosition(l,f),this.hls.trigger(Le.AUDIO_TRACK_UPDATED,{details:s,id:o,groupId:r.groupId}),this.state===Kr.WAITING_TRACK&&!this.waitForCdnTuneIn(s)&&(this.state=Kr.IDLE),this.tick()}_handleFragmentLoadProgress(e){var r;const n=e.frag,{part:i,payload:s}=e,{config:o,trackId:c,levels:u}=this;if(!u){this.warn(`Audio tracks were reset while fragment load was in progress. Fragment ${n.sn} of level ${n.level} will not be buffered`);return}const l=u[c];if(!l){this.warn("Audio track is undefined on fragment load progress");return}const d=l.details;if(!d){this.warn("Audio track details undefined on fragment load progress"),this.removeUnbufferedFrags(n.start);return}const f=o.defaultAudioCodec||l.audioCodec||"mp4a.40.2";let A=this.transmuxer;A||(A=this.transmuxer=new Wie(this.hls,fi.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));const p=this.initPTS[n.cc],g=(r=n.initSegment)==null?void 0:r.data;if(p!==void 0){const x=i?i.index:-1,w=x!==-1,E=new vF(n.level,n.sn,n.stats.chunkCount,s.byteLength,x,w);A.push(s,g,f,"",n,i,d.totalduration,!1,E,p)}else{this.log(`Unknown video PTS for cc ${n.cc}, waiting for video PTS before demuxing audio frag ${n.sn} of [${d.startSN} ,${d.endSN}],track ${c}`);const{cache:y}=this.waitingData=this.waitingData||{frag:n,part:i,cache:new Nie,complete:!1};y.push(new Uint8Array(s)),this.state!==Kr.STOPPED&&(this.state=Kr.WAITING_INIT_PTS)}}_handleFragmentLoadComplete(e){if(this.waitingData){this.waitingData.complete=!0;return}super._handleFragmentLoadComplete(e)}onBufferReset(){this.mediaBuffer=null}onBufferCreated(e,r){this.bufferFlushed=this.flushing=!1;const n=r.tracks.audio;n&&(this.mediaBuffer=n.buffer||null)}onFragLoading(e,r){!this.audioOnly&&r.frag.type===fi.MAIN&&eu(r.frag)&&(this.mainFragLoading=r,this.state===Kr.IDLE&&this.tick())}onFragBuffered(e,r){const{frag:n,part:i}=r;if(n.type!==fi.AUDIO){!this.audioOnly&&n.type===fi.MAIN&&!n.elementaryStreams.video&&!n.elementaryStreams.audiovideo&&(this.audioOnly=!0,this.mainFragLoading=null);return}if(this.fragContextChanged(n)){this.warn(`Fragment ${n.sn}${i?" p: "+i.index:""} of level ${n.level} finished buffering, but was aborted. state: ${this.state}, audioSwitch: ${this.switchingTrack?this.switchingTrack.name:"false"}`);return}if(eu(n)){this.fragPrevious=n;const s=this.switchingTrack;s&&(this.bufferedTrack=s,this.switchingTrack=null,this.hls.trigger(Le.AUDIO_TRACK_SWITCHED,Uo({},s)))}this.fragBufferedComplete(n,i),this.media&&this.tick()}onError(e,r){var n;if(r.fatal){this.state=Kr.ERROR;return}switch(r.details){case vr.FRAG_GAP:case vr.FRAG_PARSING_ERROR:case vr.FRAG_DECRYPT_ERROR:case vr.FRAG_LOAD_ERROR:case vr.FRAG_LOAD_TIMEOUT:case vr.KEY_LOAD_ERROR:case vr.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(fi.AUDIO,r);break;case vr.AUDIO_TRACK_LOAD_ERROR:case vr.AUDIO_TRACK_LOAD_TIMEOUT:case vr.LEVEL_PARSING_ERROR:!r.levelRetry&&this.state===Kr.WAITING_TRACK&&((n=r.context)==null?void 0:n.type)===xa.AUDIO_TRACK&&(this.state=Kr.IDLE);break;case vr.BUFFER_ADD_CODEC_ERROR:case vr.BUFFER_APPEND_ERROR:if(r.parent!=="audio")return;this.reduceLengthAndFlushBuffer(r)||this.resetLoadingState();break;case vr.BUFFER_FULL_ERROR:if(r.parent!=="audio")return;this.reduceLengthAndFlushBuffer(r)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case vr.INTERNAL_EXCEPTION:this.recoverWorkerError(r);break}}onBufferFlushing(e,{type:r}){r!==cl.VIDEO&&(this.flushing=!0)}onBufferFlushed(e,{type:r}){if(r!==cl.VIDEO){this.flushing=!1,this.bufferFlushed=!0,this.state===Kr.ENDED&&(this.state=Kr.IDLE);const n=this.mediaBuffer||this.media;n&&(this.afterBufferFlushed(n,r,fi.AUDIO),this.tick())}}_handleTransmuxComplete(e){var r;const n="audio",{hls:i}=this,{remuxResult:s,chunkMeta:o}=e,c=this.getCurrentContext(o);if(!c){this.resetWhenMissingContext(o);return}const{frag:u,part:l,level:d}=c,{details:f}=d,{audio:A,text:p,id3:g,initSegment:y}=s;if(this.fragContextChanged(u)||!f){this.fragmentTracker.removeFragment(u);return}if(this.state=Kr.PARSING,this.switchingTrack&&A&&this.completeAudioSwitch(this.switchingTrack),y!=null&&y.tracks){const x=u.initSegment||u;if(this.unhandledEncryptionError(y,u))return;this._bufferInitSegment(d,y.tracks,x,o),i.trigger(Le.FRAG_PARSING_INIT_SEGMENT,{frag:x,id:n,tracks:y.tracks})}if(A){const{startPTS:x,endPTS:w,startDTS:E,endDTS:T}=A;l&&(l.elementaryStreams[cl.AUDIO]={startPTS:x,endPTS:w,startDTS:E,endDTS:T}),u.setElementaryStreamInfo(cl.AUDIO,x,w,E,T),this.bufferFragmentData(A,u,l,o)}if(g!=null&&(r=g.samples)!=null&&r.length){const x=nl({id:n,frag:u,details:f},g);i.trigger(Le.FRAG_PARSING_METADATA,x)}if(p){const x=nl({id:n,frag:u,details:f},p);i.trigger(Le.FRAG_PARSING_USERDATA,x)}}_bufferInitSegment(e,r,n,i){if(this.state!==Kr.PARSING||(r.video&&delete r.video,r.audiovideo&&delete r.audiovideo,!r.audio))return;const s=r.audio;s.id=fi.AUDIO;const o=e.audioCodec;this.log(`Init audio buffer, container:${s.container}, codecs[level/parsed]=[${o}/${s.codec}]`),o&&o.split(",").length===1&&(s.levelCodec=o),this.hls.trigger(Le.BUFFER_CODECS,r);const c=s.initSegment;if(c!=null&&c.byteLength){const u={type:"audio",frag:n,part:null,chunkMeta:i,parent:n.type,data:c};this.hls.trigger(Le.BUFFER_APPENDING,u)}this.tickImmediate()}loadFragment(e,r,n){const i=this.fragmentTracker.getState(e);if(this.switchingTrack||i===Fu.NOT_LOADED||i===Fu.PARTIAL){var s;if(!eu(e))this._loadInitSegment(e,r);else if((s=r.details)!=null&&s.live&&!this.initPTS[e.cc]){this.log(`Waiting for video PTS in continuity counter ${e.cc} of live stream before loading audio fragment ${e.sn} of level ${this.trackId}`),this.state=Kr.WAITING_INIT_PTS;const o=this.mainDetails;o&&o.fragmentStart!==r.details.fragmentStart&&Zj(r.details,o)}else super.loadFragment(e,r,n)}else this.clearTrackerIfNeeded(e)}flushAudioIfNeeded(e){if(this.media&&this.bufferedTrack){const{name:r,lang:n,assocLang:i,characteristics:s,audioCodec:o,channels:c}=this.bufferedTrack;Xv({name:r,lang:n,assocLang:i,characteristics:s,audioCodec:o,channels:c},e,xv)||(Gj(e.url,this.hls)?(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"),this.bufferedTrack=null):this.bufferedTrack=e)}}completeAudioSwitch(e){const{hls:r}=this;this.flushAudioIfNeeded(e),this.bufferedTrack=e,this.switchingTrack=null,r.trigger(Le.AUDIO_TRACK_SWITCHED,Uo({},e))}}class NF extends iA{constructor(e,r){super(r,e.logger),this.hls=void 0,this.canLoad=!1,this.timer=-1,this.hls=e}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){this.timer!==-1&&(self.clearTimeout(this.timer),this.timer=-1)}startLoad(){this.canLoad=!0,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(e,r,n){const i=r?.renditionReports;if(i){let s=-1;for(let o=0;o<i.length;o++){const c=i[o];let u;try{u=new self.URL(c.URI,r.url).href}catch(l){this.warn(`Could not construct new URL for Rendition Report: ${l}`),u=c.URI||""}if(u===e){s=o;break}else u===e.substring(0,u.length)&&(s=o)}if(s!==-1){const o=i[s],c=parseInt(o["LAST-MSN"])||r.lastPartSn;let u=parseInt(o["LAST-PART"])||r.lastPartIndex;if(this.hls.config.lowLatencyMode){const d=Math.min(r.age-r.partTarget,r.targetduration);u>=0&&d>r.partTarget&&(u+=1)}const l=n&&fK(n);return new AK(c,u>=0?u:void 0,l)}}}loadPlaylist(e){this.clearTimer()}loadingPlaylist(e,r){this.clearTimer()}shouldLoadPlaylist(e){return this.canLoad&&!!e&&!!e.url&&(!e.details||e.details.live)}getUrlWithDirectives(e,r){if(r)try{return r.addDirectives(e)}catch(n){this.warn(`Could not construct new URL with HLS Delivery Directives: ${n}`)}return e}playlistLoaded(e,r,n){const{details:i,stats:s}=r,o=self.performance.now(),c=s.loading.first?Math.max(0,o-s.loading.first):0;i.advancedDateTime=Date.now()-c;const u=this.hls.config.timelineOffset;if(u!==i.appliedTimelineOffset){const d=Math.max(u||0,0);i.appliedTimelineOffset=d,i.fragments.forEach(f=>{f.setStart(f.playlistOffset+d)})}if(i.live||n!=null&&n.live){const d="levelInfo"in r?r.levelInfo:r.track;if(i.reloaded(n),n&&i.fragments.length>0){X7e(n,i,this);const E=i.playlistParsingError;if(E){this.warn(E);const T=this.hls;if(!T.config.ignorePlaylistParsingErrors){var l;const{networkDetails:C}=r;T.trigger(Le.ERROR,{type:Oi.NETWORK_ERROR,details:vr.LEVEL_PARSING_ERROR,fatal:!1,url:i.url,error:E,reason:E.message,level:r.level||void 0,parent:(l=i.fragments[0])==null?void 0:l.type,networkDetails:C,stats:s});return}i.playlistParsingError=null}}i.requestScheduled===-1&&(i.requestScheduled=s.loading.start);const f=this.hls.mainForwardBufferInfo,A=f?f.end-f.len:0,p=(i.edge-A)*1e3,g=Eie(i,p);if(i.requestScheduled+g<o?i.requestScheduled=o:i.requestScheduled+=g,this.log(`live playlist ${e} ${i.advanced?"REFRESHED "+i.lastPartSn+"-"+i.lastPartIndex:i.updated?"UPDATED":"MISSED"}`),!this.canLoad||!i.live)return;let y,x,w;if(i.canBlockReload&&i.endSN&&i.advanced){const E=this.hls.config.lowLatencyMode,T=i.lastPartSn,C=i.endSN,N=i.lastPartIndex,I=N!==-1,U=T===C;I?U?(x=C+1,w=E?0:N):(x=T,w=E?N+1:i.maxPartIndex):x=C+1;const K=i.age,Y=K+i.ageHeader;let re=Math.min(Y-i.partTarget,i.targetduration*1.5);if(re>0){if(Y>i.targetduration*3)this.log(`Playlist last advanced ${K.toFixed(2)}s ago. Omitting segment and part directives.`),x=void 0,w=void 0;else if(n!=null&&n.tuneInGoal&&Y-i.partTarget>n.tuneInGoal)this.warn(`CDN Tune-in goal increased from: ${n.tuneInGoal} to: ${re} with playlist age: ${i.age}`),re=0;else{const se=Math.floor(re/i.targetduration);if(x+=se,w!==void 0){const Ae=Math.round(re%i.targetduration/i.partTarget);w+=Ae}this.log(`CDN Tune-in age: ${i.ageHeader}s last advanced ${K.toFixed(2)}s goal: ${re} skip sn ${se} to part ${w}`)}i.tuneInGoal=re}if(y=this.getDeliveryDirectives(i,r.deliveryDirectives,x,w),E||!U){i.requestScheduled=o,this.loadingPlaylist(d,y);return}}else(i.canBlockReload||i.canSkipUntil)&&(y=this.getDeliveryDirectives(i,r.deliveryDirectives,x,w));y&&x!==void 0&&i.canBlockReload&&(i.requestScheduled=s.loading.first+Math.max(g-c*2,g/2)),this.scheduleLoading(d,y,i)}else this.clearTimer()}scheduleLoading(e,r,n){const i=n||e.details;if(!i){this.loadingPlaylist(e,r);return}const s=self.performance.now(),o=i.requestScheduled;if(s>=o){this.loadingPlaylist(e,r);return}const c=o-s;this.log(`reload live playlist ${e.name||e.bitrate+"bps"} in ${Math.round(c)} ms`),this.clearTimer(),this.timer=self.setTimeout(()=>this.loadingPlaylist(e,r),c)}getDeliveryDirectives(e,r,n,i){let s=fK(e);return r!=null&&r.skip&&e.deltaUpdateFailed&&(n=r.msn,i=r.part,s=oT.No),new AK(n,i,s)}checkRetry(e){const r=e.details,n=Wj(e),i=e.errorAction,{action:s,retryCount:o=0,retryConfig:c}=i||{},u=!!i&&!!c&&(s===Fd.RetryRequest||!i.resolved&&s===Fd.SendAlternateToPenaltyBox);if(u){var l;if(o>=c.maxNumRetry)return!1;if(n&&(l=e.context)!=null&&l.deliveryDirectives)this.warn(`Retrying playlist loading ${o+1}/${c.maxNumRetry} after "${r}" without delivery-directives`),this.loadPlaylist();else{const d=pF(c,o);this.clearTimer(),this.timer=self.setTimeout(()=>this.loadPlaylist(),d),this.warn(`Retrying playlist loading ${o+1}/${c.maxNumRetry} after "${r}" in ${d}ms`)}e.levelRetry=!0,i.resolved=!0}return u}}function Yie(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(!s2(t[r].attrs,e[r].attrs))return!1;return!0}function s2(t,e,r){const n=t["STABLE-RENDITION-ID"];return n&&!r?n===e["STABLE-RENDITION-ID"]:!(r||["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED","ASSOC-LANGUAGE"]).some(i=>t[i]!==e[i])}function mO(t,e){return e.label.toLowerCase()===t.name.toLowerCase()&&(!e.language||e.language.toLowerCase()===(t.lang||"").toLowerCase())}class a9e extends NF{constructor(e){super(e,"audio-track-controller"),this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){const{hls:e}=this;e.on(Le.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Le.MANIFEST_PARSED,this.onManifestParsed,this),e.on(Le.LEVEL_LOADING,this.onLevelLoading,this),e.on(Le.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(Le.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(Le.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(Le.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Le.MANIFEST_PARSED,this.onManifestParsed,this),e.off(Le.LEVEL_LOADING,this.onLevelLoading,this),e.off(Le.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(Le.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(Le.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.tracksInGroup=[],this.groupIds=null,this.currentTrack=null,this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(e,r){this.tracks=r.audioTracks||[]}onAudioTrackLoaded(e,r){const{id:n,groupId:i,details:s}=r,o=this.tracksInGroup[n];if(!o||o.groupId!==i){this.warn(`Audio track with id:${n} and group:${i} not found in active group ${o?.groupId}`);return}const c=o.details;o.details=r.details,this.log(`Audio track ${n} "${o.name}" lang:${o.lang} group:${i} loaded [${s.startSN}-${s.endSN}]`),n===this.trackId&&this.playlistLoaded(n,r,c)}onLevelLoading(e,r){this.switchLevel(r.level)}onLevelSwitching(e,r){this.switchLevel(r.level)}switchLevel(e){const r=this.hls.levels[e];if(!r)return;const n=r.audioGroups||null,i=this.groupIds;let s=this.currentTrack;if(!n||i?.length!==n?.length||n!=null&&n.some(c=>i?.indexOf(c)===-1)){this.groupIds=n,this.trackId=-1,this.currentTrack=null;const c=this.tracks.filter(A=>!n||n.indexOf(A.groupId)!==-1);if(c.length)this.selectDefaultTrack&&!c.some(A=>A.default)&&(this.selectDefaultTrack=!1),c.forEach((A,p)=>{A.id=p});else if(!s&&!this.tracksInGroup.length)return;this.tracksInGroup=c;const u=this.hls.config.audioPreference;if(!s&&u){const A=Om(u,c,xv);if(A>-1)s=c[A];else{const p=Om(u,this.tracks);s=this.tracks[p]}}let l=this.findTrackId(s);l===-1&&s&&(l=this.findTrackId(null));const d={audioTracks:c};this.log(`Updating audio tracks, ${c.length} track(s) found in group(s): ${n?.join(",")}`),this.hls.trigger(Le.AUDIO_TRACKS_UPDATED,d);const f=this.trackId;if(l!==-1&&f===-1)this.setAudioTrack(l);else if(c.length&&f===-1){var o;const A=new Error(`No audio track selected for current audio group-ID(s): ${(o=this.groupIds)==null?void 0:o.join(",")} track count: ${c.length}`);this.warn(A.message),this.hls.trigger(Le.ERROR,{type:Oi.MEDIA_ERROR,details:vr.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:A})}}}onError(e,r){r.fatal||!r.context||r.context.type===xa.AUDIO_TRACK&&r.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(r.context.groupId)!==-1)&&this.checkRetry(r)}get allAudioTracks(){return this.tracks}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}setAudioOption(e){const r=this.hls;if(r.config.audioPreference=e,e){const n=this.allAudioTracks;if(this.selectDefaultTrack=!1,n.length){const i=this.currentTrack;if(i&&Xv(e,i,xv))return i;const s=Om(e,this.tracksInGroup,xv);if(s>-1){const o=this.tracksInGroup[s];return this.setAudioTrack(s),o}else if(i){let o=r.loadLevel;o===-1&&(o=r.firstAutoLevel);const c=v7e(e,r.levels,n,o,xv);if(c===-1)return null;r.nextLoadLevel=c}if(e.channels||e.audioCodec){const o=Om(e,n);if(o>-1)return n[o]}}}return null}setAudioTrack(e){const r=this.tracksInGroup;if(e<0||e>=r.length){this.warn(`Invalid audio track id: ${e}`);return}this.selectDefaultTrack=!1;const n=this.currentTrack,i=r[e],s=i.details&&!i.details.live;if(e===this.trackId&&i===n&&s||(this.log(`Switching to audio-track ${e} "${i.name}" lang:${i.lang} group:${i.groupId} channels:${i.channels}`),this.trackId=e,this.currentTrack=i,this.hls.trigger(Le.AUDIO_TRACK_SWITCHING,Uo({},i)),s))return;const o=this.switchParams(i.url,n?.details,i.details);this.loadPlaylist(o)}findTrackId(e){const r=this.tracksInGroup;for(let n=0;n<r.length;n++){const i=r[n];if(!(this.selectDefaultTrack&&!i.default)&&(!e||Xv(e,i,xv)))return n}if(e){const{name:n,lang:i,assocLang:s,characteristics:o,audioCodec:c,channels:u}=e;for(let l=0;l<r.length;l++){const d=r[l];if(Xv({name:n,lang:i,assocLang:s,characteristics:o,audioCodec:c,channels:u},d,xv))return l}for(let l=0;l<r.length;l++){const d=r[l];if(s2(e.attrs,d.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return l}for(let l=0;l<r.length;l++){const d=r[l];if(s2(e.attrs,d.attrs,["LANGUAGE"]))return l}}return-1}loadPlaylist(e){super.loadPlaylist();const r=this.currentTrack;this.shouldLoadPlaylist(r)&&Gj(r.url,this.hls)&&this.scheduleLoading(r,e)}loadingPlaylist(e,r){super.loadingPlaylist(e,r);const n=e.id,i=e.groupId,s=this.getUrlWithDirectives(e.url,r),o=e.details,c=o?.age;this.log(`Loading audio-track ${n} "${e.name}" lang:${e.lang} group:${i}${r?.msn!==void 0?" at sn "+r.msn+" part "+r.part:""}${c&&o.live?" age "+c.toFixed(1)+(o.type&&" "+o.type||""):""} ${s}`),this.hls.trigger(Le.AUDIO_TRACK_LOADING,{url:s,id:n,groupId:i,deliveryDirectives:r||null,track:e})}}class o9e{constructor(e){this.tracks=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.tracks=e}destroy(){this.tracks=this.queues=null}append(e,r,n){if(this.queues===null||this.tracks===null)return;const i=this.queues[r];i.push(e),i.length===1&&!n&&this.executeNext(r)}appendBlocker(e){return new Promise(r=>{const n={label:"async-blocker",execute:r,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.append(n,e)})}prependBlocker(e){return new Promise(r=>{if(this.queues){const n={label:"async-blocker-prepend",execute:r,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.queues[e].unshift(n)}})}removeBlockers(){this.queues!==null&&[this.queues.video,this.queues.audio,this.queues.audiovideo].forEach(e=>{var r;const n=(r=e[0])==null?void 0:r.label;(n==="async-blocker"||n==="async-blocker-prepend")&&(e[0].execute(),e.splice(0,1))})}unblockAudio(e){if(this.queues===null)return;this.queues.audio[0]===e&&this.shiftAndExecuteNext("audio")}executeNext(e){if(this.queues===null||this.tracks===null)return;const r=this.queues[e];if(r.length){const i=r[0];try{i.execute()}catch(s){var n;if(i.onError(s),this.queues===null||this.tracks===null)return;const o=(n=this.tracks[e])==null?void 0:n.buffer;o!=null&&o.updating||this.shiftAndExecuteNext(e)}}}shiftAndExecuteNext(e){this.queues!==null&&(this.queues[e].shift(),this.executeNext(e))}current(e){var r;return((r=this.queues)==null?void 0:r[e][0])||null}toString(){const{queues:e,tracks:r}=this;return e===null||r===null?"<destroyed>":`
${this.list("video")}
${this.list("audio")}
${this.list("audiovideo")}}`}list(e){var r,n;return(r=this.queues)!=null&&r[e]||(n=this.tracks)!=null&&n[e]?`${e}: (${this.listSbInfo(e)}) ${this.listOps(e)}`:""}listSbInfo(e){var r;const n=(r=this.tracks)==null?void 0:r[e],i=n?.buffer;return i?`SourceBuffer${i.updating?" updating":""}${n.ended?" ended":""}${n.ending?" ending":""}`:"none"}listOps(e){var r;return((r=this.queues)==null?void 0:r[e].map(n=>n.label).join(", "))||""}}const JK=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/,qie="HlsJsTrackRemovedError";class l9e extends Error{constructor(e){super(e),this.name=qie}}class c9e extends iA{constructor(e,r){super("buffer-controller",e.logger),this.hls=void 0,this.fragmentTracker=void 0,this.details=null,this._objectUrl=null,this.operationQueue=null,this.bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.blockedAudioAppend=null,this.lastVideoAppendEnd=0,this.appendSource=void 0,this.transferData=void 0,this.overrides=void 0,this.appendErrors={audio:0,video:0,audiovideo:0},this.tracks={},this.sourceBuffers=[[null,null],[null,null]],this._onEndStreaming=n=>{var i;this.hls&&((i=this.mediaSource)==null?void 0:i.readyState)==="open"&&this.hls.pauseBuffering()},this._onStartStreaming=n=>{this.hls&&this.hls.resumeBuffering()},this._onMediaSourceOpen=n=>{const{media:i,mediaSource:s}=this;n&&this.log("Media source opened"),!(!i||!s)&&(s.removeEventListener("sourceopen",this._onMediaSourceOpen),i.removeEventListener("emptied",this._onMediaEmptied),this.updateDuration(),this.hls.trigger(Le.MEDIA_ATTACHED,{media:i,mediaSource:s}),this.mediaSource!==null&&this.checkPendingTracks())},this._onMediaSourceClose=()=>{this.log("Media source closed")},this._onMediaSourceEnded=()=>{this.log("Media source ended")},this._onMediaEmptied=()=>{const{mediaSrc:n,_objectUrl:i}=this;n!==i&&this.error(`Media element src was set while attaching MediaSource (${i} > ${n})`)},this.hls=e,this.fragmentTracker=r,this.appendSource=I8e(D0(e.config.preferManagedMediaSource)),this.initTracks(),this.registerListeners()}hasSourceTypes(){return Object.keys(this.tracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.transferData=this.overrides=void 0,this.operationQueue&&(this.operationQueue.destroy(),this.operationQueue=null),this.hls=this.fragmentTracker=null,this._onMediaSourceOpen=this._onMediaSourceClose=null,this._onMediaSourceEnded=null,this._onStartStreaming=this._onEndStreaming=null}registerListeners(){const{hls:e}=this;e.on(Le.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(Le.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(Le.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Le.MANIFEST_PARSED,this.onManifestParsed,this),e.on(Le.BUFFER_RESET,this.onBufferReset,this),e.on(Le.BUFFER_APPENDING,this.onBufferAppending,this),e.on(Le.BUFFER_CODECS,this.onBufferCodecs,this),e.on(Le.BUFFER_EOS,this.onBufferEos,this),e.on(Le.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(Le.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(Le.FRAG_PARSED,this.onFragParsed,this),e.on(Le.FRAG_CHANGED,this.onFragChanged,this),e.on(Le.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(Le.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(Le.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(Le.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Le.MANIFEST_PARSED,this.onManifestParsed,this),e.off(Le.BUFFER_RESET,this.onBufferReset,this),e.off(Le.BUFFER_APPENDING,this.onBufferAppending,this),e.off(Le.BUFFER_CODECS,this.onBufferCodecs,this),e.off(Le.BUFFER_EOS,this.onBufferEos,this),e.off(Le.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(Le.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(Le.FRAG_PARSED,this.onFragParsed,this),e.off(Le.FRAG_CHANGED,this.onFragChanged,this),e.off(Le.ERROR,this.onError,this)}transferMedia(){const{media:e,mediaSource:r}=this;if(!e)return null;const n={};if(this.operationQueue){const s=this.isUpdating();s||this.operationQueue.removeBlockers();const o=this.isQueued();(s||o)&&this.warn(`Transfering MediaSource with${o?" operations in queue":""}${s?" updating SourceBuffer(s)":""} ${this.operationQueue}`),this.operationQueue.destroy()}const i=this.transferData;return!this.sourceBufferCount&&i&&i.mediaSource===r?nl(n,i.tracks):this.sourceBuffers.forEach(s=>{const[o]=s;o&&(n[o]=nl({},this.tracks[o]),this.removeBuffer(o)),s[0]=s[1]=null}),{media:e,mediaSource:r,tracks:n}}initTracks(){const e={};this.sourceBuffers=[[null,null],[null,null]],this.tracks=e,this.resetQueue(),this.resetAppendErrors(),this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.lastVideoAppendEnd=0}onManifestLoading(){this.bufferCodecEventsTotal=0,this.details=null}onManifestParsed(e,r){var n;let i=2;(r.audio&&!r.video||!r.altAudio)&&(i=1),this.bufferCodecEventsTotal=i,this.log(`${i} bufferCodec event(s) expected.`),(n=this.transferData)!=null&&n.mediaSource&&this.sourceBufferCount&&i&&this.bufferCreated()}onMediaAttaching(e,r){const n=this.media=r.media;this.transferData=this.overrides=void 0;const i=D0(this.appendSource);if(i){const s=!!r.mediaSource;(s||r.overrides)&&(this.transferData=r,this.overrides=r.overrides);const o=this.mediaSource=r.mediaSource||new i;if(this.assignMediaSource(o),s)this._objectUrl=n.src,this.attachTransferred();else{const c=this._objectUrl=self.URL.createObjectURL(o);if(this.appendSource)try{n.removeAttribute("src");const u=self.ManagedMediaSource;n.disableRemotePlayback=n.disableRemotePlayback||u&&o instanceof u,eG(n),u9e(n,c),n.load()}catch{n.src=c}else n.src=c}n.addEventListener("emptied",this._onMediaEmptied)}}assignMediaSource(e){var r,n;this.log(`${((r=this.transferData)==null?void 0:r.mediaSource)===e?"transferred":"created"} media source: ${(n=e.constructor)==null?void 0:n.name}`),e.addEventListener("sourceopen",this._onMediaSourceOpen),e.addEventListener("sourceended",this._onMediaSourceEnded),e.addEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(e.addEventListener("startstreaming",this._onStartStreaming),e.addEventListener("endstreaming",this._onEndStreaming))}attachTransferred(){const e=this.media,r=this.transferData;if(!r||!e)return;const n=this.tracks,i=r.tracks,s=i?Object.keys(i):null,o=s?s.length:0,c=()=>{Promise.resolve().then(()=>{this.media&&this.mediaSourceOpenOrEnded&&this._onMediaSourceOpen()})};if(i&&s&&o){if(!this.tracksReady){this.hls.config.startFragPrefetch=!0,this.log("attachTransferred: waiting for SourceBuffer track info");return}if(this.log(`attachTransferred: (bufferCodecEventsTotal ${this.bufferCodecEventsTotal})
required tracks: ${fl(n,(u,l)=>u==="initSegment"?void 0:l)};
transfer tracks: ${fl(i,(u,l)=>u==="initSegment"?void 0:l)}}`),!Kne(i,n)){r.mediaSource=null,r.tracks=void 0;const u=e.currentTime,l=this.details,d=Math.max(u,l?.fragments[0].start||0);if(d-u>1){this.log(`attachTransferred: waiting for playback to reach new tracks start time ${u} -> ${d}`);return}this.warn(`attachTransferred: resetting MediaSource for incompatible tracks ("${Object.keys(i)}"->"${Object.keys(n)}") start time: ${d} currentTime: ${u}`),this.onMediaDetaching(Le.MEDIA_DETACHING,{}),this.onMediaAttaching(Le.MEDIA_ATTACHING,r),e.currentTime=d;return}this.transferData=void 0,s.forEach(u=>{const l=u,d=i[l];if(d){const f=d.buffer;if(f){const A=this.fragmentTracker,p=d.id;if(A.hasFragments(p)||A.hasParts(p)){const x=Hs.getBuffered(f);A.detectEvictedFragments(l,x,p,null,!0)}const g=j4(l),y=[l,f];this.sourceBuffers[g]=y,f.updating&&this.operationQueue&&this.operationQueue.prependBlocker(l),this.trackSourceBuffer(l,d)}}}),c(),this.bufferCreated()}else this.log("attachTransferred: MediaSource w/o SourceBuffers"),c()}get mediaSourceOpenOrEnded(){var e;const r=(e=this.mediaSource)==null?void 0:e.readyState;return r==="open"||r==="ended"}onMediaDetaching(e,r){const n=!!r.transferMedia;this.transferData=this.overrides=void 0;const{media:i,mediaSource:s,_objectUrl:o}=this;if(s){if(this.log(`media source ${n?"transferring":"detaching"}`),n)this.sourceBuffers.forEach(([c])=>{c&&this.removeBuffer(c)}),this.resetQueue();else{if(this.mediaSourceOpenOrEnded){const c=s.readyState==="open";try{const u=s.sourceBuffers;for(let l=u.length;l--;)c&&u[l].abort(),s.removeSourceBuffer(u[l]);c&&s.endOfStream()}catch(u){this.warn(`onMediaDetaching: ${u.message} while calling endOfStream`)}}this.sourceBufferCount&&this.onBufferReset()}s.removeEventListener("sourceopen",this._onMediaSourceOpen),s.removeEventListener("sourceended",this._onMediaSourceEnded),s.removeEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(s.removeEventListener("startstreaming",this._onStartStreaming),s.removeEventListener("endstreaming",this._onEndStreaming)),this.mediaSource=null,this._objectUrl=null}i&&(i.removeEventListener("emptied",this._onMediaEmptied),n||(o&&self.URL.revokeObjectURL(o),this.mediaSrc===o?(i.removeAttribute("src"),this.appendSource&&eG(i),i.load()):this.warn("media|source.src was changed by a third party - skip cleanup")),this.media=null),this.hls.trigger(Le.MEDIA_DETACHED,r)}onBufferReset(){this.sourceBuffers.forEach(([e])=>{e&&this.resetBuffer(e)}),this.initTracks()}resetBuffer(e){var r;const n=(r=this.tracks[e])==null?void 0:r.buffer;if(this.removeBuffer(e),n)try{var i;(i=this.mediaSource)!=null&&i.sourceBuffers.length&&this.mediaSource.removeSourceBuffer(n)}catch(s){this.warn(`onBufferReset ${e}`,s)}delete this.tracks[e]}removeBuffer(e){this.removeBufferListeners(e),this.sourceBuffers[j4(e)]=[null,null];const r=this.tracks[e];r&&(r.buffer=void 0)}resetQueue(){this.operationQueue&&this.operationQueue.destroy(),this.operationQueue=new o9e(this.tracks)}onBufferCodecs(e,r){var n;const i=this.tracks,s=Object.keys(r);this.log(`BUFFER_CODECS: "${s}" (current SB count ${this.sourceBufferCount})`);const o="audiovideo"in r&&(i.audio||i.video)||i.audiovideo&&("audio"in r||"video"in r),c=!o&&this.sourceBufferCount&&this.media&&s.some(u=>!i[u]);if(o||c){this.warn(`Unsupported transition between "${Object.keys(i)}" and "${s}" SourceBuffers`);return}s.forEach(u=>{var l,d;const f=r[u],{id:A,codec:p,levelCodec:g,container:y,metadata:x,supplemental:w}=f;let E=i[u];const T=(l=this.transferData)==null||(l=l.tracks)==null?void 0:l[u],C=T!=null&&T.buffer?T:E,N=C?.pendingCodec||C?.codec,I=C?.levelCodec;E||(E=i[u]={buffer:void 0,listeners:[],codec:p,supplemental:w,container:y,levelCodec:g,metadata:x,id:A});const U=aT(N,I),K=U?.replace(JK,"$1");let Y=aT(p,g);const re=(d=Y)==null?void 0:d.replace(JK,"$1");Y&&U&&K!==re&&(u.slice(0,5)==="audio"&&(Y=zj(Y,this.appendSource)),this.log(`switching codec ${N} to ${Y}`),Y!==(E.pendingCodec||E.codec)&&(E.pendingCodec=Y),E.container=y,this.appendChangeType(u,y,Y))}),(this.tracksReady||this.sourceBufferCount)&&(r.tracks=this.sourceBufferTracks),!this.sourceBufferCount&&(this.bufferCodecEventsTotal>1&&!this.tracks.video&&!r.video&&((n=r.audio)==null?void 0:n.id)==="main"&&(this.log("Main audio-only"),this.bufferCodecEventsTotal=1),this.mediaSourceOpenOrEnded&&this.checkPendingTracks())}get sourceBufferTracks(){return Object.keys(this.tracks).reduce((e,r)=>{const n=this.tracks[r];return e[r]={id:n.id,container:n.container,codec:n.codec,levelCodec:n.levelCodec},e},{})}appendChangeType(e,r,n){const i=`${r};codecs=${n}`,s={label:`change-type=${i}`,execute:()=>{const o=this.tracks[e];if(o){const c=o.buffer;c!=null&&c.changeType&&(this.log(`changing ${e} sourceBuffer type to ${i}`),c.changeType(i),o.codec=n,o.container=r)}this.shiftAndExecuteNext(e)},onStart:()=>{},onComplete:()=>{},onError:o=>{this.warn(`Failed to change ${e} SourceBuffer type`,o)}};this.append(s,e,this.isPending(this.tracks[e]))}blockAudio(e){var r;const n=e.start,i=n+e.duration*.05;if(((r=this.fragmentTracker.getAppendedFrag(n,fi.MAIN))==null?void 0:r.gap)===!0)return;const o={label:"block-audio",execute:()=>{var c;const u=this.tracks.video;(this.lastVideoAppendEnd>i||u!=null&&u.buffer&&Hs.isBuffered(u.buffer,i)||((c=this.fragmentTracker.getAppendedFrag(i,fi.MAIN))==null?void 0:c.gap)===!0)&&(this.blockedAudioAppend=null,this.shiftAndExecuteNext("audio"))},onStart:()=>{},onComplete:()=>{},onError:c=>{this.warn("Error executing block-audio operation",c)}};this.blockedAudioAppend={op:o,frag:e},this.append(o,"audio",!0)}unblockAudio(){const{blockedAudioAppend:e,operationQueue:r}=this;e&&r&&(this.blockedAudioAppend=null,r.unblockAudio(e.op))}onBufferAppending(e,r){const{tracks:n}=this,{data:i,type:s,parent:o,frag:c,part:u,chunkMeta:l,offset:d}=r,f=l.buffering[s],{sn:A,cc:p}=c,g=self.performance.now();f.start=g;const y=c.stats.buffering,x=u?u.stats.buffering:null;y.start===0&&(y.start=g),x&&x.start===0&&(x.start=g);const w=n.audio;let E=!1;s==="audio"&&w?.container==="audio/mpeg"&&(E=!this.lastMpegAudioChunk||l.id===1||this.lastMpegAudioChunk.sn!==l.sn,this.lastMpegAudioChunk=l);const T=n.video,C=T?.buffer;if(C&&A!=="initSegment"){const U=u||c,K=this.blockedAudioAppend;if(s==="audio"&&o!=="main"&&!this.blockedAudioAppend&&!(T.ending||T.ended)){const re=U.start+U.duration*.05,se=C.buffered,Ae=this.currentOp("video");!se.length&&!Ae?this.blockAudio(U):!Ae&&!Hs.isBuffered(C,re)&&this.lastVideoAppendEnd<re&&this.blockAudio(U)}else if(s==="video"){const Y=U.end;if(K){const re=K.frag.start;(Y>re||Y<this.lastVideoAppendEnd||Hs.isBuffered(C,re))&&this.unblockAudio()}this.lastVideoAppendEnd=Y}}const N=(u||c).start,I={label:`append-${s}`,execute:()=>{var U;f.executeStart=self.performance.now();const K=(U=this.tracks[s])==null?void 0:U.buffer;K&&(E?this.updateTimestampOffset(K,N,.1,s,A,p):d!==void 0&&qn(d)&&this.updateTimestampOffset(K,d,1e-6,s,A,p)),this.appendExecutor(i,s)},onStart:()=>{},onComplete:()=>{const U=self.performance.now();f.executeEnd=f.end=U,y.first===0&&(y.first=U),x&&x.first===0&&(x.first=U);const K={};this.sourceBuffers.forEach(([Y,re])=>{Y&&(K[Y]=Hs.getBuffered(re))}),this.appendErrors[s]=0,s==="audio"||s==="video"?this.appendErrors.audiovideo=0:(this.appendErrors.audio=0,this.appendErrors.video=0),this.hls.trigger(Le.BUFFER_APPENDED,{type:s,frag:c,part:u,chunkMeta:l,parent:c.type,timeRanges:K})},onError:U=>{var K;const Y={type:Oi.MEDIA_ERROR,parent:c.type,details:vr.BUFFER_APPEND_ERROR,sourceBufferName:s,frag:c,part:u,chunkMeta:l,error:U,err:U,fatal:!1},re=(K=this.media)==null?void 0:K.error;if(U.code===DOMException.QUOTA_EXCEEDED_ERR||U.name=="QuotaExceededError"||"quota"in U)Y.details=vr.BUFFER_FULL_ERROR;else if(U.code===DOMException.INVALID_STATE_ERR&&this.mediaSourceOpenOrEnded&&!re)Y.errorAction=Ab(!0);else if(U.name===qie&&this.sourceBufferCount===0)Y.errorAction=Ab(!0);else{const se=++this.appendErrors[s];this.warn(`Failed ${se}/${this.hls.config.appendErrorMaxRetry} times to append segment in "${s}" sourceBuffer (${re||"no media error"})`),(se>=this.hls.config.appendErrorMaxRetry||re)&&(Y.fatal=!0)}this.hls.trigger(Le.ERROR,Y)}};this.log(`queuing "${s}" append sn: ${A}${u?" p: "+u.index:""} of ${c.type===fi.MAIN?"level":"track"} ${c.level} cc: ${p}`),this.append(I,s,this.isPending(this.tracks[s]))}getFlushOp(e,r,n){return this.log(`queuing "${e}" remove ${r}-${n}`),{label:"remove",execute:()=>{this.removeExecutor(e,r,n)},onStart:()=>{},onComplete:()=>{this.hls.trigger(Le.BUFFER_FLUSHED,{type:e})},onError:i=>{this.warn(`Failed to remove ${r}-${n} from "${e}" SourceBuffer`,i)}}}onBufferFlushing(e,r){const{type:n,startOffset:i,endOffset:s}=r;n?this.append(this.getFlushOp(n,i,s),n):this.sourceBuffers.forEach(([o])=>{o&&this.append(this.getFlushOp(o,i,s),o)})}onFragParsed(e,r){const{frag:n,part:i}=r,s=[],o=i?i.elementaryStreams:n.elementaryStreams;o[cl.AUDIOVIDEO]?s.push("audiovideo"):(o[cl.AUDIO]&&s.push("audio"),o[cl.VIDEO]&&s.push("video"));const c=()=>{const u=self.performance.now();n.stats.buffering.end=u,i&&(i.stats.buffering.end=u);const l=i?i.stats:n.stats;this.hls.trigger(Le.FRAG_BUFFERED,{frag:n,part:i,stats:l,id:n.type})};s.length===0&&this.warn(`Fragments must have at least one ElementaryStreamType set. type: ${n.type} level: ${n.level} sn: ${n.sn}`),this.blockBuffers(c,s).catch(u=>{this.warn(`Fragment buffered callback ${u}`),this.stepOperationQueue(this.sourceBufferTypes)})}onFragChanged(e,r){this.trimBuffers()}get bufferedToEnd(){return this.sourceBufferCount>0&&!this.sourceBuffers.some(([e])=>{if(e){const r=this.tracks[e];if(r)return!r.ended||r.ending}return!1})}onBufferEos(e,r){var n;this.sourceBuffers.forEach(([o])=>{if(o){const c=this.tracks[o];(!r.type||r.type===o)&&(c.ending=!0,c.ended||(c.ended=!0,this.log(`${o} buffer reached EOS`)))}});const i=((n=this.overrides)==null?void 0:n.endOfStream)!==!1;this.sourceBufferCount>0&&!this.sourceBuffers.some(([o])=>{var c;return o&&!((c=this.tracks[o])!=null&&c.ended)})?i?(this.log("Queueing EOS"),this.blockUntilOpen(()=>{this.tracksEnded();const{mediaSource:o}=this;if(!o||o.readyState!=="open"){o&&this.log(`Could not call mediaSource.endOfStream(). mediaSource.readyState: ${o.readyState}`);return}this.log("Calling mediaSource.endOfStream()"),o.endOfStream(),this.hls.trigger(Le.BUFFERED_TO_END,void 0)})):(this.tracksEnded(),this.hls.trigger(Le.BUFFERED_TO_END,void 0)):r.type==="video"&&this.unblockAudio()}tracksEnded(){this.sourceBuffers.forEach(([e])=>{if(e!==null){const r=this.tracks[e];r&&(r.ending=!1)}})}onLevelUpdated(e,{details:r}){r.fragments.length&&(this.details=r,this.updateDuration())}updateDuration(){this.blockUntilOpen(()=>{const e=this.getDurationAndRange();e&&this.updateMediaSource(e)})}onError(e,r){if(r.details===vr.BUFFER_APPEND_ERROR&&r.frag){var n;const i=(n=r.errorAction)==null?void 0:n.nextAutoLevel;qn(i)&&i!==r.frag.level&&this.resetAppendErrors()}}resetAppendErrors(){this.appendErrors={audio:0,video:0,audiovideo:0}}trimBuffers(){const{hls:e,details:r,media:n}=this;if(!n||r===null||!this.sourceBufferCount)return;const i=e.config,s=n.currentTime,o=r.levelTargetDuration,c=r.live&&i.liveBackBufferLength!==null?i.liveBackBufferLength:i.backBufferLength;if(qn(c)&&c>=0){const l=Math.max(c,o),d=Math.floor(s/o)*o-l;this.flushBackBuffer(s,o,d)}const u=i.frontBufferFlushThreshold;if(qn(u)&&u>0){const l=Math.max(i.maxBufferLength,u),d=Math.max(l,o),f=Math.floor(s/o)*o+d;this.flushFrontBuffer(s,o,f)}}flushBackBuffer(e,r,n){this.sourceBuffers.forEach(([i,s])=>{if(s){const c=Hs.getBuffered(s);if(c.length>0&&n>c.start(0)){var o;this.hls.trigger(Le.BACK_BUFFER_REACHED,{bufferEnd:n});const u=this.tracks[i];if((o=this.details)!=null&&o.live)this.hls.trigger(Le.LIVE_BACK_BUFFER_REACHED,{bufferEnd:n});else if(u!=null&&u.ended){this.log(`Cannot flush ${i} back buffer while SourceBuffer is in ended state`);return}this.hls.trigger(Le.BUFFER_FLUSHING,{startOffset:0,endOffset:n,type:i})}}})}flushFrontBuffer(e,r,n){this.sourceBuffers.forEach(([i,s])=>{if(s){const o=Hs.getBuffered(s),c=o.length;if(c<2)return;const u=o.start(c-1),l=o.end(c-1);if(n>u||e>=u&&e<=l)return;this.hls.trigger(Le.BUFFER_FLUSHING,{startOffset:u,endOffset:1/0,type:i})}})}getDurationAndRange(){var e;const{details:r,mediaSource:n}=this;if(!r||!this.media||n?.readyState!=="open")return null;const i=r.edge;if(r.live&&this.hls.config.liveDurationInfinity){if(r.fragments.length&&n.setLiveSeekableRange){const l=Math.max(0,r.fragmentStart),d=Math.max(l,i);return{duration:1/0,start:l,end:d}}return{duration:1/0}}const s=(e=this.overrides)==null?void 0:e.duration;if(s)return qn(s)?{duration:s}:null;const o=this.media.duration,c=qn(n.duration)?n.duration:0;return i>c&&i>o||!qn(o)?{duration:i}:null}updateMediaSource({duration:e,start:r,end:n}){const i=this.mediaSource;!this.media||!i||i.readyState!=="open"||(i.duration!==e&&(qn(e)&&this.log(`Updating MediaSource duration to ${e.toFixed(3)}`),i.duration=e),r!==void 0&&n!==void 0&&(this.log(`MediaSource duration is set to ${i.duration}. Setting seekable range to ${r}-${n}.`),i.setLiveSeekableRange(r,n)))}get tracksReady(){const e=this.pendingTrackCount;return e>0&&(e>=this.bufferCodecEventsTotal||this.isPending(this.tracks.audiovideo))}checkPendingTracks(){const{bufferCodecEventsTotal:e,pendingTrackCount:r,tracks:n}=this;if(this.log(`checkPendingTracks (pending: ${r} codec events expected: ${e}) ${fl(n)}`),this.tracksReady){var i;const s=(i=this.transferData)==null?void 0:i.tracks;s&&Object.keys(s).length?this.attachTransferred():this.createSourceBuffers()}}bufferCreated(){if(this.sourceBufferCount){const e={};this.sourceBuffers.forEach(([r,n])=>{if(r){const i=this.tracks[r];e[r]={buffer:n,container:i.container,codec:i.codec,supplemental:i.supplemental,levelCodec:i.levelCodec,id:i.id,metadata:i.metadata}}}),this.hls.trigger(Le.BUFFER_CREATED,{tracks:e}),this.log(`SourceBuffers created. Running queue: ${this.operationQueue}`),this.sourceBuffers.forEach(([r])=>{this.executeNext(r)})}else{const e=new Error("could not create source buffer for media codec(s)");this.hls.trigger(Le.ERROR,{type:Oi.MEDIA_ERROR,details:vr.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:e,reason:e.message})}}createSourceBuffers(){const{tracks:e,sourceBuffers:r,mediaSource:n}=this;if(!n)throw new Error("createSourceBuffers called when mediaSource was null");for(const s in e){const o=s,c=e[o];if(this.isPending(c)){const u=this.getTrackCodec(c,o),l=`${c.container};codecs=${u}`;c.codec=u,this.log(`creating sourceBuffer(${l})${this.currentOp(o)?" Queued":""} ${fl(c)}`);try{const d=n.addSourceBuffer(l),f=j4(o),A=[o,d];r[f]=A,c.buffer=d}catch(d){var i;this.error(`error while trying to add sourceBuffer: ${d.message}`),this.shiftAndExecuteNext(o),(i=this.operationQueue)==null||i.removeBlockers(),delete this.tracks[o],this.hls.trigger(Le.ERROR,{type:Oi.MEDIA_ERROR,details:vr.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:d,sourceBufferName:o,mimeType:l,parent:c.id});return}this.trackSourceBuffer(o,c)}}this.bufferCreated()}getTrackCodec(e,r){const n=e.supplemental;let i=e.codec;n&&(r==="video"||r==="audiovideo")&&JE(n,"video")&&(i=J8e(i,n));const s=aT(i,e.levelCodec);return s?r.slice(0,5)==="audio"?zj(s,this.appendSource):s:""}trackSourceBuffer(e,r){const n=r.buffer;if(!n)return;const i=this.getTrackCodec(r,e);this.tracks[e]={buffer:n,codec:i,container:r.container,levelCodec:r.levelCodec,supplemental:r.supplemental,metadata:r.metadata,id:r.id,listeners:[]},this.removeBufferListeners(e),this.addBufferListener(e,"updatestart",this.onSBUpdateStart),this.addBufferListener(e,"updateend",this.onSBUpdateEnd),this.addBufferListener(e,"error",this.onSBUpdateError),this.appendSource&&this.addBufferListener(e,"bufferedchange",(s,o)=>{const c=o.removedRanges;c!=null&&c.length&&this.hls.trigger(Le.BUFFER_FLUSHED,{type:s})})}get mediaSrc(){var e,r;const n=((e=this.media)==null||(r=e.querySelector)==null?void 0:r.call(e,"source"))||this.media;return n?.src}onSBUpdateStart(e){const r=this.currentOp(e);r&&r.onStart()}onSBUpdateEnd(e){var r;if(((r=this.mediaSource)==null?void 0:r.readyState)==="closed"){this.resetBuffer(e);return}const n=this.currentOp(e);n&&(n.onComplete(),this.shiftAndExecuteNext(e))}onSBUpdateError(e,r){var n;const i=new Error(`${e} SourceBuffer error. MediaSource readyState: ${(n=this.mediaSource)==null?void 0:n.readyState}`);this.error(`${i}`,r),this.hls.trigger(Le.ERROR,{type:Oi.MEDIA_ERROR,details:vr.BUFFER_APPENDING_ERROR,sourceBufferName:e,error:i,fatal:!1});const s=this.currentOp(e);s&&s.onError(i)}updateTimestampOffset(e,r,n,i,s,o){const c=r-e.timestampOffset;Math.abs(c)>=n&&(this.log(`Updating ${i} SourceBuffer timestampOffset to ${r} (sn: ${s} cc: ${o})`),e.timestampOffset=r)}removeExecutor(e,r,n){const{media:i,mediaSource:s}=this,o=this.tracks[e],c=o?.buffer;if(!i||!s||!c){this.warn(`Attempting to remove from the ${e} SourceBuffer, but it does not exist`),this.shiftAndExecuteNext(e);return}const u=qn(i.duration)?i.duration:1/0,l=qn(s.duration)?s.duration:1/0,d=Math.max(0,r),f=Math.min(n,u,l);f>d&&(!o.ending||o.ended)?(o.ended=!1,this.log(`Removing [${d},${f}] from the ${e} SourceBuffer`),c.remove(d,f)):this.shiftAndExecuteNext(e)}appendExecutor(e,r){const n=this.tracks[r],i=n?.buffer;if(!i)throw new l9e(`Attempting to append to the ${r} SourceBuffer, but it does not exist`);n.ending=!1,n.ended=!1,i.appendBuffer(e)}blockUntilOpen(e){if(this.isUpdating()||this.isQueued())this.blockBuffers(e).catch(r=>{this.warn(`SourceBuffer blocked callback ${r}`),this.stepOperationQueue(this.sourceBufferTypes)});else try{e()}catch(r){this.warn(`Callback run without blocking ${this.operationQueue} ${r}`)}}isUpdating(){return this.sourceBuffers.some(([e,r])=>e&&r.updating)}isQueued(){return this.sourceBuffers.some(([e])=>e&&!!this.currentOp(e))}isPending(e){return!!e&&!e.buffer}blockBuffers(e,r=this.sourceBufferTypes){if(!r.length)return this.log("Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(e);const{operationQueue:n}=this,i=r.map(o=>this.appendBlocker(o));return r.length>1&&this.blockedAudioAppend&&this.unblockAudio(),Promise.all(i).then(o=>{n===this.operationQueue&&(e(),this.stepOperationQueue(this.sourceBufferTypes))})}stepOperationQueue(e){e.forEach(r=>{var n;const i=(n=this.tracks[r])==null?void 0:n.buffer;!i||i.updating||this.shiftAndExecuteNext(r)})}append(e,r,n){this.operationQueue&&this.operationQueue.append(e,r,n)}appendBlocker(e){if(this.operationQueue)return this.operationQueue.appendBlocker(e)}currentOp(e){return this.operationQueue?this.operationQueue.current(e):null}executeNext(e){e&&this.operationQueue&&this.operationQueue.executeNext(e)}shiftAndExecuteNext(e){this.operationQueue&&this.operationQueue.shiftAndExecuteNext(e)}get pendingTrackCount(){return Object.keys(this.tracks).reduce((e,r)=>e+(this.isPending(this.tracks[r])?1:0),0)}get sourceBufferCount(){return this.sourceBuffers.reduce((e,[r])=>e+(r?1:0),0)}get sourceBufferTypes(){return this.sourceBuffers.map(([e])=>e).filter(e=>!!e)}addBufferListener(e,r,n){const i=this.tracks[e];if(!i)return;const s=i.buffer;if(!s)return;const o=n.bind(this,e);i.listeners.push({event:r,listener:o}),s.addEventListener(r,o)}removeBufferListeners(e){const r=this.tracks[e];if(!r)return;const n=r.buffer;n&&(r.listeners.forEach(i=>{n.removeEventListener(i.event,i.listener)}),r.listeners.length=0)}}function eG(t){const e=t.querySelectorAll("source");[].slice.call(e).forEach(r=>{t.removeChild(r)})}function u9e(t,e){const r=self.document.createElement("source");r.type="video/mp4",r.src=e,t.appendChild(r)}function j4(t){return t==="audio"?1:0}class F5{constructor(e){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(e){this.streamController=e}destroy(){this.hls&&this.unregisterListener(),this.timer&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){const{hls:e}=this;e.on(Le.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(Le.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(Le.MANIFEST_PARSED,this.onManifestParsed,this),e.on(Le.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(Le.BUFFER_CODECS,this.onBufferCodecs,this),e.on(Le.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){const{hls:e}=this;e.off(Le.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(Le.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(Le.MANIFEST_PARSED,this.onManifestParsed,this),e.off(Le.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(Le.BUFFER_CODECS,this.onBufferCodecs,this),e.off(Le.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(e,r){const n=this.hls.levels[r.droppedLevel];this.isLevelAllowed(n)&&this.restrictedLevels.push({bitrate:n.bitrate,height:n.height,width:n.width})}onMediaAttaching(e,r){this.media=r.media instanceof HTMLVideoElement?r.media:null,this.clientRect=null,this.timer&&this.hls.levels.length&&this.detectPlayerSize()}onManifestParsed(e,r){const n=this.hls;this.restrictedLevels=[],this.firstLevel=r.firstLevel,n.config.capLevelToPlayerSize&&r.video&&this.startCapping()}onLevelsUpdated(e,r){this.timer&&qn(this.autoLevelCapping)&&this.detectPlayerSize()}onBufferCodecs(e,r){this.hls.config.capLevelToPlayerSize&&r.video&&this.startCapping()}onMediaDetaching(){this.stopCapping(),this.media=null}detectPlayerSize(){if(this.media){if(this.mediaHeight<=0||this.mediaWidth<=0){this.clientRect=null;return}const e=this.hls.levels;if(e.length){const r=this.hls,n=this.getMaxLevel(e.length-1);n!==this.autoLevelCapping&&r.logger.log(`Setting autoLevelCapping to ${n}: ${e[n].height}p@${e[n].bitrate} for media ${this.mediaWidth}x${this.mediaHeight}`),r.autoLevelCapping=n,r.autoLevelEnabled&&r.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=r.autoLevelCapping}}}getMaxLevel(e){const r=this.hls.levels;if(!r.length)return-1;const n=r.filter((i,s)=>this.isLevelAllowed(i)&&s<=e);return this.clientRect=null,F5.getMaxLevelByMediaSize(n,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;const e=this.media,r={width:0,height:0};if(e){const n=e.getBoundingClientRect();r.width=n.width,r.height=n.height,!r.width&&!r.height&&(r.width=n.right-n.left||e.width||0,r.height=n.bottom-n.top||e.height||0)}return this.clientRect=r,r}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch{}return Math.min(e,this.hls.config.maxDevicePixelRatio)}isLevelAllowed(e){return!this.restrictedLevels.some(n=>e.bitrate===n.bitrate&&e.width===n.width&&e.height===n.height)}static getMaxLevelByMediaSize(e,r,n){if(!(e!=null&&e.length))return-1;const i=(c,u)=>u?c.width!==u.width||c.height!==u.height:!0;let s=e.length-1;const o=Math.max(r,n);for(let c=0;c<e.length;c+=1){const u=e[c];if((u.width>=o||u.height>=o)&&i(u,e[c+1])){s=c;break}}return s}}const d9e={MANIFEST:"m",AUDIO:"a",VIDEO:"v",MUXED:"av",INIT:"i",CAPTION:"c",TIMED_TEXT:"tt",KEY:"k",OTHER:"o"},Bh=d9e,h9e={HLS:"h"},f9e=h9e;class Ym{constructor(e,r){Array.isArray(e)&&(e=e.map(n=>n instanceof Ym?n:new Ym(n))),this.value=e,this.params=r}}const A9e="Dict";function m9e(t){return Array.isArray(t)?JSON.stringify(t):t instanceof Map?"Map{}":t instanceof Set?"Set{}":typeof t=="object"?JSON.stringify(t):String(t)}function p9e(t,e,r,n){return new Error(`failed to ${t} "${m9e(e)}" as ${r}`,{cause:n})}function qm(t,e,r){return p9e("serialize",t,e,r)}class Xie{constructor(e){this.description=e}}const tG="Bare Item",g9e="Boolean";function v9e(t){if(typeof t!="boolean")throw qm(t,g9e);return t?"?1":"?0"}function y9e(t){return btoa(String.fromCharCode(...t))}const x9e="Byte Sequence";function b9e(t){if(ArrayBuffer.isView(t)===!1)throw qm(t,x9e);return`:${y9e(t)}:`}const w9e="Integer";function E9e(t){return t<-999999999999999||999999999999999<t}function Zie(t){if(E9e(t))throw qm(t,w9e);return t.toString()}function _9e(t){return`@${Zie(t.getTime()/1e3)}`}function Jie(t,e){if(t<0)return-Jie(-t,e);const r=Math.pow(10,e);if(Math.abs(t*r%1-.5)<Number.EPSILON){const i=Math.floor(t*r);return(i%2===0?i:i+1)/r}else return Math.round(t*r)/r}const S9e="Decimal";function T9e(t){const e=Jie(t,3);if(Math.floor(Math.abs(e)).toString().length>12)throw qm(t,S9e);const r=e.toString();return r.includes(".")?r:`${r}.0`}const C9e="String",j9e=/[\x00-\x1f\x7f]+/;function N9e(t){if(j9e.test(t))throw qm(t,C9e);return`"${t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`}function k9e(t){return t.description||t.toString().slice(7,-1)}const I9e="Token";function rG(t){const e=k9e(t);if(/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(e)===!1)throw qm(e,I9e);return e}function pO(t){switch(typeof t){case"number":if(!qn(t))throw qm(t,tG);return Number.isInteger(t)?Zie(t):T9e(t);case"string":return N9e(t);case"symbol":return rG(t);case"boolean":return v9e(t);case"object":if(t instanceof Date)return _9e(t);if(t instanceof Uint8Array)return b9e(t);if(t instanceof Xie)return rG(t);default:throw qm(t,tG)}}const L9e="Key";function gO(t){if(/^[a-z*][a-z0-9\-_.*]*$/.test(t)===!1)throw qm(t,L9e);return t}function kF(t){return t==null?"":Object.entries(t).map(([e,r])=>r===!0?`;${gO(e)}`:`;${gO(e)}=${pO(r)}`).join("")}function ese(t){return t instanceof Ym?`${pO(t.value)}${kF(t.params)}`:pO(t)}function B9e(t){return`(${t.value.map(ese).join(" ")})${kF(t.params)}`}function P9e(t,e={whitespace:!0}){if(typeof t!="object"||t==null)throw qm(t,A9e);const r=t instanceof Map?t.entries():Object.entries(t),n=e?.whitespace?" ":"";return Array.from(r).map(([i,s])=>{s instanceof Ym||(s=new Ym(s));let o=gO(i);return s.value===!0?o+=kF(s.params):(o+="=",Array.isArray(s.value)?o+=B9e(s):o+=ese(s)),o}).join(`,${n}`)}function tse(t,e){return P9e(t,e)}const um="CMCD-Object",Nc="CMCD-Request",uv="CMCD-Session",zg="CMCD-Status",O9e={br:um,ab:um,d:um,ot:um,tb:um,tpb:um,lb:um,tab:um,lab:um,url:um,pb:Nc,bl:Nc,tbl:Nc,dl:Nc,ltc:Nc,mtp:Nc,nor:Nc,nrr:Nc,rc:Nc,sn:Nc,sta:Nc,su:Nc,ttfb:Nc,ttfbb:Nc,ttlb:Nc,cmsdd:Nc,cmsds:Nc,smrt:Nc,df:Nc,cs:Nc,ts:Nc,cid:uv,pr:uv,sf:uv,sid:uv,st:uv,v:uv,msd:uv,bs:zg,bsd:zg,cdn:zg,rtp:zg,bg:zg,pt:zg,ec:zg,e:zg},R9e={REQUEST:Nc};function D9e(t){return Object.keys(t).reduce((e,r)=>{var n;return(n=t[r])===null||n===void 0||n.forEach(i=>e[i]=r),e},{})}function M9e(t,e){const r={};if(!t)return r;const n=Object.keys(t),i=e?D9e(e):{};return n.reduce((s,o)=>{var c;const u=O9e[o]||i[o]||R9e.REQUEST,l=(c=s[u])!==null&&c!==void 0?c:s[u]={};return l[o]=t[o],s},r)}function F9e(t){return["ot","sf","st","e","sta"].includes(t)}function U9e(t){return typeof t=="number"?qn(t):t!=null&&t!==""&&t!==!1}const rse="event";function $9e(t,e){const r=new URL(t),n=new URL(e);if(r.origin!==n.origin)return t;const i=r.pathname.split("/").slice(1),s=n.pathname.split("/").slice(1,-1);for(;i[0]===s[0];)i.shift(),s.shift();for(;s.length;)s.shift(),i.unshift("..");return i.join("/")+r.search+r.hash}const dT=t=>Math.round(t),vO=(t,e)=>Array.isArray(t)?t.map(r=>vO(r,e)):t instanceof Ym&&typeof t.value=="string"?new Ym(vO(t.value,e),t.params):(e.baseUrl&&(t=$9e(t,e.baseUrl)),e.version===1?encodeURIComponent(t):t),gS=t=>dT(t/100)*100,H9e=(t,e)=>{let r=t;return e.version>=2&&(t instanceof Ym&&typeof t.value=="string"?r=new Ym([t]):typeof t=="string"&&(r=[t])),vO(r,e)},Q9e={br:dT,d:dT,bl:gS,dl:gS,mtp:gS,nor:H9e,rtp:gS,tb:dT},nse="request",ise="response",IF=["ab","bg","bl","br","bs","bsd","cdn","cid","cs","df","ec","lab","lb","ltc","msd","mtp","pb","pr","pt","sf","sid","sn","st","sta","tab","tb","tbl","tpb","ts","v"],V9e=["e"],z9e=/^[a-zA-Z0-9-.]+-[a-zA-Z0-9-.]+$/;function U5(t){return z9e.test(t)}function K9e(t){return IF.includes(t)||V9e.includes(t)||U5(t)}const sse=["d","dl","nor","ot","rtp","su"];function G9e(t){return IF.includes(t)||sse.includes(t)||U5(t)}const W9e=["cmsdd","cmsds","rc","smrt","ttfb","ttfbb","ttlb","url"];function Y9e(t){return IF.includes(t)||sse.includes(t)||W9e.includes(t)||U5(t)}const q9e=["bl","br","bs","cid","d","dl","mtp","nor","nrr","ot","pr","rtp","sf","sid","st","su","tb","v"];function X9e(t){return q9e.includes(t)||U5(t)}const Z9e={[ise]:Y9e,[rse]:K9e,[nse]:G9e};function ase(t,e={}){const r={};if(t==null||typeof t!="object")return r;const n=e.version||t.v||1,i=e.reportingMode||nse,s=n===1?X9e:Z9e[i];let o=Object.keys(t).filter(s);const c=e.filter;typeof c=="function"&&(o=o.filter(c));const u=i===ise||i===rse;u&&!o.includes("ts")&&o.push("ts"),n>1&&!o.includes("v")&&o.push("v");const l=nl({},Q9e,e.formatters),d={version:n,reportingMode:i,baseUrl:e.baseUrl};return o.sort().forEach(f=>{let A=t[f];const p=l[f];if(typeof p=="function"&&(A=p(A,d)),f==="v"){if(n===1)return;A=n}f=="pr"&&A===1||(u&&f==="ts"&&!qn(A)&&(A=Date.now()),U9e(A)&&(F9e(f)&&typeof A=="string"&&(A=new Xie(A)),r[f]=A))}),r}function J9e(t,e={}){const r={};if(!t)return r;const n=ase(t,e),i=M9e(n,e?.customHeaderMap);return Object.entries(i).reduce((s,[o,c])=>{const u=tse(c,{whitespace:!1});return u&&(s[o]=u),s},r)}function eHe(t,e,r){return nl(t,J9e(e,r))}const tHe="CMCD";function rHe(t,e={}){return t?tse(ase(t,e),{whitespace:!1}):""}function nHe(t,e={}){if(!t)return"";const r=rHe(t,e);return encodeURIComponent(r)}function iHe(t,e={}){if(!t)return"";const r=nHe(t,e);return`${tHe}=${r}`}const nG=/CMCD=[^&#]+/;function sHe(t,e,r){const n=iHe(e,r);if(!n)return t;if(nG.test(t))return t.replace(nG,n);const i=t.includes("?")?"&":"?";return`${t}${i}${n}`}class aHe{constructor(e){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.includeKeys=void 0,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=i=>{try{this.apply(i,{ot:Bh.MANIFEST,su:!this.initialized})}catch(s){this.hls.logger.warn("Could not generate manifest CMCD data.",s)}},this.applyFragmentData=i=>{try{const{frag:s,part:o}=i,c=this.hls.levels[s.level],u=this.getObjectType(s),l={d:(o||s).duration*1e3,ot:u};(u===Bh.VIDEO||u===Bh.AUDIO||u==Bh.MUXED)&&(l.br=c.bitrate/1e3,l.tb=this.getTopBandwidth(u)/1e3,l.bl=this.getBufferLength(u));const d=o?this.getNextPart(o):this.getNextFrag(s);d!=null&&d.url&&d.url!==s.url&&(l.nor=d.url),this.apply(i,l)}catch(s){this.hls.logger.warn("Could not generate segment CMCD data.",s)}},this.hls=e;const r=this.config=e.config,{cmcd:n}=r;n!=null&&(r.pLoader=this.createPlaylistLoader(),r.fLoader=this.createFragmentLoader(),this.sid=n.sessionId||e.sessionId,this.cid=n.contentId,this.useHeaders=n.useHeaders===!0,this.includeKeys=n.includeKeys,this.registerListeners())}registerListeners(){const e=this.hls;e.on(Le.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(Le.MEDIA_DETACHED,this.onMediaDetached,this),e.on(Le.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){const e=this.hls;e.off(Le.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(Le.MEDIA_DETACHED,this.onMediaDetached,this),e.off(Le.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null,this.onWaiting=this.onPlaying=this.media=null}onMediaAttached(e,r){this.media=r.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(e,r){var n,i;this.audioBuffer=(n=r.tracks.audio)==null?void 0:n.buffer,this.videoBuffer=(i=r.tracks.video)==null?void 0:i.buffer}createData(){var e;return{v:1,sf:f9e.HLS,sid:this.sid,cid:this.cid,pr:(e=this.media)==null?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(e,r={}){nl(r,this.createData());const n=r.ot===Bh.INIT||r.ot===Bh.VIDEO||r.ot===Bh.MUXED;this.starved&&n&&(r.bs=!0,r.su=!0,this.starved=!1),r.su==null&&(r.su=this.buffering);const{includeKeys:i}=this;i&&(r=Object.keys(r).reduce((o,c)=>(i.includes(c)&&(o[c]=r[c]),o),{}));const s={baseUrl:e.url};this.useHeaders?(e.headers||(e.headers={}),eHe(e.headers,r,s)):e.url=sHe(e.url,r,s)}getNextFrag(e){var r;const n=(r=this.hls.levels[e.level])==null?void 0:r.details;if(n){const i=e.sn-n.startSN;return n.fragments[i+1]}}getNextPart(e){var r;const{index:n,fragment:i}=e,s=(r=this.hls.levels[i.level])==null||(r=r.details)==null?void 0:r.partList;if(s){const{sn:o}=i;for(let c=s.length-1;c>=0;c--){const u=s[c];if(u.index===n&&u.fragment.sn===o)return s[c+1]}}}getObjectType(e){const{type:r}=e;if(r==="subtitle")return Bh.TIMED_TEXT;if(e.sn==="initSegment")return Bh.INIT;if(r==="audio")return Bh.AUDIO;if(r==="main")return this.hls.audioTracks.length?Bh.VIDEO:Bh.MUXED}getTopBandwidth(e){let r=0,n;const i=this.hls;if(e===Bh.AUDIO)n=i.audioTracks;else{const s=i.maxAutoLevel,o=s>-1?s+1:i.levels.length;n=i.levels.slice(0,o)}return n.forEach(s=>{s.bitrate>r&&(r=s.bitrate)}),r>0?r:NaN}getBufferLength(e){const r=this.media,n=e===Bh.AUDIO?this.audioBuffer:this.videoBuffer;return!n||!r?NaN:Hs.bufferInfo(n,r.currentTime,this.config.maxBufferHole).len*1e3}createPlaylistLoader(){const{pLoader:e}=this.config,r=this.applyPlaylistData,n=e||this.config.loader;return class{constructor(s){this.loader=void 0,this.loader=new n(s)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(s,o,c){r(s),this.loader.load(s,o,c)}}}createFragmentLoader(){const{fLoader:e}=this.config,r=this.applyFragmentData,n=e||this.config.loader;return class{constructor(s){this.loader=void 0,this.loader=new n(s)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(s,o,c){r(s),this.loader.load(s,o,c)}}}}const oHe=3e5;class lHe extends iA{constructor(e){super("content-steering",e.logger),this.hls=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this._pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=e,this.registerListeners()}registerListeners(){const e=this.hls;e.on(Le.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Le.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(Le.MANIFEST_PARSED,this.onManifestParsed,this),e.on(Le.ERROR,this.onError,this)}unregisterListeners(){const e=this.hls;e&&(e.off(Le.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Le.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(Le.MANIFEST_PARSED,this.onManifestParsed,this),e.off(Le.ERROR,this.onError,this))}pathways(){return(this.levels||[]).reduce((e,r)=>(e.indexOf(r.pathwayId)===-1&&e.push(r.pathwayId),e),[])}get pathwayPriority(){return this._pathwayPriority}set pathwayPriority(e){this.updatePathwayPriority(e)}startLoad(){if(this.started=!0,this.clearTimeout(),this.enabled&&this.uri){if(this.updated){const e=this.timeToLoad*1e3-(performance.now()-this.updated);if(e>0){this.scheduleRefresh(this.uri,e);return}}this.loadSteeringManifest(this.uri)}}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),this.clearTimeout()}clearTimeout(){this.reloadTimer!==-1&&(self.clearTimeout(this.reloadTimer),this.reloadTimer=-1)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(e){const r=this.levels;r&&(this.levels=r.filter(n=>n!==e))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(e,r){const{contentSteering:n}=r;n!==null&&(this.pathwayId=n.pathwayId,this.uri=n.uri,this.started&&this.startLoad())}onManifestParsed(e,r){this.audioTracks=r.audioTracks,this.subtitleTracks=r.subtitleTracks}onError(e,r){const{errorAction:n}=r;if(n?.action===Fd.SendAlternateToPenaltyBox&&n.flags===of.MoveAllAlternatesMatchingHost){const i=this.levels;let s=this._pathwayPriority,o=this.pathwayId;if(r.context){const{groupId:c,pathwayId:u,type:l}=r.context;c&&i?o=this.getPathwayForGroupId(c,l,o):u&&(o=u)}o in this.penalizedPathways||(this.penalizedPathways[o]=performance.now()),!s&&i&&(s=this.pathways()),s&&s.length>1&&(this.updatePathwayPriority(s),n.resolved=this.pathwayId!==o),r.details===vr.BUFFER_APPEND_ERROR&&!r.fatal?n.resolved=!0:n.resolved||this.warn(`Could not resolve ${r.details} ("${r.error.message}") with content-steering for Pathway: ${o} levels: ${i&&i.length} priorities: ${fl(s)} penalized: ${fl(this.penalizedPathways)}`)}}filterParsedLevels(e){this.levels=e;let r=this.getLevelsForPathway(this.pathwayId);if(r.length===0){const n=e[0].pathwayId;this.log(`No levels found in Pathway ${this.pathwayId}. Setting initial Pathway to "${n}"`),r=this.getLevelsForPathway(n),this.pathwayId=n}return r.length!==e.length&&this.log(`Found ${r.length}/${e.length} levels in Pathway "${this.pathwayId}"`),r}getLevelsForPathway(e){return this.levels===null?[]:this.levels.filter(r=>e===r.pathwayId)}updatePathwayPriority(e){this._pathwayPriority=e;let r;const n=this.penalizedPathways,i=performance.now();Object.keys(n).forEach(s=>{i-n[s]>oHe&&delete n[s]});for(let s=0;s<e.length;s++){const o=e[s];if(o in n)continue;if(o===this.pathwayId)return;const c=this.hls.nextLoadLevel,u=this.hls.levels[c];if(r=this.getLevelsForPathway(o),r.length>0){this.log(`Setting Pathway to "${o}"`),this.pathwayId=o,Tie(r),this.hls.trigger(Le.LEVELS_UPDATED,{levels:r});const l=this.hls.levels[c];u&&l&&this.levels&&(l.attrs["STABLE-VARIANT-ID"]!==u.attrs["STABLE-VARIANT-ID"]&&l.bitrate!==u.bitrate&&this.log(`Unstable Pathways change from bitrate ${u.bitrate} to ${l.bitrate}`),this.hls.nextLoadLevel=c);break}}}getPathwayForGroupId(e,r,n){const i=this.getLevelsForPathway(n).concat(this.levels||[]);for(let s=0;s<i.length;s++)if(r===xa.AUDIO_TRACK&&i[s].hasAudioGroup(e)||r===xa.SUBTITLE_TRACK&&i[s].hasSubtitleGroup(e))return i[s].pathwayId;return n}clonePathways(e){const r=this.levels;if(!r)return;const n={},i={};e.forEach(s=>{const{ID:o,"BASE-ID":c,"URI-REPLACEMENT":u}=s;if(r.some(d=>d.pathwayId===o))return;const l=this.getLevelsForPathway(c).map(d=>{const f=new lc(d.attrs);f["PATHWAY-ID"]=o;const A=f.AUDIO&&`${f.AUDIO}_clone_${o}`,p=f.SUBTITLES&&`${f.SUBTITLES}_clone_${o}`;A&&(n[f.AUDIO]=A,f.AUDIO=A),p&&(i[f.SUBTITLES]=p,f.SUBTITLES=p);const g=ose(d.uri,f["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",u),y=new t2({attrs:f,audioCodec:d.audioCodec,bitrate:d.bitrate,height:d.height,name:d.name,url:g,videoCodec:d.videoCodec,width:d.width});if(d.audioGroups)for(let x=1;x<d.audioGroups.length;x++)y.addGroupId("audio",`${d.audioGroups[x]}_clone_${o}`);if(d.subtitleGroups)for(let x=1;x<d.subtitleGroups.length;x++)y.addGroupId("text",`${d.subtitleGroups[x]}_clone_${o}`);return y});r.push(...l),iG(this.audioTracks,n,u,o),iG(this.subtitleTracks,i,u,o)})}loadSteeringManifest(e){const r=this.hls.config,n=r.loader;this.loader&&this.loader.destroy(),this.loader=new n(r);let i;try{i=new self.URL(e)}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest URI: ${e}`);return}if(i.protocol!=="data:"){const d=(this.hls.bandwidthEstimate||r.abrEwmaDefaultEstimate)|0;i.searchParams.set("_HLS_pathway",this.pathwayId),i.searchParams.set("_HLS_throughput",""+d)}const s={responseType:"json",url:i.href},o=r.steeringManifestLoadPolicy.default,c=o.errorRetry||o.timeoutRetry||{},u={loadPolicy:o,timeout:o.maxLoadTimeMs,maxRetry:c.maxNumRetry||0,retryDelay:c.retryDelayMs||0,maxRetryDelay:c.maxRetryDelayMs||0},l={onSuccess:(d,f,A,p)=>{this.log(`Loaded steering manifest: "${i}"`);const g=d.data;if(g?.VERSION!==1){this.log(`Steering VERSION ${g.VERSION} not supported!`);return}this.updated=performance.now(),this.timeToLoad=g.TTL;const{"RELOAD-URI":y,"PATHWAY-CLONES":x,"PATHWAY-PRIORITY":w}=g;if(y)try{this.uri=new self.URL(y,i).href}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest RELOAD-URI: ${y}`);return}this.scheduleRefresh(this.uri||A.url),x&&this.clonePathways(x);const E={steeringManifest:g,url:i.toString()};this.hls.trigger(Le.STEERING_MANIFEST_LOADED,E),w&&this.updatePathwayPriority(w)},onError:(d,f,A,p)=>{if(this.log(`Error loading steering manifest: ${d.code} ${d.text} (${f.url})`),this.stopLoad(),d.code===410){this.enabled=!1,this.log(`Steering manifest ${f.url} no longer available`);return}let g=this.timeToLoad*1e3;if(d.code===429){const y=this.loader;if(typeof y?.getResponseHeader=="function"){const x=y.getResponseHeader("Retry-After");x&&(g=parseFloat(x)*1e3)}this.log(`Steering manifest ${f.url} rate limited`);return}this.scheduleRefresh(this.uri||f.url,g)},onTimeout:(d,f,A)=>{this.log(`Timeout loading steering manifest (${f.url})`),this.scheduleRefresh(this.uri||f.url)}};this.log(`Requesting steering manifest: ${i}`),this.loader.load(s,u,l)}scheduleRefresh(e,r=this.timeToLoad*1e3){this.clearTimeout(),this.reloadTimer=self.setTimeout(()=>{var n;const i=(n=this.hls)==null?void 0:n.media;if(i&&!i.ended){this.loadSteeringManifest(e);return}this.scheduleRefresh(e,this.timeToLoad*1e3)},r)}}function iG(t,e,r,n){t&&Object.keys(e).forEach(i=>{const s=t.filter(o=>o.groupId===i).map(o=>{const c=nl({},o);return c.details=void 0,c.attrs=new lc(c.attrs),c.url=c.attrs.URI=ose(o.url,o.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",r),c.groupId=c.attrs["GROUP-ID"]=e[i],c.attrs["PATHWAY-ID"]=n,c});t.push(...s)})}function ose(t,e,r,n){const{HOST:i,PARAMS:s,[r]:o}=n;let c;e&&(c=o?.[e],c&&(t=c));const u=new self.URL(t);return i&&!c&&(u.host=i),s&&Object.keys(s).sort().forEach(l=>{l&&u.searchParams.set(l,s[l])}),u.href}class pb extends iA{constructor(e){super("eme",e.logger),this.hls=void 0,this.config=void 0,this.media=null,this.mediaResolved=void 0,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.mediaKeys=null,this.setMediaKeysQueue=pb.CDMCleanupPromise?[pb.CDMCleanupPromise]:[],this.bannedKeyIds={},this.onMediaEncrypted=r=>{const{initDataType:n,initData:i}=r,s=`"${r.type}" event: init data type: "${n}"`;if(this.debug(s),i!==null){if(!this.keyFormatPromise){let o=Object.keys(this.keySystemAccessPromises);o.length||(o=yw(this.config));const c=o.map(x4).filter(u=>!!u);this.keyFormatPromise=this.getKeyFormatPromise(c)}this.keyFormatPromise.then(o=>{const c=lT(o);if(n!=="sinf"||c!==dc.FAIRPLAY){this.log(`Ignoring "${r.type}" event with init data type: "${n}" for selected key-system ${c}`);return}let u;try{const p=Ru(new Uint8Array(i)),g=xF(JSON.parse(p).sinf),y=tie(g);if(!y)throw new Error("'schm' box missing or not cbcs/cenc with schi > tenc");u=new Uint8Array(y.subarray(8,24))}catch(p){this.warn(`${s} Failed to parse sinf: ${p}`);return}const l=Ud(u),{keyIdToKeySessionPromise:d,mediaKeySessions:f}=this;let A=d[l];for(let p=0;p<f.length;p++){const g=f[p],y=g.decryptdata;if(!y.keyId)continue;const x=Ud(y.keyId);if(qj(u,y.keyId)||y.uri.replace(/-/g,"").indexOf(l)!==-1){if(A=d[x],!A)continue;if(y.pssh)break;delete d[x],y.pssh=new Uint8Array(i),y.keyId=u,A=d[l]=A.then(()=>this.generateRequestWithPreferredKeySession(g,n,i,"encrypted-event-key-match")),A.catch(w=>this.handleError(w));break}}A||this.handleError(new Error(`Key ID ${l} not encountered in playlist. Key-system sessions ${f.length}.`))}).catch(o=>this.handleError(o))}},this.onWaitingForKey=r=>{this.log(`"${r.type}" event`)},this.hls=e,this.config=e.config,this.registerListeners()}destroy(){this.onDestroying(),this.onMediaDetached();const e=this.config;e.requestMediaKeySystemAccessFunc=null,e.licenseXhrSetup=e.licenseResponseCallback=void 0,e.drmSystems=e.drmSystemOptions={},this.hls=this.config=this.keyIdToKeySessionPromise=null,this.onMediaEncrypted=this.onWaitingForKey=null}registerListeners(){this.hls.on(Le.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(Le.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(Le.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(Le.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.on(Le.DESTROYING,this.onDestroying,this)}unregisterListeners(){this.hls.off(Le.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(Le.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(Le.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(Le.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.off(Le.DESTROYING,this.onDestroying,this)}getLicenseServerUrl(e){const{drmSystems:r,widevineLicenseUrl:n}=this.config,i=r?.[e];if(i)return i.licenseUrl;if(e===dc.WIDEVINE&&n)return n}getLicenseServerUrlOrThrow(e){const r=this.getLicenseServerUrl(e);if(r===void 0)throw new Error(`no license server URL configured for key-system "${e}"`);return r}getServerCertificateUrl(e){const{drmSystems:r}=this.config,n=r?.[e];if(n)return n.serverCertificateUrl;this.log(`No Server Certificate in config.drmSystems["${e}"]`)}attemptKeySystemAccess(e){const r=this.hls.levels,n=(o,c,u)=>!!o&&u.indexOf(o)===c,i=r.map(o=>o.audioCodec).filter(n),s=r.map(o=>o.videoCodec).filter(n);return i.length+s.length===0&&s.push("avc1.42e01e"),new Promise((o,c)=>{const u=l=>{const d=l.shift();this.getMediaKeysPromise(d,i,s).then(f=>o({keySystem:d,mediaKeys:f})).catch(f=>{l.length?u(l):f instanceof nf?c(f):c(new nf({type:Oi.KEY_SYSTEM_ERROR,details:vr.KEY_SYSTEM_NO_ACCESS,error:f,fatal:!0},f.message))})};u(e)})}requestMediaKeySystemAccess(e,r){const{requestMediaKeySystemAccessFunc:n}=this.config;if(typeof n!="function"){let i=`Configured requestMediaKeySystemAccess is not a function ${n}`;return vie===null&&self.location.protocol==="http:"&&(i=`navigator.requestMediaKeySystemAccess is not available over insecure protocol ${location.protocol}`),Promise.reject(new Error(i))}return n(e,r)}getMediaKeysPromise(e,r,n){var i;const s=H7e(e,r,n,this.config.drmSystemOptions||{});let o=this.keySystemAccessPromises[e],c=(i=o)==null?void 0:i.keySystemAccess;if(!c){this.log(`Requesting encrypted media "${e}" key-system access with config: ${fl(s)}`),c=this.requestMediaKeySystemAccess(e,s);const u=o=this.keySystemAccessPromises[e]={keySystemAccess:c};return c.catch(l=>{this.log(`Failed to obtain access to key-system "${e}": ${l}`)}),c.then(l=>{this.log(`Access for key-system "${l.keySystem}" obtained`);const d=this.fetchServerCertificate(e);this.log(`Create media-keys for "${e}"`);const f=u.mediaKeys=l.createMediaKeys().then(A=>(this.log(`Media-keys created for "${e}"`),u.hasMediaKeys=!0,d.then(p=>p?this.setMediaKeysServerCertificate(A,e,p):A)));return f.catch(A=>{this.error(`Failed to create media-keys for "${e}"}: ${A}`)}),f})}return c.then(()=>o.mediaKeys)}createMediaKeySessionContext({decryptdata:e,keySystem:r,mediaKeys:n}){this.log(`Creating key-system session "${r}" keyId: ${Ud(e.keyId||[])} keyUri: ${e.uri}`);const i=n.createSession(),s={decryptdata:e,keySystem:r,mediaKeys:n,mediaKeysSession:i,keyStatus:"status-pending"};return this.mediaKeySessions.push(s),s}renewKeySession(e){const r=e.decryptdata;if(r.pssh){const n=this.createMediaKeySessionContext(e),i=vS(r),s="cenc";this.keyIdToKeySessionPromise[i]=this.generateRequestWithPreferredKeySession(n,s,r.pssh.buffer,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(e)}updateKeySession(e,r){const n=e.mediaKeysSession;return this.log(`Updating key-session "${n.sessionId}" for keyId ${Ud(e.decryptdata.keyId||[])}
      } (data length: ${r.byteLength})`),n.update(r)}getSelectedKeySystemFormats(){return Object.keys(this.keySystemAccessPromises).map(e=>({keySystem:e,hasMediaKeys:this.keySystemAccessPromises[e].hasMediaKeys})).filter(({hasMediaKeys:e})=>!!e).map(({keySystem:e})=>x4(e)).filter(e=>!!e)}getKeySystemAccess(e){return this.getKeySystemSelectionPromise(e).then(({keySystem:r,mediaKeys:n})=>this.attemptSetMediaKeys(r,n))}selectKeySystem(e){return new Promise((r,n)=>{this.getKeySystemSelectionPromise(e).then(({keySystem:i})=>{const s=x4(i);s?r(s):n(new Error(`Unable to find format for key-system "${i}"`))}).catch(n)})}selectKeySystemFormat(e){const r=Object.keys(e.levelkeys||{});return this.keyFormatPromise||(this.log(`Selecting key-system from fragment (sn: ${e.sn} ${e.type}: ${e.level}) key formats ${r.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(r)),this.keyFormatPromise}getKeyFormatPromise(e){const r=yw(this.config),n=e.map(lT).filter(i=>!!i&&r.indexOf(i)!==-1);return this.selectKeySystem(n)}getKeyStatus(e){const{mediaKeySessions:r}=this;for(let n=0;n<r.length;n++){const i=cHe(e,r[n]);if(i)return i}}loadKey(e){const r=e.keyInfo.decryptdata,n=vS(r),i=this.bannedKeyIds[n];if(i||this.getKeyStatus(r)==="internal-error"){const c=sG(i||"internal-error",r);return this.handleError(c,e.frag),Promise.reject(c)}const s=`(keyId: ${n} format: "${r.keyFormat}" method: ${r.method} uri: ${r.uri})`;this.log(`Starting session for key ${s}`);const o=this.keyIdToKeySessionPromise[n];if(!o){const c=this.getKeySystemForKeyPromise(r).then(({keySystem:u,mediaKeys:l})=>(this.throwIfDestroyed(),this.log(`Handle encrypted media sn: ${e.frag.sn} ${e.frag.type}: ${e.frag.level} using key ${s}`),this.attemptSetMediaKeys(u,l).then(()=>(this.throwIfDestroyed(),this.createMediaKeySessionContext({keySystem:u,mediaKeys:l,decryptdata:r}))))).then(u=>{const l="cenc",d=r.pssh?r.pssh.buffer:null;return this.generateRequestWithPreferredKeySession(u,l,d,"playlist-key")});return c.catch(u=>this.handleError(u,e.frag)),this.keyIdToKeySessionPromise[n]=c,c}return o.catch(c=>{if(c instanceof nf){const u=Uo({},c.data);this.getKeyStatus(r)==="internal-error"&&(u.decryptdata=r);const l=new nf(u,c.message);this.handleError(l,e.frag)}}),o}throwIfDestroyed(e="Invalid state"){if(!this.hls)throw new Error("invalid state")}handleError(e,r){if(this.hls)if(e instanceof nf){r&&(e.data.frag=r);const n=e.data.decryptdata;this.error(`${e.message}${n?` (${Ud(n.keyId||[])})`:""}`),this.hls.trigger(Le.ERROR,e.data)}else this.error(e.message),this.hls.trigger(Le.ERROR,{type:Oi.KEY_SYSTEM_ERROR,details:vr.KEY_SYSTEM_NO_KEYS,error:e,fatal:!0})}getKeySystemForKeyPromise(e){const r=vS(e),n=this.keyIdToKeySessionPromise[r];if(!n){const i=lT(e.keyFormat),s=i?[i]:yw(this.config);return this.attemptKeySystemAccess(s)}return n}getKeySystemSelectionPromise(e){if(e.length||(e=yw(this.config)),e.length===0)throw new nf({type:Oi.KEY_SYSTEM_ERROR,details:vr.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},`Missing key-system license configuration options ${fl({drmSystems:this.config.drmSystems})}`);return this.attemptKeySystemAccess(e)}attemptSetMediaKeys(e,r){if(this.mediaResolved=void 0,this.mediaKeys===r)return Promise.resolve();const n=this.setMediaKeysQueue.slice();this.log(`Setting media-keys for "${e}"`);const i=Promise.all(n).then(()=>this.media?this.media.setMediaKeys(r):new Promise((s,o)=>{this.mediaResolved=()=>{if(this.mediaResolved=void 0,!this.media)return o(new Error("Attempted to set mediaKeys without media element attached"));this.mediaKeys=r,this.media.setMediaKeys(r).then(s).catch(o)}}));return this.mediaKeys=r,this.setMediaKeysQueue.push(i),i.then(()=>{this.log(`Media-keys set for "${e}"`),n.push(i),this.setMediaKeysQueue=this.setMediaKeysQueue.filter(s=>n.indexOf(s)===-1)})}generateRequestWithPreferredKeySession(e,r,n,i){var s;const o=(s=this.config.drmSystems)==null||(s=s[e.keySystem])==null?void 0:s.generateRequest;if(o)try{const g=o.call(this.hls,r,n,e);if(!g)throw new Error("Invalid response from configured generateRequest filter");r=g.initDataType,n=g.initData?g.initData:null,e.decryptdata.pssh=n?new Uint8Array(n):null}catch(g){if(this.warn(g.message),this.hls&&this.hls.config.debug)throw g}if(n===null)return this.log(`Skipping key-session request for "${i}" (no initData)`),Promise.resolve(e);const c=vS(e.decryptdata),u=e.decryptdata.uri;this.log(`Generating key-session request for "${i}" keyId: ${c} URI: ${u} (init data type: ${r} length: ${n.byteLength})`);const l=new wF,d=e._onmessage=g=>{const y=e.mediaKeysSession;if(!y){l.emit("error",new Error("invalid state"));return}const{messageType:x,message:w}=g;this.log(`"${x}" message event for session "${y.sessionId}" message size: ${w.byteLength}`),x==="license-request"||x==="license-renewal"?this.renewLicense(e,w).catch(E=>{l.eventNames().length?l.emit("error",E):this.handleError(E)}):x==="license-release"?e.keySystem===dc.FAIRPLAY&&this.updateKeySession(e,uO("acknowledged")).then(()=>this.removeSession(e)).catch(E=>this.handleError(E)):this.warn(`unhandled media key message type "${x}"`)},f=(g,y)=>{y.keyStatus=g;let x;g.startsWith("usable")?l.emit("resolved"):g==="internal-error"||g==="output-restricted"||g==="output-downscaled"?x=sG(g,y.decryptdata):g==="expired"?x=new Error(`key expired (keyId: ${c})`):g==="released"?x=new Error("key released"):g==="status-pending"||this.warn(`unhandled key status change "${g}" (keyId: ${c})`),x&&(l.eventNames().length?l.emit("error",x):this.handleError(x))},A=e._onkeystatuseschange=g=>{if(!e.mediaKeysSession){l.emit("error",new Error("invalid state"));return}const x=this.getKeyStatuses(e);if(!Object.keys(x).some(C=>x[C]!=="status-pending"))return;if(x[c]==="expired"){this.log(`Expired key ${fl(x)} in key-session "${e.mediaKeysSession.sessionId}"`),this.renewKeySession(e);return}let E=x[c];if(E)f(E,e);else{var T;e.keyStatusTimeouts||(e.keyStatusTimeouts={}),(T=e.keyStatusTimeouts)[c]||(T[c]=self.setTimeout(()=>{if(!e.mediaKeysSession||!this.mediaKeys)return;const N=this.getKeyStatus(e.decryptdata);if(N&&N!=="status-pending")return this.log(`No status for keyId ${c} in key-session "${e.mediaKeysSession.sessionId}". Using session key-status ${N} from other session.`),f(N,e);this.log(`key status for ${c} in key-session "${e.mediaKeysSession.sessionId}" timed out after 1000ms`),E="internal-error",f(E,e)},1e3)),this.log(`No status for keyId ${c} (${fl(x)}).`)}};vh(e.mediaKeysSession,"message",d),vh(e.mediaKeysSession,"keystatuseschange",A);const p=new Promise((g,y)=>{l.on("error",y),l.on("resolved",g)});return e.mediaKeysSession.generateRequest(r,n).then(()=>{this.log(`Request generated for key-session "${e.mediaKeysSession.sessionId}" keyId: ${c} URI: ${u}`)}).catch(g=>{throw new nf({type:Oi.KEY_SYSTEM_ERROR,details:vr.KEY_SYSTEM_NO_SESSION,error:g,decryptdata:e.decryptdata,fatal:!1},`Error generating key-session request: ${g}`)}).then(()=>p).catch(g=>(l.removeAllListeners(),this.removeSession(e).then(()=>{throw g}))).then(()=>(l.removeAllListeners(),e))}getKeyStatuses(e){const r={};return e.mediaKeysSession.keyStatuses.forEach((n,i)=>{if(typeof i=="string"&&typeof n=="object"){const c=i;i=n,n=c}const s="buffer"in i?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):new Uint8Array(i);if(e.keySystem===dc.PLAYREADY&&s.length===16){const c=Ud(s);r[c]=n,pie(s)}const o=Ud(s);n==="internal-error"&&(this.bannedKeyIds[o]=n),this.log(`key status change "${n}" for keyStatuses keyId: ${o} key-session "${e.mediaKeysSession.sessionId}"`),r[o]=n}),r}fetchServerCertificate(e){const r=this.config,n=r.loader,i=new n(r),s=this.getServerCertificateUrl(e);return s?(this.log(`Fetching server certificate for "${e}"`),new Promise((o,c)=>{const u={responseType:"arraybuffer",url:s},l=r.certLoadPolicy.default,d={loadPolicy:l,timeout:l.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},f={onSuccess:(A,p,g,y)=>{o(A.data)},onError:(A,p,g,y)=>{c(new nf({type:Oi.KEY_SYSTEM_ERROR,details:vr.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:g,response:Uo({url:u.url,data:void 0},A)},`"${e}" certificate request failed (${s}). Status: ${A.code} (${A.text})`))},onTimeout:(A,p,g)=>{c(new nf({type:Oi.KEY_SYSTEM_ERROR,details:vr.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:g,response:{url:u.url,data:void 0}},`"${e}" certificate request timed out (${s})`))},onAbort:(A,p,g)=>{c(new Error("aborted"))}};i.load(u,d,f)})):Promise.resolve()}setMediaKeysServerCertificate(e,r,n){return new Promise((i,s)=>{e.setServerCertificate(n).then(o=>{this.log(`setServerCertificate ${o?"success":"not supported by CDM"} (${n.byteLength}) on "${r}"`),i(e)}).catch(o=>{s(new nf({type:Oi.KEY_SYSTEM_ERROR,details:vr.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:o,fatal:!0},o.message))})})}renewLicense(e,r){return this.requestLicense(e,new Uint8Array(r)).then(n=>this.updateKeySession(e,new Uint8Array(n)).catch(i=>{throw new nf({type:Oi.KEY_SYSTEM_ERROR,details:vr.KEY_SYSTEM_SESSION_UPDATE_FAILED,decryptdata:e.decryptdata,error:i,fatal:!1},i.message)}))}unpackPlayReadyKeyMessage(e,r){const n=String.fromCharCode.apply(null,new Uint16Array(r.buffer));if(!n.includes("PlayReadyKeyMessage"))return e.setRequestHeader("Content-Type","text/xml; charset=utf-8"),r;const i=new DOMParser().parseFromString(n,"application/xml"),s=i.querySelectorAll("HttpHeader");if(s.length>0){let d;for(let f=0,A=s.length;f<A;f++){var o,c;d=s[f];const p=(o=d.querySelector("name"))==null?void 0:o.textContent,g=(c=d.querySelector("value"))==null?void 0:c.textContent;p&&g&&e.setRequestHeader(p,g)}}const u=i.querySelector("Challenge"),l=u?.textContent;if(!l)throw new Error("Cannot find <Challenge> in key message");return uO(atob(l))}setupLicenseXHR(e,r,n,i){const s=this.config.licenseXhrSetup;return s?Promise.resolve().then(()=>{if(!n.decryptdata)throw new Error("Key removed");return s.call(this.hls,e,r,n,i)}).catch(o=>{if(!n.decryptdata)throw o;return e.open("POST",r,!0),s.call(this.hls,e,r,n,i)}).then(o=>(e.readyState||e.open("POST",r,!0),{xhr:e,licenseChallenge:o||i})):(e.open("POST",r,!0),Promise.resolve({xhr:e,licenseChallenge:i}))}requestLicense(e,r){const n=this.config.keyLoadPolicy.default;return new Promise((i,s)=>{const o=this.getLicenseServerUrlOrThrow(e.keySystem);this.log(`Sending license request to URL: ${o}`);const c=new XMLHttpRequest;c.responseType="arraybuffer",c.onreadystatechange=()=>{if(!this.hls||!e.mediaKeysSession)return s(new Error("invalid state"));if(c.readyState===4)if(c.status===200){this._requestLicenseFailureCount=0;let u=c.response;this.log(`License received ${u instanceof ArrayBuffer?u.byteLength:u}`);const l=this.config.licenseResponseCallback;if(l)try{u=l.call(this.hls,c,o,e)}catch(d){this.error(d)}i(u)}else{const u=n.errorRetry,l=u?u.maxNumRetry:0;if(this._requestLicenseFailureCount++,this._requestLicenseFailureCount>l||c.status>=400&&c.status<500)s(new nf({type:Oi.KEY_SYSTEM_ERROR,details:vr.KEY_SYSTEM_LICENSE_REQUEST_FAILED,decryptdata:e.decryptdata,fatal:!0,networkDetails:c,response:{url:o,data:void 0,code:c.status,text:c.statusText}},`License Request XHR failed (${o}). Status: ${c.status} (${c.statusText})`));else{const d=l-this._requestLicenseFailureCount+1;this.warn(`Retrying license request, ${d} attempts left`),this.requestLicense(e,r).then(i,s)}}},e.licenseXhr&&e.licenseXhr.readyState!==XMLHttpRequest.DONE&&e.licenseXhr.abort(),e.licenseXhr=c,this.setupLicenseXHR(c,o,e,r).then(({xhr:u,licenseChallenge:l})=>{e.keySystem==dc.PLAYREADY&&(l=this.unpackPlayReadyKeyMessage(u,l)),u.send(l)}).catch(s)})}onDestroying(){this.unregisterListeners(),this._clear()}onMediaAttached(e,r){if(!this.config.emeEnabled)return;const n=r.media;this.media=n,vh(n,"encrypted",this.onMediaEncrypted),vh(n,"waitingforkey",this.onWaitingForKey);const i=this.mediaResolved;i?i():this.mediaKeys=n.mediaKeys}onMediaDetached(){const e=this.media;e&&(Uh(e,"encrypted",this.onMediaEncrypted),Uh(e,"waitingforkey",this.onWaitingForKey),this.media=null,this.mediaKeys=null)}_clear(){var e;this._requestLicenseFailureCount=0,this.keyIdToKeySessionPromise={},this.bannedKeyIds={};const r=this.mediaResolved;if(r&&r(),!this.mediaKeys&&!this.mediaKeySessions.length)return;const n=this.media,i=this.mediaKeySessions.slice();this.mediaKeySessions=[],this.mediaKeys=null,j0.clearKeyUriToKeyIdMap();const s=i.length;pb.CDMCleanupPromise=Promise.all(i.map(o=>this.removeSession(o)).concat((n==null||(e=n.setMediaKeys(null))==null?void 0:e.catch(o=>{this.log(`Could not clear media keys: ${o}`),this.hls&&this.hls.trigger(Le.ERROR,{type:Oi.OTHER_ERROR,details:vr.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR,fatal:!1,error:new Error(`Could not clear media keys: ${o}`)})}))||Promise.resolve())).catch(o=>{this.log(`Could not close sessions and clear media keys: ${o}`),this.hls&&this.hls.trigger(Le.ERROR,{type:Oi.OTHER_ERROR,details:vr.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close sessions and clear media keys: ${o}`)})}).then(()=>{s&&this.log("finished closing key sessions and clearing media keys")})}onManifestLoading(){this._clear()}onManifestLoaded(e,{sessionKeys:r}){if(!(!r||!this.config.emeEnabled)&&!this.keyFormatPromise){const n=r.reduce((i,s)=>(i.indexOf(s.keyFormat)===-1&&i.push(s.keyFormat),i),[]);this.log(`Selecting key-system from session-keys ${n.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(n)}}removeSession(e){const{mediaKeysSession:r,licenseXhr:n,decryptdata:i}=e;if(r){this.log(`Remove licenses and keys and close session "${r.sessionId}" keyId: ${Ud(i?.keyId||[])}`),e._onmessage&&(r.removeEventListener("message",e._onmessage),e._onmessage=void 0),e._onkeystatuseschange&&(r.removeEventListener("keystatuseschange",e._onkeystatuseschange),e._onkeystatuseschange=void 0),n&&n.readyState!==XMLHttpRequest.DONE&&n.abort(),e.mediaKeysSession=e.decryptdata=e.licenseXhr=void 0;const s=this.mediaKeySessions.indexOf(e);s>-1&&this.mediaKeySessions.splice(s,1);const{keyStatusTimeouts:o}=e;o&&Object.keys(o).forEach(l=>self.clearTimeout(o[l]));const{drmSystemOptions:c}=this.config;return(V7e(c)?new Promise((l,d)=>{self.setTimeout(()=>d(new Error("MediaKeySession.remove() timeout")),8e3),r.remove().then(l).catch(d)}):Promise.resolve()).catch(l=>{this.log(`Could not remove session: ${l}`),this.hls&&this.hls.trigger(Le.ERROR,{type:Oi.OTHER_ERROR,details:vr.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR,fatal:!1,error:new Error(`Could not remove session: ${l}`)})}).then(()=>r.close()).catch(l=>{this.log(`Could not close session: ${l}`),this.hls&&this.hls.trigger(Le.ERROR,{type:Oi.OTHER_ERROR,details:vr.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close session: ${l}`)})})}return Promise.resolve()}}pb.CDMCleanupPromise=void 0;function vS(t){if(!t)throw new Error("Could not read keyId of undefined decryptdata");if(t.keyId===null)throw new Error("keyId is null");return Ud(t.keyId)}function cHe(t,e){if(t.keyId&&e.mediaKeysSession.keyStatuses.has(t.keyId))return e.mediaKeysSession.keyStatuses.get(t.keyId);if(t.matches(e.decryptdata))return e.keyStatus}class nf extends Error{constructor(e,r){super(r),this.data=void 0,e.error||(e.error=new Error(r)),this.data=e,e.err=e.error}}function sG(t,e){const r=t==="output-restricted",n=r?vr.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:vr.KEY_SYSTEM_STATUS_INTERNAL_ERROR;return new nf({type:Oi.KEY_SYSTEM_ERROR,details:n,fatal:!1,decryptdata:e},r?"HDCP level output restricted":`key status changed to "${t}"`)}class uHe{constructor(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}setStreamController(e){this.streamController=e}registerListeners(){this.hls.on(Le.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.on(Le.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListeners(){this.hls.off(Le.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.off(Le.MEDIA_DETACHING,this.onMediaDetaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(e,r){const n=this.hls.config;if(n.capLevelOnFPSDrop){const i=r.media instanceof self.HTMLVideoElement?r.media:null;this.media=i,i&&typeof i.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),n.fpsDroppedMonitoringPeriod)}}onMediaDetaching(){this.media=null}checkFPS(e,r,n){const i=performance.now();if(r){if(this.lastTime){const s=i-this.lastTime,o=n-this.lastDroppedFrames,c=r-this.lastDecodedFrames,u=1e3*o/s,l=this.hls;if(l.trigger(Le.FPS_DROP,{currentDropped:o,currentDecoded:c,totalDroppedFrames:n}),u>0&&o>l.config.fpsDroppedMonitoringThreshold*c){let d=l.currentLevel;l.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+d),d>0&&(l.autoLevelCapping===-1||l.autoLevelCapping>=d)&&(d=d-1,l.trigger(Le.FPS_DROP_LEVEL_CAPPING,{level:d,droppedLevel:l.currentLevel}),l.autoLevelCapping=d,this.streamController.nextLevelSwitch())}}this.lastTime=i,this.lastDroppedFrames=n,this.lastDecodedFrames=r}}checkFPSInterval(){const e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){const r=e.getVideoPlaybackQuality();this.checkFPS(e,r.totalVideoFrames,r.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}}function lse(t,e){let r;try{r=new Event("addtrack")}catch{r=document.createEvent("Event"),r.initEvent("addtrack",!1,!1)}r.track=t,e.dispatchEvent(r)}function cse(t,e){const r=t.mode;if(r==="disabled"&&(t.mode="hidden"),t.cues&&!t.cues.getCueById(e.id))try{if(t.addCue(e),!t.cues.getCueById(e.id))throw new Error(`addCue is failed for: ${e}`)}catch(n){Ho.debug(`[texttrack-utils]: ${n}`);try{const i=new self.TextTrackCue(e.startTime,e.endTime,e.text);i.id=e.id,t.addCue(i)}catch(i){Ho.debug(`[texttrack-utils]: Legacy TextTrackCue fallback failed: ${i}`)}}r==="disabled"&&(t.mode=r)}function rb(t,e){const r=t.mode;if(r==="disabled"&&(t.mode="hidden"),t.cues)for(let n=t.cues.length;n--;)e&&t.cues[n].removeEventListener("enter",e),t.removeCue(t.cues[n]);r==="disabled"&&(t.mode=r)}function yO(t,e,r,n){const i=t.mode;if(i==="disabled"&&(t.mode="hidden"),t.cues&&t.cues.length>0){const s=hHe(t.cues,e,r);for(let o=0;o<s.length;o++)(!n||n(s[o]))&&t.removeCue(s[o])}i==="disabled"&&(t.mode=i)}function dHe(t,e){if(e<=t[0].startTime)return 0;const r=t.length-1;if(e>t[r].endTime)return-1;let n=0,i=r,s;for(;n<=i;)if(s=Math.floor((i+n)/2),e<t[s].startTime)i=s-1;else if(e>t[s].startTime&&n<r)n=s+1;else return s;return t[n].startTime-e<e-t[i].startTime?n:i}function hHe(t,e,r){const n=[],i=dHe(t,e);if(i>-1)for(let s=i,o=t.length;s<o;s++){const c=t[s];if(c.startTime>=e&&c.endTime<=r)n.push(c);else if(c.startTime>r)return n}return n}function hT(t){const e=[];for(let r=0;r<t.length;r++){const n=t[r];(n.kind==="subtitles"||n.kind==="captions")&&n.label&&e.push(t[r])}return e}class fHe extends NF{constructor(e){super(e,"subtitle-track-controller"),this.media=null,this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.onTextTracksChanged=()=>{if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let r=null;const n=hT(this.media.textTracks);for(let s=0;s<n.length;s++)if(n[s].mode==="hidden")r=n[s];else if(n[s].mode==="showing"){r=n[s];break}const i=this.findTrackForTextTrack(r);this.subtitleTrack!==i&&this.setSubtitleTrack(i)},this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,this.onTextTracksChanged=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(e){this._subtitleDisplay=e,this.trackId>-1&&this.toggleTrackModes()}registerListeners(){const{hls:e}=this;e.on(Le.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(Le.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(Le.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Le.MANIFEST_PARSED,this.onManifestParsed,this),e.on(Le.LEVEL_LOADING,this.onLevelLoading,this),e.on(Le.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(Le.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(Le.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(Le.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(Le.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(Le.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Le.MANIFEST_PARSED,this.onManifestParsed,this),e.off(Le.LEVEL_LOADING,this.onLevelLoading,this),e.off(Le.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(Le.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(Le.ERROR,this.onError,this)}onMediaAttached(e,r){this.media=r.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.onTextTracksChanged,e)}onMediaDetaching(e,r){const n=this.media;if(!n)return;const i=!!r.transferMedia;if(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||n.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),this.subtitleTrack=-1,this.media=null,i)return;hT(n.textTracks).forEach(o=>{rb(o)})}onManifestLoading(){this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(e,r){this.tracks=r.subtitleTracks}onSubtitleTrackLoaded(e,r){const{id:n,groupId:i,details:s}=r,o=this.tracksInGroup[n];if(!o||o.groupId!==i){this.warn(`Subtitle track with id:${n} and group:${i} not found in active group ${o?.groupId}`);return}const c=o.details;o.details=r.details,this.log(`Subtitle track ${n} "${o.name}" lang:${o.lang} group:${i} loaded [${s.startSN}-${s.endSN}]`),n===this.trackId&&this.playlistLoaded(n,r,c)}onLevelLoading(e,r){this.switchLevel(r.level)}onLevelSwitching(e,r){this.switchLevel(r.level)}switchLevel(e){const r=this.hls.levels[e];if(!r)return;const n=r.subtitleGroups||null,i=this.groupIds;let s=this.currentTrack;if(!n||i?.length!==n?.length||n!=null&&n.some(o=>i?.indexOf(o)===-1)){this.groupIds=n,this.trackId=-1,this.currentTrack=null;const o=this.tracks.filter(d=>!n||n.indexOf(d.groupId)!==-1);if(o.length)this.selectDefaultTrack&&!o.some(d=>d.default)&&(this.selectDefaultTrack=!1),o.forEach((d,f)=>{d.id=f});else if(!s&&!this.tracksInGroup.length)return;this.tracksInGroup=o;const c=this.hls.config.subtitlePreference;if(!s&&c){this.selectDefaultTrack=!1;const d=Om(c,o);if(d>-1)s=o[d];else{const f=Om(c,this.tracks);s=this.tracks[f]}}let u=this.findTrackId(s);u===-1&&s&&(u=this.findTrackId(null));const l={subtitleTracks:o};this.log(`Updating subtitle tracks, ${o.length} track(s) found in "${n?.join(",")}" group-id`),this.hls.trigger(Le.SUBTITLE_TRACKS_UPDATED,l),u!==-1&&this.trackId===-1&&this.setSubtitleTrack(u)}}findTrackId(e){const r=this.tracksInGroup,n=this.selectDefaultTrack;for(let i=0;i<r.length;i++){const s=r[i];if(!(n&&!s.default||!n&&!e)&&(!e||Xv(s,e)))return i}if(e){for(let i=0;i<r.length;i++){const s=r[i];if(s2(e.attrs,s.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return i}for(let i=0;i<r.length;i++){const s=r[i];if(s2(e.attrs,s.attrs,["LANGUAGE"]))return i}}return-1}findTrackForTextTrack(e){if(e){const r=this.tracksInGroup;for(let n=0;n<r.length;n++){const i=r[n];if(mO(i,e))return n}}return-1}onError(e,r){r.fatal||!r.context||r.context.type===xa.SUBTITLE_TRACK&&r.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(r.context.groupId)!==-1)&&this.checkRetry(r)}get allSubtitleTracks(){return this.tracks}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(e){this.selectDefaultTrack=!1,this.setSubtitleTrack(e)}setSubtitleOption(e){if(this.hls.config.subtitlePreference=e,e){if(e.id===-1)return this.setSubtitleTrack(-1),null;const r=this.allSubtitleTracks;if(this.selectDefaultTrack=!1,r.length){const n=this.currentTrack;if(n&&Xv(e,n))return n;const i=Om(e,this.tracksInGroup);if(i>-1){const s=this.tracksInGroup[i];return this.setSubtitleTrack(i),s}else{if(n)return null;{const s=Om(e,r);if(s>-1)return r[s]}}}}return null}loadPlaylist(e){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentTrack)&&this.scheduleLoading(this.currentTrack,e)}loadingPlaylist(e,r){super.loadingPlaylist(e,r);const n=e.id,i=e.groupId,s=this.getUrlWithDirectives(e.url,r),o=e.details,c=o?.age;this.log(`Loading subtitle ${n} "${e.name}" lang:${e.lang} group:${i}${r?.msn!==void 0?" at sn "+r.msn+" part "+r.part:""}${c&&o.live?" age "+c.toFixed(1)+(o.type&&" "+o.type||""):""} ${s}`),this.hls.trigger(Le.SUBTITLE_TRACK_LOADING,{url:s,id:n,groupId:i,deliveryDirectives:r||null,track:e})}toggleTrackModes(){const{media:e}=this;if(!e)return;const r=hT(e.textTracks),n=this.currentTrack;let i;if(n&&(i=r.filter(s=>mO(n,s))[0],i||this.warn(`Unable to find subtitle TextTrack with name "${n.name}" and language "${n.lang}"`)),[].slice.call(r).forEach(s=>{s.mode!=="disabled"&&s!==i&&(s.mode="disabled")}),i){const s=this.subtitleDisplay?"showing":"hidden";i.mode!==s&&(i.mode=s)}}setSubtitleTrack(e){const r=this.tracksInGroup;if(!this.media){this.queuedDefaultTrack=e;return}if(e<-1||e>=r.length||!qn(e)){this.warn(`Invalid subtitle track id: ${e}`);return}this.selectDefaultTrack=!1;const n=this.currentTrack,i=r[e]||null;if(this.trackId=e,this.currentTrack=i,this.toggleTrackModes(),!i){this.hls.trigger(Le.SUBTITLE_TRACK_SWITCH,{id:e});return}const s=!!i.details&&!i.details.live;if(e===this.trackId&&i===n&&s)return;this.log(`Switching to subtitle-track ${e}`+(i?` "${i.name}" lang:${i.lang} group:${i.groupId}`:""));const{id:o,groupId:c="",name:u,type:l,url:d}=i;this.hls.trigger(Le.SUBTITLE_TRACK_SWITCH,{id:o,groupId:c,name:u,type:l,url:d});const f=this.switchParams(i.url,n?.details,i.details);this.loadPlaylist(f)}}function AHe(){try{return crypto.randomUUID()}catch{try{const e=URL.createObjectURL(new Blob),r=e.toString();return URL.revokeObjectURL(e),r.slice(r.lastIndexOf("/")+1)}catch{let r=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,i=>{const s=(r+Math.random()*16)%16|0;return r=Math.floor(r/16),(i=="x"?s:s&3|8).toString(16)})}}}function oE(t){let e=5381,r=t.length;for(;r;)e=e*33^t.charCodeAt(--r);return(e>>>0).toString()}const gb=.025;let eN=(function(t){return t[t.Point=0]="Point",t[t.Range=1]="Range",t})({});function mHe(t,e,r){return`${t.identifier}-${r+1}-${oE(e)}`}class pHe{constructor(e,r){this.base=void 0,this._duration=null,this._timelineStart=null,this.appendInPlaceDisabled=void 0,this.appendInPlaceStarted=void 0,this.dateRange=void 0,this.hasPlayed=!1,this.cumulativeDuration=0,this.resumeOffset=NaN,this.playoutLimit=NaN,this.restrictions={skip:!1,jump:!1},this.snapOptions={out:!1,in:!1},this.assetList=[],this.assetListLoader=void 0,this.assetListResponse=null,this.resumeAnchor=void 0,this.error=void 0,this.resetOnResume=void 0,this.base=r,this.dateRange=e,this.setDateRange(e)}setDateRange(e){this.dateRange=e,this.resumeOffset=e.attr.optionalFloat("X-RESUME-OFFSET",this.resumeOffset),this.playoutLimit=e.attr.optionalFloat("X-PLAYOUT-LIMIT",this.playoutLimit),this.restrictions=e.attr.enumeratedStringList("X-RESTRICT",this.restrictions),this.snapOptions=e.attr.enumeratedStringList("X-SNAP",this.snapOptions)}reset(){var e;this.appendInPlaceStarted=!1,(e=this.assetListLoader)==null||e.destroy(),this.assetListLoader=void 0,this.supplementsPrimary||(this.assetListResponse=null,this.assetList=[],this._duration=null)}isAssetPastPlayoutLimit(e){var r;if(e>0&&e>=this.assetList.length)return!0;const n=this.playoutLimit;return e<=0||isNaN(n)?!1:n===0?!0:(((r=this.assetList[e])==null?void 0:r.startOffset)||0)>n}findAssetIndex(e){return this.assetList.indexOf(e)}get identifier(){return this.dateRange.id}get startDate(){return this.dateRange.startDate}get startTime(){const e=this.dateRange.startTime;if(this.snapOptions.out){const r=this.dateRange.tagAnchor;if(r)return N4(e,r)}return e}get startOffset(){return this.cue.pre?0:this.startTime}get startIsAligned(){if(this.startTime===0||this.snapOptions.out)return!0;const e=this.dateRange.tagAnchor;if(e){const r=this.dateRange.startTime,n=N4(r,e);return r-n<.1}return!1}get resumptionOffset(){const e=this.resumeOffset,r=qn(e)?e:this.duration;return this.cumulativeDuration+r}get resumeTime(){const e=this.startOffset+this.resumptionOffset;if(this.snapOptions.in){const r=this.resumeAnchor;if(r)return N4(e,r)}return e}get appendInPlace(){return this.appendInPlaceStarted?!0:this.appendInPlaceDisabled?!1:!!(!this.cue.once&&!this.cue.pre&&this.startIsAligned&&(isNaN(this.playoutLimit)&&isNaN(this.resumeOffset)||this.resumeOffset&&this.duration&&Math.abs(this.resumeOffset-this.duration)<gb))}set appendInPlace(e){if(this.appendInPlaceStarted){this.resetOnResume=!e;return}this.appendInPlaceDisabled=!e}get timelineStart(){return this._timelineStart!==null?this._timelineStart:this.startTime}set timelineStart(e){this._timelineStart=e}get duration(){const e=this.playoutLimit;let r;return this._duration!==null?r=this._duration:this.dateRange.duration?r=this.dateRange.duration:r=this.dateRange.plannedDuration||0,!isNaN(e)&&e<r&&(r=e),r}set duration(e){this._duration=e}get cue(){return this.dateRange.cue}get timelineOccupancy(){return this.dateRange.attr["X-TIMELINE-OCCUPIES"]==="RANGE"?eN.Range:eN.Point}get supplementsPrimary(){return this.dateRange.attr["X-TIMELINE-STYLE"]==="PRIMARY"}get contentMayVary(){return this.dateRange.attr["X-CONTENT-MAY-VARY"]!=="NO"}get assetUrl(){return this.dateRange.attr["X-ASSET-URI"]}get assetListUrl(){return this.dateRange.attr["X-ASSET-LIST"]}get baseUrl(){return this.base.url}get assetListLoaded(){return this.assetList.length>0||this.assetListResponse!==null}toString(){return gHe(this)}}function N4(t,e){return t-e.start<e.duration/2&&!(Math.abs(t-(e.start+e.duration))<gb)?e.start:e.start+e.duration}function use(t,e,r){const n=new self.URL(t,r);return n.protocol!=="data:"&&n.searchParams.set("_HLS_primary_id",e),n}function k4(t,e){for(;(r=t.assetList[++e])!=null&&r.error;)var r;return e}function gHe(t){return`["${t.identifier}" ${t.cue.pre?"<pre>":t.cue.post?"<post>":""}${t.timelineStart.toFixed(2)}-${t.resumeTime.toFixed(2)}]`}function wx(t){const e=t.timelineStart,r=t.duration||0;return`["${t.identifier}" ${e.toFixed(2)}-${(e+r).toFixed(2)}]`}class vHe{constructor(e,r,n,i){this.hls=void 0,this.interstitial=void 0,this.assetItem=void 0,this.tracks=null,this.hasDetails=!1,this.mediaAttached=null,this._currentTime=void 0,this._bufferedEosTime=void 0,this.checkPlayout=()=>{this.reachedPlayout(this.currentTime)&&this.hls&&this.hls.trigger(Le.PLAYOUT_LIMIT_REACHED,{})};const s=this.hls=new e(r);this.interstitial=n,this.assetItem=i;const o=()=>{this.hasDetails=!0};s.once(Le.LEVEL_LOADED,o),s.once(Le.AUDIO_TRACK_LOADED,o),s.once(Le.SUBTITLE_TRACK_LOADED,o),s.on(Le.MEDIA_ATTACHING,(c,{media:u})=>{this.removeMediaListeners(),this.mediaAttached=u,this.interstitial.playoutLimit&&(u.addEventListener("timeupdate",this.checkPlayout),this.appendInPlace&&s.on(Le.BUFFER_APPENDED,()=>{const d=this.bufferedEnd;this.reachedPlayout(d)&&(this._bufferedEosTime=d,s.trigger(Le.BUFFERED_TO_END,void 0))}))})}get appendInPlace(){return this.interstitial.appendInPlace}loadSource(){const e=this.hls;if(e)if(e.url)e.levels.length&&!e.started&&e.startLoad(-1,!0);else{let r=this.assetItem.uri;try{r=use(r,e.config.primarySessionId||"").href}catch{}e.loadSource(r)}}bufferedInPlaceToEnd(e){var r;if(!this.appendInPlace)return!1;if((r=this.hls)!=null&&r.bufferedToEnd)return!0;if(!e)return!1;const n=Math.min(this._bufferedEosTime||1/0,this.duration),i=this.timelineOffset,s=Hs.bufferInfo(e,i,0);return this.getAssetTime(s.end)>=n-.02}reachedPlayout(e){const n=this.interstitial.playoutLimit;return this.startOffset+e>=n}get destroyed(){var e;return!((e=this.hls)!=null&&e.userConfig)}get assetId(){return this.assetItem.identifier}get interstitialId(){return this.assetItem.parentIdentifier}get media(){var e;return((e=this.hls)==null?void 0:e.media)||null}get bufferedEnd(){const e=this.media||this.mediaAttached;if(!e)return this._bufferedEosTime?this._bufferedEosTime:this.currentTime;const r=Hs.bufferInfo(e,e.currentTime,.001);return this.getAssetTime(r.end)}get currentTime(){const e=this.media||this.mediaAttached;return e?this.getAssetTime(e.currentTime):this._currentTime||0}get duration(){const e=this.assetItem.duration;if(!e)return 0;const r=this.interstitial.playoutLimit;if(r){const n=r-this.startOffset;if(n>0&&n<e)return n}return e}get remaining(){const e=this.duration;return e?Math.max(0,e-this.currentTime):0}get startOffset(){return this.assetItem.startOffset}get timelineOffset(){var e;return((e=this.hls)==null?void 0:e.config.timelineOffset)||0}set timelineOffset(e){const r=this.timelineOffset;if(e!==r){const n=e-r;if(Math.abs(n)>1/9e4&&this.hls){if(this.hasDetails)throw new Error("Cannot set timelineOffset after playlists are loaded");this.hls.config.timelineOffset=e}}}getAssetTime(e){const r=this.timelineOffset,n=this.duration;return Math.min(Math.max(0,e-r),n)}removeMediaListeners(){const e=this.mediaAttached;e&&(this._currentTime=e.currentTime,this.bufferSnapShot(),e.removeEventListener("timeupdate",this.checkPlayout))}bufferSnapShot(){if(this.mediaAttached){var e;(e=this.hls)!=null&&e.bufferedToEnd&&(this._bufferedEosTime=this.bufferedEnd)}}destroy(){this.removeMediaListeners(),this.hls&&this.hls.destroy(),this.hls=null,this.tracks=this.mediaAttached=this.checkPlayout=null}attachMedia(e){var r;this.loadSource(),(r=this.hls)==null||r.attachMedia(e)}detachMedia(){var e;this.removeMediaListeners(),this.mediaAttached=null,(e=this.hls)==null||e.detachMedia()}resumeBuffering(){var e;(e=this.hls)==null||e.resumeBuffering()}pauseBuffering(){var e;(e=this.hls)==null||e.pauseBuffering()}transferMedia(){var e;return this.bufferSnapShot(),((e=this.hls)==null?void 0:e.transferMedia())||null}resetDetails(){const e=this.hls;if(e&&this.hasDetails){e.stopLoad();const r=n=>delete n.details;e.levels.forEach(r),e.allAudioTracks.forEach(r),e.allSubtitleTracks.forEach(r),this.hasDetails=!1}}on(e,r,n){var i;(i=this.hls)==null||i.on(e,r)}once(e,r,n){var i;(i=this.hls)==null||i.once(e,r)}off(e,r,n){var i;(i=this.hls)==null||i.off(e,r)}toString(){var e;return`HlsAssetPlayer: ${wx(this.assetItem)} ${(e=this.hls)==null?void 0:e.sessionId} ${this.appendInPlace?"append-in-place":""}`}}const aG=.033;class yHe extends iA{constructor(e,r){super("interstitials-sched",r),this.onScheduleUpdate=void 0,this.eventMap={},this.events=null,this.items=null,this.durations={primary:0,playout:0,integrated:0},this.onScheduleUpdate=e}destroy(){this.reset(),this.onScheduleUpdate=null}reset(){this.eventMap={},this.setDurations(0,0,0),this.events&&this.events.forEach(e=>e.reset()),this.events=this.items=null}resetErrorsInRange(e,r){return this.events?this.events.reduce((n,i)=>e<=i.startOffset&&r>i.startOffset?(delete i.error,n+1):n,0):0}get duration(){const e=this.items;return e?e[e.length-1].end:0}get length(){return this.items?this.items.length:0}getEvent(e){return e&&this.eventMap[e]||null}hasEvent(e){return e in this.eventMap}findItemIndex(e,r){if(e.event)return this.findEventIndex(e.event.identifier);let n=-1;e.nextEvent?n=this.findEventIndex(e.nextEvent.identifier)-1:e.previousEvent&&(n=this.findEventIndex(e.previousEvent.identifier)+1);const i=this.items;if(i)for(i[n]||(r===void 0&&(r=e.start),n=this.findItemIndexAtTime(r));n>=0&&(s=i[n])!=null&&s.event;){var s;n--}return n}findItemIndexAtTime(e,r){const n=this.items;if(n)for(let i=0;i<n.length;i++){let s=n[i];if(r&&r!=="primary"&&(s=s[r]),e===s.start||e>s.start&&e<s.end)return i}return-1}findJumpRestrictedIndex(e,r){const n=this.items;if(n)for(let i=e;i<=r&&n[i];i++){const s=n[i].event;if(s!=null&&s.restrictions.jump&&!s.appendInPlace)return i}return-1}findEventIndex(e){const r=this.items;if(r)for(let i=r.length;i--;){var n;if(((n=r[i].event)==null?void 0:n.identifier)===e)return i}return-1}findAssetIndex(e,r){const n=e.assetList,i=n.length;if(i>1)for(let s=0;s<i;s++){const o=n[s];if(!o.error){const c=o.timelineStart;if(r===c||r>c&&(r<c+(o.duration||0)||s===i-1))return s}}return 0}get assetIdAtEnd(){var e;const r=(e=this.items)==null||(e=e[this.length-1])==null?void 0:e.event;if(r){const n=r.assetList,i=n[n.length-1];if(i)return i.identifier}return null}parseInterstitialDateRanges(e,r){const n=e.main.details,{dateRanges:i}=n,s=this.events,o=this.parseDateRanges(i,{url:n.url},r),c=Object.keys(i),u=s?s.filter(l=>!c.includes(l.identifier)):[];o.length&&o.sort((l,d)=>{const f=l.cue.pre,A=l.cue.post,p=d.cue.pre,g=d.cue.post;if(f&&!p)return-1;if(p&&!f||A&&!g)return 1;if(g&&!A)return-1;if(!f&&!p&&!A&&!g){const y=l.startTime,x=d.startTime;if(y!==x)return y-x}return l.dateRange.tagOrder-d.dateRange.tagOrder}),this.events=o,u.forEach(l=>{this.removeEvent(l)}),this.updateSchedule(e,u)}updateSchedule(e,r=[],n=!1){const i=this.events||[];if(i.length||r.length||this.length<2){const s=this.items,o=this.parseSchedule(i,e);(n||r.length||s?.length!==o.length||o.some((u,l)=>Math.abs(u.playout.start-s[l].playout.start)>.005||Math.abs(u.playout.end-s[l].playout.end)>.005))&&(this.items=o,this.onScheduleUpdate(r,s))}}parseDateRanges(e,r,n){const i=[],s=Object.keys(e);for(let o=0;o<s.length;o++){const c=s[o],u=e[c];if(u.isInterstitial){let l=this.eventMap[c];l?l.setDateRange(u):(l=new pHe(u,r),this.eventMap[c]=l,n===!1&&(l.appendInPlace=n)),i.push(l)}}return i}parseSchedule(e,r){const n=[],i=r.main.details,s=i.live?1/0:i.edge;let o=0;if(e=e.filter(u=>!u.error&&!(u.cue.once&&u.hasPlayed)),e.length){this.resolveOffsets(e,r);let u=0,l=0;if(e.forEach((d,f)=>{const A=d.cue.pre,p=d.cue.post,g=e[f-1]||null,y=d.appendInPlace,x=p?s:d.startOffset,w=d.duration,E=d.timelineOccupancy===eN.Range?w:0,T=d.resumptionOffset,C=g?.startTime===x,N=x+d.cumulativeDuration;let I=y?N+w:x+T;if(A||!p&&x<=0){const K=l;l+=E,d.timelineStart=N;const Y=o;o+=w,n.push({event:d,start:N,end:I,playout:{start:Y,end:o},integrated:{start:K,end:l}})}else if(x<=s){if(!C){const re=x-u;if(re>aG){const se=u,Ae=l;l+=re;const we=o;o+=re;const Ce={previousEvent:e[f-1]||null,nextEvent:d,start:se,end:se+re,playout:{start:we,end:o},integrated:{start:Ae,end:l}};n.push(Ce)}else re>0&&g&&(g.cumulativeDuration+=re,n[n.length-1].end=x)}p&&(I=N),d.timelineStart=N;const K=l;l+=E;const Y=o;o+=w,n.push({event:d,start:N,end:I,playout:{start:Y,end:o},integrated:{start:K,end:l}})}else return;const U=d.resumeTime;p||U>s?u=s:u=U}),u<s){var c;const d=u,f=l,A=s-u;l+=A;const p=o;o+=A,n.push({previousEvent:((c=n[n.length-1])==null?void 0:c.event)||null,nextEvent:null,start:u,end:d+A,playout:{start:p,end:o},integrated:{start:f,end:l}})}this.setDurations(s,o,l)}else n.push({previousEvent:null,nextEvent:null,start:0,end:s,playout:{start:0,end:s},integrated:{start:0,end:s}}),this.setDurations(s,s,s);return n}setDurations(e,r,n){this.durations={primary:e,playout:r,integrated:n}}resolveOffsets(e,r){const n=r.main.details,i=n.live?1/0:n.edge;let s=0,o=-1;e.forEach((c,u)=>{const l=c.cue.pre,d=c.cue.post,f=l?0:d?i:c.startTime;this.updateAssetDurations(c),o===f?c.cumulativeDuration=s:(s=0,o=f),!d&&c.snapOptions.in&&(c.resumeAnchor=yy(null,n.fragments,c.startOffset+c.resumptionOffset,0,0)||void 0),c.appendInPlace&&!c.appendInPlaceStarted&&(this.primaryCanResumeInPlaceAt(c,r)||(c.appendInPlace=!1)),!c.appendInPlace&&u+1<e.length&&e[u+1].startTime-e[u].resumeTime<aG&&(e[u+1].appendInPlace=!1,e[u+1].appendInPlace&&this.warn(`Could not change append strategy for abutting event ${c}`));const p=qn(c.resumeOffset)?c.resumeOffset:c.duration;s+=p})}primaryCanResumeInPlaceAt(e,r){const n=e.resumeTime,i=e.startTime+e.resumptionOffset;return Math.abs(n-i)>gb?(this.log(`"${e.identifier}" resumption ${n} not aligned with estimated timeline end ${i}`),!1):!Object.keys(r).some(o=>{const c=r[o].details,u=c.edge;if(n>=u)return this.log(`"${e.identifier}" resumption ${n} past ${o} playlist end ${u}`),!1;const l=yy(null,c.fragments,n);if(!l)return this.log(`"${e.identifier}" resumption ${n} does not align with any fragments in ${o} playlist (${c.fragStart}-${c.fragmentEnd})`),!0;const d=o==="audio"?.175:0;return Math.abs(l.start-n)<gb+d||Math.abs(l.end-n)<gb+d?!1:(this.log(`"${e.identifier}" resumption ${n} not aligned with ${o} fragment bounds (${l.start}-${l.end} sn: ${l.sn} cc: ${l.cc})`),!0)})}updateAssetDurations(e){if(!e.assetListLoaded)return;const r=e.timelineStart;let n=0,i=!1,s=!1;for(let o=0;o<e.assetList.length;o++){const c=e.assetList[o],u=r+n;c.startOffset=n,c.timelineStart=u,i||(i=c.duration===null),s||(s=!!c.error);const l=c.error?0:c.duration||0;n+=l}i&&!s?e.duration=Math.max(n,e.duration):e.duration=n}removeEvent(e){e.reset(),delete this.eventMap[e.identifier]}}function gA(t){return`[${t.event?'"'+t.event.identifier+'"':"primary"}: ${t.start.toFixed(2)}-${t.end.toFixed(2)}]`}class xHe{constructor(e){this.hls=void 0,this.hls=e}destroy(){this.hls=null}loadAssetList(e,r){const n=e.assetListUrl;let i;try{i=use(n,this.hls.sessionId,e.baseUrl)}catch(A){const p=this.assignAssetListError(e,vr.ASSET_LIST_LOAD_ERROR,A,n);this.hls.trigger(Le.ERROR,p);return}r&&i.protocol!=="data:"&&i.searchParams.set("_HLS_start_offset",""+r);const s=this.hls.config,o=s.loader,c=new o(s),u={responseType:"json",url:i.href},l=s.interstitialAssetListLoadPolicy.default,d={loadPolicy:l,timeout:l.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},f={onSuccess:(A,p,g,y)=>{const x=A.data,w=x?.ASSETS;if(!Array.isArray(w)){const E=this.assignAssetListError(e,vr.ASSET_LIST_PARSING_ERROR,new Error("Invalid interstitial asset list"),g.url,p,y);this.hls.trigger(Le.ERROR,E);return}e.assetListResponse=x,this.hls.trigger(Le.ASSET_LIST_LOADED,{event:e,assetListResponse:x,networkDetails:y})},onError:(A,p,g,y)=>{const x=this.assignAssetListError(e,vr.ASSET_LIST_LOAD_ERROR,new Error(`Error loading X-ASSET-LIST: HTTP status ${A.code} ${A.text} (${p.url})`),p.url,y,g);this.hls.trigger(Le.ERROR,x)},onTimeout:(A,p,g)=>{const y=this.assignAssetListError(e,vr.ASSET_LIST_LOAD_TIMEOUT,new Error(`Timeout loading X-ASSET-LIST (${p.url})`),p.url,A,g);this.hls.trigger(Le.ERROR,y)}};return c.load(u,d,f),this.hls.trigger(Le.ASSET_LIST_LOADING,{event:e}),c}assignAssetListError(e,r,n,i,s,o){return e.error=n,{type:Oi.NETWORK_ERROR,details:r,fatal:!1,interstitial:e,url:i,error:n,networkDetails:o,stats:s}}}function oG(t){var e;t==null||(e=t.play())==null||e.catch(()=>{})}function yS(t,e){return`[${t}] Advancing timeline position to ${e}`}class bHe extends iA{constructor(e,r){super("interstitials",e.logger),this.HlsPlayerClass=void 0,this.hls=void 0,this.assetListLoader=void 0,this.mediaSelection=null,this.altSelection=null,this.media=null,this.detachedData=null,this.requiredTracks=null,this.manager=null,this.playerQueue=[],this.bufferedPos=-1,this.timelinePos=-1,this.schedule=void 0,this.playingItem=null,this.bufferingItem=null,this.waitingItem=null,this.endedItem=null,this.playingAsset=null,this.endedAsset=null,this.bufferingAsset=null,this.shouldPlay=!1,this.onPlay=()=>{this.shouldPlay=!0},this.onPause=()=>{this.shouldPlay=!1},this.onSeeking=()=>{const n=this.currentTime;if(n===void 0||this.playbackDisabled||!this.schedule)return;const i=n-this.timelinePos;if(Math.abs(i)<1/7056e5)return;const o=i<=-.01;this.timelinePos=n,this.bufferedPos=n;const c=this.playingItem;if(!c){this.checkBuffer();return}if(o&&this.schedule.resetErrorsInRange(n,n-i)&&this.updateSchedule(!0),this.checkBuffer(),o&&n<c.start||n>=c.end){var u;const p=this.findItemIndex(c);let g=this.schedule.findItemIndexAtTime(n);if(g===-1&&(g=p+(o?-1:1),this.log(`seeked ${o?"back ":""}to position not covered by schedule ${n} (resolving from ${p} to ${g})`)),!this.isInterstitial(c)&&(u=this.media)!=null&&u.paused&&(this.shouldPlay=!1),!o&&g>p){const y=this.schedule.findJumpRestrictedIndex(p+1,g);if(y>p){this.setSchedulePosition(y);return}}this.setSchedulePosition(g);return}const l=this.playingAsset;if(!l){if(this.playingLastItem&&this.isInterstitial(c)){const p=c.event.assetList[0];p&&(this.endedItem=this.playingItem,this.playingItem=null,this.setScheduleToAssetAtTime(n,p))}return}const d=l.timelineStart,f=l.duration||0;if(o&&n<d||n>=d+f){var A;(A=c.event)!=null&&A.appendInPlace&&(this.clearAssetPlayers(c.event,c),this.flushFrontBuffer(n)),this.setScheduleToAssetAtTime(n,l)}},this.onTimeupdate=()=>{const n=this.currentTime;if(n===void 0||this.playbackDisabled)return;if(n>this.timelinePos)this.timelinePos=n,n>this.bufferedPos&&this.checkBuffer();else return;const i=this.playingItem;if(!i||this.playingLastItem)return;if(n>=i.end){this.timelinePos=i.end;const c=this.findItemIndex(i);this.setSchedulePosition(c+1)}const s=this.playingAsset;if(!s)return;const o=s.timelineStart+(s.duration||0);n>=o&&this.setScheduleToAssetAtTime(n,s)},this.onScheduleUpdate=(n,i)=>{const s=this.schedule;if(!s)return;const o=this.playingItem,c=s.events||[],u=s.items||[],l=s.durations,d=n.map(y=>y.identifier),f=!!(c.length||d.length);(f||i)&&this.log(`INTERSTITIALS_UPDATED (${c.length}): ${c}
Schedule: ${u.map(y=>gA(y))} pos: ${this.timelinePos}`),d.length&&this.log(`Removed events ${d}`);let A=null,p=null;o&&(A=this.updateItem(o,this.timelinePos),this.itemsMatch(o,A)?this.playingItem=A:this.waitingItem=this.endedItem=null),this.waitingItem=this.updateItem(this.waitingItem),this.endedItem=this.updateItem(this.endedItem);const g=this.bufferingItem;if(g&&(p=this.updateItem(g,this.bufferedPos),this.itemsMatch(g,p)?this.bufferingItem=p:g.event&&(this.bufferingItem=this.playingItem,this.clearInterstitial(g.event,null))),n.forEach(y=>{y.assetList.forEach(x=>{this.clearAssetPlayer(x.identifier,null)})}),this.playerQueue.forEach(y=>{if(y.interstitial.appendInPlace){const x=y.assetItem.timelineStart,w=y.timelineOffset-x;if(w)try{y.timelineOffset=x}catch(E){Math.abs(w)>gb&&this.warn(`${E} ("${y.assetId}" ${y.timelineOffset}->${x})`)}}}),f||i){if(this.hls.trigger(Le.INTERSTITIALS_UPDATED,{events:c.slice(0),schedule:u.slice(0),durations:l,removedIds:d}),this.isInterstitial(o)&&d.includes(o.event.identifier)){this.warn(`Interstitial "${o.event.identifier}" removed while playing`),this.primaryFallback(o.event);return}o&&this.trimInPlace(A,o),g&&p!==A&&this.trimInPlace(p,g),this.checkBuffer()}},this.hls=e,this.HlsPlayerClass=r,this.assetListLoader=new xHe(e),this.schedule=new yHe(this.onScheduleUpdate,e.logger),this.registerListeners()}registerListeners(){const e=this.hls;e&&(e.on(Le.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(Le.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(Le.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(Le.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Le.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(Le.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(Le.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.on(Le.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(Le.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.on(Le.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.on(Le.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.on(Le.BUFFER_APPENDED,this.onBufferAppended,this),e.on(Le.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(Le.BUFFERED_TO_END,this.onBufferedToEnd,this),e.on(Le.MEDIA_ENDED,this.onMediaEnded,this),e.on(Le.ERROR,this.onError,this),e.on(Le.DESTROYING,this.onDestroying,this))}unregisterListeners(){const e=this.hls;e&&(e.off(Le.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(Le.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(Le.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(Le.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Le.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(Le.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(Le.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.off(Le.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(Le.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.off(Le.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.off(Le.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.off(Le.BUFFER_CODECS,this.onBufferCodecs,this),e.off(Le.BUFFER_APPENDED,this.onBufferAppended,this),e.off(Le.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(Le.BUFFERED_TO_END,this.onBufferedToEnd,this),e.off(Le.MEDIA_ENDED,this.onMediaEnded,this),e.off(Le.ERROR,this.onError,this),e.off(Le.DESTROYING,this.onDestroying,this))}startLoad(){this.resumeBuffering()}stopLoad(){this.pauseBuffering()}resumeBuffering(){var e;(e=this.getBufferingPlayer())==null||e.resumeBuffering()}pauseBuffering(){var e;(e=this.getBufferingPlayer())==null||e.pauseBuffering()}destroy(){this.unregisterListeners(),this.stopLoad(),this.assetListLoader&&this.assetListLoader.destroy(),this.emptyPlayerQueue(),this.clearScheduleState(),this.schedule&&this.schedule.destroy(),this.media=this.detachedData=this.mediaSelection=this.requiredTracks=this.altSelection=this.schedule=this.manager=null,this.hls=this.HlsPlayerClass=this.log=null,this.assetListLoader=null,this.onPlay=this.onPause=this.onSeeking=this.onTimeupdate=null,this.onScheduleUpdate=null}onDestroying(){const e=this.primaryMedia||this.media;e&&this.removeMediaListeners(e)}removeMediaListeners(e){Uh(e,"play",this.onPlay),Uh(e,"pause",this.onPause),Uh(e,"seeking",this.onSeeking),Uh(e,"timeupdate",this.onTimeupdate)}onMediaAttaching(e,r){const n=this.media=r.media;vh(n,"seeking",this.onSeeking),vh(n,"timeupdate",this.onTimeupdate),vh(n,"play",this.onPlay),vh(n,"pause",this.onPause)}onMediaAttached(e,r){const n=this.effectivePlayingItem,i=this.detachedData;if(this.detachedData=null,n===null)this.checkStart();else if(!i){this.clearScheduleState();const s=this.findItemIndex(n);this.setSchedulePosition(s)}}clearScheduleState(){this.log("clear schedule state"),this.playingItem=this.bufferingItem=this.waitingItem=this.endedItem=this.playingAsset=this.endedAsset=this.bufferingAsset=null}onMediaDetaching(e,r){const n=!!r.transferMedia,i=this.media;if(this.media=null,!n&&(i&&this.removeMediaListeners(i),this.detachedData)){const s=this.getBufferingPlayer();s&&(this.log(`Removing schedule state for detachedData and ${s}`),this.playingAsset=this.endedAsset=this.bufferingAsset=this.bufferingItem=this.waitingItem=this.detachedData=null,s.detachMedia()),this.shouldPlay=!1}}get interstitialsManager(){if(!this.hls)return null;if(this.manager)return this.manager;const e=this,r=()=>e.bufferingItem||e.waitingItem,n=f=>f&&e.getAssetPlayer(f.identifier),i=(f,A,p,g,y)=>{if(f){let x=f[A].start;const w=f.event;if(w){if(A==="playout"||w.timelineOccupancy!==eN.Point){const E=n(p);E?.interstitial===w&&(x+=E.assetItem.startOffset+E[y])}}else{const E=g==="bufferedPos"?o():e[g];x+=E-f.start}return x}return 0},s=(f,A)=>{var p;if(f!==0&&A!=="primary"&&(p=e.schedule)!=null&&p.length){var g;const y=e.schedule.findItemIndexAtTime(f),x=(g=e.schedule.items)==null?void 0:g[y];if(x){const w=x[A].start-x.start;return f+w}}return f},o=()=>{const f=e.bufferedPos;return f===Number.MAX_VALUE?c("primary"):Math.max(f,0)},c=f=>{var A,p;return(A=e.primaryDetails)!=null&&A.live?e.primaryDetails.edge:((p=e.schedule)==null?void 0:p.durations[f])||0},u=(f,A)=>{var p,g;const y=e.effectivePlayingItem;if(y!=null&&(p=y.event)!=null&&p.restrictions.skip||!e.schedule)return;e.log(`seek to ${f} "${A}"`);const x=e.effectivePlayingItem,w=e.schedule.findItemIndexAtTime(f,A),E=(g=e.schedule.items)==null?void 0:g[w],T=e.getBufferingPlayer(),C=T?.interstitial,N=C?.appendInPlace,I=x&&e.itemsMatch(x,E);if(x&&(N||I)){const U=n(e.playingAsset),K=U?.media||e.primaryMedia;if(K){const Y=A==="primary"?K.currentTime:i(x,A,e.playingAsset,"timelinePos","currentTime"),re=f-Y,se=(N?Y:K.currentTime)+re;if(se>=0&&(!U||N||se<=U.duration)){K.currentTime=se;return}}}if(E){let U=f;if(A!=="primary"){const Y=E[A].start,re=f-Y;U=E.start+re}const K=!e.isInterstitial(E);if((!e.isInterstitial(x)||x.event.appendInPlace)&&(K||E.event.appendInPlace)){const Y=e.media||(N?T?.media:null);Y&&(Y.currentTime=U)}else if(x){const Y=e.findItemIndex(x);if(w>Y){const se=e.schedule.findJumpRestrictedIndex(Y+1,w);if(se>Y){e.setSchedulePosition(se);return}}let re=0;if(K)e.timelinePos=U,e.checkBuffer();else{const se=E.event.assetList,Ae=f-(E[A]||E).start;for(let we=se.length;we--;){const Ce=se[we];if(Ce.duration&&Ae>=Ce.startOffset&&Ae<Ce.startOffset+Ce.duration){re=we;break}}}e.setSchedulePosition(w,re)}}},l=()=>{const f=e.effectivePlayingItem;if(e.isInterstitial(f))return f;const A=r();return e.isInterstitial(A)?A:null},d={get bufferedEnd(){const f=r(),A=e.bufferingItem;if(A&&A===f){var p;return i(A,"playout",e.bufferingAsset,"bufferedPos","bufferedEnd")-A.playout.start||((p=e.bufferingAsset)==null?void 0:p.startOffset)||0}return 0},get currentTime(){const f=l(),A=e.effectivePlayingItem;return A&&A===f?i(A,"playout",e.effectivePlayingAsset,"timelinePos","currentTime")-A.playout.start:0},set currentTime(f){const A=l(),p=e.effectivePlayingItem;p&&p===A&&u(f+p.playout.start,"playout")},get duration(){const f=l();return f?f.playout.end-f.playout.start:0},get assetPlayers(){var f;const A=(f=l())==null?void 0:f.event.assetList;return A?A.map(p=>e.getAssetPlayer(p.identifier)):[]},get playingIndex(){var f;const A=(f=l())==null?void 0:f.event;return A&&e.effectivePlayingAsset?A.findAssetIndex(e.effectivePlayingAsset):-1},get scheduleItem(){return l()}};return this.manager={get events(){var f;return((f=e.schedule)==null||(f=f.events)==null?void 0:f.slice(0))||[]},get schedule(){var f;return((f=e.schedule)==null||(f=f.items)==null?void 0:f.slice(0))||[]},get interstitialPlayer(){return l()?d:null},get playerQueue(){return e.playerQueue.slice(0)},get bufferingAsset(){return e.bufferingAsset},get bufferingItem(){return r()},get bufferingIndex(){const f=r();return e.findItemIndex(f)},get playingAsset(){return e.effectivePlayingAsset},get playingItem(){return e.effectivePlayingItem},get playingIndex(){const f=e.effectivePlayingItem;return e.findItemIndex(f)},primary:{get bufferedEnd(){return o()},get currentTime(){const f=e.timelinePos;return f>0?f:0},set currentTime(f){u(f,"primary")},get duration(){return c("primary")},get seekableStart(){var f;return((f=e.primaryDetails)==null?void 0:f.fragmentStart)||0}},integrated:{get bufferedEnd(){return i(r(),"integrated",e.bufferingAsset,"bufferedPos","bufferedEnd")},get currentTime(){return i(e.effectivePlayingItem,"integrated",e.effectivePlayingAsset,"timelinePos","currentTime")},set currentTime(f){u(f,"integrated")},get duration(){return c("integrated")},get seekableStart(){var f;return s(((f=e.primaryDetails)==null?void 0:f.fragmentStart)||0,"integrated")}},skip:()=>{const f=e.effectivePlayingItem,A=f?.event;if(A&&!A.restrictions.skip){const p=e.findItemIndex(f);if(A.appendInPlace){const g=f.playout.start+f.event.duration;u(g+.001,"playout")}else e.advanceAfterAssetEnded(A,p,1/0)}}}}get effectivePlayingItem(){return this.waitingItem||this.playingItem||this.endedItem}get effectivePlayingAsset(){return this.playingAsset||this.endedAsset}get playingLastItem(){var e;const r=this.playingItem,n=(e=this.schedule)==null?void 0:e.items;return!this.playbackStarted||!r||!n?!1:this.findItemIndex(r)===n.length-1}get playbackStarted(){return this.effectivePlayingItem!==null}get currentTime(){var e,r;if(this.mediaSelection===null)return;const n=this.waitingItem||this.playingItem;if(this.isInterstitial(n)&&!n.event.appendInPlace)return;let i=this.media;!i&&(e=this.bufferingItem)!=null&&(e=e.event)!=null&&e.appendInPlace&&(i=this.primaryMedia);const s=(r=i)==null?void 0:r.currentTime;if(!(s===void 0||!qn(s)))return s}get primaryMedia(){var e;return this.media||((e=this.detachedData)==null?void 0:e.media)||null}isInterstitial(e){return!!(e!=null&&e.event)}retreiveMediaSource(e,r){const n=this.getAssetPlayer(e);n&&this.transferMediaFromPlayer(n,r)}transferMediaFromPlayer(e,r){const n=e.interstitial.appendInPlace,i=e.media;if(n&&i===this.primaryMedia){if(this.bufferingAsset=null,(!r||this.isInterstitial(r)&&!r.event.appendInPlace)&&r&&i){this.detachedData={media:i};return}const s=e.transferMedia();this.log(`transfer MediaSource from ${e} ${fl(s)}`),this.detachedData=s}else r&&i&&(this.shouldPlay||(this.shouldPlay=!i.paused))}transferMediaTo(e,r){var n,i;if(e.media===r)return;let s=null;const o=this.hls,c=e!==o,u=c&&e.interstitial.appendInPlace,l=(n=this.detachedData)==null?void 0:n.mediaSource;let d;if(o.media)u&&(s=o.transferMedia(),this.detachedData=s),d="Primary";else if(l){const g=this.getBufferingPlayer();g?(s=g.transferMedia(),d=`${g}`):d="detached MediaSource"}else d="detached media";if(!s){if(l)s=this.detachedData,this.log(`using detachedData: MediaSource ${fl(s)}`);else if(!this.detachedData||o.media===r){const g=this.playerQueue;g.length>1&&g.forEach(y=>{if(c&&y.interstitial.appendInPlace!==u){const x=y.interstitial;this.clearInterstitial(y.interstitial,null),x.appendInPlace=!1,x.appendInPlace&&this.warn(`Could not change append strategy for queued assets ${x}`)}}),this.hls.detachMedia(),this.detachedData={media:r}}}const f=s&&"mediaSource"in s&&((i=s.mediaSource)==null?void 0:i.readyState)!=="closed",A=f&&s?s:r;this.log(`${f?"transfering MediaSource":"attaching media"} to ${c?e:"Primary"} from ${d} (media.currentTime: ${r.currentTime})`);const p=this.schedule;if(A===s&&p){const g=c&&e.assetId===p.assetIdAtEnd;A.overrides={duration:p.duration,endOfStream:!c||g,cueRemoval:!c}}e.attachMedia(A)}onInterstitialCueEnter(){this.onTimeupdate()}checkStart(){const e=this.schedule,r=e?.events;if(!r||this.playbackDisabled||!this.media)return;this.bufferedPos===-1&&(this.bufferedPos=0);const n=this.timelinePos,i=this.effectivePlayingItem;if(n===-1){const s=this.hls.startPosition;if(this.log(yS("checkStart",s)),this.timelinePos=s,r.length&&r[0].cue.pre){const o=e.findEventIndex(r[0].identifier);this.setSchedulePosition(o)}else if(s>=0||!this.primaryLive){const o=this.timelinePos=s>0?s:0,c=e.findItemIndexAtTime(o);this.setSchedulePosition(c)}}else if(i&&!this.playingItem){const s=e.findItemIndex(i);this.setSchedulePosition(s)}}advanceAssetBuffering(e,r){const n=e.event,i=n.findAssetIndex(r),s=k4(n,i);if(!n.isAssetPastPlayoutLimit(s))this.bufferedToEvent(e,s);else if(this.schedule){var o;const c=(o=this.schedule.items)==null?void 0:o[this.findItemIndex(e)+1];c&&this.bufferedToItem(c)}}advanceAfterAssetEnded(e,r,n){const i=k4(e,n);if(e.isAssetPastPlayoutLimit(i)){if(this.schedule){const s=this.schedule.items;if(s){const o=r+1,c=s.length;if(o>=c){this.setSchedulePosition(-1);return}const u=e.resumeTime;this.timelinePos<u&&(this.log(yS("advanceAfterAssetEnded",u)),this.timelinePos=u,e.appendInPlace&&this.advanceInPlace(u),this.checkBuffer(this.bufferedPos<u)),this.setSchedulePosition(o)}}}else{if(e.appendInPlace){const s=e.assetList[i];s&&this.advanceInPlace(s.timelineStart)}this.setSchedulePosition(r,i)}}setScheduleToAssetAtTime(e,r){const n=this.schedule;if(!n)return;const i=r.parentIdentifier,s=n.getEvent(i);if(s){const o=n.findEventIndex(i),c=n.findAssetIndex(s,e);this.advanceAfterAssetEnded(s,o,c-1)}}setSchedulePosition(e,r){var n;const i=(n=this.schedule)==null?void 0:n.items;if(!i||this.playbackDisabled)return;const s=e>=0?i[e]:null;this.log(`setSchedulePosition ${e}, ${r} (${s&&gA(s)}) pos: ${this.timelinePos}`);const o=this.waitingItem||this.playingItem,c=this.playingLastItem;if(this.isInterstitial(o)){const d=o.event,f=this.playingAsset,A=f?.identifier,p=A?this.getAssetPlayer(A):null;if(p&&A&&(!this.eventItemsMatch(o,s)||r!==void 0&&A!==d.assetList[r].identifier)){var u;const g=d.findAssetIndex(f);if(this.log(`INTERSTITIAL_ASSET_ENDED ${g+1}/${d.assetList.length} ${wx(f)}`),this.endedAsset=f,this.playingAsset=null,this.hls.trigger(Le.INTERSTITIAL_ASSET_ENDED,{asset:f,assetListIndex:g,event:d,schedule:i.slice(0),scheduleIndex:e,player:p}),o!==this.playingItem){this.itemsMatch(o,this.playingItem)&&!this.playingAsset&&this.advanceAfterAssetEnded(d,this.findItemIndex(this.playingItem),g);return}this.retreiveMediaSource(A,s),p.media&&!((u=this.detachedData)!=null&&u.mediaSource)&&p.detachMedia()}if(!this.eventItemsMatch(o,s)&&(this.endedItem=o,this.playingItem=null,this.log(`INTERSTITIAL_ENDED ${d} ${gA(o)}`),d.hasPlayed=!0,this.hls.trigger(Le.INTERSTITIAL_ENDED,{event:d,schedule:i.slice(0),scheduleIndex:e}),d.cue.once)){var l;this.updateSchedule();const g=(l=this.schedule)==null?void 0:l.items;if(s&&g){const y=this.findItemIndex(s);this.advanceSchedule(y,g,r,o,c)}return}}this.advanceSchedule(e,i,r,o,c)}advanceSchedule(e,r,n,i,s){const o=this.schedule;if(!o)return;const c=r[e]||null,u=this.primaryMedia,l=this.playerQueue;if(l.length&&l.forEach(d=>{const f=d.interstitial,A=o.findEventIndex(f.identifier);(A<e||A>e+1)&&this.clearInterstitial(f,c)}),this.isInterstitial(c)){this.timelinePos=Math.min(Math.max(this.timelinePos,c.start),c.end);const d=c.event;if(n===void 0){n=o.findAssetIndex(d,this.timelinePos);const g=k4(d,n-1);if(d.isAssetPastPlayoutLimit(g)||d.appendInPlace&&this.timelinePos===c.end){this.advanceAfterAssetEnded(d,e,n);return}n=g}const f=this.waitingItem;this.assetsBuffered(c,u)||this.setBufferingItem(c);let A=this.preloadAssets(d,n);if(this.eventItemsMatch(c,f||i)||(this.waitingItem=c,this.log(`INTERSTITIAL_STARTED ${gA(c)} ${d.appendInPlace?"append in place":""}`),this.hls.trigger(Le.INTERSTITIAL_STARTED,{event:d,schedule:r.slice(0),scheduleIndex:e})),!d.assetListLoaded){this.log(`Waiting for ASSET-LIST to complete loading ${d}`);return}if(d.assetListLoader&&(d.assetListLoader.destroy(),d.assetListLoader=void 0),!u){this.log(`Waiting for attachMedia to start Interstitial ${d}`);return}this.waitingItem=this.endedItem=null,this.playingItem=c;const p=d.assetList[n];if(!p){this.advanceAfterAssetEnded(d,e,n||0);return}if(A||(A=this.getAssetPlayer(p.identifier)),A===null||A.destroyed){const g=d.assetList.length;this.warn(`asset ${n+1}/${g} player destroyed ${d}`),A=this.createAssetPlayer(d,p,n),A.loadSource()}if(!this.eventItemsMatch(c,this.bufferingItem)&&d.appendInPlace&&this.isAssetBuffered(p))return;this.startAssetPlayer(A,n,r,e,u),this.shouldPlay&&oG(A.media)}else c?(this.resumePrimary(c,e,i),this.shouldPlay&&oG(this.hls.media)):s&&this.isInterstitial(i)&&(this.endedItem=null,this.playingItem=i,i.event.appendInPlace||this.attachPrimary(o.durations.primary,null))}get playbackDisabled(){return this.hls.config.enableInterstitialPlayback===!1}get primaryDetails(){var e;return(e=this.mediaSelection)==null?void 0:e.main.details}get primaryLive(){var e;return!!((e=this.primaryDetails)!=null&&e.live)}resumePrimary(e,r,n){var i,s;if(this.playingItem=e,this.playingAsset=this.endedAsset=null,this.waitingItem=this.endedItem=null,this.bufferedToItem(e),this.log(`resuming ${gA(e)}`),!((i=this.detachedData)!=null&&i.mediaSource)){let c=this.timelinePos;(c<e.start||c>=e.end)&&(c=this.getPrimaryResumption(e,r),this.log(yS("resumePrimary",c)),this.timelinePos=c),this.attachPrimary(c,e)}if(!n)return;const o=(s=this.schedule)==null?void 0:s.items;o&&(this.log(`INTERSTITIALS_PRIMARY_RESUMED ${gA(e)}`),this.hls.trigger(Le.INTERSTITIALS_PRIMARY_RESUMED,{schedule:o.slice(0),scheduleIndex:r}),this.checkBuffer())}getPrimaryResumption(e,r){const n=e.start;if(this.primaryLive){const i=this.primaryDetails;if(r===0)return this.hls.startPosition;if(i&&(n<i.fragmentStart||n>i.edge))return this.hls.liveSyncPosition||-1}return n}isAssetBuffered(e){const r=this.getAssetPlayer(e.identifier);return r!=null&&r.hls?r.hls.bufferedToEnd:Hs.bufferInfo(this.primaryMedia,this.timelinePos,0).end+1>=e.timelineStart+(e.duration||0)}attachPrimary(e,r,n){r?this.setBufferingItem(r):this.bufferingItem=this.playingItem,this.bufferingAsset=null;const i=this.primaryMedia;if(!i)return;const s=this.hls;s.media?this.checkBuffer():(this.transferMediaTo(s,i),n&&this.startLoadingPrimaryAt(e,n)),n||(this.log(yS("attachPrimary",e)),this.timelinePos=e,this.startLoadingPrimaryAt(e,n))}startLoadingPrimaryAt(e,r){var n;const i=this.hls;!i.loadingEnabled||!i.media||Math.abs((((n=i.mainForwardBufferInfo)==null?void 0:n.start)||i.media.currentTime)-e)>.5?i.startLoad(e,r):i.bufferingEnabled||i.resumeBuffering()}onManifestLoading(){var e;this.stopLoad(),(e=this.schedule)==null||e.reset(),this.emptyPlayerQueue(),this.clearScheduleState(),this.shouldPlay=!1,this.bufferedPos=this.timelinePos=-1,this.mediaSelection=this.altSelection=this.manager=this.requiredTracks=null,this.hls.off(Le.BUFFER_CODECS,this.onBufferCodecs,this),this.hls.on(Le.BUFFER_CODECS,this.onBufferCodecs,this)}onLevelUpdated(e,r){if(r.level===-1||!this.schedule)return;const n=this.hls.levels[r.level];if(!n.details)return;const i=Uo(Uo({},this.mediaSelection||this.altSelection),{},{main:n});this.mediaSelection=i,this.schedule.parseInterstitialDateRanges(i,this.hls.config.interstitialAppendInPlace),!this.effectivePlayingItem&&this.schedule.items&&this.checkStart()}onAudioTrackUpdated(e,r){const n=this.hls.audioTracks[r.id],i=this.mediaSelection;if(!i){this.altSelection=Uo(Uo({},this.altSelection),{},{audio:n});return}const s=Uo(Uo({},i),{},{audio:n});this.mediaSelection=s}onSubtitleTrackUpdated(e,r){const n=this.hls.subtitleTracks[r.id],i=this.mediaSelection;if(!i){this.altSelection=Uo(Uo({},this.altSelection),{},{subtitles:n});return}const s=Uo(Uo({},i),{},{subtitles:n});this.mediaSelection=s}onAudioTrackSwitching(e,r){const n=pK(r);this.playerQueue.forEach(({hls:i})=>i&&(i.setAudioOption(r)||i.setAudioOption(n)))}onSubtitleTrackSwitch(e,r){const n=pK(r);this.playerQueue.forEach(({hls:i})=>i&&(i.setSubtitleOption(r)||r.id!==-1&&i.setSubtitleOption(n)))}onBufferCodecs(e,r){const n=r.tracks;n&&(this.requiredTracks=n)}onBufferAppended(e,r){this.checkBuffer()}onBufferFlushed(e,r){const n=this.playingItem;if(n&&!this.itemsMatch(n,this.bufferingItem)&&!this.isInterstitial(n)){const i=this.timelinePos;this.bufferedPos=i,this.checkBuffer()}}onBufferedToEnd(e){if(!this.schedule)return;const r=this.schedule.events;if(this.bufferedPos<Number.MAX_VALUE&&r){for(let i=0;i<r.length;i++){const s=r[i];if(s.cue.post){var n;const o=this.schedule.findEventIndex(s.identifier),c=(n=this.schedule.items)==null?void 0:n[o];this.isInterstitial(c)&&this.eventItemsMatch(c,this.bufferingItem)&&this.bufferedToItem(c,0);break}}this.bufferedPos=Number.MAX_VALUE}}onMediaEnded(e){const r=this.playingItem;if(!this.playingLastItem&&r){const n=this.findItemIndex(r);this.setSchedulePosition(n+1)}else this.shouldPlay=!1}updateItem(e,r){var n;const i=(n=this.schedule)==null?void 0:n.items;if(e&&i){const s=this.findItemIndex(e,r);return i[s]||null}return null}trimInPlace(e,r){if(this.isInterstitial(e)&&e.event.appendInPlace&&r.end-e.end>.25){e.event.assetList.forEach((s,o)=>{e.event.isAssetPastPlayoutLimit(o)&&this.clearAssetPlayer(s.identifier,null)});const n=e.end+.25,i=Hs.bufferInfo(this.primaryMedia,n,0);(i.end>n||(i.nextStart||0)>n)&&(this.log(`trim buffered interstitial ${gA(e)} (was ${gA(r)})`),this.attachPrimary(n,null,!0),this.flushFrontBuffer(n))}}itemsMatch(e,r){return!!r&&(e===r||e.event&&r.event&&this.eventItemsMatch(e,r)||!e.event&&!r.event&&this.findItemIndex(e)===this.findItemIndex(r))}eventItemsMatch(e,r){var n;return!!r&&(e===r||e.event.identifier===((n=r.event)==null?void 0:n.identifier))}findItemIndex(e,r){return e&&this.schedule?this.schedule.findItemIndex(e,r):-1}updateSchedule(e=!1){var r;const n=this.mediaSelection;n&&((r=this.schedule)==null||r.updateSchedule(n,[],e))}checkBuffer(e){var r;const n=(r=this.schedule)==null?void 0:r.items;if(!n)return;const i=Hs.bufferInfo(this.primaryMedia,this.timelinePos,0);e&&(this.bufferedPos=this.timelinePos),e||(e=i.len<1),this.updateBufferedPos(i.end,n,e)}updateBufferedPos(e,r,n){const i=this.schedule,s=this.bufferingItem;if(this.bufferedPos>e||!i)return;if(r.length===1&&this.itemsMatch(r[0],s)){this.bufferedPos=e;return}const o=this.playingItem,c=this.findItemIndex(o);let u=i.findItemIndexAtTime(e);if(this.bufferedPos<e){var l;const d=this.findItemIndex(s),f=Math.min(d+1,r.length-1),A=r[f];if((u===-1&&s&&e>=s.end||(l=A.event)!=null&&l.appendInPlace&&e+.01>=A.start)&&(u=f),this.isInterstitial(s)){const p=s.event;if(f-c>1&&p.appendInPlace===!1||p.assetList.length===0&&p.assetListLoader)return}if(this.bufferedPos=e,u>d&&u>c)this.bufferedToItem(A);else{const p=this.primaryDetails;this.primaryLive&&p&&e>p.edge-p.targetduration&&A.start<p.edge+this.hls.config.interstitialLiveLookAhead&&this.isInterstitial(A)&&this.preloadAssets(A.event,0)}}else n&&o&&!this.itemsMatch(o,s)&&(u===c?this.bufferedToItem(o):u===c+1&&this.bufferedToItem(r[u]))}assetsBuffered(e,r){return e.event.assetList.length===0?!1:!e.event.assetList.some(i=>{const s=this.getAssetPlayer(i.identifier);return!(s!=null&&s.bufferedInPlaceToEnd(r))})}setBufferingItem(e){const r=this.bufferingItem,n=this.schedule;if(!this.itemsMatch(e,r)&&n){const{items:i,events:s}=n;if(!i||!s)return r;const o=this.isInterstitial(e),c=this.getBufferingPlayer();this.bufferingItem=e,this.bufferedPos=Math.max(e.start,Math.min(e.end,this.timelinePos));const u=c?c.remaining:r?r.end-this.timelinePos:0;if(this.log(`INTERSTITIALS_BUFFERED_TO_BOUNDARY ${gA(e)}`+(r?` (${u.toFixed(2)} remaining)`:"")),!this.playbackDisabled)if(o){const l=n.findAssetIndex(e.event,this.bufferedPos);e.event.assetList.forEach((d,f)=>{const A=this.getAssetPlayer(d.identifier);A&&(f===l&&A.loadSource(),A.resumeBuffering())})}else this.hls.resumeBuffering(),this.playerQueue.forEach(l=>l.pauseBuffering());this.hls.trigger(Le.INTERSTITIALS_BUFFERED_TO_BOUNDARY,{events:s.slice(0),schedule:i.slice(0),bufferingIndex:this.findItemIndex(e),playingIndex:this.findItemIndex(this.playingItem)})}else this.bufferingItem!==e&&(this.bufferingItem=e);return r}bufferedToItem(e,r=0){const n=this.setBufferingItem(e);if(!this.playbackDisabled){if(this.isInterstitial(e))this.bufferedToEvent(e,r);else if(n!==null){this.bufferingAsset=null;const i=this.detachedData;i?i.mediaSource?this.attachPrimary(e.start,e,!0):this.preloadPrimary(e):this.preloadPrimary(e)}}}preloadPrimary(e){const r=this.findItemIndex(e),n=this.getPrimaryResumption(e,r);this.startLoadingPrimaryAt(n)}bufferedToEvent(e,r){const n=e.event,i=n.assetList.length===0&&!n.assetListLoader,s=n.cue.once;if(i||!s){const o=this.preloadAssets(n,r);if(o!=null&&o.interstitial.appendInPlace){const c=this.primaryMedia;c&&this.bufferAssetPlayer(o,c)}}}preloadAssets(e,r){const n=e.assetUrl,i=e.assetList.length,s=i===0&&!e.assetListLoader,o=e.cue.once;if(s){const u=e.timelineStart;if(e.appendInPlace){var c;const A=this.playingItem;!this.isInterstitial(A)&&(A==null||(c=A.nextEvent)==null?void 0:c.identifier)===e.identifier&&this.flushFrontBuffer(u+.25)}let l,d=0;if(!this.playingItem&&this.primaryLive&&(d=this.hls.startPosition,d===-1&&(d=this.hls.liveSyncPosition||0)),d&&!(e.cue.pre||e.cue.post)){const A=d-u;A>0&&(l=Math.round(A*1e3)/1e3)}if(this.log(`Load interstitial asset ${r+1}/${n?1:i} ${e}${l?` live-start: ${d} start-offset: ${l}`:""}`),n)return this.createAsset(e,0,0,u,e.duration,n);const f=this.assetListLoader.loadAssetList(e,l);f&&(e.assetListLoader=f)}else if(!o&&i){for(let l=r;l<i;l++){const d=e.assetList[l],f=this.getAssetPlayerQueueIndex(d.identifier);(f===-1||this.playerQueue[f].destroyed)&&!d.error&&this.createAssetPlayer(e,d,l)}const u=e.assetList[r];if(u){const l=this.getAssetPlayer(u.identifier);return l&&l.loadSource(),l}}return null}flushFrontBuffer(e){const r=this.requiredTracks;if(!r)return;this.log(`Removing front buffer starting at ${e}`),Object.keys(r).forEach(i=>{this.hls.trigger(Le.BUFFER_FLUSHING,{startOffset:e,endOffset:1/0,type:i})})}getAssetPlayerQueueIndex(e){const r=this.playerQueue;for(let n=0;n<r.length;n++)if(e===r[n].assetId)return n;return-1}getAssetPlayer(e){const r=this.getAssetPlayerQueueIndex(e);return this.playerQueue[r]||null}getBufferingPlayer(){const{playerQueue:e,primaryMedia:r}=this;if(r){for(let n=0;n<e.length;n++)if(e[n].media===r)return e[n]}return null}createAsset(e,r,n,i,s,o){const c={parentIdentifier:e.identifier,identifier:mHe(e,o,r),duration:s,startOffset:n,timelineStart:i,uri:o};return this.createAssetPlayer(e,c,r)}createAssetPlayer(e,r,n){const i=this.hls,s=i.userConfig;let o=s.videoPreference;const c=i.loadLevelObj||i.levels[i.currentLevel];(o||c)&&(o=nl({},o),c.videoCodec&&(o.videoCodec=c.videoCodec),c.videoRange&&(o.allowedVideoRanges=[c.videoRange]));const u=i.audioTracks[i.audioTrack],l=i.subtitleTracks[i.subtitleTrack];let d=0;if(this.primaryLive||e.appendInPlace){const C=this.timelinePos-r.timelineStart;if(C>1){const N=r.duration;N&&C<N&&(d=C)}}const f=r.identifier,A=Uo(Uo({},s),{},{maxMaxBufferLength:Math.min(180,i.config.maxMaxBufferLength),autoStartLoad:!0,startFragPrefetch:!0,primarySessionId:i.sessionId,assetPlayerId:f,abrEwmaDefaultEstimate:i.bandwidthEstimate,interstitialsController:void 0,startPosition:d,liveDurationInfinity:!1,testBandwidth:!1,videoPreference:o,audioPreference:u||s.audioPreference,subtitlePreference:l||s.subtitlePreference});e.appendInPlace&&(e.appendInPlaceStarted=!0,r.timelineStart&&(A.timelineOffset=r.timelineStart));const p=A.cmcd;p!=null&&p.sessionId&&p.contentId&&(A.cmcd=nl({},p,{contentId:oE(r.uri)})),this.getAssetPlayer(f)&&this.warn(`Duplicate date range identifier ${e} and asset ${f}`);const g=new vHe(this.HlsPlayerClass,A,e,r);this.playerQueue.push(g),e.assetList[n]=r;let y=!0;const x=C=>{if(C.live){var N;const K=new Error(`Interstitials MUST be VOD assets ${e}`),Y={fatal:!0,type:Oi.OTHER_ERROR,details:vr.INTERSTITIAL_ASSET_ITEM_ERROR,error:K},re=((N=this.schedule)==null?void 0:N.findEventIndex(e.identifier))||-1;this.handleAssetItemError(Y,e,re,n,K.message);return}const I=C.edge-C.fragmentStart,U=r.duration;(y||U===null||I>U)&&(y=!1,this.log(`Interstitial asset "${f}" duration change ${U} > ${I}`),r.duration=I,this.updateSchedule())};g.on(Le.LEVEL_UPDATED,(C,{details:N})=>x(N)),g.on(Le.LEVEL_PTS_UPDATED,(C,{details:N})=>x(N)),g.on(Le.EVENT_CUE_ENTER,()=>this.onInterstitialCueEnter());const w=(C,N)=>{const I=this.getAssetPlayer(f);if(I&&N.tracks){I.off(Le.BUFFER_CODECS,w),I.tracks=N.tracks;const U=this.primaryMedia;this.bufferingAsset===I.assetItem&&U&&!I.media&&this.bufferAssetPlayer(I,U)}};g.on(Le.BUFFER_CODECS,w);const E=()=>{var C;const N=this.getAssetPlayer(f);if(this.log(`buffered to end of asset ${N}`),!N||!this.schedule)return;const I=this.schedule.findEventIndex(e.identifier),U=(C=this.schedule.items)==null?void 0:C[I];this.isInterstitial(U)&&this.advanceAssetBuffering(U,r)};g.on(Le.BUFFERED_TO_END,E);const T=C=>()=>{if(!this.getAssetPlayer(f)||!this.schedule)return;this.shouldPlay=!0;const I=this.schedule.findEventIndex(e.identifier);this.advanceAfterAssetEnded(e,I,C)};return g.once(Le.MEDIA_ENDED,T(n)),g.once(Le.PLAYOUT_LIMIT_REACHED,T(1/0)),g.on(Le.ERROR,(C,N)=>{if(!this.schedule)return;const I=this.getAssetPlayer(f);if(N.details===vr.BUFFER_STALLED_ERROR){if(I!=null&&I.appendInPlace){this.handleInPlaceStall(e);return}this.onTimeupdate(),this.checkBuffer(!0);return}this.handleAssetItemError(N,e,this.schedule.findEventIndex(e.identifier),n,`Asset player error ${N.error} ${e}`)}),g.on(Le.DESTROYING,()=>{if(!this.getAssetPlayer(f)||!this.schedule)return;const N=new Error(`Asset player destroyed unexpectedly ${f}`),I={fatal:!0,type:Oi.OTHER_ERROR,details:vr.INTERSTITIAL_ASSET_ITEM_ERROR,error:N};this.handleAssetItemError(I,e,this.schedule.findEventIndex(e.identifier),n,N.message)}),this.log(`INTERSTITIAL_ASSET_PLAYER_CREATED ${wx(r)}`),this.hls.trigger(Le.INTERSTITIAL_ASSET_PLAYER_CREATED,{asset:r,assetListIndex:n,event:e,player:g}),g}clearInterstitial(e,r){this.clearAssetPlayers(e,r),e.reset()}clearAssetPlayers(e,r){e.assetList.forEach(n=>{this.clearAssetPlayer(n.identifier,r)})}resetAssetPlayer(e){const r=this.getAssetPlayerQueueIndex(e);if(r!==-1){this.log(`reset asset player "${e}" after error`);const n=this.playerQueue[r];this.transferMediaFromPlayer(n,null),n.resetDetails()}}clearAssetPlayer(e,r){const n=this.getAssetPlayerQueueIndex(e);if(n!==-1){const i=this.playerQueue[n];this.log(`clear ${i} toSegment: ${r&&gA(r)}`),this.transferMediaFromPlayer(i,r),this.playerQueue.splice(n,1),i.destroy()}}emptyPlayerQueue(){let e;for(;e=this.playerQueue.pop();)e.destroy();this.playerQueue=[]}startAssetPlayer(e,r,n,i,s){const{interstitial:o,assetItem:c,assetId:u}=e,l=o.assetList.length,d=this.playingAsset;this.endedAsset=null,this.playingAsset=c,(!d||d.identifier!==u)&&(d&&(this.clearAssetPlayer(d.identifier,n[i]),delete d.error),this.log(`INTERSTITIAL_ASSET_STARTED ${r+1}/${l} ${wx(c)}`),this.hls.trigger(Le.INTERSTITIAL_ASSET_STARTED,{asset:c,assetListIndex:r,event:o,schedule:n.slice(0),scheduleIndex:i,player:e})),this.bufferAssetPlayer(e,s)}bufferAssetPlayer(e,r){var n,i;if(!this.schedule)return;const{interstitial:s,assetItem:o}=e,c=this.schedule.findEventIndex(s.identifier),u=(n=this.schedule.items)==null?void 0:n[c];if(!u)return;e.loadSource(),this.setBufferingItem(u),this.bufferingAsset=o;const l=this.getBufferingPlayer();if(l===e)return;const d=s.appendInPlace;if(d&&l?.interstitial.appendInPlace===!1)return;const f=l?.tracks||((i=this.detachedData)==null?void 0:i.tracks)||this.requiredTracks;if(d&&o!==this.playingAsset){if(!e.tracks){this.log(`Waiting for track info before buffering ${e}`);return}if(f&&!Kne(f,e.tracks)){const A=new Error(`Asset ${wx(o)} SourceBuffer tracks ('${Object.keys(e.tracks)}') are not compatible with primary content tracks ('${Object.keys(f)}')`),p={fatal:!0,type:Oi.OTHER_ERROR,details:vr.INTERSTITIAL_ASSET_ITEM_ERROR,error:A},g=s.findAssetIndex(o);this.handleAssetItemError(p,s,c,g,A.message);return}}this.transferMediaTo(e,r)}handleInPlaceStall(e){const r=this.schedule,n=this.primaryMedia;if(!r||!n)return;const i=n.currentTime,s=r.findAssetIndex(e,i),o=e.assetList[s];if(o){const c=this.getAssetPlayer(o.identifier);if(c){const u=c.currentTime||i-o.timelineStart,l=c.duration-u;if(this.warn(`Stalled at ${u} of ${u+l} in ${c} ${e} (media.currentTime: ${i})`),u&&(l/n.playbackRate<.5||c.bufferedInPlaceToEnd(n))&&c.hls){const d=r.findEventIndex(e.identifier);this.advanceAfterAssetEnded(e,d,s)}}}}advanceInPlace(e){const r=this.primaryMedia;r&&r.currentTime<e&&(r.currentTime=e)}handleAssetItemError(e,r,n,i,s){if(e.details===vr.BUFFER_STALLED_ERROR)return;const o=r.assetList[i]||null;if(this.warn(`INTERSTITIAL_ASSET_ERROR ${o&&wx(o)} ${e.error}`),!this.schedule)return;const c=o?.identifier||"",u=this.getAssetPlayerQueueIndex(c),l=this.playerQueue[u]||null,d=this.schedule.items,f=nl({},e,{fatal:!1,errorAction:Ab(!0),asset:o,assetListIndex:i,event:r,schedule:d,scheduleIndex:n,player:l});if(this.hls.trigger(Le.INTERSTITIAL_ASSET_ERROR,f),!e.fatal)return;const A=this.playingAsset,p=this.bufferingAsset,g=new Error(s);if(o&&(this.clearAssetPlayer(c,null),o.error=g),!r.assetList.some(y=>!y.error))r.error=g;else for(let y=i;y<r.assetList.length;y++)this.resetAssetPlayer(r.assetList[y].identifier);this.updateSchedule(!0),r.error?this.primaryFallback(r):A&&A.identifier===c?this.advanceAfterAssetEnded(r,n,i):p&&p.identifier===c&&this.isInterstitial(this.bufferingItem)&&this.advanceAssetBuffering(this.bufferingItem,p)}primaryFallback(e){const r=e.timelineStart,n=this.effectivePlayingItem;let i=this.timelinePos;if(n){this.log(`Fallback to primary from event "${e.identifier}" start: ${r} pos: ${i} playing: ${gA(n)} error: ${e.error}`),i===-1&&(i=this.hls.startPosition);const o=this.updateItem(n,i);this.itemsMatch(n,o)&&this.clearInterstitial(e,null),e.appendInPlace&&(this.attachPrimary(r,null),this.flushFrontBuffer(r))}else if(i===-1){this.checkStart();return}if(!this.schedule)return;const s=this.schedule.findItemIndexAtTime(i);this.setSchedulePosition(s)}onAssetListLoaded(e,r){var n,i;const s=r.event,o=s.identifier,c=r.assetListResponse.ASSETS;if(!((n=this.schedule)!=null&&n.hasEvent(o)))return;const u=s.timelineStart,l=s.duration;let d=0;c.forEach((y,x)=>{const w=parseFloat(y.DURATION);this.createAsset(s,x,d,u+d,w,y.URI),d+=w}),s.duration=d,this.log(`Loaded asset-list with duration: ${d} (was: ${l}) ${s}`);const f=this.waitingItem,A=f?.event.identifier===o;this.updateSchedule();const p=(i=this.bufferingItem)==null?void 0:i.event;if(A){var g;const y=this.schedule.findEventIndex(o),x=(g=this.schedule.items)==null?void 0:g[y];if(x){if(!this.playingItem&&this.timelinePos>x.end&&this.schedule.findItemIndexAtTime(this.timelinePos)!==y){s.error=new Error(`Interstitial ${c.length?"no longer within playback range":"asset-list is empty"} ${this.timelinePos} ${s}`),this.log(s.error.message),this.updateSchedule(!0),this.primaryFallback(s);return}this.setBufferingItem(x)}this.setSchedulePosition(y)}else if(p?.identifier===o){const y=s.assetList[0];if(y){const x=this.getAssetPlayer(y.identifier);if(p.appendInPlace){const w=this.primaryMedia;x&&w&&this.bufferAssetPlayer(x,w)}else x&&x.loadSource()}}}onError(e,r){if(this.schedule)switch(r.details){case vr.ASSET_LIST_PARSING_ERROR:case vr.ASSET_LIST_LOAD_ERROR:case vr.ASSET_LIST_LOAD_TIMEOUT:{const n=r.interstitial;n&&(this.updateSchedule(!0),this.primaryFallback(n));break}case vr.BUFFER_STALLED_ERROR:{const n=this.endedItem||this.waitingItem||this.playingItem;if(this.isInterstitial(n)&&n.event.appendInPlace){this.handleInPlaceStall(n.event);return}this.log(`Primary player stall @${this.timelinePos} bufferedPos: ${this.bufferedPos}`),this.onTimeupdate(),this.checkBuffer(!0);break}}}}const lG=500;class wHe extends bF{constructor(e,r,n){super(e,r,n,"subtitle-stream-controller",fi.SUBTITLE),this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(Le.LEVEL_LOADED,this.onLevelLoaded,this),e.on(Le.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(Le.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(Le.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(Le.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(Le.BUFFER_FLUSHING,this.onBufferFlushing,this)}unregisterListeners(){super.unregisterListeners();const{hls:e}=this;e.off(Le.LEVEL_LOADED,this.onLevelLoaded,this),e.off(Le.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(Le.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(Le.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(Le.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(Le.BUFFER_FLUSHING,this.onBufferFlushing,this)}startLoad(e,r){this.stopLoad(),this.state=Kr.IDLE,this.setInterval(lG),this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=r?-1:e,this.tick()}onManifestLoading(){super.onManifestLoading(),this.mainDetails=null}onMediaDetaching(e,r){this.tracksBuffered=[],super.onMediaDetaching(e,r)}onLevelLoaded(e,r){this.mainDetails=r.details}onSubtitleFragProcessed(e,r){const{frag:n,success:i}=r;if(this.fragContextChanged(n)||(eu(n)&&(this.fragPrevious=n),this.state=Kr.IDLE),!i)return;const s=this.tracksBuffered[this.currentTrackId];if(!s)return;let o;const c=n.start;for(let l=0;l<s.length;l++)if(c>=s[l].start&&c<=s[l].end){o=s[l];break}const u=n.start+n.duration;o?o.end=u:(o={start:c,end:u},s.push(o)),this.fragmentTracker.fragBuffered(n),this.fragBufferedComplete(n,null),this.media&&this.tick()}onBufferFlushing(e,r){const{startOffset:n,endOffset:i}=r;if(n===0&&i!==Number.POSITIVE_INFINITY){const s=i-1;if(s<=0)return;r.endOffsetSubtitles=Math.max(0,s),this.tracksBuffered.forEach(o=>{for(let c=0;c<o.length;){if(o[c].end<=s){o.shift();continue}else if(o[c].start<s)o[c].start=s;else break;c++}}),this.fragmentTracker.removeFragmentsInRange(n,s,fi.SUBTITLE)}}onError(e,r){const n=r.frag;n?.type===fi.SUBTITLE&&(r.details===vr.FRAG_GAP&&this.fragmentTracker.fragBuffered(n,!0),this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==Kr.STOPPED&&(this.state=Kr.IDLE))}onSubtitleTracksUpdated(e,{subtitleTracks:r}){if(this.levels&&Yie(this.levels,r)){this.levels=r.map(n=>new t2(n));return}this.tracksBuffered=[],this.levels=r.map(n=>{const i=new t2(n);return this.tracksBuffered[i.id]=[],i}),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,fi.SUBTITLE),this.fragPrevious=null,this.mediaBuffer=null}onSubtitleTrackSwitch(e,r){var n;if(this.currentTrackId=r.id,!((n=this.levels)!=null&&n.length)||this.currentTrackId===-1){this.clearInterval();return}const i=this.levels[this.currentTrackId];i!=null&&i.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,i&&this.state!==Kr.STOPPED&&this.setInterval(lG)}onSubtitleTrackLoaded(e,r){var n;const{currentTrackId:i,levels:s}=this,{details:o,id:c}=r;if(!s){this.warn(`Subtitle tracks were reset while loading level ${c}`);return}const u=s[c];if(c>=s.length||!u)return;this.log(`Subtitle track ${c} loaded [${o.startSN},${o.endSN}]${o.lastPartSn?`[part-${o.lastPartSn}-${o.lastPartIndex}]`:""},duration:${o.totalduration}`),this.mediaBuffer=this.mediaBufferTimeRanges;let l=0;if(o.live||(n=u.details)!=null&&n.live){if(o.deltaUpdateFailed)return;const f=this.mainDetails;if(!f){this.startFragRequested=!1;return}const A=f.fragments[0];if(!u.details)o.hasProgramDateTime&&f.hasProgramDateTime?(Zj(o,f),l=o.fragmentStart):A&&(l=A.start,hO(o,l));else{var d;l=this.alignPlaylists(o,u.details,(d=this.levelLastLoaded)==null?void 0:d.details),l===0&&A&&(l=A.start,hO(o,l))}f&&!this.startFragRequested&&this.setStartPosition(f,l)}u.details=o,this.levelLastLoaded=u,c===i&&(this.hls.trigger(Le.SUBTITLE_TRACK_UPDATED,{details:o,id:c,groupId:r.groupId}),this.tick(),o.live&&!this.fragCurrent&&this.media&&this.state===Kr.IDLE&&(yy(null,o.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),u.details=void 0)))}_handleFragmentLoadComplete(e){const{frag:r,payload:n}=e,i=r.decryptdata,s=this.hls;if(!this.fragContextChanged(r)&&n&&n.byteLength>0&&i!=null&&i.key&&i.iv&&mb(i.method)){const o=performance.now();this.decrypter.decrypt(new Uint8Array(n),i.key.buffer,i.iv.buffer,yF(i.method)).catch(c=>{throw s.trigger(Le.ERROR,{type:Oi.MEDIA_ERROR,details:vr.FRAG_DECRYPT_ERROR,fatal:!1,error:c,reason:c.message,frag:r}),c}).then(c=>{const u=performance.now();s.trigger(Le.FRAG_DECRYPTED,{frag:r,payload:c,stats:{tstart:o,tdecrypt:u}})}).catch(c=>{this.warn(`${c.name}: ${c.message}`),this.state=Kr.IDLE})}}doTick(){if(!this.media){this.state=Kr.IDLE;return}if(this.state===Kr.IDLE){const{currentTrackId:e,levels:r}=this,n=r?.[e];if(!n||!r.length||!n.details||this.waitForLive(n))return;const{config:i}=this,s=this.getLoadPosition(),o=Hs.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],s,i.maxBufferHole),{end:c,len:u}=o,l=n.details,d=this.hls.maxBufferLength+l.levelTargetDuration;if(u>d)return;const f=l.fragments,A=f.length,p=l.edge;let g=null;const y=this.fragPrevious;if(c<p){const E=i.maxFragLookUpTolerance,T=c>p-E?0:E;g=yy(y,f,Math.max(f[0].start,c),T),!g&&y&&y.start<f[0].start&&(g=f[0])}else g=f[A-1];if(g=this.filterReplacedPrimary(g,n.details),!g)return;const x=g.sn-l.startSN,w=f[x-1];if(w&&w.cc===g.cc&&this.fragmentTracker.getState(w)===Fu.NOT_LOADED&&(g=w),this.fragmentTracker.getState(g)===Fu.NOT_LOADED){const E=this.mapToInitFragWhenRequired(g);E&&this.loadFragment(E,n,c)}}}loadFragment(e,r,n){eu(e)?super.loadFragment(e,r,n):this._loadInitSegment(e,r)}get mediaBufferTimeRanges(){return new EHe(this.tracksBuffered[this.currentTrackId]||[])}}class EHe{constructor(e){this.buffered=void 0;const r=(n,i,s)=>{if(i=i>>>0,i>s-1)throw new DOMException(`Failed to execute '${n}' on 'TimeRanges': The index provided (${i}) is greater than the maximum bound (${s})`);return e[i][n]};this.buffered={get length(){return e.length},end(n){return r("end",n,e.length)},start(n){return r("start",n,e.length)}}}}const _He={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},dse=t=>String.fromCharCode(_He[t]||t),EA=15,Ep=100,SHe={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},THe={17:2,18:4,21:6,22:8,23:10,19:13,20:15},CHe={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},jHe={25:2,26:4,29:6,30:8,31:10,27:13,28:15},NHe=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class kHe{constructor(){this.time=null,this.verboseLevel=0}log(e,r){if(this.verboseLevel>=e){const n=typeof r=="function"?r():r;Ho.log(`${this.time} [${e}] ${n}`)}}}const dv=function(e){const r=[];for(let n=0;n<e.length;n++)r.push(e[n].toString(16));return r};class hse{constructor(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(e){const r=["foreground","underline","italics","background","flash"];for(let n=0;n<r.length;n++){const i=r[n];e.hasOwnProperty(i)&&(this[i]=e[i])}}isDefault(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash}equals(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}copy(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}class IHe{constructor(){this.uchar=" ",this.penState=new hse}reset(){this.uchar=" ",this.penState.reset()}setChar(e,r){this.uchar=e,this.penState.copy(r)}setPenState(e){this.penState.copy(e)}equals(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}copy(e){this.uchar=e.uchar,this.penState.copy(e.penState)}isEmpty(){return this.uchar===" "&&this.penState.isDefault()}}class LHe{constructor(e){this.chars=[],this.pos=0,this.currPenState=new hse,this.cueStartTime=null,this.logger=void 0;for(let r=0;r<Ep;r++)this.chars.push(new IHe);this.logger=e}equals(e){for(let r=0;r<Ep;r++)if(!this.chars[r].equals(e.chars[r]))return!1;return!0}copy(e){for(let r=0;r<Ep;r++)this.chars[r].copy(e.chars[r])}isEmpty(){let e=!0;for(let r=0;r<Ep;r++)if(!this.chars[r].isEmpty()){e=!1;break}return e}setCursor(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>Ep&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=Ep)}moveCursor(e){const r=this.pos+e;if(e>1)for(let n=this.pos+1;n<r+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(r)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(e){e>=144&&this.backSpace();const r=dse(e);if(this.pos>=Ep){this.logger.log(0,()=>"Cannot insert "+e.toString(16)+" ("+r+") at position "+this.pos+". Skipping it!");return}this.chars[this.pos].setChar(r,this.currPenState),this.moveCursor(1)}clearFromPos(e){let r;for(r=e;r<Ep;r++)this.chars[r].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const e=[];let r=!0;for(let n=0;n<Ep;n++){const i=this.chars[n].uchar;i!==" "&&(r=!1),e.push(i)}return r?"":e.join("")}setPenStyles(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}}class I4{constructor(e){this.rows=[],this.currRow=EA-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.logger=void 0;for(let r=0;r<EA;r++)this.rows.push(new LHe(e));this.logger=e}reset(){for(let e=0;e<EA;e++)this.rows[e].clear();this.currRow=EA-1}equals(e){let r=!0;for(let n=0;n<EA;n++)if(!this.rows[n].equals(e.rows[n])){r=!1;break}return r}copy(e){for(let r=0;r<EA;r++)this.rows[r].copy(e.rows[r])}isEmpty(){let e=!0;for(let r=0;r<EA;r++)if(!this.rows[r].isEmpty()){e=!1;break}return e}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(e){this.rows[this.currRow].insertChar(e)}setPen(e){this.rows[this.currRow].setPenStyles(e)}moveCursor(e){this.rows[this.currRow].moveCursor(e)}setCursor(e){this.logger.log(2,"setCursor: "+e),this.rows[this.currRow].setCursor(e)}setPAC(e){this.logger.log(2,()=>"pacData = "+fl(e));let r=e.row-1;if(this.nrRollUpRows&&r<this.nrRollUpRows-1&&(r=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==r){for(let c=0;c<EA;c++)this.rows[c].clear();const s=this.currRow+1-this.nrRollUpRows,o=this.lastOutputScreen;if(o){const c=o.rows[s].cueStartTime,u=this.logger.time;if(c!==null&&u!==null&&c<u)for(let l=0;l<this.nrRollUpRows;l++)this.rows[r-this.nrRollUpRows+l+1].copy(o.rows[s+l])}}this.currRow=r;const n=this.rows[this.currRow];if(e.indent!==null){const s=e.indent,o=Math.max(s-1,0);n.setCursor(e.indent),e.color=n.chars[o].penState.foreground}const i={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(i)}setBkgData(e){this.logger.log(2,()=>"bkgData = "+fl(e)),this.backSpace(),this.setPen(e),this.insertChar(32)}setRollUpRows(e){this.nrRollUpRows=e}rollUp(){if(this.nrRollUpRows===null){this.logger.log(3,"roll_up but nrRollUpRows not set yet");return}this.logger.log(1,()=>this.getDisplayText());const e=this.currRow+1-this.nrRollUpRows,r=this.rows.splice(e,1)[0];r.clear(),this.rows.splice(this.currRow,0,r),this.logger.log(2,"Rolling up")}getDisplayText(e){e=e||!1;const r=[];let n="",i=-1;for(let s=0;s<EA;s++){const o=this.rows[s].getTextString();o&&(i=s+1,e?r.push("Row "+i+": '"+o+"'"):r.push(o.trim()))}return r.length>0&&(e?n="["+r.join(" | ")+"]":n=r.join(`
`)),n}getTextAndFormat(){return this.rows}}class cG{constructor(e,r,n){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=r,this.mode=null,this.verbose=0,this.displayedMemory=new I4(n),this.nonDisplayedMemory=new I4(n),this.lastOutputScreen=new I4(n),this.currRollUpRow=this.displayedMemory.rows[EA-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=n}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[EA-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(e){this.outputFilter=e}setPAC(e){this.writeScreen.setPAC(e)}setBkgData(e){this.writeScreen.setBkgData(e)}setMode(e){e!==this.mode&&(this.mode=e,this.logger.log(2,()=>"MODE="+e),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}insertChars(e){for(let n=0;n<e.length;n++)this.writeScreen.insertChar(e[n]);const r=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,()=>r+": "+this.writeScreen.getDisplayText(!0)),(this.mode==="MODE_PAINT-ON"||this.mode==="MODE_ROLL-UP")&&(this.logger.log(1,()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(e){this.logger.log(2,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){const e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,()=>"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)}ccTO(e){this.logger.log(2,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}ccMIDROW(e){const r={flash:!1};if(r.underline=e%2===1,r.italics=e>=46,r.italics)r.foreground="white";else{const n=Math.floor(e/2)-16,i=["white","green","blue","cyan","red","yellow","magenta"];r.foreground=i[n]}this.logger.log(2,"MIDROW: "+fl(r)),this.writeScreen.setPen(r)}outputDataUpdate(e=!1){const r=this.logger.time;r!==null&&this.outputFilter&&(this.cueStartTime===null&&!this.displayedMemory.isEmpty()?this.cueStartTime=r:this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,r,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:r),this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}class uG{constructor(e,r,n){this.channels=void 0,this.currentChannel=0,this.cmdHistory=PHe(),this.logger=void 0;const i=this.logger=new kHe;this.channels=[null,new cG(e,r,i),new cG(e+1,n,i)]}getHandler(e){return this.channels[e].getHandler()}setHandler(e,r){this.channels[e].setHandler(r)}addData(e,r){this.logger.time=e;for(let n=0;n<r.length;n+=2){const i=r[n]&127,s=r[n+1]&127;let o=!1,c=null;if(i===0&&s===0)continue;this.logger.log(3,()=>"["+dv([r[n],r[n+1]])+"] -> ("+dv([i,s])+")");const u=this.cmdHistory;if(i>=16&&i<=31){if(BHe(i,s,u)){xS(null,null,u),this.logger.log(3,()=>"Repeated command ("+dv([i,s])+") is dropped");continue}xS(i,s,this.cmdHistory),o=this.parseCmd(i,s),o||(o=this.parseMidrow(i,s)),o||(o=this.parsePAC(i,s)),o||(o=this.parseBackgroundAttributes(i,s))}else xS(null,null,u);if(!o&&(c=this.parseChars(i,s),c)){const d=this.currentChannel;d&&d>0?this.channels[d].insertChars(c):this.logger.log(2,"No channel found yet. TEXT-MODE?")}!o&&!c&&this.logger.log(2,()=>"Couldn't parse cleaned data "+dv([i,s])+" orig: "+dv([r[n],r[n+1]]))}}parseCmd(e,r){const n=(e===20||e===28||e===21||e===29)&&r>=32&&r<=47,i=(e===23||e===31)&&r>=33&&r<=35;if(!(n||i))return!1;const s=e===20||e===21||e===23?1:2,o=this.channels[s];return e===20||e===21||e===28||e===29?r===32?o.ccRCL():r===33?o.ccBS():r===34?o.ccAOF():r===35?o.ccAON():r===36?o.ccDER():r===37?o.ccRU(2):r===38?o.ccRU(3):r===39?o.ccRU(4):r===40?o.ccFON():r===41?o.ccRDC():r===42?o.ccTR():r===43?o.ccRTD():r===44?o.ccEDM():r===45?o.ccCR():r===46?o.ccENM():r===47&&o.ccEOC():o.ccTO(r-32),this.currentChannel=s,!0}parseMidrow(e,r){let n=0;if((e===17||e===25)&&r>=32&&r<=47){if(e===17?n=1:n=2,n!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const i=this.channels[n];return i?(i.ccMIDROW(r),this.logger.log(3,()=>"MIDROW ("+dv([e,r])+")"),!0):!1}return!1}parsePAC(e,r){let n;const i=(e>=17&&e<=23||e>=25&&e<=31)&&r>=64&&r<=127,s=(e===16||e===24)&&r>=64&&r<=95;if(!(i||s))return!1;const o=e<=23?1:2;r>=64&&r<=95?n=o===1?SHe[e]:CHe[e]:n=o===1?THe[e]:jHe[e];const c=this.channels[o];return c?(c.setPAC(this.interpretPAC(n,r)),this.currentChannel=o,!0):!1}interpretPAC(e,r){let n;const i={color:null,italics:!1,indent:null,underline:!1,row:e};return r>95?n=r-96:n=r-64,i.underline=(n&1)===1,n<=13?i.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(i.italics=!0,i.color="white"):i.indent=Math.floor((n-16)/2)*4,i}parseChars(e,r){let n,i=null,s=null;if(e>=25?(n=2,s=e-8):(n=1,s=e),s>=17&&s<=19){let o;s===17?o=r+80:s===18?o=r+112:o=r+144,this.logger.log(2,()=>"Special char '"+dse(o)+"' in channel "+n),i=[o]}else e>=32&&e<=127&&(i=r===0?[e]:[e,r]);return i&&this.logger.log(3,()=>"Char codes =  "+dv(i).join(",")),i}parseBackgroundAttributes(e,r){const n=(e===16||e===24)&&r>=32&&r<=47,i=(e===23||e===31)&&r>=45&&r<=47;if(!(n||i))return!1;let s;const o={};e===16||e===24?(s=Math.floor((r-32)/2),o.background=NHe[s],r%2===1&&(o.background=o.background+"_semi")):r===45?o.background="transparent":(o.foreground="black",r===47&&(o.underline=!0));const c=e<=23?1:2;return this.channels[c].setBkgData(o),!0}reset(){for(let e=0;e<Object.keys(this.channels).length;e++){const r=this.channels[e];r&&r.reset()}xS(null,null,this.cmdHistory)}cueSplitAtTime(e){for(let r=0;r<this.channels.length;r++){const n=this.channels[r];n&&n.cueSplitAtTime(e)}}}function xS(t,e,r){r.a=t,r.b=e}function BHe(t,e,r){return r.a===t&&r.b===e}function PHe(){return{a:null,b:null}}var LF=(function(){if(Xj!=null&&Xj.VTTCue)return self.VTTCue;const t=["","lr","rl"],e=["start","middle","end","left","right"];function r(c,u){if(typeof u!="string"||!Array.isArray(c))return!1;const l=u.toLowerCase();return~c.indexOf(l)?l:!1}function n(c){return r(t,c)}function i(c){return r(e,c)}function s(c,...u){let l=1;for(;l<arguments.length;l++){const d=arguments[l];for(const f in d)c[f]=d[f]}return c}function o(c,u,l){const d=this,f={enumerable:!0};d.hasBeenReset=!1;let A="",p=!1,g=c,y=u,x=l,w=null,E="",T=!0,C="auto",N="start",I=50,U="middle",K=50,Y="middle";Object.defineProperty(d,"id",s({},f,{get:function(){return A},set:function(re){A=""+re}})),Object.defineProperty(d,"pauseOnExit",s({},f,{get:function(){return p},set:function(re){p=!!re}})),Object.defineProperty(d,"startTime",s({},f,{get:function(){return g},set:function(re){if(typeof re!="number")throw new TypeError("Start time must be set to a number.");g=re,this.hasBeenReset=!0}})),Object.defineProperty(d,"endTime",s({},f,{get:function(){return y},set:function(re){if(typeof re!="number")throw new TypeError("End time must be set to a number.");y=re,this.hasBeenReset=!0}})),Object.defineProperty(d,"text",s({},f,{get:function(){return x},set:function(re){x=""+re,this.hasBeenReset=!0}})),Object.defineProperty(d,"region",s({},f,{get:function(){return w},set:function(re){w=re,this.hasBeenReset=!0}})),Object.defineProperty(d,"vertical",s({},f,{get:function(){return E},set:function(re){const se=n(re);if(se===!1)throw new SyntaxError("An invalid or illegal string was specified.");E=se,this.hasBeenReset=!0}})),Object.defineProperty(d,"snapToLines",s({},f,{get:function(){return T},set:function(re){T=!!re,this.hasBeenReset=!0}})),Object.defineProperty(d,"line",s({},f,{get:function(){return C},set:function(re){if(typeof re!="number"&&re!=="auto")throw new SyntaxError("An invalid number or illegal string was specified.");C=re,this.hasBeenReset=!0}})),Object.defineProperty(d,"lineAlign",s({},f,{get:function(){return N},set:function(re){const se=i(re);if(!se)throw new SyntaxError("An invalid or illegal string was specified.");N=se,this.hasBeenReset=!0}})),Object.defineProperty(d,"position",s({},f,{get:function(){return I},set:function(re){if(re<0||re>100)throw new Error("Position must be between 0 and 100.");I=re,this.hasBeenReset=!0}})),Object.defineProperty(d,"positionAlign",s({},f,{get:function(){return U},set:function(re){const se=i(re);if(!se)throw new SyntaxError("An invalid or illegal string was specified.");U=se,this.hasBeenReset=!0}})),Object.defineProperty(d,"size",s({},f,{get:function(){return K},set:function(re){if(re<0||re>100)throw new Error("Size must be between 0 and 100.");K=re,this.hasBeenReset=!0}})),Object.defineProperty(d,"align",s({},f,{get:function(){return Y},set:function(re){const se=i(re);if(!se)throw new SyntaxError("An invalid or illegal string was specified.");Y=se,this.hasBeenReset=!0}})),d.displayState=void 0}return o.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},o})();class OHe{decode(e,r){if(!e)return"";if(typeof e!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}function fse(t){function e(n,i,s,o){return(n|0)*3600+(i|0)*60+(s|0)+parseFloat(o||0)}const r=t.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return r?parseFloat(r[2])>59?e(r[2],r[3],0,r[4]):e(r[1],r[2],r[3],r[4]):null}class RHe{constructor(){this.values=Object.create(null)}set(e,r){!this.get(e)&&r!==""&&(this.values[e]=r)}get(e,r,n){return n?this.has(e)?this.values[e]:r[n]:this.has(e)?this.values[e]:r}has(e){return e in this.values}alt(e,r,n){for(let i=0;i<n.length;++i)if(r===n[i]){this.set(e,r);break}}integer(e,r){/^-?\d+$/.test(r)&&this.set(e,parseInt(r,10))}percent(e,r){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(r)){const n=parseFloat(r);if(n>=0&&n<=100)return this.set(e,n),!0}return!1}}function Ase(t,e,r,n){const i=n?t.split(n):[t];for(const s in i){if(typeof i[s]!="string")continue;const o=i[s].split(r);if(o.length!==2)continue;const c=o[0],u=o[1];e(c,u)}}const xO=new LF(0,0,""),bS=xO.align==="middle"?"middle":"center";function DHe(t,e,r){const n=t;function i(){const c=fse(t);if(c===null)throw new Error("Malformed timestamp: "+n);return t=t.replace(/^[^\sa-zA-Z-]+/,""),c}function s(c,u){const l=new RHe;Ase(c,function(A,p){let g;switch(A){case"region":for(let y=r.length-1;y>=0;y--)if(r[y].id===p){l.set(A,r[y].region);break}break;case"vertical":l.alt(A,p,["rl","lr"]);break;case"line":g=p.split(","),l.integer(A,g[0]),l.percent(A,g[0])&&l.set("snapToLines",!1),l.alt(A,g[0],["auto"]),g.length===2&&l.alt("lineAlign",g[1],["start",bS,"end"]);break;case"position":g=p.split(","),l.percent(A,g[0]),g.length===2&&l.alt("positionAlign",g[1],["start",bS,"end","line-left","line-right","auto"]);break;case"size":l.percent(A,p);break;case"align":l.alt(A,p,["start",bS,"end","left","right"]);break}},/:/,/\s/),u.region=l.get("region",null),u.vertical=l.get("vertical","");let d=l.get("line","auto");d==="auto"&&xO.line===-1&&(d=-1),u.line=d,u.lineAlign=l.get("lineAlign","start"),u.snapToLines=l.get("snapToLines",!0),u.size=l.get("size",100),u.align=l.get("align",bS);let f=l.get("position","auto");f==="auto"&&xO.position===50&&(f=u.align==="start"||u.align==="left"?0:u.align==="end"||u.align==="right"?100:50),u.position=f}function o(){t=t.replace(/^\s+/,"")}if(o(),e.startTime=i(),o(),t.slice(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+n);t=t.slice(3),o(),e.endTime=i(),o(),s(t,e)}function mse(t){return t.replace(/<br(?: \/)?>/gi,`
`)}class MHe{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new OHe,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(e){const r=this;e&&(r.buffer+=r.decoder.decode(e,{stream:!0}));function n(){let s=r.buffer,o=0;for(s=mse(s);o<s.length&&s[o]!=="\r"&&s[o]!==`
`;)++o;const c=s.slice(0,o);return s[o]==="\r"&&++o,s[o]===`
`&&++o,r.buffer=s.slice(o),c}function i(s){Ase(s,function(o,c){},/:/)}try{let s="";if(r.state==="INITIAL"){if(!/\r\n|\n/.test(r.buffer))return this;s=n();const c=s.match(/^()?WEBVTT([ \t].*)?$/);if(!(c!=null&&c[0]))throw new Error("Malformed WebVTT signature.");r.state="HEADER"}let o=!1;for(;r.buffer;){if(!/\r\n|\n/.test(r.buffer))return this;switch(o?o=!1:s=n(),r.state){case"HEADER":/:/.test(s)?i(s):s||(r.state="ID");continue;case"NOTE":s||(r.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(s)){r.state="NOTE";break}if(!s)continue;if(r.cue=new LF(0,0,""),r.state="CUE",s.indexOf("-->")===-1){r.cue.id=s;continue}case"CUE":if(!r.cue){r.state="BADCUE";continue}try{DHe(s,r.cue,r.regionList)}catch{r.cue=null,r.state="BADCUE";continue}r.state="CUETEXT";continue;case"CUETEXT":{const c=s.indexOf("-->")!==-1;if(!s||c&&(o=!0)){r.oncue&&r.cue&&r.oncue(r.cue),r.cue=null,r.state="ID";continue}if(r.cue===null)continue;r.cue.text&&(r.cue.text+=`
`),r.cue.text+=s}continue;case"BADCUE":s||(r.state="ID")}}}catch{r.state==="CUETEXT"&&r.cue&&r.oncue&&r.oncue(r.cue),r.cue=null,r.state=r.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this}flush(){const e=this;try{if((e.cue||e.state==="HEADER")&&(e.buffer+=`

`,e.parse()),e.state==="INITIAL"||e.state==="BADWEBVTT")throw new Error("Malformed WebVTT signature.")}catch(r){e.onparsingerror&&e.onparsingerror(r)}return e.onflush&&e.onflush(),this}}const FHe=/\r\n|\n\r|\n|\r/g,L4=function(e,r,n=0){return e.slice(n,n+r.length)===r},UHe=function(e){let r=parseInt(e.slice(-3));const n=parseInt(e.slice(-6,-4)),i=parseInt(e.slice(-9,-7)),s=e.length>9?parseInt(e.substring(0,e.indexOf(":"))):0;if(!qn(r)||!qn(n)||!qn(i)||!qn(s))throw Error(`Malformed X-TIMESTAMP-MAP: Local:${e}`);return r+=1e3*n,r+=60*1e3*i,r+=3600*1e3*s,r};function BF(t,e,r){return oE(t.toString())+oE(e.toString())+oE(r)}const $He=function(e,r,n){let i=e[r],s=e[i.prevCC];if(!s||!s.new&&i.new){e.ccOffset=e.presentationOffset=i.start,i.new=!1;return}for(;(o=s)!=null&&o.new;){var o;e.ccOffset+=i.start-s.start,i.new=!1,i=s,s=e[i.prevCC]}e.presentationOffset=n};function HHe(t,e,r,n,i,s,o){const c=new MHe,u=yf(new Uint8Array(t)).trim().replace(FHe,`
`).split(`
`),l=[],d=e?W$e(e.baseTime,e.timescale):0;let f="00:00.000",A=0,p=0,g,y=!0;c.oncue=function(x){const w=r[n];let E=r.ccOffset;const T=(A-d)/9e4;if(w!=null&&w.new&&(p!==void 0?E=r.ccOffset=w.start:$He(r,n,T)),T){if(!e){g=new Error("Missing initPTS for VTT MPEGTS");return}E=T-r.presentationOffset}const C=x.endTime-x.startTime,N=cf((x.startTime+E-p)*9e4,i*9e4)/9e4;x.startTime=Math.max(N,0),x.endTime=Math.max(N+C,0);const I=x.text.trim();x.text=decodeURIComponent(encodeURIComponent(I)),x.id||(x.id=BF(x.startTime,x.endTime,I)),x.endTime>0&&l.push(x)},c.onparsingerror=function(x){g=x},c.onflush=function(){if(g){o(g);return}s(l)},u.forEach(x=>{if(y)if(L4(x,"X-TIMESTAMP-MAP=")){y=!1,x.slice(16).split(",").forEach(w=>{L4(w,"LOCAL:")?f=w.slice(6):L4(w,"MPEGTS:")&&(A=parseInt(w.slice(7)))});try{p=UHe(f)/1e3}catch(w){g=w}return}else x===""&&(y=!1);c.parse(x+`
`)}),c.flush()}const B4="stpp.ttml.im1t",pse=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,gse=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,QHe={left:"start",center:"center",right:"end",start:"start",end:"end"};function dG(t,e,r,n){const i=pa(new Uint8Array(t),["mdat"]);if(i.length===0){n(new Error("Could not parse IMSC1 mdat"));return}const s=i.map(c=>yf(c)),o=G$e(e.baseTime,1,e.timescale);try{s.forEach(c=>r(VHe(c,o)))}catch(c){n(c)}}function VHe(t,e){const i=new DOMParser().parseFromString(t,"text/xml").getElementsByTagName("tt")[0];if(!i)throw new Error("Invalid ttml");const s={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},o=Object.keys(s).reduce((f,A)=>(f[A]=i.getAttribute(`ttp:${A}`)||s[A],f),{}),c=i.getAttribute("xml:space")!=="preserve",u=hG(P4(i,"styling","style")),l=hG(P4(i,"layout","region")),d=P4(i,"body","[begin]");return[].map.call(d,f=>{const A=vse(f,c);if(!A||!f.hasAttribute("begin"))return null;const p=R4(f.getAttribute("begin"),o),g=R4(f.getAttribute("dur"),o);let y=R4(f.getAttribute("end"),o);if(p===null)throw fG(f);if(y===null){if(g===null)throw fG(f);y=p+g}const x=new LF(p-e,y-e,A);x.id=BF(x.startTime,x.endTime,x.text);const w=l[f.getAttribute("region")],E=u[f.getAttribute("style")],T=zHe(w,E,u),{textAlign:C}=T;if(C){const N=QHe[C];N&&(x.lineAlign=N),x.align=C}return nl(x,T),x}).filter(f=>f!==null)}function P4(t,e,r){const n=t.getElementsByTagName(e)[0];return n?[].slice.call(n.querySelectorAll(r)):[]}function hG(t){return t.reduce((e,r)=>{const n=r.getAttribute("xml:id");return n&&(e[n]=r),e},{})}function vse(t,e){return[].slice.call(t.childNodes).reduce((r,n,i)=>{var s;return n.nodeName==="br"&&i?r+`
`:(s=n.childNodes)!=null&&s.length?vse(n,e):e?r+n.textContent.trim().replace(/\s+/g," "):r+n.textContent},"")}function zHe(t,e,r){const n="http://www.w3.org/ns/ttml#styling";let i=null;const s=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],o=t!=null&&t.hasAttribute("style")?t.getAttribute("style"):null;return o&&r.hasOwnProperty(o)&&(i=r[o]),s.reduce((c,u)=>{const l=O4(e,n,u)||O4(t,n,u)||O4(i,n,u);return l&&(c[u]=l),c},{})}function O4(t,e,r){return t&&t.hasAttributeNS(e,r)?t.getAttributeNS(e,r):null}function fG(t){return new Error(`Could not parse ttml timestamp ${t}`)}function R4(t,e){if(!t)return null;let r=fse(t);return r===null&&(pse.test(t)?r=KHe(t,e):gse.test(t)&&(r=GHe(t,e))),r}function KHe(t,e){const r=pse.exec(t),n=(r[4]|0)+(r[5]|0)/e.subFrameRate;return(r[1]|0)*3600+(r[2]|0)*60+(r[3]|0)+n/e.frameRate}function GHe(t,e){const r=gse.exec(t),n=Number(r[1]);switch(r[2]){case"h":return n*3600;case"m":return n*60;case"ms":return n*1e3;case"f":return n/e.frameRate;case"t":return n/e.tickRate}return n}class wS{constructor(e,r){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=r}dispatchCue(){this.startTime!==null&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(e,r,n){(this.startTime===null||this.startTime>e)&&(this.startTime=e),this.endTime=r,this.screen=n,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}}class WHe{constructor(e){this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=mG(),this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},e.on(Le.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(Le.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(Le.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Le.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(Le.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(Le.FRAG_LOADING,this.onFragLoading,this),e.on(Le.FRAG_LOADED,this.onFragLoaded,this),e.on(Le.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(Le.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(Le.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(Le.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(Le.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){const{hls:e}=this;e.off(Le.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(Le.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(Le.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Le.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(Le.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(Le.FRAG_LOADING,this.onFragLoading,this),e.off(Le.FRAG_LOADED,this.onFragLoaded,this),e.off(Le.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(Le.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(Le.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(Le.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(Le.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.media=null,this.cea608Parser1=this.cea608Parser2=void 0}initCea608Parsers(){const e=new wS(this,"textTrack1"),r=new wS(this,"textTrack2"),n=new wS(this,"textTrack3"),i=new wS(this,"textTrack4");this.cea608Parser1=new uG(1,e,r),this.cea608Parser2=new uG(3,n,i)}addCues(e,r,n,i,s){let o=!1;for(let c=s.length;c--;){const u=s[c],l=YHe(u[0],u[1],r,n);if(l>=0&&(u[0]=Math.min(u[0],r),u[1]=Math.max(u[1],n),o=!0,l/(n-r)>.5))return}if(o||s.push([r,n]),this.config.renderTextTracksNatively){const c=this.captionsTracks[e];this.Cues.newCue(c,r,n,i)}else{const c=this.Cues.newCue(null,r,n,i);this.hls.trigger(Le.CUES_PARSED,{type:"captions",cues:c,track:e})}}onInitPtsFound(e,{frag:r,id:n,initPTS:i,timescale:s,trackId:o}){const{unparsedVttFrags:c}=this;n===fi.MAIN&&(this.initPTS[r.cc]={baseTime:i,timescale:s,trackId:o}),c.length&&(this.unparsedVttFrags=[],c.forEach(u=>{this.initPTS[u.frag.cc]?this.onFragLoaded(Le.FRAG_LOADED,u):this.hls.trigger(Le.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:u.frag,error:new Error("Subtitle discontinuity domain does not match main")})}))}getExistingTrack(e,r){const{media:n}=this;if(n)for(let i=0;i<n.textTracks.length;i++){const s=n.textTracks[i];if(AG(s,{name:e,lang:r,characteristics:"transcribes-spoken-dialog,describes-music-and-sound"}))return s}return null}createCaptionsTrack(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)}createNativeTrack(e){if(this.captionsTracks[e])return;const{captionsProperties:r,captionsTracks:n,media:i}=this,{label:s,languageCode:o}=r[e],c=this.getExistingTrack(s,o);if(c)n[e]=c,rb(n[e]),lse(n[e],i);else{const u=this.createTextTrack("captions",s,o);u&&(u[e]=!0,n[e]=u)}}createNonNativeTrack(e){if(this.nonNativeCaptionsTracks[e])return;const r=this.captionsProperties[e];if(!r)return;const n=r.label,i={_id:e,label:n,kind:"captions",default:r.media?!!r.media.default:!1,closedCaptions:r.media};this.nonNativeCaptionsTracks[e]=i,this.hls.trigger(Le.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[i]})}createTextTrack(e,r,n){const i=this.media;if(i)return i.addTextTrack(e,r,n)}onMediaAttaching(e,r){this.media=r.media,r.mediaSource||this._cleanTracks()}onMediaDetaching(e,r){const n=!!r.transferMedia;if(this.media=null,n)return;const{captionsTracks:i}=this;Object.keys(i).forEach(s=>{rb(i[s]),delete i[s]}),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=mG(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){const{media:e}=this;if(!e)return;const r=e.textTracks;if(r)for(let n=0;n<r.length;n++)rb(r[n])}onSubtitleTracksUpdated(e,r){const n=r.subtitleTracks||[],i=n.some(s=>s.textCodec===B4);if(this.config.enableWebVTT||i&&this.config.enableIMSC1){if(Yie(this.tracks,n)){this.tracks=n;return}if(this.textTracks=[],this.tracks=n,this.config.renderTextTracksNatively){const o=this.media,c=o?hT(o.textTracks):null;if(this.tracks.forEach((u,l)=>{let d;if(c){let f=null;for(let A=0;A<c.length;A++)if(c[A]&&AG(c[A],u)){f=c[A],c[A]=null;break}f&&(d=f)}if(d)rb(d);else{const f=yse(u);d=this.createTextTrack(f,u.name,u.lang),d&&(d.mode="disabled")}d&&this.textTracks.push(d)}),c!=null&&c.length){const u=c.filter(l=>l!==null).map(l=>l.label);u.length&&this.hls.logger.warn(`Media element contains unused subtitle tracks: ${u.join(", ")}. Replace media element for each source to clear TextTracks and captions menu.`)}}else if(this.tracks.length){const o=this.tracks.map(c=>({label:c.name,kind:c.type.toLowerCase(),default:c.default,subtitleTrack:c}));this.hls.trigger(Le.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:o})}}}onManifestLoaded(e,r){this.config.enableCEA708Captions&&r.captions&&r.captions.forEach(n=>{const i=/(?:CC|SERVICE)([1-4])/.exec(n.instreamId);if(!i)return;const s=`textTrack${i[1]}`,o=this.captionsProperties[s];o&&(o.label=n.name,n.lang&&(o.languageCode=n.lang),o.media=n)})}closedCaptionsForLevel(e){const r=this.hls.levels[e.level];return r?.attrs["CLOSED-CAPTIONS"]}onFragLoading(e,r){if(this.enabled&&r.frag.type===fi.MAIN){var n,i;const{cea608Parser1:s,cea608Parser2:o,lastSn:c}=this,{cc:u,sn:l}=r.frag,d=(n=(i=r.part)==null?void 0:i.index)!=null?n:-1;s&&o&&(l!==c+1||l===c&&d!==this.lastPartIndex+1||u!==this.lastCc)&&(s.reset(),o.reset()),this.lastCc=u,this.lastSn=l,this.lastPartIndex=d}}onFragLoaded(e,r){const{frag:n,payload:i}=r;if(n.type===fi.SUBTITLE)if(i.byteLength){const s=n.decryptdata,o="stats"in r;if(s==null||!s.encrypted||o){const c=this.tracks[n.level],u=this.vttCCs;u[n.cc]||(u[n.cc]={start:n.start,prevCC:this.prevCC,new:!0},this.prevCC=n.cc),c&&c.textCodec===B4?this._parseIMSC1(n,i):this._parseVTTs(r)}}else this.hls.trigger(Le.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:new Error("Empty subtitle payload")})}_parseIMSC1(e,r){const n=this.hls;dG(r,this.initPTS[e.cc],i=>{this._appendCues(i,e.level),n.trigger(Le.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})},i=>{n.logger.log(`Failed to parse IMSC1: ${i}`),n.trigger(Le.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:i})})}_parseVTTs(e){var r;const{frag:n,payload:i}=e,{initPTS:s,unparsedVttFrags:o}=this,c=s.length-1;if(!s[n.cc]&&c===-1){o.push(e);return}const u=this.hls,l=(r=n.initSegment)!=null&&r.data?Jf(n.initSegment.data,new Uint8Array(i)).buffer:i;HHe(l,this.initPTS[n.cc],this.vttCCs,n.cc,n.start,d=>{this._appendCues(d,n.level),u.trigger(Le.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:n})},d=>{const f=d.message==="Missing initPTS for VTT MPEGTS";f?o.push(e):this._fallbackToIMSC1(n,i),u.logger.log(`Failed to parse VTT cue: ${d}`),!(f&&c>n.cc)&&u.trigger(Le.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:d})})}_fallbackToIMSC1(e,r){const n=this.tracks[e.level];n.textCodec||dG(r,this.initPTS[e.cc],()=>{n.textCodec=B4,this._parseIMSC1(e,r)},()=>{n.textCodec="wvtt"})}_appendCues(e,r){const n=this.hls;if(this.config.renderTextTracksNatively){const i=this.textTracks[r];if(!i||i.mode==="disabled")return;e.forEach(s=>cse(i,s))}else{const i=this.tracks[r];if(!i)return;const s=i.default?"default":"subtitles"+r;n.trigger(Le.CUES_PARSED,{type:"subtitles",cues:e,track:s})}}onFragDecrypted(e,r){const{frag:n}=r;n.type===fi.SUBTITLE&&this.onFragLoaded(Le.FRAG_LOADED,r)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(e,r){if(!this.enabled||!this.config.enableCEA708Captions)return;const{frag:n,samples:i}=r;if(!(n.type===fi.MAIN&&this.closedCaptionsForLevel(n)==="NONE"))for(let s=0;s<i.length;s++){const o=i[s].bytes;if(o){this.cea608Parser1||this.initCea608Parsers();const c=this.extractCea608Data(o);this.cea608Parser1.addData(i[s].pts,c[0]),this.cea608Parser2.addData(i[s].pts,c[1])}}}onBufferFlushing(e,{startOffset:r,endOffset:n,endOffsetSubtitles:i,type:s}){const{media:o}=this;if(!(!o||o.currentTime<n)){if(!s||s==="video"){const{captionsTracks:c}=this;Object.keys(c).forEach(u=>yO(c[u],r,n))}if(this.config.renderTextTracksNatively&&r===0&&i!==void 0){const{textTracks:c}=this;Object.keys(c).forEach(u=>yO(c[u],r,i))}}}extractCea608Data(e){const r=[[],[]],n=e[0]&31;let i=2;for(let s=0;s<n;s++){const o=e[i++],c=127&e[i++],u=127&e[i++];if(c===0&&u===0)continue;if((4&o)!==0){const d=3&o;(d===0||d===1)&&(r[d].push(c),r[d].push(u))}}return r}}function yse(t){return t.characteristics&&/transcribes-spoken-dialog/gi.test(t.characteristics)&&/describes-music-and-sound/gi.test(t.characteristics)?"captions":"subtitles"}function AG(t,e){return!!t&&t.kind===yse(e)&&mO(e,t)}function YHe(t,e,r,n){return Math.min(e,n)-Math.max(t,r)}function mG(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}}}const qHe=/\s/,XHe={newCue(t,e,r,n){const i=[];let s,o,c,u,l;const d=self.VTTCue||self.TextTrackCue;for(let A=0;A<n.rows.length;A++)if(s=n.rows[A],c=!0,u=0,l="",!s.isEmpty()){var f;for(let y=0;y<s.chars.length;y++)qHe.test(s.chars[y].uchar)&&c?u++:(l+=s.chars[y].uchar,c=!1);s.cueStartTime=e,e===r&&(r+=1e-4),u>=16?u--:u++;const p=mse(l.trim()),g=BF(e,r,p);t!=null&&(f=t.cues)!=null&&f.getCueById(g)||(o=new d(e,r,p),o.id=g,o.line=A+1,o.align="left",o.position=10+Math.min(80,Math.floor(u*8/32)*10),i.push(o))}return t&&i.length&&(i.sort((A,p)=>A.line==="auto"||p.line==="auto"?0:A.line>8&&p.line>8?p.line-A.line:A.line-p.line),i.forEach(A=>cse(t,A))),i}};function ZHe(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch{}return!1}const JHe=/(\d+)-(\d+)\/(\d+)/;class pG{constructor(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=null,this.response=null,this.controller=void 0,this.context=null,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||nQe,this.controller=new self.AbortController,this.stats=new hF}destroy(){this.loader=this.callbacks=this.context=this.config=this.request=null,this.abortInternal(),this.response=null,this.fetchSetup=this.controller=this.stats=null}abortInternal(){this.controller&&!this.stats.loading.end&&(this.stats.aborted=!0,this.controller.abort())}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)}load(e,r,n){const i=this.stats;if(i.loading.start)throw new Error("Loader can only be used once.");i.loading.start=self.performance.now();const s=eQe(e,this.controller.signal),o=e.responseType==="arraybuffer",c=o?"byteLength":"length",{maxTimeToFirstByteMs:u,maxLoadTimeMs:l}=r.loadPolicy;this.context=e,this.config=r,this.callbacks=n,this.request=this.fetchSetup(e,s),self.clearTimeout(this.requestTimeout),r.timeout=u&&qn(u)?u:l,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(i,e,this.response))},r.timeout),(i2(this.request)?this.request.then(self.fetch):self.fetch(this.request)).then(f=>{var A;this.response=this.loader=f;const p=Math.max(self.performance.now(),i.loading.start);if(self.clearTimeout(this.requestTimeout),r.timeout=l,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(i,e,this.response))},l-(p-i.loading.start)),!f.ok){const{status:y,statusText:x}=f;throw new iQe(x||"fetch, bad network response",y,f)}i.loading.first=p,i.total=rQe(f.headers)||i.total;const g=(A=this.callbacks)==null?void 0:A.onProgress;return g&&qn(r.highWaterMark)?this.loadProgressively(f,i,e,r.highWaterMark,g):o?f.arrayBuffer():e.responseType==="json"?f.json():f.text()}).then(f=>{var A,p;const g=this.response;if(!g)throw new Error("loader destroyed");self.clearTimeout(this.requestTimeout),i.loading.end=Math.max(self.performance.now(),i.loading.first);const y=f[c];y&&(i.loaded=i.total=y);const x={url:g.url,data:f,code:g.status},w=(A=this.callbacks)==null?void 0:A.onProgress;w&&!qn(r.highWaterMark)&&w(i,e,f,g),(p=this.callbacks)==null||p.onSuccess(x,i,e,g)}).catch(f=>{var A;if(self.clearTimeout(this.requestTimeout),i.aborted)return;const p=f&&f.code||0,g=f?f.message:null;(A=this.callbacks)==null||A.onError({code:p,text:g},e,f?f.details:null,i)})}getCacheAge(){let e=null;if(this.response){const r=this.response.headers.get("age");e=r?parseFloat(r):null}return e}getResponseHeader(e){return this.response?this.response.headers.get(e):null}loadProgressively(e,r,n,i=0,s){const o=new Nie,c=e.body.getReader(),u=()=>c.read().then(l=>{if(l.done)return o.dataLength&&s(r,n,o.flush().buffer,e),Promise.resolve(new ArrayBuffer(0));const d=l.value,f=d.length;return r.loaded+=f,f<i||o.dataLength?(o.push(d),o.dataLength>=i&&s(r,n,o.flush().buffer,e)):s(r,n,d.buffer,e),u()}).catch(()=>Promise.reject());return u()}}function eQe(t,e){const r={method:"GET",mode:"cors",credentials:"same-origin",signal:e,headers:new self.Headers(nl({},t.headers))};return t.rangeEnd&&r.headers.set("Range","bytes="+t.rangeStart+"-"+String(t.rangeEnd-1)),r}function tQe(t){const e=JHe.exec(t);if(e)return parseInt(e[2])-parseInt(e[1])+1}function rQe(t){const e=t.get("Content-Range");if(e){const n=tQe(e);if(qn(n))return n}const r=t.get("Content-Length");if(r)return parseInt(r)}function nQe(t,e){return new self.Request(t.url,e)}class iQe extends Error{constructor(e,r,n){super(e),this.code=void 0,this.details=void 0,this.code=r,this.details=n}}const sQe=/^age:\s*[\d.]+\s*$/im;class xse{constructor(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=null,this.loader=null,this.stats=void 0,this.xhrSetup=e&&e.xhrSetup||null,this.stats=new hF,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null,this.context=null,this.xhrSetup=null}abortInternal(){const e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,e.readyState!==4&&(this.stats.aborted=!0,e.abort()))}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(e,r,n){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=r,this.callbacks=n,this.loadInternal()}loadInternal(){const{config:e,context:r}=this;if(!e||!r)return;const n=this.loader=new self.XMLHttpRequest,i=this.stats;i.loading.first=0,i.loaded=0,i.aborted=!1;const s=this.xhrSetup;s?Promise.resolve().then(()=>{if(!(this.loader!==n||this.stats.aborted))return s(n,r.url)}).catch(o=>{if(!(this.loader!==n||this.stats.aborted))return n.open("GET",r.url,!0),s(n,r.url)}).then(()=>{this.loader!==n||this.stats.aborted||this.openAndSendXhr(n,r,e)}).catch(o=>{var c;(c=this.callbacks)==null||c.onError({code:n.status,text:o.message},r,n,i)}):this.openAndSendXhr(n,r,e)}openAndSendXhr(e,r,n){e.readyState||e.open("GET",r.url,!0);const i=r.headers,{maxTimeToFirstByteMs:s,maxLoadTimeMs:o}=n.loadPolicy;if(i)for(const c in i)e.setRequestHeader(c,i[c]);r.rangeEnd&&e.setRequestHeader("Range","bytes="+r.rangeStart+"-"+(r.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=r.responseType,self.clearTimeout(this.requestTimeout),n.timeout=s&&qn(s)?s:o,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),n.timeout),e.send()}readystatechange(){const{context:e,loader:r,stats:n}=this;if(!e||!r)return;const i=r.readyState,s=this.config;if(!n.aborted&&i>=2&&(n.loading.first===0&&(n.loading.first=Math.max(self.performance.now(),n.loading.start),s.timeout!==s.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),s.timeout=s.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),s.loadPolicy.maxLoadTimeMs-(n.loading.first-n.loading.start)))),i===4)){self.clearTimeout(this.requestTimeout),r.onreadystatechange=null,r.onprogress=null;const l=r.status,d=r.responseType==="text"?r.responseText:null;if(l>=200&&l<300){const g=d??r.response;if(g!=null){var o,c;n.loading.end=Math.max(self.performance.now(),n.loading.first);const y=r.responseType==="arraybuffer"?g.byteLength:g.length;n.loaded=n.total=y,n.bwEstimate=n.total*8e3/(n.loading.end-n.loading.first);const x=(o=this.callbacks)==null?void 0:o.onProgress;x&&x(n,e,g,r);const w={url:r.responseURL,data:g,code:l};(c=this.callbacks)==null||c.onSuccess(w,n,e,r);return}}const f=s.loadPolicy.errorRetry,A=n.retry,p={url:e.url,data:void 0,code:l};if(Yj(f,A,!1,p))this.retry(f);else{var u;Ho.error(`${l} while loading ${e.url}`),(u=this.callbacks)==null||u.onError({code:l,text:r.statusText},e,r,n)}}}loadtimeout(){if(!this.config)return;const e=this.config.loadPolicy.timeoutRetry,r=this.stats.retry;if(Yj(e,r,!0))this.retry(e);else{var n;Ho.warn(`timeout while loading ${(n=this.context)==null?void 0:n.url}`);const i=this.callbacks;i&&(this.abortInternal(),i.onTimeout(this.stats,this.context,this.loader))}}retry(e){const{context:r,stats:n}=this;this.retryDelay=pF(e,n.retry),n.retry++,Ho.warn(`${status?"HTTP Status "+status:"Timeout"} while loading ${r?.url}, retrying ${n.retry}/${e.maxNumRetry} in ${this.retryDelay}ms`),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(e){const r=this.stats;r.loaded=e.loaded,e.lengthComputable&&(r.total=e.total)}getCacheAge(){let e=null;if(this.loader&&sQe.test(this.loader.getAllResponseHeaders())){const r=this.loader.getResponseHeader("age");e=r?parseFloat(r):null}return e}getResponseHeader(e){return this.loader&&new RegExp(`^${e}:\\s*[\\d.]+\\s*$`,"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(e):null}}const aQe={maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null},oQe=Uo(Uo({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,maxDevicePixelRatio:Number.POSITIVE_INFINITY,preferManagedMediaSource:!0,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,frontBufferFlushThreshold:1/0,startOnSegmentBoundary:!1,maxBufferSize:60*1e3*1e3,maxFragLookUpTolerance:.25,maxBufferHole:.1,detectStallWithCurrentTimeMs:1250,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,nudgeOnVideoHole:!0,liveSyncMode:"edge",liveSyncDurationCount:3,liveSyncOnStallIncrease:1,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,ignorePlaylistParsingErrors:!1,loader:xse,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:y7e,bufferController:c9e,capLevelController:F5,errorController:_7e,fpsController:uHe,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrEwmaDefaultEstimateMax:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:vie,requireKeySystemAccessOnStart:!1,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableEmsgKLVMetadata:!1,enableID3MetadataCues:!0,enableInterstitialPlayback:!0,interstitialAppendInPlace:!0,interstitialLiveLookAhead:10,useMediaCapabilities:!0,preserveManualLevelOnError:!1,certLoadPolicy:{default:aQe},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},interstitialAssetListLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:3e4,timeoutRetry:{maxNumRetry:0,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:0,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},lQe()),{},{subtitleStreamController:wHe,subtitleTrackController:fHe,timelineController:WHe,audioStreamController:s9e,audioTrackController:a9e,emeController:pb,cmcdController:aHe,contentSteeringController:lHe,interstitialsController:bHe});function lQe(){return{cueHandler:XHe,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}function cQe(t,e,r){if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(e.liveMaxLatencyDurationCount!==void 0&&(e.liveSyncDurationCount===void 0||e.liveMaxLatencyDurationCount<=e.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(e.liveMaxLatencyDuration!==void 0&&(e.liveSyncDuration===void 0||e.liveMaxLatencyDuration<=e.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');const n=bO(t),i=["manifest","level","frag"],s=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return i.forEach(o=>{const c=`${o==="level"?"playlist":o}LoadPolicy`,u=e[c]===void 0,l=[];s.forEach(d=>{const f=`${o}Loading${d}`,A=e[f];if(A!==void 0&&u){l.push(f);const p=n[c].default;switch(e[c]={default:p},d){case"TimeOut":p.maxLoadTimeMs=A,p.maxTimeToFirstByteMs=A;break;case"MaxRetry":p.errorRetry.maxNumRetry=A,p.timeoutRetry.maxNumRetry=A;break;case"RetryDelay":p.errorRetry.retryDelayMs=A,p.timeoutRetry.retryDelayMs=A;break;case"MaxRetryTimeout":p.errorRetry.maxRetryDelayMs=A,p.timeoutRetry.maxRetryDelayMs=A;break}}}),l.length&&r.warn(`hls.js config: "${l.join('", "')}" setting(s) are deprecated, use "${c}": ${fl(e[c])}`)}),Uo(Uo({},n),e)}function bO(t){return t&&typeof t=="object"?Array.isArray(t)?t.map(bO):Object.keys(t).reduce((e,r)=>(e[r]=bO(t[r]),e),{}):t}function uQe(t,e){const r=t.loader;r!==pG&&r!==xse?(e.log("[config]: Custom loader detected, cannot enable progressive streaming"),t.progressive=!1):ZHe()&&(t.loader=pG,t.progressive=!0,t.enableSoftwareAES=!0,e.log("[config]: Progressive streaming enabled, using FetchLoader"))}const fT=2,dQe=.1,hQe=.05,fQe=100;class AQe extends fie{constructor(e,r){super("gap-controller",e.logger),this.hls=void 0,this.fragmentTracker=void 0,this.media=null,this.mediaSource=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.buffered={},this.lastCurrentTime=0,this.ended=0,this.waiting=0,this.onMediaPlaying=()=>{this.ended=0,this.waiting=0},this.onMediaWaiting=()=>{var n;(n=this.media)!=null&&n.seeking||(this.waiting=self.performance.now(),this.tick())},this.onMediaEnded=()=>{if(this.hls){var n;this.ended=((n=this.media)==null?void 0:n.currentTime)||1,this.hls.trigger(Le.MEDIA_ENDED,{stalled:!1})}},this.hls=e,this.fragmentTracker=r,this.registerListeners()}registerListeners(){const{hls:e}=this;e&&(e.on(Le.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(Le.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(Le.BUFFER_APPENDED,this.onBufferAppended,this))}unregisterListeners(){const{hls:e}=this;e&&(e.off(Le.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(Le.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(Le.BUFFER_APPENDED,this.onBufferAppended,this))}destroy(){super.destroy(),this.unregisterListeners(),this.media=this.hls=this.fragmentTracker=null,this.mediaSource=void 0}onMediaAttached(e,r){this.setInterval(fQe),this.mediaSource=r.mediaSource;const n=this.media=r.media;vh(n,"playing",this.onMediaPlaying),vh(n,"waiting",this.onMediaWaiting),vh(n,"ended",this.onMediaEnded)}onMediaDetaching(e,r){this.clearInterval();const{media:n}=this;n&&(Uh(n,"playing",this.onMediaPlaying),Uh(n,"waiting",this.onMediaWaiting),Uh(n,"ended",this.onMediaEnded),this.media=null),this.mediaSource=void 0}onBufferAppended(e,r){this.buffered=r.timeRanges}get hasBuffered(){return Object.keys(this.buffered).length>0}tick(){var e;if(!((e=this.media)!=null&&e.readyState)||!this.hasBuffered)return;const r=this.media.currentTime;this.poll(r,this.lastCurrentTime),this.lastCurrentTime=r}poll(e,r){var n,i;const s=(n=this.hls)==null?void 0:n.config;if(!s)return;const o=this.media;if(!o)return;const{seeking:c}=o,u=this.seeking&&!c,l=!this.seeking&&c,d=o.paused&&!c||o.ended||o.playbackRate===0;if(this.seeking=c,e!==r){r&&(this.ended=0),this.moved=!0,c||(this.nudgeRetry=0,s.nudgeOnVideoHole&&!d&&e>r&&this.nudgeOnVideoHole(e,r)),this.waiting===0&&this.stallResolved(e);return}if(l||u){u&&this.stallResolved(e);return}if(d){this.nudgeRetry=0,this.stallResolved(e),!this.ended&&o.ended&&this.hls&&(this.ended=e||1,this.hls.trigger(Le.MEDIA_ENDED,{stalled:!1}));return}if(!Hs.getBuffered(o).length){this.nudgeRetry=0;return}const f=Hs.bufferInfo(o,e,0),A=f.nextStart||0,p=this.fragmentTracker;if(c&&p&&this.hls){const I=gG(this.hls.inFlightFragments,e),U=f.len>fT,K=!A||I||A-e>fT&&!p.getPartialFragment(e);if(U||K)return;this.moved=!1}const g=(i=this.hls)==null?void 0:i.latestLevelDetails;if(!this.moved&&this.stalled!==null&&p){if(!(f.len>0)&&!A)return;const U=Math.max(A,f.start||0)-e,Y=!!(g!=null&&g.live)?g.targetduration*2:fT,re=ES(e,p);if(U>0&&(U<=Y||re)){o.paused||this._trySkipBufferHole(re);return}}const y=s.detectStallWithCurrentTimeMs,x=self.performance.now(),w=this.waiting;let E=this.stalled;if(E===null)if(w>0&&x-w<y)E=this.stalled=w;else{this.stalled=x;return}const T=x-E;if(!c&&(T>=y||w)&&this.hls){var C;if(((C=this.mediaSource)==null?void 0:C.readyState)==="ended"&&!(g!=null&&g.live)&&Math.abs(e-(g?.edge||0))<1){if(this.ended)return;this.ended=e||1,this.hls.trigger(Le.MEDIA_ENDED,{stalled:!0});return}if(this._reportStall(f),!this.media||!this.hls)return}const N=Hs.bufferInfo(o,e,s.maxBufferHole);this._tryFixBufferStall(N,T,e)}stallResolved(e){const r=this.stalled;if(r&&this.hls&&(this.stalled=null,this.stallReported)){const n=self.performance.now()-r;this.log(`playback not stuck anymore @${e}, after ${Math.round(n)}ms`),this.stallReported=!1,this.waiting=0,this.hls.trigger(Le.STALL_RESOLVED,{})}}nudgeOnVideoHole(e,r){var n;const i=this.buffered.video;if(this.hls&&this.media&&this.fragmentTracker&&(n=this.buffered.audio)!=null&&n.length&&i&&i.length>1&&e>i.end(0)){const s=Hs.bufferedInfo(Hs.timeRangesToArray(this.buffered.audio),e,0);if(s.len>1&&r>=s.start){const o=Hs.timeRangesToArray(i),c=Hs.bufferedInfo(o,r,0).bufferedIndex;if(c>-1&&c<o.length-1){const u=Hs.bufferedInfo(o,e,0).bufferedIndex,l=o[c].end,d=o[c+1].start;if((u===-1||u>c)&&d-l<1&&e-l<2){const f=new Error(`nudging playhead to flush pipeline after video hole. currentTime: ${e} hole: ${l} -> ${d} buffered index: ${u}`);this.warn(f.message),this.media.currentTime+=1e-6;let A=ES(e,this.fragmentTracker);A&&"fragment"in A?A=A.fragment:A||(A=void 0);const p=Hs.bufferInfo(this.media,e,0);this.hls.trigger(Le.ERROR,{type:Oi.MEDIA_ERROR,details:vr.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:f,reason:f.message,frag:A,buffer:p.len,bufferInfo:p})}}}}}_tryFixBufferStall(e,r,n){var i,s;const{fragmentTracker:o,media:c}=this,u=(i=this.hls)==null?void 0:i.config;if(!c||!o||!u)return;const l=(s=this.hls)==null?void 0:s.latestLevelDetails,d=ES(n,o);if((d||l!=null&&l.live&&n<l.fragmentStart)&&(this._trySkipBufferHole(d)||!this.media))return;const f=e.buffered,A=this.adjacentTraversal(e,n);(f&&f.length>1&&e.len>u.maxBufferHole||e.nextStart&&(e.nextStart-n<u.maxBufferHole||A))&&(r>u.highBufferWatchdogPeriod*1e3||this.waiting)&&(this.warn("Trying to nudge playhead over buffer-hole"),this._tryNudgeBuffer(e))}adjacentTraversal(e,r){const n=this.fragmentTracker,i=e.nextStart;if(n&&i){const s=n.getFragAtPos(r,fi.MAIN),o=n.getFragAtPos(i,fi.MAIN);if(s&&o)return o.sn-s.sn<2}return!1}_reportStall(e){const{hls:r,media:n,stallReported:i,stalled:s}=this;if(!i&&s!==null&&n&&r){this.stallReported=!0;const o=new Error(`Playback stalling at @${n.currentTime} due to low buffer (${fl(e)})`);this.warn(o.message),r.trigger(Le.ERROR,{type:Oi.MEDIA_ERROR,details:vr.BUFFER_STALLED_ERROR,fatal:!1,error:o,buffer:e.len,bufferInfo:e,stalled:{start:s}})}}_trySkipBufferHole(e){var r;const{fragmentTracker:n,media:i}=this,s=(r=this.hls)==null?void 0:r.config;if(!i||!n||!s)return 0;const o=i.currentTime,c=Hs.bufferInfo(i,o,0),u=o<c.start?c.start:c.nextStart;if(u&&this.hls){const d=c.len<=s.maxBufferHole,f=c.len>0&&c.len<1&&i.readyState<3,A=u-o;if(A>0&&(d||f)){if(A>s.maxBufferHole){let g=!1;if(o===0){const y=n.getAppendedFrag(0,fi.MAIN);y&&u<y.end&&(g=!0)}if(!g&&e){var l;if(!((l=this.hls.loadLevelObj)!=null&&l.details)||gG(this.hls.inFlightFragments,u))return 0;let x=!1,w=e.end;for(;w<u;){const E=ES(w,n);if(E)w+=E.duration;else{x=!0;break}}if(x)return 0}}const p=Math.max(u+hQe,o+dQe);if(this.warn(`skipping hole, adjusting currentTime from ${o} to ${p}`),this.moved=!0,i.currentTime=p,!(e!=null&&e.gap)){const g=new Error(`fragment loaded with buffer holes, seeking from ${o} to ${p}`),y={type:Oi.MEDIA_ERROR,details:vr.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:g,reason:g.message,buffer:c.len,bufferInfo:c};e&&("fragment"in e?y.part=e:y.frag=e),this.hls.trigger(Le.ERROR,y)}return p}}return 0}_tryNudgeBuffer(e){const{hls:r,media:n,nudgeRetry:i}=this,s=r?.config;if(!n||!s)return 0;const o=n.currentTime;if(this.nudgeRetry++,i<s.nudgeMaxRetry){const c=o+(i+1)*s.nudgeOffset,u=new Error(`Nudging 'currentTime' from ${o} to ${c}`);this.warn(u.message),n.currentTime=c,r.trigger(Le.ERROR,{type:Oi.MEDIA_ERROR,details:vr.BUFFER_NUDGE_ON_STALL,error:u,fatal:!1,buffer:e.len,bufferInfo:e})}else{const c=new Error(`Playhead still not moving while enough data buffered @${o} after ${s.nudgeMaxRetry} nudges`);this.error(c.message),r.trigger(Le.ERROR,{type:Oi.MEDIA_ERROR,details:vr.BUFFER_STALLED_ERROR,error:c,fatal:!0,buffer:e.len,bufferInfo:e})}}}function gG(t,e){const r=vG(t.main);if(r&&r.start<=e)return r;const n=vG(t.audio);return n&&n.start<=e?n:null}function vG(t){if(!t)return null;switch(t.state){case Kr.IDLE:case Kr.STOPPED:case Kr.ENDED:case Kr.ERROR:return null}return t.frag}function ES(t,e){return e.getAppendedFrag(t,fi.MAIN)||e.getPartialFragment(t)}const mQe=.25;function wO(){if(!(typeof self>"u"))return self.VTTCue||self.TextTrackCue}function D4(t,e,r,n,i){let s=new t(e,r,"");try{s.value=n,i&&(s.type=i)}catch{s=new t(e,r,fl(i?Uo({type:i},n):n))}return s}const _S=(()=>{const t=wO();try{t&&new t(0,Number.POSITIVE_INFINITY,"")}catch{return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})();class pQe{constructor(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.removeCues=!0,this.assetCue=void 0,this.onEventCueEnter=()=>{this.hls&&this.hls.trigger(Le.EVENT_CUE_ENTER,{})},this.hls=e,this._registerListeners()}destroy(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=this.onEventCueEnter=null}_registerListeners(){const{hls:e}=this;e&&(e.on(Le.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(Le.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(Le.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(Le.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Le.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(Le.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(Le.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(Le.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this))}_unregisterListeners(){const{hls:e}=this;e&&(e.off(Le.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(Le.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(Le.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(Le.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Le.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(Le.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(Le.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(Le.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this))}onMediaAttaching(e,r){var n;this.media=r.media,((n=r.overrides)==null?void 0:n.cueRemoval)===!1&&(this.removeCues=!1)}onMediaAttached(){var e;const r=(e=this.hls)==null?void 0:e.latestLevelDetails;r&&this.updateDateRangeCues(r)}onMediaDetaching(e,r){this.media=null,!r.transferMedia&&(this.id3Track&&(this.removeCues&&rb(this.id3Track,this.onEventCueEnter),this.id3Track=null),this.dateRangeCuesAppended={})}onManifestLoading(){this.dateRangeCuesAppended={}}createTrack(e){const r=this.getID3Track(e.textTracks);return r.mode="hidden",r}getID3Track(e){if(this.media){for(let r=0;r<e.length;r++){const n=e[r];if(n.kind==="metadata"&&n.label==="id3")return lse(n,this.media),n}return this.media.addTextTrack("metadata","id3")}}onFragParsingMetadata(e,r){if(!this.media||!this.hls)return;const{enableEmsgMetadataCues:n,enableID3MetadataCues:i}=this.hls.config;if(!n&&!i)return;const{samples:s}=r;this.id3Track||(this.id3Track=this.createTrack(this.media));const o=wO();if(o)for(let c=0;c<s.length;c++){const u=s[c].type;if(u===hf.emsg&&!n||!i)continue;const l=Rie(s[c].data),d=s[c].pts;let f=d+s[c].duration;f>_S&&(f=_S),f-d<=0&&(f=d+mQe);for(let p=0;p<l.length;p++){const g=l[p];if(!Die(g)){this.updateId3CueEnds(d,u);const y=D4(o,d,f,g,u);y&&this.id3Track.addCue(y)}}}}updateId3CueEnds(e,r){var n;const i=(n=this.id3Track)==null?void 0:n.cues;if(i)for(let s=i.length;s--;){const o=i[s];o.type===r&&o.startTime<e&&o.endTime===_S&&(o.endTime=e)}}onBufferFlushing(e,{startOffset:r,endOffset:n,type:i}){const{id3Track:s,hls:o}=this;if(!o)return;const{config:{enableEmsgMetadataCues:c,enableID3MetadataCues:u}}=o;if(s&&(c||u)){let l;i==="audio"?l=d=>d.type===hf.audioId3&&u:i==="video"?l=d=>d.type===hf.emsg&&c:l=d=>d.type===hf.audioId3&&u||d.type===hf.emsg&&c,yO(s,r,n,l)}}onLevelUpdated(e,{details:r}){this.updateDateRangeCues(r,!0)}onLevelPtsUpdated(e,r){Math.abs(r.drift)>.01&&this.updateDateRangeCues(r.details)}updateDateRangeCues(e,r){if(!this.hls||!this.media)return;const{assetPlayerId:n,timelineOffset:i,enableDateRangeMetadataCues:s,interstitialsController:o}=this.hls.config;if(!s)return;const c=wO();if(n&&i&&!o){const{fragmentStart:y,fragmentEnd:x}=e;let w=this.assetCue;w?(w.startTime=y,w.endTime=x):c&&(w=this.assetCue=D4(c,y,x,{assetPlayerId:this.hls.config.assetPlayerId},"hlsjs.interstitial.asset"),w&&(w.id=n,this.id3Track||(this.id3Track=this.createTrack(this.media)),this.id3Track.addCue(w),w.addEventListener("enter",this.onEventCueEnter)))}if(!e.hasProgramDateTime)return;const{id3Track:u}=this,{dateRanges:l}=e,d=Object.keys(l);let f=this.dateRangeCuesAppended;if(u&&r){var A;if((A=u.cues)!=null&&A.length){const y=Object.keys(f).filter(x=>!d.includes(x));for(let x=y.length;x--;){var p;const w=y[x],E=(p=f[w])==null?void 0:p.cues;delete f[w],E&&Object.keys(E).forEach(T=>{const C=E[T];if(C){C.removeEventListener("enter",this.onEventCueEnter);try{u.removeCue(C)}catch{}}})}}else f=this.dateRangeCuesAppended={}}const g=e.fragments[e.fragments.length-1];if(!(d.length===0||!qn(g?.programDateTime))){this.id3Track||(this.id3Track=this.createTrack(this.media));for(let y=0;y<d.length;y++){const x=d[y],w=l[x],E=w.startTime,T=f[x],C=T?.cues||{};let N=T?.durationKnown||!1,I=_S;const{duration:U,endDate:K}=w;if(K&&U!==null)I=E+U,N=!0;else if(w.endOnNext&&!N){const re=d.reduce((se,Ae)=>{if(Ae!==w.id){const we=l[Ae];if(we.class===w.class&&we.startDate>w.startDate&&(!se||w.startDate<se.startDate))return we}return se},null);re&&(I=re.startTime,N=!0)}const Y=Object.keys(w.attr);for(let re=0;re<Y.length;re++){const se=Y[re];if(!D7e(se))continue;const Ae=C[se];if(Ae)N&&!(T!=null&&T.durationKnown)?Ae.endTime=I:Math.abs(Ae.startTime-E)>.01&&(Ae.startTime=E,Ae.endTime=I);else if(c){let we=w.attr[se];M7e(se)&&(we=Gne(we));const ve=D4(c,E,I,{key:se,data:we},hf.dateRange);ve&&(ve.id=x,this.id3Track.addCue(ve),C[se]=ve,o&&(se==="X-ASSET-LIST"||se==="X-ASSET-URL")&&ve.addEventListener("enter",this.onEventCueEnter))}}f[x]={cues:C,dateRange:w,durationKnown:N}}}}}class gQe{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.currentTime=0,this.stallCount=0,this._latency=null,this._targetLatencyUpdated=!1,this.onTimeupdate=()=>{const{media:r}=this,n=this.levelDetails;if(!r||!n)return;this.currentTime=r.currentTime;const i=this.computeLatency();if(i===null)return;this._latency=i;const{lowLatencyMode:s,maxLiveSyncPlaybackRate:o}=this.config;if(!s||o===1||!n.live)return;const c=this.targetLatency;if(c===null)return;const u=i-c,l=Math.min(this.maxLatency,c+n.targetduration);if(u<l&&u>.05&&this.forwardBufferLength>1){const f=Math.min(2,Math.max(1,o)),A=Math.round(2/(1+Math.exp(-.75*u-this.edgeStalled))*20)/20,p=Math.min(f,Math.max(1,A));this.changeMediaPlaybackRate(r,p)}else r.playbackRate!==1&&r.playbackRate!==0&&this.changeMediaPlaybackRate(r,1)},this.hls=e,this.config=e.config,this.registerListeners()}get levelDetails(){var e;return((e=this.hls)==null?void 0:e.latestLevelDetails)||null}get latency(){return this._latency||0}get maxLatency(){const{config:e}=this;if(e.liveMaxLatencyDuration!==void 0)return e.liveMaxLatencyDuration;const r=this.levelDetails;return r?e.liveMaxLatencyDurationCount*r.targetduration:0}get targetLatency(){const e=this.levelDetails;if(e===null||this.hls===null)return null;const{holdBack:r,partHoldBack:n,targetduration:i}=e,{liveSyncDuration:s,liveSyncDurationCount:o,lowLatencyMode:c}=this.config,u=this.hls.userConfig;let l=c&&n||r;(this._targetLatencyUpdated||u.liveSyncDuration||u.liveSyncDurationCount||l===0)&&(l=s!==void 0?s:o*i);const d=i;return l+Math.min(this.stallCount*this.config.liveSyncOnStallIncrease,d)}set targetLatency(e){this.stallCount=0,this.config.liveSyncDuration=e,this._targetLatencyUpdated=!0}get liveSyncPosition(){const e=this.estimateLiveEdge(),r=this.targetLatency;if(e===null||r===null)return null;const n=this.levelDetails;if(n===null)return null;const i=n.edge,s=e-r-this.edgeStalled,o=i-n.totalduration,c=i-(this.config.lowLatencyMode&&n.partTarget||n.targetduration);return Math.min(Math.max(o,s),c)}get drift(){const e=this.levelDetails;return e===null?1:e.drift}get edgeStalled(){const e=this.levelDetails;if(e===null)return 0;const r=(this.config.lowLatencyMode&&e.partTarget||e.targetduration)*3;return Math.max(e.age-r,0)}get forwardBufferLength(){const{media:e}=this,r=this.levelDetails;if(!e||!r)return 0;const n=e.buffered.length;return(n?e.buffered.end(n-1):r.edge)-this.currentTime}destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.hls=null}registerListeners(){const{hls:e}=this;e&&(e.on(Le.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(Le.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(Le.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Le.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(Le.ERROR,this.onError,this))}unregisterListeners(){const{hls:e}=this;e&&(e.off(Le.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(Le.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(Le.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Le.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(Le.ERROR,this.onError,this))}onMediaAttached(e,r){this.media=r.media,this.media.addEventListener("timeupdate",this.onTimeupdate)}onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.onTimeupdate),this.media=null)}onManifestLoading(){this._latency=null,this.stallCount=0}onLevelUpdated(e,{details:r}){r.advanced&&this.onTimeupdate(),!r.live&&this.media&&this.media.removeEventListener("timeupdate",this.onTimeupdate)}onError(e,r){var n;r.details===vr.BUFFER_STALLED_ERROR&&(this.stallCount++,this.hls&&(n=this.levelDetails)!=null&&n.live&&this.hls.logger.warn("[latency-controller]: Stall detected, adjusting target latency"))}changeMediaPlaybackRate(e,r){var n,i;e.playbackRate!==r&&((n=this.hls)==null||n.logger.debug(`[latency-controller]: latency=${this.latency.toFixed(3)}, targetLatency=${(i=this.targetLatency)==null?void 0:i.toFixed(3)}, forwardBufferLength=${this.forwardBufferLength.toFixed(3)}: adjusting playback rate from ${e.playbackRate} to ${r}`),e.playbackRate=r)}estimateLiveEdge(){const e=this.levelDetails;return e===null?null:e.edge+e.age}computeLatency(){const e=this.estimateLiveEdge();return e===null?null:e-this.currentTime}}class vQe extends NF{constructor(e,r){super(e,"level-controller"),this._levels=[],this._firstLevel=-1,this._maxAutoLevel=-1,this._startLevel=void 0,this.currentLevel=null,this.currentLevelIndex=-1,this.manualLevelIndex=-1,this.steering=void 0,this.onParsedComplete=void 0,this.steering=r,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(Le.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Le.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(Le.LEVEL_LOADED,this.onLevelLoaded,this),e.on(Le.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(Le.FRAG_BUFFERED,this.onFragBuffered,this),e.on(Le.ERROR,this.onError,this)}_unregisterListeners(){const{hls:e}=this;e.off(Le.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Le.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(Le.LEVEL_LOADED,this.onLevelLoaded,this),e.off(Le.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(Le.FRAG_BUFFERED,this.onFragBuffered,this),e.off(Le.ERROR,this.onError,this)}destroy(){this._unregisterListeners(),this.steering=null,this.resetLevels(),super.destroy()}stopLoad(){this._levels.forEach(r=>{r.loadError=0,r.fragmentError=0}),super.stopLoad()}resetLevels(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[],this._maxAutoLevel=-1}onManifestLoading(e,r){this.resetLevels()}onManifestLoaded(e,r){const n=this.hls.config.preferManagedMediaSource,i=[],s={},o={};let c=!1,u=!1,l=!1;r.levels.forEach(d=>{const f=d.attrs;let{audioCodec:A,videoCodec:p}=d;A&&(d.audioCodec=A=zj(A,n)||void 0),p&&(p=d.videoCodec=e7e(p));const{width:g,height:y,unknownCodecs:x}=d,w=x?.length||0;if(c||(c=!!(g&&y)),u||(u=!!p),l||(l=!!A),w||A&&!this.isAudioSupported(A)||p&&!this.isVideoSupported(p)){this.log(`Some or all CODECS not supported "${f.CODECS}"`);return}const{CODECS:E,"FRAME-RATE":T,"HDCP-LEVEL":C,"PATHWAY-ID":N,RESOLUTION:I,"VIDEO-RANGE":U}=f,Y=`${`${N||"."}-`}${d.bitrate}-${I}-${T}-${E}-${U}-${C}`;if(s[Y])if(s[Y].uri!==d.url&&!d.attrs["PATHWAY-ID"]){const re=o[Y]+=1;d.attrs["PATHWAY-ID"]=new Array(re+1).join(".");const se=this.createLevel(d);s[Y]=se,i.push(se)}else s[Y].addGroupId("audio",f.AUDIO),s[Y].addGroupId("text",f.SUBTITLES);else{const re=this.createLevel(d);s[Y]=re,o[Y]=1,i.push(re)}}),this.filterAndSortMediaOptions(i,r,c,u,l)}createLevel(e){const r=new t2(e),n=e.supplemental;if(n!=null&&n.videoCodec&&!this.isVideoSupported(n.videoCodec)){const i=new Error(`SUPPLEMENTAL-CODECS not supported "${n.videoCodec}"`);this.log(i.message),r.supportedResult=sie(i,[])}return r}isAudioSupported(e){return JE(e,"audio",this.hls.config.preferManagedMediaSource)}isVideoSupported(e){return JE(e,"video",this.hls.config.preferManagedMediaSource)}filterAndSortMediaOptions(e,r,n,i,s){var o;let c=[],u=[],l=e;const d=((o=r.stats)==null?void 0:o.parsing)||{};if((n||i)&&s&&(l=l.filter(({videoCodec:E,videoRange:T,width:C,height:N})=>(!!E||!!(C&&N))&&u7e(T))),l.length===0){Promise.resolve().then(()=>{if(this.hls){let E="no level with compatible codecs found in manifest",T=E;r.levels.length&&(T=`one or more CODECS in variant not supported: ${fl(r.levels.map(N=>N.attrs.CODECS).filter((N,I,U)=>U.indexOf(N)===I))}`,this.warn(T),E+=` (${T})`);const C=new Error(E);this.hls.trigger(Le.ERROR,{type:Oi.MEDIA_ERROR,details:vr.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:r.url,error:C,reason:T})}}),d.end=performance.now();return}r.audioTracks&&(c=r.audioTracks.filter(E=>!E.audioCodec||this.isAudioSupported(E.audioCodec)),yG(c)),r.subtitles&&(u=r.subtitles,yG(u));const f=l.slice(0);l.sort((E,T)=>{if(E.attrs["HDCP-LEVEL"]!==T.attrs["HDCP-LEVEL"])return(E.attrs["HDCP-LEVEL"]||"")>(T.attrs["HDCP-LEVEL"]||"")?1:-1;if(n&&E.height!==T.height)return E.height-T.height;if(E.frameRate!==T.frameRate)return E.frameRate-T.frameRate;if(E.videoRange!==T.videoRange)return Kj.indexOf(E.videoRange)-Kj.indexOf(T.videoRange);if(E.videoCodec!==T.videoCodec){const C=uK(E.videoCodec),N=uK(T.videoCodec);if(C!==N)return N-C}if(E.uri===T.uri&&E.codecSet!==T.codecSet){const C=Vj(E.codecSet),N=Vj(T.codecSet);if(C!==N)return N-C}return E.averageBitrate!==T.averageBitrate?E.averageBitrate-T.averageBitrate:0});let A=f[0];if(this.steering&&(l=this.steering.filterParsedLevels(l),l.length!==f.length)){for(let E=0;E<f.length;E++)if(f[E].pathwayId===l[0].pathwayId){A=f[E];break}}this._levels=l;for(let E=0;E<l.length;E++)if(l[E]===A){var p;this._firstLevel=E;const T=A.bitrate,C=this.hls.bandwidthEstimate;if(this.log(`manifest loaded, ${l.length} level(s) found, first bitrate: ${T}`),((p=this.hls.userConfig)==null?void 0:p.abrEwmaDefaultEstimate)===void 0){const N=Math.min(T,this.hls.config.abrEwmaDefaultEstimateMax);N>C&&C===this.hls.abrEwmaDefaultEstimate&&(this.hls.bandwidthEstimate=N)}break}const g=s&&!i,y=this.hls.config,x=!!(y.audioStreamController&&y.audioTrackController),w={levels:l,audioTracks:c,subtitleTracks:u,sessionData:r.sessionData,sessionKeys:r.sessionKeys,firstLevel:this._firstLevel,stats:r.stats,audio:s,video:i,altAudio:x&&!g&&c.some(E=>!!E.url)};d.end=performance.now(),this.hls.trigger(Le.MANIFEST_PARSED,w)}get levels(){return this._levels.length===0?null:this._levels}get loadLevelObj(){return this.currentLevel}get level(){return this.currentLevelIndex}set level(e){const r=this._levels;if(r.length===0)return;if(e<0||e>=r.length){const d=new Error("invalid level idx"),f=e<0;if(this.hls.trigger(Le.ERROR,{type:Oi.OTHER_ERROR,details:vr.LEVEL_SWITCH_ERROR,level:e,fatal:f,error:d,reason:d.message}),f)return;e=Math.min(e,r.length-1)}const n=this.currentLevelIndex,i=this.currentLevel,s=i?i.attrs["PATHWAY-ID"]:void 0,o=r[e],c=o.attrs["PATHWAY-ID"];if(this.currentLevelIndex=e,this.currentLevel=o,n===e&&i&&s===c)return;this.log(`Switching to level ${e} (${o.height?o.height+"p ":""}${o.videoRange?o.videoRange+" ":""}${o.codecSet?o.codecSet+" ":""}@${o.bitrate})${c?" with Pathway "+c:""} from level ${n}${s?" with Pathway "+s:""}`);const u={level:e,attrs:o.attrs,details:o.details,bitrate:o.bitrate,averageBitrate:o.averageBitrate,maxBitrate:o.maxBitrate,realBitrate:o.realBitrate,width:o.width,height:o.height,codecSet:o.codecSet,audioCodec:o.audioCodec,videoCodec:o.videoCodec,audioGroups:o.audioGroups,subtitleGroups:o.subtitleGroups,loaded:o.loaded,loadError:o.loadError,fragmentError:o.fragmentError,name:o.name,id:o.id,uri:o.uri,url:o.url,urlId:0,audioGroupIds:o.audioGroupIds,textGroupIds:o.textGroupIds};this.hls.trigger(Le.LEVEL_SWITCHING,u);const l=o.details;if(!l||l.live){const d=this.switchParams(o.uri,i?.details,l);this.loadPlaylist(d)}}get manualLevel(){return this.manualLevelIndex}set manualLevel(e){this.manualLevelIndex=e,this._startLevel===void 0&&(this._startLevel=e),e!==-1&&(this.level=e)}get firstLevel(){return this._firstLevel}set firstLevel(e){this._firstLevel=e}get startLevel(){if(this._startLevel===void 0){const e=this.hls.config.startLevel;return e!==void 0?e:this.hls.firstAutoLevel}return this._startLevel}set startLevel(e){this._startLevel=e}get pathways(){return this.steering?this.steering.pathways():[]}get pathwayPriority(){return this.steering?this.steering.pathwayPriority:null}set pathwayPriority(e){if(this.steering){const r=this.steering.pathways(),n=e.filter(i=>r.indexOf(i)!==-1);if(e.length<1){this.warn(`pathwayPriority ${e} should contain at least one pathway from list: ${r}`);return}this.steering.pathwayPriority=n}}onError(e,r){r.fatal||!r.context||r.context.type===xa.LEVEL&&r.context.level===this.level&&this.checkRetry(r)}onFragBuffered(e,{frag:r}){if(r!==void 0&&r.type===fi.MAIN){const n=r.elementaryStreams;if(!Object.keys(n).some(s=>!!n[s]))return;const i=this._levels[r.level];i!=null&&i.loadError&&(this.log(`Resetting level error count of ${i.loadError} on frag buffered`),i.loadError=0)}}onLevelLoaded(e,r){var n;const{level:i,details:s}=r,o=r.levelInfo;if(!o){var c;this.warn(`Invalid level index ${i}`),(c=r.deliveryDirectives)!=null&&c.skip&&(s.deltaUpdateFailed=!0);return}if(o===this.currentLevel||r.withoutMultiVariant){o.fragmentError===0&&(o.loadError=0);let u=o.details;u===r.details&&u.advanced&&(u=void 0),this.playlistLoaded(i,r,u)}else(n=r.deliveryDirectives)!=null&&n.skip&&(s.deltaUpdateFailed=!0)}loadPlaylist(e){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentLevel)&&this.scheduleLoading(this.currentLevel,e)}loadingPlaylist(e,r){super.loadingPlaylist(e,r);const n=this.getUrlWithDirectives(e.uri,r),i=this.currentLevelIndex,s=e.attrs["PATHWAY-ID"],o=e.details,c=o?.age;this.log(`Loading level index ${i}${r?.msn!==void 0?" at sn "+r.msn+" part "+r.part:""}${s?" Pathway "+s:""}${c&&o.live?" age "+c.toFixed(1)+(o.type&&" "+o.type||""):""} ${n}`),this.hls.trigger(Le.LEVEL_LOADING,{url:n,level:i,levelInfo:e,pathwayId:e.attrs["PATHWAY-ID"],id:0,deliveryDirectives:r||null})}get nextLoadLevel(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(e){this.level=e,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=e)}removeLevel(e){var r;if(this._levels.length===1)return;const n=this._levels.filter((s,o)=>o!==e?!0:(this.steering&&this.steering.removeLevel(s),s===this.currentLevel&&(this.currentLevel=null,this.currentLevelIndex=-1,s.details&&s.details.fragments.forEach(c=>c.level=-1)),!1));Tie(n),this._levels=n,this.currentLevelIndex>-1&&(r=this.currentLevel)!=null&&r.details&&(this.currentLevelIndex=this.currentLevel.details.fragments[0].level),this.manualLevelIndex>-1&&(this.manualLevelIndex=this.currentLevelIndex);const i=n.length-1;this._firstLevel=Math.min(this._firstLevel,i),this._startLevel&&(this._startLevel=Math.min(this._startLevel,i)),this.hls.trigger(Le.LEVELS_UPDATED,{levels:n})}onLevelsUpdated(e,{levels:r}){this._levels=r}checkMaxAutoUpdated(){const{autoLevelCapping:e,maxAutoLevel:r,maxHdcpLevel:n}=this.hls;this._maxAutoLevel!==r&&(this._maxAutoLevel=r,this.hls.trigger(Le.MAX_AUTO_LEVEL_UPDATED,{autoLevelCapping:e,levels:this.levels,maxAutoLevel:r,minAutoLevel:this.hls.minAutoLevel,maxHdcpLevel:n}))}}function yG(t){const e={};t.forEach(r=>{const n=r.groupId||"";r.id=e[n]=e[n]||0,e[n]++})}function bse(){return self.SourceBuffer||self.WebKitSourceBuffer}function wse(){if(!D0())return!1;const e=bse();return!e||e.prototype&&typeof e.prototype.appendBuffer=="function"&&typeof e.prototype.remove=="function"}function yQe(){if(!wse())return!1;const t=D0();return typeof t?.isTypeSupported=="function"&&(["avc1.42E01E,mp4a.40.2","av01.0.01M.08","vp09.00.50.08"].some(e=>t.isTypeSupported(e2(e,"video")))||["mp4a.40.2","fLaC"].some(e=>t.isTypeSupported(e2(e,"audio"))))}function xQe(){var t;const e=bse();return typeof(e==null||(t=e.prototype)==null?void 0:t.changeType)=="function"}const bQe=100;class wQe extends bF{constructor(e,r,n){super(e,r,n,"stream-controller",fi.MAIN),this.audioCodecSwap=!1,this.level=-1,this._forceStartLoad=!1,this._hasEnoughToStart=!1,this.altAudio=0,this.audioOnly=!1,this.fragPlaying=null,this.fragLastKbps=0,this.couldBacktrack=!1,this.backtrackFragment=null,this.audioCodecSwitch=!1,this.videoBuffer=null,this.onMediaPlaying=()=>{this.tick()},this.onMediaSeeked=()=>{const i=this.media,s=i?i.currentTime:null;if(s===null||!qn(s)||(this.log(`Media seeked to ${s.toFixed(3)}`),!this.getBufferedFrag(s)))return;const o=this.getFwdBufferInfoAtPos(i,s,fi.MAIN,0);if(o===null||o.len===0){this.warn(`Main forward buffer length at ${s} on "seeked" event ${o?o.len:"empty"})`);return}this.tick()},this.registerListeners()}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(Le.MANIFEST_PARSED,this.onManifestParsed,this),e.on(Le.LEVEL_LOADING,this.onLevelLoading,this),e.on(Le.LEVEL_LOADED,this.onLevelLoaded,this),e.on(Le.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(Le.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(Le.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(Le.BUFFER_CREATED,this.onBufferCreated,this),e.on(Le.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(Le.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(Le.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){super.unregisterListeners();const{hls:e}=this;e.off(Le.MANIFEST_PARSED,this.onManifestParsed,this),e.off(Le.LEVEL_LOADED,this.onLevelLoaded,this),e.off(Le.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(Le.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(Le.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(Le.BUFFER_CREATED,this.onBufferCreated,this),e.off(Le.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(Le.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(Le.FRAG_BUFFERED,this.onFragBuffered,this)}onHandlerDestroying(){this.onMediaPlaying=this.onMediaSeeked=null,this.unregisterListeners(),super.onHandlerDestroying()}startLoad(e,r){if(this.levels){const{lastCurrentTime:n,hls:i}=this;if(this.stopLoad(),this.setInterval(bQe),this.level=-1,!this.startFragRequested){let s=i.startLevel;s===-1&&(i.config.testBandwidth&&this.levels.length>1?(s=0,this.bitrateTest=!0):s=i.firstAutoLevel),i.nextLoadLevel=s,this.level=i.loadLevel,this._hasEnoughToStart=!!r}n>0&&e===-1&&!r&&(this.log(`Override startPosition with lastCurrentTime @${n.toFixed(3)}`),e=n),this.state=Kr.IDLE,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=r?-1:e,this.tick()}else this._forceStartLoad=!0,this.state=Kr.STOPPED}stopLoad(){this._forceStartLoad=!1,super.stopLoad()}doTick(){switch(this.state){case Kr.WAITING_LEVEL:{const{levels:e,level:r}=this,n=e?.[r],i=n?.details;if(i&&(!i.live||this.levelLastLoaded===n&&!this.waitForLive(n))){if(this.waitForCdnTuneIn(i))break;this.state=Kr.IDLE;break}else if(this.hls.nextLoadLevel!==this.level){this.state=Kr.IDLE;break}break}case Kr.FRAG_LOADING_WAITING_RETRY:this.checkRetryDate();break}this.state===Kr.IDLE&&this.doTickIdle(),this.onTickEnd()}onTickEnd(){var e;super.onTickEnd(),(e=this.media)!=null&&e.readyState&&this.media.seeking===!1&&(this.lastCurrentTime=this.media.currentTime),this.checkFragmentChanged()}doTickIdle(){const{hls:e,levelLastLoaded:r,levels:n,media:i}=this;if(r===null||!i&&!this.primaryPrefetch&&(this.startFragRequested||!e.config.startFragPrefetch)||this.altAudio&&this.audioOnly)return;const s=this.buffering?e.nextLoadLevel:e.loadLevel;if(!(n!=null&&n[s]))return;const o=n[s],c=this.getMainFwdBufferInfo();if(c===null)return;const u=this.getLevelDetails();if(u&&this._streamEnded(c,u)){const y={};this.altAudio===2&&(y.type="video"),this.hls.trigger(Le.BUFFER_EOS,y),this.state=Kr.ENDED;return}if(!this.buffering)return;e.loadLevel!==s&&e.manualLevel===-1&&this.log(`Adapting to level ${s} from level ${this.level}`),this.level=e.nextLoadLevel=s;const l=o.details;if(!l||this.state===Kr.WAITING_LEVEL||this.waitForLive(o)){this.level=s,this.state=Kr.WAITING_LEVEL,this.startFragRequested=!1;return}const d=c.len,f=this.getMaxBufferLength(o.maxBitrate);if(d>=f)return;this.backtrackFragment&&this.backtrackFragment.start>c.end&&(this.backtrackFragment=null);const A=this.backtrackFragment?this.backtrackFragment.start:c.end;let p=this.getNextFragment(A,l);if(this.couldBacktrack&&!this.fragPrevious&&p&&eu(p)&&this.fragmentTracker.getState(p)!==Fu.OK){var g;const x=((g=this.backtrackFragment)!=null?g:p).sn-l.startSN,w=l.fragments[x-1];w&&p.cc===w.cc&&(p=w,this.fragmentTracker.removeFragment(w))}else this.backtrackFragment&&c.len&&(this.backtrackFragment=null);if(p&&this.isLoopLoading(p,A)){if(!p.gap){const x=this.audioOnly&&!this.altAudio?cl.AUDIO:cl.VIDEO,w=(x===cl.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;w&&this.afterBufferFlushed(w,x,fi.MAIN)}p=this.getNextFragmentLoopLoading(p,l,c,fi.MAIN,f)}p&&(p.initSegment&&!p.initSegment.data&&!this.bitrateTest&&(p=p.initSegment),this.loadFragment(p,o,A))}loadFragment(e,r,n){const i=this.fragmentTracker.getState(e);i===Fu.NOT_LOADED||i===Fu.PARTIAL?eu(e)?this.bitrateTest?(this.log(`Fragment ${e.sn} of level ${e.level} is being downloaded to test bitrate and will not be buffered`),this._loadBitrateTestFrag(e,r)):super.loadFragment(e,r,n):this._loadInitSegment(e,r):this.clearTrackerIfNeeded(e)}getBufferedFrag(e){return this.fragmentTracker.getBufferedFrag(e,fi.MAIN)}followingBufferedFrag(e){return e?this.getBufferedFrag(e.end+.5):null}immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}nextLevelSwitch(){const{levels:e,media:r}=this;if(r!=null&&r.readyState){let n;const i=this.getAppendedFrag(r.currentTime);i&&i.start>1&&this.flushMainBuffer(0,i.start-1);const s=this.getLevelDetails();if(s!=null&&s.live){const c=this.getMainFwdBufferInfo();if(!c||c.len<s.targetduration*2)return}if(!r.paused&&e){const c=this.hls.nextLoadLevel,u=e[c],l=this.fragLastKbps;l&&this.fragCurrent?n=this.fragCurrent.duration*u.maxBitrate/(1e3*l)+1:n=0}else n=0;const o=this.getBufferedFrag(r.currentTime+n);if(o){const c=this.followingBufferedFrag(o);if(c){this.abortCurrentFrag();const u=c.maxStartPTS?c.maxStartPTS:c.start,l=c.duration,d=Math.max(o.end,u+Math.min(Math.max(l-this.config.maxFragLookUpTolerance,l*(this.couldBacktrack?.5:.125)),l*(this.couldBacktrack?.75:.25)));this.flushMainBuffer(d,Number.POSITIVE_INFINITY)}}}}abortCurrentFrag(){const e=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,e&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.state){case Kr.KEY_LOADING:case Kr.FRAG_LOADING:case Kr.FRAG_LOADING_WAITING_RETRY:case Kr.PARSING:case Kr.PARSED:this.state=Kr.IDLE;break}this.nextLoadPosition=this.getLoadPosition()}flushMainBuffer(e,r){super.flushMainBuffer(e,r,this.altAudio===2?"video":null)}onMediaAttached(e,r){super.onMediaAttached(e,r);const n=r.media;vh(n,"playing",this.onMediaPlaying),vh(n,"seeked",this.onMediaSeeked)}onMediaDetaching(e,r){const{media:n}=this;n&&(Uh(n,"playing",this.onMediaPlaying),Uh(n,"seeked",this.onMediaSeeked)),this.videoBuffer=null,this.fragPlaying=null,super.onMediaDetaching(e,r),!r.transferMedia&&(this._hasEnoughToStart=!1)}onManifestLoading(){super.onManifestLoading(),this.log("Trigger BUFFER_RESET"),this.hls.trigger(Le.BUFFER_RESET,void 0),this.couldBacktrack=!1,this.fragLastKbps=0,this.fragPlaying=this.backtrackFragment=null,this.altAudio=0,this.audioOnly=!1}onManifestParsed(e,r){let n=!1,i=!1;for(let s=0;s<r.levels.length;s++){const o=r.levels[s].audioCodec;o&&(n=n||o.indexOf("mp4a.40.2")!==-1,i=i||o.indexOf("mp4a.40.5")!==-1)}this.audioCodecSwitch=n&&i&&!xQe(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=r.levels,this.startFragRequested=!1}onLevelLoading(e,r){const{levels:n}=this;if(!n||this.state!==Kr.IDLE)return;const i=r.levelInfo;(!i.details||i.details.live&&(this.levelLastLoaded!==i||i.details.expired)||this.waitForCdnTuneIn(i.details))&&(this.state=Kr.WAITING_LEVEL)}onLevelLoaded(e,r){var n;const{levels:i,startFragRequested:s}=this,o=r.level,c=r.details,u=c.totalduration;if(!i){this.warn(`Levels were reset while loading level ${o}`);return}this.log(`Level ${o} loaded [${c.startSN},${c.endSN}]${c.lastPartSn?`[part-${c.lastPartSn}-${c.lastPartIndex}]`:""}, cc [${c.startCC}, ${c.endCC}] duration:${u}`);const l=r.levelInfo,d=this.fragCurrent;d&&(this.state===Kr.FRAG_LOADING||this.state===Kr.FRAG_LOADING_WAITING_RETRY)&&d.level!==r.level&&d.loader&&this.abortCurrentFrag();let f=0;if(c.live||(n=l.details)!=null&&n.live){var A;if(this.checkLiveUpdate(c),c.deltaUpdateFailed)return;f=this.alignPlaylists(c,l.details,(A=this.levelLastLoaded)==null?void 0:A.details)}if(l.details=c,this.levelLastLoaded=l,s||this.setStartPosition(c,f),this.hls.trigger(Le.LEVEL_UPDATED,{details:c,level:o}),this.state===Kr.WAITING_LEVEL){if(this.waitForCdnTuneIn(c))return;this.state=Kr.IDLE}s&&c.live&&this.synchronizeToLiveEdge(c),this.tick()}synchronizeToLiveEdge(e){const{config:r,media:n}=this;if(!n)return;const i=this.hls.liveSyncPosition,s=this.getLoadPosition(),o=e.fragmentStart,c=e.edge,u=s>=o-r.maxFragLookUpTolerance&&s<=c;if(i!==null&&n.duration>i&&(s<i||!u)){const d=r.liveMaxLatencyDuration!==void 0?r.liveMaxLatencyDuration:r.liveMaxLatencyDurationCount*e.targetduration;if((!u&&n.readyState<4||s<c-d)&&(this._hasEnoughToStart||(this.nextLoadPosition=i),n.readyState))if(this.warn(`Playback: ${s.toFixed(3)} is located too far from the end of live sliding playlist: ${c}, reset currentTime to : ${i.toFixed(3)}`),this.config.liveSyncMode==="buffered"){var l;const f=Hs.bufferInfo(n,i,0);if(!((l=f.buffered)!=null&&l.length)){n.currentTime=i;return}if(f.start<=s){n.currentTime=i;return}const{nextStart:p}=Hs.bufferedInfo(f.buffered,s,0);p&&(n.currentTime=p)}else n.currentTime=i}}_handleFragmentLoadProgress(e){var r;const n=e.frag,{part:i,payload:s}=e,{levels:o}=this;if(!o){this.warn(`Levels were reset while fragment load was in progress. Fragment ${n.sn} of level ${n.level} will not be buffered`);return}const c=o[n.level];if(!c){this.warn(`Level ${n.level} not found on progress`);return}const u=c.details;if(!u){this.warn(`Dropping fragment ${n.sn} of level ${n.level} after level details were reset`),this.fragmentTracker.removeFragment(n);return}const l=c.videoCodec,d=u.PTSKnown||!u.live,f=(r=n.initSegment)==null?void 0:r.data,A=this._getAudioCodec(c),p=this.transmuxer=this.transmuxer||new Wie(this.hls,fi.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),g=i?i.index:-1,y=g!==-1,x=new vF(n.level,n.sn,n.stats.chunkCount,s.byteLength,g,y),w=this.initPTS[n.cc];p.push(s,f,A,l,n,i,u.totalduration,d,x,w)}onAudioTrackSwitching(e,r){const n=this.hls,i=this.altAudio!==0;if(Gj(r.url,n))this.altAudio=1;else{if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;const o=this.fragCurrent;o&&(this.log("Switching to main audio track, cancel main fragment load"),o.abortRequests(),this.fragmentTracker.removeFragment(o)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();if(i){this.altAudio=0,this.fragmentTracker.removeAllFragments(),n.once(Le.BUFFER_FLUSHED,()=>{this.hls&&this.hls.trigger(Le.AUDIO_TRACK_SWITCHED,r)}),n.trigger(Le.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null});return}n.trigger(Le.AUDIO_TRACK_SWITCHED,r)}}onAudioTrackSwitched(e,r){const n=Gj(r.url,this.hls);if(n){const i=this.videoBuffer;i&&this.mediaBuffer!==i&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=i)}this.altAudio=n?2:0,this.tick()}onBufferCreated(e,r){const n=r.tracks;let i,s,o=!1;for(const c in n){const u=n[c];if(u.id==="main"){if(s=c,i=u,c==="video"){const l=n[c];l&&(this.videoBuffer=l.buffer)}}else o=!0}o&&i?(this.log(`Alternate track found, use ${s}.buffered to schedule main fragment loading`),this.mediaBuffer=i.buffer):this.mediaBuffer=this.media}onFragBuffered(e,r){const{frag:n,part:i}=r,s=n.type===fi.MAIN;if(s){if(this.fragContextChanged(n)){this.warn(`Fragment ${n.sn}${i?" p: "+i.index:""} of level ${n.level} finished buffering, but was aborted. state: ${this.state}`),this.state===Kr.PARSED&&(this.state=Kr.IDLE);return}const c=i?i.stats:n.stats;this.fragLastKbps=Math.round(8*c.total/(c.buffering.end-c.loading.first)),eu(n)&&(this.fragPrevious=n),this.fragBufferedComplete(n,i)}const o=this.media;o&&(!this._hasEnoughToStart&&Hs.getBuffered(o).length&&(this._hasEnoughToStart=!0,this.seekToStartPos()),s&&this.tick())}get hasEnoughToStart(){return this._hasEnoughToStart}onError(e,r){var n;if(r.fatal){this.state=Kr.ERROR;return}switch(r.details){case vr.FRAG_GAP:case vr.FRAG_PARSING_ERROR:case vr.FRAG_DECRYPT_ERROR:case vr.FRAG_LOAD_ERROR:case vr.FRAG_LOAD_TIMEOUT:case vr.KEY_LOAD_ERROR:case vr.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(fi.MAIN,r);break;case vr.LEVEL_LOAD_ERROR:case vr.LEVEL_LOAD_TIMEOUT:case vr.LEVEL_PARSING_ERROR:!r.levelRetry&&this.state===Kr.WAITING_LEVEL&&((n=r.context)==null?void 0:n.type)===xa.LEVEL&&(this.state=Kr.IDLE);break;case vr.BUFFER_ADD_CODEC_ERROR:case vr.BUFFER_APPEND_ERROR:if(r.parent!=="main")return;this.reduceLengthAndFlushBuffer(r)&&this.resetLoadingState();break;case vr.BUFFER_FULL_ERROR:if(r.parent!=="main")return;this.reduceLengthAndFlushBuffer(r)&&(!this.config.interstitialsController&&this.config.assetPlayerId?this._hasEnoughToStart=!0:this.flushMainBuffer(0,Number.POSITIVE_INFINITY));break;case vr.INTERNAL_EXCEPTION:this.recoverWorkerError(r);break}}onFragLoadEmergencyAborted(){this.state=Kr.IDLE,this._hasEnoughToStart||(this.startFragRequested=!1,this.nextLoadPosition=this.lastCurrentTime),this.tickImmediate()}onBufferFlushed(e,{type:r}){if(r!==cl.AUDIO||!this.altAudio){const n=(r===cl.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;n&&(this.afterBufferFlushed(n,r,fi.MAIN),this.tick())}}onLevelsUpdated(e,r){this.level>-1&&this.fragCurrent&&(this.level=this.fragCurrent.level,this.level===-1&&this.resetWhenMissingContext(this.fragCurrent)),this.levels=r.levels}swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap}seekToStartPos(){const{media:e}=this;if(!e)return;const r=e.currentTime;let n=this.startPosition;if(n>=0&&r<n){if(e.seeking){this.log(`could not seek to ${n}, already seeking at ${r}`);return}const i=this.timelineOffset;i&&n&&(n+=i);const s=this.getLevelDetails(),o=Hs.getBuffered(e),c=o.length?o.start(0):0,u=c-n,l=Math.max(this.config.maxBufferHole,this.config.maxFragLookUpTolerance);(this.config.startOnSegmentBoundary||u>0&&(u<l||this.loadingParts&&u<2*(s?.partTarget||0)))&&(this.log(`adjusting start position by ${u} to match buffer start`),n+=u,this.startPosition=n),r<n&&(this.log(`seek to target start position ${n} from current time ${r} buffer start ${c}`),e.currentTime=n)}}_getAudioCodec(e){let r=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&r&&(this.log("Swapping audio codec"),r.indexOf("mp4a.40.5")!==-1?r="mp4a.40.2":r="mp4a.40.5"),r}_loadBitrateTestFrag(e,r){e.bitrateTest=!0,this._doFragLoad(e,r).then(n=>{const{hls:i}=this,s=n?.frag;if(!s||this.fragContextChanged(s))return;r.fragmentError=0,this.state=Kr.IDLE,this.startFragRequested=!1,this.bitrateTest=!1;const o=s.stats;o.parsing.start=o.parsing.end=o.buffering.start=o.buffering.end=self.performance.now(),i.trigger(Le.FRAG_LOADED,n),s.bitrateTest=!1}).catch(n=>{this.state===Kr.STOPPED||this.state===Kr.ERROR||(this.warn(n),this.resetFragmentLoading(e))})}_handleTransmuxComplete(e){const r=this.playlistType,{hls:n}=this,{remuxResult:i,chunkMeta:s}=e,o=this.getCurrentContext(s);if(!o){this.resetWhenMissingContext(s);return}const{frag:c,part:u,level:l}=o,{video:d,text:f,id3:A,initSegment:p}=i,{details:g}=l,y=this.altAudio?void 0:i.audio;if(this.fragContextChanged(c)){this.fragmentTracker.removeFragment(c);return}if(this.state=Kr.PARSING,p){const x=p.tracks;if(x){const C=c.initSegment||c;if(this.unhandledEncryptionError(p,c))return;this._bufferInitSegment(l,x,C,s),n.trigger(Le.FRAG_PARSING_INIT_SEGMENT,{frag:C,id:r,tracks:x})}const w=p.initPTS,E=p.timescale,T=this.initPTS[c.cc];if(qn(w)&&(!T||T.baseTime!==w||T.timescale!==E)){const C=p.trackId;this.initPTS[c.cc]={baseTime:w,timescale:E,trackId:C},n.trigger(Le.INIT_PTS_FOUND,{frag:c,id:r,initPTS:w,timescale:E,trackId:C})}}if(d&&g){y&&d.type==="audiovideo"&&this.logMuxedErr(c);const x=g.fragments[c.sn-1-g.startSN],w=c.sn===g.startSN,E=!x||c.cc>x.cc;if(i.independent!==!1){const{startPTS:T,endPTS:C,startDTS:N,endDTS:I}=d;if(u)u.elementaryStreams[d.type]={startPTS:T,endPTS:C,startDTS:N,endDTS:I};else if(d.firstKeyFrame&&d.independent&&s.id===1&&!E&&(this.couldBacktrack=!0),d.dropped&&d.independent){const U=this.getMainFwdBufferInfo(),K=(U?U.end:this.getLoadPosition())+this.config.maxBufferHole,Y=d.firstKeyFramePTS?d.firstKeyFramePTS:T;if(!w&&K<Y-this.config.maxBufferHole&&!E){this.backtrack(c);return}else E&&(c.gap=!0);c.setElementaryStreamInfo(d.type,c.start,C,c.start,I,!0)}else w&&T-(g.appliedTimelineOffset||0)>fT&&(c.gap=!0);c.setElementaryStreamInfo(d.type,T,C,N,I),this.backtrackFragment&&(this.backtrackFragment=c),this.bufferFragmentData(d,c,u,s,w||E)}else if(w||E)c.gap=!0;else{this.backtrack(c);return}}if(y){const{startPTS:x,endPTS:w,startDTS:E,endDTS:T}=y;u&&(u.elementaryStreams[cl.AUDIO]={startPTS:x,endPTS:w,startDTS:E,endDTS:T}),c.setElementaryStreamInfo(cl.AUDIO,x,w,E,T),this.bufferFragmentData(y,c,u,s)}if(g&&A!=null&&A.samples.length){const x={id:r,frag:c,details:g,samples:A.samples};n.trigger(Le.FRAG_PARSING_METADATA,x)}if(g&&f){const x={id:r,frag:c,details:g,samples:f.samples};n.trigger(Le.FRAG_PARSING_USERDATA,x)}}logMuxedErr(e){this.warn(`${eu(e)?"Media":"Init"} segment with muxed audiovideo where only video expected: ${e.url}`)}_bufferInitSegment(e,r,n,i){if(this.state!==Kr.PARSING)return;this.audioOnly=!!r.audio&&!r.video,this.altAudio&&!this.audioOnly&&(delete r.audio,r.audiovideo&&this.logMuxedErr(n));const{audio:s,video:o,audiovideo:c}=r;if(s){const l=e.audioCodec;let d=aT(s.codec,l);d==="mp4a"&&(d="mp4a.40.5");const f=navigator.userAgent.toLowerCase();if(this.audioCodecSwitch){d&&(d.indexOf("mp4a.40.5")!==-1?d="mp4a.40.2":d="mp4a.40.5");const A=s.metadata;A&&"channelCount"in A&&(A.channelCount||1)!==1&&f.indexOf("firefox")===-1&&(d="mp4a.40.5")}d&&d.indexOf("mp4a.40.5")!==-1&&f.indexOf("android")!==-1&&s.container!=="audio/mpeg"&&(d="mp4a.40.2",this.log(`Android: force audio codec to ${d}`)),l&&l!==d&&this.log(`Swapping manifest audio codec "${l}" for "${d}"`),s.levelCodec=d,s.id=fi.MAIN,this.log(`Init audio buffer, container:${s.container}, codecs[selected/level/parsed]=[${d||""}/${l||""}/${s.codec}]`),delete r.audiovideo}if(o){o.levelCodec=e.videoCodec,o.id=fi.MAIN;const l=o.codec;if(l?.length===4)switch(l){case"hvc1":case"hev1":o.codec="hvc1.1.6.L120.90";break;case"av01":o.codec="av01.0.04M.08";break;case"avc1":o.codec="avc1.42e01e";break}this.log(`Init video buffer, container:${o.container}, codecs[level/parsed]=[${e.videoCodec||""}/${l}]${o.codec!==l?" parsed-corrected="+o.codec:""}${o.supplemental?" supplemental="+o.supplemental:""}`),delete r.audiovideo}c&&(this.log(`Init audiovideo buffer, container:${c.container}, codecs[level/parsed]=[${e.codecs}/${c.codec}]`),delete r.video,delete r.audio);const u=Object.keys(r);if(u.length){if(this.hls.trigger(Le.BUFFER_CODECS,r),!this.hls)return;u.forEach(l=>{const f=r[l].initSegment;f!=null&&f.byteLength&&this.hls.trigger(Le.BUFFER_APPENDING,{type:l,data:f,frag:n,part:null,chunkMeta:i,parent:n.type})})}this.tickImmediate()}getMainFwdBufferInfo(){const e=this.mediaBuffer&&this.altAudio===2?this.mediaBuffer:this.media;return this.getFwdBufferInfo(e,fi.MAIN)}get maxBufferLength(){const{levels:e,level:r}=this,n=e?.[r];return n?this.getMaxBufferLength(n.maxBitrate):this.config.maxBufferLength}backtrack(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state=Kr.IDLE}checkFragmentChanged(){const e=this.media;let r=null;if(e&&e.readyState>1&&e.seeking===!1){const n=e.currentTime;if(Hs.isBuffered(e,n)?r=this.getAppendedFrag(n):Hs.isBuffered(e,n+.1)&&(r=this.getAppendedFrag(n+.1)),r){this.backtrackFragment=null;const i=this.fragPlaying,s=r.level;(!i||r.sn!==i.sn||i.level!==s)&&(this.fragPlaying=r,this.hls.trigger(Le.FRAG_CHANGED,{frag:r}),(!i||i.level!==s)&&this.hls.trigger(Le.LEVEL_SWITCHED,{level:s}))}}}get nextLevel(){const e=this.nextBufferedFrag;return e?e.level:-1}get currentFrag(){var e;if(this.fragPlaying)return this.fragPlaying;const r=((e=this.media)==null?void 0:e.currentTime)||this.lastCurrentTime;return qn(r)?this.getAppendedFrag(r):null}get currentProgramDateTime(){var e;const r=((e=this.media)==null?void 0:e.currentTime)||this.lastCurrentTime;if(qn(r)){const n=this.getLevelDetails(),i=this.currentFrag||(n?yy(null,n.fragments,r):null);if(i){const s=i.programDateTime;if(s!==null){const o=s+(r-i.start)*1e3;return new Date(o)}}}return null}get currentLevel(){const e=this.currentFrag;return e?e.level:-1}get nextBufferedFrag(){const e=this.currentFrag;return e?this.followingBufferedFrag(e):null}get forceStartLoad(){return this._forceStartLoad}}class EQe extends iA{constructor(e,r){super("key-loader",r),this.config=void 0,this.keyIdToKeyInfo={},this.emeController=null,this.config=e}abort(e){for(const n in this.keyIdToKeyInfo){const i=this.keyIdToKeyInfo[n].loader;if(i){var r;if(e&&e!==((r=i.context)==null?void 0:r.frag.type))return;i.abort()}}}detach(){for(const e in this.keyIdToKeyInfo){const r=this.keyIdToKeyInfo[e];(r.mediaKeySessionContext||r.decryptdata.isCommonEncryption)&&delete this.keyIdToKeyInfo[e]}}destroy(){this.detach();for(const e in this.keyIdToKeyInfo){const r=this.keyIdToKeyInfo[e].loader;r&&r.destroy()}this.keyIdToKeyInfo={}}createKeyLoadError(e,r=vr.KEY_LOAD_ERROR,n,i,s){return new Np({type:Oi.NETWORK_ERROR,details:r,fatal:!1,frag:e,response:s,error:n,networkDetails:i})}loadClear(e,r,n){if(this.emeController&&this.config.emeEnabled&&!this.emeController.getSelectedKeySystemFormats().length){if(r.length)for(let i=0,s=r.length;i<s;i++){const o=r[i];if(e.cc<=o.cc&&(!eu(e)||!eu(o)||e.sn<o.sn)||!n&&i==s-1)return this.emeController.selectKeySystemFormat(o).then(c=>{if(!this.emeController)return;o.setKeyFormat(c);const u=lT(c);if(u)return this.emeController.getKeySystemAccess([u])})}if(this.config.requireKeySystemAccessOnStart){const i=yw(this.config);if(i.length)return this.emeController.getKeySystemAccess(i)}}return null}load(e){return!e.decryptdata&&e.encrypted&&this.emeController&&this.config.emeEnabled?this.emeController.selectKeySystemFormat(e).then(r=>this.loadInternal(e,r)):this.loadInternal(e)}loadInternal(e,r){var n,i;r&&e.setKeyFormat(r);const s=e.decryptdata;if(!s){const l=new Error(r?`Expected frag.decryptdata to be defined after setting format ${r}`:`Missing decryption data on fragment in onKeyLoading (emeEnabled with controller: ${this.emeController&&this.config.emeEnabled})`);return Promise.reject(this.createKeyLoadError(e,vr.KEY_LOAD_ERROR,l))}const o=s.uri;if(!o)return Promise.reject(this.createKeyLoadError(e,vr.KEY_LOAD_ERROR,new Error(`Invalid key URI: "${o}"`)));const c=M4(s);let u=this.keyIdToKeyInfo[c];if((n=u)!=null&&n.decryptdata.key)return s.key=u.decryptdata.key,Promise.resolve({frag:e,keyInfo:u});if(this.emeController&&(i=u)!=null&&i.keyLoadPromise)switch(this.emeController.getKeyStatus(u.decryptdata)){case"usable":case"usable-in-future":return u.keyLoadPromise.then(d=>{const{keyInfo:f}=d;return s.key=f.decryptdata.key,{frag:e,keyInfo:f}})}switch(this.log(`${this.keyIdToKeyInfo[c]?"Rel":"L"}oading${s.keyId?" keyId: "+Ud(s.keyId):""} URI: ${s.uri} from ${e.type} ${e.level}`),u=this.keyIdToKeyInfo[c]={decryptdata:s,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},s.method){case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return s.keyFormat==="identity"?this.loadKeyHTTP(u,e):this.loadKeyEME(u,e);case"AES-128":case"AES-256":case"AES-256-CTR":return this.loadKeyHTTP(u,e);default:return Promise.reject(this.createKeyLoadError(e,vr.KEY_LOAD_ERROR,new Error(`Key supplied with unsupported METHOD: "${s.method}"`)))}}loadKeyEME(e,r){const n={frag:r,keyInfo:e};if(this.emeController&&this.config.emeEnabled){var i;if(!e.decryptdata.keyId&&(i=r.initSegment)!=null&&i.data){const o=H8e(r.initSegment.data);if(o.length){let c=o[0];c.some(u=>u!==0)?(this.log(`Using keyId found in init segment ${Ud(c)}`),j0.setKeyIdForUri(e.decryptdata.uri,c)):(c=j0.addKeyIdForUri(e.decryptdata.uri),this.log(`Generating keyId to patch media ${Ud(c)}`)),e.decryptdata.keyId=c}}if(!e.decryptdata.keyId&&!eu(r))return Promise.resolve(n);const s=this.emeController.loadKey(n);return(e.keyLoadPromise=s.then(o=>(e.mediaKeySessionContext=o,n))).catch(o=>{throw e.keyLoadPromise=null,"data"in o&&(o.data.frag=r),o})}return Promise.resolve(n)}loadKeyHTTP(e,r){const n=this.config,i=n.loader,s=new i(n);return r.keyLoader=e.loader=s,e.keyLoadPromise=new Promise((o,c)=>{const u={keyInfo:e,frag:r,responseType:"arraybuffer",url:e.decryptdata.uri},l=n.keyLoadPolicy.default,d={loadPolicy:l,timeout:l.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},f={onSuccess:(A,p,g,y)=>{const{frag:x,keyInfo:w}=g,E=M4(w.decryptdata);if(!x.decryptdata||w!==this.keyIdToKeyInfo[E])return c(this.createKeyLoadError(x,vr.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),y));w.decryptdata.key=x.decryptdata.key=new Uint8Array(A.data),x.keyLoader=null,w.loader=null,o({frag:x,keyInfo:w})},onError:(A,p,g,y)=>{this.resetLoader(p),c(this.createKeyLoadError(r,vr.KEY_LOAD_ERROR,new Error(`HTTP Error ${A.code} loading key ${A.text}`),g,Uo({url:u.url,data:void 0},A)))},onTimeout:(A,p,g)=>{this.resetLoader(p),c(this.createKeyLoadError(r,vr.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),g))},onAbort:(A,p,g)=>{this.resetLoader(p),c(this.createKeyLoadError(r,vr.INTERNAL_ABORTED,new Error("key loading aborted"),g))}};s.load(u,d,f)})}resetLoader(e){const{frag:r,keyInfo:n,url:i}=e,s=n.loader;r.keyLoader===s&&(r.keyLoader=null,n.loader=null);const o=M4(n.decryptdata)||i;delete this.keyIdToKeyInfo[o],s&&s.destroy()}}function M4(t){if(t.keyFormat!==$d.FAIRPLAY){const e=t.keyId;if(e)return Ud(e)}return t.uri}function xG(t){const{type:e}=t;switch(e){case xa.AUDIO_TRACK:return fi.AUDIO;case xa.SUBTITLE_TRACK:return fi.SUBTITLE;default:return fi.MAIN}}function F4(t,e){let r=t.url;return(r===void 0||r.indexOf("data:")===0)&&(r=e.url),r}class _Qe{constructor(e){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.onManifestLoaded=this.checkAutostartLoad,this.hls=e,this.registerListeners()}startLoad(e){}stopLoad(){this.destroyInternalLoaders()}registerListeners(){const{hls:e}=this;e.on(Le.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Le.LEVEL_LOADING,this.onLevelLoading,this),e.on(Le.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(Le.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.on(Le.LEVELS_UPDATED,this.onLevelsUpdated,this)}unregisterListeners(){const{hls:e}=this;e.off(Le.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Le.LEVEL_LOADING,this.onLevelLoading,this),e.off(Le.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(Le.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.off(Le.LEVELS_UPDATED,this.onLevelsUpdated,this)}createInternalLoader(e){const r=this.hls.config,n=r.pLoader,i=r.loader,s=n||i,o=new s(r);return this.loaders[e.type]=o,o}getInternalLoader(e){return this.loaders[e.type]}resetInternalLoader(e){this.loaders[e]&&delete this.loaders[e]}destroyInternalLoaders(){for(const e in this.loaders){const r=this.loaders[e];r&&r.destroy(),this.resetInternalLoader(e)}}destroy(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()}onManifestLoading(e,r){const{url:n}=r;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:xa.MANIFEST,url:n,deliveryDirectives:null,levelOrTrack:null})}onLevelLoading(e,r){const{id:n,level:i,pathwayId:s,url:o,deliveryDirectives:c,levelInfo:u}=r;this.load({id:n,level:i,pathwayId:s,responseType:"text",type:xa.LEVEL,url:o,deliveryDirectives:c,levelOrTrack:u})}onAudioTrackLoading(e,r){const{id:n,groupId:i,url:s,deliveryDirectives:o,track:c}=r;this.load({id:n,groupId:i,level:null,responseType:"text",type:xa.AUDIO_TRACK,url:s,deliveryDirectives:o,levelOrTrack:c})}onSubtitleTrackLoading(e,r){const{id:n,groupId:i,url:s,deliveryDirectives:o,track:c}=r;this.load({id:n,groupId:i,level:null,responseType:"text",type:xa.SUBTITLE_TRACK,url:s,deliveryDirectives:o,levelOrTrack:c})}onLevelsUpdated(e,r){const n=this.loaders[xa.LEVEL];if(n){const i=n.context;i&&!r.levels.some(s=>s===i.levelOrTrack)&&(n.abort(),delete this.loaders[xa.LEVEL])}}load(e){var r;const n=this.hls.config;let i=this.getInternalLoader(e);if(i){const l=this.hls.logger,d=i.context;if(d&&d.levelOrTrack===e.levelOrTrack&&(d.url===e.url||d.deliveryDirectives&&!e.deliveryDirectives)){d.url===e.url?l.log(`[playlist-loader]: ignore ${e.url} ongoing request`):l.log(`[playlist-loader]: ignore ${e.url} in favor of ${d.url}`);return}l.log(`[playlist-loader]: aborting previous loader for type: ${e.type}`),i.abort()}let s;if(e.type===xa.MANIFEST?s=n.manifestLoadPolicy.default:s=nl({},n.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),i=this.createInternalLoader(e),qn((r=e.deliveryDirectives)==null?void 0:r.part)){let l;if(e.type===xa.LEVEL&&e.level!==null?l=this.hls.levels[e.level].details:e.type===xa.AUDIO_TRACK&&e.id!==null?l=this.hls.audioTracks[e.id].details:e.type===xa.SUBTITLE_TRACK&&e.id!==null&&(l=this.hls.subtitleTracks[e.id].details),l){const d=l.partTarget,f=l.targetduration;if(d&&f){const A=Math.max(d*3,f*.8)*1e3;s=nl({},s,{maxTimeToFirstByteMs:Math.min(A,s.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(A,s.maxTimeToFirstByteMs)})}}}const o=s.errorRetry||s.timeoutRetry||{},c={loadPolicy:s,timeout:s.maxLoadTimeMs,maxRetry:o.maxNumRetry||0,retryDelay:o.retryDelayMs||0,maxRetryDelay:o.maxRetryDelayMs||0},u={onSuccess:(l,d,f,A)=>{const p=this.getInternalLoader(f);this.resetInternalLoader(f.type);const g=l.data;d.parsing.start=performance.now(),Rm.isMediaPlaylist(g)||f.type!==xa.MANIFEST?this.handleTrackOrLevelPlaylist(l,d,f,A||null,p):this.handleMasterPlaylist(l,d,f,A)},onError:(l,d,f,A)=>{this.handleNetworkError(d,f,!1,l,A)},onTimeout:(l,d,f)=>{this.handleNetworkError(d,f,!0,void 0,l)}};i.load(e,c,u)}checkAutostartLoad(){if(!this.hls)return;const{config:{autoStartLoad:e,startPosition:r},forceStartLoad:n}=this.hls;(e||n)&&(this.hls.logger.log(`${e?"auto":"force"} startLoad with configured startPosition ${r}`),this.hls.startLoad(r))}handleMasterPlaylist(e,r,n,i){const s=this.hls,o=e.data,c=F4(e,n),u=Rm.parseMasterPlaylist(o,c);if(u.playlistParsingError){r.parsing.end=performance.now(),this.handleManifestParsingError(e,n,u.playlistParsingError,i,r);return}const{contentSteering:l,levels:d,sessionData:f,sessionKeys:A,startTimeOffset:p,variableList:g}=u;this.variableList=g,d.forEach(E=>{const{unknownCodecs:T}=E;if(T){const{preferManagedMediaSource:C}=this.hls.config;let{audioCodec:N,videoCodec:I}=E;for(let U=T.length;U--;){const K=T[U];JE(K,"audio",C)?(E.audioCodec=N=N?`${N},${K}`:K,Hb.audio[N.substring(0,4)]=2,T.splice(U,1)):JE(K,"video",C)&&(E.videoCodec=I=I?`${I},${K}`:K,Hb.video[I.substring(0,4)]=2,T.splice(U,1))}}});const{AUDIO:y=[],SUBTITLES:x,"CLOSED-CAPTIONS":w}=Rm.parseMasterPlaylistMedia(o,c,u);y.length&&!y.some(T=>!T.url)&&d[0].audioCodec&&!d[0].attrs.AUDIO&&(this.hls.logger.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),y.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new lc({}),bitrate:0,url:""})),s.trigger(Le.MANIFEST_LOADED,{levels:d,audioTracks:y,subtitles:x,captions:w,contentSteering:l,url:c,stats:r,networkDetails:i,sessionData:f,sessionKeys:A,startTimeOffset:p,variableList:g})}handleTrackOrLevelPlaylist(e,r,n,i,s){const o=this.hls,{id:c,level:u,type:l}=n,d=F4(e,n),f=qn(u)?u:qn(c)?c:0,A=xG(n),p=Rm.parseLevelPlaylist(e.data,d,f,A,0,this.variableList);if(l===xa.MANIFEST){const g={attrs:new lc({}),bitrate:0,details:p,name:"",url:d};p.requestScheduled=r.loading.start+Eie(p,0),o.trigger(Le.MANIFEST_LOADED,{levels:[g],audioTracks:[],url:d,stats:r,networkDetails:i,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}r.parsing.end=performance.now(),n.levelDetails=p,this.handlePlaylistLoaded(p,e,r,n,i,s)}handleManifestParsingError(e,r,n,i,s){this.hls.trigger(Le.ERROR,{type:Oi.NETWORK_ERROR,details:vr.MANIFEST_PARSING_ERROR,fatal:r.type===xa.MANIFEST,url:e.url,err:n,error:n,reason:n.message,response:e,context:r,networkDetails:i,stats:s})}handleNetworkError(e,r,n=!1,i,s){let o=`A network ${n?"timeout":"error"+(i?" (status "+i.code+")":"")} occurred while loading ${e.type}`;e.type===xa.LEVEL?o+=`: ${e.level} id: ${e.id}`:(e.type===xa.AUDIO_TRACK||e.type===xa.SUBTITLE_TRACK)&&(o+=` id: ${e.id} group-id: "${e.groupId}"`);const c=new Error(o);this.hls.logger.warn(`[playlist-loader]: ${o}`);let u=vr.UNKNOWN,l=!1;const d=this.getInternalLoader(e);switch(e.type){case xa.MANIFEST:u=n?vr.MANIFEST_LOAD_TIMEOUT:vr.MANIFEST_LOAD_ERROR,l=!0;break;case xa.LEVEL:u=n?vr.LEVEL_LOAD_TIMEOUT:vr.LEVEL_LOAD_ERROR,l=!1;break;case xa.AUDIO_TRACK:u=n?vr.AUDIO_TRACK_LOAD_TIMEOUT:vr.AUDIO_TRACK_LOAD_ERROR,l=!1;break;case xa.SUBTITLE_TRACK:u=n?vr.SUBTITLE_TRACK_LOAD_TIMEOUT:vr.SUBTITLE_LOAD_ERROR,l=!1;break}d&&this.resetInternalLoader(e.type);const f={type:Oi.NETWORK_ERROR,details:u,fatal:l,url:e.url,loader:d,context:e,error:c,networkDetails:r,stats:s};if(i){const A=r?.url||e.url;f.response=Uo({url:A,data:void 0},i)}this.hls.trigger(Le.ERROR,f)}handlePlaylistLoaded(e,r,n,i,s,o){const c=this.hls,{type:u,level:l,levelOrTrack:d,id:f,groupId:A,deliveryDirectives:p}=i,g=F4(r,i),y=xG(i);let x=typeof i.level=="number"&&y===fi.MAIN?l:void 0;const w=e.playlistParsingError;if(w){if(this.hls.logger.warn(`${w} ${e.url}`),!c.config.ignorePlaylistParsingErrors){c.trigger(Le.ERROR,{type:Oi.NETWORK_ERROR,details:vr.LEVEL_PARSING_ERROR,fatal:!1,url:g,error:w,reason:w.message,response:r,context:i,level:x,parent:y,networkDetails:s,stats:n});return}e.playlistParsingError=null}if(!e.fragments.length){const E=e.playlistParsingError=new Error("No Segments found in Playlist");c.trigger(Le.ERROR,{type:Oi.NETWORK_ERROR,details:vr.LEVEL_EMPTY_ERROR,fatal:!1,url:g,error:E,reason:E.message,response:r,context:i,level:x,parent:y,networkDetails:s,stats:n});return}switch(e.live&&o&&(o.getCacheAge&&(e.ageHeader=o.getCacheAge()||0),(!o.getCacheAge||isNaN(e.ageHeader))&&(e.ageHeader=0)),u){case xa.MANIFEST:case xa.LEVEL:if(x){if(!d)x=0;else if(d!==c.levels[x]){const E=c.levels.indexOf(d);E>-1&&(x=E)}}c.trigger(Le.LEVEL_LOADED,{details:e,levelInfo:d||c.levels[0],level:x||0,id:f||0,stats:n,networkDetails:s,deliveryDirectives:p,withoutMultiVariant:u===xa.MANIFEST});break;case xa.AUDIO_TRACK:c.trigger(Le.AUDIO_TRACK_LOADED,{details:e,track:d,id:f||0,groupId:A||"",stats:n,networkDetails:s,deliveryDirectives:p});break;case xa.SUBTITLE_TRACK:c.trigger(Le.SUBTITLE_TRACK_LOADED,{details:e,track:d,id:f||0,groupId:A||"",stats:n,networkDetails:s,deliveryDirectives:p});break}}}class m0{static get version(){return r2}static isMSESupported(){return wse()}static isSupported(){return yQe()}static getMediaSource(){return D0()}static get Events(){return Le}static get MetadataSchema(){return hf}static get ErrorTypes(){return Oi}static get ErrorDetails(){return vr}static get DefaultConfig(){return m0.defaultConfig?m0.defaultConfig:oQe}static set DefaultConfig(e){m0.defaultConfig=e}constructor(e={}){this.config=void 0,this.userConfig=void 0,this.logger=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new wF,this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioStreamController=void 0,this.subtititleStreamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.interstitialsController=void 0,this.gapController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this._url=null,this._sessionId=void 0,this.triggeringException=void 0,this.started=!1;const r=this.logger=k8e(e.debug||!1,"Hls instance",e.assetPlayerId),n=this.config=cQe(m0.DefaultConfig,e,r);this.userConfig=e,n.progressive&&uQe(n,r);const{abrController:i,bufferController:s,capLevelController:o,errorController:c,fpsController:u}=n,l=new c(this),d=this.abrController=new i(this),f=new S7e(this),A=n.interstitialsController,p=A?this.interstitialsController=new A(this,m0):null,g=this.bufferController=new s(this,f),y=this.capLevelController=new o(this),x=new u(this),w=new _Qe(this),E=n.contentSteeringController,T=E?new E(this):null,C=this.levelController=new vQe(this,T),N=new pQe(this),I=new EQe(this.config,this.logger),U=this.streamController=new wQe(this,f,I),K=this.gapController=new AQe(this,f);y.setStreamController(U),x.setStreamController(U);const Y=[w,C,U];p&&Y.splice(1,0,p),T&&Y.splice(1,0,T),this.networkControllers=Y;const re=[d,g,K,y,x,N,f];this.audioTrackController=this.createController(n.audioTrackController,Y);const se=n.audioStreamController;se&&Y.push(this.audioStreamController=new se(this,f,I)),this.subtitleTrackController=this.createController(n.subtitleTrackController,Y);const Ae=n.subtitleStreamController;Ae&&Y.push(this.subtititleStreamController=new Ae(this,f,I)),this.createController(n.timelineController,re),I.emeController=this.emeController=this.createController(n.emeController,re),this.cmcdController=this.createController(n.cmcdController,re),this.latencyController=this.createController(gQe,re),this.coreComponents=re,Y.push(l);const we=l.onErrorOut;typeof we=="function"&&this.on(Le.ERROR,we,l),this.on(Le.MANIFEST_LOADED,w.onManifestLoaded,w)}createController(e,r){if(e){const n=new e(this);return r&&r.push(n),n}return null}on(e,r,n=this){this._emitter.on(e,r,n)}once(e,r,n=this){this._emitter.once(e,r,n)}removeAllListeners(e){this._emitter.removeAllListeners(e)}off(e,r,n=this,i){this._emitter.off(e,r,n,i)}listeners(e){return this._emitter.listeners(e)}emit(e,r,n){return this._emitter.emit(e,r,n)}trigger(e,r){if(this.config.debug)return this.emit(e,e,r);try{return this.emit(e,e,r)}catch(n){if(this.logger.error("An internal error happened while handling event "+e+'. Error message: "'+n.message+'". Here is a stacktrace:',n),!this.triggeringException){this.triggeringException=!0;const i=e===Le.ERROR;this.trigger(Le.ERROR,{type:Oi.OTHER_ERROR,details:vr.INTERNAL_EXCEPTION,fatal:i,event:e,error:n}),this.triggeringException=!1}}return!1}listenerCount(e){return this._emitter.listenerCount(e)}destroy(){this.logger.log("destroy"),this.trigger(Le.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this._url=null,this.networkControllers.forEach(r=>r.destroy()),this.networkControllers.length=0,this.coreComponents.forEach(r=>r.destroy()),this.coreComponents.length=0;const e=this.config;e.xhrSetup=e.fetchSetup=void 0,this.userConfig=null}attachMedia(e){if(!e||"media"in e&&!e.media){const s=new Error(`attachMedia failed: invalid argument (${e})`);this.trigger(Le.ERROR,{type:Oi.OTHER_ERROR,details:vr.ATTACH_MEDIA_ERROR,fatal:!0,error:s});return}this.logger.log("attachMedia"),this._media&&(this.logger.warn("media must be detached before attaching"),this.detachMedia());const r="media"in e,n=r?e.media:e,i=r?e:{media:n};this._media=n,this.trigger(Le.MEDIA_ATTACHING,i)}detachMedia(){this.logger.log("detachMedia"),this.trigger(Le.MEDIA_DETACHING,{}),this._media=null}transferMedia(){this._media=null;const e=this.bufferController.transferMedia();return this.trigger(Le.MEDIA_DETACHING,{transferMedia:e}),e}loadSource(e){this.stopLoad();const r=this.media,n=this._url,i=this._url=dF.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.logger.log(`loadSource:${i}`),r&&n&&(n!==i||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(r)),this.trigger(Le.MANIFEST_LOADING,{url:e})}get url(){return this._url}get hasEnoughToStart(){return this.streamController.hasEnoughToStart}get startPosition(){return this.streamController.startPositionValue}startLoad(e=-1,r){this.logger.log(`startLoad(${e+(r?", <skip seek to start>":"")})`),this.started=!0,this.resumeBuffering();for(let n=0;n<this.networkControllers.length&&(this.networkControllers[n].startLoad(e,r),!(!this.started||!this.networkControllers));n++);}stopLoad(){this.logger.log("stopLoad"),this.started=!1;for(let e=0;e<this.networkControllers.length&&(this.networkControllers[e].stopLoad(),!(this.started||!this.networkControllers));e++);}get loadingEnabled(){return this.started}get bufferingEnabled(){return this.streamController.bufferingEnabled}resumeBuffering(){this.bufferingEnabled||(this.logger.log("resume buffering"),this.networkControllers.forEach(e=>{e.resumeBuffering&&e.resumeBuffering()}))}pauseBuffering(){this.bufferingEnabled&&(this.logger.log("pause buffering"),this.networkControllers.forEach(e=>{e.pauseBuffering&&e.pauseBuffering()}))}get inFlightFragments(){const e={[fi.MAIN]:this.streamController.inFlightFrag};return this.audioStreamController&&(e[fi.AUDIO]=this.audioStreamController.inFlightFrag),this.subtititleStreamController&&(e[fi.SUBTITLE]=this.subtititleStreamController.inFlightFrag),e}swapAudioCodec(){this.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()}recoverMediaError(){this.logger.log("recoverMediaError");const e=this._media,r=e?.currentTime;this.detachMedia(),e&&(this.attachMedia(e),r&&this.startLoad(r))}removeLevel(e){this.levelController.removeLevel(e)}get sessionId(){let e=this._sessionId;return e||(e=this._sessionId=AHe()),e}get levels(){const e=this.levelController.levels;return e||[]}get latestLevelDetails(){return this.streamController.getLevelDetails()||null}get loadLevelObj(){return this.levelController.loadLevelObj}get currentLevel(){return this.streamController.currentLevel}set currentLevel(e){this.logger.log(`set currentLevel:${e}`),this.levelController.manualLevel=e,this.streamController.immediateLevelSwitch()}get nextLevel(){return this.streamController.nextLevel}set nextLevel(e){this.logger.log(`set nextLevel:${e}`),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(e){this.logger.log(`set loadLevel:${e}`),this.levelController.manualLevel=e}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(e){this.levelController.nextLoadLevel=e}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(e){this.logger.log(`set firstLevel:${e}`),this.levelController.firstLevel=e}get startLevel(){const e=this.levelController.startLevel;return e===-1&&this.abrController.forcedAutoLevel>-1?this.abrController.forcedAutoLevel:e}set startLevel(e){this.logger.log(`set startLevel:${e}`),e!==-1&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(e){const r=!!e;r!==this.config.capLevelToPlayerSize&&(r?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=r)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimate():NaN}set bandwidthEstimate(e){this.abrController.resetEstimator(e)}get abrEwmaDefaultEstimate(){const{bwEstimator:e}=this.abrController;return e?e.defaultEstimate:NaN}get ttfbEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimateTTFB():NaN}set autoLevelCapping(e){this._autoLevelCapping!==e&&(this.logger.log(`set autoLevelCapping:${e}`),this._autoLevelCapping=e,this.levelController.checkMaxAutoUpdated())}get maxHdcpLevel(){return this._maxHdcpLevel}set maxHdcpLevel(e){c7e(e)&&this._maxHdcpLevel!==e&&(this._maxHdcpLevel=e,this.levelController.checkMaxAutoUpdated())}get autoLevelEnabled(){return this.levelController.manualLevel===-1}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){const{levels:e,config:{minAutoBitrate:r}}=this;if(!e)return 0;const n=e.length;for(let i=0;i<n;i++)if(e[i].maxBitrate>=r)return i;return 0}get maxAutoLevel(){const{levels:e,autoLevelCapping:r,maxHdcpLevel:n}=this;let i;if(r===-1&&e!=null&&e.length?i=e.length-1:i=r,n)for(let s=i;s--;){const o=e[s].attrs["HDCP-LEVEL"];if(o&&o<=n)return s}return i}get firstAutoLevel(){return this.abrController.firstAutoLevel}get nextAutoLevel(){return this.abrController.nextAutoLevel}set nextAutoLevel(e){this.abrController.nextAutoLevel=e}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}get maxBufferLength(){return this.streamController.maxBufferLength}setAudioOption(e){var r;return((r=this.audioTrackController)==null?void 0:r.setAudioOption(e))||null}setSubtitleOption(e){var r;return((r=this.subtitleTrackController)==null?void 0:r.setSubtitleOption(e))||null}get allAudioTracks(){const e=this.audioTrackController;return e?e.allAudioTracks:[]}get audioTracks(){const e=this.audioTrackController;return e?e.audioTracks:[]}get audioTrack(){const e=this.audioTrackController;return e?e.audioTrack:-1}set audioTrack(e){const r=this.audioTrackController;r&&(r.audioTrack=e)}get allSubtitleTracks(){const e=this.subtitleTrackController;return e?e.allSubtitleTracks:[]}get subtitleTracks(){const e=this.subtitleTrackController;return e?e.subtitleTracks:[]}get subtitleTrack(){const e=this.subtitleTrackController;return e?e.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(e){const r=this.subtitleTrackController;r&&(r.subtitleTrack=e)}get subtitleDisplay(){const e=this.subtitleTrackController;return e?e.subtitleDisplay:!1}set subtitleDisplay(e){const r=this.subtitleTrackController;r&&(r.subtitleDisplay=e)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(e){this.config.lowLatencyMode=e}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}set targetLatency(e){this.latencyController.targetLatency=e}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}get pathways(){return this.levelController.pathways}get pathwayPriority(){return this.levelController.pathwayPriority}set pathwayPriority(e){this.levelController.pathwayPriority=e}get bufferedToEnd(){var e;return!!((e=this.bufferController)!=null&&e.bufferedToEnd)}get interstitialsManager(){var e;return((e=this.interstitialsController)==null?void 0:e.interstitialsManager)||null}getMediaDecodingInfo(e,r=this.allAudioTracks){const n=lie(r);return aie(e,n,navigator.mediaCapabilities)}}m0.defaultConfig=void 0;var Ba=m0,Sl={VIDEO:"video",THUMBNAIL:"thumbnail",STORYBOARD:"storyboard",DRM:"drm"},ts={NOT_AN_ERROR:0,NETWORK_OFFLINE:2000002,NETWORK_UNKNOWN_ERROR:2e6,NETWORK_NO_STATUS:2000001,NETWORK_INVALID_URL:24e5,NETWORK_NOT_FOUND:2404e3,NETWORK_NOT_READY:2412e3,NETWORK_GENERIC_SERVER_FAIL:25e5,NETWORK_TOKEN_MISSING:2403201,NETWORK_TOKEN_MALFORMED:2412202,NETWORK_TOKEN_EXPIRED:2403210,NETWORK_TOKEN_AUD_MISSING:2403221,NETWORK_TOKEN_AUD_MISMATCH:2403222,NETWORK_TOKEN_SUB_MISMATCH:2403232,ENCRYPTED_ERROR:5e6,ENCRYPTED_UNSUPPORTED_KEY_SYSTEM:5000001,ENCRYPTED_GENERATE_REQUEST_FAILED:5000002,ENCRYPTED_UPDATE_LICENSE_FAILED:5000003,ENCRYPTED_UPDATE_SERVER_CERT_FAILED:5000004,ENCRYPTED_CDM_ERROR:5000005,ENCRYPTED_OUTPUT_RESTRICTED:5000006,ENCRYPTED_MISSING_TOKEN:5000002},$5=t=>t===Sl.VIDEO?"playback":t,Zg=class xw extends Error{constructor(e,r=xw.MEDIA_ERR_CUSTOM,n,i){var s;super(e),this.name="MediaError",this.code=r,this.context=i,this.fatal=n??(r>=xw.MEDIA_ERR_NETWORK&&r<=xw.MEDIA_ERR_ENCRYPTED),this.message||(this.message=(s=xw.defaultMessages[this.code])!=null?s:"")}};Zg.MEDIA_ERR_ABORTED=1,Zg.MEDIA_ERR_NETWORK=2,Zg.MEDIA_ERR_DECODE=3,Zg.MEDIA_ERR_SRC_NOT_SUPPORTED=4,Zg.MEDIA_ERR_ENCRYPTED=5,Zg.MEDIA_ERR_CUSTOM=100,Zg.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail.",3:"A media error caused playback to be aborted. The media could be corrupt or your browser does not support this format.",4:"An unsupported error occurred. The server or network failed, or your browser does not support this format.",5:"The media is encrypted and there are no keys to decrypt it."};var ii=Zg,SQe=t=>t==null,PF=(t,e)=>SQe(e)?!1:t in e,EO={ANY:"any",MUTED:"muted"},Io={ON_DEMAND:"on-demand",LIVE:"live",UNKNOWN:"unknown"},Dm={MSE:"mse",NATIVE:"native"},bw={HEADER:"header",QUERY:"query",NONE:"none"},tN=Object.values(bw),Hp={M3U8:"application/vnd.apple.mpegurl",MP4:"video/mp4"},bG={HLS:Hp.M3U8};[...Object.values(Hp)];var TQe="en",_O={code:TQe},mu=(t,e,r,n,i=t)=>{i.addEventListener(e,r,n),t.addEventListener("teardown",()=>{i.removeEventListener(e,r)},{once:!0})};function CQe(t,e,r){e&&r>e&&(r=e);for(let n=0;n<t.length;n++)if(t.start(n)<=r&&t.end(n)>=r)return!0;return!1}var OF=t=>{let e=t.indexOf("?");if(e<0)return[t];let r=t.slice(0,e),n=t.slice(e);return[r,n]},H5=t=>{let{type:e}=t;if(e){let r=e.toUpperCase();return PF(r,bG)?bG[r]:e}return jQe(t)},Ese=t=>t==="VOD"?Io.ON_DEMAND:Io.LIVE,_se=t=>t==="EVENT"?Number.POSITIVE_INFINITY:t==="VOD"?Number.NaN:0,jQe=t=>{let{src:e}=t;if(!e)return"";let r="";try{r=new URL(e).pathname}catch{console.error("invalid url")}let n=r.lastIndexOf(".");if(n<0)return kQe(t)?Hp.M3U8:"";let i=r.slice(n+1).toUpperCase();return PF(i,Hp)?Hp[i]:""},NQe="mux.com",kQe=({src:t,customDomain:e=NQe})=>{let r;try{r=new URL(`${t}`)}catch{return!1}let n=r.protocol==="https:",i=r.hostname===`stream.${e}`.toLowerCase(),s=r.pathname.split("/"),o=s.length===2,c=!(s!=null&&s[1].includes("."));return n&&i&&o&&c},vb=t=>{let e=(t??"").split(".")[1];if(e)try{let r=e.replace(/-/g,"+").replace(/_/g,"/"),n=decodeURIComponent(atob(r).split("").map(function(i){return"%"+("00"+i.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(n)}catch{return}},IQe=({exp:t},e=Date.now())=>!t||t*1e3<e,LQe=({sub:t},e)=>t!==e,BQe=({aud:t},e)=>!t,PQe=({aud:t},e)=>t!==e,Sse="en";function Ki(t,e=!0){var r,n;let i=e&&(n=(r=_O)==null?void 0:r[t])!=null?n:t,s=e?_O.code:Sse;return new OQe(i,s)}var OQe=class{constructor(t,e=(r=>(r=_O)!=null?r:Sse)()){this.message=t,this.locale=e}format(t){return this.message.replace(/\{(\w+)\}/g,(e,r)=>{var n;return(n=t[r])!=null?n:""})}toString(){return this.message}},RQe=Object.values(EO),wG=t=>typeof t=="boolean"||typeof t=="string"&&RQe.includes(t),DQe=(t,e,r)=>{let{autoplay:n}=t,i=!1,s=!1,o=wG(n)?n:!!n,c=()=>{i||mu(e,"playing",()=>{i=!0},{once:!0})};if(c(),mu(e,"loadstart",()=>{i=!1,c(),U4(e,o)},{once:!0}),mu(e,"loadstart",()=>{r||(t.streamType&&t.streamType!==Io.UNKNOWN?s=t.streamType===Io.LIVE:s=!Number.isFinite(e.duration)),U4(e,o)},{once:!0}),r&&r.once(Ba.Events.LEVEL_LOADED,(u,l)=>{var d;t.streamType&&t.streamType!==Io.UNKNOWN?s=t.streamType===Io.LIVE:s=(d=l.details.live)!=null?d:!1}),!o){let u=()=>{!s||Number.isFinite(t.startTime)||(r!=null&&r.liveSyncPosition?e.currentTime=r.liveSyncPosition:Number.isFinite(e.seekable.end(0))&&(e.currentTime=e.seekable.end(0)))};r&&mu(e,"play",()=>{e.preload==="metadata"?r.once(Ba.Events.LEVEL_UPDATED,u):u()},{once:!0})}return u=>{i||(o=wG(u)?u:!!u,U4(e,o))}},U4=(t,e)=>{if(!e)return;let r=t.muted,n=()=>t.muted=r;switch(e){case EO.ANY:t.play().catch(()=>{t.muted=!0,t.play().catch(n)});break;case EO.MUTED:t.muted=!0,t.play().catch(n);break;default:t.play().catch(()=>{});break}},MQe=({preload:t,src:e},r,n)=>{let i=f=>{f!=null&&["","none","metadata","auto"].includes(f)?r.setAttribute("preload",f):r.removeAttribute("preload")};if(!n)return i(t),i;let s=!1,o=!1,c=n.config.maxBufferLength,u=n.config.maxBufferSize,l=f=>{i(f);let A=f??r.preload;o||A==="none"||(A==="metadata"?(n.config.maxBufferLength=1,n.config.maxBufferSize=1):(n.config.maxBufferLength=c,n.config.maxBufferSize=u),d())},d=()=>{!s&&e&&(s=!0,n.loadSource(e))};return mu(r,"play",()=>{o=!0,n.config.maxBufferLength=c,n.config.maxBufferSize=u,d()},{once:!0}),l(t),l};function FQe(t,e){var r;if(!("videoTracks"in t))return;let n=new WeakMap;e.on(Ba.Events.MANIFEST_PARSED,function(u,l){c();let d=t.addVideoTrack("main");d.selected=!0;for(let[f,A]of l.levels.entries()){let p=d.addRendition(A.url[0],A.width,A.height,A.videoCodec,A.bitrate);n.set(A,`${f}`),p.id=`${f}`}}),e.on(Ba.Events.AUDIO_TRACKS_UPDATED,function(u,l){o();for(let d of l.audioTracks){let f=d.default?"main":"alternative",A=t.addAudioTrack(f,d.name,d.lang);A.id=`${d.id}`,d.default&&(A.enabled=!0)}}),t.audioTracks.addEventListener("change",()=>{var u;let l=+((u=[...t.audioTracks].find(f=>f.enabled))==null?void 0:u.id),d=e.audioTracks.map(f=>f.id);l!=e.audioTrack&&d.includes(l)&&(e.audioTrack=l)}),e.on(Ba.Events.LEVELS_UPDATED,function(u,l){var d;let f=t.videoTracks[(d=t.videoTracks.selectedIndex)!=null?d:0];if(!f)return;let A=l.levels.map(p=>n.get(p));for(let p of t.videoRenditions)p.id&&!A.includes(p.id)&&f.removeRendition(p)});let i=u=>{let l=u.target.selectedIndex;l!=e.nextLevel&&(e.nextLevel=l)};(r=t.videoRenditions)==null||r.addEventListener("change",i);let s=()=>{for(let u of t.videoTracks)t.removeVideoTrack(u)},o=()=>{for(let u of t.audioTracks)t.removeAudioTrack(u)},c=()=>{s(),o()};e.once(Ba.Events.DESTROYING,c)}var $4=t=>"time"in t?t.time:t.startTime;function UQe(t,e){e.on(Ba.Events.NON_NATIVE_TEXT_TRACKS_FOUND,(i,{tracks:s})=>{s.forEach(o=>{var c,u;let l=(c=o.subtitleTrack)!=null?c:o.closedCaptions,d=e.subtitleTracks.findIndex(({lang:A,name:p,type:g})=>A==l?.lang&&p===o.label&&g.toLowerCase()===o.kind),f=((u=o._id)!=null?u:o.default)?"default":`${o.kind}${d}`;RF(t,o.kind,o.label,l?.lang,f,o.default)})});let r=()=>{if(!e.subtitleTracks.length)return;let i=Array.from(t.textTracks).find(c=>c.id&&c.mode==="showing"&&["subtitles","captions"].includes(c.kind));if(!i)return;let s=e.subtitleTracks[e.subtitleTrack],o=s?s.default?"default":`${e.subtitleTracks[e.subtitleTrack].type.toLowerCase()}${e.subtitleTrack}`:void 0;if(e.subtitleTrack<0||i?.id!==o){let c=e.subtitleTracks.findIndex(({lang:u,name:l,type:d,default:f})=>i.id==="default"&&f||u==i.language&&l===i.label&&d.toLowerCase()===i.kind);e.subtitleTrack=c}i?.id===o&&i.cues&&Array.from(i.cues).forEach(c=>{i.addCue(c)})};t.textTracks.addEventListener("change",r),e.on(Ba.Events.CUES_PARSED,(i,{track:s,cues:o})=>{let c=t.textTracks.getTrackById(s);if(!c)return;let u=c.mode==="disabled";u&&(c.mode="hidden"),o.forEach(l=>{var d;(d=c.cues)!=null&&d.getCueById(l.id)||c.addCue(l)}),u&&(c.mode="disabled")}),e.once(Ba.Events.DESTROYING,()=>{t.textTracks.removeEventListener("change",r),t.querySelectorAll("track[data-removeondestroy]").forEach(i=>{i.remove()})});let n=()=>{Array.from(t.textTracks).forEach(i=>{var s,o;if(!["subtitles","caption"].includes(i.kind)&&(i.label==="thumbnails"||i.kind==="chapters")){if(!((s=i.cues)!=null&&s.length)){let c="track";i.kind&&(c+=`[kind="${i.kind}"]`),i.label&&(c+=`[label="${i.label}"]`);let u=t.querySelector(c),l=(o=u?.getAttribute("src"))!=null?o:"";u?.removeAttribute("src"),setTimeout(()=>{u?.setAttribute("src",l)},0)}i.mode!=="hidden"&&(i.mode="hidden")}})};e.once(Ba.Events.MANIFEST_LOADED,n),e.once(Ba.Events.MEDIA_ATTACHED,n)}function RF(t,e,r,n,i,s){let o=document.createElement("track");return o.kind=e,o.label=r,n&&(o.srclang=n),i&&(o.id=i),s&&(o.default=!0),o.track.mode=["subtitles","captions"].includes(e)?"disabled":"hidden",o.setAttribute("data-removeondestroy",""),t.append(o),o.track}function $Qe(t,e){let r=Array.prototype.find.call(t.querySelectorAll("track"),n=>n.track===e);r?.remove()}function h_(t,e,r){var n;return(n=Array.from(t.querySelectorAll("track")).find(i=>i.track.label===e&&i.track.kind===r))==null?void 0:n.track}async function Tse(t,e,r,n){let i=h_(t,r,n);return i||(i=RF(t,n,r),i.mode="hidden",await new Promise(s=>setTimeout(()=>s(void 0),0))),i.mode!=="hidden"&&(i.mode="hidden"),[...e].sort((s,o)=>$4(o)-$4(s)).forEach(s=>{var o,c;let u=s.value,l=$4(s);if("endTime"in s&&s.endTime!=null)i?.addCue(new VTTCue(l,s.endTime,n==="chapters"?u:JSON.stringify(u??null)));else{let d=Array.prototype.findIndex.call(i?.cues,g=>g.startTime>=l),f=(o=i?.cues)==null?void 0:o[d],A=f?f.startTime:Number.isFinite(t.duration)?t.duration:Number.MAX_SAFE_INTEGER,p=(c=i?.cues)==null?void 0:c[d-1];p&&(p.endTime=l),i?.addCue(new VTTCue(l,A,n==="chapters"?u:JSON.stringify(u??null)))}}),t.textTracks.dispatchEvent(new Event("change",{bubbles:!0,composed:!0})),i}var DF="cuepoints",Cse=Object.freeze({label:DF});async function jse(t,e,r=Cse){return Tse(t,e,r.label,"metadata")}var SO=t=>({time:t.startTime,value:JSON.parse(t.text)});function HQe(t,e={label:DF}){let r=h_(t,e.label,"metadata");return r!=null&&r.cues?Array.from(r.cues,n=>SO(n)):[]}function Nse(t,e={label:DF}){var r,n;let i=h_(t,e.label,"metadata");if(!((r=i?.activeCues)!=null&&r.length))return;if(i.activeCues.length===1)return SO(i.activeCues[0]);let{currentTime:s}=t,o=Array.prototype.find.call((n=i.activeCues)!=null?n:[],({startTime:c,endTime:u})=>c<=s&&u>s);return SO(o||i.activeCues[0])}async function QQe(t,e=Cse){return new Promise(r=>{mu(t,"loadstart",async()=>{let n=await jse(t,[],e);mu(t,"cuechange",()=>{let i=Nse(t);if(i){let s=new CustomEvent("cuepointchange",{composed:!0,bubbles:!0,detail:i});t.dispatchEvent(s)}},{},n),r(n)})})}var MF="chapters",kse=Object.freeze({label:MF}),TO=t=>({startTime:t.startTime,endTime:t.endTime,value:t.text});async function Ise(t,e,r=kse){return Tse(t,e,r.label,"chapters")}function VQe(t,e={label:MF}){var r;let n=h_(t,e.label,"chapters");return(r=n?.cues)!=null&&r.length?Array.from(n.cues,i=>TO(i)):[]}function Lse(t,e={label:MF}){var r,n;let i=h_(t,e.label,"chapters");if(!((r=i?.activeCues)!=null&&r.length))return;if(i.activeCues.length===1)return TO(i.activeCues[0]);let{currentTime:s}=t,o=Array.prototype.find.call((n=i.activeCues)!=null?n:[],({startTime:c,endTime:u})=>c<=s&&u>s);return TO(o||i.activeCues[0])}async function zQe(t,e=kse){return new Promise(r=>{mu(t,"loadstart",async()=>{let n=await Ise(t,[],e);mu(t,"cuechange",()=>{let i=Lse(t);if(i){let s=new CustomEvent("chapterchange",{composed:!0,bubbles:!0,detail:i});t.dispatchEvent(s)}},{},n),r(n)})})}function KQe(t,e){if(e){let r=e.playingDate;if(r!=null)return new Date(r.getTime()-t.currentTime*1e3)}return typeof t.getStartDate=="function"?t.getStartDate():new Date(NaN)}function GQe(t,e){if(e&&e.playingDate)return e.playingDate;if(typeof t.getStartDate=="function"){let r=t.getStartDate();return new Date(r.getTime()+t.currentTime*1e3)}return new Date(NaN)}var lE={VIDEO:"v",THUMBNAIL:"t",STORYBOARD:"s",DRM:"d"},WQe=t=>{if(t===Sl.VIDEO)return lE.VIDEO;if(t===Sl.DRM)return lE.DRM},YQe=(t,e)=>{var r,n;let i=$5(t),s=`${i}Token`;return(r=e.tokens)!=null&&r[i]?(n=e.tokens)==null?void 0:n[i]:PF(s,e)?e[s]:void 0},rN=(t,e,r,n,i=!1,s=!(o=>(o=globalThis.navigator)==null?void 0:o.onLine)())=>{var o,c;if(s){let w=Ki("Your device appears to be offline",i),E,T=ii.MEDIA_ERR_NETWORK,C=new ii(w,T,!1,E);return C.errorCategory=e,C.muxCode=ts.NETWORK_OFFLINE,C.data=t,C}let u="status"in t?t.status:t.code,l=Date.now(),d=ii.MEDIA_ERR_NETWORK;if(u===200)return;let f=$5(e),A=YQe(e,r),p=WQe(e),[g]=OF((o=r.playbackId)!=null?o:"");if(!u||!g)return;let y=vb(A);if(A&&!y){let w=Ki("The {tokenNamePrefix}-token provided is invalid or malformed.",i).format({tokenNamePrefix:f}),E=Ki("Compact JWT string: {token}",i).format({token:A}),T=new ii(w,d,!0,E);return T.errorCategory=e,T.muxCode=ts.NETWORK_TOKEN_MALFORMED,T.data=t,T}if(u>=500){let w=new ii("",d,n??!0);return w.errorCategory=e,w.muxCode=ts.NETWORK_UNKNOWN_ERROR,w}if(u===403)if(y){if(IQe(y,l)){let w={timeStyle:"medium",dateStyle:"medium"},E=Ki("The videos secured {tokenNamePrefix}-token has expired.",i).format({tokenNamePrefix:f}),T=Ki("Expired at: {expiredDate}. Current time: {currentDate}.",i).format({expiredDate:new Intl.DateTimeFormat("en",w).format((c=y.exp)!=null?c:0*1e3),currentDate:new Intl.DateTimeFormat("en",w).format(l)}),C=new ii(E,d,!0,T);return C.errorCategory=e,C.muxCode=ts.NETWORK_TOKEN_EXPIRED,C.data=t,C}if(LQe(y,g)){let w=Ki("The videos playback ID does not match the one encoded in the {tokenNamePrefix}-token.",i).format({tokenNamePrefix:f}),E=Ki("Specified playback ID: {playbackId} and the playback ID encoded in the {tokenNamePrefix}-token: {tokenPlaybackId}",i).format({tokenNamePrefix:f,playbackId:g,tokenPlaybackId:y.sub}),T=new ii(w,d,!0,E);return T.errorCategory=e,T.muxCode=ts.NETWORK_TOKEN_SUB_MISMATCH,T.data=t,T}if(BQe(y)){let w=Ki("The {tokenNamePrefix}-token is formatted with incorrect information.",i).format({tokenNamePrefix:f}),E=Ki("The {tokenNamePrefix}-token has no aud value. aud value should be {expectedAud}.",i).format({tokenNamePrefix:f,expectedAud:p}),T=new ii(w,d,!0,E);return T.errorCategory=e,T.muxCode=ts.NETWORK_TOKEN_AUD_MISSING,T.data=t,T}if(PQe(y,p)){let w=Ki("The {tokenNamePrefix}-token is formatted with incorrect information.",i).format({tokenNamePrefix:f}),E=Ki("The {tokenNamePrefix}-token has an incorrect aud value: {aud}. aud value should be {expectedAud}.",i).format({tokenNamePrefix:f,expectedAud:p,aud:y.aud}),T=new ii(w,d,!0,E);return T.errorCategory=e,T.muxCode=ts.NETWORK_TOKEN_AUD_MISMATCH,T.data=t,T}}else{let w=Ki("Authorization error trying to access this {category} URL. If this is a signed URL, you might need to provide a {tokenNamePrefix}-token.",i).format({tokenNamePrefix:f,category:e}),E=Ki("Specified playback ID: {playbackId}",i).format({playbackId:g}),T=new ii(w,d,n??!0,E);return T.errorCategory=e,T.muxCode=ts.NETWORK_TOKEN_MISSING,T.data=t,T}if(u===412){let w=Ki("This playback-id may belong to a live stream that is not currently active or an asset that is not ready.",i),E=Ki("Specified playback ID: {playbackId}",i).format({playbackId:g}),T=new ii(w,d,n??!0,E);return T.errorCategory=e,T.muxCode=ts.NETWORK_NOT_READY,T.streamType=r.streamType===Io.LIVE?"live":r.streamType===Io.ON_DEMAND?"on-demand":"unknown",T.data=t,T}if(u===404){let w=Ki("This URL or playback-id does not exist. You may have used an Asset ID or an ID from a different resource.",i),E=Ki("Specified playback ID: {playbackId}",i).format({playbackId:g}),T=new ii(w,d,n??!0,E);return T.errorCategory=e,T.muxCode=ts.NETWORK_NOT_FOUND,T.data=t,T}if(u===400){let w=Ki("The URL or playback-id was invalid. You may have used an invalid value as a playback-id."),E=Ki("Specified playback ID: {playbackId}",i).format({playbackId:g}),T=new ii(w,d,n??!0,E);return T.errorCategory=e,T.muxCode=ts.NETWORK_INVALID_URL,T.data=t,T}let x=new ii("",d,n??!0);return x.errorCategory=e,x.muxCode=ts.NETWORK_UNKNOWN_ERROR,x.data=t,x},EG=Ba.DefaultConfig.capLevelController,qQe={"720p":921600,"1080p":2073600,"1440p":4194304,"2160p":8294400};function XQe(t){let e=t.toLowerCase().trim();return qQe[e]}var CO=class ww extends EG{constructor(e){super(e)}static setMaxAutoResolution(e,r){r?ww.maxAutoResolution.set(e,r):ww.maxAutoResolution.delete(e)}getMaxAutoResolution(){var e;let r=this.hls;return(e=ww.maxAutoResolution.get(r))!=null?e:void 0}get levels(){var e;return(e=this.hls.levels)!=null?e:[]}getValidLevels(e){return this.levels.filter((r,n)=>this.isLevelAllowed(r)&&n<=e)}getMaxLevelCapped(e){let r=this.getValidLevels(e),n=this.getMaxAutoResolution();if(!n)return super.getMaxLevel(e);let i=XQe(n);if(!i)return super.getMaxLevel(e);let s=r.filter(u=>u.width*u.height<=i),o=s.findIndex(u=>u.width*u.height===i);if(o!==-1){let u=s[o];return r.findIndex(l=>l===u)}if(s.length===0)return 0;let c=s[s.length-1];return r.findIndex(u=>u===c)}getMaxLevel(e){if(this.getMaxAutoResolution()!==void 0)return this.getMaxLevelCapped(e);let r=super.getMaxLevel(e),n=this.getValidLevels(e);if(!n[r])return r;let i=Math.min(n[r].width,n[r].height),s=ww.minMaxResolution;return i>=s?r:EG.getMaxLevelByMediaSize(n,s*(16/9),s)}};CO.minMaxResolution=720,CO.maxAutoResolution=new WeakMap;var ZQe=CO,jO=ZQe,AT={FAIRPLAY:"fairplay",PLAYREADY:"playready",WIDEVINE:"widevine"},JQe=t=>{if(t.includes("fps"))return AT.FAIRPLAY;if(t.includes("playready"))return AT.PLAYREADY;if(t.includes("widevine"))return AT.WIDEVINE},eVe=t=>{let e=t.split(`
`).find((r,n,i)=>n&&i[n-1].startsWith("#EXT-X-STREAM-INF"));return fetch(e).then(r=>r.status!==200?Promise.reject(r):r.text())},tVe=t=>{let e=t.split(`
`).filter(n=>n.startsWith("#EXT-X-SESSION-DATA"));if(!e.length)return{};let r={};for(let n of e){let i=nVe(n),s=i["DATA-ID"];s&&(r[s]={...i})}return{sessionData:r}},rVe=/([A-Z0-9-]+)="?(.*?)"?(?:,|$)/g;function nVe(t){let e=[...t.matchAll(rVe)];return Object.fromEntries(e.map(([,r,n])=>[r,n]))}var iVe=t=>{var e,r,n;let i=t.split(`
`),s=(r=((e=i.find(l=>l.startsWith("#EXT-X-PLAYLIST-TYPE")))!=null?e:"").split(":")[1])==null?void 0:r.trim(),o=Ese(s),c=_se(s),u;if(o===Io.LIVE){let l=i.find(d=>d.startsWith("#EXT-X-PART-INF"));if(l)u=+l.split(":")[1].split("=")[1]*2;else{let d=i.find(A=>A.startsWith("#EXT-X-TARGETDURATION")),f=(n=d?.split(":"))==null?void 0:n[1];u=+(f??6)*3}}return{streamType:o,targetLiveWindow:c,liveEdgeStartOffset:u}},sVe=async(t,e)=>{if(e===Hp.MP4)return{streamType:Io.ON_DEMAND,targetLiveWindow:Number.NaN,liveEdgeStartOffset:void 0,sessionData:void 0};if(e===Hp.M3U8){let r=await fetch(t);if(!r.ok)return Promise.reject(r);let n=await r.text(),i=await eVe(n);return{...tVe(n),...iVe(i)}}return console.error(`Media type ${e} is an unrecognized or unsupported type for src ${t}.`),{streamType:void 0,targetLiveWindow:void 0,liveEdgeStartOffset:void 0,sessionData:void 0}},aVe=async(t,e,r=H5({src:t}))=>{var n,i,s,o;let{streamType:c,targetLiveWindow:u,liveEdgeStartOffset:l,sessionData:d}=await sVe(t,r),f=d?.["com.apple.hls.chapters"];(f!=null&&f.URI||f!=null&&f.VALUE.toLocaleLowerCase().startsWith("http"))&&FF((n=f.URI)!=null?n:f.VALUE,e),((i=Dc.get(e))!=null?i:{}).liveEdgeStartOffset=l,((s=Dc.get(e))!=null?s:{}).targetLiveWindow=u,e.dispatchEvent(new CustomEvent("targetlivewindowchange",{composed:!0,bubbles:!0})),((o=Dc.get(e))!=null?o:{}).streamType=c,e.dispatchEvent(new CustomEvent("streamtypechange",{composed:!0,bubbles:!0}))},FF=async(t,e)=>{var r,n;try{let i=await fetch(t);if(!i.ok)throw new Error(`Failed to fetch Mux metadata: ${i.status} ${i.statusText}`);let s=await i.json(),o={};if(!((r=s?.[0])!=null&&r.metadata))return;for(let u of s[0].metadata)u.key&&u.value&&(o[u.key]=u.value);((n=Dc.get(e))!=null?n:{}).metadata=o;let c=new CustomEvent("muxmetadata");e.dispatchEvent(c)}catch(i){console.error(i)}},oVe=t=>{var e;let r=t.type,n=Ese(r),i=_se(r),s,o=!!((e=t.partList)!=null&&e.length);return n===Io.LIVE&&(s=o?t.partTarget*2:t.targetduration*3),{streamType:n,targetLiveWindow:i,liveEdgeStartOffset:s,lowLatency:o}},lVe=(t,e,r)=>{var n,i,s,o,c,u,l,d;let{streamType:f,targetLiveWindow:A,liveEdgeStartOffset:p,lowLatency:g}=oVe(t);if(f===Io.LIVE){g?(r.config.backBufferLength=(n=r.userConfig.backBufferLength)!=null?n:4,r.config.maxFragLookUpTolerance=(i=r.userConfig.maxFragLookUpTolerance)!=null?i:.001,r.config.abrBandWidthUpFactor=(s=r.userConfig.abrBandWidthUpFactor)!=null?s:r.config.abrBandWidthFactor):r.config.backBufferLength=(o=r.userConfig.backBufferLength)!=null?o:8;let y=Object.freeze({get length(){return e.seekable.length},start(x){return e.seekable.start(x)},end(x){var w;return x>this.length||x<0||Number.isFinite(e.duration)?e.seekable.end(x):(w=r.liveSyncPosition)!=null?w:e.seekable.end(x)}});((c=Dc.get(e))!=null?c:{}).seekable=y}((u=Dc.get(e))!=null?u:{}).liveEdgeStartOffset=p,((l=Dc.get(e))!=null?l:{}).targetLiveWindow=A,e.dispatchEvent(new CustomEvent("targetlivewindowchange",{composed:!0,bubbles:!0})),((d=Dc.get(e))!=null?d:{}).streamType=f,e.dispatchEvent(new CustomEvent("streamtypechange",{composed:!0,bubbles:!0}))},_G,SG,Bse=(SG=(_G=globalThis?.navigator)==null?void 0:_G.userAgent)!=null?SG:"",TG,CG,jG,cVe=(jG=(CG=(TG=globalThis?.navigator)==null?void 0:TG.userAgentData)==null?void 0:CG.platform)!=null?jG:"",uVe=Bse.toLowerCase().includes("android")||["x11","android"].some(t=>cVe.toLowerCase().includes(t)),dVe=t=>/^((?!chrome|android).)*safari/i.test(Bse)&&!!t.canPlayType("application/vnd.apple.mpegurl"),Dc=new WeakMap,Qp="mux.com",NG,kG,Pse=(kG=(NG=Ba).isSupported)==null?void 0:kG.call(NG),hVe=t=>uVe||!dVe(t),UF=()=>{if(typeof window<"u")return uF.utils.now()},fVe=uF.utils.generateUUID,NO=({playbackId:t,customDomain:e=Qp,maxResolution:r,minResolution:n,renditionOrder:i,programStartTime:s,programEndTime:o,assetStartTime:c,assetEndTime:u,playbackToken:l,tokens:{playback:d=l}={},extraSourceParams:f={}}={})=>{if(!t)return;let[A,p=""]=OF(t),g=new URL(`https://stream.${e}/${A}.m3u8${p}`);return d||g.searchParams.has("token")?(g.searchParams.forEach((y,x)=>{x!="token"&&g.searchParams.delete(x)}),d&&g.searchParams.set("token",d)):(r&&g.searchParams.set("max_resolution",r),n&&(g.searchParams.set("min_resolution",n),r&&+r.slice(0,-1)<+n.slice(0,-1)&&console.error("minResolution must be <= maxResolution","minResolution",n,"maxResolution",r)),i&&g.searchParams.set("rendition_order",i),s&&g.searchParams.set("program_start_time",`${s}`),o&&g.searchParams.set("program_end_time",`${o}`),c&&g.searchParams.set("asset_start_time",`${c}`),u&&g.searchParams.set("asset_end_time",`${u}`),Object.entries(f).forEach(([y,x])=>{x!=null&&g.searchParams.set(y,x)})),g.toString()},Q5=t=>{if(!t)return;let[e]=t.split("?");return e||void 0},$F=t=>{if(!t||!t.startsWith("https://stream."))return;let[e]=new URL(t).pathname.slice(1).split(/\.m3u8|\//);return e||void 0},AVe=t=>{var e,r,n;return(e=t?.metadata)!=null&&e.video_id?t.metadata.video_id:Hse(t)&&(n=(r=Q5(t.playbackId))!=null?r:$F(t.src))!=null?n:t.src},Ose=t=>{var e;return(e=Dc.get(t))==null?void 0:e.error},mVe=t=>{var e;return(e=Dc.get(t))==null?void 0:e.metadata},kO=t=>{var e,r;return(r=(e=Dc.get(t))==null?void 0:e.streamType)!=null?r:Io.UNKNOWN},pVe=t=>{var e,r;return(r=(e=Dc.get(t))==null?void 0:e.targetLiveWindow)!=null?r:Number.NaN},HF=t=>{var e,r;return(r=(e=Dc.get(t))==null?void 0:e.seekable)!=null?r:t.seekable},gVe=t=>{var e;let r=(e=Dc.get(t))==null?void 0:e.liveEdgeStartOffset;if(typeof r!="number")return Number.NaN;let n=HF(t);return n.length?n.end(n.length-1)-r:Number.NaN},QF=.034,vVe=(t,e,r=QF)=>Math.abs(t-e)<=r,Rse=(t,e,r=QF)=>t>e||vVe(t,e,r),yVe=(t,e=QF)=>t.paused&&Rse(t.currentTime,t.duration,e),Dse=(t,e)=>{var r,n,i;if(!e||!t.buffered.length)return;if(t.readyState>2)return!1;let s=e.currentLevel>=0?(n=(r=e.levels)==null?void 0:r[e.currentLevel])==null?void 0:n.details:(i=e.levels.find(f=>!!f.details))==null?void 0:i.details;if(!s||s.live)return;let{fragments:o}=s;if(!(o!=null&&o.length))return;if(t.currentTime<t.duration-(s.targetduration+.5))return!1;let c=o[o.length-1];if(t.currentTime<=c.start)return!1;let u=c.start+c.duration/2,l=t.buffered.start(t.buffered.length-1),d=t.buffered.end(t.buffered.length-1);return u>l&&u<d},Mse=(t,e)=>t.ended||t.loop?t.ended:e&&Dse(t,e)?!0:yVe(t),xVe=(t,e,r)=>{Fse(e,r,t);let{metadata:n={}}=t,{view_session_id:i=fVe()}=n,s=AVe(t);n.view_session_id=i,n.video_id=s,t.metadata=n;let o=d=>{var f;(f=e.mux)==null||f.emit("hb",{view_drm_type:d})};t.drmTypeCb=o,Dc.set(e,{retryCount:0});let c=bVe(t,e),u=MQe(t,e,c);t!=null&&t.muxDataKeepSession&&e!=null&&e.mux&&!e.mux.deleted?c&&e.mux.addHLSJS({hlsjs:c,Hls:c?Ba:void 0}):jVe(t,e,c),NVe(t,e,c),QQe(e),zQe(e);let l=DQe(t,e,c);return{engine:c,setAutoplay:l,setPreload:u}},Fse=(t,e,r)=>{let n=e?.engine;t!=null&&t.mux&&!t.mux.deleted&&(r!=null&&r.muxDataKeepSession?n&&t.mux.removeHLSJS():(t.mux.destroy(),delete t.mux)),n&&(n.detachMedia(),n.destroy()),t&&(t.hasAttribute("src")&&(t.removeAttribute("src"),t.load()),t.removeEventListener("error",Vse),t.removeEventListener("error",IO),t.removeEventListener("durationchange",Qse),Dc.delete(t),t.dispatchEvent(new Event("teardown")))};function Use(t,e){var r;let n=H5(t);if(n!==Hp.M3U8)return!0;let i=!n||((r=e.canPlayType(n))!=null?r:!0),{preferPlayback:s}=t,o=s===Dm.MSE,c=s===Dm.NATIVE,u=Pse&&(o||hVe(e));return i&&(c||!u)}var bVe=(t,e)=>{let{debug:r,streamType:n,startTime:i=-1,metadata:s,preferCmcd:o,_hlsConfig:c={},maxAutoResolution:u}=t,l=H5(t)===Hp.M3U8,d=Use(t,e);if(l&&!d&&Pse){let f={backBufferLength:30,renderTextTracksNatively:!1,liveDurationInfinity:!0,capLevelOnFPSDrop:!0},A=wVe(n),p=EVe(t),g=[bw.QUERY,bw.HEADER].includes(o)?{useHeaders:o===bw.HEADER,sessionId:s?.view_session_id,contentId:s?.video_id}:void 0,y=CVe(t),x=new Ba({debug:r,startPosition:i,cmcd:g,xhrSetup:(w,E)=>{var T,C;if(o&&o!==bw.QUERY)return;let N=new URL(E);if(!N.searchParams.has("CMCD"))return;let I=((C=(T=N.searchParams.get("CMCD"))==null?void 0:T.split(","))!=null?C:[]).filter(U=>U.startsWith("sid")||U.startsWith("cid")).join(",");N.searchParams.set("CMCD",I),w.open("GET",N)},...f,...y,...A,...p,...c});return y.capLevelController===jO&&u!==void 0&&jO.setMaxAutoResolution(x,u),x.on(Ba.Events.MANIFEST_PARSED,async function(w,E){var T,C;let N=(T=E.sessionData)==null?void 0:T["com.apple.hls.chapters"];(N!=null&&N.URI||N!=null&&N.VALUE.toLocaleLowerCase().startsWith("http"))&&FF((C=N?.URI)!=null?C:N?.VALUE,e)}),x}},wVe=t=>t===Io.LIVE?{backBufferLength:8}:{},EVe=t=>{let{tokens:{drm:e}={},playbackId:r,drmTypeCb:n}=t,i=Q5(r);return!e||!i?{}:{emeEnabled:!0,drmSystems:{"com.apple.fps":{licenseUrl:mT(t,"fairplay"),serverCertificateUrl:$se(t,"fairplay")},"com.widevine.alpha":{licenseUrl:mT(t,"widevine")},"com.microsoft.playready":{licenseUrl:mT(t,"playready")}},requestMediaKeySystemAccessFunc:(s,o)=>(s==="com.widevine.alpha"&&(o=[...o.map(c=>{var u;let l=(u=c.videoCapabilities)==null?void 0:u.map(d=>({...d,robustness:"HW_SECURE_ALL"}));return{...c,videoCapabilities:l}}),...o]),navigator.requestMediaKeySystemAccess(s,o).then(c=>{let u=JQe(s);return n?.(u),c}))}},_Ve=async t=>{let e=await fetch(t);return e.status!==200?Promise.reject(e):await e.arrayBuffer()},SVe=async(t,e)=>{let r=await fetch(e,{method:"POST",headers:{"Content-type":"application/octet-stream"},body:t});if(r.status!==200)return Promise.reject(r);let n=await r.arrayBuffer();return new Uint8Array(n)},TVe=(t,e)=>{let r=async s=>{let o=await navigator.requestMediaKeySystemAccess("com.apple.fps",[{initDataTypes:[s],videoCapabilities:[{contentType:"application/vnd.apple.mpegurl",robustness:""}],distinctiveIdentifier:"not-allowed",persistentState:"not-allowed",sessionTypes:["temporary"]}]).then(u=>{var l;return(l=t.drmTypeCb)==null||l.call(t,AT.FAIRPLAY),u}).catch(()=>{let u=Ki("Cannot play DRM-protected content with current security configuration on this browser. Try playing in another browser."),l=new ii(u,ii.MEDIA_ERR_ENCRYPTED,!0);l.errorCategory=Sl.DRM,l.muxCode=ts.ENCRYPTED_UNSUPPORTED_KEY_SYSTEM,ff(e,l)});if(!o)return;let c=await o.createMediaKeys();try{let u=await _Ve($se(t,"fairplay")).catch(l=>{if(l instanceof Response){let d=rN(l,Sl.DRM,t);return console.error("mediaError",d?.message,d?.context),d?Promise.reject(d):Promise.reject(new Error("Unexpected error in app cert request"))}return Promise.reject(l)});await c.setServerCertificate(u).catch(()=>{let l=Ki("Your server certificate failed when attempting to set it. This may be an issue with a no longer valid certificate."),d=new ii(l,ii.MEDIA_ERR_ENCRYPTED,!0);return d.errorCategory=Sl.DRM,d.muxCode=ts.ENCRYPTED_UPDATE_SERVER_CERT_FAILED,Promise.reject(d)})}catch(u){ff(e,u);return}await e.setMediaKeys(c)},n=s=>{let o;if(s==="internal-error"){let c=Ki("The DRM Content Decryption Module system had an internal failure. Try reloading the page, upading your browser, or playing in another browser.");o=new ii(c,ii.MEDIA_ERR_ENCRYPTED,!0),o.errorCategory=Sl.DRM,o.muxCode=ts.ENCRYPTED_CDM_ERROR}else if(s==="output-restricted"||s==="output-downscaled"){let c=Ki("DRM playback is being attempted in an environment that is not sufficiently secure. User may see black screen.");o=new ii(c,ii.MEDIA_ERR_ENCRYPTED,!1),o.errorCategory=Sl.DRM,o.muxCode=ts.ENCRYPTED_OUTPUT_RESTRICTED}o&&ff(e,o)},i=async(s,o)=>{let c=e.mediaKeys.createSession(),u=()=>{c.keyStatuses.forEach(d=>n(d))},l=async d=>{let f=d.message;try{let A=await SVe(f,mT(t,"fairplay"));try{await c.update(A)}catch{let p=Ki("Failed to update DRM license. This may be an issue with the player or your protected content."),g=new ii(p,ii.MEDIA_ERR_ENCRYPTED,!0);g.errorCategory=Sl.DRM,g.muxCode=ts.ENCRYPTED_UPDATE_LICENSE_FAILED,ff(e,g)}}catch(A){if(A instanceof Response){let p=rN(A,Sl.DRM,t);if(console.error("mediaError",p?.message,p?.context),p){ff(e,p);return}console.error("Unexpected error in license key request",A);return}console.error(A)}};c.addEventListener("keystatuseschange",u),c.addEventListener("message",l),e.addEventListener("teardown",()=>{c.removeEventListener("keystatuseschange",u),c.removeEventListener("message",l),c.close()},{once:!0}),await c.generateRequest(s,o).catch(d=>{console.error("Failed to generate license request",d);let f=Ki("Failed to generate a DRM license request. This may be an issue with the player or your protected content."),A=new ii(f,ii.MEDIA_ERR_ENCRYPTED,!0);return A.errorCategory=Sl.DRM,A.muxCode=ts.ENCRYPTED_GENERATE_REQUEST_FAILED,Promise.reject(A)})};mu(e,"encrypted",async s=>{try{let o=s.initDataType;if(o!=="skd"){console.error(`Received unexpected initialization data type "${o}"`);return}e.mediaKeys||await r(o);let c=s.initData;if(c==null){console.error(`Could not start encrypted playback due to missing initData in ${s.type} event`);return}await i(o,c)}catch(o){ff(e,o);return}})},mT=({playbackId:t,tokens:{drm:e}={},customDomain:r=Qp},n)=>{let i=Q5(t);return`https://license.${r.toLocaleLowerCase().endsWith(Qp)?r:Qp}/license/${n}/${i}?token=${e}`},$se=({playbackId:t,tokens:{drm:e}={},customDomain:r=Qp},n)=>{let i=Q5(t);return`https://license.${r.toLocaleLowerCase().endsWith(Qp)?r:Qp}/appcert/${n}/${i}?token=${e}`},Hse=({playbackId:t,src:e,customDomain:r})=>{if(t)return!0;if(typeof e!="string")return!1;let n=window?.location.href,i=new URL(e,n).hostname.toLocaleLowerCase();return i.includes(Qp)||!!r&&i.includes(r.toLocaleLowerCase())},CVe=(t,e)=>{let r={};return r.capLevelToPlayerSize=t.capRenditionToPlayerSize,r.capLevelToPlayerSize==null?(r.capLevelController=jO,r.capLevelToPlayerSize=!0):r.capLevelController=F5,r},jVe=(t,e,r)=>{var n;let{envKey:i,disableTracking:s,muxDataSDK:o=uF,muxDataSDKOptions:c={}}=t,u=Hse(t);if(!s&&(i||u)){let{playerInitTime:l,playerSoftwareName:d,playerSoftwareVersion:f,beaconCollectionDomain:A,debug:p,disableCookies:g}=t,y={...t.metadata,video_title:((n=t?.metadata)==null?void 0:n.video_title)||void 0},x=w=>typeof w.player_error_code=="string"?!1:typeof t.errorTranslator=="function"?t.errorTranslator(w):w;o.monitor(e,{debug:p,beaconCollectionDomain:A,hlsjs:r,Hls:r?Ba:void 0,automaticErrorTracking:!1,errorTranslator:x,disableCookies:g,...c,data:{...i?{env_key:i}:{},player_software_name:d,player_software:d,player_software_version:f,player_init_time:l,...y}})}},NVe=(t,e,r)=>{var n,i;let s=Use(t,e),{src:o,customDomain:c=Qp}=t,u=()=>{e.ended||t.disablePseudoEnded||!Mse(e,r)||(Dse(e,r)?e.currentTime=e.buffered.end(e.buffered.length-1):e.dispatchEvent(new Event("ended")))},l,d,f=()=>{let A=HF(e),p,g;A.length>0&&(p=A.start(0),g=A.end(0)),(d!==g||l!==p)&&e.dispatchEvent(new CustomEvent("seekablechange",{composed:!0})),l=p,d=g};if(mu(e,"durationchange",f),e&&s){let A=H5(t);if(typeof o=="string"){if(o.endsWith(".mp4")&&o.includes(c)){let y=$F(o),x=new URL(`https://stream.${c}/${y}/metadata.json`);FF(x.toString(),e)}let p=()=>{if(kO(e)!==Io.LIVE||Number.isFinite(e.duration))return;let y=setInterval(f,1e3);e.addEventListener("teardown",()=>{clearInterval(y)},{once:!0}),mu(e,"durationchange",()=>{Number.isFinite(e.duration)&&clearInterval(y)})},g=async()=>aVe(o,e,A).then(p).catch(y=>{if(y instanceof Response){let x=rN(y,Sl.VIDEO,t);if(x){ff(e,x);return}}});if(e.preload==="none"){let y=()=>{g(),e.removeEventListener("loadedmetadata",x)},x=()=>{g(),e.removeEventListener("play",y)};mu(e,"play",y,{once:!0}),mu(e,"loadedmetadata",x,{once:!0})}else g();(n=t.tokens)!=null&&n.drm?TVe(t,e):mu(e,"encrypted",()=>{let y=Ki("Attempting to play DRM-protected content without providing a DRM token."),x=new ii(y,ii.MEDIA_ERR_ENCRYPTED,!0);x.errorCategory=Sl.DRM,x.muxCode=ts.ENCRYPTED_MISSING_TOKEN,ff(e,x)},{once:!0}),e.setAttribute("src",o),t.startTime&&(((i=Dc.get(e))!=null?i:{}).startTime=t.startTime,e.addEventListener("durationchange",Qse,{once:!0}))}else e.removeAttribute("src");e.addEventListener("error",Vse),e.addEventListener("error",IO),e.addEventListener("emptied",()=>{e.querySelectorAll("track[data-removeondestroy]").forEach(p=>{p.remove()})},{once:!0}),mu(e,"pause",u),mu(e,"seeked",u),mu(e,"play",()=>{e.ended||Rse(e.currentTime,e.duration)&&(e.currentTime=e.seekable.length?e.seekable.start(0):0)})}else r&&o?(r.once(Ba.Events.LEVEL_LOADED,(A,p)=>{lVe(p.details,e,r),f(),kO(e)===Io.LIVE&&!Number.isFinite(e.duration)&&(r.on(Ba.Events.LEVEL_UPDATED,f),mu(e,"durationchange",()=>{Number.isFinite(e.duration)&&r.off(Ba.Events.LEVELS_UPDATED,f)}))}),r.on(Ba.Events.ERROR,(A,p)=>{var g,y;let x=kVe(p,t);if(x.muxCode===ts.NETWORK_NOT_READY){let w=(g=Dc.get(e))!=null?g:{},E=(y=w.retryCount)!=null?y:0;if(E<6){let T=E===0?5e3:6e4,C=new ii(`Retrying in ${T/1e3} seconds...`,x.code,x.fatal);Object.assign(C,x),ff(e,C),setTimeout(()=>{w.retryCount=E+1,p.details==="manifestLoadError"&&p.url&&r.loadSource(p.url)},T);return}else{w.retryCount=0;let T=new ii('Try again later or <a href="#" onclick="window.location.reload(); return false;" style="color: #4a90e2;">click here to retry</a>',x.code,x.fatal);Object.assign(T,x),ff(e,T);return}}ff(e,x)}),r.on(Ba.Events.MANIFEST_LOADED,()=>{let A=Dc.get(e);A&&A.error&&(A.error=null,A.retryCount=0,e.dispatchEvent(new Event("emptied")),e.dispatchEvent(new Event("loadstart")))}),e.addEventListener("error",IO),mu(e,"waiting",u),FQe(t,r),UQe(e,r),r.attachMedia(e)):console.error("It looks like the video you're trying to play will not work on this system! If possible, try upgrading to the newest versions of your browser or software.")};function Qse(t){var e;let r=t.target,n=(e=Dc.get(r))==null?void 0:e.startTime;if(n&&CQe(r.seekable,r.duration,n)){let i=r.preload==="auto";i&&(r.preload="none"),r.currentTime=n,i&&(r.preload="auto")}}async function Vse(t){if(!t.isTrusted)return;t.stopImmediatePropagation();let e=t.target;if(!(e!=null&&e.error))return;let{message:r,code:n}=e.error,i=new ii(r,n);if(e.src&&n===ii.MEDIA_ERR_SRC_NOT_SUPPORTED&&e.readyState===HTMLMediaElement.HAVE_NOTHING){setTimeout(()=>{var s;let o=(s=Ose(e))!=null?s:e.error;o?.code===ii.MEDIA_ERR_SRC_NOT_SUPPORTED&&ff(e,i)},500);return}if(e.src&&(n!==ii.MEDIA_ERR_DECODE||n!==void 0))try{let{status:s}=await fetch(e.src);i.data={response:{code:s}}}catch{}ff(e,i)}function ff(t,e){var r;e.fatal&&(((r=Dc.get(t))!=null?r:{}).error=e,t.dispatchEvent(new CustomEvent("error",{detail:e})))}function IO(t){var e,r;if(!(t instanceof CustomEvent)||!(t.detail instanceof ii))return;let n=t.target,i=t.detail;!i||!i.fatal||(((e=Dc.get(n))!=null?e:{}).error=i,(r=n.mux)==null||r.emit("error",{player_error_code:i.code,player_error_message:i.message,player_error_context:i.context}))}var kVe=(t,e)=>{var r,n,i;t.fatal?console.error("getErrorFromHlsErrorData()",t):e.debug&&console.warn("getErrorFromHlsErrorData() (non-fatal)",t);let s={[Ba.ErrorTypes.NETWORK_ERROR]:ii.MEDIA_ERR_NETWORK,[Ba.ErrorTypes.MEDIA_ERROR]:ii.MEDIA_ERR_DECODE,[Ba.ErrorTypes.KEY_SYSTEM_ERROR]:ii.MEDIA_ERR_ENCRYPTED},o=d=>[Ba.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,Ba.ErrorDetails.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED].includes(d.details)?ii.MEDIA_ERR_NETWORK:s[d.type],c=d=>{if(d.type===Ba.ErrorTypes.KEY_SYSTEM_ERROR)return Sl.DRM;if(d.type===Ba.ErrorTypes.NETWORK_ERROR)return Sl.VIDEO},u,l=o(t);if(l===ii.MEDIA_ERR_NETWORK&&t.response){let d=(r=c(t))!=null?r:Sl.VIDEO;u=(n=rN(t.response,d,e,t.fatal))!=null?n:new ii("",l,t.fatal)}else if(l===ii.MEDIA_ERR_ENCRYPTED)if(t.details===Ba.ErrorDetails.KEY_SYSTEM_NO_CONFIGURED_LICENSE){let d=Ki("Attempting to play DRM-protected content without providing a DRM token.");u=new ii(d,ii.MEDIA_ERR_ENCRYPTED,t.fatal),u.errorCategory=Sl.DRM,u.muxCode=ts.ENCRYPTED_MISSING_TOKEN}else if(t.details===Ba.ErrorDetails.KEY_SYSTEM_NO_ACCESS){let d=Ki("Cannot play DRM-protected content with current security configuration on this browser. Try playing in another browser.");u=new ii(d,ii.MEDIA_ERR_ENCRYPTED,t.fatal),u.errorCategory=Sl.DRM,u.muxCode=ts.ENCRYPTED_UNSUPPORTED_KEY_SYSTEM}else if(t.details===Ba.ErrorDetails.KEY_SYSTEM_NO_SESSION){let d=Ki("Failed to generate a DRM license request. This may be an issue with the player or your protected content.");u=new ii(d,ii.MEDIA_ERR_ENCRYPTED,!0),u.errorCategory=Sl.DRM,u.muxCode=ts.ENCRYPTED_GENERATE_REQUEST_FAILED}else if(t.details===Ba.ErrorDetails.KEY_SYSTEM_SESSION_UPDATE_FAILED){let d=Ki("Failed to update DRM license. This may be an issue with the player or your protected content.");u=new ii(d,ii.MEDIA_ERR_ENCRYPTED,t.fatal),u.errorCategory=Sl.DRM,u.muxCode=ts.ENCRYPTED_UPDATE_LICENSE_FAILED}else if(t.details===Ba.ErrorDetails.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED){let d=Ki("Your server certificate failed when attempting to set it. This may be an issue with a no longer valid certificate.");u=new ii(d,ii.MEDIA_ERR_ENCRYPTED,t.fatal),u.errorCategory=Sl.DRM,u.muxCode=ts.ENCRYPTED_UPDATE_SERVER_CERT_FAILED}else if(t.details===Ba.ErrorDetails.KEY_SYSTEM_STATUS_INTERNAL_ERROR){let d=Ki("The DRM Content Decryption Module system had an internal failure. Try reloading the page, upading your browser, or playing in another browser.");u=new ii(d,ii.MEDIA_ERR_ENCRYPTED,t.fatal),u.errorCategory=Sl.DRM,u.muxCode=ts.ENCRYPTED_CDM_ERROR}else if(t.details===Ba.ErrorDetails.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED){let d=Ki("DRM playback is being attempted in an environment that is not sufficiently secure. User may see black screen.");u=new ii(d,ii.MEDIA_ERR_ENCRYPTED,!1),u.errorCategory=Sl.DRM,u.muxCode=ts.ENCRYPTED_OUTPUT_RESTRICTED}else u=new ii(t.error.message,ii.MEDIA_ERR_ENCRYPTED,t.fatal),u.errorCategory=Sl.DRM,u.muxCode=ts.ENCRYPTED_ERROR;else u=new ii("",l,t.fatal);return u.context||(u.context=`${t.url?`url: ${t.url}
`:""}${t.response&&(t.response.code||t.response.text)?`response: ${t.response.code}, ${t.response.text}
`:""}${t.reason?`failure reason: ${t.reason}
`:""}${t.level?`level: ${t.level}
`:""}${t.parent?`parent stream controller: ${t.parent}
`:""}${t.buffer?`buffer length: ${t.buffer}
`:""}${t.error?`error: ${t.error}
`:""}${t.event?`event: ${t.event}
`:""}${t.err?`error message: ${(i=t.err)==null?void 0:i.message}
`:""}`),u.data=t,u};const IVe=["abort","canplay","canplaythrough","durationchange","emptied","encrypted","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting","waitingforkey","resize","enterpictureinpicture","leavepictureinpicture","webkitbeginfullscreen","webkitendfullscreen","webkitpresentationmodechanged"],zse=["autopictureinpicture","disablepictureinpicture","disableremoteplayback","autoplay","controls","controlslist","crossorigin","loop","muted","playsinline","poster","preload","src"];function LVe(t){return`
    <style>
      :host {
        display: inline-flex;
        line-height: 0;
        flex-direction: column;
        justify-content: end;
      }

      audio {
        width: 100%;
      }
    </style>
    <slot name="media">
      <audio${Gse(t)}></audio>
    </slot>
    <slot></slot>
  `}function BVe(t){return`
    <style>
      :host {
        display: inline-block;
        line-height: 0;
      }

      video {
        max-width: 100%;
        max-height: 100%;
        min-width: 100%;
        min-height: 100%;
        object-fit: var(--media-object-fit, contain);
        object-position: var(--media-object-position, 50% 50%);
      }

      video::-webkit-media-text-track-container {
        transform: var(--media-webkit-text-track-transform);
        transition: var(--media-webkit-text-track-transition);
      }
    </style>
    <slot name="media">
      <video${Gse(t)}></video>
    </slot>
    <slot></slot>
  `}function Kse(t,{tag:e,is:r}){const n=globalThis.document?.createElement?.(e,{is:r}),i=n?PVe(n):[];return class LO extends t{static getTemplateHTML=e.endsWith("audio")?LVe:BVe;static shadowRootOptions={mode:"open"};static Events=IVe;static#e=!1;static get observedAttributes(){return LO.#n(),[...n?.constructor?.observedAttributes??[],...zse]}static#n(){if(this.#e)return;this.#e=!0;const o=new Set(this.observedAttributes);o.delete("muted");for(const c of i)if(!(c in this.prototype))if(typeof n[c]=="function")this.prototype[c]=function(...u){return this.#s(),this.call?this.call(c,...u):this.nativeEl?.[c]?.apply(this.nativeEl,u)};else{const u={get(){this.#s();const l=c.toLowerCase();if(o.has(l)){const d=this.getAttribute(l);return d===null?!1:d===""?!0:d}return this.get?.(c)??this.nativeEl?.[c]}};c!==c.toUpperCase()&&(u.set=function(l){this.#s();const d=c.toLowerCase();if(o.has(d)){l===!0||l===!1||l==null?this.toggleAttribute(d,!!l):this.setAttribute(d,l);return}if(this.set){this.set(c,l);return}this.nativeEl&&(this.nativeEl[c]=l)}),Object.defineProperty(this.prototype,c,u)}}#r=!1;#i=null;#t=new Map;#a;get;set;call;get nativeEl(){return this.#s(),this.#i??this.querySelector(":scope > [slot=media]")??this.querySelector(e)??this.shadowRoot?.querySelector(e)??null}set nativeEl(o){this.#i=o}get defaultMuted(){return this.hasAttribute("muted")}set defaultMuted(o){this.toggleAttribute("muted",o)}get src(){return this.getAttribute("src")}set src(o){this.setAttribute("src",`${o}`)}get preload(){return this.getAttribute("preload")??this.nativeEl?.preload}set preload(o){this.setAttribute("preload",`${o}`)}#s(){this.#r||(this.#r=!0,this.init())}init(){if(!this.shadowRoot){this.attachShadow({mode:"open"});const o=OVe(this.attributes);r&&(o.is=r),e&&(o.part=e),this.shadowRoot.innerHTML=this.constructor.getTemplateHTML(o)}this.nativeEl.muted=this.hasAttribute("muted");for(const o of i)this.#d(o);this.#a=new MutationObserver(this.#o.bind(this)),this.shadowRoot.addEventListener("slotchange",()=>this.#l()),this.#l();for(const o of this.constructor.Events)this.shadowRoot.addEventListener(o,this,!0)}handleEvent(o){o.target===this.nativeEl&&this.dispatchEvent(new CustomEvent(o.type,{detail:o.detail}))}#l(){const o=new Map(this.#t);(this.shadowRoot?.querySelector("slot:not([name])")?.assignedElements({flatten:!0}).filter(l=>["track","source"].includes(l.localName))).forEach(l=>{o.delete(l);let d=this.#t.get(l);d||(d=l.cloneNode(),this.#t.set(l,d),this.#a?.observe(l,{attributes:!0})),this.nativeEl?.append(d),this.#c(d)}),o.forEach((l,d)=>{l.remove(),this.#t.delete(d)})}#o(o){for(const c of o)if(c.type==="attributes"){const{target:u,attributeName:l}=c,d=this.#t.get(u);d&&l&&(d.setAttribute(l,u.getAttribute(l)??""),this.#c(d))}}#c(o){o&&o.localName==="track"&&o.default&&(o.kind==="chapters"||o.kind==="metadata")&&o.track.mode==="disabled"&&(o.track.mode="hidden")}#d(o){if(Object.prototype.hasOwnProperty.call(this,o)){const c=this[o];delete this[o],this[o]=c}}attributeChangedCallback(o,c,u){this.#s(),this.#u(o,c,u)}#u(o,c,u){["id","class"].includes(o)||!LO.observedAttributes.includes(o)&&this.constructor.observedAttributes.includes(o)||(u===null?this.nativeEl?.removeAttribute(o):this.nativeEl?.getAttribute(o)!==u&&this.nativeEl?.setAttribute(o,u))}connectedCallback(){this.#s()}}}function PVe(t){const e=[];for(let r=Object.getPrototypeOf(t);r&&r!==HTMLElement.prototype;r=Object.getPrototypeOf(r)){const n=Object.getOwnPropertyNames(r);e.push(...n)}return e}function Gse(t){let e="";for(const r in t){if(!zse.includes(r))continue;const n=t[r];n===""?e+=` ${r}`:e+=` ${r}="${n}"`}return e}function OVe(t){const e={};for(const r of t)e[r.name]=r.value;return e}const SS=Kse(globalThis.HTMLElement??class{},{tag:"video"});Kse(globalThis.HTMLElement??class{},{tag:"audio"});var Wse=t=>{throw TypeError(t)},VF=(t,e,r)=>e.has(t)||Wse("Cannot "+r),ad=(t,e,r)=>(VF(t,e,"read from private field"),r?r.call(t):e.get(t)),Rf=(t,e,r)=>e.has(t)?Wse("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),af=(t,e,r,n)=>(VF(t,e,"write to private field"),e.set(t,r),r),TS=(t,e,r)=>(VF(t,e,"access private method"),r),RVe=()=>{try{return"0.30.2"}catch{}return"UNKNOWN"},DVe=RVe(),MVe=()=>DVe,FVe=`
<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" part="logo" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2" viewBox="0 0 1600 500"><g fill="#fff"><path d="M994.287 93.486c-17.121 0-31-13.879-31-31 0-17.121 13.879-31 31-31 17.121 0 31 13.879 31 31 0 17.121-13.879 31-31 31m0-93.486c-34.509 0-62.484 27.976-62.484 62.486v187.511c0 68.943-56.09 125.033-125.032 125.033s-125.03-56.09-125.03-125.033V62.486C681.741 27.976 653.765 0 619.256 0s-62.484 27.976-62.484 62.486v187.511C556.772 387.85 668.921 500 806.771 500c137.851 0 250.001-112.15 250.001-250.003V62.486c0-34.51-27.976-62.486-62.485-62.486M1537.51 468.511c-17.121 0-31-13.879-31-31 0-17.121 13.879-31 31-31 17.121 0 31 13.879 31 31 0 17.121-13.879 31-31 31m-275.883-218.509-143.33 143.329c-24.402 24.402-24.402 63.966 0 88.368 24.402 24.402 63.967 24.402 88.369 0l143.33-143.329 143.328 143.329c24.402 24.4 63.967 24.402 88.369 0 24.403-24.402 24.403-63.966.001-88.368l-143.33-143.329.001-.004 143.329-143.329c24.402-24.402 24.402-63.965 0-88.367s-63.967-24.402-88.369 0L1349.996 161.63 1206.667 18.302c-24.402-24.401-63.967-24.402-88.369 0s-24.402 63.965 0 88.367l143.329 143.329v.004ZM437.511 468.521c-17.121 0-31-13.879-31-31 0-17.121 13.879-31 31-31 17.121 0 31 13.879 31 31 0 17.121-13.879 31-31 31M461.426 4.759C438.078-4.913 411.2.432 393.33 18.303L249.999 161.632 106.669 18.303C88.798.432 61.922-4.913 38.573 4.759 15.224 14.43-.001 37.214-.001 62.488v375.026c0 34.51 27.977 62.486 62.487 62.486 34.51 0 62.486-27.976 62.486-62.486V213.341l80.843 80.844c24.404 24.402 63.965 24.402 88.369 0l80.843-80.844v224.173c0 34.51 27.976 62.486 62.486 62.486s62.486-27.976 62.486-62.486V62.488c0-25.274-15.224-48.058-38.573-57.729" style="fill-rule:nonzero"/></g></svg>`,ur={BEACON_COLLECTION_DOMAIN:"beacon-collection-domain",CUSTOM_DOMAIN:"custom-domain",DEBUG:"debug",DISABLE_TRACKING:"disable-tracking",DISABLE_COOKIES:"disable-cookies",DISABLE_PSEUDO_ENDED:"disable-pseudo-ended",DRM_TOKEN:"drm-token",PLAYBACK_TOKEN:"playback-token",ENV_KEY:"env-key",MAX_RESOLUTION:"max-resolution",MIN_RESOLUTION:"min-resolution",MAX_AUTO_RESOLUTION:"max-auto-resolution",RENDITION_ORDER:"rendition-order",PROGRAM_START_TIME:"program-start-time",PROGRAM_END_TIME:"program-end-time",ASSET_START_TIME:"asset-start-time",ASSET_END_TIME:"asset-end-time",METADATA_URL:"metadata-url",PLAYBACK_ID:"playback-id",PLAYER_SOFTWARE_NAME:"player-software-name",PLAYER_SOFTWARE_VERSION:"player-software-version",PLAYER_INIT_TIME:"player-init-time",PREFER_CMCD:"prefer-cmcd",PREFER_PLAYBACK:"prefer-playback",START_TIME:"start-time",STREAM_TYPE:"stream-type",TARGET_LIVE_WINDOW:"target-live-window",LIVE_EDGE_OFFSET:"live-edge-offset",TYPE:"type",LOGO:"logo",CAP_RENDITION_TO_PLAYER_SIZE:"cap-rendition-to-player-size"},UVe=Object.values(ur),IG=MVe(),LG="mux-video",mm,Ew,pT,_w,gT,vT,yT,xT,bT,Sw,wT,Ex,Tw,$Ve=class extends SS{constructor(){super(),Rf(this,Ex),Rf(this,mm),Rf(this,Ew),Rf(this,pT),Rf(this,_w,{}),Rf(this,gT,{}),Rf(this,vT),Rf(this,yT),Rf(this,xT),Rf(this,bT),Rf(this,Sw,""),Rf(this,wT),af(this,pT,UF()),this.nativeEl.addEventListener("muxmetadata",e=>{var r;let n=mVe(this.nativeEl),i=(r=this.metadata)!=null?r:{};this.metadata={...n,...i},n?.["com.mux.video.branding"]==="mux-free-plan"&&(af(this,Sw,"default"),this.updateLogo())})}static get NAME(){return LG}static get VERSION(){return IG}static get observedAttributes(){var e;return[...UVe,...(e=SS.observedAttributes)!=null?e:[]]}static getLogoHTML(e){return!e||e==="false"?"":e==="default"?FVe:`<img part="logo" src="${e}" />`}static getTemplateHTML(e={}){var r;return`
      ${SS.getTemplateHTML(e)}
      <style>
        :host {
          position: relative;
        }
        slot[name="logo"] {
          display: flex;
          justify-content: end;
          position: absolute;
          top: 1rem;
          right: 1rem;
          opacity: 0;
          transition: opacity 0.25s ease-in-out;
          z-index: 1;
        }
        slot[name="logo"]:has([part="logo"]) {
          opacity: 1;
        }
        slot[name="logo"] [part="logo"] {
          width: 5rem;
          pointer-events: none;
          user-select: none;
        }
      </style>
      <slot name="logo">
        ${this.getLogoHTML((r=e[ur.LOGO])!=null?r:"")}
      </slot>
    `}get preferCmcd(){var e;return(e=this.getAttribute(ur.PREFER_CMCD))!=null?e:void 0}set preferCmcd(e){e!==this.preferCmcd&&(e?tN.includes(e)?this.setAttribute(ur.PREFER_CMCD,e):console.warn(`Invalid value for preferCmcd. Must be one of ${tN.join()}`):this.removeAttribute(ur.PREFER_CMCD))}get playerInitTime(){return this.hasAttribute(ur.PLAYER_INIT_TIME)?+this.getAttribute(ur.PLAYER_INIT_TIME):ad(this,pT)}set playerInitTime(e){e!=this.playerInitTime&&(e==null?this.removeAttribute(ur.PLAYER_INIT_TIME):this.setAttribute(ur.PLAYER_INIT_TIME,`${+e}`))}get playerSoftwareName(){var e;return(e=ad(this,xT))!=null?e:LG}set playerSoftwareName(e){af(this,xT,e)}get playerSoftwareVersion(){var e;return(e=ad(this,yT))!=null?e:IG}set playerSoftwareVersion(e){af(this,yT,e)}get _hls(){var e;return(e=ad(this,mm))==null?void 0:e.engine}get mux(){var e;return(e=this.nativeEl)==null?void 0:e.mux}get error(){var e;return(e=Ose(this.nativeEl))!=null?e:null}get errorTranslator(){return ad(this,bT)}set errorTranslator(e){af(this,bT,e)}get src(){return this.getAttribute("src")}set src(e){e!==this.src&&(e==null?this.removeAttribute("src"):this.setAttribute("src",e))}get type(){var e;return(e=this.getAttribute(ur.TYPE))!=null?e:void 0}set type(e){e!==this.type&&(e?this.setAttribute(ur.TYPE,e):this.removeAttribute(ur.TYPE))}get preload(){let e=this.getAttribute("preload");return e===""?"auto":["none","metadata","auto"].includes(e)?e:super.preload}set preload(e){e!=this.getAttribute("preload")&&(["","none","metadata","auto"].includes(e)?this.setAttribute("preload",e):this.removeAttribute("preload"))}get debug(){return this.getAttribute(ur.DEBUG)!=null}set debug(e){e!==this.debug&&(e?this.setAttribute(ur.DEBUG,""):this.removeAttribute(ur.DEBUG))}get disableTracking(){return this.hasAttribute(ur.DISABLE_TRACKING)}set disableTracking(e){e!==this.disableTracking&&this.toggleAttribute(ur.DISABLE_TRACKING,!!e)}get disableCookies(){return this.hasAttribute(ur.DISABLE_COOKIES)}set disableCookies(e){e!==this.disableCookies&&(e?this.setAttribute(ur.DISABLE_COOKIES,""):this.removeAttribute(ur.DISABLE_COOKIES))}get disablePseudoEnded(){return this.hasAttribute(ur.DISABLE_PSEUDO_ENDED)}set disablePseudoEnded(e){e!==this.disablePseudoEnded&&(e?this.setAttribute(ur.DISABLE_PSEUDO_ENDED,""):this.removeAttribute(ur.DISABLE_PSEUDO_ENDED))}get startTime(){let e=this.getAttribute(ur.START_TIME);if(e==null)return;let r=+e;return Number.isNaN(r)?void 0:r}set startTime(e){e!==this.startTime&&(e==null?this.removeAttribute(ur.START_TIME):this.setAttribute(ur.START_TIME,`${e}`))}get playbackId(){var e;return this.hasAttribute(ur.PLAYBACK_ID)?this.getAttribute(ur.PLAYBACK_ID):(e=$F(this.src))!=null?e:void 0}set playbackId(e){e!==this.playbackId&&(e?this.setAttribute(ur.PLAYBACK_ID,e):this.removeAttribute(ur.PLAYBACK_ID))}get maxResolution(){var e;return(e=this.getAttribute(ur.MAX_RESOLUTION))!=null?e:void 0}set maxResolution(e){e!==this.maxResolution&&(e?this.setAttribute(ur.MAX_RESOLUTION,e):this.removeAttribute(ur.MAX_RESOLUTION))}get minResolution(){var e;return(e=this.getAttribute(ur.MIN_RESOLUTION))!=null?e:void 0}set minResolution(e){e!==this.minResolution&&(e?this.setAttribute(ur.MIN_RESOLUTION,e):this.removeAttribute(ur.MIN_RESOLUTION))}get maxAutoResolution(){var e;return(e=this.getAttribute(ur.MAX_AUTO_RESOLUTION))!=null?e:void 0}set maxAutoResolution(e){e==null?this.removeAttribute(ur.MAX_AUTO_RESOLUTION):this.setAttribute(ur.MAX_AUTO_RESOLUTION,e)}get renditionOrder(){var e;return(e=this.getAttribute(ur.RENDITION_ORDER))!=null?e:void 0}set renditionOrder(e){e!==this.renditionOrder&&(e?this.setAttribute(ur.RENDITION_ORDER,e):this.removeAttribute(ur.RENDITION_ORDER))}get programStartTime(){let e=this.getAttribute(ur.PROGRAM_START_TIME);if(e==null)return;let r=+e;return Number.isNaN(r)?void 0:r}set programStartTime(e){e==null?this.removeAttribute(ur.PROGRAM_START_TIME):this.setAttribute(ur.PROGRAM_START_TIME,`${e}`)}get programEndTime(){let e=this.getAttribute(ur.PROGRAM_END_TIME);if(e==null)return;let r=+e;return Number.isNaN(r)?void 0:r}set programEndTime(e){e==null?this.removeAttribute(ur.PROGRAM_END_TIME):this.setAttribute(ur.PROGRAM_END_TIME,`${e}`)}get assetStartTime(){let e=this.getAttribute(ur.ASSET_START_TIME);if(e==null)return;let r=+e;return Number.isNaN(r)?void 0:r}set assetStartTime(e){e==null?this.removeAttribute(ur.ASSET_START_TIME):this.setAttribute(ur.ASSET_START_TIME,`${e}`)}get assetEndTime(){let e=this.getAttribute(ur.ASSET_END_TIME);if(e==null)return;let r=+e;return Number.isNaN(r)?void 0:r}set assetEndTime(e){e==null?this.removeAttribute(ur.ASSET_END_TIME):this.setAttribute(ur.ASSET_END_TIME,`${e}`)}get customDomain(){var e;return(e=this.getAttribute(ur.CUSTOM_DOMAIN))!=null?e:void 0}set customDomain(e){e!==this.customDomain&&(e?this.setAttribute(ur.CUSTOM_DOMAIN,e):this.removeAttribute(ur.CUSTOM_DOMAIN))}get capRenditionToPlayerSize(){var e;return((e=this._hlsConfig)==null?void 0:e.capLevelToPlayerSize)!=null?this._hlsConfig.capLevelToPlayerSize:ad(this,wT)}set capRenditionToPlayerSize(e){af(this,wT,e)}get drmToken(){var e;return(e=this.getAttribute(ur.DRM_TOKEN))!=null?e:void 0}set drmToken(e){e!==this.drmToken&&(e?this.setAttribute(ur.DRM_TOKEN,e):this.removeAttribute(ur.DRM_TOKEN))}get playbackToken(){var e,r,n,i;if(this.hasAttribute(ur.PLAYBACK_TOKEN))return(e=this.getAttribute(ur.PLAYBACK_TOKEN))!=null?e:void 0;if(this.hasAttribute(ur.PLAYBACK_ID)){let[,s]=OF((r=this.playbackId)!=null?r:"");return(n=new URLSearchParams(s).get("token"))!=null?n:void 0}if(this.src)return(i=new URLSearchParams(this.src).get("token"))!=null?i:void 0}set playbackToken(e){e!==this.playbackToken&&(e?this.setAttribute(ur.PLAYBACK_TOKEN,e):this.removeAttribute(ur.PLAYBACK_TOKEN))}get tokens(){let e=this.getAttribute(ur.PLAYBACK_TOKEN),r=this.getAttribute(ur.DRM_TOKEN);return{...ad(this,gT),...e!=null?{playback:e}:{},...r!=null?{drm:r}:{}}}set tokens(e){af(this,gT,e??{})}get ended(){return Mse(this.nativeEl,this._hls)}get envKey(){var e;return(e=this.getAttribute(ur.ENV_KEY))!=null?e:void 0}set envKey(e){e!==this.envKey&&(e?this.setAttribute(ur.ENV_KEY,e):this.removeAttribute(ur.ENV_KEY))}get beaconCollectionDomain(){var e;return(e=this.getAttribute(ur.BEACON_COLLECTION_DOMAIN))!=null?e:void 0}set beaconCollectionDomain(e){e!==this.beaconCollectionDomain&&(e?this.setAttribute(ur.BEACON_COLLECTION_DOMAIN,e):this.removeAttribute(ur.BEACON_COLLECTION_DOMAIN))}get streamType(){var e;return(e=this.getAttribute(ur.STREAM_TYPE))!=null?e:kO(this.nativeEl)}set streamType(e){e!==this.streamType&&(e?this.setAttribute(ur.STREAM_TYPE,e):this.removeAttribute(ur.STREAM_TYPE))}get targetLiveWindow(){return this.hasAttribute(ur.TARGET_LIVE_WINDOW)?+this.getAttribute(ur.TARGET_LIVE_WINDOW):pVe(this.nativeEl)}set targetLiveWindow(e){e!=this.targetLiveWindow&&(e==null?this.removeAttribute(ur.TARGET_LIVE_WINDOW):this.setAttribute(ur.TARGET_LIVE_WINDOW,`${+e}`))}get liveEdgeStart(){var e,r;if(this.hasAttribute(ur.LIVE_EDGE_OFFSET)){let{liveEdgeOffset:n}=this,i=(e=this.nativeEl.seekable.end(0))!=null?e:0,s=(r=this.nativeEl.seekable.start(0))!=null?r:0;return Math.max(s,i-n)}return gVe(this.nativeEl)}get liveEdgeOffset(){if(this.hasAttribute(ur.LIVE_EDGE_OFFSET))return+this.getAttribute(ur.LIVE_EDGE_OFFSET)}set liveEdgeOffset(e){e!=this.liveEdgeOffset&&(e==null?this.removeAttribute(ur.LIVE_EDGE_OFFSET):this.setAttribute(ur.LIVE_EDGE_OFFSET,`${+e}`))}get seekable(){return HF(this.nativeEl)}async addCuePoints(e){return jse(this.nativeEl,e)}get activeCuePoint(){return Nse(this.nativeEl)}get cuePoints(){return HQe(this.nativeEl)}async addChapters(e){return Ise(this.nativeEl,e)}get activeChapter(){return Lse(this.nativeEl)}get chapters(){return VQe(this.nativeEl)}getStartDate(){return KQe(this.nativeEl,this._hls)}get currentPdt(){return GQe(this.nativeEl,this._hls)}get preferPlayback(){let e=this.getAttribute(ur.PREFER_PLAYBACK);if(e===Dm.MSE||e===Dm.NATIVE)return e}set preferPlayback(e){e!==this.preferPlayback&&(e===Dm.MSE||e===Dm.NATIVE?this.setAttribute(ur.PREFER_PLAYBACK,e):this.removeAttribute(ur.PREFER_PLAYBACK))}get metadata(){return{...this.getAttributeNames().filter(e=>e.startsWith("metadata-")&&![ur.METADATA_URL].includes(e)).reduce((e,r)=>{let n=this.getAttribute(r);return n!=null&&(e[r.replace(/^metadata-/,"").replace(/-/g,"_")]=n),e},{}),...ad(this,_w)}}set metadata(e){af(this,_w,e??{}),this.mux&&this.mux.emit("hb",ad(this,_w))}get _hlsConfig(){return ad(this,vT)}set _hlsConfig(e){af(this,vT,e)}get logo(){var e;return(e=this.getAttribute(ur.LOGO))!=null?e:ad(this,Sw)}set logo(e){e?this.setAttribute(ur.LOGO,e):this.removeAttribute(ur.LOGO)}load(){af(this,mm,xVe(this,this.nativeEl,ad(this,mm)))}unload(){Fse(this.nativeEl,ad(this,mm),this),af(this,mm,void 0)}attributeChangedCallback(e,r,n){var i,s;switch(SS.observedAttributes.includes(e)&&!["src","autoplay","preload"].includes(e)&&super.attributeChangedCallback(e,r,n),e){case ur.PLAYER_SOFTWARE_NAME:this.playerSoftwareName=n??void 0;break;case ur.PLAYER_SOFTWARE_VERSION:this.playerSoftwareVersion=n??void 0;break;case"src":{let o=!!r,c=!!n;!o&&c?TS(this,Ex,Tw).call(this):o&&!c?this.unload():o&&c&&(this.unload(),TS(this,Ex,Tw).call(this));break}case"autoplay":if(n===r)break;(i=ad(this,mm))==null||i.setAutoplay(this.autoplay);break;case"preload":if(n===r)break;(s=ad(this,mm))==null||s.setPreload(n);break;case ur.PLAYBACK_ID:this.src=NO(this);break;case ur.DEBUG:{let o=this.debug;this.mux&&console.info("Cannot toggle debug mode of mux data after initialization. Make sure you set all metadata to override before setting the src."),this._hls&&(this._hls.config.debug=o);break}case ur.METADATA_URL:n&&fetch(n).then(o=>o.json()).then(o=>this.metadata=o).catch(()=>console.error(`Unable to load or parse metadata JSON from metadata-url ${n}!`));break;case ur.STREAM_TYPE:(n==null||n!==r)&&this.dispatchEvent(new CustomEvent("streamtypechange",{composed:!0,bubbles:!0}));break;case ur.TARGET_LIVE_WINDOW:(n==null||n!==r)&&this.dispatchEvent(new CustomEvent("targetlivewindowchange",{composed:!0,bubbles:!0,detail:this.targetLiveWindow}));break;case ur.LOGO:(n==null||n!==r)&&this.updateLogo();break;case ur.DISABLE_TRACKING:{if(n==null||n!==r){let o=this.currentTime,c=this.paused;this.unload(),TS(this,Ex,Tw).call(this).then(()=>{this.currentTime=o,c||this.play()})}break}case ur.DISABLE_COOKIES:{(n==null||n!==r)&&this.disableCookies&&document.cookie.split(";").forEach(o=>{o.trim().startsWith("muxData")&&(document.cookie=o.replace(/^ +/,"").replace(/=.*/,"=;expires="+new Date().toUTCString()+";path=/"))});break}case ur.CAP_RENDITION_TO_PLAYER_SIZE:(n==null||n!==r)&&(this.capRenditionToPlayerSize=n!=null?!0:void 0)}}updateLogo(){if(!this.shadowRoot)return;let e=this.shadowRoot.querySelector('slot[name="logo"]');if(!e)return;let r=this.constructor.getLogoHTML(ad(this,Sw)||this.logo);e.innerHTML=r}connectedCallback(){var e;(e=super.connectedCallback)==null||e.call(this),this.nativeEl&&this.src&&!ad(this,mm)&&TS(this,Ex,Tw).call(this)}disconnectedCallback(){this.unload()}handleEvent(e){e.target===this.nativeEl&&this.dispatchEvent(new CustomEvent(e.type,{composed:!0,detail:e.detail}))}};mm=new WeakMap,Ew=new WeakMap,pT=new WeakMap,_w=new WeakMap,gT=new WeakMap,vT=new WeakMap,yT=new WeakMap,xT=new WeakMap,bT=new WeakMap,Sw=new WeakMap,wT=new WeakMap,Ex=new WeakSet,Tw=async function(){ad(this,Ew)||(await af(this,Ew,Promise.resolve()),af(this,Ew,null),this.load())};const Zv=new WeakMap;class H4 extends Error{}class HVe extends Error{}const QVe=["application/x-mpegURL","application/vnd.apple.mpegurl","audio/mpegurl"],VVe=globalThis.WeakRef?class extends Set{add(t){super.add(new WeakRef(t))}forEach(t){super.forEach(e=>{const r=e.deref();r&&t(r)})}}:Set;function zVe(t){globalThis.chrome?.cast?.isAvailable?globalThis.cast?.framework?t():customElements.whenDefined("google-cast-button").then(t):globalThis.__onGCastApiAvailable=()=>{customElements.whenDefined("google-cast-button").then(t)}}function KVe(){return globalThis.chrome}function GVe(){const t="https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1";if(globalThis.chrome?.cast||document.querySelector(`script[src="${t}"]`))return;const e=document.createElement("script");e.src=t,document.head.append(e)}function w0(){return globalThis.cast?.framework?.CastContext.getInstance()}function zF(){return w0()?.getCurrentSession()}function KF(){return zF()?.getSessionObj().media[0]}function WVe(t){return new Promise((e,r)=>{KF().editTracksInfo(t,e,r)})}function YVe(t){return new Promise((e,r)=>{KF().getStatus(t,e,r)})}function BG(t){return w0().setOptions({...Yse(),...t})}function Yse(){return{receiverApplicationId:"CC1AD845",autoJoinPolicy:"origin_scoped",androidReceiverCompatible:!1,language:"en-US",resumeSavedSession:!0}}function qVe(t){if(!t)return;const e=/\.([a-zA-Z0-9]+)(?:\?.*)?$/,r=t.match(e);return r?r[1]:null}function XVe(t){const e=t.split(`
`),r=[];for(let n=0;n<e.length;n++)if(e[n].trim().startsWith("#EXT-X-STREAM-INF")){const s=e[n+1]?e[n+1].trim():"";s&&!s.startsWith("#")&&r.push(s)}return r}function ZVe(t){return t.split(`
`).find(n=>!n.trim().startsWith("#")&&n.trim()!=="")}async function JVe(t){try{const r=(await fetch(t,{method:"HEAD"})).headers.get("Content-Type");return QVe.some(n=>r===n)}catch(e){return console.error("Error while trying to get the Content-Type of the manifest",e),!1}}async function eze(t){try{const e=await(await fetch(t)).text();let r=e;const n=XVe(e);if(n.length>0){const o=new URL(n[0],t).toString();r=await(await fetch(o)).text()}const i=ZVe(r);return qVe(i)}catch(e){console.error("Error while trying to parse the manifest playlist",e);return}}const ET=new VVe,Kg=new WeakSet;let Pu;zVe(()=>{if(!globalThis.chrome?.cast?.isAvailable){console.debug("chrome.cast.isAvailable",globalThis.chrome?.cast?.isAvailable);return}Pu||(Pu=cast.framework,w0().addEventListener(Pu.CastContextEventType.CAST_STATE_CHANGED,t=>{ET.forEach(e=>Zv.get(e).onCastStateChanged?.(t))}),w0().addEventListener(Pu.CastContextEventType.SESSION_STATE_CHANGED,t=>{ET.forEach(e=>Zv.get(e).onSessionStateChanged?.(t))}),ET.forEach(t=>Zv.get(t).init?.()))});let PG=0;class tze extends EventTarget{#e;#n;#r;#i;#t="disconnected";#a=!1;#s=new Set;#l=new WeakMap;constructor(e){super(),this.#e=e,ET.add(this),Zv.set(this,{init:()=>this.#h(),onCastStateChanged:()=>this.#u(),onSessionStateChanged:()=>this.#A(),getCastPlayer:()=>this.#o}),this.#h()}get#o(){if(Kg.has(this.#e))return this.#r}get state(){return this.#t}async watchAvailability(e){if(this.#e.disableRemotePlayback)throw new H4("disableRemotePlayback attribute is present.");return this.#l.set(e,++PG),this.#s.add(e),queueMicrotask(()=>e(this.#d())),PG}async cancelWatchAvailability(e){if(this.#e.disableRemotePlayback)throw new H4("disableRemotePlayback attribute is present.");e?this.#s.delete(e):this.#s.clear()}async prompt(){if(this.#e.disableRemotePlayback)throw new H4("disableRemotePlayback attribute is present.");if(!globalThis.chrome?.cast?.isAvailable)throw new HVe("The RemotePlayback API is disabled on this platform.");const e=Kg.has(this.#e);Kg.add(this.#e),BG(this.#e.castOptions),Object.entries(this.#i).forEach(([r,n])=>{this.#r.controller.addEventListener(r,n)});try{await w0().requestSession()}catch(r){if(e||Kg.delete(this.#e),r==="cancel")return;throw new Error(r)}Zv.get(this.#e)?.loadOnPrompt?.()}#c(){Kg.has(this.#e)&&(Object.entries(this.#i).forEach(([e,r])=>{this.#r.controller.removeEventListener(e,r)}),Kg.delete(this.#e),this.#e.muted=this.#r.isMuted,this.#e.currentTime=this.#r.savedPlayerState.currentTime,this.#r.savedPlayerState.isPaused===!1&&this.#e.play())}#d(){const e=w0()?.getCastState();return e&&e!=="NO_DEVICES_AVAILABLE"}#u(){const e=w0().getCastState();if(Kg.has(this.#e)&&e==="CONNECTING"&&(this.#t="connecting",this.dispatchEvent(new Event("connecting"))),!this.#a&&e?.includes("CONNECT")){this.#a=!0;for(let r of this.#s)r(!0)}else if(this.#a&&(!e||e==="NO_DEVICES_AVAILABLE")){this.#a=!1;for(let r of this.#s)r(!1)}}async#A(){const{SESSION_RESUMED:e}=Pu.SessionState;if(w0().getSessionState()===e&&this.#e.castSrc===KF()?.media.contentId){Kg.add(this.#e),Object.entries(this.#i).forEach(([r,n])=>{this.#r.controller.addEventListener(r,n)});try{await YVe(new chrome.cast.media.GetStatusRequest)}catch(r){console.error(r)}this.#i[Pu.RemotePlayerEventType.IS_PAUSED_CHANGED](),this.#i[Pu.RemotePlayerEventType.PLAYER_STATE_CHANGED]()}}#h(){!Pu||this.#n||(this.#n=!0,BG(this.#e.castOptions),this.#e.textTracks.addEventListener("change",()=>this.#f()),this.#u(),this.#r=new Pu.RemotePlayer,new Pu.RemotePlayerController(this.#r),this.#i={[Pu.RemotePlayerEventType.IS_CONNECTED_CHANGED]:({value:e})=>{e===!0?(this.#t="connected",this.dispatchEvent(new Event("connect"))):(this.#c(),this.#t="disconnected",this.dispatchEvent(new Event("disconnect")))},[Pu.RemotePlayerEventType.DURATION_CHANGED]:()=>{this.#e.dispatchEvent(new Event("durationchange"))},[Pu.RemotePlayerEventType.VOLUME_LEVEL_CHANGED]:()=>{this.#e.dispatchEvent(new Event("volumechange"))},[Pu.RemotePlayerEventType.IS_MUTED_CHANGED]:()=>{this.#e.dispatchEvent(new Event("volumechange"))},[Pu.RemotePlayerEventType.CURRENT_TIME_CHANGED]:()=>{this.#o?.isMediaLoaded&&this.#e.dispatchEvent(new Event("timeupdate"))},[Pu.RemotePlayerEventType.VIDEO_INFO_CHANGED]:()=>{this.#e.dispatchEvent(new Event("resize"))},[Pu.RemotePlayerEventType.IS_PAUSED_CHANGED]:()=>{this.#e.dispatchEvent(new Event(this.paused?"pause":"play"))},[Pu.RemotePlayerEventType.PLAYER_STATE_CHANGED]:()=>{this.#o?.playerState!==chrome.cast.media.PlayerState.PAUSED&&this.#e.dispatchEvent(new Event({[chrome.cast.media.PlayerState.PLAYING]:"playing",[chrome.cast.media.PlayerState.BUFFERING]:"waiting",[chrome.cast.media.PlayerState.IDLE]:"emptied"}[this.#o?.playerState]))},[Pu.RemotePlayerEventType.IS_MEDIA_LOADED_CHANGED]:async()=>{this.#o?.isMediaLoaded&&(await Promise.resolve(),this.#m())}})}#m(){this.#f()}async#f(){if(!this.#o)return;const r=(this.#r.mediaInfo?.tracks??[]).filter(({type:f})=>f===chrome.cast.media.TrackType.TEXT),n=[...this.#e.textTracks].filter(({kind:f})=>f==="subtitles"||f==="captions"),i=r.map(({language:f,name:A,trackId:p})=>{const{mode:g}=n.find(y=>y.language===f&&y.label===A)??{};return g?{mode:g,trackId:p}:!1}).filter(Boolean),o=i.filter(({mode:f})=>f!=="showing").map(({trackId:f})=>f),c=i.find(({mode:f})=>f==="showing"),u=zF()?.getSessionObj().media[0]?.activeTrackIds??[];let l=u;if(u.length&&(l=l.filter(f=>!o.includes(f))),c?.trackId&&(l=[...l,c.trackId]),l=[...new Set(l)],!((f,A)=>f.length===A.length&&f.every(p=>A.includes(p)))(u,l))try{const f=new chrome.cast.media.EditTracksInfoRequest(l);await WVe(f)}catch(f){console.error(f)}}}const rze=t=>class extends t{static observedAttributes=[...t.observedAttributes??[],"cast-src","cast-content-type","cast-stream-type","cast-receiver"];#e={paused:!1};#n=Yse();#r;#i;get remote(){return this.#i?this.#i:KVe()?(this.disableRemotePlayback||GVe(),Zv.set(this,{loadOnPrompt:()=>this.#a()}),this.#i=new tze(this)):super.remote}get#t(){return Zv.get(this.remote)?.getCastPlayer?.()}attributeChangedCallback(r,n,i){if(super.attributeChangedCallback(r,n,i),r==="cast-receiver"&&i){this.#n.receiverApplicationId=i;return}if(this.#t)switch(r){case"cast-stream-type":case"cast-src":this.load();break}}async#a(){this.#e.paused=super.paused,super.pause(),this.muted=super.muted;try{await this.load()}catch(r){console.error(r)}}async load(){if(!this.#t)return super.load();const r=new chrome.cast.media.MediaInfo(this.castSrc,this.castContentType);r.customData=this.castCustomData;const n=[...this.querySelectorAll("track")].filter(({kind:c,src:u})=>u&&(c==="subtitles"||c==="captions")),i=[];let s=0;if(n.length&&(r.tracks=n.map(c=>{const u=++s;i.length===0&&c.track.mode==="showing"&&i.push(u);const l=new chrome.cast.media.Track(u,chrome.cast.media.TrackType.TEXT);return l.trackContentId=c.src,l.trackContentType="text/vtt",l.subtype=c.kind==="captions"?chrome.cast.media.TextTrackType.CAPTIONS:chrome.cast.media.TextTrackType.SUBTITLES,l.name=c.label,l.language=c.srclang,l})),this.castStreamType==="live"?r.streamType=chrome.cast.media.StreamType.LIVE:r.streamType=chrome.cast.media.StreamType.BUFFERED,r.metadata=new chrome.cast.media.GenericMediaMetadata,r.metadata.title=this.title,r.metadata.images=[{url:this.poster}],JVe(this.castSrc)){const c=await eze(this.castSrc);c?.includes("m4s")||c?.includes("mp4")?(r.hlsSegmentFormat=chrome.cast.media.HlsSegmentFormat.FMP4,r.hlsVideoSegmentFormat=chrome.cast.media.HlsVideoSegmentFormat.FMP4):c?.includes("ts")&&(r.hlsSegmentFormat=chrome.cast.media.HlsSegmentFormat.TS,r.hlsVideoSegmentFormat=chrome.cast.media.HlsVideoSegmentFormat.TS)}const o=new chrome.cast.media.LoadRequest(r);o.currentTime=super.currentTime??0,o.autoplay=!this.#e.paused,o.activeTrackIds=i,await zF()?.loadMedia(o),this.dispatchEvent(new Event("volumechange"))}play(){if(this.#t){this.#t.isPaused&&this.#t.controller?.playOrPause();return}return super.play()}pause(){if(this.#t){this.#t.isPaused||this.#t.controller?.playOrPause();return}super.pause()}get castOptions(){return this.#n}get castReceiver(){return this.getAttribute("cast-receiver")??void 0}set castReceiver(r){this.castReceiver!=r&&this.setAttribute("cast-receiver",`${r}`)}get castSrc(){return this.getAttribute("cast-src")??this.querySelector("source")?.src??this.currentSrc}set castSrc(r){this.castSrc!=r&&this.setAttribute("cast-src",`${r}`)}get castContentType(){return this.getAttribute("cast-content-type")??void 0}set castContentType(r){this.setAttribute("cast-content-type",`${r}`)}get castStreamType(){return this.getAttribute("cast-stream-type")??this.streamType??void 0}set castStreamType(r){this.setAttribute("cast-stream-type",`${r}`)}get castCustomData(){return this.#r}set castCustomData(r){const n=typeof r;if(!["object","undefined"].includes(n)){console.error(`castCustomData must be nullish or an object but value was of type ${n}`);return}this.#r=r}get readyState(){if(this.#t)switch(this.#t.playerState){case chrome.cast.media.PlayerState.IDLE:return 0;case chrome.cast.media.PlayerState.BUFFERING:return 2;default:return 3}return super.readyState}get paused(){return this.#t?this.#t.isPaused:super.paused}get muted(){return this.#t?this.#t?.isMuted:super.muted}set muted(r){if(this.#t){(r&&!this.#t.isMuted||!r&&this.#t.isMuted)&&this.#t.controller?.muteOrUnmute();return}super.muted=r}get volume(){return this.#t?this.#t?.volumeLevel??1:super.volume}set volume(r){if(this.#t){this.#t.volumeLevel=+r,this.#t.controller?.setVolumeLevel();return}super.volume=r}get duration(){return this.#t&&this.#t?.isMediaLoaded?this.#t?.duration??NaN:super.duration}get currentTime(){return this.#t&&this.#t?.isMediaLoaded?this.#t?.currentTime??0:super.currentTime}set currentTime(r){if(this.#t){this.#t.currentTime=r,this.#t.controller?.seek();return}super.currentTime=r}};class V5 extends Event{track;constructor(e,r){super(e),this.track=r.track}}const BO=new WeakMap;function Ai(t){return BO.get(t)??nze(t,{})}function nze(t,e){let r=BO.get(t);return r||BO.set(t,r={}),Object.assign(r,e)}function PO(t,e){const r=t.videoTracks;Ai(e).media=t,Ai(e).renditionSet||(Ai(e).renditionSet=new Set);const n=Ai(r).trackSet;n.add(e);const i=n.size-1;i in RO.prototype||Object.defineProperty(RO.prototype,i,{get(){return[...Ai(this).trackSet][i]}}),queueMicrotask(()=>{r.dispatchEvent(new V5("addtrack",{track:e}))})}function OO(t){const e=Ai(t).media?.videoTracks;if(!e)return;Ai(e).trackSet.delete(t),queueMicrotask(()=>{e.dispatchEvent(new V5("removetrack",{track:t}))})}function ize(t){const e=Ai(t).media.videoTracks??[];let r=!1;for(const n of e)n!==t&&(n.selected=!1,r=!0);if(r){if(Ai(e).changeRequested)return;Ai(e).changeRequested=!0,queueMicrotask(()=>{delete Ai(e).changeRequested,e.dispatchEvent(new Event("change"))})}}class RO extends EventTarget{#e;#n;#r;constructor(){super(),Ai(this).trackSet=new Set}get#i(){return Ai(this).trackSet}[Symbol.iterator](){return this.#i.values()}get length(){return this.#i.size}getTrackById(e){return[...this.#i].find(r=>r.id===e)??null}get selectedIndex(){return[...this.#i].findIndex(e=>e.selected)}get onaddtrack(){return this.#e}set onaddtrack(e){this.#e&&(this.removeEventListener("addtrack",this.#e),this.#e=void 0),typeof e=="function"&&(this.#e=e,this.addEventListener("addtrack",e))}get onremovetrack(){return this.#n}set onremovetrack(e){this.#n&&(this.removeEventListener("removetrack",this.#n),this.#n=void 0),typeof e=="function"&&(this.#n=e,this.addEventListener("removetrack",e))}get onchange(){return this.#r}set onchange(e){this.#r&&(this.removeEventListener("change",this.#r),this.#r=void 0),typeof e=="function"&&(this.#r=e,this.addEventListener("change",e))}}class z5 extends Event{rendition;constructor(e,r){super(e),this.rendition=r.rendition}}function sze(t,e){const r=Ai(t).media.videoRenditions;Ai(e).media=Ai(t).media,Ai(e).track=t;const n=Ai(t).renditionSet;n.add(e);const i=n.size-1;i in DO.prototype||Object.defineProperty(DO.prototype,i,{get(){return _x(this)[i]}}),queueMicrotask(()=>{t.selected&&r.dispatchEvent(new z5("addrendition",{rendition:e}))})}function aze(t){const e=Ai(t).media.videoRenditions,r=Ai(t).track;Ai(r).renditionSet.delete(t),queueMicrotask(()=>{Ai(t).track.selected&&e.dispatchEvent(new z5("removerendition",{rendition:t}))})}function oze(t){const e=Ai(t).media.videoRenditions;!e||Ai(e).changeRequested||(Ai(e).changeRequested=!0,queueMicrotask(()=>{delete Ai(e).changeRequested,Ai(t).track.selected&&e.dispatchEvent(new Event("change"))}))}function _x(t){return[...Ai(t).media.videoTracks].filter(r=>r.selected).flatMap(r=>[...Ai(r).renditionSet])}class DO extends EventTarget{#e;#n;#r;[Symbol.iterator](){return _x(this).values()}get length(){return _x(this).length}getRenditionById(e){return _x(this).find(r=>`${r.id}`==`${e}`)??null}get selectedIndex(){return _x(this).findIndex(e=>e.selected)}set selectedIndex(e){for(const[r,n]of _x(this).entries())n.selected=r===e}get onaddrendition(){return this.#e}set onaddrendition(e){this.#e&&(this.removeEventListener("addrendition",this.#e),this.#e=void 0),typeof e=="function"&&(this.#e=e,this.addEventListener("addrendition",e))}get onremoverendition(){return this.#n}set onremoverendition(e){this.#n&&(this.removeEventListener("removerendition",this.#n),this.#n=void 0),typeof e=="function"&&(this.#n=e,this.addEventListener("removerendition",e))}get onchange(){return this.#r}set onchange(e){this.#r&&(this.removeEventListener("change",this.#r),this.#r=void 0),typeof e=="function"&&(this.#r=e,this.addEventListener("change",e))}}class lze{src;id;width;height;bitrate;frameRate;codec;#e=!1;get selected(){return this.#e}set selected(e){this.#e!==e&&(this.#e=e,oze(this))}}class qse{id;kind;label="";language="";sourceBuffer;#e=!1;addRendition(e,r,n,i,s,o){const c=new lze;return c.src=e,c.width=r,c.height=n,c.frameRate=o,c.bitrate=s,c.codec=i,sze(this,c),c}removeRendition(e){aze(e)}get selected(){return this.#e}set selected(e){this.#e!==e&&(this.#e=e,e===!0&&ize(this))}}function cze(t,e){const r=Ai(t).media.audioRenditions;Ai(e).media=Ai(t).media,Ai(e).track=t;const n=Ai(t).renditionSet;n.add(e);const i=n.size-1;i in MO.prototype||Object.defineProperty(MO.prototype,i,{get(){return Sx(this)[i]}}),queueMicrotask(()=>{t.enabled&&r.dispatchEvent(new z5("addrendition",{rendition:e}))})}function uze(t){const e=Ai(t).media.audioRenditions,r=Ai(t).track;Ai(r).renditionSet.delete(t),queueMicrotask(()=>{Ai(t).track.enabled&&e.dispatchEvent(new z5("removerendition",{rendition:t}))})}function dze(t){const e=Ai(t).media.audioRenditions;!e||Ai(e).changeRequested||(Ai(e).changeRequested=!0,queueMicrotask(()=>{delete Ai(e).changeRequested,Ai(t).track.enabled&&e.dispatchEvent(new Event("change"))}))}function Sx(t){return[...Ai(t).media.audioTracks].filter(r=>r.enabled).flatMap(r=>[...Ai(r).renditionSet])}class MO extends EventTarget{#e;#n;#r;[Symbol.iterator](){return Sx(this).values()}get length(){return Sx(this).length}getRenditionById(e){return Sx(this).find(r=>`${r.id}`==`${e}`)??null}get selectedIndex(){return Sx(this).findIndex(e=>e.selected)}set selectedIndex(e){for(const[r,n]of Sx(this).entries())n.selected=r===e}get onaddrendition(){return this.#e}set onaddrendition(e){this.#e&&(this.removeEventListener("addrendition",this.#e),this.#e=void 0),typeof e=="function"&&(this.#e=e,this.addEventListener("addrendition",e))}get onremoverendition(){return this.#n}set onremoverendition(e){this.#n&&(this.removeEventListener("removerendition",this.#n),this.#n=void 0),typeof e=="function"&&(this.#n=e,this.addEventListener("removerendition",e))}get onchange(){return this.#r}set onchange(e){this.#r&&(this.removeEventListener("change",this.#r),this.#r=void 0),typeof e=="function"&&(this.#r=e,this.addEventListener("change",e))}}class hze{src;id;bitrate;codec;#e=!1;get selected(){return this.#e}set selected(e){this.#e!==e&&(this.#e=e,dze(this))}}function FO(t,e){const r=t.audioTracks;Ai(e).media=t,Ai(e).renditionSet||(Ai(e).renditionSet=new Set);const n=Ai(r).trackSet;n.add(e);const i=n.size-1;i in $O.prototype||Object.defineProperty($O.prototype,i,{get(){return[...Ai(this).trackSet][i]}}),queueMicrotask(()=>{r.dispatchEvent(new V5("addtrack",{track:e}))})}function UO(t){const e=Ai(t).media?.audioTracks;if(!e)return;Ai(e).trackSet.delete(t),queueMicrotask(()=>{e.dispatchEvent(new V5("removetrack",{track:t}))})}function fze(t){const e=Ai(t).media.audioTracks;!e||Ai(e).changeRequested||(Ai(e).changeRequested=!0,queueMicrotask(()=>{delete Ai(e).changeRequested,e.dispatchEvent(new Event("change"))}))}class $O extends EventTarget{#e;#n;#r;constructor(){super(),Ai(this).trackSet=new Set}get#i(){return Ai(this).trackSet}[Symbol.iterator](){return this.#i.values()}get length(){return this.#i.size}getTrackById(e){return[...this.#i].find(r=>r.id===e)??null}get onaddtrack(){return this.#e}set onaddtrack(e){this.#e&&(this.removeEventListener("addtrack",this.#e),this.#e=void 0),typeof e=="function"&&(this.#e=e,this.addEventListener("addtrack",e))}get onremovetrack(){return this.#n}set onremovetrack(e){this.#n&&(this.removeEventListener("removetrack",this.#n),this.#n=void 0),typeof e=="function"&&(this.#n=e,this.addEventListener("removetrack",e))}get onchange(){return this.#r}set onchange(e){this.#r&&(this.removeEventListener("change",this.#r),this.#r=void 0),typeof e=="function"&&(this.#r=e,this.addEventListener("change",e))}}class Xse{id;kind;label="";language="";sourceBuffer;#e=!1;addRendition(e,r,n){const i=new hze;return i.src=e,i.codec=r,i.bitrate=n,cze(this,i),i}removeRendition(e){uze(e)}get enabled(){return this.#e}set enabled(e){this.#e!==e&&(this.#e=e,fze(this))}}const OG=nN(globalThis.HTMLMediaElement,"video"),RG=nN(globalThis.HTMLMediaElement,"audio");function Aze(t){if(!t?.prototype)return t;const e=nN(t,"video");(!e||`${e}`.includes("[native code]"))&&Object.defineProperty(t.prototype,"videoTracks",{get(){return mze(this)}});const r=nN(t,"audio");(!r||`${r}`.includes("[native code]"))&&Object.defineProperty(t.prototype,"audioTracks",{get(){return pze(this)}}),"addVideoTrack"in t.prototype||(t.prototype.addVideoTrack=function(s,o="",c=""){const u=new qse;return u.kind=s,u.label=o,u.language=c,PO(this,u),u}),"removeVideoTrack"in t.prototype||(t.prototype.removeVideoTrack=OO),"addAudioTrack"in t.prototype||(t.prototype.addAudioTrack=function(s,o="",c=""){const u=new Xse;return u.kind=s,u.label=o,u.language=c,FO(this,u),u}),"removeAudioTrack"in t.prototype||(t.prototype.removeAudioTrack=UO),"videoRenditions"in t.prototype||Object.defineProperty(t.prototype,"videoRenditions",{get(){return n(this)}});const n=s=>{let o=Ai(s).videoRenditions;return o||(o=new DO,Ai(o).media=s,Ai(s).videoRenditions=o),o};"audioRenditions"in t.prototype||Object.defineProperty(t.prototype,"audioRenditions",{get(){return i(this)}});const i=s=>{let o=Ai(s).audioRenditions;return o||(o=new MO,Ai(o).media=s,Ai(s).audioRenditions=o),o};return t}function nN(t,e){if(t?.prototype)return Object.getOwnPropertyDescriptor(t.prototype,`${e}Tracks`)?.get}function mze(t){let e=Ai(t).videoTracks;if(!e&&(e=new RO,Ai(t).videoTracks=e,OG)){const r=OG.call(t.nativeEl??t);for(const n of r)PO(t,n);r.addEventListener("change",()=>{e.dispatchEvent(new Event("change"))}),r.addEventListener("addtrack",n=>{if([...e].some(i=>i instanceof qse)){for(const i of r)OO(i);return}PO(t,n.track)}),r.addEventListener("removetrack",n=>{OO(n.track)})}return e}function pze(t){let e=Ai(t).audioTracks;if(!e&&(e=new $O,Ai(t).audioTracks=e,RG)){const r=RG.call(t.nativeEl??t);for(const n of r)FO(t,n);r.addEventListener("change",()=>{e.dispatchEvent(new Event("change"))}),r.addEventListener("addtrack",n=>{if([...e].some(i=>i instanceof Xse)){for(const i of r)UO(i);return}FO(t,n.track)}),r.addEventListener("removetrack",n=>{UO(n.track)})}return e}var Zse=t=>{throw TypeError(t)},Jse=(t,e,r)=>e.has(t)||Zse("Cannot "+r),gze=(t,e,r)=>(Jse(t,e,"read from private field"),r?r.call(t):e.get(t)),vze=(t,e,r)=>e.has(t)?Zse("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),yze=(t,e,r,n)=>(Jse(t,e,"write to private field"),e.set(t,r),r),eae=class{addEventListener(){}removeEventListener(){}dispatchEvent(e){return!0}};if(typeof DocumentFragment>"u"){class t extends eae{}globalThis.DocumentFragment=t}var xze=class extends eae{},bze={get(t){},define(t,e,r){},getName(t){return null},upgrade(t){},whenDefined(t){return Promise.resolve(xze)}},wze={customElements:bze},Eze=typeof window>"u"||typeof globalThis.customElements>"u",Q4=Eze?wze:globalThis,_T,DG=class extends rze(Aze($Ve)){constructor(){super(...arguments),vze(this,_T)}get autoplay(){let t=this.getAttribute("autoplay");return t===null?!1:t===""?!0:t}set autoplay(t){let e=this.autoplay;t!==e&&(t?this.setAttribute("autoplay",typeof t=="string"?t:""):this.removeAttribute("autoplay"))}get muxCastCustomData(){return{mux:{playbackId:this.playbackId,minResolution:this.minResolution,maxResolution:this.maxResolution,renditionOrder:this.renditionOrder,customDomain:this.customDomain,tokens:{drm:this.drmToken},envKey:this.envKey,metadata:this.metadata,disableCookies:this.disableCookies,disableTracking:this.disableTracking,beaconCollectionDomain:this.beaconCollectionDomain,startTime:this.startTime,preferCmcd:this.preferCmcd}}}get castCustomData(){var t;return(t=gze(this,_T))!=null?t:this.muxCastCustomData}set castCustomData(t){yze(this,_T,t)}};_T=new WeakMap;Q4.customElements.get("mux-video")||(Q4.customElements.define("mux-video",DG),Q4.MuxVideoElement=DG);const zn={MEDIA_PLAY_REQUEST:"mediaplayrequest",MEDIA_PAUSE_REQUEST:"mediapauserequest",MEDIA_MUTE_REQUEST:"mediamuterequest",MEDIA_UNMUTE_REQUEST:"mediaunmuterequest",MEDIA_LOOP_REQUEST:"medialooprequest",MEDIA_VOLUME_REQUEST:"mediavolumerequest",MEDIA_SEEK_REQUEST:"mediaseekrequest",MEDIA_AIRPLAY_REQUEST:"mediaairplayrequest",MEDIA_ENTER_FULLSCREEN_REQUEST:"mediaenterfullscreenrequest",MEDIA_EXIT_FULLSCREEN_REQUEST:"mediaexitfullscreenrequest",MEDIA_PREVIEW_REQUEST:"mediapreviewrequest",MEDIA_ENTER_PIP_REQUEST:"mediaenterpiprequest",MEDIA_EXIT_PIP_REQUEST:"mediaexitpiprequest",MEDIA_ENTER_CAST_REQUEST:"mediaentercastrequest",MEDIA_EXIT_CAST_REQUEST:"mediaexitcastrequest",MEDIA_SHOW_TEXT_TRACKS_REQUEST:"mediashowtexttracksrequest",MEDIA_HIDE_TEXT_TRACKS_REQUEST:"mediahidetexttracksrequest",MEDIA_SHOW_SUBTITLES_REQUEST:"mediashowsubtitlesrequest",MEDIA_DISABLE_SUBTITLES_REQUEST:"mediadisablesubtitlesrequest",MEDIA_TOGGLE_SUBTITLES_REQUEST:"mediatogglesubtitlesrequest",MEDIA_PLAYBACK_RATE_REQUEST:"mediaplaybackraterequest",MEDIA_RENDITION_REQUEST:"mediarenditionrequest",MEDIA_AUDIO_TRACK_REQUEST:"mediaaudiotrackrequest",MEDIA_SEEK_TO_LIVE_REQUEST:"mediaseektoliverequest",REGISTER_MEDIA_STATE_RECEIVER:"registermediastatereceiver",UNREGISTER_MEDIA_STATE_RECEIVER:"unregistermediastatereceiver"},Ao={MEDIA_CHROME_ATTRIBUTES:"mediachromeattributes",MEDIA_CONTROLLER:"mediacontroller"},tae={MEDIA_AIRPLAY_UNAVAILABLE:"mediaAirplayUnavailable",MEDIA_AUDIO_TRACK_ENABLED:"mediaAudioTrackEnabled",MEDIA_AUDIO_TRACK_LIST:"mediaAudioTrackList",MEDIA_AUDIO_TRACK_UNAVAILABLE:"mediaAudioTrackUnavailable",MEDIA_BUFFERED:"mediaBuffered",MEDIA_CAST_UNAVAILABLE:"mediaCastUnavailable",MEDIA_CHAPTERS_CUES:"mediaChaptersCues",MEDIA_CURRENT_TIME:"mediaCurrentTime",MEDIA_DURATION:"mediaDuration",MEDIA_ENDED:"mediaEnded",MEDIA_ERROR:"mediaError",MEDIA_ERROR_CODE:"mediaErrorCode",MEDIA_ERROR_MESSAGE:"mediaErrorMessage",MEDIA_FULLSCREEN_UNAVAILABLE:"mediaFullscreenUnavailable",MEDIA_HAS_PLAYED:"mediaHasPlayed",MEDIA_HEIGHT:"mediaHeight",MEDIA_IS_AIRPLAYING:"mediaIsAirplaying",MEDIA_IS_CASTING:"mediaIsCasting",MEDIA_IS_FULLSCREEN:"mediaIsFullscreen",MEDIA_IS_PIP:"mediaIsPip",MEDIA_LOADING:"mediaLoading",MEDIA_MUTED:"mediaMuted",MEDIA_LOOP:"mediaLoop",MEDIA_PAUSED:"mediaPaused",MEDIA_PIP_UNAVAILABLE:"mediaPipUnavailable",MEDIA_PLAYBACK_RATE:"mediaPlaybackRate",MEDIA_PREVIEW_CHAPTER:"mediaPreviewChapter",MEDIA_PREVIEW_COORDS:"mediaPreviewCoords",MEDIA_PREVIEW_IMAGE:"mediaPreviewImage",MEDIA_PREVIEW_TIME:"mediaPreviewTime",MEDIA_RENDITION_LIST:"mediaRenditionList",MEDIA_RENDITION_SELECTED:"mediaRenditionSelected",MEDIA_RENDITION_UNAVAILABLE:"mediaRenditionUnavailable",MEDIA_SEEKABLE:"mediaSeekable",MEDIA_STREAM_TYPE:"mediaStreamType",MEDIA_SUBTITLES_LIST:"mediaSubtitlesList",MEDIA_SUBTITLES_SHOWING:"mediaSubtitlesShowing",MEDIA_TARGET_LIVE_WINDOW:"mediaTargetLiveWindow",MEDIA_TIME_IS_LIVE:"mediaTimeIsLive",MEDIA_VOLUME:"mediaVolume",MEDIA_VOLUME_LEVEL:"mediaVolumeLevel",MEDIA_VOLUME_UNAVAILABLE:"mediaVolumeUnavailable",MEDIA_LANG:"mediaLang",MEDIA_WIDTH:"mediaWidth"},rae=Object.entries(tae),At=rae.reduce((t,[e,r])=>(t[e]=r.toLowerCase(),t),{}),_ze={USER_INACTIVE_CHANGE:"userinactivechange",BREAKPOINTS_CHANGE:"breakpointchange",BREAKPOINTS_COMPUTED:"breakpointscomputed"},ng=rae.reduce((t,[e,r])=>(t[e]=r.toLowerCase(),t),{..._ze});Object.entries(ng).reduce((t,[e,r])=>{const n=At[e];return n&&(t[r]=n),t},{userinactivechange:"userinactive"});const Sze=Object.entries(At).reduce((t,[e,r])=>{const n=ng[e];return n&&(t[r]=n),t},{userinactive:"userinactivechange"}),Hm={SUBTITLES:"subtitles",CAPTIONS:"captions",CHAPTERS:"chapters",METADATA:"metadata"},yb={DISABLED:"disabled",SHOWING:"showing"},V4={MOUSE:"mouse",PEN:"pen",TOUCH:"touch"},ef={UNAVAILABLE:"unavailable",UNSUPPORTED:"unsupported"},Ip={LIVE:"live",ON_DEMAND:"on-demand",UNKNOWN:"unknown"},Tze={FULLSCREEN:"fullscreen"};function Cze(t){return t?.map(Nze).join(" ")}function jze(t){return t?.split(/\s+/).map(kze)}function Nze(t){if(t){const{id:e,width:r,height:n}=t;return[e,r,n].filter(i=>i!=null).join(":")}}function kze(t){if(t){const[e,r,n]=t.split(":");return{id:e,width:+r,height:+n}}}function Ize(t){return t?.map(Bze).join(" ")}function Lze(t){return t?.split(/\s+/).map(Pze)}function Bze(t){if(t){const{id:e,kind:r,language:n,label:i}=t;return[e,r,n,i].filter(s=>s!=null).join(":")}}function Pze(t){if(t){const[e,r,n,i]=t.split(":");return{id:e,kind:r,language:n,label:i}}}function Oze(t){return t.replace(/[-_]([a-z])/g,(e,r)=>r.toUpperCase())}function GF(t){return typeof t=="number"&&!Number.isNaN(t)&&Number.isFinite(t)}function nae(t){return typeof t!="string"?!1:!isNaN(t)&&!isNaN(parseFloat(t))}const iae=t=>new Promise(e=>setTimeout(e,t)),MG=[{singular:"hour",plural:"hours"},{singular:"minute",plural:"minutes"},{singular:"second",plural:"seconds"}],Rze=(t,e)=>{const r=t===1?MG[e].singular:MG[e].plural;return`${t} ${r}`},cE=t=>{if(!GF(t))return"";const e=Math.abs(t),r=e!==t,n=new Date(0,0,0,0,0,e,0);return`${[n.getHours(),n.getMinutes(),n.getSeconds()].map((c,u)=>c&&Rze(c,u)).filter(c=>c).join(", ")}${r?" remaining":""}`};function N0(t,e){let r=!1;t<0&&(r=!0,t=0-t),t=t<0?0:t;let n=Math.floor(t%60),i=Math.floor(t/60%60),s=Math.floor(t/3600);const o=Math.floor(e/60%60),c=Math.floor(e/3600);return(isNaN(t)||t===1/0)&&(s=i=n="0"),s=s>0||c>0?s+":":"",i=((s||o>=10)&&i<10?"0"+i:i)+":",n=n<10?"0"+n:n,(r?"-":"")+s+i+n}const Dze={"Start airplay":"Start airplay","Stop airplay":"Stop airplay",Audio:"Audio",Captions:"Captions","Enable captions":"Enable captions","Disable captions":"Disable captions","Start casting":"Start casting","Stop casting":"Stop casting","Enter fullscreen mode":"Enter fullscreen mode","Exit fullscreen mode":"Exit fullscreen mode",Mute:"Mute",Unmute:"Unmute",Loop:"Loop","Enter picture in picture mode":"Enter picture in picture mode","Exit picture in picture mode":"Exit picture in picture mode",Play:"Play",Pause:"Pause","Playback rate":"Playback rate","Playback rate {playbackRate}":"Playback rate {playbackRate}",Quality:"Quality","Seek backward":"Seek backward","Seek forward":"Seek forward",Settings:"Settings",Auto:"Auto","audio player":"audio player","video player":"video player",volume:"volume",seek:"seek","closed captions":"closed captions","current playback rate":"current playback rate","playback time":"playback time","media loading":"media loading",settings:"settings","audio tracks":"audio tracks",quality:"quality",play:"play",pause:"pause",mute:"mute",unmute:"unmute","chapter: {chapterName}":"chapter: {chapterName}",live:"live",Off:"Off","start airplay":"start airplay","stop airplay":"stop airplay","start casting":"start casting","stop casting":"stop casting","enter fullscreen mode":"enter fullscreen mode","exit fullscreen mode":"exit fullscreen mode","enter picture in picture mode":"enter picture in picture mode","exit picture in picture mode":"exit picture in picture mode","seek to live":"seek to live","playing live":"playing live","seek back {seekOffset} seconds":"seek back {seekOffset} seconds","seek forward {seekOffset} seconds":"seek forward {seekOffset} seconds","Network Error":"Network Error","Decode Error":"Decode Error","Source Not Supported":"Source Not Supported","Encryption Error":"Encryption Error","A network error caused the media download to fail.":"A network error caused the media download to fail.","A media error caused playback to be aborted. The media could be corrupt or your browser does not support this format.":"A media error caused playback to be aborted. The media could be corrupt or your browser does not support this format.","An unsupported error occurred. The server or network failed, or your browser does not support this format.":"An unsupported error occurred. The server or network failed, or your browser does not support this format.","The media is encrypted and there are no keys to decrypt it.":"The media is encrypted and there are no keys to decrypt it."};var FG;const z4={en:Dze};let HO=((FG=globalThis.navigator)==null?void 0:FG.language)||"en";const Mze=t=>{HO=t},Fze=t=>{var e,r,n;const[i]=HO.split("-");return((e=z4[HO])==null?void 0:e[t])||((r=z4[i])==null?void 0:r[t])||((n=z4.en)==null?void 0:n[t])||t},mi=(t,e={})=>Fze(t).replace(/\{(\w+)\}/g,(r,n)=>n in e?String(e[n]):`{${n}}`);let sae=class{addEventListener(){}removeEventListener(){}dispatchEvent(){return!0}},aae=class extends sae{},UG=class extends aae{constructor(){super(...arguments),this.role=null}},Uze=class{observe(){}unobserve(){}disconnect(){}};const oae={createElement:function(){return new a2.HTMLElement},createElementNS:function(){return new a2.HTMLElement},addEventListener(){},removeEventListener(){},dispatchEvent(t){return!1}},a2={ResizeObserver:Uze,document:oae,Node:aae,Element:UG,HTMLElement:class extends UG{constructor(){super(...arguments),this.innerHTML=""}get content(){return new a2.DocumentFragment}},DocumentFragment:class extends sae{},customElements:{get:function(){},define:function(){},whenDefined:function(){}},localStorage:{getItem(t){return null},setItem(t,e){},removeItem(t){}},CustomEvent:function(){},getComputedStyle:function(){},navigator:{languages:[],get userAgent(){return""}},matchMedia(t){return{matches:!1,media:t}},DOMParser:class{parseFromString(e,r){return{body:{textContent:e}}}}},lae="global"in globalThis&&globalThis?.global===globalThis||typeof window>"u"||typeof window.customElements>"u",cae=Object.keys(a2).every(t=>t in globalThis),rr=lae&&!cae?a2:globalThis,vu=lae&&!cae?oae:globalThis.document,$G=new WeakMap,WF=t=>{let e=$G.get(t);return e||$G.set(t,e=new Set),e},uae=new rr.ResizeObserver(t=>{for(const e of t)for(const r of WF(e.target))r(e)});function Vb(t,e){WF(t).add(e),uae.observe(t)}function zb(t,e){const r=WF(t);r.delete(e),r.size||uae.unobserve(t)}function Sf(t){const e={};for(const r of t)e[r.name]=r.value;return e}function Hh(t){var e;return(e=QO(t))!=null?e:y1(t,"media-controller")}function QO(t){var e;const{MEDIA_CONTROLLER:r}=Ao,n=t.getAttribute(r);if(n)return(e=K5(t))==null?void 0:e.getElementById(n)}const dae=(t,e,r=".value")=>{const n=t.querySelector(r);n&&(n.textContent=e)},$ze=(t,e)=>{const r=`slot[name="${e}"]`,n=t.shadowRoot.querySelector(r);return n?n.children:[]},hae=(t,e)=>$ze(t,e)[0],Ag=(t,e)=>!t||!e?!1:t?.contains(e)?!0:Ag(t,e.getRootNode().host),y1=(t,e)=>{if(!t)return null;const r=t.closest(e);return r||y1(t.getRootNode().host,e)};function YF(t=document){var e;const r=t?.activeElement;return r?(e=YF(r.shadowRoot))!=null?e:r:null}function K5(t){var e;const r=(e=t?.getRootNode)==null?void 0:e.call(t);return r instanceof ShadowRoot||r instanceof Document?r:null}function fae(t,{depth:e=3,checkOpacity:r=!0,checkVisibilityCSS:n=!0}={}){if(t.checkVisibility)return t.checkVisibility({checkOpacity:r,checkVisibilityCSS:n});let i=t;for(;i&&e>0;){const s=getComputedStyle(i);if(r&&s.opacity==="0"||n&&s.visibility==="hidden"||s.display==="none")return!1;i=i.parentElement,e--}return!0}function Hze(t,e,r,n){const i=n.x-r.x,s=n.y-r.y,o=i*i+s*s;if(o===0)return 0;const c=((t-r.x)*i+(e-r.y)*s)/o;return Math.max(0,Math.min(1,c))}function Uu(t,e){const r=Qze(t,n=>n===e);return r||qF(t,e)}function Qze(t,e){var r,n;let i;for(i of(r=t.querySelectorAll("style:not([media])"))!=null?r:[]){let s;try{s=(n=i.sheet)==null?void 0:n.cssRules}catch{continue}for(const o of s??[])if(e(o.selectorText))return o}}function qF(t,e){var r,n;const i=(r=t.querySelectorAll("style:not([media])"))!=null?r:[],s=i?.[i.length-1];return s?.sheet?(s?.sheet.insertRule(`${e}{}`,s.sheet.cssRules.length),(n=s.sheet.cssRules)==null?void 0:n[s.sheet.cssRules.length-1]):(console.warn("Media Chrome: No style sheet found on style tag of",t),{style:{setProperty:()=>{},removeProperty:()=>"",getPropertyValue:()=>""}})}function Tl(t,e,r=Number.NaN){const n=t.getAttribute(e);return n!=null?+n:r}function Mc(t,e,r){const n=+r;if(r==null||Number.isNaN(n)){t.hasAttribute(e)&&t.removeAttribute(e);return}Tl(t,e,void 0)!==n&&t.setAttribute(e,`${n}`)}function Pa(t,e){return t.hasAttribute(e)}function Oa(t,e,r){if(r==null){t.hasAttribute(e)&&t.removeAttribute(e);return}Pa(t,e)!=r&&t.toggleAttribute(e,r)}function Cl(t,e,r=null){var n;return(n=t.getAttribute(e))!=null?n:r}function jl(t,e,r){if(r==null){t.hasAttribute(e)&&t.removeAttribute(e);return}const n=`${r}`;Cl(t,e,void 0)!==n&&t.setAttribute(e,n)}var Aae=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},Gg=(t,e,r)=>(Aae(t,e,"read from private field"),r?r.call(t):e.get(t)),Vze=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},CS=(t,e,r,n)=>(Aae(t,e,"write to private field"),e.set(t,r),r),Ph;function zze(t){return`
    <style>
      :host {
        display: var(--media-control-display, var(--media-gesture-receiver-display, inline-block));
        box-sizing: border-box;
      }
    </style>
  `}class G5 extends rr.HTMLElement{constructor(){if(super(),Vze(this,Ph,void 0),!this.shadowRoot){this.attachShadow(this.constructor.shadowRootOptions);const e=Sf(this.attributes);this.shadowRoot.innerHTML=this.constructor.getTemplateHTML(e)}}static get observedAttributes(){return[Ao.MEDIA_CONTROLLER,At.MEDIA_PAUSED]}attributeChangedCallback(e,r,n){var i,s,o,c,u;e===Ao.MEDIA_CONTROLLER&&(r&&((s=(i=Gg(this,Ph))==null?void 0:i.unassociateElement)==null||s.call(i,this),CS(this,Ph,null)),n&&this.isConnected&&(CS(this,Ph,(o=this.getRootNode())==null?void 0:o.getElementById(n)),(u=(c=Gg(this,Ph))==null?void 0:c.associateElement)==null||u.call(c,this)))}connectedCallback(){var e,r,n,i;this.tabIndex=-1,this.setAttribute("aria-hidden","true"),CS(this,Ph,Kze(this)),this.getAttribute(Ao.MEDIA_CONTROLLER)&&((r=(e=Gg(this,Ph))==null?void 0:e.associateElement)==null||r.call(e,this)),(n=Gg(this,Ph))==null||n.addEventListener("pointerdown",this),(i=Gg(this,Ph))==null||i.addEventListener("click",this)}disconnectedCallback(){var e,r,n,i;this.getAttribute(Ao.MEDIA_CONTROLLER)&&((r=(e=Gg(this,Ph))==null?void 0:e.unassociateElement)==null||r.call(e,this)),(n=Gg(this,Ph))==null||n.removeEventListener("pointerdown",this),(i=Gg(this,Ph))==null||i.removeEventListener("click",this),CS(this,Ph,null)}handleEvent(e){var r;const n=(r=e.composedPath())==null?void 0:r[0];if(["video","media-controller"].includes(n?.localName)){if(e.type==="pointerdown")this._pointerType=e.pointerType;else if(e.type==="click"){const{clientX:s,clientY:o}=e,{left:c,top:u,width:l,height:d}=this.getBoundingClientRect(),f=s-c,A=o-u;if(f<0||A<0||f>l||A>d||l===0&&d===0)return;const p=this._pointerType||"mouse";if(this._pointerType=void 0,p===V4.TOUCH){this.handleTap(e);return}else if(p===V4.MOUSE||p===V4.PEN){this.handleMouseClick(e);return}}}}get mediaPaused(){return Pa(this,At.MEDIA_PAUSED)}set mediaPaused(e){Oa(this,At.MEDIA_PAUSED,e)}handleTap(e){}handleMouseClick(e){const r=this.mediaPaused?zn.MEDIA_PLAY_REQUEST:zn.MEDIA_PAUSE_REQUEST;this.dispatchEvent(new rr.CustomEvent(r,{composed:!0,bubbles:!0}))}}Ph=new WeakMap;G5.shadowRootOptions={mode:"open"};G5.getTemplateHTML=zze;function Kze(t){var e;const r=t.getAttribute(Ao.MEDIA_CONTROLLER);return r?(e=t.getRootNode())==null?void 0:e.getElementById(r):y1(t,"media-controller")}rr.customElements.get("media-gesture-receiver")||rr.customElements.define("media-gesture-receiver",G5);var HG=G5,XF=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},uf=(t,e,r)=>(XF(t,e,"read from private field"),r?r.call(t):e.get(t)),tf=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},bv=(t,e,r,n)=>(XF(t,e,"write to private field"),e.set(t,r),r),Kf=(t,e,r)=>(XF(t,e,"access private method"),r),iN,Tx,o2,nb,ST,VO,mae,Cw,TT,zO,pae,KO,gae,l2,W5,Y5,ZF,Kb,c2;const es={AUDIO:"audio",AUTOHIDE:"autohide",BREAKPOINTS:"breakpoints",GESTURES_DISABLED:"gesturesdisabled",KEYBOARD_CONTROL:"keyboardcontrol",NO_AUTOHIDE:"noautohide",USER_INACTIVE:"userinactive",AUTOHIDE_OVER_CONTROLS:"autohideovercontrols"};function Gze(t){return`
    <style>
      
      :host([${At.MEDIA_IS_FULLSCREEN}]) ::slotted([slot=media]) {
        outline: none;
      }

      :host {
        box-sizing: border-box;
        position: relative;
        display: inline-block;
        line-height: 0;
        background-color: var(--media-background-color, #000);
        overflow: hidden;
      }

      :host(:not([${es.AUDIO}])) [part~=layer]:not([part~=media-layer]) {
        position: absolute;
        top: 0;
        left: 0;
        bottom: 0;
        right: 0;
        display: flex;
        flex-flow: column nowrap;
        align-items: start;
        pointer-events: none;
        background: none;
      }

      slot[name=media] {
        display: var(--media-slot-display, contents);
      }

      
      :host([${es.AUDIO}]) slot[name=media] {
        display: var(--media-slot-display, none);
      }

      
      :host([${es.AUDIO}]) [part~=layer][part~=gesture-layer] {
        height: 0;
        display: block;
      }

      
      :host(:not([${es.AUDIO}])[${es.GESTURES_DISABLED}]) ::slotted([slot=gestures-chrome]),
          :host(:not([${es.AUDIO}])[${es.GESTURES_DISABLED}]) media-gesture-receiver[slot=gestures-chrome] {
        display: none;
      }

      
      ::slotted(:not([slot=media]):not([slot=poster]):not(media-loading-indicator):not([role=dialog]):not([hidden])) {
        pointer-events: auto;
      }

      :host(:not([${es.AUDIO}])) *[part~=layer][part~=centered-layer] {
        align-items: center;
        justify-content: center;
      }

      :host(:not([${es.AUDIO}])) ::slotted(media-gesture-receiver[slot=gestures-chrome]),
      :host(:not([${es.AUDIO}])) media-gesture-receiver[slot=gestures-chrome] {
        align-self: stretch;
        flex-grow: 1;
      }

      slot[name=middle-chrome] {
        display: inline;
        flex-grow: 1;
        pointer-events: none;
        background: none;
      }

      
      ::slotted([slot=media]),
      ::slotted([slot=poster]) {
        width: 100%;
        height: 100%;
      }

      
      :host(:not([${es.AUDIO}])) .spacer {
        flex-grow: 1;
      }

      
      :host(:-webkit-full-screen) {
        
        width: 100% !important;
        height: 100% !important;
      }

      
      ::slotted(:not([slot=media]):not([slot=poster]):not([${es.NO_AUTOHIDE}]):not([hidden]):not([role=dialog])) {
        opacity: 1;
        transition: var(--media-control-transition-in, opacity 0.25s);
      }

      
      :host([${es.USER_INACTIVE}]:not([${At.MEDIA_PAUSED}]):not([${At.MEDIA_IS_AIRPLAYING}]):not([${At.MEDIA_IS_CASTING}]):not([${es.AUDIO}])) ::slotted(:not([slot=media]):not([slot=poster]):not([${es.NO_AUTOHIDE}]):not([role=dialog])) {
        opacity: 0;
        transition: var(--media-control-transition-out, opacity 1s);
      }

      :host([${es.USER_INACTIVE}]:not([${es.NO_AUTOHIDE}]):not([${At.MEDIA_PAUSED}]):not([${At.MEDIA_IS_CASTING}]):not([${es.AUDIO}])) ::slotted([slot=media]) {
        cursor: none;
      }

      :host([${es.USER_INACTIVE}][${es.AUTOHIDE_OVER_CONTROLS}]:not([${es.NO_AUTOHIDE}]):not([${At.MEDIA_PAUSED}]):not([${At.MEDIA_IS_CASTING}]):not([${es.AUDIO}])) * {
        --media-cursor: none;
        cursor: none;
      }


      ::slotted(media-control-bar)  {
        align-self: stretch;
      }

      
      :host(:not([${es.AUDIO}])[${At.MEDIA_HAS_PLAYED}]) slot[name=poster] {
        display: none;
      }

      ::slotted([role=dialog]) {
        width: 100%;
        height: 100%;
        align-self: center;
      }

      ::slotted([role=menu]) {
        align-self: end;
      }
    </style>

    <slot name="media" part="layer media-layer"></slot>
    <slot name="poster" part="layer poster-layer"></slot>
    <slot name="gestures-chrome" part="layer gesture-layer">
      <media-gesture-receiver slot="gestures-chrome">
        <template shadowrootmode="${HG.shadowRootOptions.mode}">
          ${HG.getTemplateHTML({})}
        </template>
      </media-gesture-receiver>
    </slot>
    <span part="layer vertical-layer">
      <slot name="top-chrome" part="top chrome"></slot>
      <slot name="middle-chrome" part="middle chrome"></slot>
      <slot name="centered-chrome" part="layer centered-layer center centered chrome"></slot>
      
      <slot part="bottom chrome"></slot>
    </span>
    <slot name="dialog" part="layer dialog-layer"></slot>
  `}const Wze=Object.values(At),Yze="sm:384 md:576 lg:768 xl:960";function qze(t){vae(t.target,t.contentRect.width)}function vae(t,e){var r;if(!t.isConnected)return;const n=(r=t.getAttribute(es.BREAKPOINTS))!=null?r:Yze,i=Xze(n),s=Zze(i,e);let o=!1;if(Object.keys(i).forEach(c=>{if(s.includes(c)){t.hasAttribute(`breakpoint${c}`)||(t.setAttribute(`breakpoint${c}`,""),o=!0);return}t.hasAttribute(`breakpoint${c}`)&&(t.removeAttribute(`breakpoint${c}`),o=!0)}),o){const c=new CustomEvent(ng.BREAKPOINTS_CHANGE,{detail:s});t.dispatchEvent(c)}t.breakpointsComputed||(t.breakpointsComputed=!0,t.dispatchEvent(new CustomEvent(ng.BREAKPOINTS_COMPUTED,{bubbles:!0,composed:!0})))}function Xze(t){const e=t.split(/\s+/);return Object.fromEntries(e.map(r=>r.split(":")))}function Zze(t,e){return Object.keys(t).filter(r=>e>=parseInt(t[r]))}class q5 extends rr.HTMLElement{constructor(){if(super(),tf(this,VO),tf(this,zO),tf(this,KO),tf(this,l2),tf(this,Y5),tf(this,Kb),tf(this,iN,0),tf(this,Tx,null),tf(this,o2,null),tf(this,nb,void 0),this.breakpointsComputed=!1,tf(this,ST,new MutationObserver(Kf(this,VO,mae).bind(this))),tf(this,Cw,!1),tf(this,TT,r=>{uf(this,Cw)||(setTimeout(()=>{qze(r),bv(this,Cw,!1)},0),bv(this,Cw,!0))}),!this.shadowRoot){this.attachShadow(this.constructor.shadowRootOptions);const r=Sf(this.attributes),n=this.constructor.getTemplateHTML(r);this.shadowRoot.setHTMLUnsafe?this.shadowRoot.setHTMLUnsafe(n):this.shadowRoot.innerHTML=n}const e=this.querySelector(":scope > slot[slot=media]");e&&e.addEventListener("slotchange",()=>{if(!e.assignedElements({flatten:!0}).length){uf(this,Tx)&&this.mediaUnsetCallback(uf(this,Tx));return}this.handleMediaUpdated(this.media)})}static get observedAttributes(){return[es.AUTOHIDE,es.GESTURES_DISABLED].concat(Wze).filter(e=>![At.MEDIA_RENDITION_LIST,At.MEDIA_AUDIO_TRACK_LIST,At.MEDIA_CHAPTERS_CUES,At.MEDIA_WIDTH,At.MEDIA_HEIGHT,At.MEDIA_ERROR,At.MEDIA_ERROR_MESSAGE].includes(e))}attributeChangedCallback(e,r,n){e.toLowerCase()==es.AUTOHIDE&&(this.autohide=n)}get media(){let e=this.querySelector(":scope > [slot=media]");return e?.nodeName=="SLOT"&&(e=e.assignedElements({flatten:!0})[0]),e}async handleMediaUpdated(e){e&&(bv(this,Tx,e),e.localName.includes("-")&&await rr.customElements.whenDefined(e.localName),this.mediaSetCallback(e))}connectedCallback(){var e;uf(this,ST).observe(this,{childList:!0,subtree:!0}),Vb(this,uf(this,TT));const r=this.getAttribute(es.AUDIO)!=null,n=mi(r?"audio player":"video player");this.setAttribute("role","region"),this.setAttribute("aria-label",n),this.handleMediaUpdated(this.media),this.setAttribute(es.USER_INACTIVE,""),vae(this,this.getBoundingClientRect().width),this.addEventListener("pointerdown",this),this.addEventListener("pointermove",this),this.addEventListener("pointerup",this),this.addEventListener("mouseleave",this),this.addEventListener("keyup",this),(e=rr.window)==null||e.addEventListener("mouseup",this)}disconnectedCallback(){var e;uf(this,ST).disconnect(),zb(this,uf(this,TT)),this.media&&this.mediaUnsetCallback(this.media),(e=rr.window)==null||e.removeEventListener("mouseup",this)}mediaSetCallback(e){}mediaUnsetCallback(e){bv(this,Tx,null)}handleEvent(e){switch(e.type){case"pointerdown":bv(this,iN,e.timeStamp);break;case"pointermove":Kf(this,zO,pae).call(this,e);break;case"pointerup":Kf(this,KO,gae).call(this,e);break;case"mouseleave":Kf(this,l2,W5).call(this);break;case"mouseup":this.removeAttribute(es.KEYBOARD_CONTROL);break;case"keyup":Kf(this,Kb,c2).call(this),this.setAttribute(es.KEYBOARD_CONTROL,"");break}}set autohide(e){const r=Number(e);bv(this,nb,isNaN(r)?0:r)}get autohide(){return(uf(this,nb)===void 0?2:uf(this,nb)).toString()}get breakpoints(){return Cl(this,es.BREAKPOINTS)}set breakpoints(e){jl(this,es.BREAKPOINTS,e)}get audio(){return Pa(this,es.AUDIO)}set audio(e){Oa(this,es.AUDIO,e)}get gesturesDisabled(){return Pa(this,es.GESTURES_DISABLED)}set gesturesDisabled(e){Oa(this,es.GESTURES_DISABLED,e)}get keyboardControl(){return Pa(this,es.KEYBOARD_CONTROL)}set keyboardControl(e){Oa(this,es.KEYBOARD_CONTROL,e)}get noAutohide(){return Pa(this,es.NO_AUTOHIDE)}set noAutohide(e){Oa(this,es.NO_AUTOHIDE,e)}get autohideOverControls(){return Pa(this,es.AUTOHIDE_OVER_CONTROLS)}set autohideOverControls(e){Oa(this,es.AUTOHIDE_OVER_CONTROLS,e)}get userInteractive(){return Pa(this,es.USER_INACTIVE)}set userInteractive(e){Oa(this,es.USER_INACTIVE,e)}}iN=new WeakMap;Tx=new WeakMap;o2=new WeakMap;nb=new WeakMap;ST=new WeakMap;VO=new WeakSet;mae=function(t){const e=this.media;for(const r of t){if(r.type!=="childList")continue;const n=r.removedNodes;for(const i of n){if(i.slot!="media"||r.target!=this)continue;let s=r.previousSibling&&r.previousSibling.previousElementSibling;if(!s||!e)this.mediaUnsetCallback(i);else{let o=s.slot!=="media";for(;(s=s.previousSibling)!==null;)s.slot=="media"&&(o=!1);o&&this.mediaUnsetCallback(i)}}if(e)for(const i of r.addedNodes)i===e&&this.handleMediaUpdated(e)}};Cw=new WeakMap;TT=new WeakMap;zO=new WeakSet;pae=function(t){if(t.pointerType!=="mouse"&&t.timeStamp-uf(this,iN)<250)return;Kf(this,Y5,ZF).call(this),clearTimeout(uf(this,o2));const e=this.hasAttribute(es.AUTOHIDE_OVER_CONTROLS);([this,this.media].includes(t.target)||e)&&Kf(this,Kb,c2).call(this)};KO=new WeakSet;gae=function(t){if(t.pointerType==="touch"){const e=!this.hasAttribute(es.USER_INACTIVE);[this,this.media].includes(t.target)&&e?Kf(this,l2,W5).call(this):Kf(this,Kb,c2).call(this)}else t.composedPath().some(e=>["media-play-button","media-fullscreen-button"].includes(e?.localName))&&Kf(this,Kb,c2).call(this)};l2=new WeakSet;W5=function(){if(uf(this,nb)<0||this.hasAttribute(es.USER_INACTIVE))return;this.setAttribute(es.USER_INACTIVE,"");const t=new rr.CustomEvent(ng.USER_INACTIVE_CHANGE,{composed:!0,bubbles:!0,detail:!0});this.dispatchEvent(t)};Y5=new WeakSet;ZF=function(){if(!this.hasAttribute(es.USER_INACTIVE))return;this.removeAttribute(es.USER_INACTIVE);const t=new rr.CustomEvent(ng.USER_INACTIVE_CHANGE,{composed:!0,bubbles:!0,detail:!1});this.dispatchEvent(t)};Kb=new WeakSet;c2=function(){Kf(this,Y5,ZF).call(this),clearTimeout(uf(this,o2));const t=parseInt(this.autohide);t<0||bv(this,o2,setTimeout(()=>{Kf(this,l2,W5).call(this)},t*1e3))};q5.shadowRootOptions={mode:"open"};q5.getTemplateHTML=Gze;rr.customElements.get("media-container")||rr.customElements.define("media-container",q5);var yae=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},ud=(t,e,r)=>(yae(t,e,"read from private field"),r?r.call(t):e.get(t)),rw=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},jS=(t,e,r,n)=>(yae(t,e,"write to private field"),e.set(t,r),r),Cx,jx,sN,Hv,Tp,Jg;class JF{constructor(e,r,{defaultValue:n}={defaultValue:void 0}){rw(this,Tp),rw(this,Cx,void 0),rw(this,jx,void 0),rw(this,sN,void 0),rw(this,Hv,new Set),jS(this,Cx,e),jS(this,jx,r),jS(this,sN,new Set(n))}[Symbol.iterator](){return ud(this,Tp,Jg).values()}get length(){return ud(this,Tp,Jg).size}get value(){var e;return(e=[...ud(this,Tp,Jg)].join(" "))!=null?e:""}set value(e){var r;e!==this.value&&(jS(this,Hv,new Set),this.add(...(r=e?.split(" "))!=null?r:[]))}toString(){return this.value}item(e){return[...ud(this,Tp,Jg)][e]}values(){return ud(this,Tp,Jg).values()}forEach(e,r){ud(this,Tp,Jg).forEach(e,r)}add(...e){var r,n;e.forEach(i=>ud(this,Hv).add(i)),!(this.value===""&&!((r=ud(this,Cx))!=null&&r.hasAttribute(`${ud(this,jx)}`)))&&((n=ud(this,Cx))==null||n.setAttribute(`${ud(this,jx)}`,`${this.value}`))}remove(...e){var r;e.forEach(n=>ud(this,Hv).delete(n)),(r=ud(this,Cx))==null||r.setAttribute(`${ud(this,jx)}`,`${this.value}`)}contains(e){return ud(this,Tp,Jg).has(e)}toggle(e,r){return typeof r<"u"?r?(this.add(e),!0):(this.remove(e),!1):this.contains(e)?(this.remove(e),!1):(this.add(e),!0)}replace(e,r){return this.remove(e),this.add(r),e===r}}Cx=new WeakMap;jx=new WeakMap;sN=new WeakMap;Hv=new WeakMap;Tp=new WeakSet;Jg=function(){return ud(this,Hv).size?ud(this,Hv):ud(this,sN)};const Jze=(t="")=>t.split(/\s+/),xae=(t="")=>{const[e,r,n]=t.split(":"),i=n?decodeURIComponent(n):void 0;return{kind:e==="cc"?Hm.CAPTIONS:Hm.SUBTITLES,language:r,label:i}},X5=(t="",e={})=>Jze(t).map(r=>{const n=xae(r);return{...e,...n}}),bae=t=>t?Array.isArray(t)?t.map(e=>typeof e=="string"?xae(e):e):typeof t=="string"?X5(t):[t]:[],GO=({kind:t,label:e,language:r}={kind:"subtitles"})=>e?`${t==="captions"?"cc":"sb"}:${r}:${encodeURIComponent(e)}`:r,u2=(t=[])=>Array.prototype.map.call(t,GO).join(" "),eKe=(t,e)=>r=>r[t]===e,wae=t=>{const e=Object.entries(t).map(([r,n])=>eKe(r,n));return r=>e.every(n=>n(r))},uE=(t,e=[],r=[])=>{const n=bae(r).map(wae),i=s=>n.some(o=>o(s));Array.from(e).filter(i).forEach(s=>{s.mode=t})},Z5=(t,e=()=>!0)=>{if(!t?.textTracks)return[];const r=typeof e=="function"?e:wae(e);return Array.from(t.textTracks).filter(r)},Eae=t=>{var e;return!!((e=t.mediaSubtitlesShowing)!=null&&e.length)||t.hasAttribute(At.MEDIA_SUBTITLES_SHOWING)},tKe=t=>{var e;const{media:r,fullscreenElement:n}=t;try{const i=n&&"requestFullscreen"in n?"requestFullscreen":n&&"webkitRequestFullScreen"in n?"webkitRequestFullScreen":void 0;if(i){const s=(e=n[i])==null?void 0:e.call(n);if(s instanceof Promise)return s.catch(()=>{})}else r?.webkitEnterFullscreen?r.webkitEnterFullscreen():r?.requestFullscreen&&r.requestFullscreen()}catch(i){console.error(i)}},QG="exitFullscreen"in vu?"exitFullscreen":"webkitExitFullscreen"in vu?"webkitExitFullscreen":"webkitCancelFullScreen"in vu?"webkitCancelFullScreen":void 0,rKe=t=>{var e;const{documentElement:r}=t;if(QG){const n=(e=r?.[QG])==null?void 0:e.call(r);if(n instanceof Promise)return n.catch(()=>{})}},jw="fullscreenElement"in vu?"fullscreenElement":"webkitFullscreenElement"in vu?"webkitFullscreenElement":void 0,nKe=t=>{const{documentElement:e,media:r}=t,n=e?.[jw];return!n&&"webkitDisplayingFullscreen"in r&&"webkitPresentationMode"in r&&r.webkitDisplayingFullscreen&&r.webkitPresentationMode===Tze.FULLSCREEN?r:n},iKe=t=>{var e;const{media:r,documentElement:n,fullscreenElement:i=r}=t;if(!r||!n)return!1;const s=nKe(t);if(!s)return!1;if(s===i||s===r)return!0;if(s.localName.includes("-")){let o=s.shadowRoot;if(!(jw in o))return Ag(s,i);for(;o?.[jw];){if(o[jw]===i)return!0;o=(e=o[jw])==null?void 0:e.shadowRoot}}return!1},sKe="fullscreenEnabled"in vu?"fullscreenEnabled":"webkitFullscreenEnabled"in vu?"webkitFullscreenEnabled":void 0,aKe=t=>{const{documentElement:e,media:r}=t;return!!e?.[sKe]||r&&"webkitSupportsFullscreen"in r};let NS;const eU=()=>{var t,e;return NS||(NS=(e=(t=vu)==null?void 0:t.createElement)==null?void 0:e.call(t,"video"),NS)},oKe=async(t=eU())=>{if(!t)return!1;const e=t.volume;t.volume=e/2+.1;const r=new AbortController,n=await Promise.race([lKe(t,r.signal),cKe(t,e)]);return r.abort(),n},lKe=(t,e)=>new Promise(r=>{t.addEventListener("volumechange",()=>r(!0),{signal:e})}),cKe=async(t,e)=>{for(let r=0;r<10;r++){if(t.volume===e)return!1;await iae(10)}return t.volume!==e},uKe=/.*Version\/.*Safari\/.*/.test(rr.navigator.userAgent),_ae=(t=eU())=>rr.matchMedia("(display-mode: standalone)").matches&&uKe?!1:typeof t?.requestPictureInPicture=="function",Sae=(t=eU())=>aKe({documentElement:vu,media:t}),dKe=Sae(),hKe=_ae(),fKe=!!rr.WebKitPlaybackTargetAvailabilityEvent,AKe=!!rr.chrome,aN=t=>Z5(t.media,e=>[Hm.SUBTITLES,Hm.CAPTIONS].includes(e.kind)).sort((e,r)=>e.kind>=r.kind?1:-1),Tae=t=>Z5(t.media,e=>e.mode===yb.SHOWING&&[Hm.SUBTITLES,Hm.CAPTIONS].includes(e.kind)),Cae=(t,e)=>{const r=aN(t),n=Tae(t),i=!!n.length;if(r.length){if(e===!1||i&&e!==!0)uE(yb.DISABLED,r,n);else if(e===!0||!i&&e!==!1){let s=r[0];const{options:o}=t;if(!o?.noSubtitlesLangPref){const d=globalThis.localStorage.getItem("media-chrome-pref-subtitles-lang"),f=d?[d,...globalThis.navigator.languages]:globalThis.navigator.languages,A=r.filter(p=>f.some(g=>p.language.toLowerCase().startsWith(g.split("-")[0]))).sort((p,g)=>{const y=f.findIndex(w=>p.language.toLowerCase().startsWith(w.split("-")[0])),x=f.findIndex(w=>g.language.toLowerCase().startsWith(w.split("-")[0]));return y-x});A[0]&&(s=A[0])}const{language:c,label:u,kind:l}=s;uE(yb.DISABLED,r,n),uE(yb.SHOWING,r,[{language:c,label:u,kind:l}])}}},tU=(t,e)=>t===e?!0:t==null||e==null||typeof t!=typeof e?!1:typeof t=="number"&&Number.isNaN(t)&&Number.isNaN(e)?!0:typeof t!="object"?!1:Array.isArray(t)?mKe(t,e):Object.entries(t).every(([r,n])=>r in e&&tU(n,e[r])),mKe=(t,e)=>{const r=Array.isArray(t),n=Array.isArray(e);return r!==n?!1:r||n?t.length!==e.length?!1:t.every((i,s)=>tU(i,e[s])):!0},pKe=Object.values(Ip);let oN;const gKe=oKe().then(t=>(oN=t,oN)),vKe=async(...t)=>{await Promise.all(t.filter(e=>e).map(async e=>{if(!("localName"in e&&e instanceof rr.HTMLElement))return;const r=e.localName;if(!r.includes("-"))return;const n=rr.customElements.get(r);n&&e instanceof n||(await rr.customElements.whenDefined(r),rr.customElements.upgrade(e))}))},yKe=new rr.DOMParser,xKe=t=>t&&(yKe.parseFromString(t,"text/html").body.textContent||t),Nw={mediaError:{get(t,e){const{media:r}=t;if(e?.type!=="playing")return r?.error},mediaEvents:["emptied","error","playing"]},mediaErrorCode:{get(t,e){var r;const{media:n}=t;if(e?.type!=="playing")return(r=n?.error)==null?void 0:r.code},mediaEvents:["emptied","error","playing"]},mediaErrorMessage:{get(t,e){var r,n;const{media:i}=t;if(e?.type!=="playing")return(n=(r=i?.error)==null?void 0:r.message)!=null?n:""},mediaEvents:["emptied","error","playing"]},mediaWidth:{get(t){var e;const{media:r}=t;return(e=r?.videoWidth)!=null?e:0},mediaEvents:["resize"]},mediaHeight:{get(t){var e;const{media:r}=t;return(e=r?.videoHeight)!=null?e:0},mediaEvents:["resize"]},mediaPaused:{get(t){var e;const{media:r}=t;return(e=r?.paused)!=null?e:!0},set(t,e){var r;const{media:n}=e;n&&(t?n.pause():(r=n.play())==null||r.catch(()=>{}))},mediaEvents:["play","playing","pause","emptied"]},mediaHasPlayed:{get(t,e){const{media:r}=t;return r?e?e.type==="playing":!r.paused:!1},mediaEvents:["playing","emptied"]},mediaEnded:{get(t){var e;const{media:r}=t;return(e=r?.ended)!=null?e:!1},mediaEvents:["seeked","ended","emptied"]},mediaPlaybackRate:{get(t){var e;const{media:r}=t;return(e=r?.playbackRate)!=null?e:1},set(t,e){const{media:r}=e;r&&Number.isFinite(+t)&&(r.playbackRate=+t)},mediaEvents:["ratechange","loadstart"]},mediaMuted:{get(t){var e;const{media:r}=t;return(e=r?.muted)!=null?e:!1},set(t,e){const{media:r,options:{noMutedPref:n}={}}=e;if(r){r.muted=t;try{const i=rr.localStorage.getItem("media-chrome-pref-muted")!==null,s=r.hasAttribute("muted");if(n){i&&rr.localStorage.removeItem("media-chrome-pref-muted");return}if(s&&!i)return;rr.localStorage.setItem("media-chrome-pref-muted",t?"true":"false")}catch(i){console.debug("Error setting muted pref",i)}}},mediaEvents:["volumechange"],stateOwnersUpdateHandlers:[(t,e)=>{const{options:{noMutedPref:r}}=e,{media:n}=e;if(!(!n||n.muted||r))try{const i=rr.localStorage.getItem("media-chrome-pref-muted")==="true";Nw.mediaMuted.set(i,e),t(i)}catch(i){console.debug("Error getting muted pref",i)}}]},mediaLoop:{get(t){const{media:e}=t;return e?.loop},set(t,e){const{media:r}=e;r&&(r.loop=t)},mediaEvents:["medialooprequest"]},mediaVolume:{get(t){var e;const{media:r}=t;return(e=r?.volume)!=null?e:1},set(t,e){const{media:r,options:{noVolumePref:n}={}}=e;if(r){try{t==null?rr.localStorage.removeItem("media-chrome-pref-volume"):!r.hasAttribute("muted")&&!n&&rr.localStorage.setItem("media-chrome-pref-volume",t.toString())}catch(i){console.debug("Error setting volume pref",i)}Number.isFinite(+t)&&(r.volume=+t)}},mediaEvents:["volumechange"],stateOwnersUpdateHandlers:[(t,e)=>{const{options:{noVolumePref:r}}=e;if(!r)try{const{media:n}=e;if(!n)return;const i=rr.localStorage.getItem("media-chrome-pref-volume");if(i==null)return;Nw.mediaVolume.set(+i,e),t(+i)}catch(n){console.debug("Error getting volume pref",n)}}]},mediaVolumeLevel:{get(t){const{media:e}=t;return typeof e?.volume>"u"?"high":e.muted||e.volume===0?"off":e.volume<.5?"low":e.volume<.75?"medium":"high"},mediaEvents:["volumechange"]},mediaCurrentTime:{get(t){var e;const{media:r}=t;return(e=r?.currentTime)!=null?e:0},set(t,e){const{media:r}=e;!r||!GF(t)||(r.currentTime=t)},mediaEvents:["timeupdate","loadedmetadata"]},mediaDuration:{get(t){const{media:e,options:{defaultDuration:r}={}}=t;return r&&(!e||!e.duration||Number.isNaN(e.duration)||!Number.isFinite(e.duration))?r:Number.isFinite(e?.duration)?e.duration:Number.NaN},mediaEvents:["durationchange","loadedmetadata","emptied"]},mediaLoading:{get(t){const{media:e}=t;return e?.readyState<3},mediaEvents:["waiting","playing","emptied"]},mediaSeekable:{get(t){var e;const{media:r}=t;if(!((e=r?.seekable)!=null&&e.length))return;const n=r.seekable.start(0),i=r.seekable.end(r.seekable.length-1);if(!(!n&&!i))return[Number(n.toFixed(3)),Number(i.toFixed(3))]},mediaEvents:["loadedmetadata","emptied","progress","seekablechange"]},mediaBuffered:{get(t){var e;const{media:r}=t,n=(e=r?.buffered)!=null?e:[];return Array.from(n).map((i,s)=>[Number(n.start(s).toFixed(3)),Number(n.end(s).toFixed(3))])},mediaEvents:["progress","emptied"]},mediaStreamType:{get(t){const{media:e,options:{defaultStreamType:r}={}}=t,n=[Ip.LIVE,Ip.ON_DEMAND].includes(r)?r:void 0;if(!e)return n;const{streamType:i}=e;if(pKe.includes(i))return i===Ip.UNKNOWN?n:i;const s=e.duration;return s===1/0?Ip.LIVE:Number.isFinite(s)?Ip.ON_DEMAND:n},mediaEvents:["emptied","durationchange","loadedmetadata","streamtypechange"]},mediaTargetLiveWindow:{get(t){const{media:e}=t;if(!e)return Number.NaN;const{targetLiveWindow:r}=e,n=Nw.mediaStreamType.get(t);return(r==null||Number.isNaN(r))&&n===Ip.LIVE?0:r},mediaEvents:["emptied","durationchange","loadedmetadata","streamtypechange","targetlivewindowchange"]},mediaTimeIsLive:{get(t){const{media:e,options:{liveEdgeOffset:r=10}={}}=t;if(!e)return!1;if(typeof e.liveEdgeStart=="number")return Number.isNaN(e.liveEdgeStart)?!1:e.currentTime>=e.liveEdgeStart;if(!(Nw.mediaStreamType.get(t)===Ip.LIVE))return!1;const i=e.seekable;if(!i)return!0;if(!i.length)return!1;const s=i.end(i.length-1)-r;return e.currentTime>=s},mediaEvents:["playing","timeupdate","progress","waiting","emptied"]},mediaSubtitlesList:{get(t){return aN(t).map(({kind:e,label:r,language:n})=>({kind:e,label:r,language:n}))},mediaEvents:["loadstart"],textTracksEvents:["addtrack","removetrack"]},mediaSubtitlesShowing:{get(t){return Tae(t).map(({kind:e,label:r,language:n})=>({kind:e,label:r,language:n}))},mediaEvents:["loadstart"],textTracksEvents:["addtrack","removetrack","change"],stateOwnersUpdateHandlers:[(t,e)=>{var r,n;const{media:i,options:s}=e;if(!i)return;const o=c=>{var u;!s.defaultSubtitles||c&&![Hm.CAPTIONS,Hm.SUBTITLES].includes((u=c?.track)==null?void 0:u.kind)||Cae(e,!0)};return i.addEventListener("loadstart",o),(r=i.textTracks)==null||r.addEventListener("addtrack",o),(n=i.textTracks)==null||n.addEventListener("removetrack",o),()=>{var c,u;i.removeEventListener("loadstart",o),(c=i.textTracks)==null||c.removeEventListener("addtrack",o),(u=i.textTracks)==null||u.removeEventListener("removetrack",o)}}]},mediaChaptersCues:{get(t){var e;const{media:r}=t;if(!r)return[];const[n]=Z5(r,{kind:Hm.CHAPTERS});return Array.from((e=n?.cues)!=null?e:[]).map(({text:i,startTime:s,endTime:o})=>({text:xKe(i),startTime:s,endTime:o}))},mediaEvents:["loadstart","loadedmetadata"],textTracksEvents:["addtrack","removetrack","change"],stateOwnersUpdateHandlers:[(t,e)=>{var r;const{media:n}=e;if(!n)return;const i=n.querySelector('track[kind="chapters"][default][src]'),s=(r=n.shadowRoot)==null?void 0:r.querySelector(':is(video,audio) > track[kind="chapters"][default][src]');return i?.addEventListener("load",t),s?.addEventListener("load",t),()=>{i?.removeEventListener("load",t),s?.removeEventListener("load",t)}}]},mediaIsPip:{get(t){var e,r;const{media:n,documentElement:i}=t;if(!n||!i||!i.pictureInPictureElement)return!1;if(i.pictureInPictureElement===n)return!0;if(i.pictureInPictureElement instanceof HTMLMediaElement)return(e=n.localName)!=null&&e.includes("-")?Ag(n,i.pictureInPictureElement):!1;if(i.pictureInPictureElement.localName.includes("-")){let s=i.pictureInPictureElement.shadowRoot;for(;s?.pictureInPictureElement;){if(s.pictureInPictureElement===n)return!0;s=(r=s.pictureInPictureElement)==null?void 0:r.shadowRoot}}return!1},set(t,e){const{media:r}=e;if(r)if(t){if(!vu.pictureInPictureEnabled){console.warn("MediaChrome: Picture-in-picture is not enabled");return}if(!r.requestPictureInPicture){console.warn("MediaChrome: The current media does not support picture-in-picture");return}const n=()=>{console.warn("MediaChrome: The media is not ready for picture-in-picture. It must have a readyState > 0.")};r.requestPictureInPicture().catch(i=>{if(i.code===11){if(!r.src){console.warn("MediaChrome: The media is not ready for picture-in-picture. It must have a src set.");return}if(r.readyState===0&&r.preload==="none"){const s=()=>{r.removeEventListener("loadedmetadata",o),r.preload="none"},o=()=>{r.requestPictureInPicture().catch(n),s()};r.addEventListener("loadedmetadata",o),r.preload="metadata",setTimeout(()=>{r.readyState===0&&n(),s()},1e3)}else throw i}else throw i})}else vu.pictureInPictureElement&&vu.exitPictureInPicture()},mediaEvents:["enterpictureinpicture","leavepictureinpicture"]},mediaRenditionList:{get(t){var e;const{media:r}=t;return[...(e=r?.videoRenditions)!=null?e:[]].map(n=>({...n}))},mediaEvents:["emptied","loadstart"],videoRenditionsEvents:["addrendition","removerendition"]},mediaRenditionSelected:{get(t){var e,r,n;const{media:i}=t;return(n=(r=i?.videoRenditions)==null?void 0:r[(e=i.videoRenditions)==null?void 0:e.selectedIndex])==null?void 0:n.id},set(t,e){const{media:r}=e;if(!r?.videoRenditions){console.warn("MediaController: Rendition selection not supported by this media.");return}const n=t,i=Array.prototype.findIndex.call(r.videoRenditions,s=>s.id==n);r.videoRenditions.selectedIndex!=i&&(r.videoRenditions.selectedIndex=i)},mediaEvents:["emptied"],videoRenditionsEvents:["addrendition","removerendition","change"]},mediaAudioTrackList:{get(t){var e;const{media:r}=t;return[...(e=r?.audioTracks)!=null?e:[]]},mediaEvents:["emptied","loadstart"],audioTracksEvents:["addtrack","removetrack"]},mediaAudioTrackEnabled:{get(t){var e,r;const{media:n}=t;return(r=[...(e=n?.audioTracks)!=null?e:[]].find(i=>i.enabled))==null?void 0:r.id},set(t,e){const{media:r}=e;if(!r?.audioTracks){console.warn("MediaChrome: Audio track selection not supported by this media.");return}const n=t;for(const i of r.audioTracks)i.enabled=n==i.id},mediaEvents:["emptied"],audioTracksEvents:["addtrack","removetrack","change"]},mediaIsFullscreen:{get(t){return iKe(t)},set(t,e,r){var n;t?(tKe(e),r.detail&&((n=e.media)==null||n.focus())):rKe(e)},rootEvents:["fullscreenchange","webkitfullscreenchange"],mediaEvents:["webkitbeginfullscreen","webkitendfullscreen","webkitpresentationmodechanged"]},mediaIsCasting:{get(t){var e;const{media:r}=t;return!r?.remote||((e=r.remote)==null?void 0:e.state)==="disconnected"?!1:!!r.remote.state},set(t,e){var r,n;const{media:i}=e;if(i&&!(t&&((r=i.remote)==null?void 0:r.state)!=="disconnected")&&!(!t&&((n=i.remote)==null?void 0:n.state)!=="connected")){if(typeof i.remote.prompt!="function"){console.warn("MediaChrome: Casting is not supported in this environment");return}i.remote.prompt().catch(()=>{})}},remoteEvents:["connect","connecting","disconnect"]},mediaIsAirplaying:{get(){return!1},set(t,e){const{media:r}=e;if(r){if(!(r.webkitShowPlaybackTargetPicker&&rr.WebKitPlaybackTargetAvailabilityEvent)){console.error("MediaChrome: received a request to select AirPlay but AirPlay is not supported in this environment");return}r.webkitShowPlaybackTargetPicker()}},mediaEvents:["webkitcurrentplaybacktargetiswirelesschanged"]},mediaFullscreenUnavailable:{get(t){const{media:e}=t;if(!dKe||!Sae(e))return ef.UNSUPPORTED}},mediaPipUnavailable:{get(t){const{media:e}=t;if(!hKe||!_ae(e))return ef.UNSUPPORTED;if(e?.disablePictureInPicture)return ef.UNAVAILABLE}},mediaVolumeUnavailable:{get(t){const{media:e}=t;if(oN===!1||e?.volume==null)return ef.UNSUPPORTED},stateOwnersUpdateHandlers:[t=>{oN==null&&gKe.then(e=>t(e?void 0:ef.UNSUPPORTED))}]},mediaCastUnavailable:{get(t,{availability:e="not-available"}={}){var r;const{media:n}=t;if(!AKe||!((r=n?.remote)!=null&&r.state))return ef.UNSUPPORTED;if(!(e==null||e==="available"))return ef.UNAVAILABLE},stateOwnersUpdateHandlers:[(t,e)=>{var r;const{media:n}=e;return n?(n.disableRemotePlayback||n.hasAttribute("disableremoteplayback")||(r=n?.remote)==null||r.watchAvailability(s=>{t({availability:s?"available":"not-available"})}).catch(s=>{s.name==="NotSupportedError"?t({availability:null}):t({availability:"not-available"})}),()=>{var s;(s=n?.remote)==null||s.cancelWatchAvailability().catch(()=>{})}):void 0}]},mediaAirplayUnavailable:{get(t,e){if(!fKe)return ef.UNSUPPORTED;if(e?.availability==="not-available")return ef.UNAVAILABLE},mediaEvents:["webkitplaybacktargetavailabilitychanged"],stateOwnersUpdateHandlers:[(t,e)=>{var r;const{media:n}=e;return n?(n.disableRemotePlayback||n.hasAttribute("disableremoteplayback")||(r=n?.remote)==null||r.watchAvailability(s=>{t({availability:s?"available":"not-available"})}).catch(s=>{s.name==="NotSupportedError"?t({availability:null}):t({availability:"not-available"})}),()=>{var s;(s=n?.remote)==null||s.cancelWatchAvailability().catch(()=>{})}):void 0}]},mediaRenditionUnavailable:{get(t){var e;const{media:r}=t;if(!r?.videoRenditions)return ef.UNSUPPORTED;if(!((e=r.videoRenditions)!=null&&e.length))return ef.UNAVAILABLE},mediaEvents:["emptied","loadstart"],videoRenditionsEvents:["addrendition","removerendition"]},mediaAudioTrackUnavailable:{get(t){var e,r;const{media:n}=t;if(!n?.audioTracks)return ef.UNSUPPORTED;if(((r=(e=n.audioTracks)==null?void 0:e.length)!=null?r:0)<=1)return ef.UNAVAILABLE},mediaEvents:["emptied","loadstart"],audioTracksEvents:["addtrack","removetrack"]},mediaLang:{get(t){const{options:{mediaLang:e}={}}=t;return e??"en"}}},bKe={[zn.MEDIA_PREVIEW_REQUEST](t,e,{detail:r}){var n,i,s;const{media:o}=e,c=r??void 0;let u,l;if(o&&c!=null){const[p]=Z5(o,{kind:Hm.METADATA,label:"thumbnails"}),g=Array.prototype.find.call((n=p?.cues)!=null?n:[],(y,x,w)=>x===0?y.endTime>c:x===w.length-1?y.startTime<=c:y.startTime<=c&&y.endTime>c);if(g){const y=/'^(?:[a-z]+:)?\/\//i.test(g.text)||(i=o?.querySelector('track[label="thumbnails"]'))==null?void 0:i.src,x=new URL(g.text,y);l=new URLSearchParams(x.hash).get("#xywh").split(",").map(E=>+E),u=x.href}}const d=t.mediaDuration.get(e);let A=(s=t.mediaChaptersCues.get(e).find((p,g,y)=>g===y.length-1&&d===p.endTime?p.startTime<=c&&p.endTime>=c:p.startTime<=c&&p.endTime>c))==null?void 0:s.text;return r!=null&&A==null&&(A=""),{mediaPreviewTime:c,mediaPreviewImage:u,mediaPreviewCoords:l,mediaPreviewChapter:A}},[zn.MEDIA_PAUSE_REQUEST](t,e){t["mediaPaused"].set(!0,e)},[zn.MEDIA_PLAY_REQUEST](t,e){var r,n,i,s;const o="mediaPaused",u=t.mediaStreamType.get(e)===Ip.LIVE,l=!((r=e.options)!=null&&r.noAutoSeekToLive),d=t.mediaTargetLiveWindow.get(e)>0;if(u&&l&&!d){const f=(n=t.mediaSeekable.get(e))==null?void 0:n[1];if(f){const A=(s=(i=e.options)==null?void 0:i.seekToLiveOffset)!=null?s:0,p=f-A;t.mediaCurrentTime.set(p,e)}}t[o].set(!1,e)},[zn.MEDIA_PLAYBACK_RATE_REQUEST](t,e,{detail:r}){const n="mediaPlaybackRate",i=r;t[n].set(i,e)},[zn.MEDIA_MUTE_REQUEST](t,e){t["mediaMuted"].set(!0,e)},[zn.MEDIA_UNMUTE_REQUEST](t,e){const r="mediaMuted";t.mediaVolume.get(e)||t.mediaVolume.set(.25,e),t[r].set(!1,e)},[zn.MEDIA_LOOP_REQUEST](t,e,{detail:r}){const n="mediaLoop",i=!!r;return t[n].set(i,e),{mediaLoop:i}},[zn.MEDIA_VOLUME_REQUEST](t,e,{detail:r}){const n="mediaVolume",i=r;i&&t.mediaMuted.get(e)&&t.mediaMuted.set(!1,e),t[n].set(i,e)},[zn.MEDIA_SEEK_REQUEST](t,e,{detail:r}){const n="mediaCurrentTime",i=r;t[n].set(i,e)},[zn.MEDIA_SEEK_TO_LIVE_REQUEST](t,e){var r,n,i;const s="mediaCurrentTime",o=(r=t.mediaSeekable.get(e))==null?void 0:r[1];if(Number.isNaN(Number(o)))return;const c=(i=(n=e.options)==null?void 0:n.seekToLiveOffset)!=null?i:0,u=o-c;t[s].set(u,e)},[zn.MEDIA_SHOW_SUBTITLES_REQUEST](t,e,{detail:r}){var n;const{options:i}=e,s=aN(e),o=bae(r),c=(n=o[0])==null?void 0:n.language;c&&!i.noSubtitlesLangPref&&rr.localStorage.setItem("media-chrome-pref-subtitles-lang",c),uE(yb.SHOWING,s,o)},[zn.MEDIA_DISABLE_SUBTITLES_REQUEST](t,e,{detail:r}){const n=aN(e),i=r??[];uE(yb.DISABLED,n,i)},[zn.MEDIA_TOGGLE_SUBTITLES_REQUEST](t,e,{detail:r}){Cae(e,r)},[zn.MEDIA_RENDITION_REQUEST](t,e,{detail:r}){const n="mediaRenditionSelected",i=r;t[n].set(i,e)},[zn.MEDIA_AUDIO_TRACK_REQUEST](t,e,{detail:r}){const n="mediaAudioTrackEnabled",i=r;t[n].set(i,e)},[zn.MEDIA_ENTER_PIP_REQUEST](t,e){const r="mediaIsPip";t.mediaIsFullscreen.get(e)&&t.mediaIsFullscreen.set(!1,e),t[r].set(!0,e)},[zn.MEDIA_EXIT_PIP_REQUEST](t,e){t["mediaIsPip"].set(!1,e)},[zn.MEDIA_ENTER_FULLSCREEN_REQUEST](t,e,r){const n="mediaIsFullscreen";t.mediaIsPip.get(e)&&t.mediaIsPip.set(!1,e),t[n].set(!0,e,r)},[zn.MEDIA_EXIT_FULLSCREEN_REQUEST](t,e){t["mediaIsFullscreen"].set(!1,e)},[zn.MEDIA_ENTER_CAST_REQUEST](t,e){const r="mediaIsCasting";t.mediaIsFullscreen.get(e)&&t.mediaIsFullscreen.set(!1,e),t[r].set(!0,e)},[zn.MEDIA_EXIT_CAST_REQUEST](t,e){t["mediaIsCasting"].set(!1,e)},[zn.MEDIA_AIRPLAY_REQUEST](t,e){t["mediaIsAirplaying"].set(!0,e)}},wKe=({media:t,fullscreenElement:e,documentElement:r,stateMediator:n=Nw,requestMap:i=bKe,options:s={},monitorStateOwnersOnlyWithSubscriptions:o=!0})=>{const c=[],u={options:{...s}};let l=Object.freeze({mediaPreviewTime:void 0,mediaPreviewImage:void 0,mediaPreviewCoords:void 0,mediaPreviewChapter:void 0});const d=y=>{y!=null&&(tU(y,l)||(l=Object.freeze({...l,...y}),c.forEach(x=>x(l))))},f=()=>{const y=Object.entries(n).reduce((x,[w,{get:E}])=>(x[w]=E(u),x),{});d(y)},A={};let p;const g=async(y,x)=>{var w,E,T,C,N,I,U,K,Y,re,se,Ae,we,Ce,ve,ne;const ce=!!p;if(p={...u,...p??{},...y},ce)return;await vKe(...Object.values(y));const ae=c.length>0&&x===0&&o,De=u.media!==p.media,Oe=((w=u.media)==null?void 0:w.textTracks)!==((E=p.media)==null?void 0:E.textTracks),be=((T=u.media)==null?void 0:T.videoRenditions)!==((C=p.media)==null?void 0:C.videoRenditions),de=((N=u.media)==null?void 0:N.audioTracks)!==((I=p.media)==null?void 0:I.audioTracks),xe=((U=u.media)==null?void 0:U.remote)!==((K=p.media)==null?void 0:K.remote),je=u.documentElement!==p.documentElement,Me=!!u.media&&(De||ae),Re=!!((Y=u.media)!=null&&Y.textTracks)&&(Oe||ae),it=!!((re=u.media)!=null&&re.videoRenditions)&&(be||ae),ht=!!((se=u.media)!=null&&se.audioTracks)&&(de||ae),Be=!!((Ae=u.media)!=null&&Ae.remote)&&(xe||ae),nt=!!u.documentElement&&(je||ae),Ge=Me||Re||it||ht||Be||nt,ft=c.length===0&&x===1&&o,Dt=!!p.media&&(De||ft),rt=!!((we=p.media)!=null&&we.textTracks)&&(Oe||ft),kt=!!((Ce=p.media)!=null&&Ce.videoRenditions)&&(be||ft),_t=!!((ve=p.media)!=null&&ve.audioTracks)&&(de||ft),wt=!!((ne=p.media)!=null&&ne.remote)&&(xe||ft),Tt=!!p.documentElement&&(je||ft),Er=Dt||rt||kt||_t||wt||Tt;if(!(Ge||Er)){Object.entries(p).forEach(([Xr,yn])=>{u[Xr]=yn}),f(),p=void 0;return}Object.entries(n).forEach(([Xr,{get:yn,mediaEvents:Mn=[],textTracksEvents:dn=[],videoRenditionsEvents:pn=[],audioTracksEvents:mn=[],remoteEvents:Kn=[],rootEvents:Zn=[],stateOwnersUpdateHandlers:Li=[]}])=>{A[Xr]||(A[Xr]={});const ot=nr=>{const Qt=yn(u,nr);d({[Xr]:Qt})};let Yt;Yt=A[Xr].mediaEvents,Mn.forEach(nr=>{Yt&&Me&&(u.media.removeEventListener(nr,Yt),A[Xr].mediaEvents=void 0),Dt&&(p.media.addEventListener(nr,ot),A[Xr].mediaEvents=ot)}),Yt=A[Xr].textTracksEvents,dn.forEach(nr=>{var Qt,fr;Yt&&Re&&((Qt=u.media.textTracks)==null||Qt.removeEventListener(nr,Yt),A[Xr].textTracksEvents=void 0),rt&&((fr=p.media.textTracks)==null||fr.addEventListener(nr,ot),A[Xr].textTracksEvents=ot)}),Yt=A[Xr].videoRenditionsEvents,pn.forEach(nr=>{var Qt,fr;Yt&&it&&((Qt=u.media.videoRenditions)==null||Qt.removeEventListener(nr,Yt),A[Xr].videoRenditionsEvents=void 0),kt&&((fr=p.media.videoRenditions)==null||fr.addEventListener(nr,ot),A[Xr].videoRenditionsEvents=ot)}),Yt=A[Xr].audioTracksEvents,mn.forEach(nr=>{var Qt,fr;Yt&&ht&&((Qt=u.media.audioTracks)==null||Qt.removeEventListener(nr,Yt),A[Xr].audioTracksEvents=void 0),_t&&((fr=p.media.audioTracks)==null||fr.addEventListener(nr,ot),A[Xr].audioTracksEvents=ot)}),Yt=A[Xr].remoteEvents,Kn.forEach(nr=>{var Qt,fr;Yt&&Be&&((Qt=u.media.remote)==null||Qt.removeEventListener(nr,Yt),A[Xr].remoteEvents=void 0),wt&&((fr=p.media.remote)==null||fr.addEventListener(nr,ot),A[Xr].remoteEvents=ot)}),Yt=A[Xr].rootEvents,Zn.forEach(nr=>{Yt&&nt&&(u.documentElement.removeEventListener(nr,Yt),A[Xr].rootEvents=void 0),Tt&&(p.documentElement.addEventListener(nr,ot),A[Xr].rootEvents=ot)});const kr=A[Xr].stateOwnersUpdateHandlers;if(kr&&Ge&&(Array.isArray(kr)?kr:[kr]).forEach(Qt=>{typeof Qt=="function"&&Qt()}),Er){const nr=Li.map(Qt=>Qt(ot,p)).filter(Qt=>typeof Qt=="function");A[Xr].stateOwnersUpdateHandlers=nr.length===1?nr[0]:nr}else Ge&&(A[Xr].stateOwnersUpdateHandlers=void 0)}),Object.entries(p).forEach(([Xr,yn])=>{u[Xr]=yn}),f(),p=void 0};return g({media:t,fullscreenElement:e,documentElement:r,options:s}),{dispatch(y){const{type:x,detail:w}=y;if(i[x]&&l.mediaErrorCode==null){d(i[x](n,u,y));return}x==="mediaelementchangerequest"?g({media:w}):x==="fullscreenelementchangerequest"?g({fullscreenElement:w}):x==="documentelementchangerequest"?g({documentElement:w}):x==="optionschangerequest"&&(Object.entries(w??{}).forEach(([E,T])=>{u.options[E]=T}),f())},getState(){return l},subscribe(y){return g({},c.length+1),c.push(y),y(l),()=>{const x=c.indexOf(y);x>=0&&(g({},c.length-1),c.splice(x,1))}}}};var rU=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},os=(t,e,r)=>(rU(t,e,"read from private field"),r?r.call(t):e.get(t)),Df=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},pm=(t,e,r,n)=>(rU(t,e,"write to private field"),e.set(t,r),r),Nm=(t,e,r)=>(rU(t,e,"access private method"),r),p0,kw,Ga,Qv,Iw,gm,CT,Lw,jT,WO,Jv,xb,NT,YO,qO,jae;const Nae=["ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Enter"," ","f","m","k","c","l","j",">","<","p"],VG=10,zG=.025,KG=.25,EKe=.25,_Ke=2,kn={DEFAULT_SUBTITLES:"defaultsubtitles",DEFAULT_STREAM_TYPE:"defaultstreamtype",DEFAULT_DURATION:"defaultduration",FULLSCREEN_ELEMENT:"fullscreenelement",HOTKEYS:"hotkeys",KEYBOARD_BACKWARD_SEEK_OFFSET:"keyboardbackwardseekoffset",KEYBOARD_FORWARD_SEEK_OFFSET:"keyboardforwardseekoffset",KEYBOARD_DOWN_VOLUME_STEP:"keyboarddownvolumestep",KEYBOARD_UP_VOLUME_STEP:"keyboardupvolumestep",KEYS_USED:"keysused",LANG:"lang",LOOP:"loop",LIVE_EDGE_OFFSET:"liveedgeoffset",NO_AUTO_SEEK_TO_LIVE:"noautoseektolive",NO_DEFAULT_STORE:"nodefaultstore",NO_HOTKEYS:"nohotkeys",NO_MUTED_PREF:"nomutedpref",NO_SUBTITLES_LANG_PREF:"nosubtitleslangpref",NO_VOLUME_PREF:"novolumepref",SEEK_TO_LIVE_OFFSET:"seektoliveoffset"};class kae extends q5{constructor(){super(),Df(this,jT),Df(this,Jv),Df(this,NT),Df(this,qO),this.mediaStateReceivers=[],this.associatedElementSubscriptions=new Map,Df(this,p0,new JF(this,kn.HOTKEYS)),Df(this,kw,void 0),Df(this,Ga,void 0),Df(this,Qv,null),Df(this,Iw,void 0),Df(this,gm,void 0),Df(this,CT,r=>{var n;(n=os(this,Ga))==null||n.dispatch(r)}),Df(this,Lw,void 0),this.associateElement(this);let e={};pm(this,Iw,r=>{Object.entries(r).forEach(([n,i])=>{if(n in e&&e[n]===i)return;this.propagateMediaState(n,i);const s=n.toLowerCase(),o=new rr.CustomEvent(Sze[s],{composed:!0,detail:i});this.dispatchEvent(o)}),e=r}),this.hasAttribute(kn.NO_HOTKEYS)?this.disableHotkeys():this.enableHotkeys()}static get observedAttributes(){return super.observedAttributes.concat(kn.NO_HOTKEYS,kn.HOTKEYS,kn.DEFAULT_STREAM_TYPE,kn.DEFAULT_SUBTITLES,kn.DEFAULT_DURATION,kn.NO_MUTED_PREF,kn.NO_VOLUME_PREF,kn.LANG,kn.LOOP)}get mediaStore(){return os(this,Ga)}set mediaStore(e){var r,n;if(os(this,Ga)&&((r=os(this,gm))==null||r.call(this),pm(this,gm,void 0)),pm(this,Ga,e),!os(this,Ga)&&!this.hasAttribute(kn.NO_DEFAULT_STORE)){Nm(this,jT,WO).call(this);return}pm(this,gm,(n=os(this,Ga))==null?void 0:n.subscribe(os(this,Iw)))}get fullscreenElement(){var e;return(e=os(this,kw))!=null?e:this}set fullscreenElement(e){var r;this.hasAttribute(kn.FULLSCREEN_ELEMENT)&&this.removeAttribute(kn.FULLSCREEN_ELEMENT),pm(this,kw,e),(r=os(this,Ga))==null||r.dispatch({type:"fullscreenelementchangerequest",detail:this.fullscreenElement})}get defaultSubtitles(){return Pa(this,kn.DEFAULT_SUBTITLES)}set defaultSubtitles(e){Oa(this,kn.DEFAULT_SUBTITLES,e)}get defaultStreamType(){return Cl(this,kn.DEFAULT_STREAM_TYPE)}set defaultStreamType(e){jl(this,kn.DEFAULT_STREAM_TYPE,e)}get defaultDuration(){return Tl(this,kn.DEFAULT_DURATION)}set defaultDuration(e){Mc(this,kn.DEFAULT_DURATION,e)}get noHotkeys(){return Pa(this,kn.NO_HOTKEYS)}set noHotkeys(e){Oa(this,kn.NO_HOTKEYS,e)}get keysUsed(){return Cl(this,kn.KEYS_USED)}set keysUsed(e){jl(this,kn.KEYS_USED,e)}get liveEdgeOffset(){return Tl(this,kn.LIVE_EDGE_OFFSET)}set liveEdgeOffset(e){Mc(this,kn.LIVE_EDGE_OFFSET,e)}get noAutoSeekToLive(){return Pa(this,kn.NO_AUTO_SEEK_TO_LIVE)}set noAutoSeekToLive(e){Oa(this,kn.NO_AUTO_SEEK_TO_LIVE,e)}get noVolumePref(){return Pa(this,kn.NO_VOLUME_PREF)}set noVolumePref(e){Oa(this,kn.NO_VOLUME_PREF,e)}get noMutedPref(){return Pa(this,kn.NO_MUTED_PREF)}set noMutedPref(e){Oa(this,kn.NO_MUTED_PREF,e)}get noSubtitlesLangPref(){return Pa(this,kn.NO_SUBTITLES_LANG_PREF)}set noSubtitlesLangPref(e){Oa(this,kn.NO_SUBTITLES_LANG_PREF,e)}get noDefaultStore(){return Pa(this,kn.NO_DEFAULT_STORE)}set noDefaultStore(e){Oa(this,kn.NO_DEFAULT_STORE,e)}attributeChangedCallback(e,r,n){var i,s,o,c,u,l,d,f,A,p,g,y;if(super.attributeChangedCallback(e,r,n),e===kn.NO_HOTKEYS)n!==r&&n===""?(this.hasAttribute(kn.HOTKEYS)&&console.warn("Media Chrome: Both `hotkeys` and `nohotkeys` have been set. All hotkeys will be disabled."),this.disableHotkeys()):n!==r&&n===null&&this.enableHotkeys();else if(e===kn.HOTKEYS)os(this,p0).value=n;else if(e===kn.DEFAULT_SUBTITLES&&n!==r)(i=os(this,Ga))==null||i.dispatch({type:"optionschangerequest",detail:{defaultSubtitles:this.hasAttribute(kn.DEFAULT_SUBTITLES)}});else if(e===kn.DEFAULT_STREAM_TYPE)(o=os(this,Ga))==null||o.dispatch({type:"optionschangerequest",detail:{defaultStreamType:(s=this.getAttribute(kn.DEFAULT_STREAM_TYPE))!=null?s:void 0}});else if(e===kn.LIVE_EDGE_OFFSET)(c=os(this,Ga))==null||c.dispatch({type:"optionschangerequest",detail:{liveEdgeOffset:this.hasAttribute(kn.LIVE_EDGE_OFFSET)?+this.getAttribute(kn.LIVE_EDGE_OFFSET):void 0,seekToLiveOffset:this.hasAttribute(kn.SEEK_TO_LIVE_OFFSET)?void 0:+this.getAttribute(kn.LIVE_EDGE_OFFSET)}});else if(e===kn.SEEK_TO_LIVE_OFFSET)(u=os(this,Ga))==null||u.dispatch({type:"optionschangerequest",detail:{seekToLiveOffset:this.hasAttribute(kn.SEEK_TO_LIVE_OFFSET)?+this.getAttribute(kn.SEEK_TO_LIVE_OFFSET):void 0}});else if(e===kn.NO_AUTO_SEEK_TO_LIVE)(l=os(this,Ga))==null||l.dispatch({type:"optionschangerequest",detail:{noAutoSeekToLive:this.hasAttribute(kn.NO_AUTO_SEEK_TO_LIVE)}});else if(e===kn.FULLSCREEN_ELEMENT){const x=n?(d=this.getRootNode())==null?void 0:d.getElementById(n):void 0;pm(this,kw,x),(f=os(this,Ga))==null||f.dispatch({type:"fullscreenelementchangerequest",detail:this.fullscreenElement})}else e===kn.LANG&&n!==r?(Mze(n),(A=os(this,Ga))==null||A.dispatch({type:"optionschangerequest",detail:{mediaLang:n}})):e===kn.LOOP&&n!==r?(p=os(this,Ga))==null||p.dispatch({type:zn.MEDIA_LOOP_REQUEST,detail:n!=null}):e===kn.NO_VOLUME_PREF&&n!==r?(g=os(this,Ga))==null||g.dispatch({type:"optionschangerequest",detail:{noVolumePref:this.hasAttribute(kn.NO_VOLUME_PREF)}}):e===kn.NO_MUTED_PREF&&n!==r&&((y=os(this,Ga))==null||y.dispatch({type:"optionschangerequest",detail:{noMutedPref:this.hasAttribute(kn.NO_MUTED_PREF)}}))}connectedCallback(){var e,r;!os(this,Ga)&&!this.hasAttribute(kn.NO_DEFAULT_STORE)&&Nm(this,jT,WO).call(this),(e=os(this,Ga))==null||e.dispatch({type:"documentelementchangerequest",detail:vu}),super.connectedCallback(),os(this,Ga)&&!os(this,gm)&&pm(this,gm,(r=os(this,Ga))==null?void 0:r.subscribe(os(this,Iw))),os(this,Lw)!==void 0&&os(this,Ga)&&this.media&&setTimeout(()=>{var n,i,s;(i=(n=this.media)==null?void 0:n.textTracks)!=null&&i.length&&((s=os(this,Ga))==null||s.dispatch({type:zn.MEDIA_TOGGLE_SUBTITLES_REQUEST,detail:os(this,Lw)}))},0),this.hasAttribute(kn.NO_HOTKEYS)?this.disableHotkeys():this.enableHotkeys()}disconnectedCallback(){var e,r,n,i,s;if((e=super.disconnectedCallback)==null||e.call(this),os(this,Ga)){const o=os(this,Ga).getState();pm(this,Lw,!!((r=o.mediaSubtitlesShowing)!=null&&r.length)),(n=os(this,Ga))==null||n.dispatch({type:"documentelementchangerequest",detail:void 0}),(i=os(this,Ga))==null||i.dispatch({type:zn.MEDIA_TOGGLE_SUBTITLES_REQUEST,detail:!1})}os(this,gm)&&((s=os(this,gm))==null||s.call(this),pm(this,gm,void 0))}mediaSetCallback(e){var r;super.mediaSetCallback(e),(r=os(this,Ga))==null||r.dispatch({type:"mediaelementchangerequest",detail:e}),e.hasAttribute("tabindex")||(e.tabIndex=-1)}mediaUnsetCallback(e){var r;super.mediaUnsetCallback(e),(r=os(this,Ga))==null||r.dispatch({type:"mediaelementchangerequest",detail:void 0})}propagateMediaState(e,r){YG(this.mediaStateReceivers,e,r)}associateElement(e){if(!e)return;const{associatedElementSubscriptions:r}=this;if(r.has(e))return;const n=this.registerMediaStateReceiver.bind(this),i=this.unregisterMediaStateReceiver.bind(this),s=kKe(e,n,i);Object.values(zn).forEach(o=>{e.addEventListener(o,os(this,CT))}),r.set(e,s)}unassociateElement(e){if(!e)return;const{associatedElementSubscriptions:r}=this;if(!r.has(e))return;r.get(e)(),r.delete(e),Object.values(zn).forEach(i=>{e.removeEventListener(i,os(this,CT))})}registerMediaStateReceiver(e){if(!e)return;const r=this.mediaStateReceivers;r.indexOf(e)>-1||(r.push(e),os(this,Ga)&&Object.entries(os(this,Ga).getState()).forEach(([i,s])=>{YG([e],i,s)}))}unregisterMediaStateReceiver(e){const r=this.mediaStateReceivers,n=r.indexOf(e);n<0||r.splice(n,1)}enableHotkeys(){this.addEventListener("keydown",Nm(this,NT,YO))}disableHotkeys(){this.removeEventListener("keydown",Nm(this,NT,YO)),this.removeEventListener("keyup",Nm(this,Jv,xb))}get hotkeys(){return Cl(this,kn.HOTKEYS)}set hotkeys(e){jl(this,kn.HOTKEYS,e)}keyboardShortcutHandler(e){var r,n,i,s,o,c,u,l,d;const f=e.target;if(((i=(n=(r=f.getAttribute(kn.KEYS_USED))==null?void 0:r.split(" "))!=null?n:f?.keysUsed)!=null?i:[]).map(w=>w==="Space"?" ":w).filter(Boolean).includes(e.key))return;let p,g,y;if(!(os(this,p0).contains(`no${e.key.toLowerCase()}`)||e.key===" "&&os(this,p0).contains("nospace")||e.shiftKey&&(e.key==="/"||e.key==="?")&&os(this,p0).contains("noshift+/")))switch(e.key){case" ":case"k":p=os(this,Ga).getState().mediaPaused?zn.MEDIA_PLAY_REQUEST:zn.MEDIA_PAUSE_REQUEST,this.dispatchEvent(new rr.CustomEvent(p,{composed:!0,bubbles:!0}));break;case"m":p=this.mediaStore.getState().mediaVolumeLevel==="off"?zn.MEDIA_UNMUTE_REQUEST:zn.MEDIA_MUTE_REQUEST,this.dispatchEvent(new rr.CustomEvent(p,{composed:!0,bubbles:!0}));break;case"f":p=this.mediaStore.getState().mediaIsFullscreen?zn.MEDIA_EXIT_FULLSCREEN_REQUEST:zn.MEDIA_ENTER_FULLSCREEN_REQUEST,this.dispatchEvent(new rr.CustomEvent(p,{composed:!0,bubbles:!0}));break;case"c":this.dispatchEvent(new rr.CustomEvent(zn.MEDIA_TOGGLE_SUBTITLES_REQUEST,{composed:!0,bubbles:!0}));break;case"ArrowLeft":case"j":{const w=this.hasAttribute(kn.KEYBOARD_BACKWARD_SEEK_OFFSET)?+this.getAttribute(kn.KEYBOARD_BACKWARD_SEEK_OFFSET):VG;g=Math.max(((s=this.mediaStore.getState().mediaCurrentTime)!=null?s:0)-w,0),y=new rr.CustomEvent(zn.MEDIA_SEEK_REQUEST,{composed:!0,bubbles:!0,detail:g}),this.dispatchEvent(y);break}case"ArrowRight":case"l":{const w=this.hasAttribute(kn.KEYBOARD_FORWARD_SEEK_OFFSET)?+this.getAttribute(kn.KEYBOARD_FORWARD_SEEK_OFFSET):VG;g=Math.max(((o=this.mediaStore.getState().mediaCurrentTime)!=null?o:0)+w,0),y=new rr.CustomEvent(zn.MEDIA_SEEK_REQUEST,{composed:!0,bubbles:!0,detail:g}),this.dispatchEvent(y);break}case"ArrowUp":{const w=this.hasAttribute(kn.KEYBOARD_UP_VOLUME_STEP)?+this.getAttribute(kn.KEYBOARD_UP_VOLUME_STEP):zG;g=Math.min(((c=this.mediaStore.getState().mediaVolume)!=null?c:1)+w,1),y=new rr.CustomEvent(zn.MEDIA_VOLUME_REQUEST,{composed:!0,bubbles:!0,detail:g}),this.dispatchEvent(y);break}case"ArrowDown":{const w=this.hasAttribute(kn.KEYBOARD_DOWN_VOLUME_STEP)?+this.getAttribute(kn.KEYBOARD_DOWN_VOLUME_STEP):zG;g=Math.max(((u=this.mediaStore.getState().mediaVolume)!=null?u:1)-w,0),y=new rr.CustomEvent(zn.MEDIA_VOLUME_REQUEST,{composed:!0,bubbles:!0,detail:g}),this.dispatchEvent(y);break}case"<":{const w=(l=this.mediaStore.getState().mediaPlaybackRate)!=null?l:1;g=Math.max(w-KG,EKe).toFixed(2),y=new rr.CustomEvent(zn.MEDIA_PLAYBACK_RATE_REQUEST,{composed:!0,bubbles:!0,detail:g}),this.dispatchEvent(y);break}case">":{const w=(d=this.mediaStore.getState().mediaPlaybackRate)!=null?d:1;g=Math.min(w+KG,_Ke).toFixed(2),y=new rr.CustomEvent(zn.MEDIA_PLAYBACK_RATE_REQUEST,{composed:!0,bubbles:!0,detail:g}),this.dispatchEvent(y);break}case"/":case"?":{e.shiftKey&&Nm(this,qO,jae).call(this);break}case"p":{p=this.mediaStore.getState().mediaIsPip?zn.MEDIA_EXIT_PIP_REQUEST:zn.MEDIA_ENTER_PIP_REQUEST,y=new rr.CustomEvent(p,{composed:!0,bubbles:!0}),this.dispatchEvent(y);break}}}}p0=new WeakMap;kw=new WeakMap;Ga=new WeakMap;Qv=new WeakMap;Iw=new WeakMap;gm=new WeakMap;CT=new WeakMap;Lw=new WeakMap;jT=new WeakSet;WO=function(){var t;this.mediaStore=wKe({media:this.media,fullscreenElement:this.fullscreenElement,options:{defaultSubtitles:this.hasAttribute(kn.DEFAULT_SUBTITLES),defaultDuration:this.hasAttribute(kn.DEFAULT_DURATION)?+this.getAttribute(kn.DEFAULT_DURATION):void 0,defaultStreamType:(t=this.getAttribute(kn.DEFAULT_STREAM_TYPE))!=null?t:void 0,liveEdgeOffset:this.hasAttribute(kn.LIVE_EDGE_OFFSET)?+this.getAttribute(kn.LIVE_EDGE_OFFSET):void 0,seekToLiveOffset:this.hasAttribute(kn.SEEK_TO_LIVE_OFFSET)?+this.getAttribute(kn.SEEK_TO_LIVE_OFFSET):this.hasAttribute(kn.LIVE_EDGE_OFFSET)?+this.getAttribute(kn.LIVE_EDGE_OFFSET):void 0,noAutoSeekToLive:this.hasAttribute(kn.NO_AUTO_SEEK_TO_LIVE),noVolumePref:this.hasAttribute(kn.NO_VOLUME_PREF),noMutedPref:this.hasAttribute(kn.NO_MUTED_PREF),noSubtitlesLangPref:this.hasAttribute(kn.NO_SUBTITLES_LANG_PREF)}})};Jv=new WeakSet;xb=function(t){const{key:e,shiftKey:r}=t;if(!(r&&(e==="/"||e==="?")||Nae.includes(e))){this.removeEventListener("keyup",Nm(this,Jv,xb));return}this.keyboardShortcutHandler(t)};NT=new WeakSet;YO=function(t){var e;const{metaKey:r,altKey:n,key:i,shiftKey:s}=t,o=s&&(i==="/"||i==="?");if(o&&((e=os(this,Qv))!=null&&e.open)){this.removeEventListener("keyup",Nm(this,Jv,xb));return}if(r||n||!o&&!Nae.includes(i)){this.removeEventListener("keyup",Nm(this,Jv,xb));return}const c=t.target,u=c instanceof HTMLElement&&(c.tagName.toLowerCase()==="media-volume-range"||c.tagName.toLowerCase()==="media-time-range");[" ","ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(i)&&!(os(this,p0).contains(`no${i.toLowerCase()}`)||i===" "&&os(this,p0).contains("nospace"))&&!u&&t.preventDefault(),this.addEventListener("keyup",Nm(this,Jv,xb),{once:!0})};qO=new WeakSet;jae=function(){os(this,Qv)||(pm(this,Qv,vu.createElement("media-keyboard-shortcuts-dialog")),this.appendChild(os(this,Qv))),os(this,Qv).open=!0};const SKe=Object.values(At),TKe=Object.values(tae),Iae=t=>{var e,r,n,i;let{observedAttributes:s}=t.constructor;!s&&((e=t.nodeName)!=null&&e.includes("-"))&&(rr.customElements.upgrade(t),{observedAttributes:s}=t.constructor);const o=(i=(n=(r=t?.getAttribute)==null?void 0:r.call(t,Ao.MEDIA_CHROME_ATTRIBUTES))==null?void 0:n.split)==null?void 0:i.call(n,/\s+/);return Array.isArray(s||o)?(s||o).filter(c=>SKe.includes(c)):[]},CKe=t=>{var e,r;return(e=t.nodeName)!=null&&e.includes("-")&&rr.customElements.get((r=t.nodeName)==null?void 0:r.toLowerCase())&&!(t instanceof rr.customElements.get(t.nodeName.toLowerCase()))&&rr.customElements.upgrade(t),TKe.some(n=>n in t)},XO=t=>CKe(t)||!!Iae(t).length,GG=t=>{var e;return(e=t?.join)==null?void 0:e.call(t,":")},WG={[At.MEDIA_SUBTITLES_LIST]:u2,[At.MEDIA_SUBTITLES_SHOWING]:u2,[At.MEDIA_SEEKABLE]:GG,[At.MEDIA_BUFFERED]:t=>t?.map(GG).join(" "),[At.MEDIA_PREVIEW_COORDS]:t=>t?.join(" "),[At.MEDIA_RENDITION_LIST]:Cze,[At.MEDIA_AUDIO_TRACK_LIST]:Ize},jKe=async(t,e,r)=>{var n,i;if(t.isConnected||await iae(0),typeof r=="boolean"||r==null)return Oa(t,e,r);if(typeof r=="number")return Mc(t,e,r);if(typeof r=="string")return jl(t,e,r);if(Array.isArray(r)&&!r.length)return t.removeAttribute(e);const s=(i=(n=WG[e])==null?void 0:n.call(WG,r))!=null?i:r;return t.setAttribute(e,s)},NKe=t=>{var e;return!!((e=t.closest)!=null&&e.call(t,'*[slot="media"]'))},wv=(t,e)=>{if(NKe(t))return;const r=(i,s)=>{var o,c;XO(i)&&s(i);const{children:u=[]}=i??{},l=(c=(o=i?.shadowRoot)==null?void 0:o.children)!=null?c:[];[...u,...l].forEach(f=>wv(f,s))},n=t?.nodeName.toLowerCase();if(n.includes("-")&&!XO(t)){rr.customElements.whenDefined(n).then(()=>{r(t,e)});return}r(t,e)},YG=(t,e,r)=>{t.forEach(n=>{if(e in n){n[e]=r;return}const i=Iae(n),s=e.toLowerCase();i.includes(s)&&jKe(n,s,r)})},kKe=(t,e,r)=>{wv(t,e);const n=d=>{var f;const A=(f=d?.composedPath()[0])!=null?f:d.target;e(A)},i=d=>{var f;const A=(f=d?.composedPath()[0])!=null?f:d.target;r(A)};t.addEventListener(zn.REGISTER_MEDIA_STATE_RECEIVER,n),t.addEventListener(zn.UNREGISTER_MEDIA_STATE_RECEIVER,i);const s=d=>{d.forEach(f=>{const{addedNodes:A=[],removedNodes:p=[],type:g,target:y,attributeName:x}=f;g==="childList"?(Array.prototype.forEach.call(A,w=>wv(w,e)),Array.prototype.forEach.call(p,w=>wv(w,r))):g==="attributes"&&x===Ao.MEDIA_CHROME_ATTRIBUTES&&(XO(y)?e(y):r(y))})};let o=[];const c=d=>{const f=d.target;f.name!=="media"&&(o.forEach(A=>wv(A,r)),o=[...f.assignedElements({flatten:!0})],o.forEach(A=>wv(A,e)))};t.addEventListener("slotchange",c);const u=new MutationObserver(s);return u.observe(t,{childList:!0,attributes:!0,subtree:!0}),()=>{wv(t,r),t.removeEventListener("slotchange",c),u.disconnect(),t.removeEventListener(zn.REGISTER_MEDIA_STATE_RECEIVER,n),t.removeEventListener(zn.UNREGISTER_MEDIA_STATE_RECEIVER,i)}};rr.customElements.get("media-controller")||rr.customElements.define("media-controller",kae);var IKe=kae;const ux={PLACEMENT:"placement",BOUNDS:"bounds"};function LKe(t){return`
    <style>
      :host {
        --_tooltip-background-color: var(--media-tooltip-background-color, var(--media-secondary-color, rgba(20, 20, 30, .7)));
        --_tooltip-background: var(--media-tooltip-background, var(--_tooltip-background-color));
        --_tooltip-arrow-half-width: calc(var(--media-tooltip-arrow-width, 12px) / 2);
        --_tooltip-arrow-height: var(--media-tooltip-arrow-height, 5px);
        --_tooltip-arrow-background: var(--media-tooltip-arrow-color, var(--_tooltip-background-color));
        position: relative;
        pointer-events: none;
        display: var(--media-tooltip-display, inline-flex);
        justify-content: center;
        align-items: center;
        box-sizing: border-box;
        z-index: var(--media-tooltip-z-index, 1);
        background: var(--_tooltip-background);
        color: var(--media-text-color, var(--media-primary-color, rgb(238 238 238)));
        font: var(--media-font,
          var(--media-font-weight, 400)
          var(--media-font-size, 13px) /
          var(--media-text-content-height, var(--media-control-height, 18px))
          var(--media-font-family, helvetica neue, segoe ui, roboto, arial, sans-serif));
        padding: var(--media-tooltip-padding, .35em .7em);
        border: var(--media-tooltip-border, none);
        border-radius: var(--media-tooltip-border-radius, 5px);
        filter: var(--media-tooltip-filter, drop-shadow(0 0 4px rgba(0, 0, 0, .2)));
        white-space: var(--media-tooltip-white-space, nowrap);
      }

      :host([hidden]) {
        display: none;
      }

      img, svg {
        display: inline-block;
      }

      #arrow {
        position: absolute;
        width: 0px;
        height: 0px;
        border-style: solid;
        display: var(--media-tooltip-arrow-display, block);
      }

      :host(:not([placement])),
      :host([placement="top"]) {
        position: absolute;
        bottom: calc(100% + var(--media-tooltip-distance, 12px));
        left: 50%;
        transform: translate(calc(-50% - var(--media-tooltip-offset-x, 0px)), 0);
      }
      :host(:not([placement])) #arrow,
      :host([placement="top"]) #arrow {
        top: 100%;
        left: 50%;
        border-width: var(--_tooltip-arrow-height) var(--_tooltip-arrow-half-width) 0 var(--_tooltip-arrow-half-width);
        border-color: var(--_tooltip-arrow-background) transparent transparent transparent;
        transform: translate(calc(-50% + var(--media-tooltip-offset-x, 0px)), 0);
      }

      :host([placement="right"]) {
        position: absolute;
        left: calc(100% + var(--media-tooltip-distance, 12px));
        top: 50%;
        transform: translate(0, -50%);
      }
      :host([placement="right"]) #arrow {
        top: 50%;
        right: 100%;
        border-width: var(--_tooltip-arrow-half-width) var(--_tooltip-arrow-height) var(--_tooltip-arrow-half-width) 0;
        border-color: transparent var(--_tooltip-arrow-background) transparent transparent;
        transform: translate(0, -50%);
      }

      :host([placement="bottom"]) {
        position: absolute;
        top: calc(100% + var(--media-tooltip-distance, 12px));
        left: 50%;
        transform: translate(calc(-50% - var(--media-tooltip-offset-x, 0px)), 0);
      }
      :host([placement="bottom"]) #arrow {
        bottom: 100%;
        left: 50%;
        border-width: 0 var(--_tooltip-arrow-half-width) var(--_tooltip-arrow-height) var(--_tooltip-arrow-half-width);
        border-color: transparent transparent var(--_tooltip-arrow-background) transparent;
        transform: translate(calc(-50% + var(--media-tooltip-offset-x, 0px)), 0);
      }

      :host([placement="left"]) {
        position: absolute;
        right: calc(100% + var(--media-tooltip-distance, 12px));
        top: 50%;
        transform: translate(0, -50%);
      }
      :host([placement="left"]) #arrow {
        top: 50%;
        left: 100%;
        border-width: var(--_tooltip-arrow-half-width) 0 var(--_tooltip-arrow-half-width) var(--_tooltip-arrow-height);
        border-color: transparent transparent transparent var(--_tooltip-arrow-background);
        transform: translate(0, -50%);
      }
      
      :host([placement="none"]) #arrow {
        display: none;
      }
    </style>
    <slot></slot>
    <div id="arrow"></div>
  `}class J5 extends rr.HTMLElement{constructor(){if(super(),this.updateXOffset=()=>{var e;if(!fae(this,{checkOpacity:!1,checkVisibilityCSS:!1}))return;const r=this.placement;if(r==="left"||r==="right"){this.style.removeProperty("--media-tooltip-offset-x");return}const n=getComputedStyle(this),i=(e=y1(this,"#"+this.bounds))!=null?e:Hh(this);if(!i)return;const{x:s,width:o}=i.getBoundingClientRect(),{x:c,width:u}=this.getBoundingClientRect(),l=c+u,d=s+o,f=n.getPropertyValue("--media-tooltip-offset-x"),A=f?parseFloat(f.replace("px","")):0,p=n.getPropertyValue("--media-tooltip-container-margin"),g=p?parseFloat(p.replace("px","")):0,y=c-s+A-g,x=l-d+A+g;if(y<0){this.style.setProperty("--media-tooltip-offset-x",`${y}px`);return}if(x>0){this.style.setProperty("--media-tooltip-offset-x",`${x}px`);return}this.style.removeProperty("--media-tooltip-offset-x")},!this.shadowRoot){this.attachShadow(this.constructor.shadowRootOptions);const e=Sf(this.attributes);this.shadowRoot.innerHTML=this.constructor.getTemplateHTML(e)}if(this.arrowEl=this.shadowRoot.querySelector("#arrow"),Object.prototype.hasOwnProperty.call(this,"placement")){const e=this.placement;delete this.placement,this.placement=e}}static get observedAttributes(){return[ux.PLACEMENT,ux.BOUNDS]}get placement(){return Cl(this,ux.PLACEMENT)}set placement(e){jl(this,ux.PLACEMENT,e)}get bounds(){return Cl(this,ux.BOUNDS)}set bounds(e){jl(this,ux.BOUNDS,e)}}J5.shadowRootOptions={mode:"open"};J5.getTemplateHTML=LKe;rr.customElements.get("media-tooltip")||rr.customElements.define("media-tooltip",J5);var qG=J5,nU=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},hu=(t,e,r)=>(nU(t,e,"read from private field"),r?r.call(t):e.get(t)),dx=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},kS=(t,e,r,n)=>(nU(t,e,"write to private field"),e.set(t,r),r),BKe=(t,e,r)=>(nU(t,e,"access private method"),r),vm,ib,g0,Nx,kT,ZO,Lae;const Wg={TOOLTIP_PLACEMENT:"tooltipplacement",DISABLED:"disabled",NO_TOOLTIP:"notooltip"};function PKe(t,e={}){return`
    <style>
      :host {
        position: relative;
        font: var(--media-font,
          var(--media-font-weight, bold)
          var(--media-font-size, 14px) /
          var(--media-text-content-height, var(--media-control-height, 24px))
          var(--media-font-family, helvetica neue, segoe ui, roboto, arial, sans-serif));
        color: var(--media-text-color, var(--media-primary-color, rgb(238 238 238)));
        background: var(--media-control-background, var(--media-secondary-color, rgb(20 20 30 / .7)));
        padding: var(--media-button-padding, var(--media-control-padding, 10px));
        justify-content: var(--media-button-justify-content, center);
        display: inline-flex;
        align-items: center;
        vertical-align: middle;
        box-sizing: border-box;
        transition: background .15s linear;
        pointer-events: auto;
        cursor: var(--media-cursor, pointer);
        -webkit-tap-highlight-color: transparent;
      }

      
      :host(:focus-visible) {
        box-shadow: var(--media-focus-box-shadow, inset 0 0 0 2px rgb(27 127 204 / .9));
        outline: 0;
      }
      
      :host(:where(:focus)) {
        box-shadow: none;
        outline: 0;
      }

      :host(:hover) {
        background: var(--media-control-hover-background, rgba(50 50 70 / .7));
      }

      svg, img, ::slotted(svg), ::slotted(img) {
        width: var(--media-button-icon-width);
        height: var(--media-button-icon-height, var(--media-control-height, 24px));
        transform: var(--media-button-icon-transform);
        transition: var(--media-button-icon-transition);
        fill: var(--media-icon-color, var(--media-primary-color, rgb(238 238 238)));
        vertical-align: middle;
        max-width: 100%;
        max-height: 100%;
        min-width: 100%;
      }

      media-tooltip {
        
        max-width: 0;
        overflow-x: clip;
        opacity: 0;
        transition: opacity .3s, max-width 0s 9s;
      }

      :host(:hover) media-tooltip,
      :host(:focus-visible) media-tooltip {
        max-width: 100vw;
        opacity: 1;
        transition: opacity .3s;
      }

      :host([notooltip]) slot[name="tooltip"] {
        display: none;
      }
    </style>

    ${this.getSlotTemplateHTML(t,e)}

    <slot name="tooltip">
      <media-tooltip part="tooltip" aria-hidden="true">
        <template shadowrootmode="${qG.shadowRootOptions.mode}">
          ${qG.getTemplateHTML({})}
        </template>
        <slot name="tooltip-content">
          ${this.getTooltipContentHTML(t)}
        </slot>
      </media-tooltip>
    </slot>
  `}function OKe(t,e){return`
    <slot></slot>
  `}function RKe(){return""}class vd extends rr.HTMLElement{constructor(){if(super(),dx(this,ZO),dx(this,vm,void 0),this.preventClick=!1,this.tooltipEl=null,dx(this,ib,e=>{this.preventClick||this.handleClick(e),setTimeout(hu(this,g0),0)}),dx(this,g0,()=>{var e,r;(r=(e=this.tooltipEl)==null?void 0:e.updateXOffset)==null||r.call(e)}),dx(this,Nx,e=>{const{key:r}=e;if(!this.keysUsed.includes(r)){this.removeEventListener("keyup",hu(this,Nx));return}this.preventClick||this.handleClick(e)}),dx(this,kT,e=>{const{metaKey:r,altKey:n,key:i}=e;if(r||n||!this.keysUsed.includes(i)){this.removeEventListener("keyup",hu(this,Nx));return}this.addEventListener("keyup",hu(this,Nx),{once:!0})}),!this.shadowRoot){this.attachShadow(this.constructor.shadowRootOptions);const e=Sf(this.attributes),r=this.constructor.getTemplateHTML(e);this.shadowRoot.setHTMLUnsafe?this.shadowRoot.setHTMLUnsafe(r):this.shadowRoot.innerHTML=r}this.tooltipEl=this.shadowRoot.querySelector("media-tooltip")}static get observedAttributes(){return["disabled",Wg.TOOLTIP_PLACEMENT,Ao.MEDIA_CONTROLLER,At.MEDIA_LANG]}enable(){this.addEventListener("click",hu(this,ib)),this.addEventListener("keydown",hu(this,kT)),this.tabIndex=0}disable(){this.removeEventListener("click",hu(this,ib)),this.removeEventListener("keydown",hu(this,kT)),this.removeEventListener("keyup",hu(this,Nx)),this.tabIndex=-1}attributeChangedCallback(e,r,n){var i,s,o,c,u;e===Ao.MEDIA_CONTROLLER?(r&&((s=(i=hu(this,vm))==null?void 0:i.unassociateElement)==null||s.call(i,this),kS(this,vm,null)),n&&this.isConnected&&(kS(this,vm,(o=this.getRootNode())==null?void 0:o.getElementById(n)),(u=(c=hu(this,vm))==null?void 0:c.associateElement)==null||u.call(c,this))):e==="disabled"&&n!==r?n==null?this.enable():this.disable():e===Wg.TOOLTIP_PLACEMENT&&this.tooltipEl&&n!==r?this.tooltipEl.placement=n:e===At.MEDIA_LANG&&(this.shadowRoot.querySelector('slot[name="tooltip-content"]').innerHTML=this.constructor.getTooltipContentHTML()),hu(this,g0).call(this)}connectedCallback(){var e,r,n;const{style:i}=Uu(this.shadowRoot,":host");i.setProperty("display",`var(--media-control-display, var(--${this.localName}-display, inline-flex))`),this.hasAttribute("disabled")?this.disable():this.enable(),this.setAttribute("role","button");const s=this.getAttribute(Ao.MEDIA_CONTROLLER);s&&(kS(this,vm,(e=this.getRootNode())==null?void 0:e.getElementById(s)),(n=(r=hu(this,vm))==null?void 0:r.associateElement)==null||n.call(r,this)),rr.customElements.whenDefined("media-tooltip").then(()=>BKe(this,ZO,Lae).call(this))}disconnectedCallback(){var e,r;this.disable(),(r=(e=hu(this,vm))==null?void 0:e.unassociateElement)==null||r.call(e,this),kS(this,vm,null),this.removeEventListener("mouseenter",hu(this,g0)),this.removeEventListener("focus",hu(this,g0)),this.removeEventListener("click",hu(this,ib))}get keysUsed(){return["Enter"," "]}get tooltipPlacement(){return Cl(this,Wg.TOOLTIP_PLACEMENT)}set tooltipPlacement(e){jl(this,Wg.TOOLTIP_PLACEMENT,e)}get mediaController(){return Cl(this,Ao.MEDIA_CONTROLLER)}set mediaController(e){jl(this,Ao.MEDIA_CONTROLLER,e)}get disabled(){return Pa(this,Wg.DISABLED)}set disabled(e){Oa(this,Wg.DISABLED,e)}get noTooltip(){return Pa(this,Wg.NO_TOOLTIP)}set noTooltip(e){Oa(this,Wg.NO_TOOLTIP,e)}handleClick(e){}}vm=new WeakMap;ib=new WeakMap;g0=new WeakMap;Nx=new WeakMap;kT=new WeakMap;ZO=new WeakSet;Lae=function(){this.addEventListener("mouseenter",hu(this,g0)),this.addEventListener("focus",hu(this,g0)),this.addEventListener("click",hu(this,ib));const t=this.tooltipPlacement;t&&this.tooltipEl&&(this.tooltipEl.placement=t)};vd.shadowRootOptions={mode:"open"};vd.getTemplateHTML=PKe;vd.getSlotTemplateHTML=OKe;vd.getTooltipContentHTML=RKe;rr.customElements.get("media-chrome-button")||rr.customElements.define("media-chrome-button",vd);const XG=`<svg aria-hidden="true" viewBox="0 0 26 24">
  <path d="M22.13 3H3.87a.87.87 0 0 0-.87.87v13.26a.87.87 0 0 0 .87.87h3.4L9 16H5V5h16v11h-4l1.72 2h3.4a.87.87 0 0 0 .87-.87V3.87a.87.87 0 0 0-.86-.87Zm-8.75 11.44a.5.5 0 0 0-.76 0l-4.91 5.73a.5.5 0 0 0 .38.83h9.82a.501.501 0 0 0 .38-.83l-4.91-5.73Z"/>
</svg>
`;function DKe(t){return`
    <style>
      :host([${At.MEDIA_IS_AIRPLAYING}]) slot[name=icon] slot:not([name=exit]) {
        display: none !important;
      }

      
      :host(:not([${At.MEDIA_IS_AIRPLAYING}])) slot[name=icon] slot:not([name=enter]) {
        display: none !important;
      }

      :host([${At.MEDIA_IS_AIRPLAYING}]) slot[name=tooltip-enter],
      :host(:not([${At.MEDIA_IS_AIRPLAYING}])) slot[name=tooltip-exit] {
        display: none;
      }
    </style>

    <slot name="icon">
      <slot name="enter">${XG}</slot>
      <slot name="exit">${XG}</slot>
    </slot>
  `}function MKe(){return`
    <slot name="tooltip-enter">${mi("start airplay")}</slot>
    <slot name="tooltip-exit">${mi("stop airplay")}</slot>
  `}const ZG=t=>{const e=t.mediaIsAirplaying?mi("stop airplay"):mi("start airplay");t.setAttribute("aria-label",e)};class iU extends vd{static get observedAttributes(){return[...super.observedAttributes,At.MEDIA_IS_AIRPLAYING,At.MEDIA_AIRPLAY_UNAVAILABLE]}connectedCallback(){super.connectedCallback(),ZG(this)}attributeChangedCallback(e,r,n){super.attributeChangedCallback(e,r,n),e===At.MEDIA_IS_AIRPLAYING&&ZG(this)}get mediaIsAirplaying(){return Pa(this,At.MEDIA_IS_AIRPLAYING)}set mediaIsAirplaying(e){Oa(this,At.MEDIA_IS_AIRPLAYING,e)}get mediaAirplayUnavailable(){return Cl(this,At.MEDIA_AIRPLAY_UNAVAILABLE)}set mediaAirplayUnavailable(e){jl(this,At.MEDIA_AIRPLAY_UNAVAILABLE,e)}handleClick(){const e=new rr.CustomEvent(zn.MEDIA_AIRPLAY_REQUEST,{composed:!0,bubbles:!0});this.dispatchEvent(e)}}iU.getSlotTemplateHTML=DKe;iU.getTooltipContentHTML=MKe;rr.customElements.get("media-airplay-button")||rr.customElements.define("media-airplay-button",iU);const FKe=`<svg aria-hidden="true" viewBox="0 0 26 24">
  <path d="M22.83 5.68a2.58 2.58 0 0 0-2.3-2.5c-3.62-.24-11.44-.24-15.06 0a2.58 2.58 0 0 0-2.3 2.5c-.23 4.21-.23 8.43 0 12.64a2.58 2.58 0 0 0 2.3 2.5c3.62.24 11.44.24 15.06 0a2.58 2.58 0 0 0 2.3-2.5c.23-4.21.23-8.43 0-12.64Zm-11.39 9.45a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.92 3.92 0 0 1 .92-2.77 3.18 3.18 0 0 1 2.43-1 2.94 2.94 0 0 1 2.13.78c.364.359.62.813.74 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.17 1.61 1.61 0 0 0-1.29.58 2.79 2.79 0 0 0-.5 1.89 3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.48 1.48 0 0 0 1-.37 2.1 2.1 0 0 0 .59-1.14l1.4.44a3.23 3.23 0 0 1-1.07 1.69Zm7.22 0a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.88 3.88 0 0 1 .93-2.77 3.14 3.14 0 0 1 2.42-1 3 3 0 0 1 2.16.82 2.8 2.8 0 0 1 .73 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.21 1.61 1.61 0 0 0-1.29.58A2.79 2.79 0 0 0 15 12a3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.44 1.44 0 0 0 1-.37 2.1 2.1 0 0 0 .6-1.15l1.4.44a3.17 3.17 0 0 1-1.1 1.7Z"/>
</svg>`,UKe=`<svg aria-hidden="true" viewBox="0 0 26 24">
  <path d="M17.73 14.09a1.4 1.4 0 0 1-1 .37 1.579 1.579 0 0 1-1.27-.58A3 3 0 0 1 15 12a2.8 2.8 0 0 1 .5-1.85 1.63 1.63 0 0 1 1.29-.57 1.47 1.47 0 0 1 1.51 1.2l1.43-.34A2.89 2.89 0 0 0 19 9.07a3 3 0 0 0-2.14-.78 3.14 3.14 0 0 0-2.42 1 3.91 3.91 0 0 0-.93 2.78 3.74 3.74 0 0 0 .92 2.66 3.07 3.07 0 0 0 2.34 1 3.07 3.07 0 0 0 1.91-.57 3.17 3.17 0 0 0 1.07-1.74l-1.4-.45c-.083.43-.3.822-.62 1.12Zm-7.22 0a1.43 1.43 0 0 1-1 .37 1.58 1.58 0 0 1-1.27-.58A3 3 0 0 1 7.76 12a2.8 2.8 0 0 1 .5-1.85 1.63 1.63 0 0 1 1.29-.57 1.47 1.47 0 0 1 1.51 1.2l1.43-.34a2.81 2.81 0 0 0-.74-1.32 2.94 2.94 0 0 0-2.13-.78 3.18 3.18 0 0 0-2.43 1 4 4 0 0 0-.92 2.78 3.74 3.74 0 0 0 .92 2.66 3.07 3.07 0 0 0 2.34 1 3.07 3.07 0 0 0 1.91-.57 3.23 3.23 0 0 0 1.07-1.74l-1.4-.45a2.06 2.06 0 0 1-.6 1.07Zm12.32-8.41a2.59 2.59 0 0 0-2.3-2.51C18.72 3.05 15.86 3 13 3c-2.86 0-5.72.05-7.53.17a2.59 2.59 0 0 0-2.3 2.51c-.23 4.207-.23 8.423 0 12.63a2.57 2.57 0 0 0 2.3 2.5c1.81.13 4.67.19 7.53.19 2.86 0 5.72-.06 7.53-.19a2.57 2.57 0 0 0 2.3-2.5c.23-4.207.23-8.423 0-12.63Zm-1.49 12.53a1.11 1.11 0 0 1-.91 1.11c-1.67.11-4.45.18-7.43.18-2.98 0-5.76-.07-7.43-.18a1.11 1.11 0 0 1-.91-1.11c-.21-4.14-.21-8.29 0-12.43a1.11 1.11 0 0 1 .91-1.11C7.24 4.56 10 4.49 13 4.49s5.76.07 7.43.18a1.11 1.11 0 0 1 .91 1.11c.21 4.14.21 8.29 0 12.43Z"/>
</svg>`;function $Ke(t){return`
    <style>
      :host([aria-checked="true"]) slot[name=off] {
        display: none !important;
      }

      
      :host(:not([aria-checked="true"])) slot[name=on] {
        display: none !important;
      }

      :host([aria-checked="true"]) slot[name=tooltip-enable],
      :host(:not([aria-checked="true"])) slot[name=tooltip-disable] {
        display: none;
      }
    </style>

    <slot name="icon">
      <slot name="on">${FKe}</slot>
      <slot name="off">${UKe}</slot>
    </slot>
  `}function HKe(){return`
    <slot name="tooltip-enable">${mi("Enable captions")}</slot>
    <slot name="tooltip-disable">${mi("Disable captions")}</slot>
  `}const JG=t=>{t.setAttribute("aria-checked",Eae(t).toString())};class sU extends vd{static get observedAttributes(){return[...super.observedAttributes,At.MEDIA_SUBTITLES_LIST,At.MEDIA_SUBTITLES_SHOWING]}connectedCallback(){super.connectedCallback(),this.setAttribute("role","switch"),this.setAttribute("aria-label",mi("closed captions")),JG(this)}attributeChangedCallback(e,r,n){super.attributeChangedCallback(e,r,n),e===At.MEDIA_SUBTITLES_SHOWING&&JG(this)}get mediaSubtitlesList(){return eW(this,At.MEDIA_SUBTITLES_LIST)}set mediaSubtitlesList(e){tW(this,At.MEDIA_SUBTITLES_LIST,e)}get mediaSubtitlesShowing(){return eW(this,At.MEDIA_SUBTITLES_SHOWING)}set mediaSubtitlesShowing(e){tW(this,At.MEDIA_SUBTITLES_SHOWING,e)}handleClick(){this.dispatchEvent(new rr.CustomEvent(zn.MEDIA_TOGGLE_SUBTITLES_REQUEST,{composed:!0,bubbles:!0}))}}sU.getSlotTemplateHTML=$Ke;sU.getTooltipContentHTML=HKe;const eW=(t,e)=>{const r=t.getAttribute(e);return r?X5(r):[]},tW=(t,e,r)=>{if(!r?.length){t.removeAttribute(e);return}const n=u2(r);t.getAttribute(e)!==n&&t.setAttribute(e,n)};rr.customElements.get("media-captions-button")||rr.customElements.define("media-captions-button",sU);const QKe='<svg aria-hidden="true" viewBox="0 0 24 24"><g><path class="cast_caf_icon_arch0" d="M1,18 L1,21 L4,21 C4,19.3 2.66,18 1,18 L1,18 Z"/><path class="cast_caf_icon_arch1" d="M1,14 L1,16 C3.76,16 6,18.2 6,21 L8,21 C8,17.13 4.87,14 1,14 L1,14 Z"/><path class="cast_caf_icon_arch2" d="M1,10 L1,12 C5.97,12 10,16.0 10,21 L12,21 C12,14.92 7.07,10 1,10 L1,10 Z"/><path class="cast_caf_icon_box" d="M21,3 L3,3 C1.9,3 1,3.9 1,5 L1,8 L3,8 L3,5 L21,5 L21,19 L14,19 L14,21 L21,21 C22.1,21 23,20.1 23,19 L23,5 C23,3.9 22.1,3 21,3 L21,3 Z"/></g></svg>',VKe='<svg aria-hidden="true" viewBox="0 0 24 24"><g><path class="cast_caf_icon_arch0" d="M1,18 L1,21 L4,21 C4,19.3 2.66,18 1,18 L1,18 Z"/><path class="cast_caf_icon_arch1" d="M1,14 L1,16 C3.76,16 6,18.2 6,21 L8,21 C8,17.13 4.87,14 1,14 L1,14 Z"/><path class="cast_caf_icon_arch2" d="M1,10 L1,12 C5.97,12 10,16.0 10,21 L12,21 C12,14.92 7.07,10 1,10 L1,10 Z"/><path class="cast_caf_icon_box" d="M21,3 L3,3 C1.9,3 1,3.9 1,5 L1,8 L3,8 L3,5 L21,5 L21,19 L14,19 L14,21 L21,21 C22.1,21 23,20.1 23,19 L23,5 C23,3.9 22.1,3 21,3 L21,3 Z"/><path class="cast_caf_icon_boxfill" d="M5,7 L5,8.63 C8,8.6 13.37,14 13.37,17 L19,17 L19,7 Z"/></g></svg>';function zKe(t){return`
    <style>
      :host([${At.MEDIA_IS_CASTING}]) slot[name=icon] slot:not([name=exit]) {
        display: none !important;
      }

      
      :host(:not([${At.MEDIA_IS_CASTING}])) slot[name=icon] slot:not([name=enter]) {
        display: none !important;
      }

      :host([${At.MEDIA_IS_CASTING}]) slot[name=tooltip-enter],
      :host(:not([${At.MEDIA_IS_CASTING}])) slot[name=tooltip-exit] {
        display: none;
      }
    </style>

    <slot name="icon">
      <slot name="enter">${QKe}</slot>
      <slot name="exit">${VKe}</slot>
    </slot>
  `}function KKe(){return`
    <slot name="tooltip-enter">${mi("Start casting")}</slot>
    <slot name="tooltip-exit">${mi("Stop casting")}</slot>
  `}const rW=t=>{const e=t.mediaIsCasting?mi("stop casting"):mi("start casting");t.setAttribute("aria-label",e)};class aU extends vd{static get observedAttributes(){return[...super.observedAttributes,At.MEDIA_IS_CASTING,At.MEDIA_CAST_UNAVAILABLE]}connectedCallback(){super.connectedCallback(),rW(this)}attributeChangedCallback(e,r,n){super.attributeChangedCallback(e,r,n),e===At.MEDIA_IS_CASTING&&rW(this)}get mediaIsCasting(){return Pa(this,At.MEDIA_IS_CASTING)}set mediaIsCasting(e){Oa(this,At.MEDIA_IS_CASTING,e)}get mediaCastUnavailable(){return Cl(this,At.MEDIA_CAST_UNAVAILABLE)}set mediaCastUnavailable(e){jl(this,At.MEDIA_CAST_UNAVAILABLE,e)}handleClick(){const e=this.mediaIsCasting?zn.MEDIA_EXIT_CAST_REQUEST:zn.MEDIA_ENTER_CAST_REQUEST;this.dispatchEvent(new rr.CustomEvent(e,{composed:!0,bubbles:!0}))}}aU.getSlotTemplateHTML=zKe;aU.getTooltipContentHTML=KKe;rr.customElements.get("media-cast-button")||rr.customElements.define("media-cast-button",aU);var oU=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},ey=(t,e,r)=>(oU(t,e,"read from private field"),e.get(t)),_p=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},lU=(t,e,r,n)=>(oU(t,e,"write to private field"),e.set(t,r),r),hv=(t,e,r)=>(oU(t,e,"access private method"),r),lN,d2,xy,IT,JO,eR,Bae,tR,Pae,rR,Oae,nR,Rae,iR,Dae;function GKe(t){return`
    <style>
      :host {
        font: var(--media-font,
          var(--media-font-weight, normal)
          var(--media-font-size, 14px) /
          var(--media-text-content-height, var(--media-control-height, 24px))
          var(--media-font-family, helvetica neue, segoe ui, roboto, arial, sans-serif));
        color: var(--media-text-color, var(--media-primary-color, rgb(238 238 238)));
        display: var(--media-dialog-display, inline-flex);
        justify-content: center;
        align-items: center;
        
        transition-behavior: allow-discrete;
        visibility: hidden;
        opacity: 0;
        transform: translateY(2px) scale(.99);
        pointer-events: none;
      }

      :host([open]) {
        transition: display .2s, visibility 0s, opacity .2s ease-out, transform .15s ease-out;
        visibility: visible;
        opacity: 1;
        transform: translateY(0) scale(1);
        pointer-events: auto;
      }

      #content {
        display: flex;
        position: relative;
        box-sizing: border-box;
        width: min(320px, 100%);
        word-wrap: break-word;
        max-height: 100%;
        overflow: auto;
        text-align: center;
        line-height: 1.4;
      }
    </style>
    ${this.getSlotTemplateHTML(t)}
  `}function WKe(t){return`
    <slot id="content"></slot>
  `}const nw={OPEN:"open",ANCHOR:"anchor"};class x1 extends rr.HTMLElement{constructor(){super(),_p(this,IT),_p(this,eR),_p(this,tR),_p(this,rR),_p(this,nR),_p(this,iR),_p(this,lN,!1),_p(this,d2,null),_p(this,xy,null),this.addEventListener("invoke",this),this.addEventListener("focusout",this),this.addEventListener("keydown",this)}static get observedAttributes(){return[nw.OPEN,nw.ANCHOR]}get open(){return Pa(this,nw.OPEN)}set open(e){Oa(this,nw.OPEN,e)}handleEvent(e){switch(e.type){case"invoke":hv(this,rR,Oae).call(this,e);break;case"focusout":hv(this,nR,Rae).call(this,e);break;case"keydown":hv(this,iR,Dae).call(this,e);break}}connectedCallback(){hv(this,IT,JO).call(this),this.role||(this.role="dialog")}attributeChangedCallback(e,r,n){hv(this,IT,JO).call(this),e===nw.OPEN&&n!==r&&(this.open?hv(this,eR,Bae).call(this):hv(this,tR,Pae).call(this))}focus(){lU(this,d2,YF());const e=!this.dispatchEvent(new Event("focus",{composed:!0,cancelable:!0})),r=!this.dispatchEvent(new Event("focusin",{composed:!0,bubbles:!0,cancelable:!0}));if(e||r)return;const n=this.querySelector('[autofocus], [tabindex]:not([tabindex="-1"]), [role="menu"]');n?.focus()}get keysUsed(){return["Escape","Tab"]}}lN=new WeakMap;d2=new WeakMap;xy=new WeakMap;IT=new WeakSet;JO=function(){if(!ey(this,lN)&&(lU(this,lN,!0),!this.shadowRoot)){this.attachShadow(this.constructor.shadowRootOptions);const t=Sf(this.attributes);this.shadowRoot.innerHTML=this.constructor.getTemplateHTML(t),queueMicrotask(()=>{const{style:e}=Uu(this.shadowRoot,":host");e.setProperty("transition","display .15s, visibility .15s, opacity .15s ease-in, transform .15s ease-in")})}};eR=new WeakSet;Bae=function(){var t;(t=ey(this,xy))==null||t.setAttribute("aria-expanded","true"),this.dispatchEvent(new Event("open",{composed:!0,bubbles:!0})),this.addEventListener("transitionend",()=>this.focus(),{once:!0})};tR=new WeakSet;Pae=function(){var t;(t=ey(this,xy))==null||t.setAttribute("aria-expanded","false"),this.dispatchEvent(new Event("close",{composed:!0,bubbles:!0}))};rR=new WeakSet;Oae=function(t){lU(this,xy,t.relatedTarget),Ag(this,t.relatedTarget)||(this.open=!this.open)};nR=new WeakSet;Rae=function(t){var e;Ag(this,t.relatedTarget)||((e=ey(this,d2))==null||e.focus(),ey(this,xy)&&ey(this,xy)!==t.relatedTarget&&this.open&&(this.open=!1))};iR=new WeakSet;Dae=function(t){var e,r,n,i,s;const{key:o,ctrlKey:c,altKey:u,metaKey:l}=t;c||u||l||this.keysUsed.includes(o)&&(t.preventDefault(),t.stopPropagation(),o==="Tab"?(t.shiftKey?(r=(e=this.previousElementSibling)==null?void 0:e.focus)==null||r.call(e):(i=(n=this.nextElementSibling)==null?void 0:n.focus)==null||i.call(n),this.blur()):o==="Escape"&&((s=ey(this,d2))==null||s.focus(),this.open=!1))};x1.shadowRootOptions={mode:"open"};x1.getTemplateHTML=GKe;x1.getSlotTemplateHTML=WKe;rr.customElements.get("media-chrome-dialog")||rr.customElements.define("media-chrome-dialog",x1);var cU=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},oc=(t,e,r)=>(cU(t,e,"read from private field"),r?r.call(t):e.get(t)),Pd=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},e0=(t,e,r,n)=>(cU(t,e,"write to private field"),e.set(t,r),r),_A=(t,e,r)=>(cU(t,e,"access private method"),r),ym,ek,LT,BT,TA,cN,PT,OT,RT,uU,Mae,DT,sR,MT,aR,uN,dU,oR,Fae,lR,Uae,cR,$ae,uR,Hae;function YKe(t){return`
    <style>
      :host {
        --_focus-box-shadow: var(--media-focus-box-shadow, inset 0 0 0 2px rgb(27 127 204 / .9));
        --_media-range-padding: var(--media-range-padding, var(--media-control-padding, 10px));

        box-shadow: var(--_focus-visible-box-shadow, none);
        background: var(--media-control-background, var(--media-secondary-color, rgb(20 20 30 / .7)));
        height: calc(var(--media-control-height, 24px) + 2 * var(--_media-range-padding));
        display: inline-flex;
        align-items: center;
        
        vertical-align: middle;
        box-sizing: border-box;
        position: relative;
        width: 100px;
        transition: background .15s linear;
        cursor: var(--media-cursor, pointer);
        pointer-events: auto;
        touch-action: none; 
      }

      
      input[type=range]:focus {
        outline: 0;
      }
      input[type=range]:focus::-webkit-slider-runnable-track {
        outline: 0;
      }

      :host(:hover) {
        background: var(--media-control-hover-background, rgb(50 50 70 / .7));
      }

      #leftgap {
        padding-left: var(--media-range-padding-left, var(--_media-range-padding));
      }

      #rightgap {
        padding-right: var(--media-range-padding-right, var(--_media-range-padding));
      }

      #startpoint,
      #endpoint {
        position: absolute;
      }

      #endpoint {
        right: 0;
      }

      #container {
        
        width: var(--media-range-track-width, 100%);
        transform: translate(var(--media-range-track-translate-x, 0px), var(--media-range-track-translate-y, 0px));
        position: relative;
        height: 100%;
        display: flex;
        align-items: center;
        min-width: 40px;
      }

      #range {
        
        display: var(--media-time-range-hover-display, block);
        bottom: var(--media-time-range-hover-bottom, -7px);
        height: var(--media-time-range-hover-height, max(100% + 7px, 25px));
        width: 100%;
        position: absolute;
        cursor: var(--media-cursor, pointer);

        -webkit-appearance: none; 
        -webkit-tap-highlight-color: transparent;
        background: transparent; 
        margin: 0;
        z-index: 1;
      }

      @media (hover: hover) {
        #range {
          bottom: var(--media-time-range-hover-bottom, -5px);
          height: var(--media-time-range-hover-height, max(100% + 5px, 20px));
        }
      }

      
      
      #range::-webkit-slider-thumb {
        -webkit-appearance: none;
        background: transparent;
        width: .1px;
        height: .1px;
      }

      
      #range::-moz-range-thumb {
        background: transparent;
        border: transparent;
        width: .1px;
        height: .1px;
      }

      #appearance {
        height: var(--media-range-track-height, 4px);
        display: flex;
        flex-direction: column;
        justify-content: center;
        width: 100%;
        position: absolute;
        
        will-change: transform;
      }

      #track {
        background: var(--media-range-track-background, rgb(255 255 255 / .2));
        border-radius: var(--media-range-track-border-radius, 1px);
        border: var(--media-range-track-border, none);
        outline: var(--media-range-track-outline);
        outline-offset: var(--media-range-track-outline-offset);
        backdrop-filter: var(--media-range-track-backdrop-filter);
        -webkit-backdrop-filter: var(--media-range-track-backdrop-filter);
        box-shadow: var(--media-range-track-box-shadow, none);
        position: absolute;
        width: 100%;
        height: 100%;
        overflow: hidden;
      }

      #progress,
      #pointer {
        position: absolute;
        height: 100%;
        will-change: width;
      }

      #progress {
        background: var(--media-range-bar-color, var(--media-primary-color, rgb(238 238 238)));
        transition: var(--media-range-track-transition);
      }

      #pointer {
        background: var(--media-range-track-pointer-background);
        border-right: var(--media-range-track-pointer-border-right);
        transition: visibility .25s, opacity .25s;
        visibility: hidden;
        opacity: 0;
      }

      @media (hover: hover) {
        :host(:hover) #pointer {
          transition: visibility .5s, opacity .5s;
          visibility: visible;
          opacity: 1;
        }
      }

      #thumb,
      ::slotted([slot=thumb]) {
        width: var(--media-range-thumb-width, 10px);
        height: var(--media-range-thumb-height, 10px);
        transition: var(--media-range-thumb-transition);
        transform: var(--media-range-thumb-transform, none);
        opacity: var(--media-range-thumb-opacity, 1);
        translate: -50%;
        position: absolute;
        left: 0;
        cursor: var(--media-cursor, pointer);
      }

      #thumb {
        border-radius: var(--media-range-thumb-border-radius, 10px);
        background: var(--media-range-thumb-background, var(--media-primary-color, rgb(238 238 238)));
        box-shadow: var(--media-range-thumb-box-shadow, 1px 1px 1px transparent);
        border: var(--media-range-thumb-border, none);
      }

      :host([disabled]) #thumb {
        background-color: #777;
      }

      .segments #appearance {
        height: var(--media-range-segment-hover-height, 7px);
      }

      #track {
        clip-path: url(#segments-clipping);
      }

      #segments {
        --segments-gap: var(--media-range-segments-gap, 2px);
        position: absolute;
        width: 100%;
        height: 100%;
      }

      #segments-clipping {
        transform: translateX(calc(var(--segments-gap) / 2));
      }

      #segments-clipping:empty {
        display: none;
      }

      #segments-clipping rect {
        height: var(--media-range-track-height, 4px);
        y: calc((var(--media-range-segment-hover-height, 7px) - var(--media-range-track-height, 4px)) / 2);
        transition: var(--media-range-segment-transition, transform .1s ease-in-out);
        transform: var(--media-range-segment-transform, scaleY(1));
        transform-origin: center;
      }
    </style>
    <div id="leftgap"></div>
    <div id="container">
      <div id="startpoint"></div>
      <div id="endpoint"></div>
      <div id="appearance">
        <div id="track" part="track">
          <div id="pointer"></div>
          <div id="progress" part="progress"></div>
        </div>
        <slot name="thumb">
          <div id="thumb" part="thumb"></div>
        </slot>
        <svg id="segments"><clipPath id="segments-clipping"></clipPath></svg>
      </div>
      <input id="range" type="range" min="0" max="1" step="any" value="0">

      ${this.getContainerTemplateHTML(t)}
    </div>
    <div id="rightgap"></div>
  `}function qKe(t){return""}class b1 extends rr.HTMLElement{constructor(){if(super(),Pd(this,uU),Pd(this,DT),Pd(this,MT),Pd(this,uN),Pd(this,oR),Pd(this,lR),Pd(this,cR),Pd(this,uR),Pd(this,ym,void 0),Pd(this,ek,void 0),Pd(this,LT,void 0),Pd(this,BT,void 0),Pd(this,TA,{}),Pd(this,cN,[]),Pd(this,PT,()=>{if(this.range.matches(":focus-visible")){const{style:e}=Uu(this.shadowRoot,":host");e.setProperty("--_focus-visible-box-shadow","var(--_focus-box-shadow)")}}),Pd(this,OT,()=>{const{style:e}=Uu(this.shadowRoot,":host");e.removeProperty("--_focus-visible-box-shadow")}),Pd(this,RT,()=>{const e=this.shadowRoot.querySelector("#segments-clipping");e&&e.parentNode.append(e)}),!this.shadowRoot){this.attachShadow(this.constructor.shadowRootOptions);const e=Sf(this.attributes),r=this.constructor.getTemplateHTML(e);this.shadowRoot.setHTMLUnsafe?this.shadowRoot.setHTMLUnsafe(r):this.shadowRoot.innerHTML=r}this.container=this.shadowRoot.querySelector("#container"),e0(this,LT,this.shadowRoot.querySelector("#startpoint")),e0(this,BT,this.shadowRoot.querySelector("#endpoint")),this.range=this.shadowRoot.querySelector("#range"),this.appearance=this.shadowRoot.querySelector("#appearance")}static get observedAttributes(){return["disabled","aria-disabled",Ao.MEDIA_CONTROLLER]}attributeChangedCallback(e,r,n){var i,s,o,c,u;e===Ao.MEDIA_CONTROLLER?(r&&((s=(i=oc(this,ym))==null?void 0:i.unassociateElement)==null||s.call(i,this),e0(this,ym,null)),n&&this.isConnected&&(e0(this,ym,(o=this.getRootNode())==null?void 0:o.getElementById(n)),(u=(c=oc(this,ym))==null?void 0:c.associateElement)==null||u.call(c,this))):(e==="disabled"||e==="aria-disabled"&&r!==n)&&(n==null?(this.range.removeAttribute(e),_A(this,DT,sR).call(this)):(this.range.setAttribute(e,n),_A(this,MT,aR).call(this)))}connectedCallback(){var e,r,n;const{style:i}=Uu(this.shadowRoot,":host");i.setProperty("display",`var(--media-control-display, var(--${this.localName}-display, inline-flex))`),oc(this,TA).pointer=Uu(this.shadowRoot,"#pointer"),oc(this,TA).progress=Uu(this.shadowRoot,"#progress"),oc(this,TA).thumb=Uu(this.shadowRoot,'#thumb, ::slotted([slot="thumb"])'),oc(this,TA).activeSegment=Uu(this.shadowRoot,"#segments-clipping rect:nth-child(0)");const s=this.getAttribute(Ao.MEDIA_CONTROLLER);s&&(e0(this,ym,(e=this.getRootNode())==null?void 0:e.getElementById(s)),(n=(r=oc(this,ym))==null?void 0:r.associateElement)==null||n.call(r,this)),this.updateBar(),this.shadowRoot.addEventListener("focusin",oc(this,PT)),this.shadowRoot.addEventListener("focusout",oc(this,OT)),_A(this,DT,sR).call(this),Vb(this.container,oc(this,RT))}disconnectedCallback(){var e,r;_A(this,MT,aR).call(this),(r=(e=oc(this,ym))==null?void 0:e.unassociateElement)==null||r.call(e,this),e0(this,ym,null),this.shadowRoot.removeEventListener("focusin",oc(this,PT)),this.shadowRoot.removeEventListener("focusout",oc(this,OT)),zb(this.container,oc(this,RT))}updatePointerBar(e){var r;(r=oc(this,TA).pointer)==null||r.style.setProperty("width",`${this.getPointerRatio(e)*100}%`)}updateBar(){var e,r;const n=this.range.valueAsNumber*100;(e=oc(this,TA).progress)==null||e.style.setProperty("width",`${n}%`),(r=oc(this,TA).thumb)==null||r.style.setProperty("left",`${n}%`)}updateSegments(e){const r=this.shadowRoot.querySelector("#segments-clipping");if(r.textContent="",this.container.classList.toggle("segments",!!e?.length),!e?.length)return;const n=[...new Set([+this.range.min,...e.flatMap(s=>[s.start,s.end]),+this.range.max])];e0(this,cN,[...n]);const i=n.pop();for(const[s,o]of n.entries()){const[c,u]=[s===0,s===n.length-1],l=c?"calc(var(--segments-gap) / -1)":`${o*100}%`,f=`calc(${((u?i:n[s+1])-o)*100}%${c||u?"":" - var(--segments-gap)"})`,A=vu.createElementNS("http://www.w3.org/2000/svg","rect"),p=qF(this.shadowRoot,`#segments-clipping rect:nth-child(${s+1})`);p.style.setProperty("x",l),p.style.setProperty("width",f),r.append(A)}}getPointerRatio(e){return Hze(e.clientX,e.clientY,oc(this,LT).getBoundingClientRect(),oc(this,BT).getBoundingClientRect())}get dragging(){return this.hasAttribute("dragging")}handleEvent(e){switch(e.type){case"pointermove":_A(this,uR,Hae).call(this,e);break;case"input":this.updateBar();break;case"pointerenter":_A(this,oR,Fae).call(this,e);break;case"pointerdown":_A(this,uN,dU).call(this,e);break;case"pointerup":_A(this,lR,Uae).call(this);break;case"pointerleave":_A(this,cR,$ae).call(this);break}}get keysUsed(){return["ArrowUp","ArrowRight","ArrowDown","ArrowLeft"]}}ym=new WeakMap;ek=new WeakMap;LT=new WeakMap;BT=new WeakMap;TA=new WeakMap;cN=new WeakMap;PT=new WeakMap;OT=new WeakMap;RT=new WeakMap;uU=new WeakSet;Mae=function(t){const e=oc(this,TA).activeSegment;if(!e)return;const r=this.getPointerRatio(t),i=`#segments-clipping rect:nth-child(${oc(this,cN).findIndex((s,o,c)=>{const u=c[o+1];return u!=null&&r>=s&&r<=u})+1})`;(e.selectorText!=i||!e.style.transform)&&(e.selectorText=i,e.style.setProperty("transform","var(--media-range-segment-hover-transform, scaleY(2))"))};DT=new WeakSet;sR=function(){this.hasAttribute("disabled")||(this.addEventListener("input",this),this.addEventListener("pointerdown",this),this.addEventListener("pointerenter",this))};MT=new WeakSet;aR=function(){var t,e;this.removeEventListener("input",this),this.removeEventListener("pointerdown",this),this.removeEventListener("pointerenter",this),(t=rr.window)==null||t.removeEventListener("pointerup",this),(e=rr.window)==null||e.removeEventListener("pointermove",this)};uN=new WeakSet;dU=function(t){var e;e0(this,ek,t.composedPath().includes(this.range)),(e=rr.window)==null||e.addEventListener("pointerup",this)};oR=new WeakSet;Fae=function(t){var e;t.pointerType!=="mouse"&&_A(this,uN,dU).call(this,t),this.addEventListener("pointerleave",this),(e=rr.window)==null||e.addEventListener("pointermove",this)};lR=new WeakSet;Uae=function(){var t;(t=rr.window)==null||t.removeEventListener("pointerup",this),this.toggleAttribute("dragging",!1),this.range.disabled=this.hasAttribute("disabled")};cR=new WeakSet;$ae=function(){var t,e;this.removeEventListener("pointerleave",this),(t=rr.window)==null||t.removeEventListener("pointermove",this),this.toggleAttribute("dragging",!1),this.range.disabled=this.hasAttribute("disabled"),(e=oc(this,TA).activeSegment)==null||e.style.removeProperty("transform")};uR=new WeakSet;Hae=function(t){t.pointerType==="pen"&&t.buttons===0||(this.toggleAttribute("dragging",t.buttons===1||t.pointerType!=="mouse"),this.updatePointerBar(t),_A(this,uU,Mae).call(this,t),this.dragging&&(t.pointerType!=="mouse"||!oc(this,ek))&&(this.range.disabled=!0,this.range.valueAsNumber=this.getPointerRatio(t),this.range.dispatchEvent(new Event("input",{bubbles:!0,composed:!0}))))};b1.shadowRootOptions={mode:"open"};b1.getTemplateHTML=YKe;b1.getContainerTemplateHTML=qKe;rr.customElements.get("media-chrome-range")||rr.customElements.define("media-chrome-range",b1);var Qae=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},IS=(t,e,r)=>(Qae(t,e,"read from private field"),r?r.call(t):e.get(t)),XKe=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},LS=(t,e,r,n)=>(Qae(t,e,"write to private field"),e.set(t,r),r),xm;function ZKe(t){return`
    <style>
      :host {
        
        box-sizing: border-box;
        display: var(--media-control-display, var(--media-control-bar-display, inline-flex));
        color: var(--media-text-color, var(--media-primary-color, rgb(238 238 238)));
        --media-loading-indicator-icon-height: 44px;
      }

      ::slotted(media-time-range),
      ::slotted(media-volume-range) {
        min-height: 100%;
      }

      ::slotted(media-time-range),
      ::slotted(media-clip-selector) {
        flex-grow: 1;
      }

      ::slotted([role="menu"]) {
        position: absolute;
      }
    </style>

    <slot></slot>
  `}class hU extends rr.HTMLElement{constructor(){if(super(),XKe(this,xm,void 0),!this.shadowRoot){this.attachShadow(this.constructor.shadowRootOptions);const e=Sf(this.attributes);this.shadowRoot.innerHTML=this.constructor.getTemplateHTML(e)}}static get observedAttributes(){return[Ao.MEDIA_CONTROLLER]}attributeChangedCallback(e,r,n){var i,s,o,c,u;e===Ao.MEDIA_CONTROLLER&&(r&&((s=(i=IS(this,xm))==null?void 0:i.unassociateElement)==null||s.call(i,this),LS(this,xm,null)),n&&this.isConnected&&(LS(this,xm,(o=this.getRootNode())==null?void 0:o.getElementById(n)),(u=(c=IS(this,xm))==null?void 0:c.associateElement)==null||u.call(c,this)))}connectedCallback(){var e,r,n;const i=this.getAttribute(Ao.MEDIA_CONTROLLER);i&&(LS(this,xm,(e=this.getRootNode())==null?void 0:e.getElementById(i)),(n=(r=IS(this,xm))==null?void 0:r.associateElement)==null||n.call(r,this))}disconnectedCallback(){var e,r;(r=(e=IS(this,xm))==null?void 0:e.unassociateElement)==null||r.call(e,this),LS(this,xm,null)}}xm=new WeakMap;hU.shadowRootOptions={mode:"open"};hU.getTemplateHTML=ZKe;rr.customElements.get("media-control-bar")||rr.customElements.define("media-control-bar",hU);var Vae=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},BS=(t,e,r)=>(Vae(t,e,"read from private field"),r?r.call(t):e.get(t)),JKe=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},PS=(t,e,r,n)=>(Vae(t,e,"write to private field"),e.set(t,r),r),bm;function eGe(t,e={}){return`
    <style>
      :host {
        font: var(--media-font,
          var(--media-font-weight, normal)
          var(--media-font-size, 14px) /
          var(--media-text-content-height, var(--media-control-height, 24px))
          var(--media-font-family, helvetica neue, segoe ui, roboto, arial, sans-serif));
        color: var(--media-text-color, var(--media-primary-color, rgb(238 238 238)));
        background: var(--media-text-background, var(--media-control-background, var(--media-secondary-color, rgb(20 20 30 / .7))));
        padding: var(--media-control-padding, 10px);
        display: inline-flex;
        justify-content: center;
        align-items: center;
        vertical-align: middle;
        box-sizing: border-box;
        text-align: center;
        pointer-events: auto;
      }

      
      :host(:focus-visible) {
        box-shadow: inset 0 0 0 2px rgb(27 127 204 / .9);
        outline: 0;
      }

      
      :host(:where(:focus)) {
        box-shadow: none;
        outline: 0;
      }
    </style>

    ${this.getSlotTemplateHTML(t,e)}
  `}function tGe(t,e){return`
    <slot></slot>
  `}class z0 extends rr.HTMLElement{constructor(){if(super(),JKe(this,bm,void 0),!this.shadowRoot){this.attachShadow(this.constructor.shadowRootOptions);const e=Sf(this.attributes);this.shadowRoot.innerHTML=this.constructor.getTemplateHTML(e)}}static get observedAttributes(){return[Ao.MEDIA_CONTROLLER]}attributeChangedCallback(e,r,n){var i,s,o,c,u;e===Ao.MEDIA_CONTROLLER&&(r&&((s=(i=BS(this,bm))==null?void 0:i.unassociateElement)==null||s.call(i,this),PS(this,bm,null)),n&&this.isConnected&&(PS(this,bm,(o=this.getRootNode())==null?void 0:o.getElementById(n)),(u=(c=BS(this,bm))==null?void 0:c.associateElement)==null||u.call(c,this)))}connectedCallback(){var e,r,n;const{style:i}=Uu(this.shadowRoot,":host");i.setProperty("display",`var(--media-control-display, var(--${this.localName}-display, inline-flex))`);const s=this.getAttribute(Ao.MEDIA_CONTROLLER);s&&(PS(this,bm,(e=this.getRootNode())==null?void 0:e.getElementById(s)),(n=(r=BS(this,bm))==null?void 0:r.associateElement)==null||n.call(r,this))}disconnectedCallback(){var e,r;(r=(e=BS(this,bm))==null?void 0:e.unassociateElement)==null||r.call(e,this),PS(this,bm,null)}}bm=new WeakMap;z0.shadowRootOptions={mode:"open"};z0.getTemplateHTML=eGe;z0.getSlotTemplateHTML=tGe;rr.customElements.get("media-text-display")||rr.customElements.define("media-text-display",z0);var zae=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},nW=(t,e,r)=>(zae(t,e,"read from private field"),r?r.call(t):e.get(t)),rGe=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},nGe=(t,e,r,n)=>(zae(t,e,"write to private field"),e.set(t,r),r),Bw;function iGe(t,e){return`
    <slot>${N0(e.mediaDuration)}</slot>
  `}class Kae extends z0{constructor(){var e;super(),rGe(this,Bw,void 0),nGe(this,Bw,this.shadowRoot.querySelector("slot")),nW(this,Bw).textContent=N0((e=this.mediaDuration)!=null?e:0)}static get observedAttributes(){return[...super.observedAttributes,At.MEDIA_DURATION]}attributeChangedCallback(e,r,n){e===At.MEDIA_DURATION&&(nW(this,Bw).textContent=N0(+n)),super.attributeChangedCallback(e,r,n)}get mediaDuration(){return Tl(this,At.MEDIA_DURATION)}set mediaDuration(e){Mc(this,At.MEDIA_DURATION,e)}}Bw=new WeakMap;Kae.getSlotTemplateHTML=iGe;rr.customElements.get("media-duration-display")||rr.customElements.define("media-duration-display",Kae);const sGe={2:mi("Network Error"),3:mi("Decode Error"),4:mi("Source Not Supported"),5:mi("Encryption Error")},aGe={2:mi("A network error caused the media download to fail."),3:mi("A media error caused playback to be aborted. The media could be corrupt or your browser does not support this format."),4:mi("An unsupported error occurred. The server or network failed, or your browser does not support this format."),5:mi("The media is encrypted and there are no keys to decrypt it.")},Gae=t=>{var e,r;return t.code===1?null:{title:(e=sGe[t.code])!=null?e:`Error ${t.code}`,message:(r=aGe[t.code])!=null?r:t.message}};var Wae=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},oGe=(t,e,r)=>(Wae(t,e,"read from private field"),r?r.call(t):e.get(t)),lGe=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},cGe=(t,e,r,n)=>(Wae(t,e,"write to private field"),e.set(t,r),r),FT;function uGe(t){return`
    <style>
      :host {
        background: rgb(20 20 30 / .8);
      }

      #content {
        display: block;
        padding: 1.2em 1.5em;
      }

      h3,
      p {
        margin-block: 0 .3em;
      }
    </style>
    <slot name="error-${t.mediaerrorcode}" id="content">
      ${Yae({code:+t.mediaerrorcode,message:t.mediaerrormessage})}
    </slot>
  `}function dGe(t){return t.code&&Gae(t)!==null}function Yae(t){var e;const{title:r,message:n}=(e=Gae(t))!=null?e:{};let i="";return r&&(i+=`<slot name="error-${t.code}-title"><h3>${r}</h3></slot>`),n&&(i+=`<slot name="error-${t.code}-message"><p>${n}</p></slot>`),i}const iW=[At.MEDIA_ERROR_CODE,At.MEDIA_ERROR_MESSAGE];class tk extends x1{constructor(){super(...arguments),lGe(this,FT,null)}static get observedAttributes(){return[...super.observedAttributes,...iW]}formatErrorMessage(e){return this.constructor.formatErrorMessage(e)}attributeChangedCallback(e,r,n){var i;if(super.attributeChangedCallback(e,r,n),!iW.includes(e))return;const s=(i=this.mediaError)!=null?i:{code:this.mediaErrorCode,message:this.mediaErrorMessage};this.open=dGe(s),this.open&&(this.shadowRoot.querySelector("slot").name=`error-${this.mediaErrorCode}`,this.shadowRoot.querySelector("#content").innerHTML=this.formatErrorMessage(s))}get mediaError(){return oGe(this,FT)}set mediaError(e){cGe(this,FT,e)}get mediaErrorCode(){return Tl(this,"mediaerrorcode")}set mediaErrorCode(e){Mc(this,"mediaerrorcode",e)}get mediaErrorMessage(){return Cl(this,"mediaerrormessage")}set mediaErrorMessage(e){jl(this,"mediaerrormessage",e)}}FT=new WeakMap;tk.getSlotTemplateHTML=uGe;tk.formatErrorMessage=Yae;rr.customElements.get("media-error-dialog")||rr.customElements.define("media-error-dialog",tk);var qae=tk,hGe=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},Yg=(t,e,r)=>(hGe(t,e,"read from private field"),r?r.call(t):e.get(t)),sW=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},kx,Ix;function fGe(t){return`
    <style>
      :host {
        position: fixed;
        top: 0;
        left: 0;
        z-index: 9999;
        background: rgb(20 20 30 / .8);
        backdrop-filter: blur(10px);
      }

      #content {
        display: block;
        width: clamp(400px, 40vw, 700px);
        max-width: 90vw;
        text-align: left;
      }

      h2 {
        margin: 0 0 1.5rem 0;
        font-size: 1.5rem;
        font-weight: 500;
        text-align: center;
      }

      .shortcuts-table {
        width: 100%;
        border-collapse: collapse;
      }

      .shortcuts-table tr {
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      }

      .shortcuts-table tr:last-child {
        border-bottom: none;
      }

      .shortcuts-table td {
        padding: 0.75rem 0.5rem;
      }

      .shortcuts-table td:first-child {
        text-align: right;
        padding-right: 1rem;
        width: 40%;
        min-width: 120px;
      }

      .shortcuts-table td:last-child {
        padding-left: 1rem;
      }

      .key {
        display: inline-block;
        background: rgba(255, 255, 255, 0.15);
        border: 1px solid rgba(255, 255, 255, 0.2);
        border-radius: 4px;
        padding: 0.25rem 0.5rem;
        font-family: 'Courier New', monospace;
        font-size: 0.9rem;
        font-weight: 500;
        min-width: 1.5rem;
        text-align: center;
        margin: 0 0.2rem;
      }

      .description {
        color: rgba(255, 255, 255, 0.9);
        font-size: 0.95rem;
      }

      .key-combo {
        display: flex;
        align-items: center;
        justify-content: flex-end;
        gap: 0.3rem;
      }

      .key-separator {
        color: rgba(255, 255, 255, 0.5);
        font-size: 0.9rem;
      }
    </style>
    <slot id="content">
      ${AGe()}
    </slot>
  `}function AGe(){return`
    <h2>Keyboard Shortcuts</h2>
    <table class="shortcuts-table">${[{keys:["Space","k"],description:"Toggle Playback"},{keys:["m"],description:"Toggle mute"},{keys:["f"],description:"Toggle fullscreen"},{keys:["c"],description:"Toggle captions or subtitles, if available"},{keys:["p"],description:"Toggle Picture in Picture"},{keys:["","j"],description:"Seek back 10s"},{keys:["","l"],description:"Seek forward 10s"},{keys:[""],description:"Turn volume up"},{keys:[""],description:"Turn volume down"},{keys:["< (SHIFT+,)"],description:"Decrease playback rate"},{keys:["> (SHIFT+.)"],description:"Increase playback rate"}].map(({keys:r,description:n})=>`
      <tr>
        <td>
          <div class="key-combo">${r.map((s,o)=>o>0?`<span class="key-separator">or</span><span class="key">${s}</span>`:`<span class="key">${s}</span>`).join("")}</div>
        </td>
        <td class="description">${n}</td>
      </tr>
    `).join("")}</table>
  `}class Xae extends x1{constructor(){super(...arguments),sW(this,kx,e=>{var r;if(!this.open)return;const n=(r=this.shadowRoot)==null?void 0:r.querySelector("#content");if(!n)return;const i=e.composedPath(),s=i[0]===this||i.includes(this),o=i.includes(n);s&&!o&&(this.open=!1)}),sW(this,Ix,e=>{if(!this.open)return;const r=e.shiftKey&&(e.key==="/"||e.key==="?");(e.key==="Escape"||r)&&!e.ctrlKey&&!e.altKey&&!e.metaKey&&(this.open=!1,e.preventDefault(),e.stopPropagation())})}connectedCallback(){super.connectedCallback(),this.open&&(this.addEventListener("click",Yg(this,kx)),document.addEventListener("keydown",Yg(this,Ix)))}disconnectedCallback(){this.removeEventListener("click",Yg(this,kx)),document.removeEventListener("keydown",Yg(this,Ix))}attributeChangedCallback(e,r,n){super.attributeChangedCallback(e,r,n),e==="open"&&(this.open?(this.addEventListener("click",Yg(this,kx)),document.addEventListener("keydown",Yg(this,Ix))):(this.removeEventListener("click",Yg(this,kx)),document.removeEventListener("keydown",Yg(this,Ix))))}}kx=new WeakMap;Ix=new WeakMap;Xae.getSlotTemplateHTML=fGe;rr.customElements.get("media-keyboard-shortcuts-dialog")||rr.customElements.define("media-keyboard-shortcuts-dialog",Xae);var Zae=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},mGe=(t,e,r)=>(Zae(t,e,"read from private field"),e.get(t)),pGe=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},gGe=(t,e,r,n)=>(Zae(t,e,"write to private field"),e.set(t,r),r),UT;const vGe=`<svg aria-hidden="true" viewBox="0 0 26 24">
  <path d="M16 3v2.5h3.5V9H22V3h-6ZM4 9h2.5V5.5H10V3H4v6Zm15.5 9.5H16V21h6v-6h-2.5v3.5ZM6.5 15H4v6h6v-2.5H6.5V15Z"/>
</svg>`,yGe=`<svg aria-hidden="true" viewBox="0 0 26 24">
  <path d="M18.5 6.5V3H16v6h6V6.5h-3.5ZM16 21h2.5v-3.5H22V15h-6v6ZM4 17.5h3.5V21H10v-6H4v2.5Zm3.5-11H4V9h6V3H7.5v3.5Z"/>
</svg>`;function xGe(t){return`
    <style>
      :host([${At.MEDIA_IS_FULLSCREEN}]) slot[name=icon] slot:not([name=exit]) {
        display: none !important;
      }

      
      :host(:not([${At.MEDIA_IS_FULLSCREEN}])) slot[name=icon] slot:not([name=enter]) {
        display: none !important;
      }

      :host([${At.MEDIA_IS_FULLSCREEN}]) slot[name=tooltip-enter],
      :host(:not([${At.MEDIA_IS_FULLSCREEN}])) slot[name=tooltip-exit] {
        display: none;
      }
    </style>

    <slot name="icon">
      <slot name="enter">${vGe}</slot>
      <slot name="exit">${yGe}</slot>
    </slot>
  `}function bGe(){return`
    <slot name="tooltip-enter">${mi("Enter fullscreen mode")}</slot>
    <slot name="tooltip-exit">${mi("Exit fullscreen mode")}</slot>
  `}const aW=t=>{const e=t.mediaIsFullscreen?mi("exit fullscreen mode"):mi("enter fullscreen mode");t.setAttribute("aria-label",e)};class fU extends vd{constructor(){super(...arguments),pGe(this,UT,null)}static get observedAttributes(){return[...super.observedAttributes,At.MEDIA_IS_FULLSCREEN,At.MEDIA_FULLSCREEN_UNAVAILABLE]}connectedCallback(){super.connectedCallback(),aW(this)}attributeChangedCallback(e,r,n){super.attributeChangedCallback(e,r,n),e===At.MEDIA_IS_FULLSCREEN&&aW(this)}get mediaFullscreenUnavailable(){return Cl(this,At.MEDIA_FULLSCREEN_UNAVAILABLE)}set mediaFullscreenUnavailable(e){jl(this,At.MEDIA_FULLSCREEN_UNAVAILABLE,e)}get mediaIsFullscreen(){return Pa(this,At.MEDIA_IS_FULLSCREEN)}set mediaIsFullscreen(e){Oa(this,At.MEDIA_IS_FULLSCREEN,e)}handleClick(e){gGe(this,UT,e);const r=mGe(this,UT)instanceof PointerEvent,n=this.mediaIsFullscreen?new rr.CustomEvent(zn.MEDIA_EXIT_FULLSCREEN_REQUEST,{composed:!0,bubbles:!0}):new rr.CustomEvent(zn.MEDIA_ENTER_FULLSCREEN_REQUEST,{composed:!0,bubbles:!0,detail:r});this.dispatchEvent(n)}}UT=new WeakMap;fU.getSlotTemplateHTML=xGe;fU.getTooltipContentHTML=bGe;rr.customElements.get("media-fullscreen-button")||rr.customElements.define("media-fullscreen-button",fU);const{MEDIA_TIME_IS_LIVE:$T,MEDIA_PAUSED:dE}=At,{MEDIA_SEEK_TO_LIVE_REQUEST:wGe,MEDIA_PLAY_REQUEST:EGe}=zn,_Ge='<svg viewBox="0 0 6 12"><circle cx="3" cy="6" r="2"></circle></svg>';function SGe(t){return`
    <style>
      :host { --media-tooltip-display: none; }
      
      slot[name=indicator] > *,
      :host ::slotted([slot=indicator]) {
        
        min-width: auto;
        fill: var(--media-live-button-icon-color, rgb(140, 140, 140));
        color: var(--media-live-button-icon-color, rgb(140, 140, 140));
      }

      :host([${$T}]:not([${dE}])) slot[name=indicator] > *,
      :host([${$T}]:not([${dE}])) ::slotted([slot=indicator]) {
        fill: var(--media-live-button-indicator-color, rgb(255, 0, 0));
        color: var(--media-live-button-indicator-color, rgb(255, 0, 0));
      }

      :host([${$T}]:not([${dE}])) {
        cursor: var(--media-cursor, not-allowed);
      }

      slot[name=text]{
        text-transform: uppercase;
      }

    </style>

    <slot name="indicator">${_Ge}</slot>
    
    <slot name="spacer">&nbsp;</slot><slot name="text">${mi("live")}</slot>
  `}const oW=t=>{var e;const r=t.mediaPaused||!t.mediaTimeIsLive,n=mi(r?"seek to live":"playing live");t.setAttribute("aria-label",n);const i=(e=t.shadowRoot)==null?void 0:e.querySelector('slot[name="text"]');i&&(i.textContent=mi("live")),r?t.removeAttribute("aria-disabled"):t.setAttribute("aria-disabled","true")};class Jae extends vd{static get observedAttributes(){return[...super.observedAttributes,$T,dE]}connectedCallback(){super.connectedCallback(),oW(this)}attributeChangedCallback(e,r,n){super.attributeChangedCallback(e,r,n),oW(this)}get mediaPaused(){return Pa(this,At.MEDIA_PAUSED)}set mediaPaused(e){Oa(this,At.MEDIA_PAUSED,e)}get mediaTimeIsLive(){return Pa(this,At.MEDIA_TIME_IS_LIVE)}set mediaTimeIsLive(e){Oa(this,At.MEDIA_TIME_IS_LIVE,e)}handleClick(){!this.mediaPaused&&this.mediaTimeIsLive||(this.dispatchEvent(new rr.CustomEvent(wGe,{composed:!0,bubbles:!0})),this.hasAttribute(dE)&&this.dispatchEvent(new rr.CustomEvent(EGe,{composed:!0,bubbles:!0})))}}Jae.getSlotTemplateHTML=SGe;rr.customElements.get("media-live-button")||rr.customElements.define("media-live-button",Jae);var eoe=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},iw=(t,e,r)=>(eoe(t,e,"read from private field"),r?r.call(t):e.get(t)),lW=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},sw=(t,e,r,n)=>(eoe(t,e,"write to private field"),e.set(t,r),r),wm,HT;const OS={LOADING_DELAY:"loadingdelay",NO_AUTOHIDE:"noautohide"},toe=500,TGe=`
<svg aria-hidden="true" viewBox="0 0 100 100">
  <path d="M73,50c0-12.7-10.3-23-23-23S27,37.3,27,50 M30.9,50c0-10.5,8.5-19.1,19.1-19.1S69.1,39.5,69.1,50">
    <animateTransform
       attributeName="transform"
       attributeType="XML"
       type="rotate"
       dur="1s"
       from="0 50 50"
       to="360 50 50"
       repeatCount="indefinite" />
  </path>
</svg>
`;function CGe(t){return`
    <style>
      :host {
        display: var(--media-control-display, var(--media-loading-indicator-display, inline-block));
        vertical-align: middle;
        box-sizing: border-box;
        --_loading-indicator-delay: var(--media-loading-indicator-transition-delay, ${toe}ms);
      }

      #status {
        color: rgba(0,0,0,0);
        width: 0px;
        height: 0px;
      }

      :host slot[name=icon] > *,
      :host ::slotted([slot=icon]) {
        opacity: var(--media-loading-indicator-opacity, 0);
        transition: opacity 0.15s;
      }

      :host([${At.MEDIA_LOADING}]:not([${At.MEDIA_PAUSED}])) slot[name=icon] > *,
      :host([${At.MEDIA_LOADING}]:not([${At.MEDIA_PAUSED}])) ::slotted([slot=icon]) {
        opacity: var(--media-loading-indicator-opacity, 1);
        transition: opacity 0.15s var(--_loading-indicator-delay);
      }

      :host #status {
        visibility: var(--media-loading-indicator-opacity, hidden);
        transition: visibility 0.15s;
      }

      :host([${At.MEDIA_LOADING}]:not([${At.MEDIA_PAUSED}])) #status {
        visibility: var(--media-loading-indicator-opacity, visible);
        transition: visibility 0.15s var(--_loading-indicator-delay);
      }

      svg, img, ::slotted(svg), ::slotted(img) {
        width: var(--media-loading-indicator-icon-width);
        height: var(--media-loading-indicator-icon-height, 100px);
        fill: var(--media-icon-color, var(--media-primary-color, rgb(238 238 238)));
        vertical-align: middle;
      }
    </style>

    <slot name="icon">${TGe}</slot>
    <div id="status" role="status" aria-live="polite">${mi("media loading")}</div>
  `}class AU extends rr.HTMLElement{constructor(){if(super(),lW(this,wm,void 0),lW(this,HT,toe),!this.shadowRoot){this.attachShadow(this.constructor.shadowRootOptions);const e=Sf(this.attributes);this.shadowRoot.innerHTML=this.constructor.getTemplateHTML(e)}}static get observedAttributes(){return[Ao.MEDIA_CONTROLLER,At.MEDIA_PAUSED,At.MEDIA_LOADING,OS.LOADING_DELAY]}attributeChangedCallback(e,r,n){var i,s,o,c,u;e===OS.LOADING_DELAY&&r!==n?this.loadingDelay=Number(n):e===Ao.MEDIA_CONTROLLER&&(r&&((s=(i=iw(this,wm))==null?void 0:i.unassociateElement)==null||s.call(i,this),sw(this,wm,null)),n&&this.isConnected&&(sw(this,wm,(o=this.getRootNode())==null?void 0:o.getElementById(n)),(u=(c=iw(this,wm))==null?void 0:c.associateElement)==null||u.call(c,this)))}connectedCallback(){var e,r,n;const i=this.getAttribute(Ao.MEDIA_CONTROLLER);i&&(sw(this,wm,(e=this.getRootNode())==null?void 0:e.getElementById(i)),(n=(r=iw(this,wm))==null?void 0:r.associateElement)==null||n.call(r,this))}disconnectedCallback(){var e,r;(r=(e=iw(this,wm))==null?void 0:e.unassociateElement)==null||r.call(e,this),sw(this,wm,null)}get loadingDelay(){return iw(this,HT)}set loadingDelay(e){sw(this,HT,e);const{style:r}=Uu(this.shadowRoot,":host");r.setProperty("--_loading-indicator-delay",`var(--media-loading-indicator-transition-delay, ${e}ms)`)}get mediaPaused(){return Pa(this,At.MEDIA_PAUSED)}set mediaPaused(e){Oa(this,At.MEDIA_PAUSED,e)}get mediaLoading(){return Pa(this,At.MEDIA_LOADING)}set mediaLoading(e){Oa(this,At.MEDIA_LOADING,e)}get mediaController(){return Cl(this,Ao.MEDIA_CONTROLLER)}set mediaController(e){jl(this,Ao.MEDIA_CONTROLLER,e)}get noAutohide(){return Pa(this,OS.NO_AUTOHIDE)}set noAutohide(e){Oa(this,OS.NO_AUTOHIDE,e)}}wm=new WeakMap;HT=new WeakMap;AU.shadowRootOptions={mode:"open"};AU.getTemplateHTML=CGe;rr.customElements.get("media-loading-indicator")||rr.customElements.define("media-loading-indicator",AU);const jGe=`<svg aria-hidden="true" viewBox="0 0 24 24">
  <path d="M16.5 12A4.5 4.5 0 0 0 14 8v2.18l2.45 2.45a4.22 4.22 0 0 0 .05-.63Zm2.5 0a6.84 6.84 0 0 1-.54 2.64L20 16.15A8.8 8.8 0 0 0 21 12a9 9 0 0 0-7-8.77v2.06A7 7 0 0 1 19 12ZM4.27 3 3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25A6.92 6.92 0 0 1 14 18.7v2.06A9 9 0 0 0 17.69 19l2 2.05L21 19.73l-9-9L4.27 3ZM12 4 9.91 6.09 12 8.18V4Z"/>
</svg>`,cW=`<svg aria-hidden="true" viewBox="0 0 24 24">
  <path d="M3 9v6h4l5 5V4L7 9H3Zm13.5 3A4.5 4.5 0 0 0 14 8v8a4.47 4.47 0 0 0 2.5-4Z"/>
</svg>`,NGe=`<svg aria-hidden="true" viewBox="0 0 24 24">
  <path d="M3 9v6h4l5 5V4L7 9H3Zm13.5 3A4.5 4.5 0 0 0 14 8v8a4.47 4.47 0 0 0 2.5-4ZM14 3.23v2.06a7 7 0 0 1 0 13.42v2.06a9 9 0 0 0 0-17.54Z"/>
</svg>`;function kGe(t){return`
    <style>
      :host(:not([${At.MEDIA_VOLUME_LEVEL}])) slot[name=icon] slot:not([name=high]),
      :host([${At.MEDIA_VOLUME_LEVEL}=high]) slot[name=icon] slot:not([name=high]) {
        display: none !important;
      }

      :host([${At.MEDIA_VOLUME_LEVEL}=off]) slot[name=icon] slot:not([name=off]) {
        display: none !important;
      }

      :host([${At.MEDIA_VOLUME_LEVEL}=low]) slot[name=icon] slot:not([name=low]) {
        display: none !important;
      }

      :host([${At.MEDIA_VOLUME_LEVEL}=medium]) slot[name=icon] slot:not([name=medium]) {
        display: none !important;
      }

      :host(:not([${At.MEDIA_VOLUME_LEVEL}=off])) slot[name=tooltip-unmute],
      :host([${At.MEDIA_VOLUME_LEVEL}=off]) slot[name=tooltip-mute] {
        display: none;
      }
    </style>

    <slot name="icon">
      <slot name="off">${jGe}</slot>
      <slot name="low">${cW}</slot>
      <slot name="medium">${cW}</slot>
      <slot name="high">${NGe}</slot>
    </slot>
  `}function IGe(){return`
    <slot name="tooltip-mute">${mi("Mute")}</slot>
    <slot name="tooltip-unmute">${mi("Unmute")}</slot>
  `}const uW=t=>{const e=t.mediaVolumeLevel==="off",r=mi(e?"unmute":"mute");t.setAttribute("aria-label",r)};class mU extends vd{static get observedAttributes(){return[...super.observedAttributes,At.MEDIA_VOLUME_LEVEL]}connectedCallback(){super.connectedCallback(),uW(this)}attributeChangedCallback(e,r,n){super.attributeChangedCallback(e,r,n),e===At.MEDIA_VOLUME_LEVEL&&uW(this)}get mediaVolumeLevel(){return Cl(this,At.MEDIA_VOLUME_LEVEL)}set mediaVolumeLevel(e){jl(this,At.MEDIA_VOLUME_LEVEL,e)}handleClick(){const e=this.mediaVolumeLevel==="off"?zn.MEDIA_UNMUTE_REQUEST:zn.MEDIA_MUTE_REQUEST;this.dispatchEvent(new rr.CustomEvent(e,{composed:!0,bubbles:!0}))}}mU.getSlotTemplateHTML=kGe;mU.getTooltipContentHTML=IGe;rr.customElements.get("media-mute-button")||rr.customElements.define("media-mute-button",mU);const dW=`<svg aria-hidden="true" viewBox="0 0 28 24">
  <path d="M24 3H4a1 1 0 0 0-1 1v16a1 1 0 0 0 1 1h20a1 1 0 0 0 1-1V4a1 1 0 0 0-1-1Zm-1 16H5V5h18v14Zm-3-8h-7v5h7v-5Z"/>
</svg>`;function LGe(t){return`
    <style>
      :host([${At.MEDIA_IS_PIP}]) slot[name=icon] slot:not([name=exit]) {
        display: none !important;
      }

      :host(:not([${At.MEDIA_IS_PIP}])) slot[name=icon] slot:not([name=enter]) {
        display: none !important;
      }

      :host([${At.MEDIA_IS_PIP}]) slot[name=tooltip-enter],
      :host(:not([${At.MEDIA_IS_PIP}])) slot[name=tooltip-exit] {
        display: none;
      }
    </style>

    <slot name="icon">
      <slot name="enter">${dW}</slot>
      <slot name="exit">${dW}</slot>
    </slot>
  `}function BGe(){return`
    <slot name="tooltip-enter">${mi("Enter picture in picture mode")}</slot>
    <slot name="tooltip-exit">${mi("Exit picture in picture mode")}</slot>
  `}const hW=t=>{const e=t.mediaIsPip?mi("exit picture in picture mode"):mi("enter picture in picture mode");t.setAttribute("aria-label",e)};class pU extends vd{static get observedAttributes(){return[...super.observedAttributes,At.MEDIA_IS_PIP,At.MEDIA_PIP_UNAVAILABLE]}connectedCallback(){super.connectedCallback(),hW(this)}attributeChangedCallback(e,r,n){super.attributeChangedCallback(e,r,n),e===At.MEDIA_IS_PIP&&hW(this)}get mediaPipUnavailable(){return Cl(this,At.MEDIA_PIP_UNAVAILABLE)}set mediaPipUnavailable(e){jl(this,At.MEDIA_PIP_UNAVAILABLE,e)}get mediaIsPip(){return Pa(this,At.MEDIA_IS_PIP)}set mediaIsPip(e){Oa(this,At.MEDIA_IS_PIP,e)}handleClick(){const e=this.mediaIsPip?zn.MEDIA_EXIT_PIP_REQUEST:zn.MEDIA_ENTER_PIP_REQUEST;this.dispatchEvent(new rr.CustomEvent(e,{composed:!0,bubbles:!0}))}}pU.getSlotTemplateHTML=LGe;pU.getTooltipContentHTML=BGe;rr.customElements.get("media-pip-button")||rr.customElements.define("media-pip-button",pU);var PGe=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},hx=(t,e,r)=>(PGe(t,e,"read from private field"),r?r.call(t):e.get(t)),OGe=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},t0;const K4={RATES:"rates"},roe=[1,1.2,1.5,1.7,2],sb=1;function RGe(t){return`
    <style>
      :host {
        min-width: 5ch;
        padding: var(--media-button-padding, var(--media-control-padding, 10px 5px));
      }
    </style>
    <slot name="icon">${t.mediaplaybackrate||sb}x</slot>
  `}function DGe(){return mi("Playback rate")}class gU extends vd{constructor(){var e;super(),OGe(this,t0,new JF(this,K4.RATES,{defaultValue:roe})),this.container=this.shadowRoot.querySelector('slot[name="icon"]'),this.container.innerHTML=`${(e=this.mediaPlaybackRate)!=null?e:sb}x`}static get observedAttributes(){return[...super.observedAttributes,At.MEDIA_PLAYBACK_RATE,K4.RATES]}attributeChangedCallback(e,r,n){if(super.attributeChangedCallback(e,r,n),e===K4.RATES&&(hx(this,t0).value=n),e===At.MEDIA_PLAYBACK_RATE){const i=n?+n:Number.NaN,s=Number.isNaN(i)?sb:i;this.container.innerHTML=`${s}x`,this.setAttribute("aria-label",mi("Playback rate {playbackRate}",{playbackRate:s}))}}get rates(){return hx(this,t0)}set rates(e){e?Array.isArray(e)?hx(this,t0).value=e.join(" "):typeof e=="string"&&(hx(this,t0).value=e):hx(this,t0).value=""}get mediaPlaybackRate(){return Tl(this,At.MEDIA_PLAYBACK_RATE,sb)}set mediaPlaybackRate(e){Mc(this,At.MEDIA_PLAYBACK_RATE,e)}handleClick(){var e,r;const n=Array.from(hx(this,t0).values(),o=>+o).sort((o,c)=>o-c),i=(r=(e=n.find(o=>o>this.mediaPlaybackRate))!=null?e:n[0])!=null?r:sb,s=new rr.CustomEvent(zn.MEDIA_PLAYBACK_RATE_REQUEST,{composed:!0,bubbles:!0,detail:i});this.dispatchEvent(s)}}t0=new WeakMap;gU.getSlotTemplateHTML=RGe;gU.getTooltipContentHTML=DGe;rr.customElements.get("media-playback-rate-button")||rr.customElements.define("media-playback-rate-button",gU);const MGe=`<svg aria-hidden="true" viewBox="0 0 24 24">
  <path d="m6 21 15-9L6 3v18Z"/>
</svg>`,FGe=`<svg aria-hidden="true" viewBox="0 0 24 24">
  <path d="M6 20h4V4H6v16Zm8-16v16h4V4h-4Z"/>
</svg>`;function UGe(t){return`
    <style>
      :host([${At.MEDIA_PAUSED}]) slot[name=pause],
      :host(:not([${At.MEDIA_PAUSED}])) slot[name=play] {
        display: none !important;
      }

      :host([${At.MEDIA_PAUSED}]) slot[name=tooltip-pause],
      :host(:not([${At.MEDIA_PAUSED}])) slot[name=tooltip-play] {
        display: none;
      }
    </style>

    <slot name="icon">
      <slot name="play">${MGe}</slot>
      <slot name="pause">${FGe}</slot>
    </slot>
  `}function $Ge(){return`
    <slot name="tooltip-play">${mi("Play")}</slot>
    <slot name="tooltip-pause">${mi("Pause")}</slot>
  `}const fW=t=>{const e=t.mediaPaused?mi("play"):mi("pause");t.setAttribute("aria-label",e)};class vU extends vd{static get observedAttributes(){return[...super.observedAttributes,At.MEDIA_PAUSED,At.MEDIA_ENDED]}connectedCallback(){super.connectedCallback(),fW(this)}attributeChangedCallback(e,r,n){super.attributeChangedCallback(e,r,n),(e===At.MEDIA_PAUSED||e===At.MEDIA_LANG)&&fW(this)}get mediaPaused(){return Pa(this,At.MEDIA_PAUSED)}set mediaPaused(e){Oa(this,At.MEDIA_PAUSED,e)}handleClick(){const e=this.mediaPaused?zn.MEDIA_PLAY_REQUEST:zn.MEDIA_PAUSE_REQUEST;this.dispatchEvent(new rr.CustomEvent(e,{composed:!0,bubbles:!0}))}}vU.getSlotTemplateHTML=UGe;vU.getTooltipContentHTML=$Ge;rr.customElements.get("media-play-button")||rr.customElements.define("media-play-button",vU);const dm={PLACEHOLDER_SRC:"placeholdersrc",SRC:"src"};function HGe(t){return`
    <style>
      :host {
        pointer-events: none;
        display: var(--media-poster-image-display, inline-block);
        box-sizing: border-box;
      }

      img {
        max-width: 100%;
        max-height: 100%;
        min-width: 100%;
        min-height: 100%;
        background-repeat: no-repeat;
        background-position: var(--media-poster-image-background-position, var(--media-object-position, center));
        background-size: var(--media-poster-image-background-size, var(--media-object-fit, contain));
        object-fit: var(--media-object-fit, contain);
        object-position: var(--media-object-position, center);
      }
    </style>

    <img part="poster img" aria-hidden="true" id="image"/>
  `}const QGe=t=>{t.style.removeProperty("background-image")},VGe=(t,e)=>{t.style["background-image"]=`url('${e}')`};class yU extends rr.HTMLElement{static get observedAttributes(){return[dm.PLACEHOLDER_SRC,dm.SRC]}constructor(){if(super(),!this.shadowRoot){this.attachShadow(this.constructor.shadowRootOptions);const e=Sf(this.attributes);this.shadowRoot.innerHTML=this.constructor.getTemplateHTML(e)}this.image=this.shadowRoot.querySelector("#image")}attributeChangedCallback(e,r,n){e===dm.SRC&&(n==null?this.image.removeAttribute(dm.SRC):this.image.setAttribute(dm.SRC,n)),e===dm.PLACEHOLDER_SRC&&(n==null?QGe(this.image):VGe(this.image,n))}get placeholderSrc(){return Cl(this,dm.PLACEHOLDER_SRC)}set placeholderSrc(e){jl(this,dm.SRC,e)}get src(){return Cl(this,dm.SRC)}set src(e){jl(this,dm.SRC,e)}}yU.shadowRootOptions={mode:"open"};yU.getTemplateHTML=HGe;rr.customElements.get("media-poster-image")||rr.customElements.define("media-poster-image",yU);var noe=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},zGe=(t,e,r)=>(noe(t,e,"read from private field"),r?r.call(t):e.get(t)),KGe=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},GGe=(t,e,r,n)=>(noe(t,e,"write to private field"),e.set(t,r),r),QT;class WGe extends z0{constructor(){super(),KGe(this,QT,void 0),GGe(this,QT,this.shadowRoot.querySelector("slot"))}static get observedAttributes(){return[...super.observedAttributes,At.MEDIA_PREVIEW_CHAPTER,At.MEDIA_LANG]}attributeChangedCallback(e,r,n){if(super.attributeChangedCallback(e,r,n),(e===At.MEDIA_PREVIEW_CHAPTER||e===At.MEDIA_LANG)&&n!==r&&n!=null)if(zGe(this,QT).textContent=n,n!==""){const i=mi("chapter: {chapterName}",{chapterName:n});this.setAttribute("aria-valuetext",i)}else this.removeAttribute("aria-valuetext")}get mediaPreviewChapter(){return Cl(this,At.MEDIA_PREVIEW_CHAPTER)}set mediaPreviewChapter(e){jl(this,At.MEDIA_PREVIEW_CHAPTER,e)}}QT=new WeakMap;rr.customElements.get("media-preview-chapter-display")||rr.customElements.define("media-preview-chapter-display",WGe);var ioe=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},RS=(t,e,r)=>(ioe(t,e,"read from private field"),r?r.call(t):e.get(t)),YGe=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},DS=(t,e,r,n)=>(ioe(t,e,"write to private field"),e.set(t,r),r),Em;function qGe(t){return`
    <style>
      :host {
        box-sizing: border-box;
        display: var(--media-control-display, var(--media-preview-thumbnail-display, inline-block));
        overflow: hidden;
      }

      img {
        display: none;
        position: relative;
      }
    </style>
    <img crossorigin loading="eager" decoding="async">
  `}class rk extends rr.HTMLElement{constructor(){if(super(),YGe(this,Em,void 0),!this.shadowRoot){this.attachShadow(this.constructor.shadowRootOptions);const e=Sf(this.attributes);this.shadowRoot.innerHTML=this.constructor.getTemplateHTML(e)}}static get observedAttributes(){return[Ao.MEDIA_CONTROLLER,At.MEDIA_PREVIEW_IMAGE,At.MEDIA_PREVIEW_COORDS]}connectedCallback(){var e,r,n;const i=this.getAttribute(Ao.MEDIA_CONTROLLER);i&&(DS(this,Em,(e=this.getRootNode())==null?void 0:e.getElementById(i)),(n=(r=RS(this,Em))==null?void 0:r.associateElement)==null||n.call(r,this))}disconnectedCallback(){var e,r;(r=(e=RS(this,Em))==null?void 0:e.unassociateElement)==null||r.call(e,this),DS(this,Em,null)}attributeChangedCallback(e,r,n){var i,s,o,c,u;[At.MEDIA_PREVIEW_IMAGE,At.MEDIA_PREVIEW_COORDS].includes(e)&&this.update(),e===Ao.MEDIA_CONTROLLER&&(r&&((s=(i=RS(this,Em))==null?void 0:i.unassociateElement)==null||s.call(i,this),DS(this,Em,null)),n&&this.isConnected&&(DS(this,Em,(o=this.getRootNode())==null?void 0:o.getElementById(n)),(u=(c=RS(this,Em))==null?void 0:c.associateElement)==null||u.call(c,this)))}get mediaPreviewImage(){return Cl(this,At.MEDIA_PREVIEW_IMAGE)}set mediaPreviewImage(e){jl(this,At.MEDIA_PREVIEW_IMAGE,e)}get mediaPreviewCoords(){const e=this.getAttribute(At.MEDIA_PREVIEW_COORDS);if(e)return e.split(/\s+/).map(r=>+r)}set mediaPreviewCoords(e){if(!e){this.removeAttribute(At.MEDIA_PREVIEW_COORDS);return}this.setAttribute(At.MEDIA_PREVIEW_COORDS,e.join(" "))}update(){const e=this.mediaPreviewCoords,r=this.mediaPreviewImage;if(!(e&&r))return;const[n,i,s,o]=e,c=r.split("#")[0],u=getComputedStyle(this),{maxWidth:l,maxHeight:d,minWidth:f,minHeight:A}=u,p=Math.min(parseInt(l)/s,parseInt(d)/o),g=Math.max(parseInt(f)/s,parseInt(A)/o),y=p<1,x=y?p:g>1?g:1,{style:w}=Uu(this.shadowRoot,":host"),E=Uu(this.shadowRoot,"img").style,T=this.shadowRoot.querySelector("img"),C=y?"min":"max";w.setProperty(`${C}-width`,"initial","important"),w.setProperty(`${C}-height`,"initial","important"),w.width=`${s*x}px`,w.height=`${o*x}px`;const N=()=>{E.width=`${this.imgWidth*x}px`,E.height=`${this.imgHeight*x}px`,E.display="block"};T.src!==c&&(T.onload=()=>{this.imgWidth=T.naturalWidth,this.imgHeight=T.naturalHeight,N()},T.src=c,N()),N(),E.transform=`translate(-${n*x}px, -${i*x}px)`}}Em=new WeakMap;rk.shadowRootOptions={mode:"open"};rk.getTemplateHTML=qGe;rr.customElements.get("media-preview-thumbnail")||rr.customElements.define("media-preview-thumbnail",rk);var AW=rk,soe=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},mW=(t,e,r)=>(soe(t,e,"read from private field"),r?r.call(t):e.get(t)),XGe=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},ZGe=(t,e,r,n)=>(soe(t,e,"write to private field"),e.set(t,r),r),Pw;class JGe extends z0{constructor(){super(),XGe(this,Pw,void 0),ZGe(this,Pw,this.shadowRoot.querySelector("slot")),mW(this,Pw).textContent=N0(0)}static get observedAttributes(){return[...super.observedAttributes,At.MEDIA_PREVIEW_TIME]}attributeChangedCallback(e,r,n){super.attributeChangedCallback(e,r,n),e===At.MEDIA_PREVIEW_TIME&&n!=null&&(mW(this,Pw).textContent=N0(parseFloat(n)))}get mediaPreviewTime(){return Tl(this,At.MEDIA_PREVIEW_TIME)}set mediaPreviewTime(e){Mc(this,At.MEDIA_PREVIEW_TIME,e)}}Pw=new WeakMap;rr.customElements.get("media-preview-time-display")||rr.customElements.define("media-preview-time-display",JGe);const fx={SEEK_OFFSET:"seekoffset"},G4=30,eWe=t=>`
  <svg aria-hidden="true" viewBox="0 0 20 24">
    <defs>
      <style>.text{font-size:8px;font-family:Arial-BoldMT, Arial;font-weight:700;}</style>
    </defs>
    <text class="text value" transform="translate(2.18 19.87)">${t}</text>
    <path d="M10 6V3L4.37 7 10 10.94V8a5.54 5.54 0 0 1 1.9 10.48v2.12A7.5 7.5 0 0 0 10 6Z"/>
  </svg>`;function tWe(t,e){return`
    <slot name="icon">${eWe(e.seekOffset)}</slot>
  `}function rWe(){return mi("Seek backward")}const nWe=0;class xU extends vd{static get observedAttributes(){return[...super.observedAttributes,At.MEDIA_CURRENT_TIME,fx.SEEK_OFFSET]}connectedCallback(){super.connectedCallback(),this.seekOffset=Tl(this,fx.SEEK_OFFSET,G4)}attributeChangedCallback(e,r,n){super.attributeChangedCallback(e,r,n),e===fx.SEEK_OFFSET&&(this.seekOffset=Tl(this,fx.SEEK_OFFSET,G4))}get seekOffset(){return Tl(this,fx.SEEK_OFFSET,G4)}set seekOffset(e){Mc(this,fx.SEEK_OFFSET,e),this.setAttribute("aria-label",mi("seek back {seekOffset} seconds",{seekOffset:this.seekOffset})),dae(hae(this,"icon"),this.seekOffset)}get mediaCurrentTime(){return Tl(this,At.MEDIA_CURRENT_TIME,nWe)}set mediaCurrentTime(e){Mc(this,At.MEDIA_CURRENT_TIME,e)}handleClick(){const e=Math.max(this.mediaCurrentTime-this.seekOffset,0),r=new rr.CustomEvent(zn.MEDIA_SEEK_REQUEST,{composed:!0,bubbles:!0,detail:e});this.dispatchEvent(r)}}xU.getSlotTemplateHTML=tWe;xU.getTooltipContentHTML=rWe;rr.customElements.get("media-seek-backward-button")||rr.customElements.define("media-seek-backward-button",xU);const Ax={SEEK_OFFSET:"seekoffset"},W4=30,iWe=t=>`
  <svg aria-hidden="true" viewBox="0 0 20 24">
    <defs>
      <style>.text{font-size:8px;font-family:Arial-BoldMT, Arial;font-weight:700;}</style>
    </defs>
    <text class="text value" transform="translate(8.9 19.87)">${t}</text>
    <path d="M10 6V3l5.61 4L10 10.94V8a5.54 5.54 0 0 0-1.9 10.48v2.12A7.5 7.5 0 0 1 10 6Z"/>
  </svg>`;function sWe(t,e){return`
    <slot name="icon">${iWe(e.seekOffset)}</slot>
  `}function aWe(){return mi("Seek forward")}const oWe=0;class bU extends vd{static get observedAttributes(){return[...super.observedAttributes,At.MEDIA_CURRENT_TIME,Ax.SEEK_OFFSET]}connectedCallback(){super.connectedCallback(),this.seekOffset=Tl(this,Ax.SEEK_OFFSET,W4)}attributeChangedCallback(e,r,n){super.attributeChangedCallback(e,r,n),e===Ax.SEEK_OFFSET&&(this.seekOffset=Tl(this,Ax.SEEK_OFFSET,W4))}get seekOffset(){return Tl(this,Ax.SEEK_OFFSET,W4)}set seekOffset(e){Mc(this,Ax.SEEK_OFFSET,e),this.setAttribute("aria-label",mi("seek forward {seekOffset} seconds",{seekOffset:this.seekOffset})),dae(hae(this,"icon"),this.seekOffset)}get mediaCurrentTime(){return Tl(this,At.MEDIA_CURRENT_TIME,oWe)}set mediaCurrentTime(e){Mc(this,At.MEDIA_CURRENT_TIME,e)}handleClick(){const e=this.mediaCurrentTime+this.seekOffset,r=new rr.CustomEvent(zn.MEDIA_SEEK_REQUEST,{composed:!0,bubbles:!0,detail:e});this.dispatchEvent(r)}}bU.getSlotTemplateHTML=sWe;bU.getTooltipContentHTML=aWe;rr.customElements.get("media-seek-forward-button")||rr.customElements.define("media-seek-forward-button",bU);var aoe=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},Y4=(t,e,r)=>(aoe(t,e,"read from private field"),r?r.call(t):e.get(t)),lWe=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},cWe=(t,e,r,n)=>(aoe(t,e,"write to private field"),e.set(t,r),r),Lx;const Ev={REMAINING:"remaining",SHOW_DURATION:"showduration",NO_TOGGLE:"notoggle"},pW=[...Object.values(Ev),At.MEDIA_CURRENT_TIME,At.MEDIA_DURATION,At.MEDIA_SEEKABLE],gW=["Enter"," "],uWe="&nbsp;/&nbsp;",dR=(t,{timesSep:e=uWe}={})=>{var r,n;const i=(r=t.mediaCurrentTime)!=null?r:0,[,s]=(n=t.mediaSeekable)!=null?n:[];let o=0;Number.isFinite(t.mediaDuration)?o=t.mediaDuration:Number.isFinite(s)&&(o=s);const c=t.remaining?N0(0-(o-i)):N0(i);return t.showDuration?`${c}${e}${N0(o)}`:c},dWe="video not loaded, unknown time.",hWe=t=>{var e;const r=t.mediaCurrentTime,[,n]=(e=t.mediaSeekable)!=null?e:[];let i=null;if(Number.isFinite(t.mediaDuration)?i=t.mediaDuration:Number.isFinite(n)&&(i=n),r==null||i===null){t.setAttribute("aria-valuetext",dWe);return}const s=t.remaining?cE(0-(i-r)):cE(r);if(!t.showDuration){t.setAttribute("aria-valuetext",s);return}const o=cE(i),c=`${s} of ${o}`;t.setAttribute("aria-valuetext",c)};function fWe(t,e){return`
    <slot>${dR(e)}</slot>
  `}class ooe extends z0{constructor(){super(),lWe(this,Lx,void 0),cWe(this,Lx,this.shadowRoot.querySelector("slot")),Y4(this,Lx).innerHTML=`${dR(this)}`}static get observedAttributes(){return[...super.observedAttributes,...pW,"disabled"]}connectedCallback(){const{style:e}=Uu(this.shadowRoot,":host(:hover:not([notoggle]))");e.setProperty("cursor","var(--media-cursor, pointer)"),e.setProperty("background","var(--media-control-hover-background, rgba(50 50 70 / .7))"),this.hasAttribute("disabled")||this.enable(),this.setAttribute("role","progressbar"),this.setAttribute("aria-label",mi("playback time"));const r=n=>{const{key:i}=n;if(!gW.includes(i)){this.removeEventListener("keyup",r);return}this.toggleTimeDisplay()};this.addEventListener("keydown",n=>{const{metaKey:i,altKey:s,key:o}=n;if(i||s||!gW.includes(o)){this.removeEventListener("keyup",r);return}this.addEventListener("keyup",r)}),this.addEventListener("click",this.toggleTimeDisplay),super.connectedCallback()}toggleTimeDisplay(){this.noToggle||(this.hasAttribute("remaining")?this.removeAttribute("remaining"):this.setAttribute("remaining",""))}disconnectedCallback(){this.disable(),super.disconnectedCallback()}attributeChangedCallback(e,r,n){pW.includes(e)?this.update():e==="disabled"&&n!==r&&(n==null?this.enable():this.disable()),super.attributeChangedCallback(e,r,n)}enable(){this.tabIndex=0}disable(){this.tabIndex=-1}get remaining(){return Pa(this,Ev.REMAINING)}set remaining(e){Oa(this,Ev.REMAINING,e)}get showDuration(){return Pa(this,Ev.SHOW_DURATION)}set showDuration(e){Oa(this,Ev.SHOW_DURATION,e)}get noToggle(){return Pa(this,Ev.NO_TOGGLE)}set noToggle(e){Oa(this,Ev.NO_TOGGLE,e)}get mediaDuration(){return Tl(this,At.MEDIA_DURATION)}set mediaDuration(e){Mc(this,At.MEDIA_DURATION,e)}get mediaCurrentTime(){return Tl(this,At.MEDIA_CURRENT_TIME)}set mediaCurrentTime(e){Mc(this,At.MEDIA_CURRENT_TIME,e)}get mediaSeekable(){const e=this.getAttribute(At.MEDIA_SEEKABLE);if(e)return e.split(":").map(r=>+r)}set mediaSeekable(e){if(e==null){this.removeAttribute(At.MEDIA_SEEKABLE);return}this.setAttribute(At.MEDIA_SEEKABLE,e.join(":"))}update(){const e=dR(this);hWe(this),e!==Y4(this,Lx).innerHTML&&(Y4(this,Lx).innerHTML=e)}}Lx=new WeakMap;ooe.getSlotTemplateHTML=fWe;rr.customElements.get("media-time-display")||rr.customElements.define("media-time-display",ooe);var loe=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},od=(t,e,r)=>(loe(t,e,"read from private field"),e.get(t)),hm=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},sf=(t,e,r,n)=>(loe(t,e,"write to private field"),e.set(t,r),r),AWe=(t,e,r,n)=>({set _(i){sf(t,e,i)},get _(){return od(t,e)}}),Bx,VT,Px,Ow,zT,KT,GT,Ox,_v,WT;class mWe{constructor(e,r,n){hm(this,Bx,void 0),hm(this,VT,void 0),hm(this,Px,void 0),hm(this,Ow,void 0),hm(this,zT,void 0),hm(this,KT,void 0),hm(this,GT,void 0),hm(this,Ox,void 0),hm(this,_v,0),hm(this,WT,(i=performance.now())=>{sf(this,_v,requestAnimationFrame(od(this,WT))),sf(this,Ow,performance.now()-od(this,Px));const s=1e3/this.fps;if(od(this,Ow)>s){sf(this,Px,i-od(this,Ow)%s);const o=1e3/((i-od(this,VT))/++AWe(this,zT)._),c=(i-od(this,KT))/1e3/this.duration;let u=od(this,GT)+c*this.playbackRate;u-od(this,Bx).valueAsNumber>0?sf(this,Ox,this.playbackRate/this.duration/o):(sf(this,Ox,.995*od(this,Ox)),u=od(this,Bx).valueAsNumber+od(this,Ox)),this.callback(u)}}),sf(this,Bx,e),this.callback=r,this.fps=n}start(){od(this,_v)===0&&(sf(this,Px,performance.now()),sf(this,VT,od(this,Px)),sf(this,zT,0),od(this,WT).call(this))}stop(){od(this,_v)!==0&&(cancelAnimationFrame(od(this,_v)),sf(this,_v,0))}update({start:e,duration:r,playbackRate:n}){const i=e-od(this,Bx).valueAsNumber,s=Math.abs(r-this.duration);(i>0||i<-.03||s>=.5)&&this.callback(e),sf(this,GT,e),sf(this,KT,performance.now()),this.duration=r,this.playbackRate=n}}Bx=new WeakMap;VT=new WeakMap;Px=new WeakMap;Ow=new WeakMap;zT=new WeakMap;KT=new WeakMap;GT=new WeakMap;Ox=new WeakMap;_v=new WeakMap;WT=new WeakMap;var wU=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},Jc=(t,e,r)=>(wU(t,e,"read from private field"),r?r.call(t):e.get(t)),Lu=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Uf=(t,e,r,n)=>(wU(t,e,"write to private field"),e.set(t,r),r),Jd=(t,e,r)=>(wU(t,e,"access private method"),r),Rx,ty,dN,hE,hN,YT,h2,f2,Dx,Mx,Fx,Rw,EU,coe,hR,fN,_U,AN,SU,mN,TU,fR,uoe,A2,pN,AR,doe;const pWe="video not loaded, unknown time.",gWe=t=>{const e=t.range,r=cE(+hoe(t)),n=cE(+t.mediaSeekableEnd),i=r&&n?`${r} of ${n}`:pWe;e.setAttribute("aria-valuetext",i)};function vWe(t){return`
    <style>
      :host {
        --media-box-border-radius: 4px;
        --media-box-padding-left: 10px;
        --media-box-padding-right: 10px;
        --media-preview-border-radius: var(--media-box-border-radius);
        --media-box-arrow-offset: var(--media-box-border-radius);
        --_control-background: var(--media-control-background, var(--media-secondary-color, rgb(20 20 30 / .7)));
        --_preview-background: var(--media-preview-background, var(--_control-background));

        
        contain: layout;
      }

      #buffered {
        background: var(--media-time-range-buffered-color, rgb(255 255 255 / .4));
        position: absolute;
        height: 100%;
        will-change: width;
      }

      #preview-rail,
      #current-rail {
        width: 100%;
        position: absolute;
        left: 0;
        bottom: 100%;
        pointer-events: none;
        will-change: transform;
      }

      [part~="box"] {
        width: min-content;
        
        position: absolute;
        bottom: 100%;
        flex-direction: column;
        align-items: center;
        transform: translateX(-50%);
      }

      [part~="current-box"] {
        display: var(--media-current-box-display, var(--media-box-display, flex));
        margin: var(--media-current-box-margin, var(--media-box-margin, 0 0 5px));
        visibility: hidden;
      }

      [part~="preview-box"] {
        display: var(--media-preview-box-display, var(--media-box-display, flex));
        margin: var(--media-preview-box-margin, var(--media-box-margin, 0 0 5px));
        transition-property: var(--media-preview-transition-property, visibility, opacity);
        transition-duration: var(--media-preview-transition-duration-out, .25s);
        transition-delay: var(--media-preview-transition-delay-out, 0s);
        visibility: hidden;
        opacity: 0;
      }

      :host(:is([${At.MEDIA_PREVIEW_IMAGE}], [${At.MEDIA_PREVIEW_TIME}])[dragging]) [part~="preview-box"] {
        transition-duration: var(--media-preview-transition-duration-in, .5s);
        transition-delay: var(--media-preview-transition-delay-in, .25s);
        visibility: visible;
        opacity: 1;
      }

      @media (hover: hover) {
        :host(:is([${At.MEDIA_PREVIEW_IMAGE}], [${At.MEDIA_PREVIEW_TIME}]):hover) [part~="preview-box"] {
          transition-duration: var(--media-preview-transition-duration-in, .5s);
          transition-delay: var(--media-preview-transition-delay-in, .25s);
          visibility: visible;
          opacity: 1;
        }
      }

      media-preview-thumbnail,
      ::slotted(media-preview-thumbnail) {
        visibility: hidden;
        
        transition: visibility 0s .25s;
        transition-delay: calc(var(--media-preview-transition-delay-out, 0s) + var(--media-preview-transition-duration-out, .25s));
        background: var(--media-preview-thumbnail-background, var(--_preview-background));
        box-shadow: var(--media-preview-thumbnail-box-shadow, 0 0 4px rgb(0 0 0 / .2));
        max-width: var(--media-preview-thumbnail-max-width, 180px);
        max-height: var(--media-preview-thumbnail-max-height, 160px);
        min-width: var(--media-preview-thumbnail-min-width, 120px);
        min-height: var(--media-preview-thumbnail-min-height, 80px);
        border: var(--media-preview-thumbnail-border);
        border-radius: var(--media-preview-thumbnail-border-radius,
          var(--media-preview-border-radius) var(--media-preview-border-radius) 0 0);
      }

      :host([${At.MEDIA_PREVIEW_IMAGE}][dragging]) media-preview-thumbnail,
      :host([${At.MEDIA_PREVIEW_IMAGE}][dragging]) ::slotted(media-preview-thumbnail) {
        transition-delay: var(--media-preview-transition-delay-in, .25s);
        visibility: visible;
      }

      @media (hover: hover) {
        :host([${At.MEDIA_PREVIEW_IMAGE}]:hover) media-preview-thumbnail,
        :host([${At.MEDIA_PREVIEW_IMAGE}]:hover) ::slotted(media-preview-thumbnail) {
          transition-delay: var(--media-preview-transition-delay-in, .25s);
          visibility: visible;
        }

        :host([${At.MEDIA_PREVIEW_TIME}]:hover) {
          --media-time-range-hover-display: block;
        }
      }

      media-preview-chapter-display,
      ::slotted(media-preview-chapter-display) {
        font-size: var(--media-font-size, 13px);
        line-height: 17px;
        min-width: 0;
        visibility: hidden;
        
        transition: min-width 0s, border-radius 0s, margin 0s, padding 0s, visibility 0s;
        transition-delay: calc(var(--media-preview-transition-delay-out, 0s) + var(--media-preview-transition-duration-out, .25s));
        background: var(--media-preview-chapter-background, var(--_preview-background));
        border-radius: var(--media-preview-chapter-border-radius,
          var(--media-preview-border-radius) var(--media-preview-border-radius)
          var(--media-preview-border-radius) var(--media-preview-border-radius));
        padding: var(--media-preview-chapter-padding, 3.5px 9px);
        margin: var(--media-preview-chapter-margin, 0 0 5px);
        text-shadow: var(--media-preview-chapter-text-shadow, 0 0 4px rgb(0 0 0 / .75));
      }

      :host([${At.MEDIA_PREVIEW_IMAGE}]) media-preview-chapter-display,
      :host([${At.MEDIA_PREVIEW_IMAGE}]) ::slotted(media-preview-chapter-display) {
        transition-delay: var(--media-preview-transition-delay-in, .25s);
        border-radius: var(--media-preview-chapter-border-radius, 0);
        padding: var(--media-preview-chapter-padding, 3.5px 9px 0);
        margin: var(--media-preview-chapter-margin, 0);
        min-width: 100%;
      }

      media-preview-chapter-display[${At.MEDIA_PREVIEW_CHAPTER}],
      ::slotted(media-preview-chapter-display[${At.MEDIA_PREVIEW_CHAPTER}]) {
        visibility: visible;
      }

      media-preview-chapter-display:not([aria-valuetext]),
      ::slotted(media-preview-chapter-display:not([aria-valuetext])) {
        display: none;
      }

      media-preview-time-display,
      ::slotted(media-preview-time-display),
      media-time-display,
      ::slotted(media-time-display) {
        font-size: var(--media-font-size, 13px);
        line-height: 17px;
        min-width: 0;
        
        transition: min-width 0s, border-radius 0s;
        transition-delay: calc(var(--media-preview-transition-delay-out, 0s) + var(--media-preview-transition-duration-out, .25s));
        background: var(--media-preview-time-background, var(--_preview-background));
        border-radius: var(--media-preview-time-border-radius,
          var(--media-preview-border-radius) var(--media-preview-border-radius)
          var(--media-preview-border-radius) var(--media-preview-border-radius));
        padding: var(--media-preview-time-padding, 3.5px 9px);
        margin: var(--media-preview-time-margin, 0);
        text-shadow: var(--media-preview-time-text-shadow, 0 0 4px rgb(0 0 0 / .75));
        transform: translateX(min(
          max(calc(50% - var(--_box-width) / 2),
          calc(var(--_box-shift, 0))),
          calc(var(--_box-width) / 2 - 50%)
        ));
      }

      :host([${At.MEDIA_PREVIEW_IMAGE}]) media-preview-time-display,
      :host([${At.MEDIA_PREVIEW_IMAGE}]) ::slotted(media-preview-time-display) {
        transition-delay: var(--media-preview-transition-delay-in, .25s);
        border-radius: var(--media-preview-time-border-radius,
          0 0 var(--media-preview-border-radius) var(--media-preview-border-radius));
        min-width: 100%;
      }

      :host([${At.MEDIA_PREVIEW_TIME}]:hover) {
        --media-time-range-hover-display: block;
      }

      [part~="arrow"],
      ::slotted([part~="arrow"]) {
        display: var(--media-box-arrow-display, inline-block);
        transform: translateX(min(
          max(calc(50% - var(--_box-width) / 2 + var(--media-box-arrow-offset)),
          calc(var(--_box-shift, 0))),
          calc(var(--_box-width) / 2 - 50% - var(--media-box-arrow-offset))
        ));
        
        border-color: transparent;
        border-top-color: var(--media-box-arrow-background, var(--_control-background));
        border-width: var(--media-box-arrow-border-width,
          var(--media-box-arrow-height, 5px) var(--media-box-arrow-width, 6px) 0);
        border-style: solid;
        justify-content: center;
        height: 0;
      }
    </style>
    <div id="preview-rail">
      <slot name="preview" part="box preview-box">
        <media-preview-thumbnail>
          <template shadowrootmode="${AW.shadowRootOptions.mode}">
            ${AW.getTemplateHTML({})}
          </template>
        </media-preview-thumbnail>
        <media-preview-chapter-display></media-preview-chapter-display>
        <media-preview-time-display></media-preview-time-display>
        <slot name="preview-arrow"><div part="arrow"></div></slot>
      </slot>
    </div>
    <div id="current-rail">
      <slot name="current" part="box current-box">
        
      </slot>
    </div>
  `}const MS=(t,e=t.mediaCurrentTime)=>{const r=Number.isFinite(t.mediaSeekableStart)?t.mediaSeekableStart:0,n=Number.isFinite(t.mediaDuration)?t.mediaDuration:t.mediaSeekableEnd;if(Number.isNaN(n))return 0;const i=(e-r)/(n-r);return Math.max(0,Math.min(i,1))},hoe=(t,e=t.range.valueAsNumber)=>{const r=Number.isFinite(t.mediaSeekableStart)?t.mediaSeekableStart:0,n=Number.isFinite(t.mediaDuration)?t.mediaDuration:t.mediaSeekableEnd;return Number.isNaN(n)?0:e*(n-r)+r};class CU extends b1{constructor(){super(),Lu(this,Fx),Lu(this,EU),Lu(this,fN),Lu(this,AN),Lu(this,mN),Lu(this,fR),Lu(this,A2),Lu(this,AR),Lu(this,Rx,void 0),Lu(this,ty,void 0),Lu(this,dN,void 0),Lu(this,hE,void 0),Lu(this,hN,void 0),Lu(this,YT,void 0),Lu(this,h2,void 0),Lu(this,f2,void 0),Lu(this,Dx,void 0),Lu(this,Mx,void 0),Lu(this,hR,n=>{this.dragging||(GF(n)&&(this.range.valueAsNumber=n),Jc(this,Mx)||this.updateBar())}),this.shadowRoot.querySelector("#track").insertAdjacentHTML("afterbegin",'<div id="buffered" part="buffered"></div>'),Uf(this,dN,this.shadowRoot.querySelectorAll('[part~="box"]')),Uf(this,hN,this.shadowRoot.querySelector('[part~="preview-box"]')),Uf(this,YT,this.shadowRoot.querySelector('[part~="current-box"]'));const r=getComputedStyle(this);Uf(this,h2,parseInt(r.getPropertyValue("--media-box-padding-left"))),Uf(this,f2,parseInt(r.getPropertyValue("--media-box-padding-right"))),Uf(this,ty,new mWe(this.range,Jc(this,hR),60))}static get observedAttributes(){return[...super.observedAttributes,At.MEDIA_PAUSED,At.MEDIA_DURATION,At.MEDIA_SEEKABLE,At.MEDIA_CURRENT_TIME,At.MEDIA_PREVIEW_IMAGE,At.MEDIA_PREVIEW_TIME,At.MEDIA_PREVIEW_CHAPTER,At.MEDIA_BUFFERED,At.MEDIA_PLAYBACK_RATE,At.MEDIA_LOADING,At.MEDIA_ENDED]}connectedCallback(){var e;super.connectedCallback(),this.range.setAttribute("aria-label",mi("seek")),Jd(this,Fx,Rw).call(this),Uf(this,Rx,this.getRootNode()),(e=Jc(this,Rx))==null||e.addEventListener("transitionstart",this)}disconnectedCallback(){var e;super.disconnectedCallback(),Jd(this,Fx,Rw).call(this),(e=Jc(this,Rx))==null||e.removeEventListener("transitionstart",this),Uf(this,Rx,null)}attributeChangedCallback(e,r,n){super.attributeChangedCallback(e,r,n),r!=n&&(e===At.MEDIA_CURRENT_TIME||e===At.MEDIA_PAUSED||e===At.MEDIA_ENDED||e===At.MEDIA_LOADING||e===At.MEDIA_DURATION||e===At.MEDIA_SEEKABLE?(Jc(this,ty).update({start:MS(this),duration:this.mediaSeekableEnd-this.mediaSeekableStart,playbackRate:this.mediaPlaybackRate}),Jd(this,Fx,Rw).call(this),gWe(this)):e===At.MEDIA_BUFFERED&&this.updateBufferedBar(),(e===At.MEDIA_DURATION||e===At.MEDIA_SEEKABLE)&&(this.mediaChaptersCues=Jc(this,Dx),this.updateBar()))}get mediaChaptersCues(){return Jc(this,Dx)}set mediaChaptersCues(e){var r;Uf(this,Dx,e),this.updateSegments((r=Jc(this,Dx))==null?void 0:r.map(n=>({start:MS(this,n.startTime),end:MS(this,n.endTime)})))}get mediaPaused(){return Pa(this,At.MEDIA_PAUSED)}set mediaPaused(e){Oa(this,At.MEDIA_PAUSED,e)}get mediaLoading(){return Pa(this,At.MEDIA_LOADING)}set mediaLoading(e){Oa(this,At.MEDIA_LOADING,e)}get mediaDuration(){return Tl(this,At.MEDIA_DURATION)}set mediaDuration(e){Mc(this,At.MEDIA_DURATION,e)}get mediaCurrentTime(){return Tl(this,At.MEDIA_CURRENT_TIME)}set mediaCurrentTime(e){Mc(this,At.MEDIA_CURRENT_TIME,e)}get mediaPlaybackRate(){return Tl(this,At.MEDIA_PLAYBACK_RATE,1)}set mediaPlaybackRate(e){Mc(this,At.MEDIA_PLAYBACK_RATE,e)}get mediaBuffered(){const e=this.getAttribute(At.MEDIA_BUFFERED);return e?e.split(" ").map(r=>r.split(":").map(n=>+n)):[]}set mediaBuffered(e){if(!e){this.removeAttribute(At.MEDIA_BUFFERED);return}const r=e.map(n=>n.join(":")).join(" ");this.setAttribute(At.MEDIA_BUFFERED,r)}get mediaSeekable(){const e=this.getAttribute(At.MEDIA_SEEKABLE);if(e)return e.split(":").map(r=>+r)}set mediaSeekable(e){if(e==null){this.removeAttribute(At.MEDIA_SEEKABLE);return}this.setAttribute(At.MEDIA_SEEKABLE,e.join(":"))}get mediaSeekableEnd(){var e;const[,r=this.mediaDuration]=(e=this.mediaSeekable)!=null?e:[];return r}get mediaSeekableStart(){var e;const[r=0]=(e=this.mediaSeekable)!=null?e:[];return r}get mediaPreviewImage(){return Cl(this,At.MEDIA_PREVIEW_IMAGE)}set mediaPreviewImage(e){jl(this,At.MEDIA_PREVIEW_IMAGE,e)}get mediaPreviewTime(){return Tl(this,At.MEDIA_PREVIEW_TIME)}set mediaPreviewTime(e){Mc(this,At.MEDIA_PREVIEW_TIME,e)}get mediaEnded(){return Pa(this,At.MEDIA_ENDED)}set mediaEnded(e){Oa(this,At.MEDIA_ENDED,e)}updateBar(){super.updateBar(),this.updateBufferedBar(),this.updateCurrentBox()}updateBufferedBar(){var e;const r=this.mediaBuffered;if(!r.length)return;let n;if(this.mediaEnded)n=1;else{const s=this.mediaCurrentTime,[,o=this.mediaSeekableStart]=(e=r.find(([c,u])=>c<=s&&s<=u))!=null?e:[];n=MS(this,o)}const{style:i}=Uu(this.shadowRoot,"#buffered");i.setProperty("width",`${n*100}%`)}updateCurrentBox(){if(!this.shadowRoot.querySelector('slot[name="current"]').assignedElements().length)return;const r=Uu(this.shadowRoot,"#current-rail"),n=Uu(this.shadowRoot,'[part~="current-box"]'),i=Jd(this,fN,_U).call(this,Jc(this,YT)),s=Jd(this,AN,SU).call(this,i,this.range.valueAsNumber),o=Jd(this,mN,TU).call(this,i,this.range.valueAsNumber);r.style.transform=`translateX(${s})`,r.style.setProperty("--_range-width",`${i.range.width}`),n.style.setProperty("--_box-shift",`${o}`),n.style.setProperty("--_box-width",`${i.box.width}px`),n.style.setProperty("visibility","initial")}handleEvent(e){switch(super.handleEvent(e),e.type){case"input":Jd(this,AR,doe).call(this);break;case"pointermove":Jd(this,fR,uoe).call(this,e);break;case"pointerup":Jc(this,Mx)&&Uf(this,Mx,!1);break;case"pointerdown":Uf(this,Mx,!0);break;case"pointerleave":Jd(this,A2,pN).call(this,null);break;case"transitionstart":Ag(e.target,this)&&setTimeout(()=>Jd(this,Fx,Rw).call(this),0);break}}}Rx=new WeakMap;ty=new WeakMap;dN=new WeakMap;hE=new WeakMap;hN=new WeakMap;YT=new WeakMap;h2=new WeakMap;f2=new WeakMap;Dx=new WeakMap;Mx=new WeakMap;Fx=new WeakSet;Rw=function(){Jd(this,EU,coe).call(this)?Jc(this,ty).start():Jc(this,ty).stop()};EU=new WeakSet;coe=function(){return this.isConnected&&!this.mediaPaused&&!this.mediaLoading&&!this.mediaEnded&&this.mediaSeekableEnd>0&&fae(this)};hR=new WeakMap;fN=new WeakSet;_U=function(t){var e;const n=((e=this.getAttribute("bounds")?y1(this,`#${this.getAttribute("bounds")}`):this.parentElement)!=null?e:this).getBoundingClientRect(),i=this.range.getBoundingClientRect(),s=t.offsetWidth,o=-(i.left-n.left-s/2),c=n.right-i.left-s/2;return{box:{width:s,min:o,max:c},bounds:n,range:i}};AN=new WeakSet;SU=function(t,e){let r=`${e*100}%`;const{width:n,min:i,max:s}=t.box;if(!n)return r;if(Number.isNaN(i)||(r=`max(${`calc(1 / var(--_range-width) * 100 * ${i}% + var(--media-box-padding-left))`}, ${r})`),!Number.isNaN(s)){const c=`calc(1 / var(--_range-width) * 100 * ${s}% - var(--media-box-padding-right))`;r=`min(${r}, ${c})`}return r};mN=new WeakSet;TU=function(t,e){const{width:r,min:n,max:i}=t.box,s=e*t.range.width;if(s<n+Jc(this,h2)){const o=t.range.left-t.bounds.left-Jc(this,h2);return`${s-r/2+o}px`}if(s>i-Jc(this,f2)){const o=t.bounds.right-t.range.right-Jc(this,f2);return`${s+r/2-o-t.range.width}px`}return 0};fR=new WeakSet;uoe=function(t){const e=[...Jc(this,dN)].some(d=>t.composedPath().includes(d));if(!this.dragging&&(e||!t.composedPath().includes(this))){Jd(this,A2,pN).call(this,null);return}const r=this.mediaSeekableEnd;if(!r)return;const n=Uu(this.shadowRoot,"#preview-rail"),i=Uu(this.shadowRoot,'[part~="preview-box"]'),s=Jd(this,fN,_U).call(this,Jc(this,hN));let o=(t.clientX-s.range.left)/s.range.width;o=Math.max(0,Math.min(1,o));const c=Jd(this,AN,SU).call(this,s,o),u=Jd(this,mN,TU).call(this,s,o);n.style.transform=`translateX(${c})`,n.style.setProperty("--_range-width",`${s.range.width}`),i.style.setProperty("--_box-shift",`${u}`),i.style.setProperty("--_box-width",`${s.box.width}px`);const l=Math.round(Jc(this,hE))-Math.round(o*r);Math.abs(l)<1&&o>.01&&o<.99||(Uf(this,hE,o*r),Jd(this,A2,pN).call(this,Jc(this,hE)))};A2=new WeakSet;pN=function(t){this.dispatchEvent(new rr.CustomEvent(zn.MEDIA_PREVIEW_REQUEST,{composed:!0,bubbles:!0,detail:t}))};AR=new WeakSet;doe=function(){Jc(this,ty).stop();const t=hoe(this);this.dispatchEvent(new rr.CustomEvent(zn.MEDIA_SEEK_REQUEST,{composed:!0,bubbles:!0,detail:t}))};CU.shadowRootOptions={mode:"open"};CU.getContainerTemplateHTML=vWe;rr.customElements.get("media-time-range")||rr.customElements.define("media-time-range",CU);const yWe=1,xWe=t=>t.mediaMuted?0:t.mediaVolume,bWe=t=>`${Math.round(t*100)}%`;class wWe extends b1{static get observedAttributes(){return[...super.observedAttributes,At.MEDIA_VOLUME,At.MEDIA_MUTED,At.MEDIA_VOLUME_UNAVAILABLE]}constructor(){super(),this.range.addEventListener("input",()=>{const e=this.range.value,r=new rr.CustomEvent(zn.MEDIA_VOLUME_REQUEST,{composed:!0,bubbles:!0,detail:e});this.dispatchEvent(r)})}connectedCallback(){super.connectedCallback(),this.range.setAttribute("aria-label",mi("volume"))}attributeChangedCallback(e,r,n){super.attributeChangedCallback(e,r,n),(e===At.MEDIA_VOLUME||e===At.MEDIA_MUTED)&&(this.range.valueAsNumber=xWe(this),this.range.setAttribute("aria-valuetext",bWe(this.range.valueAsNumber)),this.updateBar())}get mediaVolume(){return Tl(this,At.MEDIA_VOLUME,yWe)}set mediaVolume(e){Mc(this,At.MEDIA_VOLUME,e)}get mediaMuted(){return Pa(this,At.MEDIA_MUTED)}set mediaMuted(e){Oa(this,At.MEDIA_MUTED,e)}get mediaVolumeUnavailable(){return Cl(this,At.MEDIA_VOLUME_UNAVAILABLE)}set mediaVolumeUnavailable(e){jl(this,At.MEDIA_VOLUME_UNAVAILABLE,e)}}rr.customElements.get("media-volume-range")||rr.customElements.define("media-volume-range",wWe);function EWe(t){return`
      <style>
        :host {
          min-width: 4ch;
          padding: var(--media-button-padding, var(--media-control-padding, 10px 5px));
          width: 100%;
          display: grid;
          grid-template-columns: 1fr auto;
          gap: 1rem;
          font-weight: var(--media-button-font-weight, normal);
        }

        #checked-indicator {
          display: none;
        }

        :host([${At.MEDIA_LOOP}]) #checked-indicator {
          display: block;
        }
      </style>
      
      <span id="icon">
     </span>

      <div id="checked-indicator">
        <svg aria-hidden="true" viewBox="0 1 24 24" part="checked-indicator indicator">
          <path d="m10 15.17 9.193-9.191 1.414 1.414-10.606 10.606-6.364-6.364 1.414-1.414 4.95 4.95Z"/>
        </svg>
      </div>
    `}function _We(){return mi("Loop")}class jU extends vd{constructor(){super(...arguments),this.container=null}static get observedAttributes(){return[...super.observedAttributes,At.MEDIA_LOOP]}connectedCallback(){var e;super.connectedCallback(),this.container=((e=this.shadowRoot)==null?void 0:e.querySelector("#icon"))||null,this.container&&(this.container.textContent=mi("Loop"))}attributeChangedCallback(e,r,n){super.attributeChangedCallback(e,r,n),e===At.MEDIA_LOOP&&this.container&&this.setAttribute("aria-checked",this.mediaLoop?"true":"false")}get mediaLoop(){return Pa(this,At.MEDIA_LOOP)}set mediaLoop(e){Oa(this,At.MEDIA_LOOP,e)}handleClick(){const e=!this.mediaLoop,r=new rr.CustomEvent(zn.MEDIA_LOOP_REQUEST,{composed:!0,bubbles:!0,detail:e});this.dispatchEvent(r)}}jU.getSlotTemplateHTML=EWe;jU.getTooltipContentHTML=_We;rr.customElements.get("media-loop-button")||rr.customElements.define("media-loop-button",jU);var foe=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},ma=(t,e,r)=>(foe(t,e,"read from private field"),r?r.call(t):e.get(t)),Im=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Dp=(t,e,r,n)=>(foe(t,e,"write to private field"),e.set(t,r),r),Ux,qT,Sv,Dw,r0,n0,i0,Tv,$x,XT,bA;const vW=1,yW=0,SWe=1,TWe={processCallback(t,e,r){if(r){for(const[n,i]of e)if(n in r){const s=r[n];typeof s=="boolean"&&i instanceof RA&&typeof i.element[i.attributeName]=="boolean"?i.booleanValue=s:typeof s=="function"&&i instanceof RA?i.element[i.attributeName]=s:i.value=s}}}};class nk extends rr.DocumentFragment{constructor(e,r,n=TWe){var i;super(),Im(this,Ux,void 0),Im(this,qT,void 0),this.append(e.content.cloneNode(!0)),Dp(this,Ux,Aoe(this)),Dp(this,qT,n),(i=n.createCallback)==null||i.call(n,this,ma(this,Ux),r),n.processCallback(this,ma(this,Ux),r)}update(e){ma(this,qT).processCallback(this,ma(this,Ux),e)}}Ux=new WeakMap;qT=new WeakMap;const Aoe=(t,e=[])=>{let r,n;for(const i of t.attributes||[])if(i.value.includes("{{")){const s=new jWe;for([r,n]of bW(i.value))if(!r)s.append(n);else{const o=new RA(t,i.name,i.namespaceURI);s.append(o),e.push([n,o])}i.value=s.toString()}for(const i of t.childNodes)if(i.nodeType===vW&&!(i instanceof HTMLTemplateElement))Aoe(i,e);else{const s=i.data;if(i.nodeType===vW||s.includes("{{")){const o=[];if(s)for([r,n]of bW(s))if(!r)o.push(new Text(n));else{const c=new w1(t);o.push(c),e.push([n,c])}else if(i instanceof HTMLTemplateElement){const c=new goe(t,i);o.push(c),e.push([c.expression,c])}i.replaceWith(...o.flatMap(c=>c.replacementNodes||[c]))}}return e},xW={},bW=t=>{let e="",r=0,n=xW[t],i=0,s;if(n)return n;for(n=[];s=t[i];i++)s==="{"&&t[i+1]==="{"&&t[i-1]!=="\\"&&t[i+2]&&++r==1?(e&&n.push([yW,e]),e="",i++):s==="}"&&t[i+1]==="}"&&t[i-1]!=="\\"&&!--r?(n.push([SWe,e.trim()]),e="",i++):e+=s||"";return e&&n.push([yW,(r>0?"{{":"")+e]),xW[t]=n},CWe=11;class moe{get value(){return""}set value(e){}toString(){return this.value}}const poe=new WeakMap;class jWe{constructor(){Im(this,Sv,[])}[Symbol.iterator](){return ma(this,Sv).values()}get length(){return ma(this,Sv).length}item(e){return ma(this,Sv)[e]}append(...e){for(const r of e)r instanceof RA&&poe.set(r,this),ma(this,Sv).push(r)}toString(){return ma(this,Sv).join("")}}Sv=new WeakMap;class RA extends moe{constructor(e,r,n){super(),Im(this,Tv),Im(this,Dw,""),Im(this,r0,void 0),Im(this,n0,void 0),Im(this,i0,void 0),Dp(this,r0,e),Dp(this,n0,r),Dp(this,i0,n)}get attributeName(){return ma(this,n0)}get attributeNamespace(){return ma(this,i0)}get element(){return ma(this,r0)}get value(){return ma(this,Dw)}set value(e){ma(this,Dw)!==e&&(Dp(this,Dw,e),!ma(this,Tv,$x)||ma(this,Tv,$x).length===1?e==null?ma(this,r0).removeAttributeNS(ma(this,i0),ma(this,n0)):ma(this,r0).setAttributeNS(ma(this,i0),ma(this,n0),e):ma(this,r0).setAttributeNS(ma(this,i0),ma(this,n0),ma(this,Tv,$x).toString()))}get booleanValue(){return ma(this,r0).hasAttributeNS(ma(this,i0),ma(this,n0))}set booleanValue(e){if(!ma(this,Tv,$x)||ma(this,Tv,$x).length===1)this.value=e?"":null;else throw new DOMException("Value is not fully templatized")}}Dw=new WeakMap;r0=new WeakMap;n0=new WeakMap;i0=new WeakMap;Tv=new WeakSet;$x=function(){return poe.get(this)};class w1 extends moe{constructor(e,r){super(),Im(this,XT,void 0),Im(this,bA,void 0),Dp(this,XT,e),Dp(this,bA,r?[...r]:[new Text])}get replacementNodes(){return ma(this,bA)}get parentNode(){return ma(this,XT)}get nextSibling(){return ma(this,bA)[ma(this,bA).length-1].nextSibling}get previousSibling(){return ma(this,bA)[0].previousSibling}get value(){return ma(this,bA).map(e=>e.textContent).join("")}set value(e){this.replace(e)}replace(...e){const r=e.flat().flatMap(n=>n==null?[new Text]:n.forEach?[...n]:n.nodeType===CWe?[...n.childNodes]:n.nodeType?[n]:[new Text(n)]);r.length||r.push(new Text),Dp(this,bA,NWe(ma(this,bA)[0].parentNode,ma(this,bA),r,this.nextSibling))}}XT=new WeakMap;bA=new WeakMap;class goe extends w1{constructor(e,r){const n=r.getAttribute("directive")||r.getAttribute("type");let i=r.getAttribute("expression")||r.getAttribute(n)||"";i.startsWith("{{")&&(i=i.trim().slice(2,-2).trim()),super(e),this.expression=i,this.template=r,this.directive=n}}function NWe(t,e,r,n=null){let i=0,s,o,c,u=r.length,l=e.length;for(;i<u&&i<l&&e[i]==r[i];)i++;for(;i<u&&i<l&&r[u-1]==e[l-1];)n=r[--l,--u];if(i==l)for(;i<u;)t.insertBefore(r[i++],n);if(i==u)for(;i<l;)t.removeChild(e[i++]);else{for(s=e[i];i<u;)c=r[i++],o=s?s.nextSibling:n,s==c?s=o:i<u&&r[i]==o?(t.replaceChild(c,s),s=o):t.insertBefore(c,s);for(;s!=n;)o=s.nextSibling,t.removeChild(s),s=o}return r}const wW={string:t=>String(t)};class voe{constructor(e){this.template=e,this.state=void 0}}const Vv=new WeakMap,zv=new WeakMap,mR={partial:(t,e)=>{e[t.expression]=new voe(t.template)},if:(t,e)=>{var r;if(yoe(t.expression,e))if(Vv.get(t)!==t.template){Vv.set(t,t.template);const n=new nk(t.template,e,NU);t.replace(n),zv.set(t,n)}else(r=zv.get(t))==null||r.update(e);else t.replace(""),Vv.delete(t),zv.delete(t)}},kWe=Object.keys(mR),NU={processCallback(t,e,r){var n,i;if(r)for(const[s,o]of e){if(o instanceof goe){if(!o.directive){const u=kWe.find(l=>o.template.hasAttribute(l));u&&(o.directive=u,o.expression=o.template.getAttribute(u))}(n=mR[o.directive])==null||n.call(mR,o,r);continue}let c=yoe(s,r);if(c instanceof voe){Vv.get(o)!==c.template?(Vv.set(o,c.template),c=new nk(c.template,c.state,NU),o.value=c,zv.set(o,c)):(i=zv.get(o))==null||i.update(c.state);continue}c?(o instanceof RA&&o.attributeName.startsWith("aria-")&&(c=String(c)),o instanceof RA?typeof c=="boolean"?o.booleanValue=c:typeof c=="function"?o.element[o.attributeName]=c:o.value=c:(o.value=c,Vv.delete(o),zv.delete(o))):o instanceof RA?o.value=void 0:(o.value=void 0,Vv.delete(o),zv.delete(o))}}},EW={"!":t=>!t,"!!":t=>!!t,"==":(t,e)=>t==e,"!=":(t,e)=>t!=e,">":(t,e)=>t>e,">=":(t,e)=>t>=e,"<":(t,e)=>t<e,"<=":(t,e)=>t<=e,"??":(t,e)=>t??e,"|":(t,e)=>{var r;return(r=wW[e])==null?void 0:r.call(wW,t)}};function IWe(t){return LWe(t,{boolean:/true|false/,number:/-?\d+\.?\d*/,string:/(["'])((?:\\.|[^\\])*?)\1/,operator:/[!=><][=!]?|\?\?|\|/,ws:/\s+/,param:/[$a-z_][$\w]*/i}).filter(({type:e})=>e!=="ws")}function yoe(t,e={}){var r,n,i,s,o,c,u;const l=IWe(t);if(l.length===0||l.some(({type:d})=>!d))return aw(t);if(((r=l[0])==null?void 0:r.token)===">"){const d=e[(n=l[1])==null?void 0:n.token];if(!d)return aw(t);const f={...e};d.state=f;const A=l.slice(2);for(let p=0;p<A.length;p+=3){const g=(i=A[p])==null?void 0:i.token,y=(s=A[p+1])==null?void 0:s.token,x=(o=A[p+2])==null?void 0:o.token;g&&y==="="&&(f[g]=ow(x,e))}return d}if(l.length===1)return FS(l[0])?ow(l[0].token,e):aw(t);if(l.length===2){const d=(c=l[0])==null?void 0:c.token,f=EW[d];if(!f||!FS(l[1]))return aw(t);const A=ow(l[1].token,e);return f(A)}if(l.length===3){const d=(u=l[1])==null?void 0:u.token,f=EW[d];if(!f||!FS(l[0])||!FS(l[2]))return aw(t);const A=ow(l[0].token,e);if(d==="|")return f(A,l[2].token);const p=ow(l[2].token,e);return f(A,p)}}function aw(t){return console.warn(`Warning: invalid expression \`${t}\``),!1}function FS({type:t}){return["number","boolean","string","param"].includes(t)}function ow(t,e){const r=t[0],n=t.slice(-1);return t==="true"||t==="false"?t==="true":r===n&&["'",'"'].includes(r)?t.slice(1,-1):nae(t)?parseFloat(t):e[t]}function LWe(t,e){let r,n,i;const s=[];for(;t;){i=null,r=t.length;for(const o in e)n=e[o].exec(t),n&&n.index<r&&(i={token:n[0],type:o,matches:n.slice(1)},r=n.index);r&&s.push({token:t.substr(0,r),type:void 0}),i&&s.push(i),t=t.substr(r+(i?i.token.length:0))}return s}var kU=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},pR=(t,e,r)=>(kU(t,e,"read from private field"),r?r.call(t):e.get(t)),lw=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Kv=(t,e,r,n)=>(kU(t,e,"write to private field"),e.set(t,r),r),q4=(t,e,r)=>(kU(t,e,"access private method"),r),bb,ZT,wb,gR,xoe,JT,vR;const X4={mediatargetlivewindow:"targetlivewindow",mediastreamtype:"streamtype"},boe=vu.createElement("template");boe.innerHTML=`
  <style>
    :host {
      display: inline-block;
      line-height: 0;
    }

    media-controller {
      width: 100%;
      height: 100%;
    }

    media-captions-button:not([mediasubtitleslist]),
    media-captions-menu:not([mediasubtitleslist]),
    media-captions-menu-button:not([mediasubtitleslist]),
    media-audio-track-menu[mediaaudiotrackunavailable],
    media-audio-track-menu-button[mediaaudiotrackunavailable],
    media-rendition-menu[mediarenditionunavailable],
    media-rendition-menu-button[mediarenditionunavailable],
    media-volume-range[mediavolumeunavailable],
    media-airplay-button[mediaairplayunavailable],
    media-fullscreen-button[mediafullscreenunavailable],
    media-cast-button[mediacastunavailable],
    media-pip-button[mediapipunavailable] {
      display: none;
    }
  </style>
`;class ik extends rr.HTMLElement{constructor(){super(),lw(this,gR),lw(this,JT),lw(this,bb,void 0),lw(this,ZT,void 0),lw(this,wb,void 0),this.shadowRoot?this.renderRoot=this.shadowRoot:(this.renderRoot=this.attachShadow({mode:"open"}),this.createRenderer());const e=new MutationObserver(r=>{var n;this.mediaController&&!((n=this.mediaController)!=null&&n.breakpointsComputed)||r.some(i=>{const s=i.target;return s===this?!0:s.localName!=="media-controller"?!1:!!(X4[i.attributeName]||i.attributeName.startsWith("breakpoint"))})&&this.render()});e.observe(this,{attributes:!0}),e.observe(this.renderRoot,{attributes:!0,subtree:!0}),this.addEventListener(ng.BREAKPOINTS_COMPUTED,this.render),q4(this,gR,xoe).call(this,"template")}get mediaController(){return this.renderRoot.querySelector("media-controller")}get template(){var e;return(e=pR(this,bb))!=null?e:this.constructor.template}set template(e){if(e===null){this.removeAttribute("template");return}typeof e=="string"?this.setAttribute("template",e):e instanceof HTMLTemplateElement&&(Kv(this,bb,e),Kv(this,wb,null),this.createRenderer())}get props(){var e,r,n;const i=[...Array.from((r=(e=this.mediaController)==null?void 0:e.attributes)!=null?r:[]).filter(({name:o})=>X4[o]||o.startsWith("breakpoint")),...Array.from(this.attributes)],s={};for(const o of i){const c=(n=X4[o.name])!=null?n:Oze(o.name);let{value:u}=o;u!=null?(nae(u)&&(u=parseFloat(u)),s[c]=u===""?!0:u):s[c]=!1}return s}attributeChangedCallback(e,r,n){e==="template"&&r!=n&&q4(this,JT,vR).call(this)}connectedCallback(){q4(this,JT,vR).call(this)}createRenderer(){this.template instanceof HTMLTemplateElement&&this.template!==pR(this,ZT)&&(Kv(this,ZT,this.template),this.renderer=new nk(this.template,this.props,this.constructor.processor),this.renderRoot.textContent="",this.renderRoot.append(boe.content.cloneNode(!0),this.renderer))}render(){var e;(e=this.renderer)==null||e.update(this.props)}}bb=new WeakMap;ZT=new WeakMap;wb=new WeakMap;gR=new WeakSet;xoe=function(t){if(Object.prototype.hasOwnProperty.call(this,t)){const e=this[t];delete this[t],this[t]=e}};JT=new WeakSet;vR=function(){var t;const e=this.getAttribute("template");if(!e||e===pR(this,wb))return;const r=this.getRootNode(),n=(t=r?.getElementById)==null?void 0:t.call(r,e);if(n){Kv(this,wb,e),Kv(this,bb,n),this.createRenderer();return}BWe(e)&&(Kv(this,wb,e),PWe(e).then(i=>{const s=vu.createElement("template");s.innerHTML=i,Kv(this,bb,s),this.createRenderer()}).catch(console.error))};ik.observedAttributes=["template"];ik.processor=NU;function BWe(t){if(!/^(\/|\.\/|https?:\/\/)/.test(t))return!1;const e=/^https?:\/\//.test(t)?void 0:location.origin;try{new URL(t,e)}catch{return!1}return!0}async function PWe(t){const e=await fetch(t);if(e.status!==200)throw new Error(`Failed to load resource: the server responded with a status of ${e.status}`);return e.text()}rr.customElements.get("media-theme")||rr.customElements.define("media-theme",ik);function OWe({anchor:t,floating:e,placement:r}){const n=RWe({anchor:t,floating:e}),{x:i,y:s}=MWe(n,r);return{x:i,y:s}}function RWe({anchor:t,floating:e}){return{anchor:DWe(t,e.offsetParent),floating:{x:0,y:0,width:e.offsetWidth,height:e.offsetHeight}}}function DWe(t,e){var r;const n=t.getBoundingClientRect(),i=(r=e?.getBoundingClientRect())!=null?r:{x:0,y:0};return{x:n.x-i.x,y:n.y-i.y,width:n.width,height:n.height}}function MWe({anchor:t,floating:e},r){const n=FWe(r)==="x"?"y":"x",i=n==="y"?"height":"width",s=woe(r),o=t.x+t.width/2-e.width/2,c=t.y+t.height/2-e.height/2,u=t[i]/2-e[i]/2;let l;switch(s){case"top":l={x:o,y:t.y-e.height};break;case"bottom":l={x:o,y:t.y+t.height};break;case"right":l={x:t.x+t.width,y:c};break;case"left":l={x:t.x-e.width,y:c};break;default:l={x:t.x,y:t.y}}switch(r.split("-")[1]){case"start":l[n]-=u;break;case"end":l[n]+=u;break}return l}function woe(t){return t.split("-")[0]}function FWe(t){return["top","bottom"].includes(woe(t))?"y":"x"}class IU extends Event{constructor({action:e="auto",relatedTarget:r,...n}){super("invoke",n),this.action=e,this.relatedTarget=r}}class UWe extends Event{constructor({newState:e,oldState:r,...n}){super("toggle",n),this.newState=e,this.oldState=r}}var LU=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},fo=(t,e,r)=>(LU(t,e,"read from private field"),r?r.call(t):e.get(t)),el=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},_m=(t,e,r,n)=>(LU(t,e,"write to private field"),e.set(t,r),r),tl=(t,e,r)=>(LU(t,e,"access private method"),r),Sm,ry,F0,eC,tC,ny,m2,yR,Eoe,gN,BU,vN,rC,xR,bR,_oe,wR,Soe,ER,Toe,Eb,_b,Sb,p2,yN,PU,_R,Coe,OU,joe,SR,Noe,RU,koe,TR,Ioe,CR,Loe,fE,xN,jR,Boe,AE,bN,nC,NR;function Gb({type:t,text:e,value:r,checked:n}){const i=vu.createElement("media-chrome-menu-item");i.type=t,i.part.add("menu-item"),i.part.add(t),i.value=r,i.checked=n;const s=vu.createElement("span");return s.textContent=e,i.append(s),i}function iy(t,e){let r=t.querySelector(`:scope > [slot="${e}"]`);if(r?.nodeName=="SLOT"&&(r=r.assignedElements({flatten:!0})[0]),r)return r=r.cloneNode(!0),r;const n=t.shadowRoot.querySelector(`[name="${e}"] > svg`);return n?n.cloneNode(!0):""}function $We(t){return`
    <style>
      :host {
        font: var(--media-font,
          var(--media-font-weight, normal)
          var(--media-font-size, 14px) /
          var(--media-text-content-height, var(--media-control-height, 24px))
          var(--media-font-family, helvetica neue, segoe ui, roboto, arial, sans-serif));
        color: var(--media-text-color, var(--media-primary-color, rgb(238 238 238)));
        --_menu-bg: rgb(20 20 30 / .8);
        background: var(--media-menu-background, var(--media-control-background, var(--media-secondary-color, var(--_menu-bg))));
        border-radius: var(--media-menu-border-radius);
        border: var(--media-menu-border, none);
        display: var(--media-menu-display, inline-flex) !important;
        
        transition: var(--media-menu-transition-in,
          visibility 0s,
          opacity .2s ease-out,
          transform .15s ease-out,
          left .2s ease-in-out,
          min-width .2s ease-in-out,
          min-height .2s ease-in-out
        ) !important;
        
        visibility: var(--media-menu-visibility, visible);
        opacity: var(--media-menu-opacity, 1);
        max-height: var(--media-menu-max-height, var(--_menu-max-height, 300px));
        transform: var(--media-menu-transform-in, translateY(0) scale(1));
        flex-direction: column;
        
        min-height: 0;
        position: relative;
        bottom: var(--_menu-bottom);
        box-sizing: border-box;
      } 

      @-moz-document url-prefix() {
        :host{
          --_menu-bg: rgb(20 20 30);
        }
      }

      :host([hidden]) {
        transition: var(--media-menu-transition-out,
          visibility .15s ease-in,
          opacity .15s ease-in,
          transform .15s ease-in
        ) !important;
        visibility: var(--media-menu-hidden-visibility, hidden);
        opacity: var(--media-menu-hidden-opacity, 0);
        max-height: var(--media-menu-hidden-max-height,
          var(--media-menu-max-height, var(--_menu-max-height, 300px)));
        transform: var(--media-menu-transform-out, translateY(2px) scale(.99));
        pointer-events: none;
      }

      :host([slot="submenu"]) {
        background: none;
        width: 100%;
        min-height: 100%;
        position: absolute;
        bottom: 0;
        right: -100%;
      }

      #container {
        display: flex;
        flex-direction: column;
        min-height: 0;
        transition: transform .2s ease-out;
        transform: translate(0, 0);
      }

      #container.has-expanded {
        transition: transform .2s ease-in;
        transform: translate(-100%, 0);
      }

      button {
        background: none;
        color: inherit;
        border: none;
        padding: 0;
        font: inherit;
        outline: inherit;
        display: inline-flex;
        align-items: center;
      }

      slot[name="header"][hidden] {
        display: none;
      }

      slot[name="header"] > *,
      slot[name="header"]::slotted(*) {
        padding: .4em .7em;
        border-bottom: 1px solid rgb(255 255 255 / .25);
        cursor: var(--media-cursor, default);
      }

      slot[name="header"] > button[part~="back"],
      slot[name="header"]::slotted(button[part~="back"]) {
        cursor: var(--media-cursor, pointer);
      }

      svg[part~="back"] {
        height: var(--media-menu-icon-height, var(--media-control-height, 24px));
        fill: var(--media-icon-color, var(--media-primary-color, rgb(238 238 238)));
        display: block;
        margin-right: .5ch;
      }

      slot:not([name]) {
        gap: var(--media-menu-gap);
        flex-direction: var(--media-menu-flex-direction, column);
        overflow: var(--media-menu-overflow, hidden auto);
        display: flex;
        min-height: 0;
      }

      :host([role="menu"]) slot:not([name]) {
        padding-block: .4em;
      }

      slot:not([name])::slotted([role="menu"]) {
        background: none;
      }

      media-chrome-menu-item > span {
        margin-right: .5ch;
        max-width: var(--media-menu-item-max-width);
        text-overflow: ellipsis;
        overflow: hidden;
      }
    </style>
    <style id="layout-row" media="width:0">

      slot[name="header"] > *,
      slot[name="header"]::slotted(*) {
        padding: .4em .5em;
      }

      slot:not([name]) {
        gap: var(--media-menu-gap, .25em);
        flex-direction: var(--media-menu-flex-direction, row);
        padding-inline: .5em;
      }

      media-chrome-menu-item {
        padding: .3em .5em;
      }

      media-chrome-menu-item[aria-checked="true"] {
        background: var(--media-menu-item-checked-background, rgb(255 255 255 / .2));
      }

      
      media-chrome-menu-item::part(checked-indicator) {
        display: var(--media-menu-item-checked-indicator-display, none);
      }
    </style>
    <div id="container" part="container">
      <slot name="header" hidden>
        <button part="back button" aria-label="Back to previous menu">
          <slot name="back-icon">
            <svg aria-hidden="true" viewBox="0 0 20 24" part="back indicator">
              <path d="m11.88 17.585.742-.669-4.2-4.665 4.2-4.666-.743-.669-4.803 5.335 4.803 5.334Z"/>
            </svg>
          </slot>
          <slot name="title"></slot>
        </button>
      </slot>
      <slot></slot>
    </div>
    <slot name="checked-indicator" hidden></slot>
  `}const fv={STYLE:"style",HIDDEN:"hidden",DISABLED:"disabled",ANCHOR:"anchor"};class sA extends rr.HTMLElement{constructor(){if(super(),el(this,yR),el(this,gN),el(this,rC),el(this,bR),el(this,wR),el(this,ER),el(this,Sb),el(this,yN),el(this,_R),el(this,OU),el(this,SR),el(this,RU),el(this,TR),el(this,CR),el(this,fE),el(this,jR),el(this,AE),el(this,nC),el(this,Sm,null),el(this,ry,null),el(this,F0,null),el(this,eC,new Set),el(this,tC,void 0),el(this,ny,!1),el(this,m2,null),el(this,vN,()=>{const e=fo(this,eC),r=new Set(this.items);for(const n of e)r.has(n)||this.dispatchEvent(new CustomEvent("removemenuitem",{detail:n}));for(const n of r)e.has(n)||this.dispatchEvent(new CustomEvent("addmenuitem",{detail:n}));_m(this,eC,r)}),el(this,Eb,()=>{tl(this,Sb,p2).call(this),tl(this,yN,PU).call(this,!1)}),el(this,_b,()=>{tl(this,Sb,p2).call(this)}),!this.shadowRoot){this.attachShadow(this.constructor.shadowRootOptions);const e=Sf(this.attributes);this.shadowRoot.innerHTML=this.constructor.getTemplateHTML(e)}this.container=this.shadowRoot.querySelector("#container"),this.defaultSlot=this.shadowRoot.querySelector("slot:not([name])"),this.shadowRoot.addEventListener("slotchange",this),_m(this,tC,new MutationObserver(fo(this,vN))),fo(this,tC).observe(this.defaultSlot,{childList:!0})}static get observedAttributes(){return[fv.DISABLED,fv.HIDDEN,fv.STYLE,fv.ANCHOR,Ao.MEDIA_CONTROLLER]}static formatMenuItemText(e,r){return e}enable(){this.addEventListener("click",this),this.addEventListener("focusout",this),this.addEventListener("keydown",this),this.addEventListener("invoke",this),this.addEventListener("toggle",this)}disable(){this.removeEventListener("click",this),this.removeEventListener("focusout",this),this.removeEventListener("keyup",this),this.removeEventListener("invoke",this),this.removeEventListener("toggle",this)}handleEvent(e){switch(e.type){case"slotchange":tl(this,yR,Eoe).call(this,e);break;case"invoke":tl(this,bR,_oe).call(this,e);break;case"click":tl(this,_R,Coe).call(this,e);break;case"toggle":tl(this,SR,Noe).call(this,e);break;case"focusout":tl(this,TR,Ioe).call(this,e);break;case"keydown":tl(this,CR,Loe).call(this,e);break}}connectedCallback(){var e,r;_m(this,m2,qF(this.shadowRoot,":host")),tl(this,rC,xR).call(this),this.hasAttribute("disabled")||this.enable(),this.role||(this.role="menu"),_m(this,Sm,QO(this)),(r=(e=fo(this,Sm))==null?void 0:e.associateElement)==null||r.call(e,this),this.hidden||(Vb(g2(this),fo(this,Eb)),Vb(this,fo(this,_b))),tl(this,gN,BU).call(this)}disconnectedCallback(){var e,r;zb(g2(this),fo(this,Eb)),zb(this,fo(this,_b)),this.disable(),(r=(e=fo(this,Sm))==null?void 0:e.unassociateElement)==null||r.call(e,this),_m(this,Sm,null)}attributeChangedCallback(e,r,n){var i,s,o,c;e===fv.HIDDEN&&n!==r?(fo(this,ny)||_m(this,ny,!0),this.hidden?tl(this,ER,Toe).call(this):tl(this,wR,Soe).call(this),this.dispatchEvent(new UWe({oldState:this.hidden?"open":"closed",newState:this.hidden?"closed":"open",bubbles:!0}))):e===Ao.MEDIA_CONTROLLER?(r&&((s=(i=fo(this,Sm))==null?void 0:i.unassociateElement)==null||s.call(i,this),_m(this,Sm,null)),n&&this.isConnected&&(_m(this,Sm,QO(this)),(c=(o=fo(this,Sm))==null?void 0:o.associateElement)==null||c.call(o,this))):e===fv.DISABLED&&n!==r?n==null?this.enable():this.disable():e===fv.STYLE&&n!==r&&tl(this,rC,xR).call(this)}formatMenuItemText(e,r){return this.constructor.formatMenuItemText(e,r)}get anchor(){return this.getAttribute("anchor")}set anchor(e){this.setAttribute("anchor",`${e}`)}get anchorElement(){var e;return this.anchor?(e=K5(this))==null?void 0:e.querySelector(`#${this.anchor}`):null}get items(){return this.defaultSlot.assignedElements({flatten:!0}).filter(HWe)}get radioGroupItems(){return this.items.filter(e=>e.role==="menuitemradio")}get checkedItems(){return this.items.filter(e=>e.checked)}get value(){var e,r;return(r=(e=this.checkedItems[0])==null?void 0:e.value)!=null?r:""}set value(e){const r=this.items.find(n=>n.value===e);r&&tl(this,nC,NR).call(this,r)}focus(){if(_m(this,ry,YF()),this.items.length){tl(this,AE,bN).call(this,this.items[0]),this.items[0].focus();return}const e=this.querySelector('[autofocus], [tabindex]:not([tabindex="-1"]), [role="menu"]');e?.focus()}handleSelect(e){var r;const n=tl(this,fE,xN).call(this,e);n&&(tl(this,nC,NR).call(this,n,n.type==="checkbox"),fo(this,F0)&&!this.hidden&&((r=fo(this,ry))==null||r.focus(),this.hidden=!0))}get keysUsed(){return["Enter","Escape","Tab"," ","ArrowDown","ArrowUp","Home","End"]}handleMove(e){var r,n;const{key:i}=e,s=this.items,o=(n=(r=tl(this,fE,xN).call(this,e))!=null?r:tl(this,jR,Boe).call(this))!=null?n:s[0],c=s.indexOf(o);let u=Math.max(0,c);i==="ArrowDown"?u++:i==="ArrowUp"?u--:e.key==="Home"?u=0:e.key==="End"&&(u=s.length-1),u<0&&(u=s.length-1),u>s.length-1&&(u=0),tl(this,AE,bN).call(this,s[u]),s[u].focus()}}Sm=new WeakMap;ry=new WeakMap;F0=new WeakMap;eC=new WeakMap;tC=new WeakMap;ny=new WeakMap;m2=new WeakMap;yR=new WeakSet;Eoe=function(t){const e=t.target;for(const r of e.assignedNodes({flatten:!0}))r.nodeType===3&&r.textContent.trim()===""&&r.remove();["header","title"].includes(e.name)&&tl(this,gN,BU).call(this),e.name||fo(this,vN).call(this)};gN=new WeakSet;BU=function(){const t=this.shadowRoot.querySelector('slot[name="header"]'),e=this.shadowRoot.querySelector('slot[name="title"]');t.hidden=e.assignedNodes().length===0&&t.assignedNodes().length===0};vN=new WeakMap;rC=new WeakSet;xR=function(){var t;const e=this.shadowRoot.querySelector("#layout-row"),r=(t=getComputedStyle(this).getPropertyValue("--media-menu-layout"))==null?void 0:t.trim();e.setAttribute("media",r==="row"?"":"width:0")};bR=new WeakSet;_oe=function(t){_m(this,F0,t.relatedTarget),Ag(this,t.relatedTarget)||(this.hidden=!this.hidden)};wR=new WeakSet;Soe=function(){var t;(t=fo(this,F0))==null||t.setAttribute("aria-expanded","true"),this.addEventListener("transitionend",()=>this.focus(),{once:!0}),Vb(g2(this),fo(this,Eb)),Vb(this,fo(this,_b))};ER=new WeakSet;Toe=function(){var t;(t=fo(this,F0))==null||t.setAttribute("aria-expanded","false"),zb(g2(this),fo(this,Eb)),zb(this,fo(this,_b))};Eb=new WeakMap;_b=new WeakMap;Sb=new WeakSet;p2=function(t){if(this.hasAttribute("mediacontroller")&&!this.anchor||this.hidden||!this.anchorElement)return;const{x:e,y:r}=OWe({anchor:this.anchorElement,floating:this,placement:"top-start"});t??(t=this.offsetWidth);const i=g2(this).getBoundingClientRect(),s=i.width-e-t,o=i.height-r-this.offsetHeight,{style:c}=fo(this,m2);c.setProperty("position","absolute"),c.setProperty("right",`${Math.max(0,s)}px`),c.setProperty("--_menu-bottom",`${o}px`);const u=getComputedStyle(this),d=c.getPropertyValue("--_menu-bottom")===u.bottom?o:parseFloat(u.bottom),f=i.height-d-parseFloat(u.marginBottom);this.style.setProperty("--_menu-max-height",`${f}px`)};yN=new WeakSet;PU=function(t){const e=this.querySelector('[role="menuitem"][aria-haspopup][aria-expanded="true"]'),r=e?.querySelector('[role="menu"]'),{style:n}=fo(this,m2);if(t||n.setProperty("--media-menu-transition-in","none"),r){const i=r.offsetHeight,s=Math.max(r.offsetWidth,e.offsetWidth);this.style.setProperty("min-width",`${s}px`),this.style.setProperty("min-height",`${i}px`),tl(this,Sb,p2).call(this,s)}else this.style.removeProperty("min-width"),this.style.removeProperty("min-height"),tl(this,Sb,p2).call(this);n.removeProperty("--media-menu-transition-in")};_R=new WeakSet;Coe=function(t){var e;if(t.stopPropagation(),t.composedPath().includes(fo(this,OU,joe))){(e=fo(this,ry))==null||e.focus(),this.hidden=!0;return}const r=tl(this,fE,xN).call(this,t);!r||r.hasAttribute("disabled")||(tl(this,AE,bN).call(this,r),this.handleSelect(t))};OU=new WeakSet;joe=function(){var t;return(t=this.shadowRoot.querySelector('slot[name="header"]').assignedElements({flatten:!0}))==null?void 0:t.find(r=>r.matches('button[part~="back"]'))};SR=new WeakSet;Noe=function(t){if(t.target===this)return;tl(this,RU,koe).call(this);const e=Array.from(this.querySelectorAll('[role="menuitem"][aria-haspopup]'));for(const r of e)r.invokeTargetElement!=t.target&&t.newState=="open"&&r.getAttribute("aria-expanded")=="true"&&!r.invokeTargetElement.hidden&&r.invokeTargetElement.dispatchEvent(new IU({relatedTarget:r}));for(const r of e)r.setAttribute("aria-expanded",`${!r.submenuElement.hidden}`);tl(this,yN,PU).call(this,!0)};RU=new WeakSet;koe=function(){const e=this.querySelector('[role="menuitem"] > [role="menu"]:not([hidden])');this.container.classList.toggle("has-expanded",!!e)};TR=new WeakSet;Ioe=function(t){var e;Ag(this,t.relatedTarget)||(fo(this,ny)&&((e=fo(this,ry))==null||e.focus()),fo(this,F0)&&fo(this,F0)!==t.relatedTarget&&!this.hidden&&(this.hidden=!0))};CR=new WeakSet;Loe=function(t){var e,r,n,i,s;const{key:o,ctrlKey:c,altKey:u,metaKey:l}=t;if(!(c||u||l)&&this.keysUsed.includes(o))if(t.preventDefault(),t.stopPropagation(),o==="Tab"){if(fo(this,ny)){this.hidden=!0;return}t.shiftKey?(r=(e=this.previousElementSibling)==null?void 0:e.focus)==null||r.call(e):(i=(n=this.nextElementSibling)==null?void 0:n.focus)==null||i.call(n),this.blur()}else o==="Escape"?((s=fo(this,ry))==null||s.focus(),fo(this,ny)&&(this.hidden=!0)):o==="Enter"||o===" "?this.handleSelect(t):this.handleMove(t)};fE=new WeakSet;xN=function(t){return t.composedPath().find(e=>["menuitemradio","menuitemcheckbox"].includes(e.role))};jR=new WeakSet;Boe=function(){return this.items.find(t=>t.tabIndex===0)};AE=new WeakSet;bN=function(t){for(const e of this.items)e.tabIndex=e===t?0:-1};nC=new WeakSet;NR=function(t,e){const r=[...this.checkedItems];t.type==="radio"&&this.radioGroupItems.forEach(n=>n.checked=!1),e?t.checked=!t.checked:t.checked=!0,this.checkedItems.some((n,i)=>n!=r[i])&&this.dispatchEvent(new Event("change",{bubbles:!0,composed:!0}))};sA.shadowRootOptions={mode:"open"};sA.getTemplateHTML=$We;function HWe(t){return["menuitem","menuitemradio","menuitemcheckbox"].includes(t?.role)}function g2(t){var e;return(e=t.getAttribute("bounds")?y1(t,`#${t.getAttribute("bounds")}`):Hh(t)||t.parentElement)!=null?e:t}rr.customElements.get("media-chrome-menu")||rr.customElements.define("media-chrome-menu",sA);var DU=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},Mm=(t,e,r)=>(DU(t,e,"read from private field"),r?r.call(t):e.get(t)),Sp=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Z4=(t,e,r,n)=>(DU(t,e,"write to private field"),e.set(t,r),r),kA=(t,e,r)=>(DU(t,e,"access private method"),r),iC,mE,kR,Poe,wN,MU,FU,Ooe,Fm,Wb,v2,IR,Roe,sC,LR;function QWe(t){return`
    <style>
      :host {
        transition: var(--media-menu-item-transition,
          background .15s linear,
          opacity .2s ease-in-out
        );
        outline: var(--media-menu-item-outline, 0);
        outline-offset: var(--media-menu-item-outline-offset, -1px);
        cursor: var(--media-cursor, pointer);
        display: flex;
        align-items: center;
        align-self: stretch;
        justify-self: stretch;
        white-space: nowrap;
        white-space-collapse: collapse;
        text-wrap: nowrap;
        padding: .4em .8em .4em 1em;
      }

      :host(:focus-visible) {
        box-shadow: var(--media-menu-item-focus-shadow, inset 0 0 0 2px rgb(27 127 204 / .9));
        outline: var(--media-menu-item-hover-outline, 0);
        outline-offset: var(--media-menu-item-hover-outline-offset,  var(--media-menu-item-outline-offset, -1px));
      }

      :host(:hover) {
        cursor: var(--media-cursor, pointer);
        background: var(--media-menu-item-hover-background, rgb(92 92 102 / .5));
        outline: var(--media-menu-item-hover-outline);
        outline-offset: var(--media-menu-item-hover-outline-offset,  var(--media-menu-item-outline-offset, -1px));
      }

      :host([aria-checked="true"]) {
        background: var(--media-menu-item-checked-background);
      }

      :host([hidden]) {
        display: none;
      }

      :host([disabled]) {
        pointer-events: none;
        color: rgba(255, 255, 255, .3);
      }

      slot:not([name]) {
        width: 100%;
      }

      slot:not([name="submenu"]) {
        display: inline-flex;
        align-items: center;
        transition: inherit;
        opacity: var(--media-menu-item-opacity, 1);
      }

      slot[name="description"] {
        justify-content: end;
      }

      slot[name="description"] > span {
        display: inline-block;
        margin-inline: 1em .2em;
        max-width: var(--media-menu-item-description-max-width, 100px);
        text-overflow: ellipsis;
        overflow: hidden;
        font-size: .8em;
        font-weight: 400;
        text-align: right;
        position: relative;
        top: .04em;
      }

      slot[name="checked-indicator"] {
        display: none;
      }

      :host(:is([role="menuitemradio"],[role="menuitemcheckbox"])) slot[name="checked-indicator"] {
        display: var(--media-menu-item-checked-indicator-display, inline-block);
      }

      
      svg, img, ::slotted(svg), ::slotted(img) {
        height: var(--media-menu-item-icon-height, var(--media-control-height, 24px));
        fill: var(--media-icon-color, var(--media-primary-color, rgb(238 238 238)));
        display: block;
      }

      
      [part~="indicator"],
      ::slotted([part~="indicator"]) {
        fill: var(--media-menu-item-indicator-fill,
          var(--media-icon-color, var(--media-primary-color, rgb(238 238 238))));
        height: var(--media-menu-item-indicator-height, 1.25em);
        margin-right: .5ch;
      }

      [part~="checked-indicator"] {
        visibility: hidden;
      }

      :host([aria-checked="true"]) [part~="checked-indicator"] {
        visibility: visible;
      }
    </style>
    <slot name="checked-indicator">
      <svg aria-hidden="true" viewBox="0 1 24 24" part="checked-indicator indicator">
        <path d="m10 15.17 9.193-9.191 1.414 1.414-10.606 10.606-6.364-6.364 1.414-1.414 4.95 4.95Z"/>
      </svg>
    </slot>
    <slot name="prefix"></slot>
    <slot></slot>
    <slot name="description"></slot>
    <slot name="suffix">
      ${this.getSuffixSlotInnerHTML(t)}
    </slot>
    <slot name="submenu"></slot>
  `}function VWe(t){return""}const Mf={TYPE:"type",VALUE:"value",CHECKED:"checked",DISABLED:"disabled"};class K0 extends rr.HTMLElement{constructor(){if(super(),Sp(this,kR),Sp(this,wN),Sp(this,FU),Sp(this,Wb),Sp(this,IR),Sp(this,sC),Sp(this,iC,!1),Sp(this,mE,void 0),Sp(this,Fm,()=>{var e,r;this.submenuElement.items&&this.setAttribute("submenusize",`${this.submenuElement.items.length}`);const n=this.shadowRoot.querySelector('slot[name="description"]'),i=(e=this.submenuElement.checkedItems)==null?void 0:e[0],s=(r=i?.dataset.description)!=null?r:i?.text,o=vu.createElement("span");o.textContent=s??"",n.replaceChildren(o)}),!this.shadowRoot){this.attachShadow(this.constructor.shadowRootOptions);const e=Sf(this.attributes);this.shadowRoot.innerHTML=this.constructor.getTemplateHTML(e)}this.shadowRoot.addEventListener("slotchange",this)}static get observedAttributes(){return[Mf.TYPE,Mf.DISABLED,Mf.CHECKED,Mf.VALUE]}enable(){this.hasAttribute("tabindex")||this.setAttribute("tabindex","-1"),cw(this)&&!this.hasAttribute("aria-checked")&&this.setAttribute("aria-checked","false"),this.addEventListener("click",this),this.addEventListener("keydown",this)}disable(){this.removeAttribute("tabindex"),this.removeEventListener("click",this),this.removeEventListener("keydown",this),this.removeEventListener("keyup",this)}handleEvent(e){switch(e.type){case"slotchange":kA(this,kR,Poe).call(this,e);break;case"click":this.handleClick(e);break;case"keydown":kA(this,IR,Roe).call(this,e);break;case"keyup":kA(this,Wb,v2).call(this,e);break}}attributeChangedCallback(e,r,n){e===Mf.CHECKED&&cw(this)&&!Mm(this,iC)?this.setAttribute("aria-checked",n!=null?"true":"false"):e===Mf.TYPE&&n!==r?this.role="menuitem"+n:e===Mf.DISABLED&&n!==r&&(n==null?this.enable():this.disable())}connectedCallback(){this.hasAttribute(Mf.DISABLED)||this.enable(),this.role="menuitem"+this.type,Z4(this,mE,BR(this,this.parentNode)),kA(this,sC,LR).call(this),this.submenuElement&&kA(this,wN,MU).call(this)}disconnectedCallback(){this.disable(),kA(this,sC,LR).call(this),Z4(this,mE,null)}get invokeTarget(){return this.getAttribute("invoketarget")}set invokeTarget(e){this.setAttribute("invoketarget",`${e}`)}get invokeTargetElement(){var e;return this.invokeTarget?(e=K5(this))==null?void 0:e.querySelector(`#${this.invokeTarget}`):this.submenuElement}get submenuElement(){return this.shadowRoot.querySelector('slot[name="submenu"]').assignedElements({flatten:!0})[0]}get type(){var e;return(e=this.getAttribute(Mf.TYPE))!=null?e:""}set type(e){this.setAttribute(Mf.TYPE,`${e}`)}get value(){var e;return(e=this.getAttribute(Mf.VALUE))!=null?e:this.text}set value(e){this.setAttribute(Mf.VALUE,e)}get text(){var e;return((e=this.textContent)!=null?e:"").trim()}get checked(){if(cw(this))return this.getAttribute("aria-checked")==="true"}set checked(e){cw(this)&&(Z4(this,iC,!0),this.setAttribute("aria-checked",e?"true":"false"),e?this.part.add("checked"):this.part.remove("checked"))}handleClick(e){cw(this)||this.invokeTargetElement&&Ag(this,e.target)&&this.invokeTargetElement.dispatchEvent(new IU({relatedTarget:this}))}get keysUsed(){return["Enter"," "]}}iC=new WeakMap;mE=new WeakMap;kR=new WeakSet;Poe=function(t){const e=t.target;if(!e?.name)for(const n of e.assignedNodes({flatten:!0}))n instanceof Text&&n.textContent.trim()===""&&n.remove();e.name==="submenu"&&(this.submenuElement?kA(this,wN,MU).call(this):kA(this,FU,Ooe).call(this))};wN=new WeakSet;MU=async function(){this.setAttribute("aria-haspopup","menu"),this.setAttribute("aria-expanded",`${!this.submenuElement.hidden}`),this.submenuElement.addEventListener("change",Mm(this,Fm)),this.submenuElement.addEventListener("addmenuitem",Mm(this,Fm)),this.submenuElement.addEventListener("removemenuitem",Mm(this,Fm)),Mm(this,Fm).call(this)};FU=new WeakSet;Ooe=function(){this.removeAttribute("aria-haspopup"),this.removeAttribute("aria-expanded"),this.submenuElement.removeEventListener("change",Mm(this,Fm)),this.submenuElement.removeEventListener("addmenuitem",Mm(this,Fm)),this.submenuElement.removeEventListener("removemenuitem",Mm(this,Fm)),Mm(this,Fm).call(this)};Fm=new WeakMap;Wb=new WeakSet;v2=function(t){const{key:e}=t;if(!this.keysUsed.includes(e)){this.removeEventListener("keyup",kA(this,Wb,v2));return}this.handleClick(t)};IR=new WeakSet;Roe=function(t){const{metaKey:e,altKey:r,key:n}=t;if(e||r||!this.keysUsed.includes(n)){this.removeEventListener("keyup",kA(this,Wb,v2));return}this.addEventListener("keyup",kA(this,Wb,v2),{once:!0})};sC=new WeakSet;LR=function(){var t;const e=(t=Mm(this,mE))==null?void 0:t.radioGroupItems;if(!e)return;let r=e.filter(n=>n.getAttribute("aria-checked")==="true").pop();r||(r=e[0]);for(const n of e)n.setAttribute("aria-checked","false");r?.setAttribute("aria-checked","true")};K0.shadowRootOptions={mode:"open"};K0.getTemplateHTML=QWe;K0.getSuffixSlotInnerHTML=VWe;function cw(t){return t.type==="radio"||t.type==="checkbox"}function BR(t,e){if(!t)return null;const{host:r}=t.getRootNode();return!e&&r?BR(t,r):e?.items?e:BR(e,e?.parentNode)}rr.customElements.get("media-chrome-menu-item")||rr.customElements.define("media-chrome-menu-item",K0);function zWe(t){return`
    ${sA.getTemplateHTML(t)}
    <style>
      :host {
        --_menu-bg: rgb(20 20 30 / .8);
        background: var(--media-settings-menu-background,
            var(--media-menu-background,
              var(--media-control-background,
                var(--media-secondary-color, var(--_menu-bg)))));
        min-width: var(--media-settings-menu-min-width, 170px);
        border-radius: 2px 2px 0 0;
        overflow: hidden;
      }

      @-moz-document url-prefix() {
        :host{
          --_menu-bg: rgb(20 20 30);
        }
      }

      :host([role="menu"]) {
        
        justify-content: end;
      }

      slot:not([name]) {
        justify-content: var(--media-settings-menu-justify-content);
        flex-direction: var(--media-settings-menu-flex-direction, column);
        overflow: visible;
      }

      #container.has-expanded {
        --media-settings-menu-item-opacity: 0;
      }
    </style>
  `}class Doe extends sA{get anchorElement(){return this.anchor!=="auto"?super.anchorElement:Hh(this).querySelector("media-settings-menu-button")}}Doe.getTemplateHTML=zWe;rr.customElements.get("media-settings-menu")||rr.customElements.define("media-settings-menu",Doe);function KWe(t){return`
    ${K0.getTemplateHTML.call(this,t)}
    <style>
      slot:not([name="submenu"]) {
        opacity: var(--media-settings-menu-item-opacity, var(--media-menu-item-opacity));
      }

      :host([aria-expanded="true"]:hover) {
        background: transparent;
      }
    </style>
  `}function GWe(t){return`
    <svg aria-hidden="true" viewBox="0 0 20 24">
      <path d="m8.12 17.585-.742-.669 4.2-4.665-4.2-4.666.743-.669 4.803 5.335-4.803 5.334Z"/>
    </svg>
  `}class sk extends K0{}sk.shadowRootOptions={mode:"open"};sk.getTemplateHTML=KWe;sk.getSuffixSlotInnerHTML=GWe;rr.customElements.get("media-settings-menu-item")||rr.customElements.define("media-settings-menu-item",sk);class E1 extends vd{connectedCallback(){super.connectedCallback(),this.invokeTargetElement&&this.setAttribute("aria-haspopup","menu")}get invokeTarget(){return this.getAttribute("invoketarget")}set invokeTarget(e){this.setAttribute("invoketarget",`${e}`)}get invokeTargetElement(){var e;return this.invokeTarget?(e=K5(this))==null?void 0:e.querySelector(`#${this.invokeTarget}`):null}handleClick(){var e;(e=this.invokeTargetElement)==null||e.dispatchEvent(new IU({relatedTarget:this}))}}rr.customElements.get("media-chrome-menu-button")||rr.customElements.define("media-chrome-menu-button",E1);function WWe(){return`
    <style>
      :host([aria-expanded="true"]) slot[name=tooltip] {
        display: none;
      }
    </style>
    <slot name="icon">
      <svg aria-hidden="true" viewBox="0 0 24 24">
        <path d="M4.5 14.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Zm7.5 0a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Zm7.5 0a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Z"/>
      </svg>
    </slot>
  `}function YWe(){return mi("Settings")}class UU extends E1{static get observedAttributes(){return[...super.observedAttributes,"target"]}connectedCallback(){super.connectedCallback(),this.setAttribute("aria-label",mi("settings"))}get invokeTargetElement(){return this.invokeTarget!=null?super.invokeTargetElement:Hh(this).querySelector("media-settings-menu")}}UU.getSlotTemplateHTML=WWe;UU.getTooltipContentHTML=YWe;rr.customElements.get("media-settings-menu-button")||rr.customElements.define("media-settings-menu-button",UU);var $U=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},Moe=(t,e,r)=>($U(t,e,"read from private field"),r?r.call(t):e.get(t)),US=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},PR=(t,e,r,n)=>($U(t,e,"write to private field"),e.set(t,r),r),$S=(t,e,r)=>($U(t,e,"access private method"),r),Mw,EN,aC,OR,oC,RR;class qWe extends sA{constructor(){super(...arguments),US(this,aC),US(this,oC),US(this,Mw,[]),US(this,EN,void 0)}static get observedAttributes(){return[...super.observedAttributes,At.MEDIA_AUDIO_TRACK_LIST,At.MEDIA_AUDIO_TRACK_ENABLED,At.MEDIA_AUDIO_TRACK_UNAVAILABLE]}attributeChangedCallback(e,r,n){super.attributeChangedCallback(e,r,n),e===At.MEDIA_AUDIO_TRACK_ENABLED&&r!==n?this.value=n:e===At.MEDIA_AUDIO_TRACK_LIST&&r!==n&&(PR(this,Mw,Lze(n??"")),$S(this,aC,OR).call(this))}connectedCallback(){super.connectedCallback(),this.addEventListener("change",$S(this,oC,RR))}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("change",$S(this,oC,RR))}get anchorElement(){var e;return this.anchor!=="auto"?super.anchorElement:(e=Hh(this))==null?void 0:e.querySelector("media-audio-track-menu-button")}get mediaAudioTrackList(){return Moe(this,Mw)}set mediaAudioTrackList(e){PR(this,Mw,e),$S(this,aC,OR).call(this)}get mediaAudioTrackEnabled(){var e;return(e=Cl(this,At.MEDIA_AUDIO_TRACK_ENABLED))!=null?e:""}set mediaAudioTrackEnabled(e){jl(this,At.MEDIA_AUDIO_TRACK_ENABLED,e)}}Mw=new WeakMap;EN=new WeakMap;aC=new WeakSet;OR=function(){if(Moe(this,EN)===JSON.stringify(this.mediaAudioTrackList))return;PR(this,EN,JSON.stringify(this.mediaAudioTrackList));const t=this.mediaAudioTrackList;this.defaultSlot.textContent="",t.sort((e,r)=>e.id.localeCompare(r.id,void 0,{numeric:!0}));for(const e of t){const r=this.formatMenuItemText(e.label,e),n=Gb({type:"radio",text:r,value:`${e.id}`,checked:e.enabled});n.prepend(iy(this,"checked-indicator")),this.defaultSlot.append(n)}};oC=new WeakSet;RR=function(){if(this.value==null)return;const t=new rr.CustomEvent(zn.MEDIA_AUDIO_TRACK_REQUEST,{composed:!0,bubbles:!0,detail:this.value});this.dispatchEvent(t)};rr.customElements.get("media-audio-track-menu")||rr.customElements.define("media-audio-track-menu",qWe);const XWe=`<svg aria-hidden="true" viewBox="0 0 24 24">
  <path d="M11 17H9.5V7H11v10Zm-3-3H6.5v-4H8v4Zm6-5h-1.5v6H14V9Zm3 7h-1.5V8H17v8Z"/>
  <path d="M22 12c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2s10 4.477 10 10Zm-2 0a8 8 0 1 0-16 0 8 8 0 0 0 16 0Z"/>
</svg>`;function ZWe(){return`
    <style>
      :host([aria-expanded="true"]) slot[name=tooltip] {
        display: none;
      }
    </style>
    <slot name="icon">${XWe}</slot>
  `}function JWe(){return mi("Audio")}const _W=t=>{const e=mi("Audio");t.setAttribute("aria-label",e)};class HU extends E1{static get observedAttributes(){return[...super.observedAttributes,At.MEDIA_AUDIO_TRACK_ENABLED,At.MEDIA_AUDIO_TRACK_UNAVAILABLE]}connectedCallback(){super.connectedCallback(),_W(this)}attributeChangedCallback(e,r,n){super.attributeChangedCallback(e,r,n),e===At.MEDIA_LANG&&_W(this)}get invokeTargetElement(){var e;return this.invokeTarget!=null?super.invokeTargetElement:(e=Hh(this))==null?void 0:e.querySelector("media-audio-track-menu")}get mediaAudioTrackEnabled(){var e;return(e=Cl(this,At.MEDIA_AUDIO_TRACK_ENABLED))!=null?e:""}set mediaAudioTrackEnabled(e){jl(this,At.MEDIA_AUDIO_TRACK_ENABLED,e)}}HU.getSlotTemplateHTML=ZWe;HU.getTooltipContentHTML=JWe;rr.customElements.get("media-audio-track-menu-button")||rr.customElements.define("media-audio-track-menu-button",HU);var QU=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},eYe=(t,e,r)=>(QU(t,e,"read from private field"),e.get(t)),J4=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},tYe=(t,e,r,n)=>(QU(t,e,"write to private field"),e.set(t,r),r),HS=(t,e,r)=>(QU(t,e,"access private method"),r),_N,lC,DR,cC,MR;const rYe=`
  <svg aria-hidden="true" viewBox="0 0 26 24" part="captions-indicator indicator">
    <path d="M22.83 5.68a2.58 2.58 0 0 0-2.3-2.5c-3.62-.24-11.44-.24-15.06 0a2.58 2.58 0 0 0-2.3 2.5c-.23 4.21-.23 8.43 0 12.64a2.58 2.58 0 0 0 2.3 2.5c3.62.24 11.44.24 15.06 0a2.58 2.58 0 0 0 2.3-2.5c.23-4.21.23-8.43 0-12.64Zm-11.39 9.45a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.92 3.92 0 0 1 .92-2.77 3.18 3.18 0 0 1 2.43-1 2.94 2.94 0 0 1 2.13.78c.364.359.62.813.74 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.17 1.61 1.61 0 0 0-1.29.58 2.79 2.79 0 0 0-.5 1.89 3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.48 1.48 0 0 0 1-.37 2.1 2.1 0 0 0 .59-1.14l1.4.44a3.23 3.23 0 0 1-1.07 1.69Zm7.22 0a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.88 3.88 0 0 1 .93-2.77 3.14 3.14 0 0 1 2.42-1 3 3 0 0 1 2.16.82 2.8 2.8 0 0 1 .73 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.21 1.61 1.61 0 0 0-1.29.58A2.79 2.79 0 0 0 15 12a3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.44 1.44 0 0 0 1-.37 2.1 2.1 0 0 0 .6-1.15l1.4.44a3.17 3.17 0 0 1-1.1 1.7Z"/>
  </svg>`;function nYe(t){return`
    ${sA.getTemplateHTML(t)}
    <slot name="captions-indicator" hidden>${rYe}</slot>
  `}class Foe extends sA{constructor(){super(...arguments),J4(this,lC),J4(this,cC),J4(this,_N,void 0)}static get observedAttributes(){return[...super.observedAttributes,At.MEDIA_SUBTITLES_LIST,At.MEDIA_SUBTITLES_SHOWING]}attributeChangedCallback(e,r,n){super.attributeChangedCallback(e,r,n),e===At.MEDIA_SUBTITLES_LIST&&r!==n?HS(this,lC,DR).call(this):e===At.MEDIA_SUBTITLES_SHOWING&&r!==n&&(this.value=n||"",HS(this,lC,DR).call(this))}connectedCallback(){super.connectedCallback(),this.addEventListener("change",HS(this,cC,MR))}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("change",HS(this,cC,MR))}get anchorElement(){return this.anchor!=="auto"?super.anchorElement:Hh(this).querySelector("media-captions-menu-button")}get mediaSubtitlesList(){return SW(this,At.MEDIA_SUBTITLES_LIST)}set mediaSubtitlesList(e){TW(this,At.MEDIA_SUBTITLES_LIST,e)}get mediaSubtitlesShowing(){return SW(this,At.MEDIA_SUBTITLES_SHOWING)}set mediaSubtitlesShowing(e){TW(this,At.MEDIA_SUBTITLES_SHOWING,e)}}_N=new WeakMap;lC=new WeakSet;DR=function(){var t;const e=eYe(this,_N)!==JSON.stringify(this.mediaSubtitlesList),r=this.value!==this.getAttribute(At.MEDIA_SUBTITLES_SHOWING);if(!e&&!r)return;tYe(this,_N,JSON.stringify(this.mediaSubtitlesList)),this.defaultSlot.textContent="";const n=!this.value,i=Gb({type:"radio",text:this.formatMenuItemText(mi("Off")),value:"off",checked:n});i.prepend(iy(this,"checked-indicator")),this.defaultSlot.append(i);const s=this.mediaSubtitlesList;for(const o of s){const c=Gb({type:"radio",text:this.formatMenuItemText(o.label,o),value:GO(o),checked:this.value==GO(o)});c.prepend(iy(this,"checked-indicator")),((t=o.kind)!=null?t:"subs")==="captions"&&c.append(iy(this,"captions-indicator")),this.defaultSlot.append(c)}};cC=new WeakSet;MR=function(){const t=this.mediaSubtitlesShowing,e=this.getAttribute(At.MEDIA_SUBTITLES_SHOWING),r=this.value!==e;if(t?.length&&r&&this.dispatchEvent(new rr.CustomEvent(zn.MEDIA_DISABLE_SUBTITLES_REQUEST,{composed:!0,bubbles:!0,detail:t})),!this.value||!r)return;const n=new rr.CustomEvent(zn.MEDIA_SHOW_SUBTITLES_REQUEST,{composed:!0,bubbles:!0,detail:this.value});this.dispatchEvent(n)};Foe.getTemplateHTML=nYe;const SW=(t,e)=>{const r=t.getAttribute(e);return r?X5(r):[]},TW=(t,e,r)=>{if(!r?.length){t.removeAttribute(e);return}const n=u2(r);t.getAttribute(e)!==n&&t.setAttribute(e,n)};rr.customElements.get("media-captions-menu")||rr.customElements.define("media-captions-menu",Foe);const iYe=`<svg aria-hidden="true" viewBox="0 0 26 24">
  <path d="M22.83 5.68a2.58 2.58 0 0 0-2.3-2.5c-3.62-.24-11.44-.24-15.06 0a2.58 2.58 0 0 0-2.3 2.5c-.23 4.21-.23 8.43 0 12.64a2.58 2.58 0 0 0 2.3 2.5c3.62.24 11.44.24 15.06 0a2.58 2.58 0 0 0 2.3-2.5c.23-4.21.23-8.43 0-12.64Zm-11.39 9.45a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.92 3.92 0 0 1 .92-2.77 3.18 3.18 0 0 1 2.43-1 2.94 2.94 0 0 1 2.13.78c.364.359.62.813.74 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.17 1.61 1.61 0 0 0-1.29.58 2.79 2.79 0 0 0-.5 1.89 3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.48 1.48 0 0 0 1-.37 2.1 2.1 0 0 0 .59-1.14l1.4.44a3.23 3.23 0 0 1-1.07 1.69Zm7.22 0a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.88 3.88 0 0 1 .93-2.77 3.14 3.14 0 0 1 2.42-1 3 3 0 0 1 2.16.82 2.8 2.8 0 0 1 .73 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.21 1.61 1.61 0 0 0-1.29.58A2.79 2.79 0 0 0 15 12a3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.44 1.44 0 0 0 1-.37 2.1 2.1 0 0 0 .6-1.15l1.4.44a3.17 3.17 0 0 1-1.1 1.7Z"/>
</svg>`,sYe=`<svg aria-hidden="true" viewBox="0 0 26 24">
  <path d="M17.73 14.09a1.4 1.4 0 0 1-1 .37 1.579 1.579 0 0 1-1.27-.58A3 3 0 0 1 15 12a2.8 2.8 0 0 1 .5-1.85 1.63 1.63 0 0 1 1.29-.57 1.47 1.47 0 0 1 1.51 1.2l1.43-.34A2.89 2.89 0 0 0 19 9.07a3 3 0 0 0-2.14-.78 3.14 3.14 0 0 0-2.42 1 3.91 3.91 0 0 0-.93 2.78 3.74 3.74 0 0 0 .92 2.66 3.07 3.07 0 0 0 2.34 1 3.07 3.07 0 0 0 1.91-.57 3.17 3.17 0 0 0 1.07-1.74l-1.4-.45c-.083.43-.3.822-.62 1.12Zm-7.22 0a1.43 1.43 0 0 1-1 .37 1.58 1.58 0 0 1-1.27-.58A3 3 0 0 1 7.76 12a2.8 2.8 0 0 1 .5-1.85 1.63 1.63 0 0 1 1.29-.57 1.47 1.47 0 0 1 1.51 1.2l1.43-.34a2.81 2.81 0 0 0-.74-1.32 2.94 2.94 0 0 0-2.13-.78 3.18 3.18 0 0 0-2.43 1 4 4 0 0 0-.92 2.78 3.74 3.74 0 0 0 .92 2.66 3.07 3.07 0 0 0 2.34 1 3.07 3.07 0 0 0 1.91-.57 3.23 3.23 0 0 0 1.07-1.74l-1.4-.45a2.06 2.06 0 0 1-.6 1.07Zm12.32-8.41a2.59 2.59 0 0 0-2.3-2.51C18.72 3.05 15.86 3 13 3c-2.86 0-5.72.05-7.53.17a2.59 2.59 0 0 0-2.3 2.51c-.23 4.207-.23 8.423 0 12.63a2.57 2.57 0 0 0 2.3 2.5c1.81.13 4.67.19 7.53.19 2.86 0 5.72-.06 7.53-.19a2.57 2.57 0 0 0 2.3-2.5c.23-4.207.23-8.423 0-12.63Zm-1.49 12.53a1.11 1.11 0 0 1-.91 1.11c-1.67.11-4.45.18-7.43.18-2.98 0-5.76-.07-7.43-.18a1.11 1.11 0 0 1-.91-1.11c-.21-4.14-.21-8.29 0-12.43a1.11 1.11 0 0 1 .91-1.11C7.24 4.56 10 4.49 13 4.49s5.76.07 7.43.18a1.11 1.11 0 0 1 .91 1.11c.21 4.14.21 8.29 0 12.43Z"/>
</svg>`;function aYe(){return`
    <style>
      :host([data-captions-enabled="true"]) slot[name=off] {
        display: none !important;
      }

      
      :host(:not([data-captions-enabled="true"])) slot[name=on] {
        display: none !important;
      }

      :host([aria-expanded="true"]) slot[name=tooltip] {
        display: none;
      }
    </style>

    <slot name="icon">
      <slot name="on">${iYe}</slot>
      <slot name="off">${sYe}</slot>
    </slot>
  `}function oYe(){return mi("Captions")}const CW=t=>{t.setAttribute("data-captions-enabled",Eae(t).toString())},jW=t=>{t.setAttribute("aria-label",mi("closed captions"))};class VU extends E1{static get observedAttributes(){return[...super.observedAttributes,At.MEDIA_SUBTITLES_LIST,At.MEDIA_SUBTITLES_SHOWING,At.MEDIA_LANG]}connectedCallback(){super.connectedCallback(),jW(this),CW(this)}attributeChangedCallback(e,r,n){super.attributeChangedCallback(e,r,n),e===At.MEDIA_SUBTITLES_SHOWING?CW(this):e===At.MEDIA_LANG&&jW(this)}get invokeTargetElement(){var e;return this.invokeTarget!=null?super.invokeTargetElement:(e=Hh(this))==null?void 0:e.querySelector("media-captions-menu")}get mediaSubtitlesList(){return NW(this,At.MEDIA_SUBTITLES_LIST)}set mediaSubtitlesList(e){kW(this,At.MEDIA_SUBTITLES_LIST,e)}get mediaSubtitlesShowing(){return NW(this,At.MEDIA_SUBTITLES_SHOWING)}set mediaSubtitlesShowing(e){kW(this,At.MEDIA_SUBTITLES_SHOWING,e)}}VU.getSlotTemplateHTML=aYe;VU.getTooltipContentHTML=oYe;const NW=(t,e)=>{const r=t.getAttribute(e);return r?X5(r):[]},kW=(t,e,r)=>{if(!r?.length){t.removeAttribute(e);return}const n=u2(r);t.getAttribute(e)!==n&&t.setAttribute(e,n)};rr.customElements.get("media-captions-menu-button")||rr.customElements.define("media-captions-menu-button",VU);var Uoe=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},Hx=(t,e,r)=>(Uoe(t,e,"read from private field"),r?r.call(t):e.get(t)),eB=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},mx=(t,e,r)=>(Uoe(t,e,"access private method"),r),h0,Qx,Fw,uC,FR;const tB={RATES:"rates"};class lYe extends sA{constructor(){super(),eB(this,Qx),eB(this,uC),eB(this,h0,new JF(this,tB.RATES,{defaultValue:roe})),mx(this,Qx,Fw).call(this)}static get observedAttributes(){return[...super.observedAttributes,At.MEDIA_PLAYBACK_RATE,tB.RATES]}attributeChangedCallback(e,r,n){super.attributeChangedCallback(e,r,n),e===At.MEDIA_PLAYBACK_RATE&&r!=n?(this.value=n,mx(this,Qx,Fw).call(this)):e===tB.RATES&&r!=n&&(Hx(this,h0).value=n,mx(this,Qx,Fw).call(this))}connectedCallback(){super.connectedCallback(),this.addEventListener("change",mx(this,uC,FR))}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("change",mx(this,uC,FR))}get anchorElement(){return this.anchor!=="auto"?super.anchorElement:Hh(this).querySelector("media-playback-rate-menu-button")}get rates(){return Hx(this,h0)}set rates(e){e?Array.isArray(e)?Hx(this,h0).value=e.join(" "):typeof e=="string"&&(Hx(this,h0).value=e):Hx(this,h0).value="",mx(this,Qx,Fw).call(this)}get mediaPlaybackRate(){return Tl(this,At.MEDIA_PLAYBACK_RATE,sb)}set mediaPlaybackRate(e){Mc(this,At.MEDIA_PLAYBACK_RATE,e)}}h0=new WeakMap;Qx=new WeakSet;Fw=function(){this.defaultSlot.textContent="";const t=this.mediaPlaybackRate,e=new Set(Array.from(Hx(this,h0)).map(n=>Number(n)));t>0&&!e.has(t)&&e.add(t);const r=Array.from(e).sort((n,i)=>n-i);for(const n of r){const i=Gb({type:"radio",text:this.formatMenuItemText(`${n}x`,n),value:n.toString(),checked:t===n});i.prepend(iy(this,"checked-indicator")),this.defaultSlot.append(i)}};uC=new WeakSet;FR=function(){if(!this.value)return;const t=new rr.CustomEvent(zn.MEDIA_PLAYBACK_RATE_REQUEST,{composed:!0,bubbles:!0,detail:this.value});this.dispatchEvent(t)};rr.customElements.get("media-playback-rate-menu")||rr.customElements.define("media-playback-rate-menu",lYe);const dC=1;function cYe(t){return`
    <style>
      :host {
        min-width: 5ch;
        padding: var(--media-button-padding, var(--media-control-padding, 10px 5px));
      }
      
      :host([aria-expanded="true"]) slot {
        display: block;
      }

      :host([aria-expanded="true"]) slot[name=tooltip] {
        display: none;
      }
    </style>
    <slot name="icon">${t.mediaplaybackrate||dC}x</slot>
  `}function uYe(){return mi("Playback rate")}class zU extends E1{static get observedAttributes(){return[...super.observedAttributes,At.MEDIA_PLAYBACK_RATE]}constructor(){var e;super(),this.container=this.shadowRoot.querySelector('slot[name="icon"]'),this.container.innerHTML=`${(e=this.mediaPlaybackRate)!=null?e:dC}x`}attributeChangedCallback(e,r,n){if(super.attributeChangedCallback(e,r,n),e===At.MEDIA_PLAYBACK_RATE){const i=n?+n:Number.NaN,s=Number.isNaN(i)?dC:i;this.container.innerHTML=`${s}x`,this.setAttribute("aria-label",mi("Playback rate {playbackRate}",{playbackRate:s}))}}get invokeTargetElement(){return this.invokeTarget!=null?super.invokeTargetElement:Hh(this).querySelector("media-playback-rate-menu")}get mediaPlaybackRate(){return Tl(this,At.MEDIA_PLAYBACK_RATE,dC)}set mediaPlaybackRate(e){Mc(this,At.MEDIA_PLAYBACK_RATE,e)}}zU.getSlotTemplateHTML=cYe;zU.getTooltipContentHTML=uYe;rr.customElements.get("media-playback-rate-menu-button")||rr.customElements.define("media-playback-rate-menu-button",zU);var KU=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},Uw=(t,e,r)=>(KU(t,e,"read from private field"),r?r.call(t):e.get(t)),QS=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},IW=(t,e,r,n)=>(KU(t,e,"write to private field"),e.set(t,r),r),px=(t,e,r)=>(KU(t,e,"access private method"),r),$w,ab,Vx,Hw,hC,UR;class dYe extends sA{constructor(){super(...arguments),QS(this,Vx),QS(this,hC),QS(this,$w,[]),QS(this,ab,{})}static get observedAttributes(){return[...super.observedAttributes,At.MEDIA_RENDITION_LIST,At.MEDIA_RENDITION_SELECTED,At.MEDIA_RENDITION_UNAVAILABLE,At.MEDIA_HEIGHT]}static formatMenuItemText(e,r){return super.formatMenuItemText(e,r)}static formatRendition(e,{showBitrate:r=!1}={}){const n=`${Math.min(e.width,e.height)}p`;if(r&&e.bitrate){const i=e.bitrate/1e6,s=`${i.toFixed(i<1?1:0)} Mbps`;return`${n} (${s})`}return this.formatMenuItemText(n,e)}static compareRendition(e,r){var n,i;return r.height===e.height?((n=r.bitrate)!=null?n:0)-((i=e.bitrate)!=null?i:0):r.height-e.height}attributeChangedCallback(e,r,n){super.attributeChangedCallback(e,r,n),e===At.MEDIA_RENDITION_SELECTED&&r!==n?(this.value=n??"auto",px(this,Vx,Hw).call(this)):e===At.MEDIA_RENDITION_LIST&&r!==n?(IW(this,$w,jze(n)),px(this,Vx,Hw).call(this)):e===At.MEDIA_HEIGHT&&r!==n&&px(this,Vx,Hw).call(this)}connectedCallback(){super.connectedCallback(),this.addEventListener("change",px(this,hC,UR))}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("change",px(this,hC,UR))}get anchorElement(){return this.anchor!=="auto"?super.anchorElement:Hh(this).querySelector("media-rendition-menu-button")}get mediaRenditionList(){return Uw(this,$w)}set mediaRenditionList(e){IW(this,$w,e),px(this,Vx,Hw).call(this)}get mediaRenditionSelected(){return Cl(this,At.MEDIA_RENDITION_SELECTED)}set mediaRenditionSelected(e){jl(this,At.MEDIA_RENDITION_SELECTED,e)}get mediaHeight(){return Tl(this,At.MEDIA_HEIGHT)}set mediaHeight(e){Mc(this,At.MEDIA_HEIGHT,e)}compareRendition(e,r){return this.constructor.compareRendition(e,r)}formatMenuItemText(e,r){return this.constructor.formatMenuItemText(e,r)}formatRendition(e,r){return this.constructor.formatRendition(e,r)}showRenditionBitrate(e){return this.mediaRenditionList.some(r=>r!==e&&r.height===e.height&&r.bitrate!==e.bitrate)}}$w=new WeakMap;ab=new WeakMap;Vx=new WeakSet;Hw=function(){if(Uw(this,ab).mediaRenditionList===JSON.stringify(this.mediaRenditionList)&&Uw(this,ab).mediaHeight===this.mediaHeight)return;Uw(this,ab).mediaRenditionList=JSON.stringify(this.mediaRenditionList),Uw(this,ab).mediaHeight=this.mediaHeight;const t=this.mediaRenditionList.sort(this.compareRendition.bind(this)),e=t.find(o=>o.id===this.mediaRenditionSelected);for(const o of t)o.selected=o===e;this.defaultSlot.textContent="";const r=!this.mediaRenditionSelected;for(const o of t){const c=this.formatRendition(o,{showBitrate:this.showRenditionBitrate(o)}),u=Gb({type:"radio",text:c,value:`${o.id}`,checked:o.selected&&!r});u.prepend(iy(this,"checked-indicator")),this.defaultSlot.append(u)}const n=e&&this.showRenditionBitrate(e),i=r?e?this.formatMenuItemText(`${mi("Auto")}  ${this.formatRendition(e,{showBitrate:n})}`,e):this.formatMenuItemText(`${mi("Auto")} (${this.mediaHeight}p)`):this.formatMenuItemText(mi("Auto")),s=Gb({type:"radio",text:i,value:"auto",checked:r});s.dataset.description=i,s.prepend(iy(this,"checked-indicator")),this.defaultSlot.append(s)};hC=new WeakSet;UR=function(){if(this.value==null)return;const t=new rr.CustomEvent(zn.MEDIA_RENDITION_REQUEST,{composed:!0,bubbles:!0,detail:this.value});this.dispatchEvent(t)};rr.customElements.get("media-rendition-menu")||rr.customElements.define("media-rendition-menu",dYe);const hYe=`<svg aria-hidden="true" viewBox="0 0 24 24">
  <path d="M13.5 2.5h2v6h-2v-2h-11v-2h11v-2Zm4 2h4v2h-4v-2Zm-12 4h2v6h-2v-2h-3v-2h3v-2Zm4 2h12v2h-12v-2Zm1 4h2v6h-2v-2h-8v-2h8v-2Zm4 2h7v2h-7v-2Z" />
</svg>`;function fYe(){return`
    <style>
      :host([aria-expanded="true"]) slot[name=tooltip] {
        display: none;
      }
    </style>
    <slot name="icon">${hYe}</slot>
  `}function AYe(){return mi("Quality")}class GU extends E1{static get observedAttributes(){return[...super.observedAttributes,At.MEDIA_RENDITION_SELECTED,At.MEDIA_RENDITION_UNAVAILABLE,At.MEDIA_HEIGHT]}connectedCallback(){super.connectedCallback(),this.setAttribute("aria-label",mi("quality"))}get invokeTargetElement(){return this.invokeTarget!=null?super.invokeTargetElement:Hh(this).querySelector("media-rendition-menu")}get mediaRenditionSelected(){return Cl(this,At.MEDIA_RENDITION_SELECTED)}set mediaRenditionSelected(e){jl(this,At.MEDIA_RENDITION_SELECTED,e)}get mediaHeight(){return Tl(this,At.MEDIA_HEIGHT)}set mediaHeight(e){Mc(this,At.MEDIA_HEIGHT,e)}}GU.getSlotTemplateHTML=fYe;GU.getTooltipContentHTML=AYe;rr.customElements.get("media-rendition-menu-button")||rr.customElements.define("media-rendition-menu-button",GU);var WU=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},Cm=(t,e,r)=>(WU(t,e,"read from private field"),r?r.call(t):e.get(t)),fm=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},$oe=(t,e,r,n)=>(WU(t,e,"write to private field"),e.set(t,r),r),Qf=(t,e,r)=>(WU(t,e,"access private method"),r),Yb,y2,ak,Bv,ob,YU,Hoe,fC,$R,AC,HR,Qoe,SN,TN,mC;function mYe(t){return`
      ${sA.getTemplateHTML(t)}
      <style>
        :host {
          --_menu-bg: rgb(20 20 30 / .8);
          background: var(--media-settings-menu-background,
            var(--media-menu-background,
              var(--media-control-background,
                var(--media-secondary-color, var(--_menu-bg)))));
          min-width: var(--media-settings-menu-min-width, 170px);
          border-radius: 2px;
          overflow: hidden;
        }
      </style>
    `}class Voe extends sA{constructor(){super(),fm(this,y2),fm(this,Bv),fm(this,YU),fm(this,fC),fm(this,HR),fm(this,Yb,!1),fm(this,AC,e=>{const r=e.target,n=r?.nodeName==="VIDEO",i=Qf(this,fC,$R).call(this,r);(n||i)&&(Cm(this,Yb)?Qf(this,Bv,ob).call(this):Qf(this,HR,Qoe).call(this,e))}),fm(this,SN,e=>{const r=e.target,n=this.contains(r),i=e.button===2,s=r?.nodeName==="VIDEO",o=Qf(this,fC,$R).call(this,r);n||i&&(s||o)||Qf(this,Bv,ob).call(this)}),fm(this,TN,e=>{e.key==="Escape"&&Qf(this,Bv,ob).call(this)}),fm(this,mC,e=>{var r,n;const i=e.target;if((r=i.matches)!=null&&r.call(i,'button[invoke="copy"]')){const s=(n=i.closest("media-context-menu-item"))==null?void 0:n.querySelector('input[slot="copy"]');s&&navigator.clipboard.writeText(s.value)}Qf(this,Bv,ob).call(this)}),this.setAttribute("noautohide",""),Qf(this,y2,ak).call(this)}connectedCallback(){super.connectedCallback(),Hh(this).addEventListener("contextmenu",Cm(this,AC)),this.addEventListener("click",Cm(this,mC))}disconnectedCallback(){super.disconnectedCallback(),Hh(this).removeEventListener("contextmenu",Cm(this,AC)),this.removeEventListener("click",Cm(this,mC)),document.removeEventListener("mousedown",Cm(this,SN)),document.removeEventListener("keydown",Cm(this,TN))}}Yb=new WeakMap;y2=new WeakSet;ak=function(){this.hidden=!Cm(this,Yb)};Bv=new WeakSet;ob=function(){$oe(this,Yb,!1),Qf(this,y2,ak).call(this)};YU=new WeakSet;Hoe=function(){document.querySelectorAll("media-context-menu").forEach(e=>{var r;e!==this&&Qf(r=e,Bv,ob).call(r)})};fC=new WeakSet;$R=function(t){return t?t.hasAttribute("slot")&&t.getAttribute("slot")==="media"?!0:t.nodeName.includes("-")&&t.tagName.includes("-")?t.hasAttribute("src")||t.hasAttribute("poster")||t.hasAttribute("preload")||t.hasAttribute("playsinline"):!1:!1};AC=new WeakMap;HR=new WeakSet;Qoe=function(t){t.preventDefault(),Qf(this,YU,Hoe).call(this),$oe(this,Yb,!0),this.style.position="fixed",this.style.left=`${t.clientX}px`,this.style.top=`${t.clientY}px`,Qf(this,y2,ak).call(this),document.addEventListener("mousedown",Cm(this,SN),{once:!0}),document.addEventListener("keydown",Cm(this,TN),{once:!0})};SN=new WeakMap;TN=new WeakMap;mC=new WeakMap;Voe.getTemplateHTML=mYe;rr.customElements.get("media-context-menu")||rr.customElements.define("media-context-menu",Voe);function pYe(t){return`
    ${K0.getTemplateHTML.call(this,t)}
    <style>
        ::slotted(*) {
            color: var(--media-text-color, white);
            text-decoration: none;
            border: none;
            background: none;
            cursor: pointer;
            padding: 0;
            min-height: var(--media-control-height, 24px);
        }
    </style>
  `}class qU extends K0{}qU.shadowRootOptions={mode:"open"};qU.getTemplateHTML=pYe;rr.customElements.get("media-context-menu-item")||rr.customElements.define("media-context-menu-item",qU);var zoe=t=>{throw TypeError(t)},XU=(t,e,r)=>e.has(t)||zoe("Cannot "+r),Fo=(t,e,r)=>(XU(t,e,"read from private field"),r?r.call(t):e.get(t)),jA=(t,e,r)=>e.has(t)?zoe("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),Qm=(t,e,r,n)=>(XU(t,e,"write to private field"),e.set(t,r),r),pu=(t,e,r)=>(XU(t,e,"access private method"),r),ok=class{addEventListener(){}removeEventListener(){}dispatchEvent(t){return!0}};if(typeof DocumentFragment>"u"){class t extends ok{}globalThis.DocumentFragment=t}var ZU=class extends ok{},gYe=class extends ok{},vYe={get(t){},define(t,e,r){},getName(t){return null},upgrade(t){},whenDefined(t){return Promise.resolve(ZU)}},pC,yYe=class{constructor(e,r={}){jA(this,pC),Qm(this,pC,r?.detail)}get detail(){return Fo(this,pC)}initCustomEvent(){}};pC=new WeakMap;function xYe(t,e){return new ZU}var Koe={document:{createElement:xYe},DocumentFragment,customElements:vYe,CustomEvent:yYe,EventTarget:ok,HTMLElement:ZU,HTMLVideoElement:gYe},Goe=typeof window>"u"||typeof globalThis.customElements>"u",Lm=Goe?Koe:globalThis,CN=Goe?Koe.document:globalThis.document;function bYe(t){let e="";return Object.entries(t).forEach(([r,n])=>{n!=null&&(e+=`${QR(r)}: ${n}; `)}),e?e.trim():void 0}function QR(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Woe(t){return t.replace(/[-_]([a-z])/g,(e,r)=>r.toUpperCase())}function lf(t){if(t==null)return;let e=+t;return Number.isNaN(e)?void 0:e}function Yoe(t){let e=wYe(t).toString();return e?"?"+e:""}function wYe(t){let e={};for(let r in t)t[r]!=null&&(e[r]=t[r]);return new URLSearchParams(e)}var qoe=(t,e)=>!t||!e?!1:t.contains(e)?!0:qoe(t,e.getRootNode().host),Xoe="mux.com",EYe=()=>{try{return"3.11.4"}catch{}return"UNKNOWN"},_Ye=EYe(),Zoe=()=>_Ye,SYe=(t,{token:e,customDomain:r=Xoe,thumbnailTime:n,programTime:i}={})=>{var s;let o=e==null?n:void 0,{aud:c}=(s=vb(e))!=null?s:{};if(!(e&&c!=="t"))return`https://image.${r}/${t}/thumbnail.webp${Yoe({token:e,time:o,program_time:i})}`},TYe=(t,{token:e,customDomain:r=Xoe,programStartTime:n,programEndTime:i}={})=>{var s;let{aud:o}=(s=vb(e))!=null?s:{};if(!(e&&o!=="s"))return`https://image.${r}/${t}/storyboard.vtt${Yoe({token:e,format:"webp",program_start_time:n,program_end_time:i})}`},JU=t=>{if(t){if([Io.LIVE,Io.ON_DEMAND].includes(t))return t;if(t!=null&&t.includes("live"))return Io.LIVE}},CYe={crossorigin:"crossOrigin",playsinline:"playsInline"};function jYe(t){var e;return(e=CYe[t])!=null?e:Woe(t)}var zx,Kx,Oh,NYe=class{constructor(e,r){jA(this,zx),jA(this,Kx),jA(this,Oh,[]),Qm(this,zx,e),Qm(this,Kx,r)}[Symbol.iterator](){return Fo(this,Oh).values()}get length(){return Fo(this,Oh).length}get value(){var e;return(e=Fo(this,Oh).join(" "))!=null?e:""}set value(e){var r;e!==this.value&&(Qm(this,Oh,[]),this.add(...(r=e?.split(" "))!=null?r:[]))}toString(){return this.value}item(e){return Fo(this,Oh)[e]}values(){return Fo(this,Oh).values()}keys(){return Fo(this,Oh).keys()}forEach(e){Fo(this,Oh).forEach(e)}add(...e){var r,n;e.forEach(i=>{this.contains(i)||Fo(this,Oh).push(i)}),!(this.value===""&&!((r=Fo(this,zx))!=null&&r.hasAttribute(`${Fo(this,Kx)}`)))&&((n=Fo(this,zx))==null||n.setAttribute(`${Fo(this,Kx)}`,`${this.value}`))}remove(...e){var r;e.forEach(n=>{Fo(this,Oh).splice(Fo(this,Oh).indexOf(n),1)}),(r=Fo(this,zx))==null||r.setAttribute(`${Fo(this,Kx)}`,`${this.value}`)}contains(e){return Fo(this,Oh).includes(e)}toggle(e,r){return typeof r<"u"?r?(this.add(e),!0):(this.remove(e),!1):this.contains(e)?(this.remove(e),!1):(this.add(e),!0)}replace(e,r){this.remove(e),this.add(r)}};zx=new WeakMap,Kx=new WeakMap,Oh=new WeakMap;var Joe=`[mux-player ${Zoe()}]`;function Bp(...t){console.warn(Joe,...t)}function df(...t){console.error(Joe,...t)}function ele(t){var e;let r=(e=t.message)!=null?e:"";t.context&&(r+=` ${t.context}`),t.file&&(r+=` ${Ki("Read more: ")}
https://github.com/muxinc/elements/blob/main/errors/${t.file}`),Bp(r)}var Xd={AUTOPLAY:"autoplay",CROSSORIGIN:"crossorigin",LOOP:"loop",MUTED:"muted",PLAYSINLINE:"playsinline",PRELOAD:"preload"},Cv={VOLUME:"volume",PLAYBACKRATE:"playbackrate",MUTED:"muted"},LW=Object.freeze({length:0,start(t){let e=t>>>0;if(e>=this.length)throw new DOMException(`Failed to execute 'start' on 'TimeRanges': The index provided (${e}) is greater than or equal to the maximum bound (${this.length}).`);return 0},end(t){let e=t>>>0;if(e>=this.length)throw new DOMException(`Failed to execute 'end' on 'TimeRanges': The index provided (${e}) is greater than or equal to the maximum bound (${this.length}).`);return 0}}),kYe=Object.values(Xd).filter(t=>Xd.PLAYSINLINE!==t),IYe=Object.values(Cv),LYe=[...kYe,...IYe],BYe=class extends Lm.HTMLElement{static get observedAttributes(){return LYe}constructor(){super()}attributeChangedCallback(t,e,r){var n,i;switch(t){case Cv.MUTED:{this.media&&(this.media.muted=r!=null,this.media.defaultMuted=r!=null);return}case Cv.VOLUME:{let s=(n=lf(r))!=null?n:1;this.media&&(this.media.volume=s);return}case Cv.PLAYBACKRATE:{let s=(i=lf(r))!=null?i:1;this.media&&(this.media.playbackRate=s,this.media.defaultPlaybackRate=s);return}}}play(){var t,e;return(e=(t=this.media)==null?void 0:t.play())!=null?e:Promise.reject()}pause(){var t;(t=this.media)==null||t.pause()}load(){var t;(t=this.media)==null||t.load()}get media(){var t;return(t=this.shadowRoot)==null?void 0:t.querySelector("mux-video")}get audioTracks(){return this.media.audioTracks}get videoTracks(){return this.media.videoTracks}get audioRenditions(){return this.media.audioRenditions}get videoRenditions(){return this.media.videoRenditions}get paused(){var t,e;return(e=(t=this.media)==null?void 0:t.paused)!=null?e:!0}get duration(){var t,e;return(e=(t=this.media)==null?void 0:t.duration)!=null?e:NaN}get ended(){var t,e;return(e=(t=this.media)==null?void 0:t.ended)!=null?e:!1}get buffered(){var t,e;return(e=(t=this.media)==null?void 0:t.buffered)!=null?e:LW}get seekable(){var t,e;return(e=(t=this.media)==null?void 0:t.seekable)!=null?e:LW}get readyState(){var t,e;return(e=(t=this.media)==null?void 0:t.readyState)!=null?e:0}get videoWidth(){var t,e;return(e=(t=this.media)==null?void 0:t.videoWidth)!=null?e:0}get videoHeight(){var t,e;return(e=(t=this.media)==null?void 0:t.videoHeight)!=null?e:0}get currentSrc(){var t,e;return(e=(t=this.media)==null?void 0:t.currentSrc)!=null?e:""}get currentTime(){var t,e;return(e=(t=this.media)==null?void 0:t.currentTime)!=null?e:0}set currentTime(t){this.media&&(this.media.currentTime=Number(t))}get volume(){var t,e;return(e=(t=this.media)==null?void 0:t.volume)!=null?e:1}set volume(t){this.media&&(this.media.volume=Number(t))}get playbackRate(){var t,e;return(e=(t=this.media)==null?void 0:t.playbackRate)!=null?e:1}set playbackRate(t){this.media&&(this.media.playbackRate=Number(t))}get defaultPlaybackRate(){var t;return(t=lf(this.getAttribute(Cv.PLAYBACKRATE)))!=null?t:1}set defaultPlaybackRate(t){t!=null?this.setAttribute(Cv.PLAYBACKRATE,`${t}`):this.removeAttribute(Cv.PLAYBACKRATE)}get crossOrigin(){return uw(this,Xd.CROSSORIGIN)}set crossOrigin(t){this.setAttribute(Xd.CROSSORIGIN,`${t}`)}get autoplay(){return uw(this,Xd.AUTOPLAY)!=null}set autoplay(t){t?this.setAttribute(Xd.AUTOPLAY,typeof t=="string"?t:""):this.removeAttribute(Xd.AUTOPLAY)}get loop(){return uw(this,Xd.LOOP)!=null}set loop(t){t?this.setAttribute(Xd.LOOP,""):this.removeAttribute(Xd.LOOP)}get muted(){var t,e;return(e=(t=this.media)==null?void 0:t.muted)!=null?e:!1}set muted(t){this.media&&(this.media.muted=!!t)}get defaultMuted(){return uw(this,Xd.MUTED)!=null}set defaultMuted(t){t?this.setAttribute(Xd.MUTED,""):this.removeAttribute(Xd.MUTED)}get playsInline(){return uw(this,Xd.PLAYSINLINE)!=null}set playsInline(t){df("playsInline is set to true by default and is not currently supported as a setter.")}get preload(){return this.media?this.media.preload:this.getAttribute("preload")}set preload(t){["","none","metadata","auto"].includes(t)?this.setAttribute(Xd.PRELOAD,t):this.removeAttribute(Xd.PRELOAD)}};function uw(t,e){return t.media?t.media.getAttribute(e):t.getAttribute(e)}var BW=BYe,PYe=`:host {
  --media-control-display: var(--controls);
  --media-loading-indicator-display: var(--loading-indicator);
  --media-dialog-display: var(--dialog);
  --media-play-button-display: var(--play-button);
  --media-live-button-display: var(--live-button);
  --media-seek-backward-button-display: var(--seek-backward-button);
  --media-seek-forward-button-display: var(--seek-forward-button);
  --media-mute-button-display: var(--mute-button);
  --media-captions-button-display: var(--captions-button);
  --media-captions-menu-button-display: var(--captions-menu-button, var(--media-captions-button-display));
  --media-rendition-menu-button-display: var(--rendition-menu-button);
  --media-audio-track-menu-button-display: var(--audio-track-menu-button);
  --media-airplay-button-display: var(--airplay-button);
  --media-pip-button-display: var(--pip-button);
  --media-fullscreen-button-display: var(--fullscreen-button);
  --media-cast-button-display: var(--cast-button, var(--_cast-button-drm-display));
  --media-playback-rate-button-display: var(--playback-rate-button);
  --media-playback-rate-menu-button-display: var(--playback-rate-menu-button);
  --media-volume-range-display: var(--volume-range);
  --media-time-range-display: var(--time-range);
  --media-time-display-display: var(--time-display);
  --media-duration-display-display: var(--duration-display);
  --media-title-display-display: var(--title-display);

  display: inline-block;
  line-height: 0;
  width: 100%;
}

a {
  color: #fff;
  font-size: 0.9em;
  text-decoration: underline;
}

media-theme {
  display: inline-block;
  line-height: 0;
  width: 100%;
  height: 100%;
  direction: ltr;
}

media-poster-image {
  display: inline-block;
  line-height: 0;
  width: 100%;
  height: 100%;
}

media-poster-image:not([src]):not([placeholdersrc]) {
  display: none;
}

::part(top),
[part~='top'] {
  --media-control-display: var(--controls, var(--top-controls));
  --media-play-button-display: var(--play-button, var(--top-play-button));
  --media-live-button-display: var(--live-button, var(--top-live-button));
  --media-seek-backward-button-display: var(--seek-backward-button, var(--top-seek-backward-button));
  --media-seek-forward-button-display: var(--seek-forward-button, var(--top-seek-forward-button));
  --media-mute-button-display: var(--mute-button, var(--top-mute-button));
  --media-captions-button-display: var(--captions-button, var(--top-captions-button));
  --media-captions-menu-button-display: var(
    --captions-menu-button,
    var(--media-captions-button-display, var(--top-captions-menu-button))
  );
  --media-rendition-menu-button-display: var(--rendition-menu-button, var(--top-rendition-menu-button));
  --media-audio-track-menu-button-display: var(--audio-track-menu-button, var(--top-audio-track-menu-button));
  --media-airplay-button-display: var(--airplay-button, var(--top-airplay-button));
  --media-pip-button-display: var(--pip-button, var(--top-pip-button));
  --media-fullscreen-button-display: var(--fullscreen-button, var(--top-fullscreen-button));
  --media-cast-button-display: var(--cast-button, var(--top-cast-button, var(--_cast-button-drm-display)));
  --media-playback-rate-button-display: var(--playback-rate-button, var(--top-playback-rate-button));
  --media-playback-rate-menu-button-display: var(
    --captions-menu-button,
    var(--media-playback-rate-button-display, var(--top-playback-rate-menu-button))
  );
  --media-volume-range-display: var(--volume-range, var(--top-volume-range));
  --media-time-range-display: var(--time-range, var(--top-time-range));
  --media-time-display-display: var(--time-display, var(--top-time-display));
  --media-duration-display-display: var(--duration-display, var(--top-duration-display));
  --media-title-display-display: var(--title-display, var(--top-title-display));
}

::part(center),
[part~='center'] {
  --media-control-display: var(--controls, var(--center-controls));
  --media-play-button-display: var(--play-button, var(--center-play-button));
  --media-live-button-display: var(--live-button, var(--center-live-button));
  --media-seek-backward-button-display: var(--seek-backward-button, var(--center-seek-backward-button));
  --media-seek-forward-button-display: var(--seek-forward-button, var(--center-seek-forward-button));
  --media-mute-button-display: var(--mute-button, var(--center-mute-button));
  --media-captions-button-display: var(--captions-button, var(--center-captions-button));
  --media-captions-menu-button-display: var(
    --captions-menu-button,
    var(--media-captions-button-display, var(--center-captions-menu-button))
  );
  --media-rendition-menu-button-display: var(--rendition-menu-button, var(--center-rendition-menu-button));
  --media-audio-track-menu-button-display: var(--audio-track-menu-button, var(--center-audio-track-menu-button));
  --media-airplay-button-display: var(--airplay-button, var(--center-airplay-button));
  --media-pip-button-display: var(--pip-button, var(--center-pip-button));
  --media-fullscreen-button-display: var(--fullscreen-button, var(--center-fullscreen-button));
  --media-cast-button-display: var(--cast-button, var(--center-cast-button, var(--_cast-button-drm-display)));
  --media-playback-rate-button-display: var(--playback-rate-button, var(--center-playback-rate-button));
  --media-playback-rate-menu-button-display: var(
    --playback-rate-menu-button,
    var(--media-playback-rate-button-display, var(--center-playback-rate-menu-button))
  );
  --media-volume-range-display: var(--volume-range, var(--center-volume-range));
  --media-time-range-display: var(--time-range, var(--center-time-range));
  --media-time-display-display: var(--time-display, var(--center-time-display));
  --media-duration-display-display: var(--duration-display, var(--center-duration-display));
}

::part(bottom),
[part~='bottom'] {
  --media-control-display: var(--controls, var(--bottom-controls));
  --media-play-button-display: var(--play-button, var(--bottom-play-button));
  --media-live-button-display: var(--live-button, var(--bottom-live-button));
  --media-seek-backward-button-display: var(--seek-backward-button, var(--bottom-seek-backward-button));
  --media-seek-forward-button-display: var(--seek-forward-button, var(--bottom-seek-forward-button));
  --media-mute-button-display: var(--mute-button, var(--bottom-mute-button));
  --media-captions-button-display: var(--captions-button, var(--bottom-captions-button));
  --media-captions-menu-button-display: var(
    --captions-menu-button,
    var(--media-captions-button-display, var(--bottom-captions-menu-button))
  );
  --media-rendition-menu-button-display: var(--rendition-menu-button, var(--bottom-rendition-menu-button));
  --media-audio-track-menu-button-display: var(--audio-track-menu-button, var(--bottom-audio-track-menu-button));
  --media-airplay-button-display: var(--airplay-button, var(--bottom-airplay-button));
  --media-pip-button-display: var(--pip-button, var(--bottom-pip-button));
  --media-fullscreen-button-display: var(--fullscreen-button, var(--bottom-fullscreen-button));
  --media-cast-button-display: var(--cast-button, var(--bottom-cast-button, var(--_cast-button-drm-display)));
  --media-playback-rate-button-display: var(--playback-rate-button, var(--bottom-playback-rate-button));
  --media-playback-rate-menu-button-display: var(
    --playback-rate-menu-button,
    var(--media-playback-rate-button-display, var(--bottom-playback-rate-menu-button))
  );
  --media-volume-range-display: var(--volume-range, var(--bottom-volume-range));
  --media-time-range-display: var(--time-range, var(--bottom-time-range));
  --media-time-display-display: var(--time-display, var(--bottom-time-display));
  --media-duration-display-display: var(--duration-display, var(--bottom-duration-display));
  --media-title-display-display: var(--title-display, var(--bottom-title-display));
}

:host([no-tooltips]) {
  --media-tooltip-display: none;
}
`,dw=new WeakMap,OYe=class tle{constructor(e,r){this.element=e,this.type=r,this.element.addEventListener(this.type,this);let n=dw.get(this.element);n&&n.set(this.type,this)}set(e){if(typeof e=="function")this.handleEvent=e.bind(this.element);else if(typeof e=="object"&&typeof e.handleEvent=="function")this.handleEvent=e.handleEvent.bind(e);else{this.element.removeEventListener(this.type,this);let r=dw.get(this.element);r&&r.delete(this.type)}}static for(e){dw.has(e.element)||dw.set(e.element,new Map);let r=e.attributeName.slice(2),n=dw.get(e.element);return n&&n.has(r)?n.get(r):new tle(e.element,r)}};function RYe(t,e){return t instanceof RA&&t.attributeName.startsWith("on")?(OYe.for(t).set(e),t.element.removeAttributeNS(t.attributeNamespace,t.attributeName),!0):!1}function DYe(t,e){return e instanceof rle&&t instanceof w1?(e.renderInto(t),!0):!1}function MYe(t,e){return e instanceof DocumentFragment&&t instanceof w1?(e.childNodes.length&&t.replace(...e.childNodes),!0):!1}function FYe(t,e){if(t instanceof RA){let r=t.attributeNamespace,n=t.element.getAttributeNS(r,t.attributeName);return String(e)!==n&&(t.value=String(e)),!0}return t.value=String(e),!0}function UYe(t,e){if(t instanceof RA&&e instanceof Element){let r=t.element;return r[t.attributeName]!==e&&(t.element.removeAttributeNS(t.attributeNamespace,t.attributeName),r[t.attributeName]=e),!0}return!1}function $Ye(t,e){if(typeof e=="boolean"&&t instanceof RA){let r=t.attributeNamespace,n=t.element.hasAttributeNS(r,t.attributeName);return e!==n&&(t.booleanValue=e),!0}return!1}function HYe(t,e){return e===!1&&t instanceof w1?(t.replace(""),!0):!1}function QYe(t,e){UYe(t,e)||$Ye(t,e)||RYe(t,e)||HYe(t,e)||DYe(t,e)||MYe(t,e)||FYe(t,e)}var rB=new Map,PW=new WeakMap,OW=new WeakMap,rle=class{constructor(e,r,n){this.strings=e,this.values=r,this.processor=n,this.stringsKey=this.strings.join("")}get template(){if(rB.has(this.stringsKey))return rB.get(this.stringsKey);{let e=CN.createElement("template"),r=this.strings.length-1;return e.innerHTML=this.strings.reduce((n,i,s)=>n+i+(s<r?`{{ ${s} }}`:""),""),rB.set(this.stringsKey,e),e}}renderInto(e){var r;let n=this.template;if(PW.get(e)!==n){PW.set(e,n);let s=new nk(n,this.values,this.processor);OW.set(e,s),e instanceof w1?e.replace(...s.children):e.appendChild(s);return}let i=OW.get(e);(r=i?.update)==null||r.call(i,this.values)}},VYe={processCallback(t,e,r){var n;if(r){for(let[i,s]of e)if(i in r){let o=(n=r[i])!=null?n:"";QYe(s,o)}}}};function gC(t,...e){return new rle(t,e,VYe)}function zYe(t,e){t.renderInto(e)}var KYe=t=>{let{tokens:e}=t;return e.drm?":host(:not([cast-receiver])) { --_cast-button-drm-display: none; }":""},GYe=t=>gC`
  <style>
    ${KYe(t)}
    ${PYe}
  </style>
  ${XYe(t)}
`,WYe=t=>{let e=t.hotKeys?`${t.hotKeys}`:"";return JU(t.streamType)==="live"&&(e+=" noarrowleft noarrowright"),e},YYe={TOP:"top",CENTER:"center",BOTTOM:"bottom",LAYER:"layer",MEDIA_LAYER:"media-layer",POSTER_LAYER:"poster-layer",VERTICAL_LAYER:"vertical-layer",CENTERED_LAYER:"centered-layer",GESTURE_LAYER:"gesture-layer",CONTROLLER_LAYER:"controller",BUTTON:"button",RANGE:"range",THUMB:"thumb",DISPLAY:"display",CONTROL_BAR:"control-bar",MENU_BUTTON:"menu-button",MENU:"menu",MENU_ITEM:"menu-item",OPTION:"option",POSTER:"poster",LIVE:"live",PLAY:"play",PRE_PLAY:"pre-play",SEEK_BACKWARD:"seek-backward",SEEK_FORWARD:"seek-forward",MUTE:"mute",CAPTIONS:"captions",AIRPLAY:"airplay",PIP:"pip",FULLSCREEN:"fullscreen",CAST:"cast",PLAYBACK_RATE:"playback-rate",VOLUME:"volume",TIME:"time",TITLE:"title",AUDIO_TRACK:"audio-track",RENDITION:"rendition"},qYe=Object.values(YYe).join(", "),XYe=t=>{var e,r,n,i,s,o,c,u,l,d,f,A,p,g,y,x,w,E,T,C,N,I,U,K,Y,re,se,Ae,we,Ce,ve,ne,ce,ae,De,Oe,be,de,xe;return gC`
  <media-theme
    template="${t.themeTemplate||!1}"
    defaultstreamtype="${(e=t.defaultStreamType)!=null?e:!1}"
    hotkeys="${WYe(t)||!1}"
    nohotkeys="${t.noHotKeys||!t.hasSrc||!1}"
    noautoseektolive="${!!((r=t.streamType)!=null&&r.includes(Io.LIVE))&&t.targetLiveWindow!==0}"
    novolumepref="${t.novolumepref||!1}"
    nomutedpref="${t.nomutedpref||!1}"
    disabled="${!t.hasSrc||t.isDialogOpen}"
    audio="${(n=t.audio)!=null?n:!1}"
    style="${(i=bYe({"--media-primary-color":t.primaryColor,"--media-secondary-color":t.secondaryColor,"--media-accent-color":t.accentColor}))!=null?i:!1}"
    defaultsubtitles="${!t.defaultHiddenCaptions}"
    forwardseekoffset="${(s=t.forwardSeekOffset)!=null?s:!1}"
    backwardseekoffset="${(o=t.backwardSeekOffset)!=null?o:!1}"
    playbackrates="${(c=t.playbackRates)!=null?c:!1}"
    defaultshowremainingtime="${(u=t.defaultShowRemainingTime)!=null?u:!1}"
    defaultduration="${(l=t.defaultDuration)!=null?l:!1}"
    hideduration="${(d=t.hideDuration)!=null?d:!1}"
    title="${(f=t.title)!=null?f:!1}"
    videotitle="${(A=t.videoTitle)!=null?A:!1}"
    proudlydisplaymuxbadge="${(p=t.proudlyDisplayMuxBadge)!=null?p:!1}"
    exportparts="${qYe}"
    onclose="${t.onCloseErrorDialog}"
    onfocusin="${t.onFocusInErrorDialog}"
  >
    <mux-video
      slot="media"
      inert="${(g=t.noHotKeys)!=null?g:!1}"
      target-live-window="${(y=t.targetLiveWindow)!=null?y:!1}"
      stream-type="${(x=JU(t.streamType))!=null?x:!1}"
      crossorigin="${(w=t.crossOrigin)!=null?w:""}"
      playsinline
      autoplay="${(E=t.autoplay)!=null?E:!1}"
      muted="${(T=t.muted)!=null?T:!1}"
      loop="${(C=t.loop)!=null?C:!1}"
      preload="${(N=t.preload)!=null?N:!1}"
      debug="${(I=t.debug)!=null?I:!1}"
      prefer-cmcd="${(U=t.preferCmcd)!=null?U:!1}"
      disable-tracking="${(K=t.disableTracking)!=null?K:!1}"
      disable-cookies="${(Y=t.disableCookies)!=null?Y:!1}"
      prefer-playback="${(re=t.preferPlayback)!=null?re:!1}"
      start-time="${t.startTime!=null?t.startTime:!1}"
      beacon-collection-domain="${(se=t.beaconCollectionDomain)!=null?se:!1}"
      player-init-time="${(Ae=t.playerInitTime)!=null?Ae:!1}"
      player-software-name="${(we=t.playerSoftwareName)!=null?we:!1}"
      player-software-version="${(Ce=t.playerSoftwareVersion)!=null?Ce:!1}"
      env-key="${(ve=t.envKey)!=null?ve:!1}"
      custom-domain="${(ne=t.customDomain)!=null?ne:!1}"
      src="${t.src?t.src:t.playbackId?NO(t):!1}"
      cast-src="${t.src?t.src:t.playbackId?NO(t):!1}"
      cast-receiver="${(ce=t.castReceiver)!=null?ce:!1}"
      drm-token="${(De=(ae=t.tokens)==null?void 0:ae.drm)!=null?De:!1}"
      exportparts="video"
      disable-pseudo-ended="${(Oe=t.disablePseudoEnded)!=null?Oe:!1}"
      max-auto-resolution="${(be=t.maxAutoResolution)!=null?be:!1}"
      cap-rendition-to-player-size="${(de=t.capRenditionToPlayerSize)!=null?de:!1}"
    >
      ${t.storyboard?gC`<track label="thumbnails" default kind="metadata" src="${t.storyboard}" />`:gC``}
      <slot></slot>
    </mux-video>
    <slot name="poster" slot="poster">
      <media-poster-image
        part="poster"
        exportparts="poster, img"
        src="${t.poster?t.poster:!1}"
        placeholdersrc="${(xe=t.placeholder)!=null?xe:!1}"
      ></media-poster-image>
    </slot>
  </media-theme>
`},nle=t=>t.charAt(0).toUpperCase()+t.slice(1),ZYe=(t,e=!1)=>{var r,n;if(t.muxCode){let i=nle((r=t.errorCategory)!=null?r:"video"),s=$5((n=t.errorCategory)!=null?n:Sl.VIDEO);if(t.muxCode===ts.NETWORK_OFFLINE)return Ki("Your device appears to be offline",e);if(t.muxCode===ts.NETWORK_TOKEN_EXPIRED)return Ki("{category} URL has expired",e).format({category:i});if([ts.NETWORK_TOKEN_SUB_MISMATCH,ts.NETWORK_TOKEN_AUD_MISMATCH,ts.NETWORK_TOKEN_AUD_MISSING,ts.NETWORK_TOKEN_MALFORMED].includes(t.muxCode))return Ki("{category} URL is formatted incorrectly",e).format({category:i});if(t.muxCode===ts.NETWORK_TOKEN_MISSING)return Ki("Invalid {categoryName} URL",e).format({categoryName:s});if(t.muxCode===ts.NETWORK_NOT_FOUND)return Ki("{category} does not exist",e).format({category:i});if(t.muxCode===ts.NETWORK_NOT_READY){let o=t.streamType==="live"?"Live stream":"Video";return Ki("{mediaType} is not currently available",e).format({mediaType:o})}}if(t.code){if(t.code===ii.MEDIA_ERR_NETWORK)return Ki("Network Error",e);if(t.code===ii.MEDIA_ERR_DECODE)return Ki("Media Error",e);if(t.code===ii.MEDIA_ERR_SRC_NOT_SUPPORTED)return Ki("Source Not Supported",e)}return Ki("Error",e)},JYe=(t,e=!1)=>{var r,n;if(t.muxCode){let i=nle((r=t.errorCategory)!=null?r:"video"),s=$5((n=t.errorCategory)!=null?n:Sl.VIDEO);return t.muxCode===ts.NETWORK_OFFLINE?Ki("Check your internet connection and try reloading this video.",e):t.muxCode===ts.NETWORK_TOKEN_EXPIRED?Ki("The videos secured {tokenNamePrefix}-token has expired.",e).format({tokenNamePrefix:s}):t.muxCode===ts.NETWORK_TOKEN_SUB_MISMATCH?Ki("The videos playback ID does not match the one encoded in the {tokenNamePrefix}-token.",e).format({tokenNamePrefix:s}):t.muxCode===ts.NETWORK_TOKEN_MALFORMED?Ki("{category} URL is formatted incorrectly",e).format({category:i}):[ts.NETWORK_TOKEN_AUD_MISMATCH,ts.NETWORK_TOKEN_AUD_MISSING].includes(t.muxCode)?Ki("The {tokenNamePrefix}-token is formatted with incorrect information.",e).format({tokenNamePrefix:s}):[ts.NETWORK_TOKEN_MISSING,ts.NETWORK_INVALID_URL].includes(t.muxCode)?Ki("The video URL or {tokenNamePrefix}-token are formatted with incorrect or incomplete information.",e).format({tokenNamePrefix:s}):t.muxCode===ts.NETWORK_NOT_FOUND?"":t.message}return t.code&&(t.code===ii.MEDIA_ERR_NETWORK||t.code===ii.MEDIA_ERR_DECODE||(t.code,ii.MEDIA_ERR_SRC_NOT_SUPPORTED)),t.message},eqe=(t,e=!1)=>{let r=ZYe(t,e).toString(),n=JYe(t,e).toString();return{title:r,message:n}},tqe=t=>{if(t.muxCode){if(t.muxCode===ts.NETWORK_TOKEN_EXPIRED)return"403-expired-token.md";if(t.muxCode===ts.NETWORK_TOKEN_MALFORMED)return"403-malformatted-token.md";if([ts.NETWORK_TOKEN_AUD_MISMATCH,ts.NETWORK_TOKEN_AUD_MISSING].includes(t.muxCode))return"403-incorrect-aud-value.md";if(t.muxCode===ts.NETWORK_TOKEN_SUB_MISMATCH)return"403-playback-id-mismatch.md";if(t.muxCode===ts.NETWORK_TOKEN_MISSING)return"missing-signed-tokens.md";if(t.muxCode===ts.NETWORK_NOT_FOUND)return"404-not-found.md";if(t.muxCode===ts.NETWORK_NOT_READY)return"412-not-playable.md"}if(t.code){if(t.code===ii.MEDIA_ERR_NETWORK)return"";if(t.code===ii.MEDIA_ERR_DECODE)return"media-decode-error.md";if(t.code===ii.MEDIA_ERR_SRC_NOT_SUPPORTED)return"media-src-not-supported.md"}return""},RW=(t,e)=>{let r=tqe(t);return{message:t.message,context:t.context,file:r}},rqe=`<template id="media-theme-gerwig">
  <style>
    @keyframes pre-play-hide {
      0% {
        transform: scale(1);
        opacity: 1;
      }

      30% {
        transform: scale(0.7);
      }

      100% {
        transform: scale(1.5);
        opacity: 0;
      }
    }

    :host {
      --_primary-color: var(--media-primary-color, #fff);
      --_secondary-color: var(--media-secondary-color, transparent);
      --_accent-color: var(--media-accent-color, #fa50b5);
      --_text-color: var(--media-text-color, #000);

      --media-icon-color: var(--_primary-color);
      --media-control-background: var(--_secondary-color);
      --media-control-hover-background: var(--_accent-color);
      --media-time-buffered-color: rgba(255, 255, 255, 0.4);
      --media-preview-time-text-shadow: none;
      --media-control-height: 14px;
      --media-control-padding: 6px;
      --media-tooltip-container-margin: 6px;
      --media-tooltip-distance: 18px;

      color: var(--_primary-color);
      display: inline-block;
      width: 100%;
      height: 100%;
    }

    :host([audio]) {
      --_secondary-color: var(--media-secondary-color, black);
      --media-preview-time-text-shadow: none;
    }

    :host([audio]) ::slotted([slot='media']) {
      height: 0px;
    }

    :host([audio]) media-loading-indicator {
      display: none;
    }

    :host([audio]) media-controller {
      background: transparent;
    }

    :host([audio]) media-controller::part(vertical-layer) {
      background: transparent;
    }

    :host([audio]) media-control-bar {
      width: 100%;
      background-color: var(--media-control-background);
    }

    /*
     * 0.433s is the transition duration for VTT Regions.
     * Borrowed here, so the captions don't move too fast.
     */
    media-controller {
      --media-webkit-text-track-transform: translateY(0) scale(0.98);
      --media-webkit-text-track-transition: transform 0.433s ease-out 0.3s;
    }
    media-controller:is([mediapaused], :not([userinactive])) {
      --media-webkit-text-track-transform: translateY(-50px) scale(0.98);
      --media-webkit-text-track-transition: transform 0.15s ease;
    }

    /*
     * CSS specific to iOS devices.
     * See: https://stackoverflow.com/questions/30102792/css-media-query-to-target-only-ios-devices/60220757#60220757
     */
    @supports (-webkit-touch-callout: none) {
      /* Disable subtitle adjusting for iOS Safari */
      media-controller[mediaisfullscreen] {
        --media-webkit-text-track-transform: unset;
        --media-webkit-text-track-transition: unset;
      }
    }

    media-time-range {
      --media-box-padding-left: 6px;
      --media-box-padding-right: 6px;
      --media-range-bar-color: var(--_accent-color);
      --media-time-range-buffered-color: var(--_primary-color);
      --media-range-track-color: transparent;
      --media-range-track-background: rgba(255, 255, 255, 0.4);
      --media-range-thumb-background: radial-gradient(
        circle,
        #000 0%,
        #000 25%,
        var(--_accent-color) 25%,
        var(--_accent-color)
      );
      --media-range-thumb-width: 12px;
      --media-range-thumb-height: 12px;
      --media-range-thumb-transform: scale(0);
      --media-range-thumb-transition: transform 0.3s;
      --media-range-thumb-opacity: 1;
      --media-preview-background: var(--_primary-color);
      --media-box-arrow-background: var(--_primary-color);
      --media-preview-thumbnail-border: 5px solid var(--_primary-color);
      --media-preview-border-radius: 5px;
      --media-text-color: var(--_text-color);
      --media-control-hover-background: transparent;
      --media-preview-chapter-text-shadow: none;
      color: var(--_accent-color);
      padding: 0 6px;
    }

    :host([audio]) media-time-range {
      --media-preview-time-padding: 1.5px 6px;
      --media-preview-box-margin: 0 0 -5px;
    }

    media-time-range:hover {
      --media-range-thumb-transform: scale(1);
    }

    media-preview-thumbnail {
      border-bottom-width: 0;
    }

    [part~='menu'] {
      border-radius: 2px;
      border: 1px solid rgba(0, 0, 0, 0.1);
      bottom: 50px;
      padding: 2.5px 10px;
    }

    [part~='menu']::part(indicator) {
      fill: var(--_accent-color);
    }

    [part~='menu']::part(menu-item) {
      box-sizing: border-box;
      display: flex;
      align-items: center;
      padding: 6px 10px;
      min-height: 34px;
    }

    [part~='menu']::part(checked) {
      font-weight: 700;
    }

    media-captions-menu,
    media-rendition-menu,
    media-audio-track-menu,
    media-playback-rate-menu {
      position: absolute; /* ensure they don't take up space in DOM on load */
      --media-menu-background: var(--_primary-color);
      --media-menu-item-checked-background: transparent;
      --media-text-color: var(--_text-color);
      --media-menu-item-hover-background: transparent;
      --media-menu-item-hover-outline: var(--_accent-color) solid 1px;
    }

    media-rendition-menu {
      min-width: 140px;
    }

    /* The icon is a circle so make it 16px high instead of 14px for more balance. */
    media-audio-track-menu-button {
      --media-control-padding: 5px;
      --media-control-height: 16px;
    }

    media-playback-rate-menu-button {
      --media-control-padding: 6px 3px;
      min-width: 4.4ch;
    }

    media-playback-rate-menu {
      --media-menu-flex-direction: row;
      --media-menu-item-checked-background: var(--_accent-color);
      --media-menu-item-checked-indicator-display: none;
      margin-right: 6px;
      padding: 0;
      --media-menu-gap: 0.25em;
    }

    media-playback-rate-menu[part~='menu']::part(menu-item) {
      padding: 6px 6px 6px 8px;
    }

    media-playback-rate-menu[part~='menu']::part(checked) {
      color: #fff;
    }

    :host(:not([audio])) media-time-range {
      /* Adding px is required here for calc() */
      --media-range-padding: 0px;
      background: transparent;
      z-index: 10;
      height: 10px;
      bottom: -3px;
      width: 100%;
    }

    media-control-bar :is([role='button'], [role='switch'], button) {
      line-height: 0;
    }

    media-control-bar :is([part*='button'], [part*='range'], [part*='display']) {
      border-radius: 3px;
    }

    .spacer {
      flex-grow: 1;
      background-color: var(--media-control-background, rgba(20, 20, 30, 0.7));
    }

    media-control-bar[slot~='top-chrome'] {
      min-height: 42px;
      pointer-events: none;
    }

    media-control-bar {
      --gradient-steps:
        hsl(0 0% 0% / 0) 0%, hsl(0 0% 0% / 0.013) 8.1%, hsl(0 0% 0% / 0.049) 15.5%, hsl(0 0% 0% / 0.104) 22.5%,
        hsl(0 0% 0% / 0.175) 29%, hsl(0 0% 0% / 0.259) 35.3%, hsl(0 0% 0% / 0.352) 41.2%, hsl(0 0% 0% / 0.45) 47.1%,
        hsl(0 0% 0% / 0.55) 52.9%, hsl(0 0% 0% / 0.648) 58.8%, hsl(0 0% 0% / 0.741) 64.7%, hsl(0 0% 0% / 0.825) 71%,
        hsl(0 0% 0% / 0.896) 77.5%, hsl(0 0% 0% / 0.951) 84.5%, hsl(0 0% 0% / 0.987) 91.9%, hsl(0 0% 0%) 100%;
    }

    :host([title]) media-control-bar[slot='top-chrome']::before,
    :host([videotitle]) media-control-bar[slot='top-chrome']::before {
      content: '';
      position: absolute;
      width: 100%;
      padding-bottom: min(100px, 25%);
      background: linear-gradient(to top, var(--gradient-steps));
      opacity: 0.8;
      pointer-events: none;
    }

    :host(:not([audio])) media-control-bar[part~='bottom']::before {
      content: '';
      position: absolute;
      width: 100%;
      bottom: 0;
      left: 0;
      padding-bottom: min(100px, 25%);
      background: linear-gradient(to bottom, var(--gradient-steps));
      opacity: 0.8;
      z-index: 1;
      pointer-events: none;
    }

    media-control-bar[part~='bottom'] > * {
      z-index: 20;
    }

    media-control-bar[part~='bottom'] {
      padding: 6px 6px;
    }

    media-control-bar[slot~='top-chrome'] > * {
      --media-control-background: transparent;
      --media-control-hover-background: transparent;
      position: relative;
    }

    media-controller::part(vertical-layer) {
      transition: background-color 1s;
    }

    media-controller:is([mediapaused], :not([userinactive]))::part(vertical-layer) {
      background-color: var(--controls-backdrop-color, var(--controls, transparent));
      transition: background-color 0.25s;
    }

    .center-controls {
      --media-button-icon-width: 100%;
      --media-button-icon-height: auto;
      --media-tooltip-display: none;
      pointer-events: none;
      width: 100%;
      display: flex;
      flex-flow: row;
      align-items: center;
      justify-content: center;
      paint-order: stroke;
      stroke: rgba(102, 102, 102, 1);
      stroke-width: 0.3px;
      text-shadow:
        0 0 2px rgb(0 0 0 / 0.25),
        0 0 6px rgb(0 0 0 / 0.25);
    }

    .center-controls media-play-button {
      --media-control-background: transparent;
      --media-control-hover-background: transparent;
      --media-control-padding: 0;
      width: 40px;
      filter: drop-shadow(0 0 2px rgb(0 0 0 / 0.25)) drop-shadow(0 0 6px rgb(0 0 0 / 0.25));
    }

    [breakpointsm] .center-controls media-play-button {
      width: 90px;
      height: 90px;
      border-radius: 50%;
      transition: background 0.4s;
      padding: 24px;
      --media-control-background: #000;
      --media-control-hover-background: var(--_accent-color);
    }

    .center-controls media-seek-backward-button,
    .center-controls media-seek-forward-button {
      --media-control-background: transparent;
      --media-control-hover-background: transparent;
      padding: 0;
      margin: 0 20px;
      width: max(33px, min(8%, 40px));
      text-shadow:
        0 0 2px rgb(0 0 0 / 0.25),
        0 0 6px rgb(0 0 0 / 0.25);
    }

    [breakpointsm]:not([audio]) .center-controls.pre-playback {
      display: grid;
      align-items: initial;
      justify-content: initial;
      height: 100%;
      overflow: hidden;
    }

    [breakpointsm]:not([audio]) .center-controls.pre-playback media-play-button {
      place-self: var(--_pre-playback-place, center);
      grid-area: 1 / 1;
      margin: 16px;
    }

    /* Show and hide controls or pre-playback state */

    [breakpointsm]:is([mediahasplayed], :not([mediapaused])):not([audio])
      .center-controls.pre-playback
      media-play-button {
      /* Using \`forwards\` would lead to a laggy UI after the animation got in the end state */
      animation: 0.3s linear pre-play-hide;
      opacity: 0;
      pointer-events: none;
    }

    .autoplay-unmute {
      --media-control-hover-background: transparent;
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      filter: drop-shadow(0 0 2px rgb(0 0 0 / 0.25)) drop-shadow(0 0 6px rgb(0 0 0 / 0.25));
    }

    .autoplay-unmute-btn {
      --media-control-height: 16px;
      border-radius: 8px;
      background: #000;
      color: var(--_primary-color);
      display: flex;
      align-items: center;
      padding: 8px 16px;
      font-size: 18px;
      font-weight: 500;
      cursor: pointer;
    }

    .autoplay-unmute-btn:hover {
      background: var(--_accent-color);
    }

    [breakpointsm] .autoplay-unmute-btn {
      --media-control-height: 30px;
      padding: 14px 24px;
      font-size: 26px;
    }

    .autoplay-unmute-btn svg {
      margin: 0 6px 0 0;
    }

    [breakpointsm] .autoplay-unmute-btn svg {
      margin: 0 10px 0 0;
    }

    media-controller:not([audio]):not([mediahasplayed]) *:is(media-control-bar, media-time-range) {
      display: none;
    }

    media-error-dialog:not([mediaerrorcode]) {
      opacity: 0;
    }

    media-loading-indicator {
      --media-loading-icon-width: 100%;
      --media-button-icon-height: auto;
      display: var(--media-control-display, var(--media-loading-indicator-display, flex));
      pointer-events: none;
      position: absolute;
      width: min(15%, 150px);
      flex-flow: row;
      align-items: center;
      justify-content: center;
    }

    /* Intentionally don't target the div for transition but the children
     of the div. Prevents messing with media-chrome's autohide feature. */
    media-loading-indicator + div * {
      transition: opacity 0.15s;
      opacity: 1;
    }

    media-loading-indicator[medialoading]:not([mediapaused]) ~ div > * {
      opacity: 0;
      transition-delay: 400ms;
    }

    media-volume-range {
      width: min(100%, 100px);
      --media-range-padding-left: 10px;
      --media-range-padding-right: 10px;
      --media-range-thumb-width: 12px;
      --media-range-thumb-height: 12px;
      --media-range-thumb-background: radial-gradient(
        circle,
        #000 0%,
        #000 25%,
        var(--_primary-color) 25%,
        var(--_primary-color)
      );
      --media-control-hover-background: none;
    }

    media-time-display {
      white-space: nowrap;
    }

    /* Generic style for explicitly disabled controls */
    media-control-bar[part~='bottom'] [disabled],
    media-control-bar[part~='bottom'] [aria-disabled='true'] {
      opacity: 60%;
      cursor: not-allowed;
    }

    media-text-display {
      --media-font-size: 16px;
      --media-control-padding: 14px;
      font-weight: 500;
    }

    media-play-button.animated *:is(g, path) {
      transition: all 0.3s;
    }

    media-play-button.animated[mediapaused] .pause-icon-pt1 {
      opacity: 0;
    }

    media-play-button.animated[mediapaused] .pause-icon-pt2 {
      transform-origin: center center;
      transform: scaleY(0);
    }

    media-play-button.animated[mediapaused] .play-icon {
      clip-path: inset(0 0 0 0);
    }

    media-play-button.animated:not([mediapaused]) .play-icon {
      clip-path: inset(0 0 0 100%);
    }

    media-seek-forward-button,
    media-seek-backward-button {
      --media-font-weight: 400;
    }

    .mute-icon {
      display: inline-block;
    }

    .mute-icon :is(path, g) {
      transition: opacity 0.5s;
    }

    .muted {
      opacity: 0;
    }

    media-mute-button[mediavolumelevel='low'] :is(.volume-medium, .volume-high),
    media-mute-button[mediavolumelevel='medium'] :is(.volume-high) {
      opacity: 0;
    }

    media-mute-button[mediavolumelevel='off'] .unmuted {
      opacity: 0;
    }

    media-mute-button[mediavolumelevel='off'] .muted {
      opacity: 1;
    }

    /**
     * Our defaults for these buttons are to hide them at small sizes
     * users can override this with CSS
     */
    media-controller:not([breakpointsm]):not([audio]) {
      --bottom-play-button: none;
      --bottom-seek-backward-button: none;
      --bottom-seek-forward-button: none;
      --bottom-time-display: none;
      --bottom-playback-rate-menu-button: none;
      --bottom-pip-button: none;
    }

    [part='mux-badge'] {
      position: absolute;
      bottom: 10px;
      right: 10px;
      z-index: 2;
      opacity: 0.6;
      transition:
        opacity 0.2s ease-in-out,
        bottom 0.2s ease-in-out;
    }

    [part='mux-badge']:hover {
      opacity: 1;
    }

    [part='mux-badge'] a {
      font-size: 14px;
      font-family: var(--_font-family);
      color: var(--_primary-color);
      text-decoration: none;
      display: flex;
      align-items: center;
      gap: 5px;
    }

    [part='mux-badge'] .mux-badge-text {
      transition: opacity 0.5s ease-in-out;
      opacity: 0;
    }

    [part='mux-badge'] .mux-badge-logo {
      width: 40px;
      height: auto;
      display: inline-block;
    }

    [part='mux-badge'] .mux-badge-logo svg {
      width: 100%;
      height: 100%;
      fill: white;
    }

    media-controller:not([userinactive]):not([mediahasplayed]) [part='mux-badge'],
    media-controller:not([userinactive]) [part='mux-badge'],
    media-controller[mediahasplayed][mediapaused] [part='mux-badge'] {
      transition: bottom 0.1s ease-in-out;
    }

    media-controller[userinactive]:not([mediapaused]) [part='mux-badge'] {
      transition: bottom 0.2s ease-in-out 0.62s;
    }

    media-controller:not([userinactive]) [part='mux-badge'] .mux-badge-text,
    media-controller[mediahasplayed][mediapaused] [part='mux-badge'] .mux-badge-text {
      opacity: 1;
    }

    media-controller[userinactive]:not([mediapaused]) [part='mux-badge'] .mux-badge-text {
      opacity: 0;
    }

    media-controller[userinactive]:not([mediapaused]) [part='mux-badge'] {
      bottom: 10px;
    }

    media-controller:not([userinactive]):not([mediahasplayed]) [part='mux-badge'] {
      bottom: 10px;
    }

    media-controller:not([userinactive])[mediahasplayed] [part='mux-badge'],
    media-controller[mediahasplayed][mediapaused] [part='mux-badge'] {
      bottom: calc(28px + var(--media-control-height, 0px) + var(--media-control-padding, 0px) * 2);
    }
  </style>

  <template partial="TitleDisplay">
    <template if="videotitle">
      <template if="videotitle != true">
        <media-text-display part="top title display" class="title-display">{{videotitle}}</media-text-display>
      </template>
    </template>
    <template if="!videotitle">
      <template if="title">
        <media-text-display part="top title display" class="title-display">{{title}}</media-text-display>
      </template>
    </template>
  </template>

  <template partial="PlayButton">
    <media-play-button
      part="{{section ?? 'bottom'}} play button"
      disabled="{{disabled}}"
      aria-disabled="{{disabled}}"
      class="animated"
    >
      <svg aria-hidden="true" viewBox="0 0 18 14" slot="icon">
        <g class="play-icon">
          <path
            d="M15.5987 6.2911L3.45577 0.110898C2.83667 -0.204202 2.06287 0.189698 2.06287 0.819798V13.1802C2.06287 13.8103 2.83667 14.2042 3.45577 13.8891L15.5987 7.7089C16.2178 7.3938 16.2178 6.6061 15.5987 6.2911Z"
          />
        </g>
        <g class="pause-icon">
          <path
            class="pause-icon-pt1"
            d="M5.90709 0H2.96889C2.46857 0 2.06299 0.405585 2.06299 0.9059V13.0941C2.06299 13.5944 2.46857 14 2.96889 14H5.90709C6.4074 14 6.81299 13.5944 6.81299 13.0941V0.9059C6.81299 0.405585 6.4074 0 5.90709 0Z"
          />
          <path
            class="pause-icon-pt2"
            d="M15.1571 0H12.2189C11.7186 0 11.313 0.405585 11.313 0.9059V13.0941C11.313 13.5944 11.7186 14 12.2189 14H15.1571C15.6574 14 16.063 13.5944 16.063 13.0941V0.9059C16.063 0.405585 15.6574 0 15.1571 0Z"
          />
        </g>
      </svg>
    </media-play-button>
  </template>

  <template partial="PrePlayButton">
    <media-play-button
      part="{{section ?? 'center'}} play button pre-play"
      disabled="{{disabled}}"
      aria-disabled="{{disabled}}"
    >
      <svg aria-hidden="true" viewBox="0 0 18 14" slot="icon" style="transform: translate(3px, 0)">
        <path
          d="M15.5987 6.2911L3.45577 0.110898C2.83667 -0.204202 2.06287 0.189698 2.06287 0.819798V13.1802C2.06287 13.8103 2.83667 14.2042 3.45577 13.8891L15.5987 7.7089C16.2178 7.3938 16.2178 6.6061 15.5987 6.2911Z"
        />
      </svg>
    </media-play-button>
  </template>

  <template partial="SeekBackwardButton">
    <media-seek-backward-button
      seekoffset="{{backwardseekoffset}}"
      part="{{section ?? 'bottom'}} seek-backward button"
      disabled="{{disabled}}"
      aria-disabled="{{disabled}}"
    >
      <svg viewBox="0 0 22 14" aria-hidden="true" slot="icon">
        <path
          d="M3.65 2.07888L0.0864 6.7279C-0.0288 6.87812 -0.0288 7.12188 0.0864 7.2721L3.65 11.9211C3.7792 12.0896 4 11.9703 4 11.7321V2.26787C4 2.02968 3.7792 1.9104 3.65 2.07888Z"
        />
        <text transform="translate(6 12)" style="font-size: 14px; font-family: 'ArialMT', 'Arial'">
          {{backwardseekoffset}}
        </text>
      </svg>
    </media-seek-backward-button>
  </template>

  <template partial="SeekForwardButton">
    <media-seek-forward-button
      seekoffset="{{forwardseekoffset}}"
      part="{{section ?? 'bottom'}} seek-forward button"
      disabled="{{disabled}}"
      aria-disabled="{{disabled}}"
    >
      <svg viewBox="0 0 22 14" aria-hidden="true" slot="icon">
        <g>
          <text transform="translate(-1 12)" style="font-size: 14px; font-family: 'ArialMT', 'Arial'">
            {{forwardseekoffset}}
          </text>
          <path
            d="M18.35 11.9211L21.9136 7.2721C22.0288 7.12188 22.0288 6.87812 21.9136 6.7279L18.35 2.07888C18.2208 1.91041 18 2.02968 18 2.26787V11.7321C18 11.9703 18.2208 12.0896 18.35 11.9211Z"
          />
        </g>
      </svg>
    </media-seek-forward-button>
  </template>

  <template partial="MuteButton">
    <media-mute-button part="bottom mute button" disabled="{{disabled}}" aria-disabled="{{disabled}}">
      <svg viewBox="0 0 18 14" slot="icon" class="mute-icon" aria-hidden="true">
        <g class="unmuted">
          <path
            d="M6.76786 1.21233L3.98606 3.98924H1.19937C0.593146 3.98924 0.101743 4.51375 0.101743 5.1607V6.96412L0 6.99998L0.101743 7.03583V8.83926C0.101743 9.48633 0.593146 10.0108 1.19937 10.0108H3.98606L6.76773 12.7877C7.23561 13.2547 8 12.9007 8 12.2171V1.78301C8 1.09925 7.23574 0.745258 6.76786 1.21233Z"
          />
          <path
            class="volume-low"
            d="M10 3.54781C10.7452 4.55141 11.1393 5.74511 11.1393 6.99991C11.1393 8.25471 10.7453 9.44791 10 10.4515L10.7988 11.0496C11.6734 9.87201 12.1356 8.47161 12.1356 6.99991C12.1356 5.52821 11.6735 4.12731 10.7988 2.94971L10 3.54781Z"
          />
          <path
            class="volume-medium"
            d="M12.3778 2.40086C13.2709 3.76756 13.7428 5.35806 13.7428 7.00026C13.7428 8.64246 13.2709 10.233 12.3778 11.5992L13.2106 12.1484C14.2107 10.6185 14.739 8.83796 14.739 7.00016C14.739 5.16236 14.2107 3.38236 13.2106 1.85156L12.3778 2.40086Z"
          />
          <path
            class="volume-high"
            d="M15.5981 0.75L14.7478 1.2719C15.7937 2.9919 16.3468 4.9723 16.3468 7C16.3468 9.0277 15.7937 11.0082 14.7478 12.7281L15.5981 13.25C16.7398 11.3722 17.343 9.211 17.343 7C17.343 4.789 16.7398 2.6268 15.5981 0.75Z"
          />
        </g>
        <g class="muted">
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M4.39976 4.98924H1.19937C1.19429 4.98924 1.17777 4.98961 1.15296 5.01609C1.1271 5.04369 1.10174 5.09245 1.10174 5.1607V8.83926C1.10174 8.90761 1.12714 8.95641 1.15299 8.984C1.17779 9.01047 1.1943 9.01084 1.19937 9.01084H4.39977L7 11.6066V2.39357L4.39976 4.98924ZM7.47434 1.92006C7.4743 1.9201 7.47439 1.92002 7.47434 1.92006V1.92006ZM6.76773 12.7877L3.98606 10.0108H1.19937C0.593146 10.0108 0.101743 9.48633 0.101743 8.83926V7.03583L0 6.99998L0.101743 6.96412V5.1607C0.101743 4.51375 0.593146 3.98924 1.19937 3.98924H3.98606L6.76786 1.21233C7.23574 0.745258 8 1.09925 8 1.78301V12.2171C8 12.9007 7.23561 13.2547 6.76773 12.7877Z"
          />
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M15.2677 9.30323C15.463 9.49849 15.7796 9.49849 15.9749 9.30323C16.1701 9.10796 16.1701 8.79138 15.9749 8.59612L14.2071 6.82841L15.9749 5.06066C16.1702 4.8654 16.1702 4.54882 15.9749 4.35355C15.7796 4.15829 15.4631 4.15829 15.2678 4.35355L13.5 6.1213L11.7322 4.35348C11.537 4.15822 11.2204 4.15822 11.0251 4.35348C10.8298 4.54874 10.8298 4.86532 11.0251 5.06058L12.7929 6.82841L11.0251 8.59619C10.8299 8.79146 10.8299 9.10804 11.0251 9.3033C11.2204 9.49856 11.537 9.49856 11.7323 9.3033L13.5 7.53552L15.2677 9.30323Z"
          />
        </g>
      </svg>
    </media-mute-button>
  </template>

  <template partial="PipButton">
    <media-pip-button part="bottom pip button" disabled="{{disabled}}" aria-disabled="{{disabled}}">
      <svg viewBox="0 0 18 14" aria-hidden="true" slot="icon">
        <path
          d="M15.9891 0H2.011C0.9004 0 0 0.9003 0 2.0109V11.989C0 13.0996 0.9004 14 2.011 14H15.9891C17.0997 14 18 13.0997 18 11.9891V2.0109C18 0.9003 17.0997 0 15.9891 0ZM17 11.9891C17 12.5465 16.5465 13 15.9891 13H2.011C1.4536 13 1.0001 12.5465 1.0001 11.9891V2.0109C1.0001 1.4535 1.4536 0.9999 2.011 0.9999H15.9891C16.5465 0.9999 17 1.4535 17 2.0109V11.9891Z"
        />
        <path
          d="M15.356 5.67822H8.19523C8.03253 5.67822 7.90063 5.81012 7.90063 5.97282V11.3836C7.90063 11.5463 8.03253 11.6782 8.19523 11.6782H15.356C15.5187 11.6782 15.6506 11.5463 15.6506 11.3836V5.97282C15.6506 5.81012 15.5187 5.67822 15.356 5.67822Z"
        />
      </svg>
    </media-pip-button>
  </template>

  <template partial="CaptionsMenu">
    <media-captions-menu-button part="bottom captions button">
      <svg aria-hidden="true" viewBox="0 0 18 14" slot="on">
        <path
          d="M15.989 0H2.011C0.9004 0 0 0.9003 0 2.0109V11.9891C0 13.0997 0.9004 14 2.011 14H15.989C17.0997 14 18 13.0997 18 11.9891V2.0109C18 0.9003 17.0997 0 15.989 0ZM4.2292 8.7639C4.5954 9.1902 5.0935 9.4031 5.7233 9.4031C6.1852 9.4031 6.5544 9.301 6.8302 9.0969C7.1061 8.8933 7.2863 8.614 7.3702 8.26H8.4322C8.3062 8.884 8.0093 9.3733 7.5411 9.7273C7.0733 10.0813 6.4703 10.2581 5.732 10.2581C5.108 10.2581 4.5699 10.1219 4.1168 9.8489C3.6637 9.5759 3.3141 9.1946 3.0685 8.7058C2.8224 8.2165 2.6994 7.6511 2.6994 7.009C2.6994 6.3611 2.8224 5.7927 3.0685 5.3034C3.3141 4.8146 3.6637 4.4323 4.1168 4.1559C4.5699 3.88 5.108 3.7418 5.732 3.7418C6.4703 3.7418 7.0733 3.922 7.5411 4.2818C8.0094 4.6422 8.3062 5.1461 8.4322 5.794H7.3702C7.2862 5.4283 7.106 5.1368 6.8302 4.921C6.5544 4.7052 6.1852 4.5968 5.7233 4.5968C5.0934 4.5968 4.5954 4.8116 4.2292 5.2404C3.8635 5.6696 3.6804 6.259 3.6804 7.009C3.6804 7.7531 3.8635 8.3381 4.2292 8.7639ZM11.0974 8.7639C11.4636 9.1902 11.9617 9.4031 12.5915 9.4031C13.0534 9.4031 13.4226 9.301 13.6984 9.0969C13.9743 8.8933 14.1545 8.614 14.2384 8.26H15.3004C15.1744 8.884 14.8775 9.3733 14.4093 9.7273C13.9415 10.0813 13.3385 10.2581 12.6002 10.2581C11.9762 10.2581 11.4381 10.1219 10.985 9.8489C10.5319 9.5759 10.1823 9.1946 9.9367 8.7058C9.6906 8.2165 9.5676 7.6511 9.5676 7.009C9.5676 6.3611 9.6906 5.7927 9.9367 5.3034C10.1823 4.8146 10.5319 4.4323 10.985 4.1559C11.4381 3.88 11.9762 3.7418 12.6002 3.7418C13.3385 3.7418 13.9415 3.922 14.4093 4.2818C14.8776 4.6422 15.1744 5.1461 15.3004 5.794H14.2384C14.1544 5.4283 13.9742 5.1368 13.6984 4.921C13.4226 4.7052 13.0534 4.5968 12.5915 4.5968C11.9616 4.5968 11.4636 4.8116 11.0974 5.2404C10.7317 5.6696 10.5486 6.259 10.5486 7.009C10.5486 7.7531 10.7317 8.3381 11.0974 8.7639Z"
        />
      </svg>
      <svg aria-hidden="true" viewBox="0 0 18 14" slot="off">
        <path
          d="M5.73219 10.258C5.10819 10.258 4.57009 10.1218 4.11699 9.8488C3.66389 9.5758 3.31429 9.1945 3.06869 8.7057C2.82259 8.2164 2.69958 7.651 2.69958 7.0089C2.69958 6.361 2.82259 5.7926 3.06869 5.3033C3.31429 4.8145 3.66389 4.4322 4.11699 4.1558C4.57009 3.8799 5.10819 3.7417 5.73219 3.7417C6.47049 3.7417 7.07348 3.9219 7.54128 4.2817C8.00958 4.6421 8.30638 5.146 8.43238 5.7939H7.37039C7.28639 5.4282 7.10618 5.1367 6.83039 4.9209C6.55459 4.7051 6.18538 4.5967 5.72348 4.5967C5.09358 4.5967 4.59559 4.8115 4.22939 5.2403C3.86369 5.6695 3.68058 6.2589 3.68058 7.0089C3.68058 7.753 3.86369 8.338 4.22939 8.7638C4.59559 9.1901 5.09368 9.403 5.72348 9.403C6.18538 9.403 6.55459 9.3009 6.83039 9.0968C7.10629 8.8932 7.28649 8.6139 7.37039 8.2599H8.43238C8.30638 8.8839 8.00948 9.3732 7.54128 9.7272C7.07348 10.0812 6.47049 10.258 5.73219 10.258Z"
        />
        <path
          d="M12.6003 10.258C11.9763 10.258 11.4382 10.1218 10.9851 9.8488C10.532 9.5758 10.1824 9.1945 9.93685 8.7057C9.69075 8.2164 9.56775 7.651 9.56775 7.0089C9.56775 6.361 9.69075 5.7926 9.93685 5.3033C10.1824 4.8145 10.532 4.4322 10.9851 4.1558C11.4382 3.8799 11.9763 3.7417 12.6003 3.7417C13.3386 3.7417 13.9416 3.9219 14.4094 4.2817C14.8777 4.6421 15.1745 5.146 15.3005 5.7939H14.2385C14.1545 5.4282 13.9743 5.1367 13.6985 4.9209C13.4227 4.7051 13.0535 4.5967 12.5916 4.5967C11.9617 4.5967 11.4637 4.8115 11.0975 5.2403C10.7318 5.6695 10.5487 6.2589 10.5487 7.0089C10.5487 7.753 10.7318 8.338 11.0975 8.7638C11.4637 9.1901 11.9618 9.403 12.5916 9.403C13.0535 9.403 13.4227 9.3009 13.6985 9.0968C13.9744 8.8932 14.1546 8.6139 14.2385 8.2599H15.3005C15.1745 8.8839 14.8776 9.3732 14.4094 9.7272C13.9416 10.0812 13.3386 10.258 12.6003 10.258Z"
        />
        <path
          d="M15.9891 1C16.5465 1 17 1.4535 17 2.011V11.9891C17 12.5465 16.5465 13 15.9891 13H2.0109C1.4535 13 1 12.5465 1 11.9891V2.0109C1 1.4535 1.4535 0.9999 2.0109 0.9999L15.9891 1ZM15.9891 0H2.0109C0.9003 0 0 0.9003 0 2.0109V11.9891C0 13.0997 0.9003 14 2.0109 14H15.9891C17.0997 14 18 13.0997 18 11.9891V2.0109C18 0.9003 17.0997 0 15.9891 0Z"
        />
      </svg>
    </media-captions-menu-button>
    <media-captions-menu
      hidden
      anchor="auto"
      part="bottom captions menu"
      disabled="{{disabled}}"
      aria-disabled="{{disabled}}"
      exportparts="menu-item"
    >
      <div slot="checked-indicator">
        <style>
          .indicator {
            position: relative;
            top: 1px;
            width: 0.9em;
            height: auto;
            fill: var(--_accent-color);
            margin-right: 5px;
          }

          [aria-checked='false'] .indicator {
            display: none;
          }
        </style>
        <svg viewBox="0 0 14 18" class="indicator">
          <path
            d="M12.252 3.48c-.115.033-.301.161-.425.291-.059.063-1.407 1.815-2.995 3.894s-2.897 3.79-2.908 3.802c-.013.014-.661-.616-1.672-1.624-.908-.905-1.702-1.681-1.765-1.723-.401-.27-.783-.211-1.176.183a1.285 1.285 0 0 0-.261.342.582.582 0 0 0-.082.35c0 .165.01.205.08.35.075.153.213.296 2.182 2.271 1.156 1.159 2.17 2.159 2.253 2.222.189.143.338.196.539.194.203-.003.412-.104.618-.299.205-.193 6.7-8.693 6.804-8.903a.716.716 0 0 0 .085-.345c.01-.179.005-.203-.062-.339-.124-.252-.45-.531-.746-.639a.784.784 0 0 0-.469-.027"
            fill-rule="evenodd"
          />
        </svg></div
    ></media-captions-menu>
  </template>

  <template partial="AirplayButton">
    <media-airplay-button part="bottom airplay button" disabled="{{disabled}}" aria-disabled="{{disabled}}">
      <svg viewBox="0 0 18 14" aria-hidden="true" slot="icon">
        <path
          d="M16.1383 0H1.8618C0.8335 0 0 0.8335 0 1.8617V10.1382C0 11.1664 0.8335 12 1.8618 12H3.076C3.1204 11.9433 3.1503 11.8785 3.2012 11.826L4.004 11H1.8618C1.3866 11 1 10.6134 1 10.1382V1.8617C1 1.3865 1.3866 0.9999 1.8618 0.9999H16.1383C16.6135 0.9999 17.0001 1.3865 17.0001 1.8617V10.1382C17.0001 10.6134 16.6135 11 16.1383 11H13.9961L14.7989 11.826C14.8499 11.8785 14.8798 11.9432 14.9241 12H16.1383C17.1665 12 18.0001 11.1664 18.0001 10.1382V1.8617C18 0.8335 17.1665 0 16.1383 0Z"
        />
        <path
          d="M9.55061 8.21903C9.39981 8.06383 9.20001 7.98633 9.00011 7.98633C8.80021 7.98633 8.60031 8.06383 8.44951 8.21903L4.09771 12.697C3.62471 13.1838 3.96961 13.9998 4.64831 13.9998H13.3518C14.0304 13.9998 14.3754 13.1838 13.9023 12.697L9.55061 8.21903Z"
        />
      </svg>
    </media-airplay-button>
  </template>

  <template partial="FullscreenButton">
    <media-fullscreen-button part="bottom fullscreen button" disabled="{{disabled}}" aria-disabled="{{disabled}}">
      <svg viewBox="0 0 18 14" aria-hidden="true" slot="enter">
        <path
          d="M1.00745 4.39539L1.01445 1.98789C1.01605 1.43049 1.47085 0.978289 2.02835 0.979989L6.39375 0.992589L6.39665 -0.007411L2.03125 -0.020011C0.920646 -0.023211 0.0176463 0.874489 0.0144463 1.98509L0.00744629 4.39539H1.00745Z"
        />
        <path
          d="M17.0144 2.03431L17.0076 4.39541H18.0076L18.0144 2.03721C18.0176 0.926712 17.1199 0.0237125 16.0093 0.0205125L11.6439 0.0078125L11.641 1.00781L16.0064 1.02041C16.5638 1.02201 17.016 1.47681 17.0144 2.03431Z"
        />
        <path
          d="M16.9925 9.60498L16.9855 12.0124C16.9839 12.5698 16.5291 13.022 15.9717 13.0204L11.6063 13.0078L11.6034 14.0078L15.9688 14.0204C17.0794 14.0236 17.9823 13.1259 17.9855 12.0153L17.9925 9.60498H16.9925Z"
        />
        <path
          d="M0.985626 11.9661L0.992426 9.60498H-0.0074737L-0.0142737 11.9632C-0.0174737 13.0738 0.880226 13.9767 1.99083 13.98L6.35623 13.9926L6.35913 12.9926L1.99373 12.98C1.43633 12.9784 0.983926 12.5236 0.985626 11.9661Z"
        />
      </svg>
      <svg viewBox="0 0 18 14" aria-hidden="true" slot="exit">
        <path
          d="M5.39655 -0.0200195L5.38955 2.38748C5.38795 2.94488 4.93315 3.39708 4.37565 3.39538L0.0103463 3.38278L0.00744629 4.38278L4.37285 4.39538C5.48345 4.39858 6.38635 3.50088 6.38965 2.39028L6.39665 -0.0200195H5.39655Z"
        />
        <path
          d="M12.6411 2.36891L12.6479 0.0078125H11.6479L11.6411 2.36601C11.6379 3.47651 12.5356 4.37951 13.6462 4.38271L18.0116 4.39531L18.0145 3.39531L13.6491 3.38271C13.0917 3.38111 12.6395 2.92641 12.6411 2.36891Z"
        />
        <path
          d="M12.6034 14.0204L12.6104 11.613C12.612 11.0556 13.0668 10.6034 13.6242 10.605L17.9896 10.6176L17.9925 9.61759L13.6271 9.60499C12.5165 9.60179 11.6136 10.4995 11.6104 11.6101L11.6034 14.0204H12.6034Z"
        />
        <path
          d="M5.359 11.6315L5.3522 13.9926H6.3522L6.359 11.6344C6.3622 10.5238 5.4645 9.62088 4.3539 9.61758L-0.0115043 9.60498L-0.0144043 10.605L4.351 10.6176C4.9084 10.6192 5.3607 11.074 5.359 11.6315Z"
        />
      </svg>
    </media-fullscreen-button>
  </template>

  <template partial="CastButton">
    <media-cast-button part="bottom cast button" disabled="{{disabled}}" aria-disabled="{{disabled}}">
      <svg viewBox="0 0 18 14" aria-hidden="true" slot="enter">
        <path
          d="M16.0072 0H2.0291C0.9185 0 0.0181 0.9003 0.0181 2.011V5.5009C0.357 5.5016 0.6895 5.5275 1.0181 5.5669V2.011C1.0181 1.4536 1.4716 1 2.029 1H16.0072C16.5646 1 17.0181 1.4536 17.0181 2.011V11.9891C17.0181 12.5465 16.5646 13 16.0072 13H8.4358C8.4746 13.3286 8.4999 13.6611 8.4999 13.9999H16.0071C17.1177 13.9999 18.018 13.0996 18.018 11.989V2.011C18.0181 0.9003 17.1178 0 16.0072 0ZM0 6.4999V7.4999C3.584 7.4999 6.5 10.4159 6.5 13.9999H7.5C7.5 9.8642 4.1357 6.4999 0 6.4999ZM0 8.7499V9.7499C2.3433 9.7499 4.25 11.6566 4.25 13.9999H5.25C5.25 11.1049 2.895 8.7499 0 8.7499ZM0.0181 11V14H3.0181C3.0181 12.3431 1.675 11 0.0181 11Z"
        />
      </svg>
      <svg viewBox="0 0 18 14" aria-hidden="true" slot="exit">
        <path
          d="M15.9891 0H2.01103C0.900434 0 3.35947e-05 0.9003 3.35947e-05 2.011V5.5009C0.338934 5.5016 0.671434 5.5275 1.00003 5.5669V2.011C1.00003 1.4536 1.45353 1 2.01093 1H15.9891C16.5465 1 17 1.4536 17 2.011V11.9891C17 12.5465 16.5465 13 15.9891 13H8.41773C8.45653 13.3286 8.48183 13.6611 8.48183 13.9999H15.989C17.0996 13.9999 17.9999 13.0996 17.9999 11.989V2.011C18 0.9003 17.0997 0 15.9891 0ZM-0.0180664 6.4999V7.4999C3.56593 7.4999 6.48193 10.4159 6.48193 13.9999H7.48193C7.48193 9.8642 4.11763 6.4999 -0.0180664 6.4999ZM-0.0180664 8.7499V9.7499C2.32523 9.7499 4.23193 11.6566 4.23193 13.9999H5.23193C5.23193 11.1049 2.87693 8.7499 -0.0180664 8.7499ZM3.35947e-05 11V14H3.00003C3.00003 12.3431 1.65693 11 3.35947e-05 11Z"
        />
        <path d="M2.15002 5.634C5.18352 6.4207 7.57252 8.8151 8.35282 11.8499H15.8501V2.1499H2.15002V5.634Z" />
      </svg>
    </media-cast-button>
  </template>

  <template partial="LiveButton">
    <media-live-button part="{{section ?? 'top'}} live button" disabled="{{disabled}}" aria-disabled="{{disabled}}">
      <span slot="text">Live</span>
    </media-live-button>
  </template>

  <template partial="PlaybackRateMenu">
    <media-playback-rate-menu-button part="bottom playback-rate button"></media-playback-rate-menu-button>
    <media-playback-rate-menu
      hidden
      anchor="auto"
      rates="{{playbackrates}}"
      exportparts="menu-item"
      part="bottom playback-rate menu"
      disabled="{{disabled}}"
      aria-disabled="{{disabled}}"
    ></media-playback-rate-menu>
  </template>

  <template partial="VolumeRange">
    <media-volume-range
      part="bottom volume range"
      disabled="{{disabled}}"
      aria-disabled="{{disabled}}"
    ></media-volume-range>
  </template>

  <template partial="TimeDisplay">
    <media-time-display
      remaining="{{defaultshowremainingtime}}"
      showduration="{{!hideduration}}"
      part="bottom time display"
      disabled="{{disabled}}"
      aria-disabled="{{disabled}}"
    ></media-time-display>
  </template>

  <template partial="TimeRange">
    <media-time-range part="bottom time range" disabled="{{disabled}}" aria-disabled="{{disabled}}" exportparts="thumb">
      <media-preview-thumbnail slot="preview"></media-preview-thumbnail>
      <media-preview-chapter-display slot="preview"></media-preview-chapter-display>
      <media-preview-time-display slot="preview"></media-preview-time-display>
      <div slot="preview" part="arrow"></div>
    </media-time-range>
  </template>

  <template partial="AudioTrackMenu">
    <media-audio-track-menu-button part="bottom audio-track button">
      <svg aria-hidden="true" slot="icon" viewBox="0 0 18 16">
        <path d="M9 15A7 7 0 1 1 9 1a7 7 0 0 1 0 14Zm0 1A8 8 0 1 0 9 0a8 8 0 0 0 0 16Z" />
        <path
          d="M5.2 6.3a.5.5 0 0 1 .5.5v2.4a.5.5 0 1 1-1 0V6.8a.5.5 0 0 1 .5-.5Zm2.4-2.4a.5.5 0 0 1 .5.5v7.2a.5.5 0 0 1-1 0V4.4a.5.5 0 0 1 .5-.5ZM10 5.5a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5Zm2.4-.8a.5.5 0 0 1 .5.5v5.6a.5.5 0 0 1-1 0V5.2a.5.5 0 0 1 .5-.5Z"
        />
      </svg>
    </media-audio-track-menu-button>
    <media-audio-track-menu
      hidden
      anchor="auto"
      part="bottom audio-track menu"
      disabled="{{disabled}}"
      aria-disabled="{{disabled}}"
      exportparts="menu-item"
    >
      <div slot="checked-indicator">
        <style>
          .indicator {
            position: relative;
            top: 1px;
            width: 0.9em;
            height: auto;
            fill: var(--_accent-color);
            margin-right: 5px;
          }

          [aria-checked='false'] .indicator {
            display: none;
          }
        </style>
        <svg viewBox="0 0 14 18" class="indicator">
          <path
            d="M12.252 3.48c-.115.033-.301.161-.425.291-.059.063-1.407 1.815-2.995 3.894s-2.897 3.79-2.908 3.802c-.013.014-.661-.616-1.672-1.624-.908-.905-1.702-1.681-1.765-1.723-.401-.27-.783-.211-1.176.183a1.285 1.285 0 0 0-.261.342.582.582 0 0 0-.082.35c0 .165.01.205.08.35.075.153.213.296 2.182 2.271 1.156 1.159 2.17 2.159 2.253 2.222.189.143.338.196.539.194.203-.003.412-.104.618-.299.205-.193 6.7-8.693 6.804-8.903a.716.716 0 0 0 .085-.345c.01-.179.005-.203-.062-.339-.124-.252-.45-.531-.746-.639a.784.784 0 0 0-.469-.027"
            fill-rule="evenodd"
          />
        </svg>
      </div>
    </media-audio-track-menu>
  </template>

  <template partial="RenditionMenu">
    <media-rendition-menu-button part="bottom rendition button">
      <svg aria-hidden="true" slot="icon" viewBox="0 0 18 14">
        <path
          d="M2.25 9a2 2 0 1 0 0-4 2 2 0 0 0 0 4ZM9 9a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm6.75 0a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z"
        />
      </svg>
    </media-rendition-menu-button>
    <media-rendition-menu
      hidden
      anchor="auto"
      part="bottom rendition menu"
      disabled="{{disabled}}"
      aria-disabled="{{disabled}}"
    >
      <div slot="checked-indicator">
        <style>
          .indicator {
            position: relative;
            top: 1px;
            width: 0.9em;
            height: auto;
            fill: var(--_accent-color);
            margin-right: 5px;
          }

          [aria-checked='false'] .indicator {
            opacity: 0;
          }
        </style>
        <svg viewBox="0 0 14 18" class="indicator">
          <path
            d="M12.252 3.48c-.115.033-.301.161-.425.291-.059.063-1.407 1.815-2.995 3.894s-2.897 3.79-2.908 3.802c-.013.014-.661-.616-1.672-1.624-.908-.905-1.702-1.681-1.765-1.723-.401-.27-.783-.211-1.176.183a1.285 1.285 0 0 0-.261.342.582.582 0 0 0-.082.35c0 .165.01.205.08.35.075.153.213.296 2.182 2.271 1.156 1.159 2.17 2.159 2.253 2.222.189.143.338.196.539.194.203-.003.412-.104.618-.299.205-.193 6.7-8.693 6.804-8.903a.716.716 0 0 0 .085-.345c.01-.179.005-.203-.062-.339-.124-.252-.45-.531-.746-.639a.784.784 0 0 0-.469-.027"
            fill-rule="evenodd"
          />
        </svg>
      </div>
    </media-rendition-menu>
  </template>

  <template partial="MuxBadge">
    <div part="mux-badge">
      <a href="https://www.mux.com/player" target="_blank">
        <span class="mux-badge-text">Powered by</span>
        <div class="mux-badge-logo">
          <svg
            viewBox="0 0 1600 500"
            style="fill-rule: evenodd; clip-rule: evenodd; stroke-linejoin: round; stroke-miterlimit: 2"
          >
            <g>
              <path
                d="M994.287,93.486c-17.121,-0 -31,-13.879 -31,-31c0,-17.121 13.879,-31 31,-31c17.121,-0 31,13.879 31,31c0,17.121 -13.879,31 -31,31m0,-93.486c-34.509,-0 -62.484,27.976 -62.484,62.486l0,187.511c0,68.943 -56.09,125.033 -125.032,125.033c-68.942,-0 -125.03,-56.09 -125.03,-125.033l0,-187.511c0,-34.51 -27.976,-62.486 -62.485,-62.486c-34.509,-0 -62.484,27.976 -62.484,62.486l0,187.511c0,137.853 112.149,250.003 249.999,250.003c137.851,-0 250.001,-112.15 250.001,-250.003l0,-187.511c0,-34.51 -27.976,-62.486 -62.485,-62.486"
                style="fill-rule: nonzero"
              ></path>
              <path
                d="M1537.51,468.511c-17.121,-0 -31,-13.879 -31,-31c0,-17.121 13.879,-31 31,-31c17.121,-0 31,13.879 31,31c0,17.121 -13.879,31 -31,31m-275.883,-218.509l-143.33,143.329c-24.402,24.402 -24.402,63.966 0,88.368c24.402,24.402 63.967,24.402 88.369,-0l143.33,-143.329l143.328,143.329c24.402,24.4 63.967,24.402 88.369,-0c24.403,-24.402 24.403,-63.966 0.001,-88.368l-143.33,-143.329l0.001,-0.004l143.329,-143.329c24.402,-24.402 24.402,-63.965 0,-88.367c-24.402,-24.402 -63.967,-24.402 -88.369,-0l-143.329,143.328l-143.329,-143.328c-24.402,-24.401 -63.967,-24.402 -88.369,-0c-24.402,24.402 -24.402,63.965 0,88.367l143.329,143.329l0,0.004Z"
                style="fill-rule: nonzero"
              ></path>
              <path
                d="M437.511,468.521c-17.121,-0 -31,-13.879 -31,-31c0,-17.121 13.879,-31 31,-31c17.121,-0 31,13.879 31,31c0,17.121 -13.879,31 -31,31m23.915,-463.762c-23.348,-9.672 -50.226,-4.327 -68.096,13.544l-143.331,143.329l-143.33,-143.329c-17.871,-17.871 -44.747,-23.216 -68.096,-13.544c-23.349,9.671 -38.574,32.455 -38.574,57.729l0,375.026c0,34.51 27.977,62.486 62.487,62.486c34.51,-0 62.486,-27.976 62.486,-62.486l0,-224.173l80.843,80.844c24.404,24.402 63.965,24.402 88.369,-0l80.843,-80.844l0,224.173c0,34.51 27.976,62.486 62.486,62.486c34.51,-0 62.486,-27.976 62.486,-62.486l0,-375.026c0,-25.274 -15.224,-48.058 -38.573,-57.729"
                style="fill-rule: nonzero"
              ></path>
            </g>
          </svg>
        </div>
      </a>
    </div>
  </template>

  <media-controller
    part="controller"
    defaultstreamtype="{{defaultstreamtype ?? 'on-demand'}}"
    breakpoints="sm:470"
    gesturesdisabled="{{disabled}}"
    hotkeys="{{hotkeys}}"
    nohotkeys="{{nohotkeys}}"
    novolumepref="{{novolumepref}}"
    audio="{{audio}}"
    noautoseektolive="{{noautoseektolive}}"
    defaultsubtitles="{{defaultsubtitles}}"
    defaultduration="{{defaultduration ?? false}}"
    keyboardforwardseekoffset="{{forwardseekoffset}}"
    keyboardbackwardseekoffset="{{backwardseekoffset}}"
    exportparts="layer, media-layer, poster-layer, vertical-layer, centered-layer, gesture-layer"
    style="--_pre-playback-place:{{preplaybackplace ?? 'center'}}"
  >
    <slot name="media" slot="media"></slot>
    <slot name="poster" slot="poster"></slot>

    <media-loading-indicator slot="centered-chrome" noautohide></media-loading-indicator>

    <template if="!audio">
      <media-error-dialog slot="dialog" noautohide></media-error-dialog>
      <!-- Pre-playback UI -->
      <!-- same for both on-demand and live -->
      <div slot="centered-chrome" class="center-controls pre-playback">
        <template if="!breakpointsm">{{>PlayButton section="center"}}</template>
        <template if="breakpointsm">{{>PrePlayButton section="center"}}</template>
      </div>

      <!-- Mux Badge -->
      <template if="proudlydisplaymuxbadge"> {{>MuxBadge}} </template>

      <!-- Autoplay centered unmute button -->
      <!--
        todo: figure out how show this with available state variables
        needs to show when:
        - autoplay is enabled
        - playback has been successful
        - audio is muted
        - in place / instead of the pre-plaback play button
        - not to show again after user has interacted with this button
          - OR user has interacted with the mute button in the control bar
      -->
      <!--
        There should be a >MuteButton to the left of the "Unmute" text, but a templating bug
        makes it appear even if commented out in the markup, add it back when code is un-commented
      -->
      <!-- <div slot="centered-chrome" class="autoplay-unmute">
        <div role="button" class="autoplay-unmute-btn">Unmute</div>
      </div> -->

      <template if="streamtype == 'on-demand'">
        <template if="breakpointsm">
          <media-control-bar part="control-bar top" slot="top-chrome">{{>TitleDisplay}} </media-control-bar>
        </template>
        {{>TimeRange}}
        <media-control-bar part="control-bar bottom">
          {{>PlayButton}} {{>SeekBackwardButton}} {{>SeekForwardButton}} {{>TimeDisplay}} {{>MuteButton}}
          {{>VolumeRange}}
          <div class="spacer"></div>
          {{>RenditionMenu}} {{>PlaybackRateMenu}} {{>AudioTrackMenu}} {{>CaptionsMenu}} {{>AirplayButton}}
          {{>CastButton}} {{>PipButton}} {{>FullscreenButton}}
        </media-control-bar>
      </template>

      <template if="streamtype == 'live'">
        <media-control-bar part="control-bar top" slot="top-chrome">
          {{>LiveButton}}
          <template if="breakpointsm"> {{>TitleDisplay}} </template>
        </media-control-bar>
        <template if="targetlivewindow > 0">{{>TimeRange}}</template>
        <media-control-bar part="control-bar bottom">
          {{>PlayButton}}
          <template if="targetlivewindow > 0">{{>SeekBackwardButton}} {{>SeekForwardButton}}</template>
          {{>MuteButton}} {{>VolumeRange}}
          <div class="spacer"></div>
          {{>RenditionMenu}} {{>AudioTrackMenu}} {{>CaptionsMenu}} {{>AirplayButton}} {{>CastButton}} {{>PipButton}}
          {{>FullscreenButton}}
        </media-control-bar>
      </template>
    </template>

    <template if="audio">
      <template if="streamtype == 'on-demand'">
        <template if="title">
          <media-control-bar part="control-bar top">{{>TitleDisplay}}</media-control-bar>
        </template>
        <media-control-bar part="control-bar bottom">
          {{>PlayButton}}
          <template if="breakpointsm"> {{>SeekBackwardButton}} {{>SeekForwardButton}} </template>
          {{>MuteButton}}
          <template if="breakpointsm">{{>VolumeRange}}</template>
          {{>TimeDisplay}} {{>TimeRange}}
          <template if="breakpointsm">{{>PlaybackRateMenu}}</template>
          {{>AirplayButton}} {{>CastButton}}
        </media-control-bar>
      </template>

      <template if="streamtype == 'live'">
        <template if="title">
          <media-control-bar part="control-bar top">{{>TitleDisplay}}</media-control-bar>
        </template>
        <media-control-bar part="control-bar bottom">
          {{>PlayButton}} {{>LiveButton section="bottom"}} {{>MuteButton}}
          <template if="breakpointsm">
            {{>VolumeRange}}
            <template if="targetlivewindow > 0"> {{>SeekBackwardButton}} {{>SeekForwardButton}} </template>
          </template>
          <template if="targetlivewindow > 0"> {{>TimeDisplay}} {{>TimeRange}} </template>
          <template if="!targetlivewindow"><div class="spacer"></div></template>
          {{>AirplayButton}} {{>CastButton}}
        </media-control-bar>
      </template>
    </template>

    <slot></slot>
  </media-controller>
</template>
`,VR=CN.createElement("template");"innerHTML"in VR&&(VR.innerHTML=rqe);var DW,MW,ile=class extends ik{};ile.template=(MW=(DW=VR.content)==null?void 0:DW.children)==null?void 0:MW[0];Lm.customElements.get("media-theme-gerwig")||Lm.customElements.define("media-theme-gerwig",ile);var nqe="gerwig",Cp={SRC:"src",POSTER:"poster"},on={STYLE:"style",DEFAULT_HIDDEN_CAPTIONS:"default-hidden-captions",PRIMARY_COLOR:"primary-color",SECONDARY_COLOR:"secondary-color",ACCENT_COLOR:"accent-color",FORWARD_SEEK_OFFSET:"forward-seek-offset",BACKWARD_SEEK_OFFSET:"backward-seek-offset",PLAYBACK_TOKEN:"playback-token",THUMBNAIL_TOKEN:"thumbnail-token",STORYBOARD_TOKEN:"storyboard-token",FULLSCREEN_ELEMENT:"fullscreen-element",DRM_TOKEN:"drm-token",STORYBOARD_SRC:"storyboard-src",THUMBNAIL_TIME:"thumbnail-time",AUDIO:"audio",NOHOTKEYS:"nohotkeys",HOTKEYS:"hotkeys",PLAYBACK_RATES:"playbackrates",DEFAULT_SHOW_REMAINING_TIME:"default-show-remaining-time",DEFAULT_DURATION:"default-duration",TITLE:"title",VIDEO_TITLE:"video-title",PLACEHOLDER:"placeholder",THEME:"theme",DEFAULT_STREAM_TYPE:"default-stream-type",TARGET_LIVE_WINDOW:"target-live-window",EXTRA_SOURCE_PARAMS:"extra-source-params",NO_VOLUME_PREF:"no-volume-pref",NO_MUTED_PREF:"no-muted-pref",CAST_RECEIVER:"cast-receiver",NO_TOOLTIPS:"no-tooltips",PROUDLY_DISPLAY_MUX_BADGE:"proudly-display-mux-badge",DISABLE_PSEUDO_ENDED:"disable-pseudo-ended"},zR=["audio","backwardseekoffset","defaultduration","defaultshowremainingtime","defaultsubtitles","noautoseektolive","disabled","exportparts","forwardseekoffset","hideduration","hotkeys","nohotkeys","playbackrates","defaultstreamtype","streamtype","style","targetlivewindow","template","title","videotitle","novolumepref","nomutedpref","proudlydisplaymuxbadge"];function iqe(t,e){var r,n,i;return{src:!t.playbackId&&t.src,playbackId:t.playbackId,hasSrc:!!t.playbackId||!!t.src||!!t.currentSrc,poster:t.poster,storyboard:((r=t.media)==null?void 0:r.currentSrc)&&t.storyboard,storyboardSrc:t.getAttribute(on.STORYBOARD_SRC),fullscreenElement:t.getAttribute(on.FULLSCREEN_ELEMENT),placeholder:t.getAttribute("placeholder"),themeTemplate:aqe(t),thumbnailTime:!t.tokens.thumbnail&&t.thumbnailTime,autoplay:t.autoplay,crossOrigin:t.crossOrigin,loop:t.loop,noHotKeys:t.hasAttribute(on.NOHOTKEYS),hotKeys:t.getAttribute(on.HOTKEYS),muted:t.muted,paused:t.paused,preload:t.preload,envKey:t.envKey,preferCmcd:t.preferCmcd,debug:t.debug,disableTracking:t.disableTracking,disableCookies:t.disableCookies,tokens:t.tokens,beaconCollectionDomain:t.beaconCollectionDomain,maxResolution:t.maxResolution,minResolution:t.minResolution,maxAutoResolution:t.maxAutoResolution,programStartTime:t.programStartTime,programEndTime:t.programEndTime,assetStartTime:t.assetStartTime,assetEndTime:t.assetEndTime,renditionOrder:t.renditionOrder,metadata:t.metadata,playerInitTime:t.playerInitTime,playerSoftwareName:t.playerSoftwareName,playerSoftwareVersion:t.playerSoftwareVersion,startTime:t.startTime,preferPlayback:t.preferPlayback,audio:t.audio,defaultStreamType:t.defaultStreamType,targetLiveWindow:t.getAttribute(ur.TARGET_LIVE_WINDOW),streamType:JU(t.getAttribute(ur.STREAM_TYPE)),primaryColor:t.getAttribute(on.PRIMARY_COLOR),secondaryColor:t.getAttribute(on.SECONDARY_COLOR),accentColor:t.getAttribute(on.ACCENT_COLOR),forwardSeekOffset:t.forwardSeekOffset,backwardSeekOffset:t.backwardSeekOffset,defaultHiddenCaptions:t.defaultHiddenCaptions,defaultDuration:t.defaultDuration,defaultShowRemainingTime:t.defaultShowRemainingTime,hideDuration:oqe(t),playbackRates:t.getAttribute(on.PLAYBACK_RATES),customDomain:(n=t.getAttribute(ur.CUSTOM_DOMAIN))!=null?n:void 0,title:t.getAttribute(on.TITLE),videoTitle:(i=t.getAttribute(on.VIDEO_TITLE))!=null?i:t.getAttribute(on.TITLE),novolumepref:t.hasAttribute(on.NO_VOLUME_PREF),nomutedpref:t.hasAttribute(on.NO_MUTED_PREF),proudlyDisplayMuxBadge:t.hasAttribute(on.PROUDLY_DISPLAY_MUX_BADGE),castReceiver:t.castReceiver,disablePseudoEnded:t.hasAttribute(on.DISABLE_PSEUDO_ENDED),capRenditionToPlayerSize:t.capRenditionToPlayerSize,...e,extraSourceParams:t.extraSourceParams}}var sqe=qae.formatErrorMessage;qae.formatErrorMessage=t=>{var e,r;if(t instanceof ii){let n=eqe(t,!1);return`
      ${n!=null&&n.title?`<h3>${n.title}</h3>`:""}
      ${n!=null&&n.message||n!=null&&n.linkUrl?`<p>
        ${n?.message}
        ${n!=null&&n.linkUrl?`<a
              href="${n.linkUrl}"
              target="_blank"
              rel="external noopener"
              aria-label="${(e=n.linkText)!=null?e:""} ${Ki("(opens in a new window)")}"
              >${(r=n.linkText)!=null?r:n.linkUrl}</a
            >`:""}
      </p>`:""}
    `}return sqe(t)};function aqe(t){var e,r;let n=t.theme;if(n){let i=(r=(e=t.getRootNode())==null?void 0:e.getElementById)==null?void 0:r.call(e,n);if(i&&i instanceof HTMLTemplateElement)return i;n.startsWith("media-theme-")||(n=`media-theme-${n}`);let s=Lm.customElements.get(n);if(s!=null&&s.template)return s.template}}function oqe(t){var e;let r=(e=t.mediaController)==null?void 0:e.querySelector("media-time-display");return r&&getComputedStyle(r).getPropertyValue("--media-duration-display-display").trim()==="none"}function FW(t){let e=t.videoTitle?{video_title:t.videoTitle}:{};return t.getAttributeNames().filter(r=>r.startsWith("metadata-")).reduce((r,n)=>{let i=t.getAttribute(n);return i!==null&&(r[n.replace(/^metadata-/,"").replace(/-/g,"_")]=i),r},e)}var lqe=Object.values(ur),cqe=Object.values(Cp),uqe=Object.values(on),UW=Zoe(),$W="mux-player",HW={isDialogOpen:!1},dqe={redundant_streams:!0},vC,yC,xC,jv,bC,Tb,Lc,s0,sle,KR,Nv,QW,VW,zW,KW,hqe=class extends BW{constructor(){super(),jA(this,Lc),jA(this,vC),jA(this,yC,!1),jA(this,xC,{}),jA(this,jv,!0),jA(this,bC,new NYe(this,"hotkeys")),jA(this,Tb,{...HW,onCloseErrorDialog:t=>{var e;((e=t.composedPath()[0])==null?void 0:e.localName)==="media-error-dialog"&&pu(this,Lc,KR).call(this,{isDialogOpen:!1})},onFocusInErrorDialog:t=>{var e;((e=t.composedPath()[0])==null?void 0:e.localName)==="media-error-dialog"&&(qoe(this,CN.activeElement)||t.preventDefault())}}),Qm(this,vC,UF()),this.attachShadow({mode:"open"}),pu(this,Lc,sle).call(this),this.isConnected&&pu(this,Lc,s0).call(this)}static get NAME(){return $W}static get VERSION(){return UW}static get observedAttributes(){var t;return[...(t=BW.observedAttributes)!=null?t:[],...cqe,...lqe,...uqe]}get mediaTheme(){var t;return(t=this.shadowRoot)==null?void 0:t.querySelector("media-theme")}get mediaController(){var t,e;return(e=(t=this.mediaTheme)==null?void 0:t.shadowRoot)==null?void 0:e.querySelector("media-controller")}connectedCallback(){let t=this.media;t&&(t.metadata=FW(this))}attributeChangedCallback(t,e,r){switch(pu(this,Lc,s0).call(this),super.attributeChangedCallback(t,e,r),t){case on.HOTKEYS:Fo(this,bC).value=r;break;case on.THUMBNAIL_TIME:{r!=null&&this.tokens.thumbnail&&Bp(Ki("Use of thumbnail-time with thumbnail-token is currently unsupported. Ignore thumbnail-time.").toString());break}case on.THUMBNAIL_TOKEN:{if(r){let n=vb(r);if(n){let{aud:i}=n,s=lE.THUMBNAIL;i!==s&&Bp(Ki("The {tokenNamePrefix}-token has an incorrect aud value: {aud}. aud value should be {expectedAud}.").format({aud:i,expectedAud:s,tokenNamePrefix:"thumbnail"}))}}break}case on.STORYBOARD_TOKEN:{if(r){let n=vb(r);if(n){let{aud:i}=n,s=lE.STORYBOARD;i!==s&&Bp(Ki("The {tokenNamePrefix}-token has an incorrect aud value: {aud}. aud value should be {expectedAud}.").format({aud:i,expectedAud:s,tokenNamePrefix:"storyboard"}))}}break}case on.DRM_TOKEN:{if(r){let n=vb(r);if(n){let{aud:i}=n,s=lE.DRM;i!==s&&Bp(Ki("The {tokenNamePrefix}-token has an incorrect aud value: {aud}. aud value should be {expectedAud}.").format({aud:i,expectedAud:s,tokenNamePrefix:"drm"}))}}break}case ur.PLAYBACK_ID:{r!=null&&r.includes("?token")&&df(Ki("The specificed playback ID {playbackId} contains a token which must be provided via the playback-token attribute.").format({playbackId:r}));break}case ur.STREAM_TYPE:{r&&![Io.LIVE,Io.ON_DEMAND,Io.UNKNOWN].includes(r)?["ll-live","live:dvr","ll-live:dvr"].includes(this.streamType)?this.targetLiveWindow=r.includes("dvr")?Number.POSITIVE_INFINITY:0:ele({file:"invalid-stream-type.md",message:Ki("Invalid stream-type value supplied: `{streamType}`. Please provide stream-type as either: `on-demand` or `live`").format({streamType:this.streamType})}):r===Io.LIVE?this.getAttribute(on.TARGET_LIVE_WINDOW)==null&&(this.targetLiveWindow=0):this.targetLiveWindow=Number.NaN;break}case on.FULLSCREEN_ELEMENT:{if(r!=null||r!==e){let n=CN.getElementById(r),i=n?.querySelector("mux-player");this.mediaController&&n&&i&&(this.mediaController.fullscreenElement=n)}break}case ur.CAP_RENDITION_TO_PLAYER_SIZE:{(r==null||r!==e)&&(this.capRenditionToPlayerSize=r!=null?!0:void 0);break}}[ur.PLAYBACK_ID,Cp.SRC,on.PLAYBACK_TOKEN].includes(t)&&e!==r&&Qm(this,Tb,{...Fo(this,Tb),...HW}),pu(this,Lc,Nv).call(this,{[jYe(t)]:r})}async requestFullscreen(t){var e;if(!(!this.mediaController||this.mediaController.hasAttribute(At.MEDIA_IS_FULLSCREEN)))return(e=this.mediaController)==null||e.dispatchEvent(new Lm.CustomEvent(zn.MEDIA_ENTER_FULLSCREEN_REQUEST,{composed:!0,bubbles:!0})),new Promise((r,n)=>{var i;(i=this.mediaController)==null||i.addEventListener(ng.MEDIA_IS_FULLSCREEN,()=>r(),{once:!0})})}async exitFullscreen(){var t;if(!(!this.mediaController||!this.mediaController.hasAttribute(At.MEDIA_IS_FULLSCREEN)))return(t=this.mediaController)==null||t.dispatchEvent(new Lm.CustomEvent(zn.MEDIA_EXIT_FULLSCREEN_REQUEST,{composed:!0,bubbles:!0})),new Promise((e,r)=>{var n;(n=this.mediaController)==null||n.addEventListener(ng.MEDIA_IS_FULLSCREEN,()=>e(),{once:!0})})}get preferCmcd(){var t;return(t=this.getAttribute(ur.PREFER_CMCD))!=null?t:void 0}set preferCmcd(t){t!==this.preferCmcd&&(t?tN.includes(t)?this.setAttribute(ur.PREFER_CMCD,t):Bp(`Invalid value for preferCmcd. Must be one of ${tN.join()}`):this.removeAttribute(ur.PREFER_CMCD))}get hasPlayed(){var t,e;return(e=(t=this.mediaController)==null?void 0:t.hasAttribute(At.MEDIA_HAS_PLAYED))!=null?e:!1}get inLiveWindow(){var t;return(t=this.mediaController)==null?void 0:t.hasAttribute(At.MEDIA_TIME_IS_LIVE)}get _hls(){var t;return(t=this.media)==null?void 0:t._hls}get mux(){var t;return(t=this.media)==null?void 0:t.mux}get theme(){var t;return(t=this.getAttribute(on.THEME))!=null?t:nqe}set theme(t){this.setAttribute(on.THEME,`${t}`)}get themeProps(){let t=this.mediaTheme;if(!t)return;let e={};for(let r of t.getAttributeNames()){if(zR.includes(r))continue;let n=t.getAttribute(r);e[Woe(r)]=n===""?!0:n}return e}set themeProps(t){var e,r;pu(this,Lc,s0).call(this);let n={...this.themeProps,...t};for(let i in n){if(zR.includes(i))continue;let s=t?.[i];typeof s=="boolean"||s==null?(e=this.mediaTheme)==null||e.toggleAttribute(QR(i),!!s):(r=this.mediaTheme)==null||r.setAttribute(QR(i),s)}}get playbackId(){var t;return(t=this.getAttribute(ur.PLAYBACK_ID))!=null?t:void 0}set playbackId(t){t?this.setAttribute(ur.PLAYBACK_ID,t):this.removeAttribute(ur.PLAYBACK_ID)}get src(){var t,e;return this.playbackId?(t=Av(this,Cp.SRC))!=null?t:void 0:(e=this.getAttribute(Cp.SRC))!=null?e:void 0}set src(t){t?this.setAttribute(Cp.SRC,t):this.removeAttribute(Cp.SRC)}get poster(){var t;let e=this.getAttribute(Cp.POSTER);if(e!=null)return e;let{tokens:r}=this;if(r.playback&&!r.thumbnail){Bp("Missing expected thumbnail token. No poster image will be shown");return}if(this.playbackId&&!this.audio)return SYe(this.playbackId,{customDomain:this.customDomain,thumbnailTime:(t=this.thumbnailTime)!=null?t:this.startTime,programTime:this.programStartTime,token:r.thumbnail})}set poster(t){t||t===""?this.setAttribute(Cp.POSTER,t):this.removeAttribute(Cp.POSTER)}get storyboardSrc(){var t;return(t=this.getAttribute(on.STORYBOARD_SRC))!=null?t:void 0}set storyboardSrc(t){t?this.setAttribute(on.STORYBOARD_SRC,t):this.removeAttribute(on.STORYBOARD_SRC)}get storyboard(){let{tokens:t}=this;if(this.storyboardSrc&&!t.storyboard)return this.storyboardSrc;if(!(this.audio||!this.playbackId||!this.streamType||[Io.LIVE,Io.UNKNOWN].includes(this.streamType)||t.playback&&!t.storyboard))return TYe(this.playbackId,{customDomain:this.customDomain,token:t.storyboard,programStartTime:this.programStartTime,programEndTime:this.programEndTime})}get audio(){return this.hasAttribute(on.AUDIO)}set audio(t){if(!t){this.removeAttribute(on.AUDIO);return}this.setAttribute(on.AUDIO,"")}get hotkeys(){return Fo(this,bC)}get nohotkeys(){return this.hasAttribute(on.NOHOTKEYS)}set nohotkeys(t){if(!t){this.removeAttribute(on.NOHOTKEYS);return}this.setAttribute(on.NOHOTKEYS,"")}get thumbnailTime(){return lf(this.getAttribute(on.THUMBNAIL_TIME))}set thumbnailTime(t){this.setAttribute(on.THUMBNAIL_TIME,`${t}`)}get videoTitle(){var t,e;return(e=(t=this.getAttribute(on.VIDEO_TITLE))!=null?t:this.getAttribute(on.TITLE))!=null?e:""}set videoTitle(t){t!==this.videoTitle&&(t?this.setAttribute(on.VIDEO_TITLE,t):this.removeAttribute(on.VIDEO_TITLE))}get placeholder(){var t;return(t=Av(this,on.PLACEHOLDER))!=null?t:""}set placeholder(t){this.setAttribute(on.PLACEHOLDER,`${t}`)}get primaryColor(){var t,e;let r=this.getAttribute(on.PRIMARY_COLOR);if(r!=null||this.mediaTheme&&(r=(e=(t=Lm.getComputedStyle(this.mediaTheme))==null?void 0:t.getPropertyValue("--_primary-color"))==null?void 0:e.trim(),r))return r}set primaryColor(t){this.setAttribute(on.PRIMARY_COLOR,`${t}`)}get secondaryColor(){var t,e;let r=this.getAttribute(on.SECONDARY_COLOR);if(r!=null||this.mediaTheme&&(r=(e=(t=Lm.getComputedStyle(this.mediaTheme))==null?void 0:t.getPropertyValue("--_secondary-color"))==null?void 0:e.trim(),r))return r}set secondaryColor(t){this.setAttribute(on.SECONDARY_COLOR,`${t}`)}get accentColor(){var t,e;let r=this.getAttribute(on.ACCENT_COLOR);if(r!=null||this.mediaTheme&&(r=(e=(t=Lm.getComputedStyle(this.mediaTheme))==null?void 0:t.getPropertyValue("--_accent-color"))==null?void 0:e.trim(),r))return r}set accentColor(t){this.setAttribute(on.ACCENT_COLOR,`${t}`)}get defaultShowRemainingTime(){return this.hasAttribute(on.DEFAULT_SHOW_REMAINING_TIME)}set defaultShowRemainingTime(t){t?this.setAttribute(on.DEFAULT_SHOW_REMAINING_TIME,""):this.removeAttribute(on.DEFAULT_SHOW_REMAINING_TIME)}get playbackRates(){if(this.hasAttribute(on.PLAYBACK_RATES))return this.getAttribute(on.PLAYBACK_RATES).trim().split(/\s*,?\s+/).map(t=>Number(t)).filter(t=>!Number.isNaN(t)).sort((t,e)=>t-e)}set playbackRates(t){if(!t){this.removeAttribute(on.PLAYBACK_RATES);return}this.setAttribute(on.PLAYBACK_RATES,t.join(" "))}get forwardSeekOffset(){var t;return(t=lf(this.getAttribute(on.FORWARD_SEEK_OFFSET)))!=null?t:10}set forwardSeekOffset(t){this.setAttribute(on.FORWARD_SEEK_OFFSET,`${t}`)}get backwardSeekOffset(){var t;return(t=lf(this.getAttribute(on.BACKWARD_SEEK_OFFSET)))!=null?t:10}set backwardSeekOffset(t){this.setAttribute(on.BACKWARD_SEEK_OFFSET,`${t}`)}get defaultHiddenCaptions(){return this.hasAttribute(on.DEFAULT_HIDDEN_CAPTIONS)}set defaultHiddenCaptions(t){t?this.setAttribute(on.DEFAULT_HIDDEN_CAPTIONS,""):this.removeAttribute(on.DEFAULT_HIDDEN_CAPTIONS)}get defaultDuration(){return lf(this.getAttribute(on.DEFAULT_DURATION))}set defaultDuration(t){t==null?this.removeAttribute(on.DEFAULT_DURATION):this.setAttribute(on.DEFAULT_DURATION,`${t}`)}get playerInitTime(){return this.hasAttribute(ur.PLAYER_INIT_TIME)?lf(this.getAttribute(ur.PLAYER_INIT_TIME)):Fo(this,vC)}set playerInitTime(t){t!=this.playerInitTime&&(t==null?this.removeAttribute(ur.PLAYER_INIT_TIME):this.setAttribute(ur.PLAYER_INIT_TIME,`${+t}`))}get playerSoftwareName(){var t;return(t=this.getAttribute(ur.PLAYER_SOFTWARE_NAME))!=null?t:$W}get playerSoftwareVersion(){var t;return(t=this.getAttribute(ur.PLAYER_SOFTWARE_VERSION))!=null?t:UW}get beaconCollectionDomain(){var t;return(t=this.getAttribute(ur.BEACON_COLLECTION_DOMAIN))!=null?t:void 0}set beaconCollectionDomain(t){t!==this.beaconCollectionDomain&&(t?this.setAttribute(ur.BEACON_COLLECTION_DOMAIN,t):this.removeAttribute(ur.BEACON_COLLECTION_DOMAIN))}get maxResolution(){var t;return(t=this.getAttribute(ur.MAX_RESOLUTION))!=null?t:void 0}set maxResolution(t){t!==this.maxResolution&&(t?this.setAttribute(ur.MAX_RESOLUTION,t):this.removeAttribute(ur.MAX_RESOLUTION))}get minResolution(){var t;return(t=this.getAttribute(ur.MIN_RESOLUTION))!=null?t:void 0}set minResolution(t){t!==this.minResolution&&(t?this.setAttribute(ur.MIN_RESOLUTION,t):this.removeAttribute(ur.MIN_RESOLUTION))}get maxAutoResolution(){var t;return(t=this.getAttribute(ur.MAX_AUTO_RESOLUTION))!=null?t:void 0}set maxAutoResolution(t){t==null?this.removeAttribute(ur.MAX_AUTO_RESOLUTION):this.setAttribute(ur.MAX_AUTO_RESOLUTION,t)}get renditionOrder(){var t;return(t=this.getAttribute(ur.RENDITION_ORDER))!=null?t:void 0}set renditionOrder(t){t!==this.renditionOrder&&(t?this.setAttribute(ur.RENDITION_ORDER,t):this.removeAttribute(ur.RENDITION_ORDER))}get programStartTime(){return lf(this.getAttribute(ur.PROGRAM_START_TIME))}set programStartTime(t){t==null?this.removeAttribute(ur.PROGRAM_START_TIME):this.setAttribute(ur.PROGRAM_START_TIME,`${t}`)}get programEndTime(){return lf(this.getAttribute(ur.PROGRAM_END_TIME))}set programEndTime(t){t==null?this.removeAttribute(ur.PROGRAM_END_TIME):this.setAttribute(ur.PROGRAM_END_TIME,`${t}`)}get assetStartTime(){return lf(this.getAttribute(ur.ASSET_START_TIME))}set assetStartTime(t){t==null?this.removeAttribute(ur.ASSET_START_TIME):this.setAttribute(ur.ASSET_START_TIME,`${t}`)}get assetEndTime(){return lf(this.getAttribute(ur.ASSET_END_TIME))}set assetEndTime(t){t==null?this.removeAttribute(ur.ASSET_END_TIME):this.setAttribute(ur.ASSET_END_TIME,`${t}`)}get extraSourceParams(){return this.hasAttribute(on.EXTRA_SOURCE_PARAMS)?[...new URLSearchParams(this.getAttribute(on.EXTRA_SOURCE_PARAMS)).entries()].reduce((t,[e,r])=>(t[e]=r,t),{}):dqe}set extraSourceParams(t){t==null?this.removeAttribute(on.EXTRA_SOURCE_PARAMS):this.setAttribute(on.EXTRA_SOURCE_PARAMS,new URLSearchParams(t).toString())}get customDomain(){var t;return(t=this.getAttribute(ur.CUSTOM_DOMAIN))!=null?t:void 0}set customDomain(t){t!==this.customDomain&&(t?this.setAttribute(ur.CUSTOM_DOMAIN,t):this.removeAttribute(ur.CUSTOM_DOMAIN))}get envKey(){var t;return(t=Av(this,ur.ENV_KEY))!=null?t:void 0}set envKey(t){this.setAttribute(ur.ENV_KEY,`${t}`)}get noVolumePref(){return this.hasAttribute(on.NO_VOLUME_PREF)}set noVolumePref(t){t?this.setAttribute(on.NO_VOLUME_PREF,""):this.removeAttribute(on.NO_VOLUME_PREF)}get noMutedPref(){return this.hasAttribute(on.NO_MUTED_PREF)}set noMutedPref(t){t?this.setAttribute(on.NO_MUTED_PREF,""):this.removeAttribute(on.NO_MUTED_PREF)}get debug(){return Av(this,ur.DEBUG)!=null}set debug(t){t?this.setAttribute(ur.DEBUG,""):this.removeAttribute(ur.DEBUG)}get disableTracking(){return Av(this,ur.DISABLE_TRACKING)!=null}set disableTracking(t){this.toggleAttribute(ur.DISABLE_TRACKING,!!t)}get disableCookies(){return Av(this,ur.DISABLE_COOKIES)!=null}set disableCookies(t){t?this.setAttribute(ur.DISABLE_COOKIES,""):this.removeAttribute(ur.DISABLE_COOKIES)}get streamType(){var t,e,r;return(r=(e=this.getAttribute(ur.STREAM_TYPE))!=null?e:(t=this.media)==null?void 0:t.streamType)!=null?r:Io.UNKNOWN}set streamType(t){this.setAttribute(ur.STREAM_TYPE,`${t}`)}get defaultStreamType(){var t,e,r;return(r=(e=this.getAttribute(on.DEFAULT_STREAM_TYPE))!=null?e:(t=this.mediaController)==null?void 0:t.getAttribute(on.DEFAULT_STREAM_TYPE))!=null?r:Io.ON_DEMAND}set defaultStreamType(t){t?this.setAttribute(on.DEFAULT_STREAM_TYPE,t):this.removeAttribute(on.DEFAULT_STREAM_TYPE)}get targetLiveWindow(){var t,e;return this.hasAttribute(on.TARGET_LIVE_WINDOW)?+this.getAttribute(on.TARGET_LIVE_WINDOW):(e=(t=this.media)==null?void 0:t.targetLiveWindow)!=null?e:Number.NaN}set targetLiveWindow(t){t==this.targetLiveWindow||Number.isNaN(t)&&Number.isNaN(this.targetLiveWindow)||(t==null?this.removeAttribute(on.TARGET_LIVE_WINDOW):this.setAttribute(on.TARGET_LIVE_WINDOW,`${+t}`))}get liveEdgeStart(){var t;return(t=this.media)==null?void 0:t.liveEdgeStart}get startTime(){return lf(Av(this,ur.START_TIME))}set startTime(t){this.setAttribute(ur.START_TIME,`${t}`)}get preferPlayback(){let t=this.getAttribute(ur.PREFER_PLAYBACK);if(t===Dm.MSE||t===Dm.NATIVE)return t}set preferPlayback(t){t!==this.preferPlayback&&(t===Dm.MSE||t===Dm.NATIVE?this.setAttribute(ur.PREFER_PLAYBACK,t):this.removeAttribute(ur.PREFER_PLAYBACK))}get metadata(){var t;return(t=this.media)==null?void 0:t.metadata}set metadata(t){if(pu(this,Lc,s0).call(this),!this.media){df("underlying media element missing when trying to set metadata. metadata will not be set.");return}this.media.metadata={...FW(this),...t}}get _hlsConfig(){var t;return(t=this.media)==null?void 0:t._hlsConfig}set _hlsConfig(t){if(pu(this,Lc,s0).call(this),!this.media){df("underlying media element missing when trying to set _hlsConfig. _hlsConfig will not be set.");return}this.media._hlsConfig=t}async addCuePoints(t){var e;if(pu(this,Lc,s0).call(this),!this.media){df("underlying media element missing when trying to addCuePoints. cuePoints will not be added.");return}return(e=this.media)==null?void 0:e.addCuePoints(t)}get activeCuePoint(){var t;return(t=this.media)==null?void 0:t.activeCuePoint}get cuePoints(){var t,e;return(e=(t=this.media)==null?void 0:t.cuePoints)!=null?e:[]}addChapters(t){var e;if(pu(this,Lc,s0).call(this),!this.media){df("underlying media element missing when trying to addChapters. chapters will not be added.");return}return(e=this.media)==null?void 0:e.addChapters(t)}get activeChapter(){var t;return(t=this.media)==null?void 0:t.activeChapter}get chapters(){var t,e;return(e=(t=this.media)==null?void 0:t.chapters)!=null?e:[]}getStartDate(){var t;return(t=this.media)==null?void 0:t.getStartDate()}get currentPdt(){var t;return(t=this.media)==null?void 0:t.currentPdt}get tokens(){let t=this.getAttribute(on.PLAYBACK_TOKEN),e=this.getAttribute(on.DRM_TOKEN),r=this.getAttribute(on.THUMBNAIL_TOKEN),n=this.getAttribute(on.STORYBOARD_TOKEN);return{...Fo(this,xC),...t!=null?{playback:t}:{},...e!=null?{drm:e}:{},...r!=null?{thumbnail:r}:{},...n!=null?{storyboard:n}:{}}}set tokens(t){Qm(this,xC,t??{})}get playbackToken(){var t;return(t=this.getAttribute(on.PLAYBACK_TOKEN))!=null?t:void 0}set playbackToken(t){this.setAttribute(on.PLAYBACK_TOKEN,`${t}`)}get drmToken(){var t;return(t=this.getAttribute(on.DRM_TOKEN))!=null?t:void 0}set drmToken(t){this.setAttribute(on.DRM_TOKEN,`${t}`)}get thumbnailToken(){var t;return(t=this.getAttribute(on.THUMBNAIL_TOKEN))!=null?t:void 0}set thumbnailToken(t){this.setAttribute(on.THUMBNAIL_TOKEN,`${t}`)}get storyboardToken(){var t;return(t=this.getAttribute(on.STORYBOARD_TOKEN))!=null?t:void 0}set storyboardToken(t){this.setAttribute(on.STORYBOARD_TOKEN,`${t}`)}addTextTrack(t,e,r,n){var i;let s=(i=this.media)==null?void 0:i.nativeEl;if(s)return RF(s,t,e,r,n)}removeTextTrack(t){var e;let r=(e=this.media)==null?void 0:e.nativeEl;if(r)return $Qe(r,t)}get textTracks(){var t;return(t=this.media)==null?void 0:t.textTracks}get castReceiver(){var t;return(t=this.getAttribute(on.CAST_RECEIVER))!=null?t:void 0}set castReceiver(t){t!==this.castReceiver&&(t?this.setAttribute(on.CAST_RECEIVER,t):this.removeAttribute(on.CAST_RECEIVER))}get castCustomData(){var t;return(t=this.media)==null?void 0:t.castCustomData}set castCustomData(t){if(!this.media){df("underlying media element missing when trying to set castCustomData. castCustomData will not be set.");return}this.media.castCustomData=t}get noTooltips(){return this.hasAttribute(on.NO_TOOLTIPS)}set noTooltips(t){if(!t){this.removeAttribute(on.NO_TOOLTIPS);return}this.setAttribute(on.NO_TOOLTIPS,"")}get proudlyDisplayMuxBadge(){return this.hasAttribute(on.PROUDLY_DISPLAY_MUX_BADGE)}set proudlyDisplayMuxBadge(t){t?this.setAttribute(on.PROUDLY_DISPLAY_MUX_BADGE,""):this.removeAttribute(on.PROUDLY_DISPLAY_MUX_BADGE)}get capRenditionToPlayerSize(){var t;return(t=this.media)==null?void 0:t.capRenditionToPlayerSize}set capRenditionToPlayerSize(t){if(!this.media){df("underlying media element missing when trying to set capRenditionToPlayerSize");return}this.media.capRenditionToPlayerSize=t}};vC=new WeakMap,yC=new WeakMap,xC=new WeakMap,jv=new WeakMap,bC=new WeakMap,Tb=new WeakMap,Lc=new WeakSet,s0=function(){var t,e,r,n;if(!Fo(this,yC)){Qm(this,yC,!0),pu(this,Lc,Nv).call(this);try{if(customElements.upgrade(this.mediaTheme),!(this.mediaTheme instanceof Lm.HTMLElement))throw""}catch{df("<media-theme> failed to upgrade!")}try{customElements.upgrade(this.media)}catch{df("underlying media element failed to upgrade!")}try{if(customElements.upgrade(this.mediaController),!(this.mediaController instanceof IKe))throw""}catch{df("<media-controller> failed to upgrade!")}pu(this,Lc,QW).call(this),pu(this,Lc,VW).call(this),pu(this,Lc,zW).call(this),Qm(this,jv,(e=(t=this.mediaController)==null?void 0:t.hasAttribute(es.USER_INACTIVE))!=null?e:!0),pu(this,Lc,KW).call(this),(r=this.media)==null||r.addEventListener("streamtypechange",()=>pu(this,Lc,Nv).call(this)),(n=this.media)==null||n.addEventListener("loadstart",()=>pu(this,Lc,Nv).call(this))}},sle=function(){var t,e;try{(t=window?.CSS)==null||t.registerProperty({name:"--media-primary-color",syntax:"<color>",inherits:!0}),(e=window?.CSS)==null||e.registerProperty({name:"--media-secondary-color",syntax:"<color>",inherits:!0})}catch{}},KR=function(t){Object.assign(Fo(this,Tb),t),pu(this,Lc,Nv).call(this)},Nv=function(t={}){zYe(GYe(iqe(this,{...Fo(this,Tb),...t})),this.shadowRoot)},QW=function(){let t=e=>{var r,n;if(!(e!=null&&e.startsWith("theme-")))return;let i=e.replace(/^theme-/,"");if(zR.includes(i))return;let s=this.getAttribute(e);s!=null?(r=this.mediaTheme)==null||r.setAttribute(i,s):(n=this.mediaTheme)==null||n.removeAttribute(i)};new MutationObserver(e=>{for(let{attributeName:r}of e)t(r)}).observe(this,{attributes:!0}),this.getAttributeNames().forEach(t)},VW=function(){let t=e=>{var r;let n=(r=this.media)==null?void 0:r.error;if(!(n instanceof ii)){let{message:s,code:o}=n??{};n=new ii(s,o)}if(!(n!=null&&n.fatal)){Bp(n),n.data&&Bp(`${n.name} data:`,n.data);return}let i=RW(n);i.message&&ele(i),df(n),n.data&&df(`${n.name} data:`,n.data),pu(this,Lc,KR).call(this,{isDialogOpen:!0})};this.addEventListener("error",t),this.media&&(this.media.errorTranslator=(e={})=>{var r,n,i;if(!(((r=this.media)==null?void 0:r.error)instanceof ii))return e;let s=RW((n=this.media)==null?void 0:n.error);return{player_error_code:(i=this.media)==null?void 0:i.error.code,player_error_message:s.message?String(s.message):e.player_error_message,player_error_context:s.context?String(s.context):e.player_error_context}})},zW=function(){var t,e,r,n;let i=()=>pu(this,Lc,Nv).call(this);(e=(t=this.media)==null?void 0:t.textTracks)==null||e.addEventListener("addtrack",i),(n=(r=this.media)==null?void 0:r.textTracks)==null||n.addEventListener("removetrack",i)},KW=function(){var t,e;if(!/Firefox/i.test(navigator.userAgent))return;let r,n=new WeakMap,i=()=>this.streamType===Io.LIVE&&!this.secondaryColor&&this.offsetWidth>=800,s=(u,l,d=!1)=>{i()||Array.from(u&&u.activeCues||[]).forEach(f=>{if(!(!f.snapToLines||f.line<-5||f.line>=0&&f.line<10))if(!l||this.paused){let A=f.text.split(`
`).length,p=-3;this.streamType===Io.LIVE&&(p=-2);let g=p-A;if(f.line===g&&!d)return;n.has(f)||n.set(f,f.line),f.line=g}else setTimeout(()=>{f.line=n.get(f)||"auto"},500)})},o=()=>{var u,l;s(r,(l=(u=this.mediaController)==null?void 0:u.hasAttribute(es.USER_INACTIVE))!=null?l:!1)},c=()=>{var u,l;let d=Array.from(((l=(u=this.mediaController)==null?void 0:u.media)==null?void 0:l.textTracks)||[]).filter(f=>["subtitles","captions"].includes(f.kind)&&f.mode==="showing")[0];d!==r&&r?.removeEventListener("cuechange",o),r=d,r?.addEventListener("cuechange",o),s(r,Fo(this,jv))};c(),(t=this.textTracks)==null||t.addEventListener("change",c),(e=this.textTracks)==null||e.addEventListener("addtrack",c),this.addEventListener("userinactivechange",()=>{var u,l;let d=(l=(u=this.mediaController)==null?void 0:u.hasAttribute(es.USER_INACTIVE))!=null?l:!0;Fo(this,jv)!==d&&(Qm(this,jv,d),s(r,Fo(this,jv)))})};function Av(t,e){return t.media?t.media.getAttribute(e):t.getAttribute(e)}var GW=hqe,ale=class{addEventListener(){}removeEventListener(){}dispatchEvent(t){return!0}};if(typeof DocumentFragment>"u"){class t extends ale{}globalThis.DocumentFragment=t}var fqe=class extends ale{},Aqe={get(t){},define(t,e,r){},getName(t){return null},upgrade(t){},whenDefined(t){return Promise.resolve(fqe)}},mqe={customElements:Aqe},pqe=typeof window>"u"||typeof globalThis.customElements>"u",nB=pqe?mqe:globalThis;nB.customElements.get("mux-player")||(nB.customElements.define("mux-player",GW),nB.MuxPlayerElement=GW);var ole=parseInt(So.version)>=19,WW={className:"class",classname:"class",htmlFor:"for",crossOrigin:"crossorigin",viewBox:"viewBox",playsInline:"playsinline",autoPlay:"autoplay",playbackRate:"playbackrate"},gqe=t=>t==null,vqe=(t,e)=>gqe(e)?!1:t in e,yqe=t=>t.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`),xqe=(t,e)=>{if(!(!ole&&typeof e=="boolean"&&!e)){if(vqe(t,WW))return WW[t];if(typeof e<"u")return/[A-Z]/.test(t)?yqe(t):t}},bqe=(t,e)=>!ole&&typeof t=="boolean"?"":t,wqe=(t={})=>{let{ref:e,...r}=t;return Object.entries(r).reduce((n,[i,s])=>{let o=xqe(i,s);if(!o)return n;let c=bqe(s);return n[o]=c,n},{})};function YW(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Eqe(...t){return e=>{let r=!1,n=t.map(i=>{let s=YW(i,e);return!r&&typeof s=="function"&&(r=!0),s});if(r)return()=>{for(let i=0;i<n.length;i++){let s=n[i];typeof s=="function"?s():YW(t[i],null)}}}}function _qe(...t){return j.useCallback(Eqe(...t),t)}var Sqe=Object.prototype.hasOwnProperty,Tqe=(t,e)=>{if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(Array.isArray(t))return!Array.isArray(e)||t.length!==e.length?!1:t.some((i,s)=>e[s]===i);let r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++)if(!Sqe.call(e,r[i])||!Object.is(t[r[i]],e[r[i]]))return!1;return!0},lle=(t,e,r)=>!Tqe(e,t[r]),Cqe=(t,e,r)=>{t[r]=e},jqe=(t,e,r,n=Cqe,i=lle)=>j.useEffect(()=>{let s=r?.current;s&&i(s,e,t)&&n(s,e,t)},[r?.current,e]),Am=jqe,Nqe=()=>{try{return"3.11.4"}catch{}return"UNKNOWN"},kqe=Nqe(),Iqe=()=>kqe,Rl=(t,e,r)=>j.useEffect(()=>{let n=e?.current;if(!n||!r)return;let i=t,s=r;return n.addEventListener(i,s),()=>{n.removeEventListener(i,s)}},[e?.current,r,t]),Lqe=So.forwardRef(({children:t,...e},r)=>So.createElement("mux-player",{suppressHydrationWarning:!0,...wqe(e),ref:r},t)),Bqe=(t,e)=>{let{onAbort:r,onCanPlay:n,onCanPlayThrough:i,onEmptied:s,onLoadStart:o,onLoadedData:c,onLoadedMetadata:u,onProgress:l,onDurationChange:d,onVolumeChange:f,onRateChange:A,onResize:p,onWaiting:g,onPlay:y,onPlaying:x,onTimeUpdate:w,onPause:E,onSeeking:T,onSeeked:C,onStalled:N,onSuspend:I,onEnded:U,onError:K,onCuePointChange:Y,onChapterChange:re,metadata:se,tokens:Ae,paused:we,playbackId:Ce,playbackRates:ve,currentTime:ne,themeProps:ce,extraSourceParams:ae,castCustomData:De,_hlsConfig:Oe,...be}=e;return Am("tokens",Ae,t),Am("playbackId",Ce,t),Am("playbackRates",ve,t),Am("metadata",se,t),Am("extraSourceParams",ae,t),Am("_hlsConfig",Oe,t),Am("themeProps",ce,t),Am("castCustomData",De,t),Am("paused",we,t,(de,xe)=>{xe!=null&&(xe?de.pause():de.play())},(de,xe,je)=>de.hasAttribute("autoplay")&&!de.hasPlayed?!1:lle(de,xe,je)),Am("currentTime",ne,t,(de,xe)=>{xe!=null&&(de.currentTime=xe)}),Rl("abort",t,r),Rl("canplay",t,n),Rl("canplaythrough",t,i),Rl("emptied",t,s),Rl("loadstart",t,o),Rl("loadeddata",t,c),Rl("loadedmetadata",t,u),Rl("progress",t,l),Rl("durationchange",t,d),Rl("volumechange",t,f),Rl("ratechange",t,A),Rl("resize",t,p),Rl("waiting",t,g),Rl("play",t,y),Rl("playing",t,x),Rl("timeupdate",t,w),Rl("pause",t,E),Rl("seeking",t,T),Rl("seeked",t,C),Rl("stalled",t,N),Rl("suspend",t,I),Rl("ended",t,U),Rl("error",t,K),Rl("cuepointchange",t,Y),Rl("chapterchange",t,re),[be]},Pqe=Iqe(),Oqe="mux-player-react",Rqe=So.forwardRef((t,e)=>{var r;let n=j.useRef(null),i=_qe(n,e),[s]=Bqe(n,t),[o]=j.useState((r=t.playerInitTime)!=null?r:UF());return So.createElement(Lqe,{ref:i,defaultHiddenCaptions:t.defaultHiddenCaptions,playerSoftwareName:Oqe,playerSoftwareVersion:Pqe,playerInitTime:o,...s})}),Dqe=Rqe;function Mqe({playbackId:t,title:e,poster:r,isLive:n=!1,viewerEmail:i="",onShare:s,className:o=""}){const[c,u]=j.useState(!0),[l,d]=j.useState(!1),[f,A]=j.useState(!1),[p,g]=j.useState([]),y=j.useRef(null),x=j.useRef(null);j.useEffect(()=>{const C=()=>{u(!0),clearTimeout(x.current),x.current=setTimeout(()=>{u(!1)},3e3)},N=y.current;if(N)return N.addEventListener("mousemove",C),()=>N.removeEventListener("mousemove",C)},[]),j.useEffect(()=>{const C=()=>{d(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",C),()=>document.removeEventListener("fullscreenchange",C)},[]);const w=()=>{document.fullscreenElement?document.exitFullscreen():y.current?.requestFullscreen()},E=C=>{const N=Date.now(),I={id:N,emoji:C,x:Math.random()*80+10,delay:Math.random()*.5};g(U=>[...U,I]),setTimeout(()=>{g(U=>U.filter(K=>K.id!==N))},3e3)},T=["","","","","",""];return a.jsxs("div",{ref:y,className:`relative bg-black group ${o}`,children:[a.jsx(Dqe,{playbackId:t||"demo-playback-id",metadata:{video_title:e,viewer_user_id:i},streamType:n?"live":"on-demand",autoPlay:!0,poster:r,className:"w-full aspect-video"}),n&&a.jsx("div",{className:"absolute top-4 left-4 z-10",children:a.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-red-500 text-white font-bold rounded-full animate-glow",children:[a.jsx("span",{className:"w-2 h-2 bg-white rounded-full animate-pulse"}),"LIVE"]})}),a.jsx("div",{className:"absolute bottom-20 right-4 pointer-events-none overflow-hidden h-64 w-16",children:p.map(C=>a.jsx("div",{className:"absolute animate-float text-3xl",style:{left:`${C.x}%`,animationDelay:`${C.delay}s`,bottom:0},children:C.emoji},C.id))}),f&&a.jsx("div",{className:"absolute bottom-20 right-4 z-20 animate-scaleIn",children:a.jsx("div",{className:"bg-dark-900/90 backdrop-blur-sm rounded-2xl p-3 border border-dark-700",children:a.jsx("div",{className:"grid grid-cols-3 gap-2",children:T.map((C,N)=>a.jsx("button",{onClick:()=>E(C),className:"w-12 h-12 rounded-xl bg-dark-800 hover:bg-dark-700 flex items-center justify-center text-2xl transition-transform hover:scale-110 active:scale-95",children:C},C))})})}),a.jsx("div",{className:`absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/90 to-transparent p-4 transition-opacity duration-300 ${c?"opacity-100":"opacity-0"}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"flex items-center gap-2",children:a.jsx("button",{onClick:s,className:"p-2 rounded-lg bg-white/10 hover:bg-white/20 text-white transition-colors",title:"Share",children:a.jsx(_Y,{className:"w-5 h-5"})})}),a.jsxs("div",{className:"flex items-center gap-2",children:[n&&a.jsx("button",{onClick:()=>A(!f),className:`p-2 rounded-lg transition-colors ${f?"bg-red-500 text-white":"bg-white/10 hover:bg-white/20 text-white"}`,title:"Reactions",children:a.jsx(qf,{className:"w-5 h-5"})}),a.jsx("button",{onClick:w,className:"p-2 rounded-lg bg-white/10 hover:bg-white/20 text-white transition-colors",title:l?"Exit Fullscreen":"Fullscreen",children:l?a.jsx(ihe,{className:"w-5 h-5"}):a.jsx(Jde,{className:"w-5 h-5"})})]})]})}),a.jsx("div",{className:`absolute top-0 left-0 right-0 bg-gradient-to-b from-black/70 to-transparent p-4 transition-opacity duration-300 ${c?"opacity-100":"opacity-0"}`,children:a.jsx("h2",{className:"text-white font-semibold text-lg truncate pr-20",children:e})}),a.jsx("style",{jsx:!0,children:`
        @keyframes float {
          0% {
            transform: translateY(0) scale(1);
            opacity: 1;
          }
          100% {
            transform: translateY(-200px) scale(1.5);
            opacity: 0;
          }
        }
        .animate-float {
          animation: float 3s ease-out forwards;
        }
      `})]})}function Fqe({isLive:t=!1,viewerCount:e=0,showViewers:r=!0,size:n="default",className:i=""}){const[s,o]=j.useState(e),[c,u]=j.useState(!1);j.useEffect(()=>{e>s&&(u(!0),setTimeout(()=>u(!1),1e3));const f=e-s;if(Math.abs(f)>10){const A=Math.ceil(f/10),p=setInterval(()=>{o(g=>{const y=g+A;return A>0&&y>=e||A<0&&y<=e?(clearInterval(p),e):y})},50);return()=>clearInterval(p)}else o(e)},[e]);const d={small:{container:"px-2 py-1 text-xs gap-1.5",dot:"w-1.5 h-1.5",icon:"w-3 h-3"},default:{container:"px-3 py-1.5 text-sm gap-2",dot:"w-2 h-2",icon:"w-4 h-4"},large:{container:"px-4 py-2 text-base gap-2.5",dot:"w-2.5 h-2.5",icon:"w-5 h-5"}}[n];return t?a.jsxs("div",{className:`flex items-center gap-3 ${i}`,children:[a.jsxs("div",{className:`inline-flex items-center ${d.container} bg-gradient-to-r from-red-600 to-red-500 text-white font-bold rounded-full shadow-lg shadow-red-500/25`,children:[a.jsx("span",{className:`${d.dot} bg-white rounded-full animate-pulse`}),a.jsx("span",{className:"uppercase tracking-wide",children:"Live"})]}),r&&s>0&&a.jsxs("div",{className:`inline-flex items-center ${d.container} bg-dark-800/90 backdrop-blur-sm text-white rounded-full border border-dark-700`,children:[a.jsx(I0,{className:`${d.icon} text-gray-400`}),a.jsx("span",{className:`font-semibold tabular-nums ${c?"text-green-400":""}`,children:s.toLocaleString()}),c&&a.jsx($A,{className:`${d.icon} text-green-400 animate-bounce`})]})]}):null}function Uqe({eventId:t,className:e=""}){const[r,n]=j.useState(null),[i,s]=j.useState(!0);j.useEffect(()=>{if(!t)return;o();const u=setInterval(o,3e4);return()=>clearInterval(u)},[t]);const o=async()=>{try{const u=new Date(Date.now()-12e4).toISOString(),{count:l,error:d}=await Rr.from("livestream_sessions").select("*",{count:"exact",head:!0}).eq("event_id",t).gte("last_heartbeat",u);d||n(l||0)}catch(u){console.error("Failed to fetch viewer count:",u)}finally{s(!1)}};if(i||r===null)return null;const c=u=>u>=1e3?`${(u/1e3).toFixed(1)}k`:u.toString();return a.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-1.5 bg-dark-800/80 backdrop-blur-sm rounded-full ${e}`,children:[a.jsxs("div",{className:"relative",children:[a.jsx(I0,{className:"w-4 h-4 text-red-500"}),r>0&&a.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-2 h-2 bg-red-500 rounded-full animate-pulse"})]}),a.jsx("span",{className:"text-sm font-medium text-white",children:c(r)}),a.jsx("span",{className:"text-sm text-gray-400",children:r===1?"viewer":"viewers"})]})}function $qe(){const{eventId:t}=tA(),[e]=Jb(),[r,n]=j.useState(null),[i,s]=j.useState(e.get("email")||""),[o,c]=j.useState(null),[u,l]=j.useState(!1),[d,f]=j.useState(!0),[A,p]=j.useState(!1),[g,y]=j.useState(null),[x,w]=j.useState(!1),[E,T]=j.useState(null),[C,N]=j.useState(null),[I,U]=j.useState(!0),[K,Y]=j.useState(!1),[re,se]=j.useState(0),Ae=j.useRef(null),we=j.useRef(null);j.useEffect(()=>(ve(),()=>{Ae.current&&clearInterval(Ae.current)}),[t]),j.useEffect(()=>{r&&(e.get("bypass")||r.geo_blocking_enabled?Ce():U(!1))},[r]);const Ce=async()=>{try{const je=e.get("bypass"),Re=await(await fetch("https://gonalgubgldgpkcekaxe.supabase.co/functions/v1/geo-check",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({venue_lat:r.geo_lat,venue_lng:r.geo_lng,radius_km:r.geo_radius_km||50,event_id:t,bypass_token:je})})).json();Re.bypass?(T(!1),N({...Re,crew_bypass:!0}),l(!0),s("crew@bypass")):(T(Re.blocked),N(Re))}catch(je){console.error("Geo check failed:",je),T(!1)}finally{U(!1)}};j.useEffect(()=>{const je=e.get("email");je&&r&&!u&&ne(je)},[r,e]),j.useEffect(()=>(o&&u&&(Ae.current=setInterval(async()=>{try{await DRe(o)||(w(!0),l(!1),clearInterval(Ae.current))}catch(je){console.error("Heartbeat failed:",je)}},3e4)),()=>{Ae.current&&clearInterval(Ae.current)}),[o,u]),j.useEffect(()=>{if(!r)return;const Me=(Be=>{if(!Be)return new Date;const nt=Be.replace(/[Z+].*$/,"").replace(/\.000$/,"");return new Date(nt)})(r.start_time),Re=r.is_live||r.status==="live",it=new Date>=Me,ht=e.get("preview")==="player";if(it&&!Re&&!ht)return Y(!0),we.current=setInterval(async()=>{try{const Be=await KP(t);(Be?.is_live||Be?.status==="live")&&(clearInterval(we.current),n(Be),Y(!1))}catch(Be){console.error("Failed to check event status:",Be)}},15e3),()=>{we.current&&clearInterval(we.current)};Y(!1)},[r,t,e]);const ve=async()=>{try{const je=await KP(t);n(je)}catch{y("Event not found")}finally{f(!1)}},ne=async(je=i)=>{if(!je){y("Please enter your email");return}p(!0),y(null),w(!1);try{const Me=e.get("session_id");if(!(await(await fetch("https://gonalgubgldgpkcekaxe.supabase.co/functions/v1/verify-payment",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_id:Me,event_id:t,email:je})})).json()).verified&&!await PRe(t,je)){y("No purchase found for this email. Please check your email or purchase access."),l(!1);return}const ht=await RRe({event_id:t,order_id:order.id,email:je.toLowerCase()});c(ht.token),l(!0),s(je),Me&&GFe(t,je),localStorage.setItem(`livestream_session_${t}`,ht.token),localStorage.setItem(`livestream_email_${t}`,je)}catch(Me){console.error("Verify error:",Me),y("Failed to verify access. Please try again."),l(!1)}finally{p(!1)}};if(d)return a.jsx("div",{className:"min-h-screen bg-dark-950 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-dark-700 border-t-red-500 mx-auto"}),a.jsx(gf,{className:"absolute inset-0 m-auto w-6 h-6 text-red-500"})]}),a.jsx("p",{className:"text-gray-400 mt-4",children:"Loading stream..."})]})});if(g&&!r)return a.jsx("div",{className:"min-h-screen bg-dark-950 flex items-center justify-center p-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx(k0,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),a.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Event Not Found"}),a.jsx("p",{className:"text-gray-400",children:g})]})});if(E)return a.jsx("div",{className:"min-h-screen bg-dark-950 flex items-center justify-center p-4",children:a.jsxs("div",{className:"max-w-md w-full relative",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-yellow-500/10 to-orange-500/10 blur-2xl rounded-3xl"}),a.jsxs("div",{className:"relative bg-dark-900/95 backdrop-blur-xl rounded-2xl border border-dark-700/50 p-8 text-center",children:[a.jsx("div",{className:"w-20 h-20 mx-auto mb-6 rounded-full bg-gradient-to-br from-yellow-500/20 to-orange-500/20 flex items-center justify-center",children:a.jsx(th,{className:"w-10 h-10 text-yellow-500"})}),a.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Location Restricted"}),a.jsxs("p",{className:"text-gray-400 mb-4",children:["Online streaming is not available within ",r.geo_radius_km||50,"km of the venue."]}),C?.user_location&&a.jsxs("p",{className:"text-gray-500 text-sm mb-4",children:["Distance from venue: ",a.jsxs("span",{className:"text-white font-semibold",children:[C.distance_km,"km"]})]}),a.jsxs("div",{className:"bg-dark-800/50 rounded-xl p-4 mb-6 border border-dark-700/50",children:[a.jsx("p",{className:"text-gray-400 text-sm mb-2",children:"Watch live in person at:"}),a.jsx("p",{className:"text-white font-semibold",children:r.venue})]}),r.ticket_url&&a.jsxs("a",{href:r.ticket_url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-8 py-4 bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white font-bold rounded-xl transition-all duration-300 shadow-lg shadow-red-500/25",children:[a.jsx(gf,{className:"w-5 h-5"}),"Get Tickets"]})]})]})});if(x)return a.jsx("div",{className:"min-h-screen bg-dark-950 flex items-center justify-center p-4",children:a.jsxs("div",{className:"max-w-md w-full relative",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-yellow-500/10 to-orange-500/10 blur-2xl rounded-3xl"}),a.jsxs("div",{className:"relative bg-dark-900/95 backdrop-blur-xl rounded-2xl border border-dark-700/50 p-8 text-center",children:[a.jsx("div",{className:"w-20 h-20 mx-auto mb-6 rounded-full bg-gradient-to-br from-yellow-500/20 to-orange-500/20 flex items-center justify-center",children:a.jsx(k0,{className:"w-10 h-10 text-yellow-500"})}),a.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Session Ended"}),a.jsx("p",{className:"text-gray-400 mb-6",children:"This stream is now playing on another device. Only one active viewing session is allowed per purchase."}),a.jsxs("button",{onClick:()=>ne(i),className:"inline-flex items-center gap-2 px-8 py-4 bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white font-bold rounded-xl transition-all duration-300 shadow-lg shadow-red-500/25",children:[a.jsx(e1,{className:"w-5 h-5"}),"Watch Here Instead"]})]})]})});if(I)return a.jsx("div",{className:"min-h-screen bg-dark-950 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-dark-700 border-t-red-500 mx-auto"}),a.jsx(Nb,{className:"absolute inset-0 m-auto w-6 h-6 text-red-500"})]}),a.jsx("p",{className:"text-gray-400 mt-4",children:"Checking access..."})]})});if(!u)return a.jsx("div",{className:"min-h-screen bg-dark-950 flex items-center justify-center p-4",children:a.jsxs("div",{className:"max-w-md w-full relative",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-red-500/10 to-orange-500/10 blur-2xl rounded-3xl"}),a.jsxs("div",{className:"relative bg-dark-900/95 backdrop-blur-xl rounded-2xl border border-dark-700/50 overflow-hidden",children:[r.thumbnail_url&&a.jsxs("div",{className:"relative h-32 overflow-hidden",children:[a.jsx("img",{src:r.thumbnail_url,alt:r.title,className:"w-full h-full object-cover opacity-50"}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-dark-900 to-transparent"})]}),a.jsxs("div",{className:"p-8",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-white mb-1",children:r.title}),a.jsx("p",{className:"text-gray-400",children:r.organization})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Enter Your Email"}),a.jsxs("div",{className:"relative",children:[a.jsx(tu,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500"}),a.jsx("input",{type:"email",value:i,onChange:je=>s(je.target.value),placeholder:"your@email.com",className:"w-full pl-12 pr-4 py-4 bg-dark-800/50 border border-dark-700 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:border-red-500 focus:ring-2 focus:ring-red-500/20 transition-all duration-300"})]}),a.jsxs("p",{className:"text-xs text-gray-500 mt-2 flex items-center gap-1",children:[a.jsx(Nb,{className:"w-3 h-3"}),"Use the email from your purchase"]})]}),g&&a.jsx("div",{className:"p-3 bg-red-500/10 border border-red-500/20 rounded-lg",children:a.jsx("p",{className:"text-red-400 text-sm",children:g})}),a.jsx("button",{onClick:()=>ne(),disabled:A||!i,className:"w-full py-4 bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 disabled:from-dark-700 disabled:to-dark-700 disabled:cursor-not-allowed text-white font-bold rounded-xl transition-all duration-300 flex items-center justify-center gap-2 shadow-lg shadow-red-500/25 disabled:shadow-none",children:A?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"}),"Verifying..."]}):a.jsxs(a.Fragment,{children:[a.jsx(gf,{className:"w-5 h-5"}),"Watch Stream"]})}),a.jsxs("div",{className:"text-center pt-4 border-t border-dark-800",children:[a.jsx("p",{className:"text-gray-500 text-sm mb-2",children:"Don't have access?"}),a.jsxs(gs,{to:`/live/${t}`,className:"text-red-500 hover:text-red-400 font-semibold transition-colors",children:["Purchase Access  $",r.price," AUD"]})]})]})]})]})]})});const ae=(je=>{if(!je)return new Date;const Me=je.replace(/[Z+].*$/,"").replace(/\.000$/,"");return new Date(Me)})(r.start_time),De=r.is_live||r.status==="live",Oe=e.get("preview")==="player",be=new Date>=ae;return!De&&!be&&!Oe?a.jsx("div",{className:"min-h-screen bg-dark-950",children:a.jsx("div",{className:"w-full bg-gradient-to-b from-dark-900 to-dark-950",children:a.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-16 text-center",children:[r.thumbnail_url&&a.jsxs("div",{className:"relative max-w-2xl mx-auto mb-8 rounded-2xl overflow-hidden shadow-2xl shadow-red-500/10 group",children:[a.jsx("img",{src:r.thumbnail_url,alt:r.title,className:"w-full aspect-video object-cover opacity-80 transition-transform duration-500 group-hover:scale-105"}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-dark-950 via-dark-950/50 to-transparent"}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsx("div",{className:"w-20 h-20 rounded-full bg-white/10 backdrop-blur-sm flex items-center justify-center border border-white/20",children:a.jsx(DA,{className:"w-10 h-10 text-white"})})})]}),a.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-yellow-500/20 text-yellow-500 rounded-full text-sm font-medium mb-6 border border-yellow-500/30",children:[a.jsx(qf,{className:"w-4 h-4"}),"Waiting Room"]}),a.jsx("h1",{className:"text-3xl md:text-5xl font-bold text-white mb-3",children:r.title}),a.jsx("p",{className:"text-xl text-gray-400 mb-8",children:r.organization}),a.jsx("div",{className:"bg-dark-800/30 backdrop-blur-sm rounded-2xl p-8 max-w-xl mx-auto mb-8 border border-dark-700/50",children:a.jsx(wne,{targetDate:r.start_time,onComplete:()=>ve()})}),a.jsxs("div",{className:"flex flex-wrap justify-center gap-6 text-gray-400 mb-8",children:[a.jsxs("div",{className:"flex items-center gap-2 bg-dark-800/30 px-4 py-2 rounded-xl border border-dark-700/30",children:[a.jsx(fc,{className:"w-5 h-5 text-red-500"}),ae.toLocaleDateString("en-AU",{weekday:"long",day:"numeric",month:"long"})]}),a.jsxs("div",{className:"flex items-center gap-2 bg-dark-800/30 px-4 py-2 rounded-xl border border-dark-700/30",children:[a.jsx(DA,{className:"w-5 h-5 text-red-500"}),ae.toLocaleTimeString("en-AU",{hour:"2-digit",minute:"2-digit"})," AEST"]}),a.jsxs("div",{className:"flex items-center gap-2 bg-dark-800/30 px-4 py-2 rounded-xl border border-dark-700/30",children:[a.jsx(th,{className:"w-5 h-5 text-red-500"}),r.venue]})]}),a.jsxs("div",{className:"bg-dark-800/30 backdrop-blur-sm rounded-2xl p-6 max-w-md mx-auto border border-dark-700/50",children:[a.jsx(Jue,{className:"w-10 h-10 text-red-500 mx-auto mb-3"}),a.jsx("p",{className:"text-white font-semibold mb-2",children:"Don't miss the start!"}),a.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"Keep this tab open  it will automatically refresh when the event goes live."}),a.jsxs("p",{className:"text-gray-600 text-xs flex items-center justify-center gap-1",children:[a.jsx($h,{className:"w-3 h-3"}),"Logged in as: ",i]})]})]})})}):be&&!De&&!Oe?a.jsx("div",{className:"min-h-screen bg-dark-950 flex items-center justify-center p-4",children:a.jsxs("div",{className:"max-w-md w-full relative",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-yellow-500/10 to-orange-500/10 blur-2xl rounded-3xl animate-pulse"}),a.jsxs("div",{className:"relative bg-dark-900/95 backdrop-blur-xl rounded-2xl border border-dark-700/50 p-8 text-center",children:[r.thumbnail_url&&a.jsxs("div",{className:"relative max-w-sm mx-auto mb-6 rounded-xl overflow-hidden",children:[a.jsx("img",{src:r.thumbnail_url,alt:r.title,className:"w-full aspect-video object-cover opacity-60"}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-dark-700 border-t-red-500"})})]}),a.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-yellow-500/20 text-yellow-500 rounded-full text-sm font-medium mb-4 border border-yellow-500/30 animate-pulse",children:[a.jsx(qf,{className:"w-4 h-4"}),"Starting Soon"]}),a.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:r.title}),a.jsx("p",{className:"text-gray-400 mb-6",children:"The event is about to begin. The stream will start momentarily."}),a.jsx("p",{className:"text-gray-500 text-sm",children:"This page will automatically refresh when the stream goes live."}),a.jsxs("p",{className:"text-gray-600 text-xs mt-4 flex items-center justify-center gap-1",children:[a.jsx($h,{className:"w-3 h-3"}),"Logged in as: ",i]})]})]})}):a.jsxs("div",{className:"min-h-screen bg-dark-950",children:[Oe&&a.jsx("div",{className:"bg-gradient-to-r from-yellow-500 to-orange-500 text-black px-4 py-2 text-center text-sm font-medium",children:" Preview Mode  This is how the player page will look. No stream is playing."}),a.jsx("div",{className:"w-full bg-black",children:a.jsx("div",{className:"max-w-6xl mx-auto",children:a.jsx(Mqe,{playbackId:r.mux_playback_id||"demo-playback-id",title:r.title,poster:r.thumbnail_url||r.player_poster_url,isLive:De,viewerEmail:i,onShare:()=>{navigator.share&&navigator.share({title:r.title,text:`Watch ${r.title} live!`,url:window.location.href})}})})}),a.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[a.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-4 mb-6",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-2",children:[a.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-white",children:r.title}),a.jsx(Fqe,{isLive:De,viewerCount:re}),C?.crew_bypass&&a.jsx("span",{className:"px-3 py-1 bg-green-500/20 text-green-400 text-sm font-medium rounded-full border border-green-500/30",children:"Crew Access"})]}),a.jsx("p",{className:"text-gray-400",children:r.organization})]}),De&&a.jsx(Uqe,{eventId:t})]}),a.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-400 mb-8",children:[a.jsxs("div",{className:"flex items-center gap-2 bg-dark-800/30 px-4 py-2 rounded-xl border border-dark-700/30",children:[a.jsx(fc,{className:"w-4 h-4 text-red-500"}),ae.toLocaleDateString("en-AU",{weekday:"long",day:"numeric",month:"long",year:"numeric"})]}),a.jsxs("div",{className:"flex items-center gap-2 bg-dark-800/30 px-4 py-2 rounded-xl border border-dark-700/30",children:[a.jsx(th,{className:"w-4 h-4 text-red-500"}),r.venue]})]}),r.description&&a.jsxs("div",{className:"bg-dark-800/20 rounded-2xl p-6 border border-dark-700/30",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"About This Event"}),a.jsx("p",{className:"text-gray-400 leading-relaxed",children:r.description})]})]})]})}function Hqe(){const t=Ac();Jb();const[e,r]=j.useState(null),[n,i]=j.useState([]),[s,o]=j.useState(!0),[c,u]=j.useState(""),[l,d]=j.useState(!1),[f,A]=j.useState(!1),[p,g]=j.useState(null);j.useEffect(()=>{y();const{data:{subscription:K}}=$Re(async(Y,re)=>{if(Y==="SIGNED_IN"&&re?.user){r(re.user);try{await Tz(re.user.id,re.user.email)}catch(se){console.error("Failed to sync profile:",se)}x(re.user.email)}else Y==="SIGNED_OUT"&&(r(null),i([]))});return()=>K.unsubscribe()},[]);const y=async()=>{try{const K=await FRe();if(K?.user){r(K.user);try{await Tz(K.user.id,K.user.email)}catch(Y){console.error("Failed to sync profile:",Y)}await x(K.user.email)}}catch(K){console.error("Auth check failed:",K)}finally{o(!1)}},x=async K=>{try{const Y=await HRe(K);i(Y||[])}catch(Y){console.error("Failed to load purchases:",Y),g("Failed to load your purchases")}},w=async K=>{if(K.preventDefault(),!!c){d(!0),g(null);try{await MRe(c,`${window.location.origin}/#/my-purchases`),A(!0)}catch(Y){g("Failed to send login link. Please try again."),console.error("Magic link error:",Y)}finally{d(!1)}}},E=async()=>{await URe(),r(null),i([])},T=K=>new Date(K).toLocaleDateString("en-AU",{weekday:"short",day:"numeric",month:"short",year:"numeric"}),C=K=>new Date(K).toLocaleTimeString("en-AU",{hour:"2-digit",minute:"2-digit"}),N=K=>{const Y=new Date,re=new Date(K.start_time),se=new Date(K.end_time);return Y>=re&&Y<=se&&K.is_live},I=K=>new Date(K.start_time)>new Date,U=K=>new Date(K.end_time)<new Date;return s?a.jsx("div",{className:"min-h-screen bg-dark-950 flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-red-500"})}):e?a.jsx("div",{className:"min-h-screen bg-dark-950",children:a.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[a.jsxs("div",{className:"flex items-center justify-between mb-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-white",children:"My Purchases"}),a.jsx("p",{className:"text-gray-400",children:e.email})]}),a.jsxs("button",{onClick:E,className:"flex items-center gap-2 px-4 py-2 text-gray-400 hover:text-white transition-colors",children:[a.jsx(lB,{className:"w-5 h-5"}),"Sign Out"]})]}),n.length===0?a.jsxs("div",{className:"text-center py-16",children:[a.jsx(uB,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),a.jsx("h2",{className:"text-xl font-semibold text-white mb-2",children:"No Purchases Yet"}),a.jsx("p",{className:"text-gray-400 mb-6",children:"You haven't purchased any events yet."}),a.jsx("button",{onClick:()=>t("/live"),className:"px-6 py-3 bg-red-500 hover:bg-red-600 text-white font-semibold rounded-lg transition-colors",children:"Browse Events"})]}):a.jsx("div",{className:"space-y-4",children:n.map(K=>{const Y=K.event,re=N(Y),se=I(Y),Ae=U(Y);return a.jsx("div",{className:"bg-dark-900 rounded-xl border border-dark-800 overflow-hidden hover:border-dark-700 transition-colors",children:a.jsxs("div",{className:"flex flex-col md:flex-row",children:[Y.thumbnail_url&&a.jsx("div",{className:"md:w-48 h-32 md:h-auto flex-shrink-0",children:a.jsx("img",{src:Y.thumbnail_url,alt:Y.title,className:"w-full h-full object-cover"})}),a.jsxs("div",{className:"flex-1 p-5",children:[a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("h3",{className:"text-lg font-bold text-white",children:Y.title}),re&&a.jsxs("span",{className:"px-2 py-0.5 bg-red-500 text-white text-xs font-bold rounded-full flex items-center gap-1",children:[a.jsx("span",{className:"w-1.5 h-1.5 bg-white rounded-full animate-pulse"}),"LIVE"]}),se&&a.jsx("span",{className:"px-2 py-0.5 bg-blue-500/20 text-blue-400 text-xs font-medium rounded-full",children:"Upcoming"}),Ae&&!Y.mux_playback_id&&a.jsx("span",{className:"px-2 py-0.5 bg-gray-500/20 text-gray-400 text-xs font-medium rounded-full",children:"Ended"}),Ae&&Y.mux_playback_id&&a.jsx("span",{className:"px-2 py-0.5 bg-green-500/20 text-green-400 text-xs font-medium rounded-full",children:"Replay Available"})]}),a.jsx("p",{className:"text-gray-400 text-sm mb-3",children:Y.organization}),a.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-500",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(fc,{className:"w-4 h-4"}),T(Y.start_time)]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(DA,{className:"w-4 h-4"}),C(Y.start_time)]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(th,{className:"w-4 h-4"}),Y.venue]})]})]}),(re||se||Y.mux_playback_id)&&a.jsxs("button",{onClick:()=>t(`/watch/${Y.id}?email=${encodeURIComponent(e.email)}`),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-colors flex-shrink-0 ${re?"bg-red-500 hover:bg-red-600 text-white":"bg-dark-800 hover:bg-dark-700 text-white"}`,children:[a.jsx(gf,{className:"w-5 h-5"}),re?"Watch Live":se?"Watch":"Replay"]})]}),a.jsxs("div",{className:"mt-4 pt-4 border-t border-dark-800 flex items-center justify-between text-sm",children:[a.jsxs("span",{className:"text-gray-500",children:["Purchased ",T(K.created_at)]}),a.jsxs("span",{className:"text-green-500 font-medium",children:["$",K.amount," AUD"]})]})]})]})},K.id)})})]})}):a.jsx("div",{className:"min-h-screen bg-dark-950 flex items-center justify-center px-4",children:a.jsxs("div",{className:"max-w-md w-full",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx(uB,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),a.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"My Purchases"}),a.jsx("p",{className:"text-gray-400",children:"Enter your email to access your purchased events"})]}),f?a.jsxs("div",{className:"bg-green-500/10 border border-green-500/30 rounded-xl p-6 text-center",children:[a.jsx(tu,{className:"w-12 h-12 text-green-500 mx-auto mb-4"}),a.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Check Your Email!"}),a.jsxs("p",{className:"text-gray-400 mb-4",children:["We've sent a login link to ",a.jsx("span",{className:"text-white font-medium",children:c})]}),a.jsx("p",{className:"text-sm text-gray-500",children:"Click the link in your email to access your purchases. The link expires in 1 hour."}),a.jsx("button",{onClick:()=>A(!1),className:"mt-4 text-red-500 hover:text-red-400 text-sm",children:"Use a different email"})]}):a.jsxs("form",{onSubmit:w,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Email Address"}),a.jsx("input",{type:"email",value:c,onChange:K=>u(K.target.value),placeholder:"your@email.com",className:"w-full px-4 py-3 bg-dark-800 border border-dark-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-red-500",required:!0})]}),p&&a.jsx("div",{className:"text-red-500 text-sm",children:p}),a.jsx("button",{type:"submit",disabled:l||!c,className:"w-full py-3 bg-red-500 hover:bg-red-600 disabled:bg-dark-700 disabled:text-gray-500 text-white font-semibold rounded-lg transition-colors flex items-center justify-center gap-2",children:l?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-t-2 border-b-2 border-white"}),"Sending..."]}):a.jsxs(a.Fragment,{children:[a.jsx(tu,{className:"w-5 h-5"}),"Send Login Link"]})}),a.jsx("p",{className:"text-sm text-gray-500 text-center",children:"No password needed! We'll email you a secure login link."})]})]})})}function Qqe(){return a.jsx("div",{className:"py-16 px-4",children:a.jsxs("div",{className:"max-w-3xl mx-auto",children:[a.jsx("h1",{className:"text-4xl font-bold text-white mb-8",children:"Privacy Policy"}),a.jsx("p",{className:"text-gray-400 mb-8",children:"Last updated: February 2026"}),a.jsxs("div",{className:"prose prose-invert max-w-none space-y-8",children:[a.jsxs("section",{children:[a.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"1. Who We Are"}),a.jsx("p",{className:"text-gray-300",children:'Fit Focus Media ABN [Your ABN] ("we", "us", "our") operates fitfocusmedia.com.au. We are committed to protecting your privacy and handling your personal information responsibly.'})]}),a.jsxs("section",{children:[a.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"2. Information We Collect"}),a.jsx("p",{className:"text-gray-300 mb-4",children:"We collect the following information when you purchase livestream access:"}),a.jsxs("ul",{className:"list-disc list-inside text-gray-300 space-y-2",children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Email address"}),"  To send your access link and purchase confirmation"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Payment information"}),"  Processed securely by Stripe (we don't store card details)"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Approximate location"}),"  To verify you're not at the venue (geo-blocking) and for analytics"]})]})]}),a.jsxs("section",{children:[a.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"3. How We Use Your Information"}),a.jsxs("ul",{className:"list-disc list-inside text-gray-300 space-y-2",children:[a.jsx("li",{children:"To provide access to livestream events you've purchased"}),a.jsx("li",{children:"To send purchase confirmations and event reminders"}),a.jsx("li",{children:"To enforce geo-blocking restrictions for event protection"}),a.jsx("li",{children:"To analyze where our audience is located (aggregated, anonymized)"}),a.jsx("li",{children:"To improve our services and marketing"})]})]}),a.jsxs("section",{children:[a.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"4. Location Data"}),a.jsx("p",{className:"text-gray-300 mb-4",children:"For certain events, we require location verification to protect ticket sales at physical venues. Your approximate location (latitude/longitude) is:"}),a.jsxs("ul",{className:"list-disc list-inside text-gray-300 space-y-2",children:[a.jsx("li",{children:"Collected once at the time of purchase"}),a.jsx("li",{children:"Used to calculate your distance from the event venue"}),a.jsx("li",{children:"Stored with your order for analytics purposes"}),a.jsx("li",{children:"Never shared with third parties"}),a.jsx("li",{children:"Never used to track you outside of the purchase process"})]})]}),a.jsxs("section",{children:[a.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"5. Data Sharing"}),a.jsx("p",{className:"text-gray-300 mb-4",children:"We share your information only with:"}),a.jsxs("ul",{className:"list-disc list-inside text-gray-300 space-y-2",children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Stripe"}),"  For payment processing"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Postmark"}),"  For sending emails"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Event organizers"}),"  Basic purchase info (email, order ID) for their records"]})]}),a.jsx("p",{className:"text-gray-300 mt-4",children:"We do not sell your personal information to anyone."})]}),a.jsxs("section",{children:[a.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"6. Data Retention"}),a.jsx("p",{className:"text-gray-300",children:"We retain your purchase information for 7 years for accounting and legal purposes. You can request deletion of your data by contacting us (see below)."})]}),a.jsxs("section",{children:[a.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"7. Your Rights"}),a.jsx("p",{className:"text-gray-300 mb-4",children:"Under Australian privacy law, you have the right to:"}),a.jsxs("ul",{className:"list-disc list-inside text-gray-300 space-y-2",children:[a.jsx("li",{children:"Access the personal information we hold about you"}),a.jsx("li",{children:"Request correction of inaccurate information"}),a.jsx("li",{children:"Request deletion of your information"}),a.jsx("li",{children:"Complain to the OAIC if you're unsatisfied with how we handle your data"})]})]}),a.jsxs("section",{children:[a.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"8. Security"}),a.jsx("p",{className:"text-gray-300",children:"We use industry-standard security measures including SSL encryption, secure payment processing through Stripe, and access controls to protect your information."})]}),a.jsxs("section",{children:[a.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"9. Contact Us"}),a.jsxs("p",{className:"text-gray-300",children:["For privacy-related questions or requests, contact us at:",a.jsx("br",{}),a.jsx("strong",{children:"Email:"})," info@fitfocusmedia.com.au",a.jsx("br",{}),a.jsx("strong",{children:"Location:"})," Brisbane, Queensland, Australia"]})]}),a.jsxs("section",{children:[a.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"10. Changes to This Policy"}),a.jsx("p",{className:"text-gray-300",children:"We may update this policy from time to time. Changes will be posted on this page with an updated revision date."})]})]}),a.jsx("div",{className:"mt-12 pt-8 border-t border-dark-700",children:a.jsx(gs,{to:"/",className:"text-red-500 hover:text-red-400",children:" Back to Home"})})]})})}function Vqe(){return a.jsx("div",{className:"py-16 px-4",children:a.jsxs("div",{className:"max-w-3xl mx-auto",children:[a.jsx("h1",{className:"text-4xl font-bold text-white mb-8",children:"Terms of Service"}),a.jsx("p",{className:"text-gray-400 mb-8",children:"Last updated: February 2026"}),a.jsxs("div",{className:"prose prose-invert max-w-none space-y-8",children:[a.jsxs("section",{children:[a.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"1. Acceptance of Terms"}),a.jsx("p",{className:"text-gray-300",children:"By purchasing livestream access through Fit Focus Media, you agree to these Terms of Service and our Privacy Policy. If you do not agree, please do not make a purchase."})]}),a.jsxs("section",{children:[a.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"2. Livestream Access"}),a.jsxs("ul",{className:"list-disc list-inside text-gray-300 space-y-2",children:[a.jsx("li",{children:"Access is granted to the email address used at purchase"}),a.jsxs("li",{children:["Access is for ",a.jsx("strong",{children:"one device at a time"}),"  viewing on multiple devices simultaneously is not permitted"]}),a.jsx("li",{children:"Access includes the live event and replay for 7 days after the event ends"}),a.jsx("li",{children:"Access links are non-transferable"})]})]}),a.jsxs("section",{children:[a.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"3. Geo-Blocking"}),a.jsx("p",{className:"text-gray-300 mb-4",children:"Some events have geographic restrictions to protect in-person ticket sales:"}),a.jsxs("ul",{className:"list-disc list-inside text-gray-300 space-y-2",children:[a.jsx("li",{children:"You may be required to share your location to verify you're not at the venue"}),a.jsx("li",{children:"If you're within the restricted zone, online access will be blocked"}),a.jsx("li",{children:"In-person tickets may be available  check with the event organizer"}),a.jsx("li",{children:"Attempting to circumvent geo-blocking (e.g., using VPNs or fake locations) may result in access being revoked without refund"})]})]}),a.jsxs("section",{children:[a.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"4. Payment"}),a.jsxs("ul",{className:"list-disc list-inside text-gray-300 space-y-2",children:[a.jsx("li",{children:"All prices are in Australian Dollars (AUD)"}),a.jsx("li",{children:"Payment is processed securely by Stripe"}),a.jsx("li",{children:"Your purchase confirmation and access link will be sent to your email"})]})]}),a.jsxs("section",{children:[a.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"5. Refunds"}),a.jsx("p",{className:"text-gray-300 mb-4",children:"Refunds may be issued in the following circumstances:"}),a.jsxs("ul",{className:"list-disc list-inside text-gray-300 space-y-2",children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Event cancelled"}),"  Full refund"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Technical issues on our end"}),"  Full or partial refund at our discretion"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Request before event starts"}),"  Contact us and we'll review on a case-by-case basis"]})]}),a.jsx("p",{className:"text-gray-300 mt-4",children:"Refunds are NOT provided for:"}),a.jsxs("ul",{className:"list-disc list-inside text-gray-300 space-y-2",children:[a.jsx("li",{children:"Change of mind after the event has started"}),a.jsx("li",{children:"Issues with your own internet connection"}),a.jsx("li",{children:"Being blocked by geo-restrictions after purchase (check before buying)"})]})]}),a.jsxs("section",{children:[a.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"6. Prohibited Conduct"}),a.jsx("p",{className:"text-gray-300 mb-4",children:"You agree NOT to:"}),a.jsxs("ul",{className:"list-disc list-inside text-gray-300 space-y-2",children:[a.jsx("li",{children:"Record, download, or redistribute the livestream content"}),a.jsx("li",{children:"Share your access link with others"}),a.jsx("li",{children:"Use VPNs or location spoofing to bypass geo-restrictions"}),a.jsx("li",{children:"Attempt to access streams you haven't paid for"})]}),a.jsx("p",{className:"text-gray-300 mt-4",children:"Violations may result in immediate termination of access without refund."})]}),a.jsxs("section",{children:[a.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"7. Content Ownership"}),a.jsx("p",{className:"text-gray-300",children:"All livestream content is owned by the event organizers and/or Fit Focus Media. Your purchase grants you a limited, personal, non-transferable license to view the content. No other rights are granted."})]}),a.jsxs("section",{children:[a.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"8. Disclaimer"}),a.jsx("p",{className:"text-gray-300",children:'Livestreams are provided "as is". While we strive for a high-quality experience, we cannot guarantee uninterrupted service. Technical issues, internet outages, or other factors may affect your viewing experience.'})]}),a.jsxs("section",{children:[a.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"9. Limitation of Liability"}),a.jsx("p",{className:"text-gray-300",children:"To the maximum extent permitted by law, Fit Focus Media's liability is limited to the amount you paid for the affected purchase. We are not liable for indirect, incidental, or consequential damages."})]}),a.jsxs("section",{children:[a.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"10. Governing Law"}),a.jsx("p",{className:"text-gray-300",children:"These terms are governed by the laws of Queensland, Australia. Any disputes will be resolved in Queensland courts."})]}),a.jsxs("section",{children:[a.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"11. Contact"}),a.jsxs("p",{className:"text-gray-300",children:["Questions about these terms? Contact us at:",a.jsx("br",{}),a.jsx("strong",{children:"Email:"})," info@fitfocusmedia.com.au"]})]})]}),a.jsx("div",{className:"mt-12 pt-8 border-t border-dark-700",children:a.jsx(gs,{to:"/",className:"text-red-500 hover:text-red-400",children:" Back to Home"})})]})})}function zqe(){const{pathname:t}=Ef();return j.useEffect(()=>{window.scrollTo(0,0)},[t]),null}function fh({children:t}){return a.jsxs("div",{className:"min-h-screen bg-dark-950 flex flex-col",children:[a.jsx(Uge,{}),a.jsx("main",{className:"flex-1",children:t}),a.jsx($ge,{})]})}function Kqe(){return a.jsxs(c3e,{children:[a.jsx(zqe,{}),a.jsxs(lue,{children:[a.jsx($s,{path:"/",element:a.jsx(fh,{children:a.jsx(Vge,{})})}),a.jsx($s,{path:"/services",element:a.jsx(fh,{children:a.jsx(Kge,{})})}),a.jsx($s,{path:"/work",element:a.jsx(fh,{children:a.jsx(Wge,{})})}),a.jsx($s,{path:"/proposal",element:a.jsx(fh,{children:a.jsx(qRe,{})})}),a.jsx($s,{path:"/contact",element:a.jsx(fh,{children:a.jsx(XRe,{})})}),a.jsx($s,{path:"/book",element:a.jsx(fh,{children:a.jsx(ZRe,{})})}),a.jsx($s,{path:"/calculator",element:a.jsx(fh,{children:a.jsx(JRe,{})})}),a.jsx($s,{path:"/order",element:a.jsx(fh,{children:a.jsx(n3e,{})})}),a.jsx($s,{path:"/content",element:a.jsx(fh,{children:a.jsx(i3e,{})})}),a.jsx($s,{path:"/order/:orgSlug",element:a.jsx(fh,{children:a.jsx(a3e,{})})}),a.jsx($s,{path:"/proposal/:orgSlug",element:a.jsx(fh,{children:a.jsx(l3e,{})})}),a.jsx($s,{path:"/privacy",element:a.jsx(fh,{children:a.jsx(Qqe,{})})}),a.jsx($s,{path:"/terms",element:a.jsx(fh,{children:a.jsx(Vqe,{})})}),a.jsx($s,{path:"/live",element:a.jsx(fh,{children:a.jsx(UFe,{})})}),a.jsx($s,{path:"/live/:eventId",element:a.jsx(fh,{children:a.jsx(ZFe,{})})}),a.jsx($s,{path:"/watch/:eventId",element:a.jsx($qe,{})}),a.jsx($s,{path:"/my-purchases",element:a.jsx(Hqe,{})}),a.jsx($s,{path:"/contract/:shareToken",element:a.jsx(m3e,{})}),a.jsx($s,{path:"/proposals/:slug",element:a.jsx(MFe,{})}),a.jsx($s,{path:"/onboarding/:token",element:a.jsx(K3e,{})}),a.jsx($s,{path:"/portal",element:a.jsx(Bd,{children:a.jsx(u3e,{})})}),a.jsx($s,{path:"/portal/contracts",element:a.jsx(id,{children:a.jsx(Bd,{children:a.jsx(f3e,{})})})}),a.jsx($s,{path:"/portal/contracts/new",element:a.jsx(id,{children:a.jsx(Bd,{children:a.jsx(Cz,{})})})}),a.jsx($s,{path:"/portal/contracts/:id",element:a.jsx(id,{children:a.jsx(Bd,{children:a.jsx(A3e,{})})})}),a.jsx($s,{path:"/portal/contracts/:id/edit",element:a.jsx(id,{children:a.jsx(Bd,{children:a.jsx(Cz,{editMode:!0})})})}),a.jsx($s,{path:"/portal/onboarding",element:a.jsx(id,{children:a.jsx(Bd,{children:a.jsx(M3e,{})})})}),a.jsx($s,{path:"/portal/onboarding/new",element:a.jsx(id,{children:a.jsx(Bd,{children:a.jsx(F3e,{})})})}),a.jsx($s,{path:"/portal/onboarding/:id",element:a.jsx(id,{children:a.jsx(Bd,{children:a.jsx(Q3e,{})})})}),a.jsx($s,{path:"/portal/pipeline",element:a.jsx(id,{children:a.jsx(Bd,{children:a.jsx(_3e,{})})})}),a.jsx($s,{path:"/portal/pipeline/board",element:a.jsx(id,{children:a.jsx(j3e,{})})}),a.jsx($s,{path:"/portal/pipeline/leads/:id",element:a.jsx(id,{children:a.jsx(N3e,{})})}),a.jsx($s,{path:"/portal/outreach",element:a.jsx(id,{children:a.jsx(Bd,{children:a.jsx(k3e,{})})})}),a.jsx($s,{path:"/portal/content",element:a.jsx(id,{children:a.jsx(Bd,{children:a.jsx(pDe,{})})})}),a.jsx($s,{path:"/portal/content-admin",element:a.jsx(id,{children:a.jsx(Bd,{children:a.jsx(gDe,{})})})}),a.jsx($s,{path:"/portal/orders",element:a.jsx(id,{children:a.jsx(Bd,{children:a.jsx(vDe,{})})})}),a.jsx($s,{path:"/portal/pricing",element:a.jsx(id,{children:a.jsx(Bd,{children:a.jsx(bDe,{})})})}),a.jsx($s,{path:"/portal/crews",element:a.jsx(id,{children:a.jsx(Bd,{children:a.jsx(iFe,{})})})}),a.jsx($s,{path:"/portal/livestream",element:a.jsx(id,{children:a.jsx(Bd,{children:a.jsx(jFe,{})})})}),a.jsx($s,{path:"/portal/proposals",element:a.jsx(id,{children:a.jsx(Bd,{children:a.jsx(BFe,{})})})}),a.jsx($s,{path:"/athlete",element:a.jsx(Z3e,{})}),a.jsx($s,{path:"/athlete/register",element:a.jsx(uDe,{})}),a.jsx($s,{path:"/athlete/packages",element:a.jsx(fDe,{})}),a.jsx($s,{path:"/athlete/dashboard",element:a.jsx(ADe,{})}),a.jsx($s,{path:"/athlete/events/:eventId",element:a.jsx(mDe,{})})]})]})}uce.createRoot(document.getElementById("root")).render(a.jsx(So.StrictMode,{children:a.jsx(Bue,{children:a.jsx(Kqe,{})})}));
