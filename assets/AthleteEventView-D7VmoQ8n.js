import{j as e,x as C,E as d,bb as O,m as U,M as F,I as P,V as _,D as h,P as R,aV as T,aU as B,b4 as M,aS as q,y as J}from"./index-DzwYmX5u.js";import{f as X,h as G,b as c,L as H}from"./vendor-react-q0iRXJvs.js";import{A as K}from"./AthleteLayout-20bZauYQ.js";import{h as Q,i as W,d as Y,e as Z,f as ee,j as p}from"./athleteHelpers-DfE0_HVn.js";import"./vendor-supabase-DhDedaeW.js";import"./log-out-WsUACJe8.js";function re(){const{eventId:g}=X(),u=G(),[D,I]=c.useState(null),[i,L]=c.useState(null),[x,S]=c.useState([]),[m,f]=c.useState("photos"),[E,w]=c.useState(!1),[r,j]=c.useState(0);c.useEffect(()=>{const t=sessionStorage.getItem("athlete_user");if(!t){u("/athlete");return}const a=JSON.parse(t);I(a);const o=Q(g);if(!o){u("/athlete/dashboard");return}const l=W(a.id,g);L(o),S(l);const n=l.filter(v=>v.type==="photo"),z=l.filter(v=>v.type==="video");n.length===0&&z.length>0&&f("videos")},[g,u]);const s=x.filter(t=>t.type==="photo"),b=x.filter(t=>t.type==="video"),N=t=>{(t==="photos"?s:b).forEach((o,l)=>{setTimeout(()=>{const n=document.createElement("a");n.href=p(o.drive_url),n.download=o.title||`${t}-${l+1}`,n.click()},l*500)})},y=(t,a)=>{const o=encodeURIComponent(t.drive_url),l=encodeURIComponent(`Check out my ${t.title} from ${i.name}!`),n={facebook:`https://www.facebook.com/sharer/sharer.php?u=${o}`,instagram:t.drive_url,twitter:`https://twitter.com/intent/tweet?url=${o}&text=${l}`};a==="instagram"?(navigator.clipboard.writeText(t.drive_url),alert("Link copied! Paste it in your Instagram post.")):window.open(n[a],"_blank","width=600,height=400")},$=t=>{j(t),w(!0)},k=()=>{w(!1)},A=()=>{j(t=>(t+1)%s.length)},V=()=>{j(t=>(t-1+s.length)%s.length)};return!D||!i?null:e.jsxs(K,{children:[e.jsxs(H,{to:"/athlete/dashboard",className:"inline-flex items-center gap-2 text-gray-400 hover:text-white transition-colors mb-6",children:[e.jsx(C,{className:"w-4 h-4"}),e.jsx("span",{children:"Back to Dashboard"})]}),e.jsxs(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-r from-[#1a1a2e]/80 to-[#1a1a2e]/50 backdrop-blur-xl border border-white/10 rounded-2xl p-8 mb-8",children:[e.jsxs("div",{className:`inline-flex items-center gap-2 px-4 py-2 rounded-full bg-gradient-to-r ${Z(x[0]?.package_type)} border mb-4`,children:[e.jsx(O,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-semibold",children:Y(x[0]?.package_type)})]}),e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-white mb-4",children:i.name}),e.jsxs("div",{className:"flex flex-wrap items-center gap-6 text-gray-300",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{className:"w-5 h-5 text-[#e51d1d]"}),e.jsx("span",{children:ee(i.date)})]}),i.venue&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(F,{className:"w-5 h-5 text-[#e51d1d]"}),e.jsx("span",{children:i.venue})]}),i.org_name&&e.jsxs("div",{className:"text-gray-400",children:["Organized by ",e.jsx("span",{className:"text-white font-semibold",children:i.org_name})]})]})]}),e.jsxs("div",{className:"flex items-center gap-4 mb-6 border-b border-white/10",children:[e.jsxs("button",{onClick:()=>f("photos"),className:`flex items-center gap-2 px-4 py-3 font-semibold transition-all ${m==="photos"?"text-[#e51d1d] border-b-2 border-[#e51d1d]":"text-gray-400 hover:text-white"}`,children:[e.jsx(P,{className:"w-5 h-5"}),e.jsxs("span",{children:["Photos (",s.length,")"]})]}),e.jsxs("button",{onClick:()=>f("videos"),className:`flex items-center gap-2 px-4 py-3 font-semibold transition-all ${m==="videos"?"text-[#e51d1d] border-b-2 border-[#e51d1d]":"text-gray-400 hover:text-white"}`,children:[e.jsx(_,{className:"w-5 h-5"}),e.jsxs("span",{children:["Videos (",b.length,")"]})]})]}),m==="photos"&&e.jsx(d.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:s.length===0?e.jsxs("div",{className:"bg-[#1a1a2e]/50 backdrop-blur-xl border border-white/10 rounded-xl p-12 text-center",children:[e.jsx(P,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"No photos available"}),e.jsx("p",{className:"text-gray-400",children:"Photos for this event will be added soon."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex justify-end mb-4",children:e.jsxs("button",{onClick:()=>N("photos"),className:"flex items-center gap-2 bg-gradient-to-r from-[#e51d1d] to-red-600 text-white font-semibold px-6 py-3 rounded-lg hover:from-red-600 hover:to-[#e51d1d] transition-all",children:[e.jsx(h,{className:"w-5 h-5"}),"Download All Photos"]})}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:s.map((t,a)=>e.jsxs(d.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:a*.05},className:"group relative aspect-square rounded-lg overflow-hidden bg-[#1a1a2e]/50 border border-white/10 hover:border-[#e51d1d]/50 transition-all cursor-pointer",onClick:()=>$(a),children:[e.jsx("img",{src:t.thumbnail_url,alt:t.title,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity flex items-end p-4",children:e.jsx("p",{className:"text-white text-sm font-medium truncate",children:t.title})}),e.jsx("div",{className:"absolute top-2 right-2 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx("a",{href:p(t.drive_url),download:!0,onClick:o=>o.stopPropagation(),className:"bg-black/50 backdrop-blur-sm p-2 rounded-lg hover:bg-[#e51d1d] transition-colors",children:e.jsx(h,{className:"w-4 h-4 text-white"})})})]},t.id))})]})}),m==="videos"&&e.jsx(d.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:b.length===0?e.jsxs("div",{className:"bg-[#1a1a2e]/50 backdrop-blur-xl border border-white/10 rounded-xl p-12 text-center",children:[e.jsx(_,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"No videos available"}),e.jsx("p",{className:"text-gray-400",children:"Videos for this event will be added soon."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex justify-end mb-4",children:e.jsxs("button",{onClick:()=>N("videos"),className:"flex items-center gap-2 bg-gradient-to-r from-[#e51d1d] to-red-600 text-white font-semibold px-6 py-3 rounded-lg hover:from-red-600 hover:to-[#e51d1d] transition-all",children:[e.jsx(h,{className:"w-5 h-5"}),"Download All Videos"]})}),e.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:b.map((t,a)=>e.jsxs(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:a*.1},className:"bg-[#1a1a2e]/50 backdrop-blur-xl border border-white/10 rounded-xl overflow-hidden hover:border-[#e51d1d]/50 transition-all",children:[e.jsxs("div",{className:"relative aspect-video bg-black group",children:[e.jsx("img",{src:t.thumbnail_url,alt:t.title,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30 group-hover:bg-black/50 transition-colors",children:e.jsx("div",{className:"w-16 h-16 rounded-full bg-[#e51d1d]/80 backdrop-blur-sm flex items-center justify-center group-hover:scale-110 transition-transform",children:e.jsx(R,{className:"w-8 h-8 text-white ml-1"})})}),t.duration&&e.jsx("div",{className:"absolute bottom-3 right-3 bg-black/80 backdrop-blur-sm px-2 py-1 rounded text-xs text-white font-medium",children:t.duration})]}),e.jsxs("div",{className:"p-5",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-3",children:t.title}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("a",{href:p(t.drive_url),download:!0,className:"flex items-center gap-2 bg-gradient-to-r from-[#e51d1d] to-red-600 text-white font-semibold px-4 py-2 rounded-lg hover:from-red-600 hover:to-[#e51d1d] transition-all text-sm",children:[e.jsx(h,{className:"w-4 h-4"}),"Download"]}),e.jsxs("button",{onClick:()=>y(t,"facebook"),className:"flex items-center gap-2 bg-blue-600/20 border border-blue-500/30 text-blue-400 font-medium px-4 py-2 rounded-lg hover:bg-blue-600/30 transition-all text-sm",children:[e.jsx(T,{className:"w-4 h-4"}),"Share"]}),e.jsxs("button",{onClick:()=>y(t,"instagram"),className:"flex items-center gap-2 bg-pink-600/20 border border-pink-500/30 text-pink-400 font-medium px-4 py-2 rounded-lg hover:bg-pink-600/30 transition-all text-sm",children:[e.jsx(B,{className:"w-4 h-4"}),"Copy Link"]})]})]})]},t.id))})]})}),e.jsx(M,{children:E&&s[r]&&e.jsxs(d.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/95 backdrop-blur-xl flex items-center justify-center p-4",onClick:k,children:[e.jsx("button",{onClick:k,className:"absolute top-4 right-4 p-2 rounded-lg bg-white/10 hover:bg-white/20 transition-colors z-10",children:e.jsx(q,{className:"w-6 h-6 text-white"})}),s.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:t=>{t.stopPropagation(),V()},className:"absolute left-4 p-3 rounded-lg bg-white/10 hover:bg-white/20 transition-colors z-10",children:e.jsx(C,{className:"w-6 h-6 text-white"})}),e.jsx("button",{onClick:t=>{t.stopPropagation(),A()},className:"absolute right-4 p-3 rounded-lg bg-white/10 hover:bg-white/20 transition-colors z-10",children:e.jsx(J,{className:"w-6 h-6 text-white"})})]}),e.jsx(d.img,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},src:s[r].drive_url,alt:s[r].title,className:"max-w-full max-h-full object-contain",onClick:t=>t.stopPropagation()},r),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-6",children:e.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-semibold",children:s[r].title}),e.jsxs("p",{className:"text-gray-400 text-sm",children:[r+1," of ",s.length]})]}),e.jsxs("a",{href:p(s[r].drive_url),download:!0,onClick:t=>t.stopPropagation(),className:"flex items-center gap-2 bg-[#e51d1d] text-white font-semibold px-6 py-3 rounded-lg hover:bg-red-600 transition-all",children:[e.jsx(h,{className:"w-5 h-5"}),"Download"]})]})})]})})]})}export{re as default};
