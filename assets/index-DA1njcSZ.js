function fce(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(n,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();var W1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function om(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Vk={exports:{}},Y1={};var A8;function mce(){if(A8)return Y1;A8=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function r(n,i,a){var o=null;if(a!==void 0&&(o=""+a),i.key!==void 0&&(o=""+i.key),"key"in i){a={};for(var c in i)c!=="key"&&(a[c]=i[c])}else a=i;return i=a.ref,{$$typeof:t,type:n,key:o,ref:i!==void 0?i:null,props:a}}return Y1.Fragment=e,Y1.jsx=r,Y1.jsxs=r,Y1}var p8;function Ace(){return p8||(p8=1,Vk.exports=mce()),Vk.exports}var s=Ace(),Kk={exports:{}},Gs={};var g8;function pce(){if(g8)return Gs;g8=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),l=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.for("react.activity"),m=Symbol.iterator;function p(be){return be===null||typeof be!="object"?null:(be=m&&be[m]||be["@@iterator"],typeof be=="function"?be:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,x={};function w(be,ue,Pe){this.props=be,this.context=ue,this.refs=x,this.updater=Pe||g}w.prototype.isReactComponent={},w.prototype.setState=function(be,ue){if(typeof be!="object"&&typeof be!="function"&&be!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,be,ue,"setState")},w.prototype.forceUpdate=function(be){this.updater.enqueueForceUpdate(this,be,"forceUpdate")};function _(){}_.prototype=w.prototype;function E(be,ue,Pe){this.props=be,this.context=ue,this.refs=x,this.updater=Pe||g}var N=E.prototype=new _;N.constructor=E,y(N,w.prototype),N.isPureReactComponent=!0;var C=Array.isArray;function I(){}var D={H:null,A:null,T:null,S:null},U=Object.prototype.hasOwnProperty;function G(be,ue,Pe){var Re=Pe.ref;return{$$typeof:t,type:be,key:ue,ref:Re!==void 0?Re:null,props:Pe}}function q(be,ue){return G(be.type,ue,be.props)}function J(be){return typeof be=="object"&&be!==null&&be.$$typeof===t}function de(be){var ue={"=":"=0",":":"=2"};return"$"+be.replace(/[=:]/g,function(Pe){return ue[Pe]})}var xe=/\/+/g;function we(be,ue){return typeof be=="object"&&be!==null&&be.key!=null?de(""+be.key):ue.toString(36)}function ve(be){switch(be.status){case"fulfilled":return be.value;case"rejected":throw be.reason;default:switch(typeof be.status=="string"?be.then(I,I):(be.status="pending",be.then(function(ue){be.status==="pending"&&(be.status="fulfilled",be.value=ue)},function(ue){be.status==="pending"&&(be.status="rejected",be.reason=ue)})),be.status){case"fulfilled":return be.value;case"rejected":throw be.reason}}throw be}function ne(be,ue,Pe,Re,He){var Fe=typeof be;(Fe==="undefined"||Fe==="boolean")&&(be=null);var ft=!1;if(be===null)ft=!0;else switch(Fe){case"bigint":case"string":case"number":ft=!0;break;case"object":switch(be.$$typeof){case t:case e:ft=!0;break;case d:return ft=be._init,ne(ft(be._payload),ue,Pe,Re,He)}}if(ft)return He=He(be),ft=Re===""?"."+we(be,0):Re,C(He)?(Pe="",ft!=null&&(Pe=ft.replace(xe,"$&/")+"/"),ne(He,ue,Pe,"",function(ut){return ut})):He!=null&&(J(He)&&(He=q(He,Pe+(He.key==null||be&&be.key===He.key?"":(""+He.key).replace(xe,"$&/")+"/")+ft)),ue.push(He)),1;ft=0;var at=Re===""?".":Re+":";if(C(be))for(var De=0;De<be.length;De++)Re=be[De],Fe=at+we(Re,De),ft+=ne(Re,ue,Pe,Fe,He);else if(De=p(be),typeof De=="function")for(be=De.call(be),De=0;!(Re=be.next()).done;)Re=Re.value,Fe=at+we(Re,De++),ft+=ne(Re,ue,Pe,Fe,He);else if(Fe==="object"){if(typeof be.then=="function")return ne(ve(be),ue,Pe,Re,He);throw ue=String(be),Error("Objects are not valid as a React child (found: "+(ue==="[object Object]"?"object with keys {"+Object.keys(be).join(", ")+"}":ue)+"). If you meant to render a collection of children, use an array instead.")}return ft}function ae(be,ue,Pe){if(be==null)return be;var Re=[],He=0;return ne(be,Re,"","",function(Fe){return ue.call(Pe,Fe,He++)}),Re}function oe(be){if(be._status===-1){var ue=be._result;ue=ue(),ue.then(function(Pe){(be._status===0||be._status===-1)&&(be._status=1,be._result=Pe)},function(Pe){(be._status===0||be._status===-1)&&(be._status=2,be._result=Pe)}),be._status===-1&&(be._status=0,be._result=ue)}if(be._status===1)return be._result.default;throw be._result}var Ie=typeof reportError=="function"?reportError:function(be){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ue=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof be=="object"&&be!==null&&typeof be.message=="string"?String(be.message):String(be),error:be});if(!window.dispatchEvent(ue))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",be);return}console.error(be)},Ce={map:ae,forEach:function(be,ue,Pe){ae(be,function(){ue.apply(this,arguments)},Pe)},count:function(be){var ue=0;return ae(be,function(){ue++}),ue},toArray:function(be){return ae(be,function(ue){return ue})||[]},only:function(be){if(!J(be))throw Error("React.Children.only expected to receive a single React element child.");return be}};return Gs.Activity=f,Gs.Children=Ce,Gs.Component=w,Gs.Fragment=r,Gs.Profiler=i,Gs.PureComponent=E,Gs.StrictMode=n,Gs.Suspense=u,Gs.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,Gs.__COMPILER_RUNTIME={__proto__:null,c:function(be){return D.H.useMemoCache(be)}},Gs.cache=function(be){return function(){return be.apply(null,arguments)}},Gs.cacheSignal=function(){return null},Gs.cloneElement=function(be,ue,Pe){if(be==null)throw Error("The argument must be a React element, but you passed "+be+".");var Re=y({},be.props),He=be.key;if(ue!=null)for(Fe in ue.key!==void 0&&(He=""+ue.key),ue)!U.call(ue,Fe)||Fe==="key"||Fe==="__self"||Fe==="__source"||Fe==="ref"&&ue.ref===void 0||(Re[Fe]=ue[Fe]);var Fe=arguments.length-2;if(Fe===1)Re.children=Pe;else if(1<Fe){for(var ft=Array(Fe),at=0;at<Fe;at++)ft[at]=arguments[at+2];Re.children=ft}return G(be.type,He,Re)},Gs.createContext=function(be){return be={$$typeof:o,_currentValue:be,_currentValue2:be,_threadCount:0,Provider:null,Consumer:null},be.Provider=be,be.Consumer={$$typeof:a,_context:be},be},Gs.createElement=function(be,ue,Pe){var Re,He={},Fe=null;if(ue!=null)for(Re in ue.key!==void 0&&(Fe=""+ue.key),ue)U.call(ue,Re)&&Re!=="key"&&Re!=="__self"&&Re!=="__source"&&(He[Re]=ue[Re]);var ft=arguments.length-2;if(ft===1)He.children=Pe;else if(1<ft){for(var at=Array(ft),De=0;De<ft;De++)at[De]=arguments[De+2];He.children=at}if(be&&be.defaultProps)for(Re in ft=be.defaultProps,ft)He[Re]===void 0&&(He[Re]=ft[Re]);return G(be,Fe,He)},Gs.createRef=function(){return{current:null}},Gs.forwardRef=function(be){return{$$typeof:c,render:be}},Gs.isValidElement=J,Gs.lazy=function(be){return{$$typeof:d,_payload:{_status:-1,_result:be},_init:oe}},Gs.memo=function(be,ue){return{$$typeof:l,type:be,compare:ue===void 0?null:ue}},Gs.startTransition=function(be){var ue=D.T,Pe={};D.T=Pe;try{var Re=be(),He=D.S;He!==null&&He(Pe,Re),typeof Re=="object"&&Re!==null&&typeof Re.then=="function"&&Re.then(I,Ie)}catch(Fe){Ie(Fe)}finally{ue!==null&&Pe.types!==null&&(ue.types=Pe.types),D.T=ue}},Gs.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},Gs.use=function(be){return D.H.use(be)},Gs.useActionState=function(be,ue,Pe){return D.H.useActionState(be,ue,Pe)},Gs.useCallback=function(be,ue){return D.H.useCallback(be,ue)},Gs.useContext=function(be){return D.H.useContext(be)},Gs.useDebugValue=function(){},Gs.useDeferredValue=function(be,ue){return D.H.useDeferredValue(be,ue)},Gs.useEffect=function(be,ue){return D.H.useEffect(be,ue)},Gs.useEffectEvent=function(be){return D.H.useEffectEvent(be)},Gs.useId=function(){return D.H.useId()},Gs.useImperativeHandle=function(be,ue,Pe){return D.H.useImperativeHandle(be,ue,Pe)},Gs.useInsertionEffect=function(be,ue){return D.H.useInsertionEffect(be,ue)},Gs.useLayoutEffect=function(be,ue){return D.H.useLayoutEffect(be,ue)},Gs.useMemo=function(be,ue){return D.H.useMemo(be,ue)},Gs.useOptimistic=function(be,ue){return D.H.useOptimistic(be,ue)},Gs.useReducer=function(be,ue,Pe){return D.H.useReducer(be,ue,Pe)},Gs.useRef=function(be){return D.H.useRef(be)},Gs.useState=function(be){return D.H.useState(be)},Gs.useSyncExternalStore=function(be,ue,Pe){return D.H.useSyncExternalStore(be,ue,Pe)},Gs.useTransition=function(){return D.H.useTransition()},Gs.version="19.2.4",Gs}var v8;function u1(){return v8||(v8=1,Kk.exports=pce()),Kk.exports}var T=u1();const So=om(T),gce=fce({__proto__:null,default:So},[T]);var Gk={exports:{}},q1={},Wk={exports:{}},Yk={};var y8;function vce(){return y8||(y8=1,(function(t){function e(ne,ae){var oe=ne.length;ne.push(ae);e:for(;0<oe;){var Ie=oe-1>>>1,Ce=ne[Ie];if(0<i(Ce,ae))ne[Ie]=ae,ne[oe]=Ce,oe=Ie;else break e}}function r(ne){return ne.length===0?null:ne[0]}function n(ne){if(ne.length===0)return null;var ae=ne[0],oe=ne.pop();if(oe!==ae){ne[0]=oe;e:for(var Ie=0,Ce=ne.length,be=Ce>>>1;Ie<be;){var ue=2*(Ie+1)-1,Pe=ne[ue],Re=ue+1,He=ne[Re];if(0>i(Pe,oe))Re<Ce&&0>i(He,Pe)?(ne[Ie]=He,ne[Re]=oe,Ie=Re):(ne[Ie]=Pe,ne[ue]=oe,Ie=ue);else if(Re<Ce&&0>i(He,oe))ne[Ie]=He,ne[Re]=oe,Ie=Re;else break e}}return ae}function i(ne,ae){var oe=ne.sortIndex-ae.sortIndex;return oe!==0?oe:ne.id-ae.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var u=[],l=[],d=1,f=null,m=3,p=!1,g=!1,y=!1,x=!1,w=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function N(ne){for(var ae=r(l);ae!==null;){if(ae.callback===null)n(l);else if(ae.startTime<=ne)n(l),ae.sortIndex=ae.expirationTime,e(u,ae);else break;ae=r(l)}}function C(ne){if(y=!1,N(ne),!g)if(r(u)!==null)g=!0,I||(I=!0,de());else{var ae=r(l);ae!==null&&ve(C,ae.startTime-ne)}}var I=!1,D=-1,U=5,G=-1;function q(){return x?!0:!(t.unstable_now()-G<U)}function J(){if(x=!1,I){var ne=t.unstable_now();G=ne;var ae=!0;try{e:{g=!1,y&&(y=!1,_(D),D=-1),p=!0;var oe=m;try{t:{for(N(ne),f=r(u);f!==null&&!(f.expirationTime>ne&&q());){var Ie=f.callback;if(typeof Ie=="function"){f.callback=null,m=f.priorityLevel;var Ce=Ie(f.expirationTime<=ne);if(ne=t.unstable_now(),typeof Ce=="function"){f.callback=Ce,N(ne),ae=!0;break t}f===r(u)&&n(u),N(ne)}else n(u);f=r(u)}if(f!==null)ae=!0;else{var be=r(l);be!==null&&ve(C,be.startTime-ne),ae=!1}}break e}finally{f=null,m=oe,p=!1}ae=void 0}}finally{ae?de():I=!1}}}var de;if(typeof E=="function")de=function(){E(J)};else if(typeof MessageChannel<"u"){var xe=new MessageChannel,we=xe.port2;xe.port1.onmessage=J,de=function(){we.postMessage(null)}}else de=function(){w(J,0)};function ve(ne,ae){D=w(function(){ne(t.unstable_now())},ae)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ne){ne.callback=null},t.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<ne?Math.floor(1e3/ne):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_next=function(ne){switch(m){case 1:case 2:case 3:var ae=3;break;default:ae=m}var oe=m;m=ae;try{return ne()}finally{m=oe}},t.unstable_requestPaint=function(){x=!0},t.unstable_runWithPriority=function(ne,ae){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var oe=m;m=ne;try{return ae()}finally{m=oe}},t.unstable_scheduleCallback=function(ne,ae,oe){var Ie=t.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?Ie+oe:Ie):oe=Ie,ne){case 1:var Ce=-1;break;case 2:Ce=250;break;case 5:Ce=1073741823;break;case 4:Ce=1e4;break;default:Ce=5e3}return Ce=oe+Ce,ne={id:d++,callback:ae,priorityLevel:ne,startTime:oe,expirationTime:Ce,sortIndex:-1},oe>Ie?(ne.sortIndex=oe,e(l,ne),r(u)===null&&ne===r(l)&&(y?(_(D),D=-1):y=!0,ve(C,oe-Ie))):(ne.sortIndex=Ce,e(u,ne),g||p||(g=!0,I||(I=!0,de()))),ne},t.unstable_shouldYield=q,t.unstable_wrapCallback=function(ne){var ae=m;return function(){var oe=m;m=ae;try{return ne.apply(this,arguments)}finally{m=oe}}}})(Yk)),Yk}var x8;function yce(){return x8||(x8=1,Wk.exports=vce()),Wk.exports}var qk={exports:{}},Zd={};var b8;function xce(){if(b8)return Zd;b8=1;var t=u1();function e(u){var l="https://react.dev/errors/"+u;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)l+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+u+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(e(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(u,l,d){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:f==null?null:""+f,children:u,containerInfo:l,implementation:d}}var o=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(u,l){if(u==="font")return"";if(typeof l=="string")return l==="use-credentials"?l:""}return Zd.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Zd.createPortal=function(u,l){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)throw Error(e(299));return a(u,l,null,d)},Zd.flushSync=function(u){var l=o.T,d=n.p;try{if(o.T=null,n.p=2,u)return u()}finally{o.T=l,n.p=d,n.d.f()}},Zd.preconnect=function(u,l){typeof u=="string"&&(l?(l=l.crossOrigin,l=typeof l=="string"?l==="use-credentials"?l:"":void 0):l=null,n.d.C(u,l))},Zd.prefetchDNS=function(u){typeof u=="string"&&n.d.D(u)},Zd.preinit=function(u,l){if(typeof u=="string"&&l&&typeof l.as=="string"){var d=l.as,f=c(d,l.crossOrigin),m=typeof l.integrity=="string"?l.integrity:void 0,p=typeof l.fetchPriority=="string"?l.fetchPriority:void 0;d==="style"?n.d.S(u,typeof l.precedence=="string"?l.precedence:void 0,{crossOrigin:f,integrity:m,fetchPriority:p}):d==="script"&&n.d.X(u,{crossOrigin:f,integrity:m,fetchPriority:p,nonce:typeof l.nonce=="string"?l.nonce:void 0})}},Zd.preinitModule=function(u,l){if(typeof u=="string")if(typeof l=="object"&&l!==null){if(l.as==null||l.as==="script"){var d=c(l.as,l.crossOrigin);n.d.M(u,{crossOrigin:d,integrity:typeof l.integrity=="string"?l.integrity:void 0,nonce:typeof l.nonce=="string"?l.nonce:void 0})}}else l==null&&n.d.M(u)},Zd.preload=function(u,l){if(typeof u=="string"&&typeof l=="object"&&l!==null&&typeof l.as=="string"){var d=l.as,f=c(d,l.crossOrigin);n.d.L(u,d,{crossOrigin:f,integrity:typeof l.integrity=="string"?l.integrity:void 0,nonce:typeof l.nonce=="string"?l.nonce:void 0,type:typeof l.type=="string"?l.type:void 0,fetchPriority:typeof l.fetchPriority=="string"?l.fetchPriority:void 0,referrerPolicy:typeof l.referrerPolicy=="string"?l.referrerPolicy:void 0,imageSrcSet:typeof l.imageSrcSet=="string"?l.imageSrcSet:void 0,imageSizes:typeof l.imageSizes=="string"?l.imageSizes:void 0,media:typeof l.media=="string"?l.media:void 0})}},Zd.preloadModule=function(u,l){if(typeof u=="string")if(l){var d=c(l.as,l.crossOrigin);n.d.m(u,{as:typeof l.as=="string"&&l.as!=="script"?l.as:void 0,crossOrigin:d,integrity:typeof l.integrity=="string"?l.integrity:void 0})}else n.d.m(u)},Zd.requestFormReset=function(u){n.d.r(u)},Zd.unstable_batchedUpdates=function(u,l){return u(l)},Zd.useFormState=function(u,l,d){return o.H.useFormState(u,l,d)},Zd.useFormStatus=function(){return o.H.useHostTransitionStatus()},Zd.version="19.2.4",Zd}var w8;function hY(){if(w8)return qk.exports;w8=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),qk.exports=xce(),qk.exports}var _8;function bce(){if(_8)return q1;_8=1;var t=yce(),e=u1(),r=hY();function n(h){var A="https://react.dev/errors/"+h;if(1<arguments.length){A+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)A+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+h+"; visit "+A+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(h){return!(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)}function a(h){var A=h,b=h;if(h.alternate)for(;A.return;)A=A.return;else{h=A;do A=h,(A.flags&4098)!==0&&(b=A.return),h=A.return;while(h)}return A.tag===3?b:null}function o(h){if(h.tag===13){var A=h.memoizedState;if(A===null&&(h=h.alternate,h!==null&&(A=h.memoizedState)),A!==null)return A.dehydrated}return null}function c(h){if(h.tag===31){var A=h.memoizedState;if(A===null&&(h=h.alternate,h!==null&&(A=h.memoizedState)),A!==null)return A.dehydrated}return null}function u(h){if(a(h)!==h)throw Error(n(188))}function l(h){var A=h.alternate;if(!A){if(A=a(h),A===null)throw Error(n(188));return A!==h?null:h}for(var b=h,j=A;;){var Y=b.return;if(Y===null)break;var ee=Y.alternate;if(ee===null){if(j=Y.return,j!==null){b=j;continue}break}if(Y.child===ee.child){for(ee=Y.child;ee;){if(ee===b)return u(Y),h;if(ee===j)return u(Y),A;ee=ee.sibling}throw Error(n(188))}if(b.return!==j.return)b=Y,j=ee;else{for(var Te=!1,tt=Y.child;tt;){if(tt===b){Te=!0,b=Y,j=ee;break}if(tt===j){Te=!0,j=Y,b=ee;break}tt=tt.sibling}if(!Te){for(tt=ee.child;tt;){if(tt===b){Te=!0,b=ee,j=Y;break}if(tt===j){Te=!0,j=ee,b=Y;break}tt=tt.sibling}if(!Te)throw Error(n(189))}}if(b.alternate!==j)throw Error(n(190))}if(b.tag!==3)throw Error(n(188));return b.stateNode.current===b?h:A}function d(h){var A=h.tag;if(A===5||A===26||A===27||A===6)return h;for(h=h.child;h!==null;){if(A=d(h),A!==null)return A;h=h.sibling}return null}var f=Object.assign,m=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),y=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),_=Symbol.for("react.consumer"),E=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),U=Symbol.for("react.lazy"),G=Symbol.for("react.activity"),q=Symbol.for("react.memo_cache_sentinel"),J=Symbol.iterator;function de(h){return h===null||typeof h!="object"?null:(h=J&&h[J]||h["@@iterator"],typeof h=="function"?h:null)}var xe=Symbol.for("react.client.reference");function we(h){if(h==null)return null;if(typeof h=="function")return h.$$typeof===xe?null:h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case y:return"Fragment";case w:return"Profiler";case x:return"StrictMode";case C:return"Suspense";case I:return"SuspenseList";case G:return"Activity"}if(typeof h=="object")switch(h.$$typeof){case g:return"Portal";case E:return h.displayName||"Context";case _:return(h._context.displayName||"Context")+".Consumer";case N:var A=h.render;return h=h.displayName,h||(h=A.displayName||A.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case D:return A=h.displayName||null,A!==null?A:we(h.type)||"Memo";case U:A=h._payload,h=h._init;try{return we(h(A))}catch{}}return null}var ve=Array.isArray,ne=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe={pending:!1,data:null,method:null,action:null},Ie=[],Ce=-1;function be(h){return{current:h}}function ue(h){0>Ce||(h.current=Ie[Ce],Ie[Ce]=null,Ce--)}function Pe(h,A){Ce++,Ie[Ce]=h.current,h.current=A}var Re=be(null),He=be(null),Fe=be(null),ft=be(null);function at(h,A){switch(Pe(Fe,A),Pe(He,h),Pe(Re,null),A.nodeType){case 9:case 11:h=(h=A.documentElement)&&(h=h.namespaceURI)?MU(h):0;break;default:if(h=A.tagName,A=A.namespaceURI)A=MU(A),h=FU(A,h);else switch(h){case"svg":h=1;break;case"math":h=2;break;default:h=0}}ue(Re),Pe(Re,h)}function De(){ue(Re),ue(He),ue(Fe)}function ut(h){h.memoizedState!==null&&Pe(ft,h);var A=Re.current,b=FU(A,h.type);A!==b&&(Pe(He,h),Pe(Re,b))}function et(h){He.current===h&&(ue(Re),ue(He)),ft.current===h&&(ue(ft),z1._currentValue=oe)}var Ue,jt;function rt(h){if(Ue===void 0)try{throw Error()}catch(b){var A=b.stack.trim().match(/\n( *(at )?)/);Ue=A&&A[1]||"",jt=-1<b.stack.indexOf(`
    at`)?" (<anonymous>)":-1<b.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ue+h+jt}var Ct=!1;function ke(h,A){if(!h||Ct)return"";Ct=!0;var b=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var j={DetermineComponentFrameRoot:function(){try{if(A){var rn=function(){throw Error()};if(Object.defineProperty(rn.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(rn,[])}catch(Br){var Cr=Br}Reflect.construct(h,[],rn)}else{try{rn.call()}catch(Br){Cr=Br}h.call(rn.prototype)}}else{try{throw Error()}catch(Br){Cr=Br}(rn=h())&&typeof rn.catch=="function"&&rn.catch(function(){})}}catch(Br){if(Br&&Cr&&typeof Br.stack=="string")return[Br.stack,Cr.stack]}return[null,null]}};j.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var Y=Object.getOwnPropertyDescriptor(j.DetermineComponentFrameRoot,"name");Y&&Y.configurable&&Object.defineProperty(j.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var ee=j.DetermineComponentFrameRoot(),Te=ee[0],tt=ee[1];if(Te&&tt){var Pt=Te.split(`
`),jr=tt.split(`
`);for(Y=j=0;j<Pt.length&&!Pt[j].includes("DetermineComponentFrameRoot");)j++;for(;Y<jr.length&&!jr[Y].includes("DetermineComponentFrameRoot");)Y++;if(j===Pt.length||Y===jr.length)for(j=Pt.length-1,Y=jr.length-1;1<=j&&0<=Y&&Pt[j]!==jr[Y];)Y--;for(;1<=j&&0<=Y;j--,Y--)if(Pt[j]!==jr[Y]){if(j!==1||Y!==1)do if(j--,Y--,0>Y||Pt[j]!==jr[Y]){var Kr=`
`+Pt[j].replace(" at new "," at ");return h.displayName&&Kr.includes("<anonymous>")&&(Kr=Kr.replace("<anonymous>",h.displayName)),Kr}while(1<=j&&0<=Y);break}}}finally{Ct=!1,Error.prepareStackTrace=b}return(b=h?h.displayName||h.name:"")?rt(b):""}function Xe(h,A){switch(h.tag){case 26:case 27:case 5:return rt(h.type);case 16:return rt("Lazy");case 13:return h.child!==A&&A!==null?rt("Suspense Fallback"):rt("Suspense");case 19:return rt("SuspenseList");case 0:case 15:return ke(h.type,!1);case 11:return ke(h.type.render,!1);case 1:return ke(h.type,!0);case 31:return rt("Activity");default:return""}}function mt(h){try{var A="",b=null;do A+=Xe(h,b),b=h,h=h.return;while(h);return A}catch(j){return`
Error generating stack: `+j.message+`
`+j.stack}}var Jt=Object.prototype.hasOwnProperty,tr=t.unstable_scheduleCallback,lr=t.unstable_cancelCallback,Pr=t.unstable_shouldYield,tn=t.unstable_requestPaint,Gr=t.unstable_now,Xr=t.unstable_getCurrentPriorityLevel,Qr=t.unstable_ImmediatePriority,Pn=t.unstable_UserBlockingPriority,wn=t.unstable_NormalPriority,yi=t.unstable_LowPriority,ot=t.unstable_IdlePriority,Gt=t.log,Ir=t.unstable_setDisableYieldValue,ar=null,Qt=null;function gr(h){if(typeof Gt=="function"&&Ir(h),Qt&&typeof Qt.setStrictMode=="function")try{Qt.setStrictMode(ar,h)}catch{}}var Yr=Math.clz32?Math.clz32:fn,en=Math.log,On=Math.LN2;function fn(h){return h>>>=0,h===0?32:31-(en(h)/On|0)|0}var Jn=256,ln=262144,Hr=4194304;function yn(h){var A=h&42;if(A!==0)return A;switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return h&261888;case 262144:case 524288:case 1048576:case 2097152:return h&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return h&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return h}}function mn(h,A,b){var j=h.pendingLanes;if(j===0)return 0;var Y=0,ee=h.suspendedLanes,Te=h.pingedLanes;h=h.warmLanes;var tt=j&134217727;return tt!==0?(j=tt&~ee,j!==0?Y=yn(j):(Te&=tt,Te!==0?Y=yn(Te):b||(b=tt&~h,b!==0&&(Y=yn(b))))):(tt=j&~ee,tt!==0?Y=yn(tt):Te!==0?Y=yn(Te):b||(b=j&~h,b!==0&&(Y=yn(b)))),Y===0?0:A!==0&&A!==Y&&(A&ee)===0&&(ee=Y&-Y,b=A&-A,ee>=b||ee===32&&(b&4194048)!==0)?A:Y}function Mn(h,A){return(h.pendingLanes&~(h.suspendedLanes&~h.pingedLanes)&A)===0}function li(h,A){switch(h){case 1:case 2:case 4:case 8:case 64:return A+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return A+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Cs(){var h=Hr;return Hr<<=1,(Hr&62914560)===0&&(Hr=4194304),h}function Ms(h){for(var A=[],b=0;31>b;b++)A.push(h);return A}function Ns(h,A){h.pendingLanes|=A,A!==268435456&&(h.suspendedLanes=0,h.pingedLanes=0,h.warmLanes=0)}function ei(h,A,b,j,Y,ee){var Te=h.pendingLanes;h.pendingLanes=b,h.suspendedLanes=0,h.pingedLanes=0,h.warmLanes=0,h.expiredLanes&=b,h.entangledLanes&=b,h.errorRecoveryDisabledLanes&=b,h.shellSuspendCounter=0;var tt=h.entanglements,Pt=h.expirationTimes,jr=h.hiddenUpdates;for(b=Te&~b;0<b;){var Kr=31-Yr(b),rn=1<<Kr;tt[Kr]=0,Pt[Kr]=-1;var Cr=jr[Kr];if(Cr!==null)for(jr[Kr]=null,Kr=0;Kr<Cr.length;Kr++){var Br=Cr[Kr];Br!==null&&(Br.lane&=-536870913)}b&=~rn}j!==0&&un(h,j,0),ee!==0&&Y===0&&h.tag!==0&&(h.suspendedLanes|=ee&~(Te&~A))}function un(h,A,b){h.pendingLanes|=A,h.suspendedLanes&=~A;var j=31-Yr(A);h.entangledLanes|=A,h.entanglements[j]=h.entanglements[j]|1073741824|b&261930}function as(h,A){var b=h.entangledLanes|=A;for(h=h.entanglements;b;){var j=31-Yr(b),Y=1<<j;Y&A|h[j]&A&&(h[j]|=A),b&=~Y}}function ta(h,A){var b=A&-A;return b=(b&42)!==0?1:jn(b),(b&(h.suspendedLanes|A))!==0?0:b}function jn(h){switch(h){case 2:h=1;break;case 8:h=4;break;case 32:h=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:h=128;break;case 268435456:h=134217728;break;default:h=0}return h}function Nn(h){return h&=-h,2<h?8<h?(h&134217727)!==0?32:268435456:8:2}function Fs(){var h=ae.p;return h!==0?h:(h=window.event,h===void 0?32:l8(h.type))}function Qs(h,A){var b=ae.p;try{return ae.p=h,A()}finally{ae.p=b}}var Us=Math.random().toString(36).slice(2),ns="__reactFiber$"+Us,qs="__reactProps$"+Us,Rs="__reactContainer$"+Us,za="__reactEvents$"+Us,hs="__reactListeners$"+Us,wu="__reactHandles$"+Us,ro="__reactResources$"+Us,Fl="__reactMarker$"+Us;function nu(h){delete h[ns],delete h[qs],delete h[za],delete h[hs],delete h[wu]}function pl(h){var A=h[ns];if(A)return A;for(var b=h.parentNode;b;){if(A=b[Rs]||b[ns]){if(b=A.alternate,A.child!==null||b!==null&&b.child!==null)for(h=KU(h);h!==null;){if(b=h[ns])return b;h=KU(h)}return A}h=b,b=h.parentNode}return null}function ra(h){if(h=h[ns]||h[Rs]){var A=h.tag;if(A===5||A===6||A===13||A===31||A===26||A===27||A===3)return h}return null}function qa(h){var A=h.tag;if(A===5||A===26||A===27||A===6)return h.stateNode;throw Error(n(33))}function Ws(h){var A=h[ro];return A||(A=h[ro]={hoistableStyles:new Map,hoistableScripts:new Map}),A}function wa(h){h[Fl]=!0}var $s=new Set,Ll={};function go(h,A){no(h,A),no(h+"Capture",A)}function no(h,A){for(Ll[h]=A,h=0;h<A.length;h++)$s.add(A[h])}var gl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ul={},mc={};function zs(h){return Jt.call(mc,h)?!0:Jt.call(Ul,h)?!1:gl.test(h)?mc[h]=!0:(Ul[h]=!0,!1)}function ci(h,A,b){if(zs(A))if(b===null)h.removeAttribute(A);else{switch(typeof b){case"undefined":case"function":case"symbol":h.removeAttribute(A);return;case"boolean":var j=A.toLowerCase().slice(0,5);if(j!=="data-"&&j!=="aria-"){h.removeAttribute(A);return}}h.setAttribute(A,""+b)}}function ks(h,A,b){if(b===null)h.removeAttribute(A);else{switch(typeof b){case"undefined":case"function":case"symbol":case"boolean":h.removeAttribute(A);return}h.setAttribute(A,""+b)}}function Ta(h,A,b,j){if(j===null)h.removeAttribute(b);else{switch(typeof j){case"undefined":case"function":case"symbol":case"boolean":h.removeAttribute(b);return}h.setAttributeNS(A,b,""+j)}}function Va(h){switch(typeof h){case"bigint":case"boolean":case"number":case"string":case"undefined":return h;case"object":return h;default:return""}}function Ca(h){var A=h.type;return(h=h.nodeName)&&h.toLowerCase()==="input"&&(A==="checkbox"||A==="radio")}function gi(h,A,b){var j=Object.getOwnPropertyDescriptor(h.constructor.prototype,A);if(!h.hasOwnProperty(A)&&typeof j<"u"&&typeof j.get=="function"&&typeof j.set=="function"){var Y=j.get,ee=j.set;return Object.defineProperty(h,A,{configurable:!0,get:function(){return Y.call(this)},set:function(Te){b=""+Te,ee.call(this,Te)}}),Object.defineProperty(h,A,{enumerable:j.enumerable}),{getValue:function(){return b},setValue:function(Te){b=""+Te},stopTracking:function(){h._valueTracker=null,delete h[A]}}}}function Zn(h){if(!h._valueTracker){var A=Ca(h)?"checked":"value";h._valueTracker=gi(h,A,""+h[A])}}function fs(h){if(!h)return!1;var A=h._valueTracker;if(!A)return!0;var b=A.getValue(),j="";return h&&(j=Ca(h)?h.checked?"true":"false":h.value),h=j,h!==b?(A.setValue(h),!0):!1}function _a(h){if(h=h||(typeof document<"u"?document:void 0),typeof h>"u")return null;try{return h.activeElement||h.body}catch{return h.body}}var Qo=/[\n"\\]/g;function Hi(h){return h.replace(Qo,function(A){return"\\"+A.charCodeAt(0).toString(16)+" "})}function zo(h,A,b,j,Y,ee,Te,tt){h.name="",Te!=null&&typeof Te!="function"&&typeof Te!="symbol"&&typeof Te!="boolean"?h.type=Te:h.removeAttribute("type"),A!=null?Te==="number"?(A===0&&h.value===""||h.value!=A)&&(h.value=""+Va(A)):h.value!==""+Va(A)&&(h.value=""+Va(A)):Te!=="submit"&&Te!=="reset"||h.removeAttribute("value"),A!=null?Xs(h,Te,Va(A)):b!=null?Xs(h,Te,Va(b)):j!=null&&h.removeAttribute("value"),Y==null&&ee!=null&&(h.defaultChecked=!!ee),Y!=null&&(h.checked=Y&&typeof Y!="function"&&typeof Y!="symbol"),tt!=null&&typeof tt!="function"&&typeof tt!="symbol"&&typeof tt!="boolean"?h.name=""+Va(tt):h.removeAttribute("name")}function Ea(h,A,b,j,Y,ee,Te,tt){if(ee!=null&&typeof ee!="function"&&typeof ee!="symbol"&&typeof ee!="boolean"&&(h.type=ee),A!=null||b!=null){if(!(ee!=="submit"&&ee!=="reset"||A!=null)){Zn(h);return}b=b!=null?""+Va(b):"",A=A!=null?""+Va(A):b,tt||A===h.value||(h.value=A),h.defaultValue=A}j=j??Y,j=typeof j!="function"&&typeof j!="symbol"&&!!j,h.checked=tt?h.checked:!!j,h.defaultChecked=!!j,Te!=null&&typeof Te!="function"&&typeof Te!="symbol"&&typeof Te!="boolean"&&(h.name=Te),Zn(h)}function Xs(h,A,b){A==="number"&&_a(h.ownerDocument)===h||h.defaultValue===""+b||(h.defaultValue=""+b)}function ms(h,A,b,j){if(h=h.options,A){A={};for(var Y=0;Y<b.length;Y++)A["$"+b[Y]]=!0;for(b=0;b<h.length;b++)Y=A.hasOwnProperty("$"+h[b].value),h[b].selected!==Y&&(h[b].selected=Y),Y&&j&&(h[b].defaultSelected=!0)}else{for(b=""+Va(b),A=null,Y=0;Y<h.length;Y++){if(h[Y].value===b){h[Y].selected=!0,j&&(h[Y].defaultSelected=!0);return}A!==null||h[Y].disabled||(A=h[Y])}A!==null&&(A.selected=!0)}}function jo(h,A,b){if(A!=null&&(A=""+Va(A),A!==h.value&&(h.value=A),b==null)){h.defaultValue!==A&&(h.defaultValue=A);return}h.defaultValue=b!=null?""+Va(b):""}function Ka(h,A,b,j){if(A==null){if(j!=null){if(b!=null)throw Error(n(92));if(ve(j)){if(1<j.length)throw Error(n(93));j=j[0]}b=j}b==null&&(b=""),A=b}b=Va(A),h.defaultValue=b,j=h.textContent,j===b&&j!==""&&j!==null&&(h.value=j),Zn(h)}function Vs(h,A){if(A){var b=h.firstChild;if(b&&b===h.lastChild&&b.nodeType===3){b.nodeValue=A;return}}h.textContent=A}var Xa=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function vo(h,A,b){var j=A.indexOf("--")===0;b==null||typeof b=="boolean"||b===""?j?h.setProperty(A,""):A==="float"?h.cssFloat="":h[A]="":j?h.setProperty(A,b):typeof b!="number"||b===0||Xa.has(A)?A==="float"?h.cssFloat=b:h[A]=(""+b).trim():h[A]=b+"px"}function io(h,A,b){if(A!=null&&typeof A!="object")throw Error(n(62));if(h=h.style,b!=null){for(var j in b)!b.hasOwnProperty(j)||A!=null&&A.hasOwnProperty(j)||(j.indexOf("--")===0?h.setProperty(j,""):j==="float"?h.cssFloat="":h[j]="");for(var Y in A)j=A[Y],A.hasOwnProperty(Y)&&b[Y]!==j&&vo(h,Y,j)}else for(var ee in A)A.hasOwnProperty(ee)&&vo(h,ee,A[ee])}function Vo(h){if(h.indexOf("-")===-1)return!1;switch(h){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ht=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),V=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function se(h){return V.test(""+h)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":h}function ce(){}var $=null;function K(h){return h=h.target||h.srcElement||window,h.correspondingUseElement&&(h=h.correspondingUseElement),h.nodeType===3?h.parentNode:h}var ie=null,me=null;function Se(h){var A=ra(h);if(A&&(h=A.stateNode)){var b=h[qs]||null;e:switch(h=A.stateNode,A.type){case"input":if(zo(h,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name),A=b.name,b.type==="radio"&&A!=null){for(b=h;b.parentNode;)b=b.parentNode;for(b=b.querySelectorAll('input[name="'+Hi(""+A)+'"][type="radio"]'),A=0;A<b.length;A++){var j=b[A];if(j!==h&&j.form===h.form){var Y=j[qs]||null;if(!Y)throw Error(n(90));zo(j,Y.value,Y.defaultValue,Y.defaultValue,Y.checked,Y.defaultChecked,Y.type,Y.name)}}for(A=0;A<b.length;A++)j=b[A],j.form===h.form&&fs(j)}break e;case"textarea":jo(h,b.value,b.defaultValue);break e;case"select":A=b.value,A!=null&&ms(h,!!b.multiple,A,!1)}}}var Qe=!1;function ht(h,A,b){if(Qe)return h(A,b);Qe=!0;try{var j=h(A);return j}finally{if(Qe=!1,(ie!==null||me!==null)&&(Iu(),ie&&(A=ie,h=me,me=ie=null,Se(A),h)))for(A=0;A<h.length;A++)Se(h[A])}}function P(h,A){var b=h.stateNode;if(b===null)return null;var j=b[qs]||null;if(j===null)return null;b=j[A];e:switch(A){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(j=!j.disabled)||(h=h.type,j=!(h==="button"||h==="input"||h==="select"||h==="textarea")),h=!j;break e;default:h=!1}if(h)return null;if(b&&typeof b!="function")throw Error(n(231,A,typeof b));return b}var k=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),M=!1;if(k)try{var W={};Object.defineProperty(W,"passive",{get:function(){M=!0}}),window.addEventListener("test",W,W),window.removeEventListener("test",W,W)}catch{M=!1}var Z=null,re=null,ye=null;function fe(){if(ye)return ye;var h,A=re,b=A.length,j,Y="value"in Z?Z.value:Z.textContent,ee=Y.length;for(h=0;h<b&&A[h]===Y[h];h++);var Te=b-h;for(j=1;j<=Te&&A[b-j]===Y[ee-j];j++);return ye=Y.slice(h,1<j?1-j:void 0)}function Ae(h){var A=h.keyCode;return"charCode"in h?(h=h.charCode,h===0&&A===13&&(h=13)):h=A,h===10&&(h=13),32<=h||h===13?h:0}function Le(){return!0}function Ve(){return!1}function Ze(h){function A(b,j,Y,ee,Te){this._reactName=b,this._targetInst=Y,this.type=j,this.nativeEvent=ee,this.target=Te,this.currentTarget=null;for(var tt in h)h.hasOwnProperty(tt)&&(b=h[tt],this[tt]=b?b(ee):ee[tt]);return this.isDefaultPrevented=(ee.defaultPrevented!=null?ee.defaultPrevented:ee.returnValue===!1)?Le:Ve,this.isPropagationStopped=Ve,this}return f(A.prototype,{preventDefault:function(){this.defaultPrevented=!0;var b=this.nativeEvent;b&&(b.preventDefault?b.preventDefault():typeof b.returnValue!="unknown"&&(b.returnValue=!1),this.isDefaultPrevented=Le)},stopPropagation:function(){var b=this.nativeEvent;b&&(b.stopPropagation?b.stopPropagation():typeof b.cancelBubble!="unknown"&&(b.cancelBubble=!0),this.isPropagationStopped=Le)},persist:function(){},isPersistent:Le}),A}var dt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(h){return h.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},je=Ze(dt),St=f({},dt,{view:0,detail:0}),ct=Ze(St),Nt,it,Ot,qt=f({},St,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Or,button:0,buttons:0,relatedTarget:function(h){return h.relatedTarget===void 0?h.fromElement===h.srcElement?h.toElement:h.fromElement:h.relatedTarget},movementX:function(h){return"movementX"in h?h.movementX:(h!==Ot&&(Ot&&h.type==="mousemove"?(Nt=h.screenX-Ot.screenX,it=h.screenY-Ot.screenY):it=Nt=0,Ot=h),Nt)},movementY:function(h){return"movementY"in h?h.movementY:it}}),It=Ze(qt),nt=f({},qt,{dataTransfer:0}),Vt=Ze(nt),Tr=f({},St,{relatedTarget:0}),or=Ze(Tr),Mt=f({},dt,{animationName:0,elapsedTime:0,pseudoElement:0}),_r=Ze(Mt),lt=f({},dt,{clipboardData:function(h){return"clipboardData"in h?h.clipboardData:window.clipboardData}}),vt=Ze(lt),Rt=f({},dt,{data:0}),Dt=Ze(Rt),vr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Rr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ur(h){var A=this.nativeEvent;return A.getModifierState?A.getModifierState(h):(h=Rr[h])?!!A[h]:!1}function Or(){return ur}var pn=f({},St,{key:function(h){if(h.key){var A=vr[h.key]||h.key;if(A!=="Unidentified")return A}return h.type==="keypress"?(h=Ae(h),h===13?"Enter":String.fromCharCode(h)):h.type==="keydown"||h.type==="keyup"?kr[h.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Or,charCode:function(h){return h.type==="keypress"?Ae(h):0},keyCode:function(h){return h.type==="keydown"||h.type==="keyup"?h.keyCode:0},which:function(h){return h.type==="keypress"?Ae(h):h.type==="keydown"||h.type==="keyup"?h.keyCode:0}}),on=Ze(pn),Ye=f({},qt,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Tt=Ze(Ye),Lt=f({},St,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Or}),Wt=Ze(Lt),Xt=f({},dt,{propertyName:0,elapsedTime:0,pseudoElement:0}),fr=Ze(Xt),Lr=f({},qt,{deltaX:function(h){return"deltaX"in h?h.deltaX:"wheelDeltaX"in h?-h.wheelDeltaX:0},deltaY:function(h){return"deltaY"in h?h.deltaY:"wheelDeltaY"in h?-h.wheelDeltaY:"wheelDelta"in h?-h.wheelDelta:0},deltaZ:0,deltaMode:0}),Nr=Ze(Lr),Zr=f({},dt,{newState:0,oldState:0}),An=Ze(Zr),Sn=[9,13,27,32],Fn=k&&"CompositionEvent"in window,xi=null;k&&"documentMode"in document&&(xi=document.documentMode);var yt=k&&"TextEvent"in window&&!xi,Tn=k&&(!Fn||xi&&8<xi&&11>=xi),Ri=" ",Cn=!1;function cn(h,A){switch(h){case"keyup":return Sn.indexOf(A.keyCode)!==-1;case"keydown":return A.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ni(h){return h=h.detail,typeof h=="object"&&"data"in h?h.data:null}var $n=!1;function zn(h,A){switch(h){case"compositionend":return Ni(A);case"keypress":return A.which!==32?null:(Cn=!0,Ri);case"textInput":return h=A.data,h===Ri&&Cn?null:h;default:return null}}function Qn(h,A){if($n)return h==="compositionend"||!Fn&&cn(h,A)?(h=fe(),ye=re=Z=null,$n=!1,h):null;switch(h){case"paste":return null;case"keypress":if(!(A.ctrlKey||A.altKey||A.metaKey)||A.ctrlKey&&A.altKey){if(A.char&&1<A.char.length)return A.char;if(A.which)return String.fromCharCode(A.which)}return null;case"compositionend":return Tn&&A.locale!=="ko"?null:A.data;default:return null}}var va={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Di(h){var A=h&&h.nodeName&&h.nodeName.toLowerCase();return A==="input"?!!va[h.type]:A==="textarea"}function Wn(h,A,b,j){ie?me?me.push(j):me=[j]:ie=j,A=jE(A,"onChange"),0<A.length&&(b=new je("onChange","change",null,b,j),h.push({event:b,listeners:A}))}var is=null,Si=null;function Hn(h){IU(h,0)}function Li(h){var A=qa(h);if(fs(A))return h}function Yn(h,A){if(h==="change")return A}var Gi=!1;if(k){var ss;if(k){var Zi="oninput"in document;if(!Zi){var ys=document.createElement("div");ys.setAttribute("oninput","return;"),Zi=typeof ys.oninput=="function"}ss=Zi}else ss=!1;Gi=ss&&(!document.documentMode||9<document.documentMode)}function Na(){is&&(is.detachEvent("onpropertychange",bi),Si=is=null)}function bi(h){if(h.propertyName==="value"&&Li(Si)){var A=[];Wn(A,Si,h,K(h)),ht(Hn,A)}}function Ys(h,A,b){h==="focusin"?(Na(),is=A,Si=b,is.attachEvent("onpropertychange",bi)):h==="focusout"&&Na()}function Qi(h){if(h==="selectionchange"||h==="keyup"||h==="keydown")return Li(Si)}function ai(h,A){if(h==="click")return Li(A)}function ha(h,A){if(h==="input"||h==="change")return Li(A)}function Ii(h,A){return h===A&&(h!==0||1/h===1/A)||h!==h&&A!==A}var _n=typeof Object.is=="function"?Object.is:Ii;function cs(h,A){if(_n(h,A))return!0;if(typeof h!="object"||h===null||typeof A!="object"||A===null)return!1;var b=Object.keys(h),j=Object.keys(A);if(b.length!==j.length)return!1;for(j=0;j<b.length;j++){var Y=b[j];if(!Jt.call(A,Y)||!_n(h[Y],A[Y]))return!1}return!0}function _u(h){for(;h&&h.firstChild;)h=h.firstChild;return h}function so(h,A){var b=_u(h);h=0;for(var j;b;){if(b.nodeType===3){if(j=h+b.textContent.length,h<=A&&j>=A)return{node:b,offset:A-h};h=j}e:{for(;b;){if(b.nextSibling){b=b.nextSibling;break e}b=b.parentNode}b=void 0}b=_u(b)}}function Ko(h,A){return h&&A?h===A?!0:h&&h.nodeType===3?!1:A&&A.nodeType===3?Ko(h,A.parentNode):"contains"in h?h.contains(A):h.compareDocumentPosition?!!(h.compareDocumentPosition(A)&16):!1:!1}function ec(h){h=h!=null&&h.ownerDocument!=null&&h.ownerDocument.defaultView!=null?h.ownerDocument.defaultView:window;for(var A=_a(h.document);A instanceof h.HTMLIFrameElement;){try{var b=typeof A.contentWindow.location.href=="string"}catch{b=!1}if(b)h=A.contentWindow;else break;A=_a(h.document)}return A}function wi(h){var A=h&&h.nodeName&&h.nodeName.toLowerCase();return A&&(A==="input"&&(h.type==="text"||h.type==="search"||h.type==="tel"||h.type==="url"||h.type==="password")||A==="textarea"||h.contentEditable==="true")}var Da=k&&"documentMode"in document&&11>=document.documentMode,Za=null,$l=null,Hl=null,fa=!1;function yo(h,A,b){var j=b.window===b?b.document:b.nodeType===9?b:b.ownerDocument;fa||Za==null||Za!==_a(j)||(j=Za,"selectionStart"in j&&wi(j)?j={start:j.selectionStart,end:j.selectionEnd}:(j=(j.ownerDocument&&j.ownerDocument.defaultView||window).getSelection(),j={anchorNode:j.anchorNode,anchorOffset:j.anchorOffset,focusNode:j.focusNode,focusOffset:j.focusOffset}),Hl&&cs(Hl,j)||(Hl=j,j=jE($l,"onSelect"),0<j.length&&(A=new je("onSelect","select",null,A,b),h.push({event:A,listeners:j}),A.target=Za)))}function Ja(h,A){var b={};return b[h.toLowerCase()]=A.toLowerCase(),b["Webkit"+h]="webkit"+A,b["Moz"+h]="moz"+A,b}var Hc={animationend:Ja("Animation","AnimationEnd"),animationiteration:Ja("Animation","AnimationIteration"),animationstart:Ja("Animation","AnimationStart"),transitionrun:Ja("Transition","TransitionRun"),transitionstart:Ja("Transition","TransitionStart"),transitioncancel:Ja("Transition","TransitionCancel"),transitionend:Ja("Transition","TransitionEnd")},To={},Ac={};k&&(Ac=document.createElement("div").style,"AnimationEvent"in window||(delete Hc.animationend.animation,delete Hc.animationiteration.animation,delete Hc.animationstart.animation),"TransitionEvent"in window||delete Hc.transitionend.transition);function Ga(h){if(To[h])return To[h];if(!Hc[h])return h;var A=Hc[h],b;for(b in A)if(A.hasOwnProperty(b)&&b in Ac)return To[h]=A[b];return h}var Ql=Ga("animationend"),zl=Ga("animationiteration"),Il=Ga("animationstart"),bd=Ga("transitionrun"),tc=Ga("transitionstart"),Vl=Ga("transitioncancel"),pc=Ga("transitionend"),wd=new Map,Kl="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Kl.push("scrollEnd");function Gl(h,A){wd.set(h,A),go(A,[h])}var Eu=typeof reportError=="function"?reportError:function(h){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var A=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof h=="object"&&h!==null&&typeof h.message=="string"?String(h.message):String(h),error:h});if(!window.dispatchEvent(A))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",h);return}console.error(h)},Wl=[],Io=0,vl=0;function iu(){for(var h=Io,A=vl=Io=0;A<h;){var b=Wl[A];Wl[A++]=null;var j=Wl[A];Wl[A++]=null;var Y=Wl[A];Wl[A++]=null;var ee=Wl[A];if(Wl[A++]=null,j!==null&&Y!==null){var Te=j.pending;Te===null?Y.next=Y:(Y.next=Te.next,Te.next=Y),j.pending=Y}ee!==0&&Yu(b,Y,ee)}}function gc(h,A,b,j){Wl[Io++]=h,Wl[Io++]=A,Wl[Io++]=b,Wl[Io++]=j,vl|=j,h.lanes|=j,h=h.alternate,h!==null&&(h.lanes|=j)}function zd(h,A,b,j){return gc(h,A,b,j),_d(h)}function rc(h,A){return gc(h,null,null,A),_d(h)}function Yu(h,A,b){h.lanes|=b;var j=h.alternate;j!==null&&(j.lanes|=b);for(var Y=!1,ee=h.return;ee!==null;)ee.childLanes|=b,j=ee.alternate,j!==null&&(j.childLanes|=b),ee.tag===22&&(h=ee.stateNode,h===null||h._visibility&1||(Y=!0)),h=ee,ee=ee.return;return h.tag===3?(ee=h.stateNode,Y&&A!==null&&(Y=31-Yr(b),h=ee.hiddenUpdates,j=h[Y],j===null?h[Y]=[A]:j.push(A),A.lane=b|536870912),ee):null}function _d(h){if(50<da)throw da=0,xa=null,Error(n(185));for(var A=h.return;A!==null;)h=A,A=h.return;return h.tag===3?h.stateNode:null}var yl={};function oh(h,A,b,j){this.tag=h,this.key=b,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=A,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=j,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bl(h,A,b,j){return new oh(h,A,b,j)}function Fi(h){return h=h.prototype,!(!h||!h.isReactComponent)}function vc(h,A){var b=h.alternate;return b===null?(b=Bl(h.tag,A,h.key,h.mode),b.elementType=h.elementType,b.type=h.type,b.stateNode=h.stateNode,b.alternate=h,h.alternate=b):(b.pendingProps=A,b.type=h.type,b.flags=0,b.subtreeFlags=0,b.deletions=null),b.flags=h.flags&65011712,b.childLanes=h.childLanes,b.lanes=h.lanes,b.child=h.child,b.memoizedProps=h.memoizedProps,b.memoizedState=h.memoizedState,b.updateQueue=h.updateQueue,A=h.dependencies,b.dependencies=A===null?null:{lanes:A.lanes,firstContext:A.firstContext},b.sibling=h.sibling,b.index=h.index,b.ref=h.ref,b.refCleanup=h.refCleanup,b}function Qc(h,A){h.flags&=65011714;var b=h.alternate;return b===null?(h.childLanes=0,h.lanes=A,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=b.childLanes,h.lanes=b.lanes,h.child=b.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=b.memoizedProps,h.memoizedState=b.memoizedState,h.updateQueue=b.updateQueue,h.type=b.type,A=b.dependencies,h.dependencies=A===null?null:{lanes:A.lanes,firstContext:A.firstContext}),h}function zc(h,A,b,j,Y,ee){var Te=0;if(j=h,typeof h=="function")Fi(h)&&(Te=1);else if(typeof h=="string")Te=tce(h,b,Re.current)?26:h==="html"||h==="head"||h==="body"?27:5;else e:switch(h){case G:return h=Bl(31,b,A,Y),h.elementType=G,h.lanes=ee,h;case y:return qu(b.children,Y,ee,A);case x:Te=8,Y|=24;break;case w:return h=Bl(12,b,A,Y|2),h.elementType=w,h.lanes=ee,h;case C:return h=Bl(13,b,A,Y),h.elementType=C,h.lanes=ee,h;case I:return h=Bl(19,b,A,Y),h.elementType=I,h.lanes=ee,h;default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case E:Te=10;break e;case _:Te=9;break e;case N:Te=11;break e;case D:Te=14;break e;case U:Te=16,j=null;break e}Te=29,b=Error(n(130,h===null?"null":typeof h,"")),j=null}return A=Bl(Te,b,A,Y),A.elementType=h,A.type=j,A.lanes=ee,A}function qu(h,A,b,j){return h=Bl(7,h,j,A),h.lanes=b,h}function yc(h,A,b){return h=Bl(6,h,null,A),h.lanes=b,h}function Bo(h){var A=Bl(18,null,null,0);return A.stateNode=h,A}function su(h,A,b){return A=Bl(4,h.children!==null?h.children:[],h.key,A),A.lanes=b,A.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},A}var v=new WeakMap;function S(h,A){if(typeof h=="object"&&h!==null){var b=v.get(h);return b!==void 0?b:(A={value:h,source:A,stack:mt(A)},v.set(h,A),A)}return{value:h,source:A,stack:mt(A)}}var Q=[],le=0,_e=null,Ke=0,kt=[],er=0,Er=null,Wr=1,bn="";function ui(h,A){Q[le++]=Ke,Q[le++]=_e,_e=h,Ke=A}function As(h,A,b){kt[er++]=Wr,kt[er++]=bn,kt[er++]=Er,Er=h;var j=Wr;h=bn;var Y=32-Yr(j)-1;j&=~(1<<Y),b+=1;var ee=32-Yr(A)+Y;if(30<ee){var Te=Y-Y%5;ee=(j&(1<<Te)-1).toString(32),j>>=Te,Y-=Te,Wr=1<<32-Yr(A)+Y|b<<Y|j,bn=ee+h}else Wr=1<<ee|b<<Y|j,bn=h}function Ma(h){h.return!==null&&(ui(h,1),As(h,1,0))}function Co(h){for(;h===_e;)_e=Q[--le],Q[le]=null,Ke=Q[--le],Q[le]=null;for(;h===Er;)Er=kt[--er],kt[er]=null,bn=kt[--er],kt[er]=null,Wr=kt[--er],kt[er]=null}function il(h,A){kt[er++]=Wr,kt[er++]=bn,kt[er++]=Er,Wr=A.id,bn=A.overflow,Er=h}var Zs=null,ca=null,kn=!1,Xu=null,xc=!1,Ed=Error(n(519));function Yl(h){var A=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw bc(S(A,h)),Ed}function Su(h){var A=h.stateNode,b=h.type,j=h.memoizedProps;switch(A[ns]=h,A[qs]=j,b){case"dialog":Sa("cancel",A),Sa("close",A);break;case"iframe":case"object":case"embed":Sa("load",A);break;case"video":case"audio":for(b=0;b<F1.length;b++)Sa(F1[b],A);break;case"source":Sa("error",A);break;case"img":case"image":case"link":Sa("error",A),Sa("load",A);break;case"details":Sa("toggle",A);break;case"input":Sa("invalid",A),Ea(A,j.value,j.defaultValue,j.checked,j.defaultChecked,j.type,j.name,!0);break;case"select":Sa("invalid",A);break;case"textarea":Sa("invalid",A),Ka(A,j.value,j.defaultValue,j.children)}b=j.children,typeof b!="string"&&typeof b!="number"&&typeof b!="bigint"||A.textContent===""+b||j.suppressHydrationWarning===!0||RU(A.textContent,b)?(j.popover!=null&&(Sa("beforetoggle",A),Sa("toggle",A)),j.onScroll!=null&&Sa("scroll",A),j.onScrollEnd!=null&&Sa("scrollend",A),j.onClick!=null&&(A.onclick=ce),A=!0):A=!1,A||Yl(h,!0)}function ao(h){for(Zs=h.return;Zs;)switch(Zs.tag){case 5:case 31:case 13:xc=!1;return;case 27:case 3:xc=!0;return;default:Zs=Zs.return}}function ju(h){if(h!==Zs)return!1;if(!kn)return ao(h),kn=!0,!1;var A=h.tag,b;if((b=A!==3&&A!==27)&&((b=A===5)&&(b=h.type,b=!(b!=="form"&&b!=="button")||kk(h.type,h.memoizedProps)),b=!b),b&&ca&&Yl(h),ao(h),A===13){if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(n(317));ca=VU(h)}else if(A===31){if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(n(317));ca=VU(h)}else A===27?(A=ca,Gg(h.type)?(h=Ok,Ok=null,ca=h):ca=A):ca=Zs?Mf(h.stateNode.nextSibling):null;return!0}function Go(){ca=Zs=null,kn=!1}function Sd(){var h=Xu;return h!==null&&(Ut===null?Ut=h:Ut.push.apply(Ut,h),Xu=null),h}function bc(h){Xu===null?Xu=[h]:Xu.push(h)}var Vd=be(null),ql=null,Tu=null;function wc(h,A,b){Pe(Vd,A._currentValue),A._currentValue=b}function Vc(h){h._currentValue=Vd.current,ue(Vd)}function Sh(h,A,b){for(;h!==null;){var j=h.alternate;if((h.childLanes&A)!==A?(h.childLanes|=A,j!==null&&(j.childLanes|=A)):j!==null&&(j.childLanes&A)!==A&&(j.childLanes|=A),h===b)break;h=h.return}}function au(h,A,b,j){var Y=h.child;for(Y!==null&&(Y.return=h);Y!==null;){var ee=Y.dependencies;if(ee!==null){var Te=Y.child;ee=ee.firstContext;e:for(;ee!==null;){var tt=ee;ee=Y;for(var Pt=0;Pt<A.length;Pt++)if(tt.context===A[Pt]){ee.lanes|=b,tt=ee.alternate,tt!==null&&(tt.lanes|=b),Sh(ee.return,b,h),j||(Te=null);break e}ee=tt.next}}else if(Y.tag===18){if(Te=Y.return,Te===null)throw Error(n(341));Te.lanes|=b,ee=Te.alternate,ee!==null&&(ee.lanes|=b),Sh(Te,b,h),Te=null}else Te=Y.child;if(Te!==null)Te.return=Y;else for(Te=Y;Te!==null;){if(Te===h){Te=null;break}if(Y=Te.sibling,Y!==null){Y.return=Te.return,Te=Y;break}Te=Te.return}Y=Te}}function jd(h,A,b,j){h=null;for(var Y=A,ee=!1;Y!==null;){if(!ee){if((Y.flags&524288)!==0)ee=!0;else if((Y.flags&262144)!==0)break}if(Y.tag===10){var Te=Y.alternate;if(Te===null)throw Error(n(387));if(Te=Te.memoizedProps,Te!==null){var tt=Y.type;_n(Y.pendingProps.value,Te.value)||(h!==null?h.push(tt):h=[tt])}}else if(Y===ft.current){if(Te=Y.alternate,Te===null)throw Error(n(387));Te.memoizedState.memoizedState!==Y.memoizedState.memoizedState&&(h!==null?h.push(z1):h=[z1])}Y=Y.return}h!==null&&au(A,h,b,j),A.flags|=262144}function lh(h){for(h=h.firstContext;h!==null;){if(!_n(h.context._currentValue,h.memoizedValue))return!0;h=h.next}return!1}function Kc(h){ql=h,Tu=null,h=h.dependencies,h!==null&&(h.firstContext=null)}function xo(h){return hm(ql,h)}function jh(h,A){return ql===null&&Kc(h),hm(h,A)}function hm(h,A){var b=A._currentValue;if(A={context:A,memoizedValue:b,next:null},Tu===null){if(h===null)throw Error(n(308));Tu=A,h.dependencies={lanes:0,firstContext:A},h.flags|=524288}else Tu=Tu.next=A;return b}var Wm=typeof AbortController<"u"?AbortController:function(){var h=[],A=this.signal={aborted:!1,addEventListener:function(b,j){h.push(j)}};this.abort=function(){A.aborted=!0,h.forEach(function(b){return b()})}},ch=t.unstable_scheduleCallback,uh=t.unstable_NormalPriority,Po={$$typeof:E,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function dh(){return{controller:new Wm,data:new Map,refCount:0}}function Th(h){h.refCount--,h.refCount===0&&ch(uh,function(){h.controller.abort()})}var he=null,Me=0,wt=0,Bt=null;function rr(h,A){if(he===null){var b=he=[];Me=0,wt=bk(),Bt={status:"pending",value:void 0,then:function(j){b.push(j)}}}return Me++,A.then(zr,zr),A}function zr(){if(--Me===0&&he!==null){Bt!==null&&(Bt.status="fulfilled");var h=he;he=null,wt=0,Bt=null;for(var A=0;A<h.length;A++)(0,h[A])()}}function nn(h,A){var b=[],j={status:"pending",value:null,reason:null,then:function(Y){b.push(Y)}};return h.then(function(){j.status="fulfilled",j.value=A;for(var Y=0;Y<b.length;Y++)(0,b[Y])(A)},function(Y){for(j.status="rejected",j.reason=Y,Y=0;Y<b.length;Y++)(0,b[Y])(void 0)}),j}var ti=ne.S;ne.S=function(h,A){$r=Gr(),typeof A=="object"&&A!==null&&typeof A.then=="function"&&rr(h,A),ti!==null&&ti(h,A)};var ri=be(null);function Yi(){var h=ri.current;return h!==null?h:Aa.pooledCache}function os(h,A){A===null?Pe(ri,ri.current):Pe(ri,A.pool)}function na(){var h=Yi();return h===null?null:{parent:Po._currentValue,pool:h}}var Fa=Error(n(460)),Oo=Error(n(474)),ka=Error(n(542)),Wo={then:function(){}};function O(h){return h=h.status,h==="fulfilled"||h==="rejected"}function Oe(h,A,b){switch(b=h[b],b===void 0?h.push(A):b!==A&&(A.then(ce,ce),A=b),A.status){case"fulfilled":return A.value;case"rejected":throw h=A.reason,_t(h),h;default:if(typeof A.status=="string")A.then(ce,ce);else{if(h=Aa,h!==null&&100<h.shellSuspendCounter)throw Error(n(482));h=A,h.status="pending",h.then(function(j){if(A.status==="pending"){var Y=A;Y.status="fulfilled",Y.value=j}},function(j){if(A.status==="pending"){var Y=A;Y.status="rejected",Y.reason=j}})}switch(A.status){case"fulfilled":return A.value;case"rejected":throw h=A.reason,_t(h),h}throw qe=A,Fa}}function te(h){try{var A=h._init;return A(h._payload)}catch(b){throw b!==null&&typeof b=="object"&&typeof b.then=="function"?(qe=b,Fa):b}}var qe=null;function Et(){if(qe===null)throw Error(n(459));var h=qe;return qe=null,h}function _t(h){if(h===Fa||h===ka)throw Error(n(483))}var yr=null,Kt=0;function Un(h){var A=Kt;return Kt+=1,yr===null&&(yr=[]),Oe(yr,h,A)}function Ft(h,A){A=A.props.ref,h.ref=A!==void 0?A:null}function xr(h,A){throw A.$$typeof===m?Error(n(525)):(h=Object.prototype.toString.call(A),Error(n(31,h==="[object Object]"?"object with keys {"+Object.keys(A).join(", ")+"}":h)))}function qi(h){function A(cr,zt){if(h){var Sr=cr.deletions;Sr===null?(cr.deletions=[zt],cr.flags|=16):Sr.push(zt)}}function b(cr,zt){if(!h)return null;for(;zt!==null;)A(cr,zt),zt=zt.sibling;return null}function j(cr){for(var zt=new Map;cr!==null;)cr.key!==null?zt.set(cr.key,cr):zt.set(cr.index,cr),cr=cr.sibling;return zt}function Y(cr,zt){return cr=vc(cr,zt),cr.index=0,cr.sibling=null,cr}function ee(cr,zt,Sr){return cr.index=Sr,h?(Sr=cr.alternate,Sr!==null?(Sr=Sr.index,Sr<zt?(cr.flags|=67108866,zt):Sr):(cr.flags|=67108866,zt)):(cr.flags|=1048576,zt)}function Te(cr){return h&&cr.alternate===null&&(cr.flags|=67108866),cr}function tt(cr,zt,Sr,Jr){return zt===null||zt.tag!==6?(zt=yc(Sr,cr.mode,Jr),zt.return=cr,zt):(zt=Y(zt,Sr),zt.return=cr,zt)}function Pt(cr,zt,Sr,Jr){var Xi=Sr.type;return Xi===y?Kr(cr,zt,Sr.props.children,Jr,Sr.key):zt!==null&&(zt.elementType===Xi||typeof Xi=="object"&&Xi!==null&&Xi.$$typeof===U&&te(Xi)===zt.type)?(zt=Y(zt,Sr.props),Ft(zt,Sr),zt.return=cr,zt):(zt=zc(Sr.type,Sr.key,Sr.props,null,cr.mode,Jr),Ft(zt,Sr),zt.return=cr,zt)}function jr(cr,zt,Sr,Jr){return zt===null||zt.tag!==4||zt.stateNode.containerInfo!==Sr.containerInfo||zt.stateNode.implementation!==Sr.implementation?(zt=su(Sr,cr.mode,Jr),zt.return=cr,zt):(zt=Y(zt,Sr.children||[]),zt.return=cr,zt)}function Kr(cr,zt,Sr,Jr,Xi){return zt===null||zt.tag!==7?(zt=qu(Sr,cr.mode,Jr,Xi),zt.return=cr,zt):(zt=Y(zt,Sr),zt.return=cr,zt)}function rn(cr,zt,Sr){if(typeof zt=="string"&&zt!==""||typeof zt=="number"||typeof zt=="bigint")return zt=yc(""+zt,cr.mode,Sr),zt.return=cr,zt;if(typeof zt=="object"&&zt!==null){switch(zt.$$typeof){case p:return Sr=zc(zt.type,zt.key,zt.props,null,cr.mode,Sr),Ft(Sr,zt),Sr.return=cr,Sr;case g:return zt=su(zt,cr.mode,Sr),zt.return=cr,zt;case U:return zt=te(zt),rn(cr,zt,Sr)}if(ve(zt)||de(zt))return zt=qu(zt,cr.mode,Sr,null),zt.return=cr,zt;if(typeof zt.then=="function")return rn(cr,Un(zt),Sr);if(zt.$$typeof===E)return rn(cr,jh(cr,zt),Sr);xr(cr,zt)}return null}function Cr(cr,zt,Sr,Jr){var Xi=zt!==null?zt.key:null;if(typeof Sr=="string"&&Sr!==""||typeof Sr=="number"||typeof Sr=="bigint")return Xi!==null?null:tt(cr,zt,""+Sr,Jr);if(typeof Sr=="object"&&Sr!==null){switch(Sr.$$typeof){case p:return Sr.key===Xi?Pt(cr,zt,Sr,Jr):null;case g:return Sr.key===Xi?jr(cr,zt,Sr,Jr):null;case U:return Sr=te(Sr),Cr(cr,zt,Sr,Jr)}if(ve(Sr)||de(Sr))return Xi!==null?null:Kr(cr,zt,Sr,Jr,null);if(typeof Sr.then=="function")return Cr(cr,zt,Un(Sr),Jr);if(Sr.$$typeof===E)return Cr(cr,zt,jh(cr,Sr),Jr);xr(cr,Sr)}return null}function Br(cr,zt,Sr,Jr,Xi){if(typeof Jr=="string"&&Jr!==""||typeof Jr=="number"||typeof Jr=="bigint")return cr=cr.get(Sr)||null,tt(zt,cr,""+Jr,Xi);if(typeof Jr=="object"&&Jr!==null){switch(Jr.$$typeof){case p:return cr=cr.get(Jr.key===null?Sr:Jr.key)||null,Pt(zt,cr,Jr,Xi);case g:return cr=cr.get(Jr.key===null?Sr:Jr.key)||null,jr(zt,cr,Jr,Xi);case U:return Jr=te(Jr),Br(cr,zt,Sr,Jr,Xi)}if(ve(Jr)||de(Jr))return cr=cr.get(Sr)||null,Kr(zt,cr,Jr,Xi,null);if(typeof Jr.then=="function")return Br(cr,zt,Sr,Un(Jr),Xi);if(Jr.$$typeof===E)return Br(cr,zt,Sr,jh(zt,Jr),Xi);xr(zt,Jr)}return null}function _i(cr,zt,Sr,Jr){for(var Xi=null,ho=null,Pi=zt,oa=zt=0,Ba=null;Pi!==null&&oa<Sr.length;oa++){Pi.index>oa?(Ba=Pi,Pi=null):Ba=Pi.sibling;var fo=Cr(cr,Pi,Sr[oa],Jr);if(fo===null){Pi===null&&(Pi=Ba);break}h&&Pi&&fo.alternate===null&&A(cr,Pi),zt=ee(fo,zt,oa),ho===null?Xi=fo:ho.sibling=fo,ho=fo,Pi=Ba}if(oa===Sr.length)return b(cr,Pi),kn&&ui(cr,oa),Xi;if(Pi===null){for(;oa<Sr.length;oa++)Pi=rn(cr,Sr[oa],Jr),Pi!==null&&(zt=ee(Pi,zt,oa),ho===null?Xi=Pi:ho.sibling=Pi,ho=Pi);return kn&&ui(cr,oa),Xi}for(Pi=j(Pi);oa<Sr.length;oa++)Ba=Br(Pi,cr,oa,Sr[oa],Jr),Ba!==null&&(h&&Ba.alternate!==null&&Pi.delete(Ba.key===null?oa:Ba.key),zt=ee(Ba,zt,oa),ho===null?Xi=Ba:ho.sibling=Ba,ho=Ba);return h&&Pi.forEach(function(Zg){return A(cr,Zg)}),kn&&ui(cr,oa),Xi}function ds(cr,zt,Sr,Jr){if(Sr==null)throw Error(n(151));for(var Xi=null,ho=null,Pi=zt,oa=zt=0,Ba=null,fo=Sr.next();Pi!==null&&!fo.done;oa++,fo=Sr.next()){Pi.index>oa?(Ba=Pi,Pi=null):Ba=Pi.sibling;var Zg=Cr(cr,Pi,fo.value,Jr);if(Zg===null){Pi===null&&(Pi=Ba);break}h&&Pi&&Zg.alternate===null&&A(cr,Pi),zt=ee(Zg,zt,oa),ho===null?Xi=Zg:ho.sibling=Zg,ho=Zg,Pi=Ba}if(fo.done)return b(cr,Pi),kn&&ui(cr,oa),Xi;if(Pi===null){for(;!fo.done;oa++,fo=Sr.next())fo=rn(cr,fo.value,Jr),fo!==null&&(zt=ee(fo,zt,oa),ho===null?Xi=fo:ho.sibling=fo,ho=fo);return kn&&ui(cr,oa),Xi}for(Pi=j(Pi);!fo.done;oa++,fo=Sr.next())fo=Br(Pi,cr,oa,fo.value,Jr),fo!==null&&(h&&fo.alternate!==null&&Pi.delete(fo.key===null?oa:fo.key),zt=ee(fo,zt,oa),ho===null?Xi=fo:ho.sibling=fo,ho=fo);return h&&Pi.forEach(function(hce){return A(cr,hce)}),kn&&ui(cr,oa),Xi}function Zo(cr,zt,Sr,Jr){if(typeof Sr=="object"&&Sr!==null&&Sr.type===y&&Sr.key===null&&(Sr=Sr.props.children),typeof Sr=="object"&&Sr!==null){switch(Sr.$$typeof){case p:e:{for(var Xi=Sr.key;zt!==null;){if(zt.key===Xi){if(Xi=Sr.type,Xi===y){if(zt.tag===7){b(cr,zt.sibling),Jr=Y(zt,Sr.props.children),Jr.return=cr,cr=Jr;break e}}else if(zt.elementType===Xi||typeof Xi=="object"&&Xi!==null&&Xi.$$typeof===U&&te(Xi)===zt.type){b(cr,zt.sibling),Jr=Y(zt,Sr.props),Ft(Jr,Sr),Jr.return=cr,cr=Jr;break e}b(cr,zt);break}else A(cr,zt);zt=zt.sibling}Sr.type===y?(Jr=qu(Sr.props.children,cr.mode,Jr,Sr.key),Jr.return=cr,cr=Jr):(Jr=zc(Sr.type,Sr.key,Sr.props,null,cr.mode,Jr),Ft(Jr,Sr),Jr.return=cr,cr=Jr)}return Te(cr);case g:e:{for(Xi=Sr.key;zt!==null;){if(zt.key===Xi)if(zt.tag===4&&zt.stateNode.containerInfo===Sr.containerInfo&&zt.stateNode.implementation===Sr.implementation){b(cr,zt.sibling),Jr=Y(zt,Sr.children||[]),Jr.return=cr,cr=Jr;break e}else{b(cr,zt);break}else A(cr,zt);zt=zt.sibling}Jr=su(Sr,cr.mode,Jr),Jr.return=cr,cr=Jr}return Te(cr);case U:return Sr=te(Sr),Zo(cr,zt,Sr,Jr)}if(ve(Sr))return _i(cr,zt,Sr,Jr);if(de(Sr)){if(Xi=de(Sr),typeof Xi!="function")throw Error(n(150));return Sr=Xi.call(Sr),ds(cr,zt,Sr,Jr)}if(typeof Sr.then=="function")return Zo(cr,zt,Un(Sr),Jr);if(Sr.$$typeof===E)return Zo(cr,zt,jh(cr,Sr),Jr);xr(cr,Sr)}return typeof Sr=="string"&&Sr!==""||typeof Sr=="number"||typeof Sr=="bigint"?(Sr=""+Sr,zt!==null&&zt.tag===6?(b(cr,zt.sibling),Jr=Y(zt,Sr),Jr.return=cr,cr=Jr):(b(cr,zt),Jr=yc(Sr,cr.mode,Jr),Jr.return=cr,cr=Jr),Te(cr)):b(cr,zt)}return function(cr,zt,Sr,Jr){try{Kt=0;var Xi=Zo(cr,zt,Sr,Jr);return yr=null,Xi}catch(Pi){if(Pi===Fa||Pi===ka)throw Pi;var ho=Bl(29,Pi,null,cr.mode);return ho.lanes=Jr,ho.return=cr,ho}}}var Ln=qi(!0),an=qi(!1),Mr=!1;function Ua(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Wi(h,A){h=h.updateQueue,A.updateQueue===h&&(A.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,callbacks:null})}function ki(h){return{lane:h,tag:0,payload:null,callback:null,next:null}}function zi(h,A,b){var j=h.updateQueue;if(j===null)return null;if(j=j.shared,(ya&2)!==0){var Y=j.pending;return Y===null?A.next=A:(A.next=Y.next,Y.next=A),j.pending=A,A=_d(h),Yu(h,null,b),A}return gc(h,j,A,b),_d(h)}function xs(h,A,b){if(A=A.updateQueue,A!==null&&(A=A.shared,(b&4194048)!==0)){var j=A.lanes;j&=h.pendingLanes,b|=j,A.lanes=b,as(h,b)}}function En(h,A){var b=h.updateQueue,j=h.alternate;if(j!==null&&(j=j.updateQueue,b===j)){var Y=null,ee=null;if(b=b.firstBaseUpdate,b!==null){do{var Te={lane:b.lane,tag:b.tag,payload:b.payload,callback:null,next:null};ee===null?Y=ee=Te:ee=ee.next=Te,b=b.next}while(b!==null);ee===null?Y=ee=A:ee=ee.next=A}else Y=ee=A;b={baseState:j.baseState,firstBaseUpdate:Y,lastBaseUpdate:ee,shared:j.shared,callbacks:j.callbacks},h.updateQueue=b;return}h=b.lastBaseUpdate,h===null?b.firstBaseUpdate=A:h.next=A,b.lastBaseUpdate=A}var bs=!1;function $a(){if(bs){var h=Bt;if(h!==null)throw h}}function ji(h,A,b,j){bs=!1;var Y=h.updateQueue;Mr=!1;var ee=Y.firstBaseUpdate,Te=Y.lastBaseUpdate,tt=Y.shared.pending;if(tt!==null){Y.shared.pending=null;var Pt=tt,jr=Pt.next;Pt.next=null,Te===null?ee=jr:Te.next=jr,Te=Pt;var Kr=h.alternate;Kr!==null&&(Kr=Kr.updateQueue,tt=Kr.lastBaseUpdate,tt!==Te&&(tt===null?Kr.firstBaseUpdate=jr:tt.next=jr,Kr.lastBaseUpdate=Pt))}if(ee!==null){var rn=Y.baseState;Te=0,Kr=jr=Pt=null,tt=ee;do{var Cr=tt.lane&-536870913,Br=Cr!==tt.lane;if(Br?(Ps&Cr)===Cr:(j&Cr)===Cr){Cr!==0&&Cr===wt&&(bs=!0),Kr!==null&&(Kr=Kr.next={lane:0,tag:tt.tag,payload:tt.payload,callback:null,next:null});e:{var _i=h,ds=tt;Cr=A;var Zo=b;switch(ds.tag){case 1:if(_i=ds.payload,typeof _i=="function"){rn=_i.call(Zo,rn,Cr);break e}rn=_i;break e;case 3:_i.flags=_i.flags&-65537|128;case 0:if(_i=ds.payload,Cr=typeof _i=="function"?_i.call(Zo,rn,Cr):_i,Cr==null)break e;rn=f({},rn,Cr);break e;case 2:Mr=!0}}Cr=tt.callback,Cr!==null&&(h.flags|=64,Br&&(h.flags|=8192),Br=Y.callbacks,Br===null?Y.callbacks=[Cr]:Br.push(Cr))}else Br={lane:Cr,tag:tt.tag,payload:tt.payload,callback:tt.callback,next:null},Kr===null?(jr=Kr=Br,Pt=rn):Kr=Kr.next=Br,Te|=Cr;if(tt=tt.next,tt===null){if(tt=Y.shared.pending,tt===null)break;Br=tt,tt=Br.next,Br.next=null,Y.lastBaseUpdate=Br,Y.shared.pending=null}}while(!0);Kr===null&&(Pt=rn),Y.baseState=Pt,Y.firstBaseUpdate=jr,Y.lastBaseUpdate=Kr,ee===null&&(Y.shared.lanes=0),H|=Te,h.lanes=Te,h.memoizedState=rn}}function ia(h,A){if(typeof h!="function")throw Error(n(191,h));h.call(A)}function Ls(h,A){var b=h.callbacks;if(b!==null)for(h.callbacks=null,h=0;h<b.length;h++)ia(b[h],A)}var ni=be(null),$i=be(0);function nc(h,A){h=B,Pe($i,h),Pe(ni,A),B=h|A.baseLanes}function Zu(){Pe($i,B),Pe(ni,ni.current)}function ou(){B=$i.current,ue(ni),ue($i)}var xl=be(null),ic=null;function oo(h){var A=h.alternate;Pe(Ro,Ro.current&1),Pe(xl,h),ic===null&&(A===null||ni.current!==null||A.memoizedState!==null)&&(ic=h)}function Ym(h){Pe(Ro,Ro.current),Pe(xl,h),ic===null&&(ic=h)}function hh(h){h.tag===22?(Pe(Ro,Ro.current),Pe(xl,h),ic===null&&(ic=h)):Gc()}function Gc(){Pe(Ro,Ro.current),Pe(xl,xl.current)}function Wc(h){ue(xl),ic===h&&(ic=null),ue(Ro)}var Ro=be(0);function If(h){for(var A=h;A!==null;){if(A.tag===13){var b=A.memoizedState;if(b!==null&&(b=b.dehydrated,b===null||Bk(b)||Pk(b)))return A}else if(A.tag===19&&(A.memoizedProps.revealOrder==="forwards"||A.memoizedProps.revealOrder==="backwards"||A.memoizedProps.revealOrder==="unstable_legacy-backwards"||A.memoizedProps.revealOrder==="together")){if((A.flags&128)!==0)return A}else if(A.child!==null){A.child.return=A,A=A.child;continue}if(A===h)break;for(;A.sibling===null;){if(A.return===null||A.return===h)return null;A=A.return}A.sibling.return=A.return,A=A.sibling}return null}var Td=0,Ji=null,ma=null,bo=null,Ch=!1,Ju=!1,Cd=!1,_c=0,ed=0,sa=null,eo=0;function Is(){throw Error(n(321))}function bl(h,A){if(A===null)return!1;for(var b=0;b<A.length&&b<h.length;b++)if(!_n(h[b],A[b]))return!1;return!0}function fh(h,A,b,j,Y,ee){return Td=ee,Ji=A,A.memoizedState=null,A.updateQueue=null,A.lanes=0,ne.H=h===null||h.memoizedState===null?cv:Fg,Cd=!1,ee=b(j,Y),Cd=!1,Ju&&(ee=qh(A,b,j,Y)),fm(h),ee}function fm(h){ne.H=pp;var A=ma!==null&&ma.next!==null;if(Td=0,bo=ma=Ji=null,Ch=!1,ed=0,sa=null,A)throw Error(n(300));h===null||Ge||(h=h.dependencies,h!==null&&lh(h)&&(Ge=!0))}function qh(h,A,b,j){Ji=h;var Y=0;do{if(Ju&&(sa=null),ed=0,Ju=!1,25<=Y)throw Error(n(301));if(Y+=1,bo=ma=null,h.updateQueue!=null){var ee=h.updateQueue;ee.lastEffect=null,ee.events=null,ee.stores=null,ee.memoCache!=null&&(ee.memoCache.index=0)}ne.H=Ug,ee=A(b,j)}while(Ju);return ee}function qm(){var h=ne.H,A=h.useState()[0];return A=typeof A.then=="function"?Xh(A):A,h=h.useState()[0],(ma!==null?ma.memoizedState:null)!==h&&(Ji.flags|=1024),A}function ip(){var h=_c!==0;return _c=0,h}function sp(h,A,b){A.updateQueue=h.updateQueue,A.flags&=-2053,h.lanes&=~b}function ap(h){if(Ch){for(h=h.memoizedState;h!==null;){var A=h.queue;A!==null&&(A.pending=null),h=h.next}Ch=!1}Td=0,bo=ma=Ji=null,Ju=!1,ed=_c=0,sa=null}function Yc(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return bo===null?Ji.memoizedState=bo=h:bo=bo.next=h,bo}function Yo(){if(ma===null){var h=Ji.alternate;h=h!==null?h.memoizedState:null}else h=ma.next;var A=bo===null?Ji.memoizedState:bo.next;if(A!==null)bo=A,ma=h;else{if(h===null)throw Ji.alternate===null?Error(n(467)):Error(n(310));ma=h,h={memoizedState:ma.memoizedState,baseState:ma.baseState,baseQueue:ma.baseQueue,queue:ma.queue,next:null},bo===null?Ji.memoizedState=bo=h:bo=bo.next=h}return bo}function op(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Xh(h){var A=ed;return ed+=1,sa===null&&(sa=[]),h=Oe(sa,h,A),A=Ji,(bo===null?A.memoizedState:bo.next)===null&&(A=A.alternate,ne.H=A===null||A.memoizedState===null?cv:Fg),h}function lp(h){if(h!==null&&typeof h=="object"){if(typeof h.then=="function")return Xh(h);if(h.$$typeof===E)return xo(h)}throw Error(n(438,String(h)))}function Cu(h){var A=null,b=Ji.updateQueue;if(b!==null&&(A=b.memoCache),A==null){var j=Ji.alternate;j!==null&&(j=j.updateQueue,j!==null&&(j=j.memoCache,j!=null&&(A={data:j.data.map(function(Y){return Y.slice()}),index:0})))}if(A==null&&(A={data:[],index:0}),b===null&&(b=op(),Ji.updateQueue=b),b.memoCache=A,b=A.data[A.index],b===void 0)for(b=A.data[A.index]=Array(h),j=0;j<h;j++)b[j]=q;return A.index++,b}function Kd(h,A){return typeof A=="function"?A(h):A}function cp(h){var A=Yo();return Sg(A,ma,h)}function Sg(h,A,b){var j=h.queue;if(j===null)throw Error(n(311));j.lastRenderedReducer=b;var Y=h.baseQueue,ee=j.pending;if(ee!==null){if(Y!==null){var Te=Y.next;Y.next=ee.next,ee.next=Te}A.baseQueue=Y=ee,j.pending=null}if(ee=h.baseState,Y===null)h.memoizedState=ee;else{A=Y.next;var tt=Te=null,Pt=null,jr=A,Kr=!1;do{var rn=jr.lane&-536870913;if(rn!==jr.lane?(Ps&rn)===rn:(Td&rn)===rn){var Cr=jr.revertLane;if(Cr===0)Pt!==null&&(Pt=Pt.next={lane:0,revertLane:0,gesture:null,action:jr.action,hasEagerState:jr.hasEagerState,eagerState:jr.eagerState,next:null}),rn===wt&&(Kr=!0);else if((Td&Cr)===Cr){jr=jr.next,Cr===wt&&(Kr=!0);continue}else rn={lane:0,revertLane:jr.revertLane,gesture:null,action:jr.action,hasEagerState:jr.hasEagerState,eagerState:jr.eagerState,next:null},Pt===null?(tt=Pt=rn,Te=ee):Pt=Pt.next=rn,Ji.lanes|=Cr,H|=Cr;rn=jr.action,Cd&&b(ee,rn),ee=jr.hasEagerState?jr.eagerState:b(ee,rn)}else Cr={lane:rn,revertLane:jr.revertLane,gesture:jr.gesture,action:jr.action,hasEagerState:jr.hasEagerState,eagerState:jr.eagerState,next:null},Pt===null?(tt=Pt=Cr,Te=ee):Pt=Pt.next=Cr,Ji.lanes|=rn,H|=rn;jr=jr.next}while(jr!==null&&jr!==A);if(Pt===null?Te=ee:Pt.next=tt,!_n(ee,h.memoizedState)&&(Ge=!0,Kr&&(b=Bt,b!==null)))throw b;h.memoizedState=ee,h.baseState=Te,h.baseQueue=Pt,j.lastRenderedState=ee}return Y===null&&(j.lanes=0),[h.memoizedState,j.dispatch]}function jg(h){var A=Yo(),b=A.queue;if(b===null)throw Error(n(311));b.lastRenderedReducer=h;var j=b.dispatch,Y=b.pending,ee=A.memoizedState;if(Y!==null){b.pending=null;var Te=Y=Y.next;do ee=h(ee,Te.action),Te=Te.next;while(Te!==Y);_n(ee,A.memoizedState)||(Ge=!0),A.memoizedState=ee,A.baseQueue===null&&(A.baseState=ee),b.lastRenderedState=ee}return[ee,j]}function rv(h,A,b){var j=Ji,Y=Yo(),ee=kn;if(ee){if(b===void 0)throw Error(n(407));b=b()}else b=A();var Te=!_n((ma||Y).memoizedState,b);if(Te&&(Y.memoizedState=b,Ge=!0),Y=Y.queue,Jm(up.bind(null,j,Y,h),[h]),Y.getSnapshot!==A||Te||bo!==null&&bo.memoizedState.tag&1){if(j.flags|=2048,Zm(9,{destroy:void 0},Tg.bind(null,j,Y,b,A),null),Aa===null)throw Error(n(349));ee||(Td&127)!==0||nv(j,A,b)}return b}function nv(h,A,b){h.flags|=16384,h={getSnapshot:A,value:b},A=Ji.updateQueue,A===null?(A=op(),Ji.updateQueue=A,A.stores=[h]):(b=A.stores,b===null?A.stores=[h]:b.push(h))}function Tg(h,A,b,j){A.value=b,A.getSnapshot=j,td(A)&&Nd(h)}function up(h,A,b){return b(function(){td(A)&&Nd(h)})}function td(h){var A=h.getSnapshot;h=h.value;try{var b=A();return!_n(h,b)}catch{return!0}}function Nd(h){var A=rc(h,2);A!==null&&Do(A,h,2)}function mm(h){var A=Yc();if(typeof h=="function"){var b=h;if(h=b(),Cd){gr(!0);try{b()}finally{gr(!1)}}}return A.memoizedState=A.baseState=h,A.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kd,lastRenderedState:h},A}function dp(h,A,b,j){return h.baseState=b,Sg(h,ma,typeof j=="function"?j:Kd)}function Cg(h,A,b,j,Y){if(Ih(h))throw Error(n(485));if(h=A.action,h!==null){var ee={payload:Y,action:h,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Te){ee.listeners.push(Te)}};ne.T!==null?b(!0):ee.isTransition=!1,j(ee),b=A.pending,b===null?(ee.next=A.pending=ee,Xm(A,ee)):(ee.next=b.next,A.pending=b.next=ee)}}function Xm(h,A){var b=A.action,j=A.payload,Y=h.state;if(A.isTransition){var ee=ne.T,Te={};ne.T=Te;try{var tt=b(Y,j),Pt=ne.S;Pt!==null&&Pt(Te,tt),Pl(h,A,tt)}catch(jr){Ng(h,A,jr)}finally{ee!==null&&Te.types!==null&&(ee.types=Te.types),ne.T=ee}}else try{ee=b(Y,j),Pl(h,A,ee)}catch(jr){Ng(h,A,jr)}}function Pl(h,A,b){b!==null&&typeof b=="object"&&typeof b.then=="function"?b.then(function(j){Bf(h,A,j)},function(j){return Ng(h,A,j)}):Bf(h,A,b)}function Bf(h,A,b){A.status="fulfilled",A.value=b,kg(A),h.state=b,A=h.pending,A!==null&&(b=A.next,b===A?h.pending=null:(b=b.next,A.next=b,Xm(h,b)))}function Ng(h,A,b){var j=h.pending;if(h.pending=null,j!==null){j=j.next;do A.status="rejected",A.reason=b,kg(A),A=A.next;while(A!==j)}h.action=null}function kg(h){h=h.listeners;for(var A=0;A<h.length;A++)(0,h[A])()}function hp(h,A){return A}function Am(h,A){if(kn){var b=Aa.formState;if(b!==null){e:{var j=Ji;if(kn){if(ca){t:{for(var Y=ca,ee=xc;Y.nodeType!==8;){if(!ee){Y=null;break t}if(Y=Mf(Y.nextSibling),Y===null){Y=null;break t}}ee=Y.data,Y=ee==="F!"||ee==="F"?Y:null}if(Y){ca=Mf(Y.nextSibling),j=Y.data==="F!";break e}}Yl(j)}j=!1}j&&(A=b[0])}}return b=Yc(),b.memoizedState=b.baseState=A,j={pending:null,lanes:0,dispatch:null,lastRenderedReducer:hp,lastRenderedState:A},b.queue=j,b=Dg.bind(null,Ji,j),j.dispatch=b,j=mm(!1),ee=Pf.bind(null,Ji,!1,j.queue),j=Yc(),Y={state:A,dispatch:null,action:h,pending:null},j.queue=Y,b=Cg.bind(null,Ji,Y,ee,b),Y.dispatch=b,j.memoizedState=h,[A,b,!1]}function Lg(h){var A=Yo();return Fy(A,ma,h)}function Fy(h,A,b){if(A=Sg(h,A,hp)[0],h=cp(Kd)[0],typeof A=="object"&&A!==null&&typeof A.then=="function")try{var j=Xh(A)}catch(Te){throw Te===Fa?ka:Te}else j=A;A=Yo();var Y=A.queue,ee=Y.dispatch;return b!==A.memoizedState&&(Ji.flags|=2048,Zm(9,{destroy:void 0},D1.bind(null,Y,b),null)),[j,ee,h]}function D1(h,A){h.action=A}function iv(h){var A=Yo(),b=ma;if(b!==null)return Fy(A,b,h);Yo(),A=A.memoizedState,b=Yo();var j=b.queue.dispatch;return b.memoizedState=h,[A,j,!1]}function Zm(h,A,b,j){return h={tag:h,create:b,deps:j,inst:A,next:null},A=Ji.updateQueue,A===null&&(A=op(),Ji.updateQueue=A),b=A.lastEffect,b===null?A.lastEffect=h.next=h:(j=b.next,b.next=h,h.next=j,A.lastEffect=h),h}function Uy(){return Yo().memoizedState}function Ig(h,A,b,j){var Y=Yc();Ji.flags|=h,Y.memoizedState=Zm(1|A,{destroy:void 0},b,j===void 0?null:j)}function Bg(h,A,b,j){var Y=Yo();j=j===void 0?null:j;var ee=Y.memoizedState.inst;ma!==null&&j!==null&&bl(j,ma.memoizedState.deps)?Y.memoizedState=Zm(A,ee,b,j):(Ji.flags|=h,Y.memoizedState=Zm(1|A,ee,b,j))}function sv(h,A){Ig(8390656,8,h,A)}function Jm(h,A){Bg(2048,8,h,A)}function Pg(h){Ji.flags|=4;var A=Ji.updateQueue;if(A===null)A=op(),Ji.updateQueue=A,A.events=[h];else{var b=A.events;b===null?A.events=[h]:b.push(h)}}function pm(h){var A=Yo().memoizedState;return Pg({ref:A,nextImpl:h}),function(){if((ya&2)!==0)throw Error(n(440));return A.impl.apply(void 0,arguments)}}function Og(h,A){return Bg(4,2,h,A)}function $y(h,A){return Bg(4,4,h,A)}function av(h,A){if(typeof A=="function"){h=h();var b=A(h);return function(){typeof b=="function"?b():A(null)}}if(A!=null)return h=h(),A.current=h,function(){A.current=null}}function Hy(h,A,b){b=b!=null?b.concat([h]):null,Bg(4,4,av.bind(null,A,h),b)}function ov(){}function fp(h,A){var b=Yo();A=A===void 0?null:A;var j=b.memoizedState;return A!==null&&bl(A,j[1])?j[0]:(b.memoizedState=[h,A],h)}function mp(h,A){var b=Yo();A=A===void 0?null:A;var j=b.memoizedState;if(A!==null&&bl(A,j[1]))return j[0];if(j=h(),Cd){gr(!0);try{h()}finally{gr(!1)}}return b.memoizedState=[j,A],j}function Nh(h,A,b){return b===void 0||(Td&1073741824)!==0&&(Ps&261930)===0?h.memoizedState=A:(h.memoizedState=b,h=oc(),Ji.lanes|=h,H|=h,b)}function kd(h,A,b,j){return _n(b,A)?b:ni.current!==null?(h=Nh(h,b,j),_n(h,A)||(Ge=!0),h):(Td&42)===0||(Td&1073741824)!==0&&(Ps&261930)===0?(Ge=!0,h.memoizedState=b):(h=oc(),Ji.lanes|=h,H|=h,A)}function Gd(h,A,b,j,Y){var ee=ae.p;ae.p=ee!==0&&8>ee?ee:8;var Te=ne.T,tt={};ne.T=tt,Pf(h,!1,A,b);try{var Pt=Y(),jr=ne.S;if(jr!==null&&jr(tt,Pt),Pt!==null&&typeof Pt=="object"&&typeof Pt.then=="function"){var Kr=nn(Pt,j);Lh(h,A,Kr,Mi(h))}else Lh(h,A,j,Mi(h))}catch(rn){Lh(h,A,{then:function(){},status:"rejected",reason:rn},Mi())}finally{ae.p=ee,Te!==null&&tt.types!==null&&(Te.types=tt.types),ne.T=Te}}function Qy(){}function Ap(h,A,b,j){if(h.tag!==5)throw Error(n(476));var Y=kh(h).queue;Gd(h,Y,A,oe,b===null?Qy:function(){return Ld(h),b(j)})}function kh(h){var A=h.memoizedState;if(A!==null)return A;A={memoizedState:oe,baseState:oe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kd,lastRenderedState:oe},next:null};var b={};return A.next={memoizedState:b,baseState:b,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kd,lastRenderedState:b},next:null},h.memoizedState=A,h=h.alternate,h!==null&&(h.memoizedState=A),A}function Ld(h){var A=kh(h);A.next===null&&(A=h.alternate.memoizedState),Lh(h,A.next.queue,{},Mi())}function eA(){return xo(z1)}function lv(){return Yo().memoizedState}function Rg(){return Yo().memoizedState}function zy(h){for(var A=h.return;A!==null;){switch(A.tag){case 24:case 3:var b=Mi();h=ki(b);var j=zi(A,h,b);j!==null&&(Do(j,A,b),xs(j,A,b)),A={cache:dh()},h.payload=A;return}A=A.return}}function Vy(h,A,b){var j=Mi();b={lane:j,revertLane:0,gesture:null,action:b,hasEagerState:!1,eagerState:null,next:null},Ih(h)?tA(A,b):(b=zd(h,A,b,j),b!==null&&(Do(b,h,j),Mg(b,A,j)))}function Dg(h,A,b){var j=Mi();Lh(h,A,b,j)}function Lh(h,A,b,j){var Y={lane:j,revertLane:0,gesture:null,action:b,hasEagerState:!1,eagerState:null,next:null};if(Ih(h))tA(A,Y);else{var ee=h.alternate;if(h.lanes===0&&(ee===null||ee.lanes===0)&&(ee=A.lastRenderedReducer,ee!==null))try{var Te=A.lastRenderedState,tt=ee(Te,b);if(Y.hasEagerState=!0,Y.eagerState=tt,_n(tt,Te))return gc(h,A,Y,0),Aa===null&&iu(),!1}catch{}if(b=zd(h,A,Y,j),b!==null)return Do(b,h,j),Mg(b,A,j),!0}return!1}function Pf(h,A,b,j){if(j={lane:2,revertLane:bk(),gesture:null,action:j,hasEagerState:!1,eagerState:null,next:null},Ih(h)){if(A)throw Error(n(479))}else A=zd(h,b,j,2),A!==null&&Do(A,h,2)}function Ih(h){var A=h.alternate;return h===Ji||A!==null&&A===Ji}function tA(h,A){Ju=Ch=!0;var b=h.pending;b===null?A.next=A:(A.next=b.next,b.next=A),h.pending=A}function Mg(h,A,b){if((b&4194048)!==0){var j=A.lanes;j&=h.pendingLanes,b|=j,A.lanes=b,as(h,b)}}var pp={readContext:xo,use:lp,useCallback:Is,useContext:Is,useEffect:Is,useImperativeHandle:Is,useLayoutEffect:Is,useInsertionEffect:Is,useMemo:Is,useReducer:Is,useRef:Is,useState:Is,useDebugValue:Is,useDeferredValue:Is,useTransition:Is,useSyncExternalStore:Is,useId:Is,useHostTransitionStatus:Is,useFormState:Is,useActionState:Is,useOptimistic:Is,useMemoCache:Is,useCacheRefresh:Is};pp.useEffectEvent=Is;var cv={readContext:xo,use:lp,useCallback:function(h,A){return Yc().memoizedState=[h,A===void 0?null:A],h},useContext:xo,useEffect:sv,useImperativeHandle:function(h,A,b){b=b!=null?b.concat([h]):null,Ig(4194308,4,av.bind(null,A,h),b)},useLayoutEffect:function(h,A){return Ig(4194308,4,h,A)},useInsertionEffect:function(h,A){Ig(4,2,h,A)},useMemo:function(h,A){var b=Yc();A=A===void 0?null:A;var j=h();if(Cd){gr(!0);try{h()}finally{gr(!1)}}return b.memoizedState=[j,A],j},useReducer:function(h,A,b){var j=Yc();if(b!==void 0){var Y=b(A);if(Cd){gr(!0);try{b(A)}finally{gr(!1)}}}else Y=A;return j.memoizedState=j.baseState=Y,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:Y},j.queue=h,h=h.dispatch=Vy.bind(null,Ji,h),[j.memoizedState,h]},useRef:function(h){var A=Yc();return h={current:h},A.memoizedState=h},useState:function(h){h=mm(h);var A=h.queue,b=Dg.bind(null,Ji,A);return A.dispatch=b,[h.memoizedState,b]},useDebugValue:ov,useDeferredValue:function(h,A){var b=Yc();return Nh(b,h,A)},useTransition:function(){var h=mm(!1);return h=Gd.bind(null,Ji,h.queue,!0,!1),Yc().memoizedState=h,[!1,h]},useSyncExternalStore:function(h,A,b){var j=Ji,Y=Yc();if(kn){if(b===void 0)throw Error(n(407));b=b()}else{if(b=A(),Aa===null)throw Error(n(349));(Ps&127)!==0||nv(j,A,b)}Y.memoizedState=b;var ee={value:b,getSnapshot:A};return Y.queue=ee,sv(up.bind(null,j,ee,h),[h]),j.flags|=2048,Zm(9,{destroy:void 0},Tg.bind(null,j,ee,b,A),null),b},useId:function(){var h=Yc(),A=Aa.identifierPrefix;if(kn){var b=bn,j=Wr;b=(j&~(1<<32-Yr(j)-1)).toString(32)+b,A="_"+A+"R_"+b,b=_c++,0<b&&(A+="H"+b.toString(32)),A+="_"}else b=eo++,A="_"+A+"r_"+b.toString(32)+"_";return h.memoizedState=A},useHostTransitionStatus:eA,useFormState:Am,useActionState:Am,useOptimistic:function(h){var A=Yc();A.memoizedState=A.baseState=h;var b={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return A.queue=b,A=Pf.bind(null,Ji,!0,b),b.dispatch=A,[h,A]},useMemoCache:Cu,useCacheRefresh:function(){return Yc().memoizedState=zy.bind(null,Ji)},useEffectEvent:function(h){var A=Yc(),b={impl:h};return A.memoizedState=b,function(){if((ya&2)!==0)throw Error(n(440));return b.impl.apply(void 0,arguments)}}},Fg={readContext:xo,use:lp,useCallback:fp,useContext:xo,useEffect:Jm,useImperativeHandle:Hy,useInsertionEffect:Og,useLayoutEffect:$y,useMemo:mp,useReducer:cp,useRef:Uy,useState:function(){return cp(Kd)},useDebugValue:ov,useDeferredValue:function(h,A){var b=Yo();return kd(b,ma.memoizedState,h,A)},useTransition:function(){var h=cp(Kd)[0],A=Yo().memoizedState;return[typeof h=="boolean"?h:Xh(h),A]},useSyncExternalStore:rv,useId:lv,useHostTransitionStatus:eA,useFormState:Lg,useActionState:Lg,useOptimistic:function(h,A){var b=Yo();return dp(b,ma,h,A)},useMemoCache:Cu,useCacheRefresh:Rg};Fg.useEffectEvent=pm;var Ug={readContext:xo,use:lp,useCallback:fp,useContext:xo,useEffect:Jm,useImperativeHandle:Hy,useInsertionEffect:Og,useLayoutEffect:$y,useMemo:mp,useReducer:jg,useRef:Uy,useState:function(){return jg(Kd)},useDebugValue:ov,useDeferredValue:function(h,A){var b=Yo();return ma===null?Nh(b,h,A):kd(b,ma.memoizedState,h,A)},useTransition:function(){var h=jg(Kd)[0],A=Yo().memoizedState;return[typeof h=="boolean"?h:Xh(h),A]},useSyncExternalStore:rv,useId:lv,useHostTransitionStatus:eA,useFormState:iv,useActionState:iv,useOptimistic:function(h,A){var b=Yo();return ma!==null?dp(b,ma,h,A):(b.baseState=h,[h,b.queue.dispatch])},useMemoCache:Cu,useCacheRefresh:Rg};Ug.useEffectEvent=pm;function $g(h,A,b,j){A=h.memoizedState,b=b(j,A),b=b==null?A:f({},A,b),h.memoizedState=b,h.lanes===0&&(h.updateQueue.baseState=b)}var Hg={enqueueSetState:function(h,A,b){h=h._reactInternals;var j=Mi(),Y=ki(j);Y.payload=A,b!=null&&(Y.callback=b),A=zi(h,Y,j),A!==null&&(Do(A,h,j),xs(A,h,j))},enqueueReplaceState:function(h,A,b){h=h._reactInternals;var j=Mi(),Y=ki(j);Y.tag=1,Y.payload=A,b!=null&&(Y.callback=b),A=zi(h,Y,j),A!==null&&(Do(A,h,j),xs(A,h,j))},enqueueForceUpdate:function(h,A){h=h._reactInternals;var b=Mi(),j=ki(b);j.tag=2,A!=null&&(j.callback=A),A=zi(h,j,b),A!==null&&(Do(A,h,b),xs(A,h,b))}};function Qg(h,A,b,j,Y,ee,Te){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(j,ee,Te):A.prototype&&A.prototype.isPureReactComponent?!cs(b,j)||!cs(Y,ee):!0}function uv(h,A,b,j){h=A.state,typeof A.componentWillReceiveProps=="function"&&A.componentWillReceiveProps(b,j),typeof A.UNSAFE_componentWillReceiveProps=="function"&&A.UNSAFE_componentWillReceiveProps(b,j),A.state!==h&&Hg.enqueueReplaceState(A,A.state,null)}function Zh(h,A){var b=A;if("ref"in A){b={};for(var j in A)j!=="ref"&&(b[j]=A[j])}if(h=h.defaultProps){b===A&&(b=f({},b));for(var Y in h)b[Y]===void 0&&(b[Y]=h[Y])}return b}function gp(h){Eu(h)}function vp(h){console.error(h)}function yp(h){Eu(h)}function rA(h,A){try{var b=h.onUncaughtError;b(A.value,{componentStack:A.stack})}catch(j){setTimeout(function(){throw j})}}function R(h,A,b){try{var j=h.onCaughtError;j(b.value,{componentStack:b.stack,errorBoundary:A.tag===1?A.stateNode:null})}catch(Y){setTimeout(function(){throw Y})}}function X(h,A,b){return b=ki(b),b.tag=3,b.payload={element:null},b.callback=function(){rA(h,A)},b}function pe(h){return h=ki(h),h.tag=3,h}function Ee(h,A,b,j){var Y=b.type.getDerivedStateFromError;if(typeof Y=="function"){var ee=j.value;h.payload=function(){return Y(ee)},h.callback=function(){R(A,b,j)}}var Te=b.stateNode;Te!==null&&typeof Te.componentDidCatch=="function"&&(h.callback=function(){R(A,b,j),typeof Y!="function"&&(Dn===null?Dn=new Set([this]):Dn.add(this));var tt=j.stack;this.componentDidCatch(j.value,{componentStack:tt!==null?tt:""})})}function $e(h,A,b,j,Y){if(b.flags|=32768,j!==null&&typeof j=="object"&&typeof j.then=="function"){if(A=b.alternate,A!==null&&jd(A,b,Y,!0),b=xl.current,b!==null){switch(b.tag){case 31:case 13:return ic===null?Ph():b.alternate===null&&z===0&&(z=3),b.flags&=-257,b.flags|=65536,b.lanes=Y,j===Wo?b.flags|=16384:(A=b.updateQueue,A===null?b.updateQueue=new Set([j]):A.add(j),vk(h,j,Y)),!1;case 22:return b.flags|=65536,j===Wo?b.flags|=16384:(A=b.updateQueue,A===null?(A={transitions:null,markerInstances:null,retryQueue:new Set([j])},b.updateQueue=A):(b=A.retryQueue,b===null?A.retryQueue=new Set([j]):b.add(j)),vk(h,j,Y)),!1}throw Error(n(435,b.tag))}return vk(h,j,Y),Ph(),!1}if(kn)return A=xl.current,A!==null?((A.flags&65536)===0&&(A.flags|=256),A.flags|=65536,A.lanes=Y,j!==Ed&&(h=Error(n(422),{cause:j}),bc(S(h,b)))):(j!==Ed&&(A=Error(n(423),{cause:j}),bc(S(A,b))),h=h.current.alternate,h.flags|=65536,Y&=-Y,h.lanes|=Y,j=S(j,b),Y=X(h.stateNode,j,Y),En(h,Y),z!==4&&(z=2)),!1;var ee=Error(n(520),{cause:j});if(ee=S(ee,b),pt===null?pt=[ee]:pt.push(ee),z!==4&&(z=2),A===null)return!0;j=S(j,b),b=A;do{switch(b.tag){case 3:return b.flags|=65536,h=Y&-Y,b.lanes|=h,h=X(b.stateNode,j,h),En(b,h),!1;case 1:if(A=b.type,ee=b.stateNode,(b.flags&128)===0&&(typeof A.getDerivedStateFromError=="function"||ee!==null&&typeof ee.componentDidCatch=="function"&&(Dn===null||!Dn.has(ee))))return b.flags|=65536,Y&=-Y,b.lanes|=Y,Y=pe(Y),Ee(Y,h,b,j),En(b,Y),!1}b=b.return}while(b!==null);return!1}var We=Error(n(461)),Ge=!1;function Je(h,A,b,j){A.child=h===null?an(A,null,b,j):Ln(A,h.child,b,j)}function st(h,A,b,j,Y){b=b.render;var ee=A.ref;if("ref"in j){var Te={};for(var tt in j)tt!=="ref"&&(Te[tt]=j[tt])}else Te=j;return Kc(A),j=fh(h,A,b,Te,ee,Y),tt=ip(),h!==null&&!Ge?(sp(h,A,Y),Ds(h,A,Y)):(kn&&tt&&Ma(A),A.flags|=1,Je(h,A,j,Y),A.child)}function bt(h,A,b,j,Y){if(h===null){var ee=b.type;return typeof ee=="function"&&!Fi(ee)&&ee.defaultProps===void 0&&b.compare===null?(A.tag=15,A.type=ee,$t(h,A,ee,j,Y)):(h=zc(b.type,null,j,A,A.mode,Y),h.ref=A.ref,h.return=A,A.child=h)}if(ee=h.child,!wo(h,Y)){var Te=ee.memoizedProps;if(b=b.compare,b=b!==null?b:cs,b(Te,j)&&h.ref===A.ref)return Ds(h,A,Y)}return A.flags|=1,h=vc(ee,j),h.ref=A.ref,h.return=A,A.child=h}function $t(h,A,b,j,Y){if(h!==null){var ee=h.memoizedProps;if(cs(ee,j)&&h.ref===A.ref)if(Ge=!1,A.pendingProps=j=ee,wo(h,Y))(h.flags&131072)!==0&&(Ge=!0);else return A.lanes=h.lanes,Ds(h,A,Y)}return Vr(h,A,b,j,Y)}function Ar(h,A,b,j){var Y=j.children,ee=h!==null?h.memoizedState:null;if(h===null&&A.stateNode===null&&(A.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),j.mode==="hidden"){if((A.flags&128)!==0){if(ee=ee!==null?ee.baseLanes|b:b,h!==null){for(j=A.child=h.child,Y=0;j!==null;)Y=Y|j.lanes|j.childLanes,j=j.sibling;j=Y&~ee}else j=0,A.child=null;return Yt(h,A,ee,b,j)}if((b&536870912)!==0)A.memoizedState={baseLanes:0,cachePool:null},h!==null&&os(A,ee!==null?ee.cachePool:null),ee!==null?nc(A,ee):Zu(),hh(A);else return j=A.lanes=536870912,Yt(h,A,ee!==null?ee.baseLanes|b:b,b,j)}else ee!==null?(os(A,ee.cachePool),nc(A,ee),Gc(),A.memoizedState=null):(h!==null&&os(A,null),Zu(),Gc());return Je(h,A,Y,b),A.child}function xt(h,A){return h!==null&&h.tag===22||A.stateNode!==null||(A.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),A.sibling}function Yt(h,A,b,j,Y){var ee=Yi();return ee=ee===null?null:{parent:Po._currentValue,pool:ee},A.memoizedState={baseLanes:b,cachePool:ee},h!==null&&os(A,null),Zu(),hh(A),h!==null&&jd(h,A,j,!0),A.childLanes=Y,null}function nr(h,A){return A=Es({mode:A.mode,children:A.children},h.mode),A.ref=h.ref,h.child=A,A.return=h,A}function Fr(h,A,b){return Ln(A,h.child,null,b),h=nr(A,A.pendingProps),h.flags|=2,Wc(A),A.memoizedState=null,h}function wr(h,A,b){var j=A.pendingProps,Y=(A.flags&128)!==0;if(A.flags&=-129,h===null){if(kn){if(j.mode==="hidden")return h=nr(A,j),A.lanes=536870912,xt(null,h);if(Ym(A),(h=ca)?(h=zU(h,xc),h=h!==null&&h.data==="&"?h:null,h!==null&&(A.memoizedState={dehydrated:h,treeContext:Er!==null?{id:Wr,overflow:bn}:null,retryLane:536870912,hydrationErrors:null},b=Bo(h),b.return=A,A.child=b,Zs=A,ca=null)):h=null,h===null)throw Yl(A);return A.lanes=536870912,null}return nr(A,j)}var ee=h.memoizedState;if(ee!==null){var Te=ee.dehydrated;if(Ym(A),Y)if(A.flags&256)A.flags&=-257,A=Fr(h,A,b);else if(A.memoizedState!==null)A.child=h.child,A.flags|=128,A=null;else throw Error(n(558));else if(Ge||jd(h,A,b,!1),Y=(b&h.childLanes)!==0,Ge||Y){if(j=Aa,j!==null&&(Te=ta(j,b),Te!==0&&Te!==ee.retryLane))throw ee.retryLane=Te,rc(h,Te),Do(j,h,Te),We;Ph(),A=Fr(h,A,b)}else h=ee.treeContext,ca=Mf(Te.nextSibling),Zs=A,kn=!0,Xu=null,xc=!1,h!==null&&il(A,h),A=nr(A,j),A.flags|=4096;return A}return h=vc(h.child,{mode:j.mode,children:j.children}),h.ref=A.ref,A.child=h,h.return=A,h}function Ur(h,A){var b=A.ref;if(b===null)h!==null&&h.ref!==null&&(A.flags|=4194816);else{if(typeof b!="function"&&typeof b!="object")throw Error(n(284));(h===null||h.ref!==b)&&(A.flags|=4194816)}}function Vr(h,A,b,j,Y){return Kc(A),b=fh(h,A,b,j,void 0,Y),j=ip(),h!==null&&!Ge?(sp(h,A,Y),Ds(h,A,Y)):(kn&&j&&Ma(A),A.flags|=1,Je(h,A,b,Y),A.child)}function dn(h,A,b,j,Y,ee){return Kc(A),A.updateQueue=null,b=qh(A,j,b,Y),fm(h),j=ip(),h!==null&&!Ge?(sp(h,A,ee),Ds(h,A,ee)):(kn&&j&&Ma(A),A.flags|=1,Je(h,A,b,ee),A.child)}function sn(h,A,b,j,Y){if(Kc(A),A.stateNode===null){var ee=yl,Te=b.contextType;typeof Te=="object"&&Te!==null&&(ee=xo(Te)),ee=new b(j,ee),A.memoizedState=ee.state!==null&&ee.state!==void 0?ee.state:null,ee.updater=Hg,A.stateNode=ee,ee._reactInternals=A,ee=A.stateNode,ee.props=j,ee.state=A.memoizedState,ee.refs={},Ua(A),Te=b.contextType,ee.context=typeof Te=="object"&&Te!==null?xo(Te):yl,ee.state=A.memoizedState,Te=b.getDerivedStateFromProps,typeof Te=="function"&&($g(A,b,Te,j),ee.state=A.memoizedState),typeof b.getDerivedStateFromProps=="function"||typeof ee.getSnapshotBeforeUpdate=="function"||typeof ee.UNSAFE_componentWillMount!="function"&&typeof ee.componentWillMount!="function"||(Te=ee.state,typeof ee.componentWillMount=="function"&&ee.componentWillMount(),typeof ee.UNSAFE_componentWillMount=="function"&&ee.UNSAFE_componentWillMount(),Te!==ee.state&&Hg.enqueueReplaceState(ee,ee.state,null),ji(A,j,ee,Y),$a(),ee.state=A.memoizedState),typeof ee.componentDidMount=="function"&&(A.flags|=4194308),j=!0}else if(h===null){ee=A.stateNode;var tt=A.memoizedProps,Pt=Zh(b,tt);ee.props=Pt;var jr=ee.context,Kr=b.contextType;Te=yl,typeof Kr=="object"&&Kr!==null&&(Te=xo(Kr));var rn=b.getDerivedStateFromProps;Kr=typeof rn=="function"||typeof ee.getSnapshotBeforeUpdate=="function",tt=A.pendingProps!==tt,Kr||typeof ee.UNSAFE_componentWillReceiveProps!="function"&&typeof ee.componentWillReceiveProps!="function"||(tt||jr!==Te)&&uv(A,ee,j,Te),Mr=!1;var Cr=A.memoizedState;ee.state=Cr,ji(A,j,ee,Y),$a(),jr=A.memoizedState,tt||Cr!==jr||Mr?(typeof rn=="function"&&($g(A,b,rn,j),jr=A.memoizedState),(Pt=Mr||Qg(A,b,Pt,j,Cr,jr,Te))?(Kr||typeof ee.UNSAFE_componentWillMount!="function"&&typeof ee.componentWillMount!="function"||(typeof ee.componentWillMount=="function"&&ee.componentWillMount(),typeof ee.UNSAFE_componentWillMount=="function"&&ee.UNSAFE_componentWillMount()),typeof ee.componentDidMount=="function"&&(A.flags|=4194308)):(typeof ee.componentDidMount=="function"&&(A.flags|=4194308),A.memoizedProps=j,A.memoizedState=jr),ee.props=j,ee.state=jr,ee.context=Te,j=Pt):(typeof ee.componentDidMount=="function"&&(A.flags|=4194308),j=!1)}else{ee=A.stateNode,Wi(h,A),Te=A.memoizedProps,Kr=Zh(b,Te),ee.props=Kr,rn=A.pendingProps,Cr=ee.context,jr=b.contextType,Pt=yl,typeof jr=="object"&&jr!==null&&(Pt=xo(jr)),tt=b.getDerivedStateFromProps,(jr=typeof tt=="function"||typeof ee.getSnapshotBeforeUpdate=="function")||typeof ee.UNSAFE_componentWillReceiveProps!="function"&&typeof ee.componentWillReceiveProps!="function"||(Te!==rn||Cr!==Pt)&&uv(A,ee,j,Pt),Mr=!1,Cr=A.memoizedState,ee.state=Cr,ji(A,j,ee,Y),$a();var Br=A.memoizedState;Te!==rn||Cr!==Br||Mr||h!==null&&h.dependencies!==null&&lh(h.dependencies)?(typeof tt=="function"&&($g(A,b,tt,j),Br=A.memoizedState),(Kr=Mr||Qg(A,b,Kr,j,Cr,Br,Pt)||h!==null&&h.dependencies!==null&&lh(h.dependencies))?(jr||typeof ee.UNSAFE_componentWillUpdate!="function"&&typeof ee.componentWillUpdate!="function"||(typeof ee.componentWillUpdate=="function"&&ee.componentWillUpdate(j,Br,Pt),typeof ee.UNSAFE_componentWillUpdate=="function"&&ee.UNSAFE_componentWillUpdate(j,Br,Pt)),typeof ee.componentDidUpdate=="function"&&(A.flags|=4),typeof ee.getSnapshotBeforeUpdate=="function"&&(A.flags|=1024)):(typeof ee.componentDidUpdate!="function"||Te===h.memoizedProps&&Cr===h.memoizedState||(A.flags|=4),typeof ee.getSnapshotBeforeUpdate!="function"||Te===h.memoizedProps&&Cr===h.memoizedState||(A.flags|=1024),A.memoizedProps=j,A.memoizedState=Br),ee.props=j,ee.state=Br,ee.context=Pt,j=Kr):(typeof ee.componentDidUpdate!="function"||Te===h.memoizedProps&&Cr===h.memoizedState||(A.flags|=4),typeof ee.getSnapshotBeforeUpdate!="function"||Te===h.memoizedProps&&Cr===h.memoizedState||(A.flags|=1024),j=!1)}return ee=j,Ur(h,A),j=(A.flags&128)!==0,ee||j?(ee=A.stateNode,b=j&&typeof b.getDerivedStateFromError!="function"?null:ee.render(),A.flags|=1,h!==null&&j?(A.child=Ln(A,h.child,null,Y),A.child=Ln(A,null,b,Y)):Je(h,A,b,Y),A.memoizedState=ee.state,h=A.child):h=Ds(h,A,Y),h}function Ti(h,A,b,j){return Go(),A.flags|=256,Je(h,A,b,j),A.child}var Vn={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Bs(h){return{baseLanes:h,cachePool:na()}}function pi(h,A,b){return h=h!==null?h.childLanes&~b:0,A&&(h|=ze),h}function ua(h,A,b){var j=A.pendingProps,Y=!1,ee=(A.flags&128)!==0,Te;if((Te=ee)||(Te=h!==null&&h.memoizedState===null?!1:(Ro.current&2)!==0),Te&&(Y=!0,A.flags&=-129),Te=(A.flags&32)!==0,A.flags&=-33,h===null){if(kn){if(Y?oo(A):Gc(),(h=ca)?(h=zU(h,xc),h=h!==null&&h.data!=="&"?h:null,h!==null&&(A.memoizedState={dehydrated:h,treeContext:Er!==null?{id:Wr,overflow:bn}:null,retryLane:536870912,hydrationErrors:null},b=Bo(h),b.return=A,A.child=b,Zs=A,ca=null)):h=null,h===null)throw Yl(A);return Pk(h)?A.lanes=32:A.lanes=536870912,null}var tt=j.children;return j=j.fallback,Y?(Gc(),Y=A.mode,tt=Es({mode:"hidden",children:tt},Y),j=qu(j,Y,b,null),tt.return=A,j.return=A,tt.sibling=j,A.child=tt,j=A.child,j.memoizedState=Bs(b),j.childLanes=pi(h,Te,b),A.memoizedState=Vn,xt(null,j)):(oo(A),Ol(A,tt))}var Pt=h.memoizedState;if(Pt!==null&&(tt=Pt.dehydrated,tt!==null)){if(ee)A.flags&256?(oo(A),A.flags&=-257,A=hi(h,A,b)):A.memoizedState!==null?(Gc(),A.child=h.child,A.flags|=128,A=null):(Gc(),tt=j.fallback,Y=A.mode,j=Es({mode:"visible",children:j.children},Y),tt=qu(tt,Y,b,null),tt.flags|=2,j.return=A,tt.return=A,j.sibling=tt,A.child=j,Ln(A,h.child,null,b),j=A.child,j.memoizedState=Bs(b),j.childLanes=pi(h,Te,b),A.memoizedState=Vn,A=xt(null,j));else if(oo(A),Pk(tt)){if(Te=tt.nextSibling&&tt.nextSibling.dataset,Te)var jr=Te.dgst;Te=jr,j=Error(n(419)),j.stack="",j.digest=Te,bc({value:j,source:null,stack:null}),A=hi(h,A,b)}else if(Ge||jd(h,A,b,!1),Te=(b&h.childLanes)!==0,Ge||Te){if(Te=Aa,Te!==null&&(j=ta(Te,b),j!==0&&j!==Pt.retryLane))throw Pt.retryLane=j,rc(h,j),Do(Te,h,j),We;Bk(tt)||Ph(),A=hi(h,A,b)}else Bk(tt)?(A.flags|=192,A.child=h.child,A=null):(h=Pt.treeContext,ca=Mf(tt.nextSibling),Zs=A,kn=!0,Xu=null,xc=!1,h!==null&&il(A,h),A=Ol(A,j.children),A.flags|=4096);return A}return Y?(Gc(),tt=j.fallback,Y=A.mode,Pt=h.child,jr=Pt.sibling,j=vc(Pt,{mode:"hidden",children:j.children}),j.subtreeFlags=Pt.subtreeFlags&65011712,jr!==null?tt=vc(jr,tt):(tt=qu(tt,Y,b,null),tt.flags|=2),tt.return=A,j.return=A,j.sibling=tt,A.child=j,xt(null,j),j=A.child,tt=h.child.memoizedState,tt===null?tt=Bs(b):(Y=tt.cachePool,Y!==null?(Pt=Po._currentValue,Y=Y.parent!==Pt?{parent:Pt,pool:Pt}:Y):Y=na(),tt={baseLanes:tt.baseLanes|b,cachePool:Y}),j.memoizedState=tt,j.childLanes=pi(h,Te,b),A.memoizedState=Vn,xt(h.child,j)):(oo(A),b=h.child,h=b.sibling,b=vc(b,{mode:"visible",children:j.children}),b.return=A,b.sibling=null,h!==null&&(Te=A.deletions,Te===null?(A.deletions=[h],A.flags|=16):Te.push(h)),A.child=b,A.memoizedState=null,b)}function Ol(h,A){return A=Es({mode:"visible",children:A},h.mode),A.return=h,h.child=A}function Es(h,A){return h=Bl(22,h,null,A),h.lanes=0,h}function hi(h,A,b){return Ln(A,h.child,null,b),h=Ol(A,A.pendingProps.children),h.flags|=2,A.memoizedState=null,h}function Rn(h,A,b){h.lanes|=A;var j=h.alternate;j!==null&&(j.lanes|=A),Sh(h.return,A,b)}function sl(h,A,b,j,Y,ee){var Te=h.memoizedState;Te===null?h.memoizedState={isBackwards:A,rendering:null,renderingStartTime:0,last:j,tail:b,tailMode:Y,treeForkCount:ee}:(Te.isBackwards=A,Te.rendering=null,Te.renderingStartTime=0,Te.last=j,Te.tail=b,Te.tailMode=Y,Te.treeForkCount=ee)}function Ss(h,A,b){var j=A.pendingProps,Y=j.revealOrder,ee=j.tail;j=j.children;var Te=Ro.current,tt=(Te&2)!==0;if(tt?(Te=Te&1|2,A.flags|=128):Te&=1,Pe(Ro,Te),Je(h,A,j,b),j=kn?Ke:0,!tt&&h!==null&&(h.flags&128)!==0)e:for(h=A.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&Rn(h,b,A);else if(h.tag===19)Rn(h,b,A);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===A)break e;for(;h.sibling===null;){if(h.return===null||h.return===A)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}switch(Y){case"forwards":for(b=A.child,Y=null;b!==null;)h=b.alternate,h!==null&&If(h)===null&&(Y=b),b=b.sibling;b=Y,b===null?(Y=A.child,A.child=null):(Y=b.sibling,b.sibling=null),sl(A,!1,Y,b,ee,j);break;case"backwards":case"unstable_legacy-backwards":for(b=null,Y=A.child,A.child=null;Y!==null;){if(h=Y.alternate,h!==null&&If(h)===null){A.child=Y;break}h=Y.sibling,Y.sibling=b,b=Y,Y=h}sl(A,!0,b,null,ee,j);break;case"together":sl(A,!1,null,null,void 0,j);break;default:A.memoizedState=null}return A.child}function Ds(h,A,b){if(h!==null&&(A.dependencies=h.dependencies),H|=A.lanes,(b&A.childLanes)===0)if(h!==null){if(jd(h,A,b,!1),(b&A.childLanes)===0)return null}else return null;if(h!==null&&A.child!==h.child)throw Error(n(153));if(A.child!==null){for(h=A.child,b=vc(h,h.pendingProps),A.child=b,b.return=A;h.sibling!==null;)h=h.sibling,b=b.sibling=vc(h,h.pendingProps),b.return=A;b.sibling=null}return A.child}function wo(h,A){return(h.lanes&A)!==0?!0:(h=h.dependencies,!!(h!==null&&lh(h)))}function sc(h,A,b){switch(A.tag){case 3:at(A,A.stateNode.containerInfo),wc(A,Po,h.memoizedState.cache),Go();break;case 27:case 5:ut(A);break;case 4:at(A,A.stateNode.containerInfo);break;case 10:wc(A,A.type,A.memoizedProps.value);break;case 31:if(A.memoizedState!==null)return A.flags|=128,Ym(A),null;break;case 13:var j=A.memoizedState;if(j!==null)return j.dehydrated!==null?(oo(A),A.flags|=128,null):(b&A.child.childLanes)!==0?ua(h,A,b):(oo(A),h=Ds(h,A,b),h!==null?h.sibling:null);oo(A);break;case 19:var Y=(h.flags&128)!==0;if(j=(b&A.childLanes)!==0,j||(jd(h,A,b,!1),j=(b&A.childLanes)!==0),Y){if(j)return Ss(h,A,b);A.flags|=128}if(Y=A.memoizedState,Y!==null&&(Y.rendering=null,Y.tail=null,Y.lastEffect=null),Pe(Ro,Ro.current),j)break;return null;case 22:return A.lanes=0,Ar(h,A,b,A.pendingProps);case 24:wc(A,Po,h.memoizedState.cache)}return Ds(h,A,b)}function Ec(h,A,b){if(h!==null)if(h.memoizedProps!==A.pendingProps)Ge=!0;else{if(!wo(h,b)&&(A.flags&128)===0)return Ge=!1,sc(h,A,b);Ge=(h.flags&131072)!==0}else Ge=!1,kn&&(A.flags&1048576)!==0&&As(A,Ke,A.index);switch(A.lanes=0,A.tag){case 16:e:{var j=A.pendingProps;if(h=te(A.elementType),A.type=h,typeof h=="function")Fi(h)?(j=Zh(h,j),A.tag=1,A=sn(null,A,h,j,b)):(A.tag=0,A=Vr(null,A,h,j,b));else{if(h!=null){var Y=h.$$typeof;if(Y===N){A.tag=11,A=st(null,A,h,j,b);break e}else if(Y===D){A.tag=14,A=bt(null,A,h,j,b);break e}}throw A=we(h)||h,Error(n(306,A,""))}}return A;case 0:return Vr(h,A,A.type,A.pendingProps,b);case 1:return j=A.type,Y=Zh(j,A.pendingProps),sn(h,A,j,Y,b);case 3:e:{if(at(A,A.stateNode.containerInfo),h===null)throw Error(n(387));j=A.pendingProps;var ee=A.memoizedState;Y=ee.element,Wi(h,A),ji(A,j,null,b);var Te=A.memoizedState;if(j=Te.cache,wc(A,Po,j),j!==ee.cache&&au(A,[Po],b,!0),$a(),j=Te.element,ee.isDehydrated)if(ee={element:j,isDehydrated:!1,cache:Te.cache},A.updateQueue.baseState=ee,A.memoizedState=ee,A.flags&256){A=Ti(h,A,j,b);break e}else if(j!==Y){Y=S(Error(n(424)),A),bc(Y),A=Ti(h,A,j,b);break e}else for(h=A.stateNode.containerInfo,h.nodeType===9?h=h.body:h=h.nodeName==="HTML"?h.ownerDocument.body:h,ca=Mf(h.firstChild),Zs=A,kn=!0,Xu=null,xc=!0,b=an(A,null,j,b),A.child=b;b;)b.flags=b.flags&-3|4096,b=b.sibling;else{if(Go(),j===Y){A=Ds(h,A,b);break e}Je(h,A,j,b)}A=A.child}return A;case 26:return Ur(h,A),h===null?(b=qU(A.type,null,A.pendingProps,null))?A.memoizedState=b:kn||(b=A.type,h=A.pendingProps,j=TE(Fe.current).createElement(b),j[ns]=A,j[qs]=h,Bd(j,b,h),wa(j),A.stateNode=j):A.memoizedState=qU(A.type,h.memoizedProps,A.pendingProps,h.memoizedState),null;case 27:return ut(A),h===null&&kn&&(j=A.stateNode=GU(A.type,A.pendingProps,Fe.current),Zs=A,xc=!0,Y=ca,Gg(A.type)?(Ok=Y,ca=Mf(j.firstChild)):ca=Y),Je(h,A,A.pendingProps.children,b),Ur(h,A),h===null&&(A.flags|=4194304),A.child;case 5:return h===null&&kn&&((Y=j=ca)&&(j=Hle(j,A.type,A.pendingProps,xc),j!==null?(A.stateNode=j,Zs=A,ca=Mf(j.firstChild),xc=!1,Y=!0):Y=!1),Y||Yl(A)),ut(A),Y=A.type,ee=A.pendingProps,Te=h!==null?h.memoizedProps:null,j=ee.children,kk(Y,ee)?j=null:Te!==null&&kk(Y,Te)&&(A.flags|=32),A.memoizedState!==null&&(Y=fh(h,A,qm,null,null,b),z1._currentValue=Y),Ur(h,A),Je(h,A,j,b),A.child;case 6:return h===null&&kn&&((h=b=ca)&&(b=Qle(b,A.pendingProps,xc),b!==null?(A.stateNode=b,Zs=A,ca=null,h=!0):h=!1),h||Yl(A)),null;case 13:return ua(h,A,b);case 4:return at(A,A.stateNode.containerInfo),j=A.pendingProps,h===null?A.child=Ln(A,null,j,b):Je(h,A,j,b),A.child;case 11:return st(h,A,A.type,A.pendingProps,b);case 7:return Je(h,A,A.pendingProps,b),A.child;case 8:return Je(h,A,A.pendingProps.children,b),A.child;case 12:return Je(h,A,A.pendingProps.children,b),A.child;case 10:return j=A.pendingProps,wc(A,A.type,j.value),Je(h,A,j.children,b),A.child;case 9:return Y=A.type._context,j=A.pendingProps.children,Kc(A),Y=xo(Y),j=j(Y),A.flags|=1,Je(h,A,j,b),A.child;case 14:return bt(h,A,A.type,A.pendingProps,b);case 15:return $t(h,A,A.type,A.pendingProps,b);case 19:return Ss(h,A,b);case 31:return wr(h,A,b);case 22:return Ar(h,A,b,A.pendingProps);case 24:return Kc(A),j=xo(Po),h===null?(Y=Yi(),Y===null&&(Y=Aa,ee=dh(),Y.pooledCache=ee,ee.refCount++,ee!==null&&(Y.pooledCacheLanes|=b),Y=ee),A.memoizedState={parent:j,cache:Y},Ua(A),wc(A,Po,Y)):((h.lanes&b)!==0&&(Wi(h,A),ji(A,null,null,b),$a()),Y=h.memoizedState,ee=A.memoizedState,Y.parent!==j?(Y={parent:j,cache:j},A.memoizedState=Y,A.lanes===0&&(A.memoizedState=A.updateQueue.baseState=Y),wc(A,Po,j)):(j=ee.cache,wc(A,Po,j),j!==Y.cache&&au(A,[Po],b,!0))),Je(h,A,A.pendingProps.children,b),A.child;case 29:throw A.pendingProps}throw Error(n(156,A.tag))}function Ha(h){h.flags|=4}function Sc(h,A,b,j,Y){if((A=(h.mode&32)!==0)&&(A=!1),A){if(h.flags|=16777216,(Y&335544128)===Y)if(h.stateNode.complete)h.flags|=8192;else if(ym())h.flags|=8192;else throw qe=Wo,Oo}else h.flags&=-16777217}function lu(h,A){if(A.type!=="stylesheet"||(A.state.loading&4)!==0)h.flags&=-16777217;else if(h.flags|=16777216,!t8(A))if(ym())h.flags|=8192;else throw qe=Wo,Oo}function al(h,A){A!==null&&(h.flags|=4),h.flags&16384&&(A=h.tag!==22?Cs():536870912,h.lanes|=A,At|=A)}function aa(h,A){if(!kn)switch(h.tailMode){case"hidden":A=h.tail;for(var b=null;A!==null;)A.alternate!==null&&(b=A),A=A.sibling;b===null?h.tail=null:b.sibling=null;break;case"collapsed":b=h.tail;for(var j=null;b!==null;)b.alternate!==null&&(j=b),b=b.sibling;j===null?A||h.tail===null?h.tail=null:h.tail.sibling=null:j.sibling=null}}function Vi(h){var A=h.alternate!==null&&h.alternate.child===h.child,b=0,j=0;if(A)for(var Y=h.child;Y!==null;)b|=Y.lanes|Y.childLanes,j|=Y.subtreeFlags&65011712,j|=Y.flags&65011712,Y.return=h,Y=Y.sibling;else for(Y=h.child;Y!==null;)b|=Y.lanes|Y.childLanes,j|=Y.subtreeFlags,j|=Y.flags,Y.return=h,Y=Y.sibling;return h.subtreeFlags|=j,h.childLanes=b,A}function wl(h,A,b){var j=A.pendingProps;switch(Co(A),A.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vi(A),null;case 1:return Vi(A),null;case 3:return b=A.stateNode,j=null,h!==null&&(j=h.memoizedState.cache),A.memoizedState.cache!==j&&(A.flags|=2048),Vc(Po),De(),b.pendingContext&&(b.context=b.pendingContext,b.pendingContext=null),(h===null||h.child===null)&&(ju(A)?Ha(A):h===null||h.memoizedState.isDehydrated&&(A.flags&256)===0||(A.flags|=1024,Sd())),Vi(A),null;case 26:var Y=A.type,ee=A.memoizedState;return h===null?(Ha(A),ee!==null?(Vi(A),lu(A,ee)):(Vi(A),Sc(A,Y,null,j,b))):ee?ee!==h.memoizedState?(Ha(A),Vi(A),lu(A,ee)):(Vi(A),A.flags&=-16777217):(h=h.memoizedProps,h!==j&&Ha(A),Vi(A),Sc(A,Y,h,j,b)),null;case 27:if(et(A),b=Fe.current,Y=A.type,h!==null&&A.stateNode!=null)h.memoizedProps!==j&&Ha(A);else{if(!j){if(A.stateNode===null)throw Error(n(166));return Vi(A),null}h=Re.current,ju(A)?Su(A):(h=GU(Y,j,b),A.stateNode=h,Ha(A))}return Vi(A),null;case 5:if(et(A),Y=A.type,h!==null&&A.stateNode!=null)h.memoizedProps!==j&&Ha(A);else{if(!j){if(A.stateNode===null)throw Error(n(166));return Vi(A),null}if(ee=Re.current,ju(A))Su(A);else{var Te=TE(Fe.current);switch(ee){case 1:ee=Te.createElementNS("http://www.w3.org/2000/svg",Y);break;case 2:ee=Te.createElementNS("http://www.w3.org/1998/Math/MathML",Y);break;default:switch(Y){case"svg":ee=Te.createElementNS("http://www.w3.org/2000/svg",Y);break;case"math":ee=Te.createElementNS("http://www.w3.org/1998/Math/MathML",Y);break;case"script":ee=Te.createElement("div"),ee.innerHTML="<script><\/script>",ee=ee.removeChild(ee.firstChild);break;case"select":ee=typeof j.is=="string"?Te.createElement("select",{is:j.is}):Te.createElement("select"),j.multiple?ee.multiple=!0:j.size&&(ee.size=j.size);break;default:ee=typeof j.is=="string"?Te.createElement(Y,{is:j.is}):Te.createElement(Y)}}ee[ns]=A,ee[qs]=j;e:for(Te=A.child;Te!==null;){if(Te.tag===5||Te.tag===6)ee.appendChild(Te.stateNode);else if(Te.tag!==4&&Te.tag!==27&&Te.child!==null){Te.child.return=Te,Te=Te.child;continue}if(Te===A)break e;for(;Te.sibling===null;){if(Te.return===null||Te.return===A)break e;Te=Te.return}Te.sibling.return=Te.return,Te=Te.sibling}A.stateNode=ee;e:switch(Bd(ee,Y,j),Y){case"button":case"input":case"select":case"textarea":j=!!j.autoFocus;break e;case"img":j=!0;break e;default:j=!1}j&&Ha(A)}}return Vi(A),Sc(A,A.type,h===null?null:h.memoizedProps,A.pendingProps,b),null;case 6:if(h&&A.stateNode!=null)h.memoizedProps!==j&&Ha(A);else{if(typeof j!="string"&&A.stateNode===null)throw Error(n(166));if(h=Fe.current,ju(A)){if(h=A.stateNode,b=A.memoizedProps,j=null,Y=Zs,Y!==null)switch(Y.tag){case 27:case 5:j=Y.memoizedProps}h[ns]=A,h=!!(h.nodeValue===b||j!==null&&j.suppressHydrationWarning===!0||RU(h.nodeValue,b)),h||Yl(A,!0)}else h=TE(h).createTextNode(j),h[ns]=A,A.stateNode=h}return Vi(A),null;case 31:if(b=A.memoizedState,h===null||h.memoizedState!==null){if(j=ju(A),b!==null){if(h===null){if(!j)throw Error(n(318));if(h=A.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(n(557));h[ns]=A}else Go(),(A.flags&128)===0&&(A.memoizedState=null),A.flags|=4;Vi(A),h=!1}else b=Sd(),h!==null&&h.memoizedState!==null&&(h.memoizedState.hydrationErrors=b),h=!0;if(!h)return A.flags&256?(Wc(A),A):(Wc(A),null);if((A.flags&128)!==0)throw Error(n(558))}return Vi(A),null;case 13:if(j=A.memoizedState,h===null||h.memoizedState!==null&&h.memoizedState.dehydrated!==null){if(Y=ju(A),j!==null&&j.dehydrated!==null){if(h===null){if(!Y)throw Error(n(318));if(Y=A.memoizedState,Y=Y!==null?Y.dehydrated:null,!Y)throw Error(n(317));Y[ns]=A}else Go(),(A.flags&128)===0&&(A.memoizedState=null),A.flags|=4;Vi(A),Y=!1}else Y=Sd(),h!==null&&h.memoizedState!==null&&(h.memoizedState.hydrationErrors=Y),Y=!0;if(!Y)return A.flags&256?(Wc(A),A):(Wc(A),null)}return Wc(A),(A.flags&128)!==0?(A.lanes=b,A):(b=j!==null,h=h!==null&&h.memoizedState!==null,b&&(j=A.child,Y=null,j.alternate!==null&&j.alternate.memoizedState!==null&&j.alternate.memoizedState.cachePool!==null&&(Y=j.alternate.memoizedState.cachePool.pool),ee=null,j.memoizedState!==null&&j.memoizedState.cachePool!==null&&(ee=j.memoizedState.cachePool.pool),ee!==Y&&(j.flags|=2048)),b!==h&&b&&(A.child.flags|=8192),al(A,A.updateQueue),Vi(A),null);case 4:return De(),h===null&&Sk(A.stateNode.containerInfo),Vi(A),null;case 10:return Vc(A.type),Vi(A),null;case 19:if(ue(Ro),j=A.memoizedState,j===null)return Vi(A),null;if(Y=(A.flags&128)!==0,ee=j.rendering,ee===null)if(Y)aa(j,!1);else{if(z!==0||h!==null&&(h.flags&128)!==0)for(h=A.child;h!==null;){if(ee=If(h),ee!==null){for(A.flags|=128,aa(j,!1),h=ee.updateQueue,A.updateQueue=h,al(A,h),A.subtreeFlags=0,h=b,b=A.child;b!==null;)Qc(b,h),b=b.sibling;return Pe(Ro,Ro.current&1|2),kn&&ui(A,j.treeForkCount),A.child}h=h.sibling}j.tail!==null&&Gr()>Kn&&(A.flags|=128,Y=!0,aa(j,!1),A.lanes=4194304)}else{if(!Y)if(h=If(ee),h!==null){if(A.flags|=128,Y=!0,h=h.updateQueue,A.updateQueue=h,al(A,h),aa(j,!0),j.tail===null&&j.tailMode==="hidden"&&!ee.alternate&&!kn)return Vi(A),null}else 2*Gr()-j.renderingStartTime>Kn&&b!==536870912&&(A.flags|=128,Y=!0,aa(j,!1),A.lanes=4194304);j.isBackwards?(ee.sibling=A.child,A.child=ee):(h=j.last,h!==null?h.sibling=ee:A.child=ee,j.last=ee)}return j.tail!==null?(h=j.tail,j.rendering=h,j.tail=h.sibling,j.renderingStartTime=Gr(),h.sibling=null,b=Ro.current,Pe(Ro,Y?b&1|2:b&1),kn&&ui(A,j.treeForkCount),h):(Vi(A),null);case 22:case 23:return Wc(A),ou(),j=A.memoizedState!==null,h!==null?h.memoizedState!==null!==j&&(A.flags|=8192):j&&(A.flags|=8192),j?(b&536870912)!==0&&(A.flags&128)===0&&(Vi(A),A.subtreeFlags&6&&(A.flags|=8192)):Vi(A),b=A.updateQueue,b!==null&&al(A,b.retryQueue),b=null,h!==null&&h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(b=h.memoizedState.cachePool.pool),j=null,A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(j=A.memoizedState.cachePool.pool),j!==b&&(A.flags|=2048),h!==null&&ue(ri),null;case 24:return b=null,h!==null&&(b=h.memoizedState.cache),A.memoizedState.cache!==b&&(A.flags|=2048),Vc(Po),Vi(A),null;case 25:return null;case 30:return null}throw Error(n(156,A.tag))}function to(h,A){switch(Co(A),A.tag){case 1:return h=A.flags,h&65536?(A.flags=h&-65537|128,A):null;case 3:return Vc(Po),De(),h=A.flags,(h&65536)!==0&&(h&128)===0?(A.flags=h&-65537|128,A):null;case 26:case 27:case 5:return et(A),null;case 31:if(A.memoizedState!==null){if(Wc(A),A.alternate===null)throw Error(n(340));Go()}return h=A.flags,h&65536?(A.flags=h&-65537|128,A):null;case 13:if(Wc(A),h=A.memoizedState,h!==null&&h.dehydrated!==null){if(A.alternate===null)throw Error(n(340));Go()}return h=A.flags,h&65536?(A.flags=h&-65537|128,A):null;case 19:return ue(Ro),null;case 4:return De(),null;case 10:return Vc(A.type),null;case 22:case 23:return Wc(A),ou(),h!==null&&ue(ri),h=A.flags,h&65536?(A.flags=h&-65537|128,A):null;case 24:return Vc(Po),null;case 25:return null;default:return null}}function jc(h,A){switch(Co(A),A.tag){case 3:Vc(Po),De();break;case 26:case 27:case 5:et(A);break;case 4:De();break;case 31:A.memoizedState!==null&&Wc(A);break;case 13:Wc(A);break;case 19:ue(Ro);break;case 10:Vc(A.type);break;case 22:case 23:Wc(A),ou(),h!==null&&ue(ri);break;case 24:Vc(Po)}}function qc(h,A){try{var b=A.updateQueue,j=b!==null?b.lastEffect:null;if(j!==null){var Y=j.next;b=Y;do{if((b.tag&h)===h){j=void 0;var ee=b.create,Te=b.inst;j=ee(),Te.destroy=j}b=b.next}while(b!==Y)}}catch(tt){Mo(A,A.return,tt)}}function lo(h,A,b){try{var j=A.updateQueue,Y=j!==null?j.lastEffect:null;if(Y!==null){var ee=Y.next;j=ee;do{if((j.tag&h)===h){var Te=j.inst,tt=Te.destroy;if(tt!==void 0){Te.destroy=void 0,Y=A;var Pt=b,jr=tt;try{jr()}catch(Kr){Mo(Y,Pt,Kr)}}}j=j.next}while(j!==ee)}}catch(Kr){Mo(A,A.return,Kr)}}function Xc(h){var A=h.updateQueue;if(A!==null){var b=h.stateNode;try{Ls(A,b)}catch(j){Mo(h,h.return,j)}}}function co(h,A,b){b.props=Zh(h.type,h.memoizedProps),b.state=h.memoizedState;try{b.componentWillUnmount()}catch(j){Mo(h,A,j)}}function gn(h,A){try{var b=h.ref;if(b!==null){switch(h.tag){case 26:case 27:case 5:var j=h.stateNode;break;case 30:j=h.stateNode;break;default:j=h.stateNode}typeof b=="function"?h.refCleanup=b(j):b.current=j}}catch(Y){Mo(h,A,Y)}}function _o(h,A){var b=h.ref,j=h.refCleanup;if(b!==null)if(typeof j=="function")try{j()}catch(Y){Mo(h,A,Y)}finally{h.refCleanup=null,h=h.alternate,h!=null&&(h.refCleanup=null)}else if(typeof b=="function")try{b(null)}catch(Y){Mo(h,A,Y)}else b.current=null}function ac(h){var A=h.type,b=h.memoizedProps,j=h.stateNode;try{e:switch(A){case"button":case"input":case"select":case"textarea":b.autoFocus&&j.focus();break e;case"img":b.src?j.src=b.src:b.srcSet&&(j.srcset=b.srcSet)}}catch(Y){Mo(h,h.return,Y)}}function No(h,A,b){try{var j=h.stateNode;Rle(j,h.type,b,A),j[qs]=A}catch(Y){Mo(h,h.return,Y)}}function rd(h){return h.tag===5||h.tag===3||h.tag===26||h.tag===27&&Gg(h.type)||h.tag===4}function ws(h){e:for(;;){for(;h.sibling===null;){if(h.return===null||rd(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&h.tag!==18;){if(h.tag===27&&Gg(h.type)||h.flags&2||h.child===null||h.tag===4)continue e;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function Js(h,A,b){var j=h.tag;if(j===5||j===6)h=h.stateNode,A?(b.nodeType===9?b.body:b.nodeName==="HTML"?b.ownerDocument.body:b).insertBefore(h,A):(A=b.nodeType===9?b.body:b.nodeName==="HTML"?b.ownerDocument.body:b,A.appendChild(h),b=b._reactRootContainer,b!=null||A.onclick!==null||(A.onclick=ce));else if(j!==4&&(j===27&&Gg(h.type)&&(b=h.stateNode,A=null),h=h.child,h!==null))for(Js(h,A,b),h=h.sibling;h!==null;)Js(h,A,b),h=h.sibling}function La(h,A,b){var j=h.tag;if(j===5||j===6)h=h.stateNode,A?b.insertBefore(h,A):b.appendChild(h);else if(j!==4&&(j===27&&Gg(h.type)&&(b=h.stateNode),h=h.child,h!==null))for(La(h,A,b),h=h.sibling;h!==null;)La(h,A,b),h=h.sibling}function nd(h){var A=h.stateNode,b=h.memoizedProps;try{for(var j=h.type,Y=A.attributes;Y.length;)A.removeAttributeNode(Y[0]);Bd(A,j,b),A[ns]=h,A[qs]=b}catch(ee){Mo(h,h.return,ee)}}var _l=!1,ko=!1,id=!1,Tc=typeof WeakSet=="function"?WeakSet:Set,Rl=null;function zg(h,A){if(h=h.containerInfo,Ck=PE,h=ec(h),wi(h)){if("selectionStart"in h)var b={start:h.selectionStart,end:h.selectionEnd};else e:{b=(b=h.ownerDocument)&&b.defaultView||window;var j=b.getSelection&&b.getSelection();if(j&&j.rangeCount!==0){b=j.anchorNode;var Y=j.anchorOffset,ee=j.focusNode;j=j.focusOffset;try{b.nodeType,ee.nodeType}catch{b=null;break e}var Te=0,tt=-1,Pt=-1,jr=0,Kr=0,rn=h,Cr=null;t:for(;;){for(var Br;rn!==b||Y!==0&&rn.nodeType!==3||(tt=Te+Y),rn!==ee||j!==0&&rn.nodeType!==3||(Pt=Te+j),rn.nodeType===3&&(Te+=rn.nodeValue.length),(Br=rn.firstChild)!==null;)Cr=rn,rn=Br;for(;;){if(rn===h)break t;if(Cr===b&&++jr===Y&&(tt=Te),Cr===ee&&++Kr===j&&(Pt=Te),(Br=rn.nextSibling)!==null)break;rn=Cr,Cr=rn.parentNode}rn=Br}b=tt===-1||Pt===-1?null:{start:tt,end:Pt}}else b=null}b=b||{start:0,end:0}}else b=null;for(Nk={focusedElem:h,selectionRange:b},PE=!1,Rl=A;Rl!==null;)if(A=Rl,h=A.child,(A.subtreeFlags&1028)!==0&&h!==null)h.return=A,Rl=h;else for(;Rl!==null;){switch(A=Rl,ee=A.alternate,h=A.flags,A.tag){case 0:if((h&4)!==0&&(h=A.updateQueue,h=h!==null?h.events:null,h!==null))for(b=0;b<h.length;b++)Y=h[b],Y.ref.impl=Y.nextImpl;break;case 11:case 15:break;case 1:if((h&1024)!==0&&ee!==null){h=void 0,b=A,Y=ee.memoizedProps,ee=ee.memoizedState,j=b.stateNode;try{var _i=Zh(b.type,Y);h=j.getSnapshotBeforeUpdate(_i,ee),j.__reactInternalSnapshotBeforeUpdate=h}catch(ds){Mo(b,b.return,ds)}}break;case 3:if((h&1024)!==0){if(h=A.stateNode.containerInfo,b=h.nodeType,b===9)Ik(h);else if(b===1)switch(h.nodeName){case"HEAD":case"HTML":case"BODY":Ik(h);break;default:h.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((h&1024)!==0)throw Error(n(163))}if(h=A.sibling,h!==null){h.return=A.return,Rl=h;break}Rl=A.return}}function xp(h,A,b){var j=b.flags;switch(b.tag){case 0:case 11:case 15:cu(h,b),j&4&&qc(5,b);break;case 1:if(cu(h,b),j&4)if(h=b.stateNode,A===null)try{h.componentDidMount()}catch(Te){Mo(b,b.return,Te)}else{var Y=Zh(b.type,A.memoizedProps);A=A.memoizedState;try{h.componentDidUpdate(Y,A,h.__reactInternalSnapshotBeforeUpdate)}catch(Te){Mo(b,b.return,Te)}}j&64&&Xc(b),j&512&&gn(b,b.return);break;case 3:if(cu(h,b),j&64&&(h=b.updateQueue,h!==null)){if(A=null,b.child!==null)switch(b.child.tag){case 27:case 5:A=b.child.stateNode;break;case 1:A=b.child.stateNode}try{Ls(h,A)}catch(Te){Mo(b,b.return,Te)}}break;case 27:A===null&&j&4&&nd(b);case 26:case 5:cu(h,b),A===null&&j&4&&ac(b),j&512&&gn(b,b.return);break;case 12:cu(h,b);break;case 31:cu(h,b),j&4&&dv(h,b);break;case 13:cu(h,b),j&4&&Ky(h,b),j&64&&(h=b.memoizedState,h!==null&&(h=h.dehydrated,h!==null&&(b=Ele.bind(null,b),zle(h,b))));break;case 22:if(j=b.memoizedState!==null||_l,!j){A=A!==null&&A.memoizedState!==null||ko,Y=_l;var ee=ko;_l=j,(ko=A)&&!ee?Jh(h,b,(b.subtreeFlags&8772)!==0):cu(h,b),_l=Y,ko=ee}break;case 30:break;default:cu(h,b)}}function gm(h){var A=h.alternate;A!==null&&(h.alternate=null,gm(A)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(A=h.stateNode,A!==null&&nu(A)),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}var qo=null,Nu=!1;function Wd(h,A,b){for(b=b.child;b!==null;)mh(h,A,b),b=b.sibling}function mh(h,A,b){if(Qt&&typeof Qt.onCommitFiberUnmount=="function")try{Qt.onCommitFiberUnmount(ar,b)}catch{}switch(b.tag){case 26:ko||_o(b,A),Wd(h,A,b),b.memoizedState?b.memoizedState.count--:b.stateNode&&(b=b.stateNode,b.parentNode.removeChild(b));break;case 27:ko||_o(b,A);var j=qo,Y=Nu;Gg(b.type)&&(qo=b.stateNode,Nu=!1),Wd(h,A,b),$1(b.stateNode),qo=j,Nu=Y;break;case 5:ko||_o(b,A);case 6:if(j=qo,Y=Nu,qo=null,Wd(h,A,b),qo=j,Nu=Y,qo!==null)if(Nu)try{(qo.nodeType===9?qo.body:qo.nodeName==="HTML"?qo.ownerDocument.body:qo).removeChild(b.stateNode)}catch(ee){Mo(b,A,ee)}else try{qo.removeChild(b.stateNode)}catch(ee){Mo(b,A,ee)}break;case 18:qo!==null&&(Nu?(h=qo,HU(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,b.stateNode),tx(h)):HU(qo,b.stateNode));break;case 4:j=qo,Y=Nu,qo=b.stateNode.containerInfo,Nu=!0,Wd(h,A,b),qo=j,Nu=Y;break;case 0:case 11:case 14:case 15:lo(2,b,A),ko||lo(4,b,A),Wd(h,A,b);break;case 1:ko||(_o(b,A),j=b.stateNode,typeof j.componentWillUnmount=="function"&&co(b,A,j)),Wd(h,A,b);break;case 21:Wd(h,A,b);break;case 22:ko=(j=ko)||b.memoizedState!==null,Wd(h,A,b),ko=j;break;default:Wd(h,A,b)}}function dv(h,A){if(A.memoizedState===null&&(h=A.alternate,h!==null&&(h=h.memoizedState,h!==null))){h=h.dehydrated;try{tx(h)}catch(b){Mo(A,A.return,b)}}}function Ky(h,A){if(A.memoizedState===null&&(h=A.alternate,h!==null&&(h=h.memoizedState,h!==null&&(h=h.dehydrated,h!==null))))try{tx(h)}catch(b){Mo(A,A.return,b)}}function Gy(h){switch(h.tag){case 31:case 13:case 19:var A=h.stateNode;return A===null&&(A=h.stateNode=new Tc),A;case 22:return h=h.stateNode,A=h._retryCache,A===null&&(A=h._retryCache=new Tc),A;default:throw Error(n(435,h.tag))}}function bp(h,A){var b=Gy(h);A.forEach(function(j){if(!b.has(j)){b.add(j);var Y=Sle.bind(null,h,j);j.then(Y,Y)}})}function Zc(h,A){var b=A.deletions;if(b!==null)for(var j=0;j<b.length;j++){var Y=b[j],ee=h,Te=A,tt=Te;e:for(;tt!==null;){switch(tt.tag){case 27:if(Gg(tt.type)){qo=tt.stateNode,Nu=!1;break e}break;case 5:qo=tt.stateNode,Nu=!1;break e;case 3:case 4:qo=tt.stateNode.containerInfo,Nu=!0;break e}tt=tt.return}if(qo===null)throw Error(n(160));mh(ee,Te,Y),qo=null,Nu=!1,ee=Y.alternate,ee!==null&&(ee.return=null),Y.return=null}if(A.subtreeFlags&13886)for(A=A.child;A!==null;)nA(A,h),A=A.sibling}var Yd=null;function nA(h,A){var b=h.alternate,j=h.flags;switch(h.tag){case 0:case 11:case 14:case 15:Zc(A,h),uo(h),j&4&&(lo(3,h,h.return),qc(3,h),lo(5,h,h.return));break;case 1:Zc(A,h),uo(h),j&512&&(ko||b===null||_o(b,b.return)),j&64&&_l&&(h=h.updateQueue,h!==null&&(j=h.callbacks,j!==null&&(b=h.shared.hiddenCallbacks,h.shared.hiddenCallbacks=b===null?j:b.concat(j))));break;case 26:var Y=Yd;if(Zc(A,h),uo(h),j&512&&(ko||b===null||_o(b,b.return)),j&4){var ee=b!==null?b.memoizedState:null;if(j=h.memoizedState,b===null)if(j===null)if(h.stateNode===null){e:{j=h.type,b=h.memoizedProps,Y=Y.ownerDocument||Y;t:switch(j){case"title":ee=Y.getElementsByTagName("title")[0],(!ee||ee[Fl]||ee[ns]||ee.namespaceURI==="http://www.w3.org/2000/svg"||ee.hasAttribute("itemprop"))&&(ee=Y.createElement(j),Y.head.insertBefore(ee,Y.querySelector("head > title"))),Bd(ee,j,b),ee[ns]=h,wa(ee),j=ee;break e;case"link":var Te=JU("link","href",Y).get(j+(b.href||""));if(Te){for(var tt=0;tt<Te.length;tt++)if(ee=Te[tt],ee.getAttribute("href")===(b.href==null||b.href===""?null:b.href)&&ee.getAttribute("rel")===(b.rel==null?null:b.rel)&&ee.getAttribute("title")===(b.title==null?null:b.title)&&ee.getAttribute("crossorigin")===(b.crossOrigin==null?null:b.crossOrigin)){Te.splice(tt,1);break t}}ee=Y.createElement(j),Bd(ee,j,b),Y.head.appendChild(ee);break;case"meta":if(Te=JU("meta","content",Y).get(j+(b.content||""))){for(tt=0;tt<Te.length;tt++)if(ee=Te[tt],ee.getAttribute("content")===(b.content==null?null:""+b.content)&&ee.getAttribute("name")===(b.name==null?null:b.name)&&ee.getAttribute("property")===(b.property==null?null:b.property)&&ee.getAttribute("http-equiv")===(b.httpEquiv==null?null:b.httpEquiv)&&ee.getAttribute("charset")===(b.charSet==null?null:b.charSet)){Te.splice(tt,1);break t}}ee=Y.createElement(j),Bd(ee,j,b),Y.head.appendChild(ee);break;default:throw Error(n(468,j))}ee[ns]=h,wa(ee),j=ee}h.stateNode=j}else e8(Y,h.type,h.stateNode);else h.stateNode=ZU(Y,j,h.memoizedProps);else ee!==j?(ee===null?b.stateNode!==null&&(b=b.stateNode,b.parentNode.removeChild(b)):ee.count--,j===null?e8(Y,h.type,h.stateNode):ZU(Y,j,h.memoizedProps)):j===null&&h.stateNode!==null&&No(h,h.memoizedProps,b.memoizedProps)}break;case 27:Zc(A,h),uo(h),j&512&&(ko||b===null||_o(b,b.return)),b!==null&&j&4&&No(h,h.memoizedProps,b.memoizedProps);break;case 5:if(Zc(A,h),uo(h),j&512&&(ko||b===null||_o(b,b.return)),h.flags&32){Y=h.stateNode;try{Vs(Y,"")}catch(_i){Mo(h,h.return,_i)}}j&4&&h.stateNode!=null&&(Y=h.memoizedProps,No(h,Y,b!==null?b.memoizedProps:Y)),j&1024&&(id=!0);break;case 6:if(Zc(A,h),uo(h),j&4){if(h.stateNode===null)throw Error(n(162));j=h.memoizedProps,b=h.stateNode;try{b.nodeValue=j}catch(_i){Mo(h,h.return,_i)}}break;case 3:if(kE=null,Y=Yd,Yd=CE(A.containerInfo),Zc(A,h),Yd=Y,uo(h),j&4&&b!==null&&b.memoizedState.isDehydrated)try{tx(A.containerInfo)}catch(_i){Mo(h,h.return,_i)}id&&(id=!1,wp(h));break;case 4:j=Yd,Yd=CE(h.stateNode.containerInfo),Zc(A,h),uo(h),Yd=j;break;case 12:Zc(A,h),uo(h);break;case 31:Zc(A,h),uo(h),j&4&&(j=h.updateQueue,j!==null&&(h.updateQueue=null,bp(h,j)));break;case 13:Zc(A,h),uo(h),h.child.flags&8192&&h.memoizedState!==null!=(b!==null&&b.memoizedState!==null)&&(hr=Gr()),j&4&&(j=h.updateQueue,j!==null&&(h.updateQueue=null,bp(h,j)));break;case 22:Y=h.memoizedState!==null;var Pt=b!==null&&b.memoizedState!==null,jr=_l,Kr=ko;if(_l=jr||Y,ko=Kr||Pt,Zc(A,h),ko=Kr,_l=jr,uo(h),j&8192)e:for(A=h.stateNode,A._visibility=Y?A._visibility&-2:A._visibility|1,Y&&(b===null||Pt||_l||ko||Of(h)),b=null,A=h;;){if(A.tag===5||A.tag===26){if(b===null){Pt=b=A;try{if(ee=Pt.stateNode,Y)Te=ee.style,typeof Te.setProperty=="function"?Te.setProperty("display","none","important"):Te.display="none";else{tt=Pt.stateNode;var rn=Pt.memoizedProps.style,Cr=rn!=null&&rn.hasOwnProperty("display")?rn.display:null;tt.style.display=Cr==null||typeof Cr=="boolean"?"":(""+Cr).trim()}}catch(_i){Mo(Pt,Pt.return,_i)}}}else if(A.tag===6){if(b===null){Pt=A;try{Pt.stateNode.nodeValue=Y?"":Pt.memoizedProps}catch(_i){Mo(Pt,Pt.return,_i)}}}else if(A.tag===18){if(b===null){Pt=A;try{var Br=Pt.stateNode;Y?QU(Br,!0):QU(Pt.stateNode,!1)}catch(_i){Mo(Pt,Pt.return,_i)}}}else if((A.tag!==22&&A.tag!==23||A.memoizedState===null||A===h)&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===h)break e;for(;A.sibling===null;){if(A.return===null||A.return===h)break e;b===A&&(b=null),A=A.return}b===A&&(b=null),A.sibling.return=A.return,A=A.sibling}j&4&&(j=h.updateQueue,j!==null&&(b=j.retryQueue,b!==null&&(j.retryQueue=null,bp(h,b))));break;case 19:Zc(A,h),uo(h),j&4&&(j=h.updateQueue,j!==null&&(h.updateQueue=null,bp(h,j)));break;case 30:break;case 21:break;default:Zc(A,h),uo(h)}}function uo(h){var A=h.flags;if(A&2){try{for(var b,j=h.return;j!==null;){if(rd(j)){b=j;break}j=j.return}if(b==null)throw Error(n(160));switch(b.tag){case 27:var Y=b.stateNode,ee=ws(h);La(h,ee,Y);break;case 5:var Te=b.stateNode;b.flags&32&&(Vs(Te,""),b.flags&=-33);var tt=ws(h);La(h,tt,Te);break;case 3:case 4:var Pt=b.stateNode.containerInfo,jr=ws(h);Js(h,jr,Pt);break;default:throw Error(n(161))}}catch(Kr){Mo(h,h.return,Kr)}h.flags&=-3}A&4096&&(h.flags&=-4097)}function wp(h){if(h.subtreeFlags&1024)for(h=h.child;h!==null;){var A=h;wp(A),A.tag===5&&A.flags&1024&&A.stateNode.reset(),h=h.sibling}}function cu(h,A){if(A.subtreeFlags&8772)for(A=A.child;A!==null;)xp(h,A.alternate,A),A=A.sibling}function Of(h){for(h=h.child;h!==null;){var A=h;switch(A.tag){case 0:case 11:case 14:case 15:lo(4,A,A.return),Of(A);break;case 1:_o(A,A.return);var b=A.stateNode;typeof b.componentWillUnmount=="function"&&co(A,A.return,b),Of(A);break;case 27:$1(A.stateNode);case 26:case 5:_o(A,A.return),Of(A);break;case 22:A.memoizedState===null&&Of(A);break;case 30:Of(A);break;default:Of(A)}h=h.sibling}}function Jh(h,A,b){for(b=b&&(A.subtreeFlags&8772)!==0,A=A.child;A!==null;){var j=A.alternate,Y=h,ee=A,Te=ee.flags;switch(ee.tag){case 0:case 11:case 15:Jh(Y,ee,b),qc(4,ee);break;case 1:if(Jh(Y,ee,b),j=ee,Y=j.stateNode,typeof Y.componentDidMount=="function")try{Y.componentDidMount()}catch(jr){Mo(j,j.return,jr)}if(j=ee,Y=j.updateQueue,Y!==null){var tt=j.stateNode;try{var Pt=Y.shared.hiddenCallbacks;if(Pt!==null)for(Y.shared.hiddenCallbacks=null,Y=0;Y<Pt.length;Y++)ia(Pt[Y],tt)}catch(jr){Mo(j,j.return,jr)}}b&&Te&64&&Xc(ee),gn(ee,ee.return);break;case 27:nd(ee);case 26:case 5:Jh(Y,ee,b),b&&j===null&&Te&4&&ac(ee),gn(ee,ee.return);break;case 12:Jh(Y,ee,b);break;case 31:Jh(Y,ee,b),b&&Te&4&&dv(Y,ee);break;case 13:Jh(Y,ee,b),b&&Te&4&&Ky(Y,ee);break;case 22:ee.memoizedState===null&&Jh(Y,ee,b),gn(ee,ee.return);break;case 30:break;default:Jh(Y,ee,b)}A=A.sibling}}function Rf(h,A){var b=null;h!==null&&h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(b=h.memoizedState.cachePool.pool),h=null,A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(h=A.memoizedState.cachePool.pool),h!==b&&(h!=null&&h.refCount++,b!=null&&Th(b))}function ef(h,A){h=null,A.alternate!==null&&(h=A.alternate.memoizedState.cache),A=A.memoizedState.cache,A!==h&&(A.refCount++,h!=null&&Th(h))}function uu(h,A,b,j){if(A.subtreeFlags&10256)for(A=A.child;A!==null;)tf(h,A,b,j),A=A.sibling}function tf(h,A,b,j){var Y=A.flags;switch(A.tag){case 0:case 11:case 15:uu(h,A,b,j),Y&2048&&qc(9,A);break;case 1:uu(h,A,b,j);break;case 3:uu(h,A,b,j),Y&2048&&(h=null,A.alternate!==null&&(h=A.alternate.memoizedState.cache),A=A.memoizedState.cache,A!==h&&(A.refCount++,h!=null&&Th(h)));break;case 12:if(Y&2048){uu(h,A,b,j),h=A.stateNode;try{var ee=A.memoizedProps,Te=ee.id,tt=ee.onPostCommit;typeof tt=="function"&&tt(Te,A.alternate===null?"mount":"update",h.passiveEffectDuration,-0)}catch(Pt){Mo(A,A.return,Pt)}}else uu(h,A,b,j);break;case 31:uu(h,A,b,j);break;case 13:uu(h,A,b,j);break;case 23:break;case 22:ee=A.stateNode,Te=A.alternate,A.memoizedState!==null?ee._visibility&2?uu(h,A,b,j):iA(h,A):ee._visibility&2?uu(h,A,b,j):(ee._visibility|=2,qd(h,A,b,j,(A.subtreeFlags&10256)!==0||!1)),Y&2048&&Rf(Te,A);break;case 24:uu(h,A,b,j),Y&2048&&ef(A.alternate,A);break;default:uu(h,A,b,j)}}function qd(h,A,b,j,Y){for(Y=Y&&((A.subtreeFlags&10256)!==0||!1),A=A.child;A!==null;){var ee=h,Te=A,tt=b,Pt=j,jr=Te.flags;switch(Te.tag){case 0:case 11:case 15:qd(ee,Te,tt,Pt,Y),qc(8,Te);break;case 23:break;case 22:var Kr=Te.stateNode;Te.memoizedState!==null?Kr._visibility&2?qd(ee,Te,tt,Pt,Y):iA(ee,Te):(Kr._visibility|=2,qd(ee,Te,tt,Pt,Y)),Y&&jr&2048&&Rf(Te.alternate,Te);break;case 24:qd(ee,Te,tt,Pt,Y),Y&&jr&2048&&ef(Te.alternate,Te);break;default:qd(ee,Te,tt,Pt,Y)}A=A.sibling}}function iA(h,A){if(A.subtreeFlags&10256)for(A=A.child;A!==null;){var b=h,j=A,Y=j.flags;switch(j.tag){case 22:iA(b,j),Y&2048&&Rf(j.alternate,j);break;case 24:iA(b,j),Y&2048&&ef(j.alternate,j);break;default:iA(b,j)}A=A.sibling}}var _p=8192;function Df(h,A,b){if(h.subtreeFlags&_p)for(h=h.child;h!==null;)vm(h,A,b),h=h.sibling}function vm(h,A,b){switch(h.tag){case 26:Df(h,A,b),h.flags&_p&&h.memoizedState!==null&&rce(b,Yd,h.memoizedState,h.memoizedProps);break;case 5:Df(h,A,b);break;case 3:case 4:var j=Yd;Yd=CE(h.stateNode.containerInfo),Df(h,A,b),Yd=j;break;case 22:h.memoizedState===null&&(j=h.alternate,j!==null&&j.memoizedState!==null?(j=_p,_p=16777216,Df(h,A,b),_p=j):Df(h,A,b));break;default:Df(h,A,b)}}function hv(h){var A=h.alternate;if(A!==null&&(h=A.child,h!==null)){A.child=null;do A=h.sibling,h.sibling=null,h=A;while(h!==null)}}function sA(h){var A=h.deletions;if((h.flags&16)!==0){if(A!==null)for(var b=0;b<A.length;b++){var j=A[b];Rl=j,Yy(j,h)}hv(h)}if(h.subtreeFlags&10256)for(h=h.child;h!==null;)Wy(h),h=h.sibling}function Wy(h){switch(h.tag){case 0:case 11:case 15:sA(h),h.flags&2048&&lo(9,h,h.return);break;case 3:sA(h);break;case 12:sA(h);break;case 22:var A=h.stateNode;h.memoizedState!==null&&A._visibility&2&&(h.return===null||h.return.tag!==13)?(A._visibility&=-3,Ep(h)):sA(h);break;default:sA(h)}}function Ep(h){var A=h.deletions;if((h.flags&16)!==0){if(A!==null)for(var b=0;b<A.length;b++){var j=A[b];Rl=j,Yy(j,h)}hv(h)}for(h=h.child;h!==null;){switch(A=h,A.tag){case 0:case 11:case 15:lo(8,A,A.return),Ep(A);break;case 22:b=A.stateNode,b._visibility&2&&(b._visibility&=-3,Ep(A));break;default:Ep(A)}h=h.sibling}}function Yy(h,A){for(;Rl!==null;){var b=Rl;switch(b.tag){case 0:case 11:case 15:lo(8,b,A);break;case 23:case 22:if(b.memoizedState!==null&&b.memoizedState.cachePool!==null){var j=b.memoizedState.cachePool.pool;j!=null&&j.refCount++}break;case 24:Th(b.memoizedState.cache)}if(j=b.child,j!==null)j.return=b,Rl=j;else e:for(b=h;Rl!==null;){j=Rl;var Y=j.sibling,ee=j.return;if(gm(j),j===b){Rl=null;break e}if(Y!==null){Y.return=ee,Rl=Y;break e}Rl=ee}}}var Sp={getCacheForType:function(h){var A=xo(Po),b=A.data.get(h);return b===void 0&&(b=h(),A.data.set(h,b)),b},cacheSignal:function(){return xo(Po).controller.signal}},fv=typeof WeakMap=="function"?WeakMap:Map,ya=0,Aa=null,js=null,Ps=0,Ia=0,ku=null,rf=!1,aA=!1,F=!1,B=0,z=0,H=0,ge=0,Ne=0,ze=0,At=0,pt=null,Ut=null,Zt=!1,hr=0,$r=0,Kn=1/0,xn=null,Dn=null,Bi=0,di=null,oi=null,ea=0,Ks=0,us=null,qn=null,da=0,xa=null;function Mi(){return(ya&2)!==0&&Ps!==0?Ps&-Ps:ne.T!==null?bk():Fs()}function oc(){if(ze===0)if((Ps&536870912)===0||kn){var h=ln;ln<<=1,(ln&3932160)===0&&(ln=262144),ze=h}else ze=536870912;return h=xl.current,h!==null&&(h.flags|=32),ze}function Do(h,A,b){(h===Aa&&(Ia===2||Ia===9)||h.cancelPendingCommit!==null)&&(Bh(h,0),Id(h,Ps,ze,!1)),Ns(h,b),((ya&2)===0||h!==Aa)&&(h===Aa&&((ya&2)===0&&(ge|=b),z===4&&Id(h,Ps,ze,!1)),cA(h))}function Xd(h,A,b){if((ya&6)!==0)throw Error(n(327));var j=!b&&(A&127)===0&&(A&h.expiredLanes)===0||Mn(h,A),Y=j?Vg(h,A):xm(h,A,!0),ee=j;do{if(Y===0){aA&&!j&&Id(h,A,0,!1);break}else{if(b=h.current.alternate,ee&&!Lu(b)){Y=xm(h,A,!1),ee=!1;continue}if(Y===2){if(ee=A,h.errorRecoveryDisabledLanes&ee)var Te=0;else Te=h.pendingLanes&-536870913,Te=Te!==0?Te:Te&536870912?536870912:0;if(Te!==0){A=Te;e:{var tt=h;Y=pt;var Pt=tt.current.memoizedState.isDehydrated;if(Pt&&(Bh(tt,Te).flags|=256),Te=xm(tt,Te,!1),Te!==2){if(F&&!Pt){tt.errorRecoveryDisabledLanes|=ee,ge|=ee,Y=4;break e}ee=Ut,Ut=Y,ee!==null&&(Ut===null?Ut=ee:Ut.push.apply(Ut,ee))}Y=Te}if(ee=!1,Y!==2)continue}}if(Y===1){Bh(h,0),Id(h,A,0,!0);break}e:{switch(j=h,ee=Y,ee){case 0:case 1:throw Error(n(345));case 4:if((A&4194048)!==A)break;case 6:Id(j,A,ze,!rf);break e;case 2:Ut=null;break;case 3:case 5:break;default:throw Error(n(329))}if((A&62914560)===A&&(Y=hr+300-Gr(),10<Y)){if(Id(j,A,ze,!rf),mn(j,0,!0)!==0)break e;ea=A,j.timeoutHandle=UU(Eo.bind(null,j,b,Ut,xn,Zt,A,ze,ge,At,rf,ee,"Throttled",-0,0),Y);break e}Eo(j,b,Ut,xn,Zt,A,ze,ge,At,rf,ee,null,-0,0)}}break}while(!0);cA(h)}function Eo(h,A,b,j,Y,ee,Te,tt,Pt,jr,Kr,rn,Cr,Br){if(h.timeoutHandle=-1,rn=A.subtreeFlags,rn&8192||(rn&16785408)===16785408){rn={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ce},vm(A,ee,rn);var _i=(ee&62914560)===ee?hr-Gr():(ee&4194048)===ee?$r-Gr():0;if(_i=nce(rn,_i),_i!==null){ea=ee,h.cancelPendingCommit=_i(vU.bind(null,h,A,ee,b,j,Y,Te,tt,Pt,Kr,rn,null,Cr,Br)),Id(h,ee,Te,!jr);return}}vU(h,A,ee,b,j,Y,Te,tt,Pt)}function Lu(h){for(var A=h;;){var b=A.tag;if((b===0||b===11||b===15)&&A.flags&16384&&(b=A.updateQueue,b!==null&&(b=b.stores,b!==null)))for(var j=0;j<b.length;j++){var Y=b[j],ee=Y.getSnapshot;Y=Y.value;try{if(!_n(ee(),Y))return!1}catch{return!1}}if(b=A.child,A.subtreeFlags&16384&&b!==null)b.return=A,A=b;else{if(A===h)break;for(;A.sibling===null;){if(A.return===null||A.return===h)return!0;A=A.return}A.sibling.return=A.return,A=A.sibling}}return!0}function Id(h,A,b,j){A&=~Ne,A&=~ge,h.suspendedLanes|=A,h.pingedLanes&=~A,j&&(h.warmLanes|=A),j=h.expirationTimes;for(var Y=A;0<Y;){var ee=31-Yr(Y),Te=1<<ee;j[ee]=-1,Y&=~Te}b!==0&&un(h,b,A)}function Iu(){return(ya&6)===0?(M1(0),!1):!0}function sd(){if(js!==null){if(Ia===0)var h=js.return;else h=js,Tu=ql=null,ap(h),yr=null,Kt=0,h=js;for(;h!==null;)jc(h.alternate,h),h=h.return;js=null}}function Bh(h,A){var b=h.timeoutHandle;b!==-1&&(h.timeoutHandle=-1,Fle(b)),b=h.cancelPendingCommit,b!==null&&(h.cancelPendingCommit=null,b()),ea=0,sd(),Aa=h,js=b=vc(h.current,null),Ps=A,Ia=0,ku=null,rf=!1,aA=Mn(h,A),F=!1,At=ze=Ne=ge=H=z=0,Ut=pt=null,Zt=!1,(A&8)!==0&&(A|=A&32);var j=h.entangledLanes;if(j!==0)for(h=h.entanglements,j&=A;0<j;){var Y=31-Yr(j),ee=1<<Y;A|=h[Y],j&=~ee}return B=A,iu(),b}function nf(h,A){Ji=null,ne.H=pp,A===Fa||A===ka?(A=Et(),Ia=3):A===Oo?(A=Et(),Ia=4):Ia=A===We?8:A!==null&&typeof A=="object"&&typeof A.then=="function"?6:1,ku=A,js===null&&(z=1,rA(h,S(A,h.current)))}function ym(){var h=xl.current;return h===null?!0:(Ps&4194048)===Ps?ic===null:(Ps&62914560)===Ps||(Ps&536870912)!==0?h===ic:!1}function oA(){var h=ne.H;return ne.H=pp,h===null?pp:h}function lA(){var h=ne.A;return ne.A=Sp,h}function Ph(){z=4,rf||(Ps&4194048)!==Ps&&xl.current!==null||(aA=!0),(H&134217727)===0&&(ge&134217727)===0||Aa===null||Id(Aa,Ps,ze,!1)}function xm(h,A,b){var j=ya;ya|=2;var Y=oA(),ee=lA();(Aa!==h||Ps!==A)&&(xn=null,Bh(h,A)),A=!1;var Te=z;e:do try{if(Ia!==0&&js!==null){var tt=js,Pt=ku;switch(Ia){case 8:sd(),Te=6;break e;case 3:case 2:case 9:case 6:xl.current===null&&(A=!0);var jr=Ia;if(Ia=0,ku=null,qy(h,tt,Pt,jr),b&&aA){Te=0;break e}break;default:jr=Ia,Ia=0,ku=null,qy(h,tt,Pt,jr)}}bm(),Te=z;break}catch(Kr){nf(h,Kr)}while(!0);return A&&h.shellSuspendCounter++,Tu=ql=null,ya=j,ne.H=Y,ne.A=ee,js===null&&(Aa=null,Ps=0,iu()),Te}function bm(){for(;js!==null;)AU(js)}function Vg(h,A){var b=ya;ya|=2;var j=oA(),Y=lA();Aa!==h||Ps!==A?(xn=null,Kn=Gr()+500,Bh(h,A)):aA=Mn(h,A);e:do try{if(Ia!==0&&js!==null){A=js;var ee=ku;t:switch(Ia){case 1:Ia=0,ku=null,qy(h,A,ee,1);break;case 2:case 9:if(O(ee)){Ia=0,ku=null,pU(A);break}A=function(){Ia!==2&&Ia!==9||Aa!==h||(Ia=7),cA(h)},ee.then(A,A);break e;case 3:Ia=7;break e;case 4:Ia=5;break e;case 7:O(ee)?(Ia=0,ku=null,pU(A)):(Ia=0,ku=null,qy(h,A,ee,7));break;case 5:var Te=null;switch(js.tag){case 26:Te=js.memoizedState;case 5:case 27:var tt=js;if(Te?t8(Te):tt.stateNode.complete){Ia=0,ku=null;var Pt=tt.sibling;if(Pt!==null)js=Pt;else{var jr=tt.return;jr!==null?(js=jr,bE(jr)):js=null}break t}}Ia=0,ku=null,qy(h,A,ee,5);break;case 6:Ia=0,ku=null,qy(h,A,ee,6);break;case 8:sd(),z=6;break e;default:throw Error(n(462))}}mv();break}catch(Kr){nf(h,Kr)}while(!0);return Tu=ql=null,ne.H=j,ne.A=Y,ya=b,js!==null?0:(Aa=null,Ps=0,iu(),z)}function mv(){for(;js!==null&&!Pr();)AU(js)}function AU(h){var A=Ec(h.alternate,h,B);h.memoizedProps=h.pendingProps,A===null?bE(h):js=A}function pU(h){var A=h,b=A.alternate;switch(A.tag){case 15:case 0:A=dn(b,A,A.pendingProps,A.type,void 0,Ps);break;case 11:A=dn(b,A,A.pendingProps,A.type.render,A.ref,Ps);break;case 5:ap(A);default:jc(b,A),A=js=Qc(A,B),A=Ec(b,A,B)}h.memoizedProps=h.pendingProps,A===null?bE(h):js=A}function qy(h,A,b,j){Tu=ql=null,ap(A),yr=null,Kt=0;var Y=A.return;try{if($e(h,Y,A,b,Ps)){z=1,rA(h,S(b,h.current)),js=null;return}}catch(ee){if(Y!==null)throw js=Y,ee;z=1,rA(h,S(b,h.current)),js=null;return}A.flags&32768?(kn||j===1?h=!0:aA||(Ps&536870912)!==0?h=!1:(rf=h=!0,(j===2||j===9||j===3||j===6)&&(j=xl.current,j!==null&&j.tag===13&&(j.flags|=16384))),gU(A,h)):bE(A)}function bE(h){var A=h;do{if((A.flags&32768)!==0){gU(A,rf);return}h=A.return;var b=wl(A.alternate,A,B);if(b!==null){js=b;return}if(A=A.sibling,A!==null){js=A;return}js=A=h}while(A!==null);z===0&&(z=5)}function gU(h,A){do{var b=to(h.alternate,h);if(b!==null){b.flags&=32767,js=b;return}if(b=h.return,b!==null&&(b.flags|=32768,b.subtreeFlags=0,b.deletions=null),!A&&(h=h.sibling,h!==null)){js=h;return}js=h=b}while(h!==null);z=6,js=null}function vU(h,A,b,j,Y,ee,Te,tt,Pt){h.cancelPendingCommit=null;do wE();while(Bi!==0);if((ya&6)!==0)throw Error(n(327));if(A!==null){if(A===h.current)throw Error(n(177));if(ee=A.lanes|A.childLanes,ee|=vl,ei(h,b,ee,Te,tt,Pt),h===Aa&&(js=Aa=null,Ps=0),oi=A,di=h,ea=b,Ks=ee,us=Y,qn=j,(A.subtreeFlags&10256)!==0||(A.flags&10256)!==0?(h.callbackNode=null,h.callbackPriority=0,jle(wn,function(){return _U(),null})):(h.callbackNode=null,h.callbackPriority=0),j=(A.flags&13878)!==0,(A.subtreeFlags&13878)!==0||j){j=ne.T,ne.T=null,Y=ae.p,ae.p=2,Te=ya,ya|=4;try{zg(h,A,b)}finally{ya=Te,ae.p=Y,ne.T=j}}Bi=1,yU(),xU(),bU()}}function yU(){if(Bi===1){Bi=0;var h=di,A=oi,b=(A.flags&13878)!==0;if((A.subtreeFlags&13878)!==0||b){b=ne.T,ne.T=null;var j=ae.p;ae.p=2;var Y=ya;ya|=4;try{nA(A,h);var ee=Nk,Te=ec(h.containerInfo),tt=ee.focusedElem,Pt=ee.selectionRange;if(Te!==tt&&tt&&tt.ownerDocument&&Ko(tt.ownerDocument.documentElement,tt)){if(Pt!==null&&wi(tt)){var jr=Pt.start,Kr=Pt.end;if(Kr===void 0&&(Kr=jr),"selectionStart"in tt)tt.selectionStart=jr,tt.selectionEnd=Math.min(Kr,tt.value.length);else{var rn=tt.ownerDocument||document,Cr=rn&&rn.defaultView||window;if(Cr.getSelection){var Br=Cr.getSelection(),_i=tt.textContent.length,ds=Math.min(Pt.start,_i),Zo=Pt.end===void 0?ds:Math.min(Pt.end,_i);!Br.extend&&ds>Zo&&(Te=Zo,Zo=ds,ds=Te);var cr=so(tt,ds),zt=so(tt,Zo);if(cr&&zt&&(Br.rangeCount!==1||Br.anchorNode!==cr.node||Br.anchorOffset!==cr.offset||Br.focusNode!==zt.node||Br.focusOffset!==zt.offset)){var Sr=rn.createRange();Sr.setStart(cr.node,cr.offset),Br.removeAllRanges(),ds>Zo?(Br.addRange(Sr),Br.extend(zt.node,zt.offset)):(Sr.setEnd(zt.node,zt.offset),Br.addRange(Sr))}}}}for(rn=[],Br=tt;Br=Br.parentNode;)Br.nodeType===1&&rn.push({element:Br,left:Br.scrollLeft,top:Br.scrollTop});for(typeof tt.focus=="function"&&tt.focus(),tt=0;tt<rn.length;tt++){var Jr=rn[tt];Jr.element.scrollLeft=Jr.left,Jr.element.scrollTop=Jr.top}}PE=!!Ck,Nk=Ck=null}finally{ya=Y,ae.p=j,ne.T=b}}h.current=A,Bi=2}}function xU(){if(Bi===2){Bi=0;var h=di,A=oi,b=(A.flags&8772)!==0;if((A.subtreeFlags&8772)!==0||b){b=ne.T,ne.T=null;var j=ae.p;ae.p=2;var Y=ya;ya|=4;try{xp(h,A.alternate,A)}finally{ya=Y,ae.p=j,ne.T=b}}Bi=3}}function bU(){if(Bi===4||Bi===3){Bi=0,tn();var h=di,A=oi,b=ea,j=qn;(A.subtreeFlags&10256)!==0||(A.flags&10256)!==0?Bi=5:(Bi=0,oi=di=null,wU(h,h.pendingLanes));var Y=h.pendingLanes;if(Y===0&&(Dn=null),Nn(b),A=A.stateNode,Qt&&typeof Qt.onCommitFiberRoot=="function")try{Qt.onCommitFiberRoot(ar,A,void 0,(A.current.flags&128)===128)}catch{}if(j!==null){A=ne.T,Y=ae.p,ae.p=2,ne.T=null;try{for(var ee=h.onRecoverableError,Te=0;Te<j.length;Te++){var tt=j[Te];ee(tt.value,{componentStack:tt.stack})}}finally{ne.T=A,ae.p=Y}}(ea&3)!==0&&wE(),cA(h),Y=h.pendingLanes,(b&261930)!==0&&(Y&42)!==0?h===xa?da++:(da=0,xa=h):da=0,M1(0)}}function wU(h,A){(h.pooledCacheLanes&=A)===0&&(A=h.pooledCache,A!=null&&(h.pooledCache=null,Th(A)))}function wE(){return yU(),xU(),bU(),_U()}function _U(){if(Bi!==5)return!1;var h=di,A=Ks;Ks=0;var b=Nn(ea),j=ne.T,Y=ae.p;try{ae.p=32>b?32:b,ne.T=null,b=us,us=null;var ee=di,Te=ea;if(Bi=0,oi=di=null,ea=0,(ya&6)!==0)throw Error(n(331));var tt=ya;if(ya|=4,Wy(ee.current),tf(ee,ee.current,Te,b),ya=tt,M1(0,!1),Qt&&typeof Qt.onPostCommitFiberRoot=="function")try{Qt.onPostCommitFiberRoot(ar,ee)}catch{}return!0}finally{ae.p=Y,ne.T=j,wU(h,A)}}function EU(h,A,b){A=S(b,A),A=X(h.stateNode,A,2),h=zi(h,A,2),h!==null&&(Ns(h,2),cA(h))}function Mo(h,A,b){if(h.tag===3)EU(h,h,b);else for(;A!==null;){if(A.tag===3){EU(A,h,b);break}else if(A.tag===1){var j=A.stateNode;if(typeof A.type.getDerivedStateFromError=="function"||typeof j.componentDidCatch=="function"&&(Dn===null||!Dn.has(j))){h=S(b,h),b=pe(2),j=zi(A,b,2),j!==null&&(Ee(b,j,A,h),Ns(j,2),cA(j));break}}A=A.return}}function vk(h,A,b){var j=h.pingCache;if(j===null){j=h.pingCache=new fv;var Y=new Set;j.set(A,Y)}else Y=j.get(A),Y===void 0&&(Y=new Set,j.set(A,Y));Y.has(b)||(F=!0,Y.add(b),h=_le.bind(null,h,A,b),A.then(h,h))}function _le(h,A,b){var j=h.pingCache;j!==null&&j.delete(A),h.pingedLanes|=h.suspendedLanes&b,h.warmLanes&=~b,Aa===h&&(Ps&b)===b&&(z===4||z===3&&(Ps&62914560)===Ps&&300>Gr()-hr?(ya&2)===0&&Bh(h,0):Ne|=b,At===Ps&&(At=0)),cA(h)}function SU(h,A){A===0&&(A=Cs()),h=rc(h,A),h!==null&&(Ns(h,A),cA(h))}function Ele(h){var A=h.memoizedState,b=0;A!==null&&(b=A.retryLane),SU(h,b)}function Sle(h,A){var b=0;switch(h.tag){case 31:case 13:var j=h.stateNode,Y=h.memoizedState;Y!==null&&(b=Y.retryLane);break;case 19:j=h.stateNode;break;case 22:j=h.stateNode._retryCache;break;default:throw Error(n(314))}j!==null&&j.delete(A),SU(h,b)}function jle(h,A){return tr(h,A)}var _E=null,Xy=null,yk=!1,EE=!1,xk=!1,Kg=0;function cA(h){h!==Xy&&h.next===null&&(Xy===null?_E=Xy=h:Xy=Xy.next=h),EE=!0,yk||(yk=!0,Cle())}function M1(h,A){if(!xk&&EE){xk=!0;do for(var b=!1,j=_E;j!==null;){if(h!==0){var Y=j.pendingLanes;if(Y===0)var ee=0;else{var Te=j.suspendedLanes,tt=j.pingedLanes;ee=(1<<31-Yr(42|h)+1)-1,ee&=Y&~(Te&~tt),ee=ee&201326741?ee&201326741|1:ee?ee|2:0}ee!==0&&(b=!0,NU(j,ee))}else ee=Ps,ee=mn(j,j===Aa?ee:0,j.cancelPendingCommit!==null||j.timeoutHandle!==-1),(ee&3)===0||Mn(j,ee)||(b=!0,NU(j,ee));j=j.next}while(b);xk=!1}}function Tle(){jU()}function jU(){EE=yk=!1;var h=0;Kg!==0&&Mle()&&(h=Kg);for(var A=Gr(),b=null,j=_E;j!==null;){var Y=j.next,ee=TU(j,A);ee===0?(j.next=null,b===null?_E=Y:b.next=Y,Y===null&&(Xy=b)):(b=j,(h!==0||(ee&3)!==0)&&(EE=!0)),j=Y}Bi!==0&&Bi!==5||M1(h),Kg!==0&&(Kg=0)}function TU(h,A){for(var b=h.suspendedLanes,j=h.pingedLanes,Y=h.expirationTimes,ee=h.pendingLanes&-62914561;0<ee;){var Te=31-Yr(ee),tt=1<<Te,Pt=Y[Te];Pt===-1?((tt&b)===0||(tt&j)!==0)&&(Y[Te]=li(tt,A)):Pt<=A&&(h.expiredLanes|=tt),ee&=~tt}if(A=Aa,b=Ps,b=mn(h,h===A?b:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),j=h.callbackNode,b===0||h===A&&(Ia===2||Ia===9)||h.cancelPendingCommit!==null)return j!==null&&j!==null&&lr(j),h.callbackNode=null,h.callbackPriority=0;if((b&3)===0||Mn(h,b)){if(A=b&-b,A===h.callbackPriority)return A;switch(j!==null&&lr(j),Nn(b)){case 2:case 8:b=Pn;break;case 32:b=wn;break;case 268435456:b=ot;break;default:b=wn}return j=CU.bind(null,h),b=tr(b,j),h.callbackPriority=A,h.callbackNode=b,A}return j!==null&&j!==null&&lr(j),h.callbackPriority=2,h.callbackNode=null,2}function CU(h,A){if(Bi!==0&&Bi!==5)return h.callbackNode=null,h.callbackPriority=0,null;var b=h.callbackNode;if(wE()&&h.callbackNode!==b)return null;var j=Ps;return j=mn(h,h===Aa?j:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),j===0?null:(Xd(h,j,A),TU(h,Gr()),h.callbackNode!=null&&h.callbackNode===b?CU.bind(null,h):null)}function NU(h,A){if(wE())return null;Xd(h,A,!0)}function Cle(){Ule(function(){(ya&6)!==0?tr(Qr,Tle):jU()})}function bk(){if(Kg===0){var h=wt;h===0&&(h=Jn,Jn<<=1,(Jn&261888)===0&&(Jn=256)),Kg=h}return Kg}function kU(h){return h==null||typeof h=="symbol"||typeof h=="boolean"?null:typeof h=="function"?h:se(""+h)}function LU(h,A){var b=A.ownerDocument.createElement("input");return b.name=A.name,b.value=A.value,h.id&&b.setAttribute("form",h.id),A.parentNode.insertBefore(b,A),h=new FormData(h),b.parentNode.removeChild(b),h}function Nle(h,A,b,j,Y){if(A==="submit"&&b&&b.stateNode===Y){var ee=kU((Y[qs]||null).action),Te=j.submitter;Te&&(A=(A=Te[qs]||null)?kU(A.formAction):Te.getAttribute("formAction"),A!==null&&(ee=A,Te=null));var tt=new je("action","action",null,j,Y);h.push({event:tt,listeners:[{instance:null,listener:function(){if(j.defaultPrevented){if(Kg!==0){var Pt=Te?LU(Y,Te):new FormData(Y);Ap(b,{pending:!0,data:Pt,method:Y.method,action:ee},null,Pt)}}else typeof ee=="function"&&(tt.preventDefault(),Pt=Te?LU(Y,Te):new FormData(Y),Ap(b,{pending:!0,data:Pt,method:Y.method,action:ee},ee,Pt))},currentTarget:Y}]})}}for(var wk=0;wk<Kl.length;wk++){var _k=Kl[wk],kle=_k.toLowerCase(),Lle=_k[0].toUpperCase()+_k.slice(1);Gl(kle,"on"+Lle)}Gl(Ql,"onAnimationEnd"),Gl(zl,"onAnimationIteration"),Gl(Il,"onAnimationStart"),Gl("dblclick","onDoubleClick"),Gl("focusin","onFocus"),Gl("focusout","onBlur"),Gl(bd,"onTransitionRun"),Gl(tc,"onTransitionStart"),Gl(Vl,"onTransitionCancel"),Gl(pc,"onTransitionEnd"),no("onMouseEnter",["mouseout","mouseover"]),no("onMouseLeave",["mouseout","mouseover"]),no("onPointerEnter",["pointerout","pointerover"]),no("onPointerLeave",["pointerout","pointerover"]),go("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),go("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),go("onBeforeInput",["compositionend","keypress","textInput","paste"]),go("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),go("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),go("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var F1="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ile=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(F1));function IU(h,A){A=(A&4)!==0;for(var b=0;b<h.length;b++){var j=h[b],Y=j.event;j=j.listeners;e:{var ee=void 0;if(A)for(var Te=j.length-1;0<=Te;Te--){var tt=j[Te],Pt=tt.instance,jr=tt.currentTarget;if(tt=tt.listener,Pt!==ee&&Y.isPropagationStopped())break e;ee=tt,Y.currentTarget=jr;try{ee(Y)}catch(Kr){Eu(Kr)}Y.currentTarget=null,ee=Pt}else for(Te=0;Te<j.length;Te++){if(tt=j[Te],Pt=tt.instance,jr=tt.currentTarget,tt=tt.listener,Pt!==ee&&Y.isPropagationStopped())break e;ee=tt,Y.currentTarget=jr;try{ee(Y)}catch(Kr){Eu(Kr)}Y.currentTarget=null,ee=Pt}}}}function Sa(h,A){var b=A[za];b===void 0&&(b=A[za]=new Set);var j=h+"__bubble";b.has(j)||(BU(A,h,2,!1),b.add(j))}function Ek(h,A,b){var j=0;A&&(j|=4),BU(b,h,j,A)}var SE="_reactListening"+Math.random().toString(36).slice(2);function Sk(h){if(!h[SE]){h[SE]=!0,$s.forEach(function(b){b!=="selectionchange"&&(Ile.has(b)||Ek(b,!1,h),Ek(b,!0,h))});var A=h.nodeType===9?h:h.ownerDocument;A===null||A[SE]||(A[SE]=!0,Ek("selectionchange",!1,A))}}function BU(h,A,b,j){switch(l8(A)){case 2:var Y=ace;break;case 8:Y=oce;break;default:Y=Uk}b=Y.bind(null,A,b,h),Y=void 0,!M||A!=="touchstart"&&A!=="touchmove"&&A!=="wheel"||(Y=!0),j?Y!==void 0?h.addEventListener(A,b,{capture:!0,passive:Y}):h.addEventListener(A,b,!0):Y!==void 0?h.addEventListener(A,b,{passive:Y}):h.addEventListener(A,b,!1)}function jk(h,A,b,j,Y){var ee=j;if((A&1)===0&&(A&2)===0&&j!==null)e:for(;;){if(j===null)return;var Te=j.tag;if(Te===3||Te===4){var tt=j.stateNode.containerInfo;if(tt===Y)break;if(Te===4)for(Te=j.return;Te!==null;){var Pt=Te.tag;if((Pt===3||Pt===4)&&Te.stateNode.containerInfo===Y)return;Te=Te.return}for(;tt!==null;){if(Te=pl(tt),Te===null)return;if(Pt=Te.tag,Pt===5||Pt===6||Pt===26||Pt===27){j=ee=Te;continue e}tt=tt.parentNode}}j=j.return}ht(function(){var jr=ee,Kr=K(b),rn=[];e:{var Cr=wd.get(h);if(Cr!==void 0){var Br=je,_i=h;switch(h){case"keypress":if(Ae(b)===0)break e;case"keydown":case"keyup":Br=on;break;case"focusin":_i="focus",Br=or;break;case"focusout":_i="blur",Br=or;break;case"beforeblur":case"afterblur":Br=or;break;case"click":if(b.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Br=It;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Br=Vt;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Br=Wt;break;case Ql:case zl:case Il:Br=_r;break;case pc:Br=fr;break;case"scroll":case"scrollend":Br=ct;break;case"wheel":Br=Nr;break;case"copy":case"cut":case"paste":Br=vt;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Br=Tt;break;case"toggle":case"beforetoggle":Br=An}var ds=(A&4)!==0,Zo=!ds&&(h==="scroll"||h==="scrollend"),cr=ds?Cr!==null?Cr+"Capture":null:Cr;ds=[];for(var zt=jr,Sr;zt!==null;){var Jr=zt;if(Sr=Jr.stateNode,Jr=Jr.tag,Jr!==5&&Jr!==26&&Jr!==27||Sr===null||cr===null||(Jr=P(zt,cr),Jr!=null&&ds.push(U1(zt,Jr,Sr))),Zo)break;zt=zt.return}0<ds.length&&(Cr=new Br(Cr,_i,null,b,Kr),rn.push({event:Cr,listeners:ds}))}}if((A&7)===0){e:{if(Cr=h==="mouseover"||h==="pointerover",Br=h==="mouseout"||h==="pointerout",Cr&&b!==$&&(_i=b.relatedTarget||b.fromElement)&&(pl(_i)||_i[Rs]))break e;if((Br||Cr)&&(Cr=Kr.window===Kr?Kr:(Cr=Kr.ownerDocument)?Cr.defaultView||Cr.parentWindow:window,Br?(_i=b.relatedTarget||b.toElement,Br=jr,_i=_i?pl(_i):null,_i!==null&&(Zo=a(_i),ds=_i.tag,_i!==Zo||ds!==5&&ds!==27&&ds!==6)&&(_i=null)):(Br=null,_i=jr),Br!==_i)){if(ds=It,Jr="onMouseLeave",cr="onMouseEnter",zt="mouse",(h==="pointerout"||h==="pointerover")&&(ds=Tt,Jr="onPointerLeave",cr="onPointerEnter",zt="pointer"),Zo=Br==null?Cr:qa(Br),Sr=_i==null?Cr:qa(_i),Cr=new ds(Jr,zt+"leave",Br,b,Kr),Cr.target=Zo,Cr.relatedTarget=Sr,Jr=null,pl(Kr)===jr&&(ds=new ds(cr,zt+"enter",_i,b,Kr),ds.target=Sr,ds.relatedTarget=Zo,Jr=ds),Zo=Jr,Br&&_i)t:{for(ds=Ble,cr=Br,zt=_i,Sr=0,Jr=cr;Jr;Jr=ds(Jr))Sr++;Jr=0;for(var Xi=zt;Xi;Xi=ds(Xi))Jr++;for(;0<Sr-Jr;)cr=ds(cr),Sr--;for(;0<Jr-Sr;)zt=ds(zt),Jr--;for(;Sr--;){if(cr===zt||zt!==null&&cr===zt.alternate){ds=cr;break t}cr=ds(cr),zt=ds(zt)}ds=null}else ds=null;Br!==null&&PU(rn,Cr,Br,ds,!1),_i!==null&&Zo!==null&&PU(rn,Zo,_i,ds,!0)}}e:{if(Cr=jr?qa(jr):window,Br=Cr.nodeName&&Cr.nodeName.toLowerCase(),Br==="select"||Br==="input"&&Cr.type==="file")var ho=Yn;else if(Di(Cr))if(Gi)ho=ha;else{ho=Qi;var Pi=Ys}else Br=Cr.nodeName,!Br||Br.toLowerCase()!=="input"||Cr.type!=="checkbox"&&Cr.type!=="radio"?jr&&Vo(jr.elementType)&&(ho=Yn):ho=ai;if(ho&&(ho=ho(h,jr))){Wn(rn,ho,b,Kr);break e}Pi&&Pi(h,Cr,jr),h==="focusout"&&jr&&Cr.type==="number"&&jr.memoizedProps.value!=null&&Xs(Cr,"number",Cr.value)}switch(Pi=jr?qa(jr):window,h){case"focusin":(Di(Pi)||Pi.contentEditable==="true")&&(Za=Pi,$l=jr,Hl=null);break;case"focusout":Hl=$l=Za=null;break;case"mousedown":fa=!0;break;case"contextmenu":case"mouseup":case"dragend":fa=!1,yo(rn,b,Kr);break;case"selectionchange":if(Da)break;case"keydown":case"keyup":yo(rn,b,Kr)}var oa;if(Fn)e:{switch(h){case"compositionstart":var Ba="onCompositionStart";break e;case"compositionend":Ba="onCompositionEnd";break e;case"compositionupdate":Ba="onCompositionUpdate";break e}Ba=void 0}else $n?cn(h,b)&&(Ba="onCompositionEnd"):h==="keydown"&&b.keyCode===229&&(Ba="onCompositionStart");Ba&&(Tn&&b.locale!=="ko"&&($n||Ba!=="onCompositionStart"?Ba==="onCompositionEnd"&&$n&&(oa=fe()):(Z=Kr,re="value"in Z?Z.value:Z.textContent,$n=!0)),Pi=jE(jr,Ba),0<Pi.length&&(Ba=new Dt(Ba,h,null,b,Kr),rn.push({event:Ba,listeners:Pi}),oa?Ba.data=oa:(oa=Ni(b),oa!==null&&(Ba.data=oa)))),(oa=yt?zn(h,b):Qn(h,b))&&(Ba=jE(jr,"onBeforeInput"),0<Ba.length&&(Pi=new Dt("onBeforeInput","beforeinput",null,b,Kr),rn.push({event:Pi,listeners:Ba}),Pi.data=oa)),Nle(rn,h,jr,b,Kr)}IU(rn,A)})}function U1(h,A,b){return{instance:h,listener:A,currentTarget:b}}function jE(h,A){for(var b=A+"Capture",j=[];h!==null;){var Y=h,ee=Y.stateNode;if(Y=Y.tag,Y!==5&&Y!==26&&Y!==27||ee===null||(Y=P(h,b),Y!=null&&j.unshift(U1(h,Y,ee)),Y=P(h,A),Y!=null&&j.push(U1(h,Y,ee))),h.tag===3)return j;h=h.return}return[]}function Ble(h){if(h===null)return null;do h=h.return;while(h&&h.tag!==5&&h.tag!==27);return h||null}function PU(h,A,b,j,Y){for(var ee=A._reactName,Te=[];b!==null&&b!==j;){var tt=b,Pt=tt.alternate,jr=tt.stateNode;if(tt=tt.tag,Pt!==null&&Pt===j)break;tt!==5&&tt!==26&&tt!==27||jr===null||(Pt=jr,Y?(jr=P(b,ee),jr!=null&&Te.unshift(U1(b,jr,Pt))):Y||(jr=P(b,ee),jr!=null&&Te.push(U1(b,jr,Pt)))),b=b.return}Te.length!==0&&h.push({event:A,listeners:Te})}var Ple=/\r\n?/g,Ole=/\u0000|\uFFFD/g;function OU(h){return(typeof h=="string"?h:""+h).replace(Ple,`
`).replace(Ole,"")}function RU(h,A){return A=OU(A),OU(h)===A}function Xo(h,A,b,j,Y,ee){switch(b){case"children":typeof j=="string"?A==="body"||A==="textarea"&&j===""||Vs(h,j):(typeof j=="number"||typeof j=="bigint")&&A!=="body"&&Vs(h,""+j);break;case"className":ks(h,"class",j);break;case"tabIndex":ks(h,"tabindex",j);break;case"dir":case"role":case"viewBox":case"width":case"height":ks(h,b,j);break;case"style":io(h,j,ee);break;case"data":if(A!=="object"){ks(h,"data",j);break}case"src":case"href":if(j===""&&(A!=="a"||b!=="href")){h.removeAttribute(b);break}if(j==null||typeof j=="function"||typeof j=="symbol"||typeof j=="boolean"){h.removeAttribute(b);break}j=se(""+j),h.setAttribute(b,j);break;case"action":case"formAction":if(typeof j=="function"){h.setAttribute(b,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof ee=="function"&&(b==="formAction"?(A!=="input"&&Xo(h,A,"name",Y.name,Y,null),Xo(h,A,"formEncType",Y.formEncType,Y,null),Xo(h,A,"formMethod",Y.formMethod,Y,null),Xo(h,A,"formTarget",Y.formTarget,Y,null)):(Xo(h,A,"encType",Y.encType,Y,null),Xo(h,A,"method",Y.method,Y,null),Xo(h,A,"target",Y.target,Y,null)));if(j==null||typeof j=="symbol"||typeof j=="boolean"){h.removeAttribute(b);break}j=se(""+j),h.setAttribute(b,j);break;case"onClick":j!=null&&(h.onclick=ce);break;case"onScroll":j!=null&&Sa("scroll",h);break;case"onScrollEnd":j!=null&&Sa("scrollend",h);break;case"dangerouslySetInnerHTML":if(j!=null){if(typeof j!="object"||!("__html"in j))throw Error(n(61));if(b=j.__html,b!=null){if(Y.children!=null)throw Error(n(60));h.innerHTML=b}}break;case"multiple":h.multiple=j&&typeof j!="function"&&typeof j!="symbol";break;case"muted":h.muted=j&&typeof j!="function"&&typeof j!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(j==null||typeof j=="function"||typeof j=="boolean"||typeof j=="symbol"){h.removeAttribute("xlink:href");break}b=se(""+j),h.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",b);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":j!=null&&typeof j!="function"&&typeof j!="symbol"?h.setAttribute(b,""+j):h.removeAttribute(b);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":j&&typeof j!="function"&&typeof j!="symbol"?h.setAttribute(b,""):h.removeAttribute(b);break;case"capture":case"download":j===!0?h.setAttribute(b,""):j!==!1&&j!=null&&typeof j!="function"&&typeof j!="symbol"?h.setAttribute(b,j):h.removeAttribute(b);break;case"cols":case"rows":case"size":case"span":j!=null&&typeof j!="function"&&typeof j!="symbol"&&!isNaN(j)&&1<=j?h.setAttribute(b,j):h.removeAttribute(b);break;case"rowSpan":case"start":j==null||typeof j=="function"||typeof j=="symbol"||isNaN(j)?h.removeAttribute(b):h.setAttribute(b,j);break;case"popover":Sa("beforetoggle",h),Sa("toggle",h),ci(h,"popover",j);break;case"xlinkActuate":Ta(h,"http://www.w3.org/1999/xlink","xlink:actuate",j);break;case"xlinkArcrole":Ta(h,"http://www.w3.org/1999/xlink","xlink:arcrole",j);break;case"xlinkRole":Ta(h,"http://www.w3.org/1999/xlink","xlink:role",j);break;case"xlinkShow":Ta(h,"http://www.w3.org/1999/xlink","xlink:show",j);break;case"xlinkTitle":Ta(h,"http://www.w3.org/1999/xlink","xlink:title",j);break;case"xlinkType":Ta(h,"http://www.w3.org/1999/xlink","xlink:type",j);break;case"xmlBase":Ta(h,"http://www.w3.org/XML/1998/namespace","xml:base",j);break;case"xmlLang":Ta(h,"http://www.w3.org/XML/1998/namespace","xml:lang",j);break;case"xmlSpace":Ta(h,"http://www.w3.org/XML/1998/namespace","xml:space",j);break;case"is":ci(h,"is",j);break;case"innerText":case"textContent":break;default:(!(2<b.length)||b[0]!=="o"&&b[0]!=="O"||b[1]!=="n"&&b[1]!=="N")&&(b=Ht.get(b)||b,ci(h,b,j))}}function Tk(h,A,b,j,Y,ee){switch(b){case"style":io(h,j,ee);break;case"dangerouslySetInnerHTML":if(j!=null){if(typeof j!="object"||!("__html"in j))throw Error(n(61));if(b=j.__html,b!=null){if(Y.children!=null)throw Error(n(60));h.innerHTML=b}}break;case"children":typeof j=="string"?Vs(h,j):(typeof j=="number"||typeof j=="bigint")&&Vs(h,""+j);break;case"onScroll":j!=null&&Sa("scroll",h);break;case"onScrollEnd":j!=null&&Sa("scrollend",h);break;case"onClick":j!=null&&(h.onclick=ce);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ll.hasOwnProperty(b))e:{if(b[0]==="o"&&b[1]==="n"&&(Y=b.endsWith("Capture"),A=b.slice(2,Y?b.length-7:void 0),ee=h[qs]||null,ee=ee!=null?ee[b]:null,typeof ee=="function"&&h.removeEventListener(A,ee,Y),typeof j=="function")){typeof ee!="function"&&ee!==null&&(b in h?h[b]=null:h.hasAttribute(b)&&h.removeAttribute(b)),h.addEventListener(A,j,Y);break e}b in h?h[b]=j:j===!0?h.setAttribute(b,""):ci(h,b,j)}}}function Bd(h,A,b){switch(A){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Sa("error",h),Sa("load",h);var j=!1,Y=!1,ee;for(ee in b)if(b.hasOwnProperty(ee)){var Te=b[ee];if(Te!=null)switch(ee){case"src":j=!0;break;case"srcSet":Y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,A));default:Xo(h,A,ee,Te,b,null)}}Y&&Xo(h,A,"srcSet",b.srcSet,b,null),j&&Xo(h,A,"src",b.src,b,null);return;case"input":Sa("invalid",h);var tt=ee=Te=Y=null,Pt=null,jr=null;for(j in b)if(b.hasOwnProperty(j)){var Kr=b[j];if(Kr!=null)switch(j){case"name":Y=Kr;break;case"type":Te=Kr;break;case"checked":Pt=Kr;break;case"defaultChecked":jr=Kr;break;case"value":ee=Kr;break;case"defaultValue":tt=Kr;break;case"children":case"dangerouslySetInnerHTML":if(Kr!=null)throw Error(n(137,A));break;default:Xo(h,A,j,Kr,b,null)}}Ea(h,ee,tt,Pt,jr,Te,Y,!1);return;case"select":Sa("invalid",h),j=Te=ee=null;for(Y in b)if(b.hasOwnProperty(Y)&&(tt=b[Y],tt!=null))switch(Y){case"value":ee=tt;break;case"defaultValue":Te=tt;break;case"multiple":j=tt;default:Xo(h,A,Y,tt,b,null)}A=ee,b=Te,h.multiple=!!j,A!=null?ms(h,!!j,A,!1):b!=null&&ms(h,!!j,b,!0);return;case"textarea":Sa("invalid",h),ee=Y=j=null;for(Te in b)if(b.hasOwnProperty(Te)&&(tt=b[Te],tt!=null))switch(Te){case"value":j=tt;break;case"defaultValue":Y=tt;break;case"children":ee=tt;break;case"dangerouslySetInnerHTML":if(tt!=null)throw Error(n(91));break;default:Xo(h,A,Te,tt,b,null)}Ka(h,j,Y,ee);return;case"option":for(Pt in b)b.hasOwnProperty(Pt)&&(j=b[Pt],j!=null)&&(Pt==="selected"?h.selected=j&&typeof j!="function"&&typeof j!="symbol":Xo(h,A,Pt,j,b,null));return;case"dialog":Sa("beforetoggle",h),Sa("toggle",h),Sa("cancel",h),Sa("close",h);break;case"iframe":case"object":Sa("load",h);break;case"video":case"audio":for(j=0;j<F1.length;j++)Sa(F1[j],h);break;case"image":Sa("error",h),Sa("load",h);break;case"details":Sa("toggle",h);break;case"embed":case"source":case"link":Sa("error",h),Sa("load",h);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(jr in b)if(b.hasOwnProperty(jr)&&(j=b[jr],j!=null))switch(jr){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,A));default:Xo(h,A,jr,j,b,null)}return;default:if(Vo(A)){for(Kr in b)b.hasOwnProperty(Kr)&&(j=b[Kr],j!==void 0&&Tk(h,A,Kr,j,b,void 0));return}}for(tt in b)b.hasOwnProperty(tt)&&(j=b[tt],j!=null&&Xo(h,A,tt,j,b,null))}function Rle(h,A,b,j){switch(A){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var Y=null,ee=null,Te=null,tt=null,Pt=null,jr=null,Kr=null;for(Br in b){var rn=b[Br];if(b.hasOwnProperty(Br)&&rn!=null)switch(Br){case"checked":break;case"value":break;case"defaultValue":Pt=rn;default:j.hasOwnProperty(Br)||Xo(h,A,Br,null,j,rn)}}for(var Cr in j){var Br=j[Cr];if(rn=b[Cr],j.hasOwnProperty(Cr)&&(Br!=null||rn!=null))switch(Cr){case"type":ee=Br;break;case"name":Y=Br;break;case"checked":jr=Br;break;case"defaultChecked":Kr=Br;break;case"value":Te=Br;break;case"defaultValue":tt=Br;break;case"children":case"dangerouslySetInnerHTML":if(Br!=null)throw Error(n(137,A));break;default:Br!==rn&&Xo(h,A,Cr,Br,j,rn)}}zo(h,Te,tt,Pt,jr,Kr,ee,Y);return;case"select":Br=Te=tt=Cr=null;for(ee in b)if(Pt=b[ee],b.hasOwnProperty(ee)&&Pt!=null)switch(ee){case"value":break;case"multiple":Br=Pt;default:j.hasOwnProperty(ee)||Xo(h,A,ee,null,j,Pt)}for(Y in j)if(ee=j[Y],Pt=b[Y],j.hasOwnProperty(Y)&&(ee!=null||Pt!=null))switch(Y){case"value":Cr=ee;break;case"defaultValue":tt=ee;break;case"multiple":Te=ee;default:ee!==Pt&&Xo(h,A,Y,ee,j,Pt)}A=tt,b=Te,j=Br,Cr!=null?ms(h,!!b,Cr,!1):!!j!=!!b&&(A!=null?ms(h,!!b,A,!0):ms(h,!!b,b?[]:"",!1));return;case"textarea":Br=Cr=null;for(tt in b)if(Y=b[tt],b.hasOwnProperty(tt)&&Y!=null&&!j.hasOwnProperty(tt))switch(tt){case"value":break;case"children":break;default:Xo(h,A,tt,null,j,Y)}for(Te in j)if(Y=j[Te],ee=b[Te],j.hasOwnProperty(Te)&&(Y!=null||ee!=null))switch(Te){case"value":Cr=Y;break;case"defaultValue":Br=Y;break;case"children":break;case"dangerouslySetInnerHTML":if(Y!=null)throw Error(n(91));break;default:Y!==ee&&Xo(h,A,Te,Y,j,ee)}jo(h,Cr,Br);return;case"option":for(var _i in b)Cr=b[_i],b.hasOwnProperty(_i)&&Cr!=null&&!j.hasOwnProperty(_i)&&(_i==="selected"?h.selected=!1:Xo(h,A,_i,null,j,Cr));for(Pt in j)Cr=j[Pt],Br=b[Pt],j.hasOwnProperty(Pt)&&Cr!==Br&&(Cr!=null||Br!=null)&&(Pt==="selected"?h.selected=Cr&&typeof Cr!="function"&&typeof Cr!="symbol":Xo(h,A,Pt,Cr,j,Br));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ds in b)Cr=b[ds],b.hasOwnProperty(ds)&&Cr!=null&&!j.hasOwnProperty(ds)&&Xo(h,A,ds,null,j,Cr);for(jr in j)if(Cr=j[jr],Br=b[jr],j.hasOwnProperty(jr)&&Cr!==Br&&(Cr!=null||Br!=null))switch(jr){case"children":case"dangerouslySetInnerHTML":if(Cr!=null)throw Error(n(137,A));break;default:Xo(h,A,jr,Cr,j,Br)}return;default:if(Vo(A)){for(var Zo in b)Cr=b[Zo],b.hasOwnProperty(Zo)&&Cr!==void 0&&!j.hasOwnProperty(Zo)&&Tk(h,A,Zo,void 0,j,Cr);for(Kr in j)Cr=j[Kr],Br=b[Kr],!j.hasOwnProperty(Kr)||Cr===Br||Cr===void 0&&Br===void 0||Tk(h,A,Kr,Cr,j,Br);return}}for(var cr in b)Cr=b[cr],b.hasOwnProperty(cr)&&Cr!=null&&!j.hasOwnProperty(cr)&&Xo(h,A,cr,null,j,Cr);for(rn in j)Cr=j[rn],Br=b[rn],!j.hasOwnProperty(rn)||Cr===Br||Cr==null&&Br==null||Xo(h,A,rn,Cr,j,Br)}function DU(h){switch(h){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Dle(){if(typeof performance.getEntriesByType=="function"){for(var h=0,A=0,b=performance.getEntriesByType("resource"),j=0;j<b.length;j++){var Y=b[j],ee=Y.transferSize,Te=Y.initiatorType,tt=Y.duration;if(ee&&tt&&DU(Te)){for(Te=0,tt=Y.responseEnd,j+=1;j<b.length;j++){var Pt=b[j],jr=Pt.startTime;if(jr>tt)break;var Kr=Pt.transferSize,rn=Pt.initiatorType;Kr&&DU(rn)&&(Pt=Pt.responseEnd,Te+=Kr*(Pt<tt?1:(tt-jr)/(Pt-jr)))}if(--j,A+=8*(ee+Te)/(Y.duration/1e3),h++,10<h)break}}if(0<h)return A/h/1e6}return navigator.connection&&(h=navigator.connection.downlink,typeof h=="number")?h:5}var Ck=null,Nk=null;function TE(h){return h.nodeType===9?h:h.ownerDocument}function MU(h){switch(h){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function FU(h,A){if(h===0)switch(A){case"svg":return 1;case"math":return 2;default:return 0}return h===1&&A==="foreignObject"?0:h}function kk(h,A){return h==="textarea"||h==="noscript"||typeof A.children=="string"||typeof A.children=="number"||typeof A.children=="bigint"||typeof A.dangerouslySetInnerHTML=="object"&&A.dangerouslySetInnerHTML!==null&&A.dangerouslySetInnerHTML.__html!=null}var Lk=null;function Mle(){var h=window.event;return h&&h.type==="popstate"?h===Lk?!1:(Lk=h,!0):(Lk=null,!1)}var UU=typeof setTimeout=="function"?setTimeout:void 0,Fle=typeof clearTimeout=="function"?clearTimeout:void 0,$U=typeof Promise=="function"?Promise:void 0,Ule=typeof queueMicrotask=="function"?queueMicrotask:typeof $U<"u"?function(h){return $U.resolve(null).then(h).catch($le)}:UU;function $le(h){setTimeout(function(){throw h})}function Gg(h){return h==="head"}function HU(h,A){var b=A,j=0;do{var Y=b.nextSibling;if(h.removeChild(b),Y&&Y.nodeType===8)if(b=Y.data,b==="/$"||b==="/&"){if(j===0){h.removeChild(Y),tx(A);return}j--}else if(b==="$"||b==="$?"||b==="$~"||b==="$!"||b==="&")j++;else if(b==="html")$1(h.ownerDocument.documentElement);else if(b==="head"){b=h.ownerDocument.head,$1(b);for(var ee=b.firstChild;ee;){var Te=ee.nextSibling,tt=ee.nodeName;ee[Fl]||tt==="SCRIPT"||tt==="STYLE"||tt==="LINK"&&ee.rel.toLowerCase()==="stylesheet"||b.removeChild(ee),ee=Te}}else b==="body"&&$1(h.ownerDocument.body);b=Y}while(b);tx(A)}function QU(h,A){var b=h;h=0;do{var j=b.nextSibling;if(b.nodeType===1?A?(b._stashedDisplay=b.style.display,b.style.display="none"):(b.style.display=b._stashedDisplay||"",b.getAttribute("style")===""&&b.removeAttribute("style")):b.nodeType===3&&(A?(b._stashedText=b.nodeValue,b.nodeValue=""):b.nodeValue=b._stashedText||""),j&&j.nodeType===8)if(b=j.data,b==="/$"){if(h===0)break;h--}else b!=="$"&&b!=="$?"&&b!=="$~"&&b!=="$!"||h++;b=j}while(b)}function Ik(h){var A=h.firstChild;for(A&&A.nodeType===10&&(A=A.nextSibling);A;){var b=A;switch(A=A.nextSibling,b.nodeName){case"HTML":case"HEAD":case"BODY":Ik(b),nu(b);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(b.rel.toLowerCase()==="stylesheet")continue}h.removeChild(b)}}function Hle(h,A,b,j){for(;h.nodeType===1;){var Y=b;if(h.nodeName.toLowerCase()!==A.toLowerCase()){if(!j&&(h.nodeName!=="INPUT"||h.type!=="hidden"))break}else if(j){if(!h[Fl])switch(A){case"meta":if(!h.hasAttribute("itemprop"))break;return h;case"link":if(ee=h.getAttribute("rel"),ee==="stylesheet"&&h.hasAttribute("data-precedence"))break;if(ee!==Y.rel||h.getAttribute("href")!==(Y.href==null||Y.href===""?null:Y.href)||h.getAttribute("crossorigin")!==(Y.crossOrigin==null?null:Y.crossOrigin)||h.getAttribute("title")!==(Y.title==null?null:Y.title))break;return h;case"style":if(h.hasAttribute("data-precedence"))break;return h;case"script":if(ee=h.getAttribute("src"),(ee!==(Y.src==null?null:Y.src)||h.getAttribute("type")!==(Y.type==null?null:Y.type)||h.getAttribute("crossorigin")!==(Y.crossOrigin==null?null:Y.crossOrigin))&&ee&&h.hasAttribute("async")&&!h.hasAttribute("itemprop"))break;return h;default:return h}}else if(A==="input"&&h.type==="hidden"){var ee=Y.name==null?null:""+Y.name;if(Y.type==="hidden"&&h.getAttribute("name")===ee)return h}else return h;if(h=Mf(h.nextSibling),h===null)break}return null}function Qle(h,A,b){if(A==="")return null;for(;h.nodeType!==3;)if((h.nodeType!==1||h.nodeName!=="INPUT"||h.type!=="hidden")&&!b||(h=Mf(h.nextSibling),h===null))return null;return h}function zU(h,A){for(;h.nodeType!==8;)if((h.nodeType!==1||h.nodeName!=="INPUT"||h.type!=="hidden")&&!A||(h=Mf(h.nextSibling),h===null))return null;return h}function Bk(h){return h.data==="$?"||h.data==="$~"}function Pk(h){return h.data==="$!"||h.data==="$?"&&h.ownerDocument.readyState!=="loading"}function zle(h,A){var b=h.ownerDocument;if(h.data==="$~")h._reactRetry=A;else if(h.data!=="$?"||b.readyState!=="loading")A();else{var j=function(){A(),b.removeEventListener("DOMContentLoaded",j)};b.addEventListener("DOMContentLoaded",j),h._reactRetry=j}}function Mf(h){for(;h!=null;h=h.nextSibling){var A=h.nodeType;if(A===1||A===3)break;if(A===8){if(A=h.data,A==="$"||A==="$!"||A==="$?"||A==="$~"||A==="&"||A==="F!"||A==="F")break;if(A==="/$"||A==="/&")return null}}return h}var Ok=null;function VU(h){h=h.nextSibling;for(var A=0;h;){if(h.nodeType===8){var b=h.data;if(b==="/$"||b==="/&"){if(A===0)return Mf(h.nextSibling);A--}else b!=="$"&&b!=="$!"&&b!=="$?"&&b!=="$~"&&b!=="&"||A++}h=h.nextSibling}return null}function KU(h){h=h.previousSibling;for(var A=0;h;){if(h.nodeType===8){var b=h.data;if(b==="$"||b==="$!"||b==="$?"||b==="$~"||b==="&"){if(A===0)return h;A--}else b!=="/$"&&b!=="/&"||A++}h=h.previousSibling}return null}function GU(h,A,b){switch(A=TE(b),h){case"html":if(h=A.documentElement,!h)throw Error(n(452));return h;case"head":if(h=A.head,!h)throw Error(n(453));return h;case"body":if(h=A.body,!h)throw Error(n(454));return h;default:throw Error(n(451))}}function $1(h){for(var A=h.attributes;A.length;)h.removeAttributeNode(A[0]);nu(h)}var Ff=new Map,WU=new Set;function CE(h){return typeof h.getRootNode=="function"?h.getRootNode():h.nodeType===9?h:h.ownerDocument}var jp=ae.d;ae.d={f:Vle,r:Kle,D:Gle,C:Wle,L:Yle,m:qle,X:Zle,S:Xle,M:Jle};function Vle(){var h=jp.f(),A=Iu();return h||A}function Kle(h){var A=ra(h);A!==null&&A.tag===5&&A.type==="form"?Ld(A):jp.r(h)}var Zy=typeof document>"u"?null:document;function YU(h,A,b){var j=Zy;if(j&&typeof A=="string"&&A){var Y=Hi(A);Y='link[rel="'+h+'"][href="'+Y+'"]',typeof b=="string"&&(Y+='[crossorigin="'+b+'"]'),WU.has(Y)||(WU.add(Y),h={rel:h,crossOrigin:b,href:A},j.querySelector(Y)===null&&(A=j.createElement("link"),Bd(A,"link",h),wa(A),j.head.appendChild(A)))}}function Gle(h){jp.D(h),YU("dns-prefetch",h,null)}function Wle(h,A){jp.C(h,A),YU("preconnect",h,A)}function Yle(h,A,b){jp.L(h,A,b);var j=Zy;if(j&&h&&A){var Y='link[rel="preload"][as="'+Hi(A)+'"]';A==="image"&&b&&b.imageSrcSet?(Y+='[imagesrcset="'+Hi(b.imageSrcSet)+'"]',typeof b.imageSizes=="string"&&(Y+='[imagesizes="'+Hi(b.imageSizes)+'"]')):Y+='[href="'+Hi(h)+'"]';var ee=Y;switch(A){case"style":ee=Jy(h);break;case"script":ee=ex(h)}Ff.has(ee)||(h=f({rel:"preload",href:A==="image"&&b&&b.imageSrcSet?void 0:h,as:A},b),Ff.set(ee,h),j.querySelector(Y)!==null||A==="style"&&j.querySelector(H1(ee))||A==="script"&&j.querySelector(Q1(ee))||(A=j.createElement("link"),Bd(A,"link",h),wa(A),j.head.appendChild(A)))}}function qle(h,A){jp.m(h,A);var b=Zy;if(b&&h){var j=A&&typeof A.as=="string"?A.as:"script",Y='link[rel="modulepreload"][as="'+Hi(j)+'"][href="'+Hi(h)+'"]',ee=Y;switch(j){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":ee=ex(h)}if(!Ff.has(ee)&&(h=f({rel:"modulepreload",href:h},A),Ff.set(ee,h),b.querySelector(Y)===null)){switch(j){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(b.querySelector(Q1(ee)))return}j=b.createElement("link"),Bd(j,"link",h),wa(j),b.head.appendChild(j)}}}function Xle(h,A,b){jp.S(h,A,b);var j=Zy;if(j&&h){var Y=Ws(j).hoistableStyles,ee=Jy(h);A=A||"default";var Te=Y.get(ee);if(!Te){var tt={loading:0,preload:null};if(Te=j.querySelector(H1(ee)))tt.loading=5;else{h=f({rel:"stylesheet",href:h,"data-precedence":A},b),(b=Ff.get(ee))&&Rk(h,b);var Pt=Te=j.createElement("link");wa(Pt),Bd(Pt,"link",h),Pt._p=new Promise(function(jr,Kr){Pt.onload=jr,Pt.onerror=Kr}),Pt.addEventListener("load",function(){tt.loading|=1}),Pt.addEventListener("error",function(){tt.loading|=2}),tt.loading|=4,NE(Te,A,j)}Te={type:"stylesheet",instance:Te,count:1,state:tt},Y.set(ee,Te)}}}function Zle(h,A){jp.X(h,A);var b=Zy;if(b&&h){var j=Ws(b).hoistableScripts,Y=ex(h),ee=j.get(Y);ee||(ee=b.querySelector(Q1(Y)),ee||(h=f({src:h,async:!0},A),(A=Ff.get(Y))&&Dk(h,A),ee=b.createElement("script"),wa(ee),Bd(ee,"link",h),b.head.appendChild(ee)),ee={type:"script",instance:ee,count:1,state:null},j.set(Y,ee))}}function Jle(h,A){jp.M(h,A);var b=Zy;if(b&&h){var j=Ws(b).hoistableScripts,Y=ex(h),ee=j.get(Y);ee||(ee=b.querySelector(Q1(Y)),ee||(h=f({src:h,async:!0,type:"module"},A),(A=Ff.get(Y))&&Dk(h,A),ee=b.createElement("script"),wa(ee),Bd(ee,"link",h),b.head.appendChild(ee)),ee={type:"script",instance:ee,count:1,state:null},j.set(Y,ee))}}function qU(h,A,b,j){var Y=(Y=Fe.current)?CE(Y):null;if(!Y)throw Error(n(446));switch(h){case"meta":case"title":return null;case"style":return typeof b.precedence=="string"&&typeof b.href=="string"?(A=Jy(b.href),b=Ws(Y).hoistableStyles,j=b.get(A),j||(j={type:"style",instance:null,count:0,state:null},b.set(A,j)),j):{type:"void",instance:null,count:0,state:null};case"link":if(b.rel==="stylesheet"&&typeof b.href=="string"&&typeof b.precedence=="string"){h=Jy(b.href);var ee=Ws(Y).hoistableStyles,Te=ee.get(h);if(Te||(Y=Y.ownerDocument||Y,Te={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},ee.set(h,Te),(ee=Y.querySelector(H1(h)))&&!ee._p&&(Te.instance=ee,Te.state.loading=5),Ff.has(h)||(b={rel:"preload",as:"style",href:b.href,crossOrigin:b.crossOrigin,integrity:b.integrity,media:b.media,hrefLang:b.hrefLang,referrerPolicy:b.referrerPolicy},Ff.set(h,b),ee||ece(Y,h,b,Te.state))),A&&j===null)throw Error(n(528,""));return Te}if(A&&j!==null)throw Error(n(529,""));return null;case"script":return A=b.async,b=b.src,typeof b=="string"&&A&&typeof A!="function"&&typeof A!="symbol"?(A=ex(b),b=Ws(Y).hoistableScripts,j=b.get(A),j||(j={type:"script",instance:null,count:0,state:null},b.set(A,j)),j):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,h))}}function Jy(h){return'href="'+Hi(h)+'"'}function H1(h){return'link[rel="stylesheet"]['+h+"]"}function XU(h){return f({},h,{"data-precedence":h.precedence,precedence:null})}function ece(h,A,b,j){h.querySelector('link[rel="preload"][as="style"]['+A+"]")?j.loading=1:(A=h.createElement("link"),j.preload=A,A.addEventListener("load",function(){return j.loading|=1}),A.addEventListener("error",function(){return j.loading|=2}),Bd(A,"link",b),wa(A),h.head.appendChild(A))}function ex(h){return'[src="'+Hi(h)+'"]'}function Q1(h){return"script[async]"+h}function ZU(h,A,b){if(A.count++,A.instance===null)switch(A.type){case"style":var j=h.querySelector('style[data-href~="'+Hi(b.href)+'"]');if(j)return A.instance=j,wa(j),j;var Y=f({},b,{"data-href":b.href,"data-precedence":b.precedence,href:null,precedence:null});return j=(h.ownerDocument||h).createElement("style"),wa(j),Bd(j,"style",Y),NE(j,b.precedence,h),A.instance=j;case"stylesheet":Y=Jy(b.href);var ee=h.querySelector(H1(Y));if(ee)return A.state.loading|=4,A.instance=ee,wa(ee),ee;j=XU(b),(Y=Ff.get(Y))&&Rk(j,Y),ee=(h.ownerDocument||h).createElement("link"),wa(ee);var Te=ee;return Te._p=new Promise(function(tt,Pt){Te.onload=tt,Te.onerror=Pt}),Bd(ee,"link",j),A.state.loading|=4,NE(ee,b.precedence,h),A.instance=ee;case"script":return ee=ex(b.src),(Y=h.querySelector(Q1(ee)))?(A.instance=Y,wa(Y),Y):(j=b,(Y=Ff.get(ee))&&(j=f({},b),Dk(j,Y)),h=h.ownerDocument||h,Y=h.createElement("script"),wa(Y),Bd(Y,"link",j),h.head.appendChild(Y),A.instance=Y);case"void":return null;default:throw Error(n(443,A.type))}else A.type==="stylesheet"&&(A.state.loading&4)===0&&(j=A.instance,A.state.loading|=4,NE(j,b.precedence,h));return A.instance}function NE(h,A,b){for(var j=b.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),Y=j.length?j[j.length-1]:null,ee=Y,Te=0;Te<j.length;Te++){var tt=j[Te];if(tt.dataset.precedence===A)ee=tt;else if(ee!==Y)break}ee?ee.parentNode.insertBefore(h,ee.nextSibling):(A=b.nodeType===9?b.head:b,A.insertBefore(h,A.firstChild))}function Rk(h,A){h.crossOrigin==null&&(h.crossOrigin=A.crossOrigin),h.referrerPolicy==null&&(h.referrerPolicy=A.referrerPolicy),h.title==null&&(h.title=A.title)}function Dk(h,A){h.crossOrigin==null&&(h.crossOrigin=A.crossOrigin),h.referrerPolicy==null&&(h.referrerPolicy=A.referrerPolicy),h.integrity==null&&(h.integrity=A.integrity)}var kE=null;function JU(h,A,b){if(kE===null){var j=new Map,Y=kE=new Map;Y.set(b,j)}else Y=kE,j=Y.get(b),j||(j=new Map,Y.set(b,j));if(j.has(h))return j;for(j.set(h,null),b=b.getElementsByTagName(h),Y=0;Y<b.length;Y++){var ee=b[Y];if(!(ee[Fl]||ee[ns]||h==="link"&&ee.getAttribute("rel")==="stylesheet")&&ee.namespaceURI!=="http://www.w3.org/2000/svg"){var Te=ee.getAttribute(A)||"";Te=h+Te;var tt=j.get(Te);tt?tt.push(ee):j.set(Te,[ee])}}return j}function e8(h,A,b){h=h.ownerDocument||h,h.head.insertBefore(b,A==="title"?h.querySelector("head > title"):null)}function tce(h,A,b){if(b===1||A.itemProp!=null)return!1;switch(h){case"meta":case"title":return!0;case"style":if(typeof A.precedence!="string"||typeof A.href!="string"||A.href==="")break;return!0;case"link":if(typeof A.rel!="string"||typeof A.href!="string"||A.href===""||A.onLoad||A.onError)break;return A.rel==="stylesheet"?(h=A.disabled,typeof A.precedence=="string"&&h==null):!0;case"script":if(A.async&&typeof A.async!="function"&&typeof A.async!="symbol"&&!A.onLoad&&!A.onError&&A.src&&typeof A.src=="string")return!0}return!1}function t8(h){return!(h.type==="stylesheet"&&(h.state.loading&3)===0)}function rce(h,A,b,j){if(b.type==="stylesheet"&&(typeof j.media!="string"||matchMedia(j.media).matches!==!1)&&(b.state.loading&4)===0){if(b.instance===null){var Y=Jy(j.href),ee=A.querySelector(H1(Y));if(ee){A=ee._p,A!==null&&typeof A=="object"&&typeof A.then=="function"&&(h.count++,h=LE.bind(h),A.then(h,h)),b.state.loading|=4,b.instance=ee,wa(ee);return}ee=A.ownerDocument||A,j=XU(j),(Y=Ff.get(Y))&&Rk(j,Y),ee=ee.createElement("link"),wa(ee);var Te=ee;Te._p=new Promise(function(tt,Pt){Te.onload=tt,Te.onerror=Pt}),Bd(ee,"link",j),b.instance=ee}h.stylesheets===null&&(h.stylesheets=new Map),h.stylesheets.set(b,A),(A=b.state.preload)&&(b.state.loading&3)===0&&(h.count++,b=LE.bind(h),A.addEventListener("load",b),A.addEventListener("error",b))}}var Mk=0;function nce(h,A){return h.stylesheets&&h.count===0&&BE(h,h.stylesheets),0<h.count||0<h.imgCount?function(b){var j=setTimeout(function(){if(h.stylesheets&&BE(h,h.stylesheets),h.unsuspend){var ee=h.unsuspend;h.unsuspend=null,ee()}},6e4+A);0<h.imgBytes&&Mk===0&&(Mk=62500*Dle());var Y=setTimeout(function(){if(h.waitingForImages=!1,h.count===0&&(h.stylesheets&&BE(h,h.stylesheets),h.unsuspend)){var ee=h.unsuspend;h.unsuspend=null,ee()}},(h.imgBytes>Mk?50:800)+A);return h.unsuspend=b,function(){h.unsuspend=null,clearTimeout(j),clearTimeout(Y)}}:null}function LE(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)BE(this,this.stylesheets);else if(this.unsuspend){var h=this.unsuspend;this.unsuspend=null,h()}}}var IE=null;function BE(h,A){h.stylesheets=null,h.unsuspend!==null&&(h.count++,IE=new Map,A.forEach(ice,h),IE=null,LE.call(h))}function ice(h,A){if(!(A.state.loading&4)){var b=IE.get(h);if(b)var j=b.get(null);else{b=new Map,IE.set(h,b);for(var Y=h.querySelectorAll("link[data-precedence],style[data-precedence]"),ee=0;ee<Y.length;ee++){var Te=Y[ee];(Te.nodeName==="LINK"||Te.getAttribute("media")!=="not all")&&(b.set(Te.dataset.precedence,Te),j=Te)}j&&b.set(null,j)}Y=A.instance,Te=Y.getAttribute("data-precedence"),ee=b.get(Te)||j,ee===j&&b.set(null,Y),b.set(Te,Y),this.count++,j=LE.bind(this),Y.addEventListener("load",j),Y.addEventListener("error",j),ee?ee.parentNode.insertBefore(Y,ee.nextSibling):(h=h.nodeType===9?h.head:h,h.insertBefore(Y,h.firstChild)),A.state.loading|=4}}var z1={$$typeof:E,Provider:null,Consumer:null,_currentValue:oe,_currentValue2:oe,_threadCount:0};function sce(h,A,b,j,Y,ee,Te,tt,Pt){this.tag=1,this.containerInfo=h,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ms(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ms(0),this.hiddenUpdates=Ms(null),this.identifierPrefix=j,this.onUncaughtError=Y,this.onCaughtError=ee,this.onRecoverableError=Te,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Pt,this.incompleteTransitions=new Map}function r8(h,A,b,j,Y,ee,Te,tt,Pt,jr,Kr,rn){return h=new sce(h,A,b,Te,Pt,jr,Kr,rn,tt),A=1,ee===!0&&(A|=24),ee=Bl(3,null,null,A),h.current=ee,ee.stateNode=h,A=dh(),A.refCount++,h.pooledCache=A,A.refCount++,ee.memoizedState={element:j,isDehydrated:b,cache:A},Ua(ee),h}function n8(h){return h?(h=yl,h):yl}function i8(h,A,b,j,Y,ee){Y=n8(Y),j.context===null?j.context=Y:j.pendingContext=Y,j=ki(A),j.payload={element:b},ee=ee===void 0?null:ee,ee!==null&&(j.callback=ee),b=zi(h,j,A),b!==null&&(Do(b,h,A),xs(b,h,A))}function s8(h,A){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var b=h.retryLane;h.retryLane=b!==0&&b<A?b:A}}function Fk(h,A){s8(h,A),(h=h.alternate)&&s8(h,A)}function a8(h){if(h.tag===13||h.tag===31){var A=rc(h,67108864);A!==null&&Do(A,h,67108864),Fk(h,67108864)}}function o8(h){if(h.tag===13||h.tag===31){var A=Mi();A=jn(A);var b=rc(h,A);b!==null&&Do(b,h,A),Fk(h,A)}}var PE=!0;function ace(h,A,b,j){var Y=ne.T;ne.T=null;var ee=ae.p;try{ae.p=2,Uk(h,A,b,j)}finally{ae.p=ee,ne.T=Y}}function oce(h,A,b,j){var Y=ne.T;ne.T=null;var ee=ae.p;try{ae.p=8,Uk(h,A,b,j)}finally{ae.p=ee,ne.T=Y}}function Uk(h,A,b,j){if(PE){var Y=$k(j);if(Y===null)jk(h,A,j,OE,b),c8(h,j);else if(cce(Y,h,A,b,j))j.stopPropagation();else if(c8(h,j),A&4&&-1<lce.indexOf(h)){for(;Y!==null;){var ee=ra(Y);if(ee!==null)switch(ee.tag){case 3:if(ee=ee.stateNode,ee.current.memoizedState.isDehydrated){var Te=yn(ee.pendingLanes);if(Te!==0){var tt=ee;for(tt.pendingLanes|=2,tt.entangledLanes|=2;Te;){var Pt=1<<31-Yr(Te);tt.entanglements[1]|=Pt,Te&=~Pt}cA(ee),(ya&6)===0&&(Kn=Gr()+500,M1(0))}}break;case 31:case 13:tt=rc(ee,2),tt!==null&&Do(tt,ee,2),Iu(),Fk(ee,2)}if(ee=$k(j),ee===null&&jk(h,A,j,OE,b),ee===Y)break;Y=ee}Y!==null&&j.stopPropagation()}else jk(h,A,j,null,b)}}function $k(h){return h=K(h),Hk(h)}var OE=null;function Hk(h){if(OE=null,h=pl(h),h!==null){var A=a(h);if(A===null)h=null;else{var b=A.tag;if(b===13){if(h=o(A),h!==null)return h;h=null}else if(b===31){if(h=c(A),h!==null)return h;h=null}else if(b===3){if(A.stateNode.current.memoizedState.isDehydrated)return A.tag===3?A.stateNode.containerInfo:null;h=null}else A!==h&&(h=null)}}return OE=h,null}function l8(h){switch(h){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Xr()){case Qr:return 2;case Pn:return 8;case wn:case yi:return 32;case ot:return 268435456;default:return 32}default:return 32}}var Qk=!1,Wg=null,Yg=null,qg=null,V1=new Map,K1=new Map,Xg=[],lce="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function c8(h,A){switch(h){case"focusin":case"focusout":Wg=null;break;case"dragenter":case"dragleave":Yg=null;break;case"mouseover":case"mouseout":qg=null;break;case"pointerover":case"pointerout":V1.delete(A.pointerId);break;case"gotpointercapture":case"lostpointercapture":K1.delete(A.pointerId)}}function G1(h,A,b,j,Y,ee){return h===null||h.nativeEvent!==ee?(h={blockedOn:A,domEventName:b,eventSystemFlags:j,nativeEvent:ee,targetContainers:[Y]},A!==null&&(A=ra(A),A!==null&&a8(A)),h):(h.eventSystemFlags|=j,A=h.targetContainers,Y!==null&&A.indexOf(Y)===-1&&A.push(Y),h)}function cce(h,A,b,j,Y){switch(A){case"focusin":return Wg=G1(Wg,h,A,b,j,Y),!0;case"dragenter":return Yg=G1(Yg,h,A,b,j,Y),!0;case"mouseover":return qg=G1(qg,h,A,b,j,Y),!0;case"pointerover":var ee=Y.pointerId;return V1.set(ee,G1(V1.get(ee)||null,h,A,b,j,Y)),!0;case"gotpointercapture":return ee=Y.pointerId,K1.set(ee,G1(K1.get(ee)||null,h,A,b,j,Y)),!0}return!1}function u8(h){var A=pl(h.target);if(A!==null){var b=a(A);if(b!==null){if(A=b.tag,A===13){if(A=o(b),A!==null){h.blockedOn=A,Qs(h.priority,function(){o8(b)});return}}else if(A===31){if(A=c(b),A!==null){h.blockedOn=A,Qs(h.priority,function(){o8(b)});return}}else if(A===3&&b.stateNode.current.memoizedState.isDehydrated){h.blockedOn=b.tag===3?b.stateNode.containerInfo:null;return}}}h.blockedOn=null}function RE(h){if(h.blockedOn!==null)return!1;for(var A=h.targetContainers;0<A.length;){var b=$k(h.nativeEvent);if(b===null){b=h.nativeEvent;var j=new b.constructor(b.type,b);$=j,b.target.dispatchEvent(j),$=null}else return A=ra(b),A!==null&&a8(A),h.blockedOn=b,!1;A.shift()}return!0}function d8(h,A,b){RE(h)&&b.delete(A)}function uce(){Qk=!1,Wg!==null&&RE(Wg)&&(Wg=null),Yg!==null&&RE(Yg)&&(Yg=null),qg!==null&&RE(qg)&&(qg=null),V1.forEach(d8),K1.forEach(d8)}function DE(h,A){h.blockedOn===A&&(h.blockedOn=null,Qk||(Qk=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,uce)))}var ME=null;function h8(h){ME!==h&&(ME=h,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){ME===h&&(ME=null);for(var A=0;A<h.length;A+=3){var b=h[A],j=h[A+1],Y=h[A+2];if(typeof j!="function"){if(Hk(j||b)===null)continue;break}var ee=ra(b);ee!==null&&(h.splice(A,3),A-=3,Ap(ee,{pending:!0,data:Y,method:b.method,action:j},j,Y))}}))}function tx(h){function A(Pt){return DE(Pt,h)}Wg!==null&&DE(Wg,h),Yg!==null&&DE(Yg,h),qg!==null&&DE(qg,h),V1.forEach(A),K1.forEach(A);for(var b=0;b<Xg.length;b++){var j=Xg[b];j.blockedOn===h&&(j.blockedOn=null)}for(;0<Xg.length&&(b=Xg[0],b.blockedOn===null);)u8(b),b.blockedOn===null&&Xg.shift();if(b=(h.ownerDocument||h).$$reactFormReplay,b!=null)for(j=0;j<b.length;j+=3){var Y=b[j],ee=b[j+1],Te=Y[qs]||null;if(typeof ee=="function")Te||h8(b);else if(Te){var tt=null;if(ee&&ee.hasAttribute("formAction")){if(Y=ee,Te=ee[qs]||null)tt=Te.formAction;else if(Hk(Y)!==null)continue}else tt=Te.action;typeof tt=="function"?b[j+1]=tt:(b.splice(j,3),j-=3),h8(b)}}}function f8(){function h(ee){ee.canIntercept&&ee.info==="react-transition"&&ee.intercept({handler:function(){return new Promise(function(Te){return Y=Te})},focusReset:"manual",scroll:"manual"})}function A(){Y!==null&&(Y(),Y=null),j||setTimeout(b,20)}function b(){if(!j&&!navigation.transition){var ee=navigation.currentEntry;ee&&ee.url!=null&&navigation.navigate(ee.url,{state:ee.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var j=!1,Y=null;return navigation.addEventListener("navigate",h),navigation.addEventListener("navigatesuccess",A),navigation.addEventListener("navigateerror",A),setTimeout(b,100),function(){j=!0,navigation.removeEventListener("navigate",h),navigation.removeEventListener("navigatesuccess",A),navigation.removeEventListener("navigateerror",A),Y!==null&&(Y(),Y=null)}}}function zk(h){this._internalRoot=h}FE.prototype.render=zk.prototype.render=function(h){var A=this._internalRoot;if(A===null)throw Error(n(409));var b=A.current,j=Mi();i8(b,j,h,A,null,null)},FE.prototype.unmount=zk.prototype.unmount=function(){var h=this._internalRoot;if(h!==null){this._internalRoot=null;var A=h.containerInfo;i8(h.current,2,null,h,null,null),Iu(),A[Rs]=null}};function FE(h){this._internalRoot=h}FE.prototype.unstable_scheduleHydration=function(h){if(h){var A=Fs();h={blockedOn:null,target:h,priority:A};for(var b=0;b<Xg.length&&A!==0&&A<Xg[b].priority;b++);Xg.splice(b,0,h),b===0&&u8(h)}};var m8=e.version;if(m8!=="19.2.4")throw Error(n(527,m8,"19.2.4"));ae.findDOMNode=function(h){var A=h._reactInternals;if(A===void 0)throw typeof h.render=="function"?Error(n(188)):(h=Object.keys(h).join(","),Error(n(268,h)));return h=l(A),h=h!==null?d(h):null,h=h===null?null:h.stateNode,h};var dce={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:ne,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var UE=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!UE.isDisabled&&UE.supportsFiber)try{ar=UE.inject(dce),Qt=UE}catch{}}return q1.createRoot=function(h,A){if(!i(h))throw Error(n(299));var b=!1,j="",Y=gp,ee=vp,Te=yp;return A!=null&&(A.unstable_strictMode===!0&&(b=!0),A.identifierPrefix!==void 0&&(j=A.identifierPrefix),A.onUncaughtError!==void 0&&(Y=A.onUncaughtError),A.onCaughtError!==void 0&&(ee=A.onCaughtError),A.onRecoverableError!==void 0&&(Te=A.onRecoverableError)),A=r8(h,1,!1,null,null,b,j,null,Y,ee,Te,f8),h[Rs]=A.current,Sk(h),new zk(A)},q1.hydrateRoot=function(h,A,b){if(!i(h))throw Error(n(299));var j=!1,Y="",ee=gp,Te=vp,tt=yp,Pt=null;return b!=null&&(b.unstable_strictMode===!0&&(j=!0),b.identifierPrefix!==void 0&&(Y=b.identifierPrefix),b.onUncaughtError!==void 0&&(ee=b.onUncaughtError),b.onCaughtError!==void 0&&(Te=b.onCaughtError),b.onRecoverableError!==void 0&&(tt=b.onRecoverableError),b.formState!==void 0&&(Pt=b.formState)),A=r8(h,1,!0,A,b??null,j,Y,Pt,ee,Te,tt,f8),A.context=n8(null),b=A.current,j=Mi(),j=jn(j),Y=ki(j),Y.callback=null,zi(b,Y,j),b=j,A.current.lanes=b,Ns(A,b),cA(A),h[Rs]=A.current,Sk(h),new FE(A)},q1.version="19.2.4",q1}var E8;function wce(){if(E8)return Gk.exports;E8=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Gk.exports=bce(),Gk.exports}var _ce=wce();const Ece=om(_ce);var S8="popstate";function Sce(t={}){function e(i,a){let{pathname:o="/",search:c="",hash:u=""}=Ny(i.location.hash.substring(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),pB("",{pathname:o,search:c,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(i,a){let o=i.document.querySelector("base"),c="";if(o&&o.getAttribute("href")){let u=i.location.href,l=u.indexOf("#");c=l===-1?u:u.slice(0,l)}return c+"#"+(typeof a=="string"?a:N2(a))}function n(i,a){Sf(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return Tce(e,r,n,t)}function Jl(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Sf(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function jce(){return Math.random().toString(36).substring(2,10)}function j8(t,e){return{usr:t.state,key:t.key,idx:e}}function pB(t,e,r=null,n){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Ny(e):e,state:r,key:e&&e.key||n||jce()}}function N2({pathname:t="/",search:e="",hash:r=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Ny(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substring(r),t=t.substring(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substring(n),t=t.substring(0,n)),t&&(e.pathname=t)}return e}function Tce(t,e,r,n={}){let{window:i=document.defaultView,v5Compat:a=!1}=n,o=i.history,c="POP",u=null,l=d();l==null&&(l=0,o.replaceState({...o.state,idx:l},""));function d(){return(o.state||{idx:null}).idx}function f(){c="POP";let x=d(),w=x==null?null:x-l;l=x,u&&u({action:c,location:y.location,delta:w})}function m(x,w){c="PUSH";let _=pB(y.location,x,w);r&&r(_,x),l=d()+1;let E=j8(_,l),N=y.createHref(_);try{o.pushState(E,"",N)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;i.location.assign(N)}a&&u&&u({action:c,location:y.location,delta:1})}function p(x,w){c="REPLACE";let _=pB(y.location,x,w);r&&r(_,x),l=d();let E=j8(_,l),N=y.createHref(_);o.replaceState(E,"",N),a&&u&&u({action:c,location:y.location,delta:0})}function g(x){return Cce(x)}let y={get action(){return c},get location(){return t(i,o)},listen(x){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(S8,f),u=x,()=>{i.removeEventListener(S8,f),u=null}},createHref(x){return e(i,x)},createURL:g,encodeLocation(x){let w=g(x);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:m,replace:p,go(x){return o.go(x)}};return y}function Cce(t,e=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),Jl(r,"No window.location.(origin|href) available to create URL");let n=typeof t=="string"?t:N2(t);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function fY(t,e,r="/"){return Nce(t,e,r,!1)}function Nce(t,e,r,n){let i=typeof e=="string"?Ny(e):e,a=Zp(i.pathname||"/",r);if(a==null)return null;let o=mY(t);kce(o);let c=null;for(let u=0;c==null&&u<o.length;++u){let l=$ce(a);c=Fce(o[u],l,n)}return c}function mY(t,e=[],r=[],n="",i=!1){let a=(o,c,u=i,l)=>{let d={relativePath:l===void 0?o.path||"":l,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};if(d.relativePath.startsWith("/")){if(!d.relativePath.startsWith(n)&&u)return;Jl(d.relativePath.startsWith(n),`Absolute route path "${d.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(n.length)}let f=Vp([n,d.relativePath]),m=r.concat(d);o.children&&o.children.length>0&&(Jl(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),mY(o.children,e,m,f,u)),!(o.path==null&&!o.index)&&e.push({path:f,score:Dce(f,o.index),routesMeta:m})};return t.forEach((o,c)=>{if(o.path===""||!o.path?.includes("?"))a(o,c);else for(let u of AY(o.path))a(o,c,!0,u)}),e}function AY(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,i=r.endsWith("?"),a=r.replace(/\?$/,"");if(n.length===0)return i?[a,""]:[a];let o=AY(n.join("/")),c=[];return c.push(...o.map(u=>u===""?a:[a,u].join("/"))),i&&c.push(...o),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function kce(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:Mce(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var Lce=/^:[\w-]+$/,Ice=3,Bce=2,Pce=1,Oce=10,Rce=-2,T8=t=>t==="*";function Dce(t,e){let r=t.split("/"),n=r.length;return r.some(T8)&&(n+=Rce),e&&(n+=Bce),r.filter(i=>!T8(i)).reduce((i,a)=>i+(Lce.test(a)?Ice:a===""?Pce:Oce),n)}function Mce(t,e){return t.length===e.length&&t.slice(0,-1).every((n,i)=>n===e[i])?t[t.length-1]-e[e.length-1]:0}function Fce(t,e,r=!1){let{routesMeta:n}=t,i={},a="/",o=[];for(let c=0;c<n.length;++c){let u=n[c],l=c===n.length-1,d=a==="/"?e:e.slice(a.length)||"/",f=NT({path:u.relativePath,caseSensitive:u.caseSensitive,end:l},d),m=u.route;if(!f&&l&&r&&!n[n.length-1].route.index&&(f=NT({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},d)),!f)return null;Object.assign(i,f.params),o.push({params:i,pathname:Vp([a,f.pathname]),pathnameBase:Vce(Vp([a,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(a=Vp([a,f.pathnameBase]))}return o}function NT(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=Uce(t.path,t.caseSensitive,t.end),i=e.match(r);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:n.reduce((l,{paramName:d,isOptional:f},m)=>{if(d==="*"){let g=c[m]||"";o=a.slice(0,a.length-g.length).replace(/(.)\/+$/,"$1")}const p=c[m];return f&&!p?l[d]=void 0:l[d]=(p||"").replace(/%2F/g,"/"),l},{}),pathname:a,pathnameBase:o,pattern:t}}function Uce(t,e=!1,r=!0){Sf(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let n=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,u)=>(n.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(n.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function $ce(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Sf(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Zp(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}var Hce=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function Qce(t,e="/"){let{pathname:r,search:n="",hash:i=""}=typeof t=="string"?Ny(t):t,a;return r?(r=r.replace(/\/\/+/g,"/"),r.startsWith("/")?a=C8(r.substring(1),"/"):a=C8(r,e)):a=e,{pathname:a,search:Kce(n),hash:Gce(i)}}function C8(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function Xk(t,e,r,n){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function zce(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function iR(t){let e=zce(t);return e.map((r,n)=>n===e.length-1?r.pathname:r.pathnameBase)}function sR(t,e,r,n=!1){let i;typeof t=="string"?i=Ny(t):(i={...t},Jl(!i.pathname||!i.pathname.includes("?"),Xk("?","pathname","search",i)),Jl(!i.pathname||!i.pathname.includes("#"),Xk("#","pathname","hash",i)),Jl(!i.search||!i.search.includes("#"),Xk("#","search","hash",i)));let a=t===""||i.pathname==="",o=a?"/":i.pathname,c;if(o==null)c=r;else{let f=e.length-1;if(!n&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),f-=1;i.pathname=m.join("/")}c=f>=0?e[f]:"/"}let u=Qce(i,c),l=o&&o!=="/"&&o.endsWith("/"),d=(a||o===".")&&r.endsWith("/");return!u.pathname.endsWith("/")&&(l||d)&&(u.pathname+="/"),u}var Vp=t=>t.join("/").replace(/\/\/+/g,"/"),Vce=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Kce=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Gce=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,Wce=class{constructor(t,e,r,n=!1){this.status=t,this.statusText=e||"",this.internal=n,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}};function Yce(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function qce(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var pY=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function gY(t,e){let r=t;if(typeof r!="string"||!Hce.test(r))return{absoluteURL:void 0,isExternal:!1,to:r};let n=r,i=!1;if(pY)try{let a=new URL(window.location.href),o=r.startsWith("//")?new URL(a.protocol+r):new URL(r),c=Zp(o.pathname,e);o.origin===a.origin&&c!=null?r=c+o.search+o.hash:i=!0}catch{Sf(!1,`<Link to="${r}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:n,isExternal:i,to:r}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var vY=["POST","PUT","PATCH","DELETE"];new Set(vY);var Xce=["GET",...vY];new Set(Xce);var d1=T.createContext(null);d1.displayName="DataRouter";var FN=T.createContext(null);FN.displayName="DataRouterState";var Zce=T.createContext(!1),yY=T.createContext({isTransitioning:!1});yY.displayName="ViewTransition";var Jce=T.createContext(new Map);Jce.displayName="Fetchers";var eue=T.createContext(null);eue.displayName="Await";var Nf=T.createContext(null);Nf.displayName="Navigation";var k_=T.createContext(null);k_.displayName="Location";var Vm=T.createContext({outlet:null,matches:[],isDataRoute:!1});Vm.displayName="Route";var aR=T.createContext(null);aR.displayName="RouteError";var xY="REACT_ROUTER_ERROR",tue="REDIRECT",rue="ROUTE_ERROR_RESPONSE";function nue(t){if(t.startsWith(`${xY}:${tue}:{`))try{let e=JSON.parse(t.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function iue(t){if(t.startsWith(`${xY}:${rue}:{`))try{let e=JSON.parse(t.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new Wce(e.status,e.statusText,e.data)}catch{}}function sue(t,{relative:e}={}){Jl(h1(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=T.useContext(Nf),{hash:i,pathname:a,search:o}=L_(t,{relative:e}),c=a;return r!=="/"&&(c=a==="/"?r:Vp([r,a])),n.createHref({pathname:c,search:o,hash:i})}function h1(){return T.useContext(k_)!=null}function kf(){return Jl(h1(),"useLocation() may be used only in the context of a <Router> component."),T.useContext(k_).location}var bY="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function wY(t){T.useContext(Nf).static||T.useLayoutEffect(t)}function Fc(){let{isDataRoute:t}=T.useContext(Vm);return t?vue():aue()}function aue(){Jl(h1(),"useNavigate() may be used only in the context of a <Router> component.");let t=T.useContext(d1),{basename:e,navigator:r}=T.useContext(Nf),{matches:n}=T.useContext(Vm),{pathname:i}=kf(),a=JSON.stringify(iR(n)),o=T.useRef(!1);return wY(()=>{o.current=!0}),T.useCallback((u,l={})=>{if(Sf(o.current,bY),!o.current)return;if(typeof u=="number"){r.go(u);return}let d=sR(u,JSON.parse(a),i,l.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Vp([e,d.pathname])),(l.replace?r.replace:r.push)(d,l.state,l)},[e,r,a,i,t])}T.createContext(null);function Kh(){let{matches:t}=T.useContext(Vm),e=t[t.length-1];return e?e.params:{}}function L_(t,{relative:e}={}){let{matches:r}=T.useContext(Vm),{pathname:n}=kf(),i=JSON.stringify(iR(r));return T.useMemo(()=>sR(t,JSON.parse(i),n,e==="path"),[t,i,n,e])}function oue(t,e){return _Y(t,e)}function _Y(t,e,r,n,i){Jl(h1(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=T.useContext(Nf),{matches:o}=T.useContext(Vm),c=o[o.length-1],u=c?c.params:{},l=c?c.pathname:"/",d=c?c.pathnameBase:"/",f=c&&c.route;{let _=f&&f.path||"";SY(l,!f||_.endsWith("*")||_.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${l}" (under <Route path="${_}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${_}"> to <Route path="${_==="/"?"*":`${_}/*`}">.`)}let m=kf(),p;if(e){let _=typeof e=="string"?Ny(e):e;Jl(d==="/"||_.pathname?.startsWith(d),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${_.pathname}" was given in the \`location\` prop.`),p=_}else p=m;let g=p.pathname||"/",y=g;if(d!=="/"){let _=d.replace(/^\//,"").split("/");y="/"+g.replace(/^\//,"").split("/").slice(_.length).join("/")}let x=fY(t,{pathname:y});Sf(f||x!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),Sf(x==null||x[x.length-1].route.element!==void 0||x[x.length-1].route.Component!==void 0||x[x.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let w=hue(x&&x.map(_=>Object.assign({},_,{params:Object.assign({},u,_.params),pathname:Vp([d,a.encodeLocation?a.encodeLocation(_.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?d:Vp([d,a.encodeLocation?a.encodeLocation(_.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:_.pathnameBase])})),o,r,n,i);return e&&w?T.createElement(k_.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},w):w}function lue(){let t=gue(),e=Yce(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,n="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:n},a={padding:"2px 4px",backgroundColor:n},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=T.createElement(T.Fragment,null,T.createElement("p",null," Hey developer "),T.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",T.createElement("code",{style:a},"ErrorBoundary")," or"," ",T.createElement("code",{style:a},"errorElement")," prop on your route.")),T.createElement(T.Fragment,null,T.createElement("h2",null,"Unexpected Application Error!"),T.createElement("h3",{style:{fontStyle:"italic"}},e),r?T.createElement("pre",{style:i},r):null,o)}var cue=T.createElement(lue,null),EY=class extends T.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const r=iue(t.digest);r&&(t=r)}let e=t!==void 0?T.createElement(Vm.Provider,{value:this.props.routeContext},T.createElement(aR.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?T.createElement(uue,{error:t},e):e}};EY.contextType=Zce;var Zk=new WeakMap;function uue({children:t,error:e}){let{basename:r}=T.useContext(Nf);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let n=nue(e.digest);if(n){let i=Zk.get(e);if(i)throw i;let a=gY(n.location,r);if(pY&&!Zk.get(e))if(a.isExternal||n.reloadDocument)window.location.href=a.absoluteURL||a.to;else{const o=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(a.to,{replace:n.replace}));throw Zk.set(e,o),o}return T.createElement("meta",{httpEquiv:"refresh",content:`0;url=${a.absoluteURL||a.to}`})}}return t}function due({routeContext:t,match:e,children:r}){let n=T.useContext(d1);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),T.createElement(Vm.Provider,{value:t},r)}function hue(t,e=[],r=null,n=null,i=null){if(t==null){if(!r)return null;if(r.errors)t=r.matches;else if(e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let a=t,o=r?.errors;if(o!=null){let d=a.findIndex(f=>f.route.id&&o?.[f.route.id]!==void 0);Jl(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),a=a.slice(0,Math.min(a.length,d+1))}let c=!1,u=-1;if(r)for(let d=0;d<a.length;d++){let f=a[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:m,errors:p}=r,g=f.route.loader&&!m.hasOwnProperty(f.route.id)&&(!p||p[f.route.id]===void 0);if(f.route.lazy||g){c=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}let l=r&&n?(d,f)=>{n(d,{location:r.location,params:r.matches?.[0]?.params??{},unstable_pattern:qce(r.matches),errorInfo:f})}:void 0;return a.reduceRight((d,f,m)=>{let p,g=!1,y=null,x=null;r&&(p=o&&f.route.id?o[f.route.id]:void 0,y=f.route.errorElement||cue,c&&(u<0&&m===0?(SY("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),g=!0,x=null):u===m&&(g=!0,x=f.route.hydrateFallbackElement||null)));let w=e.concat(a.slice(0,m+1)),_=()=>{let E;return p?E=y:g?E=x:f.route.Component?E=T.createElement(f.route.Component,null):f.route.element?E=f.route.element:E=d,T.createElement(due,{match:f,routeContext:{outlet:d,matches:w,isDataRoute:r!=null},children:E})};return r&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?T.createElement(EY,{location:r.location,revalidation:r.revalidation,component:y,error:p,children:_(),routeContext:{outlet:null,matches:w,isDataRoute:!0},onError:l}):_()},null)}function oR(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function fue(t){let e=T.useContext(d1);return Jl(e,oR(t)),e}function mue(t){let e=T.useContext(FN);return Jl(e,oR(t)),e}function Aue(t){let e=T.useContext(Vm);return Jl(e,oR(t)),e}function lR(t){let e=Aue(t),r=e.matches[e.matches.length-1];return Jl(r.route.id,`${t} can only be used on routes that contain a unique "id"`),r.route.id}function pue(){return lR("useRouteId")}function gue(){let t=T.useContext(aR),e=mue("useRouteError"),r=lR("useRouteError");return t!==void 0?t:e.errors?.[r]}function vue(){let{router:t}=fue("useNavigate"),e=lR("useNavigate"),r=T.useRef(!1);return wY(()=>{r.current=!0}),T.useCallback(async(i,a={})=>{Sf(r.current,bY),r.current&&(typeof i=="number"?await t.navigate(i):await t.navigate(i,{fromRouteId:e,...a}))},[t,e])}var N8={};function SY(t,e,r){!e&&!N8[t]&&(N8[t]=!0,Sf(!1,r))}T.memo(yue);function yue({routes:t,future:e,state:r,onError:n}){return _Y(t,void 0,r,n,e)}function jY({to:t,replace:e,state:r,relative:n}){Jl(h1(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=T.useContext(Nf);Sf(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=T.useContext(Vm),{pathname:o}=kf(),c=Fc(),u=sR(t,iR(a),o,n==="path"),l=JSON.stringify(u);return T.useEffect(()=>{c(JSON.parse(l),{replace:e,state:r,relative:n})},[c,l,n,e,r]),null}function ps(t){Jl(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function xue({basename:t="/",children:e=null,location:r,navigationType:n="POP",navigator:i,static:a=!1,unstable_useTransitions:o}){Jl(!h1(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=t.replace(/^\/*/,"/"),u=T.useMemo(()=>({basename:c,navigator:i,static:a,unstable_useTransitions:o,future:{}}),[c,i,a,o]);typeof r=="string"&&(r=Ny(r));let{pathname:l="/",search:d="",hash:f="",state:m=null,key:p="default"}=r,g=T.useMemo(()=>{let y=Zp(l,c);return y==null?null:{location:{pathname:y,search:d,hash:f,state:m,key:p},navigationType:n}},[c,l,d,f,m,p,n]);return Sf(g!=null,`<Router basename="${c}"> is not able to match the URL "${l}${d}${f}" because it does not start with the basename, so the <Router> won't render anything.`),g==null?null:T.createElement(Nf.Provider,{value:u},T.createElement(k_.Provider,{children:e,value:g}))}function bue({children:t,location:e}){return oue(gB(t),e)}function gB(t,e=[]){let r=[];return T.Children.forEach(t,(n,i)=>{if(!T.isValidElement(n))return;let a=[...e,i];if(n.type===T.Fragment){r.push.apply(r,gB(n.props.children,a));return}Jl(n.type===ps,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Jl(!n.props.index||!n.props.children,"An index route cannot have child routes.");let o={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=gB(n.props.children,a)),r.push(o)}),r}var ZS="get",JS="application/x-www-form-urlencoded";function UN(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function wue(t){return UN(t)&&t.tagName.toLowerCase()==="button"}function _ue(t){return UN(t)&&t.tagName.toLowerCase()==="form"}function Eue(t){return UN(t)&&t.tagName.toLowerCase()==="input"}function Sue(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function jue(t,e){return t.button===0&&(!e||e==="_self")&&!Sue(t)}function vB(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,r)=>{let n=t[r];return e.concat(Array.isArray(n)?n.map(i=>[r,i]):[[r,n]])},[]))}function Tue(t,e){let r=vB(t);return e&&e.forEach((n,i)=>{r.has(i)||e.getAll(i).forEach(a=>{r.append(i,a)})}),r}var $E=null;function Cue(){if($E===null)try{new FormData(document.createElement("form"),0),$E=!1}catch{$E=!0}return $E}var Nue=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Jk(t){return t!=null&&!Nue.has(t)?(Sf(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${JS}"`),null):t}function kue(t,e){let r,n,i,a,o;if(_ue(t)){let c=t.getAttribute("action");n=c?Zp(c,e):null,r=t.getAttribute("method")||ZS,i=Jk(t.getAttribute("enctype"))||JS,a=new FormData(t)}else if(wue(t)||Eue(t)&&(t.type==="submit"||t.type==="image")){let c=t.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||c.getAttribute("action");if(n=u?Zp(u,e):null,r=t.getAttribute("formmethod")||c.getAttribute("method")||ZS,i=Jk(t.getAttribute("formenctype"))||Jk(c.getAttribute("enctype"))||JS,a=new FormData(c,t),!Cue()){let{name:l,type:d,value:f}=t;if(d==="image"){let m=l?`${l}.`:"";a.append(`${m}x`,"0"),a.append(`${m}y`,"0")}else l&&a.append(l,f)}}else{if(UN(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=ZS,n=null,i=JS,o=t}return a&&i==="text/plain"&&(o=a,a=void 0),{action:n,method:r.toLowerCase(),encType:i,formData:a,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function cR(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Lue(t,e,r,n){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r?i.pathname.endsWith("/")?i.pathname=`${i.pathname}_.${n}`:i.pathname=`${i.pathname}.${n}`:i.pathname==="/"?i.pathname=`_root.${n}`:e&&Zp(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${n}`,i}async function Iue(t,e){if(t.id in e)return e[t.id];try{let r=await import(t.module);return e[t.id]=r,r}catch(r){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Bue(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function Pue(t,e,r){let n=await Promise.all(t.map(async i=>{let a=e.routes[i.route.id];if(a){let o=await Iue(a,r);return o.links?o.links():[]}return[]}));return Mue(n.flat(1).filter(Bue).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function k8(t,e,r,n,i,a){let o=(u,l)=>r[l]?u.route.id!==r[l].route.id:!0,c=(u,l)=>r[l].pathname!==u.pathname||r[l].route.path?.endsWith("*")&&r[l].params["*"]!==u.params["*"];return a==="assets"?e.filter((u,l)=>o(u,l)||c(u,l)):a==="data"?e.filter((u,l)=>{let d=n.routes[u.route.id];if(!d||!d.hasLoader)return!1;if(o(u,l)||c(u,l))return!0;if(u.route.shouldRevalidate){let f=u.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function Oue(t,e,{includeHydrateFallback:r}={}){return Rue(t.map(n=>{let i=e.routes[n.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),r&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function Rue(t){return[...new Set(t)]}function Due(t){let e={},r=Object.keys(t).sort();for(let n of r)e[n]=t[n];return e}function Mue(t,e){let r=new Set;return new Set(e),t.reduce((n,i)=>{let a=JSON.stringify(Due(i));return r.has(a)||(r.add(a),n.push({key:a,link:i})),n},[])}function TY(){let t=T.useContext(d1);return cR(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function Fue(){let t=T.useContext(FN);return cR(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var uR=T.createContext(void 0);uR.displayName="FrameworkContext";function CY(){let t=T.useContext(uR);return cR(t,"You must render this element inside a <HydratedRouter> element"),t}function Uue(t,e){let r=T.useContext(uR),[n,i]=T.useState(!1),[a,o]=T.useState(!1),{onFocus:c,onBlur:u,onMouseEnter:l,onMouseLeave:d,onTouchStart:f}=e,m=T.useRef(null);T.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let y=w=>{w.forEach(_=>{o(_.isIntersecting)})},x=new IntersectionObserver(y,{threshold:.5});return m.current&&x.observe(m.current),()=>{x.disconnect()}}},[t]),T.useEffect(()=>{if(n){let y=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(y)}}},[n]);let p=()=>{i(!0)},g=()=>{i(!1),o(!1)};return r?t!=="intent"?[a,m,{}]:[a,m,{onFocus:X1(c,p),onBlur:X1(u,g),onMouseEnter:X1(l,p),onMouseLeave:X1(d,g),onTouchStart:X1(f,p)}]:[!1,m,{}]}function X1(t,e){return r=>{t&&t(r),r.defaultPrevented||e(r)}}function $ue({page:t,...e}){let{router:r}=TY(),n=T.useMemo(()=>fY(r.routes,t,r.basename),[r.routes,t,r.basename]);return n?T.createElement(Que,{page:t,matches:n,...e}):null}function Hue(t){let{manifest:e,routeModules:r}=CY(),[n,i]=T.useState([]);return T.useEffect(()=>{let a=!1;return Pue(t,e,r).then(o=>{a||i(o)}),()=>{a=!0}},[t,e,r]),n}function Que({page:t,matches:e,...r}){let n=kf(),{future:i,manifest:a,routeModules:o}=CY(),{basename:c}=TY(),{loaderData:u,matches:l}=Fue(),d=T.useMemo(()=>k8(t,e,l,a,n,"data"),[t,e,l,a,n]),f=T.useMemo(()=>k8(t,e,l,a,n,"assets"),[t,e,l,a,n]),m=T.useMemo(()=>{if(t===n.pathname+n.search+n.hash)return[];let y=new Set,x=!1;if(e.forEach(_=>{let E=a.routes[_.route.id];!E||!E.hasLoader||(!d.some(N=>N.route.id===_.route.id)&&_.route.id in u&&o[_.route.id]?.shouldRevalidate||E.hasClientLoader?x=!0:y.add(_.route.id))}),y.size===0)return[];let w=Lue(t,c,i.unstable_trailingSlashAwareDataRequests,"data");return x&&y.size>0&&w.searchParams.set("_routes",e.filter(_=>y.has(_.route.id)).map(_=>_.route.id).join(",")),[w.pathname+w.search]},[c,i.unstable_trailingSlashAwareDataRequests,u,n,a,d,e,t,o]),p=T.useMemo(()=>Oue(f,a),[f,a]),g=Hue(f);return T.createElement(T.Fragment,null,m.map(y=>T.createElement("link",{key:y,rel:"prefetch",as:"fetch",href:y,...r})),p.map(y=>T.createElement("link",{key:y,rel:"modulepreload",href:y,...r})),g.map(({key:y,link:x})=>T.createElement("link",{key:y,nonce:r.nonce,...x,crossOrigin:x.crossOrigin??r.crossOrigin})))}function zue(...t){return e=>{t.forEach(r=>{typeof r=="function"?r(e):r!=null&&(r.current=e)})}}var Vue=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Vue&&(window.__reactRouterVersion="7.13.0")}catch{}function Kue({basename:t,children:e,unstable_useTransitions:r,window:n}){let i=T.useRef();i.current==null&&(i.current=Sce({window:n,v5Compat:!0}));let a=i.current,[o,c]=T.useState({action:a.action,location:a.location}),u=T.useCallback(l=>{r===!1?c(l):T.startTransition(()=>c(l))},[r]);return T.useLayoutEffect(()=>a.listen(u),[a,u]),T.createElement(xue,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:a,unstable_useTransitions:r})}var NY=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,rs=T.forwardRef(function({onClick:e,discover:r="render",prefetch:n="none",relative:i,reloadDocument:a,replace:o,state:c,target:u,to:l,preventScrollReset:d,viewTransition:f,unstable_defaultShouldRevalidate:m,...p},g){let{basename:y,unstable_useTransitions:x}=T.useContext(Nf),w=typeof l=="string"&&NY.test(l),_=gY(l,y);l=_.to;let E=sue(l,{relative:i}),[N,C,I]=Uue(n,p),D=que(l,{replace:o,state:c,target:u,preventScrollReset:d,relative:i,viewTransition:f,unstable_defaultShouldRevalidate:m,unstable_useTransitions:x});function U(q){e&&e(q),q.defaultPrevented||D(q)}let G=T.createElement("a",{...p,...I,href:_.absoluteURL||E,onClick:_.isExternal||a?e:U,ref:zue(g,C),target:u,"data-discover":!w&&r==="render"?"true":void 0});return N&&!w?T.createElement(T.Fragment,null,G,T.createElement($ue,{page:E})):G});rs.displayName="Link";var Gue=T.forwardRef(function({"aria-current":e="page",caseSensitive:r=!1,className:n="",end:i=!1,style:a,to:o,viewTransition:c,children:u,...l},d){let f=L_(o,{relative:l.relative}),m=kf(),p=T.useContext(FN),{navigator:g,basename:y}=T.useContext(Nf),x=p!=null&&tde(f)&&c===!0,w=g.encodeLocation?g.encodeLocation(f).pathname:f.pathname,_=m.pathname,E=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;r||(_=_.toLowerCase(),E=E?E.toLowerCase():null,w=w.toLowerCase()),E&&y&&(E=Zp(E,y)||E);const N=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let C=_===w||!i&&_.startsWith(w)&&_.charAt(N)==="/",I=E!=null&&(E===w||!i&&E.startsWith(w)&&E.charAt(w.length)==="/"),D={isActive:C,isPending:I,isTransitioning:x},U=C?e:void 0,G;typeof n=="function"?G=n(D):G=[n,C?"active":null,I?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let q=typeof a=="function"?a(D):a;return T.createElement(rs,{...l,"aria-current":U,className:G,ref:d,style:q,to:o,viewTransition:c},typeof u=="function"?u(D):u)});Gue.displayName="NavLink";var Wue=T.forwardRef(({discover:t="render",fetcherKey:e,navigate:r,reloadDocument:n,replace:i,state:a,method:o=ZS,action:c,onSubmit:u,relative:l,preventScrollReset:d,viewTransition:f,unstable_defaultShouldRevalidate:m,...p},g)=>{let{unstable_useTransitions:y}=T.useContext(Nf),x=Jue(),w=ede(c,{relative:l}),_=o.toLowerCase()==="get"?"get":"post",E=typeof c=="string"&&NY.test(c),N=C=>{if(u&&u(C),C.defaultPrevented)return;C.preventDefault();let I=C.nativeEvent.submitter,D=I?.getAttribute("formmethod")||o,U=()=>x(I||C.currentTarget,{fetcherKey:e,method:D,navigate:r,replace:i,state:a,relative:l,preventScrollReset:d,viewTransition:f,unstable_defaultShouldRevalidate:m});y&&r!==!1?T.startTransition(()=>U()):U()};return T.createElement("form",{ref:g,method:_,action:w,onSubmit:n?u:N,...p,"data-discover":!E&&t==="render"?"true":void 0})});Wue.displayName="Form";function Yue(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function kY(t){let e=T.useContext(d1);return Jl(e,Yue(t)),e}function que(t,{target:e,replace:r,state:n,preventScrollReset:i,relative:a,viewTransition:o,unstable_defaultShouldRevalidate:c,unstable_useTransitions:u}={}){let l=Fc(),d=kf(),f=L_(t,{relative:a});return T.useCallback(m=>{if(jue(m,e)){m.preventDefault();let p=r!==void 0?r:N2(d)===N2(f),g=()=>l(t,{replace:p,state:n,preventScrollReset:i,relative:a,viewTransition:o,unstable_defaultShouldRevalidate:c});u?T.startTransition(()=>g()):g()}},[d,l,f,r,n,e,t,i,a,o,c,u])}function ky(t){Sf(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=T.useRef(vB(t)),r=T.useRef(!1),n=kf(),i=T.useMemo(()=>Tue(n.search,r.current?null:e.current),[n.search]),a=Fc(),o=T.useCallback((c,u)=>{const l=vB(typeof c=="function"?c(new URLSearchParams(i)):c);r.current=!0,a("?"+l,u)},[a,i]);return[i,o]}var Xue=0,Zue=()=>`__${String(++Xue)}__`;function Jue(){let{router:t}=kY("useSubmit"),{basename:e}=T.useContext(Nf),r=pue(),n=t.fetch,i=t.navigate;return T.useCallback(async(a,o={})=>{let{action:c,method:u,encType:l,formData:d,body:f}=kue(a,e);if(o.navigate===!1){let m=o.fetcherKey||Zue();await n(m,r,o.action||c,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:d,body:f,formMethod:o.method||u,formEncType:o.encType||l,flushSync:o.flushSync})}else await i(o.action||c,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:d,body:f,formMethod:o.method||u,formEncType:o.encType||l,replace:o.replace,state:o.state,fromRouteId:r,flushSync:o.flushSync,viewTransition:o.viewTransition})},[n,i,e,r])}function ede(t,{relative:e}={}){let{basename:r}=T.useContext(Nf),n=T.useContext(Vm);Jl(n,"useFormAction must be used inside a RouteContext");let[i]=n.matches.slice(-1),a={...L_(t||".",{relative:e})},o=kf();if(t==null){a.search=o.search;let c=new URLSearchParams(a.search),u=c.getAll("index");if(u.some(d=>d==="")){c.delete("index"),u.filter(f=>f).forEach(f=>c.append("index",f));let d=c.toString();a.search=d?`?${d}`:""}}return(!t||t===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(a.pathname=a.pathname==="/"?r:Vp([r,a.pathname])),N2(a)}function tde(t,{relative:e}={}){let r=T.useContext(yY);Jl(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=kY("useViewTransitionState"),i=L_(t,{relative:e});if(!r.isTransitioning)return!1;let a=Zp(r.currentLocation.pathname,n)||r.currentLocation.pathname,o=Zp(r.nextLocation.pathname,n)||r.nextLocation.pathname;return NT(i.pathname,o)!=null||NT(i.pathname,a)!=null}var C0=hY();const LY=(...t)=>t.filter((e,r,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===r).join(" ").trim();const rde=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const nde=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,r,n)=>n?n.toUpperCase():r.toLowerCase());const L8=t=>{const e=nde(t);return e.charAt(0).toUpperCase()+e.slice(1)};var ide={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const sde=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};const ade=T.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:i="",children:a,iconNode:o,...c},u)=>T.createElement("svg",{ref:u,...ide,width:e,height:e,stroke:t,strokeWidth:n?Number(r)*24/Number(e):r,className:LY("lucide",i),...!a&&!sde(c)&&{"aria-hidden":"true"},...c},[...o.map(([l,d])=>T.createElement(l,d)),...Array.isArray(a)?a:[a]]));const vn=(t,e)=>{const r=T.forwardRef(({className:n,...i},a)=>T.createElement(ade,{ref:a,iconNode:e,className:LY(`lucide-${rde(L8(t))}`,`lucide-${t}`,n),...i}));return r.displayName=L8(t),r};const ode=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],IY=vn("archive",ode);const lde=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],tp=vn("arrow-left",lde);const cde=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Fh=vn("arrow-right",cde);const ude=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],$N=vn("award",ude);const dde=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],hde=vn("bell",dde);const fde=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],dR=vn("building-2",fde);const mde=[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]],Ade=vn("building",mde);const pde=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],BY=vn("calculator",pde);const gde=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],ml=vn("calendar",gde);const vde=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],k2=vn("camera",vde);const yde=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],kT=vn("chart-column",yde);const xde=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],la=vn("check",xde);const bde=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],F0=vn("chevron-down",bde);const wde=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],LT=vn("chevron-left",wde);const _de=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],U0=vn("chevron-right",_de);const Ede=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Db=vn("chevron-up",Ede);const Sde=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],$0=vn("circle-alert",Sde);const jde=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],r2=vn("circle-check-big",jde);const Tde=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],vb=vn("circle-check",Tde);const Cde=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],Nde=vn("circle-plus",Cde);const kde=[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Lde=vn("circle-play",kde);const Ide=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{x:"9",y:"9",width:"6",height:"6",rx:"1",key:"1ssd4o"}]],Bde=vn("circle-stop",Ide);const Pde=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],I8=vn("circle",Pde);const Ode=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],zh=vn("clock",Ode);const Rde=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Mb=vn("copy",Rde);const Dde=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Mde=vn("credit-card",Dde);const Fde=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],Ude=vn("crown",Fde);const $de=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Gh=vn("dollar-sign",$de);const Hde=[["path",{d:"M10 12h.01",key:"1kxr2c"}],["path",{d:"M18 20V6a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v14",key:"36qu9e"}],["path",{d:"M2 20h20",key:"owomy5"}]],PY=vn("door-closed",Hde);const Qde=[["path",{d:"M11 20H2",key:"nlcfvz"}],["path",{d:"M11 4.562v16.157a1 1 0 0 0 1.242.97L19 20V5.562a2 2 0 0 0-1.515-1.94l-4-1A2 2 0 0 0 11 4.561z",key:"au4z13"}],["path",{d:"M11 4H8a2 2 0 0 0-2 2v14",key:"74r1mk"}],["path",{d:"M14 12h.01",key:"1jfl7z"}],["path",{d:"M22 20h-3",key:"vhrsz"}]],zde=vn("door-open",Qde);const Vde=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],yf=vn("download",Vde);const Kde=[["path",{d:"M17.596 12.768a2 2 0 1 0 2.829-2.829l-1.768-1.767a2 2 0 0 0 2.828-2.829l-2.828-2.828a2 2 0 0 0-2.829 2.828l-1.767-1.768a2 2 0 1 0-2.829 2.829z",key:"9m4mmf"}],["path",{d:"m2.5 21.5 1.4-1.4",key:"17g3f0"}],["path",{d:"m20.1 3.9 1.4-1.4",key:"1qn309"}],["path",{d:"M5.343 21.485a2 2 0 1 0 2.829-2.828l1.767 1.768a2 2 0 1 0 2.829-2.829l-6.364-6.364a2 2 0 1 0-2.829 2.829l1.768 1.767a2 2 0 0 0-2.828 2.829z",key:"1t2c92"}],["path",{d:"m9.6 14.4 4.8-4.8",key:"6umqxw"}]],Gde=vn("dumbbell",Kde);const Wde=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Fb=vn("external-link",Wde);const Yde=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],H0=vn("eye",Yde);const qde=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],I_=vn("facebook",qde);const Xde=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Ub=vn("file-text",Xde);const Zde=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]],B8=vn("file",Zde);const Jde=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]],Up=vn("film",Jde);const ehe=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],hR=vn("funnel",ehe);const the=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],f1=vn("globe",the);const rhe=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],P8=vn("heart",rhe);const nhe=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],tm=vn("image",nhe);const ihe=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],HN=vn("instagram",ihe);const she=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],e4=vn("layers",she);const ahe=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],ohe=vn("layout-dashboard",ahe);const lhe=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],che=vn("lightbulb",lhe);const uhe=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],OY=vn("link",uhe);const dhe=[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]],hhe=vn("linkedin",dhe);const fhe=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],QA=vn("loader-circle",fhe);const mhe=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],RY=vn("loader",mhe);const Ahe=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],$b=vn("lock",Ahe);const phe=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],yB=vn("log-out",phe);const ghe=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],tu=vn("mail",ghe);const vhe=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],md=vn("map-pin",vhe);const yhe=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]],xhe=vn("maximize",yhe);const bhe=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],DY=vn("menu",bhe);const whe=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],_he=vn("message-circle",whe);const Ehe=[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]],She=vn("minimize",Ehe);const jhe=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],The=vn("music",jhe);const Che=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],Nhe=vn("navigation",Che);const khe=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],N0=vn("package",khe);const Lhe=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Ihe=vn("pen-line",Lhe);const Bhe=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],xB=vn("pen",Bhe);const Phe=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],my=vn("phone",Phe);const Ohe=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Qd=vn("play",Ohe);const Rhe=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],jf=vn("plus",Rhe);const Dhe=[["path",{d:"M16.247 7.761a6 6 0 0 1 0 8.478",key:"1fwjs5"}],["path",{d:"M19.075 4.933a10 10 0 0 1 0 14.134",key:"ehdyv1"}],["path",{d:"M4.925 19.067a10 10 0 0 1 0-14.134",key:"1q22gi"}],["path",{d:"M7.753 16.239a6 6 0 0 1 0-8.478",key:"r2q7qm"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Hb=vn("radio",Dhe);const Mhe=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Q0=vn("refresh-cw",Mhe);const Fhe=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],Uhe=vn("rocket",Fhe);const $he=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],MY=vn("save",$he);const Hhe=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],IT=vn("search",Hhe);const Qhe=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Qb=vn("send",Qhe);const zhe=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Vhe=vn("settings",zhe);const Khe=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],FY=vn("share-2",Khe);const Ghe=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],B0=vn("shield",Ghe);const Whe=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],n2=vn("shopping-cart",Whe);const Yhe=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],nm=vn("sparkles",Yhe);const qhe=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Xhe=vn("square-pen",qhe);const Zhe=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Ay=vn("star",Zhe);const Jhe=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],fR=vn("tag",Jhe);const efe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],UY=vn("target",efe);const tfe=[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]],BT=vn("ticket",tfe);const rfe=[["circle",{cx:"9",cy:"12",r:"3",key:"u3jwor"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],nfe=vn("toggle-left",rfe);const ife=[["circle",{cx:"15",cy:"12",r:"3",key:"1afu0r"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],sfe=vn("toggle-right",ife);const afe=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Jp=vn("trash-2",afe);const ofe=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Tf=vn("trending-up",ofe);const lfe=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],PT=vn("triangle-alert",lfe);const cfe=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],$Y=vn("trophy",cfe);const ufe=[["path",{d:"m17 2-5 5-5-5",key:"16satq"}],["rect",{width:"20",height:"15",x:"2",y:"7",rx:"2",key:"1e6viu"}]],$p=vn("tv",ufe);const dfe=[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]],hfe=vn("twitter",dfe);const ffe=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],bB=vn("upload",ffe);const mfe=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],eg=vn("user",mfe);const Afe=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],nh=vn("users",Afe);const pfe=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],bh=vn("video",pfe);const gfe=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],vfe=vn("wifi-off",gfe);const yfe=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],tg=vn("x",yfe);const xfe=[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]],HY=vn("youtube",xfe);const bfe=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],zb=vn("zap",bfe),mR=T.createContext({});function B_(t){const e=T.useRef(null);return e.current===null&&(e.current=t()),e.current}const QY=typeof window<"u",AR=QY?T.useLayoutEffect:T.useEffect,QN=T.createContext(null);function pR(t,e){t.indexOf(e)===-1&&t.push(e)}function gR(t,e){const r=t.indexOf(e);r>-1&&t.splice(r,1)}const WA=(t,e,r)=>r>e?e:r<t?t:r;let vR=()=>{};const rg={},zY=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function VY(t){return typeof t=="object"&&t!==null}const KY=t=>/^0[^.\s]+$/u.test(t);function yR(t){let e;return()=>(e===void 0&&(e=t()),e)}const rm=t=>t,wfe=(t,e)=>r=>e(t(r)),P_=(...t)=>t.reduce(wfe),L2=(t,e,r)=>{const n=e-t;return n===0?1:(r-t)/n};class xR{constructor(){this.subscriptions=[]}add(e){return pR(this.subscriptions,e),()=>gR(this.subscriptions,e)}notify(e,r,n){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,r,n);else for(let a=0;a<i;a++){const o=this.subscriptions[a];o&&o(e,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Kp=t=>t*1e3,Jf=t=>t/1e3;function GY(t,e){return e?t*(1e3/e):0}const WY=(t,e,r)=>(((1-3*r+3*e)*t+(3*r-6*e))*t+3*e)*t,_fe=1e-7,Efe=12;function Sfe(t,e,r,n,i){let a,o,c=0;do o=e+(r-e)/2,a=WY(o,n,i)-t,a>0?r=o:e=o;while(Math.abs(a)>_fe&&++c<Efe);return o}function O_(t,e,r,n){if(t===e&&r===n)return rm;const i=a=>Sfe(a,0,1,t,r);return a=>a===0||a===1?a:WY(i(a),e,n)}const YY=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,qY=t=>e=>1-t(1-e),XY=O_(.33,1.53,.69,.99),bR=qY(XY),ZY=YY(bR),JY=t=>(t*=2)<1?.5*bR(t):.5*(2-Math.pow(2,-10*(t-1))),wR=t=>1-Math.sin(Math.acos(t)),eq=qY(wR),tq=YY(wR),jfe=O_(.42,0,1,1),Tfe=O_(0,0,.58,1),rq=O_(.42,0,.58,1),Cfe=t=>Array.isArray(t)&&typeof t[0]!="number",nq=t=>Array.isArray(t)&&typeof t[0]=="number",Nfe={linear:rm,easeIn:jfe,easeInOut:rq,easeOut:Tfe,circIn:wR,circInOut:tq,circOut:eq,backIn:bR,backInOut:ZY,backOut:XY,anticipate:JY},kfe=t=>typeof t=="string",O8=t=>{if(nq(t)){vR(t.length===4);const[e,r,n,i]=t;return O_(e,r,n,i)}else if(kfe(t))return Nfe[t];return t},HE=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function Lfe(t,e){let r=new Set,n=new Set,i=!1,a=!1;const o=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1};function u(d){o.has(d)&&(l.schedule(d),t()),d(c)}const l={schedule:(d,f=!1,m=!1)=>{const g=m&&i?r:n;return f&&o.add(d),g.has(d)||g.add(d),d},cancel:d=>{n.delete(d),o.delete(d)},process:d=>{if(c=d,i){a=!0;return}i=!0,[r,n]=[n,r],r.forEach(u),r.clear(),i=!1,a&&(a=!1,l.process(d))}};return l}const Ife=40;function iq(t,e){let r=!1,n=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>r=!0,o=HE.reduce((E,N)=>(E[N]=Lfe(a),E),{}),{setup:c,read:u,resolveKeyframes:l,preUpdate:d,update:f,preRender:m,render:p,postRender:g}=o,y=()=>{const E=rg.useManualTiming?i.timestamp:performance.now();r=!1,rg.useManualTiming||(i.delta=n?1e3/60:Math.max(Math.min(E-i.timestamp,Ife),1)),i.timestamp=E,i.isProcessing=!0,c.process(i),u.process(i),l.process(i),d.process(i),f.process(i),m.process(i),p.process(i),g.process(i),i.isProcessing=!1,r&&e&&(n=!1,t(y))},x=()=>{r=!0,n=!0,i.isProcessing||t(y)};return{schedule:HE.reduce((E,N)=>{const C=o[N];return E[N]=(I,D=!1,U=!1)=>(r||x(),C.schedule(I,D,U)),E},{}),cancel:E=>{for(let N=0;N<HE.length;N++)o[HE[N]].cancel(E)},state:i,steps:o}}const{schedule:ul,cancel:ng,state:Md,steps:t4}=iq(typeof requestAnimationFrame<"u"?requestAnimationFrame:rm,!0);let ej;function Bfe(){ej=void 0}const gh={now:()=>(ej===void 0&&gh.set(Md.isProcessing||rg.useManualTiming?Md.timestamp:performance.now()),ej),set:t=>{ej=t,queueMicrotask(Bfe)}},sq=t=>e=>typeof e=="string"&&e.startsWith(t),aq=sq("--"),Pfe=sq("var(--"),_R=t=>Pfe(t)?Ofe.test(t.split("/*")[0].trim()):!1,Ofe=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function R8(t){return typeof t!="string"?!1:t.split("/*")[0].includes("var(--")}const m1={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},I2={...m1,transform:t=>WA(0,1,t)},QE={...m1,default:1},i2=t=>Math.round(t*1e5)/1e5,ER=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Rfe(t){return t==null}const Dfe=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,SR=(t,e)=>r=>!!(typeof r=="string"&&Dfe.test(r)&&r.startsWith(t)||e&&!Rfe(r)&&Object.prototype.hasOwnProperty.call(r,e)),oq=(t,e,r)=>n=>{if(typeof n!="string")return n;const[i,a,o,c]=n.match(ER);return{[t]:parseFloat(i),[e]:parseFloat(a),[r]:parseFloat(o),alpha:c!==void 0?parseFloat(c):1}},Mfe=t=>WA(0,255,t),r4={...m1,transform:t=>Math.round(Mfe(t))},Qv={test:SR("rgb","red"),parse:oq("red","green","blue"),transform:({red:t,green:e,blue:r,alpha:n=1})=>"rgba("+r4.transform(t)+", "+r4.transform(e)+", "+r4.transform(r)+", "+i2(I2.transform(n))+")"};function Ffe(t){let e="",r="",n="",i="";return t.length>5?(e=t.substring(1,3),r=t.substring(3,5),n=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),r=t.substring(2,3),n=t.substring(3,4),i=t.substring(4,5),e+=e,r+=r,n+=n,i+=i),{red:parseInt(e,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:i?parseInt(i,16)/255:1}}const wB={test:SR("#"),parse:Ffe,transform:Qv.transform},R_=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),a0=R_("deg"),zA=R_("%"),Ci=R_("px"),Ufe=R_("vh"),$fe=R_("vw"),D8={...zA,parse:t=>zA.parse(t)/100,transform:t=>zA.transform(t*100)},rb={test:SR("hsl","hue"),parse:oq("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:r,alpha:n=1})=>"hsla("+Math.round(t)+", "+zA.transform(i2(e))+", "+zA.transform(i2(r))+", "+i2(I2.transform(n))+")"},Au={test:t=>Qv.test(t)||wB.test(t)||rb.test(t),parse:t=>Qv.test(t)?Qv.parse(t):rb.test(t)?rb.parse(t):wB.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Qv.transform(t):rb.transform(t),getAnimatableNone:t=>{const e=Au.parse(t);return e.alpha=0,Au.transform(e)}},Hfe=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Qfe(t){return isNaN(t)&&typeof t=="string"&&(t.match(ER)?.length||0)+(t.match(Hfe)?.length||0)>0}const lq="number",cq="color",zfe="var",Vfe="var(",M8="${}",Kfe=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function B2(t){const e=t.toString(),r=[],n={color:[],number:[],var:[]},i=[];let a=0;const c=e.replace(Kfe,u=>(Au.test(u)?(n.color.push(a),i.push(cq),r.push(Au.parse(u))):u.startsWith(Vfe)?(n.var.push(a),i.push(zfe),r.push(u)):(n.number.push(a),i.push(lq),r.push(parseFloat(u))),++a,M8)).split(M8);return{values:r,split:c,indexes:n,types:i}}function uq(t){return B2(t).values}function dq(t){const{split:e,types:r}=B2(t),n=e.length;return i=>{let a="";for(let o=0;o<n;o++)if(a+=e[o],i[o]!==void 0){const c=r[o];c===lq?a+=i2(i[o]):c===cq?a+=Au.transform(i[o]):a+=i[o]}return a}}const Gfe=t=>typeof t=="number"?0:Au.test(t)?Au.getAnimatableNone(t):t;function Wfe(t){const e=uq(t);return dq(t)(e.map(Gfe))}const z0={test:Qfe,parse:uq,createTransformer:dq,getAnimatableNone:Wfe};function n4(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(e-t)*6*r:r<1/2?e:r<2/3?t+(e-t)*(2/3-r)*6:t}function Yfe({hue:t,saturation:e,lightness:r,alpha:n}){t/=360,e/=100,r/=100;let i=0,a=0,o=0;if(!e)i=a=o=r;else{const c=r<.5?r*(1+e):r+e-r*e,u=2*r-c;i=n4(u,c,t+1/3),a=n4(u,c,t),o=n4(u,c,t-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(o*255),alpha:n}}function OT(t,e){return r=>r>0?e:t}const fc=(t,e,r)=>t+(e-t)*r,i4=(t,e,r)=>{const n=t*t,i=r*(e*e-n)+n;return i<0?0:Math.sqrt(i)},qfe=[wB,Qv,rb],Xfe=t=>qfe.find(e=>e.test(t));function F8(t){const e=Xfe(t);if(!e)return!1;let r=e.parse(t);return e===rb&&(r=Yfe(r)),r}const U8=(t,e)=>{const r=F8(t),n=F8(e);if(!r||!n)return OT(t,e);const i={...r};return a=>(i.red=i4(r.red,n.red,a),i.green=i4(r.green,n.green,a),i.blue=i4(r.blue,n.blue,a),i.alpha=fc(r.alpha,n.alpha,a),Qv.transform(i))},_B=new Set(["none","hidden"]);function Zfe(t,e){return _B.has(t)?r=>r<=0?t:e:r=>r>=1?e:t}function Jfe(t,e){return r=>fc(t,e,r)}function jR(t){return typeof t=="number"?Jfe:typeof t=="string"?_R(t)?OT:Au.test(t)?U8:rme:Array.isArray(t)?hq:typeof t=="object"?Au.test(t)?U8:eme:OT}function hq(t,e){const r=[...t],n=r.length,i=t.map((a,o)=>jR(a)(a,e[o]));return a=>{for(let o=0;o<n;o++)r[o]=i[o](a);return r}}function eme(t,e){const r={...t,...e},n={};for(const i in r)t[i]!==void 0&&e[i]!==void 0&&(n[i]=jR(t[i])(t[i],e[i]));return i=>{for(const a in n)r[a]=n[a](i);return r}}function tme(t,e){const r=[],n={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const a=e.types[i],o=t.indexes[a][n[a]],c=t.values[o]??0;r[i]=c,n[a]++}return r}const rme=(t,e)=>{const r=z0.createTransformer(e),n=B2(t),i=B2(e);return n.indexes.var.length===i.indexes.var.length&&n.indexes.color.length===i.indexes.color.length&&n.indexes.number.length>=i.indexes.number.length?_B.has(t)&&!i.values.length||_B.has(e)&&!n.values.length?Zfe(t,e):P_(hq(tme(n,i),i.values),r):OT(t,e)};function fq(t,e,r){return typeof t=="number"&&typeof e=="number"&&typeof r=="number"?fc(t,e,r):jR(t)(t,e)}const nme=t=>{const e=({timestamp:r})=>t(r);return{start:(r=!0)=>ul.update(e,r),stop:()=>ng(e),now:()=>Md.isProcessing?Md.timestamp:gh.now()}},mq=(t,e,r=10)=>{let n="";const i=Math.max(Math.round(e/r),2);for(let a=0;a<i;a++)n+=Math.round(t(a/(i-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},RT=2e4;function TR(t){let e=0;const r=50;let n=t.next(e);for(;!n.done&&e<RT;)e+=r,n=t.next(e);return e>=RT?1/0:e}function ime(t,e=100,r){const n=r({...t,keyframes:[0,e]}),i=Math.min(TR(n),RT);return{type:"keyframes",ease:a=>n.next(i*a).value/e,duration:Jf(i)}}const sme=5;function Aq(t,e,r){const n=Math.max(e-sme,0);return GY(r-t(n),e-n)}const Ic={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},s4=.001;function ame({duration:t=Ic.duration,bounce:e=Ic.bounce,velocity:r=Ic.velocity,mass:n=Ic.mass}){let i,a,o=1-e;o=WA(Ic.minDamping,Ic.maxDamping,o),t=WA(Ic.minDuration,Ic.maxDuration,Jf(t)),o<1?(i=l=>{const d=l*o,f=d*t,m=d-r,p=EB(l,o),g=Math.exp(-f);return s4-m/p*g},a=l=>{const f=l*o*t,m=f*r+r,p=Math.pow(o,2)*Math.pow(l,2)*t,g=Math.exp(-f),y=EB(Math.pow(l,2),o);return(-i(l)+s4>0?-1:1)*((m-p)*g)/y}):(i=l=>{const d=Math.exp(-l*t),f=(l-r)*t+1;return-s4+d*f},a=l=>{const d=Math.exp(-l*t),f=(r-l)*(t*t);return d*f});const c=5/t,u=lme(i,a,c);if(t=Kp(t),isNaN(u))return{stiffness:Ic.stiffness,damping:Ic.damping,duration:t};{const l=Math.pow(u,2)*n;return{stiffness:l,damping:o*2*Math.sqrt(n*l),duration:t}}}const ome=12;function lme(t,e,r){let n=r;for(let i=1;i<ome;i++)n=n-t(n)/e(n);return n}function EB(t,e){return t*Math.sqrt(1-e*e)}const cme=["duration","bounce"],ume=["stiffness","damping","mass"];function $8(t,e){return e.some(r=>t[r]!==void 0)}function dme(t){let e={velocity:Ic.velocity,stiffness:Ic.stiffness,damping:Ic.damping,mass:Ic.mass,isResolvedFromDuration:!1,...t};if(!$8(t,ume)&&$8(t,cme))if(t.visualDuration){const r=t.visualDuration,n=2*Math.PI/(r*1.2),i=n*n,a=2*WA(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Ic.mass,stiffness:i,damping:a}}else{const r=ame(t);e={...e,...r,mass:Ic.mass},e.isResolvedFromDuration=!0}return e}function DT(t=Ic.visualDuration,e=Ic.bounce){const r=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:n,restDelta:i}=r;const a=r.keyframes[0],o=r.keyframes[r.keyframes.length-1],c={done:!1,value:a},{stiffness:u,damping:l,mass:d,duration:f,velocity:m,isResolvedFromDuration:p}=dme({...r,velocity:-Jf(r.velocity||0)}),g=m||0,y=l/(2*Math.sqrt(u*d)),x=o-a,w=Jf(Math.sqrt(u/d)),_=Math.abs(x)<5;n||(n=_?Ic.restSpeed.granular:Ic.restSpeed.default),i||(i=_?Ic.restDelta.granular:Ic.restDelta.default);let E;if(y<1){const C=EB(w,y);E=I=>{const D=Math.exp(-y*w*I);return o-D*((g+y*w*x)/C*Math.sin(C*I)+x*Math.cos(C*I))}}else if(y===1)E=C=>o-Math.exp(-w*C)*(x+(g+w*x)*C);else{const C=w*Math.sqrt(y*y-1);E=I=>{const D=Math.exp(-y*w*I),U=Math.min(C*I,300);return o-D*((g+y*w*x)*Math.sinh(U)+C*x*Math.cosh(U))/C}}const N={calculatedDuration:p&&f||null,next:C=>{const I=E(C);if(p)c.done=C>=f;else{let D=C===0?g:0;y<1&&(D=C===0?Kp(g):Aq(E,C,I));const U=Math.abs(D)<=n,G=Math.abs(o-I)<=i;c.done=U&&G}return c.value=c.done?o:I,c},toString:()=>{const C=Math.min(TR(N),RT),I=mq(D=>N.next(C*D).value,C,30);return C+"ms "+I},toTransition:()=>{}};return N}DT.applyToOptions=t=>{const e=ime(t,100,DT);return t.ease=e.ease,t.duration=Kp(e.duration),t.type="keyframes",t};function SB({keyframes:t,velocity:e=0,power:r=.8,timeConstant:n=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:o,min:c,max:u,restDelta:l=.5,restSpeed:d}){const f=t[0],m={done:!1,value:f},p=U=>c!==void 0&&U<c||u!==void 0&&U>u,g=U=>c===void 0?u:u===void 0||Math.abs(c-U)<Math.abs(u-U)?c:u;let y=r*e;const x=f+y,w=o===void 0?x:o(x);w!==x&&(y=w-f);const _=U=>-y*Math.exp(-U/n),E=U=>w+_(U),N=U=>{const G=_(U),q=E(U);m.done=Math.abs(G)<=l,m.value=m.done?w:q};let C,I;const D=U=>{p(m.value)&&(C=U,I=DT({keyframes:[m.value,g(m.value)],velocity:Aq(E,U,m.value),damping:i,stiffness:a,restDelta:l,restSpeed:d}))};return D(0),{calculatedDuration:null,next:U=>{let G=!1;return!I&&C===void 0&&(G=!0,N(U),D(U)),C!==void 0&&U>=C?I.next(U-C):(!G&&N(U),m)}}}function hme(t,e,r){const n=[],i=r||rg.mix||fq,a=t.length-1;for(let o=0;o<a;o++){let c=i(t[o],t[o+1]);if(e){const u=Array.isArray(e)?e[o]||rm:e;c=P_(u,c)}n.push(c)}return n}function pq(t,e,{clamp:r=!0,ease:n,mixer:i}={}){const a=t.length;if(vR(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const c=hme(e,n,i),u=c.length,l=d=>{if(o&&d<t[0])return e[0];let f=0;if(u>1)for(;f<t.length-2&&!(d<t[f+1]);f++);const m=L2(t[f],t[f+1],d);return c[f](m)};return r?d=>l(WA(t[0],t[a-1],d)):l}function fme(t,e){const r=t[t.length-1];for(let n=1;n<=e;n++){const i=L2(0,e,n);t.push(fc(r,1,i))}}function mme(t){const e=[0];return fme(e,t.length-1),e}function Ame(t,e){return t.map(r=>r*e)}function pme(t,e){return t.map(()=>e||rq).splice(0,t.length-1)}function s2({duration:t=300,keyframes:e,times:r,ease:n="easeInOut"}){const i=Cfe(n)?n.map(O8):O8(n),a={done:!1,value:e[0]},o=Ame(r&&r.length===e.length?r:mme(e),t),c=pq(o,e,{ease:Array.isArray(i)?i:pme(e,i)});return{calculatedDuration:t,next:u=>(a.value=c(u),a.done=u>=t,a)}}const gme=t=>t!==null;function CR(t,{repeat:e,repeatType:r="loop"},n,i=1){const a=t.filter(gme),c=i<0||e&&r!=="loop"&&e%2===1?0:a.length-1;return!c||n===void 0?a[c]:n}const vme={decay:SB,inertia:SB,tween:s2,keyframes:s2,spring:DT};function gq(t){typeof t.type=="string"&&(t.type=vme[t.type])}class NR{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,r){return this.finished.then(e,r)}}const yme=t=>t/100;class zN extends NR{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:r}=this.options;r&&r.updatedAt!==gh.now()&&this.tick(gh.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;gq(e);const{type:r=s2,repeat:n=0,repeatDelay:i=0,repeatType:a,velocity:o=0}=e;let{keyframes:c}=e;const u=r||s2;u!==s2&&typeof c[0]!="number"&&(this.mixKeyframes=P_(yme,fq(c[0],c[1])),c=[0,100]);const l=u({...e,keyframes:c});a==="mirror"&&(this.mirroredGenerator=u({...e,keyframes:[...c].reverse(),velocity:-o})),l.calculatedDuration===null&&(l.calculatedDuration=TR(l));const{calculatedDuration:d}=l;this.calculatedDuration=d,this.resolvedDuration=d+i,this.totalDuration=this.resolvedDuration*(n+1)-i,this.generator=l}updateTime(e){const r=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=r}tick(e,r=!1){const{generator:n,totalDuration:i,mixKeyframes:a,mirroredGenerator:o,resolvedDuration:c,calculatedDuration:u}=this;if(this.startTime===null)return n.next(0);const{delay:l=0,keyframes:d,repeat:f,repeatType:m,repeatDelay:p,type:g,onUpdate:y,finalKeyframe:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),r?this.currentTime=e:this.updateTime(e);const w=this.currentTime-l*(this.playbackSpeed>=0?1:-1),_=this.playbackSpeed>=0?w<0:w>i;this.currentTime=Math.max(w,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let E=this.currentTime,N=n;if(f){const U=Math.min(this.currentTime,i)/c;let G=Math.floor(U),q=U%1;!q&&U>=1&&(q=1),q===1&&G--,G=Math.min(G,f+1),G%2&&(m==="reverse"?(q=1-q,p&&(q-=p/c)):m==="mirror"&&(N=o)),E=WA(0,1,q)*c}const C=_?{done:!1,value:d[0]}:N.next(E);a&&(C.value=a(C.value));let{done:I}=C;!_&&u!==null&&(I=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const D=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&I);return D&&g!==SB&&(C.value=CR(d,this.options,x,this.speed)),y&&y(C.value),D&&this.finish(),C}then(e,r){return this.finished.then(e,r)}get duration(){return Jf(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Jf(e)}get time(){return Jf(this.currentTime)}set time(e){e=Kp(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(gh.now());const r=this.playbackSpeed!==e;this.playbackSpeed=e,r&&(this.time=Jf(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=nme,startTime:r}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),this.options.onPlay?.();const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=r??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(gh.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function xme(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const zv=t=>t*180/Math.PI,jB=t=>{const e=zv(Math.atan2(t[1],t[0]));return TB(e)},bme={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:jB,rotateZ:jB,skewX:t=>zv(Math.atan(t[1])),skewY:t=>zv(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},TB=t=>(t=t%360,t<0&&(t+=360),t),H8=jB,Q8=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),z8=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),wme={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Q8,scaleY:z8,scale:t=>(Q8(t)+z8(t))/2,rotateX:t=>TB(zv(Math.atan2(t[6],t[5]))),rotateY:t=>TB(zv(Math.atan2(-t[2],t[0]))),rotateZ:H8,rotate:H8,skewX:t=>zv(Math.atan(t[4])),skewY:t=>zv(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function CB(t){return t.includes("scale")?1:0}function NB(t,e){if(!t||t==="none")return CB(e);const r=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,i;if(r)n=wme,i=r;else{const c=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=bme,i=c}if(!i)return CB(e);const a=n[e],o=i[1].split(",").map(Eme);return typeof a=="function"?a(o):o[a]}const _me=(t,e)=>{const{transform:r="none"}=getComputedStyle(t);return NB(r,e)};function Eme(t){return parseFloat(t.trim())}const A1=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],p1=new Set(A1),V8=t=>t===m1||t===Ci,Sme=new Set(["x","y","z"]),jme=A1.filter(t=>!Sme.has(t));function Tme(t){const e=[];return jme.forEach(r=>{const n=t.getValue(r);n!==void 0&&(e.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),e}const k0={width:({x:t},{paddingLeft:e="0",paddingRight:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),height:({y:t},{paddingTop:e="0",paddingBottom:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>NB(e,"x"),y:(t,{transform:e})=>NB(e,"y")};k0.translateX=k0.x;k0.translateY=k0.y;const ry=new Set;let kB=!1,LB=!1,IB=!1;function vq(){if(LB){const t=Array.from(ry).filter(n=>n.needsMeasurement),e=new Set(t.map(n=>n.element)),r=new Map;e.forEach(n=>{const i=Tme(n);i.length&&(r.set(n,i),n.render())}),t.forEach(n=>n.measureInitialState()),e.forEach(n=>{n.render();const i=r.get(n);i&&i.forEach(([a,o])=>{n.getValue(a)?.set(o)})}),t.forEach(n=>n.measureEndState()),t.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}LB=!1,kB=!1,ry.forEach(t=>t.complete(IB)),ry.clear()}function yq(){ry.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(LB=!0)})}function Cme(){IB=!0,yq(),vq(),IB=!1}class kR{constructor(e,r,n,i,a,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=r,this.name=n,this.motionValue=i,this.element=a,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(ry.add(this),kB||(kB=!0,ul.read(yq),ul.resolveKeyframes(vq))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:r,element:n,motionValue:i}=this;if(e[0]===null){const a=i?.get(),o=e[e.length-1];if(a!==void 0)e[0]=a;else if(n&&r){const c=n.readValue(r,o);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=o),i&&a===void 0&&i.set(e[0])}xme(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),ry.delete(this)}cancel(){this.state==="scheduled"&&(ry.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Nme=t=>t.startsWith("--");function kme(t,e,r){Nme(e)?t.style.setProperty(e,r):t.style[e]=r}const Lme=yR(()=>window.ScrollTimeline!==void 0),Ime={};function Bme(t,e){const r=yR(t);return()=>Ime[e]??r()}const xq=Bme(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Sw=([t,e,r,n])=>`cubic-bezier(${t}, ${e}, ${r}, ${n})`,K8={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Sw([0,.65,.55,1]),circOut:Sw([.55,0,1,.45]),backIn:Sw([.31,.01,.66,-.59]),backOut:Sw([.33,1.53,.69,.99])};function bq(t,e){if(t)return typeof t=="function"?xq()?mq(t,e):"ease-out":nq(t)?Sw(t):Array.isArray(t)?t.map(r=>bq(r,e)||K8.easeOut):K8[t]}function Pme(t,e,r,{delay:n=0,duration:i=300,repeat:a=0,repeatType:o="loop",ease:c="easeOut",times:u}={},l=void 0){const d={[e]:r};u&&(d.offset=u);const f=bq(c,i);Array.isArray(f)&&(d.easing=f);const m={delay:n,duration:i,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:a+1,direction:o==="reverse"?"alternate":"normal"};return l&&(m.pseudoElement=l),t.animate(d,m)}function wq(t){return typeof t=="function"&&"applyToOptions"in t}function Ome({type:t,...e}){return wq(t)&&xq()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class Rme extends NR{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!e)return;const{element:r,name:n,keyframes:i,pseudoElement:a,allowFlatten:o=!1,finalKeyframe:c,onComplete:u}=e;this.isPseudoElement=!!a,this.allowFlatten=o,this.options=e,vR(typeof e.type!="string");const l=Ome(e);this.animation=Pme(r,n,i,l,a),l.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const d=CR(i,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(d):kme(r,n,d),this.animation.cancel()}u?.(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return Jf(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Jf(e)}get time(){return Jf(Number(this.animation.currentTime)||0)}set time(e){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=Kp(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(e){this.manualStartTime=this.animation.startTime=e}attachTimeline({timeline:e,observe:r}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&Lme()?(this.animation.timeline=e,rm):r(this)}}const _q={anticipate:JY,backInOut:ZY,circInOut:tq};function Dme(t){return t in _q}function Mme(t){typeof t.ease=="string"&&Dme(t.ease)&&(t.ease=_q[t.ease])}const a4=10;class Fme extends Rme{constructor(e){Mme(e),gq(e),super(e),e.startTime!==void 0&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:r,onUpdate:n,onComplete:i,element:a,...o}=this.options;if(!r)return;if(e!==void 0){r.set(e);return}const c=new zN({...o,autoplay:!1}),u=Math.max(a4,gh.now()-this.startTime),l=WA(0,a4,u-a4);r.setWithVelocity(c.sample(Math.max(0,u-l)).value,c.sample(u).value,l),c.stop()}}const G8=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(z0.test(t)||t==="0")&&!t.startsWith("url("));function Ume(t){const e=t[0];if(t.length===1)return!0;for(let r=0;r<t.length;r++)if(t[r]!==e)return!0}function $me(t,e,r,n){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],o=G8(i,e),c=G8(a,e);return!o||!c?!1:Ume(t)||(r==="spring"||wq(r))&&n}function BB(t){t.duration=0,t.type="keyframes"}const Hme=new Set(["opacity","clipPath","filter","transform"]),Qme=yR(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function zme(t){const{motionValue:e,name:r,repeatDelay:n,repeatType:i,damping:a,type:o}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:l}=e.owner.getProps();return Qme()&&r&&Hme.has(r)&&(r!=="transform"||!l)&&!u&&!n&&i!=="mirror"&&a!==0&&o!=="inertia"}const Vme=40;class Kme extends NR{constructor({autoplay:e=!0,delay:r=0,type:n="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:o="loop",keyframes:c,name:u,motionValue:l,element:d,...f}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=gh.now();const m={autoplay:e,delay:r,type:n,repeat:i,repeatDelay:a,repeatType:o,name:u,motionValue:l,element:d,...f},p=d?.KeyframeResolver||kR;this.keyframeResolver=new p(c,(g,y,x)=>this.onKeyframesResolved(g,y,m,!x),u,l,d),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,r,n,i){this.keyframeResolver=void 0;const{name:a,type:o,velocity:c,delay:u,isHandoff:l,onUpdate:d}=n;this.resolvedAt=gh.now(),$me(e,a,o,c)||((rg.instantAnimations||!u)&&d?.(CR(e,n,r)),e[0]=e[e.length-1],BB(n),n.repeat=0);const m={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>Vme?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:r,...n,keyframes:e},p=!l&&zme(m),g=m.motionValue?.owner?.current,y=p?new Fme({...m,element:g}):new zN(m);y.finished.then(()=>{this.notifyFinished()}).catch(rm),this.pendingTimeline&&(this.stopTimeline=y.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=y}get finished(){return this._animation?this.animation.finished:this._finished}then(e,r){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),Cme()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}function Eq(t,e,r,n=0,i=1){const a=Array.from(t).sort((l,d)=>l.sortNodePosition(d)).indexOf(e),o=t.size,c=(o-1)*n;return typeof r=="function"?r(a,o):i===1?a*n:c-a*n}const Gme=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Wme(t){const e=Gme.exec(t);if(!e)return[,];const[,r,n,i]=e;return[`--${r??n}`,i]}function Sq(t,e,r=1){const[n,i]=Wme(t);if(!n)return;const a=window.getComputedStyle(e).getPropertyValue(n);if(a){const o=a.trim();return zY(o)?parseFloat(o):o}return _R(i)?Sq(i,e,r+1):i}const Yme={type:"spring",stiffness:500,damping:25,restSpeed:10},qme=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),Xme={type:"keyframes",duration:.8},Zme={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Jme=(t,{keyframes:e})=>e.length>2?Xme:p1.has(t)?t.startsWith("scale")?qme(e[1]):Yme:Zme,eAe=t=>t!==null;function tAe(t,{repeat:e,repeatType:r="loop"},n){const i=t.filter(eAe),a=e&&r!=="loop"&&e%2===1?0:i.length-1;return i[a]}function LR(t,e){return t?.[e]??t?.default??t}function rAe({when:t,delay:e,delayChildren:r,staggerChildren:n,staggerDirection:i,repeat:a,repeatType:o,repeatDelay:c,from:u,elapsed:l,...d}){return!!Object.keys(d).length}const IR=(t,e,r,n={},i,a)=>o=>{const c=LR(n,t)||{},u=c.delay||n.delay||0;let{elapsed:l=0}=n;l=l-Kp(u);const d={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:e.getVelocity(),...c,delay:-l,onUpdate:m=>{e.set(m),c.onUpdate&&c.onUpdate(m)},onComplete:()=>{o(),c.onComplete&&c.onComplete()},name:t,motionValue:e,element:a?void 0:i};rAe(c)||Object.assign(d,Jme(t,d)),d.duration&&(d.duration=Kp(d.duration)),d.repeatDelay&&(d.repeatDelay=Kp(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let f=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(BB(d),d.delay===0&&(f=!0)),(rg.instantAnimations||rg.skipAnimations)&&(f=!0,BB(d),d.delay=0),d.allowFlatten=!c.type&&!c.ease,f&&!a&&e.get()!==void 0){const m=tAe(d.keyframes,c);if(m!==void 0){ul.update(()=>{d.onUpdate(m),d.onComplete()});return}}return c.isSync?new zN(d):new Kme(d)};function W8(t){const e=[{},{}];return t?.values.forEach((r,n)=>{e[0][n]=r.get(),e[1][n]=r.getVelocity()}),e}function BR(t,e,r,n){if(typeof e=="function"){const[i,a]=W8(n);e=e(r!==void 0?r:t.custom,i,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,a]=W8(n);e=e(r!==void 0?r:t.custom,i,a)}return e}function yb(t,e,r){const n=t.getProps();return BR(n,e,r!==void 0?r:n.custom,t)}const jq=new Set(["width","height","top","left","right","bottom",...A1]),Y8=30,nAe=t=>!isNaN(parseFloat(t)),a2={current:void 0};class iAe{constructor(e,r={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=n=>{const i=gh.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=r.owner}setCurrent(e){this.current=e,this.updatedAt=gh.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=nAe(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,r){this.events[e]||(this.events[e]=new xR);const n=this.events[e].add(r);return e==="change"?()=>{n(),ul.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,r){this.passiveEffect=e,this.stopPassiveEffect=r}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,r,n){this.set(r),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,r=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return a2.current&&a2.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=gh.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Y8)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,Y8);return GY(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(e){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=e(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function py(t,e){return new iAe(t,e)}const PB=t=>Array.isArray(t);function sAe(t,e,r){t.hasValue(e)?t.getValue(e).set(r):t.addValue(e,py(r))}function aAe(t){return PB(t)?t[t.length-1]||0:t}function oAe(t,e){const r=yb(t,e);let{transitionEnd:n={},transition:i={},...a}=r||{};a={...a,...n};for(const o in a){const c=aAe(a[o]);sAe(t,o,c)}}const Ad=t=>!!(t&&t.getVelocity);function lAe(t){return!!(Ad(t)&&t.add)}function OB(t,e){const r=t.getValue("willChange");if(lAe(r))return r.add(e);if(!r&&rg.WillChange){const n=new rg.WillChange("auto");t.addValue("willChange",n),n.add(e)}}function PR(t){return t.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`)}const cAe="framerAppearId",Tq="data-"+PR(cAe);function Cq(t){return t.props[Tq]}function uAe({protectedKeys:t,needsAnimating:e},r){const n=t.hasOwnProperty(r)&&e[r]!==!0;return e[r]=!1,n}function Nq(t,e,{delay:r=0,transitionOverride:n,type:i}={}){let{transition:a=t.getDefaultTransition(),transitionEnd:o,...c}=e;const u=a?.reduceMotion;n&&(a=n);const l=[],d=i&&t.animationState&&t.animationState.getState()[i];for(const f in c){const m=t.getValue(f,t.latestValues[f]??null),p=c[f];if(p===void 0||d&&uAe(d,f))continue;const g={delay:r,...LR(a||{},f)},y=m.get();if(y!==void 0&&!m.isAnimating&&!Array.isArray(p)&&p===y&&!g.velocity)continue;let x=!1;if(window.MotionHandoffAnimation){const E=Cq(t);if(E){const N=window.MotionHandoffAnimation(E,f,ul);N!==null&&(g.startTime=N,x=!0)}}OB(t,f);const w=u??t.shouldReduceMotion;m.start(IR(f,m,p,w&&jq.has(f)?{type:!1}:g,t,x));const _=m.animation;_&&l.push(_)}return o&&Promise.all(l).then(()=>{ul.update(()=>{o&&oAe(t,o)})}),l}function RB(t,e,r={}){const n=yb(t,e,r.type==="exit"?t.presenceContext?.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=n||{};r.transitionOverride&&(i=r.transitionOverride);const a=n?()=>Promise.all(Nq(t,n,r)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:l=0,staggerChildren:d,staggerDirection:f}=i;return dAe(t,e,u,l,d,f,r)}:()=>Promise.resolve(),{when:c}=i;if(c){const[u,l]=c==="beforeChildren"?[a,o]:[o,a];return u().then(()=>l())}else return Promise.all([a(),o(r.delay)])}function dAe(t,e,r=0,n=0,i=0,a=1,o){const c=[];for(const u of t.variantChildren)u.notify("AnimationStart",e),c.push(RB(u,e,{...o,delay:r+(typeof n=="function"?0:n)+Eq(t.variantChildren,u,n,i,a)}).then(()=>u.notify("AnimationComplete",e)));return Promise.all(c)}function hAe(t,e,r={}){t.notify("AnimationStart",e);let n;if(Array.isArray(e)){const i=e.map(a=>RB(t,a,r));n=Promise.all(i)}else if(typeof e=="string")n=RB(t,e,r);else{const i=typeof e=="function"?yb(t,e,r.custom):e;n=Promise.all(Nq(t,i,r))}return n.then(()=>{t.notify("AnimationComplete",e)})}const fAe={test:t=>t==="auto",parse:t=>t},kq=t=>e=>e.test(t),Lq=[m1,Ci,zA,a0,$fe,Ufe,fAe],q8=t=>Lq.find(kq(t));function mAe(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||KY(t):!0}const AAe=new Set(["brightness","contrast","saturate","opacity"]);function pAe(t){const[e,r]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[n]=r.match(ER)||[];if(!n)return t;const i=r.replace(n,"");let a=AAe.has(e)?1:0;return n!==r&&(a*=100),e+"("+a+i+")"}const gAe=/\b([a-z-]*)\(.*?\)/gu,DB={...z0,getAnimatableNone:t=>{const e=t.match(gAe);return e?e.map(pAe).join(" "):t}},X8={...m1,transform:Math.round},vAe={rotate:a0,rotateX:a0,rotateY:a0,rotateZ:a0,scale:QE,scaleX:QE,scaleY:QE,scaleZ:QE,skew:a0,skewX:a0,skewY:a0,distance:Ci,translateX:Ci,translateY:Ci,translateZ:Ci,x:Ci,y:Ci,z:Ci,perspective:Ci,transformPerspective:Ci,opacity:I2,originX:D8,originY:D8,originZ:Ci},OR={borderWidth:Ci,borderTopWidth:Ci,borderRightWidth:Ci,borderBottomWidth:Ci,borderLeftWidth:Ci,borderRadius:Ci,borderTopLeftRadius:Ci,borderTopRightRadius:Ci,borderBottomRightRadius:Ci,borderBottomLeftRadius:Ci,width:Ci,maxWidth:Ci,height:Ci,maxHeight:Ci,top:Ci,right:Ci,bottom:Ci,left:Ci,inset:Ci,insetBlock:Ci,insetBlockStart:Ci,insetBlockEnd:Ci,insetInline:Ci,insetInlineStart:Ci,insetInlineEnd:Ci,padding:Ci,paddingTop:Ci,paddingRight:Ci,paddingBottom:Ci,paddingLeft:Ci,paddingBlock:Ci,paddingBlockStart:Ci,paddingBlockEnd:Ci,paddingInline:Ci,paddingInlineStart:Ci,paddingInlineEnd:Ci,margin:Ci,marginTop:Ci,marginRight:Ci,marginBottom:Ci,marginLeft:Ci,marginBlock:Ci,marginBlockStart:Ci,marginBlockEnd:Ci,marginInline:Ci,marginInlineStart:Ci,marginInlineEnd:Ci,fontSize:Ci,backgroundPositionX:Ci,backgroundPositionY:Ci,...vAe,zIndex:X8,fillOpacity:I2,strokeOpacity:I2,numOctaves:X8},yAe={...OR,color:Au,backgroundColor:Au,outlineColor:Au,fill:Au,stroke:Au,borderColor:Au,borderTopColor:Au,borderRightColor:Au,borderBottomColor:Au,borderLeftColor:Au,filter:DB,WebkitFilter:DB},Iq=t=>yAe[t];function Bq(t,e){let r=Iq(t);return r!==DB&&(r=z0),r.getAnimatableNone?r.getAnimatableNone(e):void 0}const xAe=new Set(["auto","none","0"]);function bAe(t,e,r){let n=0,i;for(;n<t.length&&!i;){const a=t[n];typeof a=="string"&&!xAe.has(a)&&B2(a).values.length&&(i=t[n]),n++}if(i&&r)for(const a of e)t[a]=Bq(r,i)}class wAe extends kR{constructor(e,r,n,i,a){super(e,r,n,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:r,name:n}=this;if(!r||!r.current)return;super.readKeyframes();for(let d=0;d<e.length;d++){let f=e[d];if(typeof f=="string"&&(f=f.trim(),_R(f))){const m=Sq(f,r.current);m!==void 0&&(e[d]=m),d===e.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!jq.has(n)||e.length!==2)return;const[i,a]=e,o=q8(i),c=q8(a),u=R8(i),l=R8(a);if(u!==l&&k0[n]){this.needsMeasurement=!0;return}if(o!==c)if(V8(o)&&V8(c))for(let d=0;d<e.length;d++){const f=e[d];typeof f=="string"&&(e[d]=parseFloat(f))}else k0[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:r}=this,n=[];for(let i=0;i<e.length;i++)(e[i]===null||mAe(e[i]))&&n.push(i);n.length&&bAe(e,n,r)}measureInitialState(){const{element:e,unresolvedKeyframes:r,name:n}=this;if(!e||!e.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=k0[n](e.measureViewportBox(),window.getComputedStyle(e.current)),r[0]=this.measuredOrigin;const i=r[r.length-1];i!==void 0&&e.getValue(n,i).jump(i,!1)}measureEndState(){const{element:e,name:r,unresolvedKeyframes:n}=this;if(!e||!e.current)return;const i=e.getValue(r);i&&i.jump(this.measuredOrigin,!1);const a=n.length-1,o=n[a];n[a]=k0[r](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),this.removedTransforms?.length&&this.removedTransforms.forEach(([c,u])=>{e.getValue(c).set(u)}),this.resolveNoneKeyframes()}}function _Ae(t,e,r){if(t==null)return[];if(t instanceof EventTarget)return[t];if(typeof t=="string"){let n=document;const i=r?.[t]??n.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t).filter(n=>n!=null)}const Pq=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function MB(t){return VY(t)&&"offsetHeight"in t}const{schedule:RR}=iq(queueMicrotask,!1),Cm={x:!1,y:!1};function Oq(){return Cm.x||Cm.y}function EAe(t){return t==="x"||t==="y"?Cm[t]?null:(Cm[t]=!0,()=>{Cm[t]=!1}):Cm.x||Cm.y?null:(Cm.x=Cm.y=!0,()=>{Cm.x=Cm.y=!1})}function Rq(t,e){const r=_Ae(t),n=new AbortController,i={passive:!0,...e,signal:n.signal};return[r,i,()=>n.abort()]}function Z8(t){return!(t.pointerType==="touch"||Oq())}function SAe(t,e,r={}){const[n,i,a]=Rq(t,r),o=c=>{if(!Z8(c))return;const{target:u}=c,l=e(u,c);if(typeof l!="function"||!u)return;const d=f=>{Z8(f)&&(l(f),u.removeEventListener("pointerleave",d))};u.addEventListener("pointerleave",d,i)};return n.forEach(c=>{c.addEventListener("pointerenter",o,i)}),a}const Dq=(t,e)=>e?t===e?!0:Dq(t,e.parentElement):!1,DR=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,jAe=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Mq(t){return jAe.has(t.tagName)||t.isContentEditable===!0}const tj=new WeakSet;function J8(t){return e=>{e.key==="Enter"&&t(e)}}function o4(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const TAe=(t,e)=>{const r=t.currentTarget;if(!r)return;const n=J8(()=>{if(tj.has(r))return;o4(r,"down");const i=J8(()=>{o4(r,"up")}),a=()=>o4(r,"cancel");r.addEventListener("keyup",i,e),r.addEventListener("blur",a,e)});r.addEventListener("keydown",n,e),r.addEventListener("blur",()=>r.removeEventListener("keydown",n),e)};function e7(t){return DR(t)&&!Oq()}function CAe(t,e,r={}){const[n,i,a]=Rq(t,r),o=c=>{const u=c.currentTarget;if(!e7(c))return;tj.add(u);const l=e(u,c),d=(p,g)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",m),tj.has(u)&&tj.delete(u),e7(p)&&typeof l=="function"&&l(p,{success:g})},f=p=>{d(p,u===window||u===document||r.useGlobalTarget||Dq(u,p.target))},m=p=>{d(p,!1)};window.addEventListener("pointerup",f,i),window.addEventListener("pointercancel",m,i)};return n.forEach(c=>{(r.useGlobalTarget?window:c).addEventListener("pointerdown",o,i),MB(c)&&(c.addEventListener("focus",l=>TAe(l,i)),!Mq(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),a}function Fq(t){return VY(t)&&"ownerSVGElement"in t}function NAe(t){return Fq(t)&&t.tagName==="svg"}function kAe(...t){const e=!Array.isArray(t[0]),r=e?0:-1,n=t[0+r],i=t[1+r],a=t[2+r],o=t[3+r],c=pq(i,a,o);return e?c(n):c}function LAe(t,e,r={}){const n=t.get();let i=null,a=n,o;const c=typeof n=="string"?n.replace(/[\d.-]/g,""):void 0,u=()=>{i&&(i.stop(),i=null)},l=()=>{u();const d=r7(t.get()),f=r7(a);d!==f&&(i=new zN({keyframes:[d,f],velocity:t.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...r,onUpdate:o}))};if(t.attach((d,f)=>{a=d,o=m=>f(t7(m,c)),ul.postRender(()=>{l(),t.events.animationStart?.notify(),i?.then(()=>{t.events.animationComplete?.notify()})})},u),Ad(e)){const d=e.on("change",m=>t.set(t7(m,c))),f=t.on("destroy",d);return()=>{d(),f()}}return u}function t7(t,e){return e?t+e:t}function r7(t){return typeof t=="number"?t:parseFloat(t)}const IAe=[...Lq,Au,z0],BAe=t=>IAe.find(kq(t)),n7=()=>({translate:0,scale:1,origin:0,originPoint:0}),nb=()=>({x:n7(),y:n7()}),i7=()=>({min:0,max:0}),Du=()=>({x:i7(),y:i7()}),FB={current:null},Uq={current:!1},PAe=typeof window<"u";function OAe(){if(Uq.current=!0,!!PAe)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>FB.current=t.matches;t.addEventListener("change",e),e()}else FB.current=!1}const RAe=new WeakMap;function VN(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function P2(t){return typeof t=="string"||Array.isArray(t)}const MR=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],FR=["initial",...MR];function KN(t){return VN(t.animate)||FR.some(e=>P2(t[e]))}function $q(t){return!!(KN(t)||t.variants)}function DAe(t,e,r){for(const n in e){const i=e[n],a=r[n];if(Ad(i))t.addValue(n,i);else if(Ad(a))t.addValue(n,py(i,{owner:t}));else if(a!==i)if(t.hasValue(n)){const o=t.getValue(n);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(n);t.addValue(n,py(o!==void 0?o:i,{owner:t}))}}for(const n in r)e[n]===void 0&&t.removeValue(n);return e}const s7=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let MT={};function Hq(t){MT=t}function MAe(){return MT}class FAe{scrapeMotionValuesFromProps(e,r,n){return{}}constructor({parent:e,props:r,presenceContext:n,reducedMotionConfig:i,blockInitialAnimation:a,visualState:o},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=kR,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=gh.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,ul.render(this.render,!1,!0))};const{latestValues:u,renderState:l}=o;this.latestValues=u,this.baseTarget={...u},this.initialValues=r.initial?{...u}:{},this.renderState=l,this.parent=e,this.props=r,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=c,this.blockInitialAnimation=!!a,this.isControllingVariants=KN(r),this.isVariantNode=$q(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...f}=this.scrapeMotionValuesFromProps(r,{},this);for(const m in f){const p=f[m];u[m]!==void 0&&Ad(p)&&p.set(u[m])}}mount(e){this.current=e,RAe.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,n)=>this.bindToMotionValue(n,r)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(Uq.current||OAe(),this.shouldReduceMotion=FB.current),this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),ng(this.notifyUpdate),ng(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const r=this.features[e];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,r){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=p1.has(e);n&&this.onBindTransform&&this.onBindTransform();const i=r.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&ul.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;typeof window<"u"&&window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,r)),this.valueSubscriptions.set(e,()=>{i(),a&&a(),r.owner&&r.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in MT){const r=MT[e];if(!r)continue;const{isEnabled:n,Feature:i}=r;if(!this.features[e]&&i&&n(this.props)&&(this.features[e]=new i(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Du()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,r){this.latestValues[e]=r}update(e,r){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<s7.length;n++){const i=s7[n];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,o=e[a];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=DAe(this,this.scrapeMotionValuesFromProps(e,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(e),()=>r.variantChildren.delete(e)}addValue(e,r){const n=this.values.get(e);r!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,r),this.values.set(e,r),this.latestValues[e]=r.get())}removeValue(e){this.values.delete(e);const r=this.valueSubscriptions.get(e);r&&(r(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,r){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return n===void 0&&r!==void 0&&(n=py(r===null?void 0:r,{owner:this}),this.addValue(e,n)),n}readValue(e,r){let n=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return n!=null&&(typeof n=="string"&&(zY(n)||KY(n))?n=parseFloat(n):!BAe(n)&&z0.test(r)&&(n=Bq(e,r)),this.setBaseTarget(e,Ad(n)?n.get():n)),Ad(n)?n.get():n}setBaseTarget(e,r){this.baseTarget[e]=r}getBaseTarget(e){const{initial:r}=this.props;let n;if(typeof r=="string"||typeof r=="object"){const a=BR(this.props,r,this.presenceContext?.custom);a&&(n=a[e])}if(r&&n!==void 0)return n;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Ad(i)?i:this.initialValues[e]!==void 0&&n===void 0?void 0:this.baseTarget[e]}on(e,r){return this.events[e]||(this.events[e]=new xR),this.events[e].add(r)}notify(e,...r){this.events[e]&&this.events[e].notify(...r)}scheduleRenderMicrotask(){RR.render(this.render)}}class Qq extends FAe{constructor(){super(...arguments),this.KeyframeResolver=wAe}sortInstanceNodePosition(e,r){return e.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(e,r){const n=e.style;return n?n[r]:void 0}removeValueFromRenderState(e,{vars:r,style:n}){delete r[e],delete n[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Ad(e)&&(this.childSubscription=e.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}class q0{constructor(e){this.isMounted=!1,this.node=e}update(){}}function zq({top:t,left:e,right:r,bottom:n}){return{x:{min:e,max:r},y:{min:t,max:n}}}function UAe({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function $Ae(t,e){if(!e)return t;const r=e({x:t.left,y:t.top}),n=e({x:t.right,y:t.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function l4(t){return t===void 0||t===1}function UB({scale:t,scaleX:e,scaleY:r}){return!l4(t)||!l4(e)||!l4(r)}function Ev(t){return UB(t)||Vq(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function Vq(t){return a7(t.x)||a7(t.y)}function a7(t){return t&&t!=="0%"}function FT(t,e,r){const n=t-r,i=e*n;return r+i}function o7(t,e,r,n,i){return i!==void 0&&(t=FT(t,i,n)),FT(t,r,n)+e}function $B(t,e=0,r=1,n,i){t.min=o7(t.min,e,r,n,i),t.max=o7(t.max,e,r,n,i)}function Kq(t,{x:e,y:r}){$B(t.x,e.translate,e.scale,e.originPoint),$B(t.y,r.translate,r.scale,r.originPoint)}const l7=.999999999999,c7=1.0000000000001;function HAe(t,e,r,n=!1){const i=r.length;if(!i)return;e.x=e.y=1;let a,o;for(let c=0;c<i;c++){a=r[c],o=a.projectionDelta;const{visualElement:u}=a.options;u&&u.props.style&&u.props.style.display==="contents"||(n&&a.options.layoutScroll&&a.scroll&&a!==a.root&&sb(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,Kq(t,o)),n&&Ev(a.latestValues)&&sb(t,a.latestValues))}e.x<c7&&e.x>l7&&(e.x=1),e.y<c7&&e.y>l7&&(e.y=1)}function ib(t,e){t.min=t.min+e,t.max=t.max+e}function u7(t,e,r,n,i=.5){const a=fc(t.min,t.max,i);$B(t,e,r,a,n)}function sb(t,e){u7(t.x,e.x,e.scaleX,e.scale,e.originX),u7(t.y,e.y,e.scaleY,e.scale,e.originY)}function Gq(t,e){return zq($Ae(t.getBoundingClientRect(),e))}function QAe(t,e,r){const n=Gq(t,r),{scroll:i}=e;return i&&(ib(n.x,i.offset.x),ib(n.y,i.offset.y)),n}const zAe={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},VAe=A1.length;function KAe(t,e,r){let n="",i=!0;for(let a=0;a<VAe;a++){const o=A1[a],c=t[o];if(c===void 0)continue;let u=!0;if(typeof c=="number")u=c===(o.startsWith("scale")?1:0);else{const l=parseFloat(c);u=o.startsWith("scale")?l===1:l===0}if(!u||r){const l=Pq(c,OR[o]);if(!u){i=!1;const d=zAe[o]||o;n+=`${d}(${l}) `}r&&(e[o]=l)}}return n=n.trim(),r?n=r(e,i?"":n):i&&(n="none"),n}function UR(t,e,r){const{style:n,vars:i,transformOrigin:a}=t;let o=!1,c=!1;for(const u in e){const l=e[u];if(p1.has(u)){o=!0;continue}else if(aq(u)){i[u]=l;continue}else{const d=Pq(l,OR[u]);u.startsWith("origin")?(c=!0,a[u]=d):n[u]=d}}if(e.transform||(o||r?n.transform=KAe(e,t.transform,r):n.transform&&(n.transform="none")),c){const{originX:u="50%",originY:l="50%",originZ:d=0}=a;n.transformOrigin=`${u} ${l} ${d}`}}function Wq(t,{style:e,vars:r},n,i){const a=t.style;let o;for(o in e)a[o]=e[o];i?.applyProjectionStyles(a,n);for(o in r)a.setProperty(o,r[o])}function d7(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Z1={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Ci.test(t))t=parseFloat(t);else return t;const r=d7(t,e.target.x),n=d7(t,e.target.y);return`${r}% ${n}%`}},GAe={correct:(t,{treeScale:e,projectionDelta:r})=>{const n=t,i=z0.parse(t);if(i.length>5)return n;const a=z0.createTransformer(t),o=typeof i[0]!="number"?1:0,c=r.x.scale*e.x,u=r.y.scale*e.y;i[0+o]/=c,i[1+o]/=u;const l=fc(c,u,.5);return typeof i[2+o]=="number"&&(i[2+o]/=l),typeof i[3+o]=="number"&&(i[3+o]/=l),a(i)}},HB={borderRadius:{...Z1,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Z1,borderTopRightRadius:Z1,borderBottomLeftRadius:Z1,borderBottomRightRadius:Z1,boxShadow:GAe};function Yq(t,{layout:e,layoutId:r}){return p1.has(t)||t.startsWith("origin")||(e||r!==void 0)&&(!!HB[t]||t==="opacity")}function $R(t,e,r){const n=t.style,i=e?.style,a={};if(!n)return a;for(const o in n)(Ad(n[o])||i&&Ad(i[o])||Yq(o,t)||r?.getValue(o)?.liveStyle!==void 0)&&(a[o]=n[o]);return a}function WAe(t){return window.getComputedStyle(t)}class YAe extends Qq{constructor(){super(...arguments),this.type="html",this.renderInstance=Wq}readValueFromInstance(e,r){if(p1.has(r))return this.projection?.isProjecting?CB(r):_me(e,r);{const n=WAe(e),i=(aq(r)?n.getPropertyValue(r):n[r])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:r}){return Gq(e,r)}build(e,r,n){UR(e,r,n.transformTemplate)}scrapeMotionValuesFromProps(e,r,n){return $R(e,r,n)}}const qAe={offset:"stroke-dashoffset",array:"stroke-dasharray"},XAe={offset:"strokeDashoffset",array:"strokeDasharray"};function ZAe(t,e,r=1,n=0,i=!0){t.pathLength=1;const a=i?qAe:XAe;t[a.offset]=`${-n}`,t[a.array]=`${e} ${r}`}const JAe=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function qq(t,{attrX:e,attrY:r,attrScale:n,pathLength:i,pathSpacing:a=1,pathOffset:o=0,...c},u,l,d){if(UR(t,c,l),u){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:f,style:m}=t;f.transform&&(m.transform=f.transform,delete f.transform),(m.transform||f.transformOrigin)&&(m.transformOrigin=f.transformOrigin??"50% 50%",delete f.transformOrigin),m.transform&&(m.transformBox=d?.transformBox??"fill-box",delete f.transformBox);for(const p of JAe)f[p]!==void 0&&(m[p]=f[p],delete f[p]);e!==void 0&&(f.x=e),r!==void 0&&(f.y=r),n!==void 0&&(f.scale=n),i!==void 0&&ZAe(f,i,a,o,!1)}const Xq=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),Zq=t=>typeof t=="string"&&t.toLowerCase()==="svg";function epe(t,e,r,n){Wq(t,e,void 0,n);for(const i in e.attrs)t.setAttribute(Xq.has(i)?i:PR(i),e.attrs[i])}function Jq(t,e,r){const n=$R(t,e,r);for(const i in t)if(Ad(t[i])||Ad(e[i])){const a=A1.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;n[a]=t[i]}return n}class tpe extends Qq{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Du}getBaseTargetFromProps(e,r){return e[r]}readValueFromInstance(e,r){if(p1.has(r)){const n=Iq(r);return n&&n.default||0}return r=Xq.has(r)?r:PR(r),e.getAttribute(r)}scrapeMotionValuesFromProps(e,r,n){return Jq(e,r,n)}build(e,r,n){qq(e,r,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(e,r,n,i){epe(e,r,n,i)}mount(e){this.isSVGTag=Zq(e.tagName),super.mount(e)}}const rpe=FR.length;function eX(t){if(!t)return;if(!t.isControllingVariants){const r=t.parent?eX(t.parent)||{}:{};return t.props.initial!==void 0&&(r.initial=t.props.initial),r}const e={};for(let r=0;r<rpe;r++){const n=FR[r],i=t.props[n];(P2(i)||i===!1)&&(e[n]=i)}return e}function tX(t,e){if(!Array.isArray(e))return!1;const r=e.length;if(r!==t.length)return!1;for(let n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}const npe=[...MR].reverse(),ipe=MR.length;function spe(t){return e=>Promise.all(e.map(({animation:r,options:n})=>hAe(t,r,n)))}function ape(t){let e=spe(t),r=h7(),n=!0;const i=u=>(l,d)=>{const f=yb(t,d,u==="exit"?t.presenceContext?.custom:void 0);if(f){const{transition:m,transitionEnd:p,...g}=f;l={...l,...g,...p}}return l};function a(u){e=u(t)}function o(u){const{props:l}=t,d=eX(t.parent)||{},f=[],m=new Set;let p={},g=1/0;for(let x=0;x<ipe;x++){const w=npe[x],_=r[w],E=l[w]!==void 0?l[w]:d[w],N=P2(E),C=w===u?_.isActive:null;C===!1&&(g=x);let I=E===d[w]&&E!==l[w]&&N;if(I&&n&&t.manuallyAnimateOnMount&&(I=!1),_.protectedKeys={...p},!_.isActive&&C===null||!E&&!_.prevProp||VN(E)||typeof E=="boolean")continue;const D=ope(_.prevProp,E);let U=D||w===u&&_.isActive&&!I&&N||x>g&&N,G=!1;const q=Array.isArray(E)?E:[E];let J=q.reduce(i(w),{});C===!1&&(J={});const{prevResolvedValues:de={}}=_,xe={...de,...J},we=ae=>{U=!0,m.has(ae)&&(G=!0,m.delete(ae)),_.needsAnimating[ae]=!0;const oe=t.getValue(ae);oe&&(oe.liveStyle=!1)};for(const ae in xe){const oe=J[ae],Ie=de[ae];if(p.hasOwnProperty(ae))continue;let Ce=!1;PB(oe)&&PB(Ie)?Ce=!tX(oe,Ie):Ce=oe!==Ie,Ce?oe!=null?we(ae):m.add(ae):oe!==void 0&&m.has(ae)?we(ae):_.protectedKeys[ae]=!0}_.prevProp=E,_.prevResolvedValues=J,_.isActive&&(p={...p,...J}),n&&t.blockInitialAnimation&&(U=!1);const ve=I&&D;U&&(!ve||G)&&f.push(...q.map(ae=>{const oe={type:w};if(typeof ae=="string"&&n&&!ve&&t.manuallyAnimateOnMount&&t.parent){const{parent:Ie}=t,Ce=yb(Ie,ae);if(Ie.enteringChildren&&Ce){const{delayChildren:be}=Ce.transition||{};oe.delay=Eq(Ie.enteringChildren,t,be)}}return{animation:ae,options:oe}}))}if(m.size){const x={};if(typeof l.initial!="boolean"){const w=yb(t,Array.isArray(l.initial)?l.initial[0]:l.initial);w&&w.transition&&(x.transition=w.transition)}m.forEach(w=>{const _=t.getBaseTarget(w),E=t.getValue(w);E&&(E.liveStyle=!0),x[w]=_??null}),f.push({animation:x})}let y=!!f.length;return n&&(l.initial===!1||l.initial===l.animate)&&!t.manuallyAnimateOnMount&&(y=!1),n=!1,y?e(f):Promise.resolve()}function c(u,l){if(r[u].isActive===l)return Promise.resolve();t.variantChildren?.forEach(f=>f.animationState?.setActive(u,l)),r[u].isActive=l;const d=o(u);for(const f in r)r[f].protectedKeys={};return d}return{animateChanges:o,setActive:c,setAnimateFunction:a,getState:()=>r,reset:()=>{r=h7()}}}function ope(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!tX(e,t):!1}function Av(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function h7(){return{animate:Av(!0),whileInView:Av(),whileHover:Av(),whileTap:Av(),whileDrag:Av(),whileFocus:Av(),exit:Av()}}function f7(t,e){t.min=e.min,t.max=e.max}function wm(t,e){f7(t.x,e.x),f7(t.y,e.y)}function m7(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}const rX=1e-4,lpe=1-rX,cpe=1+rX,nX=.01,upe=0-nX,dpe=0+nX;function vh(t){return t.max-t.min}function hpe(t,e,r){return Math.abs(t-e)<=r}function A7(t,e,r,n=.5){t.origin=n,t.originPoint=fc(e.min,e.max,t.origin),t.scale=vh(r)/vh(e),t.translate=fc(r.min,r.max,t.origin)-t.originPoint,(t.scale>=lpe&&t.scale<=cpe||isNaN(t.scale))&&(t.scale=1),(t.translate>=upe&&t.translate<=dpe||isNaN(t.translate))&&(t.translate=0)}function o2(t,e,r,n){A7(t.x,e.x,r.x,n?n.originX:void 0),A7(t.y,e.y,r.y,n?n.originY:void 0)}function p7(t,e,r){t.min=r.min+e.min,t.max=t.min+vh(e)}function fpe(t,e,r){p7(t.x,e.x,r.x),p7(t.y,e.y,r.y)}function g7(t,e,r){t.min=e.min-r.min,t.max=t.min+vh(e)}function UT(t,e,r){g7(t.x,e.x,r.x),g7(t.y,e.y,r.y)}function v7(t,e,r,n,i){return t-=e,t=FT(t,1/r,n),i!==void 0&&(t=FT(t,1/i,n)),t}function mpe(t,e=0,r=1,n=.5,i,a=t,o=t){if(zA.test(e)&&(e=parseFloat(e),e=fc(o.min,o.max,e/100)-o.min),typeof e!="number")return;let c=fc(a.min,a.max,n);t===a&&(c-=e),t.min=v7(t.min,e,r,c,i),t.max=v7(t.max,e,r,c,i)}function y7(t,e,[r,n,i],a,o){mpe(t,e[r],e[n],e[i],e.scale,a,o)}const Ape=["x","scaleX","originX"],ppe=["y","scaleY","originY"];function x7(t,e,r,n){y7(t.x,e,Ape,r?r.x:void 0,n?n.x:void 0),y7(t.y,e,ppe,r?r.y:void 0,n?n.y:void 0)}function b7(t){return t.translate===0&&t.scale===1}function iX(t){return b7(t.x)&&b7(t.y)}function w7(t,e){return t.min===e.min&&t.max===e.max}function gpe(t,e){return w7(t.x,e.x)&&w7(t.y,e.y)}function _7(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function sX(t,e){return _7(t.x,e.x)&&_7(t.y,e.y)}function E7(t){return vh(t.x)/vh(t.y)}function S7(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}function Gf(t){return[t("x"),t("y")]}function vpe(t,e,r){let n="";const i=t.x.translate/e.x,a=t.y.translate/e.y,o=r?.z||0;if((i||a||o)&&(n=`translate3d(${i}px, ${a}px, ${o}px) `),(e.x!==1||e.y!==1)&&(n+=`scale(${1/e.x}, ${1/e.y}) `),r){const{transformPerspective:l,rotate:d,rotateX:f,rotateY:m,skewX:p,skewY:g}=r;l&&(n=`perspective(${l}px) ${n}`),d&&(n+=`rotate(${d}deg) `),f&&(n+=`rotateX(${f}deg) `),m&&(n+=`rotateY(${m}deg) `),p&&(n+=`skewX(${p}deg) `),g&&(n+=`skewY(${g}deg) `)}const c=t.x.scale*e.x,u=t.y.scale*e.y;return(c!==1||u!==1)&&(n+=`scale(${c}, ${u})`),n||"none"}const aX=["TopLeft","TopRight","BottomLeft","BottomRight"],ype=aX.length,j7=t=>typeof t=="string"?parseFloat(t):t,T7=t=>typeof t=="number"||Ci.test(t);function xpe(t,e,r,n,i,a){i?(t.opacity=fc(0,r.opacity??1,bpe(n)),t.opacityExit=fc(e.opacity??1,0,wpe(n))):a&&(t.opacity=fc(e.opacity??1,r.opacity??1,n));for(let o=0;o<ype;o++){const c=`border${aX[o]}Radius`;let u=C7(e,c),l=C7(r,c);if(u===void 0&&l===void 0)continue;u||(u=0),l||(l=0),u===0||l===0||T7(u)===T7(l)?(t[c]=Math.max(fc(j7(u),j7(l),n),0),(zA.test(l)||zA.test(u))&&(t[c]+="%")):t[c]=l}(e.rotate||r.rotate)&&(t.rotate=fc(e.rotate||0,r.rotate||0,n))}function C7(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const bpe=oX(0,.5,eq),wpe=oX(.5,.95,rm);function oX(t,e,r){return n=>n<t?0:n>e?1:r(L2(t,e,n))}function _pe(t,e,r){const n=Ad(t)?t:py(t);return n.start(IR("",n,e,r)),n.animation}function O2(t,e,r,n={passive:!0}){return t.addEventListener(e,r,n),()=>t.removeEventListener(e,r)}const Epe=(t,e)=>t.depth-e.depth;class Spe{constructor(){this.children=[],this.isDirty=!1}add(e){pR(this.children,e),this.isDirty=!0}remove(e){gR(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Epe),this.isDirty=!1,this.children.forEach(e)}}function jpe(t,e){const r=gh.now(),n=({timestamp:i})=>{const a=i-r;a>=e&&(ng(n),t(a-e))};return ul.setup(n,!0),()=>ng(n)}function rj(t){return Ad(t)?t.get():t}class Tpe{constructor(){this.members=[]}add(e){pR(this.members,e),e.scheduleRender()}remove(e){if(gR(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(e){const r=this.members.findIndex(i=>e===i);if(r===0)return!1;let n;for(let i=r;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){n=a;break}}return n?(this.promote(n),!0):!1}promote(e,r){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender();const i=n.options.layoutDependency,a=e.options.layoutDependency;i!==void 0&&a!==void 0&&i===a||(e.resumeFrom=n,r&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0));const{crossfade:c}=e.options;c===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:r,resumingFrom:n}=e;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const nj={hasAnimatedSinceResize:!0,hasEverUpdated:!1},c4=["","X","Y","Z"],Cpe=1e3;let Npe=0;function u4(t,e,r,n){const{latestValues:i}=e;i[t]&&(r[t]=i[t],e.setStaticValue(t,0),n&&(n[t]=0))}function lX(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const r=Cq(e);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:i,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(r,"transform",ul,!(i||a))}const{parent:n}=t;n&&!n.hasCheckedOptimisedAppear&&lX(n)}function cX({attachResizeListener:t,defaultParent:e,measureScroll:r,checkIsScrollRoot:n,resetTransform:i}){return class{constructor(o={},c=e?.()){this.id=Npe++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Ipe),this.nodes.forEach(Rpe),this.nodes.forEach(Dpe),this.nodes.forEach(Bpe)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new Spe)}addEventListener(o,c){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new xR),this.eventHandlers.get(o).add(c)}notifyListeners(o,...c){const u=this.eventHandlers.get(o);u&&u.notify(...c)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=Fq(o)&&!NAe(o),this.instance=o;const{layoutId:c,layout:u,visualElement:l}=this.options;if(l&&!l.current&&l.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(u||c)&&(this.isLayoutDirty=!0),t){let d,f=0;const m=()=>this.root.updateBlockedByResize=!1;ul.read(()=>{f=window.innerWidth}),t(o,()=>{const p=window.innerWidth;p!==f&&(f=p,this.root.updateBlockedByResize=!0,d&&d(),d=jpe(m,250),nj.hasAnimatedSinceResize&&(nj.hasAnimatedSinceResize=!1,this.nodes.forEach(L7)))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&l&&(c||u)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f,hasRelativeLayoutChanged:m,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||l.getDefaultTransition()||Hpe,{onLayoutAnimationStart:y,onLayoutAnimationComplete:x}=l.getProps(),w=!this.targetLayout||!sX(this.targetLayout,p),_=!f&&m;if(this.options.layoutRoot||this.resumeFrom||_||f&&(w||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const E={...LR(g,"layout"),onPlay:y,onComplete:x};(l.shouldReduceMotion||this.options.layoutRoot)&&(E.delay=0,E.type=!1),this.startAnimation(E),this.setAnimationOrigin(d,_)}else f||L7(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),ng(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Mpe),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&lX(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const f=this.path[d];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:c,layout:u}=this.options;if(c===void 0&&!u)return;const l=this.getTransformTemplate();this.prevTransformTemplateValue=l?l(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(N7);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(k7);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(Ope),this.nodes.forEach(kpe),this.nodes.forEach(Lpe)):this.nodes.forEach(k7),this.clearAllSnapshots();const c=gh.now();Md.delta=WA(0,1e3/60,c-Md.timestamp),Md.timestamp=c,Md.isProcessing=!0,t4.update.process(Md),t4.preRender.process(Md),t4.render.process(Md),Md.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,RR.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Ppe),this.sharedNodes.forEach(Fpe)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ul.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ul.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!vh(this.snapshot.measuredBox.x)&&!vh(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=Du(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(c=!1),c&&this.instance){const u=n(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:u,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!iX(this.projectionDelta),u=this.getTransformTemplate(),l=u?u(this.latestValues,""):void 0,d=l!==this.prevTransformTemplateValue;o&&this.instance&&(c||Ev(this.latestValues)||d)&&(i(this.instance,l),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const c=this.measurePageBox();let u=this.removeElementScroll(c);return o&&(u=this.removeTransform(u)),Qpe(u),{animationId:this.root.animationId,measuredBox:c,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return Du();const c=o.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(zpe))){const{scroll:l}=this.root;l&&(ib(c.x,l.offset.x),ib(c.y,l.offset.y))}return c}removeElementScroll(o){const c=Du();if(wm(c,o),this.scroll?.wasRoot)return c;for(let u=0;u<this.path.length;u++){const l=this.path[u],{scroll:d,options:f}=l;l!==this.root&&d&&f.layoutScroll&&(d.wasRoot&&wm(c,o),ib(c.x,d.offset.x),ib(c.y,d.offset.y))}return c}applyTransform(o,c=!1){const u=Du();wm(u,o);for(let l=0;l<this.path.length;l++){const d=this.path[l];!c&&d.options.layoutScroll&&d.scroll&&d!==d.root&&sb(u,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),Ev(d.latestValues)&&sb(u,d.latestValues)}return Ev(this.latestValues)&&sb(u,this.latestValues),u}removeTransform(o){const c=Du();wm(c,o);for(let u=0;u<this.path.length;u++){const l=this.path[u];if(!l.instance||!Ev(l.latestValues))continue;UB(l.latestValues)&&l.updateSnapshot();const d=Du(),f=l.measurePageBox();wm(d,f),x7(c,l.latestValues,l.snapshot?l.snapshot.layoutBox:void 0,d)}return Ev(this.latestValues)&&x7(c,this.latestValues),c}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Md.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:f}=this.options;if(!this.layout||!(d||f))return;this.resolvedRelativeTargetAt=Md.timestamp;const m=this.getClosestProjectingParent();m&&this.linkedParentVersion!==m.layoutVersion&&!m.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(m&&m.layout?this.createRelativeTarget(m,this.layout.layoutBox,m.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Du(),this.targetWithTransforms=Du()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),fpe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):wm(this.target,this.layout.layoutBox),Kq(this.target,this.targetDelta)):wm(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?this.createRelativeTarget(m,this.target,m.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||UB(this.parent.latestValues)||Vq(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(o,c,u){this.relativeParent=o,this.linkedParentVersion=o.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Du(),this.relativeTargetOrigin=Du(),UT(this.relativeTargetOrigin,c,u),wm(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const o=this.getLead(),c=!!this.resumingFrom||this!==o;let u=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Md.timestamp&&(u=!1),u)return;const{layout:l,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(l||d))return;wm(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,m=this.treeScale.y;HAe(this.layoutCorrected,this.treeScale,this.path,c),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Du());const{target:p}=o;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(m7(this.prevProjectionDelta.x,this.projectionDelta.x),m7(this.prevProjectionDelta.y,this.projectionDelta.y)),o2(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==m||!S7(this.projectionDelta.x,this.prevProjectionDelta.x)||!S7(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.visualElement?.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=nb(),this.projectionDelta=nb(),this.projectionDeltaWithTransform=nb()}setAnimationOrigin(o,c=!1){const u=this.snapshot,l=u?u.latestValues:{},d={...this.latestValues},f=nb();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const m=Du(),p=u?u.source:void 0,g=this.layout?this.layout.source:void 0,y=p!==g,x=this.getStack(),w=!x||x.members.length<=1,_=!!(y&&!w&&this.options.crossfade===!0&&!this.path.some($pe));this.animationProgress=0;let E;this.mixTargetDelta=N=>{const C=N/1e3;I7(f.x,o.x,C),I7(f.y,o.y,C),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(UT(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Upe(this.relativeTarget,this.relativeTargetOrigin,m,C),E&&gpe(this.relativeTarget,E)&&(this.isProjectionDirty=!1),E||(E=Du()),wm(E,this.relativeTarget)),y&&(this.animationValues=d,xpe(d,l,this.latestValues,C,_,w)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=C},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(ng(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ul.update(()=>{nj.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=py(0)),this.currentAnimation=_pe(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),o.onUpdate&&o.onUpdate(c)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Cpe),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:c,target:u,layout:l,latestValues:d}=o;if(!(!c||!u||!l)){if(this!==o&&this.layout&&l&&uX(this.options.animationType,this.layout.layoutBox,l.layoutBox)){u=this.target||Du();const f=vh(this.layout.layoutBox.x);u.x.min=o.target.x.min,u.x.max=u.x.min+f;const m=vh(this.layout.layoutBox.y);u.y.min=o.target.y.min,u.y.max=u.y.min+m}wm(c,u),sb(c,d),o2(this.projectionDeltaWithTransform,this.layoutCorrected,c,d)}}registerSharedNode(o,c){this.sharedNodes.has(o)||this.sharedNodes.set(o,new Tpe),this.sharedNodes.get(o).add(c);const l=c.options.initialPromotionConfig;c.promote({transition:l?l.transition:void 0,preserveFollowOpacity:l&&l.shouldPreserveFollowOpacity?l.shouldPreserveFollowOpacity(c):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){const{layoutId:o}=this.options;return o?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:o}=this.options;return o?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:c,preserveFollowOpacity:u}={}){const l=this.getStack();l&&l.promote(this,u),o&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let c=!1;const{latestValues:u}=o;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(c=!0),!c)return;const l={};u.z&&u4("z",o,l,this.animationValues);for(let d=0;d<c4.length;d++)u4(`rotate${c4[d]}`,o,l,this.animationValues),u4(`skew${c4[d]}`,o,l,this.animationValues);o.render();for(const d in l)o.setStaticValue(d,l[d]),this.animationValues&&(this.animationValues[d]=l[d]);o.scheduleRender()}applyProjectionStyles(o,c){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const u=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=rj(c?.pointerEvents)||"",o.transform=u?u(this.latestValues,""):"none";return}const l=this.getLead();if(!this.projectionDelta||!this.layout||!l.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=rj(c?.pointerEvents)||""),this.hasProjected&&!Ev(this.latestValues)&&(o.transform=u?u({},""):"none",this.hasProjected=!1);return}o.visibility="";const d=l.animationValues||l.latestValues;this.applyTransformsToTarget();let f=vpe(this.projectionDeltaWithTransform,this.treeScale,d);u&&(f=u(d,f)),o.transform=f;const{x:m,y:p}=this.projectionDelta;o.transformOrigin=`${m.origin*100}% ${p.origin*100}% 0`,l.animationValues?o.opacity=l===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:o.opacity=l===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const g in HB){if(d[g]===void 0)continue;const{correct:y,applyTo:x,isCSSVariable:w}=HB[g],_=f==="none"?d[g]:y(d[g],l);if(x){const E=x.length;for(let N=0;N<E;N++)o[x[N]]=_}else w?this.options.visualElement.renderState.vars[g]=_:o[g]=_}this.options.layoutId&&(o.pointerEvents=l===this?rj(c?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>o.currentAnimation?.stop()),this.root.nodes.forEach(N7),this.root.sharedNodes.clear()}}}function kpe(t){t.updateLayout()}function Lpe(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:n}=t.layout,{animationType:i}=t.options,a=e.source!==t.layout.source;i==="size"?Gf(d=>{const f=a?e.measuredBox[d]:e.layoutBox[d],m=vh(f);f.min=r[d].min,f.max=f.min+m}):uX(i,e.layoutBox,r)&&Gf(d=>{const f=a?e.measuredBox[d]:e.layoutBox[d],m=vh(r[d]);f.max=f.min+m,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+m)});const o=nb();o2(o,r,e.layoutBox);const c=nb();a?o2(c,t.applyTransform(n,!0),e.measuredBox):o2(c,r,e.layoutBox);const u=!iX(o);let l=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:f,layout:m}=d;if(f&&m){const p=Du();UT(p,e.layoutBox,f.layoutBox);const g=Du();UT(g,r,m.layoutBox),sX(p,g)||(l=!0),d.options.layoutRoot&&(t.relativeTarget=g,t.relativeTargetOrigin=p,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:c,layoutDelta:o,hasLayoutChanged:u,hasRelativeLayoutChanged:l})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function Ipe(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function Bpe(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Ppe(t){t.clearSnapshot()}function N7(t){t.clearMeasurements()}function k7(t){t.isLayoutDirty=!1}function Ope(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function L7(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Rpe(t){t.resolveTargetDelta()}function Dpe(t){t.calcProjection()}function Mpe(t){t.resetSkewAndRotation()}function Fpe(t){t.removeLeadSnapshot()}function I7(t,e,r){t.translate=fc(e.translate,0,r),t.scale=fc(e.scale,1,r),t.origin=e.origin,t.originPoint=e.originPoint}function B7(t,e,r,n){t.min=fc(e.min,r.min,n),t.max=fc(e.max,r.max,n)}function Upe(t,e,r,n){B7(t.x,e.x,r.x,n),B7(t.y,e.y,r.y,n)}function $pe(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const Hpe={duration:.45,ease:[.4,0,.1,1]},P7=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),O7=P7("applewebkit/")&&!P7("chrome/")?Math.round:rm;function R7(t){t.min=O7(t.min),t.max=O7(t.max)}function Qpe(t){R7(t.x),R7(t.y)}function uX(t,e,r){return t==="position"||t==="preserve-aspect"&&!hpe(E7(e),E7(r),.2)}function zpe(t){return t!==t.root&&t.scroll?.wasRoot}const Vpe=cX({attachResizeListener:(t,e)=>O2(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body?.scrollLeft||0,y:document.documentElement.scrollTop||document.body?.scrollTop||0}),checkIsScrollRoot:()=>!0}),d4={current:void 0},dX=cX({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!d4.current){const t=new Vpe({});t.mount(window),t.setOptions({layoutScroll:!0}),d4.current=t}return d4.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),D_=T.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function D7(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Kpe(...t){return e=>{let r=!1;const n=t.map(i=>{const a=D7(i,e);return!r&&typeof a=="function"&&(r=!0),a});if(r)return()=>{for(let i=0;i<n.length;i++){const a=n[i];typeof a=="function"?a():D7(t[i],null)}}}}function Gpe(...t){return T.useCallback(Kpe(...t),t)}class Wpe extends T.Component{getSnapshotBeforeUpdate(e){const r=this.props.childRef.current;if(r&&e.isPresent&&!this.props.isPresent){const n=r.offsetParent,i=MB(n)&&n.offsetWidth||0,a=MB(n)&&n.offsetHeight||0,o=this.props.sizeRef.current;o.height=r.offsetHeight||0,o.width=r.offsetWidth||0,o.top=r.offsetTop,o.left=r.offsetLeft,o.right=i-o.width-o.left,o.bottom=a-o.height-o.top}return null}componentDidUpdate(){}render(){return this.props.children}}function Ype({children:t,isPresent:e,anchorX:r,anchorY:n,root:i}){const a=T.useId(),o=T.useRef(null),c=T.useRef({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:u}=T.useContext(D_),l=t.props?.ref??t?.ref,d=Gpe(o,l);return T.useInsertionEffect(()=>{const{width:f,height:m,top:p,left:g,right:y,bottom:x}=c.current;if(e||!o.current||!f||!m)return;const w=r==="left"?`left: ${g}`:`right: ${y}`,_=n==="bottom"?`bottom: ${x}`:`top: ${p}`;o.current.dataset.motionPopId=a;const E=document.createElement("style");u&&(E.nonce=u);const N=i??document.head;return N.appendChild(E),E.sheet&&E.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${f}px !important;
            height: ${m}px !important;
            ${w}px !important;
            ${_}px !important;
          }
        `),()=>{N.contains(E)&&N.removeChild(E)}},[e]),s.jsx(Wpe,{isPresent:e,childRef:o,sizeRef:c,children:T.cloneElement(t,{ref:d})})}const qpe=({children:t,initial:e,isPresent:r,onExitComplete:n,custom:i,presenceAffectsLayout:a,mode:o,anchorX:c,anchorY:u,root:l})=>{const d=B_(Xpe),f=T.useId();let m=!0,p=T.useMemo(()=>(m=!1,{id:f,initial:e,isPresent:r,custom:i,onExitComplete:g=>{d.set(g,!0);for(const y of d.values())if(!y)return;n&&n()},register:g=>(d.set(g,!1),()=>d.delete(g))}),[r,d,n]);return a&&m&&(p={...p}),T.useMemo(()=>{d.forEach((g,y)=>d.set(y,!1))},[r]),T.useEffect(()=>{!r&&!d.size&&n&&n()},[r]),o==="popLayout"&&(t=s.jsx(Ype,{isPresent:r,anchorX:c,anchorY:u,root:l,children:t})),s.jsx(QN.Provider,{value:p,children:t})};function Xpe(){return new Map}function hX(t=!0){const e=T.useContext(QN);if(e===null)return[!0,null];const{isPresent:r,onExitComplete:n,register:i}=e,a=T.useId();T.useEffect(()=>{if(t)return i(a)},[t]);const o=T.useCallback(()=>t&&n&&n(a),[a,n,t]);return!r&&n?[!1,o]:[!0]}const zE=t=>t.key||"";function M7(t){const e=[];return T.Children.forEach(t,r=>{T.isValidElement(r)&&e.push(r)}),e}const Gp=({children:t,custom:e,initial:r=!0,onExitComplete:n,presenceAffectsLayout:i=!0,mode:a="sync",propagate:o=!1,anchorX:c="left",anchorY:u="top",root:l})=>{const[d,f]=hX(o),m=T.useMemo(()=>M7(t),[t]),p=o&&!d?[]:m.map(zE),g=T.useRef(!0),y=T.useRef(m),x=B_(()=>new Map),w=T.useRef(new Set),[_,E]=T.useState(m),[N,C]=T.useState(m);AR(()=>{g.current=!1,y.current=m;for(let U=0;U<N.length;U++){const G=zE(N[U]);p.includes(G)?(x.delete(G),w.current.delete(G)):x.get(G)!==!0&&x.set(G,!1)}},[N,p.length,p.join("-")]);const I=[];if(m!==_){let U=[...m];for(let G=0;G<N.length;G++){const q=N[G],J=zE(q);p.includes(J)||(U.splice(G,0,q),I.push(q))}return a==="wait"&&I.length&&(U=I),C(M7(U)),E(m),null}const{forceRender:D}=T.useContext(mR);return s.jsx(s.Fragment,{children:N.map(U=>{const G=zE(U),q=o&&!d?!1:m===N||p.includes(G),J=()=>{if(w.current.has(G))return;if(w.current.add(G),x.has(G))x.set(G,!0);else return;let de=!0;x.forEach(xe=>{xe||(de=!1)}),de&&(D?.(),C(y.current),o&&f?.(),n&&n())};return s.jsx(qpe,{isPresent:q,initial:!g.current||r?void 0:!1,custom:e,presenceAffectsLayout:i,mode:a,root:l,onExitComplete:q?void 0:J,anchorX:c,anchorY:u,children:U},G)})})},fX=T.createContext({strict:!1}),F7={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let U7=!1;function Zpe(){if(U7)return;const t={};for(const e in F7)t[e]={isEnabled:r=>F7[e].some(n=>!!r[n])};Hq(t),U7=!0}function mX(){return Zpe(),MAe()}function Jpe(t){const e=mX();for(const r in t)e[r]={...e[r],...t[r]};Hq(e)}const ege=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function $T(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||ege.has(t)}let AX=t=>!$T(t);function tge(t){typeof t=="function"&&(AX=e=>e.startsWith("on")?!$T(e):t(e))}try{tge(require("@emotion/is-prop-valid").default)}catch{}function rge(t,e,r){const n={};for(const i in t)i==="values"&&typeof t.values=="object"||(AX(i)||r===!0&&$T(i)||!e&&!$T(i)||t.draggable&&i.startsWith("onDrag"))&&(n[i]=t[i]);return n}const GN=T.createContext({});function nge(t,e){if(KN(t)){const{initial:r,animate:n}=t;return{initial:r===!1||P2(r)?r:void 0,animate:P2(n)?n:void 0}}return t.inherit!==!1?e:{}}function ige(t){const{initial:e,animate:r}=nge(t,T.useContext(GN));return T.useMemo(()=>({initial:e,animate:r}),[$7(e),$7(r)])}function $7(t){return Array.isArray(t)?t.join(" "):t}const HR=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function pX(t,e,r){for(const n in e)!Ad(e[n])&&!Yq(n,r)&&(t[n]=e[n])}function sge({transformTemplate:t},e){return T.useMemo(()=>{const r=HR();return UR(r,e,t),Object.assign({},r.vars,r.style)},[e])}function age(t,e){const r=t.style||{},n={};return pX(n,r,t),Object.assign(n,sge(t,e)),n}function oge(t,e){const r={},n=age(t,e);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=n,r}const gX=()=>({...HR(),attrs:{}});function lge(t,e,r,n){const i=T.useMemo(()=>{const a=gX();return qq(a,e,Zq(n),t.transformTemplate,t.style),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};pX(a,t.style,t),i.style={...a,...i.style}}return i}const cge=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function QR(t){return typeof t!="string"||t.includes("-")?!1:!!(cge.indexOf(t)>-1||/[A-Z]/u.test(t))}function uge(t,e,r,{latestValues:n},i,a=!1,o){const u=(o??QR(t)?lge:oge)(e,n,i,t),l=rge(e,typeof t=="string",a),d=t!==T.Fragment?{...l,...u,ref:r}:{},{children:f}=e,m=T.useMemo(()=>Ad(f)?f.get():f,[f]);return T.createElement(t,{...d,children:m})}function dge({scrapeMotionValuesFromProps:t,createRenderState:e},r,n,i){return{latestValues:hge(r,n,i,t),renderState:e()}}function hge(t,e,r,n){const i={},a=n(t,{});for(const m in a)i[m]=rj(a[m]);let{initial:o,animate:c}=t;const u=KN(t),l=$q(t);e&&l&&!u&&t.inherit!==!1&&(o===void 0&&(o=e.initial),c===void 0&&(c=e.animate));let d=r?r.initial===!1:!1;d=d||o===!1;const f=d?c:o;if(f&&typeof f!="boolean"&&!VN(f)){const m=Array.isArray(f)?f:[f];for(let p=0;p<m.length;p++){const g=BR(t,m[p]);if(g){const{transitionEnd:y,transition:x,...w}=g;for(const _ in w){let E=w[_];if(Array.isArray(E)){const N=d?E.length-1:0;E=E[N]}E!==null&&(i[_]=E)}for(const _ in y)i[_]=y[_]}}}return i}const vX=t=>(e,r)=>{const n=T.useContext(GN),i=T.useContext(QN),a=()=>dge(t,e,n,i);return r?a():B_(a)},fge=vX({scrapeMotionValuesFromProps:$R,createRenderState:HR}),mge=vX({scrapeMotionValuesFromProps:Jq,createRenderState:gX}),Age=Symbol.for("motionComponentSymbol");function pge(t,e,r){const n=T.useRef(r);T.useInsertionEffect(()=>{n.current=r});const i=T.useRef(null);return T.useCallback(a=>{a&&t.onMount?.(a),e&&(a?e.mount(a):e.unmount());const o=n.current;if(typeof o=="function")if(a){const c=o(a);typeof c=="function"&&(i.current=c)}else i.current?(i.current(),i.current=null):o(a);else o&&(o.current=a)},[e])}const yX=T.createContext({});function jw(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function gge(t,e,r,n,i,a){const{visualElement:o}=T.useContext(GN),c=T.useContext(fX),u=T.useContext(QN),l=T.useContext(D_).reducedMotion,d=T.useRef(null),f=T.useRef(!1);n=n||c.renderer,!d.current&&n&&(d.current=n(t,{visualState:e,parent:o,props:r,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:l,isSVG:a}),f.current&&d.current&&(d.current.manuallyAnimateOnMount=!0));const m=d.current,p=T.useContext(yX);m&&!m.projection&&i&&(m.type==="html"||m.type==="svg")&&vge(d.current,r,i,p);const g=T.useRef(!1);T.useInsertionEffect(()=>{m&&g.current&&m.update(r,u)});const y=r[Tq],x=T.useRef(!!y&&!window.MotionHandoffIsComplete?.(y)&&window.MotionHasOptimisedAnimation?.(y));return AR(()=>{f.current=!0,m&&(g.current=!0,window.MotionIsMounted=!0,m.updateFeatures(),m.scheduleRenderMicrotask(),x.current&&m.animationState&&m.animationState.animateChanges())}),T.useEffect(()=>{m&&(!x.current&&m.animationState&&m.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(y)}),x.current=!1),m.enteringChildren=void 0)}),m}function vge(t,e,r,n){const{layoutId:i,layout:a,drag:o,dragConstraints:c,layoutScroll:u,layoutRoot:l,layoutCrossfade:d}=e;t.projection=new r(t.latestValues,e["data-framer-portal-id"]?void 0:xX(t.parent)),t.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!o||c&&jw(c),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:n,crossfade:d,layoutScroll:u,layoutRoot:l})}function xX(t){if(t)return t.options.allowProjection!==!1?t.projection:xX(t.parent)}function h4(t,{forwardMotionProps:e=!1,type:r}={},n,i){n&&Jpe(n);const a=r?r==="svg":QR(t),o=a?mge:fge;function c(l,d){let f;const m={...T.useContext(D_),...l,layoutId:yge(l)},{isStatic:p}=m,g=ige(l),y=o(l,p);if(!p&&QY){xge();const x=bge(m);f=x.MeasureLayout,g.visualElement=gge(t,y,m,i,x.ProjectionNode,a)}return s.jsxs(GN.Provider,{value:g,children:[f&&g.visualElement?s.jsx(f,{visualElement:g.visualElement,...m}):null,uge(t,l,pge(y,g.visualElement,d),y,p,e,a)]})}c.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const u=T.forwardRef(c);return u[Age]=t,u}function yge({layoutId:t}){const e=T.useContext(mR).id;return e&&t!==void 0?e+"-"+t:t}function xge(t,e){T.useContext(fX).strict}function bge(t){const e=mX(),{drag:r,layout:n}=e;if(!r&&!n)return{};const i={...r,...n};return{MeasureLayout:r?.isEnabled(t)||n?.isEnabled(t)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function wge(t,e){if(typeof Proxy>"u")return h4;const r=new Map,n=(a,o)=>h4(a,o,t,e),i=(a,o)=>n(a,o);return new Proxy(i,{get:(a,o)=>o==="create"?n:(r.has(o)||r.set(o,h4(o,void 0,t,e)),r.get(o))})}const _ge=(t,e)=>e.isSVG??QR(t)?new tpe(e):new YAe(e,{allowProjection:t!==T.Fragment});class Ege extends q0{constructor(e){super(e),e.animationState||(e.animationState=ape(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();VN(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:r}=this.node.prevProps||{};e!==r&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let Sge=0;class jge extends q0{constructor(){super(...arguments),this.id=Sge++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:r}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const i=this.node.animationState.setActive("exit",!e);r&&!e&&i.then(()=>{r(this.id)})}mount(){const{register:e,onExitComplete:r}=this.node.presenceContext||{};r&&r(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const Tge={animation:{Feature:Ege},exit:{Feature:jge}};function M_(t){return{point:{x:t.pageX,y:t.pageY}}}const Cge=t=>e=>DR(e)&&t(e,M_(e));function l2(t,e,r,n){return O2(t,e,Cge(r),n)}const bX=({current:t})=>t?t.ownerDocument.defaultView:null,H7=(t,e)=>Math.abs(t-e);function Nge(t,e){const r=H7(t.x,e.x),n=H7(t.y,e.y);return Math.sqrt(r**2+n**2)}const Q7=new Set(["auto","scroll"]);class wX{constructor(e,r,{transformPagePoint:n,contextWindow:i=window,dragSnapToOrigin:a=!1,distanceThreshold:o=3,element:c}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=p=>{this.handleScroll(p.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const p=m4(this.lastMoveEventInfo,this.history),g=this.startEvent!==null,y=Nge(p.offset,{x:0,y:0})>=this.distanceThreshold;if(!g&&!y)return;const{point:x}=p,{timestamp:w}=Md;this.history.push({...x,timestamp:w});const{onStart:_,onMove:E}=this.handlers;g||(_&&_(this.lastMoveEvent,p),this.startEvent=this.lastMoveEvent),E&&E(this.lastMoveEvent,p)},this.handlePointerMove=(p,g)=>{this.lastMoveEvent=p,this.lastMoveEventInfo=f4(g,this.transformPagePoint),ul.update(this.updatePoint,!0)},this.handlePointerUp=(p,g)=>{this.end();const{onEnd:y,onSessionEnd:x,resumeAnimation:w}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&w&&w(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=m4(p.type==="pointercancel"?this.lastMoveEventInfo:f4(g,this.transformPagePoint),this.history);this.startEvent&&y&&y(p,_),x&&x(p,_)},!DR(e))return;this.dragSnapToOrigin=a,this.handlers=r,this.transformPagePoint=n,this.distanceThreshold=o,this.contextWindow=i||window;const u=M_(e),l=f4(u,this.transformPagePoint),{point:d}=l,{timestamp:f}=Md;this.history=[{...d,timestamp:f}];const{onSessionStart:m}=r;m&&m(e,m4(l,this.history)),this.removeListeners=P_(l2(this.contextWindow,"pointermove",this.handlePointerMove),l2(this.contextWindow,"pointerup",this.handlePointerUp),l2(this.contextWindow,"pointercancel",this.handlePointerUp)),c&&this.startScrollTracking(c)}startScrollTracking(e){let r=e.parentElement;for(;r;){const n=getComputedStyle(r);(Q7.has(n.overflowX)||Q7.has(n.overflowY))&&this.scrollPositions.set(r,{x:r.scrollLeft,y:r.scrollTop}),r=r.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(e){const r=this.scrollPositions.get(e);if(!r)return;const n=e===window,i=n?{x:window.scrollX,y:window.scrollY}:{x:e.scrollLeft,y:e.scrollTop},a={x:i.x-r.x,y:i.y-r.y};a.x===0&&a.y===0||(n?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=a.x,this.lastMoveEventInfo.point.y+=a.y):this.history.length>0&&(this.history[0].x-=a.x,this.history[0].y-=a.y),this.scrollPositions.set(e,i),ul.update(this.updatePoint,!0))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),ng(this.updatePoint)}}function f4(t,e){return e?{point:e(t.point)}:t}function z7(t,e){return{x:t.x-e.x,y:t.y-e.y}}function m4({point:t},e){return{point:t,delta:z7(t,_X(e)),offset:z7(t,kge(e)),velocity:Lge(e,.1)}}function kge(t){return t[0]}function _X(t){return t[t.length-1]}function Lge(t,e){if(t.length<2)return{x:0,y:0};let r=t.length-1,n=null;const i=_X(t);for(;r>=0&&(n=t[r],!(i.timestamp-n.timestamp>Kp(e)));)r--;if(!n)return{x:0,y:0};const a=Jf(i.timestamp-n.timestamp);if(a===0)return{x:0,y:0};const o={x:(i.x-n.x)/a,y:(i.y-n.y)/a};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Ige(t,{min:e,max:r},n){return e!==void 0&&t<e?t=n?fc(e,t,n.min):Math.max(t,e):r!==void 0&&t>r&&(t=n?fc(r,t,n.max):Math.min(t,r)),t}function V7(t,e,r){return{min:e!==void 0?t.min+e:void 0,max:r!==void 0?t.max+r-(t.max-t.min):void 0}}function Bge(t,{top:e,left:r,bottom:n,right:i}){return{x:V7(t.x,r,i),y:V7(t.y,e,n)}}function K7(t,e){let r=e.min-t.min,n=e.max-t.max;return e.max-e.min<t.max-t.min&&([r,n]=[n,r]),{min:r,max:n}}function Pge(t,e){return{x:K7(t.x,e.x),y:K7(t.y,e.y)}}function Oge(t,e){let r=.5;const n=vh(t),i=vh(e);return i>n?r=L2(e.min,e.max-n,t.min):n>i&&(r=L2(t.min,t.max-i,e.min)),WA(0,1,r)}function Rge(t,e){const r={};return e.min!==void 0&&(r.min=e.min-t.min),e.max!==void 0&&(r.max=e.max-t.min),r}const QB=.35;function Dge(t=QB){return t===!1?t=0:t===!0&&(t=QB),{x:G7(t,"left","right"),y:G7(t,"top","bottom")}}function G7(t,e,r){return{min:W7(t,e),max:W7(t,r)}}function W7(t,e){return typeof t=="number"?t:t[e]||0}const Mge=new WeakMap;class Fge{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Du(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:r=!1,distanceThreshold:n}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const a=f=>{r?(this.stopAnimation(),this.snapToCursor(M_(f).point)):this.pauseAnimation()},o=(f,m)=>{this.stopAnimation();const{drag:p,dragPropagation:g,onDragStart:y}=this.getProps();if(p&&!g&&(this.openDragLock&&this.openDragLock(),this.openDragLock=EAe(p),!this.openDragLock))return;this.latestPointerEvent=f,this.latestPanInfo=m,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Gf(w=>{let _=this.getAxisMotionValue(w).get()||0;if(zA.test(_)){const{projection:E}=this.visualElement;if(E&&E.layout){const N=E.layout.layoutBox[w];N&&(_=vh(N)*(parseFloat(_)/100))}}this.originPoint[w]=_}),y&&ul.postRender(()=>y(f,m)),OB(this.visualElement,"transform");const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},c=(f,m)=>{this.latestPointerEvent=f,this.latestPanInfo=m;const{dragPropagation:p,dragDirectionLock:g,onDirectionLock:y,onDrag:x}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:w}=m;if(g&&this.currentDirection===null){this.currentDirection=Uge(w),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",m.point,w),this.updateAxis("y",m.point,w),this.visualElement.render(),x&&x(f,m)},u=(f,m)=>{this.latestPointerEvent=f,this.latestPanInfo=m,this.stop(f,m),this.latestPointerEvent=null,this.latestPanInfo=null},l=()=>Gf(f=>this.getAnimationState(f)==="paused"&&this.getAxisMotionValue(f).animation?.play()),{dragSnapToOrigin:d}=this.getProps();this.panSession=new wX(e,{onSessionStart:a,onStart:o,onMove:c,onSessionEnd:u,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:n,contextWindow:bX(this.visualElement),element:this.visualElement.current})}stop(e,r){const n=e||this.latestPointerEvent,i=r||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!i||!n)return;const{velocity:o}=i;this.startAnimation(o);const{onDragEnd:c}=this.getProps();c&&ul.postRender(()=>c(n,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:r}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(e,r,n){const{drag:i}=this.getProps();if(!n||!VE(e,i,this.currentDirection))return;const a=this.getAxisMotionValue(e);let o=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(o=Ige(o,this.constraints[e],this.elastic[e])),a.set(o)}resolveConstraints(){const{dragConstraints:e,dragElastic:r}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;e&&jw(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&n?this.constraints=Bge(n.layoutBox,e):this.constraints=!1,this.elastic=Dge(r),i!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&Gf(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=Rge(n.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:r}=this.getProps();if(!e||!jw(e))return!1;const n=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=QAe(n,i.root,this.visualElement.getTransformPagePoint());let o=Pge(i.layout.layoutBox,a);if(r){const c=r(UAe(o));this.hasMutatedConstraints=!!c,c&&(o=zq(c))}return o}startAnimation(e){const{drag:r,dragMomentum:n,dragElastic:i,dragTransition:a,dragSnapToOrigin:o,onDragTransitionEnd:c}=this.getProps(),u=this.constraints||{},l=Gf(d=>{if(!VE(d,r,this.currentDirection))return;let f=u&&u[d]||{};o&&(f={min:0,max:0});const m=i?200:1e6,p=i?40:1e7,g={type:"inertia",velocity:n?e[d]:0,bounceStiffness:m,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...a,...f};return this.startAxisValueAnimation(d,g)});return Promise.all(l).then(c)}startAxisValueAnimation(e,r){const n=this.getAxisMotionValue(e);return OB(this.visualElement,e),n.start(IR(e,n,0,r,this.visualElement,!1))}stopAnimation(){Gf(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Gf(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const r=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),i=n[r];return i||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){Gf(r=>{const{drag:n}=this.getProps();if(!VE(r,n,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(r);if(i&&i.layout){const{min:o,max:c}=i.layout.layoutBox[r],u=a.get()||0;a.set(e[r]-fc(o,c,.5)+u)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!jw(r)||!n||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Gf(o=>{const c=this.getAxisMotionValue(o);if(c&&this.constraints!==!1){const u=c.get();i[o]=Oge({min:u,max:u},this.constraints[o])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Gf(o=>{if(!VE(o,e,null))return;const c=this.getAxisMotionValue(o),{min:u,max:l}=this.constraints[o];c.set(fc(u,l,i[o]))})}addListeners(){if(!this.visualElement.current)return;Mge.set(this.visualElement,this);const e=this.visualElement.current,r=l2(e,"pointerdown",u=>{const{drag:l,dragListener:d=!0}=this.getProps(),f=u.target,m=f!==e&&Mq(f);l&&d&&!m&&this.start(u)}),n=()=>{const{dragConstraints:u}=this.getProps();jw(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",n);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),ul.read(n);const o=O2(window,"resize",()=>this.scalePositionWithinConstraints()),c=i.addEventListener("didUpdate",(({delta:u,hasLayoutChanged:l})=>{this.isDragging&&l&&(Gf(d=>{const f=this.getAxisMotionValue(d);f&&(this.originPoint[d]+=u[d].translate,f.set(f.get()+u[d].translate))}),this.visualElement.render())}));return()=>{o(),r(),a(),c&&c()}}getProps(){const e=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:o=QB,dragMomentum:c=!0}=e;return{...e,drag:r,dragDirectionLock:n,dragPropagation:i,dragConstraints:a,dragElastic:o,dragMomentum:c}}}function VE(t,e,r){return(e===!0||e===t)&&(r===null||r===t)}function Uge(t,e=10){let r=null;return Math.abs(t.y)>e?r="y":Math.abs(t.x)>e&&(r="x"),r}class $ge extends q0{constructor(e){super(e),this.removeGroupControls=rm,this.removeListeners=rm,this.controls=new Fge(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||rm}update(){const{dragControls:e}=this.node.getProps(),{dragControls:r}=this.node.prevProps||{};e!==r&&(this.removeGroupControls(),e&&(this.removeGroupControls=e.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}}const Y7=t=>(e,r)=>{t&&ul.postRender(()=>t(e,r))};class Hge extends q0{constructor(){super(...arguments),this.removePointerDownListener=rm}onPointerDown(e){this.session=new wX(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:bX(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:r,onPan:n,onPanEnd:i}=this.node.getProps();return{onSessionStart:Y7(e),onStart:Y7(r),onMove:n,onEnd:(a,o)=>{delete this.session,i&&ul.postRender(()=>i(a,o))}}}mount(){this.removePointerDownListener=l2(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let A4=!1;class Qge extends T.Component{componentDidMount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:n,layoutId:i}=this.props,{projection:a}=e;a&&(r.group&&r.group.add(a),n&&n.register&&i&&n.register(a),A4&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),nj.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:r,visualElement:n,drag:i,isPresent:a}=this.props,{projection:o}=n;return o&&(o.isPresent=a,e.layoutDependency!==r&&o.setOptions({...o.options,layoutDependency:r}),A4=!0,i||e.layoutDependency!==r||r===void 0||e.isPresent!==a?o.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?o.promote():o.relegate()||ul.postRender(()=>{const c=o.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),RR.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:i}=e;A4=!0,i&&(i.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(i),n&&n.deregister&&n.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function EX(t){const[e,r]=hX(),n=T.useContext(mR);return s.jsx(Qge,{...t,layoutGroup:n,switchLayoutGroup:T.useContext(yX),isPresent:e,safeToRemove:r})}const zge={pan:{Feature:Hge},drag:{Feature:$ge,ProjectionNode:dX,MeasureLayout:EX}};function q7(t,e,r){const{props:n}=t;t.animationState&&n.whileHover&&t.animationState.setActive("whileHover",r==="Start");const i="onHover"+r,a=n[i];a&&ul.postRender(()=>a(e,M_(e)))}class Vge extends q0{mount(){const{current:e}=this.node;e&&(this.unmount=SAe(e,(r,n)=>(q7(this.node,n,"Start"),i=>q7(this.node,i,"End"))))}unmount(){}}class Kge extends q0{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=P_(O2(this.node.current,"focus",()=>this.onFocus()),O2(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function X7(t,e,r){const{props:n}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&n.whileTap&&t.animationState.setActive("whileTap",r==="Start");const i="onTap"+(r==="End"?"":r),a=n[i];a&&ul.postRender(()=>a(e,M_(e)))}class Gge extends q0{mount(){const{current:e}=this.node;e&&(this.unmount=CAe(e,(r,n)=>(X7(this.node,n,"Start"),(i,{success:a})=>X7(this.node,i,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const zB=new WeakMap,p4=new WeakMap,Wge=t=>{const e=zB.get(t.target);e&&e(t)},Yge=t=>{t.forEach(Wge)};function qge({root:t,...e}){const r=t||document;p4.has(r)||p4.set(r,{});const n=p4.get(r),i=JSON.stringify(e);return n[i]||(n[i]=new IntersectionObserver(Yge,{root:t,...e})),n[i]}function Xge(t,e,r){const n=qge(e);return zB.set(t,r),n.observe(t),()=>{zB.delete(t),n.unobserve(t)}}const Zge={some:0,all:1};class Jge extends q0{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:r,margin:n,amount:i="some",once:a}=e,o={root:r?r.current:void 0,rootMargin:n,threshold:typeof i=="number"?i:Zge[i]},c=u=>{const{isIntersecting:l}=u;if(this.isInView===l||(this.isInView=l,a&&!l&&this.hasEnteredView))return;l&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",l);const{onViewportEnter:d,onViewportLeave:f}=this.node.getProps(),m=l?d:f;m&&m(u)};return Xge(this.node.current,o,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:r}=this.node;["amount","margin","root"].some(e0e(e,r))&&this.startObserver()}unmount(){}}function e0e({viewport:t={}},{viewport:e={}}={}){return r=>t[r]!==e[r]}const t0e={inView:{Feature:Jge},tap:{Feature:Gge},focus:{Feature:Kge},hover:{Feature:Vge}},r0e={layout:{ProjectionNode:dX,MeasureLayout:EX}},n0e={...Tge,...t0e,...zge,...r0e},Dr=wge(n0e,_ge);function SX(t){const e=B_(()=>py(t)),{isStatic:r}=T.useContext(D_);if(r){const[,n]=T.useState(t);T.useEffect(()=>e.on("change",n),[])}return e}function jX(t,e){const r=SX(e()),n=()=>r.set(e());return n(),AR(()=>{const i=()=>ul.preRender(n,!1,!0),a=t.map(o=>o.on("change",i));return()=>{a.forEach(o=>o()),ng(n)}}),r}function i0e(t){a2.current=[],t();const e=jX(a2.current,t);return a2.current=void 0,e}function TX(t,e,r,n){if(typeof t=="function")return i0e(t);const a=typeof e=="function"?e:kAe(e,r,n);return Array.isArray(t)?Z7(t,a):Z7([t],([o])=>a(o))}function Z7(t,e){const r=B_(()=>[]);return jX(t,()=>{r.length=0;const n=t.length;for(let i=0;i<n;i++)r[i]=t[i].get();return e(r)})}function s0e(t,e={}){const{isStatic:r}=T.useContext(D_),n=()=>Ad(t)?t.get():t;if(r)return TX(n);const i=SX(n());return T.useInsertionEffect(()=>LAe(i,t,e),[i,JSON.stringify(e)]),i}function a0e(t,e={}){return s0e(t,{type:"spring",...e})}const J7=[{path:"/",label:"Home"},{path:"/work-with-us",label:"Work With Us"},{path:"/work",label:"Our Work"},{path:"/content",label:"Athlete Content Order"},{path:"/contact",label:"Contact"}],o0e=()=>{const[t,e]=T.useState(!1),[r,n]=T.useState(!1),i=kf();return T.useEffect(()=>{const a=()=>n(window.scrollY>20);return window.addEventListener("scroll",a),()=>window.removeEventListener("scroll",a)},[]),T.useEffect(()=>{e(!1)},[i]),s.jsxs("nav",{className:`fixed top-0 left-0 right-0 z-50 transition-all duration-300 ${r?"bg-dark-950/95 backdrop-blur-md border-b border-gray-800/50 shadow-lg":"bg-transparent"}`,children:[s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6",children:s.jsxs("div",{className:"flex items-center justify-between h-16 sm:h-20",children:[s.jsx(rs,{to:"/",className:"flex items-center gap-2 group",children:s.jsxs("span",{className:"text-xl sm:text-2xl font-black tracking-wider",children:[s.jsx("span",{className:"text-gradient",children:"FIT FOCUS"})," ",s.jsx("span",{className:"text-white group-hover:text-primary-400 transition-colors",children:"MEDIA"})]})}),s.jsxs("div",{className:"hidden md:flex items-center gap-1",children:[J7.map(a=>s.jsx(rs,{to:a.path,className:`px-4 py-2 rounded-lg text-sm font-semibold transition-all ${i.pathname===a.path?"text-primary-400 bg-primary-600/10":"text-gray-300 hover:text-white hover:bg-white/5"}`,children:a.label},a.path)),s.jsx(rs,{to:"/portal",className:"ml-2 px-4 py-2 text-sm font-semibold text-gray-400 hover:text-white hover:bg-white/5 rounded-lg transition-all",children:"Portal"}),s.jsx(rs,{to:"/proposal",className:"ml-1 px-5 py-2.5 bg-primary-600 hover:bg-primary-700 text-white font-bold rounded-lg text-sm transition-all hover:scale-105",children:"Get Started"})]}),s.jsx("button",{onClick:()=>e(!t),className:"md:hidden p-2 text-gray-300 hover:text-white",children:t?s.jsx(tg,{className:"w-6 h-6"}):s.jsx(DY,{className:"w-6 h-6"})})]})}),s.jsx(Gp,{children:t&&s.jsx(Dr.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"md:hidden bg-dark-950/98 backdrop-blur-md border-b border-gray-800",children:s.jsxs("div",{className:"px-4 py-4 space-y-1",children:[J7.map(a=>s.jsx(rs,{to:a.path,className:`block px-4 py-3 rounded-lg text-base font-semibold transition-all ${i.pathname===a.path?"text-primary-400 bg-primary-600/10":"text-gray-300 hover:text-white hover:bg-white/5"}`,children:a.label},a.path)),s.jsx(rs,{to:"/portal",className:"block px-4 py-3 rounded-lg text-base font-semibold text-gray-400 hover:text-white hover:bg-white/5 transition-all",children:"Portal"}),s.jsx(rs,{to:"/proposal",className:"block mt-3 px-4 py-3 bg-primary-600 hover:bg-primary-700 text-white font-bold rounded-lg text-center transition-all",children:"Get Your Free Analysis"})]})})})]})},l0e=()=>s.jsx("footer",{className:"bg-dark-950 border-t border-gray-800",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-12 sm:py-16",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8 sm:gap-12",children:[s.jsxs("div",{className:"md:col-span-2",children:[s.jsx(rs,{to:"/",className:"inline-block mb-4",children:s.jsxs("span",{className:"text-2xl font-black tracking-wider",children:[s.jsx("span",{className:"text-gradient",children:"FIT FOCUS"})," ",s.jsx("span",{className:"text-white",children:"MEDIA"})]})}),s.jsx("p",{className:"text-gray-400 text-sm leading-relaxed max-w-md mb-6",children:"Professional live production for combat sports. We produce your events at zero cost and help you unlock new revenue streams through PPV, content, and sponsorship opportunities."}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("a",{href:"https://instagram.com/fitfocusmedia",target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 bg-dark-800 hover:bg-primary-600/20 border border-gray-700 hover:border-primary-600 rounded-lg flex items-center justify-center transition-all",children:s.jsx(HN,{className:"w-5 h-5 text-gray-400 hover:text-primary-400"})}),s.jsx("a",{href:"https://youtube.com/@fitfocusmedia",target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 bg-dark-800 hover:bg-primary-600/20 border border-gray-700 hover:border-primary-600 rounded-lg flex items-center justify-center transition-all",children:s.jsx(HY,{className:"w-5 h-5 text-gray-400 hover:text-primary-400"})}),s.jsx("a",{href:"https://facebook.com/FitFocusMedia",target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 bg-dark-800 hover:bg-primary-600/20 border border-gray-700 hover:border-primary-600 rounded-lg flex items-center justify-center transition-all",children:s.jsx(I_,{className:"w-5 h-5 text-gray-400 hover:text-primary-400"})})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-white font-bold mb-4",children:"Quick Links"}),s.jsx("ul",{className:"space-y-2",children:[{to:"/services",label:"Services"},{to:"/work",label:"Our Work"},{to:"/proposal",label:"Free Analysis"},{to:"/contact",label:"Contact"},{to:"/privacy",label:"Privacy Policy"},{to:"/terms",label:"Terms of Service"}].map(t=>s.jsx("li",{children:s.jsx(rs,{to:t.to,className:"text-gray-400 hover:text-primary-400 text-sm transition-colors",children:t.label})},t.to))})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-white font-bold mb-4",children:"Contact"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("a",{href:"mailto:info@fitfocusmedia.com.au",className:"flex items-center gap-2 text-gray-400 hover:text-primary-400 text-sm transition-colors",children:[s.jsx(tu,{className:"w-4 h-4"}),"info@fitfocusmedia.com.au"]}),s.jsx("p",{className:"text-gray-500 text-xs",children:"Based in Queensland, Australia"}),s.jsx("p",{className:"text-gray-500 text-xs",children:"Servicing events Australia-wide + International"})]})]})]}),s.jsxs("div",{className:"mt-12 pt-6 border-t border-gray-800 flex flex-col sm:flex-row justify-between items-center gap-4",children:[s.jsxs("p",{className:"text-gray-500 text-xs",children:[" ",new Date().getFullYear()," Fit Focus Media. All rights reserved."]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-gray-600 text-xs",children:"Professional Combat Sports Production"}),s.jsxs("p",{className:"text-gray-700 text-[10px] mt-1",children:["v","260226.2314"]})]})]})]})}),Ts="/",g4=[`${Ts}images/hero/aggression-hero-1.jpg`,`${Ts}images/hero/aggression-hero-2.jpg`,`${Ts}images/hero/aggression-hero-3.jpg`,`${Ts}images/hero/wng1-hero-1.jpg`,`${Ts}images/hero/wng1-hero-2.jpg`],Bc={wng1:[{src:`${Ts}images/events/wng1/wng1-01226.jpg`,alt:"WNG1 Grappling Action",category:"events"},{src:`${Ts}images/events/wng1/wng1-01675.jpg`,alt:"WNG1 Competition",category:"events"},{src:`${Ts}images/events/wng1/wng1-02953.jpg`,alt:"WNG1 Match",category:"events"},{src:`${Ts}images/events/wng1/wng1-05237.jpg`,alt:"WNG1 Event Atmosphere",category:"events"},{src:`${Ts}images/events/wng1/wng1-02527.jpg`,alt:"WNG1 Action Shot",category:"events"},{src:`${Ts}images/events/wng1/wng1-01588.jpg`,alt:"WNG1 Grappling",category:"events"}],wng2:[{src:`${Ts}images/events/wng2/wng2-09820.jpg`,alt:"WNG2 Competition",category:"events"},{src:`${Ts}images/events/wng2/wng2-08613.jpg`,alt:"WNG2 Grappling Action",category:"events"},{src:`${Ts}images/events/wng2/wng2-01906.jpg`,alt:"WNG2 Match",category:"events"},{src:`${Ts}images/events/wng2/wng2-09420.jpg`,alt:"WNG2 Event",category:"events"},{src:`${Ts}images/events/wng2/wng2-07770.jpg`,alt:"WNG2 Action",category:"events"},{src:`${Ts}images/events/wng2/wng2-09170.jpg`,alt:"WNG2 Competition",category:"events"}],aggression:[{src:`${Ts}images/events/aggression/aggression-06388.jpg`,alt:"Aggression Muay Thai Fight",category:"events"},{src:`${Ts}images/events/aggression/aggression-06742.jpg`,alt:"Aggression Ring Action",category:"events"},{src:`${Ts}images/events/aggression/aggression-06140.jpg`,alt:"Aggression Muay Thai",category:"events"},{src:`${Ts}images/events/aggression/aggression-05876.jpg`,alt:"Aggression Fight Night",category:"events"},{src:`${Ts}images/events/aggression/aggression-06843.jpg`,alt:"Aggression MT Event",category:"events"}],athletes:[{src:`${Ts}images/athletes/wng1-promo/athlete-00666.jpg`,alt:"Athlete Promo - WNG1",category:"athletes"},{src:`${Ts}images/athletes/wng1-promo/athlete-00559.jpg`,alt:"Fighter Portrait",category:"athletes"},{src:`${Ts}images/athletes/wng1-promo/athlete-00669.jpg`,alt:"Athlete Promo Shot",category:"athletes"},{src:`${Ts}images/athletes/wng1-promo/athlete-00601.jpg`,alt:"Fighter Promo",category:"athletes"},{src:`${Ts}images/athletes/wng1-promo/athlete-00692.jpg`,alt:"WNG1 Fighter",category:"athletes"},{src:`${Ts}images/athletes/wng1-promo/athlete-00485.jpg`,alt:"Athlete Portrait",category:"athletes"},{src:`${Ts}images/athletes/wng2-promo/athlete-06134.jpg`,alt:"WNG2 Athlete Promo",category:"athletes"},{src:`${Ts}images/athletes/wng2-promo/athlete-06092.jpg`,alt:"WNG2 Fighter Portrait",category:"athletes"},{src:`${Ts}images/athletes/wng2-promo/athlete-05913.jpg`,alt:"WNG2 Promo Shot",category:"athletes"},{src:`${Ts}images/athletes/wng2-promo/athlete-06067.jpg`,alt:"WNG2 Athlete",category:"athletes"},{src:`${Ts}images/athletes/wng2-promo/athlete-06031.jpg`,alt:"Fighter Promo WNG2",category:"athletes"},{src:`${Ts}images/athletes/wng2-promo/athlete-05884.jpg`,alt:"WNG2 Fighter",category:"athletes"},{src:`${Ts}images/athletes/headshots/headshot-00670.jpg`,alt:"Professional Headshot",category:"athletes"},{src:`${Ts}images/athletes/headshots/headshot-00667.jpg`,alt:"Gi Headshot",category:"athletes"},{src:`${Ts}images/athletes/headshots/headshot-00669.jpg`,alt:"Athlete Headshot",category:"athletes"},{src:`${Ts}images/athletes/headshots/headshot-00678.jpg`,alt:"BJJ Headshot",category:"athletes"}],gym:[{src:`${Ts}images/gym/bjj/bjj-08397.jpg`,alt:"One Purpose BJJ Training",category:"promo"},{src:`${Ts}images/gym/bjj/bjj-08410.jpg`,alt:"BJJ Class",category:"promo"},{src:`${Ts}images/gym/bjj/bjj-08478.jpg`,alt:"BJJ Training Environment",category:"promo"},{src:`${Ts}images/gym/bjj/bjj-08390.jpg`,alt:"One Purpose BJJ",category:"promo"},{src:`${Ts}images/gym/bjj/bjj-08467.jpg`,alt:"BJJ Rolling",category:"promo"},{src:`${Ts}images/gym/stuart/stuart-06855.jpg`,alt:"Fight House Industries",category:"promo"},{src:`${Ts}images/gym/stuart/stuart-07156.jpg`,alt:"Fight House Training",category:"promo"},{src:`${Ts}images/gym/stuart/stuart-04954.jpg`,alt:"Gym Environment",category:"promo"},{src:`${Ts}images/gym/stuart/stuart-07504.jpg`,alt:"Class Photos",category:"promo"},{src:`${Ts}images/gym/stuart/stuart-07260.jpg`,alt:"Training Session",category:"promo"}]},e$=[...Bc.wng1,...Bc.wng2,...Bc.aggression,...Bc.athletes,...Bc.gym],c0e=[Bc.aggression[0],Bc.wng1[0],Bc.athletes[0],Bc.wng2[0],Bc.gym[0],Bc.wng1[2],Bc.athletes[6],Bc.aggression[3]],u0e=[{id:"wng1",name:"Who's Next Grappling",shortName:"WNG1",description:"Professional grappling event coverage with multi-camera production and athlete promo shoots.",images:Bc.wng1,tags:["Event","Grappling","Live Production"]},{id:"wng2",name:"Who's Next Grappling 2",shortName:"WNG2",description:"Second edition of WNG featuring expanded coverage, athlete content packages, and PPV streaming.",images:Bc.wng2,tags:["Event","Grappling","PPV"]},{id:"aggression",name:"Aggression Muay Thai",shortName:"Aggression MT",description:"High-energy Muay Thai fight night with dramatic ring-side photography and broadcast production.",images:Bc.aggression,tags:["Event","Muay Thai","Fight Night"]},{id:"athletes",name:"Athlete Promo Shoots",shortName:"Athletes",description:"Professional athlete portraits and promotional imagery for fighters across multiple events.",images:Bc.athletes,tags:["Athletes","Portraits","Promo"]},{id:"gym",name:"Gym & Training",shortName:"Gym/Training",description:"Training environment photography for gyms including One Purpose BJJ and Fight House Industries.",images:Bc.gym,tags:["Gym","Training","Content"]}],d0e=()=>{const[t,e]=T.useState(0);return T.useEffect(()=>{const r=setInterval(()=>{e(n=>(n+1)%g4.length)},5e3);return()=>clearInterval(r)},[]),s.jsxs("div",{children:[s.jsxs("section",{className:"relative min-h-screen flex items-center justify-center overflow-hidden",children:[g4.map((r,n)=>s.jsx("div",{className:"absolute inset-0 transition-opacity duration-1000",style:{opacity:n===t?1:0},children:s.jsx("img",{src:r,alt:"",className:"w-full h-full object-cover",loading:n===0?"eager":"lazy"})},r)),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-dark-950/70 via-dark-950/60 to-dark-950/90"}),s.jsxs("div",{className:"relative z-10 text-center px-4 sm:px-6 max-w-6xl mx-auto py-20",children:[s.jsxs(Dr.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8},children:[s.jsxs(Dr.h1,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.2,duration:.6},className:"text-5xl sm:text-6xl md:text-8xl font-black mb-6 leading-tight",children:[s.jsx("span",{className:"text-gradient",children:"FIT FOCUS"}),s.jsx("br",{}),s.jsx("span",{className:"text-white",children:"MEDIA"})]}),s.jsxs(Dr.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6,duration:.8},children:[s.jsx("p",{className:"text-xl sm:text-2xl md:text-3xl text-gray-200 mb-4 max-w-3xl mx-auto font-semibold",children:"Professional Live Production for Combat Sports"}),s.jsx("p",{className:"text-lg sm:text-xl text-gray-400 mb-10 max-w-2xl mx-auto",children:"Zero-cost production  You earn revenue from PPV  Professional broadcast quality"})]}),s.jsxs(Dr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1,duration:.6},className:"flex flex-col sm:flex-row gap-4 justify-center",children:[s.jsxs(rs,{to:"/proposal",className:"group px-8 py-4 bg-primary-600 hover:bg-primary-700 text-white font-black rounded-lg text-lg transition-all hover:scale-105 card-glow inline-flex items-center justify-center gap-3",children:["Get Your Free Analysis",s.jsx(Fh,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]}),s.jsx(rs,{to:"/work",className:"px-8 py-4 bg-white/10 hover:bg-white/20 backdrop-blur-sm text-white font-bold rounded-lg text-lg transition-all border border-white/20 hover:border-white/40 inline-flex items-center justify-center gap-3",children:"View Our Work"}),s.jsx(rs,{to:"/book",className:"px-8 py-4 bg-accent-600 hover:bg-accent-700 text-white font-bold rounded-lg text-lg transition-all inline-flex items-center justify-center gap-3 hover:scale-105",children:" Book a Call"})]})]}),s.jsx("div",{className:"absolute bottom-8 left-1/2 -translate-x-1/2 flex gap-2",children:g4.map((r,n)=>s.jsx("button",{onClick:()=>e(n),className:`w-2 h-2 rounded-full transition-all ${n===t?"bg-primary-500 w-6":"bg-white/40 hover:bg-white/60"}`},n))})]})]}),s.jsx("section",{className:"bg-dark-900 border-y border-gray-800",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-8 sm:py-12",children:s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-6 sm:gap-8",children:[{icon:$N,value:"25+",label:"Live Events Covered"},{icon:f1,value:"4",label:"Countries Worldwide"},{icon:nh,value:"50K+",label:"Viewers Reached"},{icon:Tf,value:"100%",label:"Client Satisfaction"}].map((r,n)=>s.jsxs(Dr.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:n*.1},className:"text-center",children:[s.jsx(r.icon,{className:"w-6 h-6 sm:w-8 sm:h-8 text-primary-500 mx-auto mb-2"}),s.jsx("p",{className:"text-2xl sm:text-3xl md:text-4xl font-black text-primary-500",children:r.value}),s.jsx("p",{className:"text-xs sm:text-sm text-gray-400 mt-1",children:r.label})]},n))})})}),s.jsx("section",{className:"py-16 sm:py-24 px-4 sm:px-6",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs(Dr.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"text-center mb-12 sm:mb-16",children:[s.jsx("h2",{className:"text-3xl sm:text-4xl md:text-5xl font-black mb-4",children:s.jsx("span",{className:"text-gradient",children:"What We Do"})}),s.jsx("p",{className:"text-lg sm:text-xl text-gray-400 max-w-2xl mx-auto",children:"End-to-end media production designed specifically for combat sports promotions"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 sm:gap-8",children:[{icon:bh,title:"Live Streaming & PPV",description:"Professional multi-camera broadcast production with PPV platform setup and management. We handle the tech  you focus on the event.",features:["Multi-camera production","PPV platform management","Live graphics & overlays","Instant replay capability"]},{icon:k2,title:"Event Photography",description:"Ring-side action shots, athlete portraits, crowd atmosphere, and winners ceremony  delivered as a complete digital gallery.",features:["Full event coverage","Action photography","Athlete portraits","Same-week delivery"]},{icon:nm,title:"Content Production",description:"Social media highlights, fight recaps, promotional content, and ongoing content strategy to grow your audience between events.",features:["Social media clips","Highlight reels","Fighter promo content","Content strategy"]}].map((r,n)=>s.jsxs(Dr.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:n*.15},className:"bg-dark-800 border border-gray-700 rounded-xl p-6 sm:p-8 hover:border-primary-600/50 transition-all hover-lift group",children:[s.jsx("div",{className:"w-14 h-14 bg-primary-600/20 rounded-xl flex items-center justify-center mb-6 group-hover:bg-primary-600/30 transition-colors",children:s.jsx(r.icon,{className:"w-7 h-7 text-primary-500"})}),s.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-3",children:r.title}),s.jsx("p",{className:"text-gray-400 text-sm sm:text-base mb-4 leading-relaxed",children:r.description}),s.jsx("ul",{className:"space-y-2",children:r.features.map((i,a)=>s.jsxs("li",{className:"flex items-center gap-2 text-sm text-gray-300",children:[s.jsx("div",{className:"w-1.5 h-1.5 bg-primary-500 rounded-full"}),i]},a))})]},n))}),s.jsx("div",{className:"text-center mt-10",children:s.jsxs(rs,{to:"/services",className:"inline-flex items-center gap-2 text-primary-400 hover:text-primary-300 font-semibold transition-colors",children:["View All Services ",s.jsx(Fh,{className:"w-4 h-4"})]})})]})}),s.jsx("section",{className:"py-16 sm:py-24 px-4 sm:px-6 bg-dark-900/50",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs(Dr.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"text-center mb-12 sm:mb-16",children:[s.jsx("h2",{className:"text-3xl sm:text-4xl md:text-5xl font-black mb-4",children:s.jsx("span",{className:"text-gradient",children:"Featured Work"})}),s.jsx("p",{className:"text-lg sm:text-xl text-gray-400 max-w-2xl mx-auto",children:"From ring-side action to athlete promo shoots  see what professional media coverage looks like"})]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 sm:gap-4",children:c0e.map((r,n)=>s.jsxs(Dr.div,{initial:{opacity:0,scale:.95},whileInView:{opacity:1,scale:1},viewport:{once:!0},transition:{delay:n*.05},className:`gallery-item rounded-xl overflow-hidden cursor-pointer ${n===0||n===3?"md:row-span-2":""}`,children:[s.jsx("img",{src:r.src,alt:r.alt,className:"w-full h-full object-cover min-h-[200px]",loading:"lazy"}),s.jsx("div",{className:"overlay flex items-end p-4",children:s.jsx("p",{className:"text-white text-sm font-semibold",children:r.alt})})]},n))}),s.jsx("div",{className:"text-center mt-10",children:s.jsxs(rs,{to:"/work",className:"inline-flex items-center gap-2 px-6 py-3 bg-primary-600 hover:bg-primary-700 text-white font-bold rounded-lg transition-all hover:scale-105",children:["View Full Portfolio ",s.jsx(Fh,{className:"w-4 h-4"})]})})]})}),s.jsx("section",{className:"py-16 sm:py-24 px-4 sm:px-6",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs(Dr.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"text-center mb-12 sm:mb-16",children:[s.jsx("h2",{className:"text-3xl sm:text-4xl md:text-5xl font-black mb-4",children:s.jsx("span",{className:"text-gradient",children:"How It Works"})}),s.jsx("p",{className:"text-lg sm:text-xl text-gray-400 max-w-2xl mx-auto",children:"Professional production at zero cost. Here's our model."})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 max-w-5xl mx-auto",children:[{step:"01",title:"We Produce Your Event",description:"Full professional multi-camera production, live switching, graphics, and streaming setup  completely handled by our team.",color:"from-primary-600 to-orange-600"},{step:"02",title:"Fans Purchase PPV",description:"Your audience buys PPV access at $20-30. We handle the platform, payment processing, and viewer experience.",color:"from-orange-600 to-amber-600"},{step:"03",title:"You Earn Revenue",description:"You receive a share of every PPV sale. Zero upfront cost, zero risk  just new revenue from viewers you weren't reaching before.",color:"from-amber-600 to-green-600"}].map((r,n)=>s.jsxs(Dr.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:n*.2},className:"text-center",children:[s.jsx("div",{className:`inline-flex items-center justify-center w-20 h-20 rounded-2xl bg-gradient-to-br ${r.color} mb-6`,children:s.jsx("span",{className:"text-3xl font-black text-white",children:r.step})}),s.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-3",children:r.title}),s.jsx("p",{className:"text-gray-400 text-sm sm:text-base leading-relaxed",children:r.description})]},n))}),s.jsx(Dr.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"mt-12 sm:mt-16 max-w-3xl mx-auto",children:s.jsxs("div",{className:"bg-gradient-to-r from-green-900/30 to-emerald-900/30 border-2 border-green-600/50 rounded-xl p-6 sm:p-8 text-center",children:[s.jsx(Gh,{className:"w-10 h-10 text-green-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-2xl sm:text-3xl font-black text-white mb-3",children:"Your Cost: $0"}),s.jsx("p",{className:"text-gray-300 text-sm sm:text-base leading-relaxed max-w-xl mx-auto",children:"We cover all production costs. You pay nothing upfront. You earn revenue from PPV sales that you weren't making before. It's literally free money + professional coverage."})]})})]})}),s.jsx("section",{className:"py-16 sm:py-24 px-4 sm:px-6 bg-dark-900/50",children:s.jsx("div",{className:"max-w-4xl mx-auto text-center",children:s.jsxs(Dr.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},children:[s.jsx("div",{className:"flex justify-center mb-6",children:[1,2,3,4,5].map(r=>s.jsx("svg",{className:"w-6 h-6 sm:w-8 sm:h-8 text-amber-500",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},r))}),s.jsx("blockquote",{className:"text-xl sm:text-2xl md:text-3xl text-gray-200 font-semibold italic mb-6 leading-relaxed",children:'"Professional coverage, quick turnaround on highlights, and our sponsors loved the exposure. The zero-cost model meant we could invest in growing other areas of our event."'}),s.jsx("p",{className:"text-gray-500 text-sm sm:text-base",children:" Combat Sports Promoter, QLD"})]})})}),s.jsx("section",{className:"py-16 sm:py-24 px-4 sm:px-6",children:s.jsx("div",{className:"max-w-4xl mx-auto text-center",children:s.jsxs(Dr.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},children:[s.jsxs("h2",{className:"text-3xl sm:text-4xl md:text-5xl font-black mb-6",children:["Ready to ",s.jsx("span",{className:"text-gradient",children:"Elevate Your Event?"})]}),s.jsx("p",{className:"text-lg sm:text-xl text-gray-400 mb-8 max-w-2xl mx-auto",children:"Get a free analysis of your organization and see exactly how much revenue professional media coverage could generate. Zero commitment."}),s.jsxs(rs,{to:"/proposal",className:"group inline-flex items-center gap-3 px-10 py-5 bg-primary-600 hover:bg-primary-700 text-white font-black rounded-lg text-xl transition-all hover:scale-105 card-glow",children:["Get Your Free Analysis",s.jsx(Fh,{className:"w-6 h-6 group-hover:translate-x-1 transition-transform"})]}),s.jsx("p",{className:"text-sm text-gray-500 mt-4",children:"Takes 2 minutes  No commitment required"})]})})})]})},h0e=[{id:"livestream",icon:bh,title:"Live Stream & PPV Production",tagline:"Broadcast-quality live production at zero cost",description:"We handle everything  from multi-camera setup and live switching to PPV platform management and viewer experience. Your audience gets a professional broadcast; you get revenue.",image:Bc.wng1[0].src,features:["Professional multi-camera production (1-4 cameras)","PTZ cameras for dynamic angles","Live switching and production","Custom broadcast graphics and overlays","Instant replay capability","PPV platform setup and management","Payment processing and viewer analytics","Full show recording for VOD"],highlight:"Zero upfront cost  we earn from production, you earn from PPV revenue share."},{id:"photography",icon:k2,title:"Event Photography & Videography",tagline:"Every moment captured in stunning detail",description:"Dedicated ring-side photographers capturing the intensity of every fight, the emotion of every victory, and the atmosphere of your entire event. Delivered as a complete digital gallery.",image:Bc.aggression[0].src,features:["Full event coverage from doors to finish","Ring-side action photography","Athlete portraits and walk-outs","Winners and awards ceremony","Crowd and atmosphere shots","Behind-the-scenes content","Complete digital gallery delivery","Same-week turnaround"],highlight:"Professional photography that athletes share, sponsors love, and audiences remember."},{id:"content",icon:nm,title:"Content Packages",tagline:"Social media content that grows your audience",description:"From event highlight reels to fighter promo clips, we create content designed for maximum reach. Short-form vertical edits for Reels/TikTok, YouTube-ready highlights, and everything in between.",image:Bc.athletes[0].src,features:["5-10 social media clips per event","Event highlight reel (3-5 minutes)","Short-form vertical edits (Reels/TikTok)","Individual fight/match recordings","Fighter promo content","Custom fight banner graphics","Same-day highlight delivery","YouTube-ready formats"],highlight:"Content that keeps your promotion visible 365 days a year  not just on event night."},{id:"strategy",icon:UY,title:"Ongoing Content Strategy",tagline:"Build a media empire around your promotion",description:"Monthly content calendars, audience growth strategy, between-event content creation, and analytics-driven optimization. We become your dedicated media team.",image:Bc.gym[5].src,features:["Monthly content calendar","Audience growth strategy","Between-event content creation","Analytics and performance tracking","Platform optimization (IG, YouTube, TikTok)","Dedicated account manager","Sponsor integration strategy","Quarterly performance reviews"],highlight:"From promoter to media brand  we help you build an audience that sells out every event."}],f0e=()=>s.jsxs("div",{className:"pt-20 sm:pt-24",children:[s.jsx("section",{className:"py-12 sm:py-20 px-4 sm:px-6",children:s.jsx("div",{className:"max-w-7xl mx-auto text-center",children:s.jsxs(Dr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[s.jsx("h1",{className:"text-4xl sm:text-5xl md:text-6xl font-black mb-6",children:s.jsx("span",{className:"text-gradient",children:"Our Services"})}),s.jsx("p",{className:"text-lg sm:text-xl text-gray-400 max-w-3xl mx-auto mb-8",children:"End-to-end media production built specifically for combat sports. From live broadcast to athlete content  we've got every angle covered."}),s.jsxs("div",{className:"inline-flex items-center gap-2 bg-green-900/30 border border-green-600/50 px-5 py-3 rounded-full",children:[s.jsx(zb,{className:"w-5 h-5 text-green-400"}),s.jsx("span",{className:"text-green-300 font-semibold text-sm sm:text-base",children:"Live stream production available at zero cost"})]})]})})}),h0e.map((t,e)=>s.jsx("section",{className:`py-12 sm:py-20 px-4 sm:px-6 ${e%2===1?"bg-dark-900/50":""}`,children:s.jsx("div",{className:"max-w-7xl mx-auto",children:s.jsxs("div",{className:`grid grid-cols-1 lg:grid-cols-2 gap-8 sm:gap-12 items-center ${e%2===1?"lg:flex-row-reverse":""}`,children:[s.jsx(Dr.div,{initial:{opacity:0,x:e%2===0?-30:30},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.6},className:`${e%2===1?"lg:order-2":""}`,children:s.jsx("div",{className:"rounded-xl overflow-hidden border border-gray-700",children:s.jsx("img",{src:t.image,alt:t.title,className:"w-full h-[300px] sm:h-[400px] object-cover",loading:"lazy"})})}),s.jsxs(Dr.div,{initial:{opacity:0,x:e%2===0?30:-30},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.6},className:`${e%2===1?"lg:order-1":""}`,children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("div",{className:"w-12 h-12 bg-primary-600/20 rounded-xl flex items-center justify-center",children:s.jsx(t.icon,{className:"w-6 h-6 text-primary-500"})}),s.jsx("span",{className:"text-primary-400 text-sm font-bold uppercase tracking-wider",children:t.tagline})]}),s.jsx("h2",{className:"text-3xl sm:text-4xl font-black text-white mb-4",children:t.title}),s.jsx("p",{className:"text-gray-400 text-base sm:text-lg mb-6 leading-relaxed",children:t.description}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 mb-6",children:t.features.map((r,n)=>s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(la,{className:"w-4 h-4 text-green-400 flex-shrink-0 mt-1"}),s.jsx("span",{className:"text-gray-300 text-sm",children:r})]},n))}),s.jsx("div",{className:"p-4 bg-primary-600/10 border border-primary-600/30 rounded-lg mb-6",children:s.jsxs("p",{className:"text-primary-300 text-sm font-semibold",children:[" ",t.highlight]})})]})]})})},t.id)),s.jsx("section",{className:"py-16 sm:py-24 px-4 sm:px-6 bg-dark-900/50",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs(Dr.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"text-center mb-12 sm:mb-16",children:[s.jsx("h2",{className:"text-3xl sm:text-4xl md:text-5xl font-black mb-4",children:s.jsx("span",{className:"text-gradient",children:"Tailored Packages"})}),s.jsx("p",{className:"text-lg sm:text-xl text-gray-400 max-w-2xl mx-auto",children:"Every promotion is different. Our proposal tool analyzes your organization and recommends the perfect package."})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 sm:gap-8 max-w-5xl mx-auto",children:[{name:"Essentials",range:"$1,500 - $2,500",desc:"Core add-ons on top of free production",features:["Free live stream production","Fight recordings","Social media clips","Custom graphics"]},{name:"Professional",range:"$3,000 - $4,000",desc:"Everything you need to level up",features:["Everything in Essentials","Event photography","Premium camera setup","Highlight reels"],popular:!0},{name:"Broadcast",range:"$4,500 - $6,500",desc:"Full media partnership",features:["Everything in Professional","Ongoing content strategy","Dedicated account manager","Priority scheduling"]}].map((t,e)=>s.jsxs(Dr.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:e*.15},className:`bg-dark-800 border-2 rounded-xl p-6 sm:p-8 relative ${t.popular?"border-primary-600 card-glow":"border-gray-700"}`,children:[t.popular&&s.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2",children:s.jsx("span",{className:"bg-primary-600 text-white text-xs font-bold px-4 py-1 rounded-full",children:"MOST POPULAR"})}),s.jsx("h3",{className:"text-2xl font-black text-white mb-2",children:t.name}),s.jsx("p",{className:"text-primary-400 font-bold text-lg mb-2",children:t.range}),s.jsx("p",{className:"text-gray-500 text-sm mb-6",children:t.desc}),s.jsx("ul",{className:"space-y-3 mb-6",children:t.features.map((r,n)=>s.jsxs("li",{className:"flex items-start gap-2 text-sm text-gray-300",children:[s.jsx(la,{className:"w-4 h-4 text-green-400 flex-shrink-0 mt-0.5"}),r]},n))})]},e))}),s.jsxs("div",{className:"text-center mt-10",children:[s.jsxs(rs,{to:"/proposal",className:"group inline-flex items-center gap-3 px-8 py-4 bg-primary-600 hover:bg-primary-700 text-white font-black rounded-lg text-lg transition-all hover:scale-105 card-glow",children:["Get Your Custom Package",s.jsx(Fh,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]}),s.jsx("p",{className:"text-gray-500 text-sm mt-3",children:"Our proposal tool will recommend the perfect package for your organization"})]})]})})]}),m0e=[{id:"all",label:"All"},{id:"events",label:"Events"},{id:"athletes",label:"Athletes"},{id:"promo",label:"Promo"}],A0e=()=>{const[t,e]=T.useState("all"),[r,n]=T.useState(null),[i,a]=T.useState(null),[o,c]=T.useState(0),[u,l]=T.useState([]),d=t==="all"?e$:e$.filter(y=>y.category===t),f=(y,x)=>{l(y),c(x),a(y[x])},m=()=>{a(null),l([])},p=()=>{const y=(o+1)%u.length;c(y),a(u[y])},g=()=>{const y=(o-1+u.length)%u.length;c(y),a(u[y])};return s.jsxs("div",{className:"pt-20 sm:pt-24",children:[s.jsx("section",{className:"py-12 sm:py-20 px-4 sm:px-6",children:s.jsx("div",{className:"max-w-7xl mx-auto text-center",children:s.jsxs(Dr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[s.jsx("h1",{className:"text-4xl sm:text-5xl md:text-6xl font-black mb-6",children:s.jsx("span",{className:"text-gradient",children:"Our Work"})}),s.jsx("p",{className:"text-lg sm:text-xl text-gray-400 max-w-3xl mx-auto",children:"From grappling events to Muay Thai fight nights, athlete promo shoots to gym content  see how we capture the intensity of combat sports."})]})})}),s.jsx("section",{className:"py-8 sm:py-12 px-4 sm:px-6",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsx("h2",{className:"text-2xl sm:text-3xl font-black text-white mb-8",children:"Projects"}),s.jsx("div",{className:"space-y-6",children:u0e.map((y,x)=>s.jsxs(Dr.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:x*.1},className:"bg-dark-800 border border-gray-700 rounded-xl overflow-hidden",children:[s.jsxs("button",{onClick:()=>n(r===y.id?null:y.id),className:"w-full flex flex-col sm:flex-row items-start sm:items-center gap-4 p-5 sm:p-6 text-left hover:bg-dark-900/30 transition-colors",children:[s.jsx("div",{className:"w-full sm:w-24 h-32 sm:h-24 rounded-lg overflow-hidden flex-shrink-0",children:s.jsx("img",{src:y.images[0].src,alt:y.name,className:"w-full h-full object-cover",loading:"lazy"})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("h3",{className:"text-lg sm:text-xl font-bold text-white",children:y.name}),s.jsxs("span",{className:"text-xs bg-primary-600/20 text-primary-400 px-2 py-1 rounded-full font-semibold",children:[y.images.length," photos"]})]}),s.jsx("p",{className:"text-gray-400 text-sm mb-2",children:y.description}),s.jsx("div",{className:"flex gap-2",children:y.tags.map(w=>s.jsx("span",{className:"text-xs bg-dark-900 text-gray-400 px-2 py-1 rounded border border-gray-700",children:w},w))})]}),s.jsx("div",{className:"text-primary-400",children:s.jsx(Dr.div,{animate:{rotate:r===y.id?90:0},transition:{duration:.2},children:s.jsx(Fh,{className:"w-5 h-5"})})})]}),s.jsx(Gp,{children:r===y.id&&s.jsx(Dr.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"overflow-hidden",children:s.jsx("div",{className:"px-5 sm:px-6 pb-6 border-t border-gray-700 pt-4",children:s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:y.images.map((w,_)=>s.jsxs("div",{onClick:()=>f(y.images,_),className:"gallery-item rounded-lg overflow-hidden cursor-pointer aspect-[4/3]",children:[s.jsx("img",{src:w.src,alt:w.alt,className:"w-full h-full object-cover",loading:"lazy"}),s.jsx("div",{className:"overlay"})]},_))})})})})]},y.id))})]})}),s.jsx("section",{className:"py-12 sm:py-20 px-4 sm:px-6 bg-dark-900/50",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-8",children:[s.jsx("h2",{className:"text-2xl sm:text-3xl font-black text-white",children:"Full Gallery"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(hR,{className:"w-4 h-4 text-gray-500"}),m0e.map(y=>s.jsx("button",{onClick:()=>e(y.id),className:`px-4 py-2 rounded-lg text-sm font-semibold transition-all ${t===y.id?"bg-primary-600 text-white":"bg-dark-800 text-gray-400 hover:text-white border border-gray-700"}`,children:y.label},y.id))]})]}),s.jsx(Dr.div,{layout:!0,className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 sm:gap-4",children:s.jsx(Gp,{mode:"popLayout",children:d.map((y,x)=>s.jsxs(Dr.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.3},onClick:()=>f(d,x),className:"gallery-item rounded-lg overflow-hidden cursor-pointer aspect-[4/3]",children:[s.jsx("img",{src:y.src,alt:y.alt,className:"w-full h-full object-cover",loading:"lazy"}),s.jsx("div",{className:"overlay flex items-end p-3",children:s.jsx("p",{className:"text-white text-xs font-semibold",children:y.alt})})]},y.src))})})]})}),s.jsx("section",{className:"py-16 sm:py-24 px-4 sm:px-6",children:s.jsx("div",{className:"max-w-4xl mx-auto text-center",children:s.jsxs(Dr.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},children:[s.jsxs("h2",{className:"text-3xl sm:text-4xl font-black mb-4",children:["Want This for ",s.jsx("span",{className:"text-gradient",children:"Your Event?"})]}),s.jsx("p",{className:"text-gray-400 text-lg mb-8",children:"Get professional media coverage at zero cost. See what we can do for your promotion."}),s.jsxs(rs,{to:"/proposal",className:"group inline-flex items-center gap-3 px-8 py-4 bg-primary-600 hover:bg-primary-700 text-white font-black rounded-lg text-lg transition-all hover:scale-105 card-glow",children:["Get Your Free Analysis",s.jsx(Fh,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]})]})})}),s.jsx(Gp,{children:i&&s.jsxs(Dr.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"lightbox-backdrop",onClick:m,children:[s.jsx("button",{onClick:m,className:"absolute top-4 right-4 z-10 p-2 bg-black/50 rounded-full text-white hover:bg-black/80 transition-colors",children:s.jsx(tg,{className:"w-6 h-6"})}),u.length>1&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:y=>{y.stopPropagation(),g()},className:"absolute left-4 z-10 p-3 bg-black/50 rounded-full text-white hover:bg-black/80 transition-colors",children:s.jsx(LT,{className:"w-6 h-6"})}),s.jsx("button",{onClick:y=>{y.stopPropagation(),p()},className:"absolute right-4 z-10 p-3 bg-black/50 rounded-full text-white hover:bg-black/80 transition-colors",children:s.jsx(U0,{className:"w-6 h-6"})})]}),s.jsx("img",{src:i.src,alt:i.alt,className:"max-w-[90vw] max-h-[90vh] object-contain",onClick:y=>y.stopPropagation()}),s.jsxs("div",{className:"absolute bottom-4 text-center text-white text-sm",children:[i.alt,"  ",o+1," / ",u.length]})]})})]})},KE=[{num:1,label:"Welcome"},{num:2,label:"Your Organization"},{num:3,label:"Analysis"},{num:4,label:"Get Proposal"},{num:5,label:"Your Proposal"}],p0e=({currentStep:t,totalSteps:e,goToStep:r})=>{const n=i=>i<t;return s.jsx("nav",{className:"sticky top-0 z-50 bg-dark-900/95 backdrop-blur-sm border-b border-gray-800",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-4",children:[s.jsxs("div",{className:"md:hidden",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsxs("span",{className:"text-sm font-semibold text-gray-300",children:["Step ",t," of ",e]}),s.jsx("span",{className:"text-xs text-gray-400",children:KE[Math.min(t-1,KE.length-1)]?.label})]}),s.jsx("div",{className:"h-2 bg-dark-800 rounded-full overflow-hidden",children:s.jsx(Dr.div,{className:"h-full bg-gradient-to-r from-primary-500 to-orange-500",initial:{width:0},animate:{width:`${t/e*100}%`},transition:{duration:.3}})})]}),s.jsx("div",{className:"hidden md:flex items-center justify-between",children:KE.map((i,a)=>s.jsxs("div",{className:"flex items-center flex-1",children:[s.jsxs("button",{onClick:()=>n(i.num)&&r(i.num),disabled:!n(i.num),className:`flex flex-col items-center gap-2 transition-all ${n(i.num)?"cursor-pointer hover:scale-105":"cursor-default"}`,children:[s.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold text-sm transition-all ${t===i.num?"bg-primary-600 text-white ring-4 ring-primary-600/30":t>i.num?"bg-green-600 text-white":"bg-dark-800 text-gray-500"}`,children:t>i.num?s.jsx(la,{className:"w-5 h-5"}):i.num}),s.jsx("span",{className:`text-xs font-semibold ${t===i.num?"text-primary-400":t>i.num?"text-green-400":"text-gray-500"}`,children:i.label})]}),a<KE.length-1&&s.jsx("div",{className:"flex-1 h-1 mx-2 bg-dark-800 rounded-full overflow-hidden",children:s.jsx(Dr.div,{className:"h-full bg-gradient-to-r from-green-600 to-primary-600",initial:{width:0},animate:{width:t>i.num?"100%":"0%"},transition:{duration:.3}})})]},i.num))})]})})},g0e=({nextStep:t})=>s.jsxs("section",{className:"relative min-h-screen flex items-center justify-center overflow-hidden animated-gradient",children:[s.jsx("div",{className:"absolute inset-0 opacity-10",children:s.jsx("div",{className:"absolute inset-0",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ff0000' fill-opacity='0.4'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}})}),s.jsx("div",{className:"relative z-10 text-center px-4 sm:px-6 max-w-6xl mx-auto py-12",children:s.jsxs(Dr.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8},children:[s.jsx(Dr.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.2,duration:.6},className:"mb-8",children:s.jsxs("h1",{className:"text-5xl sm:text-6xl md:text-8xl font-black mb-6 leading-tight",children:[s.jsx("span",{className:"text-gradient",children:"ELEVATE"}),s.jsx("br",{}),s.jsx("span",{className:"text-white",children:"YOUR EVENT"})]})}),s.jsxs(Dr.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6,duration:.8},children:[s.jsx("p",{className:"text-xl sm:text-2xl md:text-3xl text-gray-300 mb-4 max-w-3xl mx-auto font-semibold",children:"Professional Live Stream Production at Zero Cost to Your Organization"}),s.jsx("p",{className:"text-lg sm:text-xl md:text-2xl text-gray-400 mb-12 max-w-2xl mx-auto",children:"We produce your event for free + you earn revenue from PPV that you weren't before"})]}),s.jsxs(Dr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1,duration:.6},className:"mb-16",children:[s.jsxs("button",{onClick:t,className:"group px-8 sm:px-12 py-4 sm:py-5 bg-primary-600 hover:bg-primary-700 text-white font-black rounded-lg text-lg sm:text-xl transition-all hover:scale-105 card-glow inline-flex items-center gap-3",children:["Get Your Free Analysis",s.jsx(Fh,{className:"w-6 h-6 group-hover:translate-x-1 transition-transform"})]}),s.jsx("p",{className:"text-sm text-gray-500 mt-4",children:"See what your promotion is worth in 2 minutes  Zero commitment"})]}),s.jsx(Dr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1.2,duration:.6},className:"mb-16 max-w-4xl mx-auto",children:s.jsx("div",{className:"relative rounded-xl overflow-hidden bg-gradient-to-br from-dark-900 via-dark-800 to-dark-900 border-2 border-gray-700 hover:border-primary-600/50 transition-all group cursor-pointer",children:s.jsxs("div",{className:"aspect-video flex items-center justify-center relative",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary-900/30 via-transparent to-orange-900/30"}),s.jsxs("div",{className:"relative z-10 flex flex-col items-center gap-4",children:[s.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 bg-primary-600 rounded-full flex items-center justify-center group-hover:scale-110 transition-transform shadow-lg",children:s.jsx("svg",{className:"w-10 h-10 sm:w-12 sm:h-12 text-white ml-1",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M8 5v14l11-7z"})})}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-xl sm:text-2xl font-bold text-white mb-2",children:"See Our Work in Action"}),s.jsx("p",{className:"text-sm sm:text-base text-gray-300",children:"Watch how we transform combat sports events into premium broadcast experiences"})]})]})]})})}),s.jsx(Dr.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1.4,duration:.8},className:"grid grid-cols-1 sm:grid-cols-3 gap-6 sm:gap-8 max-w-4xl mx-auto",children:[{icon:bh,title:"Industry Leading Live Production",desc:"Professional multi-camera production that commands respect"},{icon:Tf,title:"3-10x Audience Growth",desc:"Grow Your Audience 3-10x With Professional Content"},{icon:Gh,title:"Unlock Hidden Revenue",desc:"Unlock Revenue Streams You're Currently Leaving on the Table"}].map((e,r)=>s.jsxs(Dr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1.6+r*.1,duration:.6},className:"bg-dark-900/60 backdrop-blur-sm border border-gray-800 rounded-xl p-6 hover:border-primary-600/50 transition-all",children:[s.jsx(e.icon,{className:"w-10 h-10 sm:w-12 sm:h-12 text-primary-500 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg sm:text-xl font-bold text-white mb-2",children:e.title}),s.jsx("p",{className:"text-sm sm:text-base text-gray-400",children:e.desc})]},r))}),s.jsxs(Dr.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:2,duration:.8},className:"mt-12 sm:mt-16",children:[s.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-6 max-w-4xl mx-auto mb-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-3xl sm:text-4xl font-black text-primary-500",children:"25+"}),s.jsx("p",{className:"text-xs sm:text-sm text-gray-400 mt-1",children:"Live Events Covered"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-3xl sm:text-4xl font-black text-primary-500",children:"4"}),s.jsx("p",{className:"text-xs sm:text-sm text-gray-400 mt-1",children:"Countries Worldwide"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-3xl sm:text-4xl font-black text-primary-500",children:"Australia Wide"}),s.jsx("p",{className:"text-xs sm:text-sm text-gray-400 mt-1",children:"+ International"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-3xl sm:text-4xl font-black text-primary-500",children:"100%"}),s.jsx("p",{className:"text-xs sm:text-sm text-gray-400 mt-1",children:"Client Satisfaction"})]})]}),s.jsxs("div",{className:"max-w-2xl mx-auto bg-dark-900/60 backdrop-blur-sm border border-green-700/50 rounded-xl p-5",children:[s.jsx("p",{className:"text-green-400 text-sm sm:text-base font-semibold mb-2",children:" Free Consultation  No Commitment Required"}),s.jsx("p",{className:"text-gray-400 text-xs sm:text-sm",children:"We'll analyze your organization and show you exactly what's possible  even if you're not ready to start yet."})]})]})]})})]}),v0e=({formData:t,updateFormData:e,setFormDataBulk:r,setAnalysis:n,nextStep:i,prevStep:a})=>{T.useEffect(()=>{if(t.orgName){const l=o();n(l)}},[t]);const o=()=>{let l="Grassroots",d=0;t.showsPerYear>=12?d+=3:t.showsPerYear>=6?d+=2:t.showsPerYear>=3&&(d+=1),t.avgAttendance>=800?d+=3:t.avgAttendance>=400?d+=2:t.avgAttendance>=150&&(d+=1),t.socialFollowing>=5e4?d+=3:t.socialFollowing>=15e3?d+=2:t.socialFollowing>=3e3&&(d+=1),t.venueCapacity>=1500?d+=2:t.venueCapacity>=500&&(d+=1),t.sponsorshipLevel==="strong"?d+=2:t.sponsorshipLevel==="moderate"&&(d+=1),(t.growthTrajectory==="rapidly-growing"||t.growthTrajectory==="growing")&&(d+=1),d>=10?l="Major":d>=7?l="Established":d>=4&&(l="Regional");let f=[],m="flat";l==="Major"?(f=["Media Partnership","Full Media Buyout"],m="partnership"):l==="Established"?(f=["Broadcast Premium","Media Partnership"],m="hybrid"):l==="Regional"?(f=["Professional Production"],m="flat"):(f=["Essential Coverage"],m="flat");const p=c();return{tier:l,tierScore:d,recommendedPackages:f,pricingModel:m,potentialStreamingRevenue:p}},c=()=>{const l=Math.round(t.avgAttendance*1.5),d=Math.round(l*.4),f=25,m=d*f,p=m*t.showsPerYear,g=t.avgAttendance>=500?2e3:t.avgAttendance>=200?1e3:500,y=g*t.showsPerYear,x=1200,w=x*t.showsPerYear,_=t.showsPerYear*500,E=m+g+x,N=p+y+w;return{perEvent:Math.round(m),annual:Math.round(p),viewerEstimate:l,expectedPurchases:d,ppvPrice:f,sponsorRevenue:{perEvent:g,annual:y},contentValue:{perEvent:x,annual:w},socialGrowth:{followersPerYear:_,valueDescription:`${_.toLocaleString()} new followers/year`},totalROI:{perEvent:Math.round(E),annual:Math.round(N)}}},u=t.orgName.trim().length>0;return s.jsx("section",{className:"min-h-screen py-12 sm:py-20 px-4",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsxs(Dr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center mb-8 sm:mb-12",children:[s.jsxs("div",{className:"inline-flex items-center gap-3 mb-4",children:[s.jsx(dR,{className:"w-10 h-10 sm:w-12 sm:h-12 text-primary-500"}),s.jsx("h2",{className:"text-3xl sm:text-4xl md:text-5xl font-black",children:s.jsx("span",{className:"text-gradient",children:"Tell Us About Your Organization"})})]}),s.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-300 max-w-2xl mx-auto",children:"We'll analyze your profile and recommend the perfect media solution"})]}),s.jsxs(Dr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"bg-dark-800 border border-gray-700 rounded-xl p-6 sm:p-8",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm sm:text-base font-semibold mb-3 text-gray-300",children:["Organization Name ",s.jsx("span",{className:"text-primary-500",children:"*"})]}),s.jsx("input",{type:"text",value:t.orgName,onChange:l=>e("orgName",l.target.value),className:"w-full px-4 py-3 sm:py-4 bg-dark-900 border-2 border-gray-700 rounded-lg text-white text-base sm:text-lg focus:border-primary-600 focus:outline-none transition-colors",placeholder:"Enter organization name..."})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm sm:text-base font-semibold mb-3 text-gray-300",children:["Shows Per Year: ",s.jsx("span",{className:"text-primary-500 text-lg sm:text-xl font-bold",children:t.showsPerYear})]}),s.jsx("input",{type:"range",min:"1",max:"24",value:t.showsPerYear,onChange:l=>e("showsPerYear",parseInt(l.target.value)),className:"w-full h-3 accent-primary-600"}),s.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[s.jsx("span",{children:"1"}),s.jsx("span",{children:"24"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm sm:text-base font-semibold mb-3 text-gray-300",children:["Average Attendance: ",s.jsx("span",{className:"text-primary-500 text-lg sm:text-xl font-bold",children:t.avgAttendance})]}),s.jsx("input",{type:"range",min:"50",max:"2000",step:"50",value:t.avgAttendance,onChange:l=>e("avgAttendance",parseInt(l.target.value)),className:"w-full h-3 accent-primary-600"}),s.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[s.jsx("span",{children:"50"}),s.jsx("span",{children:"2,000"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm sm:text-base font-semibold mb-3 text-gray-300",children:["Venue Capacity: ",s.jsx("span",{className:"text-primary-500 text-lg sm:text-xl font-bold",children:t.venueCapacity})]}),s.jsx("input",{type:"range",min:"100",max:"3000",step:"100",value:t.venueCapacity,onChange:l=>e("venueCapacity",parseInt(l.target.value)),className:"w-full h-3 accent-primary-600"}),s.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[s.jsx("span",{children:"100"}),s.jsx("span",{children:"3,000"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm sm:text-base font-semibold mb-3 text-gray-300",children:["Social Media Following: ",s.jsx("span",{className:"text-primary-500 text-lg sm:text-xl font-bold",children:t.socialFollowing.toLocaleString()})]}),s.jsx("input",{type:"range",min:"1000",max:"200000",step:"1000",value:t.socialFollowing,onChange:l=>e("socialFollowing",parseInt(l.target.value)),className:"w-full h-3 accent-primary-600"}),s.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[s.jsx("span",{children:"1k"}),s.jsx("span",{children:"200k"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm sm:text-base font-semibold mb-3 text-gray-300",children:"Current Media Setup"}),s.jsxs("select",{value:t.currentMedia,onChange:l=>e("currentMedia",l.target.value),className:"w-full px-4 py-3 sm:py-4 bg-dark-900 border-2 border-gray-700 rounded-lg text-white text-base focus:border-primary-600 focus:outline-none appearance-none cursor-pointer",children:[s.jsx("option",{value:"none",children:"No media coverage"}),s.jsx("option",{value:"basic",children:"Basic (smartphone/amateur)"}),s.jsx("option",{value:"semi",children:"Semi-professional"}),s.jsx("option",{value:"pro",children:"Professional production"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm sm:text-base font-semibold mb-3 text-gray-300",children:"Geographic Reach"}),s.jsxs("select",{value:t.geoReach,onChange:l=>e("geoReach",l.target.value),className:"w-full px-4 py-3 sm:py-4 bg-dark-900 border-2 border-gray-700 rounded-lg text-white text-base focus:border-primary-600 focus:outline-none appearance-none cursor-pointer",children:[s.jsx("option",{value:"local",children:"Local"}),s.jsx("option",{value:"state",children:"State/Regional"}),s.jsx("option",{value:"national",children:"National"}),s.jsx("option",{value:"international",children:"International"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm sm:text-base font-semibold mb-3 text-gray-300",children:"Sponsorship Level"}),s.jsxs("select",{value:t.sponsorshipLevel,onChange:l=>e("sponsorshipLevel",l.target.value),className:"w-full px-4 py-3 sm:py-4 bg-dark-900 border-2 border-gray-700 rounded-lg text-white text-base focus:border-primary-600 focus:outline-none appearance-none cursor-pointer",children:[s.jsx("option",{value:"none",children:"No sponsors"}),s.jsx("option",{value:"few",children:"Few local sponsors"}),s.jsx("option",{value:"moderate",children:"Moderate sponsorship"}),s.jsx("option",{value:"strong",children:"Strong sponsor portfolio"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm sm:text-base font-semibold mb-3 text-gray-300",children:"Growth Trajectory"}),s.jsxs("select",{value:t.growthTrajectory,onChange:l=>e("growthTrajectory",l.target.value),className:"w-full px-4 py-3 sm:py-4 bg-dark-900 border-2 border-gray-700 rounded-lg text-white text-base focus:border-primary-600 focus:outline-none appearance-none cursor-pointer",children:[s.jsx("option",{value:"declining",children:"Declining"}),s.jsx("option",{value:"stable",children:"Stable"}),s.jsx("option",{value:"growing",children:"Growing"}),s.jsx("option",{value:"rapidly-growing",children:"Rapidly Growing"})]})]})]}),s.jsx("div",{className:"mt-8 sm:mt-10",children:s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("button",{onClick:a,className:"flex-1 flex items-center justify-center gap-2 px-6 py-4 bg-dark-700 hover:bg-dark-600 text-white font-bold rounded-lg transition-all text-base sm:text-lg",children:[s.jsx(tp,{className:"w-5 h-5"}),"Back"]}),s.jsxs("button",{onClick:i,disabled:!u,className:"flex-[2] flex items-center justify-center gap-2 px-6 py-4 bg-primary-600 hover:bg-primary-700 disabled:bg-gray-600 disabled:cursor-not-allowed text-white font-bold rounded-lg transition-all hover:scale-[1.02] text-base sm:text-lg",children:["Continue to Analysis",s.jsx(Fh,{className:"w-5 h-5"})]})]})})]})]})})};function CX(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(r=CX(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function ja(){for(var t,e,r=0,n="",i=arguments.length;r<i;r++)(t=arguments[r])&&(e=CX(t))&&(n&&(n+=" "),n+=e);return n}var y0e=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function zR(t){if(typeof t!="string")return!1;var e=y0e;return e.includes(t)}var x0e=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],b0e=new Set(x0e);function NX(t){return typeof t!="string"?!1:b0e.has(t)}function kX(t){return typeof t=="string"&&t.startsWith("data-")}function xu(t){if(typeof t!="object"||t===null)return{};var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(NX(r)||kX(r))&&(e[r]=t[r]);return e}function gy(t){if(t==null)return null;if(T.isValidElement(t)&&typeof t.props=="object"&&t.props!==null){var e=t.props;return xu(e)}return typeof t=="object"&&!Array.isArray(t)?xu(t):null}function zu(t){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(NX(r)||kX(r)||zR(r))&&(e[r]=t[r]);return e}function w0e(t){return t==null?null:T.isValidElement(t)?zu(t.props):typeof t=="object"&&!Array.isArray(t)?zu(t):null}var _0e=["children","width","height","viewBox","className","style","title","desc"];function VB(){return VB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},VB.apply(null,arguments)}function E0e(t,e){if(t==null)return{};var r,n,i=S0e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function S0e(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var VR=T.forwardRef((t,e)=>{var{children:r,width:n,height:i,viewBox:a,className:o,style:c,title:u,desc:l}=t,d=E0e(t,_0e),f=a||{width:n,height:i,x:0,y:0},m=ja("recharts-surface",o);return T.createElement("svg",VB({},zu(d),{className:m,width:n,height:i,style:c,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:e}),T.createElement("title",null,u),T.createElement("desc",null,l),r)}),j0e=["children","className"];function KB(){return KB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},KB.apply(null,arguments)}function T0e(t,e){if(t==null)return{};var r,n,i=C0e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function C0e(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Mc=T.forwardRef((t,e)=>{var{children:r,className:n}=t,i=T0e(t,j0e),a=ja("recharts-layer",n);return T.createElement("g",KB({className:a},zu(i),{ref:e}),r)}),LX=T.createContext(null),N0e=()=>T.useContext(LX);function Sl(t){return function(){return t}}const IX=Math.cos,HT=Math.sin,Km=Math.sqrt,QT=Math.PI,WN=2*QT,GB=Math.PI,WB=2*GB,Sv=1e-6,k0e=WB-Sv;function BX(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function L0e(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return BX;const r=10**e;return function(n){this._+=n[0];for(let i=1,a=n.length;i<a;++i)this._+=Math.round(arguments[i]*r)/r+n[i]}}class I0e{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?BX:L0e(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,n,i){this._append`Q${+e},${+r},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(e,r,n,i,a,o){this._append`C${+e},${+r},${+n},${+i},${this._x1=+a},${this._y1=+o}`}arcTo(e,r,n,i,a){if(e=+e,r=+r,n=+n,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,c=this._y1,u=n-e,l=i-r,d=o-e,f=c-r,m=d*d+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(m>Sv)if(!(Math.abs(f*u-l*d)>Sv)||!a)this._append`L${this._x1=e},${this._y1=r}`;else{let p=n-o,g=i-c,y=u*u+l*l,x=p*p+g*g,w=Math.sqrt(y),_=Math.sqrt(m),E=a*Math.tan((GB-Math.acos((y+m-x)/(2*w*_)))/2),N=E/_,C=E/w;Math.abs(N-1)>Sv&&this._append`L${e+N*d},${r+N*f}`,this._append`A${a},${a},0,0,${+(f*p>d*g)},${this._x1=e+C*u},${this._y1=r+C*l}`}}arc(e,r,n,i,a,o){if(e=+e,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let c=n*Math.cos(i),u=n*Math.sin(i),l=e+c,d=r+u,f=1^o,m=o?i-a:a-i;this._x1===null?this._append`M${l},${d}`:(Math.abs(this._x1-l)>Sv||Math.abs(this._y1-d)>Sv)&&this._append`L${l},${d}`,n&&(m<0&&(m=m%WB+WB),m>k0e?this._append`A${n},${n},0,1,${f},${e-c},${r-u}A${n},${n},0,1,${f},${this._x1=l},${this._y1=d}`:m>Sv&&this._append`A${n},${n},0,${+(m>=GB)},${f},${this._x1=e+n*Math.cos(a)},${this._y1=r+n*Math.sin(a)}`)}rect(e,r,n,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}}function KR(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);e=n}return t},()=>new I0e(e)}function GR(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function PX(t){this._context=t}PX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function YN(t){return new PX(t)}function OX(t){return t[0]}function RX(t){return t[1]}function DX(t,e){var r=Sl(!0),n=null,i=YN,a=null,o=KR(c);t=typeof t=="function"?t:t===void 0?OX:Sl(t),e=typeof e=="function"?e:e===void 0?RX:Sl(e);function c(u){var l,d=(u=GR(u)).length,f,m=!1,p;for(n==null&&(a=i(p=o())),l=0;l<=d;++l)!(l<d&&r(f=u[l],l,u))===m&&((m=!m)?a.lineStart():a.lineEnd()),m&&a.point(+t(f,l,u),+e(f,l,u));if(p)return a=null,p+""||null}return c.x=function(u){return arguments.length?(t=typeof u=="function"?u:Sl(+u),c):t},c.y=function(u){return arguments.length?(e=typeof u=="function"?u:Sl(+u),c):e},c.defined=function(u){return arguments.length?(r=typeof u=="function"?u:Sl(!!u),c):r},c.curve=function(u){return arguments.length?(i=u,n!=null&&(a=i(n)),c):i},c.context=function(u){return arguments.length?(u==null?n=a=null:a=i(n=u),c):n},c}function GE(t,e,r){var n=null,i=Sl(!0),a=null,o=YN,c=null,u=KR(l);t=typeof t=="function"?t:t===void 0?OX:Sl(+t),e=typeof e=="function"?e:Sl(e===void 0?0:+e),r=typeof r=="function"?r:r===void 0?RX:Sl(+r);function l(f){var m,p,g,y=(f=GR(f)).length,x,w=!1,_,E=new Array(y),N=new Array(y);for(a==null&&(c=o(_=u())),m=0;m<=y;++m){if(!(m<y&&i(x=f[m],m,f))===w)if(w=!w)p=m,c.areaStart(),c.lineStart();else{for(c.lineEnd(),c.lineStart(),g=m-1;g>=p;--g)c.point(E[g],N[g]);c.lineEnd(),c.areaEnd()}w&&(E[m]=+t(x,m,f),N[m]=+e(x,m,f),c.point(n?+n(x,m,f):E[m],r?+r(x,m,f):N[m]))}if(_)return c=null,_+""||null}function d(){return DX().defined(i).curve(o).context(a)}return l.x=function(f){return arguments.length?(t=typeof f=="function"?f:Sl(+f),n=null,l):t},l.x0=function(f){return arguments.length?(t=typeof f=="function"?f:Sl(+f),l):t},l.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Sl(+f),l):n},l.y=function(f){return arguments.length?(e=typeof f=="function"?f:Sl(+f),r=null,l):e},l.y0=function(f){return arguments.length?(e=typeof f=="function"?f:Sl(+f),l):e},l.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Sl(+f),l):r},l.lineX0=l.lineY0=function(){return d().x(t).y(e)},l.lineY1=function(){return d().x(t).y(r)},l.lineX1=function(){return d().x(n).y(e)},l.defined=function(f){return arguments.length?(i=typeof f=="function"?f:Sl(!!f),l):i},l.curve=function(f){return arguments.length?(o=f,a!=null&&(c=o(a)),l):o},l.context=function(f){return arguments.length?(f==null?a=c=null:c=o(a=f),l):a},l}class MX{constructor(e,r){this._context=e,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,r){switch(e=+e,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,r,e,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,e,this._y0,e,r);break}}this._x0=e,this._y0=r}}function B0e(t){return new MX(t,!0)}function P0e(t){return new MX(t,!1)}const WR={draw(t,e){const r=Km(e/QT);t.moveTo(r,0),t.arc(0,0,r,0,WN)}},O0e={draw(t,e){const r=Km(e/5)/2;t.moveTo(-3*r,-r),t.lineTo(-r,-r),t.lineTo(-r,-3*r),t.lineTo(r,-3*r),t.lineTo(r,-r),t.lineTo(3*r,-r),t.lineTo(3*r,r),t.lineTo(r,r),t.lineTo(r,3*r),t.lineTo(-r,3*r),t.lineTo(-r,r),t.lineTo(-3*r,r),t.closePath()}},FX=Km(1/3),R0e=FX*2,D0e={draw(t,e){const r=Km(e/R0e),n=r*FX;t.moveTo(0,-r),t.lineTo(n,0),t.lineTo(0,r),t.lineTo(-n,0),t.closePath()}},M0e={draw(t,e){const r=Km(e),n=-r/2;t.rect(n,n,r,r)}},F0e=.8908130915292852,UX=HT(QT/10)/HT(7*QT/10),U0e=HT(WN/10)*UX,$0e=-IX(WN/10)*UX,H0e={draw(t,e){const r=Km(e*F0e),n=U0e*r,i=$0e*r;t.moveTo(0,-r),t.lineTo(n,i);for(let a=1;a<5;++a){const o=WN*a/5,c=IX(o),u=HT(o);t.lineTo(u*r,-c*r),t.lineTo(c*n-u*i,u*n+c*i)}t.closePath()}},v4=Km(3),Q0e={draw(t,e){const r=-Km(e/(v4*3));t.moveTo(0,r*2),t.lineTo(-v4*r,-r),t.lineTo(v4*r,-r),t.closePath()}},Uf=-.5,$f=Km(3)/2,YB=1/Km(12),z0e=(YB/2+1)*3,V0e={draw(t,e){const r=Km(e/z0e),n=r/2,i=r*YB,a=n,o=r*YB+r,c=-a,u=o;t.moveTo(n,i),t.lineTo(a,o),t.lineTo(c,u),t.lineTo(Uf*n-$f*i,$f*n+Uf*i),t.lineTo(Uf*a-$f*o,$f*a+Uf*o),t.lineTo(Uf*c-$f*u,$f*c+Uf*u),t.lineTo(Uf*n+$f*i,Uf*i-$f*n),t.lineTo(Uf*a+$f*o,Uf*o-$f*a),t.lineTo(Uf*c+$f*u,Uf*u-$f*c),t.closePath()}};function K0e(t,e){let r=null,n=KR(i);t=typeof t=="function"?t:Sl(t||WR),e=typeof e=="function"?e:Sl(e===void 0?64:+e);function i(){let a;if(r||(r=a=n()),t.apply(this,arguments).draw(r,+e.apply(this,arguments)),a)return r=null,a+""||null}return i.type=function(a){return arguments.length?(t=typeof a=="function"?a:Sl(a),i):t},i.size=function(a){return arguments.length?(e=typeof a=="function"?a:Sl(+a),i):e},i.context=function(a){return arguments.length?(r=a??null,i):r},i}function zT(){}function VT(t,e,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+r)/6)}function $X(t){this._context=t}$X.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:VT(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:VT(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function G0e(t){return new $X(t)}function HX(t){this._context=t}HX.prototype={areaStart:zT,areaEnd:zT,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:VT(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function W0e(t){return new HX(t)}function QX(t){this._context=t}QX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,n=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:VT(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Y0e(t){return new QX(t)}function zX(t){this._context=t}zX.prototype={areaStart:zT,areaEnd:zT,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function q0e(t){return new zX(t)}function t$(t){return t<0?-1:1}function r$(t,e,r){var n=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(n||i<0&&-0),o=(r-t._y1)/(i||n<0&&-0),c=(a*i+o*n)/(n+i);return(t$(a)+t$(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(c))||0}function n$(t,e){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-e)/2:e}function y4(t,e,r){var n=t._x0,i=t._y0,a=t._x1,o=t._y1,c=(a-n)/3;t._context.bezierCurveTo(n+c,i+c*e,a-c,o-c*r,a,o)}function KT(t){this._context=t}KT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:y4(this,this._t0,n$(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var r=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,y4(this,n$(this,r=r$(this,t,e)),r);break;default:y4(this,this._t0,r=r$(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=r}}};function VX(t){this._context=new KX(t)}(VX.prototype=Object.create(KT.prototype)).point=function(t,e){KT.prototype.point.call(this,e,t)};function KX(t){this._context=t}KX.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,r,n,i,a){this._context.bezierCurveTo(e,t,n,r,a,i)}};function X0e(t){return new KT(t)}function Z0e(t){return new VX(t)}function GX(t){this._context=t}GX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),r===2)this._context.lineTo(t[1],e[1]);else for(var n=i$(t),i=i$(e),a=0,o=1;o<r;++a,++o)this._context.bezierCurveTo(n[0][a],i[0][a],n[1][a],i[1][a],t[o],e[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function i$(t){var e,r=t.length-1,n,i=new Array(r),a=new Array(r),o=new Array(r);for(i[0]=0,a[0]=2,o[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,a[e]=4,o[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,a[r-1]=7,o[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/a[e-1],a[e]-=n,o[e]-=n*o[e-1];for(i[r-1]=o[r-1]/a[r-1],e=r-2;e>=0;--e)i[e]=(o[e]-i[e+1])/a[e];for(a[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}function J0e(t){return new GX(t)}function qN(t,e){this._context=t,this._t=e}qN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,e)}break}}this._x=t,this._y=e}};function eve(t){return new qN(t,.5)}function tve(t){return new qN(t,0)}function rve(t){return new qN(t,1)}function vy(t,e){if((o=t.length)>1)for(var r=1,n,i,a=t[e[0]],o,c=a.length;r<o;++r)for(i=a,a=t[e[r]],n=0;n<c;++n)a[n][1]+=a[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function qB(t){for(var e=t.length,r=new Array(e);--e>=0;)r[e]=e;return r}function nve(t,e){return t[e]}function ive(t){const e=[];return e.key=t,e}function sve(){var t=Sl([]),e=qB,r=vy,n=nve;function i(a){var o=Array.from(t.apply(this,arguments),ive),c,u=o.length,l=-1,d;for(const f of a)for(c=0,++l;c<u;++c)(o[c][l]=[0,+n(f,o[c].key,l,a)]).data=f;for(c=0,d=GR(e(o));c<u;++c)o[d[c]].index=c;return r(o,d),o}return i.keys=function(a){return arguments.length?(t=typeof a=="function"?a:Sl(Array.from(a)),i):t},i.value=function(a){return arguments.length?(n=typeof a=="function"?a:Sl(+a),i):n},i.order=function(a){return arguments.length?(e=a==null?qB:typeof a=="function"?a:Sl(Array.from(a)),i):e},i.offset=function(a){return arguments.length?(r=a??vy,i):r},i}function ave(t,e){if((n=t.length)>0){for(var r,n,i=0,a=t[0].length,o;i<a;++i){for(o=r=0;r<n;++r)o+=t[r][i][1]||0;if(o)for(r=0;r<n;++r)t[r][i][1]/=o}vy(t,e)}}function ove(t,e){if((i=t.length)>0){for(var r=0,n=t[e[0]],i,a=n.length;r<a;++r){for(var o=0,c=0;o<i;++o)c+=t[o][r][1]||0;n[r][1]+=n[r][0]=-c/2}vy(t,e)}}function lve(t,e){if(!(!((o=t.length)>0)||!((a=(i=t[e[0]]).length)>0))){for(var r=0,n=1,i,a,o;n<a;++n){for(var c=0,u=0,l=0;c<o;++c){for(var d=t[e[c]],f=d[n][1]||0,m=d[n-1][1]||0,p=(f-m)/2,g=0;g<c;++g){var y=t[e[g]],x=y[n][1]||0,w=y[n-1][1]||0;p+=x-w}u+=f,l+=p*f}i[n-1][1]+=i[n-1][0]=r,u&&(r-=l/u)}i[n-1][1]+=i[n-1][0]=r,vy(t,e)}}var x4={},b4={},s$;function cve(){return s$||(s$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r==="__proto__"}t.isUnsafeProperty=e})(b4)),b4}var w4={},a$;function WX(){return a$||(a$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}t.isDeepKey=e})(w4)),w4}var _4={},o$;function YR(){return o$||(o$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="string"||typeof r=="symbol"?r:Object.is(r?.valueOf?.(),-0)?"-0":String(r)}t.toKey=e})(_4)),_4}var E4={},S4={},l$;function uve(){return l$||(l$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){if(r==null)return"";if(typeof r=="string")return r;if(Array.isArray(r))return r.map(e).join(",");const n=String(r);return n==="0"&&Object.is(Number(r),-0)?"-0":n}t.toString=e})(S4)),S4}var c$;function qR(){return c$||(c$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=uve(),r=YR();function n(i){if(Array.isArray(i))return i.map(r.toKey);if(typeof i=="symbol")return[i];i=e.toString(i);const a=[],o=i.length;if(o===0)return a;let c=0,u="",l="",d=!1;for(i.charCodeAt(0)===46&&(a.push(""),c++);c<o;){const f=i[c];l?f==="\\"&&c+1<o?(c++,u+=i[c]):f===l?l="":u+=f:d?f==='"'||f==="'"?l=f:f==="]"?(d=!1,a.push(u),u=""):u+=f:f==="["?(d=!0,u&&(a.push(u),u="")):f==="."?u&&(a.push(u),u=""):u+=f,c++}return u&&a.push(u),a}t.toPath=n})(E4)),E4}var u$;function XR(){return u$||(u$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=cve(),r=WX(),n=YR(),i=qR();function a(c,u,l){if(c==null)return l;switch(typeof u){case"string":{if(e.isUnsafeProperty(u))return l;const d=c[u];return d===void 0?r.isDeepKey(u)?a(c,i.toPath(u),l):l:d}case"number":case"symbol":{typeof u=="number"&&(u=n.toKey(u));const d=c[u];return d===void 0?l:d}default:{if(Array.isArray(u))return o(c,u,l);if(Object.is(u?.valueOf(),-0)?u="-0":u=String(u),e.isUnsafeProperty(u))return l;const d=c[u];return d===void 0?l:d}}}function o(c,u,l){if(u.length===0)return l;let d=c;for(let f=0;f<u.length;f++){if(d==null||e.isUnsafeProperty(u[f]))return l;d=d[u[f]]}return d===void 0?l:d}t.get=a})(x4)),x4}var j4,d$;function dve(){return d$||(d$=1,j4=XR().get),j4}var hve=dve();const yy=om(hve);var fve=4;function L0(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:fve,r=10**e,n=Math.round(t*r)/r;return Object.is(n,-0)?0:n}function uc(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return t.reduce((i,a,o)=>{var c=r[o-1];return typeof c=="string"?i+c+a:c!==void 0?i+L0(c)+a:i+a},"")}var pd=t=>t===0?0:t>0?1:-1,YA=t=>typeof t=="number"&&t!=+t,xy=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,Ei=t=>(typeof t=="number"||t instanceof Number)&&!YA(t),qA=t=>Ei(t)||typeof t=="string",mve=0,R2=t=>{var e=++mve;return"".concat(t||"").concat(e)},ih=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Ei(e)&&typeof e!="string")return n;var a;if(xy(e)){if(r==null)return n;var o=e.indexOf("%");a=r*parseFloat(e.slice(0,o))/100}else a=+e;return YA(a)&&(a=n),i&&r!=null&&a>r&&(a=r),a},YX=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,r={},n=0;n<e;n++)if(!r[String(t[n])])r[String(t[n])]=!0;else return!0;return!1};function dc(t,e,r){return Ei(t)&&Ei(e)?L0(t+r*(e-t)):e}function Ave(t,e,r){if(!(!t||!t.length))return t.find(n=>n&&(typeof e=="function"?e(n):yy(n,e))===r)}var ru=t=>t===null||typeof t>"u",F_=t=>ru(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1));function Uh(t){return t!=null}function X0(){}var pve=["type","size","sizeType"];function XB(){return XB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},XB.apply(null,arguments)}function h$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function f$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?h$(Object(r),!0).forEach(function(n){gve(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):h$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function gve(t,e,r){return(e=vve(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function vve(t){var e=yve(t,"string");return typeof e=="symbol"?e:e+""}function yve(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function xve(t,e){if(t==null)return{};var r,n,i=bve(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function bve(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var qX={symbolCircle:WR,symbolCross:O0e,symbolDiamond:D0e,symbolSquare:M0e,symbolStar:H0e,symbolTriangle:Q0e,symbolWye:V0e},wve=Math.PI/180,_ve=t=>{var e="symbol".concat(F_(t));return qX[e]||WR},Eve=(t,e,r)=>{if(e==="area")return t;switch(r){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var n=18*wve;return 1.25*t*t*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},Sve=(t,e)=>{qX["symbol".concat(F_(t))]=e},ZR=t=>{var{type:e="circle",size:r=64,sizeType:n="area"}=t,i=xve(t,pve),a=f$(f$({},i),{},{type:e,size:r,sizeType:n}),o="circle";typeof e=="string"&&(o=e);var c=()=>{var m=_ve(o),p=K0e().type(m).size(Eve(r,n,o)),g=p();if(g!==null)return g},{className:u,cx:l,cy:d}=a,f=zu(a);return Ei(l)&&Ei(d)&&Ei(r)?T.createElement("path",XB({},f,{className:ja("recharts-symbols",u),transform:"translate(".concat(l,", ").concat(d,")"),d:c()})):null};ZR.registerSymbol=Sve;var XX=t=>"radius"in t&&"startAngle"in t&&"endAngle"in t,JR=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var r=t;if(T.isValidElement(t)&&(r=t.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(i=>{zR(i)&&(n[i]=(a=>r[i](r,a)))}),n},jve=(t,e,r)=>n=>(t(e,r,n),null),g1=(t,e,r)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var n=null;return Object.keys(t).forEach(i=>{var a=t[i];zR(i)&&typeof a=="function"&&(n||(n={}),n[i]=jve(a,e,r))}),n};function m$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Tve(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?m$(Object(r),!0).forEach(function(n){Cve(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):m$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Cve(t,e,r){return(e=Nve(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Nve(t){var e=kve(t,"string");return typeof e=="symbol"?e:e+""}function kve(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Uc(t,e){var r=Tve({},t),n=e,i=Object.keys(e),a=i.reduce((o,c)=>(o[c]===void 0&&n[c]!==void 0&&(o[c]=n[c]),o),r);return a}function GT(){return GT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},GT.apply(null,arguments)}function A$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Lve(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?A$(Object(r),!0).forEach(function(n){Ive(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):A$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Ive(t,e,r){return(e=Bve(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Bve(t){var e=Pve(t,"string");return typeof e=="symbol"?e:e+""}function Pve(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Wf=32,Ove={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function Rve(t){var{data:e,iconType:r,inactiveColor:n}=t,i=Wf/2,a=Wf/6,o=Wf/3,c=e.inactive?n:e.color,u=r??e.type;if(u==="none")return null;if(u==="plainline"){var l;return T.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:(l=e.payload)===null||l===void 0?void 0:l.strokeDasharray,x1:0,y1:i,x2:Wf,y2:i,className:"recharts-legend-icon"})}if(u==="line")return T.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(i,"h").concat(o,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(2*o,",").concat(i,`
            H`).concat(Wf,"M").concat(2*o,",").concat(i,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(o,",").concat(i),className:"recharts-legend-icon"});if(u==="rect")return T.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(Wf/8,"h").concat(Wf,"v").concat(Wf*3/4,"h").concat(-Wf,"z"),className:"recharts-legend-icon"});if(T.isValidElement(e.legendIcon)){var d=Lve({},e);return delete d.legendIcon,T.cloneElement(e.legendIcon,d)}return T.createElement(ZR,{fill:c,cx:i,cy:i,size:Wf,sizeType:"diameter",type:u})}function Dve(t){var{payload:e,iconSize:r,layout:n,formatter:i,inactiveColor:a,iconType:o}=t,c={x:0,y:0,width:Wf,height:Wf},u={display:n==="horizontal"?"inline-block":"block",marginRight:10},l={display:"inline-block",verticalAlign:"middle",marginRight:4};return e.map((d,f)=>{var m=d.formatter||i,p=ja({"recharts-legend-item":!0,["legend-item-".concat(f)]:!0,inactive:d.inactive});if(d.type==="none")return null;var g=d.inactive?a:d.color,y=m?m(d.value,d,f):d.value;return T.createElement("li",GT({className:p,style:u,key:"legend-item-".concat(f)},g1(t,d,f)),T.createElement(VR,{width:r,height:r,viewBox:c,style:l,"aria-label":"".concat(y," legend icon")},T.createElement(Rve,{data:d,iconType:o,inactiveColor:a})),T.createElement("span",{className:"recharts-legend-item-text",style:{color:g}},y))})}var Mve=t=>{var e=Uc(t,Ove),{payload:r,layout:n,align:i}=e;if(!r||!r.length)return null;var a={padding:0,margin:0,textAlign:n==="horizontal"?i:"left"};return T.createElement("ul",{className:"recharts-default-legend",style:a},T.createElement(Dve,GT({},e,{payload:r})))},T4={},C4={},p$;function Fve(){return p$||(p$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n){const i=new Map;for(let a=0;a<r.length;a++){const o=r[a],c=n(o,a,r);i.has(c)||i.set(c,o)}return Array.from(i.values())}t.uniqBy=e})(C4)),C4}var N4={},g$;function Uve(){return g$||(g$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n){return function(...i){return r.apply(this,i.slice(0,n))}}t.ary=e})(N4)),N4}var k4={},v$;function ZX(){return v$||(v$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r}t.identity=e})(k4)),k4}var L4={},I4={},B4={},y$;function $ve(){return y$||(y$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return Number.isSafeInteger(r)&&r>=0}t.isLength=e})(B4)),B4}var x$;function eD(){return x$||(x$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=$ve();function r(n){return n!=null&&typeof n!="function"&&e.isLength(n.length)}t.isArrayLike=r})(I4)),I4}var P4={},b$;function Hve(){return b$||(b$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="object"&&r!==null}t.isObjectLike=e})(P4)),P4}var w$;function Qve(){return w$||(w$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=eD(),r=Hve();function n(i){return r.isObjectLike(i)&&e.isArrayLike(i)}t.isArrayLikeObject=n})(L4)),L4}var O4={},R4={},_$;function zve(){return _$||(_$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=XR();function r(n){return function(i){return e.get(i,n)}}t.property=r})(R4)),R4}var D4={},M4={},F4={},U4={},E$;function JX(){return E$||(E$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r!==null&&(typeof r=="object"||typeof r=="function")}t.isObject=e})(U4)),U4}var $4={},S$;function eZ(){return S$||(S$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r==null||typeof r!="object"&&typeof r!="function"}t.isPrimitive=e})($4)),$4}var H4={},j$;function tZ(){return j$||(j$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}t.isEqualsSameValueZero=e})(H4)),H4}var T$;function Vve(){return T$||(T$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=JX(),r=eZ(),n=tZ();function i(d,f,m){return typeof m!="function"?i(d,f,()=>{}):a(d,f,function p(g,y,x,w,_,E){const N=m(g,y,x,w,_,E);return N!==void 0?!!N:a(g,y,p,E)},new Map)}function a(d,f,m,p){if(f===d)return!0;switch(typeof f){case"object":return o(d,f,m,p);case"function":return Object.keys(f).length>0?a(d,{...f},m,p):n.isEqualsSameValueZero(d,f);default:return e.isObject(d)?typeof f=="string"?f==="":!0:n.isEqualsSameValueZero(d,f)}}function o(d,f,m,p){if(f==null)return!0;if(Array.isArray(f))return u(d,f,m,p);if(f instanceof Map)return c(d,f,m,p);if(f instanceof Set)return l(d,f,m,p);const g=Object.keys(f);if(d==null||r.isPrimitive(d))return g.length===0;if(g.length===0)return!0;if(p?.has(f))return p.get(f)===d;p?.set(f,d);try{for(let y=0;y<g.length;y++){const x=g[y];if(!r.isPrimitive(d)&&!(x in d)||f[x]===void 0&&d[x]!==void 0||f[x]===null&&d[x]!==null||!m(d[x],f[x],x,d,f,p))return!1}return!0}finally{p?.delete(f)}}function c(d,f,m,p){if(f.size===0)return!0;if(!(d instanceof Map))return!1;for(const[g,y]of f.entries()){const x=d.get(g);if(m(x,y,g,d,f,p)===!1)return!1}return!0}function u(d,f,m,p){if(f.length===0)return!0;if(!Array.isArray(d))return!1;const g=new Set;for(let y=0;y<f.length;y++){const x=f[y];let w=!1;for(let _=0;_<d.length;_++){if(g.has(_))continue;const E=d[_];let N=!1;if(m(E,x,y,d,f,p)&&(N=!0),N){g.add(_),w=!0;break}}if(!w)return!1}return!0}function l(d,f,m,p){return f.size===0?!0:d instanceof Set?u([...d],[...f],m,p):!1}t.isMatchWith=i,t.isSetMatch=l})(F4)),F4}var C$;function rZ(){return C$||(C$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Vve();function r(n,i){return e.isMatchWith(n,i,()=>{})}t.isMatch=r})(M4)),M4}var Q4={},z4={},V4={},N$;function Kve(){return N$||(N$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}t.getSymbols=e})(V4)),V4}var K4={},k$;function tD(){return k$||(k$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}t.getTag=e})(K4)),K4}var G4={},L$;function nZ(){return L$||(L$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",r="[object String]",n="[object Number]",i="[object Boolean]",a="[object Arguments]",o="[object Symbol]",c="[object Date]",u="[object Map]",l="[object Set]",d="[object Array]",f="[object Function]",m="[object ArrayBuffer]",p="[object Object]",g="[object Error]",y="[object DataView]",x="[object Uint8Array]",w="[object Uint8ClampedArray]",_="[object Uint16Array]",E="[object Uint32Array]",N="[object BigUint64Array]",C="[object Int8Array]",I="[object Int16Array]",D="[object Int32Array]",U="[object BigInt64Array]",G="[object Float32Array]",q="[object Float64Array]";t.argumentsTag=a,t.arrayBufferTag=m,t.arrayTag=d,t.bigInt64ArrayTag=U,t.bigUint64ArrayTag=N,t.booleanTag=i,t.dataViewTag=y,t.dateTag=c,t.errorTag=g,t.float32ArrayTag=G,t.float64ArrayTag=q,t.functionTag=f,t.int16ArrayTag=I,t.int32ArrayTag=D,t.int8ArrayTag=C,t.mapTag=u,t.numberTag=n,t.objectTag=p,t.regexpTag=e,t.setTag=l,t.stringTag=r,t.symbolTag=o,t.uint16ArrayTag=_,t.uint32ArrayTag=E,t.uint8ArrayTag=x,t.uint8ClampedArrayTag=w})(G4)),G4}var W4={},I$;function Gve(){return I$||(I$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}t.isTypedArray=e})(W4)),W4}var B$;function iZ(){return B$||(B$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Kve(),r=tD(),n=nZ(),i=eZ(),a=Gve();function o(d,f){return c(d,void 0,d,new Map,f)}function c(d,f,m,p=new Map,g=void 0){const y=g?.(d,f,m,p);if(y!==void 0)return y;if(i.isPrimitive(d))return d;if(p.has(d))return p.get(d);if(Array.isArray(d)){const x=new Array(d.length);p.set(d,x);for(let w=0;w<d.length;w++)x[w]=c(d[w],w,m,p,g);return Object.hasOwn(d,"index")&&(x.index=d.index),Object.hasOwn(d,"input")&&(x.input=d.input),x}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const x=new RegExp(d.source,d.flags);return x.lastIndex=d.lastIndex,x}if(d instanceof Map){const x=new Map;p.set(d,x);for(const[w,_]of d)x.set(w,c(_,w,m,p,g));return x}if(d instanceof Set){const x=new Set;p.set(d,x);for(const w of d)x.add(c(w,void 0,m,p,g));return x}if(typeof Buffer<"u"&&Buffer.isBuffer(d))return d.subarray();if(a.isTypedArray(d)){const x=new(Object.getPrototypeOf(d)).constructor(d.length);p.set(d,x);for(let w=0;w<d.length;w++)x[w]=c(d[w],w,m,p,g);return x}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const x=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return p.set(d,x),u(x,d,m,p,g),x}if(typeof File<"u"&&d instanceof File){const x=new File([d],d.name,{type:d.type});return p.set(d,x),u(x,d,m,p,g),x}if(typeof Blob<"u"&&d instanceof Blob){const x=new Blob([d],{type:d.type});return p.set(d,x),u(x,d,m,p,g),x}if(d instanceof Error){const x=new d.constructor;return p.set(d,x),x.message=d.message,x.name=d.name,x.stack=d.stack,x.cause=d.cause,u(x,d,m,p,g),x}if(d instanceof Boolean){const x=new Boolean(d.valueOf());return p.set(d,x),u(x,d,m,p,g),x}if(d instanceof Number){const x=new Number(d.valueOf());return p.set(d,x),u(x,d,m,p,g),x}if(d instanceof String){const x=new String(d.valueOf());return p.set(d,x),u(x,d,m,p,g),x}if(typeof d=="object"&&l(d)){const x=Object.create(Object.getPrototypeOf(d));return p.set(d,x),u(x,d,m,p,g),x}return d}function u(d,f,m=d,p,g){const y=[...Object.keys(f),...e.getSymbols(f)];for(let x=0;x<y.length;x++){const w=y[x],_=Object.getOwnPropertyDescriptor(d,w);(_==null||_.writable)&&(d[w]=c(f[w],w,m,p,g))}}function l(d){switch(r.getTag(d)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=o,t.cloneDeepWithImpl=c,t.copyProperties=u})(z4)),z4}var P$;function Wve(){return P$||(P$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=iZ();function r(n){return e.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}t.cloneDeep=r})(Q4)),Q4}var O$;function Yve(){return O$||(O$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=rZ(),r=Wve();function n(i){return i=r.cloneDeep(i),a=>e.isMatch(a,i)}t.matches=n})(D4)),D4}var Y4={},q4={},X4={},R$;function qve(){return R$||(R$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=iZ(),r=tD(),n=nZ();function i(a,o){return e.cloneDeepWith(a,(c,u,l,d)=>{const f=o?.(c,u,l,d);if(f!==void 0)return f;if(typeof a=="object"){if(r.getTag(a)===n.objectTag&&typeof a.constructor!="function"){const m={};return d.set(a,m),e.copyProperties(m,a,l,d),m}switch(Object.prototype.toString.call(a)){case n.numberTag:case n.stringTag:case n.booleanTag:{const m=new a.constructor(a?.valueOf());return e.copyProperties(m,a),m}case n.argumentsTag:{const m={};return e.copyProperties(m,a),m.length=a.length,m[Symbol.iterator]=a[Symbol.iterator],m}default:return}}})}t.cloneDeepWith=i})(X4)),X4}var D$;function Xve(){return D$||(D$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=qve();function r(n){return e.cloneDeepWith(n)}t.cloneDeep=r})(q4)),q4}var Z4={},J4={},M$;function sZ(){return M$||(M$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function r(n,i=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<i;case"symbol":return!1;case"string":return e.test(n)}}t.isIndex=r})(J4)),J4}var eL={},F$;function Zve(){return F$||(F$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=tD();function r(n){return n!==null&&typeof n=="object"&&e.getTag(n)==="[object Arguments]"}t.isArguments=r})(eL)),eL}var U$;function Jve(){return U$||(U$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=WX(),r=sZ(),n=Zve(),i=qR();function a(o,c){let u;if(Array.isArray(c)?u=c:typeof c=="string"&&e.isDeepKey(c)&&o?.[c]==null?u=i.toPath(c):u=[c],u.length===0)return!1;let l=o;for(let d=0;d<u.length;d++){const f=u[d];if((l==null||!Object.hasOwn(l,f))&&!((Array.isArray(l)||n.isArguments(l))&&r.isIndex(f)&&f<l.length))return!1;l=l[f]}return!0}t.has=a})(Z4)),Z4}var $$;function eye(){return $$||($$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=rZ(),r=YR(),n=Xve(),i=XR(),a=Jve();function o(c,u){switch(typeof c){case"object":{Object.is(c?.valueOf(),-0)&&(c="-0");break}case"number":{c=r.toKey(c);break}}return u=n.cloneDeep(u),function(l){const d=i.get(l,c);return d===void 0?a.has(l,c):u===void 0?d===void 0:e.isMatch(d,u)}}t.matchesProperty=o})(Y4)),Y4}var H$;function tye(){return H$||(H$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=ZX(),r=zve(),n=Yve(),i=eye();function a(o){if(o==null)return e.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?i.matchesProperty(o[0],o[1]):n.matches(o);case"string":case"symbol":case"number":return r.property(o)}}t.iteratee=a})(O4)),O4}var Q$;function rye(){return Q$||(Q$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Fve(),r=Uve(),n=ZX(),i=Qve(),a=tye();function o(c,u=n.identity){return i.isArrayLikeObject(c)?e.uniqBy(Array.from(c),r.ary(a.iteratee(u),1)):[]}t.uniqBy=o})(T4)),T4}var tL,z$;function nye(){return z$||(z$=1,tL=rye().uniqBy),tL}var iye=nye();const V$=om(iye);function aZ(t,e,r){return e===!0?V$(t,r):typeof e=="function"?V$(t,e):t}var rL={exports:{}},nL={},iL={exports:{}},sL={};var K$;function sye(){if(K$)return sL;K$=1;var t=u1();function e(f,m){return f===m&&(f!==0||1/f===1/m)||f!==f&&m!==m}var r=typeof Object.is=="function"?Object.is:e,n=t.useState,i=t.useEffect,a=t.useLayoutEffect,o=t.useDebugValue;function c(f,m){var p=m(),g=n({inst:{value:p,getSnapshot:m}}),y=g[0].inst,x=g[1];return a(function(){y.value=p,y.getSnapshot=m,u(y)&&x({inst:y})},[f,p,m]),i(function(){return u(y)&&x({inst:y}),f(function(){u(y)&&x({inst:y})})},[f]),o(p),p}function u(f){var m=f.getSnapshot;f=f.value;try{var p=m();return!r(f,p)}catch{return!0}}function l(f,m){return m()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?l:c;return sL.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:d,sL}var G$;function aye(){return G$||(G$=1,iL.exports=sye()),iL.exports}var W$;function oye(){if(W$)return nL;W$=1;var t=u1(),e=aye();function r(l,d){return l===d&&(l!==0||1/l===1/d)||l!==l&&d!==d}var n=typeof Object.is=="function"?Object.is:r,i=e.useSyncExternalStore,a=t.useRef,o=t.useEffect,c=t.useMemo,u=t.useDebugValue;return nL.useSyncExternalStoreWithSelector=function(l,d,f,m,p){var g=a(null);if(g.current===null){var y={hasValue:!1,value:null};g.current=y}else y=g.current;g=c(function(){function w(I){if(!_){if(_=!0,E=I,I=m(I),p!==void 0&&y.hasValue){var D=y.value;if(p(D,I))return N=D}return N=I}if(D=N,n(E,I))return D;var U=m(I);return p!==void 0&&p(D,U)?(E=I,D):(E=I,N=U)}var _=!1,E,N,C=f===void 0?null:f;return[function(){return w(d())},C===null?void 0:function(){return w(C())}]},[d,f,m,p]);var x=i(l,g[0],g[1]);return o(function(){y.hasValue=!0,y.value=x},[x]),u(x),x},nL}var Y$;function lye(){return Y$||(Y$=1,rL.exports=oye()),rL.exports}var cye=lye(),rD=T.createContext(null),uye=t=>t,Al=()=>{var t=T.useContext(rD);return t?t.store.dispatch:uye},ij=()=>{},dye=()=>ij,hye=(t,e)=>t===e;function si(t){var e=T.useContext(rD),r=T.useMemo(()=>e?n=>{if(n!=null)return t(n)}:ij,[e,t]);return cye.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:dye,e?e.store.getState:ij,e?e.store.getState:ij,r,hye)}function fye(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function mye(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function Aye(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(r=>typeof r=="function")){const r=t.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${e}[${r}]`)}}var q$=t=>Array.isArray(t)?t:[t];function pye(t){const e=Array.isArray(t[0])?t[0]:t;return Aye(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function gye(t,e){const r=[],{length:n}=t;for(let i=0;i<n;i++)r.push(t[i].apply(null,e));return r}var vye=class{constructor(t){this.value=t}deref(){return this.value}},yye=typeof WeakRef<"u"?WeakRef:vye,xye=0,X$=1;function WE(){return{s:xye,v:void 0,o:null,p:null}}function oZ(t,e={}){let r=WE();const{resultEqualityCheck:n}=e;let i,a=0;function o(){let c=r;const{length:u}=arguments;for(let f=0,m=u;f<m;f++){const p=arguments[f];if(typeof p=="function"||typeof p=="object"&&p!==null){let g=c.o;g===null&&(c.o=g=new WeakMap);const y=g.get(p);y===void 0?(c=WE(),g.set(p,c)):c=y}else{let g=c.p;g===null&&(c.p=g=new Map);const y=g.get(p);y===void 0?(c=WE(),g.set(p,c)):c=y}}const l=c;let d;if(c.s===X$)d=c.v;else if(d=t.apply(null,arguments),a++,n){const f=i?.deref?.()??i;f!=null&&n(f,d)&&(d=f,a!==0&&a--),i=typeof d=="object"&&d!==null||typeof d=="function"?new yye(d):d}return l.s=X$,l.v=d,d}return o.clearCache=()=>{r=WE(),o.resetResultsCount()},o.resultsCount=()=>a,o.resetResultsCount=()=>{a=0},o}function bye(t,...e){const r=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,n=(...i)=>{let a=0,o=0,c,u={},l=i.pop();typeof l=="object"&&(u=l,l=i.pop()),fye(l,`createSelector expects an output function after the inputs, but received: [${typeof l}]`);const d={...r,...u},{memoize:f,memoizeOptions:m=[],argsMemoize:p=oZ,argsMemoizeOptions:g=[]}=d,y=q$(m),x=q$(g),w=pye(i),_=f(function(){return a++,l.apply(null,arguments)},...y),E=p(function(){o++;const C=gye(w,arguments);return c=_.apply(null,C),c},...x);return Object.assign(E,{resultFunc:l,memoizedResultFunc:_,dependencies:w,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>c,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:f,argsMemoize:p})};return Object.assign(n,{withTypes:()=>n}),n}var dr=bye(oZ),wye=Object.assign((t,e=dr)=>{mye(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const r=Object.keys(t),n=r.map(a=>t[a]);return e(n,(...a)=>a.reduce((o,c,u)=>(o[r[u]]=c,o),{}))},{withTypes:()=>wye}),aL={},oL={},lL={},Z$;function _ye(){return Z$||(Z$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,i,a)=>{if(n!==i){const o=e(n),c=e(i);if(o===c&&o===0){if(n<i)return a==="desc"?1:-1;if(n>i)return a==="desc"?-1:1}return a==="desc"?c-o:o-c}return 0};t.compareValues=r})(lL)),lL}var cL={},uL={},J$;function lZ(){return J$||(J$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"||r instanceof Symbol}t.isSymbol=e})(uL)),uL}var e9;function Eye(){return e9||(e9=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=lZ(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function i(a,o){return Array.isArray(a)?!1:typeof a=="number"||typeof a=="boolean"||a==null||e.isSymbol(a)?!0:typeof a=="string"&&(n.test(a)||!r.test(a))||o!=null&&Object.hasOwn(o,a)}t.isKey=i})(cL)),cL}var t9;function Sye(){return t9||(t9=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=_ye(),r=Eye(),n=qR();function i(a,o,c,u){if(a==null)return[];c=u?void 0:c,Array.isArray(a)||(a=Object.values(a)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(c)||(c=c==null?[]:[c]),c=c.map(p=>String(p));const l=(p,g)=>{let y=p;for(let x=0;x<g.length&&y!=null;++x)y=y[g[x]];return y},d=(p,g)=>g==null||p==null?g:typeof p=="object"&&"key"in p?Object.hasOwn(g,p.key)?g[p.key]:l(g,p.path):typeof p=="function"?p(g):Array.isArray(p)?l(g,p):typeof g=="object"?g[p]:g,f=o.map(p=>(Array.isArray(p)&&p.length===1&&(p=p[0]),p==null||typeof p=="function"||Array.isArray(p)||r.isKey(p)?p:{key:p,path:n.toPath(p)}));return a.map(p=>({original:p,criteria:f.map(g=>d(g,p))})).slice().sort((p,g)=>{for(let y=0;y<f.length;y++){const x=e.compareValues(p.criteria[y],g.criteria[y],c[y]);if(x!==0)return x}return 0}).map(p=>p.original)}t.orderBy=i})(oL)),oL}var dL={},r9;function jye(){return r9||(r9=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n=1){const i=[],a=Math.floor(n),o=(c,u)=>{for(let l=0;l<c.length;l++){const d=c[l];Array.isArray(d)&&u<a?o(d,u+1):i.push(d)}};return o(r,0),i}t.flatten=e})(dL)),dL}var hL={},n9;function cZ(){return n9||(n9=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=sZ(),r=eD(),n=JX(),i=tZ();function a(o,c,u){return n.isObject(u)&&(typeof c=="number"&&r.isArrayLike(u)&&e.isIndex(c)&&c<u.length||typeof c=="string"&&c in u)?i.isEqualsSameValueZero(u[c],o):!1}t.isIterateeCall=a})(hL)),hL}var i9;function Tye(){return i9||(i9=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Sye(),r=jye(),n=cZ();function i(a,...o){const c=o.length;return c>1&&n.isIterateeCall(a,o[0],o[1])?o=[]:c>2&&n.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),e.orderBy(a,r.flatten(o),["asc"])}t.sortBy=i})(aL)),aL}var fL,s9;function Cye(){return s9||(s9=1,fL=Tye().sortBy),fL}var Nye=Cye();const XN=om(Nye);var uZ=t=>t.legend.settings,kye=t=>t.legend.size,Lye=t=>t.legend.payload,Iye=dr([Lye,uZ],(t,e)=>{var{itemSorter:r}=e,n=t.flat(1);return r?XN(n,r):n});function Bye(){return si(Iye)}var YE=1;function dZ(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,r]=T.useState({height:0,left:0,top:0,width:0}),n=T.useCallback(i=>{if(i!=null){var a=i.getBoundingClientRect(),o={height:a.height,left:a.left,top:a.top,width:a.width};(Math.abs(o.height-e.height)>YE||Math.abs(o.left-e.left)>YE||Math.abs(o.top-e.top)>YE||Math.abs(o.width-e.width)>YE)&&r({height:o.height,left:o.left,top:o.top,width:o.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,n]}function Dd(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var Pye=typeof Symbol=="function"&&Symbol.observable||"@@observable",a9=Pye,mL=()=>Math.random().toString(36).substring(7).split("").join("."),Oye={INIT:`@@redux/INIT${mL()}`,REPLACE:`@@redux/REPLACE${mL()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${mL()}`},WT=Oye;function nD(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function hZ(t,e,r){if(typeof t!="function")throw new Error(Dd(2));if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Dd(0));if(typeof e=="function"&&typeof r>"u"&&(r=e,e=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Dd(1));return r(hZ)(t,e)}let n=t,i=e,a=new Map,o=a,c=0,u=!1;function l(){o===a&&(o=new Map,a.forEach((x,w)=>{o.set(w,x)}))}function d(){if(u)throw new Error(Dd(3));return i}function f(x){if(typeof x!="function")throw new Error(Dd(4));if(u)throw new Error(Dd(5));let w=!0;l();const _=c++;return o.set(_,x),function(){if(w){if(u)throw new Error(Dd(6));w=!1,l(),o.delete(_),a=null}}}function m(x){if(!nD(x))throw new Error(Dd(7));if(typeof x.type>"u")throw new Error(Dd(8));if(typeof x.type!="string")throw new Error(Dd(17));if(u)throw new Error(Dd(9));try{u=!0,i=n(i,x)}finally{u=!1}return(a=o).forEach(_=>{_()}),x}function p(x){if(typeof x!="function")throw new Error(Dd(10));n=x,m({type:WT.REPLACE})}function g(){const x=f;return{subscribe(w){if(typeof w!="object"||w===null)throw new Error(Dd(11));function _(){const N=w;N.next&&N.next(d())}return _(),{unsubscribe:x(_)}},[a9](){return this}}}return m({type:WT.INIT}),{dispatch:m,subscribe:f,getState:d,replaceReducer:p,[a9]:g}}function Rye(t){Object.keys(t).forEach(e=>{const r=t[e];if(typeof r(void 0,{type:WT.INIT})>"u")throw new Error(Dd(12));if(typeof r(void 0,{type:WT.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Dd(13))})}function fZ(t){const e=Object.keys(t),r={};for(let a=0;a<e.length;a++){const o=e[a];typeof t[o]=="function"&&(r[o]=t[o])}const n=Object.keys(r);let i;try{Rye(r)}catch(a){i=a}return function(o={},c){if(i)throw i;let u=!1;const l={};for(let d=0;d<n.length;d++){const f=n[d],m=r[f],p=o[f],g=m(p,c);if(typeof g>"u")throw c&&c.type,new Error(Dd(14));l[f]=g,u=u||g!==p}return u=u||n.length!==Object.keys(o).length,u?l:o}}function YT(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,r)=>(...n)=>e(r(...n)))}function Dye(...t){return e=>(r,n)=>{const i=e(r,n);let a=()=>{throw new Error(Dd(15))};const o={getState:i.getState,dispatch:(u,...l)=>a(u,...l)},c=t.map(u=>u(o));return a=YT(...c)(i.dispatch),{...i,dispatch:a}}}function mZ(t){return nD(t)&&"type"in t&&typeof t.type=="string"}var AZ=Symbol.for("immer-nothing"),o9=Symbol.for("immer-draftable"),wh=Symbol.for("immer-state");function Dm(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var wf=Object,Vb=wf.getPrototypeOf,qT="constructor",ZN="prototype",ZB="configurable",XT="enumerable",sj="writable",D2="value",ig=t=>!!t&&!!t[wh];function Qm(t){return t?pZ(t)||e5(t)||!!t[o9]||!!t[qT]?.[o9]||t5(t)||r5(t):!1}var Mye=wf[ZN][qT].toString(),l9=new WeakMap;function pZ(t){if(!t||!iD(t))return!1;const e=Vb(t);if(e===null||e===wf[ZN])return!0;const r=wf.hasOwnProperty.call(e,qT)&&e[qT];if(r===Object)return!0;if(!jx(r))return!1;let n=l9.get(r);return n===void 0&&(n=Function.toString.call(r),l9.set(r,n)),n===Mye}function JN(t,e,r=!0){U_(t)===0?(r?Reflect.ownKeys(t):wf.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((n,i)=>e(i,n,t))}function U_(t){const e=t[wh];return e?e.type_:e5(t)?1:t5(t)?2:r5(t)?3:0}var c9=(t,e,r=U_(t))=>r===2?t.has(e):wf[ZN].hasOwnProperty.call(t,e),JB=(t,e,r=U_(t))=>r===2?t.get(e):t[e],ZT=(t,e,r,n=U_(t))=>{n===2?t.set(e,r):n===3?t.add(r):t[e]=r};function Fye(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}var e5=Array.isArray,t5=t=>t instanceof Map,r5=t=>t instanceof Set,iD=t=>typeof t=="object",jx=t=>typeof t=="function",AL=t=>typeof t=="boolean";function Uye(t){const e=+t;return Number.isInteger(e)&&String(e)===t}var Dp=t=>t.copy_||t.base_,sD=t=>t.modified_?t.copy_:t.base_;function eP(t,e){if(t5(t))return new Map(t);if(r5(t))return new Set(t);if(e5(t))return Array[ZN].slice.call(t);const r=pZ(t);if(e===!0||e==="class_only"&&!r){const n=wf.getOwnPropertyDescriptors(t);delete n[wh];let i=Reflect.ownKeys(n);for(let a=0;a<i.length;a++){const o=i[a],c=n[o];c[sj]===!1&&(c[sj]=!0,c[ZB]=!0),(c.get||c.set)&&(n[o]={[ZB]:!0,[sj]:!0,[XT]:c[XT],[D2]:t[o]})}return wf.create(Vb(t),n)}else{const n=Vb(t);if(n!==null&&r)return{...t};const i=wf.create(n);return wf.assign(i,t)}}function aD(t,e=!1){return n5(t)||ig(t)||!Qm(t)||(U_(t)>1&&wf.defineProperties(t,{set:qE,add:qE,clear:qE,delete:qE}),wf.freeze(t),e&&JN(t,(r,n)=>{aD(n,!0)},!1)),t}function $ye(){Dm(2)}var qE={[D2]:$ye};function n5(t){return t===null||!iD(t)?!0:wf.isFrozen(t)}var JT="MapSet",tP="Patches",u9="ArrayMethods",gZ={};function by(t){const e=gZ[t];return e||Dm(0,t),e}var d9=t=>!!gZ[t],M2,vZ=()=>M2,Hye=(t,e)=>({drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:d9(JT)?by(JT):void 0,arrayMethodsPlugin_:d9(u9)?by(u9):void 0});function h9(t,e){e&&(t.patchPlugin_=by(tP),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function rP(t){nP(t),t.drafts_.forEach(Qye),t.drafts_=null}function nP(t){t===M2&&(M2=t.parent_)}var f9=t=>M2=Hye(M2,t);function Qye(t){const e=t[wh];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function m9(t,e){e.unfinalizedDrafts_=e.drafts_.length;const r=e.drafts_[0];if(t!==void 0&&t!==r){r[wh].modified_&&(rP(e),Dm(4)),Qm(t)&&(t=A9(e,t));const{patchPlugin_:i}=e;i&&i.generateReplacementPatches_(r[wh].base_,t,e)}else t=A9(e,r);return zye(e,t,!0),rP(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==AZ?t:void 0}function A9(t,e){if(n5(e))return e;const r=e[wh];if(!r)return eC(e,t.handledSet_,t);if(!i5(r,t))return e;if(!r.modified_)return r.base_;if(!r.finalized_){const{callbacks_:n}=r;if(n)for(;n.length>0;)n.pop()(t);bZ(r,t)}return r.copy_}function zye(t,e,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&aD(e,r)}function yZ(t){t.finalized_=!0,t.scope_.unfinalizedDrafts_--}var i5=(t,e)=>t.scope_===e,Vye=[];function xZ(t,e,r,n){const i=Dp(t),a=t.type_;if(n!==void 0&&JB(i,n,a)===e){ZT(i,n,r,a);return}if(!t.draftLocations_){const c=t.draftLocations_=new Map;JN(i,(u,l)=>{if(ig(l)){const d=c.get(l)||[];d.push(u),c.set(l,d)}})}const o=t.draftLocations_.get(e)??Vye;for(const c of o)ZT(i,c,r,a)}function Kye(t,e,r){t.callbacks_.push(function(i){const a=e;if(!a||!i5(a,i))return;i.mapSetPlugin_?.fixSetContents(a);const o=sD(a);xZ(t,a.draft_??a,o,r),bZ(a,i)})}function bZ(t,e){if(t.modified_&&!t.finalized_&&(t.type_===3||t.type_===1&&t.allIndicesReassigned_||(t.assigned_?.size??0)>0)){const{patchPlugin_:n}=e;if(n){const i=n.getPath(t);i&&n.generatePatches_(t,i,e)}yZ(t)}}function Gye(t,e,r){const{scope_:n}=t;if(ig(r)){const i=r[wh];i5(i,n)&&i.callbacks_.push(function(){aj(t);const o=sD(i);xZ(t,r,o,e)})}else Qm(r)&&t.callbacks_.push(function(){const a=Dp(t);t.type_===3?a.has(r)&&eC(r,n.handledSet_,n):JB(a,e,t.type_)===r&&n.drafts_.length>1&&(t.assigned_.get(e)??!1)===!0&&t.copy_&&eC(JB(t.copy_,e,t.type_),n.handledSet_,n)})}function eC(t,e,r){return!r.immer_.autoFreeze_&&r.unfinalizedDrafts_<1||ig(t)||e.has(t)||!Qm(t)||n5(t)||(e.add(t),JN(t,(n,i)=>{if(ig(i)){const a=i[wh];if(i5(a,r)){const o=sD(a);ZT(t,n,o,t.type_),yZ(a)}}else Qm(i)&&eC(i,e,r)})),t}function Wye(t,e){const r=e5(t),n={type_:r?1:0,scope_:e?e.scope_:vZ(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let i=n,a=tC;r&&(i=[n],a=F2);const{revoke:o,proxy:c}=Proxy.revocable(i,a);return n.draft_=c,n.revoke_=o,[c,n]}var tC={get(t,e){if(e===wh)return t;let r=t.scope_.arrayMethodsPlugin_;const n=t.type_===1&&typeof e=="string";if(n&&r?.isArrayOperationMethod(e))return r.createMethodInterceptor(t,e);const i=Dp(t);if(!c9(i,e,t.type_))return Yye(t,i,e);const a=i[e];if(t.finalized_||!Qm(a)||n&&t.operationMethod&&r?.isMutatingArrayMethod(t.operationMethod)&&Uye(e))return a;if(a===pL(t.base_,e)){aj(t);const o=t.type_===1?+e:e,c=sP(t.scope_,a,t,o);return t.copy_[o]=c}return a},has(t,e){return e in Dp(t)},ownKeys(t){return Reflect.ownKeys(Dp(t))},set(t,e,r){const n=wZ(Dp(t),e);if(n?.set)return n.set.call(t.draft_,r),!0;if(!t.modified_){const i=pL(Dp(t),e),a=i?.[wh];if(a&&a.base_===r)return t.copy_[e]=r,t.assigned_.set(e,!1),!0;if(Fye(r,i)&&(r!==void 0||c9(t.base_,e,t.type_)))return!0;aj(t),iP(t)}return t.copy_[e]===r&&(r!==void 0||e in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=r,t.assigned_.set(e,!0),Gye(t,e,r)),!0},deleteProperty(t,e){return aj(t),pL(t.base_,e)!==void 0||e in t.base_?(t.assigned_.set(e,!1),iP(t)):t.assigned_.delete(e),t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const r=Dp(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{[sj]:!0,[ZB]:t.type_!==1||e!=="length",[XT]:n[XT],[D2]:r[e]}},defineProperty(){Dm(11)},getPrototypeOf(t){return Vb(t.base_)},setPrototypeOf(){Dm(12)}},F2={};for(let t in tC){let e=tC[t];F2[t]=function(){const r=arguments;return r[0]=r[0][0],e.apply(this,r)}}F2.deleteProperty=function(t,e){return F2.set.call(this,t,e,void 0)};F2.set=function(t,e,r){return tC.set.call(this,t[0],e,r,t[0])};function pL(t,e){const r=t[wh];return(r?Dp(r):t)[e]}function Yye(t,e,r){const n=wZ(e,r);return n?D2 in n?n[D2]:n.get?.call(t.draft_):void 0}function wZ(t,e){if(!(e in t))return;let r=Vb(t);for(;r;){const n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=Vb(r)}}function iP(t){t.modified_||(t.modified_=!0,t.parent_&&iP(t.parent_))}function aj(t){t.copy_||(t.assigned_=new Map,t.copy_=eP(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var qye=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(r,n,i)=>{if(jx(r)&&!jx(n)){const o=n;n=r;const c=this;return function(l=o,...d){return c.produce(l,f=>n.call(this,f,...d))}}jx(n)||Dm(6),i!==void 0&&!jx(i)&&Dm(7);let a;if(Qm(r)){const o=f9(this),c=sP(o,r,void 0);let u=!0;try{a=n(c),u=!1}finally{u?rP(o):nP(o)}return h9(o,i),m9(a,o)}else if(!r||!iD(r)){if(a=n(r),a===void 0&&(a=r),a===AZ&&(a=void 0),this.autoFreeze_&&aD(a,!0),i){const o=[],c=[];by(tP).generateReplacementPatches_(r,a,{patches_:o,inversePatches_:c}),i(o,c)}return a}else Dm(1,r)},this.produceWithPatches=(r,n)=>{if(jx(r))return(c,...u)=>this.produceWithPatches(c,l=>r(l,...u));let i,a;return[this.produce(r,n,(c,u)=>{i=c,a=u}),i,a]},AL(e?.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),AL(e?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),AL(e?.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Qm(e)||Dm(8),ig(e)&&(e=$m(e));const r=f9(this),n=sP(r,e,void 0);return n[wh].isManual_=!0,nP(r),n}finishDraft(e,r){const n=e&&e[wh];(!n||!n.isManual_)&&Dm(9);const{scope_:i}=n;return h9(i,r),m9(void 0,i)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,r){let n;for(n=r.length-1;n>=0;n--){const a=r[n];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}n>-1&&(r=r.slice(n+1));const i=by(tP).applyPatches_;return ig(e)?i(e,r):this.produce(e,a=>i(a,r))}};function sP(t,e,r,n){const[i,a]=t5(e)?by(JT).proxyMap_(e,r):r5(e)?by(JT).proxySet_(e,r):Wye(e,r);return(r?.scope_??vZ()).drafts_.push(i),a.callbacks_=r?.callbacks_??[],a.key_=n,r&&n!==void 0?Kye(r,a,n):a.callbacks_.push(function(u){u.mapSetPlugin_?.fixSetContents(a);const{patchPlugin_:l}=u;a.modified_&&l&&l.generatePatches_(a,[],u)}),i}function $m(t){return ig(t)||Dm(10,t),_Z(t)}function _Z(t){if(!Qm(t)||n5(t))return t;const e=t[wh];let r,n=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,r=eP(t,e.scope_.immer_.useStrictShallowCopy_),n=e.scope_.immer_.shouldUseStrictIteration()}else r=eP(t,!0);return JN(r,(i,a)=>{ZT(r,i,_Z(a))},n),e&&(e.finalized_=!1),r}var Xye=new qye,EZ=Xye.produce;function SZ(t){return({dispatch:r,getState:n})=>i=>a=>typeof a=="function"?a(r,n,t):i(a)}var Zye=SZ(),Jye=SZ,exe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?YT:YT.apply(null,arguments)};function im(t,e){function r(...n){if(e){let i=e(...n);if(!i)throw new Error(_f(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:n[0]}}return r.toString=()=>`${t}`,r.type=t,r.match=n=>mZ(n)&&n.type===t,r}var jZ=class Tw extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Tw.prototype)}static get[Symbol.species](){return Tw}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new Tw(...e[0].concat(this)):new Tw(...e.concat(this))}};function p9(t){return Qm(t)?EZ(t,()=>{}):t}function XE(t,e,r){return t.has(e)?t.get(e):t.set(e,r(e)).get(e)}function txe(t){return typeof t=="boolean"}var rxe=()=>function(e){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:i=!0,actionCreatorCheck:a=!0}=e??{};let o=new jZ;return r&&(txe(r)?o.push(Zye):o.push(Jye(r.extraArgument))),o},TZ="RTK_autoBatch",Xl=()=>t=>({payload:t,meta:{[TZ]:!0}}),g9=t=>e=>{setTimeout(e,t)},CZ=(t={type:"raf"})=>e=>(...r)=>{const n=e(...r);let i=!0,a=!1,o=!1;const c=new Set,u=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:g9(10):t.type==="callback"?t.queueNotification:g9(t.timeout),l=()=>{o=!1,a&&(a=!1,c.forEach(d=>d()))};return Object.assign({},n,{subscribe(d){const f=()=>i&&d(),m=n.subscribe(f);return c.add(d),()=>{m(),c.delete(d)}},dispatch(d){try{return i=!d?.meta?.[TZ],a=!i,a&&(o||(o=!0,u(l))),n.dispatch(d)}finally{i=!0}}})},nxe=t=>function(r){const{autoBatch:n=!0}=r??{};let i=new jZ(t);return n&&i.push(CZ(typeof n=="object"?n:void 0)),i};function ixe(t){const e=rxe(),{reducer:r=void 0,middleware:n,devTools:i=!0,preloadedState:a=void 0,enhancers:o=void 0}=t||{};let c;if(typeof r=="function")c=r;else if(nD(r))c=fZ(r);else throw new Error(_f(1));let u;typeof n=="function"?u=n(e):u=e();let l=YT;i&&(l=exe({trace:!1,...typeof i=="object"&&i}));const d=Dye(...u),f=nxe(d);let m=typeof o=="function"?o(f):f();const p=l(...m);return hZ(c,a,p)}function NZ(t){const e={},r=[];let n;const i={addCase(a,o){const c=typeof a=="string"?a:a.type;if(!c)throw new Error(_f(28));if(c in e)throw new Error(_f(29));return e[c]=o,i},addAsyncThunk(a,o){return o.pending&&(e[a.pending.type]=o.pending),o.rejected&&(e[a.rejected.type]=o.rejected),o.fulfilled&&(e[a.fulfilled.type]=o.fulfilled),o.settled&&r.push({matcher:a.settled,reducer:o.settled}),i},addMatcher(a,o){return r.push({matcher:a,reducer:o}),i},addDefaultCase(a){return n=a,i}};return t(i),[e,r,n]}function sxe(t){return typeof t=="function"}function axe(t,e){let[r,n,i]=NZ(e),a;if(sxe(t))a=()=>p9(t());else{const c=p9(t);a=()=>c}function o(c=a(),u){let l=[r[u.type],...n.filter(({matcher:d})=>d(u)).map(({reducer:d})=>d)];return l.filter(d=>!!d).length===0&&(l=[i]),l.reduce((d,f)=>{if(f)if(ig(d)){const p=f(d,u);return p===void 0?d:p}else{if(Qm(d))return EZ(d,m=>f(m,u));{const m=f(d,u);if(m===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return m}}return d},c)}return o.getInitialState=a,o}var oxe="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",lxe=(t=21)=>{let e="",r=t;for(;r--;)e+=oxe[Math.random()*64|0];return e},cxe=Symbol.for("rtk-slice-createasyncthunk");function uxe(t,e){return`${t}/${e}`}function dxe({creators:t}={}){const e=t?.asyncThunk?.[cxe];return function(n){const{name:i,reducerPath:a=i}=n;if(!i)throw new Error(_f(11));const o=(typeof n.reducers=="function"?n.reducers(fxe()):n.reducers)||{},c=Object.keys(o),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},l={addCase(E,N){const C=typeof E=="string"?E:E.type;if(!C)throw new Error(_f(12));if(C in u.sliceCaseReducersByType)throw new Error(_f(13));return u.sliceCaseReducersByType[C]=N,l},addMatcher(E,N){return u.sliceMatchers.push({matcher:E,reducer:N}),l},exposeAction(E,N){return u.actionCreators[E]=N,l},exposeCaseReducer(E,N){return u.sliceCaseReducersByName[E]=N,l}};c.forEach(E=>{const N=o[E],C={reducerName:E,type:uxe(i,E),createNotation:typeof n.reducers=="function"};Axe(N)?gxe(C,N,l,e):mxe(C,N,l)});function d(){const[E={},N=[],C=void 0]=typeof n.extraReducers=="function"?NZ(n.extraReducers):[n.extraReducers],I={...E,...u.sliceCaseReducersByType};return axe(n.initialState,D=>{for(let U in I)D.addCase(U,I[U]);for(let U of u.sliceMatchers)D.addMatcher(U.matcher,U.reducer);for(let U of N)D.addMatcher(U.matcher,U.reducer);C&&D.addDefaultCase(C)})}const f=E=>E,m=new Map,p=new WeakMap;let g;function y(E,N){return g||(g=d()),g(E,N)}function x(){return g||(g=d()),g.getInitialState()}function w(E,N=!1){function C(D){let U=D[E];return typeof U>"u"&&N&&(U=XE(p,C,x)),U}function I(D=f){const U=XE(m,N,()=>new WeakMap);return XE(U,D,()=>{const G={};for(const[q,J]of Object.entries(n.selectors??{}))G[q]=hxe(J,D,()=>XE(p,D,x),N);return G})}return{reducerPath:E,getSelectors:I,get selectors(){return I(C)},selectSlice:C}}const _={name:i,reducer:y,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:x,...w(a),injectInto(E,{reducerPath:N,...C}={}){const I=N??a;return E.inject({reducerPath:I,reducer:y},C),{..._,...w(I,!0)}}};return _}}function hxe(t,e,r,n){function i(a,...o){let c=e(a);return typeof c>"u"&&n&&(c=r()),t(c,...o)}return i.unwrapped=t,i}var Wh=dxe();function fxe(){function t(e,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...r}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...r){return e(...r)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:r}},asyncThunk:t}}function mxe({type:t,reducerName:e,createNotation:r},n,i){let a,o;if("reducer"in n){if(r&&!pxe(n))throw new Error(_f(17));a=n.reducer,o=n.prepare}else a=n;i.addCase(t,a).exposeCaseReducer(e,a).exposeAction(e,o?im(t,o):im(t))}function Axe(t){return t._reducerDefinitionType==="asyncThunk"}function pxe(t){return t._reducerDefinitionType==="reducerWithPrepare"}function gxe({type:t,reducerName:e},r,n,i){if(!i)throw new Error(_f(18));const{payloadCreator:a,fulfilled:o,pending:c,rejected:u,settled:l,options:d}=r,f=i(t,a,d);n.exposeAction(e,f),o&&n.addCase(f.fulfilled,o),c&&n.addCase(f.pending,c),u&&n.addCase(f.rejected,u),l&&n.addMatcher(f.settled,l),n.exposeCaseReducer(e,{fulfilled:o||ZE,pending:c||ZE,rejected:u||ZE,settled:l||ZE})}function ZE(){}var vxe="task",kZ="listener",LZ="completed",oD="cancelled",yxe=`task-${oD}`,xxe=`task-${LZ}`,aP=`${kZ}-${oD}`,bxe=`${kZ}-${LZ}`,s5=class{constructor(t){this.code=t,this.message=`${vxe} ${oD} (reason: ${t})`}name="TaskAbortError";message},lD=(t,e)=>{if(typeof t!="function")throw new TypeError(_f(32))},rC=()=>{},IZ=(t,e=rC)=>(t.catch(e),t),BZ=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),ny=t=>{if(t.aborted)throw new s5(t.reason)};function PZ(t,e){let r=rC;return new Promise((n,i)=>{const a=()=>i(new s5(t.reason));if(t.aborted){a();return}r=BZ(t,a),e.finally(()=>r()).then(n,i)}).finally(()=>{r=rC})}var wxe=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(r){return{status:r instanceof s5?"cancelled":"rejected",error:r}}finally{e?.()}},nC=t=>e=>IZ(PZ(t,e).then(r=>(ny(t),r))),OZ=t=>{const e=nC(t);return r=>e(new Promise(n=>setTimeout(n,r)))},{assign:xb}=Object,v9={},a5="listenerMiddleware",_xe=(t,e)=>{const r=n=>BZ(t,()=>n.abort(t.reason));return(n,i)=>{lD(n);const a=new AbortController;r(a);const o=wxe(async()=>{ny(t),ny(a.signal);const c=await n({pause:nC(a.signal),delay:OZ(a.signal),signal:a.signal});return ny(a.signal),c},()=>a.abort(xxe));return i?.autoJoin&&e.push(o.catch(rC)),{result:nC(t)(o),cancel(){a.abort(yxe)}}}},Exe=(t,e)=>{const r=async(n,i)=>{ny(e);let a=()=>{};const c=[new Promise((u,l)=>{let d=t({predicate:n,effect:(f,m)=>{m.unsubscribe(),u([f,m.getState(),m.getOriginalState()])}});a=()=>{d(),l()}})];i!=null&&c.push(new Promise(u=>setTimeout(u,i,null)));try{const u=await PZ(e,Promise.race(c));return ny(e),u}finally{a()}};return(n,i)=>IZ(r(n,i))},RZ=t=>{let{type:e,actionCreator:r,matcher:n,predicate:i,effect:a}=t;if(e)i=im(e).match;else if(r)e=r.type,i=r.match;else if(n)i=n;else if(!i)throw new Error(_f(21));return lD(a),{predicate:i,type:e,effect:a}},DZ=xb(t=>{const{type:e,predicate:r,effect:n}=RZ(t);return{id:lxe(),effect:n,type:e,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(_f(22))}}},{withTypes:()=>DZ}),y9=(t,e)=>{const{type:r,effect:n,predicate:i}=RZ(e);return Array.from(t.values()).find(a=>(typeof r=="string"?a.type===r:a.predicate===i)&&a.effect===n)},oP=t=>{t.pending.forEach(e=>{e.abort(aP)})},Sxe=(t,e)=>()=>{for(const r of e.keys())oP(r);t.clear()},x9=(t,e,r)=>{try{t(e,r)}catch(n){setTimeout(()=>{throw n},0)}},MZ=xb(im(`${a5}/add`),{withTypes:()=>MZ}),jxe=im(`${a5}/removeAll`),FZ=xb(im(`${a5}/remove`),{withTypes:()=>FZ}),Txe=(...t)=>{console.error(`${a5}/error`,...t)},$_=(t={})=>{const e=new Map,r=new Map,n=p=>{const g=r.get(p)??0;r.set(p,g+1)},i=p=>{const g=r.get(p)??1;g===1?r.delete(p):r.set(p,g-1)},{extra:a,onError:o=Txe}=t;lD(o);const c=p=>(p.unsubscribe=()=>e.delete(p.id),e.set(p.id,p),g=>{p.unsubscribe(),g?.cancelActive&&oP(p)}),u=p=>{const g=y9(e,p)??DZ(p);return c(g)};xb(u,{withTypes:()=>u});const l=p=>{const g=y9(e,p);return g&&(g.unsubscribe(),p.cancelActive&&oP(g)),!!g};xb(l,{withTypes:()=>l});const d=async(p,g,y,x)=>{const w=new AbortController,_=Exe(u,w.signal),E=[];try{p.pending.add(w),n(p),await Promise.resolve(p.effect(g,xb({},y,{getOriginalState:x,condition:(N,C)=>_(N,C).then(Boolean),take:_,delay:OZ(w.signal),pause:nC(w.signal),extra:a,signal:w.signal,fork:_xe(w.signal,E),unsubscribe:p.unsubscribe,subscribe:()=>{e.set(p.id,p)},cancelActiveListeners:()=>{p.pending.forEach((N,C,I)=>{N!==w&&(N.abort(aP),I.delete(N))})},cancel:()=>{w.abort(aP),p.pending.delete(w)},throwIfCancelled:()=>{ny(w.signal)}})))}catch(N){N instanceof s5||x9(o,N,{raisedBy:"effect"})}finally{await Promise.all(E),w.abort(bxe),i(p),p.pending.delete(w)}},f=Sxe(e,r);return{middleware:p=>g=>y=>{if(!mZ(y))return g(y);if(MZ.match(y))return u(y.payload);if(jxe.match(y)){f();return}if(FZ.match(y))return l(y.payload);let x=p.getState();const w=()=>{if(x===v9)throw new Error(_f(23));return x};let _;try{if(_=g(y),e.size>0){const E=p.getState(),N=Array.from(e.values());for(const C of N){let I=!1;try{I=C.predicate(y,E,x)}catch(D){I=!1,x9(o,D,{raisedBy:"predicate"})}I&&d(C,y,p,w)}}}finally{x=v9}return _},startListening:u,stopListening:l,clearListeners:f}};function _f(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var Cxe={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},UZ=Wh({name:"chartLayout",initialState:Cxe,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var r,n,i,a;t.margin.top=(r=e.payload.top)!==null&&r!==void 0?r:0,t.margin.right=(n=e.payload.right)!==null&&n!==void 0?n:0,t.margin.bottom=(i=e.payload.bottom)!==null&&i!==void 0?i:0,t.margin.left=(a=e.payload.left)!==null&&a!==void 0?a:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:Nxe,setLayout:kxe,setChartSize:Lxe,setScale:Ixe}=UZ.actions,Bxe=UZ.reducer;function $Z(t,e,r){return Array.isArray(t)&&t&&e+r!==0?t.slice(e,r+1):t}function Qa(t){return Number.isFinite(t)}function XA(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function b9(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function ab(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?b9(Object(r),!0).forEach(function(n){Pxe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):b9(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Pxe(t,e,r){return(e=Oxe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Oxe(t){var e=Rxe(t,"string");return typeof e=="symbol"?e:e+""}function Rxe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function dl(t,e,r){return ru(t)||ru(e)?r:qA(e)?yy(t,e,r):typeof e=="function"?e(t):r}var Dxe=(t,e,r)=>{if(e&&r){var{width:n,height:i}=r,{align:a,verticalAlign:o,layout:c}=e;if((c==="vertical"||c==="horizontal"&&o==="middle")&&a!=="center"&&Ei(t[a]))return ab(ab({},t),{},{[a]:t[a]+(n||0)});if((c==="horizontal"||c==="vertical"&&a==="center")&&o!=="middle"&&Ei(t[o]))return ab(ab({},t),{},{[o]:t[o]+(i||0)})}return t},mg=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",HZ=(t,e,r,n)=>{if(n)return t.map(c=>c.coordinate);var i,a,o=t.map(c=>(c.coordinate===e&&(i=!0),c.coordinate===r&&(a=!0),c.coordinate));return i||o.push(e),a||o.push(r),o},QZ=(t,e,r)=>{if(!t)return null;var{duplicateDomain:n,type:i,range:a,scale:o,realScaleType:c,isCategorical:u,categoricalDomain:l,tickCount:d,ticks:f,niceTicks:m,axisType:p}=t;if(!o)return null;var g=c==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,y=i==="category"&&o.bandwidth?o.bandwidth()/g:0;if(y=p==="angleAxis"&&a&&a.length>=2?pd(a[0]-a[1])*2*y:y,f||m){var x=(f||m||[]).map((w,_)=>{var E=n?n.indexOf(w):w,N=o.map(E);return Qa(N)?{coordinate:N+y,value:w,offset:y,index:_}:null}).filter(Uh);return x}return u&&l?l.map((w,_)=>{var E=o.map(w);return Qa(E)?{coordinate:E+y,value:w,index:_,offset:y}:null}).filter(Uh):o.ticks&&d!=null?o.ticks(d).map((w,_)=>{var E=o.map(w);return Qa(E)?{coordinate:E+y,value:w,index:_,offset:y}:null}).filter(Uh):o.domain().map((w,_)=>{var E=o.map(w);return Qa(E)?{coordinate:E+y,value:n?n[w]:w,index:_,offset:y}:null}).filter(Uh)},Mxe=(t,e)=>{if(!e||e.length!==2||!Ei(e[0])||!Ei(e[1]))return t;var r=Math.min(e[0],e[1]),n=Math.max(e[0],e[1]),i=[t[0],t[1]];return(!Ei(t[0])||t[0]<r)&&(i[0]=r),(!Ei(t[1])||t[1]>n)&&(i[1]=n),i[0]>n&&(i[0]=n),i[1]<r&&(i[1]=r),i},Fxe=t=>{var e,r=t.length;if(!(r<=0)){var n=(e=t[0])===null||e===void 0?void 0:e.length;if(!(n==null||n<=0))for(var i=0;i<n;++i)for(var a=0,o=0,c=0;c<r;++c){var u=t[c],l=u?.[i];if(l!=null){var d=l[1],f=l[0],m=YA(d)?f:d;m>=0?(l[0]=a,a+=m,l[1]=a):(l[0]=o,o+=m,l[1]=o)}}}},Uxe=t=>{var e,r=t.length;if(!(r<=0)){var n=(e=t[0])===null||e===void 0?void 0:e.length;if(!(n==null||n<=0))for(var i=0;i<n;++i)for(var a=0,o=0;o<r;++o){var c=t[o],u=c?.[i];if(u!=null){var l=YA(u[1])?u[0]:u[1];l>=0?(u[0]=a,a+=l,u[1]=a):(u[0]=0,u[1]=0)}}}},$xe={sign:Fxe,expand:ave,none:vy,silhouette:ove,wiggle:lve,positive:Uxe},Hxe=(t,e,r)=>{var n,i=(n=$xe[r])!==null&&n!==void 0?n:vy,a=sve().keys(e).value((c,u)=>Number(dl(c,u,0))).order(qB).offset(i),o=a(t);return o.forEach((c,u)=>{c.forEach((l,d)=>{var f=dl(t[d],e[u],0);Array.isArray(f)&&f.length===2&&Ei(f[0])&&Ei(f[1])&&(l[0]=f[0],l[1]=f[1])})}),o};function Qxe(t){return t==null?void 0:String(t)}var w9=t=>{var{axis:e,ticks:r,offset:n,bandSize:i,entry:a,index:o}=t;if(e.type==="category")return r[o]?r[o].coordinate+n:null;var c=dl(a,e.dataKey,e.scale.domain()[o]);if(ru(c))return null;var u=e.scale.map(c);return Ei(u)?u-i/2+n:null},zxe=t=>{var{numericAxis:e}=t,r=e.scale.domain();if(e.type==="number"){var n=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]);return n<=0&&i>=0?0:i<0?i:n}return r[0]},Vxe=t=>{var e=t.flat(2).filter(Ei);return[Math.min(...e),Math.max(...e)]},Kxe=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],Gxe=(t,e,r)=>{if(t!=null)return Kxe(Object.keys(t).reduce((n,i)=>{var a=t[i];if(!a)return n;var{stackedData:o}=a,c=o.reduce((u,l)=>{var d=$Z(l,e,r),f=Vxe(d);return!Qa(f[0])||!Qa(f[1])?u:[Math.min(u[0],f[0]),Math.max(u[1],f[1])]},[1/0,-1/0]);return[Math.min(c[0],n[0]),Math.max(c[1],n[1])]},[1/0,-1/0]))},_9=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,E9=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Kb=(t,e,r)=>{if(t&&t.scale&&t.scale.bandwidth){var n=t.scale.bandwidth();if(!r||n>0)return n}if(t&&e&&e.length>=2){for(var i=XN(e,d=>d.coordinate),a=1/0,o=1,c=i.length;o<c;o++){var u=i[o],l=i[o-1];a=Math.min((u?.coordinate||0)-(l?.coordinate||0),a)}return a===1/0?0:a}return r?void 0:0};function S9(t){var{tooltipEntrySettings:e,dataKey:r,payload:n,value:i,name:a}=t;return ab(ab({},e),{},{dataKey:r,payload:n,value:i,name:a})}function v1(t,e){if(t)return String(t);if(typeof e=="string")return e}var Wxe=(t,e)=>{if(e==="horizontal")return t.chartX;if(e==="vertical")return t.chartY},Yxe=(t,e)=>e==="centric"?t.angle:t.radius,Ag=t=>t.layout.width,pg=t=>t.layout.height,qxe=t=>t.layout.scale,zZ=t=>t.layout.margin,o5=dr(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),l5=dr(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),VZ="data-recharts-item-index",KZ="data-recharts-item-id",H_=60;function j9(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function JE(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?j9(Object(r),!0).forEach(function(n){Xxe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):j9(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Xxe(t,e,r){return(e=Zxe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Zxe(t){var e=Jxe(t,"string");return typeof e=="symbol"?e:e+""}function Jxe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ebe=t=>t.brush.height;function tbe(t){var e=l5(t);return e.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var i=typeof n.width=="number"?n.width:H_;return r+i}return r},0)}function rbe(t){var e=l5(t);return e.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var i=typeof n.width=="number"?n.width:H_;return r+i}return r},0)}function nbe(t){var e=o5(t);return e.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function ibe(t){var e=o5(t);return e.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var Ku=dr([Ag,pg,zZ,ebe,tbe,rbe,nbe,ibe,uZ,kye],(t,e,r,n,i,a,o,c,u,l)=>{var d={left:(r.left||0)+i,right:(r.right||0)+a},f={top:(r.top||0)+o,bottom:(r.bottom||0)+c},m=JE(JE({},f),d),p=m.bottom;m.bottom+=n,m=Dxe(m,u,l);var g=t-m.left-m.right,y=e-m.top-m.bottom;return JE(JE({brushBottom:p},m),{},{width:Math.max(g,0),height:Math.max(y,0)})}),sbe=dr(Ku,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),cD=dr(Ag,pg,(t,e)=>({x:0,y:0,width:t,height:e})),abe=T.createContext(null),sh=()=>T.useContext(abe)!=null,c5=t=>t.brush,u5=dr([c5,Ku,zZ],(t,e,r)=>({height:t.height,x:Ei(t.x)?t.x:e.left,y:Ei(t.y)?t.y:e.top+e.height+e.brushBottom-(r?.bottom||0),width:Ei(t.width)?t.width:e.width})),gL={},vL={},yL={},T9;function obe(){return T9||(T9=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n,{signal:i,edges:a}={}){let o,c=null;const u=a!=null&&a.includes("leading"),l=a==null||a.includes("trailing"),d=()=>{c!==null&&(r.apply(o,c),o=void 0,c=null)},f=()=>{l&&d(),y()};let m=null;const p=()=>{m!=null&&clearTimeout(m),m=setTimeout(()=>{m=null,f()},n)},g=()=>{m!==null&&(clearTimeout(m),m=null)},y=()=>{g(),o=void 0,c=null},x=()=>{d()},w=function(..._){if(i?.aborted)return;o=this,c=_;const E=m==null;p(),u&&E&&d()};return w.schedule=p,w.cancel=y,w.flush=x,i?.addEventListener("abort",y,{once:!0}),w}t.debounce=e})(yL)),yL}var C9;function lbe(){return C9||(C9=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=obe();function r(n,i=0,a={}){typeof a!="object"&&(a={});const{leading:o=!1,trailing:c=!0,maxWait:u}=a,l=Array(2);o&&(l[0]="leading"),c&&(l[1]="trailing");let d,f=null;const m=e.debounce(function(...y){d=n.apply(this,y),f=null},i,{edges:l}),p=function(...y){return u!=null&&(f===null&&(f=Date.now()),Date.now()-f>=u)?(d=n.apply(this,y),f=Date.now(),m.cancel(),m.schedule(),d):(m.apply(this,y),d)},g=()=>(m.flush(),d);return p.cancel=m.cancel,p.flush=g,p}t.debounce=r})(vL)),vL}var N9;function cbe(){return N9||(N9=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=lbe();function r(n,i=0,a={}){const{leading:o=!0,trailing:c=!0}=a;return e.debounce(n,i,{leading:o,maxWait:i,trailing:c})}t.throttle=r})(gL)),gL}var xL,k9;function ube(){return k9||(k9=1,xL=cbe().throttle),xL}var dbe=ube();const hbe=om(dbe);var iC=function(e,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),a=2;a<n;a++)i[a-2]=arguments[a];if(typeof console<"u"&&console.warn&&(r===void 0&&console.warn("LogUtils requires an error message argument"),!e))if(r===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var o=0;console.warn(r.replace(/%s/g,()=>i[o++]))}},RA={width:"100%",height:"100%",debounce:0,minWidth:0,initialDimension:{width:-1,height:-1}},GZ=(t,e,r)=>{var{width:n=RA.width,height:i=RA.height,aspect:a,maxHeight:o}=r,c=xy(n)?t:Number(n),u=xy(i)?e:Number(i);return a&&a>0&&(c?u=c/a:u&&(c=u*a),o&&u!=null&&u>o&&(u=o)),{calculatedWidth:c,calculatedHeight:u}},fbe={width:0,height:0,overflow:"visible"},mbe={width:0,overflowX:"visible"},Abe={height:0,overflowY:"visible"},pbe={},gbe=t=>{var{width:e,height:r}=t,n=xy(e),i=xy(r);return n&&i?fbe:n?mbe:i?Abe:pbe};function vbe(t){var{width:e,height:r,aspect:n}=t,i=e,a=r;return i===void 0&&a===void 0?(i=RA.width,a=RA.height):i===void 0?i=n&&n>0?void 0:RA.width:a===void 0&&(a=n&&n>0?void 0:RA.height),{width:i,height:a}}function lP(){return lP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},lP.apply(null,arguments)}function L9(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function I9(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?L9(Object(r),!0).forEach(function(n){ybe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):L9(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ybe(t,e,r){return(e=xbe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function xbe(t){var e=bbe(t,"string");return typeof e=="symbol"?e:e+""}function bbe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var WZ=T.createContext(RA.initialDimension);function wbe(t){return XA(t.width)&&XA(t.height)}function YZ(t){var{children:e,width:r,height:n}=t,i=T.useMemo(()=>({width:r,height:n}),[r,n]);return wbe(i)?T.createElement(WZ.Provider,{value:i},e):null}var uD=()=>T.useContext(WZ),_be=T.forwardRef((t,e)=>{var{aspect:r,initialDimension:n=RA.initialDimension,width:i,height:a,minWidth:o=RA.minWidth,minHeight:c,maxHeight:u,children:l,debounce:d=RA.debounce,id:f,className:m,onResize:p,style:g={}}=t,y=T.useRef(null),x=T.useRef();x.current=p,T.useImperativeHandle(e,()=>y.current);var[w,_]=T.useState({containerWidth:n.width,containerHeight:n.height}),E=T.useCallback((U,G)=>{_(q=>{var J=Math.round(U),de=Math.round(G);return q.containerWidth===J&&q.containerHeight===de?q:{containerWidth:J,containerHeight:de}})},[]);T.useEffect(()=>{if(y.current==null||typeof ResizeObserver>"u")return X0;var U=de=>{var xe,we=de[0];if(we!=null){var{width:ve,height:ne}=we.contentRect;E(ve,ne),(xe=x.current)===null||xe===void 0||xe.call(x,ve,ne)}};d>0&&(U=hbe(U,d,{trailing:!0,leading:!1}));var G=new ResizeObserver(U),{width:q,height:J}=y.current.getBoundingClientRect();return E(q,J),G.observe(y.current),()=>{G.disconnect()}},[E,d]);var{containerWidth:N,containerHeight:C}=w;iC(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:I,calculatedHeight:D}=GZ(N,C,{width:i,height:a,aspect:r,maxHeight:u});return iC(I!=null&&I>0||D!=null&&D>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,I,D,i,a,o,c,r),T.createElement("div",{id:f?"".concat(f):void 0,className:ja("recharts-responsive-container",m),style:I9(I9({},g),{},{width:i,height:a,minWidth:o,minHeight:c,maxHeight:u}),ref:y},T.createElement("div",{style:gbe({width:i,height:a})},T.createElement(YZ,{width:I,height:D},l)))}),sC=T.forwardRef((t,e)=>{var r=uD();if(XA(r.width)&&XA(r.height))return t.children;var{width:n,height:i}=vbe({width:t.width,height:t.height,aspect:t.aspect}),{calculatedWidth:a,calculatedHeight:o}=GZ(void 0,void 0,{width:n,height:i,aspect:t.aspect,maxHeight:t.maxHeight});return Ei(a)&&Ei(o)?T.createElement(YZ,{width:a,height:o},t.children):T.createElement(_be,lP({},t,{width:n,height:i,ref:e}))});function dD(t){if(t)return{x:t.x,y:t.y,upperWidth:"upperWidth"in t?t.upperWidth:t.width,lowerWidth:"lowerWidth"in t?t.lowerWidth:t.width,width:t.width,height:t.height}}var d5=()=>{var t,e=sh(),r=si(sbe),n=si(u5),i=(t=si(c5))===null||t===void 0?void 0:t.padding;return!e||!n||!i?r:{width:n.width-i.left-i.right,height:n.height-i.top-i.bottom,x:i.left,y:i.top}},Ebe={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},qZ=()=>{var t;return(t=si(Ku))!==null&&t!==void 0?t:Ebe},hD=()=>si(Ag),fD=()=>si(pg),Sbe=()=>si(t=>t.layout.margin),Ya=t=>t.layout.layoutType,y1=()=>si(Ya),XZ=()=>{var t=y1();if(t==="horizontal"||t==="vertical")return t},mD=t=>{var e=t.layout.layoutType;if(e==="centric"||e==="radial")return e},jbe=()=>si(mD),Tbe=()=>{var t=y1();return t!==void 0},Q_=t=>{var e=Al(),r=sh(),{width:n,height:i}=t,a=uD(),o=n,c=i;return a&&(o=a.width>0?a.width:n,c=a.height>0?a.height:i),T.useEffect(()=>{!r&&XA(o)&&XA(c)&&e(Lxe({width:o,height:c}))},[e,r,o,c]),null},ZZ=Symbol.for("immer-nothing"),B9=Symbol.for("immer-draftable"),Cf=Symbol.for("immer-state");function Mm(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var U2=Object.getPrototypeOf;function Gb(t){return!!t&&!!t[Cf]}function wy(t){return t?JZ(t)||Array.isArray(t)||!!t[B9]||!!t.constructor?.[B9]||z_(t)||f5(t):!1}var Cbe=Object.prototype.constructor.toString(),P9=new WeakMap;function JZ(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);if(e===null||e===Object.prototype)return!0;const r=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let n=P9.get(r);return n===void 0&&(n=Function.toString.call(r),P9.set(r,n)),n===Cbe}function aC(t,e,r=!0){h5(t)===0?(r?Reflect.ownKeys(t):Object.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((n,i)=>e(i,n,t))}function h5(t){const e=t[Cf];return e?e.type_:Array.isArray(t)?1:z_(t)?2:f5(t)?3:0}function cP(t,e){return h5(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function eJ(t,e,r){const n=h5(t);n===2?t.set(e,r):n===3?t.add(r):t[e]=r}function Nbe(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function z_(t){return t instanceof Map}function f5(t){return t instanceof Set}function jv(t){return t.copy_||t.base_}function uP(t,e){if(z_(t))return new Map(t);if(f5(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const r=JZ(t);if(e===!0||e==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(t);delete n[Cf];let i=Reflect.ownKeys(n);for(let a=0;a<i.length;a++){const o=i[a],c=n[o];c.writable===!1&&(c.writable=!0,c.configurable=!0),(c.get||c.set)&&(n[o]={configurable:!0,writable:!0,enumerable:c.enumerable,value:t[o]})}return Object.create(U2(t),n)}else{const n=U2(t);if(n!==null&&r)return{...t};const i=Object.create(n);return Object.assign(i,t)}}function AD(t,e=!1){return m5(t)||Gb(t)||!wy(t)||(h5(t)>1&&Object.defineProperties(t,{set:eS,add:eS,clear:eS,delete:eS}),Object.freeze(t),e&&Object.values(t).forEach(r=>AD(r,!0))),t}function kbe(){Mm(2)}var eS={value:kbe};function m5(t){return t===null||typeof t!="object"?!0:Object.isFrozen(t)}var Lbe={};function _y(t){const e=Lbe[t];return e||Mm(0,t),e}var $2;function tJ(){return $2}function Ibe(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function O9(t,e){e&&(_y("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function dP(t){hP(t),t.drafts_.forEach(Bbe),t.drafts_=null}function hP(t){t===$2&&($2=t.parent_)}function R9(t){return $2=Ibe($2,t)}function Bbe(t){const e=t[Cf];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function D9(t,e){e.unfinalizedDrafts_=e.drafts_.length;const r=e.drafts_[0];return t!==void 0&&t!==r?(r[Cf].modified_&&(dP(e),Mm(4)),wy(t)&&(t=oC(e,t),e.parent_||lC(e,t)),e.patches_&&_y("Patches").generateReplacementPatches_(r[Cf].base_,t,e.patches_,e.inversePatches_)):t=oC(e,r,[]),dP(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==ZZ?t:void 0}function oC(t,e,r){if(m5(e))return e;const n=t.immer_.shouldUseStrictIteration(),i=e[Cf];if(!i)return aC(e,(a,o)=>M9(t,i,e,a,o,r),n),e;if(i.scope_!==t)return e;if(!i.modified_)return lC(t,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const a=i.copy_;let o=a,c=!1;i.type_===3&&(o=new Set(a),a.clear(),c=!0),aC(o,(u,l)=>M9(t,i,a,u,l,r,c),n),lC(t,a,!1),r&&t.patches_&&_y("Patches").generatePatches_(i,r,t.patches_,t.inversePatches_)}return i.copy_}function M9(t,e,r,n,i,a,o){if(i==null||typeof i!="object"&&!o)return;const c=m5(i);if(!(c&&!o)){if(Gb(i)){const u=a&&e&&e.type_!==3&&!cP(e.assigned_,n)?a.concat(n):void 0,l=oC(t,i,u);if(eJ(r,n,l),Gb(l))t.canAutoFreeze_=!1;else return}else o&&r.add(i);if(wy(i)&&!c){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||e&&e.base_&&e.base_[n]===i&&c)return;oC(t,i),(!e||!e.scope_.parent_)&&typeof n!="symbol"&&(z_(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&lC(t,i)}}}function lC(t,e,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&AD(e,r)}function Pbe(t,e){const r=Array.isArray(t),n={type_:r?1:0,scope_:e?e.scope_:tJ(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=n,a=pD;r&&(i=[n],a=H2);const{revoke:o,proxy:c}=Proxy.revocable(i,a);return n.draft_=c,n.revoke_=o,c}var pD={get(t,e){if(e===Cf)return t;const r=jv(t);if(!cP(r,e))return Obe(t,r,e);const n=r[e];return t.finalized_||!wy(n)?n:n===bL(t.base_,e)?(wL(t),t.copy_[e]=mP(n,t)):n},has(t,e){return e in jv(t)},ownKeys(t){return Reflect.ownKeys(jv(t))},set(t,e,r){const n=rJ(jv(t),e);if(n?.set)return n.set.call(t.draft_,r),!0;if(!t.modified_){const i=bL(jv(t),e),a=i?.[Cf];if(a&&a.base_===r)return t.copy_[e]=r,t.assigned_[e]=!1,!0;if(Nbe(r,i)&&(r!==void 0||cP(t.base_,e)))return!0;wL(t),fP(t)}return t.copy_[e]===r&&(r!==void 0||e in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=r,t.assigned_[e]=!0),!0},deleteProperty(t,e){return bL(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,wL(t),fP(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const r=jv(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:n.enumerable,value:r[e]}},defineProperty(){Mm(11)},getPrototypeOf(t){return U2(t.base_)},setPrototypeOf(){Mm(12)}},H2={};aC(pD,(t,e)=>{H2[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});H2.deleteProperty=function(t,e){return H2.set.call(this,t,e,void 0)};H2.set=function(t,e,r){return pD.set.call(this,t[0],e,r,t[0])};function bL(t,e){const r=t[Cf];return(r?jv(r):t)[e]}function Obe(t,e,r){const n=rJ(e,r);return n?"value"in n?n.value:n.get?.call(t.draft_):void 0}function rJ(t,e){if(!(e in t))return;let r=U2(t);for(;r;){const n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=U2(r)}}function fP(t){t.modified_||(t.modified_=!0,t.parent_&&fP(t.parent_))}function wL(t){t.copy_||(t.copy_=uP(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var Rbe=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,r,n)=>{if(typeof e=="function"&&typeof r!="function"){const a=r;r=e;const o=this;return function(u=a,...l){return o.produce(u,d=>r.call(this,d,...l))}}typeof r!="function"&&Mm(6),n!==void 0&&typeof n!="function"&&Mm(7);let i;if(wy(e)){const a=R9(this),o=mP(e,void 0);let c=!0;try{i=r(o),c=!1}finally{c?dP(a):hP(a)}return O9(a,n),D9(i,a)}else if(!e||typeof e!="object"){if(i=r(e),i===void 0&&(i=e),i===ZZ&&(i=void 0),this.autoFreeze_&&AD(i,!0),n){const a=[],o=[];_y("Patches").generateReplacementPatches_(e,i,a,o),n(a,o)}return i}else Mm(1,e)},this.produceWithPatches=(e,r)=>{if(typeof e=="function")return(o,...c)=>this.produceWithPatches(o,u=>e(u,...c));let n,i;return[this.produce(e,r,(o,c)=>{n=o,i=c}),n,i]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),typeof t?.useStrictIteration=="boolean"&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){wy(t)||Mm(8),Gb(t)&&(t=Dbe(t));const e=R9(this),r=mP(t,void 0);return r[Cf].isManual_=!0,hP(e),r}finishDraft(t,e){const r=t&&t[Cf];(!r||!r.isManual_)&&Mm(9);const{scope_:n}=r;return O9(n,e),D9(void 0,n)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,e){let r;for(r=e.length-1;r>=0;r--){const i=e[r];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}r>-1&&(e=e.slice(r+1));const n=_y("Patches").applyPatches_;return Gb(t)?n(t,e):this.produce(t,i=>n(i,e))}};function mP(t,e){const r=z_(t)?_y("MapSet").proxyMap_(t,e):f5(t)?_y("MapSet").proxySet_(t,e):Pbe(t,e);return(e?e.scope_:tJ()).drafts_.push(r),r}function Dbe(t){return Gb(t)||Mm(10,t),nJ(t)}function nJ(t){if(!wy(t)||m5(t))return t;const e=t[Cf];let r,n=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,r=uP(t,e.scope_.immer_.useStrictShallowCopy_),n=e.scope_.immer_.shouldUseStrictIteration()}else r=uP(t,!0);return aC(r,(i,a)=>{eJ(r,i,nJ(a))},n),e&&(e.finalized_=!1),r}var Mbe=new Rbe;Mbe.produce;var Fbe={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},iJ=Wh({name:"legend",initialState:Fbe,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload:{reducer(t,e){t.payload.push(e.payload)},prepare:Xl()},replaceLegendPayload:{reducer(t,e){var{prev:r,next:n}=e.payload,i=$m(t).payload.indexOf(r);i>-1&&(t.payload[i]=n)},prepare:Xl()},removeLegendPayload:{reducer(t,e){var r=$m(t).payload.indexOf(e.payload);r>-1&&t.payload.splice(r,1)},prepare:Xl()}}}),{setLegendSize:F9,setLegendSettings:Ube,addLegendPayload:sJ,replaceLegendPayload:aJ,removeLegendPayload:oJ}=iJ.actions,$be=iJ.reducer,Hbe=["contextPayload"];function AP(){return AP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},AP.apply(null,arguments)}function U9(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Wb(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?U9(Object(r),!0).forEach(function(n){Qbe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):U9(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Qbe(t,e,r){return(e=zbe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function zbe(t){var e=Vbe(t,"string");return typeof e=="symbol"?e:e+""}function Vbe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Kbe(t,e){if(t==null)return{};var r,n,i=Gbe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function Gbe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function Wbe(t){return t.value}function Ybe(t){var{contextPayload:e}=t,r=Kbe(t,Hbe),n=aZ(e,t.payloadUniqBy,Wbe),i=Wb(Wb({},r),{},{payload:n});return T.isValidElement(t.content)?T.cloneElement(t.content,i):typeof t.content=="function"?T.createElement(t.content,i):T.createElement(Mve,i)}function qbe(t,e,r,n,i,a){var{layout:o,align:c,verticalAlign:u}=e,l,d;return(!t||(t.left===void 0||t.left===null)&&(t.right===void 0||t.right===null))&&(c==="center"&&o==="vertical"?l={left:((n||0)-a.width)/2}:l=c==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!t||(t.top===void 0||t.top===null)&&(t.bottom===void 0||t.bottom===null))&&(u==="middle"?d={top:((i||0)-a.height)/2}:d=u==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),Wb(Wb({},l),d)}function Xbe(t){var e=Al();return T.useEffect(()=>{e(Ube(t))},[e,t]),null}function Zbe(t){var e=Al();return T.useEffect(()=>(e(F9(t)),()=>{e(F9({width:0,height:0}))}),[e,t]),null}function Jbe(t,e,r,n){return t==="vertical"&&e!=null?{height:e}:t==="horizontal"?{width:r||n}:null}var e1e={align:"center",iconSize:14,inactiveColor:"#ccc",itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function lJ(t){var e=Uc(t,e1e),r=Bye(),n=N0e(),i=Sbe(),{width:a,height:o,wrapperStyle:c,portal:u}=e,[l,d]=dZ([r]),f=hD(),m=fD();if(f==null||m==null)return null;var p=f-(i?.left||0)-(i?.right||0),g=Jbe(e.layout,o,a,p),y=u?c:Wb(Wb({position:"absolute",width:g?.width||a||"auto",height:g?.height||o||"auto"},qbe(c,e,i,f,m,l)),c),x=u??n;if(x==null||r==null)return null;var w=T.createElement("div",{className:"recharts-legend-wrapper",style:y,ref:d},T.createElement(Xbe,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),!u&&T.createElement(Zbe,{width:l.width,height:l.height}),T.createElement(Ybe,AP({},e,g,{margin:i,chartWidth:f,chartHeight:m,contextPayload:r})));return C0.createPortal(w,x)}lJ.displayName="Legend";function pP(){return pP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},pP.apply(null,arguments)}function $9(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function J1(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?$9(Object(r),!0).forEach(function(n){t1e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$9(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function t1e(t,e,r){return(e=r1e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function r1e(t){var e=n1e(t,"string");return typeof e=="symbol"?e:e+""}function n1e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function i1e(t){return Array.isArray(t)&&qA(t[0])&&qA(t[1])?t.join(" ~ "):t}var rx={separator:" : ",contentStyle:{margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},itemStyle:{display:"block",paddingTop:4,paddingBottom:4,color:"#000"},labelStyle:{},accessibilityLayer:!1},s1e=t=>{var{separator:e=rx.separator,contentStyle:r,itemStyle:n,labelStyle:i=rx.labelStyle,payload:a,formatter:o,itemSorter:c,wrapperClassName:u,labelClassName:l,label:d,labelFormatter:f,accessibilityLayer:m=rx.accessibilityLayer}=t,p=()=>{if(a&&a.length){var C={padding:0,margin:0},I=(c?XN(a,c):a).map((D,U)=>{if(D.type==="none")return null;var G=D.formatter||o||i1e,{value:q,name:J}=D,de=q,xe=J;if(G){var we=G(q,J,D,U,a);if(Array.isArray(we))[de,xe]=we;else if(we!=null)de=we;else return null}var ve=J1(J1({},rx.itemStyle),{},{color:D.color||rx.itemStyle.color},n);return T.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(U),style:ve},qA(xe)?T.createElement("span",{className:"recharts-tooltip-item-name"},xe):null,qA(xe)?T.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,T.createElement("span",{className:"recharts-tooltip-item-value"},de),T.createElement("span",{className:"recharts-tooltip-item-unit"},D.unit||""))});return T.createElement("ul",{className:"recharts-tooltip-item-list",style:C},I)}return null},g=J1(J1({},rx.contentStyle),r),y=J1({margin:0},i),x=!ru(d),w=x?d:"",_=ja("recharts-default-tooltip",u),E=ja("recharts-tooltip-label",l);x&&f&&a!==void 0&&a!==null&&(w=f(d,a));var N=m?{role:"status","aria-live":"assertive"}:{};return T.createElement("div",pP({className:_,style:g},N),T.createElement("p",{className:E,style:y},T.isValidElement(w)?w:"".concat(w)),p())},ew="recharts-tooltip-wrapper",a1e={visibility:"hidden"};function o1e(t){var{coordinate:e,translateX:r,translateY:n}=t;return ja(ew,{["".concat(ew,"-right")]:Ei(r)&&e&&Ei(e.x)&&r>=e.x,["".concat(ew,"-left")]:Ei(r)&&e&&Ei(e.x)&&r<e.x,["".concat(ew,"-bottom")]:Ei(n)&&e&&Ei(e.y)&&n>=e.y,["".concat(ew,"-top")]:Ei(n)&&e&&Ei(e.y)&&n<e.y})}function H9(t){var{allowEscapeViewBox:e,coordinate:r,key:n,offset:i,position:a,reverseDirection:o,tooltipDimension:c,viewBox:u,viewBoxDimension:l}=t;if(a&&Ei(a[n]))return a[n];var d=r[n]-c-(i>0?i:0),f=r[n]+i;if(e[n])return o[n]?d:f;var m=u[n];if(m==null)return 0;if(o[n]){var p=d,g=m;return p<g?Math.max(f,m):Math.max(d,m)}if(l==null)return 0;var y=f+c,x=m+l;return y>x?Math.max(d,m):Math.max(f,m)}function l1e(t){var{translateX:e,translateY:r,useTranslate3d:n}=t;return{transform:n?"translate3d(".concat(e,"px, ").concat(r,"px, 0)"):"translate(".concat(e,"px, ").concat(r,"px)")}}function c1e(t){var{allowEscapeViewBox:e,coordinate:r,offsetTop:n,offsetLeft:i,position:a,reverseDirection:o,tooltipBox:c,useTranslate3d:u,viewBox:l}=t,d,f,m;return c.height>0&&c.width>0&&r?(f=H9({allowEscapeViewBox:e,coordinate:r,key:"x",offset:i,position:a,reverseDirection:o,tooltipDimension:c.width,viewBox:l,viewBoxDimension:l.width}),m=H9({allowEscapeViewBox:e,coordinate:r,key:"y",offset:n,position:a,reverseDirection:o,tooltipDimension:c.height,viewBox:l,viewBoxDimension:l.height}),d=l1e({translateX:f,translateY:m,useTranslate3d:u})):d=a1e,{cssProperties:d,cssClasses:o1e({translateX:f,translateY:m,coordinate:r})}}function Q9(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function tS(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Q9(Object(r),!0).forEach(function(n){gP(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Q9(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function gP(t,e,r){return(e=u1e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function u1e(t){var e=d1e(t,"string");return typeof e=="symbol"?e:e+""}function d1e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class h1e extends T.PureComponent{constructor(){super(...arguments),gP(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),gP(this,"handleKeyDown",e=>{if(e.key==="Escape"){var r,n,i,a;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(i=(a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,r;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:r,animationDuration:n,animationEasing:i,children:a,coordinate:o,hasPayload:c,isAnimationActive:u,offset:l,position:d,reverseDirection:f,useTranslate3d:m,viewBox:p,wrapperStyle:g,lastBoundingBox:y,innerRef:x,hasPortalFromProps:w}=this.props,_=typeof l=="number"?l:l.x,E=typeof l=="number"?l:l.y,{cssClasses:N,cssProperties:C}=c1e({allowEscapeViewBox:r,coordinate:o,offsetLeft:_,offsetTop:E,position:d,reverseDirection:f,tooltipBox:{height:y.height,width:y.width},useTranslate3d:m,viewBox:p}),I=w?{}:tS(tS({transition:u&&e?"transform ".concat(n,"ms ").concat(i):void 0},C),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&c?"visible":"hidden",position:"absolute",top:0,left:0}),D=tS(tS({},I),{},{visibility:!this.state.dismissed&&e&&c?"visible":"hidden"},g);return T.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:N,style:D,ref:x},a)}}var cJ=()=>{var t;return(t=si(e=>e.rootProps.accessibilityLayer))!==null&&t!==void 0?t:!0};function vP(){return vP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},vP.apply(null,arguments)}function z9(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function V9(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?z9(Object(r),!0).forEach(function(n){f1e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):z9(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function f1e(t,e,r){return(e=m1e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function m1e(t){var e=A1e(t,"string");return typeof e=="symbol"?e:e+""}function A1e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var K9={curveBasisClosed:W0e,curveBasisOpen:Y0e,curveBasis:G0e,curveBumpX:B0e,curveBumpY:P0e,curveLinearClosed:q0e,curveLinear:YN,curveMonotoneX:X0e,curveMonotoneY:Z0e,curveNatural:J0e,curveStep:eve,curveStepAfter:rve,curveStepBefore:tve},cC=t=>Qa(t.x)&&Qa(t.y),G9=t=>t.base!=null&&cC(t.base)&&cC(t),tw=t=>t.x,rw=t=>t.y,p1e=(t,e)=>{if(typeof t=="function")return t;var r="curve".concat(F_(t));if((r==="curveMonotone"||r==="curveBump")&&e){var n=K9["".concat(r).concat(e==="vertical"?"Y":"X")];if(n)return n}return K9[r]||YN},W9={connectNulls:!1,type:"linear"},g1e=t=>{var{type:e=W9.type,points:r=[],baseLine:n,layout:i,connectNulls:a=W9.connectNulls}=t,o=p1e(e,i),c=a?r.filter(cC):r;if(Array.isArray(n)){var u,l=r.map((g,y)=>V9(V9({},g),{},{base:n[y]}));i==="vertical"?u=GE().y(rw).x1(tw).x0(g=>g.base.x):u=GE().x(tw).y1(rw).y0(g=>g.base.y);var d=u.defined(G9).curve(o),f=a?l.filter(G9):l;return d(f)}var m;i==="vertical"&&Ei(n)?m=GE().y(rw).x1(tw).x0(n):Ei(n)?m=GE().x(tw).y1(rw).y0(n):m=DX().x(tw).y(rw);var p=m.defined(cC).curve(o);return p(c)},gD=t=>{var{className:e,points:r,path:n,pathRef:i}=t,a=y1();if((!r||!r.length)&&!n)return null;var o={type:t.type,points:t.points,baseLine:t.baseLine,layout:t.layout||a,connectNulls:t.connectNulls},c=r&&r.length?g1e(o):n;return T.createElement("path",vP({},xu(t),JR(t),{className:ja("recharts-curve",e),d:c===null?void 0:c,ref:i}))},v1e=["x","y","top","left","width","height","className"];function yP(){return yP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},yP.apply(null,arguments)}function Y9(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function y1e(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Y9(Object(r),!0).forEach(function(n){x1e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Y9(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function x1e(t,e,r){return(e=b1e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function b1e(t){var e=w1e(t,"string");return typeof e=="symbol"?e:e+""}function w1e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _1e(t,e){if(t==null)return{};var r,n,i=E1e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function E1e(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var S1e=(t,e,r,n,i,a)=>"M".concat(t,",").concat(i,"v").concat(n,"M").concat(a,",").concat(e,"h").concat(r),j1e=t=>{var{x:e=0,y:r=0,top:n=0,left:i=0,width:a=0,height:o=0,className:c}=t,u=_1e(t,v1e),l=y1e({x:e,y:r,top:n,left:i,width:a,height:o},u);return!Ei(e)||!Ei(r)||!Ei(a)||!Ei(o)||!Ei(n)||!Ei(i)?null:T.createElement("path",yP({},zu(l),{className:ja("recharts-cross",c),d:S1e(e,r,a,o,n,i)}))};function T1e(t,e,r,n){var i=n/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:r.left+.5,y:t==="horizontal"?r.top+.5:e.y-i,width:t==="horizontal"?n:r.width-1,height:t==="horizontal"?r.height-1:n}}function q9(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function X9(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?q9(Object(r),!0).forEach(function(n){C1e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):q9(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function C1e(t,e,r){return(e=N1e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function N1e(t){var e=k1e(t,"string");return typeof e=="symbol"?e:e+""}function k1e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var L1e=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),uJ=(t,e,r)=>t.map(n=>"".concat(L1e(n)," ").concat(e,"ms ").concat(r)).join(","),I1e=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((r,n)=>r.filter(i=>n.includes(i))),Q2=(t,e)=>Object.keys(e).reduce((r,n)=>X9(X9({},r),{},{[n]:t(n,e[n])}),{});function Z9(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Fu(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Z9(Object(r),!0).forEach(function(n){B1e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Z9(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function B1e(t,e,r){return(e=P1e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function P1e(t){var e=O1e(t,"string");return typeof e=="symbol"?e:e+""}function O1e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var uC=(t,e,r)=>t+(e-t)*r,xP=t=>{var{from:e,to:r}=t;return e!==r},dJ=(t,e,r)=>{var n=Q2((i,a)=>{if(xP(a)){var[o,c]=t(a.from,a.to,a.velocity);return Fu(Fu({},a),{},{from:o,velocity:c})}return a},e);return r<1?Q2((i,a)=>xP(a)&&n[i]!=null?Fu(Fu({},a),{},{velocity:uC(a.velocity,n[i].velocity,r),from:uC(a.from,n[i].from,r)}):a,e):dJ(t,n,r-1)};function R1e(t,e,r,n,i,a){var o,c=n.reduce((m,p)=>Fu(Fu({},m),{},{[p]:{from:t[p],velocity:0,to:e[p]}}),{}),u=()=>Q2((m,p)=>p.from,c),l=()=>!Object.values(c).filter(xP).length,d=null,f=m=>{o||(o=m);var p=m-o,g=p/r.dt;c=dJ(r,c,g),i(Fu(Fu(Fu({},t),e),u())),o=m,l()||(d=a.setTimeout(f))};return()=>(d=a.setTimeout(f),()=>{var m;(m=d)===null||m===void 0||m()})}function D1e(t,e,r,n,i,a,o){var c=null,u=i.reduce((f,m)=>{var p=t[m],g=e[m];return p==null||g==null?f:Fu(Fu({},f),{},{[m]:[p,g]})},{}),l,d=f=>{l||(l=f);var m=(f-l)/n,p=Q2((y,x)=>uC(...x,r(m)),u);if(a(Fu(Fu(Fu({},t),e),p)),m<1)c=o.setTimeout(d);else{var g=Q2((y,x)=>uC(...x,r(1)),u);a(Fu(Fu(Fu({},t),e),g))}};return()=>(c=o.setTimeout(d),()=>{var f;(f=c)===null||f===void 0||f()})}const M1e=(t,e,r,n,i,a)=>{var o=I1e(t,e);return r==null?()=>(i(Fu(Fu({},t),e)),()=>{}):r.isStepper===!0?R1e(t,e,r,o,i,a):D1e(t,e,r,n,o,i,a)};var dC=1e-4,hJ=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],fJ=(t,e)=>t.map((r,n)=>r*e**n).reduce((r,n)=>r+n),J9=(t,e)=>r=>{var n=hJ(t,e);return fJ(n,r)},F1e=(t,e)=>r=>{var n=hJ(t,e),i=[...n.map((a,o)=>a*o).slice(1),0];return fJ(i,r)},U1e=t=>{var e,r=t.split("(");if(r.length!==2||r[0]!=="cubic-bezier")return null;var n=(e=r[1])===null||e===void 0||(e=e.split(")")[0])===null||e===void 0?void 0:e.split(",");if(n==null||n.length!==4)return null;var i=n.map(a=>parseFloat(a));return[i[0],i[1],i[2],i[3]]},$1e=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(r.length===1)switch(r[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var i=U1e(r[0]);if(i)return i}}return r.length===4?r:[0,0,1,1]},H1e=(t,e,r,n)=>{var i=J9(t,r),a=J9(e,n),o=F1e(t,r),c=l=>l>1?1:l<0?0:l,u=l=>{for(var d=l>1?1:l,f=d,m=0;m<8;++m){var p=i(f)-d,g=o(f);if(Math.abs(p-d)<dC||g<dC)return a(f);f=c(f-p/g)}return a(f)};return u.isStepper=!1,u},eH=function(){return H1e(...$1e(...arguments))},Q1e=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:i=17}=e,a=(o,c,u)=>{var l=-(o-c)*r,d=u*n,f=u+(l-d)*i/1e3,m=u*i/1e3+o;return Math.abs(m-c)<dC&&Math.abs(f)<dC?[c,0]:[m,f]};return a.isStepper=!0,a.dt=i,a},z1e=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return eH(t);case"spring":return Q1e();default:if(t.split("(")[0]==="cubic-bezier")return eH(t)}return typeof t=="function"?t:null};function V1e(t){var e,r=()=>null,n=!1,i=null,a=o=>{if(!n){if(Array.isArray(o)){if(!o.length)return;var c=o,[u,...l]=c;if(typeof u=="number"){i=t.setTimeout(a.bind(null,l),u);return}a(u),i=t.setTimeout(a.bind(null,l));return}typeof o=="string"&&(e=o,r(e)),typeof o=="object"&&(e=o,r(e)),typeof o=="function"&&o()}};return{stop:()=>{n=!0},start:o=>{n=!1,i&&(i(),i=null),a(o)},subscribe:o=>(r=o,()=>{r=()=>null}),getTimeoutController:()=>t}}class K1e{setTimeout(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),i=null,a=o=>{o-n>=r?e(o):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(a))};return i=requestAnimationFrame(a),()=>{i!=null&&cancelAnimationFrame(i)}}}function G1e(){return V1e(new K1e)}var W1e=T.createContext(G1e);function Y1e(t,e){var r=T.useContext(W1e);return T.useMemo(()=>e??r(t),[t,e,r])}var q1e=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),A5={isSsr:q1e()},X1e={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},tH={t:0},_L={t:1};function V_(t){var e=Uc(t,X1e),{isActive:r,canBegin:n,duration:i,easing:a,begin:o,onAnimationEnd:c,onAnimationStart:u,children:l}=e,d=r==="auto"?!A5.isSsr:r,f=Y1e(e.animationId,e.animationManager),[m,p]=T.useState(d?tH:_L),g=T.useRef(null);return T.useEffect(()=>{d||p(_L)},[d]),T.useEffect(()=>{if(!d||!n)return X0;var y=M1e(tH,_L,z1e(a),i,p,f.getTimeoutController()),x=()=>{g.current=y()};return f.start([u,o,x,i,c]),()=>{f.stop(),g.current&&g.current(),c()}},[d,n,i,a,o,u,c,f]),l(m.t)}function K_(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=T.useRef(R2(e)),n=T.useRef(t);return n.current!==t&&(r.current=R2(e),n.current=t),r.current}var Z1e=["radius"],J1e=["radius"],rH,nH,iH,sH,aH,oH,lH,cH,uH,dH;function hH(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function fH(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?hH(Object(r),!0).forEach(function(n){ewe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):hH(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ewe(t,e,r){return(e=twe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function twe(t){var e=rwe(t,"string");return typeof e=="symbol"?e:e+""}function rwe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function hC(){return hC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},hC.apply(null,arguments)}function mH(t,e){if(t==null)return{};var r,n,i=nwe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function nwe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function uA(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var AH=(t,e,r,n,i)=>{var a=L0(r),o=L0(n),c=Math.min(Math.abs(a)/2,Math.abs(o)/2),u=o>=0?1:-1,l=a>=0?1:-1,d=o>=0&&a>=0||o<0&&a<0?1:0,f;if(c>0&&Array.isArray(i)){for(var m=[0,0,0,0],p=0,g=4;p<g;p++){var y,x=(y=i[p])!==null&&y!==void 0?y:0;m[p]=x>c?c:x}f=uc(rH||(rH=uA(["M",",",""])),t,e+u*m[0]),m[0]>0&&(f+=uc(nH||(nH=uA(["A ",",",",0,0,",",",",",""])),m[0],m[0],d,t+l*m[0],e)),f+=uc(iH||(iH=uA(["L ",",",""])),t+r-l*m[1],e),m[1]>0&&(f+=uc(sH||(sH=uA(["A ",",",",0,0,",`,
        `,",",""])),m[1],m[1],d,t+r,e+u*m[1])),f+=uc(aH||(aH=uA(["L ",",",""])),t+r,e+n-u*m[2]),m[2]>0&&(f+=uc(oH||(oH=uA(["A ",",",",0,0,",`,
        `,",",""])),m[2],m[2],d,t+r-l*m[2],e+n)),f+=uc(lH||(lH=uA(["L ",",",""])),t+l*m[3],e+n),m[3]>0&&(f+=uc(cH||(cH=uA(["A ",",",",0,0,",`,
        `,",",""])),m[3],m[3],d,t,e+n-u*m[3])),f+="Z"}else if(c>0&&i===+i&&i>0){var w=Math.min(c,i);f=uc(uH||(uH=uA(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),t,e+u*w,w,w,d,t+l*w,e,t+r-l*w,e,w,w,d,t+r,e+u*w,t+r,e+n-u*w,w,w,d,t+r-l*w,e+n,t+l*w,e+n,w,w,d,t,e+n-u*w)}else f=uc(dH||(dH=uA(["M ",","," h "," v "," h "," Z"])),t,e,r,n,-r);return f},pH={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},mJ=t=>{var e=Uc(t,pH),r=T.useRef(null),[n,i]=T.useState(-1);T.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var ae=r.current.getTotalLength();ae&&i(ae)}catch{}},[]);var{x:a,y:o,width:c,height:u,radius:l,className:d}=e,{animationEasing:f,animationDuration:m,animationBegin:p,isAnimationActive:g,isUpdateAnimationActive:y}=e,x=T.useRef(c),w=T.useRef(u),_=T.useRef(a),E=T.useRef(o),N=T.useMemo(()=>({x:a,y:o,width:c,height:u,radius:l}),[a,o,c,u,l]),C=K_(N,"rectangle-");if(a!==+a||o!==+o||c!==+c||u!==+u||c===0||u===0)return null;var I=ja("recharts-rectangle",d);if(!y){var D=zu(e),{radius:U}=D,G=mH(D,Z1e);return T.createElement("path",hC({},G,{x:L0(a),y:L0(o),width:L0(c),height:L0(u),radius:typeof l=="number"?l:void 0,className:I,d:AH(a,o,c,u,l)}))}var q=x.current,J=w.current,de=_.current,xe=E.current,we="0px ".concat(n===-1?1:n,"px"),ve="".concat(n,"px 0px"),ne=uJ(["strokeDasharray"],m,typeof f=="string"?f:pH.animationEasing);return T.createElement(V_,{animationId:C,key:C,canBegin:n>0,duration:m,easing:f,isActive:y,begin:p},ae=>{var oe=dc(q,c,ae),Ie=dc(J,u,ae),Ce=dc(de,a,ae),be=dc(xe,o,ae);r.current&&(x.current=oe,w.current=Ie,_.current=Ce,E.current=be);var ue;g?ae>0?ue={transition:ne,strokeDasharray:ve}:ue={strokeDasharray:we}:ue={strokeDasharray:ve};var Pe=zu(e),{radius:Re}=Pe,He=mH(Pe,J1e);return T.createElement("path",hC({},He,{radius:typeof l=="number"?l:void 0,className:I,d:AH(Ce,be,oe,Ie,l),ref:r,style:fH(fH({},ue),e.style)}))})};function gH(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function vH(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?gH(Object(r),!0).forEach(function(n){iwe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):gH(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function iwe(t,e,r){return(e=swe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function swe(t){var e=awe(t,"string");return typeof e=="symbol"?e:e+""}function awe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var fC=Math.PI/180,mC=t=>t*Math.PI/180,owe=t=>t*180/Math.PI,rl=(t,e,r,n)=>({x:t+Math.cos(-fC*n)*r,y:e+Math.sin(-fC*n)*r}),AJ=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},lwe=(t,e)=>{var{x:r,y:n}=t,{x:i,y:a}=e;return Math.sqrt((r-i)**2+(n-a)**2)},cwe=(t,e)=>{var{x:r,y:n}=t,{cx:i,cy:a}=e,o=lwe({x:r,y:n},{x:i,y:a});if(o<=0)return{radius:o,angle:0};var c=(r-i)/o,u=Math.acos(c);return n>a&&(u=2*Math.PI-u),{radius:o,angle:owe(u),angleInRadian:u}},uwe=t=>{var{startAngle:e,endAngle:r}=t,n=Math.floor(e/360),i=Math.floor(r/360),a=Math.min(n,i);return{startAngle:e-a*360,endAngle:r-a*360}},dwe=(t,e)=>{var{startAngle:r,endAngle:n}=e,i=Math.floor(r/360),a=Math.floor(n/360),o=Math.min(i,a);return t+o*360},hwe=(t,e)=>{var{chartX:r,chartY:n}=t,{radius:i,angle:a}=cwe({x:r,y:n},e),{innerRadius:o,outerRadius:c}=e;if(i<o||i>c||i===0)return null;var{startAngle:u,endAngle:l}=uwe(e),d=a,f;if(u<=l){for(;d>l;)d-=360;for(;d<u;)d+=360;f=d>=u&&d<=l}else{for(;d>u;)d-=360;for(;d<l;)d+=360;f=d>=l&&d<=u}return f?vH(vH({},e),{},{radius:i,angle:dwe(d,e)}):null};function pJ(t){var{cx:e,cy:r,radius:n,startAngle:i,endAngle:a}=t,o=rl(e,r,n,i),c=rl(e,r,n,a);return{points:[o,c],cx:e,cy:r,radius:n,startAngle:i,endAngle:a}}var yH,xH,bH,wH,_H,EH,SH;function bP(){return bP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},bP.apply(null,arguments)}function Vv(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var fwe=(t,e)=>{var r=pd(e-t),n=Math.min(Math.abs(e-t),359.999);return r*n},rS=t=>{var{cx:e,cy:r,radius:n,angle:i,sign:a,isExternal:o,cornerRadius:c,cornerIsExternal:u}=t,l=c*(o?1:-1)+n,d=Math.asin(c/l)/fC,f=u?i:i+a*d,m=rl(e,r,l,f),p=rl(e,r,n,f),g=u?i-a*d:i,y=rl(e,r,l*Math.cos(d*fC),g);return{center:m,circleTangency:p,lineTangency:y,theta:d}},gJ=t=>{var{cx:e,cy:r,innerRadius:n,outerRadius:i,startAngle:a,endAngle:o}=t,c=fwe(a,o),u=a+c,l=rl(e,r,i,a),d=rl(e,r,i,u),f=uc(yH||(yH=Vv(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),l.x,l.y,i,i,+(Math.abs(c)>180),+(a>u),d.x,d.y);if(n>0){var m=rl(e,r,n,a),p=rl(e,r,n,u);f+=uc(xH||(xH=Vv(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),p.x,p.y,n,n,+(Math.abs(c)>180),+(a<=u),m.x,m.y)}else f+=uc(bH||(bH=Vv(["L ",","," Z"])),e,r);return f},mwe=t=>{var{cx:e,cy:r,innerRadius:n,outerRadius:i,cornerRadius:a,forceCornerRadius:o,cornerIsExternal:c,startAngle:u,endAngle:l}=t,d=pd(l-u),{circleTangency:f,lineTangency:m,theta:p}=rS({cx:e,cy:r,radius:i,angle:u,sign:d,cornerRadius:a,cornerIsExternal:c}),{circleTangency:g,lineTangency:y,theta:x}=rS({cx:e,cy:r,radius:i,angle:l,sign:-d,cornerRadius:a,cornerIsExternal:c}),w=c?Math.abs(u-l):Math.abs(u-l)-p-x;if(w<0)return o?uc(wH||(wH=Vv(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),m.x,m.y,a,a,a*2,a,a,-a*2):gJ({cx:e,cy:r,innerRadius:n,outerRadius:i,startAngle:u,endAngle:l});var _=uc(_H||(_H=Vv(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),m.x,m.y,a,a,+(d<0),f.x,f.y,i,i,+(w>180),+(d<0),g.x,g.y,a,a,+(d<0),y.x,y.y);if(n>0){var{circleTangency:E,lineTangency:N,theta:C}=rS({cx:e,cy:r,radius:n,angle:u,sign:d,isExternal:!0,cornerRadius:a,cornerIsExternal:c}),{circleTangency:I,lineTangency:D,theta:U}=rS({cx:e,cy:r,radius:n,angle:l,sign:-d,isExternal:!0,cornerRadius:a,cornerIsExternal:c}),G=c?Math.abs(u-l):Math.abs(u-l)-C-U;if(G<0&&a===0)return"".concat(_,"L").concat(e,",").concat(r,"Z");_+=uc(EH||(EH=Vv(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),D.x,D.y,a,a,+(d<0),I.x,I.y,n,n,+(G>180),+(d>0),E.x,E.y,a,a,+(d<0),N.x,N.y)}else _+=uc(SH||(SH=Vv(["L",",","Z"])),e,r);return _},Awe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},vJ=t=>{var e=Uc(t,Awe),{cx:r,cy:n,innerRadius:i,outerRadius:a,cornerRadius:o,forceCornerRadius:c,cornerIsExternal:u,startAngle:l,endAngle:d,className:f}=e;if(a<i||l===d)return null;var m=ja("recharts-sector",f),p=a-i,g=ih(o,p,0,!0),y;return g>0&&Math.abs(l-d)<360?y=mwe({cx:r,cy:n,innerRadius:i,outerRadius:a,cornerRadius:Math.min(g,p/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:l,endAngle:d}):y=gJ({cx:r,cy:n,innerRadius:i,outerRadius:a,startAngle:l,endAngle:d}),T.createElement("path",bP({},zu(e),{className:m,d:y}))};function pwe(t,e,r){if(t==="horizontal")return[{x:e.x,y:r.top},{x:e.x,y:r.top+r.height}];if(t==="vertical")return[{x:r.left,y:e.y},{x:r.left+r.width,y:e.y}];if(XX(e)){if(t==="centric"){var{cx:n,cy:i,innerRadius:a,outerRadius:o,angle:c}=e,u=rl(n,i,a,c),l=rl(n,i,o,c);return[{x:u.x,y:u.y},{x:l.x,y:l.y}]}return pJ(e)}}var EL={},SL={},jL={},jH;function gwe(){return jH||(jH=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=lZ();function r(n){return e.isSymbol(n)?NaN:Number(n)}t.toNumber=r})(jL)),jL}var TH;function vwe(){return TH||(TH=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=gwe();function r(n){return n?(n=e.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}t.toFinite=r})(SL)),SL}var CH;function ywe(){return CH||(CH=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=cZ(),r=vwe();function n(i,a,o){o&&typeof o!="number"&&e.isIterateeCall(i,a,o)&&(a=o=void 0),i=r.toFinite(i),a===void 0?(a=i,i=0):a=r.toFinite(a),o=o===void 0?i<a?1:-1:r.toFinite(o);const c=Math.max(Math.ceil((a-i)/(o||1)),0),u=new Array(c);for(let l=0;l<c;l++)u[l]=i,i+=o;return u}t.range=n})(EL)),EL}var TL,NH;function xwe(){return NH||(NH=1,TL=ywe().range),TL}var bwe=xwe();const yJ=om(bwe);function P0(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function wwe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function vD(t){let e,r,n;t.length!==2?(e=P0,r=(c,u)=>P0(t(c),u),n=(c,u)=>t(c)-u):(e=t===P0||t===wwe?t:_we,r=t,n=t);function i(c,u,l=0,d=c.length){if(l<d){if(e(u,u)!==0)return d;do{const f=l+d>>>1;r(c[f],u)<0?l=f+1:d=f}while(l<d)}return l}function a(c,u,l=0,d=c.length){if(l<d){if(e(u,u)!==0)return d;do{const f=l+d>>>1;r(c[f],u)<=0?l=f+1:d=f}while(l<d)}return l}function o(c,u,l=0,d=c.length){const f=i(c,u,l,d-1);return f>l&&n(c[f-1],u)>-n(c[f],u)?f-1:f}return{left:i,center:o,right:a}}function _we(){return 0}function xJ(t){return t===null?NaN:+t}function*Ewe(t,e){for(let r of t)r!=null&&(r=+r)>=r&&(yield r)}const Swe=vD(P0),G_=Swe.right;vD(xJ).center;class kH extends Map{constructor(e,r=Cwe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[n,i]of e)this.set(n,i)}get(e){return super.get(LH(this,e))}has(e){return super.has(LH(this,e))}set(e,r){return super.set(jwe(this,e),r)}delete(e){return super.delete(Twe(this,e))}}function LH({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):r}function jwe({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):(t.set(n,r),r)}function Twe({_intern:t,_key:e},r){const n=e(r);return t.has(n)&&(r=t.get(n),t.delete(n)),r}function Cwe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Nwe(t=P0){if(t===P0)return bJ;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,r)=>{const n=t(e,r);return n||n===0?n:(t(r,r)===0)-(t(e,e)===0)}}function bJ(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const kwe=Math.sqrt(50),Lwe=Math.sqrt(10),Iwe=Math.sqrt(2);function AC(t,e,r){const n=(e-t)/Math.max(0,r),i=Math.floor(Math.log10(n)),a=n/Math.pow(10,i),o=a>=kwe?10:a>=Lwe?5:a>=Iwe?2:1;let c,u,l;return i<0?(l=Math.pow(10,-i)/o,c=Math.round(t*l),u=Math.round(e*l),c/l<t&&++c,u/l>e&&--u,l=-l):(l=Math.pow(10,i)*o,c=Math.round(t/l),u=Math.round(e/l),c*l<t&&++c,u*l>e&&--u),u<c&&.5<=r&&r<2?AC(t,e,r*2):[c,u,l]}function wP(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];const n=e<t,[i,a,o]=n?AC(e,t,r):AC(t,e,r);if(!(a>=i))return[];const c=a-i+1,u=new Array(c);if(n)if(o<0)for(let l=0;l<c;++l)u[l]=(a-l)/-o;else for(let l=0;l<c;++l)u[l]=(a-l)*o;else if(o<0)for(let l=0;l<c;++l)u[l]=(i+l)/-o;else for(let l=0;l<c;++l)u[l]=(i+l)*o;return u}function _P(t,e,r){return e=+e,t=+t,r=+r,AC(t,e,r)[2]}function EP(t,e,r){e=+e,t=+t,r=+r;const n=e<t,i=n?_P(e,t,r):_P(t,e,r);return(n?-1:1)*(i<0?1/-i:i)}function IH(t,e){let r;for(const n of t)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function BH(t,e){let r;for(const n of t)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function wJ(t,e,r=0,n=1/0,i){if(e=Math.floor(e),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(t.length-1,n)),!(r<=e&&e<=n))return t;for(i=i===void 0?bJ:Nwe(i);n>r;){if(n-r>600){const u=n-r+1,l=e-r+1,d=Math.log(u),f=.5*Math.exp(2*d/3),m=.5*Math.sqrt(d*f*(u-f)/u)*(l-u/2<0?-1:1),p=Math.max(r,Math.floor(e-l*f/u+m)),g=Math.min(n,Math.floor(e+(u-l)*f/u+m));wJ(t,e,p,g,i)}const a=t[e];let o=r,c=n;for(nw(t,r,e),i(t[n],a)>0&&nw(t,r,n);o<c;){for(nw(t,o,c),++o,--c;i(t[o],a)<0;)++o;for(;i(t[c],a)>0;)--c}i(t[r],a)===0?nw(t,r,c):(++c,nw(t,c,n)),c<=e&&(r=c+1),e<=c&&(n=c-1)}return t}function nw(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function Bwe(t,e,r){if(t=Float64Array.from(Ewe(t)),!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return BH(t);if(e>=1)return IH(t);var n,i=(n-1)*e,a=Math.floor(i),o=IH(wJ(t,a).subarray(0,a+1)),c=BH(t.subarray(a+1));return o+(c-o)*(i-a)}}function Pwe(t,e,r=xJ){if(!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return+r(t[0],0,t);if(e>=1)return+r(t[n-1],n-1,t);var n,i=(n-1)*e,a=Math.floor(i),o=+r(t[a],a,t),c=+r(t[a+1],a+1,t);return o+(c-o)*(i-a)}}function Owe(t,e,r){t=+t,e=+e,r=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+r;for(var n=-1,i=Math.max(0,Math.ceil((e-t)/r))|0,a=new Array(i);++n<i;)a[n]=t+n*r;return a}function lm(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function gg(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const SP=Symbol("implicit");function yD(){var t=new kH,e=[],r=[],n=SP;function i(a){let o=t.get(a);if(o===void 0){if(n!==SP)return n;t.set(a,o=e.push(a)-1)}return r[o%r.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new kH;for(const o of a)t.has(o)||t.set(o,e.push(o)-1);return i},i.range=function(a){return arguments.length?(r=Array.from(a),i):r.slice()},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return yD(e,r).unknown(n)},lm.apply(i,arguments),i}function xD(){var t=yD().unknown(void 0),e=t.domain,r=t.range,n=0,i=1,a,o,c=!1,u=0,l=0,d=.5;delete t.unknown;function f(){var m=e().length,p=i<n,g=p?i:n,y=p?n:i;a=(y-g)/Math.max(1,m-u+l*2),c&&(a=Math.floor(a)),g+=(y-g-a*(m-u))*d,o=a*(1-u),c&&(g=Math.round(g),o=Math.round(o));var x=Owe(m).map(function(w){return g+a*w});return r(p?x.reverse():x)}return t.domain=function(m){return arguments.length?(e(m),f()):e()},t.range=function(m){return arguments.length?([n,i]=m,n=+n,i=+i,f()):[n,i]},t.rangeRound=function(m){return[n,i]=m,n=+n,i=+i,c=!0,f()},t.bandwidth=function(){return o},t.step=function(){return a},t.round=function(m){return arguments.length?(c=!!m,f()):c},t.padding=function(m){return arguments.length?(u=Math.min(1,l=+m),f()):u},t.paddingInner=function(m){return arguments.length?(u=Math.min(1,m),f()):u},t.paddingOuter=function(m){return arguments.length?(l=+m,f()):l},t.align=function(m){return arguments.length?(d=Math.max(0,Math.min(1,m)),f()):d},t.copy=function(){return xD(e(),[n,i]).round(c).paddingInner(u).paddingOuter(l).align(d)},lm.apply(f(),arguments)}function _J(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return _J(e())},t}function Rwe(){return _J(xD.apply(null,arguments).paddingInner(1))}function bD(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function EJ(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function W_(){}var z2=.7,pC=1/z2,bb="\\s*([+-]?\\d+)\\s*",V2="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",VA="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Dwe=/^#([0-9a-f]{3,8})$/,Mwe=new RegExp(`^rgb\\(${bb},${bb},${bb}\\)$`),Fwe=new RegExp(`^rgb\\(${VA},${VA},${VA}\\)$`),Uwe=new RegExp(`^rgba\\(${bb},${bb},${bb},${V2}\\)$`),$we=new RegExp(`^rgba\\(${VA},${VA},${VA},${V2}\\)$`),Hwe=new RegExp(`^hsl\\(${V2},${VA},${VA}\\)$`),Qwe=new RegExp(`^hsla\\(${V2},${VA},${VA},${V2}\\)$`),PH={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};bD(W_,K2,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:OH,formatHex:OH,formatHex8:zwe,formatHsl:Vwe,formatRgb:RH,toString:RH});function OH(){return this.rgb().formatHex()}function zwe(){return this.rgb().formatHex8()}function Vwe(){return SJ(this).formatHsl()}function RH(){return this.rgb().formatRgb()}function K2(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=Dwe.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?DH(e):r===3?new $h(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?nS(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?nS(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Mwe.exec(t))?new $h(e[1],e[2],e[3],1):(e=Fwe.exec(t))?new $h(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Uwe.exec(t))?nS(e[1],e[2],e[3],e[4]):(e=$we.exec(t))?nS(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Hwe.exec(t))?UH(e[1],e[2]/100,e[3]/100,1):(e=Qwe.exec(t))?UH(e[1],e[2]/100,e[3]/100,e[4]):PH.hasOwnProperty(t)?DH(PH[t]):t==="transparent"?new $h(NaN,NaN,NaN,0):null}function DH(t){return new $h(t>>16&255,t>>8&255,t&255,1)}function nS(t,e,r,n){return n<=0&&(t=e=r=NaN),new $h(t,e,r,n)}function Kwe(t){return t instanceof W_||(t=K2(t)),t?(t=t.rgb(),new $h(t.r,t.g,t.b,t.opacity)):new $h}function jP(t,e,r,n){return arguments.length===1?Kwe(t):new $h(t,e,r,n??1)}function $h(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}bD($h,jP,EJ(W_,{brighter(t){return t=t==null?pC:Math.pow(pC,t),new $h(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?z2:Math.pow(z2,t),new $h(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new $h(iy(this.r),iy(this.g),iy(this.b),gC(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:MH,formatHex:MH,formatHex8:Gwe,formatRgb:FH,toString:FH}));function MH(){return`#${Kv(this.r)}${Kv(this.g)}${Kv(this.b)}`}function Gwe(){return`#${Kv(this.r)}${Kv(this.g)}${Kv(this.b)}${Kv((isNaN(this.opacity)?1:this.opacity)*255)}`}function FH(){const t=gC(this.opacity);return`${t===1?"rgb(":"rgba("}${iy(this.r)}, ${iy(this.g)}, ${iy(this.b)}${t===1?")":`, ${t})`}`}function gC(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function iy(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Kv(t){return t=iy(t),(t<16?"0":"")+t.toString(16)}function UH(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new Fm(t,e,r,n)}function SJ(t){if(t instanceof Fm)return new Fm(t.h,t.s,t.l,t.opacity);if(t instanceof W_||(t=K2(t)),!t)return new Fm;if(t instanceof Fm)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,i=Math.min(e,r,n),a=Math.max(e,r,n),o=NaN,c=a-i,u=(a+i)/2;return c?(e===a?o=(r-n)/c+(r<n)*6:r===a?o=(n-e)/c+2:o=(e-r)/c+4,c/=u<.5?a+i:2-a-i,o*=60):c=u>0&&u<1?0:o,new Fm(o,c,u,t.opacity)}function Wwe(t,e,r,n){return arguments.length===1?SJ(t):new Fm(t,e,r,n??1)}function Fm(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}bD(Fm,Wwe,EJ(W_,{brighter(t){return t=t==null?pC:Math.pow(pC,t),new Fm(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?z2:Math.pow(z2,t),new Fm(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,i=2*r-n;return new $h(CL(t>=240?t-240:t+120,i,n),CL(t,i,n),CL(t<120?t+240:t-120,i,n),this.opacity)},clamp(){return new Fm($H(this.h),iS(this.s),iS(this.l),gC(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=gC(this.opacity);return`${t===1?"hsl(":"hsla("}${$H(this.h)}, ${iS(this.s)*100}%, ${iS(this.l)*100}%${t===1?")":`, ${t})`}`}}));function $H(t){return t=(t||0)%360,t<0?t+360:t}function iS(t){return Math.max(0,Math.min(1,t||0))}function CL(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const wD=t=>()=>t;function Ywe(t,e){return function(r){return t+r*e}}function qwe(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function Xwe(t){return(t=+t)==1?jJ:function(e,r){return r-e?qwe(e,r,t):wD(isNaN(e)?r:e)}}function jJ(t,e){var r=e-t;return r?Ywe(t,r):wD(isNaN(t)?e:t)}const HH=(function t(e){var r=Xwe(e);function n(i,a){var o=r((i=jP(i)).r,(a=jP(a)).r),c=r(i.g,a.g),u=r(i.b,a.b),l=jJ(i.opacity,a.opacity);return function(d){return i.r=o(d),i.g=c(d),i.b=u(d),i.opacity=l(d),i+""}}return n.gamma=t,n})(1);function Zwe(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),i;return function(a){for(i=0;i<r;++i)n[i]=t[i]*(1-a)+e[i]*a;return n}}function Jwe(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function e2e(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,i=new Array(n),a=new Array(r),o;for(o=0;o<n;++o)i[o]=x1(t[o],e[o]);for(;o<r;++o)a[o]=e[o];return function(c){for(o=0;o<n;++o)a[o]=i[o](c);return a}}function t2e(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function vC(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function r2e(t,e){var r={},n={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?r[i]=x1(t[i],e[i]):n[i]=e[i];return function(a){for(i in r)n[i]=r[i](a);return n}}var TP=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,NL=new RegExp(TP.source,"g");function n2e(t){return function(){return t}}function i2e(t){return function(e){return t(e)+""}}function s2e(t,e){var r=TP.lastIndex=NL.lastIndex=0,n,i,a,o=-1,c=[],u=[];for(t=t+"",e=e+"";(n=TP.exec(t))&&(i=NL.exec(e));)(a=i.index)>r&&(a=e.slice(r,a),c[o]?c[o]+=a:c[++o]=a),(n=n[0])===(i=i[0])?c[o]?c[o]+=i:c[++o]=i:(c[++o]=null,u.push({i:o,x:vC(n,i)})),r=NL.lastIndex;return r<e.length&&(a=e.slice(r),c[o]?c[o]+=a:c[++o]=a),c.length<2?u[0]?i2e(u[0].x):n2e(e):(e=u.length,function(l){for(var d=0,f;d<e;++d)c[(f=u[d]).i]=f.x(l);return c.join("")})}function x1(t,e){var r=typeof e,n;return e==null||r==="boolean"?wD(e):(r==="number"?vC:r==="string"?(n=K2(e))?(e=n,HH):s2e:e instanceof K2?HH:e instanceof Date?t2e:Jwe(e)?Zwe:Array.isArray(e)?e2e:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?r2e:vC)(t,e)}function _D(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}function a2e(t,e){e===void 0&&(e=t,t=x1);for(var r=0,n=e.length-1,i=e[0],a=new Array(n<0?0:n);r<n;)a[r]=t(i,i=e[++r]);return function(o){var c=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return a[c](o-c)}}function o2e(t){return function(){return t}}function yC(t){return+t}var QH=[0,1];function yh(t){return t}function CP(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:o2e(isNaN(e)?NaN:.5)}function l2e(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function c2e(t,e,r){var n=t[0],i=t[1],a=e[0],o=e[1];return i<n?(n=CP(i,n),a=r(o,a)):(n=CP(n,i),a=r(a,o)),function(c){return a(n(c))}}function u2e(t,e,r){var n=Math.min(t.length,e.length)-1,i=new Array(n),a=new Array(n),o=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<n;)i[o]=CP(t[o],t[o+1]),a[o]=r(e[o],e[o+1]);return function(c){var u=G_(t,c,1,n)-1;return a[u](i[u](c))}}function Y_(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function p5(){var t=QH,e=QH,r=x1,n,i,a,o=yh,c,u,l;function d(){var m=Math.min(t.length,e.length);return o!==yh&&(o=l2e(t[0],t[m-1])),c=m>2?u2e:c2e,u=l=null,f}function f(m){return m==null||isNaN(m=+m)?a:(u||(u=c(t.map(n),e,r)))(n(o(m)))}return f.invert=function(m){return o(i((l||(l=c(e,t.map(n),vC)))(m)))},f.domain=function(m){return arguments.length?(t=Array.from(m,yC),d()):t.slice()},f.range=function(m){return arguments.length?(e=Array.from(m),d()):e.slice()},f.rangeRound=function(m){return e=Array.from(m),r=_D,d()},f.clamp=function(m){return arguments.length?(o=m?!0:yh,d()):o!==yh},f.interpolate=function(m){return arguments.length?(r=m,d()):r},f.unknown=function(m){return arguments.length?(a=m,f):a},function(m,p){return n=m,i=p,d()}}function ED(){return p5()(yh,yh)}function d2e(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function xC(t,e){if(!isFinite(t)||t===0)return null;var r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"),n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function Yb(t){return t=xC(Math.abs(t)),t?t[1]:NaN}function h2e(t,e){return function(r,n){for(var i=r.length,a=[],o=0,c=t[0],u=0;i>0&&c>0&&(u+c+1>n&&(c=Math.max(1,n-u)),a.push(r.substring(i-=c,i+c)),!((u+=c+1)>n));)c=t[o=(o+1)%t.length];return a.reverse().join(e)}}function f2e(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var m2e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function G2(t){if(!(e=m2e.exec(t)))throw new Error("invalid format: "+t);var e;return new SD({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}G2.prototype=SD.prototype;function SD(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}SD.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function A2e(t){e:for(var e=t.length,r=1,n=-1,i;r<e;++r)switch(t[r]){case".":n=i=r;break;case"0":n===0&&(n=r),i=r;break;default:if(!+t[r])break e;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(i+1):t}var bC;function p2e(t,e){var r=xC(t,e);if(!r)return bC=void 0,t.toPrecision(e);var n=r[0],i=r[1],a=i-(bC=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=n.length;return a===o?n:a>o?n+new Array(a-o+1).join("0"):a>0?n.slice(0,a)+"."+n.slice(a):"0."+new Array(1-a).join("0")+xC(t,Math.max(0,e+a-1))[0]}function zH(t,e){var r=xC(t,e);if(!r)return t+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}const VH={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:d2e,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>zH(t*100,e),r:zH,s:p2e,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function KH(t){return t}var GH=Array.prototype.map,WH=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function g2e(t){var e=t.grouping===void 0||t.thousands===void 0?KH:h2e(GH.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?KH:f2e(GH.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",c=t.minus===void 0?"":t.minus+"",u=t.nan===void 0?"NaN":t.nan+"";function l(f,m){f=G2(f);var p=f.fill,g=f.align,y=f.sign,x=f.symbol,w=f.zero,_=f.width,E=f.comma,N=f.precision,C=f.trim,I=f.type;I==="n"?(E=!0,I="g"):VH[I]||(N===void 0&&(N=12),C=!0,I="g"),(w||p==="0"&&g==="=")&&(w=!0,p="0",g="=");var D=(m&&m.prefix!==void 0?m.prefix:"")+(x==="$"?r:x==="#"&&/[boxX]/.test(I)?"0"+I.toLowerCase():""),U=(x==="$"?n:/[%p]/.test(I)?o:"")+(m&&m.suffix!==void 0?m.suffix:""),G=VH[I],q=/[defgprs%]/.test(I);N=N===void 0?6:/[gprs]/.test(I)?Math.max(1,Math.min(21,N)):Math.max(0,Math.min(20,N));function J(de){var xe=D,we=U,ve,ne,ae;if(I==="c")we=G(de)+we,de="";else{de=+de;var oe=de<0||1/de<0;if(de=isNaN(de)?u:G(Math.abs(de),N),C&&(de=A2e(de)),oe&&+de==0&&y!=="+"&&(oe=!1),xe=(oe?y==="("?y:c:y==="-"||y==="("?"":y)+xe,we=(I==="s"&&!isNaN(de)&&bC!==void 0?WH[8+bC/3]:"")+we+(oe&&y==="("?")":""),q){for(ve=-1,ne=de.length;++ve<ne;)if(ae=de.charCodeAt(ve),48>ae||ae>57){we=(ae===46?i+de.slice(ve+1):de.slice(ve))+we,de=de.slice(0,ve);break}}}E&&!w&&(de=e(de,1/0));var Ie=xe.length+de.length+we.length,Ce=Ie<_?new Array(_-Ie+1).join(p):"";switch(E&&w&&(de=e(Ce+de,Ce.length?_-we.length:1/0),Ce=""),g){case"<":de=xe+de+we+Ce;break;case"=":de=xe+Ce+de+we;break;case"^":de=Ce.slice(0,Ie=Ce.length>>1)+xe+de+we+Ce.slice(Ie);break;default:de=Ce+xe+de+we;break}return a(de)}return J.toString=function(){return f+""},J}function d(f,m){var p=Math.max(-8,Math.min(8,Math.floor(Yb(m)/3)))*3,g=Math.pow(10,-p),y=l((f=G2(f),f.type="f",f),{suffix:WH[8+p/3]});return function(x){return y(g*x)}}return{format:l,formatPrefix:d}}var sS,jD,TJ;v2e({thousands:",",grouping:[3],currency:["$",""]});function v2e(t){return sS=g2e(t),jD=sS.format,TJ=sS.formatPrefix,sS}function y2e(t){return Math.max(0,-Yb(Math.abs(t)))}function x2e(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Yb(e)/3)))*3-Yb(Math.abs(t)))}function b2e(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Yb(e)-Yb(t))+1}function CJ(t,e,r,n){var i=EP(t,e,r),a;switch(n=G2(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(a=x2e(i,o))&&(n.precision=a),TJ(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(a=b2e(i,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=a-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(a=y2e(i))&&(n.precision=a-(n.type==="%")*2);break}}return jD(n)}function Z0(t){var e=t.domain;return t.ticks=function(r){var n=e();return wP(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var i=e();return CJ(i[0],i[i.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),i=0,a=n.length-1,o=n[i],c=n[a],u,l,d=10;for(c<o&&(l=o,o=c,c=l,l=i,i=a,a=l);d-- >0;){if(l=_P(o,c,r),l===u)return n[i]=o,n[a]=c,e(n);if(l>0)o=Math.floor(o/l)*l,c=Math.ceil(c/l)*l;else if(l<0)o=Math.ceil(o*l)/l,c=Math.floor(c*l)/l;else break;u=l}return t},t}function NJ(){var t=ED();return t.copy=function(){return Y_(t,NJ())},lm.apply(t,arguments),Z0(t)}function kJ(t){var e;function r(n){return n==null||isNaN(n=+n)?e:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(t=Array.from(n,yC),r):t.slice()},r.unknown=function(n){return arguments.length?(e=n,r):e},r.copy=function(){return kJ(t).unknown(e)},t=arguments.length?Array.from(t,yC):[0,1],Z0(r)}function LJ(t,e){t=t.slice();var r=0,n=t.length-1,i=t[r],a=t[n],o;return a<i&&(o=r,r=n,n=o,o=i,i=a,a=o),t[r]=e.floor(i),t[n]=e.ceil(a),t}function YH(t){return Math.log(t)}function qH(t){return Math.exp(t)}function w2e(t){return-Math.log(-t)}function _2e(t){return-Math.exp(-t)}function E2e(t){return isFinite(t)?+("1e"+t):t<0?0:t}function S2e(t){return t===10?E2e:t===Math.E?Math.exp:e=>Math.pow(t,e)}function j2e(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function XH(t){return(e,r)=>-t(-e,r)}function TD(t){const e=t(YH,qH),r=e.domain;let n=10,i,a;function o(){return i=j2e(n),a=S2e(n),r()[0]<0?(i=XH(i),a=XH(a),t(w2e,_2e)):t(YH,qH),e}return e.base=function(c){return arguments.length?(n=+c,o()):n},e.domain=function(c){return arguments.length?(r(c),o()):r()},e.ticks=c=>{const u=r();let l=u[0],d=u[u.length-1];const f=d<l;f&&([l,d]=[d,l]);let m=i(l),p=i(d),g,y;const x=c==null?10:+c;let w=[];if(!(n%1)&&p-m<x){if(m=Math.floor(m),p=Math.ceil(p),l>0){for(;m<=p;++m)for(g=1;g<n;++g)if(y=m<0?g/a(-m):g*a(m),!(y<l)){if(y>d)break;w.push(y)}}else for(;m<=p;++m)for(g=n-1;g>=1;--g)if(y=m>0?g/a(-m):g*a(m),!(y<l)){if(y>d)break;w.push(y)}w.length*2<x&&(w=wP(l,d,x))}else w=wP(m,p,Math.min(p-m,x)).map(a);return f?w.reverse():w},e.tickFormat=(c,u)=>{if(c==null&&(c=10),u==null&&(u=n===10?"s":","),typeof u!="function"&&(!(n%1)&&(u=G2(u)).precision==null&&(u.trim=!0),u=jD(u)),c===1/0)return u;const l=Math.max(1,n*c/e.ticks().length);return d=>{let f=d/a(Math.round(i(d)));return f*n<n-.5&&(f*=n),f<=l?u(d):""}},e.nice=()=>r(LJ(r(),{floor:c=>a(Math.floor(i(c))),ceil:c=>a(Math.ceil(i(c)))})),e}function IJ(){const t=TD(p5()).domain([1,10]);return t.copy=()=>Y_(t,IJ()).base(t.base()),lm.apply(t,arguments),t}function ZH(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function JH(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function CD(t){var e=1,r=t(ZH(e),JH(e));return r.constant=function(n){return arguments.length?t(ZH(e=+n),JH(e)):e},Z0(r)}function BJ(){var t=CD(p5());return t.copy=function(){return Y_(t,BJ()).constant(t.constant())},lm.apply(t,arguments)}function eQ(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function T2e(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function C2e(t){return t<0?-t*t:t*t}function ND(t){var e=t(yh,yh),r=1;function n(){return r===1?t(yh,yh):r===.5?t(T2e,C2e):t(eQ(r),eQ(1/r))}return e.exponent=function(i){return arguments.length?(r=+i,n()):r},Z0(e)}function kD(){var t=ND(p5());return t.copy=function(){return Y_(t,kD()).exponent(t.exponent())},lm.apply(t,arguments),t}function N2e(){return kD.apply(null,arguments).exponent(.5)}function tQ(t){return Math.sign(t)*t*t}function k2e(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function PJ(){var t=ED(),e=[0,1],r=!1,n;function i(a){var o=k2e(t(a));return isNaN(o)?n:r?Math.round(o):o}return i.invert=function(a){return t.invert(tQ(a))},i.domain=function(a){return arguments.length?(t.domain(a),i):t.domain()},i.range=function(a){return arguments.length?(t.range((e=Array.from(a,yC)).map(tQ)),i):e.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(r=!!a,i):r},i.clamp=function(a){return arguments.length?(t.clamp(a),i):t.clamp()},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return PJ(t.domain(),e).round(r).clamp(t.clamp()).unknown(n)},lm.apply(i,arguments),Z0(i)}function OJ(){var t=[],e=[],r=[],n;function i(){var o=0,c=Math.max(1,e.length);for(r=new Array(c-1);++o<c;)r[o-1]=Pwe(t,o/c);return a}function a(o){return o==null||isNaN(o=+o)?n:e[G_(r,o)]}return a.invertExtent=function(o){var c=e.indexOf(o);return c<0?[NaN,NaN]:[c>0?r[c-1]:t[0],c<r.length?r[c]:t[t.length-1]]},a.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let c of o)c!=null&&!isNaN(c=+c)&&t.push(c);return t.sort(P0),i()},a.range=function(o){return arguments.length?(e=Array.from(o),i()):e.slice()},a.unknown=function(o){return arguments.length?(n=o,a):n},a.quantiles=function(){return r.slice()},a.copy=function(){return OJ().domain(t).range(e).unknown(n)},lm.apply(a,arguments)}function RJ(){var t=0,e=1,r=1,n=[.5],i=[0,1],a;function o(u){return u!=null&&u<=u?i[G_(n,u,0,r)]:a}function c(){var u=-1;for(n=new Array(r);++u<r;)n[u]=((u+1)*e-(u-r)*t)/(r+1);return o}return o.domain=function(u){return arguments.length?([t,e]=u,t=+t,e=+e,c()):[t,e]},o.range=function(u){return arguments.length?(r=(i=Array.from(u)).length-1,c()):i.slice()},o.invertExtent=function(u){var l=i.indexOf(u);return l<0?[NaN,NaN]:l<1?[t,n[0]]:l>=r?[n[r-1],e]:[n[l-1],n[l]]},o.unknown=function(u){return arguments.length&&(a=u),o},o.thresholds=function(){return n.slice()},o.copy=function(){return RJ().domain([t,e]).range(i).unknown(a)},lm.apply(Z0(o),arguments)}function DJ(){var t=[.5],e=[0,1],r,n=1;function i(a){return a!=null&&a<=a?e[G_(t,a,0,n)]:r}return i.domain=function(a){return arguments.length?(t=Array.from(a),n=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(a){return arguments.length?(e=Array.from(a),n=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(a){var o=e.indexOf(a);return[t[o-1],t[o]]},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return DJ().domain(t).range(e).unknown(r)},lm.apply(i,arguments)}const kL=new Date,LL=new Date;function Gu(t,e,r,n){function i(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(t(a=new Date(+a)),a),i.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),i.round=a=>{const o=i(a),c=i.ceil(a);return a-o<c-a?o:c},i.offset=(a,o)=>(e(a=new Date(+a),o==null?1:Math.floor(o)),a),i.range=(a,o,c)=>{const u=[];if(a=i.ceil(a),c=c==null?1:Math.floor(c),!(a<o)||!(c>0))return u;let l;do u.push(l=new Date(+a)),e(a,c),t(a);while(l<a&&a<o);return u},i.filter=a=>Gu(o=>{if(o>=o)for(;t(o),!a(o);)o.setTime(o-1)},(o,c)=>{if(o>=o)if(c<0)for(;++c<=0;)for(;e(o,-1),!a(o););else for(;--c>=0;)for(;e(o,1),!a(o););}),r&&(i.count=(a,o)=>(kL.setTime(+a),LL.setTime(+o),t(kL),t(LL),Math.floor(r(kL,LL))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(n?o=>n(o)%a===0:o=>i.count(0,o)%a===0):i)),i}const wC=Gu(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);wC.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Gu(e=>{e.setTime(Math.floor(e/t)*t)},(e,r)=>{e.setTime(+e+r*t)},(e,r)=>(r-e)/t):wC);wC.range;const Hp=1e3,em=Hp*60,Qp=em*60,sg=Qp*24,LD=sg*7,rQ=sg*30,IL=sg*365,Gv=Gu(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Hp)},(t,e)=>(e-t)/Hp,t=>t.getUTCSeconds());Gv.range;const ID=Gu(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Hp)},(t,e)=>{t.setTime(+t+e*em)},(t,e)=>(e-t)/em,t=>t.getMinutes());ID.range;const BD=Gu(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*em)},(t,e)=>(e-t)/em,t=>t.getUTCMinutes());BD.range;const PD=Gu(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Hp-t.getMinutes()*em)},(t,e)=>{t.setTime(+t+e*Qp)},(t,e)=>(e-t)/Qp,t=>t.getHours());PD.range;const OD=Gu(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Qp)},(t,e)=>(e-t)/Qp,t=>t.getUTCHours());OD.range;const q_=Gu(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*em)/sg,t=>t.getDate()-1);q_.range;const g5=Gu(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/sg,t=>t.getUTCDate()-1);g5.range;const MJ=Gu(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/sg,t=>Math.floor(t/sg));MJ.range;function Ly(t){return Gu(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,r)=>{e.setDate(e.getDate()+r*7)},(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*em)/LD)}const v5=Ly(0),_C=Ly(1),L2e=Ly(2),I2e=Ly(3),qb=Ly(4),B2e=Ly(5),P2e=Ly(6);v5.range;_C.range;L2e.range;I2e.range;qb.range;B2e.range;P2e.range;function Iy(t){return Gu(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r*7)},(e,r)=>(r-e)/LD)}const y5=Iy(0),EC=Iy(1),O2e=Iy(2),R2e=Iy(3),Xb=Iy(4),D2e=Iy(5),M2e=Iy(6);y5.range;EC.range;O2e.range;R2e.range;Xb.range;D2e.range;M2e.range;const RD=Gu(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());RD.range;const DD=Gu(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());DD.range;const ag=Gu(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());ag.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Gu(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r*t)});ag.range;const og=Gu(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());og.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Gu(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r*t)});og.range;function FJ(t,e,r,n,i,a){const o=[[Gv,1,Hp],[Gv,5,5*Hp],[Gv,15,15*Hp],[Gv,30,30*Hp],[a,1,em],[a,5,5*em],[a,15,15*em],[a,30,30*em],[i,1,Qp],[i,3,3*Qp],[i,6,6*Qp],[i,12,12*Qp],[n,1,sg],[n,2,2*sg],[r,1,LD],[e,1,rQ],[e,3,3*rQ],[t,1,IL]];function c(l,d,f){const m=d<l;m&&([l,d]=[d,l]);const p=f&&typeof f.range=="function"?f:u(l,d,f),g=p?p.range(l,+d+1):[];return m?g.reverse():g}function u(l,d,f){const m=Math.abs(d-l)/f,p=vD(([,,x])=>x).right(o,m);if(p===o.length)return t.every(EP(l/IL,d/IL,f));if(p===0)return wC.every(Math.max(EP(l,d,f),1));const[g,y]=o[m/o[p-1][2]<o[p][2]/m?p-1:p];return g.every(y)}return[c,u]}const[F2e,U2e]=FJ(og,DD,y5,MJ,OD,BD),[$2e,H2e]=FJ(ag,RD,v5,q_,PD,ID);function BL(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function PL(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function iw(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function Q2e(t){var e=t.dateTime,r=t.date,n=t.time,i=t.periods,a=t.days,o=t.shortDays,c=t.months,u=t.shortMonths,l=sw(i),d=aw(i),f=sw(a),m=aw(a),p=sw(o),g=aw(o),y=sw(c),x=aw(c),w=sw(u),_=aw(u),E={a:ae,A:oe,b:Ie,B:Ce,c:null,d:lQ,e:lQ,f:h_e,g:w_e,G:E_e,H:c_e,I:u_e,j:d_e,L:UJ,m:f_e,M:m_e,p:be,q:ue,Q:dQ,s:hQ,S:A_e,u:p_e,U:g_e,V:v_e,w:y_e,W:x_e,x:null,X:null,y:b_e,Y:__e,Z:S_e,"%":uQ},N={a:Pe,A:Re,b:He,B:Fe,c:null,d:cQ,e:cQ,f:N_e,g:F_e,G:$_e,H:j_e,I:T_e,j:C_e,L:HJ,m:k_e,M:L_e,p:ft,q:at,Q:dQ,s:hQ,S:I_e,u:B_e,U:P_e,V:O_e,w:R_e,W:D_e,x:null,X:null,y:M_e,Y:U_e,Z:H_e,"%":uQ},C={a:q,A:J,b:de,B:xe,c:we,d:aQ,e:aQ,f:s_e,g:sQ,G:iQ,H:oQ,I:oQ,j:t_e,L:i_e,m:e_e,M:r_e,p:G,q:J2e,Q:o_e,s:l_e,S:n_e,u:W2e,U:Y2e,V:q2e,w:G2e,W:X2e,x:ve,X:ne,y:sQ,Y:iQ,Z:Z2e,"%":a_e};E.x=I(r,E),E.X=I(n,E),E.c=I(e,E),N.x=I(r,N),N.X=I(n,N),N.c=I(e,N);function I(De,ut){return function(et){var Ue=[],jt=-1,rt=0,Ct=De.length,ke,Xe,mt;for(et instanceof Date||(et=new Date(+et));++jt<Ct;)De.charCodeAt(jt)===37&&(Ue.push(De.slice(rt,jt)),(Xe=nQ[ke=De.charAt(++jt)])!=null?ke=De.charAt(++jt):Xe=ke==="e"?" ":"0",(mt=ut[ke])&&(ke=mt(et,Xe)),Ue.push(ke),rt=jt+1);return Ue.push(De.slice(rt,jt)),Ue.join("")}}function D(De,ut){return function(et){var Ue=iw(1900,void 0,1),jt=U(Ue,De,et+="",0),rt,Ct;if(jt!=et.length)return null;if("Q"in Ue)return new Date(Ue.Q);if("s"in Ue)return new Date(Ue.s*1e3+("L"in Ue?Ue.L:0));if(ut&&!("Z"in Ue)&&(Ue.Z=0),"p"in Ue&&(Ue.H=Ue.H%12+Ue.p*12),Ue.m===void 0&&(Ue.m="q"in Ue?Ue.q:0),"V"in Ue){if(Ue.V<1||Ue.V>53)return null;"w"in Ue||(Ue.w=1),"Z"in Ue?(rt=PL(iw(Ue.y,0,1)),Ct=rt.getUTCDay(),rt=Ct>4||Ct===0?EC.ceil(rt):EC(rt),rt=g5.offset(rt,(Ue.V-1)*7),Ue.y=rt.getUTCFullYear(),Ue.m=rt.getUTCMonth(),Ue.d=rt.getUTCDate()+(Ue.w+6)%7):(rt=BL(iw(Ue.y,0,1)),Ct=rt.getDay(),rt=Ct>4||Ct===0?_C.ceil(rt):_C(rt),rt=q_.offset(rt,(Ue.V-1)*7),Ue.y=rt.getFullYear(),Ue.m=rt.getMonth(),Ue.d=rt.getDate()+(Ue.w+6)%7)}else("W"in Ue||"U"in Ue)&&("w"in Ue||(Ue.w="u"in Ue?Ue.u%7:"W"in Ue?1:0),Ct="Z"in Ue?PL(iw(Ue.y,0,1)).getUTCDay():BL(iw(Ue.y,0,1)).getDay(),Ue.m=0,Ue.d="W"in Ue?(Ue.w+6)%7+Ue.W*7-(Ct+5)%7:Ue.w+Ue.U*7-(Ct+6)%7);return"Z"in Ue?(Ue.H+=Ue.Z/100|0,Ue.M+=Ue.Z%100,PL(Ue)):BL(Ue)}}function U(De,ut,et,Ue){for(var jt=0,rt=ut.length,Ct=et.length,ke,Xe;jt<rt;){if(Ue>=Ct)return-1;if(ke=ut.charCodeAt(jt++),ke===37){if(ke=ut.charAt(jt++),Xe=C[ke in nQ?ut.charAt(jt++):ke],!Xe||(Ue=Xe(De,et,Ue))<0)return-1}else if(ke!=et.charCodeAt(Ue++))return-1}return Ue}function G(De,ut,et){var Ue=l.exec(ut.slice(et));return Ue?(De.p=d.get(Ue[0].toLowerCase()),et+Ue[0].length):-1}function q(De,ut,et){var Ue=p.exec(ut.slice(et));return Ue?(De.w=g.get(Ue[0].toLowerCase()),et+Ue[0].length):-1}function J(De,ut,et){var Ue=f.exec(ut.slice(et));return Ue?(De.w=m.get(Ue[0].toLowerCase()),et+Ue[0].length):-1}function de(De,ut,et){var Ue=w.exec(ut.slice(et));return Ue?(De.m=_.get(Ue[0].toLowerCase()),et+Ue[0].length):-1}function xe(De,ut,et){var Ue=y.exec(ut.slice(et));return Ue?(De.m=x.get(Ue[0].toLowerCase()),et+Ue[0].length):-1}function we(De,ut,et){return U(De,e,ut,et)}function ve(De,ut,et){return U(De,r,ut,et)}function ne(De,ut,et){return U(De,n,ut,et)}function ae(De){return o[De.getDay()]}function oe(De){return a[De.getDay()]}function Ie(De){return u[De.getMonth()]}function Ce(De){return c[De.getMonth()]}function be(De){return i[+(De.getHours()>=12)]}function ue(De){return 1+~~(De.getMonth()/3)}function Pe(De){return o[De.getUTCDay()]}function Re(De){return a[De.getUTCDay()]}function He(De){return u[De.getUTCMonth()]}function Fe(De){return c[De.getUTCMonth()]}function ft(De){return i[+(De.getUTCHours()>=12)]}function at(De){return 1+~~(De.getUTCMonth()/3)}return{format:function(De){var ut=I(De+="",E);return ut.toString=function(){return De},ut},parse:function(De){var ut=D(De+="",!1);return ut.toString=function(){return De},ut},utcFormat:function(De){var ut=I(De+="",N);return ut.toString=function(){return De},ut},utcParse:function(De){var ut=D(De+="",!0);return ut.toString=function(){return De},ut}}}var nQ={"-":"",_:" ",0:"0"},vd=/^\s*\d+/,z2e=/^%/,V2e=/[\\^$*+?|[\]().{}]/g;function po(t,e,r){var n=t<0?"-":"",i=(n?-t:t)+"",a=i.length;return n+(a<r?new Array(r-a+1).join(e)+i:i)}function K2e(t){return t.replace(V2e,"\\$&")}function sw(t){return new RegExp("^(?:"+t.map(K2e).join("|")+")","i")}function aw(t){return new Map(t.map((e,r)=>[e.toLowerCase(),r]))}function G2e(t,e,r){var n=vd.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function W2e(t,e,r){var n=vd.exec(e.slice(r,r+1));return n?(t.u=+n[0],r+n[0].length):-1}function Y2e(t,e,r){var n=vd.exec(e.slice(r,r+2));return n?(t.U=+n[0],r+n[0].length):-1}function q2e(t,e,r){var n=vd.exec(e.slice(r,r+2));return n?(t.V=+n[0],r+n[0].length):-1}function X2e(t,e,r){var n=vd.exec(e.slice(r,r+2));return n?(t.W=+n[0],r+n[0].length):-1}function iQ(t,e,r){var n=vd.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function sQ(t,e,r){var n=vd.exec(e.slice(r,r+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function Z2e(t,e,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function J2e(t,e,r){var n=vd.exec(e.slice(r,r+1));return n?(t.q=n[0]*3-3,r+n[0].length):-1}function e_e(t,e,r){var n=vd.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function aQ(t,e,r){var n=vd.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function t_e(t,e,r){var n=vd.exec(e.slice(r,r+3));return n?(t.m=0,t.d=+n[0],r+n[0].length):-1}function oQ(t,e,r){var n=vd.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function r_e(t,e,r){var n=vd.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function n_e(t,e,r){var n=vd.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function i_e(t,e,r){var n=vd.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function s_e(t,e,r){var n=vd.exec(e.slice(r,r+6));return n?(t.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function a_e(t,e,r){var n=z2e.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function o_e(t,e,r){var n=vd.exec(e.slice(r));return n?(t.Q=+n[0],r+n[0].length):-1}function l_e(t,e,r){var n=vd.exec(e.slice(r));return n?(t.s=+n[0],r+n[0].length):-1}function lQ(t,e){return po(t.getDate(),e,2)}function c_e(t,e){return po(t.getHours(),e,2)}function u_e(t,e){return po(t.getHours()%12||12,e,2)}function d_e(t,e){return po(1+q_.count(ag(t),t),e,3)}function UJ(t,e){return po(t.getMilliseconds(),e,3)}function h_e(t,e){return UJ(t,e)+"000"}function f_e(t,e){return po(t.getMonth()+1,e,2)}function m_e(t,e){return po(t.getMinutes(),e,2)}function A_e(t,e){return po(t.getSeconds(),e,2)}function p_e(t){var e=t.getDay();return e===0?7:e}function g_e(t,e){return po(v5.count(ag(t)-1,t),e,2)}function $J(t){var e=t.getDay();return e>=4||e===0?qb(t):qb.ceil(t)}function v_e(t,e){return t=$J(t),po(qb.count(ag(t),t)+(ag(t).getDay()===4),e,2)}function y_e(t){return t.getDay()}function x_e(t,e){return po(_C.count(ag(t)-1,t),e,2)}function b_e(t,e){return po(t.getFullYear()%100,e,2)}function w_e(t,e){return t=$J(t),po(t.getFullYear()%100,e,2)}function __e(t,e){return po(t.getFullYear()%1e4,e,4)}function E_e(t,e){var r=t.getDay();return t=r>=4||r===0?qb(t):qb.ceil(t),po(t.getFullYear()%1e4,e,4)}function S_e(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+po(e/60|0,"0",2)+po(e%60,"0",2)}function cQ(t,e){return po(t.getUTCDate(),e,2)}function j_e(t,e){return po(t.getUTCHours(),e,2)}function T_e(t,e){return po(t.getUTCHours()%12||12,e,2)}function C_e(t,e){return po(1+g5.count(og(t),t),e,3)}function HJ(t,e){return po(t.getUTCMilliseconds(),e,3)}function N_e(t,e){return HJ(t,e)+"000"}function k_e(t,e){return po(t.getUTCMonth()+1,e,2)}function L_e(t,e){return po(t.getUTCMinutes(),e,2)}function I_e(t,e){return po(t.getUTCSeconds(),e,2)}function B_e(t){var e=t.getUTCDay();return e===0?7:e}function P_e(t,e){return po(y5.count(og(t)-1,t),e,2)}function QJ(t){var e=t.getUTCDay();return e>=4||e===0?Xb(t):Xb.ceil(t)}function O_e(t,e){return t=QJ(t),po(Xb.count(og(t),t)+(og(t).getUTCDay()===4),e,2)}function R_e(t){return t.getUTCDay()}function D_e(t,e){return po(EC.count(og(t)-1,t),e,2)}function M_e(t,e){return po(t.getUTCFullYear()%100,e,2)}function F_e(t,e){return t=QJ(t),po(t.getUTCFullYear()%100,e,2)}function U_e(t,e){return po(t.getUTCFullYear()%1e4,e,4)}function $_e(t,e){var r=t.getUTCDay();return t=r>=4||r===0?Xb(t):Xb.ceil(t),po(t.getUTCFullYear()%1e4,e,4)}function H_e(){return"+0000"}function uQ(){return"%"}function dQ(t){return+t}function hQ(t){return Math.floor(+t/1e3)}var nx,zJ,VJ;Q_e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Q_e(t){return nx=Q2e(t),zJ=nx.format,nx.parse,VJ=nx.utcFormat,nx.utcParse,nx}function z_e(t){return new Date(t)}function V_e(t){return t instanceof Date?+t:+new Date(+t)}function MD(t,e,r,n,i,a,o,c,u,l){var d=ED(),f=d.invert,m=d.domain,p=l(".%L"),g=l(":%S"),y=l("%I:%M"),x=l("%I %p"),w=l("%a %d"),_=l("%b %d"),E=l("%B"),N=l("%Y");function C(I){return(u(I)<I?p:c(I)<I?g:o(I)<I?y:a(I)<I?x:n(I)<I?i(I)<I?w:_:r(I)<I?E:N)(I)}return d.invert=function(I){return new Date(f(I))},d.domain=function(I){return arguments.length?m(Array.from(I,V_e)):m().map(z_e)},d.ticks=function(I){var D=m();return t(D[0],D[D.length-1],I??10)},d.tickFormat=function(I,D){return D==null?C:l(D)},d.nice=function(I){var D=m();return(!I||typeof I.range!="function")&&(I=e(D[0],D[D.length-1],I??10)),I?m(LJ(D,I)):d},d.copy=function(){return Y_(d,MD(t,e,r,n,i,a,o,c,u,l))},d}function K_e(){return lm.apply(MD($2e,H2e,ag,RD,v5,q_,PD,ID,Gv,zJ).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function G_e(){return lm.apply(MD(F2e,U2e,og,DD,y5,g5,OD,BD,Gv,VJ).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function x5(){var t=0,e=1,r,n,i,a,o=yh,c=!1,u;function l(f){return f==null||isNaN(f=+f)?u:o(i===0?.5:(f=(a(f)-r)*i,c?Math.max(0,Math.min(1,f)):f))}l.domain=function(f){return arguments.length?([t,e]=f,r=a(t=+t),n=a(e=+e),i=r===n?0:1/(n-r),l):[t,e]},l.clamp=function(f){return arguments.length?(c=!!f,l):c},l.interpolator=function(f){return arguments.length?(o=f,l):o};function d(f){return function(m){var p,g;return arguments.length?([p,g]=m,o=f(p,g),l):[o(0),o(1)]}}return l.range=d(x1),l.rangeRound=d(_D),l.unknown=function(f){return arguments.length?(u=f,l):u},function(f){return a=f,r=f(t),n=f(e),i=r===n?0:1/(n-r),l}}function J0(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function KJ(){var t=Z0(x5()(yh));return t.copy=function(){return J0(t,KJ())},gg.apply(t,arguments)}function GJ(){var t=TD(x5()).domain([1,10]);return t.copy=function(){return J0(t,GJ()).base(t.base())},gg.apply(t,arguments)}function WJ(){var t=CD(x5());return t.copy=function(){return J0(t,WJ()).constant(t.constant())},gg.apply(t,arguments)}function FD(){var t=ND(x5());return t.copy=function(){return J0(t,FD()).exponent(t.exponent())},gg.apply(t,arguments)}function W_e(){return FD.apply(null,arguments).exponent(.5)}function YJ(){var t=[],e=yh;function r(n){if(n!=null&&!isNaN(n=+n))return e((G_(t,n,1)-1)/(t.length-1))}return r.domain=function(n){if(!arguments.length)return t.slice();t=[];for(let i of n)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(P0),r},r.interpolator=function(n){return arguments.length?(e=n,r):e},r.range=function(){return t.map((n,i)=>e(i/(t.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(i,a)=>Bwe(t,a/n))},r.copy=function(){return YJ(e).domain(t)},gg.apply(r,arguments)}function b5(){var t=0,e=.5,r=1,n=1,i,a,o,c,u,l=yh,d,f=!1,m;function p(y){return isNaN(y=+y)?m:(y=.5+((y=+d(y))-a)*(n*y<n*a?c:u),l(f?Math.max(0,Math.min(1,y)):y))}p.domain=function(y){return arguments.length?([t,e,r]=y,i=d(t=+t),a=d(e=+e),o=d(r=+r),c=i===a?0:.5/(a-i),u=a===o?0:.5/(o-a),n=a<i?-1:1,p):[t,e,r]},p.clamp=function(y){return arguments.length?(f=!!y,p):f},p.interpolator=function(y){return arguments.length?(l=y,p):l};function g(y){return function(x){var w,_,E;return arguments.length?([w,_,E]=x,l=a2e(y,[w,_,E]),p):[l(0),l(.5),l(1)]}}return p.range=g(x1),p.rangeRound=g(_D),p.unknown=function(y){return arguments.length?(m=y,p):m},function(y){return d=y,i=y(t),a=y(e),o=y(r),c=i===a?0:.5/(a-i),u=a===o?0:.5/(o-a),n=a<i?-1:1,p}}function qJ(){var t=Z0(b5()(yh));return t.copy=function(){return J0(t,qJ())},gg.apply(t,arguments)}function XJ(){var t=TD(b5()).domain([.1,1,10]);return t.copy=function(){return J0(t,XJ()).base(t.base())},gg.apply(t,arguments)}function ZJ(){var t=CD(b5());return t.copy=function(){return J0(t,ZJ()).constant(t.constant())},gg.apply(t,arguments)}function UD(){var t=ND(b5());return t.copy=function(){return J0(t,UD()).exponent(t.exponent())},gg.apply(t,arguments)}function Y_e(){return UD.apply(null,arguments).exponent(.5)}const Cw=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:xD,scaleDiverging:qJ,scaleDivergingLog:XJ,scaleDivergingPow:UD,scaleDivergingSqrt:Y_e,scaleDivergingSymlog:ZJ,scaleIdentity:kJ,scaleImplicit:SP,scaleLinear:NJ,scaleLog:IJ,scaleOrdinal:yD,scalePoint:Rwe,scalePow:kD,scaleQuantile:OJ,scaleQuantize:RJ,scaleRadial:PJ,scaleSequential:KJ,scaleSequentialLog:GJ,scaleSequentialPow:FD,scaleSequentialQuantile:YJ,scaleSequentialSqrt:W_e,scaleSequentialSymlog:WJ,scaleSqrt:N2e,scaleSymlog:BJ,scaleThreshold:DJ,scaleTime:K_e,scaleUtc:G_e,tickFormat:CJ},Symbol.toStringTag,{value:"Module"}));var vg=t=>t.chartData,X_=dr([vg],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),JJ=(t,e,r,n)=>n?X_(t):vg(t),q_e=(t,e,r)=>r?X_(t):vg(t);function lg(t){if(Array.isArray(t)&&t.length===2){var[e,r]=t;if(Qa(e)&&Qa(r))return!0}return!1}function fQ(t,e,r){return r?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function eee(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[r,n]=t,i,a;if(Qa(r))i=r;else if(typeof r=="function")return;if(Qa(n))a=n;else if(typeof n=="function")return;var o=[i,a];if(lg(o))return o}}function X_e(t,e,r){if(!(!r&&e==null)){if(typeof t=="function"&&e!=null)try{var n=t(e,r);if(lg(n))return fQ(n,e,r)}catch{}if(Array.isArray(t)&&t.length===2){var[i,a]=t,o,c;if(i==="auto")e!=null&&(o=Math.min(...e));else if(Ei(i))o=i;else if(typeof i=="function")try{e!=null&&(o=i(e?.[0]))}catch{}else if(typeof i=="string"&&_9.test(i)){var u=_9.exec(i);if(u==null||u[1]==null||e==null)o=void 0;else{var l=+u[1];o=e[0]-l}}else o=e?.[0];if(a==="auto")e!=null&&(c=Math.max(...e));else if(Ei(a))c=a;else if(typeof a=="function")try{e!=null&&(c=a(e?.[1]))}catch{}else if(typeof a=="string"&&E9.test(a)){var d=E9.exec(a);if(d==null||d[1]==null||e==null)c=void 0;else{var f=+d[1];c=e[1]+f}}else c=e?.[1];var m=[o,c];if(lg(m))return e==null?m:fQ(m,e,r)}}}var b1=1e9,Z_e={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},HD,Zl=!0,sm="[DecimalError] ",sy=sm+"Invalid argument: ",$D=sm+"Exponent out of range: ",w1=Math.floor,Tv=Math.pow,J_e=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,xf,hd=1e7,Ml=7,tee=9007199254740991,SC=w1(tee/Ml),vi={};vi.absoluteValue=vi.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};vi.comparedTo=vi.cmp=function(t){var e,r,n,i,a=this;if(t=new a.constructor(t),a.s!==t.s)return a.s||-t.s;if(a.e!==t.e)return a.e>t.e^a.s<0?1:-1;for(n=a.d.length,i=t.d.length,e=0,r=n<i?n:i;e<r;++e)if(a.d[e]!==t.d[e])return a.d[e]>t.d[e]^a.s<0?1:-1;return n===i?0:n>i^a.s<0?1:-1};vi.decimalPlaces=vi.dp=function(){var t=this,e=t.d.length-1,r=(e-t.e)*Ml;if(e=t.d[e],e)for(;e%10==0;e/=10)r--;return r<0?0:r};vi.dividedBy=vi.div=function(t){return Wp(this,new this.constructor(t))};vi.dividedToIntegerBy=vi.idiv=function(t){var e=this,r=e.constructor;return hl(Wp(e,new r(t),0,1),r.precision)};vi.equals=vi.eq=function(t){return!this.cmp(t)};vi.exponent=function(){return vu(this)};vi.greaterThan=vi.gt=function(t){return this.cmp(t)>0};vi.greaterThanOrEqualTo=vi.gte=function(t){return this.cmp(t)>=0};vi.isInteger=vi.isint=function(){return this.e>this.d.length-2};vi.isNegative=vi.isneg=function(){return this.s<0};vi.isPositive=vi.ispos=function(){return this.s>0};vi.isZero=function(){return this.s===0};vi.lessThan=vi.lt=function(t){return this.cmp(t)<0};vi.lessThanOrEqualTo=vi.lte=function(t){return this.cmp(t)<1};vi.logarithm=vi.log=function(t){var e,r=this,n=r.constructor,i=n.precision,a=i+5;if(t===void 0)t=new n(10);else if(t=new n(t),t.s<1||t.eq(xf))throw Error(sm+"NaN");if(r.s<1)throw Error(sm+(r.s?"NaN":"-Infinity"));return r.eq(xf)?new n(0):(Zl=!1,e=Wp(W2(r,a),W2(t,a),a),Zl=!0,hl(e,i))};vi.minus=vi.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?iee(e,t):ree(e,(t.s=-t.s,t))};vi.modulo=vi.mod=function(t){var e,r=this,n=r.constructor,i=n.precision;if(t=new n(t),!t.s)throw Error(sm+"NaN");return r.s?(Zl=!1,e=Wp(r,t,0,1).times(t),Zl=!0,r.minus(e)):hl(new n(r),i)};vi.naturalExponential=vi.exp=function(){return nee(this)};vi.naturalLogarithm=vi.ln=function(){return W2(this)};vi.negated=vi.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};vi.plus=vi.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?ree(e,t):iee(e,(t.s=-t.s,t))};vi.precision=vi.sd=function(t){var e,r,n,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(sy+t);if(e=vu(i)+1,n=i.d.length-1,r=n*Ml+1,n=i.d[n],n){for(;n%10==0;n/=10)r--;for(n=i.d[0];n>=10;n/=10)r++}return t&&e>r?e:r};vi.squareRoot=vi.sqrt=function(){var t,e,r,n,i,a,o,c=this,u=c.constructor;if(c.s<1){if(!c.s)return new u(0);throw Error(sm+"NaN")}for(t=vu(c),Zl=!1,i=Math.sqrt(+c),i==0||i==1/0?(e=DA(c.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=w1((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),n=new u(e)):n=new u(i.toString()),r=u.precision,i=o=r+3;;)if(a=n,n=a.plus(Wp(c,a,o+2)).times(.5),DA(a.d).slice(0,o)===(e=DA(n.d)).slice(0,o)){if(e=e.slice(o-3,o+1),i==o&&e=="4999"){if(hl(a,r+1,0),a.times(a).eq(c)){n=a;break}}else if(e!="9999")break;o+=4}return Zl=!0,hl(n,r)};vi.times=vi.mul=function(t){var e,r,n,i,a,o,c,u,l,d=this,f=d.constructor,m=d.d,p=(t=new f(t)).d;if(!d.s||!t.s)return new f(0);for(t.s*=d.s,r=d.e+t.e,u=m.length,l=p.length,u<l&&(a=m,m=p,p=a,o=u,u=l,l=o),a=[],o=u+l,n=o;n--;)a.push(0);for(n=l;--n>=0;){for(e=0,i=u+n;i>n;)c=a[i]+p[n]*m[i-n-1]+e,a[i--]=c%hd|0,e=c/hd|0;a[i]=(a[i]+e)%hd|0}for(;!a[--o];)a.pop();return e?++r:a.shift(),t.d=a,t.e=r,Zl?hl(t,f.precision):t};vi.toDecimalPlaces=vi.todp=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(ZA(t,0,b1),e===void 0?e=n.rounding:ZA(e,0,8),hl(r,t+vu(r)+1,e))};vi.toExponential=function(t,e){var r,n=this,i=n.constructor;return t===void 0?r=Ey(n,!0):(ZA(t,0,b1),e===void 0?e=i.rounding:ZA(e,0,8),n=hl(new i(n),t+1,e),r=Ey(n,!0,t+1)),r};vi.toFixed=function(t,e){var r,n,i=this,a=i.constructor;return t===void 0?Ey(i):(ZA(t,0,b1),e===void 0?e=a.rounding:ZA(e,0,8),n=hl(new a(i),t+vu(i)+1,e),r=Ey(n.abs(),!1,t+vu(n)+1),i.isneg()&&!i.isZero()?"-"+r:r)};vi.toInteger=vi.toint=function(){var t=this,e=t.constructor;return hl(new e(t),vu(t)+1,e.rounding)};vi.toNumber=function(){return+this};vi.toPower=vi.pow=function(t){var e,r,n,i,a,o,c=this,u=c.constructor,l=12,d=+(t=new u(t));if(!t.s)return new u(xf);if(c=new u(c),!c.s){if(t.s<1)throw Error(sm+"Infinity");return c}if(c.eq(xf))return c;if(n=u.precision,t.eq(xf))return hl(c,n);if(e=t.e,r=t.d.length-1,o=e>=r,a=c.s,o){if((r=d<0?-d:d)<=tee){for(i=new u(xf),e=Math.ceil(n/Ml+4),Zl=!1;r%2&&(i=i.times(c),AQ(i.d,e)),r=w1(r/2),r!==0;)c=c.times(c),AQ(c.d,e);return Zl=!0,t.s<0?new u(xf).div(i):hl(i,n)}}else if(a<0)throw Error(sm+"NaN");return a=a<0&&t.d[Math.max(e,r)]&1?-1:1,c.s=1,Zl=!1,i=t.times(W2(c,n+l)),Zl=!0,i=nee(i),i.s=a,i};vi.toPrecision=function(t,e){var r,n,i=this,a=i.constructor;return t===void 0?(r=vu(i),n=Ey(i,r<=a.toExpNeg||r>=a.toExpPos)):(ZA(t,1,b1),e===void 0?e=a.rounding:ZA(e,0,8),i=hl(new a(i),t,e),r=vu(i),n=Ey(i,t<=r||r<=a.toExpNeg,t)),n};vi.toSignificantDigits=vi.tosd=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(ZA(t,1,b1),e===void 0?e=n.rounding:ZA(e,0,8)),hl(new n(r),t,e)};vi.toString=vi.valueOf=vi.val=vi.toJSON=vi[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=vu(t),r=t.constructor;return Ey(t,e<=r.toExpNeg||e>=r.toExpPos)};function ree(t,e){var r,n,i,a,o,c,u,l,d=t.constructor,f=d.precision;if(!t.s||!e.s)return e.s||(e=new d(t)),Zl?hl(e,f):e;if(u=t.d,l=e.d,o=t.e,i=e.e,u=u.slice(),a=o-i,a){for(a<0?(n=u,a=-a,c=l.length):(n=l,i=o,c=u.length),o=Math.ceil(f/Ml),c=o>c?o+1:c+1,a>c&&(a=c,n.length=1),n.reverse();a--;)n.push(0);n.reverse()}for(c=u.length,a=l.length,c-a<0&&(a=c,n=l,l=u,u=n),r=0;a;)r=(u[--a]=u[a]+l[a]+r)/hd|0,u[a]%=hd;for(r&&(u.unshift(r),++i),c=u.length;u[--c]==0;)u.pop();return e.d=u,e.e=i,Zl?hl(e,f):e}function ZA(t,e,r){if(t!==~~t||t<e||t>r)throw Error(sy+t)}function DA(t){var e,r,n,i=t.length-1,a="",o=t[0];if(i>0){for(a+=o,e=1;e<i;e++)n=t[e]+"",r=Ml-n.length,r&&(a+=p0(r)),a+=n;o=t[e],n=o+"",r=Ml-n.length,r&&(a+=p0(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return a+o}var Wp=(function(){function t(n,i){var a,o=0,c=n.length;for(n=n.slice();c--;)a=n[c]*i+o,n[c]=a%hd|0,o=a/hd|0;return o&&n.unshift(o),n}function e(n,i,a,o){var c,u;if(a!=o)u=a>o?1:-1;else for(c=u=0;c<a;c++)if(n[c]!=i[c]){u=n[c]>i[c]?1:-1;break}return u}function r(n,i,a){for(var o=0;a--;)n[a]-=o,o=n[a]<i[a]?1:0,n[a]=o*hd+n[a]-i[a];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,a,o){var c,u,l,d,f,m,p,g,y,x,w,_,E,N,C,I,D,U,G=n.constructor,q=n.s==i.s?1:-1,J=n.d,de=i.d;if(!n.s)return new G(n);if(!i.s)throw Error(sm+"Division by zero");for(u=n.e-i.e,D=de.length,C=J.length,p=new G(q),g=p.d=[],l=0;de[l]==(J[l]||0);)++l;if(de[l]>(J[l]||0)&&--u,a==null?_=a=G.precision:o?_=a+(vu(n)-vu(i))+1:_=a,_<0)return new G(0);if(_=_/Ml+2|0,l=0,D==1)for(d=0,de=de[0],_++;(l<C||d)&&_--;l++)E=d*hd+(J[l]||0),g[l]=E/de|0,d=E%de|0;else{for(d=hd/(de[0]+1)|0,d>1&&(de=t(de,d),J=t(J,d),D=de.length,C=J.length),N=D,y=J.slice(0,D),x=y.length;x<D;)y[x++]=0;U=de.slice(),U.unshift(0),I=de[0],de[1]>=hd/2&&++I;do d=0,c=e(de,y,D,x),c<0?(w=y[0],D!=x&&(w=w*hd+(y[1]||0)),d=w/I|0,d>1?(d>=hd&&(d=hd-1),f=t(de,d),m=f.length,x=y.length,c=e(f,y,m,x),c==1&&(d--,r(f,D<m?U:de,m))):(d==0&&(c=d=1),f=de.slice()),m=f.length,m<x&&f.unshift(0),r(y,f,x),c==-1&&(x=y.length,c=e(de,y,D,x),c<1&&(d++,r(y,D<x?U:de,x))),x=y.length):c===0&&(d++,y=[0]),g[l++]=d,c&&y[0]?y[x++]=J[N]||0:(y=[J[N]],x=1);while((N++<C||y[0]!==void 0)&&_--)}return g[0]||g.shift(),p.e=u,hl(p,o?a+vu(p)+1:a)}})();function nee(t,e){var r,n,i,a,o,c,u=0,l=0,d=t.constructor,f=d.precision;if(vu(t)>16)throw Error($D+vu(t));if(!t.s)return new d(xf);for(Zl=!1,c=f,o=new d(.03125);t.abs().gte(.1);)t=t.times(o),l+=5;for(n=Math.log(Tv(2,l))/Math.LN10*2+5|0,c+=n,r=i=a=new d(xf),d.precision=c;;){if(i=hl(i.times(t),c),r=r.times(++u),o=a.plus(Wp(i,r,c)),DA(o.d).slice(0,c)===DA(a.d).slice(0,c)){for(;l--;)a=hl(a.times(a),c);return d.precision=f,e==null?(Zl=!0,hl(a,f)):a}a=o}}function vu(t){for(var e=t.e*Ml,r=t.d[0];r>=10;r/=10)e++;return e}function OL(t,e,r){if(e>t.LN10.sd())throw Zl=!0,r&&(t.precision=r),Error(sm+"LN10 precision limit exceeded");return hl(new t(t.LN10),e)}function p0(t){for(var e="";t--;)e+="0";return e}function W2(t,e){var r,n,i,a,o,c,u,l,d,f=1,m=10,p=t,g=p.d,y=p.constructor,x=y.precision;if(p.s<1)throw Error(sm+(p.s?"NaN":"-Infinity"));if(p.eq(xf))return new y(0);if(e==null?(Zl=!1,l=x):l=e,p.eq(10))return e==null&&(Zl=!0),OL(y,l);if(l+=m,y.precision=l,r=DA(g),n=r.charAt(0),a=vu(p),Math.abs(a)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)p=p.times(t),r=DA(p.d),n=r.charAt(0),f++;a=vu(p),n>1?(p=new y("0."+r),a++):p=new y(n+"."+r.slice(1))}else return u=OL(y,l+2,x).times(a+""),p=W2(new y(n+"."+r.slice(1)),l-m).plus(u),y.precision=x,e==null?(Zl=!0,hl(p,x)):p;for(c=o=p=Wp(p.minus(xf),p.plus(xf),l),d=hl(p.times(p),l),i=3;;){if(o=hl(o.times(d),l),u=c.plus(Wp(o,new y(i),l)),DA(u.d).slice(0,l)===DA(c.d).slice(0,l))return c=c.times(2),a!==0&&(c=c.plus(OL(y,l+2,x).times(a+""))),c=Wp(c,new y(f),l),y.precision=x,e==null?(Zl=!0,hl(c,x)):c;c=u,i+=2}}function mQ(t,e){var r,n,i;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;)++n;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(n,i),e){if(i-=n,r=r-n-1,t.e=w1(r/Ml),t.d=[],n=(r+1)%Ml,r<0&&(n+=Ml),n<i){for(n&&t.d.push(+e.slice(0,n)),i-=Ml;n<i;)t.d.push(+e.slice(n,n+=Ml));e=e.slice(n),n=Ml-e.length}else n-=i;for(;n--;)e+="0";if(t.d.push(+e),Zl&&(t.e>SC||t.e<-SC))throw Error($D+r)}else t.s=0,t.e=0,t.d=[0];return t}function hl(t,e,r){var n,i,a,o,c,u,l,d,f=t.d;for(o=1,a=f[0];a>=10;a/=10)o++;if(n=e-o,n<0)n+=Ml,i=e,l=f[d=0];else{if(d=Math.ceil((n+1)/Ml),a=f.length,d>=a)return t;for(l=a=f[d],o=1;a>=10;a/=10)o++;n%=Ml,i=n-Ml+o}if(r!==void 0&&(a=Tv(10,o-i-1),c=l/a%10|0,u=e<0||f[d+1]!==void 0||l%a,u=r<4?(c||u)&&(r==0||r==(t.s<0?3:2)):c>5||c==5&&(r==4||u||r==6&&(n>0?i>0?l/Tv(10,o-i):0:f[d-1])%10&1||r==(t.s<0?8:7))),e<1||!f[0])return u?(a=vu(t),f.length=1,e=e-a-1,f[0]=Tv(10,(Ml-e%Ml)%Ml),t.e=w1(-e/Ml)||0):(f.length=1,f[0]=t.e=t.s=0),t;if(n==0?(f.length=d,a=1,d--):(f.length=d+1,a=Tv(10,Ml-n),f[d]=i>0?(l/Tv(10,o-i)%Tv(10,i)|0)*a:0),u)for(;;)if(d==0){(f[0]+=a)==hd&&(f[0]=1,++t.e);break}else{if(f[d]+=a,f[d]!=hd)break;f[d--]=0,a=1}for(n=f.length;f[--n]===0;)f.pop();if(Zl&&(t.e>SC||t.e<-SC))throw Error($D+vu(t));return t}function iee(t,e){var r,n,i,a,o,c,u,l,d,f,m=t.constructor,p=m.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new m(t),Zl?hl(e,p):e;if(u=t.d,f=e.d,n=e.e,l=t.e,u=u.slice(),o=l-n,o){for(d=o<0,d?(r=u,o=-o,c=f.length):(r=f,n=l,c=u.length),i=Math.max(Math.ceil(p/Ml),c)+2,o>i&&(o=i,r.length=1),r.reverse(),i=o;i--;)r.push(0);r.reverse()}else{for(i=u.length,c=f.length,d=i<c,d&&(c=i),i=0;i<c;i++)if(u[i]!=f[i]){d=u[i]<f[i];break}o=0}for(d&&(r=u,u=f,f=r,e.s=-e.s),c=u.length,i=f.length-c;i>0;--i)u[c++]=0;for(i=f.length;i>o;){if(u[--i]<f[i]){for(a=i;a&&u[--a]===0;)u[a]=hd-1;--u[a],u[i]+=hd}u[i]-=f[i]}for(;u[--c]===0;)u.pop();for(;u[0]===0;u.shift())--n;return u[0]?(e.d=u,e.e=n,Zl?hl(e,p):e):new m(0)}function Ey(t,e,r){var n,i=vu(t),a=DA(t.d),o=a.length;return e?(r&&(n=r-o)>0?a=a.charAt(0)+"."+a.slice(1)+p0(n):o>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+p0(-i-1)+a,r&&(n=r-o)>0&&(a+=p0(n))):i>=o?(a+=p0(i+1-o),r&&(n=r-i-1)>0&&(a=a+"."+p0(n))):((n=i+1)<o&&(a=a.slice(0,n)+"."+a.slice(n)),r&&(n=r-o)>0&&(i+1===o&&(a+="."),a+=p0(n))),t.s<0?"-"+a:a}function AQ(t,e){if(t.length>e)return t.length=e,!0}function see(t){var e,r,n;function i(a){var o=this;if(!(o instanceof i))return new i(a);if(o.constructor=i,a instanceof i){o.s=a.s,o.e=a.e,o.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(sy+a);if(a>0)o.s=1;else if(a<0)a=-a,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(a===~~a&&a<1e7){o.e=0,o.d=[a];return}return mQ(o,a.toString())}else if(typeof a!="string")throw Error(sy+a);if(a.charCodeAt(0)===45?(a=a.slice(1),o.s=-1):o.s=1,J_e.test(a))mQ(o,a);else throw Error(sy+a)}if(i.prototype=vi,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=see,i.config=i.set=eEe,t===void 0&&(t={}),t)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return i.config(t),i}function eEe(t){if(!t||typeof t!="object")throw Error(sm+"Object expected");var e,r,n,i=["precision",1,b1,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((n=t[r=i[e]])!==void 0)if(w1(n)===n&&n>=i[e+1]&&n<=i[e+2])this[r]=n;else throw Error(sy+r+": "+n);if((n=t[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(sy+r+": "+n);return this}var HD=see(Z_e);xf=new HD(1);const $o=HD;function aee(t){var e;return t===0?e=1:e=Math.floor(new $o(t).abs().log(10).toNumber())+1,e}function oee(t,e,r){for(var n=new $o(t),i=0,a=[];n.lt(e)&&i<1e5;)a.push(n.toNumber()),n=n.add(r),i++;return a}var lee=t=>{var[e,r]=t,[n,i]=[e,r];return e>r&&([n,i]=[r,e]),[n,i]},cee=(t,e,r)=>{if(t.lte(0))return new $o(0);var n=aee(t.toNumber()),i=new $o(10).pow(n),a=t.div(i),o=n!==1?.05:.1,c=new $o(Math.ceil(a.div(o).toNumber())).add(r).mul(o),u=c.mul(i);return e?new $o(u.toNumber()):new $o(Math.ceil(u.toNumber()))},tEe=(t,e,r)=>{var n=new $o(1),i=new $o(t);if(!i.isint()&&r){var a=Math.abs(t);a<1?(n=new $o(10).pow(aee(t)-1),i=new $o(Math.floor(i.div(n).toNumber())).mul(n)):a>1&&(i=new $o(Math.floor(t)))}else t===0?i=new $o(Math.floor((e-1)/2)):r||(i=new $o(Math.floor(t)));for(var o=Math.floor((e-1)/2),c=[],u=0;u<e;u++)c.push(i.add(new $o(u-o).mul(n)).toNumber());return c},uee=function(e,r,n,i){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-e)/(n-1)))return{step:new $o(0),tickMin:new $o(0),tickMax:new $o(0)};var o=cee(new $o(r).sub(e).div(n-1),i,a),c;e<=0&&r>=0?c=new $o(0):(c=new $o(e).add(r).div(2),c=c.sub(new $o(c).mod(o)));var u=Math.ceil(c.sub(e).div(o).toNumber()),l=Math.ceil(new $o(r).sub(c).div(o).toNumber()),d=u+l+1;return d>n?uee(e,r,n,i,a+1):(d<n&&(l=r>0?l+(n-d):l,u=r>0?u:u+(n-d)),{step:o,tickMin:c.sub(new $o(u).mul(o)),tickMax:c.add(new $o(l).mul(o))})},rEe=function(e){var[r,n]=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(i,2),[c,u]=lee([r,n]);if(c===-1/0||u===1/0){var l=u===1/0?[c,...Array(i-1).fill(1/0)]:[...Array(i-1).fill(-1/0),u];return r>n?l.reverse():l}if(c===u)return tEe(c,i,a);var{step:d,tickMin:f,tickMax:m}=uee(c,u,o,a,0),p=oee(f,m.add(new $o(.1).mul(d)),d);return r>n?p.reverse():p},nEe=function(e,r){var[n,i]=e,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[o,c]=lee([n,i]);if(o===-1/0||c===1/0)return[n,i];if(o===c)return[o];var u=Math.max(r,2),l=cee(new $o(c).sub(o).div(u-1),a,0),d=[...oee(new $o(o),new $o(c),l),c];return a===!1&&(d=d.map(f=>Math.round(f))),n>i?d.reverse():d},dee=t=>t.rootProps.maxBarSize,iEe=t=>t.rootProps.barGap,hee=t=>t.rootProps.barCategoryGap,sEe=t=>t.rootProps.barSize,Z_=t=>t.rootProps.stackOffset,fee=t=>t.rootProps.reverseStackOrder,QD=t=>t.options.chartName,zD=t=>t.rootProps.syncId,mee=t=>t.rootProps.syncMethod,VD=t=>t.options.eventEmitter,Oc={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},o0={allowDecimals:!1,allowDuplicatedCategory:!0,allowDataOverflow:!1,angle:0,angleAxisId:0,axisLine:!0,axisLineType:"polygon",cx:0,cy:0,hide:!1,includeHidden:!1,label:!1,orientation:"outer",reversed:!1,scale:"auto",tick:!0,tickLine:!0,tickSize:8,type:"auto",zIndex:Oc.axis},dA={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!0,includeHidden:!1,radiusAxisId:0,reversed:!1,scale:"auto",tick:!0,tickCount:5,type:"auto"},w5=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e};function J_(t,e,r){if(r!=="auto")return r;if(t!=null)return mg(t,e)?"category":"number"}function pQ(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function jC(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?pQ(Object(r),!0).forEach(function(n){aEe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pQ(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function aEe(t,e,r){return(e=oEe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function oEe(t){var e=lEe(t,"string");return typeof e=="symbol"?e:e+""}function lEe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var gQ={allowDataOverflow:o0.allowDataOverflow,allowDecimals:o0.allowDecimals,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:o0.angleAxisId,includeHidden:!1,name:void 0,reversed:o0.reversed,scale:o0.scale,tick:o0.tick,tickCount:void 0,ticks:void 0,type:o0.type,unit:void 0},vQ={allowDataOverflow:dA.allowDataOverflow,allowDecimals:dA.allowDecimals,allowDuplicatedCategory:dA.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:dA.radiusAxisId,includeHidden:dA.includeHidden,name:void 0,reversed:dA.reversed,scale:dA.scale,tick:dA.tick,tickCount:dA.tickCount,ticks:void 0,type:dA.type,unit:void 0},cEe=(t,e)=>{if(e!=null)return t.polarAxis.angleAxis[e]},_1=dr([cEe,mD],(t,e)=>{var r;if(t!=null)return t;var n=(r=J_(e,"angleAxis",gQ.type))!==null&&r!==void 0?r:"category";return jC(jC({},gQ),{},{type:n})}),uEe=(t,e)=>t.polarAxis.radiusAxis[e],eE=dr([uEe,mD],(t,e)=>{var r;if(t!=null)return t;var n=(r=J_(e,"radiusAxis",vQ.type))!==null&&r!==void 0?r:"category";return jC(jC({},vQ),{},{type:n})}),_5=t=>t.polarOptions,KD=dr([Ag,pg,Ku],AJ),Aee=dr([_5,KD],(t,e)=>{if(t!=null)return ih(t.innerRadius,e,0)}),pee=dr([_5,KD],(t,e)=>{if(t!=null)return ih(t.outerRadius,e,e*.8)}),dEe=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:r}=t;return[e,r]},gee=dr([_5],dEe),hEe=dr([_1,gee],w5),vee=dr([KD,Aee,pee],(t,e,r)=>{if(!(t==null||e==null||r==null))return[e,r]}),fEe=dr([eE,vee],w5),tE=dr([Ya,_5,Aee,pee,Ag,pg],(t,e,r,n,i,a)=>{if(!(t!=="centric"&&t!=="radial"||e==null||r==null||n==null)){var{cx:o,cy:c,startAngle:u,endAngle:l}=e;return{cx:ih(o,i,i/2),cy:ih(c,a,a/2),innerRadius:r,outerRadius:n,startAngle:u,endAngle:l,clockWise:!1}}}),kl=(t,e)=>e,rE=(t,e,r)=>r;function GD(t){return t?.id}function yee(t,e,r){var{chartData:n=[]}=e,{allowDuplicatedCategory:i,dataKey:a}=r,o=new Map;return t.forEach(c=>{var u,l=(u=c.data)!==null&&u!==void 0?u:n;if(!(l==null||l.length===0)){var d=GD(c);l.forEach((f,m)=>{var p=a==null||i?m:String(dl(f,a,null)),g=dl(f,c.dataKey,0),y;o.has(p)?y=o.get(p):y={},Object.assign(y,{[d]:g}),o.set(p,y)})}}),Array.from(o.values())}function E5(t){return"stackId"in t&&t.stackId!=null&&t.dataKey!=null}var S5=(t,e)=>t===e?!0:t==null||e==null?!1:t[0]===e[0]&&t[1]===e[1];function j5(t,e){return Array.isArray(t)&&Array.isArray(e)&&t.length===0&&e.length===0?!0:t===e}function mEe(t,e){if(t.length===e.length){for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}return!1}var yd=t=>{var e=Ya(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},E1=t=>t.tooltip.settings.axisId;function AEe(t){if(t in Cw)return Cw[t]();var e="scale".concat(F_(t));if(e in Cw)return Cw[e]()}function yQ(t){var e=t.ticks,r=t.bandwidth,n=t.range(),i=[Math.min(...n),Math.max(...n)];return{domain:()=>t.domain(),range:(function(a){function o(){return a.apply(this,arguments)}return o.toString=function(){return a.toString()},o})(()=>i),rangeMin:()=>i[0],rangeMax:()=>i[1],isInRange(a){var o=i[0],c=i[1];return o<=c?a>=o&&a<=c:a>=c&&a<=o},bandwidth:r?()=>r.call(t):void 0,ticks:e?a=>e.call(t,a):void 0,map:(a,o)=>{var c=t(a);if(c!=null){if(t.bandwidth&&o!==null&&o!==void 0&&o.position){var u=t.bandwidth();switch(o.position){case"middle":c+=u/2;break;case"end":c+=u;break}}return c}}}}function xQ(t,e,r){if(typeof t=="function")return yQ(t.copy().domain(e).range(r));if(t!=null){var n=AEe(t);if(n!=null)return n.domain(e).range(r),yQ(n)}}var xee=(t,e)=>{if(e!=null)switch(t){case"linear":{if(!lg(e)){for(var r,n,i=0;i<e.length;i++){var a=e[i];Qa(a)&&((r===void 0||a<r)&&(r=a),(n===void 0||a>n)&&(n=a))}return r!==void 0&&n!==void 0?[r,n]:void 0}return e}default:return e}};function bQ(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function TC(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?bQ(Object(r),!0).forEach(function(n){pEe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):bQ(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function pEe(t,e,r){return(e=gEe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function gEe(t){var e=vEe(t,"string");return typeof e=="symbol"?e:e+""}function vEe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var NP=[0,"auto"],cd={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},bee=(t,e)=>t.cartesianAxis.xAxis[e],yg=(t,e)=>{var r=bee(t,e);return r??cd},ud={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:NP,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:H_},wee=(t,e)=>t.cartesianAxis.yAxis[e],xg=(t,e)=>{var r=wee(t,e);return r??ud},yEe={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},WD=(t,e)=>{var r=t.cartesianAxis.zAxis[e];return r??yEe},$c=(t,e,r)=>{switch(e){case"xAxis":return yg(t,r);case"yAxis":return xg(t,r);case"zAxis":return WD(t,r);case"angleAxis":return _1(t,r);case"radiusAxis":return eE(t,r);default:throw new Error("Unexpected axis type: ".concat(e))}},xEe=(t,e,r)=>{switch(e){case"xAxis":return yg(t,r);case"yAxis":return xg(t,r);default:throw new Error("Unexpected axis type: ".concat(e))}},By=(t,e,r)=>{switch(e){case"xAxis":return yg(t,r);case"yAxis":return xg(t,r);case"angleAxis":return _1(t,r);case"radiusAxis":return eE(t,r);default:throw new Error("Unexpected axis type: ".concat(e))}},_ee=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function YD(t,e){return r=>{switch(t){case"xAxis":return"xAxisId"in r&&r.xAxisId===e;case"yAxis":return"yAxisId"in r&&r.yAxisId===e;case"zAxis":return"zAxisId"in r&&r.zAxisId===e;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===e;default:return!1}}}var qD=t=>t.graphicalItems.cartesianItems,bEe=dr([kl,rE],YD),XD=(t,e,r)=>t.filter(r).filter(n=>e?.includeHidden===!0?!0:!n.hide),nE=dr([qD,$c,bEe],XD,{memoizeOptions:{resultEqualityCheck:j5}}),Eee=dr([nE],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(E5)),See=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),wEe=dr([nE],See),ZD=t=>t.map(e=>e.data).filter(Boolean).flat(1),_Ee=dr([nE],ZD,{memoizeOptions:{resultEqualityCheck:j5}}),JD=(t,e)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:i}=e;return t.length>0?t:r.slice(n,i+1)},eM=dr([_Ee,JJ],JD),tM=(t,e,r)=>e?.dataKey!=null?t.map(n=>({value:dl(n,e.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>t.map(i=>({value:dl(i,n)}))):t.map(n=>({value:n})),T5=dr([eM,$c,nE],tM);function jee(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function oj(t){if(qA(t)||t instanceof Date){var e=Number(t);if(Qa(e))return e}}function wQ(t){if(Array.isArray(t)){var e=[oj(t[0]),oj(t[1])];return lg(e)?e:void 0}var r=oj(t);if(r!=null)return[r,r]}function cg(t){return t.map(oj).filter(Uh)}function EEe(t,e,r){return!r||typeof e!="number"||YA(e)?[]:r.length?cg(r.flatMap(n=>{var i=dl(t,n.dataKey),a,o;if(Array.isArray(i)?[a,o]=i:a=o=i,!(!Qa(a)||!Qa(o)))return[e-a,e+o]})):[]}var Wu=t=>{var e=yd(t),r=E1(t);return By(t,e,r)},iE=dr([Wu],t=>t?.dataKey),SEe=dr([Eee,JJ,Wu],yee),Tee=(t,e,r,n)=>{var i={},a=e.reduce((o,c)=>{if(c.stackId==null)return o;var u=o[c.stackId];return u==null&&(u=[]),u.push(c),o[c.stackId]=u,o},i);return Object.fromEntries(Object.entries(a).map(o=>{var[c,u]=o,l=n?[...u].reverse():u,d=l.map(GD);return[c,{stackedData:Hxe(t,d,r),graphicalItems:l}]}))},kP=dr([SEe,Eee,Z_,fee],Tee),Cee=(t,e,r,n)=>{var{dataStartIndex:i,dataEndIndex:a}=e;if(n==null&&r!=="zAxis"){var o=Gxe(t,i,a);if(!(o!=null&&o[0]===0&&o[1]===0))return o}},jEe=dr([$c],t=>t.allowDataOverflow),rM=t=>{var e;if(t==null||!("domain"in t))return NP;if(t.domain!=null)return t.domain;if("ticks"in t&&t.ticks!=null){if(t.type==="number"){var r=cg(t.ticks);return[Math.min(...r),Math.max(...r)]}if(t.type==="category")return t.ticks.map(String)}return(e=t?.domain)!==null&&e!==void 0?e:NP},nM=dr([$c],rM),iM=dr([nM,jEe],eee),TEe=dr([kP,vg,kl,iM],Cee,{memoizeOptions:{resultEqualityCheck:S5}}),C5=t=>t.errorBars,CEe=(t,e,r)=>t.flatMap(n=>e[n.id]).filter(Boolean).filter(n=>jee(r,n)),CC=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var i=r.filter(Boolean);if(i.length!==0){var a=i.flat(),o=Math.min(...a),c=Math.max(...a);return[o,c]}},sM=(t,e,r,n,i)=>{var a,o;if(r.length>0&&t.forEach(c=>{r.forEach(u=>{var l,d,f=(l=n[u.id])===null||l===void 0?void 0:l.filter(w=>jee(i,w)),m=dl(c,(d=e.dataKey)!==null&&d!==void 0?d:u.dataKey),p=EEe(c,m,f);if(p.length>=2){var g=Math.min(...p),y=Math.max(...p);(a==null||g<a)&&(a=g),(o==null||y>o)&&(o=y)}var x=wQ(m);x!=null&&(a=a==null?x[0]:Math.min(a,x[0]),o=o==null?x[1]:Math.max(o,x[1]))})}),e?.dataKey!=null&&t.forEach(c=>{var u=wQ(dl(c,e.dataKey));u!=null&&(a=a==null?u[0]:Math.min(a,u[0]),o=o==null?u[1]:Math.max(o,u[1]))}),Qa(a)&&Qa(o))return[a,o]},NEe=dr([eM,$c,wEe,C5,kl],sM,{memoizeOptions:{resultEqualityCheck:S5}});function kEe(t){var{value:e}=t;if(qA(e)||e instanceof Date)return e}var LEe=(t,e,r)=>{var n=t.map(kEe).filter(i=>i!=null);return r&&(e.dataKey==null||e.allowDuplicatedCategory&&YX(n))?yJ(0,t.length):e.allowDuplicatedCategory?n:Array.from(new Set(n))},Nee=t=>t.referenceElements.dots,S1=(t,e,r)=>t.filter(n=>n.ifOverflow==="extendDomain").filter(n=>e==="xAxis"?n.xAxisId===r:n.yAxisId===r),IEe=dr([Nee,kl,rE],S1),kee=t=>t.referenceElements.areas,BEe=dr([kee,kl,rE],S1),Lee=t=>t.referenceElements.lines,PEe=dr([Lee,kl,rE],S1),Iee=(t,e)=>{if(t!=null){var r=cg(t.map(n=>e==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},OEe=dr(IEe,kl,Iee),Bee=(t,e)=>{if(t!=null){var r=cg(t.flatMap(n=>[e==="xAxis"?n.x1:n.y1,e==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},REe=dr([BEe,kl],Bee);function DEe(t){var e;if(t.x!=null)return cg([t.x]);var r=(e=t.segment)===null||e===void 0?void 0:e.map(n=>n.x);return r==null||r.length===0?[]:cg(r)}function MEe(t){var e;if(t.y!=null)return cg([t.y]);var r=(e=t.segment)===null||e===void 0?void 0:e.map(n=>n.y);return r==null||r.length===0?[]:cg(r)}var Pee=(t,e)=>{if(t!=null){var r=t.flatMap(n=>e==="xAxis"?DEe(n):MEe(n));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},FEe=dr([PEe,kl],Pee),UEe=dr(OEe,FEe,REe,(t,e,r)=>CC(t,r,e)),aM=(t,e,r,n,i,a,o,c)=>{if(r!=null)return r;var u=o==="vertical"&&c==="xAxis"||o==="horizontal"&&c==="yAxis",l=u?CC(n,a,i):CC(a,i);return X_e(e,l,t.allowDataOverflow)},$Ee=dr([$c,nM,iM,TEe,NEe,UEe,Ya,kl],aM,{memoizeOptions:{resultEqualityCheck:S5}}),HEe=[0,1],oM=(t,e,r,n,i,a,o)=>{if(!((t==null||r==null||r.length===0)&&o===void 0)){var{dataKey:c,type:u}=t,l=mg(e,a);if(l&&c==null){var d;return yJ(0,(d=r?.length)!==null&&d!==void 0?d:0)}return u==="category"?LEe(n,t,l):i==="expand"?HEe:o}},lM=dr([$c,Ya,eM,T5,Z_,kl,$Ee],oM);function QEe(t){return t in Cw}var Oee=(t,e,r)=>{if(t!=null){var{scale:n,type:i}=t;if(n==="auto")return i==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!e)?"point":i==="category"?"band":"linear";if(typeof n=="string"){var a="scale".concat(F_(n));return QEe(a)?a:"point"}}},rp=dr([$c,_ee,QD],Oee);function N5(t,e,r,n){if(!(r==null||n==null))return typeof t.scale=="function"?xQ(t.scale,r,n):xQ(e,r,n)}var cM=(t,e,r)=>{var n=rM(e);if(!(r!=="auto"&&r!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&lg(t))return rEe(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&lg(t))return nEe(t,e.tickCount,e.allowDecimals)}},uM=dr([lM,By,rp],cM),dM=(t,e,r,n)=>{if(n!=="angleAxis"&&t?.type==="number"&&lg(e)&&Array.isArray(r)&&r.length>0){var i,a,o=e[0],c=(i=r[0])!==null&&i!==void 0?i:0,u=e[1],l=(a=r[r.length-1])!==null&&a!==void 0?a:0;return[Math.min(o,c),Math.max(u,l)]}return e},zEe=dr([$c,lM,uM,kl],dM),VEe=dr(T5,$c,(t,e)=>{if(!(!e||e.type!=="number")){var r=1/0,n=Array.from(cg(t.map(f=>f.value))).sort((f,m)=>f-m),i=n[0],a=n[n.length-1];if(i==null||a==null)return 1/0;var o=a-i;if(o===0)return 1/0;for(var c=0;c<n.length-1;c++){var u=n[c],l=n[c+1];if(!(u==null||l==null)){var d=l-u;r=Math.min(r,d)}}return r/o}}),Ree=dr(VEe,Ya,hee,Ku,(t,e,r,n,i)=>i,(t,e,r,n,i)=>{if(!Qa(t))return 0;var a=e==="vertical"?n.height:n.width;if(i==="gap")return t*a/2;if(i==="no-gap"){var o=ih(r,t*a),c=t*a/2;return c-o-(c-o)/a*o}return 0}),KEe=(t,e,r)=>{var n=yg(t,e);return n==null||typeof n.padding!="string"?0:Ree(t,"xAxis",e,r,n.padding)},GEe=(t,e,r)=>{var n=xg(t,e);return n==null||typeof n.padding!="string"?0:Ree(t,"yAxis",e,r,n.padding)},WEe=dr(yg,KEe,(t,e)=>{var r,n;if(t==null)return{left:0,right:0};var{padding:i}=t;return typeof i=="string"?{left:e,right:e}:{left:((r=i.left)!==null&&r!==void 0?r:0)+e,right:((n=i.right)!==null&&n!==void 0?n:0)+e}}),YEe=dr(xg,GEe,(t,e)=>{var r,n;if(t==null)return{top:0,bottom:0};var{padding:i}=t;return typeof i=="string"?{top:e,bottom:e}:{top:((r=i.top)!==null&&r!==void 0?r:0)+e,bottom:((n=i.bottom)!==null&&n!==void 0?n:0)+e}}),qEe=dr([Ku,WEe,u5,c5,(t,e,r)=>r],(t,e,r,n,i)=>{var{padding:a}=n;return i?[a.left,r.width-a.right]:[t.left+e.left,t.left+t.width-e.right]}),XEe=dr([Ku,Ya,YEe,u5,c5,(t,e,r)=>r],(t,e,r,n,i,a)=>{var{padding:o}=i;return a?[n.height-o.bottom,o.top]:e==="horizontal"?[t.top+t.height-r.bottom,t.top+r.top]:[t.top+r.top,t.top+t.height-r.bottom]}),sE=(t,e,r,n)=>{var i;switch(e){case"xAxis":return qEe(t,r,n);case"yAxis":return XEe(t,r,n);case"zAxis":return(i=WD(t,r))===null||i===void 0?void 0:i.range;case"angleAxis":return gee(t);case"radiusAxis":return vee(t,r);default:return}},Dee=dr([$c,sE],w5),ZEe=dr([rp,zEe],xee),k5=dr([$c,rp,ZEe,Dee],N5);dr([nE,C5,kl],CEe);function Mee(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var L5=(t,e)=>e,I5=(t,e,r)=>r,JEe=dr(o5,L5,I5,(t,e,r)=>t.filter(n=>n.orientation===e).filter(n=>n.mirror===r).sort(Mee)),eSe=dr(l5,L5,I5,(t,e,r)=>t.filter(n=>n.orientation===e).filter(n=>n.mirror===r).sort(Mee)),Fee=(t,e)=>({width:t.width,height:e.height}),tSe=(t,e)=>{var r=typeof e.width=="number"?e.width:H_;return{width:r,height:t.height}},Uee=dr(Ku,yg,Fee),rSe=(t,e,r)=>{switch(e){case"top":return t.top;case"bottom":return r-t.bottom;default:return 0}},nSe=(t,e,r)=>{switch(e){case"left":return t.left;case"right":return r-t.right;default:return 0}},iSe=dr(pg,Ku,JEe,L5,I5,(t,e,r,n,i)=>{var a={},o;return r.forEach(c=>{var u=Fee(e,c);o==null&&(o=rSe(e,n,t));var l=n==="top"&&!i||n==="bottom"&&i;a[c.id]=o-Number(l)*u.height,o+=(l?-1:1)*u.height}),a}),sSe=dr(Ag,Ku,eSe,L5,I5,(t,e,r,n,i)=>{var a={},o;return r.forEach(c=>{var u=tSe(e,c);o==null&&(o=nSe(e,n,t));var l=n==="left"&&!i||n==="right"&&i;a[c.id]=o-Number(l)*u.width,o+=(l?-1:1)*u.width}),a}),aSe=(t,e)=>{var r=yg(t,e);if(r!=null)return iSe(t,r.orientation,r.mirror)},oSe=dr([Ku,yg,aSe,(t,e)=>e],(t,e,r,n)=>{if(e!=null){var i=r?.[n];return i==null?{x:t.left,y:0}:{x:t.left,y:i}}}),lSe=(t,e)=>{var r=xg(t,e);if(r!=null)return sSe(t,r.orientation,r.mirror)},cSe=dr([Ku,xg,lSe,(t,e)=>e],(t,e,r,n)=>{if(e!=null){var i=r?.[n];return i==null?{x:0,y:t.top}:{x:i,y:t.top}}}),$ee=dr(Ku,xg,(t,e)=>{var r=typeof e.width=="number"?e.width:H_;return{width:r,height:t.height}}),_Q=(t,e,r)=>{switch(e){case"xAxis":return Uee(t,r).width;case"yAxis":return $ee(t,r).height;default:return}},Hee=(t,e,r,n)=>{if(r!=null){var{allowDuplicatedCategory:i,type:a,dataKey:o}=r,c=mg(t,n),u=e.map(l=>l.value);if(o&&c&&a==="category"&&i&&YX(u))return u}},aE=dr([Ya,T5,$c,kl],Hee),hM=(t,e,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:i,scale:a}=r,o=mg(t,n);if(o&&(i==="number"||a!=="auto"))return e.map(c=>c.value)}},fM=dr([Ya,T5,By,kl],hM),EQ=dr([Ya,xEe,rp,k5,aE,fM,sE,uM,kl],(t,e,r,n,i,a,o,c,u)=>{if(e!=null){var l=mg(t,u);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:u,categoricalDomain:a,duplicateDomain:i,isCategorical:l,niceTicks:c,range:o,realScaleType:r,scale:n}}}),Qee=(t,e,r,n,i,a,o,c,u)=>{if(!(e==null||n==null)){var l=mg(t,u),{type:d,ticks:f,tickCount:m}=e,p=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,g=d==="category"&&n.bandwidth?n.bandwidth()/p:0;g=u==="angleAxis"&&a!=null&&a.length>=2?pd(a[0]-a[1])*2*g:g;var y=f||i;return y?y.map((x,w)=>{var _=o?o.indexOf(x):x,E=n.map(_);return Qa(E)?{index:w,coordinate:E+g,value:x,offset:g}:null}).filter(Uh):l&&c?c.map((x,w)=>{var _=n.map(x);return Qa(_)?{coordinate:_+g,value:x,index:w,offset:g}:null}).filter(Uh):n.ticks?n.ticks(m).map((x,w)=>{var _=n.map(x);return Qa(_)?{coordinate:_+g,value:x,index:w,offset:g}:null}).filter(Uh):n.domain().map((x,w)=>{var _=n.map(x);return Qa(_)?{coordinate:_+g,value:o?o[x]:x,index:w,offset:g}:null}).filter(Uh)}},zee=dr([Ya,By,rp,k5,uM,sE,aE,fM,kl],Qee),Vee=(t,e,r,n,i,a,o)=>{if(!(e==null||r==null||n==null||n[0]===n[1])){var c=mg(t,o),{tickCount:u}=e,l=0;return l=o==="angleAxis"&&n?.length>=2?pd(n[0]-n[1])*2*l:l,c&&a?a.map((d,f)=>{var m=r.map(d);return Qa(m)?{coordinate:m+l,value:d,index:f,offset:l}:null}).filter(Uh):r.ticks?r.ticks(u).map((d,f)=>{var m=r.map(d);return Qa(m)?{coordinate:m+l,value:d,index:f,offset:l}:null}).filter(Uh):r.domain().map((d,f)=>{var m=r.map(d);return Qa(m)?{coordinate:m+l,value:i?i[d]:d,index:f,offset:l}:null}).filter(Uh)}},Zb=dr([Ya,By,k5,sE,aE,fM,kl],Vee),Jb=dr($c,k5,(t,e)=>{if(!(t==null||e==null))return TC(TC({},t),{},{scale:e})}),uSe=dr([$c,rp,lM,Dee],N5);dr((t,e,r)=>WD(t,r),uSe,(t,e)=>{if(!(t==null||e==null))return TC(TC({},t),{},{scale:e})});var dSe=dr([Ya,o5,l5],(t,e,r)=>{switch(t){case"horizontal":return e.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),Kee=t=>t.options.defaultTooltipEventType,Gee=t=>t.options.validateTooltipEventTypes;function Wee(t,e,r){if(t==null)return e;var n=t?"axis":"item";return r==null?e:r.includes(n)?n:e}function mM(t,e){var r=Kee(t),n=Gee(t);return Wee(e,r,n)}function hSe(t){return si(e=>mM(e,t))}var Yee=(t,e)=>{var r,n=Number(e);if(!(YA(n)||e==null))return n>=0?t==null||(r=t[n])===null||r===void 0?void 0:r.value:void 0},fSe=t=>t.tooltip.settings,_0={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},mSe={itemInteraction:{click:_0,hover:_0},axisInteraction:{click:_0,hover:_0},keyboardInteraction:_0,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},qee=Wh({name:"tooltip",initialState:mSe,reducers:{addTooltipEntrySettings:{reducer(t,e){t.tooltipItemPayloads.push(e.payload)},prepare:Xl()},replaceTooltipEntrySettings:{reducer(t,e){var{prev:r,next:n}=e.payload,i=$m(t).tooltipItemPayloads.indexOf(r);i>-1&&(t.tooltipItemPayloads[i]=n)},prepare:Xl()},removeTooltipEntrySettings:{reducer(t,e){var r=$m(t).tooltipItemPayloads.indexOf(e.payload);r>-1&&t.tooltipItemPayloads.splice(r,1)},prepare:Xl()},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate}}}),{addTooltipEntrySettings:ASe,replaceTooltipEntrySettings:pSe,removeTooltipEntrySettings:gSe,setTooltipSettingsState:vSe,setActiveMouseOverItemIndex:Xee,mouseLeaveItem:ySe,mouseLeaveChart:Zee,setActiveClickItemIndex:xSe,setMouseOverAxisIndex:Jee,setMouseClickAxisIndex:bSe,setSyncInteraction:LP,setKeyboardInteraction:IP}=qee.actions,wSe=qee.reducer;function SQ(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function aS(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?SQ(Object(r),!0).forEach(function(n){_Se(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):SQ(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function _Se(t,e,r){return(e=ESe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ESe(t){var e=SSe(t,"string");return typeof e=="symbol"?e:e+""}function SSe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function jSe(t,e,r){return e==="axis"?r==="click"?t.axisInteraction.click:t.axisInteraction.hover:r==="click"?t.itemInteraction.click:t.itemInteraction.hover}function TSe(t){return t.index!=null}var ete=(t,e,r,n)=>{if(e==null)return _0;var i=jSe(t,e,r);if(i==null)return _0;if(i.active)return i;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var a=t.settings.active===!0;if(TSe(i)){if(a)return aS(aS({},i),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n,graphicalItemId:void 0};return aS(aS({},_0),{},{coordinate:i.coordinate})};function CSe(t){if(typeof t=="number")return Number.isFinite(t)?t:void 0;if(t instanceof Date){var e=t.valueOf();return Number.isFinite(e)?e:void 0}var r=Number(t);return Number.isFinite(r)?r:void 0}function NSe(t,e){var r=CSe(t),n=e[0],i=e[1];if(r===void 0)return!1;var a=Math.min(n,i),o=Math.max(n,i);return r>=a&&r<=o}function kSe(t,e,r){if(r==null||e==null)return!0;var n=dl(t,e);return n==null||!lg(r)?!0:NSe(n,r)}var AM=(t,e,r,n)=>{var i=t?.index;if(i==null)return null;var a=Number(i);if(!Qa(a))return i;var o=0,c=1/0;e.length>0&&(c=e.length-1);var u=Math.max(o,Math.min(a,c)),l=e[u];return l==null||kSe(l,r,n)?String(u):null},tte=(t,e,r,n,i,a,o)=>{if(a!=null){var c=o[0],u=c?.getPosition(a);if(u!=null)return u;var l=i?.[Number(a)];if(l)return r==="horizontal"?{x:l.coordinate,y:(n.top+e)/2}:{x:(n.left+t)/2,y:l.coordinate}}},rte=(t,e,r,n)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var i;if(r==="hover"?i=t.itemInteraction.hover.graphicalItemId:i=t.itemInteraction.click.graphicalItemId,i==null&&n!=null){var a=t.tooltipItemPayloads[0];return a!=null?[a]:[]}return t.tooltipItemPayloads.filter(o=>{var c;return((c=o.settings)===null||c===void 0?void 0:c.graphicalItemId)===i})},nte=t=>t.options.tooltipPayloadSearcher,j1=t=>t.tooltip;function jQ(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function TQ(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?jQ(Object(r),!0).forEach(function(n){LSe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):jQ(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function LSe(t,e,r){return(e=ISe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ISe(t){var e=BSe(t,"string");return typeof e=="symbol"?e:e+""}function BSe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function PSe(t,e){return t??e}var ite=(t,e,r,n,i,a,o)=>{if(!(e==null||a==null)){var{chartData:c,computedData:u,dataStartIndex:l,dataEndIndex:d}=r,f=[];return t.reduce((m,p)=>{var g,{dataDefinedOnItem:y,settings:x}=p,w=PSe(y,c),_=Array.isArray(w)?$Z(w,l,d):w,E=(g=x?.dataKey)!==null&&g!==void 0?g:n,N=x?.nameKey,C;if(n&&Array.isArray(_)&&!Array.isArray(_[0])&&o==="axis"?C=Ave(_,n,i):C=a(_,e,u,N),Array.isArray(C))C.forEach(D=>{var U=TQ(TQ({},x),{},{name:D.name,unit:D.unit,color:void 0,fill:void 0});m.push(S9({tooltipEntrySettings:U,dataKey:D.dataKey,payload:D.payload,value:dl(D.payload,D.dataKey),name:D.name}))});else{var I;m.push(S9({tooltipEntrySettings:x,dataKey:E,payload:C,value:dl(C,E),name:(I=dl(C,N))!==null&&I!==void 0?I:x?.name}))}return m},f)}},pM=dr([Wu,_ee,QD],Oee),OSe=dr([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),RSe=dr([yd,E1],YD),T1=dr([OSe,Wu,RSe],XD,{memoizeOptions:{resultEqualityCheck:j5}}),DSe=dr([T1],t=>t.filter(E5)),MSe=dr([T1],ZD,{memoizeOptions:{resultEqualityCheck:j5}}),C1=dr([MSe,vg],JD),FSe=dr([DSe,vg,Wu],yee),gM=dr([C1,Wu,T1],tM),ste=dr([Wu],rM),USe=dr([Wu],t=>t.allowDataOverflow),ate=dr([ste,USe],eee),$Se=dr([T1],t=>t.filter(E5)),HSe=dr([FSe,$Se,Z_,fee],Tee),QSe=dr([HSe,vg,yd,ate],Cee),zSe=dr([T1],See),VSe=dr([C1,Wu,zSe,C5,yd],sM,{memoizeOptions:{resultEqualityCheck:S5}}),KSe=dr([Nee,yd,E1],S1),GSe=dr([KSe,yd],Iee),WSe=dr([kee,yd,E1],S1),YSe=dr([WSe,yd],Bee),qSe=dr([Lee,yd,E1],S1),XSe=dr([qSe,yd],Pee),ZSe=dr([GSe,XSe,YSe],CC),JSe=dr([Wu,ste,ate,QSe,VSe,ZSe,Ya,yd],aM),oE=dr([Wu,Ya,C1,gM,Z_,yd,JSe],oM),eje=dr([oE,Wu,pM],cM),tje=dr([Wu,oE,eje,yd],dM),ote=t=>{var e=yd(t),r=E1(t),n=!1;return sE(t,e,r,n)},lte=dr([Wu,ote],w5),cte=dr([Wu,pM,tje,lte],N5),rje=dr([Ya,gM,Wu,yd],Hee),nje=dr([Ya,gM,Wu,yd],hM),ije=(t,e,r,n,i,a,o,c)=>{if(e){var{type:u}=e,l=mg(t,c);if(n){var d=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,f=u==="category"&&n.bandwidth?n.bandwidth()/d:0;return f=c==="angleAxis"&&i!=null&&i?.length>=2?pd(i[0]-i[1])*2*f:f,l&&o?o.map((m,p)=>{var g=n.map(m);return Qa(g)?{coordinate:g+f,value:m,index:p,offset:f}:null}).filter(Uh):n.domain().map((m,p)=>{var g=n.map(m);return Qa(g)?{coordinate:g+f,value:a?a[m]:m,index:p,offset:f}:null}).filter(Uh)}}},bg=dr([Ya,Wu,pM,cte,ote,rje,nje,yd],ije),vM=dr([Kee,Gee,fSe],(t,e,r)=>Wee(r.shared,t,e)),ute=t=>t.tooltip.settings.trigger,yM=t=>t.tooltip.settings.defaultIndex,lE=dr([j1,vM,ute,yM],ete),V0=dr([lE,C1,iE,oE],AM),dte=dr([bg,V0],Yee),xM=dr([lE],t=>{if(t)return t.dataKey}),sje=dr([lE],t=>{if(t)return t.graphicalItemId}),hte=dr([j1,vM,ute,yM],rte),aje=dr([Ag,pg,Ya,Ku,bg,yM,hte],tte),oje=dr([lE,aje],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),lje=dr([lE],t=>{var e;return(e=t?.active)!==null&&e!==void 0?e:!1}),cje=dr([hte,V0,vg,iE,dte,nte,vM],ite),uje=dr([cje],t=>{if(t!=null){var e=t.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(e))}});function CQ(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function NQ(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?CQ(Object(r),!0).forEach(function(n){dje(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):CQ(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function dje(t,e,r){return(e=hje(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function hje(t){var e=fje(t,"string");return typeof e=="symbol"?e:e+""}function fje(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var mje=()=>si(Wu),Aje=()=>{var t=mje(),e=si(bg),r=si(cte);return Kb(!t||!r?void 0:NQ(NQ({},t),{},{scale:r}),e)};function kQ(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function ix(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?kQ(Object(r),!0).forEach(function(n){pje(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):kQ(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function pje(t,e,r){return(e=gje(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function gje(t){var e=vje(t,"string");return typeof e=="symbol"?e:e+""}function vje(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var yje=(t,e,r,n)=>{var i=e.find(a=>a&&a.index===r);if(i){if(t==="horizontal")return{x:i.coordinate,y:n.chartY};if(t==="vertical")return{x:n.chartX,y:i.coordinate}}return{x:0,y:0}},xje=(t,e,r,n)=>{var i=e.find(l=>l&&l.index===r);if(i){if(t==="centric"){var a=i.coordinate,{radius:o}=n;return ix(ix(ix({},n),rl(n.cx,n.cy,o,a)),{},{angle:a,radius:o})}var c=i.coordinate,{angle:u}=n;return ix(ix(ix({},n),rl(n.cx,n.cy,c,u)),{},{angle:u,radius:c})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function bje(t,e){var{chartX:r,chartY:n}=t;return r>=e.left&&r<=e.left+e.width&&n>=e.top&&n<=e.top+e.height}var fte=(t,e,r,n,i)=>{var a,o=(a=e?.length)!==null&&a!==void 0?a:0;if(o<=1||t==null)return 0;if(n==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var c=0;c<o;c++){var u,l,d,f,m,p=c>0?(u=r[c-1])===null||u===void 0?void 0:u.coordinate:(l=r[o-1])===null||l===void 0?void 0:l.coordinate,g=(d=r[c])===null||d===void 0?void 0:d.coordinate,y=c>=o-1?(f=r[0])===null||f===void 0?void 0:f.coordinate:(m=r[c+1])===null||m===void 0?void 0:m.coordinate,x=void 0;if(!(p==null||g==null||y==null))if(pd(g-p)!==pd(y-g)){var w=[];if(pd(y-g)===pd(i[1]-i[0])){x=y;var _=g+i[1]-i[0];w[0]=Math.min(_,(_+p)/2),w[1]=Math.max(_,(_+p)/2)}else{x=p;var E=y+i[1]-i[0];w[0]=Math.min(g,(E+g)/2),w[1]=Math.max(g,(E+g)/2)}var N=[Math.min(g,(x+g)/2),Math.max(g,(x+g)/2)];if(t>N[0]&&t<=N[1]||t>=w[0]&&t<=w[1]){var C;return(C=r[c])===null||C===void 0?void 0:C.index}}else{var I=Math.min(p,y),D=Math.max(p,y);if(t>(I+g)/2&&t<=(D+g)/2){var U;return(U=r[c])===null||U===void 0?void 0:U.index}}}else if(e)for(var G=0;G<o;G++){var q=e[G];if(q!=null){var J=e[G+1],de=e[G-1];if(G===0&&J!=null&&t<=(q.coordinate+J.coordinate)/2||G===o-1&&de!=null&&t>(q.coordinate+de.coordinate)/2||G>0&&G<o-1&&de!=null&&J!=null&&t>(q.coordinate+de.coordinate)/2&&t<=(q.coordinate+J.coordinate)/2)return q.index}}return-1},wje=()=>si(QD),bM=(t,e)=>e,mte=(t,e,r)=>r,wM=(t,e,r,n)=>n,_je=dr(bg,t=>XN(t,e=>e.coordinate)),_M=dr([j1,bM,mte,wM],ete),EM=dr([_M,C1,iE,oE],AM),Eje=(t,e,r)=>{if(e!=null){var n=j1(t);return e==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},Ate=dr([j1,bM,mte,wM],rte),NC=dr([Ag,pg,Ya,Ku,bg,wM,Ate],tte),Sje=dr([_M,NC],(t,e)=>{var r;return(r=t.coordinate)!==null&&r!==void 0?r:e}),pte=dr([bg,EM],Yee),jje=dr([Ate,EM,vg,iE,pte,nte,bM],ite),Tje=dr([_M,EM],(t,e)=>({isActive:t.active&&e!=null,activeIndex:e})),Cje=(t,e,r,n,i,a,o)=>{if(!(!t||!r||!n||!i)&&bje(t,o)){var c=Wxe(t,e),u=fte(c,a,i,r,n),l=yje(e,i,u,t);return{activeIndex:String(u),activeCoordinate:l}}},Nje=(t,e,r,n,i,a,o)=>{if(!(!t||!n||!i||!a||!r)){var c=hwe(t,r);if(c){var u=Yxe(c,e),l=fte(u,o,a,n,i),d=xje(e,a,l,c);return{activeIndex:String(l),activeCoordinate:d}}}},kje=(t,e,r,n,i,a,o,c)=>{if(!(!t||!e||!n||!i||!a))return e==="horizontal"||e==="vertical"?Cje(t,e,n,i,a,o,c):Nje(t,e,r,n,i,a,o)},Lje=dr(t=>t.zIndex.zIndexMap,(t,e)=>e,(t,e,r)=>r,(t,e,r)=>{if(e!=null){var n=t[e];if(n!=null)return r?n.panoramaElement:n.element}}),Ije=dr(t=>t.zIndex.zIndexMap,t=>{var e=Object.keys(t).map(n=>parseInt(n,10)).concat(Object.values(Oc)),r=Array.from(new Set(e));return r.sort((n,i)=>n-i)},{memoizeOptions:{resultEqualityCheck:mEe}});function LQ(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function IQ(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?LQ(Object(r),!0).forEach(function(n){Bje(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):LQ(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Bje(t,e,r){return(e=Pje(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Pje(t){var e=Oje(t,"string");return typeof e=="symbol"?e:e+""}function Oje(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Rje={},Dje={zIndexMap:Object.values(Oc).reduce((t,e)=>IQ(IQ({},t),{},{[e]:{element:void 0,panoramaElement:void 0,consumers:0}}),Rje)},Mje=new Set(Object.values(Oc));function Fje(t){return Mje.has(t)}var gte=Wh({name:"zIndex",initialState:Dje,reducers:{registerZIndexPortal:{reducer:(t,e)=>{var{zIndex:r}=e.payload;t.zIndexMap[r]?t.zIndexMap[r].consumers+=1:t.zIndexMap[r]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:Xl()},unregisterZIndexPortal:{reducer:(t,e)=>{var{zIndex:r}=e.payload;t.zIndexMap[r]&&(t.zIndexMap[r].consumers-=1,t.zIndexMap[r].consumers<=0&&!Fje(r)&&delete t.zIndexMap[r])},prepare:Xl()},registerZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:r,element:n,isPanorama:i}=e.payload;t.zIndexMap[r]?i?t.zIndexMap[r].panoramaElement=n:t.zIndexMap[r].element=n:t.zIndexMap[r]={consumers:0,element:i?void 0:n,panoramaElement:i?n:void 0}},prepare:Xl()},unregisterZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:r}=e.payload;t.zIndexMap[r]&&(e.payload.isPanorama?t.zIndexMap[r].panoramaElement=void 0:t.zIndexMap[r].element=void 0)},prepare:Xl()}}}),{registerZIndexPortal:Uje,unregisterZIndexPortal:$je,registerZIndexPortalElement:Hje,unregisterZIndexPortalElement:Qje}=gte.actions,zje=gte.reducer;function ah(t){var{zIndex:e,children:r}=t,n=Tbe(),i=n&&e!==void 0&&e!==0,a=sh(),o=Al();T.useLayoutEffect(()=>i?(o(Uje({zIndex:e})),()=>{o($je({zIndex:e}))}):X0,[o,e,i]);var c=si(u=>Lje(u,e,a));return i?c?C0.createPortal(r,c):null:r}function BP(){return BP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},BP.apply(null,arguments)}function BQ(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function oS(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?BQ(Object(r),!0).forEach(function(n){Vje(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):BQ(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Vje(t,e,r){return(e=Kje(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Kje(t){var e=Gje(t,"string");return typeof e=="symbol"?e:e+""}function Gje(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Wje(t){var{cursor:e,cursorComp:r,cursorProps:n}=t;return T.isValidElement(e)?T.cloneElement(e,n):T.createElement(r,n)}function Yje(t){var e,{coordinate:r,payload:n,index:i,offset:a,tooltipAxisBandSize:o,layout:c,cursor:u,tooltipEventType:l,chartName:d}=t,f=r,m=n,p=i;if(!u||!f||d!=="ScatterChart"&&l!=="axis")return null;var g,y,x;if(d==="ScatterChart")g=f,y=j1e,x=Oc.cursorLine;else if(d==="BarChart")g=T1e(c,f,a,o),y=mJ,x=Oc.cursorRectangle;else if(c==="radial"&&XX(f)){var{cx:w,cy:_,radius:E,startAngle:N,endAngle:C}=pJ(f);g={cx:w,cy:_,startAngle:N,endAngle:C,innerRadius:E,outerRadius:E},y=vJ,x=Oc.cursorLine}else g={points:pwe(c,f,a)},y=gD,x=Oc.cursorLine;var I=typeof u=="object"&&"className"in u?u.className:void 0,D=oS(oS(oS(oS({stroke:"#ccc",pointerEvents:"none"},a),g),gy(u)),{},{payload:m,payloadIndex:p,className:ja("recharts-tooltip-cursor",I)});return T.createElement(ah,{zIndex:(e=t.zIndex)!==null&&e!==void 0?e:x},T.createElement(Wje,{cursor:u,cursorComp:y,cursorProps:D}))}function qje(t){var e=Aje(),r=qZ(),n=y1(),i=wje();return e==null||r==null||n==null||i==null?null:T.createElement(Yje,BP({},t,{offset:r,layout:n,tooltipAxisBandSize:e,chartName:i}))}var vte=T.createContext(null),Xje=()=>T.useContext(vte),RL={exports:{}},PQ;function Zje(){return PQ||(PQ=1,(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(u,l,d){this.fn=u,this.context=l,this.once=d||!1}function a(u,l,d,f,m){if(typeof d!="function")throw new TypeError("The listener must be a function");var p=new i(d,f||u,m),g=r?r+l:l;return u._events[g]?u._events[g].fn?u._events[g]=[u._events[g],p]:u._events[g].push(p):(u._events[g]=p,u._eventsCount++),u}function o(u,l){--u._eventsCount===0?u._events=new n:delete u._events[l]}function c(){this._events=new n,this._eventsCount=0}c.prototype.eventNames=function(){var l=[],d,f;if(this._eventsCount===0)return l;for(f in d=this._events)e.call(d,f)&&l.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(d)):l},c.prototype.listeners=function(l){var d=r?r+l:l,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var m=0,p=f.length,g=new Array(p);m<p;m++)g[m]=f[m].fn;return g},c.prototype.listenerCount=function(l){var d=r?r+l:l,f=this._events[d];return f?f.fn?1:f.length:0},c.prototype.emit=function(l,d,f,m,p,g){var y=r?r+l:l;if(!this._events[y])return!1;var x=this._events[y],w=arguments.length,_,E;if(x.fn){switch(x.once&&this.removeListener(l,x.fn,void 0,!0),w){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,d),!0;case 3:return x.fn.call(x.context,d,f),!0;case 4:return x.fn.call(x.context,d,f,m),!0;case 5:return x.fn.call(x.context,d,f,m,p),!0;case 6:return x.fn.call(x.context,d,f,m,p,g),!0}for(E=1,_=new Array(w-1);E<w;E++)_[E-1]=arguments[E];x.fn.apply(x.context,_)}else{var N=x.length,C;for(E=0;E<N;E++)switch(x[E].once&&this.removeListener(l,x[E].fn,void 0,!0),w){case 1:x[E].fn.call(x[E].context);break;case 2:x[E].fn.call(x[E].context,d);break;case 3:x[E].fn.call(x[E].context,d,f);break;case 4:x[E].fn.call(x[E].context,d,f,m);break;default:if(!_)for(C=1,_=new Array(w-1);C<w;C++)_[C-1]=arguments[C];x[E].fn.apply(x[E].context,_)}}return!0},c.prototype.on=function(l,d,f){return a(this,l,d,f,!1)},c.prototype.once=function(l,d,f){return a(this,l,d,f,!0)},c.prototype.removeListener=function(l,d,f,m){var p=r?r+l:l;if(!this._events[p])return this;if(!d)return o(this,p),this;var g=this._events[p];if(g.fn)g.fn===d&&(!m||g.once)&&(!f||g.context===f)&&o(this,p);else{for(var y=0,x=[],w=g.length;y<w;y++)(g[y].fn!==d||m&&!g[y].once||f&&g[y].context!==f)&&x.push(g[y]);x.length?this._events[p]=x.length===1?x[0]:x:o(this,p)}return this},c.prototype.removeAllListeners=function(l){var d;return l?(d=r?r+l:l,this._events[d]&&o(this,d)):(this._events=new n,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=r,c.EventEmitter=c,t.exports=c})(RL)),RL.exports}var Jje=Zje();const eTe=om(Jje);var Y2=new eTe,PP="recharts.syncEvent.tooltip",OQ="recharts.syncEvent.brush",SM=(t,e)=>{if(e&&Array.isArray(t)){var r=Number.parseInt(e,10);if(!YA(r))return t[r]}},tTe={chartName:"",tooltipPayloadSearcher:()=>{},eventEmitter:void 0,defaultTooltipEventType:"axis"},yte=Wh({name:"options",initialState:tTe,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),rTe=yte.reducer,{createEventEmitter:nTe}=yte.actions;function iTe(t){return t.tooltip.syncInteraction}var sTe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},xte=Wh({name:"chartData",initialState:sTe,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:r,endIndex:n}=e.payload;r!=null&&(t.dataStartIndex=r),n!=null&&(t.dataEndIndex=n)}}}),{setChartData:RQ,setDataStartEndIndexes:aTe,setComputedData:UXe}=xte.actions,oTe=xte.reducer,lTe=["x","y"];function DQ(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function sx(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?DQ(Object(r),!0).forEach(function(n){cTe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):DQ(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function cTe(t,e,r){return(e=uTe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function uTe(t){var e=dTe(t,"string");return typeof e=="symbol"?e:e+""}function dTe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function hTe(t,e){if(t==null)return{};var r,n,i=fTe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function fTe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function mTe(){var t=si(zD),e=si(VD),r=Al(),n=si(mee),i=si(bg),a=y1(),o=d5(),c=si(u=>u.rootProps.className);T.useEffect(()=>{if(t==null)return X0;var u=(l,d,f)=>{if(e!==f&&t===l){if(n==="index"){var m;if(o&&d!==null&&d!==void 0&&(m=d.payload)!==null&&m!==void 0&&m.coordinate&&d.payload.sourceViewBox){var p=d.payload.coordinate,{x:g,y}=p,x=hTe(p,lTe),{x:w,y:_,width:E,height:N}=d.payload.sourceViewBox,C=sx(sx({},x),{},{x:o.x+(E?(g-w)/E:0)*o.width,y:o.y+(N?(y-_)/N:0)*o.height});r(sx(sx({},d),{},{payload:sx(sx({},d.payload),{},{coordinate:C})}))}else r(d);return}if(i!=null){var I;if(typeof n=="function"){var D={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},U=n(i,D);I=i[U]}else n==="value"&&(I=i.find(ne=>String(ne.value)===d.payload.label));var{coordinate:G}=d.payload;if(I==null||d.payload.active===!1||G==null||o==null){r(LP({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:q,y:J}=G,de=Math.min(q,o.x+o.width),xe=Math.min(J,o.y+o.height),we={x:a==="horizontal"?I.coordinate:de,y:a==="horizontal"?xe:I.coordinate},ve=LP({active:d.payload.active,coordinate:we,dataKey:d.payload.dataKey,index:String(I.index),label:d.payload.label,sourceViewBox:d.payload.sourceViewBox,graphicalItemId:d.payload.graphicalItemId});r(ve)}}};return Y2.on(PP,u),()=>{Y2.off(PP,u)}},[c,r,e,t,n,i,a,o])}function ATe(){var t=si(zD),e=si(VD),r=Al();T.useEffect(()=>{if(t==null)return X0;var n=(i,a,o)=>{e!==o&&t===i&&r(aTe(a))};return Y2.on(OQ,n),()=>{Y2.off(OQ,n)}},[r,e,t])}function pTe(){var t=Al();T.useEffect(()=>{t(nTe())},[t]),mTe(),ATe()}function gTe(t,e,r,n,i,a){var o=si(p=>Eje(p,t,e)),c=si(VD),u=si(zD),l=si(mee),d=si(iTe),f=d?.active,m=d5();T.useEffect(()=>{if(!f&&u!=null&&c!=null){var p=LP({active:a,coordinate:r,dataKey:o,index:i,label:typeof n=="number"?String(n):n,sourceViewBox:m,graphicalItemId:void 0});Y2.emit(PP,u,p,c)}},[f,r,o,i,n,c,u,l,a,m])}function MQ(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function FQ(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?MQ(Object(r),!0).forEach(function(n){vTe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):MQ(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function vTe(t,e,r){return(e=yTe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function yTe(t){var e=xTe(t,"string");return typeof e=="symbol"?e:e+""}function xTe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function bTe(t){return t.dataKey}function wTe(t,e){return T.isValidElement(t)?T.cloneElement(t,e):typeof t=="function"?T.createElement(t,e):T.createElement(s1e,e)}var UQ=[],_Te={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function ETe(t){var e,r,n=Uc(t,_Te),{active:i,allowEscapeViewBox:a,animationDuration:o,animationEasing:c,content:u,filterNull:l,isAnimationActive:d,offset:f,payloadUniqBy:m,position:p,reverseDirection:g,useTranslate3d:y,wrapperStyle:x,cursor:w,shared:_,trigger:E,defaultIndex:N,portal:C,axisId:I}=n,D=Al(),U=typeof N=="number"?String(N):N;T.useEffect(()=>{D(vSe({shared:_,trigger:E,axisId:I,active:i,defaultIndex:U}))},[D,_,E,I,i,U]);var G=d5(),q=cJ(),J=hSe(_),{activeIndex:de,isActive:xe}=(e=si(ft=>Tje(ft,J,E,U)))!==null&&e!==void 0?e:{},we=si(ft=>jje(ft,J,E,U)),ve=si(ft=>pte(ft,J,E,U)),ne=si(ft=>Sje(ft,J,E,U)),ae=we,oe=Xje(),Ie=(r=i??xe)!==null&&r!==void 0?r:!1,[Ce,be]=dZ([ae,Ie]),ue=J==="axis"?ve:void 0;gTe(J,E,ne,ue,de,Ie);var Pe=C??oe;if(Pe==null||G==null||J==null)return null;var Re=ae??UQ;Ie||(Re=UQ),l&&Re.length&&(Re=aZ(Re.filter(ft=>ft.value!=null&&(ft.hide!==!0||n.includeHidden)),m,bTe));var He=Re.length>0,Fe=T.createElement(h1e,{allowEscapeViewBox:a,animationDuration:o,animationEasing:c,isAnimationActive:d,active:Ie,coordinate:ne,hasPayload:He,offset:f,position:p,reverseDirection:g,useTranslate3d:y,viewBox:G,wrapperStyle:x,lastBoundingBox:Ce,innerRef:be,hasPortalFromProps:!!C},wTe(u,FQ(FQ({},n),{},{payload:Re,label:ue,active:Ie,activeIndex:de,coordinate:ne,accessibilityLayer:q})));return T.createElement(T.Fragment,null,C0.createPortal(Fe,Pe),Ie&&T.createElement(qje,{cursor:w,tooltipEventType:J,coordinate:ne,payload:Re,index:de}))}var e1=t=>null;e1.displayName="Cell";function STe(t,e,r){return(e=jTe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function jTe(t){var e=TTe(t,"string");return typeof e=="symbol"?e:e+""}function TTe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class CTe{constructor(e){STe(this,"cache",new Map),this.maxSize=e}get(e){var r=this.cache.get(e);return r!==void 0&&(this.cache.delete(e),this.cache.set(e,r)),r}set(e,r){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;n!=null&&this.cache.delete(n)}this.cache.set(e,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function $Q(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function NTe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?$Q(Object(r),!0).forEach(function(n){kTe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$Q(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function kTe(t,e,r){return(e=LTe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function LTe(t){var e=ITe(t,"string");return typeof e=="symbol"?e:e+""}function ITe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var BTe={cacheSize:2e3,enableCache:!0},bte=NTe({},BTe),HQ=new CTe(bte.cacheSize),PTe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},QQ="recharts_measurement_span";function OTe(t,e){var r=e.fontSize||"",n=e.fontFamily||"",i=e.fontWeight||"",a=e.fontStyle||"",o=e.letterSpacing||"",c=e.textTransform||"";return"".concat(t,"|").concat(r,"|").concat(n,"|").concat(i,"|").concat(a,"|").concat(o,"|").concat(c)}var zQ=(t,e)=>{try{var r=document.getElementById(QQ);r||(r=document.createElement("span"),r.setAttribute("id",QQ),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,PTe,e),r.textContent="".concat(t);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},c2=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||A5.isSsr)return{width:0,height:0};if(!bte.enableCache)return zQ(e,r);var n=OTe(e,r),i=HQ.get(n);if(i)return i;var a=zQ(e,r);return HQ.set(n,a),a},wte;function RTe(t,e,r){return(e=DTe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function DTe(t){var e=MTe(t,"string");return typeof e=="symbol"?e:e+""}function MTe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var VQ=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,KQ=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,FTe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,UTe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,$Te={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},HTe=["cm","mm","pt","pc","in","Q","px"];function QTe(t){return HTe.includes(t)}var ob="NaN";function zTe(t,e){return t*$Te[e]}class Fd{static parse(e){var r,[,n,i]=(r=UTe.exec(e))!==null&&r!==void 0?r:[];return n==null?Fd.NaN:new Fd(parseFloat(n),i??"")}constructor(e,r){this.num=e,this.unit=r,this.num=e,this.unit=r,YA(e)&&(this.unit=""),r!==""&&!FTe.test(r)&&(this.num=NaN,this.unit=""),QTe(r)&&(this.num=zTe(e,r),this.unit="px")}add(e){return this.unit!==e.unit?new Fd(NaN,""):new Fd(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new Fd(NaN,""):new Fd(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Fd(NaN,""):new Fd(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Fd(NaN,""):new Fd(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return YA(this.num)}}wte=Fd;RTe(Fd,"NaN",new wte(NaN,""));function _te(t){if(t==null||t.includes(ob))return ob;for(var e=t;e.includes("*")||e.includes("/");){var r,[,n,i,a]=(r=VQ.exec(e))!==null&&r!==void 0?r:[],o=Fd.parse(n??""),c=Fd.parse(a??""),u=i==="*"?o.multiply(c):o.divide(c);if(u.isNaN())return ob;e=e.replace(VQ,u.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var l,[,d,f,m]=(l=KQ.exec(e))!==null&&l!==void 0?l:[],p=Fd.parse(d??""),g=Fd.parse(m??""),y=f==="+"?p.add(g):p.subtract(g);if(y.isNaN())return ob;e=e.replace(KQ,y.toString())}return e}var GQ=/\(([^()]*)\)/;function VTe(t){for(var e=t,r;(r=GQ.exec(e))!=null;){var[,n]=r;e=e.replace(GQ,_te(n))}return e}function KTe(t){var e=t.replace(/\s+/g,"");return e=VTe(e),e=_te(e),e}function GTe(t){try{return KTe(t)}catch{return ob}}function DL(t){var e=GTe(t.slice(5,-1));return e===ob?"":e}var WTe=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],YTe=["dx","dy","angle","className","breakAll"];function OP(){return OP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},OP.apply(null,arguments)}function WQ(t,e){if(t==null)return{};var r,n,i=qTe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function qTe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Ete=/[ \f\n\r\t\v\u2028\u2029]+/,Ste=t=>{var{children:e,breakAll:r,style:n}=t;try{var i=[];ru(e)||(r?i=e.toString().split(""):i=e.toString().split(Ete));var a=i.map(c=>({word:c,width:c2(c,n).width})),o=r?0:c2("",n).width;return{wordsWithComputedWidth:a,spaceWidth:o}}catch{return null}};function XTe(t){return t==="start"||t==="middle"||t==="end"||t==="inherit"}var jte=(t,e,r,n)=>t.reduce((i,a)=>{var{word:o,width:c}=a,u=i[i.length-1];if(u&&c!=null&&(e==null||n||u.width+c+r<Number(e)))u.words.push(o),u.width+=c+r;else{var l={words:[o],width:c};i.push(l)}return i},[]),Tte=t=>t.reduce((e,r)=>e.width>r.width?e:r),ZTe="",YQ=(t,e,r,n,i,a,o,c)=>{var u=t.slice(0,e),l=Ste({breakAll:r,style:n,children:u+ZTe});if(!l)return[!1,[]];var d=jte(l.wordsWithComputedWidth,a,o,c),f=d.length>i||Tte(d).width>Number(a);return[f,d]},JTe=(t,e,r,n,i)=>{var{maxLines:a,children:o,style:c,breakAll:u}=t,l=Ei(a),d=String(o),f=jte(e,n,r,i);if(!l||i)return f;var m=f.length>a||Tte(f).width>Number(n);if(!m)return f;for(var p=0,g=d.length-1,y=0,x;p<=g&&y<=d.length-1;){var w=Math.floor((p+g)/2),_=w-1,[E,N]=YQ(d,_,u,c,a,n,r,i),[C]=YQ(d,w,u,c,a,n,r,i);if(!E&&!C&&(p=w+1),E&&C&&(g=w-1),!E&&C){x=N;break}y++}return x||f},qQ=t=>{var e=ru(t)?[]:t.toString().split(Ete);return[{words:e,width:void 0}]},eCe=t=>{var{width:e,scaleToFit:r,children:n,style:i,breakAll:a,maxLines:o}=t;if((e||r)&&!A5.isSsr){var c,u,l=Ste({breakAll:a,children:n,style:i});if(l){var{wordsWithComputedWidth:d,spaceWidth:f}=l;c=d,u=f}else return qQ(n);return JTe({breakAll:a,children:n,maxLines:o,style:i},c,u,e,!!r)}return qQ(n)},Cte="#808080",tCe={angle:0,breakAll:!1,capHeight:"0.71em",fill:Cte,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},cE=T.forwardRef((t,e)=>{var r=Uc(t,tCe),{x:n,y:i,lineHeight:a,capHeight:o,fill:c,scaleToFit:u,textAnchor:l,verticalAnchor:d}=r,f=WQ(r,WTe),m=T.useMemo(()=>eCe({breakAll:f.breakAll,children:f.children,maxLines:f.maxLines,scaleToFit:u,style:f.style,width:f.width}),[f.breakAll,f.children,f.maxLines,u,f.style,f.width]),{dx:p,dy:g,angle:y,className:x,breakAll:w}=f,_=WQ(f,YTe);if(!qA(n)||!qA(i)||m.length===0)return null;var E=Number(n)+(Ei(p)?p:0),N=Number(i)+(Ei(g)?g:0);if(!Qa(E)||!Qa(N))return null;var C;switch(d){case"start":C=DL("calc(".concat(o,")"));break;case"middle":C=DL("calc(".concat((m.length-1)/2," * -").concat(a," + (").concat(o," / 2))"));break;default:C=DL("calc(".concat(m.length-1," * -").concat(a,")"));break}var I=[],D=m[0];if(u&&D!=null){var U=D.width,{width:G}=f;I.push("scale(".concat(Ei(G)&&Ei(U)?G/U:1,")"))}return y&&I.push("rotate(".concat(y,", ").concat(E,", ").concat(N,")")),I.length&&(_.transform=I.join(" ")),T.createElement("text",OP({},zu(_),{ref:e,x:E,y:N,className:ja("recharts-text",x),textAnchor:l,fill:c.includes("url")?Cte:c}),m.map((q,J)=>{var de=q.words.join(w?"":" ");return T.createElement("tspan",{x:E,dy:J===0?C:a,key:"".concat(de,"-").concat(J)},de)}))});cE.displayName="Text";function XQ(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function hA(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?XQ(Object(r),!0).forEach(function(n){rCe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):XQ(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function rCe(t,e,r){return(e=nCe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function nCe(t){var e=iCe(t,"string");return typeof e=="symbol"?e:e+""}function iCe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var sCe=t=>{var{viewBox:e,position:r,offset:n=0,parentViewBox:i}=t,{x:a,y:o,height:c,upperWidth:u,lowerWidth:l}=dD(e),d=a,f=a+(u-l)/2,m=(d+f)/2,p=(u+l)/2,g=d+u/2,y=c>=0?1:-1,x=y*n,w=y>0?"end":"start",_=y>0?"start":"end",E=u>=0?1:-1,N=E*n,C=E>0?"end":"start",I=E>0?"start":"end",D=i;if(r==="top"){var U={x:d+u/2,y:o-x,horizontalAnchor:"middle",verticalAnchor:w};return D&&(U.height=Math.max(o-D.y,0),U.width=u),U}if(r==="bottom"){var G={x:f+l/2,y:o+c+x,horizontalAnchor:"middle",verticalAnchor:_};return D&&(G.height=Math.max(D.y+D.height-(o+c),0),G.width=l),G}if(r==="left"){var q={x:m-N,y:o+c/2,horizontalAnchor:C,verticalAnchor:"middle"};return D&&(q.width=Math.max(q.x-D.x,0),q.height=c),q}if(r==="right"){var J={x:m+p+N,y:o+c/2,horizontalAnchor:I,verticalAnchor:"middle"};return D&&(J.width=Math.max(D.x+D.width-J.x,0),J.height=c),J}var de=D?{width:p,height:c}:{};return r==="insideLeft"?hA({x:m+N,y:o+c/2,horizontalAnchor:I,verticalAnchor:"middle"},de):r==="insideRight"?hA({x:m+p-N,y:o+c/2,horizontalAnchor:C,verticalAnchor:"middle"},de):r==="insideTop"?hA({x:d+u/2,y:o+x,horizontalAnchor:"middle",verticalAnchor:_},de):r==="insideBottom"?hA({x:f+l/2,y:o+c-x,horizontalAnchor:"middle",verticalAnchor:w},de):r==="insideTopLeft"?hA({x:d+N,y:o+x,horizontalAnchor:I,verticalAnchor:_},de):r==="insideTopRight"?hA({x:d+u-N,y:o+x,horizontalAnchor:C,verticalAnchor:_},de):r==="insideBottomLeft"?hA({x:f+N,y:o+c-x,horizontalAnchor:I,verticalAnchor:w},de):r==="insideBottomRight"?hA({x:f+l-N,y:o+c-x,horizontalAnchor:C,verticalAnchor:w},de):r&&typeof r=="object"&&(Ei(r.x)||xy(r.x))&&(Ei(r.y)||xy(r.y))?hA({x:a+ih(r.x,p),y:o+ih(r.y,c),horizontalAnchor:"end",verticalAnchor:"end"},de):hA({x:g,y:o+c/2,horizontalAnchor:"middle",verticalAnchor:"middle"},de)},aCe=["labelRef"],oCe=["content"];function ZQ(t,e){if(t==null)return{};var r,n,i=lCe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function lCe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function JQ(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Nw(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?JQ(Object(r),!0).forEach(function(n){cCe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):JQ(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function cCe(t,e,r){return(e=uCe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function uCe(t){var e=dCe(t,"string");return typeof e=="symbol"?e:e+""}function dCe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Fp(){return Fp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Fp.apply(null,arguments)}var Nte=T.createContext(null),hCe=t=>{var{x:e,y:r,upperWidth:n,lowerWidth:i,width:a,height:o,children:c}=t,u=T.useMemo(()=>({x:e,y:r,upperWidth:n,lowerWidth:i,width:a,height:o}),[e,r,n,i,a,o]);return T.createElement(Nte.Provider,{value:u},c)},kte=()=>{var t=T.useContext(Nte),e=d5();return t||(e?dD(e):void 0)},fCe=T.createContext(null),mCe=()=>{var t=T.useContext(fCe),e=si(tE);return t||e},ACe=t=>{var{value:e,formatter:r}=t,n=ru(t.children)?e:t.children;return typeof r=="function"?r(n):n},jM=t=>t!=null&&typeof t=="function",pCe=(t,e)=>{var r=pd(e-t),n=Math.min(Math.abs(e-t),360);return r*n},gCe=(t,e,r,n,i)=>{var{offset:a,className:o}=t,{cx:c,cy:u,innerRadius:l,outerRadius:d,startAngle:f,endAngle:m,clockWise:p}=i,g=(l+d)/2,y=pCe(f,m),x=y>=0?1:-1,w,_;switch(e){case"insideStart":w=f+x*a,_=p;break;case"insideEnd":w=m-x*a,_=!p;break;case"end":w=m+x*a,_=p;break;default:throw new Error("Unsupported position ".concat(e))}_=y<=0?_:!_;var E=rl(c,u,g,w),N=rl(c,u,g,w+(_?1:-1)*359),C="M".concat(E.x,",").concat(E.y,`
    A`).concat(g,",").concat(g,",0,1,").concat(_?0:1,`,
    `).concat(N.x,",").concat(N.y),I=ru(t.id)?R2("recharts-radial-line-"):t.id;return T.createElement("text",Fp({},n,{dominantBaseline:"central",className:ja("recharts-radial-bar-label",o)}),T.createElement("defs",null,T.createElement("path",{id:I,d:C})),T.createElement("textPath",{xlinkHref:"#".concat(I)},r))},vCe=(t,e,r)=>{var{cx:n,cy:i,innerRadius:a,outerRadius:o,startAngle:c,endAngle:u}=t,l=(c+u)/2;if(r==="outside"){var{x:d,y:f}=rl(n,i,o+e,l);return{x:d,y:f,textAnchor:d>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"end"};var m=(a+o)/2,{x:p,y:g}=rl(n,i,m,l);return{x:p,y:g,textAnchor:"middle",verticalAnchor:"middle"}},lj=t=>t!=null&&"cx"in t&&Ei(t.cx),yCe={angle:0,offset:5,zIndex:Oc.label,position:"middle",textBreakAll:!1};function xCe(t){if(!lj(t))return t;var{cx:e,cy:r,outerRadius:n}=t,i=n*2;return{x:e-n,y:r-n,width:i,upperWidth:i,lowerWidth:i,height:i}}function g0(t){var e=Uc(t,yCe),{viewBox:r,parentViewBox:n,position:i,value:a,children:o,content:c,className:u="",textBreakAll:l,labelRef:d}=e,f=mCe(),m=kte(),p=i==="center"?m:f??m,g,y,x;r==null?g=p:lj(r)?g=r:g=dD(r);var w=xCe(g);if(!g||ru(a)&&ru(o)&&!T.isValidElement(c)&&typeof c!="function")return null;var _=Nw(Nw({},e),{},{viewBox:g});if(T.isValidElement(c)){var{labelRef:E}=_,N=ZQ(_,aCe);return T.cloneElement(c,N)}if(typeof c=="function"){var{content:C}=_,I=ZQ(_,oCe);if(y=T.createElement(c,I),T.isValidElement(y))return y}else y=ACe(e);var D=zu(e);if(lj(g)){if(i==="insideStart"||i==="insideEnd"||i==="end")return gCe(e,i,y,D,g);x=vCe(g,e.offset,e.position)}else{if(!w)return null;var U=sCe({viewBox:w,position:i,offset:e.offset,parentViewBox:lj(n)?void 0:n});x=Nw(Nw({x:U.x,y:U.y,textAnchor:U.horizontalAnchor,verticalAnchor:U.verticalAnchor},U.width!==void 0?{width:U.width}:{}),U.height!==void 0?{height:U.height}:{})}return T.createElement(ah,{zIndex:e.zIndex},T.createElement(cE,Fp({ref:d,className:ja("recharts-label",u)},D,x,{textAnchor:XTe(D.textAnchor)?D.textAnchor:x.textAnchor,breakAll:l}),y))}g0.displayName="Label";var bCe=(t,e,r)=>{if(!t)return null;var n={viewBox:e,labelRef:r};return t===!0?T.createElement(g0,Fp({key:"label-implicit"},n)):qA(t)?T.createElement(g0,Fp({key:"label-implicit",value:t},n)):T.isValidElement(t)?t.type===g0?T.cloneElement(t,Nw({key:"label-implicit"},n)):T.createElement(g0,Fp({key:"label-implicit",content:t},n)):jM(t)?T.createElement(g0,Fp({key:"label-implicit",content:t},n)):t&&typeof t=="object"?T.createElement(g0,Fp({},t,{key:"label-implicit"},n)):null};function wCe(t){var{label:e,labelRef:r}=t,n=kte();return bCe(e,n,r)||null}var ML={},FL={},ez;function _Ce(){return ez||(ez=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r[r.length-1]}t.last=e})(FL)),FL}var UL={},tz;function ECe(){return tz||(tz=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return Array.isArray(r)?r:Array.from(r)}t.toArray=e})(UL)),UL}var rz;function SCe(){return rz||(rz=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=_Ce(),r=ECe(),n=eD();function i(a){if(n.isArrayLike(a))return e.last(r.toArray(a))}t.last=i})(ML)),ML}var $L,nz;function jCe(){return nz||(nz=1,$L=SCe().last),$L}var TCe=jCe();const Lte=om(TCe);var CCe=["valueAccessor"],NCe=["dataKey","clockWise","id","textBreakAll","zIndex"];function kC(){return kC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},kC.apply(null,arguments)}function iz(t,e){if(t==null)return{};var r,n,i=kCe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function kCe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var LCe=t=>Array.isArray(t.value)?Lte(t.value):t.value,Ite=T.createContext(void 0),Bte=Ite.Provider,Pte=T.createContext(void 0),ICe=Pte.Provider;function BCe(){return T.useContext(Ite)}function PCe(){return T.useContext(Pte)}function cj(t){var{valueAccessor:e=LCe}=t,r=iz(t,CCe),{dataKey:n,clockWise:i,id:a,textBreakAll:o,zIndex:c}=r,u=iz(r,NCe),l=BCe(),d=PCe(),f=l||d;return!f||!f.length?null:T.createElement(ah,{zIndex:c??Oc.label},T.createElement(Mc,{className:"recharts-label-list"},f.map((m,p)=>{var g,y=ru(n)?e(m,p):dl(m.payload,n),x=ru(a)?{}:{id:"".concat(a,"-").concat(p)};return T.createElement(g0,kC({key:"label-".concat(p)},zu(m),u,x,{fill:(g=r.fill)!==null&&g!==void 0?g:m.fill,parentViewBox:m.parentViewBox,value:y,textBreakAll:o,viewBox:m.viewBox,index:p,zIndex:0}))})))}cj.displayName="LabelList";function TM(t){var{label:e}=t;return e?e===!0?T.createElement(cj,{key:"labelList-implicit"}):T.isValidElement(e)||jM(e)?T.createElement(cj,{key:"labelList-implicit",content:e}):typeof e=="object"?T.createElement(cj,kC({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}var OCe=["points","className","baseLinePoints","connectNulls"],sz;function lb(){return lb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},lb.apply(null,arguments)}function RCe(t,e){if(t==null)return{};var r,n,i=DCe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function DCe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function MCe(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var az=t=>t!=null&&t.x===+t.x&&t.y===+t.y,FCe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];e.forEach(o=>{var c=r[r.length-1];az(o)?c&&c.push(o):c&&c.length>0&&r.push([])});var n=e[0],i=r[r.length-1];az(n)&&i&&i.push(n);var a=r[r.length-1];return a&&a.length<=0&&(r=r.slice(0,-1)),r},u2=(t,e)=>{var r=FCe(t);e&&(r=[r.reduce((i,a)=>[...i,...a],[])]);var n=r.map(i=>i.reduce((a,o,c)=>uc(sz||(sz=MCe(["","","",",",""])),a,c===0?"M":"L",o.x,o.y),"")).join("");return r.length===1?"".concat(n,"Z"):n},UCe=(t,e,r)=>{var n=u2(t,r);return"".concat(n.slice(-1)==="Z"?n.slice(0,-1):n,"L").concat(u2(Array.from(e).reverse(),r).slice(1))},Ote=t=>{var{points:e,className:r,baseLinePoints:n,connectNulls:i}=t,a=RCe(t,OCe);if(!e||!e.length)return null;var o=ja("recharts-polygon",r);if(n&&n.length){var c=a.stroke&&a.stroke!=="none",u=UCe(e,n,i);return T.createElement("g",{className:o},T.createElement("path",lb({},zu(a),{fill:u.slice(-1)==="Z"?a.fill:"none",stroke:"none",d:u})),c?T.createElement("path",lb({},zu(a),{fill:"none",d:u2(e,i)})):null,c?T.createElement("path",lb({},zu(a),{fill:"none",d:u2(n,i)})):null)}var l=u2(e,i);return T.createElement("path",lb({},zu(a),{fill:l.slice(-1)==="Z"?a.fill:"none",className:o,d:l}))};function RP(){return RP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},RP.apply(null,arguments)}var CM=t=>{var{cx:e,cy:r,r:n,className:i}=t,a=ja("recharts-dot",i);return Ei(e)&&Ei(r)&&Ei(n)?T.createElement("circle",RP({},xu(t),JR(t),{className:a,cx:e,cy:r,r:n})):null},NM=t=>t.graphicalItems.polarItems,$Ce=dr([kl,rE],YD),B5=dr([NM,$c,$Ce],XD),HCe=dr([B5],ZD),P5=dr([HCe,X_],JD),Rte=dr([P5,$c,B5],tM);dr([P5,$c,B5],(t,e,r)=>r.length>0?t.flatMap(n=>r.flatMap(i=>{var a,o=dl(n,(a=e.dataKey)!==null&&a!==void 0?a:i.dataKey);return{value:o,errorDomain:[]}})).filter(Boolean):e?.dataKey!=null?t.map(n=>({value:dl(n,e.dataKey),errorDomain:[]})):t.map(n=>({value:n,errorDomain:[]})));var oz=()=>{},QCe=dr([P5,$c,B5,C5,kl],sM),zCe=dr([$c,nM,iM,oz,QCe,oz,Ya,kl],aM),Dte=dr([$c,Ya,P5,Rte,Z_,kl,zCe],oM),Mte=dr([Dte,By,rp],cM),VCe=dr([$c,Dte,Mte,kl],dM),KCe=dr([rp,VCe],xee),kM=(t,e,r)=>{switch(e){case"angleAxis":return _1(t,r);case"radiusAxis":return eE(t,r);default:throw new Error("Unexpected axis type: ".concat(e))}},LM=(t,e,r)=>{switch(e){case"angleAxis":return hEe(t,r);case"radiusAxis":return fEe(t,r);default:throw new Error("Unexpected axis type: ".concat(e))}},uE=dr([kM,rp,KCe,LM],N5),Fte=dr([Ya,Rte,By,kl],hM),dE=dr([Ya,kM,rp,uE,Mte,LM,aE,Fte,kl],Qee),GCe=dr([dE],t=>{if(t){var e=new Map;return t.forEach(r=>{var n=(r.coordinate+360)%360;e.has(n)||e.set(n,r)}),Array.from(e.values())}});dr([Ya,kM,uE,LM,aE,Fte,kl],Vee);var WCe=(t,e)=>dE(t,"angleAxis",e,!1),YCe=dr([WCe],t=>{if(t)return t.map(e=>e.coordinate)}),qCe=(t,e)=>dE(t,"radiusAxis",e,!1),XCe=dr([qCe],t=>{if(t)return t.map(e=>e.coordinate)}),ZCe=["gridType","radialLines","angleAxisId","radiusAxisId","cx","cy","innerRadius","outerRadius","polarAngles","polarRadius","zIndex"];function JCe(t,e){if(t==null)return{};var r,n,i=eNe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function eNe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function Um(){return Um=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Um.apply(null,arguments)}function lz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function O5(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?lz(Object(r),!0).forEach(function(n){tNe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):lz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function tNe(t,e,r){return(e=rNe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function rNe(t){var e=nNe(t,"string");return typeof e=="symbol"?e:e+""}function nNe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var iNe=(t,e,r,n)=>{var i="";return n.forEach((a,o)=>{var c=rl(e,r,t,a);o?i+="L ".concat(c.x,",").concat(c.y):i+="M ".concat(c.x,",").concat(c.y)}),i+="Z",i},sNe=t=>{var{cx:e,cy:r,innerRadius:n,outerRadius:i,polarAngles:a,radialLines:o}=t;if(!a||!a.length||!o)return null;var c=O5({stroke:"#ccc"},xu(t));return T.createElement("g",{className:"recharts-polar-grid-angle"},a.map(u=>{var l=rl(e,r,n,u),d=rl(e,r,i,u);return T.createElement("line",Um({key:"line-".concat(u)},c,{x1:l.x,y1:l.y,x2:d.x,y2:d.y}))}))},cz=t=>{var{cx:e,cy:r,radius:n}=t,i=O5({stroke:"#ccc",fill:"none"},xu(t));return T.createElement("circle",Um({},i,{className:ja("recharts-polar-grid-concentric-circle",t.className),cx:e,cy:r,r:n}))},uz=t=>{var{radius:e}=t,r=O5({stroke:"#ccc",fill:"none"},xu(t));return T.createElement("path",Um({},r,{className:ja("recharts-polar-grid-concentric-polygon",t.className),d:iNe(e,t.cx,t.cy,t.polarAngles)}))},aNe=t=>{var{polarRadius:e,gridType:r}=t;if(!e||!e.length)return null;var n=Math.max(...e),i=t.fill&&t.fill!=="none";return T.createElement("g",{className:"recharts-polar-grid-concentric"},i&&r==="circle"&&T.createElement(cz,Um({},t,{radius:n})),i&&r!=="circle"&&T.createElement(uz,Um({},t,{radius:n})),e.map((a,o)=>{var c=o;return r==="circle"?T.createElement(cz,Um({key:c},t,{fill:"none",radius:a})):T.createElement(uz,Um({key:c},t,{fill:"none",radius:a}))}))},oNe={angleAxisId:0,radiusAxisId:0,gridType:"polygon",radialLines:!0,zIndex:Oc.grid},Ute=t=>{var e,r,n,i,a,o,c,u,l=Uc(t,oNe),{gridType:d,radialLines:f,angleAxisId:m,radiusAxisId:p,cx:g,cy:y,innerRadius:x,outerRadius:w,polarAngles:_,polarRadius:E,zIndex:N}=l,C=JCe(l,ZCe),I=si(tE),D=si(xe=>YCe(xe,m)),U=si(xe=>XCe(xe,p)),G=Array.isArray(_)?_:D,q=Array.isArray(E)?E:U;if(G==null||q==null)return null;var J=O5({cx:(e=(r=I?.cx)!==null&&r!==void 0?r:g)!==null&&e!==void 0?e:0,cy:(n=(i=I?.cy)!==null&&i!==void 0?i:y)!==null&&n!==void 0?n:0,innerRadius:(a=(o=I?.innerRadius)!==null&&o!==void 0?o:x)!==null&&a!==void 0?a:0,outerRadius:(c=(u=I?.outerRadius)!==null&&u!==void 0?u:w)!==null&&c!==void 0?c:0,polarAngles:G,polarRadius:q,zIndex:N},C),{outerRadius:de}=J;return de<=0?null:T.createElement(ah,{zIndex:J.zIndex},T.createElement("g",{className:"recharts-polar-grid"},T.createElement(aNe,Um({gridType:d,radialLines:f},J,{polarAngles:G,polarRadius:q})),T.createElement(sNe,Um({gridType:d,radialLines:f},J,{polarAngles:G,polarRadius:q}))))};Ute.displayName="PolarGrid";var lNe={radiusAxis:{},angleAxis:{}},$te=Wh({name:"polarAxis",initialState:lNe,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:$Xe,removeRadiusAxis:HXe,addAngleAxis:cNe,removeAngleAxis:uNe}=$te.actions,dNe=$te.reducer;function IM(t){return t&&typeof t=="object"&&"className"in t&&typeof t.className=="string"?t.className:""}var hNe=["children","type"];function Sy(){return Sy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Sy.apply(null,arguments)}function dz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Xf(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?dz(Object(r),!0).forEach(function(n){fNe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):dz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function fNe(t,e,r){return(e=mNe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function mNe(t){var e=ANe(t,"string");return typeof e=="symbol"?e:e+""}function ANe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function pNe(t,e){if(t==null)return{};var r,n,i=gNe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function gNe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var hz=1e-5,vNe=Math.cos(mC(45)),yNe="angleAxis";function xNe(t){var e=Al(),r=jbe(),n=T.useMemo(()=>{var{children:o,type:c}=t,u=pNe(t,hNe),l=J_(r,"angleAxis",c);if(l!=null)return Xf(Xf({},u),{},{type:l})},[t,r]),i=si(o=>_1(o,n?.id)),a=n===i;return T.useEffect(()=>n==null?X0:(e(cNe(n)),()=>{e(uNe(n))}),[e,n]),a?t.children:null}var bNe=(t,e)=>{var{cx:r,cy:n,radius:i,orientation:a,tickSize:o}=e,c=o||8,u=rl(r,n,i,t.coordinate),l=rl(r,n,i+(a==="inner"?-1:1)*c,t.coordinate);return{x1:u.x,y1:u.y,x2:l.x,y2:l.y}},wNe=(t,e)=>{var r=Math.cos(mC(-t.coordinate));return r>hz?e==="outer"?"start":"end":r<-hz?e==="outer"?"end":"start":"middle"},_Ne=t=>{var e=Math.cos(mC(-t.coordinate)),r=Math.sin(mC(-t.coordinate));return Math.abs(e)<=vNe?r>0?"start":"end":"middle"},ENe=t=>{var{cx:e,cy:r,radius:n,axisLineType:i,axisLine:a,ticks:o}=t;if(!a)return null;var c=Xf(Xf({},xu(t)),{},{fill:"none"},xu(a));if(i==="circle")return T.createElement(CM,Sy({className:"recharts-polar-angle-axis-line"},c,{cx:e,cy:r,r:n}));var u=o.map(l=>rl(e,r,n,l.coordinate));return T.createElement(Ote,Sy({className:"recharts-polar-angle-axis-line"},c,{points:u}))},SNe=t=>{var{tick:e,tickProps:r,value:n}=t;return e?T.isValidElement(e)?T.cloneElement(e,r):typeof e=="function"?e(r):T.createElement(cE,Sy({},r,{className:"recharts-polar-angle-axis-tick-value"}),n):null},jNe=t=>{var{tick:e,tickLine:r,tickFormatter:n,stroke:i,ticks:a}=t,o=xu(t),c=gy(e),u=Xf(Xf({},o),{},{fill:"none"},xu(r)),l=a.map((d,f)=>{var m=bNe(d,t),p=wNe(d,t.orientation),g=_Ne(d),y=Xf(Xf(Xf({},o),{},{textAnchor:p,verticalAnchor:g,stroke:"none",fill:i},c),{},{index:f,payload:d,x:m.x2,y:m.y2});return T.createElement(Mc,Sy({className:ja("recharts-polar-angle-axis-tick",IM(e)),key:"tick-".concat(d.coordinate)},g1(t,d,f)),r&&T.createElement("line",Sy({className:"recharts-polar-angle-axis-tick-line"},u,m)),T.createElement(SNe,{tick:e,tickProps:y,value:n?n(d.value,f):d.value}))});return T.createElement(Mc,{className:"recharts-polar-angle-axis-ticks"},l)},TNe=t=>{var{angleAxisId:e}=t,r=si(tE),n=si(c=>uE(c,"angleAxis",e)),i=sh(),a=si(c=>GCe(c,"angleAxis",e,i));if(r==null||!a||!a.length||n==null)return null;var o=Xf(Xf(Xf({},t),{},{scale:n},r),{},{radius:r.outerRadius,ticks:a});return T.createElement(ah,{zIndex:o.zIndex},T.createElement(Mc,{className:ja("recharts-polar-angle-axis",yNe,o.className)},T.createElement(ENe,o),T.createElement(jNe,o)))};function Hte(t){var e=Uc(t,o0);return T.createElement(xNe,{id:e.angleAxisId,scale:e.scale,type:e.type,dataKey:e.dataKey,unit:void 0,name:e.name,allowDuplicatedCategory:!1,allowDataOverflow:!1,reversed:e.reversed,includeHidden:!1,allowDecimals:e.allowDecimals,tickCount:e.tickCount,ticks:e.ticks,tick:e.tick,domain:e.domain},T.createElement(TNe,e))}Hte.displayName="PolarAngleAxis";function fz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function mz(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?fz(Object(r),!0).forEach(function(n){CNe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):fz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function CNe(t,e,r){return(e=NNe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function NNe(t){var e=kNe(t,"string");return typeof e=="symbol"?e:e+""}function kNe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var LNe=(t,e)=>e,BM=dr([NM,LNe],(t,e)=>t.filter(r=>r.type==="pie").find(r=>r.id===e)),INe=[],PM=(t,e,r)=>r?.length===0?INe:r,Qte=dr([X_,BM,PM],(t,e,r)=>{var{chartData:n}=t;if(e!=null){var i;if(e?.data!=null&&e.data.length>0?i=e.data:i=n,(!i||!i.length)&&r!=null&&(i=r.map(a=>mz(mz({},e.presentationProps),a.props))),i!=null)return i}}),BNe=dr([Qte,BM,PM],(t,e,r)=>{if(!(t==null||e==null))return t.map((n,i)=>{var a,o=dl(n,e.nameKey,e.name),c;return r!=null&&(a=r[i])!==null&&a!==void 0&&(a=a.props)!==null&&a!==void 0&&a.fill?c=r[i].props.fill:typeof n=="object"&&n!=null&&"fill"in n?c=n.fill:c=e.fill,{value:v1(o,e.dataKey),color:c,payload:n,type:e.legendType}})}),PNe=dr([Qte,BM,PM,Ku],(t,e,r,n)=>{if(!(e==null||t==null))return R5e({offset:n,pieSettings:e,displayedData:t,cells:r})}),HL={exports:{}},Jo={};var Az;function ONe(){if(Az)return Jo;Az=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),l=Symbol.for("react.suspense_list"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),m=Symbol.for("react.view_transition"),p=Symbol.for("react.client.reference");function g(y){if(typeof y=="object"&&y!==null){var x=y.$$typeof;switch(x){case t:switch(y=y.type,y){case r:case i:case n:case u:case l:case m:return y;default:switch(y=y&&y.$$typeof,y){case o:case c:case f:case d:return y;case a:return y;default:return x}}case e:return x}}}return Jo.ContextConsumer=a,Jo.ContextProvider=o,Jo.Element=t,Jo.ForwardRef=c,Jo.Fragment=r,Jo.Lazy=f,Jo.Memo=d,Jo.Portal=e,Jo.Profiler=i,Jo.StrictMode=n,Jo.Suspense=u,Jo.SuspenseList=l,Jo.isContextConsumer=function(y){return g(y)===a},Jo.isContextProvider=function(y){return g(y)===o},Jo.isElement=function(y){return typeof y=="object"&&y!==null&&y.$$typeof===t},Jo.isForwardRef=function(y){return g(y)===c},Jo.isFragment=function(y){return g(y)===r},Jo.isLazy=function(y){return g(y)===f},Jo.isMemo=function(y){return g(y)===d},Jo.isPortal=function(y){return g(y)===e},Jo.isProfiler=function(y){return g(y)===i},Jo.isStrictMode=function(y){return g(y)===n},Jo.isSuspense=function(y){return g(y)===u},Jo.isSuspenseList=function(y){return g(y)===l},Jo.isValidElementType=function(y){return typeof y=="string"||typeof y=="function"||y===r||y===i||y===n||y===u||y===l||typeof y=="object"&&y!==null&&(y.$$typeof===f||y.$$typeof===d||y.$$typeof===o||y.$$typeof===a||y.$$typeof===c||y.$$typeof===p||y.getModuleId!==void 0)},Jo.typeOf=g,Jo}var pz;function RNe(){return pz||(pz=1,HL.exports=ONe()),HL.exports}var DNe=RNe(),gz=t=>typeof t=="string"?t:t?t.displayName||t.name||"Component":"",vz=null,QL=null,zte=t=>{if(t===vz&&Array.isArray(QL))return QL;var e=[];return T.Children.forEach(t,r=>{ru(r)||(DNe.isFragment(r)?e=e.concat(zte(r.props.children)):e.push(r))}),QL=e,vz=t,e};function OM(t,e){var r=[],n=[];return Array.isArray(e)?n=e.map(i=>gz(i)):n=[gz(e)],zte(t).forEach(i=>{var a=yy(i,"type.displayName")||yy(i,"type.name");a&&n.indexOf(a)!==-1&&r.push(i)}),r}var MNe=t=>t&&typeof t=="object"&&"clipDot"in t?!!t.clipDot:!0,zL={},yz;function FNe(){return yz||(yz=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const i=r[Symbol.toStringTag];return i==null||!Object.getOwnPropertyDescriptor(r,Symbol.toStringTag)?.writable?!1:r.toString()===`[object ${i}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}t.isPlainObject=e})(zL)),zL}var VL,xz;function UNe(){return xz||(xz=1,VL=FNe().isPlainObject),VL}var $Ne=UNe();const HNe=om($Ne);var bz,wz,_z,Ez,Sz;function jz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Tz(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?jz(Object(r),!0).forEach(function(n){QNe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):jz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function QNe(t,e,r){return(e=zNe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function zNe(t){var e=VNe(t,"string");return typeof e=="symbol"?e:e+""}function VNe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function LC(){return LC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},LC.apply(null,arguments)}function ow(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var Cz=(t,e,r,n,i)=>{var a=r-n,o;return o=uc(bz||(bz=ow(["M ",",",""])),t,e),o+=uc(wz||(wz=ow(["L ",",",""])),t+r,e),o+=uc(_z||(_z=ow(["L ",",",""])),t+r-a/2,e+i),o+=uc(Ez||(Ez=ow(["L ",",",""])),t+r-a/2-n,e+i),o+=uc(Sz||(Sz=ow(["L ",","," Z"])),t,e),o},KNe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},GNe=t=>{var e=Uc(t,KNe),{x:r,y:n,upperWidth:i,lowerWidth:a,height:o,className:c}=e,{animationEasing:u,animationDuration:l,animationBegin:d,isUpdateAnimationActive:f}=e,m=T.useRef(null),[p,g]=T.useState(-1),y=T.useRef(i),x=T.useRef(a),w=T.useRef(o),_=T.useRef(r),E=T.useRef(n),N=K_(t,"trapezoid-");if(T.useEffect(()=>{if(m.current&&m.current.getTotalLength)try{var we=m.current.getTotalLength();we&&g(we)}catch{}},[]),r!==+r||n!==+n||i!==+i||a!==+a||o!==+o||i===0&&a===0||o===0)return null;var C=ja("recharts-trapezoid",c);if(!f)return T.createElement("g",null,T.createElement("path",LC({},zu(e),{className:C,d:Cz(r,n,i,a,o)})));var I=y.current,D=x.current,U=w.current,G=_.current,q=E.current,J="0px ".concat(p===-1?1:p,"px"),de="".concat(p,"px 0px"),xe=uJ(["strokeDasharray"],l,u);return T.createElement(V_,{animationId:N,key:N,canBegin:p>0,duration:l,easing:u,isActive:f,begin:d},we=>{var ve=dc(I,i,we),ne=dc(D,a,we),ae=dc(U,o,we),oe=dc(G,r,we),Ie=dc(q,n,we);m.current&&(y.current=ve,x.current=ne,w.current=ae,_.current=oe,E.current=Ie);var Ce=we>0?{transition:xe,strokeDasharray:de}:{strokeDasharray:J};return T.createElement("path",LC({},zu(e),{className:C,d:Cz(oe,Ie,ve,ne,ae),ref:m,style:Tz(Tz({},Ce),e.style)}))})},WNe=["option","shapeType","activeClassName"];function YNe(t,e){if(t==null)return{};var r,n,i=qNe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function qNe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function Nz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function IC(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Nz(Object(r),!0).forEach(function(n){XNe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Nz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function XNe(t,e,r){return(e=ZNe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ZNe(t){var e=JNe(t,"string");return typeof e=="symbol"?e:e+""}function JNe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function e5e(t,e){return IC(IC({},e),t)}function t5e(t,e){return t==="symbols"}function kz(t){var{shapeType:e,elementProps:r}=t;switch(e){case"rectangle":return T.createElement(mJ,r);case"trapezoid":return T.createElement(GNe,r);case"sector":return T.createElement(vJ,r);case"symbols":if(t5e(e))return T.createElement(ZR,r);break;case"curve":return T.createElement(gD,r);default:return null}}function r5e(t){return T.isValidElement(t)?t.props:t}function Vte(t){var{option:e,shapeType:r,activeClassName:n="recharts-active-shape"}=t,i=YNe(t,WNe),a;if(T.isValidElement(e))a=T.cloneElement(e,IC(IC({},i),r5e(e)));else if(typeof e=="function")a=e(i,i.index);else if(HNe(e)&&typeof e!="boolean"){var o=e5e(e,i);a=T.createElement(kz,{shapeType:r,elementProps:o})}else{var c=i;a=T.createElement(kz,{shapeType:r,elementProps:c})}return i.isActive?T.createElement(Mc,{className:n},a):a}var RM=(t,e,r)=>{var n=Al();return(i,a)=>o=>{t?.(i,a,o),n(Xee({activeIndex:String(a),activeDataKey:e,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:r}))}},DM=t=>{var e=Al();return(r,n)=>i=>{t?.(r,n,i),e(ySe())}},MM=(t,e,r)=>{var n=Al();return(i,a)=>o=>{t?.(i,a,o),n(xSe({activeIndex:String(a),activeDataKey:e,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:r}))}};function FM(t){var{tooltipEntrySettings:e}=t,r=Al(),n=sh(),i=T.useRef(null);return T.useLayoutEffect(()=>{n||(i.current===null?r(ASe(e)):i.current!==e&&r(pSe({prev:i.current,next:e})),i.current=e)},[e,r,n]),T.useLayoutEffect(()=>()=>{i.current&&(r(gSe(i.current)),i.current=null)},[r]),null}function n5e(t){var{legendPayload:e}=t,r=Al(),n=sh(),i=T.useRef(null);return T.useLayoutEffect(()=>{n||(i.current===null?r(sJ(e)):i.current!==e&&r(aJ({prev:i.current,next:e})),i.current=e)},[r,n,e]),T.useLayoutEffect(()=>()=>{i.current&&(r(oJ(i.current)),i.current=null)},[r]),null}function Kte(t){var{legendPayload:e}=t,r=Al(),n=si(Ya),i=T.useRef(null);return T.useLayoutEffect(()=>{n!=="centric"&&n!=="radial"||(i.current===null?r(sJ(e)):i.current!==e&&r(aJ({prev:i.current,next:e})),i.current=e)},[r,n,e]),T.useLayoutEffect(()=>()=>{i.current&&(r(oJ(i.current)),i.current=null)},[r]),null}var KL,i5e=()=>{var[t]=T.useState(()=>R2("uid-"));return t},s5e=(KL=gce.useId)!==null&&KL!==void 0?KL:i5e;function a5e(t,e){var r=s5e();return e||(t?"".concat(t,"-").concat(r):r)}var o5e=T.createContext(void 0),UM=t=>{var{id:e,type:r,children:n}=t,i=a5e("recharts-".concat(r),e);return T.createElement(o5e.Provider,{value:i},n(i))},l5e={cartesianItems:[],polarItems:[]},Gte=Wh({name:"graphicalItems",initialState:l5e,reducers:{addCartesianGraphicalItem:{reducer(t,e){t.cartesianItems.push(e.payload)},prepare:Xl()},replaceCartesianGraphicalItem:{reducer(t,e){var{prev:r,next:n}=e.payload,i=$m(t).cartesianItems.indexOf(r);i>-1&&(t.cartesianItems[i]=n)},prepare:Xl()},removeCartesianGraphicalItem:{reducer(t,e){var r=$m(t).cartesianItems.indexOf(e.payload);r>-1&&t.cartesianItems.splice(r,1)},prepare:Xl()},addPolarGraphicalItem:{reducer(t,e){t.polarItems.push(e.payload)},prepare:Xl()},removePolarGraphicalItem:{reducer(t,e){var r=$m(t).polarItems.indexOf(e.payload);r>-1&&t.polarItems.splice(r,1)},prepare:Xl()}}}),{addCartesianGraphicalItem:c5e,replaceCartesianGraphicalItem:u5e,removeCartesianGraphicalItem:d5e,addPolarGraphicalItem:h5e,removePolarGraphicalItem:f5e}=Gte.actions,m5e=Gte.reducer,A5e=t=>{var e=Al(),r=T.useRef(null);return T.useLayoutEffect(()=>{r.current===null?e(c5e(t)):r.current!==t&&e(u5e({prev:r.current,next:t})),r.current=t},[e,t]),T.useLayoutEffect(()=>()=>{r.current&&(e(d5e(r.current)),r.current=null)},[e]),null},p5e=T.memo(A5e);function Wte(t){var e=Al();return T.useLayoutEffect(()=>(e(h5e(t)),()=>{e(f5e(t))}),[e,t]),null}var g5e=["key"],v5e=["onMouseEnter","onClick","onMouseLeave"],y5e=["id"],x5e=["id"];function Lz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Pc(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Lz(Object(r),!0).forEach(function(n){b5e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Lz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function b5e(t,e,r){return(e=w5e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function w5e(t){var e=_5e(t,"string");return typeof e=="symbol"?e:e+""}function _5e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function K0(){return K0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},K0.apply(null,arguments)}function R5(t,e){if(t==null)return{};var r,n,i=E5e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function E5e(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function S5e(t){var e=T.useMemo(()=>OM(t.children,e1),[t.children]),r=si(n=>BNe(n,t.id,e));return r==null?null:T.createElement(Kte,{legendPayload:r})}var j5e=T.memo(t=>{var{dataKey:e,nameKey:r,sectors:n,stroke:i,strokeWidth:a,fill:o,name:c,hide:u,tooltipType:l,id:d}=t,f={dataDefinedOnItem:n.map(m=>m.tooltipPayload),getPosition:m=>{var p;return(p=n[Number(m)])===null||p===void 0?void 0:p.tooltipPosition},settings:{stroke:i,strokeWidth:a,fill:o,dataKey:e,nameKey:r,name:v1(c,e),hide:u,type:l,color:o,unit:"",graphicalItemId:d}};return T.createElement(FM,{tooltipEntrySettings:f})}),T5e=(t,e)=>t>e?"start":t<e?"end":"middle",C5e=(t,e,r)=>ih(typeof e=="function"?e(t):e,r,r*.8),N5e=(t,e,r)=>{var{top:n,left:i,width:a,height:o}=e,c=AJ(a,o),u=i+ih(t.cx,a,a/2),l=n+ih(t.cy,o,o/2),d=ih(t.innerRadius,c,0),f=C5e(r,t.outerRadius,c),m=t.maxRadius||Math.sqrt(a*a+o*o)/2;return{cx:u,cy:l,innerRadius:d,outerRadius:f,maxRadius:m}},k5e=(t,e)=>{var r=pd(e-t),n=Math.min(Math.abs(e-t),360);return r*n},L5e=(t,e)=>{if(T.isValidElement(t))return T.cloneElement(t,e);if(typeof t=="function")return t(e);var r=ja("recharts-pie-label-line",typeof t!="boolean"?t.className:""),{key:n}=e,i=R5(e,g5e);return T.createElement(gD,K0({},i,{type:"linear",className:r}))},I5e=(t,e,r)=>{if(T.isValidElement(t))return T.cloneElement(t,e);var n=r;if(typeof t=="function"&&(n=t(e),T.isValidElement(n)))return n;var i=ja("recharts-pie-label-text",IM(t));return T.createElement(cE,K0({},e,{alignmentBaseline:"middle",className:i}),n)};function B5e(t){var{sectors:e,props:r,showLabels:n}=t,{label:i,labelLine:a,dataKey:o}=r;if(!n||!i||!e)return null;var c=xu(r),u=gy(i),l=gy(a),d=typeof i=="object"&&"offsetRadius"in i&&typeof i.offsetRadius=="number"&&i.offsetRadius||20,f=e.map((m,p)=>{var g=(m.startAngle+m.endAngle)/2,y=rl(m.cx,m.cy,m.outerRadius+d,g),x=Pc(Pc(Pc(Pc({},c),m),{},{stroke:"none"},u),{},{index:p,textAnchor:T5e(y.x,m.cx)},y),w=Pc(Pc(Pc(Pc({},c),m),{},{fill:"none",stroke:m.fill},l),{},{index:p,points:[rl(m.cx,m.cy,m.outerRadius,g),y],key:"line"});return T.createElement(ah,{zIndex:Oc.label,key:"label-".concat(m.startAngle,"-").concat(m.endAngle,"-").concat(m.midAngle,"-").concat(p)},T.createElement(Mc,null,a&&L5e(a,w),I5e(i,x,dl(m,o))))});return T.createElement(Mc,{className:"recharts-pie-labels"},f)}function P5e(t){var{sectors:e,props:r,showLabels:n}=t,{label:i}=r;return typeof i=="object"&&i!=null&&"position"in i?T.createElement(TM,{label:i}):T.createElement(B5e,{sectors:e,props:r,showLabels:n})}function O5e(t){var{sectors:e,activeShape:r,inactiveShape:n,allOtherPieProps:i,shape:a,id:o}=t,c=si(V0),u=si(xM),l=si(sje),{onMouseEnter:d,onClick:f,onMouseLeave:m}=i,p=R5(i,v5e),g=RM(d,i.dataKey,o),y=DM(m),x=MM(f,i.dataKey,o);return e==null||e.length===0?null:T.createElement(T.Fragment,null,e.map((w,_)=>{if(w?.startAngle===0&&w?.endAngle===0&&e.length!==1)return null;var E=l==null||l===o,N=String(_)===c&&(u==null||i.dataKey===u)&&E,C=c?n:null,I=r&&N?r:C,D=Pc(Pc({},w),{},{stroke:w.stroke,tabIndex:-1,[VZ]:_,[KZ]:o});return T.createElement(Mc,K0({key:"sector-".concat(w?.startAngle,"-").concat(w?.endAngle,"-").concat(w.midAngle,"-").concat(_),tabIndex:-1,className:"recharts-pie-sector"},g1(p,w,_),{onMouseEnter:g(w,_),onMouseLeave:y(w,_),onClick:x(w,_)}),T.createElement(Vte,K0({option:a??I,index:_,shapeType:"sector",isActive:N},D)))}))}function R5e(t){var e,{pieSettings:r,displayedData:n,cells:i,offset:a}=t,{cornerRadius:o,startAngle:c,endAngle:u,dataKey:l,nameKey:d,tooltipType:f}=r,m=Math.abs(r.minAngle),p=k5e(c,u),g=Math.abs(p),y=n.length<=1?0:(e=r.paddingAngle)!==null&&e!==void 0?e:0,x=n.filter(I=>dl(I,l,0)!==0).length,w=(g>=360?x:x-1)*y,_=g-x*m-w,E=n.reduce((I,D)=>{var U=dl(D,l,0);return I+(Ei(U)?U:0)},0),N;if(E>0){var C;N=n.map((I,D)=>{var U=dl(I,l,0),G=dl(I,d,D),q=N5e(r,a,I),J=(Ei(U)?U:0)/E,de,xe=Pc(Pc({},I),i&&i[D]&&i[D].props);D?de=C.endAngle+pd(p)*y*(U!==0?1:0):de=c;var we=de+pd(p)*((U!==0?m:0)+J*_),ve=(de+we)/2,ne=(q.innerRadius+q.outerRadius)/2,ae=[{name:G,value:U,payload:xe,dataKey:l,type:f,graphicalItemId:r.id}],oe=rl(q.cx,q.cy,ne,ve);return C=Pc(Pc(Pc(Pc({},r.presentationProps),{},{percent:J,cornerRadius:typeof o=="string"?parseFloat(o):o,name:G,tooltipPayload:ae,midAngle:ve,middleRadius:ne,tooltipPosition:oe},xe),q),{},{value:U,dataKey:l,startAngle:de,endAngle:we,payload:xe,paddingAngle:pd(p)*y}),C})}return N}function D5e(t){var{showLabels:e,sectors:r,children:n}=t,i=T.useMemo(()=>!e||!r?[]:r.map(a=>({value:a.value,payload:a.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:a.cx,cy:a.cy,innerRadius:a.innerRadius,outerRadius:a.outerRadius,startAngle:a.startAngle,endAngle:a.endAngle,clockWise:!1},fill:a.fill})),[r,e]);return T.createElement(ICe,{value:e?i:void 0},n)}function M5e(t){var{props:e,previousSectorsRef:r,id:n}=t,{sectors:i,isAnimationActive:a,animationBegin:o,animationDuration:c,animationEasing:u,activeShape:l,inactiveShape:d,onAnimationStart:f,onAnimationEnd:m}=e,p=K_(e,"recharts-pie-"),g=r.current,[y,x]=T.useState(!1),w=T.useCallback(()=>{typeof m=="function"&&m(),x(!1)},[m]),_=T.useCallback(()=>{typeof f=="function"&&f(),x(!0)},[f]);return T.createElement(D5e,{showLabels:!y,sectors:i},T.createElement(V_,{animationId:p,begin:o,duration:c,isActive:a,easing:u,onAnimationStart:_,onAnimationEnd:w,key:p},E=>{var N,C=[],I=i&&i[0],D=(N=I?.startAngle)!==null&&N!==void 0?N:0;return i?.forEach((U,G)=>{var q=g&&g[G],J=G>0?yy(U,"paddingAngle",0):0;if(q){var de=dc(q.endAngle-q.startAngle,U.endAngle-U.startAngle,E),xe=Pc(Pc({},U),{},{startAngle:D+J,endAngle:D+de+J});C.push(xe),D=xe.endAngle}else{var{endAngle:we,startAngle:ve}=U,ne=dc(0,we-ve,E),ae=Pc(Pc({},U),{},{startAngle:D+J,endAngle:D+ne+J});C.push(ae),D=ae.endAngle}}),r.current=C,T.createElement(Mc,null,T.createElement(O5e,{sectors:C,activeShape:l,inactiveShape:d,allOtherPieProps:e,shape:e.shape,id:n}))}),T.createElement(P5e,{showLabels:!y,sectors:i,props:e}),e.children)}var F5e={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:Oc.area};function U5e(t){var{id:e}=t,r=R5(t,y5e),{hide:n,className:i,rootTabIndex:a}=t,o=T.useMemo(()=>OM(t.children,e1),[t.children]),c=si(d=>PNe(d,e,o)),u=T.useRef(null),l=ja("recharts-pie",i);return n||c==null?(u.current=null,T.createElement(Mc,{tabIndex:a,className:l})):T.createElement(ah,{zIndex:t.zIndex},T.createElement(j5e,{dataKey:t.dataKey,nameKey:t.nameKey,sectors:c,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,tooltipType:t.tooltipType,id:e}),T.createElement(Mc,{tabIndex:a,className:l},T.createElement(M5e,{props:Pc(Pc({},r),{},{sectors:c}),previousSectorsRef:u,id:e})))}function Yte(t){var e=Uc(t,F5e),{id:r}=e,n=R5(e,x5e),i=xu(n);return T.createElement(UM,{id:r,type:"pie"},a=>T.createElement(T.Fragment,null,T.createElement(Wte,{type:"pie",id:a,data:n.data,dataKey:n.dataKey,hide:n.hide,angleAxisId:0,radiusAxisId:0,name:n.name,nameKey:n.nameKey,tooltipType:n.tooltipType,legendType:n.legendType,fill:n.fill,cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,paddingAngle:n.paddingAngle,minAngle:n.minAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,cornerRadius:n.cornerRadius,presentationProps:i,maxRadius:e.maxRadius}),T.createElement(S5e,K0({},n,{id:a})),T.createElement(U5e,K0({},n,{id:a}))))}Yte.displayName="Pie";var $5e=["points"];function Iz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function GL(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Iz(Object(r),!0).forEach(function(n){H5e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Iz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function H5e(t,e,r){return(e=Q5e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Q5e(t){var e=z5e(t,"string");return typeof e=="symbol"?e:e+""}function z5e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function BC(){return BC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},BC.apply(null,arguments)}function V5e(t,e){if(t==null)return{};var r,n,i=K5e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function K5e(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function G5e(t){var{option:e,dotProps:r,className:n}=t;if(T.isValidElement(e))return T.cloneElement(e,r);if(typeof e=="function")return e(r);var i=ja(n,typeof e!="boolean"?e.className:""),a=r??{},{points:o}=a,c=V5e(a,$5e);return T.createElement(CM,BC({},c,{className:i}))}function W5e(t,e){return t==null?!1:e?!0:t.length===1}function Y5e(t){var{points:e,dot:r,className:n,dotClassName:i,dataKey:a,baseProps:o,needClip:c,clipPathId:u,zIndex:l=Oc.scatter}=t;if(!W5e(e,r))return null;var d=MNe(r),f=w0e(r),m=e.map((g,y)=>{var x,w,_=GL(GL(GL({r:3},o),f),{},{index:y,cx:(x=g.x)!==null&&x!==void 0?x:void 0,cy:(w=g.y)!==null&&w!==void 0?w:void 0,dataKey:a,value:g.value,payload:g.payload,points:e});return T.createElement(G5e,{key:"dot-".concat(y),option:r,dotProps:_,className:i})}),p={};return c&&u!=null&&(p.clipPath="url(#clipPath-".concat(d?"":"dots-").concat(u,")")),T.createElement(ah,{zIndex:l},T.createElement(Mc,BC({className:n},p),m))}function Bz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Pz(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Bz(Object(r),!0).forEach(function(n){q5e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Bz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function q5e(t,e,r){return(e=X5e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function X5e(t){var e=Z5e(t,"string");return typeof e=="symbol"?e:e+""}function Z5e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var qte=0,J5e={xAxis:{},yAxis:{},zAxis:{}},Xte=Wh({name:"cartesianAxis",initialState:J5e,reducers:{addXAxis:{reducer(t,e){t.xAxis[e.payload.id]=e.payload},prepare:Xl()},replaceXAxis:{reducer(t,e){var{prev:r,next:n}=e.payload;t.xAxis[r.id]!==void 0&&(r.id!==n.id&&delete t.xAxis[r.id],t.xAxis[n.id]=n)},prepare:Xl()},removeXAxis:{reducer(t,e){delete t.xAxis[e.payload.id]},prepare:Xl()},addYAxis:{reducer(t,e){t.yAxis[e.payload.id]=e.payload},prepare:Xl()},replaceYAxis:{reducer(t,e){var{prev:r,next:n}=e.payload;t.yAxis[r.id]!==void 0&&(r.id!==n.id&&delete t.yAxis[r.id],t.yAxis[n.id]=n)},prepare:Xl()},removeYAxis:{reducer(t,e){delete t.yAxis[e.payload.id]},prepare:Xl()},addZAxis:{reducer(t,e){t.zAxis[e.payload.id]=e.payload},prepare:Xl()},replaceZAxis:{reducer(t,e){var{prev:r,next:n}=e.payload;t.zAxis[r.id]!==void 0&&(r.id!==n.id&&delete t.zAxis[r.id],t.zAxis[n.id]=n)},prepare:Xl()},removeZAxis:{reducer(t,e){delete t.zAxis[e.payload.id]},prepare:Xl()},updateYAxisWidth(t,e){var{id:r,width:n}=e.payload,i=t.yAxis[r];if(i){var a,o=i.widthHistory||[];if(o.length===3&&o[0]===o[2]&&n===o[1]&&n!==i.width&&Math.abs(n-((a=o[0])!==null&&a!==void 0?a:0))<=1)return;var c=[...o,n].slice(-3);t.yAxis[r]=Pz(Pz({},i),{},{width:n,widthHistory:c})}}}}),{addXAxis:eke,replaceXAxis:tke,removeXAxis:rke,addYAxis:nke,replaceYAxis:ike,removeYAxis:ske,addZAxis:QXe,replaceZAxis:zXe,removeZAxis:VXe,updateYAxisWidth:ake}=Xte.actions,oke=Xte.reducer,lke=dr([Ku],t=>({top:t.top,bottom:t.bottom,left:t.left,right:t.right})),cke=dr([lke,Ag,pg],(t,e,r)=>{if(!(!t||e==null||r==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,r-t.top-t.bottom)}}),Zte=()=>si(cke),uke=()=>si(uje);function Oz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function WL(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Oz(Object(r),!0).forEach(function(n){dke(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Oz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function dke(t,e,r){return(e=hke(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function hke(t){var e=fke(t,"string");return typeof e=="symbol"?e:e+""}function fke(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var mke=t=>{var{point:e,childIndex:r,mainColor:n,activeDot:i,dataKey:a,clipPath:o}=t;if(i===!1||e.x==null||e.y==null)return null;var c={index:r,dataKey:a,cx:e.x,cy:e.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:e.payload,value:e.value},u=WL(WL(WL({},c),gy(i)),JR(i)),l;return T.isValidElement(i)?l=T.cloneElement(i,u):typeof i=="function"?l=i(u):l=T.createElement(CM,u),T.createElement(Mc,{className:"recharts-active-dot",clipPath:o},l)};function Ake(t){var{points:e,mainColor:r,activeDot:n,itemDataKey:i,clipPath:a,zIndex:o=Oc.activeDot}=t,c=si(V0),u=uke();if(e==null||u==null)return null;var l=e.find(d=>u.includes(d.payload));return ru(l)?null:T.createElement(ah,{zIndex:o},T.createElement(mke,{point:l,childIndex:Number(c),mainColor:r,dataKey:i,activeDot:n,clipPath:a}))}function Rz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function PC(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Rz(Object(r),!0).forEach(function(n){pke(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Rz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function pke(t,e,r){return(e=gke(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function gke(t){var e=vke(t,"string");return typeof e=="symbol"?e:e+""}function vke(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Jte=(t,e)=>uE(t,"radiusAxis",e),yke=dr([Jte],t=>{if(t!=null)return{scale:t}}),xke=dr([eE,Jte],(t,e)=>{if(!(t==null||e==null))return PC(PC({},t),{},{scale:e})}),bke=(t,e,r,n)=>dE(t,"radiusAxis",e,n),ere=(t,e,r)=>_1(t,r),tre=(t,e,r)=>uE(t,"angleAxis",r),wke=dr([ere,tre],(t,e)=>{if(!(t==null||e==null))return PC(PC({},t),{},{scale:e})}),_ke=(t,e,r,n)=>dE(t,"angleAxis",r,n),Eke=dr([ere,tre,tE],(t,e,r)=>{if(!(r==null||e==null))return{scale:e,type:t.type,dataKey:t.dataKey,cx:r.cx,cy:r.cy}}),Ske=(t,e,r,n,i)=>i,jke=dr([Ya,xke,bke,wke,_ke],(t,e,r,n,i)=>mg(t,"radiusAxis")?Kb(e,r,!1):Kb(n,i,!1)),Tke=dr([NM,Ske],(t,e)=>{if(t!=null){var r=t.find(n=>n.type==="radar"&&e===n.id);return r?.dataKey}}),Cke=dr([yke,Eke,X_,Tke,jke],(t,e,r,n,i)=>{var{chartData:a,dataStartIndex:o,dataEndIndex:c}=r;if(!(t==null||e==null||a==null||i==null||n==null)){var u=a.slice(o,c+1);return Mke({radiusAxis:t,angleAxis:e,displayedData:u,dataKey:n,bandSize:i})}}),Nke=["id"];function q2(){return q2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},q2.apply(null,arguments)}function Dz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Hh(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Dz(Object(r),!0).forEach(function(n){kke(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Dz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function kke(t,e,r){return(e=Lke(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Lke(t){var e=Ike(t,"string");return typeof e=="symbol"?e:e+""}function Ike(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Bke(t,e){if(t==null)return{};var r,n,i=Pke(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function Pke(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function $M(t,e){return t&&t!=="none"?t:e}var Oke=t=>{var{dataKey:e,name:r,stroke:n,fill:i,legendType:a,hide:o}=t;return[{inactive:o,dataKey:e,type:a,color:$M(n,i),value:v1(r,e),payload:t}]},Rke=T.memo(t=>{var{dataKey:e,stroke:r,strokeWidth:n,fill:i,name:a,hide:o,tooltipType:c,id:u}=t,l={dataDefinedOnItem:void 0,getPosition:X0,settings:{stroke:r,strokeWidth:n,fill:i,nameKey:void 0,dataKey:e,name:v1(a,e),hide:o,type:c,color:$M(r,i),unit:"",graphicalItemId:u}};return T.createElement(FM,{tooltipEntrySettings:l})});function Dke(t){var{points:e,props:r}=t,{dot:n,dataKey:i}=r,{id:a}=r,o=Bke(r,Nke),c=xu(o);return T.createElement(Y5e,{points:e,dot:n,className:"recharts-radar-dots",dotClassName:"recharts-radar-dot",dataKey:i,baseProps:c})}function Mke(t){var{radiusAxis:e,angleAxis:r,displayedData:n,dataKey:i,bandSize:a}=t,{cx:o,cy:c}=r,u=!1,l=[],d=r.type!=="number"?a??0:0;n.forEach((m,p)=>{var g,y,x=dl(m,r.dataKey,p),w=dl(m,i),_=((g=r.scale.map(x))!==null&&g!==void 0?g:0)+d,E=Array.isArray(w)?Lte(w):w,N=ru(E)?0:(y=e.scale.map(E))!==null&&y!==void 0?y:0;Array.isArray(w)&&w.length>=2&&(u=!0),l.push(Hh(Hh({},rl(o,c,N,_)),{},{name:x,value:w,cx:o,cy:c,radius:N,angle:_,payload:m}))});var f=[];return u&&l.forEach(m=>{if(Array.isArray(m.value)){var p,g=m.value[0],y=ru(g)?0:(p=e.scale.map(g))!==null&&p!==void 0?p:0;f.push(Hh(Hh({},m),{},{radius:y},rl(o,c,y,m.angle)))}else f.push(m)}),{points:l,isRange:u,baseLinePoints:f}}function Fke(t){var{showLabels:e,points:r,children:n}=t,i=r.map(a=>{var o,c={x:a.x,y:a.y,width:0,lowerWidth:0,upperWidth:0,height:0};return Hh(Hh({},c),{},{value:(o=a.value)!==null&&o!==void 0?o:"",payload:a.payload,parentViewBox:void 0,viewBox:c,fill:void 0})});return T.createElement(Bte,{value:e?i:void 0},n)}function Uke(t){var{points:e,baseLinePoints:r,props:n}=t;if(e==null)return null;var{shape:i,isRange:a,connectNulls:o}=n,c=d=>{var{onMouseEnter:f}=n;f&&f(n,d)},u=d=>{var{onMouseLeave:f}=n;f&&f(n,d)},l;return T.isValidElement(i)?l=T.cloneElement(i,Hh(Hh({},n),{},{points:e})):typeof i=="function"?l=i(Hh(Hh({},n),{},{points:e})):l=T.createElement(Ote,q2({},zu(n),{onMouseEnter:c,onMouseLeave:u,points:e,baseLinePoints:a?r:void 0,connectNulls:o})),T.createElement(Mc,{className:"recharts-radar-polygon"},l,T.createElement(Dke,{props:n,points:e}))}var Mz=(t,e,r)=>(n,i)=>{var a=t&&t[Math.floor(i*e)];return a?Hh(Hh({},n),{},{x:dc(a.x,n.x,r),y:dc(a.y,n.y,r)}):Hh(Hh({},n),{},{x:dc(n.cx,n.x,r),y:dc(n.cy,n.y,r)})};function $ke(t){var{props:e,previousPointsRef:r,previousBaseLinePointsRef:n}=t,{points:i,baseLinePoints:a,isAnimationActive:o,animationBegin:c,animationDuration:u,animationEasing:l,onAnimationEnd:d,onAnimationStart:f}=e,m=r.current,p=n.current,g=m?m.length/i.length:1,y=p?p.length/a.length:1,x=K_(e,"recharts-radar-"),[w,_]=T.useState(!1),E=!w,N=T.useCallback(()=>{typeof d=="function"&&d(),_(!1)},[d]),C=T.useCallback(()=>{typeof f=="function"&&f(),_(!0)},[f]);return T.createElement(Fke,{showLabels:E,points:i},T.createElement(V_,{animationId:x,begin:c,duration:u,isActive:o,easing:l,key:"radar-".concat(x),onAnimationEnd:N,onAnimationStart:C},I=>{var D=I===1?i:i.map(Mz(m,g,I)),U=I===1?a:a?.map(Mz(p,y,I));return I>0&&(r.current=D,n.current=U),T.createElement(Uke,{points:D,baseLinePoints:U,props:e})}),T.createElement(TM,{label:e.label}),e.children)}function Hke(t){var e=T.useRef(void 0),r=T.useRef(void 0);return T.createElement($ke,{props:t,previousPointsRef:e,previousBaseLinePointsRef:r})}var Qke={activeDot:!0,angleAxisId:0,animationBegin:0,animationDuration:1500,animationEasing:"ease",dot:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",radiusAxisId:0,zIndex:Oc.area};function zke(t){var{hide:e,className:r,points:n}=t;if(e)return null;var i=ja("recharts-radar",r);return T.createElement(ah,{zIndex:t.zIndex},T.createElement(Mc,{className:i},T.createElement(Hke,t)),T.createElement(Ake,{points:n,mainColor:$M(t.stroke,t.fill),itemDataKey:t.dataKey,activeDot:t.activeDot}))}function Vke(t){var e=sh(),r=si(n=>Cke(n,t.radiusAxisId,t.angleAxisId,e,t.id));return r?.points==null?null:T.createElement(zke,q2({},t,{points:r?.points,baseLinePoints:r?.baseLinePoints,isRange:r?.isRange}))}function rre(t){var e=Uc(t,Qke);return T.createElement(UM,{id:e.id,type:"radar"},r=>T.createElement(T.Fragment,null,T.createElement(Wte,{type:"radar",id:r,data:void 0,dataKey:e.dataKey,hide:e.hide,angleAxisId:e.angleAxisId,radiusAxisId:e.radiusAxisId}),T.createElement(Kte,{legendPayload:Oke(e)}),T.createElement(Rke,{dataKey:e.dataKey,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,tooltipType:e.tooltipType,id:r}),T.createElement(Vke,q2({},e,{id:r}))))}rre.displayName="Radar";var Fz=(t,e,r)=>{var n=r??t;if(!ru(n))return ih(n,e,0)},Kke=(t,e,r)=>{var n={},i=t.filter(E5),a=t.filter(l=>l.stackId==null),o=i.reduce((l,d)=>{var f=l[d.stackId];return f==null&&(f=[]),f.push(d),l[d.stackId]=f,l},n),c=Object.entries(o).map(l=>{var d,[f,m]=l,p=m.map(y=>y.dataKey),g=Fz(e,r,(d=m[0])===null||d===void 0?void 0:d.barSize);return{stackId:f,dataKeys:p,barSize:g}}),u=a.map(l=>{var d=[l.dataKey].filter(m=>m!=null),f=Fz(e,r,l.barSize);return{stackId:void 0,dataKeys:d,barSize:f}});return[...c,...u]};function Uz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function lS(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Uz(Object(r),!0).forEach(function(n){Gke(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Uz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Gke(t,e,r){return(e=Wke(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Wke(t){var e=Yke(t,"string");return typeof e=="symbol"?e:e+""}function Yke(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function qke(t,e,r,n,i){var a,o=n.length;if(!(o<1)){var c=ih(t,r,0,!0),u,l=[];if(Qa((a=n[0])===null||a===void 0?void 0:a.barSize)){var d=!1,f=r/o,m=n.reduce((_,E)=>_+(E.barSize||0),0);m+=(o-1)*c,m>=r&&(m-=(o-1)*c,c=0),m>=r&&f>0&&(d=!0,f*=.9,m=o*f);var p=(r-m)/2>>0,g={offset:p-c,size:0};u=n.reduce((_,E)=>{var N,C={stackId:E.stackId,dataKeys:E.dataKeys,position:{offset:g.offset+g.size+c,size:d?f:(N=E.barSize)!==null&&N!==void 0?N:0}},I=[..._,C];return g=C.position,I},l)}else{var y=ih(e,r,0,!0);r-2*y-(o-1)*c<=0&&(c=0);var x=(r-2*y-(o-1)*c)/o;x>1&&(x>>=0);var w=Qa(i)?Math.min(x,i):x;u=n.reduce((_,E,N)=>[..._,{stackId:E.stackId,dataKeys:E.dataKeys,position:{offset:y+(x+c)*N+(x-w)/2,size:w}}],l)}return u}}var Xke=(t,e,r,n,i,a,o)=>{var c=ru(o)?e:o,u=qke(r,n,i!==a?i:a,t,c);return i!==a&&u!=null&&(u=u.map(l=>lS(lS({},l),{},{position:lS(lS({},l.position),{},{offset:l.position.offset-i/2})}))),u},Zke=(t,e)=>{var r=GD(e);if(!(!t||r==null||e==null)){var{stackId:n}=e;if(n!=null){var i=t[n];if(i){var{stackedData:a}=i;if(a)return a.find(o=>o.key===r)}}}},Jke=(t,e)=>{if(!(t==null||e==null)){var r=t.find(n=>n.stackId===e.stackId&&e.dataKey!=null&&n.dataKeys.includes(e.dataKey));if(r!=null)return r.position}};function e4e(t,e){return t&&typeof t=="object"&&"zIndex"in t&&typeof t.zIndex=="number"&&Qa(t.zIndex)?t.zIndex:e}var nre=t=>{var{chartData:e}=t,r=Al(),n=sh();return T.useEffect(()=>n?()=>{}:(r(RQ(e)),()=>{r(RQ(void 0))}),[e,r,n]),null},$z={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},ire=Wh({name:"brush",initialState:$z,reducers:{setBrushSettings(t,e){return e.payload==null?$z:e.payload}}}),{setBrushSettings:KXe}=ire.actions,t4e=ire.reducer;function r4e(t){return(t%180+180)%180}var n4e=function(e){var{width:r,height:n}=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=r4e(i),o=a*Math.PI/180,c=Math.atan(n/r),u=o>c&&o<Math.PI-c?n/Math.sin(o):r/Math.cos(o);return Math.abs(u)},i4e={dots:[],areas:[],lines:[]},sre=Wh({name:"referenceElements",initialState:i4e,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var r=$m(t).dots.findIndex(n=>n===e.payload);r!==-1&&t.dots.splice(r,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var r=$m(t).areas.findIndex(n=>n===e.payload);r!==-1&&t.areas.splice(r,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var r=$m(t).lines.findIndex(n=>n===e.payload);r!==-1&&t.lines.splice(r,1)}}}),{addDot:GXe,removeDot:WXe,addArea:YXe,removeArea:qXe,addLine:XXe,removeLine:ZXe}=sre.actions,s4e=sre.reducer,a4e=T.createContext(void 0),o4e=t=>{var{children:e}=t,[r]=T.useState("".concat(R2("recharts"),"-clip")),n=Zte();if(n==null)return null;var{x:i,y:a,width:o,height:c}=n;return T.createElement(a4e.Provider,{value:r},T.createElement("defs",null,T.createElement("clipPath",{id:r},T.createElement("rect",{x:i,y:a,height:c,width:o}))),e)};function are(t,e){if(e<1)return[];if(e===1)return t;for(var r=[],n=0;n<t.length;n+=e){var i=t[n];i!==void 0&&r.push(i)}return r}function l4e(t,e,r){var n={width:t.width+e.width,height:t.height+e.height};return n4e(n,r)}function c4e(t,e,r){var n=r==="width",{x:i,y:a,width:o,height:c}=t;return e===1?{start:n?i:a,end:n?i+o:a+c}:{start:n?i+o:a+c,end:n?i:a}}function X2(t,e,r,n,i){if(t*e<t*n||t*e>t*i)return!1;var a=r();return t*(e-t*a/2-n)>=0&&t*(e+t*a/2-i)<=0}function u4e(t,e){return are(t,e+1)}function d4e(t,e,r,n,i){for(var a=(n||[]).slice(),{start:o,end:c}=e,u=0,l=1,d=o,f=function(){var g=n?.[u];if(g===void 0)return{v:are(n,l)};var y=u,x,w=()=>(x===void 0&&(x=r(g,y)),x),_=g.coordinate,E=u===0||X2(t,_,w,d,c);E||(u=0,d=o,l+=1),E&&(d=_+t*(w()/2+i),u+=l)},m;l<=a.length;)if(m=f(),m)return m.v;return[]}function h4e(t,e,r,n,i){var a=(n||[]).slice(),o=a.length;if(o===0)return[];for(var{start:c,end:u}=e,l=1;l<=o;l++){for(var d=(o-1)%l,f=c,m=!0,p=function(){var N=n[y];if(N==null)return 0;var C=y,I,D=()=>(I===void 0&&(I=r(N,C)),I),U=N.coordinate,G=y===d||X2(t,U,D,f,u);if(!G)return m=!1,1;G&&(f=U+t*(D()/2+i))},g,y=d;y<o&&(g=p(),!(g!==0&&g===1));y+=l);if(m){for(var x=[],w=d;w<o;w+=l){var _=n[w];_!=null&&x.push(_)}return x}}return[]}function Hz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function eh(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Hz(Object(r),!0).forEach(function(n){f4e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Hz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function f4e(t,e,r){return(e=m4e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function m4e(t){var e=A4e(t,"string");return typeof e=="symbol"?e:e+""}function A4e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function p4e(t,e,r,n,i){for(var a=(n||[]).slice(),o=a.length,{start:c}=e,{end:u}=e,l=function(m){var p=a[m];if(p==null)return 1;var g=p,y,x=()=>(y===void 0&&(y=r(p,m)),y);if(m===o-1){var w=t*(g.coordinate+t*x()/2-u);a[m]=g=eh(eh({},g),{},{tickCoord:w>0?g.coordinate-w*t:g.coordinate})}else a[m]=g=eh(eh({},g),{},{tickCoord:g.coordinate});if(g.tickCoord!=null){var _=X2(t,g.tickCoord,x,c,u);_&&(u=g.tickCoord-t*(x()/2+i),a[m]=eh(eh({},g),{},{isShow:!0}))}},d=o-1;d>=0;d--)l(d);return a}function g4e(t,e,r,n,i,a){var o=(n||[]).slice(),c=o.length,{start:u,end:l}=e;if(a){var d=n[c-1];if(d!=null){var f=r(d,c-1),m=t*(d.coordinate+t*f/2-l);if(o[c-1]=d=eh(eh({},d),{},{tickCoord:m>0?d.coordinate-m*t:d.coordinate}),d.tickCoord!=null){var p=X2(t,d.tickCoord,()=>f,u,l);p&&(l=d.tickCoord-t*(f/2+i),o[c-1]=eh(eh({},d),{},{isShow:!0}))}}}for(var g=a?c-1:c,y=function(_){var E=o[_];if(E==null)return 1;var N=E,C,I=()=>(C===void 0&&(C=r(E,_)),C);if(_===0){var D=t*(N.coordinate-t*I()/2-u);o[_]=N=eh(eh({},N),{},{tickCoord:D<0?N.coordinate-D*t:N.coordinate})}else o[_]=N=eh(eh({},N),{},{tickCoord:N.coordinate});if(N.tickCoord!=null){var U=X2(t,N.tickCoord,I,u,l);U&&(u=N.tickCoord+t*(I()/2+i),o[_]=eh(eh({},N),{},{isShow:!0}))}},x=0;x<g;x++)y(x);return o}function HM(t,e,r){var{tick:n,ticks:i,viewBox:a,minTickGap:o,orientation:c,interval:u,tickFormatter:l,unit:d,angle:f}=t;if(!i||!i.length||!n)return[];if(Ei(u)||A5.isSsr){var m;return(m=u4e(i,Ei(u)?u:0))!==null&&m!==void 0?m:[]}var p=[],g=c==="top"||c==="bottom"?"width":"height",y=d&&g==="width"?c2(d,{fontSize:e,letterSpacing:r}):{width:0,height:0},x=(C,I)=>{var D=typeof l=="function"?l(C.value,I):C.value;return g==="width"?l4e(c2(D,{fontSize:e,letterSpacing:r}),y,f):c2(D,{fontSize:e,letterSpacing:r})[g]},w=i[0],_=i[1],E=i.length>=2&&w!=null&&_!=null?pd(_.coordinate-w.coordinate):1,N=c4e(a,E,g);return u==="equidistantPreserveStart"?d4e(E,N,x,i,o):u==="equidistantPreserveEnd"?h4e(E,N,x,i,o):(u==="preserveStart"||u==="preserveStartEnd"?p=g4e(E,N,x,i,o,u==="preserveStartEnd"):p=p4e(E,N,x,i,o),p.filter(C=>C.isShow))}var v4e=t=>{var{ticks:e,label:r,labelGapWithTick:n=5,tickSize:i=0,tickMargin:a=0}=t,o=0;if(e){Array.from(e).forEach(d=>{if(d){var f=d.getBoundingClientRect();f.width>o&&(o=f.width)}});var c=r?r.getBoundingClientRect().width:0,u=i+a,l=o+u+c+(r?n:0);return Math.round(l)}return 0},y4e=["axisLine","width","height","className","hide","ticks","axisType"];function x4e(t,e){if(t==null)return{};var r,n,i=b4e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function b4e(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function jy(){return jy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},jy.apply(null,arguments)}function Qz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Nc(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Qz(Object(r),!0).forEach(function(n){w4e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Qz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function w4e(t,e,r){return(e=_4e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _4e(t){var e=E4e(t,"string");return typeof e=="symbol"?e:e+""}function E4e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Yp={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:Oc.axis};function S4e(t){var{x:e,y:r,width:n,height:i,orientation:a,mirror:o,axisLine:c,otherSvgProps:u}=t;if(!c)return null;var l=Nc(Nc(Nc({},u),xu(c)),{},{fill:"none"});if(a==="top"||a==="bottom"){var d=+(a==="top"&&!o||a==="bottom"&&o);l=Nc(Nc({},l),{},{x1:e,y1:r+d*i,x2:e+n,y2:r+d*i})}else{var f=+(a==="left"&&!o||a==="right"&&o);l=Nc(Nc({},l),{},{x1:e+f*n,y1:r,x2:e+f*n,y2:r+i})}return T.createElement("line",jy({},l,{className:ja("recharts-cartesian-axis-line",yy(c,"className"))}))}function j4e(t,e,r,n,i,a,o,c,u){var l,d,f,m,p,g,y=c?-1:1,x=t.tickSize||o,w=Ei(t.tickCoord)?t.tickCoord:t.coordinate;switch(a){case"top":l=d=t.coordinate,m=r+ +!c*i,f=m-y*x,g=f-y*u,p=w;break;case"left":f=m=t.coordinate,d=e+ +!c*n,l=d-y*x,p=l-y*u,g=w;break;case"right":f=m=t.coordinate,d=e+ +c*n,l=d+y*x,p=l+y*u,g=w;break;default:l=d=t.coordinate,m=r+ +c*i,f=m+y*x,g=f+y*u,p=w;break}return{line:{x1:l,y1:f,x2:d,y2:m},tick:{x:p,y:g}}}function T4e(t,e){switch(t){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function C4e(t,e){switch(t){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function N4e(t){var{option:e,tickProps:r,value:n}=t,i,a=ja(r.className,"recharts-cartesian-axis-tick-value");if(T.isValidElement(e))i=T.cloneElement(e,Nc(Nc({},r),{},{className:a}));else if(typeof e=="function")i=e(Nc(Nc({},r),{},{className:a}));else{var o="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(o=ja(o,IM(e))),i=T.createElement(cE,jy({},r,{className:o}),n)}return i}var k4e=T.forwardRef((t,e)=>{var{ticks:r=[],tick:n,tickLine:i,stroke:a,tickFormatter:o,unit:c,padding:u,tickTextProps:l,orientation:d,mirror:f,x:m,y:p,width:g,height:y,tickSize:x,tickMargin:w,fontSize:_,letterSpacing:E,getTicksConfig:N,events:C,axisType:I}=t,D=HM(Nc(Nc({},N),{},{ticks:r}),_,E),U=T4e(d,f),G=C4e(d,f),q=xu(N),J=gy(n),de={};typeof i=="object"&&(de=i);var xe=Nc(Nc({},q),{},{fill:"none"},de),we=D.map(ae=>Nc({entry:ae},j4e(ae,m,p,g,y,d,x,f,w))),ve=we.map(ae=>{var{entry:oe,line:Ie}=ae;return T.createElement(Mc,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(oe.value,"-").concat(oe.coordinate,"-").concat(oe.tickCoord)},i&&T.createElement("line",jy({},xe,Ie,{className:ja("recharts-cartesian-axis-tick-line",yy(i,"className"))})))}),ne=we.map((ae,oe)=>{var Ie,Ce,{entry:be,tick:ue}=ae,Pe=Nc(Nc(Nc(Nc({verticalAnchor:G},q),{},{textAnchor:U,stroke:"none",fill:a},ue),{},{index:oe,payload:be,visibleTicksCount:D.length,tickFormatter:o,padding:u},l),{},{angle:(Ie=(Ce=l?.angle)!==null&&Ce!==void 0?Ce:q.angle)!==null&&Ie!==void 0?Ie:0}),Re=Nc(Nc({},Pe),J);return T.createElement(Mc,jy({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(be.value,"-").concat(be.coordinate,"-").concat(be.tickCoord)},g1(C,be,oe)),n&&T.createElement(N4e,{option:n,tickProps:Re,value:"".concat(typeof o=="function"?o(be.value,oe):be.value).concat(c||"")}))});return T.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(I,"-ticks")},ne.length>0&&T.createElement(ah,{zIndex:Oc.label},T.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(I,"-tick-labels"),ref:e},ne)),ve.length>0&&T.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(I,"-tick-lines")},ve))}),L4e=T.forwardRef((t,e)=>{var{axisLine:r,width:n,height:i,className:a,hide:o,ticks:c,axisType:u}=t,l=x4e(t,y4e),[d,f]=T.useState(""),[m,p]=T.useState(""),g=T.useRef(null);T.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var x;return v4e({ticks:g.current,label:(x=t.labelRef)===null||x===void 0?void 0:x.current,labelGapWithTick:5,tickSize:t.tickSize,tickMargin:t.tickMargin})}}));var y=T.useCallback(x=>{if(x){var w=x.getElementsByClassName("recharts-cartesian-axis-tick-value");g.current=w;var _=w[0];if(_){var E=window.getComputedStyle(_),N=E.fontSize,C=E.letterSpacing;(N!==d||C!==m)&&(f(N),p(C))}}},[d,m]);return o||n!=null&&n<=0||i!=null&&i<=0?null:T.createElement(ah,{zIndex:t.zIndex},T.createElement(Mc,{className:ja("recharts-cartesian-axis",a)},T.createElement(S4e,{x:t.x,y:t.y,width:n,height:i,orientation:t.orientation,mirror:t.mirror,axisLine:r,otherSvgProps:xu(t)}),T.createElement(k4e,{ref:y,axisType:u,events:l,fontSize:d,getTicksConfig:t,height:t.height,letterSpacing:m,mirror:t.mirror,orientation:t.orientation,padding:t.padding,stroke:t.stroke,tick:t.tick,tickFormatter:t.tickFormatter,tickLine:t.tickLine,tickMargin:t.tickMargin,tickSize:t.tickSize,tickTextProps:t.tickTextProps,ticks:c,unit:t.unit,width:t.width,x:t.x,y:t.y}),T.createElement(hCe,{x:t.x,y:t.y,width:t.width,height:t.height,lowerWidth:t.width,upperWidth:t.width},T.createElement(wCe,{label:t.label,labelRef:t.labelRef}),t.children)))}),QM=T.forwardRef((t,e)=>{var r=Uc(t,Yp);return T.createElement(L4e,jy({},r,{ref:e}))});QM.displayName="CartesianAxis";var I4e=["x1","y1","x2","y2","key"],B4e=["offset"],P4e=["xAxisId","yAxisId"],O4e=["xAxisId","yAxisId"];function zz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function rh(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?zz(Object(r),!0).forEach(function(n){R4e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function R4e(t,e,r){return(e=D4e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function D4e(t){var e=M4e(t,"string");return typeof e=="symbol"?e:e+""}function M4e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Wv(){return Wv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Wv.apply(null,arguments)}function OC(t,e){if(t==null)return{};var r,n,i=F4e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function F4e(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var U4e=t=>{var{fill:e}=t;if(!e||e==="none")return null;var{fillOpacity:r,x:n,y:i,width:a,height:o,ry:c}=t;return T.createElement("rect",{x:n,y:i,ry:c,width:a,height:o,stroke:"none",fill:e,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function ore(t){var{option:e,lineItemProps:r}=t,n;if(T.isValidElement(e))n=T.cloneElement(e,r);else if(typeof e=="function")n=e(r);else{var i,{x1:a,y1:o,x2:c,y2:u,key:l}=r,d=OC(r,I4e),f=(i=xu(d))!==null&&i!==void 0?i:{},{offset:m}=f,p=OC(f,B4e);n=T.createElement("line",Wv({},p,{x1:a,y1:o,x2:c,y2:u,fill:"none",key:l}))}return n}function $4e(t){var{x:e,width:r,horizontal:n=!0,horizontalPoints:i}=t;if(!n||!i||!i.length)return null;var{xAxisId:a,yAxisId:o}=t,c=OC(t,P4e),u=i.map((l,d)=>{var f=rh(rh({},c),{},{x1:e,y1:l,x2:e+r,y2:l,key:"line-".concat(d),index:d});return T.createElement(ore,{key:"line-".concat(d),option:n,lineItemProps:f})});return T.createElement("g",{className:"recharts-cartesian-grid-horizontal"},u)}function H4e(t){var{y:e,height:r,vertical:n=!0,verticalPoints:i}=t;if(!n||!i||!i.length)return null;var{xAxisId:a,yAxisId:o}=t,c=OC(t,O4e),u=i.map((l,d)=>{var f=rh(rh({},c),{},{x1:l,y1:e,x2:l,y2:e+r,key:"line-".concat(d),index:d});return T.createElement(ore,{option:n,lineItemProps:f,key:"line-".concat(d)})});return T.createElement("g",{className:"recharts-cartesian-grid-vertical"},u)}function Q4e(t){var{horizontalFill:e,fillOpacity:r,x:n,y:i,width:a,height:o,horizontalPoints:c,horizontal:u=!0}=t;if(!u||!e||!e.length||c==null)return null;var l=c.map(f=>Math.round(f+i-i)).sort((f,m)=>f-m);i!==l[0]&&l.unshift(0);var d=l.map((f,m)=>{var p=l[m+1],g=p==null,y=g?i+o-f:p-f;if(y<=0)return null;var x=m%e.length;return T.createElement("rect",{key:"react-".concat(m),y:f,x:n,height:y,width:a,stroke:"none",fill:e[x],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return T.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function z4e(t){var{vertical:e=!0,verticalFill:r,fillOpacity:n,x:i,y:a,width:o,height:c,verticalPoints:u}=t;if(!e||!r||!r.length)return null;var l=u.map(f=>Math.round(f+i-i)).sort((f,m)=>f-m);i!==l[0]&&l.unshift(0);var d=l.map((f,m)=>{var p=l[m+1],g=p==null,y=g?i+o-f:p-f;if(y<=0)return null;var x=m%r.length;return T.createElement("rect",{key:"react-".concat(m),x:f,y:a,width:y,height:c,stroke:"none",fill:r[x],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return T.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var V4e=(t,e)=>{var{xAxis:r,width:n,height:i,offset:a}=t;return HZ(HM(rh(rh(rh({},Yp),r),{},{ticks:QZ(r),viewBox:{x:0,y:0,width:n,height:i}})),a.left,a.left+a.width,e)},K4e=(t,e)=>{var{yAxis:r,width:n,height:i,offset:a}=t;return HZ(HM(rh(rh(rh({},Yp),r),{},{ticks:QZ(r),viewBox:{x:0,y:0,width:n,height:i}})),a.top,a.top+a.height,e)},G4e={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:Oc.grid};function lre(t){var e=hD(),r=fD(),n=qZ(),i=rh(rh({},Uc(t,G4e)),{},{x:Ei(t.x)?t.x:n.left,y:Ei(t.y)?t.y:n.top,width:Ei(t.width)?t.width:n.width,height:Ei(t.height)?t.height:n.height}),{xAxisId:a,yAxisId:o,x:c,y:u,width:l,height:d,syncWithTicks:f,horizontalValues:m,verticalValues:p}=i,g=sh(),y=si(G=>EQ(G,"xAxis",a,g)),x=si(G=>EQ(G,"yAxis",o,g));if(!XA(l)||!XA(d)||!Ei(c)||!Ei(u))return null;var w=i.verticalCoordinatesGenerator||V4e,_=i.horizontalCoordinatesGenerator||K4e,{horizontalPoints:E,verticalPoints:N}=i;if((!E||!E.length)&&typeof _=="function"){var C=m&&m.length,I=_({yAxis:x?rh(rh({},x),{},{ticks:C?m:x.ticks}):void 0,width:e??l,height:r??d,offset:n},C?!0:f);iC(Array.isArray(I),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof I,"]")),Array.isArray(I)&&(E=I)}if((!N||!N.length)&&typeof w=="function"){var D=p&&p.length,U=w({xAxis:y?rh(rh({},y),{},{ticks:D?p:y.ticks}):void 0,width:e??l,height:r??d,offset:n},D?!0:f);iC(Array.isArray(U),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof U,"]")),Array.isArray(U)&&(N=U)}return T.createElement(ah,{zIndex:i.zIndex},T.createElement("g",{className:"recharts-cartesian-grid"},T.createElement(U4e,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),T.createElement(Q4e,Wv({},i,{horizontalPoints:E})),T.createElement(z4e,Wv({},i,{verticalPoints:N})),T.createElement($4e,Wv({},i,{offset:n,horizontalPoints:E,xAxis:y,yAxis:x})),T.createElement(H4e,Wv({},i,{offset:n,verticalPoints:N,xAxis:y,yAxis:x}))))}lre.displayName="CartesianGrid";var W4e={},cre=Wh({name:"errorBars",initialState:W4e,reducers:{addErrorBar:(t,e)=>{var{itemId:r,errorBar:n}=e.payload;t[r]||(t[r]=[]),t[r].push(n)},replaceErrorBar:(t,e)=>{var{itemId:r,prev:n,next:i}=e.payload;t[r]&&(t[r]=t[r].map(a=>a.dataKey===n.dataKey&&a.direction===n.direction?i:a))},removeErrorBar:(t,e)=>{var{itemId:r,errorBar:n}=e.payload;t[r]&&(t[r]=t[r].filter(i=>i.dataKey!==n.dataKey||i.direction!==n.direction))}}}),{addErrorBar:JXe,replaceErrorBar:eZe,removeErrorBar:tZe}=cre.actions,Y4e=cre.reducer,q4e=["children"];function X4e(t,e){if(t==null)return{};var r,n,i=Z4e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function Z4e(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var J4e={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},eLe=T.createContext(J4e);function tLe(t){var{children:e}=t,r=X4e(t,q4e);return T.createElement(eLe.Provider,{value:r},e)}function ure(t,e){var r,n,i=si(l=>yg(l,t)),a=si(l=>xg(l,e)),o=(r=i?.allowDataOverflow)!==null&&r!==void 0?r:cd.allowDataOverflow,c=(n=a?.allowDataOverflow)!==null&&n!==void 0?n:ud.allowDataOverflow,u=o||c;return{needClip:u,needClipX:o,needClipY:c}}function rLe(t){var{xAxisId:e,yAxisId:r,clipPathId:n}=t,i=Zte(),{needClipX:a,needClipY:o,needClip:c}=ure(e,r);if(!c||!i)return null;var{x:u,y:l,width:d,height:f}=i;return T.createElement("clipPath",{id:"clipPath-".concat(n)},T.createElement("rect",{x:a?u:u-d/2,y:o?l:l-f/2,width:a?d:d*2,height:o?f:f*2}))}var YL={exports:{}},qL={};var Vz;function nLe(){if(Vz)return qL;Vz=1;var t=u1();function e(u,l){return u===l&&(u!==0||1/u===1/l)||u!==u&&l!==l}var r=typeof Object.is=="function"?Object.is:e,n=t.useSyncExternalStore,i=t.useRef,a=t.useEffect,o=t.useMemo,c=t.useDebugValue;return qL.useSyncExternalStoreWithSelector=function(u,l,d,f,m){var p=i(null);if(p.current===null){var g={hasValue:!1,value:null};p.current=g}else g=p.current;p=o(function(){function x(C){if(!w){if(w=!0,_=C,C=f(C),m!==void 0&&g.hasValue){var I=g.value;if(m(I,C))return E=I}return E=C}if(I=E,r(_,C))return I;var D=f(C);return m!==void 0&&m(I,D)?(_=C,I):(_=C,E=D)}var w=!1,_,E,N=d===void 0?null:d;return[function(){return x(l())},N===null?void 0:function(){return x(N())}]},[l,d,f,m]);var y=n(u,p[0],p[1]);return a(function(){g.hasValue=!0,g.value=y},[y]),c(y),y},qL}var Kz;function iLe(){return Kz||(Kz=1,YL.exports=nLe()),YL.exports}iLe();function sLe(t){t()}function aLe(){let t=null,e=null;return{clear(){t=null,e=null},notify(){sLe(()=>{let r=t;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=t;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const i=e={callback:r,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!n||t===null||(n=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var Gz={notify(){},get:()=>[]};function oLe(t,e){let r,n=Gz,i=0,a=!1;function o(y){d();const x=n.subscribe(y);let w=!1;return()=>{w||(w=!0,x(),f())}}function c(){n.notify()}function u(){g.onStateChange&&g.onStateChange()}function l(){return a}function d(){i++,r||(r=t.subscribe(u),n=aLe())}function f(){i--,r&&i===0&&(r(),r=void 0,n.clear(),n=Gz)}function m(){a||(a=!0,d())}function p(){a&&(a=!1,f())}const g={addNestedSub:o,notifyNestedSubs:c,handleChangeWrapper:u,isSubscribed:l,trySubscribe:m,tryUnsubscribe:p,getListeners:()=>n};return g}var lLe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",cLe=lLe(),uLe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",dLe=uLe(),hLe=()=>cLe||dLe?T.useLayoutEffect:T.useEffect,fLe=hLe();function Wz(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function mLe(t,e){if(Wz(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++)if(!Object.prototype.hasOwnProperty.call(e,r[i])||!Wz(t[r[i]],e[r[i]]))return!1;return!0}var ALe=Symbol.for("react-redux-context"),pLe=typeof globalThis<"u"?globalThis:{};function gLe(){if(!T.createContext)return{};const t=pLe[ALe]??=new Map;let e=t.get(T.createContext);return e||(e=T.createContext(null),t.set(T.createContext,e)),e}var vLe=gLe();function yLe(t){const{children:e,context:r,serverState:n,store:i}=t,a=T.useMemo(()=>{const u=oLe(i);return{store:i,subscription:u,getServerState:n?()=>n:void 0}},[i,n]),o=T.useMemo(()=>i.getState(),[i]);fLe(()=>{const{subscription:u}=a;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),o!==i.getState()&&u.notifyNestedSubs(),()=>{u.tryUnsubscribe(),u.onStateChange=void 0}},[a,o]);const c=r||vLe;return T.createElement(c.Provider,{value:a},e)}var xLe=yLe,bLe=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function wLe(t,e){return t==null&&e==null?!0:typeof t=="number"&&typeof e=="number"?t===e||t!==t&&e!==e:t===e}function zM(t,e){var r=new Set([...Object.keys(t),...Object.keys(e)]);for(var n of r)if(bLe.has(n)){if(t[n]==null&&e[n]==null)continue;if(!mLe(t[n],e[n]))return!1}else if(!wLe(t[n],e[n]))return!1;return!0}function Py(t,e){var r,n;return(r=(n=t.graphicalItems.cartesianItems.find(i=>i.id===e))===null||n===void 0?void 0:n.xAxisId)!==null&&r!==void 0?r:qte}function Oy(t,e){var r,n;return(r=(n=t.graphicalItems.cartesianItems.find(i=>i.id===e))===null||n===void 0?void 0:n.yAxisId)!==null&&r!==void 0?r:qte}var _Le="Invariant failed";function ELe(t,e){throw new Error(_Le)}function DP(){return DP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},DP.apply(null,arguments)}function RC(t){return T.createElement(Vte,DP({shapeType:"rectangle",activeClassName:"recharts-active-bar"},t))}var SLe=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,i)=>{if(Ei(e))return e;var a=Ei(n)||ru(n);return a?e(n,i):(a||ELe(),r)}},jLe=(t,e,r)=>r,TLe=(t,e)=>e,hE=dr([qD,TLe],(t,e)=>t.filter(r=>r.type==="bar").find(r=>r.id===e)),CLe=dr([hE],t=>t?.maxBarSize),NLe=(t,e,r,n)=>n,kLe=dr([Ya,qD,Py,Oy,jLe],(t,e,r,n,i)=>e.filter(a=>t==="horizontal"?a.xAxisId===r:a.yAxisId===n).filter(a=>a.isPanorama===i).filter(a=>a.hide===!1).filter(a=>a.type==="bar")),LLe=(t,e,r)=>{var n=Ya(t),i=Py(t,e),a=Oy(t,e);if(!(i==null||a==null))return n==="horizontal"?kP(t,"yAxis",a,r):kP(t,"xAxis",i,r)},ILe=(t,e)=>{var r=Ya(t),n=Py(t,e),i=Oy(t,e);if(!(n==null||i==null))return r==="horizontal"?_Q(t,"xAxis",n):_Q(t,"yAxis",i)},BLe=dr([kLe,sEe,ILe],Kke),PLe=(t,e,r)=>{var n,i,a=hE(t,e);if(a==null)return 0;var o=Py(t,e),c=Oy(t,e);if(o==null||c==null)return 0;var u=Ya(t),l=dee(t),{maxBarSize:d}=a,f=ru(d)?l:d,m,p;return u==="horizontal"?(m=Jb(t,"xAxis",o,r),p=Zb(t,"xAxis",o,r)):(m=Jb(t,"yAxis",c,r),p=Zb(t,"yAxis",c,r)),(n=(i=Kb(m,p,!0))!==null&&i!==void 0?i:f)!==null&&n!==void 0?n:0},dre=(t,e,r)=>{var n=Ya(t),i=Py(t,e),a=Oy(t,e);if(!(i==null||a==null)){var o,c;return n==="horizontal"?(o=Jb(t,"xAxis",i,r),c=Zb(t,"xAxis",i,r)):(o=Jb(t,"yAxis",a,r),c=Zb(t,"yAxis",a,r)),Kb(o,c)}},OLe=dr([BLe,dee,iEe,hee,PLe,dre,CLe],Xke),RLe=(t,e,r)=>{var n=Py(t,e);if(n!=null)return Jb(t,"xAxis",n,r)},DLe=(t,e,r)=>{var n=Oy(t,e);if(n!=null)return Jb(t,"yAxis",n,r)},MLe=(t,e,r)=>{var n=Py(t,e);if(n!=null)return Zb(t,"xAxis",n,r)},FLe=(t,e,r)=>{var n=Oy(t,e);if(n!=null)return Zb(t,"yAxis",n,r)},ULe=dr([OLe,hE],Jke),$Le=dr([LLe,hE],Zke),HLe=dr([Ku,cD,RLe,DLe,MLe,FLe,ULe,Ya,q_e,dre,$Le,hE,NLe],(t,e,r,n,i,a,o,c,u,l,d,f,m)=>{var{chartData:p,dataStartIndex:g,dataEndIndex:y}=u;if(!(f==null||o==null||e==null||c!=="horizontal"&&c!=="vertical"||r==null||n==null||i==null||a==null||l==null)){var{data:x}=f,w;if(x!=null&&x.length>0?w=x:w=p?.slice(g,y+1),w!=null)return pIe({layout:c,barSettings:f,pos:o,parentViewBox:e,bandSize:l,xAxis:r,yAxis:n,xAxisTicks:i,yAxisTicks:a,stackedData:d,displayedData:w,offset:t,cells:m,dataStartIndex:g})}}),QLe=["index"];function MP(){return MP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},MP.apply(null,arguments)}function zLe(t,e){if(t==null)return{};var r,n,i=VLe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function VLe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var hre=T.createContext(void 0),KLe=t=>{var e=T.useContext(hre);if(e!=null)return e.stackId;if(t!=null)return Qxe(t)},GLe=(t,e)=>"recharts-bar-stack-clip-path-".concat(t,"-").concat(e),WLe=t=>{var e=T.useContext(hre);if(e!=null){var{stackId:r}=e;return"url(#".concat(GLe(r,t),")")}},fre=t=>{var{index:e}=t,r=zLe(t,QLe),n=WLe(e);return T.createElement(Mc,MP({className:"recharts-bar-stack-layer",clipPath:n},r))},YLe=["onMouseEnter","onMouseLeave","onClick"],qLe=["value","background","tooltipPosition"],XLe=["id"],ZLe=["onMouseEnter","onClick","onMouseLeave"];function ug(){return ug=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ug.apply(null,arguments)}function Yz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function ph(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Yz(Object(r),!0).forEach(function(n){JLe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Yz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function JLe(t,e,r){return(e=eIe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function eIe(t){var e=tIe(t,"string");return typeof e=="symbol"?e:e+""}function tIe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function DC(t,e){if(t==null)return{};var r,n,i=rIe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function rIe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var nIe=t=>{var{dataKey:e,name:r,fill:n,legendType:i,hide:a}=t;return[{inactive:a,dataKey:e,type:i,color:n,value:v1(r,e),payload:t}]},iIe=T.memo(t=>{var{dataKey:e,stroke:r,strokeWidth:n,fill:i,name:a,hide:o,unit:c,tooltipType:u,id:l}=t,d={dataDefinedOnItem:void 0,getPosition:X0,settings:{stroke:r,strokeWidth:n,fill:i,dataKey:e,nameKey:void 0,name:v1(a,e),hide:o,type:u,color:i,unit:c,graphicalItemId:l}};return T.createElement(FM,{tooltipEntrySettings:d})});function sIe(t){var e=si(V0),{data:r,dataKey:n,background:i,allOtherBarProps:a}=t,{onMouseEnter:o,onMouseLeave:c,onClick:u}=a,l=DC(a,YLe),d=RM(o,n,a.id),f=DM(c),m=MM(u,n,a.id);if(!i||r==null)return null;var p=gy(i);return T.createElement(ah,{zIndex:e4e(i,Oc.barBackground)},r.map((g,y)=>{var{value:x,background:w,tooltipPosition:_}=g,E=DC(g,qLe);if(!w)return null;var N=d(g,y),C=f(g,y),I=m(g,y),D=ph(ph(ph(ph(ph({option:i,isActive:String(y)===e},E),{},{fill:"#eee"},w),p),g1(l,g,y)),{},{onMouseEnter:N,onMouseLeave:C,onClick:I,dataKey:n,index:y,className:"recharts-bar-background-rectangle"});return T.createElement(RC,ug({key:"background-bar-".concat(y)},D))}))}function aIe(t){var{showLabels:e,children:r,rects:n}=t,i=n?.map(a=>{var o={x:a.x,y:a.y,width:a.width,lowerWidth:a.width,upperWidth:a.width,height:a.height};return ph(ph({},o),{},{value:a.value,payload:a.payload,parentViewBox:a.parentViewBox,viewBox:o,fill:a.fill})});return T.createElement(Bte,{value:e?i:void 0},r)}function oIe(t){var{shape:e,activeBar:r,baseProps:n,entry:i,index:a,dataKey:o}=t,c=si(V0),u=si(xM),l=r&&String(a)===c&&(u==null||o===u),d=l?r:e;return l?T.createElement(ah,{zIndex:Oc.activeBar},T.createElement(fre,{index:a},T.createElement(RC,ug({},n,{name:String(n.name)},i,{isActive:l,option:d,index:a,dataKey:o})))):T.createElement(RC,ug({},n,{name:String(n.name)},i,{isActive:l,option:d,index:a,dataKey:o}))}function lIe(t){var{shape:e,baseProps:r,entry:n,index:i,dataKey:a}=t;return T.createElement(RC,ug({},r,{name:String(r.name)},n,{isActive:!1,option:e,index:i,dataKey:a}))}function cIe(t){var e,{data:r,props:n}=t,i=(e=xu(n))!==null&&e!==void 0?e:{},{id:a}=i,o=DC(i,XLe),{shape:c,dataKey:u,activeBar:l}=n,{onMouseEnter:d,onClick:f,onMouseLeave:m}=n,p=DC(n,ZLe),g=RM(d,u,a),y=DM(m),x=MM(f,u,a);return r?T.createElement(T.Fragment,null,r.map((w,_)=>T.createElement(fre,ug({index:_,key:"rectangle-".concat(w?.x,"-").concat(w?.y,"-").concat(w?.value,"-").concat(_),className:"recharts-bar-rectangle"},g1(p,w,_),{onMouseEnter:g(w,_),onMouseLeave:y(w,_),onClick:x(w,_)}),l?T.createElement(oIe,{shape:c,activeBar:l,baseProps:o,entry:w,index:_,dataKey:u}):T.createElement(lIe,{shape:c,baseProps:o,entry:w,index:_,dataKey:u})))):null}function uIe(t){var{props:e,previousRectanglesRef:r}=t,{data:n,layout:i,isAnimationActive:a,animationBegin:o,animationDuration:c,animationEasing:u,onAnimationEnd:l,onAnimationStart:d}=e,f=r.current,m=K_(e,"recharts-bar-"),[p,g]=T.useState(!1),y=!p,x=T.useCallback(()=>{typeof l=="function"&&l(),g(!1)},[l]),w=T.useCallback(()=>{typeof d=="function"&&d(),g(!0)},[d]);return T.createElement(aIe,{showLabels:y,rects:n},T.createElement(V_,{animationId:m,begin:o,duration:c,isActive:a,easing:u,onAnimationEnd:x,onAnimationStart:w,key:m},_=>{var E=_===1?n:n?.map((N,C)=>{var I=f&&f[C];if(I)return ph(ph({},N),{},{x:dc(I.x,N.x,_),y:dc(I.y,N.y,_),width:dc(I.width,N.width,_),height:dc(I.height,N.height,_)});if(i==="horizontal"){var D=dc(0,N.height,_),U=dc(N.stackedBarStart,N.y,_);return ph(ph({},N),{},{y:U,height:D})}var G=dc(0,N.width,_),q=dc(N.stackedBarStart,N.x,_);return ph(ph({},N),{},{width:G,x:q})});return _>0&&(r.current=E??null),E==null?null:T.createElement(Mc,null,T.createElement(cIe,{props:e,data:E}))}),T.createElement(TM,{label:e.label}),e.children)}function dIe(t){var e=T.useRef(null);return T.createElement(uIe,{previousRectanglesRef:e,props:t})}var mre=0,hIe=(t,e)=>{var r=Array.isArray(t.value)?t.value[1]:t.value;return{x:t.x,y:t.y,value:r,errorVal:dl(t,e)}};class fIe extends T.PureComponent{render(){var{hide:e,data:r,dataKey:n,className:i,xAxisId:a,yAxisId:o,needClip:c,background:u,id:l}=this.props;if(e||r==null)return null;var d=ja("recharts-bar",i),f=l;return T.createElement(Mc,{className:d,id:l},c&&T.createElement("defs",null,T.createElement(rLe,{clipPathId:f,xAxisId:a,yAxisId:o})),T.createElement(Mc,{className:"recharts-bar-rectangles",clipPath:c?"url(#clipPath-".concat(f,")"):void 0},T.createElement(sIe,{data:r,dataKey:n,background:u,allOtherBarProps:this.props}),T.createElement(dIe,this.props)))}}var mIe={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:mre,xAxisId:0,yAxisId:0,zIndex:Oc.bar};function AIe(t){var{xAxisId:e,yAxisId:r,hide:n,legendType:i,minPointSize:a,activeBar:o,animationBegin:c,animationDuration:u,animationEasing:l,isAnimationActive:d}=t,{needClip:f}=ure(e,r),m=y1(),p=sh(),g=OM(t.children,e1),y=si(_=>HLe(_,t.id,p,g));if(m!=="vertical"&&m!=="horizontal")return null;var x,w=y?.[0];return w==null||w.height==null||w.width==null?x=0:x=m==="vertical"?w.height/2:w.width/2,T.createElement(tLe,{xAxisId:e,yAxisId:r,data:y,dataPointFormatter:hIe,errorBarOffset:x},T.createElement(fIe,ug({},t,{layout:m,needClip:f,data:y,xAxisId:e,yAxisId:r,hide:n,legendType:i,minPointSize:a,activeBar:o,animationBegin:c,animationDuration:u,animationEasing:l,isAnimationActive:d})))}function pIe(t){var{layout:e,barSettings:{dataKey:r,minPointSize:n},pos:i,bandSize:a,xAxis:o,yAxis:c,xAxisTicks:u,yAxisTicks:l,stackedData:d,displayedData:f,offset:m,cells:p,parentViewBox:g,dataStartIndex:y}=t,x=e==="horizontal"?c:o,w=d?x.scale.domain():null,_=zxe({numericAxis:x}),E=x.scale.map(_);return f.map((N,C)=>{var I,D,U,G,q,J;if(d){var de=d[C+y];if(de==null)return null;I=Mxe(de,w)}else I=dl(N,r),Array.isArray(I)||(I=[_,I]);var xe=SLe(n,mre)(I[1],C);if(e==="horizontal"){var we,ve=c.scale.map(I[0]),ne=c.scale.map(I[1]);if(ve==null||ne==null)return null;D=w9({axis:o,ticks:u,bandSize:a,offset:i.offset,entry:N,index:C}),U=(we=ne??ve)!==null&&we!==void 0?we:void 0,G=i.size;var ae=ve-ne;if(q=YA(ae)?0:ae,J={x:D,y:m.top,width:G,height:m.height},Math.abs(xe)>0&&Math.abs(q)<Math.abs(xe)){var oe=pd(q||xe)*(Math.abs(xe)-Math.abs(q));U-=oe,q+=oe}}else{var Ie=o.scale.map(I[0]),Ce=o.scale.map(I[1]);if(Ie==null||Ce==null)return null;if(D=Ie,U=w9({axis:c,ticks:l,bandSize:a,offset:i.offset,entry:N,index:C}),G=Ce-Ie,q=i.size,J={x:m.left,y:U,width:m.width,height:q},Math.abs(xe)>0&&Math.abs(G)<Math.abs(xe)){var be=pd(G||xe)*(Math.abs(xe)-Math.abs(G));G+=be}}if(D==null||U==null||G==null||q==null)return null;var ue=ph(ph({},N),{},{stackedBarStart:E,x:D,y:U,width:G,height:q,value:d?I:I[1],payload:N,background:J,tooltipPosition:{x:D+G/2,y:U+q/2},parentViewBox:g},p&&p[C]&&p[C].props);return ue}).filter(Boolean)}function gIe(t){var e=Uc(t,mIe),r=KLe(e.stackId),n=sh();return T.createElement(UM,{id:e.id,type:"bar"},i=>T.createElement(T.Fragment,null,T.createElement(n5e,{legendPayload:nIe(e)}),T.createElement(iIe,{dataKey:e.dataKey,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType,id:i}),T.createElement(p5e,{type:"bar",id:i,data:void 0,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,stackId:r,hide:e.hide,barSize:e.barSize,minPointSize:e.minPointSize,maxBarSize:e.maxBarSize,isPanorama:n}),T.createElement(ah,{zIndex:e.zIndex},T.createElement(AIe,ug({},e,{id:i})))))}var cb=T.memo(gIe,zM);cb.displayName="Bar";var vIe=["domain","range"],yIe=["domain","range"];function qz(t,e){if(t==null)return{};var r,n,i=xIe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function xIe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function Xz(t,e){return t===e?!0:Array.isArray(t)&&t.length===2&&Array.isArray(e)&&e.length===2?t[0]===e[0]&&t[1]===e[1]:!1}function Are(t,e){if(t===e)return!0;var{domain:r,range:n}=t,i=qz(t,vIe),{domain:a,range:o}=e,c=qz(e,yIe);return!Xz(r,a)||!Xz(n,o)?!1:zM(i,c)}var bIe=["type"],wIe=["dangerouslySetInnerHTML","ticks","scale"],_Ie=["id","scale"];function FP(){return FP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},FP.apply(null,arguments)}function Zz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Jz(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Zz(Object(r),!0).forEach(function(n){EIe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Zz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function EIe(t,e,r){return(e=SIe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function SIe(t){var e=jIe(t,"string");return typeof e=="symbol"?e:e+""}function jIe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function UP(t,e){if(t==null)return{};var r,n,i=TIe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function TIe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function CIe(t){var e=Al(),r=T.useRef(null),n=XZ(),{type:i}=t,a=UP(t,bIe),o=J_(n,"xAxis",i),c=T.useMemo(()=>{if(o!=null)return Jz(Jz({},a),{},{type:o})},[a,o]);return T.useLayoutEffect(()=>{c!=null&&(r.current===null?e(eke(c)):r.current!==c&&e(tke({prev:r.current,next:c})),r.current=c)},[c,e]),T.useLayoutEffect(()=>()=>{r.current&&(e(rke(r.current)),r.current=null)},[e]),null}var NIe=t=>{var{xAxisId:e,className:r}=t,n=si(cD),i=sh(),a="xAxis",o=si(w=>zee(w,a,e,i)),c=si(w=>Uee(w,e)),u=si(w=>oSe(w,e)),l=si(w=>bee(w,e));if(c==null||u==null||l==null)return null;var{dangerouslySetInnerHTML:d,ticks:f,scale:m}=t,p=UP(t,wIe),{id:g,scale:y}=l,x=UP(l,_Ie);return T.createElement(QM,FP({},p,x,{x:u.x,y:u.y,width:c.width,height:c.height,className:ja("recharts-".concat(a," ").concat(a),r),viewBox:n,ticks:o,axisType:a}))},kIe={allowDataOverflow:cd.allowDataOverflow,allowDecimals:cd.allowDecimals,allowDuplicatedCategory:cd.allowDuplicatedCategory,angle:cd.angle,axisLine:Yp.axisLine,height:cd.height,hide:!1,includeHidden:cd.includeHidden,interval:cd.interval,label:!1,minTickGap:cd.minTickGap,mirror:cd.mirror,orientation:cd.orientation,padding:cd.padding,reversed:cd.reversed,scale:cd.scale,tick:cd.tick,tickCount:cd.tickCount,tickLine:Yp.tickLine,tickSize:Yp.tickSize,type:cd.type,xAxisId:0},LIe=t=>{var e=Uc(t,kIe);return T.createElement(T.Fragment,null,T.createElement(CIe,{allowDataOverflow:e.allowDataOverflow,allowDecimals:e.allowDecimals,allowDuplicatedCategory:e.allowDuplicatedCategory,angle:e.angle,dataKey:e.dataKey,domain:e.domain,height:e.height,hide:e.hide,id:e.xAxisId,includeHidden:e.includeHidden,interval:e.interval,minTickGap:e.minTickGap,mirror:e.mirror,name:e.name,orientation:e.orientation,padding:e.padding,reversed:e.reversed,scale:e.scale,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit}),T.createElement(NIe,e))},VM=T.memo(LIe,Are);VM.displayName="XAxis";var IIe=["type"],BIe=["dangerouslySetInnerHTML","ticks","scale"],PIe=["id","scale"];function $P(){return $P=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},$P.apply(null,arguments)}function eV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function tV(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?eV(Object(r),!0).forEach(function(n){OIe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):eV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function OIe(t,e,r){return(e=RIe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function RIe(t){var e=DIe(t,"string");return typeof e=="symbol"?e:e+""}function DIe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function HP(t,e){if(t==null)return{};var r,n,i=MIe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function MIe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function FIe(t){var e=Al(),r=T.useRef(null),n=XZ(),{type:i}=t,a=HP(t,IIe),o=J_(n,"yAxis",i),c=T.useMemo(()=>{if(o!=null)return tV(tV({},a),{},{type:o})},[o,a]);return T.useLayoutEffect(()=>{c!=null&&(r.current===null?e(nke(c)):r.current!==c&&e(ike({prev:r.current,next:c})),r.current=c)},[c,e]),T.useLayoutEffect(()=>()=>{r.current&&(e(ske(r.current)),r.current=null)},[e]),null}function UIe(t){var{yAxisId:e,className:r,width:n,label:i}=t,a=T.useRef(null),o=T.useRef(null),c=si(cD),u=sh(),l=Al(),d="yAxis",f=si(I=>$ee(I,e)),m=si(I=>cSe(I,e)),p=si(I=>zee(I,d,e,u)),g=si(I=>wee(I,e));if(T.useLayoutEffect(()=>{if(!(n!=="auto"||!f||jM(i)||T.isValidElement(i)||g==null)){var I=a.current;if(I){var D=I.getCalculatedWidth();Math.round(f.width)!==Math.round(D)&&l(ake({id:e,width:D}))}}},[p,f,l,i,e,n,g]),f==null||m==null||g==null)return null;var{dangerouslySetInnerHTML:y,ticks:x,scale:w}=t,_=HP(t,BIe),{id:E,scale:N}=g,C=HP(g,PIe);return T.createElement(QM,$P({},_,C,{ref:a,labelRef:o,x:m.x,y:m.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:f.width,height:f.height,className:ja("recharts-".concat(d," ").concat(d),r),viewBox:c,ticks:p,axisType:d}))}var $Ie={allowDataOverflow:ud.allowDataOverflow,allowDecimals:ud.allowDecimals,allowDuplicatedCategory:ud.allowDuplicatedCategory,angle:ud.angle,axisLine:Yp.axisLine,hide:!1,includeHidden:ud.includeHidden,interval:ud.interval,label:!1,minTickGap:ud.minTickGap,mirror:ud.mirror,orientation:ud.orientation,padding:ud.padding,reversed:ud.reversed,scale:ud.scale,tick:ud.tick,tickCount:ud.tickCount,tickLine:Yp.tickLine,tickSize:Yp.tickSize,type:ud.type,width:ud.width,yAxisId:0},HIe=t=>{var e=Uc(t,$Ie);return T.createElement(T.Fragment,null,T.createElement(FIe,{interval:e.interval,id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:e.includeHidden,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:e.angle,minTickGap:e.minTickGap,tick:e.tick,tickFormatter:e.tickFormatter}),T.createElement(UIe,e))},KM=T.memo(HIe,Are);KM.displayName="YAxis";var QIe=(t,e)=>e,GM=dr([QIe,Ya,tE,yd,lte,bg,_je,Ku],kje),WM=t=>{var e=t.currentTarget.getBoundingClientRect(),r=e.width/t.currentTarget.offsetWidth,n=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/r),chartY:Math.round((t.clientY-e.top)/n)}},pre=im("mouseClick"),gre=$_();gre.startListening({actionCreator:pre,effect:(t,e)=>{var r=t.payload,n=GM(e.getState(),WM(r));n?.activeIndex!=null&&e.dispatch(bSe({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var QP=im("mouseMove"),vre=$_(),cS=null;vre.startListening({actionCreator:QP,effect:(t,e)=>{var r=t.payload;cS!==null&&cancelAnimationFrame(cS);var n=WM(r);cS=requestAnimationFrame(()=>{var i=e.getState(),a=mM(i,i.tooltip.settings.shared);if(a==="axis"){var o=GM(i,n);o?.activeIndex!=null?e.dispatch(Jee({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate})):e.dispatch(Zee())}cS=null})}});function zIe(t,e){return e instanceof HTMLElement?"HTMLElement <".concat(e.tagName,' class="').concat(e.className,'">'):e===window?"global.window":t==="children"&&typeof e=="object"&&e!==null?"<<CHILDREN>>":e}var rV={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},yre=Wh({name:"rootProps",initialState:rV,reducers:{updateOptions:(t,e)=>{var r;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(r=e.payload.barGap)!==null&&r!==void 0?r:rV.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className,t.baseValue=e.payload.baseValue,t.reverseStackOrder=e.payload.reverseStackOrder}}}),VIe=yre.reducer,{updateOptions:KIe}=yre.actions,GIe=null,WIe={updatePolarOptions:(t,e)=>e.payload},xre=Wh({name:"polarOptions",initialState:GIe,reducers:WIe}),{updatePolarOptions:YIe}=xre.actions,qIe=xre.reducer,bre=im("keyDown"),wre=im("focus"),YM=$_();YM.startListening({actionCreator:bre,effect:(t,e)=>{var r=e.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:i}=r.tooltip,a=t.payload;if(!(a!=="ArrowRight"&&a!=="ArrowLeft"&&a!=="Enter")){var o=AM(i,C1(r),iE(r),oE(r)),c=o==null?-1:Number(o);if(!(!Number.isFinite(c)||c<0)){var u=bg(r);if(a==="Enter"){var l=NC(r,"axis","hover",String(i.index));e.dispatch(IP({active:!i.active,activeIndex:i.index,activeCoordinate:l}));return}var d=dSe(r),f=d==="left-to-right"?1:-1,m=a==="ArrowRight"?1:-1,p=c+m*f;if(!(u==null||p>=u.length||p<0)){var g=NC(r,"axis","hover",String(p));e.dispatch(IP({active:!0,activeIndex:p.toString(),activeCoordinate:g}))}}}}}});YM.startListening({actionCreator:wre,effect:(t,e)=>{var r=e.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:i}=r.tooltip;if(!i.active&&i.index==null){var a="0",o=NC(r,"axis","hover",String(a));e.dispatch(IP({active:!0,activeIndex:a,activeCoordinate:o}))}}}});var Vf=im("externalEvent"),_re=$_(),XL=new Map;_re.startListening({actionCreator:Vf,effect:(t,e)=>{var{handler:r,reactEvent:n}=t.payload;if(r!=null){n.persist();var i=n.type,a=XL.get(i);a!==void 0&&cancelAnimationFrame(a);var o=requestAnimationFrame(()=>{try{var c=e.getState(),u={activeCoordinate:oje(c),activeDataKey:xM(c),activeIndex:V0(c),activeLabel:dte(c),activeTooltipIndex:V0(c),isTooltipActive:lje(c)};r(u,n)}finally{XL.delete(i)}});XL.set(i,o)}}});var XIe=dr([j1],t=>t.tooltipItemPayloads),ZIe=dr([XIe,(t,e)=>e,(t,e,r)=>r],(t,e,r)=>{if(e!=null){var n=t.find(a=>a.settings.graphicalItemId===r);if(n!=null){var{getPosition:i}=n;if(i!=null)return i(e)}}}),Ere=im("touchMove"),Sre=$_();Sre.startListening({actionCreator:Ere,effect:(t,e)=>{var r=t.payload;if(!(r.touches==null||r.touches.length===0)){var n=e.getState(),i=mM(n,n.tooltip.settings.shared);if(i==="axis"){var a=r.touches[0];if(a==null)return;var o=GM(n,WM({clientX:a.clientX,clientY:a.clientY,currentTarget:r.currentTarget}));o?.activeIndex!=null&&e.dispatch(Jee({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate}))}else if(i==="item"){var c,u=r.touches[0];if(document.elementFromPoint==null||u==null)return;var l=document.elementFromPoint(u.clientX,u.clientY);if(!l||!l.getAttribute)return;var d=l.getAttribute(VZ),f=(c=l.getAttribute(KZ))!==null&&c!==void 0?c:void 0,m=T1(n).find(y=>y.id===f);if(d==null||m==null||f==null)return;var{dataKey:p}=m,g=ZIe(n,d,f);e.dispatch(Xee({activeDataKey:p,activeIndex:d,activeCoordinate:g,activeGraphicalItemId:f}))}}}});var JIe=fZ({brush:t4e,cartesianAxis:oke,chartData:oTe,errorBars:Y4e,graphicalItems:m5e,layout:Bxe,legend:$be,options:rTe,polarAxis:dNe,polarOptions:qIe,referenceElements:s4e,rootProps:VIe,tooltip:wSe,zIndex:zje}),eBe=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return ixe({reducer:JIe,preloadedState:e,middleware:n=>{var i;return n({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((i="es6")!==null&&i!==void 0?i:"")}).concat([gre.middleware,vre.middleware,YM.middleware,_re.middleware,Sre.middleware])},enhancers:n=>{var i=n;return typeof n=="function"&&(i=n()),i.concat(CZ({type:"raf"}))},devTools:{serialize:{replacer:zIe},name:"recharts-".concat(r)}})};function jre(t){var{preloadedState:e,children:r,reduxStoreName:n}=t,i=sh(),a=T.useRef(null);if(i)return r;a.current==null&&(a.current=eBe(e,n));var o=rD;return T.createElement(xLe,{context:o,store:a.current},r)}function tBe(t){var{layout:e,margin:r}=t,n=Al(),i=sh();return T.useEffect(()=>{i||(n(kxe(e)),n(Nxe(r)))},[n,i,e,r]),null}var Tre=T.memo(tBe,zM);function Cre(t){var e=Al();return T.useEffect(()=>{e(KIe(t))},[e,t]),null}function nV(t){var{zIndex:e,isPanorama:r}=t,n=T.useRef(null),i=Al();return T.useLayoutEffect(()=>(n.current&&i(Hje({zIndex:e,element:n.current,isPanorama:r})),()=>{i(Qje({zIndex:e,isPanorama:r}))}),[i,e,r]),T.createElement("g",{tabIndex:-1,ref:n})}function iV(t){var{children:e,isPanorama:r}=t,n=si(Ije);if(!n||n.length===0)return e;var i=n.filter(o=>o<0),a=n.filter(o=>o>0);return T.createElement(T.Fragment,null,i.map(o=>T.createElement(nV,{key:o,zIndex:o,isPanorama:r})),e,a.map(o=>T.createElement(nV,{key:o,zIndex:o,isPanorama:r})))}var rBe=["children"];function nBe(t,e){if(t==null)return{};var r,n,i=iBe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function iBe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function MC(){return MC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},MC.apply(null,arguments)}var sBe={width:"100%",height:"100%",display:"block"},aBe=T.forwardRef((t,e)=>{var r=hD(),n=fD(),i=cJ();if(!XA(r)||!XA(n))return null;var{children:a,otherAttributes:o,title:c,desc:u}=t,l,d;return o!=null&&(typeof o.tabIndex=="number"?l=o.tabIndex:l=i?0:void 0,typeof o.role=="string"?d=o.role:d=i?"application":void 0),T.createElement(VR,MC({},o,{title:c,desc:u,role:d,tabIndex:l,width:r,height:n,style:sBe,ref:e}),a)}),oBe=t=>{var{children:e}=t,r=si(u5);if(!r)return null;var{width:n,height:i,y:a,x:o}=r;return T.createElement(VR,{width:n,height:i,x:o,y:a},e)},sV=T.forwardRef((t,e)=>{var{children:r}=t,n=nBe(t,rBe),i=sh();return i?T.createElement(oBe,null,T.createElement(iV,{isPanorama:!0},r)):T.createElement(aBe,MC({ref:e},n),T.createElement(iV,{isPanorama:!1},r))});function lBe(){var t=Al(),[e,r]=T.useState(null),n=si(qxe);return T.useEffect(()=>{if(e!=null){var i=e.getBoundingClientRect(),a=i.width/e.offsetWidth;Qa(a)&&a!==n&&t(Ixe(a))}},[e,t,n]),r}function aV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function cBe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?aV(Object(r),!0).forEach(function(n){uBe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):aV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function uBe(t,e,r){return(e=dBe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function dBe(t){var e=hBe(t,"string");return typeof e=="symbol"?e:e+""}function hBe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function O0(){return O0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},O0.apply(null,arguments)}var fBe=()=>(pTe(),null);function FC(t){if(typeof t=="number")return t;if(typeof t=="string"){var e=parseFloat(t);if(!Number.isNaN(e))return e}return 0}var mBe=T.forwardRef((t,e)=>{var r,n,i=T.useRef(null),[a,o]=T.useState({containerWidth:FC((r=t.style)===null||r===void 0?void 0:r.width),containerHeight:FC((n=t.style)===null||n===void 0?void 0:n.height)}),c=T.useCallback((l,d)=>{o(f=>{var m=Math.round(l),p=Math.round(d);return f.containerWidth===m&&f.containerHeight===p?f:{containerWidth:m,containerHeight:p}})},[]),u=T.useCallback(l=>{if(typeof e=="function"&&e(l),l!=null&&typeof ResizeObserver<"u"){var{width:d,height:f}=l.getBoundingClientRect();c(d,f);var m=g=>{var y=g[0];if(y!=null){var{width:x,height:w}=y.contentRect;c(x,w)}},p=new ResizeObserver(m);p.observe(l),i.current=p}},[e,c]);return T.useEffect(()=>()=>{var l=i.current;l?.disconnect()},[c]),T.createElement(T.Fragment,null,T.createElement(Q_,{width:a.containerWidth,height:a.containerHeight}),T.createElement("div",O0({ref:u},t)))}),ABe=T.forwardRef((t,e)=>{var{width:r,height:n}=t,[i,a]=T.useState({containerWidth:FC(r),containerHeight:FC(n)}),o=T.useCallback((u,l)=>{a(d=>{var f=Math.round(u),m=Math.round(l);return d.containerWidth===f&&d.containerHeight===m?d:{containerWidth:f,containerHeight:m}})},[]),c=T.useCallback(u=>{if(typeof e=="function"&&e(u),u!=null){var{width:l,height:d}=u.getBoundingClientRect();o(l,d)}},[e,o]);return T.createElement(T.Fragment,null,T.createElement(Q_,{width:i.containerWidth,height:i.containerHeight}),T.createElement("div",O0({ref:c},t)))}),pBe=T.forwardRef((t,e)=>{var{width:r,height:n}=t;return T.createElement(T.Fragment,null,T.createElement(Q_,{width:r,height:n}),T.createElement("div",O0({ref:e},t)))}),gBe=T.forwardRef((t,e)=>{var{width:r,height:n}=t;return typeof r=="string"||typeof n=="string"?T.createElement(ABe,O0({},t,{ref:e})):typeof r=="number"&&typeof n=="number"?T.createElement(pBe,O0({},t,{width:r,height:n,ref:e})):T.createElement(T.Fragment,null,T.createElement(Q_,{width:r,height:n}),T.createElement("div",O0({ref:e},t)))});function vBe(t){return t?mBe:gBe}var yBe=T.forwardRef((t,e)=>{var{children:r,className:n,height:i,onClick:a,onContextMenu:o,onDoubleClick:c,onMouseDown:u,onMouseEnter:l,onMouseLeave:d,onMouseMove:f,onMouseUp:m,onTouchEnd:p,onTouchMove:g,onTouchStart:y,style:x,width:w,responsive:_,dispatchTouchEvents:E=!0}=t,N=T.useRef(null),C=Al(),[I,D]=T.useState(null),[U,G]=T.useState(null),q=lBe(),J=uD(),de=J?.width>0?J.width:w,xe=J?.height>0?J.height:i,we=T.useCallback(De=>{q(De),typeof e=="function"&&e(De),D(De),G(De),De!=null&&(N.current=De)},[q,e,D,G]),ve=T.useCallback(De=>{C(pre(De)),C(Vf({handler:a,reactEvent:De}))},[C,a]),ne=T.useCallback(De=>{C(QP(De)),C(Vf({handler:l,reactEvent:De}))},[C,l]),ae=T.useCallback(De=>{C(Zee()),C(Vf({handler:d,reactEvent:De}))},[C,d]),oe=T.useCallback(De=>{C(QP(De)),C(Vf({handler:f,reactEvent:De}))},[C,f]),Ie=T.useCallback(()=>{C(wre())},[C]),Ce=T.useCallback(De=>{C(bre(De.key))},[C]),be=T.useCallback(De=>{C(Vf({handler:o,reactEvent:De}))},[C,o]),ue=T.useCallback(De=>{C(Vf({handler:c,reactEvent:De}))},[C,c]),Pe=T.useCallback(De=>{C(Vf({handler:u,reactEvent:De}))},[C,u]),Re=T.useCallback(De=>{C(Vf({handler:m,reactEvent:De}))},[C,m]),He=T.useCallback(De=>{C(Vf({handler:y,reactEvent:De}))},[C,y]),Fe=T.useCallback(De=>{E&&C(Ere(De)),C(Vf({handler:g,reactEvent:De}))},[C,E,g]),ft=T.useCallback(De=>{C(Vf({handler:p,reactEvent:De}))},[C,p]),at=vBe(_);return T.createElement(vte.Provider,{value:I},T.createElement(LX.Provider,{value:U},T.createElement(at,{width:de??x?.width,height:xe??x?.height,className:ja("recharts-wrapper",n),style:cBe({position:"relative",cursor:"default",width:de,height:xe},x),onClick:ve,onContextMenu:be,onDoubleClick:ue,onFocus:Ie,onKeyDown:Ce,onMouseDown:Pe,onMouseEnter:ne,onMouseLeave:ae,onMouseMove:oe,onMouseUp:Re,onTouchEnd:ft,onTouchMove:Fe,onTouchStart:He,ref:we},T.createElement(fBe,null),r)))}),xBe=["width","height","responsive","children","className","style","compact","title","desc"];function bBe(t,e){if(t==null)return{};var r,n,i=wBe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function wBe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Nre=T.forwardRef((t,e)=>{var{width:r,height:n,responsive:i,children:a,className:o,style:c,compact:u,title:l,desc:d}=t,f=bBe(t,xBe),m=xu(f);return u?T.createElement(T.Fragment,null,T.createElement(Q_,{width:r,height:n}),T.createElement(sV,{otherAttributes:m,title:l,desc:d},a)):T.createElement(yBe,{className:o,style:c,width:r,height:n,responsive:i??!1,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},T.createElement(sV,{otherAttributes:m,title:l,desc:d,ref:e},T.createElement(o4e,null,a)))});function zP(){return zP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},zP.apply(null,arguments)}var _Be={top:5,right:5,bottom:5,left:5},EBe={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:_Be,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},SBe=T.forwardRef(function(e,r){var n,i=Uc(e.categoricalChartProps,EBe),{chartName:a,defaultTooltipEventType:o,validateTooltipEventTypes:c,tooltipPayloadSearcher:u,categoricalChartProps:l}=e,d={chartName:a,defaultTooltipEventType:o,validateTooltipEventTypes:c,tooltipPayloadSearcher:u,eventEmitter:void 0};return T.createElement(jre,{preloadedState:{options:d},reduxStoreName:(n=l.id)!==null&&n!==void 0?n:a},T.createElement(nre,{chartData:l.data}),T.createElement(Tre,{layout:i.layout,margin:i.margin}),T.createElement(Cre,{baseValue:i.baseValue,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),T.createElement(Nre,zP({},i,{ref:r})))}),jBe=["axis","item"],kre=T.forwardRef((t,e)=>T.createElement(SBe,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:jBe,tooltipPayloadSearcher:SM,categoricalChartProps:t,ref:e}));function TBe(t){var e=Al();return T.useEffect(()=>{e(YIe(t))},[e,t]),null}var CBe=["layout"];function VP(){return VP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},VP.apply(null,arguments)}function NBe(t,e){if(t==null)return{};var r,n,i=kBe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function kBe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var LBe={top:5,right:5,bottom:5,left:5},qM={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:LBe,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},Lre=T.forwardRef(function(e,r){var n,i=Uc(e.categoricalChartProps,qM),{layout:a}=i,o=NBe(i,CBe),{chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:l,tooltipPayloadSearcher:d}=e,f={chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:l,tooltipPayloadSearcher:d,eventEmitter:void 0};return T.createElement(jre,{preloadedState:{options:f},reduxStoreName:(n=i.id)!==null&&n!==void 0?n:c},T.createElement(nre,{chartData:i.data}),T.createElement(Tre,{layout:a,margin:i.margin}),T.createElement(Cre,{baseValue:void 0,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),T.createElement(TBe,{cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius}),T.createElement(Nre,VP({},o,{ref:r})))});function oV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function lV(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?oV(Object(r),!0).forEach(function(n){IBe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):oV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function IBe(t,e,r){return(e=BBe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function BBe(t){var e=PBe(t,"string");return typeof e=="symbol"?e:e+""}function PBe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var OBe=["item"],RBe=lV(lV({},qM),{},{layout:"centric",startAngle:0,endAngle:360}),DBe=T.forwardRef((t,e)=>{var r=Uc(t,RBe);return T.createElement(Lre,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:OBe,tooltipPayloadSearcher:SM,categoricalChartProps:r,ref:e})});function cV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function uV(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?cV(Object(r),!0).forEach(function(n){MBe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):cV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function MBe(t,e,r){return(e=FBe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function FBe(t){var e=UBe(t,"string");return typeof e=="symbol"?e:e+""}function UBe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var $Be=["axis"],HBe=uV(uV({},qM),{},{layout:"centric",startAngle:90,endAngle:-270}),QBe=T.forwardRef((t,e)=>{var r=Uc(t,HBe);return T.createElement(Lre,{chartName:"RadarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:$Be,tooltipPayloadSearcher:SM,categoricalChartProps:r,ref:e})});const zBe=[{name:"Custom Fight Banner Graphics",price:"$650",avgPrice:650,icon:tm,description:"Custom graphics for all athletes created day-of from registration photos",features:["Professional athlete intro graphics","Fight card overlays","Social media ready formats","Same-day delivery"]},{name:"Professional Event Photography",price:"$1,000",avgPrice:1e3,icon:k2,description:"Dedicated photographer capturing every moment of your event",features:["Full event coverage","Match action shots","Winners & awards ceremony","Crowd atmosphere shots","Complete digital gallery"]},{name:"Individual Fight/Match Recordings",price:"$750",avgPrice:750,icon:bh,description:"Every fight delivered as a standalone clip  perfect for athletes, coaches, and social media",features:["Individual recording of every fight/match","Clean cuts with walkout to decision","Athlete-ready format for social sharing","YouTube-ready individual uploads","7-day delivery"]},{name:"Premium Camera Setup",price:"$2,000",avgPrice:2e3,icon:k2,description:"Upgrade to broadcast-grade multi-camera production",features:["3-4 cinema-grade cameras","PTZ cameras for dynamic angles","Professional live switching","Instant replay capability","Broadcast graphics integration"]},{name:"Social Media Content Package",price:"$1,500",avgPrice:1500,icon:nm,description:"Comprehensive content strategy for maximum reach",features:["5-10 social clips","Event highlight reel (3-5 min)","Short-form vertical edits for Reels/TikTok","Same-day highlight delivery"]},{name:"Ongoing Content Strategy",price:"$3,000",avgPrice:3e3,priceDetail:"per month",icon:UY,description:"Monthly content calendar and audience growth strategy",features:["Monthly content calendar","Audience growth strategy","Between-event content","Analytics & optimization","Dedicated account manager"]}],VBe=t=>t==="Major"?["Professional broadcast production (3-4 cameras with PTZ)","Complete PPV/streaming setup and management","Full show recording","Custom fight banner graphics for all athletes","Professional event photography","3 social media highlight clips","Revenue share: You earn from every PPV sale"]:t==="Established"?["Professional live stream production (2-3 cameras)","Complete PPV/streaming setup and management","Full show recording","Custom fight banner graphics for all athletes","1 social media highlight clip","Revenue share: You earn from every PPV sale"]:["Professional live stream production (1-2 cameras)","Complete PPV/streaming setup and management","Full show recording","1 social media highlight clip","Revenue share: You earn from every PPV sale"],KBe={Grassroots:[],Regional:[],Established:["Custom Fight Banner Graphics"],Major:["Custom Fight Banner Graphics","Professional Event Photography","Premium Camera Setup"]},dV=t=>t==="Major"?[{name:"Essentials Package",price:"$1,500",features:["Individual Fight/Match Recordings ($750 value)","Social Media Content Package  5-10 clips ($1,500 value)"],addOns:["Individual Fight/Match Recordings","Social Media Content Package"],bestFor:"Major promotions wanting athlete-ready content",popular:!1},{name:"Professional Package",price:"$3,000",features:["Everything in Essentials","Ongoing Content Strategy  1 month ($3,000 value)"],addOns:["Individual Fight/Match Recordings","Social Media Content Package","Ongoing Content Strategy"],bestFor:"Promotions building a year-round content engine",popular:!0},{name:"Broadcast Package",price:"$4,500",features:["Everything in Professional","Priority scheduling","Dedicated account manager","Between-event content creation"],addOns:["Individual Fight/Match Recordings","Social Media Content Package","Ongoing Content Strategy"],bestFor:"Elite promotions wanting a full media partnership",popular:!1}]:t==="Established"?[{name:"Essentials Package",price:"$2,000",features:["Individual Fight/Match Recordings ($750 value)","Social Media Content Package  5-10 clips ($1,500 value)"],addOns:["Individual Fight/Match Recordings","Social Media Content Package"],bestFor:"Established promotions adding content to their toolkit",popular:!1},{name:"Professional Package",price:"$3,500",features:["Everything in Essentials","Professional Event Photography ($1,000 value)","Premium Camera Setup ($2,000 value)"],addOns:["Individual Fight/Match Recordings","Social Media Content Package","Professional Event Photography","Premium Camera Setup"],bestFor:"Promotions ready for broadcast-quality production",popular:!0},{name:"Broadcast Package",price:"$5,500",features:["Everything in Professional","Ongoing Content Strategy  1 month ($3,000 value)","Priority scheduling"],addOns:["Individual Fight/Match Recordings","Social Media Content Package","Professional Event Photography","Premium Camera Setup","Ongoing Content Strategy"],bestFor:"Promotions dominating their market with full media support",popular:!1}]:[{name:"Essentials Package",price:"$2,500",features:["Custom Fight Banner Graphics ($650 value)","Individual Fight/Match Recordings ($750 value)"],addOns:["Custom Fight Banner Graphics","Individual Fight/Match Recordings"],bestFor:"Grassroots promotions building their brand",popular:!1},{name:"Professional Package",price:"$4,000",features:["Everything in Essentials","Professional Event Photography ($1,000 value)","Social Media Content Package ($1,500 value)"],addOns:["Custom Fight Banner Graphics","Individual Fight/Match Recordings","Professional Event Photography","Social Media Content Package"],bestFor:"Growing promotions ready to scale",popular:!0},{name:"Broadcast Package",price:"$6,500",features:["Everything in Professional","Premium Camera Setup ($2,000 value)","Ongoing Content Strategy  1 month ($3,000 value)"],addOns:["Custom Fight Banner Graphics","Individual Fight/Match Recordings","Professional Event Photography","Social Media Content Package","Premium Camera Setup","Ongoing Content Strategy"],bestFor:"Established promotions dominating their market",popular:!1}],GBe=t=>t==="Major"?"All packages build on your premium base offer  which already includes broadcast production, photography, banner graphics, and PPV revenue share at zero cost":t==="Established"?"All packages build on your enhanced base offer  which already includes professional production, banner graphics, and PPV revenue share at zero cost":"All packages include our zero-cost live production + PPV revenue share as the base service",hV=t=>t==="Major"?"Your Major tier includes broadcast production, photography, banner graphics, and PPV revenue share at no extra cost. These packages add even more on top of your premium base offer.":t==="Established"?"Your Established tier includes banner graphics at no extra cost. These packages add even more on top of your enhanced base offer.":null,WBe=({formData:t,analysis:e,nextStep:r,prevStep:n,selectedAddOns:i=[],setSelectedAddOns:a})=>{const[o,c]=T.useState(null),[u,l]=T.useState(!1),[d,f]=T.useState(null),[m,p]=T.useState(t.showsPerYear),g=e?.potentialStreamingRevenue?.expectedPurchases||Math.round((e?.potentialStreamingRevenue?.viewerEstimate||200)*.6),[y,x]=T.useState(g),[w,_]=T.useState(25);if(!e)return s.jsx("section",{className:"min-h-screen py-20 px-4 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-gray-400",children:"No analysis available. Please complete the profile form."}),s.jsx("button",{onClick:n,className:"mt-6 px-6 py-3 bg-primary-600 hover:bg-primary-700 text-white font-bold rounded-lg transition-all",children:"Go Back"})]})});const E=[{metric:"Event Frequency",value:Math.min(t.showsPerYear/12*100,100)},{metric:"Audience Size",value:Math.min(t.avgAttendance/1e3*100,100)},{metric:"Social Reach",value:Math.min(t.socialFollowing/1e5*100,100)},{metric:"Venue Scale",value:Math.min(t.venueCapacity/2e3*100,100)},{metric:"Growth",value:t.growthTrajectory==="rapidly-growing"?100:t.growthTrajectory==="growing"?85:t.growthTrajectory==="stable"?60:30}],N={Grassroots:"from-green-600 to-emerald-600",Regional:"from-blue-600 to-cyan-600",Established:"from-purple-600 to-pink-600",Major:"from-amber-600 to-red-600"},C={Grassroots:"",Regional:"",Established:"",Major:""},I=Math.round(y*w),D=Math.round(I*.3),U=D*m,G=J=>{if(i.includes(J)){if(a(i.filter(de=>de!==J)),d){const de=dV(e.tier).find(xe=>xe.name===d);de&&de.addOns.includes(J)&&f(null)}}else a([...i,J])},q=J=>{if(d===J.name)f(null),a(i.filter(de=>!J.addOns.includes(de)));else{f(J.name);const de=[...new Set([...i,...J.addOns])];a(de)}};return s.jsx("section",{className:"min-h-screen py-12 sm:py-20 px-4",children:s.jsxs("div",{className:"max-w-6xl mx-auto",children:[s.jsxs(Dr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center mb-8 sm:mb-12",children:[s.jsxs("div",{className:"inline-flex items-center gap-3 mb-4",children:[s.jsx(nm,{className:"w-10 h-10 sm:w-12 sm:h-12 text-primary-500"}),s.jsx("h2",{className:"text-3xl sm:text-4xl md:text-5xl font-black",children:s.jsx("span",{className:"text-gradient",children:"Your Analysis"})})]}),s.jsxs("p",{className:"text-base sm:text-lg md:text-xl text-gray-300 max-w-2xl mx-auto",children:["Tailored recommendations for ",t.orgName]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 sm:gap-8 mb-6",children:[s.jsxs(Dr.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.2},className:`bg-gradient-to-br ${N[e.tier]} rounded-xl p-6 sm:p-8 border-2 border-white/20 card-glow`,children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx("div",{className:"text-5xl sm:text-6xl",children:C[e.tier]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl sm:text-2xl font-black text-white/90 mb-1",children:"Organization Tier"}),s.jsx("p",{className:"text-white/70 text-sm sm:text-base",children:"Your classification"})]})]}),s.jsx("div",{className:"text-5xl sm:text-6xl md:text-7xl font-black text-white mb-4",children:e.tier}),s.jsxs("p",{className:"text-white/90 text-sm sm:text-base leading-relaxed",children:[e.tier==="Grassroots"&&`With ${t.showsPerYear} event${t.showsPerYear>1?"s":""}/year and ${t.avgAttendance.toLocaleString()} average attendance, you're building your foundation. Professional media coverage will help grow your audience and attract first sponsors.`,e.tier==="Regional"&&`With ${t.showsPerYear} event${t.showsPerYear>1?"s":""}/year and ${t.avgAttendance.toLocaleString()} average attendance, you're running a solid operation. Multi-camera production, live streaming, and sponsor packages will take you to the next level.`,e.tier==="Established"&&`With ${t.showsPerYear} event${t.showsPerYear>1?"s":""}/year and ${t.avgAttendance.toLocaleString()} average attendance, you're an established promotion. Broadcast-quality production with PPV capability and premium sponsor integration is your next move.`,e.tier==="Major"&&`With ${t.showsPerYear} event${t.showsPerYear>1?"s":""}/year and ${t.avgAttendance.toLocaleString()} average attendance, you're a major player. Full media partnerships, dedicated production teams, and broadcast-level media rights management are where the real value is.`]})]}),s.jsxs(Dr.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.3},className:"bg-dark-800 border border-gray-700 rounded-xl p-6 sm:p-8",children:[s.jsx("h3",{className:"text-xl sm:text-2xl font-bold mb-6 text-white",children:"Your Profile Metrics"}),s.jsx(sC,{width:"100%",height:280,children:s.jsxs(QBe,{data:E,children:[s.jsx(Ute,{stroke:"#374151"}),s.jsx(Hte,{dataKey:"metric",tick:{fill:"#9CA3AF",fontSize:11},className:"text-xs sm:text-sm"}),s.jsx(rre,{name:"Score",dataKey:"value",stroke:"#F83B3B",fill:"#F83B3B",fillOpacity:.6})]})})]})]}),s.jsxs(Dr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.35},className:"bg-gradient-to-br from-blue-900/20 to-cyan-900/20 border border-blue-700/40 rounded-xl p-6 sm:p-8 mb-8",children:[s.jsxs("button",{onClick:()=>l(!u),className:"w-full flex items-start gap-4 text-left",children:[s.jsx(che,{className:"w-8 h-8 sm:w-10 sm:h-10 text-blue-400 flex-shrink-0"}),s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl sm:text-2xl font-black text-white mb-2",children:"Market Intelligence"}),s.jsx("p",{className:"text-sm sm:text-base text-gray-300",children:"What others at your tier are doing"})]}),u?s.jsx(Db,{className:"w-6 h-6 text-blue-400"}):s.jsx(F0,{className:"w-6 h-6 text-blue-400"})]})})]}),u&&s.jsxs("div",{className:"space-y-3 mt-4",children:[e.tier==="Grassroots"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-start gap-3 p-3 bg-dark-900/40 rounded-lg",children:[s.jsx("div",{className:"text-blue-400 text-xl",children:""}),s.jsxs("p",{className:"text-gray-200 text-sm sm:text-base",children:[s.jsx("strong",{className:"text-blue-300",children:"78% of grassroots promotions"})," still rely on phone footage  professional media is your competitive edge"]})]}),s.jsxs("div",{className:"flex items-start gap-3 p-3 bg-dark-900/40 rounded-lg",children:[s.jsx("div",{className:"text-blue-400 text-xl",children:""}),s.jsxs("p",{className:"text-gray-200 text-sm sm:text-base",children:["Promotions that invest in media coverage see ",s.jsx("strong",{className:"text-blue-300",children:"2-3x faster audience growth"})]})]})]}),e.tier==="Regional"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-start gap-3 p-3 bg-dark-900/40 rounded-lg",children:[s.jsx("div",{className:"text-blue-400 text-xl",children:""}),s.jsxs("p",{className:"text-gray-200 text-sm sm:text-base",children:[s.jsx("strong",{className:"text-blue-300",children:"62% of regional promotions"})," now offer live streaming  audiences expect it"]})]}),s.jsxs("div",{className:"flex items-start gap-3 p-3 bg-dark-900/40 rounded-lg",children:[s.jsx("div",{className:"text-blue-400 text-xl",children:""}),s.jsxs("p",{className:"text-gray-200 text-sm sm:text-base",children:["Regional promotions with professional media attract ",s.jsx("strong",{className:"text-blue-300",children:"40% more sponsor interest"})]})]})]}),e.tier==="Established"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-start gap-3 p-3 bg-dark-900/40 rounded-lg",children:[s.jsx("div",{className:"text-blue-400 text-xl",children:""}),s.jsxs("p",{className:"text-gray-200 text-sm sm:text-base",children:[s.jsx("strong",{className:"text-blue-300",children:"85% of established promotions"})," have moved to PPV  the question isn't if, but when"]})]}),s.jsxs("div",{className:"flex items-start gap-3 p-3 bg-dark-900/40 rounded-lg",children:[s.jsx("div",{className:"text-blue-400 text-xl",children:""}),s.jsxs("p",{className:"text-gray-200 text-sm sm:text-base",children:[s.jsx("strong",{className:"text-blue-300",children:"Top-tier media production is the #1 factor"})," sponsors cite when choosing event partnerships"]})]})]}),e.tier==="Major"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-start gap-3 p-3 bg-dark-900/40 rounded-lg",children:[s.jsx("div",{className:"text-blue-400 text-xl",children:""}),s.jsxs("p",{className:"text-gray-200 text-sm sm:text-base",children:["Major promotions with dedicated media teams generate ",s.jsx("strong",{className:"text-blue-300",children:"30-50% of revenue from content"})]})]}),s.jsxs("div",{className:"flex items-start gap-3 p-3 bg-dark-900/40 rounded-lg",children:[s.jsx("div",{className:"text-blue-400 text-xl",children:""}),s.jsxs("p",{className:"text-gray-200 text-sm sm:text-base",children:[s.jsx("strong",{className:"text-blue-300",children:"Broadcast-quality production is no longer a luxury"}),"  it's the baseline expectation"]})]})]})]})]}),s.jsxs(Dr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},className:"mb-8",children:[s.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[s.jsx(Ay,{className:"w-10 h-10 sm:w-12 sm:h-12 text-amber-400 fill-amber-400"}),s.jsxs("h3",{className:"text-3xl sm:text-4xl font-black text-white",children:["Our Offer to ",t.orgName]})]}),s.jsxs("div",{className:"relative bg-gradient-to-br from-amber-600 via-orange-600 to-red-600 rounded-2xl p-8 sm:p-12 border-4 border-amber-400/50 card-glow overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 opacity-10",children:s.jsx("div",{className:"absolute inset-0",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.4'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}})}),s.jsxs("div",{className:"relative z-10",children:[s.jsxs("div",{className:"inline-flex items-center gap-2 bg-white/20 backdrop-blur-sm px-4 py-2 rounded-full mb-6",children:[s.jsx(zb,{className:"w-5 h-5 text-white"}),s.jsx("span",{className:"text-white font-bold text-sm",children:"ZERO-COST PRODUCTION"})]}),s.jsx("h4",{className:"text-4xl sm:text-5xl md:text-6xl font-black text-white mb-4 leading-tight",children:"Zero-Cost Live Stream Production"}),s.jsx("p",{className:"text-xl sm:text-2xl md:text-3xl text-white/90 mb-8 font-bold",children:"We produce your event. You pay nothing. You earn revenue."}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[s.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-6 border border-white/20",children:[s.jsxs("h5",{className:"text-xl font-black text-white mb-4 flex items-center gap-2",children:[s.jsx(la,{className:"w-6 h-6"}),"What's Included FREE"]}),s.jsx("ul",{className:"space-y-3",children:VBe(e.tier).map((J,de)=>s.jsxs("li",{className:"flex items-start gap-3",children:[s.jsx(la,{className:"w-5 h-5 text-white flex-shrink-0 mt-0.5"}),s.jsx("span",{className:"text-white text-sm sm:text-base",children:J})]},de))})]}),s.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-6 border border-white/20",children:[s.jsx("h5",{className:"text-xl font-black text-white mb-4",children:"How It Works"}),s.jsx("div",{className:"space-y-4",children:[{num:"1",text:e.tier==="Major"?"We produce your event with a full broadcast setup (3-4 cameras, PTZ, photographer)":e.tier==="Established"?"We produce your event with professional multi-camera coverage (2-3 cameras, full setup)":"We produce your live stream (1-2 pro cameras, full setup)"},{num:"2",text:"Fans purchase PPV access ($20-$30 per viewer)"},{num:"3",text:"You earn from all PPV revenue  free money you weren't making before"}].map(J=>s.jsxs("div",{className:"flex gap-4",children:[s.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-white rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-xl font-black text-orange-600",children:J.num})}),s.jsx("p",{className:"text-white text-sm sm:text-base flex-1 mt-1",children:J.text})]},J.num))})]})]}),s.jsxs("div",{className:"bg-green-900/40 backdrop-blur-sm border-2 border-green-400 rounded-xl p-6 text-center",children:[s.jsxs("p",{className:"text-2xl sm:text-3xl font-black text-white mb-2",children:["Your Production Cost: ",s.jsx("span",{className:"text-green-300",children:"$0"})]}),s.jsx("p",{className:"text-white/90 text-base sm:text-lg",children:"Zero upfront cost. Zero risk. Just professional streaming + revenue sharing."})]})]})]})]}),s.jsxs(Dr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.5},className:"bg-dark-800 border border-gray-700 rounded-xl p-6 sm:p-8 mb-8",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx(BY,{className:"w-8 h-8 sm:w-10 sm:h-10 text-green-400"}),s.jsx("h3",{className:"text-2xl sm:text-3xl font-black text-white",children:"Your Revenue Projection"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 sm:gap-8",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsx("h4",{className:"text-lg sm:text-xl font-bold text-white",children:"Your Numbers"}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-semibold mb-3 text-gray-300",children:["Events Per Year: ",s.jsx("span",{className:"text-primary-500 text-lg font-bold",children:m})]}),s.jsx("input",{type:"range",min:"1",max:"24",value:m,onChange:J=>p(parseInt(J.target.value)),className:"w-full h-3 accent-primary-600"}),s.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[s.jsx("span",{children:"1"}),s.jsx("span",{children:"24"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-semibold mb-3 text-gray-300",children:["Expected PPV Purchases: ",s.jsx("span",{className:"text-primary-500 text-lg font-bold",children:y.toLocaleString()})]}),s.jsx("input",{type:"range",min:"50",max:"2000",step:"25",value:y,onChange:J=>x(parseInt(J.target.value)),className:"w-full h-3 accent-primary-600"}),s.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[s.jsx("span",{children:"50"}),s.jsx("span",{children:"2,000"})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Reference: Small shows 100-250 | Medium 300-600 | Large 800-2000+"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-semibold mb-3 text-gray-300",children:["PPV Price: ",s.jsxs("span",{className:"text-primary-500 text-lg font-bold",children:["$",w]})]}),s.jsx("input",{type:"range",min:"10",max:"50",step:"1",value:w,onChange:J=>_(parseInt(J.target.value)),className:"w-full h-3 accent-primary-600"}),s.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[s.jsx("span",{children:"$10"}),s.jsx("span",{children:"$50"})]})]}),s.jsxs("div",{className:"p-4 bg-green-900/20 border border-green-600/50 rounded-lg",children:[s.jsx("p",{className:"text-green-300 text-sm font-semibold mb-2",children:" The Zero-Cost Advantage"}),s.jsxs("p",{className:"text-green-200 text-xs leading-relaxed",children:["Without professional streaming: ",s.jsx("strong",{children:"$0 PPV revenue."}),s.jsx("br",{}),"With us: ",s.jsxs("strong",{children:["$",U.toLocaleString(),"/year"]}),"  at zero cost to you."]})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("h4",{className:"text-lg sm:text-xl font-bold text-white flex items-center gap-3",children:[s.jsx(Gh,{className:"w-6 h-6 text-green-400"}),"Revenue Breakdown"]}),s.jsxs("div",{className:"p-5 bg-gradient-to-br from-green-900/40 to-emerald-900/40 border-2 border-green-500 rounded-lg",children:[s.jsx("p",{className:"text-sm text-gray-300 font-semibold mb-1",children:"Your Production Cost"}),s.jsx("p",{className:"text-4xl sm:text-5xl font-black text-green-400",children:"$0"}),s.jsx("p",{className:"text-xs text-green-300 mt-2",children:" Zero upfront investment required"})]}),s.jsxs("div",{className:"p-5 bg-dark-900 rounded-lg",children:[s.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"Your Revenue Per Event"}),s.jsxs("p",{className:"text-3xl sm:text-4xl font-black text-green-400",children:["$",D.toLocaleString()]}),s.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Revenue from PPV sales  you weren't earning this before"})]}),s.jsxs("div",{className:"p-5 bg-gradient-to-br from-green-900/40 to-emerald-900/40 border-2 border-green-500 rounded-lg",children:[s.jsx("p",{className:"text-sm text-gray-300 font-semibold mb-1",children:"Your Annual Revenue"}),s.jsxs("p",{className:"text-3xl sm:text-4xl font-black text-green-400",children:["$",U.toLocaleString()]}),s.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["$",D.toLocaleString(),"  ",m," events"]})]}),s.jsx("div",{className:"p-4 bg-blue-900/20 border border-blue-700/50 rounded-lg",children:s.jsxs("p",{className:"text-sm text-blue-200 leading-relaxed",children:[" ",s.jsx("strong",{children:"100% Pure Profit:"})," Every dollar you earn is revenue you weren't generating before. Zero risk, zero cost, all upside. Plus the sponsor deals, ticket sales, and brand growth that come from professional streaming."]})})]})]})]}),s.jsxs(Dr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.58},className:"mb-8",children:[s.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[s.jsx(N0,{className:"w-8 h-8 sm:w-10 sm:h-10 text-primary-400 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-2xl sm:text-3xl font-black text-white",children:"Want Even More?"}),s.jsx("p",{className:"text-gray-400 text-sm sm:text-base",children:"Your free live stream is just the beginning. Upgrade your event with premium services."})]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-6",children:zBe.filter(J=>!KBe[e.tier]?.includes(J.name)).map((J,de)=>{const xe=o===J.name,we=i.includes(J.name),ve=J.icon;return s.jsx(Dr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1*de},className:`bg-dark-800 border-2 rounded-xl overflow-hidden transition-all cursor-pointer ${we?"border-primary-600 bg-primary-900/20":"border-gray-700 hover:border-primary-600/50"}`,onClick:()=>G(J.name),children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[s.jsx("div",{className:`flex-shrink-0 w-12 h-12 rounded-lg flex items-center justify-center ${we?"bg-primary-600":"bg-primary-600/20"}`,children:s.jsx(ve,{className:`w-6 h-6 ${we?"text-white":"text-primary-400"}`})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1",children:[s.jsx("h4",{className:"text-lg font-bold text-white",children:J.name}),we&&s.jsx("div",{className:"flex-shrink-0 w-6 h-6 bg-green-500 rounded-full flex items-center justify-center",children:s.jsx(la,{className:"w-4 h-4 text-white"})})]}),s.jsx("p",{className:"text-primary-400 font-bold",children:J.price}),J.priceDetail&&s.jsx("p",{className:"text-gray-500 text-xs",children:J.priceDetail})]})]}),s.jsx("p",{className:"text-gray-400 text-sm mb-4",children:J.description}),s.jsx("div",{className:"space-y-2",children:J.features.slice(0,xe?J.features.length:3).map((ne,ae)=>s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(la,{className:"w-4 h-4 text-green-400 flex-shrink-0 mt-0.5"}),s.jsx("span",{className:"text-gray-300 text-xs",children:ne})]},ae))}),J.features.length>3&&s.jsx("button",{onClick:ne=>{ne.stopPropagation(),c(xe?null:J.name)},className:"flex items-center gap-1 text-primary-500 hover:text-primary-400 font-semibold text-xs mt-3 transition-colors",children:xe?s.jsxs(s.Fragment,{children:[s.jsx(Db,{className:"w-4 h-4"}),"Show Less"]}):s.jsxs(s.Fragment,{children:[s.jsx(F0,{className:"w-4 h-4"}),"Show All (",J.features.length,")"]})}),s.jsx("button",{onClick:ne=>{ne.stopPropagation(),G(J.name)},className:`w-full mt-4 py-2 px-4 rounded-lg font-bold transition-colors ${we?"bg-green-600 hover:bg-green-700 text-white":"bg-primary-600 hover:bg-primary-700 text-white"}`,children:we?" Selected":"Select"})]})},J.name)})}),hV(e.tier)&&s.jsx("div",{className:"mb-6 p-4 bg-gradient-to-r from-green-900/20 to-emerald-900/20 border border-green-600/40 rounded-lg",children:s.jsxs("p",{className:"text-green-300 text-sm sm:text-base font-medium",children:[" ",hV(e.tier)]})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:dV(e.tier).map((J,de)=>{const xe=d===J.name;return s.jsxs("div",{onClick:()=>q(J),className:`bg-dark-800 border-2 rounded-xl p-6 sm:p-8 flex flex-col cursor-pointer transition-all relative ${xe?"border-green-500 bg-green-900/20 ring-2 ring-green-500/30":J.popular?"border-primary-600 card-glow hover:border-primary-500":"border-gray-700 hover:border-primary-600/50"}`,children:[xe&&s.jsx("div",{className:"absolute -top-3 right-4",children:s.jsxs("div",{className:"inline-flex items-center gap-1 bg-green-500 px-3 py-1 rounded-full",children:[s.jsx(la,{className:"w-4 h-4 text-white"}),s.jsx("span",{className:"text-white font-bold text-xs",children:"SELECTED"})]})}),J.popular&&!xe&&s.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2",children:s.jsxs("div",{className:"inline-flex items-center gap-1 bg-primary-600 px-4 py-1 rounded-full",children:[s.jsx(Ay,{className:"w-4 h-4 text-white fill-white"}),s.jsx("span",{className:"text-white font-bold text-xs",children:"MOST POPULAR"})]})}),s.jsxs("div",{className:`mb-6 ${J.popular||xe?"mt-2":""}`,children:[s.jsx("h4",{className:"text-xl sm:text-2xl font-black text-white mb-2",children:J.name}),s.jsxs("div",{className:"flex items-baseline gap-1 mb-3",children:[s.jsx("span",{className:"text-3xl sm:text-4xl font-black text-primary-500",children:J.price}),s.jsx("span",{className:"text-gray-400 text-sm",children:"/event"})]})]}),s.jsx("ul",{className:"space-y-3 mb-6 flex-1",children:J.features.map((we,ve)=>s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx(la,{className:"w-5 h-5 text-green-400 flex-shrink-0 mt-0.5"}),s.jsx("span",{className:"text-gray-300 text-sm",children:we})]},ve))}),s.jsxs("div",{className:"mt-auto",children:[s.jsxs("p",{className:"text-xs text-gray-500 italic mb-4",children:["Best for: ",J.bestFor]}),s.jsx("button",{onClick:we=>{we.stopPropagation(),q(J)},className:`w-full py-3 px-4 rounded-lg font-bold transition-colors ${xe?"bg-green-600 hover:bg-green-700 text-white":"bg-primary-600 hover:bg-primary-700 text-white"}`,children:xe?" Package Selected":"Select Package"})]})]},J.name)})}),s.jsx("div",{className:"mt-6 text-center",children:s.jsx("p",{className:"text-gray-500 text-xs sm:text-sm",children:GBe(e.tier)})})]}),s.jsxs(Dr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.62},className:"bg-gradient-to-br from-orange-900/30 to-red-900/30 border border-orange-700/50 rounded-xl p-6 sm:p-8 mb-8",children:[s.jsxs("div",{className:"flex items-start gap-4 mb-6",children:[s.jsx(PT,{className:"w-8 h-8 sm:w-10 sm:h-10 text-orange-400 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl sm:text-2xl font-black text-white mb-2",children:"What's It Costing You to NOT Have Professional Streaming?"}),s.jsx("p",{className:"text-sm sm:text-base text-gray-300",children:"Every event without professional media is a missed opportunity"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"p-4 bg-dark-900/40 rounded-lg border border-orange-700/30",children:[s.jsx("div",{className:"text-3xl mb-2",children:""}),s.jsx("h4",{className:"font-bold text-white mb-2 text-sm sm:text-base",children:"Sponsor Deals Passing You By"}),s.jsx("p",{className:"text-xs sm:text-sm text-gray-300",children:"Brands partner with promotions that have professional content they can share"})]}),s.jsxs("div",{className:"p-4 bg-dark-900/40 rounded-lg border border-orange-700/30",children:[s.jsx("div",{className:"text-3xl mb-2",children:""}),s.jsx("h4",{className:"font-bold text-white mb-2 text-sm sm:text-base",children:"Audience Growth Stalling"}),s.jsx("p",{className:"text-xs sm:text-sm text-gray-300",children:"Fighters and fans choose events with the best media presence"})]}),s.jsxs("div",{className:"p-4 bg-dark-900/40 rounded-lg border border-orange-700/30",children:[s.jsx("div",{className:"text-3xl mb-2",children:""}),s.jsx("h4",{className:"font-bold text-white mb-2 text-sm sm:text-base",children:"PPV Revenue You're Missing"}),s.jsxs("p",{className:"text-xs sm:text-sm text-gray-300",children:["$",U.toLocaleString(),"/year in free revenue you could be earning  at zero cost"]})]})]})]}),s.jsx(Dr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.66},className:"mb-6 p-6 sm:p-8 bg-gradient-to-r from-green-900/30 to-emerald-900/30 border-2 border-green-600/50 rounded-xl",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx(B0,{className:"w-10 h-10 sm:w-12 sm:h-12 text-green-400 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl sm:text-2xl font-black text-white mb-3",children:"Our Guarantee"}),s.jsxs("p",{className:"text-base sm:text-lg text-gray-200 leading-relaxed",children:["If you're not completely satisfied with your first event's media package,",s.jsx("strong",{className:"text-green-300",children:" we'll re-edit the entire deliverable at no additional cost."})]}),s.jsx("p",{className:"text-sm text-green-400 mt-3 font-semibold",children:"Your success is our reputation. We stand behind our work."})]})]})}),s.jsxs(Dr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.7},className:"mb-8 p-5 bg-gradient-to-r from-amber-900/30 to-orange-900/30 border border-amber-600/50 rounded-xl",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("div",{className:"w-3 h-3 bg-amber-500 rounded-full animate-pulse"}),s.jsx("p",{className:"text-amber-400 font-bold text-sm sm:text-base",children:"Production Slots Filling Fast"})]}),s.jsxs("p",{className:"text-gray-300 text-sm sm:text-base",children:["We produce 3 weekends per month and book 8-12 weeks ahead. ",s.jsx("strong",{className:"text-amber-300",children:"Q2 2026 currently has 4 available production slots remaining."})]})]}),s.jsxs("div",{className:"flex gap-3 sm:gap-4",children:[s.jsxs("button",{onClick:n,className:"flex-1 flex items-center justify-center gap-2 px-6 py-4 bg-dark-700 hover:bg-dark-600 text-white font-bold rounded-lg transition-all text-base sm:text-lg",children:[s.jsx(tp,{className:"w-5 h-5"}),s.jsx("span",{className:"hidden sm:inline",children:"Back"})]}),s.jsxs("button",{onClick:r,className:"flex-[2] flex items-center justify-center gap-2 px-6 py-4 bg-primary-600 hover:bg-primary-700 text-white font-bold rounded-lg transition-all hover:scale-[1.02] text-base sm:text-lg",children:["Get Your Proposal",s.jsx(Fh,{className:"w-5 h-5"})]})]})]})})},YBe=({contactData:t,updateContactData:e,formData:r,onSubmit:n,prevStep:i})=>{const[a,o]=T.useState(!1),[c,u]=T.useState(null),l=t.name.trim().length>0&&t.email.trim().length>0,d=async()=>{u(null),o(!0);try{await n()}catch(f){console.error("Error saving contact:",f),u("Something went wrong. Please try again.")}finally{o(!1)}};return s.jsx("section",{className:"min-h-screen py-12 sm:py-20 px-4",children:s.jsxs("div",{className:"max-w-2xl mx-auto",children:[s.jsxs(Dr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center mb-8 sm:mb-12",children:[s.jsxs("div",{className:"inline-flex items-center gap-3 mb-4",children:[s.jsx(eg,{className:"w-10 h-10 sm:w-12 sm:h-12 text-primary-500"}),s.jsx("h2",{className:"text-3xl sm:text-4xl md:text-5xl font-black",children:s.jsx("span",{className:"text-gradient",children:"Get Your Custom Proposal"})})]}),s.jsxs("p",{className:"text-base sm:text-lg md:text-xl text-gray-300 max-w-xl mx-auto",children:["We've built a personalized media strategy for ",s.jsx("span",{className:"text-primary-400 font-bold",children:r.orgName}),". Enter your details to receive your full proposal."]})]}),s.jsxs(Dr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"bg-dark-800 border border-gray-700 rounded-xl p-6 sm:p-8",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm sm:text-base font-semibold mb-3 text-gray-300",children:s.jsxs("span",{className:"inline-flex items-center gap-2",children:[s.jsx(eg,{className:"w-4 h-4 text-primary-500"}),"Your Name ",s.jsx("span",{className:"text-primary-500",children:"*"})]})}),s.jsx("input",{type:"text",value:t.name,onChange:f=>e("name",f.target.value),className:"w-full px-4 py-3 sm:py-4 bg-dark-900 border-2 border-gray-700 rounded-lg text-white text-base sm:text-lg focus:border-primary-600 focus:outline-none transition-colors",placeholder:"John Smith"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm sm:text-base font-semibold mb-3 text-gray-300",children:s.jsxs("span",{className:"inline-flex items-center gap-2",children:[s.jsx(tu,{className:"w-4 h-4 text-primary-500"}),"Email Address ",s.jsx("span",{className:"text-primary-500",children:"*"})]})}),s.jsx("input",{type:"email",value:t.email,onChange:f=>e("email",f.target.value),className:"w-full px-4 py-3 sm:py-4 bg-dark-900 border-2 border-gray-700 rounded-lg text-white text-base sm:text-lg focus:border-primary-600 focus:outline-none transition-colors",placeholder:"john@organization.com"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm sm:text-base font-semibold mb-3 text-gray-300",children:s.jsxs("span",{className:"inline-flex items-center gap-2",children:[s.jsx(my,{className:"w-4 h-4 text-gray-500"}),"Phone Number ",s.jsx("span",{className:"text-gray-500 text-sm font-normal",children:"(optional)"})]})}),s.jsx("input",{type:"tel",value:t.phone,onChange:f=>e("phone",f.target.value),className:"w-full px-4 py-3 sm:py-4 bg-dark-900 border-2 border-gray-700 rounded-lg text-white text-base sm:text-lg focus:border-primary-600 focus:outline-none transition-colors",placeholder:"04XX XXX XXX (optional)"})]})]}),c&&s.jsx("div",{className:"mt-4 p-3 bg-red-900/30 border border-red-700 rounded-lg text-red-200 text-sm",children:c}),s.jsxs("div",{className:"mt-6 flex items-start gap-3 p-4 bg-dark-900/50 rounded-lg",children:[s.jsx(B0,{className:"w-5 h-5 text-gray-500 flex-shrink-0 mt-0.5"}),s.jsx("p",{className:"text-xs sm:text-sm text-gray-500",children:"Your information is kept confidential and only used to prepare your custom proposal. We'll never share your details with third parties."})]}),s.jsxs("div",{className:"mt-8 flex gap-3",children:[s.jsxs("button",{onClick:i,className:"flex-1 flex items-center justify-center gap-2 px-6 py-4 bg-dark-700 hover:bg-dark-600 text-white font-bold rounded-lg transition-all text-base sm:text-lg",children:[s.jsx(tp,{className:"w-5 h-5"}),"Back"]}),s.jsxs("button",{onClick:d,disabled:!l||a,className:"flex-[2] flex items-center justify-center gap-2 px-6 py-4 bg-primary-600 hover:bg-primary-700 disabled:bg-gray-600 disabled:cursor-not-allowed text-white font-bold rounded-lg transition-all hover:scale-[1.02] text-base sm:text-lg",children:[a?"Saving...":"Continue",!a&&s.jsx(Fh,{className:"w-5 h-5"})]})]})]})]})})};var ZL={exports:{}},uj={exports:{}};var qBe=uj.exports,fV;function XBe(){return fV||(fV=1,(function(t,e){(function(r,n){t.exports=n()})(qBe,(function(){var r=function(F,B){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(z,H){z.__proto__=H}||function(z,H){for(var ge in H)Object.prototype.hasOwnProperty.call(H,ge)&&(z[ge]=H[ge])},r(F,B)};function n(F,B){if(typeof B!="function"&&B!==null)throw new TypeError("Class extends value "+String(B)+" is not a constructor or null");r(F,B);function z(){this.constructor=F}F.prototype=B===null?Object.create(B):(z.prototype=B.prototype,new z)}var i=function(){return i=Object.assign||function(B){for(var z,H=1,ge=arguments.length;H<ge;H++){z=arguments[H];for(var Ne in z)Object.prototype.hasOwnProperty.call(z,Ne)&&(B[Ne]=z[Ne])}return B},i.apply(this,arguments)};function a(F,B,z,H){function ge(Ne){return Ne instanceof z?Ne:new z(function(ze){ze(Ne)})}return new(z||(z=Promise))(function(Ne,ze){function At(Zt){try{Ut(H.next(Zt))}catch(hr){ze(hr)}}function pt(Zt){try{Ut(H.throw(Zt))}catch(hr){ze(hr)}}function Ut(Zt){Zt.done?Ne(Zt.value):ge(Zt.value).then(At,pt)}Ut((H=H.apply(F,[])).next())})}function o(F,B){var z={label:0,sent:function(){if(Ne[0]&1)throw Ne[1];return Ne[1]},trys:[],ops:[]},H,ge,Ne,ze;return ze={next:At(0),throw:At(1),return:At(2)},typeof Symbol=="function"&&(ze[Symbol.iterator]=function(){return this}),ze;function At(Ut){return function(Zt){return pt([Ut,Zt])}}function pt(Ut){if(H)throw new TypeError("Generator is already executing.");for(;z;)try{if(H=1,ge&&(Ne=Ut[0]&2?ge.return:Ut[0]?ge.throw||((Ne=ge.return)&&Ne.call(ge),0):ge.next)&&!(Ne=Ne.call(ge,Ut[1])).done)return Ne;switch(ge=0,Ne&&(Ut=[Ut[0]&2,Ne.value]),Ut[0]){case 0:case 1:Ne=Ut;break;case 4:return z.label++,{value:Ut[1],done:!1};case 5:z.label++,ge=Ut[1],Ut=[0];continue;case 7:Ut=z.ops.pop(),z.trys.pop();continue;default:if(Ne=z.trys,!(Ne=Ne.length>0&&Ne[Ne.length-1])&&(Ut[0]===6||Ut[0]===2)){z=0;continue}if(Ut[0]===3&&(!Ne||Ut[1]>Ne[0]&&Ut[1]<Ne[3])){z.label=Ut[1];break}if(Ut[0]===6&&z.label<Ne[1]){z.label=Ne[1],Ne=Ut;break}if(Ne&&z.label<Ne[2]){z.label=Ne[2],z.ops.push(Ut);break}Ne[2]&&z.ops.pop(),z.trys.pop();continue}Ut=B.call(F,z)}catch(Zt){Ut=[6,Zt],ge=0}finally{H=Ne=0}if(Ut[0]&5)throw Ut[1];return{value:Ut[0]?Ut[1]:void 0,done:!0}}}function c(F,B,z){if(arguments.length===2)for(var H=0,ge=B.length,Ne;H<ge;H++)(Ne||!(H in B))&&(Ne||(Ne=Array.prototype.slice.call(B,0,H)),Ne[H]=B[H]);return F.concat(Ne||B)}for(var u=(function(){function F(B,z,H,ge){this.left=B,this.top=z,this.width=H,this.height=ge}return F.prototype.add=function(B,z,H,ge){return new F(this.left+B,this.top+z,this.width+H,this.height+ge)},F.fromClientRect=function(B,z){return new F(z.left+B.windowBounds.left,z.top+B.windowBounds.top,z.width,z.height)},F.fromDOMRectList=function(B,z){var H=Array.from(z).find(function(ge){return ge.width!==0});return H?new F(H.left+B.windowBounds.left,H.top+B.windowBounds.top,H.width,H.height):F.EMPTY},F.EMPTY=new F(0,0,0,0),F})(),l=function(F,B){return u.fromClientRect(F,B.getBoundingClientRect())},d=function(F){var B=F.body,z=F.documentElement;if(!B||!z)throw new Error("Unable to get document size");var H=Math.max(Math.max(B.scrollWidth,z.scrollWidth),Math.max(B.offsetWidth,z.offsetWidth),Math.max(B.clientWidth,z.clientWidth)),ge=Math.max(Math.max(B.scrollHeight,z.scrollHeight),Math.max(B.offsetHeight,z.offsetHeight),Math.max(B.clientHeight,z.clientHeight));return new u(0,0,H,ge)},f=function(F){for(var B=[],z=0,H=F.length;z<H;){var ge=F.charCodeAt(z++);if(ge>=55296&&ge<=56319&&z<H){var Ne=F.charCodeAt(z++);(Ne&64512)===56320?B.push(((ge&1023)<<10)+(Ne&1023)+65536):(B.push(ge),z--)}else B.push(ge)}return B},m=function(){for(var F=[],B=0;B<arguments.length;B++)F[B]=arguments[B];if(String.fromCodePoint)return String.fromCodePoint.apply(String,F);var z=F.length;if(!z)return"";for(var H=[],ge=-1,Ne="";++ge<z;){var ze=F[ge];ze<=65535?H.push(ze):(ze-=65536,H.push((ze>>10)+55296,ze%1024+56320)),(ge+1===z||H.length>16384)&&(Ne+=String.fromCharCode.apply(String,H),H.length=0)}return Ne},p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",g=typeof Uint8Array>"u"?[]:new Uint8Array(256),y=0;y<p.length;y++)g[p.charCodeAt(y)]=y;for(var x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",w=typeof Uint8Array>"u"?[]:new Uint8Array(256),_=0;_<x.length;_++)w[x.charCodeAt(_)]=_;for(var E=function(F){var B=F.length*.75,z=F.length,H,ge=0,Ne,ze,At,pt;F[F.length-1]==="="&&(B--,F[F.length-2]==="="&&B--);var Ut=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(B):new Array(B),Zt=Array.isArray(Ut)?Ut:new Uint8Array(Ut);for(H=0;H<z;H+=4)Ne=w[F.charCodeAt(H)],ze=w[F.charCodeAt(H+1)],At=w[F.charCodeAt(H+2)],pt=w[F.charCodeAt(H+3)],Zt[ge++]=Ne<<2|ze>>4,Zt[ge++]=(ze&15)<<4|At>>2,Zt[ge++]=(At&3)<<6|pt&63;return Ut},N=function(F){for(var B=F.length,z=[],H=0;H<B;H+=2)z.push(F[H+1]<<8|F[H]);return z},C=function(F){for(var B=F.length,z=[],H=0;H<B;H+=4)z.push(F[H+3]<<24|F[H+2]<<16|F[H+1]<<8|F[H]);return z},I=5,D=11,U=2,G=D-I,q=65536>>I,J=1<<I,de=J-1,xe=1024>>I,we=q+xe,ve=we,ne=32,ae=ve+ne,oe=65536>>D,Ie=1<<G,Ce=Ie-1,be=function(F,B,z){return F.slice?F.slice(B,z):new Uint16Array(Array.prototype.slice.call(F,B,z))},ue=function(F,B,z){return F.slice?F.slice(B,z):new Uint32Array(Array.prototype.slice.call(F,B,z))},Pe=function(F,B){var z=E(F),H=Array.isArray(z)?C(z):new Uint32Array(z),ge=Array.isArray(z)?N(z):new Uint16Array(z),Ne=24,ze=be(ge,Ne/2,H[4]/2),At=H[5]===2?be(ge,(Ne+H[4])/2):ue(H,Math.ceil((Ne+H[4])/4));return new Re(H[0],H[1],H[2],H[3],ze,At)},Re=(function(){function F(B,z,H,ge,Ne,ze){this.initialValue=B,this.errorValue=z,this.highStart=H,this.highValueIndex=ge,this.index=Ne,this.data=ze}return F.prototype.get=function(B){var z;if(B>=0){if(B<55296||B>56319&&B<=65535)return z=this.index[B>>I],z=(z<<U)+(B&de),this.data[z];if(B<=65535)return z=this.index[q+(B-55296>>I)],z=(z<<U)+(B&de),this.data[z];if(B<this.highStart)return z=ae-oe+(B>>D),z=this.index[z],z+=B>>I&Ce,z=this.index[z],z=(z<<U)+(B&de),this.data[z];if(B<=1114111)return this.data[this.highValueIndex]}return this.errorValue},F})(),He="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Fe=typeof Uint8Array>"u"?[]:new Uint8Array(256),ft=0;ft<He.length;ft++)Fe[He.charCodeAt(ft)]=ft;var at="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",De=50,ut=1,et=2,Ue=3,jt=4,rt=5,Ct=7,ke=8,Xe=9,mt=10,Jt=11,tr=12,lr=13,Pr=14,tn=15,Gr=16,Xr=17,Qr=18,Pn=19,wn=20,yi=21,ot=22,Gt=23,Ir=24,ar=25,Qt=26,gr=27,Yr=28,en=29,On=30,fn=31,Jn=32,ln=33,Hr=34,yn=35,mn=36,Mn=37,li=38,Cs=39,Ms=40,Ns=41,ei=42,un=43,as=[9001,65288],ta="!",jn="",Nn="",Fs=Pe(at),Qs=[On,mn],Us=[ut,et,Ue,rt],ns=[mt,ke],qs=[gr,Qt],Rs=Us.concat(ns),za=[li,Cs,Ms,Hr,yn],hs=[tn,lr],wu=function(F,B){B===void 0&&(B="strict");var z=[],H=[],ge=[];return F.forEach(function(Ne,ze){var At=Fs.get(Ne);if(At>De?(ge.push(!0),At-=De):ge.push(!1),["normal","auto","loose"].indexOf(B)!==-1&&[8208,8211,12316,12448].indexOf(Ne)!==-1)return H.push(ze),z.push(Gr);if(At===jt||At===Jt){if(ze===0)return H.push(ze),z.push(On);var pt=z[ze-1];return Rs.indexOf(pt)===-1?(H.push(H[ze-1]),z.push(pt)):(H.push(ze),z.push(On))}if(H.push(ze),At===fn)return z.push(B==="strict"?yi:Mn);if(At===ei||At===en)return z.push(On);if(At===un)return Ne>=131072&&Ne<=196605||Ne>=196608&&Ne<=262141?z.push(Mn):z.push(On);z.push(At)}),[H,z,ge]},ro=function(F,B,z,H){var ge=H[z];if(Array.isArray(F)?F.indexOf(ge)!==-1:F===ge)for(var Ne=z;Ne<=H.length;){Ne++;var ze=H[Ne];if(ze===B)return!0;if(ze!==mt)break}if(ge===mt)for(var Ne=z;Ne>0;){Ne--;var At=H[Ne];if(Array.isArray(F)?F.indexOf(At)!==-1:F===At)for(var pt=z;pt<=H.length;){pt++;var ze=H[pt];if(ze===B)return!0;if(ze!==mt)break}if(At!==mt)break}return!1},Fl=function(F,B){for(var z=F;z>=0;){var H=B[z];if(H===mt)z--;else return H}return 0},nu=function(F,B,z,H,ge){if(z[H]===0)return jn;var Ne=H-1;if(Array.isArray(ge)&&ge[Ne]===!0)return jn;var ze=Ne-1,At=Ne+1,pt=B[Ne],Ut=ze>=0?B[ze]:0,Zt=B[At];if(pt===et&&Zt===Ue)return jn;if(Us.indexOf(pt)!==-1)return ta;if(Us.indexOf(Zt)!==-1||ns.indexOf(Zt)!==-1)return jn;if(Fl(Ne,B)===ke)return Nn;if(Fs.get(F[Ne])===Jt||(pt===Jn||pt===ln)&&Fs.get(F[At])===Jt||pt===Ct||Zt===Ct||pt===Xe||[mt,lr,tn].indexOf(pt)===-1&&Zt===Xe||[Xr,Qr,Pn,Ir,Yr].indexOf(Zt)!==-1||Fl(Ne,B)===ot||ro(Gt,ot,Ne,B)||ro([Xr,Qr],yi,Ne,B)||ro(tr,tr,Ne,B))return jn;if(pt===mt)return Nn;if(pt===Gt||Zt===Gt)return jn;if(Zt===Gr||pt===Gr)return Nn;if([lr,tn,yi].indexOf(Zt)!==-1||pt===Pr||Ut===mn&&hs.indexOf(pt)!==-1||pt===Yr&&Zt===mn||Zt===wn||Qs.indexOf(Zt)!==-1&&pt===ar||Qs.indexOf(pt)!==-1&&Zt===ar||pt===gr&&[Mn,Jn,ln].indexOf(Zt)!==-1||[Mn,Jn,ln].indexOf(pt)!==-1&&Zt===Qt||Qs.indexOf(pt)!==-1&&qs.indexOf(Zt)!==-1||qs.indexOf(pt)!==-1&&Qs.indexOf(Zt)!==-1||[gr,Qt].indexOf(pt)!==-1&&(Zt===ar||[ot,tn].indexOf(Zt)!==-1&&B[At+1]===ar)||[ot,tn].indexOf(pt)!==-1&&Zt===ar||pt===ar&&[ar,Yr,Ir].indexOf(Zt)!==-1)return jn;if([ar,Yr,Ir,Xr,Qr].indexOf(Zt)!==-1)for(var hr=Ne;hr>=0;){var $r=B[hr];if($r===ar)return jn;if([Yr,Ir].indexOf($r)!==-1)hr--;else break}if([gr,Qt].indexOf(Zt)!==-1)for(var hr=[Xr,Qr].indexOf(pt)!==-1?ze:Ne;hr>=0;){var $r=B[hr];if($r===ar)return jn;if([Yr,Ir].indexOf($r)!==-1)hr--;else break}if(li===pt&&[li,Cs,Hr,yn].indexOf(Zt)!==-1||[Cs,Hr].indexOf(pt)!==-1&&[Cs,Ms].indexOf(Zt)!==-1||[Ms,yn].indexOf(pt)!==-1&&Zt===Ms||za.indexOf(pt)!==-1&&[wn,Qt].indexOf(Zt)!==-1||za.indexOf(Zt)!==-1&&pt===gr||Qs.indexOf(pt)!==-1&&Qs.indexOf(Zt)!==-1||pt===Ir&&Qs.indexOf(Zt)!==-1||Qs.concat(ar).indexOf(pt)!==-1&&Zt===ot&&as.indexOf(F[At])===-1||Qs.concat(ar).indexOf(Zt)!==-1&&pt===Qr)return jn;if(pt===Ns&&Zt===Ns){for(var Kn=z[Ne],xn=1;Kn>0&&(Kn--,B[Kn]===Ns);)xn++;if(xn%2!==0)return jn}return pt===Jn&&Zt===ln?jn:Nn},pl=function(F,B){B||(B={lineBreak:"normal",wordBreak:"normal"});var z=wu(F,B.lineBreak),H=z[0],ge=z[1],Ne=z[2];(B.wordBreak==="break-all"||B.wordBreak==="break-word")&&(ge=ge.map(function(At){return[ar,On,ei].indexOf(At)!==-1?Mn:At}));var ze=B.wordBreak==="keep-all"?Ne.map(function(At,pt){return At&&F[pt]>=19968&&F[pt]<=40959}):void 0;return[H,ge,ze]},ra=(function(){function F(B,z,H,ge){this.codePoints=B,this.required=z===ta,this.start=H,this.end=ge}return F.prototype.slice=function(){return m.apply(void 0,this.codePoints.slice(this.start,this.end))},F})(),qa=function(F,B){var z=f(F),H=pl(z,B),ge=H[0],Ne=H[1],ze=H[2],At=z.length,pt=0,Ut=0;return{next:function(){if(Ut>=At)return{done:!0,value:null};for(var Zt=jn;Ut<At&&(Zt=nu(z,Ne,ge,++Ut,ze))===jn;);if(Zt!==jn||Ut===At){var hr=new ra(z,Zt,pt,Ut);return pt=Ut,{value:hr,done:!1}}return{done:!0,value:null}}}},Ws=1,wa=2,$s=4,Ll=8,go=10,no=47,gl=92,Ul=9,mc=32,zs=34,ci=61,ks=35,Ta=36,Va=37,Ca=39,gi=40,Zn=41,fs=95,_a=45,Qo=33,Hi=60,zo=62,Ea=64,Xs=91,ms=93,jo=61,Ka=123,Vs=63,Xa=125,vo=124,io=126,Vo=128,Ht=65533,V=42,se=43,ce=44,$=58,K=59,ie=46,me=0,Se=8,Qe=11,ht=14,P=31,k=127,M=-1,W=48,Z=97,re=101,ye=102,fe=117,Ae=122,Le=65,Ve=69,Ze=70,dt=85,je=90,St=function(F){return F>=W&&F<=57},ct=function(F){return F>=55296&&F<=57343},Nt=function(F){return St(F)||F>=Le&&F<=Ze||F>=Z&&F<=ye},it=function(F){return F>=Z&&F<=Ae},Ot=function(F){return F>=Le&&F<=je},qt=function(F){return it(F)||Ot(F)},It=function(F){return F>=Vo},nt=function(F){return F===go||F===Ul||F===mc},Vt=function(F){return qt(F)||It(F)||F===fs},Tr=function(F){return Vt(F)||St(F)||F===_a},or=function(F){return F>=me&&F<=Se||F===Qe||F>=ht&&F<=P||F===k},Mt=function(F,B){return F!==gl?!1:B!==go},_r=function(F,B,z){return F===_a?Vt(B)||Mt(B,z):Vt(F)?!0:!!(F===gl&&Mt(F,B))},lt=function(F,B,z){return F===se||F===_a?St(B)?!0:B===ie&&St(z):St(F===ie?B:F)},vt=function(F){var B=0,z=1;(F[B]===se||F[B]===_a)&&(F[B]===_a&&(z=-1),B++);for(var H=[];St(F[B]);)H.push(F[B++]);var ge=H.length?parseInt(m.apply(void 0,H),10):0;F[B]===ie&&B++;for(var Ne=[];St(F[B]);)Ne.push(F[B++]);var ze=Ne.length,At=ze?parseInt(m.apply(void 0,Ne),10):0;(F[B]===Ve||F[B]===re)&&B++;var pt=1;(F[B]===se||F[B]===_a)&&(F[B]===_a&&(pt=-1),B++);for(var Ut=[];St(F[B]);)Ut.push(F[B++]);var Zt=Ut.length?parseInt(m.apply(void 0,Ut),10):0;return z*(ge+At*Math.pow(10,-ze))*Math.pow(10,pt*Zt)},Rt={type:2},Dt={type:3},vr={type:4},kr={type:13},Rr={type:8},ur={type:21},Or={type:9},pn={type:10},on={type:11},Ye={type:12},Tt={type:14},Lt={type:23},Wt={type:1},Xt={type:25},fr={type:24},Lr={type:26},Nr={type:27},Zr={type:28},An={type:29},Sn={type:31},Fn={type:32},xi=(function(){function F(){this._value=[]}return F.prototype.write=function(B){this._value=this._value.concat(f(B))},F.prototype.read=function(){for(var B=[],z=this.consumeToken();z!==Fn;)B.push(z),z=this.consumeToken();return B},F.prototype.consumeToken=function(){var B=this.consumeCodePoint();switch(B){case zs:return this.consumeStringToken(zs);case ks:var z=this.peekCodePoint(0),H=this.peekCodePoint(1),ge=this.peekCodePoint(2);if(Tr(z)||Mt(H,ge)){var Ne=_r(z,H,ge)?wa:Ws,ze=this.consumeName();return{type:5,value:ze,flags:Ne}}break;case Ta:if(this.peekCodePoint(0)===ci)return this.consumeCodePoint(),kr;break;case Ca:return this.consumeStringToken(Ca);case gi:return Rt;case Zn:return Dt;case V:if(this.peekCodePoint(0)===ci)return this.consumeCodePoint(),Tt;break;case se:if(lt(B,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(B),this.consumeNumericToken();break;case ce:return vr;case _a:var At=B,pt=this.peekCodePoint(0),Ut=this.peekCodePoint(1);if(lt(At,pt,Ut))return this.reconsumeCodePoint(B),this.consumeNumericToken();if(_r(At,pt,Ut))return this.reconsumeCodePoint(B),this.consumeIdentLikeToken();if(pt===_a&&Ut===zo)return this.consumeCodePoint(),this.consumeCodePoint(),fr;break;case ie:if(lt(B,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(B),this.consumeNumericToken();break;case no:if(this.peekCodePoint(0)===V)for(this.consumeCodePoint();;){var Zt=this.consumeCodePoint();if(Zt===V&&(Zt=this.consumeCodePoint(),Zt===no))return this.consumeToken();if(Zt===M)return this.consumeToken()}break;case $:return Lr;case K:return Nr;case Hi:if(this.peekCodePoint(0)===Qo&&this.peekCodePoint(1)===_a&&this.peekCodePoint(2)===_a)return this.consumeCodePoint(),this.consumeCodePoint(),Xt;break;case Ea:var hr=this.peekCodePoint(0),$r=this.peekCodePoint(1),Kn=this.peekCodePoint(2);if(_r(hr,$r,Kn)){var ze=this.consumeName();return{type:7,value:ze}}break;case Xs:return Zr;case gl:if(Mt(B,this.peekCodePoint(0)))return this.reconsumeCodePoint(B),this.consumeIdentLikeToken();break;case ms:return An;case jo:if(this.peekCodePoint(0)===ci)return this.consumeCodePoint(),Rr;break;case Ka:return on;case Xa:return Ye;case fe:case dt:var xn=this.peekCodePoint(0),Dn=this.peekCodePoint(1);return xn===se&&(Nt(Dn)||Dn===Vs)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(B),this.consumeIdentLikeToken();case vo:if(this.peekCodePoint(0)===ci)return this.consumeCodePoint(),Or;if(this.peekCodePoint(0)===vo)return this.consumeCodePoint(),ur;break;case io:if(this.peekCodePoint(0)===ci)return this.consumeCodePoint(),pn;break;case M:return Fn}return nt(B)?(this.consumeWhiteSpace(),Sn):St(B)?(this.reconsumeCodePoint(B),this.consumeNumericToken()):Vt(B)?(this.reconsumeCodePoint(B),this.consumeIdentLikeToken()):{type:6,value:m(B)}},F.prototype.consumeCodePoint=function(){var B=this._value.shift();return typeof B>"u"?-1:B},F.prototype.reconsumeCodePoint=function(B){this._value.unshift(B)},F.prototype.peekCodePoint=function(B){return B>=this._value.length?-1:this._value[B]},F.prototype.consumeUnicodeRangeToken=function(){for(var B=[],z=this.consumeCodePoint();Nt(z)&&B.length<6;)B.push(z),z=this.consumeCodePoint();for(var H=!1;z===Vs&&B.length<6;)B.push(z),z=this.consumeCodePoint(),H=!0;if(H){var ge=parseInt(m.apply(void 0,B.map(function(pt){return pt===Vs?W:pt})),16),Ne=parseInt(m.apply(void 0,B.map(function(pt){return pt===Vs?Ze:pt})),16);return{type:30,start:ge,end:Ne}}var ze=parseInt(m.apply(void 0,B),16);if(this.peekCodePoint(0)===_a&&Nt(this.peekCodePoint(1))){this.consumeCodePoint(),z=this.consumeCodePoint();for(var At=[];Nt(z)&&At.length<6;)At.push(z),z=this.consumeCodePoint();var Ne=parseInt(m.apply(void 0,At),16);return{type:30,start:ze,end:Ne}}else return{type:30,start:ze,end:ze}},F.prototype.consumeIdentLikeToken=function(){var B=this.consumeName();return B.toLowerCase()==="url"&&this.peekCodePoint(0)===gi?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===gi?(this.consumeCodePoint(),{type:19,value:B}):{type:20,value:B}},F.prototype.consumeUrlToken=function(){var B=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===M)return{type:22,value:""};var z=this.peekCodePoint(0);if(z===Ca||z===zs){var H=this.consumeStringToken(this.consumeCodePoint());return H.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===M||this.peekCodePoint(0)===Zn)?(this.consumeCodePoint(),{type:22,value:H.value}):(this.consumeBadUrlRemnants(),Lt)}for(;;){var ge=this.consumeCodePoint();if(ge===M||ge===Zn)return{type:22,value:m.apply(void 0,B)};if(nt(ge))return this.consumeWhiteSpace(),this.peekCodePoint(0)===M||this.peekCodePoint(0)===Zn?(this.consumeCodePoint(),{type:22,value:m.apply(void 0,B)}):(this.consumeBadUrlRemnants(),Lt);if(ge===zs||ge===Ca||ge===gi||or(ge))return this.consumeBadUrlRemnants(),Lt;if(ge===gl)if(Mt(ge,this.peekCodePoint(0)))B.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),Lt;else B.push(ge)}},F.prototype.consumeWhiteSpace=function(){for(;nt(this.peekCodePoint(0));)this.consumeCodePoint()},F.prototype.consumeBadUrlRemnants=function(){for(;;){var B=this.consumeCodePoint();if(B===Zn||B===M)return;Mt(B,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},F.prototype.consumeStringSlice=function(B){for(var z=5e4,H="";B>0;){var ge=Math.min(z,B);H+=m.apply(void 0,this._value.splice(0,ge)),B-=ge}return this._value.shift(),H},F.prototype.consumeStringToken=function(B){var z="",H=0;do{var ge=this._value[H];if(ge===M||ge===void 0||ge===B)return z+=this.consumeStringSlice(H),{type:0,value:z};if(ge===go)return this._value.splice(0,H),Wt;if(ge===gl){var Ne=this._value[H+1];Ne!==M&&Ne!==void 0&&(Ne===go?(z+=this.consumeStringSlice(H),H=-1,this._value.shift()):Mt(ge,Ne)&&(z+=this.consumeStringSlice(H),z+=m(this.consumeEscapedCodePoint()),H=-1))}H++}while(!0)},F.prototype.consumeNumber=function(){var B=[],z=$s,H=this.peekCodePoint(0);for((H===se||H===_a)&&B.push(this.consumeCodePoint());St(this.peekCodePoint(0));)B.push(this.consumeCodePoint());H=this.peekCodePoint(0);var ge=this.peekCodePoint(1);if(H===ie&&St(ge))for(B.push(this.consumeCodePoint(),this.consumeCodePoint()),z=Ll;St(this.peekCodePoint(0));)B.push(this.consumeCodePoint());H=this.peekCodePoint(0),ge=this.peekCodePoint(1);var Ne=this.peekCodePoint(2);if((H===Ve||H===re)&&((ge===se||ge===_a)&&St(Ne)||St(ge)))for(B.push(this.consumeCodePoint(),this.consumeCodePoint()),z=Ll;St(this.peekCodePoint(0));)B.push(this.consumeCodePoint());return[vt(B),z]},F.prototype.consumeNumericToken=function(){var B=this.consumeNumber(),z=B[0],H=B[1],ge=this.peekCodePoint(0),Ne=this.peekCodePoint(1),ze=this.peekCodePoint(2);if(_r(ge,Ne,ze)){var At=this.consumeName();return{type:15,number:z,flags:H,unit:At}}return ge===Va?(this.consumeCodePoint(),{type:16,number:z,flags:H}):{type:17,number:z,flags:H}},F.prototype.consumeEscapedCodePoint=function(){var B=this.consumeCodePoint();if(Nt(B)){for(var z=m(B);Nt(this.peekCodePoint(0))&&z.length<6;)z+=m(this.consumeCodePoint());nt(this.peekCodePoint(0))&&this.consumeCodePoint();var H=parseInt(z,16);return H===0||ct(H)||H>1114111?Ht:H}return B===M?Ht:B},F.prototype.consumeName=function(){for(var B="";;){var z=this.consumeCodePoint();if(Tr(z))B+=m(z);else if(Mt(z,this.peekCodePoint(0)))B+=m(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(z),B}},F})(),yt=(function(){function F(B){this._tokens=B}return F.create=function(B){var z=new xi;return z.write(B),new F(z.read())},F.parseValue=function(B){return F.create(B).parseComponentValue()},F.parseValues=function(B){return F.create(B).parseComponentValues()},F.prototype.parseComponentValue=function(){for(var B=this.consumeToken();B.type===31;)B=this.consumeToken();if(B.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(B);var z=this.consumeComponentValue();do B=this.consumeToken();while(B.type===31);if(B.type===32)return z;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},F.prototype.parseComponentValues=function(){for(var B=[];;){var z=this.consumeComponentValue();if(z.type===32)return B;B.push(z),B.push()}},F.prototype.consumeComponentValue=function(){var B=this.consumeToken();switch(B.type){case 11:case 28:case 2:return this.consumeSimpleBlock(B.type);case 19:return this.consumeFunction(B)}return B},F.prototype.consumeSimpleBlock=function(B){for(var z={type:B,values:[]},H=this.consumeToken();;){if(H.type===32||va(H,B))return z;this.reconsumeToken(H),z.values.push(this.consumeComponentValue()),H=this.consumeToken()}},F.prototype.consumeFunction=function(B){for(var z={name:B.value,values:[],type:18};;){var H=this.consumeToken();if(H.type===32||H.type===3)return z;this.reconsumeToken(H),z.values.push(this.consumeComponentValue())}},F.prototype.consumeToken=function(){var B=this._tokens.shift();return typeof B>"u"?Fn:B},F.prototype.reconsumeToken=function(B){this._tokens.unshift(B)},F})(),Tn=function(F){return F.type===15},Ri=function(F){return F.type===17},Cn=function(F){return F.type===20},cn=function(F){return F.type===0},Ni=function(F,B){return Cn(F)&&F.value===B},$n=function(F){return F.type!==31},zn=function(F){return F.type!==31&&F.type!==4},Qn=function(F){var B=[],z=[];return F.forEach(function(H){if(H.type===4){if(z.length===0)throw new Error("Error parsing function args, zero tokens for arg");B.push(z),z=[];return}H.type!==31&&z.push(H)}),z.length&&B.push(z),B},va=function(F,B){return B===11&&F.type===12||B===28&&F.type===29?!0:B===2&&F.type===3},Di=function(F){return F.type===17||F.type===15},Wn=function(F){return F.type===16||Di(F)},is=function(F){return F.length>1?[F[0],F[1]]:[F[0]]},Si={type:17,number:0,flags:$s},Hn={type:16,number:50,flags:$s},Li={type:16,number:100,flags:$s},Yn=function(F,B,z){var H=F[0],ge=F[1];return[Gi(H,B),Gi(typeof ge<"u"?ge:H,z)]},Gi=function(F,B){if(F.type===16)return F.number/100*B;if(Tn(F))switch(F.unit){case"rem":case"em":return 16*F.number;default:return F.number}return F.number},ss="deg",Zi="grad",ys="rad",Na="turn",bi={name:"angle",parse:function(F,B){if(B.type===15)switch(B.unit){case ss:return Math.PI*B.number/180;case Zi:return Math.PI/200*B.number;case ys:return B.number;case Na:return Math.PI*2*B.number}throw new Error("Unsupported angle type")}},Ys=function(F){return F.type===15&&(F.unit===ss||F.unit===Zi||F.unit===ys||F.unit===Na)},Qi=function(F){var B=F.filter(Cn).map(function(z){return z.value}).join(" ");switch(B){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Si,Si];case"to top":case"bottom":return ai(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Si,Li];case"to right":case"left":return ai(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Li,Li];case"to bottom":case"top":return ai(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Li,Si];case"to left":case"right":return ai(270)}return 0},ai=function(F){return Math.PI*F/180},ha={name:"color",parse:function(F,B){if(B.type===18){var z=wi[B.name];if(typeof z>"u")throw new Error('Attempting to parse an unsupported color function "'+B.name+'"');return z(F,B.values)}if(B.type===5){if(B.value.length===3){var H=B.value.substring(0,1),ge=B.value.substring(1,2),Ne=B.value.substring(2,3);return cs(parseInt(H+H,16),parseInt(ge+ge,16),parseInt(Ne+Ne,16),1)}if(B.value.length===4){var H=B.value.substring(0,1),ge=B.value.substring(1,2),Ne=B.value.substring(2,3),ze=B.value.substring(3,4);return cs(parseInt(H+H,16),parseInt(ge+ge,16),parseInt(Ne+Ne,16),parseInt(ze+ze,16)/255)}if(B.value.length===6){var H=B.value.substring(0,2),ge=B.value.substring(2,4),Ne=B.value.substring(4,6);return cs(parseInt(H,16),parseInt(ge,16),parseInt(Ne,16),1)}if(B.value.length===8){var H=B.value.substring(0,2),ge=B.value.substring(2,4),Ne=B.value.substring(4,6),ze=B.value.substring(6,8);return cs(parseInt(H,16),parseInt(ge,16),parseInt(Ne,16),parseInt(ze,16)/255)}}if(B.type===20){var At=Za[B.value.toUpperCase()];if(typeof At<"u")return At}return Za.TRANSPARENT}},Ii=function(F){return(255&F)===0},_n=function(F){var B=255&F,z=255&F>>8,H=255&F>>16,ge=255&F>>24;return B<255?"rgba("+ge+","+H+","+z+","+B/255+")":"rgb("+ge+","+H+","+z+")"},cs=function(F,B,z,H){return(F<<24|B<<16|z<<8|Math.round(H*255)<<0)>>>0},_u=function(F,B){if(F.type===17)return F.number;if(F.type===16){var z=B===3?1:255;return B===3?F.number/100*z:Math.round(F.number/100*z)}return 0},so=function(F,B){var z=B.filter(zn);if(z.length===3){var H=z.map(_u),ge=H[0],Ne=H[1],ze=H[2];return cs(ge,Ne,ze,1)}if(z.length===4){var At=z.map(_u),ge=At[0],Ne=At[1],ze=At[2],pt=At[3];return cs(ge,Ne,ze,pt)}return 0};function Ko(F,B,z){return z<0&&(z+=1),z>=1&&(z-=1),z<1/6?(B-F)*z*6+F:z<1/2?B:z<2/3?(B-F)*6*(2/3-z)+F:F}var ec=function(F,B){var z=B.filter(zn),H=z[0],ge=z[1],Ne=z[2],ze=z[3],At=(H.type===17?ai(H.number):bi.parse(F,H))/(Math.PI*2),pt=Wn(ge)?ge.number/100:0,Ut=Wn(Ne)?Ne.number/100:0,Zt=typeof ze<"u"&&Wn(ze)?Gi(ze,1):1;if(pt===0)return cs(Ut*255,Ut*255,Ut*255,1);var hr=Ut<=.5?Ut*(pt+1):Ut+pt-Ut*pt,$r=Ut*2-hr,Kn=Ko($r,hr,At+1/3),xn=Ko($r,hr,At),Dn=Ko($r,hr,At-1/3);return cs(Kn*255,xn*255,Dn*255,Zt)},wi={hsl:ec,hsla:ec,rgb:so,rgba:so},Da=function(F,B){return ha.parse(F,yt.create(B).parseComponentValue())},Za={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},$l={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(F,B){return B.map(function(z){if(Cn(z))switch(z.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Hl={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},fa=function(F,B){var z=ha.parse(F,B[0]),H=B[1];return H&&Wn(H)?{color:z,stop:H}:{color:z,stop:null}},yo=function(F,B){var z=F[0],H=F[F.length-1];z.stop===null&&(z.stop=Si),H.stop===null&&(H.stop=Li);for(var ge=[],Ne=0,ze=0;ze<F.length;ze++){var At=F[ze].stop;if(At!==null){var pt=Gi(At,B);pt>Ne?ge.push(pt):ge.push(Ne),Ne=pt}else ge.push(null)}for(var Ut=null,ze=0;ze<ge.length;ze++){var Zt=ge[ze];if(Zt===null)Ut===null&&(Ut=ze);else if(Ut!==null){for(var hr=ze-Ut,$r=ge[Ut-1],Kn=(Zt-$r)/(hr+1),xn=1;xn<=hr;xn++)ge[Ut+xn-1]=Kn*xn;Ut=null}}return F.map(function(Dn,Bi){var di=Dn.color;return{color:di,stop:Math.max(Math.min(1,ge[Bi]/B),0)}})},Ja=function(F,B,z){var H=B/2,ge=z/2,Ne=Gi(F[0],B)-H,ze=ge-Gi(F[1],z);return(Math.atan2(ze,Ne)+Math.PI*2)%(Math.PI*2)},Hc=function(F,B,z){var H=typeof F=="number"?F:Ja(F,B,z),ge=Math.abs(B*Math.sin(H))+Math.abs(z*Math.cos(H)),Ne=B/2,ze=z/2,At=ge/2,pt=Math.sin(H-Math.PI/2)*At,Ut=Math.cos(H-Math.PI/2)*At;return[ge,Ne-Ut,Ne+Ut,ze-pt,ze+pt]},To=function(F,B){return Math.sqrt(F*F+B*B)},Ac=function(F,B,z,H,ge){var Ne=[[0,0],[0,B],[F,0],[F,B]];return Ne.reduce(function(ze,At){var pt=At[0],Ut=At[1],Zt=To(z-pt,H-Ut);return(ge?Zt<ze.optimumDistance:Zt>ze.optimumDistance)?{optimumCorner:At,optimumDistance:Zt}:ze},{optimumDistance:ge?1/0:-1/0,optimumCorner:null}).optimumCorner},Ga=function(F,B,z,H,ge){var Ne=0,ze=0;switch(F.size){case 0:F.shape===0?Ne=ze=Math.min(Math.abs(B),Math.abs(B-H),Math.abs(z),Math.abs(z-ge)):F.shape===1&&(Ne=Math.min(Math.abs(B),Math.abs(B-H)),ze=Math.min(Math.abs(z),Math.abs(z-ge)));break;case 2:if(F.shape===0)Ne=ze=Math.min(To(B,z),To(B,z-ge),To(B-H,z),To(B-H,z-ge));else if(F.shape===1){var At=Math.min(Math.abs(z),Math.abs(z-ge))/Math.min(Math.abs(B),Math.abs(B-H)),pt=Ac(H,ge,B,z,!0),Ut=pt[0],Zt=pt[1];Ne=To(Ut-B,(Zt-z)/At),ze=At*Ne}break;case 1:F.shape===0?Ne=ze=Math.max(Math.abs(B),Math.abs(B-H),Math.abs(z),Math.abs(z-ge)):F.shape===1&&(Ne=Math.max(Math.abs(B),Math.abs(B-H)),ze=Math.max(Math.abs(z),Math.abs(z-ge)));break;case 3:if(F.shape===0)Ne=ze=Math.max(To(B,z),To(B,z-ge),To(B-H,z),To(B-H,z-ge));else if(F.shape===1){var At=Math.max(Math.abs(z),Math.abs(z-ge))/Math.max(Math.abs(B),Math.abs(B-H)),hr=Ac(H,ge,B,z,!1),Ut=hr[0],Zt=hr[1];Ne=To(Ut-B,(Zt-z)/At),ze=At*Ne}break}return Array.isArray(F.size)&&(Ne=Gi(F.size[0],H),ze=F.size.length===2?Gi(F.size[1],ge):Ne),[Ne,ze]},Ql=function(F,B){var z=ai(180),H=[];return Qn(B).forEach(function(ge,Ne){if(Ne===0){var ze=ge[0];if(ze.type===20&&ze.value==="to"){z=Qi(ge);return}else if(Ys(ze)){z=bi.parse(F,ze);return}}var At=fa(F,ge);H.push(At)}),{angle:z,stops:H,type:1}},zl=function(F,B){var z=ai(180),H=[];return Qn(B).forEach(function(ge,Ne){if(Ne===0){var ze=ge[0];if(ze.type===20&&["top","left","right","bottom"].indexOf(ze.value)!==-1){z=Qi(ge);return}else if(Ys(ze)){z=(bi.parse(F,ze)+ai(270))%ai(360);return}}var At=fa(F,ge);H.push(At)}),{angle:z,stops:H,type:1}},Il=function(F,B){var z=ai(180),H=[],ge=1,Ne=0,ze=3,At=[];return Qn(B).forEach(function(pt,Ut){var Zt=pt[0];if(Ut===0){if(Cn(Zt)&&Zt.value==="linear"){ge=1;return}else if(Cn(Zt)&&Zt.value==="radial"){ge=2;return}}if(Zt.type===18){if(Zt.name==="from"){var hr=ha.parse(F,Zt.values[0]);H.push({stop:Si,color:hr})}else if(Zt.name==="to"){var hr=ha.parse(F,Zt.values[0]);H.push({stop:Li,color:hr})}else if(Zt.name==="color-stop"){var $r=Zt.values.filter(zn);if($r.length===2){var hr=ha.parse(F,$r[1]),Kn=$r[0];Ri(Kn)&&H.push({stop:{type:16,number:Kn.number*100,flags:Kn.flags},color:hr})}}}}),ge===1?{angle:(z+ai(180))%ai(360),stops:H,type:ge}:{size:ze,shape:Ne,stops:H,position:At,type:ge}},bd="closest-side",tc="farthest-side",Vl="closest-corner",pc="farthest-corner",wd="circle",Kl="ellipse",Gl="cover",Eu="contain",Wl=function(F,B){var z=0,H=3,ge=[],Ne=[];return Qn(B).forEach(function(ze,At){var pt=!0;if(At===0){var Ut=!1;pt=ze.reduce(function(hr,$r){if(Ut)if(Cn($r))switch($r.value){case"center":return Ne.push(Hn),hr;case"top":case"left":return Ne.push(Si),hr;case"right":case"bottom":return Ne.push(Li),hr}else(Wn($r)||Di($r))&&Ne.push($r);else if(Cn($r))switch($r.value){case wd:return z=0,!1;case Kl:return z=1,!1;case"at":return Ut=!0,!1;case bd:return H=0,!1;case Gl:case tc:return H=1,!1;case Eu:case Vl:return H=2,!1;case pc:return H=3,!1}else if(Di($r)||Wn($r))return Array.isArray(H)||(H=[]),H.push($r),!1;return hr},pt)}if(pt){var Zt=fa(F,ze);ge.push(Zt)}}),{size:H,shape:z,stops:ge,position:Ne,type:2}},Io=function(F,B){var z=0,H=3,ge=[],Ne=[];return Qn(B).forEach(function(ze,At){var pt=!0;if(At===0?pt=ze.reduce(function(Zt,hr){if(Cn(hr))switch(hr.value){case"center":return Ne.push(Hn),!1;case"top":case"left":return Ne.push(Si),!1;case"right":case"bottom":return Ne.push(Li),!1}else if(Wn(hr)||Di(hr))return Ne.push(hr),!1;return Zt},pt):At===1&&(pt=ze.reduce(function(Zt,hr){if(Cn(hr))switch(hr.value){case wd:return z=0,!1;case Kl:return z=1,!1;case Eu:case bd:return H=0,!1;case tc:return H=1,!1;case Vl:return H=2,!1;case Gl:case pc:return H=3,!1}else if(Di(hr)||Wn(hr))return Array.isArray(H)||(H=[]),H.push(hr),!1;return Zt},pt)),pt){var Ut=fa(F,ze);ge.push(Ut)}}),{size:H,shape:z,stops:ge,position:Ne,type:2}},vl=function(F){return F.type===1},iu=function(F){return F.type===2},gc={name:"image",parse:function(F,B){if(B.type===22){var z={url:B.value,type:0};return F.cache.addImage(B.value),z}if(B.type===18){var H=rc[B.name];if(typeof H>"u")throw new Error('Attempting to parse an unsupported image function "'+B.name+'"');return H(F,B.values)}throw new Error("Unsupported image type "+B.type)}};function zd(F){return!(F.type===20&&F.value==="none")&&(F.type!==18||!!rc[F.name])}var rc={"linear-gradient":Ql,"-moz-linear-gradient":zl,"-ms-linear-gradient":zl,"-o-linear-gradient":zl,"-webkit-linear-gradient":zl,"radial-gradient":Wl,"-moz-radial-gradient":Io,"-ms-radial-gradient":Io,"-o-radial-gradient":Io,"-webkit-radial-gradient":Io,"-webkit-gradient":Il},Yu={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(F,B){if(B.length===0)return[];var z=B[0];return z.type===20&&z.value==="none"?[]:B.filter(function(H){return zn(H)&&zd(H)}).map(function(H){return gc.parse(F,H)})}},_d={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(F,B){return B.map(function(z){if(Cn(z))switch(z.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},yl={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(F,B){return Qn(B).map(function(z){return z.filter(Wn)}).map(is)}},oh={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(F,B){return Qn(B).map(function(z){return z.filter(Cn).map(function(H){return H.value}).join(" ")}).map(Bl)}},Bl=function(F){switch(F){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;default:return 0}},Fi;(function(F){F.AUTO="auto",F.CONTAIN="contain",F.COVER="cover"})(Fi||(Fi={}));var vc={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(F,B){return Qn(B).map(function(z){return z.filter(Qc)})}},Qc=function(F){return Cn(F)||Wn(F)},zc=function(F){return{name:"border-"+F+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},qu=zc("top"),yc=zc("right"),Bo=zc("bottom"),su=zc("left"),v=function(F){return{name:"border-radius-"+F,initialValue:"0 0",prefix:!1,type:1,parse:function(B,z){return is(z.filter(Wn))}}},S=v("top-left"),Q=v("top-right"),le=v("bottom-right"),_e=v("bottom-left"),Ke=function(F){return{name:"border-"+F+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(B,z){switch(z){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},kt=Ke("top"),er=Ke("right"),Er=Ke("bottom"),Wr=Ke("left"),bn=function(F){return{name:"border-"+F+"-width",initialValue:"0",type:0,prefix:!1,parse:function(B,z){return Tn(z)?z.number:0}}},ui=bn("top"),As=bn("right"),Ma=bn("bottom"),Co=bn("left"),il={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Zs={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(F,B){return B==="rtl"?1:0}},ca={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(F,B){return B.filter(Cn).reduce(function(z,H){return z|kn(H.value)},0)}},kn=function(F){switch(F){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},Xu={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(F,B){switch(B){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},xc={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(F,B){return B.type===20&&B.value==="normal"?0:B.type===17||B.type===15?B.number:0}},Ed;(function(F){F.NORMAL="normal",F.STRICT="strict"})(Ed||(Ed={}));var Yl={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(F,B){return B==="strict"?Ed.STRICT:Ed.NORMAL}},Su={name:"line-height",initialValue:"normal",prefix:!1,type:4},ao=function(F,B){return Cn(F)&&F.value==="normal"?1.2*B:F.type===17?B*F.number:Wn(F)?Gi(F,B):B},ju={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(F,B){return B.type===20&&B.value==="none"?null:gc.parse(F,B)}},Go={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(F,B){return B==="inside"?0:1}},Sd={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(F,B){switch(B){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;default:return-1}}},bc=function(F){return{name:"margin-"+F,initialValue:"0",prefix:!1,type:4}},Vd=bc("top"),ql=bc("right"),Tu=bc("bottom"),wc=bc("left"),Vc={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(F,B){return B.filter(Cn).map(function(z){switch(z.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;default:return 0}})}},Sh={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(F,B){return B==="break-word"?"break-word":"normal"}},au=function(F){return{name:"padding-"+F,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},jd=au("top"),lh=au("right"),Kc=au("bottom"),xo=au("left"),jh={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(F,B){switch(B){case"right":return 2;case"center":case"justify":return 1;default:return 0}}},hm={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(F,B){switch(B){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},Wm={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(F,B){return B.length===1&&Ni(B[0],"none")?[]:Qn(B).map(function(z){for(var H={color:Za.TRANSPARENT,offsetX:Si,offsetY:Si,blur:Si},ge=0,Ne=0;Ne<z.length;Ne++){var ze=z[Ne];Di(ze)?(ge===0?H.offsetX=ze:ge===1?H.offsetY=ze:H.blur=ze,ge++):H.color=ha.parse(F,ze)}return H})}},ch={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(F,B){switch(B){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},uh={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(F,B){if(B.type===20&&B.value==="none")return null;if(B.type===18){var z=Th[B.name];if(typeof z>"u")throw new Error('Attempting to parse an unsupported transform function "'+B.name+'"');return z(B.values)}return null}},Po=function(F){var B=F.filter(function(z){return z.type===17}).map(function(z){return z.number});return B.length===6?B:null},dh=function(F){var B=F.filter(function(pt){return pt.type===17}).map(function(pt){return pt.number}),z=B[0],H=B[1];B[2],B[3];var ge=B[4],Ne=B[5];B[6],B[7],B[8],B[9],B[10],B[11];var ze=B[12],At=B[13];return B[14],B[15],B.length===16?[z,H,ge,Ne,ze,At]:null},Th={matrix:Po,matrix3d:dh},he={type:16,number:50,flags:$s},Me=[he,he],wt={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(F,B){var z=B.filter(Wn);return z.length!==2?Me:[z[0],z[1]]}},Bt={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(F,B){switch(B){case"hidden":return 1;case"collapse":return 2;default:return 0}}},rr;(function(F){F.NORMAL="normal",F.BREAK_ALL="break-all",F.KEEP_ALL="keep-all"})(rr||(rr={}));for(var zr={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(F,B){switch(B){case"break-all":return rr.BREAK_ALL;case"keep-all":return rr.KEEP_ALL;default:return rr.NORMAL}}},nn={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(F,B){if(B.type===20)return{auto:!0,order:0};if(Ri(B))return{auto:!1,order:B.number};throw new Error("Invalid z-index number parsed")}},ti={name:"time",parse:function(F,B){if(B.type===15)switch(B.unit.toLowerCase()){case"s":return 1e3*B.number;case"ms":return B.number}throw new Error("Unsupported time type")}},ri={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(F,B){return Ri(B)?B.number:1}},Yi={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},os={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(F,B){return B.filter(Cn).map(function(z){switch(z.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(z){return z!==0})}},na={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(F,B){var z=[],H=[];return B.forEach(function(ge){switch(ge.type){case 20:case 0:z.push(ge.value);break;case 17:z.push(ge.number.toString());break;case 4:H.push(z.join(" ")),z.length=0;break}}),z.length&&H.push(z.join(" ")),H.map(function(ge){return ge.indexOf(" ")===-1?ge:"'"+ge+"'"})}},Fa={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},Oo={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(F,B){return Ri(B)?B.number:Cn(B)&&B.value==="bold"?700:400}},ka={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(F,B){return B.filter(Cn).map(function(z){return z.value})}},Wo={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(F,B){switch(B){case"oblique":return"oblique";case"italic":return"italic";default:return"normal"}}},O=function(F,B){return(F&B)!==0},Oe={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(F,B){if(B.length===0)return[];var z=B[0];return z.type===20&&z.value==="none"?[]:B}},te={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(F,B){if(B.length===0)return null;var z=B[0];if(z.type===20&&z.value==="none")return null;for(var H=[],ge=B.filter($n),Ne=0;Ne<ge.length;Ne++){var ze=ge[Ne],At=ge[Ne+1];if(ze.type===20){var pt=At&&Ri(At)?At.number:1;H.push({counter:ze.value,increment:pt})}}return H}},qe={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(F,B){if(B.length===0)return[];for(var z=[],H=B.filter($n),ge=0;ge<H.length;ge++){var Ne=H[ge],ze=H[ge+1];if(Cn(Ne)&&Ne.value!=="none"){var At=ze&&Ri(ze)?ze.number:0;z.push({counter:Ne.value,reset:At})}}return z}},Et={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(F,B){return B.filter(Tn).map(function(z){return ti.parse(F,z)})}},_t={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(F,B){if(B.length===0)return null;var z=B[0];if(z.type===20&&z.value==="none")return null;var H=[],ge=B.filter(cn);if(ge.length%2!==0)return null;for(var Ne=0;Ne<ge.length;Ne+=2){var ze=ge[Ne].value,At=ge[Ne+1].value;H.push({open:ze,close:At})}return H}},yr=function(F,B,z){if(!F)return"";var H=F[Math.min(B,F.length-1)];return H?z?H.open:H.close:""},Kt={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(F,B){return B.length===1&&Ni(B[0],"none")?[]:Qn(B).map(function(z){for(var H={color:255,offsetX:Si,offsetY:Si,blur:Si,spread:Si,inset:!1},ge=0,Ne=0;Ne<z.length;Ne++){var ze=z[Ne];Ni(ze,"inset")?H.inset=!0:Di(ze)?(ge===0?H.offsetX=ze:ge===1?H.offsetY=ze:ge===2?H.blur=ze:H.spread=ze,ge++):H.color=ha.parse(F,ze)}return H})}},Un={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(F,B){var z=[0,1,2],H=[];return B.filter(Cn).forEach(function(ge){switch(ge.value){case"stroke":H.push(1);break;case"fill":H.push(0);break;case"markers":H.push(2);break}}),z.forEach(function(ge){H.indexOf(ge)===-1&&H.push(ge)}),H}},Ft={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},xr={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(F,B){return Tn(B)?B.number:0}},qi=(function(){function F(B,z){var H,ge;this.animationDuration=Mr(B,Et,z.animationDuration),this.backgroundClip=Mr(B,$l,z.backgroundClip),this.backgroundColor=Mr(B,Hl,z.backgroundColor),this.backgroundImage=Mr(B,Yu,z.backgroundImage),this.backgroundOrigin=Mr(B,_d,z.backgroundOrigin),this.backgroundPosition=Mr(B,yl,z.backgroundPosition),this.backgroundRepeat=Mr(B,oh,z.backgroundRepeat),this.backgroundSize=Mr(B,vc,z.backgroundSize),this.borderTopColor=Mr(B,qu,z.borderTopColor),this.borderRightColor=Mr(B,yc,z.borderRightColor),this.borderBottomColor=Mr(B,Bo,z.borderBottomColor),this.borderLeftColor=Mr(B,su,z.borderLeftColor),this.borderTopLeftRadius=Mr(B,S,z.borderTopLeftRadius),this.borderTopRightRadius=Mr(B,Q,z.borderTopRightRadius),this.borderBottomRightRadius=Mr(B,le,z.borderBottomRightRadius),this.borderBottomLeftRadius=Mr(B,_e,z.borderBottomLeftRadius),this.borderTopStyle=Mr(B,kt,z.borderTopStyle),this.borderRightStyle=Mr(B,er,z.borderRightStyle),this.borderBottomStyle=Mr(B,Er,z.borderBottomStyle),this.borderLeftStyle=Mr(B,Wr,z.borderLeftStyle),this.borderTopWidth=Mr(B,ui,z.borderTopWidth),this.borderRightWidth=Mr(B,As,z.borderRightWidth),this.borderBottomWidth=Mr(B,Ma,z.borderBottomWidth),this.borderLeftWidth=Mr(B,Co,z.borderLeftWidth),this.boxShadow=Mr(B,Kt,z.boxShadow),this.color=Mr(B,il,z.color),this.direction=Mr(B,Zs,z.direction),this.display=Mr(B,ca,z.display),this.float=Mr(B,Xu,z.cssFloat),this.fontFamily=Mr(B,na,z.fontFamily),this.fontSize=Mr(B,Fa,z.fontSize),this.fontStyle=Mr(B,Wo,z.fontStyle),this.fontVariant=Mr(B,ka,z.fontVariant),this.fontWeight=Mr(B,Oo,z.fontWeight),this.letterSpacing=Mr(B,xc,z.letterSpacing),this.lineBreak=Mr(B,Yl,z.lineBreak),this.lineHeight=Mr(B,Su,z.lineHeight),this.listStyleImage=Mr(B,ju,z.listStyleImage),this.listStylePosition=Mr(B,Go,z.listStylePosition),this.listStyleType=Mr(B,Sd,z.listStyleType),this.marginTop=Mr(B,Vd,z.marginTop),this.marginRight=Mr(B,ql,z.marginRight),this.marginBottom=Mr(B,Tu,z.marginBottom),this.marginLeft=Mr(B,wc,z.marginLeft),this.opacity=Mr(B,ri,z.opacity);var Ne=Mr(B,Vc,z.overflow);this.overflowX=Ne[0],this.overflowY=Ne[Ne.length>1?1:0],this.overflowWrap=Mr(B,Sh,z.overflowWrap),this.paddingTop=Mr(B,jd,z.paddingTop),this.paddingRight=Mr(B,lh,z.paddingRight),this.paddingBottom=Mr(B,Kc,z.paddingBottom),this.paddingLeft=Mr(B,xo,z.paddingLeft),this.paintOrder=Mr(B,Un,z.paintOrder),this.position=Mr(B,hm,z.position),this.textAlign=Mr(B,jh,z.textAlign),this.textDecorationColor=Mr(B,Yi,(H=z.textDecorationColor)!==null&&H!==void 0?H:z.color),this.textDecorationLine=Mr(B,os,(ge=z.textDecorationLine)!==null&&ge!==void 0?ge:z.textDecoration),this.textShadow=Mr(B,Wm,z.textShadow),this.textTransform=Mr(B,ch,z.textTransform),this.transform=Mr(B,uh,z.transform),this.transformOrigin=Mr(B,wt,z.transformOrigin),this.visibility=Mr(B,Bt,z.visibility),this.webkitTextStrokeColor=Mr(B,Ft,z.webkitTextStrokeColor),this.webkitTextStrokeWidth=Mr(B,xr,z.webkitTextStrokeWidth),this.wordBreak=Mr(B,zr,z.wordBreak),this.zIndex=Mr(B,nn,z.zIndex)}return F.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},F.prototype.isTransparent=function(){return Ii(this.backgroundColor)},F.prototype.isTransformed=function(){return this.transform!==null},F.prototype.isPositioned=function(){return this.position!==0},F.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},F.prototype.isFloating=function(){return this.float!==0},F.prototype.isInlineLevel=function(){return O(this.display,4)||O(this.display,33554432)||O(this.display,268435456)||O(this.display,536870912)||O(this.display,67108864)||O(this.display,134217728)},F})(),Ln=(function(){function F(B,z){this.content=Mr(B,Oe,z.content),this.quotes=Mr(B,_t,z.quotes)}return F})(),an=(function(){function F(B,z){this.counterIncrement=Mr(B,te,z.counterIncrement),this.counterReset=Mr(B,qe,z.counterReset)}return F})(),Mr=function(F,B,z){var H=new xi,ge=z!==null&&typeof z<"u"?z.toString():B.initialValue;H.write(ge);var Ne=new yt(H.read());switch(B.type){case 2:var ze=Ne.parseComponentValue();return B.parse(F,Cn(ze)?ze.value:B.initialValue);case 0:return B.parse(F,Ne.parseComponentValue());case 1:return B.parse(F,Ne.parseComponentValues());case 4:return Ne.parseComponentValue();case 3:switch(B.format){case"angle":return bi.parse(F,Ne.parseComponentValue());case"color":return ha.parse(F,Ne.parseComponentValue());case"image":return gc.parse(F,Ne.parseComponentValue());case"length":var At=Ne.parseComponentValue();return Di(At)?At:Si;case"length-percentage":var pt=Ne.parseComponentValue();return Wn(pt)?pt:Si;case"time":return ti.parse(F,Ne.parseComponentValue())}break}},Ua="data-html2canvas-debug",Wi=function(F){var B=F.getAttribute(Ua);switch(B){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},ki=function(F,B){var z=Wi(F);return z===1||B===z},zi=(function(){function F(B,z){if(this.context=B,this.textNodes=[],this.elements=[],this.flags=0,ki(z,3))debugger;this.styles=new qi(B,window.getComputedStyle(z,null)),Pf(z)&&(this.styles.animationDuration.some(function(H){return H>0})&&(z.style.animationDuration="0s"),this.styles.transform!==null&&(z.style.transform="none")),this.bounds=l(this.context,z),ki(z,4)&&(this.flags|=16)}return F})(),xs="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",En="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bs=typeof Uint8Array>"u"?[]:new Uint8Array(256),$a=0;$a<En.length;$a++)bs[En.charCodeAt($a)]=$a;for(var ji=function(F){var B=F.length*.75,z=F.length,H,ge=0,Ne,ze,At,pt;F[F.length-1]==="="&&(B--,F[F.length-2]==="="&&B--);var Ut=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(B):new Array(B),Zt=Array.isArray(Ut)?Ut:new Uint8Array(Ut);for(H=0;H<z;H+=4)Ne=bs[F.charCodeAt(H)],ze=bs[F.charCodeAt(H+1)],At=bs[F.charCodeAt(H+2)],pt=bs[F.charCodeAt(H+3)],Zt[ge++]=Ne<<2|ze>>4,Zt[ge++]=(ze&15)<<4|At>>2,Zt[ge++]=(At&3)<<6|pt&63;return Ut},ia=function(F){for(var B=F.length,z=[],H=0;H<B;H+=2)z.push(F[H+1]<<8|F[H]);return z},Ls=function(F){for(var B=F.length,z=[],H=0;H<B;H+=4)z.push(F[H+3]<<24|F[H+2]<<16|F[H+1]<<8|F[H]);return z},ni=5,$i=11,nc=2,Zu=$i-ni,ou=65536>>ni,xl=1<<ni,ic=xl-1,oo=1024>>ni,Ym=ou+oo,hh=Ym,Gc=32,Wc=hh+Gc,Ro=65536>>$i,If=1<<Zu,Td=If-1,Ji=function(F,B,z){return F.slice?F.slice(B,z):new Uint16Array(Array.prototype.slice.call(F,B,z))},ma=function(F,B,z){return F.slice?F.slice(B,z):new Uint32Array(Array.prototype.slice.call(F,B,z))},bo=function(F,B){var z=ji(F),H=Array.isArray(z)?Ls(z):new Uint32Array(z),ge=Array.isArray(z)?ia(z):new Uint16Array(z),Ne=24,ze=Ji(ge,Ne/2,H[4]/2),At=H[5]===2?Ji(ge,(Ne+H[4])/2):ma(H,Math.ceil((Ne+H[4])/4));return new Ch(H[0],H[1],H[2],H[3],ze,At)},Ch=(function(){function F(B,z,H,ge,Ne,ze){this.initialValue=B,this.errorValue=z,this.highStart=H,this.highValueIndex=ge,this.index=Ne,this.data=ze}return F.prototype.get=function(B){var z;if(B>=0){if(B<55296||B>56319&&B<=65535)return z=this.index[B>>ni],z=(z<<nc)+(B&ic),this.data[z];if(B<=65535)return z=this.index[ou+(B-55296>>ni)],z=(z<<nc)+(B&ic),this.data[z];if(B<this.highStart)return z=Wc-Ro+(B>>$i),z=this.index[z],z+=B>>ni&Td,z=this.index[z],z=(z<<nc)+(B&ic),this.data[z];if(B<=1114111)return this.data[this.highValueIndex]}return this.errorValue},F})(),Ju="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Cd=typeof Uint8Array>"u"?[]:new Uint8Array(256),_c=0;_c<Ju.length;_c++)Cd[Ju.charCodeAt(_c)]=_c;var ed=1,sa=2,eo=3,Is=4,bl=5,fh=7,fm=8,qh=9,qm=10,ip=11,sp=12,ap=13,Yc=14,Yo=15,op=function(F){for(var B=[],z=0,H=F.length;z<H;){var ge=F.charCodeAt(z++);if(ge>=55296&&ge<=56319&&z<H){var Ne=F.charCodeAt(z++);(Ne&64512)===56320?B.push(((ge&1023)<<10)+(Ne&1023)+65536):(B.push(ge),z--)}else B.push(ge)}return B},Xh=function(){for(var F=[],B=0;B<arguments.length;B++)F[B]=arguments[B];if(String.fromCodePoint)return String.fromCodePoint.apply(String,F);var z=F.length;if(!z)return"";for(var H=[],ge=-1,Ne="";++ge<z;){var ze=F[ge];ze<=65535?H.push(ze):(ze-=65536,H.push((ze>>10)+55296,ze%1024+56320)),(ge+1===z||H.length>16384)&&(Ne+=String.fromCharCode.apply(String,H),H.length=0)}return Ne},lp=bo(xs),Cu="",Kd="",cp=function(F){return lp.get(F)},Sg=function(F,B,z){var H=z-2,ge=B[H],Ne=B[z-1],ze=B[z];if(Ne===sa&&ze===eo)return Cu;if(Ne===sa||Ne===eo||Ne===Is||ze===sa||ze===eo||ze===Is)return Kd;if(Ne===fm&&[fm,qh,ip,sp].indexOf(ze)!==-1||(Ne===ip||Ne===qh)&&(ze===qh||ze===qm)||(Ne===sp||Ne===qm)&&ze===qm||ze===ap||ze===bl||ze===fh||Ne===ed)return Cu;if(Ne===ap&&ze===Yc){for(;ge===bl;)ge=B[--H];if(ge===Yc)return Cu}if(Ne===Yo&&ze===Yo){for(var At=0;ge===Yo;)At++,ge=B[--H];if(At%2===0)return Cu}return Kd},jg=function(F){var B=op(F),z=B.length,H=0,ge=0,Ne=B.map(cp);return{next:function(){if(H>=z)return{done:!0,value:null};for(var ze=Cu;H<z&&(ze=Sg(B,Ne,++H))===Cu;);if(ze!==Cu||H===z){var At=Xh.apply(null,B.slice(ge,H));return ge=H,{value:At,done:!1}}return{done:!0,value:null}}}},rv=function(F){for(var B=jg(F),z=[],H;!(H=B.next()).done;)H.value&&z.push(H.value.slice());return z},nv=function(F){var B=123;if(F.createRange){var z=F.createRange();if(z.getBoundingClientRect){var H=F.createElement("boundtest");H.style.height=B+"px",H.style.display="block",F.body.appendChild(H),z.selectNode(H);var ge=z.getBoundingClientRect(),Ne=Math.round(ge.height);if(F.body.removeChild(H),Ne===B)return!0}}return!1},Tg=function(F){var B=F.createElement("boundtest");B.style.width="50px",B.style.display="block",B.style.fontSize="12px",B.style.letterSpacing="0px",B.style.wordSpacing="0px",F.body.appendChild(B);var z=F.createRange();B.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var H=B.firstChild,ge=f(H.data).map(function(pt){return m(pt)}),Ne=0,ze={},At=ge.every(function(pt,Ut){z.setStart(H,Ne),z.setEnd(H,Ne+pt.length);var Zt=z.getBoundingClientRect();Ne+=pt.length;var hr=Zt.x>ze.x||Zt.y>ze.y;return ze=Zt,Ut===0?!0:hr});return F.body.removeChild(B),At},up=function(){return typeof new Image().crossOrigin<"u"},td=function(){return typeof new XMLHttpRequest().responseType=="string"},Nd=function(F){var B=new Image,z=F.createElement("canvas"),H=z.getContext("2d");if(!H)return!1;B.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{H.drawImage(B,0,0),z.toDataURL()}catch{return!1}return!0},mm=function(F){return F[0]===0&&F[1]===255&&F[2]===0&&F[3]===255},dp=function(F){var B=F.createElement("canvas"),z=100;B.width=z,B.height=z;var H=B.getContext("2d");if(!H)return Promise.reject(!1);H.fillStyle="rgb(0, 255, 0)",H.fillRect(0,0,z,z);var ge=new Image,Ne=B.toDataURL();ge.src=Ne;var ze=Cg(z,z,0,0,ge);return H.fillStyle="red",H.fillRect(0,0,z,z),Xm(ze).then(function(At){H.drawImage(At,0,0);var pt=H.getImageData(0,0,z,z).data;H.fillStyle="red",H.fillRect(0,0,z,z);var Ut=F.createElement("div");return Ut.style.backgroundImage="url("+Ne+")",Ut.style.height=z+"px",mm(pt)?Xm(Cg(z,z,0,0,Ut)):Promise.reject(!1)}).then(function(At){return H.drawImage(At,0,0),mm(H.getImageData(0,0,z,z).data)}).catch(function(){return!1})},Cg=function(F,B,z,H,ge){var Ne="http://www.w3.org/2000/svg",ze=document.createElementNS(Ne,"svg"),At=document.createElementNS(Ne,"foreignObject");return ze.setAttributeNS(null,"width",F.toString()),ze.setAttributeNS(null,"height",B.toString()),At.setAttributeNS(null,"width","100%"),At.setAttributeNS(null,"height","100%"),At.setAttributeNS(null,"x",z.toString()),At.setAttributeNS(null,"y",H.toString()),At.setAttributeNS(null,"externalResourcesRequired","true"),ze.appendChild(At),At.appendChild(ge),ze},Xm=function(F){return new Promise(function(B,z){var H=new Image;H.onload=function(){return B(H)},H.onerror=z,H.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(F))})},Pl={get SUPPORT_RANGE_BOUNDS(){var F=nv(document);return Object.defineProperty(Pl,"SUPPORT_RANGE_BOUNDS",{value:F}),F},get SUPPORT_WORD_BREAKING(){var F=Pl.SUPPORT_RANGE_BOUNDS&&Tg(document);return Object.defineProperty(Pl,"SUPPORT_WORD_BREAKING",{value:F}),F},get SUPPORT_SVG_DRAWING(){var F=Nd(document);return Object.defineProperty(Pl,"SUPPORT_SVG_DRAWING",{value:F}),F},get SUPPORT_FOREIGNOBJECT_DRAWING(){var F=typeof Array.from=="function"&&typeof window.fetch=="function"?dp(document):Promise.resolve(!1);return Object.defineProperty(Pl,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:F}),F},get SUPPORT_CORS_IMAGES(){var F=up();return Object.defineProperty(Pl,"SUPPORT_CORS_IMAGES",{value:F}),F},get SUPPORT_RESPONSE_TYPE(){var F=td();return Object.defineProperty(Pl,"SUPPORT_RESPONSE_TYPE",{value:F}),F},get SUPPORT_CORS_XHR(){var F="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Pl,"SUPPORT_CORS_XHR",{value:F}),F},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var F=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(Pl,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:F}),F}},Bf=(function(){function F(B,z){this.text=B,this.bounds=z}return F})(),Ng=function(F,B,z,H){var ge=Fy(B,z),Ne=[],ze=0;return ge.forEach(function(At){if(z.textDecorationLine.length||At.trim().length>0)if(Pl.SUPPORT_RANGE_BOUNDS){var pt=hp(H,ze,At.length).getClientRects();if(pt.length>1){var Ut=Am(At),Zt=0;Ut.forEach(function($r){Ne.push(new Bf($r,u.fromDOMRectList(F,hp(H,Zt+ze,$r.length).getClientRects()))),Zt+=$r.length})}else Ne.push(new Bf(At,u.fromDOMRectList(F,pt)))}else{var hr=H.splitText(At.length);Ne.push(new Bf(At,kg(F,H))),H=hr}else Pl.SUPPORT_RANGE_BOUNDS||(H=H.splitText(At.length));ze+=At.length}),Ne},kg=function(F,B){var z=B.ownerDocument;if(z){var H=z.createElement("html2canvaswrapper");H.appendChild(B.cloneNode(!0));var ge=B.parentNode;if(ge){ge.replaceChild(H,B);var Ne=l(F,H);return H.firstChild&&ge.replaceChild(H.firstChild,H),Ne}}return u.EMPTY},hp=function(F,B,z){var H=F.ownerDocument;if(!H)throw new Error("Node has no owner document");var ge=H.createRange();return ge.setStart(F,B),ge.setEnd(F,B+z),ge},Am=function(F){if(Pl.SUPPORT_NATIVE_TEXT_SEGMENTATION){var B=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(B.segment(F)).map(function(z){return z.segment})}return rv(F)},Lg=function(F,B){if(Pl.SUPPORT_NATIVE_TEXT_SEGMENTATION){var z=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(z.segment(F)).map(function(H){return H.segment})}return iv(F,B)},Fy=function(F,B){return B.letterSpacing!==0?Am(F):Lg(F,B)},D1=[32,160,4961,65792,65793,4153,4241],iv=function(F,B){for(var z=qa(F,{lineBreak:B.lineBreak,wordBreak:B.overflowWrap==="break-word"?"break-word":B.wordBreak}),H=[],ge,Ne=function(){if(ge.value){var ze=ge.value.slice(),At=f(ze),pt="";At.forEach(function(Ut){D1.indexOf(Ut)===-1?pt+=m(Ut):(pt.length&&H.push(pt),H.push(m(Ut)),pt="")}),pt.length&&H.push(pt)}};!(ge=z.next()).done;)Ne();return H},Zm=(function(){function F(B,z,H){this.text=Uy(z.data,H.textTransform),this.textBounds=Ng(B,this.text,H,z)}return F})(),Uy=function(F,B){switch(B){case 1:return F.toLowerCase();case 3:return F.replace(Ig,Bg);case 2:return F.toUpperCase();default:return F}},Ig=/(^|\s|:|-|\(|\))([a-z])/g,Bg=function(F,B,z){return F.length>0?B+z.toUpperCase():F},sv=(function(F){n(B,F);function B(z,H){var ge=F.call(this,z,H)||this;return ge.src=H.currentSrc||H.src,ge.intrinsicWidth=H.naturalWidth,ge.intrinsicHeight=H.naturalHeight,ge.context.cache.addImage(ge.src),ge}return B})(zi),Jm=(function(F){n(B,F);function B(z,H){var ge=F.call(this,z,H)||this;return ge.canvas=H,ge.intrinsicWidth=H.width,ge.intrinsicHeight=H.height,ge}return B})(zi),Pg=(function(F){n(B,F);function B(z,H){var ge=F.call(this,z,H)||this,Ne=new XMLSerializer,ze=l(z,H);return H.setAttribute("width",ze.width+"px"),H.setAttribute("height",ze.height+"px"),ge.svg="data:image/svg+xml,"+encodeURIComponent(Ne.serializeToString(H)),ge.intrinsicWidth=H.width.baseVal.value,ge.intrinsicHeight=H.height.baseVal.value,ge.context.cache.addImage(ge.svg),ge}return B})(zi),pm=(function(F){n(B,F);function B(z,H){var ge=F.call(this,z,H)||this;return ge.value=H.value,ge}return B})(zi),Og=(function(F){n(B,F);function B(z,H){var ge=F.call(this,z,H)||this;return ge.start=H.start,ge.reversed=typeof H.reversed=="boolean"&&H.reversed===!0,ge}return B})(zi),$y=[{type:15,flags:0,unit:"px",number:3}],av=[{type:16,flags:0,number:50}],Hy=function(F){return F.width>F.height?new u(F.left+(F.width-F.height)/2,F.top,F.height,F.height):F.width<F.height?new u(F.left,F.top+(F.height-F.width)/2,F.width,F.width):F},ov=function(F){var B=F.type===Nh?new Array(F.value.length+1).join(""):F.value;return B.length===0?F.placeholder||"":B},fp="checkbox",mp="radio",Nh="password",kd=707406591,Gd=(function(F){n(B,F);function B(z,H){var ge=F.call(this,z,H)||this;switch(ge.type=H.type.toLowerCase(),ge.checked=H.checked,ge.value=ov(H),(ge.type===fp||ge.type===mp)&&(ge.styles.backgroundColor=3739148031,ge.styles.borderTopColor=ge.styles.borderRightColor=ge.styles.borderBottomColor=ge.styles.borderLeftColor=2779096575,ge.styles.borderTopWidth=ge.styles.borderRightWidth=ge.styles.borderBottomWidth=ge.styles.borderLeftWidth=1,ge.styles.borderTopStyle=ge.styles.borderRightStyle=ge.styles.borderBottomStyle=ge.styles.borderLeftStyle=1,ge.styles.backgroundClip=[0],ge.styles.backgroundOrigin=[0],ge.bounds=Hy(ge.bounds)),ge.type){case fp:ge.styles.borderTopRightRadius=ge.styles.borderTopLeftRadius=ge.styles.borderBottomRightRadius=ge.styles.borderBottomLeftRadius=$y;break;case mp:ge.styles.borderTopRightRadius=ge.styles.borderTopLeftRadius=ge.styles.borderBottomRightRadius=ge.styles.borderBottomLeftRadius=av;break}return ge}return B})(zi),Qy=(function(F){n(B,F);function B(z,H){var ge=F.call(this,z,H)||this,Ne=H.options[H.selectedIndex||0];return ge.value=Ne&&Ne.text||"",ge}return B})(zi),Ap=(function(F){n(B,F);function B(z,H){var ge=F.call(this,z,H)||this;return ge.value=H.value,ge}return B})(zi),kh=(function(F){n(B,F);function B(z,H){var ge=F.call(this,z,H)||this;ge.src=H.src,ge.width=parseInt(H.width,10)||0,ge.height=parseInt(H.height,10)||0,ge.backgroundColor=ge.styles.backgroundColor;try{if(H.contentWindow&&H.contentWindow.document&&H.contentWindow.document.documentElement){ge.tree=Rg(z,H.contentWindow.document.documentElement);var Ne=H.contentWindow.document.documentElement?Da(z,getComputedStyle(H.contentWindow.document.documentElement).backgroundColor):Za.TRANSPARENT,ze=H.contentWindow.document.body?Da(z,getComputedStyle(H.contentWindow.document.body).backgroundColor):Za.TRANSPARENT;ge.backgroundColor=Ii(Ne)?Ii(ze)?ge.styles.backgroundColor:ze:Ne}}catch{}return ge}return B})(zi),Ld=["OL","UL","MENU"],eA=function(F,B,z,H){for(var ge=B.firstChild,Ne=void 0;ge;ge=Ne)if(Ne=ge.nextSibling,Dg(ge)&&ge.data.trim().length>0)z.textNodes.push(new Zm(F,ge,z.styles));else if(Lh(ge))if(rA(ge)&&ge.assignedNodes)ge.assignedNodes().forEach(function(At){return eA(F,At,z,H)});else{var ze=lv(F,ge);ze.styles.isVisible()&&(zy(ge,ze,H)?ze.flags|=4:Vy(ze.styles)&&(ze.flags|=2),Ld.indexOf(ge.tagName)!==-1&&(ze.flags|=8),z.elements.push(ze),ge.slot,ge.shadowRoot?eA(F,ge.shadowRoot,ze,H):!vp(ge)&&!Fg(ge)&&!yp(ge)&&eA(F,ge,ze,H))}},lv=function(F,B){return Qg(B)?new sv(F,B):$g(B)?new Jm(F,B):Fg(B)?new Pg(F,B):tA(B)?new pm(F,B):Mg(B)?new Og(F,B):pp(B)?new Gd(F,B):yp(B)?new Qy(F,B):vp(B)?new Ap(F,B):uv(B)?new kh(F,B):new zi(F,B)},Rg=function(F,B){var z=lv(F,B);return z.flags|=4,eA(F,B,z,z),z},zy=function(F,B,z){return B.styles.isPositionedWithZIndex()||B.styles.opacity<1||B.styles.isTransformed()||Ug(F)&&z.styles.isTransparent()},Vy=function(F){return F.isPositioned()||F.isFloating()},Dg=function(F){return F.nodeType===Node.TEXT_NODE},Lh=function(F){return F.nodeType===Node.ELEMENT_NODE},Pf=function(F){return Lh(F)&&typeof F.style<"u"&&!Ih(F)},Ih=function(F){return typeof F.className=="object"},tA=function(F){return F.tagName==="LI"},Mg=function(F){return F.tagName==="OL"},pp=function(F){return F.tagName==="INPUT"},cv=function(F){return F.tagName==="HTML"},Fg=function(F){return F.tagName==="svg"},Ug=function(F){return F.tagName==="BODY"},$g=function(F){return F.tagName==="CANVAS"},Hg=function(F){return F.tagName==="VIDEO"},Qg=function(F){return F.tagName==="IMG"},uv=function(F){return F.tagName==="IFRAME"},Zh=function(F){return F.tagName==="STYLE"},gp=function(F){return F.tagName==="SCRIPT"},vp=function(F){return F.tagName==="TEXTAREA"},yp=function(F){return F.tagName==="SELECT"},rA=function(F){return F.tagName==="SLOT"},R=function(F){return F.tagName.indexOf("-")>0},X=(function(){function F(){this.counters={}}return F.prototype.getCounterValue=function(B){var z=this.counters[B];return z&&z.length?z[z.length-1]:1},F.prototype.getCounterValues=function(B){var z=this.counters[B];return z||[]},F.prototype.pop=function(B){var z=this;B.forEach(function(H){return z.counters[H].pop()})},F.prototype.parse=function(B){var z=this,H=B.counterIncrement,ge=B.counterReset,Ne=!0;H!==null&&H.forEach(function(At){var pt=z.counters[At.counter];pt&&At.increment!==0&&(Ne=!1,pt.length||pt.push(1),pt[Math.max(0,pt.length-1)]+=At.increment)});var ze=[];return Ne&&ge.forEach(function(At){var pt=z.counters[At.counter];ze.push(At.counter),pt||(pt=z.counters[At.counter]=[]),pt.push(At.reset)}),ze},F})(),pe={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},Ee={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},$e={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},We={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Ge=function(F,B,z,H,ge,Ne){return F<B||F>z?dn(F,ge,Ne.length>0):H.integers.reduce(function(ze,At,pt){for(;F>=At;)F-=At,ze+=H.values[pt];return ze},"")+Ne},Je=function(F,B,z,H){var ge="";do z||F--,ge=H(F)+ge,F/=B;while(F*B>=B);return ge},st=function(F,B,z,H,ge){var Ne=z-B+1;return(F<0?"-":"")+(Je(Math.abs(F),Ne,H,function(ze){return m(Math.floor(ze%Ne)+B)})+ge)},bt=function(F,B,z){z===void 0&&(z=". ");var H=B.length;return Je(Math.abs(F),H,!1,function(ge){return B[Math.floor(ge%H)]})+z},$t=1,Ar=2,xt=4,Yt=8,nr=function(F,B,z,H,ge,Ne){if(F<-9999||F>9999)return dn(F,4,ge.length>0);var ze=Math.abs(F),At=ge;if(ze===0)return B[0]+At;for(var pt=0;ze>0&&pt<=4;pt++){var Ut=ze%10;Ut===0&&O(Ne,$t)&&At!==""?At=B[Ut]+At:Ut>1||Ut===1&&pt===0||Ut===1&&pt===1&&O(Ne,Ar)||Ut===1&&pt===1&&O(Ne,xt)&&F>100||Ut===1&&pt>1&&O(Ne,Yt)?At=B[Ut]+(pt>0?z[pt-1]:"")+At:Ut===1&&pt>0&&(At=z[pt-1]+At),ze=Math.floor(ze/10)}return(F<0?H:"")+At},Fr="",wr="",Ur="",Vr="",dn=function(F,B,z){var H=z?". ":"",ge=z?"":"",Ne=z?", ":"",ze=z?" ":"";switch(B){case 0:return""+ze;case 1:return""+ze;case 2:return""+ze;case 5:var At=st(F,48,57,!0,H);return At.length<4?"0"+At:At;case 4:return bt(F,"",ge);case 6:return Ge(F,1,3999,pe,3,H).toLowerCase();case 7:return Ge(F,1,3999,pe,3,H);case 8:return st(F,945,969,!1,H);case 9:return st(F,97,122,!1,H);case 10:return st(F,65,90,!1,H);case 11:return st(F,1632,1641,!0,H);case 12:case 49:return Ge(F,1,9999,Ee,3,H);case 35:return Ge(F,1,9999,Ee,3,H).toLowerCase();case 13:return st(F,2534,2543,!0,H);case 14:case 30:return st(F,6112,6121,!0,H);case 15:return bt(F,"",ge);case 16:return bt(F,"",ge);case 17:case 48:return nr(F,"",Fr,"",ge,Ar|xt|Yt);case 47:return nr(F,"",wr,"",ge,$t|Ar|xt|Yt);case 42:return nr(F,"",Fr,"",ge,Ar|xt|Yt);case 41:return nr(F,"",wr,"",ge,$t|Ar|xt|Yt);case 26:return nr(F,"","",Ur,ge,0);case 25:return nr(F,"","",Ur,ge,$t|Ar|xt);case 31:return nr(F,"","",Vr,Ne,$t|Ar|xt);case 33:return nr(F,"","",Vr,Ne,0);case 32:return nr(F,"","",Vr,Ne,$t|Ar|xt);case 18:return st(F,2406,2415,!0,H);case 20:return Ge(F,1,19999,We,3,H);case 21:return st(F,2790,2799,!0,H);case 22:return st(F,2662,2671,!0,H);case 22:return Ge(F,1,10999,$e,3,H);case 23:return bt(F,"");case 24:return bt(F,"");case 27:return st(F,3302,3311,!0,H);case 28:return bt(F,"",ge);case 29:return bt(F,"",ge);case 34:return st(F,3792,3801,!0,H);case 37:return st(F,6160,6169,!0,H);case 38:return st(F,4160,4169,!0,H);case 39:return st(F,2918,2927,!0,H);case 40:return st(F,1776,1785,!0,H);case 43:return st(F,3046,3055,!0,H);case 44:return st(F,3174,3183,!0,H);case 45:return st(F,3664,3673,!0,H);case 46:return st(F,3872,3881,!0,H);default:return st(F,48,57,!0,H)}},sn="data-html2canvas-ignore",Ti=(function(){function F(B,z,H){if(this.context=B,this.options=H,this.scrolledElements=[],this.referenceElement=z,this.counters=new X,this.quoteDepth=0,!z.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(z.ownerDocument.documentElement,!1)}return F.prototype.toIFrame=function(B,z){var H=this,ge=Bs(B,z);if(!ge.contentWindow)return Promise.reject("Unable to find iframe window");var Ne=B.defaultView.pageXOffset,ze=B.defaultView.pageYOffset,At=ge.contentWindow,pt=At.document,Ut=Ol(ge).then(function(){return a(H,void 0,void 0,function(){var Zt,hr;return o(this,function($r){switch($r.label){case 0:return this.scrolledElements.forEach(Ss),At&&(At.scrollTo(z.left,z.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(At.scrollY!==z.top||At.scrollX!==z.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(At.scrollX-z.left,At.scrollY-z.top,0,0))),Zt=this.options.onclone,hr=this.clonedReferenceElement,typeof hr>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:pt.fonts&&pt.fonts.ready?[4,pt.fonts.ready]:[3,2];case 1:$r.sent(),$r.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,ua(pt)]:[3,4];case 3:$r.sent(),$r.label=4;case 4:return typeof Zt=="function"?[2,Promise.resolve().then(function(){return Zt(pt,hr)}).then(function(){return ge})]:[2,ge]}})})});return pt.open(),pt.write(Rn(document.doctype)+"<html></html>"),sl(this.referenceElement.ownerDocument,Ne,ze),pt.replaceChild(pt.adoptNode(this.documentElement),pt.documentElement),pt.close(),Ut},F.prototype.createElementClone=function(B){if(ki(B,2))debugger;if($g(B))return this.createCanvasClone(B);if(Hg(B))return this.createVideoClone(B);if(Zh(B))return this.createStyleClone(B);var z=B.cloneNode(!1);return Qg(z)&&(Qg(B)&&B.currentSrc&&B.currentSrc!==B.src&&(z.src=B.currentSrc,z.srcset=""),z.loading==="lazy"&&(z.loading="eager")),R(z)?this.createCustomElementClone(z):z},F.prototype.createCustomElementClone=function(B){var z=document.createElement("html2canvascustomelement");return hi(B.style,z),z},F.prototype.createStyleClone=function(B){try{var z=B.sheet;if(z&&z.cssRules){var H=[].slice.call(z.cssRules,0).reduce(function(Ne,ze){return ze&&typeof ze.cssText=="string"?Ne+ze.cssText:Ne},""),ge=B.cloneNode(!1);return ge.textContent=H,ge}}catch(Ne){if(this.context.logger.error("Unable to access cssRules property",Ne),Ne.name!=="SecurityError")throw Ne}return B.cloneNode(!1)},F.prototype.createCanvasClone=function(B){var z;if(this.options.inlineImages&&B.ownerDocument){var H=B.ownerDocument.createElement("img");try{return H.src=B.toDataURL(),H}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",B)}}var ge=B.cloneNode(!1);try{ge.width=B.width,ge.height=B.height;var Ne=B.getContext("2d"),ze=ge.getContext("2d");if(ze)if(!this.options.allowTaint&&Ne)ze.putImageData(Ne.getImageData(0,0,B.width,B.height),0,0);else{var At=(z=B.getContext("webgl2"))!==null&&z!==void 0?z:B.getContext("webgl");if(At){var pt=At.getContextAttributes();pt?.preserveDrawingBuffer===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",B)}ze.drawImage(B,0,0)}return ge}catch{this.context.logger.info("Unable to clone canvas as it is tainted",B)}return ge},F.prototype.createVideoClone=function(B){var z=B.ownerDocument.createElement("canvas");z.width=B.offsetWidth,z.height=B.offsetHeight;var H=z.getContext("2d");try{return H&&(H.drawImage(B,0,0,z.width,z.height),this.options.allowTaint||H.getImageData(0,0,z.width,z.height)),z}catch{this.context.logger.info("Unable to clone video as it is tainted",B)}var ge=B.ownerDocument.createElement("canvas");return ge.width=B.offsetWidth,ge.height=B.offsetHeight,ge},F.prototype.appendChildNode=function(B,z,H){(!Lh(z)||!gp(z)&&!z.hasAttribute(sn)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(z)))&&(!this.options.copyStyles||!Lh(z)||!Zh(z))&&B.appendChild(this.cloneNode(z,H))},F.prototype.cloneChildNodes=function(B,z,H){for(var ge=this,Ne=B.shadowRoot?B.shadowRoot.firstChild:B.firstChild;Ne;Ne=Ne.nextSibling)if(Lh(Ne)&&rA(Ne)&&typeof Ne.assignedNodes=="function"){var ze=Ne.assignedNodes();ze.length&&ze.forEach(function(At){return ge.appendChildNode(z,At,H)})}else this.appendChildNode(z,Ne,H)},F.prototype.cloneNode=function(B,z){if(Dg(B))return document.createTextNode(B.data);if(!B.ownerDocument)return B.cloneNode(!1);var H=B.ownerDocument.defaultView;if(H&&Lh(B)&&(Pf(B)||Ih(B))){var ge=this.createElementClone(B);ge.style.transitionProperty="none";var Ne=H.getComputedStyle(B),ze=H.getComputedStyle(B,":before"),At=H.getComputedStyle(B,":after");this.referenceElement===B&&Pf(ge)&&(this.clonedReferenceElement=ge),Ug(ge)&&Sc(ge);var pt=this.counters.parse(new an(this.context,Ne)),Ut=this.resolvePseudoContent(B,ge,ze,Vn.BEFORE);R(B)&&(z=!0),Hg(B)||this.cloneChildNodes(B,ge,z),Ut&&ge.insertBefore(Ut,ge.firstChild);var Zt=this.resolvePseudoContent(B,ge,At,Vn.AFTER);return Zt&&ge.appendChild(Zt),this.counters.pop(pt),(Ne&&(this.options.copyStyles||Ih(B))&&!uv(B)||z)&&hi(Ne,ge),(B.scrollTop!==0||B.scrollLeft!==0)&&this.scrolledElements.push([ge,B.scrollLeft,B.scrollTop]),(vp(B)||yp(B))&&(vp(ge)||yp(ge))&&(ge.value=B.value),ge}return B.cloneNode(!1)},F.prototype.resolvePseudoContent=function(B,z,H,ge){var Ne=this;if(H){var ze=H.content,At=z.ownerDocument;if(!(!At||!ze||ze==="none"||ze==="-moz-alt-content"||H.display==="none")){this.counters.parse(new an(this.context,H));var pt=new Ln(this.context,H),Ut=At.createElement("html2canvaspseudoelement");hi(H,Ut),pt.content.forEach(function(hr){if(hr.type===0)Ut.appendChild(At.createTextNode(hr.value));else if(hr.type===22){var $r=At.createElement("img");$r.src=hr.value,$r.style.opacity="1",Ut.appendChild($r)}else if(hr.type===18){if(hr.name==="attr"){var Kn=hr.values.filter(Cn);Kn.length&&Ut.appendChild(At.createTextNode(B.getAttribute(Kn[0].value)||""))}else if(hr.name==="counter"){var xn=hr.values.filter(zn),Dn=xn[0],Bi=xn[1];if(Dn&&Cn(Dn)){var di=Ne.counters.getCounterValue(Dn.value),oi=Bi&&Cn(Bi)?Sd.parse(Ne.context,Bi.value):3;Ut.appendChild(At.createTextNode(dn(di,oi,!1)))}}else if(hr.name==="counters"){var ea=hr.values.filter(zn),Dn=ea[0],Ks=ea[1],Bi=ea[2];if(Dn&&Cn(Dn)){var us=Ne.counters.getCounterValues(Dn.value),qn=Bi&&Cn(Bi)?Sd.parse(Ne.context,Bi.value):3,da=Ks&&Ks.type===0?Ks.value:"",xa=us.map(function(Do){return dn(Do,qn,!1)}).join(da);Ut.appendChild(At.createTextNode(xa))}}}else if(hr.type===20)switch(hr.value){case"open-quote":Ut.appendChild(At.createTextNode(yr(pt.quotes,Ne.quoteDepth++,!0)));break;case"close-quote":Ut.appendChild(At.createTextNode(yr(pt.quotes,--Ne.quoteDepth,!1)));break;default:Ut.appendChild(At.createTextNode(hr.value))}}),Ut.className=sc+" "+Ec;var Zt=ge===Vn.BEFORE?" "+sc:" "+Ec;return Ih(z)?z.className.baseValue+=Zt:z.className+=Zt,Ut}}},F.destroy=function(B){return B.parentNode?(B.parentNode.removeChild(B),!0):!1},F})(),Vn;(function(F){F[F.BEFORE=0]="BEFORE",F[F.AFTER=1]="AFTER"})(Vn||(Vn={}));var Bs=function(F,B){var z=F.createElement("iframe");return z.className="html2canvas-container",z.style.visibility="hidden",z.style.position="fixed",z.style.left="-10000px",z.style.top="0px",z.style.border="0",z.width=B.width.toString(),z.height=B.height.toString(),z.scrolling="no",z.setAttribute(sn,"true"),F.body.appendChild(z),z},pi=function(F){return new Promise(function(B){if(F.complete){B();return}if(!F.src){B();return}F.onload=B,F.onerror=B})},ua=function(F){return Promise.all([].slice.call(F.images,0).map(pi))},Ol=function(F){return new Promise(function(B,z){var H=F.contentWindow;if(!H)return z("No window assigned for iframe");var ge=H.document;H.onload=F.onload=function(){H.onload=F.onload=null;var Ne=setInterval(function(){ge.body.childNodes.length>0&&ge.readyState==="complete"&&(clearInterval(Ne),B(F))},50)}})},Es=["all","d","content"],hi=function(F,B){for(var z=F.length-1;z>=0;z--){var H=F.item(z);Es.indexOf(H)===-1&&B.style.setProperty(H,F.getPropertyValue(H))}return B},Rn=function(F){var B="";return F&&(B+="<!DOCTYPE ",F.name&&(B+=F.name),F.internalSubset&&(B+=F.internalSubset),F.publicId&&(B+='"'+F.publicId+'"'),F.systemId&&(B+='"'+F.systemId+'"'),B+=">"),B},sl=function(F,B,z){F&&F.defaultView&&(B!==F.defaultView.pageXOffset||z!==F.defaultView.pageYOffset)&&F.defaultView.scrollTo(B,z)},Ss=function(F){var B=F[0],z=F[1],H=F[2];B.scrollLeft=z,B.scrollTop=H},Ds=":before",wo=":after",sc="___html2canvas___pseudoelement_before",Ec="___html2canvas___pseudoelement_after",Ha=`{
    content: "" !important;
    display: none !important;
}`,Sc=function(F){lu(F,"."+sc+Ds+Ha+`
         .`+Ec+wo+Ha)},lu=function(F,B){var z=F.ownerDocument;if(z){var H=z.createElement("style");H.textContent=B,F.appendChild(H)}},al=(function(){function F(){}return F.getOrigin=function(B){var z=F._link;return z?(z.href=B,z.href=z.href,z.protocol+z.hostname+z.port):"about:blank"},F.isSameOrigin=function(B){return F.getOrigin(B)===F._origin},F.setContext=function(B){F._link=B.document.createElement("a"),F._origin=F.getOrigin(B.location.href)},F._origin="about:blank",F})(),aa=(function(){function F(B,z){this.context=B,this._options=z,this._cache={}}return F.prototype.addImage=function(B){var z=Promise.resolve();return this.has(B)||(Xc(B)||jc(B))&&(this._cache[B]=this.loadImage(B)).catch(function(){}),z},F.prototype.match=function(B){return this._cache[B]},F.prototype.loadImage=function(B){return a(this,void 0,void 0,function(){var z,H,ge,Ne,ze=this;return o(this,function(At){switch(At.label){case 0:return z=al.isSameOrigin(B),H=!qc(B)&&this._options.useCORS===!0&&Pl.SUPPORT_CORS_IMAGES&&!z,ge=!qc(B)&&!z&&!Xc(B)&&typeof this._options.proxy=="string"&&Pl.SUPPORT_CORS_XHR&&!H,!z&&this._options.allowTaint===!1&&!qc(B)&&!Xc(B)&&!ge&&!H?[2]:(Ne=B,ge?[4,this.proxy(Ne)]:[3,2]);case 1:Ne=At.sent(),At.label=2;case 2:return this.context.logger.debug("Added image "+B.substring(0,256)),[4,new Promise(function(pt,Ut){var Zt=new Image;Zt.onload=function(){return pt(Zt)},Zt.onerror=Ut,(lo(Ne)||H)&&(Zt.crossOrigin="anonymous"),Zt.src=Ne,Zt.complete===!0&&setTimeout(function(){return pt(Zt)},500),ze._options.imageTimeout>0&&setTimeout(function(){return Ut("Timed out ("+ze._options.imageTimeout+"ms) loading image")},ze._options.imageTimeout)})];case 3:return[2,At.sent()]}})})},F.prototype.has=function(B){return typeof this._cache[B]<"u"},F.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},F.prototype.proxy=function(B){var z=this,H=this._options.proxy;if(!H)throw new Error("No proxy defined");var ge=B.substring(0,256);return new Promise(function(Ne,ze){var At=Pl.SUPPORT_RESPONSE_TYPE?"blob":"text",pt=new XMLHttpRequest;pt.onload=function(){if(pt.status===200)if(At==="text")Ne(pt.response);else{var hr=new FileReader;hr.addEventListener("load",function(){return Ne(hr.result)},!1),hr.addEventListener("error",function($r){return ze($r)},!1),hr.readAsDataURL(pt.response)}else ze("Failed to proxy resource "+ge+" with status code "+pt.status)},pt.onerror=ze;var Ut=H.indexOf("?")>-1?"&":"?";if(pt.open("GET",""+H+Ut+"url="+encodeURIComponent(B)+"&responseType="+At),At!=="text"&&pt instanceof XMLHttpRequest&&(pt.responseType=At),z._options.imageTimeout){var Zt=z._options.imageTimeout;pt.timeout=Zt,pt.ontimeout=function(){return ze("Timed out ("+Zt+"ms) proxying "+ge)}}pt.send()})},F})(),Vi=/^data:image\/svg\+xml/i,wl=/^data:image\/.*;base64,/i,to=/^data:image\/.*/i,jc=function(F){return Pl.SUPPORT_SVG_DRAWING||!co(F)},qc=function(F){return to.test(F)},lo=function(F){return wl.test(F)},Xc=function(F){return F.substr(0,4)==="blob"},co=function(F){return F.substr(-3).toLowerCase()==="svg"||Vi.test(F)},gn=(function(){function F(B,z){this.type=0,this.x=B,this.y=z}return F.prototype.add=function(B,z){return new F(this.x+B,this.y+z)},F})(),_o=function(F,B,z){return new gn(F.x+(B.x-F.x)*z,F.y+(B.y-F.y)*z)},ac=(function(){function F(B,z,H,ge){this.type=1,this.start=B,this.startControl=z,this.endControl=H,this.end=ge}return F.prototype.subdivide=function(B,z){var H=_o(this.start,this.startControl,B),ge=_o(this.startControl,this.endControl,B),Ne=_o(this.endControl,this.end,B),ze=_o(H,ge,B),At=_o(ge,Ne,B),pt=_o(ze,At,B);return z?new F(this.start,H,ze,pt):new F(pt,At,Ne,this.end)},F.prototype.add=function(B,z){return new F(this.start.add(B,z),this.startControl.add(B,z),this.endControl.add(B,z),this.end.add(B,z))},F.prototype.reverse=function(){return new F(this.end,this.endControl,this.startControl,this.start)},F})(),No=function(F){return F.type===1},rd=(function(){function F(B){var z=B.styles,H=B.bounds,ge=Yn(z.borderTopLeftRadius,H.width,H.height),Ne=ge[0],ze=ge[1],At=Yn(z.borderTopRightRadius,H.width,H.height),pt=At[0],Ut=At[1],Zt=Yn(z.borderBottomRightRadius,H.width,H.height),hr=Zt[0],$r=Zt[1],Kn=Yn(z.borderBottomLeftRadius,H.width,H.height),xn=Kn[0],Dn=Kn[1],Bi=[];Bi.push((Ne+pt)/H.width),Bi.push((xn+hr)/H.width),Bi.push((ze+Dn)/H.height),Bi.push((Ut+$r)/H.height);var di=Math.max.apply(Math,Bi);di>1&&(Ne/=di,ze/=di,pt/=di,Ut/=di,hr/=di,$r/=di,xn/=di,Dn/=di);var oi=H.width-pt,ea=H.height-$r,Ks=H.width-hr,us=H.height-Dn,qn=z.borderTopWidth,da=z.borderRightWidth,xa=z.borderBottomWidth,Mi=z.borderLeftWidth,oc=Gi(z.paddingTop,B.bounds.width),Do=Gi(z.paddingRight,B.bounds.width),Xd=Gi(z.paddingBottom,B.bounds.width),Eo=Gi(z.paddingLeft,B.bounds.width);this.topLeftBorderDoubleOuterBox=Ne>0||ze>0?Js(H.left+Mi/3,H.top+qn/3,Ne-Mi/3,ze-qn/3,ws.TOP_LEFT):new gn(H.left+Mi/3,H.top+qn/3),this.topRightBorderDoubleOuterBox=Ne>0||ze>0?Js(H.left+oi,H.top+qn/3,pt-da/3,Ut-qn/3,ws.TOP_RIGHT):new gn(H.left+H.width-da/3,H.top+qn/3),this.bottomRightBorderDoubleOuterBox=hr>0||$r>0?Js(H.left+Ks,H.top+ea,hr-da/3,$r-xa/3,ws.BOTTOM_RIGHT):new gn(H.left+H.width-da/3,H.top+H.height-xa/3),this.bottomLeftBorderDoubleOuterBox=xn>0||Dn>0?Js(H.left+Mi/3,H.top+us,xn-Mi/3,Dn-xa/3,ws.BOTTOM_LEFT):new gn(H.left+Mi/3,H.top+H.height-xa/3),this.topLeftBorderDoubleInnerBox=Ne>0||ze>0?Js(H.left+Mi*2/3,H.top+qn*2/3,Ne-Mi*2/3,ze-qn*2/3,ws.TOP_LEFT):new gn(H.left+Mi*2/3,H.top+qn*2/3),this.topRightBorderDoubleInnerBox=Ne>0||ze>0?Js(H.left+oi,H.top+qn*2/3,pt-da*2/3,Ut-qn*2/3,ws.TOP_RIGHT):new gn(H.left+H.width-da*2/3,H.top+qn*2/3),this.bottomRightBorderDoubleInnerBox=hr>0||$r>0?Js(H.left+Ks,H.top+ea,hr-da*2/3,$r-xa*2/3,ws.BOTTOM_RIGHT):new gn(H.left+H.width-da*2/3,H.top+H.height-xa*2/3),this.bottomLeftBorderDoubleInnerBox=xn>0||Dn>0?Js(H.left+Mi*2/3,H.top+us,xn-Mi*2/3,Dn-xa*2/3,ws.BOTTOM_LEFT):new gn(H.left+Mi*2/3,H.top+H.height-xa*2/3),this.topLeftBorderStroke=Ne>0||ze>0?Js(H.left+Mi/2,H.top+qn/2,Ne-Mi/2,ze-qn/2,ws.TOP_LEFT):new gn(H.left+Mi/2,H.top+qn/2),this.topRightBorderStroke=Ne>0||ze>0?Js(H.left+oi,H.top+qn/2,pt-da/2,Ut-qn/2,ws.TOP_RIGHT):new gn(H.left+H.width-da/2,H.top+qn/2),this.bottomRightBorderStroke=hr>0||$r>0?Js(H.left+Ks,H.top+ea,hr-da/2,$r-xa/2,ws.BOTTOM_RIGHT):new gn(H.left+H.width-da/2,H.top+H.height-xa/2),this.bottomLeftBorderStroke=xn>0||Dn>0?Js(H.left+Mi/2,H.top+us,xn-Mi/2,Dn-xa/2,ws.BOTTOM_LEFT):new gn(H.left+Mi/2,H.top+H.height-xa/2),this.topLeftBorderBox=Ne>0||ze>0?Js(H.left,H.top,Ne,ze,ws.TOP_LEFT):new gn(H.left,H.top),this.topRightBorderBox=pt>0||Ut>0?Js(H.left+oi,H.top,pt,Ut,ws.TOP_RIGHT):new gn(H.left+H.width,H.top),this.bottomRightBorderBox=hr>0||$r>0?Js(H.left+Ks,H.top+ea,hr,$r,ws.BOTTOM_RIGHT):new gn(H.left+H.width,H.top+H.height),this.bottomLeftBorderBox=xn>0||Dn>0?Js(H.left,H.top+us,xn,Dn,ws.BOTTOM_LEFT):new gn(H.left,H.top+H.height),this.topLeftPaddingBox=Ne>0||ze>0?Js(H.left+Mi,H.top+qn,Math.max(0,Ne-Mi),Math.max(0,ze-qn),ws.TOP_LEFT):new gn(H.left+Mi,H.top+qn),this.topRightPaddingBox=pt>0||Ut>0?Js(H.left+Math.min(oi,H.width-da),H.top+qn,oi>H.width+da?0:Math.max(0,pt-da),Math.max(0,Ut-qn),ws.TOP_RIGHT):new gn(H.left+H.width-da,H.top+qn),this.bottomRightPaddingBox=hr>0||$r>0?Js(H.left+Math.min(Ks,H.width-Mi),H.top+Math.min(ea,H.height-xa),Math.max(0,hr-da),Math.max(0,$r-xa),ws.BOTTOM_RIGHT):new gn(H.left+H.width-da,H.top+H.height-xa),this.bottomLeftPaddingBox=xn>0||Dn>0?Js(H.left+Mi,H.top+Math.min(us,H.height-xa),Math.max(0,xn-Mi),Math.max(0,Dn-xa),ws.BOTTOM_LEFT):new gn(H.left+Mi,H.top+H.height-xa),this.topLeftContentBox=Ne>0||ze>0?Js(H.left+Mi+Eo,H.top+qn+oc,Math.max(0,Ne-(Mi+Eo)),Math.max(0,ze-(qn+oc)),ws.TOP_LEFT):new gn(H.left+Mi+Eo,H.top+qn+oc),this.topRightContentBox=pt>0||Ut>0?Js(H.left+Math.min(oi,H.width+Mi+Eo),H.top+qn+oc,oi>H.width+Mi+Eo?0:pt-Mi+Eo,Ut-(qn+oc),ws.TOP_RIGHT):new gn(H.left+H.width-(da+Do),H.top+qn+oc),this.bottomRightContentBox=hr>0||$r>0?Js(H.left+Math.min(Ks,H.width-(Mi+Eo)),H.top+Math.min(ea,H.height+qn+oc),Math.max(0,hr-(da+Do)),$r-(xa+Xd),ws.BOTTOM_RIGHT):new gn(H.left+H.width-(da+Do),H.top+H.height-(xa+Xd)),this.bottomLeftContentBox=xn>0||Dn>0?Js(H.left+Mi+Eo,H.top+us,Math.max(0,xn-(Mi+Eo)),Dn-(xa+Xd),ws.BOTTOM_LEFT):new gn(H.left+Mi+Eo,H.top+H.height-(xa+Xd))}return F})(),ws;(function(F){F[F.TOP_LEFT=0]="TOP_LEFT",F[F.TOP_RIGHT=1]="TOP_RIGHT",F[F.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",F[F.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(ws||(ws={}));var Js=function(F,B,z,H,ge){var Ne=4*((Math.sqrt(2)-1)/3),ze=z*Ne,At=H*Ne,pt=F+z,Ut=B+H;switch(ge){case ws.TOP_LEFT:return new ac(new gn(F,Ut),new gn(F,Ut-At),new gn(pt-ze,B),new gn(pt,B));case ws.TOP_RIGHT:return new ac(new gn(F,B),new gn(F+ze,B),new gn(pt,Ut-At),new gn(pt,Ut));case ws.BOTTOM_RIGHT:return new ac(new gn(pt,B),new gn(pt,B+At),new gn(F+ze,Ut),new gn(F,Ut));case ws.BOTTOM_LEFT:default:return new ac(new gn(pt,Ut),new gn(pt-ze,Ut),new gn(F,B+At),new gn(F,B))}},La=function(F){return[F.topLeftBorderBox,F.topRightBorderBox,F.bottomRightBorderBox,F.bottomLeftBorderBox]},nd=function(F){return[F.topLeftContentBox,F.topRightContentBox,F.bottomRightContentBox,F.bottomLeftContentBox]},_l=function(F){return[F.topLeftPaddingBox,F.topRightPaddingBox,F.bottomRightPaddingBox,F.bottomLeftPaddingBox]},ko=(function(){function F(B,z,H){this.offsetX=B,this.offsetY=z,this.matrix=H,this.type=0,this.target=6}return F})(),id=(function(){function F(B,z){this.path=B,this.target=z,this.type=1}return F})(),Tc=(function(){function F(B){this.opacity=B,this.type=2,this.target=6}return F})(),Rl=function(F){return F.type===0},zg=function(F){return F.type===1},xp=function(F){return F.type===2},gm=function(F,B){return F.length===B.length?F.some(function(z,H){return z===B[H]}):!1},qo=function(F,B,z,H,ge){return F.map(function(Ne,ze){switch(ze){case 0:return Ne.add(B,z);case 1:return Ne.add(B+H,z);case 2:return Ne.add(B+H,z+ge);case 3:return Ne.add(B,z+ge)}return Ne})},Nu=(function(){function F(B){this.element=B,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return F})(),Wd=(function(){function F(B,z){if(this.container=B,this.parent=z,this.effects=[],this.curves=new rd(this.container),this.container.styles.opacity<1&&this.effects.push(new Tc(this.container.styles.opacity)),this.container.styles.transform!==null){var H=this.container.bounds.left+this.container.styles.transformOrigin[0].number,ge=this.container.bounds.top+this.container.styles.transformOrigin[1].number,Ne=this.container.styles.transform;this.effects.push(new ko(H,ge,Ne))}if(this.container.styles.overflowX!==0){var ze=La(this.curves),At=_l(this.curves);gm(ze,At)?this.effects.push(new id(ze,6)):(this.effects.push(new id(ze,2)),this.effects.push(new id(At,4)))}}return F.prototype.getEffects=function(B){for(var z=[2,3].indexOf(this.container.styles.position)===-1,H=this.parent,ge=this.effects.slice(0);H;){var Ne=H.effects.filter(function(pt){return!zg(pt)});if(z||H.container.styles.position!==0||!H.parent){if(ge.unshift.apply(ge,Ne),z=[2,3].indexOf(H.container.styles.position)===-1,H.container.styles.overflowX!==0){var ze=La(H.curves),At=_l(H.curves);gm(ze,At)||ge.unshift(new id(At,6))}}else ge.unshift.apply(ge,Ne);H=H.parent}return ge.filter(function(pt){return O(pt.target,B)})},F})(),mh=function(F,B,z,H){F.container.elements.forEach(function(ge){var Ne=O(ge.flags,4),ze=O(ge.flags,2),At=new Wd(ge,F);O(ge.styles.display,2048)&&H.push(At);var pt=O(ge.flags,8)?[]:H;if(Ne||ze){var Ut=Ne||ge.styles.isPositioned()?z:B,Zt=new Nu(At);if(ge.styles.isPositioned()||ge.styles.opacity<1||ge.styles.isTransformed()){var hr=ge.styles.zIndex.order;if(hr<0){var $r=0;Ut.negativeZIndex.some(function(xn,Dn){return hr>xn.element.container.styles.zIndex.order?($r=Dn,!1):$r>0}),Ut.negativeZIndex.splice($r,0,Zt)}else if(hr>0){var Kn=0;Ut.positiveZIndex.some(function(xn,Dn){return hr>=xn.element.container.styles.zIndex.order?(Kn=Dn+1,!1):Kn>0}),Ut.positiveZIndex.splice(Kn,0,Zt)}else Ut.zeroOrAutoZIndexOrTransformedOrOpacity.push(Zt)}else ge.styles.isFloating()?Ut.nonPositionedFloats.push(Zt):Ut.nonPositionedInlineLevel.push(Zt);mh(At,Zt,Ne?Zt:z,pt)}else ge.styles.isInlineLevel()?B.inlineLevel.push(At):B.nonInlineLevel.push(At),mh(At,B,z,pt);O(ge.flags,8)&&dv(ge,pt)})},dv=function(F,B){for(var z=F instanceof Og?F.start:1,H=F instanceof Og?F.reversed:!1,ge=0;ge<B.length;ge++){var Ne=B[ge];Ne.container instanceof pm&&typeof Ne.container.value=="number"&&Ne.container.value!==0&&(z=Ne.container.value),Ne.listValue=dn(z,Ne.container.styles.listStyleType,!0),z+=H?-1:1}},Ky=function(F){var B=new Wd(F,null),z=new Nu(B),H=[];return mh(B,z,z,H),dv(B.container,H),z},Gy=function(F,B){switch(B){case 0:return uo(F.topLeftBorderBox,F.topLeftPaddingBox,F.topRightBorderBox,F.topRightPaddingBox);case 1:return uo(F.topRightBorderBox,F.topRightPaddingBox,F.bottomRightBorderBox,F.bottomRightPaddingBox);case 2:return uo(F.bottomRightBorderBox,F.bottomRightPaddingBox,F.bottomLeftBorderBox,F.bottomLeftPaddingBox);default:return uo(F.bottomLeftBorderBox,F.bottomLeftPaddingBox,F.topLeftBorderBox,F.topLeftPaddingBox)}},bp=function(F,B){switch(B){case 0:return uo(F.topLeftBorderBox,F.topLeftBorderDoubleOuterBox,F.topRightBorderBox,F.topRightBorderDoubleOuterBox);case 1:return uo(F.topRightBorderBox,F.topRightBorderDoubleOuterBox,F.bottomRightBorderBox,F.bottomRightBorderDoubleOuterBox);case 2:return uo(F.bottomRightBorderBox,F.bottomRightBorderDoubleOuterBox,F.bottomLeftBorderBox,F.bottomLeftBorderDoubleOuterBox);default:return uo(F.bottomLeftBorderBox,F.bottomLeftBorderDoubleOuterBox,F.topLeftBorderBox,F.topLeftBorderDoubleOuterBox)}},Zc=function(F,B){switch(B){case 0:return uo(F.topLeftBorderDoubleInnerBox,F.topLeftPaddingBox,F.topRightBorderDoubleInnerBox,F.topRightPaddingBox);case 1:return uo(F.topRightBorderDoubleInnerBox,F.topRightPaddingBox,F.bottomRightBorderDoubleInnerBox,F.bottomRightPaddingBox);case 2:return uo(F.bottomRightBorderDoubleInnerBox,F.bottomRightPaddingBox,F.bottomLeftBorderDoubleInnerBox,F.bottomLeftPaddingBox);default:return uo(F.bottomLeftBorderDoubleInnerBox,F.bottomLeftPaddingBox,F.topLeftBorderDoubleInnerBox,F.topLeftPaddingBox)}},Yd=function(F,B){switch(B){case 0:return nA(F.topLeftBorderStroke,F.topRightBorderStroke);case 1:return nA(F.topRightBorderStroke,F.bottomRightBorderStroke);case 2:return nA(F.bottomRightBorderStroke,F.bottomLeftBorderStroke);default:return nA(F.bottomLeftBorderStroke,F.topLeftBorderStroke)}},nA=function(F,B){var z=[];return No(F)?z.push(F.subdivide(.5,!1)):z.push(F),No(B)?z.push(B.subdivide(.5,!0)):z.push(B),z},uo=function(F,B,z,H){var ge=[];return No(F)?ge.push(F.subdivide(.5,!1)):ge.push(F),No(z)?ge.push(z.subdivide(.5,!0)):ge.push(z),No(H)?ge.push(H.subdivide(.5,!0).reverse()):ge.push(H),No(B)?ge.push(B.subdivide(.5,!1).reverse()):ge.push(B),ge},wp=function(F){var B=F.bounds,z=F.styles;return B.add(z.borderLeftWidth,z.borderTopWidth,-(z.borderRightWidth+z.borderLeftWidth),-(z.borderTopWidth+z.borderBottomWidth))},cu=function(F){var B=F.styles,z=F.bounds,H=Gi(B.paddingLeft,z.width),ge=Gi(B.paddingRight,z.width),Ne=Gi(B.paddingTop,z.width),ze=Gi(B.paddingBottom,z.width);return z.add(H+B.borderLeftWidth,Ne+B.borderTopWidth,-(B.borderRightWidth+B.borderLeftWidth+H+ge),-(B.borderTopWidth+B.borderBottomWidth+Ne+ze))},Of=function(F,B){return F===0?B.bounds:F===2?cu(B):wp(B)},Jh=function(F,B){return F===0?B.bounds:F===2?cu(B):wp(B)},Rf=function(F,B,z){var H=Of(qd(F.styles.backgroundOrigin,B),F),ge=Jh(qd(F.styles.backgroundClip,B),F),Ne=tf(qd(F.styles.backgroundSize,B),z,H),ze=Ne[0],At=Ne[1],pt=Yn(qd(F.styles.backgroundPosition,B),H.width-ze,H.height-At),Ut=iA(qd(F.styles.backgroundRepeat,B),pt,Ne,H,ge),Zt=Math.round(H.left+pt[0]),hr=Math.round(H.top+pt[1]);return[Ut,Zt,hr,ze,At]},ef=function(F){return Cn(F)&&F.value===Fi.AUTO},uu=function(F){return typeof F=="number"},tf=function(F,B,z){var H=B[0],ge=B[1],Ne=B[2],ze=F[0],At=F[1];if(!ze)return[0,0];if(Wn(ze)&&At&&Wn(At))return[Gi(ze,z.width),Gi(At,z.height)];var pt=uu(Ne);if(Cn(ze)&&(ze.value===Fi.CONTAIN||ze.value===Fi.COVER)){if(uu(Ne)){var Ut=z.width/z.height;return Ut<Ne!=(ze.value===Fi.COVER)?[z.width,z.width/Ne]:[z.height*Ne,z.height]}return[z.width,z.height]}var Zt=uu(H),hr=uu(ge),$r=Zt||hr;if(ef(ze)&&(!At||ef(At))){if(Zt&&hr)return[H,ge];if(!pt&&!$r)return[z.width,z.height];if($r&&pt){var Kn=Zt?H:ge*Ne,xn=hr?ge:H/Ne;return[Kn,xn]}var Dn=Zt?H:z.width,Bi=hr?ge:z.height;return[Dn,Bi]}if(pt){var di=0,oi=0;return Wn(ze)?di=Gi(ze,z.width):Wn(At)&&(oi=Gi(At,z.height)),ef(ze)?di=oi*Ne:(!At||ef(At))&&(oi=di/Ne),[di,oi]}var ea=null,Ks=null;if(Wn(ze)?ea=Gi(ze,z.width):At&&Wn(At)&&(Ks=Gi(At,z.height)),ea!==null&&(!At||ef(At))&&(Ks=Zt&&hr?ea/H*ge:z.height),Ks!==null&&ef(ze)&&(ea=Zt&&hr?Ks/ge*H:z.width),ea!==null&&Ks!==null)return[ea,Ks];throw new Error("Unable to calculate background-size for element")},qd=function(F,B){var z=F[B];return typeof z>"u"?F[0]:z},iA=function(F,B,z,H,ge){var Ne=B[0],ze=B[1],At=z[0],pt=z[1];switch(F){case 2:return[new gn(Math.round(H.left),Math.round(H.top+ze)),new gn(Math.round(H.left+H.width),Math.round(H.top+ze)),new gn(Math.round(H.left+H.width),Math.round(pt+H.top+ze)),new gn(Math.round(H.left),Math.round(pt+H.top+ze))];case 3:return[new gn(Math.round(H.left+Ne),Math.round(H.top)),new gn(Math.round(H.left+Ne+At),Math.round(H.top)),new gn(Math.round(H.left+Ne+At),Math.round(H.height+H.top)),new gn(Math.round(H.left+Ne),Math.round(H.height+H.top))];case 1:return[new gn(Math.round(H.left+Ne),Math.round(H.top+ze)),new gn(Math.round(H.left+Ne+At),Math.round(H.top+ze)),new gn(Math.round(H.left+Ne+At),Math.round(H.top+ze+pt)),new gn(Math.round(H.left+Ne),Math.round(H.top+ze+pt))];default:return[new gn(Math.round(ge.left),Math.round(ge.top)),new gn(Math.round(ge.left+ge.width),Math.round(ge.top)),new gn(Math.round(ge.left+ge.width),Math.round(ge.height+ge.top)),new gn(Math.round(ge.left),Math.round(ge.height+ge.top))]}},_p="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",Df="Hidden Text",vm=(function(){function F(B){this._data={},this._document=B}return F.prototype.parseMetrics=function(B,z){var H=this._document.createElement("div"),ge=this._document.createElement("img"),Ne=this._document.createElement("span"),ze=this._document.body;H.style.visibility="hidden",H.style.fontFamily=B,H.style.fontSize=z,H.style.margin="0",H.style.padding="0",H.style.whiteSpace="nowrap",ze.appendChild(H),ge.src=_p,ge.width=1,ge.height=1,ge.style.margin="0",ge.style.padding="0",ge.style.verticalAlign="baseline",Ne.style.fontFamily=B,Ne.style.fontSize=z,Ne.style.margin="0",Ne.style.padding="0",Ne.appendChild(this._document.createTextNode(Df)),H.appendChild(Ne),H.appendChild(ge);var At=ge.offsetTop-Ne.offsetTop+2;H.removeChild(Ne),H.appendChild(this._document.createTextNode(Df)),H.style.lineHeight="normal",ge.style.verticalAlign="super";var pt=ge.offsetTop-H.offsetTop+2;return ze.removeChild(H),{baseline:At,middle:pt}},F.prototype.getMetrics=function(B,z){var H=B+" "+z;return typeof this._data[H]>"u"&&(this._data[H]=this.parseMetrics(B,z)),this._data[H]},F})(),hv=(function(){function F(B,z){this.context=B,this.options=z}return F})(),sA=1e4,Wy=(function(F){n(B,F);function B(z,H){var ge=F.call(this,z,H)||this;return ge._activeEffects=[],ge.canvas=H.canvas?H.canvas:document.createElement("canvas"),ge.ctx=ge.canvas.getContext("2d"),H.canvas||(ge.canvas.width=Math.floor(H.width*H.scale),ge.canvas.height=Math.floor(H.height*H.scale),ge.canvas.style.width=H.width+"px",ge.canvas.style.height=H.height+"px"),ge.fontMetrics=new vm(document),ge.ctx.scale(ge.options.scale,ge.options.scale),ge.ctx.translate(-H.x,-H.y),ge.ctx.textBaseline="bottom",ge._activeEffects=[],ge.context.logger.debug("Canvas renderer initialized ("+H.width+"x"+H.height+") with scale "+H.scale),ge}return B.prototype.applyEffects=function(z){for(var H=this;this._activeEffects.length;)this.popEffect();z.forEach(function(ge){return H.applyEffect(ge)})},B.prototype.applyEffect=function(z){this.ctx.save(),xp(z)&&(this.ctx.globalAlpha=z.opacity),Rl(z)&&(this.ctx.translate(z.offsetX,z.offsetY),this.ctx.transform(z.matrix[0],z.matrix[1],z.matrix[2],z.matrix[3],z.matrix[4],z.matrix[5]),this.ctx.translate(-z.offsetX,-z.offsetY)),zg(z)&&(this.path(z.path),this.ctx.clip()),this._activeEffects.push(z)},B.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},B.prototype.renderStack=function(z){return a(this,void 0,void 0,function(){var H;return o(this,function(ge){switch(ge.label){case 0:return H=z.element.container.styles,H.isVisible()?[4,this.renderStackContent(z)]:[3,2];case 1:ge.sent(),ge.label=2;case 2:return[2]}})})},B.prototype.renderNode=function(z){return a(this,void 0,void 0,function(){return o(this,function(H){switch(H.label){case 0:if(O(z.container.flags,16))debugger;return z.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(z)]:[3,3];case 1:return H.sent(),[4,this.renderNodeContent(z)];case 2:H.sent(),H.label=3;case 3:return[2]}})})},B.prototype.renderTextWithLetterSpacing=function(z,H,ge){var Ne=this;if(H===0)this.ctx.fillText(z.text,z.bounds.left,z.bounds.top+ge);else{var ze=Am(z.text);ze.reduce(function(At,pt){return Ne.ctx.fillText(pt,At,z.bounds.top+ge),At+Ne.ctx.measureText(pt).width},z.bounds.left)}},B.prototype.createFontStyle=function(z){var H=z.fontVariant.filter(function(ze){return ze==="normal"||ze==="small-caps"}).join(""),ge=ya(z.fontFamily).join(", "),Ne=Tn(z.fontSize)?""+z.fontSize.number+z.fontSize.unit:z.fontSize.number+"px";return[[z.fontStyle,H,z.fontWeight,Ne,ge].join(" "),ge,Ne]},B.prototype.renderTextNode=function(z,H){return a(this,void 0,void 0,function(){var ge,Ne,ze,At,pt,Ut,Zt,hr,$r=this;return o(this,function(Kn){return ge=this.createFontStyle(H),Ne=ge[0],ze=ge[1],At=ge[2],this.ctx.font=Ne,this.ctx.direction=H.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",pt=this.fontMetrics.getMetrics(ze,At),Ut=pt.baseline,Zt=pt.middle,hr=H.paintOrder,z.textBounds.forEach(function(xn){hr.forEach(function(Dn){switch(Dn){case 0:$r.ctx.fillStyle=_n(H.color),$r.renderTextWithLetterSpacing(xn,H.letterSpacing,Ut);var Bi=H.textShadow;Bi.length&&xn.text.trim().length&&(Bi.slice(0).reverse().forEach(function(di){$r.ctx.shadowColor=_n(di.color),$r.ctx.shadowOffsetX=di.offsetX.number*$r.options.scale,$r.ctx.shadowOffsetY=di.offsetY.number*$r.options.scale,$r.ctx.shadowBlur=di.blur.number,$r.renderTextWithLetterSpacing(xn,H.letterSpacing,Ut)}),$r.ctx.shadowColor="",$r.ctx.shadowOffsetX=0,$r.ctx.shadowOffsetY=0,$r.ctx.shadowBlur=0),H.textDecorationLine.length&&($r.ctx.fillStyle=_n(H.textDecorationColor||H.color),H.textDecorationLine.forEach(function(di){switch(di){case 1:$r.ctx.fillRect(xn.bounds.left,Math.round(xn.bounds.top+Ut),xn.bounds.width,1);break;case 2:$r.ctx.fillRect(xn.bounds.left,Math.round(xn.bounds.top),xn.bounds.width,1);break;case 3:$r.ctx.fillRect(xn.bounds.left,Math.ceil(xn.bounds.top+Zt),xn.bounds.width,1);break}}));break;case 1:H.webkitTextStrokeWidth&&xn.text.trim().length&&($r.ctx.strokeStyle=_n(H.webkitTextStrokeColor),$r.ctx.lineWidth=H.webkitTextStrokeWidth,$r.ctx.lineJoin=window.chrome?"miter":"round",$r.ctx.strokeText(xn.text,xn.bounds.left,xn.bounds.top+Ut)),$r.ctx.strokeStyle="",$r.ctx.lineWidth=0,$r.ctx.lineJoin="miter";break}})}),[2]})})},B.prototype.renderReplacedElement=function(z,H,ge){if(ge&&z.intrinsicWidth>0&&z.intrinsicHeight>0){var Ne=cu(z),ze=_l(H);this.path(ze),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(ge,0,0,z.intrinsicWidth,z.intrinsicHeight,Ne.left,Ne.top,Ne.width,Ne.height),this.ctx.restore()}},B.prototype.renderNodeContent=function(z){return a(this,void 0,void 0,function(){var H,ge,Ne,ze,At,pt,oi,oi,Ut,Zt,hr,$r,Ks,Kn,xn,us,Dn,Bi,di,oi,ea,Ks,us;return o(this,function(qn){switch(qn.label){case 0:this.applyEffects(z.getEffects(4)),H=z.container,ge=z.curves,Ne=H.styles,ze=0,At=H.textNodes,qn.label=1;case 1:return ze<At.length?(pt=At[ze],[4,this.renderTextNode(pt,Ne)]):[3,4];case 2:qn.sent(),qn.label=3;case 3:return ze++,[3,1];case 4:if(!(H instanceof sv))return[3,8];qn.label=5;case 5:return qn.trys.push([5,7,,8]),[4,this.context.cache.match(H.src)];case 6:return oi=qn.sent(),this.renderReplacedElement(H,ge,oi),[3,8];case 7:return qn.sent(),this.context.logger.error("Error loading image "+H.src),[3,8];case 8:if(H instanceof Jm&&this.renderReplacedElement(H,ge,H.canvas),!(H instanceof Pg))return[3,12];qn.label=9;case 9:return qn.trys.push([9,11,,12]),[4,this.context.cache.match(H.svg)];case 10:return oi=qn.sent(),this.renderReplacedElement(H,ge,oi),[3,12];case 11:return qn.sent(),this.context.logger.error("Error loading svg "+H.svg.substring(0,255)),[3,12];case 12:return H instanceof kh&&H.tree?(Ut=new B(this.context,{scale:this.options.scale,backgroundColor:H.backgroundColor,x:0,y:0,width:H.width,height:H.height}),[4,Ut.render(H.tree)]):[3,14];case 13:Zt=qn.sent(),H.width&&H.height&&this.ctx.drawImage(Zt,0,0,H.width,H.height,H.bounds.left,H.bounds.top,H.bounds.width,H.bounds.height),qn.label=14;case 14:if(H instanceof Gd&&(hr=Math.min(H.bounds.width,H.bounds.height),H.type===fp?H.checked&&(this.ctx.save(),this.path([new gn(H.bounds.left+hr*.39363,H.bounds.top+hr*.79),new gn(H.bounds.left+hr*.16,H.bounds.top+hr*.5549),new gn(H.bounds.left+hr*.27347,H.bounds.top+hr*.44071),new gn(H.bounds.left+hr*.39694,H.bounds.top+hr*.5649),new gn(H.bounds.left+hr*.72983,H.bounds.top+hr*.23),new gn(H.bounds.left+hr*.84,H.bounds.top+hr*.34085),new gn(H.bounds.left+hr*.39363,H.bounds.top+hr*.79)]),this.ctx.fillStyle=_n(kd),this.ctx.fill(),this.ctx.restore()):H.type===mp&&H.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(H.bounds.left+hr/2,H.bounds.top+hr/2,hr/4,0,Math.PI*2,!0),this.ctx.fillStyle=_n(kd),this.ctx.fill(),this.ctx.restore())),Ep(H)&&H.value.length){switch($r=this.createFontStyle(Ne),Ks=$r[0],Kn=$r[1],xn=this.fontMetrics.getMetrics(Ks,Kn).baseline,this.ctx.font=Ks,this.ctx.fillStyle=_n(Ne.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=Sp(H.styles.textAlign),us=cu(H),Dn=0,H.styles.textAlign){case 1:Dn+=us.width/2;break;case 2:Dn+=us.width;break}Bi=us.add(Dn,0,0,-us.height/2+1),this.ctx.save(),this.path([new gn(us.left,us.top),new gn(us.left+us.width,us.top),new gn(us.left+us.width,us.top+us.height),new gn(us.left,us.top+us.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Bf(H.value,Bi),Ne.letterSpacing,xn),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!O(H.styles.display,2048))return[3,20];if(H.styles.listStyleImage===null)return[3,19];if(di=H.styles.listStyleImage,di.type!==0)return[3,18];oi=void 0,ea=di.url,qn.label=15;case 15:return qn.trys.push([15,17,,18]),[4,this.context.cache.match(ea)];case 16:return oi=qn.sent(),this.ctx.drawImage(oi,H.bounds.left-(oi.width+10),H.bounds.top),[3,18];case 17:return qn.sent(),this.context.logger.error("Error loading list-style-image "+ea),[3,18];case 18:return[3,20];case 19:z.listValue&&H.styles.listStyleType!==-1&&(Ks=this.createFontStyle(Ne)[0],this.ctx.font=Ks,this.ctx.fillStyle=_n(Ne.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",us=new u(H.bounds.left,H.bounds.top+Gi(H.styles.paddingTop,H.bounds.width),H.bounds.width,ao(Ne.lineHeight,Ne.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Bf(z.listValue,us),Ne.letterSpacing,ao(Ne.lineHeight,Ne.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),qn.label=20;case 20:return[2]}})})},B.prototype.renderStackContent=function(z){return a(this,void 0,void 0,function(){var H,ge,di,Ne,ze,di,At,pt,di,Ut,Zt,di,hr,$r,di,Kn,xn,di,Dn,Bi,di;return o(this,function(oi){switch(oi.label){case 0:if(O(z.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(z.element)];case 1:oi.sent(),H=0,ge=z.negativeZIndex,oi.label=2;case 2:return H<ge.length?(di=ge[H],[4,this.renderStack(di)]):[3,5];case 3:oi.sent(),oi.label=4;case 4:return H++,[3,2];case 5:return[4,this.renderNodeContent(z.element)];case 6:oi.sent(),Ne=0,ze=z.nonInlineLevel,oi.label=7;case 7:return Ne<ze.length?(di=ze[Ne],[4,this.renderNode(di)]):[3,10];case 8:oi.sent(),oi.label=9;case 9:return Ne++,[3,7];case 10:At=0,pt=z.nonPositionedFloats,oi.label=11;case 11:return At<pt.length?(di=pt[At],[4,this.renderStack(di)]):[3,14];case 12:oi.sent(),oi.label=13;case 13:return At++,[3,11];case 14:Ut=0,Zt=z.nonPositionedInlineLevel,oi.label=15;case 15:return Ut<Zt.length?(di=Zt[Ut],[4,this.renderStack(di)]):[3,18];case 16:oi.sent(),oi.label=17;case 17:return Ut++,[3,15];case 18:hr=0,$r=z.inlineLevel,oi.label=19;case 19:return hr<$r.length?(di=$r[hr],[4,this.renderNode(di)]):[3,22];case 20:oi.sent(),oi.label=21;case 21:return hr++,[3,19];case 22:Kn=0,xn=z.zeroOrAutoZIndexOrTransformedOrOpacity,oi.label=23;case 23:return Kn<xn.length?(di=xn[Kn],[4,this.renderStack(di)]):[3,26];case 24:oi.sent(),oi.label=25;case 25:return Kn++,[3,23];case 26:Dn=0,Bi=z.positiveZIndex,oi.label=27;case 27:return Dn<Bi.length?(di=Bi[Dn],[4,this.renderStack(di)]):[3,30];case 28:oi.sent(),oi.label=29;case 29:return Dn++,[3,27];case 30:return[2]}})})},B.prototype.mask=function(z){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(z.slice(0).reverse()),this.ctx.closePath()},B.prototype.path=function(z){this.ctx.beginPath(),this.formatPath(z),this.ctx.closePath()},B.prototype.formatPath=function(z){var H=this;z.forEach(function(ge,Ne){var ze=No(ge)?ge.start:ge;Ne===0?H.ctx.moveTo(ze.x,ze.y):H.ctx.lineTo(ze.x,ze.y),No(ge)&&H.ctx.bezierCurveTo(ge.startControl.x,ge.startControl.y,ge.endControl.x,ge.endControl.y,ge.end.x,ge.end.y)})},B.prototype.renderRepeat=function(z,H,ge,Ne){this.path(z),this.ctx.fillStyle=H,this.ctx.translate(ge,Ne),this.ctx.fill(),this.ctx.translate(-ge,-Ne)},B.prototype.resizeImage=function(z,H,ge){var Ne;if(z.width===H&&z.height===ge)return z;var ze=(Ne=this.canvas.ownerDocument)!==null&&Ne!==void 0?Ne:document,At=ze.createElement("canvas");At.width=Math.max(1,H),At.height=Math.max(1,ge);var pt=At.getContext("2d");return pt.drawImage(z,0,0,z.width,z.height,0,0,H,ge),At},B.prototype.renderBackgroundImage=function(z){return a(this,void 0,void 0,function(){var H,ge,Ne,ze,At,pt;return o(this,function(Ut){switch(Ut.label){case 0:H=z.styles.backgroundImage.length-1,ge=function(Zt){var hr,$r,Kn,oc,Iu,sd,Eo,Lu,xa,xn,oc,Iu,sd,Eo,Lu,Dn,Bi,di,oi,ea,Ks,us,qn,da,xa,Mi,oc,Do,Xd,Eo,Lu,Id,Iu,sd,Bh,nf,ym,oA,lA,Ph,xm,bm;return o(this,function(Vg){switch(Vg.label){case 0:if(Zt.type!==0)return[3,5];hr=void 0,$r=Zt.url,Vg.label=1;case 1:return Vg.trys.push([1,3,,4]),[4,Ne.context.cache.match($r)];case 2:return hr=Vg.sent(),[3,4];case 3:return Vg.sent(),Ne.context.logger.error("Error loading background-image "+$r),[3,4];case 4:return hr&&(Kn=Rf(z,H,[hr.width,hr.height,hr.width/hr.height]),oc=Kn[0],Iu=Kn[1],sd=Kn[2],Eo=Kn[3],Lu=Kn[4],xa=Ne.ctx.createPattern(Ne.resizeImage(hr,Eo,Lu),"repeat"),Ne.renderRepeat(oc,xa,Iu,sd)),[3,6];case 5:vl(Zt)?(xn=Rf(z,H,[null,null,null]),oc=xn[0],Iu=xn[1],sd=xn[2],Eo=xn[3],Lu=xn[4],Dn=Hc(Zt.angle,Eo,Lu),Bi=Dn[0],di=Dn[1],oi=Dn[2],ea=Dn[3],Ks=Dn[4],us=document.createElement("canvas"),us.width=Eo,us.height=Lu,qn=us.getContext("2d"),da=qn.createLinearGradient(di,ea,oi,Ks),yo(Zt.stops,Bi).forEach(function(mv){return da.addColorStop(mv.stop,_n(mv.color))}),qn.fillStyle=da,qn.fillRect(0,0,Eo,Lu),Eo>0&&Lu>0&&(xa=Ne.ctx.createPattern(us,"repeat"),Ne.renderRepeat(oc,xa,Iu,sd))):iu(Zt)&&(Mi=Rf(z,H,[null,null,null]),oc=Mi[0],Do=Mi[1],Xd=Mi[2],Eo=Mi[3],Lu=Mi[4],Id=Zt.position.length===0?[Hn]:Zt.position,Iu=Gi(Id[0],Eo),sd=Gi(Id[Id.length-1],Lu),Bh=Ga(Zt,Iu,sd,Eo,Lu),nf=Bh[0],ym=Bh[1],nf>0&&ym>0&&(oA=Ne.ctx.createRadialGradient(Do+Iu,Xd+sd,0,Do+Iu,Xd+sd,nf),yo(Zt.stops,nf*2).forEach(function(mv){return oA.addColorStop(mv.stop,_n(mv.color))}),Ne.path(oc),Ne.ctx.fillStyle=oA,nf!==ym?(lA=z.bounds.left+.5*z.bounds.width,Ph=z.bounds.top+.5*z.bounds.height,xm=ym/nf,bm=1/xm,Ne.ctx.save(),Ne.ctx.translate(lA,Ph),Ne.ctx.transform(1,0,0,xm,0,0),Ne.ctx.translate(-lA,-Ph),Ne.ctx.fillRect(Do,bm*(Xd-Ph)+Ph,Eo,Lu*bm),Ne.ctx.restore()):Ne.ctx.fill())),Vg.label=6;case 6:return H--,[2]}})},Ne=this,ze=0,At=z.styles.backgroundImage.slice(0).reverse(),Ut.label=1;case 1:return ze<At.length?(pt=At[ze],[5,ge(pt)]):[3,4];case 2:Ut.sent(),Ut.label=3;case 3:return ze++,[3,1];case 4:return[2]}})})},B.prototype.renderSolidBorder=function(z,H,ge){return a(this,void 0,void 0,function(){return o(this,function(Ne){return this.path(Gy(ge,H)),this.ctx.fillStyle=_n(z),this.ctx.fill(),[2]})})},B.prototype.renderDoubleBorder=function(z,H,ge,Ne){return a(this,void 0,void 0,function(){var ze,At;return o(this,function(pt){switch(pt.label){case 0:return H<3?[4,this.renderSolidBorder(z,ge,Ne)]:[3,2];case 1:return pt.sent(),[2];case 2:return ze=bp(Ne,ge),this.path(ze),this.ctx.fillStyle=_n(z),this.ctx.fill(),At=Zc(Ne,ge),this.path(At),this.ctx.fill(),[2]}})})},B.prototype.renderNodeBackgroundAndBorders=function(z){return a(this,void 0,void 0,function(){var H,ge,Ne,ze,At,pt,Ut,Zt,hr=this;return o(this,function($r){switch($r.label){case 0:return this.applyEffects(z.getEffects(2)),H=z.container.styles,ge=!Ii(H.backgroundColor)||H.backgroundImage.length,Ne=[{style:H.borderTopStyle,color:H.borderTopColor,width:H.borderTopWidth},{style:H.borderRightStyle,color:H.borderRightColor,width:H.borderRightWidth},{style:H.borderBottomStyle,color:H.borderBottomColor,width:H.borderBottomWidth},{style:H.borderLeftStyle,color:H.borderLeftColor,width:H.borderLeftWidth}],ze=Yy(qd(H.backgroundClip,0),z.curves),ge||H.boxShadow.length?(this.ctx.save(),this.path(ze),this.ctx.clip(),Ii(H.backgroundColor)||(this.ctx.fillStyle=_n(H.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(z.container)]):[3,2];case 1:$r.sent(),this.ctx.restore(),H.boxShadow.slice(0).reverse().forEach(function(Kn){hr.ctx.save();var xn=La(z.curves),Dn=Kn.inset?0:sA,Bi=qo(xn,-Dn+(Kn.inset?1:-1)*Kn.spread.number,(Kn.inset?1:-1)*Kn.spread.number,Kn.spread.number*(Kn.inset?-2:2),Kn.spread.number*(Kn.inset?-2:2));Kn.inset?(hr.path(xn),hr.ctx.clip(),hr.mask(Bi)):(hr.mask(xn),hr.ctx.clip(),hr.path(Bi)),hr.ctx.shadowOffsetX=Kn.offsetX.number+Dn,hr.ctx.shadowOffsetY=Kn.offsetY.number,hr.ctx.shadowColor=_n(Kn.color),hr.ctx.shadowBlur=Kn.blur.number,hr.ctx.fillStyle=Kn.inset?_n(Kn.color):"rgba(0,0,0,1)",hr.ctx.fill(),hr.ctx.restore()}),$r.label=2;case 2:At=0,pt=0,Ut=Ne,$r.label=3;case 3:return pt<Ut.length?(Zt=Ut[pt],Zt.style!==0&&!Ii(Zt.color)&&Zt.width>0?Zt.style!==2?[3,5]:[4,this.renderDashedDottedBorder(Zt.color,Zt.width,At,z.curves,2)]:[3,11]):[3,13];case 4:return $r.sent(),[3,11];case 5:return Zt.style!==3?[3,7]:[4,this.renderDashedDottedBorder(Zt.color,Zt.width,At,z.curves,3)];case 6:return $r.sent(),[3,11];case 7:return Zt.style!==4?[3,9]:[4,this.renderDoubleBorder(Zt.color,Zt.width,At,z.curves)];case 8:return $r.sent(),[3,11];case 9:return[4,this.renderSolidBorder(Zt.color,At,z.curves)];case 10:$r.sent(),$r.label=11;case 11:At++,$r.label=12;case 12:return pt++,[3,3];case 13:return[2]}})})},B.prototype.renderDashedDottedBorder=function(z,H,ge,Ne,ze){return a(this,void 0,void 0,function(){var At,pt,Ut,Zt,hr,$r,Kn,xn,Dn,Bi,di,oi,ea,Ks,us,qn,us,qn;return o(this,function(da){return this.ctx.save(),At=Yd(Ne,ge),pt=Gy(Ne,ge),ze===2&&(this.path(pt),this.ctx.clip()),No(pt[0])?(Ut=pt[0].start.x,Zt=pt[0].start.y):(Ut=pt[0].x,Zt=pt[0].y),No(pt[1])?(hr=pt[1].end.x,$r=pt[1].end.y):(hr=pt[1].x,$r=pt[1].y),ge===0||ge===2?Kn=Math.abs(Ut-hr):Kn=Math.abs(Zt-$r),this.ctx.beginPath(),ze===3?this.formatPath(At):this.formatPath(pt.slice(0,2)),xn=H<3?H*3:H*2,Dn=H<3?H*2:H,ze===3&&(xn=H,Dn=H),Bi=!0,Kn<=xn*2?Bi=!1:Kn<=xn*2+Dn?(di=Kn/(2*xn+Dn),xn*=di,Dn*=di):(oi=Math.floor((Kn+Dn)/(xn+Dn)),ea=(Kn-oi*xn)/(oi-1),Ks=(Kn-(oi+1)*xn)/oi,Dn=Ks<=0||Math.abs(Dn-ea)<Math.abs(Dn-Ks)?ea:Ks),Bi&&(ze===3?this.ctx.setLineDash([0,xn+Dn]):this.ctx.setLineDash([xn,Dn])),ze===3?(this.ctx.lineCap="round",this.ctx.lineWidth=H):this.ctx.lineWidth=H*2+1.1,this.ctx.strokeStyle=_n(z),this.ctx.stroke(),this.ctx.setLineDash([]),ze===2&&(No(pt[0])&&(us=pt[3],qn=pt[0],this.ctx.beginPath(),this.formatPath([new gn(us.end.x,us.end.y),new gn(qn.start.x,qn.start.y)]),this.ctx.stroke()),No(pt[1])&&(us=pt[1],qn=pt[2],this.ctx.beginPath(),this.formatPath([new gn(us.end.x,us.end.y),new gn(qn.start.x,qn.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},B.prototype.render=function(z){return a(this,void 0,void 0,function(){var H;return o(this,function(ge){switch(ge.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=_n(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),H=Ky(z),[4,this.renderStack(H)];case 1:return ge.sent(),this.applyEffects([]),[2,this.canvas]}})})},B})(hv),Ep=function(F){return F instanceof Ap||F instanceof Qy?!0:F instanceof Gd&&F.type!==mp&&F.type!==fp},Yy=function(F,B){switch(F){case 0:return La(B);case 2:return nd(B);default:return _l(B)}},Sp=function(F){switch(F){case 1:return"center";case 2:return"right";default:return"left"}},fv=["-apple-system","system-ui"],ya=function(F){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?F.filter(function(B){return fv.indexOf(B)===-1}):F},Aa=(function(F){n(B,F);function B(z,H){var ge=F.call(this,z,H)||this;return ge.canvas=H.canvas?H.canvas:document.createElement("canvas"),ge.ctx=ge.canvas.getContext("2d"),ge.options=H,ge.canvas.width=Math.floor(H.width*H.scale),ge.canvas.height=Math.floor(H.height*H.scale),ge.canvas.style.width=H.width+"px",ge.canvas.style.height=H.height+"px",ge.ctx.scale(ge.options.scale,ge.options.scale),ge.ctx.translate(-H.x,-H.y),ge.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+H.width+"x"+H.height+" at "+H.x+","+H.y+") with scale "+H.scale),ge}return B.prototype.render=function(z){return a(this,void 0,void 0,function(){var H,ge;return o(this,function(Ne){switch(Ne.label){case 0:return H=Cg(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,z),[4,js(H)];case 1:return ge=Ne.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=_n(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(ge,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},B})(hv),js=function(F){return new Promise(function(B,z){var H=new Image;H.onload=function(){B(H)},H.onerror=z,H.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(F))})},Ps=(function(){function F(B){var z=B.id,H=B.enabled;this.id=z,this.enabled=H,this.start=Date.now()}return F.prototype.debug=function(){for(var B=[],z=0;z<arguments.length;z++)B[z]=arguments[z];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,c([this.id,this.getTime()+"ms"],B)):this.info.apply(this,B))},F.prototype.getTime=function(){return Date.now()-this.start},F.prototype.info=function(){for(var B=[],z=0;z<arguments.length;z++)B[z]=arguments[z];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,c([this.id,this.getTime()+"ms"],B))},F.prototype.warn=function(){for(var B=[],z=0;z<arguments.length;z++)B[z]=arguments[z];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,c([this.id,this.getTime()+"ms"],B)):this.info.apply(this,B))},F.prototype.error=function(){for(var B=[],z=0;z<arguments.length;z++)B[z]=arguments[z];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,c([this.id,this.getTime()+"ms"],B)):this.info.apply(this,B))},F.instances={},F})(),Ia=(function(){function F(B,z){var H;this.windowBounds=z,this.instanceName="#"+F.instanceCount++,this.logger=new Ps({id:this.instanceName,enabled:B.logging}),this.cache=(H=B.cache)!==null&&H!==void 0?H:new aa(this,B)}return F.instanceCount=1,F})(),ku=function(F,B){return B===void 0&&(B={}),rf(F,B)};typeof window<"u"&&al.setContext(window);var rf=function(F,B){return a(void 0,void 0,void 0,function(){var z,H,ge,Ne,ze,At,pt,Ut,Zt,hr,$r,Kn,xn,Dn,Bi,di,oi,ea,Ks,us,da,qn,da,xa,Mi,oc,Do,Xd,Eo,Lu,Id,Iu,sd,Bh,nf,ym,oA,lA,Ph,xm;return o(this,function(bm){switch(bm.label){case 0:if(!F||typeof F!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(z=F.ownerDocument,!z)throw new Error("Element is not attached to a Document");if(H=z.defaultView,!H)throw new Error("Document is not attached to a Window");return ge={allowTaint:(xa=B.allowTaint)!==null&&xa!==void 0?xa:!1,imageTimeout:(Mi=B.imageTimeout)!==null&&Mi!==void 0?Mi:15e3,proxy:B.proxy,useCORS:(oc=B.useCORS)!==null&&oc!==void 0?oc:!1},Ne=i({logging:(Do=B.logging)!==null&&Do!==void 0?Do:!0,cache:B.cache},ge),ze={windowWidth:(Xd=B.windowWidth)!==null&&Xd!==void 0?Xd:H.innerWidth,windowHeight:(Eo=B.windowHeight)!==null&&Eo!==void 0?Eo:H.innerHeight,scrollX:(Lu=B.scrollX)!==null&&Lu!==void 0?Lu:H.pageXOffset,scrollY:(Id=B.scrollY)!==null&&Id!==void 0?Id:H.pageYOffset},At=new u(ze.scrollX,ze.scrollY,ze.windowWidth,ze.windowHeight),pt=new Ia(Ne,At),Ut=(Iu=B.foreignObjectRendering)!==null&&Iu!==void 0?Iu:!1,Zt={allowTaint:(sd=B.allowTaint)!==null&&sd!==void 0?sd:!1,onclone:B.onclone,ignoreElements:B.ignoreElements,inlineImages:Ut,copyStyles:Ut},pt.logger.debug("Starting document clone with size "+At.width+"x"+At.height+" scrolled to "+-At.left+","+-At.top),hr=new Ti(pt,F,Zt),$r=hr.clonedReferenceElement,$r?[4,hr.toIFrame(z,At)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return Kn=bm.sent(),xn=Ug($r)||cv($r)?d($r.ownerDocument):l(pt,$r),Dn=xn.width,Bi=xn.height,di=xn.left,oi=xn.top,ea=aA(pt,$r,B.backgroundColor),Ks={canvas:B.canvas,backgroundColor:ea,scale:(nf=(Bh=B.scale)!==null&&Bh!==void 0?Bh:H.devicePixelRatio)!==null&&nf!==void 0?nf:1,x:((ym=B.x)!==null&&ym!==void 0?ym:0)+di,y:((oA=B.y)!==null&&oA!==void 0?oA:0)+oi,width:(lA=B.width)!==null&&lA!==void 0?lA:Math.ceil(Dn),height:(Ph=B.height)!==null&&Ph!==void 0?Ph:Math.ceil(Bi)},Ut?(pt.logger.debug("Document cloned, using foreign object rendering"),da=new Aa(pt,Ks),[4,da.render($r)]):[3,3];case 2:return us=bm.sent(),[3,5];case 3:return pt.logger.debug("Document cloned, element located at "+di+","+oi+" with size "+Dn+"x"+Bi+" using computed rendering"),pt.logger.debug("Starting DOM parsing"),qn=Rg(pt,$r),ea===qn.styles.backgroundColor&&(qn.styles.backgroundColor=Za.TRANSPARENT),pt.logger.debug("Starting renderer for element at "+Ks.x+","+Ks.y+" with size "+Ks.width+"x"+Ks.height),da=new Wy(pt,Ks),[4,da.render(qn)];case 4:us=bm.sent(),bm.label=5;case 5:return(!((xm=B.removeContainer)!==null&&xm!==void 0)||xm)&&(Ti.destroy(Kn)||pt.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),pt.logger.debug("Finished rendering"),[2,us]}})})},aA=function(F,B,z){var H=B.ownerDocument,ge=H.documentElement?Da(F,getComputedStyle(H.documentElement).backgroundColor):Za.TRANSPARENT,Ne=H.body?Da(F,getComputedStyle(H.body).backgroundColor):Za.TRANSPARENT,ze=typeof z=="string"?Da(F,z):z===null?Za.TRANSPARENT:4294967295;return B===H.documentElement?Ii(ge)?Ii(Ne)?ze:Ne:ge:ze};return ku}))})(uj)),uj.exports}var mV;function ZBe(){return mV||(mV=1,(function(t,e){(function(n,i){t.exports=i(XBe())})(self,function(r){return(function(){var n={"./node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js":(function(c,u,l){l.r(u),l.d(u,{default:function(){return d}});function d(f,m){(m==null||m>f.length)&&(m=f.length);for(var p=0,g=Array(m);p<m;p++)g[p]=f[p];return g}}),"./node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js":(function(c,u,l){l.r(u),l.d(u,{default:function(){return d}});function d(f){if(Array.isArray(f))return f}}),"./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js":(function(c,u,l){l.r(u),l.d(u,{default:function(){return f}});function d(m,p,g,y,x,w,_){try{var E=m[w](_),N=E.value}catch(C){return void g(C)}E.done?p(N):Promise.resolve(N).then(y,x)}function f(m){return function(){var p=this,g=arguments;return new Promise(function(y,x){var w=m.apply(p,g);function _(N){d(w,y,x,_,E,"next",N)}function E(N){d(w,y,x,_,E,"throw",N)}_(void 0)})}}}),"./node_modules/@babel/runtime/helpers/esm/defineProperty.js":(function(c,u,l){l.r(u),l.d(u,{default:function(){return f}});var d=l("./node_modules/@babel/runtime/helpers/esm/toPropertyKey.js");function f(m,p,g){return(p=(0,d.default)(p))in m?Object.defineProperty(m,p,{value:g,enumerable:!0,configurable:!0,writable:!0}):m[p]=g,m}}),"./node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js":(function(c,u,l){l.r(u),l.d(u,{default:function(){return d}});function d(f,m){var p=f==null?null:typeof Symbol<"u"&&f[Symbol.iterator]||f["@@iterator"];if(p!=null){var g,y,x,w,_=[],E=!0,N=!1;try{if(x=(p=p.call(f)).next,m===0){if(Object(p)!==p)return;E=!1}else for(;!(E=(g=x.call(p)).done)&&(_.push(g.value),_.length!==m);E=!0);}catch(C){N=!0,y=C}finally{try{if(!E&&p.return!=null&&(w=p.return(),Object(w)!==w))return}finally{if(N)throw y}}return _}}}),"./node_modules/@babel/runtime/helpers/esm/nonIterableRest.js":(function(c,u,l){l.r(u),l.d(u,{default:function(){return d}});function d(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}}),"./node_modules/@babel/runtime/helpers/esm/slicedToArray.js":(function(c,u,l){l.r(u),l.d(u,{default:function(){return g}});var d=l("./node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js"),f=l("./node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js"),m=l("./node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js"),p=l("./node_modules/@babel/runtime/helpers/esm/nonIterableRest.js");function g(y,x){return(0,d.default)(y)||(0,f.default)(y,x)||(0,m.default)(y,x)||(0,p.default)()}}),"./node_modules/@babel/runtime/helpers/esm/toPrimitive.js":(function(c,u,l){l.r(u),l.d(u,{default:function(){return f}});var d=l("./node_modules/@babel/runtime/helpers/esm/typeof.js");function f(m,p){if((0,d.default)(m)!="object"||!m)return m;var g=m[Symbol.toPrimitive];if(g!==void 0){var y=g.call(m,p||"default");if((0,d.default)(y)!="object")return y;throw new TypeError("@@toPrimitive must return a primitive value.")}return(p==="string"?String:Number)(m)}}),"./node_modules/@babel/runtime/helpers/esm/toPropertyKey.js":(function(c,u,l){l.r(u),l.d(u,{default:function(){return m}});var d=l("./node_modules/@babel/runtime/helpers/esm/typeof.js"),f=l("./node_modules/@babel/runtime/helpers/esm/toPrimitive.js");function m(p){var g=(0,f.default)(p,"string");return(0,d.default)(g)=="symbol"?g:g+""}}),"./node_modules/@babel/runtime/helpers/esm/typeof.js":(function(c,u,l){l.r(u),l.d(u,{default:function(){return d}});function d(f){"@babel/helpers - typeof";return d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},d(f)}}),"./node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js":(function(c,u,l){l.r(u),l.d(u,{default:function(){return f}});var d=l("./node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js");function f(m,p){if(m){if(typeof m=="string")return(0,d.default)(m,p);var g={}.toString.call(m).slice(8,-1);return g==="Object"&&m.constructor&&(g=m.constructor.name),g==="Map"||g==="Set"?Array.from(m):g==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(g)?(0,d.default)(m,p):void 0}}}),"./node_modules/canvg/lib/index.es.js":(function(c,u,l){l.r(u),l.d(u,{AElement:function(){return pl},AnimateColorElement:function(){return za},AnimateElement:function(){return Rs},AnimateTransformElement:function(){return hs},BoundingBox:function(){return On},CB1:function(){return Re},CB2:function(){return He},CB3:function(){return Fe},CB4:function(){return ft},Canvg:function(){return Vo},CircleElement:function(){return Ms},ClipPathElement:function(){return Ca},DefsElement:function(){return Nn},DescElement:function(){return zo},Document:function(){return Xa},Element:function(){return Gt},EllipseElement:function(){return Ns},FeColorMatrixElement:function(){return ks},FeCompositeElement:function(){return _a},FeDropShadowElement:function(){return Zn},FeGaussianBlurElement:function(){return Qo},FeMorphologyElement:function(){return fs},FilterElement:function(){return gi},Font:function(){return en},FontElement:function(){return wu},FontFaceElement:function(){return ro},GElement:function(){return Fs},GlyphElement:function(){return Hr},GradientElement:function(){return Qs},ImageElement:function(){return $s},LineElement:function(){return ei},LinearGradientElement:function(){return Us},MarkerElement:function(){return jn},MaskElement:function(){return Ta},Matrix:function(){return Gr},MissingGlyphElement:function(){return Fl},Mouse:function(){return rt},PSEUDO_ZERO:function(){return Ce},Parser:function(){return tr},PathElement:function(){return ln},PathParser:function(){return fn},PatternElement:function(){return ta},Point:function(){return jt},PolygonElement:function(){return as},PolylineElement:function(){return un},Property:function(){return et},QB1:function(){return at},QB2:function(){return De},QB3:function(){return ut},RadialGradientElement:function(){return ns},RectElement:function(){return Cs},RenderedElement:function(){return Jn},Rotate:function(){return Pr},SVGElement:function(){return li},SVGFontLoader:function(){return go},Scale:function(){return tn},Screen:function(){return Xe},Skew:function(){return Xr},SkewX:function(){return Qr},SkewY:function(){return Pn},StopElement:function(){return qs},StyleElement:function(){return no},SymbolElement:function(){return Ll},TRefElement:function(){return nu},TSpanElement:function(){return mn},TextElement:function(){return yn},TextPathElement:function(){return Ws},TitleElement:function(){return Hi},Transform:function(){return ot},Translate:function(){return lr},UnknownElement:function(){return Ir},UseElement:function(){return gl},ViewPort:function(){return Ue},compressSpaces:function(){return E},default:function(){return Vo},getSelectorSpecificity:function(){return Ie},normalizeAttributeName:function(){return U},normalizeColor:function(){return q},parseExternalUrl:function(){return G},presets:function(){return _},toNumbers:function(){return I},trimLeft:function(){return N},trimRight:function(){return C},vectorMagnitude:function(){return be},vectorsAngle:function(){return Pe},vectorsRatio:function(){return ue}}),l("./node_modules/core-js/modules/es.promise.js");var d=l("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js");l("./node_modules/core-js/modules/es.string.match.js"),l("./node_modules/core-js/modules/es.string.replace.js"),l("./node_modules/core-js/modules/es.string.starts-with.js"),l("./node_modules/core-js/modules/es.array.iterator.js"),l("./node_modules/core-js/modules/web.dom-collections.iterator.js");var f=l("./node_modules/@babel/runtime/helpers/esm/defineProperty.js");l("./node_modules/core-js/modules/es.array.reduce.js"),l("./node_modules/core-js/modules/es.string.ends-with.js"),l("./node_modules/core-js/modules/es.string.split.js");var m=l("./node_modules/raf/index.js");l("./node_modules/core-js/modules/es.string.trim.js");var p=l("./node_modules/rgbcolor/index.js");l("./node_modules/core-js/modules/es.array.index-of.js"),l("./node_modules/core-js/modules/es.string.includes.js"),l("./node_modules/core-js/modules/es.array.reverse.js");var g=l("./node_modules/svg-pathdata/lib/SVGPathData.module.js");l("./node_modules/core-js/modules/es.regexp.to-string.js");var y=l("./node_modules/stackblur-canvas/dist/stackblur-es.js");function x(){var{DOMParser:Ht}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},V={window:null,ignoreAnimation:!0,ignoreMouse:!0,DOMParser:Ht,createCanvas(se,ce){return new OffscreenCanvas(se,ce)},createImage(se){return(0,d.default)(function*(){var ce=yield fetch(se),$=yield ce.blob(),K=yield createImageBitmap($);return K})()}};return(typeof DOMParser<"u"||typeof Ht>"u")&&Reflect.deleteProperty(V,"DOMParser"),V}function w(Ht){var{DOMParser:V,canvas:se,fetch:ce}=Ht;return{window:null,ignoreAnimation:!0,ignoreMouse:!0,DOMParser:V,fetch:ce,createCanvas:se.createCanvas,createImage:se.loadImage}}var _=Object.freeze({__proto__:null,offscreen:x,node:w});function E(Ht){return Ht.replace(/(?!\u3000)\s+/gm," ")}function N(Ht){return Ht.replace(/^[\n \t]+/,"")}function C(Ht){return Ht.replace(/[\n \t]+$/,"")}function I(Ht){var V=(Ht||"").match(/-?(\d+(?:\.\d*(?:[eE][+-]?\d+)?)?|\.\d+)(?=\D|$)/gm)||[];return V.map(parseFloat)}var D=/^[A-Z-]+$/;function U(Ht){return D.test(Ht)?Ht.toLowerCase():Ht}function G(Ht){var V=/url\(('([^']+)'|"([^"]+)"|([^'")]+))\)/.exec(Ht)||[];return V[2]||V[3]||V[4]}function q(Ht){if(!Ht.startsWith("rgb"))return Ht;var V=3,se=Ht.replace(/\d+(\.\d+)?/g,(ce,$)=>V--&&$?String(Math.round(parseFloat(ce))):ce);return se}var J=/(\[[^\]]+\])/g,de=/(#[^\s+>~.[:]+)/g,xe=/(\.[^\s+>~.[:]+)/g,we=/(::[^\s+>~.[:]+|:first-line|:first-letter|:before|:after)/gi,ve=/(:[\w-]+\([^)]*\))/gi,ne=/(:[^\s+>~.[:]+)/g,ae=/([^\s+>~.[:]+)/g;function oe(Ht,V){var se=V.exec(Ht);return se?[Ht.replace(V," "),se.length]:[Ht,0]}function Ie(Ht){var V=[0,0,0],se=Ht.replace(/:not\(([^)]*)\)/g,"     $1 ").replace(/{[\s\S]*/gm," "),ce=0;return[se,ce]=oe(se,J),V[1]+=ce,[se,ce]=oe(se,de),V[0]+=ce,[se,ce]=oe(se,xe),V[1]+=ce,[se,ce]=oe(se,we),V[2]+=ce,[se,ce]=oe(se,ve),V[1]+=ce,[se,ce]=oe(se,ne),V[1]+=ce,se=se.replace(/[*\s+>~]/g," ").replace(/[#.]/g," "),[se,ce]=oe(se,ae),V[2]+=ce,V.join("")}var Ce=1e-8;function be(Ht){return Math.sqrt(Math.pow(Ht[0],2)+Math.pow(Ht[1],2))}function ue(Ht,V){return(Ht[0]*V[0]+Ht[1]*V[1])/(be(Ht)*be(V))}function Pe(Ht,V){return(Ht[0]*V[1]<Ht[1]*V[0]?-1:1)*Math.acos(ue(Ht,V))}function Re(Ht){return Ht*Ht*Ht}function He(Ht){return 3*Ht*Ht*(1-Ht)}function Fe(Ht){return 3*Ht*(1-Ht)*(1-Ht)}function ft(Ht){return(1-Ht)*(1-Ht)*(1-Ht)}function at(Ht){return Ht*Ht}function De(Ht){return 2*Ht*(1-Ht)}function ut(Ht){return(1-Ht)*(1-Ht)}class et{constructor(V,se,ce){this.document=V,this.name=se,this.value=ce,this.isNormalizedColor=!1}static empty(V){return new et(V,"EMPTY","")}split(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:" ",{document:se,name:ce}=this;return E(this.getString()).trim().split(V).map($=>new et(se,ce,$))}hasValue(V){var{value:se}=this;return se!==null&&se!==""&&(V||se!==0)&&typeof se<"u"}isString(V){var{value:se}=this,ce=typeof se=="string";return!ce||!V?ce:V.test(se)}isUrlDefinition(){return this.isString(/^url\(/)}isPixels(){if(!this.hasValue())return!1;var V=this.getString();switch(!0){case V.endsWith("px"):case/^[0-9]+$/.test(V):return!0;default:return!1}}setValue(V){return this.value=V,this}getValue(V){return typeof V>"u"||this.hasValue()?this.value:V}getNumber(V){if(!this.hasValue())return typeof V>"u"?0:parseFloat(V);var{value:se}=this,ce=parseFloat(se);return this.isString(/%$/)&&(ce/=100),ce}getString(V){return typeof V>"u"||this.hasValue()?typeof this.value>"u"?"":String(this.value):String(V)}getColor(V){var se=this.getString(V);return this.isNormalizedColor||(this.isNormalizedColor=!0,se=q(se),this.value=se),se}getDpi(){return 96}getRem(){return this.document.rootEmSize}getEm(){return this.document.emSize}getUnits(){return this.getString().replace(/[0-9.-]/g,"")}getPixels(V){var se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!this.hasValue())return 0;var[ce,$]=typeof V=="boolean"?[void 0,V]:[V],{viewPort:K}=this.document.screen;switch(!0){case this.isString(/vmin$/):return this.getNumber()/100*Math.min(K.computeSize("x"),K.computeSize("y"));case this.isString(/vmax$/):return this.getNumber()/100*Math.max(K.computeSize("x"),K.computeSize("y"));case this.isString(/vw$/):return this.getNumber()/100*K.computeSize("x");case this.isString(/vh$/):return this.getNumber()/100*K.computeSize("y");case this.isString(/rem$/):return this.getNumber()*this.getRem();case this.isString(/em$/):return this.getNumber()*this.getEm();case this.isString(/ex$/):return this.getNumber()*this.getEm()/2;case this.isString(/px$/):return this.getNumber();case this.isString(/pt$/):return this.getNumber()*this.getDpi()*.013888888888888888;case this.isString(/pc$/):return this.getNumber()*15;case this.isString(/cm$/):return this.getNumber()*this.getDpi()/2.54;case this.isString(/mm$/):return this.getNumber()*this.getDpi()/25.4;case this.isString(/in$/):return this.getNumber()*this.getDpi();case(this.isString(/%$/)&&$):return this.getNumber()*this.getEm();case this.isString(/%$/):return this.getNumber()*K.computeSize(ce);default:{var ie=this.getNumber();return se&&ie<1?ie*K.computeSize(ce):ie}}}getMilliseconds(){return this.hasValue()?this.isString(/ms$/)?this.getNumber():this.getNumber()*1e3:0}getRadians(){if(!this.hasValue())return 0;switch(!0){case this.isString(/deg$/):return this.getNumber()*(Math.PI/180);case this.isString(/grad$/):return this.getNumber()*(Math.PI/200);case this.isString(/rad$/):return this.getNumber();default:return this.getNumber()*(Math.PI/180)}}getDefinition(){var V=this.getString(),se=/#([^)'"]+)/.exec(V);return se&&(se=se[1]),se||(se=V),this.document.definitions[se]}getFillStyleDefinition(V,se){var ce=this.getDefinition();if(!ce)return null;if(typeof ce.createGradient=="function")return ce.createGradient(this.document.ctx,V,se);if(typeof ce.createPattern=="function"){if(ce.getHrefAttribute().hasValue()){var $=ce.getAttribute("patternTransform");ce=ce.getHrefAttribute().getDefinition(),$.hasValue()&&ce.getAttribute("patternTransform",!0).setValue($.value)}return ce.createPattern(this.document.ctx,V,se)}return null}getTextBaseline(){return this.hasValue()?et.textBaselineMapping[this.getString()]:null}addOpacity(V){for(var se=this.getColor(),ce=se.length,$=0,K=0;K<ce&&(se[K]===","&&$++,$!==3);K++);if(V.hasValue()&&this.isString()&&$!==3){var ie=new p(se);ie.ok&&(ie.alpha=V.getNumber(),se=ie.toRGBA())}return new et(this.document,this.name,se)}}et.textBaselineMapping={baseline:"alphabetic","before-edge":"top","text-before-edge":"top",middle:"middle",central:"middle","after-edge":"bottom","text-after-edge":"bottom",ideographic:"ideographic",alphabetic:"alphabetic",hanging:"hanging",mathematical:"alphabetic"};class Ue{constructor(){this.viewPorts=[]}clear(){this.viewPorts=[]}setCurrent(V,se){this.viewPorts.push({width:V,height:se})}removeCurrent(){this.viewPorts.pop()}getCurrent(){var{viewPorts:V}=this;return V[V.length-1]}get width(){return this.getCurrent().width}get height(){return this.getCurrent().height}computeSize(V){return typeof V=="number"?V:V==="x"?this.width:V==="y"?this.height:Math.sqrt(Math.pow(this.width,2)+Math.pow(this.height,2))/Math.sqrt(2)}}class jt{constructor(V,se){this.x=V,this.y=se}static parse(V){var se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,[ce=se,$=se]=I(V);return new jt(ce,$)}static parseScale(V){var se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,[ce=se,$=ce]=I(V);return new jt(ce,$)}static parsePath(V){for(var se=I(V),ce=se.length,$=[],K=0;K<ce;K+=2)$.push(new jt(se[K],se[K+1]));return $}angleTo(V){return Math.atan2(V.y-this.y,V.x-this.x)}applyTransform(V){var{x:se,y:ce}=this,$=se*V[0]+ce*V[2]+V[4],K=se*V[1]+ce*V[3]+V[5];this.x=$,this.y=K}}class rt{constructor(V){this.screen=V,this.working=!1,this.events=[],this.eventElements=[],this.onClick=this.onClick.bind(this),this.onMouseMove=this.onMouseMove.bind(this)}isWorking(){return this.working}start(){if(!this.working){var{screen:V,onClick:se,onMouseMove:ce}=this,$=V.ctx.canvas;$.onclick=se,$.onmousemove=ce,this.working=!0}}stop(){if(this.working){var V=this.screen.ctx.canvas;this.working=!1,V.onclick=null,V.onmousemove=null}}hasEvents(){return this.working&&this.events.length>0}runEvents(){if(this.working){var{screen:V,events:se,eventElements:ce}=this,{style:$}=V.ctx.canvas;$&&($.cursor=""),se.forEach((K,ie)=>{for(var{run:me}=K,Se=ce[ie];Se;)me(Se),Se=Se.parent}),this.events=[],this.eventElements=[]}}checkPath(V,se){if(!(!this.working||!se)){var{events:ce,eventElements:$}=this;ce.forEach((K,ie)=>{var{x:me,y:Se}=K;!$[ie]&&se.isPointInPath&&se.isPointInPath(me,Se)&&($[ie]=V)})}}checkBoundingBox(V,se){if(!(!this.working||!se)){var{events:ce,eventElements:$}=this;ce.forEach((K,ie)=>{var{x:me,y:Se}=K;!$[ie]&&se.isPointInBox(me,Se)&&($[ie]=V)})}}mapXY(V,se){for(var{window:ce,ctx:$}=this.screen,K=new jt(V,se),ie=$.canvas;ie;)K.x-=ie.offsetLeft,K.y-=ie.offsetTop,ie=ie.offsetParent;return ce.scrollX&&(K.x+=ce.scrollX),ce.scrollY&&(K.y+=ce.scrollY),K}onClick(V){var{x:se,y:ce}=this.mapXY(V.clientX,V.clientY);this.events.push({type:"onclick",x:se,y:ce,run($){$.onClick&&$.onClick()}})}onMouseMove(V){var{x:se,y:ce}=this.mapXY(V.clientX,V.clientY);this.events.push({type:"onmousemove",x:se,y:ce,run($){$.onMouseMove&&$.onMouseMove()}})}}var Ct=typeof window<"u"?window:null,ke=typeof fetch<"u"?fetch.bind(void 0):null;class Xe{constructor(V){var{fetch:se=ke,window:ce=Ct}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.ctx=V,this.FRAMERATE=30,this.MAX_VIRTUAL_PIXELS=3e4,this.CLIENT_WIDTH=800,this.CLIENT_HEIGHT=600,this.viewPort=new Ue,this.mouse=new rt(this),this.animations=[],this.waits=[],this.frameDuration=0,this.isReadyLock=!1,this.isFirstRender=!0,this.intervalId=null,this.window=ce,this.fetch=se}wait(V){this.waits.push(V)}ready(){return this.readyPromise?this.readyPromise:Promise.resolve()}isReady(){if(this.isReadyLock)return!0;var V=this.waits.every(se=>se());return V&&(this.waits=[],this.resolveReady&&this.resolveReady()),this.isReadyLock=V,V}setDefaults(V){V.strokeStyle="rgba(0,0,0,0)",V.lineCap="butt",V.lineJoin="miter",V.miterLimit=4}setViewBox(V){var{document:se,ctx:ce,aspectRatio:$,width:K,desiredWidth:ie,height:me,desiredHeight:Se,minX:Qe=0,minY:ht=0,refX:P,refY:k,clip:M=!1,clipX:W=0,clipY:Z=0}=V,re=E($).replace(/^defer\s/,""),[ye,fe]=re.split(" "),Ae=ye||"xMidYMid",Le=fe||"meet",Ve=K/ie,Ze=me/Se,dt=Math.min(Ve,Ze),je=Math.max(Ve,Ze),St=ie,ct=Se;Le==="meet"&&(St*=dt,ct*=dt),Le==="slice"&&(St*=je,ct*=je);var Nt=new et(se,"refX",P),it=new et(se,"refY",k),Ot=Nt.hasValue()&&it.hasValue();if(Ot&&ce.translate(-dt*Nt.getPixels("x"),-dt*it.getPixels("y")),M){var qt=dt*W,It=dt*Z;ce.beginPath(),ce.moveTo(qt,It),ce.lineTo(K,It),ce.lineTo(K,me),ce.lineTo(qt,me),ce.closePath(),ce.clip()}if(!Ot){var nt=Le==="meet"&&dt===Ze,Vt=Le==="slice"&&je===Ze,Tr=Le==="meet"&&dt===Ve,or=Le==="slice"&&je===Ve;Ae.startsWith("xMid")&&(nt||Vt)&&ce.translate(K/2-St/2,0),Ae.endsWith("YMid")&&(Tr||or)&&ce.translate(0,me/2-ct/2),Ae.startsWith("xMax")&&(nt||Vt)&&ce.translate(K-St,0),Ae.endsWith("YMax")&&(Tr||or)&&ce.translate(0,me-ct)}switch(!0){case Ae==="none":ce.scale(Ve,Ze);break;case Le==="meet":ce.scale(dt,dt);break;case Le==="slice":ce.scale(je,je);break}ce.translate(-Qe,-ht)}start(V){var{enableRedraw:se=!1,ignoreMouse:ce=!1,ignoreAnimation:$=!1,ignoreDimensions:K=!1,ignoreClear:ie=!1,forceRedraw:me,scaleWidth:Se,scaleHeight:Qe,offsetX:ht,offsetY:P}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{FRAMERATE:k,mouse:M}=this,W=1e3/k;if(this.frameDuration=W,this.readyPromise=new Promise(Ae=>{this.resolveReady=Ae}),this.isReady()&&this.render(V,K,ie,Se,Qe,ht,P),!!se){var Z=Date.now(),re=Z,ye=0,fe=()=>{Z=Date.now(),ye=Z-re,ye>=W&&(re=Z-ye%W,this.shouldUpdate($,me)&&(this.render(V,K,ie,Se,Qe,ht,P),M.runEvents())),this.intervalId=m(fe)};ce||M.start(),this.intervalId=m(fe)}}stop(){this.intervalId&&(m.cancel(this.intervalId),this.intervalId=null),this.mouse.stop()}shouldUpdate(V,se){if(!V){var{frameDuration:ce}=this,$=this.animations.reduce((K,ie)=>ie.update(ce)||K,!1);if($)return!0}return!!(typeof se=="function"&&se()||!this.isReadyLock&&this.isReady()||this.mouse.hasEvents())}render(V,se,ce,$,K,ie,me){var{CLIENT_WIDTH:Se,CLIENT_HEIGHT:Qe,viewPort:ht,ctx:P,isFirstRender:k}=this,M=P.canvas;ht.clear(),M.width&&M.height?ht.setCurrent(M.width,M.height):ht.setCurrent(Se,Qe);var W=V.getStyle("width"),Z=V.getStyle("height");!se&&(k||typeof $!="number"&&typeof K!="number")&&(W.hasValue()&&(M.width=W.getPixels("x"),M.style&&(M.style.width="".concat(M.width,"px"))),Z.hasValue()&&(M.height=Z.getPixels("y"),M.style&&(M.style.height="".concat(M.height,"px"))));var re=M.clientWidth||M.width,ye=M.clientHeight||M.height;if(se&&W.hasValue()&&Z.hasValue()&&(re=W.getPixels("x"),ye=Z.getPixels("y")),ht.setCurrent(re,ye),typeof ie=="number"&&V.getAttribute("x",!0).setValue(ie),typeof me=="number"&&V.getAttribute("y",!0).setValue(me),typeof $=="number"||typeof K=="number"){var fe=I(V.getAttribute("viewBox").getString()),Ae=0,Le=0;if(typeof $=="number"){var Ve=V.getStyle("width");Ve.hasValue()?Ae=Ve.getPixels("x")/$:isNaN(fe[2])||(Ae=fe[2]/$)}if(typeof K=="number"){var Ze=V.getStyle("height");Ze.hasValue()?Le=Ze.getPixels("y")/K:isNaN(fe[3])||(Le=fe[3]/K)}Ae||(Ae=Le),Le||(Le=Ae),V.getAttribute("width",!0).setValue($),V.getAttribute("height",!0).setValue(K);var dt=V.getStyle("transform",!0,!0);dt.setValue("".concat(dt.getString()," scale(").concat(1/Ae,", ").concat(1/Le,")"))}ce||P.clearRect(0,0,re,ye),V.render(P),k&&(this.isFirstRender=!1)}}Xe.defaultWindow=Ct,Xe.defaultFetch=ke;var{defaultFetch:mt}=Xe,Jt=typeof DOMParser<"u"?DOMParser:null;class tr{constructor(){var{fetch:V=mt,DOMParser:se=Jt}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.fetch=V,this.DOMParser=se}parse(V){var se=this;return(0,d.default)(function*(){return V.startsWith("<")?se.parseFromString(V):se.load(V)})()}parseFromString(V){var se=new this.DOMParser;try{return this.checkDocument(se.parseFromString(V,"image/svg+xml"))}catch{return this.checkDocument(se.parseFromString(V,"text/xml"))}}checkDocument(V){var se=V.getElementsByTagName("parsererror")[0];if(se)throw new Error(se.textContent);return V}load(V){var se=this;return(0,d.default)(function*(){var ce=yield se.fetch(V),$=yield ce.text();return se.parseFromString($)})()}}class lr{constructor(V,se){this.type="translate",this.point=null,this.point=jt.parse(se)}apply(V){var{x:se,y:ce}=this.point;V.translate(se||0,ce||0)}unapply(V){var{x:se,y:ce}=this.point;V.translate(-1*se||0,-1*ce||0)}applyToPoint(V){var{x:se,y:ce}=this.point;V.applyTransform([1,0,0,1,se||0,ce||0])}}class Pr{constructor(V,se,ce){this.type="rotate",this.angle=null,this.originX=null,this.originY=null,this.cx=0,this.cy=0;var $=I(se);this.angle=new et(V,"angle",$[0]),this.originX=ce[0],this.originY=ce[1],this.cx=$[1]||0,this.cy=$[2]||0}apply(V){var{cx:se,cy:ce,originX:$,originY:K,angle:ie}=this,me=se+$.getPixels("x"),Se=ce+K.getPixels("y");V.translate(me,Se),V.rotate(ie.getRadians()),V.translate(-me,-Se)}unapply(V){var{cx:se,cy:ce,originX:$,originY:K,angle:ie}=this,me=se+$.getPixels("x"),Se=ce+K.getPixels("y");V.translate(me,Se),V.rotate(-1*ie.getRadians()),V.translate(-me,-Se)}applyToPoint(V){var{cx:se,cy:ce,angle:$}=this,K=$.getRadians();V.applyTransform([1,0,0,1,se||0,ce||0]),V.applyTransform([Math.cos(K),Math.sin(K),-Math.sin(K),Math.cos(K),0,0]),V.applyTransform([1,0,0,1,-se||0,-ce||0])}}class tn{constructor(V,se,ce){this.type="scale",this.scale=null,this.originX=null,this.originY=null;var $=jt.parseScale(se);($.x===0||$.y===0)&&($.x=Ce,$.y=Ce),this.scale=$,this.originX=ce[0],this.originY=ce[1]}apply(V){var{scale:{x:se,y:ce},originX:$,originY:K}=this,ie=$.getPixels("x"),me=K.getPixels("y");V.translate(ie,me),V.scale(se,ce||se),V.translate(-ie,-me)}unapply(V){var{scale:{x:se,y:ce},originX:$,originY:K}=this,ie=$.getPixels("x"),me=K.getPixels("y");V.translate(ie,me),V.scale(1/se,1/ce||se),V.translate(-ie,-me)}applyToPoint(V){var{x:se,y:ce}=this.scale;V.applyTransform([se||0,0,0,ce||0,0,0])}}class Gr{constructor(V,se,ce){this.type="matrix",this.matrix=[],this.originX=null,this.originY=null,this.matrix=I(se),this.originX=ce[0],this.originY=ce[1]}apply(V){var{originX:se,originY:ce,matrix:$}=this,K=se.getPixels("x"),ie=ce.getPixels("y");V.translate(K,ie),V.transform($[0],$[1],$[2],$[3],$[4],$[5]),V.translate(-K,-ie)}unapply(V){var{originX:se,originY:ce,matrix:$}=this,K=$[0],ie=$[2],me=$[4],Se=$[1],Qe=$[3],ht=$[5],P=0,k=0,M=1,W=1/(K*(Qe*M-ht*k)-ie*(Se*M-ht*P)+me*(Se*k-Qe*P)),Z=se.getPixels("x"),re=ce.getPixels("y");V.translate(Z,re),V.transform(W*(Qe*M-ht*k),W*(ht*P-Se*M),W*(me*k-ie*M),W*(K*M-me*P),W*(ie*ht-me*Qe),W*(me*Se-K*ht)),V.translate(-Z,-re)}applyToPoint(V){V.applyTransform(this.matrix)}}class Xr extends Gr{constructor(V,se,ce){super(V,se,ce),this.type="skew",this.angle=null,this.angle=new et(V,"angle",se)}}class Qr extends Xr{constructor(V,se,ce){super(V,se,ce),this.type="skewX",this.matrix=[1,0,Math.tan(this.angle.getRadians()),1,0,0]}}class Pn extends Xr{constructor(V,se,ce){super(V,se,ce),this.type="skewY",this.matrix=[1,Math.tan(this.angle.getRadians()),0,1,0,0]}}function wn(Ht){return E(Ht).trim().replace(/\)([a-zA-Z])/g,") $1").replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/)}function yi(Ht){var[V,se]=Ht.split("(");return[V.trim(),se.trim().replace(")","")]}class ot{constructor(V,se,ce){this.document=V,this.transforms=[];var $=wn(se);$.forEach(K=>{if(K!=="none"){var[ie,me]=yi(K),Se=ot.transformTypes[ie];typeof Se<"u"&&this.transforms.push(new Se(this.document,me,ce))}})}static fromElement(V,se){var ce=se.getStyle("transform",!1,!0),[$,K=$]=se.getStyle("transform-origin",!1,!0).split(),ie=[$,K];return ce.hasValue()?new ot(V,ce.getString(),ie):null}apply(V){for(var{transforms:se}=this,ce=se.length,$=0;$<ce;$++)se[$].apply(V)}unapply(V){for(var{transforms:se}=this,ce=se.length,$=ce-1;$>=0;$--)se[$].unapply(V)}applyToPoint(V){for(var{transforms:se}=this,ce=se.length,$=0;$<ce;$++)se[$].applyToPoint(V)}}ot.transformTypes={translate:lr,rotate:Pr,scale:tn,matrix:Gr,skewX:Qr,skewY:Pn};class Gt{constructor(V,se){var ce=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(this.document=V,this.node=se,this.captureTextNodes=ce,this.attributes=Object.create(null),this.styles=Object.create(null),this.stylesSpecificity=Object.create(null),this.animationFrozen=!1,this.animationFrozenValue="",this.parent=null,this.children=[],!(!se||se.nodeType!==1)){if(Array.from(se.attributes).forEach(me=>{var Se=U(me.nodeName);this.attributes[Se]=new et(V,Se,me.value)}),this.addStylesFromStyleDefinition(),this.getAttribute("style").hasValue()){var $=this.getAttribute("style").getString().split(";").map(me=>me.trim());$.forEach(me=>{if(me){var[Se,Qe]=me.split(":").map(ht=>ht.trim());this.styles[Se]=new et(V,Se,Qe)}})}var{definitions:K}=V,ie=this.getAttribute("id");ie.hasValue()&&(K[ie.getString()]||(K[ie.getString()]=this)),Array.from(se.childNodes).forEach(me=>{if(me.nodeType===1)this.addChild(me);else if(ce&&(me.nodeType===3||me.nodeType===4)){var Se=V.createTextNode(me);Se.getText().length>0&&this.addChild(Se)}})}}getAttribute(V){var se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,ce=this.attributes[V];if(!ce&&se){var $=new et(this.document,V,"");return this.attributes[V]=$,$}return ce||et.empty(this.document)}getHrefAttribute(){for(var V in this.attributes)if(V==="href"||V.endsWith(":href"))return this.attributes[V];return et.empty(this.document)}getStyle(V){var se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,ce=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,$=this.styles[V];if($)return $;var K=this.getAttribute(V);if(K!=null&&K.hasValue())return this.styles[V]=K,K;if(!ce){var{parent:ie}=this;if(ie){var me=ie.getStyle(V);if(me!=null&&me.hasValue())return me}}if(se){var Se=new et(this.document,V,"");return this.styles[V]=Se,Se}return $||et.empty(this.document)}render(V){if(!(this.getStyle("display").getString()==="none"||this.getStyle("visibility").getString()==="hidden")){if(V.save(),this.getStyle("mask").hasValue()){var se=this.getStyle("mask").getDefinition();se&&(this.applyEffects(V),se.apply(V,this))}else if(this.getStyle("filter").getValue("none")!=="none"){var ce=this.getStyle("filter").getDefinition();ce&&(this.applyEffects(V),ce.apply(V,this))}else this.setContext(V),this.renderChildren(V),this.clearContext(V);V.restore()}}setContext(V){}applyEffects(V){var se=ot.fromElement(this.document,this);se&&se.apply(V);var ce=this.getStyle("clip-path",!1,!0);if(ce.hasValue()){var $=ce.getDefinition();$&&$.apply(V)}}clearContext(V){}renderChildren(V){this.children.forEach(se=>{se.render(V)})}addChild(V){var se=V instanceof Gt?V:this.document.createElement(V);se.parent=this,Gt.ignoreChildTypes.includes(se.type)||this.children.push(se)}matchesSelector(V){var se,{node:ce}=this;if(typeof ce.matches=="function")return ce.matches(V);var $=(se=ce.getAttribute)===null||se===void 0?void 0:se.call(ce,"class");return!$||$===""?!1:$.split(" ").some(K=>".".concat(K)===V)}addStylesFromStyleDefinition(){var{styles:V,stylesSpecificity:se}=this.document;for(var ce in V)if(!ce.startsWith("@")&&this.matchesSelector(ce)){var $=V[ce],K=se[ce];if($)for(var ie in $){var me=this.stylesSpecificity[ie];typeof me>"u"&&(me="000"),K>=me&&(this.styles[ie]=$[ie],this.stylesSpecificity[ie]=K)}}}removeStyles(V,se){var ce=se.reduce(($,K)=>{var ie=V.getStyle(K);if(!ie.hasValue())return $;var me=ie.getString();return ie.setValue(""),[...$,[K,me]]},[]);return ce}restoreStyles(V,se){se.forEach(ce=>{var[$,K]=ce;V.getStyle($,!0).setValue(K)})}isFirstChild(){var V;return((V=this.parent)===null||V===void 0?void 0:V.children.indexOf(this))===0}}Gt.ignoreChildTypes=["title"];class Ir extends Gt{constructor(V,se,ce){super(V,se,ce)}}function ar(Ht){var V=Ht.trim();return/^('|")/.test(V)?V:'"'.concat(V,'"')}function Qt(Ht){return typeof process>"u"?Ht:Ht.trim().split(",").map(ar).join(",")}function gr(Ht){if(!Ht)return"";var V=Ht.trim().toLowerCase();switch(V){case"normal":case"italic":case"oblique":case"inherit":case"initial":case"unset":return V;default:return/^oblique\s+(-|)\d+deg$/.test(V)?V:""}}function Yr(Ht){if(!Ht)return"";var V=Ht.trim().toLowerCase();switch(V){case"normal":case"bold":case"lighter":case"bolder":case"inherit":case"initial":case"unset":return V;default:return/^[\d.]+$/.test(V)?V:""}}class en{constructor(V,se,ce,$,K,ie){var me=ie?typeof ie=="string"?en.parse(ie):ie:{};this.fontFamily=K||me.fontFamily,this.fontSize=$||me.fontSize,this.fontStyle=V||me.fontStyle,this.fontWeight=ce||me.fontWeight,this.fontVariant=se||me.fontVariant}static parse(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",se=arguments.length>1?arguments[1]:void 0,ce="",$="",K="",ie="",me="",Se=E(V).trim().split(" "),Qe={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1};return Se.forEach(ht=>{switch(!0){case(!Qe.fontStyle&&en.styles.includes(ht)):ht!=="inherit"&&(ce=ht),Qe.fontStyle=!0;break;case(!Qe.fontVariant&&en.variants.includes(ht)):ht!=="inherit"&&($=ht),Qe.fontStyle=!0,Qe.fontVariant=!0;break;case(!Qe.fontWeight&&en.weights.includes(ht)):ht!=="inherit"&&(K=ht),Qe.fontStyle=!0,Qe.fontVariant=!0,Qe.fontWeight=!0;break;case!Qe.fontSize:ht!=="inherit"&&([ie]=ht.split("/")),Qe.fontStyle=!0,Qe.fontVariant=!0,Qe.fontWeight=!0,Qe.fontSize=!0;break;default:ht!=="inherit"&&(me+=ht)}}),new en(ce,$,K,ie,me,se)}toString(){return[gr(this.fontStyle),this.fontVariant,Yr(this.fontWeight),this.fontSize,Qt(this.fontFamily)].join(" ").trim()}}en.styles="normal|italic|oblique|inherit",en.variants="normal|small-caps|inherit",en.weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit";class On{constructor(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Number.NaN,se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.NaN,ce=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Number.NaN,$=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Number.NaN;this.x1=V,this.y1=se,this.x2=ce,this.y2=$,this.addPoint(V,se),this.addPoint(ce,$)}get x(){return this.x1}get y(){return this.y1}get width(){return this.x2-this.x1}get height(){return this.y2-this.y1}addPoint(V,se){typeof V<"u"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=V,this.x2=V),V<this.x1&&(this.x1=V),V>this.x2&&(this.x2=V)),typeof se<"u"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=se,this.y2=se),se<this.y1&&(this.y1=se),se>this.y2&&(this.y2=se))}addX(V){this.addPoint(V,null)}addY(V){this.addPoint(null,V)}addBoundingBox(V){if(V){var{x1:se,y1:ce,x2:$,y2:K}=V;this.addPoint(se,ce),this.addPoint($,K)}}sumCubic(V,se,ce,$,K){return Math.pow(1-V,3)*se+3*Math.pow(1-V,2)*V*ce+3*(1-V)*Math.pow(V,2)*$+Math.pow(V,3)*K}bezierCurveAdd(V,se,ce,$,K){var ie=6*se-12*ce+6*$,me=-3*se+9*ce-9*$+3*K,Se=3*ce-3*se;if(me===0){if(ie===0)return;var Qe=-Se/ie;0<Qe&&Qe<1&&(V?this.addX(this.sumCubic(Qe,se,ce,$,K)):this.addY(this.sumCubic(Qe,se,ce,$,K)));return}var ht=Math.pow(ie,2)-4*Se*me;if(!(ht<0)){var P=(-ie+Math.sqrt(ht))/(2*me);0<P&&P<1&&(V?this.addX(this.sumCubic(P,se,ce,$,K)):this.addY(this.sumCubic(P,se,ce,$,K)));var k=(-ie-Math.sqrt(ht))/(2*me);0<k&&k<1&&(V?this.addX(this.sumCubic(k,se,ce,$,K)):this.addY(this.sumCubic(k,se,ce,$,K)))}}addBezierCurve(V,se,ce,$,K,ie,me,Se){this.addPoint(V,se),this.addPoint(me,Se),this.bezierCurveAdd(!0,V,ce,K,me),this.bezierCurveAdd(!1,se,$,ie,Se)}addQuadraticCurve(V,se,ce,$,K,ie){var me=V+.6666666666666666*(ce-V),Se=se+2/3*($-se),Qe=me+1/3*(K-V),ht=Se+1/3*(ie-se);this.addBezierCurve(V,se,me,Qe,Se,ht,K,ie)}isPointInBox(V,se){var{x1:ce,y1:$,x2:K,y2:ie}=this;return ce<=V&&V<=K&&$<=se&&se<=ie}}class fn extends g.SVGPathData{constructor(V){super(V.replace(/([+\-.])\s+/gm,"$1").replace(/[^MmZzLlHhVvCcSsQqTtAae\d\s.,+-].*/g,"")),this.control=null,this.start=null,this.current=null,this.command=null,this.commands=this.commands,this.i=-1,this.previousCommand=null,this.points=[],this.angles=[]}reset(){this.i=-1,this.command=null,this.previousCommand=null,this.start=new jt(0,0),this.control=new jt(0,0),this.current=new jt(0,0),this.points=[],this.angles=[]}isEnd(){var{i:V,commands:se}=this;return V>=se.length-1}next(){var V=this.commands[++this.i];return this.previousCommand=this.command,this.command=V,V}getPoint(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"x",se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"y",ce=new jt(this.command[V],this.command[se]);return this.makeAbsolute(ce)}getAsControlPoint(V,se){var ce=this.getPoint(V,se);return this.control=ce,ce}getAsCurrentPoint(V,se){var ce=this.getPoint(V,se);return this.current=ce,ce}getReflectedControlPoint(){var V=this.previousCommand.type;if(V!==g.SVGPathData.CURVE_TO&&V!==g.SVGPathData.SMOOTH_CURVE_TO&&V!==g.SVGPathData.QUAD_TO&&V!==g.SVGPathData.SMOOTH_QUAD_TO)return this.current;var{current:{x:se,y:ce},control:{x:$,y:K}}=this,ie=new jt(2*se-$,2*ce-K);return ie}makeAbsolute(V){if(this.command.relative){var{x:se,y:ce}=this.current;V.x+=se,V.y+=ce}return V}addMarker(V,se,ce){var{points:$,angles:K}=this;ce&&K.length>0&&!K[K.length-1]&&(K[K.length-1]=$[$.length-1].angleTo(ce)),this.addMarkerAngle(V,se?se.angleTo(V):null)}addMarkerAngle(V,se){this.points.push(V),this.angles.push(se)}getMarkerPoints(){return this.points}getMarkerAngles(){for(var{angles:V}=this,se=V.length,ce=0;ce<se;ce++)if(!V[ce]){for(var $=ce+1;$<se;$++)if(V[$]){V[ce]=V[$];break}}return V}}class Jn extends Gt{constructor(){super(...arguments),this.modifiedEmSizeStack=!1}calculateOpacity(){for(var V=1,se=this;se;){var ce=se.getStyle("opacity",!1,!0);ce.hasValue(!0)&&(V*=ce.getNumber()),se=se.parent}return V}setContext(V){var se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!se){var ce=this.getStyle("fill"),$=this.getStyle("fill-opacity"),K=this.getStyle("stroke"),ie=this.getStyle("stroke-opacity");if(ce.isUrlDefinition()){var me=ce.getFillStyleDefinition(this,$);me&&(V.fillStyle=me)}else if(ce.hasValue()){ce.getString()==="currentColor"&&ce.setValue(this.getStyle("color").getColor());var Se=ce.getColor();Se!=="inherit"&&(V.fillStyle=Se==="none"?"rgba(0,0,0,0)":Se)}if($.hasValue()){var Qe=new et(this.document,"fill",V.fillStyle).addOpacity($).getColor();V.fillStyle=Qe}if(K.isUrlDefinition()){var ht=K.getFillStyleDefinition(this,ie);ht&&(V.strokeStyle=ht)}else if(K.hasValue()){K.getString()==="currentColor"&&K.setValue(this.getStyle("color").getColor());var P=K.getString();P!=="inherit"&&(V.strokeStyle=P==="none"?"rgba(0,0,0,0)":P)}if(ie.hasValue()){var k=new et(this.document,"stroke",V.strokeStyle).addOpacity(ie).getString();V.strokeStyle=k}var M=this.getStyle("stroke-width");if(M.hasValue()){var W=M.getPixels();V.lineWidth=W||Ce}var Z=this.getStyle("stroke-linecap"),re=this.getStyle("stroke-linejoin"),ye=this.getStyle("stroke-miterlimit"),fe=this.getStyle("stroke-dasharray"),Ae=this.getStyle("stroke-dashoffset");if(Z.hasValue()&&(V.lineCap=Z.getString()),re.hasValue()&&(V.lineJoin=re.getString()),ye.hasValue()&&(V.miterLimit=ye.getNumber()),fe.hasValue()&&fe.getString()!=="none"){var Le=I(fe.getString());typeof V.setLineDash<"u"?V.setLineDash(Le):typeof V.webkitLineDash<"u"?V.webkitLineDash=Le:typeof V.mozDash<"u"&&!(Le.length===1&&Le[0]===0)&&(V.mozDash=Le);var Ve=Ae.getPixels();typeof V.lineDashOffset<"u"?V.lineDashOffset=Ve:typeof V.webkitLineDashOffset<"u"?V.webkitLineDashOffset=Ve:typeof V.mozDashOffset<"u"&&(V.mozDashOffset=Ve)}}if(this.modifiedEmSizeStack=!1,typeof V.font<"u"){var Ze=this.getStyle("font"),dt=this.getStyle("font-style"),je=this.getStyle("font-variant"),St=this.getStyle("font-weight"),ct=this.getStyle("font-size"),Nt=this.getStyle("font-family"),it=new en(dt.getString(),je.getString(),St.getString(),ct.hasValue()?"".concat(ct.getPixels(!0),"px"):"",Nt.getString(),en.parse(Ze.getString(),V.font));dt.setValue(it.fontStyle),je.setValue(it.fontVariant),St.setValue(it.fontWeight),ct.setValue(it.fontSize),Nt.setValue(it.fontFamily),V.font=it.toString(),ct.isPixels()&&(this.document.emSize=ct.getPixels(),this.modifiedEmSizeStack=!0)}se||(this.applyEffects(V),V.globalAlpha=this.calculateOpacity())}clearContext(V){super.clearContext(V),this.modifiedEmSizeStack&&this.document.popEmSize()}}class ln extends Jn{constructor(V,se,ce){super(V,se,ce),this.type="path",this.pathParser=null,this.pathParser=new fn(this.getAttribute("d").getString())}path(V){var{pathParser:se}=this,ce=new On;for(se.reset(),V&&V.beginPath();!se.isEnd();)switch(se.next().type){case fn.MOVE_TO:this.pathM(V,ce);break;case fn.LINE_TO:this.pathL(V,ce);break;case fn.HORIZ_LINE_TO:this.pathH(V,ce);break;case fn.VERT_LINE_TO:this.pathV(V,ce);break;case fn.CURVE_TO:this.pathC(V,ce);break;case fn.SMOOTH_CURVE_TO:this.pathS(V,ce);break;case fn.QUAD_TO:this.pathQ(V,ce);break;case fn.SMOOTH_QUAD_TO:this.pathT(V,ce);break;case fn.ARC:this.pathA(V,ce);break;case fn.CLOSE_PATH:this.pathZ(V,ce);break}return ce}getBoundingBox(V){return this.path()}getMarkers(){var{pathParser:V}=this,se=V.getMarkerPoints(),ce=V.getMarkerAngles(),$=se.map((K,ie)=>[K,ce[ie]]);return $}renderChildren(V){this.path(V),this.document.screen.mouse.checkPath(this,V);var se=this.getStyle("fill-rule");V.fillStyle!==""&&(se.getString("inherit")!=="inherit"?V.fill(se.getString()):V.fill()),V.strokeStyle!==""&&(this.getAttribute("vector-effect").getString()==="non-scaling-stroke"?(V.save(),V.setTransform(1,0,0,1,0,0),V.stroke(),V.restore()):V.stroke());var ce=this.getMarkers();if(ce){var $=ce.length-1,K=this.getStyle("marker-start"),ie=this.getStyle("marker-mid"),me=this.getStyle("marker-end");if(K.isUrlDefinition()){var Se=K.getDefinition(),[Qe,ht]=ce[0];Se.render(V,Qe,ht)}if(ie.isUrlDefinition())for(var P=ie.getDefinition(),k=1;k<$;k++){var[M,W]=ce[k];P.render(V,M,W)}if(me.isUrlDefinition()){var Z=me.getDefinition(),[re,ye]=ce[$];Z.render(V,re,ye)}}}static pathM(V){var se=V.getAsCurrentPoint();return V.start=V.current,{point:se}}pathM(V,se){var{pathParser:ce}=this,{point:$}=ln.pathM(ce),{x:K,y:ie}=$;ce.addMarker($),se.addPoint(K,ie),V&&V.moveTo(K,ie)}static pathL(V){var{current:se}=V,ce=V.getAsCurrentPoint();return{current:se,point:ce}}pathL(V,se){var{pathParser:ce}=this,{current:$,point:K}=ln.pathL(ce),{x:ie,y:me}=K;ce.addMarker(K,$),se.addPoint(ie,me),V&&V.lineTo(ie,me)}static pathH(V){var{current:se,command:ce}=V,$=new jt((ce.relative?se.x:0)+ce.x,se.y);return V.current=$,{current:se,point:$}}pathH(V,se){var{pathParser:ce}=this,{current:$,point:K}=ln.pathH(ce),{x:ie,y:me}=K;ce.addMarker(K,$),se.addPoint(ie,me),V&&V.lineTo(ie,me)}static pathV(V){var{current:se,command:ce}=V,$=new jt(se.x,(ce.relative?se.y:0)+ce.y);return V.current=$,{current:se,point:$}}pathV(V,se){var{pathParser:ce}=this,{current:$,point:K}=ln.pathV(ce),{x:ie,y:me}=K;ce.addMarker(K,$),se.addPoint(ie,me),V&&V.lineTo(ie,me)}static pathC(V){var{current:se}=V,ce=V.getPoint("x1","y1"),$=V.getAsControlPoint("x2","y2"),K=V.getAsCurrentPoint();return{current:se,point:ce,controlPoint:$,currentPoint:K}}pathC(V,se){var{pathParser:ce}=this,{current:$,point:K,controlPoint:ie,currentPoint:me}=ln.pathC(ce);ce.addMarker(me,ie,K),se.addBezierCurve($.x,$.y,K.x,K.y,ie.x,ie.y,me.x,me.y),V&&V.bezierCurveTo(K.x,K.y,ie.x,ie.y,me.x,me.y)}static pathS(V){var{current:se}=V,ce=V.getReflectedControlPoint(),$=V.getAsControlPoint("x2","y2"),K=V.getAsCurrentPoint();return{current:se,point:ce,controlPoint:$,currentPoint:K}}pathS(V,se){var{pathParser:ce}=this,{current:$,point:K,controlPoint:ie,currentPoint:me}=ln.pathS(ce);ce.addMarker(me,ie,K),se.addBezierCurve($.x,$.y,K.x,K.y,ie.x,ie.y,me.x,me.y),V&&V.bezierCurveTo(K.x,K.y,ie.x,ie.y,me.x,me.y)}static pathQ(V){var{current:se}=V,ce=V.getAsControlPoint("x1","y1"),$=V.getAsCurrentPoint();return{current:se,controlPoint:ce,currentPoint:$}}pathQ(V,se){var{pathParser:ce}=this,{current:$,controlPoint:K,currentPoint:ie}=ln.pathQ(ce);ce.addMarker(ie,K,K),se.addQuadraticCurve($.x,$.y,K.x,K.y,ie.x,ie.y),V&&V.quadraticCurveTo(K.x,K.y,ie.x,ie.y)}static pathT(V){var{current:se}=V,ce=V.getReflectedControlPoint();V.control=ce;var $=V.getAsCurrentPoint();return{current:se,controlPoint:ce,currentPoint:$}}pathT(V,se){var{pathParser:ce}=this,{current:$,controlPoint:K,currentPoint:ie}=ln.pathT(ce);ce.addMarker(ie,K,K),se.addQuadraticCurve($.x,$.y,K.x,K.y,ie.x,ie.y),V&&V.quadraticCurveTo(K.x,K.y,ie.x,ie.y)}static pathA(V){var{current:se,command:ce}=V,{rX:$,rY:K,xRot:ie,lArcFlag:me,sweepFlag:Se}=ce,Qe=ie*(Math.PI/180),ht=V.getAsCurrentPoint(),P=new jt(Math.cos(Qe)*(se.x-ht.x)/2+Math.sin(Qe)*(se.y-ht.y)/2,-Math.sin(Qe)*(se.x-ht.x)/2+Math.cos(Qe)*(se.y-ht.y)/2),k=Math.pow(P.x,2)/Math.pow($,2)+Math.pow(P.y,2)/Math.pow(K,2);k>1&&($*=Math.sqrt(k),K*=Math.sqrt(k));var M=(me===Se?-1:1)*Math.sqrt((Math.pow($,2)*Math.pow(K,2)-Math.pow($,2)*Math.pow(P.y,2)-Math.pow(K,2)*Math.pow(P.x,2))/(Math.pow($,2)*Math.pow(P.y,2)+Math.pow(K,2)*Math.pow(P.x,2)));isNaN(M)&&(M=0);var W=new jt(M*$*P.y/K,M*-K*P.x/$),Z=new jt((se.x+ht.x)/2+Math.cos(Qe)*W.x-Math.sin(Qe)*W.y,(se.y+ht.y)/2+Math.sin(Qe)*W.x+Math.cos(Qe)*W.y),re=Pe([1,0],[(P.x-W.x)/$,(P.y-W.y)/K]),ye=[(P.x-W.x)/$,(P.y-W.y)/K],fe=[(-P.x-W.x)/$,(-P.y-W.y)/K],Ae=Pe(ye,fe);return ue(ye,fe)<=-1&&(Ae=Math.PI),ue(ye,fe)>=1&&(Ae=0),{currentPoint:ht,rX:$,rY:K,sweepFlag:Se,xAxisRotation:Qe,centp:Z,a1:re,ad:Ae}}pathA(V,se){var{pathParser:ce}=this,{currentPoint:$,rX:K,rY:ie,sweepFlag:me,xAxisRotation:Se,centp:Qe,a1:ht,ad:P}=ln.pathA(ce),k=1-me?1:-1,M=ht+k*(P/2),W=new jt(Qe.x+K*Math.cos(M),Qe.y+ie*Math.sin(M));if(ce.addMarkerAngle(W,M-k*Math.PI/2),ce.addMarkerAngle($,M-k*Math.PI),se.addPoint($.x,$.y),V&&!isNaN(ht)&&!isNaN(P)){var Z=K>ie?K:ie,re=K>ie?1:K/ie,ye=K>ie?ie/K:1;V.translate(Qe.x,Qe.y),V.rotate(Se),V.scale(re,ye),V.arc(0,0,Z,ht,ht+P,!!(1-me)),V.scale(1/re,1/ye),V.rotate(-Se),V.translate(-Qe.x,-Qe.y)}}static pathZ(V){V.current=V.start}pathZ(V,se){ln.pathZ(this.pathParser),V&&se.x1!==se.x2&&se.y1!==se.y2&&V.closePath()}}class Hr extends ln{constructor(V,se,ce){super(V,se,ce),this.type="glyph",this.horizAdvX=this.getAttribute("horiz-adv-x").getNumber(),this.unicode=this.getAttribute("unicode").getString(),this.arabicForm=this.getAttribute("arabic-form").getString()}}class yn extends Jn{constructor(V,se,ce){super(V,se,new.target===yn?!0:ce),this.type="text",this.x=0,this.y=0,this.measureCache=-1}setContext(V){var se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;super.setContext(V,se);var ce=this.getStyle("dominant-baseline").getTextBaseline()||this.getStyle("alignment-baseline").getTextBaseline();ce&&(V.textBaseline=ce)}initializeCoordinates(){this.x=0,this.y=0,this.leafTexts=[],this.textChunkStart=0,this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY}getBoundingBox(V){if(this.type!=="text")return this.getTElementBoundingBox(V);this.initializeCoordinates(),this.adjustChildCoordinatesRecursive(V);var se=null;return this.children.forEach((ce,$)=>{var K=this.getChildBoundingBox(V,this,this,$);se?se.addBoundingBox(K):se=K}),se}getFontSize(){var{document:V,parent:se}=this,ce=en.parse(V.ctx.font).fontSize,$=se.getStyle("font-size").getNumber(ce);return $}getTElementBoundingBox(V){var se=this.getFontSize();return new On(this.x,this.y-se,this.x+this.measureText(V),this.y)}getGlyph(V,se,ce){var $=se[ce],K=null;if(V.isArabic){var ie=se.length,me=se[ce-1],Se=se[ce+1],Qe="isolated";if((ce===0||me===" ")&&ce<ie-1&&Se!==" "&&(Qe="terminal"),ce>0&&me!==" "&&ce<ie-1&&Se!==" "&&(Qe="medial"),ce>0&&me!==" "&&(ce===ie-1||Se===" ")&&(Qe="initial"),typeof V.glyphs[$]<"u"){var ht=V.glyphs[$];K=ht instanceof Hr?ht:ht[Qe]}}else K=V.glyphs[$];return K||(K=V.missingGlyph),K}getText(){return""}getTextFromNode(V){var se=V||this.node,ce=Array.from(se.parentNode.childNodes),$=ce.indexOf(se),K=ce.length-1,ie=E(se.textContent||"");return $===0&&(ie=N(ie)),$===K&&(ie=C(ie)),ie}renderChildren(V){if(this.type!=="text"){this.renderTElementChildren(V);return}this.initializeCoordinates(),this.adjustChildCoordinatesRecursive(V),this.children.forEach((ce,$)=>{this.renderChild(V,this,this,$)});var{mouse:se}=this.document.screen;se.isWorking()&&se.checkBoundingBox(this,this.getBoundingBox(V))}renderTElementChildren(V){var{document:se,parent:ce}=this,$=this.getText(),K=ce.getStyle("font-family").getDefinition();if(K){for(var{unitsPerEm:ie}=K.fontFace,me=en.parse(se.ctx.font),Se=ce.getStyle("font-size").getNumber(me.fontSize),Qe=ce.getStyle("font-style").getString(me.fontStyle),ht=Se/ie,P=K.isRTL?$.split("").reverse().join(""):$,k=I(ce.getAttribute("dx").getString()),M=P.length,W=0;W<M;W++){var Z=this.getGlyph(K,P,W);V.translate(this.x,this.y),V.scale(ht,-ht);var re=V.lineWidth;V.lineWidth=V.lineWidth*ie/Se,Qe==="italic"&&V.transform(1,0,.4,1,0,0),Z.render(V),Qe==="italic"&&V.transform(1,0,-.4,1,0,0),V.lineWidth=re,V.scale(1/ht,-1/ht),V.translate(-this.x,-this.y),this.x+=Se*(Z.horizAdvX||K.horizAdvX)/ie,typeof k[W]<"u"&&!isNaN(k[W])&&(this.x+=k[W])}return}var{x:ye,y:fe}=this;V.fillStyle&&V.fillText($,ye,fe),V.strokeStyle&&V.strokeText($,ye,fe)}applyAnchoring(){if(!(this.textChunkStart>=this.leafTexts.length)){var V=this.leafTexts[this.textChunkStart],se=V.getStyle("text-anchor").getString("start"),ce=!1,$=0;se==="start"&&!ce||se==="end"&&ce?$=V.x-this.minX:se==="end"&&!ce||se==="start"&&ce?$=V.x-this.maxX:$=V.x-(this.minX+this.maxX)/2;for(var K=this.textChunkStart;K<this.leafTexts.length;K++)this.leafTexts[K].x+=$;this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.textChunkStart=this.leafTexts.length}}adjustChildCoordinatesRecursive(V){this.children.forEach((se,ce)=>{this.adjustChildCoordinatesRecursiveCore(V,this,this,ce)}),this.applyAnchoring()}adjustChildCoordinatesRecursiveCore(V,se,ce,$){var K=ce.children[$];K.children.length>0?K.children.forEach((ie,me)=>{se.adjustChildCoordinatesRecursiveCore(V,se,K,me)}):this.adjustChildCoordinates(V,se,ce,$)}adjustChildCoordinates(V,se,ce,$){var K=ce.children[$];if(typeof K.measureText!="function")return K;V.save(),K.setContext(V,!0);var ie=K.getAttribute("x"),me=K.getAttribute("y"),Se=K.getAttribute("dx"),Qe=K.getAttribute("dy"),ht=K.getStyle("font-family").getDefinition(),P=!!ht&&ht.isRTL;$===0&&(ie.hasValue()||ie.setValue(K.getInheritedAttribute("x")),me.hasValue()||me.setValue(K.getInheritedAttribute("y")),Se.hasValue()||Se.setValue(K.getInheritedAttribute("dx")),Qe.hasValue()||Qe.setValue(K.getInheritedAttribute("dy")));var k=K.measureText(V);return P&&(se.x-=k),ie.hasValue()?(se.applyAnchoring(),K.x=ie.getPixels("x"),Se.hasValue()&&(K.x+=Se.getPixels("x"))):(Se.hasValue()&&(se.x+=Se.getPixels("x")),K.x=se.x),se.x=K.x,P||(se.x+=k),me.hasValue()?(K.y=me.getPixels("y"),Qe.hasValue()&&(K.y+=Qe.getPixels("y"))):(Qe.hasValue()&&(se.y+=Qe.getPixels("y")),K.y=se.y),se.y=K.y,se.leafTexts.push(K),se.minX=Math.min(se.minX,K.x,K.x+k),se.maxX=Math.max(se.maxX,K.x,K.x+k),K.clearContext(V),V.restore(),K}getChildBoundingBox(V,se,ce,$){var K=ce.children[$];if(typeof K.getBoundingBox!="function")return null;var ie=K.getBoundingBox(V);return ie?(K.children.forEach((me,Se)=>{var Qe=se.getChildBoundingBox(V,se,K,Se);ie.addBoundingBox(Qe)}),ie):null}renderChild(V,se,ce,$){var K=ce.children[$];K.render(V),K.children.forEach((ie,me)=>{se.renderChild(V,se,K,me)})}measureText(V){var{measureCache:se}=this;if(~se)return se;var ce=this.getText(),$=this.measureTargetText(V,ce);return this.measureCache=$,$}measureTargetText(V,se){if(!se.length)return 0;var{parent:ce}=this,$=ce.getStyle("font-family").getDefinition();if($){for(var K=this.getFontSize(),ie=$.isRTL?se.split("").reverse().join(""):se,me=I(ce.getAttribute("dx").getString()),Se=ie.length,Qe=0,ht=0;ht<Se;ht++){var P=this.getGlyph($,ie,ht);Qe+=(P.horizAdvX||$.horizAdvX)*K/$.fontFace.unitsPerEm,typeof me[ht]<"u"&&!isNaN(me[ht])&&(Qe+=me[ht])}return Qe}if(!V.measureText)return se.length*10;V.save(),this.setContext(V,!0);var{width:k}=V.measureText(se);return this.clearContext(V),V.restore(),k}getInheritedAttribute(V){for(var se=this;se instanceof yn&&se.isFirstChild();){var ce=se.parent.getAttribute(V);if(ce.hasValue(!0))return ce.getValue("0");se=se.parent}return null}}class mn extends yn{constructor(V,se,ce){super(V,se,new.target===mn?!0:ce),this.type="tspan",this.text=this.children.length>0?"":this.getTextFromNode()}getText(){return this.text}}class Mn extends mn{constructor(){super(...arguments),this.type="textNode"}}class li extends Jn{constructor(){super(...arguments),this.type="svg",this.root=!1}setContext(V){var se,{document:ce}=this,{screen:$,window:K}=ce,ie=V.canvas;if($.setDefaults(V),ie.style&&typeof V.font<"u"&&K&&typeof K.getComputedStyle<"u"){V.font=K.getComputedStyle(ie).getPropertyValue("font");var me=new et(ce,"fontSize",en.parse(V.font).fontSize);me.hasValue()&&(ce.rootEmSize=me.getPixels("y"),ce.emSize=ce.rootEmSize)}this.getAttribute("x").hasValue()||this.getAttribute("x",!0).setValue(0),this.getAttribute("y").hasValue()||this.getAttribute("y",!0).setValue(0);var{width:Se,height:Qe}=$.viewPort;this.getStyle("width").hasValue()||this.getStyle("width",!0).setValue("100%"),this.getStyle("height").hasValue()||this.getStyle("height",!0).setValue("100%"),this.getStyle("color").hasValue()||this.getStyle("color",!0).setValue("black");var ht=this.getAttribute("refX"),P=this.getAttribute("refY"),k=this.getAttribute("viewBox"),M=k.hasValue()?I(k.getString()):null,W=!this.root&&this.getStyle("overflow").getValue("hidden")!=="visible",Z=0,re=0,ye=0,fe=0;M&&(Z=M[0],re=M[1]),this.root||(Se=this.getStyle("width").getPixels("x"),Qe=this.getStyle("height").getPixels("y"),this.type==="marker"&&(ye=Z,fe=re,Z=0,re=0)),$.viewPort.setCurrent(Se,Qe),this.node&&(!this.parent||((se=this.node.parentNode)===null||se===void 0?void 0:se.nodeName)==="foreignObject")&&this.getStyle("transform",!1,!0).hasValue()&&!this.getStyle("transform-origin",!1,!0).hasValue()&&this.getStyle("transform-origin",!0,!0).setValue("50% 50%"),super.setContext(V),V.translate(this.getAttribute("x").getPixels("x"),this.getAttribute("y").getPixels("y")),M&&(Se=M[2],Qe=M[3]),ce.setViewBox({ctx:V,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:$.viewPort.width,desiredWidth:Se,height:$.viewPort.height,desiredHeight:Qe,minX:Z,minY:re,refX:ht.getValue(),refY:P.getValue(),clip:W,clipX:ye,clipY:fe}),M&&($.viewPort.removeCurrent(),$.viewPort.setCurrent(Se,Qe))}clearContext(V){super.clearContext(V),this.document.screen.viewPort.removeCurrent()}resize(V){var se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:V,ce=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,$=this.getAttribute("width",!0),K=this.getAttribute("height",!0),ie=this.getAttribute("viewBox"),me=this.getAttribute("style"),Se=$.getNumber(0),Qe=K.getNumber(0);if(ce)if(typeof ce=="string")this.getAttribute("preserveAspectRatio",!0).setValue(ce);else{var ht=this.getAttribute("preserveAspectRatio");ht.hasValue()&&ht.setValue(ht.getString().replace(/^\s*(\S.*\S)\s*$/,"$1"))}if($.setValue(V),K.setValue(se),ie.hasValue()||ie.setValue("0 0 ".concat(Se||V," ").concat(Qe||se)),me.hasValue()){var P=this.getStyle("width"),k=this.getStyle("height");P.hasValue()&&P.setValue("".concat(V,"px")),k.hasValue()&&k.setValue("".concat(se,"px"))}}}class Cs extends ln{constructor(){super(...arguments),this.type="rect"}path(V){var se=this.getAttribute("x").getPixels("x"),ce=this.getAttribute("y").getPixels("y"),$=this.getStyle("width",!1,!0).getPixels("x"),K=this.getStyle("height",!1,!0).getPixels("y"),ie=this.getAttribute("rx"),me=this.getAttribute("ry"),Se=ie.getPixels("x"),Qe=me.getPixels("y");if(ie.hasValue()&&!me.hasValue()&&(Qe=Se),me.hasValue()&&!ie.hasValue()&&(Se=Qe),Se=Math.min(Se,$/2),Qe=Math.min(Qe,K/2),V){var ht=4*((Math.sqrt(2)-1)/3);V.beginPath(),K>0&&$>0&&(V.moveTo(se+Se,ce),V.lineTo(se+$-Se,ce),V.bezierCurveTo(se+$-Se+ht*Se,ce,se+$,ce+Qe-ht*Qe,se+$,ce+Qe),V.lineTo(se+$,ce+K-Qe),V.bezierCurveTo(se+$,ce+K-Qe+ht*Qe,se+$-Se+ht*Se,ce+K,se+$-Se,ce+K),V.lineTo(se+Se,ce+K),V.bezierCurveTo(se+Se-ht*Se,ce+K,se,ce+K-Qe+ht*Qe,se,ce+K-Qe),V.lineTo(se,ce+Qe),V.bezierCurveTo(se,ce+Qe-ht*Qe,se+Se-ht*Se,ce,se+Se,ce),V.closePath())}return new On(se,ce,se+$,ce+K)}getMarkers(){return null}}class Ms extends ln{constructor(){super(...arguments),this.type="circle"}path(V){var se=this.getAttribute("cx").getPixels("x"),ce=this.getAttribute("cy").getPixels("y"),$=this.getAttribute("r").getPixels();return V&&$>0&&(V.beginPath(),V.arc(se,ce,$,0,Math.PI*2,!1),V.closePath()),new On(se-$,ce-$,se+$,ce+$)}getMarkers(){return null}}class Ns extends ln{constructor(){super(...arguments),this.type="ellipse"}path(V){var se=4*((Math.sqrt(2)-1)/3),ce=this.getAttribute("rx").getPixels("x"),$=this.getAttribute("ry").getPixels("y"),K=this.getAttribute("cx").getPixels("x"),ie=this.getAttribute("cy").getPixels("y");return V&&ce>0&&$>0&&(V.beginPath(),V.moveTo(K+ce,ie),V.bezierCurveTo(K+ce,ie+se*$,K+se*ce,ie+$,K,ie+$),V.bezierCurveTo(K-se*ce,ie+$,K-ce,ie+se*$,K-ce,ie),V.bezierCurveTo(K-ce,ie-se*$,K-se*ce,ie-$,K,ie-$),V.bezierCurveTo(K+se*ce,ie-$,K+ce,ie-se*$,K+ce,ie),V.closePath()),new On(K-ce,ie-$,K+ce,ie+$)}getMarkers(){return null}}class ei extends ln{constructor(){super(...arguments),this.type="line"}getPoints(){return[new jt(this.getAttribute("x1").getPixels("x"),this.getAttribute("y1").getPixels("y")),new jt(this.getAttribute("x2").getPixels("x"),this.getAttribute("y2").getPixels("y"))]}path(V){var[{x:se,y:ce},{x:$,y:K}]=this.getPoints();return V&&(V.beginPath(),V.moveTo(se,ce),V.lineTo($,K)),new On(se,ce,$,K)}getMarkers(){var[V,se]=this.getPoints(),ce=V.angleTo(se);return[[V,ce],[se,ce]]}}class un extends ln{constructor(V,se,ce){super(V,se,ce),this.type="polyline",this.points=[],this.points=jt.parsePath(this.getAttribute("points").getString())}path(V){var{points:se}=this,[{x:ce,y:$}]=se,K=new On(ce,$);return V&&(V.beginPath(),V.moveTo(ce,$)),se.forEach(ie=>{var{x:me,y:Se}=ie;K.addPoint(me,Se),V&&V.lineTo(me,Se)}),K}getMarkers(){var{points:V}=this,se=V.length-1,ce=[];return V.forEach(($,K)=>{K!==se&&ce.push([$,$.angleTo(V[K+1])])}),ce.length>0&&ce.push([V[V.length-1],ce[ce.length-1][1]]),ce}}class as extends un{constructor(){super(...arguments),this.type="polygon"}path(V){var se=super.path(V),[{x:ce,y:$}]=this.points;return V&&(V.lineTo(ce,$),V.closePath()),se}}class ta extends Gt{constructor(){super(...arguments),this.type="pattern"}createPattern(V,se,ce){var $=this.getStyle("width").getPixels("x",!0),K=this.getStyle("height").getPixels("y",!0),ie=new li(this.document,null);ie.attributes.viewBox=new et(this.document,"viewBox",this.getAttribute("viewBox").getValue()),ie.attributes.width=new et(this.document,"width","".concat($,"px")),ie.attributes.height=new et(this.document,"height","".concat(K,"px")),ie.attributes.transform=new et(this.document,"transform",this.getAttribute("patternTransform").getValue()),ie.children=this.children;var me=this.document.createCanvas($,K),Se=me.getContext("2d"),Qe=this.getAttribute("x"),ht=this.getAttribute("y");Qe.hasValue()&&ht.hasValue()&&Se.translate(Qe.getPixels("x",!0),ht.getPixels("y",!0)),ce.hasValue()?this.styles["fill-opacity"]=ce:Reflect.deleteProperty(this.styles,"fill-opacity");for(var P=-1;P<=1;P++)for(var k=-1;k<=1;k++)Se.save(),ie.attributes.x=new et(this.document,"x",P*me.width),ie.attributes.y=new et(this.document,"y",k*me.height),ie.render(Se),Se.restore();var M=V.createPattern(me,"repeat");return M}}class jn extends Gt{constructor(){super(...arguments),this.type="marker"}render(V,se,ce){if(se){var{x:$,y:K}=se,ie=this.getAttribute("orient").getString("auto"),me=this.getAttribute("markerUnits").getString("strokeWidth");V.translate($,K),ie==="auto"&&V.rotate(ce),me==="strokeWidth"&&V.scale(V.lineWidth,V.lineWidth),V.save();var Se=new li(this.document,null);Se.type=this.type,Se.attributes.viewBox=new et(this.document,"viewBox",this.getAttribute("viewBox").getValue()),Se.attributes.refX=new et(this.document,"refX",this.getAttribute("refX").getValue()),Se.attributes.refY=new et(this.document,"refY",this.getAttribute("refY").getValue()),Se.attributes.width=new et(this.document,"width",this.getAttribute("markerWidth").getValue()),Se.attributes.height=new et(this.document,"height",this.getAttribute("markerHeight").getValue()),Se.attributes.overflow=new et(this.document,"overflow",this.getAttribute("overflow").getValue()),Se.attributes.fill=new et(this.document,"fill",this.getAttribute("fill").getColor("black")),Se.attributes.stroke=new et(this.document,"stroke",this.getAttribute("stroke").getValue("none")),Se.children=this.children,Se.render(V),V.restore(),me==="strokeWidth"&&V.scale(1/V.lineWidth,1/V.lineWidth),ie==="auto"&&V.rotate(-ce),V.translate(-$,-K)}}}class Nn extends Gt{constructor(){super(...arguments),this.type="defs"}render(){}}class Fs extends Jn{constructor(){super(...arguments),this.type="g"}getBoundingBox(V){var se=new On;return this.children.forEach(ce=>{se.addBoundingBox(ce.getBoundingBox(V))}),se}}class Qs extends Gt{constructor(V,se,ce){super(V,se,ce),this.attributesToInherit=["gradientUnits"],this.stops=[];var{stops:$,children:K}=this;K.forEach(ie=>{ie.type==="stop"&&$.push(ie)})}getGradientUnits(){return this.getAttribute("gradientUnits").getString("objectBoundingBox")}createGradient(V,se,ce){var $=this;this.getHrefAttribute().hasValue()&&($=this.getHrefAttribute().getDefinition(),this.inheritStopContainer($));var{stops:K}=$,ie=this.getGradient(V,se);if(!ie)return this.addParentOpacity(ce,K[K.length-1].color);if(K.forEach(re=>{ie.addColorStop(re.offset,this.addParentOpacity(ce,re.color))}),this.getAttribute("gradientTransform").hasValue()){var{document:me}=this,{MAX_VIRTUAL_PIXELS:Se,viewPort:Qe}=me.screen,[ht]=Qe.viewPorts,P=new Cs(me,null);P.attributes.x=new et(me,"x",-Se/3),P.attributes.y=new et(me,"y",-Se/3),P.attributes.width=new et(me,"width",Se),P.attributes.height=new et(me,"height",Se);var k=new Fs(me,null);k.attributes.transform=new et(me,"transform",this.getAttribute("gradientTransform").getValue()),k.children=[P];var M=new li(me,null);M.attributes.x=new et(me,"x",0),M.attributes.y=new et(me,"y",0),M.attributes.width=new et(me,"width",ht.width),M.attributes.height=new et(me,"height",ht.height),M.children=[k];var W=me.createCanvas(ht.width,ht.height),Z=W.getContext("2d");return Z.fillStyle=ie,M.render(Z),Z.createPattern(W,"no-repeat")}return ie}inheritStopContainer(V){this.attributesToInherit.forEach(se=>{!this.getAttribute(se).hasValue()&&V.getAttribute(se).hasValue()&&this.getAttribute(se,!0).setValue(V.getAttribute(se).getValue())})}addParentOpacity(V,se){if(V.hasValue()){var ce=new et(this.document,"color",se);return ce.addOpacity(V).getColor()}return se}}class Us extends Qs{constructor(V,se,ce){super(V,se,ce),this.type="linearGradient",this.attributesToInherit.push("x1","y1","x2","y2")}getGradient(V,se){var ce=this.getGradientUnits()==="objectBoundingBox",$=ce?se.getBoundingBox(V):null;if(ce&&!$)return null;!this.getAttribute("x1").hasValue()&&!this.getAttribute("y1").hasValue()&&!this.getAttribute("x2").hasValue()&&!this.getAttribute("y2").hasValue()&&(this.getAttribute("x1",!0).setValue(0),this.getAttribute("y1",!0).setValue(0),this.getAttribute("x2",!0).setValue(1),this.getAttribute("y2",!0).setValue(0));var K=ce?$.x+$.width*this.getAttribute("x1").getNumber():this.getAttribute("x1").getPixels("x"),ie=ce?$.y+$.height*this.getAttribute("y1").getNumber():this.getAttribute("y1").getPixels("y"),me=ce?$.x+$.width*this.getAttribute("x2").getNumber():this.getAttribute("x2").getPixels("x"),Se=ce?$.y+$.height*this.getAttribute("y2").getNumber():this.getAttribute("y2").getPixels("y");return K===me&&ie===Se?null:V.createLinearGradient(K,ie,me,Se)}}class ns extends Qs{constructor(V,se,ce){super(V,se,ce),this.type="radialGradient",this.attributesToInherit.push("cx","cy","r","fx","fy","fr")}getGradient(V,se){var ce=this.getGradientUnits()==="objectBoundingBox",$=se.getBoundingBox(V);if(ce&&!$)return null;this.getAttribute("cx").hasValue()||this.getAttribute("cx",!0).setValue("50%"),this.getAttribute("cy").hasValue()||this.getAttribute("cy",!0).setValue("50%"),this.getAttribute("r").hasValue()||this.getAttribute("r",!0).setValue("50%");var K=ce?$.x+$.width*this.getAttribute("cx").getNumber():this.getAttribute("cx").getPixels("x"),ie=ce?$.y+$.height*this.getAttribute("cy").getNumber():this.getAttribute("cy").getPixels("y"),me=K,Se=ie;this.getAttribute("fx").hasValue()&&(me=ce?$.x+$.width*this.getAttribute("fx").getNumber():this.getAttribute("fx").getPixels("x")),this.getAttribute("fy").hasValue()&&(Se=ce?$.y+$.height*this.getAttribute("fy").getNumber():this.getAttribute("fy").getPixels("y"));var Qe=ce?($.width+$.height)/2*this.getAttribute("r").getNumber():this.getAttribute("r").getPixels(),ht=this.getAttribute("fr").getPixels();return V.createRadialGradient(me,Se,ht,K,ie,Qe)}}class qs extends Gt{constructor(V,se,ce){super(V,se,ce),this.type="stop";var $=Math.max(0,Math.min(1,this.getAttribute("offset").getNumber())),K=this.getStyle("stop-opacity"),ie=this.getStyle("stop-color",!0);ie.getString()===""&&ie.setValue("#000"),K.hasValue()&&(ie=ie.addOpacity(K)),this.offset=$,this.color=ie.getColor()}}class Rs extends Gt{constructor(V,se,ce){super(V,se,ce),this.type="animate",this.duration=0,this.initialValue=null,this.initialUnits="",this.removed=!1,this.frozen=!1,V.screen.animations.push(this),this.begin=this.getAttribute("begin").getMilliseconds(),this.maxDuration=this.begin+this.getAttribute("dur").getMilliseconds(),this.from=this.getAttribute("from"),this.to=this.getAttribute("to"),this.values=new et(V,"values",null);var $=this.getAttribute("values");$.hasValue()&&this.values.setValue($.getString().split(";"))}getProperty(){var V=this.getAttribute("attributeType").getString(),se=this.getAttribute("attributeName").getString();return V==="CSS"?this.parent.getStyle(se,!0):this.parent.getAttribute(se,!0)}calcValue(){var{initialUnits:V}=this,{progress:se,from:ce,to:$}=this.getProgress(),K=ce.getNumber()+($.getNumber()-ce.getNumber())*se;return V==="%"&&(K*=100),"".concat(K).concat(V)}update(V){var{parent:se}=this,ce=this.getProperty();if(this.initialValue||(this.initialValue=ce.getString(),this.initialUnits=ce.getUnits()),this.duration>this.maxDuration){var $=this.getAttribute("fill").getString("remove");if(this.getAttribute("repeatCount").getString()==="indefinite"||this.getAttribute("repeatDur").getString()==="indefinite")this.duration=0;else if($==="freeze"&&!this.frozen)this.frozen=!0,se.animationFrozen=!0,se.animationFrozenValue=ce.getString();else if($==="remove"&&!this.removed)return this.removed=!0,ce.setValue(se.animationFrozen?se.animationFrozenValue:this.initialValue),!0;return!1}this.duration+=V;var K=!1;if(this.begin<this.duration){var ie=this.calcValue(),me=this.getAttribute("type");if(me.hasValue()){var Se=me.getString();ie="".concat(Se,"(").concat(ie,")")}ce.setValue(ie),K=!0}return K}getProgress(){var{document:V,values:se}=this,ce={progress:(this.duration-this.begin)/(this.maxDuration-this.begin)};if(se.hasValue()){var $=ce.progress*(se.getValue().length-1),K=Math.floor($),ie=Math.ceil($);ce.from=new et(V,"from",parseFloat(se.getValue()[K])),ce.to=new et(V,"to",parseFloat(se.getValue()[ie])),ce.progress=($-K)/(ie-K)}else ce.from=this.from,ce.to=this.to;return ce}}class za extends Rs{constructor(){super(...arguments),this.type="animateColor"}calcValue(){var{progress:V,from:se,to:ce}=this.getProgress(),$=new p(se.getColor()),K=new p(ce.getColor());if($.ok&&K.ok){var ie=$.r+(K.r-$.r)*V,me=$.g+(K.g-$.g)*V,Se=$.b+(K.b-$.b)*V;return"rgb(".concat(Math.floor(ie),", ").concat(Math.floor(me),", ").concat(Math.floor(Se),")")}return this.getAttribute("from").getColor()}}class hs extends Rs{constructor(){super(...arguments),this.type="animateTransform"}calcValue(){var{progress:V,from:se,to:ce}=this.getProgress(),$=I(se.getString()),K=I(ce.getString()),ie=$.map((me,Se)=>{var Qe=K[Se];return me+(Qe-me)*V}).join(" ");return ie}}class wu extends Gt{constructor(V,se,ce){super(V,se,ce),this.type="font",this.glyphs=Object.create(null),this.horizAdvX=this.getAttribute("horiz-adv-x").getNumber();var{definitions:$}=V,{children:K}=this;for(var ie of K)switch(ie.type){case"font-face":{this.fontFace=ie;var me=ie.getStyle("font-family");me.hasValue()&&($[me.getString()]=this);break}case"missing-glyph":this.missingGlyph=ie;break;case"glyph":{var Se=ie;Se.arabicForm?(this.isRTL=!0,this.isArabic=!0,typeof this.glyphs[Se.unicode]>"u"&&(this.glyphs[Se.unicode]=Object.create(null)),this.glyphs[Se.unicode][Se.arabicForm]=Se):this.glyphs[Se.unicode]=Se;break}}}render(){}}class ro extends Gt{constructor(V,se,ce){super(V,se,ce),this.type="font-face",this.ascent=this.getAttribute("ascent").getNumber(),this.descent=this.getAttribute("descent").getNumber(),this.unitsPerEm=this.getAttribute("units-per-em").getNumber()}}class Fl extends ln{constructor(){super(...arguments),this.type="missing-glyph",this.horizAdvX=0}}class nu extends yn{constructor(){super(...arguments),this.type="tref"}getText(){var V=this.getHrefAttribute().getDefinition();if(V){var se=V.children[0];if(se)return se.getText()}return""}}class pl extends yn{constructor(V,se,ce){super(V,se,ce),this.type="a";var{childNodes:$}=se,K=$[0],ie=$.length>0&&Array.from($).every(me=>me.nodeType===3);this.hasText=ie,this.text=ie?this.getTextFromNode(K):""}getText(){return this.text}renderChildren(V){if(this.hasText){super.renderChildren(V);var{document:se,x:ce,y:$}=this,{mouse:K}=se.screen,ie=new et(se,"fontSize",en.parse(se.ctx.font).fontSize);K.isWorking()&&K.checkBoundingBox(this,new On(ce,$-ie.getPixels("y"),ce+this.measureText(V),$))}else if(this.children.length>0){var me=new Fs(this.document,null);me.children=this.children,me.parent=this,me.render(V)}}onClick(){var{window:V}=this.document;V&&V.open(this.getHrefAttribute().getString())}onMouseMove(){var V=this.document.ctx;V.canvas.style.cursor="pointer"}}function ra(Ht,V){var se=Object.keys(Ht);if(Object.getOwnPropertySymbols){var ce=Object.getOwnPropertySymbols(Ht);V&&(ce=ce.filter(function($){return Object.getOwnPropertyDescriptor(Ht,$).enumerable})),se.push.apply(se,ce)}return se}function qa(Ht){for(var V=1;V<arguments.length;V++){var se=arguments[V]!=null?arguments[V]:{};V%2?ra(Object(se),!0).forEach(function(ce){(0,f.default)(Ht,ce,se[ce])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ht,Object.getOwnPropertyDescriptors(se)):ra(Object(se)).forEach(function(ce){Object.defineProperty(Ht,ce,Object.getOwnPropertyDescriptor(se,ce))})}return Ht}class Ws extends yn{constructor(V,se,ce){super(V,se,ce),this.type="textPath",this.textWidth=0,this.textHeight=0,this.pathLength=-1,this.glyphInfo=null,this.letterSpacingCache=[],this.measuresCache=new Map([["",0]]);var $=this.getHrefAttribute().getDefinition();this.text=this.getTextFromNode(),this.dataArray=this.parsePathData($)}getText(){return this.text}path(V){var{dataArray:se}=this;V&&V.beginPath(),se.forEach(ce=>{var{type:$,points:K}=ce;switch($){case fn.LINE_TO:V&&V.lineTo(K[0],K[1]);break;case fn.MOVE_TO:V&&V.moveTo(K[0],K[1]);break;case fn.CURVE_TO:V&&V.bezierCurveTo(K[0],K[1],K[2],K[3],K[4],K[5]);break;case fn.QUAD_TO:V&&V.quadraticCurveTo(K[0],K[1],K[2],K[3]);break;case fn.ARC:{var[ie,me,Se,Qe,ht,P,k,M]=K,W=Se>Qe?Se:Qe,Z=Se>Qe?1:Se/Qe,re=Se>Qe?Qe/Se:1;V&&(V.translate(ie,me),V.rotate(k),V.scale(Z,re),V.arc(0,0,W,ht,ht+P,!!(1-M)),V.scale(1/Z,1/re),V.rotate(-k),V.translate(-ie,-me));break}case fn.CLOSE_PATH:V&&V.closePath();break}})}renderChildren(V){this.setTextData(V),V.save();var se=this.parent.getStyle("text-decoration").getString(),ce=this.getFontSize(),{glyphInfo:$}=this,K=V.fillStyle;se==="underline"&&V.beginPath(),$.forEach((ie,me)=>{var{p0:Se,p1:Qe,rotation:ht,text:P}=ie;V.save(),V.translate(Se.x,Se.y),V.rotate(ht),V.fillStyle&&V.fillText(P,0,0),V.strokeStyle&&V.strokeText(P,0,0),V.restore(),se==="underline"&&(me===0&&V.moveTo(Se.x,Se.y+ce/8),V.lineTo(Qe.x,Qe.y+ce/5))}),se==="underline"&&(V.lineWidth=ce/20,V.strokeStyle=K,V.stroke(),V.closePath()),V.restore()}getLetterSpacingAt(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.letterSpacingCache[V]||0}findSegmentToFitChar(V,se,ce,$,K,ie,me,Se,Qe){var ht=ie,P=this.measureText(V,Se);Se===" "&&se==="justify"&&ce<$&&(P+=($-ce)/K),Qe>-1&&(ht+=this.getLetterSpacingAt(Qe));var k=this.textHeight/20,M=this.getEquidistantPointOnPath(ht,k,0),W=this.getEquidistantPointOnPath(ht+P,k,0),Z={p0:M,p1:W},re=M&&W?Math.atan2(W.y-M.y,W.x-M.x):0;if(me){var ye=Math.cos(Math.PI/2+re)*me,fe=Math.cos(-re)*me;Z.p0=qa(qa({},M),{},{x:M.x+ye,y:M.y+fe}),Z.p1=qa(qa({},W),{},{x:W.x+ye,y:W.y+fe})}return ht+=P,{offset:ht,segment:Z,rotation:re}}measureText(V,se){var{measuresCache:ce}=this,$=se||this.getText();if(ce.has($))return ce.get($);var K=this.measureTargetText(V,$);return ce.set($,K),K}setTextData(V){if(!this.glyphInfo){var se=this.getText(),ce=se.split(""),$=se.split(" ").length-1,K=this.parent.getAttribute("dx").split().map(Le=>Le.getPixels("x")),ie=this.parent.getAttribute("dy").getPixels("y"),me=this.parent.getStyle("text-anchor").getString("start"),Se=this.getStyle("letter-spacing"),Qe=this.parent.getStyle("letter-spacing"),ht=0;!Se.hasValue()||Se.getValue()==="inherit"?ht=Qe.getPixels():Se.hasValue()&&Se.getValue()!=="initial"&&Se.getValue()!=="unset"&&(ht=Se.getPixels());var P=[],k=se.length;this.letterSpacingCache=P;for(var M=0;M<k;M++)P.push(typeof K[M]<"u"?K[M]:ht);var W=P.reduce((Le,Ve,Ze)=>Ze===0?0:Le+Ve||0,0),Z=this.measureText(V),re=Math.max(Z+W,0);this.textWidth=Z,this.textHeight=this.getFontSize(),this.glyphInfo=[];var ye=this.getPathLength(),fe=this.getStyle("startOffset").getNumber(0)*ye,Ae=0;(me==="middle"||me==="center")&&(Ae=-re/2),(me==="end"||me==="right")&&(Ae=-re),Ae+=fe,ce.forEach((Le,Ve)=>{var{offset:Ze,segment:dt,rotation:je}=this.findSegmentToFitChar(V,me,re,ye,$,Ae,ie,Le,Ve);Ae=Ze,!(!dt.p0||!dt.p1)&&this.glyphInfo.push({text:ce[Ve],p0:dt.p0,p1:dt.p1,rotation:je})})}}parsePathData(V){if(this.pathLength=-1,!V)return[];var se=[],{pathParser:ce}=V;for(ce.reset();!ce.isEnd();){var{current:$}=ce,K=$?$.x:0,ie=$?$.y:0,me=ce.next(),Se=me.type,Qe=[];switch(me.type){case fn.MOVE_TO:this.pathM(ce,Qe);break;case fn.LINE_TO:Se=this.pathL(ce,Qe);break;case fn.HORIZ_LINE_TO:Se=this.pathH(ce,Qe);break;case fn.VERT_LINE_TO:Se=this.pathV(ce,Qe);break;case fn.CURVE_TO:this.pathC(ce,Qe);break;case fn.SMOOTH_CURVE_TO:Se=this.pathS(ce,Qe);break;case fn.QUAD_TO:this.pathQ(ce,Qe);break;case fn.SMOOTH_QUAD_TO:Se=this.pathT(ce,Qe);break;case fn.ARC:Qe=this.pathA(ce);break;case fn.CLOSE_PATH:ln.pathZ(ce);break}me.type!==fn.CLOSE_PATH?se.push({type:Se,points:Qe,start:{x:K,y:ie},pathLength:this.calcLength(K,ie,Se,Qe)}):se.push({type:fn.CLOSE_PATH,points:[],pathLength:0})}return se}pathM(V,se){var{x:ce,y:$}=ln.pathM(V).point;se.push(ce,$)}pathL(V,se){var{x:ce,y:$}=ln.pathL(V).point;return se.push(ce,$),fn.LINE_TO}pathH(V,se){var{x:ce,y:$}=ln.pathH(V).point;return se.push(ce,$),fn.LINE_TO}pathV(V,se){var{x:ce,y:$}=ln.pathV(V).point;return se.push(ce,$),fn.LINE_TO}pathC(V,se){var{point:ce,controlPoint:$,currentPoint:K}=ln.pathC(V);se.push(ce.x,ce.y,$.x,$.y,K.x,K.y)}pathS(V,se){var{point:ce,controlPoint:$,currentPoint:K}=ln.pathS(V);return se.push(ce.x,ce.y,$.x,$.y,K.x,K.y),fn.CURVE_TO}pathQ(V,se){var{controlPoint:ce,currentPoint:$}=ln.pathQ(V);se.push(ce.x,ce.y,$.x,$.y)}pathT(V,se){var{controlPoint:ce,currentPoint:$}=ln.pathT(V);return se.push(ce.x,ce.y,$.x,$.y),fn.QUAD_TO}pathA(V){var{rX:se,rY:ce,sweepFlag:$,xAxisRotation:K,centp:ie,a1:me,ad:Se}=ln.pathA(V);return $===0&&Se>0&&(Se-=2*Math.PI),$===1&&Se<0&&(Se+=2*Math.PI),[ie.x,ie.y,se,ce,me,Se,K,$]}calcLength(V,se,ce,$){var K=0,ie=null,me=null,Se=0;switch(ce){case fn.LINE_TO:return this.getLineLength(V,se,$[0],$[1]);case fn.CURVE_TO:for(K=0,ie=this.getPointOnCubicBezier(0,V,se,$[0],$[1],$[2],$[3],$[4],$[5]),Se=.01;Se<=1;Se+=.01)me=this.getPointOnCubicBezier(Se,V,se,$[0],$[1],$[2],$[3],$[4],$[5]),K+=this.getLineLength(ie.x,ie.y,me.x,me.y),ie=me;return K;case fn.QUAD_TO:for(K=0,ie=this.getPointOnQuadraticBezier(0,V,se,$[0],$[1],$[2],$[3]),Se=.01;Se<=1;Se+=.01)me=this.getPointOnQuadraticBezier(Se,V,se,$[0],$[1],$[2],$[3]),K+=this.getLineLength(ie.x,ie.y,me.x,me.y),ie=me;return K;case fn.ARC:{K=0;var Qe=$[4],ht=$[5],P=$[4]+ht,k=Math.PI/180;if(Math.abs(Qe-P)<k&&(k=Math.abs(Qe-P)),ie=this.getPointOnEllipticalArc($[0],$[1],$[2],$[3],Qe,0),ht<0)for(Se=Qe-k;Se>P;Se-=k)me=this.getPointOnEllipticalArc($[0],$[1],$[2],$[3],Se,0),K+=this.getLineLength(ie.x,ie.y,me.x,me.y),ie=me;else for(Se=Qe+k;Se<P;Se+=k)me=this.getPointOnEllipticalArc($[0],$[1],$[2],$[3],Se,0),K+=this.getLineLength(ie.x,ie.y,me.x,me.y),ie=me;return me=this.getPointOnEllipticalArc($[0],$[1],$[2],$[3],P,0),K+=this.getLineLength(ie.x,ie.y,me.x,me.y),K}}return 0}getPointOnLine(V,se,ce,$,K){var ie=arguments.length>5&&arguments[5]!==void 0?arguments[5]:se,me=arguments.length>6&&arguments[6]!==void 0?arguments[6]:ce,Se=(K-ce)/($-se+Ce),Qe=Math.sqrt(V*V/(1+Se*Se));$<se&&(Qe*=-1);var ht=Se*Qe,P=null;if($===se)P={x:ie,y:me+ht};else if((me-ce)/(ie-se+Ce)===Se)P={x:ie+Qe,y:me+ht};else{var k=0,M=0,W=this.getLineLength(se,ce,$,K);if(W<Ce)return null;var Z=(ie-se)*($-se)+(me-ce)*(K-ce);Z/=W*W,k=se+Z*($-se),M=ce+Z*(K-ce);var re=this.getLineLength(ie,me,k,M),ye=Math.sqrt(V*V-re*re);Qe=Math.sqrt(ye*ye/(1+Se*Se)),$<se&&(Qe*=-1),ht=Se*Qe,P={x:k+Qe,y:M+ht}}return P}getPointOnPath(V){var se=this.getPathLength(),ce=0,$=null;if(V<-5e-5||V-5e-5>se)return null;var{dataArray:K}=this;for(var ie of K){if(ie&&(ie.pathLength<5e-5||ce+ie.pathLength+5e-5<V)){ce+=ie.pathLength;continue}var me=V-ce,Se=0;switch(ie.type){case fn.LINE_TO:$=this.getPointOnLine(me,ie.start.x,ie.start.y,ie.points[0],ie.points[1],ie.start.x,ie.start.y);break;case fn.ARC:{var Qe=ie.points[4],ht=ie.points[5],P=ie.points[4]+ht;if(Se=Qe+me/ie.pathLength*ht,ht<0&&Se<P||ht>=0&&Se>P)break;$=this.getPointOnEllipticalArc(ie.points[0],ie.points[1],ie.points[2],ie.points[3],Se,ie.points[6]);break}case fn.CURVE_TO:Se=me/ie.pathLength,Se>1&&(Se=1),$=this.getPointOnCubicBezier(Se,ie.start.x,ie.start.y,ie.points[0],ie.points[1],ie.points[2],ie.points[3],ie.points[4],ie.points[5]);break;case fn.QUAD_TO:Se=me/ie.pathLength,Se>1&&(Se=1),$=this.getPointOnQuadraticBezier(Se,ie.start.x,ie.start.y,ie.points[0],ie.points[1],ie.points[2],ie.points[3]);break}if($)return $;break}return null}getLineLength(V,se,ce,$){return Math.sqrt((ce-V)*(ce-V)+($-se)*($-se))}getPathLength(){return this.pathLength===-1&&(this.pathLength=this.dataArray.reduce((V,se)=>se.pathLength>0?V+se.pathLength:V,0)),this.pathLength}getPointOnCubicBezier(V,se,ce,$,K,ie,me,Se,Qe){var ht=Se*Re(V)+ie*He(V)+$*Fe(V)+se*ft(V),P=Qe*Re(V)+me*He(V)+K*Fe(V)+ce*ft(V);return{x:ht,y:P}}getPointOnQuadraticBezier(V,se,ce,$,K,ie,me){var Se=ie*at(V)+$*De(V)+se*ut(V),Qe=me*at(V)+K*De(V)+ce*ut(V);return{x:Se,y:Qe}}getPointOnEllipticalArc(V,se,ce,$,K,ie){var me=Math.cos(ie),Se=Math.sin(ie),Qe={x:ce*Math.cos(K),y:$*Math.sin(K)};return{x:V+(Qe.x*me-Qe.y*Se),y:se+(Qe.x*Se+Qe.y*me)}}buildEquidistantCache(V,se){var ce=this.getPathLength(),$=se||.25,K=V||ce/100;if(!this.equidistantCache||this.equidistantCache.step!==K||this.equidistantCache.precision!==$){this.equidistantCache={step:K,precision:$,points:[]};for(var ie=0,me=0;me<=ce;me+=$){var Se=this.getPointOnPath(me),Qe=this.getPointOnPath(me+$);!Se||!Qe||(ie+=this.getLineLength(Se.x,Se.y,Qe.x,Qe.y),ie>=K&&(this.equidistantCache.points.push({x:Se.x,y:Se.y,distance:me}),ie-=K))}}}getEquidistantPointOnPath(V,se,ce){if(this.buildEquidistantCache(se,ce),V<0||V-this.getPathLength()>5e-5)return null;var $=Math.round(V/this.getPathLength()*(this.equidistantCache.points.length-1));return this.equidistantCache.points[$]||null}}var wa=/^\s*data:(([^/,;]+\/[^/,;]+)(?:;([^,;=]+=[^,;=]+))?)?(?:;(base64))?,(.*)$/i;class $s extends Jn{constructor(V,se,ce){super(V,se,ce),this.type="image",this.loaded=!1;var $=this.getHrefAttribute().getString();if($){var K=$.endsWith(".svg")||/^\s*data:image\/svg\+xml/i.test($);V.images.push(this),K?this.loadSvg($):this.loadImage($),this.isSvg=K}}loadImage(V){var se=this;return(0,d.default)(function*(){try{var ce=yield se.document.createImage(V);se.image=ce}catch($){console.error('Error while loading image "'.concat(V,'":'),$)}se.loaded=!0})()}loadSvg(V){var se=this;return(0,d.default)(function*(){var ce=wa.exec(V);if(ce){var $=ce[5];ce[4]==="base64"?se.image=atob($):se.image=decodeURIComponent($)}else try{var K=yield se.document.fetch(V),ie=yield K.text();se.image=ie}catch(me){console.error('Error while loading image "'.concat(V,'":'),me)}se.loaded=!0})()}renderChildren(V){var{document:se,image:ce,loaded:$}=this,K=this.getAttribute("x").getPixels("x"),ie=this.getAttribute("y").getPixels("y"),me=this.getStyle("width").getPixels("x"),Se=this.getStyle("height").getPixels("y");if(!(!$||!ce||!me||!Se)){if(V.save(),V.translate(K,ie),this.isSvg){var Qe=se.canvg.forkString(V,this.image,{ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:0,offsetY:0,scaleWidth:me,scaleHeight:Se});Qe.document.documentElement.parent=this,Qe.render()}else{var ht=this.image;se.setViewBox({ctx:V,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:me,desiredWidth:ht.width,height:Se,desiredHeight:ht.height}),this.loaded&&(typeof ht.complete>"u"||ht.complete)&&V.drawImage(ht,0,0)}V.restore()}}getBoundingBox(){var V=this.getAttribute("x").getPixels("x"),se=this.getAttribute("y").getPixels("y"),ce=this.getStyle("width").getPixels("x"),$=this.getStyle("height").getPixels("y");return new On(V,se,V+ce,se+$)}}class Ll extends Jn{constructor(){super(...arguments),this.type="symbol"}render(V){}}class go{constructor(V){this.document=V,this.loaded=!1,V.fonts.push(this)}load(V,se){var ce=this;return(0,d.default)(function*(){try{var{document:$}=ce,K=yield $.canvg.parser.load(se),ie=K.getElementsByTagName("font");Array.from(ie).forEach(me=>{var Se=$.createElement(me);$.definitions[V]=Se})}catch(me){console.error('Error while loading font "'.concat(se,'":'),me)}ce.loaded=!0})()}}class no extends Gt{constructor(V,se,ce){super(V,se,ce),this.type="style";var $=E(Array.from(se.childNodes).map(ie=>ie.textContent).join("").replace(/(\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,"").replace(/@import.*;/g,"")),K=$.split("}");K.forEach(ie=>{var me=ie.trim();if(me){var Se=me.split("{"),Qe=Se[0].split(","),ht=Se[1].split(";");Qe.forEach(P=>{var k=P.trim();if(k){var M=V.styles[k]||{};if(ht.forEach(re=>{var ye=re.indexOf(":"),fe=re.substr(0,ye).trim(),Ae=re.substr(ye+1,re.length-ye).trim();fe&&Ae&&(M[fe]=new et(V,fe,Ae))}),V.styles[k]=M,V.stylesSpecificity[k]=Ie(k),k==="@font-face"){var W=M["font-family"].getString().replace(/"|'/g,""),Z=M.src.getString().split(",");Z.forEach(re=>{if(re.indexOf('format("svg")')>0){var ye=G(re);ye&&new go(V).load(W,ye)}})}}})}})}}no.parseExternalUrl=G;class gl extends Jn{constructor(){super(...arguments),this.type="use"}setContext(V){super.setContext(V);var se=this.getAttribute("x"),ce=this.getAttribute("y");se.hasValue()&&V.translate(se.getPixels("x"),0),ce.hasValue()&&V.translate(0,ce.getPixels("y"))}path(V){var{element:se}=this;se&&se.path(V)}renderChildren(V){var{document:se,element:ce}=this;if(ce){var $=ce;if(ce.type==="symbol"&&($=new li(se,null),$.attributes.viewBox=new et(se,"viewBox",ce.getAttribute("viewBox").getString()),$.attributes.preserveAspectRatio=new et(se,"preserveAspectRatio",ce.getAttribute("preserveAspectRatio").getString()),$.attributes.overflow=new et(se,"overflow",ce.getAttribute("overflow").getString()),$.children=ce.children,ce.styles.opacity=new et(se,"opacity",this.calculateOpacity())),$.type==="svg"){var K=this.getStyle("width",!1,!0),ie=this.getStyle("height",!1,!0);K.hasValue()&&($.attributes.width=new et(se,"width",K.getString())),ie.hasValue()&&($.attributes.height=new et(se,"height",ie.getString()))}var me=$.parent;$.parent=this,$.render(V),$.parent=me}}getBoundingBox(V){var{element:se}=this;return se?se.getBoundingBox(V):null}elementTransform(){var{document:V,element:se}=this;return ot.fromElement(V,se)}get element(){return this.cachedElement||(this.cachedElement=this.getHrefAttribute().getDefinition()),this.cachedElement}}function Ul(Ht,V,se,ce,$,K){return Ht[se*ce*4+V*4+K]}function mc(Ht,V,se,ce,$,K,ie){Ht[se*ce*4+V*4+K]=ie}function zs(Ht,V,se){var ce=Ht[V];return ce*se}function ci(Ht,V,se,ce){return V+Math.cos(Ht)*se+Math.sin(Ht)*ce}class ks extends Gt{constructor(V,se,ce){super(V,se,ce),this.type="feColorMatrix";var $=I(this.getAttribute("values").getString());switch(this.getAttribute("type").getString("matrix")){case"saturate":{var K=$[0];$=[.213+.787*K,.715-.715*K,.072-.072*K,0,0,.213-.213*K,.715+.285*K,.072-.072*K,0,0,.213-.213*K,.715-.715*K,.072+.928*K,0,0,0,0,0,1,0,0,0,0,0,1];break}case"hueRotate":{var ie=$[0]*Math.PI/180;$=[ci(ie,.213,.787,-.213),ci(ie,.715,-.715,-.715),ci(ie,.072,-.072,.928),0,0,ci(ie,.213,-.213,.143),ci(ie,.715,.285,.14),ci(ie,.072,-.072,-.283),0,0,ci(ie,.213,-.213,-.787),ci(ie,.715,-.715,.715),ci(ie,.072,.928,.072),0,0,0,0,0,1,0,0,0,0,0,1];break}case"luminanceToAlpha":$=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2125,.7154,.0721,0,0,0,0,0,0,1];break}this.matrix=$,this.includeOpacity=this.getAttribute("includeOpacity").hasValue()}apply(V,se,ce,$,K){for(var{includeOpacity:ie,matrix:me}=this,Se=V.getImageData(0,0,$,K),Qe=0;Qe<K;Qe++)for(var ht=0;ht<$;ht++){var P=Ul(Se.data,ht,Qe,$,K,0),k=Ul(Se.data,ht,Qe,$,K,1),M=Ul(Se.data,ht,Qe,$,K,2),W=Ul(Se.data,ht,Qe,$,K,3),Z=zs(me,0,P)+zs(me,1,k)+zs(me,2,M)+zs(me,3,W)+zs(me,4,1),re=zs(me,5,P)+zs(me,6,k)+zs(me,7,M)+zs(me,8,W)+zs(me,9,1),ye=zs(me,10,P)+zs(me,11,k)+zs(me,12,M)+zs(me,13,W)+zs(me,14,1),fe=zs(me,15,P)+zs(me,16,k)+zs(me,17,M)+zs(me,18,W)+zs(me,19,1);ie&&(Z=0,re=0,ye=0,fe*=W/255),mc(Se.data,ht,Qe,$,K,0,Z),mc(Se.data,ht,Qe,$,K,1,re),mc(Se.data,ht,Qe,$,K,2,ye),mc(Se.data,ht,Qe,$,K,3,fe)}V.clearRect(0,0,$,K),V.putImageData(Se,0,0)}}class Ta extends Gt{constructor(){super(...arguments),this.type="mask"}apply(V,se){var{document:ce}=this,$=this.getAttribute("x").getPixels("x"),K=this.getAttribute("y").getPixels("y"),ie=this.getStyle("width").getPixels("x"),me=this.getStyle("height").getPixels("y");if(!ie&&!me){var Se=new On;this.children.forEach(W=>{Se.addBoundingBox(W.getBoundingBox(V))}),$=Math.floor(Se.x1),K=Math.floor(Se.y1),ie=Math.floor(Se.width),me=Math.floor(Se.height)}var Qe=this.removeStyles(se,Ta.ignoreStyles),ht=ce.createCanvas($+ie,K+me),P=ht.getContext("2d");ce.screen.setDefaults(P),this.renderChildren(P),new ks(ce,{nodeType:1,childNodes:[],attributes:[{nodeName:"type",value:"luminanceToAlpha"},{nodeName:"includeOpacity",value:"true"}]}).apply(P,0,0,$+ie,K+me);var k=ce.createCanvas($+ie,K+me),M=k.getContext("2d");ce.screen.setDefaults(M),se.render(M),M.globalCompositeOperation="destination-in",M.fillStyle=P.createPattern(ht,"no-repeat"),M.fillRect(0,0,$+ie,K+me),V.fillStyle=M.createPattern(k,"no-repeat"),V.fillRect(0,0,$+ie,K+me),this.restoreStyles(se,Qe)}render(V){}}Ta.ignoreStyles=["mask","transform","clip-path"];var Va=()=>{};class Ca extends Gt{constructor(){super(...arguments),this.type="clipPath"}apply(V){var{document:se}=this,ce=Reflect.getPrototypeOf(V),{beginPath:$,closePath:K}=V;ce&&(ce.beginPath=Va,ce.closePath=Va),Reflect.apply($,V,[]),this.children.forEach(ie=>{if(!(typeof ie.path>"u")){var me=typeof ie.elementTransform<"u"?ie.elementTransform():null;me||(me=ot.fromElement(se,ie)),me&&me.apply(V),ie.path(V),ce&&(ce.closePath=K),me&&me.unapply(V)}}),Reflect.apply(K,V,[]),V.clip(),ce&&(ce.beginPath=$,ce.closePath=K)}render(V){}}class gi extends Gt{constructor(){super(...arguments),this.type="filter"}apply(V,se){var{document:ce,children:$}=this,K=se.getBoundingBox(V);if(K){var ie=0,me=0;$.forEach(ye=>{var fe=ye.extraFilterDistance||0;ie=Math.max(ie,fe),me=Math.max(me,fe)});var Se=Math.floor(K.width),Qe=Math.floor(K.height),ht=Se+2*ie,P=Qe+2*me;if(!(ht<1||P<1)){var k=Math.floor(K.x),M=Math.floor(K.y),W=this.removeStyles(se,gi.ignoreStyles),Z=ce.createCanvas(ht,P),re=Z.getContext("2d");ce.screen.setDefaults(re),re.translate(-k+ie,-M+me),se.render(re),$.forEach(ye=>{typeof ye.apply=="function"&&ye.apply(re,0,0,ht,P)}),V.drawImage(Z,0,0,ht,P,k-ie,M-me,ht,P),this.restoreStyles(se,W)}}}render(V){}}gi.ignoreStyles=["filter","transform","clip-path"];class Zn extends Gt{constructor(V,se,ce){super(V,se,ce),this.type="feDropShadow",this.addStylesFromStyleDefinition()}apply(V,se,ce,$,K){}}class fs extends Gt{constructor(){super(...arguments),this.type="feMorphology"}apply(V,se,ce,$,K){}}class _a extends Gt{constructor(){super(...arguments),this.type="feComposite"}apply(V,se,ce,$,K){}}class Qo extends Gt{constructor(V,se,ce){super(V,se,ce),this.type="feGaussianBlur",this.blurRadius=Math.floor(this.getAttribute("stdDeviation").getNumber()),this.extraFilterDistance=this.blurRadius}apply(V,se,ce,$,K){var{document:ie,blurRadius:me}=this,Se=ie.window?ie.window.document.body:null,Qe=V.canvas;Qe.id=ie.getUniqueId(),Se&&(Qe.style.display="none",Se.appendChild(Qe)),(0,y.canvasRGBA)(Qe,se,ce,$,K,me),Se&&Se.removeChild(Qe)}}class Hi extends Gt{constructor(){super(...arguments),this.type="title"}}class zo extends Gt{constructor(){super(...arguments),this.type="desc"}}var Ea={svg:li,rect:Cs,circle:Ms,ellipse:Ns,line:ei,polyline:un,polygon:as,path:ln,pattern:ta,marker:jn,defs:Nn,linearGradient:Us,radialGradient:ns,stop:qs,animate:Rs,animateColor:za,animateTransform:hs,font:wu,"font-face":ro,"missing-glyph":Fl,glyph:Hr,text:yn,tspan:mn,tref:nu,a:pl,textPath:Ws,image:$s,g:Fs,symbol:Ll,style:no,use:gl,mask:Ta,clipPath:Ca,filter:gi,feDropShadow:Zn,feMorphology:fs,feComposite:_a,feColorMatrix:ks,feGaussianBlur:Qo,title:Hi,desc:zo};function Xs(Ht,V){var se=Object.keys(Ht);if(Object.getOwnPropertySymbols){var ce=Object.getOwnPropertySymbols(Ht);V&&(ce=ce.filter(function($){return Object.getOwnPropertyDescriptor(Ht,$).enumerable})),se.push.apply(se,ce)}return se}function ms(Ht){for(var V=1;V<arguments.length;V++){var se=arguments[V]!=null?arguments[V]:{};V%2?Xs(Object(se),!0).forEach(function(ce){(0,f.default)(Ht,ce,se[ce])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ht,Object.getOwnPropertyDescriptors(se)):Xs(Object(se)).forEach(function(ce){Object.defineProperty(Ht,ce,Object.getOwnPropertyDescriptor(se,ce))})}return Ht}function jo(Ht,V){var se=document.createElement("canvas");return se.width=Ht,se.height=V,se}function Ka(Ht){return Vs.apply(this,arguments)}function Vs(){return Vs=(0,d.default)(function*(Ht){var V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,se=document.createElement("img");return V&&(se.crossOrigin="Anonymous"),new Promise((ce,$)=>{se.onload=()=>{ce(se)},se.onerror=(K,ie,me,Se,Qe)=>{$(Qe)},se.src=Ht})}),Vs.apply(this,arguments)}class Xa{constructor(V){var{rootEmSize:se=12,emSize:ce=12,createCanvas:$=Xa.createCanvas,createImage:K=Xa.createImage,anonymousCrossOrigin:ie}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.canvg=V,this.definitions=Object.create(null),this.styles=Object.create(null),this.stylesSpecificity=Object.create(null),this.images=[],this.fonts=[],this.emSizeStack=[],this.uniqueId=0,this.screen=V.screen,this.rootEmSize=se,this.emSize=ce,this.createCanvas=$,this.createImage=this.bindCreateImage(K,ie),this.screen.wait(this.isImagesLoaded.bind(this)),this.screen.wait(this.isFontsLoaded.bind(this))}bindCreateImage(V,se){return typeof se=="boolean"?(ce,$)=>V(ce,typeof $=="boolean"?$:se):V}get window(){return this.screen.window}get fetch(){return this.screen.fetch}get ctx(){return this.screen.ctx}get emSize(){var{emSizeStack:V}=this;return V[V.length-1]}set emSize(V){var{emSizeStack:se}=this;se.push(V)}popEmSize(){var{emSizeStack:V}=this;V.pop()}getUniqueId(){return"canvg".concat(++this.uniqueId)}isImagesLoaded(){return this.images.every(V=>V.loaded)}isFontsLoaded(){return this.fonts.every(V=>V.loaded)}createDocumentElement(V){var se=this.createElement(V.documentElement);return se.root=!0,se.addStylesFromStyleDefinition(),this.documentElement=se,se}createElement(V){var se=V.nodeName.replace(/^[^:]+:/,""),ce=Xa.elementTypes[se];return typeof ce<"u"?new ce(this,V):new Ir(this,V)}createTextNode(V){return new Mn(this,V)}setViewBox(V){this.screen.setViewBox(ms({document:this},V))}}Xa.createCanvas=jo,Xa.createImage=Ka,Xa.elementTypes=Ea;function vo(Ht,V){var se=Object.keys(Ht);if(Object.getOwnPropertySymbols){var ce=Object.getOwnPropertySymbols(Ht);V&&(ce=ce.filter(function($){return Object.getOwnPropertyDescriptor(Ht,$).enumerable})),se.push.apply(se,ce)}return se}function io(Ht){for(var V=1;V<arguments.length;V++){var se=arguments[V]!=null?arguments[V]:{};V%2?vo(Object(se),!0).forEach(function(ce){(0,f.default)(Ht,ce,se[ce])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ht,Object.getOwnPropertyDescriptors(se)):vo(Object(se)).forEach(function(ce){Object.defineProperty(Ht,ce,Object.getOwnPropertyDescriptor(se,ce))})}return Ht}class Vo{constructor(V,se){var ce=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.parser=new tr(ce),this.screen=new Xe(V,ce),this.options=ce;var $=new Xa(this,ce),K=$.createDocumentElement(se);this.document=$,this.documentElement=K}static from(V,se){var ce=arguments;return(0,d.default)(function*(){var $=ce.length>2&&ce[2]!==void 0?ce[2]:{},K=new tr($),ie=yield K.parse(se);return new Vo(V,ie,$)})()}static fromString(V,se){var ce=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},$=new tr(ce),K=$.parseFromString(se);return new Vo(V,K,ce)}fork(V,se){var ce=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Vo.from(V,se,io(io({},this.options),ce))}forkString(V,se){var ce=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Vo.fromString(V,se,io(io({},this.options),ce))}ready(){return this.screen.ready()}isReady(){return this.screen.isReady()}render(){var V=arguments,se=this;return(0,d.default)(function*(){var ce=V.length>0&&V[0]!==void 0?V[0]:{};se.start(io({enableRedraw:!0,ignoreAnimation:!0,ignoreMouse:!0},ce)),yield se.ready(),se.stop()})()}start(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{documentElement:se,screen:ce,options:$}=this;ce.start(se,io(io({enableRedraw:!0},$),V))}stop(){this.screen.stop()}resize(V){var se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:V,ce=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.documentElement.resize(V,se,ce)}}}),"./node_modules/core-js/internals/a-callable.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/is-callable.js"),f=l("./node_modules/core-js/internals/try-to-string.js"),m=TypeError;c.exports=function(p){if(d(p))return p;throw new m(f(p)+" is not a function")}}),"./node_modules/core-js/internals/a-constructor.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/is-constructor.js"),f=l("./node_modules/core-js/internals/try-to-string.js"),m=TypeError;c.exports=function(p){if(d(p))return p;throw new m(f(p)+" is not a constructor")}}),"./node_modules/core-js/internals/a-possible-prototype.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/is-possible-prototype.js"),f=String,m=TypeError;c.exports=function(p){if(d(p))return p;throw new m("Can't set "+f(p)+" as a prototype")}}),"./node_modules/core-js/internals/a-set.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/set-helpers.js").has;c.exports=function(f){return d(f),f}}),"./node_modules/core-js/internals/add-to-unscopables.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/well-known-symbol.js"),f=l("./node_modules/core-js/internals/object-create.js"),m=l("./node_modules/core-js/internals/object-define-property.js").f,p=d("unscopables"),g=Array.prototype;g[p]===void 0&&m(g,p,{configurable:!0,value:f(null)}),c.exports=function(y){g[p][y]=!0}}),"./node_modules/core-js/internals/advance-string-index.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/string-multibyte.js").charAt;c.exports=function(f,m,p){return m+(p?d(f,m).length:1)}}),"./node_modules/core-js/internals/an-instance.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/object-is-prototype-of.js"),f=TypeError;c.exports=function(m,p){if(d(p,m))return m;throw new f("Incorrect invocation")}}),"./node_modules/core-js/internals/an-object.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/is-object.js"),f=String,m=TypeError;c.exports=function(p){if(d(p))return p;throw new m(f(p)+" is not an object")}}),"./node_modules/core-js/internals/array-buffer-non-extensible.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/fails.js");c.exports=d(function(){if(typeof ArrayBuffer=="function"){var f=new ArrayBuffer(8);Object.isExtensible(f)&&Object.defineProperty(f,"a",{value:8})}})}),"./node_modules/core-js/internals/array-for-each.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/array-iteration.js").forEach,f=l("./node_modules/core-js/internals/array-method-is-strict.js"),m=f("forEach");c.exports=m?[].forEach:function(g){return d(this,g,arguments.length>1?arguments[1]:void 0)}}),"./node_modules/core-js/internals/array-from.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-bind-context.js"),f=l("./node_modules/core-js/internals/function-call.js"),m=l("./node_modules/core-js/internals/to-object.js"),p=l("./node_modules/core-js/internals/call-with-safe-iteration-closing.js"),g=l("./node_modules/core-js/internals/is-array-iterator-method.js"),y=l("./node_modules/core-js/internals/is-constructor.js"),x=l("./node_modules/core-js/internals/length-of-array-like.js"),w=l("./node_modules/core-js/internals/create-property.js"),_=l("./node_modules/core-js/internals/get-iterator.js"),E=l("./node_modules/core-js/internals/get-iterator-method.js"),N=Array;c.exports=function(I){var D=m(I),U=y(this),G=arguments.length,q=G>1?arguments[1]:void 0,J=q!==void 0;J&&(q=d(q,G>2?arguments[2]:void 0));var de=E(D),xe=0,we,ve,ne,ae,oe,Ie;if(de&&!(this===N&&g(de)))for(ve=U?new this:[],ae=_(D,de),oe=ae.next;!(ne=f(oe,ae)).done;xe++)Ie=J?p(ae,q,[ne.value,xe],!0):ne.value,w(ve,xe,Ie);else for(we=x(D),ve=U?new this(we):N(we);we>xe;xe++)Ie=J?q(D[xe],xe):D[xe],w(ve,xe,Ie);return ve.length=xe,ve}}),"./node_modules/core-js/internals/array-includes.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/to-indexed-object.js"),f=l("./node_modules/core-js/internals/to-absolute-index.js"),m=l("./node_modules/core-js/internals/length-of-array-like.js"),p=function(g){return function(y,x,w){var _=d(y),E=m(_);if(E===0)return!g&&-1;var N=f(w,E),C;if(g&&x!==x){for(;E>N;)if(C=_[N++],C!==C)return!0}else for(;E>N;N++)if((g||N in _)&&_[N]===x)return g||N||0;return!g&&-1}};c.exports={includes:p(!0),indexOf:p(!1)}}),"./node_modules/core-js/internals/array-iteration.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-bind-context.js"),f=l("./node_modules/core-js/internals/function-uncurry-this.js"),m=l("./node_modules/core-js/internals/indexed-object.js"),p=l("./node_modules/core-js/internals/to-object.js"),g=l("./node_modules/core-js/internals/length-of-array-like.js"),y=l("./node_modules/core-js/internals/array-species-create.js"),x=f([].push),w=function(_){var E=_===1,N=_===2,C=_===3,I=_===4,D=_===6,U=_===7,G=_===5||D;return function(q,J,de,xe){for(var we=p(q),ve=m(we),ne=g(ve),ae=d(J,de),oe=0,Ie=xe||y,Ce=E?Ie(q,ne):N||U?Ie(q,0):void 0,be,ue;ne>oe;oe++)if((G||oe in ve)&&(be=ve[oe],ue=ae(be,oe,we),_))if(E)Ce[oe]=ue;else if(ue)switch(_){case 3:return!0;case 5:return be;case 6:return oe;case 2:x(Ce,be)}else switch(_){case 4:return!1;case 7:x(Ce,be)}return D?-1:C||I?I:Ce}};c.exports={forEach:w(0),map:w(1),filter:w(2),some:w(3),every:w(4),find:w(5),findIndex:w(6),filterReject:w(7)}}),"./node_modules/core-js/internals/array-method-has-species-support.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/fails.js"),f=l("./node_modules/core-js/internals/well-known-symbol.js"),m=l("./node_modules/core-js/internals/environment-v8-version.js"),p=f("species");c.exports=function(g){return m>=51||!d(function(){var y=[],x=y.constructor={};return x[p]=function(){return{foo:1}},y[g](Boolean).foo!==1})}}),"./node_modules/core-js/internals/array-method-is-strict.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/fails.js");c.exports=function(f,m){var p=[][f];return!!p&&d(function(){p.call(null,m||function(){return 1},1)})}}),"./node_modules/core-js/internals/array-reduce.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/a-callable.js"),f=l("./node_modules/core-js/internals/to-object.js"),m=l("./node_modules/core-js/internals/indexed-object.js"),p=l("./node_modules/core-js/internals/length-of-array-like.js"),g=TypeError,y="Reduce of empty array with no initial value",x=function(w){return function(_,E,N,C){var I=f(_),D=m(I),U=p(I);if(d(E),U===0&&N<2)throw new g(y);var G=w?U-1:0,q=w?-1:1;if(N<2)for(;;){if(G in D){C=D[G],G+=q;break}if(G+=q,w?G<0:U<=G)throw new g(y)}for(;w?G>=0:U>G;G+=q)G in D&&(C=E(C,D[G],G,I));return C}};c.exports={left:x(!1),right:x(!0)}}),"./node_modules/core-js/internals/array-slice.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-uncurry-this.js");c.exports=d([].slice)}),"./node_modules/core-js/internals/array-species-constructor.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/is-array.js"),f=l("./node_modules/core-js/internals/is-constructor.js"),m=l("./node_modules/core-js/internals/is-object.js"),p=l("./node_modules/core-js/internals/well-known-symbol.js"),g=p("species"),y=Array;c.exports=function(x){var w;return d(x)&&(w=x.constructor,f(w)&&(w===y||d(w.prototype))?w=void 0:m(w)&&(w=w[g],w===null&&(w=void 0))),w===void 0?y:w}}),"./node_modules/core-js/internals/array-species-create.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/array-species-constructor.js");c.exports=function(f,m){return new(d(f))(m===0?0:m)}}),"./node_modules/core-js/internals/call-with-safe-iteration-closing.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/an-object.js"),f=l("./node_modules/core-js/internals/iterator-close.js");c.exports=function(m,p,g,y){try{return y?p(d(g)[0],g[1]):p(g)}catch(x){f(m,"throw",x)}}}),"./node_modules/core-js/internals/check-correctness-of-iteration.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/well-known-symbol.js"),f=d("iterator"),m=!1;try{var p=0,g={next:function(){return{done:!!p++}},return:function(){m=!0}};g[f]=function(){return this},Array.from(g,function(){throw 2})}catch{}c.exports=function(y,x){try{if(!x&&!m)return!1}catch{return!1}var w=!1;try{var _={};_[f]=function(){return{next:function(){return{done:w=!0}}}},y(_)}catch{}return w}}),"./node_modules/core-js/internals/classof-raw.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-uncurry-this.js"),f=d({}.toString),m=d("".slice);c.exports=function(p){return m(f(p),8,-1)}}),"./node_modules/core-js/internals/classof.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/to-string-tag-support.js"),f=l("./node_modules/core-js/internals/is-callable.js"),m=l("./node_modules/core-js/internals/classof-raw.js"),p=l("./node_modules/core-js/internals/well-known-symbol.js"),g=p("toStringTag"),y=Object,x=m((function(){return arguments})())==="Arguments",w=function(_,E){try{return _[E]}catch{}};c.exports=d?m:function(_){var E,N,C;return _===void 0?"Undefined":_===null?"Null":typeof(N=w(E=y(_),g))=="string"?N:x?m(E):(C=m(E))==="Object"&&f(E.callee)?"Arguments":C}}),"./node_modules/core-js/internals/collection-strong.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/object-create.js"),f=l("./node_modules/core-js/internals/define-built-in-accessor.js"),m=l("./node_modules/core-js/internals/define-built-ins.js"),p=l("./node_modules/core-js/internals/function-bind-context.js"),g=l("./node_modules/core-js/internals/an-instance.js"),y=l("./node_modules/core-js/internals/is-null-or-undefined.js"),x=l("./node_modules/core-js/internals/iterate.js"),w=l("./node_modules/core-js/internals/iterator-define.js"),_=l("./node_modules/core-js/internals/create-iter-result-object.js"),E=l("./node_modules/core-js/internals/set-species.js"),N=l("./node_modules/core-js/internals/descriptors.js"),C=l("./node_modules/core-js/internals/internal-metadata.js").fastKey,I=l("./node_modules/core-js/internals/internal-state.js"),D=I.set,U=I.getterFor;c.exports={getConstructor:function(G,q,J,de){var xe=G(function(oe,Ie){g(oe,we),D(oe,{type:q,index:d(null),first:null,last:null,size:0}),N||(oe.size=0),y(Ie)||x(Ie,oe[de],{that:oe,AS_ENTRIES:J})}),we=xe.prototype,ve=U(q),ne=function(oe,Ie,Ce){var be=ve(oe),ue=ae(oe,Ie),Pe,Re;return ue?ue.value=Ce:(be.last=ue={index:Re=C(Ie,!0),key:Ie,value:Ce,previous:Pe=be.last,next:null,removed:!1},be.first||(be.first=ue),Pe&&(Pe.next=ue),N?be.size++:oe.size++,Re!=="F"&&(be.index[Re]=ue)),oe},ae=function(oe,Ie){var Ce=ve(oe),be=C(Ie),ue;if(be!=="F")return Ce.index[be];for(ue=Ce.first;ue;ue=ue.next)if(ue.key===Ie)return ue};return m(we,{clear:function(){for(var Ie=this,Ce=ve(Ie),be=Ce.first;be;)be.removed=!0,be.previous&&(be.previous=be.previous.next=null),be=be.next;Ce.first=Ce.last=null,Ce.index=d(null),N?Ce.size=0:Ie.size=0},delete:function(oe){var Ie=this,Ce=ve(Ie),be=ae(Ie,oe);if(be){var ue=be.next,Pe=be.previous;delete Ce.index[be.index],be.removed=!0,Pe&&(Pe.next=ue),ue&&(ue.previous=Pe),Ce.first===be&&(Ce.first=ue),Ce.last===be&&(Ce.last=Pe),N?Ce.size--:Ie.size--}return!!be},forEach:function(Ie){for(var Ce=ve(this),be=p(Ie,arguments.length>1?arguments[1]:void 0),ue;ue=ue?ue.next:Ce.first;)for(be(ue.value,ue.key,this);ue&&ue.removed;)ue=ue.previous},has:function(Ie){return!!ae(this,Ie)}}),m(we,J?{get:function(Ie){var Ce=ae(this,Ie);return Ce&&Ce.value},set:function(Ie,Ce){return ne(this,Ie===0?0:Ie,Ce)}}:{add:function(Ie){return ne(this,Ie=Ie===0?0:Ie,Ie)}}),N&&f(we,"size",{configurable:!0,get:function(){return ve(this).size}}),xe},setStrong:function(G,q,J){var de=q+" Iterator",xe=U(q),we=U(de);w(G,q,function(ve,ne){D(this,{type:de,target:ve,state:xe(ve),kind:ne,last:null})},function(){for(var ve=we(this),ne=ve.kind,ae=ve.last;ae&&ae.removed;)ae=ae.previous;return!ve.target||!(ve.last=ae=ae?ae.next:ve.state.first)?(ve.target=null,_(void 0,!0)):_(ne==="keys"?ae.key:ne==="values"?ae.value:[ae.key,ae.value],!1)},J?"entries":"values",!J,!0),E(q)}}}),"./node_modules/core-js/internals/collection.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/global-this.js"),m=l("./node_modules/core-js/internals/function-uncurry-this.js"),p=l("./node_modules/core-js/internals/is-forced.js"),g=l("./node_modules/core-js/internals/define-built-in.js"),y=l("./node_modules/core-js/internals/internal-metadata.js"),x=l("./node_modules/core-js/internals/iterate.js"),w=l("./node_modules/core-js/internals/an-instance.js"),_=l("./node_modules/core-js/internals/is-callable.js"),E=l("./node_modules/core-js/internals/is-null-or-undefined.js"),N=l("./node_modules/core-js/internals/is-object.js"),C=l("./node_modules/core-js/internals/fails.js"),I=l("./node_modules/core-js/internals/check-correctness-of-iteration.js"),D=l("./node_modules/core-js/internals/set-to-string-tag.js"),U=l("./node_modules/core-js/internals/inherit-if-required.js");c.exports=function(G,q,J){var de=G.indexOf("Map")!==-1,xe=G.indexOf("Weak")!==-1,we=de?"set":"add",ve=f[G],ne=ve&&ve.prototype,ae=ve,oe={},Ie=function(Fe){var ft=m(ne[Fe]);g(ne,Fe,Fe==="add"?function(De){return ft(this,De===0?0:De),this}:Fe==="delete"?function(at){return xe&&!N(at)?!1:ft(this,at===0?0:at)}:Fe==="get"?function(De){return xe&&!N(De)?void 0:ft(this,De===0?0:De)}:Fe==="has"?function(De){return xe&&!N(De)?!1:ft(this,De===0?0:De)}:function(De,ut){return ft(this,De===0?0:De,ut),this})},Ce=p(G,!_(ve)||!(xe||ne.forEach&&!C(function(){new ve().entries().next()})));if(Ce)ae=J.getConstructor(q,G,de,we),y.enable();else if(p(G,!0)){var be=new ae,ue=be[we](xe?{}:-0,1)!==be,Pe=C(function(){be.has(1)}),Re=I(function(Fe){new ve(Fe)}),He=!xe&&C(function(){for(var Fe=new ve,ft=5;ft--;)Fe[we](ft,ft);return!Fe.has(-0)});Re||(ae=q(function(Fe,ft){w(Fe,ne);var at=U(new ve,Fe,ae);return E(ft)||x(ft,at[we],{that:at,AS_ENTRIES:de}),at}),ae.prototype=ne,ne.constructor=ae),(Pe||He)&&(Ie("delete"),Ie("has"),de&&Ie("get")),(He||ue)&&Ie(we),xe&&ne.clear&&delete ne.clear}return oe[G]=ae,d({global:!0,constructor:!0,forced:ae!==ve},oe),D(ae,G),xe||J.setStrong(ae,G,de),ae}}),"./node_modules/core-js/internals/copy-constructor-properties.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/has-own-property.js"),f=l("./node_modules/core-js/internals/own-keys.js"),m=l("./node_modules/core-js/internals/object-get-own-property-descriptor.js"),p=l("./node_modules/core-js/internals/object-define-property.js");c.exports=function(g,y,x){for(var w=f(y),_=p.f,E=m.f,N=0;N<w.length;N++){var C=w[N];!d(g,C)&&!(x&&d(x,C))&&_(g,C,E(y,C))}}}),"./node_modules/core-js/internals/correct-is-regexp-logic.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/well-known-symbol.js"),f=d("match");c.exports=function(m){var p=/./;try{"/./"[m](p)}catch{try{return p[f]=!1,"/./"[m](p)}catch{}}return!1}}),"./node_modules/core-js/internals/correct-prototype-getter.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/fails.js");c.exports=!d(function(){function f(){}return f.prototype.constructor=null,Object.getPrototypeOf(new f)!==f.prototype})}),"./node_modules/core-js/internals/create-html.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-uncurry-this.js"),f=l("./node_modules/core-js/internals/require-object-coercible.js"),m=l("./node_modules/core-js/internals/to-string.js"),p=/"/g,g=d("".replace);c.exports=function(y,x,w,_){var E=m(f(y)),N="<"+x;return w!==""&&(N+=" "+w+'="'+g(m(_),p,"&quot;")+'"'),N+">"+E+"</"+x+">"}}),"./node_modules/core-js/internals/create-iter-result-object.js":(function(c){c.exports=function(u,l){return{value:u,done:l}}}),"./node_modules/core-js/internals/create-non-enumerable-property.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/descriptors.js"),f=l("./node_modules/core-js/internals/object-define-property.js"),m=l("./node_modules/core-js/internals/create-property-descriptor.js");c.exports=d?function(p,g,y){return f.f(p,g,m(1,y))}:function(p,g,y){return p[g]=y,p}}),"./node_modules/core-js/internals/create-property-descriptor.js":(function(c){c.exports=function(u,l){return{enumerable:!(u&1),configurable:!(u&2),writable:!(u&4),value:l}}}),"./node_modules/core-js/internals/create-property.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/descriptors.js"),f=l("./node_modules/core-js/internals/object-define-property.js"),m=l("./node_modules/core-js/internals/create-property-descriptor.js");c.exports=function(p,g,y){d?f.f(p,g,m(0,y)):p[g]=y}}),"./node_modules/core-js/internals/define-built-in-accessor.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/make-built-in.js"),f=l("./node_modules/core-js/internals/object-define-property.js");c.exports=function(m,p,g){return g.get&&d(g.get,p,{getter:!0}),g.set&&d(g.set,p,{setter:!0}),f.f(m,p,g)}}),"./node_modules/core-js/internals/define-built-in.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/is-callable.js"),f=l("./node_modules/core-js/internals/object-define-property.js"),m=l("./node_modules/core-js/internals/make-built-in.js"),p=l("./node_modules/core-js/internals/define-global-property.js");c.exports=function(g,y,x,w){w||(w={});var _=w.enumerable,E=w.name!==void 0?w.name:y;if(d(x)&&m(x,E,w),w.global)_?g[y]=x:p(y,x);else{try{w.unsafe?g[y]&&(_=!0):delete g[y]}catch{}_?g[y]=x:f.f(g,y,{value:x,enumerable:!1,configurable:!w.nonConfigurable,writable:!w.nonWritable})}return g}}),"./node_modules/core-js/internals/define-built-ins.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/define-built-in.js");c.exports=function(f,m,p){for(var g in m)d(f,g,m[g],p);return f}}),"./node_modules/core-js/internals/define-global-property.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/global-this.js"),f=Object.defineProperty;c.exports=function(m,p){try{f(d,m,{value:p,configurable:!0,writable:!0})}catch{d[m]=p}return p}}),"./node_modules/core-js/internals/descriptors.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/fails.js");c.exports=!d(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7})}),"./node_modules/core-js/internals/document-create-element.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/global-this.js"),f=l("./node_modules/core-js/internals/is-object.js"),m=d.document,p=f(m)&&f(m.createElement);c.exports=function(g){return p?m.createElement(g):{}}}),"./node_modules/core-js/internals/does-not-exceed-safe-integer.js":(function(c){var u=TypeError,l=9007199254740991;c.exports=function(d){if(d>l)throw u("Maximum allowed index exceeded");return d}}),"./node_modules/core-js/internals/dom-iterables.js":(function(c){c.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}),"./node_modules/core-js/internals/dom-token-list-prototype.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/document-create-element.js"),f=d("span").classList,m=f&&f.constructor&&f.constructor.prototype;c.exports=m===Object.prototype?void 0:m}),"./node_modules/core-js/internals/enum-bug-keys.js":(function(c){c.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]}),"./node_modules/core-js/internals/environment-is-ios-pebble.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/environment-user-agent.js");c.exports=/ipad|iphone|ipod/i.test(d)&&typeof Pebble<"u"}),"./node_modules/core-js/internals/environment-is-ios.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/environment-user-agent.js");c.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(d)}),"./node_modules/core-js/internals/environment-is-node.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/environment.js");c.exports=d==="NODE"}),"./node_modules/core-js/internals/environment-is-webos-webkit.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/environment-user-agent.js");c.exports=/web0s(?!.*chrome)/i.test(d)}),"./node_modules/core-js/internals/environment-user-agent.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/global-this.js"),f=d.navigator,m=f&&f.userAgent;c.exports=m?String(m):""}),"./node_modules/core-js/internals/environment-v8-version.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/global-this.js"),f=l("./node_modules/core-js/internals/environment-user-agent.js"),m=d.process,p=d.Deno,g=m&&m.versions||p&&p.version,y=g&&g.v8,x,w;y&&(x=y.split("."),w=x[0]>0&&x[0]<4?1:+(x[0]+x[1])),!w&&f&&(x=f.match(/Edge\/(\d+)/),(!x||x[1]>=74)&&(x=f.match(/Chrome\/(\d+)/),x&&(w=+x[1]))),c.exports=w}),"./node_modules/core-js/internals/environment.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/global-this.js"),f=l("./node_modules/core-js/internals/environment-user-agent.js"),m=l("./node_modules/core-js/internals/classof-raw.js"),p=function(g){return f.slice(0,g.length)===g};c.exports=(function(){return p("Bun/")?"BUN":p("Cloudflare-Workers")?"CLOUDFLARE":p("Deno/")?"DENO":p("Node.js/")?"NODE":d.Bun&&typeof Bun.version=="string"?"BUN":d.Deno&&typeof Deno.version=="object"?"DENO":m(d.process)==="process"?"NODE":d.window&&d.document?"BROWSER":"REST"})()}),"./node_modules/core-js/internals/export.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/global-this.js"),f=l("./node_modules/core-js/internals/object-get-own-property-descriptor.js").f,m=l("./node_modules/core-js/internals/create-non-enumerable-property.js"),p=l("./node_modules/core-js/internals/define-built-in.js"),g=l("./node_modules/core-js/internals/define-global-property.js"),y=l("./node_modules/core-js/internals/copy-constructor-properties.js"),x=l("./node_modules/core-js/internals/is-forced.js");c.exports=function(w,_){var E=w.target,N=w.global,C=w.stat,I,D,U,G,q,J;if(N?D=d:C?D=d[E]||g(E,{}):D=d[E]&&d[E].prototype,D)for(U in _){if(q=_[U],w.dontCallGetSet?(J=f(D,U),G=J&&J.value):G=D[U],I=x(N?U:E+(C?".":"#")+U,w.forced),!I&&G!==void 0){if(typeof q==typeof G)continue;y(q,G)}(w.sham||G&&G.sham)&&m(q,"sham",!0),p(D,U,q,w)}}}),"./node_modules/core-js/internals/fails.js":(function(c){c.exports=function(u){try{return!!u()}catch{return!0}}}),"./node_modules/core-js/internals/fix-regexp-well-known-symbol-logic.js":(function(c,u,l){l("./node_modules/core-js/modules/es.regexp.exec.js");var d=l("./node_modules/core-js/internals/function-call.js"),f=l("./node_modules/core-js/internals/define-built-in.js"),m=l("./node_modules/core-js/internals/regexp-exec.js"),p=l("./node_modules/core-js/internals/fails.js"),g=l("./node_modules/core-js/internals/well-known-symbol.js"),y=l("./node_modules/core-js/internals/create-non-enumerable-property.js"),x=g("species"),w=RegExp.prototype;c.exports=function(_,E,N,C){var I=g(_),D=!p(function(){var J={};return J[I]=function(){return 7},""[_](J)!==7}),U=D&&!p(function(){var J=!1,de=/a/;if(_==="split"){var xe={};xe[x]=function(){return de},de={constructor:xe,flags:""},de[I]=/./[I]}return de.exec=function(){return J=!0,null},de[I](""),!J});if(!D||!U||N){var G=/./[I],q=E(I,""[_],function(J,de,xe,we,ve){var ne=de.exec;return ne===m||ne===w.exec?D&&!ve?{done:!0,value:d(G,de,xe,we)}:{done:!0,value:d(J,xe,de,we)}:{done:!1}});f(String.prototype,_,q[0]),f(w,I,q[1])}C&&y(w[I],"sham",!0)}}),"./node_modules/core-js/internals/freezing.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/fails.js");c.exports=!d(function(){return Object.isExtensible(Object.preventExtensions({}))})}),"./node_modules/core-js/internals/function-apply.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-bind-native.js"),f=Function.prototype,m=f.apply,p=f.call;c.exports=typeof Reflect=="object"&&Reflect.apply||(d?p.bind(m):function(){return p.apply(m,arguments)})}),"./node_modules/core-js/internals/function-bind-context.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-uncurry-this-clause.js"),f=l("./node_modules/core-js/internals/a-callable.js"),m=l("./node_modules/core-js/internals/function-bind-native.js"),p=d(d.bind);c.exports=function(g,y){return f(g),y===void 0?g:m?p(g,y):function(){return g.apply(y,arguments)}}}),"./node_modules/core-js/internals/function-bind-native.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/fails.js");c.exports=!d(function(){var f=(function(){}).bind();return typeof f!="function"||f.hasOwnProperty("prototype")})}),"./node_modules/core-js/internals/function-call.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-bind-native.js"),f=Function.prototype.call;c.exports=d?f.bind(f):function(){return f.apply(f,arguments)}}),"./node_modules/core-js/internals/function-name.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/descriptors.js"),f=l("./node_modules/core-js/internals/has-own-property.js"),m=Function.prototype,p=d&&Object.getOwnPropertyDescriptor,g=f(m,"name"),y=g&&(function(){}).name==="something",x=g&&(!d||d&&p(m,"name").configurable);c.exports={EXISTS:g,PROPER:y,CONFIGURABLE:x}}),"./node_modules/core-js/internals/function-uncurry-this-accessor.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-uncurry-this.js"),f=l("./node_modules/core-js/internals/a-callable.js");c.exports=function(m,p,g){try{return d(f(Object.getOwnPropertyDescriptor(m,p)[g]))}catch{}}}),"./node_modules/core-js/internals/function-uncurry-this-clause.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/classof-raw.js"),f=l("./node_modules/core-js/internals/function-uncurry-this.js");c.exports=function(m){if(d(m)==="Function")return f(m)}}),"./node_modules/core-js/internals/function-uncurry-this.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-bind-native.js"),f=Function.prototype,m=f.call,p=d&&f.bind.bind(m,m);c.exports=d?p:function(g){return function(){return m.apply(g,arguments)}}}),"./node_modules/core-js/internals/get-built-in.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/global-this.js"),f=l("./node_modules/core-js/internals/is-callable.js"),m=function(p){return f(p)?p:void 0};c.exports=function(p,g){return arguments.length<2?m(d[p]):d[p]&&d[p][g]}}),"./node_modules/core-js/internals/get-iterator-direct.js":(function(c){c.exports=function(u){return{iterator:u,next:u.next,done:!1}}}),"./node_modules/core-js/internals/get-iterator-method.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/classof.js"),f=l("./node_modules/core-js/internals/get-method.js"),m=l("./node_modules/core-js/internals/is-null-or-undefined.js"),p=l("./node_modules/core-js/internals/iterators.js"),g=l("./node_modules/core-js/internals/well-known-symbol.js"),y=g("iterator");c.exports=function(x){if(!m(x))return f(x,y)||f(x,"@@iterator")||p[d(x)]}}),"./node_modules/core-js/internals/get-iterator.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-call.js"),f=l("./node_modules/core-js/internals/a-callable.js"),m=l("./node_modules/core-js/internals/an-object.js"),p=l("./node_modules/core-js/internals/try-to-string.js"),g=l("./node_modules/core-js/internals/get-iterator-method.js"),y=TypeError;c.exports=function(x,w){var _=arguments.length<2?g(x):w;if(f(_))return m(d(_,x));throw new y(p(x)+" is not iterable")}}),"./node_modules/core-js/internals/get-method.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/a-callable.js"),f=l("./node_modules/core-js/internals/is-null-or-undefined.js");c.exports=function(m,p){var g=m[p];return f(g)?void 0:d(g)}}),"./node_modules/core-js/internals/get-set-record.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/a-callable.js"),f=l("./node_modules/core-js/internals/an-object.js"),m=l("./node_modules/core-js/internals/function-call.js"),p=l("./node_modules/core-js/internals/to-integer-or-infinity.js"),g=l("./node_modules/core-js/internals/get-iterator-direct.js"),y="Invalid size",x=RangeError,w=TypeError,_=Math.max,E=function(N,C){this.set=N,this.size=_(C,0),this.has=d(N.has),this.keys=d(N.keys)};E.prototype={getIterator:function(){return g(f(m(this.keys,this.set)))},includes:function(N){return m(this.has,this.set,N)}},c.exports=function(N){f(N);var C=+N.size;if(C!==C)throw new w(y);var I=p(C);if(I<0)throw new x(y);return new E(N,I)}}),"./node_modules/core-js/internals/get-substitution.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-uncurry-this.js"),f=l("./node_modules/core-js/internals/to-object.js"),m=Math.floor,p=d("".charAt),g=d("".replace),y=d("".slice),x=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,w=/\$([$&'`]|\d{1,2})/g;c.exports=function(_,E,N,C,I,D){var U=N+_.length,G=C.length,q=w;return I!==void 0&&(I=f(I),q=x),g(D,q,function(J,de){var xe;switch(p(de,0)){case"$":return"$";case"&":return _;case"`":return y(E,0,N);case"'":return y(E,U);case"<":xe=I[y(de,1,-1)];break;default:var we=+de;if(we===0)return J;if(we>G){var ve=m(we/10);return ve===0?J:ve<=G?C[ve-1]===void 0?p(de,1):C[ve-1]+p(de,1):J}xe=C[we-1]}return xe===void 0?"":xe})}}),"./node_modules/core-js/internals/global-this.js":(function(c){var u=function(l){return l&&l.Math===Math&&l};c.exports=u(typeof globalThis=="object"&&globalThis)||u(typeof window=="object"&&window)||u(typeof self=="object"&&self)||u(typeof W1=="object"&&W1)||u(typeof this=="object"&&this)||(function(){return this})()||Function("return this")()}),"./node_modules/core-js/internals/has-own-property.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-uncurry-this.js"),f=l("./node_modules/core-js/internals/to-object.js"),m=d({}.hasOwnProperty);c.exports=Object.hasOwn||function(g,y){return m(f(g),y)}}),"./node_modules/core-js/internals/hidden-keys.js":(function(c){c.exports={}}),"./node_modules/core-js/internals/host-report-errors.js":(function(c){c.exports=function(u,l){try{arguments.length===1?console.error(u):console.error(u,l)}catch{}}}),"./node_modules/core-js/internals/html.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/get-built-in.js");c.exports=d("document","documentElement")}),"./node_modules/core-js/internals/ie8-dom-define.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/descriptors.js"),f=l("./node_modules/core-js/internals/fails.js"),m=l("./node_modules/core-js/internals/document-create-element.js");c.exports=!d&&!f(function(){return Object.defineProperty(m("div"),"a",{get:function(){return 7}}).a!==7})}),"./node_modules/core-js/internals/indexed-object.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-uncurry-this.js"),f=l("./node_modules/core-js/internals/fails.js"),m=l("./node_modules/core-js/internals/classof-raw.js"),p=Object,g=d("".split);c.exports=f(function(){return!p("z").propertyIsEnumerable(0)})?function(y){return m(y)==="String"?g(y,""):p(y)}:p}),"./node_modules/core-js/internals/inherit-if-required.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/is-callable.js"),f=l("./node_modules/core-js/internals/is-object.js"),m=l("./node_modules/core-js/internals/object-set-prototype-of.js");c.exports=function(p,g,y){var x,w;return m&&d(x=g.constructor)&&x!==y&&f(w=x.prototype)&&w!==y.prototype&&m(p,w),p}}),"./node_modules/core-js/internals/inspect-source.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-uncurry-this.js"),f=l("./node_modules/core-js/internals/is-callable.js"),m=l("./node_modules/core-js/internals/shared-store.js"),p=d(Function.toString);f(m.inspectSource)||(m.inspectSource=function(g){return p(g)}),c.exports=m.inspectSource}),"./node_modules/core-js/internals/internal-metadata.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/function-uncurry-this.js"),m=l("./node_modules/core-js/internals/hidden-keys.js"),p=l("./node_modules/core-js/internals/is-object.js"),g=l("./node_modules/core-js/internals/has-own-property.js"),y=l("./node_modules/core-js/internals/object-define-property.js").f,x=l("./node_modules/core-js/internals/object-get-own-property-names.js"),w=l("./node_modules/core-js/internals/object-get-own-property-names-external.js"),_=l("./node_modules/core-js/internals/object-is-extensible.js"),E=l("./node_modules/core-js/internals/uid.js"),N=l("./node_modules/core-js/internals/freezing.js"),C=!1,I=E("meta"),D=0,U=function(we){y(we,I,{value:{objectID:"O"+D++,weakData:{}}})},G=function(we,ve){if(!p(we))return typeof we=="symbol"?we:(typeof we=="string"?"S":"P")+we;if(!g(we,I)){if(!_(we))return"F";if(!ve)return"E";U(we)}return we[I].objectID},q=function(we,ve){if(!g(we,I)){if(!_(we))return!0;if(!ve)return!1;U(we)}return we[I].weakData},J=function(we){return N&&C&&_(we)&&!g(we,I)&&U(we),we},de=function(){xe.enable=function(){},C=!0;var we=x.f,ve=f([].splice),ne={};ne[I]=1,we(ne).length&&(x.f=function(ae){for(var oe=we(ae),Ie=0,Ce=oe.length;Ie<Ce;Ie++)if(oe[Ie]===I){ve(oe,Ie,1);break}return oe},d({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:w.f}))},xe=c.exports={enable:de,fastKey:G,getWeakData:q,onFreeze:J};m[I]=!0}),"./node_modules/core-js/internals/internal-state.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/weak-map-basic-detection.js"),f=l("./node_modules/core-js/internals/global-this.js"),m=l("./node_modules/core-js/internals/is-object.js"),p=l("./node_modules/core-js/internals/create-non-enumerable-property.js"),g=l("./node_modules/core-js/internals/has-own-property.js"),y=l("./node_modules/core-js/internals/shared-store.js"),x=l("./node_modules/core-js/internals/shared-key.js"),w=l("./node_modules/core-js/internals/hidden-keys.js"),_="Object already initialized",E=f.TypeError,N=f.WeakMap,C,I,D,U=function(de){return D(de)?I(de):C(de,{})},G=function(de){return function(xe){var we;if(!m(xe)||(we=I(xe)).type!==de)throw new E("Incompatible receiver, "+de+" required");return we}};if(d||y.state){var q=y.state||(y.state=new N);q.get=q.get,q.has=q.has,q.set=q.set,C=function(de,xe){if(q.has(de))throw new E(_);return xe.facade=de,q.set(de,xe),xe},I=function(de){return q.get(de)||{}},D=function(de){return q.has(de)}}else{var J=x("state");w[J]=!0,C=function(de,xe){if(g(de,J))throw new E(_);return xe.facade=de,p(de,J,xe),xe},I=function(de){return g(de,J)?de[J]:{}},D=function(de){return g(de,J)}}c.exports={set:C,get:I,has:D,enforce:U,getterFor:G}}),"./node_modules/core-js/internals/is-array-iterator-method.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/well-known-symbol.js"),f=l("./node_modules/core-js/internals/iterators.js"),m=d("iterator"),p=Array.prototype;c.exports=function(g){return g!==void 0&&(f.Array===g||p[m]===g)}}),"./node_modules/core-js/internals/is-array.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/classof-raw.js");c.exports=Array.isArray||function(m){return d(m)==="Array"}}),"./node_modules/core-js/internals/is-callable.js":(function(c){var u=typeof document=="object"&&document.all;c.exports=typeof u>"u"&&u!==void 0?function(l){return typeof l=="function"||l===u}:function(l){return typeof l=="function"}}),"./node_modules/core-js/internals/is-constructor.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-uncurry-this.js"),f=l("./node_modules/core-js/internals/fails.js"),m=l("./node_modules/core-js/internals/is-callable.js"),p=l("./node_modules/core-js/internals/classof.js"),g=l("./node_modules/core-js/internals/get-built-in.js"),y=l("./node_modules/core-js/internals/inspect-source.js"),x=function(){},w=g("Reflect","construct"),_=/^\s*(?:class|function)\b/,E=d(_.exec),N=!_.test(x),C=function(U){if(!m(U))return!1;try{return w(x,[],U),!0}catch{return!1}},I=function(U){if(!m(U))return!1;switch(p(U)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return N||!!E(_,y(U))}catch{return!0}};I.sham=!0,c.exports=!w||f(function(){var D;return C(C.call)||!C(Object)||!C(function(){D=!0})||D})?I:C}),"./node_modules/core-js/internals/is-forced.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/fails.js"),f=l("./node_modules/core-js/internals/is-callable.js"),m=/#|\.prototype\./,p=function(_,E){var N=y[g(_)];return N===w?!0:N===x?!1:f(E)?d(E):!!E},g=p.normalize=function(_){return String(_).replace(m,".").toLowerCase()},y=p.data={},x=p.NATIVE="N",w=p.POLYFILL="P";c.exports=p}),"./node_modules/core-js/internals/is-iterable.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/classof.js"),f=l("./node_modules/core-js/internals/has-own-property.js"),m=l("./node_modules/core-js/internals/is-null-or-undefined.js"),p=l("./node_modules/core-js/internals/well-known-symbol.js"),g=l("./node_modules/core-js/internals/iterators.js"),y=p("iterator"),x=Object;c.exports=function(w){if(m(w))return!1;var _=x(w);return _[y]!==void 0||"@@iterator"in _||f(g,d(_))}}),"./node_modules/core-js/internals/is-null-or-undefined.js":(function(c){c.exports=function(u){return u==null}}),"./node_modules/core-js/internals/is-object.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/is-callable.js");c.exports=function(f){return typeof f=="object"?f!==null:d(f)}}),"./node_modules/core-js/internals/is-possible-prototype.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/is-object.js");c.exports=function(f){return d(f)||f===null}}),"./node_modules/core-js/internals/is-pure.js":(function(c){c.exports=!1}),"./node_modules/core-js/internals/is-raw-json.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/is-object.js"),f=l("./node_modules/core-js/internals/internal-state.js").get;c.exports=function(p){if(!d(p))return!1;var g=f(p);return!!g&&g.type==="RawJSON"}}),"./node_modules/core-js/internals/is-regexp.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/is-object.js"),f=l("./node_modules/core-js/internals/classof-raw.js"),m=l("./node_modules/core-js/internals/well-known-symbol.js"),p=m("match");c.exports=function(g){var y;return d(g)&&((y=g[p])!==void 0?!!y:f(g)==="RegExp")}}),"./node_modules/core-js/internals/is-symbol.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/get-built-in.js"),f=l("./node_modules/core-js/internals/is-callable.js"),m=l("./node_modules/core-js/internals/object-is-prototype-of.js"),p=l("./node_modules/core-js/internals/use-symbol-as-uid.js"),g=Object;c.exports=p?function(y){return typeof y=="symbol"}:function(y){var x=d("Symbol");return f(x)&&m(x.prototype,g(y))}}),"./node_modules/core-js/internals/iterate-simple.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-call.js");c.exports=function(f,m,p){for(var g=p?f:f.iterator,y=f.next,x,w;!(x=d(y,g)).done;)if(w=m(x.value),w!==void 0)return w}}),"./node_modules/core-js/internals/iterate.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-bind-context.js"),f=l("./node_modules/core-js/internals/function-call.js"),m=l("./node_modules/core-js/internals/an-object.js"),p=l("./node_modules/core-js/internals/try-to-string.js"),g=l("./node_modules/core-js/internals/is-array-iterator-method.js"),y=l("./node_modules/core-js/internals/length-of-array-like.js"),x=l("./node_modules/core-js/internals/object-is-prototype-of.js"),w=l("./node_modules/core-js/internals/get-iterator.js"),_=l("./node_modules/core-js/internals/get-iterator-method.js"),E=l("./node_modules/core-js/internals/iterator-close.js"),N=TypeError,C=function(D,U){this.stopped=D,this.result=U},I=C.prototype;c.exports=function(D,U,G){var q=G&&G.that,J=!!(G&&G.AS_ENTRIES),de=!!(G&&G.IS_RECORD),xe=!!(G&&G.IS_ITERATOR),we=!!(G&&G.INTERRUPTED),ve=d(U,q),ne,ae,oe,Ie,Ce,be,ue,Pe=function(He){return ne&&E(ne,"normal"),new C(!0,He)},Re=function(He){return J?(m(He),we?ve(He[0],He[1],Pe):ve(He[0],He[1])):we?ve(He,Pe):ve(He)};if(de)ne=D.iterator;else if(xe)ne=D;else{if(ae=_(D),!ae)throw new N(p(D)+" is not iterable");if(g(ae)){for(oe=0,Ie=y(D);Ie>oe;oe++)if(Ce=Re(D[oe]),Ce&&x(I,Ce))return Ce;return new C(!1)}ne=w(D,ae)}for(be=de?D.next:ne.next;!(ue=f(be,ne)).done;){try{Ce=Re(ue.value)}catch(He){E(ne,"throw",He)}if(typeof Ce=="object"&&Ce&&x(I,Ce))return Ce}return new C(!1)}}),"./node_modules/core-js/internals/iterator-close-all.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/iterator-close.js");c.exports=function(f,m,p){for(var g=f.length-1;g>=0;g--)if(f[g]!==void 0)try{p=d(f[g].iterator,m,p)}catch(y){m="throw",p=y}if(m==="throw")throw p;return p}}),"./node_modules/core-js/internals/iterator-close.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-call.js"),f=l("./node_modules/core-js/internals/an-object.js"),m=l("./node_modules/core-js/internals/get-method.js");c.exports=function(p,g,y){var x,w;f(p);try{if(x=m(p,"return"),!x){if(g==="throw")throw y;return y}x=d(x,p)}catch(_){w=!0,x=_}if(g==="throw")throw y;if(w)throw x;return f(x),y}}),"./node_modules/core-js/internals/iterator-create-constructor.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/iterators-core.js").IteratorPrototype,f=l("./node_modules/core-js/internals/object-create.js"),m=l("./node_modules/core-js/internals/create-property-descriptor.js"),p=l("./node_modules/core-js/internals/set-to-string-tag.js"),g=l("./node_modules/core-js/internals/iterators.js"),y=function(){return this};c.exports=function(x,w,_,E){var N=w+" Iterator";return x.prototype=f(d,{next:m(+!E,_)}),p(x,N,!1,!0),g[N]=y,x}}),"./node_modules/core-js/internals/iterator-create-proxy.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-call.js"),f=l("./node_modules/core-js/internals/object-create.js"),m=l("./node_modules/core-js/internals/create-non-enumerable-property.js"),p=l("./node_modules/core-js/internals/define-built-ins.js"),g=l("./node_modules/core-js/internals/well-known-symbol.js"),y=l("./node_modules/core-js/internals/internal-state.js"),x=l("./node_modules/core-js/internals/get-method.js"),w=l("./node_modules/core-js/internals/iterators-core.js").IteratorPrototype,_=l("./node_modules/core-js/internals/create-iter-result-object.js"),E=l("./node_modules/core-js/internals/iterator-close.js"),N=l("./node_modules/core-js/internals/iterator-close-all.js"),C=g("toStringTag"),I="IteratorHelper",D="WrapForValidIterator",U="normal",G="throw",q=y.set,J=function(we){var ve=y.getterFor(we?D:I);return p(f(w),{next:function(){var ae=ve(this);if(we)return ae.nextHandler();if(ae.done)return _(void 0,!0);try{var oe=ae.nextHandler();return ae.returnHandlerResult?oe:_(oe,ae.done)}catch(Ie){throw ae.done=!0,Ie}},return:function(){var ne=ve(this),ae=ne.iterator;if(ne.done=!0,we){var oe=x(ae,"return");return oe?d(oe,ae):_(void 0,!0)}if(ne.inner)try{E(ne.inner.iterator,U)}catch(Ie){return E(ae,G,Ie)}if(ne.openIters)try{N(ne.openIters,U)}catch(Ie){return E(ae,G,Ie)}return ae&&E(ae,U),_(void 0,!0)}})},de=J(!0),xe=J(!1);m(xe,C,"Iterator Helper"),c.exports=function(we,ve,ne){var ae=function(Ie,Ce){Ce?(Ce.iterator=Ie.iterator,Ce.next=Ie.next):Ce=Ie,Ce.type=ve?D:I,Ce.returnHandlerResult=!!ne,Ce.nextHandler=we,Ce.counter=0,Ce.done=!1,q(this,Ce)};return ae.prototype=ve?de:xe,ae}}),"./node_modules/core-js/internals/iterator-define.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/function-call.js"),m=l("./node_modules/core-js/internals/is-pure.js"),p=l("./node_modules/core-js/internals/function-name.js"),g=l("./node_modules/core-js/internals/is-callable.js"),y=l("./node_modules/core-js/internals/iterator-create-constructor.js"),x=l("./node_modules/core-js/internals/object-get-prototype-of.js"),w=l("./node_modules/core-js/internals/object-set-prototype-of.js"),_=l("./node_modules/core-js/internals/set-to-string-tag.js"),E=l("./node_modules/core-js/internals/create-non-enumerable-property.js"),N=l("./node_modules/core-js/internals/define-built-in.js"),C=l("./node_modules/core-js/internals/well-known-symbol.js"),I=l("./node_modules/core-js/internals/iterators.js"),D=l("./node_modules/core-js/internals/iterators-core.js"),U=p.PROPER,G=p.CONFIGURABLE,q=D.IteratorPrototype,J=D.BUGGY_SAFARI_ITERATORS,de=C("iterator"),xe="keys",we="values",ve="entries",ne=function(){return this};c.exports=function(ae,oe,Ie,Ce,be,ue,Pe){y(Ie,oe,Ce);var Re=function(rt){if(rt===be&&De)return De;if(!J&&rt&&rt in ft)return ft[rt];switch(rt){case xe:return function(){return new Ie(this,rt)};case we:return function(){return new Ie(this,rt)};case ve:return function(){return new Ie(this,rt)}}return function(){return new Ie(this)}},He=oe+" Iterator",Fe=!1,ft=ae.prototype,at=ft[de]||ft["@@iterator"]||be&&ft[be],De=!J&&at||Re(be),ut=oe==="Array"&&ft.entries||at,et,Ue,jt;if(ut&&(et=x(ut.call(new ae)),et!==Object.prototype&&et.next&&(!m&&x(et)!==q&&(w?w(et,q):g(et[de])||N(et,de,ne)),_(et,He,!0,!0),m&&(I[He]=ne))),U&&be===we&&at&&at.name!==we&&(!m&&G?E(ft,"name",we):(Fe=!0,De=function(){return f(at,this)})),be)if(Ue={values:Re(we),keys:ue?De:Re(xe),entries:Re(ve)},Pe)for(jt in Ue)(J||Fe||!(jt in ft))&&N(ft,jt,Ue[jt]);else d({target:oe,proto:!0,forced:J||Fe},Ue);return(!m||Pe)&&ft[de]!==De&&N(ft,de,De,{name:be}),I[oe]=De,Ue}}),"./node_modules/core-js/internals/iterator-helper-throws-on-invalid-iterator.js":(function(c){c.exports=function(u,l){var d=typeof Iterator=="function"&&Iterator.prototype[u];if(d)try{d.call({next:null},l).next()}catch{return!0}}}),"./node_modules/core-js/internals/iterator-helper-without-closing-on-early-error.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/global-this.js");c.exports=function(f,m){var p=d.Iterator,g=p&&p.prototype,y=g&&g[f],x=!1;if(y)try{y.call({next:function(){return{done:!0}},return:function(){x=!0}},-1)}catch(w){w instanceof m||(x=!1)}if(!x)return y}}),"./node_modules/core-js/internals/iterators-core.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/fails.js"),f=l("./node_modules/core-js/internals/is-callable.js"),m=l("./node_modules/core-js/internals/is-object.js"),p=l("./node_modules/core-js/internals/object-create.js"),g=l("./node_modules/core-js/internals/object-get-prototype-of.js"),y=l("./node_modules/core-js/internals/define-built-in.js"),x=l("./node_modules/core-js/internals/well-known-symbol.js"),w=l("./node_modules/core-js/internals/is-pure.js"),_=x("iterator"),E=!1,N,C,I;[].keys&&(I=[].keys(),"next"in I?(C=g(g(I)),C!==Object.prototype&&(N=C)):E=!0);var D=!m(N)||d(function(){var U={};return N[_].call(U)!==U});D?N={}:w&&(N=p(N)),f(N[_])||y(N,_,function(){return this}),c.exports={IteratorPrototype:N,BUGGY_SAFARI_ITERATORS:E}}),"./node_modules/core-js/internals/iterators.js":(function(c){c.exports={}}),"./node_modules/core-js/internals/length-of-array-like.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/to-length.js");c.exports=function(f){return d(f.length)}}),"./node_modules/core-js/internals/make-built-in.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-uncurry-this.js"),f=l("./node_modules/core-js/internals/fails.js"),m=l("./node_modules/core-js/internals/is-callable.js"),p=l("./node_modules/core-js/internals/has-own-property.js"),g=l("./node_modules/core-js/internals/descriptors.js"),y=l("./node_modules/core-js/internals/function-name.js").CONFIGURABLE,x=l("./node_modules/core-js/internals/inspect-source.js"),w=l("./node_modules/core-js/internals/internal-state.js"),_=w.enforce,E=w.get,N=String,C=Object.defineProperty,I=d("".slice),D=d("".replace),U=d([].join),G=g&&!f(function(){return C(function(){},"length",{value:8}).length!==8}),q=String(String).split("String"),J=c.exports=function(de,xe,we){I(N(xe),0,7)==="Symbol("&&(xe="["+D(N(xe),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),we&&we.getter&&(xe="get "+xe),we&&we.setter&&(xe="set "+xe),(!p(de,"name")||y&&de.name!==xe)&&(g?C(de,"name",{value:xe,configurable:!0}):de.name=xe),G&&we&&p(we,"arity")&&de.length!==we.arity&&C(de,"length",{value:we.arity});try{we&&p(we,"constructor")&&we.constructor?g&&C(de,"prototype",{writable:!1}):de.prototype&&(de.prototype=void 0)}catch{}var ve=_(de);return p(ve,"source")||(ve.source=U(q,typeof xe=="string"?xe:"")),de};Function.prototype.toString=J(function(){return m(this)&&E(this).source||x(this)},"toString")}),"./node_modules/core-js/internals/math-trunc.js":(function(c){var u=Math.ceil,l=Math.floor;c.exports=Math.trunc||function(f){var m=+f;return(m>0?l:u)(m)}}),"./node_modules/core-js/internals/microtask.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/global-this.js"),f=l("./node_modules/core-js/internals/safe-get-built-in.js"),m=l("./node_modules/core-js/internals/function-bind-context.js"),p=l("./node_modules/core-js/internals/task.js").set,g=l("./node_modules/core-js/internals/queue.js"),y=l("./node_modules/core-js/internals/environment-is-ios.js"),x=l("./node_modules/core-js/internals/environment-is-ios-pebble.js"),w=l("./node_modules/core-js/internals/environment-is-webos-webkit.js"),_=l("./node_modules/core-js/internals/environment-is-node.js"),E=d.MutationObserver||d.WebKitMutationObserver,N=d.document,C=d.process,I=d.Promise,D=f("queueMicrotask"),U,G,q,J,de;if(!D){var xe=new g,we=function(){var ve,ne;for(_&&(ve=C.domain)&&ve.exit();ne=xe.get();)try{ne()}catch(ae){throw xe.head&&U(),ae}ve&&ve.enter()};!y&&!_&&!w&&E&&N?(G=!0,q=N.createTextNode(""),new E(we).observe(q,{characterData:!0}),U=function(){q.data=G=!G}):!x&&I&&I.resolve?(J=I.resolve(void 0),J.constructor=I,de=m(J.then,J),U=function(){de(we)}):_?U=function(){C.nextTick(we)}:(p=m(p,d),U=function(){p(we)}),D=function(ve){xe.head||U(),xe.add(ve)}}c.exports=D}),"./node_modules/core-js/internals/native-raw-json.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/fails.js");c.exports=!d(function(){var f="9007199254740993",m=JSON.rawJSON(f);return!JSON.isRawJSON(m)||JSON.stringify(m)!==f})}),"./node_modules/core-js/internals/new-promise-capability.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/a-callable.js"),f=TypeError,m=function(p){var g,y;this.promise=new p(function(x,w){if(g!==void 0||y!==void 0)throw new f("Bad Promise constructor");g=x,y=w}),this.resolve=d(g),this.reject=d(y)};c.exports.f=function(p){return new m(p)}}),"./node_modules/core-js/internals/not-a-regexp.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/is-regexp.js"),f=TypeError;c.exports=function(m){if(d(m))throw new f("The method doesn't accept regular expressions");return m}}),"./node_modules/core-js/internals/object-assign.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/descriptors.js"),f=l("./node_modules/core-js/internals/function-uncurry-this.js"),m=l("./node_modules/core-js/internals/function-call.js"),p=l("./node_modules/core-js/internals/fails.js"),g=l("./node_modules/core-js/internals/object-keys.js"),y=l("./node_modules/core-js/internals/object-get-own-property-symbols.js"),x=l("./node_modules/core-js/internals/object-property-is-enumerable.js"),w=l("./node_modules/core-js/internals/to-object.js"),_=l("./node_modules/core-js/internals/indexed-object.js"),E=Object.assign,N=Object.defineProperty,C=f([].concat);c.exports=!E||p(function(){if(d&&E({b:1},E(N({},"a",{enumerable:!0,get:function(){N(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var I={},D={},U=Symbol("assign detection"),G="abcdefghijklmnopqrst";return I[U]=7,G.split("").forEach(function(q){D[q]=q}),E({},I)[U]!==7||g(E({},D)).join("")!==G})?function(D,U){for(var G=w(D),q=arguments.length,J=1,de=y.f,xe=x.f;q>J;)for(var we=_(arguments[J++]),ve=de?C(g(we),de(we)):g(we),ne=ve.length,ae=0,oe;ne>ae;)oe=ve[ae++],(!d||m(xe,we,oe))&&(G[oe]=we[oe]);return G}:E}),"./node_modules/core-js/internals/object-create.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/an-object.js"),f=l("./node_modules/core-js/internals/object-define-properties.js"),m=l("./node_modules/core-js/internals/enum-bug-keys.js"),p=l("./node_modules/core-js/internals/hidden-keys.js"),g=l("./node_modules/core-js/internals/html.js"),y=l("./node_modules/core-js/internals/document-create-element.js"),x=l("./node_modules/core-js/internals/shared-key.js"),w=">",_="<",E="prototype",N="script",C=x("IE_PROTO"),I=function(){},D=function(de){return _+N+w+de+_+"/"+N+w},U=function(de){de.write(D("")),de.close();var xe=de.parentWindow.Object;return de=null,xe},G=function(){var de=y("iframe"),xe="java"+N+":",we;return de.style.display="none",g.appendChild(de),de.src=String(xe),we=de.contentWindow.document,we.open(),we.write(D("document.F=Object")),we.close(),we.F},q,J=function(){try{q=new ActiveXObject("htmlfile")}catch{}J=typeof document<"u"?document.domain&&q?U(q):G():U(q);for(var de=m.length;de--;)delete J[E][m[de]];return J()};p[C]=!0,c.exports=Object.create||function(xe,we){var ve;return xe!==null?(I[E]=d(xe),ve=new I,I[E]=null,ve[C]=xe):ve=J(),we===void 0?ve:f.f(ve,we)}}),"./node_modules/core-js/internals/object-define-properties.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/descriptors.js"),f=l("./node_modules/core-js/internals/v8-prototype-define-bug.js"),m=l("./node_modules/core-js/internals/object-define-property.js"),p=l("./node_modules/core-js/internals/an-object.js"),g=l("./node_modules/core-js/internals/to-indexed-object.js"),y=l("./node_modules/core-js/internals/object-keys.js");u.f=d&&!f?Object.defineProperties:function(w,_){p(w);for(var E=g(_),N=y(_),C=N.length,I=0,D;C>I;)m.f(w,D=N[I++],E[D]);return w}}),"./node_modules/core-js/internals/object-define-property.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/descriptors.js"),f=l("./node_modules/core-js/internals/ie8-dom-define.js"),m=l("./node_modules/core-js/internals/v8-prototype-define-bug.js"),p=l("./node_modules/core-js/internals/an-object.js"),g=l("./node_modules/core-js/internals/to-property-key.js"),y=TypeError,x=Object.defineProperty,w=Object.getOwnPropertyDescriptor,_="enumerable",E="configurable",N="writable";u.f=d?m?function(I,D,U){if(p(I),D=g(D),p(U),typeof I=="function"&&D==="prototype"&&"value"in U&&N in U&&!U[N]){var G=w(I,D);G&&G[N]&&(I[D]=U.value,U={configurable:E in U?U[E]:G[E],enumerable:_ in U?U[_]:G[_],writable:!1})}return x(I,D,U)}:x:function(I,D,U){if(p(I),D=g(D),p(U),f)try{return x(I,D,U)}catch{}if("get"in U||"set"in U)throw new y("Accessors not supported");return"value"in U&&(I[D]=U.value),I}}),"./node_modules/core-js/internals/object-get-own-property-descriptor.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/descriptors.js"),f=l("./node_modules/core-js/internals/function-call.js"),m=l("./node_modules/core-js/internals/object-property-is-enumerable.js"),p=l("./node_modules/core-js/internals/create-property-descriptor.js"),g=l("./node_modules/core-js/internals/to-indexed-object.js"),y=l("./node_modules/core-js/internals/to-property-key.js"),x=l("./node_modules/core-js/internals/has-own-property.js"),w=l("./node_modules/core-js/internals/ie8-dom-define.js"),_=Object.getOwnPropertyDescriptor;u.f=d?_:function(N,C){if(N=g(N),C=y(C),w)try{return _(N,C)}catch{}if(x(N,C))return p(!f(m.f,N,C),N[C])}}),"./node_modules/core-js/internals/object-get-own-property-names-external.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/classof-raw.js"),f=l("./node_modules/core-js/internals/to-indexed-object.js"),m=l("./node_modules/core-js/internals/object-get-own-property-names.js").f,p=l("./node_modules/core-js/internals/array-slice.js"),g=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],y=function(x){try{return m(x)}catch{return p(g)}};c.exports.f=function(w){return g&&d(w)==="Window"?y(w):m(f(w))}}),"./node_modules/core-js/internals/object-get-own-property-names.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/object-keys-internal.js"),f=l("./node_modules/core-js/internals/enum-bug-keys.js"),m=f.concat("length","prototype");u.f=Object.getOwnPropertyNames||function(g){return d(g,m)}}),"./node_modules/core-js/internals/object-get-own-property-symbols.js":(function(c,u){u.f=Object.getOwnPropertySymbols}),"./node_modules/core-js/internals/object-get-prototype-of.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/has-own-property.js"),f=l("./node_modules/core-js/internals/is-callable.js"),m=l("./node_modules/core-js/internals/to-object.js"),p=l("./node_modules/core-js/internals/shared-key.js"),g=l("./node_modules/core-js/internals/correct-prototype-getter.js"),y=p("IE_PROTO"),x=Object,w=x.prototype;c.exports=g?x.getPrototypeOf:function(_){var E=m(_);if(d(E,y))return E[y];var N=E.constructor;return f(N)&&E instanceof N?N.prototype:E instanceof x?w:null}}),"./node_modules/core-js/internals/object-is-extensible.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/fails.js"),f=l("./node_modules/core-js/internals/is-object.js"),m=l("./node_modules/core-js/internals/classof-raw.js"),p=l("./node_modules/core-js/internals/array-buffer-non-extensible.js"),g=Object.isExtensible,y=d(function(){});c.exports=y||p?function(w){return!f(w)||p&&m(w)==="ArrayBuffer"?!1:g?g(w):!0}:g}),"./node_modules/core-js/internals/object-is-prototype-of.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-uncurry-this.js");c.exports=d({}.isPrototypeOf)}),"./node_modules/core-js/internals/object-keys-internal.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-uncurry-this.js"),f=l("./node_modules/core-js/internals/has-own-property.js"),m=l("./node_modules/core-js/internals/to-indexed-object.js"),p=l("./node_modules/core-js/internals/array-includes.js").indexOf,g=l("./node_modules/core-js/internals/hidden-keys.js"),y=d([].push);c.exports=function(x,w){var _=m(x),E=0,N=[],C;for(C in _)!f(g,C)&&f(_,C)&&y(N,C);for(;w.length>E;)f(_,C=w[E++])&&(~p(N,C)||y(N,C));return N}}),"./node_modules/core-js/internals/object-keys.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/object-keys-internal.js"),f=l("./node_modules/core-js/internals/enum-bug-keys.js");c.exports=Object.keys||function(p){return d(p,f)}}),"./node_modules/core-js/internals/object-property-is-enumerable.js":(function(c,u){var l={}.propertyIsEnumerable,d=Object.getOwnPropertyDescriptor,f=d&&!l.call({1:2},1);u.f=f?function(p){var g=d(this,p);return!!g&&g.enumerable}:l}),"./node_modules/core-js/internals/object-set-prototype-of.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-uncurry-this-accessor.js"),f=l("./node_modules/core-js/internals/is-object.js"),m=l("./node_modules/core-js/internals/require-object-coercible.js"),p=l("./node_modules/core-js/internals/a-possible-prototype.js");c.exports=Object.setPrototypeOf||("__proto__"in{}?(function(){var g=!1,y={},x;try{x=d(Object.prototype,"__proto__","set"),x(y,[]),g=y instanceof Array}catch{}return function(_,E){return m(_),p(E),f(_)&&(g?x(_,E):_.__proto__=E),_}})():void 0)}),"./node_modules/core-js/internals/object-to-string.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/to-string-tag-support.js"),f=l("./node_modules/core-js/internals/classof.js");c.exports=d?{}.toString:function(){return"[object "+f(this)+"]"}}),"./node_modules/core-js/internals/ordinary-to-primitive.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-call.js"),f=l("./node_modules/core-js/internals/is-callable.js"),m=l("./node_modules/core-js/internals/is-object.js"),p=TypeError;c.exports=function(g,y){var x,w;if(y==="string"&&f(x=g.toString)&&!m(w=d(x,g))||f(x=g.valueOf)&&!m(w=d(x,g))||y!=="string"&&f(x=g.toString)&&!m(w=d(x,g)))return w;throw new p("Can't convert object to primitive value")}}),"./node_modules/core-js/internals/own-keys.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/get-built-in.js"),f=l("./node_modules/core-js/internals/function-uncurry-this.js"),m=l("./node_modules/core-js/internals/object-get-own-property-names.js"),p=l("./node_modules/core-js/internals/object-get-own-property-symbols.js"),g=l("./node_modules/core-js/internals/an-object.js"),y=f([].concat);c.exports=d("Reflect","ownKeys")||function(w){var _=m.f(g(w)),E=p.f;return E?y(_,E(w)):_}}),"./node_modules/core-js/internals/parse-json-string.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-uncurry-this.js"),f=l("./node_modules/core-js/internals/has-own-property.js"),m=SyntaxError,p=parseInt,g=String.fromCharCode,y=d("".charAt),x=d("".slice),w=d(/./.exec),_={'\\"':'"',"\\\\":"\\","\\/":"/","\\b":"\b","\\f":"\f","\\n":`
`,"\\r":"\r","\\t":"	"},E=/^[\da-f]{4}$/i,N=/^[\u0000-\u001F]$/;c.exports=function(C,I){for(var D=!0,U="";I<C.length;){var G=y(C,I);if(G==="\\"){var q=x(C,I,I+2);if(f(_,q))U+=_[q],I+=2;else if(q==="\\u"){I+=2;var J=x(C,I,I+4);if(!w(E,J))throw new m("Bad Unicode escape at: "+I);U+=g(p(J,16)),I+=4}else throw new m('Unknown escape sequence: "'+q+'"')}else if(G==='"'){D=!1,I++;break}else{if(w(N,G))throw new m("Bad control character in string literal at: "+I);U+=G,I++}}if(D)throw new m("Unterminated string at: "+I);return{value:U,end:I}}}),"./node_modules/core-js/internals/path.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/global-this.js");c.exports=d}),"./node_modules/core-js/internals/perform.js":(function(c){c.exports=function(u){try{return{error:!1,value:u()}}catch(l){return{error:!0,value:l}}}}),"./node_modules/core-js/internals/promise-constructor-detection.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/global-this.js"),f=l("./node_modules/core-js/internals/promise-native-constructor.js"),m=l("./node_modules/core-js/internals/is-callable.js"),p=l("./node_modules/core-js/internals/is-forced.js"),g=l("./node_modules/core-js/internals/inspect-source.js"),y=l("./node_modules/core-js/internals/well-known-symbol.js"),x=l("./node_modules/core-js/internals/environment.js"),w=l("./node_modules/core-js/internals/is-pure.js"),_=l("./node_modules/core-js/internals/environment-v8-version.js"),E=f&&f.prototype,N=y("species"),C=!1,I=m(d.PromiseRejectionEvent),D=p("Promise",function(){var U=g(f),G=U!==String(f);if(!G&&_===66||w&&!(E.catch&&E.finally))return!0;if(!_||_<51||!/native code/.test(U)){var q=new f(function(xe){xe(1)}),J=function(xe){xe(function(){},function(){})},de=q.constructor={};if(de[N]=J,C=q.then(function(){})instanceof J,!C)return!0}return!G&&(x==="BROWSER"||x==="DENO")&&!I});c.exports={CONSTRUCTOR:D,REJECTION_EVENT:I,SUBCLASSING:C}}),"./node_modules/core-js/internals/promise-native-constructor.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/global-this.js");c.exports=d.Promise}),"./node_modules/core-js/internals/promise-resolve.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/an-object.js"),f=l("./node_modules/core-js/internals/is-object.js"),m=l("./node_modules/core-js/internals/new-promise-capability.js");c.exports=function(p,g){if(d(p),f(g)&&g.constructor===p)return g;var y=m.f(p),x=y.resolve;return x(g),y.promise}}),"./node_modules/core-js/internals/promise-statics-incorrect-iteration.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/promise-native-constructor.js"),f=l("./node_modules/core-js/internals/check-correctness-of-iteration.js"),m=l("./node_modules/core-js/internals/promise-constructor-detection.js").CONSTRUCTOR;c.exports=m||!f(function(p){d.all(p).then(void 0,function(){})})}),"./node_modules/core-js/internals/queue.js":(function(c){var u=function(){this.head=null,this.tail=null};u.prototype={add:function(l){var d={item:l,next:null},f=this.tail;f?f.next=d:this.head=d,this.tail=d},get:function(){var l=this.head;if(l){var d=this.head=l.next;return d===null&&(this.tail=null),l.item}}},c.exports=u}),"./node_modules/core-js/internals/regexp-exec-abstract.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-call.js"),f=l("./node_modules/core-js/internals/an-object.js"),m=l("./node_modules/core-js/internals/is-callable.js"),p=l("./node_modules/core-js/internals/classof-raw.js"),g=l("./node_modules/core-js/internals/regexp-exec.js"),y=TypeError;c.exports=function(x,w){var _=x.exec;if(m(_)){var E=d(_,x,w);return E!==null&&f(E),E}if(p(x)==="RegExp")return d(g,x,w);throw new y("RegExp#exec called on incompatible receiver")}}),"./node_modules/core-js/internals/regexp-exec.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-call.js"),f=l("./node_modules/core-js/internals/function-uncurry-this.js"),m=l("./node_modules/core-js/internals/to-string.js"),p=l("./node_modules/core-js/internals/regexp-flags.js"),g=l("./node_modules/core-js/internals/regexp-sticky-helpers.js"),y=l("./node_modules/core-js/internals/shared.js"),x=l("./node_modules/core-js/internals/object-create.js"),w=l("./node_modules/core-js/internals/internal-state.js").get,_=l("./node_modules/core-js/internals/regexp-unsupported-dot-all.js"),E=l("./node_modules/core-js/internals/regexp-unsupported-ncg.js"),N=y("native-string-replace",String.prototype.replace),C=RegExp.prototype.exec,I=C,D=f("".charAt),U=f("".indexOf),G=f("".replace),q=f("".slice),J=(function(){var ve=/a/,ne=/b*/g;return d(C,ve,"a"),d(C,ne,"a"),ve.lastIndex!==0||ne.lastIndex!==0})(),de=g.BROKEN_CARET,xe=/()??/.exec("")[1]!==void 0,we=J||xe||de||_||E;we&&(I=function(ne){var ae=this,oe=w(ae),Ie=m(ne),Ce=oe.raw,be,ue,Pe,Re,He,Fe,ft;if(Ce)return Ce.lastIndex=ae.lastIndex,be=d(I,Ce,Ie),ae.lastIndex=Ce.lastIndex,be;var at=oe.groups,De=de&&ae.sticky,ut=d(p,ae),et=ae.source,Ue=0,jt=Ie;if(De&&(ut=G(ut,"y",""),U(ut,"g")===-1&&(ut+="g"),jt=q(Ie,ae.lastIndex),ae.lastIndex>0&&(!ae.multiline||ae.multiline&&D(Ie,ae.lastIndex-1)!==`
`)&&(et="(?: "+et+")",jt=" "+jt,Ue++),ue=new RegExp("^(?:"+et+")",ut)),xe&&(ue=new RegExp("^"+et+"$(?!\\s)",ut)),J&&(Pe=ae.lastIndex),Re=d(C,De?ue:ae,jt),De?Re?(Re.input=q(Re.input,Ue),Re[0]=q(Re[0],Ue),Re.index=ae.lastIndex,ae.lastIndex+=Re[0].length):ae.lastIndex=0:J&&Re&&(ae.lastIndex=ae.global?Re.index+Re[0].length:Pe),xe&&Re&&Re.length>1&&d(N,Re[0],ue,function(){for(He=1;He<arguments.length-2;He++)arguments[He]===void 0&&(Re[He]=void 0)}),Re&&at)for(Re.groups=Fe=x(null),He=0;He<at.length;He++)ft=at[He],Fe[ft[0]]=Re[ft[1]];return Re}),c.exports=I}),"./node_modules/core-js/internals/regexp-flags-detection.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/global-this.js"),f=l("./node_modules/core-js/internals/fails.js"),m=d.RegExp,p=!f(function(){var g=!0;try{m(".","d")}catch{g=!1}var y={},x="",w=g?"dgimsy":"gimsy",_=function(I,D){Object.defineProperty(y,I,{get:function(){return x+=D,!0}})},E={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};g&&(E.hasIndices="d");for(var N in E)_(N,E[N]);var C=Object.getOwnPropertyDescriptor(m.prototype,"flags").get.call(y);return C!==w||x!==w});c.exports={correct:p}}),"./node_modules/core-js/internals/regexp-flags.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/an-object.js");c.exports=function(){var f=d(this),m="";return f.hasIndices&&(m+="d"),f.global&&(m+="g"),f.ignoreCase&&(m+="i"),f.multiline&&(m+="m"),f.dotAll&&(m+="s"),f.unicode&&(m+="u"),f.unicodeSets&&(m+="v"),f.sticky&&(m+="y"),m}}),"./node_modules/core-js/internals/regexp-get-flags.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-call.js"),f=l("./node_modules/core-js/internals/has-own-property.js"),m=l("./node_modules/core-js/internals/object-is-prototype-of.js"),p=l("./node_modules/core-js/internals/regexp-flags-detection.js"),g=l("./node_modules/core-js/internals/regexp-flags.js"),y=RegExp.prototype;c.exports=p.correct?function(x){return x.flags}:function(x){return!p.correct&&m(y,x)&&!f(x,"flags")?d(g,x):x.flags}}),"./node_modules/core-js/internals/regexp-sticky-helpers.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/fails.js"),f=l("./node_modules/core-js/internals/global-this.js"),m=f.RegExp,p=d(function(){var x=m("a","y");return x.lastIndex=2,x.exec("abcd")!==null}),g=p||d(function(){return!m("a","y").sticky}),y=p||d(function(){var x=m("^r","gy");return x.lastIndex=2,x.exec("str")!==null});c.exports={BROKEN_CARET:y,MISSED_STICKY:g,UNSUPPORTED_Y:p}}),"./node_modules/core-js/internals/regexp-unsupported-dot-all.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/fails.js"),f=l("./node_modules/core-js/internals/global-this.js"),m=f.RegExp;c.exports=d(function(){var p=m(".","s");return!(p.dotAll&&p.test(`
`)&&p.flags==="s")})}),"./node_modules/core-js/internals/regexp-unsupported-ncg.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/fails.js"),f=l("./node_modules/core-js/internals/global-this.js"),m=f.RegExp;c.exports=d(function(){var p=m("(?<a>b)","g");return p.exec("b").groups.a!=="b"||"b".replace(p,"$<a>c")!=="bc"})}),"./node_modules/core-js/internals/require-object-coercible.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/is-null-or-undefined.js"),f=TypeError;c.exports=function(m){if(d(m))throw new f("Can't call method on "+m);return m}}),"./node_modules/core-js/internals/safe-get-built-in.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/global-this.js"),f=l("./node_modules/core-js/internals/descriptors.js"),m=Object.getOwnPropertyDescriptor;c.exports=function(p){if(!f)return d[p];var g=m(d,p);return g&&g.value}}),"./node_modules/core-js/internals/schedulers-fix.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/global-this.js"),f=l("./node_modules/core-js/internals/function-apply.js"),m=l("./node_modules/core-js/internals/is-callable.js"),p=l("./node_modules/core-js/internals/environment.js"),g=l("./node_modules/core-js/internals/environment-user-agent.js"),y=l("./node_modules/core-js/internals/array-slice.js"),x=l("./node_modules/core-js/internals/validate-arguments-length.js"),w=d.Function,_=/MSIE .\./.test(g)||p==="BUN"&&(function(){var E=d.Bun.version.split(".");return E.length<3||E[0]==="0"&&(E[1]<3||E[1]==="3"&&E[2]==="0")})();c.exports=function(E,N){var C=N?2:1;return _?function(I,D){var U=x(arguments.length,1)>C,G=m(I)?I:w(I),q=U?y(arguments,C):[],J=U?function(){f(G,this,q)}:G;return N?E(J,D):E(J)}:E}}),"./node_modules/core-js/internals/set-clone.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/set-helpers.js"),f=l("./node_modules/core-js/internals/set-iterate.js"),m=d.Set,p=d.add;c.exports=function(g){var y=new m;return f(g,function(x){p(y,x)}),y}}),"./node_modules/core-js/internals/set-difference.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/a-set.js"),f=l("./node_modules/core-js/internals/set-helpers.js"),m=l("./node_modules/core-js/internals/set-clone.js"),p=l("./node_modules/core-js/internals/set-size.js"),g=l("./node_modules/core-js/internals/get-set-record.js"),y=l("./node_modules/core-js/internals/set-iterate.js"),x=l("./node_modules/core-js/internals/iterate-simple.js"),w=f.has,_=f.remove;c.exports=function(N){var C=d(this),I=g(N),D=m(C);return p(C)<=I.size?y(C,function(U){I.includes(U)&&_(D,U)}):x(I.getIterator(),function(U){w(D,U)&&_(D,U)}),D}}),"./node_modules/core-js/internals/set-helpers.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-uncurry-this.js"),f=Set.prototype;c.exports={Set,add:d(f.add),has:d(f.has),remove:d(f.delete),proto:f}}),"./node_modules/core-js/internals/set-intersection.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/a-set.js"),f=l("./node_modules/core-js/internals/set-helpers.js"),m=l("./node_modules/core-js/internals/set-size.js"),p=l("./node_modules/core-js/internals/get-set-record.js"),g=l("./node_modules/core-js/internals/set-iterate.js"),y=l("./node_modules/core-js/internals/iterate-simple.js"),x=f.Set,w=f.add,_=f.has;c.exports=function(N){var C=d(this),I=p(N),D=new x;return m(C)>I.size?y(I.getIterator(),function(U){_(C,U)&&w(D,U)}):g(C,function(U){I.includes(U)&&w(D,U)}),D}}),"./node_modules/core-js/internals/set-is-disjoint-from.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/a-set.js"),f=l("./node_modules/core-js/internals/set-helpers.js").has,m=l("./node_modules/core-js/internals/set-size.js"),p=l("./node_modules/core-js/internals/get-set-record.js"),g=l("./node_modules/core-js/internals/set-iterate.js"),y=l("./node_modules/core-js/internals/iterate-simple.js"),x=l("./node_modules/core-js/internals/iterator-close.js");c.exports=function(_){var E=d(this),N=p(_);if(m(E)<=N.size)return g(E,function(I){if(N.includes(I))return!1},!0)!==!1;var C=N.getIterator();return y(C,function(I){if(f(E,I))return x(C,"normal",!1)})!==!1}}),"./node_modules/core-js/internals/set-is-subset-of.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/a-set.js"),f=l("./node_modules/core-js/internals/set-size.js"),m=l("./node_modules/core-js/internals/set-iterate.js"),p=l("./node_modules/core-js/internals/get-set-record.js");c.exports=function(y){var x=d(this),w=p(y);return f(x)>w.size?!1:m(x,function(_){if(!w.includes(_))return!1},!0)!==!1}}),"./node_modules/core-js/internals/set-is-superset-of.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/a-set.js"),f=l("./node_modules/core-js/internals/set-helpers.js").has,m=l("./node_modules/core-js/internals/set-size.js"),p=l("./node_modules/core-js/internals/get-set-record.js"),g=l("./node_modules/core-js/internals/iterate-simple.js"),y=l("./node_modules/core-js/internals/iterator-close.js");c.exports=function(w){var _=d(this),E=p(w);if(m(_)<E.size)return!1;var N=E.getIterator();return g(N,function(C){if(!f(_,C))return y(N,"normal",!1)})!==!1}}),"./node_modules/core-js/internals/set-iterate.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-uncurry-this.js"),f=l("./node_modules/core-js/internals/iterate-simple.js"),m=l("./node_modules/core-js/internals/set-helpers.js"),p=m.Set,g=m.proto,y=d(g.forEach),x=d(g.keys),w=x(new p).next;c.exports=function(_,E,N){return N?f({iterator:x(_),next:w},E):y(_,E)}}),"./node_modules/core-js/internals/set-size.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-uncurry-this-accessor.js"),f=l("./node_modules/core-js/internals/set-helpers.js");c.exports=d(f.proto,"size","get")||function(m){return m.size}}),"./node_modules/core-js/internals/set-species.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/get-built-in.js"),f=l("./node_modules/core-js/internals/define-built-in-accessor.js"),m=l("./node_modules/core-js/internals/well-known-symbol.js"),p=l("./node_modules/core-js/internals/descriptors.js"),g=m("species");c.exports=function(y){var x=d(y);p&&x&&!x[g]&&f(x,g,{configurable:!0,get:function(){return this}})}}),"./node_modules/core-js/internals/set-symmetric-difference.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/a-set.js"),f=l("./node_modules/core-js/internals/set-helpers.js"),m=l("./node_modules/core-js/internals/set-clone.js"),p=l("./node_modules/core-js/internals/get-set-record.js"),g=l("./node_modules/core-js/internals/iterate-simple.js"),y=f.add,x=f.has,w=f.remove;c.exports=function(E){var N=d(this),C=p(E).getIterator(),I=m(N);return g(C,function(D){x(N,D)?w(I,D):y(I,D)}),I}}),"./node_modules/core-js/internals/set-to-string-tag.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/object-define-property.js").f,f=l("./node_modules/core-js/internals/has-own-property.js"),m=l("./node_modules/core-js/internals/well-known-symbol.js"),p=m("toStringTag");c.exports=function(g,y,x){g&&!x&&(g=g.prototype),g&&!f(g,p)&&d(g,p,{configurable:!0,value:y})}}),"./node_modules/core-js/internals/set-union.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/a-set.js"),f=l("./node_modules/core-js/internals/set-helpers.js").add,m=l("./node_modules/core-js/internals/set-clone.js"),p=l("./node_modules/core-js/internals/get-set-record.js"),g=l("./node_modules/core-js/internals/iterate-simple.js");c.exports=function(x){var w=d(this),_=p(x).getIterator(),E=m(w);return g(_,function(N){f(E,N)}),E}}),"./node_modules/core-js/internals/shared-key.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/shared.js"),f=l("./node_modules/core-js/internals/uid.js"),m=d("keys");c.exports=function(p){return m[p]||(m[p]=f(p))}}),"./node_modules/core-js/internals/shared-store.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/is-pure.js"),f=l("./node_modules/core-js/internals/global-this.js"),m=l("./node_modules/core-js/internals/define-global-property.js"),p="__core-js_shared__",g=c.exports=f[p]||m(p,{});(g.versions||(g.versions=[])).push({version:"3.47.0",mode:d?"pure":"global",copyright:" 2014-2025 Denis Pushkarev (zloirock.ru), 2025 CoreJS Company (core-js.io)",license:"https://github.com/zloirock/core-js/blob/v3.47.0/LICENSE",source:"https://github.com/zloirock/core-js"})}),"./node_modules/core-js/internals/shared.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/shared-store.js");c.exports=function(f,m){return d[f]||(d[f]=m||{})}}),"./node_modules/core-js/internals/species-constructor.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/an-object.js"),f=l("./node_modules/core-js/internals/a-constructor.js"),m=l("./node_modules/core-js/internals/is-null-or-undefined.js"),p=l("./node_modules/core-js/internals/well-known-symbol.js"),g=p("species");c.exports=function(y,x){var w=d(y).constructor,_;return w===void 0||m(_=d(w)[g])?x:f(_)}}),"./node_modules/core-js/internals/string-html-forced.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/fails.js");c.exports=function(f){return d(function(){var m=""[f]('"');return m!==m.toLowerCase()||m.split('"').length>3})}}),"./node_modules/core-js/internals/string-multibyte.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-uncurry-this.js"),f=l("./node_modules/core-js/internals/to-integer-or-infinity.js"),m=l("./node_modules/core-js/internals/to-string.js"),p=l("./node_modules/core-js/internals/require-object-coercible.js"),g=d("".charAt),y=d("".charCodeAt),x=d("".slice),w=function(_){return function(E,N){var C=m(p(E)),I=f(N),D=C.length,U,G;return I<0||I>=D?_?"":void 0:(U=y(C,I),U<55296||U>56319||I+1===D||(G=y(C,I+1))<56320||G>57343?_?g(C,I):U:_?x(C,I,I+2):(U-55296<<10)+(G-56320)+65536)}};c.exports={codeAt:w(!1),charAt:w(!0)}}),"./node_modules/core-js/internals/string-trim-forced.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-name.js").PROPER,f=l("./node_modules/core-js/internals/fails.js"),m=l("./node_modules/core-js/internals/whitespaces.js"),p="";c.exports=function(g){return f(function(){return!!m[g]()||p[g]()!==p||d&&m[g].name!==g})}}),"./node_modules/core-js/internals/string-trim.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-uncurry-this.js"),f=l("./node_modules/core-js/internals/require-object-coercible.js"),m=l("./node_modules/core-js/internals/to-string.js"),p=l("./node_modules/core-js/internals/whitespaces.js"),g=d("".replace),y=RegExp("^["+p+"]+"),x=RegExp("(^|[^"+p+"])["+p+"]+$"),w=function(_){return function(E){var N=m(f(E));return _&1&&(N=g(N,y,"")),_&2&&(N=g(N,x,"$1")),N}};c.exports={start:w(1),end:w(2),trim:w(3)}}),"./node_modules/core-js/internals/symbol-constructor-detection.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/environment-v8-version.js"),f=l("./node_modules/core-js/internals/fails.js"),m=l("./node_modules/core-js/internals/global-this.js"),p=m.String;c.exports=!!Object.getOwnPropertySymbols&&!f(function(){var g=Symbol("symbol detection");return!p(g)||!(Object(g)instanceof Symbol)||!Symbol.sham&&d&&d<41})}),"./node_modules/core-js/internals/symbol-define-to-primitive.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-call.js"),f=l("./node_modules/core-js/internals/get-built-in.js"),m=l("./node_modules/core-js/internals/well-known-symbol.js"),p=l("./node_modules/core-js/internals/define-built-in.js");c.exports=function(){var g=f("Symbol"),y=g&&g.prototype,x=y&&y.valueOf,w=m("toPrimitive");y&&!y[w]&&p(y,w,function(_){return d(x,this)},{arity:1})}}),"./node_modules/core-js/internals/symbol-registry-detection.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/symbol-constructor-detection.js");c.exports=d&&!!Symbol.for&&!!Symbol.keyFor}),"./node_modules/core-js/internals/task.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/global-this.js"),f=l("./node_modules/core-js/internals/function-apply.js"),m=l("./node_modules/core-js/internals/function-bind-context.js"),p=l("./node_modules/core-js/internals/is-callable.js"),g=l("./node_modules/core-js/internals/has-own-property.js"),y=l("./node_modules/core-js/internals/fails.js"),x=l("./node_modules/core-js/internals/html.js"),w=l("./node_modules/core-js/internals/array-slice.js"),_=l("./node_modules/core-js/internals/document-create-element.js"),E=l("./node_modules/core-js/internals/validate-arguments-length.js"),N=l("./node_modules/core-js/internals/environment-is-ios.js"),C=l("./node_modules/core-js/internals/environment-is-node.js"),I=d.setImmediate,D=d.clearImmediate,U=d.process,G=d.Dispatch,q=d.Function,J=d.MessageChannel,de=d.String,xe=0,we={},ve="onreadystatechange",ne,ae,oe,Ie;y(function(){ne=d.location});var Ce=function(Re){if(g(we,Re)){var He=we[Re];delete we[Re],He()}},be=function(Re){return function(){Ce(Re)}},ue=function(Re){Ce(Re.data)},Pe=function(Re){d.postMessage(de(Re),ne.protocol+"//"+ne.host)};(!I||!D)&&(I=function(He){E(arguments.length,1);var Fe=p(He)?He:q(He),ft=w(arguments,1);return we[++xe]=function(){f(Fe,void 0,ft)},ae(xe),xe},D=function(He){delete we[He]},C?ae=function(Re){U.nextTick(be(Re))}:G&&G.now?ae=function(Re){G.now(be(Re))}:J&&!N?(oe=new J,Ie=oe.port2,oe.port1.onmessage=ue,ae=m(Ie.postMessage,Ie)):d.addEventListener&&p(d.postMessage)&&!d.importScripts&&ne&&ne.protocol!=="file:"&&!y(Pe)?(ae=Pe,d.addEventListener("message",ue,!1)):ve in _("script")?ae=function(Re){x.appendChild(_("script"))[ve]=function(){x.removeChild(this),Ce(Re)}}:ae=function(Re){setTimeout(be(Re),0)}),c.exports={set:I,clear:D}}),"./node_modules/core-js/internals/this-number-value.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-uncurry-this.js");c.exports=d(1.1.valueOf)}),"./node_modules/core-js/internals/to-absolute-index.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/to-integer-or-infinity.js"),f=Math.max,m=Math.min;c.exports=function(p,g){var y=d(p);return y<0?f(y+g,0):m(y,g)}}),"./node_modules/core-js/internals/to-indexed-object.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/indexed-object.js"),f=l("./node_modules/core-js/internals/require-object-coercible.js");c.exports=function(m){return d(f(m))}}),"./node_modules/core-js/internals/to-integer-or-infinity.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/math-trunc.js");c.exports=function(f){var m=+f;return m!==m||m===0?0:d(m)}}),"./node_modules/core-js/internals/to-length.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/to-integer-or-infinity.js"),f=Math.min;c.exports=function(m){var p=d(m);return p>0?f(p,9007199254740991):0}}),"./node_modules/core-js/internals/to-object.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/require-object-coercible.js"),f=Object;c.exports=function(m){return f(d(m))}}),"./node_modules/core-js/internals/to-primitive.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-call.js"),f=l("./node_modules/core-js/internals/is-object.js"),m=l("./node_modules/core-js/internals/is-symbol.js"),p=l("./node_modules/core-js/internals/get-method.js"),g=l("./node_modules/core-js/internals/ordinary-to-primitive.js"),y=l("./node_modules/core-js/internals/well-known-symbol.js"),x=TypeError,w=y("toPrimitive");c.exports=function(_,E){if(!f(_)||m(_))return _;var N=p(_,w),C;if(N){if(E===void 0&&(E="default"),C=d(N,_,E),!f(C)||m(C))return C;throw new x("Can't convert object to primitive value")}return E===void 0&&(E="number"),g(_,E)}}),"./node_modules/core-js/internals/to-property-key.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/to-primitive.js"),f=l("./node_modules/core-js/internals/is-symbol.js");c.exports=function(m){var p=d(m,"string");return f(p)?p:p+""}}),"./node_modules/core-js/internals/to-set-like.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/get-built-in.js"),f=l("./node_modules/core-js/internals/is-callable.js"),m=l("./node_modules/core-js/internals/is-iterable.js"),p=l("./node_modules/core-js/internals/is-object.js"),g=d("Set"),y=function(x){return p(x)&&typeof x.size=="number"&&f(x.has)&&f(x.keys)};c.exports=function(x){return y(x)?x:m(x)?new g(x):x}}),"./node_modules/core-js/internals/to-string-tag-support.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/well-known-symbol.js"),f=d("toStringTag"),m={};m[f]="z",c.exports=String(m)==="[object z]"}),"./node_modules/core-js/internals/to-string.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/classof.js"),f=String;c.exports=function(m){if(d(m)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return f(m)}}),"./node_modules/core-js/internals/try-to-string.js":(function(c){var u=String;c.exports=function(l){try{return u(l)}catch{return"Object"}}}),"./node_modules/core-js/internals/uid.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-uncurry-this.js"),f=0,m=Math.random(),p=d(1.1.toString);c.exports=function(g){return"Symbol("+(g===void 0?"":g)+")_"+p(++f+m,36)}}),"./node_modules/core-js/internals/use-symbol-as-uid.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/symbol-constructor-detection.js");c.exports=d&&!Symbol.sham&&typeof Symbol.iterator=="symbol"}),"./node_modules/core-js/internals/v8-prototype-define-bug.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/descriptors.js"),f=l("./node_modules/core-js/internals/fails.js");c.exports=d&&f(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42})}),"./node_modules/core-js/internals/validate-arguments-length.js":(function(c){var u=TypeError;c.exports=function(l,d){if(l<d)throw new u("Not enough arguments");return l}}),"./node_modules/core-js/internals/weak-map-basic-detection.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/global-this.js"),f=l("./node_modules/core-js/internals/is-callable.js"),m=d.WeakMap;c.exports=f(m)&&/native code/.test(String(m))}),"./node_modules/core-js/internals/well-known-symbol-define.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/path.js"),f=l("./node_modules/core-js/internals/has-own-property.js"),m=l("./node_modules/core-js/internals/well-known-symbol-wrapped.js"),p=l("./node_modules/core-js/internals/object-define-property.js").f;c.exports=function(g){var y=d.Symbol||(d.Symbol={});f(y,g)||p(y,g,{value:m.f(g)})}}),"./node_modules/core-js/internals/well-known-symbol-wrapped.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/well-known-symbol.js");u.f=d}),"./node_modules/core-js/internals/well-known-symbol.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/global-this.js"),f=l("./node_modules/core-js/internals/shared.js"),m=l("./node_modules/core-js/internals/has-own-property.js"),p=l("./node_modules/core-js/internals/uid.js"),g=l("./node_modules/core-js/internals/symbol-constructor-detection.js"),y=l("./node_modules/core-js/internals/use-symbol-as-uid.js"),x=d.Symbol,w=f("wks"),_=y?x.for||x:x&&x.withoutSetter||p;c.exports=function(E){return m(w,E)||(w[E]=g&&m(x,E)?x[E]:_("Symbol."+E)),w[E]}}),"./node_modules/core-js/internals/whitespaces.js":(function(c){c.exports=`	
\v\f\r \u2028\u2029\uFEFF`}),"./node_modules/core-js/modules/es.array.concat.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/fails.js"),m=l("./node_modules/core-js/internals/is-array.js"),p=l("./node_modules/core-js/internals/is-object.js"),g=l("./node_modules/core-js/internals/to-object.js"),y=l("./node_modules/core-js/internals/length-of-array-like.js"),x=l("./node_modules/core-js/internals/does-not-exceed-safe-integer.js"),w=l("./node_modules/core-js/internals/create-property.js"),_=l("./node_modules/core-js/internals/array-species-create.js"),E=l("./node_modules/core-js/internals/array-method-has-species-support.js"),N=l("./node_modules/core-js/internals/well-known-symbol.js"),C=l("./node_modules/core-js/internals/environment-v8-version.js"),I=N("isConcatSpreadable"),D=C>=51||!f(function(){var q=[];return q[I]=!1,q.concat()[0]!==q}),U=function(q){if(!p(q))return!1;var J=q[I];return J!==void 0?!!J:m(q)},G=!D||!E("concat");d({target:"Array",proto:!0,arity:1,forced:G},{concat:function(J){var de=g(this),xe=_(de,0),we=0,ve,ne,ae,oe,Ie;for(ve=-1,ae=arguments.length;ve<ae;ve++)if(Ie=ve===-1?de:arguments[ve],U(Ie))for(oe=y(Ie),x(we+oe),ne=0;ne<oe;ne++,we++)ne in Ie&&w(xe,we,Ie[ne]);else x(we+1),w(xe,we++,Ie);return xe.length=we,xe}})}),"./node_modules/core-js/modules/es.array.from.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/array-from.js"),m=l("./node_modules/core-js/internals/check-correctness-of-iteration.js"),p=!m(function(g){Array.from(g)});d({target:"Array",stat:!0,forced:p},{from:f})}),"./node_modules/core-js/modules/es.array.index-of.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/function-uncurry-this-clause.js"),m=l("./node_modules/core-js/internals/array-includes.js").indexOf,p=l("./node_modules/core-js/internals/array-method-is-strict.js"),g=f([].indexOf),y=!!g&&1/g([1],1,-0)<0,x=y||!p("indexOf");d({target:"Array",proto:!0,forced:x},{indexOf:function(_){var E=arguments.length>1?arguments[1]:void 0;return y?g(this,_,E)||0:m(this,_,E)}})}),"./node_modules/core-js/modules/es.array.iterator.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/to-indexed-object.js"),f=l("./node_modules/core-js/internals/add-to-unscopables.js"),m=l("./node_modules/core-js/internals/iterators.js"),p=l("./node_modules/core-js/internals/internal-state.js"),g=l("./node_modules/core-js/internals/object-define-property.js").f,y=l("./node_modules/core-js/internals/iterator-define.js"),x=l("./node_modules/core-js/internals/create-iter-result-object.js"),w=l("./node_modules/core-js/internals/is-pure.js"),_=l("./node_modules/core-js/internals/descriptors.js"),E="Array Iterator",N=p.set,C=p.getterFor(E);c.exports=y(Array,"Array",function(D,U){N(this,{type:E,target:d(D),index:0,kind:U})},function(){var D=C(this),U=D.target,G=D.index++;if(!U||G>=U.length)return D.target=null,x(void 0,!0);switch(D.kind){case"keys":return x(G,!1);case"values":return x(U[G],!1)}return x([G,U[G]],!1)},"values");var I=m.Arguments=m.Array;if(f("keys"),f("values"),f("entries"),!w&&_&&I.name!=="values")try{g(I,"name",{value:"values"})}catch{}}),"./node_modules/core-js/modules/es.array.join.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/function-uncurry-this.js"),m=l("./node_modules/core-js/internals/indexed-object.js"),p=l("./node_modules/core-js/internals/to-indexed-object.js"),g=l("./node_modules/core-js/internals/array-method-is-strict.js"),y=f([].join),x=m!==Object,w=x||!g("join",",");d({target:"Array",proto:!0,forced:w},{join:function(E){return y(p(this),E===void 0?",":E)}})}),"./node_modules/core-js/modules/es.array.map.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/array-iteration.js").map,m=l("./node_modules/core-js/internals/array-method-has-species-support.js"),p=m("map");d({target:"Array",proto:!0,forced:!p},{map:function(y){return f(this,y,arguments.length>1?arguments[1]:void 0)}})}),"./node_modules/core-js/modules/es.array.reduce.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/array-reduce.js").left,m=l("./node_modules/core-js/internals/array-method-is-strict.js"),p=l("./node_modules/core-js/internals/environment-v8-version.js"),g=l("./node_modules/core-js/internals/environment-is-node.js"),y=!g&&p>79&&p<83,x=y||!m("reduce");d({target:"Array",proto:!0,forced:x},{reduce:function(_){var E=arguments.length;return f(this,_,E,E>1?arguments[1]:void 0)}})}),"./node_modules/core-js/modules/es.array.reverse.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/function-uncurry-this.js"),m=l("./node_modules/core-js/internals/is-array.js"),p=f([].reverse),g=[1,2];d({target:"Array",proto:!0,forced:String(g)===String(g.reverse())},{reverse:function(){return m(this)&&(this.length=this.length),p(this)}})}),"./node_modules/core-js/modules/es.array.slice.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/is-array.js"),m=l("./node_modules/core-js/internals/is-constructor.js"),p=l("./node_modules/core-js/internals/is-object.js"),g=l("./node_modules/core-js/internals/to-absolute-index.js"),y=l("./node_modules/core-js/internals/length-of-array-like.js"),x=l("./node_modules/core-js/internals/to-indexed-object.js"),w=l("./node_modules/core-js/internals/create-property.js"),_=l("./node_modules/core-js/internals/well-known-symbol.js"),E=l("./node_modules/core-js/internals/array-method-has-species-support.js"),N=l("./node_modules/core-js/internals/array-slice.js"),C=E("slice"),I=_("species"),D=Array,U=Math.max;d({target:"Array",proto:!0,forced:!C},{slice:function(q,J){var de=x(this),xe=y(de),we=g(q,xe),ve=g(J===void 0?xe:J,xe),ne,ae,oe;if(f(de)&&(ne=de.constructor,m(ne)&&(ne===D||f(ne.prototype))?ne=void 0:p(ne)&&(ne=ne[I],ne===null&&(ne=void 0)),ne===D||ne===void 0))return N(de,we,ve);for(ae=new(ne===void 0?D:ne)(U(ve-we,0)),oe=0;we<ve;we++,oe++)we in de&&w(ae,oe,de[we]);return ae.length=oe,ae}})}),"./node_modules/core-js/modules/es.function.name.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/descriptors.js"),f=l("./node_modules/core-js/internals/function-name.js").EXISTS,m=l("./node_modules/core-js/internals/function-uncurry-this.js"),p=l("./node_modules/core-js/internals/define-built-in-accessor.js"),g=Function.prototype,y=m(g.toString),x=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,w=m(x.exec),_="name";d&&!f&&p(g,_,{configurable:!0,get:function(){try{return w(x,y(this))[1]}catch{return""}}})}),"./node_modules/core-js/modules/es.iterator.constructor.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/global-this.js"),m=l("./node_modules/core-js/internals/an-instance.js"),p=l("./node_modules/core-js/internals/an-object.js"),g=l("./node_modules/core-js/internals/is-callable.js"),y=l("./node_modules/core-js/internals/object-get-prototype-of.js"),x=l("./node_modules/core-js/internals/define-built-in-accessor.js"),w=l("./node_modules/core-js/internals/create-property.js"),_=l("./node_modules/core-js/internals/fails.js"),E=l("./node_modules/core-js/internals/has-own-property.js"),N=l("./node_modules/core-js/internals/well-known-symbol.js"),C=l("./node_modules/core-js/internals/iterators-core.js").IteratorPrototype,I=l("./node_modules/core-js/internals/descriptors.js"),D=l("./node_modules/core-js/internals/is-pure.js"),U="constructor",G="Iterator",q=N("toStringTag"),J=TypeError,de=f[G],xe=D||!g(de)||de.prototype!==C||!_(function(){de({})}),we=function(){if(m(this,C),y(this)===C)throw new J("Abstract class Iterator not directly constructable")},ve=function(ne,ae){I?x(C,ne,{configurable:!0,get:function(){return ae},set:function(oe){if(p(this),this===C)throw new J("You can't redefine this property");E(this,ne)?this[ne]=oe:w(this,ne,oe)}}):C[ne]=ae};E(C,q)||ve(q,G),(xe||!E(C,U)||C[U]===Object)&&ve(U,we),we.prototype=C,d({global:!0,constructor:!0,forced:xe},{Iterator:we})}),"./node_modules/core-js/modules/es.iterator.for-each.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/function-call.js"),m=l("./node_modules/core-js/internals/iterate.js"),p=l("./node_modules/core-js/internals/a-callable.js"),g=l("./node_modules/core-js/internals/an-object.js"),y=l("./node_modules/core-js/internals/get-iterator-direct.js"),x=l("./node_modules/core-js/internals/iterator-close.js"),w=l("./node_modules/core-js/internals/iterator-helper-without-closing-on-early-error.js"),_=w("forEach",TypeError);d({target:"Iterator",proto:!0,real:!0,forced:_},{forEach:function(N){g(this);try{p(N)}catch(D){x(this,"throw",D)}if(_)return f(_,this,N);var C=y(this),I=0;m(C,function(D){N(D,I++)},{IS_RECORD:!0})}})}),"./node_modules/core-js/modules/es.iterator.map.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/function-call.js"),m=l("./node_modules/core-js/internals/a-callable.js"),p=l("./node_modules/core-js/internals/an-object.js"),g=l("./node_modules/core-js/internals/get-iterator-direct.js"),y=l("./node_modules/core-js/internals/iterator-create-proxy.js"),x=l("./node_modules/core-js/internals/call-with-safe-iteration-closing.js"),w=l("./node_modules/core-js/internals/iterator-close.js"),_=l("./node_modules/core-js/internals/iterator-helper-throws-on-invalid-iterator.js"),E=l("./node_modules/core-js/internals/iterator-helper-without-closing-on-early-error.js"),N=l("./node_modules/core-js/internals/is-pure.js"),C=!N&&!_("map",function(){}),I=!N&&!C&&E("map",TypeError),D=N||C||I,U=y(function(){var G=this.iterator,q=p(f(this.next,G)),J=this.done=!!q.done;if(!J)return x(G,this.mapper,[q.value,this.counter++],!0)});d({target:"Iterator",proto:!0,real:!0,forced:D},{map:function(q){p(this);try{m(q)}catch(J){w(this,"throw",J)}return I?f(I,this,q):new U(g(this),{mapper:q})}})}),"./node_modules/core-js/modules/es.json.stringify.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/get-built-in.js"),m=l("./node_modules/core-js/internals/function-apply.js"),p=l("./node_modules/core-js/internals/function-call.js"),g=l("./node_modules/core-js/internals/function-uncurry-this.js"),y=l("./node_modules/core-js/internals/fails.js"),x=l("./node_modules/core-js/internals/is-array.js"),w=l("./node_modules/core-js/internals/is-callable.js"),_=l("./node_modules/core-js/internals/is-raw-json.js"),E=l("./node_modules/core-js/internals/is-symbol.js"),N=l("./node_modules/core-js/internals/classof-raw.js"),C=l("./node_modules/core-js/internals/to-string.js"),I=l("./node_modules/core-js/internals/array-slice.js"),D=l("./node_modules/core-js/internals/parse-json-string.js"),U=l("./node_modules/core-js/internals/uid.js"),G=l("./node_modules/core-js/internals/symbol-constructor-detection.js"),q=l("./node_modules/core-js/internals/native-raw-json.js"),J=String,de=f("JSON","stringify"),xe=g(/./.exec),we=g("".charAt),ve=g("".charCodeAt),ne=g("".replace),ae=g("".slice),oe=g([].push),Ie=g(1.1.toString),Ce=/[\uD800-\uDFFF]/g,be=/^[\uD800-\uDBFF]$/,ue=/^[\uDC00-\uDFFF]$/,Pe=U(),Re=Pe.length,He=!G||y(function(){var ut=f("Symbol")("stringify detection");return de([ut])!=="[null]"||de({a:ut})!=="{}"||de(Object(ut))!=="{}"}),Fe=y(function(){return de("\uDF06\uD834")!=='"\\udf06\\ud834"'||de("\uDEAD")!=='"\\udead"'}),ft=He?function(ut,et){var Ue=I(arguments),jt=De(et);if(!(!w(jt)&&(ut===void 0||E(ut))))return Ue[1]=function(rt,Ct){if(w(jt)&&(Ct=p(jt,this,J(rt),Ct)),!E(Ct))return Ct},m(de,null,Ue)}:de,at=function(ut,et,Ue){var jt=we(Ue,et-1),rt=we(Ue,et+1);return xe(be,ut)&&!xe(ue,rt)||xe(ue,ut)&&!xe(be,jt)?"\\u"+Ie(ve(ut,0),16):ut},De=function(ut){if(w(ut))return ut;if(x(ut)){for(var et=ut.length,Ue=[],jt=0;jt<et;jt++){var rt=ut[jt];typeof rt=="string"?oe(Ue,rt):(typeof rt=="number"||N(rt)==="Number"||N(rt)==="String")&&oe(Ue,C(rt))}var Ct=Ue.length,ke=!0;return function(Xe,mt){if(ke)return ke=!1,mt;if(x(this))return mt;for(var Jt=0;Jt<Ct;Jt++)if(Ue[Jt]===Xe)return mt}}};de&&d({target:"JSON",stat:!0,arity:3,forced:He||Fe||!q},{stringify:function(et,Ue,jt){var rt=De(Ue),Ct=[],ke=ft(et,function(tn,Gr){var Xr=w(rt)?p(rt,this,J(tn),Gr):Gr;return!q&&_(Xr)?Pe+(oe(Ct,Xr.rawJSON)-1):Xr},jt);if(typeof ke!="string"||(Fe&&(ke=ne(ke,Ce,at)),q))return ke;for(var Xe="",mt=ke.length,Jt=0;Jt<mt;Jt++){var tr=we(ke,Jt);if(tr==='"'){var lr=D(ke,++Jt).end-1,Pr=ae(ke,Jt,lr);Xe+=ae(Pr,0,Re)===Pe?Ct[ae(Pr,Re)]:'"'+Pr+'"',Jt=lr}else Xe+=tr}return Xe}})}),"./node_modules/core-js/modules/es.number.constructor.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/is-pure.js"),m=l("./node_modules/core-js/internals/descriptors.js"),p=l("./node_modules/core-js/internals/global-this.js"),g=l("./node_modules/core-js/internals/path.js"),y=l("./node_modules/core-js/internals/function-uncurry-this.js"),x=l("./node_modules/core-js/internals/is-forced.js"),w=l("./node_modules/core-js/internals/has-own-property.js"),_=l("./node_modules/core-js/internals/inherit-if-required.js"),E=l("./node_modules/core-js/internals/object-is-prototype-of.js"),N=l("./node_modules/core-js/internals/is-symbol.js"),C=l("./node_modules/core-js/internals/to-primitive.js"),I=l("./node_modules/core-js/internals/fails.js"),D=l("./node_modules/core-js/internals/object-get-own-property-names.js").f,U=l("./node_modules/core-js/internals/object-get-own-property-descriptor.js").f,G=l("./node_modules/core-js/internals/object-define-property.js").f,q=l("./node_modules/core-js/internals/this-number-value.js"),J=l("./node_modules/core-js/internals/string-trim.js").trim,de="Number",xe=p[de],we=g[de],ve=xe.prototype,ne=p.TypeError,ae=y("".slice),oe=y("".charCodeAt),Ie=function(He){var Fe=C(He,"number");return typeof Fe=="bigint"?Fe:Ce(Fe)},Ce=function(He){var Fe=C(He,"number"),ft,at,De,ut,et,Ue,jt,rt;if(N(Fe))throw new ne("Cannot convert a Symbol value to a number");if(typeof Fe=="string"&&Fe.length>2){if(Fe=J(Fe),ft=oe(Fe,0),ft===43||ft===45){if(at=oe(Fe,2),at===88||at===120)return NaN}else if(ft===48){switch(oe(Fe,1)){case 66:case 98:De=2,ut=49;break;case 79:case 111:De=8,ut=55;break;default:return+Fe}for(et=ae(Fe,2),Ue=et.length,jt=0;jt<Ue;jt++)if(rt=oe(et,jt),rt<48||rt>ut)return NaN;return parseInt(et,De)}}return+Fe},be=x(de,!xe(" 0o1")||!xe("0b1")||xe("+0x1")),ue=function(He){return E(ve,He)&&I(function(){q(He)})},Pe=function(Fe){var ft=arguments.length<1?0:xe(Ie(Fe));return ue(this)?_(Object(ft),this,Pe):ft};Pe.prototype=ve,be&&!f&&(ve.constructor=Pe),d({global:!0,constructor:!0,wrap:!0,forced:be},{Number:Pe});var Re=function(He,Fe){for(var ft=m?D(Fe):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),at=0,De;ft.length>at;at++)w(Fe,De=ft[at])&&!w(He,De)&&G(He,De,U(Fe,De))};f&&we&&Re(g[de],we),(be||f)&&Re(g[de],xe)}),"./node_modules/core-js/modules/es.object.assign.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/object-assign.js");d({target:"Object",stat:!0,arity:2,forced:Object.assign!==f},{assign:f})}),"./node_modules/core-js/modules/es.object.get-own-property-symbols.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/symbol-constructor-detection.js"),m=l("./node_modules/core-js/internals/fails.js"),p=l("./node_modules/core-js/internals/object-get-own-property-symbols.js"),g=l("./node_modules/core-js/internals/to-object.js"),y=!f||m(function(){p.f(1)});d({target:"Object",stat:!0,forced:y},{getOwnPropertySymbols:function(w){var _=p.f;return _?_(g(w)):[]}})}),"./node_modules/core-js/modules/es.object.keys.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/to-object.js"),m=l("./node_modules/core-js/internals/object-keys.js"),p=l("./node_modules/core-js/internals/fails.js"),g=p(function(){m(1)});d({target:"Object",stat:!0,forced:g},{keys:function(x){return m(f(x))}})}),"./node_modules/core-js/modules/es.object.to-string.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/to-string-tag-support.js"),f=l("./node_modules/core-js/internals/define-built-in.js"),m=l("./node_modules/core-js/internals/object-to-string.js");d||f(Object.prototype,"toString",m,{unsafe:!0})}),"./node_modules/core-js/modules/es.promise.all.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/function-call.js"),m=l("./node_modules/core-js/internals/a-callable.js"),p=l("./node_modules/core-js/internals/new-promise-capability.js"),g=l("./node_modules/core-js/internals/perform.js"),y=l("./node_modules/core-js/internals/iterate.js"),x=l("./node_modules/core-js/internals/promise-statics-incorrect-iteration.js");d({target:"Promise",stat:!0,forced:x},{all:function(_){var E=this,N=p.f(E),C=N.resolve,I=N.reject,D=g(function(){var U=m(E.resolve),G=[],q=0,J=1;y(_,function(de){var xe=q++,we=!1;J++,f(U,E,de).then(function(ve){we||(we=!0,G[xe]=ve,--J||C(G))},I)}),--J||C(G)});return D.error&&I(D.value),N.promise}})}),"./node_modules/core-js/modules/es.promise.catch.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/is-pure.js"),m=l("./node_modules/core-js/internals/promise-constructor-detection.js").CONSTRUCTOR,p=l("./node_modules/core-js/internals/promise-native-constructor.js"),g=l("./node_modules/core-js/internals/get-built-in.js"),y=l("./node_modules/core-js/internals/is-callable.js"),x=l("./node_modules/core-js/internals/define-built-in.js"),w=p&&p.prototype;if(d({target:"Promise",proto:!0,forced:m,real:!0},{catch:function(E){return this.then(void 0,E)}}),!f&&y(p)){var _=g("Promise").prototype.catch;w.catch!==_&&x(w,"catch",_,{unsafe:!0})}}),"./node_modules/core-js/modules/es.promise.constructor.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/is-pure.js"),m=l("./node_modules/core-js/internals/environment-is-node.js"),p=l("./node_modules/core-js/internals/global-this.js"),g=l("./node_modules/core-js/internals/path.js"),y=l("./node_modules/core-js/internals/function-call.js"),x=l("./node_modules/core-js/internals/define-built-in.js"),w=l("./node_modules/core-js/internals/object-set-prototype-of.js"),_=l("./node_modules/core-js/internals/set-to-string-tag.js"),E=l("./node_modules/core-js/internals/set-species.js"),N=l("./node_modules/core-js/internals/a-callable.js"),C=l("./node_modules/core-js/internals/is-callable.js"),I=l("./node_modules/core-js/internals/is-object.js"),D=l("./node_modules/core-js/internals/an-instance.js"),U=l("./node_modules/core-js/internals/species-constructor.js"),G=l("./node_modules/core-js/internals/task.js").set,q=l("./node_modules/core-js/internals/microtask.js"),J=l("./node_modules/core-js/internals/host-report-errors.js"),de=l("./node_modules/core-js/internals/perform.js"),xe=l("./node_modules/core-js/internals/queue.js"),we=l("./node_modules/core-js/internals/internal-state.js"),ve=l("./node_modules/core-js/internals/promise-native-constructor.js"),ne=l("./node_modules/core-js/internals/promise-constructor-detection.js"),ae=l("./node_modules/core-js/internals/new-promise-capability.js"),oe="Promise",Ie=ne.CONSTRUCTOR,Ce=ne.REJECTION_EVENT,be=ne.SUBCLASSING,ue=we.getterFor(oe),Pe=we.set,Re=ve&&ve.prototype,He=ve,Fe=Re,ft=p.TypeError,at=p.document,De=p.process,ut=ae.f,et=ut,Ue=!!(at&&at.createEvent&&p.dispatchEvent),jt="unhandledrejection",rt="rejectionhandled",Ct=0,ke=1,Xe=2,mt=1,Jt=2,tr,lr,Pr,tn,Gr=function(Qt){var gr;return I(Qt)&&C(gr=Qt.then)?gr:!1},Xr=function(Qt,gr){var Yr=gr.value,en=gr.state===ke,On=en?Qt.ok:Qt.fail,fn=Qt.resolve,Jn=Qt.reject,ln=Qt.domain,Hr,yn,mn;try{On?(en||(gr.rejection===Jt&&ot(gr),gr.rejection=mt),On===!0?Hr=Yr:(ln&&ln.enter(),Hr=On(Yr),ln&&(ln.exit(),mn=!0)),Hr===Qt.promise?Jn(new ft("Promise-chain cycle")):(yn=Gr(Hr))?y(yn,Hr,fn,Jn):fn(Hr)):Jn(Yr)}catch(Mn){ln&&!mn&&ln.exit(),Jn(Mn)}},Qr=function(Qt,gr){Qt.notified||(Qt.notified=!0,q(function(){for(var Yr=Qt.reactions,en;en=Yr.get();)Xr(en,Qt);Qt.notified=!1,gr&&!Qt.rejection&&wn(Qt)}))},Pn=function(Qt,gr,Yr){var en,On;Ue?(en=at.createEvent("Event"),en.promise=gr,en.reason=Yr,en.initEvent(Qt,!1,!0),p.dispatchEvent(en)):en={promise:gr,reason:Yr},!Ce&&(On=p["on"+Qt])?On(en):Qt===jt&&J("Unhandled promise rejection",Yr)},wn=function(Qt){y(G,p,function(){var gr=Qt.facade,Yr=Qt.value,en=yi(Qt),On;if(en&&(On=de(function(){m?De.emit("unhandledRejection",Yr,gr):Pn(jt,gr,Yr)}),Qt.rejection=m||yi(Qt)?Jt:mt,On.error))throw On.value})},yi=function(Qt){return Qt.rejection!==mt&&!Qt.parent},ot=function(Qt){y(G,p,function(){var gr=Qt.facade;m?De.emit("rejectionHandled",gr):Pn(rt,gr,Qt.value)})},Gt=function(Qt,gr,Yr){return function(en){Qt(gr,en,Yr)}},Ir=function(Qt,gr,Yr){Qt.done||(Qt.done=!0,Yr&&(Qt=Yr),Qt.value=gr,Qt.state=Xe,Qr(Qt,!0))},ar=function(Qt,gr,Yr){if(!Qt.done){Qt.done=!0,Yr&&(Qt=Yr);try{if(Qt.facade===gr)throw new ft("Promise can't be resolved itself");var en=Gr(gr);en?q(function(){var On={done:!1};try{y(en,gr,Gt(ar,On,Qt),Gt(Ir,On,Qt))}catch(fn){Ir(On,fn,Qt)}}):(Qt.value=gr,Qt.state=ke,Qr(Qt,!1))}catch(On){Ir({done:!1},On,Qt)}}};if(Ie&&(He=function(gr){D(this,Fe),N(gr),y(tr,this);var Yr=ue(this);try{gr(Gt(ar,Yr),Gt(Ir,Yr))}catch(en){Ir(Yr,en)}},Fe=He.prototype,tr=function(gr){Pe(this,{type:oe,done:!1,notified:!1,parent:!1,reactions:new xe,rejection:!1,state:Ct,value:null})},tr.prototype=x(Fe,"then",function(gr,Yr){var en=ue(this),On=ut(U(this,He));return en.parent=!0,On.ok=C(gr)?gr:!0,On.fail=C(Yr)&&Yr,On.domain=m?De.domain:void 0,en.state===Ct?en.reactions.add(On):q(function(){Xr(On,en)}),On.promise}),lr=function(){var Qt=new tr,gr=ue(Qt);this.promise=Qt,this.resolve=Gt(ar,gr),this.reject=Gt(Ir,gr)},ae.f=ut=function(Qt){return Qt===He||Qt===Pr?new lr(Qt):et(Qt)},!f&&C(ve)&&Re!==Object.prototype)){tn=Re.then,be||x(Re,"then",function(gr,Yr){var en=this;return new He(function(On,fn){y(tn,en,On,fn)}).then(gr,Yr)},{unsafe:!0});try{delete Re.constructor}catch{}w&&w(Re,Fe)}d({global:!0,constructor:!0,wrap:!0,forced:Ie},{Promise:He}),Pr=g.Promise,_(He,oe,!1,!0),E(oe)}),"./node_modules/core-js/modules/es.promise.js":(function(c,u,l){l("./node_modules/core-js/modules/es.promise.constructor.js"),l("./node_modules/core-js/modules/es.promise.all.js"),l("./node_modules/core-js/modules/es.promise.catch.js"),l("./node_modules/core-js/modules/es.promise.race.js"),l("./node_modules/core-js/modules/es.promise.reject.js"),l("./node_modules/core-js/modules/es.promise.resolve.js")}),"./node_modules/core-js/modules/es.promise.race.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/function-call.js"),m=l("./node_modules/core-js/internals/a-callable.js"),p=l("./node_modules/core-js/internals/new-promise-capability.js"),g=l("./node_modules/core-js/internals/perform.js"),y=l("./node_modules/core-js/internals/iterate.js"),x=l("./node_modules/core-js/internals/promise-statics-incorrect-iteration.js");d({target:"Promise",stat:!0,forced:x},{race:function(_){var E=this,N=p.f(E),C=N.reject,I=g(function(){var D=m(E.resolve);y(_,function(U){f(D,E,U).then(N.resolve,C)})});return I.error&&C(I.value),N.promise}})}),"./node_modules/core-js/modules/es.promise.reject.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/new-promise-capability.js"),m=l("./node_modules/core-js/internals/promise-constructor-detection.js").CONSTRUCTOR;d({target:"Promise",stat:!0,forced:m},{reject:function(g){var y=f.f(this),x=y.reject;return x(g),y.promise}})}),"./node_modules/core-js/modules/es.promise.resolve.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/get-built-in.js"),m=l("./node_modules/core-js/internals/is-pure.js"),p=l("./node_modules/core-js/internals/promise-native-constructor.js"),g=l("./node_modules/core-js/internals/promise-constructor-detection.js").CONSTRUCTOR,y=l("./node_modules/core-js/internals/promise-resolve.js"),x=f("Promise"),w=m&&!g;d({target:"Promise",stat:!0,forced:m||g},{resolve:function(E){return y(w&&this===x?p:this,E)}})}),"./node_modules/core-js/modules/es.regexp.exec.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/regexp-exec.js");d({target:"RegExp",proto:!0,forced:/./.exec!==f},{exec:f})}),"./node_modules/core-js/modules/es.regexp.test.js":(function(c,u,l){l("./node_modules/core-js/modules/es.regexp.exec.js");var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/function-call.js"),m=l("./node_modules/core-js/internals/is-callable.js"),p=l("./node_modules/core-js/internals/an-object.js"),g=l("./node_modules/core-js/internals/to-string.js"),y=(function(){var w=!1,_=/[ac]/;return _.exec=function(){return w=!0,/./.exec.apply(this,arguments)},_.test("abc")===!0&&w})(),x=/./.test;d({target:"RegExp",proto:!0,forced:!y},{test:function(w){var _=p(this),E=g(w),N=_.exec;if(!m(N))return f(x,_,E);var C=f(N,_,E);return C===null?!1:(p(C),!0)}})}),"./node_modules/core-js/modules/es.regexp.to-string.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-name.js").PROPER,f=l("./node_modules/core-js/internals/define-built-in.js"),m=l("./node_modules/core-js/internals/an-object.js"),p=l("./node_modules/core-js/internals/to-string.js"),g=l("./node_modules/core-js/internals/fails.js"),y=l("./node_modules/core-js/internals/regexp-get-flags.js"),x="toString",w=RegExp.prototype,_=w[x],E=g(function(){return _.call({source:"a",flags:"b"})!=="/a/b"}),N=d&&_.name!==x;(E||N)&&f(w,x,function(){var I=m(this),D=p(I.source),U=p(y(I));return"/"+D+"/"+U},{unsafe:!0})}),"./node_modules/core-js/modules/es.set.constructor.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/collection.js"),f=l("./node_modules/core-js/internals/collection-strong.js");d("Set",function(m){return function(){return m(this,arguments.length?arguments[0]:void 0)}},f)}),"./node_modules/core-js/modules/es.set.js":(function(c,u,l){l("./node_modules/core-js/modules/es.set.constructor.js")}),"./node_modules/core-js/modules/es.string.ends-with.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/function-uncurry-this-clause.js"),m=l("./node_modules/core-js/internals/object-get-own-property-descriptor.js").f,p=l("./node_modules/core-js/internals/to-length.js"),g=l("./node_modules/core-js/internals/to-string.js"),y=l("./node_modules/core-js/internals/not-a-regexp.js"),x=l("./node_modules/core-js/internals/require-object-coercible.js"),w=l("./node_modules/core-js/internals/correct-is-regexp-logic.js"),_=l("./node_modules/core-js/internals/is-pure.js"),E=f("".slice),N=Math.min,C=w("endsWith"),I=!_&&!C&&!!(function(){var D=m(String.prototype,"endsWith");return D&&!D.writable})();d({target:"String",proto:!0,forced:!I&&!C},{endsWith:function(U){var G=g(x(this));y(U);var q=arguments.length>1?arguments[1]:void 0,J=G.length,de=q===void 0?J:N(p(q),J),xe=g(U);return E(G,de-xe.length,de)===xe}})}),"./node_modules/core-js/modules/es.string.includes.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/function-uncurry-this.js"),m=l("./node_modules/core-js/internals/not-a-regexp.js"),p=l("./node_modules/core-js/internals/require-object-coercible.js"),g=l("./node_modules/core-js/internals/to-string.js"),y=l("./node_modules/core-js/internals/correct-is-regexp-logic.js"),x=f("".indexOf);d({target:"String",proto:!0,forced:!y("includes")},{includes:function(_){return!!~x(g(p(this)),g(m(_)),arguments.length>1?arguments[1]:void 0)}})}),"./node_modules/core-js/modules/es.string.iterator.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/string-multibyte.js").charAt,f=l("./node_modules/core-js/internals/to-string.js"),m=l("./node_modules/core-js/internals/internal-state.js"),p=l("./node_modules/core-js/internals/iterator-define.js"),g=l("./node_modules/core-js/internals/create-iter-result-object.js"),y="String Iterator",x=m.set,w=m.getterFor(y);p(String,"String",function(_){x(this,{type:y,string:f(_),index:0})},function(){var E=w(this),N=E.string,C=E.index,I;return C>=N.length?g(void 0,!0):(I=d(N,C),E.index+=I.length,g(I,!1))})}),"./node_modules/core-js/modules/es.string.link.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/create-html.js"),m=l("./node_modules/core-js/internals/string-html-forced.js");d({target:"String",proto:!0,forced:m("link")},{link:function(g){return f(this,"a","href",g)}})}),"./node_modules/core-js/modules/es.string.match.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-call.js"),f=l("./node_modules/core-js/internals/function-uncurry-this.js"),m=l("./node_modules/core-js/internals/fix-regexp-well-known-symbol-logic.js"),p=l("./node_modules/core-js/internals/an-object.js"),g=l("./node_modules/core-js/internals/is-object.js"),y=l("./node_modules/core-js/internals/to-length.js"),x=l("./node_modules/core-js/internals/to-string.js"),w=l("./node_modules/core-js/internals/require-object-coercible.js"),_=l("./node_modules/core-js/internals/get-method.js"),E=l("./node_modules/core-js/internals/advance-string-index.js"),N=l("./node_modules/core-js/internals/regexp-get-flags.js"),C=l("./node_modules/core-js/internals/regexp-exec-abstract.js"),I=f("".indexOf);m("match",function(D,U,G){return[function(J){var de=w(this),xe=g(J)?_(J,D):void 0;return xe?d(xe,J,de):new RegExp(J)[D](x(de))},function(q){var J=p(this),de=x(q),xe=G(U,J,de);if(xe.done)return xe.value;var we=x(N(J));if(I(we,"g")===-1)return C(J,de);var ve=I(we,"u")!==-1;J.lastIndex=0;for(var ne=[],ae=0,oe;(oe=C(J,de))!==null;){var Ie=x(oe[0]);ne[ae]=Ie,Ie===""&&(J.lastIndex=E(de,y(J.lastIndex),ve)),ae++}return ae===0?null:ne}]})}),"./node_modules/core-js/modules/es.string.replace.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-apply.js"),f=l("./node_modules/core-js/internals/function-call.js"),m=l("./node_modules/core-js/internals/function-uncurry-this.js"),p=l("./node_modules/core-js/internals/fix-regexp-well-known-symbol-logic.js"),g=l("./node_modules/core-js/internals/fails.js"),y=l("./node_modules/core-js/internals/an-object.js"),x=l("./node_modules/core-js/internals/is-callable.js"),w=l("./node_modules/core-js/internals/is-object.js"),_=l("./node_modules/core-js/internals/to-integer-or-infinity.js"),E=l("./node_modules/core-js/internals/to-length.js"),N=l("./node_modules/core-js/internals/to-string.js"),C=l("./node_modules/core-js/internals/require-object-coercible.js"),I=l("./node_modules/core-js/internals/advance-string-index.js"),D=l("./node_modules/core-js/internals/get-method.js"),U=l("./node_modules/core-js/internals/get-substitution.js"),G=l("./node_modules/core-js/internals/regexp-get-flags.js"),q=l("./node_modules/core-js/internals/regexp-exec-abstract.js"),J=l("./node_modules/core-js/internals/well-known-symbol.js"),de=J("replace"),xe=Math.max,we=Math.min,ve=m([].concat),ne=m([].push),ae=m("".indexOf),oe=m("".slice),Ie=function(Pe){return Pe===void 0?Pe:String(Pe)},Ce=(function(){return"a".replace(/./,"$0")==="$0"})(),be=(function(){return/./[de]?/./[de]("a","$0")==="":!1})(),ue=!g(function(){var Pe=/./;return Pe.exec=function(){var Re=[];return Re.groups={a:"7"},Re},"".replace(Pe,"$<a>")!=="7"});p("replace",function(Pe,Re,He){var Fe=be?"$":"$0";return[function(at,De){var ut=C(this),et=w(at)?D(at,de):void 0;return et?f(et,at,ut,De):f(Re,N(ut),at,De)},function(ft,at){var De=y(this),ut=N(ft);if(typeof at=="string"&&ae(at,Fe)===-1&&ae(at,"$<")===-1){var et=He(Re,De,ut,at);if(et.done)return et.value}var Ue=x(at);Ue||(at=N(at));var jt=N(G(De)),rt=ae(jt,"g")!==-1,Ct;rt&&(Ct=ae(jt,"u")!==-1,De.lastIndex=0);for(var ke=[],Xe;Xe=q(De,ut),!(Xe===null||(ne(ke,Xe),!rt));){var mt=N(Xe[0]);mt===""&&(De.lastIndex=I(ut,E(De.lastIndex),Ct))}for(var Jt="",tr=0,lr=0;lr<ke.length;lr++){Xe=ke[lr];for(var Pr=N(Xe[0]),tn=xe(we(_(Xe.index),ut.length),0),Gr=[],Xr,Qr=1;Qr<Xe.length;Qr++)ne(Gr,Ie(Xe[Qr]));var Pn=Xe.groups;if(Ue){var wn=ve([Pr],Gr,tn,ut);Pn!==void 0&&ne(wn,Pn),Xr=N(d(at,void 0,wn))}else Xr=U(Pr,ut,tn,Gr,Pn,at);tn>=tr&&(Jt+=oe(ut,tr,tn)+Xr,tr=tn+Pr.length)}return Jt+oe(ut,tr)}]},!ue||!Ce||be)}),"./node_modules/core-js/modules/es.string.split.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/function-call.js"),f=l("./node_modules/core-js/internals/function-uncurry-this.js"),m=l("./node_modules/core-js/internals/fix-regexp-well-known-symbol-logic.js"),p=l("./node_modules/core-js/internals/an-object.js"),g=l("./node_modules/core-js/internals/is-object.js"),y=l("./node_modules/core-js/internals/require-object-coercible.js"),x=l("./node_modules/core-js/internals/species-constructor.js"),w=l("./node_modules/core-js/internals/advance-string-index.js"),_=l("./node_modules/core-js/internals/to-length.js"),E=l("./node_modules/core-js/internals/to-string.js"),N=l("./node_modules/core-js/internals/get-method.js"),C=l("./node_modules/core-js/internals/regexp-exec-abstract.js"),I=l("./node_modules/core-js/internals/regexp-sticky-helpers.js"),D=l("./node_modules/core-js/internals/fails.js"),U=I.UNSUPPORTED_Y,G=4294967295,q=Math.min,J=f([].push),de=f("".slice),xe=!D(function(){var ve=/(?:)/,ne=ve.exec;ve.exec=function(){return ne.apply(this,arguments)};var ae="ab".split(ve);return ae.length!==2||ae[0]!=="a"||ae[1]!=="b"}),we="abbc".split(/(b)*/)[1]==="c"||"test".split(/(?:)/,-1).length!==4||"ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||".".split(/()()/).length>1||"".split(/.?/).length;m("split",function(ve,ne,ae){var oe="0".split(void 0,0).length?function(Ie,Ce){return Ie===void 0&&Ce===0?[]:d(ne,this,Ie,Ce)}:ne;return[function(Ce,be){var ue=y(this),Pe=g(Ce)?N(Ce,ve):void 0;return Pe?d(Pe,Ce,ue,be):d(oe,E(ue),Ce,be)},function(Ie,Ce){var be=p(this),ue=E(Ie);if(!we){var Pe=ae(oe,be,ue,Ce,oe!==ne);if(Pe.done)return Pe.value}var Re=x(be,RegExp),He=be.unicode,Fe=(be.ignoreCase?"i":"")+(be.multiline?"m":"")+(be.unicode?"u":"")+(U?"g":"y"),ft=new Re(U?"^(?:"+be.source+")":be,Fe),at=Ce===void 0?G:Ce>>>0;if(at===0)return[];if(ue.length===0)return C(ft,ue)===null?[ue]:[];for(var De=0,ut=0,et=[];ut<ue.length;){ft.lastIndex=U?0:ut;var Ue=C(ft,U?de(ue,ut):ue),jt;if(Ue===null||(jt=q(_(ft.lastIndex+(U?ut:0)),ue.length))===De)ut=w(ue,ut,He);else{if(J(et,de(ue,De,ut)),et.length===at)return et;for(var rt=1;rt<=Ue.length-1;rt++)if(J(et,Ue[rt]),et.length===at)return et;ut=De=jt}}return J(et,de(ue,De)),et}]},we||!xe,U)}),"./node_modules/core-js/modules/es.string.starts-with.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/function-uncurry-this-clause.js"),m=l("./node_modules/core-js/internals/object-get-own-property-descriptor.js").f,p=l("./node_modules/core-js/internals/to-length.js"),g=l("./node_modules/core-js/internals/to-string.js"),y=l("./node_modules/core-js/internals/not-a-regexp.js"),x=l("./node_modules/core-js/internals/require-object-coercible.js"),w=l("./node_modules/core-js/internals/correct-is-regexp-logic.js"),_=l("./node_modules/core-js/internals/is-pure.js"),E=f("".slice),N=Math.min,C=w("startsWith"),I=!_&&!C&&!!(function(){var D=m(String.prototype,"startsWith");return D&&!D.writable})();d({target:"String",proto:!0,forced:!I&&!C},{startsWith:function(U){var G=g(x(this));y(U);var q=p(N(arguments.length>1?arguments[1]:void 0,G.length)),J=g(U);return E(G,q,q+J.length)===J}})}),"./node_modules/core-js/modules/es.string.trim.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/string-trim.js").trim,m=l("./node_modules/core-js/internals/string-trim-forced.js");d({target:"String",proto:!0,forced:m("trim")},{trim:function(){return f(this)}})}),"./node_modules/core-js/modules/es.symbol.constructor.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/global-this.js"),m=l("./node_modules/core-js/internals/function-call.js"),p=l("./node_modules/core-js/internals/function-uncurry-this.js"),g=l("./node_modules/core-js/internals/is-pure.js"),y=l("./node_modules/core-js/internals/descriptors.js"),x=l("./node_modules/core-js/internals/symbol-constructor-detection.js"),w=l("./node_modules/core-js/internals/fails.js"),_=l("./node_modules/core-js/internals/has-own-property.js"),E=l("./node_modules/core-js/internals/object-is-prototype-of.js"),N=l("./node_modules/core-js/internals/an-object.js"),C=l("./node_modules/core-js/internals/to-indexed-object.js"),I=l("./node_modules/core-js/internals/to-property-key.js"),D=l("./node_modules/core-js/internals/to-string.js"),U=l("./node_modules/core-js/internals/create-property-descriptor.js"),G=l("./node_modules/core-js/internals/object-create.js"),q=l("./node_modules/core-js/internals/object-keys.js"),J=l("./node_modules/core-js/internals/object-get-own-property-names.js"),de=l("./node_modules/core-js/internals/object-get-own-property-names-external.js"),xe=l("./node_modules/core-js/internals/object-get-own-property-symbols.js"),we=l("./node_modules/core-js/internals/object-get-own-property-descriptor.js"),ve=l("./node_modules/core-js/internals/object-define-property.js"),ne=l("./node_modules/core-js/internals/object-define-properties.js"),ae=l("./node_modules/core-js/internals/object-property-is-enumerable.js"),oe=l("./node_modules/core-js/internals/define-built-in.js"),Ie=l("./node_modules/core-js/internals/define-built-in-accessor.js"),Ce=l("./node_modules/core-js/internals/shared.js"),be=l("./node_modules/core-js/internals/shared-key.js"),ue=l("./node_modules/core-js/internals/hidden-keys.js"),Pe=l("./node_modules/core-js/internals/uid.js"),Re=l("./node_modules/core-js/internals/well-known-symbol.js"),He=l("./node_modules/core-js/internals/well-known-symbol-wrapped.js"),Fe=l("./node_modules/core-js/internals/well-known-symbol-define.js"),ft=l("./node_modules/core-js/internals/symbol-define-to-primitive.js"),at=l("./node_modules/core-js/internals/set-to-string-tag.js"),De=l("./node_modules/core-js/internals/internal-state.js"),ut=l("./node_modules/core-js/internals/array-iteration.js").forEach,et=be("hidden"),Ue="Symbol",jt="prototype",rt=De.set,Ct=De.getterFor(Ue),ke=Object[jt],Xe=f.Symbol,mt=Xe&&Xe[jt],Jt=f.RangeError,tr=f.TypeError,lr=f.QObject,Pr=we.f,tn=ve.f,Gr=de.f,Xr=ae.f,Qr=p([].push),Pn=Ce("symbols"),wn=Ce("op-symbols"),yi=Ce("wks"),ot=!lr||!lr[jt]||!lr[jt].findChild,Gt=function(ln,Hr,yn){var mn=Pr(ke,Hr);mn&&delete ke[Hr],tn(ln,Hr,yn),mn&&ln!==ke&&tn(ke,Hr,mn)},Ir=y&&w(function(){return G(tn({},"a",{get:function(){return tn(this,"a",{value:7}).a}})).a!==7})?Gt:tn,ar=function(ln,Hr){var yn=Pn[ln]=G(mt);return rt(yn,{type:Ue,tag:ln,description:Hr}),y||(yn.description=Hr),yn},Qt=function(Hr,yn,mn){Hr===ke&&Qt(wn,yn,mn),N(Hr);var Mn=I(yn);return N(mn),_(Pn,Mn)?(mn.enumerable?(_(Hr,et)&&Hr[et][Mn]&&(Hr[et][Mn]=!1),mn=G(mn,{enumerable:U(0,!1)})):(_(Hr,et)||tn(Hr,et,U(1,G(null))),Hr[et][Mn]=!0),Ir(Hr,Mn,mn)):tn(Hr,Mn,mn)},gr=function(Hr,yn){N(Hr);var mn=C(yn),Mn=q(mn).concat(Jn(mn));return ut(Mn,function(li){(!y||m(en,mn,li))&&Qt(Hr,li,mn[li])}),Hr},Yr=function(Hr,yn){return yn===void 0?G(Hr):gr(G(Hr),yn)},en=function(Hr){var yn=I(Hr),mn=m(Xr,this,yn);return this===ke&&_(Pn,yn)&&!_(wn,yn)?!1:mn||!_(this,yn)||!_(Pn,yn)||_(this,et)&&this[et][yn]?mn:!0},On=function(Hr,yn){var mn=C(Hr),Mn=I(yn);if(!(mn===ke&&_(Pn,Mn)&&!_(wn,Mn))){var li=Pr(mn,Mn);return li&&_(Pn,Mn)&&!(_(mn,et)&&mn[et][Mn])&&(li.enumerable=!0),li}},fn=function(Hr){var yn=Gr(C(Hr)),mn=[];return ut(yn,function(Mn){!_(Pn,Mn)&&!_(ue,Mn)&&Qr(mn,Mn)}),mn},Jn=function(ln){var Hr=ln===ke,yn=Gr(Hr?wn:C(ln)),mn=[];return ut(yn,function(Mn){_(Pn,Mn)&&(!Hr||_(ke,Mn))&&Qr(mn,Pn[Mn])}),mn};x||(Xe=function(){if(E(mt,this))throw new tr("Symbol is not a constructor");var Hr=!arguments.length||arguments[0]===void 0?void 0:D(arguments[0]),yn=Pe(Hr),mn=function(Mn){var li=this===void 0?f:this;li===ke&&m(mn,wn,Mn),_(li,et)&&_(li[et],yn)&&(li[et][yn]=!1);var Cs=U(1,Mn);try{Ir(li,yn,Cs)}catch(Ms){if(!(Ms instanceof Jt))throw Ms;Gt(li,yn,Cs)}};return y&&ot&&Ir(ke,yn,{configurable:!0,set:mn}),ar(yn,Hr)},mt=Xe[jt],oe(mt,"toString",function(){return Ct(this).tag}),oe(Xe,"withoutSetter",function(ln){return ar(Pe(ln),ln)}),ae.f=en,ve.f=Qt,ne.f=gr,we.f=On,J.f=de.f=fn,xe.f=Jn,He.f=function(ln){return ar(Re(ln),ln)},y&&(Ie(mt,"description",{configurable:!0,get:function(){return Ct(this).description}}),g||oe(ke,"propertyIsEnumerable",en,{unsafe:!0}))),d({global:!0,constructor:!0,wrap:!0,forced:!x,sham:!x},{Symbol:Xe}),ut(q(yi),function(ln){Fe(ln)}),d({target:Ue,stat:!0,forced:!x},{useSetter:function(){ot=!0},useSimple:function(){ot=!1}}),d({target:"Object",stat:!0,forced:!x,sham:!y},{create:Yr,defineProperty:Qt,defineProperties:gr,getOwnPropertyDescriptor:On}),d({target:"Object",stat:!0,forced:!x},{getOwnPropertyNames:fn}),ft(),at(Xe,Ue),ue[et]=!0}),"./node_modules/core-js/modules/es.symbol.description.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/descriptors.js"),m=l("./node_modules/core-js/internals/global-this.js"),p=l("./node_modules/core-js/internals/function-uncurry-this.js"),g=l("./node_modules/core-js/internals/has-own-property.js"),y=l("./node_modules/core-js/internals/is-callable.js"),x=l("./node_modules/core-js/internals/object-is-prototype-of.js"),w=l("./node_modules/core-js/internals/to-string.js"),_=l("./node_modules/core-js/internals/define-built-in-accessor.js"),E=l("./node_modules/core-js/internals/copy-constructor-properties.js"),N=m.Symbol,C=N&&N.prototype;if(f&&y(N)&&(!("description"in C)||N().description!==void 0)){var I={},D=function(){var ve=arguments.length<1||arguments[0]===void 0?void 0:w(arguments[0]),ne=x(C,this)?new N(ve):ve===void 0?N():N(ve);return ve===""&&(I[ne]=!0),ne};E(D,N),D.prototype=C,C.constructor=D;var U=String(N("description detection"))==="Symbol(description detection)",G=p(C.valueOf),q=p(C.toString),J=/^Symbol\((.*)\)[^)]+$/,de=p("".replace),xe=p("".slice);_(C,"description",{configurable:!0,get:function(){var ve=G(this);if(g(I,ve))return"";var ne=q(ve),ae=U?xe(ne,7,-1):de(ne,J,"$1");return ae===""?void 0:ae}}),d({global:!0,constructor:!0,forced:!0},{Symbol:D})}}),"./node_modules/core-js/modules/es.symbol.for.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/get-built-in.js"),m=l("./node_modules/core-js/internals/has-own-property.js"),p=l("./node_modules/core-js/internals/to-string.js"),g=l("./node_modules/core-js/internals/shared.js"),y=l("./node_modules/core-js/internals/symbol-registry-detection.js"),x=g("string-to-symbol-registry"),w=g("symbol-to-string-registry");d({target:"Symbol",stat:!0,forced:!y},{for:function(_){var E=p(_);if(m(x,E))return x[E];var N=f("Symbol")(E);return x[E]=N,w[N]=E,N}})}),"./node_modules/core-js/modules/es.symbol.iterator.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/well-known-symbol-define.js");d("iterator")}),"./node_modules/core-js/modules/es.symbol.js":(function(c,u,l){l("./node_modules/core-js/modules/es.symbol.constructor.js"),l("./node_modules/core-js/modules/es.symbol.for.js"),l("./node_modules/core-js/modules/es.symbol.key-for.js"),l("./node_modules/core-js/modules/es.json.stringify.js"),l("./node_modules/core-js/modules/es.object.get-own-property-symbols.js")}),"./node_modules/core-js/modules/es.symbol.key-for.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/has-own-property.js"),m=l("./node_modules/core-js/internals/is-symbol.js"),p=l("./node_modules/core-js/internals/try-to-string.js"),g=l("./node_modules/core-js/internals/shared.js"),y=l("./node_modules/core-js/internals/symbol-registry-detection.js"),x=g("symbol-to-string-registry");d({target:"Symbol",stat:!0,forced:!y},{keyFor:function(_){if(!m(_))throw new TypeError(p(_)+" is not a symbol");if(f(x,_))return x[_]}})}),"./node_modules/core-js/modules/esnext.iterator.constructor.js":(function(c,u,l){l("./node_modules/core-js/modules/es.iterator.constructor.js")}),"./node_modules/core-js/modules/esnext.iterator.for-each.js":(function(c,u,l){l("./node_modules/core-js/modules/es.iterator.for-each.js")}),"./node_modules/core-js/modules/esnext.iterator.map.js":(function(c,u,l){l("./node_modules/core-js/modules/es.iterator.map.js")}),"./node_modules/core-js/modules/esnext.set.add-all.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/a-set.js"),m=l("./node_modules/core-js/internals/set-helpers.js").add;d({target:"Set",proto:!0,real:!0,forced:!0},{addAll:function(){for(var g=f(this),y=0,x=arguments.length;y<x;y++)m(g,arguments[y]);return g}})}),"./node_modules/core-js/modules/esnext.set.delete-all.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/a-set.js"),m=l("./node_modules/core-js/internals/set-helpers.js").remove;d({target:"Set",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var g=f(this),y=!0,x,w=0,_=arguments.length;w<_;w++)x=m(g,arguments[w]),y=y&&x;return!!y}})}),"./node_modules/core-js/modules/esnext.set.difference.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/function-call.js"),m=l("./node_modules/core-js/internals/to-set-like.js"),p=l("./node_modules/core-js/internals/set-difference.js");d({target:"Set",proto:!0,real:!0,forced:!0},{difference:function(y){return f(p,this,m(y))}})}),"./node_modules/core-js/modules/esnext.set.every.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/function-bind-context.js"),m=l("./node_modules/core-js/internals/a-set.js"),p=l("./node_modules/core-js/internals/set-iterate.js");d({target:"Set",proto:!0,real:!0,forced:!0},{every:function(y){var x=m(this),w=f(y,arguments.length>1?arguments[1]:void 0);return p(x,function(_){if(!w(_,_,x))return!1},!0)!==!1}})}),"./node_modules/core-js/modules/esnext.set.filter.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/function-bind-context.js"),m=l("./node_modules/core-js/internals/a-set.js"),p=l("./node_modules/core-js/internals/set-helpers.js"),g=l("./node_modules/core-js/internals/set-iterate.js"),y=p.Set,x=p.add;d({target:"Set",proto:!0,real:!0,forced:!0},{filter:function(_){var E=m(this),N=f(_,arguments.length>1?arguments[1]:void 0),C=new y;return g(E,function(I){N(I,I,E)&&x(C,I)}),C}})}),"./node_modules/core-js/modules/esnext.set.find.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/function-bind-context.js"),m=l("./node_modules/core-js/internals/a-set.js"),p=l("./node_modules/core-js/internals/set-iterate.js");d({target:"Set",proto:!0,real:!0,forced:!0},{find:function(y){var x=m(this),w=f(y,arguments.length>1?arguments[1]:void 0),_=p(x,function(E){if(w(E,E,x))return{value:E}},!0);return _&&_.value}})}),"./node_modules/core-js/modules/esnext.set.intersection.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/function-call.js"),m=l("./node_modules/core-js/internals/to-set-like.js"),p=l("./node_modules/core-js/internals/set-intersection.js");d({target:"Set",proto:!0,real:!0,forced:!0},{intersection:function(y){return f(p,this,m(y))}})}),"./node_modules/core-js/modules/esnext.set.is-disjoint-from.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/function-call.js"),m=l("./node_modules/core-js/internals/to-set-like.js"),p=l("./node_modules/core-js/internals/set-is-disjoint-from.js");d({target:"Set",proto:!0,real:!0,forced:!0},{isDisjointFrom:function(y){return f(p,this,m(y))}})}),"./node_modules/core-js/modules/esnext.set.is-subset-of.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/function-call.js"),m=l("./node_modules/core-js/internals/to-set-like.js"),p=l("./node_modules/core-js/internals/set-is-subset-of.js");d({target:"Set",proto:!0,real:!0,forced:!0},{isSubsetOf:function(y){return f(p,this,m(y))}})}),"./node_modules/core-js/modules/esnext.set.is-superset-of.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/function-call.js"),m=l("./node_modules/core-js/internals/to-set-like.js"),p=l("./node_modules/core-js/internals/set-is-superset-of.js");d({target:"Set",proto:!0,real:!0,forced:!0},{isSupersetOf:function(y){return f(p,this,m(y))}})}),"./node_modules/core-js/modules/esnext.set.join.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/function-uncurry-this.js"),m=l("./node_modules/core-js/internals/a-set.js"),p=l("./node_modules/core-js/internals/set-iterate.js"),g=l("./node_modules/core-js/internals/to-string.js"),y=f([].join),x=f([].push);d({target:"Set",proto:!0,real:!0,forced:!0},{join:function(_){var E=m(this),N=_===void 0?",":g(_),C=[];return p(E,function(I){x(C,I)}),y(C,N)}})}),"./node_modules/core-js/modules/esnext.set.map.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/function-bind-context.js"),m=l("./node_modules/core-js/internals/a-set.js"),p=l("./node_modules/core-js/internals/set-helpers.js"),g=l("./node_modules/core-js/internals/set-iterate.js"),y=p.Set,x=p.add;d({target:"Set",proto:!0,real:!0,forced:!0},{map:function(_){var E=m(this),N=f(_,arguments.length>1?arguments[1]:void 0),C=new y;return g(E,function(I){x(C,N(I,I,E))}),C}})}),"./node_modules/core-js/modules/esnext.set.reduce.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/a-callable.js"),m=l("./node_modules/core-js/internals/a-set.js"),p=l("./node_modules/core-js/internals/set-iterate.js"),g=TypeError;d({target:"Set",proto:!0,real:!0,forced:!0},{reduce:function(x){var w=m(this),_=arguments.length<2,E=_?void 0:arguments[1];if(f(x),p(w,function(N){_?(_=!1,E=N):E=x(E,N,N,w)}),_)throw new g("Reduce of empty set with no initial value");return E}})}),"./node_modules/core-js/modules/esnext.set.some.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/function-bind-context.js"),m=l("./node_modules/core-js/internals/a-set.js"),p=l("./node_modules/core-js/internals/set-iterate.js");d({target:"Set",proto:!0,real:!0,forced:!0},{some:function(y){var x=m(this),w=f(y,arguments.length>1?arguments[1]:void 0);return p(x,function(_){if(w(_,_,x))return!0},!0)===!0}})}),"./node_modules/core-js/modules/esnext.set.symmetric-difference.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/function-call.js"),m=l("./node_modules/core-js/internals/to-set-like.js"),p=l("./node_modules/core-js/internals/set-symmetric-difference.js");d({target:"Set",proto:!0,real:!0,forced:!0},{symmetricDifference:function(y){return f(p,this,m(y))}})}),"./node_modules/core-js/modules/esnext.set.union.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/function-call.js"),m=l("./node_modules/core-js/internals/to-set-like.js"),p=l("./node_modules/core-js/internals/set-union.js");d({target:"Set",proto:!0,real:!0,forced:!0},{union:function(y){return f(p,this,m(y))}})}),"./node_modules/core-js/modules/web.dom-collections.for-each.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/global-this.js"),f=l("./node_modules/core-js/internals/dom-iterables.js"),m=l("./node_modules/core-js/internals/dom-token-list-prototype.js"),p=l("./node_modules/core-js/internals/array-for-each.js"),g=l("./node_modules/core-js/internals/create-non-enumerable-property.js"),y=function(w){if(w&&w.forEach!==p)try{g(w,"forEach",p)}catch{w.forEach=p}};for(var x in f)f[x]&&y(d[x]&&d[x].prototype);y(m)}),"./node_modules/core-js/modules/web.dom-collections.iterator.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/global-this.js"),f=l("./node_modules/core-js/internals/dom-iterables.js"),m=l("./node_modules/core-js/internals/dom-token-list-prototype.js"),p=l("./node_modules/core-js/modules/es.array.iterator.js"),g=l("./node_modules/core-js/internals/create-non-enumerable-property.js"),y=l("./node_modules/core-js/internals/set-to-string-tag.js"),x=l("./node_modules/core-js/internals/well-known-symbol.js"),w=x("iterator"),_=p.values,E=function(C,I){if(C){if(C[w]!==_)try{g(C,w,_)}catch{C[w]=_}if(y(C,I,!0),f[I]){for(var D in p)if(C[D]!==p[D])try{g(C,D,p[D])}catch{C[D]=p[D]}}}};for(var N in f)E(d[N]&&d[N].prototype,N);E(m,"DOMTokenList")}),"./node_modules/core-js/modules/web.set-interval.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/global-this.js"),m=l("./node_modules/core-js/internals/schedulers-fix.js"),p=m(f.setInterval,!0);d({global:!0,bind:!0,forced:f.setInterval!==p},{setInterval:p})}),"./node_modules/core-js/modules/web.set-timeout.js":(function(c,u,l){var d=l("./node_modules/core-js/internals/export.js"),f=l("./node_modules/core-js/internals/global-this.js"),m=l("./node_modules/core-js/internals/schedulers-fix.js"),p=m(f.setTimeout,!0);d({global:!0,bind:!0,forced:f.setTimeout!==p},{setTimeout:p})}),"./node_modules/core-js/modules/web.timers.js":(function(c,u,l){l("./node_modules/core-js/modules/web.set-interval.js"),l("./node_modules/core-js/modules/web.set-timeout.js")}),"./node_modules/dompurify/dist/purify.es.mjs":(function(c,u,l){l.r(u),l.d(u,{default:function(){return Gt}});const{entries:d,setPrototypeOf:f,isFrozen:m,getPrototypeOf:p,getOwnPropertyDescriptor:g}=Object;let{freeze:y,seal:x,create:w}=Object,{apply:_,construct:E}=typeof Reflect<"u"&&Reflect;y||(y=function(ar){return ar}),x||(x=function(ar){return ar}),_||(_=function(ar,Qt){for(var gr=arguments.length,Yr=new Array(gr>2?gr-2:0),en=2;en<gr;en++)Yr[en-2]=arguments[en];return ar.apply(Qt,Yr)}),E||(E=function(ar){for(var Qt=arguments.length,gr=new Array(Qt>1?Qt-1:0),Yr=1;Yr<Qt;Yr++)gr[Yr-1]=arguments[Yr];return new ar(...gr)});const N=oe(Array.prototype.forEach),C=oe(Array.prototype.lastIndexOf),I=oe(Array.prototype.pop),D=oe(Array.prototype.push),U=oe(Array.prototype.splice),G=oe(String.prototype.toLowerCase),q=oe(String.prototype.toString),J=oe(String.prototype.match),de=oe(String.prototype.replace),xe=oe(String.prototype.indexOf),we=oe(String.prototype.trim),ve=oe(Object.prototype.hasOwnProperty),ne=oe(RegExp.prototype.test),ae=Ie(TypeError);function oe(Ir){return function(ar){ar instanceof RegExp&&(ar.lastIndex=0);for(var Qt=arguments.length,gr=new Array(Qt>1?Qt-1:0),Yr=1;Yr<Qt;Yr++)gr[Yr-1]=arguments[Yr];return _(Ir,ar,gr)}}function Ie(Ir){return function(){for(var ar=arguments.length,Qt=new Array(ar),gr=0;gr<ar;gr++)Qt[gr]=arguments[gr];return E(Ir,Qt)}}function Ce(Ir,ar){let Qt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:G;f&&f(Ir,null);let gr=ar.length;for(;gr--;){let Yr=ar[gr];if(typeof Yr=="string"){const en=Qt(Yr);en!==Yr&&(m(ar)||(ar[gr]=en),Yr=en)}Ir[Yr]=!0}return Ir}function be(Ir){for(let ar=0;ar<Ir.length;ar++)ve(Ir,ar)||(Ir[ar]=null);return Ir}function ue(Ir){const ar=w(null);for(const[Qt,gr]of d(Ir))ve(Ir,Qt)&&(Array.isArray(gr)?ar[Qt]=be(gr):gr&&typeof gr=="object"&&gr.constructor===Object?ar[Qt]=ue(gr):ar[Qt]=gr);return ar}function Pe(Ir,ar){for(;Ir!==null;){const gr=g(Ir,ar);if(gr){if(gr.get)return oe(gr.get);if(typeof gr.value=="function")return oe(gr.value)}Ir=p(Ir)}function Qt(){return null}return Qt}const Re=y(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),He=y(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Fe=y(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),ft=y(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),at=y(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),De=y(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),ut=y(["#text"]),et=y(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Ue=y(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),jt=y(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),rt=y(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Ct=x(/\{\{[\w\W]*|[\w\W]*\}\}/gm),ke=x(/<%[\w\W]*|[\w\W]*%>/gm),Xe=x(/\$\{[\w\W]*/gm),mt=x(/^data-[\-\w.\u00B7-\uFFFF]+$/),Jt=x(/^aria-[\-\w]+$/),tr=x(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),lr=x(/^(?:\w+script|data):/i),Pr=x(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),tn=x(/^html$/i),Gr=x(/^[a-z][.\w]*(-[.\w]+)+$/i);var Xr=Object.freeze({__proto__:null,ARIA_ATTR:Jt,ATTR_WHITESPACE:Pr,CUSTOM_ELEMENT:Gr,DATA_ATTR:mt,DOCTYPE_NAME:tn,ERB_EXPR:ke,IS_ALLOWED_URI:tr,IS_SCRIPT_OR_DATA:lr,MUSTACHE_EXPR:Ct,TMPLIT_EXPR:Xe});const Qr={element:1,text:3,progressingInstruction:7,comment:8,document:9},Pn=function(){return typeof window>"u"?null:window},wn=function(ar,Qt){if(typeof ar!="object"||typeof ar.createPolicy!="function")return null;let gr=null;const Yr="data-tt-policy-suffix";Qt&&Qt.hasAttribute(Yr)&&(gr=Qt.getAttribute(Yr));const en="dompurify"+(gr?"#"+gr:"");try{return ar.createPolicy(en,{createHTML(On){return On},createScriptURL(On){return On}})}catch{return console.warn("TrustedTypes policy "+en+" could not be created."),null}},yi=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function ot(){let Ir=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Pn();const ar=It=>ot(It);if(ar.version="3.3.1",ar.removed=[],!Ir||!Ir.document||Ir.document.nodeType!==Qr.document||!Ir.Element)return ar.isSupported=!1,ar;let{document:Qt}=Ir;const gr=Qt,Yr=gr.currentScript,{DocumentFragment:en,HTMLTemplateElement:On,Node:fn,Element:Jn,NodeFilter:ln,NamedNodeMap:Hr=Ir.NamedNodeMap||Ir.MozNamedAttrMap,HTMLFormElement:yn,DOMParser:mn,trustedTypes:Mn}=Ir,li=Jn.prototype,Cs=Pe(li,"cloneNode"),Ms=Pe(li,"remove"),Ns=Pe(li,"nextSibling"),ei=Pe(li,"childNodes"),un=Pe(li,"parentNode");if(typeof On=="function"){const It=Qt.createElement("template");It.content&&It.content.ownerDocument&&(Qt=It.content.ownerDocument)}let as,ta="";const{implementation:jn,createNodeIterator:Nn,createDocumentFragment:Fs,getElementsByTagName:Qs}=Qt,{importNode:Us}=gr;let ns=yi();ar.isSupported=typeof d=="function"&&typeof un=="function"&&jn&&jn.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:qs,ERB_EXPR:Rs,TMPLIT_EXPR:za,DATA_ATTR:hs,ARIA_ATTR:wu,IS_SCRIPT_OR_DATA:ro,ATTR_WHITESPACE:Fl,CUSTOM_ELEMENT:nu}=Xr;let{IS_ALLOWED_URI:pl}=Xr,ra=null;const qa=Ce({},[...Re,...He,...Fe,...at,...ut]);let Ws=null;const wa=Ce({},[...et,...Ue,...jt,...rt]);let $s=Object.seal(w(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Ll=null,go=null;const no=Object.seal(w(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let gl=!0,Ul=!0,mc=!1,zs=!0,ci=!1,ks=!0,Ta=!1,Va=!1,Ca=!1,gi=!1,Zn=!1,fs=!1,_a=!0,Qo=!1;const Hi="user-content-";let zo=!0,Ea=!1,Xs={},ms=null;const jo=Ce({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Ka=null;const Vs=Ce({},["audio","video","img","source","image","track"]);let Xa=null;const vo=Ce({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),io="http://www.w3.org/1998/Math/MathML",Vo="http://www.w3.org/2000/svg",Ht="http://www.w3.org/1999/xhtml";let V=Ht,se=!1,ce=null;const $=Ce({},[io,Vo,Ht],q);let K=Ce({},["mi","mo","mn","ms","mtext"]),ie=Ce({},["annotation-xml"]);const me=Ce({},["title","style","font","a","script"]);let Se=null;const Qe=["application/xhtml+xml","text/html"],ht="text/html";let P=null,k=null;const M=Qt.createElement("form"),W=function(nt){return nt instanceof RegExp||nt instanceof Function},Z=function(){let nt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(k&&k===nt)){if((!nt||typeof nt!="object")&&(nt={}),nt=ue(nt),Se=Qe.indexOf(nt.PARSER_MEDIA_TYPE)===-1?ht:nt.PARSER_MEDIA_TYPE,P=Se==="application/xhtml+xml"?q:G,ra=ve(nt,"ALLOWED_TAGS")?Ce({},nt.ALLOWED_TAGS,P):qa,Ws=ve(nt,"ALLOWED_ATTR")?Ce({},nt.ALLOWED_ATTR,P):wa,ce=ve(nt,"ALLOWED_NAMESPACES")?Ce({},nt.ALLOWED_NAMESPACES,q):$,Xa=ve(nt,"ADD_URI_SAFE_ATTR")?Ce(ue(vo),nt.ADD_URI_SAFE_ATTR,P):vo,Ka=ve(nt,"ADD_DATA_URI_TAGS")?Ce(ue(Vs),nt.ADD_DATA_URI_TAGS,P):Vs,ms=ve(nt,"FORBID_CONTENTS")?Ce({},nt.FORBID_CONTENTS,P):jo,Ll=ve(nt,"FORBID_TAGS")?Ce({},nt.FORBID_TAGS,P):ue({}),go=ve(nt,"FORBID_ATTR")?Ce({},nt.FORBID_ATTR,P):ue({}),Xs=ve(nt,"USE_PROFILES")?nt.USE_PROFILES:!1,gl=nt.ALLOW_ARIA_ATTR!==!1,Ul=nt.ALLOW_DATA_ATTR!==!1,mc=nt.ALLOW_UNKNOWN_PROTOCOLS||!1,zs=nt.ALLOW_SELF_CLOSE_IN_ATTR!==!1,ci=nt.SAFE_FOR_TEMPLATES||!1,ks=nt.SAFE_FOR_XML!==!1,Ta=nt.WHOLE_DOCUMENT||!1,gi=nt.RETURN_DOM||!1,Zn=nt.RETURN_DOM_FRAGMENT||!1,fs=nt.RETURN_TRUSTED_TYPE||!1,Ca=nt.FORCE_BODY||!1,_a=nt.SANITIZE_DOM!==!1,Qo=nt.SANITIZE_NAMED_PROPS||!1,zo=nt.KEEP_CONTENT!==!1,Ea=nt.IN_PLACE||!1,pl=nt.ALLOWED_URI_REGEXP||tr,V=nt.NAMESPACE||Ht,K=nt.MATHML_TEXT_INTEGRATION_POINTS||K,ie=nt.HTML_INTEGRATION_POINTS||ie,$s=nt.CUSTOM_ELEMENT_HANDLING||{},nt.CUSTOM_ELEMENT_HANDLING&&W(nt.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&($s.tagNameCheck=nt.CUSTOM_ELEMENT_HANDLING.tagNameCheck),nt.CUSTOM_ELEMENT_HANDLING&&W(nt.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&($s.attributeNameCheck=nt.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),nt.CUSTOM_ELEMENT_HANDLING&&typeof nt.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&($s.allowCustomizedBuiltInElements=nt.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),ci&&(Ul=!1),Zn&&(gi=!0),Xs&&(ra=Ce({},ut),Ws=[],Xs.html===!0&&(Ce(ra,Re),Ce(Ws,et)),Xs.svg===!0&&(Ce(ra,He),Ce(Ws,Ue),Ce(Ws,rt)),Xs.svgFilters===!0&&(Ce(ra,Fe),Ce(Ws,Ue),Ce(Ws,rt)),Xs.mathMl===!0&&(Ce(ra,at),Ce(Ws,jt),Ce(Ws,rt))),nt.ADD_TAGS&&(typeof nt.ADD_TAGS=="function"?no.tagCheck=nt.ADD_TAGS:(ra===qa&&(ra=ue(ra)),Ce(ra,nt.ADD_TAGS,P))),nt.ADD_ATTR&&(typeof nt.ADD_ATTR=="function"?no.attributeCheck=nt.ADD_ATTR:(Ws===wa&&(Ws=ue(Ws)),Ce(Ws,nt.ADD_ATTR,P))),nt.ADD_URI_SAFE_ATTR&&Ce(Xa,nt.ADD_URI_SAFE_ATTR,P),nt.FORBID_CONTENTS&&(ms===jo&&(ms=ue(ms)),Ce(ms,nt.FORBID_CONTENTS,P)),nt.ADD_FORBID_CONTENTS&&(ms===jo&&(ms=ue(ms)),Ce(ms,nt.ADD_FORBID_CONTENTS,P)),zo&&(ra["#text"]=!0),Ta&&Ce(ra,["html","head","body"]),ra.table&&(Ce(ra,["tbody"]),delete Ll.tbody),nt.TRUSTED_TYPES_POLICY){if(typeof nt.TRUSTED_TYPES_POLICY.createHTML!="function")throw ae('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof nt.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw ae('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');as=nt.TRUSTED_TYPES_POLICY,ta=as.createHTML("")}else as===void 0&&(as=wn(Mn,Yr)),as!==null&&typeof ta=="string"&&(ta=as.createHTML(""));y&&y(nt),k=nt}},re=Ce({},[...He,...Fe,...ft]),ye=Ce({},[...at,...De]),fe=function(nt){let Vt=un(nt);(!Vt||!Vt.tagName)&&(Vt={namespaceURI:V,tagName:"template"});const Tr=G(nt.tagName),or=G(Vt.tagName);return ce[nt.namespaceURI]?nt.namespaceURI===Vo?Vt.namespaceURI===Ht?Tr==="svg":Vt.namespaceURI===io?Tr==="svg"&&(or==="annotation-xml"||K[or]):!!re[Tr]:nt.namespaceURI===io?Vt.namespaceURI===Ht?Tr==="math":Vt.namespaceURI===Vo?Tr==="math"&&ie[or]:!!ye[Tr]:nt.namespaceURI===Ht?Vt.namespaceURI===Vo&&!ie[or]||Vt.namespaceURI===io&&!K[or]?!1:!ye[Tr]&&(me[Tr]||!re[Tr]):!!(Se==="application/xhtml+xml"&&ce[nt.namespaceURI]):!1},Ae=function(nt){D(ar.removed,{element:nt});try{un(nt).removeChild(nt)}catch{Ms(nt)}},Le=function(nt,Vt){try{D(ar.removed,{attribute:Vt.getAttributeNode(nt),from:Vt})}catch{D(ar.removed,{attribute:null,from:Vt})}if(Vt.removeAttribute(nt),nt==="is")if(gi||Zn)try{Ae(Vt)}catch{}else try{Vt.setAttribute(nt,"")}catch{}},Ve=function(nt){let Vt=null,Tr=null;if(Ca)nt="<remove></remove>"+nt;else{const _r=J(nt,/^[\r\n\t ]+/);Tr=_r&&_r[0]}Se==="application/xhtml+xml"&&V===Ht&&(nt='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+nt+"</body></html>");const or=as?as.createHTML(nt):nt;if(V===Ht)try{Vt=new mn().parseFromString(or,Se)}catch{}if(!Vt||!Vt.documentElement){Vt=jn.createDocument(V,"template",null);try{Vt.documentElement.innerHTML=se?ta:or}catch{}}const Mt=Vt.body||Vt.documentElement;return nt&&Tr&&Mt.insertBefore(Qt.createTextNode(Tr),Mt.childNodes[0]||null),V===Ht?Qs.call(Vt,Ta?"html":"body")[0]:Ta?Vt.documentElement:Mt},Ze=function(nt){return Nn.call(nt.ownerDocument||nt,nt,ln.SHOW_ELEMENT|ln.SHOW_COMMENT|ln.SHOW_TEXT|ln.SHOW_PROCESSING_INSTRUCTION|ln.SHOW_CDATA_SECTION,null)},dt=function(nt){return nt instanceof yn&&(typeof nt.nodeName!="string"||typeof nt.textContent!="string"||typeof nt.removeChild!="function"||!(nt.attributes instanceof Hr)||typeof nt.removeAttribute!="function"||typeof nt.setAttribute!="function"||typeof nt.namespaceURI!="string"||typeof nt.insertBefore!="function"||typeof nt.hasChildNodes!="function")},je=function(nt){return typeof fn=="function"&&nt instanceof fn};function St(It,nt,Vt){N(It,Tr=>{Tr.call(ar,nt,Vt,k)})}const ct=function(nt){let Vt=null;if(St(ns.beforeSanitizeElements,nt,null),dt(nt))return Ae(nt),!0;const Tr=P(nt.nodeName);if(St(ns.uponSanitizeElement,nt,{tagName:Tr,allowedTags:ra}),ks&&nt.hasChildNodes()&&!je(nt.firstElementChild)&&ne(/<[/\w!]/g,nt.innerHTML)&&ne(/<[/\w!]/g,nt.textContent)||nt.nodeType===Qr.progressingInstruction||ks&&nt.nodeType===Qr.comment&&ne(/<[/\w]/g,nt.data))return Ae(nt),!0;if(!(no.tagCheck instanceof Function&&no.tagCheck(Tr))&&(!ra[Tr]||Ll[Tr])){if(!Ll[Tr]&&it(Tr)&&($s.tagNameCheck instanceof RegExp&&ne($s.tagNameCheck,Tr)||$s.tagNameCheck instanceof Function&&$s.tagNameCheck(Tr)))return!1;if(zo&&!ms[Tr]){const or=un(nt)||nt.parentNode,Mt=ei(nt)||nt.childNodes;if(Mt&&or){const _r=Mt.length;for(let lt=_r-1;lt>=0;--lt){const vt=Cs(Mt[lt],!0);vt.__removalCount=(nt.__removalCount||0)+1,or.insertBefore(vt,Ns(nt))}}}return Ae(nt),!0}return nt instanceof Jn&&!fe(nt)||(Tr==="noscript"||Tr==="noembed"||Tr==="noframes")&&ne(/<\/no(script|embed|frames)/i,nt.innerHTML)?(Ae(nt),!0):(ci&&nt.nodeType===Qr.text&&(Vt=nt.textContent,N([qs,Rs,za],or=>{Vt=de(Vt,or," ")}),nt.textContent!==Vt&&(D(ar.removed,{element:nt.cloneNode()}),nt.textContent=Vt)),St(ns.afterSanitizeElements,nt,null),!1)},Nt=function(nt,Vt,Tr){if(_a&&(Vt==="id"||Vt==="name")&&(Tr in Qt||Tr in M))return!1;if(!(Ul&&!go[Vt]&&ne(hs,Vt))){if(!(gl&&ne(wu,Vt))){if(!(no.attributeCheck instanceof Function&&no.attributeCheck(Vt,nt))){if(!Ws[Vt]||go[Vt]){if(!(it(nt)&&($s.tagNameCheck instanceof RegExp&&ne($s.tagNameCheck,nt)||$s.tagNameCheck instanceof Function&&$s.tagNameCheck(nt))&&($s.attributeNameCheck instanceof RegExp&&ne($s.attributeNameCheck,Vt)||$s.attributeNameCheck instanceof Function&&$s.attributeNameCheck(Vt,nt))||Vt==="is"&&$s.allowCustomizedBuiltInElements&&($s.tagNameCheck instanceof RegExp&&ne($s.tagNameCheck,Tr)||$s.tagNameCheck instanceof Function&&$s.tagNameCheck(Tr))))return!1}else if(!Xa[Vt]){if(!ne(pl,de(Tr,Fl,""))){if(!((Vt==="src"||Vt==="xlink:href"||Vt==="href")&&nt!=="script"&&xe(Tr,"data:")===0&&Ka[nt])){if(!(mc&&!ne(ro,de(Tr,Fl,"")))){if(Tr)return!1}}}}}}}return!0},it=function(nt){return nt!=="annotation-xml"&&J(nt,nu)},Ot=function(nt){St(ns.beforeSanitizeAttributes,nt,null);const{attributes:Vt}=nt;if(!Vt||dt(nt))return;const Tr={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Ws,forceKeepAttr:void 0};let or=Vt.length;for(;or--;){const Mt=Vt[or],{name:_r,namespaceURI:lt,value:vt}=Mt,Rt=P(_r),Dt=vt;let vr=_r==="value"?Dt:we(Dt);if(Tr.attrName=Rt,Tr.attrValue=vr,Tr.keepAttr=!0,Tr.forceKeepAttr=void 0,St(ns.uponSanitizeAttribute,nt,Tr),vr=Tr.attrValue,Qo&&(Rt==="id"||Rt==="name")&&(Le(_r,nt),vr=Hi+vr),ks&&ne(/((--!?|])>)|<\/(style|title|textarea)/i,vr)){Le(_r,nt);continue}if(Rt==="attributename"&&J(vr,"href")){Le(_r,nt);continue}if(Tr.forceKeepAttr)continue;if(!Tr.keepAttr){Le(_r,nt);continue}if(!zs&&ne(/\/>/i,vr)){Le(_r,nt);continue}ci&&N([qs,Rs,za],Rr=>{vr=de(vr,Rr," ")});const kr=P(nt.nodeName);if(!Nt(kr,Rt,vr)){Le(_r,nt);continue}if(as&&typeof Mn=="object"&&typeof Mn.getAttributeType=="function"&&!lt)switch(Mn.getAttributeType(kr,Rt)){case"TrustedHTML":{vr=as.createHTML(vr);break}case"TrustedScriptURL":{vr=as.createScriptURL(vr);break}}if(vr!==Dt)try{lt?nt.setAttributeNS(lt,_r,vr):nt.setAttribute(_r,vr),dt(nt)?Ae(nt):I(ar.removed)}catch{Le(_r,nt)}}St(ns.afterSanitizeAttributes,nt,null)},qt=function It(nt){let Vt=null;const Tr=Ze(nt);for(St(ns.beforeSanitizeShadowDOM,nt,null);Vt=Tr.nextNode();)St(ns.uponSanitizeShadowNode,Vt,null),ct(Vt),Ot(Vt),Vt.content instanceof en&&It(Vt.content);St(ns.afterSanitizeShadowDOM,nt,null)};return ar.sanitize=function(It){let nt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Vt=null,Tr=null,or=null,Mt=null;if(se=!It,se&&(It="<!-->"),typeof It!="string"&&!je(It))if(typeof It.toString=="function"){if(It=It.toString(),typeof It!="string")throw ae("dirty is not a string, aborting")}else throw ae("toString is not a function");if(!ar.isSupported)return It;if(Va||Z(nt),ar.removed=[],typeof It=="string"&&(Ea=!1),Ea){if(It.nodeName){const vt=P(It.nodeName);if(!ra[vt]||Ll[vt])throw ae("root node is forbidden and cannot be sanitized in-place")}}else if(It instanceof fn)Vt=Ve("<!---->"),Tr=Vt.ownerDocument.importNode(It,!0),Tr.nodeType===Qr.element&&Tr.nodeName==="BODY"||Tr.nodeName==="HTML"?Vt=Tr:Vt.appendChild(Tr);else{if(!gi&&!ci&&!Ta&&It.indexOf("<")===-1)return as&&fs?as.createHTML(It):It;if(Vt=Ve(It),!Vt)return gi?null:fs?ta:""}Vt&&Ca&&Ae(Vt.firstChild);const _r=Ze(Ea?It:Vt);for(;or=_r.nextNode();)ct(or),Ot(or),or.content instanceof en&&qt(or.content);if(Ea)return It;if(gi){if(Zn)for(Mt=Fs.call(Vt.ownerDocument);Vt.firstChild;)Mt.appendChild(Vt.firstChild);else Mt=Vt;return(Ws.shadowroot||Ws.shadowrootmode)&&(Mt=Us.call(gr,Mt,!0)),Mt}let lt=Ta?Vt.outerHTML:Vt.innerHTML;return Ta&&ra["!doctype"]&&Vt.ownerDocument&&Vt.ownerDocument.doctype&&Vt.ownerDocument.doctype.name&&ne(tn,Vt.ownerDocument.doctype.name)&&(lt="<!DOCTYPE "+Vt.ownerDocument.doctype.name+`>
`+lt),ci&&N([qs,Rs,za],vt=>{lt=de(lt,vt," ")}),as&&fs?as.createHTML(lt):lt},ar.setConfig=function(){let It=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Z(It),Va=!0},ar.clearConfig=function(){k=null,Va=!1},ar.isValidAttribute=function(It,nt,Vt){k||Z({});const Tr=P(It),or=P(nt);return Nt(Tr,or,Vt)},ar.addHook=function(It,nt){typeof nt=="function"&&D(ns[It],nt)},ar.removeHook=function(It,nt){if(nt!==void 0){const Vt=C(ns[It],nt);return Vt===-1?void 0:U(ns[It],Vt,1)[0]}return I(ns[It])},ar.removeHooks=function(It){ns[It]=[]},ar.removeAllHooks=function(){ns=yi()},ar}var Gt=ot()}),"./node_modules/fast-png/lib-esm/PngDecoder.js":(function(c,u,l){l.r(u),l.d(u,{default:function(){return _}});var d=l("./node_modules/iobuffer/lib-esm/IOBuffer.js"),f=l("./node_modules/pako/dist/pako.esm.mjs"),m=l("./node_modules/fast-png/lib-esm/helpers/crc.js"),p=l("./node_modules/fast-png/lib-esm/helpers/decodeInterlaceAdam7.js"),g=l("./node_modules/fast-png/lib-esm/helpers/decodeInterlaceNull.js"),y=l("./node_modules/fast-png/lib-esm/helpers/signature.js"),x=l("./node_modules/fast-png/lib-esm/helpers/text.js"),w=l("./node_modules/fast-png/lib-esm/internalTypes.js");class _ extends d.IOBuffer{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(C,I={}){super(C);const{checkCrc:D=!1}=I;this._checkCrc=D,this._inflator=new f.Inflate,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=w.CompressionMethod.UNKNOWN,this._filterMethod=w.FilterMethod.UNKNOWN,this._interlaceMethod=w.InterlaceMethod.UNKNOWN,this._colorType=w.ColorType.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for((0,y.checkSignature)(this);!this._end;){const C=this.readUint32(),I=this.readChars(4);this.decodeChunk(C,I)}return this.decodeImage(),this._png}decodeApng(){for((0,y.checkSignature)(this);!this._end;){const C=this.readUint32(),I=this.readChars(4);this.decodeApngChunk(C,I)}return this.decodeApngImage(),this._apng}decodeChunk(C,I){const D=this.offset;switch(I){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(C);break;case"IDAT":this.decodeIDAT(C);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(C);break;case"iCCP":this.decodeiCCP(C);break;case x.textChunkName:(0,x.decodetEXt)(this._png.text,this,C);break;case"pHYs":this.decodepHYs();break;default:this.skip(C);break}if(this.offset-D!==C)throw new Error(`Length mismatch while decoding chunk ${I}`);this._checkCrc?(0,m.checkCrc)(this,C+4,I):this.skip(4)}decodeApngChunk(C,I){const D=this.offset;switch(I!=="fdAT"&&I!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),I){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(C);break;default:this.decodeChunk(C,I),this.offset=D+C;break}if(this.offset-D!==C)throw new Error(`Length mismatch while decoding chunk ${I}`);this._checkCrc?(0,m.checkCrc)(this,C+4,I):this.skip(4)}decodeIHDR(){const C=this._png;C.width=this.readUint32(),C.height=this.readUint32(),C.depth=E(this.readUint8());const I=this.readUint8();this._colorType=I;let D;switch(I){case w.ColorType.GREYSCALE:D=1;break;case w.ColorType.TRUECOLOUR:D=3;break;case w.ColorType.INDEXED_COLOUR:D=1;break;case w.ColorType.GREYSCALE_ALPHA:D=2;break;case w.ColorType.TRUECOLOUR_ALPHA:D=4;break;case w.ColorType.UNKNOWN:default:throw new Error(`Unknown color type: ${I}`)}if(this._png.channels=D,this._compressionMethod=this.readUint8(),this._compressionMethod!==w.CompressionMethod.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const C={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(C)}decodePLTE(C){if(C%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${C}`);const I=C/3;this._hasPalette=!0;const D=[];this._palette=D;for(let U=0;U<I;U++)D.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(C){this._writingDataChunks=!0;const I=C,D=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,D,I)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(C)}decodeFDAT(C){this._writingDataChunks=!0;let I=C,D=this.offset+this.byteOffset;if(D+=4,I-=4,this._inflator.push(new Uint8Array(this.buffer,D,I)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(C)}decodetRNS(C){switch(this._colorType){case w.ColorType.GREYSCALE:case w.ColorType.TRUECOLOUR:{if(C%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${C}`);if(C/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${C/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(C/2);for(let I=0;I<C/2;I++)this._transparency[I]=this.readUint16();break}case w.ColorType.INDEXED_COLOUR:{if(C>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${C} vs ${this._palette.length})`);let I=0;for(;I<C;I++){const D=this.readByte();this._palette[I].push(D)}for(;I<this._palette.length;I++)this._palette[I].push(255);break}case w.ColorType.UNKNOWN:case w.ColorType.GREYSCALE_ALPHA:case w.ColorType.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(C){const I=(0,x.readKeyword)(this),D=this.readUint8();if(D!==w.CompressionMethod.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${D}`);const U=this.readBytes(C-I.length-2);this._png.iccEmbeddedProfile={name:I,profile:(0,f.inflate)(U)}}decodepHYs(){const C=this.readUint32(),I=this.readUint32(),D=this.readByte();this._png.resolution={x:C,y:I,unit:D}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let C=0;C<this._numberOfFrames;C++){const I={sequenceNumber:this._frames[C].sequenceNumber,delayNumber:this._frames[C].delayNumber,delayDenominator:this._frames[C].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},D=this._frames.at(C);if(D){if(D.data=(0,g.decodeInterlaceNull)({data:D.data,width:D.width,height:D.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),C===0||D.xOffset===0&&D.yOffset===0&&D.width===this._png.width&&D.height===this._png.height)I.data=D.data;else{const U=this._apng.frames.at(C-1);this.disposeFrame(D,U,I),this.addFrameDataToCanvas(I,D)}this._apng.frames.push(I)}}return this._apng}disposeFrame(C,I,D){switch(C.disposeOp){case w.DisposeOpType.NONE:break;case w.DisposeOpType.BACKGROUND:for(let U=0;U<this._png.height;U++)for(let G=0;G<this._png.width;G++){const q=(U*C.width+G)*this._png.channels;for(let J=0;J<this._png.channels;J++)D.data[q+J]=0}break;case w.DisposeOpType.PREVIOUS:D.data.set(I.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(C,I){const D=1<<this._png.depth,U=(G,q)=>{const J=((G+I.yOffset)*this._png.width+I.xOffset+q)*this._png.channels,de=(G*I.width+q)*this._png.channels;return{index:J,frameIndex:de}};switch(I.blendOp){case w.BlendOpType.SOURCE:for(let G=0;G<I.height;G++)for(let q=0;q<I.width;q++){const{index:J,frameIndex:de}=U(G,q);for(let xe=0;xe<this._png.channels;xe++)C.data[J+xe]=I.data[de+xe]}break;case w.BlendOpType.OVER:for(let G=0;G<I.height;G++)for(let q=0;q<I.width;q++){const{index:J,frameIndex:de}=U(G,q);for(let xe=0;xe<this._png.channels;xe++){const we=I.data[de+this._png.channels-1]/D,ve=xe%(this._png.channels-1)===0?1:I.data[de+xe],ne=Math.floor(we*ve+(1-we)*C.data[J+xe]);C.data[J+xe]+=ne}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const C=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==w.FilterMethod.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===w.InterlaceMethod.NO_INTERLACE)this._png.data=(0,g.decodeInterlaceNull)({data:C,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===w.InterlaceMethod.ADAM7)this._png.data=(0,p.decodeInterlaceAdam7)({data:C,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const C=this._inflator.result,I=this._frames.at(-1);I?I.data=C:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:w.DisposeOpType.NONE,blendOp:w.BlendOpType.SOURCE,data:C}),this._inflator=new f.Inflate,this._writingDataChunks=!1}}function E(N){if(N!==1&&N!==2&&N!==4&&N!==8&&N!==16)throw new Error(`invalid bit depth: ${N}`);return N}}),"./node_modules/fast-png/lib-esm/PngEncoder.js":(function(c,u,l){l.r(u),l.d(u,{default:function(){return w}});var d=l("./node_modules/iobuffer/lib-esm/IOBuffer.js"),f=l("./node_modules/pako/dist/pako.esm.mjs"),m=l("./node_modules/fast-png/lib-esm/helpers/crc.js"),p=l("./node_modules/fast-png/lib-esm/helpers/signature.js"),g=l("./node_modules/fast-png/lib-esm/helpers/text.js"),y=l("./node_modules/fast-png/lib-esm/internalTypes.js");const x={level:3};class w extends d.IOBuffer{_png;_zlibOptions;_colorType;_interlaceMethod;constructor(U,G={}){super(),this._colorType=y.ColorType.UNKNOWN,this._zlibOptions={...x,...G.zlib},this._png=this._checkData(U),this._interlaceMethod=(G.interlace==="Adam7"?y.InterlaceMethod.ADAM7:y.InterlaceMethod.NO_INTERLACE)??y.InterlaceMethod.NO_INTERLACE,this.setBigEndian()}encode(){if((0,p.writeSignature)(this),this.encodeIHDR(),this._png.palette&&(this.encodePLTE(),this._png.palette[0].length===4&&this.encodeTRNS()),this.encodeData(),this._png.text)for(const[U,G]of Object.entries(this._png.text))(0,g.encodetEXt)(this,U,G);return this.encodeIEND(),this.toArray()}encodeIHDR(){this.writeUint32(13),this.writeChars("IHDR"),this.writeUint32(this._png.width),this.writeUint32(this._png.height),this.writeByte(this._png.depth),this.writeByte(this._colorType),this.writeByte(y.CompressionMethod.DEFLATE),this.writeByte(y.FilterMethod.ADAPTIVE),this.writeByte(this._interlaceMethod),(0,m.writeCrc)(this,17)}encodeIEND(){this.writeUint32(0),this.writeChars("IEND"),(0,m.writeCrc)(this,4)}encodePLTE(){const U=this._png.palette?.length*3;this.writeUint32(U),this.writeChars("PLTE");for(const G of this._png.palette)this.writeByte(G[0]),this.writeByte(G[1]),this.writeByte(G[2]);(0,m.writeCrc)(this,4+U)}encodeTRNS(){const U=this._png.palette.filter(G=>G.at(-1)!==255);this.writeUint32(U.length),this.writeChars("tRNS");for(const G of U)this.writeByte(G.at(-1));(0,m.writeCrc)(this,4+U.length)}encodeIDAT(U){this.writeUint32(U.length),this.writeChars("IDAT"),this.writeBytes(U),(0,m.writeCrc)(this,U.length+4)}encodeData(){const{width:U,height:G,channels:q,depth:J,data:de}=this._png,xe=J<=8?Math.ceil(U*J/8)*q:Math.ceil(U*J/8*q/2),we=new d.IOBuffer().setBigEndian();let ve=0;if(this._interlaceMethod===y.InterlaceMethod.NO_INTERLACE)for(let oe=0;oe<G;oe++)we.writeByte(0),J===16?ve=I(de,we,xe,ve):ve=N(de,we,xe,ve);else this._interlaceMethod===y.InterlaceMethod.ADAM7&&(ve=C(this._png,de,we,ve));const ne=we.toArray(),ae=(0,f.deflate)(ne,this._zlibOptions);this.encodeIDAT(ae)}_checkData(U){const{colorType:G,channels:q,depth:J}=E(U,U.palette),de={width:_(U.width,"width"),height:_(U.height,"height"),channels:q,data:U.data,depth:J,text:U.text,palette:U.palette};this._colorType=G;const xe=J<8?Math.ceil(de.width*J/8)*de.height*q:de.width*de.height*q;if(de.data.length!==xe)throw new RangeError(`wrong data size. Found ${de.data.length}, expected ${xe}`);return de}}function _(D,U){if(Number.isInteger(D)&&D>0)return D;throw new TypeError(`${U} must be a positive integer`)}function E(D,U){const{channels:G=4,depth:q=8}=D;if(G!==4&&G!==3&&G!==2&&G!==1)throw new RangeError(`unsupported number of channels: ${G}`);const J={channels:G,depth:q,colorType:y.ColorType.UNKNOWN};switch(G){case 4:J.colorType=y.ColorType.TRUECOLOUR_ALPHA;break;case 3:J.colorType=y.ColorType.TRUECOLOUR;break;case 1:U?J.colorType=y.ColorType.INDEXED_COLOUR:J.colorType=y.ColorType.GREYSCALE;break;case 2:J.colorType=y.ColorType.GREYSCALE_ALPHA;break;default:throw new Error("unsupported number of channels")}return J}function N(D,U,G,q){for(let J=0;J<G;J++)U.writeByte(D[q++]);return q}function C(D,U,G,q){const J=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],{width:de,height:xe,channels:we,depth:ve}=D;let ne=0;ve===16?ne=we*ve/8/2:ne=we*ve/8;for(let ae=0;ae<7;ae++){const oe=J[ae],Ie=Math.floor((de-oe.x+oe.xStep-1)/oe.xStep),Ce=Math.floor((xe-oe.y+oe.yStep-1)/oe.yStep);if(Ie<=0||Ce<=0)continue;const be=Ie*ne;for(let ue=0;ue<Ce;ue++){const Pe=oe.y+ue*oe.yStep,Re=ve<=8?new Uint8Array(be):new Uint16Array(be);let He=0;for(let Fe=0;Fe<Ie;Fe++){const ft=oe.x+Fe*oe.xStep;if(ft<de&&Pe<xe){const at=(Pe*de+ft)*ne;for(let De=0;De<ne;De++)Re[He++]=U[at+De]}}if(G.writeByte(0),ve===8)G.writeBytes(Re);else if(ve===16)for(const Fe of Re)G.writeByte(Fe>>8&255),G.writeByte(Fe&255)}}return q}function I(D,U,G,q){for(let J=0;J<G;J++)U.writeUint16(D[q++]);return q}}),"./node_modules/fast-png/lib-esm/convertIndexedToRgb.js":(function(c,u,l){l.r(u),l.d(u,{convertIndexedToRgb:function(){return d}});function d(m){const p=m.palette,g=m.depth;if(!p)throw new Error("Color palette is undefined.");f(m);const y=m.width*m.height,x=y*p[0].length,w=new Uint8Array(x);let _=0,E=0;const N=new Uint8Array(y);let C=255;switch(g){case 1:C=128;break;case 2:C=192;break;case 4:C=240;break;case 8:C=255;break;default:throw new Error("Incorrect depth value")}for(const I of m.data){let D=C,U=8;for(;D&&(U-=g,N[_++]=(I&D)>>U,D=D>>g,_%m.width!==0););}if(m.palette)for(const I of N){const D=m.palette.at(I);if(!D)throw new Error("Incorrect index of palette color");w.set(D,E),E+=D.length}return w}function f(m){const p=m.depth<8?Math.ceil(m.width*m.depth/8)*m.height*m.channels:m.width*m.height*m.channels;if(m.data.length!==p)throw new RangeError(`wrong data size. Found ${m.data.length}, expected ${p}`)}}),"./node_modules/fast-png/lib-esm/helpers/applyUnfilter.js":(function(c,u,l){l.r(u),l.d(u,{applyUnfilter:function(){return f}});var d=l("./node_modules/fast-png/lib-esm/helpers/unfilter.js");function f(m,p,g,y,x,w){switch(m){case 0:(0,d.unfilterNone)(p,g,x);break;case 1:(0,d.unfilterSub)(p,g,x,w);break;case 2:(0,d.unfilterUp)(p,g,y,x);break;case 3:(0,d.unfilterAverage)(p,g,y,x,w);break;case 4:(0,d.unfilterPaeth)(p,g,y,x,w);break;default:throw new Error(`Unsupported filter: ${m}`)}}}),"./node_modules/fast-png/lib-esm/helpers/crc.js":(function(c,u,l){l.r(u),l.d(u,{checkCrc:function(){return g},writeCrc:function(){return y}});const d=[];for(let x=0;x<256;x++){let w=x;for(let _=0;_<8;_++)w&1?w=3988292384^w>>>1:w=w>>>1;d[x]=w}const f=4294967295;function m(x,w,_){let E=x;for(let N=0;N<_;N++)E=d[(E^w[N])&255]^E>>>8;return E}function p(x,w){return(m(f,x,w)^f)>>>0}function g(x,w,_){const E=x.readUint32(),N=p(new Uint8Array(x.buffer,x.byteOffset+x.offset-w-4,w),w);if(N!==E)throw new Error(`CRC mismatch for chunk ${_}. Expected ${E}, found ${N}`)}function y(x,w){x.writeUint32(p(new Uint8Array(x.buffer,x.byteOffset+x.offset-w,w),w))}}),"./node_modules/fast-png/lib-esm/helpers/decodeInterlaceAdam7.js":(function(c,u,l){l.r(u),l.d(u,{decodeInterlaceAdam7:function(){return g}});var d=l("./node_modules/fast-png/lib-esm/helpers/applyUnfilter.js");const f=new Uint16Array([255]),p=new Uint8Array(f.buffer)[0]===255;function g(x){const{data:w,width:_,height:E,channels:N,depth:C}=x,I=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],D=Math.ceil(C/8)*N,U=new Uint8Array(E*_*D);let G=0;for(let q=0;q<7;q++){const J=I[q],de=Math.ceil((_-J.x)/J.xStep),xe=Math.ceil((E-J.y)/J.yStep);if(de<=0||xe<=0)continue;const we=de*D,ve=new Uint8Array(we);for(let ne=0;ne<xe;ne++){const ae=w[G++],oe=w.subarray(G,G+we);G+=we;const Ie=new Uint8Array(we);(0,d.applyUnfilter)(ae,oe,Ie,ve,we,D),ve.set(Ie);for(let Ce=0;Ce<de;Ce++){const be=J.x+Ce*J.xStep,ue=J.y+ne*J.yStep;if(!(be>=_||ue>=E))for(let Pe=0;Pe<D;Pe++)U[(ue*_+be)*D+Pe]=Ie[Ce*D+Pe]}}}if(C===16){const q=new Uint16Array(U.buffer);if(p)for(let J=0;J<q.length;J++)q[J]=y(q[J]);return q}else return U}function y(x){return(x&255)<<8|x>>8&255}}),"./node_modules/fast-png/lib-esm/helpers/decodeInterlaceNull.js":(function(c,u,l){l.r(u),l.d(u,{decodeInterlaceNull:function(){return y}});var d=l("./node_modules/fast-png/lib-esm/helpers/unfilter.js");const f=new Uint16Array([255]),p=new Uint8Array(f.buffer)[0]===255,g=new Uint8Array(0);function y(w){const{data:_,width:E,height:N,channels:C,depth:I}=w,D=Math.ceil(I/8)*C,U=Math.ceil(I/8*C*E),G=new Uint8Array(N*U);let q=g,J=0,de,xe;for(let we=0;we<N;we++){switch(de=_.subarray(J+1,J+1+U),xe=G.subarray(we*U,(we+1)*U),_[J]){case 0:(0,d.unfilterNone)(de,xe,U);break;case 1:(0,d.unfilterSub)(de,xe,U,D);break;case 2:(0,d.unfilterUp)(de,xe,q,U);break;case 3:(0,d.unfilterAverage)(de,xe,q,U,D);break;case 4:(0,d.unfilterPaeth)(de,xe,q,U,D);break;default:throw new Error(`Unsupported filter: ${_[J]}`)}q=xe,J+=U+1}if(I===16){const we=new Uint16Array(G.buffer);if(p)for(let ve=0;ve<we.length;ve++)we[ve]=x(we[ve]);return we}else return G}function x(w){return(w&255)<<8|w>>8&255}}),"./node_modules/fast-png/lib-esm/helpers/signature.js":(function(c,u,l){l.r(u),l.d(u,{checkSignature:function(){return m},hasPngSignature:function(){return p},writeSignature:function(){return f}});const d=Uint8Array.of(137,80,78,71,13,10,26,10);function f(g){g.writeBytes(d)}function m(g){if(!p(g.readBytes(d.length)))throw new Error("wrong PNG signature")}function p(g){if(g.length<d.length)return!1;for(let y=0;y<d.length;y++)if(g[y]!==d[y])return!1;return!0}}),"./node_modules/fast-png/lib-esm/helpers/text.js":(function(c,u,l){l.r(u),l.d(u,{decodetEXt:function(){return w},encodetEXt:function(){return _},readKeyword:function(){return E},readLatin1:function(){return N},textChunkName:function(){return f}});var d=l("./node_modules/fast-png/lib-esm/helpers/crc.js");const f="tEXt",m=0,p=new TextDecoder("latin1");function g(C){if(x(C),C.length===0||C.length>79)throw new Error("keyword length must be between 1 and 79")}const y=/^[\u0000-\u00FF]*$/;function x(C){if(!y.test(C))throw new Error("invalid latin1 text")}function w(C,I,D){const U=E(I);C[U]=N(I,D-U.length-1)}function _(C,I,D){g(I),x(D);const U=I.length+1+D.length;C.writeUint32(U),C.writeChars(f),C.writeChars(I),C.writeByte(m),C.writeChars(D),(0,d.writeCrc)(C,U+4)}function E(C){for(C.mark();C.readByte()!==m;);const I=C.offset;C.reset();const D=p.decode(C.readBytes(I-C.offset-1));return C.skip(1),g(D),D}function N(C,I){return p.decode(C.readBytes(I))}}),"./node_modules/fast-png/lib-esm/helpers/unfilter.js":(function(c,u,l){l.r(u),l.d(u,{unfilterAverage:function(){return p},unfilterNone:function(){return d},unfilterPaeth:function(){return g},unfilterSub:function(){return f},unfilterUp:function(){return m}});function d(x,w,_){for(let E=0;E<_;E++)w[E]=x[E]}function f(x,w,_,E){let N=0;for(;N<E;N++)w[N]=x[N];for(;N<_;N++)w[N]=x[N]+w[N-E]&255}function m(x,w,_,E){let N=0;if(_.length===0)for(;N<E;N++)w[N]=x[N];else for(;N<E;N++)w[N]=x[N]+_[N]&255}function p(x,w,_,E,N){let C=0;if(_.length===0){for(;C<N;C++)w[C]=x[C];for(;C<E;C++)w[C]=x[C]+(w[C-N]>>1)&255}else{for(;C<N;C++)w[C]=x[C]+(_[C]>>1)&255;for(;C<E;C++)w[C]=x[C]+(w[C-N]+_[C]>>1)&255}}function g(x,w,_,E,N){let C=0;if(_.length===0){for(;C<N;C++)w[C]=x[C];for(;C<E;C++)w[C]=x[C]+w[C-N]&255}else{for(;C<N;C++)w[C]=x[C]+_[C]&255;for(;C<E;C++)w[C]=x[C]+y(w[C-N],_[C],_[C-N])&255}}function y(x,w,_){const E=x+w-_,N=Math.abs(E-x),C=Math.abs(E-w),I=Math.abs(E-_);return N<=C&&N<=I?x:C<=I?w:_}}),"./node_modules/fast-png/lib-esm/index.js":(function(c,u,l){l.r(u),l.d(u,{ResolutionUnitSpecifier:function(){return p.ResolutionUnitSpecifier},convertIndexedToRgb:function(){return g.convertIndexedToRgb},decode:function(){return y},decodeApng:function(){return w},encode:function(){return x},hasPngSignature:function(){return m.hasPngSignature}});var d=l("./node_modules/fast-png/lib-esm/PngDecoder.js"),f=l("./node_modules/fast-png/lib-esm/PngEncoder.js"),m=l("./node_modules/fast-png/lib-esm/helpers/signature.js"),p=l("./node_modules/fast-png/lib-esm/types.js"),g=l("./node_modules/fast-png/lib-esm/convertIndexedToRgb.js");function y(_,E){return new d.default(_,E).decode()}function x(_,E){return new f.default(_,E).encode()}function w(_,E){return new d.default(_,E).decodeApng()}}),"./node_modules/fast-png/lib-esm/internalTypes.js":(function(c,u,l){l.r(u),l.d(u,{BlendOpType:function(){return y},ColorType:function(){return d},CompressionMethod:function(){return f},DisposeOpType:function(){return g},FilterMethod:function(){return m},InterlaceMethod:function(){return p}});const d={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},f={UNKNOWN:-1,DEFLATE:0},m={UNKNOWN:-1,ADAPTIVE:0},p={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},g={NONE:0,BACKGROUND:1,PREVIOUS:2},y={SOURCE:0,OVER:1}}),"./node_modules/fast-png/lib-esm/types.js":(function(c,u,l){l.r(u),l.d(u,{ResolutionUnitSpecifier:function(){return d}});var d;(function(f){f[f.UNKNOWN=0]="UNKNOWN",f[f.METRE=1]="METRE"})(d||(d={}))}),"./node_modules/fflate/esm/browser.js":(function(c,u,l){l.r(u),l.d(u,{AsyncCompress:function(){return ns},AsyncDecompress:function(){return go},AsyncDeflate:function(){return un},AsyncGunzip:function(){return hs},AsyncGzip:function(){return ns},AsyncInflate:function(){return Nn},AsyncUnzipInflate:function(){return Vo},AsyncUnzlib:function(){return Ws},AsyncZipDeflate:function(){return jo},AsyncZlib:function(){return nu},Compress:function(){return Us},DecodeUTF8:function(){return Ta},Decompress:function(){return Ll},Deflate:function(){return ei},EncodeUTF8:function(){return Va},FlateErrorCode:function(){return Re},Gunzip:function(){return za},Gzip:function(){return Us},Inflate:function(){return jn},Unzip:function(){return Ht},UnzipInflate:function(){return io},UnzipPassThrough:function(){return vo},Unzlib:function(){return qa},Zip:function(){return Ka},ZipDeflate:function(){return ms},ZipPassThrough:function(){return Xs},Zlib:function(){return Fl},compress:function(){return qs},compressSync:function(){return Rs},decompress:function(){return no},decompressSync:function(){return gl},deflate:function(){return as},deflateSync:function(){return ta},gunzip:function(){return wu},gunzipSync:function(){return ro},gzip:function(){return qs},gzipSync:function(){return Rs},inflate:function(){return Fs},inflateSync:function(){return Qs},strFromU8:function(){return gi},strToU8:function(){return Ca},unzip:function(){return se},unzipSync:function(){return ce},unzlib:function(){return wa},unzlibSync:function(){return $s},zip:function(){return Vs},zipSync:function(){return Xa},zlib:function(){return pl},zlibSync:function(){return ra}});var d={},f=(function($,K,ie,me,Se){var Qe=new Worker(d[K]||(d[K]=URL.createObjectURL(new Blob([$+';addEventListener("error",function(e){e=e.error;postMessage({$e$:[e.message,e.code,e.stack]})})'],{type:"text/javascript"}))));return Qe.onmessage=function(ht){var P=ht.data,k=P.$e$;if(k){var M=new Error(k[0]);M.code=k[1],M.stack=k[2],Se(M,null)}else Se(null,P)},Qe.postMessage(ie,me),Qe}),m=Uint8Array,p=Uint16Array,g=Int32Array,y=new m([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),x=new m([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),w=new m([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),_=function($,K){for(var ie=new p(31),me=0;me<31;++me)ie[me]=K+=1<<$[me-1];for(var Se=new g(ie[30]),me=1;me<30;++me)for(var Qe=ie[me];Qe<ie[me+1];++Qe)Se[Qe]=Qe-ie[me]<<5|me;return{b:ie,r:Se}},E=_(y,2),N=E.b,C=E.r;N[28]=258,C[258]=28;for(var I=_(x,0),D=I.b,U=I.r,G=new p(32768),q=0;q<32768;++q){var J=(q&43690)>>1|(q&21845)<<1;J=(J&52428)>>2|(J&13107)<<2,J=(J&61680)>>4|(J&3855)<<4,G[q]=((J&65280)>>8|(J&255)<<8)>>1}for(var de=(function($,K,ie){for(var me=$.length,Se=0,Qe=new p(K);Se<me;++Se)$[Se]&&++Qe[$[Se]-1];var ht=new p(K);for(Se=1;Se<K;++Se)ht[Se]=ht[Se-1]+Qe[Se-1]<<1;var P;if(ie){P=new p(1<<K);var k=15-K;for(Se=0;Se<me;++Se)if($[Se])for(var M=Se<<4|$[Se],W=K-$[Se],Z=ht[$[Se]-1]++<<W,re=Z|(1<<W)-1;Z<=re;++Z)P[G[Z]>>k]=M}else for(P=new p(me),Se=0;Se<me;++Se)$[Se]&&(P[Se]=G[ht[$[Se]-1]++]>>15-$[Se]);return P}),xe=new m(288),q=0;q<144;++q)xe[q]=8;for(var q=144;q<256;++q)xe[q]=9;for(var q=256;q<280;++q)xe[q]=7;for(var q=280;q<288;++q)xe[q]=8;for(var we=new m(32),q=0;q<32;++q)we[q]=5;var ve=de(xe,9,0),ne=de(xe,9,1),ae=de(we,5,0),oe=de(we,5,1),Ie=function($){for(var K=$[0],ie=1;ie<$.length;++ie)$[ie]>K&&(K=$[ie]);return K},Ce=function($,K,ie){var me=K/8|0;return($[me]|$[me+1]<<8)>>(K&7)&ie},be=function($,K){var ie=K/8|0;return($[ie]|$[ie+1]<<8|$[ie+2]<<16)>>(K&7)},ue=function($){return($+7)/8|0},Pe=function($,K,ie){return(K==null||K<0)&&(K=0),(ie==null||ie>$.length)&&(ie=$.length),new m($.subarray(K,ie))},Re={UnexpectedEOF:0,InvalidBlockType:1,InvalidLengthLiteral:2,InvalidDistance:3,StreamFinished:4,NoStreamHandler:5,InvalidHeader:6,NoCallback:7,InvalidUTF8:8,ExtraFieldTooLong:9,InvalidDate:10,FilenameTooLong:11,StreamFinishing:12,InvalidZipData:13,UnknownCompressionMethod:14},He=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Fe=function($,K,ie){var me=new Error(K||He[$]);if(me.code=$,Error.captureStackTrace&&Error.captureStackTrace(me,Fe),!ie)throw me;return me},ft=function($,K,ie,me){var Se=$.length,Qe=me?me.length:0;if(!Se||K.f&&!K.l)return ie||new m(0);var ht=!ie,P=ht||K.i!=2,k=K.i;ht&&(ie=new m(Se*3));var M=function(Lt){var Wt=ie.length;if(Lt>Wt){var Xt=new m(Math.max(Wt*2,Lt));Xt.set(ie),ie=Xt}},W=K.f||0,Z=K.p||0,re=K.b||0,ye=K.l,fe=K.d,Ae=K.m,Le=K.n,Ve=Se*8;do{if(!ye){W=Ce($,Z,1);var Ze=Ce($,Z+1,3);if(Z+=3,Ze)if(Ze==1)ye=ne,fe=oe,Ae=9,Le=5;else if(Ze==2){var ct=Ce($,Z,31)+257,Nt=Ce($,Z+10,15)+4,it=ct+Ce($,Z+5,31)+1;Z+=14;for(var Ot=new m(it),qt=new m(19),It=0;It<Nt;++It)qt[w[It]]=Ce($,Z+It*3,7);Z+=Nt*3;for(var nt=Ie(qt),Vt=(1<<nt)-1,Tr=de(qt,nt,1),It=0;It<it;){var or=Tr[Ce($,Z,Vt)];Z+=or&15;var dt=or>>4;if(dt<16)Ot[It++]=dt;else{var Mt=0,_r=0;for(dt==16?(_r=3+Ce($,Z,3),Z+=2,Mt=Ot[It-1]):dt==17?(_r=3+Ce($,Z,7),Z+=3):dt==18&&(_r=11+Ce($,Z,127),Z+=7);_r--;)Ot[It++]=Mt}}var lt=Ot.subarray(0,ct),vt=Ot.subarray(ct);Ae=Ie(lt),Le=Ie(vt),ye=de(lt,Ae,1),fe=de(vt,Le,1)}else Fe(1);else{var dt=ue(Z)+4,je=$[dt-4]|$[dt-3]<<8,St=dt+je;if(St>Se){k&&Fe(0);break}P&&M(re+je),ie.set($.subarray(dt,St),re),K.b=re+=je,K.p=Z=St*8,K.f=W;continue}if(Z>Ve){k&&Fe(0);break}}P&&M(re+131072);for(var Rt=(1<<Ae)-1,Dt=(1<<Le)-1,vr=Z;;vr=Z){var Mt=ye[be($,Z)&Rt],kr=Mt>>4;if(Z+=Mt&15,Z>Ve){k&&Fe(0);break}if(Mt||Fe(2),kr<256)ie[re++]=kr;else if(kr==256){vr=Z,ye=null;break}else{var Rr=kr-254;if(kr>264){var It=kr-257,ur=y[It];Rr=Ce($,Z,(1<<ur)-1)+N[It],Z+=ur}var Or=fe[be($,Z)&Dt],pn=Or>>4;Or||Fe(3),Z+=Or&15;var vt=D[pn];if(pn>3){var ur=x[pn];vt+=be($,Z)&(1<<ur)-1,Z+=ur}if(Z>Ve){k&&Fe(0);break}P&&M(re+131072);var on=re+Rr;if(re<vt){var Ye=Qe-vt,Tt=Math.min(vt,on);for(Ye+re<0&&Fe(3);re<Tt;++re)ie[re]=me[Ye+re]}for(;re<on;++re)ie[re]=ie[re-vt]}}K.l=ye,K.p=vr,K.b=re,K.f=W,ye&&(W=1,K.m=Ae,K.d=fe,K.n=Le)}while(!W);return re!=ie.length&&ht?Pe(ie,0,re):ie.subarray(0,re)},at=function($,K,ie){ie<<=K&7;var me=K/8|0;$[me]|=ie,$[me+1]|=ie>>8},De=function($,K,ie){ie<<=K&7;var me=K/8|0;$[me]|=ie,$[me+1]|=ie>>8,$[me+2]|=ie>>16},ut=function($,K){for(var ie=[],me=0;me<$.length;++me)$[me]&&ie.push({s:me,f:$[me]});var Se=ie.length,Qe=ie.slice();if(!Se)return{t:Xe,l:0};if(Se==1){var ht=new m(ie[0].s+1);return ht[ie[0].s]=1,{t:ht,l:1}}ie.sort(function(St,ct){return St.f-ct.f}),ie.push({s:-1,f:25001});var P=ie[0],k=ie[1],M=0,W=1,Z=2;for(ie[0]={s:-1,f:P.f+k.f,l:P,r:k};W!=Se-1;)P=ie[ie[M].f<ie[Z].f?M++:Z++],k=ie[M!=W&&ie[M].f<ie[Z].f?M++:Z++],ie[W++]={s:-1,f:P.f+k.f,l:P,r:k};for(var re=Qe[0].s,me=1;me<Se;++me)Qe[me].s>re&&(re=Qe[me].s);var ye=new p(re+1),fe=et(ie[W-1],ye,0);if(fe>K){var me=0,Ae=0,Le=fe-K,Ve=1<<Le;for(Qe.sort(function(ct,Nt){return ye[Nt.s]-ye[ct.s]||ct.f-Nt.f});me<Se;++me){var Ze=Qe[me].s;if(ye[Ze]>K)Ae+=Ve-(1<<fe-ye[Ze]),ye[Ze]=K;else break}for(Ae>>=Le;Ae>0;){var dt=Qe[me].s;ye[dt]<K?Ae-=1<<K-ye[dt]++-1:++me}for(;me>=0&&Ae;--me){var je=Qe[me].s;ye[je]==K&&(--ye[je],++Ae)}fe=K}return{t:new m(ye),l:fe}},et=function($,K,ie){return $.s==-1?Math.max(et($.l,K,ie+1),et($.r,K,ie+1)):K[$.s]=ie},Ue=function($){for(var K=$.length;K&&!$[--K];);for(var ie=new p(++K),me=0,Se=$[0],Qe=1,ht=function(k){ie[me++]=k},P=1;P<=K;++P)if($[P]==Se&&P!=K)++Qe;else{if(!Se&&Qe>2){for(;Qe>138;Qe-=138)ht(32754);Qe>2&&(ht(Qe>10?Qe-11<<5|28690:Qe-3<<5|12305),Qe=0)}else if(Qe>3){for(ht(Se),--Qe;Qe>6;Qe-=6)ht(8304);Qe>2&&(ht(Qe-3<<5|8208),Qe=0)}for(;Qe--;)ht(Se);Qe=1,Se=$[P]}return{c:ie.subarray(0,me),n:K}},jt=function($,K){for(var ie=0,me=0;me<K.length;++me)ie+=$[me]*K[me];return ie},rt=function($,K,ie){var me=ie.length,Se=ue(K+2);$[Se]=me&255,$[Se+1]=me>>8,$[Se+2]=$[Se]^255,$[Se+3]=$[Se+1]^255;for(var Qe=0;Qe<me;++Qe)$[Se+Qe+4]=ie[Qe];return(Se+4+me)*8},Ct=function($,K,ie,me,Se,Qe,ht,P,k,M,W){at(K,W++,ie),++Se[256];for(var Z=ut(Se,15),re=Z.t,ye=Z.l,fe=ut(Qe,15),Ae=fe.t,Le=fe.l,Ve=Ue(re),Ze=Ve.c,dt=Ve.n,je=Ue(Ae),St=je.c,ct=je.n,Nt=new p(19),it=0;it<Ze.length;++it)++Nt[Ze[it]&31];for(var it=0;it<St.length;++it)++Nt[St[it]&31];for(var Ot=ut(Nt,7),qt=Ot.t,It=Ot.l,nt=19;nt>4&&!qt[w[nt-1]];--nt);var Vt=M+5<<3,Tr=jt(Se,xe)+jt(Qe,we)+ht,or=jt(Se,re)+jt(Qe,Ae)+ht+14+3*nt+jt(Nt,qt)+2*Nt[16]+3*Nt[17]+7*Nt[18];if(k>=0&&Vt<=Tr&&Vt<=or)return rt(K,W,$.subarray(k,k+M));var Mt,_r,lt,vt;if(at(K,W,1+(or<Tr)),W+=2,or<Tr){Mt=de(re,ye,0),_r=re,lt=de(Ae,Le,0),vt=Ae;var Rt=de(qt,It,0);at(K,W,dt-257),at(K,W+5,ct-1),at(K,W+10,nt-4),W+=14;for(var it=0;it<nt;++it)at(K,W+3*it,qt[w[it]]);W+=3*nt;for(var Dt=[Ze,St],vr=0;vr<2;++vr)for(var kr=Dt[vr],it=0;it<kr.length;++it){var Rr=kr[it]&31;at(K,W,Rt[Rr]),W+=qt[Rr],Rr>15&&(at(K,W,kr[it]>>5&127),W+=kr[it]>>12)}}else Mt=ve,_r=xe,lt=ae,vt=we;for(var it=0;it<P;++it){var ur=me[it];if(ur>255){var Rr=ur>>18&31;De(K,W,Mt[Rr+257]),W+=_r[Rr+257],Rr>7&&(at(K,W,ur>>23&31),W+=y[Rr]);var Or=ur&31;De(K,W,lt[Or]),W+=vt[Or],Or>3&&(De(K,W,ur>>5&8191),W+=x[Or])}else De(K,W,Mt[ur]),W+=_r[ur]}return De(K,W,Mt[256]),W+_r[256]},ke=new g([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Xe=new m(0),mt=function($,K,ie,me,Se,Qe){var ht=Qe.z||$.length,P=new m(me+ht+5*(1+Math.ceil(ht/7e3))+Se),k=P.subarray(me,P.length-Se),M=Qe.l,W=(Qe.r||0)&7;if(K){W&&(k[0]=Qe.r>>3);for(var Z=ke[K-1],re=Z>>13,ye=Z&8191,fe=(1<<ie)-1,Ae=Qe.p||new p(32768),Le=Qe.h||new p(fe+1),Ve=Math.ceil(ie/3),Ze=2*Ve,dt=function(fr){return($[fr]^$[fr+1]<<Ve^$[fr+2]<<Ze)&fe},je=new g(25e3),St=new p(288),ct=new p(32),Nt=0,it=0,Ot=Qe.i||0,qt=0,It=Qe.w||0,nt=0;Ot+2<ht;++Ot){var Vt=dt(Ot),Tr=Ot&32767,or=Le[Vt];if(Ae[Tr]=or,Le[Vt]=Tr,It<=Ot){var Mt=ht-Ot;if((Nt>7e3||qt>24576)&&(Mt>423||!M)){W=Ct($,k,0,je,St,ct,it,qt,nt,Ot-nt,W),qt=Nt=it=0,nt=Ot;for(var _r=0;_r<286;++_r)St[_r]=0;for(var _r=0;_r<30;++_r)ct[_r]=0}var lt=2,vt=0,Rt=ye,Dt=Tr-or&32767;if(Mt>2&&Vt==dt(Ot-Dt))for(var vr=Math.min(re,Mt)-1,kr=Math.min(32767,Ot),Rr=Math.min(258,Mt);Dt<=kr&&--Rt&&Tr!=or;){if($[Ot+lt]==$[Ot+lt-Dt]){for(var ur=0;ur<Rr&&$[Ot+ur]==$[Ot+ur-Dt];++ur);if(ur>lt){if(lt=ur,vt=Dt,ur>vr)break;for(var Or=Math.min(Dt,ur-2),pn=0,_r=0;_r<Or;++_r){var on=Ot-Dt+_r&32767,Ye=Ae[on],Tt=on-Ye&32767;Tt>pn&&(pn=Tt,or=on)}}}Tr=or,or=Ae[Tr],Dt+=Tr-or&32767}if(vt){je[qt++]=268435456|C[lt]<<18|U[vt];var Lt=C[lt]&31,Wt=U[vt]&31;it+=y[Lt]+x[Wt],++St[257+Lt],++ct[Wt],It=Ot+lt,++Nt}else je[qt++]=$[Ot],++St[$[Ot]]}}for(Ot=Math.max(Ot,It);Ot<ht;++Ot)je[qt++]=$[Ot],++St[$[Ot]];W=Ct($,k,M,je,St,ct,it,qt,nt,Ot-nt,W),M||(Qe.r=W&7|k[W/8|0]<<3,W-=7,Qe.h=Le,Qe.p=Ae,Qe.i=Ot,Qe.w=It)}else{for(var Ot=Qe.w||0;Ot<ht+M;Ot+=65535){var Xt=Ot+65535;Xt>=ht&&(k[W/8|0]=M,Xt=ht),W=rt(k,W+1,$.subarray(Ot,Xt))}Qe.i=ht}return Pe(P,0,me+ue(W)+Se)},Jt=(function(){for(var $=new Int32Array(256),K=0;K<256;++K){for(var ie=K,me=9;--me;)ie=(ie&1&&-306674912)^ie>>>1;$[K]=ie}return $})(),tr=function(){var $=-1;return{p:function(K){for(var ie=$,me=0;me<K.length;++me)ie=Jt[ie&255^K[me]]^ie>>>8;$=ie},d:function(){return~$}}},lr=function(){var $=1,K=0;return{p:function(ie){for(var me=$,Se=K,Qe=ie.length|0,ht=0;ht!=Qe;){for(var P=Math.min(ht+2655,Qe);ht<P;++ht)Se+=me+=ie[ht];me=(me&65535)+15*(me>>16),Se=(Se&65535)+15*(Se>>16)}$=me,K=Se},d:function(){return $%=65521,K%=65521,($&255)<<24|($&65280)<<8|(K&255)<<8|K>>8}}},Pr=function($,K,ie,me,Se){if(!Se&&(Se={l:1},K.dictionary)){var Qe=K.dictionary.subarray(-32768),ht=new m(Qe.length+$.length);ht.set(Qe),ht.set($,Qe.length),$=ht,Se.w=Qe.length}return mt($,K.level==null?6:K.level,K.mem==null?Se.l?Math.ceil(Math.max(8,Math.min(13,Math.log($.length)))*1.5):20:12+K.mem,ie,me,Se)},tn=function($,K){var ie={};for(var me in $)ie[me]=$[me];for(var me in K)ie[me]=K[me];return ie},Gr=function($,K,ie){for(var me=$(),Se=$.toString(),Qe=Se.slice(Se.indexOf("[")+1,Se.lastIndexOf("]")).replace(/\s+/g,"").split(","),ht=0;ht<me.length;++ht){var P=me[ht],k=Qe[ht];if(typeof P=="function"){K+=";"+k+"=";var M=P.toString();if(P.prototype)if(M.indexOf("[native code]")!=-1){var W=M.indexOf(" ",8)+1;K+=M.slice(W,M.indexOf("(",W))}else{K+=M;for(var Z in P.prototype)K+=";"+k+".prototype."+Z+"="+P.prototype[Z].toString()}else K+=M}else ie[k]=P}return K},Xr=[],Qr=function($){var K=[];for(var ie in $)$[ie].buffer&&K.push(($[ie]=new $[ie].constructor($[ie])).buffer);return K},Pn=function($,K,ie,me){if(!Xr[ie]){for(var Se="",Qe={},ht=$.length-1,P=0;P<ht;++P)Se=Gr($[P],Se,Qe);Xr[ie]={c:Gr($[ht],Se,Qe),e:Qe}}var k=tn({},Xr[ie].e);return f(Xr[ie].c+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+K.toString()+"}",ie,k,Qr(k),me)},wn=function(){return[m,p,g,y,x,w,N,D,ne,oe,G,He,de,Ie,Ce,be,ue,Pe,Fe,ft,Qs,Qt,gr]},yi=function(){return[m,p,g,y,x,w,C,U,ve,xe,ae,we,G,ke,Xe,de,at,De,ut,et,Ue,jt,rt,Ct,ue,Pe,mt,Pr,ta,Qt]},ot=function(){return[yn,li,Hr,tr,Jt]},Gt=function(){return[mn,Mn]},Ir=function(){return[Cs,Hr,lr]},ar=function(){return[Ms]},Qt=function($){return postMessage($,[$.buffer])},gr=function($){return $&&{out:$.size&&new m($.size),dictionary:$.dictionary}},Yr=function($,K,ie,me,Se,Qe){var ht=Pn(ie,me,Se,function(P,k){ht.terminate(),Qe(P,k)});return ht.postMessage([$,K],K.consume?[$.buffer]:[]),function(){ht.terminate()}},en=function($){return $.ondata=function(K,ie){return postMessage([K,ie],[K.buffer])},function(K){K.data.length?($.push(K.data[0],K.data[1]),postMessage([K.data[0].length])):$.flush()}},On=function($,K,ie,me,Se,Qe,ht){var P,k=Pn($,me,Se,function(M,W){M?(k.terminate(),K.ondata.call(K,M)):Array.isArray(W)?W.length==1?(K.queuedSize-=W[0],K.ondrain&&K.ondrain(W[0])):(W[1]&&k.terminate(),K.ondata.call(K,M,W[0],W[1])):ht(W)});k.postMessage(ie),K.queuedSize=0,K.push=function(M,W){K.ondata||Fe(5),P&&K.ondata(Fe(4,0,1),null,!!W),K.queuedSize+=M.length,k.postMessage([M,P=W],[M.buffer])},K.terminate=function(){k.terminate()},Qe&&(K.flush=function(){k.postMessage([])})},fn=function($,K){return $[K]|$[K+1]<<8},Jn=function($,K){return($[K]|$[K+1]<<8|$[K+2]<<16|$[K+3]<<24)>>>0},ln=function($,K){return Jn($,K)+Jn($,K+4)*4294967296},Hr=function($,K,ie){for(;ie;++K)$[K]=ie,ie>>>=8},yn=function($,K){var ie=K.filename;if($[0]=31,$[1]=139,$[2]=8,$[8]=K.level<2?4:K.level==9?2:0,$[9]=3,K.mtime!=0&&Hr($,4,Math.floor(new Date(K.mtime||Date.now())/1e3)),ie){$[3]=8;for(var me=0;me<=ie.length;++me)$[me+10]=ie.charCodeAt(me)}},mn=function($){($[0]!=31||$[1]!=139||$[2]!=8)&&Fe(6,"invalid gzip data");var K=$[3],ie=10;K&4&&(ie+=($[10]|$[11]<<8)+2);for(var me=(K>>3&1)+(K>>4&1);me>0;me-=!$[ie++]);return ie+(K&2)},Mn=function($){var K=$.length;return($[K-4]|$[K-3]<<8|$[K-2]<<16|$[K-1]<<24)>>>0},li=function($){return 10+($.filename?$.filename.length+1:0)},Cs=function($,K){var ie=K.level,me=ie==0?0:ie<6?1:ie==9?3:2;if($[0]=120,$[1]=me<<6|(K.dictionary&&32),$[1]|=31-($[0]<<8|$[1])%31,K.dictionary){var Se=lr();Se.p(K.dictionary),Hr($,2,Se.d())}},Ms=function($,K){return(($[0]&15)!=8||$[0]>>4>7||($[0]<<8|$[1])%31)&&Fe(6,"invalid zlib data"),($[1]>>5&1)==+!K&&Fe(6,"invalid zlib data: "+($[1]&32?"need":"unexpected")+" dictionary"),($[1]>>3&4)+2};function Ns($,K){return typeof $=="function"&&(K=$,$={}),this.ondata=K,$}var ei=(function(){function $(K,ie){if(typeof K=="function"&&(ie=K,K={}),this.ondata=ie,this.o=K||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new m(98304),this.o.dictionary){var me=this.o.dictionary.subarray(-32768);this.b.set(me,32768-me.length),this.s.i=32768-me.length}}return $.prototype.p=function(K,ie){this.ondata(Pr(K,this.o,0,0,this.s),ie)},$.prototype.push=function(K,ie){this.ondata||Fe(5),this.s.l&&Fe(4);var me=K.length+this.s.z;if(me>this.b.length){if(me>2*this.b.length-32768){var Se=new m(me&-32768);Se.set(this.b.subarray(0,this.s.z)),this.b=Se}var Qe=this.b.length-this.s.z;this.b.set(K.subarray(0,Qe),this.s.z),this.s.z=this.b.length,this.p(this.b,!1),this.b.set(this.b.subarray(-32768)),this.b.set(K.subarray(Qe),32768),this.s.z=K.length-Qe+32768,this.s.i=32766,this.s.w=32768}else this.b.set(K,this.s.z),this.s.z+=K.length;this.s.l=ie&1,(this.s.z>this.s.w+8191||ie)&&(this.p(this.b,ie||!1),this.s.w=this.s.i,this.s.i-=2)},$.prototype.flush=function(){this.ondata||Fe(5),this.s.l&&Fe(4),this.p(this.b,!1),this.s.w=this.s.i,this.s.i-=2},$})(),un=(function(){function $(K,ie){On([yi,function(){return[en,ei]}],this,Ns.call(this,K,ie),function(me){var Se=new ei(me.data);onmessage=en(Se)},6,1)}return $})();function as($,K,ie){return ie||(ie=K,K={}),typeof ie!="function"&&Fe(7),Yr($,K,[yi],function(me){return Qt(ta(me.data[0],me.data[1]))},0,ie)}function ta($,K){return Pr($,K||{},0,0)}var jn=(function(){function $(K,ie){typeof K=="function"&&(ie=K,K={}),this.ondata=ie;var me=K&&K.dictionary&&K.dictionary.subarray(-32768);this.s={i:0,b:me?me.length:0},this.o=new m(32768),this.p=new m(0),me&&this.o.set(me)}return $.prototype.e=function(K){if(this.ondata||Fe(5),this.d&&Fe(4),!this.p.length)this.p=K;else if(K.length){var ie=new m(this.p.length+K.length);ie.set(this.p),ie.set(K,this.p.length),this.p=ie}},$.prototype.c=function(K){this.s.i=+(this.d=K||!1);var ie=this.s.b,me=ft(this.p,this.s,this.o);this.ondata(Pe(me,ie,this.s.b),this.d),this.o=Pe(me,this.s.b-32768),this.s.b=this.o.length,this.p=Pe(this.p,this.s.p/8|0),this.s.p&=7},$.prototype.push=function(K,ie){this.e(K),this.c(ie)},$})(),Nn=(function(){function $(K,ie){On([wn,function(){return[en,jn]}],this,Ns.call(this,K,ie),function(me){var Se=new jn(me.data);onmessage=en(Se)},7,0)}return $})();function Fs($,K,ie){return ie||(ie=K,K={}),typeof ie!="function"&&Fe(7),Yr($,K,[wn],function(me){return Qt(Qs(me.data[0],gr(me.data[1])))},1,ie)}function Qs($,K){return ft($,{i:2},K&&K.out,K&&K.dictionary)}var Us=(function(){function $(K,ie){this.c=tr(),this.l=0,this.v=1,ei.call(this,K,ie)}return $.prototype.push=function(K,ie){this.c.p(K),this.l+=K.length,ei.prototype.push.call(this,K,ie)},$.prototype.p=function(K,ie){var me=Pr(K,this.o,this.v&&li(this.o),ie&&8,this.s);this.v&&(yn(me,this.o),this.v=0),ie&&(Hr(me,me.length-8,this.c.d()),Hr(me,me.length-4,this.l)),this.ondata(me,ie)},$.prototype.flush=function(){ei.prototype.flush.call(this)},$})(),ns=(function(){function $(K,ie){On([yi,ot,function(){return[en,ei,Us]}],this,Ns.call(this,K,ie),function(me){var Se=new Us(me.data);onmessage=en(Se)},8,1)}return $})();function qs($,K,ie){return ie||(ie=K,K={}),typeof ie!="function"&&Fe(7),Yr($,K,[yi,ot,function(){return[Rs]}],function(me){return Qt(Rs(me.data[0],me.data[1]))},2,ie)}function Rs($,K){K||(K={});var ie=tr(),me=$.length;ie.p($);var Se=Pr($,K,li(K),8),Qe=Se.length;return yn(Se,K),Hr(Se,Qe-8,ie.d()),Hr(Se,Qe-4,me),Se}var za=(function(){function $(K,ie){this.v=1,this.r=0,jn.call(this,K,ie)}return $.prototype.push=function(K,ie){if(jn.prototype.e.call(this,K),this.r+=K.length,this.v){var me=this.p.subarray(this.v-1),Se=me.length>3?mn(me):4;if(Se>me.length){if(!ie)return}else this.v>1&&this.onmember&&this.onmember(this.r-me.length);this.p=me.subarray(Se),this.v=0}jn.prototype.c.call(this,ie),this.s.f&&!this.s.l&&!ie&&(this.v=ue(this.s.p)+9,this.s={i:0},this.o=new m(0),this.push(new m(0),ie))},$})(),hs=(function(){function $(K,ie){var me=this;On([wn,Gt,function(){return[en,jn,za]}],this,Ns.call(this,K,ie),function(Se){var Qe=new za(Se.data);Qe.onmember=function(ht){return postMessage(ht)},onmessage=en(Qe)},9,0,function(Se){return me.onmember&&me.onmember(Se)})}return $})();function wu($,K,ie){return ie||(ie=K,K={}),typeof ie!="function"&&Fe(7),Yr($,K,[wn,Gt,function(){return[ro]}],function(me){return Qt(ro(me.data[0],me.data[1]))},3,ie)}function ro($,K){var ie=mn($);return ie+8>$.length&&Fe(6,"invalid gzip data"),ft($.subarray(ie,-8),{i:2},K&&K.out||new m(Mn($)),K&&K.dictionary)}var Fl=(function(){function $(K,ie){this.c=lr(),this.v=1,ei.call(this,K,ie)}return $.prototype.push=function(K,ie){this.c.p(K),ei.prototype.push.call(this,K,ie)},$.prototype.p=function(K,ie){var me=Pr(K,this.o,this.v&&(this.o.dictionary?6:2),ie&&4,this.s);this.v&&(Cs(me,this.o),this.v=0),ie&&Hr(me,me.length-4,this.c.d()),this.ondata(me,ie)},$.prototype.flush=function(){ei.prototype.flush.call(this)},$})(),nu=(function(){function $(K,ie){On([yi,Ir,function(){return[en,ei,Fl]}],this,Ns.call(this,K,ie),function(me){var Se=new Fl(me.data);onmessage=en(Se)},10,1)}return $})();function pl($,K,ie){return ie||(ie=K,K={}),typeof ie!="function"&&Fe(7),Yr($,K,[yi,Ir,function(){return[ra]}],function(me){return Qt(ra(me.data[0],me.data[1]))},4,ie)}function ra($,K){K||(K={});var ie=lr();ie.p($);var me=Pr($,K,K.dictionary?6:2,4);return Cs(me,K),Hr(me,me.length-4,ie.d()),me}var qa=(function(){function $(K,ie){jn.call(this,K,ie),this.v=K&&K.dictionary?2:1}return $.prototype.push=function(K,ie){if(jn.prototype.e.call(this,K),this.v){if(this.p.length<6&&!ie)return;this.p=this.p.subarray(Ms(this.p,this.v-1)),this.v=0}ie&&(this.p.length<4&&Fe(6,"invalid zlib data"),this.p=this.p.subarray(0,-4)),jn.prototype.c.call(this,ie)},$})(),Ws=(function(){function $(K,ie){On([wn,ar,function(){return[en,jn,qa]}],this,Ns.call(this,K,ie),function(me){var Se=new qa(me.data);onmessage=en(Se)},11,0)}return $})();function wa($,K,ie){return ie||(ie=K,K={}),typeof ie!="function"&&Fe(7),Yr($,K,[wn,ar,function(){return[$s]}],function(me){return Qt($s(me.data[0],gr(me.data[1])))},5,ie)}function $s($,K){return ft($.subarray(Ms($,K&&K.dictionary),-4),{i:2},K&&K.out,K&&K.dictionary)}var Ll=(function(){function $(K,ie){this.o=Ns.call(this,K,ie)||{},this.G=za,this.I=jn,this.Z=qa}return $.prototype.i=function(){var K=this;this.s.ondata=function(ie,me){K.ondata(ie,me)}},$.prototype.push=function(K,ie){if(this.ondata||Fe(5),this.s)this.s.push(K,ie);else{if(this.p&&this.p.length){var me=new m(this.p.length+K.length);me.set(this.p),me.set(K,this.p.length)}else this.p=K;this.p.length>2&&(this.s=this.p[0]==31&&this.p[1]==139&&this.p[2]==8?new this.G(this.o):(this.p[0]&15)!=8||this.p[0]>>4>7||(this.p[0]<<8|this.p[1])%31?new this.I(this.o):new this.Z(this.o),this.i(),this.s.push(this.p,ie),this.p=null)}},$})(),go=(function(){function $(K,ie){Ll.call(this,K,ie),this.queuedSize=0,this.G=hs,this.I=Nn,this.Z=Ws}return $.prototype.i=function(){var K=this;this.s.ondata=function(ie,me,Se){K.ondata(ie,me,Se)},this.s.ondrain=function(ie){K.queuedSize-=ie,K.ondrain&&K.ondrain(ie)}},$.prototype.push=function(K,ie){this.queuedSize+=K.length,Ll.prototype.push.call(this,K,ie)},$})();function no($,K,ie){return ie||(ie=K,K={}),typeof ie!="function"&&Fe(7),$[0]==31&&$[1]==139&&$[2]==8?wu($,K,ie):($[0]&15)!=8||$[0]>>4>7||($[0]<<8|$[1])%31?Fs($,K,ie):wa($,K,ie)}function gl($,K){return $[0]==31&&$[1]==139&&$[2]==8?ro($,K):($[0]&15)!=8||$[0]>>4>7||($[0]<<8|$[1])%31?Qs($,K):$s($,K)}var Ul=function($,K,ie,me){for(var Se in $){var Qe=$[Se],ht=K+Se,P=me;Array.isArray(Qe)&&(P=tn(me,Qe[1]),Qe=Qe[0]),Qe instanceof m?ie[ht]=[Qe,P]:(ie[ht+="/"]=[new m(0),P],Ul(Qe,ht,ie,me))}},mc=typeof TextEncoder<"u"&&new TextEncoder,zs=typeof TextDecoder<"u"&&new TextDecoder,ci=0;try{zs.decode(Xe,{stream:!0}),ci=1}catch{}var ks=function($){for(var K="",ie=0;;){var me=$[ie++],Se=(me>127)+(me>223)+(me>239);if(ie+Se>$.length)return{s:K,r:Pe($,ie-1)};Se?Se==3?(me=((me&15)<<18|($[ie++]&63)<<12|($[ie++]&63)<<6|$[ie++]&63)-65536,K+=String.fromCharCode(55296|me>>10,56320|me&1023)):Se&1?K+=String.fromCharCode((me&31)<<6|$[ie++]&63):K+=String.fromCharCode((me&15)<<12|($[ie++]&63)<<6|$[ie++]&63):K+=String.fromCharCode(me)}},Ta=(function(){function $(K){this.ondata=K,ci?this.t=new TextDecoder:this.p=Xe}return $.prototype.push=function(K,ie){if(this.ondata||Fe(5),ie=!!ie,this.t){this.ondata(this.t.decode(K,{stream:!0}),ie),ie&&(this.t.decode().length&&Fe(8),this.t=null);return}this.p||Fe(4);var me=new m(this.p.length+K.length);me.set(this.p),me.set(K,this.p.length);var Se=ks(me),Qe=Se.s,ht=Se.r;ie?(ht.length&&Fe(8),this.p=null):this.p=ht,this.ondata(Qe,ie)},$})(),Va=(function(){function $(K){this.ondata=K}return $.prototype.push=function(K,ie){this.ondata||Fe(5),this.d&&Fe(4),this.ondata(Ca(K),this.d=ie||!1)},$})();function Ca($,K){if(K){for(var ie=new m($.length),me=0;me<$.length;++me)ie[me]=$.charCodeAt(me);return ie}if(mc)return mc.encode($);for(var Se=$.length,Qe=new m($.length+($.length>>1)),ht=0,P=function(W){Qe[ht++]=W},me=0;me<Se;++me){if(ht+5>Qe.length){var k=new m(ht+8+(Se-me<<1));k.set(Qe),Qe=k}var M=$.charCodeAt(me);M<128||K?P(M):M<2048?(P(192|M>>6),P(128|M&63)):M>55295&&M<57344?(M=65536+(M&1047552)|$.charCodeAt(++me)&1023,P(240|M>>18),P(128|M>>12&63),P(128|M>>6&63),P(128|M&63)):(P(224|M>>12),P(128|M>>6&63),P(128|M&63))}return Pe(Qe,0,ht)}function gi($,K){if(K){for(var ie="",me=0;me<$.length;me+=16384)ie+=String.fromCharCode.apply(null,$.subarray(me,me+16384));return ie}else{if(zs)return zs.decode($);var Se=ks($),Qe=Se.s,ie=Se.r;return ie.length&&Fe(8),Qe}}var Zn=function($){return $==1?3:$<6?2:$==9?1:0},fs=function($,K){return K+30+fn($,K+26)+fn($,K+28)},_a=function($,K,ie){var me=fn($,K+28),Se=gi($.subarray(K+46,K+46+me),!(fn($,K+8)&2048)),Qe=K+46+me,ht=Jn($,K+20),P=ie&&ht==4294967295?Qo($,Qe):[ht,Jn($,K+24),Jn($,K+42)],k=P[0],M=P[1],W=P[2];return[fn($,K+10),k,M,Se,Qe+fn($,K+30)+fn($,K+32),W]},Qo=function($,K){for(;fn($,K)!=1;K+=4+fn($,K+2));return[ln($,K+12),ln($,K+4),ln($,K+20)]},Hi=function($){var K=0;if($)for(var ie in $){var me=$[ie].length;me>65535&&Fe(9),K+=me+4}return K},zo=function($,K,ie,me,Se,Qe,ht,P){var k=me.length,M=ie.extra,W=P&&P.length,Z=Hi(M);Hr($,K,ht!=null?33639248:67324752),K+=4,ht!=null&&($[K++]=20,$[K++]=ie.os),$[K]=20,K+=2,$[K++]=ie.flag<<1|(Qe<0&&8),$[K++]=Se&&8,$[K++]=ie.compression&255,$[K++]=ie.compression>>8;var re=new Date(ie.mtime==null?Date.now():ie.mtime),ye=re.getFullYear()-1980;if((ye<0||ye>119)&&Fe(10),Hr($,K,ye<<25|re.getMonth()+1<<21|re.getDate()<<16|re.getHours()<<11|re.getMinutes()<<5|re.getSeconds()>>1),K+=4,Qe!=-1&&(Hr($,K,ie.crc),Hr($,K+4,Qe<0?-Qe-2:Qe),Hr($,K+8,ie.size)),Hr($,K+12,k),Hr($,K+14,Z),K+=16,ht!=null&&(Hr($,K,W),Hr($,K+6,ie.attrs),Hr($,K+10,ht),K+=14),$.set(me,K),K+=k,Z)for(var fe in M){var Ae=M[fe],Le=Ae.length;Hr($,K,+fe),Hr($,K+2,Le),$.set(Ae,K+4),K+=4+Le}return W&&($.set(P,K),K+=W),K},Ea=function($,K,ie,me,Se){Hr($,K,101010256),Hr($,K+8,ie),Hr($,K+10,ie),Hr($,K+12,me),Hr($,K+16,Se)},Xs=(function(){function $(K){this.filename=K,this.c=tr(),this.size=0,this.compression=0}return $.prototype.process=function(K,ie){this.ondata(null,K,ie)},$.prototype.push=function(K,ie){this.ondata||Fe(5),this.c.p(K),this.size+=K.length,ie&&(this.crc=this.c.d()),this.process(K,ie||!1)},$})(),ms=(function(){function $(K,ie){var me=this;ie||(ie={}),Xs.call(this,K),this.d=new ei(ie,function(Se,Qe){me.ondata(null,Se,Qe)}),this.compression=8,this.flag=Zn(ie.level)}return $.prototype.process=function(K,ie){try{this.d.push(K,ie)}catch(me){this.ondata(me,null,ie)}},$.prototype.push=function(K,ie){Xs.prototype.push.call(this,K,ie)},$})(),jo=(function(){function $(K,ie){var me=this;ie||(ie={}),Xs.call(this,K),this.d=new un(ie,function(Se,Qe,ht){me.ondata(Se,Qe,ht)}),this.compression=8,this.flag=Zn(ie.level),this.terminate=this.d.terminate}return $.prototype.process=function(K,ie){this.d.push(K,ie)},$.prototype.push=function(K,ie){Xs.prototype.push.call(this,K,ie)},$})(),Ka=(function(){function $(K){this.ondata=K,this.u=[],this.d=1}return $.prototype.add=function(K){var ie=this;if(this.ondata||Fe(5),this.d&2)this.ondata(Fe(4+(this.d&1)*8,0,1),null,!1);else{var me=Ca(K.filename),Se=me.length,Qe=K.comment,ht=Qe&&Ca(Qe),P=Se!=K.filename.length||ht&&Qe.length!=ht.length,k=Se+Hi(K.extra)+30;Se>65535&&this.ondata(Fe(11,0,1),null,!1);var M=new m(k);zo(M,0,K,me,P,-1);var W=[M],Z=function(){for(var Le=0,Ve=W;Le<Ve.length;Le++){var Ze=Ve[Le];ie.ondata(null,Ze,!1)}W=[]},re=this.d;this.d=0;var ye=this.u.length,fe=tn(K,{f:me,u:P,o:ht,t:function(){K.terminate&&K.terminate()},r:function(){if(Z(),re){var Le=ie.u[ye+1];Le?Le.r():ie.d=1}re=1}}),Ae=0;K.ondata=function(Le,Ve,Ze){if(Le)ie.ondata(Le,Ve,Ze),ie.terminate();else if(Ae+=Ve.length,W.push(Ve),Ze){var dt=new m(16);Hr(dt,0,134695760),Hr(dt,4,K.crc),Hr(dt,8,Ae),Hr(dt,12,K.size),W.push(dt),fe.c=Ae,fe.b=k+Ae+16,fe.crc=K.crc,fe.size=K.size,re&&fe.r(),re=1}else re&&Z()},this.u.push(fe)}},$.prototype.end=function(){var K=this;if(this.d&2){this.ondata(Fe(4+(this.d&1)*8,0,1),null,!0);return}this.d?this.e():this.u.push({r:function(){K.d&1&&(K.u.splice(-1,1),K.e())},t:function(){}}),this.d=3},$.prototype.e=function(){for(var K=0,ie=0,me=0,Se=0,Qe=this.u;Se<Qe.length;Se++){var ht=Qe[Se];me+=46+ht.f.length+Hi(ht.extra)+(ht.o?ht.o.length:0)}for(var P=new m(me+22),k=0,M=this.u;k<M.length;k++){var ht=M[k];zo(P,K,ht,ht.f,ht.u,-ht.c-2,ie,ht.o),K+=46+ht.f.length+Hi(ht.extra)+(ht.o?ht.o.length:0),ie+=ht.b}Ea(P,K,this.u.length,me,ie),this.ondata(null,P,!0),this.d=2},$.prototype.terminate=function(){for(var K=0,ie=this.u;K<ie.length;K++){var me=ie[K];me.t()}this.d=2},$})();function Vs($,K,ie){ie||(ie=K,K={}),typeof ie!="function"&&Fe(7);var me={};Ul($,"",me,K);var Se=Object.keys(me),Qe=Se.length,ht=0,P=0,k=Qe,M=new Array(Qe),W=[],Z=function(){for(var Le=0;Le<W.length;++Le)W[Le]()},re=function(Le,Ve){V(function(){ie(Le,Ve)})};V(function(){re=ie});var ye=function(){var Le=new m(P+22),Ve=ht,Ze=P-ht;P=0;for(var dt=0;dt<k;++dt){var je=M[dt];try{var St=je.c.length;zo(Le,P,je,je.f,je.u,St);var ct=30+je.f.length+Hi(je.extra),Nt=P+ct;Le.set(je.c,Nt),zo(Le,ht,je,je.f,je.u,St,P,je.m),ht+=16+ct+(je.m?je.m.length:0),P=Nt+St}catch(it){return re(it,null)}}Ea(Le,ht,M.length,Ze,Ve),re(null,Le)};Qe||ye();for(var fe=function(Le){var Ve=Se[Le],Ze=me[Ve],dt=Ze[0],je=Ze[1],St=tr(),ct=dt.length;St.p(dt);var Nt=Ca(Ve),it=Nt.length,Ot=je.comment,qt=Ot&&Ca(Ot),It=qt&&qt.length,nt=Hi(je.extra),Vt=je.level==0?0:8,Tr=function(or,Mt){if(or)Z(),re(or,null);else{var _r=Mt.length;M[Le]=tn(je,{size:ct,crc:St.d(),c:Mt,f:Nt,m:qt,u:it!=Ve.length||qt&&Ot.length!=It,compression:Vt}),ht+=30+it+nt+_r,P+=76+2*(it+nt)+(It||0)+_r,--Qe||ye()}};if(it>65535&&Tr(Fe(11,0,1),null),!Vt)Tr(null,dt);else if(ct<16e4)try{Tr(null,ta(dt,je))}catch(or){Tr(or,null)}else W.push(as(dt,je,Tr))},Ae=0;Ae<k;++Ae)fe(Ae);return Z}function Xa($,K){K||(K={});var ie={},me=[];Ul($,"",ie,K);var Se=0,Qe=0;for(var ht in ie){var P=ie[ht],k=P[0],M=P[1],W=M.level==0?0:8,Z=Ca(ht),re=Z.length,ye=M.comment,fe=ye&&Ca(ye),Ae=fe&&fe.length,Le=Hi(M.extra);re>65535&&Fe(11);var Ve=W?ta(k,M):k,Ze=Ve.length,dt=tr();dt.p(k),me.push(tn(M,{size:k.length,crc:dt.d(),c:Ve,f:Z,m:fe,u:re!=ht.length||fe&&ye.length!=Ae,o:Se,compression:W})),Se+=30+re+Le+Ze,Qe+=76+2*(re+Le)+(Ae||0)+Ze}for(var je=new m(Qe+22),St=Se,ct=Qe-Se,Nt=0;Nt<me.length;++Nt){var Z=me[Nt];zo(je,Z.o,Z,Z.f,Z.u,Z.c.length);var it=30+Z.f.length+Hi(Z.extra);je.set(Z.c,Z.o+it),zo(je,Se,Z,Z.f,Z.u,Z.c.length,Z.o,Z.m),Se+=16+it+(Z.m?Z.m.length:0)}return Ea(je,Se,me.length,ct,St),je}var vo=(function(){function $(){}return $.prototype.push=function(K,ie){this.ondata(null,K,ie)},$.compression=0,$})(),io=(function(){function $(){var K=this;this.i=new jn(function(ie,me){K.ondata(null,ie,me)})}return $.prototype.push=function(K,ie){try{this.i.push(K,ie)}catch(me){this.ondata(me,null,ie)}},$.compression=8,$})(),Vo=(function(){function $(K,ie){var me=this;ie<32e4?this.i=new jn(function(Se,Qe){me.ondata(null,Se,Qe)}):(this.i=new Nn(function(Se,Qe,ht){me.ondata(Se,Qe,ht)}),this.terminate=this.i.terminate)}return $.prototype.push=function(K,ie){this.i.terminate&&(K=Pe(K,0)),this.i.push(K,ie)},$.compression=8,$})(),Ht=(function(){function $(K){this.onfile=K,this.k=[],this.o={0:vo},this.p=Xe}return $.prototype.push=function(K,ie){var me=this;if(this.onfile||Fe(5),this.p||Fe(4),this.c>0){var Se=Math.min(this.c,K.length),Qe=K.subarray(0,Se);if(this.c-=Se,this.d?this.d.push(Qe,!this.c):this.k[0].push(Qe),K=K.subarray(Se),K.length)return this.push(K,ie)}else{var ht=0,P=0,k=void 0,M=void 0;this.p.length?K.length?(M=new m(this.p.length+K.length),M.set(this.p),M.set(K,this.p.length)):M=this.p:M=K;for(var W=M.length,Z=this.c,re=Z&&this.d,ye=function(){var Ve,Ze=Jn(M,P);if(Ze==67324752){ht=1,k=P,fe.d=null,fe.c=0;var dt=fn(M,P+6),je=fn(M,P+8),St=dt&2048,ct=dt&8,Nt=fn(M,P+26),it=fn(M,P+28);if(W>P+30+Nt+it){var Ot=[];fe.k.unshift(Ot),ht=2;var qt=Jn(M,P+18),It=Jn(M,P+22),nt=gi(M.subarray(P+30,P+=30+Nt),!St);qt==4294967295?(Ve=ct?[-2]:Qo(M,P),qt=Ve[0],It=Ve[1]):ct&&(qt=-1),P+=it,fe.c=qt;var Vt,Tr={name:nt,compression:je,start:function(){if(Tr.ondata||Fe(5),!qt)Tr.ondata(null,Xe,!0);else{var or=me.o[je];or||Tr.ondata(Fe(14,"unknown compression type "+je,1),null,!1),Vt=qt<0?new or(nt):new or(nt,qt,It),Vt.ondata=function(vt,Rt,Dt){Tr.ondata(vt,Rt,Dt)};for(var Mt=0,_r=Ot;Mt<_r.length;Mt++){var lt=_r[Mt];Vt.push(lt,!1)}me.k[0]==Ot&&me.c?me.d=Vt:Vt.push(Xe,!0)}},terminate:function(){Vt&&Vt.terminate&&Vt.terminate()}};qt>=0&&(Tr.size=qt,Tr.originalSize=It),fe.onfile(Tr)}return"break"}else if(Z){if(Ze==134695760)return k=P+=12+(Z==-2&&8),ht=3,fe.c=0,"break";if(Ze==33639248)return k=P-=4,ht=3,fe.c=0,"break"}},fe=this;P<W-4;++P){var Ae=ye();if(Ae==="break")break}if(this.p=Xe,Z<0){var Le=ht?M.subarray(0,k-12-(Z==-2&&8)-(Jn(M,k-16)==134695760&&4)):M.subarray(0,P);re?re.push(Le,!!ht):this.k[+(ht==2)].push(Le)}if(ht&2)return this.push(M.subarray(P),ie);this.p=M.subarray(P)}ie&&(this.c&&Fe(13),this.p=null)},$.prototype.register=function(K){this.o[K.compression]=K},$})(),V=typeof queueMicrotask=="function"?queueMicrotask:typeof setTimeout=="function"?setTimeout:function($){$()};function se($,K,ie){ie||(ie=K,K={}),typeof ie!="function"&&Fe(7);var me=[],Se=function(){for(var Le=0;Le<me.length;++Le)me[Le]()},Qe={},ht=function(Le,Ve){V(function(){ie(Le,Ve)})};V(function(){ht=ie});for(var P=$.length-22;Jn($,P)!=101010256;--P)if(!P||$.length-P>65558)return ht(Fe(13,0,1),null),Se;var k=fn($,P+8);if(k){var M=k,W=Jn($,P+16),Z=W==4294967295||M==65535;if(Z){var re=Jn($,P-12);Z=Jn($,re)==101075792,Z&&(M=k=Jn($,re+32),W=Jn($,re+48))}for(var ye=K&&K.filter,fe=function(Le){var Ve=_a($,W,Z),Ze=Ve[0],dt=Ve[1],je=Ve[2],St=Ve[3],ct=Ve[4],Nt=Ve[5],it=fs($,Nt);W=ct;var Ot=function(It,nt){It?(Se(),ht(It,null)):(nt&&(Qe[St]=nt),--k||ht(null,Qe))};if(!ye||ye({name:St,size:dt,originalSize:je,compression:Ze}))if(!Ze)Ot(null,Pe($,it,it+dt));else if(Ze==8){var qt=$.subarray(it,it+dt);if(je<524288||dt>.8*je)try{Ot(null,Qs(qt,{out:new m(je)}))}catch(It){Ot(It,null)}else me.push(Fs(qt,{size:je},Ot))}else Ot(Fe(14,"unknown compression type "+Ze,1),null);else Ot(null,null)},Ae=0;Ae<M;++Ae)fe(Ae)}else ht(null,{});return Se}function ce($,K){for(var ie={},me=$.length-22;Jn($,me)!=101010256;--me)(!me||$.length-me>65558)&&Fe(13);var Se=fn($,me+8);if(!Se)return{};var Qe=Jn($,me+16),ht=Qe==4294967295||Se==65535;if(ht){var P=Jn($,me-12);ht=Jn($,P)==101075792,ht&&(Se=Jn($,P+32),Qe=Jn($,P+48))}for(var k=K&&K.filter,M=0;M<Se;++M){var W=_a($,Qe,ht),Z=W[0],re=W[1],ye=W[2],fe=W[3],Ae=W[4],Le=W[5],Ve=fs($,Le);Qe=Ae,(!k||k({name:fe,size:re,originalSize:ye,compression:Z}))&&(Z?Z==8?ie[fe]=Qs($.subarray(Ve,Ve+re),{out:new m(ye)}):Fe(14,"unknown compression type "+Z):ie[fe]=Pe($,Ve,Ve+re))}return ie}}),"./node_modules/iobuffer/lib-esm/IOBuffer.js":(function(c,u,l){l.r(u),l.d(u,{IOBuffer:function(){return g}});var d=l("./node_modules/iobuffer/lib-esm/text.js");const f=1024*8,m=(()=>{const y=new Uint8Array(4),x=new Uint32Array(y.buffer);return!((x[0]=1)&y[0])})(),p={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class g{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(x=f,w={}){let _=!1;typeof x=="number"?x=new ArrayBuffer(x):(_=!0,this.lastWrittenByte=x.byteLength);const E=w.offset?w.offset>>>0:0,N=x.byteLength-E;let C=E;(ArrayBuffer.isView(x)||x instanceof g)&&(x.byteLength!==x.buffer.byteLength&&(C=x.byteOffset+E),x=x.buffer),_?this.lastWrittenByte=N:this.lastWrittenByte=0,this.buffer=x,this.length=N,this.byteLength=N,this.byteOffset=C,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,C,N),this._mark=0,this._marks=[]}available(x=1){return this.offset+x<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(x=1){return this.offset+=x,this}back(x=1){return this.offset-=x,this}seek(x){return this.offset=x,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const x=this._marks.pop();if(x===void 0)throw new Error("Mark stack empty");return this.seek(x),this}rewind(){return this.offset=0,this}ensureAvailable(x=1){if(!this.available(x)){const _=(this.offset+x)*2,E=new Uint8Array(_);E.set(new Uint8Array(this.buffer)),this.buffer=E.buffer,this.length=_,this.byteLength=_,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(x=1){return this.readArray(x,"uint8")}readArray(x,w){const _=p[w].BYTES_PER_ELEMENT*x,E=this.byteOffset+this.offset,N=this.buffer.slice(E,E+_);if(this.littleEndian===m&&w!=="uint8"&&w!=="int8"){const I=new Uint8Array(this.buffer.slice(E,E+_));I.reverse();const D=new p[w](I.buffer);return this.offset+=_,D.reverse(),D}const C=new p[w](N);return this.offset+=_,C}readInt16(){const x=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,x}readUint16(){const x=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,x}readInt32(){const x=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,x}readUint32(){const x=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,x}readFloat32(){const x=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,x}readFloat64(){const x=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,x}readBigInt64(){const x=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,x}readBigUint64(){const x=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,x}readChar(){return String.fromCharCode(this.readInt8())}readChars(x=1){let w="";for(let _=0;_<x;_++)w+=this.readChar();return w}readUtf8(x=1){return(0,d.decode)(this.readBytes(x))}decodeText(x=1,w="utf8"){return(0,d.decode)(this.readBytes(x),w)}writeBoolean(x){return this.writeUint8(x?255:0),this}writeInt8(x){return this.ensureAvailable(1),this._data.setInt8(this.offset++,x),this._updateLastWrittenByte(),this}writeUint8(x){return this.ensureAvailable(1),this._data.setUint8(this.offset++,x),this._updateLastWrittenByte(),this}writeByte(x){return this.writeUint8(x)}writeBytes(x){this.ensureAvailable(x.length);for(let w=0;w<x.length;w++)this._data.setUint8(this.offset++,x[w]);return this._updateLastWrittenByte(),this}writeInt16(x){return this.ensureAvailable(2),this._data.setInt16(this.offset,x,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(x){return this.ensureAvailable(2),this._data.setUint16(this.offset,x,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(x){return this.ensureAvailable(4),this._data.setInt32(this.offset,x,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(x){return this.ensureAvailable(4),this._data.setUint32(this.offset,x,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(x){return this.ensureAvailable(4),this._data.setFloat32(this.offset,x,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(x){return this.ensureAvailable(8),this._data.setFloat64(this.offset,x,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(x){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,x,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(x){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,x,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(x){return this.writeUint8(x.charCodeAt(0))}writeChars(x){for(let w=0;w<x.length;w++)this.writeUint8(x.charCodeAt(w));return this}writeUtf8(x){return this.writeBytes((0,d.encode)(x))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}}),"./node_modules/iobuffer/lib-esm/text.js":(function(c,u,l){l.r(u),l.d(u,{decode:function(){return d},encode:function(){return m}});function d(p,g="utf8"){return new TextDecoder(g).decode(p)}const f=new TextEncoder;function m(p){return f.encode(p)}}),"./node_modules/jspdf/dist/jspdf.es.min.js":(function(c,u,l){l.r(u),l.d(u,{AcroForm:function(){return ta},AcroFormAppearance:function(){return un},AcroFormButton:function(){return mn},AcroFormCheckBox:function(){return Ms},AcroFormChoiceField:function(){return Jn},AcroFormComboBox:function(){return Hr},AcroFormEditBox:function(){return yn},AcroFormListBox:function(){return ln},AcroFormPasswordField:function(){return ei},AcroFormPushButton:function(){return Mn},AcroFormRadioButton:function(){return li},AcroFormTextField:function(){return Ns},GState:function(){return ft},ShadingPattern:function(){return De},TilingPattern:function(){return ut},default:function(){return et},jsPDF:function(){return et}});var d=l("./node_modules/@babel/runtime/helpers/esm/typeof.js"),f=l("./node_modules/fflate/esm/browser.js"),m=l("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),p=l("./node_modules/fast-png/lib-esm/index.js");var g=(function(){return typeof window<"u"?window:typeof W1<"u"?W1:typeof self<"u"?self:this})();function y(){g.console&&typeof g.console.log=="function"&&g.console.log.apply(g.console,arguments)}var x={log:y,warn:function(P){g.console&&(typeof g.console.warn=="function"?g.console.warn.apply(g.console,arguments):y.call(null,arguments))},error:function(P){g.console&&(typeof g.console.error=="function"?g.console.error.apply(g.console,arguments):y(P))}};function w(P,k,M){var W=new XMLHttpRequest;W.open("GET",P),W.responseType="blob",W.onload=function(){N(W.response,k,M)},W.onerror=function(){x.error("could not download file")},W.send()}function _(P){var k=new XMLHttpRequest;k.open("HEAD",P,!1);try{k.send()}catch{}return k.status>=200&&k.status<=299}function E(P){try{P.dispatchEvent(new MouseEvent("click"))}catch{var k=document.createEvent("MouseEvents");k.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),P.dispatchEvent(k)}}var N=g.saveAs||((typeof window>"u"?"undefined":(0,d.default)(window))!=="object"||window!==g?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(P,k,M){var W=g.URL||g.webkitURL,Z=document.createElement("a");k=k||P.name||"download",Z.download=k,Z.rel="noopener",typeof P=="string"?(Z.href=P,Z.origin!==location.origin?_(Z.href)?w(P,k,M):E(Z,Z.target="_blank"):E(Z)):(Z.href=W.createObjectURL(P),setTimeout(function(){W.revokeObjectURL(Z.href)},4e4),setTimeout(function(){E(Z)},0))}:"msSaveOrOpenBlob"in navigator?function(P,k,M){if(k=k||P.name||"download",typeof P=="string")if(_(P))w(P,k,M);else{var W=document.createElement("a");W.href=P,W.target="_blank",setTimeout(function(){E(W)})}else navigator.msSaveOrOpenBlob((function(Z,re){return re===void 0?re={autoBom:!1}:(0,d.default)(re)!=="object"&&(x.warn("Deprecated: Expected third argument to be a object"),re={autoBom:!re}),re.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(Z.type)?new Blob(["\uFEFF",Z],{type:Z.type}):Z})(P,M),k)}:function(P,k,M,W){if((W=W||open("","_blank"))&&(W.document.title=W.document.body.innerText="downloading..."),typeof P=="string")return w(P,k,M);var Z=P.type==="application/octet-stream",re=/constructor/i.test(g.HTMLElement)||g.safari,ye=/CriOS\/[\d]+/.test(navigator.userAgent);if((ye||Z&&re)&&(typeof FileReader>"u"?"undefined":(0,d.default)(FileReader))==="object"){var fe=new FileReader;fe.onloadend=function(){var Ve=fe.result;Ve=ye?Ve:Ve.replace(/^data:[^;]*;/,"data:attachment/file;"),W?W.location.href=Ve:location=Ve,W=null},fe.readAsDataURL(P)}else{var Ae=g.URL||g.webkitURL,Le=Ae.createObjectURL(P);W?W.location=Le:location.href=Le,W=null,setTimeout(function(){Ae.revokeObjectURL(Le)},4e4)}});function C(P){var k;P=P||"",this.ok=!1,P.charAt(0)=="#"&&(P=P.substr(1,6)),P={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[P=(P=P.replace(/ /g,"")).toLowerCase()]||P;for(var M=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(fe){return[parseInt(fe[1]),parseInt(fe[2]),parseInt(fe[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(fe){return[parseInt(fe[1],16),parseInt(fe[2],16),parseInt(fe[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(fe){return[parseInt(fe[1]+fe[1],16),parseInt(fe[2]+fe[2],16),parseInt(fe[3]+fe[3],16)]}}],W=0;W<M.length;W++){var Z=M[W].re,re=M[W].process,ye=Z.exec(P);ye&&(k=re(ye),this.r=k[0],this.g=k[1],this.b=k[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var fe=this.r.toString(16),Ae=this.g.toString(16),Le=this.b.toString(16);return fe.length==1&&(fe="0"+fe),Ae.length==1&&(Ae="0"+Ae),Le.length==1&&(Le="0"+Le),"#"+fe+Ae+Le}}var I=g.atob.bind(g),D=g.btoa.bind(g);function U(P,k){var M=P[0],W=P[1],Z=P[2],re=P[3];M=q(M,W,Z,re,k[0],7,-680876936),re=q(re,M,W,Z,k[1],12,-389564586),Z=q(Z,re,M,W,k[2],17,606105819),W=q(W,Z,re,M,k[3],22,-1044525330),M=q(M,W,Z,re,k[4],7,-176418897),re=q(re,M,W,Z,k[5],12,1200080426),Z=q(Z,re,M,W,k[6],17,-1473231341),W=q(W,Z,re,M,k[7],22,-45705983),M=q(M,W,Z,re,k[8],7,1770035416),re=q(re,M,W,Z,k[9],12,-1958414417),Z=q(Z,re,M,W,k[10],17,-42063),W=q(W,Z,re,M,k[11],22,-1990404162),M=q(M,W,Z,re,k[12],7,1804603682),re=q(re,M,W,Z,k[13],12,-40341101),Z=q(Z,re,M,W,k[14],17,-1502002290),M=J(M,W=q(W,Z,re,M,k[15],22,1236535329),Z,re,k[1],5,-165796510),re=J(re,M,W,Z,k[6],9,-1069501632),Z=J(Z,re,M,W,k[11],14,643717713),W=J(W,Z,re,M,k[0],20,-373897302),M=J(M,W,Z,re,k[5],5,-701558691),re=J(re,M,W,Z,k[10],9,38016083),Z=J(Z,re,M,W,k[15],14,-660478335),W=J(W,Z,re,M,k[4],20,-405537848),M=J(M,W,Z,re,k[9],5,568446438),re=J(re,M,W,Z,k[14],9,-1019803690),Z=J(Z,re,M,W,k[3],14,-187363961),W=J(W,Z,re,M,k[8],20,1163531501),M=J(M,W,Z,re,k[13],5,-1444681467),re=J(re,M,W,Z,k[2],9,-51403784),Z=J(Z,re,M,W,k[7],14,1735328473),M=de(M,W=J(W,Z,re,M,k[12],20,-1926607734),Z,re,k[5],4,-378558),re=de(re,M,W,Z,k[8],11,-2022574463),Z=de(Z,re,M,W,k[11],16,1839030562),W=de(W,Z,re,M,k[14],23,-35309556),M=de(M,W,Z,re,k[1],4,-1530992060),re=de(re,M,W,Z,k[4],11,1272893353),Z=de(Z,re,M,W,k[7],16,-155497632),W=de(W,Z,re,M,k[10],23,-1094730640),M=de(M,W,Z,re,k[13],4,681279174),re=de(re,M,W,Z,k[0],11,-358537222),Z=de(Z,re,M,W,k[3],16,-722521979),W=de(W,Z,re,M,k[6],23,76029189),M=de(M,W,Z,re,k[9],4,-640364487),re=de(re,M,W,Z,k[12],11,-421815835),Z=de(Z,re,M,W,k[15],16,530742520),M=xe(M,W=de(W,Z,re,M,k[2],23,-995338651),Z,re,k[0],6,-198630844),re=xe(re,M,W,Z,k[7],10,1126891415),Z=xe(Z,re,M,W,k[14],15,-1416354905),W=xe(W,Z,re,M,k[5],21,-57434055),M=xe(M,W,Z,re,k[12],6,1700485571),re=xe(re,M,W,Z,k[3],10,-1894986606),Z=xe(Z,re,M,W,k[10],15,-1051523),W=xe(W,Z,re,M,k[1],21,-2054922799),M=xe(M,W,Z,re,k[8],6,1873313359),re=xe(re,M,W,Z,k[15],10,-30611744),Z=xe(Z,re,M,W,k[6],15,-1560198380),W=xe(W,Z,re,M,k[13],21,1309151649),M=xe(M,W,Z,re,k[4],6,-145523070),re=xe(re,M,W,Z,k[11],10,-1120210379),Z=xe(Z,re,M,W,k[2],15,718787259),W=xe(W,Z,re,M,k[9],21,-343485551),P[0]=be(M,P[0]),P[1]=be(W,P[1]),P[2]=be(Z,P[2]),P[3]=be(re,P[3])}function G(P,k,M,W,Z,re){return k=be(be(k,P),be(W,re)),be(k<<Z|k>>>32-Z,M)}function q(P,k,M,W,Z,re,ye){return G(k&M|~k&W,P,k,Z,re,ye)}function J(P,k,M,W,Z,re,ye){return G(k&W|M&~W,P,k,Z,re,ye)}function de(P,k,M,W,Z,re,ye){return G(k^M^W,P,k,Z,re,ye)}function xe(P,k,M,W,Z,re,ye){return G(M^(k|~W),P,k,Z,re,ye)}function we(P){var k,M=P.length,W=[1732584193,-271733879,-1732584194,271733878];for(k=64;k<=P.length;k+=64)U(W,ve(P.substring(k-64,k)));P=P.substring(k-64);var Z=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(k=0;k<P.length;k++)Z[k>>2]|=P.charCodeAt(k)<<(k%4<<3);if(Z[k>>2]|=128<<(k%4<<3),k>55)for(U(W,Z),k=0;k<16;k++)Z[k]=0;return Z[14]=8*M,U(W,Z),W}function ve(P){var k,M=[];for(k=0;k<64;k+=4)M[k>>2]=P.charCodeAt(k)+(P.charCodeAt(k+1)<<8)+(P.charCodeAt(k+2)<<16)+(P.charCodeAt(k+3)<<24);return M}var ne="0123456789abcdef".split("");function ae(P){for(var k="",M=0;M<4;M++)k+=ne[P>>8*M+4&15]+ne[P>>8*M&15];return k}function oe(P){return String.fromCharCode(255&P,(65280&P)>>8,(16711680&P)>>16,(4278190080&P)>>24)}function Ie(P){return we(P).map(oe).join("")}var Ce=(function(P){for(var k=0;k<P.length;k++)P[k]=ae(P[k]);return P.join("")})(we("hello"))!="5d41402abc4b2a76b9719d911017c592";function be(P,k){if(Ce){var M=(65535&P)+(65535&k);return(P>>16)+(k>>16)+(M>>16)<<16|65535&M}return P+k&4294967295}function ue(P,k){var M,W,Z,re;if(P!==M){for(var ye=(Z=P,re=1+(256/P.length|0),new Array(re+1).join(Z)),fe=[],Ae=0;Ae<256;Ae++)fe[Ae]=Ae;var Le=0;for(Ae=0;Ae<256;Ae++){var Ve=fe[Ae];Le=(Le+Ve+ye.charCodeAt(Ae))%256,fe[Ae]=fe[Le],fe[Le]=Ve}M=P,W=fe}else fe=W;var Ze=k.length,dt=0,je=0,St="";for(Ae=0;Ae<Ze;Ae++)je=(je+(Ve=fe[dt=(dt+1)%256]))%256,fe[dt]=fe[je],fe[je]=Ve,ye=fe[(fe[dt]+fe[je])%256],St+=String.fromCharCode(k.charCodeAt(Ae)^ye);return St}var Pe={print:4,modify:8,copy:16,"annot-forms":32};function Re(P,k,M,W){this.v=1,this.r=2;var Z=192;P.forEach(function(fe){if(Pe.perm!==void 0)throw new Error("Invalid permission: "+fe);Z+=Pe[fe]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var re=(k+this.padding).substr(0,32),ye=(M+this.padding).substr(0,32);this.O=this.processOwnerPassword(re,ye),this.P=-(1+(255^Z)),this.encryptionKey=Ie(re+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(W)).substr(0,5),this.U=ue(this.encryptionKey,this.padding)}function He(P){if(/[^\u0000-\u00ff]/.test(P))throw new Error("Invalid PDF Name Object: "+P+", Only accept ASCII characters.");for(var k="",M=P.length,W=0;W<M;W++){var Z=P.charCodeAt(W);k+=Z<33||Z===35||Z===37||Z===40||Z===41||Z===47||Z===60||Z===62||Z===91||Z===93||Z===123||Z===125||Z>126?"#"+("0"+Z.toString(16)).slice(-2):P[W]}return k}function Fe(P){if((0,d.default)(P)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var k={};this.subscribe=function(M,W,Z){if(Z=Z||!1,typeof M!="string"||typeof W!="function"||typeof Z!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");k.hasOwnProperty(M)||(k[M]={});var re=Math.random().toString(35);return k[M][re]=[W,!!Z],re},this.unsubscribe=function(M){for(var W in k)if(k[W][M])return delete k[W][M],Object.keys(k[W]).length===0&&delete k[W],!0;return!1},this.publish=function(M){if(k.hasOwnProperty(M)){var W=Array.prototype.slice.call(arguments,1),Z=[];for(var re in k[M]){var ye=k[M][re];try{ye[0].apply(P,W)}catch(fe){g.console&&x.error("jsPDF PubSub Error",fe.message,fe)}ye[1]&&Z.push(re)}Z.length&&Z.forEach(this.unsubscribe)}},this.getTopics=function(){return k}}function ft(P){if(!(this instanceof ft))return new ft(P);var k="opacity,stroke-opacity".split(",");for(var M in P)P.hasOwnProperty(M)&&k.indexOf(M)>=0&&(this[M]=P[M]);this.id="",this.objectNumber=-1}function at(P,k){this.gState=P,this.matrix=k,this.id="",this.objectNumber=-1}function De(P,k,M,W,Z){if(!(this instanceof De))return new De(P,k,M,W,Z);this.type=P==="axial"?2:3,this.coords=k,this.colors=M,at.call(this,W,Z)}function ut(P,k,M,W,Z){if(!(this instanceof ut))return new ut(P,k,M,W,Z);this.boundingBox=P,this.xStep=k,this.yStep=M,this.stream="",this.cloneIndex=0,at.call(this,W,Z)}function et(P){var k,M=typeof arguments[0]=="string"?arguments[0]:"p",W=arguments[1],Z=arguments[2],re=arguments[3],ye=[],fe=1,Ae=16,Le="S",Ve=null;(0,d.default)(P=P||{})==="object"&&(M=P.orientation,W=P.unit||W,Z=P.format||Z,re=P.compress||P.compressPdf||re,(Ve=P.encryption||null)!==null&&(Ve.userPassword=Ve.userPassword||"",Ve.ownerPassword=Ve.ownerPassword||"",Ve.userPermissions=Ve.userPermissions||[]),fe=typeof P.userUnit=="number"?Math.abs(P.userUnit):1,P.precision!==void 0&&(k=P.precision),P.floatPrecision!==void 0&&(Ae=P.floatPrecision),Le=P.defaultPathOperation||"S"),ye=P.filters||(re===!0?["FlateEncode"]:ye),W=W||"mm",M=(""+(M||"P")).toLowerCase();var Ze=P.putOnlyUsedFonts||!1,dt={},je={internal:{},__private__:{}};je.__private__.PubSub=Fe;var St="1.3",ct=je.__private__.getPdfVersion=function(){return St};je.__private__.setPdfVersion=function(he){St=he};var Nt={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};je.__private__.getPageFormats=function(){return Nt};var it=je.__private__.getPageFormat=function(he){return Nt[he]};Z=Z||"a4";var Ot="compat",qt="advanced",It=Ot;function nt(){this.saveGraphicsState(),yt(new wi(Li,0,0,-Li,0,dh()*Li).toString()+" cm"),this.setFontSize(this.getFontSize()/Li),Le="n",It=qt}function Vt(){this.restoreGraphicsState(),Le="S",It=Ot}var Tr=je.__private__.combineFontStyleAndFontWeight=function(he,Me){if(he=="bold"&&Me=="normal"||he=="bold"&&Me==400||he=="normal"&&Me=="italic"||he=="bold"&&Me=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Me&&(he=Me==400||Me==="normal"?he==="italic"?"italic":"normal":Me!=700&&Me!=="bold"||he!=="normal"?(Me==700?"bold":Me)+""+he:"bold"),he};je.advancedAPI=function(he){var Me=It===Ot;return Me&&nt.call(this),typeof he!="function"||(he(this),Me&&Vt.call(this)),this},je.compatAPI=function(he){var Me=It===qt;return Me&&Vt.call(this),typeof he!="function"||(he(this),Me&&nt.call(this)),this},je.isAdvancedAPI=function(){return It===qt};var or,Mt=function(he){if(It!==qt)throw new Error(he+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},_r=je.roundToPrecision=je.__private__.roundToPrecision=function(he,Me){var wt=k||Me;if(isNaN(he)||isNaN(wt))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return he.toFixed(wt).replace(/0+$/,"")};or=je.hpf=je.__private__.hpf=typeof Ae=="number"?function(he){if(isNaN(he))throw new Error("Invalid argument passed to jsPDF.hpf");return _r(he,Ae)}:Ae==="smart"?function(he){if(isNaN(he))throw new Error("Invalid argument passed to jsPDF.hpf");return _r(he,he>-1&&he<1?16:5)}:function(he){if(isNaN(he))throw new Error("Invalid argument passed to jsPDF.hpf");return _r(he,16)};var lt=je.f2=je.__private__.f2=function(he){if(isNaN(he))throw new Error("Invalid argument passed to jsPDF.f2");return _r(he,2)},vt=je.__private__.f3=function(he){if(isNaN(he))throw new Error("Invalid argument passed to jsPDF.f3");return _r(he,3)},Rt=je.scale=je.__private__.scale=function(he){if(isNaN(he))throw new Error("Invalid argument passed to jsPDF.scale");return It===Ot?he*Li:It===qt?he:void 0},Dt=function(he){return Rt((function(Me){return It===Ot?dh()-Me:It===qt?Me:void 0})(he))};je.__private__.setPrecision=je.setPrecision=function(he){typeof parseInt(he,10)=="number"&&(k=parseInt(he,10))};var vr,kr="00000000000000000000000000000000",Rr=je.__private__.getFileId=function(){return kr},ur=je.__private__.setFileId=function(he){return kr=he!==void 0&&/^[a-fA-F0-9]{32}$/.test(he)?he.toUpperCase():kr.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),Ve!==null&&(Bo=new Re(Ve.userPermissions,Ve.userPassword,Ve.ownerPassword,kr)),kr};je.setFileId=function(he){return ur(he),this},je.getFileId=function(){return Rr()};var Or=je.__private__.convertDateToPDFDate=function(he){var Me=he.getTimezoneOffset(),wt=Me<0?"+":"-",Bt=Math.floor(Math.abs(Me/60)),rr=Math.abs(Me%60),zr=[wt,Lt(Bt),"'",Lt(rr),"'"].join("");return["D:",he.getFullYear(),Lt(he.getMonth()+1),Lt(he.getDate()),Lt(he.getHours()),Lt(he.getMinutes()),Lt(he.getSeconds()),zr].join("")},pn=je.__private__.convertPDFDateToDate=function(he){var Me=parseInt(he.substr(2,4),10),wt=parseInt(he.substr(6,2),10)-1,Bt=parseInt(he.substr(8,2),10),rr=parseInt(he.substr(10,2),10),zr=parseInt(he.substr(12,2),10),nn=parseInt(he.substr(14,2),10);return new Date(Me,wt,Bt,rr,zr,nn,0)},on=je.__private__.setCreationDate=function(he){var Me;if(he===void 0&&(he=new Date),he instanceof Date)Me=Or(he);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(he))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Me=he}return vr=Me},Ye=je.__private__.getCreationDate=function(he){var Me=vr;return he==="jsDate"&&(Me=pn(vr)),Me};je.setCreationDate=function(he){return on(he),this},je.getCreationDate=function(he){return Ye(he)};var Tt,Lt=je.__private__.padd2=function(he){return("0"+parseInt(he)).slice(-2)},Wt=je.__private__.padd2Hex=function(he){return("00"+(he=he.toString())).substr(he.length)},Xt=0,fr=[],Lr=[],Nr=0,Zr=[],An=[],Sn=!1,Fn=Lr;je.__private__.setCustomOutputDestination=function(he){Sn=!0,Fn=he};var xi=function(he){Sn||(Fn=he)};je.__private__.resetCustomOutputDestination=function(){Sn=!1,Fn=Lr};var yt=je.__private__.out=function(he){return he=he.toString(),Nr+=he.length+1,Fn.push(he),Fn},Tn=je.__private__.write=function(he){return yt(arguments.length===1?he.toString():Array.prototype.join.call(arguments," "))},Ri=je.__private__.getArrayBuffer=function(he){for(var Me=he.length,wt=new ArrayBuffer(Me),Bt=new Uint8Array(wt);Me--;)Bt[Me]=he.charCodeAt(Me);return wt},Cn=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];je.__private__.getStandardFonts=function(){return Cn};var cn=P.fontSize||16;je.__private__.setFontSize=je.setFontSize=function(he){return cn=It===qt?he/Li:he,this};var Ni,$n=je.__private__.getFontSize=je.getFontSize=function(){return It===Ot?cn:cn*Li},zn=P.R2L||!1;je.__private__.setR2L=je.setR2L=function(he){return zn=he,this},je.__private__.getR2L=je.getR2L=function(){return zn};var Qn,va=je.__private__.setZoomMode=function(he){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(he))Ni=he;else if(isNaN(he)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(he)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+he+'" is not recognized.');Ni=he}else Ni=parseInt(he,10)};je.__private__.getZoomMode=function(){return Ni};var Di,Wn=je.__private__.setPageMode=function(he){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(he)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+he+'" is not recognized.');Qn=he};je.__private__.getPageMode=function(){return Qn};var is=je.__private__.setLayoutMode=function(he){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(he)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+he+'" is not recognized.');Di=he};je.__private__.getLayoutMode=function(){return Di},je.__private__.setDisplayMode=je.setDisplayMode=function(he,Me,wt){return va(he),is(Me),Wn(wt),this};var Si={title:"",subject:"",author:"",keywords:"",creator:""};je.__private__.getDocumentProperty=function(he){if(Object.keys(Si).indexOf(he)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Si[he]},je.__private__.getDocumentProperties=function(){return Si},je.__private__.setDocumentProperties=je.setProperties=je.setDocumentProperties=function(he){for(var Me in Si)Si.hasOwnProperty(Me)&&he[Me]&&(Si[Me]=he[Me]);return this},je.__private__.setDocumentProperty=function(he,Me){if(Object.keys(Si).indexOf(he)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Si[he]=Me};var Hn,Li,Yn,Gi,ss,Zi={},ys={},Na=[],bi={},Ys={},Qi={},ai={},ha=null,Ii=0,_n=[],cs=new Fe(je),_u=P.hotfixes||[],so={},Ko={},ec=[],wi=function he(Me,wt,Bt,rr,zr,nn){if(!(this instanceof he))return new he(Me,wt,Bt,rr,zr,nn);isNaN(Me)&&(Me=1),isNaN(wt)&&(wt=0),isNaN(Bt)&&(Bt=0),isNaN(rr)&&(rr=1),isNaN(zr)&&(zr=0),isNaN(nn)&&(nn=0),this._matrix=[Me,wt,Bt,rr,zr,nn]};Object.defineProperty(wi.prototype,"sx",{get:function(){return this._matrix[0]},set:function(he){this._matrix[0]=he}}),Object.defineProperty(wi.prototype,"shy",{get:function(){return this._matrix[1]},set:function(he){this._matrix[1]=he}}),Object.defineProperty(wi.prototype,"shx",{get:function(){return this._matrix[2]},set:function(he){this._matrix[2]=he}}),Object.defineProperty(wi.prototype,"sy",{get:function(){return this._matrix[3]},set:function(he){this._matrix[3]=he}}),Object.defineProperty(wi.prototype,"tx",{get:function(){return this._matrix[4]},set:function(he){this._matrix[4]=he}}),Object.defineProperty(wi.prototype,"ty",{get:function(){return this._matrix[5]},set:function(he){this._matrix[5]=he}}),Object.defineProperty(wi.prototype,"a",{get:function(){return this._matrix[0]},set:function(he){this._matrix[0]=he}}),Object.defineProperty(wi.prototype,"b",{get:function(){return this._matrix[1]},set:function(he){this._matrix[1]=he}}),Object.defineProperty(wi.prototype,"c",{get:function(){return this._matrix[2]},set:function(he){this._matrix[2]=he}}),Object.defineProperty(wi.prototype,"d",{get:function(){return this._matrix[3]},set:function(he){this._matrix[3]=he}}),Object.defineProperty(wi.prototype,"e",{get:function(){return this._matrix[4]},set:function(he){this._matrix[4]=he}}),Object.defineProperty(wi.prototype,"f",{get:function(){return this._matrix[5]},set:function(he){this._matrix[5]=he}}),Object.defineProperty(wi.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(wi.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(wi.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(wi.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),wi.prototype.join=function(he){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(or).join(he)},wi.prototype.multiply=function(he){var Me=he.sx*this.sx+he.shy*this.shx,wt=he.sx*this.shy+he.shy*this.sy,Bt=he.shx*this.sx+he.sy*this.shx,rr=he.shx*this.shy+he.sy*this.sy,zr=he.tx*this.sx+he.ty*this.shx+this.tx,nn=he.tx*this.shy+he.ty*this.sy+this.ty;return new wi(Me,wt,Bt,rr,zr,nn)},wi.prototype.decompose=function(){var he=this.sx,Me=this.shy,wt=this.shx,Bt=this.sy,rr=this.tx,zr=this.ty,nn=Math.sqrt(he*he+Me*Me),ti=(he/=nn)*wt+(Me/=nn)*Bt;wt-=he*ti,Bt-=Me*ti;var ri=Math.sqrt(wt*wt+Bt*Bt);return ti/=ri,he*(Bt/=ri)<Me*(wt/=ri)&&(he=-he,Me=-Me,ti=-ti,nn=-nn),{scale:new wi(nn,0,0,ri,0,0),translate:new wi(1,0,0,1,rr,zr),rotate:new wi(he,Me,-Me,he,0,0),skew:new wi(1,0,ti,1,0,0)}},wi.prototype.toString=function(he){return this.join(" ")},wi.prototype.inversed=function(){var he=this.sx,Me=this.shy,wt=this.shx,Bt=this.sy,rr=this.tx,zr=this.ty,nn=1/(he*Bt-Me*wt),ti=Bt*nn,ri=-Me*nn,Yi=-wt*nn,os=he*nn;return new wi(ti,ri,Yi,os,-ti*rr-Yi*zr,-ri*rr-os*zr)},wi.prototype.applyToPoint=function(he){var Me=he.x*this.sx+he.y*this.shx+this.tx,wt=he.x*this.shy+he.y*this.sy+this.ty;return new au(Me,wt)},wi.prototype.applyToRectangle=function(he){var Me=this.applyToPoint(he),wt=this.applyToPoint(new au(he.x+he.w,he.y+he.h));return new jd(Me.x,Me.y,wt.x-Me.x,wt.y-Me.y)},wi.prototype.clone=function(){var he=this.sx,Me=this.shy,wt=this.shx,Bt=this.sy,rr=this.tx,zr=this.ty;return new wi(he,Me,wt,Bt,rr,zr)},je.Matrix=wi;var Da=je.matrixMult=function(he,Me){return Me.multiply(he)},Za=new wi(1,0,0,1,0,0);je.unitMatrix=je.identityMatrix=Za;var $l=function(he,Me){if(!Ys[he]){var wt=(Me instanceof De?"Sh":"P")+(Object.keys(bi).length+1).toString(10);Me.id=wt,Ys[he]=wt,bi[wt]=Me,cs.publish("addPattern",Me)}};je.ShadingPattern=De,je.TilingPattern=ut,je.addShadingPattern=function(he,Me){return Mt("addShadingPattern()"),$l(he,Me),this},je.beginTilingPattern=function(he){Mt("beginTilingPattern()"),Kc(he.boundingBox[0],he.boundingBox[1],he.boundingBox[2]-he.boundingBox[0],he.boundingBox[3]-he.boundingBox[1],he.matrix)},je.endTilingPattern=function(he,Me){Mt("endTilingPattern()"),Me.stream=An[Tt].join(`
`),$l(he,Me),cs.publish("endTilingPattern",Me),ec.pop().restore()};var Hl,fa=je.__private__.newObject=function(){var he=yo();return Ja(he,!0),he},yo=je.__private__.newObjectDeferred=function(){return Xt++,fr[Xt]=function(){return Nr},Xt},Ja=function(he,Me){return Me=typeof Me=="boolean"&&Me,fr[he]=Nr,Me&&yt(he+" 0 obj"),he},Hc=je.__private__.newAdditionalObject=function(){var he={objId:yo(),content:""};return Zr.push(he),he},To=yo(),Ac=yo(),Ga=je.__private__.decodeColorString=function(he){var Me=he.split(" ");if(Me.length!==2||Me[1]!=="g"&&Me[1]!=="G")Me.length!==5||Me[4]!=="k"&&Me[4]!=="K"||(Me=[(1-Me[0])*(1-Me[3]),(1-Me[1])*(1-Me[3]),(1-Me[2])*(1-Me[3]),"r"]);else{var wt=parseFloat(Me[0]);Me=[wt,wt,wt,"r"]}for(var Bt="#",rr=0;rr<3;rr++)Bt+=("0"+Math.floor(255*parseFloat(Me[rr])).toString(16)).slice(-2);return Bt},Ql=je.__private__.encodeColorString=function(he){var Me;typeof he=="string"&&(he={ch1:he});var wt=he.ch1,Bt=he.ch2,rr=he.ch3,zr=he.ch4,nn=he.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof wt=="string"&&wt.charAt(0)!=="#"){var ti=new C(wt);if(ti.ok)wt=ti.toHex();else if(!/^\d*\.?\d*$/.test(wt))throw new Error('Invalid color "'+wt+'" passed to jsPDF.encodeColorString.')}if(typeof wt=="string"&&/^#[0-9A-Fa-f]{3}$/.test(wt)&&(wt="#"+wt[1]+wt[1]+wt[2]+wt[2]+wt[3]+wt[3]),typeof wt=="string"&&/^#[0-9A-Fa-f]{6}$/.test(wt)){var ri=parseInt(wt.substr(1),16);wt=ri>>16&255,Bt=ri>>8&255,rr=255&ri}if(Bt===void 0||zr===void 0&&wt===Bt&&Bt===rr)Me=typeof wt=="string"?wt+" "+nn[0]:he.precision===2?lt(wt/255)+" "+nn[0]:vt(wt/255)+" "+nn[0];else if(zr===void 0||(0,d.default)(zr)==="object"){if(zr&&!isNaN(zr.a)&&zr.a===0)return["1.","1.","1.",nn[1]].join(" ");Me=typeof wt=="string"?[wt,Bt,rr,nn[1]].join(" "):he.precision===2?[lt(wt/255),lt(Bt/255),lt(rr/255),nn[1]].join(" "):[vt(wt/255),vt(Bt/255),vt(rr/255),nn[1]].join(" ")}else Me=typeof wt=="string"?[wt,Bt,rr,zr,nn[2]].join(" "):he.precision===2?[lt(wt),lt(Bt),lt(rr),lt(zr),nn[2]].join(" "):[vt(wt),vt(Bt),vt(rr),vt(zr),nn[2]].join(" ");return Me},zl=je.__private__.getFilters=function(){return ye},Il=je.__private__.putStream=function(he){var Me=(he=he||{}).data||"",wt=he.filters||zl(),Bt=he.alreadyAppliedFilters||[],rr=he.addLength1||!1,zr=Me.length,nn=he.objectId,ti=function(Wo){return Wo};if(Ve!==null&&nn===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");Ve!==null&&(ti=Bo.encryptor(nn,0));var ri={};wt===!0&&(wt=["FlateEncode"]);var Yi=he.additionalKeyValues||[],os=(ri=et.API.processDataByFilters!==void 0?et.API.processDataByFilters(Me,wt):{data:Me,reverseChain:[]}).reverseChain+(Array.isArray(Bt)?Bt.join(" "):Bt.toString());if(ri.data.length!==0&&(Yi.push({key:"Length",value:ri.data.length}),rr===!0&&Yi.push({key:"Length1",value:zr})),os.length!=0)if(os.split("/").length-1==1)Yi.push({key:"Filter",value:os});else{Yi.push({key:"Filter",value:"["+os+"]"});for(var na=0;na<Yi.length;na+=1)if(Yi[na].key==="DecodeParms"){for(var Fa=[],Oo=0;Oo<ri.reverseChain.split("/").length-1;Oo+=1)Fa.push("null");Fa.push(Yi[na].value),Yi[na].value="["+Fa.join(" ")+"]"}}yt("<<");for(var ka=0;ka<Yi.length;ka++)yt("/"+Yi[ka].key+" "+Yi[ka].value);yt(">>"),ri.data.length!==0&&(yt("stream"),yt(ti(ri.data)),yt("endstream"))},bd=je.__private__.putPage=function(he){var Me=he.number,wt=he.data,Bt=he.objId,rr=he.contentsObjId;Ja(Bt,!0),yt("<</Type /Page"),yt("/Parent "+he.rootDictionaryObjId+" 0 R"),yt("/Resources "+he.resourceDictionaryObjId+" 0 R"),yt("/MediaBox ["+parseFloat(or(he.mediaBox.bottomLeftX))+" "+parseFloat(or(he.mediaBox.bottomLeftY))+" "+or(he.mediaBox.topRightX)+" "+or(he.mediaBox.topRightY)+"]"),he.cropBox!==null&&yt("/CropBox ["+or(he.cropBox.bottomLeftX)+" "+or(he.cropBox.bottomLeftY)+" "+or(he.cropBox.topRightX)+" "+or(he.cropBox.topRightY)+"]"),he.bleedBox!==null&&yt("/BleedBox ["+or(he.bleedBox.bottomLeftX)+" "+or(he.bleedBox.bottomLeftY)+" "+or(he.bleedBox.topRightX)+" "+or(he.bleedBox.topRightY)+"]"),he.trimBox!==null&&yt("/TrimBox ["+or(he.trimBox.bottomLeftX)+" "+or(he.trimBox.bottomLeftY)+" "+or(he.trimBox.topRightX)+" "+or(he.trimBox.topRightY)+"]"),he.artBox!==null&&yt("/ArtBox ["+or(he.artBox.bottomLeftX)+" "+or(he.artBox.bottomLeftY)+" "+or(he.artBox.topRightX)+" "+or(he.artBox.topRightY)+"]"),typeof he.userUnit=="number"&&he.userUnit!==1&&yt("/UserUnit "+he.userUnit),cs.publish("putPage",{objId:Bt,pageContext:_n[Me],pageNumber:Me,page:wt}),yt("/Contents "+rr+" 0 R"),yt(">>"),yt("endobj");var zr=wt.join(`
`);return It===qt&&(zr+=`
Q`),Ja(rr,!0),Il({data:zr,filters:zl(),objectId:rr}),yt("endobj"),Bt},tc=je.__private__.putPages=function(){var he,Me,wt=[];for(he=1;he<=Ii;he++)_n[he].objId=yo(),_n[he].contentsObjId=yo();for(he=1;he<=Ii;he++)wt.push(bd({number:he,data:An[he],objId:_n[he].objId,contentsObjId:_n[he].contentsObjId,mediaBox:_n[he].mediaBox,cropBox:_n[he].cropBox,bleedBox:_n[he].bleedBox,trimBox:_n[he].trimBox,artBox:_n[he].artBox,userUnit:_n[he].userUnit,rootDictionaryObjId:To,resourceDictionaryObjId:Ac}));Ja(To,!0),yt("<</Type /Pages");var Bt="/Kids [";for(Me=0;Me<Ii;Me++)Bt+=wt[Me]+" 0 R ";yt(Bt+"]"),yt("/Count "+Ii),yt(">>"),yt("endobj"),cs.publish("postPutPages")},Vl=function(he){cs.publish("putFont",{font:he,out:yt,newObject:fa,putStream:Il}),he.isAlreadyPutted!==!0&&(he.objectNumber=fa(),yt("<<"),yt("/Type /Font"),yt("/BaseFont /"+He(he.postScriptName)),yt("/Subtype /Type1"),typeof he.encoding=="string"&&yt("/Encoding /"+he.encoding),yt("/FirstChar 32"),yt("/LastChar 255"),yt(">>"),yt("endobj"))},pc=function(he){he.objectNumber=fa();var Me=[];Me.push({key:"Type",value:"/XObject"}),Me.push({key:"Subtype",value:"/Form"}),Me.push({key:"BBox",value:"["+[or(he.x),or(he.y),or(he.x+he.width),or(he.y+he.height)].join(" ")+"]"}),Me.push({key:"Matrix",value:"["+he.matrix.toString()+"]"});var wt=he.pages[1].join(`
`);Il({data:wt,additionalKeyValues:Me,objectId:he.objectNumber}),yt("endobj")},wd=function(he,Me){Me||(Me=21);var wt=fa(),Bt=(function(nn,ti){var ri,Yi=[],os=1/(ti-1);for(ri=0;ri<1;ri+=os)Yi.push(ri);if(Yi.push(1),nn[0].offset!=0){var na={offset:0,color:nn[0].color};nn.unshift(na)}if(nn[nn.length-1].offset!=1){var Fa={offset:1,color:nn[nn.length-1].color};nn.push(Fa)}for(var Oo="",ka=0,Wo=0;Wo<Yi.length;Wo++){for(ri=Yi[Wo];ri>nn[ka+1].offset;)ka++;var O=nn[ka].offset,Oe=(ri-O)/(nn[ka+1].offset-O),te=nn[ka].color,qe=nn[ka+1].color;Oo+=Wt(Math.round((1-Oe)*te[0]+Oe*qe[0]).toString(16))+Wt(Math.round((1-Oe)*te[1]+Oe*qe[1]).toString(16))+Wt(Math.round((1-Oe)*te[2]+Oe*qe[2]).toString(16))}return Oo.trim()})(he.colors,Me),rr=[];rr.push({key:"FunctionType",value:"0"}),rr.push({key:"Domain",value:"[0.0 1.0]"}),rr.push({key:"Size",value:"["+Me+"]"}),rr.push({key:"BitsPerSample",value:"8"}),rr.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),rr.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Il({data:Bt,additionalKeyValues:rr,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:wt}),yt("endobj"),he.objectNumber=fa(),yt("<< /ShadingType "+he.type),yt("/ColorSpace /DeviceRGB");var zr="/Coords ["+or(parseFloat(he.coords[0]))+" "+or(parseFloat(he.coords[1]))+" ";he.type===2?zr+=or(parseFloat(he.coords[2]))+" "+or(parseFloat(he.coords[3])):zr+=or(parseFloat(he.coords[2]))+" "+or(parseFloat(he.coords[3]))+" "+or(parseFloat(he.coords[4]))+" "+or(parseFloat(he.coords[5])),yt(zr+="]"),he.matrix&&yt("/Matrix ["+he.matrix.toString()+"]"),yt("/Function "+wt+" 0 R"),yt("/Extend [true true]"),yt(">>"),yt("endobj")},Kl=function(he,Me){var wt=yo(),Bt=fa();Me.push({resourcesOid:wt,objectOid:Bt}),he.objectNumber=Bt;var rr=[];rr.push({key:"Type",value:"/Pattern"}),rr.push({key:"PatternType",value:"1"}),rr.push({key:"PaintType",value:"1"}),rr.push({key:"TilingType",value:"1"}),rr.push({key:"BBox",value:"["+he.boundingBox.map(or).join(" ")+"]"}),rr.push({key:"XStep",value:or(he.xStep)}),rr.push({key:"YStep",value:or(he.yStep)}),rr.push({key:"Resources",value:wt+" 0 R"}),he.matrix&&rr.push({key:"Matrix",value:"["+he.matrix.toString()+"]"}),Il({data:he.stream,additionalKeyValues:rr,objectId:he.objectNumber}),yt("endobj")},Gl=function(he){for(var Me in he.objectNumber=fa(),yt("<<"),he)switch(Me){case"opacity":yt("/ca "+lt(he[Me]));break;case"stroke-opacity":yt("/CA "+lt(he[Me]))}yt(">>"),yt("endobj")},Eu=function(he){Ja(he.resourcesOid,!0),yt("<<"),yt("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var Me in yt("/Font <<"),Zi)Zi.hasOwnProperty(Me)&&(Ze===!1||Ze===!0&&dt.hasOwnProperty(Me))&&yt("/"+Me+" "+Zi[Me].objectNumber+" 0 R");yt(">>")})(),(function(){if(Object.keys(bi).length>0){for(var Me in yt("/Shading <<"),bi)bi.hasOwnProperty(Me)&&bi[Me]instanceof De&&bi[Me].objectNumber>=0&&yt("/"+Me+" "+bi[Me].objectNumber+" 0 R");cs.publish("putShadingPatternDict"),yt(">>")}})(),(function(Me){if(Object.keys(bi).length>0){for(var wt in yt("/Pattern <<"),bi)bi.hasOwnProperty(wt)&&bi[wt]instanceof je.TilingPattern&&bi[wt].objectNumber>=0&&bi[wt].objectNumber<Me&&yt("/"+wt+" "+bi[wt].objectNumber+" 0 R");cs.publish("putTilingPatternDict"),yt(">>")}})(he.objectOid),(function(){if(Object.keys(Qi).length>0){var Me;for(Me in yt("/ExtGState <<"),Qi)Qi.hasOwnProperty(Me)&&Qi[Me].objectNumber>=0&&yt("/"+Me+" "+Qi[Me].objectNumber+" 0 R");cs.publish("putGStateDict"),yt(">>")}})(),(function(){for(var Me in yt("/XObject <<"),so)so.hasOwnProperty(Me)&&so[Me].objectNumber>=0&&yt("/"+Me+" "+so[Me].objectNumber+" 0 R");cs.publish("putXobjectDict"),yt(">>")})(),yt(">>"),yt("endobj")},Wl=function(he){ys[he.fontName]=ys[he.fontName]||{},ys[he.fontName][he.fontStyle]=he.id},Io=function(he,Me,wt,Bt,rr){var zr={id:"F"+(Object.keys(Zi).length+1).toString(10),postScriptName:he,fontName:Me,fontStyle:wt,encoding:Bt,isStandardFont:rr||!1,metadata:{}};return cs.publish("addFont",{font:zr,instance:this}),Zi[zr.id]=zr,Wl(zr),zr.id},vl=je.__private__.pdfEscape=je.pdfEscape=function(he,Me){return(function(wt,Bt){var rr,zr,nn,ti,ri,Yi,os,na,Fa;if(nn=(Bt=Bt||{}).sourceEncoding||"Unicode",ri=Bt.outputEncoding,(Bt.autoencode||ri)&&Zi[Hn].metadata&&Zi[Hn].metadata[nn]&&Zi[Hn].metadata[nn].encoding&&(ti=Zi[Hn].metadata[nn].encoding,!ri&&Zi[Hn].encoding&&(ri=Zi[Hn].encoding),!ri&&ti.codePages&&(ri=ti.codePages[0]),typeof ri=="string"&&(ri=ti[ri]),ri)){for(os=!1,Yi=[],rr=0,zr=wt.length;rr<zr;rr++)(na=ri[wt.charCodeAt(rr)])?Yi.push(String.fromCharCode(na)):Yi.push(wt[rr]),Yi[rr].charCodeAt(0)>>8&&(os=!0);wt=Yi.join("")}for(rr=wt.length;os===void 0&&rr!==0;)wt.charCodeAt(rr-1)>>8&&(os=!0),rr--;if(!os)return wt;for(Yi=Bt.noBOM?[]:[254,255],rr=0,zr=wt.length;rr<zr;rr++){if((Fa=(na=wt.charCodeAt(rr))>>8)>>8)throw new Error("Character at position "+rr+" of string '"+wt+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Yi.push(Fa),Yi.push(na-(Fa<<8))}return String.fromCharCode.apply(void 0,Yi)})(he,Me).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},iu=je.__private__.beginPage=function(he){An[++Ii]=[],_n[Ii]={objId:0,contentsObjId:0,userUnit:Number(fe),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(he[0]),topRightY:Number(he[1])}},rc(Ii),xi(An[Tt])},gc=function(he,Me){var wt,Bt,rr;switch(M=Me||M,typeof he=="string"&&(wt=it(he.toLowerCase()),Array.isArray(wt)&&(Bt=wt[0],rr=wt[1])),Array.isArray(he)&&(Bt=he[0]*Li,rr=he[1]*Li),isNaN(Bt)&&(Bt=Z[0],rr=Z[1]),(Bt>14400||rr>14400)&&(x.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Bt=Math.min(14400,Bt),rr=Math.min(14400,rr)),Z=[Bt,rr],M.substr(0,1)){case"l":rr>Bt&&(Z=[rr,Bt]);break;case"p":Bt>rr&&(Z=[rr,Bt])}iu(Z),kn(Zs),yt(Go),wc!==0&&yt(wc+" J"),Vc!==0&&yt(Vc+" j"),cs.publish("addPage",{pageNumber:Ii})},zd=function(he){he>0&&he<=Ii&&(An.splice(he,1),_n.splice(he,1),Ii--,Tt>Ii&&(Tt=Ii),this.setPage(Tt))},rc=function(he){he>0&&he<=Ii&&(Tt=he)},Yu=je.__private__.getNumberOfPages=je.getNumberOfPages=function(){return An.length-1},_d=function(he,Me,wt){var Bt,rr=void 0;return wt=wt||{},he=he!==void 0?he:Zi[Hn].fontName,Me=Me!==void 0?Me:Zi[Hn].fontStyle,Bt=he.toLowerCase(),ys[Bt]!==void 0&&ys[Bt][Me]!==void 0?rr=ys[Bt][Me]:ys[he]!==void 0&&ys[he][Me]!==void 0?rr=ys[he][Me]:wt.disableWarning===!1&&x.warn("Unable to look up font label for font '"+he+"', '"+Me+"'. Refer to getFontList() for available fonts."),rr||wt.noFallback||(rr=ys.times[Me])==null&&(rr=ys.times.normal),rr},yl=je.__private__.putInfo=function(){var he=fa(),Me=function(Bt){return Bt};for(var wt in Ve!==null&&(Me=Bo.encryptor(he,0)),yt("<<"),yt("/Producer ("+vl(Me("jsPDF "+et.version))+")"),Si)Si.hasOwnProperty(wt)&&Si[wt]&&yt("/"+wt.substr(0,1).toUpperCase()+wt.substr(1)+" ("+vl(Me(Si[wt]))+")");yt("/CreationDate ("+vl(Me(vr))+")"),yt(">>"),yt("endobj")},oh=je.__private__.putCatalog=function(he){var Me=(he=he||{}).rootDictionaryObjId||To;switch(fa(),yt("<<"),yt("/Type /Catalog"),yt("/Pages "+Me+" 0 R"),Ni||(Ni="fullwidth"),Ni){case"fullwidth":yt("/OpenAction [3 0 R /FitH null]");break;case"fullheight":yt("/OpenAction [3 0 R /FitV null]");break;case"fullpage":yt("/OpenAction [3 0 R /Fit]");break;case"original":yt("/OpenAction [3 0 R /XYZ null null 1]");break;default:var wt=""+Ni;wt.substr(wt.length-1)==="%"&&(Ni=parseInt(Ni)/100),typeof Ni=="number"&&yt("/OpenAction [3 0 R /XYZ null null "+lt(Ni)+"]")}switch(Di||(Di="continuous"),Di){case"continuous":yt("/PageLayout /OneColumn");break;case"single":yt("/PageLayout /SinglePage");break;case"two":case"twoleft":yt("/PageLayout /TwoColumnLeft");break;case"tworight":yt("/PageLayout /TwoColumnRight")}Qn&&yt("/PageMode /"+Qn),cs.publish("putCatalog"),yt(">>"),yt("endobj")},Bl=je.__private__.putTrailer=function(){yt("trailer"),yt("<<"),yt("/Size "+(Xt+1)),yt("/Root "+Xt+" 0 R"),yt("/Info "+(Xt-1)+" 0 R"),Ve!==null&&yt("/Encrypt "+Bo.oid+" 0 R"),yt("/ID [ <"+kr+"> <"+kr+"> ]"),yt(">>")},Fi=je.__private__.putHeader=function(){yt("%PDF-"+St),yt("%")},vc=je.__private__.putXRef=function(){var he="0000000000";yt("xref"),yt("0 "+(Xt+1)),yt("0000000000 65535 f ");for(var Me=1;Me<=Xt;Me++)typeof fr[Me]=="function"?yt((he+fr[Me]()).slice(-10)+" 00000 n "):fr[Me]!==void 0?yt((he+fr[Me]).slice(-10)+" 00000 n "):yt("0000000000 00000 n ")},Qc=je.__private__.buildDocument=function(){var he;Xt=0,Nr=0,Lr=[],fr=[],Zr=[],To=yo(),Ac=yo(),xi(Lr),cs.publish("buildDocument"),Fi(),tc(),(function(){cs.publish("putAdditionalObjects");for(var wt=0;wt<Zr.length;wt++){var Bt=Zr[wt];Ja(Bt.objId,!0),yt(Bt.content),yt("endobj")}cs.publish("postPutAdditionalObjects")})(),he=[],(function(){for(var wt in Zi)Zi.hasOwnProperty(wt)&&(Ze===!1||Ze===!0&&dt.hasOwnProperty(wt))&&Vl(Zi[wt])})(),(function(){var wt;for(wt in Qi)Qi.hasOwnProperty(wt)&&Gl(Qi[wt])})(),(function(){for(var wt in so)so.hasOwnProperty(wt)&&pc(so[wt])})(),(function(wt){var Bt;for(Bt in bi)bi.hasOwnProperty(Bt)&&(bi[Bt]instanceof De?wd(bi[Bt]):bi[Bt]instanceof ut&&Kl(bi[Bt],wt))})(he),cs.publish("putResources"),he.forEach(Eu),Eu({resourcesOid:Ac,objectOid:Number.MAX_SAFE_INTEGER}),cs.publish("postPutResources"),Ve!==null&&(Bo.oid=fa(),yt("<<"),yt("/Filter /Standard"),yt("/V "+Bo.v),yt("/R "+Bo.r),yt("/U <"+Bo.toHexString(Bo.U)+">"),yt("/O <"+Bo.toHexString(Bo.O)+">"),yt("/P "+Bo.P),yt(">>"),yt("endobj")),yl(),oh();var Me=Nr;return vc(),Bl(),yt("startxref"),yt(""+Me),yt("%%EOF"),xi(An[Tt]),Lr.join(`
`)},zc=je.__private__.getBlob=function(he){return new Blob([Ri(he)],{type:"application/pdf"})},qu=je.output=je.__private__.output=(Hl=function(he,Me){switch(typeof(Me=Me||{})=="string"?Me={filename:Me}:Me.filename=Me.filename||"generated.pdf",he){case void 0:return Qc();case"save":je.save(Me.filename);break;case"arraybuffer":return Ri(Qc());case"blob":return zc(Qc());case"bloburi":case"bloburl":if(g.URL!==void 0&&typeof g.URL.createObjectURL=="function")return g.URL&&g.URL.createObjectURL(zc(Qc()))||void 0;x.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var wt="",Bt=Qc();try{wt=D(Bt)}catch{wt=D(unescape(encodeURIComponent(Bt)))}return"data:application/pdf;filename="+Me.filename+";base64,"+wt;case"pdfobjectnewwindow":if(Object.prototype.toString.call(g)==="[object Window]"){var rr="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",zr=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Me.pdfObjectUrl&&(rr=Me.pdfObjectUrl,zr="");var nn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+rr+'"'+zr+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Me)+");<\/script></body></html>",ti=g.open();return ti!==null&&ti.document.write(nn),ti}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(g)==="[object Window]"){var ri='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Me.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Me.filename+'" width="500px" height="400px" /></body></html>',Yi=g.open();if(Yi!==null){Yi.document.write(ri);var os=this;Yi.document.documentElement.querySelector("#pdfViewer").onload=function(){Yi.document.title=Me.filename,Yi.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(os.output("bloburl"))}}return Yi}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(g)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var na='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Me)+'"></iframe></body></html>',Fa=g.open();if(Fa!==null&&(Fa.document.write(na),Fa.document.title=Me.filename),Fa||typeof safari>"u")return Fa;break;case"datauri":case"dataurl":return g.document.location.href=this.output("datauristring",Me);default:return null}},Hl.foo=function(){try{return Hl.apply(this,arguments)}catch(wt){var he=wt.stack||"";~he.indexOf(" at ")&&(he=he.split(" at ")[1]);var Me="Error in function "+he.split(`
`)[0].split("<")[0]+": "+wt.message;if(!g.console)throw new Error(Me);g.console.error(Me,wt),g.alert&&alert(Me)}},Hl.foo.bar=Hl,Hl.foo),yc=function(he){return Array.isArray(_u)===!0&&_u.indexOf(he)>-1};switch(W){case"pt":Li=1;break;case"mm":Li=2.834645669291339;break;case"cm":Li=28.346456692913385;break;case"in":Li=72;break;case"px":Li=yc("px_scaling")==1?.75:1.3333333333333333;break;case"pc":case"em":Li=12;break;case"ex":Li=6;break;default:if(typeof W!="number")throw new Error("Invalid unit: "+W);Li=W}var Bo=null;on(),ur();var su=je.__private__.getPageInfo=je.getPageInfo=function(he){if(isNaN(he)||he%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:_n[he].objId,pageNumber:he,pageContext:_n[he]}},v=je.__private__.getPageInfoByObjId=function(he){if(isNaN(he)||he%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Me in _n)if(_n[Me].objId===he)break;return su(Me)},S=je.__private__.getCurrentPageInfo=je.getCurrentPageInfo=function(){return{objId:_n[Tt].objId,pageNumber:Tt,pageContext:_n[Tt]}};je.addPage=function(){return gc.apply(this,arguments),this},je.setPage=function(){return rc.apply(this,arguments),xi.call(this,An[Tt]),this},je.insertPage=function(he){return this.addPage(),this.movePage(Tt,he),this},je.movePage=function(he,Me){var wt,Bt;if(he>Me){wt=An[he],Bt=_n[he];for(var rr=he;rr>Me;rr--)An[rr]=An[rr-1],_n[rr]=_n[rr-1];An[Me]=wt,_n[Me]=Bt,this.setPage(Me)}else if(he<Me){wt=An[he],Bt=_n[he];for(var zr=he;zr<Me;zr++)An[zr]=An[zr+1],_n[zr]=_n[zr+1];An[Me]=wt,_n[Me]=Bt,this.setPage(Me)}return this},je.deletePage=function(){return zd.apply(this,arguments),this},je.__private__.text=je.text=function(he,Me,wt,Bt,rr){var zr,nn,ti,ri,Yi,os,na,Fa,Oo,ka=(Bt=Bt||{}).scope||this;if(typeof he=="number"&&typeof Me=="number"&&(typeof wt=="string"||Array.isArray(wt))){var Wo=wt;wt=Me,Me=he,he=Wo}if(arguments[3]instanceof wi==0?(ti=arguments[4],ri=arguments[5],(0,d.default)(na=arguments[3])==="object"&&na!==null||(typeof ti=="string"&&(ri=ti,ti=null),typeof na=="string"&&(ri=na,na=null),typeof na=="number"&&(ti=na,na=null),Bt={flags:na,angle:ti,align:ri})):(Mt("The transform parameter of text() with a Matrix value"),Oo=rr),isNaN(Me)||isNaN(wt)||he==null)throw new Error("Invalid arguments passed to jsPDF.text");if(he.length===0)return ka;var O,Oe="",te=typeof Bt.lineHeightFactor=="number"?Bt.lineHeightFactor:il,qe=ka.internal.scaleFactor;function Et(sa){return sa=sa.split("	").join(Array(Bt.TabLen||9).join(" ")),vl(sa,na)}function _t(sa){for(var eo,Is=sa.concat(),bl=[],fh=Is.length;fh--;)typeof(eo=Is.shift())=="string"?bl.push(eo):Array.isArray(sa)&&(eo.length===1||eo[1]===void 0&&eo[2]===void 0)?bl.push(eo[0]):bl.push([eo[0],eo[1],eo[2]]);return bl}function yr(sa,eo){var Is;if(typeof sa=="string")Is=eo(sa)[0];else if(Array.isArray(sa)){for(var bl,fh,fm=sa.concat(),qh=[],qm=fm.length;qm--;)typeof(bl=fm.shift())=="string"?qh.push(eo(bl)[0]):Array.isArray(bl)&&typeof bl[0]=="string"&&(fh=eo(bl[0],bl[1],bl[2]),qh.push([fh[0],fh[1],fh[2]]));Is=qh}return Is}var Kt=!1,Un=!0;if(typeof he=="string")Kt=!0;else if(Array.isArray(he)){var Ft=he.concat();nn=[];for(var xr,qi=Ft.length;qi--;)(typeof(xr=Ft.shift())!="string"||Array.isArray(xr)&&typeof xr[0]!="string")&&(Un=!1);Kt=Un}if(Kt===!1)throw new Error('Type of text must be string or Array. "'+he+'" is not recognized.');typeof he=="string"&&(he=he.match(/[\r?\n]/)?he.split(/\r\n|\r|\n/g):[he]);var Ln=cn/ka.internal.scaleFactor,an=Ln*(te-1);switch(Bt.baseline){case"bottom":wt-=an;break;case"top":wt+=Ln-an;break;case"hanging":wt+=Ln-2*an;break;case"middle":wt+=Ln/2-an}if((os=Bt.maxWidth||0)>0&&(typeof he=="string"?he=ka.splitTextToSize(he,os):Object.prototype.toString.call(he)==="[object Array]"&&(he=he.reduce(function(sa,eo){return sa.concat(ka.splitTextToSize(eo,os))},[]))),zr={text:he,x:Me,y:wt,options:Bt,mutex:{pdfEscape:vl,activeFontKey:Hn,fonts:Zi,activeFontSize:cn}},cs.publish("preProcessText",zr),he=zr.text,ti=(Bt=zr.options).angle,Oo instanceof wi==0&&ti&&typeof ti=="number"){ti*=Math.PI/180,Bt.rotationDirection===0&&(ti=-ti),It===qt&&(ti=-ti);var Mr=Math.cos(ti),Ua=Math.sin(ti);Oo=new wi(Mr,Ua,-Ua,Mr,0,0)}else ti&&ti instanceof wi&&(Oo=ti);It!==qt||Oo||(Oo=Za),(Yi=Bt.charSpace||ql)!==void 0&&(Oe+=or(Rt(Yi))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Fa=Bt.horizontalScale)!==void 0&&(Oe+=or(100*Fa)+` Tz
`),Bt.lang;var Wi=-1,ki=Bt.renderingMode!==void 0?Bt.renderingMode:Bt.stroke,zi=ka.internal.getCurrentPageInfo().pageContext;switch(ki){case 0:case!1:case"fill":Wi=0;break;case 1:case!0:case"stroke":Wi=1;break;case 2:case"fillThenStroke":Wi=2;break;case 3:case"invisible":Wi=3;break;case 4:case"fillAndAddForClipping":Wi=4;break;case 5:case"strokeAndAddPathForClipping":Wi=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Wi=6;break;case 7:case"addToPathForClipping":Wi=7}var xs=zi.usedRenderingMode!==void 0?zi.usedRenderingMode:-1;Wi!==-1?Oe+=Wi+` Tr
`:xs!==-1&&(Oe+=`0 Tr
`),Wi!==-1&&(zi.usedRenderingMode=Wi),ri=Bt.align||"left";var En,bs=cn*te,$a=ka.internal.pageSize.getWidth(),ji=Zi[Hn];Yi=Bt.charSpace||ql,os=Bt.maxWidth||0,na=Object.assign({autoencode:!0,noBOM:!0},Bt.flags);var ia=[],Ls=function(sa){return ka.getStringUnitWidth(sa,{font:ji,charSpace:Yi,fontSize:cn,doKerning:!1})*cn/qe};if(Object.prototype.toString.call(he)==="[object Array]"){var ni;nn=_t(he),ri!=="left"&&(En=nn.map(Ls));var $i,nc=0;if(ri==="right"){Me-=En[0],he=[],qi=nn.length;for(var Zu=0;Zu<qi;Zu++)Zu===0?($i=Yl(Me),ni=Su(wt)):($i=Rt(nc-En[Zu]),ni=-bs),he.push([nn[Zu],$i,ni]),nc=En[Zu]}else if(ri==="center"){Me-=En[0]/2,he=[],qi=nn.length;for(var ou=0;ou<qi;ou++)ou===0?($i=Yl(Me),ni=Su(wt)):($i=Rt((nc-En[ou])/2),ni=-bs),he.push([nn[ou],$i,ni]),nc=En[ou]}else if(ri==="left"){he=[],qi=nn.length;for(var xl=0;xl<qi;xl++)he.push(nn[xl])}else if(ri==="justify"&&ji.encoding==="Identity-H"){he=[],qi=nn.length,os=os!==0?os:$a;for(var ic=0,oo=0;oo<qi;oo++)if(ni=oo===0?Su(wt):-bs,$i=oo===0?Yl(Me):ic,oo<qi-1){var Ym=Rt((os-En[oo])/(nn[oo].split(" ").length-1)),hh=nn[oo].split(" ");he.push([hh[0]+" ",$i,ni]),ic=0;for(var Gc=1;Gc<hh.length;Gc++){var Wc=(Ls(hh[Gc-1]+" "+hh[Gc])-Ls(hh[Gc]))*qe+Ym;Gc==hh.length-1?he.push([hh[Gc],Wc,0]):he.push([hh[Gc]+" ",Wc,0]),ic-=Wc}}else he.push([nn[oo],$i,ni]);he.push(["",ic,0])}else{if(ri!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(he=[],qi=nn.length,os=os!==0?os:$a,oo=0;oo<qi;oo++){ni=oo===0?Su(wt):-bs,$i=oo===0?Yl(Me):0;var Ro=nn[oo].split(" ").length-1,If=Ro>0?(os-En[oo])/Ro:0;oo<qi-1?ia.push(or(Rt(If))):ia.push(0),he.push([nn[oo],$i,ni])}}}(typeof Bt.R2L=="boolean"?Bt.R2L:zn)===!0&&(he=yr(he,function(sa,eo,Is){return[sa.split("").reverse().join(""),eo,Is]})),zr={text:he,x:Me,y:wt,options:Bt,mutex:{pdfEscape:vl,activeFontKey:Hn,fonts:Zi,activeFontSize:cn}},cs.publish("postProcessText",zr),he=zr.text,O=zr.mutex.isHex||!1;var Td=Zi[Hn].encoding;Td!=="WinAnsiEncoding"&&Td!=="StandardEncoding"||(he=yr(he,function(sa,eo,Is){return[Et(sa),eo,Is]})),nn=_t(he),he=[];for(var Ji,ma,bo,Ch=Array.isArray(nn[0])?1:0,Ju="",Cd=function(sa,eo,Is){var bl="";return Is instanceof wi?(Is=typeof Bt.angle=="number"?Da(Is,new wi(1,0,0,1,sa,eo)):Da(new wi(1,0,0,1,sa,eo),Is),It===qt&&(Is=Da(new wi(1,0,0,-1,0,0),Is)),bl=Is.join(" ")+` Tm
`):bl=or(sa)+" "+or(eo)+` Td
`,bl},_c=0;_c<nn.length;_c++){switch(Ju="",Ch){case 1:bo=(O?"<":"(")+nn[_c][0]+(O?">":")"),Ji=parseFloat(nn[_c][1]),ma=parseFloat(nn[_c][2]);break;case 0:bo=(O?"<":"(")+nn[_c]+(O?">":")"),Ji=Yl(Me),ma=Su(wt)}ia!==void 0&&ia[_c]!==void 0&&(Ju=ia[_c]+` Tw
`),_c===0?he.push(Ju+Cd(Ji,ma,Oo)+bo):Ch===0?he.push(Ju+bo):Ch===1&&he.push(Ju+Cd(Ji,ma,Oo)+bo)}he=Ch===0?he.join(` Tj
T* `):he.join(` Tj
`),he+=` Tj
`;var ed=`BT
/`;return ed+=Hn+" "+cn+` Tf
`,ed+=or(cn*te)+` TL
`,ed+=bc+`
`,ed+=Oe,ed+=he,yt(ed+="ET"),dt[Hn]=!0,ka};var Q=je.__private__.clip=je.clip=function(he){return yt(he==="evenodd"?"W*":"W"),this};je.clipEvenOdd=function(){return Q("evenodd")},je.__private__.discardPath=je.discardPath=function(){return yt("n"),this};var le=je.__private__.isValidStyle=function(he){var Me=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(he)!==-1&&(Me=!0),Me};je.__private__.setDefaultPathOperation=je.setDefaultPathOperation=function(he){return le(he)&&(Le=he),this};var _e=je.__private__.getStyle=je.getStyle=function(he){var Me=Le;switch(he){case"D":case"S":Me="S";break;case"F":Me="f";break;case"FD":case"DF":Me="B";break;case"f":case"f*":case"B":case"B*":Me=he}return Me},Ke=je.close=function(){return yt("h"),this};je.stroke=function(){return yt("S"),this},je.fill=function(he){return kt("f",he),this},je.fillEvenOdd=function(he){return kt("f*",he),this},je.fillStroke=function(he){return kt("B",he),this},je.fillStrokeEvenOdd=function(he){return kt("B*",he),this};var kt=function(he,Me){(0,d.default)(Me)==="object"?Wr(Me,he):yt(he)},er=function(he){he===null||It===qt&&he===void 0||(he=_e(he),yt(he))};function Er(he,Me,wt,Bt,rr){var zr=new ut(Me||this.boundingBox,wt||this.xStep,Bt||this.yStep,this.gState,rr||this.matrix);zr.stream=this.stream;var nn=he+"$$"+this.cloneIndex+++"$$";return $l(nn,zr),zr}var Wr=function(he,Me){var wt=Ys[he.key],Bt=bi[wt];if(Bt instanceof De)yt("q"),yt(bn(Me)),Bt.gState&&je.setGState(Bt.gState),yt(he.matrix.toString()+" cm"),yt("/"+wt+" sh"),yt("Q");else if(Bt instanceof ut){var rr=new wi(1,0,0,-1,0,dh());he.matrix&&(rr=rr.multiply(he.matrix||Za),wt=Er.call(Bt,he.key,he.boundingBox,he.xStep,he.yStep,rr).id),yt("q"),yt("/Pattern cs"),yt("/"+wt+" scn"),Bt.gState&&je.setGState(Bt.gState),yt(Me),yt("Q")}},bn=function(he){switch(he){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},ui=je.moveTo=function(he,Me){return yt(or(Rt(he))+" "+or(Dt(Me))+" m"),this},As=je.lineTo=function(he,Me){return yt(or(Rt(he))+" "+or(Dt(Me))+" l"),this},Ma=je.curveTo=function(he,Me,wt,Bt,rr,zr){return yt([or(Rt(he)),or(Dt(Me)),or(Rt(wt)),or(Dt(Bt)),or(Rt(rr)),or(Dt(zr)),"c"].join(" ")),this};je.__private__.line=je.line=function(he,Me,wt,Bt,rr){if(isNaN(he)||isNaN(Me)||isNaN(wt)||isNaN(Bt)||!le(rr))throw new Error("Invalid arguments passed to jsPDF.line");return It===Ot?this.lines([[wt-he,Bt-Me]],he,Me,[1,1],rr||"S"):this.lines([[wt-he,Bt-Me]],he,Me,[1,1]).stroke()},je.__private__.lines=je.lines=function(he,Me,wt,Bt,rr,zr){var nn,ti,ri,Yi,os,na,Fa,Oo,ka,Wo,O,Oe;if(typeof he=="number"&&(Oe=wt,wt=Me,Me=he,he=Oe),Bt=Bt||[1,1],zr=zr||!1,isNaN(Me)||isNaN(wt)||!Array.isArray(he)||!Array.isArray(Bt)||!le(rr)||typeof zr!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(ui(Me,wt),nn=Bt[0],ti=Bt[1],Yi=he.length,Wo=Me,O=wt,ri=0;ri<Yi;ri++)(os=he[ri]).length===2?(Wo=os[0]*nn+Wo,O=os[1]*ti+O,As(Wo,O)):(na=os[0]*nn+Wo,Fa=os[1]*ti+O,Oo=os[2]*nn+Wo,ka=os[3]*ti+O,Wo=os[4]*nn+Wo,O=os[5]*ti+O,Ma(na,Fa,Oo,ka,Wo,O));return zr&&Ke(),er(rr),this},je.path=function(he){for(var Me=0;Me<he.length;Me++){var wt=he[Me],Bt=wt.c;switch(wt.op){case"m":ui(Bt[0],Bt[1]);break;case"l":As(Bt[0],Bt[1]);break;case"c":Ma.apply(this,Bt);break;case"h":Ke()}}return this},je.__private__.rect=je.rect=function(he,Me,wt,Bt,rr){if(isNaN(he)||isNaN(Me)||isNaN(wt)||isNaN(Bt)||!le(rr))throw new Error("Invalid arguments passed to jsPDF.rect");return It===Ot&&(Bt=-Bt),yt([or(Rt(he)),or(Dt(Me)),or(Rt(wt)),or(Rt(Bt)),"re"].join(" ")),er(rr),this},je.__private__.triangle=je.triangle=function(he,Me,wt,Bt,rr,zr,nn){if(isNaN(he)||isNaN(Me)||isNaN(wt)||isNaN(Bt)||isNaN(rr)||isNaN(zr)||!le(nn))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[wt-he,Bt-Me],[rr-wt,zr-Bt],[he-rr,Me-zr]],he,Me,[1,1],nn,!0),this},je.__private__.roundedRect=je.roundedRect=function(he,Me,wt,Bt,rr,zr,nn){if(isNaN(he)||isNaN(Me)||isNaN(wt)||isNaN(Bt)||isNaN(rr)||isNaN(zr)||!le(nn))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var ti=4/3*(Math.SQRT2-1);return rr=Math.min(rr,.5*wt),zr=Math.min(zr,.5*Bt),this.lines([[wt-2*rr,0],[rr*ti,0,rr,zr-zr*ti,rr,zr],[0,Bt-2*zr],[0,zr*ti,-rr*ti,zr,-rr,zr],[2*rr-wt,0],[-rr*ti,0,-rr,-zr*ti,-rr,-zr],[0,2*zr-Bt],[0,-zr*ti,rr*ti,-zr,rr,-zr]],he+rr,Me,[1,1],nn,!0),this},je.__private__.ellipse=je.ellipse=function(he,Me,wt,Bt,rr){if(isNaN(he)||isNaN(Me)||isNaN(wt)||isNaN(Bt)||!le(rr))throw new Error("Invalid arguments passed to jsPDF.ellipse");var zr=4/3*(Math.SQRT2-1)*wt,nn=4/3*(Math.SQRT2-1)*Bt;return ui(he+wt,Me),Ma(he+wt,Me-nn,he+zr,Me-Bt,he,Me-Bt),Ma(he-zr,Me-Bt,he-wt,Me-nn,he-wt,Me),Ma(he-wt,Me+nn,he-zr,Me+Bt,he,Me+Bt),Ma(he+zr,Me+Bt,he+wt,Me+nn,he+wt,Me),er(rr),this},je.__private__.circle=je.circle=function(he,Me,wt,Bt){if(isNaN(he)||isNaN(Me)||isNaN(wt)||!le(Bt))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(he,Me,wt,wt,Bt)},je.setFont=function(he,Me,wt){return wt&&(Me=Tr(Me,wt)),Hn=_d(he,Me,{disableWarning:!1}),this};var Co=je.__private__.getFont=je.getFont=function(){return Zi[_d.apply(je,arguments)]};je.__private__.getFontList=je.getFontList=function(){var he,Me,wt={};for(he in ys)if(ys.hasOwnProperty(he))for(Me in wt[he]=[],ys[he])ys[he].hasOwnProperty(Me)&&wt[he].push(Me);return wt},je.addFont=function(he,Me,wt,Bt,rr){var zr=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&zr.indexOf(arguments[3])!==-1?rr=arguments[3]:arguments[3]&&zr.indexOf(arguments[3])==-1&&(wt=Tr(wt,Bt)),Io.call(this,he,Me,wt,rr=rr||"Identity-H")};var il,Zs=P.lineWidth||.200025,ca=je.__private__.getLineWidth=je.getLineWidth=function(){return Zs},kn=je.__private__.setLineWidth=je.setLineWidth=function(he){return Zs=he,yt(or(Rt(he))+" w"),this};je.__private__.setLineDash=et.API.setLineDash=et.API.setLineDashPattern=function(he,Me){if(he=he||[],Me=Me||0,isNaN(Me)||!Array.isArray(he))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return he=he.map(function(wt){return or(Rt(wt))}).join(" "),Me=or(Rt(Me)),yt("["+he+"] "+Me+" d"),this};var Xu=je.__private__.getLineHeight=je.getLineHeight=function(){return cn*il};je.__private__.getLineHeight=je.getLineHeight=function(){return cn*il};var xc=je.__private__.setLineHeightFactor=je.setLineHeightFactor=function(he){return typeof(he=he||1.15)=="number"&&(il=he),this},Ed=je.__private__.getLineHeightFactor=je.getLineHeightFactor=function(){return il};xc(P.lineHeight);var Yl=je.__private__.getHorizontalCoordinate=function(he){return Rt(he)},Su=je.__private__.getVerticalCoordinate=function(he){return It===qt?he:_n[Tt].mediaBox.topRightY-_n[Tt].mediaBox.bottomLeftY-Rt(he)},ao=je.__private__.getHorizontalCoordinateString=je.getHorizontalCoordinateString=function(he){return or(Yl(he))},ju=je.__private__.getVerticalCoordinateString=je.getVerticalCoordinateString=function(he){return or(Su(he))},Go=P.strokeColor||"0 G";je.__private__.getStrokeColor=je.getDrawColor=function(){return Ga(Go)},je.__private__.setStrokeColor=je.setDrawColor=function(he,Me,wt,Bt){return Go=Ql({ch1:he,ch2:Me,ch3:wt,ch4:Bt,pdfColorType:"draw",precision:2}),yt(Go),this};var Sd=P.fillColor||"0 g";je.__private__.getFillColor=je.getFillColor=function(){return Ga(Sd)},je.__private__.setFillColor=je.setFillColor=function(he,Me,wt,Bt){return Sd=Ql({ch1:he,ch2:Me,ch3:wt,ch4:Bt,pdfColorType:"fill",precision:2}),yt(Sd),this};var bc=P.textColor||"0 g",Vd=je.__private__.getTextColor=je.getTextColor=function(){return Ga(bc)};je.__private__.setTextColor=je.setTextColor=function(he,Me,wt,Bt){return bc=Ql({ch1:he,ch2:Me,ch3:wt,ch4:Bt,pdfColorType:"text",precision:3}),this};var ql=P.charSpace,Tu=je.__private__.getCharSpace=je.getCharSpace=function(){return parseFloat(ql||0)};je.__private__.setCharSpace=je.setCharSpace=function(he){if(isNaN(he))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return ql=he,this};var wc=0;je.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},je.__private__.setLineCap=je.setLineCap=function(he){var Me=je.CapJoinStyles[he];if(Me===void 0)throw new Error("Line cap style of '"+he+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return wc=Me,yt(Me+" J"),this};var Vc=0;je.__private__.setLineJoin=je.setLineJoin=function(he){var Me=je.CapJoinStyles[he];if(Me===void 0)throw new Error("Line join style of '"+he+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Vc=Me,yt(Me+" j"),this},je.__private__.setLineMiterLimit=je.__private__.setMiterLimit=je.setLineMiterLimit=je.setMiterLimit=function(he){if(he=he||0,isNaN(he))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return yt(or(Rt(he))+" M"),this},je.GState=ft,je.setGState=function(he){(he=typeof he=="string"?Qi[ai[he]]:Sh(null,he)).equals(ha)||(yt("/"+he.id+" gs"),ha=he)};var Sh=function(he,Me){if(!he||!ai[he]){var wt=!1;for(var Bt in Qi)if(Qi.hasOwnProperty(Bt)&&Qi[Bt].equals(Me)){wt=!0;break}if(wt)Me=Qi[Bt];else{var rr="GS"+(Object.keys(Qi).length+1).toString(10);Qi[rr]=Me,Me.id=rr}return he&&(ai[he]=Me.id),cs.publish("addGState",Me),Me}};je.addGState=function(he,Me){return Sh(he,Me),this},je.saveGraphicsState=function(){return yt("q"),Na.push({key:Hn,size:cn,color:bc}),this},je.restoreGraphicsState=function(){yt("Q");var he=Na.pop();return Hn=he.key,cn=he.size,bc=he.color,ha=null,this},je.setCurrentTransformationMatrix=function(he){return yt(he.toString()+" cm"),this},je.comment=function(he){return yt("#"+he),this};var au=function(he,Me){var wt=he||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return wt},set:function(zr){isNaN(zr)||(wt=parseFloat(zr))}});var Bt=Me||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Bt},set:function(zr){isNaN(zr)||(Bt=parseFloat(zr))}});var rr="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return rr},set:function(zr){rr=zr.toString()}}),this},jd=function(he,Me,wt,Bt){au.call(this,he,Me),this.type="rect";var rr=wt||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return rr},set:function(nn){isNaN(nn)||(rr=parseFloat(nn))}});var zr=Bt||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return zr},set:function(nn){isNaN(nn)||(zr=parseFloat(nn))}}),this},lh=function(){this.page=Ii,this.currentPage=Tt,this.pages=An.slice(0),this.pagesContext=_n.slice(0),this.x=Yn,this.y=Gi,this.matrix=ss,this.width=jh(Tt),this.height=Wm(Tt),this.outputDestination=Fn,this.id="",this.objectNumber=-1};lh.prototype.restore=function(){Ii=this.page,Tt=this.currentPage,_n=this.pagesContext,An=this.pages,Yn=this.x,Gi=this.y,ss=this.matrix,hm(Tt,this.width),ch(Tt,this.height),Fn=this.outputDestination};var Kc=function(he,Me,wt,Bt,rr){ec.push(new lh),Ii=Tt=0,An=[],Yn=he,Gi=Me,ss=rr,iu([wt,Bt])};for(var xo in je.beginFormObject=function(he,Me,wt,Bt,rr){return Kc(he,Me,wt,Bt,rr),this},je.endFormObject=function(he){return(function(Me){if(Ko[Me])ec.pop().restore();else{var wt=new lh,Bt="Xo"+(Object.keys(so).length+1).toString(10);wt.id=Bt,Ko[Me]=Bt,so[Bt]=wt,cs.publish("addFormObject",wt),ec.pop().restore()}})(he),this},je.doFormObject=function(he,Me){var wt=so[Ko[he]];return yt("q"),yt(Me.toString()+" cm"),yt("/"+wt.id+" Do"),yt("Q"),this},je.getFormObject=function(he){var Me=so[Ko[he]];return{x:Me.x,y:Me.y,width:Me.width,height:Me.height,matrix:Me.matrix}},je.save=function(he,Me){return he=he||"generated.pdf",(Me=Me||{}).returnPromise=Me.returnPromise||!1,Me.returnPromise===!1?(N(zc(Qc()),he),typeof N.unload=="function"&&g.setTimeout&&setTimeout(N.unload,911),this):new Promise(function(wt,Bt){try{var rr=N(zc(Qc()),he);typeof N.unload=="function"&&g.setTimeout&&setTimeout(N.unload,911),wt(rr)}catch(zr){Bt(zr.message)}})},et.API)et.API.hasOwnProperty(xo)&&(xo==="events"&&et.API.events.length?(function(he,Me){var wt,Bt,rr;for(rr=Me.length-1;rr!==-1;rr--)wt=Me[rr][0],Bt=Me[rr][1],he.subscribe.apply(he,[wt].concat(typeof Bt=="function"?[Bt]:Bt))})(cs,et.API.events):je[xo]=et.API[xo]);function jh(he){return _n[he].mediaBox.topRightX-_n[he].mediaBox.bottomLeftX}function hm(he,Me){_n[he].mediaBox.topRightX=Me+_n[he].mediaBox.bottomLeftX}function Wm(he){return _n[he].mediaBox.topRightY-_n[he].mediaBox.bottomLeftY}function ch(he,Me){_n[he].mediaBox.topRightY=Me+_n[he].mediaBox.bottomLeftY}var uh=je.getPageWidth=function(he){return jh(he=he||Tt)/Li},Po=je.setPageWidth=function(he,Me){hm(he,Me*Li)},dh=je.getPageHeight=function(he){return Wm(he=he||Tt)/Li},Th=je.setPageHeight=function(he,Me){ch(he,Me*Li)};return je.internal={pdfEscape:vl,getStyle:_e,getFont:Co,getFontSize:$n,getCharSpace:Tu,getTextColor:Vd,getLineHeight:Xu,getLineHeightFactor:Ed,getLineWidth:ca,write:Tn,getHorizontalCoordinate:Yl,getVerticalCoordinate:Su,getCoordinateString:ao,getVerticalCoordinateString:ju,collections:{},newObject:fa,newAdditionalObject:Hc,newObjectDeferred:yo,newObjectDeferredBegin:Ja,getFilters:zl,putStream:Il,events:cs,scaleFactor:Li,pageSize:{getWidth:function(){return uh(Tt)},setWidth:function(he){Po(Tt,he)},getHeight:function(){return dh(Tt)},setHeight:function(he){Th(Tt,he)}},encryptionOptions:Ve,encryption:Bo,getEncryptor:function(he){return Ve!==null?Bo.encryptor(he,0):function(Me){return Me}},output:qu,getNumberOfPages:Yu,get pages(){return An},out:yt,f2:lt,f3:vt,getPageInfo:su,getPageInfoByObjId:v,getCurrentPageInfo:S,getPDFVersion:ct,Point:au,Rectangle:jd,Matrix:wi,hasHotfix:yc},Object.defineProperty(je.internal.pageSize,"width",{get:function(){return uh(Tt)},set:function(he){Po(Tt,he)},enumerable:!0,configurable:!0}),Object.defineProperty(je.internal.pageSize,"height",{get:function(){return dh(Tt)},set:function(he){Th(Tt,he)},enumerable:!0,configurable:!0}),(function(he){for(var Me=0,wt=Cn.length;Me<wt;Me++){var Bt=Io.call(this,he[Me][0],he[Me][1],he[Me][2],Cn[Me][3],!0);Ze===!1&&(dt[Bt]=!0);var rr=he[Me][0].split("-");Wl({id:Bt,fontName:rr[0],fontStyle:rr[1]||""})}cs.publish("addFonts",{fonts:Zi,dictionary:ys})}).call(je,Cn),Hn="F1",gc(Z,M),cs.publish("initialized"),je}Re.prototype.lsbFirstWord=function(P){return String.fromCharCode(255&P,P>>8&255,P>>16&255,P>>24&255)},Re.prototype.toHexString=function(P){return P.split("").map(function(k){return("0"+(255&k.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Re.prototype.hexToBytes=function(P){for(var k=[],M=0;M<P.length;M+=2)k.push(String.fromCharCode(parseInt(P.substr(M,2),16)));return k.join("")},Re.prototype.processOwnerPassword=function(P,k){return ue(Ie(k).substr(0,5),P)},Re.prototype.encryptor=function(P,k){var M=Ie(this.encryptionKey+String.fromCharCode(255&P,P>>8&255,P>>16&255,255&k,k>>8&255)).substr(0,10);return function(W){return ue(M,W)}},ft.prototype.equals=function(P){var k,M="id,objectNumber,equals";if(!P||(0,d.default)(P)!==(0,d.default)(this))return!1;var W=0;for(k in this)if(!(M.indexOf(k)>=0)){if(this.hasOwnProperty(k)&&!P.hasOwnProperty(k)||this[k]!==P[k])return!1;W++}for(k in P)P.hasOwnProperty(k)&&M.indexOf(k)<0&&W--;return W===0},et.API={events:[]},et.version="4.0.0";var Ue=et.API,jt=1,rt=function(P){return P.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ct=function(P){return P.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},ke=function(P){return P.toFixed(2)},Xe=function(P){return P.toFixed(5)};Ue.__acroform__={};var mt=function(P,k){P.prototype=Object.create(k.prototype),P.prototype.constructor=P},Jt=function(P){return P*jt},tr=function(P){var k=new en,M=un.internal.getHeight(P)||0,W=un.internal.getWidth(P)||0;return k.BBox=[0,0,Number(ke(W)),Number(ke(M))],k},lr=Ue.__acroform__.setBit=function(P,k){if(P=P||0,k=k||0,isNaN(P)||isNaN(k))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return P|1<<k},Pr=Ue.__acroform__.clearBit=function(P,k){if(P=P||0,k=k||0,isNaN(P)||isNaN(k))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return P&~(1<<k)},tn=Ue.__acroform__.getBit=function(P,k){if(isNaN(P)||isNaN(k))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return P&1<<k?1:0},Gr=Ue.__acroform__.getBitForPdf=function(P,k){if(isNaN(P)||isNaN(k))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return tn(P,k-1)},Xr=Ue.__acroform__.setBitForPdf=function(P,k){if(isNaN(P)||isNaN(k))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return lr(P,k-1)},Qr=Ue.__acroform__.clearBitForPdf=function(P,k){if(isNaN(P)||isNaN(k))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Pr(P,k-1)},Pn=Ue.__acroform__.calculateCoordinates=function(P,k){var M=k.internal.getHorizontalCoordinate,W=k.internal.getVerticalCoordinate,Z=P[0],re=P[1],ye=P[2],fe=P[3],Ae={};return Ae.lowerLeft_X=M(Z)||0,Ae.lowerLeft_Y=W(re+fe)||0,Ae.upperRight_X=M(Z+ye)||0,Ae.upperRight_Y=W(re)||0,[Number(ke(Ae.lowerLeft_X)),Number(ke(Ae.lowerLeft_Y)),Number(ke(Ae.upperRight_X)),Number(ke(Ae.upperRight_Y))]},wn=function(P){if(P.appearanceStreamContent)return P.appearanceStreamContent;if(P.V||P.DV){var k=[],M=P._V||P.DV,W=yi(P,M),Z=P.scope.internal.getFont(P.fontName,P.fontStyle).id;k.push("/Tx BMC"),k.push("q"),k.push("BT"),k.push(P.scope.__private__.encodeColorString(P.color)),k.push("/"+Z+" "+ke(W.fontSize)+" Tf"),k.push("1 0 0 1 0 0 Tm"),k.push(W.text),k.push("ET"),k.push("Q"),k.push("EMC");var re=tr(P);return re.scope=P.scope,re.stream=k.join(`
`),re}},yi=function(P,k){var M=P.fontSize===0?P.maxFontSize:P.fontSize,W={text:"",fontSize:""},Z=(k=(k=k.substr(0,1)=="("?k.substr(1):k).substr(k.length-1)==")"?k.substr(0,k.length-1):k).split(" ");Z=P.multiline?Z.map(function(lt){return lt.split(`
`)}):Z.map(function(lt){return[lt]});var re=M,ye=un.internal.getHeight(P)||0;ye=ye<0?-ye:ye;var fe=un.internal.getWidth(P)||0;fe=fe<0?-fe:fe;var Ae=function(lt,vt,Rt){if(lt+1<Z.length){var Dt=vt+" "+Z[lt+1][0];return ot(Dt,P,Rt).width<=fe-4}return!1};re++;e:for(;re>0;){k="",re--;var Le,Ve,Ze=ot("3",P,re).height,dt=P.multiline?ye-re:(ye-Ze)/2,je=dt+=2,St=0,ct=0,Nt=0;if(re<=0){k=`(...) Tj
`,k+="% Width of Text: "+ot(k,P,re=12).width+", FieldWidth:"+fe+`
`;break}for(var it="",Ot=0,qt=0;qt<Z.length;qt++)if(Z.hasOwnProperty(qt)){var It=!1;if(Z[qt].length!==1&&Nt!==Z[qt].length-1){if((Ze+2)*(Ot+2)+2>ye)continue e;it+=Z[qt][Nt],It=!0,ct=qt,qt--}else{it=(it+=Z[qt][Nt]+" ").substr(it.length-1)==" "?it.substr(0,it.length-1):it;var nt=parseInt(qt),Vt=Ae(nt,it,re),Tr=qt>=Z.length-1;if(Vt&&!Tr){it+=" ",Nt=0;continue}if(Vt||Tr){if(Tr)ct=nt;else if(P.multiline&&(Ze+2)*(Ot+2)+2>ye)continue e}else{if(!P.multiline||(Ze+2)*(Ot+2)+2>ye)continue e;ct=nt}}for(var or="",Mt=St;Mt<=ct;Mt++){var _r=Z[Mt];if(P.multiline){if(Mt===ct){or+=_r[Nt]+" ",Nt=(Nt+1)%_r.length;continue}if(Mt===St){or+=_r[_r.length-1]+" ";continue}}or+=_r[0]+" "}switch(or=or.substr(or.length-1)==" "?or.substr(0,or.length-1):or,Ve=ot(or,P,re).width,P.textAlign){case"right":Le=fe-Ve-2;break;case"center":Le=(fe-Ve)/2;break;default:Le=2}k+=ke(Le)+" "+ke(je)+` Td
`,k+="("+rt(or)+`) Tj
`,k+=-ke(Le)+` 0 Td
`,je=-(re+2),Ve=0,St=It?ct:ct+1,Ot++,it=""}break}return W.text=k,W.fontSize=re,W},ot=function(P,k,M){var W=k.scope.internal.getFont(k.fontName,k.fontStyle),Z=k.scope.getStringUnitWidth(P,{font:W,fontSize:parseFloat(M),charSpace:0})*parseFloat(M);return{height:k.scope.getStringUnitWidth("3",{font:W,fontSize:parseFloat(M),charSpace:0})*parseFloat(M)*1.5,width:Z}},Gt={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Ir=function(P,k){var M={type:"reference",object:P};k.internal.getPageInfo(P.page).pageContext.annotations.find(function(W){return W.type===M.type&&W.object===M.object})===void 0&&k.internal.getPageInfo(P.page).pageContext.annotations.push(M)},ar=function(P,k){if(k.scope=P,P.internal!==void 0&&(P.internal.acroformPlugin===void 0||P.internal.acroformPlugin.isInitialized===!1)){if(fn.FieldNum=0,P.internal.acroformPlugin=JSON.parse(JSON.stringify(Gt)),P.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");jt=P.internal.scaleFactor,P.internal.acroformPlugin.acroFormDictionaryRoot=new On,P.internal.acroformPlugin.acroFormDictionaryRoot.scope=P,P.internal.acroformPlugin.acroFormDictionaryRoot._eventID=P.internal.events.subscribe("postPutResources",function(){(function(M){M.internal.events.unsubscribe(M.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete M.internal.acroformPlugin.acroFormDictionaryRoot._eventID,M.internal.acroformPlugin.printedOut=!0})(P)}),P.internal.events.subscribe("buildDocument",function(){(function(M){M.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var W=M.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var Z in W)if(W.hasOwnProperty(Z)){var re=W[Z];re.objId=void 0,re.hasAnnotation&&Ir(re,M)}})(P)}),P.internal.events.subscribe("putCatalog",function(){(function(M){if(M.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");M.internal.write("/AcroForm "+M.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(P)}),P.internal.events.subscribe("postPutPages",function(M){(function(W,Z){var re=!W;for(var ye in W||(Z.internal.newObjectDeferredBegin(Z.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),Z.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),W=W||Z.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(W.hasOwnProperty(ye)){var fe=W[ye],Ae=[],Le=fe.Rect;if(fe.Rect&&(fe.Rect=Pn(fe.Rect,Z)),Z.internal.newObjectDeferredBegin(fe.objId,!0),fe.DA=un.createDefaultAppearanceStream(fe),(0,d.default)(fe)==="object"&&typeof fe.getKeyValueListForStream=="function"&&(Ae=fe.getKeyValueListForStream()),fe.Rect=Le,fe.hasAppearanceStream&&!fe.appearanceStreamContent){var Ve=wn(fe);Ae.push({key:"AP",value:"<</N "+Ve+">>"}),Z.internal.acroformPlugin.xForms.push(Ve)}if(fe.appearanceStreamContent){var Ze="";for(var dt in fe.appearanceStreamContent)if(fe.appearanceStreamContent.hasOwnProperty(dt)){var je=fe.appearanceStreamContent[dt];if(Ze+="/"+dt+" ",Ze+="<<",Object.keys(je).length>=1||Array.isArray(je)){for(var ye in je)if(je.hasOwnProperty(ye)){var St=je[ye];typeof St=="function"&&(St=St.call(Z,fe)),Ze+="/"+ye+" "+St+" ",Z.internal.acroformPlugin.xForms.indexOf(St)>=0||Z.internal.acroformPlugin.xForms.push(St)}}else typeof(St=je)=="function"&&(St=St.call(Z,fe)),Ze+="/"+ye+" "+St,Z.internal.acroformPlugin.xForms.indexOf(St)>=0||Z.internal.acroformPlugin.xForms.push(St);Ze+=">>"}Ae.push({key:"AP",value:`<<
`+Ze+">>"})}Z.internal.putStream({additionalKeyValues:Ae,objectId:fe.objId}),Z.internal.out("endobj")}re&&(function(ct,Nt){for(var it in ct)if(ct.hasOwnProperty(it)){var Ot=it,qt=ct[it];Nt.internal.newObjectDeferredBegin(qt.objId,!0),(0,d.default)(qt)==="object"&&typeof qt.putStream=="function"&&qt.putStream(),delete ct[Ot]}})(Z.internal.acroformPlugin.xForms,Z)})(M,P)}),P.internal.acroformPlugin.isInitialized=!0}},Qt=Ue.__acroform__.arrayToPdfArray=function(P,k,M){var W=function(ye){return ye};if(Array.isArray(P)){for(var Z="[",re=0;re<P.length;re++)switch(re!==0&&(Z+=" "),(0,d.default)(P[re])){case"boolean":case"number":case"object":Z+=P[re].toString();break;case"string":P[re].substr(0,1)!=="/"?(k!==void 0&&M&&(W=M.internal.getEncryptor(k)),Z+="("+rt(W(P[re].toString()))+")"):Z+=P[re].toString()}return Z+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},gr=function(P,k,M){var W=function(Z){return Z};return k!==void 0&&M&&(W=M.internal.getEncryptor(k)),(P=P||"").toString(),"("+rt(W(P))+")"},Yr=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(P){this._objId=P}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Yr.prototype.toString=function(){return this.objId+" 0 R"},Yr.prototype.putStream=function(){var P=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:P,objectId:this.objId}),this.scope.internal.out("endobj")},Yr.prototype.getKeyValueListForStream=function(){var P=[],k=Object.getOwnPropertyNames(this).filter(function(re){return re!="content"&&re!="appearanceStreamContent"&&re!="scope"&&re!="objId"&&re.substring(0,1)!="_"});for(var M in k)if(Object.getOwnPropertyDescriptor(this,k[M]).configurable===!1){var W=k[M],Z=this[W];Z&&(Array.isArray(Z)?P.push({key:W,value:Qt(Z,this.objId,this.scope)}):Z instanceof Yr?(Z.scope=this.scope,P.push({key:W,value:Z.objId+" 0 R"})):typeof Z!="function"&&P.push({key:W,value:Z}))}return P};var en=function(){Yr.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var P,k=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return k},set:function(M){k=M}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(M){P=M.trim()},get:function(){return P||null}})};mt(en,Yr);var On=function(){Yr.call(this);var P,k=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return k.length>0?k:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return k}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(P){var M=function(W){return W};return this.scope&&(M=this.scope.internal.getEncryptor(this.objId)),"("+rt(M(P))+")"}},set:function(M){P=M}})};mt(On,Yr);var fn=function P(){Yr.call(this);var k=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return k},set:function(it){if(isNaN(it))throw new Error('Invalid value "'+it+'" for attribute F supplied.');k=it}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Gr(k,3)},set:function(it){it?this.F=Xr(k,3):this.F=Qr(k,3)}});var M=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return M},set:function(it){if(isNaN(it))throw new Error('Invalid value "'+it+'" for attribute Ff supplied.');M=it}});var W=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(W.length!==0)return W},set:function(it){W=it!==void 0?it:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!W||isNaN(W[0])?0:W[0]},set:function(it){W[0]=it}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!W||isNaN(W[1])?0:W[1]},set:function(it){W[1]=it}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!W||isNaN(W[2])?0:W[2]},set:function(it){W[2]=it}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!W||isNaN(W[3])?0:W[3]},set:function(it){W[3]=it}});var Z="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return Z},set:function(it){switch(it){case"/Btn":case"/Tx":case"/Ch":case"/Sig":Z=it;break;default:throw new Error('Invalid value "'+it+'" for attribute FT supplied.')}}});var re=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!re||re.length<1){if(this instanceof Cs)return;re="FieldObject"+P.FieldNum++}var it=function(Ot){return Ot};return this.scope&&(it=this.scope.internal.getEncryptor(this.objId)),"("+rt(it(re))+")"},set:function(it){re=it.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return re},set:function(it){re=it}});var ye="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return ye},set:function(it){ye=it}});var fe="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return fe},set:function(it){fe=it}});var Ae=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return Ae},set:function(it){Ae=it}});var Le=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return Le===void 0?50/jt:Le},set:function(it){Le=it}});var Ve="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return Ve},set:function(it){Ve=it}});var Ze="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!Ze||this instanceof Cs||this instanceof Ns))return gr(Ze,this.objId,this.scope)},set:function(it){it=it.toString(),Ze=it}});var dt=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(dt)return this instanceof mn==0?gr(dt,this.objId,this.scope):dt},set:function(it){it=it.toString(),dt=this instanceof mn==0?it.substr(0,1)==="("?Ct(it.substr(1,it.length-2)):Ct(it):it}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof mn==1?Ct(dt.substr(1,dt.length-1)):dt},set:function(it){it=it.toString(),dt=this instanceof mn==1?"/"+it:it}});var je=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(je)return je},set:function(it){this.V=it}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(je)return this instanceof mn==0?gr(je,this.objId,this.scope):je},set:function(it){it=it.toString(),je=this instanceof mn==0?it.substr(0,1)==="("?Ct(it.substr(1,it.length-2)):Ct(it):it}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof mn==1?Ct(je.substr(1,je.length-1)):je},set:function(it){it=it.toString(),je=this instanceof mn==1?"/"+it:it}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var St,ct=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return ct},set:function(it){it=!!it,ct=it}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(St)return St},set:function(it){St=it}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Gr(this.Ff,1)},set:function(it){it?this.Ff=Xr(this.Ff,1):this.Ff=Qr(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Gr(this.Ff,2)},set:function(it){it?this.Ff=Xr(this.Ff,2):this.Ff=Qr(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Gr(this.Ff,3)},set:function(it){it?this.Ff=Xr(this.Ff,3):this.Ff=Qr(this.Ff,3)}});var Nt=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(Nt!==null)return Nt},set:function(it){if([0,1,2].indexOf(it)===-1)throw new Error('Invalid value "'+it+'" for attribute Q supplied.');Nt=it}}),Object.defineProperty(this,"textAlign",{get:function(){var it;switch(Nt){case 0:default:it="left";break;case 1:it="center";break;case 2:it="right"}return it},configurable:!0,enumerable:!0,set:function(it){switch(it){case"right":case 2:Nt=2;break;case"center":case 1:Nt=1;break;default:Nt=0}}})};mt(fn,Yr);var Jn=function(){fn.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var P=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return P},set:function(M){P=M}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return P},set:function(M){P=M}});var k=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return Qt(k,this.objId,this.scope)},set:function(M){var W,Z;Z=[],typeof(W=M)=="string"&&(Z=(function(re,ye,fe){fe||(fe=1);for(var Ae,Le=[];Ae=ye.exec(re);)Le.push(Ae[fe]);return Le})(W,/\((.*?)\)/g)),k=Z}}),this.getOptions=function(){return k},this.setOptions=function(M){k=M,this.sort&&k.sort()},this.addOption=function(M){M=(M=M||"").toString(),k.push(M),this.sort&&k.sort()},this.removeOption=function(M,W){for(W=W||!1,M=(M=M||"").toString();k.indexOf(M)!==-1&&(k.splice(k.indexOf(M),1),W!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Gr(this.Ff,18)},set:function(M){M?this.Ff=Xr(this.Ff,18):this.Ff=Qr(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Gr(this.Ff,19)},set:function(M){this.combo===!0&&(M?this.Ff=Xr(this.Ff,19):this.Ff=Qr(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Gr(this.Ff,20)},set:function(M){M?(this.Ff=Xr(this.Ff,20),k.sort()):this.Ff=Qr(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Gr(this.Ff,22)},set:function(M){M?this.Ff=Xr(this.Ff,22):this.Ff=Qr(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Gr(this.Ff,23)},set:function(M){M?this.Ff=Xr(this.Ff,23):this.Ff=Qr(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Gr(this.Ff,27)},set:function(M){M?this.Ff=Xr(this.Ff,27):this.Ff=Qr(this.Ff,27)}}),this.hasAppearanceStream=!1};mt(Jn,fn);var ln=function(){Jn.call(this),this.fontName="helvetica",this.combo=!1};mt(ln,Jn);var Hr=function(){ln.call(this),this.combo=!0};mt(Hr,ln);var yn=function(){Hr.call(this),this.edit=!0};mt(yn,Hr);var mn=function(){fn.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Gr(this.Ff,15)},set:function(M){M?this.Ff=Xr(this.Ff,15):this.Ff=Qr(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Gr(this.Ff,16)},set:function(M){M?this.Ff=Xr(this.Ff,16):this.Ff=Qr(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Gr(this.Ff,17)},set:function(M){M?this.Ff=Xr(this.Ff,17):this.Ff=Qr(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Gr(this.Ff,26)},set:function(M){M?this.Ff=Xr(this.Ff,26):this.Ff=Qr(this.Ff,26)}});var P,k={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var M=function(re){return re};if(this.scope&&(M=this.scope.internal.getEncryptor(this.objId)),Object.keys(k).length!==0){var W,Z=[];for(W in Z.push("<<"),k)Z.push("/"+W+" ("+rt(M(k[W]))+")");return Z.push(">>"),Z.join(`
`)}},set:function(M){(0,d.default)(M)==="object"&&(k=M)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return k.CA||""},set:function(M){typeof M=="string"&&(k.CA=M)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return P},set:function(M){P=M}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return P.substr(1,P.length-1)},set:function(M){P="/"+M}})};mt(mn,fn);var Mn=function(){mn.call(this),this.pushButton=!0};mt(Mn,mn);var li=function(){mn.call(this),this.radio=!0,this.pushButton=!1;var P=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return P},set:function(k){P=k!==void 0?k:[]}})};mt(li,mn);var Cs=function(){var P,k;fn.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return P},set:function(Z){P=Z}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return k},set:function(Z){k=Z}});var M,W={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var Z=function(fe){return fe};this.scope&&(Z=this.scope.internal.getEncryptor(this.objId));var re,ye=[];for(re in ye.push("<<"),W)ye.push("/"+re+" ("+rt(Z(W[re]))+")");return ye.push(">>"),ye.join(`
`)},set:function(Z){(0,d.default)(Z)==="object"&&(W=Z)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return W.CA||""},set:function(Z){typeof Z=="string"&&(W.CA=Z)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return M},set:function(Z){M=Z}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return M.substr(1,M.length-1)},set:function(Z){M="/"+Z}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=un.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};mt(Cs,fn),li.prototype.setAppearance=function(P){if(!("createAppearanceStream"in P)||!("getCA"in P))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var k in this.Kids)if(this.Kids.hasOwnProperty(k)){var M=this.Kids[k];M.appearanceStreamContent=P.createAppearanceStream(M.optionName),M.caption=P.getCA()}},li.prototype.createOption=function(P){var k=new Cs;return k.Parent=this,k.optionName=P,this.Kids.push(k),as.call(this.scope,k),k};var Ms=function(){mn.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=un.CheckBox.createAppearanceStream()};mt(Ms,mn);var Ns=function(){fn.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Gr(this.Ff,13)},set:function(k){k?this.Ff=Xr(this.Ff,13):this.Ff=Qr(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Gr(this.Ff,21)},set:function(k){k?this.Ff=Xr(this.Ff,21):this.Ff=Qr(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Gr(this.Ff,23)},set:function(k){k?this.Ff=Xr(this.Ff,23):this.Ff=Qr(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Gr(this.Ff,24)},set:function(k){k?this.Ff=Xr(this.Ff,24):this.Ff=Qr(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Gr(this.Ff,25)},set:function(k){k?this.Ff=Xr(this.Ff,25):this.Ff=Qr(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Gr(this.Ff,26)},set:function(k){k?this.Ff=Xr(this.Ff,26):this.Ff=Qr(this.Ff,26)}});var P=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return P},set:function(k){P=k}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return P},set:function(k){Number.isInteger(k)&&(P=k)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};mt(Ns,fn);var ei=function(){Ns.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Gr(this.Ff,14)},set:function(P){P?this.Ff=Xr(this.Ff,14):this.Ff=Qr(this.Ff,14)}}),this.password=!0};mt(ei,Ns);var un={CheckBox:{createAppearanceStream:function(){return{N:{On:un.CheckBox.YesNormal},D:{On:un.CheckBox.YesPushDown,Off:un.CheckBox.OffPushDown}}},YesPushDown:function(P){var k=tr(P);k.scope=P.scope;var M=[],W=P.scope.internal.getFont(P.fontName,P.fontStyle).id,Z=P.scope.__private__.encodeColorString(P.color),re=yi(P,P.caption);return M.push("0.749023 g"),M.push("0 0 "+ke(un.internal.getWidth(P))+" "+ke(un.internal.getHeight(P))+" re"),M.push("f"),M.push("BMC"),M.push("q"),M.push("0 0 1 rg"),M.push("/"+W+" "+ke(re.fontSize)+" Tf "+Z),M.push("BT"),M.push(re.text),M.push("ET"),M.push("Q"),M.push("EMC"),k.stream=M.join(`
`),k},YesNormal:function(P){var k=tr(P);k.scope=P.scope;var M=P.scope.internal.getFont(P.fontName,P.fontStyle).id,W=P.scope.__private__.encodeColorString(P.color),Z=[],re=un.internal.getHeight(P),ye=un.internal.getWidth(P),fe=yi(P,P.caption);return Z.push("1 g"),Z.push("0 0 "+ke(ye)+" "+ke(re)+" re"),Z.push("f"),Z.push("q"),Z.push("0 0 1 rg"),Z.push("0 0 "+ke(ye-1)+" "+ke(re-1)+" re"),Z.push("W"),Z.push("n"),Z.push("0 g"),Z.push("BT"),Z.push("/"+M+" "+ke(fe.fontSize)+" Tf "+W),Z.push(fe.text),Z.push("ET"),Z.push("Q"),k.stream=Z.join(`
`),k},OffPushDown:function(P){var k=tr(P);k.scope=P.scope;var M=[];return M.push("0.749023 g"),M.push("0 0 "+ke(un.internal.getWidth(P))+" "+ke(un.internal.getHeight(P))+" re"),M.push("f"),k.stream=M.join(`
`),k}},RadioButton:{Circle:{createAppearanceStream:function(P){var k={D:{Off:un.RadioButton.Circle.OffPushDown},N:{}};return k.N[P]=un.RadioButton.Circle.YesNormal,k.D[P]=un.RadioButton.Circle.YesPushDown,k},getCA:function(){return"l"},YesNormal:function(P){var k=tr(P);k.scope=P.scope;var M=[],W=un.internal.getWidth(P)<=un.internal.getHeight(P)?un.internal.getWidth(P)/4:un.internal.getHeight(P)/4;W=Number((.9*W).toFixed(5));var Z=un.internal.Bezier_C,re=Number((W*Z).toFixed(5));return M.push("q"),M.push("1 0 0 1 "+Xe(un.internal.getWidth(P)/2)+" "+Xe(un.internal.getHeight(P)/2)+" cm"),M.push(W+" 0 m"),M.push(W+" "+re+" "+re+" "+W+" 0 "+W+" c"),M.push("-"+re+" "+W+" -"+W+" "+re+" -"+W+" 0 c"),M.push("-"+W+" -"+re+" -"+re+" -"+W+" 0 -"+W+" c"),M.push(re+" -"+W+" "+W+" -"+re+" "+W+" 0 c"),M.push("f"),M.push("Q"),k.stream=M.join(`
`),k},YesPushDown:function(P){var k=tr(P);k.scope=P.scope;var M=[],W=un.internal.getWidth(P)<=un.internal.getHeight(P)?un.internal.getWidth(P)/4:un.internal.getHeight(P)/4;W=Number((.9*W).toFixed(5));var Z=Number((2*W).toFixed(5)),re=Number((Z*un.internal.Bezier_C).toFixed(5)),ye=Number((W*un.internal.Bezier_C).toFixed(5));return M.push("0.749023 g"),M.push("q"),M.push("1 0 0 1 "+Xe(un.internal.getWidth(P)/2)+" "+Xe(un.internal.getHeight(P)/2)+" cm"),M.push(Z+" 0 m"),M.push(Z+" "+re+" "+re+" "+Z+" 0 "+Z+" c"),M.push("-"+re+" "+Z+" -"+Z+" "+re+" -"+Z+" 0 c"),M.push("-"+Z+" -"+re+" -"+re+" -"+Z+" 0 -"+Z+" c"),M.push(re+" -"+Z+" "+Z+" -"+re+" "+Z+" 0 c"),M.push("f"),M.push("Q"),M.push("0 g"),M.push("q"),M.push("1 0 0 1 "+Xe(un.internal.getWidth(P)/2)+" "+Xe(un.internal.getHeight(P)/2)+" cm"),M.push(W+" 0 m"),M.push(W+" "+ye+" "+ye+" "+W+" 0 "+W+" c"),M.push("-"+ye+" "+W+" -"+W+" "+ye+" -"+W+" 0 c"),M.push("-"+W+" -"+ye+" -"+ye+" -"+W+" 0 -"+W+" c"),M.push(ye+" -"+W+" "+W+" -"+ye+" "+W+" 0 c"),M.push("f"),M.push("Q"),k.stream=M.join(`
`),k},OffPushDown:function(P){var k=tr(P);k.scope=P.scope;var M=[],W=un.internal.getWidth(P)<=un.internal.getHeight(P)?un.internal.getWidth(P)/4:un.internal.getHeight(P)/4;W=Number((.9*W).toFixed(5));var Z=Number((2*W).toFixed(5)),re=Number((Z*un.internal.Bezier_C).toFixed(5));return M.push("0.749023 g"),M.push("q"),M.push("1 0 0 1 "+Xe(un.internal.getWidth(P)/2)+" "+Xe(un.internal.getHeight(P)/2)+" cm"),M.push(Z+" 0 m"),M.push(Z+" "+re+" "+re+" "+Z+" 0 "+Z+" c"),M.push("-"+re+" "+Z+" -"+Z+" "+re+" -"+Z+" 0 c"),M.push("-"+Z+" -"+re+" -"+re+" -"+Z+" 0 -"+Z+" c"),M.push(re+" -"+Z+" "+Z+" -"+re+" "+Z+" 0 c"),M.push("f"),M.push("Q"),k.stream=M.join(`
`),k}},Cross:{createAppearanceStream:function(P){var k={D:{Off:un.RadioButton.Cross.OffPushDown},N:{}};return k.N[P]=un.RadioButton.Cross.YesNormal,k.D[P]=un.RadioButton.Cross.YesPushDown,k},getCA:function(){return"8"},YesNormal:function(P){var k=tr(P);k.scope=P.scope;var M=[],W=un.internal.calculateCross(P);return M.push("q"),M.push("1 1 "+ke(un.internal.getWidth(P)-2)+" "+ke(un.internal.getHeight(P)-2)+" re"),M.push("W"),M.push("n"),M.push(ke(W.x1.x)+" "+ke(W.x1.y)+" m"),M.push(ke(W.x2.x)+" "+ke(W.x2.y)+" l"),M.push(ke(W.x4.x)+" "+ke(W.x4.y)+" m"),M.push(ke(W.x3.x)+" "+ke(W.x3.y)+" l"),M.push("s"),M.push("Q"),k.stream=M.join(`
`),k},YesPushDown:function(P){var k=tr(P);k.scope=P.scope;var M=un.internal.calculateCross(P),W=[];return W.push("0.749023 g"),W.push("0 0 "+ke(un.internal.getWidth(P))+" "+ke(un.internal.getHeight(P))+" re"),W.push("f"),W.push("q"),W.push("1 1 "+ke(un.internal.getWidth(P)-2)+" "+ke(un.internal.getHeight(P)-2)+" re"),W.push("W"),W.push("n"),W.push(ke(M.x1.x)+" "+ke(M.x1.y)+" m"),W.push(ke(M.x2.x)+" "+ke(M.x2.y)+" l"),W.push(ke(M.x4.x)+" "+ke(M.x4.y)+" m"),W.push(ke(M.x3.x)+" "+ke(M.x3.y)+" l"),W.push("s"),W.push("Q"),k.stream=W.join(`
`),k},OffPushDown:function(P){var k=tr(P);k.scope=P.scope;var M=[];return M.push("0.749023 g"),M.push("0 0 "+ke(un.internal.getWidth(P))+" "+ke(un.internal.getHeight(P))+" re"),M.push("f"),k.stream=M.join(`
`),k}}},createDefaultAppearanceStream:function(P){var k=P.scope.internal.getFont(P.fontName,P.fontStyle).id,M=P.scope.__private__.encodeColorString(P.color);return"/"+k+" "+P.fontSize+" Tf "+M}};un.internal={Bezier_C:.551915024494,calculateCross:function(P){var k=un.internal.getWidth(P),M=un.internal.getHeight(P),W=Math.min(k,M);return{x1:{x:(k-W)/2,y:(M-W)/2+W},x2:{x:(k-W)/2+W,y:(M-W)/2},x3:{x:(k-W)/2,y:(M-W)/2},x4:{x:(k-W)/2+W,y:(M-W)/2+W}}}},un.internal.getWidth=function(P){var k=0;return(0,d.default)(P)==="object"&&(k=Jt(P.Rect[2])),k},un.internal.getHeight=function(P){var k=0;return(0,d.default)(P)==="object"&&(k=Jt(P.Rect[3])),k};var as=Ue.addField=function(P){if(ar(this,P),!(P instanceof fn))throw new Error("Invalid argument passed to jsPDF.addField.");var k;return(k=P).scope.internal.acroformPlugin.printedOut&&(k.scope.internal.acroformPlugin.printedOut=!1,k.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),k.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(k),P.page=P.scope.internal.getCurrentPageInfo().pageNumber,this};Ue.AcroFormChoiceField=Jn,Ue.AcroFormListBox=ln,Ue.AcroFormComboBox=Hr,Ue.AcroFormEditBox=yn,Ue.AcroFormButton=mn,Ue.AcroFormPushButton=Mn,Ue.AcroFormRadioButton=li,Ue.AcroFormCheckBox=Ms,Ue.AcroFormTextField=Ns,Ue.AcroFormPasswordField=ei,Ue.AcroFormAppearance=un,Ue.AcroForm={ChoiceField:Jn,ListBox:ln,ComboBox:Hr,EditBox:yn,Button:mn,PushButton:Mn,RadioButton:li,CheckBox:Ms,TextField:Ns,PasswordField:ei,Appearance:un},et.AcroForm={ChoiceField:Jn,ListBox:ln,ComboBox:Hr,EditBox:yn,Button:mn,PushButton:Mn,RadioButton:li,CheckBox:Ms,TextField:Ns,PasswordField:ei,Appearance:un};var ta=et.AcroForm;function jn(P){return P.reduce(function(k,M,W){return k[M]=W,k},{})}(function(P){var k="addImage_";P.__addimage__={};var M="UNKNOWN",W={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},Z=P.__addimage__.getImageFileTypeByImageData=function(lt,vt){var Rt,Dt,vr,kr,Rr,ur=M;if((vt=vt||M)==="RGBA"||lt.data!==void 0&&lt.data instanceof Uint8ClampedArray&&"height"in lt&&"width"in lt)return"RGBA";if(Vt(lt))for(Rr in W)for(vr=W[Rr],Rt=0;Rt<vr.length;Rt+=1){for(kr=!0,Dt=0;Dt<vr[Rt].length;Dt+=1)if(vr[Rt][Dt]!==void 0&&vr[Rt][Dt]!==lt[Dt]){kr=!1;break}if(kr===!0){ur=Rr;break}}else for(Rr in W)for(vr=W[Rr],Rt=0;Rt<vr.length;Rt+=1){for(kr=!0,Dt=0;Dt<vr[Rt].length;Dt+=1)if(vr[Rt][Dt]!==void 0&&vr[Rt][Dt]!==lt.charCodeAt(Dt)){kr=!1;break}if(kr===!0){ur=Rr;break}}return ur===M&&vt!==M&&(ur=vt),ur},re=function lt(vt){for(var Rt=this.internal.write,Dt=this.internal.putStream,vr=(0,this.internal.getFilters)();vr.indexOf("FlateEncode")!==-1;)vr.splice(vr.indexOf("FlateEncode"),1);vt.objectId=this.internal.newObject();var kr=[];if(kr.push({key:"Type",value:"/XObject"}),kr.push({key:"Subtype",value:"/Image"}),kr.push({key:"Width",value:vt.width}),kr.push({key:"Height",value:vt.height}),vt.colorSpace===it.INDEXED?kr.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(vt.palette.length/3-1)+" "+("sMask"in vt&&vt.sMask!==void 0?vt.objectId+2:vt.objectId+1)+" 0 R]"}):(kr.push({key:"ColorSpace",value:"/"+vt.colorSpace}),vt.colorSpace===it.DEVICE_CMYK&&kr.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),kr.push({key:"BitsPerComponent",value:vt.bitsPerComponent}),"decodeParameters"in vt&&vt.decodeParameters!==void 0&&kr.push({key:"DecodeParms",value:"<<"+vt.decodeParameters+">>"}),"transparency"in vt&&Array.isArray(vt.transparency)&&vt.transparency.length>0){for(var Rr="",ur=0,Or=vt.transparency.length;ur<Or;ur++)Rr+=vt.transparency[ur]+" "+vt.transparency[ur]+" ";kr.push({key:"Mask",value:"["+Rr+"]"})}vt.sMask!==void 0&&kr.push({key:"SMask",value:vt.objectId+1+" 0 R"});var pn=vt.filter!==void 0?["/"+vt.filter]:void 0;if(Dt({data:vt.data,additionalKeyValues:kr,alreadyAppliedFilters:pn,objectId:vt.objectId}),Rt("endobj"),"sMask"in vt&&vt.sMask!==void 0){var on,Ye=(on=vt.sMaskBitsPerComponent)!==null&&on!==void 0?on:vt.bitsPerComponent,Tt={width:vt.width,height:vt.height,colorSpace:"DeviceGray",bitsPerComponent:Ye,data:vt.sMask};"filter"in vt&&(Tt.decodeParameters="/Predictor ".concat(vt.predictor," /Colors 1 /BitsPerComponent ").concat(Ye," /Columns ").concat(vt.width),Tt.filter=vt.filter),lt.call(this,Tt)}if(vt.colorSpace===it.INDEXED){var Lt=this.internal.newObject();Dt({data:or(new Uint8Array(vt.palette)),objectId:Lt}),Rt("endobj")}},ye=function(){var lt=this.internal.collections[k+"images"];for(var vt in lt)re.call(this,lt[vt])},fe=function(){var lt,vt=this.internal.collections[k+"images"],Rt=this.internal.write;for(var Dt in vt)Rt("/I"+(lt=vt[Dt]).index,lt.objectId,"0","R")},Ae=function(){this.internal.collections[k+"images"]||(this.internal.collections[k+"images"]={},this.internal.events.subscribe("putResources",ye),this.internal.events.subscribe("putXobjectDict",fe))},Le=function(){var lt=this.internal.collections[k+"images"];return Ae.call(this),lt},Ve=function(){return Object.keys(this.internal.collections[k+"images"]).length},Ze=function(lt){return typeof P["process"+lt.toUpperCase()]=="function"},dt=function(lt){return(0,d.default)(lt)==="object"&&lt.nodeType===1},je=function(lt,vt){if(lt.nodeName==="IMG"&&lt.hasAttribute("src")){var Rt=""+lt.getAttribute("src");if(Rt.indexOf("data:image/")===0)return I(unescape(Rt).split("base64,").pop());var Dt=P.loadFile(Rt,!0);if(Dt!==void 0)return Dt}if(lt.nodeName==="CANVAS"){if(lt.width===0||lt.height===0)throw new Error("Given canvas must have data. Canvas width: "+lt.width+", height: "+lt.height);var vr;switch(vt){case"PNG":vr="image/png";break;case"WEBP":vr="image/webp";break;default:vr="image/jpeg"}return I(lt.toDataURL(vr,1).split("base64,").pop())}},St=function(lt){var vt=this.internal.collections[k+"images"];if(vt){for(var Rt in vt)if(lt===vt[Rt].alias)return vt[Rt]}},ct=function(lt,vt,Rt){return lt||vt||(lt=-96,vt=-96),lt<0&&(lt=-1*Rt.width*72/lt/this.internal.scaleFactor),vt<0&&(vt=-1*Rt.height*72/vt/this.internal.scaleFactor),lt===0&&(lt=vt*Rt.width/Rt.height),vt===0&&(vt=lt*Rt.height/Rt.width),[lt,vt]},Nt=function(lt,vt,Rt,Dt,vr,kr){var Rr=ct.call(this,Rt,Dt,vr),ur=this.internal.getCoordinateString,Or=this.internal.getVerticalCoordinateString,pn=Le.call(this);if(Rt=Rr[0],Dt=Rr[1],pn[vr.index]=vr,kr){kr*=Math.PI/180;var on=Math.cos(kr),Ye=Math.sin(kr),Tt=function(Wt){return Wt.toFixed(4)},Lt=[Tt(on),Tt(Ye),Tt(-1*Ye),Tt(on),0,0,"cm"]}this.internal.write("q"),kr?(this.internal.write([1,"0","0",1,ur(lt),Or(vt+Dt),"cm"].join(" ")),this.internal.write(Lt.join(" ")),this.internal.write([ur(Rt),"0","0",ur(Dt),"0","0","cm"].join(" "))):this.internal.write([ur(Rt),"0","0",ur(Dt),ur(lt),Or(vt+Dt),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+vr.index+" Do"),this.internal.write("Q")},it=P.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};P.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var Ot=P.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},qt=P.__addimage__.sHashCode=function(lt){var vt,Rt,Dt=0;if(typeof lt=="string")for(Rt=lt.length,vt=0;vt<Rt;vt++)Dt=(Dt<<5)-Dt+lt.charCodeAt(vt),Dt|=0;else if(Vt(lt))for(Rt=lt.byteLength/2,vt=0;vt<Rt;vt++)Dt=(Dt<<5)-Dt+lt[vt],Dt|=0;return Dt},It=P.__addimage__.validateStringAsBase64=function(lt){(lt=lt||"").toString().trim();var vt=!0;return lt.length===0&&(vt=!1),lt.length%4!=0&&(vt=!1),/^[A-Za-z0-9+/]+$/.test(lt.substr(0,lt.length-2))===!1&&(vt=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(lt.substr(-2))===!1&&(vt=!1),vt},nt=P.__addimage__.extractImageFromDataUrl=function(lt){if(lt==null||!(lt=lt.trim()).startsWith("data:"))return null;var vt=lt.indexOf(",");return vt<0?null:lt.substring(0,vt).trim().endsWith("base64")?lt.substring(vt+1):null};P.__addimage__.isArrayBuffer=function(lt){return lt instanceof ArrayBuffer};var Vt=P.__addimage__.isArrayBufferView=function(lt){return lt instanceof Int8Array||lt instanceof Uint8Array||lt instanceof Uint8ClampedArray||lt instanceof Int16Array||lt instanceof Uint16Array||lt instanceof Int32Array||lt instanceof Uint32Array||lt instanceof Float32Array||lt instanceof Float64Array},Tr=P.__addimage__.binaryStringToUint8Array=function(lt){for(var vt=lt.length,Rt=new Uint8Array(vt),Dt=0;Dt<vt;Dt++)Rt[Dt]=lt.charCodeAt(Dt);return Rt},or=P.__addimage__.arrayBufferToBinaryString=function(lt){for(var vt="",Rt=Vt(lt)?lt:new Uint8Array(lt),Dt=0;Dt<Rt.length;Dt+=8192)vt+=String.fromCharCode.apply(null,Rt.subarray(Dt,Dt+8192));return vt};P.addImage=function(){var lt,vt,Rt,Dt,vr,kr,Rr,ur,Or;if(typeof arguments[1]=="number"?(vt=M,Rt=arguments[1],Dt=arguments[2],vr=arguments[3],kr=arguments[4],Rr=arguments[5],ur=arguments[6],Or=arguments[7]):(vt=arguments[1],Rt=arguments[2],Dt=arguments[3],vr=arguments[4],kr=arguments[5],Rr=arguments[6],ur=arguments[7],Or=arguments[8]),(0,d.default)(lt=arguments[0])==="object"&&!dt(lt)&&"imageData"in lt){var pn=lt;lt=pn.imageData,vt=pn.format||vt||M,Rt=pn.x||Rt||0,Dt=pn.y||Dt||0,vr=pn.w||pn.width||vr,kr=pn.h||pn.height||kr,Rr=pn.alias||Rr,ur=pn.compression||ur,Or=pn.rotation||pn.angle||Or}var on=this.internal.getFilters();if(ur===void 0&&on.indexOf("FlateEncode")!==-1&&(ur="SLOW"),isNaN(Rt)||isNaN(Dt))throw new Error("Invalid coordinates passed to jsPDF.addImage");Ae.call(this);var Ye=Mt.call(this,lt,vt,Rr,ur);return Nt.call(this,Rt,Dt,vr,kr,Ye,Or),this};var Mt=function(lt,vt,Rt,Dt){var vr,kr,Rr;if(typeof lt=="string"&&Z(lt)===M){lt=unescape(lt);var ur=_r(lt,!1);(ur!==""||(ur=P.loadFile(lt,!0))!==void 0)&&(lt=ur)}if(dt(lt)&&(lt=je(lt,vt)),vt=Z(lt,vt),!Ze(vt))throw new Error("addImage does not support files of type '"+vt+"', please ensure that a plugin for '"+vt+"' support is added.");if(((Rr=Rt)==null||Rr.length===0)&&(Rt=(function(Or){return typeof Or=="string"||Vt(Or)?qt(Or):Vt(Or.data)?qt(Or.data):null})(lt)),(vr=St.call(this,Rt))||(lt instanceof Uint8Array||vt==="RGBA"||(kr=lt,lt=Tr(lt)),vr=this["process"+vt.toUpperCase()](lt,Ve.call(this),Rt,(function(Or){return Or&&typeof Or=="string"&&(Or=Or.toUpperCase()),Or in P.image_compression?Or:Ot.NONE})(Dt),kr)),!vr)throw new Error("An unknown error occurred whilst processing the image.");return vr},_r=P.__addimage__.convertBase64ToBinaryString=function(lt,vt){vt=typeof vt!="boolean"||vt;var Rt,Dt="";if(typeof lt=="string"){var vr;Rt=(vr=nt(lt))!==null&&vr!==void 0?vr:lt;try{Dt=I(Rt)}catch(kr){if(vt)throw It(Rt)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+kr.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return Dt};P.getImageProperties=function(lt){var vt,Rt,Dt="";if(dt(lt)&&(lt=je(lt)),typeof lt=="string"&&Z(lt)===M&&((Dt=_r(lt,!1))===""&&(Dt=P.loadFile(lt)||""),lt=Dt),Rt=Z(lt),!Ze(Rt))throw new Error("addImage does not support files of type '"+Rt+"', please ensure that a plugin for '"+Rt+"' support is added.");if(lt instanceof Uint8Array||(lt=Tr(lt)),!(vt=this["process"+Rt.toUpperCase()](lt)))throw new Error("An unknown error occurred whilst processing the image");return vt.fileType=Rt,vt}})(et.API),(function(P){var k=function(M){if(M!==void 0&&M!="")return!0};et.API.events.push(["addPage",function(M){this.internal.getPageInfo(M.pageNumber).pageContext.annotations=[]}]),P.events.push(["putPage",function(M){for(var W,Z,re,ye=this.internal.getCoordinateString,fe=this.internal.getVerticalCoordinateString,Ae=this.internal.getPageInfoByObjId(M.objId),Le=M.pageContext.annotations,Ve=!1,Ze=0;Ze<Le.length&&!Ve;Ze++)switch((W=Le[Ze]).type){case"link":(k(W.options.url)||k(W.options.pageNumber))&&(Ve=!0);break;case"reference":case"text":case"freetext":Ve=!0}if(Ve!=0){this.internal.write("/Annots [");for(var dt=0;dt<Le.length;dt++){W=Le[dt];var je=this.internal.pdfEscape,St=this.internal.getEncryptor(M.objId);switch(W.type){case"reference":this.internal.write(" "+W.object.objId+" 0 R ");break;case"text":var ct=this.internal.newAdditionalObject(),Nt=this.internal.newAdditionalObject(),it=this.internal.getEncryptor(ct.objId),Ot=W.title||"Note";re="<</Type /Annot /Subtype /Text "+(Z="/Rect ["+ye(W.bounds.x)+" "+fe(W.bounds.y+W.bounds.h)+" "+ye(W.bounds.x+W.bounds.w)+" "+fe(W.bounds.y)+"] ")+"/Contents ("+je(it(W.contents))+")",re+=" /Popup "+Nt.objId+" 0 R",re+=" /P "+Ae.objId+" 0 R",re+=" /T ("+je(it(Ot))+") >>",ct.content=re;var qt=ct.objId+" 0 R";re="<</Type /Annot /Subtype /Popup "+(Z="/Rect ["+ye(W.bounds.x+30)+" "+fe(W.bounds.y+W.bounds.h)+" "+ye(W.bounds.x+W.bounds.w+30)+" "+fe(W.bounds.y)+"] ")+" /Parent "+qt,W.open&&(re+=" /Open true"),re+=" >>",Nt.content=re,this.internal.write(ct.objId,"0 R",Nt.objId,"0 R");break;case"freetext":Z="/Rect ["+ye(W.bounds.x)+" "+fe(W.bounds.y)+" "+ye(W.bounds.x+W.bounds.w)+" "+fe(W.bounds.y+W.bounds.h)+"] ";var It=W.color||"#000000";re="<</Type /Annot /Subtype /FreeText "+Z+"/Contents ("+je(St(W.contents))+")",re+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+It+")",re+=" /Border [0 0 0]",re+=" >>",this.internal.write(re);break;case"link":if(W.options.name){var nt=this.annotations._nameMap[W.options.name];W.options.pageNumber=nt.page,W.options.top=nt.y}else W.options.top||(W.options.top=0);if(Z="/Rect ["+W.finalBounds.x+" "+W.finalBounds.y+" "+W.finalBounds.w+" "+W.finalBounds.h+"] ",re="",W.options.url)re="<</Type /Annot /Subtype /Link "+Z+"/Border [0 0 0] /A <</S /URI /URI ("+je(St(W.options.url))+") >>";else if(W.options.pageNumber)switch(re="<</Type /Annot /Subtype /Link "+Z+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(W.options.pageNumber).objId+" 0 R",W.options.magFactor=W.options.magFactor||"XYZ",W.options.magFactor){case"Fit":re+=" /Fit]";break;case"FitH":re+=" /FitH "+W.options.top+"]";break;case"FitV":W.options.left=W.options.left||0,re+=" /FitV "+W.options.left+"]";break;default:var Vt=fe(W.options.top);W.options.left=W.options.left||0,W.options.zoom===void 0&&(W.options.zoom=0),re+=" /XYZ "+W.options.left+" "+Vt+" "+W.options.zoom+"]"}re!=""&&(re+=" >>",this.internal.write(re))}}this.internal.write("]")}}]),P.createAnnotation=function(M){var W=this.internal.getCurrentPageInfo();switch(M.type){case"link":this.link(M.bounds.x,M.bounds.y,M.bounds.w,M.bounds.h,M);break;case"text":case"freetext":W.pageContext.annotations.push(M)}},P.link=function(M,W,Z,re,ye){var fe=this.internal.getCurrentPageInfo(),Ae=this.internal.getCoordinateString,Le=this.internal.getVerticalCoordinateString;fe.pageContext.annotations.push({finalBounds:{x:Ae(M),y:Le(W),w:Ae(M+Z),h:Le(W+re)},options:ye,type:"link"})},P.textWithLink=function(M,W,Z,re){var ye,fe,Ae=this.getTextWidth(M),Le=this.internal.getLineHeight()/this.internal.scaleFactor;if(re.maxWidth!==void 0){fe=re.maxWidth;var Ve=this.splitTextToSize(M,fe).length;ye=Math.ceil(Le*Ve)}else fe=Ae,ye=Le;return this.text(M,W,Z,re),Z+=.2*Le,re.align==="center"&&(W-=Ae/2),re.align==="right"&&(W-=Ae),this.link(W,Z-Le,fe,ye,re),Ae},P.getTextWidth=function(M){var W=this.internal.getFontSize();return this.getStringUnitWidth(M)*W/this.internal.scaleFactor}})(et.API),(function(P){var k={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},M={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},W={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},Z=[1570,1571,1573,1575];P.__arabicParser__={};var re=P.__arabicParser__.isInArabicSubstitutionA=function(ct){return k[ct.charCodeAt(0)]!==void 0},ye=P.__arabicParser__.isArabicLetter=function(ct){return typeof ct=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(ct)},fe=P.__arabicParser__.isArabicEndLetter=function(ct){return ye(ct)&&re(ct)&&k[ct.charCodeAt(0)].length<=2},Ae=P.__arabicParser__.isArabicAlfLetter=function(ct){return ye(ct)&&Z.indexOf(ct.charCodeAt(0))>=0};P.__arabicParser__.arabicLetterHasIsolatedForm=function(ct){return ye(ct)&&re(ct)&&k[ct.charCodeAt(0)].length>=1};var Le=P.__arabicParser__.arabicLetterHasFinalForm=function(ct){return ye(ct)&&re(ct)&&k[ct.charCodeAt(0)].length>=2};P.__arabicParser__.arabicLetterHasInitialForm=function(ct){return ye(ct)&&re(ct)&&k[ct.charCodeAt(0)].length>=3};var Ve=P.__arabicParser__.arabicLetterHasMedialForm=function(ct){return ye(ct)&&re(ct)&&k[ct.charCodeAt(0)].length==4},Ze=P.__arabicParser__.resolveLigatures=function(ct){var Nt=0,it=M,Ot="",qt=0;for(Nt=0;Nt<ct.length;Nt+=1)it[ct.charCodeAt(Nt)]!==void 0?(qt++,typeof(it=it[ct.charCodeAt(Nt)])=="number"&&(Ot+=String.fromCharCode(it),it=M,qt=0),Nt===ct.length-1&&(it=M,Ot+=ct.charAt(Nt-(qt-1)),Nt-=qt-1,qt=0)):(it=M,Ot+=ct.charAt(Nt-qt),Nt-=qt,qt=0);return Ot};P.__arabicParser__.isArabicDiacritic=function(ct){return ct!==void 0&&W[ct.charCodeAt(0)]!==void 0};var dt=P.__arabicParser__.getCorrectForm=function(ct,Nt,it){return ye(ct)?re(ct)===!1?-1:!Le(ct)||!ye(Nt)&&!ye(it)||!ye(it)&&fe(Nt)||fe(ct)&&!ye(Nt)||fe(ct)&&Ae(Nt)||fe(ct)&&fe(Nt)?0:Ve(ct)&&ye(Nt)&&!fe(Nt)&&ye(it)&&Le(it)?3:fe(ct)||!ye(it)?1:2:-1},je=function(ct){var Nt=0,it=0,Ot=0,qt="",It="",nt="",Vt=(ct=ct||"").split("\\s+"),Tr=[];for(Nt=0;Nt<Vt.length;Nt+=1){for(Tr.push(""),it=0;it<Vt[Nt].length;it+=1)qt=Vt[Nt][it],It=Vt[Nt][it-1],nt=Vt[Nt][it+1],ye(qt)?(Ot=dt(qt,It,nt),Tr[Nt]+=Ot!==-1?String.fromCharCode(k[qt.charCodeAt(0)][Ot]):qt):Tr[Nt]+=qt;Tr[Nt]=Ze(Tr[Nt])}return Tr.join(" ")},St=P.__arabicParser__.processArabic=P.processArabic=function(){var ct,Nt=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,it=[];if(Array.isArray(Nt)){var Ot=0;for(it=[],Ot=0;Ot<Nt.length;Ot+=1)Array.isArray(Nt[Ot])?it.push([je(Nt[Ot][0]),Nt[Ot][1],Nt[Ot][2]]):it.push([je(Nt[Ot])]);ct=it}else ct=je(Nt);return typeof arguments[0]=="string"?ct:(arguments[0].text=ct,arguments[0])};P.events.push(["preProcessText",St])})(et.API),et.API.autoPrint=function(P){var k;return(P=P||{}).variant=P.variant||"non-conform",P.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){k=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+k+" 0 R")})),this},(function(P){var k=function(){var M=void 0;Object.defineProperty(this,"pdf",{get:function(){return M},set:function(fe){M=fe}});var W=150;Object.defineProperty(this,"width",{get:function(){return W},set:function(fe){W=isNaN(fe)||Number.isInteger(fe)===!1||fe<0?150:fe,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=W+1)}});var Z=300;Object.defineProperty(this,"height",{get:function(){return Z},set:function(fe){Z=isNaN(fe)||Number.isInteger(fe)===!1||fe<0?300:fe,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=Z+1)}});var re=[];Object.defineProperty(this,"childNodes",{get:function(){return re},set:function(fe){re=fe}});var ye={};Object.defineProperty(this,"style",{get:function(){return ye},set:function(fe){ye=fe}}),Object.defineProperty(this,"parentNode",{})};k.prototype.getContext=function(M,W){var Z;if((M=M||"2d")!=="2d")return null;for(Z in W)this.pdf.context2d.hasOwnProperty(Z)&&(this.pdf.context2d[Z]=W[Z]);return this.pdf.context2d._canvas=this,this.pdf.context2d},k.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},P.events.push(["initialized",function(){this.canvas=new k,this.canvas.pdf=this}])})(et.API),(function(P){var k={left:0,top:0,bottom:0,right:0},M=!1,W=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},k),this.internal.__cell__.margins.width=this.getPageWidth(),Z.call(this))},Z=function(){this.internal.__cell__.lastCell=new re,this.internal.__cell__.pages=1},re=function(){var Ae=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Ae},set:function(ct){Ae=ct}});var Le=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Le},set:function(ct){Le=ct}});var Ve=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return Ve},set:function(ct){Ve=ct}});var Ze=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return Ze},set:function(ct){Ze=ct}});var dt=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return dt},set:function(ct){dt=ct}});var je=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return je},set:function(ct){je=ct}});var St=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return St},set:function(ct){St=ct}}),this};re.prototype.clone=function(){return new re(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},re.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},P.setHeaderFunction=function(Ae){return W.call(this),this.internal.__cell__.headerFunction=typeof Ae=="function"?Ae:void 0,this},P.getTextDimensions=function(Ae,Le){W.call(this);var Ve=(Le=Le||{}).fontSize||this.getFontSize(),Ze=Le.font||this.getFont(),dt=Le.scaleFactor||this.internal.scaleFactor,je=0,St=0,ct=0,Nt=this;if(!Array.isArray(Ae)&&typeof Ae!="string"){if(typeof Ae!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");Ae=String(Ae)}var it=Le.maxWidth;it>0?typeof Ae=="string"?Ae=this.splitTextToSize(Ae,it):Object.prototype.toString.call(Ae)==="[object Array]"&&(Ae=Ae.reduce(function(qt,It){return qt.concat(Nt.splitTextToSize(It,it))},[])):Ae=Array.isArray(Ae)?Ae:[Ae];for(var Ot=0;Ot<Ae.length;Ot++)je<(ct=this.getStringUnitWidth(Ae[Ot],{font:Ze})*Ve)&&(je=ct);return je!==0&&(St=Ae.length),{w:je/=dt,h:Math.max((St*Ve*this.getLineHeightFactor()-Ve*(this.getLineHeightFactor()-1))/dt,0)}},P.cellAddPage=function(){W.call(this),this.addPage();var Ae=this.internal.__cell__.margins||k;return this.internal.__cell__.lastCell=new re(Ae.left,Ae.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var ye=P.cell=function(){var Ae;Ae=arguments[0]instanceof re?arguments[0]:new re(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),W.call(this);var Le=this.internal.__cell__.lastCell,Ve=this.internal.__cell__.padding,Ze=this.internal.__cell__.margins||k,dt=this.internal.__cell__.tableHeaderRow,je=this.internal.__cell__.printHeaders;return Le.lineNumber!==void 0&&(Le.lineNumber===Ae.lineNumber?(Ae.x=(Le.x||0)+(Le.width||0),Ae.y=Le.y||0):Le.y+Le.height+Ae.height+Ze.bottom>this.getPageHeight()?(this.cellAddPage(),Ae.y=Ze.top,je&&dt&&(this.printHeaderRow(Ae.lineNumber,!0),Ae.y+=dt[0].height)):Ae.y=Le.y+Le.height||Ae.y),Ae.text[0]!==void 0&&(this.rect(Ae.x,Ae.y,Ae.width,Ae.height,M===!0?"FD":void 0),Ae.align==="right"?this.text(Ae.text,Ae.x+Ae.width-Ve,Ae.y+Ve,{align:"right",baseline:"top"}):Ae.align==="center"?this.text(Ae.text,Ae.x+Ae.width/2,Ae.y+Ve,{align:"center",baseline:"top",maxWidth:Ae.width-Ve-Ve}):this.text(Ae.text,Ae.x+Ve,Ae.y+Ve,{align:"left",baseline:"top",maxWidth:Ae.width-Ve-Ve})),this.internal.__cell__.lastCell=Ae,this};P.table=function(Ae,Le,Ve,Ze,dt){if(W.call(this),!Ve)throw new Error("No data for PDF table.");var je,St,ct,Nt,it=[],Ot=[],qt=[],It={},nt={},Vt=[],Tr=[],or=(dt=dt||{}).autoSize||!1,Mt=dt.printHeaders!==!1,_r=dt.css&&dt.css["font-size"]!==void 0?16*dt.css["font-size"]:dt.fontSize||12,lt=dt.margins||Object.assign({width:this.getPageWidth()},k),vt=typeof dt.padding=="number"?dt.padding:3,Rt=dt.headerBackgroundColor||"#c8c8c8",Dt=dt.headerTextColor||"#000";if(Z.call(this),this.internal.__cell__.printHeaders=Mt,this.internal.__cell__.margins=lt,this.internal.__cell__.table_font_size=_r,this.internal.__cell__.padding=vt,this.internal.__cell__.headerBackgroundColor=Rt,this.internal.__cell__.headerTextColor=Dt,this.setFontSize(_r),Ze==null)Ot=it=Object.keys(Ve[0]),qt=it.map(function(){return"left"});else if(Array.isArray(Ze)&&(0,d.default)(Ze[0])==="object")for(it=Ze.map(function(pn){return pn.name}),Ot=Ze.map(function(pn){return pn.prompt||pn.name||""}),qt=Ze.map(function(pn){return pn.align||"left"}),je=0;je<Ze.length;je+=1)nt[Ze[je].name]=.7499990551181103*Ze[je].width;else Array.isArray(Ze)&&typeof Ze[0]=="string"&&(Ot=it=Ze,qt=it.map(function(){return"left"}));if(or||Array.isArray(Ze)&&typeof Ze[0]=="string")for(je=0;je<it.length;je+=1){for(It[Nt=it[je]]=Ve.map(function(pn){return pn[Nt]}),this.setFont(void 0,"bold"),Vt.push(this.getTextDimensions(Ot[je],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),St=It[Nt],this.setFont(void 0,"normal"),ct=0;ct<St.length;ct+=1)Vt.push(this.getTextDimensions(St[ct],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);nt[Nt]=Math.max.apply(null,Vt)+vt+vt,Vt=[]}if(Mt){var vr={};for(je=0;je<it.length;je+=1)vr[it[je]]={},vr[it[je]].text=Ot[je],vr[it[je]].align=qt[je];var kr=fe.call(this,vr,nt);Tr=it.map(function(pn){return new re(Ae,Le,nt[pn],kr,vr[pn].text,void 0,vr[pn].align)}),this.setTableHeaderRow(Tr),this.printHeaderRow(1,!1)}var Rr=Ze.reduce(function(pn,on){return pn[on.name]=on.align,pn},{});for(je=0;je<Ve.length;je+=1){"rowStart"in dt&&dt.rowStart instanceof Function&&dt.rowStart({row:je,data:Ve[je]},this);var ur=fe.call(this,Ve[je],nt);for(ct=0;ct<it.length;ct+=1){var Or=Ve[je][it[ct]];"cellStart"in dt&&dt.cellStart instanceof Function&&dt.cellStart({row:je,col:ct,data:Or},this),ye.call(this,new re(Ae,Le,nt[it[ct]],ur,Or,je+2,Rr[it[ct]]))}}return this.internal.__cell__.table_x=Ae,this.internal.__cell__.table_y=Le,this};var fe=function(Ae,Le){var Ve=this.internal.__cell__.padding,Ze=this.internal.__cell__.table_font_size,dt=this.internal.scaleFactor;return Object.keys(Ae).map(function(je){var St=Ae[je];return this.splitTextToSize(St.hasOwnProperty("text")?St.text:St,Le[je]-Ve-Ve)},this).map(function(je){return this.getLineHeightFactor()*je.length*Ze/dt+Ve+Ve},this).reduce(function(je,St){return Math.max(je,St)},0)};P.setTableHeaderRow=function(Ae){W.call(this),this.internal.__cell__.tableHeaderRow=Ae},P.printHeaderRow=function(Ae,Le){if(W.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var Ve;if(M=!0,typeof this.internal.__cell__.headerFunction=="function"){var Ze=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new re(Ze[0],Ze[1],Ze[2],Ze[3],void 0,-1)}this.setFont(void 0,"bold");for(var dt=[],je=0;je<this.internal.__cell__.tableHeaderRow.length;je+=1){Ve=this.internal.__cell__.tableHeaderRow[je].clone(),Le&&(Ve.y=this.internal.__cell__.margins.top||0,dt.push(Ve)),Ve.lineNumber=Ae;var St=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),ye.call(this,Ve),this.setTextColor(St)}dt.length>0&&this.setTableHeaderRow(dt),this.setFont(void 0,"normal"),M=!1}})(et.API);var Nn={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Fs=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Qs=jn(Fs),Us=[100,200,300,400,500,600,700,800,900],ns=jn(Us);function qs(P){var k=P.family.replace(/"|'/g,"").toLowerCase(),M=(function(re){return Nn[re=re||"normal"]?re:"normal"})(P.style),W=(function(re){return re?typeof re=="number"?re>=100&&re<=900&&re%100==0?re:400:/^\d00$/.test(re)?parseInt(re):re==="bold"?700:400:400})(P.weight),Z=(function(re){return typeof Qs[re=re||"normal"]=="number"?re:"normal"})(P.stretch);return{family:k,style:M,weight:W,stretch:Z,src:P.src||[],ref:P.ref||{name:k,style:[Z,M,W].join(" ")}}}function Rs(P,k,M,W){var Z;for(Z=M;Z>=0&&Z<k.length;Z+=W)if(P[k[Z]])return P[k[Z]];for(Z=M;Z>=0&&Z<k.length;Z-=W)if(P[k[Z]])return P[k[Z]]}var za={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},hs={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function wu(P){return[P.stretch,P.style,P.weight,P.family].join(" ")}function ro(P){return P.trimLeft()}function Fl(P,k){for(var M=0;M<P.length;){if(P.charAt(M)===k)return[P.substring(0,M),P.substring(M+1)];M+=1}return null}function nu(P){var k=P.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return k===null?null:[k[0],P.substring(k[0].length)]}var pl,ra,qa,Ws,wa,$s,Ll,go,no=["times"];function gl(P,k,M,W,Z){var re=4,ye=zs;switch(Z){case et.API.image_compression.FAST:re=1,ye=mc;break;case et.API.image_compression.MEDIUM:re=6,ye=ci;break;case et.API.image_compression.SLOW:re=9,ye=ks}P=(function(Ae,Le,Ve,Ze){for(var dt,je=Ae.length/Le,St=new Uint8Array(Ae.length+je),ct=[Ul,mc,zs,ci,ks],Nt=0;Nt<je;Nt+=1){var it=Nt*Le,Ot=Ae.subarray(it,it+Le);if(Ze)St.set(Ze(Ot,Ve,dt),it+Nt);else{for(var qt=ct.length,It=[],nt=0;nt<qt;nt+=1)It[nt]=ct[nt](Ot,Ve,dt);var Vt=Va(It.concat());St.set(It[Vt],it+Nt)}dt=Ot}return St})(P,k,Math.ceil(M*W/8),ye);var fe=(0,f.zlibSync)(P,{level:re});return et.API.__addimage__.arrayBufferToBinaryString(fe)}function Ul(P){var k=Array.apply([],P);return k.unshift(0),k}function mc(P,k){var M=P.length,W=[];W[0]=1;for(var Z=0;Z<M;Z+=1){var re=P[Z-k]||0;W[Z+1]=P[Z]-re+256&255}return W}function zs(P,k,M){var W=P.length,Z=[];Z[0]=2;for(var re=0;re<W;re+=1){var ye=M&&M[re]||0;Z[re+1]=P[re]-ye+256&255}return Z}function ci(P,k,M){var W=P.length,Z=[];Z[0]=3;for(var re=0;re<W;re+=1){var ye=P[re-k]||0,fe=M&&M[re]||0;Z[re+1]=P[re]+256-(ye+fe>>>1)&255}return Z}function ks(P,k,M){var W=P.length,Z=[];Z[0]=4;for(var re=0;re<W;re+=1){var ye=Ta(P[re-k]||0,M&&M[re]||0,M&&M[re-k]||0);Z[re+1]=P[re]-ye+256&255}return Z}function Ta(P,k,M){if(P===k&&k===M)return P;var W=Math.abs(k-M),Z=Math.abs(P-M),re=Math.abs(P+k-M-M);return W<=Z&&W<=re?P:Z<=re?k:M}function Va(P){var k=P.map(function(M){return M.reduce(function(W,Z){return W+Math.abs(Z)},0)});return k.indexOf(Math.min.apply(null,k))}function Ca(P,k,M){var W=k*M,Z=Math.floor(W/8),re=16-(W-8*Z+M),ye=(1<<M)-1;return Zn(P,Z)>>re&ye}function gi(P,k,M,W){var Z=M*W,re=Math.floor(Z/8),ye=16-(Z-8*re+W),fe=(1<<W)-1,Ae=(k&fe)<<ye;(function(Le,Ve,Ze){if(Ve+1<Le.byteLength)Le.setUint16(Ve,Ze,!1);else{var dt=Ze>>8&255;Le.setUint8(Ve,dt)}})(P,re,Zn(P,re)&~(fe<<ye)&65535|Ae)}function Zn(P,k){return k+1<P.byteLength?P.getUint16(k,!1):P.getUint8(k)<<8}function fs(P){var k=0;if(P[k++]!==71||P[k++]!==73||P[k++]!==70||P[k++]!==56||(P[k++]+1&253)!=56||P[k++]!==97)throw new Error("Invalid GIF 87a/89a header.");var M=P[k++]|P[k++]<<8,W=P[k++]|P[k++]<<8,Z=P[k++],re=Z>>7,ye=1<<1+(7&Z);P[k++],P[k++];var fe=null,Ae=null;re&&(fe=k,Ae=ye,k+=3*ye);var Le=!0,Ve=[],Ze=0,dt=null,je=0,St=null;for(this.width=M,this.height=W;Le&&k<P.length;)switch(P[k++]){case 33:switch(P[k++]){case 255:if(P[k]!==11||P[k+1]==78&&P[k+2]==69&&P[k+3]==84&&P[k+4]==83&&P[k+5]==67&&P[k+6]==65&&P[k+7]==80&&P[k+8]==69&&P[k+9]==50&&P[k+10]==46&&P[k+11]==48&&P[k+12]==3&&P[k+13]==1&&P[k+16]==0)k+=14,St=P[k++]|P[k++]<<8,k++;else for(k+=12;;){if(!((lt=P[k++])>=0))throw Error("Invalid block size");if(lt===0)break;k+=lt}break;case 249:if(P[k++]!==4||P[k+4]!==0)throw new Error("Invalid graphics extension block.");var ct=P[k++];Ze=P[k++]|P[k++]<<8,dt=P[k++],1&ct||(dt=null),je=ct>>2&7,k++;break;case 254:for(;;){if(!((lt=P[k++])>=0))throw Error("Invalid block size");if(lt===0)break;k+=lt}break;default:throw new Error("Unknown graphic control label: 0x"+P[k-1].toString(16))}break;case 44:var Nt=P[k++]|P[k++]<<8,it=P[k++]|P[k++]<<8,Ot=P[k++]|P[k++]<<8,qt=P[k++]|P[k++]<<8,It=P[k++],nt=It>>6&1,Vt=1<<1+(7&It),Tr=fe,or=Ae,Mt=!1;It>>7&&(Mt=!0,Tr=k,or=Vt,k+=3*Vt);var _r=k;for(k++;;){var lt;if(!((lt=P[k++])>=0))throw Error("Invalid block size");if(lt===0)break;k+=lt}Ve.push({x:Nt,y:it,width:Ot,height:qt,has_local_palette:Mt,palette_offset:Tr,palette_size:or,data_offset:_r,data_length:k-_r,transparent_index:dt,interlaced:!!nt,delay:Ze,disposal:je});break;case 59:Le=!1;break;default:throw new Error("Unknown gif block: 0x"+P[k-1].toString(16))}this.numFrames=function(){return Ve.length},this.loopCount=function(){return St},this.frameInfo=function(vt){if(vt<0||vt>=Ve.length)throw new Error("Frame index out of range.");return Ve[vt]},this.decodeAndBlitFrameBGRA=function(vt,Rt){var Dt=this.frameInfo(vt),vr=Dt.width*Dt.height,kr=new Uint8Array(vr);_a(P,Dt.data_offset,kr,vr);var Rr=Dt.palette_offset,ur=Dt.transparent_index;ur===null&&(ur=256);var Or=Dt.width,pn=M-Or,on=Or,Ye=4*(Dt.y*M+Dt.x),Tt=4*((Dt.y+Dt.height)*M+Dt.x),Lt=Ye,Wt=4*pn;Dt.interlaced===!0&&(Wt+=4*M*7);for(var Xt=8,fr=0,Lr=kr.length;fr<Lr;++fr){var Nr=kr[fr];if(on===0&&(on=Or,(Lt+=Wt)>=Tt&&(Wt=4*pn+4*M*(Xt-1),Lt=Ye+(Or+pn)*(Xt<<1),Xt>>=1)),Nr===ur)Lt+=4;else{var Zr=P[Rr+3*Nr],An=P[Rr+3*Nr+1],Sn=P[Rr+3*Nr+2];Rt[Lt++]=Sn,Rt[Lt++]=An,Rt[Lt++]=Zr,Rt[Lt++]=255}--on}},this.decodeAndBlitFrameRGBA=function(vt,Rt){var Dt=this.frameInfo(vt),vr=Dt.width*Dt.height,kr=new Uint8Array(vr);_a(P,Dt.data_offset,kr,vr);var Rr=Dt.palette_offset,ur=Dt.transparent_index;ur===null&&(ur=256);var Or=Dt.width,pn=M-Or,on=Or,Ye=4*(Dt.y*M+Dt.x),Tt=4*((Dt.y+Dt.height)*M+Dt.x),Lt=Ye,Wt=4*pn;Dt.interlaced===!0&&(Wt+=4*M*7);for(var Xt=8,fr=0,Lr=kr.length;fr<Lr;++fr){var Nr=kr[fr];if(on===0&&(on=Or,(Lt+=Wt)>=Tt&&(Wt=4*pn+4*M*(Xt-1),Lt=Ye+(Or+pn)*(Xt<<1),Xt>>=1)),Nr===ur)Lt+=4;else{var Zr=P[Rr+3*Nr],An=P[Rr+3*Nr+1],Sn=P[Rr+3*Nr+2];Rt[Lt++]=Zr,Rt[Lt++]=An,Rt[Lt++]=Sn,Rt[Lt++]=255}--on}}}function _a(P,k,M,W){for(var Z=P[k++],re=1<<Z,ye=re+1,fe=ye+1,Ae=Z+1,Le=(1<<Ae)-1,Ve=0,Ze=0,dt=0,je=P[k++],St=new Int32Array(4096),ct=null;;){for(;Ve<16&&je!==0;)Ze|=P[k++]<<Ve,Ve+=8,je===1?je=P[k++]:--je;if(Ve<Ae)break;var Nt=Ze&Le;if(Ze>>=Ae,Ve-=Ae,Nt!==re){if(Nt===ye)break;for(var it=Nt<fe?Nt:ct,Ot=0,qt=it;qt>re;)qt=St[qt]>>8,++Ot;var It=qt;if(dt+Ot+(it!==Nt?1:0)>W)return void x.log("Warning, gif stream longer than expected.");M[dt++]=It;var nt=dt+=Ot;for(it!==Nt&&(M[dt++]=It),qt=it;Ot--;)qt=St[qt],M[--nt]=255&qt,qt>>=8;ct!==null&&fe<4096&&(St[fe++]=ct<<8|It,fe>=Le+1&&Ae<12&&(++Ae,Le=Le<<1|1)),ct=Nt}else fe=ye+1,Le=(1<<(Ae=Z+1))-1,ct=null}return dt!==W&&x.log("Warning, gif stream shorter than expected."),M}function Qo(P){var k,M,W,Z,re,ye=Math.floor,fe=new Array(64),Ae=new Array(64),Le=new Array(64),Ve=new Array(64),Ze=new Array(65535),dt=new Array(65535),je=new Array(64),St=new Array(64),ct=[],Nt=0,it=7,Ot=new Array(64),qt=new Array(64),It=new Array(64),nt=new Array(256),Vt=new Array(2048),Tr=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],or=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],Mt=[0,1,2,3,4,5,6,7,8,9,10,11],_r=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],lt=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],vt=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Rt=[0,1,2,3,4,5,6,7,8,9,10,11],Dt=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],vr=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function kr(Ye,Tt){for(var Lt=0,Wt=0,Xt=new Array,fr=1;fr<=16;fr++){for(var Lr=1;Lr<=Ye[fr];Lr++)Xt[Tt[Wt]]=[],Xt[Tt[Wt]][0]=Lt,Xt[Tt[Wt]][1]=fr,Wt++,Lt++;Lt*=2}return Xt}function Rr(Ye){for(var Tt=Ye[0],Lt=Ye[1]-1;Lt>=0;)Tt&1<<Lt&&(Nt|=1<<it),Lt--,--it<0&&(Nt==255?(ur(255),ur(0)):ur(Nt),it=7,Nt=0)}function ur(Ye){ct.push(Ye)}function Or(Ye){ur(Ye>>8&255),ur(255&Ye)}function pn(Ye,Tt,Lt,Wt,Xt){for(var fr,Lr=Xt[0],Nr=Xt[240],Zr=(function(cn,Ni){var $n,zn,Qn,va,Di,Wn,is,Si,Hn,Li,Yn=0;for(Hn=0;Hn<8;++Hn){$n=cn[Yn],zn=cn[Yn+1],Qn=cn[Yn+2],va=cn[Yn+3],Di=cn[Yn+4],Wn=cn[Yn+5],is=cn[Yn+6];var Gi=$n+(Si=cn[Yn+7]),ss=$n-Si,Zi=zn+is,ys=zn-is,Na=Qn+Wn,bi=Qn-Wn,Ys=va+Di,Qi=va-Di,ai=Gi+Ys,ha=Gi-Ys,Ii=Zi+Na,_n=Zi-Na;cn[Yn]=ai+Ii,cn[Yn+4]=ai-Ii;var cs=.707106781*(_n+ha);cn[Yn+2]=ha+cs,cn[Yn+6]=ha-cs;var _u=.382683433*((ai=Qi+bi)-(_n=ys+ss)),so=.5411961*ai+_u,Ko=1.306562965*_n+_u,ec=.707106781*(Ii=bi+ys),wi=ss+ec,Da=ss-ec;cn[Yn+5]=Da+so,cn[Yn+3]=Da-so,cn[Yn+1]=wi+Ko,cn[Yn+7]=wi-Ko,Yn+=8}for(Yn=0,Hn=0;Hn<8;++Hn){$n=cn[Yn],zn=cn[Yn+8],Qn=cn[Yn+16],va=cn[Yn+24],Di=cn[Yn+32],Wn=cn[Yn+40],is=cn[Yn+48];var Za=$n+(Si=cn[Yn+56]),$l=$n-Si,Hl=zn+is,fa=zn-is,yo=Qn+Wn,Ja=Qn-Wn,Hc=va+Di,To=va-Di,Ac=Za+Hc,Ga=Za-Hc,Ql=Hl+yo,zl=Hl-yo;cn[Yn]=Ac+Ql,cn[Yn+32]=Ac-Ql;var Il=.707106781*(zl+Ga);cn[Yn+16]=Ga+Il,cn[Yn+48]=Ga-Il;var bd=.382683433*((Ac=To+Ja)-(zl=fa+$l)),tc=.5411961*Ac+bd,Vl=1.306562965*zl+bd,pc=.707106781*(Ql=Ja+fa),wd=$l+pc,Kl=$l-pc;cn[Yn+40]=Kl+tc,cn[Yn+24]=Kl-tc,cn[Yn+8]=wd+Vl,cn[Yn+56]=wd-Vl,Yn++}for(Hn=0;Hn<64;++Hn)Li=cn[Hn]*Ni[Hn],je[Hn]=Li>0?Li+.5|0:Li-.5|0;return je})(Ye,Tt),An=0;An<64;++An)St[Tr[An]]=Zr[An];var Sn=St[0]-Lt;Lt=St[0],Sn==0?Rr(Wt[0]):(Rr(Wt[dt[fr=32767+Sn]]),Rr(Ze[fr]));for(var Fn=63;Fn>0&&St[Fn]==0;)Fn--;if(Fn==0)return Rr(Lr),Lt;for(var xi,yt=1;yt<=Fn;){for(var Tn=yt;St[yt]==0&&yt<=Fn;)++yt;var Ri=yt-Tn;if(Ri>=16){xi=Ri>>4;for(var Cn=1;Cn<=xi;++Cn)Rr(Nr);Ri&=15}fr=32767+St[yt],Rr(Xt[(Ri<<4)+dt[fr]]),Rr(Ze[fr]),yt++}return Fn!=63&&Rr(Lr),Lt}function on(Ye){Ye=Math.min(Math.max(Ye,1),100),re!=Ye&&((function(Tt){for(var Lt=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Wt=0;Wt<64;Wt++){var Xt=ye((Lt[Wt]*Tt+50)/100);Xt=Math.min(Math.max(Xt,1),255),fe[Tr[Wt]]=Xt}for(var fr=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Lr=0;Lr<64;Lr++){var Nr=ye((fr[Lr]*Tt+50)/100);Nr=Math.min(Math.max(Nr,1),255),Ae[Tr[Lr]]=Nr}for(var Zr=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],An=0,Sn=0;Sn<8;Sn++)for(var Fn=0;Fn<8;Fn++)Le[An]=1/(fe[Tr[An]]*Zr[Sn]*Zr[Fn]*8),Ve[An]=1/(Ae[Tr[An]]*Zr[Sn]*Zr[Fn]*8),An++})(Ye<50?Math.floor(5e3/Ye):Math.floor(200-2*Ye)),re=Ye)}this.encode=function(Ye,Tt){Tt&&on(Tt),ct=new Array,Nt=0,it=7,Or(65496),Or(65504),Or(16),ur(74),ur(70),ur(73),ur(70),ur(0),ur(1),ur(1),ur(0),Or(1),Or(1),ur(0),ur(0),(function(){Or(65499),Or(132),ur(0);for(var zn=0;zn<64;zn++)ur(fe[zn]);ur(1);for(var Qn=0;Qn<64;Qn++)ur(Ae[Qn])})(),(function(zn,Qn){Or(65472),Or(17),ur(8),Or(Qn),Or(zn),ur(3),ur(1),ur(17),ur(0),ur(2),ur(17),ur(1),ur(3),ur(17),ur(1)})(Ye.width,Ye.height),(function(){Or(65476),Or(418),ur(0);for(var zn=0;zn<16;zn++)ur(or[zn+1]);for(var Qn=0;Qn<=11;Qn++)ur(Mt[Qn]);ur(16);for(var va=0;va<16;va++)ur(_r[va+1]);for(var Di=0;Di<=161;Di++)ur(lt[Di]);ur(1);for(var Wn=0;Wn<16;Wn++)ur(vt[Wn+1]);for(var is=0;is<=11;is++)ur(Rt[is]);ur(17);for(var Si=0;Si<16;Si++)ur(Dt[Si+1]);for(var Hn=0;Hn<=161;Hn++)ur(vr[Hn])})(),Or(65498),Or(12),ur(3),ur(1),ur(0),ur(2),ur(17),ur(3),ur(17),ur(0),ur(63),ur(0);var Lt=0,Wt=0,Xt=0;Nt=0,it=7,this.encode.displayName="_encode_";for(var fr,Lr,Nr,Zr,An,Sn,Fn,xi,yt,Tn=Ye.data,Ri=Ye.width,Cn=Ye.height,cn=4*Ri,Ni=0;Ni<Cn;){for(fr=0;fr<cn;){for(An=cn*Ni+fr,Fn=-1,xi=0,yt=0;yt<64;yt++)Sn=An+(xi=yt>>3)*cn+(Fn=4*(7&yt)),Ni+xi>=Cn&&(Sn-=cn*(Ni+1+xi-Cn)),fr+Fn>=cn&&(Sn-=fr+Fn-cn+4),Lr=Tn[Sn++],Nr=Tn[Sn++],Zr=Tn[Sn++],Ot[yt]=(Vt[Lr]+Vt[Nr+256|0]+Vt[Zr+512|0]>>16)-128,qt[yt]=(Vt[Lr+768|0]+Vt[Nr+1024|0]+Vt[Zr+1280|0]>>16)-128,It[yt]=(Vt[Lr+1280|0]+Vt[Nr+1536|0]+Vt[Zr+1792|0]>>16)-128;Lt=pn(Ot,Le,Lt,k,W),Wt=pn(qt,Ve,Wt,M,Z),Xt=pn(It,Ve,Xt,M,Z),fr+=32}Ni+=8}if(it>=0){var $n=[];$n[1]=it+1,$n[0]=(1<<it+1)-1,Rr($n)}return Or(65497),new Uint8Array(ct)},P=P||50,(function(){for(var Ye=String.fromCharCode,Tt=0;Tt<256;Tt++)nt[Tt]=Ye(Tt)})(),k=kr(or,Mt),M=kr(vt,Rt),W=kr(_r,lt),Z=kr(Dt,vr),(function(){for(var Ye=1,Tt=2,Lt=1;Lt<=15;Lt++){for(var Wt=Ye;Wt<Tt;Wt++)dt[32767+Wt]=Lt,Ze[32767+Wt]=[],Ze[32767+Wt][1]=Lt,Ze[32767+Wt][0]=Wt;for(var Xt=-(Tt-1);Xt<=-Ye;Xt++)dt[32767+Xt]=Lt,Ze[32767+Xt]=[],Ze[32767+Xt][1]=Lt,Ze[32767+Xt][0]=Tt-1+Xt;Ye<<=1,Tt<<=1}})(),(function(){for(var Ye=0;Ye<256;Ye++)Vt[Ye]=19595*Ye,Vt[Ye+256|0]=38470*Ye,Vt[Ye+512|0]=7471*Ye+32768,Vt[Ye+768|0]=-11059*Ye,Vt[Ye+1024|0]=-21709*Ye,Vt[Ye+1280|0]=32768*Ye+8421375,Vt[Ye+1536|0]=-27439*Ye,Vt[Ye+1792|0]=-5329*Ye})(),on(P)}function Hi(P,k){if(this.pos=0,this.buffer=P,this.datav=new DataView(P.buffer),this.is_with_alpha=!!k,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function zo(P){function k(Mt){if(!Mt)throw Error("assert :P")}function M(Mt,_r,lt){for(var vt=0;4>vt;vt++)if(Mt[_r+vt]!=lt.charCodeAt(vt))return!0;return!1}function W(Mt,_r,lt,vt,Rt){for(var Dt=0;Dt<Rt;Dt++)Mt[_r+Dt]=lt[vt+Dt]}function Z(Mt,_r,lt,vt){for(var Rt=0;Rt<vt;Rt++)Mt[_r+Rt]=lt}function re(Mt){return new Int32Array(Mt)}function ye(Mt,_r){for(var lt=[],vt=0;vt<Mt;vt++)lt.push(new _r);return lt}function fe(Mt,_r){var lt=[];return(function vt(Rt,Dt,vr){for(var kr=vr[Dt],Rr=0;Rr<kr&&(Rt.push(vr.length>Dt+1?[]:new _r),!(vr.length<Dt+1));Rr++)vt(Rt[Rr],Dt+1,vr)})(lt,0,Mt),lt}var Ae=function(){var Mt=this;function _r(R,X){for(var pe=1<<X-1>>>0;R&pe;)pe>>>=1;return pe?(R&pe-1)+pe:R}function lt(R,X,pe,Ee,$e){k(!(Ee%pe));do R[X+(Ee-=pe)]=$e;while(0<Ee)}function vt(R,X,pe,Ee,$e){if(k(2328>=$e),512>=$e)var We=re(512);else if((We=re($e))==null)return 0;return(function(Ge,Je,st,bt,$t,Ar){var xt,Yt,nr=Je,Fr=1<<st,wr=re(16),Ur=re(16);for(k($t!=0),k(bt!=null),k(Ge!=null),k(0<st),Yt=0;Yt<$t;++Yt){if(15<bt[Yt])return 0;++wr[bt[Yt]]}if(wr[0]==$t)return 0;for(Ur[1]=0,xt=1;15>xt;++xt){if(wr[xt]>1<<xt)return 0;Ur[xt+1]=Ur[xt]+wr[xt]}for(Yt=0;Yt<$t;++Yt)xt=bt[Yt],0<bt[Yt]&&(Ar[Ur[xt]++]=Yt);if(Ur[15]==1)return(bt=new Rt).g=0,bt.value=Ar[0],lt(Ge,nr,1,Fr,bt),Fr;var Vr,dn=-1,sn=Fr-1,Ti=0,Vn=1,Bs=1,pi=1<<st;for(Yt=0,xt=1,$t=2;xt<=st;++xt,$t<<=1){if(Vn+=Bs<<=1,0>(Bs-=wr[xt]))return 0;for(;0<wr[xt];--wr[xt])(bt=new Rt).g=xt,bt.value=Ar[Yt++],lt(Ge,nr+Ti,$t,pi,bt),Ti=_r(Ti,xt)}for(xt=st+1,$t=2;15>=xt;++xt,$t<<=1){if(Vn+=Bs<<=1,0>(Bs-=wr[xt]))return 0;for(;0<wr[xt];--wr[xt]){if(bt=new Rt,(Ti&sn)!=dn){for(nr+=pi,Vr=1<<(dn=xt)-st;15>dn&&!(0>=(Vr-=wr[dn]));)++dn,Vr<<=1;Fr+=pi=1<<(Vr=dn-st),Ge[Je+(dn=Ti&sn)].g=Vr+st,Ge[Je+dn].value=nr-Je-dn}bt.g=xt-st,bt.value=Ar[Yt++],lt(Ge,nr+(Ti>>st),$t,pi,bt),Ti=_r(Ti,xt)}}return Vn!=2*Ur[15]-1?0:Fr})(R,X,pe,Ee,$e,We)}function Rt(){this.value=this.g=0}function Dt(){this.value=this.g=0}function vr(){this.G=ye(5,Rt),this.H=re(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=ye(Ls,Dt)}function kr(R,X,pe,Ee){k(R!=null),k(X!=null),k(2147483648>Ee),R.Ca=254,R.I=0,R.b=-8,R.Ka=0,R.oa=X,R.pa=pe,R.Jd=X,R.Yc=pe+Ee,R.Zc=4<=Ee?pe+Ee-4+1:pe,Lr(R)}function Rr(R,X){for(var pe=0;0<X--;)pe|=Zr(R,128)<<X;return pe}function ur(R,X){var pe=Rr(R,X);return Nr(R)?-pe:pe}function Or(R,X,pe,Ee){var $e,We=0;for(k(R!=null),k(X!=null),k(4294967288>Ee),R.Sb=Ee,R.Ra=0,R.u=0,R.h=0,4<Ee&&(Ee=4),$e=0;$e<Ee;++$e)We+=X[pe+$e]<<8*$e;R.Ra=We,R.bb=Ee,R.oa=X,R.pa=pe}function pn(R){for(;8<=R.u&&R.bb<R.Sb;)R.Ra>>>=8,R.Ra+=R.oa[R.pa+R.bb]<<nc-8>>>0,++R.bb,R.u-=8;Wt(R)&&(R.h=1,R.u=0)}function on(R,X){if(k(0<=X),!R.h&&X<=$i){var pe=Lt(R)&ni[X];return R.u+=X,pn(R),pe}return R.h=1,R.u=0}function Ye(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function Tt(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Lt(R){return R.Ra>>>(R.u&nc-1)>>>0}function Wt(R){return k(R.bb<=R.Sb),R.h||R.bb==R.Sb&&R.u>nc}function Xt(R,X){R.u=X,R.h=Wt(R)}function fr(R){R.u>=Zu&&(k(R.u>=Zu),pn(R))}function Lr(R){k(R!=null&&R.oa!=null),R.pa<R.Zc?(R.I=(R.oa[R.pa++]|R.I<<8)>>>0,R.b+=8):(k(R!=null&&R.oa!=null),R.pa<R.Yc?(R.b+=8,R.I=R.oa[R.pa++]|R.I<<8):R.Ka?R.b=0:(R.I<<=8,R.b+=8,R.Ka=1))}function Nr(R){return Rr(R,1)}function Zr(R,X){var pe=R.Ca;0>R.b&&Lr(R);var Ee=R.b,$e=pe*X>>>8,We=(R.I>>>Ee>$e)+0;for(We?(pe-=$e,R.I-=$e+1<<Ee>>>0):pe=$e+1,Ee=pe,$e=0;256<=Ee;)$e+=8,Ee>>=8;return Ee=7^$e+ou[Ee],R.b-=Ee,R.Ca=(pe<<Ee)-1,We}function An(R,X,pe){R[X+0]=pe>>24&255,R[X+1]=pe>>16&255,R[X+2]=pe>>8&255,R[X+3]=255&pe}function Sn(R,X){return R[X+0]|R[X+1]<<8}function Fn(R,X){return Sn(R,X)|R[X+2]<<16}function xi(R,X){return Sn(R,X)|Sn(R,X+2)<<16}function yt(R,X){var pe=1<<X;return k(R!=null),k(0<X),R.X=re(pe),R.X==null?0:(R.Mb=32-X,R.Xa=X,1)}function Tn(R,X){k(R!=null),k(X!=null),k(R.Xa==X.Xa),W(X.X,0,R.X,0,1<<X.Xa)}function Ri(){this.X=[],this.Xa=this.Mb=0}function Cn(R,X,pe,Ee){k(pe!=null),k(Ee!=null);var $e=pe[0],We=Ee[0];return $e==0&&($e=(R*We+X/2)/X),We==0&&(We=(X*$e+R/2)/R),0>=$e||0>=We?0:(pe[0]=$e,Ee[0]=We,1)}function cn(R,X){return R+(1<<X)-1>>>X}function Ni(R,X){return((4278255360&R)+(4278255360&X)>>>0&4278255360)+((16711935&R)+(16711935&X)>>>0&16711935)>>>0}function $n(R,X){Mt[X]=function(pe,Ee,$e,We,Ge,Je,st){var bt;for(bt=0;bt<Ge;++bt){var $t=Mt[R](Je[st+bt-1],$e,We+bt);Je[st+bt]=Ni(pe[Ee+bt],$t)}}}function zn(){this.ud=this.hd=this.jd=0}function Qn(R,X){return((4278124286&(R^X))>>>1)+(R&X)>>>0}function va(R){return 0<=R&&256>R?R:0>R?0:255<R?255:void 0}function Di(R,X){return va(R+(R-X+.5>>1))}function Wn(R,X,pe){return Math.abs(X-pe)-Math.abs(R-pe)}function is(R,X,pe,Ee,$e,We,Ge){for(Ee=We[Ge-1],pe=0;pe<$e;++pe)We[Ge+pe]=Ee=Ni(R[X+pe],Ee)}function Si(R,X,pe,Ee,$e){var We;for(We=0;We<pe;++We){var Ge=R[X+We],Je=Ge>>8&255,st=16711935&(st=(st=16711935&Ge)+((Je<<16)+Je));Ee[$e+We]=(4278255360&Ge)+st>>>0}}function Hn(R,X){X.jd=255&R,X.hd=R>>8&255,X.ud=R>>16&255}function Li(R,X,pe,Ee,$e,We){var Ge;for(Ge=0;Ge<Ee;++Ge){var Je=X[pe+Ge],st=Je>>>8,bt=Je,$t=255&($t=($t=Je>>>16)+((R.jd<<24>>24)*(st<<24>>24)>>>5));bt=255&(bt=(bt+=(R.hd<<24>>24)*(st<<24>>24)>>>5)+((R.ud<<24>>24)*($t<<24>>24)>>>5)),$e[We+Ge]=(4278255360&Je)+($t<<16)+bt}}function Yn(R,X,pe,Ee,$e){Mt[X]=function(We,Ge,Je,st,bt,$t,Ar,xt,Yt){for(st=Ar;st<xt;++st)for(Ar=0;Ar<Yt;++Ar)bt[$t++]=$e(Je[Ee(We[Ge++])])},Mt[R]=function(We,Ge,Je,st,bt,$t,Ar){var xt=8>>We.b,Yt=We.Ea,nr=We.K[0],Fr=We.w;if(8>xt)for(We=(1<<We.b)-1,Fr=(1<<xt)-1;Ge<Je;++Ge){var wr,Ur=0;for(wr=0;wr<Yt;++wr)wr&We||(Ur=Ee(st[bt++])),$t[Ar++]=$e(nr[Ur&Fr]),Ur>>=xt}else Mt["VP8LMapColor"+pe](st,bt,nr,Fr,$t,Ar,Ge,Je,Yt)}}function Gi(R,X,pe,Ee,$e){for(pe=X+pe;X<pe;){var We=R[X++];Ee[$e++]=We>>16&255,Ee[$e++]=We>>8&255,Ee[$e++]=255&We}}function ss(R,X,pe,Ee,$e){for(pe=X+pe;X<pe;){var We=R[X++];Ee[$e++]=We>>16&255,Ee[$e++]=We>>8&255,Ee[$e++]=255&We,Ee[$e++]=We>>24&255}}function Zi(R,X,pe,Ee,$e){for(pe=X+pe;X<pe;){var We=(Ge=R[X++])>>16&240|Ge>>12&15,Ge=240&Ge|Ge>>28&15;Ee[$e++]=We,Ee[$e++]=Ge}}function ys(R,X,pe,Ee,$e){for(pe=X+pe;X<pe;){var We=(Ge=R[X++])>>16&248|Ge>>13&7,Ge=Ge>>5&224|Ge>>3&31;Ee[$e++]=We,Ee[$e++]=Ge}}function Na(R,X,pe,Ee,$e){for(pe=X+pe;X<pe;){var We=R[X++];Ee[$e++]=255&We,Ee[$e++]=We>>8&255,Ee[$e++]=We>>16&255}}function bi(R,X,pe,Ee,$e,We){if(We==0)for(pe=X+pe;X<pe;)An(Ee,((We=R[X++])[0]>>24|We[1]>>8&65280|We[2]<<8&16711680|We[3]<<24)>>>0),$e+=32;else W(Ee,$e,R,X,pe)}function Ys(R,X){Mt[X][0]=Mt[R+"0"],Mt[X][1]=Mt[R+"1"],Mt[X][2]=Mt[R+"2"],Mt[X][3]=Mt[R+"3"],Mt[X][4]=Mt[R+"4"],Mt[X][5]=Mt[R+"5"],Mt[X][6]=Mt[R+"6"],Mt[X][7]=Mt[R+"7"],Mt[X][8]=Mt[R+"8"],Mt[X][9]=Mt[R+"9"],Mt[X][10]=Mt[R+"10"],Mt[X][11]=Mt[R+"11"],Mt[X][12]=Mt[R+"12"],Mt[X][13]=Mt[R+"13"],Mt[X][14]=Mt[R+"0"],Mt[X][15]=Mt[R+"0"]}function Qi(R){return R==kg||R==hp||R==Am||R==Lg}function ai(){this.eb=[],this.size=this.A=this.fb=0}function ha(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Ii(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new ai,this.f.kb=new ha,this.sd=null}function _n(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function cs(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function _u(R){return alert("todo:WebPSamplerProcessPlane"),R.T}function so(R,X){var pe=R.T,Ee=X.ba.f.RGBA,$e=Ee.eb,We=Ee.fb+R.ka*Ee.A,Ge=Ld[X.ba.S],Je=R.y,st=R.O,bt=R.f,$t=R.N,Ar=R.ea,xt=R.W,Yt=X.cc,nr=X.dc,Fr=X.Mc,wr=X.Nc,Ur=R.ka,Vr=R.ka+R.T,dn=R.U,sn=dn+1>>1;for(Ur==0?Ge(Je,st,null,null,bt,$t,Ar,xt,bt,$t,Ar,xt,$e,We,null,null,dn):(Ge(X.ec,X.fc,Je,st,Yt,nr,Fr,wr,bt,$t,Ar,xt,$e,We-Ee.A,$e,We,dn),++pe);Ur+2<Vr;Ur+=2)Yt=bt,nr=$t,Fr=Ar,wr=xt,$t+=R.Rc,xt+=R.Rc,We+=2*Ee.A,Ge(Je,(st+=2*R.fa)-R.fa,Je,st,Yt,nr,Fr,wr,bt,$t,Ar,xt,$e,We-Ee.A,$e,We,dn);return st+=R.fa,R.j+Vr<R.o?(W(X.ec,X.fc,Je,st,dn),W(X.cc,X.dc,bt,$t,sn),W(X.Mc,X.Nc,Ar,xt,sn),pe--):1&Vr||Ge(Je,st,null,null,bt,$t,Ar,xt,bt,$t,Ar,xt,$e,We+Ee.A,null,null,dn),pe}function Ko(R,X,pe){var Ee=R.F,$e=[R.J];if(Ee!=null){var We=R.U,Ge=X.ba.S,Je=Ge==Pl||Ge==Am;X=X.ba.f.RGBA;var st=[0],bt=R.ka;st[0]=R.T,R.Kb&&(bt==0?--st[0]:(--bt,$e[0]-=R.width),R.j+R.ka+R.T==R.o&&(st[0]=R.o-R.j-bt));var $t=X.eb;bt=X.fb+bt*X.A,R=Cu(Ee,$e[0],R.width,We,st,$t,bt+(Je?0:3),X.A),k(pe==st),R&&Qi(Ge)&&Xh($t,bt,Je,We,st,X.A)}return 0}function ec(R){var X=R.ma,pe=X.ba.S,Ee=11>pe,$e=pe==dp||pe==Xm||pe==Pl||pe==Bf||pe==12||Qi(pe);if(X.memory=null,X.Ib=null,X.Jb=null,X.Nd=null,!$a(X.Oa,R,$e?11:12))return 0;if($e&&Qi(pe)&&_t(),R.da)alert("todo:use_scaling");else{if(Ee){if(X.Ib=_u,R.Kb){if(pe=R.U+1>>1,X.memory=re(R.U+2*pe),X.memory==null)return 0;X.ec=X.memory,X.fc=0,X.cc=X.ec,X.dc=X.fc+R.U,X.Mc=X.cc,X.Nc=X.dc+pe,X.Ib=so,_t()}}else alert("todo:EmitYUV");$e&&(X.Jb=Ko,Ee&&qe())}if(Ee&&!cv){for(R=0;256>R;++R)Fg[R]=89858*(R-128)+Ih>>Pf,Hg[R]=-22014*(R-128)+Ih,$g[R]=-45773*(R-128),Ug[R]=113618*(R-128)+Ih>>Pf;for(R=tA;R<Mg;++R)X=76283*(R-16)+Ih>>Pf,Qg[R-tA]=yl(X,255),uv[R-tA]=yl(X+8>>4,15);cv=1}return 1}function wi(R){var X=R.ma,pe=R.U,Ee=R.T;return k(!(1&R.ka)),0>=pe||0>=Ee?0:(pe=X.Ib(R,X),X.Jb!=null&&X.Jb(R,X,pe),X.Dc+=pe,1)}function Da(R){R.ma.memory=null}function Za(R,X,pe,Ee){return on(R,8)!=47?0:(X[0]=on(R,14)+1,pe[0]=on(R,14)+1,Ee[0]=on(R,1),on(R,3)!=0?0:!R.h)}function $l(R,X){if(4>R)return R+1;var pe=R-2>>1;return(2+(1&R)<<pe)+on(X,pe)+1}function Hl(R,X){return 120<X?X-120:1<=(pe=((pe=Ig[X-1])>>4)*R+(8-(15&pe)))?pe:1;var pe}function fa(R,X,pe){var Ee=Lt(pe),$e=R[X+=255&Ee].g-8;return 0<$e&&(Xt(pe,pe.u+8),Ee=Lt(pe),X+=R[X].value,X+=Ee&(1<<$e)-1),Xt(pe,pe.u+R[X].g),R[X].value}function yo(R,X,pe){return pe.g+=R.g,pe.value+=R.value<<X>>>0,k(8>=pe.g),R.g}function Ja(R,X,pe){var Ee=R.xc;return k((X=Ee==0?0:R.vc[R.md*(pe>>Ee)+(X>>Ee)])<R.Wb),R.Ya[X]}function Hc(R,X,pe,Ee){var $e=R.ab,We=R.c*X,Ge=R.C;X=Ge+X;var Je=pe,st=Ee;for(Ee=R.Ta,pe=R.Ua;0<$e--;){var bt=R.gc[$e],$t=Ge,Ar=X,xt=Je,Yt=st,nr=(st=Ee,Je=pe,bt.Ea);switch(k($t<Ar),k(Ar<=bt.nc),bt.hc){case 2:oo(xt,Yt,(Ar-$t)*nr,st,Je);break;case 0:var Fr=$t,wr=Ar,Ur=st,Vr=Je,dn=(pi=bt).Ea;Fr==0&&(xl(xt,Yt,null,null,1,Ur,Vr),is(xt,Yt+1,0,0,dn-1,Ur,Vr+1),Yt+=dn,Vr+=dn,++Fr);for(var sn=1<<pi.b,Ti=sn-1,Vn=cn(dn,pi.b),Bs=pi.K,pi=pi.w+(Fr>>pi.b)*Vn;Fr<wr;){var ua=Bs,Ol=pi,Es=1;for(ic(xt,Yt,Ur,Vr-dn,1,Ur,Vr);Es<dn;){var hi=(Es&~Ti)+sn;hi>dn&&(hi=dn),(0,Ro[ua[Ol++]>>8&15])(xt,Yt+ +Es,Ur,Vr+Es-dn,hi-Es,Ur,Vr+Es),Es=hi}Yt+=dn,Vr+=dn,++Fr&Ti||(pi+=Vn)}Ar!=bt.nc&&W(st,Je-nr,st,Je+(Ar-$t-1)*nr,nr);break;case 1:for(nr=xt,wr=Yt,dn=(xt=bt.Ea)-(Vr=xt&~(Ur=(Yt=1<<bt.b)-1)),Fr=cn(xt,bt.b),sn=bt.K,bt=bt.w+($t>>bt.b)*Fr;$t<Ar;){for(Ti=sn,Vn=bt,Bs=new zn,pi=wr+Vr,ua=wr+xt;wr<pi;)Hn(Ti[Vn++],Bs),If(Bs,nr,wr,Yt,st,Je),wr+=Yt,Je+=Yt;wr<ua&&(Hn(Ti[Vn++],Bs),If(Bs,nr,wr,dn,st,Je),wr+=dn,Je+=dn),++$t&Ur||(bt+=Fr)}break;case 3:if(xt==st&&Yt==Je&&0<bt.b){for(wr=st,xt=nr=Je+(Ar-$t)*nr-(Vr=(Ar-$t)*cn(bt.Ea,bt.b)),Yt=st,Ur=Je,Fr=[],Vr=(dn=Vr)-1;0<=Vr;--Vr)Fr[Vr]=Yt[Ur+Vr];for(Vr=dn-1;0<=Vr;--Vr)wr[xt+Vr]=Fr[Vr];Ym(bt,$t,Ar,st,nr,st,Je)}else Ym(bt,$t,Ar,xt,Yt,st,Je)}Je=Ee,st=pe}st!=pe&&W(Ee,pe,Je,st,We)}function To(R,X){var pe=R.V,Ee=R.Ba+R.c*R.C,$e=X-R.C;if(k(X<=R.l.o),k(16>=$e),0<$e){var We=R.l,Ge=R.Ta,Je=R.Ua,st=We.width;if(Hc(R,$e,pe,Ee),$e=Je=[Je],k((pe=R.C)<(Ee=X)),k(We.v<We.va),Ee>We.o&&(Ee=We.o),pe<We.j){var bt=We.j-pe;pe=We.j,$e[0]+=bt*st}if(pe>=Ee?pe=0:($e[0]+=4*We.v,We.ka=pe-We.j,We.U=We.va-We.v,We.T=Ee-pe,pe=1),pe){if(Je=Je[0],11>(pe=R.ca).S){var $t=pe.f.RGBA,Ar=(Ee=pe.S,$e=We.U,We=We.T,bt=$t.eb,$t.A),xt=We;for($t=$t.fb+R.Ma*$t.A;0<xt--;){var Yt=Ge,nr=Je,Fr=$e,wr=bt,Ur=$t;switch(Ee){case mm:Td(Yt,nr,Fr,wr,Ur);break;case dp:Ji(Yt,nr,Fr,wr,Ur);break;case kg:Ji(Yt,nr,Fr,wr,Ur),Xh(wr,Ur,0,Fr,1,0);break;case Cg:Ch(Yt,nr,Fr,wr,Ur);break;case Xm:bi(Yt,nr,Fr,wr,Ur,1);break;case hp:bi(Yt,nr,Fr,wr,Ur,1),Xh(wr,Ur,0,Fr,1,0);break;case Pl:bi(Yt,nr,Fr,wr,Ur,0);break;case Am:bi(Yt,nr,Fr,wr,Ur,0),Xh(wr,Ur,1,Fr,1,0);break;case Bf:ma(Yt,nr,Fr,wr,Ur);break;case Lg:ma(Yt,nr,Fr,wr,Ur),lp(wr,Ur,Fr,1,0);break;case Ng:bo(Yt,nr,Fr,wr,Ur);break;default:k(0)}Je+=st,$t+=Ar}R.Ma+=We}else alert("todo:EmitRescaledRowsYUVA");k(R.Ma<=pe.height)}}R.C=X,k(R.C<=R.i)}function Ac(R){var X;if(0<R.ua)return 0;for(X=0;X<R.Wb;++X){var pe=R.Ya[X].G,Ee=R.Ya[X].H;if(0<pe[1][Ee[1]+0].g||0<pe[2][Ee[2]+0].g||0<pe[3][Ee[3]+0].g)return 0}return 1}function Ga(R,X,pe,Ee,$e,We){if(R.Z!=0){var Ge=R.qd,Je=R.rd;for(k(kh[R.Z]!=null);X<pe;++X)kh[R.Z](Ge,Je,Ee,$e,Ee,$e,We),Ge=Ee,Je=$e,$e+=We;R.qd=Ge,R.rd=Je}}function Ql(R,X){var pe=R.l.ma,Ee=pe.Z==0||pe.Z==1?R.l.j:R.C;if(Ee=R.C<Ee?Ee:R.C,k(X<=R.l.o),X>Ee){var $e=R.l.width,We=pe.ca,Ge=pe.tb+$e*Ee,Je=R.V,st=R.Ba+R.c*Ee,bt=R.gc;k(R.ab==1),k(bt[0].hc==3),Gc(bt[0],Ee,X,Je,st,We,Ge),Ga(pe,Ee,X,We,Ge,$e)}R.C=R.Ma=X}function zl(R,X,pe,Ee,$e,We,Ge){var Je=R.$/Ee,st=R.$%Ee,bt=R.m,$t=R.s,Ar=pe+R.$,xt=Ar;$e=pe+Ee*$e;var Yt=pe+Ee*We,nr=280+$t.ua,Fr=R.Pb?Je:16777216,wr=0<$t.ua?$t.Wa:null,Ur=$t.wc,Vr=Ar<Yt?Ja($t,st,Je):null;k(R.C<We),k(Yt<=$e);var dn=!1;e:for(;;){for(;dn||Ar<Yt;){var sn=0;if(Je>=Fr){var Ti=Ar-pe;k((Fr=R).Pb),Fr.wd=Fr.m,Fr.xd=Ti,0<Fr.s.ua&&Tn(Fr.s.Wa,Fr.s.vb),Fr=Je+sv}if(st&Ur||(Vr=Ja($t,st,Je)),k(Vr!=null),Vr.Qb&&(X[Ar]=Vr.qb,dn=!0),!dn)if(fr(bt),Vr.jc){sn=bt,Ti=X;var Vn=Ar,Bs=Vr.pd[Lt(sn)&Ls-1];k(Vr.jc),256>Bs.g?(Xt(sn,sn.u+Bs.g),Ti[Vn]=Bs.value,sn=0):(Xt(sn,sn.u+Bs.g-256),k(256<=Bs.value),sn=Bs.value),sn==0&&(dn=!0)}else sn=fa(Vr.G[0],Vr.H[0],bt);if(bt.h)break;if(dn||256>sn){if(!dn)if(Vr.nd)X[Ar]=(Vr.qb|sn<<8)>>>0;else{if(fr(bt),dn=fa(Vr.G[1],Vr.H[1],bt),fr(bt),Ti=fa(Vr.G[2],Vr.H[2],bt),Vn=fa(Vr.G[3],Vr.H[3],bt),bt.h)break;X[Ar]=(Vn<<24|dn<<16|sn<<8|Ti)>>>0}if(dn=!1,++Ar,++st>=Ee&&(st=0,++Je,Ge!=null&&Je<=We&&!(Je%16)&&Ge(R,Je),wr!=null))for(;xt<Ar;)sn=X[xt++],wr.X[(506832829*sn&4294967295)>>>wr.Mb]=sn}else if(280>sn){if(sn=$l(sn-256,bt),Ti=fa(Vr.G[4],Vr.H[4],bt),fr(bt),Ti=Hl(Ee,Ti=$l(Ti,bt)),bt.h)break;if(Ar-pe<Ti||$e-Ar<sn)break e;for(Vn=0;Vn<sn;++Vn)X[Ar+Vn]=X[Ar+Vn-Ti];for(Ar+=sn,st+=sn;st>=Ee;)st-=Ee,++Je,Ge!=null&&Je<=We&&!(Je%16)&&Ge(R,Je);if(k(Ar<=$e),st&Ur&&(Vr=Ja($t,st,Je)),wr!=null)for(;xt<Ar;)sn=X[xt++],wr.X[(506832829*sn&4294967295)>>>wr.Mb]=sn}else{if(!(sn<nr))break e;for(dn=sn-280,k(wr!=null);xt<Ar;)sn=X[xt++],wr.X[(506832829*sn&4294967295)>>>wr.Mb]=sn;sn=Ar,k(!(dn>>>(Ti=wr).Xa)),X[sn]=Ti.X[dn],dn=!0}dn||k(bt.h==Wt(bt))}if(R.Pb&&bt.h&&Ar<$e)k(R.m.h),R.a=5,R.m=R.wd,R.$=R.xd,0<R.s.ua&&Tn(R.s.vb,R.s.Wa);else{if(bt.h)break e;Ge?.(R,Je>We?We:Je),R.a=0,R.$=Ar-pe}return 1}return R.a=3,0}function Il(R){k(R!=null),R.vc=null,R.yc=null,R.Ya=null;var X=R.Wa;X!=null&&(X.X=null),R.vb=null,k(R!=null)}function bd(){var R=new Yi;return R==null?null:(R.a=0,R.xb=Ap,Ys("Predictor","VP8LPredictors"),Ys("Predictor","VP8LPredictors_C"),Ys("PredictorAdd","VP8LPredictorsAdd"),Ys("PredictorAdd","VP8LPredictorsAdd_C"),oo=Si,If=Li,Td=Gi,Ji=ss,ma=Zi,bo=ys,Ch=Na,Mt.VP8LMapColor32b=hh,Mt.VP8LMapColor8b=Wc,R)}function tc(R,X,pe,Ee,$e){var We=1,Ge=[R],Je=[X],st=Ee.m,bt=Ee.s,$t=null,Ar=0;e:for(;;){if(pe)for(;We&&on(st,1);){var xt=Ge,Yt=Je,nr=Ee,Fr=1,wr=nr.m,Ur=nr.gc[nr.ab],Vr=on(wr,2);if(nr.Oc&1<<Vr)We=0;else{switch(nr.Oc|=1<<Vr,Ur.hc=Vr,Ur.Ea=xt[0],Ur.nc=Yt[0],Ur.K=[null],++nr.ab,k(4>=nr.ab),Vr){case 0:case 1:Ur.b=on(wr,3)+2,Fr=tc(cn(Ur.Ea,Ur.b),cn(Ur.nc,Ur.b),0,nr,Ur.K),Ur.K=Ur.K[0];break;case 3:var dn,sn=on(wr,8)+1,Ti=16<sn?0:4<sn?1:2<sn?2:3;if(xt[0]=cn(Ur.Ea,Ti),Ur.b=Ti,dn=Fr=tc(sn,1,0,nr,Ur.K)){var Vn,Bs=sn,pi=Ur,ua=1<<(8>>pi.b),Ol=re(ua);if(Ol==null)dn=0;else{var Es=pi.K[0],hi=pi.w;for(Ol[0]=pi.K[0][0],Vn=1;Vn<1*Bs;++Vn)Ol[Vn]=Ni(Es[hi+Vn],Ol[Vn-1]);for(;Vn<4*ua;++Vn)Ol[Vn]=0;pi.K[0]=null,pi.K[0]=Ol,dn=1}}Fr=dn;break;case 2:break;default:k(0)}We=Fr}}if(Ge=Ge[0],Je=Je[0],We&&on(st,1)&&!(We=1<=(Ar=on(st,4))&&11>=Ar)){Ee.a=3;break e}var Rn;if(Rn=We)t:{var sl,Ss,Ds,wo=Ee,sc=Ge,Ec=Je,Ha=Ar,Sc=pe,lu=wo.m,al=wo.s,aa=[null],Vi=1,wl=0,to=Bg[Ha];r:for(;;){if(Sc&&on(lu,1)){var jc=on(lu,3)+2,qc=cn(sc,jc),lo=cn(Ec,jc),Xc=qc*lo;if(!tc(qc,lo,0,wo,aa))break r;for(aa=aa[0],al.xc=jc,sl=0;sl<Xc;++sl){var co=aa[sl]>>8&65535;aa[sl]=co,co>=Vi&&(Vi=co+1)}}if(lu.h)break r;for(Ss=0;5>Ss;++Ss){var gn=iv[Ss];!Ss&&0<Ha&&(gn+=1<<Ha),wl<gn&&(wl=gn)}var _o=ye(Vi*to,Rt),ac=Vi,No=ye(ac,vr);if(No==null)var rd=null;else k(65536>=ac),rd=No;var ws=re(wl);if(rd==null||ws==null||_o==null){wo.a=1;break r}var Js=_o;for(sl=Ds=0;sl<Vi;++sl){var La=rd[sl],nd=La.G,_l=La.H,ko=0,id=1,Tc=0;for(Ss=0;5>Ss;++Ss){gn=iv[Ss],nd[Ss]=Js,_l[Ss]=Ds,!Ss&&0<Ha&&(gn+=1<<Ha);i:{var Rl,zg=gn,xp=wo,gm=ws,qo=Js,Nu=Ds,Wd=0,mh=xp.m,dv=on(mh,1);if(Z(gm,0,0,zg),dv){var Ky=on(mh,1)+1,Gy=on(mh,1),bp=on(mh,Gy==0?1:8);gm[bp]=1,Ky==2&&(gm[bp=on(mh,8)]=1);var Zc=1}else{var Yd=re(19),nA=on(mh,4)+4;if(19<nA){xp.a=3;var uo=0;break i}for(Rl=0;Rl<nA;++Rl)Yd[Uy[Rl]]=on(mh,3);var wp=void 0,cu=void 0,Of=xp,Jh=Yd,Rf=zg,ef=gm,uu=0,tf=Of.m,qd=8,iA=ye(128,Rt);n:for(;vt(iA,0,7,Jh,19);){if(on(tf,1)){var _p=2+2*on(tf,3);if((wp=2+on(tf,_p))>Rf)break n}else wp=Rf;for(cu=0;cu<Rf&&wp--;){fr(tf);var Df=iA[0+(127&Lt(tf))];Xt(tf,tf.u+Df.g);var vm=Df.value;if(16>vm)ef[cu++]=vm,vm!=0&&(qd=vm);else{var hv=vm==16,sA=vm-16,Wy=D1[sA],Ep=on(tf,Fy[sA])+Wy;if(cu+Ep>Rf)break n;for(var Yy=hv?qd:0;0<Ep--;)ef[cu++]=Yy}}uu=1;break n}uu||(Of.a=3),Zc=uu}(Zc=Zc&&!mh.h)&&(Wd=vt(qo,Nu,8,gm,zg)),Zc&&Wd!=0?uo=Wd:(xp.a=3,uo=0)}if(uo==0)break r;if(id&&Zm[Ss]==1&&(id=Js[Ds].g==0),ko+=Js[Ds].g,Ds+=uo,3>=Ss){var Sp,fv=ws[0];for(Sp=1;Sp<gn;++Sp)ws[Sp]>fv&&(fv=ws[Sp]);Tc+=fv}}if(La.nd=id,La.Qb=0,id&&(La.qb=(nd[3][_l[3]+0].value<<24|nd[1][_l[1]+0].value<<16|nd[2][_l[2]+0].value)>>>0,ko==0&&256>nd[0][_l[0]+0].value&&(La.Qb=1,La.qb+=nd[0][_l[0]+0].value<<8)),La.jc=!La.Qb&&6>Tc,La.jc){var ya,Aa=La;for(ya=0;ya<Ls;++ya){var js=ya,Ps=Aa.pd[js],Ia=Aa.G[0][Aa.H[0]+js];256<=Ia.value?(Ps.g=Ia.g+256,Ps.value=Ia.value):(Ps.g=0,Ps.value=0,js>>=yo(Ia,8,Ps),js>>=yo(Aa.G[1][Aa.H[1]+js],16,Ps),js>>=yo(Aa.G[2][Aa.H[2]+js],0,Ps),yo(Aa.G[3][Aa.H[3]+js],24,Ps))}}}al.vc=aa,al.Wb=Vi,al.Ya=rd,al.yc=_o,Rn=1;break t}Rn=0}if(!(We=Rn)){Ee.a=3;break e}if(0<Ar){if(bt.ua=1<<Ar,!yt(bt.Wa,Ar)){Ee.a=1,We=0;break e}}else bt.ua=0;var ku=Ee,rf=Ge,aA=Je,F=ku.s,B=F.xc;if(ku.c=rf,ku.i=aA,F.md=cn(rf,B),F.wc=B==0?-1:(1<<B)-1,pe){Ee.xb=Qy;break e}if(($t=re(Ge*Je))==null){Ee.a=1,We=0;break e}We=(We=zl(Ee,$t,0,Ge,Je,Je,null))&&!st.h;break e}return We?($e!=null?$e[0]=$t:(k($t==null),k(pe)),Ee.$=0,pe||Il(bt)):Il(bt),We}function Vl(R,X){var pe=R.c*R.i,Ee=pe+X+16*X;return k(R.c<=X),R.V=re(Ee),R.V==null?(R.Ta=null,R.Ua=0,R.a=1,0):(R.Ta=R.V,R.Ua=R.Ba+pe+X,1)}function pc(R,X){var pe=R.C,Ee=X-pe,$e=R.V,We=R.Ba+R.c*pe;for(k(X<=R.l.o);0<Ee;){var Ge=16<Ee?16:Ee,Je=R.l.ma,st=R.l.width,bt=st*Ge,$t=Je.ca,Ar=Je.tb+st*pe,xt=R.Ta,Yt=R.Ua;Hc(R,Ge,$e,We),Kd(xt,Yt,$t,Ar,bt),Ga(Je,pe,pe+Ge,$t,Ar,st),Ee-=Ge,$e+=Ge*R.c,pe+=Ge}k(pe==X),R.C=R.Ma=X}function wd(){this.ub=this.yd=this.td=this.Rb=0}function Kl(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Gl(){this.Fb=this.Bb=this.Cb=0,this.Zb=re(4),this.Lb=re(4)}function Eu(){this.Yb=(function(){var R=[];return(function X(pe,Ee,$e){for(var We=$e[Ee],Ge=0;Ge<We&&(pe.push($e.length>Ee+1?[]:0),!($e.length<Ee+1));Ge++)X(pe[Ge],Ee+1,$e)})(R,0,[3,11]),R})()}function Wl(){this.jb=re(3),this.Wc=fe([4,8],Eu),this.Xc=fe([4,17],Eu)}function Io(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new re(4),this.od=new re(4)}function vl(){this.ld=this.La=this.dd=this.tc=0}function iu(){this.Na=this.la=0}function gc(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function zd(){this.ad=re(384),this.Za=0,this.Ob=re(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function rc(){this.uc=this.M=this.Nb=0,this.wa=Array(new vl),this.Y=0,this.ya=Array(new zd),this.aa=0,this.l=new oh}function Yu(){this.y=re(16),this.f=re(8),this.ea=re(8)}function _d(){this.cb=this.a=0,this.sc="",this.m=new Ye,this.Od=new wd,this.Kc=new Kl,this.ed=new Io,this.Qa=new Gl,this.Ic=this.$c=this.Aa=0,this.D=new rc,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=ye(8,Ye),this.ia=0,this.pb=ye(4,gc),this.Pa=new Wl,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Yu),this.Hd=0,this.rb=Array(new iu),this.sb=0,this.wa=Array(new vl),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new zd),this.L=this.aa=0,this.gd=fe([4,2],vl),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function yl(R,X){return 0>R?0:R>X?X:R}function oh(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Bl(){var R=new _d;return R!=null&&(R.a=0,R.sc="OK",R.cb=0,R.Xb=0,pm||(pm=zc)),R}function Fi(R,X,pe){return R.a==0&&(R.a=X,R.sc=pe,R.cb=0),0}function vc(R,X,pe){return 3<=pe&&R[X+0]==157&&R[X+1]==1&&R[X+2]==42}function Qc(R,X){if(R==null)return 0;if(R.a=0,R.sc="OK",X==null)return Fi(R,2,"null VP8Io passed to VP8GetHeaders()");var pe=X.data,Ee=X.w,$e=X.ha;if(4>$e)return Fi(R,7,"Truncated header.");var We=pe[Ee+0]|pe[Ee+1]<<8|pe[Ee+2]<<16,Ge=R.Od;if(Ge.Rb=!(1&We),Ge.td=We>>1&7,Ge.yd=We>>4&1,Ge.ub=We>>5,3<Ge.td)return Fi(R,3,"Incorrect keyframe parameters.");if(!Ge.yd)return Fi(R,4,"Frame not displayable.");Ee+=3,$e-=3;var Je=R.Kc;if(Ge.Rb){if(7>$e)return Fi(R,7,"cannot parse picture header");if(!vc(pe,Ee,$e))return Fi(R,3,"Bad code word");Je.c=16383&(pe[Ee+4]<<8|pe[Ee+3]),Je.Td=pe[Ee+4]>>6,Je.i=16383&(pe[Ee+6]<<8|pe[Ee+5]),Je.Ud=pe[Ee+6]>>6,Ee+=7,$e-=7,R.za=Je.c+15>>4,R.Ub=Je.i+15>>4,X.width=Je.c,X.height=Je.i,X.Da=0,X.j=0,X.v=0,X.va=X.width,X.o=X.height,X.da=0,X.ib=X.width,X.hb=X.height,X.U=X.width,X.T=X.height,Z((We=R.Pa).jb,0,255,We.jb.length),k((We=R.Qa)!=null),We.Cb=0,We.Bb=0,We.Fb=1,Z(We.Zb,0,0,We.Zb.length),Z(We.Lb,0,0,We.Lb)}if(Ge.ub>$e)return Fi(R,7,"bad partition length");kr(We=R.m,pe,Ee,Ge.ub),Ee+=Ge.ub,$e-=Ge.ub,Ge.Rb&&(Je.Ld=Nr(We),Je.Kd=Nr(We)),Je=R.Qa;var st,bt=R.Pa;if(k(We!=null),k(Je!=null),Je.Cb=Nr(We),Je.Cb){if(Je.Bb=Nr(We),Nr(We)){for(Je.Fb=Nr(We),st=0;4>st;++st)Je.Zb[st]=Nr(We)?ur(We,7):0;for(st=0;4>st;++st)Je.Lb[st]=Nr(We)?ur(We,6):0}if(Je.Bb)for(st=0;3>st;++st)bt.jb[st]=Nr(We)?Rr(We,8):255}else Je.Bb=0;if(We.Ka)return Fi(R,3,"cannot parse segment header");if((Je=R.ed).zd=Nr(We),Je.Tb=Rr(We,6),Je.wb=Rr(We,3),Je.Pc=Nr(We),Je.Pc&&Nr(We)){for(bt=0;4>bt;++bt)Nr(We)&&(Je.vd[bt]=ur(We,6));for(bt=0;4>bt;++bt)Nr(We)&&(Je.od[bt]=ur(We,6))}if(R.L=Je.Tb==0?0:Je.zd?1:2,We.Ka)return Fi(R,3,"cannot parse filter header");var $t=$e;if($e=st=Ee,Ee=st+$t,Je=$t,R.Xb=(1<<Rr(R.m,2))-1,$t<3*(bt=R.Xb))pe=7;else{for(st+=3*bt,Je-=3*bt,$t=0;$t<bt;++$t){var Ar=pe[$e+0]|pe[$e+1]<<8|pe[$e+2]<<16;Ar>Je&&(Ar=Je),kr(R.Jc[+$t],pe,st,Ar),st+=Ar,Je-=Ar,$e+=3}kr(R.Jc[+bt],pe,st,Je),pe=st<Ee?0:5}if(pe!=0)return Fi(R,pe,"cannot parse partitions");for(pe=Rr(st=R.m,7),$e=Nr(st)?ur(st,4):0,Ee=Nr(st)?ur(st,4):0,Je=Nr(st)?ur(st,4):0,bt=Nr(st)?ur(st,4):0,st=Nr(st)?ur(st,4):0,$t=R.Qa,Ar=0;4>Ar;++Ar){if($t.Cb){var xt=$t.Zb[Ar];$t.Fb||(xt+=pe)}else{if(0<Ar){R.pb[Ar]=R.pb[0];continue}xt=pe}var Yt=R.pb[Ar];Yt.Sc[0]=Jm[yl(xt+$e,127)],Yt.Sc[1]=Pg[yl(xt+0,127)],Yt.Eb[0]=2*Jm[yl(xt+Ee,127)],Yt.Eb[1]=101581*Pg[yl(xt+Je,127)]>>16,8>Yt.Eb[1]&&(Yt.Eb[1]=8),Yt.Qc[0]=Jm[yl(xt+bt,117)],Yt.Qc[1]=Pg[yl(xt+st,127)],Yt.lc=xt+st}if(!Ge.Rb)return Fi(R,4,"Not a key frame.");for(Nr(We),Ge=R.Pa,pe=0;4>pe;++pe){for($e=0;8>$e;++$e)for(Ee=0;3>Ee;++Ee)for(Je=0;11>Je;++Je)bt=Zr(We,fp[pe][$e][Ee][Je])?Rr(We,8):Hy[pe][$e][Ee][Je],Ge.Wc[pe][$e].Yb[Ee][Je]=bt;for($e=0;17>$e;++$e)Ge.Xc[pe][$e]=Ge.Wc[pe][mp[$e]]}return R.kc=Nr(We),R.kc&&(R.Bd=Rr(We,8)),R.cb=1}function zc(R,X,pe,Ee,$e,We,Ge){var Je=X[$e].Yb[pe];for(pe=0;16>$e;++$e){if(!Zr(R,Je[pe+0]))return $e;for(;!Zr(R,Je[pe+1]);)if(Je=X[++$e].Yb[0],pe=0,$e==16)return 16;var st=X[$e+1].Yb;if(Zr(R,Je[pe+2])){var bt=R,$t=0;if(Zr(bt,(xt=Je)[(Ar=pe)+3]))if(Zr(bt,xt[Ar+6])){for(Je=0,Ar=2*($t=Zr(bt,xt[Ar+8]))+(xt=Zr(bt,xt[Ar+9+$t])),$t=0,xt=Og[Ar];xt[Je];++Je)$t+=$t+Zr(bt,xt[Je]);$t+=3+(8<<Ar)}else Zr(bt,xt[Ar+7])?($t=7+2*Zr(bt,165),$t+=Zr(bt,145)):$t=5+Zr(bt,159);else $t=Zr(bt,xt[Ar+4])?3+Zr(bt,xt[Ar+5]):2;Je=st[2]}else $t=1,Je=st[1];st=Ge+$y[$e],0>(bt=R).b&&Lr(bt);var Ar,xt=bt.b,Yt=(Ar=bt.Ca>>1)-(bt.I>>xt)>>31;--bt.b,bt.Ca+=Yt,bt.Ca|=1,bt.I-=(Ar+1&Yt)<<xt,We[st]=(($t^Yt)-Yt)*Ee[(0<$e)+0]}return 16}function qu(R){var X=R.rb[R.sb-1];X.la=0,X.Na=0,Z(R.zc,0,0,R.zc.length),R.ja=0}function yc(R,X,pe,Ee,$e){$e=R[X+pe+32*Ee]+($e>>3),R[X+pe+32*Ee]=-256&$e?0>$e?0:255:$e}function Bo(R,X,pe,Ee,$e,We){yc(R,X,0,pe,Ee+$e),yc(R,X,1,pe,Ee+We),yc(R,X,2,pe,Ee-We),yc(R,X,3,pe,Ee-$e)}function su(R){return(20091*R>>16)+R}function v(R,X,pe,Ee){var $e,We=0,Ge=re(16);for($e=0;4>$e;++$e){var Je=R[X+0]+R[X+8],st=R[X+0]-R[X+8],bt=(35468*R[X+4]>>16)-su(R[X+12]),$t=su(R[X+4])+(35468*R[X+12]>>16);Ge[We+0]=Je+$t,Ge[We+1]=st+bt,Ge[We+2]=st-bt,Ge[We+3]=Je-$t,We+=4,X++}for($e=We=0;4>$e;++$e)Je=(R=Ge[We+0]+4)+Ge[We+8],st=R-Ge[We+8],bt=(35468*Ge[We+4]>>16)-su(Ge[We+12]),yc(pe,Ee,0,0,Je+($t=su(Ge[We+4])+(35468*Ge[We+12]>>16))),yc(pe,Ee,1,0,st+bt),yc(pe,Ee,2,0,st-bt),yc(pe,Ee,3,0,Je-$t),We++,Ee+=32}function S(R,X,pe,Ee){var $e=R[X+0]+4,We=35468*R[X+4]>>16,Ge=su(R[X+4]),Je=35468*R[X+1]>>16;Bo(pe,Ee,0,$e+Ge,R=su(R[X+1]),Je),Bo(pe,Ee,1,$e+We,R,Je),Bo(pe,Ee,2,$e-We,R,Je),Bo(pe,Ee,3,$e-Ge,R,Je)}function Q(R,X,pe,Ee,$e){v(R,X,pe,Ee),$e&&v(R,X+16,pe,Ee+4)}function le(R,X,pe,Ee){Cd(R,X+0,pe,Ee,1),Cd(R,X+32,pe,Ee+128,1)}function _e(R,X,pe,Ee){var $e;for(R=R[X+0]+4,$e=0;4>$e;++$e)for(X=0;4>X;++X)yc(pe,Ee,X,$e,R)}function Ke(R,X,pe,Ee){R[X+0]&&sa(R,X+0,pe,Ee),R[X+16]&&sa(R,X+16,pe,Ee+4),R[X+32]&&sa(R,X+32,pe,Ee+128),R[X+48]&&sa(R,X+48,pe,Ee+128+4)}function kt(R,X,pe,Ee){var $e,We=re(16);for($e=0;4>$e;++$e){var Ge=R[X+0+$e]+R[X+12+$e],Je=R[X+4+$e]+R[X+8+$e],st=R[X+4+$e]-R[X+8+$e],bt=R[X+0+$e]-R[X+12+$e];We[0+$e]=Ge+Je,We[8+$e]=Ge-Je,We[4+$e]=bt+st,We[12+$e]=bt-st}for($e=0;4>$e;++$e)Ge=(R=We[0+4*$e]+3)+We[3+4*$e],Je=We[1+4*$e]+We[2+4*$e],st=We[1+4*$e]-We[2+4*$e],bt=R-We[3+4*$e],pe[Ee+0]=Ge+Je>>3,pe[Ee+16]=bt+st>>3,pe[Ee+32]=Ge-Je>>3,pe[Ee+48]=bt-st>>3,Ee+=64}function er(R,X,pe){var Ee,$e=X-32,We=td,Ge=255-R[$e-1];for(Ee=0;Ee<pe;++Ee){var Je,st=We,bt=Ge+R[X-1];for(Je=0;Je<pe;++Je)R[X+Je]=st[bt+R[$e+Je]];X+=32}}function Er(R,X){er(R,X,4)}function Wr(R,X){er(R,X,8)}function bn(R,X){er(R,X,16)}function ui(R,X){var pe;for(pe=0;16>pe;++pe)W(R,X+32*pe,R,X-32,16)}function As(R,X){var pe;for(pe=16;0<pe;--pe)Z(R,X,R[X-1],16),X+=32}function Ma(R,X,pe){var Ee;for(Ee=0;16>Ee;++Ee)Z(X,pe+32*Ee,R,16)}function Co(R,X){var pe,Ee=16;for(pe=0;16>pe;++pe)Ee+=R[X-1+32*pe]+R[X+pe-32];Ma(Ee>>5,R,X)}function il(R,X){var pe,Ee=8;for(pe=0;16>pe;++pe)Ee+=R[X-1+32*pe];Ma(Ee>>4,R,X)}function Zs(R,X){var pe,Ee=8;for(pe=0;16>pe;++pe)Ee+=R[X+pe-32];Ma(Ee>>4,R,X)}function ca(R,X){Ma(128,R,X)}function kn(R,X,pe){return R+2*X+pe+2>>2}function Xu(R,X){var pe,Ee=X-32;for(Ee=new Uint8Array([kn(R[Ee-1],R[Ee+0],R[Ee+1]),kn(R[Ee+0],R[Ee+1],R[Ee+2]),kn(R[Ee+1],R[Ee+2],R[Ee+3]),kn(R[Ee+2],R[Ee+3],R[Ee+4])]),pe=0;4>pe;++pe)W(R,X+32*pe,Ee,0,Ee.length)}function xc(R,X){var pe=R[X-1],Ee=R[X-1+32],$e=R[X-1+64],We=R[X-1+96];An(R,X+0,16843009*kn(R[X-1-32],pe,Ee)),An(R,X+32,16843009*kn(pe,Ee,$e)),An(R,X+64,16843009*kn(Ee,$e,We)),An(R,X+96,16843009*kn($e,We,We))}function Ed(R,X){var pe,Ee=4;for(pe=0;4>pe;++pe)Ee+=R[X+pe-32]+R[X-1+32*pe];for(Ee>>=3,pe=0;4>pe;++pe)Z(R,X+32*pe,Ee,4)}function Yl(R,X){var pe=R[X-1+0],Ee=R[X-1+32],$e=R[X-1+64],We=R[X-1-32],Ge=R[X+0-32],Je=R[X+1-32],st=R[X+2-32],bt=R[X+3-32];R[X+0+96]=kn(Ee,$e,R[X-1+96]),R[X+1+96]=R[X+0+64]=kn(pe,Ee,$e),R[X+2+96]=R[X+1+64]=R[X+0+32]=kn(We,pe,Ee),R[X+3+96]=R[X+2+64]=R[X+1+32]=R[X+0+0]=kn(Ge,We,pe),R[X+3+64]=R[X+2+32]=R[X+1+0]=kn(Je,Ge,We),R[X+3+32]=R[X+2+0]=kn(st,Je,Ge),R[X+3+0]=kn(bt,st,Je)}function Su(R,X){var pe=R[X+1-32],Ee=R[X+2-32],$e=R[X+3-32],We=R[X+4-32],Ge=R[X+5-32],Je=R[X+6-32],st=R[X+7-32];R[X+0+0]=kn(R[X+0-32],pe,Ee),R[X+1+0]=R[X+0+32]=kn(pe,Ee,$e),R[X+2+0]=R[X+1+32]=R[X+0+64]=kn(Ee,$e,We),R[X+3+0]=R[X+2+32]=R[X+1+64]=R[X+0+96]=kn($e,We,Ge),R[X+3+32]=R[X+2+64]=R[X+1+96]=kn(We,Ge,Je),R[X+3+64]=R[X+2+96]=kn(Ge,Je,st),R[X+3+96]=kn(Je,st,st)}function ao(R,X){var pe=R[X-1+0],Ee=R[X-1+32],$e=R[X-1+64],We=R[X-1-32],Ge=R[X+0-32],Je=R[X+1-32],st=R[X+2-32],bt=R[X+3-32];R[X+0+0]=R[X+1+64]=We+Ge+1>>1,R[X+1+0]=R[X+2+64]=Ge+Je+1>>1,R[X+2+0]=R[X+3+64]=Je+st+1>>1,R[X+3+0]=st+bt+1>>1,R[X+0+96]=kn($e,Ee,pe),R[X+0+64]=kn(Ee,pe,We),R[X+0+32]=R[X+1+96]=kn(pe,We,Ge),R[X+1+32]=R[X+2+96]=kn(We,Ge,Je),R[X+2+32]=R[X+3+96]=kn(Ge,Je,st),R[X+3+32]=kn(Je,st,bt)}function ju(R,X){var pe=R[X+0-32],Ee=R[X+1-32],$e=R[X+2-32],We=R[X+3-32],Ge=R[X+4-32],Je=R[X+5-32],st=R[X+6-32],bt=R[X+7-32];R[X+0+0]=pe+Ee+1>>1,R[X+1+0]=R[X+0+64]=Ee+$e+1>>1,R[X+2+0]=R[X+1+64]=$e+We+1>>1,R[X+3+0]=R[X+2+64]=We+Ge+1>>1,R[X+0+32]=kn(pe,Ee,$e),R[X+1+32]=R[X+0+96]=kn(Ee,$e,We),R[X+2+32]=R[X+1+96]=kn($e,We,Ge),R[X+3+32]=R[X+2+96]=kn(We,Ge,Je),R[X+3+64]=kn(Ge,Je,st),R[X+3+96]=kn(Je,st,bt)}function Go(R,X){var pe=R[X-1+0],Ee=R[X-1+32],$e=R[X-1+64],We=R[X-1+96];R[X+0+0]=pe+Ee+1>>1,R[X+2+0]=R[X+0+32]=Ee+$e+1>>1,R[X+2+32]=R[X+0+64]=$e+We+1>>1,R[X+1+0]=kn(pe,Ee,$e),R[X+3+0]=R[X+1+32]=kn(Ee,$e,We),R[X+3+32]=R[X+1+64]=kn($e,We,We),R[X+3+64]=R[X+2+64]=R[X+0+96]=R[X+1+96]=R[X+2+96]=R[X+3+96]=We}function Sd(R,X){var pe=R[X-1+0],Ee=R[X-1+32],$e=R[X-1+64],We=R[X-1+96],Ge=R[X-1-32],Je=R[X+0-32],st=R[X+1-32],bt=R[X+2-32];R[X+0+0]=R[X+2+32]=pe+Ge+1>>1,R[X+0+32]=R[X+2+64]=Ee+pe+1>>1,R[X+0+64]=R[X+2+96]=$e+Ee+1>>1,R[X+0+96]=We+$e+1>>1,R[X+3+0]=kn(Je,st,bt),R[X+2+0]=kn(Ge,Je,st),R[X+1+0]=R[X+3+32]=kn(pe,Ge,Je),R[X+1+32]=R[X+3+64]=kn(Ee,pe,Ge),R[X+1+64]=R[X+3+96]=kn($e,Ee,pe),R[X+1+96]=kn(We,$e,Ee)}function bc(R,X){var pe;for(pe=0;8>pe;++pe)W(R,X+32*pe,R,X-32,8)}function Vd(R,X){var pe;for(pe=0;8>pe;++pe)Z(R,X,R[X-1],8),X+=32}function ql(R,X,pe){var Ee;for(Ee=0;8>Ee;++Ee)Z(X,pe+32*Ee,R,8)}function Tu(R,X){var pe,Ee=8;for(pe=0;8>pe;++pe)Ee+=R[X+pe-32]+R[X-1+32*pe];ql(Ee>>4,R,X)}function wc(R,X){var pe,Ee=4;for(pe=0;8>pe;++pe)Ee+=R[X+pe-32];ql(Ee>>3,R,X)}function Vc(R,X){var pe,Ee=4;for(pe=0;8>pe;++pe)Ee+=R[X-1+32*pe];ql(Ee>>3,R,X)}function Sh(R,X){ql(128,R,X)}function au(R,X,pe){var Ee=R[X-pe],$e=R[X+0],We=3*($e-Ee)+Tg[1020+R[X-2*pe]-R[X+pe]],Ge=up[112+(We+4>>3)];R[X-pe]=td[255+Ee+up[112+(We+3>>3)]],R[X+0]=td[255+$e-Ge]}function jd(R,X,pe,Ee){var $e=R[X+0],We=R[X+pe];return Nd[255+R[X-2*pe]-R[X-pe]]>Ee||Nd[255+We-$e]>Ee}function lh(R,X,pe,Ee){return 4*Nd[255+R[X-pe]-R[X+0]]+Nd[255+R[X-2*pe]-R[X+pe]]<=Ee}function Kc(R,X,pe,Ee,$e){var We=R[X-3*pe],Ge=R[X-2*pe],Je=R[X-pe],st=R[X+0],bt=R[X+pe],$t=R[X+2*pe],Ar=R[X+3*pe];return 4*Nd[255+Je-st]+Nd[255+Ge-bt]>Ee?0:Nd[255+R[X-4*pe]-We]<=$e&&Nd[255+We-Ge]<=$e&&Nd[255+Ge-Je]<=$e&&Nd[255+Ar-$t]<=$e&&Nd[255+$t-bt]<=$e&&Nd[255+bt-st]<=$e}function xo(R,X,pe,Ee){var $e=2*Ee+1;for(Ee=0;16>Ee;++Ee)lh(R,X+Ee,pe,$e)&&au(R,X+Ee,pe)}function jh(R,X,pe,Ee){var $e=2*Ee+1;for(Ee=0;16>Ee;++Ee)lh(R,X+Ee*pe,1,$e)&&au(R,X+Ee*pe,1)}function hm(R,X,pe,Ee){var $e;for($e=3;0<$e;--$e)xo(R,X+=4*pe,pe,Ee)}function Wm(R,X,pe,Ee){var $e;for($e=3;0<$e;--$e)jh(R,X+=4,pe,Ee)}function ch(R,X,pe,Ee,$e,We,Ge,Je){for(We=2*We+1;0<$e--;){if(Kc(R,X,pe,We,Ge))if(jd(R,X,pe,Je))au(R,X,pe);else{var st=R,bt=X,$t=pe,Ar=st[bt-2*$t],xt=st[bt-$t],Yt=st[bt+0],nr=st[bt+$t],Fr=st[bt+2*$t],wr=27*(Vr=Tg[1020+3*(Yt-xt)+Tg[1020+Ar-nr]])+63>>7,Ur=18*Vr+63>>7,Vr=9*Vr+63>>7;st[bt-3*$t]=td[255+st[bt-3*$t]+Vr],st[bt-2*$t]=td[255+Ar+Ur],st[bt-$t]=td[255+xt+wr],st[bt+0]=td[255+Yt-wr],st[bt+$t]=td[255+nr-Ur],st[bt+2*$t]=td[255+Fr-Vr]}X+=Ee}}function uh(R,X,pe,Ee,$e,We,Ge,Je){for(We=2*We+1;0<$e--;){if(Kc(R,X,pe,We,Ge))if(jd(R,X,pe,Je))au(R,X,pe);else{var st=R,bt=X,$t=pe,Ar=st[bt-$t],xt=st[bt+0],Yt=st[bt+$t],nr=up[112+(4+(Fr=3*(xt-Ar))>>3)],Fr=up[112+(Fr+3>>3)],wr=nr+1>>1;st[bt-2*$t]=td[255+st[bt-2*$t]+wr],st[bt-$t]=td[255+Ar+Fr],st[bt+0]=td[255+xt-nr],st[bt+$t]=td[255+Yt-wr]}X+=Ee}}function Po(R,X,pe,Ee,$e,We){ch(R,X,pe,1,16,Ee,$e,We)}function dh(R,X,pe,Ee,$e,We){ch(R,X,1,pe,16,Ee,$e,We)}function Th(R,X,pe,Ee,$e,We){var Ge;for(Ge=3;0<Ge;--Ge)uh(R,X+=4*pe,pe,1,16,Ee,$e,We)}function he(R,X,pe,Ee,$e,We){var Ge;for(Ge=3;0<Ge;--Ge)uh(R,X+=4,1,pe,16,Ee,$e,We)}function Me(R,X,pe,Ee,$e,We,Ge,Je){ch(R,X,$e,1,8,We,Ge,Je),ch(pe,Ee,$e,1,8,We,Ge,Je)}function wt(R,X,pe,Ee,$e,We,Ge,Je){ch(R,X,1,$e,8,We,Ge,Je),ch(pe,Ee,1,$e,8,We,Ge,Je)}function Bt(R,X,pe,Ee,$e,We,Ge,Je){uh(R,X+4*$e,$e,1,8,We,Ge,Je),uh(pe,Ee+4*$e,$e,1,8,We,Ge,Je)}function rr(R,X,pe,Ee,$e,We,Ge,Je){uh(R,X+4,1,$e,8,We,Ge,Je),uh(pe,Ee+4,1,$e,8,We,Ge,Je)}function zr(){this.ba=new Ii,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new cs,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function nn(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function ti(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function ri(){this.ua=0,this.Wa=new Ri,this.vb=new Ri,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new vr,this.yc=new Rt}function Yi(){this.xb=this.a=0,this.l=new oh,this.ca=new Ii,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new Tt,this.Pb=0,this.wd=new Tt,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new ri,this.ab=0,this.gc=ye(4,ti),this.Oc=0}function os(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new oh,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function na(R,X,pe,Ee,$e,We,Ge){for(R=R==null?0:R[X+0],X=0;X<Ge;++X)$e[We+X]=R+pe[Ee+X]&255,R=$e[We+X]}function Fa(R,X,pe,Ee,$e,We,Ge){var Je;if(R==null)na(null,null,pe,Ee,$e,We,Ge);else for(Je=0;Je<Ge;++Je)$e[We+Je]=R[X+Je]+pe[Ee+Je]&255}function Oo(R,X,pe,Ee,$e,We,Ge){if(R==null)na(null,null,pe,Ee,$e,We,Ge);else{var Je,st=R[X+0],bt=st,$t=st;for(Je=0;Je<Ge;++Je)bt=$t+(st=R[X+Je])-bt,$t=pe[Ee+Je]+(-256&bt?0>bt?0:255:bt)&255,bt=st,$e[We+Je]=$t}}function ka(R,X,pe,Ee){var $e=X.width,We=X.o;if(k(R!=null&&X!=null),0>pe||0>=Ee||pe+Ee>We)return null;if(!R.Cc){if(R.ga==null){var Ge;if(R.ga=new os,(Ge=R.ga==null)||(Ge=X.width*X.o,k(R.Gb.length==0),R.Gb=re(Ge),R.Uc=0,R.Gb==null?Ge=0:(R.mb=R.Gb,R.nb=R.Uc,R.rc=null,Ge=1),Ge=!Ge),!Ge){Ge=R.ga;var Je=R.Fa,st=R.P,bt=R.qc,$t=R.mb,Ar=R.nb,xt=st+1,Yt=bt-1,nr=Ge.l;if(k(Je!=null&&$t!=null&&X!=null),kh[0]=null,kh[1]=na,kh[2]=Fa,kh[3]=Oo,Ge.ca=$t,Ge.tb=Ar,Ge.c=X.width,Ge.i=X.height,k(0<Ge.c&&0<Ge.i),1>=bt)X=0;else if(Ge.$a=3&Je[st+0],Ge.Z=Je[st+0]>>2&3,Ge.Lc=Je[st+0]>>4&3,st=Je[st+0]>>6&3,0>Ge.$a||1<Ge.$a||4<=Ge.Z||1<Ge.Lc||st)X=0;else if(nr.put=wi,nr.ac=ec,nr.bc=Da,nr.ma=Ge,nr.width=X.width,nr.height=X.height,nr.Da=X.Da,nr.v=X.v,nr.va=X.va,nr.j=X.j,nr.o=X.o,Ge.$a)e:{k(Ge.$a==1),X=bd();t:for(;;){if(X==null){X=0;break e}if(k(Ge!=null),Ge.mc=X,X.c=Ge.c,X.i=Ge.i,X.l=Ge.l,X.l.ma=Ge,X.l.width=Ge.c,X.l.height=Ge.i,X.a=0,Or(X.m,Je,xt,Yt),!tc(Ge.c,Ge.i,1,X,null)||(X.ab==1&&X.gc[0].hc==3&&Ac(X.s)?(Ge.ic=1,Je=X.c*X.i,X.Ta=null,X.Ua=0,X.V=re(Je),X.Ba=0,X.V==null?(X.a=1,X=0):X=1):(Ge.ic=0,X=Vl(X,Ge.c)),!X))break t;X=1;break e}Ge.mc=null,X=0}else X=Yt>=Ge.c*Ge.i;Ge=!X}if(Ge)return null;R.ga.Lc!=1?R.Ga=0:Ee=We-pe}k(R.ga!=null),k(pe+Ee<=We);e:{if(X=(Je=R.ga).c,We=Je.l.o,Je.$a==0){if(xt=R.rc,Yt=R.Vc,nr=R.Fa,st=R.P+1+pe*X,bt=R.mb,$t=R.nb+pe*X,k(st<=R.P+R.qc),Je.Z!=0)for(k(kh[Je.Z]!=null),Ge=0;Ge<Ee;++Ge)kh[Je.Z](xt,Yt,nr,st,bt,$t,X),xt=bt,Yt=$t,$t+=X,st+=X;else for(Ge=0;Ge<Ee;++Ge)W(bt,$t,nr,st,X),xt=bt,Yt=$t,$t+=X,st+=X;R.rc=xt,R.Vc=Yt}else{if(k(Je.mc!=null),X=pe+Ee,k((Ge=Je.mc)!=null),k(X<=Ge.i),Ge.C>=X)X=1;else if(Je.ic||qe(),Je.ic){Je=Ge.V,xt=Ge.Ba,Yt=Ge.c;var Fr=Ge.i,wr=(nr=1,st=Ge.$/Yt,bt=Ge.$%Yt,$t=Ge.m,Ar=Ge.s,Ge.$),Ur=Yt*Fr,Vr=Yt*X,dn=Ar.wc,sn=wr<Vr?Ja(Ar,bt,st):null;k(wr<=Ur),k(X<=Fr),k(Ac(Ar));t:for(;;){for(;!$t.h&&wr<Vr;){if(bt&dn||(sn=Ja(Ar,bt,st)),k(sn!=null),fr($t),256>(Fr=fa(sn.G[0],sn.H[0],$t)))Je[xt+wr]=Fr,++wr,++bt>=Yt&&(bt=0,++st<=X&&!(st%16)&&Ql(Ge,st));else{if(!(280>Fr)){nr=0;break t}Fr=$l(Fr-256,$t);var Ti,Vn=fa(sn.G[4],sn.H[4],$t);if(fr($t),!(wr>=(Vn=Hl(Yt,Vn=$l(Vn,$t)))&&Ur-wr>=Fr)){nr=0;break t}for(Ti=0;Ti<Fr;++Ti)Je[xt+wr+Ti]=Je[xt+wr+Ti-Vn];for(wr+=Fr,bt+=Fr;bt>=Yt;)bt-=Yt,++st<=X&&!(st%16)&&Ql(Ge,st);wr<Vr&&bt&dn&&(sn=Ja(Ar,bt,st))}k($t.h==Wt($t))}Ql(Ge,st>X?X:st);break t}!nr||$t.h&&wr<Ur?(nr=0,Ge.a=$t.h?5:3):Ge.$=wr,X=nr}else X=zl(Ge,Ge.V,Ge.Ba,Ge.c,Ge.i,X,pc);if(!X){Ee=0;break e}}pe+Ee>=We&&(R.Cc=1),Ee=1}if(!Ee)return null;if(R.Cc&&((Ee=R.ga)!=null&&(Ee.mc=null),R.ga=null,0<R.Ga))return alert("todo:WebPDequantizeLevels"),null}return R.nb+pe*$e}function Wo(R,X,pe,Ee,$e,We){for(;0<$e--;){var Ge,Je=R,st=X+(pe?1:0),bt=R,$t=X+(pe?0:3);for(Ge=0;Ge<Ee;++Ge){var Ar=bt[$t+4*Ge];Ar!=255&&(Ar*=32897,Je[st+4*Ge+0]=Je[st+4*Ge+0]*Ar>>23,Je[st+4*Ge+1]=Je[st+4*Ge+1]*Ar>>23,Je[st+4*Ge+2]=Je[st+4*Ge+2]*Ar>>23)}X+=We}}function O(R,X,pe,Ee,$e){for(;0<Ee--;){var We;for(We=0;We<pe;++We){var Ge=R[X+2*We+0],Je=15&(bt=R[X+2*We+1]),st=4369*Je,bt=(240&bt|bt>>4)*st>>16;R[X+2*We+0]=(240&Ge|Ge>>4)*st>>16&240|(15&Ge|Ge<<4)*st>>16>>4&15,R[X+2*We+1]=240&bt|Je}X+=$e}}function Oe(R,X,pe,Ee,$e,We,Ge,Je){var st,bt,$t=255;for(bt=0;bt<$e;++bt){for(st=0;st<Ee;++st){var Ar=R[X+st];We[Ge+4*st]=Ar,$t&=Ar}X+=pe,Ge+=Je}return $t!=255}function te(R,X,pe,Ee,$e){var We;for(We=0;We<$e;++We)pe[Ee+We]=R[X+We]>>8}function qe(){Xh=Wo,lp=O,Cu=Oe,Kd=te}function Et(R,X,pe){Mt[R]=function(Ee,$e,We,Ge,Je,st,bt,$t,Ar,xt,Yt,nr,Fr,wr,Ur,Vr,dn){var sn,Ti=dn-1>>1,Vn=Je[st+0]|bt[$t+0]<<16,Bs=Ar[xt+0]|Yt[nr+0]<<16;k(Ee!=null);var pi=3*Vn+Bs+131074>>2;for(X(Ee[$e+0],255&pi,pi>>16,Fr,wr),We!=null&&(pi=3*Bs+Vn+131074>>2,X(We[Ge+0],255&pi,pi>>16,Ur,Vr)),sn=1;sn<=Ti;++sn){var ua=Je[st+sn]|bt[$t+sn]<<16,Ol=Ar[xt+sn]|Yt[nr+sn]<<16,Es=Vn+ua+Bs+Ol+524296,hi=Es+2*(ua+Bs)>>3;pi=hi+Vn>>1,Vn=(Es=Es+2*(Vn+Ol)>>3)+ua>>1,X(Ee[$e+2*sn-1],255&pi,pi>>16,Fr,wr+(2*sn-1)*pe),X(Ee[$e+2*sn-0],255&Vn,Vn>>16,Fr,wr+(2*sn-0)*pe),We!=null&&(pi=Es+Bs>>1,Vn=hi+Ol>>1,X(We[Ge+2*sn-1],255&pi,pi>>16,Ur,Vr+(2*sn-1)*pe),X(We[Ge+2*sn+0],255&Vn,Vn>>16,Ur,Vr+(2*sn+0)*pe)),Vn=ua,Bs=Ol}1&dn||(pi=3*Vn+Bs+131074>>2,X(Ee[$e+dn-1],255&pi,pi>>16,Fr,wr+(dn-1)*pe),We!=null&&(pi=3*Bs+Vn+131074>>2,X(We[Ge+dn-1],255&pi,pi>>16,Ur,Vr+(dn-1)*pe)))}}function _t(){Ld[mm]=eA,Ld[dp]=Rg,Ld[Cg]=lv,Ld[Xm]=zy,Ld[Pl]=Vy,Ld[Bf]=Dg,Ld[Ng]=Lh,Ld[kg]=Rg,Ld[hp]=zy,Ld[Am]=Vy,Ld[Lg]=Dg}function yr(R){return R&-16384?0>R?0:255:R>>pp}function Kt(R,X){return yr((19077*R>>8)+(26149*X>>8)-14234)}function Un(R,X,pe){return yr((19077*R>>8)-(6419*X>>8)-(13320*pe>>8)+8708)}function Ft(R,X){return yr((19077*R>>8)+(33050*X>>8)-17685)}function xr(R,X,pe,Ee,$e){Ee[$e+0]=Kt(R,pe),Ee[$e+1]=Un(R,X,pe),Ee[$e+2]=Ft(R,X)}function qi(R,X,pe,Ee,$e){Ee[$e+0]=Ft(R,X),Ee[$e+1]=Un(R,X,pe),Ee[$e+2]=Kt(R,pe)}function Ln(R,X,pe,Ee,$e){var We=Un(R,X,pe);X=We<<3&224|Ft(R,X)>>3,Ee[$e+0]=248&Kt(R,pe)|We>>5,Ee[$e+1]=X}function an(R,X,pe,Ee,$e){var We=240&Ft(R,X)|15;Ee[$e+0]=240&Kt(R,pe)|Un(R,X,pe)>>4,Ee[$e+1]=We}function Mr(R,X,pe,Ee,$e){Ee[$e+0]=255,xr(R,X,pe,Ee,$e+1)}function Ua(R,X,pe,Ee,$e){qi(R,X,pe,Ee,$e),Ee[$e+3]=255}function Wi(R,X,pe,Ee,$e){xr(R,X,pe,Ee,$e),Ee[$e+3]=255}function ki(R,X,pe){Mt[R]=function(Ee,$e,We,Ge,Je,st,bt,$t,Ar){for(var xt=$t+(-2&Ar)*pe;$t!=xt;)X(Ee[$e+0],We[Ge+0],Je[st+0],bt,$t),X(Ee[$e+1],We[Ge+0],Je[st+0],bt,$t+pe),$e+=2,++Ge,++st,$t+=2*pe;1&Ar&&X(Ee[$e+0],We[Ge+0],Je[st+0],bt,$t)}}function zi(R,X,pe){return pe==0?R==0?X==0?6:5:X==0?4:0:pe}function xs(R,X,pe,Ee,$e){switch(R>>>30){case 3:Cd(X,pe,Ee,$e,0);break;case 2:_c(X,pe,Ee,$e);break;case 1:sa(X,pe,Ee,$e)}}function En(R,X){var pe,Ee,$e=X.M,We=X.Nb,Ge=R.oc,Je=R.pc+40,st=R.oc,bt=R.pc+584,$t=R.oc,Ar=R.pc+600;for(pe=0;16>pe;++pe)Ge[Je+32*pe-1]=129;for(pe=0;8>pe;++pe)st[bt+32*pe-1]=129,$t[Ar+32*pe-1]=129;for(0<$e?Ge[Je-1-32]=st[bt-1-32]=$t[Ar-1-32]=129:(Z(Ge,Je-32-1,127,21),Z(st,bt-32-1,127,9),Z($t,Ar-32-1,127,9)),Ee=0;Ee<R.za;++Ee){var xt=X.ya[X.aa+Ee];if(0<Ee){for(pe=-1;16>pe;++pe)W(Ge,Je+32*pe-4,Ge,Je+32*pe+12,4);for(pe=-1;8>pe;++pe)W(st,bt+32*pe-4,st,bt+32*pe+4,4),W($t,Ar+32*pe-4,$t,Ar+32*pe+4,4)}var Yt=R.Gd,nr=R.Hd+Ee,Fr=xt.ad,wr=xt.Hc;if(0<$e&&(W(Ge,Je-32,Yt[nr].y,0,16),W(st,bt-32,Yt[nr].f,0,8),W($t,Ar-32,Yt[nr].ea,0,8)),xt.Za){var Ur=Ge,Vr=Je-32+16;for(0<$e&&(Ee>=R.za-1?Z(Ur,Vr,Yt[nr].y[15],4):W(Ur,Vr,Yt[nr+1].y,0,4)),pe=0;4>pe;pe++)Ur[Vr+128+pe]=Ur[Vr+256+pe]=Ur[Vr+384+pe]=Ur[Vr+0+pe];for(pe=0;16>pe;++pe,wr<<=2)Ur=Ge,Vr=Je+Zh[pe],kd[xt.Ob[pe]](Ur,Vr),xs(wr,Fr,16*+pe,Ur,Vr)}else if(Ur=zi(Ee,$e,xt.Ob[0]),Nh[Ur](Ge,Je),wr!=0)for(pe=0;16>pe;++pe,wr<<=2)xs(wr,Fr,16*+pe,Ge,Je+Zh[pe]);for(pe=xt.Gc,Ur=zi(Ee,$e,xt.Dd),Gd[Ur](st,bt),Gd[Ur]($t,Ar),wr=Fr,Ur=st,Vr=bt,255&(xt=0|pe)&&(170&xt?ed(wr,256,Ur,Vr):eo(wr,256,Ur,Vr)),xt=$t,wr=Ar,255&(pe>>=8)&&(170&pe?ed(Fr,320,xt,wr):eo(Fr,320,xt,wr)),$e<R.Ub-1&&(W(Yt[nr].y,0,Ge,Je+480,16),W(Yt[nr].f,0,st,bt+224,8),W(Yt[nr].ea,0,$t,Ar+224,8)),pe=8*We*R.B,Yt=R.sa,nr=R.ta+16*Ee+16*We*R.R,Fr=R.qa,xt=R.ra+8*Ee+pe,wr=R.Ha,Ur=R.Ia+8*Ee+pe,pe=0;16>pe;++pe)W(Yt,nr+pe*R.R,Ge,Je+32*pe,16);for(pe=0;8>pe;++pe)W(Fr,xt+pe*R.B,st,bt+32*pe,8),W(wr,Ur+pe*R.B,$t,Ar+32*pe,8)}}function bs(R,X,pe,Ee,$e,We,Ge,Je,st){var bt=[0],$t=[0],Ar=0,xt=st!=null?st.kd:0,Yt=st??new nn;if(R==null||12>pe)return 7;Yt.data=R,Yt.w=X,Yt.ha=pe,X=[X],pe=[pe],Yt.gb=[Yt.gb];e:{var nr=X,Fr=pe,wr=Yt.gb;if(k(R!=null),k(Fr!=null),k(wr!=null),wr[0]=0,12<=Fr[0]&&!M(R,nr[0],"RIFF")){if(M(R,nr[0]+8,"WEBP")){wr=3;break e}var Ur=xi(R,nr[0]+4);if(12>Ur||4294967286<Ur){wr=3;break e}if(xt&&Ur>Fr[0]-8){wr=7;break e}wr[0]=Ur,nr[0]+=12,Fr[0]-=12}wr=0}if(wr!=0)return wr;for(Ur=0<Yt.gb[0],pe=pe[0];;){e:{var Vr=R;Fr=X,wr=pe;var dn=bt,sn=$t,Ti=nr=[0];if((pi=Ar=[Ar])[0]=0,8>wr[0])wr=7;else{if(!M(Vr,Fr[0],"VP8X")){if(xi(Vr,Fr[0]+4)!=10){wr=3;break e}if(18>wr[0]){wr=7;break e}var Vn=xi(Vr,Fr[0]+8),Bs=1+Fn(Vr,Fr[0]+12);if(2147483648<=Bs*(Vr=1+Fn(Vr,Fr[0]+15))){wr=3;break e}Ti!=null&&(Ti[0]=Vn),dn!=null&&(dn[0]=Bs),sn!=null&&(sn[0]=Vr),Fr[0]+=18,wr[0]-=18,pi[0]=1}wr=0}}if(Ar=Ar[0],nr=nr[0],wr!=0)return wr;if(Fr=!!(2&nr),!Ur&&Ar)return 3;if(We!=null&&(We[0]=!!(16&nr)),Ge!=null&&(Ge[0]=Fr),Je!=null&&(Je[0]=0),Ge=bt[0],nr=$t[0],Ar&&Fr&&st==null){wr=0;break}if(4>pe){wr=7;break}if(Ur&&Ar||!Ur&&!Ar&&!M(R,X[0],"ALPH")){pe=[pe],Yt.na=[Yt.na],Yt.P=[Yt.P],Yt.Sa=[Yt.Sa];e:{Vn=R,wr=X,Ur=pe;var pi=Yt.gb;dn=Yt.na,sn=Yt.P,Ti=Yt.Sa,Bs=22,k(Vn!=null),k(Ur!=null),Vr=wr[0];var ua=Ur[0];for(k(dn!=null),k(Ti!=null),dn[0]=null,sn[0]=null,Ti[0]=0;;){if(wr[0]=Vr,Ur[0]=ua,8>ua){wr=7;break e}var Ol=xi(Vn,Vr+4);if(4294967286<Ol){wr=3;break e}var Es=8+Ol+1&-2;if(Bs+=Es,0<pi&&Bs>pi){wr=3;break e}if(!M(Vn,Vr,"VP8 ")||!M(Vn,Vr,"VP8L")){wr=0;break e}if(ua[0]<Es){wr=7;break e}M(Vn,Vr,"ALPH")||(dn[0]=Vn,sn[0]=Vr+8,Ti[0]=Ol),Vr+=Es,ua-=Es}}if(pe=pe[0],Yt.na=Yt.na[0],Yt.P=Yt.P[0],Yt.Sa=Yt.Sa[0],wr!=0)break}pe=[pe],Yt.Ja=[Yt.Ja],Yt.xa=[Yt.xa];e:if(pi=R,wr=X,Ur=pe,dn=Yt.gb[0],sn=Yt.Ja,Ti=Yt.xa,Vn=wr[0],Vr=!M(pi,Vn,"VP8 "),Bs=!M(pi,Vn,"VP8L"),k(pi!=null),k(Ur!=null),k(sn!=null),k(Ti!=null),8>Ur[0])wr=7;else{if(Vr||Bs){if(pi=xi(pi,Vn+4),12<=dn&&pi>dn-12){wr=3;break e}if(xt&&pi>Ur[0]-8){wr=7;break e}sn[0]=pi,wr[0]+=8,Ur[0]-=8,Ti[0]=Bs}else Ti[0]=5<=Ur[0]&&pi[Vn+0]==47&&!(pi[Vn+4]>>5),sn[0]=Ur[0];wr=0}if(pe=pe[0],Yt.Ja=Yt.Ja[0],Yt.xa=Yt.xa[0],X=X[0],wr!=0)break;if(4294967286<Yt.Ja)return 3;if(Je==null||Fr||(Je[0]=Yt.xa?2:1),Ge=[Ge],nr=[nr],Yt.xa){if(5>pe){wr=7;break}Je=Ge,xt=nr,Fr=We,R==null||5>pe?R=0:5<=pe&&R[X+0]==47&&!(R[X+4]>>5)?(Ur=[0],pi=[0],dn=[0],Or(sn=new Tt,R,X,pe),Za(sn,Ur,pi,dn)?(Je!=null&&(Je[0]=Ur[0]),xt!=null&&(xt[0]=pi[0]),Fr!=null&&(Fr[0]=dn[0]),R=1):R=0):R=0}else{if(10>pe){wr=7;break}Je=nr,R==null||10>pe||!vc(R,X+3,pe-3)?R=0:(xt=R[X+0]|R[X+1]<<8|R[X+2]<<16,Fr=16383&(R[X+7]<<8|R[X+6]),R=16383&(R[X+9]<<8|R[X+8]),1&xt||3<(xt>>1&7)||!(xt>>4&1)||xt>>5>=Yt.Ja||!Fr||!R?R=0:(Ge&&(Ge[0]=Fr),Je&&(Je[0]=R),R=1))}if(!R||(Ge=Ge[0],nr=nr[0],Ar&&(bt[0]!=Ge||$t[0]!=nr)))return 3;st!=null&&(st[0]=Yt,st.offset=X-st.w,k(4294967286>X-st.w),k(st.offset==st.ha-pe));break}return wr==0||wr==7&&Ar&&st==null?(We!=null&&(We[0]|=Yt.na!=null&&0<Yt.na.length),Ee!=null&&(Ee[0]=Ge),$e!=null&&($e[0]=nr),0):wr}function $a(R,X,pe){var Ee=X.width,$e=X.height,We=0,Ge=0,Je=Ee,st=$e;if(X.Da=R!=null&&0<R.Da,X.Da&&(Je=R.cd,st=R.bd,We=R.v,Ge=R.j,11>pe||(We&=-2,Ge&=-2),0>We||0>Ge||0>=Je||0>=st||We+Je>Ee||Ge+st>$e))return 0;if(X.v=We,X.j=Ge,X.va=We+Je,X.o=Ge+st,X.U=Je,X.T=st,X.da=R!=null&&0<R.da,X.da){if(!Cn(Je,st,pe=[R.ib],We=[R.hb]))return 0;X.ib=pe[0],X.hb=We[0]}return X.ob=R!=null&&R.ob,X.Kb=R==null||!R.Sd,X.da&&(X.ob=X.ib<3*Ee/4&&X.hb<3*$e/4,X.Kb=0),1}function ji(R){if(R==null)return 2;if(11>R.S){var X=R.f.RGBA;X.fb+=(R.height-1)*X.A,X.A=-X.A}else X=R.f.kb,R=R.height,X.O+=(R-1)*X.fa,X.fa=-X.fa,X.N+=(R-1>>1)*X.Ab,X.Ab=-X.Ab,X.W+=(R-1>>1)*X.Db,X.Db=-X.Db,X.F!=null&&(X.J+=(R-1)*X.lb,X.lb=-X.lb);return 0}function ia(R,X,pe,Ee){if(Ee==null||0>=R||0>=X)return 2;if(pe!=null){if(pe.Da){var $e=pe.cd,We=pe.bd,Ge=-2&pe.v,Je=-2&pe.j;if(0>Ge||0>Je||0>=$e||0>=We||Ge+$e>R||Je+We>X)return 2;R=$e,X=We}if(pe.da){if(!Cn(R,X,$e=[pe.ib],We=[pe.hb]))return 2;R=$e[0],X=We[0]}}Ee.width=R,Ee.height=X;e:{var st=Ee.width,bt=Ee.height;if(R=Ee.S,0>=st||0>=bt||!(R>=mm&&13>R))R=2;else{if(0>=Ee.Rd&&Ee.sd==null){Ge=We=$e=X=0;var $t=(Je=st*rA[R])*bt;if(11>R||(We=(bt+1)/2*(X=(st+1)/2),R==12&&(Ge=($e=st)*bt)),(bt=re($t+2*We+Ge))==null){R=1;break e}Ee.sd=bt,11>R?((st=Ee.f.RGBA).eb=bt,st.fb=0,st.A=Je,st.size=$t):((st=Ee.f.kb).y=bt,st.O=0,st.fa=Je,st.Fd=$t,st.f=bt,st.N=0+$t,st.Ab=X,st.Cd=We,st.ea=bt,st.W=0+$t+We,st.Db=X,st.Ed=We,R==12&&(st.F=bt,st.J=0+$t+2*We),st.Tc=Ge,st.lb=$e)}if(X=1,$e=Ee.S,We=Ee.width,Ge=Ee.height,$e>=mm&&13>$e)if(11>$e)R=Ee.f.RGBA,X&=(Je=Math.abs(R.A))*(Ge-1)+We<=R.size,X&=Je>=We*rA[$e],X&=R.eb!=null;else{R=Ee.f.kb,Je=(We+1)/2,$t=(Ge+1)/2,st=Math.abs(R.fa),bt=Math.abs(R.Ab);var Ar=Math.abs(R.Db),xt=Math.abs(R.lb),Yt=xt*(Ge-1)+We;X&=st*(Ge-1)+We<=R.Fd,X&=bt*($t-1)+Je<=R.Cd,X=(X&=Ar*($t-1)+Je<=R.Ed)&st>=We&bt>=Je&Ar>=Je,X&=R.y!=null,X&=R.f!=null,X&=R.ea!=null,$e==12&&(X&=xt>=We,X&=Yt<=R.Tc,X&=R.F!=null)}else X=0;R=X?0:2}}return R!=0||pe!=null&&pe.fd&&(R=ji(Ee)),R}var Ls=64,ni=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],$i=24,nc=32,Zu=8,ou=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];$n("Predictor0","PredictorAdd0"),Mt.Predictor0=function(){return 4278190080},Mt.Predictor1=function(R){return R},Mt.Predictor2=function(R,X,pe){return X[pe+0]},Mt.Predictor3=function(R,X,pe){return X[pe+1]},Mt.Predictor4=function(R,X,pe){return X[pe-1]},Mt.Predictor5=function(R,X,pe){return Qn(Qn(R,X[pe+1]),X[pe+0])},Mt.Predictor6=function(R,X,pe){return Qn(R,X[pe-1])},Mt.Predictor7=function(R,X,pe){return Qn(R,X[pe+0])},Mt.Predictor8=function(R,X,pe){return Qn(X[pe-1],X[pe+0])},Mt.Predictor9=function(R,X,pe){return Qn(X[pe+0],X[pe+1])},Mt.Predictor10=function(R,X,pe){return Qn(Qn(R,X[pe-1]),Qn(X[pe+0],X[pe+1]))},Mt.Predictor11=function(R,X,pe){var Ee=X[pe+0];return 0>=Wn(Ee>>24&255,R>>24&255,(X=X[pe-1])>>24&255)+Wn(Ee>>16&255,R>>16&255,X>>16&255)+Wn(Ee>>8&255,R>>8&255,X>>8&255)+Wn(255&Ee,255&R,255&X)?Ee:R},Mt.Predictor12=function(R,X,pe){var Ee=X[pe+0];return(va((R>>24&255)+(Ee>>24&255)-((X=X[pe-1])>>24&255))<<24|va((R>>16&255)+(Ee>>16&255)-(X>>16&255))<<16|va((R>>8&255)+(Ee>>8&255)-(X>>8&255))<<8|va((255&R)+(255&Ee)-(255&X)))>>>0},Mt.Predictor13=function(R,X,pe){var Ee=X[pe-1];return(Di((R=Qn(R,X[pe+0]))>>24&255,Ee>>24&255)<<24|Di(R>>16&255,Ee>>16&255)<<16|Di(R>>8&255,Ee>>8&255)<<8|Di(255&R,255&Ee))>>>0};var xl=Mt.PredictorAdd0;Mt.PredictorAdd1=is,$n("Predictor2","PredictorAdd2"),$n("Predictor3","PredictorAdd3"),$n("Predictor4","PredictorAdd4"),$n("Predictor5","PredictorAdd5"),$n("Predictor6","PredictorAdd6"),$n("Predictor7","PredictorAdd7"),$n("Predictor8","PredictorAdd8"),$n("Predictor9","PredictorAdd9"),$n("Predictor10","PredictorAdd10"),$n("Predictor11","PredictorAdd11"),$n("Predictor12","PredictorAdd12"),$n("Predictor13","PredictorAdd13");var ic=Mt.PredictorAdd2;Yn("ColorIndexInverseTransform","MapARGB","32b",function(R){return R>>8&255},function(R){return R}),Yn("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(R){return R},function(R){return R>>8&255});var oo,Ym=Mt.ColorIndexInverseTransform,hh=Mt.MapARGB,Gc=Mt.VP8LColorIndexInverseTransformAlpha,Wc=Mt.MapAlpha,Ro=Mt.VP8LPredictorsAdd=[];Ro.length=16,(Mt.VP8LPredictors=[]).length=16,(Mt.VP8LPredictorsAdd_C=[]).length=16,(Mt.VP8LPredictors_C=[]).length=16;var If,Td,Ji,ma,bo,Ch,Ju,Cd,_c,ed,sa,eo,Is,bl,fh,fm,qh,qm,ip,sp,ap,Yc,Yo,op,Xh,lp,Cu,Kd,cp=re(511),Sg=re(2041),jg=re(225),rv=re(767),nv=0,Tg=Sg,up=jg,td=rv,Nd=cp,mm=0,dp=1,Cg=2,Xm=3,Pl=4,Bf=5,Ng=6,kg=7,hp=8,Am=9,Lg=10,Fy=[2,3,7],D1=[3,3,11],iv=[280,256,256,256,40],Zm=[0,1,1,1,0],Uy=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Ig=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Bg=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],sv=8,Jm=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Pg=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],pm=null,Og=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],$y=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],av=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Hy=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],ov=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],fp=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],mp=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Nh=[],kd=[],Gd=[],Qy=1,Ap=2,kh=[],Ld=[];Et("UpsampleRgbLinePair",xr,3),Et("UpsampleBgrLinePair",qi,3),Et("UpsampleRgbaLinePair",Wi,4),Et("UpsampleBgraLinePair",Ua,4),Et("UpsampleArgbLinePair",Mr,4),Et("UpsampleRgba4444LinePair",an,2),Et("UpsampleRgb565LinePair",Ln,2);var eA=Mt.UpsampleRgbLinePair,lv=Mt.UpsampleBgrLinePair,Rg=Mt.UpsampleRgbaLinePair,zy=Mt.UpsampleBgraLinePair,Vy=Mt.UpsampleArgbLinePair,Dg=Mt.UpsampleRgba4444LinePair,Lh=Mt.UpsampleRgb565LinePair,Pf=16,Ih=1<<Pf-1,tA=-227,Mg=482,pp=6,cv=0,Fg=re(256),Ug=re(256),$g=re(256),Hg=re(256),Qg=re(Mg-tA),uv=re(Mg-tA);ki("YuvToRgbRow",xr,3),ki("YuvToBgrRow",qi,3),ki("YuvToRgbaRow",Wi,4),ki("YuvToBgraRow",Ua,4),ki("YuvToArgbRow",Mr,4),ki("YuvToRgba4444Row",an,2),ki("YuvToRgb565Row",Ln,2);var Zh=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],gp=[0,2,8],vp=[8,7,6,4,4,2,2,2,1,1,1,1],yp=1;this.WebPDecodeRGBA=function(R,X,pe,Ee,$e){var We=dp,Ge=new zr,Je=new Ii;Ge.ba=Je,Je.S=We,Je.width=[Je.width],Je.height=[Je.height];var st=Je.width,bt=Je.height,$t=new _n;if($t==null||R==null)var Ar=2;else k($t!=null),Ar=bs(R,X,pe,$t.width,$t.height,$t.Pd,$t.Qd,$t.format,null);if(Ar!=0?st=0:(st!=null&&(st[0]=$t.width[0]),bt!=null&&(bt[0]=$t.height[0]),st=1),st){Je.width=Je.width[0],Je.height=Je.height[0],Ee!=null&&(Ee[0]=Je.width),$e!=null&&($e[0]=Je.height);e:{if(Ee=new oh,($e=new nn).data=R,$e.w=X,$e.ha=pe,$e.kd=1,X=[0],k($e!=null),((R=bs($e.data,$e.w,$e.ha,null,null,null,X,null,$e))==0||R==7)&&X[0]&&(R=4),(X=R)==0){if(k(Ge!=null),Ee.data=$e.data,Ee.w=$e.w+$e.offset,Ee.ha=$e.ha-$e.offset,Ee.put=wi,Ee.ac=ec,Ee.bc=Da,Ee.ma=Ge,$e.xa){if((R=bd())==null){Ge=1;break e}if((function(xt,Yt){var nr=[0],Fr=[0],wr=[0];t:for(;;){if(xt==null)return 0;if(Yt==null)return xt.a=2,0;if(xt.l=Yt,xt.a=0,Or(xt.m,Yt.data,Yt.w,Yt.ha),!Za(xt.m,nr,Fr,wr)){xt.a=3;break t}if(xt.xb=Ap,Yt.width=nr[0],Yt.height=Fr[0],!tc(nr[0],Fr[0],1,xt,null))break t;return 1}return k(xt.a!=0),0})(R,Ee)){if(Ee=(X=ia(Ee.width,Ee.height,Ge.Oa,Ge.ba))==0){t:{Ee=R;r:for(;;){if(Ee==null){Ee=0;break t}if(k(Ee.s.yc!=null),k(Ee.s.Ya!=null),k(0<Ee.s.Wb),k((pe=Ee.l)!=null),k(($e=pe.ma)!=null),Ee.xb!=0){if(Ee.ca=$e.ba,Ee.tb=$e.tb,k(Ee.ca!=null),!$a($e.Oa,pe,Xm)){Ee.a=2;break r}if(!Vl(Ee,pe.width)||pe.da)break r;if((pe.da||Qi(Ee.ca.S))&&qe(),11>Ee.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),Ee.ca.f.kb.F!=null&&qe()),Ee.Pb&&0<Ee.s.ua&&Ee.s.vb.X==null&&!yt(Ee.s.vb,Ee.s.Wa.Xa)){Ee.a=1;break r}Ee.xb=0}if(!zl(Ee,Ee.V,Ee.Ba,Ee.c,Ee.i,pe.o,To))break r;$e.Dc=Ee.Ma,Ee=1;break t}k(Ee.a!=0),Ee=0}Ee=!Ee}Ee&&(X=R.a)}else X=R.a}else{if((R=new Bl)==null){Ge=1;break e}if(R.Fa=$e.na,R.P=$e.P,R.qc=$e.Sa,Qc(R,Ee)){if((X=ia(Ee.width,Ee.height,Ge.Oa,Ge.ba))==0){if(R.Aa=0,pe=Ge.Oa,k(($e=R)!=null),pe!=null){if(0<(st=0>(st=pe.Md)?0:100<st?255:255*st/100)){for(bt=$t=0;4>bt;++bt)12>(Ar=$e.pb[bt]).lc&&(Ar.ia=st*vp[0>Ar.lc?0:Ar.lc]>>3),$t|=Ar.ia;$t&&(alert("todo:VP8InitRandom"),$e.ia=1)}$e.Ga=pe.Id,100<$e.Ga?$e.Ga=100:0>$e.Ga&&($e.Ga=0)}(function(xt,Yt){if(xt==null)return 0;if(Yt==null)return Fi(xt,2,"NULL VP8Io parameter in VP8Decode().");if(!xt.cb&&!Qc(xt,Yt))return 0;if(k(xt.cb),Yt.ac==null||Yt.ac(Yt)){Yt.ob&&(xt.L=0);var nr=gp[xt.L];if(xt.L==2?(xt.yb=0,xt.zb=0):(xt.yb=Yt.v-nr>>4,xt.zb=Yt.j-nr>>4,0>xt.yb&&(xt.yb=0),0>xt.zb&&(xt.zb=0)),xt.Va=Yt.o+15+nr>>4,xt.Hb=Yt.va+15+nr>>4,xt.Hb>xt.za&&(xt.Hb=xt.za),xt.Va>xt.Ub&&(xt.Va=xt.Ub),0<xt.L){var Fr=xt.ed;for(nr=0;4>nr;++nr){var wr;if(xt.Qa.Cb){var Ur=xt.Qa.Lb[nr];xt.Qa.Fb||(Ur+=Fr.Tb)}else Ur=Fr.Tb;for(wr=0;1>=wr;++wr){var Vr=xt.gd[nr][wr],dn=Ur;if(Fr.Pc&&(dn+=Fr.vd[0],wr&&(dn+=Fr.od[0])),0<(dn=0>dn?0:63<dn?63:dn)){var sn=dn;0<Fr.wb&&(sn=4<Fr.wb?sn>>2:sn>>1)>9-Fr.wb&&(sn=9-Fr.wb),1>sn&&(sn=1),Vr.dd=sn,Vr.tc=2*dn+sn,Vr.ld=40<=dn?2:15<=dn?1:0}else Vr.tc=0;Vr.La=wr}}}nr=0}else Fi(xt,6,"Frame setup failed"),nr=xt.a;if(nr=nr==0){if(nr){xt.$c=0,0<xt.Aa||(xt.Ic=yp);t:{nr=xt.Ic,Fr=4*(sn=xt.za);var Ti=32*sn,Vn=sn+1,Bs=0<xt.L?sn*(0<xt.Aa?2:1):0,pi=(xt.Aa==2?2:1)*sn;if((Vr=Fr+832+(wr=3*(16*nr+gp[xt.L])/2*Ti)+(Ur=xt.Fa!=null&&0<xt.Fa.length?xt.Kc.c*xt.Kc.i:0))!=Vr)nr=0;else{if(Vr>xt.Vb){if(xt.Vb=0,xt.Ec=re(Vr),xt.Fc=0,xt.Ec==null){nr=Fi(xt,1,"no memory during frame initialization.");break t}xt.Vb=Vr}Vr=xt.Ec,dn=xt.Fc,xt.Ac=Vr,xt.Bc=dn,dn+=Fr,xt.Gd=ye(Ti,Yu),xt.Hd=0,xt.rb=ye(Vn+1,iu),xt.sb=1,xt.wa=Bs?ye(Bs,vl):null,xt.Y=0,xt.D.Nb=0,xt.D.wa=xt.wa,xt.D.Y=xt.Y,0<xt.Aa&&(xt.D.Y+=sn),k(!0),xt.oc=Vr,xt.pc=dn,dn+=832,xt.ya=ye(pi,zd),xt.aa=0,xt.D.ya=xt.ya,xt.D.aa=xt.aa,xt.Aa==2&&(xt.D.aa+=sn),xt.R=16*sn,xt.B=8*sn,sn=(Ti=gp[xt.L])*xt.R,Ti=Ti/2*xt.B,xt.sa=Vr,xt.ta=dn+sn,xt.qa=xt.sa,xt.ra=xt.ta+16*nr*xt.R+Ti,xt.Ha=xt.qa,xt.Ia=xt.ra+8*nr*xt.B+Ti,xt.$c=0,dn+=wr,xt.mb=Ur?Vr:null,xt.nb=Ur?dn:null,k(dn+Ur<=xt.Fc+xt.Vb),qu(xt),Z(xt.Ac,xt.Bc,0,Fr),nr=1}}if(nr){if(Yt.ka=0,Yt.y=xt.sa,Yt.O=xt.ta,Yt.f=xt.qa,Yt.N=xt.ra,Yt.ea=xt.Ha,Yt.Vd=xt.Ia,Yt.fa=xt.R,Yt.Rc=xt.B,Yt.F=null,Yt.J=0,!nv){for(nr=-255;255>=nr;++nr)cp[255+nr]=0>nr?-nr:nr;for(nr=-1020;1020>=nr;++nr)Sg[1020+nr]=-128>nr?-128:127<nr?127:nr;for(nr=-112;112>=nr;++nr)jg[112+nr]=-16>nr?-16:15<nr?15:nr;for(nr=-255;510>=nr;++nr)rv[255+nr]=0>nr?0:255<nr?255:nr;nv=1}Ju=kt,Cd=Q,ed=le,sa=_e,eo=Ke,_c=S,Is=Po,bl=dh,fh=Me,fm=wt,qh=Th,qm=he,ip=Bt,sp=rr,ap=xo,Yc=jh,Yo=hm,op=Wm,kd[0]=Ed,kd[1]=Er,kd[2]=Xu,kd[3]=xc,kd[4]=Yl,kd[5]=ao,kd[6]=Su,kd[7]=ju,kd[8]=Sd,kd[9]=Go,Nh[0]=Co,Nh[1]=bn,Nh[2]=ui,Nh[3]=As,Nh[4]=il,Nh[5]=Zs,Nh[6]=ca,Gd[0]=Tu,Gd[1]=Wr,Gd[2]=bc,Gd[3]=Vd,Gd[4]=Vc,Gd[5]=wc,Gd[6]=Sh,nr=1}else nr=0}nr&&(nr=(function(ua,Ol){for(ua.M=0;ua.M<ua.Va;++ua.M){var Es,hi=ua.Jc[ua.M&ua.Xb],Rn=ua.m,sl=ua;for(Es=0;Es<sl.za;++Es){var Ss=Rn,Ds=sl,wo=Ds.Ac,sc=Ds.Bc+4*Es,Ec=Ds.zc,Ha=Ds.ya[Ds.aa+Es];if(Ds.Qa.Bb?Ha.$b=Zr(Ss,Ds.Pa.jb[0])?2+Zr(Ss,Ds.Pa.jb[2]):Zr(Ss,Ds.Pa.jb[1]):Ha.$b=0,Ds.kc&&(Ha.Ad=Zr(Ss,Ds.Bd)),Ha.Za=!Zr(Ss,145)+0,Ha.Za){var Sc=Ha.Ob,lu=0;for(Ds=0;4>Ds;++Ds){var al,aa=Ec[0+Ds];for(al=0;4>al;++al){aa=ov[wo[sc+al]][aa];for(var Vi=av[Zr(Ss,aa[0])];0<Vi;)Vi=av[2*Vi+Zr(Ss,aa[Vi])];aa=-Vi,wo[sc+al]=aa}W(Sc,lu,wo,sc,4),lu+=4,Ec[0+Ds]=aa}}else aa=Zr(Ss,156)?Zr(Ss,128)?1:3:Zr(Ss,163)?2:0,Ha.Ob[0]=aa,Z(wo,sc,aa,4),Z(Ec,0,aa,4);Ha.Dd=Zr(Ss,142)?Zr(Ss,114)?Zr(Ss,183)?1:3:2:0}if(sl.m.Ka)return Fi(ua,7,"Premature end-of-partition0 encountered.");for(;ua.ja<ua.za;++ua.ja){if(sl=hi,Ss=(Rn=ua).rb[Rn.sb-1],wo=Rn.rb[Rn.sb+Rn.ja],Es=Rn.ya[Rn.aa+Rn.ja],sc=Rn.kc?Es.Ad:0)Ss.la=wo.la=0,Es.Za||(Ss.Na=wo.Na=0),Es.Hc=0,Es.Gc=0,Es.ia=0;else{var wl,to;if(Ss=wo,wo=sl,sc=Rn.Pa.Xc,Ec=Rn.ya[Rn.aa+Rn.ja],Ha=Rn.pb[Ec.$b],Ds=Ec.ad,Sc=0,lu=Rn.rb[Rn.sb-1],aa=al=0,Z(Ds,Sc,0,384),Ec.Za)var jc=0,qc=sc[3];else{Vi=re(16);var lo=Ss.Na+lu.Na;if(lo=pm(wo,sc[1],lo,Ha.Eb,0,Vi,0),Ss.Na=lu.Na=(0<lo)+0,1<lo)Ju(Vi,0,Ds,Sc);else{var Xc=Vi[0]+3>>3;for(Vi=0;256>Vi;Vi+=16)Ds[Sc+Vi]=Xc}jc=1,qc=sc[0]}var co=15&Ss.la,gn=15&lu.la;for(Vi=0;4>Vi;++Vi){var _o=1&gn;for(Xc=to=0;4>Xc;++Xc)co=co>>1|(_o=(lo=pm(wo,qc,lo=_o+(1&co),Ha.Sc,jc,Ds,Sc))>jc)<<7,to=to<<2|(3<lo?3:1<lo?2:Ds[Sc+0]!=0),Sc+=16;co>>=4,gn=gn>>1|_o<<7,al=(al<<8|to)>>>0}for(qc=co,jc=gn>>4,wl=0;4>wl;wl+=2){for(to=0,co=Ss.la>>4+wl,gn=lu.la>>4+wl,Vi=0;2>Vi;++Vi){for(_o=1&gn,Xc=0;2>Xc;++Xc)lo=_o+(1&co),co=co>>1|(_o=0<(lo=pm(wo,sc[2],lo,Ha.Qc,0,Ds,Sc)))<<3,to=to<<2|(3<lo?3:1<lo?2:Ds[Sc+0]!=0),Sc+=16;co>>=2,gn=gn>>1|_o<<5}aa|=to<<4*wl,qc|=co<<4<<wl,jc|=(240&gn)<<wl}Ss.la=qc,lu.la=jc,Ec.Hc=al,Ec.Gc=aa,Ec.ia=43690&aa?0:Ha.ia,sc=!(al|aa)}if(0<Rn.L&&(Rn.wa[Rn.Y+Rn.ja]=Rn.gd[Es.$b][Es.Za],Rn.wa[Rn.Y+Rn.ja].La|=!sc),sl.Ka)return Fi(ua,7,"Premature end-of-file encountered.")}if(qu(ua),Rn=Ol,sl=1,Es=(hi=ua).D,Ss=0<hi.L&&hi.M>=hi.zb&&hi.M<=hi.Va,hi.Aa==0)t:{if(Es.M=hi.M,Es.uc=Ss,En(hi,Es),sl=1,Es=(to=hi.D).Nb,Ss=(aa=gp[hi.L])*hi.R,wo=aa/2*hi.B,Vi=16*Es*hi.R,Xc=8*Es*hi.B,sc=hi.sa,Ec=hi.ta-Ss+Vi,Ha=hi.qa,Ds=hi.ra-wo+Xc,Sc=hi.Ha,lu=hi.Ia-wo+Xc,gn=(co=to.M)==0,al=co>=hi.Va-1,hi.Aa==2&&En(hi,to),to.uc)for(_o=(lo=hi).D.M,k(lo.D.uc),to=lo.yb;to<lo.Hb;++to){jc=to,qc=_o;var ac=(No=(Tc=lo).D).Nb;wl=Tc.R;var No=No.wa[No.Y+jc],rd=Tc.sa,ws=Tc.ta+16*ac*wl+16*jc,Js=No.dd,La=No.tc;if(La!=0)if(k(3<=La),Tc.L==1)0<jc&&Yc(rd,ws,wl,La+4),No.La&&op(rd,ws,wl,La),0<qc&&ap(rd,ws,wl,La+4),No.La&&Yo(rd,ws,wl,La);else{var nd=Tc.B,_l=Tc.qa,ko=Tc.ra+8*ac*nd+8*jc,id=Tc.Ha,Tc=Tc.Ia+8*ac*nd+8*jc;ac=No.ld,0<jc&&(bl(rd,ws,wl,La+4,Js,ac),fm(_l,ko,id,Tc,nd,La+4,Js,ac)),No.La&&(qm(rd,ws,wl,La,Js,ac),sp(_l,ko,id,Tc,nd,La,Js,ac)),0<qc&&(Is(rd,ws,wl,La+4,Js,ac),fh(_l,ko,id,Tc,nd,La+4,Js,ac)),No.La&&(qh(rd,ws,wl,La,Js,ac),ip(_l,ko,id,Tc,nd,La,Js,ac))}}if(hi.ia&&alert("todo:DitherRow"),Rn.put!=null){if(to=16*co,co=16*(co+1),gn?(Rn.y=hi.sa,Rn.O=hi.ta+Vi,Rn.f=hi.qa,Rn.N=hi.ra+Xc,Rn.ea=hi.Ha,Rn.W=hi.Ia+Xc):(to-=aa,Rn.y=sc,Rn.O=Ec,Rn.f=Ha,Rn.N=Ds,Rn.ea=Sc,Rn.W=lu),al||(co-=aa),co>Rn.o&&(co=Rn.o),Rn.F=null,Rn.J=null,hi.Fa!=null&&0<hi.Fa.length&&to<co&&(Rn.J=ka(hi,Rn,to,co-to),Rn.F=hi.mb,Rn.F==null&&Rn.F.length==0)){sl=Fi(hi,3,"Could not decode alpha data.");break t}to<Rn.j&&(aa=Rn.j-to,to=Rn.j,k(!(1&aa)),Rn.O+=hi.R*aa,Rn.N+=hi.B*(aa>>1),Rn.W+=hi.B*(aa>>1),Rn.F!=null&&(Rn.J+=Rn.width*aa)),to<co&&(Rn.O+=Rn.v,Rn.N+=Rn.v>>1,Rn.W+=Rn.v>>1,Rn.F!=null&&(Rn.J+=Rn.v),Rn.ka=to-Rn.j,Rn.U=Rn.va-Rn.v,Rn.T=co-to,sl=Rn.put(Rn))}Es+1!=hi.Ic||al||(W(hi.sa,hi.ta-Ss,sc,Ec+16*hi.R,Ss),W(hi.qa,hi.ra-wo,Ha,Ds+8*hi.B,wo),W(hi.Ha,hi.Ia-wo,Sc,lu+8*hi.B,wo))}if(!sl)return Fi(ua,6,"Output aborted.")}return 1})(xt,Yt)),Yt.bc!=null&&Yt.bc(Yt),nr&=1}return nr?(xt.cb=0,nr):0})(R,Ee)||(X=R.a)}}else X=R.a}X==0&&Ge.Oa!=null&&Ge.Oa.fd&&(X=ji(Ge.ba))}Ge=X}We=Ge!=0?null:11>We?Je.f.RGBA.eb:Je.f.kb.y}else We=null;return We};var rA=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function Le(Mt,_r){for(var lt="",vt=0;vt<4;vt++)lt+=String.fromCharCode(Mt[_r++]);return lt}function Ve(Mt,_r){return Mt[_r+0]|Mt[_r+1]<<8}function Ze(Mt,_r){return(Mt[_r+0]|Mt[_r+1]<<8|Mt[_r+2]<<16)>>>0}function dt(Mt,_r){return(Mt[_r+0]|Mt[_r+1]<<8|Mt[_r+2]<<16|Mt[_r+3]<<24)>>>0}new Ae;var je=[0],St=[0],ct=[],Nt=new Ae,it=P,Ot=(function(Mt,_r){var lt={},vt=0,Rt=!1,Dt=0,vr=0;if(lt.frames=[],!(function(Ye,Tt){for(var Lt=0;Lt<4;Lt++)if(Ye[Tt+Lt]!="RIFF".charCodeAt(Lt))return!0;return!1})(Mt,_r)){for(dt(Mt,_r+=4),_r+=8;_r<Mt.length;){var kr=Le(Mt,_r),Rr=dt(Mt,_r+=4);_r+=4;var ur=Rr+(1&Rr);switch(kr){case"VP8 ":case"VP8L":lt.frames[vt]===void 0&&(lt.frames[vt]={}),(on=lt.frames[vt]).src_off=Rt?vr:_r-8,on.src_size=Dt+Rr+8,vt++,Rt&&(Rt=!1,Dt=0,vr=0);break;case"VP8X":(on=lt.header={}).feature_flags=Mt[_r];var Or=_r+4;on.canvas_width=1+Ze(Mt,Or),Or+=3,on.canvas_height=1+Ze(Mt,Or),Or+=3;break;case"ALPH":Rt=!0,Dt=ur+8,vr=_r-8;break;case"ANIM":(on=lt.header).bgcolor=dt(Mt,_r),Or=_r+4,on.loop_count=Ve(Mt,Or),Or+=2;break;case"ANMF":var pn,on;(on=lt.frames[vt]={}).offset_x=2*Ze(Mt,_r),_r+=3,on.offset_y=2*Ze(Mt,_r),_r+=3,on.width=1+Ze(Mt,_r),_r+=3,on.height=1+Ze(Mt,_r),_r+=3,on.duration=Ze(Mt,_r),_r+=3,pn=Mt[_r++],on.dispose=1&pn,on.blend=pn>>1&1}kr!="ANMF"&&(_r+=ur)}return lt}})(it,0);Ot.response=it,Ot.rgbaoutput=!0,Ot.dataurl=!1;var qt=Ot.header?Ot.header:null,It=Ot.frames?Ot.frames:null;if(qt){qt.loop_counter=qt.loop_count,je=[qt.canvas_height],St=[qt.canvas_width];for(var nt=0;nt<It.length&&It[nt].blend!=0;nt++);}var Vt=It[0],Tr=Nt.WebPDecodeRGBA(it,Vt.src_off,Vt.src_size,St,je);Vt.rgba=Tr,Vt.imgwidth=St[0],Vt.imgheight=je[0];for(var or=0;or<St[0]*je[0]*4;or++)ct[or]=Tr[or];return this.width=St,this.height=je,this.data=ct,this}(function(P){var k,M,W,Z,re,ye,fe,Ae,Le,Ve=function(Ye){return Ye=Ye||{},this.isStrokeTransparent=Ye.isStrokeTransparent||!1,this.strokeOpacity=Ye.strokeOpacity||1,this.strokeStyle=Ye.strokeStyle||"#000000",this.fillStyle=Ye.fillStyle||"#000000",this.isFillTransparent=Ye.isFillTransparent||!1,this.fillOpacity=Ye.fillOpacity||1,this.font=Ye.font||"10px sans-serif",this.textBaseline=Ye.textBaseline||"alphabetic",this.textAlign=Ye.textAlign||"left",this.lineWidth=Ye.lineWidth||1,this.lineJoin=Ye.lineJoin||"miter",this.lineCap=Ye.lineCap||"butt",this.path=Ye.path||[],this.transform=Ye.transform!==void 0?Ye.transform.clone():new Ae,this.globalCompositeOperation=Ye.globalCompositeOperation||"normal",this.globalAlpha=Ye.globalAlpha||1,this.clip_path=Ye.clip_path||[],this.currentPoint=Ye.currentPoint||new ye,this.miterLimit=Ye.miterLimit||10,this.lastPoint=Ye.lastPoint||new ye,this.lineDashOffset=Ye.lineDashOffset||0,this.lineDash=Ye.lineDash||[],this.margin=Ye.margin||[0,0,0,0],this.prevPageLastElemOffset=Ye.prevPageLastElemOffset||0,this.ignoreClearRect=typeof Ye.ignoreClearRect!="boolean"||Ye.ignoreClearRect,this};P.events.push(["initialized",function(){this.context2d=new Ze(this),k=this.internal.f2,M=this.internal.getCoordinateString,W=this.internal.getVerticalCoordinateString,Z=this.internal.getHorizontalCoordinate,re=this.internal.getVerticalCoordinate,ye=this.internal.Point,fe=this.internal.Rectangle,Ae=this.internal.Matrix,Le=new Ve}]);var Ze=function(Ye){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var Tt=Ye;Object.defineProperty(this,"pdf",{get:function(){return Tt}});var Lt=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Lt},set:function(yt){Lt=!!yt}});var Wt=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Wt},set:function(yt){Wt=!!yt}});var Xt=0;Object.defineProperty(this,"posX",{get:function(){return Xt},set:function(yt){isNaN(yt)||(Xt=yt)}});var fr=0;Object.defineProperty(this,"posY",{get:function(){return fr},set:function(yt){isNaN(yt)||(fr=yt)}}),Object.defineProperty(this,"margin",{get:function(){return Le.margin},set:function(yt){var Tn;typeof yt=="number"?Tn=[yt,yt,yt,yt]:((Tn=new Array(4))[0]=yt[0],Tn[1]=yt.length>=2?yt[1]:Tn[0],Tn[2]=yt.length>=3?yt[2]:Tn[0],Tn[3]=yt.length>=4?yt[3]:Tn[1]),Le.margin=Tn}});var Lr=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Lr},set:function(yt){Lr=yt}});var Nr=0;Object.defineProperty(this,"lastBreak",{get:function(){return Nr},set:function(yt){Nr=yt}});var Zr=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Zr},set:function(yt){Zr=yt}}),Object.defineProperty(this,"ctx",{get:function(){return Le},set:function(yt){yt instanceof Ve&&(Le=yt)}}),Object.defineProperty(this,"path",{get:function(){return Le.path},set:function(yt){Le.path=yt}});var An=[];Object.defineProperty(this,"ctxStack",{get:function(){return An},set:function(yt){An=yt}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(yt){var Tn;Tn=dt(yt),this.ctx.fillStyle=Tn.style,this.ctx.isFillTransparent=Tn.a===0,this.ctx.fillOpacity=Tn.a,this.pdf.setFillColor(Tn.r,Tn.g,Tn.b,{a:Tn.a}),this.pdf.setTextColor(Tn.r,Tn.g,Tn.b,{a:Tn.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(yt){var Tn=dt(yt);this.ctx.strokeStyle=Tn.style,this.ctx.isStrokeTransparent=Tn.a===0,this.ctx.strokeOpacity=Tn.a,Tn.a===0?this.pdf.setDrawColor(255,255,255):(Tn.a,this.pdf.setDrawColor(Tn.r,Tn.g,Tn.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(yt){["butt","round","square"].indexOf(yt)!==-1&&(this.ctx.lineCap=yt,this.pdf.setLineCap(yt))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(yt){isNaN(yt)||(this.ctx.lineWidth=yt,this.pdf.setLineWidth(yt))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(yt){["bevel","round","miter"].indexOf(yt)!==-1&&(this.ctx.lineJoin=yt,this.pdf.setLineJoin(yt))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(yt){isNaN(yt)||(this.ctx.miterLimit=yt,this.pdf.setMiterLimit(yt))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(yt){this.ctx.textBaseline=yt}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(yt){["right","end","center","left","start"].indexOf(yt)!==-1&&(this.ctx.textAlign=yt)}});var Sn=null,Fn=null,xi=null;Object.defineProperty(this,"fontFaces",{get:function(){return xi},set:function(yt){Sn=null,Fn=null,xi=yt}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(yt){var Tn;if(this.ctx.font=yt,(Tn=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(yt))!==null){var Ri=Tn[1];Tn[2];var Cn=Tn[3],cn=Tn[4];Tn[5];var Ni=Tn[6],$n=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(cn)[2];cn=Math.floor($n==="px"?parseFloat(cn)*this.pdf.internal.scaleFactor:$n==="em"?parseFloat(cn)*this.pdf.getFontSize():parseFloat(cn)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(cn);var zn=(function(Yn){var Gi,ss,Zi=[],ys=Yn.trim();if(ys==="")return no;if(ys in hs)return[hs[ys]];for(;ys!=="";){switch(ss=null,Gi=(ys=ro(ys)).charAt(0)){case'"':case"'":ss=Fl(ys.substring(1),Gi);break;default:ss=nu(ys)}if(ss===null||(Zi.push(ss[0]),(ys=ro(ss[1]))!==""&&ys.charAt(0)!==","))return no;ys=ys.replace(/^,/,"")}return Zi})(Ni);if(this.fontFaces){var Qn=(function(Yn,Gi){var ss=Yn.getFontList(),Zi=JSON.stringify(ss);if(Sn===null||Fn!==Zi){var ys=(function(Na){var bi=[];return Object.keys(Na).forEach(function(Ys){Na[Ys].forEach(function(Qi){var ai=null;switch(Qi){case"bold":ai={family:Ys,weight:"bold"};break;case"italic":ai={family:Ys,style:"italic"};break;case"bolditalic":ai={family:Ys,weight:"bold",style:"italic"};break;case"":case"normal":ai={family:Ys}}ai!==null&&(ai.ref={name:Ys,style:Qi},bi.push(ai))})}),bi})(ss);Sn=(function(Na){for(var bi={},Ys=0;Ys<Na.length;++Ys){var Qi=qs(Na[Ys]),ai=Qi.family,ha=Qi.stretch,Ii=Qi.style,_n=Qi.weight;bi[ai]=bi[ai]||{},bi[ai][ha]=bi[ai][ha]||{},bi[ai][ha][Ii]=bi[ai][ha][Ii]||{},bi[ai][ha][Ii][_n]=Qi}return bi})(ys.concat(Gi)),Fn=Zi}return Sn})(this.pdf,this.fontFaces),va=zn.map(function(Yn){return{family:Yn,stretch:"normal",weight:Cn,style:Ri}}),Di=(function(Yn,Gi,ss){for(var Zi=(ss=ss||{}).defaultFontFamily||"times",ys=Object.assign({},za,ss.genericFontFamilies||{}),Na=null,bi=null,Ys=0;Ys<Gi.length;++Ys)if(ys[(Na=qs(Gi[Ys])).family]&&(Na.family=ys[Na.family]),Yn.hasOwnProperty(Na.family)){bi=Yn[Na.family];break}if(!(bi=bi||Yn[Zi]))throw new Error("Could not find a font-family for the rule '"+wu(Na)+"' and default family '"+Zi+"'.");if(bi=(function(Qi,ai){if(ai[Qi])return ai[Qi];var ha=Qs[Qi],Ii=ha<=Qs.normal?-1:1,_n=Rs(ai,Fs,ha,Ii);if(!_n)throw new Error("Could not find a matching font-stretch value for "+Qi);return _n})(Na.stretch,bi),bi=(function(Qi,ai){if(ai[Qi])return ai[Qi];for(var ha=Nn[Qi],Ii=0;Ii<ha.length;++Ii)if(ai[ha[Ii]])return ai[ha[Ii]];throw new Error("Could not find a matching font-style for "+Qi)})(Na.style,bi),!(bi=(function(Qi,ai){if(ai[Qi])return ai[Qi];if(Qi===400&&ai[500])return ai[500];if(Qi===500&&ai[400])return ai[400];var ha=ns[Qi],Ii=Rs(ai,Us,ha,Qi<400?-1:1);if(!Ii)throw new Error("Could not find a matching font-weight for value "+Qi);return Ii})(Na.weight,bi)))throw new Error("Failed to resolve a font for the rule '"+wu(Na)+"'.");return bi})(Qn,va);this.pdf.setFont(Di.ref.name,Di.ref.style)}else{var Wn="";(Cn==="bold"||parseInt(Cn,10)>=700||Ri==="bold")&&(Wn="bold"),Ri==="italic"&&(Wn+="italic"),Wn.length===0&&(Wn="normal");for(var is="",Si={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Hn=0;Hn<zn.length;Hn++){if(this.pdf.internal.getFont(zn[Hn],Wn,{noFallback:!0,disableWarning:!0})!==void 0){is=zn[Hn];break}if(Wn==="bolditalic"&&this.pdf.internal.getFont(zn[Hn],"bold",{noFallback:!0,disableWarning:!0})!==void 0)is=zn[Hn],Wn="bold";else if(this.pdf.internal.getFont(zn[Hn],"normal",{noFallback:!0,disableWarning:!0})!==void 0){is=zn[Hn],Wn="normal";break}}if(is===""){for(var Li=0;Li<zn.length;Li++)if(Si[zn[Li]]){is=Si[zn[Li]];break}}is=is===""?"Times":is,this.pdf.setFont(is,Wn)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(yt){this.ctx.globalCompositeOperation=yt}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(yt){this.ctx.globalAlpha=yt}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(yt){this.ctx.lineDashOffset=yt,on.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(yt){this.ctx.lineDash=yt,on.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(yt){this.ctx.ignoreClearRect=!!yt}})};Ze.prototype.setLineDash=function(Ye){this.lineDash=Ye},Ze.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},Ze.prototype.fill=function(){It.call(this,"fill",!1)},Ze.prototype.stroke=function(){It.call(this,"stroke",!1)},Ze.prototype.beginPath=function(){this.path=[{type:"begin"}]},Ze.prototype.moveTo=function(Ye,Tt){if(isNaN(Ye)||isNaN(Tt))throw x.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Lt=this.ctx.transform.applyToPoint(new ye(Ye,Tt));this.path.push({type:"mt",x:Lt.x,y:Lt.y}),this.ctx.lastPoint=new ye(Ye,Tt)},Ze.prototype.closePath=function(){var Ye=new ye(0,0),Tt=0;for(Tt=this.path.length-1;Tt!==-1;Tt--)if(this.path[Tt].type==="begin"&&(0,d.default)(this.path[Tt+1])==="object"&&typeof this.path[Tt+1].x=="number"){Ye=new ye(this.path[Tt+1].x,this.path[Tt+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new ye(Ye.x,Ye.y)},Ze.prototype.lineTo=function(Ye,Tt){if(isNaN(Ye)||isNaN(Tt))throw x.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Lt=this.ctx.transform.applyToPoint(new ye(Ye,Tt));this.path.push({type:"lt",x:Lt.x,y:Lt.y}),this.ctx.lastPoint=new ye(Lt.x,Lt.y)},Ze.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),It.call(this,null,!0)},Ze.prototype.quadraticCurveTo=function(Ye,Tt,Lt,Wt){if(isNaN(Lt)||isNaN(Wt)||isNaN(Ye)||isNaN(Tt))throw x.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Xt=this.ctx.transform.applyToPoint(new ye(Lt,Wt)),fr=this.ctx.transform.applyToPoint(new ye(Ye,Tt));this.path.push({type:"qct",x1:fr.x,y1:fr.y,x:Xt.x,y:Xt.y}),this.ctx.lastPoint=new ye(Xt.x,Xt.y)},Ze.prototype.bezierCurveTo=function(Ye,Tt,Lt,Wt,Xt,fr){if(isNaN(Xt)||isNaN(fr)||isNaN(Ye)||isNaN(Tt)||isNaN(Lt)||isNaN(Wt))throw x.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Lr=this.ctx.transform.applyToPoint(new ye(Xt,fr)),Nr=this.ctx.transform.applyToPoint(new ye(Ye,Tt)),Zr=this.ctx.transform.applyToPoint(new ye(Lt,Wt));this.path.push({type:"bct",x1:Nr.x,y1:Nr.y,x2:Zr.x,y2:Zr.y,x:Lr.x,y:Lr.y}),this.ctx.lastPoint=new ye(Lr.x,Lr.y)},Ze.prototype.arc=function(Ye,Tt,Lt,Wt,Xt,fr){if(isNaN(Ye)||isNaN(Tt)||isNaN(Lt)||isNaN(Wt)||isNaN(Xt))throw x.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(fr=!!fr,!this.ctx.transform.isIdentity){var Lr=this.ctx.transform.applyToPoint(new ye(Ye,Tt));Ye=Lr.x,Tt=Lr.y;var Nr=this.ctx.transform.applyToPoint(new ye(0,Lt)),Zr=this.ctx.transform.applyToPoint(new ye(0,0));Lt=Math.sqrt(Math.pow(Nr.x-Zr.x,2)+Math.pow(Nr.y-Zr.y,2))}Math.abs(Xt-Wt)>=2*Math.PI&&(Wt=0,Xt=2*Math.PI),this.path.push({type:"arc",x:Ye,y:Tt,radius:Lt,startAngle:Wt,endAngle:Xt,counterclockwise:fr})},Ze.prototype.arcTo=function(Ye,Tt,Lt,Wt,Xt){throw new Error("arcTo not implemented.")},Ze.prototype.rect=function(Ye,Tt,Lt,Wt){if(isNaN(Ye)||isNaN(Tt)||isNaN(Lt)||isNaN(Wt))throw x.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(Ye,Tt),this.lineTo(Ye+Lt,Tt),this.lineTo(Ye+Lt,Tt+Wt),this.lineTo(Ye,Tt+Wt),this.lineTo(Ye,Tt),this.lineTo(Ye+Lt,Tt),this.lineTo(Ye,Tt)},Ze.prototype.fillRect=function(Ye,Tt,Lt,Wt){if(isNaN(Ye)||isNaN(Tt)||isNaN(Lt)||isNaN(Wt))throw x.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!je.call(this)){var Xt={};this.lineCap!=="butt"&&(Xt.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(Xt.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(Ye,Tt,Lt,Wt),this.fill(),Xt.hasOwnProperty("lineCap")&&(this.lineCap=Xt.lineCap),Xt.hasOwnProperty("lineJoin")&&(this.lineJoin=Xt.lineJoin)}},Ze.prototype.strokeRect=function(Ye,Tt,Lt,Wt){if(isNaN(Ye)||isNaN(Tt)||isNaN(Lt)||isNaN(Wt))throw x.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");St.call(this)||(this.beginPath(),this.rect(Ye,Tt,Lt,Wt),this.stroke())},Ze.prototype.clearRect=function(Ye,Tt,Lt,Wt){if(isNaN(Ye)||isNaN(Tt)||isNaN(Lt)||isNaN(Wt))throw x.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(Ye,Tt,Lt,Wt))},Ze.prototype.save=function(Ye){Ye=typeof Ye!="boolean"||Ye;for(var Tt=this.pdf.internal.getCurrentPageInfo().pageNumber,Lt=0;Lt<this.pdf.internal.getNumberOfPages();Lt++)this.pdf.setPage(Lt+1),this.pdf.internal.out("q");if(this.pdf.setPage(Tt),Ye){this.ctx.fontSize=this.pdf.internal.getFontSize();var Wt=new Ve(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Wt}},Ze.prototype.restore=function(Ye){Ye=typeof Ye!="boolean"||Ye;for(var Tt=this.pdf.internal.getCurrentPageInfo().pageNumber,Lt=0;Lt<this.pdf.internal.getNumberOfPages();Lt++)this.pdf.setPage(Lt+1),this.pdf.internal.out("Q");this.pdf.setPage(Tt),Ye&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},Ze.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var dt=function(Ye){var Tt,Lt,Wt,Xt;if(Ye.isCanvasGradient===!0&&(Ye=Ye.getColor()),!Ye)return{r:0,g:0,b:0,a:0,style:Ye};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(Ye))Tt=0,Lt=0,Wt=0,Xt=0;else{var fr=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(Ye);if(fr!==null)Tt=parseInt(fr[1]),Lt=parseInt(fr[2]),Wt=parseInt(fr[3]),Xt=1;else if((fr=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(Ye))!==null)Tt=parseInt(fr[1]),Lt=parseInt(fr[2]),Wt=parseInt(fr[3]),Xt=parseFloat(fr[4]);else{if(Xt=1,typeof Ye=="string"&&Ye.charAt(0)!=="#"){var Lr=new C(Ye);Ye=Lr.ok?Lr.toHex():"#000000"}Ye.length===4?(Tt=Ye.substring(1,2),Tt+=Tt,Lt=Ye.substring(2,3),Lt+=Lt,Wt=Ye.substring(3,4),Wt+=Wt):(Tt=Ye.substring(1,3),Lt=Ye.substring(3,5),Wt=Ye.substring(5,7)),Tt=parseInt(Tt,16),Lt=parseInt(Lt,16),Wt=parseInt(Wt,16)}}return{r:Tt,g:Lt,b:Wt,a:Xt,style:Ye}},je=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},St=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};Ze.prototype.fillText=function(Ye,Tt,Lt,Wt){if(isNaN(Tt)||isNaN(Lt)||typeof Ye!="string")throw x.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Wt=isNaN(Wt)?void 0:Wt,!je.call(this)){var Xt=ur(this.ctx.transform.rotation),fr=this.ctx.transform.scaleX;vt.call(this,{text:Ye,x:Tt,y:Lt,scale:fr,angle:Xt,align:this.textAlign,maxWidth:Wt})}},Ze.prototype.strokeText=function(Ye,Tt,Lt,Wt){if(isNaN(Tt)||isNaN(Lt)||typeof Ye!="string")throw x.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!St.call(this)){Wt=isNaN(Wt)?void 0:Wt;var Xt=ur(this.ctx.transform.rotation),fr=this.ctx.transform.scaleX;vt.call(this,{text:Ye,x:Tt,y:Lt,scale:fr,renderingMode:"stroke",angle:Xt,align:this.textAlign,maxWidth:Wt})}},Ze.prototype.measureText=function(Ye){if(typeof Ye!="string")throw x.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var Tt=this.pdf,Lt=this.pdf.internal.scaleFactor,Wt=Tt.internal.getFontSize(),Xt=Tt.getStringUnitWidth(Ye)*Wt/Tt.internal.scaleFactor;return new function(fr){var Lr=(fr=fr||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Lr}}),this}({width:Xt*=Math.round(96*Lt/72*1e4)/1e4})},Ze.prototype.scale=function(Ye,Tt){if(isNaN(Ye)||isNaN(Tt))throw x.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Lt=new Ae(Ye,0,0,Tt,0,0);this.ctx.transform=this.ctx.transform.multiply(Lt)},Ze.prototype.rotate=function(Ye){if(isNaN(Ye))throw x.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var Tt=new Ae(Math.cos(Ye),Math.sin(Ye),-Math.sin(Ye),Math.cos(Ye),0,0);this.ctx.transform=this.ctx.transform.multiply(Tt)},Ze.prototype.translate=function(Ye,Tt){if(isNaN(Ye)||isNaN(Tt))throw x.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Lt=new Ae(1,0,0,1,Ye,Tt);this.ctx.transform=this.ctx.transform.multiply(Lt)},Ze.prototype.transform=function(Ye,Tt,Lt,Wt,Xt,fr){if(isNaN(Ye)||isNaN(Tt)||isNaN(Lt)||isNaN(Wt)||isNaN(Xt)||isNaN(fr))throw x.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Lr=new Ae(Ye,Tt,Lt,Wt,Xt,fr);this.ctx.transform=this.ctx.transform.multiply(Lr)},Ze.prototype.setTransform=function(Ye,Tt,Lt,Wt,Xt,fr){Ye=isNaN(Ye)?1:Ye,Tt=isNaN(Tt)?0:Tt,Lt=isNaN(Lt)?0:Lt,Wt=isNaN(Wt)?1:Wt,Xt=isNaN(Xt)?0:Xt,fr=isNaN(fr)?0:fr,this.ctx.transform=new Ae(Ye,Tt,Lt,Wt,Xt,fr)};var ct=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};Ze.prototype.drawImage=function(Ye,Tt,Lt,Wt,Xt,fr,Lr,Nr,Zr){var An=this.pdf.getImageProperties(Ye),Sn=1,Fn=1,xi=1,yt=1;Wt!==void 0&&Nr!==void 0&&(xi=Nr/Wt,yt=Zr/Xt,Sn=An.width/Wt*Nr/Wt,Fn=An.height/Xt*Zr/Xt),fr===void 0&&(fr=Tt,Lr=Lt,Tt=0,Lt=0),Wt!==void 0&&Nr===void 0&&(Nr=Wt,Zr=Xt),Wt===void 0&&Nr===void 0&&(Nr=An.width,Zr=An.height);var Tn=this.ctx.transform.decompose(),Ri=ur(Tn.rotate.shx),Cn=new Ae,cn=(Cn=(Cn=(Cn=Cn.multiply(Tn.translate)).multiply(Tn.skew)).multiply(Tn.scale)).applyToRectangle(new fe(fr-Tt*xi,Lr-Lt*yt,Wt*Sn,Xt*Fn));if(this.autoPaging){for(var Ni,$n=Nt.call(this,cn),zn=[],Qn=0;Qn<$n.length;Qn+=1)zn.indexOf($n[Qn])===-1&&zn.push($n[Qn]);qt(zn);for(var va=zn[0],Di=zn[zn.length-1],Wn=va;Wn<Di+1;Wn++){this.pdf.setPage(Wn);var is=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Si=Wn===1?this.posY+this.margin[0]:this.margin[0],Hn=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Li=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Yn=Wn===1?0:Hn+(Wn-2)*Li;if(this.ctx.clip_path.length!==0){var Gi=this.path;Ni=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Ot(Ni,this.posX+this.margin[3],-Yn+Si+this.ctx.prevPageLastElemOffset),nt.call(this,"fill",!0),this.path=Gi}var ss=JSON.parse(JSON.stringify(cn));ss=Ot([ss],this.posX+this.margin[3],-Yn+Si+this.ctx.prevPageLastElemOffset)[0];var Zi=(Wn>va||Wn<Di)&&ct.call(this);Zi&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],is,Li,null).clip().discardPath()),this.pdf.addImage(Ye,"JPEG",ss.x,ss.y,ss.w,ss.h,null,null,Ri),Zi&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(Ye,"JPEG",cn.x,cn.y,cn.w,cn.h,null,null,Ri)};var Nt=function(Ye,Tt,Lt){var Wt=[];Tt=Tt||this.pdf.internal.pageSize.width,Lt=Lt||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Xt=this.posY+this.ctx.prevPageLastElemOffset;switch(Ye.type){default:case"mt":case"lt":Wt.push(Math.floor((Ye.y+Xt)/Lt)+1);break;case"arc":Wt.push(Math.floor((Ye.y+Xt-Ye.radius)/Lt)+1),Wt.push(Math.floor((Ye.y+Xt+Ye.radius)/Lt)+1);break;case"qct":var fr=Or(this.ctx.lastPoint.x,this.ctx.lastPoint.y,Ye.x1,Ye.y1,Ye.x,Ye.y);Wt.push(Math.floor((fr.y+Xt)/Lt)+1),Wt.push(Math.floor((fr.y+fr.h+Xt)/Lt)+1);break;case"bct":var Lr=pn(this.ctx.lastPoint.x,this.ctx.lastPoint.y,Ye.x1,Ye.y1,Ye.x2,Ye.y2,Ye.x,Ye.y);Wt.push(Math.floor((Lr.y+Xt)/Lt)+1),Wt.push(Math.floor((Lr.y+Lr.h+Xt)/Lt)+1);break;case"rect":Wt.push(Math.floor((Ye.y+Xt)/Lt)+1),Wt.push(Math.floor((Ye.y+Ye.h+Xt)/Lt)+1)}for(var Nr=0;Nr<Wt.length;Nr+=1)for(;this.pdf.internal.getNumberOfPages()<Wt[Nr];)it.call(this);return Wt},it=function(){var Ye=this.fillStyle,Tt=this.strokeStyle,Lt=this.font,Wt=this.lineCap,Xt=this.lineWidth,fr=this.lineJoin;this.pdf.addPage(),this.fillStyle=Ye,this.strokeStyle=Tt,this.font=Lt,this.lineCap=Wt,this.lineWidth=Xt,this.lineJoin=fr},Ot=function(Ye,Tt,Lt){for(var Wt=0;Wt<Ye.length;Wt++)switch(Ye[Wt].type){case"bct":Ye[Wt].x2+=Tt,Ye[Wt].y2+=Lt;case"qct":Ye[Wt].x1+=Tt,Ye[Wt].y1+=Lt;default:Ye[Wt].x+=Tt,Ye[Wt].y+=Lt}return Ye},qt=function(Ye){return Ye.sort(function(Tt,Lt){return Tt-Lt})},It=function(Ye,Tt){var Lt=this.fillStyle,Wt=this.strokeStyle,Xt=this.lineCap,fr=this.lineWidth,Lr=Math.abs(fr*this.ctx.transform.scaleX),Nr=this.lineJoin;if(this.autoPaging){for(var Zr,An,Sn=JSON.parse(JSON.stringify(this.path)),Fn=JSON.parse(JSON.stringify(this.path)),xi=[],yt=0;yt<Fn.length;yt++)if(Fn[yt].x!==void 0)for(var Tn=Nt.call(this,Fn[yt]),Ri=0;Ri<Tn.length;Ri+=1)xi.indexOf(Tn[Ri])===-1&&xi.push(Tn[Ri]);for(var Cn=0;Cn<xi.length;Cn++)for(;this.pdf.internal.getNumberOfPages()<xi[Cn];)it.call(this);qt(xi);for(var cn=xi[0],Ni=xi[xi.length-1],$n=cn;$n<Ni+1;$n++){this.pdf.setPage($n),this.fillStyle=Lt,this.strokeStyle=Wt,this.lineCap=Xt,this.lineWidth=Lr,this.lineJoin=Nr;var zn=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Qn=$n===1?this.posY+this.margin[0]:this.margin[0],va=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Di=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Wn=$n===1?0:va+($n-2)*Di;if(this.ctx.clip_path.length!==0){var is=this.path;Zr=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Ot(Zr,this.posX+this.margin[3],-Wn+Qn+this.ctx.prevPageLastElemOffset),nt.call(this,Ye,!0),this.path=is}if(An=JSON.parse(JSON.stringify(Sn)),this.path=Ot(An,this.posX+this.margin[3],-Wn+Qn+this.ctx.prevPageLastElemOffset),Tt===!1||$n===0){var Si=($n>cn||$n<Ni)&&ct.call(this);Si&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],zn,Di,null).clip().discardPath()),nt.call(this,Ye,Tt),Si&&this.pdf.restoreGraphicsState()}this.lineWidth=fr}this.path=Sn}else this.lineWidth=Lr,nt.call(this,Ye,Tt),this.lineWidth=fr},nt=function(Ye,Tt){if((Ye!=="stroke"||Tt||!St.call(this))&&(Ye==="stroke"||Tt||!je.call(this))){for(var Lt,Wt,Xt=[],fr=this.path,Lr=0;Lr<fr.length;Lr++){var Nr=fr[Lr];switch(Nr.type){case"begin":Xt.push({begin:!0});break;case"close":Xt.push({close:!0});break;case"mt":Xt.push({start:Nr,deltas:[],abs:[]});break;case"lt":var Zr=Xt.length;if(fr[Lr-1]&&!isNaN(fr[Lr-1].x)&&(Lt=[Nr.x-fr[Lr-1].x,Nr.y-fr[Lr-1].y],Zr>0)){for(;Zr>=0;Zr--)if(Xt[Zr-1].close!==!0&&Xt[Zr-1].begin!==!0){Xt[Zr-1].deltas.push(Lt),Xt[Zr-1].abs.push(Nr);break}}break;case"bct":Lt=[Nr.x1-fr[Lr-1].x,Nr.y1-fr[Lr-1].y,Nr.x2-fr[Lr-1].x,Nr.y2-fr[Lr-1].y,Nr.x-fr[Lr-1].x,Nr.y-fr[Lr-1].y],Xt[Xt.length-1].deltas.push(Lt);break;case"qct":var An=fr[Lr-1].x+2/3*(Nr.x1-fr[Lr-1].x),Sn=fr[Lr-1].y+2/3*(Nr.y1-fr[Lr-1].y),Fn=Nr.x+2/3*(Nr.x1-Nr.x),xi=Nr.y+2/3*(Nr.y1-Nr.y),yt=Nr.x,Tn=Nr.y;Lt=[An-fr[Lr-1].x,Sn-fr[Lr-1].y,Fn-fr[Lr-1].x,xi-fr[Lr-1].y,yt-fr[Lr-1].x,Tn-fr[Lr-1].y],Xt[Xt.length-1].deltas.push(Lt);break;case"arc":Xt.push({deltas:[],abs:[],arc:!0}),Array.isArray(Xt[Xt.length-1].abs)&&Xt[Xt.length-1].abs.push(Nr)}}Wt=Tt?null:Ye==="stroke"?"stroke":"fill";for(var Ri=!1,Cn=0;Cn<Xt.length;Cn++)if(Xt[Cn].arc)for(var cn=Xt[Cn].abs,Ni=0;Ni<cn.length;Ni++){var $n=cn[Ni];$n.type==="arc"?or.call(this,$n.x,$n.y,$n.radius,$n.startAngle,$n.endAngle,$n.counterclockwise,void 0,Tt,!Ri):Rt.call(this,$n.x,$n.y),Ri=!0}else if(Xt[Cn].close===!0)this.pdf.internal.out("h"),Ri=!1;else if(Xt[Cn].begin!==!0){var zn=Xt[Cn].start.x,Qn=Xt[Cn].start.y;Dt.call(this,Xt[Cn].deltas,zn,Qn),Ri=!0}Wt&&Mt.call(this,Wt),Tt&&_r.call(this)}},Vt=function(Ye){var Tt=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Lt=Tt*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return Ye-Lt;case"top":return Ye+Tt-Lt;case"hanging":return Ye+Tt-2*Lt;case"middle":return Ye+Tt/2-Lt;default:return Ye}},Tr=function(Ye){return Ye+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};Ze.prototype.createLinearGradient=function(){var Ye=function(){};return Ye.colorStops=[],Ye.addColorStop=function(Tt,Lt){this.colorStops.push([Tt,Lt])},Ye.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},Ye.isCanvasGradient=!0,Ye},Ze.prototype.createPattern=function(){return this.createLinearGradient()},Ze.prototype.createRadialGradient=function(){return this.createLinearGradient()};var or=function(Ye,Tt,Lt,Wt,Xt,fr,Lr,Nr,Zr){for(var An=kr.call(this,Lt,Wt,Xt,fr),Sn=0;Sn<An.length;Sn++){var Fn=An[Sn];Sn===0&&(Zr?lt.call(this,Fn.x1+Ye,Fn.y1+Tt):Rt.call(this,Fn.x1+Ye,Fn.y1+Tt)),vr.call(this,Ye,Tt,Fn.x2,Fn.y2,Fn.x3,Fn.y3,Fn.x4,Fn.y4)}Nr?_r.call(this):Mt.call(this,Lr)},Mt=function(Ye){switch(Ye){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},_r=function(){this.pdf.clip(),this.pdf.discardPath()},lt=function(Ye,Tt){this.pdf.internal.out(M(Ye)+" "+W(Tt)+" m")},vt=function(Ye){var Tt;switch(Ye.align){case"right":case"end":Tt="right";break;case"center":Tt="center";break;default:Tt="left"}var Lt,Wt,Xt,fr=this.pdf.getTextDimensions(Ye.text),Lr=Vt.call(this,Ye.y),Nr=Tr.call(this,Lr)-fr.h,Zr=this.ctx.transform.applyToPoint(new ye(Ye.x,Lr));if(this.autoPaging){var An=this.ctx.transform.decompose(),Sn=new Ae;Sn=(Sn=(Sn=Sn.multiply(An.translate)).multiply(An.skew)).multiply(An.scale);for(var Fn=this.ctx.transform.applyToRectangle(new fe(Ye.x,Lr,fr.w,fr.h)),xi=Sn.applyToRectangle(new fe(Ye.x,Nr,fr.w,fr.h)),yt=Nt.call(this,xi),Tn=[],Ri=0;Ri<yt.length;Ri+=1)Tn.indexOf(yt[Ri])===-1&&Tn.push(yt[Ri]);qt(Tn);for(var Cn=Tn[0],cn=Tn[Tn.length-1],Ni=Cn;Ni<cn+1;Ni++){this.pdf.setPage(Ni);var $n=Ni===1?this.posY+this.margin[0]:this.margin[0],zn=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Qn=this.pdf.internal.pageSize.height-this.margin[2],va=Qn-this.margin[0],Di=this.pdf.internal.pageSize.width-this.margin[1],Wn=Di-this.margin[3],is=Ni===1?0:zn+(Ni-2)*va;if(this.ctx.clip_path.length!==0){var Si=this.path;Lt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Ot(Lt,this.posX+this.margin[3],-1*is+$n),nt.call(this,"fill",!0),this.path=Si}var Hn=Ot([JSON.parse(JSON.stringify(xi))],this.posX+this.margin[3],-is+$n+this.ctx.prevPageLastElemOffset)[0];Ye.scale>=.01&&(Wt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Wt*Ye.scale),Xt=this.lineWidth,this.lineWidth=Xt*Ye.scale);var Li=this.autoPaging!=="text";if(Li||Hn.y+Hn.h<=Qn){if(Li||Hn.y>=$n&&Hn.x<=Di){var Yn=Li?Ye.text:this.pdf.splitTextToSize(Ye.text,Ye.maxWidth||Di-Hn.x)[0],Gi=Ot([JSON.parse(JSON.stringify(Fn))],this.posX+this.margin[3],-is+$n+this.ctx.prevPageLastElemOffset)[0],ss=Li&&(Ni>Cn||Ni<cn)&&ct.call(this);ss&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Wn,va,null).clip().discardPath()),this.pdf.text(Yn,Gi.x,Gi.y,{angle:Ye.angle,align:Tt,renderingMode:Ye.renderingMode}),ss&&this.pdf.restoreGraphicsState()}}else Hn.y<Qn&&(this.ctx.prevPageLastElemOffset+=Qn-Hn.y);Ye.scale>=.01&&(this.pdf.setFontSize(Wt),this.lineWidth=Xt)}}else Ye.scale>=.01&&(Wt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Wt*Ye.scale),Xt=this.lineWidth,this.lineWidth=Xt*Ye.scale),this.pdf.text(Ye.text,Zr.x+this.posX,Zr.y+this.posY,{angle:Ye.angle,align:Tt,renderingMode:Ye.renderingMode,maxWidth:Ye.maxWidth}),Ye.scale>=.01&&(this.pdf.setFontSize(Wt),this.lineWidth=Xt)},Rt=function(Ye,Tt,Lt,Wt){Lt=Lt||0,Wt=Wt||0,this.pdf.internal.out(M(Ye+Lt)+" "+W(Tt+Wt)+" l")},Dt=function(Ye,Tt,Lt){return this.pdf.lines(Ye,Tt,Lt,null,null)},vr=function(Ye,Tt,Lt,Wt,Xt,fr,Lr,Nr){this.pdf.internal.out([k(Z(Lt+Ye)),k(re(Wt+Tt)),k(Z(Xt+Ye)),k(re(fr+Tt)),k(Z(Lr+Ye)),k(re(Nr+Tt)),"c"].join(" "))},kr=function(Ye,Tt,Lt,Wt){for(var Xt=2*Math.PI,fr=Math.PI/2;Tt>Lt;)Tt-=Xt;var Lr=Math.abs(Lt-Tt);Lr<Xt&&Wt&&(Lr=Xt-Lr);for(var Nr=[],Zr=Wt?-1:1,An=Tt;Lr>1e-5;){var Sn=An+Zr*Math.min(Lr,fr);Nr.push(Rr.call(this,Ye,An,Sn)),Lr-=Math.abs(Sn-An),An=Sn}return Nr},Rr=function(Ye,Tt,Lt){var Wt=(Lt-Tt)/2,Xt=Ye*Math.cos(Wt),fr=Ye*Math.sin(Wt),Lr=Xt,Nr=-fr,Zr=Lr*Lr+Nr*Nr,An=Zr+Lr*Xt+Nr*fr,Sn=4/3*(Math.sqrt(2*Zr*An)-An)/(Lr*fr-Nr*Xt),Fn=Lr-Sn*Nr,xi=Nr+Sn*Lr,yt=Fn,Tn=-xi,Ri=Wt+Tt,Cn=Math.cos(Ri),cn=Math.sin(Ri);return{x1:Ye*Math.cos(Tt),y1:Ye*Math.sin(Tt),x2:Fn*Cn-xi*cn,y2:Fn*cn+xi*Cn,x3:yt*Cn-Tn*cn,y3:yt*cn+Tn*Cn,x4:Ye*Math.cos(Lt),y4:Ye*Math.sin(Lt)}},ur=function(Ye){return 180*Ye/Math.PI},Or=function(Ye,Tt,Lt,Wt,Xt,fr){var Lr=Ye+.5*(Lt-Ye),Nr=Tt+.5*(Wt-Tt),Zr=Xt+.5*(Lt-Xt),An=fr+.5*(Wt-fr),Sn=Math.min(Ye,Xt,Lr,Zr),Fn=Math.max(Ye,Xt,Lr,Zr),xi=Math.min(Tt,fr,Nr,An),yt=Math.max(Tt,fr,Nr,An);return new fe(Sn,xi,Fn-Sn,yt-xi)},pn=function(Ye,Tt,Lt,Wt,Xt,fr,Lr,Nr){var Zr,An,Sn,Fn,xi,yt,Tn,Ri,Cn,cn,Ni,$n,zn,Qn,va=Lt-Ye,Di=Wt-Tt,Wn=Xt-Lt,is=fr-Wt,Si=Lr-Xt,Hn=Nr-fr;for(An=0;An<41;An++)Cn=(Tn=(Sn=Ye+(Zr=An/40)*va)+Zr*((xi=Lt+Zr*Wn)-Sn))+Zr*(xi+Zr*(Xt+Zr*Si-xi)-Tn),cn=(Ri=(Fn=Tt+Zr*Di)+Zr*((yt=Wt+Zr*is)-Fn))+Zr*(yt+Zr*(fr+Zr*Hn-yt)-Ri),An==0?(Ni=Cn,$n=cn,zn=Cn,Qn=cn):(Ni=Math.min(Ni,Cn),$n=Math.min($n,cn),zn=Math.max(zn,Cn),Qn=Math.max(Qn,cn));return new fe(Math.round(Ni),Math.round($n),Math.round(zn-Ni),Math.round(Qn-$n))},on=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var Ye,Tt,Lt=(Ye=this.ctx.lineDash,Tt=this.ctx.lineDashOffset,JSON.stringify({lineDash:Ye,lineDashOffset:Tt}));this.prevLineDash!==Lt&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Lt)}}})(et.API),(function(P){var k=function(ye){var fe,Ae,Le,Ve,Ze,dt,je,St,ct,Nt;for(Ae=[],Le=0,Ve=(ye+=fe="\0\0\0\0".slice(ye.length%4||4)).length;Ve>Le;Le+=4)(Ze=(ye.charCodeAt(Le)<<24)+(ye.charCodeAt(Le+1)<<16)+(ye.charCodeAt(Le+2)<<8)+ye.charCodeAt(Le+3))!==0?(dt=(Ze=((Ze=((Ze=((Ze=(Ze-(Nt=Ze%85))/85)-(ct=Ze%85))/85)-(St=Ze%85))/85)-(je=Ze%85))/85)%85,Ae.push(dt+33,je+33,St+33,ct+33,Nt+33)):Ae.push(122);return(function(it,Ot){for(var qt=Ot;qt>0;qt--)it.pop()})(Ae,fe.length),String.fromCharCode.apply(String,Ae)+"~>"},M=function(ye){var fe,Ae,Le,Ve,Ze,dt=String,je="length",St=255,ct="charCodeAt",Nt="slice",it="replace";for(ye[Nt](-2),ye=ye[Nt](0,-2)[it](/\s/g,"")[it]("z","!!!!!"),Le=[],Ve=0,Ze=(ye+=fe="uuuuu"[Nt](ye[je]%5||5))[je];Ze>Ve;Ve+=5)Ae=52200625*(ye[ct](Ve)-33)+614125*(ye[ct](Ve+1)-33)+7225*(ye[ct](Ve+2)-33)+85*(ye[ct](Ve+3)-33)+(ye[ct](Ve+4)-33),Le.push(St&Ae>>24,St&Ae>>16,St&Ae>>8,St&Ae);return(function(Ot,qt){for(var It=qt;It>0;It--)Ot.pop()})(Le,fe[je]),dt.fromCharCode.apply(dt,Le)},W=function(ye){return ye.split("").map(function(fe){return("0"+fe.charCodeAt().toString(16)).slice(-2)}).join("")+">"},Z=function(ye){var fe=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((ye=ye.replace(/\s/g,"")).indexOf(">")!==-1&&(ye=ye.substr(0,ye.indexOf(">"))),ye.length%2&&(ye+="0"),fe.test(ye)===!1)return"";for(var Ae="",Le=0;Le<ye.length;Le+=2)Ae+=String.fromCharCode("0x"+(ye[Le]+ye[Le+1]));return Ae},re=function(ye){for(var fe=new Uint8Array(ye.length),Ae=ye.length;Ae--;)fe[Ae]=ye.charCodeAt(Ae);return(fe=(0,f.zlibSync)(fe)).reduce(function(Le,Ve){return Le+String.fromCharCode(Ve)},"")};P.processDataByFilters=function(ye,fe){var Ae=0,Le=ye||"",Ve=[];for(typeof(fe=fe||[])=="string"&&(fe=[fe]),Ae=0;Ae<fe.length;Ae+=1)switch(fe[Ae]){case"ASCII85Decode":case"/ASCII85Decode":Le=M(Le),Ve.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":Le=k(Le),Ve.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":Le=Z(Le),Ve.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":Le=W(Le),Ve.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":Le=re(Le),Ve.push("/FlateDecode");break;default:throw new Error('The filter: "'+fe[Ae]+'" is not implemented')}return{data:Le,reverseChain:Ve.reverse().join(" ")}}})(et.API),(function(P){P.loadFile=function(k,M,W){return(function(Z,re,ye){re=re!==!1,ye=typeof ye=="function"?ye:function(){};var fe=void 0;try{fe=(function(Ae,Le,Ve){var Ze=new XMLHttpRequest,dt=0,je=function(St){var ct=St.length,Nt=[],it=String.fromCharCode;for(dt=0;dt<ct;dt+=1)Nt.push(it(255&St.charCodeAt(dt)));return Nt.join("")};if(Ze.open("GET",Ae,!Le),Ze.overrideMimeType("text/plain; charset=x-user-defined"),Le===!1&&(Ze.onload=function(){Ze.status===200?Ve(je(this.responseText)):Ve(void 0)}),Ze.send(null),Le&&Ze.status===200)return je(Ze.responseText)})(Z,re,ye)}catch{}return fe})(k,M,W)},P.allowFsRead=void 0,P.loadImageFile=P.loadFile})(et.API),(function(P){function k(){return(g.html2canvas?Promise.resolve(g.html2canvas):Promise.resolve().then(l.t.bind(l,"html2canvas",23))).catch(function(fe){return Promise.reject(new Error("Could not load html2canvas: "+fe))}).then(function(fe){return fe.default?fe.default:fe})}function M(){return(g.DOMPurify?Promise.resolve(g.DOMPurify):Promise.resolve().then(l.bind(l,"./node_modules/dompurify/dist/purify.es.mjs"))).catch(function(fe){return Promise.reject(new Error("Could not load dompurify: "+fe))}).then(function(fe){return fe.default?fe.default:fe})}var W=function(fe){var Ae=(0,d.default)(fe);return Ae==="undefined"?"undefined":Ae==="string"||fe instanceof String?"string":Ae==="number"||fe instanceof Number?"number":Ae==="function"||fe instanceof Function?"function":fe&&fe.constructor===Array?"array":fe&&fe.nodeType===1?"element":Ae==="object"?"object":"unknown"},Z=function(fe,Ae){var Le=document.createElement(fe);for(var Ve in Ae.className&&(Le.className=Ae.className),Ae.innerHTML&&Ae.dompurify&&(Le.innerHTML=Ae.dompurify.sanitize(Ae.innerHTML)),Ae.style)Le.style[Ve]=Ae.style[Ve];return Le},re=function fe(Ae,Le){for(var Ve=Ae.nodeType===3?document.createTextNode(Ae.nodeValue):Ae.cloneNode(!1),Ze=Ae.firstChild;Ze;Ze=Ze.nextSibling)Le!==!0&&Ze.nodeType===1&&Ze.nodeName==="SCRIPT"||Ve.appendChild(fe(Ze,Le));return Ae.nodeType===1&&(Ae.nodeName==="CANVAS"?(Ve.width=Ae.width,Ve.height=Ae.height,Ve.getContext("2d").drawImage(Ae,0,0)):Ae.nodeName!=="TEXTAREA"&&Ae.nodeName!=="SELECT"||(Ve.value=Ae.value),Ve.addEventListener("load",function(){Ve.scrollTop=Ae.scrollTop,Ve.scrollLeft=Ae.scrollLeft},!0)),Ve},ye=function fe(Ae){var Le=Object.assign(fe.convert(Promise.resolve()),JSON.parse(JSON.stringify(fe.template))),Ve=fe.convert(Promise.resolve(),Le);return(Ve=Ve.setProgress(1,fe,1,[fe])).set(Ae)};(ye.prototype=Object.create(Promise.prototype)).constructor=ye,ye.convert=function(fe,Ae){return fe.__proto__=Ae||ye.prototype,fe},ye.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},ye.prototype.from=function(fe,Ae){return this.then(function(){switch(Ae=Ae||(function(Le){switch(W(Le)){case"string":return"string";case"element":return Le.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(fe),Ae){case"string":return this.then(M).then(function(Le){return this.set({src:Z("div",{innerHTML:fe,dompurify:Le})})});case"element":return this.set({src:fe});case"canvas":return this.set({canvas:fe});case"img":return this.set({img:fe});default:return this.error("Unknown source type.")}})},ye.prototype.to=function(fe){switch(fe){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},ye.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var fe={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},Ae=re(this.prop.src,this.opt.html2canvas.javascriptEnabled);Ae.tagName==="BODY"&&(fe.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=Z("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=Z("div",{className:"html2pdf__container",style:fe}),this.prop.container.appendChild(Ae),this.prop.container.firstChild.appendChild(Z("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},ye.prototype.toCanvas=function(){var fe=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(fe).then(k).then(function(Ae){var Le=Object.assign({},this.opt.html2canvas);return delete Le.onrendered,Ae(this.prop.container,Le)}).then(function(Ae){(this.opt.html2canvas.onrendered||function(){})(Ae),this.prop.canvas=Ae,document.body.removeChild(this.prop.overlay)})},ye.prototype.toContext2d=function(){var fe=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(fe).then(k).then(function(Ae){var Le=this.opt.jsPDF,Ve=this.opt.fontFaces,Ze=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,dt=Object.assign({async:!0,allowTaint:!0,scale:Ze,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete dt.onrendered,Le.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,Le.context2d.posX=this.opt.x,Le.context2d.posY=this.opt.y,Le.context2d.margin=this.opt.margin,Le.context2d.fontFaces=Ve,Ve)for(var je=0;je<Ve.length;++je){var St=Ve[je],ct=St.src.find(function(Nt){return Nt.format==="truetype"});ct&&Le.addFont(ct.url,St.ref.name,St.ref.style)}return dt.windowHeight=dt.windowHeight||0,dt.windowHeight=dt.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):dt.windowHeight,Le.context2d.save(!0),Ae(this.prop.container,dt)}).then(function(Ae){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(Ae),this.prop.canvas=Ae,document.body.removeChild(this.prop.overlay)})},ye.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var fe=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=fe})},ye.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},ye.prototype.output=function(fe,Ae,Le){return(Le=Le||"pdf").toLowerCase()==="img"||Le.toLowerCase()==="image"?this.outputImg(fe,Ae):this.outputPdf(fe,Ae)},ye.prototype.outputPdf=function(fe,Ae){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(fe,Ae)})},ye.prototype.outputImg=function(fe){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(fe){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+fe+'" is not supported.'}})},ye.prototype.save=function(fe){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(fe?{filename:fe}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},ye.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},ye.prototype.set=function(fe){if(W(fe)!=="object")return this;var Ae=Object.keys(fe||{}).map(function(Le){if(Le in ye.template.prop)return function(){this.prop[Le]=fe[Le]};switch(Le){case"margin":return this.setMargin.bind(this,fe.margin);case"jsPDF":return function(){return this.opt.jsPDF=fe.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,fe.pageSize);default:return function(){this.opt[Le]=fe[Le]}}},this);return this.then(function(){return this.thenList(Ae)})},ye.prototype.get=function(fe,Ae){return this.then(function(){var Le=fe in ye.template.prop?this.prop[fe]:this.opt[fe];return Ae?Ae(Le):Le})},ye.prototype.setMargin=function(fe){return this.then(function(){switch(W(fe)){case"number":fe=[fe,fe,fe,fe];case"array":if(fe.length===2&&(fe=[fe[0],fe[1],fe[0],fe[1]]),fe.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=fe}).then(this.setPageSize)},ye.prototype.setPageSize=function(fe){function Ae(Le,Ve){return Math.floor(Le*Ve/72*96)}return this.then(function(){(fe=fe||et.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(fe.inner={width:fe.width-this.opt.margin[1]-this.opt.margin[3],height:fe.height-this.opt.margin[0]-this.opt.margin[2]},fe.inner.px={width:Ae(fe.inner.width,fe.k),height:Ae(fe.inner.height,fe.k)},fe.inner.ratio=fe.inner.height/fe.inner.width),this.prop.pageSize=fe})},ye.prototype.setProgress=function(fe,Ae,Le,Ve){return fe!=null&&(this.progress.val=fe),Ae!=null&&(this.progress.state=Ae),Le!=null&&(this.progress.n=Le),Ve!=null&&(this.progress.stack=Ve),this.progress.ratio=this.progress.val/this.progress.state,this},ye.prototype.updateProgress=function(fe,Ae,Le,Ve){return this.setProgress(fe?this.progress.val+fe:null,Ae||null,Le?this.progress.n+Le:null,Ve?this.progress.stack.concat(Ve):null)},ye.prototype.then=function(fe,Ae){var Le=this;return this.thenCore(fe,Ae,function(Ve,Ze){return Le.updateProgress(null,null,1,[Ve]),Promise.prototype.then.call(this,function(dt){return Le.updateProgress(null,Ve),dt}).then(Ve,Ze).then(function(dt){return Le.updateProgress(1),dt})})},ye.prototype.thenCore=function(fe,Ae,Le){Le=Le||Promise.prototype.then;var Ve=this;fe&&(fe=fe.bind(Ve)),Ae&&(Ae=Ae.bind(Ve));var Ze=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?Ve:ye.convert(Object.assign({},Ve),Promise.prototype),dt=Le.call(Ze,fe,Ae);return ye.convert(dt,Ve.__proto__)},ye.prototype.thenExternal=function(fe,Ae){return Promise.prototype.then.call(this,fe,Ae)},ye.prototype.thenList=function(fe){var Ae=this;return fe.forEach(function(Le){Ae=Ae.thenCore(Le)}),Ae},ye.prototype.catch=function(fe){fe&&(fe=fe.bind(this));var Ae=Promise.prototype.catch.call(this,fe);return ye.convert(Ae,this)},ye.prototype.catchExternal=function(fe){return Promise.prototype.catch.call(this,fe)},ye.prototype.error=function(fe){return this.then(function(){throw new Error(fe)})},ye.prototype.using=ye.prototype.set,ye.prototype.saveAs=ye.prototype.save,ye.prototype.export=ye.prototype.output,ye.prototype.run=ye.prototype.then,et.getPageSize=function(fe,Ae,Le){if((0,d.default)(fe)==="object"){var Ve=fe;fe=Ve.orientation,Ae=Ve.unit||Ae,Le=Ve.format||Le}Ae=Ae||"mm",Le=Le||"a4",fe=(""+(fe||"P")).toLowerCase();var Ze,dt=(""+Le).toLowerCase(),je={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(Ae){case"pt":Ze=1;break;case"mm":Ze=2.834645669291339;break;case"cm":Ze=28.346456692913385;break;case"in":Ze=72;break;case"px":Ze=.75;break;case"pc":case"em":Ze=12;break;case"ex":Ze=6;break;default:throw"Invalid unit: "+Ae}var St,ct=0,Nt=0;if(je.hasOwnProperty(dt))ct=je[dt][1]/Ze,Nt=je[dt][0]/Ze;else try{ct=Le[1],Nt=Le[0]}catch{throw new Error("Invalid format: "+Le)}if(fe==="p"||fe==="portrait")fe="p",Nt>ct&&(St=Nt,Nt=ct,ct=St);else{if(fe!=="l"&&fe!=="landscape")throw"Invalid orientation: "+fe;fe="l",ct>Nt&&(St=Nt,Nt=ct,ct=St)}return{width:Nt,height:ct,unit:Ae,k:Ze,orientation:fe}},P.html=function(fe,Ae){(Ae=Ae||{}).callback=Ae.callback||function(){},Ae.html2canvas=Ae.html2canvas||{},Ae.html2canvas.canvas=Ae.html2canvas.canvas||this.canvas,Ae.jsPDF=Ae.jsPDF||this,Ae.fontFaces=Ae.fontFaces?Ae.fontFaces.map(qs):null;var Le=new ye(Ae);return Ae.worker?Le:Le.from(fe).doCallback()}})(et.API),et.API.addJS=function(P){return qa=P,this.internal.events.subscribe("postPutResources",function(){pl=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(pl+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),ra=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+qa+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){pl!==void 0&&ra!==void 0&&this.internal.out("/Names <</JavaScript "+pl+" 0 R>>")}),this},(function(P){var k;P.events.push(["postPutResources",function(){var M=this,W=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var Z=M.outline.render().split(/\r\n/),re=0;re<Z.length;re++){var ye=Z[re],fe=W.exec(ye);if(fe!=null){var Ae=fe[1];M.internal.newObjectDeferredBegin(Ae,!1)}M.internal.write(ye)}if(this.outline.createNamedDestinations){var Le=this.internal.pages.length,Ve=[];for(re=0;re<Le;re++){var Ze=M.internal.newObject();Ve.push(Ze);var dt=M.internal.getPageInfo(re+1);M.internal.write("<< /D["+dt.objId+" 0 R /XYZ null null null]>> endobj")}var je=M.internal.newObject();for(M.internal.write("<< /Names [ "),re=0;re<Ve.length;re++)M.internal.write("(page_"+(re+1)+")"+Ve[re]+" 0 R");M.internal.write(" ] >>","endobj"),k=M.internal.newObject(),M.internal.write("<< /Dests "+je+" 0 R"),M.internal.write(">>","endobj")}}]),P.events.push(["putCatalog",function(){var M=this;M.outline.root.children.length>0&&(M.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&M.internal.write("/Names "+k+" 0 R"))}]),P.events.push(["initialized",function(){var M=this;M.outline={createNamedDestinations:!1,root:{children:[]}},M.outline.add=function(W,Z,re){var ye={title:Z,options:re,children:[]};return W==null&&(W=this.root),W.children.push(ye),ye},M.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=M,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},M.outline.genIds_r=function(W){W.id=M.internal.newObjectDeferred();for(var Z=0;Z<W.children.length;Z++)this.genIds_r(W.children[Z])},M.outline.renderRoot=function(W){this.objStart(W),this.line("/Type /Outlines"),W.children.length>0&&(this.line("/First "+this.makeRef(W.children[0])),this.line("/Last "+this.makeRef(W.children[W.children.length-1]))),this.line("/Count "+this.count_r({count:0},W)),this.objEnd()},M.outline.renderItems=function(W){for(var Z=this.ctx.pdf.internal.getVerticalCoordinateString,re=0;re<W.children.length;re++){var ye=W.children[re];this.objStart(ye),this.line("/Title "+this.makeString(ye.title)),this.line("/Parent "+this.makeRef(W)),re>0&&this.line("/Prev "+this.makeRef(W.children[re-1])),re<W.children.length-1&&this.line("/Next "+this.makeRef(W.children[re+1])),ye.children.length>0&&(this.line("/First "+this.makeRef(ye.children[0])),this.line("/Last "+this.makeRef(ye.children[ye.children.length-1])));var fe=this.count=this.count_r({count:0},ye);if(fe>0&&this.line("/Count "+fe),ye.options&&ye.options.pageNumber){var Ae=M.internal.getPageInfo(ye.options.pageNumber);this.line("/Dest ["+Ae.objId+" 0 R /XYZ 0 "+Z(0)+" 0]")}this.objEnd()}for(var Le=0;Le<W.children.length;Le++)this.renderItems(W.children[Le])},M.outline.line=function(W){this.ctx.val+=W+`\r
`},M.outline.makeRef=function(W){return W.id+" 0 R"},M.outline.makeString=function(W){return"("+M.internal.pdfEscape(W)+")"},M.outline.objStart=function(W){this.ctx.val+=`\r
`+W.id+` 0 obj\r
<<\r
`},M.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},M.outline.count_r=function(W,Z){for(var re=0;re<Z.children.length;re++)W.count++,this.count_r(W,Z.children[re]);return W.count}}])})(et.API),(function(P){var k=[192,193,194,195,196,197,198,199];P.processJPEG=function(M,W,Z,re,ye,fe){var Ae,Le=this.decode.DCT_DECODE,Ve=null;if(typeof M=="string"||this.__addimage__.isArrayBuffer(M)||this.__addimage__.isArrayBufferView(M)){switch(M=ye||M,M=this.__addimage__.isArrayBuffer(M)?new Uint8Array(M):M,Ae=(function(Ze){for(var dt,je=256*Ze.charCodeAt(4)+Ze.charCodeAt(5),St=Ze.length,ct={width:0,height:0,numcomponents:1},Nt=4;Nt<St;Nt+=2){if(Nt+=je,k.indexOf(Ze.charCodeAt(Nt+1))!==-1){dt=256*Ze.charCodeAt(Nt+5)+Ze.charCodeAt(Nt+6),ct={width:256*Ze.charCodeAt(Nt+7)+Ze.charCodeAt(Nt+8),height:dt,numcomponents:Ze.charCodeAt(Nt+9)};break}je=256*Ze.charCodeAt(Nt+2)+Ze.charCodeAt(Nt+3)}return ct})(M=this.__addimage__.isArrayBufferView(M)?this.__addimage__.arrayBufferToBinaryString(M):M),Ae.numcomponents){case 1:fe=this.color_spaces.DEVICE_GRAY;break;case 4:fe=this.color_spaces.DEVICE_CMYK;break;case 3:fe=this.color_spaces.DEVICE_RGB}Ve={data:M,width:Ae.width,height:Ae.height,colorSpace:fe,bitsPerComponent:8,filter:Le,index:W,alias:Z}}return Ve}})(et.API),et.API.processPNG=function(P,k,M,W){if(this.__addimage__.isArrayBuffer(P)&&(P=new Uint8Array(P)),this.__addimage__.isArrayBufferView(P)){var Z,re=(0,p.decode)(P,{checkCrc:!0}),ye=re.width,fe=re.height,Ae=re.channels,Le=re.palette,Ve=re.depth;Z=Le&&Ae===1?(function(or){for(var Mt=or.width,_r=or.height,lt=or.data,vt=or.palette,Rt=or.depth,Dt=!1,vr=[],kr=[],Rr=void 0,ur=!1,Or=0,pn=0;pn<vt.length;pn++){var on=(0,m.default)(vt[pn],4),Ye=on[0],Tt=on[1],Lt=on[2],Wt=on[3];vr.push(Ye,Tt,Lt),Wt!=null&&(Wt===0?(Or++,kr.length<1&&kr.push(pn)):Wt<255&&(ur=!0))}if(ur||Or>1){Dt=!0,kr=void 0;var Xt=Mt*_r;Rr=new Uint8Array(Xt);for(var fr=new DataView(lt.buffer),Lr=0;Lr<Xt;Lr++){var Nr=Ca(fr,Lr,Rt),Zr=(0,m.default)(vt[Nr],4)[3];Rr[Lr]=Zr}}else Or===0&&(kr=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:Dt?8:void 0,colorBytes:lt,alphaBytes:Rr,needSMask:Dt,palette:vr,mask:kr}})(re):Ae===2||Ae===4?(function(or){for(var Mt=or.data,_r=or.width,lt=or.height,vt=or.channels,Rt=or.depth,Dt=vt===2?"DeviceGray":"DeviceRGB",vr=vt-1,kr=_r*lt,Rr=vr,ur=kr*Rr,Or=1*kr,pn=Math.ceil(ur*Rt/8),on=Math.ceil(Or*Rt/8),Ye=new Uint8Array(pn),Tt=new Uint8Array(on),Lt=new DataView(Mt.buffer),Wt=new DataView(Ye.buffer),Xt=new DataView(Tt.buffer),fr=!1,Lr=0;Lr<kr;Lr++){for(var Nr=Lr*vt,Zr=0;Zr<Rr;Zr++)gi(Wt,Ca(Lt,Nr+Zr,Rt),Lr*Rr+Zr,Rt);var An=Ca(Lt,Nr+Rr,Rt);An<(1<<Rt)-1&&(fr=!0),gi(Xt,An,1*Lr,Rt)}return{colorSpace:Dt,colorsPerPixel:vr,sMaskBitsPerComponent:fr?Rt:void 0,colorBytes:Ye,alphaBytes:Tt,needSMask:fr}})(re):(function(or){var Mt=or.data,_r=or.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:_r,colorsPerPixel:_r==="DeviceGray"?1:3,colorBytes:Mt instanceof Uint16Array?(function(lt){for(var vt=lt.length,Rt=new Uint8Array(2*vt),Dt=new DataView(Rt.buffer,Rt.byteOffset,Rt.byteLength),vr=0;vr<vt;vr++)Dt.setUint16(2*vr,lt[vr],!1);return Rt})(Mt):Mt,needSMask:!1}})(re);var Ze,dt,je,St=Z,ct=St.colorSpace,Nt=St.colorsPerPixel,it=St.sMaskBitsPerComponent,Ot=St.colorBytes,qt=St.alphaBytes,It=St.needSMask,nt=St.palette,Vt=St.mask,Tr=null;return W!==et.API.image_compression.NONE&&typeof f.zlibSync=="function"?(Tr=(function(or){var Mt;switch(or){case et.API.image_compression.FAST:Mt=11;break;case et.API.image_compression.MEDIUM:Mt=13;break;case et.API.image_compression.SLOW:Mt=14;break;default:Mt=12}return Mt})(W),Ze=this.decode.FLATE_DECODE,dt="/Predictor ".concat(Tr," /Colors ").concat(Nt," /BitsPerComponent ").concat(Ve," /Columns ").concat(ye),P=gl(Ot,Math.ceil(ye*Nt*Ve/8),Nt,Ve,W),It&&(je=gl(qt,Math.ceil(ye*it/8),1,it,W))):(Ze=void 0,dt=void 0,P=Ot,It&&(je=qt)),(this.__addimage__.isArrayBuffer(P)||this.__addimage__.isArrayBufferView(P))&&(P=this.__addimage__.arrayBufferToBinaryString(P)),(je&&this.__addimage__.isArrayBuffer(je)||this.__addimage__.isArrayBufferView(je))&&(je=this.__addimage__.arrayBufferToBinaryString(je)),{alias:M,data:P,index:k,filter:Ze,decodeParameters:dt,transparency:Vt,palette:nt,sMask:je,predictor:Tr,width:ye,height:fe,bitsPerComponent:Ve,sMaskBitsPerComponent:it,colorSpace:ct}}},(function(P){P.processGIF89A=function(k,M,W,Z){var re=new fs(k),ye=re.width,fe=re.height,Ae=[];re.decodeAndBlitFrameRGBA(0,Ae);var Le={data:Ae,width:ye,height:fe},Ve=new Qo(100).encode(Le,100);return P.processJPEG.call(this,Ve,M,W,Z)},P.processGIF87A=P.processGIF89A})(et.API),Hi.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var P=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(P);for(var k=0;k<P;k++){var M=this.datav.getUint8(this.pos++,!0),W=this.datav.getUint8(this.pos++,!0),Z=this.datav.getUint8(this.pos++,!0),re=this.datav.getUint8(this.pos++,!0);this.palette[k]={red:Z,green:W,blue:M,quad:re}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Hi.prototype.parseBGR=function(){this.pos=this.offset;try{var P="bit"+this.bitPP,k=this.width*this.height*4;this.data=new Uint8Array(k),this[P]()}catch(M){x.log("bit decode error:"+M)}},Hi.prototype.bit1=function(){var P,k=Math.ceil(this.width/8),M=k%4;for(P=this.height-1;P>=0;P--){for(var W=this.bottom_up?P:this.height-1-P,Z=0;Z<k;Z++)for(var re=this.datav.getUint8(this.pos++,!0),ye=W*this.width*4+8*Z*4,fe=0;fe<8&&8*Z+fe<this.width;fe++){var Ae=this.palette[re>>7-fe&1];this.data[ye+4*fe]=Ae.blue,this.data[ye+4*fe+1]=Ae.green,this.data[ye+4*fe+2]=Ae.red,this.data[ye+4*fe+3]=255}M!==0&&(this.pos+=4-M)}},Hi.prototype.bit4=function(){for(var P=Math.ceil(this.width/2),k=P%4,M=this.height-1;M>=0;M--){for(var W=this.bottom_up?M:this.height-1-M,Z=0;Z<P;Z++){var re=this.datav.getUint8(this.pos++,!0),ye=W*this.width*4+2*Z*4,fe=re>>4,Ae=15&re,Le=this.palette[fe];if(this.data[ye]=Le.blue,this.data[ye+1]=Le.green,this.data[ye+2]=Le.red,this.data[ye+3]=255,2*Z+1>=this.width)break;Le=this.palette[Ae],this.data[ye+4]=Le.blue,this.data[ye+4+1]=Le.green,this.data[ye+4+2]=Le.red,this.data[ye+4+3]=255}k!==0&&(this.pos+=4-k)}},Hi.prototype.bit8=function(){for(var P=this.width%4,k=this.height-1;k>=0;k--){for(var M=this.bottom_up?k:this.height-1-k,W=0;W<this.width;W++){var Z=this.datav.getUint8(this.pos++,!0),re=M*this.width*4+4*W;if(Z<this.palette.length){var ye=this.palette[Z];this.data[re]=ye.red,this.data[re+1]=ye.green,this.data[re+2]=ye.blue,this.data[re+3]=255}else this.data[re]=255,this.data[re+1]=255,this.data[re+2]=255,this.data[re+3]=255}P!==0&&(this.pos+=4-P)}},Hi.prototype.bit15=function(){for(var P=this.width%3,k=parseInt("11111",2),M=this.height-1;M>=0;M--){for(var W=this.bottom_up?M:this.height-1-M,Z=0;Z<this.width;Z++){var re=this.datav.getUint16(this.pos,!0);this.pos+=2;var ye=(re&k)/k*255|0,fe=(re>>5&k)/k*255|0,Ae=(re>>10&k)/k*255|0,Le=re>>15?255:0,Ve=W*this.width*4+4*Z;this.data[Ve]=Ae,this.data[Ve+1]=fe,this.data[Ve+2]=ye,this.data[Ve+3]=Le}this.pos+=P}},Hi.prototype.bit16=function(){for(var P=this.width%3,k=parseInt("11111",2),M=parseInt("111111",2),W=this.height-1;W>=0;W--){for(var Z=this.bottom_up?W:this.height-1-W,re=0;re<this.width;re++){var ye=this.datav.getUint16(this.pos,!0);this.pos+=2;var fe=(ye&k)/k*255|0,Ae=(ye>>5&M)/M*255|0,Le=(ye>>11)/k*255|0,Ve=Z*this.width*4+4*re;this.data[Ve]=Le,this.data[Ve+1]=Ae,this.data[Ve+2]=fe,this.data[Ve+3]=255}this.pos+=P}},Hi.prototype.bit24=function(){for(var P=this.height-1;P>=0;P--){for(var k=this.bottom_up?P:this.height-1-P,M=0;M<this.width;M++){var W=this.datav.getUint8(this.pos++,!0),Z=this.datav.getUint8(this.pos++,!0),re=this.datav.getUint8(this.pos++,!0),ye=k*this.width*4+4*M;this.data[ye]=re,this.data[ye+1]=Z,this.data[ye+2]=W,this.data[ye+3]=255}this.pos+=this.width%4}},Hi.prototype.bit32=function(){for(var P=this.height-1;P>=0;P--)for(var k=this.bottom_up?P:this.height-1-P,M=0;M<this.width;M++){var W=this.datav.getUint8(this.pos++,!0),Z=this.datav.getUint8(this.pos++,!0),re=this.datav.getUint8(this.pos++,!0),ye=this.datav.getUint8(this.pos++,!0),fe=k*this.width*4+4*M;this.data[fe]=re,this.data[fe+1]=Z,this.data[fe+2]=W,this.data[fe+3]=ye}},Hi.prototype.getData=function(){return this.data},(function(P){P.processBMP=function(k,M,W,Z){var re=new Hi(k,!1),ye=re.width,fe=re.height,Ae={data:re.getData(),width:ye,height:fe},Le=new Qo(100).encode(Ae,100);return P.processJPEG.call(this,Le,M,W,Z)}})(et.API),zo.prototype.getData=function(){return this.data},(function(P){P.processWEBP=function(k,M,W,Z){var re=new zo(k),ye=re.width,fe=re.height,Ae={data:re.getData(),width:ye,height:fe},Le=new Qo(100).encode(Ae,100);return P.processJPEG.call(this,Le,M,W,Z)}})(et.API),et.API.processRGBA=function(P,k,M){for(var W=P.data,Z=W.length,re=new Uint8Array(Z/4*3),ye=new Uint8Array(Z/4),fe=0,Ae=0,Le=0;Le<Z;Le+=4){var Ve=W[Le],Ze=W[Le+1],dt=W[Le+2],je=W[Le+3];re[fe++]=Ve,re[fe++]=Ze,re[fe++]=dt,ye[Ae++]=je}var St=this.__addimage__.arrayBufferToBinaryString(re);return{alpha:this.__addimage__.arrayBufferToBinaryString(ye),data:St,index:k,alias:M,colorSpace:"DeviceRGB",bitsPerComponent:8,width:P.width,height:P.height}},et.API.setLanguage=function(P){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[P]!==void 0&&(this.internal.languageSettings.languageCode=P,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Ws=et.API,wa=Ws.getCharWidthsArray=function(P,k){var M,W,Z=(k=k||{}).font||this.internal.getFont(),re=k.fontSize||this.internal.getFontSize(),ye=k.charSpace||this.internal.getCharSpace(),fe=k.widths?k.widths:Z.metadata.Unicode.widths,Ae=fe.fof?fe.fof:1,Le=k.kerning?k.kerning:Z.metadata.Unicode.kerning,Ve=Le.fof?Le.fof:1,Ze=k.doKerning!==!1,dt=0,je=P.length,St=0,ct=fe[0]||Ae,Nt=[];for(M=0;M<je;M++)W=P.charCodeAt(M),typeof Z.metadata.widthOfString=="function"?Nt.push((Z.metadata.widthOfGlyph(Z.metadata.characterToGlyph(W))+ye*(1e3/re)||0)/1e3):(dt=Ze&&(0,d.default)(Le[W])==="object"&&!isNaN(parseInt(Le[W][St],10))?Le[W][St]/Ve:0,Nt.push((fe[W]||ct)/Ae+dt)),St=W;return Nt},$s=Ws.getStringUnitWidth=function(P,k){var M=(k=k||{}).fontSize||this.internal.getFontSize(),W=k.font||this.internal.getFont(),Z=k.charSpace||this.internal.getCharSpace();return Ws.processArabic&&(P=Ws.processArabic(P)),typeof W.metadata.widthOfString=="function"?W.metadata.widthOfString(P,M,Z)/M:wa.apply(this,arguments).reduce(function(re,ye){return re+ye},0)},Ll=function(P,k,M,W){for(var Z=[],re=0,ye=P.length,fe=0;re!==ye&&fe+k[re]<M;)fe+=k[re],re++;Z.push(P.slice(0,re));var Ae=re;for(fe=0;re!==ye;)fe+k[re]>W&&(Z.push(P.slice(Ae,re)),fe=0,Ae=re),fe+=k[re],re++;return Ae!==re&&Z.push(P.slice(Ae,re)),Z},go=function(P,k,M){M||(M={});var W,Z,re,ye,fe,Ae,Le,Ve=[],Ze=[Ve],dt=M.textIndent||0,je=0,St=0,ct=P.split(" "),Nt=wa.apply(this,[" ",M])[0];if(Ae=M.lineIndent===-1?ct[0].length+2:M.lineIndent||0){var it=Array(Ae).join(" "),Ot=[];ct.map(function(It){(It=It.split(/\s*\n/)).length>1?Ot=Ot.concat(It.map(function(nt,Vt){return(Vt&&nt.length?`
`:"")+nt})):Ot.push(It[0])}),ct=Ot,Ae=$s.apply(this,[it,M])}for(re=0,ye=ct.length;re<ye;re++){var qt=0;if(W=ct[re],Ae&&W[0]==`
`&&(W=W.substr(1),qt=1),dt+je+(St=(Z=wa.apply(this,[W,M])).reduce(function(It,nt){return It+nt},0))>k||qt){if(St>k){for(fe=Ll.apply(this,[W,Z,k-(dt+je),k]),Ve.push(fe.shift()),Ve=[fe.pop()];fe.length;)Ze.push([fe.shift()]);St=Z.slice(W.length-(Ve[0]?Ve[0].length:0)).reduce(function(It,nt){return It+nt},0)}else Ve=[W];Ze.push(Ve),dt=St+Ae,je=Nt}else Ve.push(W),dt+=je+St,je=Nt}return Le=Ae?function(It,nt){return(nt?it:"")+It.join(" ")}:function(It){return It.join(" ")},Ze.map(Le)},Ws.splitTextToSize=function(P,k,M){var W,Z=(M=M||{}).fontSize||this.internal.getFontSize(),re=(function(Ve){if(Ve.widths&&Ve.kerning)return{widths:Ve.widths,kerning:Ve.kerning};var Ze=this.internal.getFont(Ve.fontName,Ve.fontStyle),dt="Unicode";return Ze.metadata[dt]?{widths:Ze.metadata[dt].widths||{0:1},kerning:Ze.metadata[dt].kerning||{}}:{font:Ze.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,M);W=Array.isArray(P)?P:String(P).split(/\r?\n/);var ye=1*this.internal.scaleFactor*k/Z;re.textIndent=M.textIndent?1*M.textIndent*this.internal.scaleFactor/Z:0,re.lineIndent=M.lineIndent;var fe,Ae,Le=[];for(fe=0,Ae=W.length;fe<Ae;fe++)Le=Le.concat(go.apply(this,[W[fe],ye,re]));return Le},(function(P){P.__fontmetrics__=P.__fontmetrics__||{};for(var k="0123456789abcdef",M="klmnopqrstuvwxyz",W={},Z={},re=0;re<16;re++)W[M[re]]=k[re],Z[k[re]]=M[re];var ye=function(dt){return"0x"+parseInt(dt,10).toString(16)},fe=P.__fontmetrics__.compress=function(dt){var je,St,ct,Nt,it=["{"];for(var Ot in dt){if(je=dt[Ot],isNaN(parseInt(Ot,10))?St="'"+Ot+"'":(Ot=parseInt(Ot,10),St=(St=ye(Ot).slice(2)).slice(0,-1)+Z[St.slice(-1)]),typeof je=="number")je<0?(ct=ye(je).slice(3),Nt="-"):(ct=ye(je).slice(2),Nt=""),ct=Nt+ct.slice(0,-1)+Z[ct.slice(-1)];else{if((0,d.default)(je)!=="object")throw new Error("Don't know what to do with value type "+(0,d.default)(je)+".");ct=fe(je)}it.push(St+ct)}return it.push("}"),it.join("")},Ae=P.__fontmetrics__.uncompress=function(dt){if(typeof dt!="string")throw new Error("Invalid argument passed to uncompress.");for(var je,St,ct,Nt,it={},Ot=1,qt=it,It=[],nt="",Vt="",Tr=dt.length-1,or=1;or<Tr;or+=1)(Nt=dt[or])=="'"?je?(ct=je.join(""),je=void 0):je=[]:je?je.push(Nt):Nt=="{"?(It.push([qt,ct]),qt={},ct=void 0):Nt=="}"?((St=It.pop())[0][St[1]]=qt,ct=void 0,qt=St[0]):Nt=="-"?Ot=-1:ct===void 0?W.hasOwnProperty(Nt)?(nt+=W[Nt],ct=parseInt(nt,16)*Ot,Ot=1,nt=""):nt+=Nt:W.hasOwnProperty(Nt)?(Vt+=W[Nt],qt[ct]=parseInt(Vt,16)*Ot,Ot=1,ct=void 0,Vt=""):Vt+=Nt;return it},Le={codePages:["WinAnsiEncoding"],WinAnsiEncoding:Ae("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},Ve={Unicode:{Courier:Le,"Courier-Bold":Le,"Courier-BoldOblique":Le,"Courier-Oblique":Le,Helvetica:Le,"Helvetica-Bold":Le,"Helvetica-BoldOblique":Le,"Helvetica-Oblique":Le,"Times-Roman":Le,"Times-Bold":Le,"Times-BoldItalic":Le,"Times-Italic":Le}},Ze={Unicode:{"Courier-Oblique":Ae("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":Ae("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":Ae("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:Ae("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":Ae("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":Ae("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:Ae("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:Ae("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":Ae("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:Ae("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":Ae("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":Ae("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":Ae("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":Ae("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};P.events.push(["addFont",function(dt){var je=dt.font,St=Ze.Unicode[je.postScriptName];St&&(je.metadata.Unicode={},je.metadata.Unicode.widths=St.widths,je.metadata.Unicode.kerning=St.kerning);var ct=Ve.Unicode[je.postScriptName];ct&&(je.metadata.Unicode.encoding=ct,je.encoding=ct.codePages[0])}])})(et.API),(function(P){var k=function(M){for(var W=M.length,Z=new Uint8Array(W),re=0;re<W;re++)Z[re]=M.charCodeAt(re);return Z};P.API.events.push(["addFont",function(M){var W=void 0,Z=M.font,re=M.instance;if(!Z.isStandardFont){if(re===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+Z.postScriptName+"').");if(typeof(W=re.existsFileInVFS(Z.postScriptName)===!1?re.loadFile(Z.postScriptName):re.getFileFromVFS(Z.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+Z.postScriptName+"').");(function(ye,fe){fe=/^\x00\x01\x00\x00/.test(fe)?k(fe):k(I(fe)),ye.metadata=P.API.TTFFont.open(fe),ye.metadata.Unicode=ye.metadata.Unicode||{encoding:{},kerning:{},widths:[]},ye.metadata.glyIdsUsed=[0]})(Z,W)}}])})(et),et.API.addSvgAsImage=function(P,k,M,W,Z,re,ye,fe){if(isNaN(k)||isNaN(M))throw x.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(W)||isNaN(Z))throw x.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var Ae=document.createElement("canvas");Ae.width=W,Ae.height=Z;var Le=Ae.getContext("2d");Le.fillStyle="#fff",Le.fillRect(0,0,Ae.width,Ae.height);var Ve={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},Ze=this;return(g.canvg?Promise.resolve(g.canvg):Promise.resolve().then(l.bind(l,"./node_modules/canvg/lib/index.es.js"))).catch(function(dt){return Promise.reject(new Error("Could not load canvg: "+dt))}).then(function(dt){return dt.default?dt.default:dt}).then(function(dt){return dt.fromString(Le,P,Ve)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(dt){return dt.render(Ve)}).then(function(){Ze.addImage(Ae.toDataURL("image/jpeg",1),k,M,W,Z,ye,fe)})},et.API.putTotalPages=function(P){var k,M=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(k=new RegExp(P,"g"),M=this.internal.getNumberOfPages()):(k=new RegExp(this.pdfEscape16(P,this.internal.getFont()),"g"),M=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var W=1;W<=this.internal.getNumberOfPages();W++)for(var Z=0;Z<this.internal.pages[W].length;Z++)this.internal.pages[W][Z]=this.internal.pages[W][Z].replace(k,M);return this},et.API.viewerPreferences=function(P,k){var M;P=P||{},k=k||!1;var W,Z,re,ye={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},fe=Object.keys(ye),Ae=[],Le=0,Ve=0,Ze=0;function dt(St,ct){var Nt,it=!1;for(Nt=0;Nt<St.length;Nt+=1)St[Nt]===ct&&(it=!0);return it}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(ye)),this.internal.viewerpreferences.isSubscribed=!1),M=this.internal.viewerpreferences.configuration,P==="reset"||k===!0){var je=fe.length;for(Ze=0;Ze<je;Ze+=1)M[fe[Ze]].value=M[fe[Ze]].defaultValue,M[fe[Ze]].explicitSet=!1}if((0,d.default)(P)==="object"){for(Z in P)if(re=P[Z],dt(fe,Z)&&re!==void 0){if(M[Z].type==="boolean"&&typeof re=="boolean")M[Z].value=re;else if(M[Z].type==="name"&&dt(M[Z].valueSet,re))M[Z].value=re;else if(M[Z].type==="integer"&&Number.isInteger(re))M[Z].value=re;else if(M[Z].type==="array"){for(Le=0;Le<re.length;Le+=1)if(W=!0,re[Le].length===1&&typeof re[Le][0]=="number")Ae.push(String(re[Le]-1));else if(re[Le].length>1){for(Ve=0;Ve<re[Le].length;Ve+=1)typeof re[Le][Ve]!="number"&&(W=!1);W===!0&&Ae.push([re[Le][0]-1,re[Le][1]-1].join(" "))}M[Z].value="["+Ae.join(" ")+"]"}else M[Z].value=M[Z].defaultValue;M[Z].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var St,ct=[];for(St in M)M[St].explicitSet===!0&&(M[St].type==="name"?ct.push("/"+St+" /"+M[St].value):ct.push("/"+St+" "+M[St].value));ct.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+ct.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=M,this},(function(P){var k=function(){var W='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',Z=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),re=unescape(encodeURIComponent(W)),ye=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),fe=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),Ae=unescape(encodeURIComponent("</x:xmpmeta>")),Le=re.length+ye.length+fe.length+Z.length+Ae.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+Le+" >>"),this.internal.write("stream"),this.internal.write(Z+re+ye+fe+Ae),this.internal.write("endstream"),this.internal.write("endobj")},M=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};P.addMetadata=function(W,Z){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:W,namespaceuri:Z||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",M),this.internal.events.subscribe("postPutResources",k)),this}})(et.API),(function(P){var k=P.API,M=k.pdfEscape16=function(re,ye){for(var fe,Ae=ye.metadata.Unicode.widths,Le=["","0","00","000","0000"],Ve=[""],Ze=0,dt=re.length;Ze<dt;++Ze){if(fe=ye.metadata.characterToGlyph(re.charCodeAt(Ze)),ye.metadata.glyIdsUsed.push(fe),ye.metadata.toUnicode[fe]=re.charCodeAt(Ze),Ae.indexOf(fe)==-1&&(Ae.push(fe),Ae.push([parseInt(ye.metadata.widthOfGlyph(fe),10)])),fe=="0")return Ve.join("");fe=fe.toString(16),Ve.push(Le[4-fe.length],fe)}return Ve.join("")},W=function(re){var ye,fe,Ae,Le,Ve,Ze,dt;for(Ve=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,Ae=[],Ze=0,dt=(fe=Object.keys(re).sort(function(je,St){return je-St})).length;Ze<dt;Ze++)ye=fe[Ze],Ae.length>=100&&(Ve+=`
`+Ae.length+` beginbfchar
`+Ae.join(`
`)+`
endbfchar`,Ae=[]),re[ye]!==void 0&&re[ye]!==null&&typeof re[ye].toString=="function"&&(Le=("0000"+re[ye].toString(16)).slice(-4),ye=("0000"+(+ye).toString(16)).slice(-4),Ae.push("<"+ye+"><"+Le+">"));return Ae.length&&(Ve+=`
`+Ae.length+` beginbfchar
`+Ae.join(`
`)+`
endbfchar
`),Ve+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};k.events.push(["putFont",function(re){(function(ye){var fe=ye.font,Ae=ye.out,Le=ye.newObject,Ve=ye.putStream;if(fe.metadata instanceof P.API.TTFFont&&fe.encoding==="Identity-H"){for(var Ze=fe.metadata.Unicode.widths,dt=fe.metadata.subset.encode(fe.metadata.glyIdsUsed,1),je="",St=0;St<dt.length;St++)je+=String.fromCharCode(dt[St]);var ct=Le();Ve({data:je,addLength1:!0,objectId:ct}),Ae("endobj");var Nt=Le();Ve({data:W(fe.metadata.toUnicode),addLength1:!0,objectId:Nt}),Ae("endobj");var it=Le();Ae("<<"),Ae("/Type /FontDescriptor"),Ae("/FontName /"+He(fe.fontName)),Ae("/FontFile2 "+ct+" 0 R"),Ae("/FontBBox "+P.API.PDFObject.convert(fe.metadata.bbox)),Ae("/Flags "+fe.metadata.flags),Ae("/StemV "+fe.metadata.stemV),Ae("/ItalicAngle "+fe.metadata.italicAngle),Ae("/Ascent "+fe.metadata.ascender),Ae("/Descent "+fe.metadata.decender),Ae("/CapHeight "+fe.metadata.capHeight),Ae(">>"),Ae("endobj");var Ot=Le();Ae("<<"),Ae("/Type /Font"),Ae("/BaseFont /"+He(fe.fontName)),Ae("/FontDescriptor "+it+" 0 R"),Ae("/W "+P.API.PDFObject.convert(Ze)),Ae("/CIDToGIDMap /Identity"),Ae("/DW 1000"),Ae("/Subtype /CIDFontType2"),Ae("/CIDSystemInfo"),Ae("<<"),Ae("/Supplement 0"),Ae("/Registry (Adobe)"),Ae("/Ordering ("+fe.encoding+")"),Ae(">>"),Ae(">>"),Ae("endobj"),fe.objectNumber=Le(),Ae("<<"),Ae("/Type /Font"),Ae("/Subtype /Type0"),Ae("/ToUnicode "+Nt+" 0 R"),Ae("/BaseFont /"+He(fe.fontName)),Ae("/Encoding /"+fe.encoding),Ae("/DescendantFonts ["+Ot+" 0 R]"),Ae(">>"),Ae("endobj"),fe.isAlreadyPutted=!0}})(re)}]),k.events.push(["putFont",function(re){(function(ye){var fe=ye.font,Ae=ye.out,Le=ye.newObject,Ve=ye.putStream;if(fe.metadata instanceof P.API.TTFFont&&fe.encoding==="WinAnsiEncoding"){for(var Ze=fe.metadata.rawData,dt="",je=0;je<Ze.length;je++)dt+=String.fromCharCode(Ze[je]);var St=Le();Ve({data:dt,addLength1:!0,objectId:St}),Ae("endobj");var ct=Le();Ve({data:W(fe.metadata.toUnicode),addLength1:!0,objectId:ct}),Ae("endobj");var Nt=Le();Ae("<<"),Ae("/Descent "+fe.metadata.decender),Ae("/CapHeight "+fe.metadata.capHeight),Ae("/StemV "+fe.metadata.stemV),Ae("/Type /FontDescriptor"),Ae("/FontFile2 "+St+" 0 R"),Ae("/Flags 96"),Ae("/FontBBox "+P.API.PDFObject.convert(fe.metadata.bbox)),Ae("/FontName /"+He(fe.fontName)),Ae("/ItalicAngle "+fe.metadata.italicAngle),Ae("/Ascent "+fe.metadata.ascender),Ae(">>"),Ae("endobj"),fe.objectNumber=Le();for(var it=0;it<fe.metadata.hmtx.widths.length;it++)fe.metadata.hmtx.widths[it]=parseInt(fe.metadata.hmtx.widths[it]*(1e3/fe.metadata.head.unitsPerEm));Ae("<</Subtype/TrueType/Type/Font/ToUnicode "+ct+" 0 R/BaseFont/"+He(fe.fontName)+"/FontDescriptor "+Nt+" 0 R/Encoding/"+fe.encoding+" /FirstChar 29 /LastChar 255 /Widths "+P.API.PDFObject.convert(fe.metadata.hmtx.widths)+">>"),Ae("endobj"),fe.isAlreadyPutted=!0}})(re)}]);var Z=function(re){var ye,fe=re.text||"",Ae=re.x,Le=re.y,Ve=re.options||{},Ze=re.mutex||{},dt=Ze.pdfEscape,je=Ze.activeFontKey,St=Ze.fonts,ct=je,Nt="",it=0,Ot="",qt=St[ct].encoding;if(St[ct].encoding!=="Identity-H")return{text:fe,x:Ae,y:Le,options:Ve,mutex:Ze};for(Ot=fe,ct=je,Array.isArray(fe)&&(Ot=fe[0]),it=0;it<Ot.length;it+=1)St[ct].metadata.hasOwnProperty("cmap")&&(ye=St[ct].metadata.cmap.unicode.codeMap[Ot[it].charCodeAt(0)]),ye||Ot[it].charCodeAt(0)<256&&St[ct].metadata.hasOwnProperty("Unicode")?Nt+=Ot[it]:Nt+="";var It="";return parseInt(ct.slice(1))<14||qt==="WinAnsiEncoding"?It=dt(Nt,ct).split("").map(function(nt){return nt.charCodeAt(0).toString(16)}).join(""):qt==="Identity-H"&&(It=M(Nt,St[ct])),Ze.isHex=!0,{text:It,x:Ae,y:Le,options:Ve,mutex:Ze}};k.events.push(["postProcessText",function(re){var ye=re.text||"",fe=[],Ae={text:ye,x:re.x,y:re.y,options:re.options,mutex:re.mutex};if(Array.isArray(ye)){var Le=0;for(Le=0;Le<ye.length;Le+=1)Array.isArray(ye[Le])&&ye[Le].length===3?fe.push([Z(Object.assign({},Ae,{text:ye[Le][0]})).text,ye[Le][1],ye[Le][2]]):fe.push(Z(Object.assign({},Ae,{text:ye[Le]})).text);re.text=fe}else re.text=Z(Object.assign({},Ae,{text:ye})).text}])})(et),(function(P){var k=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};P.existsFileInVFS=function(M){return k.call(this),this.internal.vFS[M]!==void 0},P.addFileToVFS=function(M,W){return k.call(this),this.internal.vFS[M]=W,this},P.getFileFromVFS=function(M){return k.call(this),this.internal.vFS[M]!==void 0?this.internal.vFS[M]:null}})(et.API),(function(P){P.__bidiEngine__=P.prototype.__bidiEngine__=function(W){var Z,re,ye,fe,Ae,Le,Ve,Ze=k,dt=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],je=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],St={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},ct={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},Nt=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],it=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),Ot=!1,qt=0;this.__bidiEngine__={};var It=function(lt){var vt=lt.charCodeAt(),Rt=vt>>8,Dt=ct[Rt];return Dt!==void 0?Ze[256*Dt+(255&vt)]:Rt===252||Rt===253?"AL":it.test(Rt)?"L":Rt===8?"R":"N"},nt=function(lt){for(var vt,Rt=0;Rt<lt.length;Rt++){if((vt=It(lt.charAt(Rt)))==="L")return!1;if(vt==="R")return!0}return!1},Vt=function(lt,vt,Rt,Dt){var vr,kr,Rr,ur,Or=vt[Dt];switch(Or){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":Ot=!1;break;case"N":case"AN":break;case"EN":Ot&&(Or="AN");break;case"AL":Ot=!0,Or="R";break;case"WS":case"BN":Or="N";break;case"CS":Dt<1||Dt+1>=vt.length||(vr=Rt[Dt-1])!=="EN"&&vr!=="AN"||(kr=vt[Dt+1])!=="EN"&&kr!=="AN"?Or="N":Ot&&(kr="AN"),Or=kr===vr?kr:"N";break;case"ES":Or=(vr=Dt>0?Rt[Dt-1]:"B")==="EN"&&Dt+1<vt.length&&vt[Dt+1]==="EN"?"EN":"N";break;case"ET":if(Dt>0&&Rt[Dt-1]==="EN"){Or="EN";break}if(Ot){Or="N";break}for(Rr=Dt+1,ur=vt.length;Rr<ur&&vt[Rr]==="ET";)Rr++;Or=Rr<ur&&vt[Rr]==="EN"?"EN":"N";break;case"NSM":if(ye&&!fe){for(ur=vt.length,Rr=Dt+1;Rr<ur&&vt[Rr]==="NSM";)Rr++;if(Rr<ur){var pn=lt[Dt],on=pn>=1425&&pn<=2303||pn===64286;if(vr=vt[Rr],on&&(vr==="R"||vr==="AL")){Or="R";break}}}Or=Dt<1||(vr=vt[Dt-1])==="B"?"N":Rt[Dt-1];break;case"B":Ot=!1,Z=!0,Or=qt;break;case"S":re=!0,Or="N"}return Or},Tr=function(lt,vt,Rt){var Dt=lt.split("");return Rt&&or(Dt,Rt,{hiLevel:qt}),Dt.reverse(),vt&&vt.reverse(),Dt.join("")},or=function(lt,vt,Rt){var Dt,vr,kr,Rr,ur,Or=-1,pn=lt.length,on=0,Ye=[],Tt=qt?je:dt,Lt=[];for(Ot=!1,Z=!1,re=!1,vr=0;vr<pn;vr++)Lt[vr]=It(lt[vr]);for(kr=0;kr<pn;kr++){if(ur=on,Ye[kr]=Vt(lt,Lt,Ye,kr),Dt=240&(on=Tt[ur][St[Ye[kr]]]),on&=15,vt[kr]=Rr=Tt[on][5],Dt>0)if(Dt===16){for(vr=Or;vr<kr;vr++)vt[vr]=1;Or=-1}else Or=-1;if(Tt[on][6])Or===-1&&(Or=kr);else if(Or>-1){for(vr=Or;vr<kr;vr++)vt[vr]=Rr;Or=-1}Lt[kr]==="B"&&(vt[kr]=0),Rt.hiLevel|=Rr}re&&(function(Wt,Xt,fr){for(var Lr=0;Lr<fr;Lr++)if(Wt[Lr]==="S"){Xt[Lr]=qt;for(var Nr=Lr-1;Nr>=0&&Wt[Nr]==="WS";Nr--)Xt[Nr]=qt}})(Lt,vt,pn)},Mt=function(lt,vt,Rt,Dt,vr){if(!(vr.hiLevel<lt)){if(lt===1&&qt===1&&!Z)return vt.reverse(),void(Rt&&Rt.reverse());for(var kr,Rr,ur,Or,pn=vt.length,on=0;on<pn;){if(Dt[on]>=lt){for(ur=on+1;ur<pn&&Dt[ur]>=lt;)ur++;for(Or=on,Rr=ur-1;Or<Rr;Or++,Rr--)kr=vt[Or],vt[Or]=vt[Rr],vt[Rr]=kr,Rt&&(kr=Rt[Or],Rt[Or]=Rt[Rr],Rt[Rr]=kr);on=ur}on++}}},_r=function(lt,vt,Rt){var Dt=lt.split(""),vr={hiLevel:qt};return Rt||(Rt=[]),or(Dt,Rt,vr),(function(kr,Rr,ur){if(ur.hiLevel!==0&&Ve)for(var Or,pn=0;pn<kr.length;pn++)Rr[pn]===1&&(Or=Nt.indexOf(kr[pn]))>=0&&(kr[pn]=Nt[Or+1])})(Dt,Rt,vr),Mt(2,Dt,vt,Rt,vr),Mt(1,Dt,vt,Rt,vr),Dt.join("")};return this.__bidiEngine__.doBidiReorder=function(lt,vt,Rt){if((function(vr,kr){if(kr)for(var Rr=0;Rr<vr.length;Rr++)kr[Rr]=Rr;fe===void 0&&(fe=nt(vr)),Le===void 0&&(Le=nt(vr))})(lt,vt),ye||!Ae||Le)if(ye&&Ae&&fe^Le)qt=fe?1:0,lt=Tr(lt,vt,Rt);else if(!ye&&Ae&&Le)qt=fe?1:0,lt=_r(lt,vt,Rt),lt=Tr(lt,vt);else if(!ye||fe||Ae||Le){if(ye&&!Ae&&fe^Le)lt=Tr(lt,vt),fe?(qt=0,lt=_r(lt,vt,Rt)):(qt=1,lt=_r(lt,vt,Rt),lt=Tr(lt,vt));else if(ye&&fe&&!Ae&&Le)qt=1,lt=_r(lt,vt,Rt),lt=Tr(lt,vt);else if(!ye&&!Ae&&fe^Le){var Dt=Ve;fe?(qt=1,lt=_r(lt,vt,Rt),qt=0,Ve=!1,lt=_r(lt,vt,Rt),Ve=Dt):(qt=0,lt=_r(lt,vt,Rt),lt=Tr(lt,vt),qt=1,Ve=!1,lt=_r(lt,vt,Rt),Ve=Dt,lt=Tr(lt,vt))}}else qt=0,lt=_r(lt,vt,Rt);else qt=fe?1:0,lt=_r(lt,vt,Rt);return lt},this.__bidiEngine__.setOptions=function(lt){lt&&(ye=lt.isInputVisual,Ae=lt.isOutputVisual,fe=lt.isInputRtl,Le=lt.isOutputRtl,Ve=lt.isSymmetricSwapping)},this.__bidiEngine__.setOptions(W),this.__bidiEngine__};var k=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],M=new P.__bidiEngine__({isInputVisual:!0});P.API.events.push(["postProcessText",function(W){var Z=W.text;W.x,W.y;var re=W.options||{};W.mutex,re.lang;var ye=[];if(re.isInputVisual=typeof re.isInputVisual!="boolean"||re.isInputVisual,M.setOptions(re),Object.prototype.toString.call(Z)==="[object Array]"){var fe=0;for(ye=[],fe=0;fe<Z.length;fe+=1)Object.prototype.toString.call(Z[fe])==="[object Array]"?ye.push([M.doBidiReorder(Z[fe][0]),Z[fe][1],Z[fe][2]]):ye.push([M.doBidiReorder(Z[fe])]);W.text=ye}else W.text=M.doBidiReorder(Z);M.setOptions({isInputVisual:!0})}])})(et),et.API.TTFFont=(function(){function P(k){var M;if(this.rawData=k,M=this.contents=new Xs(k),this.contents.pos=4,M.readString(4)==="ttcf")throw new Error("TTCF not supported.");M.pos=0,this.parse(),this.subset=new ht(this),this.registerTTF()}return P.open=function(k){return new P(k)},P.prototype.parse=function(){return this.directory=new ms(this.contents),this.head=new Vs(this),this.name=new se(this),this.cmap=new vo(this),this.toUnicode={},this.hhea=new io(this),this.maxp=new ce(this),this.hmtx=new $(this),this.post=new Ht(this),this.os2=new Vo(this),this.loca=new Qe(this),this.glyf=new ie(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},P.prototype.registerTTF=function(){var k,M,W,Z,re;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var ye,fe,Ae,Le;for(Le=[],ye=0,fe=(Ae=this.bbox).length;ye<fe;ye++)k=Ae[ye],Le.push(Math.round(k*this.scaleFactor));return Le}).call(this),this.stemV=0,this.post.exists?(W=255&(Z=this.post.italic_angle),32768&(M=Z>>16)&&(M=-(1+(65535^M))),this.italicAngle=+(M+"."+W)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(re=this.familyClass)===1||re===2||re===3||re===4||re===5||re===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},P.prototype.characterToGlyph=function(k){var M;return((M=this.cmap.unicode)!=null?M.codeMap[k]:void 0)||0},P.prototype.widthOfGlyph=function(k){var M;return M=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(k).advance*M},P.prototype.widthOfString=function(k,M,W){var Z,re,ye,fe;for(ye=0,re=0,fe=(k=""+k).length;0<=fe?re<fe:re>fe;re=0<=fe?++re:--re)Z=k.charCodeAt(re),ye+=this.widthOfGlyph(this.characterToGlyph(Z))+W*(1e3/M)||0;return ye*(M/1e3)},P.prototype.lineHeight=function(k,M){var W;return M==null&&(M=!1),W=M?this.lineGap:0,(this.ascender+W-this.decender)/1e3*k},P})();var Ea,Xs=(function(){function P(k){this.data=k??[],this.pos=0,this.length=this.data.length}return P.prototype.readByte=function(){return this.data[this.pos++]},P.prototype.writeByte=function(k){return this.data[this.pos++]=k},P.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},P.prototype.writeUInt32=function(k){return this.writeByte(k>>>24&255),this.writeByte(k>>16&255),this.writeByte(k>>8&255),this.writeByte(255&k)},P.prototype.readInt32=function(){var k;return(k=this.readUInt32())>=2147483648?k-4294967296:k},P.prototype.writeInt32=function(k){return k<0&&(k+=4294967296),this.writeUInt32(k)},P.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},P.prototype.writeUInt16=function(k){return this.writeByte(k>>8&255),this.writeByte(255&k)},P.prototype.readInt16=function(){var k;return(k=this.readUInt16())>=32768?k-65536:k},P.prototype.writeInt16=function(k){return k<0&&(k+=65536),this.writeUInt16(k)},P.prototype.readString=function(k){var M,W;for(W=[],M=0;0<=k?M<k:M>k;M=0<=k?++M:--M)W[M]=String.fromCharCode(this.readByte());return W.join("")},P.prototype.writeString=function(k){var M,W,Z;for(Z=[],M=0,W=k.length;0<=W?M<W:M>W;M=0<=W?++M:--M)Z.push(this.writeByte(k.charCodeAt(M)));return Z},P.prototype.readShort=function(){return this.readInt16()},P.prototype.writeShort=function(k){return this.writeInt16(k)},P.prototype.readLongLong=function(){var k,M,W,Z,re,ye,fe,Ae;return k=this.readByte(),M=this.readByte(),W=this.readByte(),Z=this.readByte(),re=this.readByte(),ye=this.readByte(),fe=this.readByte(),Ae=this.readByte(),128&k?-1*(72057594037927940*(255^k)+281474976710656*(255^M)+1099511627776*(255^W)+4294967296*(255^Z)+16777216*(255^re)+65536*(255^ye)+256*(255^fe)+(255^Ae)+1):72057594037927940*k+281474976710656*M+1099511627776*W+4294967296*Z+16777216*re+65536*ye+256*fe+Ae},P.prototype.writeLongLong=function(k){var M,W;return M=Math.floor(k/4294967296),W=4294967295&k,this.writeByte(M>>24&255),this.writeByte(M>>16&255),this.writeByte(M>>8&255),this.writeByte(255&M),this.writeByte(W>>24&255),this.writeByte(W>>16&255),this.writeByte(W>>8&255),this.writeByte(255&W)},P.prototype.readInt=function(){return this.readInt32()},P.prototype.writeInt=function(k){return this.writeInt32(k)},P.prototype.read=function(k){var M,W;for(M=[],W=0;0<=k?W<k:W>k;W=0<=k?++W:--W)M.push(this.readByte());return M},P.prototype.write=function(k){var M,W,Z,re;for(re=[],W=0,Z=k.length;W<Z;W++)M=k[W],re.push(this.writeByte(M));return re},P})(),ms=(function(){var P;function k(M){var W,Z,re;for(this.scalarType=M.readInt(),this.tableCount=M.readShort(),this.searchRange=M.readShort(),this.entrySelector=M.readShort(),this.rangeShift=M.readShort(),this.tables={},Z=0,re=this.tableCount;0<=re?Z<re:Z>re;Z=0<=re?++Z:--Z)W={tag:M.readString(4),checksum:M.readInt(),offset:M.readInt(),length:M.readInt()},this.tables[W.tag]=W}return k.prototype.encode=function(M){var W,Z,re,ye,fe,Ae,Le,Ve,Ze,dt,je,St,ct;for(ct in je=Object.keys(M).length,Ae=Math.log(2),Ze=16*Math.floor(Math.log(je)/Ae),ye=Math.floor(Ze/Ae),Ve=16*je-Ze,(Z=new Xs).writeInt(this.scalarType),Z.writeShort(je),Z.writeShort(Ze),Z.writeShort(ye),Z.writeShort(Ve),re=16*je,Le=Z.pos+re,fe=null,St=[],M)for(dt=M[ct],Z.writeString(ct),Z.writeInt(P(dt)),Z.writeInt(Le),Z.writeInt(dt.length),St=St.concat(dt),ct==="head"&&(fe=Le),Le+=dt.length;Le%4;)St.push(0),Le++;return Z.write(St),W=2981146554-P(Z.data),Z.pos=fe+8,Z.writeUInt32(W),Z.data},P=function(M){var W,Z,re,ye;for(M=K.call(M);M.length%4;)M.push(0);for(re=new Xs(M),Z=0,W=0,ye=M.length;W<ye;W=W+=4)Z+=re.readUInt32();return 4294967295&Z},k})(),jo={}.hasOwnProperty,Ka=function(P,k){for(var M in k)jo.call(k,M)&&(P[M]=k[M]);function W(){this.constructor=P}return W.prototype=k.prototype,P.prototype=new W,P.__super__=k.prototype,P};Ea=(function(){function P(k){var M;this.file=k,M=this.file.directory.tables[this.tag],this.exists=!!M,M&&(this.offset=M.offset,this.length=M.length,this.parse(this.file.contents))}return P.prototype.parse=function(){},P.prototype.encode=function(){},P.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},P})();var Vs=(function(){function P(){return P.__super__.constructor.apply(this,arguments)}return Ka(P,Ea),P.prototype.tag="head",P.prototype.parse=function(k){return k.pos=this.offset,this.version=k.readInt(),this.revision=k.readInt(),this.checkSumAdjustment=k.readInt(),this.magicNumber=k.readInt(),this.flags=k.readShort(),this.unitsPerEm=k.readShort(),this.created=k.readLongLong(),this.modified=k.readLongLong(),this.xMin=k.readShort(),this.yMin=k.readShort(),this.xMax=k.readShort(),this.yMax=k.readShort(),this.macStyle=k.readShort(),this.lowestRecPPEM=k.readShort(),this.fontDirectionHint=k.readShort(),this.indexToLocFormat=k.readShort(),this.glyphDataFormat=k.readShort()},P.prototype.encode=function(k){var M;return(M=new Xs).writeInt(this.version),M.writeInt(this.revision),M.writeInt(this.checkSumAdjustment),M.writeInt(this.magicNumber),M.writeShort(this.flags),M.writeShort(this.unitsPerEm),M.writeLongLong(this.created),M.writeLongLong(this.modified),M.writeShort(this.xMin),M.writeShort(this.yMin),M.writeShort(this.xMax),M.writeShort(this.yMax),M.writeShort(this.macStyle),M.writeShort(this.lowestRecPPEM),M.writeShort(this.fontDirectionHint),M.writeShort(k),M.writeShort(this.glyphDataFormat),M.data},P})(),Xa=(function(){function P(k,M){var W,Z,re,ye,fe,Ae,Le,Ve,Ze,dt,je,St,ct,Nt,it,Ot,qt;switch(this.platformID=k.readUInt16(),this.encodingID=k.readShort(),this.offset=M+k.readInt(),Ze=k.pos,k.pos=this.offset,this.format=k.readUInt16(),this.length=k.readUInt16(),this.language=k.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(Ae=0;Ae<256;++Ae)this.codeMap[Ae]=k.readByte();break;case 4:for(je=k.readUInt16(),dt=je/2,k.pos+=6,re=(function(){var It,nt;for(nt=[],Ae=It=0;0<=dt?It<dt:It>dt;Ae=0<=dt?++It:--It)nt.push(k.readUInt16());return nt})(),k.pos+=2,ct=(function(){var It,nt;for(nt=[],Ae=It=0;0<=dt?It<dt:It>dt;Ae=0<=dt?++It:--It)nt.push(k.readUInt16());return nt})(),Le=(function(){var It,nt;for(nt=[],Ae=It=0;0<=dt?It<dt:It>dt;Ae=0<=dt?++It:--It)nt.push(k.readUInt16());return nt})(),Ve=(function(){var It,nt;for(nt=[],Ae=It=0;0<=dt?It<dt:It>dt;Ae=0<=dt?++It:--It)nt.push(k.readUInt16());return nt})(),Z=(this.length-k.pos+this.offset)/2,fe=(function(){var It,nt;for(nt=[],Ae=It=0;0<=Z?It<Z:It>Z;Ae=0<=Z?++It:--It)nt.push(k.readUInt16());return nt})(),Ae=it=0,qt=re.length;it<qt;Ae=++it)for(Nt=re[Ae],W=Ot=St=ct[Ae];St<=Nt?Ot<=Nt:Ot>=Nt;W=St<=Nt?++Ot:--Ot)Ve[Ae]===0?ye=W+Le[Ae]:(ye=fe[Ve[Ae]/2+(W-St)-(dt-Ae)]||0)!==0&&(ye+=Le[Ae]),this.codeMap[W]=65535&ye}k.pos=Ze}return P.encode=function(k,M){var W,Z,re,ye,fe,Ae,Le,Ve,Ze,dt,je,St,ct,Nt,it,Ot,qt,It,nt,Vt,Tr,or,Mt,_r,lt,vt,Rt,Dt,vr,kr,Rr,ur,Or,pn,on,Ye,Tt,Lt,Wt,Xt,fr,Lr,Nr,Zr,An,Sn;switch(Dt=new Xs,ye=Object.keys(k).sort(function(Fn,xi){return Fn-xi}),M){case"macroman":for(ct=0,Nt=(function(){var Fn=[];for(St=0;St<256;++St)Fn.push(0);return Fn})(),Ot={0:0},re={},vr=0,Or=ye.length;vr<Or;vr++)Ot[Nr=k[Z=ye[vr]]]==null&&(Ot[Nr]=++ct),re[Z]={old:k[Z],new:Ot[k[Z]]},Nt[Z]=Ot[k[Z]];return Dt.writeUInt16(1),Dt.writeUInt16(0),Dt.writeUInt32(12),Dt.writeUInt16(0),Dt.writeUInt16(262),Dt.writeUInt16(0),Dt.write(Nt),{charMap:re,subtable:Dt.data,maxGlyphID:ct+1};case"unicode":for(vt=[],Ze=[],qt=0,Ot={},W={},it=Le=null,kr=0,pn=ye.length;kr<pn;kr++)Ot[nt=k[Z=ye[kr]]]==null&&(Ot[nt]=++qt),W[Z]={old:nt,new:Ot[nt]},fe=Ot[nt]-Z,it!=null&&fe===Le||(it&&Ze.push(it),vt.push(Z),Le=fe),it=Z;for(it&&Ze.push(it),Ze.push(65535),vt.push(65535),_r=2*(Mt=vt.length),or=2*Math.pow(Math.log(Mt)/Math.LN2,2),dt=Math.log(or/2)/Math.LN2,Tr=2*Mt-or,Ae=[],Vt=[],je=[],St=Rr=0,on=vt.length;Rr<on;St=++Rr){if(lt=vt[St],Ve=Ze[St],lt===65535){Ae.push(0),Vt.push(0);break}if(lt-(Rt=W[lt].new)>=32768)for(Ae.push(0),Vt.push(2*(je.length+Mt-St)),Z=ur=lt;lt<=Ve?ur<=Ve:ur>=Ve;Z=lt<=Ve?++ur:--ur)je.push(W[Z].new);else Ae.push(Rt-lt),Vt.push(0)}for(Dt.writeUInt16(3),Dt.writeUInt16(1),Dt.writeUInt32(12),Dt.writeUInt16(4),Dt.writeUInt16(16+8*Mt+2*je.length),Dt.writeUInt16(0),Dt.writeUInt16(_r),Dt.writeUInt16(or),Dt.writeUInt16(dt),Dt.writeUInt16(Tr),fr=0,Ye=Ze.length;fr<Ye;fr++)Z=Ze[fr],Dt.writeUInt16(Z);for(Dt.writeUInt16(0),Lr=0,Tt=vt.length;Lr<Tt;Lr++)Z=vt[Lr],Dt.writeUInt16(Z);for(Zr=0,Lt=Ae.length;Zr<Lt;Zr++)fe=Ae[Zr],Dt.writeUInt16(fe);for(An=0,Wt=Vt.length;An<Wt;An++)It=Vt[An],Dt.writeUInt16(It);for(Sn=0,Xt=je.length;Sn<Xt;Sn++)ct=je[Sn],Dt.writeUInt16(ct);return{charMap:W,subtable:Dt.data,maxGlyphID:qt+1}}},P})(),vo=(function(){function P(){return P.__super__.constructor.apply(this,arguments)}return Ka(P,Ea),P.prototype.tag="cmap",P.prototype.parse=function(k){var M,W,Z;for(k.pos=this.offset,this.version=k.readUInt16(),Z=k.readUInt16(),this.tables=[],this.unicode=null,W=0;0<=Z?W<Z:W>Z;W=0<=Z?++W:--W)M=new Xa(k,this.offset),this.tables.push(M),M.isUnicode&&this.unicode==null&&(this.unicode=M);return!0},P.encode=function(k,M){var W,Z;return M==null&&(M="macroman"),W=Xa.encode(k,M),(Z=new Xs).writeUInt16(0),Z.writeUInt16(1),W.table=Z.data.concat(W.subtable),W},P})(),io=(function(){function P(){return P.__super__.constructor.apply(this,arguments)}return Ka(P,Ea),P.prototype.tag="hhea",P.prototype.parse=function(k){return k.pos=this.offset,this.version=k.readInt(),this.ascender=k.readShort(),this.decender=k.readShort(),this.lineGap=k.readShort(),this.advanceWidthMax=k.readShort(),this.minLeftSideBearing=k.readShort(),this.minRightSideBearing=k.readShort(),this.xMaxExtent=k.readShort(),this.caretSlopeRise=k.readShort(),this.caretSlopeRun=k.readShort(),this.caretOffset=k.readShort(),k.pos+=8,this.metricDataFormat=k.readShort(),this.numberOfMetrics=k.readUInt16()},P})(),Vo=(function(){function P(){return P.__super__.constructor.apply(this,arguments)}return Ka(P,Ea),P.prototype.tag="OS/2",P.prototype.parse=function(k){if(k.pos=this.offset,this.version=k.readUInt16(),this.averageCharWidth=k.readShort(),this.weightClass=k.readUInt16(),this.widthClass=k.readUInt16(),this.type=k.readShort(),this.ySubscriptXSize=k.readShort(),this.ySubscriptYSize=k.readShort(),this.ySubscriptXOffset=k.readShort(),this.ySubscriptYOffset=k.readShort(),this.ySuperscriptXSize=k.readShort(),this.ySuperscriptYSize=k.readShort(),this.ySuperscriptXOffset=k.readShort(),this.ySuperscriptYOffset=k.readShort(),this.yStrikeoutSize=k.readShort(),this.yStrikeoutPosition=k.readShort(),this.familyClass=k.readShort(),this.panose=(function(){var M,W;for(W=[],M=0;M<10;++M)W.push(k.readByte());return W})(),this.charRange=(function(){var M,W;for(W=[],M=0;M<4;++M)W.push(k.readInt());return W})(),this.vendorID=k.readString(4),this.selection=k.readShort(),this.firstCharIndex=k.readShort(),this.lastCharIndex=k.readShort(),this.version>0&&(this.ascent=k.readShort(),this.descent=k.readShort(),this.lineGap=k.readShort(),this.winAscent=k.readShort(),this.winDescent=k.readShort(),this.codePageRange=(function(){var M,W;for(W=[],M=0;M<2;M=++M)W.push(k.readInt());return W})(),this.version>1))return this.xHeight=k.readShort(),this.capHeight=k.readShort(),this.defaultChar=k.readShort(),this.breakChar=k.readShort(),this.maxContext=k.readShort()},P})(),Ht=(function(){function P(){return P.__super__.constructor.apply(this,arguments)}return Ka(P,Ea),P.prototype.tag="post",P.prototype.parse=function(k){var M,W,Z;switch(k.pos=this.offset,this.format=k.readInt(),this.italicAngle=k.readInt(),this.underlinePosition=k.readShort(),this.underlineThickness=k.readShort(),this.isFixedPitch=k.readInt(),this.minMemType42=k.readInt(),this.maxMemType42=k.readInt(),this.minMemType1=k.readInt(),this.maxMemType1=k.readInt(),this.format){case 65536:case 196608:break;case 131072:var re;for(W=k.readUInt16(),this.glyphNameIndex=[],re=0;0<=W?re<W:re>W;re=0<=W?++re:--re)this.glyphNameIndex.push(k.readUInt16());for(this.names=[],Z=[];k.pos<this.offset+this.length;)M=k.readByte(),Z.push(this.names.push(k.readString(M)));return Z;case 151552:return W=k.readUInt16(),this.offsets=k.read(W);case 262144:return this.map=(function(){var ye,fe,Ae;for(Ae=[],re=ye=0,fe=this.file.maxp.numGlyphs;0<=fe?ye<fe:ye>fe;re=0<=fe?++ye:--ye)Ae.push(k.readUInt32());return Ae}).call(this)}},P})(),V=function(P,k){this.raw=P,this.length=P.length,this.platformID=k.platformID,this.encodingID=k.encodingID,this.languageID=k.languageID},se=(function(){function P(){return P.__super__.constructor.apply(this,arguments)}return Ka(P,Ea),P.prototype.tag="name",P.prototype.parse=function(k){var M,W,Z,re,ye,fe,Ae,Le,Ve,Ze,dt;for(k.pos=this.offset,k.readShort(),M=k.readShort(),fe=k.readShort(),W=[],re=0;0<=M?re<M:re>M;re=0<=M?++re:--re)W.push({platformID:k.readShort(),encodingID:k.readShort(),languageID:k.readShort(),nameID:k.readShort(),length:k.readShort(),offset:this.offset+fe+k.readShort()});for(Ae={},re=Ve=0,Ze=W.length;Ve<Ze;re=++Ve)Z=W[re],k.pos=Z.offset,Le=k.readString(Z.length),ye=new V(Le,Z),Ae[dt=Z.nameID]==null&&(Ae[dt]=[]),Ae[Z.nameID].push(ye);this.strings=Ae,this.copyright=Ae[0],this.fontFamily=Ae[1],this.fontSubfamily=Ae[2],this.uniqueSubfamily=Ae[3],this.fontName=Ae[4],this.version=Ae[5];try{this.postscriptName=Ae[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=Ae[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=Ae[7],this.manufacturer=Ae[8],this.designer=Ae[9],this.description=Ae[10],this.vendorUrl=Ae[11],this.designerUrl=Ae[12],this.license=Ae[13],this.licenseUrl=Ae[14],this.preferredFamily=Ae[15],this.preferredSubfamily=Ae[17],this.compatibleFull=Ae[18],this.sampleText=Ae[19]},P})(),ce=(function(){function P(){return P.__super__.constructor.apply(this,arguments)}return Ka(P,Ea),P.prototype.tag="maxp",P.prototype.parse=function(k){return k.pos=this.offset,this.version=k.readInt(),this.numGlyphs=k.readUInt16(),this.maxPoints=k.readUInt16(),this.maxContours=k.readUInt16(),this.maxCompositePoints=k.readUInt16(),this.maxComponentContours=k.readUInt16(),this.maxZones=k.readUInt16(),this.maxTwilightPoints=k.readUInt16(),this.maxStorage=k.readUInt16(),this.maxFunctionDefs=k.readUInt16(),this.maxInstructionDefs=k.readUInt16(),this.maxStackElements=k.readUInt16(),this.maxSizeOfInstructions=k.readUInt16(),this.maxComponentElements=k.readUInt16(),this.maxComponentDepth=k.readUInt16()},P})(),$=(function(){function P(){return P.__super__.constructor.apply(this,arguments)}return Ka(P,Ea),P.prototype.tag="hmtx",P.prototype.parse=function(k){var M,W,Z,re,ye,fe,Ae;for(k.pos=this.offset,this.metrics=[],M=0,fe=this.file.hhea.numberOfMetrics;0<=fe?M<fe:M>fe;M=0<=fe?++M:--M)this.metrics.push({advance:k.readUInt16(),lsb:k.readInt16()});for(Z=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var Le,Ve;for(Ve=[],M=Le=0;0<=Z?Le<Z:Le>Z;M=0<=Z?++Le:--Le)Ve.push(k.readInt16());return Ve})(),this.widths=(function(){var Le,Ve,Ze,dt;for(dt=[],Le=0,Ve=(Ze=this.metrics).length;Le<Ve;Le++)re=Ze[Le],dt.push(re.advance);return dt}).call(this),W=this.widths[this.widths.length-1],Ae=[],M=ye=0;0<=Z?ye<Z:ye>Z;M=0<=Z?++ye:--ye)Ae.push(this.widths.push(W));return Ae},P.prototype.forGlyph=function(k){return k in this.metrics?this.metrics[k]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[k-this.metrics.length]}},P})(),K=[].slice,ie=(function(){function P(){return P.__super__.constructor.apply(this,arguments)}return Ka(P,Ea),P.prototype.tag="glyf",P.prototype.parse=function(){return this.cache={}},P.prototype.glyphFor=function(k){var M,W,Z,re,ye,fe,Ae,Le,Ve,Ze;return k in this.cache?this.cache[k]:(re=this.file.loca,M=this.file.contents,W=re.indexOf(k),(Z=re.lengthOf(k))===0?this.cache[k]=null:(M.pos=this.offset+W,ye=(fe=new Xs(M.read(Z))).readShort(),Le=fe.readShort(),Ze=fe.readShort(),Ae=fe.readShort(),Ve=fe.readShort(),this.cache[k]=ye===-1?new Se(fe,Le,Ze,Ae,Ve):new me(fe,ye,Le,Ze,Ae,Ve),this.cache[k]))},P.prototype.encode=function(k,M,W){var Z,re,ye,fe,Ae;for(ye=[],re=[],fe=0,Ae=M.length;fe<Ae;fe++)Z=k[M[fe]],re.push(ye.length),Z&&(ye=ye.concat(Z.encode(W)));return re.push(ye.length),{table:ye,offsets:re}},P})(),me=(function(){function P(k,M,W,Z,re,ye){this.raw=k,this.numberOfContours=M,this.xMin=W,this.yMin=Z,this.xMax=re,this.yMax=ye,this.compound=!1}return P.prototype.encode=function(){return this.raw.data},P})(),Se=(function(){function P(k,M,W,Z,re){var ye,fe;for(this.raw=k,this.xMin=M,this.yMin=W,this.xMax=Z,this.yMax=re,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],ye=this.raw;fe=ye.readShort(),this.glyphOffsets.push(ye.pos),this.glyphIDs.push(ye.readUInt16()),32&fe;)ye.pos+=1&fe?4:2,128&fe?ye.pos+=8:64&fe?ye.pos+=4:8&fe&&(ye.pos+=2)}return P.prototype.encode=function(){var k,M,W;for(M=new Xs(K.call(this.raw.data)),k=0,W=this.glyphIDs.length;k<W;++k)M.pos=this.glyphOffsets[k];return M.data},P})(),Qe=(function(){function P(){return P.__super__.constructor.apply(this,arguments)}return Ka(P,Ea),P.prototype.tag="loca",P.prototype.parse=function(k){var M,W;return k.pos=this.offset,M=this.file.head.indexToLocFormat,this.offsets=M===0?(function(){var Z,re;for(re=[],W=0,Z=this.length;W<Z;W+=2)re.push(2*k.readUInt16());return re}).call(this):(function(){var Z,re;for(re=[],W=0,Z=this.length;W<Z;W+=4)re.push(k.readUInt32());return re}).call(this)},P.prototype.indexOf=function(k){return this.offsets[k]},P.prototype.lengthOf=function(k){return this.offsets[k+1]-this.offsets[k]},P.prototype.encode=function(k,M){for(var W=new Uint32Array(this.offsets.length),Z=0,re=0,ye=0;ye<W.length;++ye)if(W[ye]=Z,re<M.length&&M[re]==ye){++re,W[ye]=Z;var fe=this.offsets[ye],Ae=this.offsets[ye+1]-fe;Ae>0&&(Z+=Ae)}for(var Le=new Array(4*W.length),Ve=0;Ve<W.length;++Ve)Le[4*Ve+3]=255&W[Ve],Le[4*Ve+2]=(65280&W[Ve])>>8,Le[4*Ve+1]=(16711680&W[Ve])>>16,Le[4*Ve]=(4278190080&W[Ve])>>24;return Le},P})(),ht=(function(){function P(k){this.font=k,this.subset={},this.unicodes={},this.next=33}return P.prototype.generateCmap=function(){var k,M,W,Z,re;for(M in Z=this.font.cmap.tables[0].codeMap,k={},re=this.subset)W=re[M],k[M]=Z[W];return k},P.prototype.glyphsFor=function(k){var M,W,Z,re,ye,fe,Ae;for(Z={},ye=0,fe=k.length;ye<fe;ye++)Z[re=k[ye]]=this.font.glyf.glyphFor(re);for(re in M=[],Z)(W=Z[re])!=null&&W.compound&&M.push.apply(M,W.glyphIDs);if(M.length>0)for(re in Ae=this.glyphsFor(M))W=Ae[re],Z[re]=W;return Z},P.prototype.encode=function(k,M){var W,Z,re,ye,fe,Ae,Le,Ve,Ze,dt,je,St,ct,Nt,it;for(Z in W=vo.encode(this.generateCmap(),"unicode"),ye=this.glyphsFor(k),je={0:0},it=W.charMap)je[(Ae=it[Z]).old]=Ae.new;for(St in dt=W.maxGlyphID,ye)St in je||(je[St]=dt++);return Ve=(function(Ot){var qt,It;for(qt in It={},Ot)It[Ot[qt]]=qt;return It})(je),Ze=Object.keys(Ve).sort(function(Ot,qt){return Ot-qt}),ct=(function(){var Ot,qt,It;for(It=[],Ot=0,qt=Ze.length;Ot<qt;Ot++)fe=Ze[Ot],It.push(Ve[fe]);return It})(),re=this.font.glyf.encode(ye,ct,je),Le=this.font.loca.encode(re.offsets,ct),Nt={cmap:this.font.cmap.raw(),glyf:re.table,loca:Le,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(M)},this.font.os2.exists&&(Nt["OS/2"]=this.font.os2.raw()),this.font.directory.encode(Nt)},P})();et.API.PDFObject=(function(){var P;function k(){}return P=function(M,W){return(Array(W+1).join("0")+M).slice(-W)},k.convert=function(M){var W,Z,re,ye;if(Array.isArray(M))return"["+(function(){var fe,Ae,Le;for(Le=[],fe=0,Ae=M.length;fe<Ae;fe++)W=M[fe],Le.push(k.convert(W));return Le})().join(" ")+"]";if(typeof M=="string")return"/"+M;if(M?.isString)return"("+M+")";if(M instanceof Date)return"(D:"+P(M.getUTCFullYear(),4)+P(M.getUTCMonth(),2)+P(M.getUTCDate(),2)+P(M.getUTCHours(),2)+P(M.getUTCMinutes(),2)+P(M.getUTCSeconds(),2)+"Z)";if({}.toString.call(M)==="[object Object]"){for(Z in re=["<<"],M)ye=M[Z],re.push("/"+Z+" "+k.convert(ye));return re.push(">>"),re.join(`
`)}return""+M},k})()}),"./node_modules/pako/dist/pako.esm.mjs":(function(c,u,l){l.r(u),l.d(u,{Deflate:function(){return nn},Inflate:function(){return os},constants:function(){return ka},default:function(){return Wo},deflate:function(){return ti},deflateRaw:function(){return ri},gzip:function(){return Yi},inflate:function(){return na},inflateRaw:function(){return Fa},ungzip:function(){return Oo}});const d=4,f=0,m=1,p=2;function g(O){let Oe=O.length;for(;--Oe>=0;)O[Oe]=0}const y=0,x=1,w=2,_=3,E=258,N=29,C=256,I=C+1+N,D=30,U=19,G=2*I+1,q=15,J=16,de=7,xe=256,we=16,ve=17,ne=18,ae=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),oe=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Ie=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),Ce=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),be=512,ue=new Array((I+2)*2);g(ue);const Pe=new Array(D*2);g(Pe);const Re=new Array(be);g(Re);const He=new Array(E-_+1);g(He);const Fe=new Array(N);g(Fe);const ft=new Array(D);g(ft);function at(O,Oe,te,qe,Et){this.static_tree=O,this.extra_bits=Oe,this.extra_base=te,this.elems=qe,this.max_length=Et,this.has_stree=O&&O.length}let De,ut,et;function Ue(O,Oe){this.dyn_tree=O,this.max_code=0,this.stat_desc=Oe}const jt=O=>O<256?Re[O]:Re[256+(O>>>7)],rt=(O,Oe)=>{O.pending_buf[O.pending++]=Oe&255,O.pending_buf[O.pending++]=Oe>>>8&255},Ct=(O,Oe,te)=>{O.bi_valid>J-te?(O.bi_buf|=Oe<<O.bi_valid&65535,rt(O,O.bi_buf),O.bi_buf=Oe>>J-O.bi_valid,O.bi_valid+=te-J):(O.bi_buf|=Oe<<O.bi_valid&65535,O.bi_valid+=te)},ke=(O,Oe,te)=>{Ct(O,te[Oe*2],te[Oe*2+1])},Xe=(O,Oe)=>{let te=0;do te|=O&1,O>>>=1,te<<=1;while(--Oe>0);return te>>>1},mt=O=>{O.bi_valid===16?(rt(O,O.bi_buf),O.bi_buf=0,O.bi_valid=0):O.bi_valid>=8&&(O.pending_buf[O.pending++]=O.bi_buf&255,O.bi_buf>>=8,O.bi_valid-=8)},Jt=(O,Oe)=>{const te=Oe.dyn_tree,qe=Oe.max_code,Et=Oe.stat_desc.static_tree,_t=Oe.stat_desc.has_stree,yr=Oe.stat_desc.extra_bits,Kt=Oe.stat_desc.extra_base,Un=Oe.stat_desc.max_length;let Ft,xr,qi,Ln,an,Mr,Ua=0;for(Ln=0;Ln<=q;Ln++)O.bl_count[Ln]=0;for(te[O.heap[O.heap_max]*2+1]=0,Ft=O.heap_max+1;Ft<G;Ft++)xr=O.heap[Ft],Ln=te[te[xr*2+1]*2+1]+1,Ln>Un&&(Ln=Un,Ua++),te[xr*2+1]=Ln,!(xr>qe)&&(O.bl_count[Ln]++,an=0,xr>=Kt&&(an=yr[xr-Kt]),Mr=te[xr*2],O.opt_len+=Mr*(Ln+an),_t&&(O.static_len+=Mr*(Et[xr*2+1]+an)));if(Ua!==0){do{for(Ln=Un-1;O.bl_count[Ln]===0;)Ln--;O.bl_count[Ln]--,O.bl_count[Ln+1]+=2,O.bl_count[Un]--,Ua-=2}while(Ua>0);for(Ln=Un;Ln!==0;Ln--)for(xr=O.bl_count[Ln];xr!==0;)qi=O.heap[--Ft],!(qi>qe)&&(te[qi*2+1]!==Ln&&(O.opt_len+=(Ln-te[qi*2+1])*te[qi*2],te[qi*2+1]=Ln),xr--)}},tr=(O,Oe,te)=>{const qe=new Array(q+1);let Et=0,_t,yr;for(_t=1;_t<=q;_t++)Et=Et+te[_t-1]<<1,qe[_t]=Et;for(yr=0;yr<=Oe;yr++){let Kt=O[yr*2+1];Kt!==0&&(O[yr*2]=Xe(qe[Kt]++,Kt))}},lr=()=>{let O,Oe,te,qe,Et;const _t=new Array(q+1);for(te=0,qe=0;qe<N-1;qe++)for(Fe[qe]=te,O=0;O<1<<ae[qe];O++)He[te++]=qe;for(He[te-1]=qe,Et=0,qe=0;qe<16;qe++)for(ft[qe]=Et,O=0;O<1<<oe[qe];O++)Re[Et++]=qe;for(Et>>=7;qe<D;qe++)for(ft[qe]=Et<<7,O=0;O<1<<oe[qe]-7;O++)Re[256+Et++]=qe;for(Oe=0;Oe<=q;Oe++)_t[Oe]=0;for(O=0;O<=143;)ue[O*2+1]=8,O++,_t[8]++;for(;O<=255;)ue[O*2+1]=9,O++,_t[9]++;for(;O<=279;)ue[O*2+1]=7,O++,_t[7]++;for(;O<=287;)ue[O*2+1]=8,O++,_t[8]++;for(tr(ue,I+1,_t),O=0;O<D;O++)Pe[O*2+1]=5,Pe[O*2]=Xe(O,5);De=new at(ue,ae,C+1,I,q),ut=new at(Pe,oe,0,D,q),et=new at(new Array(0),Ie,0,U,de)},Pr=O=>{let Oe;for(Oe=0;Oe<I;Oe++)O.dyn_ltree[Oe*2]=0;for(Oe=0;Oe<D;Oe++)O.dyn_dtree[Oe*2]=0;for(Oe=0;Oe<U;Oe++)O.bl_tree[Oe*2]=0;O.dyn_ltree[xe*2]=1,O.opt_len=O.static_len=0,O.sym_next=O.matches=0},tn=O=>{O.bi_valid>8?rt(O,O.bi_buf):O.bi_valid>0&&(O.pending_buf[O.pending++]=O.bi_buf),O.bi_buf=0,O.bi_valid=0},Gr=(O,Oe,te,qe)=>{const Et=Oe*2,_t=te*2;return O[Et]<O[_t]||O[Et]===O[_t]&&qe[Oe]<=qe[te]},Xr=(O,Oe,te)=>{const qe=O.heap[te];let Et=te<<1;for(;Et<=O.heap_len&&(Et<O.heap_len&&Gr(Oe,O.heap[Et+1],O.heap[Et],O.depth)&&Et++,!Gr(Oe,qe,O.heap[Et],O.depth));)O.heap[te]=O.heap[Et],te=Et,Et<<=1;O.heap[te]=qe},Qr=(O,Oe,te)=>{let qe,Et,_t=0,yr,Kt;if(O.sym_next!==0)do qe=O.pending_buf[O.sym_buf+_t++]&255,qe+=(O.pending_buf[O.sym_buf+_t++]&255)<<8,Et=O.pending_buf[O.sym_buf+_t++],qe===0?ke(O,Et,Oe):(yr=He[Et],ke(O,yr+C+1,Oe),Kt=ae[yr],Kt!==0&&(Et-=Fe[yr],Ct(O,Et,Kt)),qe--,yr=jt(qe),ke(O,yr,te),Kt=oe[yr],Kt!==0&&(qe-=ft[yr],Ct(O,qe,Kt)));while(_t<O.sym_next);ke(O,xe,Oe)},Pn=(O,Oe)=>{const te=Oe.dyn_tree,qe=Oe.stat_desc.static_tree,Et=Oe.stat_desc.has_stree,_t=Oe.stat_desc.elems;let yr,Kt,Un=-1,Ft;for(O.heap_len=0,O.heap_max=G,yr=0;yr<_t;yr++)te[yr*2]!==0?(O.heap[++O.heap_len]=Un=yr,O.depth[yr]=0):te[yr*2+1]=0;for(;O.heap_len<2;)Ft=O.heap[++O.heap_len]=Un<2?++Un:0,te[Ft*2]=1,O.depth[Ft]=0,O.opt_len--,Et&&(O.static_len-=qe[Ft*2+1]);for(Oe.max_code=Un,yr=O.heap_len>>1;yr>=1;yr--)Xr(O,te,yr);Ft=_t;do yr=O.heap[1],O.heap[1]=O.heap[O.heap_len--],Xr(O,te,1),Kt=O.heap[1],O.heap[--O.heap_max]=yr,O.heap[--O.heap_max]=Kt,te[Ft*2]=te[yr*2]+te[Kt*2],O.depth[Ft]=(O.depth[yr]>=O.depth[Kt]?O.depth[yr]:O.depth[Kt])+1,te[yr*2+1]=te[Kt*2+1]=Ft,O.heap[1]=Ft++,Xr(O,te,1);while(O.heap_len>=2);O.heap[--O.heap_max]=O.heap[1],Jt(O,Oe),tr(te,Un,O.bl_count)},wn=(O,Oe,te)=>{let qe,Et=-1,_t,yr=Oe[1],Kt=0,Un=7,Ft=4;for(yr===0&&(Un=138,Ft=3),Oe[(te+1)*2+1]=65535,qe=0;qe<=te;qe++)_t=yr,yr=Oe[(qe+1)*2+1],!(++Kt<Un&&_t===yr)&&(Kt<Ft?O.bl_tree[_t*2]+=Kt:_t!==0?(_t!==Et&&O.bl_tree[_t*2]++,O.bl_tree[we*2]++):Kt<=10?O.bl_tree[ve*2]++:O.bl_tree[ne*2]++,Kt=0,Et=_t,yr===0?(Un=138,Ft=3):_t===yr?(Un=6,Ft=3):(Un=7,Ft=4))},yi=(O,Oe,te)=>{let qe,Et=-1,_t,yr=Oe[1],Kt=0,Un=7,Ft=4;for(yr===0&&(Un=138,Ft=3),qe=0;qe<=te;qe++)if(_t=yr,yr=Oe[(qe+1)*2+1],!(++Kt<Un&&_t===yr)){if(Kt<Ft)do ke(O,_t,O.bl_tree);while(--Kt!==0);else _t!==0?(_t!==Et&&(ke(O,_t,O.bl_tree),Kt--),ke(O,we,O.bl_tree),Ct(O,Kt-3,2)):Kt<=10?(ke(O,ve,O.bl_tree),Ct(O,Kt-3,3)):(ke(O,ne,O.bl_tree),Ct(O,Kt-11,7));Kt=0,Et=_t,yr===0?(Un=138,Ft=3):_t===yr?(Un=6,Ft=3):(Un=7,Ft=4)}},ot=O=>{let Oe;for(wn(O,O.dyn_ltree,O.l_desc.max_code),wn(O,O.dyn_dtree,O.d_desc.max_code),Pn(O,O.bl_desc),Oe=U-1;Oe>=3&&O.bl_tree[Ce[Oe]*2+1]===0;Oe--);return O.opt_len+=3*(Oe+1)+5+5+4,Oe},Gt=(O,Oe,te,qe)=>{let Et;for(Ct(O,Oe-257,5),Ct(O,te-1,5),Ct(O,qe-4,4),Et=0;Et<qe;Et++)Ct(O,O.bl_tree[Ce[Et]*2+1],3);yi(O,O.dyn_ltree,Oe-1),yi(O,O.dyn_dtree,te-1)},Ir=O=>{let Oe=4093624447,te;for(te=0;te<=31;te++,Oe>>>=1)if(Oe&1&&O.dyn_ltree[te*2]!==0)return f;if(O.dyn_ltree[18]!==0||O.dyn_ltree[20]!==0||O.dyn_ltree[26]!==0)return m;for(te=32;te<C;te++)if(O.dyn_ltree[te*2]!==0)return m;return f};let ar=!1;const Qt=O=>{ar||(lr(),ar=!0),O.l_desc=new Ue(O.dyn_ltree,De),O.d_desc=new Ue(O.dyn_dtree,ut),O.bl_desc=new Ue(O.bl_tree,et),O.bi_buf=0,O.bi_valid=0,Pr(O)},gr=(O,Oe,te,qe)=>{Ct(O,(y<<1)+(qe?1:0),3),tn(O),rt(O,te),rt(O,~te),te&&O.pending_buf.set(O.window.subarray(Oe,Oe+te),O.pending),O.pending+=te},Yr=O=>{Ct(O,x<<1,3),ke(O,xe,ue),mt(O)},en=(O,Oe,te,qe)=>{let Et,_t,yr=0;O.level>0?(O.strm.data_type===p&&(O.strm.data_type=Ir(O)),Pn(O,O.l_desc),Pn(O,O.d_desc),yr=ot(O),Et=O.opt_len+3+7>>>3,_t=O.static_len+3+7>>>3,_t<=Et&&(Et=_t)):Et=_t=te+5,te+4<=Et&&Oe!==-1?gr(O,Oe,te,qe):O.strategy===d||_t===Et?(Ct(O,(x<<1)+(qe?1:0),3),Qr(O,ue,Pe)):(Ct(O,(w<<1)+(qe?1:0),3),Gt(O,O.l_desc.max_code+1,O.d_desc.max_code+1,yr+1),Qr(O,O.dyn_ltree,O.dyn_dtree)),Pr(O),qe&&tn(O)},On=(O,Oe,te)=>(O.pending_buf[O.sym_buf+O.sym_next++]=Oe,O.pending_buf[O.sym_buf+O.sym_next++]=Oe>>8,O.pending_buf[O.sym_buf+O.sym_next++]=te,Oe===0?O.dyn_ltree[te*2]++:(O.matches++,Oe--,O.dyn_ltree[(He[te]+C+1)*2]++,O.dyn_dtree[jt(Oe)*2]++),O.sym_next===O.sym_end);var fn=Qt,Jn=gr,ln=en,Hr=On,yn=Yr,mn={_tr_init:fn,_tr_stored_block:Jn,_tr_flush_block:ln,_tr_tally:Hr,_tr_align:yn},li=(O,Oe,te,qe)=>{let Et=O&65535|0,_t=O>>>16&65535|0,yr=0;for(;te!==0;){yr=te>2e3?2e3:te,te-=yr;do Et=Et+Oe[qe++]|0,_t=_t+Et|0;while(--yr);Et%=65521,_t%=65521}return Et|_t<<16|0};const Cs=()=>{let O,Oe=[];for(var te=0;te<256;te++){O=te;for(var qe=0;qe<8;qe++)O=O&1?3988292384^O>>>1:O>>>1;Oe[te]=O}return Oe},Ms=new Uint32Array(Cs());var ei=(O,Oe,te,qe)=>{const Et=Ms,_t=qe+te;O^=-1;for(let yr=qe;yr<_t;yr++)O=O>>>8^Et[(O^Oe[yr])&255];return O^-1},un={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},as={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:ta,_tr_stored_block:jn,_tr_flush_block:Nn,_tr_tally:Fs,_tr_align:Qs}=mn,{Z_NO_FLUSH:Us,Z_PARTIAL_FLUSH:ns,Z_FULL_FLUSH:qs,Z_FINISH:Rs,Z_BLOCK:za,Z_OK:hs,Z_STREAM_END:wu,Z_STREAM_ERROR:ro,Z_DATA_ERROR:Fl,Z_BUF_ERROR:nu,Z_DEFAULT_COMPRESSION:pl,Z_FILTERED:ra,Z_HUFFMAN_ONLY:qa,Z_RLE:Ws,Z_FIXED:wa,Z_DEFAULT_STRATEGY:$s,Z_UNKNOWN:Ll,Z_DEFLATED:go}=as,no=9,gl=15,Ul=8,ci=256+1+29,ks=30,Ta=19,Va=2*ci+1,Ca=15,gi=3,Zn=258,fs=Zn+gi+1,_a=32,Qo=42,Hi=57,zo=69,Ea=73,Xs=91,ms=103,jo=113,Ka=666,Vs=1,Xa=2,vo=3,io=4,Vo=3,Ht=(O,Oe)=>(O.msg=un[Oe],Oe),V=O=>O*2-(O>4?9:0),se=O=>{let Oe=O.length;for(;--Oe>=0;)O[Oe]=0},ce=O=>{let Oe,te,qe,Et=O.w_size;Oe=O.hash_size,qe=Oe;do te=O.head[--qe],O.head[qe]=te>=Et?te-Et:0;while(--Oe);Oe=Et,qe=Oe;do te=O.prev[--qe],O.prev[qe]=te>=Et?te-Et:0;while(--Oe)};let K=(O,Oe,te)=>(Oe<<O.hash_shift^te)&O.hash_mask;const ie=O=>{const Oe=O.state;let te=Oe.pending;te>O.avail_out&&(te=O.avail_out),te!==0&&(O.output.set(Oe.pending_buf.subarray(Oe.pending_out,Oe.pending_out+te),O.next_out),O.next_out+=te,Oe.pending_out+=te,O.total_out+=te,O.avail_out-=te,Oe.pending-=te,Oe.pending===0&&(Oe.pending_out=0))},me=(O,Oe)=>{Nn(O,O.block_start>=0?O.block_start:-1,O.strstart-O.block_start,Oe),O.block_start=O.strstart,ie(O.strm)},Se=(O,Oe)=>{O.pending_buf[O.pending++]=Oe},Qe=(O,Oe)=>{O.pending_buf[O.pending++]=Oe>>>8&255,O.pending_buf[O.pending++]=Oe&255},ht=(O,Oe,te,qe)=>{let Et=O.avail_in;return Et>qe&&(Et=qe),Et===0?0:(O.avail_in-=Et,Oe.set(O.input.subarray(O.next_in,O.next_in+Et),te),O.state.wrap===1?O.adler=li(O.adler,Oe,Et,te):O.state.wrap===2&&(O.adler=ei(O.adler,Oe,Et,te)),O.next_in+=Et,O.total_in+=Et,Et)},P=(O,Oe)=>{let te=O.max_chain_length,qe=O.strstart,Et,_t,yr=O.prev_length,Kt=O.nice_match;const Un=O.strstart>O.w_size-fs?O.strstart-(O.w_size-fs):0,Ft=O.window,xr=O.w_mask,qi=O.prev,Ln=O.strstart+Zn;let an=Ft[qe+yr-1],Mr=Ft[qe+yr];O.prev_length>=O.good_match&&(te>>=2),Kt>O.lookahead&&(Kt=O.lookahead);do if(Et=Oe,!(Ft[Et+yr]!==Mr||Ft[Et+yr-1]!==an||Ft[Et]!==Ft[qe]||Ft[++Et]!==Ft[qe+1])){qe+=2,Et++;do;while(Ft[++qe]===Ft[++Et]&&Ft[++qe]===Ft[++Et]&&Ft[++qe]===Ft[++Et]&&Ft[++qe]===Ft[++Et]&&Ft[++qe]===Ft[++Et]&&Ft[++qe]===Ft[++Et]&&Ft[++qe]===Ft[++Et]&&Ft[++qe]===Ft[++Et]&&qe<Ln);if(_t=Zn-(Ln-qe),qe=Ln-Zn,_t>yr){if(O.match_start=Oe,yr=_t,_t>=Kt)break;an=Ft[qe+yr-1],Mr=Ft[qe+yr]}}while((Oe=qi[Oe&xr])>Un&&--te!==0);return yr<=O.lookahead?yr:O.lookahead},k=O=>{const Oe=O.w_size;let te,qe,Et;do{if(qe=O.window_size-O.lookahead-O.strstart,O.strstart>=Oe+(Oe-fs)&&(O.window.set(O.window.subarray(Oe,Oe+Oe-qe),0),O.match_start-=Oe,O.strstart-=Oe,O.block_start-=Oe,O.insert>O.strstart&&(O.insert=O.strstart),ce(O),qe+=Oe),O.strm.avail_in===0)break;if(te=ht(O.strm,O.window,O.strstart+O.lookahead,qe),O.lookahead+=te,O.lookahead+O.insert>=gi)for(Et=O.strstart-O.insert,O.ins_h=O.window[Et],O.ins_h=K(O,O.ins_h,O.window[Et+1]);O.insert&&(O.ins_h=K(O,O.ins_h,O.window[Et+gi-1]),O.prev[Et&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=Et,Et++,O.insert--,!(O.lookahead+O.insert<gi)););}while(O.lookahead<fs&&O.strm.avail_in!==0)},M=(O,Oe)=>{let te=O.pending_buf_size-5>O.w_size?O.w_size:O.pending_buf_size-5,qe,Et,_t,yr=0,Kt=O.strm.avail_in;do{if(qe=65535,_t=O.bi_valid+42>>3,O.strm.avail_out<_t||(_t=O.strm.avail_out-_t,Et=O.strstart-O.block_start,qe>Et+O.strm.avail_in&&(qe=Et+O.strm.avail_in),qe>_t&&(qe=_t),qe<te&&(qe===0&&Oe!==Rs||Oe===Us||qe!==Et+O.strm.avail_in)))break;yr=Oe===Rs&&qe===Et+O.strm.avail_in?1:0,jn(O,0,0,yr),O.pending_buf[O.pending-4]=qe,O.pending_buf[O.pending-3]=qe>>8,O.pending_buf[O.pending-2]=~qe,O.pending_buf[O.pending-1]=~qe>>8,ie(O.strm),Et&&(Et>qe&&(Et=qe),O.strm.output.set(O.window.subarray(O.block_start,O.block_start+Et),O.strm.next_out),O.strm.next_out+=Et,O.strm.avail_out-=Et,O.strm.total_out+=Et,O.block_start+=Et,qe-=Et),qe&&(ht(O.strm,O.strm.output,O.strm.next_out,qe),O.strm.next_out+=qe,O.strm.avail_out-=qe,O.strm.total_out+=qe)}while(yr===0);return Kt-=O.strm.avail_in,Kt&&(Kt>=O.w_size?(O.matches=2,O.window.set(O.strm.input.subarray(O.strm.next_in-O.w_size,O.strm.next_in),0),O.strstart=O.w_size,O.insert=O.strstart):(O.window_size-O.strstart<=Kt&&(O.strstart-=O.w_size,O.window.set(O.window.subarray(O.w_size,O.w_size+O.strstart),0),O.matches<2&&O.matches++,O.insert>O.strstart&&(O.insert=O.strstart)),O.window.set(O.strm.input.subarray(O.strm.next_in-Kt,O.strm.next_in),O.strstart),O.strstart+=Kt,O.insert+=Kt>O.w_size-O.insert?O.w_size-O.insert:Kt),O.block_start=O.strstart),O.high_water<O.strstart&&(O.high_water=O.strstart),yr?io:Oe!==Us&&Oe!==Rs&&O.strm.avail_in===0&&O.strstart===O.block_start?Xa:(_t=O.window_size-O.strstart,O.strm.avail_in>_t&&O.block_start>=O.w_size&&(O.block_start-=O.w_size,O.strstart-=O.w_size,O.window.set(O.window.subarray(O.w_size,O.w_size+O.strstart),0),O.matches<2&&O.matches++,_t+=O.w_size,O.insert>O.strstart&&(O.insert=O.strstart)),_t>O.strm.avail_in&&(_t=O.strm.avail_in),_t&&(ht(O.strm,O.window,O.strstart,_t),O.strstart+=_t,O.insert+=_t>O.w_size-O.insert?O.w_size-O.insert:_t),O.high_water<O.strstart&&(O.high_water=O.strstart),_t=O.bi_valid+42>>3,_t=O.pending_buf_size-_t>65535?65535:O.pending_buf_size-_t,te=_t>O.w_size?O.w_size:_t,Et=O.strstart-O.block_start,(Et>=te||(Et||Oe===Rs)&&Oe!==Us&&O.strm.avail_in===0&&Et<=_t)&&(qe=Et>_t?_t:Et,yr=Oe===Rs&&O.strm.avail_in===0&&qe===Et?1:0,jn(O,O.block_start,qe,yr),O.block_start+=qe,ie(O.strm)),yr?vo:Vs)},W=(O,Oe)=>{let te,qe;for(;;){if(O.lookahead<fs){if(k(O),O.lookahead<fs&&Oe===Us)return Vs;if(O.lookahead===0)break}if(te=0,O.lookahead>=gi&&(O.ins_h=K(O,O.ins_h,O.window[O.strstart+gi-1]),te=O.prev[O.strstart&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=O.strstart),te!==0&&O.strstart-te<=O.w_size-fs&&(O.match_length=P(O,te)),O.match_length>=gi)if(qe=Fs(O,O.strstart-O.match_start,O.match_length-gi),O.lookahead-=O.match_length,O.match_length<=O.max_lazy_match&&O.lookahead>=gi){O.match_length--;do O.strstart++,O.ins_h=K(O,O.ins_h,O.window[O.strstart+gi-1]),te=O.prev[O.strstart&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=O.strstart;while(--O.match_length!==0);O.strstart++}else O.strstart+=O.match_length,O.match_length=0,O.ins_h=O.window[O.strstart],O.ins_h=K(O,O.ins_h,O.window[O.strstart+1]);else qe=Fs(O,0,O.window[O.strstart]),O.lookahead--,O.strstart++;if(qe&&(me(O,!1),O.strm.avail_out===0))return Vs}return O.insert=O.strstart<gi-1?O.strstart:gi-1,Oe===Rs?(me(O,!0),O.strm.avail_out===0?vo:io):O.sym_next&&(me(O,!1),O.strm.avail_out===0)?Vs:Xa},Z=(O,Oe)=>{let te,qe,Et;for(;;){if(O.lookahead<fs){if(k(O),O.lookahead<fs&&Oe===Us)return Vs;if(O.lookahead===0)break}if(te=0,O.lookahead>=gi&&(O.ins_h=K(O,O.ins_h,O.window[O.strstart+gi-1]),te=O.prev[O.strstart&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=O.strstart),O.prev_length=O.match_length,O.prev_match=O.match_start,O.match_length=gi-1,te!==0&&O.prev_length<O.max_lazy_match&&O.strstart-te<=O.w_size-fs&&(O.match_length=P(O,te),O.match_length<=5&&(O.strategy===ra||O.match_length===gi&&O.strstart-O.match_start>4096)&&(O.match_length=gi-1)),O.prev_length>=gi&&O.match_length<=O.prev_length){Et=O.strstart+O.lookahead-gi,qe=Fs(O,O.strstart-1-O.prev_match,O.prev_length-gi),O.lookahead-=O.prev_length-1,O.prev_length-=2;do++O.strstart<=Et&&(O.ins_h=K(O,O.ins_h,O.window[O.strstart+gi-1]),te=O.prev[O.strstart&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=O.strstart);while(--O.prev_length!==0);if(O.match_available=0,O.match_length=gi-1,O.strstart++,qe&&(me(O,!1),O.strm.avail_out===0))return Vs}else if(O.match_available){if(qe=Fs(O,0,O.window[O.strstart-1]),qe&&me(O,!1),O.strstart++,O.lookahead--,O.strm.avail_out===0)return Vs}else O.match_available=1,O.strstart++,O.lookahead--}return O.match_available&&(qe=Fs(O,0,O.window[O.strstart-1]),O.match_available=0),O.insert=O.strstart<gi-1?O.strstart:gi-1,Oe===Rs?(me(O,!0),O.strm.avail_out===0?vo:io):O.sym_next&&(me(O,!1),O.strm.avail_out===0)?Vs:Xa},re=(O,Oe)=>{let te,qe,Et,_t;const yr=O.window;for(;;){if(O.lookahead<=Zn){if(k(O),O.lookahead<=Zn&&Oe===Us)return Vs;if(O.lookahead===0)break}if(O.match_length=0,O.lookahead>=gi&&O.strstart>0&&(Et=O.strstart-1,qe=yr[Et],qe===yr[++Et]&&qe===yr[++Et]&&qe===yr[++Et])){_t=O.strstart+Zn;do;while(qe===yr[++Et]&&qe===yr[++Et]&&qe===yr[++Et]&&qe===yr[++Et]&&qe===yr[++Et]&&qe===yr[++Et]&&qe===yr[++Et]&&qe===yr[++Et]&&Et<_t);O.match_length=Zn-(_t-Et),O.match_length>O.lookahead&&(O.match_length=O.lookahead)}if(O.match_length>=gi?(te=Fs(O,1,O.match_length-gi),O.lookahead-=O.match_length,O.strstart+=O.match_length,O.match_length=0):(te=Fs(O,0,O.window[O.strstart]),O.lookahead--,O.strstart++),te&&(me(O,!1),O.strm.avail_out===0))return Vs}return O.insert=0,Oe===Rs?(me(O,!0),O.strm.avail_out===0?vo:io):O.sym_next&&(me(O,!1),O.strm.avail_out===0)?Vs:Xa},ye=(O,Oe)=>{let te;for(;;){if(O.lookahead===0&&(k(O),O.lookahead===0)){if(Oe===Us)return Vs;break}if(O.match_length=0,te=Fs(O,0,O.window[O.strstart]),O.lookahead--,O.strstart++,te&&(me(O,!1),O.strm.avail_out===0))return Vs}return O.insert=0,Oe===Rs?(me(O,!0),O.strm.avail_out===0?vo:io):O.sym_next&&(me(O,!1),O.strm.avail_out===0)?Vs:Xa};function fe(O,Oe,te,qe,Et){this.good_length=O,this.max_lazy=Oe,this.nice_length=te,this.max_chain=qe,this.func=Et}const Ae=[new fe(0,0,0,0,M),new fe(4,4,8,4,W),new fe(4,5,16,8,W),new fe(4,6,32,32,W),new fe(4,4,16,16,Z),new fe(8,16,32,32,Z),new fe(8,16,128,128,Z),new fe(8,32,128,256,Z),new fe(32,128,258,1024,Z),new fe(32,258,258,4096,Z)],Le=O=>{O.window_size=2*O.w_size,se(O.head),O.max_lazy_match=Ae[O.level].max_lazy,O.good_match=Ae[O.level].good_length,O.nice_match=Ae[O.level].nice_length,O.max_chain_length=Ae[O.level].max_chain,O.strstart=0,O.block_start=0,O.lookahead=0,O.insert=0,O.match_length=O.prev_length=gi-1,O.match_available=0,O.ins_h=0};function Ve(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=go,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(Va*2),this.dyn_dtree=new Uint16Array((2*ks+1)*2),this.bl_tree=new Uint16Array((2*Ta+1)*2),se(this.dyn_ltree),se(this.dyn_dtree),se(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(Ca+1),this.heap=new Uint16Array(2*ci+1),se(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*ci+1),se(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Ze=O=>{if(!O)return 1;const Oe=O.state;return!Oe||Oe.strm!==O||Oe.status!==Qo&&Oe.status!==Hi&&Oe.status!==zo&&Oe.status!==Ea&&Oe.status!==Xs&&Oe.status!==ms&&Oe.status!==jo&&Oe.status!==Ka?1:0},dt=O=>{if(Ze(O))return Ht(O,ro);O.total_in=O.total_out=0,O.data_type=Ll;const Oe=O.state;return Oe.pending=0,Oe.pending_out=0,Oe.wrap<0&&(Oe.wrap=-Oe.wrap),Oe.status=Oe.wrap===2?Hi:Oe.wrap?Qo:jo,O.adler=Oe.wrap===2?0:1,Oe.last_flush=-2,ta(Oe),hs},je=O=>{const Oe=dt(O);return Oe===hs&&Le(O.state),Oe},St=(O,Oe)=>Ze(O)||O.state.wrap!==2?ro:(O.state.gzhead=Oe,hs),ct=(O,Oe,te,qe,Et,_t)=>{if(!O)return ro;let yr=1;if(Oe===pl&&(Oe=6),qe<0?(yr=0,qe=-qe):qe>15&&(yr=2,qe-=16),Et<1||Et>no||te!==go||qe<8||qe>15||Oe<0||Oe>9||_t<0||_t>wa||qe===8&&yr!==1)return Ht(O,ro);qe===8&&(qe=9);const Kt=new Ve;return O.state=Kt,Kt.strm=O,Kt.status=Qo,Kt.wrap=yr,Kt.gzhead=null,Kt.w_bits=qe,Kt.w_size=1<<Kt.w_bits,Kt.w_mask=Kt.w_size-1,Kt.hash_bits=Et+7,Kt.hash_size=1<<Kt.hash_bits,Kt.hash_mask=Kt.hash_size-1,Kt.hash_shift=~~((Kt.hash_bits+gi-1)/gi),Kt.window=new Uint8Array(Kt.w_size*2),Kt.head=new Uint16Array(Kt.hash_size),Kt.prev=new Uint16Array(Kt.w_size),Kt.lit_bufsize=1<<Et+6,Kt.pending_buf_size=Kt.lit_bufsize*4,Kt.pending_buf=new Uint8Array(Kt.pending_buf_size),Kt.sym_buf=Kt.lit_bufsize,Kt.sym_end=(Kt.lit_bufsize-1)*3,Kt.level=Oe,Kt.strategy=_t,Kt.method=te,je(O)},Nt=(O,Oe)=>ct(O,Oe,go,gl,Ul,$s),it=(O,Oe)=>{if(Ze(O)||Oe>za||Oe<0)return O?Ht(O,ro):ro;const te=O.state;if(!O.output||O.avail_in!==0&&!O.input||te.status===Ka&&Oe!==Rs)return Ht(O,O.avail_out===0?nu:ro);const qe=te.last_flush;if(te.last_flush=Oe,te.pending!==0){if(ie(O),O.avail_out===0)return te.last_flush=-1,hs}else if(O.avail_in===0&&V(Oe)<=V(qe)&&Oe!==Rs)return Ht(O,nu);if(te.status===Ka&&O.avail_in!==0)return Ht(O,nu);if(te.status===Qo&&te.wrap===0&&(te.status=jo),te.status===Qo){let Et=go+(te.w_bits-8<<4)<<8,_t=-1;if(te.strategy>=qa||te.level<2?_t=0:te.level<6?_t=1:te.level===6?_t=2:_t=3,Et|=_t<<6,te.strstart!==0&&(Et|=_a),Et+=31-Et%31,Qe(te,Et),te.strstart!==0&&(Qe(te,O.adler>>>16),Qe(te,O.adler&65535)),O.adler=1,te.status=jo,ie(O),te.pending!==0)return te.last_flush=-1,hs}if(te.status===Hi){if(O.adler=0,Se(te,31),Se(te,139),Se(te,8),te.gzhead)Se(te,(te.gzhead.text?1:0)+(te.gzhead.hcrc?2:0)+(te.gzhead.extra?4:0)+(te.gzhead.name?8:0)+(te.gzhead.comment?16:0)),Se(te,te.gzhead.time&255),Se(te,te.gzhead.time>>8&255),Se(te,te.gzhead.time>>16&255),Se(te,te.gzhead.time>>24&255),Se(te,te.level===9?2:te.strategy>=qa||te.level<2?4:0),Se(te,te.gzhead.os&255),te.gzhead.extra&&te.gzhead.extra.length&&(Se(te,te.gzhead.extra.length&255),Se(te,te.gzhead.extra.length>>8&255)),te.gzhead.hcrc&&(O.adler=ei(O.adler,te.pending_buf,te.pending,0)),te.gzindex=0,te.status=zo;else if(Se(te,0),Se(te,0),Se(te,0),Se(te,0),Se(te,0),Se(te,te.level===9?2:te.strategy>=qa||te.level<2?4:0),Se(te,Vo),te.status=jo,ie(O),te.pending!==0)return te.last_flush=-1,hs}if(te.status===zo){if(te.gzhead.extra){let Et=te.pending,_t=(te.gzhead.extra.length&65535)-te.gzindex;for(;te.pending+_t>te.pending_buf_size;){let Kt=te.pending_buf_size-te.pending;if(te.pending_buf.set(te.gzhead.extra.subarray(te.gzindex,te.gzindex+Kt),te.pending),te.pending=te.pending_buf_size,te.gzhead.hcrc&&te.pending>Et&&(O.adler=ei(O.adler,te.pending_buf,te.pending-Et,Et)),te.gzindex+=Kt,ie(O),te.pending!==0)return te.last_flush=-1,hs;Et=0,_t-=Kt}let yr=new Uint8Array(te.gzhead.extra);te.pending_buf.set(yr.subarray(te.gzindex,te.gzindex+_t),te.pending),te.pending+=_t,te.gzhead.hcrc&&te.pending>Et&&(O.adler=ei(O.adler,te.pending_buf,te.pending-Et,Et)),te.gzindex=0}te.status=Ea}if(te.status===Ea){if(te.gzhead.name){let Et=te.pending,_t;do{if(te.pending===te.pending_buf_size){if(te.gzhead.hcrc&&te.pending>Et&&(O.adler=ei(O.adler,te.pending_buf,te.pending-Et,Et)),ie(O),te.pending!==0)return te.last_flush=-1,hs;Et=0}te.gzindex<te.gzhead.name.length?_t=te.gzhead.name.charCodeAt(te.gzindex++)&255:_t=0,Se(te,_t)}while(_t!==0);te.gzhead.hcrc&&te.pending>Et&&(O.adler=ei(O.adler,te.pending_buf,te.pending-Et,Et)),te.gzindex=0}te.status=Xs}if(te.status===Xs){if(te.gzhead.comment){let Et=te.pending,_t;do{if(te.pending===te.pending_buf_size){if(te.gzhead.hcrc&&te.pending>Et&&(O.adler=ei(O.adler,te.pending_buf,te.pending-Et,Et)),ie(O),te.pending!==0)return te.last_flush=-1,hs;Et=0}te.gzindex<te.gzhead.comment.length?_t=te.gzhead.comment.charCodeAt(te.gzindex++)&255:_t=0,Se(te,_t)}while(_t!==0);te.gzhead.hcrc&&te.pending>Et&&(O.adler=ei(O.adler,te.pending_buf,te.pending-Et,Et))}te.status=ms}if(te.status===ms){if(te.gzhead.hcrc){if(te.pending+2>te.pending_buf_size&&(ie(O),te.pending!==0))return te.last_flush=-1,hs;Se(te,O.adler&255),Se(te,O.adler>>8&255),O.adler=0}if(te.status=jo,ie(O),te.pending!==0)return te.last_flush=-1,hs}if(O.avail_in!==0||te.lookahead!==0||Oe!==Us&&te.status!==Ka){let Et=te.level===0?M(te,Oe):te.strategy===qa?ye(te,Oe):te.strategy===Ws?re(te,Oe):Ae[te.level].func(te,Oe);if((Et===vo||Et===io)&&(te.status=Ka),Et===Vs||Et===vo)return O.avail_out===0&&(te.last_flush=-1),hs;if(Et===Xa&&(Oe===ns?Qs(te):Oe!==za&&(jn(te,0,0,!1),Oe===qs&&(se(te.head),te.lookahead===0&&(te.strstart=0,te.block_start=0,te.insert=0))),ie(O),O.avail_out===0))return te.last_flush=-1,hs}return Oe!==Rs?hs:te.wrap<=0?wu:(te.wrap===2?(Se(te,O.adler&255),Se(te,O.adler>>8&255),Se(te,O.adler>>16&255),Se(te,O.adler>>24&255),Se(te,O.total_in&255),Se(te,O.total_in>>8&255),Se(te,O.total_in>>16&255),Se(te,O.total_in>>24&255)):(Qe(te,O.adler>>>16),Qe(te,O.adler&65535)),ie(O),te.wrap>0&&(te.wrap=-te.wrap),te.pending!==0?hs:wu)},Ot=O=>{if(Ze(O))return ro;const Oe=O.state.status;return O.state=null,Oe===jo?Ht(O,Fl):hs},qt=(O,Oe)=>{let te=Oe.length;if(Ze(O))return ro;const qe=O.state,Et=qe.wrap;if(Et===2||Et===1&&qe.status!==Qo||qe.lookahead)return ro;if(Et===1&&(O.adler=li(O.adler,Oe,te,0)),qe.wrap=0,te>=qe.w_size){Et===0&&(se(qe.head),qe.strstart=0,qe.block_start=0,qe.insert=0);let Un=new Uint8Array(qe.w_size);Un.set(Oe.subarray(te-qe.w_size,te),0),Oe=Un,te=qe.w_size}const _t=O.avail_in,yr=O.next_in,Kt=O.input;for(O.avail_in=te,O.next_in=0,O.input=Oe,k(qe);qe.lookahead>=gi;){let Un=qe.strstart,Ft=qe.lookahead-(gi-1);do qe.ins_h=K(qe,qe.ins_h,qe.window[Un+gi-1]),qe.prev[Un&qe.w_mask]=qe.head[qe.ins_h],qe.head[qe.ins_h]=Un,Un++;while(--Ft);qe.strstart=Un,qe.lookahead=gi-1,k(qe)}return qe.strstart+=qe.lookahead,qe.block_start=qe.strstart,qe.insert=qe.lookahead,qe.lookahead=0,qe.match_length=qe.prev_length=gi-1,qe.match_available=0,O.next_in=yr,O.input=Kt,O.avail_in=_t,qe.wrap=Et,hs};var It=Nt,nt=ct,Vt=je,Tr=dt,or=St,Mt=it,_r=Ot,lt=qt,vt="pako deflate (from Nodeca project)",Rt={deflateInit:It,deflateInit2:nt,deflateReset:Vt,deflateResetKeep:Tr,deflateSetHeader:or,deflate:Mt,deflateEnd:_r,deflateSetDictionary:lt,deflateInfo:vt};const Dt=(O,Oe)=>Object.prototype.hasOwnProperty.call(O,Oe);var vr=function(O){const Oe=Array.prototype.slice.call(arguments,1);for(;Oe.length;){const te=Oe.shift();if(te){if(typeof te!="object")throw new TypeError(te+"must be non-object");for(const qe in te)Dt(te,qe)&&(O[qe]=te[qe])}}return O},kr=O=>{let Oe=0;for(let qe=0,Et=O.length;qe<Et;qe++)Oe+=O[qe].length;const te=new Uint8Array(Oe);for(let qe=0,Et=0,_t=O.length;qe<_t;qe++){let yr=O[qe];te.set(yr,Et),Et+=yr.length}return te},Rr={assign:vr,flattenChunks:kr};let ur=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{ur=!1}const Or=new Uint8Array(256);for(let O=0;O<256;O++)Or[O]=O>=252?6:O>=248?5:O>=240?4:O>=224?3:O>=192?2:1;Or[254]=Or[254]=1;var pn=O=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(O);let Oe,te,qe,Et,_t,yr=O.length,Kt=0;for(Et=0;Et<yr;Et++)te=O.charCodeAt(Et),(te&64512)===55296&&Et+1<yr&&(qe=O.charCodeAt(Et+1),(qe&64512)===56320&&(te=65536+(te-55296<<10)+(qe-56320),Et++)),Kt+=te<128?1:te<2048?2:te<65536?3:4;for(Oe=new Uint8Array(Kt),_t=0,Et=0;_t<Kt;Et++)te=O.charCodeAt(Et),(te&64512)===55296&&Et+1<yr&&(qe=O.charCodeAt(Et+1),(qe&64512)===56320&&(te=65536+(te-55296<<10)+(qe-56320),Et++)),te<128?Oe[_t++]=te:te<2048?(Oe[_t++]=192|te>>>6,Oe[_t++]=128|te&63):te<65536?(Oe[_t++]=224|te>>>12,Oe[_t++]=128|te>>>6&63,Oe[_t++]=128|te&63):(Oe[_t++]=240|te>>>18,Oe[_t++]=128|te>>>12&63,Oe[_t++]=128|te>>>6&63,Oe[_t++]=128|te&63);return Oe};const on=(O,Oe)=>{if(Oe<65534&&O.subarray&&ur)return String.fromCharCode.apply(null,O.length===Oe?O:O.subarray(0,Oe));let te="";for(let qe=0;qe<Oe;qe++)te+=String.fromCharCode(O[qe]);return te};var Ye=(O,Oe)=>{const te=Oe||O.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(O.subarray(0,Oe));let qe,Et;const _t=new Array(te*2);for(Et=0,qe=0;qe<te;){let yr=O[qe++];if(yr<128){_t[Et++]=yr;continue}let Kt=Or[yr];if(Kt>4){_t[Et++]=65533,qe+=Kt-1;continue}for(yr&=Kt===2?31:Kt===3?15:7;Kt>1&&qe<te;)yr=yr<<6|O[qe++]&63,Kt--;if(Kt>1){_t[Et++]=65533;continue}yr<65536?_t[Et++]=yr:(yr-=65536,_t[Et++]=55296|yr>>10&1023,_t[Et++]=56320|yr&1023)}return on(_t,Et)},Tt=(O,Oe)=>{Oe=Oe||O.length,Oe>O.length&&(Oe=O.length);let te=Oe-1;for(;te>=0&&(O[te]&192)===128;)te--;return te<0||te===0?Oe:te+Or[O[te]]>Oe?te:Oe},Lt={string2buf:pn,buf2string:Ye,utf8border:Tt};function Wt(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Xt=Wt;const fr=Object.prototype.toString,{Z_NO_FLUSH:Lr,Z_SYNC_FLUSH:Nr,Z_FULL_FLUSH:Zr,Z_FINISH:An,Z_OK:Sn,Z_STREAM_END:Fn,Z_DEFAULT_COMPRESSION:xi,Z_DEFAULT_STRATEGY:yt,Z_DEFLATED:Tn}=as;function Ri(O){this.options=Rr.assign({level:xi,method:Tn,chunkSize:16384,windowBits:15,memLevel:8,strategy:yt},O||{});let Oe=this.options;Oe.raw&&Oe.windowBits>0?Oe.windowBits=-Oe.windowBits:Oe.gzip&&Oe.windowBits>0&&Oe.windowBits<16&&(Oe.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Xt,this.strm.avail_out=0;let te=Rt.deflateInit2(this.strm,Oe.level,Oe.method,Oe.windowBits,Oe.memLevel,Oe.strategy);if(te!==Sn)throw new Error(un[te]);if(Oe.header&&Rt.deflateSetHeader(this.strm,Oe.header),Oe.dictionary){let qe;if(typeof Oe.dictionary=="string"?qe=Lt.string2buf(Oe.dictionary):fr.call(Oe.dictionary)==="[object ArrayBuffer]"?qe=new Uint8Array(Oe.dictionary):qe=Oe.dictionary,te=Rt.deflateSetDictionary(this.strm,qe),te!==Sn)throw new Error(un[te]);this._dict_set=!0}}Ri.prototype.push=function(O,Oe){const te=this.strm,qe=this.options.chunkSize;let Et,_t;if(this.ended)return!1;for(Oe===~~Oe?_t=Oe:_t=Oe===!0?An:Lr,typeof O=="string"?te.input=Lt.string2buf(O):fr.call(O)==="[object ArrayBuffer]"?te.input=new Uint8Array(O):te.input=O,te.next_in=0,te.avail_in=te.input.length;;){if(te.avail_out===0&&(te.output=new Uint8Array(qe),te.next_out=0,te.avail_out=qe),(_t===Nr||_t===Zr)&&te.avail_out<=6){this.onData(te.output.subarray(0,te.next_out)),te.avail_out=0;continue}if(Et=Rt.deflate(te,_t),Et===Fn)return te.next_out>0&&this.onData(te.output.subarray(0,te.next_out)),Et=Rt.deflateEnd(this.strm),this.onEnd(Et),this.ended=!0,Et===Sn;if(te.avail_out===0){this.onData(te.output);continue}if(_t>0&&te.next_out>0){this.onData(te.output.subarray(0,te.next_out)),te.avail_out=0;continue}if(te.avail_in===0)break}return!0},Ri.prototype.onData=function(O){this.chunks.push(O)},Ri.prototype.onEnd=function(O){O===Sn&&(this.result=Rr.flattenChunks(this.chunks)),this.chunks=[],this.err=O,this.msg=this.strm.msg};function Cn(O,Oe){const te=new Ri(Oe);if(te.push(O,!0),te.err)throw te.msg||un[te.err];return te.result}function cn(O,Oe){return Oe=Oe||{},Oe.raw=!0,Cn(O,Oe)}function Ni(O,Oe){return Oe=Oe||{},Oe.gzip=!0,Cn(O,Oe)}var $n=Ri,zn=Cn,Qn=cn,va=Ni,Di={Deflate:$n,deflate:zn,deflateRaw:Qn,gzip:va};const Wn=16209,is=16191;var Si=function(Oe,te){let qe,Et,_t,yr,Kt,Un,Ft,xr,qi,Ln,an,Mr,Ua,Wi,ki,zi,xs,En,bs,$a,ji,ia,Ls,ni;const $i=Oe.state;qe=Oe.next_in,Ls=Oe.input,Et=qe+(Oe.avail_in-5),_t=Oe.next_out,ni=Oe.output,yr=_t-(te-Oe.avail_out),Kt=_t+(Oe.avail_out-257),Un=$i.dmax,Ft=$i.wsize,xr=$i.whave,qi=$i.wnext,Ln=$i.window,an=$i.hold,Mr=$i.bits,Ua=$i.lencode,Wi=$i.distcode,ki=(1<<$i.lenbits)-1,zi=(1<<$i.distbits)-1;e:do{Mr<15&&(an+=Ls[qe++]<<Mr,Mr+=8,an+=Ls[qe++]<<Mr,Mr+=8),xs=Ua[an&ki];t:for(;;){if(En=xs>>>24,an>>>=En,Mr-=En,En=xs>>>16&255,En===0)ni[_t++]=xs&65535;else if(En&16){bs=xs&65535,En&=15,En&&(Mr<En&&(an+=Ls[qe++]<<Mr,Mr+=8),bs+=an&(1<<En)-1,an>>>=En,Mr-=En),Mr<15&&(an+=Ls[qe++]<<Mr,Mr+=8,an+=Ls[qe++]<<Mr,Mr+=8),xs=Wi[an&zi];r:for(;;){if(En=xs>>>24,an>>>=En,Mr-=En,En=xs>>>16&255,En&16){if($a=xs&65535,En&=15,Mr<En&&(an+=Ls[qe++]<<Mr,Mr+=8,Mr<En&&(an+=Ls[qe++]<<Mr,Mr+=8)),$a+=an&(1<<En)-1,$a>Un){Oe.msg="invalid distance too far back",$i.mode=Wn;break e}if(an>>>=En,Mr-=En,En=_t-yr,$a>En){if(En=$a-En,En>xr&&$i.sane){Oe.msg="invalid distance too far back",$i.mode=Wn;break e}if(ji=0,ia=Ln,qi===0){if(ji+=Ft-En,En<bs){bs-=En;do ni[_t++]=Ln[ji++];while(--En);ji=_t-$a,ia=ni}}else if(qi<En){if(ji+=Ft+qi-En,En-=qi,En<bs){bs-=En;do ni[_t++]=Ln[ji++];while(--En);if(ji=0,qi<bs){En=qi,bs-=En;do ni[_t++]=Ln[ji++];while(--En);ji=_t-$a,ia=ni}}}else if(ji+=qi-En,En<bs){bs-=En;do ni[_t++]=Ln[ji++];while(--En);ji=_t-$a,ia=ni}for(;bs>2;)ni[_t++]=ia[ji++],ni[_t++]=ia[ji++],ni[_t++]=ia[ji++],bs-=3;bs&&(ni[_t++]=ia[ji++],bs>1&&(ni[_t++]=ia[ji++]))}else{ji=_t-$a;do ni[_t++]=ni[ji++],ni[_t++]=ni[ji++],ni[_t++]=ni[ji++],bs-=3;while(bs>2);bs&&(ni[_t++]=ni[ji++],bs>1&&(ni[_t++]=ni[ji++]))}}else if((En&64)===0){xs=Wi[(xs&65535)+(an&(1<<En)-1)];continue r}else{Oe.msg="invalid distance code",$i.mode=Wn;break e}break}}else if((En&64)===0){xs=Ua[(xs&65535)+(an&(1<<En)-1)];continue t}else if(En&32){$i.mode=is;break e}else{Oe.msg="invalid literal/length code",$i.mode=Wn;break e}break}}while(qe<Et&&_t<Kt);bs=Mr>>3,qe-=bs,Mr-=bs<<3,an&=(1<<Mr)-1,Oe.next_in=qe,Oe.next_out=_t,Oe.avail_in=qe<Et?5+(Et-qe):5-(qe-Et),Oe.avail_out=_t<Kt?257+(Kt-_t):257-(_t-Kt),$i.hold=an,$i.bits=Mr};const Hn=15,Li=852,Yn=592,Gi=0,ss=1,Zi=2,ys=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Na=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),bi=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Ys=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var ai=(O,Oe,te,qe,Et,_t,yr,Kt)=>{const Un=Kt.bits;let Ft=0,xr=0,qi=0,Ln=0,an=0,Mr=0,Ua=0,Wi=0,ki=0,zi=0,xs,En,bs,$a,ji,ia=null,Ls;const ni=new Uint16Array(Hn+1),$i=new Uint16Array(Hn+1);let nc=null,Zu,ou,xl;for(Ft=0;Ft<=Hn;Ft++)ni[Ft]=0;for(xr=0;xr<qe;xr++)ni[Oe[te+xr]]++;for(an=Un,Ln=Hn;Ln>=1&&ni[Ln]===0;Ln--);if(an>Ln&&(an=Ln),Ln===0)return Et[_t++]=1<<24|64<<16|0,Et[_t++]=1<<24|64<<16|0,Kt.bits=1,0;for(qi=1;qi<Ln&&ni[qi]===0;qi++);for(an<qi&&(an=qi),Wi=1,Ft=1;Ft<=Hn;Ft++)if(Wi<<=1,Wi-=ni[Ft],Wi<0)return-1;if(Wi>0&&(O===Gi||Ln!==1))return-1;for($i[1]=0,Ft=1;Ft<Hn;Ft++)$i[Ft+1]=$i[Ft]+ni[Ft];for(xr=0;xr<qe;xr++)Oe[te+xr]!==0&&(yr[$i[Oe[te+xr]]++]=xr);if(O===Gi?(ia=nc=yr,Ls=20):O===ss?(ia=ys,nc=Na,Ls=257):(ia=bi,nc=Ys,Ls=0),zi=0,xr=0,Ft=qi,ji=_t,Mr=an,Ua=0,bs=-1,ki=1<<an,$a=ki-1,O===ss&&ki>Li||O===Zi&&ki>Yn)return 1;for(;;){Zu=Ft-Ua,yr[xr]+1<Ls?(ou=0,xl=yr[xr]):yr[xr]>=Ls?(ou=nc[yr[xr]-Ls],xl=ia[yr[xr]-Ls]):(ou=96,xl=0),xs=1<<Ft-Ua,En=1<<Mr,qi=En;do En-=xs,Et[ji+(zi>>Ua)+En]=Zu<<24|ou<<16|xl|0;while(En!==0);for(xs=1<<Ft-1;zi&xs;)xs>>=1;if(xs!==0?(zi&=xs-1,zi+=xs):zi=0,xr++,--ni[Ft]===0){if(Ft===Ln)break;Ft=Oe[te+yr[xr]]}if(Ft>an&&(zi&$a)!==bs){for(Ua===0&&(Ua=an),ji+=qi,Mr=Ft-Ua,Wi=1<<Mr;Mr+Ua<Ln&&(Wi-=ni[Mr+Ua],!(Wi<=0));)Mr++,Wi<<=1;if(ki+=1<<Mr,O===ss&&ki>Li||O===Zi&&ki>Yn)return 1;bs=zi&$a,Et[bs]=an<<24|Mr<<16|ji-_t|0}}return zi!==0&&(Et[ji+zi]=Ft-Ua<<24|64<<16|0),Kt.bits=an,0};const ha=0,Ii=1,_n=2,{Z_FINISH:cs,Z_BLOCK:_u,Z_TREES:so,Z_OK:Ko,Z_STREAM_END:ec,Z_NEED_DICT:wi,Z_STREAM_ERROR:Da,Z_DATA_ERROR:Za,Z_MEM_ERROR:$l,Z_BUF_ERROR:Hl,Z_DEFLATED:fa}=as,yo=16180,Ja=16181,Hc=16182,To=16183,Ac=16184,Ga=16185,Ql=16186,zl=16187,Il=16188,bd=16189,tc=16190,Vl=16191,pc=16192,wd=16193,Kl=16194,Gl=16195,Eu=16196,Wl=16197,Io=16198,vl=16199,iu=16200,gc=16201,zd=16202,rc=16203,Yu=16204,_d=16205,yl=16206,oh=16207,Bl=16208,Fi=16209,vc=16210,Qc=16211,zc=852,qu=592,Bo=15,su=O=>(O>>>24&255)+(O>>>8&65280)+((O&65280)<<8)+((O&255)<<24);function v(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const S=O=>{if(!O)return 1;const Oe=O.state;return!Oe||Oe.strm!==O||Oe.mode<yo||Oe.mode>Qc?1:0},Q=O=>{if(S(O))return Da;const Oe=O.state;return O.total_in=O.total_out=Oe.total=0,O.msg="",Oe.wrap&&(O.adler=Oe.wrap&1),Oe.mode=yo,Oe.last=0,Oe.havedict=0,Oe.flags=-1,Oe.dmax=32768,Oe.head=null,Oe.hold=0,Oe.bits=0,Oe.lencode=Oe.lendyn=new Int32Array(zc),Oe.distcode=Oe.distdyn=new Int32Array(qu),Oe.sane=1,Oe.back=-1,Ko},le=O=>{if(S(O))return Da;const Oe=O.state;return Oe.wsize=0,Oe.whave=0,Oe.wnext=0,Q(O)},_e=(O,Oe)=>{let te;if(S(O))return Da;const qe=O.state;return Oe<0?(te=0,Oe=-Oe):(te=(Oe>>4)+5,Oe<48&&(Oe&=15)),Oe&&(Oe<8||Oe>15)?Da:(qe.window!==null&&qe.wbits!==Oe&&(qe.window=null),qe.wrap=te,qe.wbits=Oe,le(O))},Ke=(O,Oe)=>{if(!O)return Da;const te=new v;O.state=te,te.strm=O,te.window=null,te.mode=yo;const qe=_e(O,Oe);return qe!==Ko&&(O.state=null),qe},kt=O=>Ke(O,Bo);let er=!0,Er,Wr;const bn=O=>{if(er){Er=new Int32Array(512),Wr=new Int32Array(32);let Oe=0;for(;Oe<144;)O.lens[Oe++]=8;for(;Oe<256;)O.lens[Oe++]=9;for(;Oe<280;)O.lens[Oe++]=7;for(;Oe<288;)O.lens[Oe++]=8;for(ai(Ii,O.lens,0,288,Er,0,O.work,{bits:9}),Oe=0;Oe<32;)O.lens[Oe++]=5;ai(_n,O.lens,0,32,Wr,0,O.work,{bits:5}),er=!1}O.lencode=Er,O.lenbits=9,O.distcode=Wr,O.distbits=5},ui=(O,Oe,te,qe)=>{let Et;const _t=O.state;return _t.window===null&&(_t.wsize=1<<_t.wbits,_t.wnext=0,_t.whave=0,_t.window=new Uint8Array(_t.wsize)),qe>=_t.wsize?(_t.window.set(Oe.subarray(te-_t.wsize,te),0),_t.wnext=0,_t.whave=_t.wsize):(Et=_t.wsize-_t.wnext,Et>qe&&(Et=qe),_t.window.set(Oe.subarray(te-qe,te-qe+Et),_t.wnext),qe-=Et,qe?(_t.window.set(Oe.subarray(te-qe,te),0),_t.wnext=qe,_t.whave=_t.wsize):(_t.wnext+=Et,_t.wnext===_t.wsize&&(_t.wnext=0),_t.whave<_t.wsize&&(_t.whave+=Et))),0},As=(O,Oe)=>{let te,qe,Et,_t,yr,Kt,Un,Ft,xr,qi,Ln,an,Mr,Ua,Wi=0,ki,zi,xs,En,bs,$a,ji,ia;const Ls=new Uint8Array(4);let ni,$i;const nc=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(S(O)||!O.output||!O.input&&O.avail_in!==0)return Da;te=O.state,te.mode===Vl&&(te.mode=pc),yr=O.next_out,Et=O.output,Un=O.avail_out,_t=O.next_in,qe=O.input,Kt=O.avail_in,Ft=te.hold,xr=te.bits,qi=Kt,Ln=Un,ia=Ko;e:for(;;)switch(te.mode){case yo:if(te.wrap===0){te.mode=pc;break}for(;xr<16;){if(Kt===0)break e;Kt--,Ft+=qe[_t++]<<xr,xr+=8}if(te.wrap&2&&Ft===35615){te.wbits===0&&(te.wbits=15),te.check=0,Ls[0]=Ft&255,Ls[1]=Ft>>>8&255,te.check=ei(te.check,Ls,2,0),Ft=0,xr=0,te.mode=Ja;break}if(te.head&&(te.head.done=!1),!(te.wrap&1)||(((Ft&255)<<8)+(Ft>>8))%31){O.msg="incorrect header check",te.mode=Fi;break}if((Ft&15)!==fa){O.msg="unknown compression method",te.mode=Fi;break}if(Ft>>>=4,xr-=4,ji=(Ft&15)+8,te.wbits===0&&(te.wbits=ji),ji>15||ji>te.wbits){O.msg="invalid window size",te.mode=Fi;break}te.dmax=1<<te.wbits,te.flags=0,O.adler=te.check=1,te.mode=Ft&512?bd:Vl,Ft=0,xr=0;break;case Ja:for(;xr<16;){if(Kt===0)break e;Kt--,Ft+=qe[_t++]<<xr,xr+=8}if(te.flags=Ft,(te.flags&255)!==fa){O.msg="unknown compression method",te.mode=Fi;break}if(te.flags&57344){O.msg="unknown header flags set",te.mode=Fi;break}te.head&&(te.head.text=Ft>>8&1),te.flags&512&&te.wrap&4&&(Ls[0]=Ft&255,Ls[1]=Ft>>>8&255,te.check=ei(te.check,Ls,2,0)),Ft=0,xr=0,te.mode=Hc;case Hc:for(;xr<32;){if(Kt===0)break e;Kt--,Ft+=qe[_t++]<<xr,xr+=8}te.head&&(te.head.time=Ft),te.flags&512&&te.wrap&4&&(Ls[0]=Ft&255,Ls[1]=Ft>>>8&255,Ls[2]=Ft>>>16&255,Ls[3]=Ft>>>24&255,te.check=ei(te.check,Ls,4,0)),Ft=0,xr=0,te.mode=To;case To:for(;xr<16;){if(Kt===0)break e;Kt--,Ft+=qe[_t++]<<xr,xr+=8}te.head&&(te.head.xflags=Ft&255,te.head.os=Ft>>8),te.flags&512&&te.wrap&4&&(Ls[0]=Ft&255,Ls[1]=Ft>>>8&255,te.check=ei(te.check,Ls,2,0)),Ft=0,xr=0,te.mode=Ac;case Ac:if(te.flags&1024){for(;xr<16;){if(Kt===0)break e;Kt--,Ft+=qe[_t++]<<xr,xr+=8}te.length=Ft,te.head&&(te.head.extra_len=Ft),te.flags&512&&te.wrap&4&&(Ls[0]=Ft&255,Ls[1]=Ft>>>8&255,te.check=ei(te.check,Ls,2,0)),Ft=0,xr=0}else te.head&&(te.head.extra=null);te.mode=Ga;case Ga:if(te.flags&1024&&(an=te.length,an>Kt&&(an=Kt),an&&(te.head&&(ji=te.head.extra_len-te.length,te.head.extra||(te.head.extra=new Uint8Array(te.head.extra_len)),te.head.extra.set(qe.subarray(_t,_t+an),ji)),te.flags&512&&te.wrap&4&&(te.check=ei(te.check,qe,an,_t)),Kt-=an,_t+=an,te.length-=an),te.length))break e;te.length=0,te.mode=Ql;case Ql:if(te.flags&2048){if(Kt===0)break e;an=0;do ji=qe[_t+an++],te.head&&ji&&te.length<65536&&(te.head.name+=String.fromCharCode(ji));while(ji&&an<Kt);if(te.flags&512&&te.wrap&4&&(te.check=ei(te.check,qe,an,_t)),Kt-=an,_t+=an,ji)break e}else te.head&&(te.head.name=null);te.length=0,te.mode=zl;case zl:if(te.flags&4096){if(Kt===0)break e;an=0;do ji=qe[_t+an++],te.head&&ji&&te.length<65536&&(te.head.comment+=String.fromCharCode(ji));while(ji&&an<Kt);if(te.flags&512&&te.wrap&4&&(te.check=ei(te.check,qe,an,_t)),Kt-=an,_t+=an,ji)break e}else te.head&&(te.head.comment=null);te.mode=Il;case Il:if(te.flags&512){for(;xr<16;){if(Kt===0)break e;Kt--,Ft+=qe[_t++]<<xr,xr+=8}if(te.wrap&4&&Ft!==(te.check&65535)){O.msg="header crc mismatch",te.mode=Fi;break}Ft=0,xr=0}te.head&&(te.head.hcrc=te.flags>>9&1,te.head.done=!0),O.adler=te.check=0,te.mode=Vl;break;case bd:for(;xr<32;){if(Kt===0)break e;Kt--,Ft+=qe[_t++]<<xr,xr+=8}O.adler=te.check=su(Ft),Ft=0,xr=0,te.mode=tc;case tc:if(te.havedict===0)return O.next_out=yr,O.avail_out=Un,O.next_in=_t,O.avail_in=Kt,te.hold=Ft,te.bits=xr,wi;O.adler=te.check=1,te.mode=Vl;case Vl:if(Oe===_u||Oe===so)break e;case pc:if(te.last){Ft>>>=xr&7,xr-=xr&7,te.mode=yl;break}for(;xr<3;){if(Kt===0)break e;Kt--,Ft+=qe[_t++]<<xr,xr+=8}switch(te.last=Ft&1,Ft>>>=1,xr-=1,Ft&3){case 0:te.mode=wd;break;case 1:if(bn(te),te.mode=vl,Oe===so){Ft>>>=2,xr-=2;break e}break;case 2:te.mode=Eu;break;case 3:O.msg="invalid block type",te.mode=Fi}Ft>>>=2,xr-=2;break;case wd:for(Ft>>>=xr&7,xr-=xr&7;xr<32;){if(Kt===0)break e;Kt--,Ft+=qe[_t++]<<xr,xr+=8}if((Ft&65535)!==(Ft>>>16^65535)){O.msg="invalid stored block lengths",te.mode=Fi;break}if(te.length=Ft&65535,Ft=0,xr=0,te.mode=Kl,Oe===so)break e;case Kl:te.mode=Gl;case Gl:if(an=te.length,an){if(an>Kt&&(an=Kt),an>Un&&(an=Un),an===0)break e;Et.set(qe.subarray(_t,_t+an),yr),Kt-=an,_t+=an,Un-=an,yr+=an,te.length-=an;break}te.mode=Vl;break;case Eu:for(;xr<14;){if(Kt===0)break e;Kt--,Ft+=qe[_t++]<<xr,xr+=8}if(te.nlen=(Ft&31)+257,Ft>>>=5,xr-=5,te.ndist=(Ft&31)+1,Ft>>>=5,xr-=5,te.ncode=(Ft&15)+4,Ft>>>=4,xr-=4,te.nlen>286||te.ndist>30){O.msg="too many length or distance symbols",te.mode=Fi;break}te.have=0,te.mode=Wl;case Wl:for(;te.have<te.ncode;){for(;xr<3;){if(Kt===0)break e;Kt--,Ft+=qe[_t++]<<xr,xr+=8}te.lens[nc[te.have++]]=Ft&7,Ft>>>=3,xr-=3}for(;te.have<19;)te.lens[nc[te.have++]]=0;if(te.lencode=te.lendyn,te.lenbits=7,ni={bits:te.lenbits},ia=ai(ha,te.lens,0,19,te.lencode,0,te.work,ni),te.lenbits=ni.bits,ia){O.msg="invalid code lengths set",te.mode=Fi;break}te.have=0,te.mode=Io;case Io:for(;te.have<te.nlen+te.ndist;){for(;Wi=te.lencode[Ft&(1<<te.lenbits)-1],ki=Wi>>>24,zi=Wi>>>16&255,xs=Wi&65535,!(ki<=xr);){if(Kt===0)break e;Kt--,Ft+=qe[_t++]<<xr,xr+=8}if(xs<16)Ft>>>=ki,xr-=ki,te.lens[te.have++]=xs;else{if(xs===16){for($i=ki+2;xr<$i;){if(Kt===0)break e;Kt--,Ft+=qe[_t++]<<xr,xr+=8}if(Ft>>>=ki,xr-=ki,te.have===0){O.msg="invalid bit length repeat",te.mode=Fi;break}ji=te.lens[te.have-1],an=3+(Ft&3),Ft>>>=2,xr-=2}else if(xs===17){for($i=ki+3;xr<$i;){if(Kt===0)break e;Kt--,Ft+=qe[_t++]<<xr,xr+=8}Ft>>>=ki,xr-=ki,ji=0,an=3+(Ft&7),Ft>>>=3,xr-=3}else{for($i=ki+7;xr<$i;){if(Kt===0)break e;Kt--,Ft+=qe[_t++]<<xr,xr+=8}Ft>>>=ki,xr-=ki,ji=0,an=11+(Ft&127),Ft>>>=7,xr-=7}if(te.have+an>te.nlen+te.ndist){O.msg="invalid bit length repeat",te.mode=Fi;break}for(;an--;)te.lens[te.have++]=ji}}if(te.mode===Fi)break;if(te.lens[256]===0){O.msg="invalid code -- missing end-of-block",te.mode=Fi;break}if(te.lenbits=9,ni={bits:te.lenbits},ia=ai(Ii,te.lens,0,te.nlen,te.lencode,0,te.work,ni),te.lenbits=ni.bits,ia){O.msg="invalid literal/lengths set",te.mode=Fi;break}if(te.distbits=6,te.distcode=te.distdyn,ni={bits:te.distbits},ia=ai(_n,te.lens,te.nlen,te.ndist,te.distcode,0,te.work,ni),te.distbits=ni.bits,ia){O.msg="invalid distances set",te.mode=Fi;break}if(te.mode=vl,Oe===so)break e;case vl:te.mode=iu;case iu:if(Kt>=6&&Un>=258){O.next_out=yr,O.avail_out=Un,O.next_in=_t,O.avail_in=Kt,te.hold=Ft,te.bits=xr,Si(O,Ln),yr=O.next_out,Et=O.output,Un=O.avail_out,_t=O.next_in,qe=O.input,Kt=O.avail_in,Ft=te.hold,xr=te.bits,te.mode===Vl&&(te.back=-1);break}for(te.back=0;Wi=te.lencode[Ft&(1<<te.lenbits)-1],ki=Wi>>>24,zi=Wi>>>16&255,xs=Wi&65535,!(ki<=xr);){if(Kt===0)break e;Kt--,Ft+=qe[_t++]<<xr,xr+=8}if(zi&&(zi&240)===0){for(En=ki,bs=zi,$a=xs;Wi=te.lencode[$a+((Ft&(1<<En+bs)-1)>>En)],ki=Wi>>>24,zi=Wi>>>16&255,xs=Wi&65535,!(En+ki<=xr);){if(Kt===0)break e;Kt--,Ft+=qe[_t++]<<xr,xr+=8}Ft>>>=En,xr-=En,te.back+=En}if(Ft>>>=ki,xr-=ki,te.back+=ki,te.length=xs,zi===0){te.mode=_d;break}if(zi&32){te.back=-1,te.mode=Vl;break}if(zi&64){O.msg="invalid literal/length code",te.mode=Fi;break}te.extra=zi&15,te.mode=gc;case gc:if(te.extra){for($i=te.extra;xr<$i;){if(Kt===0)break e;Kt--,Ft+=qe[_t++]<<xr,xr+=8}te.length+=Ft&(1<<te.extra)-1,Ft>>>=te.extra,xr-=te.extra,te.back+=te.extra}te.was=te.length,te.mode=zd;case zd:for(;Wi=te.distcode[Ft&(1<<te.distbits)-1],ki=Wi>>>24,zi=Wi>>>16&255,xs=Wi&65535,!(ki<=xr);){if(Kt===0)break e;Kt--,Ft+=qe[_t++]<<xr,xr+=8}if((zi&240)===0){for(En=ki,bs=zi,$a=xs;Wi=te.distcode[$a+((Ft&(1<<En+bs)-1)>>En)],ki=Wi>>>24,zi=Wi>>>16&255,xs=Wi&65535,!(En+ki<=xr);){if(Kt===0)break e;Kt--,Ft+=qe[_t++]<<xr,xr+=8}Ft>>>=En,xr-=En,te.back+=En}if(Ft>>>=ki,xr-=ki,te.back+=ki,zi&64){O.msg="invalid distance code",te.mode=Fi;break}te.offset=xs,te.extra=zi&15,te.mode=rc;case rc:if(te.extra){for($i=te.extra;xr<$i;){if(Kt===0)break e;Kt--,Ft+=qe[_t++]<<xr,xr+=8}te.offset+=Ft&(1<<te.extra)-1,Ft>>>=te.extra,xr-=te.extra,te.back+=te.extra}if(te.offset>te.dmax){O.msg="invalid distance too far back",te.mode=Fi;break}te.mode=Yu;case Yu:if(Un===0)break e;if(an=Ln-Un,te.offset>an){if(an=te.offset-an,an>te.whave&&te.sane){O.msg="invalid distance too far back",te.mode=Fi;break}an>te.wnext?(an-=te.wnext,Mr=te.wsize-an):Mr=te.wnext-an,an>te.length&&(an=te.length),Ua=te.window}else Ua=Et,Mr=yr-te.offset,an=te.length;an>Un&&(an=Un),Un-=an,te.length-=an;do Et[yr++]=Ua[Mr++];while(--an);te.length===0&&(te.mode=iu);break;case _d:if(Un===0)break e;Et[yr++]=te.length,Un--,te.mode=iu;break;case yl:if(te.wrap){for(;xr<32;){if(Kt===0)break e;Kt--,Ft|=qe[_t++]<<xr,xr+=8}if(Ln-=Un,O.total_out+=Ln,te.total+=Ln,te.wrap&4&&Ln&&(O.adler=te.check=te.flags?ei(te.check,Et,Ln,yr-Ln):li(te.check,Et,Ln,yr-Ln)),Ln=Un,te.wrap&4&&(te.flags?Ft:su(Ft))!==te.check){O.msg="incorrect data check",te.mode=Fi;break}Ft=0,xr=0}te.mode=oh;case oh:if(te.wrap&&te.flags){for(;xr<32;){if(Kt===0)break e;Kt--,Ft+=qe[_t++]<<xr,xr+=8}if(te.wrap&4&&Ft!==(te.total&4294967295)){O.msg="incorrect length check",te.mode=Fi;break}Ft=0,xr=0}te.mode=Bl;case Bl:ia=ec;break e;case Fi:ia=Za;break e;case vc:return $l;case Qc:default:return Da}return O.next_out=yr,O.avail_out=Un,O.next_in=_t,O.avail_in=Kt,te.hold=Ft,te.bits=xr,(te.wsize||Ln!==O.avail_out&&te.mode<Fi&&(te.mode<yl||Oe!==cs))&&ui(O,O.output,O.next_out,Ln-O.avail_out),qi-=O.avail_in,Ln-=O.avail_out,O.total_in+=qi,O.total_out+=Ln,te.total+=Ln,te.wrap&4&&Ln&&(O.adler=te.check=te.flags?ei(te.check,Et,Ln,O.next_out-Ln):li(te.check,Et,Ln,O.next_out-Ln)),O.data_type=te.bits+(te.last?64:0)+(te.mode===Vl?128:0)+(te.mode===vl||te.mode===Kl?256:0),(qi===0&&Ln===0||Oe===cs)&&ia===Ko&&(ia=Hl),ia},Ma=O=>{if(S(O))return Da;let Oe=O.state;return Oe.window&&(Oe.window=null),O.state=null,Ko},Co=(O,Oe)=>{if(S(O))return Da;const te=O.state;return(te.wrap&2)===0?Da:(te.head=Oe,Oe.done=!1,Ko)},il=(O,Oe)=>{const te=Oe.length;let qe,Et,_t;return S(O)||(qe=O.state,qe.wrap!==0&&qe.mode!==tc)?Da:qe.mode===tc&&(Et=1,Et=li(Et,Oe,te,0),Et!==qe.check)?Za:(_t=ui(O,Oe,te,te),_t?(qe.mode=vc,$l):(qe.havedict=1,Ko))};var Zs=le,ca=_e,kn=Q,Xu=kt,xc=Ke,Ed=As,Yl=Ma,Su=Co,ao=il,ju="pako inflate (from Nodeca project)",Go={inflateReset:Zs,inflateReset2:ca,inflateResetKeep:kn,inflateInit:Xu,inflateInit2:xc,inflate:Ed,inflateEnd:Yl,inflateGetHeader:Su,inflateSetDictionary:ao,inflateInfo:ju};function Sd(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var bc=Sd;const Vd=Object.prototype.toString,{Z_NO_FLUSH:ql,Z_FINISH:Tu,Z_OK:wc,Z_STREAM_END:Vc,Z_NEED_DICT:Sh,Z_STREAM_ERROR:au,Z_DATA_ERROR:jd,Z_MEM_ERROR:lh}=as;function Kc(O){this.options=Rr.assign({chunkSize:65536,windowBits:15,to:""},O||{});const Oe=this.options;Oe.raw&&Oe.windowBits>=0&&Oe.windowBits<16&&(Oe.windowBits=-Oe.windowBits,Oe.windowBits===0&&(Oe.windowBits=-15)),Oe.windowBits>=0&&Oe.windowBits<16&&!(O&&O.windowBits)&&(Oe.windowBits+=32),Oe.windowBits>15&&Oe.windowBits<48&&(Oe.windowBits&15)===0&&(Oe.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Xt,this.strm.avail_out=0;let te=Go.inflateInit2(this.strm,Oe.windowBits);if(te!==wc)throw new Error(un[te]);if(this.header=new bc,Go.inflateGetHeader(this.strm,this.header),Oe.dictionary&&(typeof Oe.dictionary=="string"?Oe.dictionary=Lt.string2buf(Oe.dictionary):Vd.call(Oe.dictionary)==="[object ArrayBuffer]"&&(Oe.dictionary=new Uint8Array(Oe.dictionary)),Oe.raw&&(te=Go.inflateSetDictionary(this.strm,Oe.dictionary),te!==wc)))throw new Error(un[te])}Kc.prototype.push=function(O,Oe){const te=this.strm,qe=this.options.chunkSize,Et=this.options.dictionary;let _t,yr,Kt;if(this.ended)return!1;for(Oe===~~Oe?yr=Oe:yr=Oe===!0?Tu:ql,Vd.call(O)==="[object ArrayBuffer]"?te.input=new Uint8Array(O):te.input=O,te.next_in=0,te.avail_in=te.input.length;;){for(te.avail_out===0&&(te.output=new Uint8Array(qe),te.next_out=0,te.avail_out=qe),_t=Go.inflate(te,yr),_t===Sh&&Et&&(_t=Go.inflateSetDictionary(te,Et),_t===wc?_t=Go.inflate(te,yr):_t===jd&&(_t=Sh));te.avail_in>0&&_t===Vc&&te.state.wrap>0&&O[te.next_in]!==0;)Go.inflateReset(te),_t=Go.inflate(te,yr);switch(_t){case au:case jd:case Sh:case lh:return this.onEnd(_t),this.ended=!0,!1}if(Kt=te.avail_out,te.next_out&&(te.avail_out===0||_t===Vc))if(this.options.to==="string"){let Un=Lt.utf8border(te.output,te.next_out),Ft=te.next_out-Un,xr=Lt.buf2string(te.output,Un);te.next_out=Ft,te.avail_out=qe-Ft,Ft&&te.output.set(te.output.subarray(Un,Un+Ft),0),this.onData(xr)}else this.onData(te.output.length===te.next_out?te.output:te.output.subarray(0,te.next_out));if(!(_t===wc&&Kt===0)){if(_t===Vc)return _t=Go.inflateEnd(this.strm),this.onEnd(_t),this.ended=!0,!0;if(te.avail_in===0)break}}return!0},Kc.prototype.onData=function(O){this.chunks.push(O)},Kc.prototype.onEnd=function(O){O===wc&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Rr.flattenChunks(this.chunks)),this.chunks=[],this.err=O,this.msg=this.strm.msg};function xo(O,Oe){const te=new Kc(Oe);if(te.push(O),te.err)throw te.msg||un[te.err];return te.result}function jh(O,Oe){return Oe=Oe||{},Oe.raw=!0,xo(O,Oe)}var hm=Kc,Wm=xo,ch=jh,uh=xo,Po={Inflate:hm,inflate:Wm,inflateRaw:ch,ungzip:uh};const{Deflate:dh,deflate:Th,deflateRaw:he,gzip:Me}=Di,{Inflate:wt,inflate:Bt,inflateRaw:rr,ungzip:zr}=Po;var nn=dh,ti=Th,ri=he,Yi=Me,os=wt,na=Bt,Fa=rr,Oo=zr,ka=as,Wo={Deflate:nn,deflate:ti,deflateRaw:ri,gzip:Yi,Inflate:os,inflate:na,inflateRaw:Fa,ungzip:Oo,constants:ka}}),"./node_modules/performance-now/lib/performance-now.js":(function(c){(function(){var u,l,d,f,m,p;typeof performance<"u"&&performance!==null&&performance.now?c.exports=function(){return performance.now()}:typeof process<"u"&&process!==null&&process.hrtime?(c.exports=function(){return(u()-m)/1e6},l=process.hrtime,u=function(){var g;return g=l(),g[0]*1e9+g[1]},f=u(),p=process.uptime()*1e9,m=f-p):Date.now?(c.exports=function(){return Date.now()-d},d=Date.now()):(c.exports=function(){return new Date().getTime()-d},d=new Date().getTime())}).call(this)}),"./node_modules/raf/index.js":(function(c,u,l){for(var d=l("./node_modules/performance-now/lib/performance-now.js"),f=typeof window>"u"?W1:window,m=["moz","webkit"],p="AnimationFrame",g=f["request"+p],y=f["cancel"+p]||f["cancelRequest"+p],x=0;!g&&x<m.length;x++)g=f[m[x]+"Request"+p],y=f[m[x]+"Cancel"+p]||f[m[x]+"CancelRequest"+p];if(!g||!y){var w=0,_=0,E=[],N=1e3/60;g=function(C){if(E.length===0){var I=d(),D=Math.max(0,N-(I-w));w=D+I,setTimeout(function(){var U=E.slice(0);E.length=0;for(var G=0;G<U.length;G++)if(!U[G].cancelled)try{U[G].callback(w)}catch(q){setTimeout(function(){throw q},0)}},Math.round(D))}return E.push({handle:++_,callback:C,cancelled:!1}),_},y=function(C){for(var I=0;I<E.length;I++)E[I].handle===C&&(E[I].cancelled=!0)}}c.exports=function(C){return g.call(f,C)},c.exports.cancel=function(){y.apply(f,arguments)},c.exports.polyfill=function(C){C||(C=f),C.requestAnimationFrame=g,C.cancelAnimationFrame=y}}),"./node_modules/rgbcolor/index.js":(function(c){c.exports=function(u){this.ok=!1,this.alpha=1,u.charAt(0)=="#"&&(u=u.substr(1,6)),u=u.replace(/ /g,""),u=u.toLowerCase();var l={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};u=l[u]||u;for(var d=[{re:/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*((?:\d?\.)?\d)\)$/,example:["rgba(123, 234, 45, 0.8)","rgba(255,234,245,1.0)"],process:function(x){return[parseInt(x[1]),parseInt(x[2]),parseInt(x[3]),parseFloat(x[4])]}},{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(x){return[parseInt(x[1]),parseInt(x[2]),parseInt(x[3])]}},{re:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,example:["#00ff00","336699"],process:function(x){return[parseInt(x[1],16),parseInt(x[2],16),parseInt(x[3],16)]}},{re:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,example:["#fb0","f0f"],process:function(x){return[parseInt(x[1]+x[1],16),parseInt(x[2]+x[2],16),parseInt(x[3]+x[3],16)]}}],f=0;f<d.length;f++){var m=d[f].re,p=d[f].process,g=m.exec(u);if(g){var y=p(g);this.r=y[0],this.g=y[1],this.b=y[2],y.length>3&&(this.alpha=y[3]),this.ok=!0}}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.alpha=this.alpha<0?0:this.alpha>1||isNaN(this.alpha)?1:this.alpha,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toRGBA=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.alpha+")"},this.toHex=function(){var x=this.r.toString(16),w=this.g.toString(16),_=this.b.toString(16);return x.length==1&&(x="0"+x),w.length==1&&(w="0"+w),_.length==1&&(_="0"+_),"#"+x+w+_},this.getHelpXML=function(){for(var x=new Array,w=0;w<d.length;w++)for(var _=d[w].example,E=0;E<_.length;E++)x[x.length]=_[E];for(var N in l)x[x.length]=N;var C=document.createElement("ul");C.setAttribute("id","rgbcolor-examples");for(var w=0;w<x.length;w++)try{var I=document.createElement("li"),D=new RGBColor(x[w]),U=document.createElement("div");U.style.cssText="margin: 3px; border: 1px solid black; background:"+D.toHex()+"; color:"+D.toHex(),U.appendChild(document.createTextNode("test"));var G=document.createTextNode(" "+x[w]+" -> "+D.toRGB()+" -> "+D.toHex());I.appendChild(U),I.appendChild(G),C.appendChild(I)}catch{}return C}}}),"./node_modules/stackblur-canvas/dist/stackblur-es.js":(function(c,u,l){l.r(u),l.d(u,{BlurStack:function(){return N},canvasRGB:function(){return _},canvasRGBA:function(){return x},image:function(){return g},imageDataRGB:function(){return E},imageDataRGBA:function(){return w}});function d(C){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?d=function(I){return typeof I}:d=function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I},d(C)}function f(C,I){if(!(C instanceof I))throw new TypeError("Cannot call a class as a function")}var m=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],p=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function g(C,I,D,U,G,q){if(typeof C=="string"&&(C=document.getElementById(C)),!(!C||Object.prototype.toString.call(C).slice(8,-1)==="HTMLImageElement"&&!("naturalWidth"in C))){var J=G?"offset":"natural",de=C[J+"Width"],xe=C[J+"Height"];if(Object.prototype.toString.call(C).slice(8,-1)==="ImageBitmap"&&(de=C.width,xe=C.height),typeof I=="string"&&(I=document.getElementById(I)),!(!I||!("getContext"in I))){q||(I.style.width=de+"px",I.style.height=xe+"px"),I.width=de,I.height=xe;var we=I.getContext("2d");we.clearRect(0,0,de,xe),we.drawImage(C,0,0,C.naturalWidth,C.naturalHeight,0,0,de,xe),!(isNaN(D)||D<1)&&(U?x(I,0,0,de,xe,D):_(I,0,0,de,xe,D))}}}function y(C,I,D,U,G){if(typeof C=="string"&&(C=document.getElementById(C)),!C||d(C)!=="object"||!("getContext"in C))throw new TypeError("Expecting canvas with `getContext` method in processCanvasRGB(A) calls!");var q=C.getContext("2d");try{return q.getImageData(I,D,U,G)}catch(J){throw new Error("unable to access image data: "+J)}}function x(C,I,D,U,G,q){if(!(isNaN(q)||q<1)){q|=0;var J=y(C,I,D,U,G);J=w(J,I,D,U,G,q),C.getContext("2d").putImageData(J,I,D)}}function w(C,I,D,U,G,q){for(var J=C.data,de=2*q+1,xe=U-1,we=G-1,ve=q+1,ne=ve*(ve+1)/2,ae=new N,oe=ae,Ie,Ce=1;Ce<de;Ce++)oe=oe.next=new N,Ce===ve&&(Ie=oe);oe.next=ae;for(var be=null,ue=null,Pe=0,Re=0,He=m[q],Fe=p[q],ft=0;ft<G;ft++){oe=ae;for(var at=J[Re],De=J[Re+1],ut=J[Re+2],et=J[Re+3],Ue=0;Ue<ve;Ue++)oe.r=at,oe.g=De,oe.b=ut,oe.a=et,oe=oe.next;for(var jt=0,rt=0,Ct=0,ke=0,Xe=ve*at,mt=ve*De,Jt=ve*ut,tr=ve*et,lr=ne*at,Pr=ne*De,tn=ne*ut,Gr=ne*et,Xr=1;Xr<ve;Xr++){var Qr=Re+((xe<Xr?xe:Xr)<<2),Pn=J[Qr],wn=J[Qr+1],yi=J[Qr+2],ot=J[Qr+3],Gt=ve-Xr;lr+=(oe.r=Pn)*Gt,Pr+=(oe.g=wn)*Gt,tn+=(oe.b=yi)*Gt,Gr+=(oe.a=ot)*Gt,jt+=Pn,rt+=wn,Ct+=yi,ke+=ot,oe=oe.next}be=ae,ue=Ie;for(var Ir=0;Ir<U;Ir++){var ar=Gr*He>>>Fe;if(J[Re+3]=ar,ar!==0){var Qt=255/ar;J[Re]=(lr*He>>>Fe)*Qt,J[Re+1]=(Pr*He>>>Fe)*Qt,J[Re+2]=(tn*He>>>Fe)*Qt}else J[Re]=J[Re+1]=J[Re+2]=0;lr-=Xe,Pr-=mt,tn-=Jt,Gr-=tr,Xe-=be.r,mt-=be.g,Jt-=be.b,tr-=be.a;var gr=Ir+q+1;gr=Pe+(gr<xe?gr:xe)<<2,jt+=be.r=J[gr],rt+=be.g=J[gr+1],Ct+=be.b=J[gr+2],ke+=be.a=J[gr+3],lr+=jt,Pr+=rt,tn+=Ct,Gr+=ke,be=be.next;var Yr=ue,en=Yr.r,On=Yr.g,fn=Yr.b,Jn=Yr.a;Xe+=en,mt+=On,Jt+=fn,tr+=Jn,jt-=en,rt-=On,Ct-=fn,ke-=Jn,ue=ue.next,Re+=4}Pe+=U}for(var ln=0;ln<U;ln++){Re=ln<<2;var Hr=J[Re],yn=J[Re+1],mn=J[Re+2],Mn=J[Re+3],li=ve*Hr,Cs=ve*yn,Ms=ve*mn,Ns=ve*Mn,ei=ne*Hr,un=ne*yn,as=ne*mn,ta=ne*Mn;oe=ae;for(var jn=0;jn<ve;jn++)oe.r=Hr,oe.g=yn,oe.b=mn,oe.a=Mn,oe=oe.next;for(var Nn=U,Fs=0,Qs=0,Us=0,ns=0,qs=1;qs<=q;qs++){Re=Nn+ln<<2;var Rs=ve-qs;ei+=(oe.r=Hr=J[Re])*Rs,un+=(oe.g=yn=J[Re+1])*Rs,as+=(oe.b=mn=J[Re+2])*Rs,ta+=(oe.a=Mn=J[Re+3])*Rs,ns+=Hr,Fs+=yn,Qs+=mn,Us+=Mn,oe=oe.next,qs<we&&(Nn+=U)}Re=ln,be=ae,ue=Ie;for(var za=0;za<G;za++){var hs=Re<<2;J[hs+3]=Mn=ta*He>>>Fe,Mn>0?(Mn=255/Mn,J[hs]=(ei*He>>>Fe)*Mn,J[hs+1]=(un*He>>>Fe)*Mn,J[hs+2]=(as*He>>>Fe)*Mn):J[hs]=J[hs+1]=J[hs+2]=0,ei-=li,un-=Cs,as-=Ms,ta-=Ns,li-=be.r,Cs-=be.g,Ms-=be.b,Ns-=be.a,hs=ln+((hs=za+ve)<we?hs:we)*U<<2,ei+=ns+=be.r=J[hs],un+=Fs+=be.g=J[hs+1],as+=Qs+=be.b=J[hs+2],ta+=Us+=be.a=J[hs+3],be=be.next,li+=Hr=ue.r,Cs+=yn=ue.g,Ms+=mn=ue.b,Ns+=Mn=ue.a,ns-=Hr,Fs-=yn,Qs-=mn,Us-=Mn,ue=ue.next,Re+=U}}return C}function _(C,I,D,U,G,q){if(!(isNaN(q)||q<1)){q|=0;var J=y(C,I,D,U,G);J=E(J,I,D,U,G,q),C.getContext("2d").putImageData(J,I,D)}}function E(C,I,D,U,G,q){for(var J=C.data,de=2*q+1,xe=U-1,we=G-1,ve=q+1,ne=ve*(ve+1)/2,ae=new N,oe=ae,Ie,Ce=1;Ce<de;Ce++)oe=oe.next=new N,Ce===ve&&(Ie=oe);oe.next=ae;for(var be=null,ue=null,Pe=m[q],Re=p[q],He,Fe,ft=0,at=0,De=0;De<G;De++){var ut=J[at],et=J[at+1],Ue=J[at+2],jt=ve*ut,rt=ve*et,Ct=ve*Ue,ke=ne*ut,Xe=ne*et,mt=ne*Ue;oe=ae;for(var Jt=0;Jt<ve;Jt++)oe.r=ut,oe.g=et,oe.b=Ue,oe=oe.next;for(var tr=0,lr=0,Pr=0,tn=1;tn<ve;tn++)He=at+((xe<tn?xe:tn)<<2),ke+=(oe.r=ut=J[He])*(Fe=ve-tn),Xe+=(oe.g=et=J[He+1])*Fe,mt+=(oe.b=Ue=J[He+2])*Fe,tr+=ut,lr+=et,Pr+=Ue,oe=oe.next;be=ae,ue=Ie;for(var Gr=0;Gr<U;Gr++)J[at]=ke*Pe>>>Re,J[at+1]=Xe*Pe>>>Re,J[at+2]=mt*Pe>>>Re,ke-=jt,Xe-=rt,mt-=Ct,jt-=be.r,rt-=be.g,Ct-=be.b,He=ft+((He=Gr+q+1)<xe?He:xe)<<2,tr+=be.r=J[He],lr+=be.g=J[He+1],Pr+=be.b=J[He+2],ke+=tr,Xe+=lr,mt+=Pr,be=be.next,jt+=ut=ue.r,rt+=et=ue.g,Ct+=Ue=ue.b,tr-=ut,lr-=et,Pr-=Ue,ue=ue.next,at+=4;ft+=U}for(var Xr=0;Xr<U;Xr++){at=Xr<<2;var Qr=J[at],Pn=J[at+1],wn=J[at+2],yi=ve*Qr,ot=ve*Pn,Gt=ve*wn,Ir=ne*Qr,ar=ne*Pn,Qt=ne*wn;oe=ae;for(var gr=0;gr<ve;gr++)oe.r=Qr,oe.g=Pn,oe.b=wn,oe=oe.next;for(var Yr=0,en=0,On=0,fn=1,Jn=U;fn<=q;fn++)at=Jn+Xr<<2,Ir+=(oe.r=Qr=J[at])*(Fe=ve-fn),ar+=(oe.g=Pn=J[at+1])*Fe,Qt+=(oe.b=wn=J[at+2])*Fe,Yr+=Qr,en+=Pn,On+=wn,oe=oe.next,fn<we&&(Jn+=U);at=Xr,be=ae,ue=Ie;for(var ln=0;ln<G;ln++)He=at<<2,J[He]=Ir*Pe>>>Re,J[He+1]=ar*Pe>>>Re,J[He+2]=Qt*Pe>>>Re,Ir-=yi,ar-=ot,Qt-=Gt,yi-=be.r,ot-=be.g,Gt-=be.b,He=Xr+((He=ln+ve)<we?He:we)*U<<2,Ir+=Yr+=be.r=J[He],ar+=en+=be.g=J[He+1],Qt+=On+=be.b=J[He+2],be=be.next,yi+=Qr=ue.r,ot+=Pn=ue.g,Gt+=wn=ue.b,Yr-=Qr,en-=Pn,On-=wn,ue=ue.next,at+=U}return C}var N=function C(){f(this,C),this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}}),"./node_modules/svg-pathdata/lib/SVGPathData.module.js":(function(c,u,l){l.r(u),l.d(u,{COMMAND_ARG_COUNTS:function(){return we},SVGPathData:function(){return xe},SVGPathDataParser:function(){return de},SVGPathDataTransformer:function(){return _},encodeSVGPath:function(){return m}});var d=function(ve,ne){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ae,oe){ae.__proto__=oe}||function(ae,oe){for(var Ie in oe)Object.prototype.hasOwnProperty.call(oe,Ie)&&(ae[Ie]=oe[Ie])})(ve,ne)};function f(ve,ne){if(typeof ne!="function"&&ne!==null)throw new TypeError("Class extends value "+String(ne)+" is not a constructor or null");function ae(){this.constructor=ve}d(ve,ne),ve.prototype=ne===null?Object.create(ne):(ae.prototype=ne.prototype,new ae)}function m(ve){var ne="";Array.isArray(ve)||(ve=[ve]);for(var ae=0;ae<ve.length;ae++){var oe=ve[ae];if(oe.type===xe.CLOSE_PATH)ne+="z";else if(oe.type===xe.HORIZ_LINE_TO)ne+=(oe.relative?"h":"H")+oe.x;else if(oe.type===xe.VERT_LINE_TO)ne+=(oe.relative?"v":"V")+oe.y;else if(oe.type===xe.MOVE_TO)ne+=(oe.relative?"m":"M")+oe.x+" "+oe.y;else if(oe.type===xe.LINE_TO)ne+=(oe.relative?"l":"L")+oe.x+" "+oe.y;else if(oe.type===xe.CURVE_TO)ne+=(oe.relative?"c":"C")+oe.x1+" "+oe.y1+" "+oe.x2+" "+oe.y2+" "+oe.x+" "+oe.y;else if(oe.type===xe.SMOOTH_CURVE_TO)ne+=(oe.relative?"s":"S")+oe.x2+" "+oe.y2+" "+oe.x+" "+oe.y;else if(oe.type===xe.QUAD_TO)ne+=(oe.relative?"q":"Q")+oe.x1+" "+oe.y1+" "+oe.x+" "+oe.y;else if(oe.type===xe.SMOOTH_QUAD_TO)ne+=(oe.relative?"t":"T")+oe.x+" "+oe.y;else{if(oe.type!==xe.ARC)throw new Error('Unexpected command type "'+oe.type+'" at index '+ae+".");ne+=(oe.relative?"a":"A")+oe.rX+" "+oe.rY+" "+oe.xRot+" "+ +oe.lArcFlag+" "+ +oe.sweepFlag+" "+oe.x+" "+oe.y}}return ne}function p(ve,ne){var ae=ve[0],oe=ve[1];return[ae*Math.cos(ne)-oe*Math.sin(ne),ae*Math.sin(ne)+oe*Math.cos(ne)]}function g(){for(var ve=[],ne=0;ne<arguments.length;ne++)ve[ne]=arguments[ne];for(var ae=0;ae<ve.length;ae++)if(typeof ve[ae]!="number")throw new Error("assertNumbers arguments["+ae+"] is not a number. "+typeof ve[ae]+" == typeof "+ve[ae]);return!0}var y=Math.PI;function x(ve,ne,ae){ve.lArcFlag=ve.lArcFlag===0?0:1,ve.sweepFlag=ve.sweepFlag===0?0:1;var oe=ve.rX,Ie=ve.rY,Ce=ve.x,be=ve.y;oe=Math.abs(ve.rX),Ie=Math.abs(ve.rY);var ue=p([(ne-Ce)/2,(ae-be)/2],-ve.xRot/180*y),Pe=ue[0],Re=ue[1],He=Math.pow(Pe,2)/Math.pow(oe,2)+Math.pow(Re,2)/Math.pow(Ie,2);1<He&&(oe*=Math.sqrt(He),Ie*=Math.sqrt(He)),ve.rX=oe,ve.rY=Ie;var Fe=Math.pow(oe,2)*Math.pow(Re,2)+Math.pow(Ie,2)*Math.pow(Pe,2),ft=(ve.lArcFlag!==ve.sweepFlag?1:-1)*Math.sqrt(Math.max(0,(Math.pow(oe,2)*Math.pow(Ie,2)-Fe)/Fe)),at=oe*Re/Ie*ft,De=-Ie*Pe/oe*ft,ut=p([at,De],ve.xRot/180*y);ve.cX=ut[0]+(ne+Ce)/2,ve.cY=ut[1]+(ae+be)/2,ve.phi1=Math.atan2((Re-De)/Ie,(Pe-at)/oe),ve.phi2=Math.atan2((-Re-De)/Ie,(-Pe-at)/oe),ve.sweepFlag===0&&ve.phi2>ve.phi1&&(ve.phi2-=2*y),ve.sweepFlag===1&&ve.phi2<ve.phi1&&(ve.phi2+=2*y),ve.phi1*=180/y,ve.phi2*=180/y}function w(ve,ne,ae){g(ve,ne,ae);var oe=ve*ve+ne*ne-ae*ae;if(0>oe)return[];if(oe===0)return[[ve*ae/(ve*ve+ne*ne),ne*ae/(ve*ve+ne*ne)]];var Ie=Math.sqrt(oe);return[[(ve*ae+ne*Ie)/(ve*ve+ne*ne),(ne*ae-ve*Ie)/(ve*ve+ne*ne)],[(ve*ae-ne*Ie)/(ve*ve+ne*ne),(ne*ae+ve*Ie)/(ve*ve+ne*ne)]]}var _,E=Math.PI/180;function N(ve,ne,ae){return(1-ae)*ve+ae*ne}function C(ve,ne,ae,oe){return ve+Math.cos(oe/180*y)*ne+Math.sin(oe/180*y)*ae}function I(ve,ne,ae,oe){var Ie=1e-6,Ce=ne-ve,be=ae-ne,ue=3*Ce+3*(oe-ae)-6*be,Pe=6*(be-Ce),Re=3*Ce;return Math.abs(ue)<Ie?[-Re/Pe]:(function(He,Fe,ft){var at=He*He/4-Fe;if(at<-ft)return[];if(at<=ft)return[-He/2];var De=Math.sqrt(at);return[-He/2-De,-He/2+De]})(Pe/ue,Re/ue,Ie)}function D(ve,ne,ae,oe,Ie){var Ce=1-Ie;return ve*(Ce*Ce*Ce)+ne*(3*Ce*Ce*Ie)+ae*(3*Ce*Ie*Ie)+oe*(Ie*Ie*Ie)}(function(ve){function ne(){return Ie((function(ue,Pe,Re){return ue.relative&&(ue.x1!==void 0&&(ue.x1+=Pe),ue.y1!==void 0&&(ue.y1+=Re),ue.x2!==void 0&&(ue.x2+=Pe),ue.y2!==void 0&&(ue.y2+=Re),ue.x!==void 0&&(ue.x+=Pe),ue.y!==void 0&&(ue.y+=Re),ue.relative=!1),ue}))}function ae(){var ue=NaN,Pe=NaN,Re=NaN,He=NaN;return Ie((function(Fe,ft,at){return Fe.type&xe.SMOOTH_CURVE_TO&&(Fe.type=xe.CURVE_TO,ue=isNaN(ue)?ft:ue,Pe=isNaN(Pe)?at:Pe,Fe.x1=Fe.relative?ft-ue:2*ft-ue,Fe.y1=Fe.relative?at-Pe:2*at-Pe),Fe.type&xe.CURVE_TO?(ue=Fe.relative?ft+Fe.x2:Fe.x2,Pe=Fe.relative?at+Fe.y2:Fe.y2):(ue=NaN,Pe=NaN),Fe.type&xe.SMOOTH_QUAD_TO&&(Fe.type=xe.QUAD_TO,Re=isNaN(Re)?ft:Re,He=isNaN(He)?at:He,Fe.x1=Fe.relative?ft-Re:2*ft-Re,Fe.y1=Fe.relative?at-He:2*at-He),Fe.type&xe.QUAD_TO?(Re=Fe.relative?ft+Fe.x1:Fe.x1,He=Fe.relative?at+Fe.y1:Fe.y1):(Re=NaN,He=NaN),Fe}))}function oe(){var ue=NaN,Pe=NaN;return Ie((function(Re,He,Fe){if(Re.type&xe.SMOOTH_QUAD_TO&&(Re.type=xe.QUAD_TO,ue=isNaN(ue)?He:ue,Pe=isNaN(Pe)?Fe:Pe,Re.x1=Re.relative?He-ue:2*He-ue,Re.y1=Re.relative?Fe-Pe:2*Fe-Pe),Re.type&xe.QUAD_TO){ue=Re.relative?He+Re.x1:Re.x1,Pe=Re.relative?Fe+Re.y1:Re.y1;var ft=Re.x1,at=Re.y1;Re.type=xe.CURVE_TO,Re.x1=((Re.relative?0:He)+2*ft)/3,Re.y1=((Re.relative?0:Fe)+2*at)/3,Re.x2=(Re.x+2*ft)/3,Re.y2=(Re.y+2*at)/3}else ue=NaN,Pe=NaN;return Re}))}function Ie(ue){var Pe=0,Re=0,He=NaN,Fe=NaN;return function(ft){if(isNaN(He)&&!(ft.type&xe.MOVE_TO))throw new Error("path must start with moveto");var at=ue(ft,Pe,Re,He,Fe);return ft.type&xe.CLOSE_PATH&&(Pe=He,Re=Fe),ft.x!==void 0&&(Pe=ft.relative?Pe+ft.x:ft.x),ft.y!==void 0&&(Re=ft.relative?Re+ft.y:ft.y),ft.type&xe.MOVE_TO&&(He=Pe,Fe=Re),at}}function Ce(ue,Pe,Re,He,Fe,ft){return g(ue,Pe,Re,He,Fe,ft),Ie((function(at,De,ut,et){var Ue=at.x1,jt=at.x2,rt=at.relative&&!isNaN(et),Ct=at.x!==void 0?at.x:rt?0:De,ke=at.y!==void 0?at.y:rt?0:ut;function Xe(ar){return ar*ar}at.type&xe.HORIZ_LINE_TO&&Pe!==0&&(at.type=xe.LINE_TO,at.y=at.relative?0:ut),at.type&xe.VERT_LINE_TO&&Re!==0&&(at.type=xe.LINE_TO,at.x=at.relative?0:De),at.x!==void 0&&(at.x=at.x*ue+ke*Re+(rt?0:Fe)),at.y!==void 0&&(at.y=Ct*Pe+at.y*He+(rt?0:ft)),at.x1!==void 0&&(at.x1=at.x1*ue+at.y1*Re+(rt?0:Fe)),at.y1!==void 0&&(at.y1=Ue*Pe+at.y1*He+(rt?0:ft)),at.x2!==void 0&&(at.x2=at.x2*ue+at.y2*Re+(rt?0:Fe)),at.y2!==void 0&&(at.y2=jt*Pe+at.y2*He+(rt?0:ft));var mt=ue*He-Pe*Re;if(at.xRot!==void 0&&(ue!==1||Pe!==0||Re!==0||He!==1))if(mt===0)delete at.rX,delete at.rY,delete at.xRot,delete at.lArcFlag,delete at.sweepFlag,at.type=xe.LINE_TO;else{var Jt=at.xRot*Math.PI/180,tr=Math.sin(Jt),lr=Math.cos(Jt),Pr=1/Xe(at.rX),tn=1/Xe(at.rY),Gr=Xe(lr)*Pr+Xe(tr)*tn,Xr=2*tr*lr*(Pr-tn),Qr=Xe(tr)*Pr+Xe(lr)*tn,Pn=Gr*He*He-Xr*Pe*He+Qr*Pe*Pe,wn=Xr*(ue*He+Pe*Re)-2*(Gr*Re*He+Qr*ue*Pe),yi=Gr*Re*Re-Xr*ue*Re+Qr*ue*ue,ot=(Math.atan2(wn,Pn-yi)+Math.PI)%Math.PI/2,Gt=Math.sin(ot),Ir=Math.cos(ot);at.rX=Math.abs(mt)/Math.sqrt(Pn*Xe(Ir)+wn*Gt*Ir+yi*Xe(Gt)),at.rY=Math.abs(mt)/Math.sqrt(Pn*Xe(Gt)-wn*Gt*Ir+yi*Xe(Ir)),at.xRot=180*ot/Math.PI}return at.sweepFlag!==void 0&&0>mt&&(at.sweepFlag=+!at.sweepFlag),at}))}function be(){return function(ue){var Pe={};for(var Re in ue)Pe[Re]=ue[Re];return Pe}}ve.ROUND=function(ue){function Pe(Re){return Math.round(Re*ue)/ue}return ue===void 0&&(ue=1e13),g(ue),function(Re){return Re.x1!==void 0&&(Re.x1=Pe(Re.x1)),Re.y1!==void 0&&(Re.y1=Pe(Re.y1)),Re.x2!==void 0&&(Re.x2=Pe(Re.x2)),Re.y2!==void 0&&(Re.y2=Pe(Re.y2)),Re.x!==void 0&&(Re.x=Pe(Re.x)),Re.y!==void 0&&(Re.y=Pe(Re.y)),Re.rX!==void 0&&(Re.rX=Pe(Re.rX)),Re.rY!==void 0&&(Re.rY=Pe(Re.rY)),Re}},ve.TO_ABS=ne,ve.TO_REL=function(){return Ie((function(ue,Pe,Re){return ue.relative||(ue.x1!==void 0&&(ue.x1-=Pe),ue.y1!==void 0&&(ue.y1-=Re),ue.x2!==void 0&&(ue.x2-=Pe),ue.y2!==void 0&&(ue.y2-=Re),ue.x!==void 0&&(ue.x-=Pe),ue.y!==void 0&&(ue.y-=Re),ue.relative=!0),ue}))},ve.NORMALIZE_HVZ=function(ue,Pe,Re){return ue===void 0&&(ue=!0),Pe===void 0&&(Pe=!0),Re===void 0&&(Re=!0),Ie((function(He,Fe,ft,at,De){if(isNaN(at)&&!(He.type&xe.MOVE_TO))throw new Error("path must start with moveto");return Pe&&He.type&xe.HORIZ_LINE_TO&&(He.type=xe.LINE_TO,He.y=He.relative?0:ft),Re&&He.type&xe.VERT_LINE_TO&&(He.type=xe.LINE_TO,He.x=He.relative?0:Fe),ue&&He.type&xe.CLOSE_PATH&&(He.type=xe.LINE_TO,He.x=He.relative?at-Fe:at,He.y=He.relative?De-ft:De),He.type&xe.ARC&&(He.rX===0||He.rY===0)&&(He.type=xe.LINE_TO,delete He.rX,delete He.rY,delete He.xRot,delete He.lArcFlag,delete He.sweepFlag),He}))},ve.NORMALIZE_ST=ae,ve.QT_TO_C=oe,ve.INFO=Ie,ve.SANITIZE=function(ue){ue===void 0&&(ue=0),g(ue);var Pe=NaN,Re=NaN,He=NaN,Fe=NaN;return Ie((function(ft,at,De,ut,et){var Ue=Math.abs,jt=!1,rt=0,Ct=0;if(ft.type&xe.SMOOTH_CURVE_TO&&(rt=isNaN(Pe)?0:at-Pe,Ct=isNaN(Re)?0:De-Re),ft.type&(xe.CURVE_TO|xe.SMOOTH_CURVE_TO)?(Pe=ft.relative?at+ft.x2:ft.x2,Re=ft.relative?De+ft.y2:ft.y2):(Pe=NaN,Re=NaN),ft.type&xe.SMOOTH_QUAD_TO?(He=isNaN(He)?at:2*at-He,Fe=isNaN(Fe)?De:2*De-Fe):ft.type&xe.QUAD_TO?(He=ft.relative?at+ft.x1:ft.x1,Fe=ft.relative?De+ft.y1:ft.y2):(He=NaN,Fe=NaN),ft.type&xe.LINE_COMMANDS||ft.type&xe.ARC&&(ft.rX===0||ft.rY===0||!ft.lArcFlag)||ft.type&xe.CURVE_TO||ft.type&xe.SMOOTH_CURVE_TO||ft.type&xe.QUAD_TO||ft.type&xe.SMOOTH_QUAD_TO){var ke=ft.x===void 0?0:ft.relative?ft.x:ft.x-at,Xe=ft.y===void 0?0:ft.relative?ft.y:ft.y-De;rt=isNaN(He)?ft.x1===void 0?rt:ft.relative?ft.x:ft.x1-at:He-at,Ct=isNaN(Fe)?ft.y1===void 0?Ct:ft.relative?ft.y:ft.y1-De:Fe-De;var mt=ft.x2===void 0?0:ft.relative?ft.x:ft.x2-at,Jt=ft.y2===void 0?0:ft.relative?ft.y:ft.y2-De;Ue(ke)<=ue&&Ue(Xe)<=ue&&Ue(rt)<=ue&&Ue(Ct)<=ue&&Ue(mt)<=ue&&Ue(Jt)<=ue&&(jt=!0)}return ft.type&xe.CLOSE_PATH&&Ue(at-ut)<=ue&&Ue(De-et)<=ue&&(jt=!0),jt?[]:ft}))},ve.MATRIX=Ce,ve.ROTATE=function(ue,Pe,Re){Pe===void 0&&(Pe=0),Re===void 0&&(Re=0),g(ue,Pe,Re);var He=Math.sin(ue),Fe=Math.cos(ue);return Ce(Fe,He,-He,Fe,Pe-Pe*Fe+Re*He,Re-Pe*He-Re*Fe)},ve.TRANSLATE=function(ue,Pe){return Pe===void 0&&(Pe=0),g(ue,Pe),Ce(1,0,0,1,ue,Pe)},ve.SCALE=function(ue,Pe){return Pe===void 0&&(Pe=ue),g(ue,Pe),Ce(ue,0,0,Pe,0,0)},ve.SKEW_X=function(ue){return g(ue),Ce(1,0,Math.atan(ue),1,0,0)},ve.SKEW_Y=function(ue){return g(ue),Ce(1,Math.atan(ue),0,1,0,0)},ve.X_AXIS_SYMMETRY=function(ue){return ue===void 0&&(ue=0),g(ue),Ce(-1,0,0,1,ue,0)},ve.Y_AXIS_SYMMETRY=function(ue){return ue===void 0&&(ue=0),g(ue),Ce(1,0,0,-1,0,ue)},ve.A_TO_C=function(){return Ie((function(ue,Pe,Re){return xe.ARC===ue.type?(function(He,Fe,ft){var at,De,ut,et;He.cX||x(He,Fe,ft);for(var Ue=Math.min(He.phi1,He.phi2),jt=Math.max(He.phi1,He.phi2)-Ue,rt=Math.ceil(jt/90),Ct=new Array(rt),ke=Fe,Xe=ft,mt=0;mt<rt;mt++){var Jt=N(He.phi1,He.phi2,mt/rt),tr=N(He.phi1,He.phi2,(mt+1)/rt),lr=tr-Jt,Pr=4/3*Math.tan(lr*E/4),tn=[Math.cos(Jt*E)-Pr*Math.sin(Jt*E),Math.sin(Jt*E)+Pr*Math.cos(Jt*E)],Gr=tn[0],Xr=tn[1],Qr=[Math.cos(tr*E),Math.sin(tr*E)],Pn=Qr[0],wn=Qr[1],yi=[Pn+Pr*Math.sin(tr*E),wn-Pr*Math.cos(tr*E)],ot=yi[0],Gt=yi[1];Ct[mt]={relative:He.relative,type:xe.CURVE_TO};var Ir=function(ar,Qt){var gr=p([ar*He.rX,Qt*He.rY],He.xRot),Yr=gr[0],en=gr[1];return[He.cX+Yr,He.cY+en]};at=Ir(Gr,Xr),Ct[mt].x1=at[0],Ct[mt].y1=at[1],De=Ir(ot,Gt),Ct[mt].x2=De[0],Ct[mt].y2=De[1],ut=Ir(Pn,wn),Ct[mt].x=ut[0],Ct[mt].y=ut[1],He.relative&&(Ct[mt].x1-=ke,Ct[mt].y1-=Xe,Ct[mt].x2-=ke,Ct[mt].y2-=Xe,Ct[mt].x-=ke,Ct[mt].y-=Xe),ke=(et=[Ct[mt].x,Ct[mt].y])[0],Xe=et[1]}return Ct})(ue,ue.relative?0:Pe,ue.relative?0:Re):ue}))},ve.ANNOTATE_ARCS=function(){return Ie((function(ue,Pe,Re){return ue.relative&&(Pe=0,Re=0),xe.ARC===ue.type&&x(ue,Pe,Re),ue}))},ve.CLONE=be,ve.CALCULATE_BOUNDS=function(){var ue=function(ft){var at={};for(var De in ft)at[De]=ft[De];return at},Pe=ne(),Re=oe(),He=ae(),Fe=Ie((function(ft,at,De){var ut=He(Re(Pe(ue(ft))));function et(Gt){Gt>Fe.maxX&&(Fe.maxX=Gt),Gt<Fe.minX&&(Fe.minX=Gt)}function Ue(Gt){Gt>Fe.maxY&&(Fe.maxY=Gt),Gt<Fe.minY&&(Fe.minY=Gt)}if(ut.type&xe.DRAWING_COMMANDS&&(et(at),Ue(De)),ut.type&xe.HORIZ_LINE_TO&&et(ut.x),ut.type&xe.VERT_LINE_TO&&Ue(ut.y),ut.type&xe.LINE_TO&&(et(ut.x),Ue(ut.y)),ut.type&xe.CURVE_TO){et(ut.x),Ue(ut.y);for(var jt=0,rt=I(at,ut.x1,ut.x2,ut.x);jt<rt.length;jt++)0<(ot=rt[jt])&&1>ot&&et(D(at,ut.x1,ut.x2,ut.x,ot));for(var Ct=0,ke=I(De,ut.y1,ut.y2,ut.y);Ct<ke.length;Ct++)0<(ot=ke[Ct])&&1>ot&&Ue(D(De,ut.y1,ut.y2,ut.y,ot))}if(ut.type&xe.ARC){et(ut.x),Ue(ut.y),x(ut,at,De);for(var Xe=ut.xRot/180*Math.PI,mt=Math.cos(Xe)*ut.rX,Jt=Math.sin(Xe)*ut.rX,tr=-Math.sin(Xe)*ut.rY,lr=Math.cos(Xe)*ut.rY,Pr=ut.phi1<ut.phi2?[ut.phi1,ut.phi2]:-180>ut.phi2?[ut.phi2+360,ut.phi1+360]:[ut.phi2,ut.phi1],tn=Pr[0],Gr=Pr[1],Xr=function(Gt){var Ir=Gt[0],ar=Gt[1],Qt=180*Math.atan2(ar,Ir)/Math.PI;return Qt<tn?Qt+360:Qt},Qr=0,Pn=w(tr,-mt,0).map(Xr);Qr<Pn.length;Qr++)(ot=Pn[Qr])>tn&&ot<Gr&&et(C(ut.cX,mt,tr,ot));for(var wn=0,yi=w(lr,-Jt,0).map(Xr);wn<yi.length;wn++){var ot;(ot=yi[wn])>tn&&ot<Gr&&Ue(C(ut.cY,Jt,lr,ot))}}return ft}));return Fe.minX=1/0,Fe.maxX=-1/0,Fe.minY=1/0,Fe.maxY=-1/0,Fe}})(_||(_={}));var U,G=(function(){function ve(){}return ve.prototype.round=function(ne){return this.transform(_.ROUND(ne))},ve.prototype.toAbs=function(){return this.transform(_.TO_ABS())},ve.prototype.toRel=function(){return this.transform(_.TO_REL())},ve.prototype.normalizeHVZ=function(ne,ae,oe){return this.transform(_.NORMALIZE_HVZ(ne,ae,oe))},ve.prototype.normalizeST=function(){return this.transform(_.NORMALIZE_ST())},ve.prototype.qtToC=function(){return this.transform(_.QT_TO_C())},ve.prototype.aToC=function(){return this.transform(_.A_TO_C())},ve.prototype.sanitize=function(ne){return this.transform(_.SANITIZE(ne))},ve.prototype.translate=function(ne,ae){return this.transform(_.TRANSLATE(ne,ae))},ve.prototype.scale=function(ne,ae){return this.transform(_.SCALE(ne,ae))},ve.prototype.rotate=function(ne,ae,oe){return this.transform(_.ROTATE(ne,ae,oe))},ve.prototype.matrix=function(ne,ae,oe,Ie,Ce,be){return this.transform(_.MATRIX(ne,ae,oe,Ie,Ce,be))},ve.prototype.skewX=function(ne){return this.transform(_.SKEW_X(ne))},ve.prototype.skewY=function(ne){return this.transform(_.SKEW_Y(ne))},ve.prototype.xSymmetry=function(ne){return this.transform(_.X_AXIS_SYMMETRY(ne))},ve.prototype.ySymmetry=function(ne){return this.transform(_.Y_AXIS_SYMMETRY(ne))},ve.prototype.annotateArcs=function(){return this.transform(_.ANNOTATE_ARCS())},ve})(),q=function(ve){return ve===" "||ve==="	"||ve==="\r"||ve===`
`},J=function(ve){return 48<=ve.charCodeAt(0)&&ve.charCodeAt(0)<=57},de=(function(ve){function ne(){var ae=ve.call(this)||this;return ae.curNumber="",ae.curCommandType=-1,ae.curCommandRelative=!1,ae.canParseCommandOrComma=!0,ae.curNumberHasExp=!1,ae.curNumberHasExpDigits=!1,ae.curNumberHasDecimal=!1,ae.curArgs=[],ae}return f(ne,ve),ne.prototype.finish=function(ae){if(ae===void 0&&(ae=[]),this.parse(" ",ae),this.curArgs.length!==0||!this.canParseCommandOrComma)throw new SyntaxError("Unterminated command at the path end.");return ae},ne.prototype.parse=function(ae,oe){var Ie=this;oe===void 0&&(oe=[]);for(var Ce=function(Fe){oe.push(Fe),Ie.curArgs.length=0,Ie.canParseCommandOrComma=!0},be=0;be<ae.length;be++){var ue=ae[be],Pe=!(this.curCommandType!==xe.ARC||this.curArgs.length!==3&&this.curArgs.length!==4||this.curNumber.length!==1||this.curNumber!=="0"&&this.curNumber!=="1"),Re=J(ue)&&(this.curNumber==="0"&&ue==="0"||Pe);if(!J(ue)||Re)if(ue!=="e"&&ue!=="E")if(ue!=="-"&&ue!=="+"||!this.curNumberHasExp||this.curNumberHasExpDigits)if(ue!=="."||this.curNumberHasExp||this.curNumberHasDecimal||Pe){if(this.curNumber&&this.curCommandType!==-1){var He=Number(this.curNumber);if(isNaN(He))throw new SyntaxError("Invalid number ending at "+be);if(this.curCommandType===xe.ARC){if(this.curArgs.length===0||this.curArgs.length===1){if(0>He)throw new SyntaxError('Expected positive number, got "'+He+'" at index "'+be+'"')}else if((this.curArgs.length===3||this.curArgs.length===4)&&this.curNumber!=="0"&&this.curNumber!=="1")throw new SyntaxError('Expected a flag, got "'+this.curNumber+'" at index "'+be+'"')}this.curArgs.push(He),this.curArgs.length===we[this.curCommandType]&&(xe.HORIZ_LINE_TO===this.curCommandType?Ce({type:xe.HORIZ_LINE_TO,relative:this.curCommandRelative,x:He}):xe.VERT_LINE_TO===this.curCommandType?Ce({type:xe.VERT_LINE_TO,relative:this.curCommandRelative,y:He}):this.curCommandType===xe.MOVE_TO||this.curCommandType===xe.LINE_TO||this.curCommandType===xe.SMOOTH_QUAD_TO?(Ce({type:this.curCommandType,relative:this.curCommandRelative,x:this.curArgs[0],y:this.curArgs[1]}),xe.MOVE_TO===this.curCommandType&&(this.curCommandType=xe.LINE_TO)):this.curCommandType===xe.CURVE_TO?Ce({type:xe.CURVE_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x2:this.curArgs[2],y2:this.curArgs[3],x:this.curArgs[4],y:this.curArgs[5]}):this.curCommandType===xe.SMOOTH_CURVE_TO?Ce({type:xe.SMOOTH_CURVE_TO,relative:this.curCommandRelative,x2:this.curArgs[0],y2:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===xe.QUAD_TO?Ce({type:xe.QUAD_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===xe.ARC&&Ce({type:xe.ARC,relative:this.curCommandRelative,rX:this.curArgs[0],rY:this.curArgs[1],xRot:this.curArgs[2],lArcFlag:this.curArgs[3],sweepFlag:this.curArgs[4],x:this.curArgs[5],y:this.curArgs[6]})),this.curNumber="",this.curNumberHasExpDigits=!1,this.curNumberHasExp=!1,this.curNumberHasDecimal=!1,this.canParseCommandOrComma=!0}if(!q(ue))if(ue===","&&this.canParseCommandOrComma)this.canParseCommandOrComma=!1;else if(ue!=="+"&&ue!=="-"&&ue!==".")if(Re)this.curNumber=ue,this.curNumberHasDecimal=!1;else{if(this.curArgs.length!==0)throw new SyntaxError("Unterminated command at index "+be+".");if(!this.canParseCommandOrComma)throw new SyntaxError('Unexpected character "'+ue+'" at index '+be+". Command cannot follow comma");if(this.canParseCommandOrComma=!1,ue!=="z"&&ue!=="Z")if(ue==="h"||ue==="H")this.curCommandType=xe.HORIZ_LINE_TO,this.curCommandRelative=ue==="h";else if(ue==="v"||ue==="V")this.curCommandType=xe.VERT_LINE_TO,this.curCommandRelative=ue==="v";else if(ue==="m"||ue==="M")this.curCommandType=xe.MOVE_TO,this.curCommandRelative=ue==="m";else if(ue==="l"||ue==="L")this.curCommandType=xe.LINE_TO,this.curCommandRelative=ue==="l";else if(ue==="c"||ue==="C")this.curCommandType=xe.CURVE_TO,this.curCommandRelative=ue==="c";else if(ue==="s"||ue==="S")this.curCommandType=xe.SMOOTH_CURVE_TO,this.curCommandRelative=ue==="s";else if(ue==="q"||ue==="Q")this.curCommandType=xe.QUAD_TO,this.curCommandRelative=ue==="q";else if(ue==="t"||ue==="T")this.curCommandType=xe.SMOOTH_QUAD_TO,this.curCommandRelative=ue==="t";else{if(ue!=="a"&&ue!=="A")throw new SyntaxError('Unexpected character "'+ue+'" at index '+be+".");this.curCommandType=xe.ARC,this.curCommandRelative=ue==="a"}else oe.push({type:xe.CLOSE_PATH}),this.canParseCommandOrComma=!0,this.curCommandType=-1}else this.curNumber=ue,this.curNumberHasDecimal=ue==="."}else this.curNumber+=ue,this.curNumberHasDecimal=!0;else this.curNumber+=ue;else this.curNumber+=ue,this.curNumberHasExp=!0;else this.curNumber+=ue,this.curNumberHasExpDigits=this.curNumberHasExp}return oe},ne.prototype.transform=function(ae){return Object.create(this,{parse:{value:function(oe,Ie){Ie===void 0&&(Ie=[]);for(var Ce=0,be=Object.getPrototypeOf(this).parse.call(this,oe);Ce<be.length;Ce++){var ue=be[Ce],Pe=ae(ue);Array.isArray(Pe)?Ie.push.apply(Ie,Pe):Ie.push(Pe)}return Ie}}})},ne})(G),xe=(function(ve){function ne(ae){var oe=ve.call(this)||this;return oe.commands=typeof ae=="string"?ne.parse(ae):ae,oe}return f(ne,ve),ne.prototype.encode=function(){return ne.encode(this.commands)},ne.prototype.getBounds=function(){var ae=_.CALCULATE_BOUNDS();return this.transform(ae),ae},ne.prototype.transform=function(ae){for(var oe=[],Ie=0,Ce=this.commands;Ie<Ce.length;Ie++){var be=ae(Ce[Ie]);Array.isArray(be)?oe.push.apply(oe,be):oe.push(be)}return this.commands=oe,this},ne.encode=function(ae){return m(ae)},ne.parse=function(ae){var oe=new de,Ie=[];return oe.parse(ae,Ie),oe.finish(Ie),Ie},ne.CLOSE_PATH=1,ne.MOVE_TO=2,ne.HORIZ_LINE_TO=4,ne.VERT_LINE_TO=8,ne.LINE_TO=16,ne.CURVE_TO=32,ne.SMOOTH_CURVE_TO=64,ne.QUAD_TO=128,ne.SMOOTH_QUAD_TO=256,ne.ARC=512,ne.LINE_COMMANDS=ne.LINE_TO|ne.HORIZ_LINE_TO|ne.VERT_LINE_TO,ne.DRAWING_COMMANDS=ne.HORIZ_LINE_TO|ne.VERT_LINE_TO|ne.LINE_TO|ne.CURVE_TO|ne.SMOOTH_CURVE_TO|ne.QUAD_TO|ne.SMOOTH_QUAD_TO|ne.ARC,ne})(G),we=((U={})[xe.MOVE_TO]=2,U[xe.LINE_TO]=2,U[xe.HORIZ_LINE_TO]=1,U[xe.VERT_LINE_TO]=1,U[xe.CLOSE_PATH]=0,U[xe.QUAD_TO]=4,U[xe.SMOOTH_QUAD_TO]=2,U[xe.CURVE_TO]=6,U[xe.SMOOTH_CURVE_TO]=4,U[xe.ARC]=7,U)}),"./src/plugin/hyperlinks.js":(function(c,u,l){l.r(u),l("./node_modules/core-js/modules/es.object.to-string.js"),l("./node_modules/core-js/modules/es.string.link.js"),l("./node_modules/core-js/modules/esnext.iterator.constructor.js"),l("./node_modules/core-js/modules/esnext.iterator.for-each.js"),l("./node_modules/core-js/modules/web.dom-collections.for-each.js");var d=l("./src/worker.js"),f=l("./src/utils.js"),m=[],p={toContainer:d.default.prototype.toContainer,toPdf:d.default.prototype.toPdf};d.default.prototype.toContainer=function(){return p.toContainer.call(this).then(function(){if(this.opt.enableLinks){var x=this.prop.container,w=x.querySelectorAll("a"),_=(0,f.unitConvert)(x.getBoundingClientRect(),this.prop.pageSize.k);m=[],Array.prototype.forEach.call(w,function(E){for(var N=E.getClientRects(),C=0;C<N.length;C++){var I=(0,f.unitConvert)(N[C],this.prop.pageSize.k);I.left-=_.left,I.top-=_.top;var D=Math.floor(I.top/this.prop.pageSize.inner.height)+1,U=this.opt.margin[0]+I.top%this.prop.pageSize.inner.height,G=this.opt.margin[1]+I.left;m.push({page:D,top:U,left:G,clientRect:I,link:E})}},this)}})},d.default.prototype.toPdf=function(){return p.toPdf.call(this).then(function(){if(this.opt.enableLinks){m.forEach(function(w){this.prop.pdf.setPage(w.page),this.prop.pdf.link(w.left,w.top,w.clientRect.width,w.clientRect.height,{url:w.link.href})},this);var x=this.prop.pdf.internal.getNumberOfPages();this.prop.pdf.setPage(x)}})}}),"./src/plugin/jspdf-plugin.js":(function(c,u,l){l.r(u),l("./node_modules/core-js/modules/es.symbol.js"),l("./node_modules/core-js/modules/es.symbol.description.js"),l("./node_modules/core-js/modules/es.symbol.iterator.js"),l("./node_modules/core-js/modules/es.array.iterator.js"),l("./node_modules/core-js/modules/es.object.to-string.js"),l("./node_modules/core-js/modules/es.string.iterator.js"),l("./node_modules/core-js/modules/web.dom-collections.iterator.js");var d=l("./node_modules/jspdf/dist/jspdf.es.min.js");function f(m){"@babel/helpers - typeof";return f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p},f(m)}d.jsPDF.getPageSize=function(m,p,g){if(f(m)==="object"){var y=m;m=y.orientation,p=y.unit||p,g=y.format||g}p=p||"mm",g=g||"a4",m=(""+(m||"P")).toLowerCase();var x=(""+g).toLowerCase(),w={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(p){case"pt":var _=1;break;case"mm":var _=72/25.4;break;case"cm":var _=72/2.54;break;case"in":var _=72;break;case"px":var _=72/96;break;case"pc":var _=12;break;case"em":var _=12;break;case"ex":var _=6;break;default:throw"Invalid unit: "+p}if(w.hasOwnProperty(x))var E=w[x][1]/_,N=w[x][0]/_;else try{var E=g[1],N=g[0]}catch{throw new Error("Invalid format: "+g)}if(m==="p"||m==="portrait"){if(m="p",N>E){var C=N;N=E,E=C}}else if(m==="l"||m==="landscape"){if(m="l",E>N){var C=N;N=E,E=C}}else throw"Invalid orientation: "+m;var I={width:N,height:E,unit:p,k:_};return I},u.default=d.jsPDF}),"./src/plugin/pagebreaks.js":(function(c,u,l){l.r(u),l("./node_modules/core-js/modules/es.array.concat.js"),l("./node_modules/core-js/modules/es.array.join.js"),l("./node_modules/core-js/modules/es.array.slice.js"),l("./node_modules/core-js/modules/es.object.keys.js"),l("./node_modules/core-js/modules/es.object.to-string.js"),l("./node_modules/core-js/modules/esnext.iterator.constructor.js"),l("./node_modules/core-js/modules/esnext.iterator.for-each.js"),l("./node_modules/core-js/modules/web.dom-collections.for-each.js");var d=l("./src/worker.js"),f=l("./src/utils.js"),m={toContainer:d.default.prototype.toContainer};d.default.template.opt.pagebreak={mode:["css","legacy"],before:[],after:[],avoid:[]},d.default.prototype.toContainer=function(){return m.toContainer.call(this).then(function(){var y=this.prop.container,x=this.prop.pageSize.inner.px.height,w=[].concat(this.opt.pagebreak.mode),_={avoidAll:w.indexOf("avoid-all")!==-1,css:w.indexOf("css")!==-1,legacy:w.indexOf("legacy")!==-1},E={},N=this;["before","after","avoid"].forEach(function(D){var U=_.avoidAll&&D==="avoid";E[D]=U?[]:[].concat(N.opt.pagebreak[D]||[]),E[D].length>0&&(E[D]=Array.prototype.slice.call(y.querySelectorAll(E[D].join(", "))))});var C=y.querySelectorAll(".html2pdf__page-break");C=Array.prototype.slice.call(C);var I=y.querySelectorAll("*");Array.prototype.forEach.call(I,function(U){var G={before:!1,after:_.legacy&&C.indexOf(U)!==-1,avoid:_.avoidAll};if(_.css){var q=window.getComputedStyle(U),J=["always","page","left","right"],de=["avoid","avoid-page"];G={before:G.before||J.indexOf(q.breakBefore||q.pageBreakBefore)!==-1,after:G.after||J.indexOf(q.breakAfter||q.pageBreakAfter)!==-1,avoid:G.avoid||de.indexOf(q.breakInside||q.pageBreakInside)!==-1}}Object.keys(G).forEach(function(oe){G[oe]=G[oe]||E[oe].indexOf(U)!==-1});var xe=U.getBoundingClientRect();if(G.avoid&&!G.before){var we=Math.floor(xe.top/x),ve=Math.floor(xe.bottom/x),ne=Math.abs(xe.bottom-xe.top)/x;ve!==we&&ne<=1&&(G.before=!0)}if(G.before){var ae=(0,f.createElement)("div",{style:{display:"block",height:x-xe.top%x+"px"}});U.parentNode.insertBefore(ae,U)}if(G.after){var ae=(0,f.createElement)("div",{style:{display:"block",height:x-xe.bottom%x+"px"}});U.parentNode.insertBefore(ae,U.nextSibling)}})})}}),"./src/snapdom/clone.js":(function(c,u,l){l.r(u),l.d(u,{deepCloneBasic:function(){return g}}),l("./node_modules/core-js/modules/es.symbol.js"),l("./node_modules/core-js/modules/es.symbol.description.js"),l("./node_modules/core-js/modules/es.symbol.iterator.js"),l("./node_modules/core-js/modules/es.array.concat.js"),l("./node_modules/core-js/modules/es.array.from.js"),l("./node_modules/core-js/modules/es.array.iterator.js"),l("./node_modules/core-js/modules/es.array.slice.js"),l("./node_modules/core-js/modules/es.function.name.js"),l("./node_modules/core-js/modules/es.object.to-string.js"),l("./node_modules/core-js/modules/es.regexp.exec.js"),l("./node_modules/core-js/modules/es.regexp.test.js"),l("./node_modules/core-js/modules/es.regexp.to-string.js"),l("./node_modules/core-js/modules/es.set.js"),l("./node_modules/core-js/modules/es.string.iterator.js"),l("./node_modules/core-js/modules/esnext.set.add-all.js"),l("./node_modules/core-js/modules/esnext.set.delete-all.js"),l("./node_modules/core-js/modules/esnext.set.difference.js"),l("./node_modules/core-js/modules/esnext.set.every.js"),l("./node_modules/core-js/modules/esnext.set.filter.js"),l("./node_modules/core-js/modules/esnext.set.find.js"),l("./node_modules/core-js/modules/esnext.set.intersection.js"),l("./node_modules/core-js/modules/esnext.set.is-disjoint-from.js"),l("./node_modules/core-js/modules/esnext.set.is-subset-of.js"),l("./node_modules/core-js/modules/esnext.set.is-superset-of.js"),l("./node_modules/core-js/modules/esnext.set.join.js"),l("./node_modules/core-js/modules/esnext.set.map.js"),l("./node_modules/core-js/modules/esnext.set.reduce.js"),l("./node_modules/core-js/modules/esnext.set.some.js"),l("./node_modules/core-js/modules/esnext.set.symmetric-difference.js"),l("./node_modules/core-js/modules/esnext.set.union.js"),l("./node_modules/core-js/modules/web.dom-collections.iterator.js");function d(y,x){var w=typeof Symbol<"u"&&y[Symbol.iterator]||y["@@iterator"];if(!w){if(Array.isArray(y)||(w=f(y))||x){w&&(y=w);var _=0,E=function(){};return{s:E,n:function(){return _>=y.length?{done:!0}:{done:!1,value:y[_++]}},e:function(U){throw U},f:E}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var N,C=!0,I=!1;return{s:function(){w=w.call(y)},n:function(){var U=w.next();return C=U.done,U},e:function(U){I=!0,N=U},f:function(){try{C||w.return==null||w.return()}finally{if(I)throw N}}}}function f(y,x){if(y){if(typeof y=="string")return m(y,x);var w={}.toString.call(y).slice(8,-1);return w==="Object"&&y.constructor&&(w=y.constructor.name),w==="Map"||w==="Set"?Array.from(y):w==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(w)?m(y,x):void 0}}function m(y,x){(x==null||x>y.length)&&(x=y.length);for(var w=0,_=Array(x);w<x;w++)_[w]=y[w];return _}function p(y,x){try{var w=y.currentSrc||y.src||"";if(!w)return;x.setAttribute("src",w),x.removeAttribute("srcset"),x.removeAttribute("sizes"),x.loading="eager",x.decoding="sync"}catch{}}function g(y){if(!y)throw new Error("Invalid node");var x=new Set,w=null;if(y.nodeType===Node.TEXT_NODE||y.nodeType!==Node.ELEMENT_NODE)return y.cloneNode(!0);if(y.tagName==="IFRAME"){var _=document.createElement("div");return _.style.cssText="width:".concat(y.offsetWidth,"px;height:").concat(y.offsetHeight,"px;background-image:repeating-linear-gradient(45deg,#ddd,#ddd 5px,#f9f9f9 5px,#f9f9f9 10px);display:flex;align-items:center;justify-content:center;font-size:12px;color:#555;border:1px solid #aaa;"),_}if(y.tagName==="CANVAS"){var E=y.toDataURL(),N=document.createElement("img");return N.src=E,N.width=y.width,N.height=y.height,N}var C;try{C=y.cloneNode(!1),y.tagName==="IMG"&&p(y,C)}catch(Ue){throw console.error("[Snapdom] Failed to clone node:",y,Ue),Ue}if(y instanceof HTMLTextAreaElement){C.textContent=y.value,C.value=y.value;var I=y.getBoundingClientRect();return C.style.boxSizing="border-box",C.style.width="".concat(I.width,"px"),C.style.height="".concat(I.height,"px"),C}if(y instanceof HTMLInputElement&&(y.hasAttribute("value")&&(C.value=y.value,C.setAttribute("value",y.value)),y.checked!==void 0&&(C.checked=y.checked,y.checked&&C.setAttribute("checked",""),y.indeterminate&&(C.indeterminate=y.indeterminate))),y instanceof HTMLSelectElement&&(w=y.value),y.shadowRoot){var D=Array.from(y.shadowRoot.querySelectorAll("slot")).length>0;if(!D){var U=document.createDocumentFragment(),G=d(y.shadowRoot.childNodes),q;try{for(G.s();!(q=G.n()).done;){var J=q.value;if(!(J.nodeType===Node.ELEMENT_NODE&&J.tagName==="STYLE")){var de=g(J);de&&U.appendChild(de)}}}catch(Ue){G.e(Ue)}finally{G.f()}C.appendChild(U)}}if(y.tagName==="SLOT"){var xe,we=((xe=y.assignedNodes)===null||xe===void 0?void 0:xe.call(y,{flatten:!0}))||[],ve=we.length>0?we:Array.from(y.childNodes),ne=document.createDocumentFragment(),ae=d(ve),oe;try{for(ae.s();!(oe=ae.n()).done;){var Ie=oe.value,Ce=g(Ie);Ce&&ne.appendChild(Ce)}}catch(Ue){ae.e(Ue)}finally{ae.f()}return ne}var be=d(y.childNodes),ue;try{for(be.s();!(ue=be.n()).done;){var Pe=ue.value;if(!x.has(Pe)){var Re=g(Pe);Re&&C.appendChild(Re)}}}catch(Ue){be.e(Ue)}finally{be.f()}if(w!==null&&C instanceof HTMLSelectElement){C.value=w;var He=d(C.options),Fe;try{for(He.s();!(Fe=He.n()).done;){var ft=Fe.value;ft.value===w?ft.setAttribute("selected",""):ft.removeAttribute("selected")}}catch(Ue){He.e(Ue)}finally{He.f()}}var at=y.scrollLeft,De=y.scrollTop,ut=at||De;if(ut&&C instanceof HTMLElement){C.style.overflow="hidden",C.style.scrollbarWidth="none",C.style.msOverflowStyle="none";var et=document.createElement("div");for(et.style.transform="translate(".concat(-at,"px, ").concat(-De,"px)"),et.style.willChange="transform",et.style.display="inline-block",et.style.width="100%";C.firstChild;)et.appendChild(C.firstChild);C.appendChild(et)}return C}}),"./src/utils.js":(function(c,u,l){l.r(u),l.d(u,{createElement:function(){return p},objType:function(){return m},toPx:function(){return y},unitConvert:function(){return g}}),l("./node_modules/core-js/modules/es.symbol.js"),l("./node_modules/core-js/modules/es.symbol.description.js"),l("./node_modules/core-js/modules/es.symbol.iterator.js"),l("./node_modules/core-js/modules/es.array.iterator.js"),l("./node_modules/core-js/modules/es.number.constructor.js"),l("./node_modules/core-js/modules/es.object.to-string.js"),l("./node_modules/core-js/modules/es.string.iterator.js"),l("./node_modules/core-js/modules/web.dom-collections.iterator.js");var d=l("./node_modules/dompurify/dist/purify.es.mjs");function f(x){"@babel/helpers - typeof";return f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},f(x)}var m=function(w){var _=f(w);return _==="undefined"?"undefined":_==="string"||w instanceof String?"string":_==="number"||w instanceof Number?"number":_==="function"||w instanceof Function?"function":w&&w.constructor===Array?"array":w&&w.nodeType===1?"element":_==="object"?"object":"unknown"},p=function(w,_){var E=document.createElement(w);_.className&&(E.className=_.className),_.innerHTML&&(E.innerHTML=d.default.sanitize(_.innerHTML));for(var N in _.style)E.style[N]=_.style[N];return E},g=function(w,_){if(m(w)==="number")return w*72/96/_;var E={};for(var N in w)E[N]=w[N]*72/96/_;return E},y=function(w,_){return Math.floor(w*_/72*96)}}),"./src/worker.js":(function(c,u,l){l.r(u),l("./node_modules/core-js/modules/es.array.concat.js"),l("./node_modules/core-js/modules/es.array.map.js"),l("./node_modules/core-js/modules/es.function.name.js"),l("./node_modules/core-js/modules/es.json.stringify.js"),l("./node_modules/core-js/modules/es.object.assign.js"),l("./node_modules/core-js/modules/es.object.keys.js"),l("./node_modules/core-js/modules/es.object.to-string.js"),l("./node_modules/core-js/modules/es.promise.js"),l("./node_modules/core-js/modules/es.regexp.to-string.js"),l("./node_modules/core-js/modules/esnext.iterator.constructor.js"),l("./node_modules/core-js/modules/esnext.iterator.for-each.js"),l("./node_modules/core-js/modules/esnext.iterator.map.js"),l("./node_modules/core-js/modules/web.dom-collections.for-each.js"),l("./node_modules/core-js/modules/web.timers.js");var d=l("./node_modules/jspdf/dist/jspdf.es.min.js"),f=l("html2canvas"),m=l.n(f),p=l("./src/snapdom/clone.js"),g=l("./src/utils.js"),y=function x(w){var _=Object.assign(x.convert(Promise.resolve()),JSON.parse(JSON.stringify(x.template))),E=x.convert(Promise.resolve(),_);return E=E.setProgress(1,x,1,[x]),E=E.set(w),E};y.prototype=Object.create(Promise.prototype),y.prototype.constructor=y,y.convert=function(w,_){return w.__proto__=_||y.prototype,w},y.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],image:{type:"jpeg",quality:.95},enableLinks:!0,html2canvas:{},jsPDF:{}}},y.prototype.from=function(w,_){function E(N){switch((0,g.objType)(N)){case"string":return"string";case"element":return N.nodeName.toLowerCase&&N.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}return this.then(function(){switch(_=_||E(w),_){case"string":return this.set({src:(0,g.createElement)("div",{innerHTML:w})});case"element":return this.set({src:w});case"canvas":return this.set({canvas:w});case"img":return this.set({img:w});default:return this.error("Unknown source type.")}})},y.prototype.to=function(w){switch(w){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},y.prototype.toContainer=function(){var w=[function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}];return this.thenList(w).then(function(){var E={position:"fixed",overflow:"hidden",zIndex:1e3,left:0,right:0,bottom:0,top:0,backgroundColor:"rgba(0,0,0,0.8)"},N={position:"absolute",width:this.prop.pageSize.inner.width+this.prop.pageSize.unit,left:0,right:0,top:0,height:"auto",margin:"auto",backgroundColor:"white"};E.opacity=0;var C=(0,p.deepCloneBasic)(this.prop.src);return this.prop.overlay=(0,g.createElement)("div",{className:"html2pdf__overlay",style:E}),this.prop.container=(0,g.createElement)("div",{className:"html2pdf__container",style:N}),this.prop.container.appendChild(C),this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),new Promise(function(I){return setTimeout(I,10)})})},y.prototype.toCanvas=function(){var w=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(w).then(function(){var E=Object.assign({},this.opt.html2canvas);return delete E.onrendered,m()(this.prop.container,E)}).then(function(E){var N=this.opt.html2canvas.onrendered||function(){};N(E),this.prop.canvas=E,document.body.removeChild(this.prop.overlay)})},y.prototype.toImg=function(){var w=[function(){return this.prop.canvas||this.toCanvas()}];return this.thenList(w).then(function(){var E=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=E})},y.prototype.toPdf=function(){var w=[function(){return this.prop.canvas||this.toCanvas()},function(){return this.prop.pageSize||this.setPageSize()}];return this.thenList(w).then(function(){var E=this.prop.canvas,N=this.opt,C=E.height,I=Math.floor(E.width*this.prop.pageSize.inner.ratio),D=Math.ceil(C/I),U=this.prop.pageSize.inner.height,G=document.createElement("canvas"),q=G.getContext("2d");G.width=E.width,G.height=I,this.prop.pdf=this.prop.pdf||new d.jsPDF(N.jsPDF);for(var J=0;J<D;J++){J===D-1&&C%I!==0&&(G.height=C%I,U=G.height*this.prop.pageSize.inner.width/G.width);var de=G.width,xe=G.height;q.fillStyle="white",q.fillRect(0,0,de,xe),q.drawImage(E,0,J*I,de,xe,0,0,de,xe),J&&this.prop.pdf.addPage();var we=G.toDataURL("image/"+N.image.type,N.image.quality);this.prop.pdf.addImage(we,N.image.type,N.margin[1],N.margin[0],this.prop.pageSize.inner.width,U)}})},y.prototype.output=function(w,_,E){return E=E||"pdf",E.toLowerCase()==="img"||E.toLowerCase()==="image"?this.outputImg(w,_):this.outputPdf(w,_)},y.prototype.outputPdf=function(w,_){var E=[function(){return this.prop.pdf||this.toPdf()}];return this.thenList(E).then(function(){return this.prop.pdf.output(w,_)})},y.prototype.outputImg=function(w,_){var E=[function(){return this.prop.img||this.toImg()}];return this.thenList(E).then(function(){switch(w){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+w+'" is not supported.'}})},y.prototype.save=function(w){var _=[function(){return this.prop.pdf||this.toPdf()}];return this.thenList(_).set(w?{filename:w}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},y.prototype.set=function(w){if((0,g.objType)(w)!=="object")return this;var _=Object.keys(w||{}).map(function(E){switch(E){case"margin":return this.setMargin.bind(this,w.margin);case"jsPDF":return function(){return this.opt.jsPDF=w.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,w.pageSize);default:return E in y.template.prop?function(){this.prop[E]=w[E]}:function(){this.opt[E]=w[E]}}},this);return this.then(function(){return this.thenList(_)})},y.prototype.get=function(w,_){return this.then(function(){var N=w in y.template.prop?this.prop[w]:this.opt[w];return _?_(N):N})},y.prototype.setMargin=function(w){return this.then(function(){switch((0,g.objType)(w)){case"number":w=[w,w,w,w];case"array":if(w.length===2&&(w=[w[0],w[1],w[0],w[1]]),w.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=w}).then(this.setPageSize)},y.prototype.setPageSize=function(w){return this.then(function(){w=w||d.jsPDF.getPageSize(this.opt.jsPDF),w.hasOwnProperty("inner")||(w.inner={width:w.width-this.opt.margin[1]-this.opt.margin[3],height:w.height-this.opt.margin[0]-this.opt.margin[2]},w.inner.px={width:(0,g.toPx)(w.inner.width,w.k),height:(0,g.toPx)(w.inner.height,w.k)},w.inner.ratio=w.inner.height/w.inner.width),this.prop.pageSize=w})},y.prototype.setProgress=function(w,_,E,N){return w!=null&&(this.progress.val=w),_!=null&&(this.progress.state=_),E!=null&&(this.progress.n=E),N!=null&&(this.progress.stack=N),this.progress.ratio=this.progress.val/this.progress.state,this},y.prototype.updateProgress=function(w,_,E,N){return this.setProgress(w?this.progress.val+w:null,_||null,E?this.progress.n+E:null,N?this.progress.stack.concat(N):null)},y.prototype.then=function(w,_){var E=this;return this.thenCore(w,_,function(C,I){return E.updateProgress(null,null,1,[C]),Promise.prototype.then.call(this,function(U){return E.updateProgress(null,C),U}).then(C,I).then(function(U){return E.updateProgress(1),U})})},y.prototype.thenCore=function(w,_,E){E=E||Promise.prototype.then;var N=this;w&&(w=w.bind(N)),_&&(_=_.bind(N));var C=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise",I=C?N:y.convert(Object.assign({},N),Promise.prototype),D=E.call(I,w,_);return y.convert(D,N.__proto__)},y.prototype.thenExternal=function(w,_){return Promise.prototype.then.call(this,w,_)},y.prototype.thenList=function(w){var _=this;return w.forEach(function(N){_=_.thenCore(N)}),_},y.prototype.catch=function(x){x&&(x=x.bind(this));var w=Promise.prototype.catch.call(this,x);return y.convert(w,this)},y.prototype.catchExternal=function(w){return Promise.prototype.catch.call(this,w)},y.prototype.error=function(w){return this.then(function(){throw new Error(w)})},y.prototype.using=y.prototype.set,y.prototype.saveAs=y.prototype.save,y.prototype.export=y.prototype.output,y.prototype.run=y.prototype.then,u.default=y}),html2canvas:(function(c){c.exports=r})},i={};function a(c){var u=i[c];if(u!==void 0)return u.exports;if(n[c]===void 0){var l=new Error("Cannot find module '"+c+"'");throw l.code="MODULE_NOT_FOUND",l}var d=i[c]={exports:{}};return n[c].call(d.exports,d,d.exports,a),d.exports}(function(){a.n=function(c){var u=c&&c.__esModule?function(){return c.default}:function(){return c};return a.d(u,{a:u}),u}})(),(function(){var c=Object.getPrototypeOf?function(l){return Object.getPrototypeOf(l)}:function(l){return l.__proto__},u;a.t=function(l,d){if(d&1&&(l=this(l)),d&8||typeof l=="object"&&l&&(d&4&&l.__esModule||d&16&&typeof l.then=="function"))return l;var f=Object.create(null);a.r(f);var m={};u=u||[null,c({}),c([]),c(c)];for(var p=d&2&&l;(typeof p=="object"||typeof p=="function")&&!~u.indexOf(p);p=c(p))Object.getOwnPropertyNames(p).forEach(function(g){m[g]=function(){return l[g]}});return m.default=function(){return l},a.d(f,m),f}})(),(function(){a.d=function(c,u){for(var l in u)a.o(u,l)&&!a.o(c,l)&&Object.defineProperty(c,l,{enumerable:!0,get:u[l]})}})(),(function(){a.o=function(c,u){return Object.prototype.hasOwnProperty.call(c,u)}})(),(function(){a.r=function(c){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})}})();var o={};return(function(){a.r(o);var c=a("./src/worker.js");a("./src/plugin/jspdf-plugin.js"),a("./src/plugin/pagebreaks.js"),a("./src/plugin/hyperlinks.js");var u=function l(d,f){var m=new l.Worker(f);return d?m.from(d).save():m};u.Worker=c.default,o.default=u})(),o=o.default,o})()})})(ZL)),ZL.exports}var JBe=ZBe();const ePe=om(JBe),tPe=({formData:t,analysis:e,selectedAddOns:r=[],prevStep:n,goToStep:i})=>{const a=()=>{const c=document.createElement("div");c.innerHTML=`
      <div style="font-family: 'Arial', sans-serif; color: #fff; background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%); padding: 40px;">
        <!-- Header -->
        <div style="text-align: center; margin-bottom: 40px; border-bottom: 3px solid #F83B3B; padding-bottom: 20px;">
          <h1 style="color: #F83B3B; font-size: 36px; margin: 0 0 10px 0; font-weight: 900;">
            FIT FOCUS MEDIA
          </h1>
          <p style="color: #9CA3AF; font-size: 16px; margin: 0;">Combat Sports Media Production Proposal</p>
          <p style="color: #6B7280; font-size: 12px; margin: 10px 0 0 0;">${new Date().toLocaleDateString()}</p>
        </div>

        <!-- Organization Details -->
        <div style="background: #2d2d2d; border: 2px solid #374151; border-radius: 12px; padding: 30px; margin-bottom: 30px;">
          <h2 style="color: #F83B3B; font-size: 24px; margin: 0 0 20px 0; font-weight: bold;">Organization Profile</h2>
          <table style="width: 100%; border-collapse: collapse;">
            <tr>
              <td style="padding: 8px 0; color: #9CA3AF; font-size: 14px;">Organization:</td>
              <td style="padding: 8px 0; color: #fff; font-size: 14px; font-weight: bold;">${t.orgName}</td>
            </tr>
            <tr>
              <td style="padding: 8px 0; color: #9CA3AF; font-size: 14px;">Events Per Year:</td>
              <td style="padding: 8px 0; color: #fff; font-size: 14px; font-weight: bold;">${t.showsPerYear}</td>
            </tr>
            <tr>
              <td style="padding: 8px 0; color: #9CA3AF; font-size: 14px;">Average Attendance:</td>
              <td style="padding: 8px 0; color: #fff; font-size: 14px; font-weight: bold;">${t.avgAttendance.toLocaleString()}</td>
            </tr>
            <tr>
              <td style="padding: 8px 0; color: #9CA3AF; font-size: 14px;">Social Following:</td>
              <td style="padding: 8px 0; color: #fff; font-size: 14px; font-weight: bold;">${t.socialFollowing.toLocaleString()}</td>
            </tr>
            <tr>
              <td style="padding: 8px 0; color: #9CA3AF; font-size: 14px;">Organization Tier:</td>
              <td style="padding: 8px 0; color: #F83B3B; font-size: 16px; font-weight: bold;">${e?.tier}</td>
            </tr>
          </table>
        </div>

        <!-- The Grand Slam Offer -->
        <div style="background: linear-gradient(135deg, #D97706 0%, #DC2626 100%); border: 3px solid #FBBF24; border-radius: 12px; padding: 30px; margin-bottom: 30px;">
          <div style="background: rgba(255,255,255,0.2); display: inline-block; padding: 8px 16px; border-radius: 20px; margin-bottom: 15px;">
            <span style="color: #fff; font-size: 12px; font-weight: bold;"> ZERO-COST PRODUCTION</span>
          </div>
          <h2 style="color: #fff; font-size: 28px; margin: 0 0 10px 0; font-weight: bold;">Our Offer to ${t.orgName}</h2>
          <p style="color: #FEF3C7; font-size: 18px; font-weight: bold; margin: 0 0 20px 0;">
            Professional live stream production at absolutely zero cost to you
          </p>
          
          <div style="background: rgba(255,255,255,0.1); border-radius: 8px; padding: 20px; margin-bottom: 20px;">
            <h3 style="color: #fff; font-size: 16px; margin: 0 0 15px 0; font-weight: bold;"> What's Included FREE:</h3>
            <ul style="margin: 0; padding-left: 20px; color: #FEF3C7;">
              <li style="margin-bottom: 8px;">Professional live stream production (1-2 cameras)</li>
              <li style="margin-bottom: 8px;">Complete PPV/streaming setup and management</li>
              <li style="margin-bottom: 8px;">Full show recording</li>
              <li style="margin-bottom: 8px;">1 social media highlight clip</li>
              <li style="margin-bottom: 0;">Revenue share: You earn from every PPV sale</li>
            </ul>
          </div>
          
          <div style="background: rgba(16, 185, 129, 0.3); border: 2px solid #10B981; border-radius: 8px; padding: 15px; text-align: center;">
            <p style="color: #fff; font-size: 20px; font-weight: bold; margin: 0;">
              Your Production Cost: <span style="color: #6EE7B7;">$0</span>
            </p>
            <p style="color: #D1FAE5; font-size: 12px; margin: 5px 0 0 0;">
              Zero upfront cost. Zero risk. Just professional streaming + revenue sharing.
            </p>
          </div>
        </div>
        
        <!-- Premium Add-Ons -->
        <div style="background: #2d2d2d; border: 2px solid #374151; border-radius: 12px; padding: 30px; margin-bottom: 30px;">
          <h2 style="color: #F83B3B; font-size: 24px; margin: 0 0 15px 0; font-weight: bold;">Premium Add-Ons</h2>
          ${r.length>0?`
            <p style="color: #10B981; font-size: 14px; margin: 0 0 15px 0; font-weight: bold;"> Selected Add-Ons:</p>
            <ul style="margin: 0 0 20px 0; padding-left: 20px; color: #D1D5DB; line-height: 1.8;">
              ${r.map(l=>`<li style="color: #10B981;"> ${l}</li>`).join("")}
            </ul>
          `:""}
          <p style="color: #9CA3AF; font-size: 14px; margin: 0 0 15px 0;">
            ${r.length>0?"Other available options:":"Available premium upgrades:"}
          </p>
          ${e?.tier==="Grassroots"?`
            <ul style="margin: 0; padding-left: 20px; color: #D1D5DB; line-height: 1.8;">
              ${r.includes("Custom Fight Banner Graphics")?"":"<li> Custom Fight Banner Graphics ($500-$800/event)</li>"}
              ${r.includes("Professional Event Photography")?"":"<li> Professional Event Photography ($800-$1,200/event)</li>"}
              ${r.includes("Full Recording Package")?"":"<li> Full Recording Package ($500-$800/event)</li>"}
            </ul>
          `:e?.tier==="Regional"?`
            <ul style="margin: 0; padding-left: 20px; color: #D1D5DB; line-height: 1.8;">
              ${r.includes("Premium Camera Setup")?"":"<li> Premium Camera Setup ($1,500-$3,000/event)</li>"}
              ${r.includes("Social Media Content Package")?"":"<li> Social Media Content Package ($1,000-$2,000/event)</li>"}
              ${r.includes("Professional Event Photography")?"":"<li> Professional Event Photography ($800-$1,200/event)</li>"}
              ${r.includes("Custom Fight Banner Graphics")?"":"<li> Custom Fight Banner Graphics ($500-$800/event)</li>"}
            </ul>
          `:`
            <ul style="margin: 0; padding-left: 20px; color: #D1D5DB; line-height: 1.8;">
              ${r.includes("Premium Camera Setup")?"":"<li> Premium Camera Setup ($1,500-$3,000/event)</li>"}
              ${r.includes("Social Media Content Package")?"":"<li> Social Media Content Package ($1,000-$2,000/event)</li>"}
              ${r.includes("Ongoing Content Strategy")?"":"<li> Ongoing Content Strategy ($2,000-$4,000/month)</li>"}
              ${r.includes("Full Premium Package")?"":"<li> Full Premium Package Bundle ($4,000-$6,000/event)</li>"}
            </ul>
          `}
          <p style="color: #6B7280; font-size: 12px; margin: 15px 0 0 0; font-style: italic;">
            * Your revenue share applies regardless of add-ons selected
          </p>
        </div>

        <!-- Revenue Projection -->
        <div style="background: #2d2d2d; border: 2px solid #10B981; border-radius: 12px; padding: 30px; margin-bottom: 30px;">
          <h2 style="color: #10B981; font-size: 24px; margin: 0 0 20px 0; font-weight: bold;">Your Revenue Projection</h2>
          
          <div style="background: #065F46; border: 2px solid #10B981; border-radius: 8px; padding: 20px; margin-bottom: 20px; text-align: center;">
            <p style="color: #D1FAE5; font-size: 14px; margin: 0 0 10px 0;">Your Production Cost</p>
            <p style="color: #6EE7B7; font-size: 36px; font-weight: bold; margin: 0;">$0</p>
            <p style="color: #A7F3D0; font-size: 12px; margin: 10px 0 0 0;">Zero upfront investment required</p>
          </div>
          
          <table style="width: 100%; border-collapse: collapse;">
            <tr>
              <td style="padding: 12px 0; color: #9CA3AF; font-size: 14px; border-bottom: 1px solid #374151;">Estimated PPV Purchases Per Event:</td>
              <td style="padding: 12px 0; color: #60A5FA; font-size: 16px; font-weight: bold; text-align: right; border-bottom: 1px solid #374151;">${Math.round(e?.potentialStreamingRevenue?.viewerEstimate*.6).toLocaleString()}</td>
            </tr>
            <tr>
              <td style="padding: 12px 0; color: #9CA3AF; font-size: 14px; border-bottom: 1px solid #374151;">Your Revenue Per Event:</td>
              <td style="padding: 12px 0; color: #10B981; font-size: 16px; font-weight: bold; text-align: right; border-bottom: 1px solid #374151;">$${Math.round(e?.potentialStreamingRevenue?.perEvent*.3).toLocaleString()}</td>
            </tr>
            <tr>
              <td style="padding: 12px 0; color: #10B981; font-size: 14px; font-weight: bold;">Your Annual Revenue:</td>
              <td style="padding: 12px 0; color: #10B981; font-size: 20px; font-weight: bold; text-align: right;">$${Math.round(e?.potentialStreamingRevenue?.annual*.3).toLocaleString()}</td>
            </tr>
          </table>
          <p style="color: #6B7280; font-size: 11px; margin: 15px 0 0 0; font-style: italic;">
            * Conservative estimates based on industry benchmarks. 100% pure profit  revenue you weren't generating before at zero cost.
          </p>
        </div>

        <!-- Contact Information -->
        <div style="background: #2d2d2d; border: 2px solid #F83B3B; border-radius: 12px; padding: 30px; margin-bottom: 20px;">
          <h2 style="color: #F83B3B; font-size: 24px; margin: 0 0 20px 0; font-weight: bold;">Next Steps</h2>
          <p style="color: #D1D5DB; font-size: 14px; margin: 0 0 20px 0;">
            Ready to elevate your combat sports events? Contact us to discuss this proposal:
          </p>
          <table style="width: 100%;">
            <tr>
              <td style="padding: 8px 0; color: #9CA3AF; font-size: 14px;">Email:</td>
              <td style="padding: 8px 0; color: #60A5FA; font-size: 14px;">info@fitfocusmedia.com.au</td>
            </tr>
            <tr>
              <td style="padding: 8px 0; color: #9CA3AF; font-size: 14px;">Website:</td>
              <td style="padding: 8px 0; color: #60A5FA; font-size: 14px;">fitfocusmedia.com.au</td>
            </tr>
          </table>
        </div>

        <!-- Footer -->
        <div style="text-align: center; margin-top: 40px; padding-top: 20px; border-top: 1px solid #374151;">
          <p style="color: #6B7280; font-size: 12px; margin: 0;">
             2026 Fit Focus Media | Professional Combat Sports Production
          </p>
        </div>
      </div>
    `;const u={margin:0,filename:`${t.orgName.replace(/\s/g,"-")}-proposal.pdf`,image:{type:"jpeg",quality:.98},html2canvas:{scale:2,backgroundColor:"#1a1a1a"},jsPDF:{unit:"in",format:"letter",orientation:"portrait"}};ePe().set(u).from(c).save()},o=()=>{confirm("Start a new proposal? Your current data will be cleared.")&&i(1)};return s.jsx("section",{className:"min-h-screen py-12 sm:py-20 px-4",children:s.jsxs("div",{className:"max-w-5xl mx-auto",children:[s.jsxs(Dr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center mb-8 sm:mb-12",children:[s.jsx(Dr.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:200},className:"inline-flex items-center justify-center w-16 h-16 sm:w-20 sm:h-20 bg-green-600 rounded-full mb-6",children:s.jsx(r2,{className:"w-10 h-10 sm:w-12 sm:h-12 text-white"})}),s.jsx("h2",{className:"text-3xl sm:text-4xl md:text-5xl font-black mb-4",children:s.jsx("span",{className:"text-gradient",children:"Your Proposal is Ready!"})}),s.jsxs("p",{className:"text-base sm:text-lg md:text-xl text-gray-300 max-w-2xl mx-auto",children:["Here's what we've prepared for ",s.jsx("span",{className:"text-primary-400 font-bold",children:t.orgName})]})]}),s.jsx(Dr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},className:"bg-gradient-to-r from-primary-900/40 to-orange-900/40 border-2 border-primary-600 rounded-xl p-6 sm:p-8 mb-8",children:s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-sm text-gray-300 mb-2",children:"Your Tier"}),s.jsx("p",{className:"text-2xl sm:text-3xl font-black text-white",children:e?.tier})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-sm text-gray-300 mb-2",children:"Your Production Cost"}),s.jsx("p",{className:"text-xl sm:text-2xl font-black text-green-400",children:"$0"}),s.jsx("p",{className:"text-xs text-green-300 mt-1",children:"Zero upfront investment"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-sm text-gray-300 mb-2",children:"Your Annual Revenue"}),s.jsxs("p",{className:"text-2xl sm:text-3xl font-black text-green-400",children:["$",Math.round(e?.potentialStreamingRevenue?.annual*.3).toLocaleString()]}),s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Revenue you weren't making before"})]})]})}),r.length>0&&s.jsxs(Dr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.35},className:"bg-dark-800 border border-green-600 rounded-xl p-6 sm:p-8 mb-8",children:[s.jsxs("h3",{className:"text-xl sm:text-2xl font-black text-white mb-4 flex items-center gap-2",children:[s.jsx(r2,{className:"w-6 h-6 text-green-400"}),"Selected Premium Add-Ons"]}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:r.map((c,u)=>s.jsxs("div",{className:"flex items-start gap-3 p-3 bg-dark-900 rounded-lg border border-green-600/30",children:[s.jsx("div",{className:"flex-shrink-0 w-6 h-6 bg-green-500 rounded-full flex items-center justify-center mt-0.5",children:s.jsx(r2,{className:"w-4 h-4 text-white"})}),s.jsx("span",{className:"text-green-400 font-semibold text-sm sm:text-base",children:c})]},u))})]}),s.jsxs(Dr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},className:"bg-dark-800 border border-gray-700 rounded-xl p-6 sm:p-8 mb-8",children:[s.jsxs("div",{className:"flex items-start gap-4 mb-6",children:[s.jsx(Uhe,{className:"w-10 h-10 sm:w-12 sm:h-12 text-primary-500 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-2xl sm:text-3xl font-black text-white mb-2",children:"Next Steps"}),s.jsx("p",{className:"text-gray-300 text-sm sm:text-base",children:"Let's turn this proposal into reality"})]})]}),s.jsx("div",{className:"space-y-4",children:[{step:"1",title:"Schedule a Consultation",desc:"Free 30-minute call to discuss your specific needs and answer questions"},{step:"2",title:"Refine Your Package",desc:"We'll customize the service package to perfectly match your requirements"},{step:"3",title:"Event Planning",desc:"Work with our team to plan production logistics and content strategy"},{step:"4",title:"Production Day",desc:"Sit back while we deliver broadcast-quality coverage of your event"}].map((c,u)=>s.jsxs(Dr.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.5+u*.1},className:"flex gap-4 p-4 bg-dark-900 rounded-lg border border-gray-700 hover:border-primary-600/50 transition-colors",children:[s.jsx("div",{className:"flex-shrink-0 w-10 h-10 sm:w-12 sm:h-12 bg-primary-600 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-lg sm:text-xl font-black text-white",children:c.step})}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-base sm:text-lg font-bold text-white mb-1",children:c.title}),s.jsx("p",{className:"text-sm text-gray-400",children:c.desc})]})]},u))})]}),s.jsx(Dr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.6},className:"bg-dark-800 border border-gray-700 rounded-xl p-6 sm:p-8 mb-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"flex justify-center mb-4",children:[1,2,3,4,5].map(c=>s.jsx("svg",{className:"w-6 h-6 text-amber-500",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},c))}),s.jsx("p",{className:"text-base sm:text-lg text-gray-300 italic mb-4",children:`"Brandon's team delivered exactly what we needed. Professional coverage, quick turnaround on highlights, and our sponsors loved the exposure. Worth every dollar."`}),s.jsx("p",{className:"text-sm text-gray-500",children:" Combat Sports Promoter, QLD"})]})}),s.jsx(Dr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.7},className:"bg-gradient-to-r from-green-900/30 to-emerald-900/30 border-2 border-green-600 rounded-xl p-6 sm:p-8 mb-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-4xl mb-4",children:""}),s.jsx("h3",{className:"text-2xl sm:text-3xl font-black text-white mb-4",children:"Our Satisfaction Guarantee"}),s.jsx("p",{className:"text-base sm:text-lg text-gray-200 max-w-2xl mx-auto leading-relaxed",children:"We're confident you'll love our work. If you're not completely satisfied with your first event's media package, we'll re-edit the entire deliverable at no additional cost."}),s.jsx("p",{className:"text-sm text-green-400 mt-4 font-semibold",children:"Plus: Free consultation with absolutely no commitment required."})]})}),s.jsxs(Dr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.8},className:"bg-dark-800 border border-gray-700 rounded-xl p-6 sm:p-8 mb-8",children:[s.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-6 text-center",children:"Get In Touch"}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6",children:[s.jsxs("a",{href:"mailto:info@fitfocusmedia.com.au?subject=Combat Sports Media Proposal - ${formData.orgName}",className:"flex items-center gap-3 p-4 sm:p-5 bg-primary-600 hover:bg-primary-700 text-white rounded-lg transition-all hover:scale-[1.02] group",children:[s.jsx(tu,{className:"w-6 h-6 sm:w-8 sm:h-8 group-hover:rotate-12 transition-transform"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-bold text-sm sm:text-base",children:"Email Us"}),s.jsx("p",{className:"text-xs sm:text-sm text-white/80",children:"info@fitfocusmedia.com.au"})]})]}),s.jsxs("a",{href:"mailto:info@fitfocusmedia.com.au?subject=Consultation Request - ${formData.orgName}&body=Hi Brandon,%0D%0A%0D%0AI'd like to schedule a consultation to discuss media production for ${formData.orgName}.%0D%0A%0D%0APlease send me your available times.%0D%0A%0D%0AThanks!",className:"flex items-center gap-3 p-4 sm:p-5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-all hover:scale-[1.02] group",children:[s.jsx(ml,{className:"w-6 h-6 sm:w-8 sm:h-8 group-hover:rotate-12 transition-transform"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-bold text-sm sm:text-base",children:"Request a Call"}),s.jsx("p",{className:"text-xs sm:text-sm text-white/80",children:"We'll send scheduling options"})]})]})]}),s.jsx("div",{className:"text-center",children:s.jsx("p",{className:"text-sm text-gray-400",children:"Response time: Usually within 24 hours"})})]}),s.jsxs(Dr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:1},className:"space-y-3",children:[s.jsxs("button",{onClick:a,className:"w-full flex items-center justify-center gap-3 px-6 py-4 bg-green-600 hover:bg-green-700 text-white font-bold rounded-lg transition-all hover:scale-[1.02] text-base sm:text-lg",children:[s.jsx(yf,{className:"w-5 h-5 sm:w-6 sm:h-6"}),"Download Proposal PDF"]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("button",{onClick:n,className:"flex-1 flex items-center justify-center gap-2 px-6 py-4 bg-dark-700 hover:bg-dark-600 text-white font-bold rounded-lg transition-all text-base sm:text-lg",children:[s.jsx(tp,{className:"w-5 h-5"}),s.jsx("span",{className:"hidden sm:inline",children:"Back"})]}),s.jsx("button",{onClick:o,className:"flex-1 flex items-center justify-center gap-2 px-6 py-4 bg-dark-700 hover:bg-dark-600 text-white font-semibold rounded-lg transition-all text-sm sm:text-base",children:"New Proposal"}),s.jsx("button",{onClick:()=>i(2),className:"flex-1 flex items-center justify-center gap-2 px-6 py-4 bg-primary-600 hover:bg-primary-700 text-white font-semibold rounded-lg transition-all text-sm sm:text-base",children:"Edit Details"})]})]}),s.jsx(Dr.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1.2},className:"mt-12 text-center",children:s.jsx("p",{className:"text-sm text-gray-500",children:" 2026 Fit Focus Media | Professional Combat Sports Production"})})]})})};function D5(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function rPe(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function c(d){try{l(n.next(d))}catch(f){o(f)}}function u(d){try{l(n.throw(d))}catch(f){o(f)}}function l(d){d.done?a(d.value):i(d.value).then(c,u)}l((n=n.apply(t,e||[])).next())})}const nPe=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class XM extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}}class iPe extends XM{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class AV extends XM{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class pV extends XM{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var KP;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(KP||(KP={}));class sPe{constructor(e,{headers:r={},customFetch:n,region:i=KP.Any}={}){this.url=e,this.headers=r,this.region=i,this.fetch=nPe(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return rPe(this,arguments,void 0,function*(r,n={}){var i;let a,o;try{const{headers:c,method:u,body:l,signal:d,timeout:f}=n;let m={},{region:p}=n;p||(p=this.region);const g=new URL(`${this.url}/${r}`);p&&p!=="any"&&(m["x-region"]=p,g.searchParams.set("forceFunctionRegion",p));let y;l&&(c&&!Object.prototype.hasOwnProperty.call(c,"Content-Type")||!c)?typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(m["Content-Type"]="application/octet-stream",y=l):typeof l=="string"?(m["Content-Type"]="text/plain",y=l):typeof FormData<"u"&&l instanceof FormData?y=l:(m["Content-Type"]="application/json",y=JSON.stringify(l)):l&&typeof l!="string"&&!(typeof Blob<"u"&&l instanceof Blob)&&!(l instanceof ArrayBuffer)&&!(typeof FormData<"u"&&l instanceof FormData)?y=JSON.stringify(l):y=l;let x=d;f&&(o=new AbortController,a=setTimeout(()=>o.abort(),f),d?(x=o.signal,d.addEventListener("abort",()=>o.abort())):x=o.signal);const w=yield this.fetch(g.toString(),{method:u||"POST",headers:Object.assign(Object.assign(Object.assign({},m),this.headers),c),body:y,signal:x}).catch(C=>{throw new iPe(C)}),_=w.headers.get("x-relay-error");if(_&&_==="true")throw new AV(w);if(!w.ok)throw new pV(w);let E=((i=w.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),N;return E==="application/json"?N=yield w.json():E==="application/octet-stream"||E==="application/pdf"?N=yield w.blob():E==="text/event-stream"?N=w:E==="multipart/form-data"?N=yield w.formData():N=yield w.text(),{data:N,error:null,response:w}}catch(c){return{data:null,error:c,response:c instanceof pV||c instanceof AV?c.context:void 0}}finally{a&&clearTimeout(a)}})}}var aPe=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},oPe=class{constructor(t){var e,r;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(r=t.isMaybeSingle)!==null&&r!==void 0?r:!1,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let i=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{let o=null,c=null,u=null,l=a.status,d=a.statusText;if(a.ok){var f,m;if(r.method!=="HEAD"){var p;const w=await a.text();w===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((p=r.headers.get("Accept"))===null||p===void 0)&&p.includes("application/vnd.pgrst.plan+text"))?c=w:c=JSON.parse(w))}const y=(f=r.headers.get("Prefer"))===null||f===void 0?void 0:f.match(/count=(exact|planned|estimated)/),x=(m=a.headers.get("content-range"))===null||m===void 0?void 0:m.split("/");y&&x&&x.length>1&&(u=parseInt(x[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(c)&&(c.length>1?(o={code:"PGRST116",details:`Results contain ${c.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},c=null,u=null,l=406,d="Not Acceptable"):c.length===1?c=c[0]:c=null)}else{var g;const y=await a.text();try{o=JSON.parse(y),Array.isArray(o)&&a.status===404&&(c=[],o=null,l=200,d="OK")}catch{a.status===404&&y===""?(l=204,d="No Content"):o={message:y}}if(o&&r.isMaybeSingle&&(!(o==null||(g=o.details)===null||g===void 0)&&g.includes("0 rows"))&&(o=null,l=200,d="OK"),o&&r.shouldThrowOnError)throw new aPe(o)}return{error:o,data:c,count:u,status:l,statusText:d}});return this.shouldThrowOnError||(i=i.catch(a=>{var o;let c="";const u=a?.cause;if(u){var l,d,f,m;const g=(l=u?.message)!==null&&l!==void 0?l:"",y=(d=u?.code)!==null&&d!==void 0?d:"";c=`${(f=a?.name)!==null&&f!==void 0?f:"FetchError"}: ${a?.message}`,c+=`

Caused by: ${(m=u?.name)!==null&&m!==void 0?m:"Error"}: ${g}`,y&&(c+=` (${y})`),u?.stack&&(c+=`
${u.stack}`)}else{var p;c=(p=a?.stack)!==null&&p!==void 0?p:""}return{error:{message:`${(o=a?.name)!==null&&o!==void 0?o:"FetchError"}: ${a?.message}`,details:c,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),i.then(t,e)}returns(){return this}overrideTypes(){return this}},lPe=class extends oPe{select(t){let e=!1;const r=(t??"*").split("").map(n=>/\s/.test(n)&&!e?"":(n==='"'&&(e=!e),n)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:r,foreignTable:n,referencedTable:i=n}={}){const a=i?`${i}.order`:"order",o=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${o?`${o},`:""}${t}.${e?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:r=e}={}){const n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${t}`),this}range(t,e,{foreignTable:r,referencedTable:n=r}={}){const i=typeof n>"u"?"offset":`${n}.offset`,a=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(a,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:r=!1,buffers:n=!1,wal:i=!1,format:a="text"}={}){var o;const c=[t?"analyze":null,e?"verbose":null,r?"settings":null,n?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${u}"; options=${c};`),a==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const gV=new RegExp("[,()]");var Tx=class extends lPe{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const r=Array.from(new Set(e)).map(n=>typeof n=="string"&&gV.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}notIn(t,e){const r=Array.from(new Set(e)).map(n=>typeof n=="string"&&gV.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(t,`not.in.(${r})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:r,type:n}={}){let i="";n==="plain"?i="pl":n==="phrase"?i="ph":n==="websearch"&&(i="w");const a=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${i}fts${a}.${e}`),this}match(t){return Object.entries(t).forEach(([e,r])=>{this.url.searchParams.append(e,`eq.${r}`)}),this}not(t,e,r){return this.url.searchParams.append(t,`not.${e}.${r}`),this}or(t,{foreignTable:e,referencedTable:r=e}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${t})`),this}filter(t,e,r){return this.url.searchParams.append(t,`${e}.${r}`),this}},cPe=class{constructor(t,{headers:e={},schema:r,fetch:n}){this.url=t,this.headers=new Headers(e),this.schema=r,this.fetch=n}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(t,e){const{head:r=!1,count:n}=e??{},i=r?"HEAD":"GET";let a=!1;const o=(t??"*").split("").map(l=>/\s/.test(l)&&!a?"":(l==='"'&&(a=!a),l)).join(""),{url:c,headers:u}=this.cloneRequestState();return c.searchParams.set("select",o),n&&u.append("Prefer",`count=${n}`),new Tx({method:i,url:c,headers:u,schema:this.schema,fetch:this.fetch})}insert(t,{count:e,defaultToNull:r=!0}={}){var n;const i="POST",{url:a,headers:o}=this.cloneRequestState();if(e&&o.append("Prefer",`count=${e}`),r||o.append("Prefer","missing=default"),Array.isArray(t)){const c=t.reduce((u,l)=>u.concat(Object.keys(l)),[]);if(c.length>0){const u=[...new Set(c)].map(l=>`"${l}"`);a.searchParams.set("columns",u.join(","))}}return new Tx({method:i,url:a,headers:o,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}upsert(t,{onConflict:e,ignoreDuplicates:r=!1,count:n,defaultToNull:i=!0}={}){var a;const o="POST",{url:c,headers:u}=this.cloneRequestState();if(u.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),e!==void 0&&c.searchParams.set("on_conflict",e),n&&u.append("Prefer",`count=${n}`),i||u.append("Prefer","missing=default"),Array.isArray(t)){const l=t.reduce((d,f)=>d.concat(Object.keys(f)),[]);if(l.length>0){const d=[...new Set(l)].map(f=>`"${f}"`);c.searchParams.set("columns",d.join(","))}}return new Tx({method:o,url:c,headers:u,schema:this.schema,body:t,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}update(t,{count:e}={}){var r;const n="PATCH",{url:i,headers:a}=this.cloneRequestState();return e&&a.append("Prefer",`count=${e}`),new Tx({method:n,url:i,headers:a,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:t}={}){var e;const r="DELETE",{url:n,headers:i}=this.cloneRequestState();return t&&i.append("Prefer",`count=${t}`),new Tx({method:r,url:n,headers:i,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},uPe=class Ire{constructor(e,{headers:r={},schema:n,fetch:i}={}){this.url=e,this.headers=new Headers(r),this.schemaName=n,this.fetch=i}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new cPe(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Ire(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,r={},{head:n=!1,get:i=!1,count:a}={}){var o;let c;const u=new URL(`${this.url}/rpc/${e}`);let l;const d=p=>p!==null&&typeof p=="object"&&(!Array.isArray(p)||p.some(d)),f=n&&Object.values(r).some(d);f?(c="POST",l=r):n||i?(c=n?"HEAD":"GET",Object.entries(r).filter(([p,g])=>g!==void 0).map(([p,g])=>[p,Array.isArray(g)?`{${g.join(",")}}`:`${g}`]).forEach(([p,g])=>{u.searchParams.append(p,g)})):(c="POST",l=r);const m=new Headers(this.headers);return f?m.set("Prefer",a?`count=${a},return=minimal`:"return=minimal"):a&&m.set("Prefer",`count=${a}`),new Tx({method:c,url:u,headers:m,schema:this.schemaName,body:l,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};class dPe{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const r=globalThis.process;if(r){const n=r.versions;if(n&&n.node){const i=n.node,a=parseInt(i.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const n=this.getWebSocketConstructor();return new n(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const hPe="2.93.3",fPe=`realtime-js/${hPe}`,mPe="1.0.0",Bre="2.0.0",vV=Bre,GP=1e4,APe=1e3,pPe=100;var v0;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(v0||(v0={}));var Ou;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Ou||(Ou={}));var Bm;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Bm||(Bm={}));var WP;(function(t){t.websocket="websocket"})(WP||(WP={}));var Fv;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Fv||(Fv={}));class gPe{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,r){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(e));let n=[e.join_ref,e.ref,e.topic,e.event,e.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(e){var r;return this._isArrayBuffer((r=e.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var r,n;const i=(n=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(e){var r,n;const i=(n=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},o=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(e,r,n){var i,a;const o=e.topic,c=(i=e.ref)!==null&&i!==void 0?i:"",u=(a=e.join_ref)!==null&&a!==void 0?a:"",l=e.payload.event,d=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},f=Object.keys(d).length===0?"":JSON.stringify(d);if(u.length>255)throw new Error(`joinRef length ${u.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`ref length ${c.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`userEvent length ${l.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`metadata length ${f.length} exceeds maximum of 255`);const m=this.USER_BROADCAST_PUSH_META_LENGTH+u.length+c.length+o.length+l.length+f.length,p=new ArrayBuffer(this.HEADER_LENGTH+m);let g=new DataView(p),y=0;g.setUint8(y++,this.KINDS.userBroadcastPush),g.setUint8(y++,u.length),g.setUint8(y++,c.length),g.setUint8(y++,o.length),g.setUint8(y++,l.length),g.setUint8(y++,f.length),g.setUint8(y++,r),Array.from(u,w=>g.setUint8(y++,w.charCodeAt(0))),Array.from(c,w=>g.setUint8(y++,w.charCodeAt(0))),Array.from(o,w=>g.setUint8(y++,w.charCodeAt(0))),Array.from(l,w=>g.setUint8(y++,w.charCodeAt(0))),Array.from(f,w=>g.setUint8(y++,w.charCodeAt(0)));var x=new Uint8Array(p.byteLength+n.byteLength);return x.set(new Uint8Array(p),0),x.set(new Uint8Array(n),p.byteLength),x.buffer}decode(e,r){if(this._isArrayBuffer(e)){let n=this._binaryDecode(e);return r(n)}if(typeof e=="string"){const n=JSON.parse(e),[i,a,o,c,u]=n;return r({join_ref:i,ref:a,topic:o,event:c,payload:u})}return r({})}_binaryDecode(e){const r=new DataView(e),n=r.getUint8(0),i=new TextDecoder;if(n===this.KINDS.userBroadcast)return this._decodeUserBroadcast(e,r,i)}_decodeUserBroadcast(e,r,n){const i=r.getUint8(1),a=r.getUint8(2),o=r.getUint8(3),c=r.getUint8(4);let u=this.HEADER_LENGTH+4;const l=n.decode(e.slice(u,u+i));u=u+i;const d=n.decode(e.slice(u,u+a));u=u+a;const f=n.decode(e.slice(u,u+o));u=u+o;const m=e.slice(u,e.byteLength),p=c===this.JSON_ENCODING?JSON.parse(n.decode(m)):m,g={type:this.BROADCAST_EVENT,event:d,payload:p};return o>0&&(g.meta=JSON.parse(f)),{join_ref:null,ref:null,topic:l,event:this.BROADCAST_EVENT,payload:g}}_isArrayBuffer(e){var r;return e instanceof ArrayBuffer||((r=e?.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(e,r){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([n])=>r.includes(n)))}}class Pre{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var El;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(El||(El={}));const yV=(t,e,r={})=>{var n;const i=(n=r.skipTypes)!==null&&n!==void 0?n:[];return e?Object.keys(e).reduce((a,o)=>(a[o]=vPe(o,t,e,i),a),{}):{}},vPe=(t,e,r,n)=>{const i=e.find(c=>c.name===t),a=i?.type,o=r[t];return a&&!n.includes(a)?Ore(a,o):YP(o)},Ore=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return wPe(e,r)}switch(t){case El.bool:return yPe(e);case El.float4:case El.float8:case El.int2:case El.int4:case El.int8:case El.numeric:case El.oid:return xPe(e);case El.json:case El.jsonb:return bPe(e);case El.timestamp:return _Pe(e);case El.abstime:case El.date:case El.daterange:case El.int4range:case El.int8range:case El.money:case El.reltime:case El.text:case El.time:case El.timestamptz:case El.timetz:case El.tsrange:case El.tstzrange:return YP(e);default:return YP(e)}},YP=t=>t,yPe=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},xPe=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},bPe=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},wPe=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let a;const o=t.slice(1,r);try{a=JSON.parse("["+o+"]")}catch{a=o?o.split(","):[]}return a.map(c=>Ore(e,c))}return t},_Pe=t=>typeof t=="string"?t.replace(" ","T"):t,Rre=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class JL{constructor(e,r,n={},i=GP){this.channel=e,this.event=r,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var xV;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(xV||(xV={}));class d2{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:a,onLeave:o,onSync:c}=this.caller;this.joinRef=this.channel._joinRef(),this.state=d2.syncState(this.state,i,a,o),this.pendingDiffs.forEach(u=>{this.state=d2.syncDiff(this.state,u,a,o)}),this.pendingDiffs=[],c()}),this.channel._on(n.diff,{},i=>{const{onJoin:a,onLeave:o,onSync:c}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=d2.syncDiff(this.state,i,a,o),c())}),this.onJoin((i,a,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:a,newPresences:o})}),this.onLeave((i,a,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:a,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,i){const a=this.cloneDeep(e),o=this.transformState(r),c={},u={};return this.map(a,(l,d)=>{o[l]||(u[l]=d)}),this.map(o,(l,d)=>{const f=a[l];if(f){const m=d.map(x=>x.presence_ref),p=f.map(x=>x.presence_ref),g=d.filter(x=>p.indexOf(x.presence_ref)<0),y=f.filter(x=>m.indexOf(x.presence_ref)<0);g.length>0&&(c[l]=g),y.length>0&&(u[l]=y)}else c[l]=d}),this.syncDiff(a,{joins:c,leaves:u},n,i)}static syncDiff(e,r,n,i){const{joins:a,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(a,(c,u)=>{var l;const d=(l=e[c])!==null&&l!==void 0?l:[];if(e[c]=this.cloneDeep(u),d.length>0){const f=e[c].map(p=>p.presence_ref),m=d.filter(p=>f.indexOf(p.presence_ref)<0);e[c].unshift(...m)}n(c,d,u)}),this.map(o,(c,u)=>{let l=e[c];if(!l)return;const d=u.map(f=>f.presence_ref);l=l.filter(f=>d.indexOf(f.presence_ref)<0),e[c]=l,i(c,l,u),l.length===0&&delete e[c]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const i=e[n];return"metas"in i?r[n]=i.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):r[n]=i,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var bV;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(bV||(bV={}));var h2;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(h2||(h2={}));var Bp;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Bp||(Bp={}));class ub{constructor(e,r={config:{}},n){var i,a;if(this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=Ou.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new JL(this,Bm.join,this.params,this.timeout),this.rejoinTimer=new Pre(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ou.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ou.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Ou.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ou.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Ou.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Bm.reply,{},(o,c)=>{this._trigger(this._replyEventName(c),o)}),this.presence=new d2(this),this.broadcastEndpointURL=Rre(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,r=this.timeout){var n,i,a;if(this.socket.isConnected()||this.socket.connect(),this.state==Ou.closed){const{config:{broadcast:o,presence:c,private:u}}=this.params,l=(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(p=>p.filter))!==null&&i!==void 0?i:[],d=!!this.bindings[h2.PRESENCE]&&this.bindings[h2.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,f={},m={broadcast:o,presence:Object.assign(Object.assign({},c),{enabled:d}),postgres_changes:l,private:u};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(p=>e?.(Bp.CHANNEL_ERROR,p)),this._onClose(()=>e?.(Bp.CLOSED)),this.updateJoinPayload(Object.assign({config:m},f)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:p})=>{var g;if(this.socket._isManualToken()||this.socket.setAuth(),p===void 0){e?.(Bp.SUBSCRIBED);return}else{const y=this.bindings.postgres_changes,x=(g=y?.length)!==null&&g!==void 0?g:0,w=[];for(let _=0;_<x;_++){const E=y[_],{filter:{event:N,schema:C,table:I,filter:D}}=E,U=p&&p[_];if(U&&U.event===N&&ub.isFilterValueEqual(U.schema,C)&&ub.isFilterValueEqual(U.table,I)&&ub.isFilterValueEqual(U.filter,D))w.push(Object.assign(Object.assign({},E),{id:U.id}));else{this.unsubscribe(),this.state=Ou.errored,e?.(Bp.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=w,e&&e(Bp.SUBSCRIBED);return}}).receive("error",p=>{this.state=Ou.errored,e?.(Bp.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{e?.(Bp.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this.state===Ou.joined&&e===h2.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,r,n)}async httpSend(e,r,n={}){var i;if(r==null)return Promise.reject("Payload is required for httpSend()");const a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:r,private:this.private}]})},c=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);if(c.status===202)return{success:!0};let u=c.statusText;try{const l=await c.json();u=l.error||l.message||u}catch{}return Promise.reject(new Error(u))}async send(e,r={}){var n,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:o}=e,c={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(c.Authorization=`Bearer ${this.socket.accessTokenValue}`);const u={method:"POST",headers:c,body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:o,private:this.private}]})};try{const l=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((i=l.body)===null||i===void 0?void 0:i.cancel()),l.ok?"ok":"error"}catch(l){return l.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var o,c,u;const l=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((u=(c=(o=this.params)===null||o===void 0?void 0:o.config)===null||c===void 0?void 0:c.broadcast)===null||u===void 0)&&u.ack)&&a("ok"),l.receive("ok",()=>a("ok")),l.receive("error",()=>a("error")),l.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Ou.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Bm.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(i=>{n=new JL(this,Bm.leave,{},e),n.receive("ok",()=>{r(),i("ok")}).receive("timeout",()=>{r(),i("timed out")}).receive("error",()=>{i("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ou.closed,this.bindings={}}async _fetchWithTimeout(e,r,n){const i=new AbortController,a=setTimeout(()=>i.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:i.signal}));return clearTimeout(a),o}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new JL(this,e,r,n);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>pPe){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var i,a;const o=e.toLocaleLowerCase(),{close:c,error:u,leave:l,join:d}=Bm;if(n&&[c,u,l,d].indexOf(o)>=0&&n!==this._joinRef())return;let m=this._onMessage(o,r,n);if(r&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(p=>{var g,y,x;return((g=p.filter)===null||g===void 0?void 0:g.event)==="*"||((x=(y=p.filter)===null||y===void 0?void 0:y.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===o}).map(p=>p.callback(m,n)):(a=this.bindings[o])===null||a===void 0||a.filter(p=>{var g,y,x,w,_,E;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const N=p.id,C=(g=p.filter)===null||g===void 0?void 0:g.event;return N&&((y=r.ids)===null||y===void 0?void 0:y.includes(N))&&(C==="*"||C?.toLocaleLowerCase()===((x=r.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const N=(_=(w=p?.filter)===null||w===void 0?void 0:w.event)===null||_===void 0?void 0:_.toLocaleLowerCase();return N==="*"||N===((E=r?.event)===null||E===void 0?void 0:E.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof m=="object"&&"ids"in m){const g=m.data,{schema:y,table:x,commit_timestamp:w,type:_,errors:E}=g;m=Object.assign(Object.assign({},{schema:y,table:x,commit_timestamp:w,eventType:_,new:{},old:{},errors:E}),this._getPayloadRecords(g))}p.callback(m,n)})}_isClosed(){return this.state===Ou.closed}_isJoined(){return this.state===Ou.joined}_isJoining(){return this.state===Ou.joining}_isLeaving(){return this.state===Ou.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const i=e.toLocaleLowerCase(),a={type:i,filter:r,callback:n};return this.bindings[i]?this.bindings[i].push(a):this.bindings[i]=[a],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(i=>{var a;return!(((a=i.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===n&&ub.isEqual(i.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}static isFilterValueEqual(e,r){return(e??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Bm.close,{},e)}_onError(e){this._on(Bm.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ou.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=yV(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=yV(e.columns,e.old_record)),r}}const eI=()=>{},uS={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},EPe=[1e3,2e3,5e3,1e4],SPe=1e4,jPe=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class TPe{constructor(e,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=GP,this.transport=null,this.heartbeatIntervalMs=uS.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=eI,this.ref=0,this.reconnectTimer=null,this.vsn=vV,this.logger=eI,this.conn=null,this.sendBuffer=[],this.serializer=new gPe,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=i=>i?(...a)=>i(...a):(...a)=>fetch(...a),!(!((n=r?.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${WP.websocket}`,this.httpEndpoint=Rre(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=dPe.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case v0.connecting:return Fv.Connecting;case v0.open:return Fv.Open;case v0.closing:return Fv.Closing;default:return Fv.Closed}}isConnected(){return this.connectionState()===Fv.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const n=`realtime:${e}`,i=this.getChannels().find(a=>a.topic===n);if(i)return i;{const a=new ub(`realtime:${e}`,r,this);return this.channels.push(a),a}}push(e){const{topic:r,event:n,payload:i,ref:a}=e,o=()=>{this.encode(e,c=>{var u;(u=this.conn)===null||u===void 0||u.send(c)})};this.log("push",`${r} ${n} (${a})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(APe,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},uS.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply"&&r.ref&&r.ref===this.pendingHeartbeatRef){const l=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error",l)}catch(d){this.log("error","error in heartbeat callback",d)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:n,event:i,payload:a,ref:o}=r,c=o?`(${o})`:"",u=a.status||"";this.log("receive",`${u} ${n} ${i} ${c}`.trim(),a),this.channels.filter(l=>l._isMember(n)).forEach(l=>l._trigger(i,a,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===v0.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===v0.open||this.conn.readyState===v0.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e);try{this.heartbeatCallback("error")}catch(r){this.log("error","error in heartbeat callback",r)}}_triggerChanError(){this.channels.forEach(e=>e._trigger(Bm.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",i=new URLSearchParams(r);return`${e}${n}${i}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([jPe],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r,n=!1;if(e)r=e,n=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(i){this.log("error","Error fetching access token from callback",i),r=this.accessTokenValue}else r=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(i=>{const a={access_token:r,version:fPe};r&&i.updateJoinPayload(a),i.joinedOnce&&i._isJoined()&&i._push(Bm.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(r)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new Pre(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},uS.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,n,i,a,o,c,u,l,d,f,m,p;switch(this.transport=(r=e?.transport)!==null&&r!==void 0?r:null,this.timeout=(n=e?.timeout)!==null&&n!==void 0?n:GP,this.heartbeatIntervalMs=(i=e?.heartbeatIntervalMs)!==null&&i!==void 0?i:uS.HEARTBEAT_INTERVAL,this.worker=(a=e?.worker)!==null&&a!==void 0?a:!1,this.accessToken=(o=e?.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(c=e?.heartbeatCallback)!==null&&c!==void 0?c:eI,this.vsn=(u=e?.vsn)!==null&&u!==void 0?u:vV,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=e?.reconnectAfterMs)!==null&&l!==void 0?l:(g=>EPe[g-1]||SPe),this.vsn){case mPe:this.encode=(d=e?.encode)!==null&&d!==void 0?d:((g,y)=>y(JSON.stringify(g))),this.decode=(f=e?.decode)!==null&&f!==void 0?f:((g,y)=>y(JSON.parse(g)));break;case Bre:this.encode=(m=e?.encode)!==null&&m!==void 0?m:this.serializer.encode.bind(this.serializer),this.decode=(p=e?.decode)!==null&&p!==void 0?p:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}var Z2=class extends Error{constructor(t,e){super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&e.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function CPe(t,e,r){const n=new URL(e,t);if(r)for(const[i,a]of Object.entries(r))a!==void 0&&n.searchParams.set(i,a);return n.toString()}async function NPe(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function kPe(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:i,body:a,headers:o}){const c=CPe(t.baseUrl,n,i),u=await NPe(t.auth),l=await e(c,{method:r,headers:{...a?{"Content-Type":"application/json"}:{},...u,...o},body:a?JSON.stringify(a):void 0}),d=await l.text(),f=(l.headers.get("content-type")||"").includes("application/json"),m=f&&d?JSON.parse(d):d;if(!l.ok){const p=f?m:void 0,g=p?.error;throw new Z2(g?.message??`Request failed with status ${l.status}`,{status:l.status,icebergType:g?.type,icebergCode:g?.code,details:p})}return{status:l.status,headers:l.headers,data:m}}}}function dS(t){return t.join("")}var LPe=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:dS(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(t,e){const r={namespace:t.namespace,properties:e?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${dS(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${dS(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${dS(t.namespace)}`}),!0}catch(e){if(e instanceof Z2&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(r){if(r instanceof Z2&&r.status===409)return;throw r}}};function ax(t){return t.join("")}var IPe=class{constructor(t,e="",r){this.client=t,this.prefix=e,this.accessDelegation=r}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ax(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${ax(t.namespace)}/tables`,body:e,headers:r})).data.metadata}async updateTable(t,e){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${ax(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${ax(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String(e?.purge??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ax(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${ax(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(r){if(r instanceof Z2&&r.status===404)return!1;throw r}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(r){if(r instanceof Z2&&r.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw r}}},BPe=class{constructor(t){let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const r=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=kPe({baseUrl:r,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=t.accessDelegation?.join(","),this.namespaceOps=new LPe(this.client,e),this.tableOps=new IPe(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},M5=class extends Error{constructor(t,e="storage",r,n){super(t),this.__isStorageError=!0,this.namespace=e,this.name=e==="vectors"?"StorageVectorsError":"StorageError",this.status=r,this.statusCode=n}};function F5(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var hS=class extends M5{constructor(t,e,r,n="storage"){super(t,n,e,r),this.name=n==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=e,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Dre=class extends M5{constructor(t,e,r="storage"){super(t,r),this.name=r==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=e}};const PPe=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),OPe=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},qP=t=>{if(Array.isArray(t))return t.map(r=>qP(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const i=r.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[i]=qP(n)}),e},RPe=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function J2(t){"@babel/helpers - typeof";return J2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},J2(t)}function DPe(t,e){if(J2(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(J2(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function MPe(t){var e=DPe(t,"string");return J2(e)=="symbol"?e:e+""}function FPe(t,e,r){return(e=MPe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function wV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function _s(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?wV(Object(r),!0).forEach(function(n){FPe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}const _V=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},UPe=async(t,e,r,n)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!r?.noResolveJson){const i=t,a=i.status||500;if(typeof i.json=="function")i.json().then(o=>{const c=o?.statusCode||o?.code||a+"";e(new hS(_V(o),a,c,n))}).catch(()=>{if(n==="vectors"){const o=a+"";e(new hS(i.statusText||`HTTP ${a} error`,a,o,n))}else{const o=a+"";e(new hS(i.statusText||`HTTP ${a} error`,a,o,n))}});else{const o=a+"";e(new hS(i.statusText||`HTTP ${a} error`,a,o,n))}}else e(new Dre(_V(t),t,n))},$Pe=(t,e,r,n)=>{const i={method:t,headers:e?.headers||{}};return t==="GET"||t==="HEAD"||!n?_s(_s({},i),r):(OPe(n)?(i.headers=_s({"Content-Type":"application/json"},e?.headers),i.body=JSON.stringify(n)):i.body=n,e?.duplex&&(i.duplex=e.duplex),_s(_s({},i),r))};async function lw(t,e,r,n,i,a,o){return new Promise((c,u)=>{t(r,$Pe(e,n,i,a)).then(l=>{if(!l.ok)throw l;if(n?.noResolveJson)return l;if(o==="vectors"){const d=l.headers.get("content-type");if(l.headers.get("content-length")==="0"||l.status===204)return{};if(!d||!d.includes("application/json"))return{}}return l.json()}).then(l=>c(l)).catch(l=>UPe(l,u,n,o))})}function Mre(t="storage"){return{get:async(e,r,n,i)=>lw(e,"GET",r,n,i,void 0,t),post:async(e,r,n,i,a)=>lw(e,"POST",r,i,a,n,t),put:async(e,r,n,i,a)=>lw(e,"PUT",r,i,a,n,t),head:async(e,r,n,i)=>lw(e,"HEAD",r,_s(_s({},n),{},{noResolveJson:!0}),i,void 0,t),remove:async(e,r,n,i,a)=>lw(e,"DELETE",r,i,a,n,t)}}const HPe=Mre("storage"),{get:e_,post:Lm,put:XP,head:QPe,remove:ZM}=HPe,bf=Mre("vectors");var N1=class{constructor(t,e={},r,n="storage"){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.fetch=PPe(r),this.namespace=n}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(t){var e=this;try{return{data:await t(),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(F5(r))return{data:null,error:r};throw r}}},zPe=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(F5(e))return{data:null,error:e};throw e}}};let Fre;Fre=Symbol.toStringTag;var VPe=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[Fre]="BlobDownloadBuilder",this.promise=null}asStream(){return new zPe(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(F5(e))return{data:null,error:e};throw e}}};const KPe={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},EV={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var GPe=class extends N1{constructor(t,e={},r,n){super(t,e,n,"storage"),this.bucketId=r}async uploadOrUpdate(t,e,r,n){var i=this;return i.handleOperation(async()=>{let a;const o=_s(_s({},EV),n);let c=_s(_s({},i.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const u=o.metadata;typeof Blob<"u"&&r instanceof Blob?(a=new FormData,a.append("cacheControl",o.cacheControl),u&&a.append("metadata",i.encodeMetadata(u)),a.append("",r)):typeof FormData<"u"&&r instanceof FormData?(a=r,a.has("cacheControl")||a.append("cacheControl",o.cacheControl),u&&!a.has("metadata")&&a.append("metadata",i.encodeMetadata(u))):(a=r,c["cache-control"]=`max-age=${o.cacheControl}`,c["content-type"]=o.contentType,u&&(c["x-metadata"]=i.toBase64(i.encodeMetadata(u))),(typeof ReadableStream<"u"&&a instanceof ReadableStream||a&&typeof a=="object"&&"pipe"in a&&typeof a.pipe=="function")&&!o.duplex&&(o.duplex="half")),n?.headers&&(c=_s(_s({},c),n.headers));const l=i._removeEmptyFolders(e),d=i._getFinalPath(l),f=await(t=="PUT"?XP:Lm)(i.fetch,`${i.url}/object/${d}`,a,_s({headers:c},o?.duplex?{duplex:o.duplex}:{}));return{path:l,id:f.Id,fullPath:f.Key}})}async upload(t,e,r){return this.uploadOrUpdate("POST",t,e,r)}async uploadToSignedUrl(t,e,r,n){var i=this;const a=i._removeEmptyFolders(t),o=i._getFinalPath(a),c=new URL(i.url+`/object/upload/sign/${o}`);return c.searchParams.set("token",e),i.handleOperation(async()=>{let u;const l=_s({upsert:EV.upsert},n),d=_s(_s({},i.headers),{"x-upsert":String(l.upsert)});return typeof Blob<"u"&&r instanceof Blob?(u=new FormData,u.append("cacheControl",l.cacheControl),u.append("",r)):typeof FormData<"u"&&r instanceof FormData?(u=r,u.append("cacheControl",l.cacheControl)):(u=r,d["cache-control"]=`max-age=${l.cacheControl}`,d["content-type"]=l.contentType),{path:a,fullPath:(await XP(i.fetch,c.toString(),u,{headers:d})).Key}})}async createSignedUploadUrl(t,e){var r=this;return r.handleOperation(async()=>{let n=r._getFinalPath(t);const i=_s({},r.headers);e?.upsert&&(i["x-upsert"]="true");const a=await Lm(r.fetch,`${r.url}/object/upload/sign/${n}`,{},{headers:i}),o=new URL(r.url+a.url),c=o.searchParams.get("token");if(!c)throw new M5("No token returned by API");return{signedUrl:o.toString(),path:t,token:c}})}async update(t,e,r){return this.uploadOrUpdate("PUT",t,e,r)}async move(t,e,r){var n=this;return n.handleOperation(async()=>await Lm(n.fetch,`${n.url}/object/move`,{bucketId:n.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r?.destinationBucket},{headers:n.headers}))}async copy(t,e,r){var n=this;return n.handleOperation(async()=>({path:(await Lm(n.fetch,`${n.url}/object/copy`,{bucketId:n.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r?.destinationBucket},{headers:n.headers})).Key}))}async createSignedUrl(t,e,r){var n=this;return n.handleOperation(async()=>{let i=n._getFinalPath(t),a=await Lm(n.fetch,`${n.url}/object/sign/${i}`,_s({expiresIn:e},r?.transform?{transform:r.transform}:{}),{headers:n.headers});const o=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{signedUrl:encodeURI(`${n.url}${a.signedURL}${o}`)}})}async createSignedUrls(t,e,r){var n=this;return n.handleOperation(async()=>{const i=await Lm(n.fetch,`${n.url}/object/sign/${n.bucketId}`,{expiresIn:e,paths:t},{headers:n.headers}),a=r?.download?`&download=${r.download===!0?"":r.download}`:"";return i.map(o=>_s(_s({},o),{},{signedUrl:o.signedURL?encodeURI(`${n.url}${o.signedURL}${a}`):null}))})}download(t,e){const r=typeof e?.transform<"u"?"render/image/authenticated":"object",n=this.transformOptsToQueryString(e?.transform||{}),i=n?`?${n}`:"",a=this._getFinalPath(t),o=()=>e_(this.fetch,`${this.url}/${r}/${a}${i}`,{headers:this.headers,noResolveJson:!0});return new VPe(o,this.shouldThrowOnError)}async info(t){var e=this;const r=e._getFinalPath(t);return e.handleOperation(async()=>qP(await e_(e.fetch,`${e.url}/object/info/${r}`,{headers:e.headers})))}async exists(t){var e=this;const r=e._getFinalPath(t);try{return await QPe(e.fetch,`${e.url}/object/${r}`,{headers:e.headers}),{data:!0,error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(F5(n)&&n instanceof Dre){const i=n.originalError;if([400,404].includes(i?.status))return{data:!1,error:n}}throw n}}getPublicUrl(t,e){const r=this._getFinalPath(t),n=[],i=e?.download?`download=${e.download===!0?"":e.download}`:"";i!==""&&n.push(i);const a=typeof e?.transform<"u"?"render/image":"object",o=this.transformOptsToQueryString(e?.transform||{});o!==""&&n.push(o);let c=n.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${c}`)}}}async remove(t){var e=this;return e.handleOperation(async()=>await ZM(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}))}async list(t,e,r){var n=this;return n.handleOperation(async()=>{const i=_s(_s(_s({},KPe),e),{},{prefix:t||""});return await Lm(n.fetch,`${n.url}/object/list/${n.bucketId}`,i,{headers:n.headers},r)})}async listV2(t,e){var r=this;return r.handleOperation(async()=>{const n=_s({},t);return await Lm(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,n,{headers:r.headers},e)})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const WPe="2.93.3",fE={"X-Client-Info":`storage-js/${WPe}`};var YPe=class extends N1{constructor(t,e={},r,n){const i=new URL(t);n?.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase."));const a=i.href.replace(/\/$/,""),o=_s(_s({},fE),e);super(a,o,r,"storage")}async listBuckets(t){var e=this;return e.handleOperation(async()=>{const r=e.listBucketOptionsToQueryString(t);return await e_(e.fetch,`${e.url}/bucket${r}`,{headers:e.headers})})}async getBucket(t){var e=this;return e.handleOperation(async()=>await e_(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}))}async createBucket(t,e={public:!1}){var r=this;return r.handleOperation(async()=>await Lm(r.fetch,`${r.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:r.headers}))}async updateBucket(t,e){var r=this;return r.handleOperation(async()=>await XP(r.fetch,`${r.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:r.headers}))}async emptyBucket(t){var e=this;return e.handleOperation(async()=>await Lm(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}))}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await ZM(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}))}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},qPe=class extends N1{constructor(t,e={},r){const n=t.replace(/\/$/,""),i=_s(_s({},fE),e);super(n,i,r,"storage")}async createBucket(t){var e=this;return e.handleOperation(async()=>await Lm(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}))}async listBuckets(t){var e=this;return e.handleOperation(async()=>{const r=new URLSearchParams;t?.limit!==void 0&&r.set("limit",t.limit.toString()),t?.offset!==void 0&&r.set("offset",t.offset.toString()),t?.sortColumn&&r.set("sortColumn",t.sortColumn),t?.sortOrder&&r.set("sortOrder",t.sortOrder),t?.search&&r.set("search",t.search);const n=r.toString(),i=n?`${e.url}/bucket?${n}`:`${e.url}/bucket`;return await e_(e.fetch,i,{headers:e.headers})})}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await ZM(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}))}from(t){var e=this;if(!RPe(t))throw new M5("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new BPe({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(r,{get(i,a){const o=i[a];return typeof o!="function"?o:async(...c)=>{try{return{data:await o.apply(i,c),error:null}}catch(u){if(n)throw u;return{data:null,error:u}}}}})}},XPe=class extends N1{constructor(t,e={},r){const n=t.replace(/\/$/,""),i=_s(_s({},fE),{},{"Content-Type":"application/json"},e);super(n,i,r,"vectors")}async createIndex(t){var e=this;return e.handleOperation(async()=>await bf.post(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{})}async getIndex(t,e){var r=this;return r.handleOperation(async()=>await bf.post(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:r.headers}))}async listIndexes(t){var e=this;return e.handleOperation(async()=>await bf.post(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}))}async deleteIndex(t,e){var r=this;return r.handleOperation(async()=>await bf.post(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:r.headers})||{})}},ZPe=class extends N1{constructor(t,e={},r){const n=t.replace(/\/$/,""),i=_s(_s({},fE),{},{"Content-Type":"application/json"},e);super(n,i,r,"vectors")}async putVectors(t){var e=this;if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return e.handleOperation(async()=>await bf.post(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{})}async getVectors(t){var e=this;return e.handleOperation(async()=>await bf.post(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}))}async listVectors(t){var e=this;if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return e.handleOperation(async()=>await bf.post(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}))}async queryVectors(t){var e=this;return e.handleOperation(async()=>await bf.post(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}))}async deleteVectors(t){var e=this;if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return e.handleOperation(async()=>await bf.post(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{})}},JPe=class extends N1{constructor(t,e={},r){const n=t.replace(/\/$/,""),i=_s(_s({},fE),{},{"Content-Type":"application/json"},e);super(n,i,r,"vectors")}async createBucket(t){var e=this;return e.handleOperation(async()=>await bf.post(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{})}async getBucket(t){var e=this;return e.handleOperation(async()=>await bf.post(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}))}async listBuckets(t={}){var e=this;return e.handleOperation(async()=>await bf.post(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}))}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await bf.post(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{})}},eOe=class extends JPe{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new tOe(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,r=this;return e().call(r,t)}async getBucket(t){var e=()=>super.getBucket,r=this;return e().call(r,t)}async listBuckets(t={}){var e=()=>super.listBuckets,r=this;return e().call(r,t)}async deleteBucket(t){var e=()=>super.deleteBucket,r=this;return e().call(r,t)}},tOe=class extends XPe{constructor(t,e,r,n){super(t,e,n),this.vectorBucketName=r}async createIndex(t){var e=()=>super.createIndex,r=this;return e().call(r,_s(_s({},t),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,r=this;return e().call(r,_s(_s({},t),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,r=this;return e().call(r,r.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,r=this;return e().call(r,r.vectorBucketName,t)}index(t){return new rOe(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},rOe=class extends ZPe{constructor(t,e,r,n,i){super(t,e,i),this.vectorBucketName=r,this.indexName=n}async putVectors(t){var e=()=>super.putVectors,r=this;return e().call(r,_s(_s({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(t){var e=()=>super.getVectors,r=this;return e().call(r,_s(_s({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,r=this;return e().call(r,_s(_s({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,r=this;return e().call(r,_s(_s({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,r=this;return e().call(r,_s(_s({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},nOe=class extends YPe{constructor(t,e={},r,n){super(t,e,r,n)}from(t){return new GPe(this.url,this.headers,t,this.fetch)}get vectors(){return new eOe(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new qPe(this.url+"/iceberg",this.headers,this.fetch)}};const Ure="2.93.3",Cx=30*1e3,ZP=3,tI=ZP*Cx,iOe="http://localhost:9999",sOe="supabase.auth.token",aOe={"X-Client-Info":`gotrue-js/${Ure}`},JP="X-Supabase-Api-Version",$re={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},oOe=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,lOe=600*1e3;class t_ extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function Ui(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class cOe extends t_{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function uOe(t){return Ui(t)&&t.name==="AuthApiError"}class Uv extends t_{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class wg extends t_{constructor(e,r,n,i){super(e,n,i),this.name=r,this.status=n}}class lf extends wg{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function rI(t){return Ui(t)&&t.name==="AuthSessionMissingError"}class ox extends wg{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class fS extends wg{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class mS extends wg{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function dOe(t){return Ui(t)&&t.name==="AuthImplicitGrantRedirectError"}class SV extends wg{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class hOe extends wg{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class eO extends wg{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function nI(t){return Ui(t)&&t.name==="AuthRetryableFetchError"}class jV extends wg{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class tO extends wg{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const UC="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),TV=` 	
\r=`.split(""),fOe=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<TV.length;e+=1)t[TV[e].charCodeAt(0)]=-2;for(let e=0;e<UC.length;e+=1)t[UC[e].charCodeAt(0)]=e;return t})();function CV(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(UC[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(UC[n]),e.queuedBits-=6}}function Hre(t,e,r){const n=fOe[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function NV(t){const e=[],r=o=>{e.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},a=o=>{pOe(o,n,r)};for(let o=0;o<t.length;o+=1)Hre(t.charCodeAt(o),i,a);return e.join("")}function mOe(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function AOe(t,e){for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);if(n>55295&&n<=56319){const i=(n-55296)*1024&65535;n=(t.charCodeAt(r+1)-56320&65535|i)+65536,r+=1}mOe(n,e)}}function pOe(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let n=1;n<6;n+=1)if((t>>7-n&1)===0){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function wb(t){const e=[],r={queue:0,queuedBits:0},n=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)Hre(t.charCodeAt(i),r,n);return new Uint8Array(e)}function gOe(t){const e=[];return AOe(t,r=>e.push(r)),new Uint8Array(e)}function Yv(t){const e=[],r={queue:0,queuedBits:0},n=i=>{e.push(i)};return t.forEach(i=>CV(i,r,n)),CV(null,r,n),e.join("")}function vOe(t){return Math.round(Date.now()/1e3)+t}function yOe(){return Symbol("auth-callback")}const Rd=()=>typeof window<"u"&&typeof document<"u",pv={tested:!1,writable:!1},Qre=()=>{if(!Rd())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(pv.tested)return pv.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),pv.tested=!0,pv.writable=!0}catch{pv.tested=!0,pv.writable=!1}return pv.writable};function xOe(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((i,a)=>{e[a]=i})}catch{}return r.searchParams.forEach((n,i)=>{e[i]=n}),e}const zre=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),bOe=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Nx=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},gv=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Pd=async(t,e)=>{await t.removeItem(e)};class U5{constructor(){this.promise=new U5.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}U5.promiseConstructor=Promise;function AS(t){const e=t.split(".");if(e.length!==3)throw new tO("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!oOe.test(e[n]))throw new tO("JWT not in base64url format");return{header:JSON.parse(NV(e[0])),payload:JSON.parse(NV(e[1])),signature:wb(e[2]),raw:{header:e[0],payload:e[1]}}}async function wOe(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function _Oe(t,e){return new Promise((n,i)=>{(async()=>{for(let a=0;a<1/0;a++)try{const o=await t(a);if(!e(a,null,o)){n(o);return}}catch(o){if(!e(a,o)){i(o);return}}})()})}function EOe(t){return("0"+t.toString(16)).substr(-2)}function SOe(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let i="";for(let a=0;a<56;a++)i+=r.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(e),Array.from(e,EOe).join("")}async function jOe(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),i=new Uint8Array(n);return Array.from(i).map(a=>String.fromCharCode(a)).join("")}async function TOe(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await jOe(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function lx(t,e,r=!1){const n=SOe();let i=n;r&&(i+="/PASSWORD_RECOVERY"),await Nx(t,`${e}-code-verifier`,i);const a=await TOe(n);return[a,n===a?"plain":"s256"]}const COe=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function NOe(t){const e=t.headers.get(JP);if(!e||!e.match(COe))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function kOe(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function LOe(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const IOe=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function cx(t){if(!IOe.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function iI(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function BOe(t,e){return new Proxy(t,{get:(r,n,i)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const a=n.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)"||a==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,i)}return!e.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(r,n,i)}})}function kV(t){return JSON.parse(JSON.stringify(t))}const Cv=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),POe=[502,503,504];async function LV(t){var e;if(!bOe(t))throw new eO(Cv(t),0);if(POe.includes(t.status))throw new eO(Cv(t),t.status);let r;try{r=await t.json()}catch(a){throw new Uv(Cv(a),a)}let n;const i=NOe(t);if(i&&i.getTime()>=$re["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new jV(Cv(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new lf}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((a,o)=>a&&typeof o=="string",!0))throw new jV(Cv(r),t.status,r.weak_password.reasons);throw new cOe(Cv(r),t.status||500,n)}const OOe=(t,e,r,n)=>{const i={method:t,headers:e?.headers||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),r))};async function vs(t,e,r,n){var i;const a=Object.assign({},n?.headers);a[JP]||(a[JP]=$re["2024-01-01"].name),n?.jwt&&(a.Authorization=`Bearer ${n.jwt}`);const o=(i=n?.query)!==null&&i!==void 0?i:{};n?.redirectTo&&(o.redirect_to=n.redirectTo);const c=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",u=await ROe(t,e,r+c,{headers:a,noResolveJson:n?.noResolveJson},{},n?.body);return n?.xform?n?.xform(u):{data:Object.assign({},u),error:null}}async function ROe(t,e,r,n,i,a){const o=OOe(e,n,i,a);let c;try{c=await t(r,Object.assign({},o))}catch(u){throw console.error(u),new eO(Cv(u),0)}if(c.ok||await LV(c),n?.noResolveJson)return c;try{return await c.json()}catch(u){await LV(u)}}function Em(t){var e;let r=null;FOe(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=vOe(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function IV(t){const e=Em(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function E0(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function DOe(t){return{data:t,error:null}}function MOe(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:i,verification_type:a}=t,o=D5(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),c={action_link:e,email_otp:r,hashed_token:n,redirect_to:i,verification_type:a},u=Object.assign({},o);return{data:{properties:c,user:u},error:null}}function BV(t){return t}function FOe(t){return t.access_token&&t.refresh_token&&t.expires_in}const sI=["global","local","others"];class UOe{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=zre(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,r=sI[0]){if(sI.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${sI.join(", ")}`);try{return await vs(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Ui(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await vs(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:E0})}catch(n){if(Ui(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=D5(e,["options"]),i=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(i.new_email=n?.newEmail,delete i.newEmail),await vs(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:MOe,redirectTo:r?.redirectTo})}catch(r){if(Ui(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await vs(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:E0})}catch(r){if(Ui(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,i,a,o,c,u;try{const l={nextPage:null,lastPage:0,total:0},d=await vs(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e?.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:BV});if(d.error)throw d.error;const f=await d.json(),m=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(u=(c=d.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&u!==void 0?u:[];return p.length>0&&(p.forEach(g=>{const y=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(g.split(";")[1].split("=")[1]);l[`${x}Page`]=y}),l.total=parseInt(m)),{data:Object.assign(Object.assign({},f),l),error:null}}catch(l){if(Ui(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){cx(e);try{return await vs(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:E0})}catch(r){if(Ui(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){cx(e);try{return await vs(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:E0})}catch(n){if(Ui(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){cx(e);try{return await vs(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:E0})}catch(n){if(Ui(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){cx(e.userId);try{const{data:r,error:n}=await vs(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:r,error:n}}catch(r){if(Ui(r))return{data:null,error:r};throw r}}async _deleteFactor(e){cx(e.userId),cx(e.id);try{return{data:await vs(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(Ui(r))return{data:null,error:r};throw r}}async _listOAuthClients(e){var r,n,i,a,o,c,u;try{const l={nextPage:null,lastPage:0,total:0},d=await vs(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e?.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:BV});if(d.error)throw d.error;const f=await d.json(),m=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(u=(c=d.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&u!==void 0?u:[];return p.length>0&&(p.forEach(g=>{const y=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(g.split(";")[1].split("=")[1]);l[`${x}Page`]=y}),l.total=parseInt(m)),{data:Object.assign(Object.assign({},f),l),error:null}}catch(l){if(Ui(l))return{data:{clients:[]},error:l};throw l}}async _createOAuthClient(e){try{return await vs(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Ui(r))return{data:null,error:r};throw r}}async _getOAuthClient(e){try{return await vs(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Ui(r))return{data:null,error:r};throw r}}async _updateOAuthClient(e,r){try{return await vs(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ui(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(e){try{return await vs(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Ui(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(e){try{return await vs(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Ui(r))return{data:null,error:r};throw r}}}function PV(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}const ux={debug:!!(globalThis&&Qre()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Vre extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class $Oe extends Vre{}async function HOe(t,e,r){ux.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),ux.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async i=>{if(i){ux.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await r()}finally{ux.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw ux.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new $Oe(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(ux.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function QOe(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Kre(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function zOe(t){return parseInt(t,16)}function VOe(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,n=>n.toString(16).padStart(2,"0")).join("")}function KOe(t){var e;const{chainId:r,domain:n,expirationTime:i,issuedAt:a=new Date,nonce:o,notBefore:c,requestId:u,resources:l,scheme:d,uri:f,version:m}=t;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!f)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(m!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${m}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const p=Kre(t.address),g=d?`${d}://${n}`:n,y=t.statement?`${t.statement}
`:"",x=`${g} wants you to sign in with your Ethereum account:
${p}

${y}`;let w=`URI: ${f}
Version: ${m}
Chain ID: ${r}${o?`
Nonce: ${o}`:""}
Issued At: ${a.toISOString()}`;if(i&&(w+=`
Expiration Time: ${i.toISOString()}`),c&&(w+=`
Not Before: ${c.toISOString()}`),u&&(w+=`
Request ID: ${u}`),l){let _=`
Resources:`;for(const E of l){if(!E||typeof E!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${E}`);_+=`
- ${E}`}w+=_}return`${x}
${w}`}class mu extends Error{constructor({message:e,code:r,cause:n,name:i}){var a;super(e,{cause:n}),this.__isWebAuthnError=!0,this.name=(a=i??(n instanceof Error?n.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=r}}class $C extends mu{constructor(e,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:e}),this.name="WebAuthnUnknownError",this.originalError=r}}function GOe({error:t,options:e}){var r,n,i;const{publicKey:a}=e;if(!a)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new mu({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((r=a.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new mu({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((n=a.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new mu({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((i=a.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new mu({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new mu({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new mu({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return a.pubKeyCredParams.filter(c=>c.type==="public-key").length===0?new mu({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new mu({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const o=window.location.hostname;if(Gre(o)){if(a.rp.id!==o)return new mu({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new mu({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new mu({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new mu({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new mu({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function WOe({error:t,options:e}){const{publicKey:r}=e;if(!r)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new mu({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new mu({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const n=window.location.hostname;if(Gre(n)){if(r.rpId!==n)return new mu({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new mu({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new mu({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new mu({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class YOe{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const qOe=new YOe;function XOe(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:r,excludeCredentials:n}=t,i=D5(t,["challenge","user","excludeCredentials"]),a=wb(e).buffer,o=Object.assign(Object.assign({},r),{id:wb(r.id).buffer}),c=Object.assign(Object.assign({},i),{challenge:a,user:o});if(n&&n.length>0){c.excludeCredentials=new Array(n.length);for(let u=0;u<n.length;u++){const l=n[u];c.excludeCredentials[u]=Object.assign(Object.assign({},l),{id:wb(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return c}function ZOe(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:r}=t,n=D5(t,["challenge","allowCredentials"]),i=wb(e).buffer,a=Object.assign(Object.assign({},n),{challenge:i});if(r&&r.length>0){a.allowCredentials=new Array(r.length);for(let o=0;o<r.length;o++){const c=r[o];a.allowCredentials[o]=Object.assign(Object.assign({},c),{id:wb(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return a}function JOe(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t;return{id:t.id,rawId:t.id,response:{attestationObject:Yv(new Uint8Array(t.response.attestationObject)),clientDataJSON:Yv(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function e3e(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t,n=t.getClientExtensionResults(),i=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Yv(new Uint8Array(i.authenticatorData)),clientDataJSON:Yv(new Uint8Array(i.clientDataJSON)),signature:Yv(new Uint8Array(i.signature)),userHandle:i.userHandle?Yv(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Gre(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function OV(){var t,e;return!!(Rd()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function t3e(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new $C("Browser returned unexpected credential type",e)}:{data:null,error:new $C("Empty credential response",e)}}catch(e){return{data:null,error:GOe({error:e,options:t})}}}async function r3e(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new $C("Browser returned unexpected credential type",e)}:{data:null,error:new $C("Empty credential response",e)}}catch(e){return{data:null,error:WOe({error:e,options:t})}}}const n3e={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},i3e={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function HC(...t){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),r=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),n={};for(const i of t)if(i)for(const a in i){const o=i[a];if(o!==void 0)if(Array.isArray(o))n[a]=o;else if(r(o))n[a]=o;else if(e(o)){const c=n[a];e(c)?n[a]=HC(c,o):n[a]=HC(o)}else n[a]=o}return n}function s3e(t,e){return HC(n3e,t,e||{})}function a3e(t,e){return HC(i3e,t,e||{})}class o3e{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:r,friendlyName:n,signal:i},a){var o;try{const{data:c,error:u}=await this.client.mfa.challenge({factorId:e,webauthn:r});if(!c)return{data:null,error:u};const l=i??qOe.createNewAbortSignal();if(c.webauthn.type==="create"){const{user:d}=c.webauthn.credential_options.publicKey;if(!d.name){const f=n;if(f)d.name=`${d.id}:${f}`;else{const p=(await this.client.getUser()).data.user,g=((o=p?.user_metadata)===null||o===void 0?void 0:o.name)||p?.email||p?.id||"User";d.name=`${d.id}:${g}`}}d.displayName||(d.displayName=d.name)}switch(c.webauthn.type){case"create":{const d=s3e(c.webauthn.credential_options.publicKey,a?.create),{data:f,error:m}=await t3e({publicKey:d,signal:l});return f?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:f}},error:null}:{data:null,error:m}}case"request":{const d=a3e(c.webauthn.credential_options.publicKey,a?.request),{data:f,error:m}=await r3e(Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:d,signal:l}));return f?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:f}},error:null}:{data:null,error:m}}}}catch(c){return Ui(c)?{data:null,error:c}:{data:null,error:new Uv("Unexpected error in challenge",c)}}}async _verify({challengeId:e,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:e,webauthn:n})}async _authenticate({factorId:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},a){if(!r)return{data:null,error:new t_("rpId is required for WebAuthn authentication")};try{if(!OV())return{data:null,error:new Uv("Browser does not support WebAuthn",null)};const{data:o,error:c}=await this.challenge({factorId:e,webauthn:{rpId:r,rpOrigins:n},signal:i},{request:a});if(!o)return{data:null,error:c};const{webauthn:u}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:u.type,rpId:r,rpOrigins:n,credential_response:u.credential_response}})}catch(o){return Ui(o)?{data:null,error:o}:{data:null,error:new Uv("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},a){if(!r)return{data:null,error:new t_("rpId is required for WebAuthn registration")};try{if(!OV())return{data:null,error:new Uv("Browser does not support WebAuthn",null)};const{data:o,error:c}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(d=>{var f;return(f=d.data)===null||f===void 0?void 0:f.all.find(m=>m.factor_type==="webauthn"&&m.friendly_name===e&&m.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d?.id}):void 0),{data:null,error:c};const{data:u,error:l}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:i},{create:a});return u?this._verify({factorId:o.id,challengeId:u.challengeId,webauthn:{rpId:r,rpOrigins:n,type:u.webauthn.type,credential_response:u.webauthn.credential_response}}):{data:null,error:l}}catch(o){return Ui(o)?{data:null,error:o}:{data:null,error:new Uv("Unexpected error in register",o)}}}}QOe();const l3e={url:iOe,storageKey:sOe,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:aOe,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function RV(t,e,r){return await r()}const dx={};class r_{get jwks(){var e,r;return(r=(e=dx[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){dx[this.storageKey]=Object.assign(Object.assign({},dx[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=dx[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){dx[this.storageKey]=Object.assign(Object.assign({},dx[this.storageKey]),{cachedAt:e})}constructor(e){var r,n,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const a=Object.assign(Object.assign({},l3e),e);if(this.storageKey=a.storageKey,this.instanceID=(r=r_.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,r_.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.instanceID>0&&Rd()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=a.persistSession,this.autoRefreshToken=a.autoRefreshToken,this.admin=new UOe({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=zre(a.fetch),this.lock=a.lock||RV,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,this.throwOnError=a.throwOnError,this.lockAcquireTimeout=a.lockAcquireTimeout,a.lock?this.lock=a.lock:this.persistSession&&Rd()&&(!((n=globalThis?.navigator)===null||n===void 0)&&n.locks)?this.lock=HOe:this.lock=RV,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new o3e(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:Qre()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=PV(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=PV(this.memoryStorage)),Rd()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o);try{await this._notifyAllSubscribers(o.data.event,o.data.session,!1)}catch(c){this._debug("#broadcastChannel","error",c)}})}this.initialize().catch(o=>{this._debug("#initialize()","error",o)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Ure}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let r={},n="none";if(Rd()&&(r=xOe(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),Rd()&&this.detectSessionInUrl&&n!=="none"){const{data:i,error:a}=await this._getSessionFromURL(r,n);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),dOe(a)){const u=(e=a.details)===null||e===void 0?void 0:e.code;if(u==="identity_already_exists"||u==="identity_not_found"||u==="single_identity_not_deletable")return{error:a}}return{error:a}}const{session:o,redirectType:c}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",c),await this._saveSession(o),setTimeout(async()=>{c==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Ui(r)?this._returnResult({error:r}):this._returnResult({error:new Uv("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,i;try{const a=await vs(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e?.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(i=e?.options)===null||i===void 0?void 0:i.captchaToken}},xform:Em}),{data:o,error:c}=a;if(c||!o)return this._returnResult({data:{user:null,session:null},error:c});const u=o.session,l=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",u)),this._returnResult({data:{user:l,session:u},error:null})}catch(a){if(Ui(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signUp(e){var r,n,i;try{let a;if("email"in e){const{email:d,password:f,options:m}=e;let p=null,g=null;this.flowType==="pkce"&&([p,g]=await lx(this.storage,this.storageKey)),a=await vs(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m?.emailRedirectTo,body:{email:d,password:f,data:(r=m?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:m?.captchaToken},code_challenge:p,code_challenge_method:g},xform:Em})}else if("phone"in e){const{phone:d,password:f,options:m}=e;a=await vs(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(n=m?.data)!==null&&n!==void 0?n:{},channel:(i=m?.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:m?.captchaToken}},xform:Em})}else throw new fS("You must provide either an email or phone number and a password");const{data:o,error:c}=a;if(c||!o)return await Pd(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:c});const u=o.session,l=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",u)),this._returnResult({data:{user:l,session:u},error:null})}catch(a){if(await Pd(this.storage,`${this.storageKey}-code-verifier`),Ui(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithPassword(e){try{let r;if("email"in e){const{email:a,password:o,options:c}=e;r=await vs(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:o,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:IV})}else if("phone"in e){const{phone:a,password:o,options:c}=e;r=await vs(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:o,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:IV})}else throw new fS("You must provide either an email or phone number and a password");const{data:n,error:i}=r;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!n||!n.session||!n.user){const a=new ox;return this._returnResult({data:{user:null,session:null},error:a})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i})}catch(r){if(Ui(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(e){var r,n,i,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;switch(r){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(e){var r,n,i,a,o,c,u,l,d,f,m;let p,g;if("message"in e)p=e.message,g=e.signature;else{const{chain:y,wallet:x,statement:w,options:_}=e;let E;if(Rd())if(typeof x=="object")E=x;else{const G=window;if("ethereum"in G&&typeof G.ethereum=="object"&&"request"in G.ethereum&&typeof G.ethereum.request=="function")E=G.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!_?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");E=x}const N=new URL((r=_?.url)!==null&&r!==void 0?r:window.location.href),C=await E.request({method:"eth_requestAccounts"}).then(G=>G).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!C||C.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const I=Kre(C[0]);let D=(n=_?.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!D){const G=await E.request({method:"eth_chainId"});D=zOe(G)}const U={domain:N.host,address:I,statement:w,uri:N.href,version:"1",chainId:D,nonce:(i=_?.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(o=(a=_?.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(c=_?.signInWithEthereum)===null||c===void 0?void 0:c.expirationTime,notBefore:(u=_?.signInWithEthereum)===null||u===void 0?void 0:u.notBefore,requestId:(l=_?.signInWithEthereum)===null||l===void 0?void 0:l.requestId,resources:(d=_?.signInWithEthereum)===null||d===void 0?void 0:d.resources};p=KOe(U),g=await E.request({method:"personal_sign",params:[VOe(p),I]})}try{const{data:y,error:x}=await vs(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:g},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(m=e.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:Em});if(x)throw x;if(!y||!y.session||!y.user){const w=new ox;return this._returnResult({data:{user:null,session:null},error:w})}return y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),this._returnResult({data:Object.assign({},y),error:x})}catch(y){if(Ui(y))return this._returnResult({data:{user:null,session:null},error:y});throw y}}async signInWithSolana(e){var r,n,i,a,o,c,u,l,d,f,m,p;let g,y;if("message"in e)g=e.message,y=e.signature;else{const{chain:x,wallet:w,statement:_,options:E}=e;let N;if(Rd())if(typeof w=="object")N=w;else{const I=window;if("solana"in I&&typeof I.solana=="object"&&("signIn"in I.solana&&typeof I.solana.signIn=="function"||"signMessage"in I.solana&&typeof I.solana.signMessage=="function"))N=I.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!E?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");N=w}const C=new URL((r=E?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in N&&N.signIn){const I=await N.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},E?.signInWithSolana),{version:"1",domain:C.host,uri:C.href}),_?{statement:_}:null));let D;if(Array.isArray(I)&&I[0]&&typeof I[0]=="object")D=I[0];else if(I&&typeof I=="object"&&"signedMessage"in I&&"signature"in I)D=I;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in D&&"signature"in D&&(typeof D.signedMessage=="string"||D.signedMessage instanceof Uint8Array)&&D.signature instanceof Uint8Array)g=typeof D.signedMessage=="string"?D.signedMessage:new TextDecoder().decode(D.signedMessage),y=D.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in N)||typeof N.signMessage!="function"||!("publicKey"in N)||typeof N!="object"||!N.publicKey||!("toBase58"in N.publicKey)||typeof N.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${C.host} wants you to sign in with your Solana account:`,N.publicKey.toBase58(),..._?["",_,""]:[""],"Version: 1",`URI: ${C.href}`,`Issued At: ${(i=(n=E?.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((a=E?.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${E.signInWithSolana.notBefore}`]:[],...!((o=E?.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${E.signInWithSolana.expirationTime}`]:[],...!((c=E?.signInWithSolana)===null||c===void 0)&&c.chainId?[`Chain ID: ${E.signInWithSolana.chainId}`]:[],...!((u=E?.signInWithSolana)===null||u===void 0)&&u.nonce?[`Nonce: ${E.signInWithSolana.nonce}`]:[],...!((l=E?.signInWithSolana)===null||l===void 0)&&l.requestId?[`Request ID: ${E.signInWithSolana.requestId}`]:[],...!((f=(d=E?.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||f===void 0)&&f.length?["Resources",...E.signInWithSolana.resources.map(D=>`- ${D}`)]:[]].join(`
`);const I=await N.signMessage(new TextEncoder().encode(g),"utf8");if(!I||!(I instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=I}}try{const{data:x,error:w}=await vs(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:Yv(y)},!((m=e.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Em});if(w)throw w;if(!x||!x.session||!x.user){const _=new ox;return this._returnResult({data:{user:null,session:null},error:_})}return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),this._returnResult({data:Object.assign({},x),error:w})}catch(x){if(Ui(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async _exchangeCodeForSession(e){const r=await gv(this.storage,`${this.storageKey}-code-verifier`),[n,i]=(r??"").split("/");try{if(!n&&this.flowType==="pkce")throw new hOe;const{data:a,error:o}=await vs(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Em});if(await Pd(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!a||!a.session||!a.user){const c=new ox;return this._returnResult({data:{user:null,session:null,redirectType:null},error:c})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:Object.assign(Object.assign({},a),{redirectType:i??null}),error:o})}catch(a){if(await Pd(this.storage,`${this.storageKey}-code-verifier`),Ui(a))return this._returnResult({data:{user:null,session:null,redirectType:null},error:a});throw a}}async signInWithIdToken(e){try{const{options:r,provider:n,token:i,access_token:a,nonce:o}=e,c=await vs(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:a,nonce:o,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:Em}),{data:u,error:l}=c;if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!u||!u.session||!u.user){const d=new ox;return this._returnResult({data:{user:null,session:null},error:d})}return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),this._returnResult({data:u,error:l})}catch(r){if(Ui(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(e){var r,n,i,a,o;try{if("email"in e){const{email:c,options:u}=e;let l=null,d=null;this.flowType==="pkce"&&([l,d]=await lx(this.storage,this.storageKey));const{error:f}=await vs(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(r=u?.data)!==null&&r!==void 0?r:{},create_user:(n=u?.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:u?.captchaToken},code_challenge:l,code_challenge_method:d},redirectTo:u?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}if("phone"in e){const{phone:c,options:u}=e,{data:l,error:d}=await vs(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(i=u?.data)!==null&&i!==void 0?i:{},create_user:(a=u?.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:u?.captchaToken},channel:(o=u?.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:l?.message_id},error:d})}throw new fS("You must provide either an email or phone number.")}catch(c){if(await Pd(this.storage,`${this.storageKey}-code-verifier`),Ui(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async verifyOtp(e){var r,n;try{let i,a;"options"in e&&(i=(r=e.options)===null||r===void 0?void 0:r.redirectTo,a=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:c}=await vs(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:i,xform:Em});if(c)throw c;if(!o)throw new Error("An error occurred on token verification.");const u=o.session,l=o.user;return u?.access_token&&(await this._saveSession(u),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",u)),this._returnResult({data:{user:l,session:u},error:null})}catch(i){if(Ui(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(e){var r,n,i,a,o;try{let c=null,u=null;this.flowType==="pkce"&&([c,u]=await lx(this.storage,this.storageKey));const l=await vs(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=e?.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:c,code_challenge_method:u}),headers:this.headers,xform:DOe});return!((a=l.data)===null||a===void 0)&&a.url&&Rd()&&!(!((o=e.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(l.data.url),this._returnResult(l)}catch(c){if(await Pd(this.storage,`${this.storageKey}-code-verifier`),Ui(c))return this._returnResult({data:null,error:c});throw c}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new lf;const{error:i}=await vs(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(e){if(Ui(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:i,options:a}=e,{error:o}=await vs(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:a?.captchaToken}},redirectTo:a?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in e){const{phone:n,type:i,options:a}=e,{data:o,error:c}=await vs(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:a?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o?.message_id},error:c})}throw new fS("You must provide either an email or phone number and a type")}catch(r){if(Ui(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await gv(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<tI:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const o=await gv(this.userStorage,this.storageKey+"-user");o?.user?e.user=o.user:e.user=iI()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};e.user=BOe(e.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?this._returnResult({data:{session:null},error:a}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(e){try{return e?await vs(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:E0}):await this._useSession(async r=>{var n,i,a;const{data:o,error:c}=r;if(c)throw c;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new lf}:await vs(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0,xform:E0})})}catch(r){if(Ui(r))return rI(r)&&(await this._removeSession(),await Pd(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:i,error:a}=n;if(a)throw a;if(!i.session)throw new lf;const o=i.session;let c=null,u=null;this.flowType==="pkce"&&e.email!=null&&([c,u]=await lx(this.storage,this.storageKey));const{data:l,error:d}=await vs(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:c,code_challenge_method:u}),jwt:o.access_token,xform:E0});if(d)throw d;return o.user=l.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(n){if(await Pd(this.storage,`${this.storageKey}-code-verifier`),Ui(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new lf;const r=Date.now()/1e3;let n=r,i=!0,a=null;const{payload:o}=AS(e.access_token);if(o.exp&&(n=o.exp,i=n<=r),i){const{data:c,error:u}=await this._callRefreshToken(e.refresh_token);if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!c)return{data:{user:null,session:null},error:null};a=c}else{const{data:c,error:u}=await this._getUser(e.access_token);if(u)return this._returnResult({data:{user:null,session:null},error:u});a={access_token:e.access_token,refresh_token:e.refresh_token,user:c.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return this._returnResult({data:{user:a.user,session:a},error:null})}catch(r){if(Ui(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:o,error:c}=r;if(c)throw c;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!e?.refresh_token)throw new lf;const{data:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?this._returnResult({data:{user:null,session:null},error:a}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(Ui(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(e,r){try{if(!Rd())throw new mS("No browser detected.");if(e.error||e.error_description||e.error_code)throw new mS(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new SV("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new mS("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new SV("No code detected.");const{data:_,error:E}=await this._exchangeCodeForSession(e.code);if(E)throw E;const N=new URL(window.location.href);return N.searchParams.delete("code"),window.history.replaceState(window.history.state,"",N.toString()),{data:{session:_.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:i,access_token:a,refresh_token:o,expires_in:c,expires_at:u,token_type:l}=e;if(!a||!c||!o||!l)throw new mS("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(c);let m=d+f;u&&(m=parseInt(u));const p=m-d;p*1e3<=Cx&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${f}s`);const g=m-f;d-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,m,d):d-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,m,d);const{data:y,error:x}=await this._getUser(a);if(x)throw x;const w={provider_token:n,provider_refresh_token:i,access_token:a,expires_in:f,expires_at:m,refresh_token:o,token_type:l,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:w,redirectType:e.type},error:null})}catch(n){if(Ui(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await gv(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:i,error:a}=r;if(a&&!rI(a))return this._returnResult({error:a});const o=(n=i.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:c}=await this.admin.signOut(o,e);if(c&&!(uOe(c)&&(c.status===404||c.status===401||c.status===403)||rI(c)))return this._returnResult({error:c})}return e!=="others"&&(await this._removeSession(),await Pd(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const r=yOe(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,i;try{const{data:{session:a},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,r={}){let n=null,i=null;this.flowType==="pkce"&&([n,i]=await lx(this.storage,this.storageKey,!0));try{return await vs(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(await Pd(this.storage,`${this.storageKey}-code-verifier`),Ui(a))return this._returnResult({data:null,error:a});throw a}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(r){if(Ui(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var r;try{const{data:n,error:i}=await this._useSession(async a=>{var o,c,u,l,d;const{data:f,error:m}=a;if(m)throw m;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(c=e.options)===null||c===void 0?void 0:c.scopes,queryParams:(u=e.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:!0});return await vs(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(l=f.session)===null||l===void 0?void 0:l.access_token)!==null&&d!==void 0?d:void 0})});if(i)throw i;return Rd()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n?.url),this._returnResult({data:{provider:e.provider,url:n?.url},error:null})}catch(n){if(Ui(n))return this._returnResult({data:{provider:e.provider,url:null},error:n});throw n}}async linkIdentityIdToken(e){return await this._useSession(async r=>{var n;try{const{error:i,data:{session:a}}=r;if(i)throw i;const{options:o,provider:c,token:u,access_token:l,nonce:d}=e,f=await vs(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=a?.access_token)!==null&&n!==void 0?n:void 0,body:{provider:c,id_token:u,access_token:l,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:o?.captchaToken}},xform:Em}),{data:m,error:p}=f;return p?this._returnResult({data:{user:null,session:null},error:p}):!m||!m.session||!m.user?this._returnResult({data:{user:null,session:null},error:new ox}):(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("USER_UPDATED",m.session)),this._returnResult({data:m,error:p}))}catch(i){if(await Pd(this.storage,`${this.storageKey}-code-verifier`),Ui(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,i;const{data:a,error:o}=r;if(o)throw o;return await vs(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0})})}catch(r){if(Ui(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await _Oe(async i=>(i>0&&await wOe(200*Math.pow(2,i-1)),this._debug(r,"refreshing attempt",i),await vs(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Em})),(i,a)=>{const o=200*Math.pow(2,i);return a&&nI(a)&&Date.now()+o-n<Cx})}catch(n){if(this._debug(r,"error",n),Ui(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),Rd()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const i=await gv(this.storage,this.storageKey);if(i&&this.userStorage){let o=await gv(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:i.user},await Nx(this.userStorage,this.storageKey+"-user",o)),i.user=(e=o?.user)!==null&&e!==void 0?e:iI()}else if(i&&!i.user&&!i.user){const o=await gv(this.storage,this.storageKey+"-user");o&&o?.user?(i.user=o.user,await Pd(this.storage,this.storageKey+"-user"),await Nx(this.storage,this.storageKey,i)):i.user=iI()}if(this._debug(n,"session from storage",i),!this._isValidSession(i)){this._debug(n,"session is not valid"),i!==null&&await this._removeSession();return}const a=((r=i.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<tI;if(this._debug(n,`session has${a?"":" not"} expired with margin of ${tI}s`),a){if(this.autoRefreshToken&&i.refresh_token){const{error:o}=await this._callRefreshToken(i.refresh_token);o&&(console.error(o),nI(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:c}=await this._getUser(i.access_token);!c&&o?.user?(i.user=o.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(n,"error",i),console.error(i);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new lf;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new U5;const{data:a,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!a.session)throw new lf;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const c={data:a.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(a){if(this._debug(i,"error",a),Ui(a)){const o={data:null,error:a};return nI(a)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(a),a}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,r,n=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const a=[],o=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(e,r)}catch(u){a.push(u)}});if(await Promise.all(o),a.length>0){for(let c=0;c<a.length;c+=1)console.error(a[c]);throw a[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Pd(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},e),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Nx(this.userStorage,this.storageKey+"-user",{user:r.user});const i=Object.assign({},r);delete i.user;const a=kV(i);await Nx(this.storage,this.storageKey,a)}else{const i=kV(r);await Nx(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Pd(this.storage,this.storageKey),await Pd(this.storage,this.storageKey+"-code-verifier"),await Pd(this.storage,this.storageKey+"-user"),this.userStorage&&await Pd(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Rd()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Cx);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e);const r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);const r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-e)/Cx);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Cx}ms, refresh threshold is ${ZP} ticks`),i<=ZP&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Vre)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Rd()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(e){this._debug("#visibilityChangedCallback","error",e)}},window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const i=[`provider=${encodeURIComponent(r)}`];if(n?.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n?.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[a,o]=await lx(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(c.toString())}if(n?.queryParams){const a=new URLSearchParams(n.queryParams);i.push(a.toString())}return n?.skipBrowserRedirect&&i.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;return a?this._returnResult({data:null,error:a}):await vs(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Ui(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,i;const{data:a,error:o}=r;if(o)return this._returnResult({data:null,error:o});const c=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:u,error:l}=await vs(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(n=a?.session)===null||n===void 0?void 0:n.access_token});return l?this._returnResult({data:null,error:l}):(e.factorType==="totp"&&u.type==="totp"&&(!((i=u?.totp)===null||i===void 0)&&i.qr_code)&&(u.totp.qr_code=`data:image/svg+xml;utf-8,${u.totp.qr_code}`),this._returnResult({data:u,error:null}))})}catch(r){if(Ui(r))return this._returnResult({data:null,error:r});throw r}}async _verify(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;if(a)return this._returnResult({data:null,error:a});const o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?JOe(e.webauthn.credential_response):e3e(e.webauthn.credential_response)})}:{code:e.code}),{data:c,error:u}=await vs(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token});return u?this._returnResult({data:null,error:u}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+c.expires_in},c)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",c),this._returnResult({data:c,error:u}))})}catch(r){if(Ui(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;if(a)return this._returnResult({data:null,error:a});const o=await vs(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token});if(o.error)return o;const{data:c}=o;if(c.type!=="webauthn")return{data:c,error:null};switch(c.webauthn.type){case"create":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:XOe(c.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:ZOe(c.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(Ui(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){var e;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const i={all:[],phone:[],totp:[],webauthn:[]};for(const a of(e=r?.factors)!==null&&e!==void 0?e:[])i.all.push(a),a.status==="verified"&&i[a.factor_type].push(a);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(e){var r,n,i,a;if(e)try{const{payload:p}=AS(e);let g=null;p.aal&&(g=p.aal);let y=g;const{data:{user:x},error:w}=await this.getUser(e);if(w)return this._returnResult({data:null,error:w});((n=(r=x?.factors)===null||r===void 0?void 0:r.filter(N=>N.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(y="aal2");const E=p.amr||[];return{data:{currentLevel:g,nextLevel:y,currentAuthenticationMethods:E},error:null}}catch(p){if(Ui(p))return this._returnResult({data:null,error:p});throw p}const{data:{session:o},error:c}=await this.getSession();if(c)return this._returnResult({data:null,error:c});if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:u}=AS(o.access_token);let l=null;u.aal&&(l=u.aal);let d=l;((a=(i=o.user.factors)===null||i===void 0?void 0:i.filter(p=>p.status==="verified"))!==null&&a!==void 0?a:[]).length>0&&(d="aal2");const m=u.amr||[];return{data:{currentLevel:l,nextLevel:d,currentAuthenticationMethods:m},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async r=>{const{data:{session:n},error:i}=r;return i?this._returnResult({data:null,error:i}):n?await vs(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:n.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new lf})})}catch(r){if(Ui(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:i},error:a}=n;if(a)return this._returnResult({data:null,error:a});if(!i)return this._returnResult({data:null,error:new lf});const o=await vs(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:c=>({data:c,error:null})});return o.data&&o.data.redirect_url&&Rd()&&!r?.skipBrowserRedirect&&window.location.assign(o.data.redirect_url),o})}catch(n){if(Ui(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:i},error:a}=n;if(a)return this._returnResult({data:null,error:a});if(!i)return this._returnResult({data:null,error:new lf});const o=await vs(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:c=>({data:c,error:null})});return o.data&&o.data.redirect_url&&Rd()&&!r?.skipBrowserRedirect&&window.location.assign(o.data.redirect_url),o})}catch(n){if(Ui(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;return n?this._returnResult({data:null,error:n}):r?await vs(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new lf})})}catch(e){if(Ui(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async r=>{const{data:{session:n},error:i}=r;return i?this._returnResult({data:null,error:i}):n?(await vs(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new lf})})}catch(r){if(Ui(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(c=>c.kid===e);if(n)return n;const i=Date.now();if(n=this.jwks.keys.find(c=>c.kid===e),n&&this.jwks_cached_at+lOe>i)return n;const{data:a,error:o}=await vs(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=i,n=a.keys.find(c=>c.kid===e),!n)?null:n}async getClaims(e,r={}){try{let n=e;if(!n){const{data:p,error:g}=await this.getSession();if(g||!p.session)return this._returnResult({data:null,error:g});n=p.session.access_token}const{header:i,payload:a,signature:o,raw:{header:c,payload:u}}=AS(n);r?.allowExpired||kOe(a.exp);const l=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!l){const{error:p}=await this.getUser(n);if(p)throw p;return{data:{claims:a,header:i,signature:o},error:null}}const d=LOe(i.alg),f=await crypto.subtle.importKey("jwk",l,d,!0,["verify"]);if(!await crypto.subtle.verify(d,f,o,gOe(`${c}.${u}`)))throw new tO("Invalid JWT signature");return{data:{claims:a,header:i,signature:o},error:null}}catch(n){if(Ui(n))return this._returnResult({data:null,error:n});throw n}}}r_.nextInstanceID={};const c3e=r_,u3e="2.93.3";let kw="";typeof Deno<"u"?kw="deno":typeof document<"u"?kw="web":typeof navigator<"u"&&navigator.product==="ReactNative"?kw="react-native":kw="node";const d3e={"X-Client-Info":`supabase-js-${kw}/${u3e}`},h3e={headers:d3e},f3e={schema:"public"},m3e={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},A3e={};function n_(t){"@babel/helpers - typeof";return n_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n_(t)}function p3e(t,e){if(n_(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(n_(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function g3e(t){var e=p3e(t,"string");return n_(e)=="symbol"?e:e+""}function v3e(t,e,r){return(e=g3e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function DV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function kc(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?DV(Object(r),!0).forEach(function(n){v3e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):DV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}const y3e=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),x3e=()=>Headers,b3e=(t,e,r)=>{const n=y3e(r),i=x3e();return async(a,o)=>{var c;const u=(c=await e())!==null&&c!==void 0?c:t;let l=new i(o?.headers);return l.has("apikey")||l.set("apikey",t),l.has("Authorization")||l.set("Authorization",`Bearer ${u}`),n(a,kc(kc({},o),{},{headers:l}))}};function w3e(t){return t.endsWith("/")?t:t+"/"}function _3e(t,e){var r,n;const{db:i,auth:a,realtime:o,global:c}=t,{db:u,auth:l,realtime:d,global:f}=e,m={db:kc(kc({},u),i),auth:kc(kc({},l),a),realtime:kc(kc({},d),o),storage:{},global:kc(kc(kc({},f),c),{},{headers:kc(kc({},(r=f?.headers)!==null&&r!==void 0?r:{}),(n=c?.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return t.accessToken?m.accessToken=t.accessToken:delete m.accessToken,m}function E3e(t){const e=t?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(w3e(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var S3e=class extends c3e{constructor(t){super(t)}},j3e=class{constructor(t,e,r){var n,i;this.supabaseUrl=t,this.supabaseKey=e;const a=E3e(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const o=`sb-${a.hostname.split(".")[0]}-auth-token`,c={db:f3e,realtime:A3e,auth:kc(kc({},m3e),{},{storageKey:o}),global:h3e},u=_3e(r??{},c);if(this.storageKey=(n=u.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(i=u.global.headers)!==null&&i!==void 0?i:{},u.accessToken)this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(d,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}});else{var l;this.auth=this._initSupabaseAuthClient((l=u.auth)!==null&&l!==void 0?l:{},this.headers,u.global.fetch)}this.fetch=b3e(e,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(kc({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(d=>this.realtime.setAuth(d)).catch(d=>console.warn("Failed to set initial Realtime auth token:",d)),this.rest=new uPe(new URL("rest/v1",a).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new nOe(this.storageUrl.href,this.headers,this.fetch,r?.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new sPe(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,r)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,r;if(t.accessToken)return await t.accessToken();const{data:n}=await t.auth.getSession();return(e=(r=n.session)===null||r===void 0?void 0:r.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:n,userStorage:i,storageKey:a,flowType:o,lock:c,debug:u,throwOnError:l},d,f){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new S3e({url:this.authUrl.href,headers:kc(kc({},m),d),storageKey:a,autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:n,userStorage:i,flowType:o,lock:c,debug:u,throwOnError:l,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(p=>p.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new TPe(this.realtimeUrl.href,kc(kc({},t),{},{params:kc(kc({},{apikey:this.supabaseKey}),t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e?.access_token)})}_handleTokenChanged(t,e,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const T3e=(t,e,r)=>new j3e(t,e,r);function C3e(){if(typeof window<"u")return!1;const t=globalThis.process;if(!t)return!1;const e=t.version;if(e==null)return!1;const r=e.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}C3e()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const N3e="https://gonalgubgldgpkcekaxe.supabase.co",k3e="sb_publishable_SB4LfH4EkuEyu5qeC_dffQ_G9cF8Fo_",ir=T3e(N3e,k3e);async function L3e({name:t,email:e,phone:r,orgName:n,formData:i=null}){const a=crypto.randomUUID(),{error:o}=await ir.from("leads").insert([{id:a,name:t,email:e,phone:r,org_name:n,completed_form:!!i,form_data:i,source:"combat-sports-proposal"}]);if(o)throw o;return{id:a,name:t,email:e,phone:r,org_name:n}}async function I3e(t){if(!t)return null;let{data:e,error:r}=await ir.from("crm_leads").select("*").ilike("org_name",t).limit(1).single();if(e)return e;const n=t.replace(/\s*(Pty|Ltd|Inc|LLC|Pty Ltd|PTY LTD|Corporation|Corp)\.?\s*/gi,"").trim(),i=await ir.from("crm_leads").select("*").ilike("org_name",`%${n}%`).limit(1).single();if(i.data)return i.data;const a=n.split(/\s+/).filter(o=>o.length>3);if(a.length>0){const o=a[0],c=await ir.from("crm_leads").select("*").ilike("org_name",`%${o}%BJJ%`).limit(1).single();if(c.data)return c.data}return null}async function JM(){const{data:t,error:e}=await ir.from("contracts").select("*").order("created_at",{ascending:!1});if(e)throw e;return t}async function Wre(t){const{data:e,error:r}=await ir.from("contracts").select("*").eq("id",t).single();if(r)throw r;return e}async function B3e(t){const{data:e,error:r}=await ir.from("contracts").select("*").eq("share_token",t).single();if(r)throw r;return e}async function MV(t){const e=Array.from({length:32},()=>Math.floor(Math.random()*16).toString(16)).join(""),{data:r,error:n}=await ir.from("contracts").insert({...t,share_token:e}).select().single();if(n)throw n;return r}async function FV(t,e){const{data:r,error:n}=await ir.from("contracts").update({...e,updated_at:new Date().toISOString()}).eq("id",t).select().single();if(n)throw n;return r}async function P3e(t){const{error:e}=await ir.from("contracts").delete().eq("id",t);if(e)throw e}async function O3e(t){const{data:e,error:r}=await ir.from("contracts").update({viewed_at:new Date().toISOString(),status:"viewed",updated_at:new Date().toISOString()}).eq("id",t).select().single();if(r)throw r;return e}async function R3e(t){const{data:e,error:r}=await ir.from("orders").insert([t]).select().single();if(r)throw r;return e}async function D3e(t,e,r=!1){const n=r?{client_signature:e,client_signed_at:new Date().toISOString(),status:"signed",updated_at:new Date().toISOString()}:{ffm_signature:e,ffm_signed_at:new Date().toISOString(),status:"sent",updated_at:new Date().toISOString()},{data:i,error:a}=await ir.from("contracts").update(n).eq("id",t).select().single();if(a)throw a;return i}const M3e=()=>Array.from({length:24},()=>Math.floor(Math.random()*16).toString(16)).join("");async function F3e(){const{data:t,error:e}=await ir.from("onboarding_sessions").select("*").order("created_at",{ascending:!1});if(e)throw e;return t}async function U3e(t){const{data:e,error:r}=await ir.from("onboarding_sessions").select("*").eq("share_token",t);if(r)throw r;if(!e||e.length===0)throw new Error("Onboarding session not found. Please check your link or contact Fit Focus Media.");const n=e[0];return n&&n.status==="pending"&&(await ir.from("onboarding_sessions").update({status:"in_progress"}).eq("share_token",t),n.status="in_progress"),n}async function Yre(t){const{data:e,error:r}=await ir.from("onboarding_sessions").insert({...t,share_token:M3e(),status:"pending"}).select().single();if(r)throw r;if(e&&e.org_name&&e.event_name)try{await G3e(e.id,e.org_name,e.event_name)}catch(n){console.error("Failed to create Drive folders:",n)}return e}async function $3e(t,e){delete e.id,delete e.created_at,delete e.share_token,delete e.contract_id;const{data:r,error:n}=await ir.from("onboarding_sessions").update({...e,updated_at:new Date().toISOString()}).eq("id",t).select().single();if(n)throw n;return r}async function H3e(t,e){delete e.id,delete e.created_at,delete e.share_token,delete e.contract_id;const{data:r,error:n}=await ir.from("onboarding_sessions").update({...e,updated_at:new Date().toISOString()}).eq("share_token",t).select();if(n)throw n;if(!r||r.length===0)throw new Error("Failed to save changes - session not found");return r[0]}async function Q3e(t){const e=typeof t=="string"?t:t?.share_token;if(!e)throw new Error("No share token provided for submission");const{data:r,error:n}=await ir.from("onboarding_sessions").update({status:"submitted",submitted_at:new Date().toISOString()}).eq("share_token",e).select();if(n)throw n;if(!r||r.length===0)throw new Error("Session not found or update blocked by permissions");return r[0]}async function z3e(t,e,r){const{data:n,error:i}=await ir.from("onboarding_sessions").update({status:"reviewed",reviewed_at:new Date().toISOString(),reviewed_by:e,admin_notes:r}).eq("id",t).select();if(i)throw i;return n}async function V3e(t){const{error:e}=await ir.from("onboarding_files").delete().eq("session_id",t);e&&console.error("Error deleting files:",e);const{error:r}=await ir.from("onboarding_sessions").delete().eq("id",t);if(r)throw r;return!0}const aI="onboarding";async function K3e(t,e,r,n){const{data:i}=await ir.from("onboarding_sessions").select("org_name, event_name").eq("id",t).single(),a=w=>w?.replace(/[^a-zA-Z0-9 -]/g,"").trim().substring(0,50)||"",o=a(i?.org_name)||t.substring(0,8),c=i?.event_name?a(i.event_name):null,u=Date.now(),l=n.name.replace(/[^a-zA-Z0-9.-]/g,"_"),d=c?`${o}/${c}/${e}/${u}_${l}`:`${o}/${e}/${u}_${l}`,{data:f,error:m}=await ir.storage.from(aI).upload(d,n,{cacheControl:"3600",upsert:!1});if(m)throw new Error(m.message||"Upload failed");const{data:p}=ir.storage.from(aI).getPublicUrl(d),g=p?.publicUrl||null,{data:y,error:x}=await ir.from("onboarding_files").insert({session_id:t,category:e,file_type:r,file_name:n.name,file_size:n.size,mime_type:n.type,storage_path:d,public_url:g,synced_to_drive:!1}).select().single();if(x)throw await ir.storage.from(aI).remove([d]),new Error(x.message||"Failed to create file record");return{file:y,url:g,message:"File uploaded. Will sync to Google Drive automatically."}}async function G3e(t,e,r){return console.log("Drive folders will be created automatically during sync"),{success:!0,message:"Folders created during sync"}}async function W3e(t){const{data:e,error:r}=await ir.from("onboarding_files").select("*").eq("session_id",t).order("created_at",{ascending:!1});if(r)throw r;return e}async function Y3e(){const{data:t,error:e}=await ir.from("events").select("*, organizations(id, name, display_name)").eq("active",!0).order("date",{ascending:!0});if(e)throw e;return(t||[]).map(r=>({...r,org_display_name:r.organizations?.display_name||r.organizations?.name||"Unknown"}))}async function q3e(){const{data:t,error:e}=await ir.from("livestream_events").select("*, organizations(id, name, display_name, logo_url)").in("status",["published","live","ended"]).order("start_time",{ascending:!0});if(e)throw e;return(t||[]).map(r=>({...r,org_display_name:r.organizations?.display_name||r.organizations?.name||r.organization}))}async function rO(t){const{data:e,error:r}=await ir.from("livestream_events").select("*, organizations(id, name, display_name, logo_url)").eq("id",t).single();if(r)throw r;return e?{...e,org_display_name:e.organizations?.display_name||e.organizations?.name||e.organization}:null}async function qre(){const{data:t,error:e}=await ir.from("livestream_events").select("*").order("created_at",{ascending:!1});if(e)throw e;return t}async function X3e(t){const{data:e,error:r}=await ir.from("livestream_events").insert([t]).select().single();if(r)throw r;return e}async function db(t,e){const{data:r,error:n}=await ir.from("livestream_events").update({...e,updated_at:new Date().toISOString()}).eq("id",t).select().single();if(n)throw n;return r}async function Z3e(t){const{error:e}=await ir.from("livestream_events").delete().eq("id",t);if(e)throw e}async function Xre(){const{data:t,error:e}=await ir.from("livestream_settings").select("*").eq("id",1).single();if(e&&e.code!=="PGRST116")throw e;return t||{demo_mode:!1}}async function J3e(t){const{data:e,error:r}=await ir.from("livestream_settings").upsert({id:1,...t,updated_at:new Date().toISOString()}).select().single();if(r)throw r;return e}async function UV(t,e){const{data:r,error:n}=await ir.from("livestream_orders").select("*").eq("event_id",t).eq("email",e.toLowerCase()).eq("status","completed").order("created_at",{ascending:!1}).limit(1);if(n)throw n;return r?.[0]||null}async function eRe(t){let e=ir.from("livestream_orders").select("*, event:livestream_events(*)").order("created_at",{ascending:!1});const{data:r,error:n}=await e;if(n)throw n;return r}async function tRe(t){const{data:e,error:r}=await ir.from("livestream_sessions").insert([t]).select().single();if(r)throw r;return e}async function rRe(t){const{data:e,error:r}=await ir.from("livestream_sessions").update({last_seen:new Date().toISOString()}).eq("token",t).eq("active",!0).select().single();if(r)throw r;return e}async function QC(t){const{data:e,error:r}=await ir.from("livestream_streams").select("*").eq("event_id",t).order("display_order",{ascending:!0});if(r)throw r;return e||[]}async function nRe(t){const{data:e,error:r}=await ir.from("livestream_streams").insert([t]).select().single();if(r)throw r;return e}async function oI(t,e){const{data:r,error:n}=await ir.from("livestream_streams").update(e).eq("id",t).select().single();if(n)throw n;return r}async function iRe(t){const{error:e}=await ir.from("livestream_streams").delete().eq("id",t);if(e)throw e}async function $V(t,e){const{error:r}=await ir.from("livestream_events").update({is_multi_stream:e}).eq("id",t);if(r)throw r}async function sRe(t,e){const{data:r,error:n}=await ir.auth.signInWithOtp({email:t.toLowerCase(),options:{emailRedirectTo:e||window.location.origin}});if(n)throw n;return r}async function aRe(){const{data:{session:t},error:e}=await ir.auth.getSession();if(e)throw e;return t}async function oRe(){const{error:t}=await ir.auth.signOut();if(t)throw t}function lRe(t){return ir.auth.onAuthStateChange(t)}async function HV(t,e){const r=e.toLowerCase(),{data:n}=await ir.from("user_profiles").select("*").eq("email",r).single();if(n){const{data:o,error:c}=await ir.from("user_profiles").update({auth_id:t,last_login_at:new Date().toISOString(),updated_at:new Date().toISOString()}).eq("id",n.id).select().single();if(c)throw c;return o}const{data:i,error:a}=await ir.from("user_profiles").insert({email:r,auth_id:t,last_login_at:new Date().toISOString()}).select().single();if(a)throw a;return await ir.from("livestream_orders").update({user_id:i.id}).eq("email",r).is("user_id",null),i}async function cRe(t){const{data:e,error:r}=await ir.from("livestream_orders").select("*, event:livestream_events(*)").eq("email",t.toLowerCase()).eq("status","completed").order("created_at",{ascending:!1});if(r)throw r;return e}function uRe(t,e){return(e?`${t}-${e}`:t).toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,"").substring(0,60)}async function dRe(){const{data:t,error:e}=await ir.from("proposals").select("*").order("created_at",{ascending:!1});if(e)throw e;return t}async function hRe(t){const{data:e,error:r}=await ir.from("proposals").select("*").eq("id",t).single();if(r)throw r;return e}async function fRe(t){const{data:e,error:r}=await ir.from("proposals").select("*").eq("slug",t).single();if(r)throw r;return e}async function mRe(t){const r=`${t.slug||uRe(t.org_name,t.event_name)}-${Date.now().toString(36)}`,{data:n,error:i}=await ir.from("proposals").insert([{...t,slug:r,status:t.status||"draft"}]).select().single();if(i)throw i;return n}async function eF(t,e){const{data:r,error:n}=await ir.from("proposals").update({...e,updated_at:new Date().toISOString()}).eq("id",t).select().single();if(n)throw n;return r}async function ARe(t){const{error:e}=await ir.from("proposals").delete().eq("id",t);if(e)throw e}async function pRe(t){const{data:e,error:r}=await ir.from("proposals").select("id, views").eq("slug",t).single();if(r)throw r;const{error:n}=await ir.from("proposals").update({views:(e.views||0)+1,last_viewed_at:new Date().toISOString()}).eq("id",e.id);if(n)throw n}async function gRe(t,e){return eF(t,{status:e})}async function vRe(t,e=null,r=""){const n=await hRe(t);if(!n)throw new Error("Proposal not found");const i=e||n.contact_email;if(!i)throw new Error("No email address provided");const a=`https://fitfocusmedia.com.au/#/proposals/${n.slug}`,o=await fetch("https://gonalgubgldgpkcekaxe.supabase.co/functions/v1/send-proposal-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({to:i,proposal_id:t,proposal_url:a,org_name:n.org_name,contact_name:n.contact_name,event_name:n.event_name,price:n.price,custom_message:r})});if(!o.ok){const c=await o.json().catch(()=>({}));throw new Error(c.error||"Failed to send email")}return await eF(t,{status:"sent",sent_at:new Date().toISOString(),sent_to:i}),{success:!0,sentTo:i}}const yRe=()=>{const[t,e]=T.useState(1),[r,n]=T.useState({name:"",email:"",phone:""}),[i,a]=T.useState({orgName:"",showsPerYear:4,avgAttendance:200,venueCapacity:300,socialFollowing:5e3,currentMedia:"basic",geoReach:"local",sponsorshipLevel:"few",growthTrajectory:"stable"}),[o,c]=T.useState(null),[u,l]=T.useState([]),d=T.useRef(null),f=5;T.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"})},[t]);const m=()=>{t<f&&e(t+1)},p=()=>{t>1&&e(t-1)},g=E=>{E>=1&&E<=f&&e(E)},y=(E,N)=>{a(C=>({...C,[E]:N}))},x=(E,N)=>{n(C=>({...C,[E]:N}))},w=E=>{a(E)},_=async()=>{const E=await L3e({name:r.name,email:r.email,phone:r.phone,orgName:i.orgName||"",formData:{...i,...r,analysis:o,selectedAddOns:u}});E?.id&&(d.current=E.id),m()};return s.jsxs("div",{className:"pt-16 sm:pt-20",children:[t>1&&s.jsx(p0e,{currentStep:t,totalSteps:f,goToStep:g}),s.jsxs("div",{className:"transition-opacity duration-300",children:[t===1&&s.jsx(g0e,{nextStep:m}),t===2&&s.jsx(v0e,{formData:i,updateFormData:y,setFormDataBulk:w,setAnalysis:c,nextStep:m,prevStep:p}),t===3&&s.jsx(WBe,{formData:i,analysis:o,selectedAddOns:u,setSelectedAddOns:l,nextStep:m,prevStep:p}),t===4&&s.jsx(YBe,{contactData:r,updateContactData:x,formData:i,onSubmit:_,prevStep:p}),t===5&&s.jsx(tPe,{formData:i,analysis:o,selectedAddOns:u,prevStep:p,goToStep:g})]})]})},xRe=()=>{const[t,e]=T.useState({name:"",email:"",organization:"",message:""}),r=n=>{n.preventDefault();const i=encodeURIComponent(`Website Inquiry - ${t.organization||t.name}`),a=encodeURIComponent(`Name: ${t.name}
Email: ${t.email}
Organization: ${t.organization}

${t.message}`);window.location.href=`mailto:info@fitfocusmedia.com.au?subject=${i}&body=${a}`};return s.jsxs("div",{className:"pt-20 sm:pt-24",children:[s.jsx("section",{className:"py-12 sm:py-20 px-4 sm:px-6",children:s.jsx("div",{className:"max-w-7xl mx-auto text-center",children:s.jsxs(Dr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[s.jsx("h1",{className:"text-4xl sm:text-5xl md:text-6xl font-black mb-6",children:s.jsx("span",{className:"text-gradient",children:"Get In Touch"})}),s.jsx("p",{className:"text-lg sm:text-xl text-gray-400 max-w-3xl mx-auto",children:"Ready to elevate your combat sports event? Let's talk about how professional media coverage can transform your promotion."})]})})}),s.jsx("section",{className:"py-8 sm:py-12 px-4 sm:px-6",children:s.jsx("div",{className:"max-w-7xl mx-auto",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 sm:gap-12",children:[s.jsx(Dr.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.6},children:s.jsxs("div",{className:"bg-dark-800 border border-gray-700 rounded-xl p-6 sm:p-8",children:[s.jsx("h2",{className:"text-2xl sm:text-3xl font-black text-white mb-2",children:"Send a Message"}),s.jsx("p",{className:"text-gray-400 text-sm mb-6",children:"We typically respond within 24 hours."}),s.jsxs("form",{onSubmit:r,className:"space-y-5",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Your Name *"}),s.jsx("input",{type:"text",required:!0,value:t.name,onChange:n=>e({...t,name:n.target.value}),className:"w-full px-4 py-3 bg-dark-900 border-2 border-gray-700 rounded-lg text-white focus:border-primary-600 focus:outline-none transition-colors",placeholder:"John Smith"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Email Address *"}),s.jsx("input",{type:"email",required:!0,value:t.email,onChange:n=>e({...t,email:n.target.value}),className:"w-full px-4 py-3 bg-dark-900 border-2 border-gray-700 rounded-lg text-white focus:border-primary-600 focus:outline-none transition-colors",placeholder:"john@promotion.com"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Organization"}),s.jsx("input",{type:"text",value:t.organization,onChange:n=>e({...t,organization:n.target.value}),className:"w-full px-4 py-3 bg-dark-900 border-2 border-gray-700 rounded-lg text-white focus:border-primary-600 focus:outline-none transition-colors",placeholder:"Your promotion / gym name"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Message *"}),s.jsx("textarea",{required:!0,rows:5,value:t.message,onChange:n=>e({...t,message:n.target.value}),className:"w-full px-4 py-3 bg-dark-900 border-2 border-gray-700 rounded-lg text-white focus:border-primary-600 focus:outline-none transition-colors resize-none",placeholder:"Tell us about your event or what you're looking for..."})]}),s.jsxs("button",{type:"submit",className:"w-full flex items-center justify-center gap-2 px-6 py-4 bg-primary-600 hover:bg-primary-700 text-white font-bold rounded-lg transition-all hover:scale-[1.02] text-lg",children:[s.jsx(Qb,{className:"w-5 h-5"}),"Send Message"]})]})]})}),s.jsxs(Dr.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.6},className:"space-y-6",children:[s.jsxs("div",{className:"bg-dark-800 border border-gray-700 rounded-xl p-6 sm:p-8",children:[s.jsx("h3",{className:"text-xl font-bold text-white mb-6",children:"Direct Contact"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("a",{href:"mailto:info@fitfocusmedia.com.au",className:"flex items-center gap-4 p-4 bg-dark-900 rounded-lg hover:bg-primary-600/10 border border-gray-700 hover:border-primary-600/50 transition-all group",children:[s.jsx("div",{className:"w-12 h-12 bg-primary-600/20 rounded-lg flex items-center justify-center",children:s.jsx(tu,{className:"w-6 h-6 text-primary-500"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-white font-semibold",children:"Email"}),s.jsx("p",{className:"text-gray-400 text-sm group-hover:text-primary-400 transition-colors",children:"info@fitfocusmedia.com.au"})]})]}),s.jsxs("div",{className:"flex items-center gap-4 p-4 bg-dark-900 rounded-lg border border-gray-700",children:[s.jsx("div",{className:"w-12 h-12 bg-primary-600/20 rounded-lg flex items-center justify-center",children:s.jsx(md,{className:"w-6 h-6 text-primary-500"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-white font-semibold",children:"Location"}),s.jsx("p",{className:"text-gray-400 text-sm",children:"Queensland, Australia"}),s.jsx("p",{className:"text-gray-500 text-xs",children:"Servicing events Australia-wide + International"})]})]})]})]}),s.jsxs("div",{className:"bg-dark-800 border border-gray-700 rounded-xl p-6 sm:p-8",children:[s.jsx("h3",{className:"text-xl font-bold text-white mb-6",children:"Quick Actions"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("a",{href:"mailto:info@fitfocusmedia.com.au?subject=Consultation Request&body=Hi Brandon,%0D%0A%0D%0AI'd like to schedule a consultation to discuss media production for my event.%0D%0A%0D%0APlease send me your available times.%0D%0A%0D%0AThanks!",className:"flex items-center gap-3 p-4 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-all hover:scale-[1.02] group",children:[s.jsx(ml,{className:"w-6 h-6 group-hover:rotate-12 transition-transform"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-bold",children:"Request a Consultation"}),s.jsx("p",{className:"text-sm text-blue-100",children:"Free 30-min call to discuss your needs"})]})]}),s.jsxs(rs,{to:"/proposal",className:"flex items-center gap-3 p-4 bg-primary-600 hover:bg-primary-700 text-white rounded-lg transition-all hover:scale-[1.02] group",children:[s.jsx(Fh,{className:"w-6 h-6 group-hover:translate-x-1 transition-transform"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-bold",children:"Get Your Free Analysis"}),s.jsx("p",{className:"text-sm text-primary-100",children:"2-minute form, instant results"})]})]})]})]}),s.jsxs("div",{className:"bg-dark-800 border border-gray-700 rounded-xl p-6 sm:p-8",children:[s.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Follow Us"}),s.jsx("div",{className:"flex gap-3",children:[{icon:HN,label:"Instagram",href:"#"},{icon:HY,label:"YouTube",href:"#"},{icon:I_,label:"Facebook",href:"#"}].map(n=>s.jsxs("a",{href:n.href,className:"flex items-center gap-2 px-4 py-3 bg-dark-900 border border-gray-700 rounded-lg hover:border-primary-600/50 hover:bg-primary-600/10 transition-all",children:[s.jsx(n.icon,{className:"w-5 h-5 text-gray-400"}),s.jsx("span",{className:"text-gray-300 text-sm font-semibold",children:n.label})]},n.label))})]}),s.jsxs("div",{className:"p-5 bg-green-900/20 border border-green-600/40 rounded-xl",children:[s.jsx("p",{className:"text-green-300 font-semibold text-sm mb-1",children:" Fast Response"}),s.jsx("p",{className:"text-gray-400 text-sm",children:"We typically respond within 24 hours. For urgent event inquiries, mention your event date in the subject line."})]})]})]})})})]})};function bRe(){return T.useEffect(()=>{const t=document.createElement("script");return t.src="https://static.zcal.co/embed/v1/embed.js",t.async=!0,document.body.appendChild(t),()=>{const e=document.querySelector('script[src="https://static.zcal.co/embed/v1/embed.js"]');e&&e.remove()}},[]),s.jsx("div",{className:"min-h-screen bg-dark-950 pt-24 pb-16",children:s.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsxs("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:[s.jsx("span",{className:"text-white",children:"Book a "}),s.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-primary-400 to-accent-400",children:"Meeting"})]}),s.jsx("p",{className:"text-xl text-gray-400 max-w-2xl mx-auto",children:"Schedule a call with Brandon to discuss your event media needs. Choose a time that works for you."})]}),s.jsx("div",{className:"bg-dark-900/50 backdrop-blur-sm rounded-2xl border border-dark-800 p-4 md:p-8",children:s.jsx("div",{className:"zcal-inline-widget w-full",style:{minHeight:"700px"},children:s.jsx("a",{href:"https://zcal.co/i/tG0dicG9",children:"Project Enquiry - Schedule a meeting"})})}),s.jsx("div",{className:"mt-8 text-center",children:s.jsxs("p",{className:"text-gray-500 text-sm",children:["Can't find a suitable time?"," ",s.jsx("a",{href:"mailto:info@fitfocusmedia.com.au",className:"text-primary-400 hover:text-primary-300 transition-colors",children:"Email us directly"})]})})]})})}const sf=({value:t,prefix:e="",suffix:r="",decimals:n=0})=>{const i=a0e(0,{damping:50,stiffness:100}),a=TX(i,o=>e+o.toFixed(n).replace(/\B(?=(\d{3})+(?!\d))/g,",")+r);return T.useEffect(()=>{i.set(t)},[i,t]),s.jsx(Dr.span,{children:a})},wRe=()=>{const[t,e]=T.useState(4),[r,n]=T.useState(30),[i,a]=T.useState(50),[o,c]=T.useState(300),[u,l]=T.useState(!1),[d,f]=T.useState(2e3),m=24.99,p=r*.15*350*t,g=r*.25*175*t,y=r*.05*899,x=p+g+y,w=o*1.5,_=w*m,E=_*t,N=E*.7,C=d*.2*t,I=x+N+C,D=d*t,U=D+I,G=[{name:"Without FFM",Sponsorship:d*t,"Athlete Packages":0,"PPV Revenue":0,"Sponsorship Uplift":0},{name:"With FFM",Sponsorship:d*t,"Athlete Packages":x,"PPV Revenue":N,"Sponsorship Uplift":C}],q={Sponsorship:"#6b7280","Athlete Packages":"#22c55e","PPV Revenue":"#10b981","Sponsorship Uplift":"#14b8a6"};return s.jsx("div",{className:"py-12 px-4 sm:px-6",children:s.jsxs("div",{className:"max-w-5xl mx-auto",children:[s.jsxs(Dr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center mb-16",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-primary-600/20 rounded-2xl mb-6",children:s.jsx(BY,{className:"w-8 h-8 text-primary-500"})}),s.jsx("h1",{className:"text-4xl sm:text-5xl md:text-6xl font-black mb-4",children:s.jsx("span",{className:"text-gradient",children:"Revenue Calculator"})}),s.jsx("p",{className:"text-lg sm:text-xl text-gray-400 max-w-2xl mx-auto",children:"See how much your events could generate with professional media coverage"})]}),s.jsxs(Dr.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-dark-800 border border-gray-700 rounded-2xl p-6 sm:p-8 mb-8",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx("div",{className:"w-10 h-10 bg-primary-600/20 rounded-xl flex items-center justify-center",children:s.jsx("span",{className:"text-xl font-black text-primary-500",children:"1"})}),s.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Your Event Details"})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"flex justify-between text-sm font-semibold text-gray-300 mb-3",children:[s.jsx("span",{children:"Number of events per year"}),s.jsxs("span",{className:"text-primary-400",children:[t," events"]})]}),s.jsx("input",{type:"range",min:"1",max:"24",value:t,onChange:J=>e(Number(J.target.value)),className:"w-full h-2 bg-dark-700 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-5 [&::-webkit-slider-thumb]:h-5 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-primary-500 [&::-webkit-slider-thumb]:cursor-pointer [&::-moz-range-thumb]:w-5 [&::-moz-range-thumb]:h-5 [&::-moz-range-thumb]:rounded-full [&::-moz-range-thumb]:bg-primary-500 [&::-moz-range-thumb]:border-0 [&::-moz-range-thumb]:cursor-pointer"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"flex justify-between text-sm font-semibold text-gray-300 mb-3",children:[s.jsx("span",{children:"Average athletes per event"}),s.jsxs("span",{className:"text-primary-400",children:[r," athletes"]})]}),s.jsx("input",{type:"range",min:"10",max:"100",value:r,onChange:J=>n(Number(J.target.value)),className:"w-full h-2 bg-dark-700 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-5 [&::-webkit-slider-thumb]:h-5 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-primary-500 [&::-webkit-slider-thumb]:cursor-pointer [&::-moz-range-thumb]:w-5 [&::-moz-range-thumb]:h-5 [&::-moz-range-thumb]:rounded-full [&::-moz-range-thumb]:bg-primary-500 [&::-moz-range-thumb]:border-0 [&::-moz-range-thumb]:cursor-pointer"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-3",children:"Average ticket price"}),s.jsxs("div",{className:"relative",children:[s.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400",children:"$"}),s.jsx("input",{type:"number",min:"0",value:i,onChange:J=>a(Number(J.target.value)),className:"w-full bg-dark-700 border border-gray-600 rounded-lg px-10 py-3 text-white focus:outline-none focus:border-primary-500 transition-colors"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"flex justify-between text-sm font-semibold text-gray-300 mb-3",children:[s.jsx("span",{children:"Average attendees per event"}),s.jsxs("span",{className:"text-primary-400",children:[o," people"]})]}),s.jsx("input",{type:"range",min:"50",max:"2000",step:"50",value:o,onChange:J=>c(Number(J.target.value)),className:"w-full h-2 bg-dark-700 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-5 [&::-webkit-slider-thumb]:h-5 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-primary-500 [&::-webkit-slider-thumb]:cursor-pointer [&::-moz-range-thumb]:w-5 [&::-moz-range-thumb]:h-5 [&::-moz-range-thumb]:rounded-full [&::-moz-range-thumb]:bg-primary-500 [&::-moz-range-thumb]:border-0 [&::-moz-range-thumb]:cursor-pointer"})]}),s.jsx("div",{children:s.jsxs("label",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-semibold text-gray-300",children:"Do you currently livestream?"}),s.jsx("button",{onClick:()=>l(!u),className:`relative inline-flex h-7 w-12 items-center rounded-full transition-colors ${u?"bg-primary-600":"bg-dark-600"}`,children:s.jsx("span",{className:`inline-block h-5 w-5 transform rounded-full bg-white transition-transform ${u?"translate-x-6":"translate-x-1"}`})})]})}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-3",children:"Current sponsorship revenue per event"}),s.jsxs("div",{className:"relative",children:[s.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400",children:"$"}),s.jsx("input",{type:"number",min:"0",value:d,onChange:J=>f(Number(J.target.value)),className:"w-full bg-dark-700 border border-gray-600 rounded-lg px-10 py-3 text-white focus:outline-none focus:border-primary-500 transition-colors"})]})]})]})]}),s.jsxs(Dr.section,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:.1},className:"bg-dark-800 border border-gray-700 rounded-2xl p-6 sm:p-8 mb-8",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx("div",{className:"w-10 h-10 bg-primary-600/20 rounded-xl flex items-center justify-center",children:s.jsx("span",{className:"text-xl font-black text-primary-500",children:"2"})}),s.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Revenue Projections"})]}),s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(nh,{className:"w-5 h-5 text-primary-500"}),s.jsx("h3",{className:"text-xl font-bold text-white",children:"A) Athlete Media Packages"})]}),s.jsxs("div",{className:"space-y-3 pl-7",children:[s.jsxs("div",{className:"flex justify-between items-center text-sm",children:[s.jsx("span",{className:"text-gray-400",children:"VIP Package ($350)  15% uptake"}),s.jsxs("span",{className:"text-green-400 font-semibold",children:["$",s.jsx(sf,{value:p,decimals:0})]})]}),s.jsxs("div",{className:"flex justify-between items-center text-sm",children:[s.jsx("span",{className:"text-gray-400",children:"Match Package ($175)  25% uptake"}),s.jsxs("span",{className:"text-green-400 font-semibold",children:["$",s.jsx(sf,{value:g,decimals:0})]})]}),s.jsxs("div",{className:"flex justify-between items-center text-sm",children:[s.jsx("span",{className:"text-gray-400",children:"Season Pass ($899/yr)  5% uptake"}),s.jsxs("span",{className:"text-green-400 font-semibold",children:["$",s.jsx(sf,{value:y,decimals:0})]})]}),s.jsx("div",{className:"border-t border-gray-700 pt-3 mt-3",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"font-bold text-white",children:"Total Athlete Revenue"}),s.jsxs("span",{className:"text-2xl font-black text-green-400",children:["$",s.jsx(sf,{value:x,decimals:0})]})]})})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(bh,{className:"w-5 h-5 text-primary-500"}),s.jsx("h3",{className:"text-xl font-bold text-white",children:"B) PPV/Live Streaming"})]}),!u&&s.jsx("div",{className:"bg-amber-900/20 border border-amber-700/50 rounded-lg p-4 mb-4 ml-7",children:s.jsx("p",{className:"text-amber-300 text-sm font-semibold",children:" You're leaving money on the table  streaming could add significant revenue"})}),s.jsxs("div",{className:"space-y-3 pl-7",children:[s.jsxs("div",{className:"flex justify-between items-center text-sm",children:[s.jsx("span",{className:"text-gray-400",children:"PPV viewers per event (attendees  1.5)"}),s.jsxs("span",{className:"text-gray-300 font-semibold",children:[s.jsx(sf,{value:w,decimals:0})," viewers"]})]}),s.jsxs("div",{className:"flex justify-between items-center text-sm",children:[s.jsx("span",{className:"text-gray-400",children:"PPV price"}),s.jsxs("span",{className:"text-gray-300 font-semibold",children:["$",m]})]}),s.jsxs("div",{className:"flex justify-between items-center text-sm",children:[s.jsx("span",{className:"text-gray-400",children:"Revenue per event"}),s.jsxs("span",{className:"text-green-400 font-semibold",children:["$",s.jsx(sf,{value:_,decimals:0})]})]}),s.jsxs("div",{className:"flex justify-between items-center text-sm",children:[s.jsx("span",{className:"text-gray-400",children:"Annual PPV revenue"}),s.jsxs("span",{className:"text-green-400 font-semibold",children:["$",s.jsx(sf,{value:E,decimals:0})]})]}),s.jsx("div",{className:"bg-dark-700/50 border border-gray-600 rounded-lg p-3 my-3",children:s.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"FFM handles all production. Revenue shared 70/30 (70% to you)"})}),s.jsx("div",{className:"border-t border-gray-700 pt-3 mt-3",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"font-bold text-white",children:"Your PPV Revenue (70% share)"}),s.jsxs("span",{className:"text-2xl font-black text-green-400",children:["$",s.jsx(sf,{value:N,decimals:0})]})]})})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(Tf,{className:"w-5 h-5 text-primary-500"}),s.jsx("h3",{className:"text-xl font-bold text-white",children:"C) Sponsorship Uplift"})]}),s.jsxs("div",{className:"space-y-3 pl-7",children:[s.jsx("p",{className:"text-sm text-gray-400 mb-3",children:"Professional media coverage attracts bigger sponsors. Estimated 20% increase in sponsorship value."}),s.jsxs("div",{className:"flex justify-between items-center text-sm",children:[s.jsx("span",{className:"text-gray-400",children:"Current annual sponsorship"}),s.jsxs("span",{className:"text-gray-300 font-semibold",children:["$",s.jsx(sf,{value:d*t,decimals:0})]})]}),s.jsx("div",{className:"border-t border-gray-700 pt-3 mt-3",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"font-bold text-white",children:"Additional Sponsorship (20% uplift)"}),s.jsxs("span",{className:"text-2xl font-black text-green-400",children:["$",s.jsx(sf,{value:C,decimals:0})]})]})})]})]})]})]}),s.jsxs(Dr.section,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:.2},className:"bg-gradient-to-br from-green-900/30 to-emerald-900/30 border-2 border-green-600/50 rounded-2xl p-6 sm:p-8 mb-8",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx("div",{className:"w-10 h-10 bg-green-600/30 rounded-xl flex items-center justify-center",children:s.jsx("span",{className:"text-xl font-black text-green-400",children:"3"})}),s.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"The Bottom Line"})]}),s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("p",{className:"text-gray-300 mb-3 text-lg",children:"Total Additional Annual Revenue"}),s.jsxs("div",{className:"text-5xl sm:text-6xl md:text-7xl font-black text-green-400 mb-2",children:["$",s.jsx(sf,{value:I,decimals:0})]}),s.jsx("p",{className:"text-sm text-gray-400",children:"= Athlete Packages + Your PPV Share + Sponsorship Uplift"})]}),s.jsxs("div",{className:"bg-dark-900/50 rounded-xl p-4 sm:p-6 mb-6",children:[s.jsx("h3",{className:"text-lg font-bold text-white mb-4 text-center",children:"Revenue Comparison"}),s.jsx(sC,{width:"100%",height:300,children:s.jsxs(kre,{data:G,margin:{top:20,right:20,left:20,bottom:20},children:[s.jsx(lre,{strokeDasharray:"3 3",stroke:"#374151"}),s.jsx(VM,{dataKey:"name",stroke:"#9ca3af"}),s.jsx(KM,{stroke:"#9ca3af",tickFormatter:J=>`$${(J/1e3).toFixed(0)}k`}),s.jsx(ETe,{contentStyle:{backgroundColor:"#1f2937",border:"1px solid #374151",borderRadius:"8px",color:"#f3f4f6"},formatter:J=>`$${J.toLocaleString()}`}),s.jsx(lJ,{}),s.jsx(cb,{dataKey:"Sponsorship",stackId:"a",fill:q.Sponsorship,radius:[0,0,0,0]}),s.jsx(cb,{dataKey:"Athlete Packages",stackId:"a",fill:q["Athlete Packages"],radius:[0,0,0,0]}),s.jsx(cb,{dataKey:"PPV Revenue",stackId:"a",fill:q["PPV Revenue"],radius:[0,0,0,0]}),s.jsx(cb,{dataKey:"Sponsorship Uplift",stackId:"a",fill:q["Sponsorship Uplift"],radius:[8,8,0,0]})]})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"bg-dark-800/50 rounded-lg p-4 text-center",children:[s.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"Without FFM"}),s.jsxs("p",{className:"text-2xl font-bold text-gray-300",children:["$",s.jsx(sf,{value:D,decimals:0})]})]}),s.jsxs("div",{className:"bg-green-900/30 border border-green-600/50 rounded-lg p-4 text-center",children:[s.jsx("p",{className:"text-sm text-green-300 mb-1",children:"With FFM"}),s.jsxs("p",{className:"text-2xl font-bold text-green-400",children:["$",s.jsx(sf,{value:U,decimals:0})]})]})]})]}),s.jsxs(Dr.section,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:.3},className:"bg-dark-800 border border-gray-700 rounded-2xl p-6 sm:p-8 mb-8 text-center",children:[s.jsx(Gh,{className:"w-12 h-12 text-primary-500 mx-auto mb-4"}),s.jsx("h3",{className:"text-3xl sm:text-4xl font-black text-white mb-3",children:"FFM Cost to You: $0"}),s.jsx("p",{className:"text-gray-400 mb-4 max-w-2xl mx-auto",children:"We earn from production fees and a share of the revenue we help generate"}),s.jsxs("div",{className:"inline-flex items-center gap-2 px-6 py-3 bg-green-900/30 border border-green-600/50 rounded-lg",children:[s.jsx(nm,{className:"w-5 h-5 text-green-400"}),s.jsx("span",{className:"text-green-300 font-semibold",children:"No risk. No upfront cost. Just results."})]})]}),s.jsxs(Dr.section,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:.4},className:"text-center",children:[s.jsx("h3",{className:"text-2xl sm:text-3xl font-bold text-white mb-6",children:"Ready to unlock this revenue?"}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[s.jsxs(rs,{to:"/proposal",className:"group inline-flex items-center justify-center gap-3 px-8 py-4 bg-primary-600 hover:bg-primary-700 text-white font-black rounded-lg text-lg transition-all hover:scale-105 card-glow",children:["Get Your Free Event Analysis",s.jsx(Fh,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]}),s.jsx(rs,{to:"/contact",className:"inline-flex items-center justify-center gap-3 px-8 py-4 bg-white/10 hover:bg-white/20 backdrop-blur-sm text-white font-bold rounded-lg text-lg transition-all border border-white/20 hover:border-white/40",children:"Contact Us"})]}),s.jsx("p",{className:"text-sm text-gray-500 mt-4",children:"Takes 2 minutes  No commitment required"})]})]})})},lI=[{id:"nba-sydney-nationals-day1-2026",name:"NBA Sydney Nationals Day 1",date:"2026-02-07"},{id:"nba-sydney-nationals-day2-2026",name:"NBA Sydney Nationals Day 2",date:"2026-02-08"}],_Re=["Bikini","Wellness","Figure","Physique","Bodybuilding","Classic Physique","Sports Model","Fitness Model","Transformation","First Timers","Masters","Other"],ERe=[{id:"iwalk",name:"I-Walk Video",price:250,description:"Your complete walk-on stage moment"},{id:"highlight",name:"Highlight Reel",price:500,description:"Fully edited cinematic highlight"},{id:"combo",name:"Combo Pack",price:700,description:"I-Walk + Highlight Reel",savings:50}],SRe=(t,e)=>t<=1?{total:e,savings:0}:t===2?{total:e*2-50,savings:50}:{total:e*t-100,savings:100},jRe=()=>{const[t]=ky(),[e,r]=T.useState(1),[n,i]=T.useState(!1),[a,o]=T.useState(!1);T.useEffect(()=>{t.get("success")==="true"&&(i(!0),window.history.replaceState({},"",window.location.pathname)),t.get("canceled")==="true"&&(o(!0),window.history.replaceState({},"",window.location.pathname))},[t]);const[c,u]=T.useState({selectedPackage:null,selectedEvents:[],firstName:"",lastName:"",email:"",phone:"",divisions:[],instagram:"",coachName:"",coachInstagram:"",referenceImage:null,referenceImagePreview:null}),[l,d]=T.useState(!1),f=T.useRef(null),m=T.useRef(null),[p,g]=T.useState(!1),[y,x]=T.useState(!1),[w,_]=T.useState(null),[E,N]=T.useState(null);T.useEffect(()=>{E&&f.current&&(f.current.srcObject=E,f.current.play().then(()=>x(!1)).catch(()=>x(!1)))},[E,p]),T.useEffect(()=>()=>{E&&E.getTracks().forEach(ve=>ve.stop())},[E]);const C=c.selectedPackage?SRe(c.selectedEvents.length,c.selectedPackage.price):{total:0,savings:0},I=(ve,ne)=>{u(ae=>({...ae,[ve]:ne}))},D=ve=>{u(ne=>({...ne,selectedEvents:ne.selectedEvents.includes(ve)?ne.selectedEvents.filter(ae=>ae!==ve):[...ne.selectedEvents,ve]}))},U=ve=>{u(ne=>({...ne,divisions:ne.divisions.includes(ve)?ne.divisions.filter(ae=>ae!==ve):[...ne.divisions,ve]}))},G=async()=>{try{_(null),x(!0),g(!0);const ve=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user",width:{ideal:640},height:{ideal:480}}});N(ve)}catch(ve){console.error("Camera error:",ve),g(!1),x(!1),_("Unable to access camera. Please upload a photo instead.")}},q=()=>{if(f.current&&m.current){const ve=f.current,ne=m.current;ne.width=ve.videoWidth,ne.height=ve.videoHeight,ne.getContext("2d").drawImage(ve,0,0);const ae=ne.toDataURL("image/jpeg",.8);I("referenceImage",ae),I("referenceImagePreview",ae),E&&(E.getTracks().forEach(oe=>oe.stop()),N(null)),g(!1)}},J=ve=>{const ne=ve.target.files[0];if(ne){const ae=new FileReader;ae.onloadend=()=>{I("referenceImage",ae.result),I("referenceImagePreview",ae.result)},ae.readAsDataURL(ne)}},de=async()=>{d(!0);try{const ve=c.selectedEvents.map(be=>lI.find(ue=>ue.id===be)?.name).join(", "),ne=await R3e({first_name:c.firstName,last_name:c.lastName,email:c.email,phone:c.phone,divisions:c.divisions,instagram:c.instagram,coach_name:c.coachName,coach_instagram:c.coachInstagram,show_name:ve,reference_image_url:c.referenceImage,package_type:c.selectedPackage.id,amount_paid:C.total,order_status:"pending"}),oe=await fetch("https://scarlet-sales-api-vercel.vercel.app/api/create-checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({packageId:c.selectedPackage.id,showCount:c.selectedEvents.length,showNames:ve,customerEmail:c.email,customerName:`${c.firstName} ${c.lastName}`,metadata:{orderId:ne.id,instagram:c.instagram,divisions:c.divisions.join(", "),coachName:c.coachName,coachInstagram:c.coachInstagram}})}),{url:Ie,error:Ce}=await oe.json();if(Ce)throw new Error(Ce);window.location.href=Ie}catch(ve){console.error("Order error:",ve),alert("Error creating order. Please try again."),d(!1)}},xe=()=>{switch(e){case 1:return c.selectedPackage&&c.selectedEvents.length>0;case 2:return c.firstName&&c.lastName&&c.email&&c.phone&&c.divisions.length>0&&c.instagram&&c.coachName&&c.coachInstagram;case 3:return c.referenceImage;default:return!0}};if(n)return s.jsx("div",{className:"min-h-screen bg-dark-950 flex items-center justify-center p-4 pt-24",children:s.jsxs("div",{className:"bg-dark-900 rounded-2xl p-8 max-w-md w-full text-center border border-gray-800",children:[s.jsx("div",{className:"w-20 h-20 bg-green-500/20 rounded-full flex items-center justify-center mx-auto mb-6",children:s.jsx("svg",{className:"w-10 h-10 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),s.jsx("h2",{className:"text-3xl font-bold text-white mb-3",children:"Payment Successful!"}),s.jsx("p",{className:"text-gray-400 mb-6",children:"Thanks for your order! We'll find your footage and start editing. You'll receive a confirmation email shortly."}),s.jsx("p",{className:"text-gray-500 text-sm mb-6",children:"Delivery: 5-7 business days"}),s.jsx(rs,{to:"/",className:"inline-block px-8 py-3 bg-primary-600 text-white rounded-lg font-medium hover:bg-primary-700",children:"Back to Home"})]})});if(a)return s.jsx("div",{className:"min-h-screen bg-dark-950 flex items-center justify-center p-4 pt-24",children:s.jsxs("div",{className:"bg-dark-900 rounded-2xl p-8 max-w-md w-full text-center border border-gray-800",children:[s.jsx("div",{className:"w-20 h-20 bg-yellow-500/20 rounded-full flex items-center justify-center mx-auto mb-6",children:s.jsx("span",{className:"text-4xl",children:""})}),s.jsx("h2",{className:"text-2xl font-bold text-white mb-3",children:"Payment Canceled"}),s.jsx("p",{className:"text-gray-400 mb-6",children:"No worries  your order wasn't charged. You can try again whenever you're ready."}),s.jsx("button",{onClick:()=>o(!1),className:"px-8 py-3 bg-primary-600 text-white rounded-lg font-medium hover:bg-primary-700",children:"Try Again"})]})});const we=["Package & Shows","Your Info","Photo","Checkout"];return s.jsxs("div",{className:"min-h-screen bg-dark-950 pt-24 pb-12",children:[s.jsxs("div",{className:"max-w-4xl mx-auto px-4 mb-8 text-center",children:[s.jsx("div",{className:"inline-block mb-4 px-4 py-2 bg-primary-600/10 border border-primary-500/30 rounded-full text-primary-400 text-sm font-medium",children:"NBA Sydney Nationals 2026  Pre-Order Your Footage"}),s.jsxs("h1",{className:"text-4xl md:text-5xl font-black text-white mb-4",children:["Athlete ",s.jsx("span",{className:"text-gradient",children:"Content Order"})]}),s.jsx("p",{className:"text-gray-400 text-lg max-w-2xl mx-auto",children:"Professional multi-angle coverage, cinematic editing, ready for social media."})]}),s.jsxs("div",{className:"max-w-lg mx-auto px-4 mb-6",children:[s.jsx("div",{className:"flex items-center justify-between",children:we.map((ve,ne)=>s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold ${e>ne+1?"bg-green-500 text-white":e===ne+1?"bg-primary-600 text-white":"bg-dark-800 text-gray-500"}`,children:e>ne+1?"":ne+1}),ne<we.length-1&&s.jsx("div",{className:`w-8 sm:w-16 h-0.5 mx-1 ${e>ne+1?"bg-green-500":"bg-dark-800"}`})]},ne))}),s.jsx("div",{className:"flex justify-between mt-2 text-xs text-gray-500",children:we.map((ve,ne)=>s.jsx("span",{className:"text-center w-16",children:ve},ne))})]}),s.jsx("div",{className:"max-w-lg mx-auto px-4",children:s.jsxs("div",{className:"bg-dark-900 rounded-2xl p-6 border border-gray-800",children:[e===1&&s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"Select Package & Shows"}),s.jsx("p",{className:"text-gray-400 text-sm mb-3",children:"Package Type"}),s.jsx("div",{className:"space-y-3 mb-6",children:ERe.map(ve=>{const ne=c.selectedPackage?.id===ve.id;return s.jsx("button",{onClick:()=>I("selectedPackage",ve),className:`w-full p-4 rounded-xl border-2 text-left transition-all ${ne?"border-primary-500 bg-primary-600/10":"border-gray-800 hover:border-gray-700"}`,children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-white",children:ve.name}),s.jsx("p",{className:"text-sm text-gray-500",children:ve.description}),ve.savings&&s.jsxs("span",{className:"text-xs text-green-400",children:["Save $",ve.savings]})]}),s.jsxs("p",{className:"text-xl font-bold text-white",children:["$",ve.price]})]})},ve.id)})}),s.jsx("p",{className:"text-gray-400 text-sm mb-3",children:"Which shows did you compete in?"}),s.jsx("div",{className:"space-y-3 mb-6",children:lI.map(ve=>{const ne=c.selectedEvents.includes(ve.id);return s.jsx("button",{onClick:()=>D(ve.id),className:`w-full p-4 rounded-xl border-2 text-left transition-all ${ne?"border-primary-500 bg-primary-600/10":"border-gray-800 hover:border-gray-700"}`,children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-white",children:ve.name}),s.jsx("p",{className:"text-sm text-gray-500",children:ve.date})]}),s.jsx("div",{className:`w-6 h-6 rounded border-2 flex items-center justify-center ${ne?"border-primary-500 bg-primary-600":"border-gray-600"}`,children:ne&&s.jsx("span",{className:"text-white text-xs",children:""})})]})},ve.id)})}),c.selectedPackage&&c.selectedEvents.length>0&&s.jsx("div",{className:"bg-dark-800/50 rounded-xl p-4",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"text-white font-medium",children:[c.selectedPackage.name,"  ",c.selectedEvents.length," show",c.selectedEvents.length>1?"s":""]}),C.savings>0&&s.jsxs("p",{className:"text-green-400 text-sm",children:["Multi-show discount: Save $",C.savings,"!"]})]}),s.jsxs("p",{className:"text-2xl font-bold text-white",children:["$",C.total]})]})})]}),e===2&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Your Details"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"First Name *"}),s.jsx("input",{type:"text",value:c.firstName,onChange:ve=>I("firstName",ve.target.value),className:"w-full px-4 py-3 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:border-primary-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Last Name *"}),s.jsx("input",{type:"text",value:c.lastName,onChange:ve=>I("lastName",ve.target.value),className:"w-full px-4 py-3 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:border-primary-500"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Email *"}),s.jsx("input",{type:"email",value:c.email,onChange:ve=>I("email",ve.target.value),className:"w-full px-4 py-3 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:border-primary-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Phone *"}),s.jsx("input",{type:"tel",value:c.phone,onChange:ve=>I("phone",ve.target.value),placeholder:"0412 345 678",className:"w-full px-4 py-3 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:border-primary-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Instagram Handle *"}),s.jsxs("div",{className:"relative",children:[s.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500",children:"@"}),s.jsx("input",{type:"text",value:c.instagram,onChange:ve=>I("instagram",ve.target.value.replace("@","")),placeholder:"yourhandle",className:"w-full pl-8 pr-4 py-3 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:border-primary-500"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Coach's Name *"}),s.jsx("input",{type:"text",value:c.coachName,onChange:ve=>I("coachName",ve.target.value),placeholder:"Coach name",className:"w-full px-4 py-3 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:border-primary-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Coach's Instagram *"}),s.jsxs("div",{className:"relative",children:[s.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500",children:"@"}),s.jsx("input",{type:"text",value:c.coachInstagram,onChange:ve=>I("coachInstagram",ve.target.value.replace("@","")),placeholder:"coachhandle",className:"w-full pl-8 pr-4 py-3 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:border-primary-500"})]})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm text-gray-400 mb-2",children:["Divisions * ",s.jsx("span",{className:"text-gray-600",children:"(select all that apply)"})]}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:_Re.map(ve=>{const ne=c.divisions.includes(ve);return s.jsxs("button",{type:"button",onClick:()=>U(ve),className:`px-3 py-2 rounded-lg text-sm text-left transition-all ${ne?"bg-primary-600/20 border-2 border-primary-500 text-white":"bg-dark-800 border-2 border-gray-700 text-gray-400 hover:border-gray-600"}`,children:[ne&&s.jsx("span",{className:"mr-1",children:""}),ve]},ve)})})]})]}),e===3&&s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Reference Photo"}),s.jsx("p",{className:"text-gray-500 mb-6",children:"We use AI to find you in the footage"}),c.referenceImagePreview?s.jsxs("div",{className:"text-center",children:[s.jsx("img",{src:c.referenceImagePreview,alt:"Reference",className:"w-40 h-40 object-cover rounded-xl mx-auto border-2 border-primary-500 mb-4"}),s.jsx("button",{onClick:()=>{I("referenceImage",null),I("referenceImagePreview",null)},className:"text-primary-400 text-sm",children:"Choose different photo"})]}):s.jsx("div",{className:"space-y-4",children:p?s.jsxs("div",{className:"text-center",children:[y&&s.jsx("div",{className:"w-full max-w-xs mx-auto h-60 rounded-xl border border-gray-700 bg-dark-800 flex items-center justify-center mb-4",children:s.jsx("span",{className:"text-gray-400",children:"Loading camera..."})}),s.jsx("video",{ref:f,autoPlay:!0,playsInline:!0,muted:!0,style:{width:"100%",maxWidth:"320px",height:"auto",minHeight:"240px",display:y?"none":"block"},className:"mx-auto rounded-xl border border-gray-700 bg-dark-800"}),s.jsx("canvas",{ref:m,className:"hidden"}),s.jsxs("div",{className:"flex gap-3 justify-center mt-4",children:[s.jsx("button",{onClick:()=>{E&&(E.getTracks().forEach(ve=>ve.stop()),N(null)),g(!1),x(!1)},className:"px-6 py-3 bg-gray-700 text-white rounded-lg font-medium",children:"Cancel"}),s.jsx("button",{onClick:q,className:"px-8 py-3 bg-primary-600 text-white rounded-lg font-medium",children:" Capture"})]})]}):s.jsxs(s.Fragment,{children:[s.jsxs("button",{onClick:G,className:"w-full py-8 bg-dark-800 border-2 border-dashed border-gray-700 rounded-xl text-gray-400 hover:border-primary-500 hover:text-white transition-colors flex flex-col items-center gap-2",children:[s.jsx("span",{className:"text-4xl",children:""}),s.jsx("span",{children:"Take a Selfie"})]}),w&&s.jsx("p",{className:"text-red-400 text-sm text-center",children:w}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"flex-1 h-px bg-dark-800"}),s.jsx("span",{className:"text-gray-600 text-sm",children:"or"}),s.jsx("div",{className:"flex-1 h-px bg-dark-800"})]}),s.jsxs("label",{className:"block w-full py-8 bg-dark-800 border-2 border-dashed border-gray-700 rounded-xl text-gray-400 hover:border-primary-500 hover:text-white transition-colors text-center cursor-pointer",children:[s.jsx("span",{className:"text-4xl block mb-2",children:""}),s.jsx("span",{children:"Upload Photo"}),s.jsx("input",{type:"file",accept:"image/*",onChange:J,className:"hidden"})]})]})})]}),e===4&&s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"Confirm Order"}),s.jsxs("div",{className:"space-y-4 mb-6",children:[s.jsxs("div",{className:"bg-dark-800/50 rounded-xl p-4",children:[s.jsx("p",{className:"text-gray-500 text-sm mb-2",children:"Package"}),s.jsx("p",{className:"text-white font-semibold",children:c.selectedPackage?.name}),s.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Shows:"}),c.selectedEvents.map(ve=>s.jsxs("p",{className:"text-white text-sm",children:[" ",lI.find(ne=>ne.id===ve)?.name]},ve))]}),s.jsxs("div",{className:"bg-dark-800/50 rounded-xl p-4 space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500",children:"Name"}),s.jsxs("span",{className:"text-white",children:[c.firstName," ",c.lastName]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500",children:"Email"}),s.jsx("span",{className:"text-white text-sm",children:c.email})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500",children:"Phone"}),s.jsx("span",{className:"text-white",children:c.phone})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500",children:"Instagram"}),s.jsxs("span",{className:"text-white",children:["@",c.instagram]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500",children:"Divisions"}),s.jsx("span",{className:"text-white text-right text-sm",children:c.divisions.join(", ")})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500",children:"Coach"}),s.jsxs("span",{className:"text-white",children:[c.coachName," (@",c.coachInstagram,")"]})]})]}),c.referenceImagePreview&&s.jsxs("div",{className:"flex items-center gap-4 bg-dark-800/50 rounded-xl p-4",children:[s.jsx("img",{src:c.referenceImagePreview,alt:"Reference",className:"w-12 h-12 object-cover rounded-lg"}),s.jsx("span",{className:"text-gray-400 text-sm",children:"Reference photo "})]})]}),s.jsx("div",{className:"bg-primary-600/10 border border-primary-500/30 rounded-xl p-4 mb-4",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"text-white font-semibold",children:[c.selectedPackage?.name,"  ",c.selectedEvents.length]}),C.savings>0&&s.jsxs("p",{className:"text-green-400 text-sm",children:["Saving $",C.savings]})]}),s.jsxs("p",{className:"text-3xl font-bold text-white",children:["$",C.total]})]})})]}),s.jsxs("div",{className:"flex gap-3 mt-6",children:[e>1&&s.jsx("button",{onClick:()=>r(e-1),className:"flex-1 py-3 bg-dark-800 text-white rounded-lg font-medium hover:bg-dark-700",children:"Back"}),e<4?s.jsx("button",{onClick:()=>r(e+1),disabled:!xe(),className:`flex-1 py-3 rounded-lg font-medium ${xe()?"bg-primary-600 text-white hover:bg-primary-700":"bg-dark-800 text-gray-600 cursor-not-allowed"}`,children:"Continue"}):s.jsx("button",{onClick:de,disabled:l,className:"flex-1 py-4 bg-green-500 text-white rounded-lg font-bold hover:bg-green-600 disabled:opacity-50 text-lg",children:l?"Processing...":`Pay $${C.total} AUD`})]})]})})]})};function Mh(t){if(!t||!t.includes("drive.google.com"))return t;let e=null;const r=t.match(/\/file\/d\/([a-zA-Z0-9_-]+)/);if(r&&(e=r[1]),!e){const n=t.match(/[?&]id=([a-zA-Z0-9_-]+)/);n&&(e=n[1])}return e?`https://lh3.googleusercontent.com/d/${e}`:t}function TRe(){const[t,e]=T.useState([]),[r,n]=T.useState(!0);T.useEffect(()=>{i()},[]);async function i(){const{data:o,error:c}=await ir.from("organizations").select("*").eq("active",!0).order("name");!c&&o&&e(o),n(!1)}const a=[{name:"Sarah M.",event:"NBA QLD State Titles",quote:"The highlight reel captured my stage moment perfectly. Worth every cent!",image:null},{name:"Jake T.",event:"WNG Championship",quote:"Professional quality footage that I use for all my social media. Highly recommend!",image:null},{name:"Michelle R.",event:"NBA Sydney Nationals",quote:"Finally have professional content of my competition. The team was amazing!",image:null}];return s.jsxs("div",{className:"min-h-screen bg-black text-white",children:[s.jsx("section",{className:"relative py-20 px-4",children:s.jsxs("div",{className:"max-w-6xl mx-auto text-center",children:[s.jsx("span",{className:"inline-block px-4 py-2 bg-red-600/20 text-red-500 rounded-full text-sm font-medium mb-6",children:"Professional Athlete Content"}),s.jsxs("h1",{className:"text-4xl md:text-6xl font-bold mb-6",children:["Capture Your ",s.jsx("span",{className:"text-red-500",children:"Moment"})]}),s.jsx("p",{className:"text-xl text-gray-400 max-w-3xl mx-auto mb-8",children:"Multi-angle coverage, cinematic editing, delivered ready for social media. We've captured thousands of athletes across bodybuilding, grappling, and combat sports."}),s.jsx("button",{onClick:()=>document.getElementById("select-org")?.scrollIntoView({behavior:"smooth"}),className:"inline-block px-8 py-4 bg-red-600 hover:bg-red-700 rounded-lg font-semibold text-lg transition-colors cursor-pointer",children:"Order Your Content "})]})}),s.jsx("section",{className:"py-16 px-4 bg-gray-900/50",children:s.jsxs("div",{className:"max-w-6xl mx-auto",children:[s.jsx("h2",{className:"text-3xl font-bold text-center mb-12",children:"What You Get"}),s.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"bg-gray-800/50 p-6 rounded-xl border border-gray-700",children:[s.jsx("div",{className:"w-12 h-12 bg-red-600/20 rounded-lg flex items-center justify-center mb-4",children:s.jsx("svg",{className:"w-6 h-6 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Multi-Angle Coverage"}),s.jsx("p",{className:"text-gray-400",children:"Professional cameras capturing every angle of your performance"})]}),s.jsxs("div",{className:"bg-gray-800/50 p-6 rounded-xl border border-gray-700",children:[s.jsx("div",{className:"w-12 h-12 bg-red-600/20 rounded-lg flex items-center justify-center mb-4",children:s.jsx("svg",{className:"w-6 h-6 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 4V2a1 1 0 011-1h8a1 1 0 011 1v2m-9 0h10m-10 0a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V6a2 2 0 00-2-2"})})}),s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Cinematic Editing"}),s.jsx("p",{className:"text-gray-400",children:"Color graded, music synced, ready to share highlight reels"})]}),s.jsxs("div",{className:"bg-gray-800/50 p-6 rounded-xl border border-gray-700",children:[s.jsx("div",{className:"w-12 h-12 bg-red-600/20 rounded-lg flex items-center justify-center mb-4",children:s.jsx("svg",{className:"w-6 h-6 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})}),s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Fast Delivery"}),s.jsx("p",{className:"text-gray-400",children:"Your content delivered digitally, typically within 2 weeks"})]})]})]})}),s.jsx("section",{className:"py-16 px-4",children:s.jsxs("div",{className:"max-w-6xl mx-auto",children:[s.jsx("h2",{className:"text-3xl font-bold text-center mb-4",children:"Athletes Love Their Content"}),s.jsx("p",{className:"text-gray-400 text-center mb-12",children:"Join thousands of athletes who've captured their moments"}),s.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:a.map((o,c)=>s.jsxs("div",{className:"bg-gray-800/30 p-6 rounded-xl border border-gray-700",children:[s.jsx("div",{className:"flex items-center gap-1 mb-4",children:[...Array(5)].map((u,l)=>s.jsx("svg",{className:"w-5 h-5 text-yellow-500",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},l))}),s.jsxs("p",{className:"text-gray-300 mb-4",children:['"',o.quote,'"']}),s.jsxs("div",{className:"text-sm",children:[s.jsx("span",{className:"font-semibold text-white",children:o.name}),s.jsxs("span",{className:"text-gray-500",children:["  ",o.event]})]})]},c))})]})}),s.jsx("section",{id:"select-org",className:"py-16 px-4 bg-gray-900/50",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsx("h2",{className:"text-3xl font-bold text-center mb-4",children:"Select Your Organization"}),s.jsx("p",{className:"text-gray-400 text-center mb-12",children:"Choose the federation or event organizer you competed with"}),r?s.jsx("div",{className:"text-center text-gray-400",children:"Loading organizations..."}):t.length===0?s.jsx("div",{className:"text-center text-gray-400",children:"No organizations available yet."}):s.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:t.map(o=>s.jsxs(rs,{to:`/order/${o.slug}`,className:"flex items-center gap-4 p-6 bg-gray-800/50 hover:bg-gray-800 border border-gray-700 hover:border-red-500/50 rounded-xl transition-all group",children:[s.jsx("div",{className:"w-16 h-16 bg-gray-700 rounded-lg flex items-center justify-center text-2xl font-bold text-red-500 overflow-hidden",children:o.logo_url?s.jsx("img",{src:Mh(o.logo_url),alt:o.name,className:"w-full h-full object-contain p-1"}):o.name.split(" ").map(c=>c[0]).join("").slice(0,3)}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-lg font-semibold group-hover:text-red-500 transition-colors",children:o.name}),o.description&&s.jsx("p",{className:"text-sm text-gray-400",children:o.description})]}),s.jsx("svg",{className:"w-6 h-6 text-gray-500 group-hover:text-red-500 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]},o.id))})]})}),s.jsx("section",{className:"py-16 px-4",children:s.jsxs("div",{className:"max-w-3xl mx-auto",children:[s.jsx("h2",{className:"text-3xl font-bold text-center mb-12",children:"Frequently Asked Questions"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("details",{className:"bg-gray-800/30 rounded-xl border border-gray-700 p-4 group",children:[s.jsxs("summary",{className:"font-semibold cursor-pointer list-none flex justify-between items-center",children:["When will I receive my content?",s.jsx("span",{className:"text-gray-500 group-open:rotate-180 transition-transform",children:""})]}),s.jsx("p",{className:"mt-4 text-gray-400",children:"Content is typically delivered within 2 weeks of the event, depending on the package and event size."})]}),s.jsxs("details",{className:"bg-gray-800/30 rounded-xl border border-gray-700 p-4 group",children:[s.jsxs("summary",{className:"font-semibold cursor-pointer list-none flex justify-between items-center",children:["What's included in the highlight reel?",s.jsx("span",{className:"text-gray-500 group-open:rotate-180 transition-transform",children:""})]}),s.jsx("p",{className:"mt-4 text-gray-400",children:"A fully edited 60-90 second video featuring your best moments, color graded with music and transitions, optimized for social media."})]}),s.jsxs("details",{className:"bg-gray-800/30 rounded-xl border border-gray-700 p-4 group",children:[s.jsxs("summary",{className:"font-semibold cursor-pointer list-none flex justify-between items-center",children:["Can I order after the event?",s.jsx("span",{className:"text-gray-500 group-open:rotate-180 transition-transform",children:""})]}),s.jsx("p",{className:"mt-4 text-gray-400",children:"Yes! You can pre-order before the event or order afterwards. We capture all athletes at every event we cover."})]}),s.jsxs("details",{className:"bg-gray-800/30 rounded-xl border border-gray-700 p-4 group",children:[s.jsxs("summary",{className:"font-semibold cursor-pointer list-none flex justify-between items-center",children:["What if I competed in multiple shows?",s.jsx("span",{className:"text-gray-500 group-open:rotate-180 transition-transform",children:""})]}),s.jsx("p",{className:"mt-4 text-gray-400",children:"No problem! Select all the shows you competed in during checkout. Multi-show bundles may be available."})]})]})]})}),s.jsx("section",{className:"py-16 px-4 bg-gradient-to-b from-gray-900/50 to-black",children:s.jsxs("div",{className:"max-w-3xl mx-auto text-center",children:[s.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Ready to Get Your Content?"}),s.jsx("p",{className:"text-gray-400 mb-8",children:"Select your organization above to see available events and packages."}),s.jsx("button",{onClick:()=>document.getElementById("select-org")?.scrollIntoView({behavior:"smooth"}),className:"inline-block px-8 py-4 bg-red-600 hover:bg-red-700 rounded-lg font-semibold text-lg transition-colors cursor-pointer",children:"Select Organization "})]})})]})}const CRe="https://gonalgubgldgpkcekaxe.supabase.co",NRe=`${CRe}/functions/v1/content-checkout`;function kRe(){const{orgSlug:t}=Kh(),e=Fc();ky();const[r,n]=T.useState(null),[i,a]=T.useState([]),[o,c]=T.useState([]),[u,l]=T.useState([]),[d,f]=T.useState(!0),[m,p]=T.useState(null),[g,y]=T.useState(()=>{const Ue=new URLSearchParams(window.location.search),jt=window.location.hash;return Ue.get("success")==="true"||jt.includes("success=true")}),[x,w]=T.useState(()=>{const Ue=new URLSearchParams(window.location.search),jt=window.location.hash;return Ue.get("canceled")==="true"||jt.includes("canceled=true")});T.useEffect(()=>{if(g||x){const Ue=window.location.origin+window.location.pathname+"#/order/"+t;window.history.replaceState({},"",Ue)}},[g,x,t]);const[_,E]=T.useState(1),[N,C]=T.useState(null),[I,D]=T.useState([]),[U,G]=T.useState({firstName:"",lastName:"",email:"",phone:"",divisions:[],instagram:"",coachName:"",coachInstagram:""}),[q,J]=T.useState(!1);T.useEffect(()=>{de()},[t]);async function de(){f(!0),p(null);const{data:Ue,error:jt}=await ir.from("organizations").select("*").eq("slug",t).eq("active",!0).single();if(jt||!Ue){p("Organization not found"),f(!1);return}n(Ue);const{data:rt}=await ir.from("events").select("*").eq("organization_id",Ue.id).eq("active",!0).order("date",{ascending:!1});a(rt||[]);const{data:Ct}=await ir.from("packages").select("*").eq("organization_id",Ue.id).eq("active",!0).order("sort_order");c(Ct||[]);const{data:ke}=await ir.from("galleries").select("id, title, slug, event_id, price_per_photo, package_price, package_enabled, pricing_tiers, tiered_pricing_enabled").eq("organization_id",Ue.id).eq("status","published").order("created_at",{ascending:!1});l(ke||[]),f(!1)}function xe(Ue){D(jt=>jt.includes(Ue)?jt.filter(rt=>rt!==Ue):[...jt,Ue])}function we(Ue){G(jt=>({...jt,[Ue.target.name]:Ue.target.value}))}function ve(){return N&&I.length>0}function ne(){return i.filter(Ue=>I.includes(Ue.id)).some(Ue=>Ue.divisions_required===!0)}function ae(){const Ue=U.firstName&&U.lastName&&U.email&&U.phone&&U.instagram&&U.coachName&&U.coachInstagram;return ne()?Ue&&U.divisions.length>0:Ue}const[oe,Ie]=T.useState([]),[Ce,be]=T.useState([]),[ue,Pe]=T.useState([]),[Re,He]=T.useState(!1);T.useEffect(()=>{I.length>0?Fe():(Ie([]),be([]))},[I]);async function Fe(){He(!0);const{data:Ue}=await ir.from("division_categories").select("*").in("event_id",I).eq("active",!0).order("sort_order");if(Ue&&Ue.length>0){Ie(Ue);const jt=Ue.map(Ct=>Ct.id),{data:rt}=await ir.from("division_subdivisions").select("*").in("category_id",jt).eq("active",!0).order("sort_order");be(rt||[])}else Ie([]),be([]);He(!1)}function ft(Ue){Pe(jt=>jt.includes(Ue)?jt.filter(rt=>rt!==Ue):[...jt,Ue])}function at(Ue){return Ce.filter(jt=>jt.category_id===Ue)}function De(Ue,jt){const rt=`${Ue} - ${jt}`;G(Ct=>({...Ct,divisions:Ct.divisions.includes(rt)?Ct.divisions.filter(ke=>ke!==rt):[...Ct.divisions,rt]}))}function ut(Ue){return U.divisions.filter(jt=>jt.startsWith(Ue+" - "))}async function et(){if(ae()){J(!0);try{const Ue=o.find(Xe=>Xe.id===N),jt=i.filter(Xe=>I.includes(Xe.id)).map(Xe=>Xe.name).join(", "),rt=Ue.price*I.length,ke=await(await fetch(NRe,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({event_id:I[0],organization_id:r.id,package_id:N,first_name:U.firstName,last_name:U.lastName,email:U.email,phone:U.phone,division:U.divisions.join(", "),instagram:U.instagram,coach_name:U.coachName,coach_instagram:U.coachInstagram,amount:rt,success_url:`${window.location.origin}/#/order/${t}?success=true`,cancel_url:`${window.location.origin}/#/order/${t}?canceled=true`})})).json();if(ke.url)ke.sessionId&&console.log("Checkout session created:",ke.sessionId),window.location.href=ke.url;else throw new Error("No checkout URL received")}catch(Ue){console.error("Checkout error:",Ue),alert("Error creating checkout. Please try again.")}finally{J(!1)}}}return g?s.jsx("div",{className:"min-h-screen bg-black text-white flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-gray-900 rounded-2xl p-8 max-w-md w-full text-center border border-gray-800",children:[s.jsx("div",{className:"w-20 h-20 bg-green-500/20 rounded-full flex items-center justify-center mx-auto mb-6",children:s.jsx("svg",{className:"w-10 h-10 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),s.jsx("h2",{className:"text-3xl font-bold mb-3",children:"You're Locked In! "}),s.jsx("p",{className:"text-gray-400 mb-6",children:"Thanks for your order! We'll capture your performance at the event and deliver your professionally edited content afterwards."}),s.jsx("p",{className:"text-gray-500 text-sm mb-6",children:"Check your email for confirmation details."}),s.jsx(rs,{to:"/content",className:"inline-block px-8 py-3 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700",children:"Back to Events"})]})}):x?s.jsx("div",{className:"min-h-screen bg-black text-white flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-gray-900 rounded-2xl p-8 max-w-md w-full text-center border border-gray-800",children:[s.jsx("div",{className:"w-20 h-20 bg-yellow-500/20 rounded-full flex items-center justify-center mx-auto mb-6",children:s.jsx("span",{className:"text-4xl",children:""})}),s.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Payment Canceled"}),s.jsx("p",{className:"text-gray-400 mb-6",children:"No worries  your order wasn't charged. You can try again whenever you're ready."}),s.jsx("button",{onClick:()=>w(!1),className:"px-8 py-3 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700",children:"Try Again"})]})}):d?s.jsx("div",{className:"min-h-screen bg-black text-white flex items-center justify-center",children:s.jsx("div",{className:"text-gray-400",children:"Loading..."})}):m?s.jsxs("div",{className:"min-h-screen bg-black text-white flex flex-col items-center justify-center gap-4",children:[s.jsx("div",{className:"text-red-500",children:m}),s.jsx(rs,{to:"/content",className:"text-gray-400 hover:text-white",children:" Back to all organizations"})]}):s.jsx("div",{className:"min-h-screen bg-black text-white py-12 px-4",children:s.jsxs("div",{className:"max-w-3xl mx-auto",children:[s.jsxs("button",{onClick:()=>e("/content"),className:"inline-flex items-center gap-2 text-gray-400 hover:text-white mb-8 mt-4",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})," All Organizations"]}),s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("span",{className:"inline-block px-4 py-2 bg-red-600/20 text-red-500 rounded-full text-sm font-medium mb-4",children:r.name}),s.jsxs("h1",{className:"text-3xl md:text-4xl font-bold mb-2",children:["Order Your ",s.jsx("span",{className:"text-red-500",children:"Content"})]}),s.jsx("p",{className:"text-gray-400",children:"Select your package and events below"})]}),s.jsx("div",{className:"flex items-center justify-center gap-4 mb-12",children:[{num:1,label:"Package & Events"},{num:2,label:"Your Info"},{num:3,label:"Checkout"}].map((Ue,jt)=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-semibold ${_>=Ue.num?"bg-red-600 text-white":"bg-gray-700 text-gray-400"}`,children:Ue.num}),s.jsx("span",{className:`text-sm hidden sm:inline ${_>=Ue.num?"text-white":"text-gray-500"}`,children:Ue.label}),jt<2&&s.jsx("div",{className:"w-8 h-px bg-gray-700 mx-2"})]},Ue.num))}),_===1&&s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"bg-gray-900/50 rounded-xl p-6 border border-gray-800",children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Select Package"}),s.jsx("div",{className:"space-y-3",children:o.map(Ue=>s.jsx("button",{onClick:()=>C(Ue.id),className:`w-full p-4 rounded-lg border text-left transition-all ${N===Ue.id?"border-red-500 bg-red-500/10":"border-gray-700 hover:border-gray-600 bg-gray-800/50"}`,children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold",children:Ue.name}),s.jsx("div",{className:"text-sm text-gray-400",children:Ue.description}),Ue.name.toLowerCase().includes("combo")&&s.jsx("span",{className:"text-xs text-green-500 mt-1 inline-block font-semibold",children:"Save $50"})]}),s.jsxs("div",{className:"text-xl font-bold",children:["$",Ue.price]})]})},Ue.id))})]}),u.length>0&&s.jsxs("div",{className:"bg-gradient-to-br from-purple-900/30 to-pink-900/30 rounded-xl p-6 border border-purple-500/30",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("div",{className:"w-10 h-10 bg-purple-500/20 rounded-full flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),s.jsxs("div",{children:[s.jsxs("h2",{className:"text-xl font-semibold text-white",children:["View ",r.name," Galleries"]}),s.jsx("p",{className:"text-purple-300 text-sm",children:"Professional event photos available for purchase"})]})]}),s.jsx("div",{className:"space-y-3",children:u.map(Ue=>{const jt=i.find(rt=>rt.id===Ue.event_id);return s.jsx(rs,{to:`/gallery/${Ue.slug}`,className:"block bg-black/30 rounded-lg p-4 border border-purple-500/20 hover:border-purple-500/50 hover:bg-purple-900/20 transition-all",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-white",children:Ue.title}),s.jsxs("div",{className:"text-sm text-purple-300",children:[jt?.name&&s.jsxs("span",{children:[jt.name,"  "]}),"From $",(Ue.price_per_photo/100).toFixed(2),"/photo",Ue.tiered_pricing_enabled&&s.jsx("span",{className:"ml-2 text-green-400",children:" Volume discounts"})]})]}),s.jsxs("div",{className:"flex items-center gap-2 text-purple-400",children:[s.jsx("span",{className:"text-sm font-medium",children:"Browse Photos"}),s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})},Ue.id)})})]}),s.jsxs("div",{className:"bg-gray-900/50 rounded-xl p-6 border border-gray-800",children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Which events did you compete in?"}),i.length===0?s.jsx("p",{className:"text-gray-400",children:"No events available for this organization yet."}):s.jsx("div",{className:"space-y-3",children:i.map(Ue=>s.jsxs("button",{onClick:()=>xe(Ue.id),className:`w-full p-4 rounded-lg border text-left transition-all flex justify-between items-center ${I.includes(Ue.id)?"border-red-500 bg-red-500/10":"border-gray-700 hover:border-gray-600 bg-gray-800/50"}`,children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold",children:Ue.name}),s.jsxs("div",{className:"text-sm text-gray-400",children:[Ue.date&&new Date(Ue.date).toLocaleDateString("en-AU",{year:"numeric",month:"short",day:"numeric"}),Ue.location&&`  ${Ue.location}`]})]}),s.jsx("div",{className:`w-6 h-6 rounded border-2 flex items-center justify-center ${I.includes(Ue.id)?"border-red-500 bg-red-500":"border-gray-600"}`,children:I.includes(Ue.id)&&s.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})})]},Ue.id))})]}),s.jsx("button",{onClick:()=>E(2),disabled:!ve(),className:`w-full py-4 rounded-lg font-semibold text-lg transition-all ${ve()?"bg-red-600 hover:bg-red-700 text-white":"bg-gray-700 text-gray-500 cursor-not-allowed"}`,children:"Continue "})]}),_===2&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-gray-900/50 rounded-xl p-6 border border-gray-800",children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Your Information"}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"First Name *"}),s.jsx("input",{type:"text",name:"firstName",value:U.firstName,onChange:we,className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg focus:border-red-500 focus:outline-none",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Last Name *"}),s.jsx("input",{type:"text",name:"lastName",value:U.lastName,onChange:we,className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg focus:border-red-500 focus:outline-none",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Email *"}),s.jsx("input",{type:"email",name:"email",value:U.email,onChange:we,className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg focus:border-red-500 focus:outline-none",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Phone *"}),s.jsx("input",{type:"tel",name:"phone",value:U.phone,onChange:we,className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg focus:border-red-500 focus:outline-none",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Instagram Handle *"}),s.jsx("input",{type:"text",name:"instagram",value:U.instagram,onChange:we,placeholder:"@yourhandle",className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg focus:border-red-500 focus:outline-none",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Coach's Name *"}),s.jsx("input",{type:"text",name:"coachName",value:U.coachName,onChange:we,className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg focus:border-red-500 focus:outline-none",required:!0})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Coach's Instagram Handle *"}),s.jsx("input",{type:"text",name:"coachInstagram",value:U.coachInstagram,onChange:we,placeholder:"@coachhandle",className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg focus:border-red-500 focus:outline-none",required:!0})]})]})]}),(oe.length>0||ne())&&s.jsxs("div",{className:"bg-gray-900/50 rounded-xl p-6 border border-gray-800",children:[s.jsxs("h2",{className:"text-xl font-semibold mb-2",children:["Division/Category ",ne()?"*":"(Optional)"]}),s.jsx("p",{className:"text-sm text-gray-400 mb-4",children:oe.length>0?"Click a category to expand, then select your divisions":"No divisions configured for this event"}),Re?s.jsx("div",{className:"text-center text-gray-400 py-8",children:"Loading divisions..."}):oe.length===0?s.jsxs("div",{className:"text-center text-gray-400 py-8 border border-gray-700 rounded-lg",children:["No divisions configured for the selected event(s).",ne()&&s.jsxs(s.Fragment,{children:[s.jsx("br",{}),s.jsx("span",{className:"text-sm text-red-400",children:"Contact the organizer to set up divisions."})]})]}):s.jsx("div",{className:"space-y-2",children:oe.map(Ue=>{const jt=ue.includes(Ue.id),rt=ut(Ue.name).length,Ct=at(Ue.id);return s.jsxs("div",{className:"border border-gray-700 rounded-lg overflow-hidden",children:[s.jsxs("button",{type:"button",onClick:()=>ft(Ue.id),className:`w-full p-4 flex justify-between items-center transition-colors ${rt>0?"bg-red-500/10 border-l-4 border-l-red-500":"bg-gray-800/50 hover:bg-gray-800"}`,children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"font-medium",children:Ue.name}),rt>0&&s.jsxs("span",{className:"text-xs bg-red-500 text-white px-2 py-0.5 rounded-full",children:[rt," selected"]})]}),s.jsx("svg",{className:`w-5 h-5 text-gray-400 transition-transform ${jt?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),jt&&s.jsx("div",{className:"p-4 pt-2 bg-gray-900/50 border-t border-gray-700",children:Ct.length===0?s.jsx("p",{className:"text-sm text-gray-500 italic",children:"No subdivisions available"}):s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:Ct.map(ke=>{const Xe=`${Ue.name} - ${ke.name}`,mt=U.divisions.includes(Xe);return s.jsx("button",{type:"button",onClick:()=>De(Ue.name,ke.name),className:`p-3 text-sm rounded-lg border text-left transition-all ${mt?"border-red-500 bg-red-500/20 text-white":"border-gray-600 hover:border-gray-500 bg-gray-800/50 text-gray-300"}`,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:`w-4 h-4 rounded border-2 flex items-center justify-center ${mt?"border-red-500 bg-red-500":"border-gray-500"}`,children:mt&&s.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),s.jsx("span",{children:ke.name})]})},ke.id)})})})]},Ue.id)})}),U.divisions.length>0&&s.jsxs("div",{className:"mt-4 p-3 bg-gray-800/50 rounded-lg border border-gray-700",children:[s.jsxs("div",{className:"text-sm text-gray-400 mb-2",children:["Selected divisions (",U.divisions.length,"):"]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:U.divisions.map(Ue=>s.jsxs("span",{className:"inline-flex items-center gap-1 text-xs bg-red-500/20 text-red-400 px-2 py-1 rounded-full border border-red-500/30",children:[Ue,s.jsx("button",{type:"button",onClick:()=>{const[jt,rt]=Ue.split(" - ");De(jt,rt)},className:"hover:text-white",children:""})]},Ue))})]})]}),s.jsxs("div",{className:"bg-gray-900/50 rounded-xl p-6 border border-gray-800",children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Order Summary"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-400",children:"Package:"}),s.jsx("span",{children:o.find(Ue=>Ue.id===N)?.name})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-400",children:"Events:"}),s.jsx("span",{className:"text-right",children:i.filter(Ue=>I.includes(Ue.id)).map(Ue=>Ue.name).join(", ")})]}),s.jsx("hr",{className:"border-gray-700 my-3"}),s.jsxs("div",{className:"flex justify-between text-lg font-semibold",children:[s.jsx("span",{children:"Total:"}),s.jsxs("span",{className:"text-red-500",children:["$",(o.find(Ue=>Ue.id===N)?.price||0)*I.length," AUD",I.length>1&&s.jsxs("span",{className:"text-sm text-gray-400 font-normal ml-2",children:["($",o.find(Ue=>Ue.id===N)?.price,"  ",I.length," events)"]})]})]})]})]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsx("button",{onClick:()=>E(1),className:"flex-1 py-4 rounded-lg font-semibold border border-gray-600 hover:border-gray-500 transition-colors",children:" Back"}),s.jsx("button",{onClick:et,disabled:!ae()||q,className:`flex-1 py-4 rounded-lg font-semibold transition-all ${ae()&&!q?"bg-red-600 hover:bg-red-700 text-white":"bg-gray-700 text-gray-500 cursor-not-allowed"}`,children:q?"Processing...":"Proceed to Payment "})]})]})]})})}const LRe=t=>{if(!t)return"there";const e={fortitude:"Fortitude Boxing","fortitude-boxing":"Fortitude Boxing",inception:"Inception Fight Series","inception-fight-series":"Inception Fight Series",qbjjc:"QBJJC",wng:"WNG Grappling",artemis:"Artemis Grappling","artemis-grappling":"Artemis Grappling",m16:"M16 BJJ","m16-bjj":"M16 BJJ",nba:"Natural Bodybuilding Australia",eternal:"Eternal MMA","eternal-mma":"Eternal MMA",beatdown:"Beatdown Promotions",honour:"Honour Premier League",aggression:"Aggression Thai Boxing"};return e[t.toLowerCase()]?e[t.toLowerCase()]:t.split("-").map(r=>r.charAt(0).toUpperCase()+r.slice(1)).join(" ")},IRe=()=>{const{orgSlug:t}=Kh(),e=LRe(t);return s.jsxs("div",{className:"pt-20 sm:pt-24 min-h-screen",children:[s.jsx("section",{className:"py-12 sm:py-20 px-4 sm:px-6 bg-gradient-to-b from-primary-950/30 to-transparent",children:s.jsx("div",{className:"max-w-4xl mx-auto text-center",children:s.jsxs(Dr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[s.jsx("img",{src:"/ffm-logo.jpg",alt:"Fit Focus Media",className:"w-24 h-24 sm:w-32 sm:h-32 mx-auto mb-6 rounded-xl"}),t&&s.jsxs("p",{className:"text-lg text-primary-400 mb-2 font-medium",children:["Hi ",e," "]}),s.jsxs("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-black mb-4",children:[s.jsx("span",{className:"text-gradient",children:"Professional Live Production"}),s.jsx("br",{}),s.jsx("span",{className:"text-white",children:"for Combat Sports"})]}),s.jsx("p",{className:"text-xl sm:text-2xl text-gray-300 mb-2 font-semibold",children:"Zero Cost. Zero Risk. New Revenue."}),s.jsx("p",{className:"text-gray-400 max-w-2xl mx-auto",children:"We produce your event for free. You earn money from PPV sales. Professional broadcast quality without the production headaches."})]})})}),s.jsx("section",{className:"py-8 sm:py-12 px-4 sm:px-6 bg-dark-900 border-y border-gray-800",children:s.jsx("div",{className:"max-w-4xl mx-auto",children:s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-6",children:[{icon:$N,value:"25+",label:"Events Produced"},{icon:f1,value:"4",label:"Countries"},{icon:nh,value:"50K+",label:"Viewers Reached"},{icon:Tf,value:"100%",label:"Client Satisfaction"}].map((r,n)=>s.jsxs(Dr.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:n*.1},className:"text-center",children:[s.jsx(r.icon,{className:"w-6 h-6 text-primary-500 mx-auto mb-2"}),s.jsx("p",{className:"text-2xl sm:text-3xl font-black text-primary-500",children:r.value}),s.jsx("p",{className:"text-xs sm:text-sm text-gray-400",children:r.label})]},n))})})}),s.jsx("section",{className:"py-12 sm:py-16 px-4 sm:px-6",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsx(Dr.h2,{initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0},className:"text-2xl sm:text-3xl font-black text-center mb-10",children:s.jsxs("span",{className:"text-gradient",children:["What We Can Do For ",t?e:"You"]})}),s.jsx("div",{className:"space-y-6",children:[{icon:bh,title:"Live Streaming & PPV",points:["Multi-camera professional broadcast","PPV platform setup & management","Live graphics & instant replay","Full show recording for VOD"]},{icon:k2,title:"Event Photography",points:["Ring-side action shots","Athlete portraits & walk-outs","Complete digital gallery","Same-week delivery"]},{icon:nm,title:"Content Production",points:["Social media highlight clips","Event recap videos","Fighter promo content","YouTube-ready formats"]}].map((r,n)=>s.jsxs(Dr.div,{initial:{opacity:0,x:-20},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{delay:n*.1},className:"bg-dark-800 border border-gray-700 rounded-xl p-6 flex gap-4",children:[s.jsx("div",{className:"w-12 h-12 bg-primary-600/20 rounded-xl flex items-center justify-center flex-shrink-0",children:s.jsx(r.icon,{className:"w-6 h-6 text-primary-500"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg sm:text-xl font-bold text-white mb-2",children:r.title}),s.jsx("ul",{className:"grid grid-cols-1 sm:grid-cols-2 gap-1",children:r.points.map((i,a)=>s.jsxs("li",{className:"flex items-center gap-2 text-sm text-gray-300",children:[s.jsx(la,{className:"w-4 h-4 text-green-500 flex-shrink-0"}),i]},a))})]})]},n))})]})}),s.jsx("section",{className:"py-12 sm:py-16 px-4 sm:px-6 bg-dark-900/50",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsx(Dr.h2,{initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0},className:"text-2xl sm:text-3xl font-black text-center mb-10",children:s.jsx("span",{className:"text-gradient",children:"How It Works"})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[{step:"1",title:"We Produce",desc:"Full professional broadcast production  cameras, switching, graphics, streaming. All handled by our team."},{step:"2",title:"Fans Pay",desc:"Your audience purchases PPV access at $20-30. We handle the platform, payments, and viewer experience."},{step:"3",title:"You Earn",desc:"You receive revenue share from every sale. Zero upfront cost, zero risk  just new income."}].map((r,n)=>s.jsxs(Dr.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:n*.15},className:"text-center",children:[s.jsx("div",{className:"w-14 h-14 bg-primary-600 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx("span",{className:"text-2xl font-black text-white",children:r.step})}),s.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:r.title}),s.jsx("p",{className:"text-gray-400 text-sm",children:r.desc})]},n))}),s.jsxs(Dr.div,{initial:{opacity:0,scale:.95},whileInView:{opacity:1,scale:1},viewport:{once:!0},className:"bg-gradient-to-r from-green-900/40 to-emerald-900/40 border-2 border-green-500/50 rounded-xl p-6 text-center",children:[s.jsx(Gh,{className:"w-10 h-10 text-green-400 mx-auto mb-3"}),s.jsx("h3",{className:"text-2xl font-black text-white mb-2",children:"Your Cost: $0"}),s.jsx("p",{className:"text-gray-300 text-sm max-w-xl mx-auto",children:"We cover all production costs. You pay nothing upfront. You earn revenue from PPV sales that you weren't making before."})]})]})}),s.jsx("section",{className:"py-12 sm:py-16 px-4 sm:px-6",children:s.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[s.jsx(Dr.h2,{initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0},className:"text-2xl sm:text-3xl font-black mb-6",children:s.jsx("span",{className:"text-gradient",children:"Who We've Worked With"})}),s.jsx("p",{className:"text-gray-400 mb-8",children:"Boxing, MMA, BJJ, Muay Thai, Kickboxing  we've covered them all"}),s.jsx("div",{className:"flex flex-wrap justify-center gap-4 text-sm",children:["Fortitude Boxing","WNG Grappling","Inception Fight Series","QBJJC","Natural Bodybuilding Australia","Artemis Grappling","M16 BJJ"].map((r,n)=>s.jsx("span",{className:`px-4 py-2 rounded-full text-gray-300 ${r.toLowerCase().includes(t?.toLowerCase()||"---")?"bg-primary-600/30 border border-primary-500/50 text-primary-300":"bg-dark-800 border border-gray-700"}`,children:r},n))})]})}),s.jsx("section",{className:"py-12 sm:py-16 px-4 sm:px-6 bg-dark-900/50",children:s.jsx("div",{className:"max-w-2xl mx-auto text-center",children:s.jsxs(Dr.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},children:[s.jsxs("h2",{className:"text-2xl sm:text-3xl font-black mb-4",children:["Ready to ",s.jsx("span",{className:"text-gradient",children:"Get Started?"})]}),s.jsx("p",{className:"text-gray-400 mb-8",children:t?`Let's discuss how FFM can help ${e} reach more fans and generate new revenue.`:"Get a free analysis of your organization and see exactly how much revenue professional media coverage could generate."}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center mb-8",children:[s.jsxs(rs,{to:"/book",className:"group px-8 py-4 bg-primary-600 hover:bg-primary-700 text-white font-black rounded-lg text-lg transition-all hover:scale-105 inline-flex items-center justify-center gap-2",children:["Book a Call",s.jsx(Fh,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]}),s.jsxs("a",{href:"mailto:brandon@fitfocusmedia.com.au",className:"px-8 py-4 bg-white/10 hover:bg-white/20 text-white font-bold rounded-lg text-lg transition-all border border-white/20 inline-flex items-center justify-center gap-2",children:[s.jsx(tu,{className:"w-5 h-5"}),"Email Us"]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4 text-sm text-gray-400",children:[s.jsxs("a",{href:"mailto:brandon@fitfocusmedia.com.au",className:"flex items-center gap-2 hover:text-primary-400 transition-colors",children:[s.jsx(tu,{className:"w-4 h-4"}),"brandon@fitfocusmedia.com.au"]}),s.jsxs("a",{href:"tel:0411934935",className:"flex items-center gap-2 hover:text-primary-400 transition-colors",children:[s.jsx(my,{className:"w-4 h-4"}),"0411 934 935"]})]})]})})}),s.jsx("section",{className:"py-6 px-4 sm:px-6 border-t border-gray-800",children:s.jsx("div",{className:"max-w-4xl mx-auto text-center",children:s.jsxs("p",{className:"text-sm text-gray-500",children:["Learn more at"," ",s.jsx("a",{href:"https://fitfocusmedia.com.au",className:"text-primary-400 hover:text-primary-300",children:"fitfocusmedia.com.au"})]})})})]})},Zre=T.createContext({}),tF=()=>{const t=T.useContext(Zre);if(!t)throw new Error("useAuth must be used within AuthProvider");return t},BRe=({children:t})=>{const[e,r]=T.useState(null),[n,i]=T.useState(null),[a,o]=T.useState(!0);T.useEffect(()=>{ir.auth.getSession().then(({data:{session:m}})=>{i(m),r(m?.user??null),o(!1)});const{data:{subscription:f}}=ir.auth.onAuthStateChange((m,p)=>{i(p),r(p?.user??null)});return()=>f.unsubscribe()},[]);const d={user:e,session:n,loading:a,signIn:async(f,m)=>{const{data:p,error:g}=await ir.auth.signInWithPassword({email:f,password:m});if(g)throw g;return p},signInWithMagicLink:async(f,m)=>{const{data:p,error:g}=await ir.auth.signInWithOtp({email:f.toLowerCase(),options:{emailRedirectTo:m||window.location.origin}});if(g)throw g;return p},signOut:async()=>{const{error:f}=await ir.auth.signOut();if(f)throw f}};return s.jsx(Zre.Provider,{value:d,children:t})};function du({children:t}){const{user:e,loading:r}=tF();return r?s.jsx("div",{className:"min-h-screen bg-dark-950 flex items-center justify-center",children:s.jsx("div",{className:"text-white text-xl",children:"Loading..."})}):e?t:s.jsx(jY,{to:"/portal",replace:!0})}function Bu({children:t}){const{user:e,signOut:r}=tF(),n=Fc(),i=kf(),a=async()=>{try{await r(),n("/portal")}catch(u){console.error("Error signing out:",u)}},o=u=>i.pathname.startsWith(u),c=[{name:"Contracts",path:"/portal/contracts"},{name:"Pipeline",path:"/portal/pipeline"},{name:"Proposals",path:"/portal/proposals"},{name:"Outreach",path:"/portal/outreach"},{name:"Onboarding",path:"/portal/onboarding"},{name:"Content",path:"/portal/content-admin"},{name:"Orders",path:"/portal/orders"},{name:"Livestream",path:"/portal/livestream"},{name:"Analytics",path:"/portal/livestream/analytics"},{name:"Crews",path:"/portal/crews"},{name:"Pricing",path:"/portal/pricing"}];return s.jsxs("div",{className:"min-h-screen bg-[#0d0d1a] flex flex-col overflow-x-hidden w-full max-w-full",children:[s.jsx("header",{className:"print:hidden bg-gradient-to-r from-[#1a1a2e] to-[#16162a] border-b border-gray-800/50 w-full max-w-full overflow-hidden",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-3 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"flex items-center justify-between h-16",children:[s.jsxs("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>n("/portal/contracts"),children:[s.jsxs("span",{className:"text-lg font-black tracking-wider",children:[s.jsx("span",{className:"text-red-500",children:"FIT FOCUS"})," ",s.jsx("span",{className:"text-white",children:"MEDIA"})]}),s.jsx("span",{className:"text-gray-700",children:"|"}),s.jsx("span",{className:"text-gray-400 font-medium",children:"Portal"})]}),e&&s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("span",{className:"text-gray-500 text-sm hidden sm:block",children:e.email}),s.jsx("button",{onClick:a,className:"px-4 py-2 bg-gray-800 hover:bg-gray-700 text-gray-300 hover:text-white rounded-lg transition-all text-sm font-medium border border-gray-700/50",children:"Sign Out"})]})]}),e&&s.jsx("div",{className:"flex gap-1 sm:gap-4 -mb-px overflow-x-auto scrollbar-hide pb-px",children:c.map(u=>s.jsxs("button",{onClick:()=>n(u.path),className:`relative px-3 sm:px-4 py-3 font-bold text-xs sm:text-sm transition-colors whitespace-nowrap flex-shrink-0 ${o(u.path)?"text-red-500":"text-gray-400 hover:text-gray-300"}`,children:[u.name,o(u.path)&&s.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-red-500"})]},u.path))})]})}),s.jsx("main",{className:"flex-1",children:t})]})}function PRe(){const[t,e]=T.useState(""),[r,n]=T.useState(""),[i,a]=T.useState(""),[o,c]=T.useState(!1),{signIn:u}=tF(),l=Fc(),d=async f=>{f.preventDefault(),a(""),c(!0);try{await u(t,r),l("/portal/contracts")}catch(m){a(m.message||"Failed to sign in")}finally{c(!1)}};return s.jsx("div",{className:"min-h-screen bg-dark-950 flex items-center justify-center px-4",children:s.jsxs("div",{className:"max-w-md w-full",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"Portal Login"}),s.jsx("p",{className:"text-gray-400",children:"Fit Focus Media Contract Management"})]}),s.jsx("div",{className:"bg-dark-900 rounded-lg p-8 shadow-xl",children:s.jsxs("form",{onSubmit:d,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300 mb-2",children:"Email"}),s.jsx("input",{id:"email",type:"email",value:t,onChange:f=>e(f.target.value),required:!0,className:"w-full px-4 py-3 bg-dark-800 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your email"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300 mb-2",children:"Password"}),s.jsx("input",{id:"password",type:"password",value:r,onChange:f=>n(f.target.value),required:!0,className:"w-full px-4 py-3 bg-dark-800 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:""})]}),i&&s.jsx("div",{className:"bg-red-900/30 border border-red-500 text-red-200 px-4 py-3 rounded-lg",children:i}),s.jsx("button",{type:"submit",disabled:o,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-800 text-white font-medium py-3 px-6 rounded-lg transition-colors",children:o?"Signing in...":"Sign In"})]})})]})})}function rF(t){const e=t.contract_data||{},r=(u,l="[NOT SET]")=>u||`<span class="text-gray-500">${l}</span>`,n=(u,l,d="[NOT SET]")=>!u&&!l?`<span class="text-gray-500">${d}</span>`:u?!l||l===u?u:`${u}${l}`:l,i=u=>u?"":"";let a="";e.multi_events&&e.multi_events.length>0&&e.multi_events.forEach((u,l)=>{(u.name||u.date||u.venue)&&(a+=`
          <tr>
            <td class="border border-gray-700 px-4 py-2">${l+1}</td>
            <td class="border border-gray-700 px-4 py-2">${r(u.name)}</td>
            <td class="border border-gray-700 px-4 py-2">${r(u.date)}</td>
            <td class="border border-gray-700 px-4 py-2">${r(u.venue)}</td>
          </tr>
        `)});const o=u=>u?`$${parseFloat(u).toLocaleString()}`:"$0";let c="";return e.athlete_revenue_ffm_100?c="<p><strong> FFM retains 100%</strong> of Athlete Media Package sales. This is reflected in the zero upfront cost and Client deliverables provided at no charge.</p>":c=`
      <table class="w-full border-collapse border border-gray-700 my-4">
        <tr><th class="border border-gray-700 px-4 py-2 bg-gray-800">Party</th><th class="border border-gray-700 px-4 py-2 bg-gray-800">Share</th></tr>
        <tr><td class="border border-gray-700 px-4 py-2"><strong>FFM</strong></td><td class="border border-gray-700 px-4 py-2">${r(e.athlete_ffm_split,"80")}%</td></tr>
        <tr><td class="border border-gray-700 px-4 py-2"><strong>Client</strong></td><td class="border border-gray-700 px-4 py-2">${r(e.athlete_client_split,"20")}%</td></tr>
      </table>
      <p>The Client's share will be paid monthly, with a statement of sales provided.</p>
    `,`
    <div class="contract-content prose prose-invert max-w-none">
      <h1 class="text-3xl font-bold mb-6">EVENT MEDIA COVERAGE & PARTNERSHIP AGREEMENT</h1>
      
      <p><strong>AGREEMENT</strong> made on <strong>${r(e.agreement_date,new Date().toLocaleDateString())}</strong></p>
      
      <p><strong>BETWEEN:</strong></p>
      
      <p>
        <strong>Fit Focus Media</strong> ABN ${r(e.ffm_abn,"[ABN]")}<br>
        Represented by: Brandon Hibbs<br>
        Email: info@fitfocusmedia.com.au<br>
        Website: www.fitfocusmedia.com.au<br>
        (hereinafter referred to as <strong>"FFM"</strong> or <strong>"the Media Provider"</strong>)
      </p>
      
      <p><strong>AND:</strong></p>
      
      <p>
        <strong>${r(e.org_name,"[ORGANIZATION NAME]")}</strong><br>
        Represented by: ${r(e.promoter_name,"[PROMOTER NAME]")}<br>
        Position: ${r(e.promoter_position,"[POSITION]")}<br>
        Email: ${r(e.promoter_email,"[EMAIL]")}<br>
        Phone: ${r(e.promoter_phone,"[PHONE]")}<br>
        (hereinafter referred to as <strong>"the Client"</strong> or <strong>"the Event Organiser"</strong>)
      </p>
      
      <hr class="my-6 border-gray-700">
      
      <h2 class="text-2xl font-bold mt-6 mb-4">1. EVENT DETAILS</h2>
      <table class="w-full border-collapse border border-gray-700 my-4">
        <tr><th class="border border-gray-700 px-4 py-2 bg-gray-800">Field</th><th class="border border-gray-700 px-4 py-2 bg-gray-800">Details</th></tr>
        <tr><td class="border border-gray-700 px-4 py-2"><strong>Event Name</strong></td><td class="border border-gray-700 px-4 py-2">${r(e.event_name)}</td></tr>
        <tr><td class="border border-gray-700 px-4 py-2"><strong>Event Date(s)</strong></td><td class="border border-gray-700 px-4 py-2">${r(e.event_date)}</td></tr>
        <tr><td class="border border-gray-700 px-4 py-2"><strong>Event Location</strong></td><td class="border border-gray-700 px-4 py-2">${r(e.event_location)}</td></tr>
        <tr><td class="border border-gray-700 px-4 py-2"><strong>Event Type</strong></td><td class="border border-gray-700 px-4 py-2">${r(e.event_type,"BJJ / Grappling Competition")}</td></tr>
        <tr><td class="border border-gray-700 px-4 py-2"><strong>Estimated Matches</strong></td><td class="border border-gray-700 px-4 py-2">${r(e.estimated_matches)}</td></tr>
        <tr><td class="border border-gray-700 px-4 py-2"><strong>Expected Athlete Participants</strong></td><td class="border border-gray-700 px-4 py-2">${r(e.expected_athletes)}</td></tr>
        <tr><td class="border border-gray-700 px-4 py-2"><strong>Expected Audience</strong></td><td class="border border-gray-700 px-4 py-2">${r(e.expected_audience)}</td></tr>
      </table>
      
      <h2 class="text-2xl font-bold mt-6 mb-4">2. PARTNERSHIP MODEL  ZERO UPFRONT COST</h2>
      
      <h3 class="text-xl font-bold mt-4 mb-2">2.1 No Upfront Fee</h3>
      <p>FFM will provide full professional media coverage for the Event at <strong>no upfront cost</strong> to the Client.</p>
      
      <h3 class="text-xl font-bold mt-4 mb-2">2.2 What FFM Provides at Zero Cost</h3>
      <ul class="list-disc pl-6 my-4">
        <li>Multi-camera professional video coverage (${n(e.camera_angles,e.camera_angles_max,"2")} camera angles)</li>
        ${e.photography_type==="professional"?"<li>Professional event photography</li>":""}
        ${e.photography_type==="base"?"<li>Base event photography</li>":""}
        <li>Livestream and/or PPV broadcast production (if applicable)</li>
        <li>Post-event highlight reel for the Client's promotional use</li>
        <li>Access to the FFM Athlete Media Portal for athlete content delivery</li>
        <li>On-site crew (${n(e.crew_size,e.crew_size_max,"2")} persons)</li>
      </ul>
      
      <h3 class="text-xl font-bold mt-4 mb-2">2.3 Multi-Event Commitment</h3>
      <p>This Agreement covers <strong>${r(e.multi_event_count,"1")}</strong> events over a period of <strong>${r(e.multi_event_duration,"[DURATION]")}</strong>${a?", as scheduled below:":"."}</p>
      
      ${a?`
        <table class="w-full border-collapse border border-gray-700 my-4">
          <tr><th class="border border-gray-700 px-4 py-2 bg-gray-800">#</th><th class="border border-gray-700 px-4 py-2 bg-gray-800">Event Name</th><th class="border border-gray-700 px-4 py-2 bg-gray-800">Date</th><th class="border border-gray-700 px-4 py-2 bg-gray-800">Venue</th></tr>
          ${a}
        </table>
      `:""}
      
      <h2 class="text-2xl font-bold mt-6 mb-4">3. SCOPE OF MEDIA COVERAGE</h2>
      
      <h3 class="text-xl font-bold mt-4 mb-2">3.1 Post-Production Deliverables for the Client</h3>
      <ul class="list-disc pl-6 my-4">
        <li>One (1) Event Highlight Reel (60120 seconds) within ${n(e.highlight_delivery_days,e.highlight_delivery_days_max,"7")} business days</li>
        <li>${n(e.social_clips_count,e.social_clips_count_max,"5")} social media clips within ${n(e.social_clips_delivery_days,e.social_clips_delivery_days_max,"5")} business days</li>
        ${e.photography_type&&e.photography_type!=="none"?`<li>Curated photo gallery of ${n(e.photo_count,e.photo_count_max,"50")} edited images</li>`:""}
      </ul>
      
      <h3 class="text-xl font-bold mt-4 mb-2">3.2 Livestream / PPV Production</h3>
      <p>
        <strong>Livestream included:</strong> ${i(e.livestream_included)} ${e.livestream_included?"Yes":"No"}<br>
        <strong>PPV included:</strong> ${i(e.ppv_included)} ${e.ppv_included?"Yes":"No"}
      </p>
      ${e.ppv_included?`
        <p>
          <strong>Platform:</strong> ${r(e.ppv_platform)}<br>
          <strong>PPV Price Point:</strong> ${e.ppv_price_type==="range"&&e.ppv_price_max?`${o(e.ppv_price)} - ${o(e.ppv_price_max)}`:o(e.ppv_price)} per viewer
        </p>
      `:""}
      
      <h2 class="text-2xl font-bold mt-6 mb-4">4. LIVESTREAM & PPV REVENUE SHARE</h2>
      ${e.ppv_included?`
        <table class="w-full border-collapse border border-gray-700 my-4">
          <tr><th class="border border-gray-700 px-4 py-2 bg-gray-800">Party</th><th class="border border-gray-700 px-4 py-2 bg-gray-800">Share</th></tr>
          <tr><td class="border border-gray-700 px-4 py-2"><strong>FFM</strong></td><td class="border border-gray-700 px-4 py-2">${r(e.ppv_ffm_split,"70")}%</td></tr>
          <tr><td class="border border-gray-700 px-4 py-2"><strong>Client</strong></td><td class="border border-gray-700 px-4 py-2">${r(e.ppv_client_split,"30")}%</td></tr>
        </table>
        <p>The Client's share will be paid within ${r(e.ppv_payment_days,"21")} days of each Event via bank transfer.</p>
      `:"<p>PPV not included in this agreement.</p>"}
      
      <h2 class="text-2xl font-bold mt-6 mb-4">5. ATHLETE MEDIA PACKAGES</h2>
      
      <h3 class="text-xl font-bold mt-4 mb-2">5.1 Overview</h3>
      <p>FFM operates a direct-to-athlete media sales model through the <strong>FFM Athlete Media Portal</strong>.</p>
      
      <h3 class="text-xl font-bold mt-4 mb-2">5.2 Available Packages</h3>
      ${e.athlete_packages&&e.athlete_packages.length>0?`
        <table class="w-full border-collapse border border-gray-700 my-4">
          <tr>
            <th class="border border-gray-700 px-4 py-2 bg-gray-800 text-left">Package</th>
            <th class="border border-gray-700 px-4 py-2 bg-gray-800 text-left">Price</th>
            <th class="border border-gray-700 px-4 py-2 bg-gray-800 text-left">Description</th>
          </tr>
          ${e.athlete_packages.map(u=>`
            <tr>
              <td class="border border-gray-700 px-4 py-2"><strong>${u.name||"[Package Name]"}</strong></td>
              <td class="border border-gray-700 px-4 py-2">${o(u.price)}</td>
              <td class="border border-gray-700 px-4 py-2">${u.description||"-"}</td>
            </tr>
          `).join("")}
        </table>
      `:`
        <p><strong> VIP COVERAGE</strong>  ${o(e.vip_price||350)}</p>
        <p><strong> MATCH PACKAGE</strong>  ${o(e.match_price||175)}</p>
        <p><strong> SEASON PASS</strong>  ${o(e.season_price||899)}/year</p>
      `}
      
      <h3 class="text-xl font-bold mt-4 mb-2">5.3 Athlete Media Package Revenue Split</h3>
      ${c}
      
      ${e.add_ons&&e.add_ons.length>0?`
      <h2 class="text-2xl font-bold mt-6 mb-4">6. CLIENT ADD-ONS</h2>
      <p>The following additional services have been included in this Agreement at the Client's request:</p>
      <table class="w-full border-collapse border border-gray-700 my-4">
        <tr>
          <th class="border border-gray-700 px-4 py-2 bg-gray-800 text-left">Add-On</th>
          <th class="border border-gray-700 px-4 py-2 bg-gray-800 text-left">Price</th>
          <th class="border border-gray-700 px-4 py-2 bg-gray-800 text-left">Description</th>
        </tr>
        ${e.add_ons.map(u=>`
          <tr>
            <td class="border border-gray-700 px-4 py-2"><strong>${u.name||"[Add-On Name]"}</strong></td>
            <td class="border border-gray-700 px-4 py-2">${o(u.price)}</td>
            <td class="border border-gray-700 px-4 py-2">${u.description||"-"}</td>
          </tr>
        `).join("")}
        <tr class="bg-gray-800">
          <td class="border border-gray-700 px-4 py-2"><strong>TOTAL ADD-ONS</strong></td>
          <td class="border border-gray-700 px-4 py-2"><strong>${o(e.add_ons.reduce((u,l)=>u+(parseFloat(l.price)||0),0))}</strong></td>
          <td class="border border-gray-700 px-4 py-2"></td>
        </tr>
      </table>
      <p>Payment for add-ons is due prior to the Event date unless otherwise agreed in writing.</p>
      
      <h2 class="text-2xl font-bold mt-6 mb-4">7. EXCLUSIVE MEDIA COVERAGE RIGHTS</h2>
      `:`
      <h2 class="text-2xl font-bold mt-6 mb-4">6. EXCLUSIVE MEDIA COVERAGE RIGHTS</h2>
      `}
      <p>The Client grants FFM <strong>exclusive rights</strong> to provide professional video and photography media coverage services at the Event.</p>
      
      <h2 class="text-2xl font-bold mt-6 mb-4">7. ACCESS & LOGISTICS</h2>
      <ul class="list-disc pl-6 my-4">
        <li>FFM requires venue access at least ${r(e.setup_hours,"2")} hours prior to first match</li>
        <li>Crew size: ${n(e.crew_size,e.crew_size_max,"2")} persons with complimentary entry</li>
        ${e.internet_speed?`<li>Internet upload speed: minimum ${e.internet_speed} Mbps</li>`:""}
        <li>Event schedule to be provided ${r(e.schedule_hours_before,"48")} hours before Event</li>
        <li>Athlete list to be provided ${r(e.athlete_list_days_before,"7")} days before Event</li>
      </ul>
      
      <h3 class="text-xl font-bold mt-4 mb-2">7.1 Athlete Contact Information</h3>
      <p>The Client <strong>must provide</strong> FFM with contact information for all registered athletes, including but not limited to:</p>
      <ul class="list-disc pl-6 my-4">
        <li>Full name</li>
        <li>Email address</li>
        <li>Phone number (where available)</li>
        <li>Social media handles (Instagram, etc.)</li>
      </ul>
      <p>This information will be used by FFM for:</p>
      <ul class="list-disc pl-6 my-4">
        <li>Delivering content and media packages to athletes via the FFM Athlete Media Portal</li>
        <li>Marketing and promotional communications regarding event content and athlete media services</li>
        <li>Tagging athletes in social media content</li>
      </ul>
      <p>The Client warrants that appropriate consent has been obtained from athletes for their contact information to be shared with FFM for these purposes, as outlined in Section 12.</p>
      
      <h2 class="text-2xl font-bold mt-6 mb-4">8. CANCELLATION & RESCHEDULING</h2>
      <p>Cancellation less than 15 days before Event: Client will pay ${o(e.cancellation_fee||500)} cancellation fee plus non-recoverable expenses.</p>
      
      <h2 class="text-2xl font-bold mt-6 mb-4">9. TERM & TERMINATION</h2>
      <p>Initial term: ${r(e.initial_term_months,"12")} months. Auto-renews for ${r(e.renewal_period_months,"12")}-month periods unless ${r(e.nonrenewal_notice_days,"60")} days' written notice provided.</p>
      <p>Termination: ${r(e.termination_notice_days,"30")} days' written notice. Remedy period: ${r(e.remedy_period_days,"14")} days.</p>
      
      <h2 class="text-2xl font-bold mt-6 mb-4">10. LIABILITY & INSURANCE</h2>
      <p>FFM holds public liability insurance of ${o(e.pli_amount||2e7)}.</p>
      
      <h2 class="text-2xl font-bold mt-6 mb-4">11. INTELLECTUAL PROPERTY & OWNERSHIP</h2>
      
      <h3 class="text-xl font-bold mt-4 mb-2">11.1 Ownership of Content</h3>
      <p>The Client agrees that, subject to the rights and licenses granted herein, FFM is and will remain the <strong>sole and exclusive owner</strong> of all right, title, and interest, throughout the world, to all video footage, photographs, and other media content ("Content") produced under this Agreement, and any copies thereof. Except as expressly provided in this Agreement, FFM reserves all rights and licenses not expressly granted.</p>
      
      <h3 class="text-xl font-bold mt-4 mb-2">11.2 License to Client</h3>
      <p>FFM hereby grants to the Client a <strong>non-exclusive, perpetual license</strong> to use the deliverables specified in Section 3.1 (Event Highlight Reel, social media clips, and curated photo gallery) for promotional purposes related to the Event and Client's organization. This license is non-transferable and does not include the right to sublicense.</p>
      
      <h3 class="text-xl font-bold mt-4 mb-2">11.3 Restrictions on Use</h3>
      <p>The Client will NOT use the Content for any of the following purposes without prior written permission from FFM:</p>
      <ul class="list-disc pl-6 my-4">
        <li><strong>No Unlawful Use:</strong> The Client will not use the Content in any unlawful manner, including but not limited to pornography or defamation.</li>
        <li><strong>No Standalone File Distribution:</strong> The Client will not distribute raw footage or allow Content to be downloaded, extracted, or redistributed by third parties.</li>
        <li><strong>No Trademark Use:</strong> The Client will not use the Content in any trademark, design, logo, or service mark without FFM's written consent.</li>
        <li><strong>No Products for Resale:</strong> The Client will not use the Content in any goods or products where the Content is the primary value.</li>
        <li><strong>No Alterations:</strong> The Client will not alter, modify, or create derivative works from the Content without prior written permission from FFM.</li>
        <li><strong>No Sublicensing:</strong> The Client will not sublicense, sell, or transfer rights to the Content to any third party.</li>
      </ul>
      
      <h3 class="text-xl font-bold mt-4 mb-2">11.4 Credit Requirements</h3>
      <p>The Client must include appropriate credit to <strong>"Fit Focus Media"</strong> or <strong>"@fitfocusmedia"</strong> when publishing or sharing any Content produced under this Agreement on social media, websites, or promotional materials.</p>
      
      <h2 class="text-2xl font-bold mt-6 mb-4">12. MEDIA RELEASE & CONSENT</h2>
      
      <h3 class="text-xl font-bold mt-4 mb-2">12.1 Athlete Media Release</h3>
      <p>The Client acknowledges that FFM will capture video footage and photographs of athletes, coaches, officials, and spectators at the Event. The Client warrants that:</p>
      <ul class="list-disc pl-6 my-4">
        <li>Appropriate media release and consent has been obtained from all athletes participating in the Event, either through registration terms & conditions or separate media release forms.</li>
        <li>Athletes have been informed that professional media coverage will be present and content may be used for promotional, commercial, and broadcast purposes.</li>
        <li>Minors participating in the Event have appropriate parental/guardian consent for media capture and publication.</li>
      </ul>
      
      <h3 class="text-xl font-bold mt-4 mb-2">12.2 Grant of Rights</h3>
      <p>FFM is granted the <strong>perpetual and irrevocable right</strong> to use, publish, and distribute video and photographs captured at the Event for editorial, trade, advertising, promotional, and commercial purposes in any manner and medium, including but not limited to:</p>
      <ul class="list-disc pl-6 my-4">
        <li>Social media platforms and websites</li>
        <li>Marketing and promotional materials</li>
        <li>Broadcast and streaming services</li>
        <li>Athlete Media Packages sold through the FFM Portal</li>
        <li>Portfolio and showcase purposes</li>
      </ul>
      
      <h3 class="text-xl font-bold mt-4 mb-2">12.3 Implied Consent & Opt-Out Procedure</h3>
      <p>The parties agree that:</p>
      <ul class="list-disc pl-6 my-4">
        <li><strong>Implied Consent:</strong> All athletes, by registering for and competing in the Event, are deemed to have consented to the capture, use, and publication of their image, likeness, and performance by FFM for the purposes outlined in this Agreement.</li>
        <li><strong>Opt-Out Requirement:</strong> Any athlete who does not consent to media capture and publication must notify FFM <strong>in writing</strong> (via email to info@fitfocusmedia.com.au) no less than <strong>48 hours prior</strong> to the Event. FFM will make reasonable efforts to exclude such athletes from published content, however FFM cannot guarantee exclusion from all footage, particularly wide-angle or crowd shots.</li>
        <li><strong>Client Responsibility:</strong> The Client is solely responsible for communicating media coverage terms to athletes through registration materials, event signage, and/or announcements. The Client shall include appropriate notice in registration terms and conditions that professional media coverage will be present and content may be used commercially.</li>
        <li><strong>Liability:</strong> The Client assumes all liability for any claims arising from athletes who allege they did not consent to media capture. FFM shall not be held liable for any such claims, and the Client shall indemnify FFM accordingly as outlined in Section 13.</li>
      </ul>
      
      <h2 class="text-2xl font-bold mt-6 mb-4">13. INDEMNIFICATION</h2>
      <p>The Client will <strong>indemnify, defend, and hold harmless</strong> FFM, its officers, employees, agents, and contractors from all liability, claims, demands, causes of action, judgments, damages, and expenses (including reasonable attorneys' fees and costs) arising out of or as a result of:</p>
      <ul class="list-disc pl-6 my-4">
        <li>The Client's use of the Content in violation of this Agreement</li>
        <li>Any breach of the Client's representations or warranties under this Agreement</li>
        <li>Any claim by a third party (including athletes, spectators, or venue operators) relating to the Event</li>
        <li>The Client's failure to obtain proper media releases or consents</li>
      </ul>
      <p>This indemnification does not apply to claims arising solely from FFM's willful misconduct, gross negligence, or bad faith.</p>
      
      <h2 class="text-2xl font-bold mt-6 mb-4">14. LIMITATION OF LIABILITY</h2>
      <p><strong>EXCEPT FOR ANY REMEDIES THAT CANNOT BE EXCLUDED OR LIMITED BY LAW, NEITHER PARTY, NOR ANY AFFILIATE, WILL BE LIABLE UNDER THIS AGREEMENT TO THE OTHER PARTY FOR ANY INDIRECT, INCIDENTAL, CONSEQUENTIAL, SPECIAL, RELIANCE, OR PUNITIVE DAMAGES OR LOST OR IMPUTED PROFITS, LOST DATA, OR COST OF PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES.</strong></p>
      <p>FFM's total liability under this Agreement shall not exceed the total fees paid or payable by the Client under this Agreement in the twelve (12) months preceding the claim.</p>
      
      <h2 class="text-2xl font-bold mt-6 mb-4">15. FORCE MAJEURE</h2>
      <p>Neither party shall be liable for any failure or delay in performing their obligations under this Agreement if such failure or delay results from circumstances beyond the reasonable control of that party, including but not limited to: acts of God, natural disasters, pandemic, government actions, war, terrorism, civil unrest, or failure of third-party services.</p>
      
      <h2 class="text-2xl font-bold mt-6 mb-4">16. CONFIDENTIALITY</h2>
      <p>Each party agrees to keep confidential and not disclose to any third party any confidential information received from the other party, including but not limited to business strategies, financial information, athlete data, and the specific commercial terms of this Agreement, except as required by law or with prior written consent.</p>
      
      <h2 class="text-2xl font-bold mt-6 mb-4">17. ASSIGNMENT</h2>
      <p>This Agreement may not be assigned by the Client without FFM's prior written consent. FFM may assign this Agreement, in whole or in part, to any affiliate or successor without the Client's consent.</p>
      
      <h2 class="text-2xl font-bold mt-6 mb-4">18. DISPUTE RESOLUTION</h2>
      <p>Any dispute arising from this Agreement shall first be resolved through good-faith negotiation between the parties. If the dispute cannot be resolved through negotiation within thirty (30) days, the dispute shall be submitted to mediation. If mediation fails, the dispute will be resolved through binding arbitration conducted in Brisbane, Queensland in accordance with the rules of the Resolution Institute.</p>
      
      <h2 class="text-2xl font-bold mt-6 mb-4">19. GOVERNING LAW</h2>
      <p>This Agreement shall be governed by and construed in accordance with the laws of <strong>Queensland, Australia</strong>, without reference to rules governing choice of laws. The parties submit to the exclusive jurisdiction of the courts of Queensland.</p>
      
      <h2 class="text-2xl font-bold mt-6 mb-4">20. SEVERABILITY</h2>
      <p>If any provision of this Agreement is held invalid, illegal, or unenforceable by a court of competent jurisdiction, the remainder of the Agreement will remain valid and enforceable, and the parties will negotiate in good faith a substitute provision which most nearly reflects the original intent.</p>
      
      <h2 class="text-2xl font-bold mt-6 mb-4">21. ENTIRE AGREEMENT</h2>
      <p>This Agreement represents and constitutes the <strong>entire agreement</strong> between the parties with respect to the subject matter hereof, and supersedes and merges all prior negotiations, agreements, and understandings, oral or written. This Agreement may not be altered, modified, or amended except in writing signed by both parties.</p>
      
      <h2 class="text-2xl font-bold mt-6 mb-4">22. NOTICES</h2>
      <p>All notices, demands, or other communications under this Agreement shall be in writing and delivered via email with read receipt, registered mail, or hand delivery to the addresses specified in this Agreement. Notices delivered by email shall be deemed received on the business day sent (or the next business day if sent after 5pm AEST). Mailed notices shall be deemed received three (3) business days after posting.</p>
      
      ${e.custom_notes&&e.custom_notes.length>0?`
      <h2 class="text-2xl font-bold mt-6 mb-4">ADDITIONAL TERMS & NOTES</h2>
      <p>The following additional terms and event-specific provisions apply to this Agreement:</p>
      ${e.custom_notes.map((u,l)=>`
        <div class="bg-gray-800/50 border border-gray-700 rounded-lg p-4 my-4">
          <h3 class="text-lg font-bold mb-2">${u.title||`Custom Note ${l+1}`}</h3>
          <p class="whitespace-pre-wrap">${u.content||"[No content provided]"}</p>
        </div>
      `).join("")}
      `:""}
      
      <hr class="my-6 border-gray-700">
      
      <h2 class="text-2xl font-bold mt-6 mb-4">SIGNATURES</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-6">
        <div class="border border-gray-700 rounded-lg p-6">
          <h3 class="text-lg font-bold mb-4">Fit Focus Media</h3>
          ${t.ffm_signature?`
            <img src="${t.ffm_signature}" alt="FFM Signature" class="max-w-full h-auto border border-gray-600 p-2 rounded bg-white mb-4" style="max-width: 300px;">
            <p><strong>Name:</strong> Brandon Hibbs</p>
            <p><strong>Signed:</strong> ${new Date(t.ffm_signed_at).toLocaleString("en-AU",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0,timeZoneName:"short"})}</p>
          `:'<p class="text-gray-500">[PENDING FFM SIGNATURE]</p>'}
        </div>
        
        <div class="border border-gray-700 rounded-lg p-6">
          <h3 class="text-lg font-bold mb-4">${r(e.org_name,"[ORGANIZATION]")}</h3>
          ${t.client_signature?`
            <img src="${t.client_signature}" alt="Client Signature" class="max-w-full h-auto border border-gray-600 p-2 rounded bg-white mb-4" style="max-width: 300px;">
            <p><strong>Name:</strong> ${r(e.promoter_name)}</p>
            <p><strong>Position:</strong> ${r(e.promoter_position)}</p>
            <p><strong>Signed:</strong> ${new Date(t.client_signed_at).toLocaleString("en-AU",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0,timeZoneName:"short"})}</p>
          `:'<p class="text-gray-500">[PENDING CLIENT SIGNATURE]</p>'}
        </div>
      </div>
    </div>
  `}function nO(t){const e=document.createElement("canvas");e.width=t.width,e.height=t.height;const r=e.getContext("2d"),a=t.getContext("2d").getImageData(0,0,t.width,t.height).data,o=r.createImageData(t.width,t.height),c=o.data;for(let u=0;u<a.length;u+=4)a[u+3]>10?(c[u]=0,c[u+1]=0,c[u+2]=0,c[u+3]=255):(c[u]=255,c[u+1]=255,c[u+2]=255,c[u+3]=255);return r.putImageData(o,0,0),e.toDataURL("image/png")}function Jre(t){return t.getContext("2d").getImageData(0,0,t.width,t.height).data.some(n=>n!==0)}function iO(t){const e=window.location.hostname;let r;return e==="localhost"||e.includes("192.168.")||e.includes("100.")?r="https://clawdbots-mini.tailcfdc1.ts.net:5198":r=window.location.origin,`${r}/#/contract/${t}`}function ORe(t,e,r){const n=iO(t);return{subject:`Event Media Coverage Agreement  Fit Focus Media  ${r}`,body:`Hi ${e},

Please find your Event Media Coverage & Partnership Agreement with Fit Focus Media ready for review and signature.

Review & Sign Here:
${n}

Once you've reviewed the terms, you can sign directly on the page. If you have any questions, reply to this email.

Cheers,
Brandon Hibbs
Fit Focus Media
info@fitfocusmedia.com.au
www.fitfocusmedia.com.au`}}function nF(t){return{draft:"",sent:"",viewed:"",signed:"",expired:""}[t]||""}function ene(t){return`${{draft:"bg-gray-600",sent:"bg-blue-600",viewed:"bg-yellow-600",signed:"bg-green-600",expired:"bg-red-600"}[t]||"bg-gray-600"} text-white px-3 py-1 rounded-full text-sm font-medium inline-flex items-center gap-2`}const RRe={draft:"bg-gray-700 text-gray-200",sent:"bg-blue-600/20 text-blue-400 border border-blue-500/30",viewed:"bg-yellow-600/20 text-yellow-400 border border-yellow-500/30",signed:"bg-green-600/20 text-green-400 border border-green-500/30",expired:"bg-red-600/20 text-red-400 border border-red-500/30"};function DRe(){const[t,e]=T.useState([]),[r,n]=T.useState([]),[i,a]=T.useState(!0),[o,c]=T.useState(""),[u,l]=T.useState(""),[d,f]=T.useState("created_desc"),[m,p]=T.useState({total:0,signedThisMonth:0,pending:0,drafts:0,value:0}),g=Fc();T.useEffect(()=>{y()},[]),T.useEffect(()=>{w()},[t,o,u,d]);const y=async()=>{try{const _=await JM();e(_),x(_)}catch(_){console.error("Error loading contracts:",_)}finally{a(!1)}},x=_=>{const E=new Date,N=_.filter(U=>{if(U.status!=="signed")return!1;const G=new Date(U.created_at);return G.getMonth()===E.getMonth()&&G.getFullYear()===E.getFullYear()}),C=_.filter(U=>U.status==="sent"||U.status==="viewed"),I=_.filter(U=>U.status==="draft"),D=_.reduce((U,G)=>{const q=G.contract_data?.vip_price||0,J=G.contract_data?.expected_athletes||0;return U+q*J*.3},0);p({total:_.length,signedThisMonth:N.length,pending:C.length,drafts:I.length,value:Math.round(D)})},w=()=>{let _=[...t];if(o){const E=o.toLowerCase();_=_.filter(N=>(N.org_name||"").toLowerCase().includes(E)||(N.promoter_name||"").toLowerCase().includes(E)||(N.promoter_email||"").toLowerCase().includes(E))}u&&(_=_.filter(E=>E.status===u)),_.sort((E,N)=>{switch(d){case"created_asc":return new Date(E.created_at)-new Date(N.created_at);case"created_desc":return new Date(N.created_at)-new Date(E.created_at);case"org_name":return(E.org_name||"").localeCompare(N.org_name||"");case"status":return(E.status||"").localeCompare(N.status||"");default:return 0}}),n(_)};return i?s.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:s.jsx("div",{className:"text-gray-400 text-lg",children:"Loading contracts..."})}):s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-8",children:[s.jsxs("h1",{className:"text-3xl font-black text-white tracking-tight",children:[s.jsx("span",{className:"text-red-500",children:"CONTRACT"})," MANAGEMENT"]}),s.jsxs("button",{onClick:()=>g("/portal/contracts/new"),className:"bg-red-600 hover:bg-red-700 text-white px-6 py-3 rounded-lg font-bold transition-all hover:scale-105 flex items-center gap-2",children:[s.jsx("span",{className:"text-lg",children:"+"})," Create New Contract"]})]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-8",children:[{label:"TOTAL CONTRACTS",value:m.total,color:"text-white",filter:""},{label:"DRAFTS",value:m.drafts,color:"text-yellow-500",filter:"draft"},{label:"SIGNED THIS MONTH",value:m.signedThisMonth,color:"text-green-500",filter:"signed"},{label:"PENDING SIGNATURES",value:m.pending,color:"text-blue-400",filter:""},{label:"TOTAL VALUE",value:`$${m.value.toLocaleString()}`,color:"text-red-400",filter:""}].map(({label:_,value:E,color:N,filter:C})=>s.jsxs("div",{onClick:()=>C!==void 0&&l(C),className:`bg-[#1a1a2e] rounded-xl p-5 border border-gray-800/50 ${C!==""?"cursor-pointer hover:border-gray-600 transition-colors":""}`,children:[s.jsx("div",{className:"text-[11px] font-bold text-gray-500 tracking-widest uppercase mb-3",children:_}),s.jsx("div",{className:`text-3xl font-black ${N}`,children:E})]},_))}),s.jsxs("div",{className:"flex flex-col md:flex-row gap-3 mb-6",children:[s.jsx("input",{type:"text",value:o,onChange:_=>c(_.target.value),placeholder:"Search by organization name...",className:"flex-1 px-4 py-3 bg-[#1a1a2e] border border-gray-800/50 rounded-xl text-white placeholder-gray-600 focus:outline-none focus:ring-2 focus:ring-red-500/40 focus:border-red-500/40"}),s.jsxs("select",{value:u,onChange:_=>l(_.target.value),className:"px-4 py-3 bg-[#1a1a2e] border border-gray-800/50 rounded-xl text-gray-300 focus:outline-none focus:ring-2 focus:ring-red-500/40 min-w-[160px]",children:[s.jsx("option",{value:"",children:"All Statuses"}),s.jsx("option",{value:"draft",children:"Draft"}),s.jsx("option",{value:"sent",children:"Sent"}),s.jsx("option",{value:"viewed",children:"Viewed"}),s.jsx("option",{value:"signed",children:"Signed"}),s.jsx("option",{value:"expired",children:"Expired"})]}),s.jsxs("select",{value:d,onChange:_=>f(_.target.value),className:"px-4 py-3 bg-[#1a1a2e] border border-gray-800/50 rounded-xl text-gray-300 focus:outline-none focus:ring-2 focus:ring-red-500/40 min-w-[160px]",children:[s.jsx("option",{value:"created_desc",children:"Newest First"}),s.jsx("option",{value:"created_asc",children:"Oldest First"}),s.jsx("option",{value:"org_name",children:"Organization A-Z"}),s.jsx("option",{value:"status",children:"Status"})]})]}),r.length===0?s.jsxs("div",{className:"bg-[#1a1a2e] rounded-xl p-12 text-center border border-gray-800/50",children:[s.jsx("div",{className:"text-6xl mb-4",children:""}),s.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:t.length===0?"No Contracts Yet":"No Contracts Found"}),s.jsx("p",{className:"text-gray-500 mb-6",children:t.length===0?"Create your first contract to get started":"Try adjusting your search or filters"}),t.length===0&&s.jsx("button",{onClick:()=>g("/portal/contracts/new"),className:"bg-red-600 hover:bg-red-700 text-white px-6 py-3 rounded-lg font-bold transition-all",children:"Create New Contract"})]}):s.jsx("div",{className:"flex flex-col gap-3",children:r.map(_=>{const E=_.contract_data?.event_date?new Date(_.contract_data.event_date).toLocaleDateString("en-AU"):"Not set",N=new Date(_.created_at).toLocaleDateString("en-AU");return s.jsx("div",{onClick:()=>_.status==="draft"?g(`/portal/contracts/${_.id}/edit`):g(`/portal/contracts/${_.id}`),className:`bg-[#1a1a2e] rounded-xl p-5 border-l-4 ${_.status==="draft"?"border-l-yellow-500":"border-l-red-600"} border border-gray-800/50 hover:border-gray-700 cursor-pointer transition-all hover:bg-[#1f1f35] group`,children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-lg font-bold text-white group-hover:text-red-400 transition-colors",children:_.org_name||"Untitled Contract"}),s.jsxs("div",{className:"flex flex-wrap gap-x-6 gap-y-1 mt-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-[10px] font-bold text-gray-600 uppercase tracking-wider",children:"Promoter"}),s.jsx("div",{className:"text-gray-300",children:_.promoter_name||"N/A"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-[10px] font-bold text-gray-600 uppercase tracking-wider",children:"Event Date"}),s.jsx("div",{className:"text-gray-300",children:E})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-[10px] font-bold text-gray-600 uppercase tracking-wider",children:"Created"}),s.jsx("div",{className:"text-gray-300",children:N})]})]})]}),s.jsxs("span",{className:`px-3 py-1.5 rounded-full text-xs font-bold uppercase tracking-wider ${RRe[_.status]||"bg-gray-700 text-gray-300"}`,children:[nF(_.status)," ",_.status]})]})},_.id)})})]})}function tne({onSignatureChange:t,className:e=""}){const r=T.useRef(null),n=T.useRef(!1),i=T.useRef({x:0,y:0});T.useEffect(()=>{const o=r.current;if(!o)return;const c=()=>{const u=o.getBoundingClientRect();o.width=u.width,o.height=u.height,o.getContext("2d").clearRect(0,0,o.width,o.height)};return setTimeout(c,100),window.addEventListener("resize",c),()=>window.removeEventListener("resize",c)},[]),T.useEffect(()=>{const o=r.current;if(!o)return;const c=o.getContext("2d"),u=m=>{const p=o.getBoundingClientRect(),g=(m.clientX||m.touches?.[0]?.clientX||0)-p.left,y=(m.clientY||m.touches?.[0]?.clientY||0)-p.top;return{x:g,y}},l=m=>{m.preventDefault(),n.current=!0;const p=u(m);i.current=p},d=m=>{if(!n.current)return;m.preventDefault();const p=u(m);c.strokeStyle="#ffffff",c.lineWidth=2,c.lineCap="round",c.lineJoin="round",c.beginPath(),c.moveTo(i.current.x,i.current.y),c.lineTo(p.x,p.y),c.stroke(),i.current=p,t&&t(o)},f=()=>{n.current=!1};return o.addEventListener("mousedown",l),o.addEventListener("mousemove",d),o.addEventListener("mouseup",f),o.addEventListener("mouseout",f),o.addEventListener("touchstart",l),o.addEventListener("touchmove",d),o.addEventListener("touchend",f),()=>{o.removeEventListener("mousedown",l),o.removeEventListener("mousemove",d),o.removeEventListener("mouseup",f),o.removeEventListener("mouseout",f),o.removeEventListener("touchstart",l),o.removeEventListener("touchmove",d),o.removeEventListener("touchend",f)}},[t]);const a=()=>{const o=r.current;if(!o)return;o.getContext("2d").clearRect(0,0,o.width,o.height),t&&t(o)};return s.jsxs("div",{className:"signature-canvas-container",children:[s.jsx("canvas",{ref:r,className:`border-2 border-gray-600 rounded-lg bg-gray-900 cursor-crosshair touch-none ${e}`,style:{width:"100%",height:"200px"}}),s.jsx("button",{type:"button",onClick:a,className:"mt-2 px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg transition-colors",children:"Clear Signature"})]})}const hx=6;function QV({editMode:t=!1}){const{id:e}=Kh(),[r,n]=T.useState(1),[i,a]=T.useState({agreement_date:new Date().toISOString().split("T")[0],ffm_abn:"",org_name:"",promoter_name:"",promoter_position:"",promoter_email:"",promoter_phone:"",org_instagram:"",org_facebook:"",org_website:"",event_name:"",event_date:"",event_location:"",event_type:"BJJ / Grappling Competition",estimated_matches:"",expected_athletes:"",expected_audience:"",camera_angles:"2",camera_angles_max:"",crew_size:"2",crew_size_max:"",multi_event_count:"1",multi_event_duration:"",highlight_delivery_days:"7",highlight_delivery_days_max:"",social_clips_count:"5",social_clips_count_max:"",social_clips_delivery_days:"5",social_clips_delivery_days_max:"",photo_count:"50",photo_count_max:"",photography_included:!0,photography_type:"professional",livestream_included:!1,ppv_included:!1,ppv_platform:"",ppv_price:"",ppv_price_type:"fixed",ppv_price_max:"",ppv_ffm_split:"70",ppv_client_split:"30",ppv_payment_days:"21",vip_price:"350",match_price:"175",season_price:"899",athlete_revenue_ffm_100:!0,athlete_ffm_split:"80",athlete_client_split:"20",setup_hours:"2",internet_speed:"",schedule_hours_before:"48",athlete_list_days_before:"7",cancellation_fee:"500",initial_term_months:"12",renewal_period_months:"12",nonrenewal_notice_days:"60",termination_notice_days:"30",remedy_period_days:"14",pli_amount:"20000000"}),[o,c]=T.useState([]),[u,l]=T.useState([{name:"VIP Coverage",price:"350",description:"Full event coverage with priority editing, professional highlight reel, all match recordings, and premium photo package."},{name:"Match Package",price:"175",description:"Individual match recording with edited highlights and action photos from your matches."},{name:"Season Pass",price:"899",description:"Full season coverage across all events, priority processing, and exclusive content access."}]),[d,f]=T.useState([]),[m,p]=T.useState([]),[g,y]=T.useState(!1),[x,w]=T.useState(!1),[_,E]=T.useState(null),[N,C]=T.useState(t),[I,D]=T.useState(!0);T.useRef(null);const[U,G]=T.useState(null),[q,J]=T.useState(!1),[de,xe]=T.useState(null),we=Fc();T.useEffect(()=>{t&&e&&ve()},[t,e]);const ve=async()=>{try{C(!0);const Xe=await Wre(e);E(Xe);const mt=Xe.contract_data||{};a(Jt=>({...Jt,...mt})),mt.multi_events&&c(mt.multi_events),mt.athlete_packages&&l(mt.athlete_packages),mt.add_ons&&f(mt.add_ons),mt.custom_notes&&p(mt.custom_notes)}catch(Xe){console.error("Error loading contract:",Xe),alert("Failed to load contract for editing"),we("/portal/contracts")}finally{C(!1)}};T.useEffect(()=>{if(!t){const Xe=localStorage.getItem("contractBuilderData");if(Xe)try{const mt=JSON.parse(Xe);a(mt.formData||i),c(mt.multiEvents||[]),mt.athletePackages&&l(mt.athletePackages),mt.addOns&&f(mt.addOns),mt.customNotes&&p(mt.customNotes),n(mt.currentStep||1)}catch(mt){console.error("Error loading saved data:",mt)}}},[t]),T.useEffect(()=>{localStorage.setItem("contractBuilderData",JSON.stringify({formData:i,multiEvents:o,athletePackages:u,addOns:d,customNotes:m,currentStep:r}))},[i,o,u,d,m,r]);const ne=Xe=>{const{name:mt,value:Jt,type:tr,checked:lr}=Xe.target;a(Pr=>({...Pr,[mt]:tr==="checkbox"?lr:Jt}))},ae=()=>{c([...o,{name:"",date:"",venue:""}])},oe=Xe=>{c(o.filter((mt,Jt)=>Jt!==Xe))},Ie=(Xe,mt,Jt)=>{const tr=[...o];tr[Xe][mt]=Jt,c(tr)},Ce=(Xe,mt)=>{const Jt=Xe+mt;if(Jt<0||Jt>=o.length)return;const tr=[...o],[lr]=tr.splice(Xe,1);tr.splice(Jt,0,lr),c(tr)},be=()=>{l([...u,{name:"",price:"",description:""}])},ue=Xe=>{l(u.filter((mt,Jt)=>Jt!==Xe))},Pe=(Xe,mt,Jt)=>{const tr=[...u];tr[Xe][mt]=Jt,l(tr)},Re=()=>{f([...d,{name:"",price:"",description:"",included:!0}])},He=Xe=>{f(d.filter((mt,Jt)=>Jt!==Xe))},Fe=(Xe,mt,Jt)=>{const tr=[...d];tr[Xe][mt]=Jt,f(tr)},ft=()=>{p([...m,{title:"",content:""}])},at=Xe=>{p(m.filter((mt,Jt)=>Jt!==Xe))},De=(Xe,mt,Jt)=>{const tr=[...m];tr[Xe][mt]=Jt,p(tr)},ut=Xe=>{const Jt={1:["org_name","promoter_name","promoter_position","promoter_email","promoter_phone"],2:["event_name","event_date","event_location","estimated_matches","expected_athletes","expected_audience"],3:[],4:[],5:[],6:[]}[Xe]||[];for(const tr of Jt)if(!i[tr]||i[tr].trim()==="")return alert("Please fill in all required fields in this step."),!1;return!0},et=()=>{ut(r)&&r<hx&&(n(r+1),window.scrollTo({top:0,behavior:"smooth"}))},Ue=()=>{r>1&&(n(r-1),window.scrollTo({top:0,behavior:"smooth"}))},jt=Xe=>{n(Xe),window.scrollTo({top:0,behavior:"smooth"})},rt=async Xe=>{Xe.preventDefault();const mt=U&&Jre(U);if(!t){if(!mt){alert("Please sign the contract before submitting.");return}if(!q){alert("Please confirm your signature.");return}}y(!0);try{const Jt={...i,multi_events:o,athlete_packages:u,add_ons:d,custom_notes:m};if(t&&_){const tr={org_name:i.org_name,promoter_name:i.promoter_name,promoter_email:i.promoter_email,promoter_phone:i.promoter_phone,contract_data:Jt,updated_at:new Date().toISOString()};mt&&q&&(tr.ffm_signature=nO(U),tr.ffm_signed_at=new Date().toISOString()),await FV(e,tr),alert("Contract updated successfully!"),we(`/portal/contracts/${e}`)}else{const tr=nO(U),lr=await MV({status:"sent",org_name:i.org_name,promoter_name:i.promoter_name,promoter_email:i.promoter_email,promoter_phone:i.promoter_phone,contract_data:Jt,ffm_signature:tr,ffm_signed_at:new Date().toISOString()});localStorage.removeItem("contractBuilderData"),alert("Contract created successfully! You can now share it with the client."),we(`/portal/contracts/${lr.id}`)}}catch(Jt){console.error("Error saving contract:",Jt),alert("Failed to save contract: "+Jt.message)}finally{y(!1)}},Ct=async()=>{w(!0);try{const Xe={...i,multi_events:o,athlete_packages:u,add_ons:d,custom_notes:m};if(t&&_)await FV(e,{status:_.status==="draft"?"draft":_.status,org_name:i.org_name||"Untitled Draft",promoter_name:i.promoter_name,promoter_email:i.promoter_email,promoter_phone:i.promoter_phone,contract_data:Xe}),xe(new Date),alert("Draft saved!");else{const mt=await MV({status:"draft",org_name:i.org_name||"Untitled Draft",promoter_name:i.promoter_name,promoter_email:i.promoter_email,promoter_phone:i.promoter_phone,contract_data:Xe});localStorage.removeItem("contractBuilderData"),we(`/portal/contracts/${mt.id}/edit`,{replace:!0}),E(mt),xe(new Date),alert("Draft saved! You can continue editing or come back later.")}}catch(Xe){console.error("Error saving draft:",Xe),alert("Failed to save draft: "+Xe.message)}finally{w(!1)}},ke={contract_data:{...i,multi_events:o,athlete_packages:u,add_ons:d,custom_notes:m},ffm_signature:null,client_signature:null};return N?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{className:"text-white text-xl",children:"Loading contract..."})}):s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-8",children:[s.jsxs("div",{children:[s.jsxs("button",{onClick:()=>we(t?`/portal/contracts/${e}`:"/portal/contracts"),className:"text-gray-400 hover:text-white mb-2 inline-flex items-center gap-2",children:[" ",t?"Back to Contract":"Back to Dashboard"]}),s.jsx("h1",{className:"text-3xl font-bold text-white",children:t?`Edit Contract: ${i.org_name||"Untitled"}`:"Create New Contract"})]}),s.jsxs("button",{onClick:()=>D(!I),className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg transition-colors",children:[I?"Hide":"Show"," Preview"]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"bg-dark-900 rounded-lg p-6 mb-6 border border-gray-800",children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:Array.from({length:hx},(Xe,mt)=>mt+1).map(Xe=>s.jsx("button",{onClick:()=>jt(Xe),className:`flex-1 text-center py-2 px-3 rounded-lg font-medium transition-colors ${Xe===r?"bg-blue-600 text-white":Xe<r?"bg-green-600 text-white":"bg-gray-800 text-gray-400"} ${Xe<hx?"mr-2":""}`,children:Xe},Xe))}),s.jsxs("div",{className:"text-center text-gray-400 text-sm",children:["Step ",r," of ",hx]})]}),s.jsxs("form",{onSubmit:rt,noValidate:!0,className:"bg-dark-900 rounded-lg p-6 border border-gray-800",children:[r===1&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Step 1: Party Details"}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Agreement Date ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"date",name:"agreement_date",value:i.agreement_date,onChange:ne,required:!0,className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"FFM ABN"}),s.jsx("input",{type:"text",name:"ffm_abn",value:i.ffm_abn,onChange:ne,placeholder:"Enter ABN if available",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Organization Name ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",name:"org_name",value:i.org_name,onChange:ne,required:!0,placeholder:"e.g., Queensland Grappling Association",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Promoter Name ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",name:"promoter_name",value:i.promoter_name,onChange:ne,required:!0,placeholder:"Full name of the promoter",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Promoter Position ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",name:"promoter_position",value:i.promoter_position,onChange:ne,required:!0,placeholder:"e.g., Event Director, CEO",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Promoter Email ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"email",name:"promoter_email",value:i.promoter_email,onChange:ne,required:!0,placeholder:"email@example.com",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Promoter Phone ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"tel",name:"promoter_phone",value:i.promoter_phone,onChange:ne,required:!0,placeholder:"+61 4XX XXX XXX",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{className:"pt-4 border-t border-gray-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-300 mb-4",children:"Social & Web (Optional)"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Instagram"}),s.jsx("input",{type:"text",name:"org_instagram",value:i.org_instagram,onChange:ne,placeholder:"@yourorg",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Facebook"}),s.jsx("input",{type:"text",name:"org_facebook",value:i.org_facebook,onChange:ne,placeholder:"facebook.com/yourorg",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Website"}),s.jsx("input",{type:"text",name:"org_website",value:i.org_website,onChange:ne,placeholder:"https://yourorg.com",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]})]}),r===2&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Step 2: Event Details"}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Event Name ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",name:"event_name",value:i.event_name,onChange:ne,required:!0,placeholder:"e.g., Queensland Open 2024",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Event Date ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"date",name:"event_date",value:i.event_date,onChange:ne,required:!0,className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Event Location ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",name:"event_location",value:i.event_location,onChange:ne,required:!0,placeholder:"Venue name and address",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Event Type"}),s.jsx("input",{type:"text",name:"event_type",value:i.event_type,onChange:ne,placeholder:"e.g., BJJ / Grappling Competition",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Estimated Matches ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"number",name:"estimated_matches",value:i.estimated_matches,onChange:ne,required:!0,placeholder:"e.g., 200",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Expected Athlete Participants ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"number",name:"expected_athletes",value:i.expected_athletes,onChange:ne,required:!0,placeholder:"e.g., 400",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Expected Audience ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"number",name:"expected_audience",value:i.expected_audience,onChange:ne,required:!0,placeholder:"e.g., 300",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Multi-Event Count"}),s.jsx("input",{type:"number",name:"multi_event_count",value:i.multi_event_count,onChange:ne,placeholder:"e.g., 1",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Multi-Event Duration"}),s.jsx("input",{type:"text",name:"multi_event_duration",value:i.multi_event_duration,onChange:ne,placeholder:"e.g., 12 months",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Event Schedule (Optional)"}),s.jsx("button",{type:"button",onClick:ae,className:"px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white rounded text-sm transition-colors",children:"+ Add Event"})]}),o.map((Xe,mt)=>s.jsx("div",{className:"bg-dark-800 p-4 rounded-lg mb-2",children:s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsxs("span",{className:"text-gray-400 text-sm font-medium w-6",children:["#",mt+1]}),s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("button",{type:"button",onClick:()=>Ce(mt,-1),disabled:mt===0,className:`px-2 py-0.5 rounded text-xs ${mt===0?"text-gray-600 cursor-not-allowed":"text-gray-400 hover:text-white hover:bg-dark-600"}`,title:"Move up",children:""}),s.jsx("button",{type:"button",onClick:()=>Ce(mt,1),disabled:mt===o.length-1,className:`px-2 py-0.5 rounded text-xs ${mt===o.length-1?"text-gray-600 cursor-not-allowed":"text-gray-400 hover:text-white hover:bg-dark-600"}`,title:"Move down",children:""})]}),s.jsxs("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-3 gap-2",children:[s.jsx("input",{type:"text",value:Xe.name,onChange:Jt=>Ie(mt,"name",Jt.target.value),placeholder:"Event Name",className:"px-3 py-2 bg-dark-700 border border-gray-600 rounded text-white focus:outline-none focus:ring-2 focus:ring-blue-500"}),s.jsx("input",{type:"date",value:Xe.date,onChange:Jt=>Ie(mt,"date",Jt.target.value),className:"px-3 py-2 bg-dark-700 border border-gray-600 rounded text-white focus:outline-none focus:ring-2 focus:ring-blue-500"}),s.jsx("input",{type:"text",value:Xe.venue,onChange:Jt=>Ie(mt,"venue",Jt.target.value),placeholder:"Venue",className:"px-3 py-2 bg-dark-700 border border-gray-600 rounded text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsx("button",{type:"button",onClick:()=>oe(mt),className:"text-red-500 hover:text-red-400 text-sm px-2",title:"Remove event",children:""})]})},mt))]})]}),r===3&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Step 3: Coverage & Deliverables"}),s.jsx("p",{className:"text-sm text-gray-400 mb-4",children:' All fields support ranges. Leave "Max" empty for a single value, or enter a max to specify a range (e.g., "2-3").'}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Camera Angles"}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("input",{type:"number",name:"camera_angles",value:i.camera_angles,onChange:ne,placeholder:"Min",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"}),s.jsx("span",{className:"text-xs text-gray-500 mt-1 block",children:"Min"})]}),s.jsxs("div",{children:[s.jsx("input",{type:"number",name:"camera_angles_max",value:i.camera_angles_max,onChange:ne,placeholder:"Max (optional)",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"}),s.jsx("span",{className:"text-xs text-gray-500 mt-1 block",children:"Max (optional)"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"On-Site Crew Size"}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("input",{type:"number",name:"crew_size",value:i.crew_size,onChange:ne,placeholder:"Min",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"}),s.jsx("span",{className:"text-xs text-gray-500 mt-1 block",children:"Min"})]}),s.jsxs("div",{children:[s.jsx("input",{type:"number",name:"crew_size_max",value:i.crew_size_max,onChange:ne,placeholder:"Max (optional)",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"}),s.jsx("span",{className:"text-xs text-gray-500 mt-1 block",children:"Max (optional)"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Highlight Reel Delivery (Days)"}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("input",{type:"number",name:"highlight_delivery_days",value:i.highlight_delivery_days,onChange:ne,placeholder:"Min",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"}),s.jsx("span",{className:"text-xs text-gray-500 mt-1 block",children:"Min"})]}),s.jsxs("div",{children:[s.jsx("input",{type:"number",name:"highlight_delivery_days_max",value:i.highlight_delivery_days_max,onChange:ne,placeholder:"Max (optional)",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"}),s.jsx("span",{className:"text-xs text-gray-500 mt-1 block",children:"Max (optional)"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Social Media Clips Count"}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("input",{type:"number",name:"social_clips_count",value:i.social_clips_count,onChange:ne,placeholder:"Min",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"}),s.jsx("span",{className:"text-xs text-gray-500 mt-1 block",children:"Min"})]}),s.jsxs("div",{children:[s.jsx("input",{type:"number",name:"social_clips_count_max",value:i.social_clips_count_max,onChange:ne,placeholder:"Max (optional)",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"}),s.jsx("span",{className:"text-xs text-gray-500 mt-1 block",children:"Max (optional)"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Social Clips Delivery (Days)"}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("input",{type:"number",name:"social_clips_delivery_days",value:i.social_clips_delivery_days,onChange:ne,placeholder:"Min",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"}),s.jsx("span",{className:"text-xs text-gray-500 mt-1 block",children:"Min"})]}),s.jsxs("div",{children:[s.jsx("input",{type:"number",name:"social_clips_delivery_days_max",value:i.social_clips_delivery_days_max,onChange:ne,placeholder:"Max (optional)",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"}),s.jsx("span",{className:"text-xs text-gray-500 mt-1 block",children:"Max (optional)"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Photography"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[s.jsx("input",{type:"radio",name:"photography_type",value:"none",checked:i.photography_type==="none",onChange:ne,className:"w-4 h-4 text-blue-600 bg-dark-800 border-gray-700 focus:ring-2 focus:ring-blue-500"}),s.jsx("span",{className:"text-gray-300",children:"No photography included"})]}),s.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[s.jsx("input",{type:"radio",name:"photography_type",value:"base",checked:i.photography_type==="base",onChange:ne,className:"w-4 h-4 text-blue-600 bg-dark-800 border-gray-700 focus:ring-2 focus:ring-blue-500"}),s.jsx("span",{className:"text-gray-300",children:"Base event photography"})]}),s.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[s.jsx("input",{type:"radio",name:"photography_type",value:"professional",checked:i.photography_type==="professional",onChange:ne,className:"w-4 h-4 text-blue-600 bg-dark-800 border-gray-700 focus:ring-2 focus:ring-blue-500"}),s.jsx("span",{className:"text-gray-300",children:"Professional event photography"})]})]})]}),i.photography_type!=="none"&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Photo Count"}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("input",{type:"number",name:"photo_count",value:i.photo_count,onChange:ne,placeholder:"Min",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"}),s.jsx("span",{className:"text-xs text-gray-500 mt-1 block",children:"Min"})]}),s.jsxs("div",{children:[s.jsx("input",{type:"number",name:"photo_count_max",value:i.photo_count_max,onChange:ne,placeholder:"Max (optional)",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"}),s.jsx("span",{className:"text-xs text-gray-500 mt-1 block",children:"Max (optional)"})]})]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"livestream_included",name:"livestream_included",checked:i.livestream_included,onChange:ne,className:"w-4 h-4 text-blue-600 bg-dark-800 border-gray-700 rounded focus:ring-2 focus:ring-blue-500"}),s.jsx("label",{htmlFor:"livestream_included",className:"ml-2 text-sm font-medium text-gray-300",children:"Livestream Included"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"ppv_included",name:"ppv_included",checked:i.ppv_included,onChange:ne,className:"w-4 h-4 text-blue-600 bg-dark-800 border-gray-700 rounded focus:ring-2 focus:ring-blue-500"}),s.jsx("label",{htmlFor:"ppv_included",className:"ml-2 text-sm font-medium text-gray-300",children:"PPV Included"})]}),i.ppv_included&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"PPV Platform"}),s.jsx("input",{type:"text",name:"ppv_platform",value:i.ppv_platform,onChange:ne,placeholder:"e.g., Vimeo, YouTube Live",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"PPV Pricing Type"}),s.jsxs("div",{className:"flex gap-4 mb-3",children:[s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"radio",name:"ppv_price_type",value:"fixed",checked:i.ppv_price_type==="fixed",onChange:ne,className:"text-orange-500 focus:ring-orange-500"}),s.jsx("span",{className:"text-gray-300",children:"Fixed Price"})]}),s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"radio",name:"ppv_price_type",value:"range",checked:i.ppv_price_type==="range",onChange:ne,className:"text-orange-500 focus:ring-orange-500"}),s.jsx("span",{className:"text-gray-300",children:"Price Range"})]})]}),i.ppv_price_type==="fixed"?s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"PPV Price per Viewer"}),s.jsx("input",{type:"number",name:"ppv_price",value:i.ppv_price,onChange:ne,placeholder:"e.g., 25.00",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}):s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Minimum Price"}),s.jsx("input",{type:"number",name:"ppv_price",value:i.ppv_price,onChange:ne,placeholder:"e.g., 25.00",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Maximum Price"}),s.jsx("input",{type:"number",name:"ppv_price_max",value:i.ppv_price_max,onChange:ne,placeholder:"e.g., 35.00",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]})]})]}),r===4&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Step 4: Financial Terms"}),i.ppv_included&&s.jsxs(s.Fragment,{children:[s.jsx("h3",{className:"text-lg font-bold text-white mt-6",children:"PPV Revenue Split"}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"FFM PPV Share (%)"}),s.jsx("input",{type:"number",name:"ppv_ffm_split",value:i.ppv_ffm_split,onChange:ne,placeholder:"e.g., 70",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Client PPV Share (%)"}),s.jsx("input",{type:"number",name:"ppv_client_split",value:i.ppv_client_split,onChange:ne,placeholder:"e.g., 30",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"PPV Payment Within (Days)"}),s.jsx("input",{type:"number",name:"ppv_payment_days",value:i.ppv_payment_days,onChange:ne,placeholder:"e.g., 21",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-bold text-white",children:"Athlete Media Packages"}),s.jsx("button",{type:"button",onClick:be,className:"px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white rounded text-sm transition-colors",children:"+ Add Package"})]}),u.length===0&&s.jsx("p",{className:"text-gray-400 text-sm mb-4",children:'No packages added. Click "+ Add Package" to create athlete media packages.'}),u.map((Xe,mt)=>s.jsxs("div",{className:"bg-dark-800 p-4 rounded-lg mb-4 border border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("span",{className:"text-sm font-medium text-gray-400",children:["Package ",mt+1]}),s.jsx("button",{type:"button",onClick:()=>ue(mt),className:"text-red-500 hover:text-red-400 text-sm",children:"Remove"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mb-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Package Name"}),s.jsx("input",{type:"text",value:Xe.name,onChange:Jt=>Pe(mt,"name",Jt.target.value),placeholder:"e.g., VIP Coverage",className:"w-full px-3 py-2 bg-dark-700 border border-gray-600 rounded text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Price ($)"}),s.jsx("input",{type:"number",value:Xe.price,onChange:Jt=>Pe(mt,"price",Jt.target.value),placeholder:"e.g., 350",className:"w-full px-3 py-2 bg-dark-700 border border-gray-600 rounded text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Description (what's included)"}),s.jsx("textarea",{value:Xe.description,onChange:Jt=>Pe(mt,"description",Jt.target.value),placeholder:"Describe what this package includes...",rows:2,className:"w-full px-3 py-2 bg-dark-700 border border-gray-600 rounded text-white focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none"})]})]},mt))]}),s.jsxs("div",{className:"mt-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-bold text-white",children:"Client Add-Ons"}),s.jsx("button",{type:"button",onClick:Re,className:"px-3 py-1 bg-green-600 hover:bg-green-700 text-white rounded text-sm transition-colors",children:"+ Add Add-On"})]}),s.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"Optional services or packages the client has opted into for this event."}),d.length===0&&s.jsx("p",{className:"text-gray-500 text-sm italic mb-4",children:'No add-ons added. Click "+ Add Add-On" to include optional services.'}),d.map((Xe,mt)=>s.jsxs("div",{className:"bg-dark-800 p-4 rounded-lg mb-4 border border-green-900",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("span",{className:"text-sm font-medium text-green-400",children:["Add-On ",mt+1]}),s.jsx("button",{type:"button",onClick:()=>He(mt),className:"text-red-500 hover:text-red-400 text-sm",children:"Remove"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mb-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Add-On Name"}),s.jsx("input",{type:"text",value:Xe.name,onChange:Jt=>Fe(mt,"name",Jt.target.value),placeholder:"e.g., Additional Camera Operator",className:"w-full px-3 py-2 bg-dark-700 border border-gray-600 rounded text-white focus:outline-none focus:ring-2 focus:ring-green-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Price ($)"}),s.jsx("input",{type:"number",value:Xe.price,onChange:Jt=>Fe(mt,"price",Jt.target.value),placeholder:"e.g., 500",className:"w-full px-3 py-2 bg-dark-700 border border-gray-600 rounded text-white focus:outline-none focus:ring-2 focus:ring-green-500"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Description"}),s.jsx("textarea",{value:Xe.description,onChange:Jt=>Fe(mt,"description",Jt.target.value),placeholder:"Describe what this add-on includes...",rows:2,className:"w-full px-3 py-2 bg-dark-700 border border-gray-600 rounded text-white focus:outline-none focus:ring-2 focus:ring-green-500 resize-none"})]})]},mt))]}),s.jsx("h3",{className:"text-lg font-bold text-white mt-6",children:"Athlete Revenue Split"}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"athlete_revenue_ffm_100",name:"athlete_revenue_ffm_100",checked:i.athlete_revenue_ffm_100,onChange:ne,className:"w-4 h-4 text-blue-600 bg-dark-800 border-gray-700 rounded focus:ring-2 focus:ring-blue-500"}),s.jsx("label",{htmlFor:"athlete_revenue_ffm_100",className:"ml-2 text-sm font-medium text-gray-300",children:"FFM Retains 100% of Athlete Media Package Sales"})]}),!i.athlete_revenue_ffm_100&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"FFM Athlete Revenue Share (%)"}),s.jsx("input",{type:"number",name:"athlete_ffm_split",value:i.athlete_ffm_split,onChange:ne,placeholder:"e.g., 80",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Client Athlete Revenue Share (%)"}),s.jsx("input",{type:"number",name:"athlete_client_split",value:i.athlete_client_split,onChange:ne,placeholder:"e.g., 20",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),r===5&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Step 5: Terms & Conditions"}),s.jsx("h3",{className:"text-lg font-bold text-white",children:"Access & Logistics"}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Setup Hours Before Event"}),s.jsx("input",{type:"number",name:"setup_hours",value:i.setup_hours,onChange:ne,placeholder:"e.g., 2",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Internet Upload Speed (Mbps)"}),s.jsx("input",{type:"text",name:"internet_speed",value:i.internet_speed,onChange:ne,placeholder:"e.g., 50",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Event Schedule Provided (Hours Before)"}),s.jsx("input",{type:"number",name:"schedule_hours_before",value:i.schedule_hours_before,onChange:ne,placeholder:"e.g., 48",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Athlete List Provided (Days Before)"}),s.jsx("input",{type:"number",name:"athlete_list_days_before",value:i.athlete_list_days_before,onChange:ne,placeholder:"e.g., 7",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsx("h3",{className:"text-lg font-bold text-white mt-6",children:"Cancellation & Term"}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Cancellation Fee"}),s.jsx("input",{type:"number",name:"cancellation_fee",value:i.cancellation_fee,onChange:ne,placeholder:"e.g., 500",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Initial Term (Months)"}),s.jsx("input",{type:"number",name:"initial_term_months",value:i.initial_term_months,onChange:ne,placeholder:"e.g., 12",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Auto-Renewal Period (Months)"}),s.jsx("input",{type:"number",name:"renewal_period_months",value:i.renewal_period_months,onChange:ne,placeholder:"e.g., 12",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Non-Renewal Notice (Days)"}),s.jsx("input",{type:"number",name:"nonrenewal_notice_days",value:i.nonrenewal_notice_days,onChange:ne,placeholder:"e.g., 60",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Termination Notice (Days)"}),s.jsx("input",{type:"number",name:"termination_notice_days",value:i.termination_notice_days,onChange:ne,placeholder:"e.g., 30",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Remedy Period (Days)"}),s.jsx("input",{type:"number",name:"remedy_period_days",value:i.remedy_period_days,onChange:ne,placeholder:"e.g., 14",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Public Liability Insurance Amount"}),s.jsx("input",{type:"number",name:"pli_amount",value:i.pli_amount,onChange:ne,placeholder:"e.g., 20000000",className:"w-full px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold text-white",children:"Custom Contract Notes"}),s.jsx("p",{className:"text-gray-400 text-sm",children:"Add event-specific details like geo-blocking, special requirements, or custom terms."})]}),s.jsx("button",{type:"button",onClick:ft,className:"px-3 py-1 bg-purple-600 hover:bg-purple-700 text-white rounded text-sm transition-colors",children:"+ Add Note"})]}),m.length===0&&s.jsx("p",{className:"text-gray-500 text-sm italic mb-4",children:'No custom notes added. Click "+ Add Note" to include event-specific details.'}),m.map((Xe,mt)=>s.jsxs("div",{className:"bg-dark-800 p-4 rounded-lg mb-4 border border-purple-900",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("span",{className:"text-sm font-medium text-purple-400",children:["Custom Note ",mt+1]}),s.jsx("button",{type:"button",onClick:()=>at(mt),className:"text-red-500 hover:text-red-400 text-sm",children:"Remove"})]}),s.jsxs("div",{className:"mb-3",children:[s.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Note Title"}),s.jsx("input",{type:"text",value:Xe.title,onChange:Jt=>De(mt,"title",Jt.target.value),placeholder:"e.g., Geo-Blocking Requirements, Special Access, etc.",className:"w-full px-3 py-2 bg-dark-700 border border-gray-600 rounded text-white focus:outline-none focus:ring-2 focus:ring-purple-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Note Content"}),s.jsx("textarea",{value:Xe.content,onChange:Jt=>De(mt,"content",Jt.target.value),placeholder:"Enter the details for this custom note...",rows:3,className:"w-full px-3 py-2 bg-dark-700 border border-gray-600 rounded text-white focus:outline-none focus:ring-2 focus:ring-purple-500 resize-none"})]})]},mt))]})]}),r===6&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("h2",{className:"text-2xl font-bold text-white mb-4",children:["Step 6: ",t?"Review & Save":"Sign Contract"]}),t&&_?.ffm_signature&&s.jsxs("div",{className:"bg-green-900/20 border border-green-600 rounded-lg p-4 mb-4",children:[s.jsx("p",{className:"text-green-200 text-sm mb-3",children:" This contract already has an FFM signature. You can update the contract details without re-signing, or provide a new signature below if needed."}),s.jsx("div",{className:"bg-white p-2 rounded inline-block",children:s.jsx("img",{src:_.ffm_signature,alt:"Existing FFM Signature",className:"max-h-24"})}),s.jsxs("p",{className:"text-green-300 text-xs mt-2",children:["Signed: ",new Date(_.ffm_signed_at).toLocaleString()]})]}),s.jsx("div",{className:"bg-yellow-900/20 border border-yellow-600 rounded-lg p-4",children:s.jsx("p",{className:"text-yellow-200 text-sm",children:t?" Review your changes. If you want to update the signature, draw a new one below and check the confirmation box.":" By signing this contract, you confirm that all information provided is accurate and you are authorized to create this agreement on behalf of Fit Focus Media."})}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:t?"New FFM Signature (optional)":"FFM Signature"}),s.jsx(tne,{onSignatureChange:Xe=>G(Xe)})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"confirmSignature",checked:q,onChange:Xe=>J(Xe.target.checked),className:"w-4 h-4 text-blue-600 bg-dark-800 border-gray-700 rounded focus:ring-2 focus:ring-blue-500"}),s.jsx("label",{htmlFor:"confirmSignature",className:"ml-2 text-sm font-medium text-gray-300",children:t?"I want to update the signature with the new one above":"I confirm this is my signature and I am authorized to sign this contract"})]})]}),s.jsxs("div",{className:"flex items-center justify-between mt-8 pt-6 border-t border-gray-700",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[r>1&&s.jsx("button",{type:"button",onClick:Ue,className:"px-6 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg transition-colors",children:" Previous"}),s.jsx("button",{type:"button",onClick:Ct,disabled:x,className:"px-4 py-2 bg-yellow-600 hover:bg-yellow-700 disabled:bg-yellow-800 text-white rounded-lg transition-colors flex items-center gap-2",children:x?s.jsx(s.Fragment,{children:" Saving..."}):s.jsx(s.Fragment,{children:" Save Draft"})}),de&&s.jsxs("span",{className:"text-xs text-gray-500",children:["Saved ",de.toLocaleTimeString()]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[r<hx&&s.jsx("button",{type:"button",onClick:et,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:"Next "}),r===hx&&s.jsx("button",{type:"submit",disabled:g,className:"px-6 py-2 bg-green-600 hover:bg-green-700 disabled:bg-green-800 text-white rounded-lg transition-colors",children:g?t?"Updating Contract...":"Creating Contract...":t?"Update Contract":"Sign & Send Contract"})]})]})]})]}),I&&s.jsx("div",{className:"lg:sticky lg:top-8 lg:h-[calc(100vh-4rem)]",children:s.jsxs("div",{className:"bg-dark-900 rounded-lg p-6 border border-gray-800 overflow-y-auto h-full",children:[s.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Live Preview"}),s.jsx("div",{className:"text-sm",dangerouslySetInnerHTML:{__html:rF(ke)}})]})})]})]})}function MRe(){const{id:t}=Kh(),[e,r]=T.useState(null),[n,i]=T.useState(!0),a=Fc();T.useEffect(()=>{o()},[t]);const o=async()=>{try{const p=await Wre(t);r(p)}catch(p){console.error("Error loading contract:",p),alert("Contract not found"),a("/portal/contracts")}finally{i(!1)}},[c,u]=T.useState(!1),l=async()=>{const p=iO(e.share_token);try{if(navigator.clipboard&&navigator.clipboard.writeText)await navigator.clipboard.writeText(p);else{const g=document.createElement("textarea");g.value=p,g.style.position="fixed",g.style.left="-9999px",document.body.appendChild(g),g.focus(),g.select(),document.execCommand("copy"),document.body.removeChild(g)}u(!0),setTimeout(()=>u(!1),3e3)}catch{alert(`Copy this link:

`+p)}},d=()=>{const{subject:p,body:g}=ORe(e.share_token,e.contract_data?.promoter_name||"there",e.org_name||"Organization"),x=`mailto:${e.contract_data?.promoter_email||""}?subject=${encodeURIComponent(p)}&body=${encodeURIComponent(g)}`;window.open(x,"_blank"),navigator.clipboard.writeText(iO(e.share_token)).catch(()=>{})},f=()=>{window.print()},m=async()=>{if(confirm("Are you sure you want to delete this contract? This cannot be undone."))try{await P3e(e.id),alert("Contract deleted successfully."),a("/portal/contracts")}catch(p){console.error("Error deleting contract:",p),alert("Failed to delete contract: "+p.message)}};return n?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{className:"text-white text-xl",children:"Loading contract..."})}):e?s.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsxs("div",{className:"mb-6 print:hidden",children:[s.jsx("button",{onClick:()=>a("/portal/contracts"),className:"text-gray-400 hover:text-white mb-2 inline-flex items-center gap-2",children:" Back to Dashboard"}),s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:e.org_name||"Untitled Contract"}),s.jsx("p",{className:"text-gray-400",children:e.promoter_name||"No promoter name"})]}),s.jsxs("span",{className:ene(e.status),children:[nF(e.status)," ",e.status]})]})]}),s.jsxs("div",{className:"flex flex-wrap gap-3 mb-6 print:hidden",children:[s.jsx("button",{onClick:l,className:`px-4 py-2 ${c?"bg-green-600":"bg-gray-700 hover:bg-gray-600"} text-white rounded-lg transition-colors`,children:c?" Copied!":" Copy Link"}),e.status!=="signed"&&s.jsx("button",{onClick:d,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:" Send to Client"}),s.jsx("button",{onClick:f,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:" Download PDF"}),e.status!=="signed"&&s.jsx("button",{onClick:()=>a(`/portal/contracts/${e.id}/edit`),className:"px-4 py-2 bg-yellow-600 hover:bg-yellow-700 text-white rounded-lg transition-colors",children:" Edit Contract"}),s.jsx("button",{onClick:m,className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors ml-auto",children:" Delete"})]}),s.jsx("div",{className:"bg-dark-900 rounded-lg p-8 border border-gray-800",dangerouslySetInnerHTML:{__html:rF(e)}})]}):null}function FRe(){const{shareToken:t}=Kh(),[e,r]=T.useState(null),[n,i]=T.useState(!0),[a,o]=T.useState(!1),[c,u]=T.useState(null);T.useEffect(()=>{l()},[t]);const l=async()=>{try{const m=await B3e(t);r(m),m.status==="sent"&&!m.viewed_at&&(await O3e(m.id),r({...m,status:"viewed",viewed_at:new Date().toISOString()}))}catch(m){console.error("Error loading contract:",m),alert("Contract not found")}finally{i(!1)}},d=async()=>{if(!c||!Jre(c)){alert("Please sign before submitting.");return}if(confirm("By signing, you agree to all terms and conditions in this agreement. This action cannot be undone.")){o(!0);try{const m=nO(c),p=await D3e(e.id,m,!0);r(p),alert("Contract signed successfully! Both parties will receive confirmation.")}catch(m){console.error("Error submitting signature:",m),alert("Failed to submit signature: "+m.message)}finally{o(!1)}}};if(n)return s.jsx("div",{className:"min-h-screen bg-dark-950 flex items-center justify-center",children:s.jsx("div",{className:"text-white text-xl",children:"Loading contract..."})});if(!e)return s.jsx("div",{className:"min-h-screen bg-dark-950 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-6xl mb-4",children:""}),s.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Contract Not Found"}),s.jsx("p",{className:"text-gray-400",children:"This contract link may be invalid or expired."})]})});const f=e.status!=="signed"&&!e.client_signature&&e.ffm_signature;return s.jsxs("div",{className:"min-h-screen bg-dark-950",children:[s.jsx("header",{className:"bg-dark-900 border-b border-gray-800 print:hidden",children:s.jsx("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-white mb-1",children:"Fit Focus Media"}),s.jsx("p",{className:"text-gray-400",children:"Event Media Coverage Agreement"})]}),s.jsxs("span",{className:ene(e.status),children:[nF(e.status)," ",e.status]})]})})}),s.jsxs("main",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsx("div",{className:"bg-dark-900 rounded-lg p-8 border border-gray-800 mb-8",dangerouslySetInnerHTML:{__html:rF(e)}}),f&&s.jsxs("div",{className:"bg-dark-900 rounded-lg p-8 border border-gray-800 print:hidden",children:[s.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Sign Agreement"}),s.jsx("div",{className:"bg-yellow-900/20 border border-yellow-600 rounded-lg p-4 mb-6",children:s.jsx("p",{className:"text-yellow-200 text-sm",children:" By signing this agreement, you acknowledge that you have read, understood, and agree to all terms and conditions outlined above. This signature is legally binding."})}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Your Signature"}),s.jsx(tne,{onSignatureChange:m=>u(m)})]}),s.jsx("button",{onClick:d,disabled:a,className:"w-full bg-green-600 hover:bg-green-700 disabled:bg-green-800 text-white font-medium py-3 px-6 rounded-lg transition-colors",children:a?"Submitting...":" Accept & Sign Contract"})]}),e.status==="signed"&&s.jsxs("div",{className:"bg-green-900/20 border border-green-600 rounded-lg p-6 text-center print:hidden",children:[s.jsx("div",{className:"text-5xl mb-3",children:""}),s.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Contract Fully Executed"}),s.jsx("p",{className:"text-gray-300",children:"This contract has been signed by both parties. Both parties will receive confirmation."})]})]})]})}async function mE(){const{data:t,error:e}=await ir.from("crm_leads").select("*").order("priority_score",{ascending:!1});return e?(console.error("Error fetching leads:",e),[]):t||[]}async function URe(t){const{data:e,error:r}=await ir.from("crm_leads").select("*").eq("id",t).single();return r?(console.error("Error fetching lead:",r),null):e}async function rne(t,e){const{data:r,error:n}=await ir.from("crm_leads").update({...e,updated_at:new Date().toISOString()}).eq("id",t).select().single();if(n)throw console.error("Error updating lead:",n),n;return r}async function cw(t){const{data:e,error:r}=await ir.from("crm_activities").select("*").eq("lead_id",t).order("created_at",{ascending:!1});return r?(console.error("Error fetching activities:",r),[]):e||[]}async function zV(t,e){const{data:r,error:n}=await ir.from("crm_activities").insert([{lead_id:t,type:e.type,notes:e.notes,created_at:new Date().toISOString()}]).select().single();if(n)throw console.error("Error adding activity:",n),n;return await ir.from("crm_leads").update({last_contact:new Date().toISOString()}).eq("id",t),r}async function $Re(t,e){const{data:r,error:n}=await ir.from("crm_activities").update({type:e.type,notes:e.notes}).eq("id",t).select().single();if(n)throw console.error("Error updating activity:",n),n;return r}async function HRe(t){const{error:e}=await ir.from("crm_activities").delete().eq("id",t);if(e)throw console.error("Error deleting activity:",e),e;return!0}const nne=[{id:"cold-outreach",name:"Cold Outreach",subject:"{{org_name}}  free event coverage?",body:`{{decision_maker || "Hey"}},

I'll keep this short.

We film {{sport}} events  multi-camera, professional grade, full match coverage for every athlete. Livestream if you want it.

Here's the thing: you pay nothing.

We make money when athletes buy their footage through our portal after the event. You get free professional coverage. Athletes get content they actually want. Everyone wins.

We just covered NBA Sydney Nationals  400 athletes across 2 days. The org paid $0.

If that sounds interesting, I'll explain how it works in 10 minutes. If not, no worries.

Brandon
0411 934 935`},{id:"follow-up-1",name:"Follow-up #1",subject:"Re: {{org_name}} coverage",body:`{{decision_maker || "Hey"}},

Following up on my last email.

I know you're busy running events, so here's the short version:

 Professional multi-camera coverage for {{org_name}}
 Athletes buy their own footage (you don't lift a finger)
 You pay nothing. Ever.

We've done this for grappling comps, bodybuilding shows, and fight nights. Happy to send examples if useful.

10 minutes to see if it fits?

Brandon
0411 934 935`},{id:"meeting-request",name:"Meeting Request",subject:"{{org_name}}  quick call?",body:`{{decision_maker || "Hey"}},

Thanks for getting back.

Here's what I'll cover (10 min max):
1. How the zero-cost model works (and why there's no catch)
2. What your athletes would actually receive
3. What we'd need from you (almost nothing)

Send me a time that works or just call me direct.

Brandon
0411 934 935`},{id:"post-meeting",name:"Post-Meeting Follow-up",subject:"{{org_name}}  next steps",body:`{{decision_maker || "Hey"}},

Good chat. Here's the recap:

WHAT YOU GET (at zero cost):
 Multi-camera coverage, every mat, every match
 Livestream/PPV if you want it
 Event highlight reel for your socials
 Full photo gallery

WHAT ATHLETES GET:
 Professional footage of their matches
 Access through our portal
 Delivered within days of the event

WHAT IT COSTS YOU:
 $0 upfront
 $0 ongoing
 We make money on athlete purchases only

NEXT STEP:
I'm sending the agreement now. Read it, flag anything, we lock in the dates.

Questions? Call me.

Brandon
0411 934 935`},{id:"breakup",name:"Breakup Email",subject:"{{org_name}}  closing the loop",body:`{{decision_maker || "Hey"}},

I've sent a few emails about covering {{org_name}} events. Haven't heard back, so I'll assume the timing's not right.

All good. If you ever want professional coverage at no cost, the offer stands.

Good luck with the season.

Brandon`}];function QRe(){return nne}function zRe(t,e){const r=nne.find(u=>u.id===t);if(!r)return null;const n={org_name:e.org_name||"",decision_maker:e.contact?.decision_maker||"",sport:e.sport||"",upcoming_event:e.events?.upcoming?.[0]||"",event_date:e.events?.upcoming?.[0]?.split(":")?.[1]?.trim()||""};let i=r.subject,a=r.body;const o=/\{\{(\w+)\s*\|\|\s*"([^"]*)"\}\}/g;i=i.replace(o,(u,l,d)=>n[l]||d),a=a.replace(o,(u,l,d)=>n[l]||d);const c=/\{\{(\w+)\}\}/g;return i=i.replace(c,(u,l)=>n[l]||""),a=a.replace(c,(u,l)=>n[l]||""),{subject:i,body:a}}async function ine(){const t=await mE(),{data:e}=await ir.from("crm_activities").select("*").order("created_at",{ascending:!1}),r=e||[],n={new:0,contacted:0,meeting:0,proposal:0,negotiating:0,signed:0,lost:0};t.forEach(g=>{const y=g.stage||"new";n.hasOwnProperty(y)&&n[y]++});const i=t.length,a=t.filter(g=>!["signed","lost","do_not_contact"].includes(g.stage)).length,o=n.signed,c=i>0?Math.round(o/i*100):0;let u=0;t.forEach(g=>{if(["proposal","negotiating","signed"].includes(g.stage)){const y=g.revenue_potential?.match(/\$(\d+)K/);y&&(u+=parseInt(y[1])*1e3)}});const l=new Date,d=new Date(l);d.setDate(l.getDate()-l.getDay()),d.setHours(0,0,0,0);const f=r.filter(g=>g.type==="Meeting"&&new Date(g.created_at)>=d).length,m=r.slice(0,10).map(g=>{const y=t.find(x=>x.id===g.lead_id);return{...g,lead_name:y?.org_name||"Unknown"}}),p={1:0,2:0,3:0};return t.forEach(g=>{p.hasOwnProperty(g.tier)&&p[g.tier]++}),{totalLeads:i,activeLeads:a,signedLeads:o,conversionRate:c,pipelineValue:u,meetingsThisWeek:f,stageCounts:n,tierCounts:p,recentActivities:m}}const sO=[{touch:1,name:"Initial Outreach",daysAfterPrevious:0,type:"initial"},{touch:2,name:"Value-Add Follow-up",daysAfterPrevious:3,type:"value"},{touch:3,name:"Social Proof",daysAfterPrevious:5,type:"proof"},{touch:4,name:"Meeting Request",daysAfterPrevious:5,type:"meeting"},{touch:5,name:"Permission to Close",daysAfterPrevious:7,type:"breakup"}];function VRe(t,e=1){if(!t)return null;const r=new Date(t),n=sO[e];if(!n)return null;let i=0;for(let o=1;o<=e;o++)i+=sO[o].daysAfterPrevious;const a=new Date(r);return a.setDate(a.getDate()+i),{touch:n.touch,name:n.name,type:n.type,dueDate:a,daysUntilDue:Math.ceil((a-new Date)/(1e3*60*60*24))}}function KRe(t){let e=1;(t.stage==="contacted"||t.stage==="meeting"||t.stage==="proposal")&&(e=1);const r=VRe(t.last_contact,e);if(!r)return{status:"complete",...t};const{daysUntilDue:n}=r;let i="upcoming";return n<0?i="overdue":n===0?i="today":n<=2&&(i="soon"),{...t,nextTouch:r,status:i,daysUntilDue:n}}function GRe(){const[t,e]=T.useState([]),[r,n]=T.useState(!0),[i,a]=T.useState("all");T.useEffect(()=>{o()},[]);const o=async()=>{n(!0);try{const p=(await mE()).filter(g=>["new","contacted","meeting"].includes(g.stage)&&g.last_contact);e(p.map(KRe))}catch(m){console.error("Error loading leads:",m)}finally{n(!1)}},u=i==="all"?t:t.filter(m=>m.status===i),l=t.filter(m=>m.status==="overdue").length,d=t.filter(m=>m.status==="today").length,f=t.filter(m=>m.status==="soon").length;return r?s.jsx("div",{className:"text-gray-400",children:"Loading follow-ups..."}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-white",children:"Follow-Up Scheduler"}),s.jsx("p",{className:"text-gray-400 text-xs sm:text-sm mt-1",children:"5-Touch outreach strategy tracker"})]}),s.jsxs("div",{className:"flex gap-4 sm:gap-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xl sm:text-2xl font-bold text-red-500",children:l}),s.jsx("div",{className:"text-xs text-gray-400",children:"Overdue"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xl sm:text-2xl font-bold text-yellow-500",children:d}),s.jsx("div",{className:"text-xs text-gray-400",children:"Today"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xl sm:text-2xl font-bold text-blue-500",children:f}),s.jsx("div",{className:"text-xs text-gray-400",children:"Soon"})]})]})]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:["all","overdue","today","soon","upcoming"].map(m=>s.jsx("button",{onClick:()=>a(m),className:`px-3 sm:px-4 py-2 rounded-lg text-xs sm:text-sm font-medium transition-all ${i===m?"bg-red-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:m.charAt(0).toUpperCase()+m.slice(1)},m))}),u.length===0?s.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 sm:p-8 text-center text-gray-400",children:[s.jsx(r2,{className:"w-10 h-10 sm:w-12 sm:h-12 mx-auto mb-2 sm:mb-3 text-green-500"}),s.jsxs("p",{className:"text-sm sm:text-base",children:["No follow-ups ",i!=="all"?i:"needed","!"]})]}):s.jsx("div",{className:"space-y-3",children:u.map(m=>s.jsx("div",{className:`bg-gray-800 rounded-lg p-3 sm:p-4 border-l-4 ${m.status==="overdue"?"border-red-500":m.status==="today"?"border-yellow-500":m.status==="soon"?"border-blue-500":"border-gray-600"}`,children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mb-2 flex-wrap",children:[s.jsx("h3",{className:"text-base sm:text-lg font-bold text-white truncate",children:m.org_name}),s.jsxs("span",{className:`px-2 py-0.5 sm:py-1 rounded text-xs font-medium flex-shrink-0 ${m.tier===1?"bg-red-900 text-red-200":m.tier===2?"bg-yellow-900 text-yellow-200":"bg-blue-900 text-blue-200"}`,children:["Tier ",m.tier]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-4 text-xs sm:text-sm text-gray-400",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(tu,{className:"w-3 h-3 sm:w-4 sm:h-4 flex-shrink-0"}),s.jsxs("span",{className:"truncate",children:["Touch ",m.nextTouch.touch,": ",m.nextTouch.name]})]}),s.jsxs("div",{className:"flex items-center gap-4 sm:gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ml,{className:"w-3 h-3 sm:w-4 sm:h-4 flex-shrink-0"}),s.jsxs("span",{children:["Due: ",m.nextTouch.dueDate.toLocaleDateString()]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(zh,{className:"w-3 h-3 sm:w-4 sm:h-4 flex-shrink-0"}),s.jsx("span",{className:m.status==="overdue"?"text-red-400 font-medium":m.status==="today"?"text-yellow-400 font-medium":"text-gray-400",children:m.daysUntilDue===0?"Today":m.daysUntilDue<0?`${Math.abs(m.daysUntilDue)} days overdue`:`In ${m.daysUntilDue} days`})]})]})]})]}),s.jsxs("div",{className:"flex items-center gap-2 self-end sm:self-auto",children:[m.status==="overdue"&&s.jsx($0,{className:"w-5 h-5 text-red-500 hidden sm:block"}),s.jsx("button",{className:"bg-red-600 hover:bg-red-700 text-white px-3 sm:px-4 py-2 rounded-lg text-xs sm:text-sm font-medium transition-all whitespace-nowrap",children:"Send Follow-Up"})]})]})},m.id))}),s.jsxs("details",{className:"bg-gray-800 rounded-lg",children:[s.jsxs("summary",{className:"p-3 sm:p-4 text-xs sm:text-sm font-bold text-white cursor-pointer list-none flex items-center justify-between",children:["5-Touch Strategy Timeline",s.jsx("span",{className:"text-gray-500 text-xs",children:"tap to expand"})]}),s.jsxs("div",{className:"px-3 sm:px-4 pb-3 sm:pb-4 space-y-2 text-xs sm:text-sm",children:[sO.map((m,p)=>s.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 text-gray-400",children:[s.jsxs("span",{className:"font-mono text-[10px] sm:text-xs bg-gray-700 px-1.5 sm:px-2 py-0.5 sm:py-1 rounded",children:["T",m.touch]}),s.jsx("span",{className:"flex-1 text-xs sm:text-sm",children:m.name}),s.jsx("span",{className:"text-[10px] sm:text-xs",children:p===0?"Initial":`+${m.daysAfterPrevious} days`})]},m.touch)),s.jsx("div",{className:"mt-3 pt-3 border-t border-gray-700 text-[10px] sm:text-xs text-gray-500",children:" Research shows 80% of sales happen between Touch 5-12. Don't give up early!"})]})]})]})}const cI=["#ef4444","#f59e0b","#3b82f6"],fx={new:"#6b7280",contacted:"#3b82f6",meeting:"#8b5cf6",proposal:"#eab308",negotiating:"#f97316",signed:"#10b981"};function WRe(){const t=Fc(),[e,r]=T.useState(null),[n,i]=T.useState([]),[a,o]=T.useState(!0),[c,u]=T.useState(""),[l,d]=T.useState(""),[f,m]=T.useState("");T.useEffect(()=>{p()},[]);const p=async()=>{o(!0);try{const[w,_]=await Promise.all([ine(),mE()]);r(w),i(_)}catch(w){console.error("Error loading CRM data:",w)}finally{o(!1)}},g=()=>{let w=n;return c&&(w=w.filter(_=>_.tier===parseInt(c))),l&&(w=w.filter(_=>_.sport?.toLowerCase().includes(l.toLowerCase()))),f&&(w=w.filter(_=>_.stage===f)),w};if(a)return s.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:s.jsx("div",{className:"text-gray-400 text-lg",children:"Loading CRM data..."})});const y=[{name:"New",value:e.stageCounts.new,color:fx.new},{name:"Contacted",value:e.stageCounts.contacted,color:fx.contacted},{name:"Meeting",value:e.stageCounts.meeting,color:fx.meeting},{name:"Proposal",value:e.stageCounts.proposal,color:fx.proposal},{name:"Negotiating",value:e.stageCounts.negotiating,color:fx.negotiating},{name:"Signed",value:e.stageCounts.signed,color:fx.signed}],x=[{name:"Tier 1",value:e.tierCounts[1]||0,color:cI[0]},{name:"Tier 2",value:e.tierCounts[2]||0,color:cI[1]},{name:"Tier 3",value:e.tierCounts[3]||0,color:cI[2]}].filter(w=>w.value>0);return s.jsxs("div",{className:"max-w-7xl mx-auto px-3 sm:px-6 lg:px-8 py-4 sm:py-8",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 sm:gap-4 mb-6 sm:mb-8",children:[s.jsxs("h1",{className:"text-2xl sm:text-3xl font-black text-white tracking-tight",children:[s.jsx("span",{className:"text-red-500",children:"CRM"})," DASHBOARD"]}),s.jsxs("div",{className:"flex gap-2 sm:gap-3 w-full sm:w-auto",children:[s.jsxs("button",{onClick:p,className:"bg-gray-700 hover:bg-gray-600 text-white px-3 sm:px-4 py-2 rounded-lg font-medium transition-all flex items-center justify-center gap-2 text-xs sm:text-sm flex-1 sm:flex-none",children:[s.jsx(Q0,{size:16,className:"sm:w-[18px] sm:h-[18px]"}),"Refresh"]}),s.jsx("button",{onClick:()=>t("/portal/pipeline/board"),className:"bg-red-600 hover:bg-red-700 text-white px-4 sm:px-6 py-2 rounded-lg font-bold transition-all hover:scale-105 text-xs sm:text-sm flex-1 sm:flex-none whitespace-nowrap",children:"View Pipeline Board"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 sm:gap-4 mb-6 sm:mb-8",children:[s.jsxs("div",{className:"bg-[#1a1a2e] rounded-xl p-3 sm:p-5 border border-gray-800/50",children:[s.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mb-2 sm:mb-3",children:[s.jsx(nh,{size:16,className:"text-gray-500 sm:w-5 sm:h-5"}),s.jsx("div",{className:"text-[9px] sm:text-[11px] font-bold text-gray-500 tracking-wider sm:tracking-widest uppercase",children:"Total Leads"})]}),s.jsx("div",{className:"text-2xl sm:text-3xl font-black text-white",children:e.totalLeads})]}),s.jsxs("div",{className:"bg-[#1a1a2e] rounded-xl p-3 sm:p-5 border border-gray-800/50",children:[s.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mb-2 sm:mb-3",children:[s.jsx(Tf,{size:16,className:"text-pink-500 sm:w-5 sm:h-5"}),s.jsx("div",{className:"text-[9px] sm:text-[11px] font-bold text-gray-500 tracking-wider sm:tracking-widest uppercase",children:"Conversion"})]}),s.jsxs("div",{className:"text-2xl sm:text-3xl font-black text-pink-500",children:[e.conversionRate,"%"]})]}),s.jsxs("div",{className:"bg-[#1a1a2e] rounded-xl p-3 sm:p-5 border border-gray-800/50",children:[s.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mb-2 sm:mb-3",children:[s.jsx(zh,{size:16,className:"text-purple-500 sm:w-5 sm:h-5"}),s.jsx("div",{className:"text-[9px] sm:text-[11px] font-bold text-gray-500 tracking-wider sm:tracking-widest uppercase",children:"Meetings"})]}),s.jsx("div",{className:"text-2xl sm:text-3xl font-black text-purple-500",children:e.meetingsThisWeek})]}),s.jsxs("div",{className:"bg-[#1a1a2e] rounded-xl p-3 sm:p-5 border border-gray-800/50",children:[s.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mb-2 sm:mb-3",children:[s.jsx(Gh,{size:16,className:"text-red-400 sm:w-5 sm:h-5"}),s.jsx("div",{className:"text-[9px] sm:text-[11px] font-bold text-gray-500 tracking-wider sm:tracking-widest uppercase",children:"Pipeline"})]}),s.jsxs("div",{className:"text-2xl sm:text-3xl font-black text-red-400",children:["$",(e.pipelineValue/1e3).toFixed(0),"K"]})]})]}),s.jsx("div",{className:"mb-6 sm:mb-8",children:s.jsx(GRe,{})}),s.jsxs("div",{className:"hidden sm:grid md:grid-cols-3 gap-4 sm:gap-6 mb-6 sm:mb-8",children:[s.jsxs("div",{className:"md:col-span-2 bg-[#1a1a2e] rounded-xl p-4 sm:p-6 border border-gray-800/50",children:[s.jsx("h3",{className:"text-base sm:text-lg font-bold text-white mb-3 sm:mb-4",children:"Pipeline Funnel"}),s.jsx(sC,{width:"100%",height:200,children:s.jsxs(kre,{data:y,layout:"vertical",children:[s.jsx(VM,{type:"number",stroke:"#6b7280"}),s.jsx(KM,{dataKey:"name",type:"category",stroke:"#6b7280",width:80,tick:{fontSize:12}}),s.jsx(cb,{dataKey:"value",radius:[0,8,8,0],children:y.map((w,_)=>s.jsx(e1,{fill:w.color},`cell-${_}`))})]})})]}),s.jsxs("div",{className:"bg-[#1a1a2e] rounded-xl p-4 sm:p-6 border border-gray-800/50",children:[s.jsx("h3",{className:"text-base sm:text-lg font-bold text-white mb-3 sm:mb-4",children:"Leads by Tier"}),s.jsx(sC,{width:"100%",height:200,children:s.jsx(DBe,{children:s.jsx(Yte,{data:x,cx:"50%",cy:"50%",innerRadius:50,outerRadius:75,dataKey:"value",label:w=>`${w.name}: ${w.value}`,children:x.map((w,_)=>s.jsx(e1,{fill:w.color},`cell-${_}`))})})})]})]}),s.jsxs("div",{className:"bg-[#1a1a2e] rounded-xl p-4 sm:p-6 border border-gray-800/50 mb-4 sm:mb-6",children:[s.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mb-3 sm:mb-4",children:[s.jsx(hR,{size:16,className:"text-gray-500 sm:w-5 sm:h-5"}),s.jsx("h3",{className:"text-base sm:text-lg font-bold text-white",children:"Quick Filters"})]}),s.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2 sm:gap-4",children:[s.jsxs("select",{value:c,onChange:w=>u(w.target.value),className:"px-3 sm:px-4 py-2 sm:py-3 bg-[#12122a] border border-gray-800/50 rounded-lg sm:rounded-xl text-gray-300 text-sm focus:outline-none focus:ring-2 focus:ring-red-500/40",children:[s.jsx("option",{value:"",children:"All Tiers"}),s.jsx("option",{value:"1",children:"Tier 1"}),s.jsx("option",{value:"2",children:"Tier 2"}),s.jsx("option",{value:"3",children:"Tier 3"})]}),s.jsxs("select",{value:f,onChange:w=>m(w.target.value),className:"px-3 sm:px-4 py-2 sm:py-3 bg-[#12122a] border border-gray-800/50 rounded-lg sm:rounded-xl text-gray-300 text-sm focus:outline-none focus:ring-2 focus:ring-red-500/40",children:[s.jsx("option",{value:"",children:"All Statuses"}),s.jsx("option",{value:"new",children:"New"}),s.jsx("option",{value:"contacted",children:"Contacted"}),s.jsx("option",{value:"meeting",children:"Meeting Booked"}),s.jsx("option",{value:"proposal",children:"Proposal Sent"}),s.jsx("option",{value:"negotiating",children:"Negotiating"}),s.jsx("option",{value:"signed",children:"Signed"}),s.jsx("option",{value:"lost",children:"Lost"})]}),s.jsx("input",{type:"text",value:l,onChange:w=>d(w.target.value),placeholder:"Filter by sport...",className:"col-span-2 sm:col-span-1 px-3 sm:px-4 py-2 sm:py-3 bg-[#12122a] border border-gray-800/50 rounded-lg sm:rounded-xl text-white placeholder-gray-600 text-sm focus:outline-none focus:ring-2 focus:ring-red-500/40"})]}),(c||l||f)&&s.jsx("div",{className:"mt-3 sm:mt-4",children:s.jsxs("div",{className:"text-xs sm:text-sm text-gray-400",children:["Showing ",g().length," of ",e.totalLeads," leads"]})})]}),s.jsxs("div",{className:"bg-[#1a1a2e] rounded-xl p-4 sm:p-6 border border-gray-800/50 mb-4 sm:mb-6",children:[s.jsx("h3",{className:"text-base sm:text-lg font-bold text-white mb-3 sm:mb-4",children:"Recent Activity"}),e.recentActivities.length===0?s.jsx("div",{className:"text-gray-500 text-center py-6 sm:py-8 text-sm",children:"No recent activity"}):s.jsx("div",{className:"space-y-2 sm:space-y-3",children:e.recentActivities.map(w=>s.jsxs("div",{className:"flex items-start gap-3 sm:gap-4 p-3 sm:p-4 bg-[#12122a] rounded-lg border border-gray-800/50 hover:border-gray-700 transition-all",children:[s.jsx("div",{className:"flex-shrink-0 w-8 h-8 sm:w-10 sm:h-10 bg-red-600/20 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-red-400 text-base sm:text-xl",children:w.type==="Phone Call"?"":w.type==="Email"?"":w.type==="Meeting"?"":""})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[s.jsx("span",{className:"font-bold text-white text-sm sm:text-base",children:w.lead_name}),s.jsx("span",{className:"text-gray-600",children:""}),s.jsx("span",{className:"text-[10px] sm:text-xs font-bold text-gray-500 uppercase",children:w.type})]}),s.jsx("p",{className:"text-xs sm:text-sm text-gray-400 mb-1 line-clamp-2",children:w.notes}),s.jsx("div",{className:"text-[10px] sm:text-xs text-gray-600",children:new Date(w.created_at).toLocaleDateString("en-AU",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})})]})]},w.id))})]}),s.jsxs("div",{className:"bg-[#1a1a2e] rounded-xl p-4 sm:p-6 border border-gray-800/50",children:[s.jsx("h3",{className:"text-base sm:text-lg font-bold text-white mb-3 sm:mb-4",children:"Follow-up Reminders"}),s.jsxs("div",{className:"text-gray-500 text-center py-6 sm:py-8 text-sm",children:["No pending follow-ups",s.jsx("div",{className:"text-xs sm:text-sm mt-2",children:"Add activities with due dates to see reminders here"})]})]})]})}const YRe=[{id:"new",name:"New",color:"bg-gray-600",textColor:"text-gray-300"},{id:"contacted",name:"Contacted",color:"bg-blue-600",textColor:"text-blue-400"},{id:"meeting",name:"Meeting Booked",color:"bg-purple-600",textColor:"text-purple-400"},{id:"proposal",name:"Proposal Sent",color:"bg-yellow-600",textColor:"text-yellow-400"},{id:"negotiating",name:"Negotiating",color:"bg-orange-600",textColor:"text-orange-400"},{id:"signed",name:"Signed",color:"bg-green-600",textColor:"text-green-400"},{id:"lost",name:"Lost",color:"bg-red-600",textColor:"text-red-400"}];function qRe({lead:t,onDragStart:e}){const r=Fc(),n=i=>i>=80?"bg-red-600 text-red-100":i>=60?"bg-orange-600 text-orange-100":"bg-gray-600 text-gray-100";return s.jsxs("div",{draggable:!0,onDragStart:e,onClick:()=>r(`/portal/pipeline/leads/${t.id}`),className:"bg-[#12122a] rounded-lg p-4 border border-gray-800/50 hover:border-gray-700 cursor-move hover:bg-[#16162e] transition-all group",children:[s.jsx("h4",{className:"font-bold text-white group-hover:text-red-400 transition-colors mb-2 line-clamp-2",children:t.org_name}),s.jsxs("div",{className:"space-y-1.5 mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400",children:[s.jsx($Y,{size:14}),s.jsx("span",{className:"truncate",children:t.sport})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400",children:[s.jsx(md,{size:14}),s.jsx("span",{className:"truncate",children:t.location})]})]}),s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("span",{className:`px-2 py-1 rounded text-xs font-bold ${n(t.priority_score)}`,children:["Priority: ",t.priority_score]}),s.jsxs("span",{className:"text-xs font-bold text-gray-600 uppercase",children:["Tier ",t.tier]})]}),s.jsxs("div",{className:"pt-3 border-t border-gray-800/50 space-y-1",children:[s.jsxs("div",{className:"text-xs text-gray-600",children:[s.jsx("span",{className:"font-bold",children:"Last Contact:"})," ",t.last_contact?new Date(t.last_contact).toLocaleDateString("en-AU"):"Never"]}),t.revenue_potential&&s.jsx("div",{className:"text-xs text-green-400 font-medium",children:t.revenue_potential})]})]})}function XRe({column:t,leads:e,onDrop:r,onDragOver:n}){return s.jsxs("div",{onDrop:r,onDragOver:n,className:"flex flex-col min-h-[500px]",children:[s.jsx("div",{className:`${t.color} rounded-t-xl px-4 py-3 mb-3`,children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"font-bold text-white text-sm uppercase tracking-wider",children:t.name}),s.jsx("span",{className:"bg-white/20 px-2 py-0.5 rounded-full text-xs font-bold text-white",children:e.length})]})}),s.jsx("div",{className:"flex-1 space-y-3 px-2",children:e.length===0?s.jsx("div",{className:"text-center text-gray-600 text-sm py-8",children:"No leads"}):e.map(i=>s.jsx(qRe,{lead:i,onDragStart:a=>{a.dataTransfer.effectAllowed="move",a.dataTransfer.setData("leadId",i.id)}},i.id))})]})}function ZRe(){const t=Fc(),[e,r]=T.useState([]),[n,i]=T.useState({totalLeads:0,activeLeads:0,meetingsThisWeek:0,pipelineValue:0}),[a,o]=T.useState(!0);T.useEffect(()=>{c()},[]);const c=async()=>{o(!0);try{const[f,m]=await Promise.all([mE(),ine()]);r(f),i({totalLeads:m.totalLeads,activeLeads:m.activeLeads,meetingsThisWeek:m.meetingsThisWeek,pipelineValue:m.pipelineValue})}catch(f){console.error("Error loading pipeline data:",f)}finally{o(!1)}},u=async(f,m)=>{f.preventDefault();const p=f.dataTransfer.getData("leadId");if(p)try{await rne(p,{stage:m}),await c()}catch(g){console.error("Error updating lead:",g)}},l=f=>{f.preventDefault()},d=f=>e.filter(m=>m.stage===f);return a?s.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:s.jsx("div",{className:"text-gray-400 text-lg",children:"Loading pipeline..."})}):s.jsxs("div",{className:"min-h-screen bg-[#0d0d1a] pb-8",children:[s.jsx("div",{className:"bg-[#1a1a2e] border-b border-gray-800/50 mb-6",children:s.jsxs("div",{className:"max-w-[1600px] mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:()=>t("/portal/pipeline"),className:"text-gray-400 hover:text-white transition-colors",children:s.jsx(tp,{size:24})}),s.jsxs("h1",{className:"text-3xl font-black text-white tracking-tight",children:[s.jsx("span",{className:"text-red-500",children:"PIPELINE"})," BOARD"]})]}),s.jsxs("button",{onClick:c,className:"bg-gray-700 hover:bg-gray-600 text-white px-4 py-2 rounded-lg font-medium transition-all flex items-center gap-2 text-sm",children:[s.jsx(Q0,{size:18}),"Refresh"]})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"bg-[#12122a] rounded-xl p-4 border border-gray-800/50",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(nh,{size:18,className:"text-gray-500"}),s.jsx("div",{className:"text-[10px] font-bold text-gray-500 tracking-widest uppercase",children:"Total Leads"})]}),s.jsx("div",{className:"text-2xl font-black text-white",children:n.totalLeads})]}),s.jsxs("div",{className:"bg-[#12122a] rounded-xl p-4 border border-gray-800/50",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(Tf,{size:18,className:"text-pink-500"}),s.jsx("div",{className:"text-[10px] font-bold text-gray-500 tracking-widest uppercase",children:"Active Pipeline"})]}),s.jsx("div",{className:"text-2xl font-black text-pink-500",children:n.activeLeads})]}),s.jsxs("div",{className:"bg-[#12122a] rounded-xl p-4 border border-gray-800/50",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(ml,{size:18,className:"text-purple-500"}),s.jsx("div",{className:"text-[10px] font-bold text-gray-500 tracking-widest uppercase",children:"Meetings This Week"})]}),s.jsx("div",{className:"text-2xl font-black text-purple-500",children:n.meetingsThisWeek})]}),s.jsxs("div",{className:"bg-[#12122a] rounded-xl p-4 border border-gray-800/50",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(Gh,{size:18,className:"text-red-400"}),s.jsx("div",{className:"text-[10px] font-bold text-gray-500 tracking-widest uppercase",children:"Pipeline Value"})]}),s.jsxs("div",{className:"text-2xl font-black text-red-400",children:["$",(n.pipelineValue/1e3).toFixed(0),"K"]})]})]})]})}),s.jsx("div",{className:"max-w-[1600px] mx-auto px-4 sm:px-6 lg:px-8",children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-7 gap-4",children:YRe.map(f=>s.jsx(XRe,{column:f,leads:d(f.id),onDrop:m=>u(m,f.id),onDragOver:l},f.id))})})]})}const uI=[{value:"new",label:"New",color:"bg-gray-600"},{value:"contacted",label:"Contacted",color:"bg-blue-600"},{value:"meeting",label:"Meeting Booked",color:"bg-purple-600"},{value:"proposal",label:"Proposal Sent",color:"bg-yellow-600"},{value:"negotiating",label:"Negotiating",color:"bg-orange-600"},{value:"signed",label:"Signed",color:"bg-green-600"},{value:"lost",label:"Lost",color:"bg-red-600"}],dI=[{value:"Phone Call",icon:""},{value:"Email",icon:""},{value:"Meeting",icon:""},{value:"Note",icon:""},{value:"Follow-up",icon:""}];function JRe(){const{id:t}=Kh(),e=Fc(),[r,n]=T.useState(null),[i,a]=T.useState([]),[o,c]=T.useState(!1),[u,l]=T.useState(null),[d,f]=T.useState(!0),[m,p]=T.useState(!1),[g,y]=T.useState(!1),[x,w]=T.useState("Phone Call"),[_,E]=T.useState(""),[N,C]=T.useState(null),[I,D]=T.useState(""),[U,G]=T.useState("");T.useEffect(()=>{t&&q()},[t]);const q=async()=>{f(!0);try{const[oe,Ie]=await Promise.all([URe(t),cw(t)]);oe&&(n(oe),l(oe),a(Ie))}catch(oe){console.error("Error loading lead:",oe)}finally{f(!1)}};if(d)return s.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:s.jsx("div",{className:"text-gray-400 text-lg",children:"Loading lead..."})});if(!r)return s.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:s.jsx("div",{className:"text-gray-400 text-lg",children:"Lead not found"})});const J=async()=>{p(!0);try{await rne(t,u),n(u),c(!1)}catch(oe){console.error("Error saving lead:",oe),alert("Error saving lead")}finally{p(!1)}},de=async()=>{if(!_.trim()){alert("Please enter activity notes");return}try{await zV(t,{type:x,notes:_});const oe=await cw(t);a(oe),E(""),y(!1)}catch(oe){console.error("Error adding activity:",oe),alert("Error adding activity")}},xe=oe=>{C(oe.id),D(oe.type),G(oe.notes)},we=async()=>{try{await $Re(N,{type:I,notes:U});const oe=await cw(t);a(oe),C(null)}catch(oe){console.error("Error updating activity:",oe),alert("Error updating activity")}},ve=async oe=>{if(confirm("Are you sure you want to delete this activity?"))try{await HRe(oe);const Ie=await cw(t);a(Ie)}catch(Ie){console.error("Error deleting activity:",Ie),alert("Error deleting activity")}},ne=async oe=>{try{await zV(t,{type:oe,notes:`Quick ${oe.toLowerCase()} logged`});const Ie=await cw(t);a(Ie)}catch(Ie){console.error("Error logging activity:",Ie)}},ae=uI.find(oe=>oe.value===r.stage)?.color||"bg-gray-600";return s.jsxs("div",{className:"min-h-screen bg-[#0d0d1a]",children:[s.jsx("div",{className:"bg-gradient-to-r from-[#1a1a2e] to-[#16162a] border-b border-gray-800/50",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:()=>e("/portal/pipeline/board"),className:"text-gray-400 hover:text-white transition-colors",children:s.jsx(tp,{size:24})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-black text-white tracking-tight",children:r.org_name}),s.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[s.jsx("span",{className:"text-sm text-gray-400",children:r.sport}),s.jsx("span",{className:"text-gray-700",children:""}),s.jsx("span",{className:"text-sm text-gray-400",children:r.location}),s.jsx("span",{className:"text-gray-700",children:""}),s.jsx("span",{className:"text-sm text-gray-400",children:r.type})]})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:`${ae} px-4 py-2 rounded-lg text-white text-sm font-bold uppercase`,children:uI.find(oe=>oe.value===r.stage)?.label||r.stage}),o?s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:J,disabled:m,className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-medium transition-all flex items-center gap-2 disabled:opacity-50",children:[s.jsx(MY,{size:16})," ",m?"Saving...":"Save"]}),s.jsxs("button",{onClick:()=>{c(!1),l(r)},className:"bg-gray-700 hover:bg-gray-600 text-white px-4 py-2 rounded-lg font-medium transition-all flex items-center gap-2",children:[s.jsx(tg,{size:16})," Cancel"]})]}):s.jsxs("button",{onClick:()=>c(!0),className:"bg-gray-700 hover:bg-gray-600 text-white px-4 py-2 rounded-lg font-medium transition-all flex items-center gap-2",children:[s.jsx(xB,{size:16})," Edit"]})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"bg-red-600/20 border border-red-500/30 px-3 py-1 rounded-full",children:s.jsxs("span",{className:"text-red-400 font-bold text-sm",children:["Priority: ",r.priority_score]})}),s.jsx("div",{className:"bg-blue-600/20 border border-blue-500/30 px-3 py-1 rounded-full",children:s.jsxs("span",{className:"text-blue-400 font-bold text-sm",children:["Tier ",r.tier]})}),s.jsx("div",{className:`${r.verification_status==="verified"?"bg-green-600/20 border-green-500/30 text-green-400":"bg-yellow-600/20 border-yellow-500/30 text-yellow-400"} border px-3 py-1 rounded-full`,children:s.jsxs("span",{className:"font-bold text-sm flex items-center gap-1",children:[s.jsx(B0,{size:14})," ",r.verification_status]})})]})]})}),s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:s.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsxs("div",{className:"bg-[#1a1a2e] rounded-xl p-6 border border-gray-800/50",children:[s.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Contact Information"}),o?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-600 uppercase mb-1 block",children:"Email"}),s.jsx("input",{type:"email",value:u.contact?.email||"",onChange:oe=>l({...u,contact:{...u.contact,email:oe.target.value}}),className:"w-full bg-[#12122a] border border-gray-700 rounded-lg px-3 py-2 text-white text-sm focus:border-red-500 focus:outline-none",placeholder:"email@example.com"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-600 uppercase mb-1 block",children:"Phone"}),s.jsx("input",{type:"tel",value:u.contact?.phone||"",onChange:oe=>l({...u,contact:{...u.contact,phone:oe.target.value}}),className:"w-full bg-[#12122a] border border-gray-700 rounded-lg px-3 py-2 text-white text-sm focus:border-red-500 focus:outline-none",placeholder:"0400 000 000"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-600 uppercase mb-1 block",children:"Website"}),s.jsx("input",{type:"url",value:u.contact?.website||"",onChange:oe=>l({...u,contact:{...u.contact,website:oe.target.value}}),className:"w-full bg-[#12122a] border border-gray-700 rounded-lg px-3 py-2 text-white text-sm focus:border-red-500 focus:outline-none",placeholder:"https://example.com"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-600 uppercase mb-1 block",children:"Instagram"}),s.jsx("input",{type:"text",value:u.contact?.instagram||"",onChange:oe=>l({...u,contact:{...u.contact,instagram:oe.target.value}}),className:"w-full bg-[#12122a] border border-gray-700 rounded-lg px-3 py-2 text-white text-sm focus:border-red-500 focus:outline-none",placeholder:"@username"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-600 uppercase mb-1 block",children:"Facebook"}),s.jsx("input",{type:"text",value:u.contact?.facebook||"",onChange:oe=>l({...u,contact:{...u.contact,facebook:oe.target.value}}),className:"w-full bg-[#12122a] border border-gray-700 rounded-lg px-3 py-2 text-white text-sm focus:border-red-500 focus:outline-none",placeholder:"PageName"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-600 uppercase mb-1 block",children:"Contact Form URL"}),s.jsx("input",{type:"url",value:u.contact?.contact_form||"",onChange:oe=>l({...u,contact:{...u.contact,contact_form:oe.target.value}}),className:"w-full bg-[#12122a] border border-gray-700 rounded-lg px-3 py-2 text-white text-sm focus:border-red-500 focus:outline-none",placeholder:"https://example.com/contact"})]})]}),s.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-600 uppercase mb-1 block",children:"Decision Maker"}),s.jsx("input",{type:"text",value:u.contact?.decision_maker||"",onChange:oe=>l({...u,contact:{...u.contact,decision_maker:oe.target.value}}),className:"w-full bg-[#12122a] border border-gray-700 rounded-lg px-3 py-2 text-white text-sm focus:border-red-500 focus:outline-none",placeholder:"Name"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-600 uppercase mb-1 block",children:"Avatar URL"}),s.jsx("input",{type:"url",value:u.contact?.avatar||"",onChange:oe=>l({...u,contact:{...u.contact,avatar:oe.target.value}}),className:"w-full bg-[#12122a] border border-gray-700 rounded-lg px-3 py-2 text-white text-sm focus:border-red-500 focus:outline-none",placeholder:"https://example.com/photo.jpg"})]})]})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[(r.contact?.email||o)&&s.jsxs("a",{href:`mailto:${r.contact?.email}`,className:"flex items-center gap-3 p-3 bg-[#12122a] rounded-lg border border-gray-800/50 hover:border-red-500/30 transition-all group",children:[s.jsx(tu,{size:20,className:"text-gray-500 group-hover:text-red-400"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-[10px] font-bold text-gray-600 uppercase mb-0.5",children:"Email"}),s.jsx("div",{className:"text-sm text-gray-300 group-hover:text-red-400 truncate",children:r.contact?.email||""})]})]}),(r.contact?.phone||o)&&s.jsxs("a",{href:`tel:${r.contact?.phone}`,className:"flex items-center gap-3 p-3 bg-[#12122a] rounded-lg border border-gray-800/50 hover:border-red-500/30 transition-all group",children:[s.jsx(my,{size:20,className:"text-gray-500 group-hover:text-red-400"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-[10px] font-bold text-gray-600 uppercase mb-0.5",children:"Phone"}),s.jsx("div",{className:"text-sm text-gray-300 group-hover:text-red-400",children:r.contact?.phone||""})]})]}),(r.contact?.website||o)&&s.jsxs("a",{href:r.contact?.website,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 p-3 bg-[#12122a] rounded-lg border border-gray-800/50 hover:border-red-500/30 transition-all group",children:[s.jsx(f1,{size:20,className:"text-gray-500 group-hover:text-red-400"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-[10px] font-bold text-gray-600 uppercase mb-0.5",children:"Website"}),s.jsx("div",{className:"text-sm text-gray-300 group-hover:text-red-400 truncate",children:r.contact?.website||""})]})]}),(r.contact?.instagram||o)&&s.jsxs("a",{href:`https://instagram.com/${r.contact?.instagram?.replace("@","")}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 p-3 bg-[#12122a] rounded-lg border border-gray-800/50 hover:border-red-500/30 transition-all group",children:[s.jsx(HN,{size:20,className:"text-gray-500 group-hover:text-red-400"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-[10px] font-bold text-gray-600 uppercase mb-0.5",children:"Instagram"}),s.jsx("div",{className:"text-sm text-gray-300 group-hover:text-red-400",children:r.contact?.instagram||""})]})]}),r.contact?.facebook&&s.jsxs("a",{href:`https://facebook.com/${r.contact?.facebook}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 p-3 bg-[#12122a] rounded-lg border border-gray-800/50 hover:border-red-500/30 transition-all group",children:[s.jsx(I_,{size:20,className:"text-gray-500 group-hover:text-red-400"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-[10px] font-bold text-gray-600 uppercase mb-0.5",children:"Facebook"}),s.jsx("div",{className:"text-sm text-gray-300 group-hover:text-red-400",children:r.contact?.facebook||""})]})]}),r.contact?.linkedin&&s.jsxs("a",{href:`https://linkedin.com/in/${r.contact?.linkedin}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 p-3 bg-[#12122a] rounded-lg border border-gray-800/50 hover:border-red-500/30 transition-all group",children:[s.jsx(hhe,{size:20,className:"text-gray-500 group-hover:text-red-400"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-[10px] font-bold text-gray-600 uppercase mb-0.5",children:"LinkedIn"}),s.jsx("div",{className:"text-sm text-gray-300 group-hover:text-red-400 truncate",children:r.contact?.linkedin||""})]})]}),r.contact?.decision_maker_instagram&&s.jsxs("a",{href:`https://instagram.com/${r.contact?.decision_maker_instagram?.replace("@","")}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 p-3 bg-[#12122a] rounded-lg border border-gray-800/50 hover:border-red-500/30 transition-all group",children:[s.jsx(eg,{size:20,className:"text-gray-500 group-hover:text-red-400"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-[10px] font-bold text-gray-600 uppercase mb-0.5",children:"Decision Maker IG"}),s.jsx("div",{className:"text-sm text-gray-300 group-hover:text-red-400",children:r.contact?.decision_maker_instagram||""})]})]})]}),(r.contact?.decision_maker||o)&&s.jsxs("div",{className:"mt-4 p-3 bg-[#12122a] rounded-lg border border-gray-800/50",children:[s.jsx("div",{className:"text-[10px] font-bold text-gray-600 uppercase mb-1",children:"Decision Maker"}),s.jsxs("div",{className:"flex items-center gap-3",children:[r.contact?.avatar&&s.jsx("img",{src:r.contact.avatar,alt:r.contact.decision_maker,className:"w-12 h-12 rounded-full object-cover border-2 border-gray-700"}),s.jsx("div",{className:"text-white font-bold",children:r.contact?.decision_maker||""})]})]})]})]}),s.jsxs("div",{className:"bg-[#1a1a2e] rounded-xl p-6 border border-gray-800/50",children:[s.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Event Information"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(ml,{size:20,className:"text-gray-500 mt-0.5"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[10px] font-bold text-gray-600 uppercase mb-1",children:"Frequency"}),s.jsx("div",{className:"text-gray-300",children:r.events?.frequency||"Not specified"})]})]}),r.events?.upcoming?.length>0&&s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx($Y,{size:20,className:"text-gray-500 mt-0.5"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[10px] font-bold text-gray-600 uppercase mb-1",children:"Upcoming Events"}),s.jsx("div",{className:"text-gray-300 space-y-1",children:r.events.upcoming.map((oe,Ie)=>s.jsx("div",{children:oe},Ie))})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(md,{size:20,className:"text-gray-500 mt-0.5"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[10px] font-bold text-gray-600 uppercase mb-1",children:"Typical Venue"}),s.jsx("div",{className:"text-gray-300",children:r.events?.typical_venue||"Not specified"})]})]})]})]}),s.jsxs("div",{className:"bg-[#1a1a2e] rounded-xl p-6 border border-gray-800/50",children:[s.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Media & Revenue Assessment"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-[10px] font-bold text-gray-600 uppercase mb-2",children:"Media Quality"}),s.jsx("div",{className:"text-gray-300 text-sm",children:r.media_quality||"Not assessed"})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Gh,{size:20,className:"text-green-500"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[10px] font-bold text-gray-600 uppercase mb-1",children:"Revenue Potential"}),s.jsx("div",{className:"text-green-400 font-bold",children:r.revenue_potential||"TBD"})]})]})]})]}),s.jsxs("div",{className:"bg-[#1a1a2e] rounded-xl p-6 border border-gray-800/50",children:[s.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Internal Notes"}),o?s.jsx("textarea",{value:u.notes||"",onChange:oe=>l({...u,notes:oe.target.value}),rows:4,className:"w-full px-4 py-3 bg-[#12122a] border border-gray-800/50 rounded-xl text-white placeholder-gray-600 focus:outline-none focus:ring-2 focus:ring-red-500/40"}):s.jsx("div",{className:"text-gray-300 text-sm whitespace-pre-wrap",children:r.notes||"No notes"})]}),s.jsxs("div",{className:"bg-[#1a1a2e] rounded-xl p-6 border border-gray-800/50",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-bold text-white",children:"Activity Timeline"}),s.jsxs("button",{onClick:()=>y(!g),className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg font-medium transition-all flex items-center gap-2 text-sm",children:[s.jsx(jf,{size:16})," Add Activity"]})]}),g&&s.jsx("div",{className:"mb-6 p-4 bg-[#12122a] rounded-lg border border-gray-800/50",children:s.jsxs("div",{className:"grid gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Activity Type"}),s.jsx("select",{value:x,onChange:oe=>w(oe.target.value),className:"w-full px-4 py-3 bg-[#1a1a2e] border border-gray-800/50 rounded-xl text-gray-300 focus:outline-none focus:ring-2 focus:ring-red-500/40",children:dI.map(oe=>s.jsxs("option",{value:oe.value,children:[oe.icon," ",oe.value]},oe.value))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Notes"}),s.jsx("textarea",{value:_,onChange:oe=>E(oe.target.value),rows:3,placeholder:"What happened?",className:"w-full px-4 py-3 bg-[#1a1a2e] border border-gray-800/50 rounded-xl text-white placeholder-gray-600 focus:outline-none focus:ring-2 focus:ring-red-500/40"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:de,className:"flex-1 bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg font-medium transition-all",children:"Add Activity"}),s.jsx("button",{onClick:()=>y(!1),className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 text-gray-300 rounded-lg font-medium transition-all",children:"Cancel"})]})]})}),i.length===0?s.jsx("div",{className:"text-center text-gray-500 py-8",children:"No activities yet. Add your first activity above."}):s.jsx("div",{className:"space-y-3",children:i.map(oe=>{const Ie=dI.find(be=>be.value===oe.type),Ce=N===oe.id;return s.jsxs("div",{className:"flex items-start gap-4 p-4 bg-[#12122a] rounded-lg border border-gray-800/50",children:[s.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-red-600/20 rounded-full flex items-center justify-center text-xl",children:Ie?.icon||""}),s.jsx("div",{className:"flex-1 min-w-0",children:Ce?s.jsxs("div",{className:"space-y-3",children:[s.jsx("select",{value:I,onChange:be=>D(be.target.value),className:"w-full px-3 py-2 bg-[#1a1a2e] border border-gray-700 rounded-lg text-gray-300 text-sm focus:outline-none focus:ring-2 focus:ring-red-500/40",children:dI.map(be=>s.jsxs("option",{value:be.value,children:[be.icon," ",be.value]},be.value))}),s.jsx("textarea",{value:U,onChange:be=>G(be.target.value),rows:3,className:"w-full px-3 py-2 bg-[#1a1a2e] border border-gray-700 rounded-lg text-white text-sm focus:outline-none focus:ring-2 focus:ring-red-500/40"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:we,className:"px-3 py-1 bg-green-600 hover:bg-green-700 text-white rounded text-sm",children:"Save"}),s.jsx("button",{onClick:()=>C(null),className:"px-3 py-1 bg-gray-600 hover:bg-gray-700 text-white rounded text-sm",children:"Cancel"})]})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-xs font-bold text-gray-500 uppercase",children:oe.type}),s.jsx("span",{className:"text-gray-700",children:""}),s.jsx("span",{className:"text-xs text-gray-600",children:new Date(oe.created_at).toLocaleDateString("en-AU",{day:"numeric",month:"short",year:"numeric"})})]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx("button",{onClick:()=>xe(oe),className:"p-1 text-gray-500 hover:text-blue-400 transition-colors",title:"Edit",children:s.jsx(xB,{size:14})}),s.jsx("button",{onClick:()=>ve(oe.id),className:"p-1 text-gray-500 hover:text-red-400 transition-colors",title:"Delete",children:s.jsx(tg,{size:14})})]})]}),s.jsx("p",{className:"text-sm text-gray-300",children:oe.notes})]})})]},oe.id)})})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-[#1a1a2e] rounded-xl p-6 border border-gray-800/50",children:[s.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Quick Actions"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("button",{onClick:()=>ne("Phone Call"),className:"w-full bg-blue-600 hover:bg-blue-700 text-white px-4 py-3 rounded-lg font-medium transition-all flex items-center justify-center gap-2",children:[s.jsx(my,{size:18})," Log Call"]}),s.jsxs("button",{onClick:()=>e("/portal/outreach"),className:"w-full bg-purple-600 hover:bg-purple-700 text-white px-4 py-3 rounded-lg font-medium transition-all flex items-center justify-center gap-2",children:[s.jsx(tu,{size:18})," Send Email"]}),s.jsxs("button",{onClick:()=>ne("Meeting"),className:"w-full bg-green-600 hover:bg-green-700 text-white px-4 py-3 rounded-lg font-medium transition-all flex items-center justify-center gap-2",children:[s.jsx(ml,{size:18})," Schedule Meeting"]}),s.jsxs("button",{onClick:()=>y(!0),className:"w-full bg-gray-700 hover:bg-gray-600 text-white px-4 py-3 rounded-lg font-medium transition-all flex items-center justify-center gap-2",children:[s.jsx(jf,{size:18})," Add Note"]})]})]}),o&&s.jsxs("div",{className:"bg-[#1a1a2e] rounded-xl p-6 border border-gray-800/50",children:[s.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Change Stage"}),s.jsx("select",{value:u.stage,onChange:oe=>l({...u,stage:oe.target.value}),className:"w-full px-4 py-3 bg-[#12122a] border border-gray-800/50 rounded-xl text-gray-300 focus:outline-none focus:ring-2 focus:ring-red-500/40",children:uI.map(oe=>s.jsx("option",{value:oe.value,children:oe.label},oe.value))})]}),s.jsxs("div",{className:"bg-[#1a1a2e] rounded-xl p-6 border border-gray-800/50",children:[s.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[s.jsx(fR,{size:18})," Tags"]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:r.tags?.map((oe,Ie)=>s.jsx("span",{className:"px-3 py-1 bg-gray-700 text-gray-300 rounded-full text-xs font-medium",children:oe},Ie))})]})]})]})})]})}function eDe(){const[t]=T.useState(QRe()),[e,r]=T.useState(t[0]),[n,i]=T.useState(null),[a,o]=T.useState([]),[c,u]=T.useState(null),[l,d]=T.useState(!1),[f,m]=T.useState(!0),p=T.useRef(null);T.useEffect(()=>{(async()=>{m(!0);const w=await mE();o(w),m(!1)})()},[]),T.useEffect(()=>{if(e&&n){const x=zRe(e.id,n);u(x)}else u(null)},[e,n]);const g=async()=>{const x=c?`Subject: ${c.subject}

${c.body}`:"";if(navigator.clipboard&&window.isSecureContext)try{await navigator.clipboard.writeText(x),d(!0),setTimeout(()=>d(!1),2e3);return}catch{console.log("Clipboard API failed, falling back to textarea method")}if(p.current){p.current.value=x,p.current.style.display="block",p.current.select(),p.current.setSelectionRange(0,99999);try{document.execCommand("copy"),d(!0),setTimeout(()=>d(!1),2e3)}catch{alert("Copy failed. Please select and copy manually.")}p.current.style.display="none"}},y=()=>{if(!c||!n?.contact?.email){alert("No email address available for this lead");return}const x=encodeURIComponent(c.subject),w=encodeURIComponent(c.body),_=`mailto:${n.contact.email}?subject=${x}&body=${w}`;window.location.href=_};return s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsx("textarea",{ref:p,style:{position:"absolute",left:"-9999px",display:"none"},readOnly:!0}),s.jsxs("div",{className:"mb-8",children:[s.jsxs("h1",{className:"text-3xl font-black text-white tracking-tight mb-2",children:[s.jsx("span",{className:"text-red-500",children:"OUTREACH"})," TEMPLATES"]}),s.jsx("p",{className:"text-gray-400",children:"Pre-built email templates for sales outreach"})]}),s.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"lg:col-span-1 space-y-4",children:[s.jsxs("div",{className:"bg-[#1a1a2e] rounded-xl p-6 border border-gray-800/50",children:[s.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Templates"}),s.jsx("div",{className:"space-y-2",children:t.map(x=>s.jsx("button",{onClick:()=>r(x),className:`w-full text-left px-4 py-3 rounded-lg font-medium transition-all ${e?.id===x.id?"bg-red-600 text-white":"bg-[#12122a] text-gray-300 hover:bg-[#16162e]"}`,children:x.name},x.id))})]}),s.jsxs("div",{className:"bg-[#1a1a2e] rounded-xl p-6 border border-gray-800/50",children:[s.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Select Lead"}),s.jsxs("select",{value:n?.id||"",onChange:x=>{const w=a.find(_=>_.id===x.target.value);i(w)},className:"w-full px-4 py-3 bg-[#12122a] border border-gray-800/50 rounded-xl text-gray-300 focus:outline-none focus:ring-2 focus:ring-red-500/40",children:[s.jsx("option",{value:"",children:"-- Select a lead --"}),a.filter(x=>x.stage!=="lost"&&x.verification_status!=="do_not_contact").map(x=>s.jsx("option",{value:x.id,children:x.org_name},x.id))]}),n&&s.jsxs("div",{className:"mt-4 p-3 bg-[#12122a] rounded-lg border border-gray-800/50",children:[s.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Selected Lead"}),s.jsx("div",{className:"text-white font-bold mb-1",children:n.org_name}),s.jsx("div",{className:"text-sm text-gray-400",children:n.sport}),s.jsx("div",{className:"text-sm text-gray-400",children:n.location}),n.contact.email&&s.jsxs("div",{className:"text-sm text-green-400 mt-2 flex items-center gap-1",children:[s.jsx(tu,{size:14})," ",n.contact.email]})]})]})]}),s.jsxs("div",{className:"lg:col-span-2",children:[s.jsxs("div",{className:"bg-[#1a1a2e] rounded-xl p-6 border border-gray-800/50",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h3",{className:"text-lg font-bold text-white",children:"Preview"}),c&&s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:g,className:`${l?"bg-green-600":"bg-gray-700 hover:bg-gray-600"} text-white px-4 py-2 rounded-lg font-medium transition-all flex items-center gap-2`,children:l?s.jsxs(s.Fragment,{children:[s.jsx(la,{size:16})," Copied!"]}):s.jsxs(s.Fragment,{children:[s.jsx(Mb,{size:16})," Copy to Clipboard"]})}),s.jsxs("button",{onClick:y,className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg font-medium transition-all flex items-center gap-2",children:[s.jsx(tu,{size:16})," Open in Email"]})]})]}),c?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Subject Line"}),s.jsx("div",{className:"px-4 py-3 bg-[#12122a] border border-gray-800/50 rounded-xl text-white font-medium",children:c.subject})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Email Body"}),s.jsx("div",{className:"px-4 py-4 bg-[#12122a] border border-gray-800/50 rounded-xl text-gray-300 whitespace-pre-wrap font-mono text-sm leading-relaxed min-h-[400px]",children:c.body})]}),s.jsxs("div",{className:"p-4 bg-blue-600/10 border border-blue-500/20 rounded-lg",children:[s.jsx("div",{className:"text-xs font-bold text-blue-400 uppercase mb-2",children:"Available Variables"}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-blue-300",children:[s.jsx("div",{children:s.jsx("code",{className:"bg-blue-900/30 px-2 py-1 rounded",children:"{{org_name}}"})}),s.jsx("div",{children:s.jsx("code",{className:"bg-blue-900/30 px-2 py-1 rounded",children:"{{decision_maker}}"})}),s.jsx("div",{children:s.jsx("code",{className:"bg-blue-900/30 px-2 py-1 rounded",children:"{{sport}}"})}),s.jsx("div",{children:s.jsx("code",{className:"bg-blue-900/30 px-2 py-1 rounded",children:"{{upcoming_event}}"})})]})]})]}):s.jsxs("div",{className:"text-center text-gray-500 py-12",children:[s.jsx(tu,{size:48,className:"mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"Select a template and lead to preview"})]})]}),s.jsxs("div",{className:"mt-4 p-4 bg-green-600/10 border border-green-500/20 rounded-lg",children:[s.jsx("div",{className:"text-xs font-bold text-green-400 uppercase mb-1",children:" Templates Ready"}),s.jsx("div",{className:"text-sm text-green-300",children:"All email templates are pre-configured with FFM branding. Select a lead and template to preview, then copy or open in your email client."})]})]})]}),s.jsxs("div",{className:"mt-8 bg-[#1a1a2e] rounded-xl p-6 border border-gray-800/50",children:[s.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Outreach Strategy Guide"}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-6 text-sm",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-red-400 mb-2",children:"Cold Outreach (First Contact)"}),s.jsxs("ul",{className:"space-y-1 text-gray-400",children:[s.jsx("li",{children:" Keep it short and personal"}),s.jsx("li",{children:" Lead with value, not features"}),s.jsx("li",{children:" Mention specific details about their organization"}),s.jsx("li",{children:" End with a clear, low-pressure CTA"})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-red-400 mb-2",children:"Follow-up #1 (3-5 days later)"}),s.jsxs("ul",{className:"space-y-1 text-gray-400",children:[s.jsx("li",{children:" Acknowledge they're busy"}),s.jsx("li",{children:" Share a relevant work example"}),s.jsx("li",{children:" Reiterate availability"}),s.jsx("li",{children:" Keep it brief"})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-red-400 mb-2",children:"Meeting Request (After engagement)"}),s.jsxs("ul",{className:"space-y-1 text-gray-400",children:[s.jsx("li",{children:" Be specific about what you'll cover"}),s.jsx("li",{children:" Show you've researched them"}),s.jsx("li",{children:" Offer flexible scheduling"}),s.jsx("li",{children:" Include calendar link if available"})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-red-400 mb-2",children:"Post-Meeting (Same day)"}),s.jsxs("ul",{className:"space-y-1 text-gray-400",children:[s.jsx("li",{children:" Send within 2 hours of meeting"}),s.jsx("li",{children:" Recap what was discussed"}),s.jsx("li",{children:" Outline next steps clearly"}),s.jsx("li",{children:" Attach proposal or contract"})]})]})]})]})]})}const hI=[{id:"branding",category:"Branding & Assets",icon:"",items:[{id:"logo",label:"High-resolution logo",type:"file",priority:"essential"},{id:"brand_kit",label:"Brand kit (colors, fonts, guidelines)",type:"file",priority:"important"},{id:"event_graphics",label:"Event-specific graphics/banners",type:"file",priority:"important"},{id:"sponsor_logos",label:"Sponsor logos for on-screen display",type:"file",priority:"nice"}]},{id:"athletes",category:"Athlete Information",icon:"",items:[{id:"registration_list",label:"Registration list (Name, Email, Phone, Instagram)",type:"file",priority:"essential"},{id:"notable_athletes",label:"Notable athletes to feature",type:"textarea",priority:"important"}]},{id:"venue",category:"Venue & Technical",icon:"",items:[{id:"floor_plan",label:"Venue floor plan (mat layout)",type:"file",priority:"essential"},{id:"internet_specs",label:"Internet specs (upload speed, hardwired access)",type:"textarea",priority:"essential"},{id:"power_locations",label:"Power outlet locations",type:"textarea",priority:"important"},{id:"load_in_time",label:"Load-in/crew access time",type:"text",priority:"important"},{id:"venue_contact",label:"Venue contact for event day",type:"contact",priority:"important"}]},{id:"event",category:"Event Operations",icon:"",items:[{id:"mat_count",label:"Number of mats running",type:"number",priority:"essential"},{id:"schedule",label:"Event schedule/run sheet",type:"file",priority:"essential"},{id:"bracket_system",label:"Bracket/scoring system used",type:"text",priority:"important"},{id:"match_comms_method",label:"How match order will be communicated",type:"textarea",priority:"important"}]},{id:"social",category:"Social & Promotion",icon:"",items:[{id:"org_instagram",label:"Organization Instagram",type:"text",priority:"important"},{id:"org_facebook",label:"Organization Facebook",type:"text",priority:"nice"},{id:"org_website",label:"Organization Website",type:"text",priority:"nice"},{id:"existing_content",label:"Existing footage/photos for promos",type:"file",priority:"nice"},{id:"existing_content_links",label:"Links to existing footage (Google Drive, Dropbox, etc.)",type:"textarea",priority:"nice"}]}];function tDe({session:t,onClose:e,onSave:r}){const[n,i]=T.useState("checklist"),[a,o]=T.useState(!1),[c,u]=T.useState({}),[l,d]=T.useState({}),[f,m]=T.useState({}),[p,g]=T.useState({});T.useEffect(()=>{if(!t)return;const D={};hI.forEach(U=>{D[U.id]={},U.items.forEach(G=>{const q=t.checklist_config?.[U.id]?.[G.id]||{};D[U.id][G.id]={enabled:q.enabled!==!1,priority:q.priority||G.priority,alreadyHave:q.alreadyHave||!1}})}),u(D),d(t.collected_data||{}),m(t.admin_item_notes||{}),g(t.manual_completions||{})},[t]);const y=(D,U)=>{u(G=>({...G,[D]:{...G[D],[U]:{...G[D][U],enabled:!G[D][U].enabled}}}))},x=(D,U)=>{u(G=>({...G,[D]:{...G[D],[U]:{...G[D][U],alreadyHave:!G[D][U].alreadyHave}}}))},w=(D,U,G)=>{u(q=>({...q,[D]:{...q[D],[U]:{...q[D][U],priority:G}}}))},_=(D,U,G)=>{m(q=>({...q,[`${D}.${U}`]:G}))},E=(D,U)=>{const G=`${D}.${U}`;g(q=>({...q,[G]:!q[G]}))},N=(D,U,G)=>{d(q=>({...q,[D]:{...q[D]||{},[U]:G}}))},C=async()=>{o(!0);try{const D={checklist_config:c,collected_data:l,admin_item_notes:f,manual_completions:p};await $3e(t.id,D),r&&r(D),e()}catch(D){console.error("Error saving:",D),alert("Failed to save changes: "+D.message)}finally{o(!1)}},I=(D,U)=>{const G=l[D]||{},q=G[U]||G[`${U}_url`],J=p[`${D}.${U}`],de=c[D]?.[U]?.alreadyHave;return J?{status:"manual",label:"Manually Complete",color:"blue"}:q?{status:"complete",label:"Client Provided",color:"green"}:de?{status:"already",label:"Already Have",color:"purple"}:{status:"pending",label:"Pending",color:"gray"}};return t?s.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4 overflow-y-auto",onClick:e,children:s.jsxs("div",{className:"bg-gray-800 rounded-2xl w-full max-w-5xl my-8 border border-gray-700 shadow-2xl",onClick:D=>D.stopPropagation(),children:[s.jsxs("div",{className:"p-6 border-b border-gray-700 flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold mb-2 text-white",children:"Edit Session"}),s.jsx("p",{className:"text-gray-400",children:t.org_name})]}),s.jsx("button",{onClick:e,className:"text-gray-500 hover:text-white text-xl",children:""})]}),s.jsx("div",{className:"border-b border-gray-700",children:s.jsx("div",{className:"flex gap-1 px-6",children:[{id:"checklist",label:"Checklist Config",icon:""},{id:"data",label:"Collected Data",icon:""}].map(D=>s.jsxs("button",{onClick:()=>i(D.id),className:`flex items-center gap-2 px-4 py-3 font-medium transition-colors border-b-2 ${n===D.id?"border-orange-500 text-white":"border-transparent text-gray-500 hover:text-white"}`,children:[s.jsx("span",{children:D.icon})," ",D.label]},D.id))})}),s.jsxs("div",{className:"p-6 max-h-[600px] overflow-y-auto",children:[n==="checklist"&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-4",children:s.jsxs("p",{className:"text-blue-200 text-sm",children:[s.jsx("strong",{children:" What this does:"}),' Configure what items the client sees, set priorities, mark items as "already have", and add internal notes for your team.']})}),hI.map(D=>s.jsxs("div",{className:"bg-gray-900/50 rounded-lg border border-gray-700",children:[s.jsx("div",{className:"px-4 py-3 border-b border-gray-700 bg-gray-800/50",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-2xl",children:D.icon}),s.jsx("h3",{className:"font-bold text-white",children:D.category})]})}),s.jsx("div",{className:"p-4 space-y-4",children:D.items.map(U=>{const G=c[D.id]?.[U.id]||{},q=I(D.id,U.id),J=f[`${D.id}.${U.id}`]||"";return s.jsx("div",{className:`p-4 rounded-lg border transition-all ${G.enabled?"bg-gray-800/50 border-gray-700":"bg-gray-900/30 border-gray-800 opacity-60"}`,children:s.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[s.jsx("button",{onClick:()=>y(D.id,U.id),className:`flex-shrink-0 w-6 h-6 rounded border-2 flex items-center justify-center transition-colors ${G.enabled?"bg-orange-500 border-orange-500":"bg-transparent border-gray-600"}`,children:G.enabled&&s.jsx("span",{className:"text-white text-sm",children:""})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:`font-medium ${G.enabled?"text-white":"text-gray-500"}`,children:U.label}),s.jsx("span",{className:`text-xs px-2 py-1 rounded-full bg-${q.color}-500/20 text-${q.color}-400 border border-${q.color}-500/30`,children:q.label})]}),G.enabled&&s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[s.jsxs("select",{value:G.priority,onChange:de=>w(D.id,U.id,de.target.value),className:"text-xs bg-gray-900 border border-gray-700 rounded px-2 py-1 text-white focus:outline-none focus:border-orange-500",children:[s.jsx("option",{value:"essential",children:"Essential"}),s.jsx("option",{value:"important",children:"Important"}),s.jsx("option",{value:"nice",children:"Nice to have"})]}),s.jsx("button",{onClick:()=>x(D.id,U.id),className:`text-xs px-3 py-1 rounded border transition-colors ${G.alreadyHave?"bg-purple-500/20 text-purple-400 border-purple-500/30":"bg-gray-900 text-gray-400 border-gray-700"}`,children:G.alreadyHave?" Already Have":'Mark "Already Have"'}),s.jsx("button",{onClick:()=>E(D.id,U.id),className:`text-xs px-3 py-1 rounded border transition-colors ${p[`${D.id}.${U.id}`]?"bg-blue-500/20 text-blue-400 border-blue-500/30":"bg-gray-900 text-gray-400 border-gray-700"}`,children:p[`${D.id}.${U.id}`]?" Manually Complete":"Mark Complete"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Internal Note (not visible to client)"}),s.jsx("textarea",{value:J,onChange:de=>_(D.id,U.id,de.target.value),placeholder:"e.g., Client sent logo via email - see Drive folder",rows:2,className:"w-full text-sm bg-gray-900 border border-gray-700 rounded px-3 py-2 text-white placeholder-gray-600 focus:outline-none focus:border-orange-500 resize-none"})]})]})]})]})},U.id)})})]},D.id))]}),n==="data"&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-4",children:s.jsxs("p",{className:"text-yellow-200 text-sm",children:[s.jsx("strong",{children:" Caution:"})," You're editing data the client submitted. Only modify if you need to correct errors or add information on their behalf."]})}),hI.map(D=>{const U=l[D.id]||{};return s.jsxs("div",{className:"bg-gray-900/50 rounded-lg border border-gray-700",children:[s.jsx("div",{className:"px-4 py-3 border-b border-gray-700 bg-gray-800/50",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-2xl",children:D.icon}),s.jsx("h3",{className:"font-bold text-white",children:D.category})]})}),s.jsx("div",{className:"p-4 space-y-4",children:D.items.filter(G=>c[D.id]?.[G.id]?.enabled!==!1).map(G=>{const q=U[G.id]||"",J=U[`${G.id}_url`]||"";return s.jsxs("div",{className:"p-3 rounded-lg bg-gray-800/50 border border-gray-700",children:[s.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:G.label}),G.type==="file"&&s.jsxs("div",{children:[s.jsx("input",{type:"text",value:J,onChange:de=>N(D.id,`${G.id}_url`,de.target.value),placeholder:"File URL (if uploaded)",className:"w-full text-sm bg-gray-900 border border-gray-700 rounded px-3 py-2 text-white placeholder-gray-600 focus:outline-none focus:border-orange-500"}),J&&s.jsx("a",{href:J,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-orange-500 hover:underline mt-1 inline-block",children:"View uploaded file "})]}),G.type==="text"&&s.jsx("input",{type:"text",value:q,onChange:de=>N(D.id,G.id,de.target.value),placeholder:G.placeholder||"",className:"w-full text-sm bg-gray-900 border border-gray-700 rounded px-3 py-2 text-white placeholder-gray-600 focus:outline-none focus:border-orange-500"}),G.type==="number"&&s.jsx("input",{type:"number",value:q,onChange:de=>N(D.id,G.id,de.target.value),placeholder:G.placeholder||"",className:"w-full text-sm bg-gray-900 border border-gray-700 rounded px-3 py-2 text-white placeholder-gray-600 focus:outline-none focus:border-orange-500"}),G.type==="textarea"&&s.jsx("textarea",{value:q,onChange:de=>N(D.id,G.id,de.target.value),placeholder:G.placeholder||"",rows:3,className:"w-full text-sm bg-gray-900 border border-gray-700 rounded px-3 py-2 text-white placeholder-gray-600 focus:outline-none focus:border-orange-500 resize-none"}),G.type==="contact"&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("input",{type:"text",value:U[`${G.id}_name`]||"",onChange:de=>N(D.id,`${G.id}_name`,de.target.value),placeholder:"Contact name",className:"w-full text-sm bg-gray-900 border border-gray-700 rounded px-3 py-2 text-white placeholder-gray-600 focus:outline-none focus:border-orange-500"}),s.jsx("input",{type:"tel",value:U[`${G.id}_phone`]||"",onChange:de=>N(D.id,`${G.id}_phone`,de.target.value),placeholder:"Phone number",className:"w-full text-sm bg-gray-900 border border-gray-700 rounded px-3 py-2 text-white placeholder-gray-600 focus:outline-none focus:border-orange-500"}),s.jsx("input",{type:"email",value:U[`${G.id}_email`]||"",onChange:de=>N(D.id,`${G.id}_email`,de.target.value),placeholder:"Email address",className:"w-full text-sm bg-gray-900 border border-gray-700 rounded px-3 py-2 text-white placeholder-gray-600 focus:outline-none focus:border-orange-500"})]})]},G.id)})})]},D.id)})]})]}),s.jsxs("div",{className:"p-6 border-t border-gray-700 flex justify-end gap-3",children:[s.jsx("button",{onClick:e,className:"px-6 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg transition-colors",children:"Cancel"}),s.jsx("button",{onClick:C,disabled:a,className:"px-6 py-2 bg-orange-500 hover:bg-orange-600 disabled:bg-gray-600 text-white rounded-lg transition-colors flex items-center gap-2",children:a?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full"}),"Saving..."]}):s.jsx(s.Fragment,{children:" Save Changes"})})]})]})}):null}const VV=[{id:"branding",category:"Branding & Assets",icon:"",items:[{id:"logo",label:"High-resolution logo",type:"file"},{id:"brand_kit",label:"Brand kit (colors, fonts, guidelines)",type:"file"},{id:"event_graphics",label:"Event-specific graphics/banners",type:"file"},{id:"sponsor_logos",label:"Sponsor logos for on-screen display",type:"file"}]},{id:"athletes",category:"Athlete Information",icon:"",items:[{id:"registration_list",label:"Registration list",type:"file"},{id:"notable_athletes",label:"Notable athletes to feature",type:"textarea"}]},{id:"venue",category:"Venue & Technical",icon:"",items:[{id:"floor_plan",label:"Venue floor plan",type:"file"},{id:"internet_specs",label:"Internet specs",type:"textarea"},{id:"power_locations",label:"Power outlet locations",type:"textarea"},{id:"load_in_time",label:"Load-in/crew access time",type:"text"},{id:"venue_contact",label:"Venue contact for event day",type:"contact"}]},{id:"event",category:"Event Operations",icon:"",items:[{id:"mat_count",label:"Number of mats running",type:"number"},{id:"schedule",label:"Event schedule/run sheet",type:"file"},{id:"bracket_system",label:"Bracket/scoring system used",type:"text"},{id:"match_comms_method",label:"How match order will be communicated",type:"textarea"}]},{id:"social",category:"Social & Promotion",icon:"",items:[{id:"org_instagram",label:"Organization Instagram",type:"text"},{id:"org_facebook",label:"Organization Facebook",type:"text"},{id:"org_website",label:"Organization Website",type:"text"},{id:"existing_content",label:"Existing footage/photos for promos",type:"file"},{id:"existing_content_links",label:"Links to existing footage",type:"textarea"}]}],rDe=t=>{if(!t)return{icon:B8,type:"file",isImage:!1};const e=t.toLowerCase();return e.match(/\.(jpg|jpeg|png|gif|webp|svg|bmp)(\?|$)/i)?{icon:tm,type:"image",isImage:!0}:e.match(/\.(mp4|mov|avi|webm|mkv)(\?|$)/i)?{icon:Qd,type:"video",isImage:!1}:e.match(/\.(mp3|wav|aac|ogg|m4a)(\?|$)/i)?{icon:The,type:"audio",isImage:!1}:e.match(/\.(pdf|doc|docx|xls|xlsx|ppt|pptx|txt|csv)(\?|$)/i)?{icon:Ub,type:"document",isImage:!1}:e.match(/\.(zip|rar|7z|tar|gz)(\?|$)/i)?{icon:IY,type:"archive",isImage:!1}:{icon:B8,type:"file",isImage:!1}},nDe=t=>{if(!t)return"File";try{const n=new URL(t).pathname.split("/").pop(),i=decodeURIComponent(n);return i.length>40?i.substring(0,37)+"...":i}catch{return"File"}};function iDe({url:t,label:e}){const{icon:r,type:n,isImage:i}=rDe(t),a=nDe(t);return s.jsx("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"group block",children:s.jsxs("div",{className:"border border-gray-700 rounded-xl overflow-hidden hover:border-orange-500/50 transition-all",children:[s.jsxs("div",{className:"bg-gray-900 aspect-video flex items-center justify-center relative overflow-hidden",children:[i?s.jsx("img",{src:t,alt:e,className:"w-full h-full object-cover group-hover:scale-105 transition-transform",onError:o=>{o.target.style.display="none",o.target.nextSibling.style.display="flex"}}):null,s.jsxs("div",{className:`flex flex-col items-center justify-center text-gray-500 ${i?"hidden":""}`,style:i?{display:"none"}:{},children:[s.jsx(r,{size:48,className:"mb-2"}),s.jsx("span",{className:"text-xs uppercase tracking-wide",children:n})]}),s.jsx("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-3",children:s.jsx("div",{className:"bg-orange-500 text-white p-2 rounded-full",children:s.jsx(Fb,{size:20})})})]}),s.jsxs("div",{className:"p-3 bg-gray-800",children:[s.jsx("p",{className:"text-sm text-white truncate",children:a}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:e})]})]})})}function sDe({value:t,isUrl:e}){return t?Array.isArray(t)?t.length===0?s.jsx("span",{className:"text-gray-500 italic",children:"No links provided"}):s.jsx("div",{className:"space-y-1",children:t.map((r,n)=>s.jsxs("a",{href:r,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 break-all flex items-center gap-1 block",children:[" ",r.includes("drive.google")?"Google Drive":r.includes("dropbox")?"Dropbox":"External"," link",s.jsx(Fb,{size:14})]},n))}):e||t.startsWith("http://")||t.startsWith("https://")?s.jsxs("a",{href:t.startsWith("http")?t:`https://${t}`,target:"_blank",rel:"noopener noreferrer",className:"text-orange-500 hover:text-orange-400 break-all flex items-center gap-1",children:[t,s.jsx(Fb,{size:14})]}):t.includes(`
`)?s.jsx("p",{className:"text-white whitespace-pre-wrap",children:t}):s.jsx("span",{className:"text-white",children:t}):s.jsx("span",{className:"text-gray-500 italic",children:"Not provided"})}function aDe({data:t,itemId:e}){const r=t[`${e}_name`],n=t[`${e}_phone`],i=t[`${e}_email`];return!r&&!n&&!i?s.jsx("span",{className:"text-gray-500 italic",children:"Not provided"}):s.jsxs("div",{className:"space-y-1",children:[r&&s.jsx("p",{className:"text-white font-medium",children:r}),n&&s.jsxs("a",{href:`tel:${n}`,className:"text-orange-500 hover:text-orange-400 block",children:[" ",n]}),i&&s.jsxs("a",{href:`mailto:${i}`,className:"text-orange-500 hover:text-orange-400 block",children:[" ",i]})]})}function oDe({data:t,files:e=[],checklistConfig:r}){const[n,i]=T.useState(new Set(VV.map(f=>f.id))),a=r||VV,o=(f,m)=>{const p=a.find(y=>y.id===f);return p&&p.items.find(y=>y.id===m)?.label||null},c={};for(const f of e){if(!f.category)continue;c[f.category]||(c[f.category]=[]);const m=o(f.category,f.file_type);c[f.category].push({id:f.file_type||f.id,label:m||f.file_type||"Uploaded file",url:f.drive_file_url||f.public_url,fileName:f.file_name,mimeType:f.mime_type})}const u=f=>{i(m=>{const p=new Set(m);return p.has(f)?p.delete(f):p.add(f),p})},l=f=>{if(c[f]?.length>0)return!0;const m=t?.[f];return m?Object.values(m).some(p=>p&&p!==""):!1},d=f=>{const m=t?.[f.id]||{},p=c[f.id]||[];let g=0,y=f.items.length;const x=new Set(p.map(w=>w.id));return f.items.forEach(w=>{if(w.type==="file")(x.has(w.id)||m[`${w.id}_url`])&&g++;else if(w.type==="contact")(m[`${w.id}_name`]||m[`${w.id}_phone`]||m[`${w.id}_email`])&&g++;else{const _=m[w.id];_&&_!==""&&g++}}),{completed:g,total:y}};return!t||Object.keys(t).length===0?s.jsx("div",{className:"text-center py-8 text-gray-500",children:s.jsx("p",{children:"No information collected yet"})}):s.jsx("div",{className:"space-y-4",children:a.map(f=>{const m=t[f.id]||{},p=n.has(f.id),g=l(f.id),y=d(f),x=c[f.id]||[],w=new Set(x.map(C=>C.id)),_=f.items.filter(C=>C.type==="file").filter(C=>!w.has(C.id)).map(C=>({...C,url:m[`${C.id}_url`]||m[C.id]})).filter(C=>C.url&&C.url.startsWith("http")),E=[...x,..._],N=f.items.filter(C=>C.type!=="file");return s.jsxs("div",{className:`border rounded-xl overflow-hidden transition-colors ${g?"border-gray-700 bg-gray-800/50":"border-gray-800 bg-gray-900/30"}`,children:[s.jsxs("button",{onClick:()=>u(f.id),className:"w-full flex items-center justify-between p-4 hover:bg-gray-700/30 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-2xl",children:f.icon}),s.jsxs("div",{className:"text-left",children:[s.jsx("h3",{className:"font-semibold text-white",children:f.category}),s.jsxs("p",{className:"text-xs text-gray-500",children:[y.completed,"/",y.total," items provided"]})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[y.completed===y.total?s.jsx("span",{className:"text-green-400 text-sm",children:" Complete"}):y.completed>0?s.jsxs("span",{className:"text-yellow-400 text-sm",children:[y.completed,"/",y.total]}):s.jsx("span",{className:"text-gray-500 text-sm",children:"Empty"}),p?s.jsx(Db,{size:20,className:"text-gray-400"}):s.jsx(F0,{size:20,className:"text-gray-400"})]})]}),p&&s.jsxs("div",{className:"border-t border-gray-700 p-4",children:[E.length>0&&s.jsxs("div",{className:"mb-6",children:[s.jsxs("h4",{className:"text-xs text-gray-500 uppercase mb-3",children:["Files (",E.length,")"]}),s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:E.map((C,I)=>s.jsx(iDe,{url:C.url,label:C.label||C.fileName||"Uploaded file"},C.id||I))})]}),N.length>0&&s.jsxs("div",{className:E.length>0?"mt-4 pt-4 border-t border-gray-700":"",children:[s.jsx("h4",{className:"text-xs text-gray-500 uppercase mb-3",children:"Details"}),s.jsx("div",{className:"space-y-4",children:N.map(C=>{const I=m[C.id],D=C.type==="contact"?m[`${C.id}_name`]||m[`${C.id}_phone`]||m[`${C.id}_email`]:I&&I!=="";return s.jsxs("div",{className:`${D?"":"opacity-50"}`,children:[s.jsx("label",{className:"text-sm text-gray-400 block mb-1",children:C.label}),C.type==="contact"?s.jsx(aDe,{data:m,itemId:C.id}):s.jsx(sDe,{value:I,isUrl:C.id.includes("website")||C.id.includes("facebook")||C.id.includes("instagram")})]},C.id)})})]}),Object.entries(m).filter(([C,I])=>C.endsWith("_links")&&Array.isArray(I)&&I.length>0).length>0&&s.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-700",children:[s.jsx("h4",{className:"text-xs text-gray-500 uppercase mb-3",children:"External Links"}),s.jsx("div",{className:"space-y-4",children:Object.entries(m).filter(([C,I])=>C.endsWith("_links")&&Array.isArray(I)&&I.length>0).map(([C,I])=>{const D=C.replace(/_links$/,""),G=f.items.find(q=>q.id===D)?.label||D.replace(/_/g," ").replace(/\b\w/g,q=>q.toUpperCase());return s.jsxs("div",{children:[s.jsxs("label",{className:"text-sm text-gray-400 block mb-1",children:[G," (external links)"]}),s.jsx("div",{className:"space-y-1",children:I.map((q,J)=>s.jsxs("a",{href:q,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 break-all flex items-center gap-2 p-2 bg-blue-500/10 rounded-lg text-sm",children:[s.jsx("span",{children:""}),s.jsxs("span",{className:"flex-1 truncate",children:[q.includes("drive.google")?"Google Drive":q.includes("dropbox")?"Dropbox":"External"," link"]}),s.jsx(Fb,{size:14})]},J))})]},C)})})]}),E.length===0&&N.every(C=>{const I=m[C.id];return C.type==="contact"?!(m[`${C.id}_name`]||m[`${C.id}_phone`]||m[`${C.id}_email`]):!I||I===""})&&s.jsx("p",{className:"text-gray-500 text-center py-4 italic",children:"No information provided for this category"})]})]},f.id)})})}function lDe(){const t=Fc(),[e,r]=T.useState([]),[n,i]=T.useState([]),[a,o]=T.useState(!0),[c,u]=T.useState(null),[l,d]=T.useState(null),[f,m]=T.useState([]),[p,g]=T.useState("all"),[y,x]=T.useState(""),[w,_]=T.useState(!1),[E,N]=T.useState(!1),[C,I]=T.useState(!1),[D,U]=T.useState(!1),[G,q]=T.useState({org_name:"",contact_name:"",contact_email:"",contact_phone:"",event_name:"",event_date:"",event_location:""});T.useEffect(()=>{J()},[]);const J=async()=>{try{const[ue,Pe]=await Promise.all([F3e(),JM()]);r(ue||[]),i(Pe||[])}catch(ue){u(ue.message)}finally{o(!1)}},de=async ue=>{ue.preventDefault(),U(!0);try{const Pe=await Yre(G);r(Re=>[Pe,...Re]),_(!1),q({org_name:"",contact_name:"",contact_email:"",contact_phone:"",event_name:"",event_date:"",event_location:""})}catch(Pe){alert("Error: "+Pe.message)}finally{U(!1)}},xe=async ue=>{try{await z3e(ue,"Brandon Hibbs"),await J(),d(null)}catch(Pe){alert("Error: "+Pe.message)}},we=async ue=>{if(confirm("Are you sure you want to delete this onboarding session? This cannot be undone."))try{await V3e(ue),r(Pe=>Pe.filter(Re=>Re.id!==ue)),d(null)}catch(Pe){alert("Error deleting session: "+Pe.message)}},ve=ue=>{r(Pe=>Pe.map(Re=>Re.id===l.id?{...Re,...ue}:Re)),d(Pe=>({...Pe,...ue})),I(!1)},ne=async ue=>{d(ue);try{const Pe=await W3e(ue.id);m(Pe||[])}catch(Pe){console.error("Error fetching files:",Pe),m([])}},ae=ue=>{const Pe={pending:"bg-yellow-500/20 text-yellow-400",in_progress:"bg-blue-500/20 text-blue-400",submitted:"bg-green-500/20 text-green-400",reviewed:"bg-purple-500/20 text-purple-400"},Re={pending:"Pending",in_progress:"In Progress",submitted:"Submitted",reviewed:"Reviewed"};return s.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${Pe[ue]||Pe.pending}`,children:Re[ue]||"Unknown"})},oe=ue=>{const Pe=ue.checklist_progress||{},Re=18,He=Object.values(Pe).filter(Fe=>Fe).length;return Math.round(He/Re*100)},Ie=e.filter(ue=>!(p!=="all"&&ue.status!==p||y&&!ue.org_name?.toLowerCase().includes(y.toLowerCase()))),Ce=ue=>`${window.location.origin}/#/onboarding/${ue}`,be=n.filter(ue=>ue.status==="signed");return a?s.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:s.jsx("div",{className:"animate-spin w-12 h-12 border-4 border-orange-500 border-t-transparent rounded-full"})}):s.jsxs("div",{className:"min-h-screen bg-gray-900 text-white",children:[s.jsx("div",{className:"bg-gray-800 border-b border-gray-700",children:s.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-4 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{onClick:()=>t("/portal/contracts"),className:"text-gray-400 hover:text-white",children:" Back"}),s.jsx("h1",{className:"text-xl font-bold",children:"Partner Onboarding"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>N(!0),className:"bg-gray-700 hover:bg-gray-600 text-white px-4 py-2 rounded-lg text-sm flex items-center gap-2",children:" From Contract"}),s.jsx("button",{onClick:()=>_(!0),className:"bg-orange-500 hover:bg-orange-600 text-white px-4 py-2 rounded-lg text-sm flex items-center gap-2",children:" New Session"})]})]})}),s.jsx("div",{className:"max-w-6xl mx-auto px-4 py-6",children:s.jsx("div",{className:"grid grid-cols-4 gap-4",children:[{label:"Total",value:e.length,color:"orange"},{label:"Pending",value:e.filter(ue=>ue.status==="pending").length,color:"yellow"},{label:"Submitted",value:e.filter(ue=>ue.status==="submitted").length,color:"green"},{label:"Reviewed",value:e.filter(ue=>ue.status==="reviewed").length,color:"purple"}].map((ue,Pe)=>s.jsxs("div",{className:"bg-gray-800 rounded-xl p-4 border border-gray-700",children:[s.jsx("div",{className:`text-3xl font-bold text-${ue.color}-500`,children:ue.value}),s.jsx("div",{className:"text-sm text-gray-500",children:ue.label})]},Pe))})}),s.jsx("div",{className:"max-w-6xl mx-auto px-4 mb-6",children:s.jsxs("div",{className:"flex gap-3",children:[s.jsx("input",{type:"text",placeholder:"Search organizations...",value:y,onChange:ue=>x(ue.target.value),className:"flex-1 max-w-xs px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:border-orange-500 focus:outline-none"}),s.jsxs("select",{value:p,onChange:ue=>g(ue.target.value),className:"px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:border-orange-500 focus:outline-none",children:[s.jsx("option",{value:"all",children:"All Status"}),s.jsx("option",{value:"pending",children:"Pending"}),s.jsx("option",{value:"in_progress",children:"In Progress"}),s.jsx("option",{value:"submitted",children:"Submitted"}),s.jsx("option",{value:"reviewed",children:"Reviewed"})]})]})}),s.jsx("div",{className:"max-w-6xl mx-auto px-4 pb-12",children:Ie.length===0?s.jsxs("div",{className:"bg-gray-800 rounded-xl p-12 text-center border border-gray-700",children:[s.jsx("div",{className:"text-4xl mb-4",children:""}),s.jsx("p",{className:"text-gray-400",children:"No onboarding sessions found"}),s.jsx("button",{onClick:()=>_(!0),className:"mt-4 bg-orange-500 hover:bg-orange-600 text-white px-6 py-2 rounded-lg text-sm",children:"Create First Session"})]}):s.jsx("div",{className:"space-y-3",children:Ie.map(ue=>s.jsx("div",{onClick:()=>ne(ue),className:"bg-gray-800 rounded-xl p-5 border border-gray-700 hover:border-gray-600 cursor-pointer transition-colors",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("h3",{className:"font-semibold text-lg",children:ue.org_name}),ae(ue.status)]}),s.jsxs("div",{className:"flex gap-4 text-sm text-gray-500",children:[ue.event_name&&s.jsxs("span",{children:[" ",ue.event_name]}),ue.contact_name&&s.jsxs("span",{children:[" ",ue.contact_name]}),ue.event_date&&s.jsxs("span",{children:[" ",new Date(ue.event_date).toLocaleDateString()]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"text-2xl font-bold text-orange-500",children:[oe(ue),"%"]}),s.jsx("div",{className:"text-xs text-gray-500",children:"Complete"})]})]})},ue.id))})}),l&&s.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:()=>d(null),children:s.jsxs("div",{className:"bg-gray-800 rounded-2xl max-w-3xl w-full max-h-[90vh] overflow-auto border border-gray-700",onClick:ue=>ue.stopPropagation(),children:[s.jsxs("div",{className:"p-6 border-b border-gray-700 flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold mb-2",children:l.org_name}),ae(l.status)]}),s.jsx("button",{onClick:()=>d(null),className:"text-gray-500 hover:text-white text-xl",children:""})]}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-xs text-gray-500 uppercase mb-2",children:"Event Details"}),s.jsxs("div",{className:"space-y-1 text-sm",children:[l.event_name&&s.jsxs("p",{children:[s.jsx("strong",{children:"Event:"})," ",l.event_name]}),l.event_date&&s.jsxs("p",{children:[s.jsx("strong",{children:"Date:"})," ",new Date(l.event_date).toLocaleDateString()]}),l.event_location&&s.jsxs("p",{children:[s.jsx("strong",{children:"Location:"})," ",l.event_location]})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-xs text-gray-500 uppercase mb-2",children:"Contact"}),s.jsxs("div",{className:"space-y-1 text-sm",children:[l.contact_name&&s.jsxs("p",{children:[s.jsx("strong",{children:"Name:"})," ",l.contact_name]}),l.contact_email&&s.jsxs("p",{children:[s.jsx("strong",{children:"Email:"})," ",s.jsx("a",{href:`mailto:${l.contact_email}`,className:"text-orange-500",children:l.contact_email})]}),l.contact_phone&&s.jsxs("p",{children:[s.jsx("strong",{children:"Phone:"})," ",s.jsx("a",{href:`tel:${l.contact_phone}`,className:"text-orange-500",children:l.contact_phone})]})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-xs text-gray-500 uppercase mb-2",children:"Progress"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"flex-1 h-2 bg-gray-700 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-orange-500",style:{width:`${oe(l)}%`}})}),s.jsxs("span",{className:"font-bold text-orange-500",children:[oe(l),"%"]})]})]}),l.collected_data&&Object.keys(l.collected_data).length>0||f.length>0?s.jsxs("div",{children:[s.jsx("h4",{className:"text-xs text-gray-500 uppercase mb-3",children:"Collected Information"}),s.jsx(oDe,{data:l.collected_data,files:f})]}):null,s.jsxs("div",{children:[s.jsx("h4",{className:"text-xs text-gray-500 uppercase mb-2",children:"Google Drive Status"}),l.drive_folder_id?s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-green-400",children:""}),s.jsx("span",{className:"text-sm",children:"Synced to Google Drive"})]}),(l.shared_with||[]).length>0&&s.jsxs("div",{className:"mt-2",children:[s.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Team access:"}),l.shared_with.map((ue,Pe)=>s.jsxs("span",{className:"text-xs text-gray-400",children:[ue.email,Pe<l.shared_with.length-1?", ":""]},Pe))]})]}):s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-yellow-400",children:""}),s.jsx("span",{className:"text-sm text-gray-400",children:"Pending sync (runs every 10 min)"})]})]}),s.jsxs("div",{className:"flex flex-wrap gap-2 pt-4 border-t border-gray-700",children:[s.jsx("button",{onClick:()=>I(!0),className:"bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg text-sm",children:" Edit Session"}),s.jsx("a",{href:Ce(l.share_token),target:"_blank",rel:"noopener noreferrer",className:"bg-gray-700 hover:bg-gray-600 text-white px-4 py-2 rounded-lg text-sm",children:" View Portal"}),s.jsx("button",{onClick:()=>{navigator.clipboard.writeText(Ce(l.share_token)),alert("Link copied!")},className:"bg-gray-700 hover:bg-gray-600 text-white px-4 py-2 rounded-lg text-sm",children:" Copy Link"}),l.drive_folder_id&&s.jsx("a",{href:l.drive_folder_url||`https://drive.google.com/drive/folders/${l.drive_folder_id}`,target:"_blank",rel:"noopener noreferrer",className:"bg-gray-700 hover:bg-gray-600 text-white px-4 py-2 rounded-lg text-sm",children:" View Drive Folder"}),l.status==="submitted"&&s.jsx("button",{onClick:()=>xe(l.id),className:"bg-green-600 hover:bg-green-500 text-white px-4 py-2 rounded-lg text-sm",children:" Mark Reviewed"}),s.jsx("button",{onClick:()=>we(l.id),className:"bg-red-600 hover:bg-red-500 text-white px-4 py-2 rounded-lg text-sm",children:" Delete"})]})]})]})}),w&&s.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:()=>_(!1),children:s.jsxs("div",{className:"bg-gray-800 rounded-2xl max-w-md w-full border border-gray-700",onClick:ue=>ue.stopPropagation(),children:[s.jsx("div",{className:"p-6 border-b border-gray-700",children:s.jsx("h2",{className:"text-lg font-bold",children:"Create Onboarding Session"})}),s.jsxs("form",{onSubmit:de,className:"p-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Organization Name *"}),s.jsx("input",{required:!0,value:G.org_name,onChange:ue=>q({...G,org_name:ue.target.value}),className:"w-full px-4 py-2 bg-gray-900 border border-gray-700 rounded-lg text-white focus:border-orange-500 focus:outline-none"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Contact Name"}),s.jsx("input",{value:G.contact_name,onChange:ue=>q({...G,contact_name:ue.target.value}),className:"w-full px-4 py-2 bg-gray-900 border border-gray-700 rounded-lg text-white focus:border-orange-500 focus:outline-none"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Contact Email"}),s.jsx("input",{type:"email",value:G.contact_email,onChange:ue=>q({...G,contact_email:ue.target.value}),className:"w-full px-4 py-2 bg-gray-900 border border-gray-700 rounded-lg text-white focus:border-orange-500 focus:outline-none"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Event Name"}),s.jsx("input",{value:G.event_name,onChange:ue=>q({...G,event_name:ue.target.value}),className:"w-full px-4 py-2 bg-gray-900 border border-gray-700 rounded-lg text-white focus:border-orange-500 focus:outline-none"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Event Date"}),s.jsx("input",{type:"date",value:G.event_date,onChange:ue=>q({...G,event_date:ue.target.value}),className:"w-full px-4 py-2 bg-gray-900 border border-gray-700 rounded-lg text-white focus:border-orange-500 focus:outline-none"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Location"}),s.jsx("input",{value:G.event_location,onChange:ue=>q({...G,event_location:ue.target.value}),className:"w-full px-4 py-2 bg-gray-900 border border-gray-700 rounded-lg text-white focus:border-orange-500 focus:outline-none"})]})]})]}),s.jsxs("div",{className:"flex gap-3 mt-6",children:[s.jsx("button",{type:"button",onClick:()=>_(!1),className:"flex-1 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:D,className:"flex-1 py-2 bg-orange-500 hover:bg-orange-600 rounded-lg disabled:opacity-50",children:D?"Creating...":"Create"})]})]})]})}),E&&s.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:()=>N(!1),children:s.jsxs("div",{className:"bg-gray-800 rounded-2xl max-w-md w-full border border-gray-700",onClick:ue=>ue.stopPropagation(),children:[s.jsx("div",{className:"p-6 border-b border-gray-700",children:s.jsx("h2",{className:"text-lg font-bold",children:"Create From Signed Contract"})}),s.jsxs("div",{className:"p-6",children:[be.length===0?s.jsx("p",{className:"text-gray-400 text-center py-8",children:"No signed contracts available"}):s.jsx("div",{className:"space-y-2 max-h-80 overflow-auto",children:be.map(ue=>{const Pe=e.some(Re=>Re.contract_id===ue.id);return s.jsxs("button",{onClick:()=>!Pe&&t(`/portal/onboarding/new?contractId=${ue.id}`),disabled:Pe,className:`w-full p-4 rounded-xl text-left transition-colors ${Pe?"bg-gray-700/50 cursor-not-allowed opacity-50":"bg-gray-700 hover:bg-gray-600"}`,children:[s.jsx("div",{className:"font-medium",children:ue.org_name}),s.jsx("div",{className:"text-sm text-gray-400",children:ue.promoter_name}),Pe&&s.jsx("div",{className:"text-xs text-orange-500 mt-1",children:"Session already exists"})]},ue.id)})}),s.jsx("button",{onClick:()=>N(!1),className:"w-full mt-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg",children:"Close"})]})]})}),C&&l&&s.jsx(tDe,{session:l,onClose:()=>I(!1),onSave:ve})]})}const uw=[{id:"branding",category:"Branding & Assets",icon:"",items:[{id:"logo",label:"High-resolution logo",type:"file",priority:"essential"},{id:"brand_kit",label:"Brand kit (colors, fonts, guidelines)",type:"file",priority:"important"},{id:"event_graphics",label:"Event-specific graphics/banners",type:"file",priority:"important"},{id:"sponsor_logos",label:"Sponsor logos for on-screen display",type:"file",priority:"nice"}]},{id:"athletes",category:"Athlete Information",icon:"",items:[{id:"registration_list",label:"Registration list (Name, Email, Phone, Instagram)",type:"file",priority:"essential"},{id:"notable_athletes",label:"Notable athletes to feature",type:"textarea",priority:"important"}]},{id:"venue",category:"Venue & Technical",icon:"",items:[{id:"floor_plan",label:"Venue floor plan (mat layout)",type:"file",priority:"essential"},{id:"internet_specs",label:"Internet specs (upload speed, hardwired access)",type:"textarea",priority:"essential"},{id:"power_locations",label:"Power outlet locations",type:"textarea",priority:"important"},{id:"load_in_time",label:"Load-in/crew access time",type:"text",priority:"important"},{id:"venue_contact",label:"Venue contact for event day",type:"contact",priority:"important"}]},{id:"event",category:"Event Operations",icon:"",items:[{id:"mat_count",label:"Number of mats running",type:"number",priority:"essential"},{id:"schedule",label:"Event schedule/run sheet",type:"file",priority:"essential"},{id:"bracket_system",label:"Bracket/scoring system used",type:"text",priority:"important"},{id:"match_comms_method",label:"How match order will be communicated",type:"textarea",priority:"important"}]},{id:"social",category:"Social & Promotion",icon:"",items:[{id:"org_instagram",label:"Organization Instagram",type:"text",priority:"important"},{id:"org_facebook",label:"Organization Facebook",type:"text",priority:"nice"},{id:"org_website",label:"Organization Website",type:"text",priority:"nice"},{id:"existing_content",label:"Existing footage/photos for promos",type:"file",priority:"nice"},{id:"existing_content_links",label:"Links to existing footage (Google Drive, Dropbox, etc.)",type:"textarea",priority:"nice"}]}];function cDe(){const t=Fc(),[e]=ky(),[r,n]=T.useState(1),[i,a]=T.useState([]),[o,c]=T.useState(null),[u,l]=T.useState(!0),[d,f]=T.useState(!1),[m]=T.useState(()=>e.get("contractId")),[p,g]=T.useState({orgName:"",contactName:"",email:"",phone:"",eventName:"",eventDate:"",eventLocation:"",contractId:"",orgInstagram:"",orgFacebook:"",orgWebsite:""}),[y,x]=T.useState(()=>{const rt={};return uw.forEach(Ct=>{rt[Ct.id]={},Ct.items.forEach(ke=>{rt[Ct.id][ke.id]={enabled:!0,priority:ke.priority,alreadyHave:!1,prefilledValue:""}})}),rt}),[w,_]=T.useState({}),[E,N]=T.useState({}),[C,I]=T.useState(null),[D,U]=T.useState(""),[G,q]=T.useState("text"),[J,de]=T.useState(null);T.useEffect(()=>{xe()},[]),T.useEffect(()=>{m&&i.length>0&&!o&&i.find(Ct=>Ct.id===m)&&we(m)},[i,m]);const xe=async()=>{try{const Ct=(await JM()).filter(ke=>ke.status==="signed");a(Ct)}catch(rt){console.error("Error loading contracts:",rt)}finally{l(!1)}},we=async rt=>{if(!rt){c(null),oe();return}const Ct=i.find(Jt=>Jt.id===rt);if(!Ct)return;c(Ct);const ke=Ct.contract_data||{};let Xe=null;try{Xe=await I3e(Ct.org_name)}catch(Jt){console.log("No CRM lead found:",Jt)}const mt=Xe?.contact||{};g({orgName:Ct.org_name||"",contactName:Ct.promoter_name||Ct.contact_name||"",email:Ct.promoter_email||Ct.contact_email||"",phone:Ct.promoter_phone||Ct.contact_phone||"",eventName:ke.event_name||"",eventDate:ke.event_date||"",eventLocation:ke.event_location||ke.venue||"",contractId:Ct.id,orgInstagram:ne(mt.instagram||ke.org_instagram||""),orgFacebook:ae(mt.facebook||ke.org_facebook||""),orgWebsite:mt.website||ke.org_website||""}),Ie("social","org_instagram",ne(mt.instagram||ke.org_instagram||"")),Ie("social","org_facebook",ae(mt.facebook||ke.org_facebook||"")),Ie("social","org_website",mt.website||ke.org_website||"")},ve=async rt=>{const Ct=rt.target.value;we(Ct)},ne=rt=>rt?rt.startsWith("@")?rt:`@${rt}`:"",ae=rt=>rt?rt.startsWith("http")?rt:`https://facebook.com/${rt.replace(/^@/,"").replace(/^\//,"")}`:"",oe=()=>{g({orgName:"",contactName:"",email:"",phone:"",eventName:"",eventDate:"",eventLocation:"",contractId:"",orgInstagram:"",orgFacebook:"",orgWebsite:""})},Ie=(rt,Ct,ke)=>{x(Xe=>({...Xe,[rt]:{...Xe[rt],[Ct]:{...Xe[rt][Ct],prefilledValue:ke}}}))},Ce=rt=>{const{name:Ct,value:ke}=rt.target;g(Xe=>({...Xe,[Ct]:ke})),w[Ct]&&_(Xe=>({...Xe,[Ct]:""}))},be=(rt,Ct)=>{x(ke=>({...ke,[rt]:{...ke[rt],[Ct]:{...ke[rt][Ct],enabled:!ke[rt][Ct].enabled}}}))},ue=(rt,Ct)=>{x(ke=>({...ke,[rt]:{...ke[rt],[Ct]:{...ke[rt][Ct],alreadyHave:!ke[rt][Ct].alreadyHave}}}))},Pe=(rt,Ct,ke)=>{x(Xe=>({...Xe,[rt]:{...Xe[rt],[Ct]:{...Xe[rt][Ct],priority:ke}}}))},Re=rt=>{if(!D.trim())return;const Ct=`custom_${Date.now()}`,ke={id:Ct,label:D.trim(),type:G,priority:"important",isCustom:!0};N(Xe=>({...Xe,[rt]:[...Xe[rt]||[],ke]})),x(Xe=>({...Xe,[rt]:{...Xe[rt],[Ct]:{enabled:!0,priority:"important",alreadyHave:!1,prefilledValue:"",isCustom:!0,label:D.trim(),type:G}}})),U(""),q("text"),I(null)},He=(rt,Ct)=>{N(ke=>({...ke,[rt]:(ke[rt]||[]).filter(Xe=>Xe.id!==Ct)})),x(ke=>{const Xe={...ke};return Xe[rt][Ct]?.isCustom?delete Xe[rt][Ct]:Xe[rt][Ct]={...Xe[rt][Ct],enabled:!1},Xe})},Fe=(rt,Ct,ke)=>{ke.trim()&&(N(Xe=>({...Xe,[rt]:(Xe[rt]||[]).map(mt=>mt.id===Ct?{...mt,label:ke.trim()}:mt)})),x(Xe=>({...Xe,[rt]:{...Xe[rt],[Ct]:{...Xe[rt][Ct],label:ke.trim()}}})),de(null))},ft=rt=>{const Ct=rt.items,ke=E[rt.id]||[];return[...Ct,...ke]},at=()=>{const rt={};return p.orgName.trim()||(rt.orgName="Organization name is required"),p.contactName.trim()||(rt.contactName="Contact name is required"),p.email.trim()?/\S+@\S+\.\S+/.test(p.email)||(rt.email="Email is invalid"):rt.email="Email is required",p.eventDate||(rt.eventDate="Event date is required"),_(rt),Object.keys(rt).length===0},De=()=>{r===1?at()&&n(2):r===2&&n(3)},ut=()=>{r>1?n(r-1):t("/portal/onboarding")},et=async()=>{f(!0);try{const rt={};uw.forEach(mt=>{mt.items.forEach(Jt=>{const tr=y[mt.id][Jt.id];tr.enabled&&tr.prefilledValue&&(rt[mt.id]||(rt[mt.id]={}),rt[mt.id][Jt.id]=tr.prefilledValue)})});const Ct={};Object.keys(y).forEach(mt=>{Ct[mt]={},Object.keys(y[mt]).forEach(Jt=>{const tr=y[mt][Jt];Ct[mt][Jt]={enabled:tr.enabled,priority:tr.priority,alreadyHave:tr.alreadyHave,...tr.isCustom?{isCustom:!0,label:tr.label,type:tr.type}:{}}})});const ke={org_name:p.orgName,contact_name:p.contactName,contact_email:p.email,contact_phone:p.phone,event_name:p.eventName,event_date:p.eventDate,event_location:p.eventLocation,contract_id:p.contractId||null,collected_data:rt,checklist_config:Ct},Xe=await Yre(ke);t(`/portal/onboarding/${Xe.id}`)}catch(rt){console.error("Error creating onboarding:",rt),alert("Failed to create onboarding session: "+rt.message)}finally{f(!1)}},jt=(()=>{let rt=0,Ct=0;return uw.forEach(ke=>{ft(ke).forEach(mt=>{Ct++,y[ke.id]?.[mt.id]?.enabled&&rt++})}),{enabled:rt,total:Ct}})();return u?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#0d0d1a] to-[#1a1a2e] flex items-center justify-center",children:s.jsx("div",{className:"animate-spin w-12 h-12 border-4 border-red-500 border-t-transparent rounded-full"})}):s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#0d0d1a] to-[#1a1a2e] py-8 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs("button",{onClick:ut,className:"flex items-center gap-2 text-gray-400 hover:text-white transition-colors mb-6",children:[s.jsx(tp,{size:20}),"Back"]}),s.jsx("div",{className:"mb-8",children:s.jsx("div",{className:"flex items-center justify-center gap-4",children:[{num:1,label:"Contract & Details"},{num:2,label:"Customize Checklist"},{num:3,label:"Preview & Confirm"}].map((rt,Ct)=>s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:`flex items-center gap-3 ${r>=rt.num?"opacity-100":"opacity-40"}`,children:[s.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold border-2 ${r>=rt.num?"bg-red-500 border-red-500 text-white":"bg-transparent border-gray-600 text-gray-600"}`,children:r>rt.num?s.jsx(la,{size:20}):rt.num}),s.jsx("div",{className:"hidden sm:block",children:s.jsx("div",{className:"text-sm font-medium text-white",children:rt.label})})]}),Ct<2&&s.jsx(U0,{size:20,className:r>rt.num?"text-red-500":"text-gray-600"})]},rt.num))})}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"lg:col-span-2",children:[s.jsxs(Dr.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"bg-gradient-to-br from-[#1a1a2e] to-[#16162a] border border-gray-800/50 rounded-xl p-6",children:[r===1&&s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx("div",{className:"w-12 h-12 bg-red-500/20 rounded-xl flex items-center justify-center",children:s.jsx(Ub,{className:"text-red-500",size:24})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-black text-white",children:"Contract & Details"}),s.jsx("p",{className:"text-gray-400",children:"Select contract or enter details manually"})]})]}),s.jsxs("div",{className:"space-y-5",children:[i.length>0&&s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-bold text-white mb-2",children:[s.jsx(nm,{className:"inline mr-2",size:16}),"Link to Existing Contract (Auto-fill)"]}),s.jsxs("select",{value:o?.id||"",onChange:ve,className:"w-full bg-gray-900/50 border border-gray-700 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-red-500 transition-colors",children:[s.jsx("option",{value:"",children:"Create from scratch"}),s.jsx("optgroup",{label:"Signed Contracts",children:i.map(rt=>s.jsxs("option",{value:rt.id,children:[rt.org_name," - ",rt.promoter_name||rt.contact_name]},rt.id))})]}),o&&s.jsxs("p",{className:"text-sm text-green-400 mt-2 flex items-center gap-2",children:[s.jsx(la,{size:16})," Contract data loaded! Review and edit below."]})]}),s.jsxs("div",{children:[s.jsxs("label",{htmlFor:"orgName",className:"block text-sm font-bold text-white mb-2",children:["Organization Name ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",id:"orgName",name:"orgName",value:p.orgName,onChange:Ce,placeholder:"e.g., Eternal MMA",className:`w-full bg-gray-900/50 border rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none transition-colors ${w.orgName?"border-red-500":"border-gray-700 focus:border-red-500"}`}),w.orgName&&s.jsx("p",{className:"text-red-400 text-sm mt-1",children:w.orgName})]}),s.jsxs("div",{children:[s.jsxs("label",{htmlFor:"contactName",className:"block text-sm font-bold text-white mb-2",children:["Contact Name ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",id:"contactName",name:"contactName",value:p.contactName,onChange:Ce,placeholder:"Primary contact person",className:`w-full bg-gray-900/50 border rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none transition-colors ${w.contactName?"border-red-500":"border-gray-700 focus:border-red-500"}`}),w.contactName&&s.jsx("p",{className:"text-red-400 text-sm mt-1",children:w.contactName})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{htmlFor:"email",className:"block text-sm font-bold text-white mb-2",children:["Email ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"email",id:"email",name:"email",value:p.email,onChange:Ce,placeholder:"contact@org.com",className:`w-full bg-gray-900/50 border rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none transition-colors ${w.email?"border-red-500":"border-gray-700 focus:border-red-500"}`}),w.email&&s.jsx("p",{className:"text-red-400 text-sm mt-1",children:w.email})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"phone",className:"block text-sm font-bold text-white mb-2",children:"Phone"}),s.jsx("input",{type:"tel",id:"phone",name:"phone",value:p.phone,onChange:Ce,placeholder:"0400 000 000",className:"w-full bg-gray-900/50 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-red-500 transition-colors"})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"eventName",className:"block text-sm font-bold text-white mb-2",children:"Event Name"}),s.jsx("input",{type:"text",id:"eventName",name:"eventName",value:p.eventName,onChange:Ce,placeholder:"e.g., Summer Showdown 2026",className:"w-full bg-gray-900/50 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-red-500 transition-colors"})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{htmlFor:"eventDate",className:"block text-sm font-bold text-white mb-2",children:["Event Date ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"date",id:"eventDate",name:"eventDate",value:p.eventDate,onChange:Ce,className:`w-full bg-gray-900/50 border rounded-lg px-4 py-3 text-white focus:outline-none transition-colors ${w.eventDate?"border-red-500":"border-gray-700 focus:border-red-500"}`}),w.eventDate&&s.jsx("p",{className:"text-red-400 text-sm mt-1",children:w.eventDate})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"eventLocation",className:"block text-sm font-bold text-white mb-2",children:"Event Location"}),s.jsx("input",{type:"text",id:"eventLocation",name:"eventLocation",value:p.eventLocation,onChange:Ce,placeholder:"e.g., Brisbane Convention Centre",className:"w-full bg-gray-900/50 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-red-500 transition-colors"})]})]})]})]}),r===2&&s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx("div",{className:"w-12 h-12 bg-red-500/20 rounded-xl flex items-center justify-center",children:s.jsx(Vhe,{className:"text-red-500",size:24})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-black text-white",children:"Customize Checklist"}),s.jsx("p",{className:"text-gray-400",children:"Toggle items, set priorities, mark what they already have"})]})]}),s.jsx("div",{className:"mb-6 bg-blue-500/10 border border-blue-500/30 rounded-lg p-4",children:s.jsxs("p",{className:"text-blue-200 text-sm flex items-start gap-2",children:[s.jsx($0,{size:18,className:"flex-shrink-0 mt-0.5"}),s.jsxs("span",{children:[s.jsx("strong",{children:"Disabled items won't show to the client."}),` Use "Already Have" to pre-check items they've provided. Change priorities to indicate urgency.`]})]})}),s.jsx("div",{className:"space-y-4 max-h-[600px] overflow-y-auto pr-2",children:uw.map(rt=>{const Ct=ft(rt),ke=Ct.filter(Xe=>y[rt.id]?.[Xe.id]?.enabled).length;return s.jsxs("div",{className:"bg-gray-900/50 rounded-lg border border-gray-700",children:[s.jsx("div",{className:"px-4 py-3 border-b border-gray-700 bg-gray-800/50",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-2xl",children:rt.icon}),s.jsx("h3",{className:"font-bold text-white",children:rt.category}),s.jsxs("span",{className:"text-sm text-gray-400 ml-auto",children:[ke,"/",Ct.length," enabled"]})]})}),s.jsxs("div",{className:"p-4 space-y-3",children:[Ct.map(Xe=>{const mt=y[rt.id]?.[Xe.id]||{enabled:!0,priority:Xe.priority},Jt=Xe.isCustom||mt.isCustom,tr=mt.label||Xe.label,lr=J?.categoryId===rt.id&&J?.itemId===Xe.id;return s.jsx("div",{className:`p-3 rounded-lg border transition-all ${mt.enabled?"bg-gray-800/50 border-gray-700":"bg-gray-900/30 border-gray-800 opacity-50"}`,children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("button",{onClick:()=>be(rt.id,Xe.id),className:`flex-shrink-0 w-6 h-6 rounded border-2 flex items-center justify-center transition-colors ${mt.enabled?"bg-red-500 border-red-500":"bg-transparent border-gray-600"}`,children:mt.enabled&&s.jsx(la,{size:16,className:"text-white"})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[lr?s.jsx("div",{className:"flex items-center gap-2 flex-1",children:s.jsx("input",{type:"text",defaultValue:tr,autoFocus:!0,onKeyDown:Pr=>{Pr.key==="Enter"?Fe(rt.id,Xe.id,Pr.target.value):Pr.key==="Escape"&&de(null)},onBlur:Pr=>Fe(rt.id,Xe.id,Pr.target.value),className:"flex-1 bg-gray-900 border border-red-500 rounded px-2 py-1 text-white text-sm focus:outline-none"})}):s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:`font-medium ${mt.enabled?"text-white":"text-gray-500"}`,children:tr}),Jt&&s.jsx("span",{className:"text-xs bg-purple-500/20 text-purple-400 px-2 py-0.5 rounded border border-purple-500/30",children:"Custom"}),Jt&&mt.enabled&&s.jsx("button",{onClick:()=>de({categoryId:rt.id,itemId:Xe.id,label:tr}),className:"text-gray-500 hover:text-white transition-colors",children:s.jsx(Ihe,{size:14})})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[mt.prefilledValue&&s.jsx("span",{className:"text-xs bg-green-500/20 text-green-400 px-2 py-1 rounded-full border border-green-500/30",children:"Pre-filled "}),s.jsx("button",{onClick:()=>He(rt.id,Xe.id),className:"text-gray-500 hover:text-red-400 transition-colors",title:Jt?"Remove field":"Disable field",children:s.jsx(Jp,{size:16})})]})]}),mt.enabled&&s.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[s.jsxs("select",{value:mt.priority||"important",onChange:Pr=>Pe(rt.id,Xe.id,Pr.target.value),className:"text-xs bg-gray-900 border border-gray-700 rounded px-2 py-1 text-white focus:outline-none focus:border-red-500",children:[s.jsx("option",{value:"essential",children:"Essential"}),s.jsx("option",{value:"important",children:"Important"}),s.jsx("option",{value:"nice",children:"Nice to have"})]}),s.jsx("button",{onClick:()=>ue(rt.id,Xe.id),className:`text-xs px-3 py-1 rounded border transition-colors ${mt.alreadyHave?"bg-green-500/20 text-green-400 border-green-500/30":"bg-gray-900 text-gray-400 border-gray-700"}`,children:mt.alreadyHave?" Already Have":'Mark as "Already Have"'}),s.jsxs("span",{className:"text-xs text-gray-500",children:["(",Xe.type||mt.type||"text",")"]})]})]})]})},Xe.id)}),C===rt.id?s.jsxs("div",{className:"p-3 rounded-lg border border-dashed border-green-500/50 bg-green-500/5",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("input",{type:"text",value:D,onChange:Xe=>U(Xe.target.value),placeholder:"Field label...",autoFocus:!0,onKeyDown:Xe=>{Xe.key==="Enter"&&Re(rt.id),Xe.key==="Escape"&&I(null)},className:"flex-1 bg-gray-900 border border-gray-700 rounded px-3 py-2 text-white text-sm placeholder-gray-500 focus:outline-none focus:border-green-500"}),s.jsxs("select",{value:G,onChange:Xe=>q(Xe.target.value),className:"bg-gray-900 border border-gray-700 rounded px-2 py-2 text-white text-sm focus:outline-none focus:border-green-500",children:[s.jsx("option",{value:"text",children:"Text"}),s.jsx("option",{value:"textarea",children:"Long Text"}),s.jsx("option",{value:"file",children:"File Upload"}),s.jsx("option",{value:"number",children:"Number"})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>Re(rt.id),disabled:!D.trim(),className:"flex-1 bg-green-600 hover:bg-green-500 disabled:bg-gray-700 text-white text-sm font-medium py-2 rounded transition-colors",children:"Add Field"}),s.jsx("button",{onClick:()=>{I(null),U(""),q("text")},className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white text-sm rounded transition-colors",children:"Cancel"})]})]}):s.jsxs("button",{onClick:()=>I(rt.id),className:"w-full p-3 rounded-lg border border-dashed border-gray-700 hover:border-green-500/50 hover:bg-green-500/5 text-gray-500 hover:text-green-400 transition-all flex items-center justify-center gap-2",children:[s.jsx(Nde,{size:18}),"Add Custom Field"]})]})]},rt.id)})})]}),r===3&&s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx("div",{className:"w-12 h-12 bg-red-500/20 rounded-xl flex items-center justify-center",children:s.jsx(H0,{className:"text-red-500",size:24})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-black text-white",children:"Review & Confirm"}),s.jsx("p",{className:"text-gray-400",children:"Everything looks good? Create the onboarding session!"})]})]}),s.jsxs("div",{className:"space-y-4 mb-6",children:[s.jsxs("div",{className:"bg-gray-900/50 rounded-lg p-4 border border-gray-700",children:[s.jsx("h3",{className:"font-bold text-white mb-3",children:"Organization Details"}),s.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Organization:"}),s.jsx("div",{className:"text-white font-medium",children:p.orgName})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Contact:"}),s.jsx("div",{className:"text-white font-medium",children:p.contactName})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Email:"}),s.jsx("div",{className:"text-white font-medium",children:p.email})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Phone:"}),s.jsx("div",{className:"text-white font-medium",children:p.phone||"Not provided"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Event:"}),s.jsx("div",{className:"text-white font-medium",children:p.eventName||"Not specified"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Date:"}),s.jsx("div",{className:"text-white font-medium",children:p.eventDate})]})]})]}),s.jsxs("div",{className:"bg-gray-900/50 rounded-lg p-4 border border-gray-700",children:[s.jsx("h3",{className:"font-bold text-white mb-3",children:"Checklist Configuration"}),s.jsxs("div",{className:"grid grid-cols-3 gap-3 text-center",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold text-green-500",children:jt.enabled}),s.jsx("div",{className:"text-xs text-gray-500",children:"Enabled Items"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold text-gray-500",children:jt.total-jt.enabled}),s.jsx("div",{className:"text-xs text-gray-500",children:"Disabled Items"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold text-blue-500",children:Object.keys(y).reduce((rt,Ct)=>rt+Object.keys(y[Ct]).filter(ke=>y[Ct][ke].prefilledValue).length,0)}),s.jsx("div",{className:"text-xs text-gray-500",children:"Pre-filled"})]})]})]})]}),jt.enabled<jt.total/2&&s.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-4 mb-6",children:s.jsxs("p",{className:"text-yellow-200 text-sm flex items-start gap-2",children:[s.jsx($0,{size:18,className:"flex-shrink-0 mt-0.5"}),s.jsx("span",{children:"You've disabled more than half the checklist items. Make sure this is intentional  clients need these details for quality coverage."})]})})]})]},r),s.jsxs("div",{className:"flex gap-3 mt-6",children:[s.jsx("button",{onClick:ut,className:"px-6 py-3 bg-gray-800 hover:bg-gray-700 text-white rounded-lg transition-all font-medium border border-gray-700",children:r===1?"Cancel":"Back"}),r<3?s.jsxs("button",{onClick:De,className:"flex-1 px-6 py-3 bg-gradient-to-r from-red-600 to-red-500 hover:from-red-500 hover:to-red-400 text-white font-bold rounded-lg transition-all shadow-lg shadow-red-500/20 flex items-center justify-center gap-2",children:["Next Step",s.jsx(U0,{size:20})]}):s.jsx("button",{onClick:et,disabled:d,className:"flex-1 px-6 py-3 bg-gradient-to-r from-green-600 to-green-500 hover:from-green-500 hover:to-green-400 disabled:from-gray-600 disabled:to-gray-500 text-white font-bold rounded-lg transition-all shadow-lg shadow-green-500/20 flex items-center justify-center gap-2",children:d?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin w-5 h-5 border-2 border-white border-t-transparent rounded-full"}),"Creating..."]}):s.jsxs(s.Fragment,{children:[s.jsx(jf,{size:20}),"Create Onboarding Session"]})})]})]}),s.jsx("div",{className:"lg:col-span-1",children:s.jsx("div",{className:"sticky top-6",children:s.jsxs("div",{className:"bg-gradient-to-br from-[#1a1a2e] to-[#16162a] border border-gray-800/50 rounded-xl p-5",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(H0,{size:20,className:"text-red-500"}),s.jsx("h3",{className:"font-bold text-white",children:"Client Preview"})]}),s.jsxs("p",{className:"text-xs text-gray-500 mb-4",children:["This is what ",p.orgName||"the client"," will see"]}),s.jsxs("div",{className:"bg-gray-900 rounded-lg border border-gray-800 overflow-hidden",children:[s.jsx("div",{className:"bg-gray-800 px-3 py-2 border-b border-gray-700",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-6 h-6 bg-red-500 rounded-lg"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs font-semibold text-white",children:"Fit Focus Media"}),s.jsx("div",{className:"text-[10px] text-gray-500",children:p.orgName||"Organization"})]})]})}),s.jsxs("div",{className:"p-4 space-y-3 max-h-[500px] overflow-y-auto",children:[s.jsxs("div",{className:"text-sm",children:[s.jsx("div",{className:"text-gray-500 text-xs mb-2",children:"Event Details"}),s.jsx("div",{className:"text-white font-medium",children:p.eventName||"Event Name"}),s.jsx("div",{className:"text-gray-400 text-xs",children:p.eventDate||"Date not set"})]}),s.jsxs("div",{className:"border-t border-gray-800 pt-3",children:[s.jsxs("div",{className:"text-xs text-gray-500 mb-2",children:["Checklist (",jt.enabled," items)"]}),uw.map(rt=>{const ke=ft(rt).filter(Xe=>y[rt.id]?.[Xe.id]?.enabled);return ke.length===0?null:s.jsxs("div",{className:"mb-3",children:[s.jsxs("div",{className:"text-xs font-medium text-white flex items-center gap-2 mb-1",children:[s.jsx("span",{children:rt.icon}),rt.category]}),s.jsx("div",{className:"space-y-1",children:ke.map(Xe=>{const mt=y[rt.id]?.[Xe.id]||{},Jt=mt.label||Xe.label;return s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[s.jsx("div",{className:`w-3 h-3 rounded border ${mt.alreadyHave?"bg-green-500 border-green-500":"border-gray-600"}`,children:mt.alreadyHave&&s.jsx(la,{size:10,className:"text-white"})}),s.jsxs("span",{className:`flex-1 ${mt.alreadyHave?"text-gray-500 line-through":"text-gray-400"}`,children:[Jt,(Xe.isCustom||mt.isCustom)&&s.jsx("span",{className:"text-purple-400 ml-1",children:"*"})]}),mt.prefilledValue&&s.jsx("span",{className:"text-green-400",children:""})]},Xe.id)})})]},rt.id)})]})]})]}),s.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-2 text-xs",children:[s.jsxs("div",{className:"bg-gray-900/50 rounded p-2 text-center border border-gray-800",children:[s.jsx("div",{className:"text-lg font-bold text-red-500",children:jt.enabled}),s.jsx("div",{className:"text-gray-500",children:"Items to collect"})]}),s.jsxs("div",{className:"bg-gray-900/50 rounded p-2 text-center border border-gray-800",children:[s.jsx("div",{className:"text-lg font-bold text-green-500",children:Object.keys(y).reduce((rt,Ct)=>rt+Object.keys(y[Ct]).filter(ke=>y[Ct][ke].prefilledValue||y[Ct][ke].alreadyHave).length,0)}),s.jsx("div",{className:"text-gray-500",children:"Pre-filled/Have"})]})]})]})})})]})]})})}const iF="ffm_onboarding_workflows";function uDe(t,e){if(t.completed)return"complete";if(t.inProgress)return"in-progress";const r=new Date;r.setHours(0,0,0,0);const n=new Date(e);return n.setHours(0,0,0,0),n<r?"overdue":"pending"}function sF(){const t=localStorage.getItem(iF);return t?JSON.parse(t):[]}function sne(t){return sF().find(r=>r.id===t)}function fI(t,e,r){const n=sF(),i=n.find(o=>o.id===t);return i?(i.steps[e]={...i.steps[e],...r},r.completed&&!i.steps[e].completedDate&&(i.steps[e].completedDate=new Date().toISOString().split("T")[0]),i.steps.every(o=>o.completed)&&i.status==="active"&&(i.status="completed"),localStorage.setItem(iF,JSON.stringify(n)),i):null}function dDe(t){const r=sF().filter(n=>n.id!==t);return localStorage.setItem(iF,JSON.stringify(r)),!0}function hDe(t){const e=sne(t);return e?`
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Onboarding Checklist - ${e.orgName}</title>
  <style>
    body { font-family: Arial, sans-serif; max-width: 800px; margin: 40px auto; padding: 20px; }
    h1 { color: #e51d1d; }
    .header { border-bottom: 2px solid #e51d1d; padding-bottom: 20px; margin-bottom: 30px; }
    .info { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin-bottom: 30px; }
    .phase { margin-bottom: 40px; }
    .phase-title { background: #f5f5f5; padding: 10px; font-weight: bold; margin-bottom: 15px; }
    .step { margin-bottom: 25px; padding-left: 30px; position: relative; }
    .step-number { position: absolute; left: 0; font-weight: bold; }
    .checkbox { display: inline-block; width: 18px; height: 18px; border: 2px solid #333; margin-right: 10px; }
    .subtasks { margin-top: 10px; padding-left: 20px; font-size: 0.9em; color: #666; }
    .subtasks li { margin-bottom: 5px; }
  </style>
</head>
<body>
  <div class="header">
    <h1>Client Onboarding Checklist</h1>
    <div class="info">
      <div><strong>Organization:</strong> ${e.orgName}</div>
      <div><strong>Contact:</strong> ${e.contactName}</div>
      <div><strong>Email:</strong> ${e.email}</div>
      <div><strong>Phone:</strong> ${e.phone}</div>
      <div><strong>Sport:</strong> ${e.sport}</div>
      <div><strong>First Event:</strong> ${e.firstEventDate}</div>
      <div><strong>Signing Date:</strong> ${e.signingDate}</div>
      <div><strong>Generated:</strong> ${new Date().toLocaleDateString()}</div>
    </div>
  </div>
  
  ${[1,2,3].map(n=>`
    <div class="phase">
      <div class="phase-title">
        ${n===1?"Phase 1: Welcome & Setup":n===2?"Phase 2: Pre-Event Prep":"Phase 3: Go-Live"}
      </div>
      ${e.steps.filter(i=>i.phase===n).map(i=>`
        <div class="step">
          <span class="step-number">${i.id}.</span>
          <div>
            <div><span class="checkbox"></span><strong>${i.title}</strong> (Due: ${i.dueDate})</div>
            <div style="color: #666; margin-top: 5px;">${i.description}</div>
            ${i.subTasks&&i.subTasks.length>0?`
              <ul class="subtasks">
                ${i.subTasks.map(a=>`<li>${a}</li>`).join("")}
              </ul>
            `:""}
          </div>
        </div>
      `).join("")}
    </div>
  `).join("")}
</body>
</html>
  `:null}function fDe(){const{id:t}=Kh(),e=Fc(),[r,n]=T.useState(null),[i,a]=T.useState(null),[o,c]=T.useState(!1);T.useEffect(()=>{u()},[t]);const u=()=>{const D=sne(t);D?n(D):e("/portal/onboarding")},l=D=>{const U=r.steps[D],G=fI(t,D,{completed:!U.completed,completedDate:U.completed?null:new Date().toISOString().split("T")[0]});n(G)},d=D=>{const U=r.steps[D],G=fI(t,D,{inProgress:!U.inProgress});n(G)},f=(D,U)=>{const G=fI(t,D,{notes:U});n(G)},m=()=>{dDe(t),e("/portal/onboarding")},p=()=>{const D=hDe(t),U=new Blob([D],{type:"text/html"}),G=URL.createObjectURL(U),q=document.createElement("a");q.href=G,q.download=`onboarding-${r.orgName.replace(/\s+/g,"-")}.html`,q.click(),URL.revokeObjectURL(G)},g=()=>{const D=r.steps.findIndex(U=>!U.completed);D!==-1&&(a(D),document.getElementById(`step-${D}`)?.scrollIntoView({behavior:"smooth",block:"center"}))};if(!r)return null;const y=r.steps.filter(D=>D.completed).length,x=r.steps.length,w=Math.round(y/x*100),_=D=>r.steps.filter(U=>U.phase===D),E=D=>{const U=_(D),G=U.filter(q=>q.completed).length;return{completed:G,total:U.length,percentage:Math.round(G/U.length*100)}},N={1:"Welcome & Setup",2:"Pre-Event Prep",3:"Go-Live"},C=D=>{switch(D){case"complete":return"text-green-400 bg-green-600/20 border-green-500/30";case"overdue":return"text-red-400 bg-red-600/20 border-red-500/30";case"in-progress":return"text-yellow-400 bg-yellow-600/20 border-yellow-500/30";default:return"text-gray-400 bg-gray-800/30 border-gray-700/30"}},I=D=>{switch(D){case"complete":return s.jsx(vb,{size:18,className:"text-green-400"});case"overdue":return s.jsx($0,{size:18,className:"text-red-400"});case"in-progress":return s.jsx(zh,{size:18,className:"text-yellow-400"});default:return s.jsx(I8,{size:18,className:"text-gray-400"})}};return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[#0d0d1a] to-[#1a1a2e]",children:[s.jsx("div",{className:"bg-gradient-to-r from-[#1a1a2e] to-[#16162a] border-b border-gray-800/50",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[s.jsxs("button",{onClick:()=>e("/portal/onboarding"),className:"flex items-center gap-2 text-gray-400 hover:text-white transition-colors mb-4",children:[s.jsx(tp,{size:20}),"Back to Dashboard"]}),s.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-black text-white mb-2",children:r.orgName}),s.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-400",children:[s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx(eg,{size:16}),r.contactName]}),s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx(tu,{size:16}),r.email]}),r.phone&&s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx(my,{size:16}),r.phone]}),s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx(ml,{size:16}),"Event: ",new Date(r.firstEventDate).toLocaleDateString("en-AU")]})]})]}),s.jsxs("div",{className:"flex flex-wrap gap-3",children:[s.jsxs(Dr.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:g,disabled:y===x,className:"px-4 py-2 bg-blue-600 hover:bg-blue-500 disabled:bg-gray-700 disabled:text-gray-500 text-white font-medium rounded-lg transition-all flex items-center gap-2",children:[s.jsx(zh,{size:18}),"Next Step"]}),s.jsxs(Dr.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:p,className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white font-medium rounded-lg transition-all flex items-center gap-2",children:[s.jsx(yf,{size:18}),"Export"]}),s.jsxs(Dr.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>c(!0),className:"px-4 py-2 bg-red-600/20 hover:bg-red-600/30 text-red-400 font-medium rounded-lg transition-all flex items-center gap-2 border border-red-500/30",children:[s.jsx(Jp,{size:18}),"Delete"]})]})]}),s.jsxs("div",{className:"mt-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("span",{className:"text-sm font-medium text-gray-400",children:["Overall Progress: ",y,"/",x," steps"]}),s.jsxs("span",{className:"text-lg font-bold text-white",children:[w,"%"]})]}),s.jsx("div",{className:"w-full bg-gray-800 rounded-full h-3 overflow-hidden",children:s.jsx(Dr.div,{initial:{width:0},animate:{width:`${w}%`},transition:{duration:.5},className:`h-full rounded-full ${w===100?"bg-gradient-to-r from-green-600 to-green-500":"bg-gradient-to-r from-red-600 to-red-500"}`})})]})]})}),s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsx("div",{className:"lg:col-span-1",children:s.jsxs("div",{className:"bg-gradient-to-br from-[#1a1a2e] to-[#16162a] border border-gray-800/50 rounded-xl p-6 sticky top-4",children:[s.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Client Information"}),s.jsxs("div",{className:"space-y-3 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500 block mb-1",children:"Organization"}),s.jsx("span",{className:"text-white font-medium",children:r.orgName})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500 block mb-1",children:"Contact"}),s.jsx("span",{className:"text-white font-medium",children:r.contactName})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500 block mb-1",children:"Email"}),s.jsx("span",{className:"text-white font-medium break-all",children:r.email})]}),r.phone&&s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500 block mb-1",children:"Phone"}),s.jsx("span",{className:"text-white font-medium",children:r.phone})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500 block mb-1",children:"Sport"}),s.jsx("span",{className:"text-white font-medium",children:r.sport})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500 block mb-1",children:"First Event Date"}),s.jsx("span",{className:"text-white font-medium",children:new Date(r.firstEventDate).toLocaleDateString("en-AU",{weekday:"short",year:"numeric",month:"short",day:"numeric"})})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500 block mb-1",children:"Signing Date"}),s.jsx("span",{className:"text-white font-medium",children:new Date(r.signingDate).toLocaleDateString("en-AU")})]}),r.contractId&&s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500 block mb-1",children:"Contract ID"}),s.jsx("span",{className:"text-white font-medium font-mono text-xs",children:r.contractId})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500 block mb-1",children:"Status"}),s.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-bold ${r.status==="completed"?"bg-green-600/20 text-green-400 border border-green-500/30":"bg-blue-600/20 text-blue-400 border border-blue-500/30"}`,children:r.status==="completed"?"Completed":"Active"})]})]})]})}),s.jsx("div",{className:"lg:col-span-2 space-y-6",children:[1,2,3].map(D=>{const U=E(D),G=_(D);return s.jsxs("div",{className:"bg-gradient-to-br from-[#1a1a2e] to-[#16162a] border border-gray-800/50 rounded-xl p-6",children:[s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("h2",{className:"text-xl font-bold text-white",children:["Phase ",D,": ",N[D]]}),s.jsxs("span",{className:"text-sm font-bold text-gray-400",children:[U.completed,"/",U.total]})]}),s.jsx("div",{className:"w-full bg-gray-800 rounded-full h-2 overflow-hidden",children:s.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${U.percentage===100?"bg-green-600":"bg-red-600"}`,style:{width:`${U.percentage}%`}})})]}),s.jsx("div",{className:"space-y-4",children:G.map((q,J)=>{const de=r.steps.findIndex(oe=>oe.id===q.id),xe=uDe(q,q.dueDate),we=i===de,ve=new Date(q.dueDate),ae=Math.ceil((ve-new Date)/(1e3*60*60*24));return s.jsxs("div",{id:`step-${de}`,className:`border rounded-lg transition-all ${q.completed?"border-green-500/30 bg-green-600/5":xe==="overdue"?"border-red-500/30 bg-red-600/5":"border-gray-700/50"}`,children:[s.jsx("div",{className:"p-4",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("button",{onClick:()=>l(de),className:"flex-shrink-0 mt-1",children:q.completed?s.jsx(vb,{size:24,className:"text-green-400"}):s.jsx(I8,{size:24,className:"text-gray-600 hover:text-gray-400 transition-colors"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-2 mb-2",children:[s.jsxs("h3",{className:`text-lg font-bold ${q.completed?"text-green-400 line-through":"text-white"}`,children:[q.id,". ",q.title]}),s.jsxs("div",{className:"flex items-center gap-2",children:[!q.completed&&s.jsx("button",{onClick:()=>d(de),className:`px-3 py-1 rounded-full text-xs font-bold transition-all ${q.inProgress?"bg-yellow-600/20 text-yellow-400 border border-yellow-500/30":"bg-gray-800 text-gray-500 border border-gray-700 hover:bg-gray-700"}`,children:q.inProgress?"In Progress":"Mark In Progress"}),s.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-bold border flex items-center gap-1 ${C(xe)}`,children:[I(xe),q.completed?"Complete":xe==="overdue"?`${Math.abs(ae)}d overdue`:xe==="in-progress"?"In Progress":ae===0?"Due today":ae===1?"Due tomorrow":`${ae}d remaining`]})]})]}),s.jsx("p",{className:"text-gray-400 text-sm mb-2",children:q.description}),s.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(ml,{size:14}),"Due: ",new Date(q.dueDate).toLocaleDateString("en-AU")]}),q.completedDate&&s.jsxs("span",{className:"flex items-center gap-1 text-green-400",children:[s.jsx(vb,{size:14}),"Completed: ",new Date(q.completedDate).toLocaleDateString("en-AU")]})]}),s.jsx("button",{onClick:()=>a(we?null:de),className:"mt-3 text-sm text-red-500 hover:text-red-400 font-medium flex items-center gap-1 transition-colors",children:we?s.jsxs(s.Fragment,{children:[s.jsx(Db,{size:16}),"Hide Details"]}):s.jsxs(s.Fragment,{children:[s.jsx(F0,{size:16}),"Show Details & Notes"]})})]})]})}),s.jsx(Gp,{children:we&&s.jsx(Dr.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden",children:s.jsxs("div",{className:"px-4 pb-4 pt-0 border-t border-gray-700/50 mt-4",children:[q.subTasks&&q.subTasks.length>0&&s.jsxs("div",{className:"mt-4",children:[s.jsx("h4",{className:"text-sm font-bold text-white mb-2",children:"Checklist:"}),s.jsx("ul",{className:"space-y-1.5",children:q.subTasks.map((oe,Ie)=>s.jsxs("li",{className:"text-sm text-gray-400 flex items-start gap-2",children:[s.jsx("span",{className:"text-red-500 mt-0.5",children:""}),s.jsx("span",{children:oe})]},Ie))})]}),q.emailTemplate&&s.jsxs("div",{className:"mt-4",children:[s.jsxs("h4",{className:"text-sm font-bold text-white mb-2 flex items-center gap-2",children:[s.jsx(Qb,{size:14}),"Email Template:"]}),s.jsx("div",{className:"bg-gray-900/50 rounded-lg p-4 border border-gray-800",children:s.jsx("pre",{className:"text-xs text-gray-300 whitespace-pre-wrap font-mono",children:q.emailTemplate.replace("[CLIENT_NAME]",r.contactName).replace("[ORG_NAME]",r.orgName)})})]}),s.jsxs("div",{className:"mt-4",children:[s.jsxs("label",{className:"text-sm font-bold text-white mb-2 block flex items-center gap-2",children:[s.jsx(Ub,{size:14}),"Notes:"]}),s.jsx("textarea",{value:q.notes,onChange:oe=>f(de,oe.target.value),placeholder:"Add notes, links, or details for this step...",className:"w-full bg-gray-900/50 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-red-500 transition-colors text-sm min-h-[100px] resize-y"})]})]})})})]},q.id)})})]},D)})})]})}),s.jsx(Gp,{children:o&&s.jsx(Dr.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50",onClick:()=>c(!1),children:s.jsxs(Dr.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:D=>D.stopPropagation(),className:"bg-gradient-to-br from-[#1a1a2e] to-[#16162a] border border-red-500/30 rounded-xl p-6 max-w-md w-full",children:[s.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Delete Onboarding?"}),s.jsxs("p",{className:"text-gray-400 mb-6",children:["Are you sure you want to delete the onboarding workflow for ",s.jsx("strong",{className:"text-white",children:r.orgName}),"? This action cannot be undone."]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:m,className:"flex-1 px-4 py-3 bg-red-600 hover:bg-red-500 text-white font-bold rounded-lg transition-all",children:"Yes, Delete"}),s.jsx("button",{onClick:()=>c(!1),className:"flex-1 px-4 py-3 bg-gray-700 hover:bg-gray-600 text-white font-bold rounded-lg transition-all",children:"Cancel"})]})]})})})]})}const mDe=".pdf,.doc,.docx,.xls,.xlsx,.csv,.zip",Jg=`image/*,video/*,${mDe},.svg,.ai,.eps`,KV=[{id:"branding",category:"Branding & Assets",icon:"",items:[{id:"logo",label:"High-resolution logo",type:"file",accept:Jg,priority:"essential"},{id:"brand_kit",label:"Brand kit (colors, fonts, guidelines)",type:"file",accept:Jg,priority:"important"},{id:"event_graphics",label:"Event-specific graphics/banners",type:"file",accept:Jg,priority:"important"},{id:"sponsor_logos",label:"Sponsor logos for on-screen display",type:"file",accept:Jg,priority:"nice"}]},{id:"athletes",category:"Athlete Information",icon:"",items:[{id:"registration_list",label:"Registration list (Name, Email, Phone, Instagram)",type:"file",accept:Jg,priority:"essential"},{id:"notable_athletes",label:"Notable athletes to feature",type:"textarea",placeholder:"Champions, rising stars, fan favorites...",priority:"important"}]},{id:"venue",category:"Venue & Technical",icon:"",items:[{id:"floor_plan",label:"Venue floor plan (mat layout)",type:"file",accept:Jg,priority:"essential"},{id:"internet_specs",label:"Internet specs (upload speed, hardwired access)",type:"textarea",placeholder:"e.g., 100Mbps up/down, ethernet available at...",priority:"essential"},{id:"power_locations",label:"Power outlet locations",type:"textarea",placeholder:"Describe where power is available...",priority:"important"},{id:"load_in_time",label:"Load-in/crew access time",type:"text",placeholder:"e.g., 6:00 AM",priority:"important"},{id:"venue_contact",label:"Venue contact for event day",type:"contact",priority:"important"}]},{id:"event",category:"Event Operations",icon:"",items:[{id:"mat_count",label:"Number of mats running",type:"number",placeholder:"e.g., 4",priority:"essential"},{id:"schedule",label:"Event schedule/run sheet",type:"file",accept:Jg,priority:"essential"},{id:"bracket_system",label:"Bracket/scoring system used",type:"text",placeholder:"e.g., Smoothcomp, FloArena...",priority:"important"},{id:"match_comms_method",label:"How match order will be communicated",type:"textarea",placeholder:"e.g., WhatsApp group, printed sheets...",priority:"important"}]},{id:"social",category:"Social & Promotion",icon:"",items:[{id:"org_instagram",label:"Organization Instagram",type:"text",placeholder:"@yourorg",priority:"important"},{id:"org_facebook",label:"Organization Facebook",type:"text",placeholder:"facebook.com/yourorg",priority:"nice"},{id:"org_website",label:"Organization Website",type:"text",placeholder:"https://...",priority:"nice"},{id:"existing_content",label:"Existing footage/photos for promos",type:"file",accept:Jg,priority:"nice"},{id:"existing_content_links",label:"Links to existing footage (Google Drive, Dropbox, etc.)",type:"textarea",placeholder:"Paste links to your existing footage, one per line...",priority:"nice"}]}],ADe=[{id:1,title:"Information Gathering",description:"Complete the checklist so we can prepare everything perfectly",duration:"Week 1-2"},{id:2,title:"Pre-Production",description:"We create custom graphics, overlays, and streaming layouts",duration:"Week 2-3"},{id:3,title:"Technical Setup",description:"Site visit (if needed), equipment prep, streaming tests",duration:"Week 3-4"},{id:4,title:"Athlete Outreach",description:"We contact athletes about media packages and content options",duration:"Week 3-4"},{id:5,title:"Event Day",description:"Our crew arrives, sets up, and delivers world-class coverage",duration:"Show Time!"}];function pDe(){const{token:t}=Kh(),[e,r]=T.useState(null),[n,i]=T.useState(!0),[a,o]=T.useState(null),[c,u]=T.useState(new Set(["branding"])),[l,d]=T.useState(!0),[f,m]=T.useState("checklist"),[p,g]=T.useState(!1),[y,x]=T.useState(!1),[w,_]=T.useState(null),[E,N]=T.useState(0),[C,I]=T.useState({}),[D,U]=T.useState({}),[G,q]=T.useState(!1),[J,de]=T.useState(null),[xe,we]=T.useState("");T.useEffect(()=>{if(!t){i(!1),o("No onboarding session found. Please use the link provided by Fit Focus Media.");return}ve()},[t]);const ve=async()=>{try{const De=await U3e(t);r(De),I(De.collected_data||{}),(De.status==="submitted"||De.status==="reviewed")&&(q(!0),d(!1))}catch(De){o(De.message)}finally{i(!1)}},ne=()=>e?.checklist_config?KV.map(De=>{const ut=e.checklist_config[De.id]||{};let et=De.items.filter(Ue=>ut[Ue.id]?.enabled!==!1).map(Ue=>{const jt=ut[Ue.id];return{...Ue,priority:jt?.priority||Ue.priority,alreadyHave:jt?.alreadyHave||!1}});return Object.entries(ut).forEach(([Ue,jt])=>{jt.isCustom&&jt.enabled!==!1&&(De.items.some(Ct=>Ct.id===Ue)||et.push({id:Ue,label:jt.label,type:jt.type,priority:jt.priority,isCustom:!0,alreadyHave:jt.alreadyHave||!1,accept:jt.type==="file"?"image/*,video/*,.pdf,.doc,.docx,.xls,.xlsx,.csv,.zip,.svg,.ai,.eps":void 0,placeholder:jt.placeholder||""}))}),{...De,items:et}}).filter(De=>De.items.length>0):KV,ae=ne(),oe=T.useCallback(async De=>{if(!(!e||!t)){g(!0);try{await H3e(t,{collected_data:De,checklist_progress:Ie(De)})}catch(ut){console.error("Save error:",ut)}finally{g(!1)}}},[e,t]),Ie=De=>{const ut={};return ne().forEach(Ue=>{Ue.items.forEach(jt=>{const rt=De[Ue.id]||{},Ct=rt[jt.id]||rt[`${jt.id}_url`];ut[`${Ue.id}.${jt.id}`]=!!Ct&&Ct!==""})}),ut},Ce=(De,ut,et)=>{const Ue={...C,[De]:{...C[De]||{},[ut]:et}};I(Ue),clearTimeout(window.saveTimeout),window.saveTimeout=setTimeout(()=>oe(Ue),1e3)},be=20*1024*1024,ue=async(De,ut,et)=>{if(!(!et||et.length===0||!e)){for(const Ue of et)if(Ue.size>be){const jt=(Ue.size/1048576).toFixed(1);de({fileName:Ue.name,sizeMB:jt,categoryId:De,itemId:ut}),we("");return}_(`${De}.${ut}`),N(0);try{for(const Ue of et){const jt=setInterval(()=>{N(ke=>ke>=90?ke:ke+Math.random()*15)},200),rt=await K3e(e.id,De,ut,Ue);clearInterval(jt),N(100),U(ke=>({...ke,[`${De}.${ut}`]:[...ke[`${De}.${ut}`]||[],{name:Ue.name,url:rt.url,id:rt.file.id}]}));const Ct={...C,[De]:{...C[De]||{},[`${ut}_url`]:rt.url}};I(Ct),oe(Ct)}}catch(Ue){console.error("Upload error:",Ue),de({fileName:"Upload",sizeMB:null,error:Ue.message})}finally{setTimeout(()=>{_(null),N(0)},500)}}},Pe=async()=>{if(!(!e||!t||y)){x(!0);try{await Q3e(t),q(!0),m("checklist")}catch(De){console.error("Submit error:",De),alert("Submission failed: "+De.message)}finally{x(!1)}}},Re=()=>{if(!xe.trim()||!J)return;const{categoryId:De,itemId:ut}=J,et=`${ut}_links`,Ue=C[De]?.[et]||[],jt=xe.trim(),rt=Ue.includes(jt)?Ue:[...Ue,jt],Ct={...C,[De]:{...C[De]||{},[et]:rt}};I(Ct),oe(Ct),de(null),we("")},Fe=(()=>{let De=0,ut=0;return ae.forEach(et=>{et.items.forEach(Ue=>{ut++;const jt=C[et.id]||{},rt=jt[Ue.id]||jt[`${Ue.id}_url`];rt&&rt!==""&&De++})}),{completed:De,total:ut,percent:Math.round(De/ut*100)}})(),ft=De=>{u(ut=>{const et=new Set(ut);return et.has(De)?et.delete(De):et.add(De),et})},at=De=>{const ut={essential:"bg-red-500/20 text-red-400",important:"bg-yellow-500/20 text-yellow-400",nice:"bg-green-500/20 text-green-400"},et={essential:"Essential",important:"Important",nice:"Nice to have"};return s.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${ut[De]}`,children:et[De]})};return n?s.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin w-12 h-12 border-4 border-orange-500 border-t-transparent rounded-full mx-auto mb-4"}),s.jsx("p",{className:"text-gray-400",children:"Loading your onboarding portal..."})]})}):a&&!e?s.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-gray-800 rounded-2xl p-8 max-w-md text-center border border-gray-700",children:[s.jsx("div",{className:"text-red-500 text-4xl mb-4",children:""}),s.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Session Not Found"}),s.jsx("p",{className:"text-gray-400",children:a})]})}):s.jsxs("div",{className:"min-h-screen bg-gray-900",children:[J&&s.jsx("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:s.jsx("div",{className:"bg-gray-800 rounded-2xl p-6 max-w-md w-full border border-gray-700 shadow-xl",children:J.error?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-16 h-16 bg-red-500/20 rounded-2xl flex items-center justify-center mx-auto mb-4",children:s.jsx("span",{className:"text-3xl",children:""})}),s.jsx("h3",{className:"text-xl font-bold text-white text-center mb-2",children:"Upload Failed"}),s.jsx("p",{className:"text-gray-400 text-center mb-6",children:J.error}),s.jsx("button",{onClick:()=>de(null),className:"w-full bg-gray-700 hover:bg-gray-600 text-white font-semibold py-3 rounded-xl transition-colors",children:"Close"})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-16 h-16 bg-orange-500/20 rounded-2xl flex items-center justify-center mx-auto mb-4",children:s.jsx("span",{className:"text-3xl",children:""})}),s.jsx("h3",{className:"text-xl font-bold text-white text-center mb-2",children:"File Too Large"}),s.jsxs("p",{className:"text-gray-400 text-center mb-4",children:[s.jsxs("span",{className:"text-white font-medium",children:['"',J.fileName,'"']})," is ",J.sizeMB,"MB  our upload limit is 20MB."]}),s.jsxs("div",{className:"bg-gray-900 rounded-xl p-4 mb-4",children:[s.jsx("p",{className:"text-orange-500 font-medium mb-3",children:" Paste a share link instead:"}),s.jsx("input",{type:"url",value:xe,onChange:De=>we(De.target.value),placeholder:"https://drive.google.com/... or Dropbox link",className:"w-full p-3 bg-gray-800 border border-gray-600 rounded-xl text-white placeholder-gray-500 focus:border-orange-500 focus:outline-none mb-3"}),s.jsx("p",{className:"text-gray-500 text-xs",children:"Upload to Google Drive or Dropbox, then paste the share link above"})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>{de(null),we("")},className:"flex-1 bg-gray-700 hover:bg-gray-600 text-white font-semibold py-3 rounded-xl transition-colors",children:"Cancel"}),s.jsx("button",{onClick:Re,disabled:!xe.trim(),className:"flex-1 bg-orange-500 hover:bg-orange-600 disabled:bg-gray-700 disabled:cursor-not-allowed text-white font-semibold py-3 rounded-xl transition-colors",children:"Save Link "})]})]})})}),l&&e&&s.jsx("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-gray-800 rounded-2xl p-8 max-w-md text-center border border-orange-500/30 shadow-xl shadow-orange-500/10",children:[s.jsx("div",{className:"w-20 h-20 bg-orange-500/20 rounded-2xl flex items-center justify-center mx-auto mb-6",children:s.jsx("span",{className:"text-4xl",children:""})}),s.jsxs("h1",{className:"text-2xl font-bold text-white mb-2",children:["Welcome, ",e.org_name,"! "]}),s.jsx("p",{className:"text-orange-500 font-medium mb-4",children:e.event_name}),s.jsx("p",{className:"text-gray-400 mb-6",children:"We're thrilled to partner with you! This portal will guide you through everything we need to deliver world-class coverage."}),s.jsx("button",{onClick:()=>d(!1),className:"bg-orange-500 hover:bg-orange-600 text-white font-semibold px-8 py-3 rounded-full transition-colors flex items-center gap-2 mx-auto",children:"Let's Get Started "})]})}),s.jsx("header",{className:"sticky top-0 z-40 bg-gray-900/95 backdrop-blur-lg border-b border-gray-800",children:s.jsxs("div",{className:"max-w-3xl mx-auto px-4 h-16 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("img",{src:"/ffm-logo.jpg",alt:"Fit Focus Media",className:"w-10 h-10 rounded-xl object-cover"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-white",children:"Fit Focus Media"}),s.jsx("div",{className:"text-xs text-gray-500",children:e?.org_name||"Partner Onboarding"})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[p&&s.jsx("span",{className:"text-orange-500 text-sm animate-pulse",children:"Saving..."}),s.jsxs("div",{className:"bg-orange-500/20 text-orange-500 px-3 py-1 rounded-full text-sm font-semibold",children:[Fe.percent,"% Complete"]})]})]})}),s.jsx("div",{className:"bg-gray-800/50",children:s.jsx("div",{className:"max-w-3xl mx-auto px-4",children:s.jsx("div",{className:"h-1 bg-gray-700 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-gradient-to-r from-orange-500 to-orange-400 transition-all duration-500",style:{width:`${Fe.percent}%`}})})})}),s.jsx("div",{className:"border-b border-gray-800",children:s.jsx("div",{className:"max-w-3xl mx-auto px-4",children:s.jsx("div",{className:"flex gap-1",children:[{id:"checklist",label:"What We Need",icon:""},{id:"timeline",label:"What's Next",icon:""},{id:"contact",label:"Get In Touch",icon:""}].map(De=>s.jsxs("button",{onClick:()=>m(De.id),className:`flex items-center gap-2 px-4 py-3 font-medium transition-colors border-b-2 ${f===De.id?"border-orange-500 text-white":"border-transparent text-gray-500 hover:text-white"}`,children:[s.jsx("span",{children:De.icon})," ",De.label]},De.id))})})}),s.jsxs("main",{className:"max-w-3xl mx-auto px-4 py-8",children:[f==="checklist"&&s.jsxs("div",{children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Information Checklist"}),s.jsx("p",{className:"text-gray-400",children:"Upload files and provide details for the best coverage"})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-8",children:[s.jsxs("div",{className:"bg-gray-800 rounded-xl p-4 text-center border border-gray-700",children:[s.jsx("div",{className:"text-2xl font-bold text-orange-500",children:Fe.completed}),s.jsx("div",{className:"text-xs text-gray-500",children:"Completed"})]}),s.jsxs("div",{className:"bg-gray-800 rounded-xl p-4 text-center border border-gray-700",children:[s.jsx("div",{className:"text-2xl font-bold text-yellow-500",children:Fe.total-Fe.completed}),s.jsx("div",{className:"text-xs text-gray-500",children:"Remaining"})]}),s.jsxs("div",{className:"bg-gray-800 rounded-xl p-4 text-center border border-gray-700",children:[s.jsx("div",{className:"text-2xl font-bold text-green-500",children:Fe.total}),s.jsx("div",{className:"text-xs text-gray-500",children:"Total"})]})]}),s.jsx("div",{className:"space-y-3",children:ae.map(De=>{const ut=C[De.id]||{},et=De.items.filter(jt=>{const rt=ut[jt.id]||ut[`${jt.id}_url`];return rt&&rt!==""}).length,Ue=c.has(De.id);return s.jsxs("div",{className:"bg-gray-800 rounded-xl border border-gray-700 overflow-hidden",children:[s.jsxs("button",{onClick:()=>ft(De.id),className:"w-full flex items-center justify-between p-4 hover:bg-gray-700/50 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-orange-500/20 rounded-xl flex items-center justify-center text-xl",children:De.icon}),s.jsxs("div",{className:"text-left",children:[s.jsx("div",{className:"font-semibold text-white",children:De.category}),s.jsxs("div",{className:"text-sm text-gray-500",children:[et,"/",De.items.length," completed"]})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-20 h-1.5 bg-gray-700 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-orange-500 transition-all duration-300",style:{width:`${et/De.items.length*100}%`}})}),s.jsx("span",{className:`text-gray-400 transition-transform ${Ue?"rotate-180":""}`,children:""})]})]}),Ue&&s.jsx("div",{className:"border-t border-gray-700 p-4 space-y-4",children:De.items.map(jt=>{const rt=ut[jt.id]||ut[`${jt.id}_url`]||"",Ct=rt!=="",ke=w===`${De.id}.${jt.id}`,Xe=D[`${De.id}.${jt.id}`]||[],Jt=e?.checklist_config?.[De.id]?.[jt.id]?.alreadyHave||!1;return s.jsxs("div",{className:`p-4 rounded-xl border ${Ct?"bg-orange-500/5 border-orange-500/30":"bg-gray-900/50 border-gray-700"}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center text-xs ${Ct||Jt?"bg-orange-500 border-orange-500 text-white":"border-gray-600"}`,children:(Ct||Jt)&&""}),s.jsx("span",{className:"font-medium text-white",children:jt.label}),Jt&&!Ct&&s.jsx("span",{className:"text-xs bg-blue-500/20 text-blue-400 px-2 py-0.5 rounded-full border border-blue-500/30",children:"Already Provided"})]}),at(jt.priority)]}),jt.type==="file"&&s.jsxs("div",{children:[ke?s.jsxs("div",{className:"p-4 border-2 border-orange-500/50 rounded-xl bg-orange-500/5",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[s.jsx("div",{className:"animate-spin text-orange-500",children:""}),s.jsxs("span",{className:"text-white font-medium",children:["Uploading... ",Math.round(E),"%"]})]}),s.jsx("div",{className:"h-2 bg-gray-700 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-gradient-to-r from-orange-500 to-orange-400 transition-all duration-300 ease-out",style:{width:`${E}%`}})})]}):s.jsxs("label",{className:"flex items-center justify-center gap-2 p-4 border-2 border-dashed border-gray-600 rounded-xl cursor-pointer hover:border-orange-500/50 transition-colors",children:[s.jsx("span",{className:"text-orange-500",children:""}),s.jsx("span",{className:"text-gray-400",children:"Click to upload"}),s.jsx("input",{type:"file",accept:jt.accept,onChange:tr=>ue(De.id,jt.id,tr.target.files),className:"hidden"})]}),(Xe.length>0||rt)&&s.jsxs("div",{className:"mt-2 space-y-1",children:[Xe.map((tr,lr)=>s.jsxs("div",{className:"flex items-center gap-2 p-2 bg-orange-500/10 rounded-lg text-sm",children:[s.jsx("span",{className:"text-orange-500",children:""}),s.jsx("span",{className:"flex-1 text-white truncate",children:tr.name}),s.jsx("a",{href:tr.url,target:"_blank",rel:"noopener noreferrer",className:"text-orange-500 hover:underline",children:"View"})]},lr)),rt&&Xe.length===0&&s.jsxs("div",{className:"flex items-center gap-2 p-2 bg-orange-500/10 rounded-lg text-sm",children:[s.jsx("span",{className:"text-orange-500",children:""}),s.jsx("span",{className:"text-white",children:"File uploaded"}),s.jsx("a",{href:rt,target:"_blank",rel:"noopener noreferrer",className:"text-orange-500 hover:underline ml-auto",children:"View"})]})]}),ut[`${jt.id}_links`]?.length>0&&s.jsx("div",{className:"mt-2 space-y-1",children:ut[`${jt.id}_links`].map((tr,lr)=>s.jsxs("div",{className:"flex items-center gap-2 p-2 bg-blue-500/10 rounded-lg text-sm",children:[s.jsx("span",{className:"text-blue-400",children:""}),s.jsxs("span",{className:"flex-1 text-white truncate",children:[tr.includes("drive.google")?"Google Drive":tr.includes("dropbox")?"Dropbox":"External"," link"]}),s.jsx("a",{href:tr,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:underline",children:"Open"})]},`link-${lr}`))})]}),jt.type==="text"&&s.jsx("input",{type:"text",value:rt,onChange:tr=>Ce(De.id,jt.id,tr.target.value),placeholder:jt.placeholder,className:"w-full p-3 bg-gray-900 border border-gray-700 rounded-xl text-white placeholder-gray-500 focus:border-orange-500 focus:outline-none"}),jt.type==="number"&&s.jsx("input",{type:"number",value:rt,onChange:tr=>Ce(De.id,jt.id,tr.target.value),placeholder:jt.placeholder,className:"w-full p-3 bg-gray-900 border border-gray-700 rounded-xl text-white placeholder-gray-500 focus:border-orange-500 focus:outline-none"}),jt.type==="textarea"&&s.jsx("textarea",{value:rt,onChange:tr=>Ce(De.id,jt.id,tr.target.value),placeholder:jt.placeholder,rows:3,className:"w-full p-3 bg-gray-900 border border-gray-700 rounded-xl text-white placeholder-gray-500 focus:border-orange-500 focus:outline-none resize-none"}),jt.type==="contact"&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("input",{type:"text",value:ut[`${jt.id}_name`]||"",onChange:tr=>Ce(De.id,`${jt.id}_name`,tr.target.value),placeholder:"Contact name",className:"w-full p-3 bg-gray-900 border border-gray-700 rounded-xl text-white placeholder-gray-500 focus:border-orange-500 focus:outline-none"}),s.jsx("input",{type:"tel",value:ut[`${jt.id}_phone`]||"",onChange:tr=>Ce(De.id,`${jt.id}_phone`,tr.target.value),placeholder:"Phone number",className:"w-full p-3 bg-gray-900 border border-gray-700 rounded-xl text-white placeholder-gray-500 focus:border-orange-500 focus:outline-none"}),s.jsx("input",{type:"email",value:ut[`${jt.id}_email`]||"",onChange:tr=>Ce(De.id,`${jt.id}_email`,tr.target.value),placeholder:"Email address",className:"w-full p-3 bg-gray-900 border border-gray-700 rounded-xl text-white placeholder-gray-500 focus:border-orange-500 focus:outline-none"})]})]},jt.id)})})]},De.id)})}),s.jsxs("div",{className:"mt-8 text-center",children:[G&&s.jsx("div",{className:"mb-4 p-4 bg-green-500/20 border border-green-500/30 rounded-xl inline-block",children:s.jsx("p",{className:"text-green-400 font-medium",children:" Already submitted  you can still make changes below"})}),s.jsx("button",{onClick:Pe,disabled:Fe.completed===0||y,className:"bg-orange-500 hover:bg-orange-600 disabled:bg-gray-700 disabled:cursor-not-allowed text-white font-semibold px-8 py-4 rounded-full transition-all inline-flex items-center gap-2",children:y?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"animate-spin",children:""})," Submitting..."]}):s.jsxs(s.Fragment,{children:[s.jsx("span",{children:""})," ",G?"Update Submission":"Submit Onboarding Information"]})}),s.jsxs("p",{className:"text-gray-500 text-sm mt-3 flex items-center justify-center gap-2",children:[p&&s.jsx("span",{className:"text-orange-500 animate-pulse",children:" Saving..."}),!p&&(G?"Changes are auto-saved  click to notify us of updates":"You can submit anytime  we'll reach out if we need anything else")]})]})]}),f==="timeline"&&s.jsxs("div",{children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"What Happens Next"}),s.jsx("p",{className:"text-gray-400",children:"Here's our process from signup to showtime"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute left-8 top-0 bottom-0 w-0.5 bg-gradient-to-b from-orange-500 to-orange-500/20"}),s.jsx("div",{className:"space-y-6",children:ADe.map(De=>s.jsxs("div",{className:"flex gap-6",children:[s.jsx("div",{className:"w-16 h-16 bg-gray-800 rounded-2xl border-2 border-orange-500 flex items-center justify-center text-orange-500 text-2xl font-bold relative z-10",children:De.id}),s.jsxs("div",{className:"flex-1 bg-gray-800 rounded-xl p-5 border border-gray-700",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("h3",{className:"font-semibold text-white",children:De.title}),s.jsx("span",{className:"text-xs bg-orange-500/20 text-orange-500 px-2 py-1 rounded-full",children:De.duration})]}),s.jsx("p",{className:"text-gray-400 text-sm",children:De.description})]})]},De.id))})]})]}),f==="contact"&&s.jsxs("div",{children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Get In Touch"}),s.jsx("p",{className:"text-gray-400",children:"Have questions? We're here to help"})]}),s.jsxs("div",{className:"bg-gray-800 rounded-xl p-6 border border-gray-700",children:[s.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[s.jsx("div",{className:"w-16 h-16 bg-orange-500/20 rounded-2xl flex items-center justify-center text-3xl",children:""}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-white text-lg",children:"Brandon Hibbs"}),s.jsx("p",{className:"text-gray-400",children:"Founder, Fit Focus Media"})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("a",{href:"mailto:brandon@fitfocusmedia.com.au",className:"flex items-center gap-3 p-4 bg-gray-900 rounded-xl hover:bg-gray-700 transition-colors",children:[s.jsx("span",{className:"text-orange-500",children:""}),s.jsx("span",{className:"text-white",children:"brandon@fitfocusmedia.com.au"})]}),s.jsxs("a",{href:"tel:0411934935",className:"flex items-center gap-3 p-4 bg-gray-900 rounded-xl hover:bg-gray-700 transition-colors",children:[s.jsx("span",{className:"text-orange-500",children:""}),s.jsx("span",{className:"text-white",children:"0411 934 935"})]}),s.jsxs("a",{href:"https://instagram.com/fitfocusmedia",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 p-4 bg-gray-900 rounded-xl hover:bg-gray-700 transition-colors",children:[s.jsx("span",{className:"text-orange-500",children:""}),s.jsx("span",{className:"text-white",children:"@fitfocusmedia"})]})]})]})]})]}),s.jsxs("footer",{className:"border-t border-gray-800 py-6 text-center",children:[s.jsx("p",{className:"text-gray-600 text-sm",children:" 2026 Fit Focus Media. All rights reserved."}),s.jsx("p",{className:"text-gray-700 text-xs mt-1",children:"Delivering world-class event coverage across Australia "})]})]})}const gDe=[{id:"event-wng3-2024",name:"WNG 3  Who's Next Grappling",date:"2024-03-15",venue:"Brisbane Convention Centre",org_name:"Who's Next",created_at:"2024-03-01T10:00:00Z"},{id:"event-afn8-2024",name:"Aggression Fight Night 8",date:"2024-02-10",venue:"The Fortitude Music Hall",org_name:"Aggression",created_at:"2024-02-01T10:00:00Z"}],vDe=[{id:"athlete-jsmith-001",name:"Jake Smith",email:"jake.smith@example.com",sport:"Brazilian Jiu-Jitsu",gym:"Gracie Brisbane",created_at:"2024-01-15T08:00:00Z"},{id:"athlete-mchen-002",name:"Michelle Chen",email:"michelle.chen@example.com",sport:"MMA",gym:"Integrated MMA",created_at:"2024-01-20T09:00:00Z"},{id:"athlete-rjones-003",name:"Ryan Jones",email:"ryan.jones@example.com",sport:"Muay Thai",gym:"Roundhouse Brisbane",created_at:"2024-02-01T10:00:00Z"}],yDe=[{id:"content-001",athlete_id:"athlete-jsmith-001",event_id:"event-wng3-2024",type:"photo",title:"Match Action - Guard Pass",drive_url:"https://via.placeholder.com/1200x800/0d0d1a/e51d1d?text=Guard+Pass",thumbnail_url:"https://via.placeholder.com/400x300/0d0d1a/e51d1d?text=Guard+Pass",package_type:"vip",created_at:"2024-03-16T10:00:00Z"},{id:"content-002",athlete_id:"athlete-jsmith-001",event_id:"event-wng3-2024",type:"photo",title:"Submission Attempt",drive_url:"https://via.placeholder.com/1200x800/0d0d1a/e51d1d?text=Submission",thumbnail_url:"https://via.placeholder.com/400x300/0d0d1a/e51d1d?text=Submission",package_type:"vip",created_at:"2024-03-16T10:05:00Z"},{id:"content-003",athlete_id:"athlete-jsmith-001",event_id:"event-wng3-2024",type:"photo",title:"Victory Moment",drive_url:"https://via.placeholder.com/1200x800/0d0d1a/FFD700?text=Victory",thumbnail_url:"https://via.placeholder.com/400x300/0d0d1a/FFD700?text=Victory",package_type:"vip",created_at:"2024-03-16T10:10:00Z"},{id:"content-004",athlete_id:"athlete-jsmith-001",event_id:"event-wng3-2024",type:"photo",title:"Podium Celebration",drive_url:"https://via.placeholder.com/1200x800/0d0d1a/FFD700?text=Podium",thumbnail_url:"https://via.placeholder.com/400x300/0d0d1a/FFD700?text=Podium",package_type:"vip",created_at:"2024-03-16T10:15:00Z"},{id:"content-005",athlete_id:"athlete-jsmith-001",event_id:"event-wng3-2024",type:"video",title:"Walkout",drive_url:"https://via.placeholder.com/1920x1080/0d0d1a/e51d1d?text=Walkout+Video",thumbnail_url:"https://via.placeholder.com/640x360/0d0d1a/e51d1d?text=Walkout+Video",package_type:"vip",duration:"0:45",created_at:"2024-03-16T11:00:00Z"},{id:"content-006",athlete_id:"athlete-jsmith-001",event_id:"event-wng3-2024",type:"video",title:"Match Highlight",drive_url:"https://via.placeholder.com/1920x1080/0d0d1a/e51d1d?text=Match+Highlight",thumbnail_url:"https://via.placeholder.com/640x360/0d0d1a/e51d1d?text=Match+Highlight",package_type:"vip",duration:"2:30",created_at:"2024-03-16T11:05:00Z"},{id:"content-007",athlete_id:"athlete-jsmith-001",event_id:"event-wng3-2024",type:"video",title:"Victory Moment",drive_url:"https://via.placeholder.com/1920x1080/0d0d1a/FFD700?text=Victory+Video",thumbnail_url:"https://via.placeholder.com/640x360/0d0d1a/FFD700?text=Victory+Video",package_type:"vip",duration:"0:30",created_at:"2024-03-16T11:10:00Z"},{id:"content-008",athlete_id:"athlete-mchen-002",event_id:"event-afn8-2024",type:"photo",title:"Opening Exchange",drive_url:"https://via.placeholder.com/1200x800/0d0d1a/e51d1d?text=Opening+Exchange",thumbnail_url:"https://via.placeholder.com/400x300/0d0d1a/e51d1d?text=Opening+Exchange",package_type:"match",created_at:"2024-02-11T10:00:00Z"},{id:"content-009",athlete_id:"athlete-mchen-002",event_id:"event-afn8-2024",type:"photo",title:"Head Kick",drive_url:"https://via.placeholder.com/1200x800/0d0d1a/e51d1d?text=Head+Kick",thumbnail_url:"https://via.placeholder.com/400x300/0d0d1a/e51d1d?text=Head+Kick",package_type:"match",created_at:"2024-02-11T10:05:00Z"},{id:"content-010",athlete_id:"athlete-mchen-002",event_id:"event-afn8-2024",type:"photo",title:"Ground Control",drive_url:"https://via.placeholder.com/1200x800/0d0d1a/e51d1d?text=Ground+Control",thumbnail_url:"https://via.placeholder.com/400x300/0d0d1a/e51d1d?text=Ground+Control",package_type:"match",created_at:"2024-02-11T10:10:00Z"},{id:"content-011",athlete_id:"athlete-mchen-002",event_id:"event-afn8-2024",type:"video",title:"Match Highlight",drive_url:"https://via.placeholder.com/1920x1080/0d0d1a/e51d1d?text=Match+Highlight",thumbnail_url:"https://via.placeholder.com/640x360/0d0d1a/e51d1d?text=Match+Highlight",package_type:"match",duration:"1:45",created_at:"2024-02-11T11:00:00Z"},{id:"content-012",athlete_id:"athlete-rjones-003",event_id:"event-wng3-2024",type:"photo",title:"Clinch Work",drive_url:"https://via.placeholder.com/1200x800/0d0d1a/e51d1d?text=Clinch+Work",thumbnail_url:"https://via.placeholder.com/400x300/0d0d1a/e51d1d?text=Clinch+Work",package_type:"match",created_at:"2024-03-16T12:00:00Z"},{id:"content-013",athlete_id:"athlete-rjones-003",event_id:"event-wng3-2024",type:"photo",title:"Knee Strike",drive_url:"https://via.placeholder.com/1200x800/0d0d1a/e51d1d?text=Knee+Strike",thumbnail_url:"https://via.placeholder.com/400x300/0d0d1a/e51d1d?text=Knee+Strike",package_type:"match",created_at:"2024-03-16T12:05:00Z"},{id:"content-014",athlete_id:"athlete-rjones-003",event_id:"event-wng3-2024",type:"video",title:"Match Highlight",drive_url:"https://via.placeholder.com/1920x1080/0d0d1a/e51d1d?text=Match+Highlight",thumbnail_url:"https://via.placeholder.com/640x360/0d0d1a/e51d1d?text=Match+Highlight",package_type:"match",duration:"1:30",created_at:"2024-03-16T12:30:00Z"}],xDe=[{athlete_id:"athlete-jsmith-001",event_id:"event-wng3-2024",package_type:"vip",granted_at:"2024-03-16T09:00:00Z"},{athlete_id:"athlete-mchen-002",event_id:"event-afn8-2024",package_type:"match",granted_at:"2024-02-11T09:00:00Z"},{athlete_id:"athlete-rjones-003",event_id:"event-wng3-2024",package_type:"match",granted_at:"2024-03-16T09:00:00Z"}],bDe=()=>{const t=localStorage.getItem("ffm_athlete_profiles"),e=localStorage.getItem("ffm_athlete_events"),r=localStorage.getItem("ffm_athlete_content"),n=localStorage.getItem("ffm_athlete_access");t||localStorage.setItem("ffm_athlete_profiles",JSON.stringify(vDe)),e||localStorage.setItem("ffm_athlete_events",JSON.stringify(gDe)),r||localStorage.setItem("ffm_athlete_content",JSON.stringify(yDe)),n||localStorage.setItem("ffm_athlete_access",JSON.stringify(xDe)),console.log(" Athlete portal seed data loaded")};function wDe(){const t=Fc(),[e,r]=T.useState(""),[n,i]=T.useState(""),[a,o]=T.useState(""),[c,u]=T.useState(!1);T.useEffect(()=>{bDe()},[]);const l=async d=>{d.preventDefault(),o(""),u(!0),setTimeout(()=>{const m=JSON.parse(localStorage.getItem("ffm_athlete_profiles")||"[]").find(p=>p.email===e);m?(sessionStorage.setItem("athlete_user",JSON.stringify(m)),t("/athlete/dashboard")):(o("Invalid email or password. Try: jake.smith@example.com"),u(!1))},800)};return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#0d0d1a] via-[#1a1a2e] to-[#0d0d1a] flex items-center justify-center px-4",children:s.jsxs(Dr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-md",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsxs(Dr.h1,{initial:{scale:.9},animate:{scale:1},transition:{duration:.5,delay:.1},className:"text-4xl md:text-5xl font-black text-white mb-2",children:["FIT FOCUS ",s.jsx("span",{className:"text-[#e51d1d]",children:"MEDIA"})]}),s.jsx("p",{className:"text-gray-400 text-lg",children:"Athlete Portal"})]}),s.jsxs(Dr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"bg-[#1a1a2e]/80 backdrop-blur-xl border border-white/10 rounded-2xl p-8 shadow-2xl",children:[s.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"Sign In"}),a&&s.jsxs(Dr.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"mb-6 p-4 bg-red-500/10 border border-red-500/30 rounded-lg flex items-start gap-3",children:[s.jsx($0,{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5"}),s.jsx("p",{className:"text-sm text-red-400",children:a})]}),s.jsxs("form",{onSubmit:l,className:"space-y-5",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300 mb-2",children:"Email Address"}),s.jsxs("div",{className:"relative",children:[s.jsx(eg,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500"}),s.jsx("input",{id:"email",type:"email",value:e,onChange:d=>r(d.target.value),className:"w-full bg-[#0d0d1a]/50 border border-white/10 rounded-lg pl-11 pr-4 py-3 text-white placeholder:text-gray-500 focus:outline-none focus:ring-2 focus:ring-[#e51d1d]/50 focus:border-[#e51d1d]/50 transition-all",placeholder:"your.email@example.com",required:!0})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300 mb-2",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx($b,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500"}),s.jsx("input",{id:"password",type:"password",value:n,onChange:d=>i(d.target.value),className:"w-full bg-[#0d0d1a]/50 border border-white/10 rounded-lg pl-11 pr-4 py-3 text-white placeholder:text-gray-500 focus:outline-none focus:ring-2 focus:ring-[#e51d1d]/50 focus:border-[#e51d1d]/50 transition-all",placeholder:"",required:!0})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx(rs,{to:"/athlete/forgot-password",className:"text-sm text-[#e51d1d] hover:text-red-400 transition-colors",children:"Forgot password?"})}),s.jsx("button",{type:"submit",disabled:c,className:"w-full bg-gradient-to-r from-[#e51d1d] to-red-600 text-white font-semibold py-3 rounded-lg hover:from-red-600 hover:to-[#e51d1d] transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:c?s.jsxs(s.Fragment,{children:[s.jsx(RY,{className:"w-5 h-5 animate-spin"}),"Signing in..."]}):"Sign In"})]}),s.jsx("div",{className:"mt-6 pt-6 border-t border-white/10 text-center",children:s.jsxs("p",{className:"text-gray-400",children:["New athlete?"," ",s.jsx(rs,{to:"/athlete/register",className:"text-[#e51d1d] hover:text-red-400 font-semibold transition-colors",children:"Register here"})]})}),s.jsx("div",{className:"mt-4 text-center",children:s.jsx(rs,{to:"/athlete/packages",className:"text-sm text-gray-500 hover:text-gray-300 transition-colors",children:"Browse Packages"})})]}),s.jsx(Dr.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.4},className:"mt-6 p-4 bg-blue-500/10 border border-blue-500/30 rounded-lg text-center",children:s.jsxs("p",{className:"text-sm text-blue-300",children:[s.jsx("strong",{children:"Demo:"})," jake.smith@example.com | michelle.chen@example.com | ryan.jones@example.com"]})})]})})}const Vu={PROFILES:"ffm_athlete_profiles",EVENTS:"ffm_athlete_events",CONTENT:"ffm_athlete_content",ACCESS:"ffm_athlete_access"},_h=t=>{try{const e=localStorage.getItem(t);return e?JSON.parse(e):[]}catch(e){return console.error(`Error reading ${t}:`,e),[]}},zC=(t,e)=>{try{localStorage.setItem(t,JSON.stringify(e))}catch(r){console.error(`Error writing ${t}:`,r)}},aF=()=>`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,_De=t=>{const e=_h(Vu.PROFILES),r={id:aF(),name:t.name,email:t.email,sport:t.sport||"",gym:t.gym||"",created_at:new Date().toISOString()};return e.push(r),zC(Vu.PROFILES,e),r},EDe=()=>_h(Vu.PROFILES),SDe=()=>_h(Vu.EVENTS).sort((t,e)=>new Date(e.date)-new Date(t.date)),jDe=t=>_h(Vu.EVENTS).find(r=>r.id===t),TDe=t=>{const e=_h(Vu.EVENTS),r={id:aF(),name:t.name,date:t.date,venue:t.venue||"",org_name:t.org_name||"",created_at:new Date().toISOString()};return e.push(r),zC(Vu.EVENTS,e),r},oF=t=>{const e=_h(Vu.ACCESS),r=_h(Vu.EVENTS),n=e.filter(a=>a.athlete_id===t),i=[...new Set(n.map(a=>a.event_id))];return r.filter(a=>i.includes(a.id)).map(a=>{const o=n.find(c=>c.event_id===a.id);return{...a,package_type:o?.package_type||"match",granted_at:o?.granted_at}}).sort((a,o)=>new Date(o.date)-new Date(a.date))},CDe=(t,e)=>{const r=_h(Vu.CONTENT);return _h(Vu.ACCESS).some(a=>a.athlete_id===t&&a.event_id===e)?r.filter(a=>a.athlete_id===t&&a.event_id===e).sort((a,o)=>new Date(o.created_at)-new Date(a.created_at)):[]},GV=t=>_h(Vu.CONTENT).filter(r=>r.athlete_id===t).sort((r,n)=>new Date(n.created_at)-new Date(r.created_at)),NDe=t=>{const e=_h(Vu.CONTENT),r=oF(t),n=e.filter(c=>c.athlete_id===t),i=n.filter(c=>c.type==="photo"),a=n.filter(c=>c.type==="video"),o=r.length>0?r[0].package_type:null;return{totalEvents:r.length,totalPhotos:i.length,totalVideos:a.length,activePackage:o}},kDe=(t,e,r,n)=>{const i=_h(Vu.CONTENT),a=_h(Vu.ACCESS),o=r.map(u=>({id:aF(),athlete_id:t,event_id:e,type:u.type,title:u.title||"",drive_url:u.drive_url,thumbnail_url:u.thumbnail_url||u.drive_url,package_type:n,duration:u.duration||null,created_at:new Date().toISOString()}));return i.push(...o),zC(Vu.CONTENT,i),a.find(u=>u.athlete_id===t&&u.event_id===e)||(a.push({athlete_id:t,event_id:e,package_type:n,granted_at:new Date().toISOString()}),zC(Vu.ACCESS,a)),o},LDe=t=>_h(Vu.CONTENT).filter(r=>r.event_id===t),IDe=t=>{const r=_h(Vu.CONTENT).filter(i=>i.athlete_id===t),n=oF(t);return{totalEvents:n.length,totalPhotos:r.filter(i=>i.type==="photo").length,totalVideos:r.filter(i=>i.type==="video").length,packages:n.map(i=>i.package_type)}},aO=t=>({vip:"VIP Package",match:"Match Package",season:"Season Pass"})[t]||t,ane=t=>({vip:"from-yellow-500/20 to-amber-600/20 border-yellow-500/30",match:"from-blue-500/20 to-cyan-600/20 border-blue-500/30",season:"from-purple-500/20 to-pink-600/20 border-purple-500/30"})[t]||"from-gray-500/20 to-gray-600/20 border-gray-500/30",one=t=>new Date(t).toLocaleDateString("en-AU",{year:"numeric",month:"long",day:"numeric"}),pS=t=>{const e=[/\/file\/d\/([a-zA-Z0-9_-]+)/,/id=([a-zA-Z0-9_-]+)/,/\/d\/([a-zA-Z0-9_-]+)/];for(const r of e){const n=t.match(r);if(n)return`https://drive.google.com/uc?export=download&id=${n[1]}`}return t},BDe=["Brazilian Jiu-Jitsu","MMA","Muay Thai","Boxing","Wrestling","Judo","Kickboxing","Other"];function PDe(){const t=Fc(),[e,r]=T.useState({name:"",email:"",password:"",confirmPassword:"",sport:"",gym:""}),[n,i]=T.useState(""),[a,o]=T.useState(!1),c=l=>{r({...e,[l.target.name]:l.target.value})},u=async l=>{if(l.preventDefault(),i(""),e.password!==e.confirmPassword){i("Passwords do not match");return}if(e.password.length<6){i("Password must be at least 6 characters");return}o(!0),setTimeout(()=>{try{if(JSON.parse(localStorage.getItem("ffm_athlete_profiles")||"[]").find(p=>p.email===e.email)){i("An account with this email already exists"),o(!1);return}const m=_De({name:e.name,email:e.email,sport:e.sport,gym:e.gym});sessionStorage.setItem("athlete_user",JSON.stringify(m)),t("/athlete/dashboard")}catch{i("Registration failed. Please try again."),o(!1)}},800)};return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#0d0d1a] via-[#1a1a2e] to-[#0d0d1a] flex items-center justify-center px-4 py-12",children:s.jsxs(Dr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-md",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsxs(Dr.h1,{initial:{scale:.9},animate:{scale:1},transition:{duration:.5,delay:.1},className:"text-4xl md:text-5xl font-black text-white mb-2",children:["FIT FOCUS ",s.jsx("span",{className:"text-[#e51d1d]",children:"MEDIA"})]}),s.jsx("p",{className:"text-gray-400 text-lg",children:"Athlete Portal"})]}),s.jsxs(Dr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"bg-[#1a1a2e]/80 backdrop-blur-xl border border-white/10 rounded-2xl p-8 shadow-2xl",children:[s.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Create Account"}),s.jsx("p",{className:"text-gray-400 text-sm mb-6",children:"Join the FFM athlete community"}),n&&s.jsxs(Dr.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"mb-6 p-4 bg-red-500/10 border border-red-500/30 rounded-lg flex items-start gap-3",children:[s.jsx($0,{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5"}),s.jsx("p",{className:"text-sm text-red-400",children:n})]}),s.jsxs("form",{onSubmit:u,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-300 mb-2",children:"Full Name"}),s.jsxs("div",{className:"relative",children:[s.jsx(eg,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500"}),s.jsx("input",{id:"name",name:"name",type:"text",value:e.name,onChange:c,className:"w-full bg-[#0d0d1a]/50 border border-white/10 rounded-lg pl-11 pr-4 py-3 text-white placeholder:text-gray-500 focus:outline-none focus:ring-2 focus:ring-[#e51d1d]/50 focus:border-[#e51d1d]/50 transition-all",placeholder:"John Smith",required:!0})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300 mb-2",children:"Email Address"}),s.jsxs("div",{className:"relative",children:[s.jsx(tu,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500"}),s.jsx("input",{id:"email",name:"email",type:"email",value:e.email,onChange:c,className:"w-full bg-[#0d0d1a]/50 border border-white/10 rounded-lg pl-11 pr-4 py-3 text-white placeholder:text-gray-500 focus:outline-none focus:ring-2 focus:ring-[#e51d1d]/50 focus:border-[#e51d1d]/50 transition-all",placeholder:"your.email@example.com",required:!0})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"sport",className:"block text-sm font-medium text-gray-300 mb-2",children:"Sport / Discipline"}),s.jsxs("div",{className:"relative",children:[s.jsx(Gde,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500"}),s.jsxs("select",{id:"sport",name:"sport",value:e.sport,onChange:c,className:"w-full bg-[#0d0d1a]/50 border border-white/10 rounded-lg pl-11 pr-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-[#e51d1d]/50 focus:border-[#e51d1d]/50 transition-all appearance-none",required:!0,children:[s.jsx("option",{value:"",children:"Select your sport"}),BDe.map(l=>s.jsx("option",{value:l,children:l},l))]})]})]}),s.jsxs("div",{children:[s.jsxs("label",{htmlFor:"gym",className:"block text-sm font-medium text-gray-300 mb-2",children:["Gym / Team ",s.jsx("span",{className:"text-gray-500 text-xs",children:"(optional)"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(Ade,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500"}),s.jsx("input",{id:"gym",name:"gym",type:"text",value:e.gym,onChange:c,className:"w-full bg-[#0d0d1a]/50 border border-white/10 rounded-lg pl-11 pr-4 py-3 text-white placeholder:text-gray-500 focus:outline-none focus:ring-2 focus:ring-[#e51d1d]/50 focus:border-[#e51d1d]/50 transition-all",placeholder:"Your gym or team"})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300 mb-2",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx($b,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500"}),s.jsx("input",{id:"password",name:"password",type:"password",value:e.password,onChange:c,className:"w-full bg-[#0d0d1a]/50 border border-white/10 rounded-lg pl-11 pr-4 py-3 text-white placeholder:text-gray-500 focus:outline-none focus:ring-2 focus:ring-[#e51d1d]/50 focus:border-[#e51d1d]/50 transition-all",placeholder:"",required:!0})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-300 mb-2",children:"Confirm Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(r2,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500"}),s.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",value:e.confirmPassword,onChange:c,className:"w-full bg-[#0d0d1a]/50 border border-white/10 rounded-lg pl-11 pr-4 py-3 text-white placeholder:text-gray-500 focus:outline-none focus:ring-2 focus:ring-[#e51d1d]/50 focus:border-[#e51d1d]/50 transition-all",placeholder:"",required:!0})]})]}),s.jsx("button",{type:"submit",disabled:a,className:"w-full bg-gradient-to-r from-[#e51d1d] to-red-600 text-white font-semibold py-3 rounded-lg hover:from-red-600 hover:to-[#e51d1d] transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 mt-6",children:a?s.jsxs(s.Fragment,{children:[s.jsx(RY,{className:"w-5 h-5 animate-spin"}),"Creating account..."]}):"Create Account"})]}),s.jsx("div",{className:"mt-6 pt-6 border-t border-white/10 text-center",children:s.jsxs("p",{className:"text-gray-400",children:["Already have an account?"," ",s.jsx(rs,{to:"/athlete",className:"text-[#e51d1d] hover:text-red-400 font-semibold transition-colors",children:"Sign in"})]})})]})]})})}const ODe=[{id:"match",name:"Match Package",price:175,icon:N0,color:"from-blue-500/20 to-cyan-600/20",borderColor:"border-blue-500/30",textColor:"text-blue-400",features:["All fight photos (high resolution)","Match highlight video clip","Instant download access","Share on social media","Available within 48 hours"]},{id:"vip",name:"VIP Package",price:350,icon:Ude,color:"from-yellow-500/20 to-amber-600/20",borderColor:"border-yellow-500/30",textColor:"text-yellow-400",badge:"Most Popular",features:["All fight photos (high resolution)","Match highlight video","Walkout video","Victory moment video","Behind-the-scenes content","Priority delivery (24 hours)","Unlimited downloads"]},{id:"season",name:"Season Pass",price:899,priceNote:"/year",icon:Ay,color:"from-purple-500/20 to-pink-600/20",borderColor:"border-purple-500/30",textColor:"text-purple-400",badge:"Best Value",features:["All content from every event","Unlimited events for full year","VIP package benefits for each event","Early access to content","Exclusive athlete portal access","Personalized highlight reels","Save over $1,000 per year"]}],RDe=[{question:"When will I get my content?",answer:"Match Package content is delivered within 48 hours of the event. VIP Package customers receive priority delivery within 24 hours. Season Pass holders get early access as soon as content is ready."},{question:"What format are the files?",answer:"Photos are delivered in high-resolution JPEG format (4K-6K resolution). Videos are provided in MP4 format at 1080p or 4K, optimized for both social media sharing and archival quality."},{question:"Can I share my content on social media?",answer:"Absolutely! All content is yours to share. We encourage you to share your highlight moments on Instagram, Facebook, TikTok, and other platforms. Your success is our success!"},{question:"How do I access my content?",answer:"After purchasing, you'll receive an email with login credentials to your personal athlete portal. All your content is organized by event and available for instant download anytime, anywhere."},{question:"Can I purchase content after the event?",answer:"Yes! Content is available for purchase for 90 days after the event. However, we recommend purchasing in advance to ensure priority processing and the best pricing."},{question:"What if I compete in multiple events?",answer:"If you compete in 3+ events per year, the Season Pass is your best value. It covers all events for an entire year and saves you over $1,000 compared to individual packages."}];function DDe(){const[t,e]=T.useState(null);return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[#0d0d1a] via-[#1a1a2e] to-[#0d0d1a]",children:[s.jsx("div",{className:"bg-[#1a1a2e]/50 backdrop-blur-xl border-b border-white/10",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(rs,{to:"/athlete",className:"text-2xl font-black text-white",children:["FIT FOCUS ",s.jsx("span",{className:"text-[#e51d1d]",children:"MEDIA"})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(rs,{to:"/athlete",className:"text-sm text-gray-400 hover:text-white transition-colors",children:"Sign In"}),s.jsx(rs,{to:"/athlete/register",className:"bg-gradient-to-r from-[#e51d1d] to-red-600 text-white font-semibold px-6 py-2 rounded-lg hover:from-red-600 hover:to-[#e51d1d] transition-all text-sm",children:"Get Started"})]})]})})}),s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 md:py-20",children:[s.jsxs(Dr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center mb-16",children:[s.jsxs("div",{className:"inline-flex items-center gap-2 bg-[#e51d1d]/20 border border-[#e51d1d]/30 px-4 py-2 rounded-full mb-6",children:[s.jsx(zb,{className:"w-4 h-4 text-[#e51d1d]"}),s.jsx("span",{className:"text-sm font-semibold text-[#e51d1d]",children:"Professional Fight Media"})]}),s.jsxs("h1",{className:"text-4xl md:text-6xl font-black text-white mb-6",children:["Capture Your ",s.jsx("span",{className:"text-[#e51d1d]",children:"Victory"})]}),s.jsx("p",{className:"text-xl text-gray-400 max-w-3xl mx-auto",children:"Professional fight photography and videography packages for combat sports athletes. Relive your moments, share your glory."})]}),s.jsx("div",{className:"grid md:grid-cols-3 gap-8 mb-20",children:ODe.map((r,n)=>{const i=r.icon;return s.jsxs(Dr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:n*.1},className:`bg-gradient-to-br ${r.color} backdrop-blur-xl border ${r.borderColor} rounded-2xl p-8 hover:scale-105 transition-transform relative`,children:[r.badge&&s.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2",children:s.jsx("div",{className:"bg-gradient-to-r from-[#e51d1d] to-red-600 text-white text-xs font-bold px-4 py-1 rounded-full",children:r.badge})}),s.jsx("div",{className:`w-12 h-12 rounded-lg bg-gradient-to-br ${r.color} border ${r.borderColor} flex items-center justify-center mb-4`,children:s.jsx(i,{className:`w-6 h-6 ${r.textColor}`})}),s.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:r.name}),s.jsxs("div",{className:"mb-6",children:[s.jsxs("span",{className:"text-4xl font-black text-white",children:["$",r.price]}),r.priceNote&&s.jsx("span",{className:"text-gray-400 text-lg",children:r.priceNote})]}),s.jsx("ul",{className:"space-y-3 mb-8",children:r.features.map((a,o)=>s.jsxs("li",{className:"flex items-start gap-3",children:[s.jsx(la,{className:`w-5 h-5 ${r.textColor} flex-shrink-0 mt-0.5`}),s.jsx("span",{className:"text-gray-300 text-sm",children:a})]},o))}),s.jsx("a",{href:`mailto:info@fitfocusmedia.com.au?subject=Purchase ${r.name}&body=Hi Brandon, I'd like to purchase the ${r.name} ($${r.price}).`,className:`block w-full bg-gradient-to-r ${r.color} border ${r.borderColor} ${r.textColor} font-semibold py-3 rounded-lg hover:scale-105 transition-transform text-center`,children:"Purchase Now"})]},r.id)})}),s.jsxs(Dr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-[#1a1a2e]/50 backdrop-blur-xl border border-white/10 rounded-2xl overflow-hidden mb-20",children:[s.jsxs("div",{className:"p-8 border-b border-white/10",children:[s.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Package Comparison"}),s.jsx("p",{className:"text-gray-400",children:"Choose the package that fits your needs"})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-[#0d0d1a]/50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-left p-4 text-gray-400 font-semibold",children:"Feature"}),s.jsx("th",{className:"text-center p-4 text-gray-400 font-semibold",children:"Match"}),s.jsx("th",{className:"text-center p-4 text-gray-400 font-semibold",children:"VIP"}),s.jsx("th",{className:"text-center p-4 text-gray-400 font-semibold",children:"Season"})]})}),s.jsxs("tbody",{className:"divide-y divide-white/10",children:[s.jsxs("tr",{children:[s.jsx("td",{className:"p-4 text-gray-300",children:"Fight Photos (High-Res)"}),s.jsx("td",{className:"text-center p-4",children:s.jsx(la,{className:"w-5 h-5 text-green-400 mx-auto"})}),s.jsx("td",{className:"text-center p-4",children:s.jsx(la,{className:"w-5 h-5 text-green-400 mx-auto"})}),s.jsx("td",{className:"text-center p-4",children:s.jsx(la,{className:"w-5 h-5 text-green-400 mx-auto"})})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"p-4 text-gray-300",children:"Match Highlight Video"}),s.jsx("td",{className:"text-center p-4",children:s.jsx(la,{className:"w-5 h-5 text-green-400 mx-auto"})}),s.jsx("td",{className:"text-center p-4",children:s.jsx(la,{className:"w-5 h-5 text-green-400 mx-auto"})}),s.jsx("td",{className:"text-center p-4",children:s.jsx(la,{className:"w-5 h-5 text-green-400 mx-auto"})})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"p-4 text-gray-300",children:"Walkout Video"}),s.jsx("td",{className:"text-center p-4 text-gray-600",children:""}),s.jsx("td",{className:"text-center p-4",children:s.jsx(la,{className:"w-5 h-5 text-green-400 mx-auto"})}),s.jsx("td",{className:"text-center p-4",children:s.jsx(la,{className:"w-5 h-5 text-green-400 mx-auto"})})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"p-4 text-gray-300",children:"Victory Moment Video"}),s.jsx("td",{className:"text-center p-4 text-gray-600",children:""}),s.jsx("td",{className:"text-center p-4",children:s.jsx(la,{className:"w-5 h-5 text-green-400 mx-auto"})}),s.jsx("td",{className:"text-center p-4",children:s.jsx(la,{className:"w-5 h-5 text-green-400 mx-auto"})})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"p-4 text-gray-300",children:"Delivery Time"}),s.jsx("td",{className:"text-center p-4 text-gray-300",children:"48hrs"}),s.jsx("td",{className:"text-center p-4 text-yellow-400",children:"24hrs"}),s.jsx("td",{className:"text-center p-4 text-purple-400",children:"Priority"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"p-4 text-gray-300",children:"Number of Events"}),s.jsx("td",{className:"text-center p-4 text-gray-300",children:"1"}),s.jsx("td",{className:"text-center p-4 text-gray-300",children:"1"}),s.jsx("td",{className:"text-center p-4 text-purple-400",children:"Unlimited"})]})]})]})})]}),s.jsxs(Dr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-white mb-4",children:"Frequently Asked Questions"}),s.jsx("p",{className:"text-gray-400",children:"Everything you need to know about our packages"})]}),s.jsx("div",{className:"max-w-3xl mx-auto space-y-4",children:RDe.map((r,n)=>s.jsxs(Dr.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.6+n*.05},className:"bg-[#1a1a2e]/50 backdrop-blur-xl border border-white/10 rounded-xl overflow-hidden",children:[s.jsxs("button",{onClick:()=>e(t===n?null:n),className:"w-full p-6 flex items-center justify-between text-left hover:bg-white/5 transition-colors",children:[s.jsx("span",{className:"text-lg font-semibold text-white pr-4",children:r.question}),s.jsx(F0,{className:`w-5 h-5 text-gray-400 flex-shrink-0 transition-transform ${t===n?"rotate-180":""}`})]}),t===n&&s.jsx(Dr.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"px-6 pb-6",children:s.jsx("p",{className:"text-gray-400 leading-relaxed",children:r.answer})})]},n))})]}),s.jsxs(Dr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8},className:"mt-20 bg-gradient-to-r from-[#e51d1d]/20 via-red-600/20 to-purple-600/20 border border-[#e51d1d]/30 rounded-2xl p-12 text-center",children:[s.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-white mb-4",children:"Ready to Capture Your Glory?"}),s.jsx("p",{className:"text-xl text-gray-300 mb-8 max-w-2xl mx-auto",children:"Create an account or contact us to purchase a package for your next event."}),s.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[s.jsx(rs,{to:"/athlete/register",className:"bg-gradient-to-r from-[#e51d1d] to-red-600 text-white font-bold px-8 py-4 rounded-lg hover:from-red-600 hover:to-[#e51d1d] transition-all text-lg",children:"Create Account"}),s.jsxs("a",{href:"mailto:info@fitfocusmedia.com.au?subject=Package Inquiry",className:"flex items-center gap-2 bg-white/10 border border-white/20 text-white font-semibold px-8 py-4 rounded-lg hover:bg-white/20 transition-all text-lg",children:[s.jsx(tu,{className:"w-5 h-5"}),"Contact Us"]})]})]})]})]})}function lne({children:t}){const e=Fc(),r=kf(),[n,i]=T.useState(null),[a,o]=T.useState(!1);T.useEffect(()=>{const l=sessionStorage.getItem("athlete_user");if(!l){e("/athlete");return}i(JSON.parse(l))},[e]);const c=()=>{sessionStorage.removeItem("athlete_user"),e("/athlete")},u=[{path:"/athlete/dashboard",label:"Dashboard",icon:ohe},{path:"/athlete/content",label:"My Content",icon:tm},{path:"/athlete/packages",label:"Packages",icon:N0},{path:"/athlete/account",label:"Account",icon:eg}];return n?s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[#0d0d1a] via-[#1a1a2e] to-[#0d0d1a]",children:[s.jsxs("header",{className:"bg-[#1a1a2e]/50 backdrop-blur-xl border-b border-white/10 sticky top-0 z-50",children:[s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"flex items-center justify-between h-16",children:[s.jsxs(rs,{to:"/athlete/dashboard",className:"flex items-center gap-3",children:[s.jsxs("div",{className:"text-2xl font-black text-white",children:["FIT FOCUS ",s.jsx("span",{className:"text-[#e51d1d]",children:"MEDIA"})]}),s.jsx("div",{className:"hidden sm:block h-6 w-px bg-white/20"}),s.jsx("div",{className:"hidden sm:block text-sm text-gray-400",children:"Athlete Portal"})]}),s.jsx("nav",{className:"hidden md:flex items-center gap-1",children:u.map(l=>{const d=l.icon,f=r.pathname===l.path;return s.jsxs(rs,{to:l.path,className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-all ${f?"bg-[#e51d1d] text-white":"text-gray-400 hover:text-white hover:bg-white/5"}`,children:[s.jsx(d,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm font-medium",children:l.label})]},l.path)})}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"hidden lg:flex items-center gap-3",children:[s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-sm font-semibold text-white",children:n.name}),s.jsx("div",{className:"text-xs text-gray-400",children:n.sport})]}),s.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-[#e51d1d] to-red-600 flex items-center justify-center text-white font-bold",children:n.name.charAt(0)})]}),s.jsxs("button",{onClick:c,className:"hidden md:flex items-center gap-2 px-4 py-2 text-sm text-gray-400 hover:text-white hover:bg-white/5 rounded-lg transition-all",children:[s.jsx(yB,{className:"w-4 h-4"}),s.jsx("span",{children:"Sign Out"})]}),s.jsx("button",{onClick:()=>o(!a),className:"md:hidden p-2 text-gray-400 hover:text-white transition-colors",children:a?s.jsx(tg,{className:"w-6 h-6"}):s.jsx(DY,{className:"w-6 h-6"})})]})]})}),a&&s.jsx(Dr.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"md:hidden border-t border-white/10 bg-[#0d0d1a]/95 backdrop-blur-xl",children:s.jsxs("div",{className:"px-4 py-4 space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-3 pb-4 border-b border-white/10",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-[#e51d1d] to-red-600 flex items-center justify-center text-white font-bold text-lg",children:n.name.charAt(0)}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-semibold text-white",children:n.name}),s.jsx("div",{className:"text-xs text-gray-400",children:n.sport})]})]}),u.map(l=>{const d=l.icon,f=r.pathname===l.path;return s.jsxs(rs,{to:l.path,onClick:()=>o(!1),className:`flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${f?"bg-[#e51d1d] text-white":"text-gray-400 hover:text-white hover:bg-white/5"}`,children:[s.jsx(d,{className:"w-5 h-5"}),s.jsx("span",{className:"font-medium",children:l.label})]},l.path)}),s.jsxs("button",{onClick:c,className:"flex items-center gap-3 px-4 py-3 text-gray-400 hover:text-white hover:bg-white/5 rounded-lg transition-all w-full",children:[s.jsx(yB,{className:"w-5 h-5"}),s.jsx("span",{className:"font-medium",children:"Sign Out"})]})]})})]}),s.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:t}),s.jsx("footer",{className:"border-t border-white/10 bg-[#0d0d1a]/50 mt-20",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:s.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:[s.jsxs("p",{className:"text-sm text-gray-400",children:[" ",new Date().getFullYear()," Fit Focus Media. All rights reserved."]}),s.jsxs("div",{className:"flex items-center gap-6",children:[s.jsx(rs,{to:"/athlete/packages",className:"text-sm text-gray-400 hover:text-white transition-colors",children:"Packages"}),s.jsx("a",{href:"mailto:info@fitfocusmedia.com.au",className:"text-sm text-gray-400 hover:text-white transition-colors",children:"Support"})]})]})})})]}):null}function MDe(){const t=Fc(),[e,r]=T.useState(null),[n,i]=T.useState([]),[a,o]=T.useState([]),[c,u]=T.useState({totalEvents:0,totalPhotos:0,totalVideos:0,activePackage:null});return T.useEffect(()=>{const l=sessionStorage.getItem("athlete_user");if(!l){t("/athlete");return}const d=JSON.parse(l);r(d);const f=oF(d.id),m=GV(d.id),p=NDe(d.id);i(f),o(m.slice(0,6)),u(p)},[t]),e?s.jsxs(lne,{children:[s.jsxs(Dr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-r from-[#e51d1d]/20 via-red-600/20 to-purple-600/20 border border-[#e51d1d]/30 rounded-2xl p-8 mb-8",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx(nm,{className:"w-6 h-6 text-[#e51d1d]"}),s.jsxs("h1",{className:"text-3xl font-bold text-white",children:["Welcome back, ",e.name.split(" ")[0],"!"]})]}),s.jsx("p",{className:"text-gray-300",children:"Access your fight photos, highlight videos, and exclusive content."})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[s.jsx(Dr.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.1},className:"bg-[#1a1a2e]/50 backdrop-blur-xl border border-white/10 rounded-xl p-6",children:s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-500/20 flex items-center justify-center",children:s.jsx(ml,{className:"w-5 h-5 text-blue-400"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold text-white",children:c.totalEvents}),s.jsx("div",{className:"text-sm text-gray-400",children:"Events"})]})]})}),s.jsx(Dr.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.2},className:"bg-[#1a1a2e]/50 backdrop-blur-xl border border-white/10 rounded-xl p-6",children:s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg bg-green-500/20 flex items-center justify-center",children:s.jsx(tm,{className:"w-5 h-5 text-green-400"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold text-white",children:c.totalPhotos}),s.jsx("div",{className:"text-sm text-gray-400",children:"Photos"})]})]})}),s.jsx(Dr.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.3},className:"bg-[#1a1a2e]/50 backdrop-blur-xl border border-white/10 rounded-xl p-6",children:s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg bg-purple-500/20 flex items-center justify-center",children:s.jsx(bh,{className:"w-5 h-5 text-purple-400"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold text-white",children:c.totalVideos}),s.jsx("div",{className:"text-sm text-gray-400",children:"Videos"})]})]})}),s.jsx(Dr.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.4},className:"bg-[#1a1a2e]/50 backdrop-blur-xl border border-white/10 rounded-xl p-6",children:s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg bg-yellow-500/20 flex items-center justify-center",children:s.jsx(N0,{className:"w-5 h-5 text-yellow-400"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-semibold text-white",children:c.activePackage?aO(c.activePackage):"None"}),s.jsx("div",{className:"text-xs text-gray-400",children:"Active Package"})]})]})})]}),s.jsxs(Dr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"mb-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-white",children:"My Events"}),s.jsxs(rs,{to:"/athlete/packages",className:"text-sm text-[#e51d1d] hover:text-red-400 transition-colors font-medium flex items-center gap-1",children:["Browse Packages",s.jsx(U0,{className:"w-4 h-4"})]})]}),n.length===0?s.jsxs("div",{className:"bg-[#1a1a2e]/50 backdrop-blur-xl border border-white/10 rounded-xl p-12 text-center",children:[s.jsx(N0,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"No content yet"}),s.jsx("p",{className:"text-gray-400 mb-6",children:"Your media will appear here after your next event!"}),s.jsxs(rs,{to:"/athlete/packages",className:"inline-flex items-center gap-2 bg-gradient-to-r from-[#e51d1d] to-red-600 text-white font-semibold px-6 py-3 rounded-lg hover:from-red-600 hover:to-[#e51d1d] transition-all",children:[s.jsx(N0,{className:"w-5 h-5"}),"Browse Packages"]})]}):s.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:n.map((l,d)=>{const m=GV(e.id).filter(y=>y.event_id===l.id),p=m.filter(y=>y.type==="photo").length,g=m.filter(y=>y.type==="video").length;return s.jsx(Dr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6+d*.1},children:s.jsx(rs,{to:`/athlete/events/${l.id}`,className:"block group",children:s.jsxs("div",{className:"bg-[#1a1a2e]/50 backdrop-blur-xl border border-white/10 rounded-xl p-6 hover:border-[#e51d1d]/50 transition-all",children:[s.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-1 rounded-full bg-gradient-to-r ${ane(l.package_type)} border mb-4`,children:[s.jsx(N0,{className:"w-3 h-3"}),s.jsx("span",{className:"text-xs font-semibold",children:aO(l.package_type)})]}),s.jsx("h3",{className:"text-xl font-bold text-white mb-2 group-hover:text-[#e51d1d] transition-colors",children:l.name}),s.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-400 mb-4",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(ml,{className:"w-4 h-4"}),s.jsx("span",{children:one(l.date)})]}),l.venue&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(md,{className:"w-4 h-4"}),s.jsx("span",{children:l.venue})]})]}),s.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2 text-green-400",children:[s.jsx(tm,{className:"w-4 h-4"}),s.jsxs("span",{className:"font-medium",children:[p," Photos"]})]}),s.jsxs("div",{className:"flex items-center gap-2 text-purple-400",children:[s.jsx(bh,{className:"w-4 h-4"}),s.jsxs("span",{className:"font-medium",children:[g," Videos"]})]})]}),s.jsxs("div",{className:"mt-4 pt-4 border-t border-white/10 flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-gray-400",children:"View content"}),s.jsx(U0,{className:"w-5 h-5 text-[#e51d1d] group-hover:translate-x-1 transition-transform"})]})]})})},l.id)})})]}),a.length>0&&s.jsxs(Dr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},children:[s.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"Recent Content"}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:a.map((l,d)=>s.jsxs(Dr.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.8+d*.05},className:"group relative aspect-square rounded-lg overflow-hidden bg-[#1a1a2e]/50 border border-white/10 hover:border-[#e51d1d]/50 transition-all",children:[s.jsx("img",{src:l.thumbnail_url,alt:l.title,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity flex items-end p-3",children:s.jsxs("div",{className:"flex items-center gap-1 text-white",children:[l.type==="video"?s.jsx(bh,{className:"w-4 h-4"}):s.jsx(tm,{className:"w-4 h-4"}),s.jsx("span",{className:"text-xs font-medium truncate",children:l.title})]})})]},l.id))})]})]}):null}function FDe(){const{eventId:t}=Kh(),e=Fc(),[r,n]=T.useState(null),[i,a]=T.useState(null),[o,c]=T.useState([]),[u,l]=T.useState("photos"),[d,f]=T.useState(!1),[m,p]=T.useState(0);T.useEffect(()=>{const I=sessionStorage.getItem("athlete_user");if(!I){e("/athlete");return}const D=JSON.parse(I);n(D);const U=jDe(t);if(!U){e("/athlete/dashboard");return}const G=CDe(D.id,t);a(U),c(G);const q=G.filter(de=>de.type==="photo"),J=G.filter(de=>de.type==="video");q.length===0&&J.length>0&&l("videos")},[t,e]);const g=o.filter(I=>I.type==="photo"),y=o.filter(I=>I.type==="video"),x=I=>{(I==="photos"?g:y).forEach((U,G)=>{setTimeout(()=>{const q=document.createElement("a");q.href=pS(U.drive_url),q.download=U.title||`${I}-${G+1}`,q.click()},G*500)})},w=(I,D)=>{const U=encodeURIComponent(I.drive_url),G=encodeURIComponent(`Check out my ${I.title} from ${i.name}!`),q={facebook:`https://www.facebook.com/sharer/sharer.php?u=${U}`,instagram:I.drive_url,twitter:`https://twitter.com/intent/tweet?url=${U}&text=${G}`};D==="instagram"?(navigator.clipboard.writeText(I.drive_url),alert("Link copied! Paste it in your Instagram post.")):window.open(q[D],"_blank","width=600,height=400")},_=I=>{p(I),f(!0)},E=()=>{f(!1)},N=()=>{p(I=>(I+1)%g.length)},C=()=>{p(I=>(I-1+g.length)%g.length)};return!r||!i?null:s.jsxs(lne,{children:[s.jsxs(rs,{to:"/athlete/dashboard",className:"inline-flex items-center gap-2 text-gray-400 hover:text-white transition-colors mb-6",children:[s.jsx(LT,{className:"w-4 h-4"}),s.jsx("span",{children:"Back to Dashboard"})]}),s.jsxs(Dr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-r from-[#1a1a2e]/80 to-[#1a1a2e]/50 backdrop-blur-xl border border-white/10 rounded-2xl p-8 mb-8",children:[s.jsxs("div",{className:`inline-flex items-center gap-2 px-4 py-2 rounded-full bg-gradient-to-r ${ane(o[0]?.package_type)} border mb-4`,children:[s.jsx(N0,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm font-semibold",children:aO(o[0]?.package_type)})]}),s.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-white mb-4",children:i.name}),s.jsxs("div",{className:"flex flex-wrap items-center gap-6 text-gray-300",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ml,{className:"w-5 h-5 text-[#e51d1d]"}),s.jsx("span",{children:one(i.date)})]}),i.venue&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(md,{className:"w-5 h-5 text-[#e51d1d]"}),s.jsx("span",{children:i.venue})]}),i.org_name&&s.jsxs("div",{className:"text-gray-400",children:["Organized by ",s.jsx("span",{className:"text-white font-semibold",children:i.org_name})]})]})]}),s.jsxs("div",{className:"flex items-center gap-4 mb-6 border-b border-white/10",children:[s.jsxs("button",{onClick:()=>l("photos"),className:`flex items-center gap-2 px-4 py-3 font-semibold transition-all ${u==="photos"?"text-[#e51d1d] border-b-2 border-[#e51d1d]":"text-gray-400 hover:text-white"}`,children:[s.jsx(tm,{className:"w-5 h-5"}),s.jsxs("span",{children:["Photos (",g.length,")"]})]}),s.jsxs("button",{onClick:()=>l("videos"),className:`flex items-center gap-2 px-4 py-3 font-semibold transition-all ${u==="videos"?"text-[#e51d1d] border-b-2 border-[#e51d1d]":"text-gray-400 hover:text-white"}`,children:[s.jsx(bh,{className:"w-5 h-5"}),s.jsxs("span",{children:["Videos (",y.length,")"]})]})]}),u==="photos"&&s.jsx(Dr.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:g.length===0?s.jsxs("div",{className:"bg-[#1a1a2e]/50 backdrop-blur-xl border border-white/10 rounded-xl p-12 text-center",children:[s.jsx(tm,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"No photos available"}),s.jsx("p",{className:"text-gray-400",children:"Photos for this event will be added soon."})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"flex justify-end mb-4",children:s.jsxs("button",{onClick:()=>x("photos"),className:"flex items-center gap-2 bg-gradient-to-r from-[#e51d1d] to-red-600 text-white font-semibold px-6 py-3 rounded-lg hover:from-red-600 hover:to-[#e51d1d] transition-all",children:[s.jsx(yf,{className:"w-5 h-5"}),"Download All Photos"]})}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:g.map((I,D)=>s.jsxs(Dr.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:D*.05},className:"group relative aspect-square rounded-lg overflow-hidden bg-[#1a1a2e]/50 border border-white/10 hover:border-[#e51d1d]/50 transition-all cursor-pointer",onClick:()=>_(D),children:[s.jsx("img",{src:I.thumbnail_url,alt:I.title,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity flex items-end p-4",children:s.jsx("p",{className:"text-white text-sm font-medium truncate",children:I.title})}),s.jsx("div",{className:"absolute top-2 right-2 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx("a",{href:pS(I.drive_url),download:!0,onClick:U=>U.stopPropagation(),className:"bg-black/50 backdrop-blur-sm p-2 rounded-lg hover:bg-[#e51d1d] transition-colors",children:s.jsx(yf,{className:"w-4 h-4 text-white"})})})]},I.id))})]})}),u==="videos"&&s.jsx(Dr.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:y.length===0?s.jsxs("div",{className:"bg-[#1a1a2e]/50 backdrop-blur-xl border border-white/10 rounded-xl p-12 text-center",children:[s.jsx(bh,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"No videos available"}),s.jsx("p",{className:"text-gray-400",children:"Videos for this event will be added soon."})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"flex justify-end mb-4",children:s.jsxs("button",{onClick:()=>x("videos"),className:"flex items-center gap-2 bg-gradient-to-r from-[#e51d1d] to-red-600 text-white font-semibold px-6 py-3 rounded-lg hover:from-red-600 hover:to-[#e51d1d] transition-all",children:[s.jsx(yf,{className:"w-5 h-5"}),"Download All Videos"]})}),s.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:y.map((I,D)=>s.jsxs(Dr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:D*.1},className:"bg-[#1a1a2e]/50 backdrop-blur-xl border border-white/10 rounded-xl overflow-hidden hover:border-[#e51d1d]/50 transition-all",children:[s.jsxs("div",{className:"relative aspect-video bg-black group",children:[s.jsx("img",{src:I.thumbnail_url,alt:I.title,className:"w-full h-full object-cover"}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30 group-hover:bg-black/50 transition-colors",children:s.jsx("div",{className:"w-16 h-16 rounded-full bg-[#e51d1d]/80 backdrop-blur-sm flex items-center justify-center group-hover:scale-110 transition-transform",children:s.jsx(Qd,{className:"w-8 h-8 text-white ml-1"})})}),I.duration&&s.jsx("div",{className:"absolute bottom-3 right-3 bg-black/80 backdrop-blur-sm px-2 py-1 rounded text-xs text-white font-medium",children:I.duration})]}),s.jsxs("div",{className:"p-5",children:[s.jsx("h3",{className:"text-lg font-bold text-white mb-3",children:I.title}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsxs("a",{href:pS(I.drive_url),download:!0,className:"flex items-center gap-2 bg-gradient-to-r from-[#e51d1d] to-red-600 text-white font-semibold px-4 py-2 rounded-lg hover:from-red-600 hover:to-[#e51d1d] transition-all text-sm",children:[s.jsx(yf,{className:"w-4 h-4"}),"Download"]}),s.jsxs("button",{onClick:()=>w(I,"facebook"),className:"flex items-center gap-2 bg-blue-600/20 border border-blue-500/30 text-blue-400 font-medium px-4 py-2 rounded-lg hover:bg-blue-600/30 transition-all text-sm",children:[s.jsx(I_,{className:"w-4 h-4"}),"Share"]}),s.jsxs("button",{onClick:()=>w(I,"instagram"),className:"flex items-center gap-2 bg-pink-600/20 border border-pink-500/30 text-pink-400 font-medium px-4 py-2 rounded-lg hover:bg-pink-600/30 transition-all text-sm",children:[s.jsx(HN,{className:"w-4 h-4"}),"Copy Link"]})]})]})]},I.id))})]})}),s.jsx(Gp,{children:d&&g[m]&&s.jsxs(Dr.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/95 backdrop-blur-xl flex items-center justify-center p-4",onClick:E,children:[s.jsx("button",{onClick:E,className:"absolute top-4 right-4 p-2 rounded-lg bg-white/10 hover:bg-white/20 transition-colors z-10",children:s.jsx(tg,{className:"w-6 h-6 text-white"})}),g.length>1&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:I=>{I.stopPropagation(),C()},className:"absolute left-4 p-3 rounded-lg bg-white/10 hover:bg-white/20 transition-colors z-10",children:s.jsx(LT,{className:"w-6 h-6 text-white"})}),s.jsx("button",{onClick:I=>{I.stopPropagation(),N()},className:"absolute right-4 p-3 rounded-lg bg-white/10 hover:bg-white/20 transition-colors z-10",children:s.jsx(U0,{className:"w-6 h-6 text-white"})})]}),s.jsx(Dr.img,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},src:g[m].drive_url,alt:g[m].title,className:"max-w-full max-h-full object-contain",onClick:I=>I.stopPropagation()},m),s.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-6",children:s.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-white font-semibold",children:g[m].title}),s.jsxs("p",{className:"text-gray-400 text-sm",children:[m+1," of ",g.length]})]}),s.jsxs("a",{href:pS(g[m].drive_url),download:!0,onClick:I=>I.stopPropagation(),className:"flex items-center gap-2 bg-[#e51d1d] text-white font-semibold px-6 py-3 rounded-lg hover:bg-red-600 transition-all",children:[s.jsx(yf,{className:"w-5 h-5"}),"Download"]})]})})]})})]})}function UDe(){const[t,e]=T.useState("upload"),[r,n]=T.useState([]),[i,a]=T.useState([]),[o,c]=T.useState(""),[u,l]=T.useState(""),[d,f]=T.useState("match"),[m,p]=T.useState([{type:"photo",title:"",drive_url:"",thumbnail_url:""}]),[g,y]=T.useState(!1),[x,w]=T.useState({name:"",date:"",venue:"",org_name:""});T.useEffect(()=>{_()},[]);const _=()=>{n(EDe()),a(SDe())},E=()=>{p([...m,{type:"photo",title:"",drive_url:"",thumbnail_url:""}])},N=G=>{p(m.filter((q,J)=>J!==G))},C=(G,q,J)=>{const de=[...m];de[G][q]=J,p(de)},I=()=>{if(!o||!u){alert("Please select both an athlete and an event");return}const G=m.filter(q=>q.drive_url.trim()!=="");if(G.length===0){alert("Please add at least one content item with a Drive URL");return}kDe(o,u,G,d),alert("Content assigned successfully!"),p([{type:"photo",title:"",drive_url:"",thumbnail_url:""}]),c(""),l(""),_()},D=()=>{if(!x.name||!x.date){alert("Please provide event name and date");return}TDe(x),w({name:"",date:"",venue:"",org_name:""}),y(!1),_()},U=G=>{const J=G.split(`
`).filter(de=>de.trim()!=="").map(de=>({type:"photo",title:"",drive_url:de.trim(),thumbnail_url:de.trim()}));p([...m,...J])};return s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Content Manager"}),s.jsx("p",{className:"text-gray-400",children:"Manage athlete content and access"})]}),s.jsxs("div",{className:"flex items-center gap-4 border-b border-white/10",children:[s.jsxs("button",{onClick:()=>e("upload"),className:`flex items-center gap-2 px-4 py-3 font-semibold transition-all ${t==="upload"?"text-[#e51d1d] border-b-2 border-[#e51d1d]":"text-gray-400 hover:text-white"}`,children:[s.jsx(bB,{className:"w-5 h-5"}),s.jsx("span",{children:"Upload Content"})]}),s.jsxs("button",{onClick:()=>e("athletes"),className:`flex items-center gap-2 px-4 py-3 font-semibold transition-all ${t==="athletes"?"text-[#e51d1d] border-b-2 border-[#e51d1d]":"text-gray-400 hover:text-white"}`,children:[s.jsx(nh,{className:"w-5 h-5"}),s.jsx("span",{children:"Manage Athletes"})]}),s.jsxs("button",{onClick:()=>e("events"),className:`flex items-center gap-2 px-4 py-3 font-semibold transition-all ${t==="events"?"text-[#e51d1d] border-b-2 border-[#e51d1d]":"text-gray-400 hover:text-white"}`,children:[s.jsx(ml,{className:"w-5 h-5"}),s.jsx("span",{children:"Manage Events"})]})]}),t==="upload"&&s.jsxs(Dr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-[#1a1a2e]/50 backdrop-blur-xl border border-white/10 rounded-xl p-6",children:[s.jsx("h2",{className:"text-xl font-bold text-white mb-6",children:"Assign Content to Athlete"}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Select Athlete"}),s.jsxs("select",{value:o,onChange:G=>c(G.target.value),className:"w-full bg-[#0d0d1a]/50 border border-white/10 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-[#e51d1d]/50",children:[s.jsx("option",{value:"",children:"Choose an athlete..."}),r.map(G=>s.jsxs("option",{value:G.id,children:[G.name," - ",G.email]},G.id))]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Select Event"}),s.jsxs("button",{onClick:()=>y(!g),className:"text-sm text-[#e51d1d] hover:text-red-400 transition-colors flex items-center gap-1",children:[s.jsx(jf,{className:"w-4 h-4"}),"New Event"]})]}),g&&s.jsxs("div",{className:"bg-[#0d0d1a]/50 border border-white/10 rounded-lg p-4 mb-4 space-y-3",children:[s.jsx("input",{type:"text",placeholder:"Event name",value:x.name,onChange:G=>w({...x,name:G.target.value}),className:"w-full bg-[#1a1a2e]/50 border border-white/10 rounded px-3 py-2 text-white text-sm"}),s.jsx("input",{type:"date",value:x.date,onChange:G=>w({...x,date:G.target.value}),className:"w-full bg-[#1a1a2e]/50 border border-white/10 rounded px-3 py-2 text-white text-sm"}),s.jsx("input",{type:"text",placeholder:"Venue (optional)",value:x.venue,onChange:G=>w({...x,venue:G.target.value}),className:"w-full bg-[#1a1a2e]/50 border border-white/10 rounded px-3 py-2 text-white text-sm"}),s.jsx("input",{type:"text",placeholder:"Organization name (optional)",value:x.org_name,onChange:G=>w({...x,org_name:G.target.value}),className:"w-full bg-[#1a1a2e]/50 border border-white/10 rounded px-3 py-2 text-white text-sm"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:D,className:"flex-1 bg-[#e51d1d] text-white px-4 py-2 rounded text-sm font-medium hover:bg-red-600 transition-colors",children:"Create Event"}),s.jsx("button",{onClick:()=>y(!1),className:"px-4 py-2 text-gray-400 hover:text-white transition-colors text-sm",children:"Cancel"})]})]}),s.jsxs("select",{value:u,onChange:G=>l(G.target.value),className:"w-full bg-[#0d0d1a]/50 border border-white/10 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-[#e51d1d]/50",children:[s.jsx("option",{value:"",children:"Choose an event..."}),i.map(G=>s.jsxs("option",{value:G.id,children:[G.name," - ",new Date(G.date).toLocaleDateString()]},G.id))]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Package Type"}),s.jsx("div",{className:"grid grid-cols-3 gap-4",children:["match","vip","season"].map(G=>s.jsx("button",{onClick:()=>f(G),className:`px-4 py-3 rounded-lg border-2 transition-all ${d===G?"border-[#e51d1d] bg-[#e51d1d]/20 text-white":"border-white/10 text-gray-400 hover:border-white/30"}`,children:G.charAt(0).toUpperCase()+G.slice(1)},G))})]}),s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Content Items"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:()=>{const G=prompt("Paste Google Drive URLs (one per line):");G&&U(G)},className:"text-sm text-[#e51d1d] hover:text-red-400 transition-colors flex items-center gap-1",children:[s.jsx(OY,{className:"w-4 h-4"}),"Batch Add URLs"]}),s.jsxs("button",{onClick:E,className:"text-sm text-[#e51d1d] hover:text-red-400 transition-colors flex items-center gap-1",children:[s.jsx(jf,{className:"w-4 h-4"}),"Add Row"]})]})]}),s.jsx("div",{className:"space-y-3",children:m.map((G,q)=>s.jsxs("div",{className:"grid grid-cols-12 gap-2 items-start",children:[s.jsxs("select",{value:G.type,onChange:J=>C(q,"type",J.target.value),className:"col-span-2 bg-[#0d0d1a]/50 border border-white/10 rounded px-3 py-2 text-white text-sm",children:[s.jsx("option",{value:"photo",children:"Photo"}),s.jsx("option",{value:"video",children:"Video"})]}),s.jsx("input",{type:"text",placeholder:"Title",value:G.title,onChange:J=>C(q,"title",J.target.value),className:"col-span-3 bg-[#0d0d1a]/50 border border-white/10 rounded px-3 py-2 text-white text-sm placeholder:text-gray-500"}),s.jsx("input",{type:"text",placeholder:"Google Drive URL",value:G.drive_url,onChange:J=>C(q,"drive_url",J.target.value),className:"col-span-6 bg-[#0d0d1a]/50 border border-white/10 rounded px-3 py-2 text-white text-sm placeholder:text-gray-500"}),s.jsx("button",{onClick:()=>N(q),className:"col-span-1 p-2 text-red-400 hover:text-red-300 transition-colors",children:s.jsx(tg,{className:"w-4 h-4"})})]},q))})]}),s.jsxs("button",{onClick:I,className:"w-full bg-gradient-to-r from-[#e51d1d] to-red-600 text-white font-semibold py-3 rounded-lg hover:from-red-600 hover:to-[#e51d1d] transition-all flex items-center justify-center gap-2",children:[s.jsx(MY,{className:"w-5 h-5"}),"Grant Access & Save"]})]}),t==="athletes"&&s.jsx(Dr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-4",children:s.jsx("div",{className:"bg-[#1a1a2e]/50 backdrop-blur-xl border border-white/10 rounded-xl overflow-hidden",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-[#0d0d1a]/50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-left p-4 text-gray-400 font-semibold",children:"Athlete"}),s.jsx("th",{className:"text-left p-4 text-gray-400 font-semibold",children:"Sport"}),s.jsx("th",{className:"text-center p-4 text-gray-400 font-semibold",children:"Events"}),s.jsx("th",{className:"text-center p-4 text-gray-400 font-semibold",children:"Photos"}),s.jsx("th",{className:"text-center p-4 text-gray-400 font-semibold",children:"Videos"}),s.jsx("th",{className:"text-left p-4 text-gray-400 font-semibold",children:"Contact"})]})}),s.jsx("tbody",{className:"divide-y divide-white/10",children:r.map(G=>{const q=IDe(G.id);return s.jsxs("tr",{className:"hover:bg-white/5 transition-colors",children:[s.jsx("td",{className:"p-4",children:s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-white",children:G.name}),G.gym&&s.jsx("div",{className:"text-sm text-gray-400",children:G.gym})]})}),s.jsx("td",{className:"p-4 text-gray-300",children:G.sport}),s.jsx("td",{className:"text-center p-4 text-gray-300",children:q.totalEvents}),s.jsx("td",{className:"text-center p-4 text-green-400",children:q.totalPhotos}),s.jsx("td",{className:"text-center p-4 text-purple-400",children:q.totalVideos}),s.jsx("td",{className:"p-4 text-gray-400 text-sm",children:G.email})]},G.id)})})]})})}),t==="events"&&s.jsx(Dr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-4",children:i.map(G=>{const q=LDe(G.id),J=[...new Set(q.map(de=>de.athlete_id))];return s.jsxs("div",{className:"bg-[#1a1a2e]/50 backdrop-blur-xl border border-white/10 rounded-xl p-6",children:[s.jsx("div",{className:"flex items-start justify-between mb-4",children:s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:G.name}),s.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-400",children:[s.jsx("span",{children:new Date(G.date).toLocaleDateString()}),G.venue&&s.jsxs("span",{children:[" ",G.venue]}),G.org_name&&s.jsxs("span",{children:[" ",G.org_name]})]})]})}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-4",children:[s.jsxs("div",{className:"bg-[#0d0d1a]/50 border border-white/10 rounded-lg p-4",children:[s.jsx("div",{className:"text-2xl font-bold text-white",children:J.length}),s.jsx("div",{className:"text-sm text-gray-400",children:"Athletes"})]}),s.jsxs("div",{className:"bg-[#0d0d1a]/50 border border-white/10 rounded-lg p-4",children:[s.jsx("div",{className:"text-2xl font-bold text-green-400",children:q.filter(de=>de.type==="photo").length}),s.jsx("div",{className:"text-sm text-gray-400",children:"Photos"})]}),s.jsxs("div",{className:"bg-[#0d0d1a]/50 border border-white/10 rounded-lg p-4",children:[s.jsx("div",{className:"text-2xl font-bold text-purple-400",children:q.filter(de=>de.type==="video").length}),s.jsx("div",{className:"text-sm text-gray-400",children:"Videos"})]})]})]},G.id)})})]})}function $De(){const[t,e]=T.useState([]),[r,n]=T.useState(null),[i,a]=T.useState([]),[o,c]=T.useState([]),[u,l]=T.useState([]),[d,f]=T.useState([]),[m,p]=T.useState([]),[g,y]=T.useState([]),[x,w]=T.useState(!0),[_,E]=T.useState("events"),[N,C]=T.useState(!1),[I,D]=T.useState(null),[U,G]=T.useState(null),[q,J]=T.useState({}),[de,xe]=T.useState(null),[we,ve]=T.useState([]),[ne,ae]=T.useState(!1),[oe,Ie]=T.useState([]),[Ce,be]=T.useState([]),Pe=new URLSearchParams(window.location.hash.split("?")[1]||"").get("org");T.useEffect(()=>{Re()},[]),T.useEffect(()=>{r&&He(r.id)},[r]);async function Re(){w(!0);const{data:ke}=await ir.from("organizations").select("*").order("name");if(e(ke||[]),Pe&&ke){const Xe=ke.find(mt=>mt.id===Pe);Xe&&(n(Xe),window.location.hash.includes("galleries")&&E("galleries"))}w(!1)}async function He(ke){const[Xe,mt,Jt,tr]=await Promise.all([ir.from("events").select("*").eq("organization_id",ke).order("date",{ascending:!0}),ir.from("packages").select("*").eq("organization_id",ke).order("sort_order"),ir.from("content_orders").select("*, events(name), packages(name)").eq("organization_id",ke).order("created_at",{ascending:!1}).limit(50),ir.from("galleries").select("*, events(name), gallery_photos(count)").eq("organization_id",ke).order("created_at",{ascending:!1})]);a(Xe.data||[]),c(mt.data||[]),p(Jt.data||[]),y(tr.data||[]);const lr=(Xe.data||[]).map(Pr=>Pr.id);if(lr.length>0){const[Pr,tn]=await Promise.all([ir.from("division_categories").select("*").in("event_id",lr).order("sort_order"),ir.from("division_subdivisions").select("*").order("sort_order")]);l(Pr.data||[]);const Gr=(Pr.data||[]).map(Xr=>Xr.id);f((tn.data||[]).filter(Xr=>Gr.includes(Xr.category_id)))}else l([]),f([])}async function Fe(){const{data:ke,error:Xe}=await ir.from("packages").select("*, organizations(name, display_name)").neq("organization_id",r?.id).order("name");!Xe&&ke&&Ie(ke)}async function ft(){if(Ce.length===0||!r)return;const Xe=oe.filter(Jt=>Ce.includes(Jt.id)).map(Jt=>({name:Jt.name,description:Jt.description,price:Jt.price,sort_order:Jt.sort_order,active:Jt.active,organization_id:r.id})),{error:mt}=await ir.from("packages").insert(Xe);mt?alert("Failed to import packages: "+mt.message):(ae(!1),be([]),He(r.id))}function at(ke){return u.filter(Xe=>Xe.event_id===ke)}function De(ke){return d.filter(Xe=>Xe.category_id===ke)}function ut(ke,Xe=null,mt=null){D(ke),G(Xe),ke==="org"?J(Xe||{name:"",display_name:"",legal_name:"",slug:"",description:"",logo_url:"",active:!0}):ke==="event"?J(Xe||{organization_id:r?.id,name:"",date:"",location:"",status:"upcoming",active:!0,divisions_required:!1}):ke==="package"?J(Xe||{organization_id:r?.id,name:"",description:"",price:"",sort_order:0,active:!0}):ke==="division-cat"?J(Xe||{event_id:mt||de,name:"",sort_order:0,active:!0}):ke==="division-sub"&&J(Xe||{category_id:mt,name:"",sort_order:0,active:!0}),C(!0)}async function et(){try{if(I==="org")U?.id?await ir.from("organizations").update(q).eq("id",U.id):await ir.from("organizations").insert(q),Re();else if(I==="event"){const ke={...q,organization_id:r.id};U?.id?await ir.from("events").update(ke).eq("id",U.id):await ir.from("events").insert(ke),He(r.id)}else if(I==="package"){const ke={...q,organization_id:r.id,price:parseFloat(q.price)};U?.id?await ir.from("packages").update(ke).eq("id",U.id):await ir.from("packages").insert(ke),He(r.id)}else I==="division-cat"?(U?.id?await ir.from("division_categories").update(q).eq("id",U.id):await ir.from("division_categories").insert(q),He(r.id)):I==="division-sub"&&(U?.id?await ir.from("division_subdivisions").update(q).eq("id",U.id):await ir.from("division_subdivisions").insert(q),He(r.id));C(!1)}catch(ke){console.error("Save error:",ke),alert("Error saving. Check console.")}}async function Ue(ke,Xe){if(ke==="organizations"){await jt(Xe);return}if(!confirm("Are you sure you want to delete this item?"))return;const{error:mt}=await ir.from(ke).delete().eq("id",Xe);if(mt){console.error("Delete error:",mt),alert(`Failed to delete: ${mt.message}`);return}He(r.id)}async function jt(ke){const Xe=t.find(wn=>wn.id===ke);if(!Xe)return;const[mt,Jt,tr,lr]=await Promise.all([ir.from("events").select("id, name").eq("organization_id",ke),ir.from("packages").select("id, name").eq("organization_id",ke),ir.from("content_orders").select("id").eq("organization_id",ke),ir.from("livestream_events").select("id, title").eq("organization_id",ke)]),Pr=mt.data||[],tn=Jt.data||[],Gr=tr.data||[],Xr=lr.data||[];let Qr=` DELETE "${Xe.display_name||Xe.name}"?

This will also delete:
`;if(Pr.length>0&&(Qr+=`
 ${Pr.length} event${Pr.length>1?"s":""}`,Pr.slice(0,3).forEach(wn=>{Qr+=`
    ${wn.name}`}),Pr.length>3&&(Qr+=`
    ...and ${Pr.length-3} more`)),tn.length>0&&(Qr+=`

 ${tn.length} package${tn.length>1?"s":""}`,tn.slice(0,3).forEach(wn=>{Qr+=`
    ${wn.name}`}),tn.length>3&&(Qr+=`
    ...and ${tn.length-3} more`)),Xr.length>0&&(Qr+=`

 ${Xr.length} livestream event${Xr.length>1?"s":""}`,Xr.slice(0,3).forEach(wn=>{Qr+=`
    ${wn.title}`}),Xr.length>3&&(Qr+=`
    ...and ${Xr.length-3} more`)),Gr.length>0&&(Qr+=`

 ${Gr.length} order${Gr.length>1?"s":""}`),Pr.length+tn.length+Gr.length+Xr.length===0?Qr=`Delete "${Xe.display_name||Xe.name}"?

No related items will be affected.`:Qr+=`

 THIS CANNOT BE UNDONE!`,!!confirm(Qr))try{Gr.length>0&&await ir.from("content_orders").delete().eq("organization_id",ke),tn.length>0&&await ir.from("packages").delete().eq("organization_id",ke);for(const yi of Pr){const{data:ot}=await ir.from("division_categories").select("id").eq("event_id",yi.id);if(ot&&ot.length>0){for(const Gt of ot)await ir.from("division_subdivisions").delete().eq("category_id",Gt.id);await ir.from("division_categories").delete().eq("event_id",yi.id)}await ir.from("events").delete().eq("id",yi.id)}Xr.length>0&&await ir.from("livestream_events").update({organization_id:null}).eq("organization_id",ke);const{error:wn}=await ir.from("organizations").delete().eq("id",ke);if(wn)throw wn;Re(),r?.id===ke&&n(null)}catch(wn){console.error("Cascade delete error:",wn),alert(`Failed to delete: ${wn.message}`)}}async function rt(ke,Xe,mt){await ir.from(ke).update({active:!mt}).eq("id",Xe),ke==="organizations"?Re():He(r.id)}if(x)return s.jsx("div",{className:"p-8 text-gray-400",children:"Loading..."});if(!r)return s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Content Management"}),s.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Select an organization to manage its events, packages, and divisions"})]}),s.jsx("button",{onClick:()=>ut("org"),className:"px-4 py-2 bg-red-600 hover:bg-red-700 rounded-lg text-sm font-medium",children:"+ Add Organization"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(ke=>s.jsxs("div",{onClick:()=>n(ke),className:"bg-gray-900/50 rounded-xl border border-gray-800 p-6 cursor-pointer hover:border-red-500/50 hover:bg-gray-900/80 transition-all group",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[ke.logo_url?s.jsx("img",{src:Mh(ke.logo_url),alt:ke.name,className:"w-12 h-12 rounded-lg object-cover"}):s.jsx("div",{className:"w-12 h-12 rounded-lg bg-gradient-to-br from-red-600 to-red-800 flex items-center justify-center text-xl font-bold",children:ke.name.charAt(0)}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-lg group-hover:text-red-400 transition-colors",children:ke.display_name||ke.name}),ke.display_name&&ke.display_name!==ke.name&&s.jsx("p",{className:"text-xs text-gray-400",children:ke.name}),s.jsxs("p",{className:"text-xs text-gray-500",children:["/",ke.slug]})]})]}),!ke.active&&s.jsx("span",{className:"text-xs bg-gray-700 px-2 py-1 rounded",children:"Inactive"})]}),ke.description&&s.jsx("p",{className:"text-sm text-gray-400 line-clamp-2",children:ke.description}),s.jsxs("div",{className:"mt-4 flex gap-2",children:[s.jsx("button",{onClick:Xe=>{Xe.stopPropagation(),ut("org",ke)},className:"text-xs text-blue-400 hover:text-blue-300",children:"Edit"}),s.jsx("button",{onClick:Xe=>{Xe.stopPropagation(),rt("organizations",ke.id,ke.active)},className:"text-xs text-gray-400 hover:text-white",children:ke.active?"Deactivate":"Activate"}),s.jsx("button",{onClick:Xe=>{Xe.stopPropagation(),Ue("organizations",ke.id)},className:"text-xs text-red-400 hover:text-red-300",children:"Delete"})]})]},ke.id))}),N&&Ct()]});return s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[s.jsx("button",{onClick:()=>n(null),className:"text-gray-400 hover:text-white transition-colors",children:" Back"}),s.jsxs("div",{className:"flex items-center gap-3",children:[r.logo_url?s.jsx("img",{src:Mh(r.logo_url),alt:r.name,className:"w-10 h-10 rounded-lg object-cover"}):s.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-red-600 to-red-800 flex items-center justify-center text-lg font-bold",children:r.name.charAt(0)}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:r.name}),s.jsxs("p",{className:"text-xs text-gray-500",children:["/",r.slug]})]})]})]}),s.jsx("div",{className:"flex gap-2 mb-6 border-b border-gray-700 pb-2",children:["events","packages","divisions","galleries","orders"].map(ke=>s.jsxs("button",{onClick:()=>E(ke),className:`px-4 py-2 rounded-t-lg capitalize transition-colors ${_===ke?"bg-red-600 text-white":"text-gray-400 hover:text-white"}`,children:[ke," ",ke==="events"&&`(${i.length})`,ke==="packages"&&`(${o.length})`,ke==="galleries"&&`(${g.length})`,ke==="orders"&&`(${m.length})`]},ke))}),_==="events"&&s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Upcoming Events"}),s.jsx("button",{onClick:()=>ut("event"),className:"px-4 py-2 bg-red-600 hover:bg-red-700 rounded-lg text-sm",children:"+ Add Event"})]}),i.length===0?s.jsx("div",{className:"bg-gray-900/50 rounded-xl border border-gray-800 p-8 text-center text-gray-400",children:"No events yet. Add one to get started."}):s.jsx("div",{className:"bg-gray-900/50 rounded-xl border border-gray-800 overflow-hidden",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{className:"bg-gray-800",children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-left p-3",children:"Event Name"}),s.jsx("th",{className:"text-left p-3",children:"Date"}),s.jsx("th",{className:"text-left p-3",children:"Location"}),s.jsx("th",{className:"text-center p-3",children:"Status"}),s.jsx("th",{className:"text-center p-3",children:"Active"}),s.jsx("th",{className:"text-right p-3",children:"Actions"})]})}),s.jsx("tbody",{children:i.map(ke=>s.jsxs("tr",{className:"border-t border-gray-800",children:[s.jsx("td",{className:"p-3 font-medium",children:ke.name}),s.jsx("td",{className:"p-3 text-gray-400",children:ke.date&&new Date(ke.date).toLocaleDateString("en-AU",{weekday:"short",day:"numeric",month:"short",year:"numeric"})}),s.jsx("td",{className:"p-3 text-gray-400",children:ke.location}),s.jsx("td",{className:"p-3 text-center",children:s.jsx("span",{className:`px-2 py-1 rounded text-xs ${ke.status==="upcoming"?"bg-blue-600":ke.status==="active"?"bg-green-600":"bg-gray-600"}`,children:ke.status})}),s.jsx("td",{className:"p-3 text-center",children:s.jsx("button",{onClick:()=>rt("events",ke.id,ke.active),className:`px-2 py-1 rounded text-xs ${ke.active?"bg-green-600":"bg-gray-600"}`,children:ke.active?"Yes":"No"})}),s.jsxs("td",{className:"p-3 text-right space-x-2",children:[s.jsx("button",{onClick:()=>ut("event",ke),className:"text-blue-400 hover:text-blue-300",children:"Edit"}),s.jsx("button",{onClick:()=>Ue("events",ke.id),className:"text-red-400 hover:text-red-300",children:"Delete"})]})]},ke.id))})]})})]}),_==="packages"&&s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Content Packages"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>{Fe(),ae(!0)},className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg text-sm",children:"Import from..."}),s.jsx("button",{onClick:()=>ut("package"),className:"px-4 py-2 bg-red-600 hover:bg-red-700 rounded-lg text-sm",children:"+ Add Package"})]})]}),o.length===0?s.jsx("div",{className:"bg-gray-900/50 rounded-xl border border-gray-800 p-8 text-center text-gray-400",children:"No packages yet. Add one to get started, or import from another organization."}):s.jsx("div",{className:"bg-gray-900/50 rounded-xl border border-gray-800 overflow-hidden",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{className:"bg-gray-800",children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-left p-3",children:"Package Name"}),s.jsx("th",{className:"text-left p-3",children:"Description"}),s.jsx("th",{className:"text-right p-3",children:"Price"}),s.jsx("th",{className:"text-center p-3",children:"Active"}),s.jsx("th",{className:"text-right p-3",children:"Actions"})]})}),s.jsx("tbody",{children:o.map(ke=>s.jsxs("tr",{className:"border-t border-gray-800",children:[s.jsx("td",{className:"p-3 font-medium",children:ke.name}),s.jsx("td",{className:"p-3 text-gray-400 truncate max-w-xs",children:ke.description}),s.jsxs("td",{className:"p-3 text-right font-semibold text-green-400",children:["$",ke.price]}),s.jsx("td",{className:"p-3 text-center",children:s.jsx("button",{onClick:()=>rt("packages",ke.id,ke.active),className:`px-2 py-1 rounded text-xs ${ke.active?"bg-green-600":"bg-gray-600"}`,children:ke.active?"Yes":"No"})}),s.jsxs("td",{className:"p-3 text-right space-x-2",children:[s.jsx("button",{onClick:()=>ut("package",ke),className:"text-blue-400 hover:text-blue-300",children:"Edit"}),s.jsx("button",{onClick:()=>Ue("packages",ke.id),className:"text-red-400 hover:text-red-300",children:"Delete"})]})]},ke.id))})]})})]}),_==="divisions"&&s.jsx("div",{children:s.jsxs("div",{className:"mb-6",children:[s.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Divisions by Event"}),s.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Select an event to manage its division categories and subdivisions"}),i.length===0?s.jsx("div",{className:"bg-gray-900/50 rounded-xl border border-gray-800 p-8 text-center text-gray-400",children:"Add events first, then you can manage their divisions."}):s.jsxs(s.Fragment,{children:[s.jsxs("select",{value:de||"",onChange:ke=>xe(ke.target.value),className:"w-full max-w-md px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg",children:[s.jsx("option",{value:"",children:"Select an event..."}),i.map(ke=>s.jsxs("option",{value:ke.id,children:[ke.name," (",ke.date&&new Date(ke.date).toLocaleDateString("en-AU"),")"]},ke.id))]}),de&&s.jsxs("div",{className:"mt-6 space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("h3",{className:"text-lg font-semibold",children:["Division Categories (",at(de).length,")"]}),s.jsx("button",{onClick:()=>ut("division-cat",null,de),className:"px-4 py-2 bg-red-600 hover:bg-red-700 rounded-lg text-sm",children:"+ Add Category"})]}),at(de).length===0?s.jsx("div",{className:"bg-gray-900/50 rounded-xl border border-gray-800 p-8 text-center text-gray-400",children:"No division categories for this event yet."}):s.jsx("div",{className:"space-y-3",children:at(de).map(ke=>s.jsxs("div",{className:"bg-gray-900/50 rounded-xl border border-gray-800 overflow-hidden",children:[s.jsxs("div",{className:"p-4 flex justify-between items-center bg-gray-800/50",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{onClick:()=>ve(Xe=>Xe.includes(ke.id)?Xe.filter(mt=>mt!==ke.id):[...Xe,ke.id]),className:"text-gray-400 hover:text-white",children:s.jsx("svg",{className:`w-5 h-5 transition-transform ${we.includes(ke.id)?"rotate-90":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),s.jsx("span",{className:"font-semibold",children:ke.name}),s.jsxs("span",{className:"text-xs text-gray-400",children:["(",De(ke.id).length," subdivisions)"]}),!ke.active&&s.jsx("span",{className:"text-xs bg-gray-600 px-2 py-0.5 rounded",children:"Inactive"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>ut("division-cat",ke),className:"text-blue-400 hover:text-blue-300 text-sm",children:"Edit"}),s.jsx("button",{onClick:()=>Ue("division_categories",ke.id),className:"text-red-400 hover:text-red-300 text-sm",children:"Delete"})]})]}),we.includes(ke.id)&&s.jsxs("div",{className:"p-4 border-t border-gray-700",children:[s.jsxs("div",{className:"flex justify-between items-center mb-3",children:[s.jsx("span",{className:"text-sm text-gray-400",children:"Subdivisions:"}),s.jsx("button",{onClick:()=>ut("division-sub",null,ke.id),className:"text-sm text-green-400 hover:text-green-300",children:"+ Add Subdivision"})]}),De(ke.id).length===0?s.jsx("p",{className:"text-sm text-gray-500 italic",children:"No subdivisions yet"}):s.jsx("div",{className:"flex flex-wrap gap-2",children:De(ke.id).map(Xe=>s.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-1.5 rounded-lg border text-sm ${Xe.active?"bg-gray-800 border-gray-600":"bg-gray-900 border-gray-700 opacity-50"}`,children:[s.jsx("span",{children:Xe.name}),s.jsx("button",{onClick:()=>ut("division-sub",Xe,ke.id),className:"text-blue-400 hover:text-blue-300",children:""}),s.jsx("button",{onClick:()=>Ue("division_subdivisions",Xe.id),className:"text-red-400 hover:text-red-300",children:""})]},Xe.id))})]})]},ke.id))}),r.slug==="nba"&&s.jsxs("div",{className:"mt-6 p-4 bg-blue-900/20 border border-blue-800 rounded-xl",children:[s.jsx("h4",{className:"font-semibold text-blue-400 mb-2",children:"Quick Add: Standard NBA Divisions"}),s.jsx("p",{className:"text-sm text-gray-400 mb-3",children:"Add all standard NBA bodybuilding divisions for this event"}),s.jsx("button",{onClick:async ke=>{const Xe=ke.target,mt=Xe.innerText;if(!de){alert("Please select an event first");return}if(window.confirm("Add all standard NBA divisions to this event?")){Xe.disabled=!0,Xe.innerText="Adding divisions...";try{const Jt={"Men's Physique":["Novice","Open","Masters 40+","Masters 50+","Junior"],"Classic Physique":["Novice","Open","Masters 40+","Masters 50+"],Bodybuilding:["Novice","Open","Masters 40+","Masters 50+","Junior"],Figure:["Novice","Open","Masters 35+","Masters 45+","Junior"],Bikini:["Novice","Open","Masters 35+","Masters 45+","Junior"],Wellness:["Novice","Open","Masters 35+","Masters 45+"],"Fitness Model":["Open","Masters"],"Sports Model":["Open","Masters"],Transformation:["Open"]};let tr=0,lr=0;for(const[Pr,tn]of Object.entries(Jt)){const{data:Gr,error:Xr}=await ir.from("division_categories").insert({event_id:de,name:Pr,sort_order:tr++,active:!0}).select().single();if(Xr){console.error("Error adding category:",Pr,Xr);continue}if(Gr){lr++;let Qr=0;for(const Pn of tn){const{error:wn}=await ir.from("division_subdivisions").insert({category_id:Gr.id,name:Pn,sort_order:Qr++,active:!0});wn&&console.error("Error adding subdivision:",Pn,wn)}}}alert(`Added ${lr} division categories with subdivisions!`),await He(r.id)}catch(Jt){console.error("Error adding divisions:",Jt),alert("Error adding divisions: "+Jt.message)}finally{Xe.disabled=!1,Xe.innerText=mt}}},className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg text-sm disabled:opacity-50",children:"Add Standard NBA Divisions"})]})]})]})]})}),_==="galleries"&&s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Photo Galleries"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("a",{href:`/#/portal/galleries?org=${r.id}&create=true`,className:"px-4 py-2 bg-red-600 hover:bg-red-700 rounded-lg text-sm",children:"+ New Gallery"}),g.length>0&&s.jsx("a",{href:`/#/portal/galleries?org=${r.id}`,className:"px-4 py-2 bg-dark-600 hover:bg-dark-500 rounded-lg text-sm",children:"Manage All"})]})]}),g.length===0?s.jsx("div",{className:"bg-gray-900/50 rounded-xl border border-gray-800 p-8 text-center text-gray-400",children:"No galleries yet. Create one to start selling event photos."}):s.jsx("div",{className:"bg-gray-900/50 rounded-xl border border-gray-800 overflow-hidden",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{className:"bg-gray-800",children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-left p-3",children:"Gallery Name"}),s.jsx("th",{className:"text-left p-3",children:"Event"}),s.jsx("th",{className:"text-center p-3",children:"Photos"}),s.jsx("th",{className:"text-right p-3",children:"Price/Photo"}),s.jsx("th",{className:"text-center p-3",children:"Status"}),s.jsx("th",{className:"text-right p-3",children:"Actions"})]})}),s.jsx("tbody",{children:g.map(ke=>s.jsxs("tr",{className:"border-t border-gray-800",children:[s.jsx("td",{className:"p-3 font-medium",children:ke.title}),s.jsx("td",{className:"p-3 text-gray-400",children:ke.events?.name||""}),s.jsx("td",{className:"p-3 text-center",children:ke.gallery_photos?.[0]?.count||0}),s.jsxs("td",{className:"p-3 text-right font-semibold text-green-400",children:["$",(ke.price_per_photo/100).toFixed(2)]}),s.jsx("td",{className:"p-3 text-center",children:s.jsx("span",{className:`px-2 py-1 rounded text-xs ${ke.status==="published"?"bg-green-600":ke.status==="draft"?"bg-yellow-600":"bg-gray-600"}`,children:ke.status})}),s.jsxs("td",{className:"p-3 text-right space-x-2",children:[s.jsx("a",{href:`/#/portal/galleries?edit=${ke.id}`,className:"text-blue-400 hover:text-blue-300",children:"Edit"}),ke.status==="published"&&s.jsx("a",{href:`/#/gallery/${ke.slug}`,target:"_blank",className:"text-green-400 hover:text-green-300",children:"View"})]})]},ke.id))})]})})]}),_==="orders"&&s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Recent Orders"}),s.jsx("div",{className:"bg-gray-900/50 rounded-xl border border-gray-800 overflow-hidden",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{className:"bg-gray-800",children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-left p-3",children:"Date"}),s.jsx("th",{className:"text-left p-3",children:"Athlete"}),s.jsx("th",{className:"text-left p-3",children:"Email"}),s.jsx("th",{className:"text-left p-3",children:"Event"}),s.jsx("th",{className:"text-left p-3",children:"Package"}),s.jsx("th",{className:"text-right p-3",children:"Amount"}),s.jsx("th",{className:"text-center p-3",children:"Status"})]})}),s.jsx("tbody",{children:m.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:"7",className:"p-8 text-center text-gray-400",children:"No orders yet"})}):m.map(ke=>s.jsxs("tr",{className:"border-t border-gray-800",children:[s.jsx("td",{className:"p-3 text-gray-400",children:new Date(ke.created_at).toLocaleDateString("en-AU")}),s.jsxs("td",{className:"p-3 font-medium",children:[ke.first_name," ",ke.last_name]}),s.jsx("td",{className:"p-3 text-gray-400",children:ke.email}),s.jsx("td",{className:"p-3 text-gray-400",children:ke.events?.name}),s.jsx("td",{className:"p-3 text-gray-400",children:ke.packages?.name}),s.jsxs("td",{className:"p-3 text-right font-semibold",children:["$",ke.amount]}),s.jsx("td",{className:"p-3 text-center",children:s.jsx("span",{className:`px-2 py-1 rounded text-xs ${ke.status==="paid"?"bg-green-600":ke.status==="delivered"?"bg-blue-600":ke.status==="pending"?"bg-yellow-600":"bg-gray-600"}`,children:ke.status})})]},ke.id))})]})})]}),N&&Ct(),ne&&s.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-gray-900 rounded-xl border border-gray-700 p-6 w-full max-w-lg max-h-[80vh] overflow-hidden flex flex-col",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Import Packages from Other Organizations"}),oe.length===0?s.jsx("p",{className:"text-gray-400 text-center py-8",children:"No packages available to import from other organizations."}):s.jsx("div",{className:"flex-1 overflow-y-auto mb-4 space-y-2",children:Object.entries(oe.reduce((ke,Xe)=>{const mt=Xe.organizations?.display_name||Xe.organizations?.name||"Unknown";return ke[mt]||(ke[mt]=[]),ke[mt].push(Xe),ke},{})).map(([ke,Xe])=>s.jsxs("div",{className:"border border-gray-700 rounded-lg overflow-hidden",children:[s.jsx("div",{className:"bg-gray-800 px-3 py-2 font-medium text-sm",children:ke}),s.jsx("div",{className:"divide-y divide-gray-800",children:Xe.map(mt=>s.jsxs("label",{className:"flex items-center gap-3 px-3 py-2 hover:bg-gray-800/50 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:Ce.includes(mt.id),onChange:Jt=>{Jt.target.checked?be(tr=>[...tr,mt.id]):be(tr=>tr.filter(lr=>lr!==mt.id))},className:"w-4 h-4 rounded"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium",children:mt.name}),mt.description&&s.jsx("div",{className:"text-xs text-gray-400 truncate",children:mt.description})]}),s.jsxs("div",{className:"text-green-400 font-semibold",children:["$",mt.price]})]},mt.id))})]},ke))}),s.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-700",children:[s.jsx("button",{onClick:()=>{ae(!1),be([])},className:"flex-1 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg",children:"Cancel"}),s.jsxs("button",{onClick:ft,disabled:Ce.length===0,className:"flex-1 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:["Import ",Ce.length>0&&`(${Ce.length})`]})]})]})})]});function Ct(){return s.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-gray-900 rounded-xl border border-gray-700 p-6 w-full max-w-md",children:[s.jsxs("h3",{className:"text-lg font-semibold mb-4",children:[U?"Edit":"Add"," ",I==="org"?"Organization":I==="event"?"Event":I==="package"?"Package":I==="division-cat"?"Division Category":I==="division-sub"?"Subdivision":""]}),s.jsxs("div",{className:"space-y-4",children:[I==="org"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Organization Name *"}),s.jsx("input",{type:"text",value:q.name||"",onChange:ke=>J({...q,name:ke.target.value}),placeholder:"e.g., World Ninja Games",className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Display Name (Short)"}),s.jsx("input",{type:"text",value:q.display_name||"",onChange:ke=>J({...q,display_name:ke.target.value}),placeholder:"e.g., WNG",className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Shown on livestream cards & filters"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Legal Name"}),s.jsx("input",{type:"text",value:q.legal_name||"",onChange:ke=>J({...q,legal_name:ke.target.value}),placeholder:"e.g., World Ninja Games Pty Ltd",className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"For contracts & invoices"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Slug (URL-friendly)"}),s.jsx("input",{type:"text",value:q.slug||"",onChange:ke=>J({...q,slug:ke.target.value.toLowerCase().replace(/\s+/g,"-")}),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Logo URL"}),s.jsx("input",{type:"text",value:q.logo_url||"",onChange:ke=>J({...q,logo_url:ke.target.value}),placeholder:"https://...",className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Description"}),s.jsx("textarea",{value:q.description||"",onChange:ke=>J({...q,description:ke.target.value}),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg",rows:3})]}),s.jsxs("div",{className:"border-t border-gray-700 pt-4 mt-4",children:[s.jsx("p",{className:"text-sm text-gray-400 mb-3 font-medium",children:"Contact / Organizer"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Contact Name"}),s.jsx("input",{type:"text",value:q.contact_name||"",onChange:ke=>J({...q,contact_name:ke.target.value}),placeholder:"e.g., Phil Cassidy",className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Contact Email"}),s.jsx("input",{type:"email",value:q.contact_email||"",onChange:ke=>J({...q,contact_email:ke.target.value}),placeholder:"email@example.com",className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Contact Phone"}),s.jsx("input",{type:"tel",value:q.contact_phone||"",onChange:ke=>J({...q,contact_phone:ke.target.value}),placeholder:"+61 400 000 000",className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg"})]})]})]})]})]}),I==="event"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Event Name"}),s.jsx("input",{type:"text",value:q.name||"",onChange:ke=>J({...q,name:ke.target.value}),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Date"}),s.jsx("input",{type:"date",value:q.date||"",onChange:ke=>J({...q,date:ke.target.value}),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Location"}),s.jsx("input",{type:"text",value:q.location||"",onChange:ke=>J({...q,location:ke.target.value}),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Status"}),s.jsxs("select",{value:q.status||"upcoming",onChange:ke=>J({...q,status:ke.target.value}),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg",children:[s.jsx("option",{value:"upcoming",children:"Upcoming"}),s.jsx("option",{value:"active",children:"Active"}),s.jsx("option",{value:"completed",children:"Completed"})]})]}),s.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:q.divisions_required||!1,onChange:ke=>J({...q,divisions_required:ke.target.checked}),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-red-600"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm text-white",children:"Require Divisions"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Athletes must select a division when ordering"})]})]})]}),I==="package"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Package Name"}),s.jsx("input",{type:"text",value:q.name||"",onChange:ke=>J({...q,name:ke.target.value}),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Description"}),s.jsx("input",{type:"text",value:q.description||"",onChange:ke=>J({...q,description:ke.target.value}),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Price (AUD)"}),s.jsx("input",{type:"number",value:q.price||"",onChange:ke=>J({...q,price:ke.target.value}),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Sort Order"}),s.jsx("input",{type:"number",value:q.sort_order||0,onChange:ke=>J({...q,sort_order:parseInt(ke.target.value)}),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg"})]})]})]}),I==="division-cat"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Category Name"}),s.jsx("input",{type:"text",value:q.name||"",onChange:ke=>J({...q,name:ke.target.value}),placeholder:"e.g., Men's Physique, Bikini, Figure",className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Sort Order"}),s.jsx("input",{type:"number",value:q.sort_order||0,onChange:ke=>J({...q,sort_order:parseInt(ke.target.value)}),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg"})]})]}),I==="division-sub"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Subdivision Name"}),s.jsx("input",{type:"text",value:q.name||"",onChange:ke=>J({...q,name:ke.target.value}),placeholder:"e.g., Novice, Open, Masters 40+",className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Sort Order"}),s.jsx("input",{type:"number",value:q.sort_order||0,onChange:ke=>J({...q,sort_order:parseInt(ke.target.value)}),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg"})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",id:"active",checked:q.active??!0,onChange:ke=>J({...q,active:ke.target.checked}),className:"rounded"}),s.jsx("label",{htmlFor:"active",className:"text-sm text-gray-400",children:"Active"})]})]}),s.jsxs("div",{className:"flex gap-3 mt-6",children:[s.jsx("button",{onClick:()=>C(!1),className:"flex-1 py-2 border border-gray-600 rounded-lg hover:bg-gray-800",children:"Cancel"}),s.jsx("button",{onClick:et,className:"flex-1 py-2 bg-red-600 hover:bg-red-700 rounded-lg",children:"Save"})]})]})})}}function HDe(){const[t,e]=T.useState([]),[r,n]=T.useState([]),[i,a]=T.useState([]),[o,c]=T.useState([]),[u,l]=T.useState(!0),[d,f]=T.useState("all"),[m,p]=T.useState("all"),[g,y]=T.useState(""),[x,w]=T.useState(""),[_,E]=T.useState(""),[N,C]=T.useState(null);T.useEffect(()=>{I()},[]);async function I(){l(!0);const{data:we}=await ir.from("organizations").select("*").order("name");n(we||[]);const{data:ve}=await ir.from("events").select("*").order("date",{ascending:!1});a(ve||[]);const{data:ne}=await ir.from("packages").select("*").order("name");c(ne||[]);const{data:ae}=await ir.from("content_orders").select("*").order("created_at",{ascending:!1});e(ae||[]),l(!1)}async function D(we){const{error:ve}=await ir.from("content_orders").update({status:"delivered",delivered_at:new Date().toISOString()}).eq("id",we);ve?alert("Failed to update order status"):I()}function U(we){return r.find(ve=>ve.id===we)?.name||"Unknown"}function G(we){return i.find(ve=>ve.id===we)?.name||"Unknown"}function q(we){return o.find(ve=>ve.id===we)?.name||"Unknown"}const J=t.filter(we=>{if(d!=="all"&&we.organization_id!==d||m!=="all"&&we.status!==m||g&&new Date(we.created_at)<new Date(g)||x&&new Date(we.created_at)>new Date(x+"T23:59:59"))return!1;if(_){const ve=_.toLowerCase(),ne=`${we.first_name} ${we.last_name}`.toLowerCase(),ae=we.email?.toLowerCase()||"",oe=we.phone?.toLowerCase()||"";if(!ne.includes(ve)&&!ae.includes(ve)&&!oe.includes(ve))return!1}return!0}),de=J.filter(we=>we.status==="paid"||we.status==="delivered").reduce((we,ve)=>we+(parseFloat(ve.amount)||0),0);function xe(){const we=["Date","Customer","Email","Phone","Organization","Event","Package","Amount","Status"],ve=J.map(Ce=>[new Date(Ce.created_at).toLocaleDateString(),`${Ce.first_name} ${Ce.last_name}`,Ce.email,Ce.phone||"",U(Ce.organization_id),G(Ce.event_id),q(Ce.package_id),Ce.amount,Ce.status]),ne=[we,...ve].map(Ce=>Ce.join(",")).join(`
`),ae=new Blob([ne],{type:"text/csv"}),oe=URL.createObjectURL(ae),Ie=document.createElement("a");Ie.href=oe,Ie.download=`orders-${new Date().toISOString().split("T")[0]}.csv`,Ie.click()}return u?s.jsx("div",{className:"min-h-screen bg-black text-white flex items-center justify-center",children:s.jsx("div",{className:"text-gray-400",children:"Loading orders..."})}):s.jsxs("div",{className:"min-h-screen bg-black text-white p-6",children:[s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs("div",{className:"flex justify-between items-center mb-8",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Order Management"}),s.jsxs("p",{className:"text-gray-400 mt-1",children:[J.length," orders  $",de.toFixed(2)," AUD revenue"]})]}),s.jsxs("button",{onClick:xe,className:"px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg hover:bg-gray-700 flex items-center gap-2",children:[s.jsx("span",{children:""}),"Export CSV"]})]}),s.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 mb-6 border border-gray-800",children:[s.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Filters"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Organization"}),s.jsxs("select",{value:d,onChange:we=>f(we.target.value),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg",children:[s.jsx("option",{value:"all",children:"All Organizations"}),r.map(we=>s.jsx("option",{value:we.id,children:we.name},we.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Status"}),s.jsxs("select",{value:m,onChange:we=>p(we.target.value),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg",children:[s.jsx("option",{value:"all",children:"All Statuses"}),s.jsx("option",{value:"pending",children:"Pending"}),s.jsx("option",{value:"paid",children:"Paid"}),s.jsx("option",{value:"processing",children:"Processing"}),s.jsx("option",{value:"delivered",children:"Delivered"}),s.jsx("option",{value:"refunded",children:"Refunded"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"From Date"}),s.jsx("input",{type:"date",value:g,onChange:we=>y(we.target.value),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"To Date"}),s.jsx("input",{type:"date",value:x,onChange:we=>w(we.target.value),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg"})]})]}),s.jsxs("div",{className:"mt-4",children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Search (Name, Email, Phone)"}),s.jsx("input",{type:"text",value:_,onChange:we=>E(we.target.value),placeholder:"Search orders...",className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg"})]})]}),s.jsx("div",{className:"bg-gray-900 rounded-lg overflow-hidden border border-gray-800",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-800",children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-left p-4 text-sm font-semibold",children:"Date"}),s.jsx("th",{className:"text-left p-4 text-sm font-semibold",children:"Customer"}),s.jsx("th",{className:"text-left p-4 text-sm font-semibold",children:"Organization"}),s.jsx("th",{className:"text-left p-4 text-sm font-semibold",children:"Event"}),s.jsx("th",{className:"text-left p-4 text-sm font-semibold",children:"Package"}),s.jsx("th",{className:"text-right p-4 text-sm font-semibold",children:"Amount"}),s.jsx("th",{className:"text-center p-4 text-sm font-semibold",children:"Status"}),s.jsx("th",{className:"text-center p-4 text-sm font-semibold",children:"Actions"})]})}),s.jsx("tbody",{children:J.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:"8",className:"text-center p-8 text-gray-500",children:"No orders found"})}):J.map(we=>s.jsxs("tr",{className:"border-t border-gray-800 hover:bg-gray-800/50",children:[s.jsxs("td",{className:"p-4 text-sm",children:[new Date(we.created_at).toLocaleDateString(),s.jsx("div",{className:"text-xs text-gray-500",children:new Date(we.created_at).toLocaleTimeString()})]}),s.jsxs("td",{className:"p-4",children:[s.jsxs("div",{className:"font-medium",children:[we.first_name," ",we.last_name]}),s.jsx("div",{className:"text-sm text-gray-400",children:we.email}),we.phone&&s.jsx("div",{className:"text-xs text-gray-500",children:we.phone})]}),s.jsx("td",{className:"p-4 text-sm",children:U(we.organization_id)}),s.jsx("td",{className:"p-4 text-sm",children:G(we.event_id)}),s.jsx("td",{className:"p-4 text-sm",children:q(we.package_id)}),s.jsxs("td",{className:"p-4 text-right font-semibold",children:["$",we.amount]}),s.jsx("td",{className:"p-4 text-center",children:s.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-medium ${we.status==="delivered"?"bg-green-500/20 text-green-400":we.status==="paid"?"bg-blue-500/20 text-blue-400":we.status==="processing"?"bg-yellow-500/20 text-yellow-400":we.status==="refunded"?"bg-red-500/20 text-red-400":"bg-gray-500/20 text-gray-400"}`,children:we.status})}),s.jsxs("td",{className:"p-4 text-center",children:[s.jsx("button",{onClick:()=>C(we),className:"text-blue-400 hover:text-blue-300 text-sm mr-3",children:"View"}),we.status==="paid"&&s.jsx("button",{onClick:()=>D(we.id),className:"text-green-400 hover:text-green-300 text-sm",children:"Mark Delivered"})]})]},we.id))})]})})]}),N&&s.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onClick:()=>C(null),children:s.jsxs("div",{className:"bg-gray-900 rounded-lg max-w-2xl w-full p-6 border border-gray-800",onClick:we=>we.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"text-2xl font-bold",children:"Order Details"}),s.jsx("button",{onClick:()=>C(null),className:"text-gray-400 hover:text-white",children:""})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-4",children:[s.jsx("h3",{className:"font-semibold mb-3 text-red-500",children:"Customer Information"}),s.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-400",children:"Name:"}),s.jsxs("div",{className:"font-medium",children:[N.first_name," ",N.last_name]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-400",children:"Email:"}),s.jsx("div",{className:"font-medium",children:N.email})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-400",children:"Phone:"}),s.jsx("div",{className:"font-medium",children:N.phone||"N/A"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-400",children:"Instagram:"}),s.jsxs("div",{className:"font-medium",children:["@",N.instagram||"N/A"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-400",children:"Division:"}),s.jsx("div",{className:"font-medium",children:N.division||"N/A"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-400",children:"Coach:"}),s.jsxs("div",{className:"font-medium",children:[N.coach_name||"N/A"," (@",N.coach_instagram||"N/A",")"]})]})]})]}),s.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-4",children:[s.jsx("h3",{className:"font-semibold mb-3 text-red-500",children:"Order Information"}),s.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-400",children:"Organization:"}),s.jsx("div",{className:"font-medium",children:U(N.organization_id)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-400",children:"Event:"}),s.jsx("div",{className:"font-medium",children:G(N.event_id)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-400",children:"Package:"}),s.jsx("div",{className:"font-medium",children:q(N.package_id)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-400",children:"Amount:"}),s.jsxs("div",{className:"font-medium text-lg",children:["$",N.amount," ",N.currency]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-400",children:"Status:"}),s.jsx("div",{className:"font-medium",children:N.status})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-400",children:"Order Date:"}),s.jsx("div",{className:"font-medium",children:new Date(N.created_at).toLocaleString()})]}),N.paid_at&&s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-400",children:"Paid At:"}),s.jsx("div",{className:"font-medium",children:new Date(N.paid_at).toLocaleString()})]}),N.delivered_at&&s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-400",children:"Delivered At:"}),s.jsx("div",{className:"font-medium",children:new Date(N.delivered_at).toLocaleString()})]})]})]}),s.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-4",children:[s.jsx("h3",{className:"font-semibold mb-3 text-red-500",children:"Payment Information"}),s.jsxs("div",{className:"text-sm space-y-2",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-400",children:"Stripe Session ID:"}),s.jsx("div",{className:"font-mono text-xs break-all",children:N.stripe_session_id})]}),N.stripe_payment_id&&s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-400",children:"Payment Intent ID:"}),s.jsx("div",{className:"font-mono text-xs break-all",children:N.stripe_payment_id})]})]})]}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[N.status==="paid"&&s.jsx("button",{onClick:()=>{D(N.id),C(null)},className:"flex-1 px-4 py-2 bg-green-600 hover:bg-green-700 rounded-lg font-medium",children:"Mark as Delivered"}),s.jsx("button",{onClick:()=>C(null),className:"flex-1 px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg font-medium",children:"Close"})]})]})]})})]})}const QDe={1:1,2:1.8,3:2.4,4:2.9},zDe={1:"Base rate",2:"+80% for 2nd person",3:"+60% for 3rd person",4:"+50% for 4th person"},WV=[{id:"teleprompter",name:"Teleprompter",price:150},{id:"drone",name:"Drone Footage",price:300,perDay:!0},{id:"music",name:"Licensed Music",price:75},{id:"script",name:"Script Writing",price:250},{id:"skin",name:"Skin Smoothing",price:100},{id:"rush",name:"Rush Delivery",price:0,multiplier:1.5},{id:"revisions",name:"Extra Revisions",price:150,note:"3 rounds"}],YV=[{id:"horizontal",name:"Horizontal (16:9)",icon:""},{id:"vertical",name:"Vertical (9:16)",icon:""},{id:"square",name:"Square (1:1)",icon:""}];function VDe(){const[t,e]=T.useState(1e3),[r,n]=T.useState(2),[i,a]=T.useState(1),[o,c]=T.useState(4),[u,l]=T.useState(0),[d,f]=T.useState([{id:1,name:"Main Video",length:2,format:"horizontal"}]),[m,p]=T.useState(500),[g,y]=T.useState(300),[x,w]=T.useState(200),[_,E]=T.useState("none"),[N,C]=T.useState(0),[I,D]=T.useState({}),[U,G]=T.useState({}),q=()=>{const ne=Math.max(...d.map(ae=>ae.id),0)+1;f([...d,{id:ne,name:`Video ${ne}`,length:1,format:"horizontal"}])},J=ne=>{d.length>1&&f(d.filter(ae=>ae.id!==ne))},de=(ne,ae,oe)=>{f(d.map(Ie=>Ie.id===ne?{...Ie,[ae]:oe}:Ie))},xe=T.useCallback(()=>{const ne=t*.4,ae=t*.6/7,oe=Math.max(0,o-1),Ie=ne+oe*ae,Ce=QDe[r],ue=Ie*Ce*i,Pe=u*2,Re=Math.ceil(Pe/50)*50,He=u>0?Re:0;let Fe=0;const ft=d.map((ke,Xe)=>{const mt=Xe===0?m:g,Jt=Math.max(0,ke.length-1)*x,tr=mt+Jt;return Fe+=tr,{...ke,cost:tr}});let at=0,De=[],ut=1;Object.entries(I).forEach(([ke,Xe])=>{if(!Xe)return;const mt=WV.find(Jt=>Jt.id===ke);if(mt){if(mt.multiplier)ut=mt.multiplier,De.push("Rush (+50%)");else if(mt.price>0){const Jt=mt.perDay?mt.price*i:mt.price;at+=Jt,De.push(mt.name)}}});let et=(ue+He+Fe+at)*ut,Ue=0;_==="percent"&&N>0?Ue=et*(N/100):_==="fixed"&&N>0&&(Ue=N);const jt=et-Ue,rt=jt/1.1,Ct=jt-rt;G({baseRate:Math.round(ne),hourlyRate:Math.round(ae),shootTotal:Math.round(ue),roundTripKm:Pe,travelTotal:He,deliverablesTotal:Math.round(Fe),deliverableBreakdown:ft,addonsTotal:Math.round(at),addonsItems:De,discountAmount:Math.round(Ue),grandTotal:Math.round(jt),exGst:Math.round(rt),gstAmount:Math.round(Ct)})},[t,r,i,o,u,d,m,g,x,_,N,I]);T.useEffect(()=>{xe()},[xe]);const we=ne=>{D(ae=>({...ae,[ne]:!ae[ne]}))},ve=()=>{const ne=d.map((oe,Ie)=>{const Ce=YV.find(be=>be.id===oe.format);return` ${oe.name}: ${oe.length} min ${Ce?.name||""}  $${U.deliverableBreakdown?.[Ie]?.cost?.toLocaleString()||0}`}).join(`
`),ae=`
FFM PROJECT QUOTE
==================

PRODUCTION
 Crew: ${r} person${r>1?"s":""}
 Duration: ${i} day${i>1?"s":""}  ${o} hours
 Production: $${U.shootTotal?.toLocaleString()}

TRAVEL
 ${U.roundTripKm>0?`${U.roundTripKm}km round trip`:"Local (no charge)"}
 Travel: $${U.travelTotal?.toLocaleString()}

DELIVERABLES (${d.length} video${d.length>1?"s":""})
${ne}
 Total Editing: $${U.deliverablesTotal?.toLocaleString()}

${U.addonsItems?.length>0?`ADD-ONS
 ${U.addonsItems.join(`
 `)}
 Add-ons: $${U.addonsTotal?.toLocaleString()}
`:""}
==================
TOTAL: $${U.grandTotal?.toLocaleString()} (Inc. GST)
Ex. GST: $${U.exGst?.toLocaleString()}

Valid for 30 days.
    `.trim();navigator.clipboard.writeText(ae).then(()=>{alert("Quote copied to clipboard!")})};return s.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-red-500",children:"Project Pricing Calculator"}),s.jsx("p",{className:"text-gray-400 mt-1",children:"Structure-based pricing for video production"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6 border border-gray-700/50",children:[s.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[s.jsx("span",{className:"text-2xl",children:""})," Base Day Rate"]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Day Rate (AUD)"}),s.jsxs("div",{className:"relative",children:[s.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",children:"$"}),s.jsx("input",{type:"number",value:t,onChange:ne=>e(parseFloat(ne.target.value)||0),min:"100",step:"50",className:"w-full bg-gray-700 border border-gray-600 rounded-lg pl-8 pr-4 py-3 text-lg font-semibold focus:border-red-500 focus:outline-none transition"})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"All prices auto-scale from this"})]}),s.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-4",children:[s.jsx("div",{className:"text-sm text-gray-400",children:"Calculated Rates:"}),s.jsxs("div",{className:"mt-2 space-y-1 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Base Rate (40%):"}),s.jsxs("span",{className:"font-semibold text-green-400",children:["$",U.baseRate]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Hourly Rate:"}),s.jsxs("span",{className:"font-semibold text-green-400",children:["$",U.hourlyRate,"/hr"]})]})]})]})]})]}),s.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6 border border-gray-700/50",children:[s.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[s.jsx("span",{className:"text-2xl",children:""})," Crew & Shooting Time"]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Crew Size"}),s.jsxs("select",{value:r,onChange:ne=>n(parseInt(ne.target.value)),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 focus:border-red-500 focus:outline-none",children:[s.jsx("option",{value:"1",children:"1 Person"}),s.jsx("option",{value:"2",children:"2 People"}),s.jsx("option",{value:"3",children:"3 People"}),s.jsx("option",{value:"4",children:"4 People"})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:zDe[r]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Shoot Days"}),s.jsx("input",{type:"number",value:i,onChange:ne=>a(parseInt(ne.target.value)||1),min:"1",max:"30",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 focus:border-red-500 focus:outline-none"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Hours Per Day"}),s.jsx("input",{type:"number",value:o,onChange:ne=>c(parseFloat(ne.target.value)||1),min:"1",max:"12",step:"0.5",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 focus:border-red-500 focus:outline-none"})]})]})]}),s.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6 border border-gray-700/50",children:[s.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[s.jsx("span",{className:"text-2xl",children:""})," Travel"]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Distance (KM, one way)"}),s.jsx("input",{type:"number",value:u,onChange:ne=>l(parseFloat(ne.target.value)||0),min:"0",step:"10",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 focus:border-red-500 focus:outline-none"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"$50 per 50km (round trip calculated)"})]}),s.jsx("div",{className:"bg-gray-700/50 rounded-lg p-4 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-sm text-gray-400",children:"Round Trip"}),s.jsxs("div",{className:"text-2xl font-bold text-red-400",children:[U.roundTripKm||0," km"]})]})})]})]}),s.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6 border border-gray-700/50",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h2",{className:"text-xl font-semibold flex items-center gap-2",children:[s.jsx("span",{className:"text-2xl",children:""})," Deliverables"]}),s.jsx("button",{onClick:q,className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg text-sm font-medium transition",children:"+ Add Video"})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6 p-4 bg-gray-700/30 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"First Video Base"}),s.jsxs("div",{className:"relative",children:[s.jsx("span",{className:"absolute left-2 top-1/2 -translate-y-1/2 text-gray-400 text-sm",children:"$"}),s.jsx("input",{type:"number",value:m,onChange:ne=>p(parseFloat(ne.target.value)||0),className:"w-full bg-gray-700 border border-gray-600 rounded-lg pl-6 pr-2 py-2 text-sm focus:border-red-500 focus:outline-none"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Additional Videos"}),s.jsxs("div",{className:"relative",children:[s.jsx("span",{className:"absolute left-2 top-1/2 -translate-y-1/2 text-gray-400 text-sm",children:"$"}),s.jsx("input",{type:"number",value:g,onChange:ne=>y(parseFloat(ne.target.value)||0),className:"w-full bg-gray-700 border border-gray-600 rounded-lg pl-6 pr-2 py-2 text-sm focus:border-red-500 focus:outline-none"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Per Extra Minute"}),s.jsxs("div",{className:"relative",children:[s.jsx("span",{className:"absolute left-2 top-1/2 -translate-y-1/2 text-gray-400 text-sm",children:"$"}),s.jsx("input",{type:"number",value:x,onChange:ne=>w(parseFloat(ne.target.value)||0),className:"w-full bg-gray-700 border border-gray-600 rounded-lg pl-6 pr-2 py-2 text-sm focus:border-red-500 focus:outline-none"})]})]})]}),s.jsx("div",{className:"space-y-3",children:d.map((ne,ae)=>s.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${ae===0?"bg-red-600 text-white":"bg-gray-600 text-gray-300"}`,children:ae===0?"Primary":`+${ae}`}),s.jsx("input",{type:"text",value:ne.name,onChange:oe=>de(ne.id,"name",oe.target.value),className:"bg-transparent border-b border-gray-600 focus:border-red-500 outline-none text-white font-medium",placeholder:"Video name"})]}),d.length>1&&s.jsx("button",{onClick:()=>J(ne.id),className:"text-red-400 hover:text-red-300 text-sm",children:"Remove"})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Length (min)"}),s.jsx("input",{type:"number",value:ne.length,onChange:oe=>de(ne.id,"length",parseInt(oe.target.value)||1),min:"1",max:"60",className:"w-full bg-gray-600 border border-gray-500 rounded px-3 py-2 text-sm focus:border-red-500 focus:outline-none"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Format"}),s.jsx("select",{value:ne.format,onChange:oe=>de(ne.id,"format",oe.target.value),className:"w-full bg-gray-600 border border-gray-500 rounded px-3 py-2 text-sm focus:border-red-500 focus:outline-none",children:YV.map(oe=>s.jsxs("option",{value:oe.id,children:[oe.icon," ",oe.name]},oe.id))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Cost"}),s.jsxs("div",{className:"bg-gray-600/50 rounded px-3 py-2 text-sm font-semibold text-green-400",children:["$",U.deliverableBreakdown?.[ae]?.cost?.toLocaleString()||0]})]})]})]},ne.id))}),s.jsxs("div",{className:"mt-4 p-3 bg-gray-700/50 rounded-lg text-sm text-gray-400",children:[s.jsx("strong",{children:"Each video includes:"})," Color correction, color grading, audio mixing, lower thirds, file conversion"]})]}),s.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6 border border-gray-700/50",children:[s.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[s.jsx("span",{className:"text-2xl",children:""})," Add-Ons"]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:WV.map(ne=>s.jsxs("label",{className:`flex items-center gap-3 rounded-lg p-3 cursor-pointer transition ${I[ne.id]?"bg-red-600/20 border border-red-500/50":"bg-gray-700/50 hover:bg-gray-700"}`,children:[s.jsx("input",{type:"checkbox",checked:I[ne.id]||!1,onChange:()=>we(ne.id),className:"w-5 h-5 rounded accent-red-500"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:ne.name}),s.jsxs("div",{className:"text-sm text-gray-400",children:[ne.multiplier?"+50%":`$${ne.price}${ne.perDay?"/day":""}`,ne.note&&` (${ne.note})`]})]})]},ne.id))})]}),s.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6 border border-gray-700/50",children:[s.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[s.jsx("span",{className:"text-2xl",children:""})," Package Discount"]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Discount Type"}),s.jsxs("select",{value:_,onChange:ne=>{E(ne.target.value),ne.target.value==="none"&&C(0)},className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 focus:border-red-500 focus:outline-none",children:[s.jsx("option",{value:"none",children:"No Discount"}),s.jsx("option",{value:"percent",children:"Percentage"}),s.jsx("option",{value:"fixed",children:"Fixed Amount"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Discount Value"}),s.jsx("input",{type:"number",value:N,onChange:ne=>C(parseFloat(ne.target.value)||0),min:"0",disabled:_==="none",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 focus:border-red-500 focus:outline-none disabled:opacity-50"})]})]})]})]}),s.jsx("div",{className:"lg:col-span-1",children:s.jsxs("div",{className:"bg-gradient-to-br from-red-600 to-red-800 rounded-xl p-6 sticky top-8",children:[s.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Quote Summary"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-black/20 rounded-lg p-4",children:[s.jsx("div",{className:"text-sm text-red-200",children:"Production (Shoot)"}),s.jsxs("div",{className:"text-2xl font-bold",children:["$",U.shootTotal?.toLocaleString()]}),s.jsxs("div",{className:"text-xs text-red-300 mt-1",children:[r," crew  ",o,"h  ",i," day",i>1?"s":""]})]}),s.jsxs("div",{className:"bg-black/20 rounded-lg p-4",children:[s.jsx("div",{className:"text-sm text-red-200",children:"Travel"}),s.jsxs("div",{className:"text-2xl font-bold",children:["$",U.travelTotal?.toLocaleString()]}),s.jsx("div",{className:"text-xs text-red-300 mt-1",children:u>0?`${U.roundTripKm}km round trip`:"Local (no charge)"})]}),s.jsxs("div",{className:"bg-black/20 rounded-lg p-4",children:[s.jsxs("div",{className:"text-sm text-red-200",children:["Deliverables (",d.length," video",d.length>1?"s":"",")"]}),s.jsxs("div",{className:"text-2xl font-bold",children:["$",U.deliverablesTotal?.toLocaleString()]}),s.jsx("div",{className:"text-xs text-red-300 mt-1 space-y-0.5",children:U.deliverableBreakdown?.map((ne,ae)=>s.jsxs("div",{children:[ne.name,": ",ne.length,"min  $",ne.cost?.toLocaleString()]},ae))})]}),s.jsxs("div",{className:"bg-black/20 rounded-lg p-4",children:[s.jsx("div",{className:"text-sm text-red-200",children:"Add-Ons"}),s.jsxs("div",{className:"text-2xl font-bold",children:["$",U.addonsTotal?.toLocaleString()]}),s.jsx("div",{className:"text-xs text-red-300 mt-1",children:U.addonsItems?.length>0?U.addonsItems.join(", "):"None selected"})]}),U.discountAmount>0&&s.jsxs("div",{className:"bg-black/20 rounded-lg p-4",children:[s.jsx("div",{className:"text-sm text-red-200",children:"Discount"}),s.jsxs("div",{className:"text-2xl font-bold text-green-400",children:["-$",U.discountAmount?.toLocaleString()]})]})]}),s.jsx("div",{className:"mt-6 pt-6 border-t border-red-400/30",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-red-200",children:"TOTAL QUOTE"}),s.jsx("div",{className:"text-xs text-red-300",children:"Inc. GST"})]}),s.jsxs("div",{className:"text-4xl font-bold",children:["$",U.grandTotal?.toLocaleString()]})]})}),s.jsxs("div",{className:"mt-6 pt-4 border-t border-red-400/30",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-red-200",children:"Ex. GST:"}),s.jsxs("span",{className:"font-semibold",children:["$",U.exGst?.toLocaleString()]})]}),s.jsxs("div",{className:"flex justify-between text-sm mt-1",children:[s.jsx("span",{className:"text-red-200",children:"GST (10%):"}),s.jsxs("span",{className:"font-semibold",children:["$",U.gstAmount?.toLocaleString()]})]})]}),s.jsx("div",{className:"mt-6",children:s.jsx("button",{onClick:ve,className:"w-full bg-white text-red-600 font-semibold py-3 rounded-lg hover:bg-red-100 transition",children:" Copy Quote Text"})})]})})]}),s.jsx("div",{className:"mt-12 text-center text-gray-500 text-sm",children:s.jsx("p",{children:"Pricing based on structure-based methodology. All prices in AUD."})})]})}function KDe({event:t,crew:e,equipment:r,onClose:n}){if(!t)return null;const i=f=>(f||[]).map(m=>e.find(p=>p.id===m)).filter(Boolean),a=f=>(f||[]).map(m=>r.find(p=>p.id===m)).filter(Boolean);function o(f){return new Date(f).toLocaleDateString("en-AU",{weekday:"long",day:"numeric",month:"long",year:"numeric"})}const c=i(t.crew_ids),u=a(t.equipment_ids),l=u.reduce((f,m)=>{const p=m.category||"Other";return f[p]||(f[p]=[]),f[p].push(m),f},{}),d={confirmed:"#10b981",tentative:"#f59e0b",completed:"#6b7280",cancelled:"#ef4444"};return s.jsxs("div",{className:"fixed inset-0 bg-black/80 flex items-start justify-center z-50 p-4 overflow-y-auto",children:[s.jsxs("div",{className:"print:hidden fixed top-4 right-4 flex items-center gap-3 z-10",children:[s.jsxs("button",{onClick:()=>window.print(),className:"px-4 py-2 bg-orange-600 hover:bg-orange-700 rounded-lg text-white font-medium flex items-center gap-2",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),"Print Brief"]}),s.jsx("button",{onClick:n,className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg text-white",children:"Close"})]}),s.jsxs("div",{id:"event-brief",className:"bg-white text-gray-900 w-full max-w-3xl my-4 rounded-xl overflow-hidden print:m-0 print:rounded-none print:shadow-none",style:{fontFamily:"system-ui, -apple-system, sans-serif"},children:[s.jsx("div",{style:{background:"linear-gradient(135deg, #1a1a2e 0%, #16213e 100%)",color:"white",padding:"32px"},children:s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",gap:"16px"},children:[s.jsxs("div",{children:[s.jsx("div",{style:{fontSize:"12px",textTransform:"uppercase",letterSpacing:"2px",color:"#e5383b",fontWeight:"700",marginBottom:"8px"},children:"FIT FOCUS MEDIA  PRODUCTION BRIEF"}),s.jsx("h1",{style:{fontSize:"28px",fontWeight:"800",margin:"0 0 8px"},children:t.name}),s.jsx("p",{style:{fontSize:"16px",color:"#e5383b",margin:"0"},children:t.client})]}),s.jsx("div",{style:{textAlign:"right"},children:s.jsx("span",{style:{background:d[t.status]||"#6b7280",color:"white",padding:"4px 12px",borderRadius:"20px",fontSize:"12px",fontWeight:"700",textTransform:"uppercase",letterSpacing:"1px"},children:t.status})})]})}),s.jsxs("div",{style:{padding:"32px"},children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"24px",marginBottom:"32px"},children:[s.jsxs("div",{children:[s.jsx("div",{style:{fontSize:"10px",textTransform:"uppercase",letterSpacing:"1px",color:"#9ca3af",marginBottom:"6px"},children:"DATE"}),s.jsx("div",{style:{fontSize:"15px",fontWeight:"600",color:"#111827"},children:o(t.date)})]}),s.jsxs("div",{children:[s.jsx("div",{style:{fontSize:"10px",textTransform:"uppercase",letterSpacing:"1px",color:"#9ca3af",marginBottom:"6px"},children:"LOCATION"}),s.jsx("div",{style:{fontSize:"15px",fontWeight:"600",color:"#111827"},children:t.location||"TBC"})]}),s.jsxs("div",{children:[s.jsx("div",{style:{fontSize:"10px",textTransform:"uppercase",letterSpacing:"1px",color:"#9ca3af",marginBottom:"6px"},children:"CLIENT"}),s.jsx("div",{style:{fontSize:"15px",fontWeight:"600",color:"#111827"},children:t.client})]})]}),s.jsx("div",{style:{borderTop:"1px solid #e5e7eb",marginBottom:"28px"}}),s.jsxs("div",{style:{marginBottom:"28px"},children:[s.jsxs("h2",{style:{fontSize:"14px",fontWeight:"700",textTransform:"uppercase",letterSpacing:"1px",color:"#374151",marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"},children:[" Crew (",c.length,")"]}),c.length>0?s.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[s.jsx("thead",{children:s.jsxs("tr",{style:{background:"#f9fafb"},children:[s.jsx("th",{style:{padding:"8px 12px",textAlign:"left",fontSize:"11px",color:"#6b7280",textTransform:"uppercase",borderBottom:"1px solid #e5e7eb"},children:"Name"}),s.jsx("th",{style:{padding:"8px 12px",textAlign:"left",fontSize:"11px",color:"#6b7280",textTransform:"uppercase",borderBottom:"1px solid #e5e7eb"},children:"Role"}),s.jsx("th",{style:{padding:"8px 12px",textAlign:"left",fontSize:"11px",color:"#6b7280",textTransform:"uppercase",borderBottom:"1px solid #e5e7eb"},children:"Phone"}),s.jsx("th",{style:{padding:"8px 12px",textAlign:"left",fontSize:"11px",color:"#6b7280",textTransform:"uppercase",borderBottom:"1px solid #e5e7eb"},children:"Email"})]})}),s.jsx("tbody",{children:c.map((f,m)=>s.jsxs("tr",{style:{background:m%2===0?"white":"#f9fafb"},children:[s.jsx("td",{style:{padding:"10px 12px",fontWeight:"600",fontSize:"14px",borderBottom:"1px solid #f3f4f6"},children:f.name}),s.jsx("td",{style:{padding:"10px 12px",fontSize:"13px",color:"#6b7280",borderBottom:"1px solid #f3f4f6"},children:f.role||""}),s.jsx("td",{style:{padding:"10px 12px",fontSize:"13px",borderBottom:"1px solid #f3f4f6"},children:f.phone||""}),s.jsx("td",{style:{padding:"10px 12px",fontSize:"13px",borderBottom:"1px solid #f3f4f6"},children:f.email||""})]},f.id))})]}):s.jsx("p",{style:{color:"#9ca3af",fontSize:"14px",fontStyle:"italic"},children:"No crew assigned yet. Assign crew from the Crew & Logistics portal."})]}),u.length>0&&s.jsxs("div",{style:{marginBottom:"28px"},children:[s.jsxs("h2",{style:{fontSize:"14px",fontWeight:"700",textTransform:"uppercase",letterSpacing:"1px",color:"#374151",marginBottom:"12px"},children:[" Equipment (",u.length," items)"]}),s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px"},children:Object.entries(l).map(([f,m])=>s.jsxs("div",{children:[s.jsx("div",{style:{fontSize:"11px",fontWeight:"700",textTransform:"uppercase",letterSpacing:"1px",color:"#9ca3af",marginBottom:"6px"},children:f}),m.map(p=>s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 0",borderBottom:"1px solid #f3f4f6",fontSize:"13px"},children:[s.jsx("span",{style:{color:"#111827"},children:p.name}),s.jsxs("span",{style:{color:"#6b7280"},children:["",p.quantity]})]},p.id))]},f))})]}),(t.flight_links?.length||0)+(t.accommodation_links?.length||0)+(t.rental_links?.length||0)>0&&s.jsxs("div",{style:{marginBottom:"28px"},children:[s.jsx("h2",{style:{fontSize:"14px",fontWeight:"700",textTransform:"uppercase",letterSpacing:"1px",color:"#374151",marginBottom:"12px"},children:" Travel & Logistics"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"16px"},children:[t.flight_links?.length>0&&s.jsxs("div",{children:[s.jsx("div",{style:{fontSize:"11px",fontWeight:"700",color:"#9ca3af",textTransform:"uppercase",marginBottom:"6px"},children:"Flights"}),t.flight_links.map((f,m)=>s.jsxs("a",{href:f,style:{display:"block",color:"#2563eb",fontSize:"13px",marginBottom:"4px",wordBreak:"break-all"},children:[" Flight ",m+1]},m))]}),t.accommodation_links?.length>0&&s.jsxs("div",{children:[s.jsx("div",{style:{fontSize:"11px",fontWeight:"700",color:"#9ca3af",textTransform:"uppercase",marginBottom:"6px"},children:"Accommodation"}),t.accommodation_links.map((f,m)=>s.jsxs("a",{href:f,style:{display:"block",color:"#2563eb",fontSize:"13px",marginBottom:"4px",wordBreak:"break-all"},children:[" Booking ",m+1]},m))]}),t.rental_links?.length>0&&s.jsxs("div",{children:[s.jsx("div",{style:{fontSize:"11px",fontWeight:"700",color:"#9ca3af",textTransform:"uppercase",marginBottom:"6px"},children:"Rental Cars"}),t.rental_links.map((f,m)=>s.jsxs("a",{href:f,style:{display:"block",color:"#2563eb",fontSize:"13px",marginBottom:"4px",wordBreak:"break-all"},children:[" Rental ",m+1]},m))]})]})]}),t.notes&&s.jsxs("div",{style:{marginBottom:"28px"},children:[s.jsx("h2",{style:{fontSize:"14px",fontWeight:"700",textTransform:"uppercase",letterSpacing:"1px",color:"#374151",marginBottom:"12px"},children:" Notes"}),s.jsx("div",{style:{background:"#f9fafb",borderLeft:"3px solid #e5383b",padding:"12px 16px",borderRadius:"4px",fontSize:"14px",lineHeight:"1.6",color:"#374151"},children:t.notes})]}),s.jsxs("div",{style:{marginBottom:"20px"},children:[s.jsx("h2",{style:{fontSize:"14px",fontWeight:"700",textTransform:"uppercase",letterSpacing:"1px",color:"#374151",marginBottom:"12px"},children:" Shot List / Run Sheet"}),s.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[s.jsx("thead",{children:s.jsxs("tr",{style:{background:"#f9fafb"},children:[s.jsx("th",{style:{width:"60px",padding:"8px 12px",textAlign:"left",fontSize:"11px",color:"#6b7280",textTransform:"uppercase",borderBottom:"1px solid #e5e7eb"},children:"#"}),s.jsx("th",{style:{width:"80px",padding:"8px 12px",textAlign:"left",fontSize:"11px",color:"#6b7280",textTransform:"uppercase",borderBottom:"1px solid #e5e7eb"},children:"Time"}),s.jsx("th",{style:{padding:"8px 12px",textAlign:"left",fontSize:"11px",color:"#6b7280",textTransform:"uppercase",borderBottom:"1px solid #e5e7eb"},children:"Shot / Activity"}),s.jsx("th",{style:{width:"80px",padding:"8px 12px",textAlign:"left",fontSize:"11px",color:"#6b7280",textTransform:"uppercase",borderBottom:"1px solid #e5e7eb"},children:"Done"})]})}),s.jsx("tbody",{children:[1,2,3,4,5,6,7,8].map(f=>s.jsxs("tr",{style:{borderBottom:"1px solid #f3f4f6"},children:[s.jsx("td",{style:{padding:"12px",color:"#9ca3af",fontSize:"13px"},children:f}),s.jsx("td",{style:{padding:"12px"}}),s.jsx("td",{style:{padding:"12px"}}),s.jsx("td",{style:{padding:"12px",textAlign:"center"},children:""})]},f))})]})]}),s.jsxs("div",{style:{borderTop:"1px solid #e5e7eb",paddingTop:"16px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsxs("div",{style:{fontSize:"11px",color:"#9ca3af"},children:["Generated by FIT FOCUS MEDIA Portal  ",new Date().toLocaleDateString("en-AU",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})]}),s.jsx("div",{style:{fontSize:"11px",color:"#9ca3af"},children:"fitfocusmedia.com.au"})]})]})]})]})}const $5=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function k1(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function lF(t){return"nodeType"in t}function Eh(t){var e,r;return t?k1(t)?t:lF(t)&&(e=(r=t.ownerDocument)==null?void 0:r.defaultView)!=null?e:window:window}function cF(t){const{Document:e}=Eh(t);return t instanceof e}function AE(t){return k1(t)?!1:t instanceof Eh(t).HTMLElement}function cne(t){return t instanceof Eh(t).SVGElement}function L1(t){return t?k1(t)?t.document:lF(t)?cF(t)?t:AE(t)||cne(t)?t.ownerDocument:document:document:document}const dg=$5?T.useLayoutEffect:T.useEffect;function H5(t){const e=T.useRef(t);return dg(()=>{e.current=t}),T.useCallback(function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return e.current==null?void 0:e.current(...n)},[])}function GDe(){const t=T.useRef(null),e=T.useCallback((n,i)=>{t.current=setInterval(n,i)},[]),r=T.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,r]}function i_(t,e){e===void 0&&(e=[t]);const r=T.useRef(t);return dg(()=>{r.current!==t&&(r.current=t)},e),r}function pE(t,e){const r=T.useRef();return T.useMemo(()=>{const n=t(r.current);return r.current=n,n},[...e])}function VC(t){const e=H5(t),r=T.useRef(null),n=T.useCallback(i=>{i!==r.current&&e?.(i,r.current),r.current=i},[]);return[r,n]}function KC(t){const e=T.useRef();return T.useEffect(()=>{e.current=t},[t]),e.current}let mI={};function Q5(t,e){return T.useMemo(()=>{if(e)return e;const r=mI[t]==null?0:mI[t]+1;return mI[t]=r,t+"-"+r},[t,e])}function une(t){return function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return n.reduce((a,o)=>{const c=Object.entries(o);for(const[u,l]of c){const d=a[u];d!=null&&(a[u]=d+t*l)}return a},{...e})}}const _b=une(1),GC=une(-1);function WDe(t){return"clientX"in t&&"clientY"in t}function uF(t){if(!t)return!1;const{KeyboardEvent:e}=Eh(t.target);return e&&t instanceof e}function YDe(t){if(!t)return!1;const{TouchEvent:e}=Eh(t.target);return e&&t instanceof e}function WC(t){if(YDe(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:r}=t.touches[0];return{x:e,y:r}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:r}=t.changedTouches[0];return{x:e,y:r}}}return WDe(t)?{x:t.clientX,y:t.clientY}:null}const s_=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:r}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:r}=t;return"scaleX("+e+") scaleY("+r+")"}},Transform:{toString(t){if(t)return[s_.Translate.toString(t),s_.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:r,easing:n}=t;return e+" "+r+"ms "+n}}}),qV="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function qDe(t){return t.matches(qV)?t:t.querySelector(qV)}const XDe={display:"none"};function ZDe(t){let{id:e,value:r}=t;return So.createElement("div",{id:e,style:XDe},r)}function JDe(t){let{id:e,announcement:r,ariaLiveType:n="assertive"}=t;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return So.createElement("div",{id:e,style:i,role:"status","aria-live":n,"aria-atomic":!0},r)}function eMe(){const[t,e]=T.useState("");return{announce:T.useCallback(n=>{n!=null&&e(n)},[]),announcement:t}}const dne=T.createContext(null);function tMe(t){const e=T.useContext(dne);T.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function rMe(){const[t]=T.useState(()=>new Set),e=T.useCallback(n=>(t.add(n),()=>t.delete(n)),[t]);return[T.useCallback(n=>{let{type:i,event:a}=n;t.forEach(o=>{var c;return(c=o[i])==null?void 0:c.call(o,a)})},[t]),e]}const nMe={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},iMe={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:r}=t;return r?"Draggable item "+e.id+" was moved over droppable area "+r.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:r}=t;return r?"Draggable item "+e.id+" was dropped over droppable area "+r.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function sMe(t){let{announcements:e=iMe,container:r,hiddenTextDescribedById:n,screenReaderInstructions:i=nMe}=t;const{announce:a,announcement:o}=eMe(),c=Q5("DndLiveRegion"),[u,l]=T.useState(!1);if(T.useEffect(()=>{l(!0)},[]),tMe(T.useMemo(()=>({onDragStart(f){let{active:m}=f;a(e.onDragStart({active:m}))},onDragMove(f){let{active:m,over:p}=f;e.onDragMove&&a(e.onDragMove({active:m,over:p}))},onDragOver(f){let{active:m,over:p}=f;a(e.onDragOver({active:m,over:p}))},onDragEnd(f){let{active:m,over:p}=f;a(e.onDragEnd({active:m,over:p}))},onDragCancel(f){let{active:m,over:p}=f;a(e.onDragCancel({active:m,over:p}))}}),[a,e])),!u)return null;const d=So.createElement(So.Fragment,null,So.createElement(ZDe,{id:n,value:i.draggable}),So.createElement(JDe,{id:c,announcement:o}));return r?C0.createPortal(d,r):d}var Uu;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(Uu||(Uu={}));function YC(){}function AI(t,e){return T.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function aMe(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return T.useMemo(()=>[...e].filter(n=>n!=null),[...e])}const zm=Object.freeze({x:0,y:0});function oMe(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function lMe(t,e){const r=WC(t);if(!r)return"0 0";const n={x:(r.x-e.left)/e.width*100,y:(r.y-e.top)/e.height*100};return n.x+"% "+n.y+"%"}function cMe(t,e){let{data:{value:r}}=t,{data:{value:n}}=e;return r-n}function uMe(t,e){let{data:{value:r}}=t,{data:{value:n}}=e;return n-r}function dMe(t,e){if(!t||t.length===0)return null;const[r]=t;return r[e]}function XV(t,e,r){return e===void 0&&(e=t.left),r===void 0&&(r=t.top),{x:e+t.width*.5,y:r+t.height*.5}}const hMe=t=>{let{collisionRect:e,droppableRects:r,droppableContainers:n}=t;const i=XV(e,e.left,e.top),a=[];for(const o of n){const{id:c}=o,u=r.get(c);if(u){const l=oMe(XV(u),i);a.push({id:c,data:{droppableContainer:o,value:l}})}}return a.sort(cMe)};function fMe(t,e){const r=Math.max(e.top,t.top),n=Math.max(e.left,t.left),i=Math.min(e.left+e.width,t.left+t.width),a=Math.min(e.top+e.height,t.top+t.height),o=i-n,c=a-r;if(n<i&&r<a){const u=e.width*e.height,l=t.width*t.height,d=o*c,f=d/(u+l-d);return Number(f.toFixed(4))}return 0}const mMe=t=>{let{collisionRect:e,droppableRects:r,droppableContainers:n}=t;const i=[];for(const a of n){const{id:o}=a,c=r.get(o);if(c){const u=fMe(c,e);u>0&&i.push({id:o,data:{droppableContainer:a,value:u}})}}return i.sort(uMe)};function AMe(t,e,r){return{...t,scaleX:e&&r?e.width/r.width:1,scaleY:e&&r?e.height/r.height:1}}function hne(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:zm}function pMe(t){return function(r){for(var n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];return i.reduce((o,c)=>({...o,top:o.top+t*c.y,bottom:o.bottom+t*c.y,left:o.left+t*c.x,right:o.right+t*c.x}),{...r})}}const gMe=pMe(1);function fne(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function vMe(t,e,r){const n=fne(e);if(!n)return t;const{scaleX:i,scaleY:a,x:o,y:c}=n,u=t.left-o-(1-i)*parseFloat(r),l=t.top-c-(1-a)*parseFloat(r.slice(r.indexOf(" ")+1)),d=i?t.width/i:t.width,f=a?t.height/a:t.height;return{width:d,height:f,top:l,right:u+d,bottom:l+f,left:u}}const yMe={ignoreTransform:!1};function gE(t,e){e===void 0&&(e=yMe);let r=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:l,transformOrigin:d}=Eh(t).getComputedStyle(t);l&&(r=vMe(r,l,d))}const{top:n,left:i,width:a,height:o,bottom:c,right:u}=r;return{top:n,left:i,width:a,height:o,bottom:c,right:u}}function ZV(t){return gE(t,{ignoreTransform:!0})}function xMe(t){const e=t.innerWidth,r=t.innerHeight;return{top:0,left:0,right:e,bottom:r,width:e,height:r}}function bMe(t,e){return e===void 0&&(e=Eh(t).getComputedStyle(t)),e.position==="fixed"}function wMe(t,e){e===void 0&&(e=Eh(t).getComputedStyle(t));const r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const a=e[i];return typeof a=="string"?r.test(a):!1})}function dF(t,e){const r=[];function n(i){if(e!=null&&r.length>=e||!i)return r;if(cF(i)&&i.scrollingElement!=null&&!r.includes(i.scrollingElement))return r.push(i.scrollingElement),r;if(!AE(i)||cne(i)||r.includes(i))return r;const a=Eh(t).getComputedStyle(i);return i!==t&&wMe(i,a)&&r.push(i),bMe(i,a)?r:n(i.parentNode)}return t?n(t):r}function mne(t){const[e]=dF(t,1);return e??null}function pI(t){return!$5||!t?null:k1(t)?t:lF(t)?cF(t)||t===L1(t).scrollingElement?window:AE(t)?t:null:null}function Ane(t){return k1(t)?t.scrollX:t.scrollLeft}function pne(t){return k1(t)?t.scrollY:t.scrollTop}function oO(t){return{x:Ane(t),y:pne(t)}}var fd;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(fd||(fd={}));function gne(t){return!$5||!t?!1:t===document.scrollingElement}function vne(t){const e={x:0,y:0},r=gne(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},n={x:t.scrollWidth-r.width,y:t.scrollHeight-r.height},i=t.scrollTop<=e.y,a=t.scrollLeft<=e.x,o=t.scrollTop>=n.y,c=t.scrollLeft>=n.x;return{isTop:i,isLeft:a,isBottom:o,isRight:c,maxScroll:n,minScroll:e}}const _Me={x:.2,y:.2};function EMe(t,e,r,n,i){let{top:a,left:o,right:c,bottom:u}=r;n===void 0&&(n=10),i===void 0&&(i=_Me);const{isTop:l,isBottom:d,isLeft:f,isRight:m}=vne(t),p={x:0,y:0},g={x:0,y:0},y={height:e.height*i.y,width:e.width*i.x};return!l&&a<=e.top+y.height?(p.y=fd.Backward,g.y=n*Math.abs((e.top+y.height-a)/y.height)):!d&&u>=e.bottom-y.height&&(p.y=fd.Forward,g.y=n*Math.abs((e.bottom-y.height-u)/y.height)),!m&&c>=e.right-y.width?(p.x=fd.Forward,g.x=n*Math.abs((e.right-y.width-c)/y.width)):!f&&o<=e.left+y.width&&(p.x=fd.Backward,g.x=n*Math.abs((e.left+y.width-o)/y.width)),{direction:p,speed:g}}function SMe(t){if(t===document.scrollingElement){const{innerWidth:a,innerHeight:o}=window;return{top:0,left:0,right:a,bottom:o,width:a,height:o}}const{top:e,left:r,right:n,bottom:i}=t.getBoundingClientRect();return{top:e,left:r,right:n,bottom:i,width:t.clientWidth,height:t.clientHeight}}function yne(t){return t.reduce((e,r)=>_b(e,oO(r)),zm)}function jMe(t){return t.reduce((e,r)=>e+Ane(r),0)}function TMe(t){return t.reduce((e,r)=>e+pne(r),0)}function xne(t,e){if(e===void 0&&(e=gE),!t)return;const{top:r,left:n,bottom:i,right:a}=e(t);mne(t)&&(i<=0||a<=0||r>=window.innerHeight||n>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const CMe=[["x",["left","right"],jMe],["y",["top","bottom"],TMe]];class hF{constructor(e,r){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const n=dF(r),i=yne(n);this.rect={...e},this.width=e.width,this.height=e.height;for(const[a,o,c]of CMe)for(const u of o)Object.defineProperty(this,u,{get:()=>{const l=c(n),d=i[a]-l;return this.rect[u]+d},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class f2{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(r=>{var n;return(n=this.target)==null?void 0:n.removeEventListener(...r)})},this.target=e}add(e,r,n){var i;(i=this.target)==null||i.addEventListener(e,r,n),this.listeners.push([e,r,n])}}function NMe(t){const{EventTarget:e}=Eh(t);return t instanceof e?t:L1(t)}function gI(t,e){const r=Math.abs(t.x),n=Math.abs(t.y);return typeof e=="number"?Math.sqrt(r**2+n**2)>e:"x"in e&&"y"in e?r>e.x&&n>e.y:"x"in e?r>e.x:"y"in e?n>e.y:!1}var qf;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(qf||(qf={}));function JV(t){t.preventDefault()}function kMe(t){t.stopPropagation()}var ol;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(ol||(ol={}));const bne={start:[ol.Space,ol.Enter],cancel:[ol.Esc],end:[ol.Space,ol.Enter,ol.Tab]},LMe=(t,e)=>{let{currentCoordinates:r}=e;switch(t.code){case ol.Right:return{...r,x:r.x+25};case ol.Left:return{...r,x:r.x-25};case ol.Down:return{...r,y:r.y+25};case ol.Up:return{...r,y:r.y-25}}};class fF{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:r}}=e;this.props=e,this.listeners=new f2(L1(r)),this.windowListeners=new f2(Eh(r)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(qf.Resize,this.handleCancel),this.windowListeners.add(qf.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(qf.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:r}=this.props,n=e.node.current;n&&xne(n),r(zm)}handleKeyDown(e){if(uF(e)){const{active:r,context:n,options:i}=this.props,{keyboardCodes:a=bne,coordinateGetter:o=LMe,scrollBehavior:c="smooth"}=i,{code:u}=e;if(a.end.includes(u)){this.handleEnd(e);return}if(a.cancel.includes(u)){this.handleCancel(e);return}const{collisionRect:l}=n.current,d=l?{x:l.left,y:l.top}:zm;this.referenceCoordinates||(this.referenceCoordinates=d);const f=o(e,{active:r,context:n.current,currentCoordinates:d});if(f){const m=GC(f,d),p={x:0,y:0},{scrollableAncestors:g}=n.current;for(const y of g){const x=e.code,{isTop:w,isRight:_,isLeft:E,isBottom:N,maxScroll:C,minScroll:I}=vne(y),D=SMe(y),U={x:Math.min(x===ol.Right?D.right-D.width/2:D.right,Math.max(x===ol.Right?D.left:D.left+D.width/2,f.x)),y:Math.min(x===ol.Down?D.bottom-D.height/2:D.bottom,Math.max(x===ol.Down?D.top:D.top+D.height/2,f.y))},G=x===ol.Right&&!_||x===ol.Left&&!E,q=x===ol.Down&&!N||x===ol.Up&&!w;if(G&&U.x!==f.x){const J=y.scrollLeft+m.x,de=x===ol.Right&&J<=C.x||x===ol.Left&&J>=I.x;if(de&&!m.y){y.scrollTo({left:J,behavior:c});return}de?p.x=y.scrollLeft-J:p.x=x===ol.Right?y.scrollLeft-C.x:y.scrollLeft-I.x,p.x&&y.scrollBy({left:-p.x,behavior:c});break}else if(q&&U.y!==f.y){const J=y.scrollTop+m.y,de=x===ol.Down&&J<=C.y||x===ol.Up&&J>=I.y;if(de&&!m.x){y.scrollTo({top:J,behavior:c});return}de?p.y=y.scrollTop-J:p.y=x===ol.Down?y.scrollTop-C.y:y.scrollTop-I.y,p.y&&y.scrollBy({top:-p.y,behavior:c});break}}this.handleMove(e,_b(GC(f,this.referenceCoordinates),p))}}}handleMove(e,r){const{onMove:n}=this.props;e.preventDefault(),n(r)}handleEnd(e){const{onEnd:r}=this.props;e.preventDefault(),this.detach(),r()}handleCancel(e){const{onCancel:r}=this.props;e.preventDefault(),this.detach(),r()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}fF.activators=[{eventName:"onKeyDown",handler:(t,e,r)=>{let{keyboardCodes:n=bne,onActivation:i}=e,{active:a}=r;const{code:o}=t.nativeEvent;if(n.start.includes(o)){const c=a.activatorNode.current;return c&&t.target!==c?!1:(t.preventDefault(),i?.({event:t.nativeEvent}),!0)}return!1}}];function eK(t){return!!(t&&"distance"in t)}function tK(t){return!!(t&&"delay"in t)}class mF{constructor(e,r,n){var i;n===void 0&&(n=NMe(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=r;const{event:a}=e,{target:o}=a;this.props=e,this.events=r,this.document=L1(o),this.documentListeners=new f2(this.document),this.listeners=new f2(n),this.windowListeners=new f2(Eh(o)),this.initialCoordinates=(i=WC(a))!=null?i:zm,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:r,bypassActivationConstraint:n}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(qf.Resize,this.handleCancel),this.windowListeners.add(qf.DragStart,JV),this.windowListeners.add(qf.VisibilityChange,this.handleCancel),this.windowListeners.add(qf.ContextMenu,JV),this.documentListeners.add(qf.Keydown,this.handleKeydown),r){if(n!=null&&n({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(tK(r)){this.timeoutId=setTimeout(this.handleStart,r.delay),this.handlePending(r);return}if(eK(r)){this.handlePending(r);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,r){const{active:n,onPending:i}=this.props;i(n,e,this.initialCoordinates,r)}handleStart(){const{initialCoordinates:e}=this,{onStart:r}=this.props;e&&(this.activated=!0,this.documentListeners.add(qf.Click,kMe,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(qf.SelectionChange,this.removeTextSelection),r(e))}handleMove(e){var r;const{activated:n,initialCoordinates:i,props:a}=this,{onMove:o,options:{activationConstraint:c}}=a;if(!i)return;const u=(r=WC(e))!=null?r:zm,l=GC(i,u);if(!n&&c){if(eK(c)){if(c.tolerance!=null&&gI(l,c.tolerance))return this.handleCancel();if(gI(l,c.distance))return this.handleStart()}if(tK(c)&&gI(l,c.tolerance))return this.handleCancel();this.handlePending(c,l);return}e.cancelable&&e.preventDefault(),o(u)}handleEnd(){const{onAbort:e,onEnd:r}=this.props;this.detach(),this.activated||e(this.props.active),r()}handleCancel(){const{onAbort:e,onCancel:r}=this.props;this.detach(),this.activated||e(this.props.active),r()}handleKeydown(e){e.code===ol.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const IMe={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class AF extends mF{constructor(e){const{event:r}=e,n=L1(r.target);super(e,IMe,n)}}AF.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:r}=t,{onActivation:n}=e;return!r.isPrimary||r.button!==0?!1:(n?.({event:r}),!0)}}];const BMe={move:{name:"mousemove"},end:{name:"mouseup"}};var lO;(function(t){t[t.RightClick=2]="RightClick"})(lO||(lO={}));class PMe extends mF{constructor(e){super(e,BMe,L1(e.event.target))}}PMe.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:r}=t,{onActivation:n}=e;return r.button===lO.RightClick?!1:(n?.({event:r}),!0)}}];const vI={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class wne extends mF{constructor(e){super(e,vI)}static setup(){return window.addEventListener(vI.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(vI.move.name,e)};function e(){}}}wne.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:r}=t,{onActivation:n}=e;const{touches:i}=r;return i.length>1?!1:(n?.({event:r}),!0)}}];var m2;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(m2||(m2={}));var qC;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(qC||(qC={}));function OMe(t){let{acceleration:e,activator:r=m2.Pointer,canScroll:n,draggingRect:i,enabled:a,interval:o=5,order:c=qC.TreeOrder,pointerCoordinates:u,scrollableAncestors:l,scrollableAncestorRects:d,delta:f,threshold:m}=t;const p=DMe({delta:f,disabled:!a}),[g,y]=GDe(),x=T.useRef({x:0,y:0}),w=T.useRef({x:0,y:0}),_=T.useMemo(()=>{switch(r){case m2.Pointer:return u?{top:u.y,bottom:u.y,left:u.x,right:u.x}:null;case m2.DraggableRect:return i}},[r,i,u]),E=T.useRef(null),N=T.useCallback(()=>{const I=E.current;if(!I)return;const D=x.current.x*w.current.x,U=x.current.y*w.current.y;I.scrollBy(D,U)},[]),C=T.useMemo(()=>c===qC.TreeOrder?[...l].reverse():l,[c,l]);T.useEffect(()=>{if(!a||!l.length||!_){y();return}for(const I of C){if(n?.(I)===!1)continue;const D=l.indexOf(I),U=d[D];if(!U)continue;const{direction:G,speed:q}=EMe(I,U,_,e,m);for(const J of["x","y"])p[J][G[J]]||(q[J]=0,G[J]=0);if(q.x>0||q.y>0){y(),E.current=I,g(N,o),x.current=q,w.current=G;return}}x.current={x:0,y:0},w.current={x:0,y:0},y()},[e,N,n,y,a,o,JSON.stringify(_),JSON.stringify(p),g,l,C,d,JSON.stringify(m)])}const RMe={x:{[fd.Backward]:!1,[fd.Forward]:!1},y:{[fd.Backward]:!1,[fd.Forward]:!1}};function DMe(t){let{delta:e,disabled:r}=t;const n=KC(e);return pE(i=>{if(r||!n||!i)return RMe;const a={x:Math.sign(e.x-n.x),y:Math.sign(e.y-n.y)};return{x:{[fd.Backward]:i.x[fd.Backward]||a.x===-1,[fd.Forward]:i.x[fd.Forward]||a.x===1},y:{[fd.Backward]:i.y[fd.Backward]||a.y===-1,[fd.Forward]:i.y[fd.Forward]||a.y===1}}},[r,e,n])}function MMe(t,e){const r=e!=null?t.get(e):void 0,n=r?r.node.current:null;return pE(i=>{var a;return e==null?null:(a=n??i)!=null?a:null},[n,e])}function FMe(t,e){return T.useMemo(()=>t.reduce((r,n)=>{const{sensor:i}=n,a=i.activators.map(o=>({eventName:o.eventName,handler:e(o.handler,n)}));return[...r,...a]},[]),[t,e])}var a_;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(a_||(a_={}));var cO;(function(t){t.Optimized="optimized"})(cO||(cO={}));const rK=new Map;function UMe(t,e){let{dragging:r,dependencies:n,config:i}=e;const[a,o]=T.useState(null),{frequency:c,measure:u,strategy:l}=i,d=T.useRef(t),f=x(),m=i_(f),p=T.useCallback(function(w){w===void 0&&(w=[]),!m.current&&o(_=>_===null?w:_.concat(w.filter(E=>!_.includes(E))))},[m]),g=T.useRef(null),y=pE(w=>{if(f&&!r)return rK;if(!w||w===rK||d.current!==t||a!=null){const _=new Map;for(let E of t){if(!E)continue;if(a&&a.length>0&&!a.includes(E.id)&&E.rect.current){_.set(E.id,E.rect.current);continue}const N=E.node.current,C=N?new hF(u(N),N):null;E.rect.current=C,C&&_.set(E.id,C)}return _}return w},[t,a,r,f,u]);return T.useEffect(()=>{d.current=t},[t]),T.useEffect(()=>{f||p()},[r,f]),T.useEffect(()=>{a&&a.length>0&&o(null)},[JSON.stringify(a)]),T.useEffect(()=>{f||typeof c!="number"||g.current!==null||(g.current=setTimeout(()=>{p(),g.current=null},c))},[c,f,p,...n]),{droppableRects:y,measureDroppableContainers:p,measuringScheduled:a!=null};function x(){switch(l){case a_.Always:return!1;case a_.BeforeDragging:return r;default:return!r}}}function pF(t,e){return pE(r=>t?r||(typeof e=="function"?e(t):t):null,[e,t])}function $Me(t,e){return pF(t,e)}function HMe(t){let{callback:e,disabled:r}=t;const n=H5(e),i=T.useMemo(()=>{if(r||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:a}=window;return new a(n)},[n,r]);return T.useEffect(()=>()=>i?.disconnect(),[i]),i}function z5(t){let{callback:e,disabled:r}=t;const n=H5(e),i=T.useMemo(()=>{if(r||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:a}=window;return new a(n)},[r]);return T.useEffect(()=>()=>i?.disconnect(),[i]),i}function QMe(t){return new hF(gE(t),t)}function nK(t,e,r){e===void 0&&(e=QMe);const[n,i]=T.useState(null);function a(){i(u=>{if(!t)return null;if(t.isConnected===!1){var l;return(l=u??r)!=null?l:null}const d=e(t);return JSON.stringify(u)===JSON.stringify(d)?u:d})}const o=HMe({callback(u){if(t)for(const l of u){const{type:d,target:f}=l;if(d==="childList"&&f instanceof HTMLElement&&f.contains(t)){a();break}}}}),c=z5({callback:a});return dg(()=>{a(),t?(c?.observe(t),o?.observe(document.body,{childList:!0,subtree:!0})):(c?.disconnect(),o?.disconnect())},[t]),n}function zMe(t){const e=pF(t);return hne(t,e)}const iK=[];function VMe(t){const e=T.useRef(t),r=pE(n=>t?n&&n!==iK&&t&&e.current&&t.parentNode===e.current.parentNode?n:dF(t):iK,[t]);return T.useEffect(()=>{e.current=t},[t]),r}function KMe(t){const[e,r]=T.useState(null),n=T.useRef(t),i=T.useCallback(a=>{const o=pI(a.target);o&&r(c=>c?(c.set(o,oO(o)),new Map(c)):null)},[]);return T.useEffect(()=>{const a=n.current;if(t!==a){o(a);const c=t.map(u=>{const l=pI(u);return l?(l.addEventListener("scroll",i,{passive:!0}),[l,oO(l)]):null}).filter(u=>u!=null);r(c.length?new Map(c):null),n.current=t}return()=>{o(t),o(a)};function o(c){c.forEach(u=>{const l=pI(u);l?.removeEventListener("scroll",i)})}},[i,t]),T.useMemo(()=>t.length?e?Array.from(e.values()).reduce((a,o)=>_b(a,o),zm):yne(t):zm,[t,e])}function sK(t,e){e===void 0&&(e=[]);const r=T.useRef(null);return T.useEffect(()=>{r.current=null},e),T.useEffect(()=>{const n=t!==zm;n&&!r.current&&(r.current=t),!n&&r.current&&(r.current=null)},[t]),r.current?GC(t,r.current):zm}function GMe(t){T.useEffect(()=>{if(!$5)return;const e=t.map(r=>{let{sensor:n}=r;return n.setup==null?void 0:n.setup()});return()=>{for(const r of e)r?.()}},t.map(e=>{let{sensor:r}=e;return r}))}function WMe(t,e){return T.useMemo(()=>t.reduce((r,n)=>{let{eventName:i,handler:a}=n;return r[i]=o=>{a(o,e)},r},{}),[t,e])}function _ne(t){return T.useMemo(()=>t?xMe(t):null,[t])}const aK=[];function YMe(t,e){e===void 0&&(e=gE);const[r]=t,n=_ne(r?Eh(r):null),[i,a]=T.useState(aK);function o(){a(()=>t.length?t.map(u=>gne(u)?n:new hF(e(u),u)):aK)}const c=z5({callback:o});return dg(()=>{c?.disconnect(),o(),t.forEach(u=>c?.observe(u))},[t]),i}function Ene(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return AE(e)?e:t}function qMe(t){let{measure:e}=t;const[r,n]=T.useState(null),i=T.useCallback(l=>{for(const{target:d}of l)if(AE(d)){n(f=>{const m=e(d);return f?{...f,width:m.width,height:m.height}:m});break}},[e]),a=z5({callback:i}),o=T.useCallback(l=>{const d=Ene(l);a?.disconnect(),d&&a?.observe(d),n(d?e(d):null)},[e,a]),[c,u]=VC(o);return T.useMemo(()=>({nodeRef:c,rect:r,setRef:u}),[r,c,u])}const XMe=[{sensor:AF,options:{}},{sensor:fF,options:{}}],ZMe={current:{}},dj={draggable:{measure:ZV},droppable:{measure:ZV,strategy:a_.WhileDragging,frequency:cO.Optimized},dragOverlay:{measure:gE}};class A2 extends Map{get(e){var r;return e!=null&&(r=super.get(e))!=null?r:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:r}=e;return!r})}getNodeFor(e){var r,n;return(r=(n=this.get(e))==null?void 0:n.node.current)!=null?r:void 0}}const JMe={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new A2,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:YC},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:dj,measureDroppableContainers:YC,windowRect:null,measuringScheduled:!1},Sne={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:YC,draggableNodes:new Map,over:null,measureDroppableContainers:YC},vE=T.createContext(Sne),jne=T.createContext(JMe);function eFe(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new A2}}}function tFe(t,e){switch(e.type){case Uu.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Uu.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case Uu.DragEnd:case Uu.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Uu.RegisterDroppable:{const{element:r}=e,{id:n}=r,i=new A2(t.droppable.containers);return i.set(n,r),{...t,droppable:{...t.droppable,containers:i}}}case Uu.SetDroppableDisabled:{const{id:r,key:n,disabled:i}=e,a=t.droppable.containers.get(r);if(!a||n!==a.key)return t;const o=new A2(t.droppable.containers);return o.set(r,{...a,disabled:i}),{...t,droppable:{...t.droppable,containers:o}}}case Uu.UnregisterDroppable:{const{id:r,key:n}=e,i=t.droppable.containers.get(r);if(!i||n!==i.key)return t;const a=new A2(t.droppable.containers);return a.delete(r),{...t,droppable:{...t.droppable,containers:a}}}default:return t}}function rFe(t){let{disabled:e}=t;const{active:r,activatorEvent:n,draggableNodes:i}=T.useContext(vE),a=KC(n),o=KC(r?.id);return T.useEffect(()=>{if(!e&&!n&&a&&o!=null){if(!uF(a)||document.activeElement===a.target)return;const c=i.get(o);if(!c)return;const{activatorNode:u,node:l}=c;if(!u.current&&!l.current)return;requestAnimationFrame(()=>{for(const d of[u.current,l.current]){if(!d)continue;const f=qDe(d);if(f){f.focus();break}}})}},[n,e,i,o,a]),null}function Tne(t,e){let{transform:r,...n}=e;return t!=null&&t.length?t.reduce((i,a)=>a({transform:i,...n}),r):r}function nFe(t){return T.useMemo(()=>({draggable:{...dj.draggable,...t?.draggable},droppable:{...dj.droppable,...t?.droppable},dragOverlay:{...dj.dragOverlay,...t?.dragOverlay}}),[t?.draggable,t?.droppable,t?.dragOverlay])}function iFe(t){let{activeNode:e,measure:r,initialRect:n,config:i=!0}=t;const a=T.useRef(!1),{x:o,y:c}=typeof i=="boolean"?{x:i,y:i}:i;dg(()=>{if(!o&&!c||!e){a.current=!1;return}if(a.current||!n)return;const l=e?.node.current;if(!l||l.isConnected===!1)return;const d=r(l),f=hne(d,n);if(o||(f.x=0),c||(f.y=0),a.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const m=mne(l);m&&m.scrollBy({top:f.y,left:f.x})}},[e,o,c,n,r])}const V5=T.createContext({...zm,scaleX:1,scaleY:1});var y0;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(y0||(y0={}));const sFe=T.memo(function(e){var r,n,i,a;let{id:o,accessibility:c,autoScroll:u=!0,children:l,sensors:d=XMe,collisionDetection:f=mMe,measuring:m,modifiers:p,...g}=e;const y=T.useReducer(tFe,void 0,eFe),[x,w]=y,[_,E]=rMe(),[N,C]=T.useState(y0.Uninitialized),I=N===y0.Initialized,{draggable:{active:D,nodes:U,translate:G},droppable:{containers:q}}=x,J=D!=null?U.get(D):null,de=T.useRef({initial:null,translated:null}),xe=T.useMemo(()=>{var Hr;return D!=null?{id:D,data:(Hr=J?.data)!=null?Hr:ZMe,rect:de}:null},[D,J]),we=T.useRef(null),[ve,ne]=T.useState(null),[ae,oe]=T.useState(null),Ie=i_(g,Object.values(g)),Ce=Q5("DndDescribedBy",o),be=T.useMemo(()=>q.getEnabled(),[q]),ue=nFe(m),{droppableRects:Pe,measureDroppableContainers:Re,measuringScheduled:He}=UMe(be,{dragging:I,dependencies:[G.x,G.y],config:ue.droppable}),Fe=MMe(U,D),ft=T.useMemo(()=>ae?WC(ae):null,[ae]),at=ln(),De=$Me(Fe,ue.draggable.measure);iFe({activeNode:D!=null?U.get(D):null,config:at.layoutShiftCompensation,initialRect:De,measure:ue.draggable.measure});const ut=nK(Fe,ue.draggable.measure,De),et=nK(Fe?Fe.parentElement:null),Ue=T.useRef({activatorEvent:null,active:null,activeNode:Fe,collisionRect:null,collisions:null,droppableRects:Pe,draggableNodes:U,draggingNode:null,draggingNodeRect:null,droppableContainers:q,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),jt=q.getNodeFor((r=Ue.current.over)==null?void 0:r.id),rt=qMe({measure:ue.dragOverlay.measure}),Ct=(n=rt.nodeRef.current)!=null?n:Fe,ke=I?(i=rt.rect)!=null?i:ut:null,Xe=!!(rt.nodeRef.current&&rt.rect),mt=zMe(Xe?null:ut),Jt=_ne(Ct?Eh(Ct):null),tr=VMe(I?jt??Fe:null),lr=YMe(tr),Pr=Tne(p,{transform:{x:G.x-mt.x,y:G.y-mt.y,scaleX:1,scaleY:1},activatorEvent:ae,active:xe,activeNodeRect:ut,containerNodeRect:et,draggingNodeRect:ke,over:Ue.current.over,overlayNodeRect:rt.rect,scrollableAncestors:tr,scrollableAncestorRects:lr,windowRect:Jt}),tn=ft?_b(ft,G):null,Gr=KMe(tr),Xr=sK(Gr),Qr=sK(Gr,[ut]),Pn=_b(Pr,Xr),wn=ke?gMe(ke,Pr):null,yi=xe&&wn?f({active:xe,collisionRect:wn,droppableRects:Pe,droppableContainers:be,pointerCoordinates:tn}):null,ot=dMe(yi,"id"),[Gt,Ir]=T.useState(null),ar=Xe?Pr:_b(Pr,Qr),Qt=AMe(ar,(a=Gt?.rect)!=null?a:null,ut),gr=T.useRef(null),Yr=T.useCallback((Hr,yn)=>{let{sensor:mn,options:Mn}=yn;if(we.current==null)return;const li=U.get(we.current);if(!li)return;const Cs=Hr.nativeEvent,Ms=new mn({active:we.current,activeNode:li,event:Cs,options:Mn,context:Ue,onAbort(ei){if(!U.get(ei))return;const{onDragAbort:as}=Ie.current,ta={id:ei};as?.(ta),_({type:"onDragAbort",event:ta})},onPending(ei,un,as,ta){if(!U.get(ei))return;const{onDragPending:Nn}=Ie.current,Fs={id:ei,constraint:un,initialCoordinates:as,offset:ta};Nn?.(Fs),_({type:"onDragPending",event:Fs})},onStart(ei){const un=we.current;if(un==null)return;const as=U.get(un);if(!as)return;const{onDragStart:ta}=Ie.current,jn={activatorEvent:Cs,active:{id:un,data:as.data,rect:de}};C0.unstable_batchedUpdates(()=>{ta?.(jn),C(y0.Initializing),w({type:Uu.DragStart,initialCoordinates:ei,active:un}),_({type:"onDragStart",event:jn}),ne(gr.current),oe(Cs)})},onMove(ei){w({type:Uu.DragMove,coordinates:ei})},onEnd:Ns(Uu.DragEnd),onCancel:Ns(Uu.DragCancel)});gr.current=Ms;function Ns(ei){return async function(){const{active:as,collisions:ta,over:jn,scrollAdjustedTranslate:Nn}=Ue.current;let Fs=null;if(as&&Nn){const{cancelDrop:Qs}=Ie.current;Fs={activatorEvent:Cs,active:as,collisions:ta,delta:Nn,over:jn},ei===Uu.DragEnd&&typeof Qs=="function"&&await Promise.resolve(Qs(Fs))&&(ei=Uu.DragCancel)}we.current=null,C0.unstable_batchedUpdates(()=>{w({type:ei}),C(y0.Uninitialized),Ir(null),ne(null),oe(null),gr.current=null;const Qs=ei===Uu.DragEnd?"onDragEnd":"onDragCancel";if(Fs){const Us=Ie.current[Qs];Us?.(Fs),_({type:Qs,event:Fs})}})}}},[U]),en=T.useCallback((Hr,yn)=>(mn,Mn)=>{const li=mn.nativeEvent,Cs=U.get(Mn);if(we.current!==null||!Cs||li.dndKit||li.defaultPrevented)return;const Ms={active:Cs};Hr(mn,yn.options,Ms)===!0&&(li.dndKit={capturedBy:yn.sensor},we.current=Mn,Yr(mn,yn))},[U,Yr]),On=FMe(d,en);GMe(d),dg(()=>{ut&&N===y0.Initializing&&C(y0.Initialized)},[ut,N]),T.useEffect(()=>{const{onDragMove:Hr}=Ie.current,{active:yn,activatorEvent:mn,collisions:Mn,over:li}=Ue.current;if(!yn||!mn)return;const Cs={active:yn,activatorEvent:mn,collisions:Mn,delta:{x:Pn.x,y:Pn.y},over:li};C0.unstable_batchedUpdates(()=>{Hr?.(Cs),_({type:"onDragMove",event:Cs})})},[Pn.x,Pn.y]),T.useEffect(()=>{const{active:Hr,activatorEvent:yn,collisions:mn,droppableContainers:Mn,scrollAdjustedTranslate:li}=Ue.current;if(!Hr||we.current==null||!yn||!li)return;const{onDragOver:Cs}=Ie.current,Ms=Mn.get(ot),Ns=Ms&&Ms.rect.current?{id:Ms.id,rect:Ms.rect.current,data:Ms.data,disabled:Ms.disabled}:null,ei={active:Hr,activatorEvent:yn,collisions:mn,delta:{x:li.x,y:li.y},over:Ns};C0.unstable_batchedUpdates(()=>{Ir(Ns),Cs?.(ei),_({type:"onDragOver",event:ei})})},[ot]),dg(()=>{Ue.current={activatorEvent:ae,active:xe,activeNode:Fe,collisionRect:wn,collisions:yi,droppableRects:Pe,draggableNodes:U,draggingNode:Ct,draggingNodeRect:ke,droppableContainers:q,over:Gt,scrollableAncestors:tr,scrollAdjustedTranslate:Pn},de.current={initial:ke,translated:wn}},[xe,Fe,yi,wn,U,Ct,ke,Pe,q,Gt,tr,Pn]),OMe({...at,delta:G,draggingRect:wn,pointerCoordinates:tn,scrollableAncestors:tr,scrollableAncestorRects:lr});const fn=T.useMemo(()=>({active:xe,activeNode:Fe,activeNodeRect:ut,activatorEvent:ae,collisions:yi,containerNodeRect:et,dragOverlay:rt,draggableNodes:U,droppableContainers:q,droppableRects:Pe,over:Gt,measureDroppableContainers:Re,scrollableAncestors:tr,scrollableAncestorRects:lr,measuringConfiguration:ue,measuringScheduled:He,windowRect:Jt}),[xe,Fe,ut,ae,yi,et,rt,U,q,Pe,Gt,Re,tr,lr,ue,He,Jt]),Jn=T.useMemo(()=>({activatorEvent:ae,activators:On,active:xe,activeNodeRect:ut,ariaDescribedById:{draggable:Ce},dispatch:w,draggableNodes:U,over:Gt,measureDroppableContainers:Re}),[ae,On,xe,ut,w,Ce,U,Gt,Re]);return So.createElement(dne.Provider,{value:E},So.createElement(vE.Provider,{value:Jn},So.createElement(jne.Provider,{value:fn},So.createElement(V5.Provider,{value:Qt},l)),So.createElement(rFe,{disabled:c?.restoreFocus===!1})),So.createElement(sMe,{...c,hiddenTextDescribedById:Ce}));function ln(){const Hr=ve?.autoScrollEnabled===!1,yn=typeof u=="object"?u.enabled===!1:u===!1,mn=I&&!Hr&&!yn;return typeof u=="object"?{...u,enabled:mn}:{enabled:mn}}}),aFe=T.createContext(null),oK="button",oFe="Draggable";function lFe(t){let{id:e,data:r,disabled:n=!1,attributes:i}=t;const a=Q5(oFe),{activators:o,activatorEvent:c,active:u,activeNodeRect:l,ariaDescribedById:d,draggableNodes:f,over:m}=T.useContext(vE),{role:p=oK,roleDescription:g="draggable",tabIndex:y=0}=i??{},x=u?.id===e,w=T.useContext(x?V5:aFe),[_,E]=VC(),[N,C]=VC(),I=WMe(o,e),D=i_(r);dg(()=>(f.set(e,{id:e,key:a,node:_,activatorNode:N,data:D}),()=>{const G=f.get(e);G&&G.key===a&&f.delete(e)}),[f,e]);const U=T.useMemo(()=>({role:p,tabIndex:y,"aria-disabled":n,"aria-pressed":x&&p===oK?!0:void 0,"aria-roledescription":g,"aria-describedby":d.draggable}),[n,p,y,x,g,d.draggable]);return{active:u,activatorEvent:c,activeNodeRect:l,attributes:U,isDragging:x,listeners:n?void 0:I,node:_,over:m,setNodeRef:E,setActivatorNodeRef:C,transform:w}}function cFe(){return T.useContext(jne)}const uFe="Droppable",dFe={timeout:25};function hFe(t){let{data:e,disabled:r=!1,id:n,resizeObserverConfig:i}=t;const a=Q5(uFe),{active:o,dispatch:c,over:u,measureDroppableContainers:l}=T.useContext(vE),d=T.useRef({disabled:r}),f=T.useRef(!1),m=T.useRef(null),p=T.useRef(null),{disabled:g,updateMeasurementsFor:y,timeout:x}={...dFe,...i},w=i_(y??n),_=T.useCallback(()=>{if(!f.current){f.current=!0;return}p.current!=null&&clearTimeout(p.current),p.current=setTimeout(()=>{l(Array.isArray(w.current)?w.current:[w.current]),p.current=null},x)},[x]),E=z5({callback:_,disabled:g||!o}),N=T.useCallback((U,G)=>{E&&(G&&(E.unobserve(G),f.current=!1),U&&E.observe(U))},[E]),[C,I]=VC(N),D=i_(e);return T.useEffect(()=>{!E||!C.current||(E.disconnect(),f.current=!1,E.observe(C.current))},[C,E]),T.useEffect(()=>(c({type:Uu.RegisterDroppable,element:{id:n,key:a,disabled:r,node:C,rect:m,data:D}}),()=>c({type:Uu.UnregisterDroppable,key:a,id:n})),[n]),T.useEffect(()=>{r!==d.current.disabled&&(c({type:Uu.SetDroppableDisabled,id:n,key:a,disabled:r}),d.current.disabled=r)},[n,a,r,c]),{active:o,rect:m,isOver:u?.id===n,node:C,over:u,setNodeRef:I}}function fFe(t){let{animation:e,children:r}=t;const[n,i]=T.useState(null),[a,o]=T.useState(null),c=KC(r);return!r&&!n&&c&&i(c),dg(()=>{if(!a)return;const u=n?.key,l=n?.props.id;if(u==null||l==null){i(null);return}Promise.resolve(e(l,a)).then(()=>{i(null)})},[e,n,a]),So.createElement(So.Fragment,null,r,n?T.cloneElement(n,{ref:o}):null)}const mFe={x:0,y:0,scaleX:1,scaleY:1};function AFe(t){let{children:e}=t;return So.createElement(vE.Provider,{value:Sne},So.createElement(V5.Provider,{value:mFe},e))}const pFe={position:"fixed",touchAction:"none"},gFe=t=>uF(t)?"transform 250ms ease":void 0,vFe=T.forwardRef((t,e)=>{let{as:r,activatorEvent:n,adjustScale:i,children:a,className:o,rect:c,style:u,transform:l,transition:d=gFe}=t;if(!c)return null;const f=i?l:{...l,scaleX:1,scaleY:1},m={...pFe,width:c.width,height:c.height,top:c.top,left:c.left,transform:s_.Transform.toString(f),transformOrigin:i&&n?lMe(n,c):void 0,transition:typeof d=="function"?d(n):d,...u};return So.createElement(r,{className:o,style:m,ref:e},a)}),yFe=t=>e=>{let{active:r,dragOverlay:n}=e;const i={},{styles:a,className:o}=t;if(a!=null&&a.active)for(const[c,u]of Object.entries(a.active))u!==void 0&&(i[c]=r.node.style.getPropertyValue(c),r.node.style.setProperty(c,u));if(a!=null&&a.dragOverlay)for(const[c,u]of Object.entries(a.dragOverlay))u!==void 0&&n.node.style.setProperty(c,u);return o!=null&&o.active&&r.node.classList.add(o.active),o!=null&&o.dragOverlay&&n.node.classList.add(o.dragOverlay),function(){for(const[u,l]of Object.entries(i))r.node.style.setProperty(u,l);o!=null&&o.active&&r.node.classList.remove(o.active)}},xFe=t=>{let{transform:{initial:e,final:r}}=t;return[{transform:s_.Transform.toString(e)},{transform:s_.Transform.toString(r)}]},bFe={duration:250,easing:"ease",keyframes:xFe,sideEffects:yFe({styles:{active:{opacity:"0"}}})};function wFe(t){let{config:e,draggableNodes:r,droppableContainers:n,measuringConfiguration:i}=t;return H5((a,o)=>{if(e===null)return;const c=r.get(a);if(!c)return;const u=c.node.current;if(!u)return;const l=Ene(o);if(!l)return;const{transform:d}=Eh(o).getComputedStyle(o),f=fne(d);if(!f)return;const m=typeof e=="function"?e:_Fe(e);return xne(u,i.draggable.measure),m({active:{id:a,data:c.data,node:u,rect:i.draggable.measure(u)},draggableNodes:r,dragOverlay:{node:o,rect:i.dragOverlay.measure(l)},droppableContainers:n,measuringConfiguration:i,transform:f})})}function _Fe(t){const{duration:e,easing:r,sideEffects:n,keyframes:i}={...bFe,...t};return a=>{let{active:o,dragOverlay:c,transform:u,...l}=a;if(!e)return;const d={x:c.rect.left-o.rect.left,y:c.rect.top-o.rect.top},f={scaleX:u.scaleX!==1?o.rect.width*u.scaleX/c.rect.width:1,scaleY:u.scaleY!==1?o.rect.height*u.scaleY/c.rect.height:1},m={x:u.x-d.x,y:u.y-d.y,...f},p=i({...l,active:o,dragOverlay:c,transform:{initial:u,final:m}}),[g]=p,y=p[p.length-1];if(JSON.stringify(g)===JSON.stringify(y))return;const x=n?.({active:o,dragOverlay:c,...l}),w=c.node.animate(p,{duration:e,easing:r,fill:"forwards"});return new Promise(_=>{w.onfinish=()=>{x?.(),_()}})}}let lK=0;function EFe(t){return T.useMemo(()=>{if(t!=null)return lK++,lK},[t])}const SFe=So.memo(t=>{let{adjustScale:e=!1,children:r,dropAnimation:n,style:i,transition:a,modifiers:o,wrapperElement:c="div",className:u,zIndex:l=999}=t;const{activatorEvent:d,active:f,activeNodeRect:m,containerNodeRect:p,draggableNodes:g,droppableContainers:y,dragOverlay:x,over:w,measuringConfiguration:_,scrollableAncestors:E,scrollableAncestorRects:N,windowRect:C}=cFe(),I=T.useContext(V5),D=EFe(f?.id),U=Tne(o,{activatorEvent:d,active:f,activeNodeRect:m,containerNodeRect:p,draggingNodeRect:x.rect,over:w,overlayNodeRect:x.rect,scrollableAncestors:E,scrollableAncestorRects:N,transform:I,windowRect:C}),G=pF(m),q=wFe({config:n,draggableNodes:g,droppableContainers:y,measuringConfiguration:_}),J=G?x.setRef:void 0;return So.createElement(AFe,null,So.createElement(fFe,{animation:q},f&&D?So.createElement(vFe,{key:D,id:f.id,ref:J,as:c,activatorEvent:d,adjustScale:e,className:u,transition:a,rect:G,style:{zIndex:l,...i},transform:U},r):null))});function cK({id:t,children:e,data:r}){const{attributes:n,listeners:i,setNodeRef:a,transform:o,isDragging:c}=lFe({id:t,data:r}),u=o?{transform:`translate3d(${o.x}px, ${o.y}px, 0)`}:void 0;return s.jsx("div",{ref:a,style:u,...i,...n,className:`cursor-grab active:cursor-grabbing ${c?"opacity-50":""}`,children:e})}function jFe({event:t,children:e,isOver:r}){const{setNodeRef:n}=hFe({id:`event-${t.id}`,data:{event:t}});return s.jsx("div",{ref:n,className:`bg-gray-800/50 rounded-xl border-2 transition-all ${r?"border-orange-500 bg-orange-500/10":"border-gray-700/50"}`,children:e})}function TFe({events:t,crewMembers:e,equipment:r,onAssignCrew:n,onUnassignCrew:i,onAssignEquipment:a,onUnassignEquipment:o}){const[c,u]=T.useState(null),[l,d]=T.useState(null),[f,m]=T.useState(null),p=aMe(AI(AF,{activationConstraint:{distance:8}}),AI(wne,{activationConstraint:{delay:250,tolerance:5}}),AI(fF)),g=new Date;g.setHours(0,0,0,0);const y=t.filter(C=>new Date(C.date)>=g&&C.status!=="cancelled"&&C.status!=="completed").sort((C,I)=>new Date(C.date)-new Date(I.date));function x(C){u(C.active.id),d(C.active.data.current)}function w(C){m(C.over?.id||null)}function _(C){const{active:I,over:D}=C;if(D&&D.id.toString().startsWith("event-")){const U=D.id.toString().replace("event-",""),G=t.find(q=>q.id===U);if(G&&I.data.current){const{type:q,item:J}=I.data.current;q==="crew"?n(G,J):q==="equipment"&&a(G,J)}}u(null),d(null),m(null)}function E(){u(null),d(null),m(null)}function N(C){return new Date(C+"T00:00:00").toLocaleDateString("en-AU",{weekday:"short",day:"numeric",month:"short"})}return new Set(y.flatMap(C=>C.crew_ids||[])),new Set(y.flatMap(C=>C.equipment_ids||[])),s.jsxs(sFe,{sensors:p,collisionDetection:hMe,onDragStart:x,onDragOver:w,onDragEnd:_,onDragCancel:E,children:[s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[s.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[" Upcoming Events",s.jsx("span",{className:"text-sm font-normal text-gray-400",children:"Drop crew & equipment here"})]}),s.jsxs("div",{className:"space-y-3 max-h-[600px] overflow-y-auto pr-2",children:[y.map(C=>{const I=f===`event-${C.id}`,D=e.filter(G=>(C.crew_ids||[]).includes(G.id)),U=r.filter(G=>(C.equipment_ids||[]).includes(G.id));return s.jsx(jFe,{event:C,isOver:I,children:s.jsxs("div",{className:"p-4",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-white",children:C.name}),s.jsx("p",{className:"text-orange-500 text-sm",children:C.client})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-sm text-gray-400",children:N(C.date)}),s.jsx("div",{className:`text-xs px-2 py-0.5 rounded-full inline-block mt-1 ${C.status==="confirmed"?"bg-green-500/20 text-green-400":C.status==="tentative"?"bg-yellow-500/20 text-yellow-400":"bg-gray-500/20 text-gray-400"}`,children:C.status})]})]}),s.jsxs("div",{className:"mb-2",children:[s.jsxs("div",{className:"text-xs text-gray-500 mb-1",children:[" Crew (",D.length,")"]}),s.jsx("div",{className:"flex flex-wrap gap-1",children:D.length===0?s.jsx("span",{className:"text-xs text-gray-600 italic",children:"No crew assigned"}):D.map(G=>s.jsxs("span",{className:"text-xs bg-green-500/20 text-green-400 px-2 py-1 rounded flex items-center gap-1 group",children:[G.name,s.jsx("button",{onClick:()=>i(C,G),className:"opacity-0 group-hover:opacity-100 hover:text-red-400 transition",children:""})]},G.id))})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"text-xs text-gray-500 mb-1",children:[" Equipment (",U.length,")"]}),s.jsx("div",{className:"flex flex-wrap gap-1",children:U.length===0?s.jsx("span",{className:"text-xs text-gray-600 italic",children:"No equipment assigned"}):U.map(G=>s.jsxs("span",{className:"text-xs bg-blue-500/20 text-blue-400 px-2 py-1 rounded flex items-center gap-1 group",children:[G.name,s.jsx("button",{onClick:()=>o(C,G),className:"opacity-0 group-hover:opacity-100 hover:text-red-400 transition",children:""})]},G.id))})]})]})},C.id)}),y.length===0&&s.jsx("div",{className:"text-center text-gray-500 py-12",children:"No upcoming events to assign"})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-gray-800/30 rounded-xl border border-gray-700/50 p-4",children:[s.jsx("h3",{className:"text-lg font-bold text-white mb-3 flex items-center gap-2",children:" Crew Pool"}),s.jsxs("div",{className:"space-y-2 max-h-[250px] overflow-y-auto",children:[e.map(C=>s.jsx(cK,{id:`crew-${C.id}`,data:{type:"crew",item:C},children:s.jsxs("div",{className:"p-2 bg-gray-700/50 rounded-lg border border-gray-600/50 hover:border-green-500/50 transition",children:[s.jsx("div",{className:"font-medium text-white text-sm",children:C.name}),s.jsx("div",{className:"text-xs text-gray-400",children:C.role||"No role"})]})},C.id)),e.length===0&&s.jsx("p",{className:"text-gray-500 text-sm text-center py-4",children:"No crew members"})]})]}),s.jsxs("div",{className:"bg-gray-800/30 rounded-xl border border-gray-700/50 p-4",children:[s.jsx("h3",{className:"text-lg font-bold text-white mb-3 flex items-center gap-2",children:" Equipment Pool"}),s.jsxs("div",{className:"space-y-2 max-h-[250px] overflow-y-auto",children:[r.map(C=>s.jsx(cK,{id:`equip-${C.id}`,data:{type:"equipment",item:C},children:s.jsxs("div",{className:"p-2 bg-gray-700/50 rounded-lg border border-gray-600/50 hover:border-blue-500/50 transition",children:[s.jsx("div",{className:"font-medium text-white text-sm",children:C.name}),s.jsxs("div",{className:"text-xs text-gray-400",children:[C.category,"  ",C.quantity]})]})},C.id)),r.length===0&&s.jsx("p",{className:"text-gray-500 text-sm text-center py-4",children:"No equipment"})]})]})]})]}),s.jsx(SFe,{children:c&&l&&s.jsx("div",{className:`p-2 rounded-lg border shadow-xl ${l.type==="crew"?"bg-green-600 border-green-500":"bg-blue-600 border-blue-500"}`,children:s.jsx("div",{className:"font-medium text-white text-sm",children:l.item.name})})})]})}function CFe(){const[t,e]=T.useState([]),[r,n]=T.useState([]),[i,a]=T.useState([]),[o,c]=T.useState(!0),[u,l]=T.useState("grid"),[d,f]=T.useState(null),[m,p]=T.useState("events"),[g,y]=T.useState(!1),[x,w]=T.useState(!1),[_,E]=T.useState(!1),[N,C]=T.useState(null),[I,D]=T.useState(null),[U,G]=T.useState(null),[q,J]=T.useState(null),[de,xe]=T.useState({name:"",client:"",date:"",location:"",status:"tentative",notes:"",crew_ids:[],equipment_ids:[],flight_links:"",accommodation_links:"",rental_links:""}),[we,ve]=T.useState({name:"",role:"",phone:"",email:""}),[ne,ae]=T.useState({name:"",category:"Camera",quantity:1,notes:""}),[oe,Ie]=T.useState("upcoming"),[Ce,be]=T.useState(new Date);T.useEffect(()=>{ue()},[]);async function ue(){c(!0);const[ot,Gt,Ir]=await Promise.all([ir.from("production_events").select("*").order("date",{ascending:!0}),ir.from("crew_members").select("*").order("name"),ir.from("equipment_inventory").select("*").order("category, name")]);e(ot.data||[]),n(Gt.data||[]),a(Ir.data||[]),c(!1)}const Pe=new Date;Pe.setHours(0,0,0,0);const Re=t.filter(ot=>new Date(ot.date)>=Pe&&ot.status!=="cancelled").length,He=t.filter(ot=>{const Gt=new Date(ot.date);return Gt.getMonth()===Pe.getMonth()&&Gt.getFullYear()===Pe.getFullYear()&&ot.status!=="cancelled"}).length,Fe=t.filter(ot=>new Date(ot.date)>=Pe&&(!ot.crew_ids||ot.crew_ids.length===0)).length,ft=t.filter(ot=>{const Gt=new Date(ot.date);return oe==="upcoming"?Gt>=Pe&&ot.status!=="completed"&&ot.status!=="cancelled":oe==="completed"?ot.status==="completed":oe==="thisMonth"?Gt.getMonth()===Pe.getMonth()&&Gt.getFullYear()===Pe.getFullYear():!0});async function at(ot){ot.preventDefault();const Gt={name:de.name,client:de.client,date:de.date,location:de.location,status:de.status,notes:de.notes,crew_ids:de.crew_ids,equipment_ids:de.equipment_ids,flight_links:de.flight_links.split(",").map(Ir=>Ir.trim()).filter(Boolean),accommodation_links:de.accommodation_links.split(",").map(Ir=>Ir.trim()).filter(Boolean),rental_links:de.rental_links.split(",").map(Ir=>Ir.trim()).filter(Boolean)};I?await ir.from("production_events").update(Gt).eq("id",I.id):await ir.from("production_events").insert([Gt]),y(!1),D(null),et(),ue()}async function De(ot){confirm("Delete this event? This cannot be undone.")&&(await ir.from("production_events").delete().eq("id",ot),C(null),ue())}function ut(ot){D(ot),xe({name:ot.name,client:ot.client,date:ot.date,location:ot.location||"",status:ot.status,notes:ot.notes||"",crew_ids:ot.crew_ids||[],equipment_ids:ot.equipment_ids||[],flight_links:(ot.flight_links||[]).join(", "),accommodation_links:(ot.accommodation_links||[]).join(", "),rental_links:(ot.rental_links||[]).join(", ")}),y(!0)}function et(){xe({name:"",client:"",date:"",location:"",status:"tentative",notes:"",crew_ids:[],equipment_ids:[],flight_links:"",accommodation_links:"",rental_links:""})}async function Ue(ot){ot.preventDefault(),U?await ir.from("crew_members").update(we).eq("id",U.id):await ir.from("crew_members").insert([we]),w(!1),G(null),ve({name:"",role:"",phone:"",email:""}),ue()}function jt(ot){G(ot),ve({name:ot.name,role:ot.role||"",phone:ot.phone||"",email:ot.email||""}),w(!0)}async function rt(ot){confirm("Delete this crew member?")&&(await ir.from("crew_members").delete().eq("id",ot),ue())}async function Ct(ot){ot.preventDefault(),q?await ir.from("equipment_inventory").update(ne).eq("id",q.id):await ir.from("equipment_inventory").insert([ne]),E(!1),J(null),ae({name:"",category:"Camera",quantity:1,notes:""}),ue()}function ke(ot){J(ot),ae({name:ot.name,category:ot.category||"Camera",quantity:ot.quantity||1,notes:ot.notes||""}),E(!0)}async function Xe(ot){confirm("Delete this equipment?")&&(await ir.from("equipment_inventory").delete().eq("id",ot),ue())}async function mt(ot,Gt,Ir){const ar=t.find(gr=>gr.id===ot);if(!ar)return;const Qt=Ir?[...ar.crew_ids||[],Gt]:(ar.crew_ids||[]).filter(gr=>gr!==Gt);await ir.from("production_events").update({crew_ids:Qt}).eq("id",ot),ue(),N?.id===ot&&C({...N,crew_ids:Qt})}async function Jt(ot,Gt,Ir){const ar=t.find(gr=>gr.id===ot);if(!ar)return;const Qt=Ir?[...ar.equipment_ids||[],Gt]:(ar.equipment_ids||[]).filter(gr=>gr!==Gt);await ir.from("production_events").update({equipment_ids:Qt}).eq("id",ot),ue(),N?.id===ot&&C({...N,equipment_ids:Qt})}function tr(ot){return new Date(ot).toLocaleDateString("en-AU",{weekday:"short",day:"numeric",month:"short"})}function lr(ot){return new Date(ot).toLocaleDateString("en-AU",{weekday:"long",day:"numeric",month:"long",year:"numeric"})}function Pr(ot){return(ot||[]).map(Gt=>r.find(Ir=>Ir.id===Gt)).filter(Boolean)}function tn(ot){return(ot||[]).map(Gt=>i.find(Ir=>Ir.id===Gt)).filter(Boolean)}function Gr(ot){const[Gt,Ir,ar]=ot.split("-").map(Number),Qt=new Date(Gt,Ir-1,ar),gr=new Date;gr.setHours(0,0,0,0);const Yr=Math.round((Qt-gr)/(1e3*60*60*24));return Yr===0?"Today":Yr===1?"Tomorrow":Yr<0?`${Math.abs(Yr)}d ago`:`${Yr}d`}const Xr={confirmed:"bg-green-500",tentative:"bg-yellow-500",completed:"bg-gray-500",cancelled:"bg-red-500"},Qr={confirmed:"border-green-500/30",tentative:"border-yellow-500/30",completed:"border-gray-500/30",cancelled:"border-red-500/30"},Pn=["Camera","Lens","Audio","Lighting","Support","Monitor","Power","Media","Transport","Other"];function wn(){const ot=Ce.getFullYear(),Gt=Ce.getMonth(),Ir=new Date(ot,Gt,1),ar=new Date(ot,Gt+1,0),Qt=Ir.getDay(),gr=[];for(let en=Qt-1;en>=0;en--){const On=new Date(ot,Gt,-en);gr.push({date:On,isCurrentMonth:!1})}for(let en=1;en<=ar.getDate();en++)gr.push({date:new Date(ot,Gt,en),isCurrentMonth:!0});const Yr=42-gr.length;for(let en=1;en<=Yr;en++)gr.push({date:new Date(ot,Gt+1,en),isCurrentMonth:!1});return gr}function yi(ot){const Gt=ot.getFullYear(),Ir=String(ot.getMonth()+1).padStart(2,"0"),ar=String(ot.getDate()).padStart(2,"0"),Qt=`${Gt}-${Ir}-${ar}`;return t.filter(gr=>gr.date===Qt)}return o?s.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:s.jsx("div",{className:"animate-pulse text-gray-400",children:"Loading..."})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-white",children:"Crew & Logistics"}),s.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Manage teams, equipment, and travel for events"})]}),m==="events"&&s.jsxs("button",{onClick:()=>{et(),D(null),y(!0)},className:"bg-orange-600 hover:bg-orange-700 px-4 py-2.5 rounded-lg font-medium flex items-center justify-center sm:justify-start",children:[s.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Event"]}),m==="crew"&&s.jsxs("button",{onClick:()=>{G(null),ve({name:"",role:"",phone:"",email:""}),w(!0)},className:"bg-green-600 hover:bg-green-700 px-4 py-2.5 rounded-lg font-medium flex items-center justify-center sm:justify-start",children:[s.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Crew"]}),m==="equipment"&&s.jsxs("button",{onClick:()=>{J(null),ae({name:"",category:"Camera",quantity:1,notes:""}),E(!0)},className:"bg-blue-600 hover:bg-blue-700 px-4 py-2.5 rounded-lg font-medium flex items-center justify-center sm:justify-start",children:[s.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Equipment"]})]}),s.jsxs("div",{className:"flex space-x-1 bg-gray-800/50 rounded-xl p-1 border border-gray-700/50",children:[s.jsxs("button",{onClick:()=>p("events"),className:`flex-1 px-4 py-3 rounded-lg font-medium transition flex items-center justify-center gap-2 ${m==="events"?"bg-orange-600 text-white":"text-gray-400 hover:text-white hover:bg-gray-700/50"}`,children:[s.jsx("span",{children:""}),s.jsx("span",{children:"Events"}),s.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${m==="events"?"bg-orange-700":"bg-gray-700"}`,children:Re})]}),s.jsxs("button",{onClick:()=>p("crew"),className:`flex-1 px-4 py-3 rounded-lg font-medium transition flex items-center justify-center gap-2 ${m==="crew"?"bg-green-600 text-white":"text-gray-400 hover:text-white hover:bg-gray-700/50"}`,children:[s.jsx("span",{children:""}),s.jsx("span",{children:"Crew"}),s.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${m==="crew"?"bg-green-700":"bg-gray-700"}`,children:r.length})]}),s.jsxs("button",{onClick:()=>p("equipment"),className:`flex-1 px-4 py-3 rounded-lg font-medium transition flex items-center justify-center gap-2 ${m==="equipment"?"bg-blue-600 text-white":"text-gray-400 hover:text-white hover:bg-gray-700/50"}`,children:[s.jsx("span",{children:""}),s.jsx("span",{children:"Equipment"}),s.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${m==="equipment"?"bg-blue-700":"bg-gray-700"}`,children:i.length})]}),s.jsxs("button",{onClick:()=>p("assign"),className:`flex-1 px-4 py-3 rounded-lg font-medium transition flex items-center justify-center gap-2 ${m==="assign"?"bg-purple-600 text-white":"text-gray-400 hover:text-white hover:bg-gray-700/50"}`,children:[s.jsx("span",{children:""}),s.jsx("span",{className:"hidden sm:inline",children:"Assign"})]})]}),m==="events"&&s.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4",children:[s.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-4 border border-gray-700/50",children:[s.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-orange-500",children:Re}),s.jsx("div",{className:"text-gray-400 text-xs sm:text-sm",children:"Upcoming Events"})]}),s.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-4 border border-gray-700/50",children:[s.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-green-500",children:r.length}),s.jsx("div",{className:"text-gray-400 text-xs sm:text-sm",children:"Crew Members"})]}),s.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-4 border border-gray-700/50",children:[s.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-blue-500",children:i.length}),s.jsx("div",{className:"text-gray-400 text-xs sm:text-sm",children:"Equipment Items"})]}),s.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-4 border border-gray-700/50",children:[s.jsx("div",{className:`text-2xl sm:text-3xl font-bold ${Fe>0?"text-red-500":"text-purple-500"}`,children:Fe>0?Fe:He}),s.jsx("div",{className:"text-gray-400 text-xs sm:text-sm",children:Fe>0?" Need Crew":"This Month"})]})]}),m==="events"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:[s.jsxs("div",{className:"flex items-center overflow-x-auto pb-2 sm:pb-0 -mx-1 px-1",children:[s.jsx("span",{className:"text-gray-400 text-sm mr-3 whitespace-nowrap",children:"Filter:"}),s.jsx("div",{className:"flex space-x-2",children:[{key:"upcoming",label:"Upcoming"},{key:"all",label:"All"},{key:"thisMonth",label:"This Month"},{key:"completed",label:"Completed"}].map(ot=>s.jsx("button",{onClick:()=>Ie(ot.key),className:`px-3 py-1.5 rounded-lg text-sm whitespace-nowrap transition ${oe===ot.key?"bg-orange-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:ot.label},ot.key))})]}),s.jsxs("div",{className:"flex items-center space-x-1 bg-gray-800 rounded-lg p-1",children:[s.jsx("button",{onClick:()=>l("grid"),className:`p-2 rounded ${u==="grid"?"bg-gray-700 text-white":"text-gray-400 hover:text-white"}`,title:"Grid View",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})}),s.jsx("button",{onClick:()=>l("list"),className:`p-2 rounded ${u==="list"?"bg-gray-700 text-white":"text-gray-400 hover:text-white"}`,title:"List View",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})})}),s.jsx("button",{onClick:()=>l("calendar"),className:`p-2 rounded ${u==="calendar"?"bg-gray-700 text-white":"text-gray-400 hover:text-white"}`,title:"Calendar View",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})})]})]}),u==="grid"&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:[ft.map(ot=>s.jsxs("div",{onClick:()=>C(ot),className:`bg-gray-800/50 rounded-xl border ${Qr[ot.status]} p-4 sm:p-5 hover:border-orange-500/50 transition cursor-pointer`,children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsx("span",{className:`${Xr[ot.status]} px-2 py-0.5 rounded text-xs font-medium capitalize`,children:ot.status}),s.jsxs("div",{className:"text-right",children:[s.jsx("span",{className:"text-gray-400 text-sm",children:tr(ot.date)}),s.jsx("div",{className:`text-xs ${new Date(ot.date)<Pe?"text-gray-500":"text-orange-400"}`,children:Gr(ot.date)})]})]}),s.jsx("h3",{className:"font-bold text-white mb-1 line-clamp-1",children:ot.name}),s.jsx("p",{className:"text-orange-500 text-sm mb-3",children:ot.client}),ot.location&&s.jsxs("p",{className:"text-gray-400 text-sm mb-3 flex items-center",children:[s.jsx("svg",{className:"w-4 h-4 mr-1 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"})}),s.jsx("span",{className:"truncate",children:ot.location})]}),s.jsxs("div",{className:"flex items-center flex-wrap gap-2 text-xs",children:[s.jsxs("span",{className:`px-2 py-1 rounded ${(ot.crew_ids?.length||0)>0?"bg-green-500/20 text-green-400":"bg-gray-700 text-gray-500"}`,children:[" ",ot.crew_ids?.length||0," crew"]}),s.jsxs("span",{className:`px-2 py-1 rounded ${(ot.equipment_ids?.length||0)>0?"bg-blue-500/20 text-blue-400":"bg-gray-700 text-gray-500"}`,children:[" ",ot.equipment_ids?.length||0," items"]}),(ot.flight_links?.length||0)+(ot.accommodation_links?.length||0)+(ot.rental_links?.length||0)>0&&s.jsx("span",{className:"px-2 py-1 rounded bg-purple-500/20 text-purple-400",children:" Travel"})]})]},ot.id)),ft.length===0&&s.jsx("div",{className:"col-span-full text-center py-12 text-gray-500",children:s.jsx("p",{children:"No events found."})})]}),u==="list"&&s.jsxs("div",{className:"bg-gray-800/30 rounded-xl border border-gray-700/50 overflow-hidden",children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full min-w-[600px]",children:[s.jsx("thead",{className:"bg-gray-800/50",children:s.jsxs("tr",{className:"text-left text-gray-400 text-xs uppercase",children:[s.jsx("th",{className:"px-4 py-3",children:"Date"}),s.jsx("th",{className:"px-4 py-3",children:"Event"}),s.jsx("th",{className:"px-4 py-3 hidden sm:table-cell",children:"Client"}),s.jsx("th",{className:"px-4 py-3",children:"Status"}),s.jsx("th",{className:"px-4 py-3 text-center",children:"Crew"}),s.jsx("th",{className:"px-4 py-3 text-center",children:"Gear"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-700/50",children:ft.map(ot=>s.jsxs("tr",{onClick:()=>C(ot),className:"hover:bg-gray-800/50 cursor-pointer transition",children:[s.jsxs("td",{className:"px-4 py-3",children:[s.jsx("div",{className:"text-white text-sm",children:tr(ot.date)}),s.jsx("div",{className:`text-xs ${new Date(ot.date)<Pe?"text-gray-500":"text-orange-400"}`,children:Gr(ot.date)})]}),s.jsxs("td",{className:"px-4 py-3",children:[s.jsx("div",{className:"font-medium text-white",children:ot.name}),s.jsx("div",{className:"text-sm text-gray-400 sm:hidden",children:ot.client})]}),s.jsx("td",{className:"px-4 py-3 text-orange-500 text-sm hidden sm:table-cell",children:ot.client}),s.jsx("td",{className:"px-4 py-3",children:s.jsx("span",{className:`${Xr[ot.status]} px-2 py-0.5 rounded text-xs font-medium capitalize`,children:ot.status})}),s.jsx("td",{className:"px-4 py-3 text-center",children:s.jsx("span",{className:`text-sm ${(ot.crew_ids?.length||0)>0?"text-green-400":"text-gray-500"}`,children:ot.crew_ids?.length||0})}),s.jsx("td",{className:"px-4 py-3 text-center",children:s.jsx("span",{className:`text-sm ${(ot.equipment_ids?.length||0)>0?"text-blue-400":"text-gray-500"}`,children:ot.equipment_ids?.length||0})})]},ot.id))})]})}),ft.length===0&&s.jsx("div",{className:"text-center py-12 text-gray-500",children:"No events found."})]}),u==="calendar"&&s.jsxs("div",{className:"bg-gray-800/30 rounded-xl border border-gray-700/50 p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("button",{onClick:()=>be(new Date(Ce.getFullYear(),Ce.getMonth()-1)),className:"p-2 hover:bg-gray-700 rounded-lg text-gray-400 hover:text-white",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),s.jsx("h3",{className:"text-lg font-bold text-white",children:Ce.toLocaleDateString("en-AU",{month:"long",year:"numeric"})}),s.jsx("button",{onClick:()=>be(new Date(Ce.getFullYear(),Ce.getMonth()+1)),className:"p-2 hover:bg-gray-700 rounded-lg text-gray-400 hover:text-white",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),s.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(ot=>s.jsx("div",{className:"text-center text-xs text-gray-500 py-2 font-medium",children:ot},ot)),wn().map((ot,Gt)=>{const Ir=yi(ot.date),ar=ot.date.toDateString()===new Date().toDateString();return s.jsxs("div",{className:`min-h-[80px] sm:min-h-[100px] p-1 border border-gray-700/30 rounded ${ot.isCurrentMonth?"bg-gray-800/30":"bg-gray-900/30"} ${ar?"ring-2 ring-orange-500":""}`,children:[s.jsx("div",{className:`text-xs mb-1 ${ot.isCurrentMonth?"text-gray-400":"text-gray-600"} ${ar?"text-orange-500 font-bold":""}`,children:ot.date.getDate()}),s.jsxs("div",{className:"space-y-1",children:[Ir.slice(0,2).map(Qt=>s.jsx("div",{onClick:gr=>{gr.stopPropagation(),C(Qt)},className:`text-xs px-1 py-0.5 rounded truncate cursor-pointer ${Xr[Qt.status]} text-white`,children:Qt.name},Qt.id)),Ir.length>2&&s.jsxs("div",{className:"text-xs text-gray-500 px-1",children:["+",Ir.length-2," more"]})]})]},Gt)})]})]})]}),m==="crew"&&s.jsxs("div",{className:"bg-gray-800/30 rounded-xl border border-gray-700/50 p-4 sm:p-6",children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsx("h3",{className:"text-lg font-bold text-white",children:" Crew Members"})}),s.jsxs("div",{className:"space-y-2",children:[r.map(ot=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-700/30 rounded-lg hover:bg-gray-700/50 cursor-pointer transition",onClick:()=>jt(ot),children:[s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("div",{className:"font-medium text-white",children:ot.name}),s.jsx("div",{className:"text-sm text-gray-400 truncate",children:ot.role||"No role assigned"})]}),s.jsxs("div",{className:"flex items-center space-x-2 ml-2",children:[ot.phone&&s.jsx("a",{href:`tel:${ot.phone}`,onClick:Gt=>Gt.stopPropagation(),className:"p-2 text-gray-400 hover:text-white hover:bg-gray-700 rounded",children:""}),ot.email&&s.jsx("a",{href:`mailto:${ot.email}`,onClick:Gt=>Gt.stopPropagation(),className:"p-2 text-gray-400 hover:text-white hover:bg-gray-700 rounded",children:""}),s.jsx("button",{onClick:Gt=>{Gt.stopPropagation(),rt(ot.id)},className:"p-2 text-red-500/50 hover:text-red-500 hover:bg-red-500/10 rounded",children:""})]})]},ot.id)),r.length===0&&s.jsx("p",{className:"text-gray-500 text-center py-8",children:'No crew members yet. Click "Add Crew" to add one.'})]})]}),m==="equipment"&&s.jsxs("div",{className:"bg-gray-800/30 rounded-xl border border-gray-700/50 p-4 sm:p-6",children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsx("h3",{className:"text-lg font-bold text-white",children:" Equipment Inventory"})}),s.jsxs("div",{className:"space-y-3 max-h-[400px] overflow-y-auto",children:[Pn.filter(ot=>i.some(Gt=>Gt.category===ot)).map(ot=>s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wide mb-2 sticky top-0 bg-gray-800/90 py-1",children:ot}),i.filter(Gt=>Gt.category===ot).map(Gt=>s.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-700/30 rounded mb-1 hover:bg-gray-700/50 cursor-pointer transition",onClick:()=>ke(Gt),children:[s.jsx("span",{className:"text-white text-sm",children:Gt.name}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("span",{className:"text-sm text-gray-400",children:["",Gt.quantity]}),s.jsx("button",{onClick:Ir=>{Ir.stopPropagation(),Xe(Gt.id)},className:"text-red-500/50 hover:text-red-500 text-xs",children:""})]})]},Gt.id))]},ot)),i.length===0&&s.jsx("p",{className:"text-gray-500 text-center py-8",children:'No equipment yet. Click "Add Equipment" to add some.'})]})]}),m==="assign"&&s.jsx(TFe,{events:t,crewMembers:r,equipment:i,onAssignCrew:async(ot,Gt)=>{const Ir=[...ot.crew_ids||[],Gt.id];await ir.from("production_events").update({crew_ids:Ir}).eq("id",ot.id),e(t.map(ar=>ar.id===ot.id?{...ar,crew_ids:Ir}:ar))},onUnassignCrew:async(ot,Gt)=>{const Ir=(ot.crew_ids||[]).filter(ar=>ar!==Gt.id);await ir.from("production_events").update({crew_ids:Ir}).eq("id",ot.id),e(t.map(ar=>ar.id===ot.id?{...ar,crew_ids:Ir}:ar))},onAssignEquipment:async(ot,Gt)=>{const Ir=[...ot.equipment_ids||[],Gt.id];await ir.from("production_events").update({equipment_ids:Ir}).eq("id",ot.id),e(t.map(ar=>ar.id===ot.id?{...ar,equipment_ids:Ir}:ar))},onUnassignEquipment:async(ot,Gt)=>{const Ir=(ot.equipment_ids||[]).filter(ar=>ar!==Gt.id);await ir.from("production_events").update({equipment_ids:Ir}).eq("id",ot.id),e(t.map(ar=>ar.id===ot.id?{...ar,equipment_ids:Ir}:ar))}}),g&&s.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-start sm:items-center justify-center z-50 p-4 overflow-y-auto",children:s.jsxs("div",{className:"bg-gray-800 rounded-xl w-full max-w-2xl my-4",children:[s.jsxs("div",{className:"p-4 sm:p-6 border-b border-gray-700 flex items-center justify-between sticky top-0 bg-gray-800 rounded-t-xl",children:[s.jsx("h3",{className:"text-xl font-bold text-white",children:I?"Edit Event":"New Event"}),s.jsx("button",{onClick:()=>y(!1),className:"text-gray-400 hover:text-white text-2xl leading-none",children:""})]}),s.jsxs("form",{onSubmit:at,className:"p-4 sm:p-6 space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Event Name *"}),s.jsx("input",{type:"text",required:!0,value:de.name,onChange:ot=>xe({...de,name:ot.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2.5 text-white focus:border-orange-500 focus:outline-none"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Client *"}),s.jsx("input",{type:"text",required:!0,value:de.client,onChange:ot=>xe({...de,client:ot.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2.5 text-white focus:border-orange-500 focus:outline-none"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Date *"}),s.jsx("input",{type:"date",required:!0,value:de.date,onChange:ot=>xe({...de,date:ot.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2.5 text-white focus:border-orange-500 focus:outline-none"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Status"}),s.jsxs("select",{value:de.status,onChange:ot=>xe({...de,status:ot.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2.5 text-white focus:border-orange-500 focus:outline-none",children:[s.jsx("option",{value:"tentative",children:"Tentative"}),s.jsx("option",{value:"confirmed",children:"Confirmed"}),s.jsx("option",{value:"completed",children:"Completed"}),s.jsx("option",{value:"cancelled",children:"Cancelled"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Location"}),s.jsx("input",{type:"text",value:de.location,onChange:ot=>xe({...de,location:ot.target.value}),placeholder:"Venue, City",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2.5 text-white focus:border-orange-500 focus:outline-none"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Notes"}),s.jsx("textarea",{rows:"2",value:de.notes,onChange:ot=>xe({...de,notes:ot.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2.5 text-white focus:border-orange-500 focus:outline-none resize-none"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Assign Crew"}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 max-h-32 overflow-y-auto bg-gray-900/50 rounded-lg p-2",children:[r.map(ot=>s.jsxs("label",{className:"flex items-center space-x-2 p-2 bg-gray-700/30 rounded cursor-pointer hover:bg-gray-700/50",children:[s.jsx("input",{type:"checkbox",checked:de.crew_ids.includes(ot.id),onChange:Gt=>{const Ir=Gt.target.checked?[...de.crew_ids,ot.id]:de.crew_ids.filter(ar=>ar!==ot.id);xe({...de,crew_ids:Ir})},className:"rounded border-gray-600 text-orange-500 focus:ring-orange-500"}),s.jsx("span",{className:"text-white text-sm",children:ot.name})]},ot.id)),r.length===0&&s.jsx("p",{className:"text-gray-500 text-sm col-span-2 text-center py-2",children:"No crew members to assign"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Assign Equipment"}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 max-h-40 overflow-y-auto bg-gray-900/50 rounded-lg p-2",children:[i.map(ot=>s.jsxs("label",{className:"flex items-center space-x-2 p-2 bg-gray-700/30 rounded cursor-pointer hover:bg-gray-700/50",children:[s.jsx("input",{type:"checkbox",checked:de.equipment_ids.includes(ot.id),onChange:Gt=>{const Ir=Gt.target.checked?[...de.equipment_ids,ot.id]:de.equipment_ids.filter(ar=>ar!==ot.id);xe({...de,equipment_ids:Ir})},className:"rounded border-gray-600 text-blue-500 focus:ring-blue-500"}),s.jsx("span",{className:"text-sm text-white truncate",children:ot.name})]},ot.id)),i.length===0&&s.jsx("p",{className:"text-gray-500 text-sm col-span-2 text-center py-2",children:"No equipment to assign"})]})]}),s.jsxs("div",{className:"border-t border-gray-700 pt-4",children:[s.jsx("h4",{className:"font-medium text-white mb-3",children:" Travel & Logistics"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Flight Links"}),s.jsx("input",{type:"text",value:de.flight_links,onChange:ot=>xe({...de,flight_links:ot.target.value}),placeholder:"Comma-separated URLs",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white text-sm focus:border-orange-500 focus:outline-none"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Accommodation Links"}),s.jsx("input",{type:"text",value:de.accommodation_links,onChange:ot=>xe({...de,accommodation_links:ot.target.value}),placeholder:"Comma-separated URLs",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white text-sm focus:border-orange-500 focus:outline-none"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Rental Car Links"}),s.jsx("input",{type:"text",value:de.rental_links,onChange:ot=>xe({...de,rental_links:ot.target.value}),placeholder:"Comma-separated URLs",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white text-sm focus:border-orange-500 focus:outline-none"})]})]})]}),s.jsxs("div",{className:"flex flex-col-reverse sm:flex-row justify-end gap-3 pt-4",children:[s.jsx("button",{type:"button",onClick:()=>y(!1),className:"px-4 py-2.5 bg-gray-700 hover:bg-gray-600 rounded-lg text-white",children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-6 py-2.5 bg-orange-600 hover:bg-orange-700 rounded-lg font-medium text-white",children:I?"Save Changes":"Create Event"})]})]})]})}),N&&s.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-start sm:items-center justify-center z-50 p-4 overflow-y-auto",children:s.jsxs("div",{className:"bg-gray-800 rounded-xl w-full max-w-3xl my-4",children:[s.jsxs("div",{className:"p-4 sm:p-6 border-b border-gray-700 flex items-center justify-between sticky top-0 bg-gray-800 rounded-t-xl",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-white",children:N.name}),s.jsx("p",{className:"text-orange-500 text-sm",children:N.client})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>{f(N),C(null)},className:"px-3 py-1.5 bg-gray-700 hover:bg-gray-600 rounded text-sm font-medium flex items-center gap-1",children:" Brief"}),s.jsx("button",{onClick:()=>{ut(N),C(null)},className:"px-3 py-1.5 bg-orange-600 hover:bg-orange-700 rounded text-sm font-medium",children:"Edit"}),s.jsx("button",{onClick:()=>C(null),className:"text-gray-400 hover:text-white text-2xl leading-none",children:""})]})]}),s.jsxs("div",{className:"p-4 sm:p-6 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500 text-xs uppercase",children:"Date"}),s.jsx("p",{className:"font-medium text-white",children:lr(N.date)}),s.jsx("p",{className:`text-sm ${new Date(N.date)<Pe?"text-gray-500":"text-orange-400"}`,children:Gr(N.date)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500 text-xs uppercase",children:"Location"}),s.jsx("p",{className:"font-medium text-white",children:N.location||"TBD"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500 text-xs uppercase",children:"Status"}),s.jsx("p",{children:s.jsx("span",{className:`${Xr[N.status]} px-2 py-0.5 rounded text-xs font-medium capitalize`,children:N.status})})]})]}),N.notes&&s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500 text-xs uppercase",children:"Notes"}),s.jsx("p",{className:"mt-1 text-gray-300 text-sm",children:N.notes})]}),s.jsxs("div",{children:[s.jsx("div",{className:"flex items-center justify-between mb-3",children:s.jsxs("h4",{className:"font-medium text-white",children:[" Crew (",Pr(N.crew_ids).length,")"]})}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:r.map(ot=>{const Gt=(N.crew_ids||[]).includes(ot.id);return s.jsxs("div",{onClick:()=>mt(N.id,ot.id,!Gt),className:`p-3 rounded-lg cursor-pointer transition flex items-center justify-between ${Gt?"bg-green-500/20 border border-green-500/50":"bg-gray-700/30 border border-gray-700 hover:border-gray-600"}`,children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-white",children:ot.name}),s.jsx("span",{className:"text-gray-400 text-sm ml-2",children:ot.role})]}),Gt?s.jsx("span",{className:"text-green-400 text-sm",children:" Assigned"}):s.jsx("span",{className:"text-gray-500 text-sm",children:"+ Add"})]},ot.id)})})]}),s.jsxs("div",{children:[s.jsx("div",{className:"flex items-center justify-between mb-3",children:s.jsxs("h4",{className:"font-medium text-white",children:[" Equipment (",tn(N.equipment_ids).length,")"]})}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2 max-h-48 overflow-y-auto",children:i.map(ot=>{const Gt=(N.equipment_ids||[]).includes(ot.id);return s.jsxs("div",{onClick:()=>Jt(N.id,ot.id,!Gt),className:`p-2 rounded-lg cursor-pointer transition flex items-center justify-between ${Gt?"bg-blue-500/20 border border-blue-500/50":"bg-gray-700/30 border border-gray-700 hover:border-gray-600"}`,children:[s.jsx("span",{className:"text-white text-sm truncate",children:ot.name}),Gt?s.jsx("span",{className:"text-blue-400 text-xs ml-2",children:""}):s.jsx("span",{className:"text-gray-500 text-xs ml-2",children:"+"})]},ot.id)})})]}),s.jsxs("div",{className:"border-t border-gray-700 pt-4",children:[s.jsx("h4",{className:"font-medium text-white mb-4",children:" Travel & Logistics"}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500 text-xs uppercase",children:"Flights"}),N.flight_links?.length?N.flight_links.map((ot,Gt)=>s.jsxs("a",{href:ot,target:"_blank",rel:"noopener noreferrer",className:"block text-blue-400 hover:underline text-sm truncate mt-1",children:[" Flight ",Gt+1]},Gt)):s.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"None added"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500 text-xs uppercase",children:"Accommodation"}),N.accommodation_links?.length?N.accommodation_links.map((ot,Gt)=>s.jsxs("a",{href:ot,target:"_blank",rel:"noopener noreferrer",className:"block text-blue-400 hover:underline text-sm truncate mt-1",children:[" Booking ",Gt+1]},Gt)):s.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"None added"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500 text-xs uppercase",children:"Rental Cars"}),N.rental_links?.length?N.rental_links.map((ot,Gt)=>s.jsxs("a",{href:ot,target:"_blank",rel:"noopener noreferrer",className:"block text-blue-400 hover:underline text-sm truncate mt-1",children:[" Rental ",Gt+1]},Gt)):s.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"None added"})]})]})]}),s.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-700",children:s.jsx("button",{onClick:()=>De(N.id),className:"px-4 py-2 text-red-500 hover:bg-red-500/10 rounded-lg text-sm",children:" Delete Event"})})]})]})}),x&&s.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-gray-800 rounded-xl w-full max-w-md",children:[s.jsxs("div",{className:"p-4 sm:p-6 border-b border-gray-700 flex items-center justify-between",children:[s.jsx("h3",{className:"text-xl font-bold text-white",children:U?"Edit Crew Member":"Add Crew Member"}),s.jsx("button",{onClick:()=>w(!1),className:"text-gray-400 hover:text-white text-2xl leading-none",children:""})]}),s.jsxs("form",{onSubmit:Ue,className:"p-4 sm:p-6 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Name *"}),s.jsx("input",{type:"text",required:!0,value:we.name,onChange:ot=>ve({...we,name:ot.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2.5 text-white focus:border-orange-500 focus:outline-none"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Role"}),s.jsx("input",{type:"text",value:we.role,onChange:ot=>ve({...we,role:ot.target.value}),placeholder:"e.g. Camera Operator, Director, Audio",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2.5 text-white focus:border-orange-500 focus:outline-none"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Phone"}),s.jsx("input",{type:"tel",value:we.phone,onChange:ot=>ve({...we,phone:ot.target.value}),placeholder:"0400 000 000",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2.5 text-white focus:border-orange-500 focus:outline-none"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Email"}),s.jsx("input",{type:"email",value:we.email,onChange:ot=>ve({...we,email:ot.target.value}),placeholder:"name@email.com",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2.5 text-white focus:border-orange-500 focus:outline-none"})]}),s.jsxs("div",{className:"flex flex-col-reverse sm:flex-row justify-end gap-3 pt-4",children:[s.jsx("button",{type:"button",onClick:()=>w(!1),className:"px-4 py-2.5 bg-gray-700 hover:bg-gray-600 rounded-lg text-white",children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-6 py-2.5 bg-orange-600 hover:bg-orange-700 rounded-lg font-medium text-white",children:U?"Save Changes":"Add Crew"})]})]})]})}),d&&s.jsx(KDe,{event:d,crew:r,equipment:i,onClose:()=>f(null)}),_&&s.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-gray-800 rounded-xl w-full max-w-md",children:[s.jsxs("div",{className:"p-4 sm:p-6 border-b border-gray-700 flex items-center justify-between",children:[s.jsx("h3",{className:"text-xl font-bold text-white",children:q?"Edit Equipment":"Add Equipment"}),s.jsx("button",{onClick:()=>E(!1),className:"text-gray-400 hover:text-white text-2xl leading-none",children:""})]}),s.jsxs("form",{onSubmit:Ct,className:"p-4 sm:p-6 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Equipment Name *"}),s.jsx("input",{type:"text",required:!0,value:ne.name,onChange:ot=>ae({...ne,name:ot.target.value}),placeholder:"e.g. Sony FX6",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2.5 text-white focus:border-blue-500 focus:outline-none"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Category"}),s.jsx("select",{value:ne.category,onChange:ot=>ae({...ne,category:ot.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2.5 text-white focus:border-blue-500 focus:outline-none",children:Pn.map(ot=>s.jsx("option",{value:ot,children:ot},ot))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Quantity"}),s.jsx("input",{type:"number",min:"1",value:ne.quantity,onChange:ot=>ae({...ne,quantity:parseInt(ot.target.value)||1}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2.5 text-white focus:border-blue-500 focus:outline-none"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Notes"}),s.jsx("input",{type:"text",value:ne.notes||"",onChange:ot=>ae({...ne,notes:ot.target.value}),placeholder:"Serial number, condition, etc.",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2.5 text-white focus:border-blue-500 focus:outline-none"})]}),s.jsxs("div",{className:"flex flex-col-reverse sm:flex-row justify-end gap-3 pt-4",children:[s.jsx("button",{type:"button",onClick:()=>E(!1),className:"px-4 py-2.5 bg-gray-700 hover:bg-gray-600 rounded-lg text-white",children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-6 py-2.5 bg-blue-600 hover:bg-blue-700 rounded-lg font-medium text-white",children:q?"Save Changes":"Add Equipment"})]})]})]})})]})}function NFe(t,e){const r=T.useRef(e);T.useEffect(function(){e!==r.current&&t.attributionControl!=null&&(r.current!=null&&t.attributionControl.removeAttribution(r.current),e!=null&&t.attributionControl.addAttribution(e)),r.current=e},[t,e])}function kFe(t,e,r){e.center!==r.center&&t.setLatLng(e.center),e.radius!=null&&e.radius!==r.radius&&t.setRadius(e.radius)}const LFe=1;function IFe(t){return Object.freeze({__version:LFe,map:t})}function Cne(t,e){return Object.freeze({...t,...e})}const gF=T.createContext(null);function vF(){const t=T.use(gF);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function Nne(t){function e(r,n){const{instance:i,context:a}=t(r).current;T.useImperativeHandle(n,()=>i);const{children:o}=r;return o==null?null:So.createElement(gF,{value:a},o)}return T.forwardRef(e)}function BFe(t){function e(r,n){const{instance:i}=t(r).current;return T.useImperativeHandle(n,()=>i),null}return T.forwardRef(e)}function kne(t,e){const r=T.useRef(void 0);T.useEffect(function(){return e!=null&&t.instance.on(e),r.current=e,function(){r.current!=null&&t.instance.off(r.current),r.current=null}},[t,e])}function yF(t,e){const r=t.pane??e.pane;return r?{...t,pane:r}:t}var Lw={exports:{}};var PFe=Lw.exports,uK;function OFe(){return uK||(uK=1,(function(t,e){(function(r,n){n(e)})(PFe,(function(r){var n="1.9.4";function i(v){var S,Q,le,_e;for(Q=1,le=arguments.length;Q<le;Q++){_e=arguments[Q];for(S in _e)v[S]=_e[S]}return v}var a=Object.create||(function(){function v(){}return function(S){return v.prototype=S,new v}})();function o(v,S){var Q=Array.prototype.slice;if(v.bind)return v.bind.apply(v,Q.call(arguments,1));var le=Q.call(arguments,2);return function(){return v.apply(S,le.length?le.concat(Q.call(arguments)):arguments)}}var c=0;function u(v){return"_leaflet_id"in v||(v._leaflet_id=++c),v._leaflet_id}function l(v,S,Q){var le,_e,Ke,kt;return kt=function(){le=!1,_e&&(Ke.apply(Q,_e),_e=!1)},Ke=function(){le?_e=arguments:(v.apply(Q,arguments),setTimeout(kt,S),le=!0)},Ke}function d(v,S,Q){var le=S[1],_e=S[0],Ke=le-_e;return v===le&&Q?v:((v-_e)%Ke+Ke)%Ke+_e}function f(){return!1}function m(v,S){if(S===!1)return v;var Q=Math.pow(10,S===void 0?6:S);return Math.round(v*Q)/Q}function p(v){return v.trim?v.trim():v.replace(/^\s+|\s+$/g,"")}function g(v){return p(v).split(/\s+/)}function y(v,S){Object.prototype.hasOwnProperty.call(v,"options")||(v.options=v.options?a(v.options):{});for(var Q in S)v.options[Q]=S[Q];return v.options}function x(v,S,Q){var le=[];for(var _e in v)le.push(encodeURIComponent(Q?_e.toUpperCase():_e)+"="+encodeURIComponent(v[_e]));return(!S||S.indexOf("?")===-1?"?":"&")+le.join("&")}var w=/\{ *([\w_ -]+) *\}/g;function _(v,S){return v.replace(w,function(Q,le){var _e=S[le];if(_e===void 0)throw new Error("No value provided for variable "+Q);return typeof _e=="function"&&(_e=_e(S)),_e})}var E=Array.isArray||function(v){return Object.prototype.toString.call(v)==="[object Array]"};function N(v,S){for(var Q=0;Q<v.length;Q++)if(v[Q]===S)return Q;return-1}var C="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function I(v){return window["webkit"+v]||window["moz"+v]||window["ms"+v]}var D=0;function U(v){var S=+new Date,Q=Math.max(0,16-(S-D));return D=S+Q,window.setTimeout(v,Q)}var G=window.requestAnimationFrame||I("RequestAnimationFrame")||U,q=window.cancelAnimationFrame||I("CancelAnimationFrame")||I("CancelRequestAnimationFrame")||function(v){window.clearTimeout(v)};function J(v,S,Q){if(Q&&G===U)v.call(S);else return G.call(window,o(v,S))}function de(v){v&&q.call(window,v)}var xe={__proto__:null,extend:i,create:a,bind:o,get lastId(){return c},stamp:u,throttle:l,wrapNum:d,falseFn:f,formatNum:m,trim:p,splitWords:g,setOptions:y,getParamString:x,template:_,isArray:E,indexOf:N,emptyImageUrl:C,requestFn:G,cancelFn:q,requestAnimFrame:J,cancelAnimFrame:de};function we(){}we.extend=function(v){var S=function(){y(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},Q=S.__super__=this.prototype,le=a(Q);le.constructor=S,S.prototype=le;for(var _e in this)Object.prototype.hasOwnProperty.call(this,_e)&&_e!=="prototype"&&_e!=="__super__"&&(S[_e]=this[_e]);return v.statics&&i(S,v.statics),v.includes&&(ve(v.includes),i.apply(null,[le].concat(v.includes))),i(le,v),delete le.statics,delete le.includes,le.options&&(le.options=Q.options?a(Q.options):{},i(le.options,v.options)),le._initHooks=[],le.callInitHooks=function(){if(!this._initHooksCalled){Q.callInitHooks&&Q.callInitHooks.call(this),this._initHooksCalled=!0;for(var Ke=0,kt=le._initHooks.length;Ke<kt;Ke++)le._initHooks[Ke].call(this)}},S},we.include=function(v){var S=this.prototype.options;return i(this.prototype,v),v.options&&(this.prototype.options=S,this.mergeOptions(v.options)),this},we.mergeOptions=function(v){return i(this.prototype.options,v),this},we.addInitHook=function(v){var S=Array.prototype.slice.call(arguments,1),Q=typeof v=="function"?v:function(){this[v].apply(this,S)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(Q),this};function ve(v){if(!(typeof L>"u"||!L||!L.Mixin)){v=E(v)?v:[v];for(var S=0;S<v.length;S++)v[S]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var ne={on:function(v,S,Q){if(typeof v=="object")for(var le in v)this._on(le,v[le],S);else{v=g(v);for(var _e=0,Ke=v.length;_e<Ke;_e++)this._on(v[_e],S,Q)}return this},off:function(v,S,Q){if(!arguments.length)delete this._events;else if(typeof v=="object")for(var le in v)this._off(le,v[le],S);else{v=g(v);for(var _e=arguments.length===1,Ke=0,kt=v.length;Ke<kt;Ke++)_e?this._off(v[Ke]):this._off(v[Ke],S,Q)}return this},_on:function(v,S,Q,le){if(typeof S!="function"){console.warn("wrong listener type: "+typeof S);return}if(this._listens(v,S,Q)===!1){Q===this&&(Q=void 0);var _e={fn:S,ctx:Q};le&&(_e.once=!0),this._events=this._events||{},this._events[v]=this._events[v]||[],this._events[v].push(_e)}},_off:function(v,S,Q){var le,_e,Ke;if(this._events&&(le=this._events[v],!!le)){if(arguments.length===1){if(this._firingCount)for(_e=0,Ke=le.length;_e<Ke;_e++)le[_e].fn=f;delete this._events[v];return}if(typeof S!="function"){console.warn("wrong listener type: "+typeof S);return}var kt=this._listens(v,S,Q);if(kt!==!1){var er=le[kt];this._firingCount&&(er.fn=f,this._events[v]=le=le.slice()),le.splice(kt,1)}}},fire:function(v,S,Q){if(!this.listens(v,Q))return this;var le=i({},S,{type:v,target:this,sourceTarget:S&&S.sourceTarget||this});if(this._events){var _e=this._events[v];if(_e){this._firingCount=this._firingCount+1||1;for(var Ke=0,kt=_e.length;Ke<kt;Ke++){var er=_e[Ke],Er=er.fn;er.once&&this.off(v,Er,er.ctx),Er.call(er.ctx||this,le)}this._firingCount--}}return Q&&this._propagateEvent(le),this},listens:function(v,S,Q,le){typeof v!="string"&&console.warn('"string" type argument expected');var _e=S;typeof S!="function"&&(le=!!S,_e=void 0,Q=void 0);var Ke=this._events&&this._events[v];if(Ke&&Ke.length&&this._listens(v,_e,Q)!==!1)return!0;if(le){for(var kt in this._eventParents)if(this._eventParents[kt].listens(v,S,Q,le))return!0}return!1},_listens:function(v,S,Q){if(!this._events)return!1;var le=this._events[v]||[];if(!S)return!!le.length;Q===this&&(Q=void 0);for(var _e=0,Ke=le.length;_e<Ke;_e++)if(le[_e].fn===S&&le[_e].ctx===Q)return _e;return!1},once:function(v,S,Q){if(typeof v=="object")for(var le in v)this._on(le,v[le],S,!0);else{v=g(v);for(var _e=0,Ke=v.length;_e<Ke;_e++)this._on(v[_e],S,Q,!0)}return this},addEventParent:function(v){return this._eventParents=this._eventParents||{},this._eventParents[u(v)]=v,this},removeEventParent:function(v){return this._eventParents&&delete this._eventParents[u(v)],this},_propagateEvent:function(v){for(var S in this._eventParents)this._eventParents[S].fire(v.type,i({layer:v.target,propagatedFrom:v.target},v),!0)}};ne.addEventListener=ne.on,ne.removeEventListener=ne.clearAllEventListeners=ne.off,ne.addOneTimeEventListener=ne.once,ne.fireEvent=ne.fire,ne.hasEventListeners=ne.listens;var ae=we.extend(ne);function oe(v,S,Q){this.x=Q?Math.round(v):v,this.y=Q?Math.round(S):S}var Ie=Math.trunc||function(v){return v>0?Math.floor(v):Math.ceil(v)};oe.prototype={clone:function(){return new oe(this.x,this.y)},add:function(v){return this.clone()._add(Ce(v))},_add:function(v){return this.x+=v.x,this.y+=v.y,this},subtract:function(v){return this.clone()._subtract(Ce(v))},_subtract:function(v){return this.x-=v.x,this.y-=v.y,this},divideBy:function(v){return this.clone()._divideBy(v)},_divideBy:function(v){return this.x/=v,this.y/=v,this},multiplyBy:function(v){return this.clone()._multiplyBy(v)},_multiplyBy:function(v){return this.x*=v,this.y*=v,this},scaleBy:function(v){return new oe(this.x*v.x,this.y*v.y)},unscaleBy:function(v){return new oe(this.x/v.x,this.y/v.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Ie(this.x),this.y=Ie(this.y),this},distanceTo:function(v){v=Ce(v);var S=v.x-this.x,Q=v.y-this.y;return Math.sqrt(S*S+Q*Q)},equals:function(v){return v=Ce(v),v.x===this.x&&v.y===this.y},contains:function(v){return v=Ce(v),Math.abs(v.x)<=Math.abs(this.x)&&Math.abs(v.y)<=Math.abs(this.y)},toString:function(){return"Point("+m(this.x)+", "+m(this.y)+")"}};function Ce(v,S,Q){return v instanceof oe?v:E(v)?new oe(v[0],v[1]):v==null?v:typeof v=="object"&&"x"in v&&"y"in v?new oe(v.x,v.y):new oe(v,S,Q)}function be(v,S){if(v)for(var Q=S?[v,S]:v,le=0,_e=Q.length;le<_e;le++)this.extend(Q[le])}be.prototype={extend:function(v){var S,Q;if(!v)return this;if(v instanceof oe||typeof v[0]=="number"||"x"in v)S=Q=Ce(v);else if(v=ue(v),S=v.min,Q=v.max,!S||!Q)return this;return!this.min&&!this.max?(this.min=S.clone(),this.max=Q.clone()):(this.min.x=Math.min(S.x,this.min.x),this.max.x=Math.max(Q.x,this.max.x),this.min.y=Math.min(S.y,this.min.y),this.max.y=Math.max(Q.y,this.max.y)),this},getCenter:function(v){return Ce((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,v)},getBottomLeft:function(){return Ce(this.min.x,this.max.y)},getTopRight:function(){return Ce(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(v){var S,Q;return typeof v[0]=="number"||v instanceof oe?v=Ce(v):v=ue(v),v instanceof be?(S=v.min,Q=v.max):S=Q=v,S.x>=this.min.x&&Q.x<=this.max.x&&S.y>=this.min.y&&Q.y<=this.max.y},intersects:function(v){v=ue(v);var S=this.min,Q=this.max,le=v.min,_e=v.max,Ke=_e.x>=S.x&&le.x<=Q.x,kt=_e.y>=S.y&&le.y<=Q.y;return Ke&&kt},overlaps:function(v){v=ue(v);var S=this.min,Q=this.max,le=v.min,_e=v.max,Ke=_e.x>S.x&&le.x<Q.x,kt=_e.y>S.y&&le.y<Q.y;return Ke&&kt},isValid:function(){return!!(this.min&&this.max)},pad:function(v){var S=this.min,Q=this.max,le=Math.abs(S.x-Q.x)*v,_e=Math.abs(S.y-Q.y)*v;return ue(Ce(S.x-le,S.y-_e),Ce(Q.x+le,Q.y+_e))},equals:function(v){return v?(v=ue(v),this.min.equals(v.getTopLeft())&&this.max.equals(v.getBottomRight())):!1}};function ue(v,S){return!v||v instanceof be?v:new be(v,S)}function Pe(v,S){if(v)for(var Q=S?[v,S]:v,le=0,_e=Q.length;le<_e;le++)this.extend(Q[le])}Pe.prototype={extend:function(v){var S=this._southWest,Q=this._northEast,le,_e;if(v instanceof He)le=v,_e=v;else if(v instanceof Pe){if(le=v._southWest,_e=v._northEast,!le||!_e)return this}else return v?this.extend(Fe(v)||Re(v)):this;return!S&&!Q?(this._southWest=new He(le.lat,le.lng),this._northEast=new He(_e.lat,_e.lng)):(S.lat=Math.min(le.lat,S.lat),S.lng=Math.min(le.lng,S.lng),Q.lat=Math.max(_e.lat,Q.lat),Q.lng=Math.max(_e.lng,Q.lng)),this},pad:function(v){var S=this._southWest,Q=this._northEast,le=Math.abs(S.lat-Q.lat)*v,_e=Math.abs(S.lng-Q.lng)*v;return new Pe(new He(S.lat-le,S.lng-_e),new He(Q.lat+le,Q.lng+_e))},getCenter:function(){return new He((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new He(this.getNorth(),this.getWest())},getSouthEast:function(){return new He(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(v){typeof v[0]=="number"||v instanceof He||"lat"in v?v=Fe(v):v=Re(v);var S=this._southWest,Q=this._northEast,le,_e;return v instanceof Pe?(le=v.getSouthWest(),_e=v.getNorthEast()):le=_e=v,le.lat>=S.lat&&_e.lat<=Q.lat&&le.lng>=S.lng&&_e.lng<=Q.lng},intersects:function(v){v=Re(v);var S=this._southWest,Q=this._northEast,le=v.getSouthWest(),_e=v.getNorthEast(),Ke=_e.lat>=S.lat&&le.lat<=Q.lat,kt=_e.lng>=S.lng&&le.lng<=Q.lng;return Ke&&kt},overlaps:function(v){v=Re(v);var S=this._southWest,Q=this._northEast,le=v.getSouthWest(),_e=v.getNorthEast(),Ke=_e.lat>S.lat&&le.lat<Q.lat,kt=_e.lng>S.lng&&le.lng<Q.lng;return Ke&&kt},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(v,S){return v?(v=Re(v),this._southWest.equals(v.getSouthWest(),S)&&this._northEast.equals(v.getNorthEast(),S)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Re(v,S){return v instanceof Pe?v:new Pe(v,S)}function He(v,S,Q){if(isNaN(v)||isNaN(S))throw new Error("Invalid LatLng object: ("+v+", "+S+")");this.lat=+v,this.lng=+S,Q!==void 0&&(this.alt=+Q)}He.prototype={equals:function(v,S){if(!v)return!1;v=Fe(v);var Q=Math.max(Math.abs(this.lat-v.lat),Math.abs(this.lng-v.lng));return Q<=(S===void 0?1e-9:S)},toString:function(v){return"LatLng("+m(this.lat,v)+", "+m(this.lng,v)+")"},distanceTo:function(v){return at.distance(this,Fe(v))},wrap:function(){return at.wrapLatLng(this)},toBounds:function(v){var S=180*v/40075017,Q=S/Math.cos(Math.PI/180*this.lat);return Re([this.lat-S,this.lng-Q],[this.lat+S,this.lng+Q])},clone:function(){return new He(this.lat,this.lng,this.alt)}};function Fe(v,S,Q){return v instanceof He?v:E(v)&&typeof v[0]!="object"?v.length===3?new He(v[0],v[1],v[2]):v.length===2?new He(v[0],v[1]):null:v==null?v:typeof v=="object"&&"lat"in v?new He(v.lat,"lng"in v?v.lng:v.lon,v.alt):S===void 0?null:new He(v,S,Q)}var ft={latLngToPoint:function(v,S){var Q=this.projection.project(v),le=this.scale(S);return this.transformation._transform(Q,le)},pointToLatLng:function(v,S){var Q=this.scale(S),le=this.transformation.untransform(v,Q);return this.projection.unproject(le)},project:function(v){return this.projection.project(v)},unproject:function(v){return this.projection.unproject(v)},scale:function(v){return 256*Math.pow(2,v)},zoom:function(v){return Math.log(v/256)/Math.LN2},getProjectedBounds:function(v){if(this.infinite)return null;var S=this.projection.bounds,Q=this.scale(v),le=this.transformation.transform(S.min,Q),_e=this.transformation.transform(S.max,Q);return new be(le,_e)},infinite:!1,wrapLatLng:function(v){var S=this.wrapLng?d(v.lng,this.wrapLng,!0):v.lng,Q=this.wrapLat?d(v.lat,this.wrapLat,!0):v.lat,le=v.alt;return new He(Q,S,le)},wrapLatLngBounds:function(v){var S=v.getCenter(),Q=this.wrapLatLng(S),le=S.lat-Q.lat,_e=S.lng-Q.lng;if(le===0&&_e===0)return v;var Ke=v.getSouthWest(),kt=v.getNorthEast(),er=new He(Ke.lat-le,Ke.lng-_e),Er=new He(kt.lat-le,kt.lng-_e);return new Pe(er,Er)}},at=i({},ft,{wrapLng:[-180,180],R:6371e3,distance:function(v,S){var Q=Math.PI/180,le=v.lat*Q,_e=S.lat*Q,Ke=Math.sin((S.lat-v.lat)*Q/2),kt=Math.sin((S.lng-v.lng)*Q/2),er=Ke*Ke+Math.cos(le)*Math.cos(_e)*kt*kt,Er=2*Math.atan2(Math.sqrt(er),Math.sqrt(1-er));return this.R*Er}}),De=6378137,ut={R:De,MAX_LATITUDE:85.0511287798,project:function(v){var S=Math.PI/180,Q=this.MAX_LATITUDE,le=Math.max(Math.min(Q,v.lat),-Q),_e=Math.sin(le*S);return new oe(this.R*v.lng*S,this.R*Math.log((1+_e)/(1-_e))/2)},unproject:function(v){var S=180/Math.PI;return new He((2*Math.atan(Math.exp(v.y/this.R))-Math.PI/2)*S,v.x*S/this.R)},bounds:(function(){var v=De*Math.PI;return new be([-v,-v],[v,v])})()};function et(v,S,Q,le){if(E(v)){this._a=v[0],this._b=v[1],this._c=v[2],this._d=v[3];return}this._a=v,this._b=S,this._c=Q,this._d=le}et.prototype={transform:function(v,S){return this._transform(v.clone(),S)},_transform:function(v,S){return S=S||1,v.x=S*(this._a*v.x+this._b),v.y=S*(this._c*v.y+this._d),v},untransform:function(v,S){return S=S||1,new oe((v.x/S-this._b)/this._a,(v.y/S-this._d)/this._c)}};function Ue(v,S,Q,le){return new et(v,S,Q,le)}var jt=i({},at,{code:"EPSG:3857",projection:ut,transformation:(function(){var v=.5/(Math.PI*ut.R);return Ue(v,.5,-v,.5)})()}),rt=i({},jt,{code:"EPSG:900913"});function Ct(v){return document.createElementNS("http://www.w3.org/2000/svg",v)}function ke(v,S){var Q="",le,_e,Ke,kt,er,Er;for(le=0,Ke=v.length;le<Ke;le++){for(er=v[le],_e=0,kt=er.length;_e<kt;_e++)Er=er[_e],Q+=(_e?"L":"M")+Er.x+" "+Er.y;Q+=S?Nn.svg?"z":"x":""}return Q||"M0 0"}var Xe=document.documentElement.style,mt="ActiveXObject"in window,Jt=mt&&!document.addEventListener,tr="msLaunchUri"in navigator&&!("documentMode"in document),lr=jn("webkit"),Pr=jn("android"),tn=jn("android 2")||jn("android 3"),Gr=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Xr=Pr&&jn("Google")&&Gr<537&&!("AudioNode"in window),Qr=!!window.opera,Pn=!tr&&jn("chrome"),wn=jn("gecko")&&!lr&&!Qr&&!mt,yi=!Pn&&jn("safari"),ot=jn("phantom"),Gt="OTransition"in Xe,Ir=navigator.platform.indexOf("Win")===0,ar=mt&&"transition"in Xe,Qt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!tn,gr="MozPerspective"in Xe,Yr=!window.L_DISABLE_3D&&(ar||Qt||gr)&&!Gt&&!ot,en=typeof orientation<"u"||jn("mobile"),On=en&&lr,fn=en&&Qt,Jn=!window.PointerEvent&&window.MSPointerEvent,ln=!!(window.PointerEvent||Jn),Hr="ontouchstart"in window||!!window.TouchEvent,yn=!window.L_NO_TOUCH&&(Hr||ln),mn=en&&Qr,Mn=en&&wn,li=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Cs=(function(){var v=!1;try{var S=Object.defineProperty({},"passive",{get:function(){v=!0}});window.addEventListener("testPassiveEventSupport",f,S),window.removeEventListener("testPassiveEventSupport",f,S)}catch{}return v})(),Ms=(function(){return!!document.createElement("canvas").getContext})(),Ns=!!(document.createElementNS&&Ct("svg").createSVGRect),ei=!!Ns&&(function(){var v=document.createElement("div");return v.innerHTML="<svg/>",(v.firstChild&&v.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),un=!Ns&&(function(){try{var v=document.createElement("div");v.innerHTML='<v:shape adj="1"/>';var S=v.firstChild;return S.style.behavior="url(#default#VML)",S&&typeof S.adj=="object"}catch{return!1}})(),as=navigator.platform.indexOf("Mac")===0,ta=navigator.platform.indexOf("Linux")===0;function jn(v){return navigator.userAgent.toLowerCase().indexOf(v)>=0}var Nn={ie:mt,ielt9:Jt,edge:tr,webkit:lr,android:Pr,android23:tn,androidStock:Xr,opera:Qr,chrome:Pn,gecko:wn,safari:yi,phantom:ot,opera12:Gt,win:Ir,ie3d:ar,webkit3d:Qt,gecko3d:gr,any3d:Yr,mobile:en,mobileWebkit:On,mobileWebkit3d:fn,msPointer:Jn,pointer:ln,touch:yn,touchNative:Hr,mobileOpera:mn,mobileGecko:Mn,retina:li,passiveEvents:Cs,canvas:Ms,svg:Ns,vml:un,inlineSvg:ei,mac:as,linux:ta},Fs=Nn.msPointer?"MSPointerDown":"pointerdown",Qs=Nn.msPointer?"MSPointerMove":"pointermove",Us=Nn.msPointer?"MSPointerUp":"pointerup",ns=Nn.msPointer?"MSPointerCancel":"pointercancel",qs={touchstart:Fs,touchmove:Qs,touchend:Us,touchcancel:ns},Rs={touchstart:Ws,touchmove:qa,touchend:qa,touchcancel:qa},za={},hs=!1;function wu(v,S,Q){return S==="touchstart"&&ra(),Rs[S]?(Q=Rs[S].bind(this,Q),v.addEventListener(qs[S],Q,!1),Q):(console.warn("wrong event specified:",S),f)}function ro(v,S,Q){if(!qs[S]){console.warn("wrong event specified:",S);return}v.removeEventListener(qs[S],Q,!1)}function Fl(v){za[v.pointerId]=v}function nu(v){za[v.pointerId]&&(za[v.pointerId]=v)}function pl(v){delete za[v.pointerId]}function ra(){hs||(document.addEventListener(Fs,Fl,!0),document.addEventListener(Qs,nu,!0),document.addEventListener(Us,pl,!0),document.addEventListener(ns,pl,!0),hs=!0)}function qa(v,S){if(S.pointerType!==(S.MSPOINTER_TYPE_MOUSE||"mouse")){S.touches=[];for(var Q in za)S.touches.push(za[Q]);S.changedTouches=[S],v(S)}}function Ws(v,S){S.MSPOINTER_TYPE_TOUCH&&S.pointerType===S.MSPOINTER_TYPE_TOUCH&&ye(S),qa(v,S)}function wa(v){var S={},Q,le;for(le in v)Q=v[le],S[le]=Q&&Q.bind?Q.bind(v):Q;return v=S,S.type="dblclick",S.detail=2,S.isTrusted=!1,S._simulated=!0,S}var $s=200;function Ll(v,S){v.addEventListener("dblclick",S);var Q=0,le;function _e(Ke){if(Ke.detail!==1){le=Ke.detail;return}if(!(Ke.pointerType==="mouse"||Ke.sourceCapabilities&&!Ke.sourceCapabilities.firesTouchEvents)){var kt=Ae(Ke);if(!(kt.some(function(Er){return Er instanceof HTMLLabelElement&&Er.attributes.for})&&!kt.some(function(Er){return Er instanceof HTMLInputElement||Er instanceof HTMLSelectElement}))){var er=Date.now();er-Q<=$s?(le++,le===2&&S(wa(Ke))):le=1,Q=er}}}return v.addEventListener("click",_e),{dblclick:S,simDblclick:_e}}function go(v,S){v.removeEventListener("dblclick",S.dblclick),v.removeEventListener("click",S.simDblclick)}var no=Ea(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),gl=Ea(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Ul=gl==="webkitTransition"||gl==="OTransition"?gl+"End":"transitionend";function mc(v){return typeof v=="string"?document.getElementById(v):v}function zs(v,S){var Q=v.style[S]||v.currentStyle&&v.currentStyle[S];if((!Q||Q==="auto")&&document.defaultView){var le=document.defaultView.getComputedStyle(v,null);Q=le?le[S]:null}return Q==="auto"?null:Q}function ci(v,S,Q){var le=document.createElement(v);return le.className=S||"",Q&&Q.appendChild(le),le}function ks(v){var S=v.parentNode;S&&S.removeChild(v)}function Ta(v){for(;v.firstChild;)v.removeChild(v.firstChild)}function Va(v){var S=v.parentNode;S&&S.lastChild!==v&&S.appendChild(v)}function Ca(v){var S=v.parentNode;S&&S.firstChild!==v&&S.insertBefore(v,S.firstChild)}function gi(v,S){if(v.classList!==void 0)return v.classList.contains(S);var Q=Qo(v);return Q.length>0&&new RegExp("(^|\\s)"+S+"(\\s|$)").test(Q)}function Zn(v,S){if(v.classList!==void 0)for(var Q=g(S),le=0,_e=Q.length;le<_e;le++)v.classList.add(Q[le]);else if(!gi(v,S)){var Ke=Qo(v);_a(v,(Ke?Ke+" ":"")+S)}}function fs(v,S){v.classList!==void 0?v.classList.remove(S):_a(v,p((" "+Qo(v)+" ").replace(" "+S+" "," ")))}function _a(v,S){v.className.baseVal===void 0?v.className=S:v.className.baseVal=S}function Qo(v){return v.correspondingElement&&(v=v.correspondingElement),v.className.baseVal===void 0?v.className:v.className.baseVal}function Hi(v,S){"opacity"in v.style?v.style.opacity=S:"filter"in v.style&&zo(v,S)}function zo(v,S){var Q=!1,le="DXImageTransform.Microsoft.Alpha";try{Q=v.filters.item(le)}catch{if(S===1)return}S=Math.round(S*100),Q?(Q.Enabled=S!==100,Q.Opacity=S):v.style.filter+=" progid:"+le+"(opacity="+S+")"}function Ea(v){for(var S=document.documentElement.style,Q=0;Q<v.length;Q++)if(v[Q]in S)return v[Q];return!1}function Xs(v,S,Q){var le=S||new oe(0,0);v.style[no]=(Nn.ie3d?"translate("+le.x+"px,"+le.y+"px)":"translate3d("+le.x+"px,"+le.y+"px,0)")+(Q?" scale("+Q+")":"")}function ms(v,S){v._leaflet_pos=S,Nn.any3d?Xs(v,S):(v.style.left=S.x+"px",v.style.top=S.y+"px")}function jo(v){return v._leaflet_pos||new oe(0,0)}var Ka,Vs,Xa;if("onselectstart"in document)Ka=function(){me(window,"selectstart",ye)},Vs=function(){Qe(window,"selectstart",ye)};else{var vo=Ea(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Ka=function(){if(vo){var v=document.documentElement.style;Xa=v[vo],v[vo]="none"}},Vs=function(){vo&&(document.documentElement.style[vo]=Xa,Xa=void 0)}}function io(){me(window,"dragstart",ye)}function Vo(){Qe(window,"dragstart",ye)}var Ht,V;function se(v){for(;v.tabIndex===-1;)v=v.parentNode;v.style&&(ce(),Ht=v,V=v.style.outlineStyle,v.style.outlineStyle="none",me(window,"keydown",ce))}function ce(){Ht&&(Ht.style.outlineStyle=V,Ht=void 0,V=void 0,Qe(window,"keydown",ce))}function $(v){do v=v.parentNode;while((!v.offsetWidth||!v.offsetHeight)&&v!==document.body);return v}function K(v){var S=v.getBoundingClientRect();return{x:S.width/v.offsetWidth||1,y:S.height/v.offsetHeight||1,boundingClientRect:S}}var ie={__proto__:null,TRANSFORM:no,TRANSITION:gl,TRANSITION_END:Ul,get:mc,getStyle:zs,create:ci,remove:ks,empty:Ta,toFront:Va,toBack:Ca,hasClass:gi,addClass:Zn,removeClass:fs,setClass:_a,getClass:Qo,setOpacity:Hi,testProp:Ea,setTransform:Xs,setPosition:ms,getPosition:jo,get disableTextSelection(){return Ka},get enableTextSelection(){return Vs},disableImageDrag:io,enableImageDrag:Vo,preventOutline:se,restoreOutline:ce,getSizedParentNode:$,getScale:K};function me(v,S,Q,le){if(S&&typeof S=="object")for(var _e in S)k(v,_e,S[_e],Q);else{S=g(S);for(var Ke=0,kt=S.length;Ke<kt;Ke++)k(v,S[Ke],Q,le)}return this}var Se="_leaflet_events";function Qe(v,S,Q,le){if(arguments.length===1)ht(v),delete v[Se];else if(S&&typeof S=="object")for(var _e in S)M(v,_e,S[_e],Q);else if(S=g(S),arguments.length===2)ht(v,function(er){return N(S,er)!==-1});else for(var Ke=0,kt=S.length;Ke<kt;Ke++)M(v,S[Ke],Q,le);return this}function ht(v,S){for(var Q in v[Se]){var le=Q.split(/\d/)[0];(!S||S(le))&&M(v,le,null,null,Q)}}var P={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function k(v,S,Q,le){var _e=S+u(Q)+(le?"_"+u(le):"");if(v[Se]&&v[Se][_e])return this;var Ke=function(er){return Q.call(le||v,er||window.event)},kt=Ke;!Nn.touchNative&&Nn.pointer&&S.indexOf("touch")===0?Ke=wu(v,S,Ke):Nn.touch&&S==="dblclick"?Ke=Ll(v,Ke):"addEventListener"in v?S==="touchstart"||S==="touchmove"||S==="wheel"||S==="mousewheel"?v.addEventListener(P[S]||S,Ke,Nn.passiveEvents?{passive:!1}:!1):S==="mouseenter"||S==="mouseleave"?(Ke=function(er){er=er||window.event,dt(v,er)&&kt(er)},v.addEventListener(P[S],Ke,!1)):v.addEventListener(S,kt,!1):v.attachEvent("on"+S,Ke),v[Se]=v[Se]||{},v[Se][_e]=Ke}function M(v,S,Q,le,_e){_e=_e||S+u(Q)+(le?"_"+u(le):"");var Ke=v[Se]&&v[Se][_e];if(!Ke)return this;!Nn.touchNative&&Nn.pointer&&S.indexOf("touch")===0?ro(v,S,Ke):Nn.touch&&S==="dblclick"?go(v,Ke):"removeEventListener"in v?v.removeEventListener(P[S]||S,Ke,!1):v.detachEvent("on"+S,Ke),v[Se][_e]=null}function W(v){return v.stopPropagation?v.stopPropagation():v.originalEvent?v.originalEvent._stopped=!0:v.cancelBubble=!0,this}function Z(v){return k(v,"wheel",W),this}function re(v){return me(v,"mousedown touchstart dblclick contextmenu",W),v._leaflet_disable_click=!0,this}function ye(v){return v.preventDefault?v.preventDefault():v.returnValue=!1,this}function fe(v){return ye(v),W(v),this}function Ae(v){if(v.composedPath)return v.composedPath();for(var S=[],Q=v.target;Q;)S.push(Q),Q=Q.parentNode;return S}function Le(v,S){if(!S)return new oe(v.clientX,v.clientY);var Q=K(S),le=Q.boundingClientRect;return new oe((v.clientX-le.left)/Q.x-S.clientLeft,(v.clientY-le.top)/Q.y-S.clientTop)}var Ve=Nn.linux&&Nn.chrome?window.devicePixelRatio:Nn.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Ze(v){return Nn.edge?v.wheelDeltaY/2:v.deltaY&&v.deltaMode===0?-v.deltaY/Ve:v.deltaY&&v.deltaMode===1?-v.deltaY*20:v.deltaY&&v.deltaMode===2?-v.deltaY*60:v.deltaX||v.deltaZ?0:v.wheelDelta?(v.wheelDeltaY||v.wheelDelta)/2:v.detail&&Math.abs(v.detail)<32765?-v.detail*20:v.detail?v.detail/-32765*60:0}function dt(v,S){var Q=S.relatedTarget;if(!Q)return!0;try{for(;Q&&Q!==v;)Q=Q.parentNode}catch{return!1}return Q!==v}var je={__proto__:null,on:me,off:Qe,stopPropagation:W,disableScrollPropagation:Z,disableClickPropagation:re,preventDefault:ye,stop:fe,getPropagationPath:Ae,getMousePosition:Le,getWheelDelta:Ze,isExternalTarget:dt,addListener:me,removeListener:Qe},St=ae.extend({run:function(v,S,Q,le){this.stop(),this._el=v,this._inProgress=!0,this._duration=Q||.25,this._easeOutPower=1/Math.max(le||.5,.2),this._startPos=jo(v),this._offset=S.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=J(this._animate,this),this._step()},_step:function(v){var S=+new Date-this._startTime,Q=this._duration*1e3;S<Q?this._runFrame(this._easeOut(S/Q),v):(this._runFrame(1),this._complete())},_runFrame:function(v,S){var Q=this._startPos.add(this._offset.multiplyBy(v));S&&Q._round(),ms(this._el,Q),this.fire("step")},_complete:function(){de(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(v){return 1-Math.pow(1-v,this._easeOutPower)}}),ct=ae.extend({options:{crs:jt,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(v,S){S=y(this,S),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(v),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),S.maxBounds&&this.setMaxBounds(S.maxBounds),S.zoom!==void 0&&(this._zoom=this._limitZoom(S.zoom)),S.center&&S.zoom!==void 0&&this.setView(Fe(S.center),S.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=gl&&Nn.any3d&&!Nn.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),me(this._proxy,Ul,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(v,S,Q){if(S=S===void 0?this._zoom:this._limitZoom(S),v=this._limitCenter(Fe(v),S,this.options.maxBounds),Q=Q||{},this._stop(),this._loaded&&!Q.reset&&Q!==!0){Q.animate!==void 0&&(Q.zoom=i({animate:Q.animate},Q.zoom),Q.pan=i({animate:Q.animate,duration:Q.duration},Q.pan));var le=this._zoom!==S?this._tryAnimatedZoom&&this._tryAnimatedZoom(v,S,Q.zoom):this._tryAnimatedPan(v,Q.pan);if(le)return clearTimeout(this._sizeTimer),this}return this._resetView(v,S,Q.pan&&Q.pan.noMoveStart),this},setZoom:function(v,S){return this._loaded?this.setView(this.getCenter(),v,{zoom:S}):(this._zoom=v,this)},zoomIn:function(v,S){return v=v||(Nn.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+v,S)},zoomOut:function(v,S){return v=v||(Nn.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-v,S)},setZoomAround:function(v,S,Q){var le=this.getZoomScale(S),_e=this.getSize().divideBy(2),Ke=v instanceof oe?v:this.latLngToContainerPoint(v),kt=Ke.subtract(_e).multiplyBy(1-1/le),er=this.containerPointToLatLng(_e.add(kt));return this.setView(er,S,{zoom:Q})},_getBoundsCenterZoom:function(v,S){S=S||{},v=v.getBounds?v.getBounds():Re(v);var Q=Ce(S.paddingTopLeft||S.padding||[0,0]),le=Ce(S.paddingBottomRight||S.padding||[0,0]),_e=this.getBoundsZoom(v,!1,Q.add(le));if(_e=typeof S.maxZoom=="number"?Math.min(S.maxZoom,_e):_e,_e===1/0)return{center:v.getCenter(),zoom:_e};var Ke=le.subtract(Q).divideBy(2),kt=this.project(v.getSouthWest(),_e),er=this.project(v.getNorthEast(),_e),Er=this.unproject(kt.add(er).divideBy(2).add(Ke),_e);return{center:Er,zoom:_e}},fitBounds:function(v,S){if(v=Re(v),!v.isValid())throw new Error("Bounds are not valid.");var Q=this._getBoundsCenterZoom(v,S);return this.setView(Q.center,Q.zoom,S)},fitWorld:function(v){return this.fitBounds([[-90,-180],[90,180]],v)},panTo:function(v,S){return this.setView(v,this._zoom,{pan:S})},panBy:function(v,S){if(v=Ce(v).round(),S=S||{},!v.x&&!v.y)return this.fire("moveend");if(S.animate!==!0&&!this.getSize().contains(v))return this._resetView(this.unproject(this.project(this.getCenter()).add(v)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new St,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),S.noMoveStart||this.fire("movestart"),S.animate!==!1){Zn(this._mapPane,"leaflet-pan-anim");var Q=this._getMapPanePos().subtract(v).round();this._panAnim.run(this._mapPane,Q,S.duration||.25,S.easeLinearity)}else this._rawPanBy(v),this.fire("move").fire("moveend");return this},flyTo:function(v,S,Q){if(Q=Q||{},Q.animate===!1||!Nn.any3d)return this.setView(v,S,Q);this._stop();var le=this.project(this.getCenter()),_e=this.project(v),Ke=this.getSize(),kt=this._zoom;v=Fe(v),S=S===void 0?kt:S;var er=Math.max(Ke.x,Ke.y),Er=er*this.getZoomScale(kt,S),Wr=_e.distanceTo(le)||1,bn=1.42,ui=bn*bn;function As(ao){var ju=ao?-1:1,Go=ao?Er:er,Sd=Er*Er-er*er+ju*ui*ui*Wr*Wr,bc=2*Go*ui*Wr,Vd=Sd/bc,ql=Math.sqrt(Vd*Vd+1)-Vd,Tu=ql<1e-9?-18:Math.log(ql);return Tu}function Ma(ao){return(Math.exp(ao)-Math.exp(-ao))/2}function Co(ao){return(Math.exp(ao)+Math.exp(-ao))/2}function il(ao){return Ma(ao)/Co(ao)}var Zs=As(0);function ca(ao){return er*(Co(Zs)/Co(Zs+bn*ao))}function kn(ao){return er*(Co(Zs)*il(Zs+bn*ao)-Ma(Zs))/ui}function Xu(ao){return 1-Math.pow(1-ao,1.5)}var xc=Date.now(),Ed=(As(1)-Zs)/bn,Yl=Q.duration?1e3*Q.duration:1e3*Ed*.8;function Su(){var ao=(Date.now()-xc)/Yl,ju=Xu(ao)*Ed;ao<=1?(this._flyToFrame=J(Su,this),this._move(this.unproject(le.add(_e.subtract(le).multiplyBy(kn(ju)/Wr)),kt),this.getScaleZoom(er/ca(ju),kt),{flyTo:!0})):this._move(v,S)._moveEnd(!0)}return this._moveStart(!0,Q.noMoveStart),Su.call(this),this},flyToBounds:function(v,S){var Q=this._getBoundsCenterZoom(v,S);return this.flyTo(Q.center,Q.zoom,S)},setMaxBounds:function(v){return v=Re(v),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),v.isValid()?(this.options.maxBounds=v,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(v){var S=this.options.minZoom;return this.options.minZoom=v,this._loaded&&S!==v&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(v):this},setMaxZoom:function(v){var S=this.options.maxZoom;return this.options.maxZoom=v,this._loaded&&S!==v&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(v):this},panInsideBounds:function(v,S){this._enforcingBounds=!0;var Q=this.getCenter(),le=this._limitCenter(Q,this._zoom,Re(v));return Q.equals(le)||this.panTo(le,S),this._enforcingBounds=!1,this},panInside:function(v,S){S=S||{};var Q=Ce(S.paddingTopLeft||S.padding||[0,0]),le=Ce(S.paddingBottomRight||S.padding||[0,0]),_e=this.project(this.getCenter()),Ke=this.project(v),kt=this.getPixelBounds(),er=ue([kt.min.add(Q),kt.max.subtract(le)]),Er=er.getSize();if(!er.contains(Ke)){this._enforcingBounds=!0;var Wr=Ke.subtract(er.getCenter()),bn=er.extend(Ke).getSize().subtract(Er);_e.x+=Wr.x<0?-bn.x:bn.x,_e.y+=Wr.y<0?-bn.y:bn.y,this.panTo(this.unproject(_e),S),this._enforcingBounds=!1}return this},invalidateSize:function(v){if(!this._loaded)return this;v=i({animate:!1,pan:!0},v===!0?{animate:!0}:v);var S=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var Q=this.getSize(),le=S.divideBy(2).round(),_e=Q.divideBy(2).round(),Ke=le.subtract(_e);return!Ke.x&&!Ke.y?this:(v.animate&&v.pan?this.panBy(Ke):(v.pan&&this._rawPanBy(Ke),this.fire("move"),v.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:S,newSize:Q}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(v){if(v=this._locateOptions=i({timeout:1e4,watch:!1},v),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var S=o(this._handleGeolocationResponse,this),Q=o(this._handleGeolocationError,this);return v.watch?this._locationWatchId=navigator.geolocation.watchPosition(S,Q,v):navigator.geolocation.getCurrentPosition(S,Q,v),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(v){if(this._container._leaflet_id){var S=v.code,Q=v.message||(S===1?"permission denied":S===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:S,message:"Geolocation error: "+Q+"."})}},_handleGeolocationResponse:function(v){if(this._container._leaflet_id){var S=v.coords.latitude,Q=v.coords.longitude,le=new He(S,Q),_e=le.toBounds(v.coords.accuracy*2),Ke=this._locateOptions;if(Ke.setView){var kt=this.getBoundsZoom(_e);this.setView(le,Ke.maxZoom?Math.min(kt,Ke.maxZoom):kt)}var er={latlng:le,bounds:_e,timestamp:v.timestamp};for(var Er in v.coords)typeof v.coords[Er]=="number"&&(er[Er]=v.coords[Er]);this.fire("locationfound",er)}},addHandler:function(v,S){if(!S)return this;var Q=this[v]=new S(this);return this._handlers.push(Q),this.options[v]&&Q.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),ks(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(de(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var v;for(v in this._layers)this._layers[v].remove();for(v in this._panes)ks(this._panes[v]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(v,S){var Q="leaflet-pane"+(v?" leaflet-"+v.replace("Pane","")+"-pane":""),le=ci("div",Q,S||this._mapPane);return v&&(this._panes[v]=le),le},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var v=this.getPixelBounds(),S=this.unproject(v.getBottomLeft()),Q=this.unproject(v.getTopRight());return new Pe(S,Q)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(v,S,Q){v=Re(v),Q=Ce(Q||[0,0]);var le=this.getZoom()||0,_e=this.getMinZoom(),Ke=this.getMaxZoom(),kt=v.getNorthWest(),er=v.getSouthEast(),Er=this.getSize().subtract(Q),Wr=ue(this.project(er,le),this.project(kt,le)).getSize(),bn=Nn.any3d?this.options.zoomSnap:1,ui=Er.x/Wr.x,As=Er.y/Wr.y,Ma=S?Math.max(ui,As):Math.min(ui,As);return le=this.getScaleZoom(Ma,le),bn&&(le=Math.round(le/(bn/100))*(bn/100),le=S?Math.ceil(le/bn)*bn:Math.floor(le/bn)*bn),Math.max(_e,Math.min(Ke,le))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new oe(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(v,S){var Q=this._getTopLeftPoint(v,S);return new be(Q,Q.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(v){return this.options.crs.getProjectedBounds(v===void 0?this.getZoom():v)},getPane:function(v){return typeof v=="string"?this._panes[v]:v},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(v,S){var Q=this.options.crs;return S=S===void 0?this._zoom:S,Q.scale(v)/Q.scale(S)},getScaleZoom:function(v,S){var Q=this.options.crs;S=S===void 0?this._zoom:S;var le=Q.zoom(v*Q.scale(S));return isNaN(le)?1/0:le},project:function(v,S){return S=S===void 0?this._zoom:S,this.options.crs.latLngToPoint(Fe(v),S)},unproject:function(v,S){return S=S===void 0?this._zoom:S,this.options.crs.pointToLatLng(Ce(v),S)},layerPointToLatLng:function(v){var S=Ce(v).add(this.getPixelOrigin());return this.unproject(S)},latLngToLayerPoint:function(v){var S=this.project(Fe(v))._round();return S._subtract(this.getPixelOrigin())},wrapLatLng:function(v){return this.options.crs.wrapLatLng(Fe(v))},wrapLatLngBounds:function(v){return this.options.crs.wrapLatLngBounds(Re(v))},distance:function(v,S){return this.options.crs.distance(Fe(v),Fe(S))},containerPointToLayerPoint:function(v){return Ce(v).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(v){return Ce(v).add(this._getMapPanePos())},containerPointToLatLng:function(v){var S=this.containerPointToLayerPoint(Ce(v));return this.layerPointToLatLng(S)},latLngToContainerPoint:function(v){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Fe(v)))},mouseEventToContainerPoint:function(v){return Le(v,this._container)},mouseEventToLayerPoint:function(v){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(v))},mouseEventToLatLng:function(v){return this.layerPointToLatLng(this.mouseEventToLayerPoint(v))},_initContainer:function(v){var S=this._container=mc(v);if(S){if(S._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");me(S,"scroll",this._onScroll,this),this._containerId=u(S)},_initLayout:function(){var v=this._container;this._fadeAnimated=this.options.fadeAnimation&&Nn.any3d,Zn(v,"leaflet-container"+(Nn.touch?" leaflet-touch":"")+(Nn.retina?" leaflet-retina":"")+(Nn.ielt9?" leaflet-oldie":"")+(Nn.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var S=zs(v,"position");S!=="absolute"&&S!=="relative"&&S!=="fixed"&&S!=="sticky"&&(v.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var v=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),ms(this._mapPane,new oe(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Zn(v.markerPane,"leaflet-zoom-hide"),Zn(v.shadowPane,"leaflet-zoom-hide"))},_resetView:function(v,S,Q){ms(this._mapPane,new oe(0,0));var le=!this._loaded;this._loaded=!0,S=this._limitZoom(S),this.fire("viewprereset");var _e=this._zoom!==S;this._moveStart(_e,Q)._move(v,S)._moveEnd(_e),this.fire("viewreset"),le&&this.fire("load")},_moveStart:function(v,S){return v&&this.fire("zoomstart"),S||this.fire("movestart"),this},_move:function(v,S,Q,le){S===void 0&&(S=this._zoom);var _e=this._zoom!==S;return this._zoom=S,this._lastCenter=v,this._pixelOrigin=this._getNewPixelOrigin(v),le?Q&&Q.pinch&&this.fire("zoom",Q):((_e||Q&&Q.pinch)&&this.fire("zoom",Q),this.fire("move",Q)),this},_moveEnd:function(v){return v&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return de(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(v){ms(this._mapPane,this._getMapPanePos().subtract(v))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(v){this._targets={},this._targets[u(this._container)]=this;var S=v?Qe:me;S(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&S(window,"resize",this._onResize,this),Nn.any3d&&this.options.transform3DLimit&&(v?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){de(this._resizeRequest),this._resizeRequest=J(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var v=this._getMapPanePos();Math.max(Math.abs(v.x),Math.abs(v.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(v,S){for(var Q=[],le,_e=S==="mouseout"||S==="mouseover",Ke=v.target||v.srcElement,kt=!1;Ke;){if(le=this._targets[u(Ke)],le&&(S==="click"||S==="preclick")&&this._draggableMoved(le)){kt=!0;break}if(le&&le.listens(S,!0)&&(_e&&!dt(Ke,v)||(Q.push(le),_e))||Ke===this._container)break;Ke=Ke.parentNode}return!Q.length&&!kt&&!_e&&this.listens(S,!0)&&(Q=[this]),Q},_isClickDisabled:function(v){for(;v&&v!==this._container;){if(v._leaflet_disable_click)return!0;v=v.parentNode}},_handleDOMEvent:function(v){var S=v.target||v.srcElement;if(!(!this._loaded||S._leaflet_disable_events||v.type==="click"&&this._isClickDisabled(S))){var Q=v.type;Q==="mousedown"&&se(S),this._fireDOMEvent(v,Q)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(v,S,Q){if(v.type==="click"){var le=i({},v);le.type="preclick",this._fireDOMEvent(le,le.type,Q)}var _e=this._findEventTargets(v,S);if(Q){for(var Ke=[],kt=0;kt<Q.length;kt++)Q[kt].listens(S,!0)&&Ke.push(Q[kt]);_e=Ke.concat(_e)}if(_e.length){S==="contextmenu"&&ye(v);var er=_e[0],Er={originalEvent:v};if(v.type!=="keypress"&&v.type!=="keydown"&&v.type!=="keyup"){var Wr=er.getLatLng&&(!er._radius||er._radius<=10);Er.containerPoint=Wr?this.latLngToContainerPoint(er.getLatLng()):this.mouseEventToContainerPoint(v),Er.layerPoint=this.containerPointToLayerPoint(Er.containerPoint),Er.latlng=Wr?er.getLatLng():this.layerPointToLatLng(Er.layerPoint)}for(kt=0;kt<_e.length;kt++)if(_e[kt].fire(S,Er,!0),Er.originalEvent._stopped||_e[kt].options.bubblingMouseEvents===!1&&N(this._mouseEvents,S)!==-1)return}},_draggableMoved:function(v){return v=v.dragging&&v.dragging.enabled()?v:this,v.dragging&&v.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var v=0,S=this._handlers.length;v<S;v++)this._handlers[v].disable()},whenReady:function(v,S){return this._loaded?v.call(S||this,{target:this}):this.on("load",v,S),this},_getMapPanePos:function(){return jo(this._mapPane)||new oe(0,0)},_moved:function(){var v=this._getMapPanePos();return v&&!v.equals([0,0])},_getTopLeftPoint:function(v,S){var Q=v&&S!==void 0?this._getNewPixelOrigin(v,S):this.getPixelOrigin();return Q.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(v,S){var Q=this.getSize()._divideBy(2);return this.project(v,S)._subtract(Q)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(v,S,Q){var le=this._getNewPixelOrigin(Q,S);return this.project(v,S)._subtract(le)},_latLngBoundsToNewLayerBounds:function(v,S,Q){var le=this._getNewPixelOrigin(Q,S);return ue([this.project(v.getSouthWest(),S)._subtract(le),this.project(v.getNorthWest(),S)._subtract(le),this.project(v.getSouthEast(),S)._subtract(le),this.project(v.getNorthEast(),S)._subtract(le)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(v){return this.latLngToLayerPoint(v).subtract(this._getCenterLayerPoint())},_limitCenter:function(v,S,Q){if(!Q)return v;var le=this.project(v,S),_e=this.getSize().divideBy(2),Ke=new be(le.subtract(_e),le.add(_e)),kt=this._getBoundsOffset(Ke,Q,S);return Math.abs(kt.x)<=1&&Math.abs(kt.y)<=1?v:this.unproject(le.add(kt),S)},_limitOffset:function(v,S){if(!S)return v;var Q=this.getPixelBounds(),le=new be(Q.min.add(v),Q.max.add(v));return v.add(this._getBoundsOffset(le,S))},_getBoundsOffset:function(v,S,Q){var le=ue(this.project(S.getNorthEast(),Q),this.project(S.getSouthWest(),Q)),_e=le.min.subtract(v.min),Ke=le.max.subtract(v.max),kt=this._rebound(_e.x,-Ke.x),er=this._rebound(_e.y,-Ke.y);return new oe(kt,er)},_rebound:function(v,S){return v+S>0?Math.round(v-S)/2:Math.max(0,Math.ceil(v))-Math.max(0,Math.floor(S))},_limitZoom:function(v){var S=this.getMinZoom(),Q=this.getMaxZoom(),le=Nn.any3d?this.options.zoomSnap:1;return le&&(v=Math.round(v/le)*le),Math.max(S,Math.min(Q,v))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){fs(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(v,S){var Q=this._getCenterOffset(v)._trunc();return(S&&S.animate)!==!0&&!this.getSize().contains(Q)?!1:(this.panBy(Q,S),!0)},_createAnimProxy:function(){var v=this._proxy=ci("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(v),this.on("zoomanim",function(S){var Q=no,le=this._proxy.style[Q];Xs(this._proxy,this.project(S.center,S.zoom),this.getZoomScale(S.zoom,1)),le===this._proxy.style[Q]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ks(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var v=this.getCenter(),S=this.getZoom();Xs(this._proxy,this.project(v,S),this.getZoomScale(S,1))},_catchTransitionEnd:function(v){this._animatingZoom&&v.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(v,S,Q){if(this._animatingZoom)return!0;if(Q=Q||{},!this._zoomAnimated||Q.animate===!1||this._nothingToAnimate()||Math.abs(S-this._zoom)>this.options.zoomAnimationThreshold)return!1;var le=this.getZoomScale(S),_e=this._getCenterOffset(v)._divideBy(1-1/le);return Q.animate!==!0&&!this.getSize().contains(_e)?!1:(J(function(){this._moveStart(!0,Q.noMoveStart||!1)._animateZoom(v,S,!0)},this),!0)},_animateZoom:function(v,S,Q,le){this._mapPane&&(Q&&(this._animatingZoom=!0,this._animateToCenter=v,this._animateToZoom=S,Zn(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:v,zoom:S,noUpdate:le}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&fs(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Nt(v,S){return new ct(v,S)}var it=we.extend({options:{position:"topright"},initialize:function(v){y(this,v)},getPosition:function(){return this.options.position},setPosition:function(v){var S=this._map;return S&&S.removeControl(this),this.options.position=v,S&&S.addControl(this),this},getContainer:function(){return this._container},addTo:function(v){this.remove(),this._map=v;var S=this._container=this.onAdd(v),Q=this.getPosition(),le=v._controlCorners[Q];return Zn(S,"leaflet-control"),Q.indexOf("bottom")!==-1?le.insertBefore(S,le.firstChild):le.appendChild(S),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(ks(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(v){this._map&&v&&v.screenX>0&&v.screenY>0&&this._map.getContainer().focus()}}),Ot=function(v){return new it(v)};ct.include({addControl:function(v){return v.addTo(this),this},removeControl:function(v){return v.remove(),this},_initControlPos:function(){var v=this._controlCorners={},S="leaflet-",Q=this._controlContainer=ci("div",S+"control-container",this._container);function le(_e,Ke){var kt=S+_e+" "+S+Ke;v[_e+Ke]=ci("div",kt,Q)}le("top","left"),le("top","right"),le("bottom","left"),le("bottom","right")},_clearControlPos:function(){for(var v in this._controlCorners)ks(this._controlCorners[v]);ks(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var qt=it.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(v,S,Q,le){return Q<le?-1:le<Q?1:0}},initialize:function(v,S,Q){y(this,Q),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var le in v)this._addLayer(v[le],le);for(le in S)this._addLayer(S[le],le,!0)},onAdd:function(v){this._initLayout(),this._update(),this._map=v,v.on("zoomend",this._checkDisabledLayers,this);for(var S=0;S<this._layers.length;S++)this._layers[S].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(v){return it.prototype.addTo.call(this,v),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var v=0;v<this._layers.length;v++)this._layers[v].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(v,S){return this._addLayer(v,S),this._map?this._update():this},addOverlay:function(v,S){return this._addLayer(v,S,!0),this._map?this._update():this},removeLayer:function(v){v.off("add remove",this._onLayerChange,this);var S=this._getLayer(u(v));return S&&this._layers.splice(this._layers.indexOf(S),1),this._map?this._update():this},expand:function(){Zn(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var v=this._map.getSize().y-(this._container.offsetTop+50);return v<this._section.clientHeight?(Zn(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=v+"px"):fs(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return fs(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var v="leaflet-control-layers",S=this._container=ci("div",v),Q=this.options.collapsed;S.setAttribute("aria-haspopup",!0),re(S),Z(S);var le=this._section=ci("section",v+"-list");Q&&(this._map.on("click",this.collapse,this),me(S,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var _e=this._layersLink=ci("a",v+"-toggle",S);_e.href="#",_e.title="Layers",_e.setAttribute("role","button"),me(_e,{keydown:function(Ke){Ke.keyCode===13&&this._expandSafely()},click:function(Ke){ye(Ke),this._expandSafely()}},this),Q||this.expand(),this._baseLayersList=ci("div",v+"-base",le),this._separator=ci("div",v+"-separator",le),this._overlaysList=ci("div",v+"-overlays",le),S.appendChild(le)},_getLayer:function(v){for(var S=0;S<this._layers.length;S++)if(this._layers[S]&&u(this._layers[S].layer)===v)return this._layers[S]},_addLayer:function(v,S,Q){this._map&&v.on("add remove",this._onLayerChange,this),this._layers.push({layer:v,name:S,overlay:Q}),this.options.sortLayers&&this._layers.sort(o(function(le,_e){return this.options.sortFunction(le.layer,_e.layer,le.name,_e.name)},this)),this.options.autoZIndex&&v.setZIndex&&(this._lastZIndex++,v.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Ta(this._baseLayersList),Ta(this._overlaysList),this._layerControlInputs=[];var v,S,Q,le,_e=0;for(Q=0;Q<this._layers.length;Q++)le=this._layers[Q],this._addItem(le),S=S||le.overlay,v=v||!le.overlay,_e+=le.overlay?0:1;return this.options.hideSingleBase&&(v=v&&_e>1,this._baseLayersList.style.display=v?"":"none"),this._separator.style.display=S&&v?"":"none",this},_onLayerChange:function(v){this._handlingClick||this._update();var S=this._getLayer(u(v.target)),Q=S.overlay?v.type==="add"?"overlayadd":"overlayremove":v.type==="add"?"baselayerchange":null;Q&&this._map.fire(Q,S)},_createRadioElement:function(v,S){var Q='<input type="radio" class="leaflet-control-layers-selector" name="'+v+'"'+(S?' checked="checked"':"")+"/>",le=document.createElement("div");return le.innerHTML=Q,le.firstChild},_addItem:function(v){var S=document.createElement("label"),Q=this._map.hasLayer(v.layer),le;v.overlay?(le=document.createElement("input"),le.type="checkbox",le.className="leaflet-control-layers-selector",le.defaultChecked=Q):le=this._createRadioElement("leaflet-base-layers_"+u(this),Q),this._layerControlInputs.push(le),le.layerId=u(v.layer),me(le,"click",this._onInputClick,this);var _e=document.createElement("span");_e.innerHTML=" "+v.name;var Ke=document.createElement("span");S.appendChild(Ke),Ke.appendChild(le),Ke.appendChild(_e);var kt=v.overlay?this._overlaysList:this._baseLayersList;return kt.appendChild(S),this._checkDisabledLayers(),S},_onInputClick:function(){if(!this._preventClick){var v=this._layerControlInputs,S,Q,le=[],_e=[];this._handlingClick=!0;for(var Ke=v.length-1;Ke>=0;Ke--)S=v[Ke],Q=this._getLayer(S.layerId).layer,S.checked?le.push(Q):S.checked||_e.push(Q);for(Ke=0;Ke<_e.length;Ke++)this._map.hasLayer(_e[Ke])&&this._map.removeLayer(_e[Ke]);for(Ke=0;Ke<le.length;Ke++)this._map.hasLayer(le[Ke])||this._map.addLayer(le[Ke]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var v=this._layerControlInputs,S,Q,le=this._map.getZoom(),_e=v.length-1;_e>=0;_e--)S=v[_e],Q=this._getLayer(S.layerId).layer,S.disabled=Q.options.minZoom!==void 0&&le<Q.options.minZoom||Q.options.maxZoom!==void 0&&le>Q.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var v=this._section;this._preventClick=!0,me(v,"click",ye),this.expand();var S=this;setTimeout(function(){Qe(v,"click",ye),S._preventClick=!1})}}),It=function(v,S,Q){return new qt(v,S,Q)},nt=it.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(v){var S="leaflet-control-zoom",Q=ci("div",S+" leaflet-bar"),le=this.options;return this._zoomInButton=this._createButton(le.zoomInText,le.zoomInTitle,S+"-in",Q,this._zoomIn),this._zoomOutButton=this._createButton(le.zoomOutText,le.zoomOutTitle,S+"-out",Q,this._zoomOut),this._updateDisabled(),v.on("zoomend zoomlevelschange",this._updateDisabled,this),Q},onRemove:function(v){v.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(v){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(v.shiftKey?3:1))},_zoomOut:function(v){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(v.shiftKey?3:1))},_createButton:function(v,S,Q,le,_e){var Ke=ci("a",Q,le);return Ke.innerHTML=v,Ke.href="#",Ke.title=S,Ke.setAttribute("role","button"),Ke.setAttribute("aria-label",S),re(Ke),me(Ke,"click",fe),me(Ke,"click",_e,this),me(Ke,"click",this._refocusOnMap,this),Ke},_updateDisabled:function(){var v=this._map,S="leaflet-disabled";fs(this._zoomInButton,S),fs(this._zoomOutButton,S),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||v._zoom===v.getMinZoom())&&(Zn(this._zoomOutButton,S),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||v._zoom===v.getMaxZoom())&&(Zn(this._zoomInButton,S),this._zoomInButton.setAttribute("aria-disabled","true"))}});ct.mergeOptions({zoomControl:!0}),ct.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new nt,this.addControl(this.zoomControl))});var Vt=function(v){return new nt(v)},Tr=it.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(v){var S="leaflet-control-scale",Q=ci("div",S),le=this.options;return this._addScales(le,S+"-line",Q),v.on(le.updateWhenIdle?"moveend":"move",this._update,this),v.whenReady(this._update,this),Q},onRemove:function(v){v.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(v,S,Q){v.metric&&(this._mScale=ci("div",S,Q)),v.imperial&&(this._iScale=ci("div",S,Q))},_update:function(){var v=this._map,S=v.getSize().y/2,Q=v.distance(v.containerPointToLatLng([0,S]),v.containerPointToLatLng([this.options.maxWidth,S]));this._updateScales(Q)},_updateScales:function(v){this.options.metric&&v&&this._updateMetric(v),this.options.imperial&&v&&this._updateImperial(v)},_updateMetric:function(v){var S=this._getRoundNum(v),Q=S<1e3?S+" m":S/1e3+" km";this._updateScale(this._mScale,Q,S/v)},_updateImperial:function(v){var S=v*3.2808399,Q,le,_e;S>5280?(Q=S/5280,le=this._getRoundNum(Q),this._updateScale(this._iScale,le+" mi",le/Q)):(_e=this._getRoundNum(S),this._updateScale(this._iScale,_e+" ft",_e/S))},_updateScale:function(v,S,Q){v.style.width=Math.round(this.options.maxWidth*Q)+"px",v.innerHTML=S},_getRoundNum:function(v){var S=Math.pow(10,(Math.floor(v)+"").length-1),Q=v/S;return Q=Q>=10?10:Q>=5?5:Q>=3?3:Q>=2?2:1,S*Q}}),or=function(v){return new Tr(v)},Mt='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',_r=it.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Nn.inlineSvg?Mt+" ":"")+"Leaflet</a>"},initialize:function(v){y(this,v),this._attributions={}},onAdd:function(v){v.attributionControl=this,this._container=ci("div","leaflet-control-attribution"),re(this._container);for(var S in v._layers)v._layers[S].getAttribution&&this.addAttribution(v._layers[S].getAttribution());return this._update(),v.on("layeradd",this._addAttribution,this),this._container},onRemove:function(v){v.off("layeradd",this._addAttribution,this)},_addAttribution:function(v){v.layer.getAttribution&&(this.addAttribution(v.layer.getAttribution()),v.layer.once("remove",function(){this.removeAttribution(v.layer.getAttribution())},this))},setPrefix:function(v){return this.options.prefix=v,this._update(),this},addAttribution:function(v){return v?(this._attributions[v]||(this._attributions[v]=0),this._attributions[v]++,this._update(),this):this},removeAttribution:function(v){return v?(this._attributions[v]&&(this._attributions[v]--,this._update()),this):this},_update:function(){if(this._map){var v=[];for(var S in this._attributions)this._attributions[S]&&v.push(S);var Q=[];this.options.prefix&&Q.push(this.options.prefix),v.length&&Q.push(v.join(", ")),this._container.innerHTML=Q.join(' <span aria-hidden="true">|</span> ')}}});ct.mergeOptions({attributionControl:!0}),ct.addInitHook(function(){this.options.attributionControl&&new _r().addTo(this)});var lt=function(v){return new _r(v)};it.Layers=qt,it.Zoom=nt,it.Scale=Tr,it.Attribution=_r,Ot.layers=It,Ot.zoom=Vt,Ot.scale=or,Ot.attribution=lt;var vt=we.extend({initialize:function(v){this._map=v},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});vt.addTo=function(v,S){return v.addHandler(S,this),this};var Rt={Events:ne},Dt=Nn.touch?"touchstart mousedown":"mousedown",vr=ae.extend({options:{clickTolerance:3},initialize:function(v,S,Q,le){y(this,le),this._element=v,this._dragStartTarget=S||v,this._preventOutline=Q},enable:function(){this._enabled||(me(this._dragStartTarget,Dt,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(vr._dragging===this&&this.finishDrag(!0),Qe(this._dragStartTarget,Dt,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(v){if(this._enabled&&(this._moved=!1,!gi(this._element,"leaflet-zoom-anim"))){if(v.touches&&v.touches.length!==1){vr._dragging===this&&this.finishDrag();return}if(!(vr._dragging||v.shiftKey||v.which!==1&&v.button!==1&&!v.touches)&&(vr._dragging=this,this._preventOutline&&se(this._element),io(),Ka(),!this._moving)){this.fire("down");var S=v.touches?v.touches[0]:v,Q=$(this._element);this._startPoint=new oe(S.clientX,S.clientY),this._startPos=jo(this._element),this._parentScale=K(Q);var le=v.type==="mousedown";me(document,le?"mousemove":"touchmove",this._onMove,this),me(document,le?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(v){if(this._enabled){if(v.touches&&v.touches.length>1){this._moved=!0;return}var S=v.touches&&v.touches.length===1?v.touches[0]:v,Q=new oe(S.clientX,S.clientY)._subtract(this._startPoint);!Q.x&&!Q.y||Math.abs(Q.x)+Math.abs(Q.y)<this.options.clickTolerance||(Q.x/=this._parentScale.x,Q.y/=this._parentScale.y,ye(v),this._moved||(this.fire("dragstart"),this._moved=!0,Zn(document.body,"leaflet-dragging"),this._lastTarget=v.target||v.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Zn(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(Q),this._moving=!0,this._lastEvent=v,this._updatePosition())}},_updatePosition:function(){var v={originalEvent:this._lastEvent};this.fire("predrag",v),ms(this._element,this._newPos),this.fire("drag",v)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(v){fs(document.body,"leaflet-dragging"),this._lastTarget&&(fs(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Qe(document,"mousemove touchmove",this._onMove,this),Qe(document,"mouseup touchend touchcancel",this._onUp,this),Vo(),Vs();var S=this._moved&&this._moving;this._moving=!1,vr._dragging=!1,S&&this.fire("dragend",{noInertia:v,distance:this._newPos.distanceTo(this._startPos)})}});function kr(v,S,Q){var le,_e=[1,4,2,8],Ke,kt,er,Er,Wr,bn,ui,As;for(Ke=0,bn=v.length;Ke<bn;Ke++)v[Ke]._code=Nr(v[Ke],S);for(er=0;er<4;er++){for(ui=_e[er],le=[],Ke=0,bn=v.length,kt=bn-1;Ke<bn;kt=Ke++)Er=v[Ke],Wr=v[kt],Er._code&ui?Wr._code&ui||(As=Lr(Wr,Er,ui,S,Q),As._code=Nr(As,S),le.push(As)):(Wr._code&ui&&(As=Lr(Wr,Er,ui,S,Q),As._code=Nr(As,S),le.push(As)),le.push(Er));v=le}return v}function Rr(v,S){var Q,le,_e,Ke,kt,er,Er,Wr,bn;if(!v||v.length===0)throw new Error("latlngs not passed");Sn(v)||(console.warn("latlngs are not flat! Only the first ring will be used"),v=v[0]);var ui=Fe([0,0]),As=Re(v),Ma=As.getNorthWest().distanceTo(As.getSouthWest())*As.getNorthEast().distanceTo(As.getNorthWest());Ma<1700&&(ui=ur(v));var Co=v.length,il=[];for(Q=0;Q<Co;Q++){var Zs=Fe(v[Q]);il.push(S.project(Fe([Zs.lat-ui.lat,Zs.lng-ui.lng])))}for(er=Er=Wr=0,Q=0,le=Co-1;Q<Co;le=Q++)_e=il[Q],Ke=il[le],kt=_e.y*Ke.x-Ke.y*_e.x,Er+=(_e.x+Ke.x)*kt,Wr+=(_e.y+Ke.y)*kt,er+=kt*3;er===0?bn=il[0]:bn=[Er/er,Wr/er];var ca=S.unproject(Ce(bn));return Fe([ca.lat+ui.lat,ca.lng+ui.lng])}function ur(v){for(var S=0,Q=0,le=0,_e=0;_e<v.length;_e++){var Ke=Fe(v[_e]);S+=Ke.lat,Q+=Ke.lng,le++}return Fe([S/le,Q/le])}var Or={__proto__:null,clipPolygon:kr,polygonCenter:Rr,centroid:ur};function pn(v,S){if(!S||!v.length)return v.slice();var Q=S*S;return v=Wt(v,Q),v=Tt(v,Q),v}function on(v,S,Q){return Math.sqrt(An(v,S,Q,!0))}function Ye(v,S,Q){return An(v,S,Q)}function Tt(v,S){var Q=v.length,le=typeof Uint8Array<"u"?Uint8Array:Array,_e=new le(Q);_e[0]=_e[Q-1]=1,Lt(v,_e,S,0,Q-1);var Ke,kt=[];for(Ke=0;Ke<Q;Ke++)_e[Ke]&&kt.push(v[Ke]);return kt}function Lt(v,S,Q,le,_e){var Ke=0,kt,er,Er;for(er=le+1;er<=_e-1;er++)Er=An(v[er],v[le],v[_e],!0),Er>Ke&&(kt=er,Ke=Er);Ke>Q&&(S[kt]=1,Lt(v,S,Q,le,kt),Lt(v,S,Q,kt,_e))}function Wt(v,S){for(var Q=[v[0]],le=1,_e=0,Ke=v.length;le<Ke;le++)Zr(v[le],v[_e])>S&&(Q.push(v[le]),_e=le);return _e<Ke-1&&Q.push(v[Ke-1]),Q}var Xt;function fr(v,S,Q,le,_e){var Ke=le?Xt:Nr(v,Q),kt=Nr(S,Q),er,Er,Wr;for(Xt=kt;;){if(!(Ke|kt))return[v,S];if(Ke&kt)return!1;er=Ke||kt,Er=Lr(v,S,er,Q,_e),Wr=Nr(Er,Q),er===Ke?(v=Er,Ke=Wr):(S=Er,kt=Wr)}}function Lr(v,S,Q,le,_e){var Ke=S.x-v.x,kt=S.y-v.y,er=le.min,Er=le.max,Wr,bn;return Q&8?(Wr=v.x+Ke*(Er.y-v.y)/kt,bn=Er.y):Q&4?(Wr=v.x+Ke*(er.y-v.y)/kt,bn=er.y):Q&2?(Wr=Er.x,bn=v.y+kt*(Er.x-v.x)/Ke):Q&1&&(Wr=er.x,bn=v.y+kt*(er.x-v.x)/Ke),new oe(Wr,bn,_e)}function Nr(v,S){var Q=0;return v.x<S.min.x?Q|=1:v.x>S.max.x&&(Q|=2),v.y<S.min.y?Q|=4:v.y>S.max.y&&(Q|=8),Q}function Zr(v,S){var Q=S.x-v.x,le=S.y-v.y;return Q*Q+le*le}function An(v,S,Q,le){var _e=S.x,Ke=S.y,kt=Q.x-_e,er=Q.y-Ke,Er=kt*kt+er*er,Wr;return Er>0&&(Wr=((v.x-_e)*kt+(v.y-Ke)*er)/Er,Wr>1?(_e=Q.x,Ke=Q.y):Wr>0&&(_e+=kt*Wr,Ke+=er*Wr)),kt=v.x-_e,er=v.y-Ke,le?kt*kt+er*er:new oe(_e,Ke)}function Sn(v){return!E(v[0])||typeof v[0][0]!="object"&&typeof v[0][0]<"u"}function Fn(v){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Sn(v)}function xi(v,S){var Q,le,_e,Ke,kt,er,Er,Wr;if(!v||v.length===0)throw new Error("latlngs not passed");Sn(v)||(console.warn("latlngs are not flat! Only the first ring will be used"),v=v[0]);var bn=Fe([0,0]),ui=Re(v),As=ui.getNorthWest().distanceTo(ui.getSouthWest())*ui.getNorthEast().distanceTo(ui.getNorthWest());As<1700&&(bn=ur(v));var Ma=v.length,Co=[];for(Q=0;Q<Ma;Q++){var il=Fe(v[Q]);Co.push(S.project(Fe([il.lat-bn.lat,il.lng-bn.lng])))}for(Q=0,le=0;Q<Ma-1;Q++)le+=Co[Q].distanceTo(Co[Q+1])/2;if(le===0)Wr=Co[0];else for(Q=0,Ke=0;Q<Ma-1;Q++)if(kt=Co[Q],er=Co[Q+1],_e=kt.distanceTo(er),Ke+=_e,Ke>le){Er=(Ke-le)/_e,Wr=[er.x-Er*(er.x-kt.x),er.y-Er*(er.y-kt.y)];break}var Zs=S.unproject(Ce(Wr));return Fe([Zs.lat+bn.lat,Zs.lng+bn.lng])}var yt={__proto__:null,simplify:pn,pointToSegmentDistance:on,closestPointOnSegment:Ye,clipSegment:fr,_getEdgeIntersection:Lr,_getBitCode:Nr,_sqClosestPointOnSegment:An,isFlat:Sn,_flat:Fn,polylineCenter:xi},Tn={project:function(v){return new oe(v.lng,v.lat)},unproject:function(v){return new He(v.y,v.x)},bounds:new be([-180,-90],[180,90])},Ri={R:6378137,R_MINOR:6356752314245179e-9,bounds:new be([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(v){var S=Math.PI/180,Q=this.R,le=v.lat*S,_e=this.R_MINOR/Q,Ke=Math.sqrt(1-_e*_e),kt=Ke*Math.sin(le),er=Math.tan(Math.PI/4-le/2)/Math.pow((1-kt)/(1+kt),Ke/2);return le=-Q*Math.log(Math.max(er,1e-10)),new oe(v.lng*S*Q,le)},unproject:function(v){for(var S=180/Math.PI,Q=this.R,le=this.R_MINOR/Q,_e=Math.sqrt(1-le*le),Ke=Math.exp(-v.y/Q),kt=Math.PI/2-2*Math.atan(Ke),er=0,Er=.1,Wr;er<15&&Math.abs(Er)>1e-7;er++)Wr=_e*Math.sin(kt),Wr=Math.pow((1-Wr)/(1+Wr),_e/2),Er=Math.PI/2-2*Math.atan(Ke*Wr)-kt,kt+=Er;return new He(kt*S,v.x*S/Q)}},Cn={__proto__:null,LonLat:Tn,Mercator:Ri,SphericalMercator:ut},cn=i({},at,{code:"EPSG:3395",projection:Ri,transformation:(function(){var v=.5/(Math.PI*Ri.R);return Ue(v,.5,-v,.5)})()}),Ni=i({},at,{code:"EPSG:4326",projection:Tn,transformation:Ue(1/180,1,-1/180,.5)}),$n=i({},ft,{projection:Tn,transformation:Ue(1,0,-1,0),scale:function(v){return Math.pow(2,v)},zoom:function(v){return Math.log(v)/Math.LN2},distance:function(v,S){var Q=S.lng-v.lng,le=S.lat-v.lat;return Math.sqrt(Q*Q+le*le)},infinite:!0});ft.Earth=at,ft.EPSG3395=cn,ft.EPSG3857=jt,ft.EPSG900913=rt,ft.EPSG4326=Ni,ft.Simple=$n;var zn=ae.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(v){return v.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(v){return v&&v.removeLayer(this),this},getPane:function(v){return this._map.getPane(v?this.options[v]||v:this.options.pane)},addInteractiveTarget:function(v){return this._map._targets[u(v)]=this,this},removeInteractiveTarget:function(v){return delete this._map._targets[u(v)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(v){var S=v.target;if(S.hasLayer(this)){if(this._map=S,this._zoomAnimated=S._zoomAnimated,this.getEvents){var Q=this.getEvents();S.on(Q,this),this.once("remove",function(){S.off(Q,this)},this)}this.onAdd(S),this.fire("add"),S.fire("layeradd",{layer:this})}}});ct.include({addLayer:function(v){if(!v._layerAdd)throw new Error("The provided object is not a Layer.");var S=u(v);return this._layers[S]?this:(this._layers[S]=v,v._mapToAdd=this,v.beforeAdd&&v.beforeAdd(this),this.whenReady(v._layerAdd,v),this)},removeLayer:function(v){var S=u(v);return this._layers[S]?(this._loaded&&v.onRemove(this),delete this._layers[S],this._loaded&&(this.fire("layerremove",{layer:v}),v.fire("remove")),v._map=v._mapToAdd=null,this):this},hasLayer:function(v){return u(v)in this._layers},eachLayer:function(v,S){for(var Q in this._layers)v.call(S,this._layers[Q]);return this},_addLayers:function(v){v=v?E(v)?v:[v]:[];for(var S=0,Q=v.length;S<Q;S++)this.addLayer(v[S])},_addZoomLimit:function(v){(!isNaN(v.options.maxZoom)||!isNaN(v.options.minZoom))&&(this._zoomBoundLayers[u(v)]=v,this._updateZoomLevels())},_removeZoomLimit:function(v){var S=u(v);this._zoomBoundLayers[S]&&(delete this._zoomBoundLayers[S],this._updateZoomLevels())},_updateZoomLevels:function(){var v=1/0,S=-1/0,Q=this._getZoomSpan();for(var le in this._zoomBoundLayers){var _e=this._zoomBoundLayers[le].options;v=_e.minZoom===void 0?v:Math.min(v,_e.minZoom),S=_e.maxZoom===void 0?S:Math.max(S,_e.maxZoom)}this._layersMaxZoom=S===-1/0?void 0:S,this._layersMinZoom=v===1/0?void 0:v,Q!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Qn=zn.extend({initialize:function(v,S){y(this,S),this._layers={};var Q,le;if(v)for(Q=0,le=v.length;Q<le;Q++)this.addLayer(v[Q])},addLayer:function(v){var S=this.getLayerId(v);return this._layers[S]=v,this._map&&this._map.addLayer(v),this},removeLayer:function(v){var S=v in this._layers?v:this.getLayerId(v);return this._map&&this._layers[S]&&this._map.removeLayer(this._layers[S]),delete this._layers[S],this},hasLayer:function(v){var S=typeof v=="number"?v:this.getLayerId(v);return S in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(v){var S=Array.prototype.slice.call(arguments,1),Q,le;for(Q in this._layers)le=this._layers[Q],le[v]&&le[v].apply(le,S);return this},onAdd:function(v){this.eachLayer(v.addLayer,v)},onRemove:function(v){this.eachLayer(v.removeLayer,v)},eachLayer:function(v,S){for(var Q in this._layers)v.call(S,this._layers[Q]);return this},getLayer:function(v){return this._layers[v]},getLayers:function(){var v=[];return this.eachLayer(v.push,v),v},setZIndex:function(v){return this.invoke("setZIndex",v)},getLayerId:function(v){return u(v)}}),va=function(v,S){return new Qn(v,S)},Di=Qn.extend({addLayer:function(v){return this.hasLayer(v)?this:(v.addEventParent(this),Qn.prototype.addLayer.call(this,v),this.fire("layeradd",{layer:v}))},removeLayer:function(v){return this.hasLayer(v)?(v in this._layers&&(v=this._layers[v]),v.removeEventParent(this),Qn.prototype.removeLayer.call(this,v),this.fire("layerremove",{layer:v})):this},setStyle:function(v){return this.invoke("setStyle",v)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var v=new Pe;for(var S in this._layers){var Q=this._layers[S];v.extend(Q.getBounds?Q.getBounds():Q.getLatLng())}return v}}),Wn=function(v,S){return new Di(v,S)},is=we.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(v){y(this,v)},createIcon:function(v){return this._createIcon("icon",v)},createShadow:function(v){return this._createIcon("shadow",v)},_createIcon:function(v,S){var Q=this._getIconUrl(v);if(!Q){if(v==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var le=this._createImg(Q,S&&S.tagName==="IMG"?S:null);return this._setIconStyles(le,v),(this.options.crossOrigin||this.options.crossOrigin==="")&&(le.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),le},_setIconStyles:function(v,S){var Q=this.options,le=Q[S+"Size"];typeof le=="number"&&(le=[le,le]);var _e=Ce(le),Ke=Ce(S==="shadow"&&Q.shadowAnchor||Q.iconAnchor||_e&&_e.divideBy(2,!0));v.className="leaflet-marker-"+S+" "+(Q.className||""),Ke&&(v.style.marginLeft=-Ke.x+"px",v.style.marginTop=-Ke.y+"px"),_e&&(v.style.width=_e.x+"px",v.style.height=_e.y+"px")},_createImg:function(v,S){return S=S||document.createElement("img"),S.src=v,S},_getIconUrl:function(v){return Nn.retina&&this.options[v+"RetinaUrl"]||this.options[v+"Url"]}});function Si(v){return new is(v)}var Hn=is.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(v){return typeof Hn.imagePath!="string"&&(Hn.imagePath=this._detectIconPath()),(this.options.imagePath||Hn.imagePath)+is.prototype._getIconUrl.call(this,v)},_stripUrl:function(v){var S=function(Q,le,_e){var Ke=le.exec(Q);return Ke&&Ke[_e]};return v=S(v,/^url\((['"])?(.+)\1\)$/,2),v&&S(v,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var v=ci("div","leaflet-default-icon-path",document.body),S=zs(v,"background-image")||zs(v,"backgroundImage");if(document.body.removeChild(v),S=this._stripUrl(S),S)return S;var Q=document.querySelector('link[href$="leaflet.css"]');return Q?Q.href.substring(0,Q.href.length-11-1):""}}),Li=vt.extend({initialize:function(v){this._marker=v},addHooks:function(){var v=this._marker._icon;this._draggable||(this._draggable=new vr(v,v,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Zn(v,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&fs(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(v){var S=this._marker,Q=S._map,le=this._marker.options.autoPanSpeed,_e=this._marker.options.autoPanPadding,Ke=jo(S._icon),kt=Q.getPixelBounds(),er=Q.getPixelOrigin(),Er=ue(kt.min._subtract(er).add(_e),kt.max._subtract(er).subtract(_e));if(!Er.contains(Ke)){var Wr=Ce((Math.max(Er.max.x,Ke.x)-Er.max.x)/(kt.max.x-Er.max.x)-(Math.min(Er.min.x,Ke.x)-Er.min.x)/(kt.min.x-Er.min.x),(Math.max(Er.max.y,Ke.y)-Er.max.y)/(kt.max.y-Er.max.y)-(Math.min(Er.min.y,Ke.y)-Er.min.y)/(kt.min.y-Er.min.y)).multiplyBy(le);Q.panBy(Wr,{animate:!1}),this._draggable._newPos._add(Wr),this._draggable._startPos._add(Wr),ms(S._icon,this._draggable._newPos),this._onDrag(v),this._panRequest=J(this._adjustPan.bind(this,v))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(v){this._marker.options.autoPan&&(de(this._panRequest),this._panRequest=J(this._adjustPan.bind(this,v)))},_onDrag:function(v){var S=this._marker,Q=S._shadow,le=jo(S._icon),_e=S._map.layerPointToLatLng(le);Q&&ms(Q,le),S._latlng=_e,v.latlng=_e,v.oldLatLng=this._oldLatLng,S.fire("move",v).fire("drag",v)},_onDragEnd:function(v){de(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",v)}}),Yn=zn.extend({options:{icon:new Hn,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(v,S){y(this,S),this._latlng=Fe(v)},onAdd:function(v){this._zoomAnimated=this._zoomAnimated&&v.options.markerZoomAnimation,this._zoomAnimated&&v.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(v){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&v.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(v){var S=this._latlng;return this._latlng=Fe(v),this.update(),this.fire("move",{oldLatLng:S,latlng:this._latlng})},setZIndexOffset:function(v){return this.options.zIndexOffset=v,this.update()},getIcon:function(){return this.options.icon},setIcon:function(v){return this.options.icon=v,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var v=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(v)}return this},_initIcon:function(){var v=this.options,S="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),Q=v.icon.createIcon(this._icon),le=!1;Q!==this._icon&&(this._icon&&this._removeIcon(),le=!0,v.title&&(Q.title=v.title),Q.tagName==="IMG"&&(Q.alt=v.alt||"")),Zn(Q,S),v.keyboard&&(Q.tabIndex="0",Q.setAttribute("role","button")),this._icon=Q,v.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&me(Q,"focus",this._panOnFocus,this);var _e=v.icon.createShadow(this._shadow),Ke=!1;_e!==this._shadow&&(this._removeShadow(),Ke=!0),_e&&(Zn(_e,S),_e.alt=""),this._shadow=_e,v.opacity<1&&this._updateOpacity(),le&&this.getPane().appendChild(this._icon),this._initInteraction(),_e&&Ke&&this.getPane(v.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Qe(this._icon,"focus",this._panOnFocus,this),ks(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ks(this._shadow),this._shadow=null},_setPos:function(v){this._icon&&ms(this._icon,v),this._shadow&&ms(this._shadow,v),this._zIndex=v.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(v){this._icon&&(this._icon.style.zIndex=this._zIndex+v)},_animateZoom:function(v){var S=this._map._latLngToNewLayerPoint(this._latlng,v.zoom,v.center).round();this._setPos(S)},_initInteraction:function(){if(this.options.interactive&&(Zn(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Li)){var v=this.options.draggable;this.dragging&&(v=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Li(this),v&&this.dragging.enable()}},setOpacity:function(v){return this.options.opacity=v,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var v=this.options.opacity;this._icon&&Hi(this._icon,v),this._shadow&&Hi(this._shadow,v)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var v=this._map;if(v){var S=this.options.icon.options,Q=S.iconSize?Ce(S.iconSize):Ce(0,0),le=S.iconAnchor?Ce(S.iconAnchor):Ce(0,0);v.panInside(this._latlng,{paddingTopLeft:le,paddingBottomRight:Q.subtract(le)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Gi(v,S){return new Yn(v,S)}var ss=zn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(v){this._renderer=v.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(v){return y(this,v),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&v&&Object.prototype.hasOwnProperty.call(v,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Zi=ss.extend({options:{fill:!0,radius:10},initialize:function(v,S){y(this,S),this._latlng=Fe(v),this._radius=this.options.radius},setLatLng:function(v){var S=this._latlng;return this._latlng=Fe(v),this.redraw(),this.fire("move",{oldLatLng:S,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(v){return this.options.radius=this._radius=v,this.redraw()},getRadius:function(){return this._radius},setStyle:function(v){var S=v&&v.radius||this._radius;return ss.prototype.setStyle.call(this,v),this.setRadius(S),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var v=this._radius,S=this._radiusY||v,Q=this._clickTolerance(),le=[v+Q,S+Q];this._pxBounds=new be(this._point.subtract(le),this._point.add(le))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(v){return v.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function ys(v,S){return new Zi(v,S)}var Na=Zi.extend({initialize:function(v,S,Q){if(typeof S=="number"&&(S=i({},Q,{radius:S})),y(this,S),this._latlng=Fe(v),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(v){return this._mRadius=v,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var v=[this._radius,this._radiusY||this._radius];return new Pe(this._map.layerPointToLatLng(this._point.subtract(v)),this._map.layerPointToLatLng(this._point.add(v)))},setStyle:ss.prototype.setStyle,_project:function(){var v=this._latlng.lng,S=this._latlng.lat,Q=this._map,le=Q.options.crs;if(le.distance===at.distance){var _e=Math.PI/180,Ke=this._mRadius/at.R/_e,kt=Q.project([S+Ke,v]),er=Q.project([S-Ke,v]),Er=kt.add(er).divideBy(2),Wr=Q.unproject(Er).lat,bn=Math.acos((Math.cos(Ke*_e)-Math.sin(S*_e)*Math.sin(Wr*_e))/(Math.cos(S*_e)*Math.cos(Wr*_e)))/_e;(isNaN(bn)||bn===0)&&(bn=Ke/Math.cos(Math.PI/180*S)),this._point=Er.subtract(Q.getPixelOrigin()),this._radius=isNaN(bn)?0:Er.x-Q.project([Wr,v-bn]).x,this._radiusY=Er.y-kt.y}else{var ui=le.unproject(le.project(this._latlng).subtract([this._mRadius,0]));this._point=Q.latLngToLayerPoint(this._latlng),this._radius=this._point.x-Q.latLngToLayerPoint(ui).x}this._updateBounds()}});function bi(v,S,Q){return new Na(v,S,Q)}var Ys=ss.extend({options:{smoothFactor:1,noClip:!1},initialize:function(v,S){y(this,S),this._setLatLngs(v)},getLatLngs:function(){return this._latlngs},setLatLngs:function(v){return this._setLatLngs(v),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(v){for(var S=1/0,Q=null,le=An,_e,Ke,kt=0,er=this._parts.length;kt<er;kt++)for(var Er=this._parts[kt],Wr=1,bn=Er.length;Wr<bn;Wr++){_e=Er[Wr-1],Ke=Er[Wr];var ui=le(v,_e,Ke,!0);ui<S&&(S=ui,Q=le(v,_e,Ke))}return Q&&(Q.distance=Math.sqrt(S)),Q},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return xi(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(v,S){return S=S||this._defaultShape(),v=Fe(v),S.push(v),this._bounds.extend(v),this.redraw()},_setLatLngs:function(v){this._bounds=new Pe,this._latlngs=this._convertLatLngs(v)},_defaultShape:function(){return Sn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(v){for(var S=[],Q=Sn(v),le=0,_e=v.length;le<_e;le++)Q?(S[le]=Fe(v[le]),this._bounds.extend(S[le])):S[le]=this._convertLatLngs(v[le]);return S},_project:function(){var v=new be;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,v),this._bounds.isValid()&&v.isValid()&&(this._rawPxBounds=v,this._updateBounds())},_updateBounds:function(){var v=this._clickTolerance(),S=new oe(v,v);this._rawPxBounds&&(this._pxBounds=new be([this._rawPxBounds.min.subtract(S),this._rawPxBounds.max.add(S)]))},_projectLatlngs:function(v,S,Q){var le=v[0]instanceof He,_e=v.length,Ke,kt;if(le){for(kt=[],Ke=0;Ke<_e;Ke++)kt[Ke]=this._map.latLngToLayerPoint(v[Ke]),Q.extend(kt[Ke]);S.push(kt)}else for(Ke=0;Ke<_e;Ke++)this._projectLatlngs(v[Ke],S,Q)},_clipPoints:function(){var v=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(v))){if(this.options.noClip){this._parts=this._rings;return}var S=this._parts,Q,le,_e,Ke,kt,er,Er;for(Q=0,_e=0,Ke=this._rings.length;Q<Ke;Q++)for(Er=this._rings[Q],le=0,kt=Er.length;le<kt-1;le++)er=fr(Er[le],Er[le+1],v,le,!0),er&&(S[_e]=S[_e]||[],S[_e].push(er[0]),(er[1]!==Er[le+1]||le===kt-2)&&(S[_e].push(er[1]),_e++))}},_simplifyPoints:function(){for(var v=this._parts,S=this.options.smoothFactor,Q=0,le=v.length;Q<le;Q++)v[Q]=pn(v[Q],S)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(v,S){var Q,le,_e,Ke,kt,er,Er=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(v))return!1;for(Q=0,Ke=this._parts.length;Q<Ke;Q++)for(er=this._parts[Q],le=0,kt=er.length,_e=kt-1;le<kt;_e=le++)if(!(!S&&le===0)&&on(v,er[_e],er[le])<=Er)return!0;return!1}});function Qi(v,S){return new Ys(v,S)}Ys._flat=Fn;var ai=Ys.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Rr(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(v){var S=Ys.prototype._convertLatLngs.call(this,v),Q=S.length;return Q>=2&&S[0]instanceof He&&S[0].equals(S[Q-1])&&S.pop(),S},_setLatLngs:function(v){Ys.prototype._setLatLngs.call(this,v),Sn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Sn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var v=this._renderer._bounds,S=this.options.weight,Q=new oe(S,S);if(v=new be(v.min.subtract(Q),v.max.add(Q)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(v))){if(this.options.noClip){this._parts=this._rings;return}for(var le=0,_e=this._rings.length,Ke;le<_e;le++)Ke=kr(this._rings[le],v,!0),Ke.length&&this._parts.push(Ke)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(v){var S=!1,Q,le,_e,Ke,kt,er,Er,Wr;if(!this._pxBounds||!this._pxBounds.contains(v))return!1;for(Ke=0,Er=this._parts.length;Ke<Er;Ke++)for(Q=this._parts[Ke],kt=0,Wr=Q.length,er=Wr-1;kt<Wr;er=kt++)le=Q[kt],_e=Q[er],le.y>v.y!=_e.y>v.y&&v.x<(_e.x-le.x)*(v.y-le.y)/(_e.y-le.y)+le.x&&(S=!S);return S||Ys.prototype._containsPoint.call(this,v,!0)}});function ha(v,S){return new ai(v,S)}var Ii=Di.extend({initialize:function(v,S){y(this,S),this._layers={},v&&this.addData(v)},addData:function(v){var S=E(v)?v:v.features,Q,le,_e;if(S){for(Q=0,le=S.length;Q<le;Q++)_e=S[Q],(_e.geometries||_e.geometry||_e.features||_e.coordinates)&&this.addData(_e);return this}var Ke=this.options;if(Ke.filter&&!Ke.filter(v))return this;var kt=_n(v,Ke);return kt?(kt.feature=Da(v),kt.defaultOptions=kt.options,this.resetStyle(kt),Ke.onEachFeature&&Ke.onEachFeature(v,kt),this.addLayer(kt)):this},resetStyle:function(v){return v===void 0?this.eachLayer(this.resetStyle,this):(v.options=i({},v.defaultOptions),this._setLayerStyle(v,this.options.style),this)},setStyle:function(v){return this.eachLayer(function(S){this._setLayerStyle(S,v)},this)},_setLayerStyle:function(v,S){v.setStyle&&(typeof S=="function"&&(S=S(v.feature)),v.setStyle(S))}});function _n(v,S){var Q=v.type==="Feature"?v.geometry:v,le=Q?Q.coordinates:null,_e=[],Ke=S&&S.pointToLayer,kt=S&&S.coordsToLatLng||_u,er,Er,Wr,bn;if(!le&&!Q)return null;switch(Q.type){case"Point":return er=kt(le),cs(Ke,v,er,S);case"MultiPoint":for(Wr=0,bn=le.length;Wr<bn;Wr++)er=kt(le[Wr]),_e.push(cs(Ke,v,er,S));return new Di(_e);case"LineString":case"MultiLineString":return Er=so(le,Q.type==="LineString"?0:1,kt),new Ys(Er,S);case"Polygon":case"MultiPolygon":return Er=so(le,Q.type==="Polygon"?1:2,kt),new ai(Er,S);case"GeometryCollection":for(Wr=0,bn=Q.geometries.length;Wr<bn;Wr++){var ui=_n({geometry:Q.geometries[Wr],type:"Feature",properties:v.properties},S);ui&&_e.push(ui)}return new Di(_e);case"FeatureCollection":for(Wr=0,bn=Q.features.length;Wr<bn;Wr++){var As=_n(Q.features[Wr],S);As&&_e.push(As)}return new Di(_e);default:throw new Error("Invalid GeoJSON object.")}}function cs(v,S,Q,le){return v?v(S,Q):new Yn(Q,le&&le.markersInheritOptions&&le)}function _u(v){return new He(v[1],v[0],v[2])}function so(v,S,Q){for(var le=[],_e=0,Ke=v.length,kt;_e<Ke;_e++)kt=S?so(v[_e],S-1,Q):(Q||_u)(v[_e]),le.push(kt);return le}function Ko(v,S){return v=Fe(v),v.alt!==void 0?[m(v.lng,S),m(v.lat,S),m(v.alt,S)]:[m(v.lng,S),m(v.lat,S)]}function ec(v,S,Q,le){for(var _e=[],Ke=0,kt=v.length;Ke<kt;Ke++)_e.push(S?ec(v[Ke],Sn(v[Ke])?0:S-1,Q,le):Ko(v[Ke],le));return!S&&Q&&_e.length>0&&_e.push(_e[0].slice()),_e}function wi(v,S){return v.feature?i({},v.feature,{geometry:S}):Da(S)}function Da(v){return v.type==="Feature"||v.type==="FeatureCollection"?v:{type:"Feature",properties:{},geometry:v}}var Za={toGeoJSON:function(v){return wi(this,{type:"Point",coordinates:Ko(this.getLatLng(),v)})}};Yn.include(Za),Na.include(Za),Zi.include(Za),Ys.include({toGeoJSON:function(v){var S=!Sn(this._latlngs),Q=ec(this._latlngs,S?1:0,!1,v);return wi(this,{type:(S?"Multi":"")+"LineString",coordinates:Q})}}),ai.include({toGeoJSON:function(v){var S=!Sn(this._latlngs),Q=S&&!Sn(this._latlngs[0]),le=ec(this._latlngs,Q?2:S?1:0,!0,v);return S||(le=[le]),wi(this,{type:(Q?"Multi":"")+"Polygon",coordinates:le})}}),Qn.include({toMultiPoint:function(v){var S=[];return this.eachLayer(function(Q){S.push(Q.toGeoJSON(v).geometry.coordinates)}),wi(this,{type:"MultiPoint",coordinates:S})},toGeoJSON:function(v){var S=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(S==="MultiPoint")return this.toMultiPoint(v);var Q=S==="GeometryCollection",le=[];return this.eachLayer(function(_e){if(_e.toGeoJSON){var Ke=_e.toGeoJSON(v);if(Q)le.push(Ke.geometry);else{var kt=Da(Ke);kt.type==="FeatureCollection"?le.push.apply(le,kt.features):le.push(kt)}}}),Q?wi(this,{geometries:le,type:"GeometryCollection"}):{type:"FeatureCollection",features:le}}});function $l(v,S){return new Ii(v,S)}var Hl=$l,fa=zn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(v,S,Q){this._url=v,this._bounds=Re(S),y(this,Q)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Zn(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ks(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(v){return this.options.opacity=v,this._image&&this._updateOpacity(),this},setStyle:function(v){return v.opacity&&this.setOpacity(v.opacity),this},bringToFront:function(){return this._map&&Va(this._image),this},bringToBack:function(){return this._map&&Ca(this._image),this},setUrl:function(v){return this._url=v,this._image&&(this._image.src=v),this},setBounds:function(v){return this._bounds=Re(v),this._map&&this._reset(),this},getEvents:function(){var v={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(v.zoomanim=this._animateZoom),v},setZIndex:function(v){return this.options.zIndex=v,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var v=this._url.tagName==="IMG",S=this._image=v?this._url:ci("img");if(Zn(S,"leaflet-image-layer"),this._zoomAnimated&&Zn(S,"leaflet-zoom-animated"),this.options.className&&Zn(S,this.options.className),S.onselectstart=f,S.onmousemove=f,S.onload=o(this.fire,this,"load"),S.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(S.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),v){this._url=S.src;return}S.src=this._url,S.alt=this.options.alt},_animateZoom:function(v){var S=this._map.getZoomScale(v.zoom),Q=this._map._latLngBoundsToNewLayerBounds(this._bounds,v.zoom,v.center).min;Xs(this._image,Q,S)},_reset:function(){var v=this._image,S=new be(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),Q=S.getSize();ms(v,S.min),v.style.width=Q.x+"px",v.style.height=Q.y+"px"},_updateOpacity:function(){Hi(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var v=this.options.errorOverlayUrl;v&&this._url!==v&&(this._url=v,this._image.src=v)},getCenter:function(){return this._bounds.getCenter()}}),yo=function(v,S,Q){return new fa(v,S,Q)},Ja=fa.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var v=this._url.tagName==="VIDEO",S=this._image=v?this._url:ci("video");if(Zn(S,"leaflet-image-layer"),this._zoomAnimated&&Zn(S,"leaflet-zoom-animated"),this.options.className&&Zn(S,this.options.className),S.onselectstart=f,S.onmousemove=f,S.onloadeddata=o(this.fire,this,"load"),v){for(var Q=S.getElementsByTagName("source"),le=[],_e=0;_e<Q.length;_e++)le.push(Q[_e].src);this._url=Q.length>0?le:[S.src];return}E(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(S.style,"objectFit")&&(S.style.objectFit="fill"),S.autoplay=!!this.options.autoplay,S.loop=!!this.options.loop,S.muted=!!this.options.muted,S.playsInline=!!this.options.playsInline;for(var Ke=0;Ke<this._url.length;Ke++){var kt=ci("source");kt.src=this._url[Ke],S.appendChild(kt)}}});function Hc(v,S,Q){return new Ja(v,S,Q)}var To=fa.extend({_initImage:function(){var v=this._image=this._url;Zn(v,"leaflet-image-layer"),this._zoomAnimated&&Zn(v,"leaflet-zoom-animated"),this.options.className&&Zn(v,this.options.className),v.onselectstart=f,v.onmousemove=f}});function Ac(v,S,Q){return new To(v,S,Q)}var Ga=zn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(v,S){v&&(v instanceof He||E(v))?(this._latlng=Fe(v),y(this,S)):(y(this,v),this._source=S),this.options.content&&(this._content=this.options.content)},openOn:function(v){return v=arguments.length?v:this._source._map,v.hasLayer(this)||v.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(v){return this._map?this.close():(arguments.length?this._source=v:v=this._source,this._prepareOpen(),this.openOn(v._map)),this},onAdd:function(v){this._zoomAnimated=v._zoomAnimated,this._container||this._initLayout(),v._fadeAnimated&&Hi(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),v._fadeAnimated&&Hi(this._container,1),this.bringToFront(),this.options.interactive&&(Zn(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(v){v._fadeAnimated?(Hi(this._container,0),this._removeTimeout=setTimeout(o(ks,void 0,this._container),200)):ks(this._container),this.options.interactive&&(fs(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(v){return this._latlng=Fe(v),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(v){return this._content=v,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var v={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(v.zoomanim=this._animateZoom),v},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Va(this._container),this},bringToBack:function(){return this._map&&Ca(this._container),this},_prepareOpen:function(v){var S=this._source;if(!S._map)return!1;if(S instanceof Di){S=null;var Q=this._source._layers;for(var le in Q)if(Q[le]._map){S=Q[le];break}if(!S)return!1;this._source=S}if(!v)if(S.getCenter)v=S.getCenter();else if(S.getLatLng)v=S.getLatLng();else if(S.getBounds)v=S.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(v),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var v=this._contentNode,S=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof S=="string")v.innerHTML=S;else{for(;v.hasChildNodes();)v.removeChild(v.firstChild);v.appendChild(S)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var v=this._map.latLngToLayerPoint(this._latlng),S=Ce(this.options.offset),Q=this._getAnchor();this._zoomAnimated?ms(this._container,v.add(Q)):S=S.add(v).add(Q);var le=this._containerBottom=-S.y,_e=this._containerLeft=-Math.round(this._containerWidth/2)+S.x;this._container.style.bottom=le+"px",this._container.style.left=_e+"px"}},_getAnchor:function(){return[0,0]}});ct.include({_initOverlay:function(v,S,Q,le){var _e=S;return _e instanceof v||(_e=new v(le).setContent(S)),Q&&_e.setLatLng(Q),_e}}),zn.include({_initOverlay:function(v,S,Q,le){var _e=Q;return _e instanceof v?(y(_e,le),_e._source=this):(_e=S&&!le?S:new v(le,this),_e.setContent(Q)),_e}});var Ql=Ga.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(v){return v=arguments.length?v:this._source._map,!v.hasLayer(this)&&v._popup&&v._popup.options.autoClose&&v.removeLayer(v._popup),v._popup=this,Ga.prototype.openOn.call(this,v)},onAdd:function(v){Ga.prototype.onAdd.call(this,v),v.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ss||this._source.on("preclick",W))},onRemove:function(v){Ga.prototype.onRemove.call(this,v),v.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ss||this._source.off("preclick",W))},getEvents:function(){var v=Ga.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(v.preclick=this.close),this.options.keepInView&&(v.moveend=this._adjustPan),v},_initLayout:function(){var v="leaflet-popup",S=this._container=ci("div",v+" "+(this.options.className||"")+" leaflet-zoom-animated"),Q=this._wrapper=ci("div",v+"-content-wrapper",S);if(this._contentNode=ci("div",v+"-content",Q),re(S),Z(this._contentNode),me(S,"contextmenu",W),this._tipContainer=ci("div",v+"-tip-container",S),this._tip=ci("div",v+"-tip",this._tipContainer),this.options.closeButton){var le=this._closeButton=ci("a",v+"-close-button",S);le.setAttribute("role","button"),le.setAttribute("aria-label","Close popup"),le.href="#close",le.innerHTML='<span aria-hidden="true">&#215;</span>',me(le,"click",function(_e){ye(_e),this.close()},this)}},_updateLayout:function(){var v=this._contentNode,S=v.style;S.width="",S.whiteSpace="nowrap";var Q=v.offsetWidth;Q=Math.min(Q,this.options.maxWidth),Q=Math.max(Q,this.options.minWidth),S.width=Q+1+"px",S.whiteSpace="",S.height="";var le=v.offsetHeight,_e=this.options.maxHeight,Ke="leaflet-popup-scrolled";_e&&le>_e?(S.height=_e+"px",Zn(v,Ke)):fs(v,Ke),this._containerWidth=this._container.offsetWidth},_animateZoom:function(v){var S=this._map._latLngToNewLayerPoint(this._latlng,v.zoom,v.center),Q=this._getAnchor();ms(this._container,S.add(Q))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var v=this._map,S=parseInt(zs(this._container,"marginBottom"),10)||0,Q=this._container.offsetHeight+S,le=this._containerWidth,_e=new oe(this._containerLeft,-Q-this._containerBottom);_e._add(jo(this._container));var Ke=v.layerPointToContainerPoint(_e),kt=Ce(this.options.autoPanPadding),er=Ce(this.options.autoPanPaddingTopLeft||kt),Er=Ce(this.options.autoPanPaddingBottomRight||kt),Wr=v.getSize(),bn=0,ui=0;Ke.x+le+Er.x>Wr.x&&(bn=Ke.x+le-Wr.x+Er.x),Ke.x-bn-er.x<0&&(bn=Ke.x-er.x),Ke.y+Q+Er.y>Wr.y&&(ui=Ke.y+Q-Wr.y+Er.y),Ke.y-ui-er.y<0&&(ui=Ke.y-er.y),(bn||ui)&&(this.options.keepInView&&(this._autopanning=!0),v.fire("autopanstart").panBy([bn,ui]))}},_getAnchor:function(){return Ce(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),zl=function(v,S){return new Ql(v,S)};ct.mergeOptions({closePopupOnClick:!0}),ct.include({openPopup:function(v,S,Q){return this._initOverlay(Ql,v,S,Q).openOn(this),this},closePopup:function(v){return v=arguments.length?v:this._popup,v&&v.close(),this}}),zn.include({bindPopup:function(v,S){return this._popup=this._initOverlay(Ql,this._popup,v,S),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(v){return this._popup&&(this instanceof Di||(this._popup._source=this),this._popup._prepareOpen(v||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(v){return this._popup&&this._popup.setContent(v),this},getPopup:function(){return this._popup},_openPopup:function(v){if(!(!this._popup||!this._map)){fe(v);var S=v.layer||v.target;if(this._popup._source===S&&!(S instanceof ss)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(v.latlng);return}this._popup._source=S,this.openPopup(v.latlng)}},_movePopup:function(v){this._popup.setLatLng(v.latlng)},_onKeyPress:function(v){v.originalEvent.keyCode===13&&this._openPopup(v)}});var Il=Ga.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(v){Ga.prototype.onAdd.call(this,v),this.setOpacity(this.options.opacity),v.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(v){Ga.prototype.onRemove.call(this,v),v.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var v=Ga.prototype.getEvents.call(this);return this.options.permanent||(v.preclick=this.close),v},_initLayout:function(){var v="leaflet-tooltip",S=v+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ci("div",S),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+u(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(v){var S,Q,le=this._map,_e=this._container,Ke=le.latLngToContainerPoint(le.getCenter()),kt=le.layerPointToContainerPoint(v),er=this.options.direction,Er=_e.offsetWidth,Wr=_e.offsetHeight,bn=Ce(this.options.offset),ui=this._getAnchor();er==="top"?(S=Er/2,Q=Wr):er==="bottom"?(S=Er/2,Q=0):er==="center"?(S=Er/2,Q=Wr/2):er==="right"?(S=0,Q=Wr/2):er==="left"?(S=Er,Q=Wr/2):kt.x<Ke.x?(er="right",S=0,Q=Wr/2):(er="left",S=Er+(bn.x+ui.x)*2,Q=Wr/2),v=v.subtract(Ce(S,Q,!0)).add(bn).add(ui),fs(_e,"leaflet-tooltip-right"),fs(_e,"leaflet-tooltip-left"),fs(_e,"leaflet-tooltip-top"),fs(_e,"leaflet-tooltip-bottom"),Zn(_e,"leaflet-tooltip-"+er),ms(_e,v)},_updatePosition:function(){var v=this._map.latLngToLayerPoint(this._latlng);this._setPosition(v)},setOpacity:function(v){this.options.opacity=v,this._container&&Hi(this._container,v)},_animateZoom:function(v){var S=this._map._latLngToNewLayerPoint(this._latlng,v.zoom,v.center);this._setPosition(S)},_getAnchor:function(){return Ce(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),bd=function(v,S){return new Il(v,S)};ct.include({openTooltip:function(v,S,Q){return this._initOverlay(Il,v,S,Q).openOn(this),this},closeTooltip:function(v){return v.close(),this}}),zn.include({bindTooltip:function(v,S){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Il,this._tooltip,v,S),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(v){if(!(!v&&this._tooltipHandlersAdded)){var S=v?"off":"on",Q={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?Q.add=this._openTooltip:(Q.mouseover=this._openTooltip,Q.mouseout=this.closeTooltip,Q.click=this._openTooltip,this._map?this._addFocusListeners():Q.add=this._addFocusListeners),this._tooltip.options.sticky&&(Q.mousemove=this._moveTooltip),this[S](Q),this._tooltipHandlersAdded=!v}},openTooltip:function(v){return this._tooltip&&(this instanceof Di||(this._tooltip._source=this),this._tooltip._prepareOpen(v)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(v){return this._tooltip&&this._tooltip.setContent(v),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(v){var S=typeof v.getElement=="function"&&v.getElement();S&&(me(S,"focus",function(){this._tooltip._source=v,this.openTooltip()},this),me(S,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(v){var S=typeof v.getElement=="function"&&v.getElement();S&&S.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(v){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var S=this;this._map.once("moveend",function(){S._openOnceFlag=!1,S._openTooltip(v)});return}this._tooltip._source=v.layer||v.target,this.openTooltip(this._tooltip.options.sticky?v.latlng:void 0)}},_moveTooltip:function(v){var S=v.latlng,Q,le;this._tooltip.options.sticky&&v.originalEvent&&(Q=this._map.mouseEventToContainerPoint(v.originalEvent),le=this._map.containerPointToLayerPoint(Q),S=this._map.layerPointToLatLng(le)),this._tooltip.setLatLng(S)}});var tc=is.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(v){var S=v&&v.tagName==="DIV"?v:document.createElement("div"),Q=this.options;if(Q.html instanceof Element?(Ta(S),S.appendChild(Q.html)):S.innerHTML=Q.html!==!1?Q.html:"",Q.bgPos){var le=Ce(Q.bgPos);S.style.backgroundPosition=-le.x+"px "+-le.y+"px"}return this._setIconStyles(S,"icon"),S},createShadow:function(){return null}});function Vl(v){return new tc(v)}is.Default=Hn;var pc=zn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Nn.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(v){y(this,v)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(v){v._addZoomLimit(this)},onRemove:function(v){this._removeAllTiles(),ks(this._container),v._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Va(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Ca(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(v){return this.options.opacity=v,this._updateOpacity(),this},setZIndex:function(v){return this.options.zIndex=v,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var v=this._clampZoom(this._map.getZoom());v!==this._tileZoom&&(this._tileZoom=v,this._updateLevels()),this._update()}return this},getEvents:function(){var v={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=l(this._onMoveEnd,this.options.updateInterval,this)),v.move=this._onMove),this._zoomAnimated&&(v.zoomanim=this._animateZoom),v},createTile:function(){return document.createElement("div")},getTileSize:function(){var v=this.options.tileSize;return v instanceof oe?v:new oe(v,v)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(v){for(var S=this.getPane().children,Q=-v(-1/0,1/0),le=0,_e=S.length,Ke;le<_e;le++)Ke=S[le].style.zIndex,S[le]!==this._container&&Ke&&(Q=v(Q,+Ke));isFinite(Q)&&(this.options.zIndex=Q+v(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Nn.ielt9){Hi(this._container,this.options.opacity);var v=+new Date,S=!1,Q=!1;for(var le in this._tiles){var _e=this._tiles[le];if(!(!_e.current||!_e.loaded)){var Ke=Math.min(1,(v-_e.loaded)/200);Hi(_e.el,Ke),Ke<1?S=!0:(_e.active?Q=!0:this._onOpaqueTile(_e),_e.active=!0)}}Q&&!this._noPrune&&this._pruneTiles(),S&&(de(this._fadeFrame),this._fadeFrame=J(this._updateOpacity,this))}},_onOpaqueTile:f,_initContainer:function(){this._container||(this._container=ci("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var v=this._tileZoom,S=this.options.maxZoom;if(v!==void 0){for(var Q in this._levels)Q=Number(Q),this._levels[Q].el.children.length||Q===v?(this._levels[Q].el.style.zIndex=S-Math.abs(v-Q),this._onUpdateLevel(Q)):(ks(this._levels[Q].el),this._removeTilesAtZoom(Q),this._onRemoveLevel(Q),delete this._levels[Q]);var le=this._levels[v],_e=this._map;return le||(le=this._levels[v]={},le.el=ci("div","leaflet-tile-container leaflet-zoom-animated",this._container),le.el.style.zIndex=S,le.origin=_e.project(_e.unproject(_e.getPixelOrigin()),v).round(),le.zoom=v,this._setZoomTransform(le,_e.getCenter(),_e.getZoom()),f(le.el.offsetWidth),this._onCreateLevel(le)),this._level=le,le}},_onUpdateLevel:f,_onRemoveLevel:f,_onCreateLevel:f,_pruneTiles:function(){if(this._map){var v,S,Q=this._map.getZoom();if(Q>this.options.maxZoom||Q<this.options.minZoom){this._removeAllTiles();return}for(v in this._tiles)S=this._tiles[v],S.retain=S.current;for(v in this._tiles)if(S=this._tiles[v],S.current&&!S.active){var le=S.coords;this._retainParent(le.x,le.y,le.z,le.z-5)||this._retainChildren(le.x,le.y,le.z,le.z+2)}for(v in this._tiles)this._tiles[v].retain||this._removeTile(v)}},_removeTilesAtZoom:function(v){for(var S in this._tiles)this._tiles[S].coords.z===v&&this._removeTile(S)},_removeAllTiles:function(){for(var v in this._tiles)this._removeTile(v)},_invalidateAll:function(){for(var v in this._levels)ks(this._levels[v].el),this._onRemoveLevel(Number(v)),delete this._levels[v];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(v,S,Q,le){var _e=Math.floor(v/2),Ke=Math.floor(S/2),kt=Q-1,er=new oe(+_e,+Ke);er.z=+kt;var Er=this._tileCoordsToKey(er),Wr=this._tiles[Er];return Wr&&Wr.active?(Wr.retain=!0,!0):(Wr&&Wr.loaded&&(Wr.retain=!0),kt>le?this._retainParent(_e,Ke,kt,le):!1)},_retainChildren:function(v,S,Q,le){for(var _e=2*v;_e<2*v+2;_e++)for(var Ke=2*S;Ke<2*S+2;Ke++){var kt=new oe(_e,Ke);kt.z=Q+1;var er=this._tileCoordsToKey(kt),Er=this._tiles[er];if(Er&&Er.active){Er.retain=!0;continue}else Er&&Er.loaded&&(Er.retain=!0);Q+1<le&&this._retainChildren(_e,Ke,Q+1,le)}},_resetView:function(v){var S=v&&(v.pinch||v.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),S,S)},_animateZoom:function(v){this._setView(v.center,v.zoom,!0,v.noUpdate)},_clampZoom:function(v){var S=this.options;return S.minNativeZoom!==void 0&&v<S.minNativeZoom?S.minNativeZoom:S.maxNativeZoom!==void 0&&S.maxNativeZoom<v?S.maxNativeZoom:v},_setView:function(v,S,Q,le){var _e=Math.round(S);this.options.maxZoom!==void 0&&_e>this.options.maxZoom||this.options.minZoom!==void 0&&_e<this.options.minZoom?_e=void 0:_e=this._clampZoom(_e);var Ke=this.options.updateWhenZooming&&_e!==this._tileZoom;(!le||Ke)&&(this._tileZoom=_e,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),_e!==void 0&&this._update(v),Q||this._pruneTiles(),this._noPrune=!!Q),this._setZoomTransforms(v,S)},_setZoomTransforms:function(v,S){for(var Q in this._levels)this._setZoomTransform(this._levels[Q],v,S)},_setZoomTransform:function(v,S,Q){var le=this._map.getZoomScale(Q,v.zoom),_e=v.origin.multiplyBy(le).subtract(this._map._getNewPixelOrigin(S,Q)).round();Nn.any3d?Xs(v.el,_e,le):ms(v.el,_e)},_resetGrid:function(){var v=this._map,S=v.options.crs,Q=this._tileSize=this.getTileSize(),le=this._tileZoom,_e=this._map.getPixelWorldBounds(this._tileZoom);_e&&(this._globalTileRange=this._pxBoundsToTileRange(_e)),this._wrapX=S.wrapLng&&!this.options.noWrap&&[Math.floor(v.project([0,S.wrapLng[0]],le).x/Q.x),Math.ceil(v.project([0,S.wrapLng[1]],le).x/Q.y)],this._wrapY=S.wrapLat&&!this.options.noWrap&&[Math.floor(v.project([S.wrapLat[0],0],le).y/Q.x),Math.ceil(v.project([S.wrapLat[1],0],le).y/Q.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(v){var S=this._map,Q=S._animatingZoom?Math.max(S._animateToZoom,S.getZoom()):S.getZoom(),le=S.getZoomScale(Q,this._tileZoom),_e=S.project(v,this._tileZoom).floor(),Ke=S.getSize().divideBy(le*2);return new be(_e.subtract(Ke),_e.add(Ke))},_update:function(v){var S=this._map;if(S){var Q=this._clampZoom(S.getZoom());if(v===void 0&&(v=S.getCenter()),this._tileZoom!==void 0){var le=this._getTiledPixelBounds(v),_e=this._pxBoundsToTileRange(le),Ke=_e.getCenter(),kt=[],er=this.options.keepBuffer,Er=new be(_e.getBottomLeft().subtract([er,-er]),_e.getTopRight().add([er,-er]));if(!(isFinite(_e.min.x)&&isFinite(_e.min.y)&&isFinite(_e.max.x)&&isFinite(_e.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Wr in this._tiles){var bn=this._tiles[Wr].coords;(bn.z!==this._tileZoom||!Er.contains(new oe(bn.x,bn.y)))&&(this._tiles[Wr].current=!1)}if(Math.abs(Q-this._tileZoom)>1){this._setView(v,Q);return}for(var ui=_e.min.y;ui<=_e.max.y;ui++)for(var As=_e.min.x;As<=_e.max.x;As++){var Ma=new oe(As,ui);if(Ma.z=this._tileZoom,!!this._isValidTile(Ma)){var Co=this._tiles[this._tileCoordsToKey(Ma)];Co?Co.current=!0:kt.push(Ma)}}if(kt.sort(function(Zs,ca){return Zs.distanceTo(Ke)-ca.distanceTo(Ke)}),kt.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var il=document.createDocumentFragment();for(As=0;As<kt.length;As++)this._addTile(kt[As],il);this._level.el.appendChild(il)}}}},_isValidTile:function(v){var S=this._map.options.crs;if(!S.infinite){var Q=this._globalTileRange;if(!S.wrapLng&&(v.x<Q.min.x||v.x>Q.max.x)||!S.wrapLat&&(v.y<Q.min.y||v.y>Q.max.y))return!1}if(!this.options.bounds)return!0;var le=this._tileCoordsToBounds(v);return Re(this.options.bounds).overlaps(le)},_keyToBounds:function(v){return this._tileCoordsToBounds(this._keyToTileCoords(v))},_tileCoordsToNwSe:function(v){var S=this._map,Q=this.getTileSize(),le=v.scaleBy(Q),_e=le.add(Q),Ke=S.unproject(le,v.z),kt=S.unproject(_e,v.z);return[Ke,kt]},_tileCoordsToBounds:function(v){var S=this._tileCoordsToNwSe(v),Q=new Pe(S[0],S[1]);return this.options.noWrap||(Q=this._map.wrapLatLngBounds(Q)),Q},_tileCoordsToKey:function(v){return v.x+":"+v.y+":"+v.z},_keyToTileCoords:function(v){var S=v.split(":"),Q=new oe(+S[0],+S[1]);return Q.z=+S[2],Q},_removeTile:function(v){var S=this._tiles[v];S&&(ks(S.el),delete this._tiles[v],this.fire("tileunload",{tile:S.el,coords:this._keyToTileCoords(v)}))},_initTile:function(v){Zn(v,"leaflet-tile");var S=this.getTileSize();v.style.width=S.x+"px",v.style.height=S.y+"px",v.onselectstart=f,v.onmousemove=f,Nn.ielt9&&this.options.opacity<1&&Hi(v,this.options.opacity)},_addTile:function(v,S){var Q=this._getTilePos(v),le=this._tileCoordsToKey(v),_e=this.createTile(this._wrapCoords(v),o(this._tileReady,this,v));this._initTile(_e),this.createTile.length<2&&J(o(this._tileReady,this,v,null,_e)),ms(_e,Q),this._tiles[le]={el:_e,coords:v,current:!0},S.appendChild(_e),this.fire("tileloadstart",{tile:_e,coords:v})},_tileReady:function(v,S,Q){S&&this.fire("tileerror",{error:S,tile:Q,coords:v});var le=this._tileCoordsToKey(v);Q=this._tiles[le],Q&&(Q.loaded=+new Date,this._map._fadeAnimated?(Hi(Q.el,0),de(this._fadeFrame),this._fadeFrame=J(this._updateOpacity,this)):(Q.active=!0,this._pruneTiles()),S||(Zn(Q.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:Q.el,coords:v})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Nn.ielt9||!this._map._fadeAnimated?J(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(v){return v.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(v){var S=new oe(this._wrapX?d(v.x,this._wrapX):v.x,this._wrapY?d(v.y,this._wrapY):v.y);return S.z=v.z,S},_pxBoundsToTileRange:function(v){var S=this.getTileSize();return new be(v.min.unscaleBy(S).floor(),v.max.unscaleBy(S).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var v in this._tiles)if(!this._tiles[v].loaded)return!1;return!0}});function wd(v){return new pc(v)}var Kl=pc.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(v,S){this._url=v,S=y(this,S),S.detectRetina&&Nn.retina&&S.maxZoom>0?(S.tileSize=Math.floor(S.tileSize/2),S.zoomReverse?(S.zoomOffset--,S.minZoom=Math.min(S.maxZoom,S.minZoom+1)):(S.zoomOffset++,S.maxZoom=Math.max(S.minZoom,S.maxZoom-1)),S.minZoom=Math.max(0,S.minZoom)):S.zoomReverse?S.minZoom=Math.min(S.maxZoom,S.minZoom):S.maxZoom=Math.max(S.minZoom,S.maxZoom),typeof S.subdomains=="string"&&(S.subdomains=S.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(v,S){return this._url===v&&S===void 0&&(S=!0),this._url=v,S||this.redraw(),this},createTile:function(v,S){var Q=document.createElement("img");return me(Q,"load",o(this._tileOnLoad,this,S,Q)),me(Q,"error",o(this._tileOnError,this,S,Q)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(Q.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(Q.referrerPolicy=this.options.referrerPolicy),Q.alt="",Q.src=this.getTileUrl(v),Q},getTileUrl:function(v){var S={r:Nn.retina?"@2x":"",s:this._getSubdomain(v),x:v.x,y:v.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var Q=this._globalTileRange.max.y-v.y;this.options.tms&&(S.y=Q),S["-y"]=Q}return _(this._url,i(S,this.options))},_tileOnLoad:function(v,S){Nn.ielt9?setTimeout(o(v,this,null,S),0):v(null,S)},_tileOnError:function(v,S,Q){var le=this.options.errorTileUrl;le&&S.getAttribute("src")!==le&&(S.src=le),v(Q,S)},_onTileRemove:function(v){v.tile.onload=null},_getZoomForUrl:function(){var v=this._tileZoom,S=this.options.maxZoom,Q=this.options.zoomReverse,le=this.options.zoomOffset;return Q&&(v=S-v),v+le},_getSubdomain:function(v){var S=Math.abs(v.x+v.y)%this.options.subdomains.length;return this.options.subdomains[S]},_abortLoading:function(){var v,S;for(v in this._tiles)if(this._tiles[v].coords.z!==this._tileZoom&&(S=this._tiles[v].el,S.onload=f,S.onerror=f,!S.complete)){S.src=C;var Q=this._tiles[v].coords;ks(S),delete this._tiles[v],this.fire("tileabort",{tile:S,coords:Q})}},_removeTile:function(v){var S=this._tiles[v];if(S)return S.el.setAttribute("src",C),pc.prototype._removeTile.call(this,v)},_tileReady:function(v,S,Q){if(!(!this._map||Q&&Q.getAttribute("src")===C))return pc.prototype._tileReady.call(this,v,S,Q)}});function Gl(v,S){return new Kl(v,S)}var Eu=Kl.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(v,S){this._url=v;var Q=i({},this.defaultWmsParams);for(var le in S)le in this.options||(Q[le]=S[le]);S=y(this,S);var _e=S.detectRetina&&Nn.retina?2:1,Ke=this.getTileSize();Q.width=Ke.x*_e,Q.height=Ke.y*_e,this.wmsParams=Q},onAdd:function(v){this._crs=this.options.crs||v.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var S=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[S]=this._crs.code,Kl.prototype.onAdd.call(this,v)},getTileUrl:function(v){var S=this._tileCoordsToNwSe(v),Q=this._crs,le=ue(Q.project(S[0]),Q.project(S[1])),_e=le.min,Ke=le.max,kt=(this._wmsVersion>=1.3&&this._crs===Ni?[_e.y,_e.x,Ke.y,Ke.x]:[_e.x,_e.y,Ke.x,Ke.y]).join(","),er=Kl.prototype.getTileUrl.call(this,v);return er+x(this.wmsParams,er,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+kt},setParams:function(v,S){return i(this.wmsParams,v),S||this.redraw(),this}});function Wl(v,S){return new Eu(v,S)}Kl.WMS=Eu,Gl.wms=Wl;var Io=zn.extend({options:{padding:.1},initialize:function(v){y(this,v),u(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Zn(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var v={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(v.zoomanim=this._onAnimZoom),v},_onAnimZoom:function(v){this._updateTransform(v.center,v.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(v,S){var Q=this._map.getZoomScale(S,this._zoom),le=this._map.getSize().multiplyBy(.5+this.options.padding),_e=this._map.project(this._center,S),Ke=le.multiplyBy(-Q).add(_e).subtract(this._map._getNewPixelOrigin(v,S));Nn.any3d?Xs(this._container,Ke,Q):ms(this._container,Ke)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var v in this._layers)this._layers[v]._reset()},_onZoomEnd:function(){for(var v in this._layers)this._layers[v]._project()},_updatePaths:function(){for(var v in this._layers)this._layers[v]._update()},_update:function(){var v=this.options.padding,S=this._map.getSize(),Q=this._map.containerPointToLayerPoint(S.multiplyBy(-v)).round();this._bounds=new be(Q,Q.add(S.multiplyBy(1+v*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),vl=Io.extend({options:{tolerance:0},getEvents:function(){var v=Io.prototype.getEvents.call(this);return v.viewprereset=this._onViewPreReset,v},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Io.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var v=this._container=document.createElement("canvas");me(v,"mousemove",this._onMouseMove,this),me(v,"click dblclick mousedown mouseup contextmenu",this._onClick,this),me(v,"mouseout",this._handleMouseOut,this),v._leaflet_disable_events=!0,this._ctx=v.getContext("2d")},_destroyContainer:function(){de(this._redrawRequest),delete this._ctx,ks(this._container),Qe(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var v;this._redrawBounds=null;for(var S in this._layers)v=this._layers[S],v._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Io.prototype._update.call(this);var v=this._bounds,S=this._container,Q=v.getSize(),le=Nn.retina?2:1;ms(S,v.min),S.width=le*Q.x,S.height=le*Q.y,S.style.width=Q.x+"px",S.style.height=Q.y+"px",Nn.retina&&this._ctx.scale(2,2),this._ctx.translate(-v.min.x,-v.min.y),this.fire("update")}},_reset:function(){Io.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(v){this._updateDashArray(v),this._layers[u(v)]=v;var S=v._order={layer:v,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=S),this._drawLast=S,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(v){this._requestRedraw(v)},_removePath:function(v){var S=v._order,Q=S.next,le=S.prev;Q?Q.prev=le:this._drawLast=le,le?le.next=Q:this._drawFirst=Q,delete v._order,delete this._layers[u(v)],this._requestRedraw(v)},_updatePath:function(v){this._extendRedrawBounds(v),v._project(),v._update(),this._requestRedraw(v)},_updateStyle:function(v){this._updateDashArray(v),this._requestRedraw(v)},_updateDashArray:function(v){if(typeof v.options.dashArray=="string"){var S=v.options.dashArray.split(/[, ]+/),Q=[],le,_e;for(_e=0;_e<S.length;_e++){if(le=Number(S[_e]),isNaN(le))return;Q.push(le)}v.options._dashArray=Q}else v.options._dashArray=v.options.dashArray},_requestRedraw:function(v){this._map&&(this._extendRedrawBounds(v),this._redrawRequest=this._redrawRequest||J(this._redraw,this))},_extendRedrawBounds:function(v){if(v._pxBounds){var S=(v.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new be,this._redrawBounds.extend(v._pxBounds.min.subtract([S,S])),this._redrawBounds.extend(v._pxBounds.max.add([S,S]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var v=this._redrawBounds;if(v){var S=v.getSize();this._ctx.clearRect(v.min.x,v.min.y,S.x,S.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var v,S=this._redrawBounds;if(this._ctx.save(),S){var Q=S.getSize();this._ctx.beginPath(),this._ctx.rect(S.min.x,S.min.y,Q.x,Q.y),this._ctx.clip()}this._drawing=!0;for(var le=this._drawFirst;le;le=le.next)v=le.layer,(!S||v._pxBounds&&v._pxBounds.intersects(S))&&v._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(v,S){if(this._drawing){var Q,le,_e,Ke,kt=v._parts,er=kt.length,Er=this._ctx;if(er){for(Er.beginPath(),Q=0;Q<er;Q++){for(le=0,_e=kt[Q].length;le<_e;le++)Ke=kt[Q][le],Er[le?"lineTo":"moveTo"](Ke.x,Ke.y);S&&Er.closePath()}this._fillStroke(Er,v)}}},_updateCircle:function(v){if(!(!this._drawing||v._empty())){var S=v._point,Q=this._ctx,le=Math.max(Math.round(v._radius),1),_e=(Math.max(Math.round(v._radiusY),1)||le)/le;_e!==1&&(Q.save(),Q.scale(1,_e)),Q.beginPath(),Q.arc(S.x,S.y/_e,le,0,Math.PI*2,!1),_e!==1&&Q.restore(),this._fillStroke(Q,v)}},_fillStroke:function(v,S){var Q=S.options;Q.fill&&(v.globalAlpha=Q.fillOpacity,v.fillStyle=Q.fillColor||Q.color,v.fill(Q.fillRule||"evenodd")),Q.stroke&&Q.weight!==0&&(v.setLineDash&&v.setLineDash(S.options&&S.options._dashArray||[]),v.globalAlpha=Q.opacity,v.lineWidth=Q.weight,v.strokeStyle=Q.color,v.lineCap=Q.lineCap,v.lineJoin=Q.lineJoin,v.stroke())},_onClick:function(v){for(var S=this._map.mouseEventToLayerPoint(v),Q,le,_e=this._drawFirst;_e;_e=_e.next)Q=_e.layer,Q.options.interactive&&Q._containsPoint(S)&&(!(v.type==="click"||v.type==="preclick")||!this._map._draggableMoved(Q))&&(le=Q);this._fireEvent(le?[le]:!1,v)},_onMouseMove:function(v){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var S=this._map.mouseEventToLayerPoint(v);this._handleMouseHover(v,S)}},_handleMouseOut:function(v){var S=this._hoveredLayer;S&&(fs(this._container,"leaflet-interactive"),this._fireEvent([S],v,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(v,S){if(!this._mouseHoverThrottled){for(var Q,le,_e=this._drawFirst;_e;_e=_e.next)Q=_e.layer,Q.options.interactive&&Q._containsPoint(S)&&(le=Q);le!==this._hoveredLayer&&(this._handleMouseOut(v),le&&(Zn(this._container,"leaflet-interactive"),this._fireEvent([le],v,"mouseover"),this._hoveredLayer=le)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,v),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(v,S,Q){this._map._fireDOMEvent(S,Q||S.type,v)},_bringToFront:function(v){var S=v._order;if(S){var Q=S.next,le=S.prev;if(Q)Q.prev=le;else return;le?le.next=Q:Q&&(this._drawFirst=Q),S.prev=this._drawLast,this._drawLast.next=S,S.next=null,this._drawLast=S,this._requestRedraw(v)}},_bringToBack:function(v){var S=v._order;if(S){var Q=S.next,le=S.prev;if(le)le.next=Q;else return;Q?Q.prev=le:le&&(this._drawLast=le),S.prev=null,S.next=this._drawFirst,this._drawFirst.prev=S,this._drawFirst=S,this._requestRedraw(v)}}});function iu(v){return Nn.canvas?new vl(v):null}var gc=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(v){return document.createElement("<lvml:"+v+' class="lvml">')}}catch{}return function(v){return document.createElement("<"+v+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),zd={_initContainer:function(){this._container=ci("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Io.prototype._update.call(this),this.fire("update"))},_initPath:function(v){var S=v._container=gc("shape");Zn(S,"leaflet-vml-shape "+(this.options.className||"")),S.coordsize="1 1",v._path=gc("path"),S.appendChild(v._path),this._updateStyle(v),this._layers[u(v)]=v},_addPath:function(v){var S=v._container;this._container.appendChild(S),v.options.interactive&&v.addInteractiveTarget(S)},_removePath:function(v){var S=v._container;ks(S),v.removeInteractiveTarget(S),delete this._layers[u(v)]},_updateStyle:function(v){var S=v._stroke,Q=v._fill,le=v.options,_e=v._container;_e.stroked=!!le.stroke,_e.filled=!!le.fill,le.stroke?(S||(S=v._stroke=gc("stroke")),_e.appendChild(S),S.weight=le.weight+"px",S.color=le.color,S.opacity=le.opacity,le.dashArray?S.dashStyle=E(le.dashArray)?le.dashArray.join(" "):le.dashArray.replace(/( *, *)/g," "):S.dashStyle="",S.endcap=le.lineCap.replace("butt","flat"),S.joinstyle=le.lineJoin):S&&(_e.removeChild(S),v._stroke=null),le.fill?(Q||(Q=v._fill=gc("fill")),_e.appendChild(Q),Q.color=le.fillColor||le.color,Q.opacity=le.fillOpacity):Q&&(_e.removeChild(Q),v._fill=null)},_updateCircle:function(v){var S=v._point.round(),Q=Math.round(v._radius),le=Math.round(v._radiusY||Q);this._setPath(v,v._empty()?"M0 0":"AL "+S.x+","+S.y+" "+Q+","+le+" 0,"+65535*360)},_setPath:function(v,S){v._path.v=S},_bringToFront:function(v){Va(v._container)},_bringToBack:function(v){Ca(v._container)}},rc=Nn.vml?gc:Ct,Yu=Io.extend({_initContainer:function(){this._container=rc("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=rc("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ks(this._container),Qe(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Io.prototype._update.call(this);var v=this._bounds,S=v.getSize(),Q=this._container;(!this._svgSize||!this._svgSize.equals(S))&&(this._svgSize=S,Q.setAttribute("width",S.x),Q.setAttribute("height",S.y)),ms(Q,v.min),Q.setAttribute("viewBox",[v.min.x,v.min.y,S.x,S.y].join(" ")),this.fire("update")}},_initPath:function(v){var S=v._path=rc("path");v.options.className&&Zn(S,v.options.className),v.options.interactive&&Zn(S,"leaflet-interactive"),this._updateStyle(v),this._layers[u(v)]=v},_addPath:function(v){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(v._path),v.addInteractiveTarget(v._path)},_removePath:function(v){ks(v._path),v.removeInteractiveTarget(v._path),delete this._layers[u(v)]},_updatePath:function(v){v._project(),v._update()},_updateStyle:function(v){var S=v._path,Q=v.options;S&&(Q.stroke?(S.setAttribute("stroke",Q.color),S.setAttribute("stroke-opacity",Q.opacity),S.setAttribute("stroke-width",Q.weight),S.setAttribute("stroke-linecap",Q.lineCap),S.setAttribute("stroke-linejoin",Q.lineJoin),Q.dashArray?S.setAttribute("stroke-dasharray",Q.dashArray):S.removeAttribute("stroke-dasharray"),Q.dashOffset?S.setAttribute("stroke-dashoffset",Q.dashOffset):S.removeAttribute("stroke-dashoffset")):S.setAttribute("stroke","none"),Q.fill?(S.setAttribute("fill",Q.fillColor||Q.color),S.setAttribute("fill-opacity",Q.fillOpacity),S.setAttribute("fill-rule",Q.fillRule||"evenodd")):S.setAttribute("fill","none"))},_updatePoly:function(v,S){this._setPath(v,ke(v._parts,S))},_updateCircle:function(v){var S=v._point,Q=Math.max(Math.round(v._radius),1),le=Math.max(Math.round(v._radiusY),1)||Q,_e="a"+Q+","+le+" 0 1,0 ",Ke=v._empty()?"M0 0":"M"+(S.x-Q)+","+S.y+_e+Q*2+",0 "+_e+-Q*2+",0 ";this._setPath(v,Ke)},_setPath:function(v,S){v._path.setAttribute("d",S)},_bringToFront:function(v){Va(v._path)},_bringToBack:function(v){Ca(v._path)}});Nn.vml&&Yu.include(zd);function _d(v){return Nn.svg||Nn.vml?new Yu(v):null}ct.include({getRenderer:function(v){var S=v.options.renderer||this._getPaneRenderer(v.options.pane)||this.options.renderer||this._renderer;return S||(S=this._renderer=this._createRenderer()),this.hasLayer(S)||this.addLayer(S),S},_getPaneRenderer:function(v){if(v==="overlayPane"||v===void 0)return!1;var S=this._paneRenderers[v];return S===void 0&&(S=this._createRenderer({pane:v}),this._paneRenderers[v]=S),S},_createRenderer:function(v){return this.options.preferCanvas&&iu(v)||_d(v)}});var yl=ai.extend({initialize:function(v,S){ai.prototype.initialize.call(this,this._boundsToLatLngs(v),S)},setBounds:function(v){return this.setLatLngs(this._boundsToLatLngs(v))},_boundsToLatLngs:function(v){return v=Re(v),[v.getSouthWest(),v.getNorthWest(),v.getNorthEast(),v.getSouthEast()]}});function oh(v,S){return new yl(v,S)}Yu.create=rc,Yu.pointsToPath=ke,Ii.geometryToLayer=_n,Ii.coordsToLatLng=_u,Ii.coordsToLatLngs=so,Ii.latLngToCoords=Ko,Ii.latLngsToCoords=ec,Ii.getFeature=wi,Ii.asFeature=Da,ct.mergeOptions({boxZoom:!0});var Bl=vt.extend({initialize:function(v){this._map=v,this._container=v._container,this._pane=v._panes.overlayPane,this._resetStateTimeout=0,v.on("unload",this._destroy,this)},addHooks:function(){me(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Qe(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ks(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(v){if(!v.shiftKey||v.which!==1&&v.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Ka(),io(),this._startPoint=this._map.mouseEventToContainerPoint(v),me(document,{contextmenu:fe,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(v){this._moved||(this._moved=!0,this._box=ci("div","leaflet-zoom-box",this._container),Zn(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(v);var S=new be(this._point,this._startPoint),Q=S.getSize();ms(this._box,S.min),this._box.style.width=Q.x+"px",this._box.style.height=Q.y+"px"},_finish:function(){this._moved&&(ks(this._box),fs(this._container,"leaflet-crosshair")),Vs(),Vo(),Qe(document,{contextmenu:fe,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(v){if(!(v.which!==1&&v.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var S=new Pe(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(S).fire("boxzoomend",{boxZoomBounds:S})}},_onKeyDown:function(v){v.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});ct.addInitHook("addHandler","boxZoom",Bl),ct.mergeOptions({doubleClickZoom:!0});var Fi=vt.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(v){var S=this._map,Q=S.getZoom(),le=S.options.zoomDelta,_e=v.originalEvent.shiftKey?Q-le:Q+le;S.options.doubleClickZoom==="center"?S.setZoom(_e):S.setZoomAround(v.containerPoint,_e)}});ct.addInitHook("addHandler","doubleClickZoom",Fi),ct.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var vc=vt.extend({addHooks:function(){if(!this._draggable){var v=this._map;this._draggable=new vr(v._mapPane,v._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),v.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),v.on("zoomend",this._onZoomEnd,this),v.whenReady(this._onZoomEnd,this))}Zn(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){fs(this._map._container,"leaflet-grab"),fs(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var v=this._map;if(v._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var S=Re(this._map.options.maxBounds);this._offsetLimit=ue(this._map.latLngToContainerPoint(S.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(S.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;v.fire("movestart").fire("dragstart"),v.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(v){if(this._map.options.inertia){var S=this._lastTime=+new Date,Q=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(Q),this._times.push(S),this._prunePositions(S)}this._map.fire("move",v).fire("drag",v)},_prunePositions:function(v){for(;this._positions.length>1&&v-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var v=this._map.getSize().divideBy(2),S=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=S.subtract(v).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(v,S){return v-(v-S)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var v=this._draggable._newPos.subtract(this._draggable._startPos),S=this._offsetLimit;v.x<S.min.x&&(v.x=this._viscousLimit(v.x,S.min.x)),v.y<S.min.y&&(v.y=this._viscousLimit(v.y,S.min.y)),v.x>S.max.x&&(v.x=this._viscousLimit(v.x,S.max.x)),v.y>S.max.y&&(v.y=this._viscousLimit(v.y,S.max.y)),this._draggable._newPos=this._draggable._startPos.add(v)}},_onPreDragWrap:function(){var v=this._worldWidth,S=Math.round(v/2),Q=this._initialWorldOffset,le=this._draggable._newPos.x,_e=(le-S+Q)%v+S-Q,Ke=(le+S+Q)%v-S-Q,kt=Math.abs(_e+Q)<Math.abs(Ke+Q)?_e:Ke;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=kt},_onDragEnd:function(v){var S=this._map,Q=S.options,le=!Q.inertia||v.noInertia||this._times.length<2;if(S.fire("dragend",v),le)S.fire("moveend");else{this._prunePositions(+new Date);var _e=this._lastPos.subtract(this._positions[0]),Ke=(this._lastTime-this._times[0])/1e3,kt=Q.easeLinearity,er=_e.multiplyBy(kt/Ke),Er=er.distanceTo([0,0]),Wr=Math.min(Q.inertiaMaxSpeed,Er),bn=er.multiplyBy(Wr/Er),ui=Wr/(Q.inertiaDeceleration*kt),As=bn.multiplyBy(-ui/2).round();!As.x&&!As.y?S.fire("moveend"):(As=S._limitOffset(As,S.options.maxBounds),J(function(){S.panBy(As,{duration:ui,easeLinearity:kt,noMoveStart:!0,animate:!0})}))}}});ct.addInitHook("addHandler","dragging",vc),ct.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Qc=vt.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(v){this._map=v,this._setPanDelta(v.options.keyboardPanDelta),this._setZoomDelta(v.options.zoomDelta)},addHooks:function(){var v=this._map._container;v.tabIndex<=0&&(v.tabIndex="0"),me(v,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Qe(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var v=document.body,S=document.documentElement,Q=v.scrollTop||S.scrollTop,le=v.scrollLeft||S.scrollLeft;this._map._container.focus(),window.scrollTo(le,Q)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(v){var S=this._panKeys={},Q=this.keyCodes,le,_e;for(le=0,_e=Q.left.length;le<_e;le++)S[Q.left[le]]=[-1*v,0];for(le=0,_e=Q.right.length;le<_e;le++)S[Q.right[le]]=[v,0];for(le=0,_e=Q.down.length;le<_e;le++)S[Q.down[le]]=[0,v];for(le=0,_e=Q.up.length;le<_e;le++)S[Q.up[le]]=[0,-1*v]},_setZoomDelta:function(v){var S=this._zoomKeys={},Q=this.keyCodes,le,_e;for(le=0,_e=Q.zoomIn.length;le<_e;le++)S[Q.zoomIn[le]]=v;for(le=0,_e=Q.zoomOut.length;le<_e;le++)S[Q.zoomOut[le]]=-v},_addHooks:function(){me(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Qe(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(v){if(!(v.altKey||v.ctrlKey||v.metaKey)){var S=v.keyCode,Q=this._map,le;if(S in this._panKeys){if(!Q._panAnim||!Q._panAnim._inProgress)if(le=this._panKeys[S],v.shiftKey&&(le=Ce(le).multiplyBy(3)),Q.options.maxBounds&&(le=Q._limitOffset(Ce(le),Q.options.maxBounds)),Q.options.worldCopyJump){var _e=Q.wrapLatLng(Q.unproject(Q.project(Q.getCenter()).add(le)));Q.panTo(_e)}else Q.panBy(le)}else if(S in this._zoomKeys)Q.setZoom(Q.getZoom()+(v.shiftKey?3:1)*this._zoomKeys[S]);else if(S===27&&Q._popup&&Q._popup.options.closeOnEscapeKey)Q.closePopup();else return;fe(v)}}});ct.addInitHook("addHandler","keyboard",Qc),ct.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var zc=vt.extend({addHooks:function(){me(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Qe(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(v){var S=Ze(v),Q=this._map.options.wheelDebounceTime;this._delta+=S,this._lastMousePos=this._map.mouseEventToContainerPoint(v),this._startTime||(this._startTime=+new Date);var le=Math.max(Q-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),le),fe(v)},_performZoom:function(){var v=this._map,S=v.getZoom(),Q=this._map.options.zoomSnap||0;v._stop();var le=this._delta/(this._map.options.wheelPxPerZoomLevel*4),_e=4*Math.log(2/(1+Math.exp(-Math.abs(le))))/Math.LN2,Ke=Q?Math.ceil(_e/Q)*Q:_e,kt=v._limitZoom(S+(this._delta>0?Ke:-Ke))-S;this._delta=0,this._startTime=null,kt&&(v.options.scrollWheelZoom==="center"?v.setZoom(S+kt):v.setZoomAround(this._lastMousePos,S+kt))}});ct.addInitHook("addHandler","scrollWheelZoom",zc);var qu=600;ct.mergeOptions({tapHold:Nn.touchNative&&Nn.safari&&Nn.mobile,tapTolerance:15});var yc=vt.extend({addHooks:function(){me(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Qe(this._map._container,"touchstart",this._onDown,this)},_onDown:function(v){if(clearTimeout(this._holdTimeout),v.touches.length===1){var S=v.touches[0];this._startPos=this._newPos=new oe(S.clientX,S.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(me(document,"touchend",ye),me(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",S))},this),qu),me(document,"touchend touchcancel contextmenu",this._cancel,this),me(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function v(){Qe(document,"touchend",ye),Qe(document,"touchend touchcancel",v)},_cancel:function(){clearTimeout(this._holdTimeout),Qe(document,"touchend touchcancel contextmenu",this._cancel,this),Qe(document,"touchmove",this._onMove,this)},_onMove:function(v){var S=v.touches[0];this._newPos=new oe(S.clientX,S.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(v,S){var Q=new MouseEvent(v,{bubbles:!0,cancelable:!0,view:window,screenX:S.screenX,screenY:S.screenY,clientX:S.clientX,clientY:S.clientY});Q._simulated=!0,S.target.dispatchEvent(Q)}});ct.addInitHook("addHandler","tapHold",yc),ct.mergeOptions({touchZoom:Nn.touch,bounceAtZoomLimits:!0});var Bo=vt.extend({addHooks:function(){Zn(this._map._container,"leaflet-touch-zoom"),me(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){fs(this._map._container,"leaflet-touch-zoom"),Qe(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(v){var S=this._map;if(!(!v.touches||v.touches.length!==2||S._animatingZoom||this._zooming)){var Q=S.mouseEventToContainerPoint(v.touches[0]),le=S.mouseEventToContainerPoint(v.touches[1]);this._centerPoint=S.getSize()._divideBy(2),this._startLatLng=S.containerPointToLatLng(this._centerPoint),S.options.touchZoom!=="center"&&(this._pinchStartLatLng=S.containerPointToLatLng(Q.add(le)._divideBy(2))),this._startDist=Q.distanceTo(le),this._startZoom=S.getZoom(),this._moved=!1,this._zooming=!0,S._stop(),me(document,"touchmove",this._onTouchMove,this),me(document,"touchend touchcancel",this._onTouchEnd,this),ye(v)}},_onTouchMove:function(v){if(!(!v.touches||v.touches.length!==2||!this._zooming)){var S=this._map,Q=S.mouseEventToContainerPoint(v.touches[0]),le=S.mouseEventToContainerPoint(v.touches[1]),_e=Q.distanceTo(le)/this._startDist;if(this._zoom=S.getScaleZoom(_e,this._startZoom),!S.options.bounceAtZoomLimits&&(this._zoom<S.getMinZoom()&&_e<1||this._zoom>S.getMaxZoom()&&_e>1)&&(this._zoom=S._limitZoom(this._zoom)),S.options.touchZoom==="center"){if(this._center=this._startLatLng,_e===1)return}else{var Ke=Q._add(le)._divideBy(2)._subtract(this._centerPoint);if(_e===1&&Ke.x===0&&Ke.y===0)return;this._center=S.unproject(S.project(this._pinchStartLatLng,this._zoom).subtract(Ke),this._zoom)}this._moved||(S._moveStart(!0,!1),this._moved=!0),de(this._animRequest);var kt=o(S._move,S,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=J(kt,this,!0),ye(v)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,de(this._animRequest),Qe(document,"touchmove",this._onTouchMove,this),Qe(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});ct.addInitHook("addHandler","touchZoom",Bo),ct.BoxZoom=Bl,ct.DoubleClickZoom=Fi,ct.Drag=vc,ct.Keyboard=Qc,ct.ScrollWheelZoom=zc,ct.TapHold=yc,ct.TouchZoom=Bo,r.Bounds=be,r.Browser=Nn,r.CRS=ft,r.Canvas=vl,r.Circle=Na,r.CircleMarker=Zi,r.Class=we,r.Control=it,r.DivIcon=tc,r.DivOverlay=Ga,r.DomEvent=je,r.DomUtil=ie,r.Draggable=vr,r.Evented=ae,r.FeatureGroup=Di,r.GeoJSON=Ii,r.GridLayer=pc,r.Handler=vt,r.Icon=is,r.ImageOverlay=fa,r.LatLng=He,r.LatLngBounds=Pe,r.Layer=zn,r.LayerGroup=Qn,r.LineUtil=yt,r.Map=ct,r.Marker=Yn,r.Mixin=Rt,r.Path=ss,r.Point=oe,r.PolyUtil=Or,r.Polygon=ai,r.Polyline=Ys,r.Popup=Ql,r.PosAnimation=St,r.Projection=Cn,r.Rectangle=yl,r.Renderer=Io,r.SVG=Yu,r.SVGOverlay=To,r.TileLayer=Kl,r.Tooltip=Il,r.Transformation=et,r.Util=xe,r.VideoOverlay=Ja,r.bind=o,r.bounds=ue,r.canvas=iu,r.circle=bi,r.circleMarker=ys,r.control=Ot,r.divIcon=Vl,r.extend=i,r.featureGroup=Wn,r.geoJSON=$l,r.geoJson=Hl,r.gridLayer=wd,r.icon=Si,r.imageOverlay=yo,r.latLng=Fe,r.latLngBounds=Re,r.layerGroup=va,r.map=Nt,r.marker=Gi,r.point=Ce,r.polygon=ha,r.polyline=Qi,r.popup=zl,r.rectangle=oh,r.setOptions=y,r.stamp=u,r.svg=_d,r.svgOverlay=Ac,r.tileLayer=Gl,r.tooltip=bd,r.transformation=Ue,r.version=n,r.videoOverlay=Hc;var su=window.L;r.noConflict=function(){return window.L=su,this},window.L=r}))})(Lw,Lw.exports)),Lw.exports}var yE=OFe();const Lne=om(yE);function xF(t,e,r){return Object.freeze({instance:t,context:e,container:r})}function bF(t,e){return e==null?function(n,i){const a=T.useRef(void 0);return a.current||(a.current=t(n,i)),a}:function(n,i){const a=T.useRef(void 0);a.current||(a.current=t(n,i));const o=T.useRef(n),{instance:c}=a.current;return T.useEffect(function(){o.current!==n&&(e(c,n,o.current),o.current=n)},[c,n,e]),a}}function Ine(t,e){T.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){e.layerContainer?.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function Bne(t){return function(r){const n=vF(),i=t(yF(r,n),n);return NFe(n.map,r.attribution),kne(i.current,r.eventHandlers),Ine(i.current,n),i}}function RFe(t,e){const r=T.useRef(void 0);T.useEffect(function(){if(e.pathOptions!==r.current){const i=e.pathOptions??{};t.instance.setStyle(i),r.current=i}},[t,e])}function DFe(t){return function(r){const n=vF(),i=t(yF(r,n),n);return kne(i.current,r.eventHandlers),Ine(i.current,n),RFe(i.current,r),i}}function MFe(t,e){const r=bF(t,e),n=Bne(r);return Nne(n)}function FFe(t,e){const r=bF(t,e),n=DFe(r);return Nne(n)}function UFe(t,e){const r=bF(t,e),n=Bne(r);return BFe(n)}function $Fe(t,e,r){const{opacity:n,zIndex:i}=e;n!=null&&n!==r.opacity&&t.setOpacity(n),i!=null&&i!==r.zIndex&&t.setZIndex(i)}function Pne(){return vF().map}function HFe(t){const e=Pne();return T.useEffect(function(){return e.on(t),function(){e.off(t)}},[e,t]),e}const QFe=FFe(function({center:e,children:r,...n},i){const a=new yE.Circle(e,n);return xF(a,Cne(i,{overlayContainer:a}))},kFe);function zFe({bounds:t,boundsOptions:e,center:r,children:n,className:i,id:a,placeholder:o,style:c,whenReady:u,zoom:l,...d},f){const[m]=T.useState({className:i,id:a,style:c}),[p,g]=T.useState(null),y=T.useRef(void 0);T.useImperativeHandle(f,()=>p?.map??null,[p]);const x=T.useCallback(_=>{if(_!==null&&!y.current){const E=new yE.Map(_,d);y.current=E,r!=null&&l!=null?E.setView(r,l):t!=null&&E.fitBounds(t,e),u!=null&&E.whenReady(u),g(IFe(E))}},[]);T.useEffect(()=>()=>{p?.map.remove()},[p]);const w=p?So.createElement(gF,{value:p},n):o??null;return So.createElement("div",{...m,ref:x},w)}const VFe=T.forwardRef(zFe),KFe=MFe(function({position:e,...r},n){const i=new yE.Marker(e,r);return xF(i,Cne(n,{overlayContainer:i}))},function(e,r,n){r.position!==n.position&&e.setLatLng(r.position),r.icon!=null&&r.icon!==n.icon&&e.setIcon(r.icon),r.zIndexOffset!=null&&r.zIndexOffset!==n.zIndexOffset&&e.setZIndexOffset(r.zIndexOffset),r.opacity!=null&&r.opacity!==n.opacity&&e.setOpacity(r.opacity),e.dragging!=null&&r.draggable!==n.draggable&&(r.draggable===!0?e.dragging.enable():e.dragging.disable())}),GFe=UFe(function({url:e,...r},n){const i=new yE.TileLayer(e,yF(r,n));return xF(i,n)},function(e,r,n){$Fe(e,r,n);const{url:i}=r;i!=null&&i!==n.url&&e.setUrl(i)});delete Lne.Icon.Default.prototype._getIconUrl;Lne.Icon.Default.mergeOptions({iconRetinaUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png",iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png"});function WFe({center:t,zoom:e}){const r=Pne();return T.useEffect(()=>{t&&r.setView(t,e)},[t,e,r]),null}function YFe({onMapClick:t}){return HFe({click:e=>{t&&t(e.latlng)}}),null}function qFe({latitude:t,longitude:e,radius:r=50,address:n="",onLocationChange:i,onRadiusChange:a,className:o=""}){const[c,u]=T.useState(n),[l,d]=T.useState(!1),[f,m]=T.useState(null),[p,g]=T.useState([t||-27.4698,e||153.0251]),[y,x]=T.useState(t&&e?[t,e]:null),[w,_]=T.useState(r),E=async()=>{if(c.trim()){d(!0),m(null);try{const D=await(await fetch(`https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(c)}&format=json&limit=1&countrycodes=au`)).json();if(D.length===0){m("Location not found. Try a more specific address.");return}const U=D[0],G=parseFloat(U.lat),q=parseFloat(U.lon);g([G,q]),x([G,q]),i&&i({latitude:G,longitude:q,address:U.display_name})}catch(I){m("Search failed. Please try again."),console.error("Geocoding error:",I)}finally{d(!1)}}},N=I=>{x([I.lat,I.lng]),i&&i({latitude:I.lat,longitude:I.lng,address:""})},C=I=>{const D=parseInt(I.target.value)||50;_(D),a&&a(D)};return T.useEffect(()=>{t&&e&&(g([t,e]),x([t,e]))},[t,e]),T.useEffect(()=>{_(r||50)},[r]),s.jsxs("div",{className:`space-y-4 ${o}`,children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Search Venue Address"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(IT,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500"}),s.jsx("input",{type:"text",value:c,onChange:I=>u(I.target.value),onKeyDown:I=>I.key==="Enter"&&E(),placeholder:"Enter venue address (e.g., '8 Annerley Rd, Woolloongabba QLD')",className:"w-full pl-10 pr-4 py-2 bg-dark-800 border border-dark-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-red-500"})]}),s.jsx("button",{type:"button",onClick:E,disabled:l||!c.trim(),className:"px-4 py-2 bg-red-500 hover:bg-red-600 disabled:bg-dark-700 disabled:cursor-not-allowed text-white font-medium rounded-lg transition-colors",children:l?"Searching...":"Search"})]}),f&&s.jsx("p",{className:"mt-2 text-sm text-red-500",children:f}),s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Or click on the map to manually place the venue marker"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Geo-Blocking Radius: ",w,"km"]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("input",{type:"range",min:"1",max:"200",step:"1",value:w,onChange:C,className:"flex-1 h-2 bg-dark-700 rounded-lg appearance-none cursor-pointer slider"}),s.jsx("input",{type:"number",min:"1",max:"200",value:w,onChange:C,className:"w-20 px-3 py-2 bg-dark-800 border border-dark-700 rounded-lg text-white text-center focus:outline-none focus:border-red-500"})]}),s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Viewers within this radius will be blocked from purchasing online access"})]}),s.jsxs("div",{className:"relative rounded-lg overflow-hidden border border-dark-700",style:{height:"400px"},children:[s.jsxs(VFe,{center:p,zoom:y?11:10,style:{height:"100%",width:"100%"},className:"z-0",children:[s.jsx(GFe,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),s.jsx(WFe,{center:p,zoom:y?11:10}),s.jsx(YFe,{onMapClick:N}),y&&s.jsxs(s.Fragment,{children:[s.jsx(KFe,{position:y}),s.jsx(QFe,{center:y,radius:(w||50)*1e3,pathOptions:{color:"#e63946",fillColor:"#e63946",fillOpacity:.2,weight:2}})]})]}),!y&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-dark-900/50 pointer-events-none z-10",children:s.jsxs("div",{className:"text-center",children:[s.jsx(md,{className:"w-12 h-12 text-gray-600 mx-auto mb-2"}),s.jsx("p",{className:"text-gray-400",children:"Search for a venue or click on the map"})]})})]}),y&&s.jsxs("div",{className:"p-4 bg-dark-800 rounded-lg border border-dark-700",children:[s.jsx("h4",{className:"text-sm font-medium text-white mb-2",children:"Current Settings"}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Latitude:"}),s.jsx("span",{className:"ml-2 text-white font-mono",children:y[0].toFixed(6)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Longitude:"}),s.jsx("span",{className:"ml-2 text-white font-mono",children:y[1].toFixed(6)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Radius:"}),s.jsxs("span",{className:"ml-2 text-white font-mono",children:[w,"km"]})]})]})]})]})}function XFe({event:t,onStatusUpdate:e,compact:r=!1}){const[n,i]=T.useState(!1),[a,o]=T.useState(!1),[c,u]=T.useState(0),[l,d]=T.useState(0),[f,m]=T.useState(!1);T.useEffect(()=>{if(!t?.id)return;const g=async()=>{try{if(t.is_multi_stream){const x=await QC(t.id);if(u(x?.length||0),m(x&&x.length>0),x&&x.length>0){const w=x.filter(E=>E.mux_stream_id);let _=0;for(const E of w)try{const{data:N,error:C}=await ir.functions.invoke("mux-stream",{body:{action:"stream-status",mux_stream_id:E.mux_stream_id}});!C&&N?.isLive&&_++}catch(N){console.warn("Stream status check failed:",N)}d(_),o(_>0)}}else{const x=t.mux_stream_id||t.mux_live_stream_id;if(m(!!x||!!t.mux_stream_key),x)try{const{data:w,error:_}=await ir.functions.invoke("mux-stream",{body:{action:"stream-status",mux_stream_id:x}});!_&&w&&(o(w.isLive||!1),e&&e(w))}catch(w){console.warn("Single stream status check failed:",w),o(!1)}else o(!1)}}catch(x){console.error("Status check failed:",x)}};g();const y=setInterval(g,3e4);return()=>clearInterval(y)},[t?.id,t?.is_multi_stream,t?.mux_stream_id]);const p=async()=>{i(!0);try{if(t.is_multi_stream){const g=await QC(t.id);if(u(g?.length||0),g&&g.length>0){const y=g.filter(w=>w.mux_stream_id);let x=0;for(const w of y)try{const{data:_,error:E}=await ir.functions.invoke("mux-stream",{body:{action:"stream-status",mux_stream_id:w.mux_stream_id}});!E&&_?.isLive&&x++}catch(_){console.warn("Stream status check failed:",_)}d(x),o(x>0)}}else{const g=t.mux_stream_id||t.mux_live_stream_id;if(g){const{data:y,error:x}=await ir.functions.invoke("mux-stream",{body:{action:"stream-status",mux_stream_id:g}});!x&&y&&(o(y.isLive||!1),e&&e(y))}}}catch(g){console.error("Manual status check failed:",g)}finally{i(!1)}};return!f&&!t?.mux_stream_key?s.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2 py-1 rounded text-xs font-medium bg-gray-500/20 text-gray-400 ${r?"":"mr-2"}`,children:[s.jsx(vfe,{className:"w-3 h-3"}),!r&&"No Stream"]}):t?.is_multi_stream?s.jsxs("div",{className:`inline-flex items-center gap-2 ${r?"":"mr-2"}`,children:[s.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2 py-1 rounded text-xs font-medium ${a?"bg-red-500 text-white":"bg-purple-500/20 text-purple-400"}`,children:[s.jsx(Hb,{className:`w-3 h-3 ${a?"animate-pulse":""}`}),a?`LIVE (${l}/${c})`:`${c} streams`]}),!r&&s.jsx("button",{onClick:p,disabled:n,className:"p-1 text-gray-500 hover:text-white transition-colors disabled:opacity-50",title:"Check stream status",children:s.jsx(Q0,{className:`w-3.5 h-3.5 ${n?"animate-spin":""}`})})]}):s.jsxs("div",{className:`inline-flex items-center gap-2 ${r?"":"mr-2"}`,children:[s.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2 py-1 rounded text-xs font-medium ${a?"bg-red-500 text-white":"bg-yellow-500/20 text-yellow-500"}`,children:[s.jsx(Hb,{className:`w-3 h-3 ${a?"animate-pulse":""}`}),a?"LIVE":"Ready"]}),!r&&s.jsx("button",{onClick:p,disabled:n,className:"p-1 text-gray-500 hover:text-white transition-colors disabled:opacity-50",title:"Check stream status",children:s.jsx(Q0,{className:`w-3.5 h-3.5 ${n?"animate-spin":""}`})})]})}function ZFe(){const[t,e]=T.useState([]),[r,n]=T.useState([]),[i,a]=T.useState({demo_mode:!1}),[o,c]=T.useState(!0),[u,l]=T.useState(!1),[d,f]=T.useState(null),[m,p]=T.useState("events"),[g,y]=T.useState({funnel:[],blockedLocations:[],recentEvents:[]}),[x,w]=T.useState("all"),[_,E]=T.useState([]),[N,C]=T.useState(!1),[I,D]=T.useState("all");T.useEffect(()=>{U()},[]);const U=async()=>{try{const[ae,oe,Ie]=await Promise.all([qre(),eRe(),Xre()]);e(ae||[]),n(oe||[]),a(Ie||{demo_mode:!1}),await G()}catch(ae){console.error("Failed to load data:",ae)}finally{c(!1)}},G=async(ae=null)=>{try{let oe=ir.from("livestream_funnel_summary").select("*");ae&&ae!=="all"&&(oe=oe.eq("event_id",ae));const{data:Ie}=await oe;let Ce=ir.from("livestream_blocked_locations").select("*").limit(50);ae&&ae!=="all"&&(Ce=Ce.eq("event_id",ae));const{data:be}=await Ce;let ue=ir.from("livestream_analytics").select("*").order("created_at",{ascending:!1}).limit(100);ae&&ae!=="all"&&(ue=ue.eq("event_id",ae));const{data:Pe}=await ue;y({funnel:Ie||[],blockedLocations:be||[],recentEvents:Pe||[]})}catch(oe){console.error("Failed to load analytics:",oe)}},q=async()=>{C(!0);try{const{data:ae,error:oe}=await ir.functions.invoke("mux-assets",{body:{action:"list"}});if(oe)throw oe;E(ae?.assets||[])}catch(ae){console.error("Failed to load recordings:",ae)}finally{C(!1)}},J=async ae=>{if(confirm("End this stream? This will finalize the recording."))try{await db(ae,{status:"ended",is_live:!1,ended_at:new Date().toISOString()});const oe=t.find(Ie=>Ie.id===ae);oe?.mux_stream_id&&await ir.functions.invoke("mux-stream",{body:{action:"disable",stream_id:oe.mux_stream_id}}),U()}catch(oe){console.error("Failed to end stream:",oe),alert("Failed to end stream")}},de=async()=>{try{const ae=!i.demo_mode,oe=await J3e({demo_mode:ae});oe&&a(oe)}catch(ae){console.error("Failed to toggle demo mode:",ae),alert("Failed to toggle demo mode: "+ae.message)}},xe=async ae=>{if(confirm("Delete this event? This cannot be undone."))try{await Z3e(ae),e(t.filter(oe=>oe.id!==ae))}catch{alert("Failed to delete event")}},we=r.filter(ae=>ae.status==="completed").reduce((ae,oe)=>ae+Number(oe.amount),0),ve=r.filter(ae=>ae.status==="completed").length,ne=t.filter(ae=>ae.status==="live"||ae.is_live).length;return o?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-red-500"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-white",children:"Livestream Events"}),s.jsx("p",{className:"text-gray-400",children:"Manage PPV events and view orders"})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("button",{onClick:de,className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-colors ${i.demo_mode?"bg-yellow-500/20 text-yellow-500 border border-yellow-500/30":"bg-dark-800 text-gray-400 border border-dark-700"}`,children:[i.demo_mode?s.jsx(sfe,{className:"w-5 h-5"}):s.jsx(nfe,{className:"w-5 h-5"}),"Demo Mode ",i.demo_mode?"ON":"OFF"]}),s.jsxs("button",{onClick:()=>{f(null),l(!0)},className:"flex items-center gap-2 px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg font-medium transition-colors",children:[s.jsx(jf,{className:"w-5 h-5"}),"New Event"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[s.jsx("div",{className:"bg-dark-900 rounded-xl p-5 border border-dark-800",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-3 bg-green-500/10 rounded-lg",children:s.jsx(Gh,{className:"w-6 h-6 text-green-500"})}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-2xl font-bold text-white",children:["$",we.toFixed(2)]}),s.jsx("p",{className:"text-sm text-gray-400",children:"Total Revenue"})]})]})}),s.jsx("div",{className:"bg-dark-900 rounded-xl p-5 border border-dark-800",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-3 bg-blue-500/10 rounded-lg",children:s.jsx(nh,{className:"w-6 h-6 text-blue-500"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-white",children:ve}),s.jsx("p",{className:"text-sm text-gray-400",children:"Total Orders"})]})]})}),s.jsx("div",{className:"bg-dark-900 rounded-xl p-5 border border-dark-800",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-3 bg-red-500/10 rounded-lg",children:s.jsx(ml,{className:"w-6 h-6 text-red-500"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-white",children:t.length}),s.jsxs("p",{className:"text-sm text-gray-400",children:["Total Events (",ne," live)"]})]})]})})]}),s.jsx("div",{className:"border-b border-dark-800",children:s.jsxs("div",{className:"flex gap-6",children:[s.jsxs("button",{onClick:()=>p("events"),className:`pb-3 px-1 font-medium transition-colors ${m==="events"?"text-red-500 border-b-2 border-red-500":"text-gray-400 hover:text-white"}`,children:["Events (",t.length,")"]}),s.jsxs("button",{onClick:()=>p("orders"),className:`pb-3 px-1 font-medium transition-colors ${m==="orders"?"text-red-500 border-b-2 border-red-500":"text-gray-400 hover:text-white"}`,children:["Orders (",r.length,")"]}),s.jsxs("button",{onClick:()=>{p("analytics"),G(x)},className:`pb-3 px-1 font-medium transition-colors flex items-center gap-2 ${m==="analytics"?"text-red-500 border-b-2 border-red-500":"text-gray-400 hover:text-white"}`,children:[s.jsx(kT,{size:16})," Analytics"]}),s.jsxs("button",{onClick:()=>{p("recordings"),q()},className:`pb-3 px-1 font-medium transition-colors flex items-center gap-2 ${m==="recordings"?"text-red-500 border-b-2 border-red-500":"text-gray-400 hover:text-white"}`,children:[s.jsx(Up,{size:16})," Recordings"]})]})}),m==="events"&&s.jsx("div",{className:"flex gap-2",children:["all","upcoming","live","ended"].map(ae=>s.jsx("button",{onClick:()=>D(ae),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${I===ae?"bg-red-500 text-white":"bg-dark-800 text-gray-400 hover:text-white"}`,children:ae.charAt(0).toUpperCase()+ae.slice(1)},ae))}),m==="events"&&s.jsx("div",{className:"space-y-4",children:t.length===0?s.jsx("div",{className:"text-center py-12 text-gray-400",children:"No events yet. Create your first event!"}):t.filter(ae=>I==="all"?!0:I==="live"?ae.is_live||ae.status==="live":I==="ended"?ae.status==="ended":I==="upcoming"?!ae.is_live&&ae.status!=="ended"&&new Date(ae.start_time)>new Date:!0).map(ae=>s.jsx("div",{className:"bg-dark-900 rounded-xl p-5 border border-dark-800",children:s.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2 flex-wrap",children:[s.jsx("h3",{className:"text-lg font-bold text-white",children:ae.title}),s.jsx(XFe,{event:ae,compact:!0}),s.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded ${ae.status==="live"?"bg-red-500 text-white":ae.status==="published"?"bg-green-500/20 text-green-500":ae.status==="ended"?"bg-gray-500/20 text-gray-400":"bg-yellow-500/20 text-yellow-500"}`,children:ae.status||"draft"}),ae.category&&s.jsxs("span",{className:"px-2 py-0.5 text-xs font-medium rounded bg-purple-500/20 text-purple-400 flex items-center gap-1",children:[s.jsx(fR,{className:"w-3 h-3"}),ae.category]}),ae.vod_enabled&&s.jsx("span",{className:"px-2 py-0.5 text-xs font-medium rounded bg-blue-500/20 text-blue-400",children:"VOD"})]}),s.jsx("p",{className:"text-gray-400 mb-2",children:ae.org_display_name||ae.organization}),s.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-500",children:[s.jsx("span",{children:new Date(ae.start_time).toLocaleDateString("en-AU")}),s.jsx("span",{children:ae.venue}),s.jsxs("span",{className:"font-medium text-green-500",children:["$",ae.price," AUD"]})]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[ae.status!=="ended"&&s.jsx("button",{onClick:async()=>{const oe=!ae.doors_open;await db(ae.id,{doors_open:oe}),U()},className:`p-2 rounded-lg transition-colors ${ae.doors_open?"text-green-500 bg-green-500/20 hover:bg-green-500/30":"text-gray-400 hover:text-green-500 hover:bg-dark-800"}`,title:ae.doors_open?"Close Doors (block viewers)":"Open Doors (allow viewers)",children:ae.doors_open?s.jsx(zde,{className:"w-5 h-5"}):s.jsx(PY,{className:"w-5 h-5"})}),ae.status!=="ended"?s.jsx("button",{onClick:async()=>{const oe=!ae.is_live;await db(ae.id,{is_live:oe,status:oe?"live":"published"}),U()},className:`p-2 rounded-lg transition-colors ${ae.is_live?"text-red-500 bg-red-500/20 hover:bg-red-500/30":"text-gray-400 hover:text-red-500 hover:bg-dark-800"}`,title:ae.is_live?"Stop Live":"Go Live",children:s.jsx(Hb,{className:"w-5 h-5"})}):s.jsx("span",{className:"p-2 text-gray-600",title:"Event Ended",children:s.jsx(IY,{className:"w-5 h-5"})}),(ae.is_live||ae.status==="live"||ae.status==="published")&&s.jsx("button",{onClick:()=>J(ae.id),className:"p-2 text-gray-400 hover:text-orange-500 hover:bg-dark-800 rounded-lg transition-colors",title:"End & Archive Stream",children:s.jsx(Bde,{className:"w-5 h-5"})}),s.jsx("button",{onClick:()=>{navigator.clipboard.writeText(`https://fitfocusmedia.com.au/#/live/${ae.id}`),alert("Event link copied!")},className:"p-2 text-gray-400 hover:text-white hover:bg-dark-800 rounded-lg transition-colors",title:"Copy Link",children:s.jsx(Mb,{className:"w-5 h-5"})}),s.jsx("a",{href:`#/live/${ae.id}`,target:"_blank",className:"p-2 text-gray-400 hover:text-white hover:bg-dark-800 rounded-lg transition-colors",title:"View Event Page",children:s.jsx(H0,{className:"w-5 h-5"})}),s.jsx("button",{onClick:()=>{f(ae),l(!0)},className:"p-2 text-gray-400 hover:text-white hover:bg-dark-800 rounded-lg transition-colors",title:"Edit",children:s.jsx(Xhe,{className:"w-5 h-5"})}),s.jsx("button",{onClick:()=>xe(ae.id),className:"p-2 text-gray-400 hover:text-red-500 hover:bg-dark-800 rounded-lg transition-colors",title:"Delete",children:s.jsx(Jp,{className:"w-5 h-5"})})]})]})},ae.id))}),m==="orders"&&s.jsxs("div",{className:"bg-dark-900 rounded-xl border border-dark-800 overflow-hidden",children:[r.length>0&&s.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-dark-800",children:[s.jsxs("p",{className:"text-sm text-gray-400",children:[r.filter(ae=>ae.status==="completed").length," completed orders",s.jsxs("span",{className:"text-green-500 ml-2",children:["$",r.filter(ae=>ae.status==="completed").reduce((ae,oe)=>ae+parseFloat(oe.amount||0),0).toFixed(2)," total"]})]}),s.jsxs("button",{onClick:()=>{const ae=["Order ID","Email","Event","Amount","Status","Date","Payment Method"],oe=r.map(Pe=>[Pe.id,Pe.email,Pe.event?.title||"",Pe.amount,Pe.status,new Date(Pe.created_at).toLocaleString("en-AU"),Pe.payment_method||"stripe"]),Ie=[ae,...oe].map(Pe=>Pe.map(Re=>`"${Re}"`).join(",")).join(`
`),Ce=new Blob([Ie],{type:"text/csv"}),be=URL.createObjectURL(Ce),ue=document.createElement("a");ue.href=be,ue.download=`livestream-orders-${new Date().toISOString().slice(0,10)}.csv`,ue.click(),URL.revokeObjectURL(be)},className:"flex items-center gap-2 px-3 py-1.5 bg-dark-800 hover:bg-dark-700 text-gray-300 hover:text-white rounded-lg text-sm transition-colors",children:[s.jsx(yf,{className:"w-4 h-4"}),"Export CSV"]})]}),r.length===0?s.jsx("div",{className:"text-center py-12 text-gray-400",children:"No orders yet."}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-dark-800",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-400",children:"Order"}),s.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-400",children:"Email"}),s.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-400",children:"Event"}),s.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-400",children:"Amount"}),s.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-400",children:"Status"}),s.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-400",children:"Date"})]})}),s.jsx("tbody",{className:"divide-y divide-dark-800",children:r.map(ae=>s.jsxs("tr",{className:"hover:bg-dark-800/50",children:[s.jsx("td",{className:"px-4 py-3",children:s.jsx("code",{className:"text-xs text-gray-400",children:ae.id.slice(0,8)})}),s.jsx("td",{className:"px-4 py-3 text-white",children:ae.email}),s.jsx("td",{className:"px-4 py-3 text-gray-400",children:ae.event?.title||"Unknown"}),s.jsxs("td",{className:"px-4 py-3 text-green-500 font-medium",children:["$",ae.amount]}),s.jsx("td",{className:"px-4 py-3",children:s.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded ${ae.status==="completed"?"bg-green-500/20 text-green-500":ae.status==="pending"?"bg-yellow-500/20 text-yellow-500":"bg-red-500/20 text-red-500"}`,children:ae.payment_method==="demo"?" Demo":ae.status})}),s.jsx("td",{className:"px-4 py-3 text-gray-400 text-sm",children:new Date(ae.created_at).toLocaleString("en-AU")})]},ae.id))})]})})]}),m==="analytics"&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("label",{className:"text-gray-400",children:"Filter by Event:"}),s.jsxs("select",{value:x,onChange:ae=>{w(ae.target.value),G(ae.target.value)},className:"bg-dark-800 border border-dark-700 rounded-lg px-3 py-2 text-white",children:[s.jsx("option",{value:"all",children:"All Events"}),t.map(ae=>s.jsx("option",{value:ae.id,children:ae.title},ae.id))]})]}),s.jsxs("div",{className:"bg-dark-900 rounded-xl border border-dark-800 p-6",children:[s.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[s.jsx(Tf,{className:"text-red-500"})," Conversion Funnel"]}),g.funnel.length===0?s.jsx("p",{className:"text-gray-400",children:"No analytics data yet. Data will appear after users visit event pages."}):s.jsx("div",{className:"space-y-4",children:g.funnel.map((ae,oe)=>{const Ie=t.find(Ce=>Ce.id===ae.event_id)?.title||"Unknown Event";return s.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[s.jsx("h4",{className:"font-medium text-white mb-3",children:Ie}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-4 text-center",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-white",children:ae.page_views||0}),s.jsx("p",{className:"text-xs text-gray-400",children:"Page Views"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-yellow-500",children:ae.geo_blocked||0}),s.jsx("p",{className:"text-xs text-gray-400",children:"Geo Blocked"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-green-500",children:ae.geo_passed||0}),s.jsx("p",{className:"text-xs text-gray-400",children:"Geo Passed"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-blue-500",children:ae.purchase_views||0}),s.jsx("p",{className:"text-xs text-gray-400",children:"Saw Checkout"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-purple-500",children:ae.checkout_starts||0}),s.jsx("p",{className:"text-xs text-gray-400",children:"Started Checkout"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-green-400",children:ae.purchases||0}),s.jsx("p",{className:"text-xs text-gray-400",children:"Purchased"})]}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-2xl font-bold text-red-500",children:[ae.checkout_conversion_pct||0,"%"]}),s.jsx("p",{className:"text-xs text-gray-400",children:"Conversion"})]})]})]},oe)})})]}),s.jsxs("div",{className:"bg-dark-900 rounded-xl border border-dark-800 p-6",children:[s.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[s.jsx(md,{className:"text-yellow-500"})," Blocked User Locations"]}),g.blockedLocations.length===0?s.jsx("p",{className:"text-gray-400",children:"No blocked users yet."}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-dark-800",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-400",children:"City"}),s.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-400",children:"Region"}),s.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-400",children:"Country"}),s.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-400",children:"Blocked Count"}),s.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-400",children:"Avg Distance"})]})}),s.jsx("tbody",{className:"divide-y divide-dark-800",children:g.blockedLocations.map((ae,oe)=>s.jsxs("tr",{className:"hover:bg-dark-800/50",children:[s.jsx("td",{className:"px-4 py-2 text-white",children:ae.city||""}),s.jsx("td",{className:"px-4 py-2 text-gray-400",children:ae.region||""}),s.jsx("td",{className:"px-4 py-2 text-gray-400",children:ae.country||""}),s.jsx("td",{className:"px-4 py-2 text-yellow-500 font-medium",children:ae.blocked_count}),s.jsx("td",{className:"px-4 py-2 text-gray-400",children:ae.avg_distance_km?`${ae.avg_distance_km}km`:""})]},oe))})]})})]}),s.jsxs("div",{className:"bg-dark-900 rounded-xl border border-dark-800 p-6",children:[s.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[s.jsx(kT,{className:"text-blue-500"})," Recent Activity (Last 100)"]}),g.recentEvents.length===0?s.jsx("p",{className:"text-gray-400",children:"No recent activity."}):s.jsx("div",{className:"overflow-x-auto max-h-96 overflow-y-auto",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{className:"bg-dark-800 sticky top-0",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-400",children:"Time"}),s.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-400",children:"Event Type"}),s.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-400",children:"Device"}),s.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-400",children:"Location"}),s.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-400",children:"Accuracy"}),s.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-400",children:"Email"})]})}),s.jsx("tbody",{className:"divide-y divide-dark-800",children:g.recentEvents.map((ae,oe)=>s.jsxs("tr",{className:"hover:bg-dark-800/50",children:[s.jsx("td",{className:"px-3 py-2 text-gray-400 whitespace-nowrap",children:new Date(ae.created_at).toLocaleString("en-AU",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}),s.jsx("td",{className:"px-3 py-2",children:s.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded ${ae.event_type==="purchase_complete"?"bg-green-500/20 text-green-500":ae.event_type==="geo_blocked"?"bg-yellow-500/20 text-yellow-500":ae.event_type==="geo_passed"?"bg-blue-500/20 text-blue-500":ae.event_type==="checkout_start"?"bg-purple-500/20 text-purple-500":"bg-gray-500/20 text-gray-400"}`,children:ae.event_type})}),s.jsx("td",{className:"px-3 py-2 text-gray-400",children:ae.device_type||""}),s.jsx("td",{className:"px-3 py-2 text-gray-400",children:ae.latitude&&ae.longitude?`${ae.latitude.toFixed(4)}, ${ae.longitude.toFixed(4)}`:""}),s.jsx("td",{className:"px-3 py-2 text-gray-400",children:ae.accuracy_meters?`${Math.round(ae.accuracy_meters)}m`:""}),s.jsx("td",{className:"px-3 py-2 text-gray-400",children:ae.customer_email||""})]},oe))})]})})]})]}),m==="recordings"&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("p",{className:"text-gray-400",children:"Video recordings from your livestreams"}),s.jsxs("button",{onClick:q,className:"flex items-center gap-2 px-3 py-1.5 bg-dark-800 hover:bg-dark-700 text-gray-300 rounded-lg text-sm transition-colors",children:[s.jsx(Q0,{className:"w-4 h-4"}),"Refresh"]})]}),N?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-red-500"})}):_.length===0?s.jsxs("div",{className:"text-center py-12 text-gray-400",children:[s.jsx(Up,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"No recordings yet."}),s.jsx("p",{className:"text-sm",children:"Recordings appear here after streams end."})]}):s.jsx("div",{className:"grid gap-4",children:_.map(ae=>s.jsx("div",{className:"bg-dark-900 rounded-xl p-5 border border-dark-800",children:s.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[ae.thumbnail_url?s.jsx("img",{src:ae.thumbnail_url,alt:"",className:"w-32 h-20 object-cover rounded-lg"}):s.jsx("div",{className:"w-32 h-20 bg-dark-800 rounded-lg flex items-center justify-center",children:s.jsx(Up,{className:"w-8 h-8 text-gray-600"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-white",children:ae.event_title||"Untitled Recording"}),s.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-400 mt-1",children:[s.jsx("span",{children:ae.duration?`${Math.floor(ae.duration/60)}m ${Math.round(ae.duration%60)}s`:""}),s.jsx("span",{children:ae.created_at?new Date(ae.created_at*1e3).toLocaleDateString("en-AU"):""}),s.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded ${ae.status==="ready"?"bg-green-500/20 text-green-500":ae.status==="preparing"?"bg-yellow-500/20 text-yellow-500":"bg-gray-500/20 text-gray-400"}`,children:ae.status})]})]})]}),s.jsx("div",{className:"flex items-center gap-2",children:ae.playback_id&&ae.status==="ready"&&s.jsxs(s.Fragment,{children:[s.jsxs("a",{href:`https://stream.mux.com/${ae.playback_id}.m3u8`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-3 py-2 bg-dark-800 hover:bg-dark-700 text-gray-300 rounded-lg text-sm transition-colors",children:[s.jsx(Qd,{className:"w-4 h-4"}),"Preview"]}),s.jsxs("a",{href:`https://stream.mux.com/${ae.playback_id}/high.mp4`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-3 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg text-sm transition-colors",children:[s.jsx(yf,{className:"w-4 h-4"}),"Download MP4"]})]})})]})},ae.id))})]}),u&&s.jsx(JFe,{event:d,onClose:()=>{l(!1),f(null)},onSave:async ae=>{try{let oe=d?.id;const{category:Ie,crew_bypass_token:Ce,bypass_created_at:be,geo_venue_address:ue,...Pe}=ae;if(Pe.start_time===""&&(Pe.start_time=null),Pe.end_time===""&&(Pe.end_time=null),Pe.vod_available_until===""&&(Pe.vod_available_until=null),(Pe.vod_price===""||Pe.vod_price===void 0)&&(Pe.vod_price=null),(Pe.price===""||Pe.price===void 0)&&(Pe.price=null),d)await db(d.id,Pe);else{oe=(await X3e(Pe)).id;try{const{data:He,error:Fe}=await ir.functions.invoke("mux-stream",{body:{action:"create",event_id:oe}});if(Fe)console.error("MUX stream creation failed:",Fe);else if(He?.stream_key){const ft=`Server: ${He.rtmp_url}
Stream Key: ${He.stream_key}`;navigator.clipboard.writeText(He.stream_key).then(()=>{alert(`MUX Stream Created! 

Stream Key copied to clipboard!

For OBS:
 Server: ${He.rtmp_url}
 Stream Key: (already copied)

Just paste (Cmd+V) in OBS Stream Key field.`)}).catch(()=>{prompt("MUX Stream Created! Copy this Stream Key:",He.stream_key)})}}catch(He){console.error("MUX stream creation failed:",He)}}await U(),l(!1),f(null)}catch(oe){console.error("Save event error:",oe),alert(`Failed to save event: ${oe.message||oe}`)}}})]})}function JFe({event:t,onClose:e,onSave:r}){const[n,i]=T.useState(t),[a,o]=T.useState({title:t?.title||"",organization:t?.organization||"",organization_id:t?.organization_id||null,venue:t?.venue||"",start_time:t?.start_time?.slice(0,16)||"",end_time:t?.end_time?.slice(0,16)||"",price:t?.price||29.99,description:t?.description||"",category:t?.category||"",thumbnail_url:t?.thumbnail_url||"",player_poster_url:t?.player_poster_url||"",ticket_url:t?.ticket_url||"",vod_enabled:t?.vod_enabled??!0,vod_asset_id:t?.vod_asset_id||"",vod_playback_id:t?.vod_playback_id||"",vod_price:t?.vod_price||"",vod_available_until:t?.vod_available_until||"",status:t?.status||"draft",mux_playback_id:t?.mux_playback_id||"",mux_stream_key:t?.mux_stream_key||"",geo_blocking_enabled:t?.geo_blocking_enabled||!1,geo_lat:t?.geo_lat||null,geo_lng:t?.geo_lng||null,geo_radius_km:t?.geo_radius_km||50,geo_venue_address:t?.geo_venue_address||"",crew_bypass_token:t?.crew_bypass_token||null,bypass_created_at:t?.bypass_created_at||null}),[c,u]=T.useState(!1),[l,d]=T.useState([]),[f,m]=T.useState(!0),p=async()=>{if(t?.id)try{const{data:_,error:E}=await ir.from("livestream_events").select("*").eq("id",t.id).single();_&&!E&&(i(_),o(N=>({...N,mux_playback_id:_.mux_playback_id||"",mux_stream_key:_.mux_stream_key||""})))}catch(_){console.error("Failed to reload event:",_)}};T.useEffect(()=>{n?m(!1):(async()=>{try{const E=await Y3e(),N=await qre(),C=E.map(I=>{const D=N.find(U=>U.title?.toLowerCase().trim()===I.name?.toLowerCase().trim());return{id:`content-${I.id}`,source:"Content",title:I.name,organization:I.org_display_name,organizationId:I.organization_id,venue:D?.venue||I.location||"",geo_venue_address:D?.geo_venue_address||"",date:I.date,status:I.status}});d(C)}catch(E){console.error("Failed to load existing events:",E)}finally{m(!1)}})()},[n]);const g=_=>{const E=N=>N.toString().padStart(2,"0");return`${_.getFullYear()}-${E(_.getMonth()+1)}-${E(_.getDate())}T${E(_.getHours())}:${E(_.getMinutes())}`},y=_=>{if(!_)return;const E=l.find(I=>I.id===_);if(!E)return;let N="",C="";if(E.date){const I=new Date(E.date);isNaN(I.getTime())||(I.setHours(18,0,0,0),N=g(I),I.setHours(22,0,0,0),C=g(I))}o(I=>({...I,title:E.title||I.title,organization:E.organization||I.organization,organization_id:E.organizationId||I.organization_id,venue:E.venue||I.venue,geo_venue_address:E.geo_venue_address||E.venue||I.geo_venue_address,start_time:N||I.start_time,end_time:C||I.end_time}))},x=_=>{if(!_||_.trim()==="")return"";const E=_.trim();return E.startsWith("http://")||E.startsWith("https://")?E:"https://"+E},w=async _=>{_.preventDefault(),u(!0);const E={...a,thumbnail_url:x(a.thumbnail_url),ticket_url:x(a.ticket_url)};await r(E),u(!1)};return s.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-dark-900 rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsx("div",{className:"p-6 border-b border-dark-800",children:s.jsx("h2",{className:"text-xl font-bold text-white",children:n?"Edit Event":"Create Event"})}),s.jsxs("form",{onSubmit:w,className:"p-6 space-y-4",children:[!n&&l.length>0&&s.jsxs("div",{className:"p-4 bg-blue-500/10 border border-blue-500/20 rounded-lg",children:[s.jsxs("label",{className:"block text-sm font-medium text-blue-400 mb-2 flex items-center gap-2",children:[s.jsx(yf,{className:"w-4 h-4"}),"Import from existing event"]}),s.jsxs("select",{onChange:_=>y(_.target.value),className:"w-full px-3 py-2 bg-dark-800 border border-dark-700 rounded-lg text-white",defaultValue:"",children:[s.jsx("option",{value:"",children:" Select to auto-fill "}),l.map(_=>s.jsxs("option",{value:_.id,children:["[",_.source,"] ",_.title,"  ",_.organization]},_.id))]})]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Title *"}),s.jsx("input",{type:"text",value:a.title,onChange:_=>o(E=>({...E,title:_.target.value})),className:"w-full px-3 py-2 bg-dark-800 border border-dark-700 rounded-lg text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Organization (Legal Name) *"}),s.jsx("input",{type:"text",value:a.organization,onChange:_=>o(E=>({...E,organization:_.target.value})),className:"w-full px-3 py-2 bg-dark-800 border border-dark-700 rounded-lg text-white",placeholder:"Queensland Brazilian Jiu Jitsu Circuit Pty Ltd",required:!0})]})]}),s.jsx("p",{className:"text-xs text-gray-500 -mt-2",children:"Display name is set in Content  Organizations"}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Venue *"}),s.jsx("input",{type:"text",value:a.venue,onChange:_=>o(E=>({...E,venue:_.target.value})),className:"w-full px-3 py-2 bg-dark-800 border border-dark-700 rounded-lg text-white",required:!0})]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Start Time *"}),s.jsx("input",{type:"datetime-local",value:a.start_time,onChange:_=>o(E=>({...E,start_time:_.target.value})),className:"w-full px-3 py-2 bg-dark-800 border border-dark-700 rounded-lg text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"End Time *"}),s.jsx("input",{type:"datetime-local",value:a.end_time,onChange:_=>{const E=_.target.value;let N="";if(E){const C=new Date(E);C.setDate(C.getDate()+7),N=C.toISOString()}o(C=>({...C,end_time:E,vod_available_until:C.vod_available_until||N}))},className:"w-full px-3 py-2 bg-dark-800 border border-dark-700 rounded-lg text-white",required:!0})]})]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Price (AUD) *"}),s.jsx("input",{type:"number",step:"0.01",value:a.price,onChange:_=>o(E=>({...E,price:parseFloat(_.target.value)})),className:"w-full px-3 py-2 bg-dark-800 border border-dark-700 rounded-lg text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Status"}),s.jsxs("select",{value:a.status,onChange:_=>o(E=>({...E,status:_.target.value})),className:"w-full px-3 py-2 bg-dark-800 border border-dark-700 rounded-lg text-white",children:[s.jsx("option",{value:"draft",children:"Draft"}),s.jsx("option",{value:"published",children:"Published"}),s.jsx("option",{value:"live",children:"Live"}),s.jsx("option",{value:"ended",children:"Ended"})]})]})]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Category"}),s.jsxs("select",{value:a.category,onChange:_=>o(E=>({...E,category:_.target.value})),className:"w-full px-3 py-2 bg-dark-800 border border-dark-700 rounded-lg text-white",children:[s.jsx("option",{value:"",children:"Select Category"}),s.jsx("option",{value:"boxing",children:"Boxing"}),s.jsx("option",{value:"mma",children:"MMA"}),s.jsx("option",{value:"kickboxing",children:"Kickboxing"}),s.jsx("option",{value:"muay-thai",children:"Muay Thai"}),s.jsx("option",{value:"bjj",children:"BJJ / Grappling"}),s.jsx("option",{value:"wrestling",children:"Wrestling"}),s.jsx("option",{value:"other",children:"Other"})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:a.vod_enabled,onChange:_=>o(E=>({...E,vod_enabled:_.target.checked})),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-dark-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-red-500 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-red-500"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-gray-300",children:"VOD Replay"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Allow replay after event ends"})]})]})]}),a.vod_enabled&&s.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-4 space-y-4",children:[s.jsxs("h4",{className:"text-sm font-medium text-blue-400 flex items-center gap-2",children:[s.jsx(Up,{className:"w-4 h-4"}),"VOD Replay Settings"]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"VOD Price (leave empty = same as live)"}),s.jsx("input",{type:"number",step:"0.01",value:a.vod_price,onChange:_=>o(E=>({...E,vod_price:_.target.value})),className:"w-full px-3 py-2 bg-dark-800 border border-dark-700 rounded-lg text-white",placeholder:"e.g., 19.99"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"VOD Available Until (optional)"}),s.jsx("input",{type:"datetime-local",value:a.vod_available_until?a.vod_available_until.slice(0,16):"",onChange:_=>o(E=>({...E,vod_available_until:_.target.value?new Date(_.target.value).toISOString():""})),className:"w-full px-3 py-2 bg-dark-800 border border-dark-700 rounded-lg text-white"})]})]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"VOD Asset ID (from MUX)"}),s.jsx("input",{type:"text",value:a.vod_asset_id,onChange:_=>o(E=>({...E,vod_asset_id:_.target.value})),className:"w-full px-3 py-2 bg-dark-800 border border-dark-700 rounded-lg text-white",placeholder:"Auto-linked after event ends"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"VOD Playback ID"}),s.jsx("input",{type:"text",value:a.vod_playback_id,onChange:_=>o(E=>({...E,vod_playback_id:_.target.value})),className:"w-full px-3 py-2 bg-dark-800 border border-dark-700 rounded-lg text-white",placeholder:"Auto-linked after event ends"})]})]}),s.jsx("p",{className:"text-xs text-gray-500",children:"VOD assets are automatically created by MUX when the livestream ends. Live ticket purchasers automatically get VOD access."})]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"MUX Playback ID"}),s.jsx("input",{type:"text",value:a.mux_playback_id,onChange:_=>o(E=>({...E,mux_playback_id:_.target.value})),className:"w-full px-3 py-2 bg-dark-800 border border-dark-700 rounded-lg text-white",placeholder:"Auto-generated on create"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"MUX Stream Key (for OBS)"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:a.mux_stream_key,readOnly:!0,className:"flex-1 px-3 py-2 bg-dark-900 border border-dark-700 rounded-lg text-gray-400 font-mono text-sm",placeholder:a.mux_stream_key?"":"Click Generate to create"}),a.mux_stream_key?s.jsx("button",{type:"button",onClick:()=>{navigator.clipboard.writeText(a.mux_stream_key),alert("Stream Key copied!")},className:"px-3 py-2 bg-dark-700 hover:bg-dark-600 text-white rounded-lg transition-colors",children:"Copy"}):n?.id&&s.jsx("button",{type:"button",onClick:async()=>{try{const{data:_,error:E}=await ir.functions.invoke("mux-stream",{body:{action:"create",event_id:n.id}});if(E){alert("Failed to create stream: "+E.message);return}_?.stream_key&&(o(N=>({...N,mux_stream_key:_.stream_key,mux_playback_id:_.playback_id})),navigator.clipboard.writeText(_.stream_key),alert("MUX Stream created! Stream Key copied to clipboard."))}catch(_){alert("Failed to create stream: "+_.message)}},className:"px-3 py-2 bg-green-600 hover:bg-green-500 text-white rounded-lg transition-colors whitespace-nowrap",children:"Generate"})]}),s.jsx("p",{className:"text-sm text-amber-400 mt-1 font-medium",children:" RTMP Server: rtmps://global-live.mux.com:443/app"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Description"}),s.jsx("textarea",{value:a.description,onChange:_=>o(E=>({...E,description:_.target.value})),className:"w-full px-3 py-2 bg-dark-800 border border-dark-700 rounded-lg text-white",rows:3})]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Thumbnail URL"}),s.jsx("input",{type:"text",value:a.thumbnail_url,onChange:_=>o(E=>({...E,thumbnail_url:_.target.value})),className:"w-full px-3 py-2 bg-dark-800 border border-dark-700 rounded-lg text-white",placeholder:"For event cards"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Used on event listing cards"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Player Poster URL"}),s.jsx("input",{type:"text",value:a.player_poster_url,onChange:_=>o(E=>({...E,player_poster_url:_.target.value})),className:"w-full px-3 py-2 bg-dark-800 border border-dark-700 rounded-lg text-white",placeholder:"For video player (optional)"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Shows before/after stream. Falls back to thumbnail if empty."})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Ticket URL"}),s.jsx("input",{type:"text",value:a.ticket_url,onChange:_=>o(E=>({...E,ticket_url:_.target.value})),className:"w-full px-3 py-2 bg-dark-800 border border-dark-700 rounded-lg text-white",placeholder:"www.instagram.com/fitfocusmedia"})]}),s.jsxs("div",{className:"pt-6 border-t border-dark-800",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-white",children:"Geo-Blocking"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Block online streaming near the venue"})]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:a.geo_blocking_enabled,onChange:_=>o(E=>({...E,geo_blocking_enabled:_.target.checked})),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-dark-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-red-500 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-red-500"}),s.jsx("span",{className:"ml-3 text-sm font-medium text-gray-400",children:a.geo_blocking_enabled?"Enabled":"Disabled"})]})]}),a.geo_blocking_enabled&&s.jsx(qFe,{latitude:a.geo_lat,longitude:a.geo_lng,radius:a.geo_radius_km,address:a.geo_venue_address||a.venue,onLocationChange:({latitude:_,longitude:E,address:N})=>{o({...a,geo_lat:_,geo_lng:E,geo_venue_address:N||a.venue})},onRadiusChange:_=>{o(E=>({...E,geo_radius_km:_}))}}),n?.id&&s.jsxs("div",{className:"mt-6 p-4 bg-blue-500/10 border border-blue-500/20 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx(B0,{className:"w-5 h-5 text-blue-500"}),s.jsx("h4",{className:"font-semibold text-white",children:"Crew Access"})]}),s.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Generate a bypass link for crew members at the venue who need to access the stream."}),a.crew_bypass_token?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:" Live Stream (for monitoring during event)"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"text",readOnly:!0,value:`https://fitfocusmedia.com.au/#/watch/${n.id}?bypass=${a.crew_bypass_token}`,className:"flex-1 px-3 py-2 bg-dark-900 border border-dark-700 rounded-lg text-gray-400 font-mono text-xs"}),s.jsx("button",{type:"button",onClick:()=>{navigator.clipboard.writeText(`https://fitfocusmedia.com.au/#/watch/${n.id}?bypass=${a.crew_bypass_token}`),alert("Live stream link copied!")},className:"px-3 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg transition-colors",title:"Copy Link",children:s.jsx(Mb,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:" Preview Player (for design testing before event)"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"text",readOnly:!0,value:`https://fitfocusmedia.com.au/#/watch/${n.id}?bypass=${a.crew_bypass_token}&preview=player`,className:"flex-1 px-3 py-2 bg-dark-900 border border-dark-700 rounded-lg text-gray-400 font-mono text-xs"}),s.jsx("button",{type:"button",onClick:()=>{navigator.clipboard.writeText(`https://fitfocusmedia.com.au/#/watch/${n.id}?bypass=${a.crew_bypass_token}&preview=player`),alert("Preview player link copied!")},className:"px-3 py-2 bg-purple-600 hover:bg-purple-500 text-white rounded-lg transition-colors",title:"Copy Link",children:s.jsx(Mb,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-dark-700",children:[s.jsxs("p",{className:"text-xs text-gray-500",children:["Created: ",a.bypass_created_at?new Date(a.bypass_created_at).toLocaleString("en-AU"):"Unknown"]}),s.jsxs("button",{type:"button",onClick:async()=>{if(!confirm("Regenerate bypass token? Both links will stop working immediately."))return;const _=crypto.randomUUID(),E=new Date().toISOString();await db(n.id,{crew_bypass_token:_,bypass_created_at:E}),o(N=>({...N,crew_bypass_token:_,bypass_created_at:E})),alert("New bypass token generated!")},className:"flex items-center gap-1 px-3 py-1.5 bg-yellow-600 hover:bg-yellow-500 text-white text-sm rounded-lg transition-colors",children:[s.jsx(Q0,{className:"w-3 h-3"}),"Regenerate"]})]})]}):s.jsxs("button",{type:"button",onClick:async()=>{const _=crypto.randomUUID(),E=new Date().toISOString();await db(n.id,{crew_bypass_token:_,bypass_created_at:E}),o(N=>({...N,crew_bypass_token:_,bypass_created_at:E})),navigator.clipboard.writeText(`https://fitfocusmedia.com.au/#/watch/${n.id}?bypass=${_}`),alert("Crew bypass link generated and copied to clipboard!")},className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg transition-colors",children:[s.jsx(B0,{className:"w-4 h-4"}),"Generate Crew Bypass Link"]})]})]}),n?.id&&s.jsx(e6e,{eventId:n.id,event:n,onEventUpdate:p}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-dark-800",children:[s.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-gray-400 hover:text-white transition-colors",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:c,className:"px-6 py-2 bg-red-500 hover:bg-red-600 disabled:bg-dark-700 text-white font-medium rounded-lg transition-colors",children:c?"Saving...":n?"Update Event":"Create Event"})]})]})]})})}function e6e({eventId:t,event:e,onEventUpdate:r}){const[n,i]=T.useState([]),[a,o]=T.useState(!0),[c,u]=T.useState(!1),[l,d]=T.useState(!1),[f,m]=T.useState(""),[p,g]=T.useState(""),[y,x]=T.useState(!1),[w,_]=T.useState(null),E=e?.mux_stream_id&&!e?.is_multi_stream;T.useEffect(()=>{N()},[t]);const N=async()=>{try{const q=await QC(t);i(q||[])}catch(q){console.error("Failed to load streams:",q)}finally{o(!1)}},C=async()=>{if(f.trim()){u(!0);try{const q=await fetch("https://gonalgubgldgpkcekaxe.supabase.co/functions/v1/mux-stream/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:f.trim(),event_id:t})});let J=null;q.ok?(J=await q.json(),console.log("MUX stream created:",J)):console.warn("Failed to auto-create MUX stream, creating without MUX");const de={event_id:t,name:f.trim(),display_order:n.length,is_default:n.length===0,...J&&{mux_stream_id:J.mux_stream_id,mux_stream_key:J.mux_stream_key,mux_playback_id:J.mux_playback_id,status:"idle"}};await nRe(de),n.length===0&&await $V(t,!0),m(""),await N(),J?.mux_stream_key&&(navigator.clipboard.writeText(J.mux_stream_key),alert(` Stream "${f.trim()}" created!

RTMP Server: rtmps://global-live.mux.com:443/app
Stream Key: ${J.mux_stream_key}

(Stream key copied to clipboard)`))}catch(q){console.error("Failed to add stream:",q),alert("Failed to add stream: "+q.message)}finally{u(!1)}}},I=async q=>{if(confirm("Delete this stream? This cannot be undone."))try{await iRe(q),n.length<=1&&await $V(t,!1),await N()}catch(J){console.error("Failed to delete stream:",J),alert("Failed to delete stream")}},D=async q=>{try{const J=await fetch("https://gonalgubgldgpkcekaxe.supabase.co/functions/v1/mux-stream/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:q.name,event_id:t})});if(!J.ok){const xe=await J.json();alert("Failed to create MUX stream: "+(xe.error||"Unknown error"));return}const de=await J.json();de?.mux_stream_key&&(await oI(q.id,{mux_stream_key:de.mux_stream_key,mux_playback_id:de.mux_playback_id,mux_stream_id:de.mux_stream_id,status:"idle"}),navigator.clipboard.writeText(de.mux_stream_key),alert(` Stream Key for ${q.name} created and copied!

Server: rtmps://global-live.mux.com:443/app
Stream Key: ${de.mux_stream_key}`),await N())}catch(J){console.error("Failed to generate stream key:",J),alert("Failed to generate stream key: "+J.message)}},U=async q=>{try{for(const J of n)J.is_default&&await oI(J.id,{is_default:!1});await oI(q,{is_default:!0}),await N()}catch(J){console.error("Failed to set default stream:",J)}},G=async()=>{if(!p.trim()){alert("Please enter a name for the existing stream");return}d(!0);try{const{data:q,error:J}=await ir.functions.invoke("mux-stream",{body:{action:"migrate",event_id:t,stream_name:p.trim()}});if(J)throw new Error(J.message||"Migration failed");if(q?.error)throw new Error(q.error);x(!1),g(""),await N(),r&&await r(),alert(`Successfully converted to multi-stream! "${p.trim()}" is now your first stream.`)}catch(q){console.error("Failed to convert to multi-stream:",q),alert("Failed to convert: "+q.message)}finally{d(!1)}};return s.jsxs("div",{className:"pt-6 border-t border-dark-800",children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(e4,{className:"w-5 h-5 text-purple-500"}),s.jsx("h3",{className:"text-lg font-semibold text-white",children:"Multi-Stream"}),n.length>0&&s.jsxs("span",{className:"px-2 py-0.5 bg-purple-500/20 text-purple-400 text-xs font-medium rounded-full",children:[n.length," stream",n.length!==1?"s":""]})]})}),s.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Add multiple streams for events with multiple mats/stages. Each stream gets its own OBS stream key."}),E&&n.length===0&&s.jsx("div",{className:"mb-4 p-4 bg-amber-500/10 border border-amber-500/30 rounded-lg",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"p-2 bg-amber-500/20 rounded-lg",children:s.jsx($p,{className:"w-5 h-5 text-amber-500"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-medium text-amber-400 mb-1",children:"Existing Stream Detected"}),s.jsx("p",{className:"text-sm text-gray-400 mb-3",children:"This event has a stream key already generated. To add multiple streams, convert it to multi-stream mode first."}),s.jsxs("button",{type:"button",onClick:()=>x(!0),className:"px-4 py-2 bg-amber-600 hover:bg-amber-500 text-white font-medium rounded-lg transition-colors flex items-center gap-2",children:[s.jsx(e4,{className:"w-4 h-4"}),"Convert to Multi-Stream"]})]})]})}),y&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-dark-900 rounded-xl border border-dark-700 p-6 max-w-md w-full mx-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Convert to Multi-Stream"}),s.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Name your existing stream. This will become the first stream in multi-stream mode."}),s.jsx("input",{type:"text",value:p,onChange:q=>g(q.target.value),placeholder:"e.g., Main Stage, Mat 1, Ring A",className:"w-full px-3 py-2 bg-dark-800 border border-dark-700 rounded-lg text-white placeholder-gray-500 mb-4",autoFocus:!0}),s.jsxs("div",{className:"flex gap-3 justify-end",children:[s.jsx("button",{type:"button",onClick:()=>{x(!1),g("")},className:"px-4 py-2 text-gray-400 hover:text-white transition-colors",children:"Cancel"}),s.jsx("button",{type:"button",onClick:G,disabled:l||!p.trim(),className:"px-4 py-2 bg-amber-600 hover:bg-amber-500 disabled:bg-dark-700 text-white font-medium rounded-lg transition-colors flex items-center gap-2",children:l?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),"Converting..."]}):s.jsxs(s.Fragment,{children:[s.jsx(e4,{className:"w-4 h-4"}),"Convert"]})})]})]})}),s.jsxs("div",{className:"flex gap-2 mb-4",children:[s.jsx("input",{type:"text",value:f,onChange:q=>m(q.target.value),placeholder:"Stream name (e.g., Mat 1, Main Stage)",className:"flex-1 px-3 py-2 bg-dark-800 border border-dark-700 rounded-lg text-white placeholder-gray-500"}),s.jsxs("button",{type:"button",onClick:C,disabled:c||!f.trim(),className:"px-4 py-2 bg-purple-600 hover:bg-purple-500 disabled:bg-dark-700 text-white font-medium rounded-lg transition-colors flex items-center gap-2",children:[c?s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}):s.jsx(jf,{className:"w-4 h-4"}),"Add"]})]}),a?s.jsx("div",{className:"text-center py-4",children:s.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-2 border-purple-500 border-t-transparent mx-auto"})}):n.length===0?s.jsxs("div",{className:"text-center py-6 text-gray-500 bg-dark-800/50 rounded-lg border border-dashed border-dark-700",children:[s.jsx($p,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),s.jsx("p",{children:"No streams configured yet."}),s.jsx("p",{className:"text-sm",children:"Add streams above for multi-mat/stage events."})]}):s.jsx("div",{className:"space-y-3",children:n.map((q,J)=>s.jsxs("div",{className:`bg-dark-800 rounded-lg border ${q.is_default?"border-purple-500/50":"border-dark-700"} overflow-hidden`,children:[s.jsxs("div",{className:"flex items-center justify-between p-3 cursor-pointer hover:bg-dark-700/50",onClick:()=>_(w===q.id?null:q.id),children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-purple-500/20 rounded-lg",children:s.jsx(Hb,{className:"w-4 h-4 text-purple-500"})}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium text-white",children:q.name}),q.is_default&&s.jsx("span",{className:"px-2 py-0.5 bg-purple-500/20 text-purple-400 text-xs rounded",children:"Default"}),q.mux_stream_key&&s.jsx("span",{className:"px-2 py-0.5 bg-green-500/20 text-green-400 text-xs rounded",children:"Ready"})]}),s.jsx("p",{className:"text-xs text-gray-500",children:q.mux_stream_key?"Stream key configured":"No stream key yet"})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[!q.is_default&&s.jsx("button",{type:"button",onClick:de=>{de.stopPropagation(),U(q.id)},className:"px-2 py-1 text-xs text-gray-400 hover:text-purple-400 transition-colors",children:"Set Default"}),s.jsx("button",{type:"button",onClick:de=>{de.stopPropagation(),I(q.id)},className:"p-1.5 text-gray-500 hover:text-red-500 transition-colors",children:s.jsx(Jp,{className:"w-4 h-4"})})]})]}),w===q.id&&s.jsx("div",{className:"px-3 pb-3 pt-0 space-y-3 border-t border-dark-700",children:q.mux_stream_key?s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Stream Key (for OBS)"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",readOnly:!0,value:q.mux_stream_key,className:"flex-1 px-3 py-2 bg-dark-900 border border-dark-700 rounded-lg text-gray-400 font-mono text-xs"}),s.jsx("button",{type:"button",onClick:()=>{navigator.clipboard.writeText(q.mux_stream_key),alert("Stream key copied!")},className:"px-3 py-2 bg-dark-700 hover:bg-dark-600 text-white rounded-lg transition-colors",children:s.jsx(Mb,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Playback ID"}),s.jsx("input",{type:"text",readOnly:!0,value:q.mux_playback_id||"",className:"w-full px-3 py-2 bg-dark-900 border border-dark-700 rounded-lg text-gray-400 font-mono text-xs"})]}),s.jsx("p",{className:"text-xs text-amber-400 font-medium",children:" RTMP Server: rtmps://global-live.mux.com:443/app"})]}):s.jsxs("button",{type:"button",onClick:()=>D(q),className:"w-full px-4 py-3 bg-green-600 hover:bg-green-500 text-white font-medium rounded-lg transition-colors flex items-center justify-center gap-2",children:[s.jsx(Qd,{className:"w-4 h-4"}),"Generate MUX Stream Key"]})})]},q.id))}),n.length>0&&s.jsx("p",{className:"text-xs text-gray-500 mt-3",children:" Viewers will see a stream selector to switch between streams during the event."})]})}function t6e(){const[t,e]=T.useState(!0),[r,n]=T.useState([]),[i,a]=T.useState([]),[o,c]=T.useState(null),[u,l]=T.useState(!0),[d,f]=T.useState(new Date),[m,p]=T.useState("all"),[g,y]=T.useState("all"),[x,w]=T.useState(!1);T.useEffect(()=>{if(_(),u){const C=setInterval(()=>{_()},3e4);return()=>clearInterval(C)}},[u,m,g]);const _=async()=>{try{e(!0);let C=ir.from("livestream_events").select("*, organizations(id, name, display_name)").order("start_time",{ascending:!1});g!=="all"&&(C=C.eq("status",g));const{data:I,error:D}=await C;if(D)throw D;const{data:U,error:G}=await ir.from("livestream_orders").select("*").eq("status","completed");if(G)throw G;const q=E(I||[],U||[]);n(I||[]),a(U||[]),c(q),f(new Date)}catch(C){console.error("Failed to load analytics:",C)}finally{e(!1)}},E=(C,I)=>{const D=I.reduce((de,xe)=>de+parseFloat(xe.amount||0),0),U=I.length,G=C.map(de=>{const xe=I.filter(ne=>ne.event_id===de.id),we=xe.reduce((ne,ae)=>ne+parseFloat(ae.amount||0),0),ve=xe.length;return{...de,purchases:ve,revenue:we,avgOrderValue:ve>0?we/ve:0}});G.sort((de,xe)=>xe.revenue-de.revenue);const q={};I.forEach(de=>{const xe=new Date(de.created_at).toISOString().split("T")[0];q[xe]=(q[xe]||0)+parseFloat(de.amount||0)});const J=Object.entries(q).sort((de,xe)=>de[0].localeCompare(xe[0])).slice(-30);return{totalRevenue:D,totalPurchases:U,totalEvents:C.length,avgOrderValue:U>0?D/U:0,eventStats:G,dailyRevenue:J}},N=()=>{if(!o)return;const C=[["Event","Organization","Purchases","Revenue","Avg Order Value","Status"].join(","),...o.eventStats.map(G=>[`"${G.title}"`,`"${G.organizations?.display_name||G.organization}"`,G.purchases,`$${G.revenue.toFixed(2)}`,`$${G.avgOrderValue.toFixed(2)}`,G.status].join(","))].join(`
`),I=new Blob([C],{type:"text/csv"}),D=URL.createObjectURL(I),U=document.createElement("a");U.href=D,U.download=`livestream-analytics-${new Date().toISOString().split("T")[0]}.csv`,U.click()};return t&&!o?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-black flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-16 h-16 border-4 border-red-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),s.jsx("p",{className:"text-gray-400",children:"Loading analytics..."})]})}):s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-black py-8 px-4",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-8 gap-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold text-white mb-2 flex items-center gap-3",children:[s.jsx(kT,{className:"w-8 h-8 text-red-500"}),"Livestream Analytics"]}),s.jsx("p",{className:"text-gray-400",children:"Real-time performance metrics and insights"})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("button",{onClick:()=>w(!x),className:"px-4 py-2 bg-gray-800/50 hover:bg-gray-700/50 rounded-lg text-gray-300 flex items-center gap-2 transition-all border border-gray-700",children:[s.jsx(hR,{className:"w-4 h-4"}),x?"Hide":"Show"," Filters"]}),s.jsxs("button",{onClick:N,className:"px-4 py-2 bg-gray-800/50 hover:bg-gray-700/50 rounded-lg text-gray-300 flex items-center gap-2 transition-all border border-gray-700",children:[s.jsx(yf,{className:"w-4 h-4"}),"Export CSV"]}),s.jsxs("button",{onClick:_,disabled:t,className:"px-4 py-2 bg-red-600 hover:bg-red-700 rounded-lg text-white flex items-center gap-2 transition-all disabled:opacity-50",children:[s.jsx(Q0,{className:`w-4 h-4 ${t?"animate-spin":""}`}),"Refresh"]})]})]}),x&&s.jsx("div",{className:"mb-6 p-4 bg-gray-800/30 backdrop-blur-md rounded-lg border border-gray-700",children:s.jsxs("div",{className:"flex flex-wrap gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-gray-400 mb-2 block",children:"Status"}),s.jsxs("select",{value:g,onChange:C=>y(C.target.value),className:"px-4 py-2 bg-gray-900 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-red-500",children:[s.jsx("option",{value:"all",children:"All Events"}),s.jsx("option",{value:"published",children:"Published"}),s.jsx("option",{value:"live",children:"Live"}),s.jsx("option",{value:"ended",children:"Ended"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-gray-400 mb-2 block",children:"Auto-Refresh"}),s.jsx("button",{onClick:()=>l(!u),className:`px-4 py-2 rounded-lg border transition-all ${u?"bg-red-600 border-red-500 text-white":"bg-gray-900 border-gray-700 text-gray-400"}`,children:u?"ON (30s)":"OFF"})]}),s.jsx("div",{className:"flex-1"}),s.jsxs("div",{className:"text-sm text-gray-500 self-end",children:["Last updated: ",d.toLocaleTimeString()]})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[s.jsxs("div",{className:"bg-gradient-to-br from-red-500/20 to-red-600/10 backdrop-blur-md rounded-xl p-6 border border-red-500/20",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx(Gh,{className:"w-8 h-8 text-red-400"}),s.jsx("span",{className:"text-2xl",children:""})]}),s.jsxs("div",{className:"text-3xl font-bold text-white mb-1",children:["$",o?.totalRevenue.toFixed(2)]}),s.jsx("div",{className:"text-sm text-gray-400",children:"Total Revenue"})]}),s.jsxs("div",{className:"bg-gradient-to-br from-blue-500/20 to-blue-600/10 backdrop-blur-md rounded-xl p-6 border border-blue-500/20",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx(n2,{className:"w-8 h-8 text-blue-400"}),s.jsx("span",{className:"text-2xl",children:""})]}),s.jsx("div",{className:"text-3xl font-bold text-white mb-1",children:o?.totalPurchases}),s.jsx("div",{className:"text-sm text-gray-400",children:"Total Purchases"})]}),s.jsxs("div",{className:"bg-gradient-to-br from-green-500/20 to-green-600/10 backdrop-blur-md rounded-xl p-6 border border-green-500/20",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx(ml,{className:"w-8 h-8 text-green-400"}),s.jsx("span",{className:"text-2xl",children:""})]}),s.jsx("div",{className:"text-3xl font-bold text-white mb-1",children:o?.totalEvents}),s.jsx("div",{className:"text-sm text-gray-400",children:"Total Events"})]}),s.jsxs("div",{className:"bg-gradient-to-br from-purple-500/20 to-purple-600/10 backdrop-blur-md rounded-xl p-6 border border-purple-500/20",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx(Tf,{className:"w-8 h-8 text-purple-400"}),s.jsx("span",{className:"text-2xl",children:""})]}),s.jsxs("div",{className:"text-3xl font-bold text-white mb-1",children:["$",o?.avgOrderValue.toFixed(2)]}),s.jsx("div",{className:"text-sm text-gray-400",children:"Avg Order Value"})]})]}),s.jsxs("div",{className:"bg-gray-800/30 backdrop-blur-md rounded-xl border border-gray-700 overflow-hidden mb-8",children:[s.jsx("div",{className:"p-6 border-b border-gray-700",children:s.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[s.jsx(kT,{className:"w-5 h-5 text-red-500"}),"Event Performance"]})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-900/50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Event"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Organization"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Purchases"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Revenue"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Avg Order"}),s.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Status"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-700",children:o?.eventStats.map(C=>s.jsxs("tr",{className:"hover:bg-gray-700/30 transition-colors",children:[s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsx("div",{className:"text-sm font-medium text-white",children:C.title}),s.jsx("div",{className:"text-xs text-gray-400",children:new Date(C.start_time).toLocaleDateString()})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:C.organizations?.display_name||C.organization}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:s.jsx("div",{className:"text-sm font-medium text-white",children:C.purchases})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:s.jsxs("div",{className:"text-sm font-bold text-green-400",children:["$",C.revenue.toFixed(2)]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:s.jsxs("div",{className:"text-sm text-gray-300",children:["$",C.avgOrderValue.toFixed(2)]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:s.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${C.status==="live"?"bg-green-500/20 text-green-400":C.status==="published"?"bg-blue-500/20 text-blue-400":C.status==="ended"?"bg-gray-500/20 text-gray-400":"bg-yellow-500/20 text-yellow-400"}`,children:C.status})})]},C.id))})]})}),o?.eventStats.length===0&&s.jsx("div",{className:"text-center py-12 text-gray-500",children:"No events found"})]}),s.jsxs("div",{className:"bg-gray-800/30 backdrop-blur-md rounded-xl border border-gray-700 p-6",children:[s.jsxs("h2",{className:"text-xl font-bold text-white mb-6 flex items-center gap-2",children:[s.jsx(Tf,{className:"w-5 h-5 text-red-500"}),"Revenue Trend (Last 30 Days)"]}),o?.dailyRevenue&&o.dailyRevenue.length>0?s.jsx("div",{className:"space-y-2",children:o.dailyRevenue.map(([C,I])=>{const D=Math.max(...o.dailyRevenue.map(G=>G[1])),U=I/D*100;return s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"text-xs text-gray-400 w-24",children:new Date(C).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),s.jsx("div",{className:"flex-1 bg-gray-700/30 rounded-full h-8 overflow-hidden relative",children:s.jsx("div",{className:"bg-gradient-to-r from-red-500 to-red-600 h-full rounded-full transition-all duration-500 flex items-center px-3",style:{width:`${U}%`},children:I>0&&s.jsxs("span",{className:"text-xs font-medium text-white whitespace-nowrap",children:["$",I.toFixed(2)]})})})]},C)})}):s.jsx("div",{className:"text-center py-12 text-gray-500",children:"No revenue data available"})]})]})})}const r6e=[{id:"standard",name:"Standard",description:"Single-camera livestream coverage"},{id:"premium",name:"Premium",description:"Multi-camera with graphics package"},{id:"enterprise",name:"Enterprise",description:"Full production with replays & commentary"}],dK={standard:["Professional single-camera livestream","Basic graphics overlay","YouTube/Facebook streaming","Post-event highlight reel (60-90s)"],premium:["Multi-camera setup (2-3 cameras)","Professional graphics package","Multi-platform streaming","On-screen score/time overlays","Post-event highlight reel (2-3 mins)","Full event replay access"],enterprise:["Full multi-camera production (4+ cameras)","Premium graphics & animations","Live instant replays","Commentary integration","Multi-platform streaming","Athlete social media clips","Full event replay with chapters","Dedicated production manager"]},n6e=["Combat Sports","MMA","Boxing","BJJ/Grappling","Muay Thai/Kickboxing","Bodybuilding/Fitness","Powerlifting","CrossFit","Other"],i6e={draft:"bg-gray-500/20 text-gray-300",sent:"bg-blue-500/20 text-blue-300",viewed:"bg-yellow-500/20 text-yellow-300",accepted:"bg-green-500/20 text-green-300",declined:"bg-red-500/20 text-red-300"};function s6e(){const[t,e]=T.useState([]),[r,n]=T.useState(!0),[i,a]=T.useState(null),[o,c]=T.useState(""),[u,l]=T.useState("all"),[d,f]=T.useState(!1),[m,p]=T.useState(null),[g,y]=T.useState(null),[x,w]=T.useState(null),[_,E]=T.useState(!1);T.useEffect(()=>{N()},[]);async function N(){try{n(!0);const J=await dRe();e(J||[])}catch(J){console.error("Error loading proposals:",J),a(J.message)}finally{n(!1)}}const C=t.filter(J=>{const de=J.org_name?.toLowerCase().includes(o.toLowerCase())||J.contact_name?.toLowerCase().includes(o.toLowerCase())||J.event_name?.toLowerCase().includes(o.toLowerCase()),xe=u==="all"||J.status===u;return de&&xe});function I(J){const de=`${window.location.origin}/#/proposals/${J}`;navigator.clipboard.writeText(de),y(J),setTimeout(()=>y(null),2e3)}async function D(J,de){try{await gRe(J,de),e(xe=>xe.map(we=>we.id===J?{...we,status:de}:we))}catch(xe){console.error("Error updating status:",xe)}}async function U(J){if(confirm("Are you sure you want to delete this proposal?"))try{await ARe(J),e(de=>de.filter(xe=>xe.id!==J))}catch(de){console.error("Error deleting proposal:",de)}}async function G(J,de=""){E(!0);try{await vRe(J,null,de),e(xe=>xe.map(we=>we.id===J?{...we,status:"sent",sent_at:new Date().toISOString()}:we)),w(null),alert("Email sent successfully!")}catch(xe){console.error("Error sending email:",xe),alert("Failed to send email: "+xe.message)}finally{E(!1)}}const q={total:t.length,sent:t.filter(J=>J.status==="sent").length,viewed:t.filter(J=>J.status==="viewed").length,accepted:t.filter(J=>J.status==="accepted").length,totalViews:t.reduce((J,de)=>J+(de.views||0),0)};return s.jsx("div",{className:"min-h-screen bg-[#0a0a0f] text-white p-6",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-8",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Proposal Generator"}),s.jsx("p",{className:"text-gray-400 mt-1",children:"Create and manage custom proposals for prospects"})]}),s.jsxs("button",{onClick:()=>f(!0),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-red-600 to-orange-600 rounded-lg font-medium hover:opacity-90 transition-opacity",children:[s.jsx(jf,{size:20}),"New Proposal"]})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-8",children:[s.jsx(dw,{label:"Total",value:q.total,icon:Ub}),s.jsx(dw,{label:"Sent",value:q.sent,icon:Qb,color:"blue"}),s.jsx(dw,{label:"Viewed",value:q.viewed,icon:H0,color:"yellow"}),s.jsx(dw,{label:"Accepted",value:q.accepted,icon:la,color:"green"}),s.jsx(dw,{label:"Total Views",value:q.totalViews,icon:Tf,color:"purple"})]}),s.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(IT,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),s.jsx("input",{type:"text",placeholder:"Search proposals...",value:o,onChange:J=>c(J.target.value),className:"w-full pl-10 pr-4 py-2 bg-white/5 border border-white/10 rounded-lg focus:outline-none focus:border-red-500/50"})]}),s.jsxs("select",{value:u,onChange:J=>l(J.target.value),className:"px-4 py-2 bg-white/5 border border-white/10 rounded-lg focus:outline-none focus:border-red-500/50",children:[s.jsx("option",{value:"all",children:"All Status"}),s.jsx("option",{value:"draft",children:"Draft"}),s.jsx("option",{value:"sent",children:"Sent"}),s.jsx("option",{value:"viewed",children:"Viewed"}),s.jsx("option",{value:"accepted",children:"Accepted"}),s.jsx("option",{value:"declined",children:"Declined"})]})]}),r?s.jsx("div",{className:"text-center py-12 text-gray-400",children:"Loading proposals..."}):i?s.jsx("div",{className:"text-center py-12 text-red-400",children:i}):C.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Ub,{size:48,className:"mx-auto text-gray-600 mb-4"}),s.jsx("p",{className:"text-gray-400",children:"No proposals found"}),s.jsx("button",{onClick:()=>f(!0),className:"mt-4 text-red-400 hover:text-red-300",children:"Create your first proposal"})]}):s.jsx("div",{className:"space-y-4",children:C.map(J=>s.jsx(a6e,{proposal:J,onEdit:()=>p(J),onDelete:()=>U(J.id),onCopyLink:()=>I(J.slug),onStatusChange:de=>D(J.id,de),onSendEmail:()=>w(J),copied:g===J.slug},J.id))}),s.jsx(Gp,{children:(d||m)&&s.jsx(o6e,{proposal:m,onClose:()=>{f(!1),p(null)},onSave:async J=>{m?await eF(m.id,J):await mRe(J),N(),f(!1),p(null)}})}),s.jsx(Gp,{children:x&&s.jsx(c6e,{proposal:x,sending:_,onClose:()=>w(null),onSend:J=>G(x.id,J)})})]})})}function dw({label:t,value:e,icon:r,color:n="gray"}){const i={gray:"from-gray-600 to-gray-700",blue:"from-blue-600 to-blue-700",yellow:"from-yellow-600 to-yellow-700",green:"from-green-600 to-green-700",purple:"from-purple-600 to-purple-700"};return s.jsx("div",{className:"bg-white/5 border border-white/10 rounded-xl p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`p-2 rounded-lg bg-gradient-to-br ${i[n]}`,children:s.jsx(r,{size:20})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:e}),s.jsx("p",{className:"text-sm text-gray-400",children:t})]})]})})}function a6e({proposal:t,onEdit:e,onDelete:r,onCopyLink:n,onStatusChange:i,onSendEmail:a,copied:o}){const[c,u]=T.useState(!1);return s.jsx(Dr.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-white/5 border border-white/10 rounded-xl p-6 hover:border-white/20 transition-colors",children:s.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("h3",{className:"text-xl font-semibold",children:t.org_name}),s.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${i6e[t.status]}`,children:t.status})]}),s.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-400",children:[t.event_name&&s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(ml,{size:14}),t.event_name]}),t.contact_name&&s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(eg,{size:14}),t.contact_name]}),t.price&&s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Gh,{size:14}),"$",t.price.toLocaleString()]}),t.views>0&&s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(H0,{size:14}),t.views," view",t.views!==1?"s":""]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"relative",children:[s.jsxs("button",{onClick:()=>u(!c),className:"flex items-center gap-1 px-3 py-1.5 bg-white/5 rounded-lg hover:bg-white/10 transition-colors text-sm",children:["Status",s.jsx(F0,{size:14})]}),c&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>u(!1)}),s.jsx("div",{className:"absolute right-0 top-full mt-1 bg-[#1a1a2e] border border-white/10 rounded-lg shadow-xl z-20 min-w-[120px]",children:["draft","sent","viewed","accepted","declined"].map(l=>s.jsx("button",{onClick:()=>{i(l),u(!1)},className:`w-full text-left px-3 py-2 hover:bg-white/5 text-sm capitalize ${t.status===l?"text-red-400":""}`,children:l},l))})]})]}),t.contact_email&&s.jsx("button",{onClick:a,className:"p-2 bg-white/5 rounded-lg hover:bg-blue-500/20 hover:text-blue-400 transition-colors",title:`Send to ${t.contact_email}`,children:s.jsx(Qb,{size:18})}),s.jsx("button",{onClick:n,className:"p-2 bg-white/5 rounded-lg hover:bg-white/10 transition-colors",title:"Copy proposal link",children:o?s.jsx(la,{size:18,className:"text-green-400"}):s.jsx(Mb,{size:18})}),s.jsx("a",{href:`/#/proposals/${t.slug}`,target:"_blank",rel:"noopener noreferrer",className:"p-2 bg-white/5 rounded-lg hover:bg-white/10 transition-colors",title:"View proposal",children:s.jsx(Fb,{size:18})}),s.jsx("button",{onClick:e,className:"p-2 bg-white/5 rounded-lg hover:bg-white/10 transition-colors",title:"Edit proposal",children:s.jsx(xB,{size:18})}),s.jsx("button",{onClick:r,className:"p-2 bg-white/5 rounded-lg hover:bg-red-500/20 hover:text-red-400 transition-colors",title:"Delete proposal",children:s.jsx(Jp,{size:18})})]})]})})}function o6e({proposal:t,onClose:e,onSave:r}){const[n,i]=T.useState(!1),[a,o]=T.useState("form"),[c,u]=T.useState({org_name:t?.org_name||"",contact_name:t?.contact_name||"",contact_email:t?.contact_email||"",contact_phone:t?.contact_phone||"",event_name:t?.event_name||"",event_date:t?.event_date||"",event_type:t?.event_type||"Combat Sports",package:t?.package||"premium",price:t?.price||"",inclusions:t?.inclusions||dK.premium,custom_notes:t?.custom_notes||"",status:t?.status||"draft"});function l(g){u(y=>({...y,package:g,inclusions:dK[g]||[]}))}function d(){u(g=>({...g,inclusions:[...g.inclusions||[],""]}))}function f(g,y){u(x=>({...x,inclusions:x.inclusions.map((w,_)=>_===g?y:w)}))}function m(g){u(y=>({...y,inclusions:y.inclusions.filter((x,w)=>w!==g)}))}async function p(g){g.preventDefault(),i(!0);try{await r({...c,price:c.price?parseFloat(c.price):null,inclusions:c.inclusions.filter(y=>y.trim())})}catch(y){console.error("Error saving proposal:",y),alert("Error saving proposal: "+y.message)}finally{i(!1)}}return s.jsx(Dr.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/90 flex items-stretch z-50",onClick:e,children:s.jsxs(Dr.div,{initial:{scale:.98,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.98,opacity:0},onClick:g=>g.stopPropagation(),className:"flex flex-col lg:flex-row w-full h-full",children:[s.jsxs("div",{className:"lg:hidden flex border-b border-white/10 bg-[#12121a]",children:[s.jsx("button",{onClick:()=>o("form"),className:`flex-1 py-3 text-center font-medium ${a==="form"?"text-red-400 border-b-2 border-red-400":"text-gray-400"}`,children:"Edit Form"}),s.jsx("button",{onClick:()=>o("preview"),className:`flex-1 py-3 text-center font-medium ${a==="preview"?"text-red-400 border-b-2 border-red-400":"text-gray-400"}`,children:"Live Preview"})]}),s.jsx("div",{className:`lg:w-1/2 bg-[#12121a] flex flex-col overflow-hidden ${a==="form"?"flex":"hidden lg:flex"}`,children:s.jsxs("form",{onSubmit:p,className:"flex flex-col h-full",children:[s.jsxs("div",{className:"shrink-0 border-b border-white/10 p-4 lg:p-6 flex items-center justify-between",children:[s.jsx("h2",{className:"text-xl lg:text-2xl font-bold",children:t?"Edit Proposal":"Create New Proposal"}),s.jsx("button",{type:"button",onClick:e,className:"p-2 hover:bg-white/10 rounded-lg transition-colors",children:""})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-4 lg:p-6 space-y-6",children:[s.jsxs("section",{children:[s.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[s.jsx(dR,{size:20,className:"text-red-400"}),"Organization Details"]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Organization Name *"}),s.jsx("input",{type:"text",required:!0,value:c.org_name,onChange:g=>u(y=>({...y,org_name:g.target.value})),className:"w-full px-4 py-2 bg-white/5 border border-white/10 rounded-lg focus:outline-none focus:border-red-500/50",placeholder:"e.g., Inception Fight Series"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Event Type"}),s.jsx("select",{value:c.event_type,onChange:g=>u(y=>({...y,event_type:g.target.value})),className:"w-full px-4 py-2 bg-white/5 border border-white/10 rounded-lg focus:outline-none focus:border-red-500/50",children:n6e.map(g=>s.jsx("option",{value:g,children:g},g))})]})]})]}),s.jsxs("section",{children:[s.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[s.jsx(eg,{size:20,className:"text-red-400"}),"Contact Details"]}),s.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Contact Name"}),s.jsx("input",{type:"text",value:c.contact_name,onChange:g=>u(y=>({...y,contact_name:g.target.value})),className:"w-full px-4 py-2 bg-white/5 border border-white/10 rounded-lg focus:outline-none focus:border-red-500/50",placeholder:"John Smith"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Email"}),s.jsx("input",{type:"email",value:c.contact_email,onChange:g=>u(y=>({...y,contact_email:g.target.value})),className:"w-full px-4 py-2 bg-white/5 border border-white/10 rounded-lg focus:outline-none focus:border-red-500/50",placeholder:"john@example.com"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Phone"}),s.jsx("input",{type:"tel",value:c.contact_phone,onChange:g=>u(y=>({...y,contact_phone:g.target.value})),className:"w-full px-4 py-2 bg-white/5 border border-white/10 rounded-lg focus:outline-none focus:border-red-500/50",placeholder:"0400 000 000"})]})]})]}),s.jsxs("section",{children:[s.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[s.jsx(ml,{size:20,className:"text-red-400"}),"Event Details"]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Event Name"}),s.jsx("input",{type:"text",value:c.event_name,onChange:g=>u(y=>({...y,event_name:g.target.value})),className:"w-full px-4 py-2 bg-white/5 border border-white/10 rounded-lg focus:outline-none focus:border-red-500/50",placeholder:"e.g., Fight Night 12"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Event Date"}),s.jsx("input",{type:"date",value:c.event_date,onChange:g=>u(y=>({...y,event_date:g.target.value})),className:"w-full px-4 py-2 bg-white/5 border border-white/10 rounded-lg focus:outline-none focus:border-red-500/50"})]})]})]}),s.jsxs("section",{children:[s.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[s.jsx(Gh,{size:20,className:"text-red-400"}),"Package & Pricing"]}),s.jsx("div",{className:"grid md:grid-cols-3 gap-3 mb-4",children:r6e.map(g=>s.jsxs("button",{type:"button",onClick:()=>l(g.id),className:`p-3 rounded-xl border-2 text-left transition-all ${c.package===g.id?"border-red-500 bg-red-500/10":"border-white/10 hover:border-white/20"}`,children:[s.jsx("p",{className:"font-semibold text-sm",children:g.name}),s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:g.description})]},g.id))}),s.jsxs("div",{className:"max-w-xs",children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Price (AUD)"}),s.jsxs("div",{className:"relative",children:[s.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400",children:"$"}),s.jsx("input",{type:"number",value:c.price,onChange:g=>u(y=>({...y,price:g.target.value})),className:"w-full pl-8 pr-4 py-2 bg-white/5 border border-white/10 rounded-lg focus:outline-none focus:border-red-500/50",placeholder:"0.00",step:"0.01",min:"0"})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Leave blank for "Contact for pricing"'})]})]}),s.jsxs("section",{children:[s.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[s.jsx(vb,{size:20,className:"text-red-400"}),"What's Included"]}),s.jsxs("div",{className:"space-y-2",children:[(c.inclusions||[]).map((g,y)=>s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:g,onChange:x=>f(y,x.target.value),className:"flex-1 px-4 py-2 bg-white/5 border border-white/10 rounded-lg focus:outline-none focus:border-red-500/50 text-sm",placeholder:"Inclusion item..."}),s.jsx("button",{type:"button",onClick:()=>m(y),className:"p-2 text-gray-400 hover:text-red-400",children:s.jsx(Jp,{size:18})})]},y)),s.jsxs("button",{type:"button",onClick:d,className:"text-sm text-red-400 hover:text-red-300 flex items-center gap-1",children:[s.jsx(jf,{size:16}),"Add inclusion"]})]})]}),s.jsxs("section",{children:[s.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[s.jsx(Ub,{size:20,className:"text-red-400"}),"Custom Notes"]}),s.jsx("textarea",{value:c.custom_notes,onChange:g=>u(y=>({...y,custom_notes:g.target.value})),rows:3,className:"w-full px-4 py-2 bg-white/5 border border-white/10 rounded-lg focus:outline-none focus:border-red-500/50 resize-none text-sm",placeholder:"Any additional notes or custom terms..."})]}),s.jsxs("section",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Status"}),s.jsxs("select",{value:c.status,onChange:g=>u(y=>({...y,status:g.target.value})),className:"px-4 py-2 bg-white/5 border border-white/10 rounded-lg focus:outline-none focus:border-red-500/50",children:[s.jsx("option",{value:"draft",children:"Draft"}),s.jsx("option",{value:"sent",children:"Sent"}),s.jsx("option",{value:"viewed",children:"Viewed"}),s.jsx("option",{value:"accepted",children:"Accepted"}),s.jsx("option",{value:"declined",children:"Declined"})]})]})]}),s.jsxs("div",{className:"shrink-0 border-t border-white/10 p-4 lg:p-6 flex justify-end gap-4 bg-[#12121a]",children:[s.jsx("button",{type:"button",onClick:e,className:"px-6 py-2 bg-white/5 rounded-lg hover:bg-white/10 transition-colors",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:n||!c.org_name,className:"px-6 py-2 bg-gradient-to-r from-red-600 to-orange-600 rounded-lg font-medium hover:opacity-90 transition-opacity disabled:opacity-50",children:n?"Saving...":t?"Update Proposal":"Create Proposal"})]})]})}),s.jsxs("div",{className:`lg:w-1/2 bg-[#0a0a0f] flex flex-col overflow-hidden border-l border-white/10 ${a==="preview"?"flex":"hidden lg:flex"}`,children:[s.jsx("div",{className:"shrink-0 border-b border-white/10 p-4 lg:p-6 bg-[#0a0a0f]",children:s.jsxs("div",{className:"flex items-center gap-2 text-gray-400",children:[s.jsx(H0,{size:18}),s.jsx("span",{className:"font-medium",children:"Live Preview"}),s.jsx("span",{className:"text-xs text-gray-500 ml-auto",children:"Updates as you type"})]})}),s.jsx("div",{className:"flex-1 overflow-y-auto",children:s.jsx(l6e,{form:c})})]})]})})}function l6e({form:t}){const e=[{value:"25+",label:"Events",icon:bh},{value:"4",label:"Countries",icon:f1},{value:"50K+",label:"Viewers",icon:nh},{value:"100%",label:"Satisfaction",icon:$N}];return s.jsxs("div",{className:"min-h-full bg-[#0a0a0f] text-white",children:[s.jsxs("section",{className:"relative py-12 px-6 overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-red-600/10 via-transparent to-transparent"}),s.jsx("div",{className:"absolute top-1/4 left-1/4 w-64 h-64 bg-red-600/20 rounded-full blur-3xl"}),s.jsxs("div",{className:"max-w-2xl mx-auto text-center relative z-10",children:[s.jsx("p",{className:"text-red-400 font-medium mb-3 tracking-wide text-sm",children:"PREPARED FOR"}),s.jsx("h1",{className:"text-2xl md:text-4xl font-bold mb-4 bg-gradient-to-r from-white via-gray-200 to-gray-400 bg-clip-text text-transparent",children:t.org_name||"Organization Name"}),(t.event_name||t.event_date)&&s.jsxs("p",{className:"text-lg text-gray-300 mb-6",children:[t.event_name||"Event Name",t.event_date&&s.jsxs("span",{className:"text-gray-500",children:["  ",new Date(t.event_date).toLocaleDateString("en-AU",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]})]}),s.jsx("p",{className:"text-sm text-gray-400 max-w-xl mx-auto",children:"Professional livestream production that brings your events to audiences worldwide  at zero upfront cost to you."})]})]}),s.jsx("section",{className:"py-4 border-y border-white/10 bg-white/5",children:s.jsx("div",{className:"max-w-4xl mx-auto px-6",children:s.jsx("div",{className:"grid grid-cols-4 gap-4",children:e.map((r,n)=>s.jsxs("div",{className:"text-center",children:[s.jsx(r.icon,{className:"w-4 h-4 mx-auto mb-1 text-red-400"}),s.jsx("p",{className:"text-lg font-bold",children:r.value}),s.jsx("p",{className:"text-xs text-gray-400",children:r.label})]},n))})})}),s.jsx("section",{className:"py-8 px-6",children:s.jsx("div",{className:"max-w-2xl mx-auto",children:s.jsxs("div",{className:"bg-gradient-to-br from-white/10 to-white/5 border border-white/20 rounded-2xl p-6",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6 pb-6 border-b border-white/10",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-red-400 font-medium mb-1 text-sm",children:"YOUR PACKAGE"}),s.jsxs("h2",{className:"text-xl font-bold capitalize",children:[t.package||"Custom"," Package"]}),t.event_type&&s.jsx("p",{className:"text-gray-400 text-sm mt-1",children:t.event_type})]}),s.jsx("div",{className:"text-right",children:t.price?s.jsxs(s.Fragment,{children:[s.jsxs("p",{className:"text-2xl font-bold text-white",children:["$",parseFloat(t.price).toLocaleString()]}),s.jsx("p",{className:"text-xs text-gray-400",children:"AUD"})]}):s.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Contact for pricing"})})]}),t.inclusions&&t.inclusions.filter(r=>r.trim()).length>0&&s.jsxs("div",{className:"mb-6",children:[s.jsxs("h3",{className:"text-sm font-semibold mb-3 flex items-center gap-2",children:[s.jsx(vb,{className:"text-green-400",size:16}),"What's Included"]}),s.jsx("ul",{className:"grid md:grid-cols-2 gap-2",children:t.inclusions.filter(r=>r.trim()).map((r,n)=>s.jsxs("li",{className:"flex items-start gap-2 text-sm",children:[s.jsx(la,{className:"w-4 h-4 text-green-400 shrink-0 mt-0.5"}),s.jsx("span",{className:"text-gray-300",children:r})]},n))})]}),t.custom_notes&&s.jsxs("div",{className:"bg-white/5 rounded-xl p-4 mb-6",children:[s.jsx("h3",{className:"font-semibold mb-2 text-sm",children:"Additional Notes"}),s.jsx("p",{className:"text-gray-300 whitespace-pre-wrap text-sm",children:t.custom_notes})]}),s.jsx("div",{className:"bg-gradient-to-r from-green-600/20 to-emerald-600/20 border border-green-500/30 rounded-xl p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"p-2 bg-green-500/20 rounded-lg",children:s.jsx(Gh,{className:"w-5 h-5 text-green-400"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-semibold text-green-400 mb-1",children:"Zero Upfront Cost Model"}),s.jsx("p",{className:"text-gray-300 text-xs",children:"FFM operates on a revenue-share model. You pay nothing upfront  we earn through pay-per-view ticket sales."})]})]})})]})})}),s.jsx("section",{className:"py-8 px-6 bg-white/5",children:s.jsxs("div",{className:"max-w-2xl mx-auto",children:[s.jsx("h2",{className:"text-lg font-bold text-center mb-6",children:"How It Works"}),s.jsx("div",{className:"grid grid-cols-3 gap-4",children:[{step:"1",title:"We Produce",icon:bh},{step:"2",title:"Fans Watch",icon:nh},{step:"3",title:"You Earn",icon:Tf}].map((r,n)=>s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-10 h-10 mx-auto mb-2 bg-gradient-to-br from-red-600 to-orange-600 rounded-xl flex items-center justify-center",children:s.jsx(r.icon,{size:18})}),s.jsx("h3",{className:"text-sm font-semibold",children:r.title})]},n))})]})}),s.jsx("section",{className:"py-8 px-6",children:s.jsx("div",{className:"max-w-2xl mx-auto",children:s.jsxs("div",{className:"bg-gradient-to-br from-red-600/20 to-orange-600/20 border border-red-500/30 rounded-2xl p-6 text-center",children:[s.jsx("h2",{className:"text-xl font-bold mb-2",children:"Ready to Get Started?"}),s.jsxs("p",{className:"text-gray-300 mb-4 text-sm",children:["Let's discuss how we can bring professional livestream production to ",t.org_name||"your organization","."]}),s.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-3",children:[s.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-red-600 to-orange-600 rounded-xl font-medium text-sm",children:[s.jsx(my,{size:16}),"0411 934 935"]}),s.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-white/10 border border-white/20 rounded-xl font-medium text-sm",children:[s.jsx(tu,{size:16}),"Email Us"]})]}),t.contact_name&&s.jsxs("p",{className:"mt-4 text-xs text-gray-400",children:["Prepared for ",t.contact_name,t.contact_email&&` (${t.contact_email})`]})]})})}),s.jsx("footer",{className:"py-4 px-6 border-t border-white/10 text-center text-gray-400 text-xs",children:s.jsxs("p",{children:[" ",new Date().getFullYear()," Fit Focus Media"]})})]})}function c6e({proposal:t,sending:e,onClose:r,onSend:n}){const[i,a]=T.useState("");return s.jsx(Dr.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onClick:r,children:s.jsxs(Dr.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},onClick:o=>o.stopPropagation(),className:"bg-[#12121a] border border-white/10 rounded-2xl max-w-md w-full p-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx("div",{className:"p-3 bg-blue-500/20 rounded-xl",children:s.jsx(Qb,{size:24,className:"text-blue-400"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold",children:"Send Proposal"}),s.jsxs("p",{className:"text-sm text-gray-400",children:["Email to ",t.contact_email]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-white/5 rounded-xl p-4",children:[s.jsx("p",{className:"font-semibold",children:t.org_name}),t.event_name&&s.jsx("p",{className:"text-sm text-gray-400",children:t.event_name}),t.price&&s.jsxs("p",{className:"text-lg font-bold text-red-400 mt-2",children:["$",t.price.toLocaleString()," AUD"]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Add a personal message (optional)"}),s.jsx("textarea",{value:i,onChange:o=>a(o.target.value),rows:3,className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg focus:outline-none focus:border-blue-500/50 resize-none text-sm",placeholder:"e.g., Looking forward to working with you on this event..."})]}),t.sent_at&&s.jsxs("div",{className:"flex items-center gap-2 text-sm text-yellow-400 bg-yellow-500/10 rounded-lg px-3 py-2",children:[s.jsx(zh,{size:16}),"Previously sent ",new Date(t.sent_at).toLocaleDateString()]})]}),s.jsxs("div",{className:"flex gap-3 mt-6",children:[s.jsx("button",{onClick:r,className:"flex-1 px-4 py-3 bg-white/5 rounded-lg hover:bg-white/10 transition-colors",children:"Cancel"}),s.jsx("button",{onClick:()=>n(i),disabled:e,className:"flex-1 px-4 py-3 bg-gradient-to-r from-blue-600 to-blue-700 rounded-lg font-medium hover:opacity-90 transition-opacity disabled:opacity-50 flex items-center justify-center gap-2",children:e?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Sending..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Qb,{size:18}),"Send Email"]})})]})]})})}const u6e=[{value:"25+",label:"Events Produced",icon:bh},{value:"4",label:"Countries",icon:f1},{value:"50K+",label:"Viewers Reached",icon:nh},{value:"100%",label:"Client Satisfaction",icon:$N}],yI=[{quote:"FFM transformed how we share our events with the world. Professional quality, zero hassle.",author:"Phil Cassidy",role:"Inception Fight Series"},{quote:"The athlete content packages have been a game-changer for our fighters' social media presence.",author:"Event Promoter",role:"Combat Sports Organisation"}];function d6e(){const{slug:t}=Kh(),[e,r]=T.useState(null),[n,i]=T.useState(!0),[a,o]=T.useState(null);T.useEffect(()=>{c()},[t]);async function c(){try{i(!0);const u=await fRe(t);r(u),pRe(t).catch(console.error)}catch(u){console.error("Error loading proposal:",u),o("Proposal not found")}finally{i(!1)}}return n?s.jsx("div",{className:"min-h-screen bg-[#0a0a0f] flex items-center justify-center",children:s.jsx("div",{className:"animate-pulse text-gray-400",children:"Loading proposal..."})}):a||!e?s.jsxs("div",{className:"min-h-screen bg-[#0a0a0f] flex flex-col items-center justify-center text-center p-6",children:[s.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"Proposal Not Found"}),s.jsx("p",{className:"text-gray-400 mb-6",children:"This proposal may have expired or been removed."}),s.jsx(rs,{to:"/",className:"px-6 py-3 bg-gradient-to-r from-red-600 to-orange-600 rounded-lg font-medium",children:"Visit Our Website"})]}):s.jsxs("div",{className:"min-h-screen bg-[#0a0a0f] text-white",children:[s.jsxs("section",{className:"relative py-20 px-6 overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-red-600/10 via-transparent to-transparent"}),s.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-red-600/20 rounded-full blur-3xl"}),s.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-96 h-96 bg-orange-600/20 rounded-full blur-3xl"}),s.jsx("div",{className:"max-w-4xl mx-auto text-center relative z-10",children:s.jsxs(Dr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[s.jsx("div",{className:"flex justify-center mb-8",children:s.jsx("img",{src:"/logo.png",alt:"Fit Focus Media",className:"h-16 w-auto",onError:u=>u.target.style.display="none"})}),s.jsx("p",{className:"text-red-400 font-medium mb-4 tracking-wide",children:"PREPARED FOR"}),s.jsx("h1",{className:"text-4xl md:text-6xl font-bold mb-6 bg-gradient-to-r from-white via-gray-200 to-gray-400 bg-clip-text text-transparent",children:e.org_name}),e.event_name&&s.jsxs("p",{className:"text-xl text-gray-300 mb-8",children:[e.event_name,e.event_date&&s.jsxs("span",{className:"text-gray-500",children:["  ",new Date(e.event_date).toLocaleDateString("en-AU",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]})]}),s.jsx("p",{className:"text-lg text-gray-400 max-w-2xl mx-auto",children:"Professional livestream production that brings your events to audiences worldwide  at zero upfront cost to you."})]})})]}),s.jsx("section",{className:"py-8 border-y border-white/10 bg-white/5",children:s.jsx("div",{className:"max-w-6xl mx-auto px-6",children:s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:u6e.map((u,l)=>s.jsxs(Dr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:l*.1},className:"text-center",children:[s.jsx(u.icon,{className:"w-6 h-6 mx-auto mb-2 text-red-400"}),s.jsx("p",{className:"text-2xl font-bold",children:u.value}),s.jsx("p",{className:"text-sm text-gray-400",children:u.label})]},l))})})}),s.jsx("section",{className:"py-16 px-6",children:s.jsx("div",{className:"max-w-4xl mx-auto",children:s.jsxs(Dr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-gradient-to-br from-white/10 to-white/5 border border-white/20 rounded-3xl p-8 md:p-12",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-6 mb-8 pb-8 border-b border-white/10",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-red-400 font-medium mb-2",children:"YOUR PACKAGE"}),s.jsxs("h2",{className:"text-3xl font-bold capitalize",children:[e.package||"Custom"," Package"]}),e.event_type&&s.jsx("p",{className:"text-gray-400 mt-1",children:e.event_type})]}),s.jsx("div",{className:"text-right",children:e.price?s.jsxs(s.Fragment,{children:[s.jsxs("p",{className:"text-4xl font-bold text-white",children:["$",e.price.toLocaleString()]}),s.jsx("p",{className:"text-sm text-gray-400",children:"AUD"})]}):s.jsx("p",{className:"text-xl font-medium text-gray-300",children:"Contact for pricing"})})]}),e.inclusions&&e.inclusions.length>0&&s.jsxs("div",{className:"mb-8",children:[s.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[s.jsx(vb,{className:"text-green-400",size:20}),"What's Included"]}),s.jsx("ul",{className:"grid md:grid-cols-2 gap-3",children:e.inclusions.map((u,l)=>s.jsxs("li",{className:"flex items-start gap-3",children:[s.jsx(la,{className:"w-5 h-5 text-green-400 shrink-0 mt-0.5"}),s.jsx("span",{className:"text-gray-300",children:u})]},l))})]}),e.custom_notes&&s.jsxs("div",{className:"bg-white/5 rounded-xl p-6 mb-8",children:[s.jsx("h3",{className:"font-semibold mb-2",children:"Additional Notes"}),s.jsx("p",{className:"text-gray-300 whitespace-pre-wrap",children:e.custom_notes})]}),s.jsx("div",{className:"bg-gradient-to-r from-green-600/20 to-emerald-600/20 border border-green-500/30 rounded-xl p-6",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"p-3 bg-green-500/20 rounded-xl",children:s.jsx(Gh,{className:"w-6 h-6 text-green-400"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-green-400 mb-2",children:"Zero Upfront Cost Model"}),s.jsx("p",{className:"text-gray-300",children:"FFM operates on a revenue-share model for livestream events. You pay nothing upfront  we earn through pay-per-view ticket sales. Your success is our success."})]})]})})]})})}),s.jsx("section",{className:"py-16 px-6 bg-white/5",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsx("h2",{className:"text-2xl font-bold text-center mb-12",children:"How It Works"}),s.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:[{step:"1",title:"We Produce",description:"Professional multi-camera production, graphics, and streaming setup.",icon:bh},{step:"2",title:"Fans Watch",description:"Viewers purchase pay-per-view access through our platform.",icon:nh},{step:"3",title:"You Earn",description:"Revenue is shared  you profit from your event without the production headache.",icon:Tf}].map((u,l)=>s.jsxs(Dr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3+l*.1},className:"text-center",children:[s.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gradient-to-br from-red-600 to-orange-600 rounded-2xl flex items-center justify-center",children:s.jsx(u.icon,{size:28})}),s.jsx("h3",{className:"text-lg font-semibold mb-2",children:u.title}),s.jsx("p",{className:"text-gray-400",children:u.description})]},l))})]})}),s.jsx("section",{className:"py-16 px-6",children:s.jsxs("div",{className:"max-w-3xl mx-auto text-center",children:[s.jsx("div",{className:"flex justify-center mb-4",children:[...Array(5)].map((u,l)=>s.jsx(Ay,{className:"w-5 h-5 text-yellow-400 fill-yellow-400"},l))}),s.jsxs("blockquote",{className:"text-xl md:text-2xl text-gray-200 italic mb-6",children:['"',yI[0].quote,'"']}),s.jsxs("p",{className:"text-gray-400",children:[s.jsx("span",{className:"font-semibold text-white",children:yI[0].author}),"  ",yI[0].role]})]})}),s.jsx("section",{className:"py-16 px-6",children:s.jsx("div",{className:"max-w-4xl mx-auto",children:s.jsxs(Dr.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.4},className:"bg-gradient-to-br from-red-600/20 to-orange-600/20 border border-red-500/30 rounded-3xl p-8 md:p-12 text-center",children:[s.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Ready to Get Started?"}),s.jsxs("p",{className:"text-gray-300 mb-8 max-w-xl mx-auto",children:["Let's discuss how we can bring professional livestream production to ",e.org_name,"."]}),s.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[s.jsxs("a",{href:"tel:0411934935",className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-red-600 to-orange-600 rounded-xl font-medium hover:opacity-90 transition-opacity",children:[s.jsx(my,{size:20}),"Call Brandon: 0411 934 935"]}),s.jsxs("a",{href:"mailto:brandon@fitfocusmedia.com.au",className:"flex items-center gap-2 px-6 py-3 bg-white/10 border border-white/20 rounded-xl font-medium hover:bg-white/15 transition-colors",children:[s.jsx(tu,{size:20}),"Email Us"]})]}),e.contact_name&&s.jsxs("p",{className:"mt-6 text-sm text-gray-400",children:["This proposal was prepared for ",e.contact_name,e.contact_email&&` (${e.contact_email})`]})]})})}),s.jsxs("footer",{className:"py-8 px-6 border-t border-white/10 text-center text-gray-400 text-sm",children:[s.jsxs("p",{children:[" ",new Date().getFullYear()," Fit Focus Media. All rights reserved."]}),s.jsx("p",{className:"mt-2",children:s.jsx("a",{href:"https://fitfocusmedia.com.au",className:"hover:text-white transition-colors",children:"fitfocusmedia.com.au"})})]})]})}function One({targetDate:t,large:e=!1}){const[r,n]=T.useState(i(t));T.useEffect(()=>{const a=setInterval(()=>{n(i(t))},1e3);return()=>clearInterval(a)},[t]);function i(a){const o=new Date(a)-new Date;return o<=0?null:{days:Math.floor(o/(1e3*60*60*24)),hours:Math.floor(o/(1e3*60*60)%24),minutes:Math.floor(o/1e3/60%60),seconds:Math.floor(o/1e3%60)}}return r?e?s.jsx("div",{className:"flex gap-4 md:gap-6",children:[{value:r.days,label:"DAYS"},{value:r.hours,label:"HOURS"},{value:r.minutes,label:"MINS"},{value:r.seconds,label:"SECS"}].map((a,o)=>s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"bg-black/50 backdrop-blur-md rounded-xl px-4 py-3 md:px-6 md:py-4 min-w-[70px] md:min-w-[90px] border border-white/10",children:s.jsx("span",{className:"text-3xl md:text-5xl lg:text-6xl font-bold text-white tabular-nums",children:String(a.value).padStart(2,"0")})}),s.jsx("span",{className:"text-xs md:text-sm text-gray-400 mt-2 block font-medium tracking-wider",children:a.label})]},o))}):s.jsx("div",{className:"flex gap-3 md:gap-4",children:[{value:r.days,label:"DAYS"},{value:r.hours,label:"HRS"},{value:r.minutes,label:"MIN"},{value:r.seconds,label:"SEC"}].map((a,o)=>s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"bg-dark-800/80 backdrop-blur-sm rounded-lg px-3 py-2 md:px-4 md:py-3 min-w-[50px] md:min-w-[70px]",children:s.jsx("span",{className:"text-2xl md:text-4xl font-bold text-white tabular-nums",children:String(a.value).padStart(2,"0")})}),s.jsx("span",{className:"text-[10px] md:text-xs text-gray-400 mt-1 block",children:a.label})]},o))}):s.jsx("span",{className:"text-green-400 font-bold text-2xl",children:"Starting Soon!"})}function xI({title:t,events:e,icon:r,accentColor:n="red"}){const i=T.useState(null);return!e||e.length===0?null:s.jsxs("section",{className:"mb-10",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4 px-1",children:[s.jsxs("h2",{className:"text-xl md:text-2xl font-bold text-white flex items-center gap-2",children:[r,t]}),e.length>3&&s.jsxs("span",{className:"text-sm text-gray-500",children:[e.length," events"]})]}),s.jsx("div",{className:"relative group",children:s.jsx("div",{ref:i,className:"flex gap-4 overflow-x-auto pb-4 snap-x snap-mandatory scrollbar-hide",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:e.map(a=>s.jsx("div",{className:"flex-shrink-0 w-[280px] md:w-[320px] snap-start",children:s.jsx(uO,{event:a,compact:!0})},a.id))})})]})}function uO({event:t,featured:e=!1,compact:r=!1}){const[n,i]=T.useState(!1),a=new Date(t.start_time),o=new Date,c=t.status==="live"||t.is_live,u=t.status==="ended"||new Date(t.end_time)<o,l=!c&&!u,d=a.toDateString()===o.toDateString(),f=a.toDateString()===new Date(o.getTime()+864e5).toDateString();return e?s.jsx(rs,{to:`/live/${t.id}`,className:"block group",children:s.jsxs("div",{className:"relative rounded-2xl overflow-hidden aspect-[21/9] md:aspect-[21/8]",children:[s.jsxs("div",{className:"absolute inset-0",children:[t.thumbnail_url&&!n?s.jsx("img",{src:Mh(t.thumbnail_url),alt:t.title,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-105",onError:()=>i(!0)}):s.jsx("div",{className:"w-full h-full bg-gradient-to-br from-red-900 to-dark-900"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-black/50 to-transparent"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 via-transparent to-transparent"})]}),s.jsxs("div",{className:"absolute inset-0 p-6 md:p-10 flex flex-col justify-end",children:[s.jsxs("div",{className:"mb-3",children:[c&&s.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 bg-red-500 text-white text-sm font-bold rounded-full",children:[s.jsx("span",{className:"w-2 h-2 bg-white rounded-full animate-pulse"}),"LIVE NOW"]}),l&&d&&s.jsx("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 bg-amber-500 text-black text-sm font-bold rounded-full",children:"TODAY"}),l&&f&&s.jsx("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 bg-blue-500 text-white text-sm font-bold rounded-full",children:"TOMORROW"})]}),s.jsx("p",{className:"text-red-400 font-semibold text-sm md:text-base mb-1",children:t.org_display_name||t.organization}),s.jsx("h2",{className:"text-2xl md:text-4xl lg:text-5xl font-bold text-white mb-3 group-hover:text-red-400 transition-colors",children:t.title}),s.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm md:text-base text-gray-300 mb-4",children:[s.jsxs("span",{className:"flex items-center gap-1.5",children:[s.jsx(ml,{className:"w-4 h-4"}),a.toLocaleDateString("en-AU",{weekday:"short",day:"numeric",month:"short",timeZone:"UTC"})]}),s.jsxs("span",{className:"flex items-center gap-1.5",children:[s.jsx(zh,{className:"w-4 h-4"}),a.toLocaleTimeString("en-AU",{hour:"2-digit",minute:"2-digit",timeZone:"UTC"})]}),s.jsxs("span",{className:"flex items-center gap-1.5",children:[s.jsx(md,{className:"w-4 h-4"}),t.venue]})]}),s.jsxs("div",{className:"flex items-end justify-between gap-4",children:[l&&s.jsx(One,{targetDate:t.start_time}),c&&s.jsxs("span",{className:"px-6 py-3 bg-red-500 hover:bg-red-600 text-white font-bold rounded-lg transition-colors flex items-center gap-2",children:[s.jsx(Qd,{className:"w-5 h-5 fill-current"}),"Watch Now"]}),s.jsxs("div",{className:"ml-auto",children:[s.jsxs("span",{className:"text-3xl md:text-4xl font-bold text-white",children:["$",t.price]}),s.jsx("span",{className:"text-gray-400 ml-1",children:"AUD"})]})]})]})]})}):s.jsxs(rs,{to:`/live/${t.id}`,className:"group bg-dark-900 rounded-xl overflow-hidden border border-dark-800 hover:border-red-500/50 hover:shadow-lg hover:shadow-red-500/10 transition-all duration-300 ",children:[s.jsxs("div",{className:"relative aspect-video bg-dark-800 overflow-hidden",children:[t.thumbnail_url&&!n?s.jsx("img",{src:Mh(t.thumbnail_url),alt:t.title,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110",onError:()=>i(!0)}):s.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-dark-800 to-dark-900",children:s.jsx(Qd,{className:"w-12 h-12 text-dark-600"})}),s.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/40 transition-colors flex items-center justify-center",children:s.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity transform scale-90 group-hover:scale-100",children:s.jsx("div",{className:"w-14 h-14 rounded-full bg-red-500/90 flex items-center justify-center",children:s.jsx(Qd,{className:"w-6 h-6 text-white fill-current ml-1"})})})}),c&&s.jsxs("div",{className:"absolute top-3 left-3 px-2.5 py-1 bg-red-500 text-white text-xs font-bold rounded-full flex items-center gap-1.5 shadow-lg",children:[s.jsx("span",{className:"w-1.5 h-1.5 bg-white rounded-full animate-pulse"}),"LIVE"]}),u&&t.mux_playback_id&&s.jsx("div",{className:"absolute top-3 left-3 px-2.5 py-1 bg-green-600 text-white text-xs font-medium rounded-full shadow-lg",children:"Replay"}),l&&d&&s.jsx("div",{className:"absolute top-3 left-3 px-2.5 py-1 bg-amber-500 text-black text-xs font-bold rounded-full shadow-lg",children:"TODAY"}),l&&f&&s.jsx("div",{className:"absolute top-3 left-3 px-2.5 py-1 bg-blue-500 text-white text-xs font-bold rounded-full shadow-lg",children:"TOMORROW"}),s.jsxs("div",{className:"absolute bottom-3 right-3 px-2.5 py-1 bg-black/80 backdrop-blur-sm text-white font-bold text-sm rounded-lg",children:["$",t.price]}),s.jsx("div",{className:"absolute bottom-3 left-3 px-2.5 py-1 bg-dark-900/80 backdrop-blur-sm text-gray-300 text-xs font-medium rounded-lg truncate max-w-[60%]",children:t.org_display_name||t.organization})]}),s.jsxs("div",{className:"p-4",children:[s.jsx("h3",{className:"text-lg font-bold text-white mb-2 group-hover:text-red-400 transition-colors line-clamp-1",children:t.title}),s.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-500",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(ml,{className:"w-3.5 h-3.5"}),a.toLocaleDateString("en-AU",{day:"numeric",month:"short",timeZone:"UTC"})]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(zh,{className:"w-3.5 h-3.5"}),a.toLocaleTimeString("en-AU",{hour:"2-digit",minute:"2-digit",timeZone:"UTC"})]})]})]})]})}function h6e({event:t}){const[e,r]=T.useState(!1),n=new Date(t.start_time),i=t.status==="live"||t.is_live;return s.jsxs("section",{className:"relative min-h-[90vh] flex items-center justify-center overflow-hidden",children:[s.jsxs("div",{className:"absolute inset-0",children:[t.thumbnail_url&&!e?s.jsx("img",{src:Mh(t.thumbnail_url),alt:t.title,className:"w-full h-full object-cover scale-105",onError:()=>r(!0)}):s.jsx("div",{className:"w-full h-full bg-gradient-to-br from-red-900 via-dark-900 to-black"}),s.jsx("div",{className:"absolute inset-0 bg-black/60"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-transparent to-black/50"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/70 via-transparent to-black/70"})]}),s.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:s.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[800px] h-[800px] bg-red-500/20 rounded-full blur-[150px] animate-pulse"})}),s.jsxs("div",{className:"relative z-10 max-w-6xl mx-auto px-4 text-center",children:[i?s.jsxs("div",{className:"inline-flex items-center gap-2 px-6 py-2 bg-red-500 text-white font-bold rounded-full mb-6 animate-pulse",children:[s.jsx("span",{className:"w-3 h-3 bg-white rounded-full animate-ping"}),"LIVE NOW"]}):s.jsx("div",{className:"inline-flex items-center gap-2 px-6 py-2 bg-white/10 backdrop-blur-sm text-white font-semibold rounded-full mb-6 border border-white/20",children:s.jsx("span",{className:"text-red-400",children:"NEXT EVENT"})}),s.jsx("p",{className:"text-red-400 font-bold text-lg md:text-xl mb-4 tracking-wide",children:t.org_display_name||t.organization}),s.jsx("h1",{className:"text-4xl md:text-6xl lg:text-7xl xl:text-8xl font-black text-white mb-6 leading-tight",children:t.title}),s.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-4 md:gap-8 text-gray-300 mb-10",children:[s.jsxs("span",{className:"flex items-center gap-2 text-lg",children:[s.jsx(ml,{className:"w-5 h-5 text-red-400"}),n.toLocaleDateString("en-AU",{weekday:"long",day:"numeric",month:"long",timeZone:"UTC"})]}),s.jsxs("span",{className:"flex items-center gap-2 text-lg",children:[s.jsx(zh,{className:"w-5 h-5 text-red-400"}),n.toLocaleTimeString("en-AU",{hour:"2-digit",minute:"2-digit",timeZone:"UTC"})]}),s.jsxs("span",{className:"flex items-center gap-2 text-lg",children:[s.jsx(md,{className:"w-5 h-5 text-red-400"}),t.venue]})]}),!i&&s.jsx("div",{className:"mb-10",children:s.jsx(One,{targetDate:t.start_time,large:!0})}),s.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[s.jsx(rs,{to:`/live/${t.id}`,className:"group px-10 py-4 bg-red-500 hover:bg-red-600 text-white font-bold text-xl rounded-xl transition-all hover:scale-105 hover:shadow-xl hover:shadow-red-500/30 flex items-center gap-3",children:i?s.jsxs(s.Fragment,{children:[s.jsx(Qd,{className:"w-6 h-6 fill-current"}),"Watch Live"]}):s.jsxs(s.Fragment,{children:[s.jsx(BT,{className:"w-6 h-6"}),"Get Tickets  $",t.price]})}),s.jsx("button",{onClick:()=>document.getElementById("upcoming-events")?.scrollIntoView({behavior:"smooth"}),className:"px-10 py-4 bg-white/10 hover:bg-white/20 backdrop-blur-sm text-white font-bold text-xl rounded-xl transition-all border border-white/20 hover:border-white/40",children:"View All Events"})]})]}),s.jsx("div",{className:"absolute bottom-8 left-1/2 -translate-x-1/2 animate-bounce",children:s.jsx("div",{className:"w-8 h-12 rounded-full border-2 border-white/30 flex items-start justify-center p-2",children:s.jsx("div",{className:"w-1.5 h-3 bg-white/50 rounded-full animate-pulse"})})})]})}function f6e(){const t=[{icon:s.jsx($p,{className:"w-8 h-8"}),title:"Multi-Camera Production",description:"Professional broadcast quality with multiple angles"},{icon:s.jsx(f1,{className:"w-8 h-8"}),title:"Watch Anywhere",description:"Stream on any device, anywhere in the world"},{icon:s.jsx(zb,{className:"w-8 h-8"}),title:"Instant Replays",description:"Never miss a moment with on-demand access"},{icon:s.jsx(nh,{className:"w-8 h-8"}),title:"Premium Experience",description:"Commentary, graphics, and cinematic quality"}];return s.jsx("section",{className:"py-16 bg-gradient-to-b from-black to-dark-950",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4",children:s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6 md:gap-8",children:t.map((e,r)=>s.jsxs("div",{className:"text-center group",children:[s.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-2xl bg-red-500/10 flex items-center justify-center text-red-400 group-hover:bg-red-500/20 group-hover:scale-110 transition-all",children:e.icon}),s.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:e.title}),s.jsx("p",{className:"text-sm text-gray-500",children:e.description})]},r))})})})}function m6e({organizations:t}){return!t||t.length===0?null:s.jsx("section",{className:"py-12 bg-dark-950 border-y border-dark-800",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[s.jsx("p",{className:"text-center text-gray-500 text-sm font-medium mb-8 tracking-wider uppercase",children:"Trusted by Leading Organizations"}),s.jsx("div",{className:"flex flex-wrap items-center justify-center gap-8 md:gap-12",children:t.map((e,r)=>s.jsx("div",{className:"flex items-center justify-center h-12 px-4 opacity-60 hover:opacity-100 transition-opacity grayscale hover:grayscale-0",children:e.logo_url?s.jsx("img",{src:Mh(e.logo_url),alt:e.name,className:"h-full w-auto object-contain"}):s.jsx("span",{className:"text-xl font-bold text-gray-400",children:e.name})},r))})]})})}function A6e(){const[t,e]=T.useState([]),[r,n]=T.useState([]),[i,a]=T.useState(!0),[o,c]=T.useState(null),[u,l]=T.useState(""),[d,f]=T.useState("all");T.useEffect(()=>{m(),p()},[]);const m=async()=>{try{const U=await q3e();e(U||[])}catch(U){c("Failed to load events"),console.error(U)}finally{a(!1)}},p=async()=>{try{const{data:U}=await ir.from("organizations").select("id, name, display_name, logo_url").eq("active",!0).order("name");n(U||[])}catch(U){console.error("Failed to load organizations:",U)}},g=T.useMemo(()=>{const U=new Map;return t.forEach(G=>{const q=G.org_display_name||G.organization;q&&!U.has(q)&&U.set(q,{display:q,original:G.organization})}),Array.from(U.keys()).sort()},[t]),y=T.useMemo(()=>{let U=t;if(d!=="all"&&(U=U.filter(G=>(G.org_display_name||G.organization)===d)),u.trim()){const G=u.toLowerCase();U=U.filter(q=>q.title?.toLowerCase().includes(G)||q.organization?.toLowerCase().includes(G)||q.org_display_name?.toLowerCase().includes(G)||q.venue?.toLowerCase().includes(G))}return U},[t,d,u]),x=new Date,w=y.filter(U=>U.status==="live"||U.is_live),_=y.filter(U=>new Date(U.start_time)>x&&U.status!=="ended"&&U.status!=="live"&&!U.is_live).sort((U,G)=>new Date(U.start_time)-new Date(G.start_time)),E=_.filter(U=>(new Date(U.start_time)-x)/36e5<=168),N=_.filter(U=>(new Date(U.start_time)-x)/36e5>168),C=y.filter(U=>U.status==="ended"||new Date(U.end_time)<x).sort((U,G)=>new Date(G.start_time)-new Date(U.start_time)),I=w[0]||_[0],D=u||d!=="all";return i?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-black",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-red-500 mx-auto mb-6"}),s.jsx("p",{className:"text-gray-400 text-lg",children:"Loading events..."})]})}):o?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-black",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-red-500 mb-4 text-lg",children:o}),s.jsx("button",{onClick:m,className:"px-6 py-3 bg-red-500 hover:bg-red-600 text-white font-bold rounded-lg transition-colors",children:"Try Again"})]})}):s.jsxs("div",{className:"min-h-screen bg-black",children:[I&&!D&&s.jsx(h6e,{event:I}),!D&&s.jsx(f6e,{}),!D&&s.jsx(m6e,{organizations:r}),s.jsxs("div",{id:"upcoming-events",className:"bg-dark-950",children:[s.jsx("div",{className:"sticky top-16 sm:top-20 z-20 bg-dark-950/95 backdrop-blur-md border-b border-dark-800",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:s.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[s.jsxs("div",{className:"relative flex-1 max-w-md",children:[s.jsx(IT,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500"}),s.jsx("input",{type:"text",placeholder:"Search events, organizations, venues...",value:u,onChange:U=>l(U.target.value),className:"w-full pl-10 pr-10 py-2.5 bg-dark-800 border border-dark-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent transition-all"}),u&&s.jsx("button",{onClick:()=>l(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-white transition-colors",children:s.jsx(tg,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-1 scrollbar-hide",children:[s.jsx("button",{onClick:()=>f("all"),className:`flex-shrink-0 px-4 py-2 rounded-lg font-medium transition-all ${d==="all"?"bg-red-500 text-white":"bg-dark-800 text-gray-400 hover:bg-dark-700 hover:text-white"}`,children:"All Events"}),g.map(U=>s.jsx("button",{onClick:()=>f(U),className:`flex-shrink-0 px-4 py-2 rounded-lg font-medium transition-all ${d===U?"bg-red-500 text-white":"bg-dark-800 text-gray-400 hover:bg-dark-700 hover:text-white"}`,children:U},U))]}),s.jsxs(rs,{to:"/my-purchases",className:"flex-shrink-0 flex items-center justify-center gap-2 px-4 py-2 bg-dark-800 hover:bg-dark-700 text-white rounded-lg transition-colors",children:[s.jsx(BT,{className:"w-5 h-5"}),s.jsx("span",{className:"hidden sm:inline",children:"My Purchases"})]})]})})}),s.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[!D&&s.jsxs("div",{className:"mb-8",children:[s.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-white",children:"Upcoming Events"}),s.jsx("p",{className:"text-gray-500 mt-2",children:"Don't miss the action  secure your tickets now"})]}),D&&s.jsx("div",{className:"mb-6",children:s.jsxs("p",{className:"text-gray-400",children:[y.length," ",y.length===1?"event":"events"," found",u&&s.jsxs("span",{children:[' for "',u,'"']}),d!=="all"&&s.jsxs("span",{children:[" in ",d]})]})}),w.length>0&&s.jsxs("section",{className:"mb-10",children:[s.jsxs("h2",{className:"text-xl md:text-2xl font-bold text-white mb-4 flex items-center gap-2",children:[s.jsx("span",{className:"w-3 h-3 bg-red-500 rounded-full animate-pulse"}),"Live Now"]}),s.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:w.map(U=>s.jsx(uO,{event:U},U.id))})]}),E.length>0&&!D&&s.jsx(xI,{title:"This Week",events:E,icon:s.jsx(ml,{className:"w-5 h-5 text-amber-500"})}),N.length>0&&!D&&s.jsx(xI,{title:"Coming Soon",events:N,icon:s.jsx(zh,{className:"w-5 h-5 text-blue-500"})}),D&&_.length>0&&s.jsxs("section",{className:"mb-10",children:[s.jsx("h2",{className:"text-xl md:text-2xl font-bold text-white mb-4",children:"Upcoming Events"}),s.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:_.map(U=>s.jsx(uO,{event:U},U.id))})]}),C.filter(U=>U.mux_playback_id).length>0&&s.jsx(xI,{title:"Replays Available",events:C.filter(U=>U.mux_playback_id),icon:s.jsx(Qd,{className:"w-5 h-5 text-green-500"})}),y.length===0&&s.jsxs("div",{className:"text-center py-16",children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-dark-800 flex items-center justify-center mx-auto mb-4",children:s.jsx(IT,{className:"w-8 h-8 text-gray-600"})}),s.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"No events found"}),s.jsx("p",{className:"text-gray-400 mb-6",children:u?`No events match "${u}"`:d!=="all"?`No events from ${d}`:"No events scheduled yet. Check back soon!"}),D&&s.jsx("button",{onClick:()=>{l(""),f("all")},className:"px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg transition-colors",children:"Clear Filters"})]})]})]}),!D&&s.jsx("section",{className:"py-20 bg-gradient-to-b from-dark-950 to-black",children:s.jsxs("div",{className:"max-w-4xl mx-auto px-4 text-center",children:[s.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-white mb-4",children:"Want Your Event Livestreamed?"}),s.jsx("p",{className:"text-xl text-gray-400 mb-8",children:"Professional multi-camera production with global reach. Let's talk."}),s.jsxs(rs,{to:"/work-with-us",className:"inline-flex items-center gap-2 px-8 py-4 bg-white text-black font-bold text-lg rounded-xl hover:bg-gray-100 transition-all hover:scale-105",children:["Work With Us",s.jsx(U0,{className:"w-5 h-5"})]})]})})]})}const p6e=()=>{let t=localStorage.getItem("ffm_session_id");return t||(t="sess_"+Math.random().toString(36).substring(2)+Date.now().toString(36),localStorage.setItem("ffm_session_id",t)),t},Ry=async(t,e=null,r={})=>{try{await ir.from("livestream_analytics").insert({event_type:t,event_id:e,session_id:p6e(),device_type:/mobile/i.test(navigator.userAgent)?"mobile":/tablet|ipad/i.test(navigator.userAgent)?"tablet":"desktop",user_agent:navigator.userAgent?.substring(0,500),...r,created_at:new Date().toISOString()})}catch(n){console.warn("Analytics tracking failed:",n.message)}},g6e=t=>Ry("page_view",t),v6e=t=>Ry("geo_check",t),y6e=(t,e,r,n,i,a,o,c)=>Ry("geo_blocked",t,{blocked_distance_km:e,venue_lat:r,venue_lng:n,block_radius_km:i,latitude:a,longitude:o,accuracy_meters:c}),x6e=(t,e,r,n)=>Ry("geo_passed",t,{latitude:e,longitude:r,accuracy_meters:n}),hK=t=>Ry("purchase_view",t),b6e=(t,e)=>Ry("checkout_start",t,{customer_email:e}),w6e=(t,e,r)=>Ry("purchase_complete",t,{customer_email:e,customer_id:r});function _6e(t){if(!t||typeof t!="string")return null;const e=t.toLowerCase().trim();return e.length<5||e.length>254||!/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(e)||/<[^>]*>/.test(e)?null:e}const bI=new Map;function E6e(t,e=5,r=6e4){const n=Date.now(),i=bI.get(t);return i?n-i.start>r?(bI.set(t,{count:1,start:n}),{allowed:!0,remaining:e-1}):i.count>=e?{allowed:!1,remaining:0,waitSeconds:Math.ceil((i.start+r-n)/1e3)}:(i.count++,{allowed:!0,remaining:e-i.count}):(bI.set(t,{count:1,start:n}),{allowed:!0,remaining:e-1})}function Rne({targetDate:t,onComplete:e,className:r=""}){const n=m=>{if(!m)return new Date;const p=m.replace(/[Z+].*$/,"").replace(/\.000$/,"");return new Date(p)},i=()=>{const m=n(t)-new Date;return m<=0?null:{days:Math.floor(m/864e5),hours:Math.floor(m/36e5%24),minutes:Math.floor(m/1e3/60%60),seconds:Math.floor(m/1e3%60)}},[a,o]=T.useState(i()),[c,u]=T.useState(null),l=T.useRef(!1);if(T.useEffect(()=>{l.current=!1;const m=setInterval(()=>{const p=i();u(a),o(p),!p&&e&&!l.current&&(l.current=!0,e())},1e3);return()=>clearInterval(m)},[t]),!a)return s.jsx("div",{className:`text-center ${r}`,children:s.jsxs("div",{className:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-red-500 to-red-600 text-white font-bold rounded-full animate-pulse",children:[s.jsx("span",{className:"w-3 h-3 bg-white rounded-full animate-ping"}),"Event Starting Now"]})});const d=({value:m,label:p,prevValue:g})=>{const y=g!==void 0&&g!==m;return s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("div",{className:"relative",children:s.jsxs("div",{className:"relative w-12 h-14 sm:w-16 sm:h-20 md:w-24 md:h-28 perspective-1000",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-dark-700 to-dark-800 rounded-lg shadow-xl border border-dark-600",children:s.jsx("div",{className:"absolute top-1/2 left-0 right-0 h-px bg-dark-900/50"})}),s.jsx("div",{className:`relative z-10 w-full h-full flex items-center justify-center ${y?"animate-flip":""}`,children:s.jsx("span",{className:"text-xl sm:text-3xl md:text-5xl font-bold text-white tabular-nums tracking-tight",children:String(m).padStart(2,"0")})}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-white/5 to-transparent rounded-lg pointer-events-none"})]})}),s.jsx("span",{className:"text-[9px] sm:text-xs md:text-sm text-gray-500 mt-1 sm:mt-2 uppercase tracking-normal sm:tracking-widest font-medium",children:p})]})},f=()=>s.jsxs("div",{className:"flex flex-col items-center justify-center gap-1 sm:gap-2 px-0.5 sm:px-1 md:px-3 h-14 sm:h-20 md:h-28",children:[s.jsx("div",{className:"w-1 h-1 sm:w-2 sm:h-2 rounded-full bg-red-500 animate-pulse"}),s.jsx("div",{className:"w-1 h-1 sm:w-2 sm:h-2 rounded-full bg-red-500 animate-pulse",style:{animationDelay:"0.5s"}})]});return s.jsxs("div",{className:`${r} overflow-x-hidden`,children:[s.jsx("p",{className:"text-center text-gray-400 mb-4 text-sm uppercase tracking-widest font-medium",children:" Event Starts In"}),s.jsxs("div",{className:"flex items-start justify-center overflow-x-hidden",children:[a.days>0&&s.jsxs(s.Fragment,{children:[s.jsx(d,{value:a.days,label:"Days",prevValue:c?.days}),s.jsx(f,{})]}),s.jsx(d,{value:a.hours,label:"Hours",prevValue:c?.hours}),s.jsx(f,{}),s.jsx(d,{value:a.minutes,label:"Mins",prevValue:c?.minutes}),s.jsx(f,{}),s.jsx(d,{value:a.seconds,label:"Secs",prevValue:c?.seconds})]}),a.days===0&&a.hours<2&&s.jsx("div",{className:"mt-4 text-center",children:s.jsxs("span",{className:"inline-flex items-center gap-2 px-4 py-2 bg-red-500/10 border border-red-500/20 rounded-full text-red-400 text-sm",children:[s.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),"Starting soon  Don't miss it!"]})})]})}function S6e({price:t,originalPrice:e=null,currency:r="AUD",email:n,onEmailChange:i,onPurchase:a,purchasing:o=!1,error:c=null,demoMode:u=!1,isLive:l=!1,isPast:d=!1,isVod:f=!1,vodExpired:m=!1,className:p=""}){const[g,y]=T.useState(!1),x=e?Math.round((1-t/e)*100):null,E=f?[{icon:Lde,text:"Instant access to full replay",highlight:!0},{icon:Up,text:"Watch anytime, any device",highlight:!0},{icon:Ay,text:"HD quality streaming",highlight:!0},{icon:B0,text:"Secure payment via Stripe",highlight:!0}]:[{icon:zb,text:"Instant access after payment",highlight:!0},{icon:Qd,text:"Watch live + replay for 7 days",highlight:!0},{icon:Ay,text:"HD quality streaming",highlight:!0},{icon:B0,text:"Secure payment via Stripe",highlight:!0}];return m?s.jsxs("div",{className:`relative ${p}`,children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-500/10 to-gray-500/10 blur-xl rounded-3xl"}),s.jsxs("div",{className:"relative bg-dark-900/90 backdrop-blur-xl border border-dark-700/50 rounded-2xl overflow-hidden p-8 text-center",children:[s.jsx(Up,{className:"w-12 h-12 text-gray-500 mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Replay No Longer Available"}),s.jsx("p",{className:"text-gray-400 mb-4",children:"The VOD replay for this event has expired."})]})]}):d&&!f?s.jsxs("div",{className:`relative ${p}`,children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-500/10 to-gray-500/10 blur-xl rounded-3xl"}),s.jsxs("div",{className:"relative bg-dark-900/90 backdrop-blur-xl border border-dark-700/50 rounded-2xl overflow-hidden p-8 text-center",children:[s.jsx(Qd,{className:"w-12 h-12 text-gray-500 mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Event Has Ended"}),s.jsx("p",{className:"text-gray-400",children:"This event has concluded and replay is not available."})]})]}):s.jsxs("div",{className:`relative ${p}`,children:[s.jsx("div",{className:`absolute inset-0 blur-xl rounded-3xl ${f?"bg-gradient-to-r from-blue-500/20 to-purple-500/20":"bg-gradient-to-r from-red-500/20 to-orange-500/20"}`}),s.jsxs("div",{className:"relative bg-dark-900/90 backdrop-blur-xl border border-dark-700/50 rounded-2xl overflow-hidden",children:[s.jsxs("div",{className:"bg-gradient-to-r from-dark-800 to-dark-800/50 px-6 py-4 border-b border-dark-700/50",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-gray-400 font-medium flex items-center gap-2",children:f?s.jsxs(s.Fragment,{children:[s.jsx(Up,{className:"w-4 h-4 text-blue-400"}),"VOD Replay"]}):"Stream Access"}),f&&s.jsx("span",{className:"px-2 py-1 bg-blue-500/20 text-blue-400 text-xs font-bold rounded-full",children:"REPLAY"}),x&&!f&&s.jsxs("span",{className:"px-2 py-1 bg-green-500/20 text-green-400 text-xs font-bold rounded-full",children:[x,"% OFF"]})]}),s.jsxs("div",{className:"mt-2 flex items-baseline gap-2",children:[s.jsxs("span",{className:"text-4xl font-bold text-white",children:["$",t]}),s.jsx("span",{className:"text-lg text-gray-500",children:r}),e&&s.jsxs("span",{className:"text-lg text-gray-600 line-through",children:["$",e]})]})]}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Email Address"}),s.jsxs("div",{className:`relative transition-all duration-300 ${g?"scale-[1.02]":""}`,children:[s.jsx(tu,{className:`absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 transition-colors ${g?"text-red-500":"text-gray-500"}`}),s.jsx("input",{type:"email",value:n,onChange:N=>i(N.target.value),onFocus:()=>y(!0),onBlur:()=>y(!1),placeholder:"your@email.com",className:`w-full pl-12 pr-4 py-4 bg-dark-800/50 border rounded-xl text-white placeholder-gray-500 outline-none transition-all duration-300 ${g?"border-red-500 ring-2 ring-red-500/20":"border-dark-700 hover:border-dark-600"}`,required:!0})]}),s.jsxs("p",{className:"text-xs text-gray-500 mt-2 flex items-center gap-1",children:[s.jsx($b,{className:"w-3 h-3"}),"Your access link will be sent here"]})]}),c&&s.jsx("div",{className:"mb-4 p-3 bg-red-500/10 border border-red-500/20 rounded-lg",children:s.jsx("p",{className:"text-red-400 text-sm",children:c})}),s.jsx("button",{onClick:a,disabled:o||!n,className:`w-full py-4 rounded-xl font-bold text-lg transition-all duration-300 flex items-center justify-center gap-3 ${o||!n?"bg-dark-700 text-gray-500 cursor-not-allowed":"bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white shadow-lg shadow-red-500/25 hover:shadow-red-500/40 hover:scale-[1.02] active:scale-[0.98]"}`,children:o?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"}),"Processing..."]}):s.jsxs(s.Fragment,{children:[f?s.jsx(Up,{className:"w-5 h-5"}):s.jsx(Mde,{className:"w-5 h-5"}),f?"Buy Replay Access":d?"Event Ended":l?"Watch Now":"Buy Access"]})}),s.jsx("div",{className:"mt-6 space-y-3",children:E.map((N,C)=>s.jsxs("div",{className:`flex items-center gap-3 text-sm ${N.highlight?"text-white":"text-gray-400"}`,children:[s.jsx("div",{className:`w-5 h-5 rounded-full flex items-center justify-center ${N.highlight?"bg-green-500/20 text-green-400":"bg-dark-700 text-gray-500"}`,children:s.jsx(la,{className:"w-3 h-3"})}),N.text]},C))}),u&&s.jsx("div",{className:"mt-6",children:s.jsxs("button",{onClick:a,disabled:o||!n,className:"w-full py-3 bg-gradient-to-r from-yellow-500/20 to-orange-500/20 border border-yellow-500/30 text-yellow-400 font-semibold rounded-xl hover:from-yellow-500/30 hover:to-orange-500/30 transition-all duration-300 flex items-center justify-center gap-2",children:[s.jsx(zb,{className:"w-4 h-4"}),"Demo Mode  No payment required"]})})]}),s.jsx("div",{className:"px-6 py-4 bg-dark-800/30 border-t border-dark-700/30",children:s.jsxs("div",{className:"flex items-center justify-center gap-4 text-xs text-gray-500",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx($b,{className:"w-3 h-3"}),"SSL Secured"]}),s.jsx("div",{className:"w-1 h-1 bg-gray-600 rounded-full"}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(B0,{className:"w-3 h-3"}),"Stripe Payments"]}),s.jsx("div",{className:"w-1 h-1 bg-gray-600 rounded-full"}),s.jsx("span",{children:" Australian Business"})]})})]})]})}function j6e({url:t,title:e,description:r,className:n=""}){const[i,a]=T.useState(!1),[o,c]=T.useState(!1),u=t||window.location.href,l=e||document.title,d=r||"",f={twitter:`https://twitter.com/intent/tweet?text=${encodeURIComponent(l)}&url=${encodeURIComponent(u)}`,facebook:`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(u)}`,whatsapp:`https://wa.me/?text=${encodeURIComponent(l+" "+u)}`},m=async()=>{try{await navigator.clipboard.writeText(u),a(!0),setTimeout(()=>a(!1),2e3)}catch(g){console.error("Failed to copy:",g)}},p=async()=>{if(navigator.share)try{await navigator.share({title:l,text:d,url:u})}catch{c(!0)}else c(!o)};return s.jsxs("div",{className:`relative ${n}`,children:[s.jsxs("button",{onClick:p,className:"flex items-center gap-2 px-4 py-2 bg-dark-800 hover:bg-dark-700 border border-dark-700 rounded-lg text-gray-300 hover:text-white transition-colors",children:[s.jsx(FY,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm font-medium",children:"Share Event"})]}),o&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>c(!1)}),s.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-dark-800 border border-dark-700 rounded-lg shadow-xl z-50 overflow-hidden",children:[s.jsxs("a",{href:f.twitter,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 px-4 py-3 hover:bg-dark-700 text-gray-300 hover:text-white transition-colors",onClick:()=>c(!1),children:[s.jsx(hfe,{className:"w-4 h-4 text-[#1DA1F2]"}),s.jsx("span",{className:"text-sm",children:"Twitter"})]}),s.jsxs("a",{href:f.facebook,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 px-4 py-3 hover:bg-dark-700 text-gray-300 hover:text-white transition-colors",onClick:()=>c(!1),children:[s.jsx(I_,{className:"w-4 h-4 text-[#4267B2]"}),s.jsx("span",{className:"text-sm",children:"Facebook"})]}),s.jsxs("a",{href:f.whatsapp,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 px-4 py-3 hover:bg-dark-700 text-gray-300 hover:text-white transition-colors",onClick:()=>c(!1),children:[s.jsx(_he,{className:"w-4 h-4 text-[#25D366]"}),s.jsx("span",{className:"text-sm",children:"WhatsApp"})]}),s.jsxs("button",{onClick:()=>{m(),c(!1)},className:"flex items-center gap-3 px-4 py-3 hover:bg-dark-700 text-gray-300 hover:text-white transition-colors w-full border-t border-dark-700",children:[s.jsx(OY,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm",children:i?"Copied!":"Copy Link"})]})]})]})]})}function T6e({title:t,description:e,image:r,url:n,type:i="website"}){return T.useEffect(()=>{t&&(document.title=`${t} | Fit Focus Media`);const a=(o,c)=>{if(!c)return;let u=document.querySelector(`meta[property="${o}"]`)||document.querySelector(`meta[name="${o}"]`);u||(u=document.createElement("meta"),o.startsWith("og:")||o.startsWith("twitter:")?u.setAttribute("property",o):u.setAttribute("name",o),document.head.appendChild(u)),u.setAttribute("content",c)};return a("og:title",t),a("og:description",e),a("og:image",r),a("og:url",n||window.location.href),a("og:type",i),a("twitter:card","summary_large_image"),a("twitter:title",t),a("twitter:description",e),a("twitter:image",r),a("description",e),()=>{document.title="Fit Focus Media"}},[t,e,r,n,i]),null}function C6e({event:t,className:e=""}){const[r,n]=T.useState(!1);if(!t)return null;const i=x=>{if(!x)return new Date;const w=x.replace(/[Z+].*$/,"").replace(/\.000$/,"");return new Date(w)},a=i(t.start_time),o=t.end_time?i(t.end_time):new Date(a.getTime()+10800*1e3),c=x=>{const w=U=>String(U).padStart(2,"0"),_=x.getFullYear(),E=w(x.getMonth()+1),N=w(x.getDate()),C=w(x.getHours()),I=w(x.getMinutes()),D=w(x.getSeconds());return`${_}${E}${N}T${C}${I}${D}`},u=x=>{const w=U=>String(U).padStart(2,"0"),_=x.getFullYear(),E=w(x.getMonth()+1),N=w(x.getDate()),C=w(x.getHours()),I=w(x.getMinutes()),D=w(x.getSeconds());return`${_}${E}${N}T${C}${I}${D}`},l=encodeURIComponent(t.title),d=encodeURIComponent(`${t.org_display_name||t.organization}

Watch live at: https://fitfocusmedia.com.au/#/live/${t.id}`),f=encodeURIComponent(t.venue||"Online"),m=`https://calendar.google.com/calendar/render?action=TEMPLATE&text=${l}&dates=${c(a)}/${c(o)}&details=${d}&location=${f}`,p=x=>{const w=U=>String(U).padStart(2,"0"),_=x.getFullYear(),E=w(x.getMonth()+1),N=w(x.getDate()),C=w(x.getHours()),I=w(x.getMinutes()),D=w(x.getSeconds());return`${_}-${E}-${N}T${C}:${I}:${D}`},g=`https://outlook.live.com/calendar/0/deeplink/compose?subject=${l}&startdt=${encodeURIComponent(p(a))}&enddt=${encodeURIComponent(p(o))}&body=${d}&location=${f}`,y=()=>{const x=`BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//Fit Focus Media//Livestream//EN
BEGIN:VEVENT
UID:${t.id}@fitfocusmedia.com.au
DTSTAMP:${u(new Date)}
DTSTART:${u(a)}
DTEND:${u(o)}
SUMMARY:${t.title}
DESCRIPTION:${t.org_display_name||t.organization}\\n\\nWatch live at: https://fitfocusmedia.com.au/#/live/${t.id}
LOCATION:${t.venue||"Online"}
END:VEVENT
END:VCALENDAR`,w=new Blob([x],{type:"text/calendar;charset=utf-8"}),_=URL.createObjectURL(w),E=document.createElement("a");E.href=_,E.download=`${t.title.replace(/[^a-z0-9]/gi,"_")}.ics`,document.body.appendChild(E),E.click(),document.body.removeChild(E),URL.revokeObjectURL(_),n(!1)};return s.jsxs("div",{className:`relative ${e}`,children:[s.jsxs("button",{onClick:()=>n(!r),className:"flex items-center gap-2 px-3 sm:px-4 py-2 bg-dark-800 hover:bg-dark-700 border border-dark-700 rounded-lg text-gray-300 hover:text-white transition-colors",title:"Add to Calendar",children:[s.jsx(ml,{className:"w-4 h-4 flex-shrink-0"}),s.jsx("span",{className:"text-sm font-medium hidden sm:inline",children:"Add to Calendar"}),s.jsx(F0,{className:`w-4 h-4 flex-shrink-0 transition-transform ${r?"rotate-180":""}`})]}),r&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>n(!1)}),s.jsxs("div",{className:"absolute left-0 sm:right-0 sm:left-auto mt-2 w-48 bg-dark-800 border border-dark-700 rounded-lg shadow-xl z-50 overflow-hidden",children:[s.jsxs("a",{href:m,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 px-4 py-3 hover:bg-dark-700 text-gray-300 hover:text-white transition-colors",onClick:()=>n(!1),children:[s.jsx("span",{className:"text-lg",children:""}),s.jsx("span",{className:"text-sm",children:"Google Calendar"})]}),s.jsxs("button",{onClick:y,className:"flex items-center gap-3 px-4 py-3 hover:bg-dark-700 text-gray-300 hover:text-white transition-colors w-full",children:[s.jsx("span",{className:"text-lg",children:""}),s.jsx("span",{className:"text-sm",children:"Apple Calendar"})]}),s.jsxs("a",{href:g,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 px-4 py-3 hover:bg-dark-700 text-gray-300 hover:text-white transition-colors",onClick:()=>n(!1),children:[s.jsx("span",{className:"text-lg",children:""}),s.jsx("span",{className:"text-sm",children:"Outlook"})]})]})]})]})}function N6e(){const{eventId:t}=Kh(),[e]=ky(),[r,n]=T.useState(null),[i,a]=T.useState({demo_mode:!1}),[o,c]=T.useState(""),[u,l]=T.useState(!0),[d,f]=T.useState(!1),[m,p]=T.useState(null),[g,y]=T.useState(null),[x,w]=T.useState(null),[_,E]=T.useState(!1),[N,C]=T.useState(!1),[I,D]=T.useState(!1),[U,G]=T.useState(!1),[q,J]=T.useState(null),[de,xe]=T.useState(!1),we=T.useRef({pageView:!1,geoCheck:!1,purchaseView:!1});T.useEffect(()=>{oe(),we.current.pageView||(g6e(t),we.current.pageView=!0)},[t]),T.useEffect(()=>{r&&r.geo_blocking_enabled?ve():r&&!r.geo_blocking_enabled&&(G(!0),we.current.purchaseView||(hK(t),we.current.purchaseView=!0))},[r]);const ve=async()=>{try{const De=await navigator.permissions.query({name:"geolocation"});De.state==="granted"?ne():De.state==="denied"?(D(!0),G(!0)):C(!0)}catch{C(!0)}},ne=()=>{E(!0),C(!1),we.current.geoCheck||(v6e(t),we.current.geoCheck=!0),navigator.geolocation.getCurrentPosition(async De=>{const ut=De.coords.latitude,et=De.coords.longitude,Ue=De.coords.accuracy;try{const jt=e.get("bypass"),Ct=await(await fetch("https://gonalgubgldgpkcekaxe.supabase.co/functions/v1/geo-check",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({venue_lat:r.geo_lat,venue_lng:r.geo_lng,radius_km:r.geo_radius_km||50,user_lat:ut,user_lng:et,event_id:t,bypass_token:jt})})).json();Ct.bypass?(y(!1),w({...Ct,crew_bypass:!0})):(y(Ct.blocked),w(Ct)),J({lat:ut,lng:et,distance_km:Ct.distance_km,accuracy_meters:Ue}),Ct.blocked?y6e(t,Ct.distance_km,r.geo_lat,r.geo_lng,r.geo_radius_km,ut,et,Ue):(x6e(t,ut,et,Ue),we.current.purchaseView||(hK(t),we.current.purchaseView=!0))}catch(jt){console.error("Geo check failed:",jt),y(!1),J({lat:ut,lng:et})}finally{E(!1),G(!0)}},De=>{console.error("Geolocation error:",De),De.code===De.PERMISSION_DENIED&&D(!0),E(!1),G(!0)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})},ae=()=>{ne()},oe=async()=>{try{const[De,ut]=await Promise.all([rO(t),Xre()]);n(De),a(ut||{demo_mode:!1})}catch(De){p("Event not found"),console.error(De)}finally{l(!1)}},Ie=async De=>{De&&De.preventDefault();const ut=_6e(o);if(!ut){p("Please enter a valid email address");return}const et=E6e(`checkout:${ut}`,3,6e4);if(!et.allowed){p(`Too many attempts. Please wait ${et.waitSeconds} seconds.`);return}f(!0),p(null),b6e(t,ut);try{const Ue="https://gonalgubgldgpkcekaxe.supabase.co/functions/v1/livestream_checkout",jt=r.end_time?new Date(r.end_time):null,rt=new Date(r.start_time),Ct=new Date(rt.getTime()+480*60*1e3),Xe=(jt?new Date>jt:new Date>Ct)&&r.vod_enabled&&r.vod_playback_id,mt=await fetch(Ue,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({event_id:t,email:ut,buyer_lat:q?.lat,buyer_lng:q?.lng,distance_from_venue_km:q?.distance_km,is_vod_purchase:Xe})}),Jt=await mt.json();if(!mt.ok)throw new Error(Jt.error||`Checkout failed (${mt.status})`);if(Jt.demo&&Jt.redirect)window.location.href=Jt.redirect;else if(Jt.url)window.location.href=Jt.url;else throw new Error(Jt.error||"Checkout failed")}catch(Ue){console.error("Checkout error:",Ue),p("Unable to process your request. Please try again or contact support.")}finally{f(!1)}};if(u)return s.jsx("div",{className:"min-h-[60vh] flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-dark-700 border-t-red-500 mx-auto"}),s.jsx(nm,{className:"absolute inset-0 m-auto w-6 h-6 text-red-500 animate-pulse"})]}),s.jsx("p",{className:"text-gray-400 mt-4",children:"Loading event..."})]})});if(m&&!r)return s.jsx("div",{className:"min-h-[60vh] flex items-center justify-center p-4",children:s.jsxs("div",{className:"text-center",children:[s.jsx(PT,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),s.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Event Not Found"}),s.jsx("p",{className:"text-gray-400",children:m})]})});if(N&&r?.geo_blocking_enabled)return s.jsx("div",{className:"min-h-[60vh] flex items-center justify-center p-4",children:s.jsxs("div",{className:"max-w-md w-full relative",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-red-500/20 to-orange-500/20 blur-2xl rounded-3xl"}),s.jsxs("div",{className:"relative bg-dark-900/95 backdrop-blur-xl rounded-2xl border border-dark-700/50 p-8 text-center",children:[s.jsx("div",{className:"w-20 h-20 mx-auto mb-6 rounded-full bg-gradient-to-br from-red-500/20 to-orange-500/20 flex items-center justify-center",children:s.jsx(Nhe,{className:"w-10 h-10 text-red-500"})}),s.jsx("h2",{className:"text-2xl font-bold text-white mb-3",children:"Location Verification"}),s.jsx("p",{className:"text-gray-400 mb-4",children:"To protect ticket sales at the venue, we verify your location before streaming."}),s.jsxs("p",{className:"text-gray-500 text-sm mb-6",children:["Online streaming is restricted within ",r.geo_radius_km||50,"km of ",r.venue,"."]}),s.jsxs("label",{className:"flex items-start gap-3 text-left mb-6 cursor-pointer group",children:[s.jsx("div",{className:"relative mt-1",children:s.jsx("input",{type:"checkbox",checked:de,onChange:De=>xe(De.target.checked),className:"w-5 h-5 rounded border-dark-600 bg-dark-800 text-red-500 focus:ring-red-500 focus:ring-offset-dark-900 cursor-pointer"})}),s.jsxs("span",{className:"text-gray-400 text-sm group-hover:text-gray-300 transition-colors",children:["I agree to the"," ",s.jsx("a",{href:"/#/privacy",target:"_blank",className:"text-red-500 hover:text-red-400 underline",children:"Privacy Policy"})," ","and"," ",s.jsx("a",{href:"/#/terms",target:"_blank",className:"text-red-500 hover:text-red-400 underline",children:"Terms of Service"})]})]}),s.jsxs("button",{onClick:ae,disabled:!de,className:"w-full py-4 bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 disabled:from-dark-700 disabled:to-dark-700 disabled:cursor-not-allowed text-white font-bold rounded-xl transition-all duration-300 flex items-center justify-center gap-2 shadow-lg shadow-red-500/25 disabled:shadow-none",children:[s.jsx(md,{className:"w-5 h-5"}),"Enable Location Access"]}),s.jsx("p",{className:"text-gray-600 text-xs mt-4",children:'Click "Allow" when your browser asks for permission'})]})]})});if(I&&r?.geo_blocking_enabled)return s.jsx("div",{className:"min-h-[60vh] flex items-center justify-center p-4",children:s.jsxs("div",{className:"max-w-md w-full bg-dark-900/95 backdrop-blur-xl rounded-2xl border border-dark-700/50 p-8 text-center",children:[s.jsx(PT,{className:"w-16 h-16 text-yellow-500 mx-auto mb-4"}),s.jsx("h2",{className:"text-2xl font-bold text-white mb-3",children:"Location Access Blocked"}),s.jsx("p",{className:"text-gray-400 mb-4",children:"Location access is required to verify you're not at the venue."}),s.jsxs("div",{className:"bg-dark-800/50 rounded-xl p-4 mb-6 text-left border border-dark-700/50",children:[s.jsx("p",{className:"text-white font-semibold mb-2",children:"To enable location:"}),s.jsxs("ol",{className:"text-gray-400 text-sm space-y-2",children:[s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-red-500 font-bold",children:"1."}),"Click the  icon in your address bar"]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-red-500 font-bold",children:"2."}),'Find "Location" and change it to "Allow"']}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-red-500 font-bold",children:"3."}),"Click the button below to try again"]})]})]}),s.jsx("button",{onClick:()=>{D(!1),C(!0)},className:"w-full py-4 bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white font-bold rounded-xl transition-all duration-300 shadow-lg shadow-red-500/25",children:"Try Again"})]})});if(_)return s.jsx("div",{className:"min-h-[60vh] flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-dark-700 border-t-red-500 mx-auto"}),s.jsx(md,{className:"absolute inset-0 m-auto w-6 h-6 text-red-500"})]}),s.jsx("p",{className:"text-gray-400 mt-4",children:"Verifying your location..."}),s.jsx("p",{className:"text-gray-600 text-sm mt-2",children:"This only takes a moment"})]})});if(g)return s.jsx("div",{className:"min-h-[60vh] flex items-center justify-center p-4",children:s.jsxs("div",{className:"max-w-md w-full relative",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-yellow-500/10 to-orange-500/10 blur-2xl rounded-3xl"}),s.jsxs("div",{className:"relative bg-dark-900/95 backdrop-blur-xl rounded-2xl border border-dark-700/50 p-8 text-center",children:[s.jsx("div",{className:"w-20 h-20 mx-auto mb-6 rounded-full bg-gradient-to-br from-yellow-500/20 to-orange-500/20 flex items-center justify-center",children:s.jsx(md,{className:"w-10 h-10 text-yellow-500"})}),s.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"You're Close to the Venue!"}),s.jsxs("p",{className:"text-gray-400 mb-4",children:["Online streaming is not available within ",r.geo_radius_km||50,"km of the venue."]}),x?.user_location&&s.jsxs("p",{className:"text-gray-500 text-sm mb-4",children:["Distance from venue: ",s.jsxs("span",{className:"text-white font-semibold",children:[x.distance_km,"km"]})]}),s.jsxs("div",{className:"bg-dark-800/50 rounded-xl p-4 mb-6 border border-dark-700/50",children:[s.jsx("p",{className:"text-gray-400 text-sm mb-2",children:"Great news  watch live in person!"}),s.jsx("p",{className:"text-white font-semibold",children:r.venue})]}),r.ticket_url?s.jsxs("a",{href:r.ticket_url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-8 py-4 bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white font-bold rounded-xl transition-all duration-300 shadow-lg shadow-red-500/25",children:[s.jsx(Qd,{className:"w-5 h-5"}),"Get Tickets"]}):s.jsx("p",{className:"text-gray-500",children:"Contact the venue for ticket information."})]})]})});const Ce=De=>{if(!De)return new Date;const ut=De.replace(/[Z+].*$/,"").replace(/\.000$/,"");return new Date(ut)},be=Ce(r.start_time),ue=r.is_live||r.status==="live",Pe=r.end_time?Ce(r.end_time):null,Re=new Date(be.getTime()+480*60*1e3),He=r.status==="ended"||(Pe?Pe<new Date:Re<new Date),Fe=He&&r.vod_enabled&&r.vod_playback_id,ft=r.vod_available_until&&new Date(r.vod_available_until)<new Date,at=r.vod_price||r.price;return s.jsxs(s.Fragment,{children:[s.jsx(T6e,{title:`${r.title} - ${r.org_display_name||r.organization}`,description:`Watch ${r.title} live! ${be.toLocaleDateString("en-AU")} at ${r.venue}. Stream access $${r.price} AUD.`,image:Mh(r.thumbnail_url),type:"video.other"}),s.jsx("div",{className:"py-12 md:py-16 px-4",children:s.jsx("div",{className:"max-w-6xl mx-auto",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-6 lg:gap-12",children:[s.jsxs("div",{className:"col-span-1 lg:col-span-3 space-y-6",children:[s.jsxs("div",{className:"relative w-full aspect-video bg-dark-800 rounded-2xl overflow-hidden group",children:[r.thumbnail_url?s.jsx("img",{src:Mh(r.thumbnail_url),alt:r.title,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-dark-800 to-dark-900",children:s.jsx("span",{className:"text-8xl",children:""})}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-dark-900 via-transparent to-transparent opacity-60"}),ue&&s.jsx("div",{className:"absolute top-4 left-4",children:s.jsxs("div",{className:"px-4 py-2 bg-red-500 text-white font-bold rounded-full flex items-center gap-2 shadow-lg shadow-red-500/50",children:[s.jsx("span",{className:"w-2 h-2 bg-white rounded-full animate-pulse"}),"LIVE NOW"]})}),s.jsx("div",{className:"absolute bottom-4 left-4",children:s.jsx("span",{className:"px-3 py-1 bg-dark-900/80 backdrop-blur-sm text-white text-sm font-medium rounded-full border border-dark-700/50",children:r.org_display_name||r.organization})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-white mb-2",children:r.title}),s.jsxs("div",{className:"flex items-center gap-3 text-gray-400",children:[s.jsx(nh,{className:"w-4 h-4 flex-shrink-0"}),s.jsx("span",{children:r.org_display_name||r.organization}),x?.crew_bypass&&s.jsx("span",{className:"px-2 py-0.5 bg-green-500/20 text-green-400 text-xs font-medium rounded-full",children:"Crew Access"})]})]}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsx(C6e,{event:r}),s.jsx(j6e,{title:`Watch ${r.title} Live!`,description:`${r.org_display_name||r.organization} - ${be.toLocaleDateString("en-AU")}`})]})]}),!ue&&!He&&s.jsx("div",{className:"p-6 md:p-8 bg-dark-800/30 rounded-2xl border border-dark-700/50 backdrop-blur-sm",children:s.jsx(Rne,{targetDate:r.start_time,onComplete:()=>oe()})}),s.jsxs("div",{className:"grid sm:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"flex items-center gap-4 p-4 bg-dark-800/30 rounded-xl border border-dark-700/30",children:[s.jsx("div",{className:"w-12 h-12 rounded-xl bg-red-500/10 flex items-center justify-center",children:s.jsx(ml,{className:"w-6 h-6 text-red-500"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Date"}),s.jsx("p",{className:"text-white font-medium",children:be.toLocaleDateString("en-AU",{weekday:"short",day:"numeric",month:"short"})})]})]}),s.jsxs("div",{className:"flex items-center gap-4 p-4 bg-dark-800/30 rounded-xl border border-dark-700/30",children:[s.jsx("div",{className:"w-12 h-12 rounded-xl bg-red-500/10 flex items-center justify-center",children:s.jsx(zh,{className:"w-6 h-6 text-red-500"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Time"}),s.jsxs("p",{className:"text-white font-medium",children:[be.toLocaleTimeString("en-AU",{hour:"2-digit",minute:"2-digit"})," AEST"]})]})]}),s.jsxs("div",{className:"flex items-center gap-4 p-4 bg-dark-800/30 rounded-xl border border-dark-700/30 sm:col-span-1",children:[s.jsx("div",{className:"w-12 h-12 rounded-xl bg-red-500/10 flex items-center justify-center",children:s.jsx(md,{className:"w-6 h-6 text-red-500"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Venue"}),s.jsx("p",{className:"text-white font-medium",children:r.venue})]})]})]}),r.description&&s.jsxs("div",{className:"p-6 bg-dark-800/20 rounded-2xl border border-dark-700/30",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx(Ay,{className:"w-5 h-5 text-red-500"}),s.jsx("h3",{className:"text-lg font-semibold text-white",children:"About This Event"})]}),s.jsx("p",{className:"text-gray-400 leading-relaxed",children:r.description})]})]}),s.jsx("div",{className:"col-span-1 lg:col-span-2",children:s.jsx("div",{className:"lg:sticky lg:top-24",children:s.jsx(S6e,{price:Fe?at:r.price,currency:"AUD",email:o,onEmailChange:c,onPurchase:Ie,purchasing:d,error:m,demoMode:i.demo_mode,isLive:ue,isPast:He,isVod:Fe&&!ft,vodExpired:ft})})})]})})})]})}var k6e=Object.create,Dne=Object.defineProperty,L6e=Object.getOwnPropertyDescriptor,I6e=Object.getOwnPropertyNames,B6e=Object.getPrototypeOf,P6e=Object.prototype.hasOwnProperty,Mne=function(t,e){return function(){return t&&(e=t(t=0)),e}},Yh=function(t,e){return function(){return e||t((e={exports:{}}).exports,e),e.exports}},O6e=function(t,e,r,n){if(e&&typeof e=="object"||typeof e=="function")for(var i=I6e(e),a=0,o=i.length,c;a<o;a++)c=i[a],!P6e.call(t,c)&&c!==r&&Dne(t,c,{get:(function(u){return e[u]}).bind(null,c),enumerable:!(n=L6e(e,c))||n.enumerable});return t},cm=function(t,e,r){return r=t!=null?k6e(B6e(t)):{},O6e(!t||!t.__esModule?Dne(r,"default",{value:t,enumerable:!0}):r,t)},np=Yh(function(t,e){var r;typeof window<"u"?r=window:typeof global<"u"?r=global:typeof self<"u"?r=self:r={},e.exports=r});function Dy(t,e){return e!=null&&typeof Symbol<"u"&&e[Symbol.hasInstance]?!!e[Symbol.hasInstance](t):Dy(t,e)}var My=Mne(function(){My()});function Fne(t){"@swc/helpers - typeof";return t&&typeof Symbol<"u"&&t.constructor===Symbol?"symbol":typeof t}var Une=Mne(function(){}),$ne=Yh(function(t,e){var r=Array.prototype.slice;e.exports=n;function n(i,a){for(("length"in i)||(i=[i]),i=r.call(i);i.length;){var o=i.shift(),c=a(o);if(c)return c;o.childNodes&&o.childNodes.length&&(i=r.call(o.childNodes).concat(i))}}}),R6e=Yh(function(t,e){My(),e.exports=r;function r(n,i){if(!Dy(this,r))return new r(n,i);this.data=n,this.nodeValue=n,this.length=n.length,this.ownerDocument=i||null}r.prototype.nodeType=8,r.prototype.nodeName="#comment",r.prototype.toString=function(){return"[object Comment]"}}),D6e=Yh(function(t,e){My(),e.exports=r;function r(n,i){if(!Dy(this,r))return new r(n);this.data=n||"",this.length=this.data.length,this.ownerDocument=i||null}r.prototype.type="DOMTextNode",r.prototype.nodeType=3,r.prototype.nodeName="#text",r.prototype.toString=function(){return this.data},r.prototype.replaceData=function(n,i,a){var o=this.data,c=o.substring(0,n),u=o.substring(n+i,o.length);this.data=c+a+u,this.length=this.data.length}}),Hne=Yh(function(t,e){e.exports=r;function r(n){var i=this,a=n.type;n.target||(n.target=i),i.listeners||(i.listeners={});var o=i.listeners[a];if(o)return o.forEach(function(c){n.currentTarget=i,typeof c=="function"?c(n):c.handleEvent(n)});i.parentNode&&i.parentNode.dispatchEvent(n)}}),Qne=Yh(function(t,e){e.exports=r;function r(n,i){var a=this;a.listeners||(a.listeners={}),a.listeners[n]||(a.listeners[n]=[]),a.listeners[n].indexOf(i)===-1&&a.listeners[n].push(i)}}),zne=Yh(function(t,e){e.exports=r;function r(n,i){var a=this;if(a.listeners&&a.listeners[n]){var o=a.listeners[n],c=o.indexOf(i);c!==-1&&o.splice(c,1)}}}),M6e=Yh(function(t,e){Une(),e.exports=n;var r=["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"];function n(m){switch(m.nodeType){case 3:return d(m.data);case 8:return"<!--"+m.data+"-->";default:return i(m)}}function i(m){var p=[],g=m.tagName;return m.namespaceURI==="http://www.w3.org/1999/xhtml"&&(g=g.toLowerCase()),p.push("<"+g+l(m)+c(m)),r.indexOf(g)>-1?p.push(" />"):(p.push(">"),m.childNodes.length?p.push.apply(p,m.childNodes.map(n)):m.textContent||m.innerText?p.push(d(m.textContent||m.innerText)):m.innerHTML&&p.push(m.innerHTML),p.push("</"+g+">")),p.join("")}function a(m,p){var g=Fne(m[p]);return p==="style"&&Object.keys(m.style).length>0?!0:m.hasOwnProperty(p)&&(g==="string"||g==="boolean"||g==="number")&&p!=="nodeName"&&p!=="className"&&p!=="tagName"&&p!=="textContent"&&p!=="innerText"&&p!=="namespaceURI"&&p!=="innerHTML"}function o(m){if(typeof m=="string")return m;var p="";return Object.keys(m).forEach(function(g){var y=m[g];g=g.replace(/[A-Z]/g,function(x){return"-"+x.toLowerCase()}),p+=g+":"+y+";"}),p}function c(m){var p=m.dataset,g=[];for(var y in p)g.push({name:"data-"+y,value:p[y]});return g.length?u(g):""}function u(m){var p=[];return m.forEach(function(g){var y=g.name,x=g.value;y==="style"&&(x=o(x)),p.push(y+'="'+f(x)+'"')}),p.length?" "+p.join(" "):""}function l(m){var p=[];for(var g in m)a(m,g)&&p.push({name:g,value:m[g]});for(var y in m._attributes)for(var x in m._attributes[y]){var w=m._attributes[y][x],_=(w.prefix?w.prefix+":":"")+x;p.push({name:_,value:w.value})}return m.className&&p.push({name:"class",value:m.className}),p.length?u(p):""}function d(m){var p="";return typeof m=="string"?p=m:m&&(p=m.toString()),p.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function f(m){return d(m).replace(/"/g,"&quot;")}}),Vne=Yh(function(t,e){My();var r=$ne(),n=Hne(),i=Qne(),a=zne(),o=M6e(),c="http://www.w3.org/1999/xhtml";e.exports=u;function u(l,d,f){if(!Dy(this,u))return new u(l);var m=f===void 0?c:f||null;this.tagName=m===c?String(l).toUpperCase():l,this.nodeName=this.tagName,this.className="",this.dataset={},this.childNodes=[],this.parentNode=null,this.style={},this.ownerDocument=d||null,this.namespaceURI=m,this._attributes={},this.tagName==="INPUT"&&(this.type="text")}u.prototype.type="DOMElement",u.prototype.nodeType=1,u.prototype.appendChild=function(l){return l.parentNode&&l.parentNode.removeChild(l),this.childNodes.push(l),l.parentNode=this,l},u.prototype.replaceChild=function(l,d){l.parentNode&&l.parentNode.removeChild(l);var f=this.childNodes.indexOf(d);return d.parentNode=null,this.childNodes[f]=l,l.parentNode=this,d},u.prototype.removeChild=function(l){var d=this.childNodes.indexOf(l);return this.childNodes.splice(d,1),l.parentNode=null,l},u.prototype.insertBefore=function(l,d){l.parentNode&&l.parentNode.removeChild(l);var f=d==null?-1:this.childNodes.indexOf(d);return f>-1?this.childNodes.splice(f,0,l):this.childNodes.push(l),l.parentNode=this,l},u.prototype.setAttributeNS=function(l,d,f){var m=null,p=d,g=d.indexOf(":");if(g>-1&&(m=d.substr(0,g),p=d.substr(g+1)),this.tagName==="INPUT"&&d==="type")this.type=f;else{var y=this._attributes[l]||(this._attributes[l]={});y[p]={value:f,prefix:m}}},u.prototype.getAttributeNS=function(l,d){var f=this._attributes[l],m=f&&f[d]&&f[d].value;return this.tagName==="INPUT"&&d==="type"?this.type:typeof m!="string"?null:m},u.prototype.removeAttributeNS=function(l,d){var f=this._attributes[l];f&&delete f[d]},u.prototype.hasAttributeNS=function(l,d){var f=this._attributes[l];return!!f&&d in f},u.prototype.setAttribute=function(l,d){return this.setAttributeNS(null,l,d)},u.prototype.getAttribute=function(l){return this.getAttributeNS(null,l)},u.prototype.removeAttribute=function(l){return this.removeAttributeNS(null,l)},u.prototype.hasAttribute=function(l){return this.hasAttributeNS(null,l)},u.prototype.removeEventListener=a,u.prototype.addEventListener=i,u.prototype.dispatchEvent=n,u.prototype.focus=function(){},u.prototype.toString=function(){return o(this)},u.prototype.getElementsByClassName=function(l){var d=l.split(" "),f=[];return r(this,function(m){if(m.nodeType===1){var p=m.className||"",g=p.split(" ");d.every(function(y){return g.indexOf(y)!==-1})&&f.push(m)}}),f},u.prototype.getElementsByTagName=function(l){l=l.toLowerCase();var d=[];return r(this.childNodes,function(f){f.nodeType===1&&(l==="*"||f.tagName.toLowerCase()===l)&&d.push(f)}),d},u.prototype.contains=function(l){return r(this,function(d){return l===d})||!1}}),F6e=Yh(function(t,e){My();var r=Vne();e.exports=n;function n(i){if(!Dy(this,n))return new n;this.childNodes=[],this.parentNode=null,this.ownerDocument=i||null}n.prototype.type="DocumentFragment",n.prototype.nodeType=11,n.prototype.nodeName="#document-fragment",n.prototype.appendChild=r.prototype.appendChild,n.prototype.replaceChild=r.prototype.replaceChild,n.prototype.removeChild=r.prototype.removeChild,n.prototype.toString=function(){return this.childNodes.map(function(i){return String(i)}).join("")}}),U6e=Yh(function(t,e){e.exports=r;function r(n){}r.prototype.initEvent=function(n,i,a){this.type=n,this.bubbles=i,this.cancelable=a},r.prototype.preventDefault=function(){}}),$6e=Yh(function(t,e){My();var r=$ne(),n=R6e(),i=D6e(),a=Vne(),o=F6e(),c=U6e(),u=Hne(),l=Qne(),d=zne();e.exports=f;function f(){if(!Dy(this,f))return new f;this.head=this.createElement("head"),this.body=this.createElement("body"),this.documentElement=this.createElement("html"),this.documentElement.appendChild(this.head),this.documentElement.appendChild(this.body),this.childNodes=[this.documentElement],this.nodeType=9}var m=f.prototype;m.createTextNode=function(p){return new i(p,this)},m.createElementNS=function(p,g){var y=p===null?null:String(p);return new a(g,this,y)},m.createElement=function(p){return new a(p,this)},m.createDocumentFragment=function(){return new o(this)},m.createEvent=function(p){return new c(p)},m.createComment=function(p){return new n(p,this)},m.getElementById=function(p){p=String(p);var g=r(this.childNodes,function(y){if(String(y.id)===p)return y});return g||null},m.getElementsByClassName=a.prototype.getElementsByClassName,m.getElementsByTagName=a.prototype.getElementsByTagName,m.contains=a.prototype.contains,m.removeEventListener=d,m.addEventListener=l,m.dispatchEvent=u}),H6e=Yh(function(t,e){var r=$6e();e.exports=new r}),Kne=Yh(function(t,e){var r=typeof global<"u"?global:typeof window<"u"?window:{},n=H6e(),i;typeof document<"u"?i=document:(i=r["__GLOBAL_DOCUMENT_CACHE@4"],i||(i=r["__GLOBAL_DOCUMENT_CACHE@4"]=n)),e.exports=i});function Q6e(t){if(Array.isArray(t))return t}function z6e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n=[],i=!0,a=!1,o,c;try{for(r=r.call(t);!(i=(o=r.next()).done)&&(n.push(o.value),!(e&&n.length===e));i=!0);}catch(u){a=!0,c=u}finally{try{!i&&r.return!=null&&r.return()}finally{if(a)throw c}}return n}}function V6e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dO(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Gne(t,e){if(t){if(typeof t=="string")return dO(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(r);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dO(t,e)}}function hg(t,e){return Q6e(t)||z6e(t,e)||Gne(t,e)||V6e()}var p2=cm(np()),fK=cm(np()),K6e=cm(np()),G6e={now:function(){var t=K6e.default.performance,e=t&&t.timing,r=e&&e.navigationStart,n=typeof r=="number"&&typeof t.now=="function"?r+t.now():Date.now();return Math.round(n)}},gd=G6e,o_=function(){var t,e,r;if(typeof((t=fK.default.crypto)===null||t===void 0?void 0:t.getRandomValues)=="function"){r=new Uint8Array(32),fK.default.crypto.getRandomValues(r);for(var n=0;n<32;n++)r[n]=r[n]%16}else{r=[];for(var i=0;i<32;i++)r[i]=Math.random()*16|0}var a=0;e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(u){var l=u==="x"?r[a]:r[a]&3|8;return a++,l.toString(16)});var o=gd.now(),c=o?.toString(16).substring(3);return c?e.substring(0,28)+c:e},Wne=function(){return("000000"+(Math.random()*Math.pow(36,6)<<0).toString(36)).slice(-6)},Sm=function(t){if(t&&typeof t.nodeName<"u")return t.muxId||(t.muxId=Wne()),t.muxId;var e;try{e=document.querySelector(t)}catch{}return e&&!e.muxId&&(e.muxId=t),e?.muxId||t},XC=function(t){var e;t&&typeof t.nodeName<"u"?(e=t,t=Sm(e)):e=document.querySelector(t);var r=e&&e.nodeName?e.nodeName.toLowerCase():"";return[e,t,r]};function W6e(t){if(Array.isArray(t))return dO(t)}function Y6e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function q6e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jm(t){return W6e(t)||Y6e(t)||Gne(t)||q6e()}var $v={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4},X6e=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3,r,n,i,a,o,c=[console,t],u=(r=console.trace).bind.apply(r,jm(c)),l=(n=console.info).bind.apply(n,jm(c)),d=(i=console.debug).bind.apply(i,jm(c)),f=(a=console.warn).bind.apply(a,jm(c)),m=(o=console.error).bind.apply(o,jm(c)),p=e;return{trace:function(){for(var g=arguments.length,y=new Array(g),x=0;x<g;x++)y[x]=arguments[x];if(!(p>$v.TRACE))return u.apply(void 0,jm(y))},debug:function(){for(var g=arguments.length,y=new Array(g),x=0;x<g;x++)y[x]=arguments[x];if(!(p>$v.DEBUG))return d.apply(void 0,jm(y))},info:function(){for(var g=arguments.length,y=new Array(g),x=0;x<g;x++)y[x]=arguments[x];if(!(p>$v.INFO))return l.apply(void 0,jm(y))},warn:function(){for(var g=arguments.length,y=new Array(g),x=0;x<g;x++)y[x]=arguments[x];if(!(p>$v.WARN))return f.apply(void 0,jm(y))},error:function(){for(var g=arguments.length,y=new Array(g),x=0;x<g;x++)y[x]=arguments[x];if(!(p>$v.ERROR))return m.apply(void 0,jm(y))},get level(){return p},set level(g){g!==this.level&&(p=g??e)}}},ll=X6e("[mux]"),wI=cm(np());function hO(){var t=wI.default.doNotTrack||wI.default.navigator&&wI.default.navigator.doNotTrack;return t==="1"}function gs(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}My();function bu(t,e){if(!Dy(t,e))throw new TypeError("Cannot call a class as a function")}function Z6e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Gm(t,e,r){return e&&Z6e(t.prototype,e),t}function Bn(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function t1(t){return t1=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},t1(t)}function J6e(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&(t=t1(t),t!==null););return t}function hj(t,e,r){return typeof Reflect<"u"&&Reflect.get?hj=Reflect.get:hj=function(n,i,a){var o=J6e(n,i);if(o){var c=Object.getOwnPropertyDescriptor(o,i);return c.get?c.get.call(a||n):c.value}},hj(t,e,r||t)}function fO(t,e){return fO=Object.setPrototypeOf||function(r,n){return r.__proto__=n,r},fO(t,e)}function eUe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&fO(t,e)}function tUe(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,a;for(a=0;a<n.length;a++)i=n[a],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function rUe(t,e){if(t==null)return{};var r=tUe(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function nUe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}Une();function iUe(t,e){return e&&(Fne(e)==="object"||typeof e=="function")?e:gs(t)}function sUe(t){var e=nUe();return function(){var r=t1(t),n;if(e){var i=t1(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return iUe(this,n)}}var Om=function(t){return l_(t)[0]},l_=function(t){if(typeof t!="string"||t==="")return["localhost"];var e=/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,r=t.match(e)||[],n=r[4],i;return n&&(i=(n.match(/[^\.]+\.[^\.]+$/)||[])[0]),[n,i]},_I=cm(np()),aUe={exists:function(){var t=_I.default.performance,e=t&&t.timing;return e!==void 0},domContentLoadedEventEnd:function(){var t=_I.default.performance,e=t&&t.timing;return e&&e.domContentLoadedEventEnd},navigationStart:function(){var t=_I.default.performance,e=t&&t.timing;return e&&e.navigationStart}},ZC=aUe;function Qu(t,e,r){r=r===void 0?1:r,t[e]=t[e]||0,t[e]+=r}function JC(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable}))),n.forEach(function(i){Bn(t,i,r[i])})}return t}function oUe(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r.push.apply(r,n)}return r}function wF(t,e){return e=e??{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):oUe(Object(e)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}),t}var lUe=["x-cdn","content-type"],Yne=["x-request-id","cf-ray","x-amz-cf-id","x-akamai-request-id"],cUe=lUe.concat(Yne);function _F(t){t=t||"";var e={},r=t.trim().split(/[\r\n]+/);return r.forEach(function(n){if(n){var i=n.split(": "),a=i.shift();a&&(cUe.indexOf(a.toLowerCase())>=0||a.toLowerCase().indexOf("x-litix-")===0)&&(e[a]=i.join(": "))}}),e}function eN(t){if(t){var e=Yne.find(function(r){return t[r]!==void 0});return e?t[e]:void 0}}var uUe=function(t){var e={};for(var r in t){var n=t[r],i=n["DATA-ID"].search("io.litix.data.");if(i!==-1){var a=n["DATA-ID"].replace("io.litix.data.","");e[a]=n.VALUE}}return e},qne=uUe,gS=function(t){if(!t)return{};var e=ZC.navigationStart(),r=t.loading,n=r?r.start:t.trequest,i=r?r.first:t.tfirst,a=r?r.end:t.tload;return{bytesLoaded:t.total,requestStart:Math.round(e+n),responseStart:Math.round(e+i),responseEnd:Math.round(e+a)}},hw=function(t){if(!(!t||typeof t.getAllResponseHeaders!="function"))return _F(t.getAllResponseHeaders())},dUe=function(t,e,r){var n=arguments.length>4?arguments[4]:void 0,i=t.log,a=t.utils.secondsToMs,o=function(x){var w=parseInt(n.version),_;return w===1&&x.programDateTime!==null&&(_=x.programDateTime),w===0&&x.pdt!==null&&(_=x.pdt),_};if(!ZC.exists()){i.warn("performance timing not supported. Not tracking HLS.js.");return}var c=function(x,w){return t.emit(e,x,w)},u=function(x,w){var _=w.levels,E=w.audioTracks,N=w.url,C=w.stats,I=w.networkDetails,D=w.sessionData,U={},G={};_.forEach(function(ve,ne){U[ne]={width:ve.width,height:ve.height,bitrate:ve.bitrate,attrs:ve.attrs}}),E.forEach(function(ve,ne){G[ne]={name:ve.name,language:ve.lang,bitrate:ve.bitrate}});var q=gS(C),J=q.bytesLoaded,de=q.requestStart,xe=q.responseStart,we=q.responseEnd;c("requestcompleted",wF(JC({},qne(D)),{request_event_type:x,request_bytes_loaded:J,request_start:de,request_response_start:xe,request_response_end:we,request_type:"manifest",request_hostname:Om(N),request_response_headers:hw(I),request_rendition_lists:{media:U,audio:G,video:{}}}))};r.on(n.Events.MANIFEST_LOADED,u);var l=function(x,w){var _=w.details,E=w.level,N=w.networkDetails,C=w.stats,I=gS(C),D=I.bytesLoaded,U=I.requestStart,G=I.responseStart,q=I.responseEnd,J=_.fragments[_.fragments.length-1],de=o(J)+a(J.duration);c("requestcompleted",{request_event_type:x,request_bytes_loaded:D,request_start:U,request_response_start:G,request_response_end:q,request_current_level:E,request_type:"manifest",request_hostname:Om(_.url),request_response_headers:hw(N),video_holdback:_.holdBack&&a(_.holdBack),video_part_holdback:_.partHoldBack&&a(_.partHoldBack),video_part_target_duration:_.partTarget&&a(_.partTarget),video_target_duration:_.targetduration&&a(_.targetduration),video_source_is_live:_.live,player_manifest_newest_program_time:isNaN(de)?void 0:de})};r.on(n.Events.LEVEL_LOADED,l);var d=function(x,w){var _=w.details,E=w.networkDetails,N=w.stats,C=gS(N),I=C.bytesLoaded,D=C.requestStart,U=C.responseStart,G=C.responseEnd;c("requestcompleted",{request_event_type:x,request_bytes_loaded:I,request_start:D,request_response_start:U,request_response_end:G,request_type:"manifest",request_hostname:Om(_.url),request_response_headers:hw(E)})};r.on(n.Events.AUDIO_TRACK_LOADED,d);var f=function(x,w){var _=w.stats,E=w.networkDetails,N=w.frag;_=_||N.stats;var C=gS(_),I=C.bytesLoaded,D=C.requestStart,U=C.responseStart,G=C.responseEnd,q=E?hw(E):void 0,J={request_event_type:x,request_bytes_loaded:I,request_start:D,request_response_start:U,request_response_end:G,request_hostname:E?Om(E.responseURL):void 0,request_id:q?eN(q):void 0,request_response_headers:q,request_media_duration:N.duration,request_url:E?.responseURL};N.type==="main"?(J.request_type="media",J.request_current_level=N.level,J.request_video_width=(r.levels[N.level]||{}).width,J.request_video_height=(r.levels[N.level]||{}).height,J.request_labeled_bitrate=(r.levels[N.level]||{}).bitrate):J.request_type=N.type,c("requestcompleted",J)};r.on(n.Events.FRAG_LOADED,f);var m=function(x,w){var _=w.frag,E=_.start,N=o(_),C={currentFragmentPDT:N,currentFragmentStart:a(E)};c("fragmentchange",C)};r.on(n.Events.FRAG_CHANGED,m);var p=function(x,w){var _=w.type,E=w.details,N=w.response,C=w.fatal,I=w.frag,D=w.networkDetails,U=I?.url||w.url||"",G=D?hw(D):void 0;if((E===n.ErrorDetails.MANIFEST_LOAD_ERROR||E===n.ErrorDetails.MANIFEST_LOAD_TIMEOUT||E===n.ErrorDetails.FRAG_LOAD_ERROR||E===n.ErrorDetails.FRAG_LOAD_TIMEOUT||E===n.ErrorDetails.LEVEL_LOAD_ERROR||E===n.ErrorDetails.LEVEL_LOAD_TIMEOUT||E===n.ErrorDetails.AUDIO_TRACK_LOAD_ERROR||E===n.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT||E===n.ErrorDetails.SUBTITLE_LOAD_ERROR||E===n.ErrorDetails.SUBTITLE_LOAD_TIMEOUT||E===n.ErrorDetails.KEY_LOAD_ERROR||E===n.ErrorDetails.KEY_LOAD_TIMEOUT)&&c("requestfailed",{request_error:E,request_url:U,request_hostname:Om(U),request_id:G?eN(G):void 0,request_type:E===n.ErrorDetails.FRAG_LOAD_ERROR||E===n.ErrorDetails.FRAG_LOAD_TIMEOUT?"media":E===n.ErrorDetails.AUDIO_TRACK_LOAD_ERROR||E===n.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT?"audio":E===n.ErrorDetails.SUBTITLE_LOAD_ERROR||E===n.ErrorDetails.SUBTITLE_LOAD_TIMEOUT?"subtitle":E===n.ErrorDetails.KEY_LOAD_ERROR||E===n.ErrorDetails.KEY_LOAD_TIMEOUT?"encryption":"manifest",request_error_code:N?.code,request_error_text:N?.text}),C){var q,J="".concat(U?"url: ".concat(U,`
`):"")+"".concat(N&&(N.code||N.text)?"response: ".concat(N.code,", ").concat(N.text,`
`):"")+"".concat(w.reason?"failure reason: ".concat(w.reason,`
`):"")+"".concat(w.level?"level: ".concat(w.level,`
`):"")+"".concat(w.parent?"parent stream controller: ".concat(w.parent,`
`):"")+"".concat(w.buffer?"buffer length: ".concat(w.buffer,`
`):"")+"".concat(w.error?"error: ".concat(w.error,`
`):"")+"".concat(w.event?"event: ".concat(w.event,`
`):"")+"".concat(w.err?"error message: ".concat((q=w.err)===null||q===void 0?void 0:q.message,`
`):"");c("error",{player_error_code:_,player_error_message:E,player_error_context:J})}};r.on(n.Events.ERROR,p);var g=function(x,w){var _=w.frag,E=_&&_._url||"";c("requestcanceled",{request_event_type:x,request_url:E,request_type:"media",request_hostname:Om(E)})};r.on(n.Events.FRAG_LOAD_EMERGENCY_ABORTED,g);var y=function(x,w){var _=w.level,E=r.levels[_];if(E&&E.attrs&&E.attrs.BANDWIDTH){var N=E.attrs.BANDWIDTH,C,I=parseFloat(E.attrs["FRAME-RATE"]);isNaN(I)||(C=I),N?c("renditionchange",{video_source_fps:C,video_source_bitrate:N,video_source_width:E.width,video_source_height:E.height,video_source_rendition_name:E.name,video_source_codec:E?.videoCodec}):i.warn("missing BANDWIDTH from HLS manifest parsed by HLS.js")}};r.on(n.Events.LEVEL_SWITCHED,y),r._stopMuxMonitor=function(){r.off(n.Events.MANIFEST_LOADED,u),r.off(n.Events.LEVEL_LOADED,l),r.off(n.Events.AUDIO_TRACK_LOADED,d),r.off(n.Events.FRAG_LOADED,f),r.off(n.Events.FRAG_CHANGED,m),r.off(n.Events.ERROR,p),r.off(n.Events.FRAG_LOAD_EMERGENCY_ABORTED,g),r.off(n.Events.LEVEL_SWITCHED,y),r.off(n.Events.DESTROYING,r._stopMuxMonitor),delete r._stopMuxMonitor},r.on(n.Events.DESTROYING,r._stopMuxMonitor)},hUe=function(t){t&&typeof t._stopMuxMonitor=="function"&&t._stopMuxMonitor()},mK=function(t,e){if(!t||!t.requestEndDate)return{};var r=Om(t.url),n=t.url,i=t.bytesLoaded,a=new Date(t.requestStartDate).getTime(),o=new Date(t.firstByteDate).getTime(),c=new Date(t.requestEndDate).getTime(),u=isNaN(t.duration)?0:t.duration,l=typeof e.getMetricsFor=="function"?e.getMetricsFor(t.mediaType).HttpList:e.getDashMetrics().getHttpRequests(t.mediaType),d;l.length>0&&(d=_F(l[l.length-1]._responseHeaders||""));var f=d?eN(d):void 0;return{requestStart:a,requestResponseStart:o,requestResponseEnd:c,requestBytesLoaded:i,requestResponseHeaders:d,requestMediaDuration:u,requestHostname:r,requestUrl:n,requestId:f}},fUe=function(t,e){var r=e.getQualityFor(t),n=e.getCurrentTrackFor(t).bitrateList;return n?{currentLevel:r,renditionWidth:n[r].width||null,renditionHeight:n[r].height||null,renditionBitrate:n[r].bandwidth}:{}},mUe=function(t){var e;return(e=t.match(/.*codecs\*?="(.*)"/))===null||e===void 0?void 0:e[1]},AUe=function(t){try{var e,r,n=(r=t.getVersion)===null||r===void 0||(e=r.call(t))===null||e===void 0?void 0:e.split(".").map(function(i){return parseInt(i)})[0];return n}catch{return!1}},pUe=function(t,e,r){var n=t.log;if(!r||!r.on){n.warn("Invalid dash.js player reference. Monitoring blocked.");return}var i=AUe(r),a=function(_,E){return t.emit(e,_,E)},o=function(_){var E=_.type,N=_.data,C=(N||{}).url;a("requestcompleted",{request_event_type:E,request_start:0,request_response_start:0,request_response_end:0,request_bytes_loaded:-1,request_type:"manifest",request_hostname:Om(C),request_url:C})};r.on("manifestLoaded",o);var c={},u=function(_){if(typeof _.getRequests!="function")return null;var E=_.getRequests({state:"executed"});return E.length===0?null:E[E.length-1]},l=function(_){var E=_.type,N=_.fragmentModel,C=_.chunk,I=u(N);d({type:E,request:I,chunk:C})},d=function(_){var E=_.type,N=_.chunk,C=_.request,I=(N||{}).mediaInfo,D=I||{},U=D.type,G=D.bitrateList;G=G||[];var q={};G.forEach(function(Ce,be){q[be]={},q[be].width=Ce.width,q[be].height=Ce.height,q[be].bitrate=Ce.bandwidth,q[be].attrs={}}),U==="video"?c.video=q:U==="audio"?c.audio=q:c.media=q;var J=mK(C,r),de=J.requestStart,xe=J.requestResponseStart,we=J.requestResponseEnd,ve=J.requestResponseHeaders,ne=J.requestMediaDuration,ae=J.requestHostname,oe=J.requestUrl,Ie=J.requestId;a("requestcompleted",{request_event_type:E,request_start:de,request_response_start:xe,request_response_end:we,request_bytes_loaded:-1,request_type:U+"_init",request_response_headers:ve,request_hostname:ae,request_id:Ie,request_url:oe,request_media_duration:ne,request_rendition_lists:c})};i>=4?r.on("initFragmentLoaded",d):r.on("initFragmentLoaded",l);var f=function(_){var E=_.type,N=_.fragmentModel,C=_.chunk,I=u(N);m({type:E,request:I,chunk:C})},m=function(_){var E=_.type,N=_.chunk,C=_.request,I=N||{},D=I.mediaInfo,U=I.start,G=D||{},q=G.type,J=mK(C,r),de=J.requestStart,xe=J.requestResponseStart,we=J.requestResponseEnd,ve=J.requestBytesLoaded,ne=J.requestResponseHeaders,ae=J.requestMediaDuration,oe=J.requestHostname,Ie=J.requestUrl,Ce=J.requestId,be=fUe(q,r),ue=be.currentLevel,Pe=be.renditionWidth,Re=be.renditionHeight,He=be.renditionBitrate;a("requestcompleted",{request_event_type:E,request_start:de,request_response_start:xe,request_response_end:we,request_bytes_loaded:ve,request_type:q,request_response_headers:ne,request_hostname:oe,request_id:Ce,request_url:Ie,request_media_start_time:U,request_media_duration:ae,request_current_level:ue,request_labeled_bitrate:He,request_video_width:Pe,request_video_height:Re})};i>=4?r.on("mediaFragmentLoaded",m):r.on("mediaFragmentLoaded",f);var p={video:void 0,audio:void 0,totalBitrate:void 0},g=function(){if(p.video&&typeof p.video.bitrate=="number"){if(!(p.video.width&&p.video.height)){n.warn("have bitrate info for video but missing width/height");return}var _=p.video.bitrate;if(p.audio&&typeof p.audio.bitrate=="number"&&(_+=p.audio.bitrate),_!==p.totalBitrate)return p.totalBitrate=_,{video_source_bitrate:_,video_source_height:p.video.height,video_source_width:p.video.width,video_source_codec:mUe(p.video.codec)}}},y=function(_,E,N){if(typeof _.newQuality!="number"){n.warn("missing evt.newQuality in qualityChangeRendered event",_);return}var C=_.mediaType;if(C==="audio"||C==="video"){var I=r.getBitrateInfoListFor(C).find(function(U){var G=U.qualityIndex;return G===_.newQuality});if(!(I&&typeof I.bitrate=="number")){n.warn("missing bitrate info for ".concat(C));return}p[C]=wF(JC({},I),{codec:r.getCurrentTrackFor(C).codec});var D=g();D&&a("renditionchange",D)}};r.on("qualityChangeRendered",y);var x=function(_){var E=_.request,N=_.mediaType;E=E||{},a("requestcanceled",{request_event_type:E.type+"_"+E.action,request_url:E.url,request_type:N,request_hostname:Om(E.url)})};r.on("fragmentLoadingAbandoned",x);var w=function(_){var E=_.error,N,C,I=(E==null||(N=E.data)===null||N===void 0?void 0:N.request)||{},D=(E==null||(C=E.data)===null||C===void 0?void 0:C.response)||{};E?.code===27&&a("requestfailed",{request_error:I.type+"_"+I.action,request_url:I.url,request_hostname:Om(I.url),request_type:I.mediaType,request_error_code:D.status,request_error_text:D.statusText});var U="".concat(I!=null&&I.url?"url: ".concat(I.url,`
`):"")+"".concat(D!=null&&D.status||D!=null&&D.statusText?"response: ".concat(D?.status,", ").concat(D?.statusText,`
`):"");a("error",{player_error_code:E?.code,player_error_message:E?.message,player_error_context:U})};r.on("error",w),r._stopMuxMonitor=function(){r.off("manifestLoaded",o),r.off("initFragmentLoaded",d),r.off("mediaFragmentLoaded",m),r.off("qualityChangeRendered",y),r.off("error",w),r.off("fragmentLoadingAbandoned",x),delete r._stopMuxMonitor}},gUe=function(t){t&&typeof t._stopMuxMonitor=="function"&&t._stopMuxMonitor()},AK=0,vUe=(function(){function t(){bu(this,t),Bn(this,"_listeners",void 0)}return Gm(t,[{key:"on",value:function(e,r,n){return r._eventEmitterGuid=r._eventEmitterGuid||++AK,this._listeners=this._listeners||{},this._listeners[e]=this._listeners[e]||[],n&&(r=r.bind(n)),this._listeners[e].push(r),r}},{key:"off",value:function(e,r){var n=this._listeners&&this._listeners[e];n&&n.forEach(function(i,a){i._eventEmitterGuid===r._eventEmitterGuid&&n.splice(a,1)})}},{key:"one",value:function(e,r,n){var i=this;r._eventEmitterGuid=r._eventEmitterGuid||++AK;var a=function(){i.off(e,a),r.apply(n||this,arguments)};a._eventEmitterGuid=r._eventEmitterGuid,this.on(e,a)}},{key:"emit",value:function(e,r){var n=this;if(this._listeners){r=r||{};var i=this._listeners["before"+e]||[],a=this._listeners["before*"]||[],o=this._listeners[e]||[],c=this._listeners["after"+e]||[],u=function(l,d){l=l.slice(),l.forEach(function(f){f.call(n,{type:e},d)})};u(i,r),u(a,r),u(o,r),u(c,r)}}}]),t})(),yUe=vUe,EI=cm(np()),xUe=(function(){function t(e){var r=this;bu(this,t),Bn(this,"_playbackHeartbeatInterval",void 0),Bn(this,"_playheadShouldBeProgressing",void 0),Bn(this,"pm",void 0),this.pm=e,this._playbackHeartbeatInterval=null,this._playheadShouldBeProgressing=!1,e.on("playing",function(){r._playheadShouldBeProgressing=!0}),e.on("play",this._startPlaybackHeartbeatInterval.bind(this)),e.on("playing",this._startPlaybackHeartbeatInterval.bind(this)),e.on("adbreakstart",this._startPlaybackHeartbeatInterval.bind(this)),e.on("adplay",this._startPlaybackHeartbeatInterval.bind(this)),e.on("adplaying",this._startPlaybackHeartbeatInterval.bind(this)),e.on("devicewake",this._startPlaybackHeartbeatInterval.bind(this)),e.on("viewstart",this._startPlaybackHeartbeatInterval.bind(this)),e.on("rebufferstart",this._startPlaybackHeartbeatInterval.bind(this)),e.on("pause",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("ended",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("viewend",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("error",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("aderror",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("adpause",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("adended",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("adbreakend",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("seeked",function(){e.data.player_is_paused?r._stopPlaybackHeartbeatInterval():r._startPlaybackHeartbeatInterval()}),e.on("timeupdate",function(){r._playbackHeartbeatInterval!==null&&e.emit("playbackheartbeat")}),e.on("devicesleep",function(n,i){r._playbackHeartbeatInterval!==null&&(EI.default.clearInterval(r._playbackHeartbeatInterval),e.emit("playbackheartbeatend",{viewer_time:i.viewer_time}),r._playbackHeartbeatInterval=null)})}return Gm(t,[{key:"_startPlaybackHeartbeatInterval",value:function(){var e=this;this._playbackHeartbeatInterval===null&&(this.pm.emit("playbackheartbeat"),this._playbackHeartbeatInterval=EI.default.setInterval(function(){e.pm.emit("playbackheartbeat")},this.pm.playbackHeartbeatTime))}},{key:"_stopPlaybackHeartbeatInterval",value:function(){this._playheadShouldBeProgressing=!1,this._playbackHeartbeatInterval!==null&&(EI.default.clearInterval(this._playbackHeartbeatInterval),this.pm.emit("playbackheartbeatend"),this._playbackHeartbeatInterval=null)}}]),t})(),bUe=xUe,wUe=function t(e){var r=this;bu(this,t),Bn(this,"viewErrored",void 0),e.on("viewinit",function(){r.viewErrored=!1}),e.on("error",function(n,i){try{var a=e.errorTranslator({player_error_code:i.player_error_code,player_error_message:i.player_error_message,player_error_context:i.player_error_context,player_error_severity:i.player_error_severity,player_error_business_exception:i.player_error_business_exception});a&&(e.data.player_error_code=a.player_error_code||i.player_error_code,e.data.player_error_message=a.player_error_message||i.player_error_message,e.data.player_error_context=a.player_error_context||i.player_error_context,e.data.player_error_severity=a.player_error_severity||i.player_error_severity,e.data.player_error_business_exception=a.player_error_business_exception||i.player_error_business_exception,r.viewErrored=!0)}catch(o){e.mux.log.warn("Exception in error translator callback.",o),r.viewErrored=!0}}),e.on("aftererror",function(){var n,i,a,o,c;(n=e.data)===null||n===void 0||delete n.player_error_code,(i=e.data)===null||i===void 0||delete i.player_error_message,(a=e.data)===null||a===void 0||delete a.player_error_context,(o=e.data)===null||o===void 0||delete o.player_error_severity,(c=e.data)===null||c===void 0||delete c.player_error_business_exception})},_Ue=wUe,EUe=(function(){function t(e){bu(this,t),Bn(this,"_watchTimeTrackerLastCheckedTime",void 0),Bn(this,"pm",void 0),this.pm=e,this._watchTimeTrackerLastCheckedTime=null,e.on("playbackheartbeat",this._updateWatchTime.bind(this)),e.on("playbackheartbeatend",this._clearWatchTimeState.bind(this))}return Gm(t,[{key:"_updateWatchTime",value:function(e,r){var n=r.viewer_time;this._watchTimeTrackerLastCheckedTime===null&&(this._watchTimeTrackerLastCheckedTime=n),Qu(this.pm.data,"view_watch_time",n-this._watchTimeTrackerLastCheckedTime),this._watchTimeTrackerLastCheckedTime=n}},{key:"_clearWatchTimeState",value:function(e,r){this._updateWatchTime(e,r),this._watchTimeTrackerLastCheckedTime=null}}]),t})(),SUe=EUe,jUe=(function(){function t(e){var r=this;bu(this,t),Bn(this,"_playbackTimeTrackerLastPlayheadPosition",void 0),Bn(this,"_lastTime",void 0),Bn(this,"_isAdPlaying",void 0),Bn(this,"_callbackUpdatePlaybackTime",void 0),Bn(this,"pm",void 0),this.pm=e,this._playbackTimeTrackerLastPlayheadPosition=-1,this._lastTime=gd.now(),this._isAdPlaying=!1,this._callbackUpdatePlaybackTime=null,e.on("viewinit",function(){r.pm.data.view_playing_time_ms_cumulative=0});var n=this._startPlaybackTimeTracking.bind(this);e.on("playing",n),e.on("adplaying",n),e.on("seeked",n),e.on("rebufferend",n);var i=this._stopPlaybackTimeTracking.bind(this);e.on("playbackheartbeatend",i),e.on("seeking",i),e.on("rebufferstart",i),e.on("adplaying",function(){r._isAdPlaying=!0}),e.on("adended",function(){r._isAdPlaying=!1}),e.on("adpause",function(){r._isAdPlaying=!1}),e.on("adbreakstart",function(){r._isAdPlaying=!1}),e.on("adbreakend",function(){r._isAdPlaying=!1}),e.on("adplay",function(){r._isAdPlaying=!1}),e.on("viewinit",function(){r._playbackTimeTrackerLastPlayheadPosition=-1,r._lastTime=gd.now(),r._isAdPlaying=!1,r._callbackUpdatePlaybackTime=null})}return Gm(t,[{key:"_startPlaybackTimeTracking",value:function(){this._callbackUpdatePlaybackTime===null&&(this._callbackUpdatePlaybackTime=this._updatePlaybackTime.bind(this),this._playbackTimeTrackerLastPlayheadPosition=this.pm.data.player_playhead_time,this._lastTime=gd.now(),this.pm.on("playbackheartbeat",this._callbackUpdatePlaybackTime))}},{key:"_stopPlaybackTimeTracking",value:function(){this._callbackUpdatePlaybackTime&&(this._updatePlaybackTime(),this.pm.off("playbackheartbeat",this._callbackUpdatePlaybackTime),this._callbackUpdatePlaybackTime=null,this._playbackTimeTrackerLastPlayheadPosition=-1)}},{key:"_updatePlaybackTime",value:function(){var e=this.pm.data.player_playhead_time||0,r=gd.now(),n=r-this._lastTime,i=-1;this._playbackTimeTrackerLastPlayheadPosition>=0&&e>this._playbackTimeTrackerLastPlayheadPosition?i=e-this._playbackTimeTrackerLastPlayheadPosition:this._isAdPlaying&&(i=n),i>0&&i<=1e3&&Qu(this.pm.data,"view_content_playback_time",i),this._callbackUpdatePlaybackTime!==null&&n>0&&n<=1e3&&(this._isAdPlaying&&Qu(this.pm.data,"ad_playing_time_ms_cumulative",n),Qu(this.pm.data,"view_playing_time_ms_cumulative",n)),this._playbackTimeTrackerLastPlayheadPosition=e,this._lastTime=r}}]),t})(),TUe=jUe,CUe=(function(){function t(e){bu(this,t),Bn(this,"pm",void 0),this.pm=e;var r=this._updatePlayheadTime.bind(this);e.on("playbackheartbeat",r),e.on("playbackheartbeatend",r),e.on("timeupdate",r),e.on("destroy",function(){e.off("timeupdate",r)})}return Gm(t,[{key:"_updateMaxPlayheadPosition",value:function(){this.pm.data.view_max_playhead_position=typeof this.pm.data.view_max_playhead_position>"u"?this.pm.data.player_playhead_time:Math.max(this.pm.data.view_max_playhead_position,this.pm.data.player_playhead_time)}},{key:"_updatePlayheadTime",value:function(e,r){var n=this,i=function(){n.pm.currentFragmentPDT&&n.pm.currentFragmentStart&&(n.pm.data.player_program_time=n.pm.currentFragmentPDT+n.pm.data.player_playhead_time-n.pm.currentFragmentStart)};if(r&&r.player_playhead_time)this.pm.data.player_playhead_time=r.player_playhead_time,i(),this._updateMaxPlayheadPosition();else if(this.pm.getPlayheadTime){var a=this.pm.getPlayheadTime();typeof a<"u"&&(this.pm.data.player_playhead_time=a,i(),this._updateMaxPlayheadPosition())}}}]),t})(),NUe=CUe,pK=300*1e3,kUe=function t(e){if(bu(this,t),!e.disableRebufferTracking){var r,n=function(a,o){i(o),r=void 0},i=function(a){if(r){var o=a.viewer_time-r;Qu(e.data,"view_rebuffer_duration",o),r=a.viewer_time,e.data.view_rebuffer_duration>pK&&(e.emit("viewend"),e.send("viewend"),e.mux.log.warn("Ending view after rebuffering for longer than ".concat(pK,"ms, future events will be ignored unless a programchange or videochange occurs.")))}e.data.view_watch_time>=0&&e.data.view_rebuffer_count>0&&(e.data.view_rebuffer_frequency=e.data.view_rebuffer_count/e.data.view_watch_time,e.data.view_rebuffer_percentage=e.data.view_rebuffer_duration/e.data.view_watch_time)};e.on("playbackheartbeat",function(a,o){return i(o)}),e.on("rebufferstart",function(a,o){r||(Qu(e.data,"view_rebuffer_count",1),r=o.viewer_time,e.one("rebufferend",n))}),e.on("viewinit",function(){r=void 0,e.off("rebufferend",n)})}},LUe=kUe,IUe=(function(){function t(e){var r=this;bu(this,t),Bn(this,"_lastCheckedTime",void 0),Bn(this,"_lastPlayheadTime",void 0),Bn(this,"_lastPlayheadTimeUpdatedTime",void 0),Bn(this,"_rebuffering",void 0),Bn(this,"pm",void 0),this.pm=e,!(e.disableRebufferTracking||e.disablePlayheadRebufferTracking)&&(this._lastCheckedTime=null,this._lastPlayheadTime=null,this._lastPlayheadTimeUpdatedTime=null,e.on("playbackheartbeat",this._checkIfRebuffering.bind(this)),e.on("playbackheartbeatend",this._cleanupRebufferTracker.bind(this)),e.on("seeking",function(){r._cleanupRebufferTracker(null,{viewer_time:gd.now()})}))}return Gm(t,[{key:"_checkIfRebuffering",value:function(e,r){if(this.pm.seekingTracker.isSeeking||this.pm.adTracker.isAdBreak||!this.pm.playbackHeartbeat._playheadShouldBeProgressing){this._cleanupRebufferTracker(e,r);return}if(this._lastCheckedTime===null){this._prepareRebufferTrackerState(r.viewer_time);return}if(this._lastPlayheadTime!==this.pm.data.player_playhead_time){this._cleanupRebufferTracker(e,r,!0);return}var n=r.viewer_time-this._lastPlayheadTimeUpdatedTime;typeof this.pm.sustainedRebufferThreshold=="number"&&n>=this.pm.sustainedRebufferThreshold&&(this._rebuffering||(this._rebuffering=!0,this.pm.emit("rebufferstart",{viewer_time:this._lastPlayheadTimeUpdatedTime}))),this._lastCheckedTime=r.viewer_time}},{key:"_clearRebufferTrackerState",value:function(){this._lastCheckedTime=null,this._lastPlayheadTime=null,this._lastPlayheadTimeUpdatedTime=null}},{key:"_prepareRebufferTrackerState",value:function(e){this._lastCheckedTime=e,this._lastPlayheadTime=this.pm.data.player_playhead_time,this._lastPlayheadTimeUpdatedTime=e}},{key:"_cleanupRebufferTracker",value:function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(this._rebuffering)this._rebuffering=!1,this.pm.emit("rebufferend",{viewer_time:r.viewer_time});else{if(this._lastCheckedTime===null)return;var i=this.pm.data.player_playhead_time-this._lastPlayheadTime,a=r.viewer_time-this._lastPlayheadTimeUpdatedTime;typeof this.pm.minimumRebufferDuration=="number"&&i>0&&a-i>this.pm.minimumRebufferDuration&&(this._lastCheckedTime=null,this.pm.emit("rebufferstart",{viewer_time:this._lastPlayheadTimeUpdatedTime}),this.pm.emit("rebufferend",{viewer_time:this._lastPlayheadTimeUpdatedTime+a-i}))}n?this._prepareRebufferTrackerState(r.viewer_time):this._clearRebufferTrackerState()}}]),t})(),BUe=IUe,PUe=(function(){function t(e){var r=this;bu(this,t),Bn(this,"pm",void 0),this.pm=e,e.on("viewinit",function(){var n=e.data,i=n.view_id;if(!n.view_program_changed){var a=function(o,c){var u=c.viewer_time;(o.type==="playing"&&typeof e.data.view_time_to_first_frame>"u"||o.type==="adplaying"&&(typeof e.data.view_time_to_first_frame>"u"||r._inPrerollPosition()))&&r.calculateTimeToFirstFrame(u||gd.now(),i)};e.one("playing",a),e.one("adplaying",a),e.one("viewend",function(){e.off("playing",a),e.off("adplaying",a)})}})}return Gm(t,[{key:"_inPrerollPosition",value:function(){return typeof this.pm.data.view_content_playback_time>"u"||this.pm.data.view_content_playback_time<=1e3}},{key:"calculateTimeToFirstFrame",value:function(e,r){r===this.pm.data.view_id&&(this.pm.watchTimeTracker._updateWatchTime(null,{viewer_time:e}),this.pm.data.view_time_to_first_frame=this.pm.data.view_watch_time,(this.pm.data.player_autoplay_on||this.pm.data.video_is_autoplay)&&this.pm.pageLoadInitTime&&(this.pm.data.view_aggregate_startup_time=this.pm.data.view_start+this.pm.data.view_watch_time-this.pm.pageLoadInitTime))}}]),t})(),OUe=PUe,RUe=function t(e){var r=this;bu(this,t),Bn(this,"_lastPlayerHeight",void 0),Bn(this,"_lastPlayerWidth",void 0),Bn(this,"_lastPlayheadPosition",void 0),Bn(this,"_lastSourceHeight",void 0),Bn(this,"_lastSourceWidth",void 0),e.on("viewinit",function(){r._lastPlayheadPosition=-1});var n=["pause","rebufferstart","seeking","error","adbreakstart","hb","renditionchange","orientationchange","viewend","playbackmodechange"],i=["playing","hb","renditionchange","orientationchange","playbackmodechange"];n.forEach(function(a){e.on(a,function(){if(r._lastPlayheadPosition>=0&&e.data.player_playhead_time>=0&&r._lastPlayerWidth>=0&&r._lastSourceWidth>0&&r._lastPlayerHeight>=0&&r._lastSourceHeight>0){var o=e.data.player_playhead_time-r._lastPlayheadPosition;if(o<0){r._lastPlayheadPosition=-1;return}var c=Math.min(r._lastPlayerWidth/r._lastSourceWidth,r._lastPlayerHeight/r._lastSourceHeight),u=Math.max(0,c-1),l=Math.max(0,1-c);e.data.view_max_upscale_percentage=Math.max(e.data.view_max_upscale_percentage||0,u),e.data.view_max_downscale_percentage=Math.max(e.data.view_max_downscale_percentage||0,l),Qu(e.data,"view_total_content_playback_time",o),Qu(e.data,"view_total_upscaling",u*o),Qu(e.data,"view_total_downscaling",l*o)}r._lastPlayheadPosition=-1})}),i.forEach(function(a){e.on(a,function(){r._lastPlayheadPosition=e.data.player_playhead_time,r._lastPlayerWidth=e.data.player_width,r._lastPlayerHeight=e.data.player_height,r._lastSourceWidth=e.data.video_source_width,r._lastSourceHeight=e.data.video_source_height})})},DUe=RUe,MUe=2e3,FUe=function t(e){var r=this;bu(this,t),Bn(this,"isSeeking",void 0),this.isSeeking=!1;var n=-1,i=function(){var a=gd.now(),o=(e.data.viewer_time||a)-(n||a);Qu(e.data,"view_seek_duration",o),e.data.view_max_seek_time=Math.max(e.data.view_max_seek_time||0,o),r.isSeeking=!1,n=-1};e.on("seeking",function(a,o){if(Object.assign(e.data,o),r.isSeeking&&o.viewer_time-n<=MUe){n=o.viewer_time;return}r.isSeeking&&i(),r.isSeeking=!0,n=o.viewer_time,Qu(e.data,"view_seek_count",1),e.send("seeking")}),e.on("seeked",function(){i()}),e.on("viewend",function(){r.isSeeking&&(i(),e.send("seeked")),r.isSeeking=!1,n=-1})},UUe=FUe,gK=function(t,e){t.push(e),t.sort(function(r,n){return r.viewer_time-n.viewer_time})},$Ue=["adbreakstart","adrequest","adresponse","adplay","adplaying","adpause","adended","adbreakend","aderror","adclicked","adskipped"],HUe=(function(){function t(e){var r=this;bu(this,t),Bn(this,"_adHasPlayed",void 0),Bn(this,"_adRequests",void 0),Bn(this,"_adResponses",void 0),Bn(this,"_currentAdRequestNumber",void 0),Bn(this,"_currentAdResponseNumber",void 0),Bn(this,"_prerollPlayTime",void 0),Bn(this,"_wouldBeNewAdPlay",void 0),Bn(this,"isAdBreak",void 0),Bn(this,"pm",void 0),this.pm=e,e.on("viewinit",function(){r.isAdBreak=!1,r._currentAdRequestNumber=0,r._currentAdResponseNumber=0,r._adRequests=[],r._adResponses=[],r._adHasPlayed=!1,r._wouldBeNewAdPlay=!0,r._prerollPlayTime=void 0}),$Ue.forEach(function(i){return e.on(i,r._updateAdData.bind(r))});var n=function(){r.isAdBreak=!1};e.on("adbreakstart",function(){r.isAdBreak=!0}),e.on("play",n),e.on("playing",n),e.on("viewend",n),e.on("adrequest",function(i,a){a=Object.assign({ad_request_id:"generatedAdRequestId"+r._currentAdRequestNumber++},a),gK(r._adRequests,a),Qu(e.data,"view_ad_request_count"),r.inPrerollPosition()&&(e.data.view_preroll_requested=!0,r._adHasPlayed||Qu(e.data,"view_preroll_request_count"))}),e.on("adresponse",function(i,a){a=Object.assign({ad_request_id:"generatedAdRequestId"+r._currentAdResponseNumber++},a),gK(r._adResponses,a);var o=r.findAdRequest(a.ad_request_id);o&&Qu(e.data,"view_ad_request_time",Math.max(0,a.viewer_time-o.viewer_time))}),e.on("adplay",function(i,a){r._adHasPlayed=!0,r._wouldBeNewAdPlay&&(r._wouldBeNewAdPlay=!1,Qu(e.data,"view_ad_played_count")),r.inPrerollPosition()&&!e.data.view_preroll_played&&(e.data.view_preroll_played=!0,r._adRequests.length>0&&(e.data.view_preroll_request_time=Math.max(0,a.viewer_time-r._adRequests[0].viewer_time)),e.data.view_start&&(e.data.view_startup_preroll_request_time=Math.max(0,a.viewer_time-e.data.view_start)),r._prerollPlayTime=a.viewer_time)}),e.on("adplaying",function(i,a){r.inPrerollPosition()&&typeof e.data.view_preroll_load_time>"u"&&typeof r._prerollPlayTime<"u"&&(e.data.view_preroll_load_time=a.viewer_time-r._prerollPlayTime,e.data.view_startup_preroll_load_time=a.viewer_time-r._prerollPlayTime)}),e.on("adclicked",function(i,a){r._wouldBeNewAdPlay||Qu(e.data,"view_ad_clicked_count")}),e.on("adskipped",function(i,a){r._wouldBeNewAdPlay||Qu(e.data,"view_ad_skipped_count")}),e.on("adended",function(){r._wouldBeNewAdPlay=!0}),e.on("aderror",function(){r._wouldBeNewAdPlay=!0})}return Gm(t,[{key:"inPrerollPosition",value:function(){return typeof this.pm.data.view_content_playback_time>"u"||this.pm.data.view_content_playback_time<=1e3}},{key:"findAdRequest",value:function(e){for(var r=0;r<this._adRequests.length;r++)if(this._adRequests[r].ad_request_id===e)return this._adRequests[r]}},{key:"_updateAdData",value:function(e,r){if(this.inPrerollPosition()){if(!this.pm.data.view_preroll_ad_tag_hostname&&r.ad_tag_url){var n=hg(l_(r.ad_tag_url),2),i=n[0],a=n[1];this.pm.data.view_preroll_ad_tag_domain=a,this.pm.data.view_preroll_ad_tag_hostname=i}if(!this.pm.data.view_preroll_ad_asset_hostname&&r.ad_asset_url){var o=hg(l_(r.ad_asset_url),2),c=o[0],u=o[1];this.pm.data.view_preroll_ad_asset_domain=u,this.pm.data.view_preroll_ad_asset_hostname=c}this.pm.data.ad_type="preroll"}this.pm.data.ad_asset_url=r?.ad_asset_url,this.pm.data.ad_tag_url=r?.ad_tag_url,this.pm.data.ad_creative_id=r?.ad_creative_id,this.pm.data.ad_id=r?.ad_id,this.pm.data.ad_universal_id=r?.ad_universal_id,r!=null&&r.ad_type&&(this.pm.data.ad_type=r?.ad_type)}}]),t})(),QUe=HUe,zUe=function t(e){var r=this;bu(this,t),Bn(this,"lastWallClockTime",void 0);var n=function(){r.lastWallClockTime=gd.now(),e.on("before*",i)},i=function(a){var o=gd.now(),c=r.lastWallClockTime;r.lastWallClockTime=o,o-c>3e4&&(e.emit("devicesleep",{viewer_time:c}),Object.assign(e.data,{viewer_time:c}),e.send("devicesleep"),e.emit("devicewake",{viewer_time:o}),Object.assign(e.data,{viewer_time:o}),e.send("devicewake"))};e.one("playbackheartbeat",n),e.on("playbackheartbeatend",function(){e.off("before*",i),e.one("playbackheartbeat",n)})},VUe=zUe,SI=cm(np()),Xne=(function(t){return t()})(function(){var t=function(){for(var r=0,n={};r<arguments.length;r++){var i=arguments[r];for(var a in i)n[a]=i[a]}return n};function e(r){function n(i,a,o){var c;if(typeof document<"u"){if(arguments.length>1){if(o=t({path:"/"},n.defaults,o),typeof o.expires=="number"){var u=new Date;u.setMilliseconds(u.getMilliseconds()+o.expires*864e5),o.expires=u}try{c=JSON.stringify(a),/^[\{\[]/.test(c)&&(a=c)}catch{}return r.write?a=r.write(a,i):a=encodeURIComponent(String(a)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),i=encodeURIComponent(String(i)),i=i.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),i=i.replace(/[\(\)]/g,escape),document.cookie=[i,"=",a,o.expires?"; expires="+o.expires.toUTCString():"",o.path?"; path="+o.path:"",o.domain?"; domain="+o.domain:"",o.secure?"; secure":""].join("")}i||(c={});for(var l=document.cookie?document.cookie.split("; "):[],d=/(%[0-9A-Z]{2})+/g,f=0;f<l.length;f++){var m=l[f].split("="),p=m.slice(1).join("=");p.charAt(0)==='"'&&(p=p.slice(1,-1));try{var g=m[0].replace(d,decodeURIComponent);if(p=r.read?r.read(p,g):r(p,g)||p.replace(d,decodeURIComponent),this.json)try{p=JSON.parse(p)}catch{}if(i===g){c=p;break}i||(c[g]=p)}catch{}}return c}}return n.set=n,n.get=function(i){return n.call(n,i)},n.getJSON=function(){return n.apply({json:!0},[].slice.call(arguments))},n.defaults={},n.remove=function(i,a){n(i,"",t(a,{expires:-1}))},n.withConverter=e,n}return e(function(){})}),Zne="muxData",KUe=function(t){return Object.entries(t).map(function(e){var r=hg(e,2),n=r[0],i=r[1];return"".concat(n,"=").concat(i)}).join("&")},GUe=function(t){return t.split("&").reduce(function(e,r){var n=hg(r.split("="),2),i=n[0],a=n[1],o=+a,c=a&&o==a?o:a;return e[i]=c,e},{})},Jne=function(){var t;try{t=GUe(Xne.get(Zne)||"")}catch{t={}}return t},eie=function(t){try{Xne.set(Zne,KUe(t),{expires:365})}catch{}},WUe=function(){var t=Jne();return t.mux_viewer_id=t.mux_viewer_id||o_(),t.msn=t.msn||Math.random(),eie(t),{mux_viewer_id:t.mux_viewer_id,mux_sample_number:t.msn}},YUe=function(){var t=Jne(),e=gd.now();return t.session_start&&(t.sst=t.session_start,delete t.session_start),t.session_id&&(t.sid=t.session_id,delete t.session_id),t.session_expires&&(t.sex=t.session_expires,delete t.session_expires),(!t.sex||t.sex<e)&&(t.sid=o_(),t.sst=e),t.sex=e+1500*1e3,eie(t),{session_id:t.sid,session_start:t.sst,session_expires:t.sex}};function qUe(t,e){var r=e.beaconCollectionDomain,n=e.beaconDomain;if(r)return"https://"+r;t=t||"inferred";var i=n||"litix.io";return t.match(/^[a-z0-9]+$/)?"https://"+t+"."+i:"https://img.litix.io/a.gif"}var XUe=cm(np()),tie=function(){var t;switch(rie()){case"cellular":t="cellular";break;case"ethernet":t="wired";break;case"wifi":t="wifi";break;case void 0:break;default:t="other"}return t},rie=function(){var t=XUe.default.navigator,e=t&&(t.connection||t.mozConnection||t.webkitConnection);return e&&e.type};tie.getConnectionFromAPI=rie;var ZUe=tie,JUe={a:"env",b:"beacon",c:"custom",d:"ad",e:"event",f:"experiment",i:"internal",m:"mux",n:"response",p:"player",q:"request",r:"retry",s:"session",t:"timestamp",u:"viewer",v:"video",w:"page",x:"view",y:"sub"},e8e=nie(JUe),t8e={ad:"ad",af:"affiliate",ag:"aggregate",ap:"api",al:"application",ao:"audio",ar:"architecture",as:"asset",au:"autoplay",av:"average",bi:"bitrate",bn:"brand",br:"break",bw:"browser",by:"bytes",bz:"business",ca:"cached",cb:"cancel",cc:"codec",cd:"code",cg:"category",ch:"changed",ci:"client",ck:"clicked",cl:"canceled",cm:"cmcd",cn:"config",co:"count",ce:"counter",cp:"complete",cq:"creator",cr:"creative",cs:"captions",ct:"content",cu:"current",cv:"cumulative",cx:"connection",cz:"context",da:"data",dg:"downscaling",dm:"domain",dn:"cdn",do:"downscale",dr:"drm",dp:"dropped",du:"duration",dv:"device",dy:"dynamic",eb:"enabled",ec:"encoding",ed:"edge",en:"end",eg:"engine",em:"embed",er:"error",ep:"experiments",es:"errorcode",et:"errortext",ee:"event",ev:"events",ex:"expires",ez:"exception",fa:"failed",fi:"first",fm:"family",ft:"format",fp:"fps",fq:"frequency",fr:"frame",fs:"fullscreen",ha:"has",hb:"holdback",he:"headers",ho:"host",hn:"hostname",ht:"height",id:"id",ii:"init",in:"instance",ip:"ip",is:"is",ke:"key",la:"language",lb:"labeled",le:"level",li:"live",ld:"loaded",lo:"load",ls:"lists",lt:"latency",ma:"max",md:"media",me:"message",mf:"manifest",mi:"mime",ml:"midroll",mm:"min",mn:"manufacturer",mo:"model",mp:"mode",ms:"ms",mx:"mux",ne:"newest",nm:"name",no:"number",on:"on",or:"origin",os:"os",pa:"paused",pb:"playback",pd:"producer",pe:"percentage",pf:"played",pg:"program",ph:"playhead",pi:"plugin",pl:"preroll",pn:"playing",po:"poster",pp:"pip",pr:"preload",ps:"position",pt:"part",pv:"previous",py:"property",px:"pop",pz:"plan",ra:"rate",rd:"requested",re:"rebuffer",rf:"rendition",rg:"range",rm:"remote",ro:"ratio",rp:"response",rq:"request",rs:"requests",sa:"sample",sd:"skipped",se:"session",sh:"shift",sk:"seek",sm:"stream",so:"source",sq:"sequence",sr:"series",ss:"status",st:"start",su:"startup",sv:"server",sw:"software",sy:"severity",ta:"tag",tc:"tech",te:"text",tg:"target",th:"throughput",ti:"time",tl:"total",to:"to",tt:"title",ty:"type",ug:"upscaling",un:"universal",up:"upscale",ur:"url",us:"user",va:"variant",vd:"viewed",vi:"video",ve:"version",vw:"view",vr:"viewer",wd:"width",wa:"watch",wt:"waiting"},vK=nie(t8e);function nie(t){var e={};for(var r in t)t.hasOwnProperty(r)&&(e[t[r]]=r);return e}function mO(t){var e={},r={};return Object.keys(t).forEach(function(n){var i=!1;if(t.hasOwnProperty(n)&&t[n]!==void 0){var a=n.split("_"),o=a[0],c=e8e[o];c||(ll.info("Data key word `"+a[0]+"` not expected in "+n),c=o+"_"),a.splice(1).forEach(function(u){u==="url"&&(i=!0),vK[u]?c+=vK[u]:Number.isInteger(Number(u))?c+=u:(ll.info("Data key word `"+u+"` not expected in "+n),c+="_"+u+"_")}),i?r[c]=t[n]:e[c]=t[n]}}),Object.assign(e,r)}var qv=cm(np()),r8e=cm(Kne()),n8e={maxBeaconSize:300,maxQueueLength:3600,baseTimeBetweenBeacons:1e4,maxPayloadKBSize:500},i8e=56*1024,s8e=["hb","requestcompleted","requestfailed","requestcanceled"],a8e="https://img.litix.io",_g=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this._beaconUrl=t||a8e,this._eventQueue=[],this._postInFlight=!1,this._resendAfterPost=!1,this._failureCount=0,this._sendTimeout=!1,this._options=Object.assign({},n8e,e)};_g.prototype.queueEvent=function(t,e){var r=Object.assign({},e);return this._eventQueue.length<=this._options.maxQueueLength||t==="eventrateexceeded"?(this._eventQueue.push(r),this._sendTimeout||this._startBeaconSending(),this._eventQueue.length<=this._options.maxQueueLength):!1};_g.prototype.flushEvents=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(t&&this._eventQueue.length===1){this._eventQueue.pop();return}this._eventQueue.length&&this._sendBeaconQueue(),this._startBeaconSending()};_g.prototype.destroy=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this.destroyed=!0,t?this._clearBeaconQueue():this.flushEvents(),qv.default.clearTimeout(this._sendTimeout)};_g.prototype._clearBeaconQueue=function(){var t=this._eventQueue.length>this._options.maxBeaconSize?this._eventQueue.length-this._options.maxBeaconSize:0,e=this._eventQueue.slice(t);t>0&&Object.assign(e[e.length-1],mO({mux_view_message:"event queue truncated"}));var r=this._createPayload(e);iie(this._beaconUrl,r,!0,function(){})};_g.prototype._sendBeaconQueue=function(){var t=this;if(this._postInFlight){this._resendAfterPost=!0;return}var e=this._eventQueue.slice(0,this._options.maxBeaconSize);this._eventQueue=this._eventQueue.slice(this._options.maxBeaconSize),this._postInFlight=!0;var r=this._createPayload(e),n=gd.now();iie(this._beaconUrl,r,!1,function(i,a){a?(t._eventQueue=e.concat(t._eventQueue),t._failureCount+=1,ll.info("Error sending beacon: "+a)):t._failureCount=0,t._roundTripTime=gd.now()-n,t._postInFlight=!1,t._resendAfterPost&&(t._resendAfterPost=!1,t._eventQueue.length>0&&t._sendBeaconQueue())})};_g.prototype._getNextBeaconTime=function(){if(!this._failureCount)return this._options.baseTimeBetweenBeacons;var t=Math.pow(2,this._failureCount-1);return t=t*Math.random(),(1+t)*this._options.baseTimeBetweenBeacons};_g.prototype._startBeaconSending=function(){var t=this;qv.default.clearTimeout(this._sendTimeout),!this.destroyed&&(this._sendTimeout=qv.default.setTimeout(function(){t._eventQueue.length&&t._sendBeaconQueue(),t._startBeaconSending()},this._getNextBeaconTime()))};_g.prototype._createPayload=function(t){var e=this,r={transmission_timestamp:Math.round(gd.now())};this._roundTripTime&&(r.rtt_ms=Math.round(this._roundTripTime));var n,i,a,o=function(){n=JSON.stringify({metadata:r,events:i||t}),a=n.length/1024},c=function(){return a<=e._options.maxPayloadKBSize};return o(),c()||(ll.info("Payload size is too big ("+a+" kb). Removing unnecessary events."),i=t.filter(function(u){return s8e.indexOf(u.e)===-1}),o()),c()||(ll.info("Payload size still too big ("+a+" kb). Cropping fields.."),i.forEach(function(u){for(var l in u){var d=u[l],f=50*1024;typeof d=="string"&&d.length>f&&(u[l]=d.substring(0,f))}}),o()),n};var o8e=typeof r8e.default.exitPictureInPicture=="function"?function(t){return t.length<=i8e}:function(t){return!1},iie=function(t,e,r,n){if(r&&navigator&&navigator.sendBeacon&&navigator.sendBeacon(t,e)){n();return}if(qv.default.fetch){qv.default.fetch(t,{method:"POST",body:e,headers:{"Content-Type":"text/plain"},keepalive:o8e(e)}).then(function(a){return n(null,a.ok?null:"Error")}).catch(function(a){return n(null,a)});return}if(qv.default.XMLHttpRequest){var i=new qv.default.XMLHttpRequest;i.onreadystatechange=function(){if(i.readyState===4)return n(null,i.status!==200?"error":void 0)},i.open("POST",t),i.setRequestHeader("Content-Type","text/plain"),i.send(e);return}n()},l8e=_g,c8e=["env_key","view_id","view_sequence_number","player_sequence_number","beacon_domain","player_playhead_time","viewer_time","mux_api_version","event","video_id","player_instance_id","player_error_code","player_error_message","player_error_context","player_error_severity","player_error_business_exception","view_playing_time_ms_cumulative","ad_playing_time_ms_cumulative"],u8e=["adplay","adplaying","adpause","adfirstquartile","admidpoint","adthirdquartile","adended","adresponse","adrequest"],d8e=["ad_id","ad_creative_id","ad_universal_id"],h8e=["viewstart","error","ended","viewend"],f8e=600*1e3,m8e=(function(){function t(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};bu(this,t);var i,a,o,c,u,l,d,f,m,p,g,y;Bn(this,"mux",void 0),Bn(this,"envKey",void 0),Bn(this,"options",void 0),Bn(this,"eventQueue",void 0),Bn(this,"sampleRate",void 0),Bn(this,"disableCookies",void 0),Bn(this,"respectDoNotTrack",void 0),Bn(this,"previousBeaconData",void 0),Bn(this,"lastEventTime",void 0),Bn(this,"rateLimited",void 0),Bn(this,"pageLevelData",void 0),Bn(this,"viewerData",void 0),this.mux=e,this.envKey=r,this.options=n,this.previousBeaconData=null,this.lastEventTime=0,this.rateLimited=!1,this.eventQueue=new l8e(qUe(this.envKey,this.options));var x;this.sampleRate=(x=this.options.sampleRate)!==null&&x!==void 0?x:1;var w;this.disableCookies=(w=this.options.disableCookies)!==null&&w!==void 0?w:!1;var _;this.respectDoNotTrack=(_=this.options.respectDoNotTrack)!==null&&_!==void 0?_:!1,this.previousBeaconData=null,this.lastEventTime=0,this.rateLimited=!1,this.pageLevelData={mux_api_version:this.mux.API_VERSION,mux_embed:this.mux.NAME,mux_embed_version:this.mux.VERSION,viewer_application_name:(i=this.options.platform)===null||i===void 0?void 0:i.name,viewer_application_version:(a=this.options.platform)===null||a===void 0?void 0:a.version,viewer_application_engine:(o=this.options.platform)===null||o===void 0?void 0:o.layout,viewer_device_name:(c=this.options.platform)===null||c===void 0?void 0:c.product,viewer_device_category:"",viewer_device_manufacturer:(u=this.options.platform)===null||u===void 0?void 0:u.manufacturer,viewer_os_family:(d=this.options.platform)===null||d===void 0||(l=d.os)===null||l===void 0?void 0:l.family,viewer_os_architecture:(m=this.options.platform)===null||m===void 0||(f=m.os)===null||f===void 0?void 0:f.architecture,viewer_os_version:(g=this.options.platform)===null||g===void 0||(p=g.os)===null||p===void 0?void 0:p.version,viewer_connection_type:ZUe(),page_url:SI.default===null||SI.default===void 0||(y=SI.default.location)===null||y===void 0?void 0:y.href},this.viewerData=this.disableCookies?{}:WUe()}return Gm(t,[{key:"send",value:function(e,r){if(!(!e||!(r!=null&&r.view_id))){if(this.respectDoNotTrack&&hO())return ll.info("Not sending `"+e+"` because Do Not Track is enabled");if(!r||typeof r!="object")return ll.error("A data object was expected in send() but was not provided");var n=this.disableCookies?{}:YUe(),i=wF(JC({},this.pageLevelData,r,n,this.viewerData),{event:e,env_key:this.envKey});i.user_id&&(i.viewer_user_id=i.user_id,delete i.user_id);var a,o=((a=i.mux_sample_number)!==null&&a!==void 0?a:0)>=this.sampleRate,c=this._deduplicateBeaconData(e,i),u=mO(c);if(this.lastEventTime=this.mux.utils.now(),o)return ll.info("Not sending event due to sample rate restriction",e,i,u);if(this.envKey||ll.info("Missing environment key (envKey) - beacons will be dropped if the video source is not a valid mux video URL",e,i,u),!this.rateLimited)if(ll.info("Sending event",e,i,u),this.rateLimited=!this.eventQueue.queueEvent(e,u),this.mux.WINDOW_UNLOADING&&e==="viewend")this.eventQueue.destroy(!0);else{if(this.mux.WINDOW_HIDDEN&&e==="hb")this.eventQueue.flushEvents(!0);else if(h8e.indexOf(e)>=0){if(e==="error"&&r.player_error_severity==="warning")return;this.eventQueue.flushEvents()}if(this.rateLimited)return i.event="eventrateexceeded",u=mO(i),this.eventQueue.queueEvent(i.event,u),ll.error("Beaconing disabled due to rate limit.")}}}},{key:"destroy",value:function(){this.eventQueue.destroy(!1)}},{key:"_deduplicateBeaconData",value:function(e,r){var n=this,i={},a=r.view_id;if(a==="-1"||e==="viewstart"||e==="viewend"||!this.previousBeaconData||this.mux.utils.now()-this.lastEventTime>=f8e)i=JC({},r),a&&(this.previousBeaconData=i),a&&e==="viewend"&&(this.previousBeaconData=null);else{var o=e.indexOf("request")===0;Object.entries(r).forEach(function(c){var u=hg(c,2),l=u[0],d=u[1];n.previousBeaconData&&(d!==n.previousBeaconData[l]||c8e.indexOf(l)>-1||n.objectHasChanged(o,l,d,n.previousBeaconData[l])||n.eventRequiresKey(e,l))&&(i[l]=d,n.previousBeaconData[l]=d)})}return i}},{key:"objectHasChanged",value:function(e,r,n,i){return!e||r.indexOf("request_")!==0?!1:r==="request_response_headers"||typeof n!="object"||typeof i!="object"?!0:Object.keys(n||{}).length!==Object.keys(i||{}).length}},{key:"eventRequiresKey",value:function(e,r){return!!(e==="renditionchange"&&r.indexOf("video_source_")===0||d8e.includes(r)&&u8e.includes(e))}}]),t})(),A8e=function t(e){bu(this,t);var r=0,n=0,i=0,a=0,o=0,c=0,u=0,l=function(m,p){var g=p.request_start,y=p.request_response_start,x=p.request_response_end,w=p.request_bytes_loaded;a++;var _,E;if(y?(_=y-(g??0),E=(x??0)-y):E=(x??0)-(g??0),E>0&&w&&w>0){var N=w/E*8e3;o++,n+=w,i+=E,e.data.view_min_request_throughput=Math.min(e.data.view_min_request_throughput||1/0,N),e.data.view_average_request_throughput=n/i*8e3,e.data.view_request_count=a,_>0&&(r+=_,e.data.view_max_request_latency=Math.max(e.data.view_max_request_latency||0,_),e.data.view_average_request_latency=r/o)}},d=function(m,p){a++,c++,e.data.view_request_count=a,e.data.view_request_failed_count=c},f=function(m,p){a++,u++,e.data.view_request_count=a,e.data.view_request_canceled_count=u};e.on("requestcompleted",l),e.on("requestfailed",d),e.on("requestcanceled",f)},p8e=A8e,g8e=3600*1e3,v8e=function t(e){var r=this;bu(this,t),Bn(this,"_lastEventTime",void 0),e.on("before*",function(n,i){var a=i.viewer_time,o=gd.now(),c=r._lastEventTime;if(r._lastEventTime=o,c&&o-c>g8e){var u=Object.keys(e.data).reduce(function(d,f){return f.indexOf("video_")===0?Object.assign(d,Bn({},f,e.data[f])):d},{});e.mux.log.info("Received event after at least an hour inactivity, creating a new view");var l=e.playbackHeartbeat._playheadShouldBeProgressing;e._resetView(Object.assign({viewer_time:a},u)),e.playbackHeartbeat._playheadShouldBeProgressing=l,e.playbackHeartbeat._playheadShouldBeProgressing&&n.type!=="play"&&n.type!=="adbreakstart"&&(e.emit("play",{viewer_time:a}),n.type!=="playing"&&e.emit("playing",{viewer_time:a}))}})},y8e=v8e,x8e=function t(e){bu(this,t);var r=function(c){var u=b8e(c),l=w8e(c);if(u!=null&&!yK(u,a)&&o<=l){a=u,o=l;var d={video_cdn:u};e.emit("cdnchange",d)}},n=null,i=null,a=null,o=0;e.on("viewinit",function(){n=null,i=null,a=null,o=0}),e.on("beforecdnchange",function(c,u){var l=u?.video_cdn;l&&(typeof u.video_previous_cdn>"u"||u.video_previous_cdn===null)&&(yK(l,i)?u.video_previous_cdn=n??void 0:(u.video_previous_cdn=i??void 0,n=i,i=l))}),e.on("requestcompleted",function(c,u){r(u)})};function yK(t,e){return t?.toLowerCase()===e?.toLowerCase()}function b8e(t){var e;return t!=null&&t.request_type&&(t.request_type==="media"||t.request_type==="video")&&!((e=t.request_response_headers)===null||e===void 0)&&e["x-cdn"]?t.request_response_headers["x-cdn"]:t!=null&&t.video_cdn?t.video_cdn:null}function w8e(t){return t!=null&&t.request_start?t.request_start:t!=null&&t.viewer_time?t.viewer_time:Date.now()}var _8e=x8e,E8e=function(t){try{return JSON.parse(t),!0}catch{return!1}},S8e=function t(e){var r=this;bu(this,t),Bn(this,"_emittingAutomaticEvent",!1),Bn(this,"_hasInitialized",!1),Bn(this,"_currentMode","standard"),e.on("viewstart",function(){r._hasInitialized||(r._hasInitialized=!0,r._currentMode=e.data.player_playback_mode||"standard",r._emittingAutomaticEvent=!0,e.emit("playbackmodechange",{player_playback_mode:r._currentMode,player_playback_mode_data:"{}"}),r._emittingAutomaticEvent=!1)}),e.on("viewend",function(){r._hasInitialized=!1}),e.on("playbackmodechange",function(n,i){r._emittingAutomaticEvent||(i.player_playback_mode_data?E8e(i.player_playback_mode_data)||(e.mux.log.warn("Invalid JSON string for player_playback_mode_data"),i.player_playback_mode_data="{}"):i.player_playback_mode_data="{}",e.data.player_playback_mode_data=i.player_playback_mode_data,e.data.player_playback_mode=i.player_playback_mode,r._currentMode=i.player_playback_mode)})},j8e=S8e,T8e=(function(){function t(e){bu(this,t),Bn(this,"pm",void 0),Bn(this,"_currentRangeStart",void 0),Bn(this,"_lastPlayheadTime",void 0),this.pm=e,this._currentRangeStart=null,this._lastPlayheadTime=null,e.on("playbackheartbeat",this._updatePlaybackRange.bind(this)),e.on("playbackheartbeatend",this._endPlaybackRange.bind(this))}return Gm(t,[{key:"_updateLastRangeEnd",value:function(){var e=this.pm.data.video_playback_ranges;if(e&&e.length>0){var r=this.pm.data.player_playhead_time||0;e[e.length-1][1]=r}}},{key:"_updatePlaybackRange",value:function(){var e,r=this.pm.data.player_playhead_time||0;if(!(!this.pm.disableAdPlaybackRangeFiltering&&!((e=this.pm.adTracker)===null||e===void 0)&&e.isAdBreak&&this._lastPlayheadTime!==null&&r<this._lastPlayheadTime)){if(this._lastPlayheadTime!==null&&this._currentRangeStart!==null){var n=Math.abs(r-this._lastPlayheadTime);if(n>1e3){var i=this.pm.data.video_playback_ranges;i&&i.length>0&&(i[i.length-1][1]=this._lastPlayheadTime),this._currentRangeStart=null}}if(this._currentRangeStart===null){var a=this.pm.data.video_playback_ranges||[];a.length>0&&a[a.length-1][1]===r?this._currentRangeStart=a[a.length-1][0]:(this._currentRangeStart=r,a.push([r,r])),this.pm.data.video_playback_ranges=a}else this._updateLastRangeEnd();this._lastPlayheadTime=r}}},{key:"_endPlaybackRange",value:function(){this._currentRangeStart!==null&&(this._updateLastRangeEnd(),this._currentRangeStart=null,this._lastPlayheadTime=null)}}]),t})(),C8e=T8e,N8e=["viewstart","ended","loadstart","pause","play","playing","ratechange","waiting","adplay","adpause","adended","aderror","adplaying","adrequest","adresponse","adbreakstart","adbreakend","adfirstquartile","admidpoint","adthirdquartile","rebufferstart","rebufferend","seeked","error","hb","requestcompleted","requestfailed","requestcanceled","renditionchange","cdnchange","playbackmodechange"],k8e=new Set(["requestcompleted","requestfailed","requestcanceled"]),L8e=(function(t){eUe(r,t);var e=sUe(r);function r(n,i,a){bu(this,r);var o;o=e.call(this),Bn(gs(o),"pageLoadEndTime",void 0),Bn(gs(o),"pageLoadInitTime",void 0),Bn(gs(o),"_destroyed",void 0),Bn(gs(o),"_heartBeatTimeout",void 0),Bn(gs(o),"adTracker",void 0),Bn(gs(o),"dashjs",void 0),Bn(gs(o),"data",void 0),Bn(gs(o),"disablePlayheadRebufferTracking",void 0),Bn(gs(o),"disableRebufferTracking",void 0),Bn(gs(o),"disableAdPlaybackRangeFiltering",void 0),Bn(gs(o),"errorTracker",void 0),Bn(gs(o),"errorTranslator",void 0),Bn(gs(o),"emitTranslator",void 0),Bn(gs(o),"getAdData",void 0),Bn(gs(o),"getPlayheadTime",void 0),Bn(gs(o),"getStateData",void 0),Bn(gs(o),"stateDataTranslator",void 0),Bn(gs(o),"hlsjs",void 0),Bn(gs(o),"id",void 0),Bn(gs(o),"longResumeTracker",void 0),Bn(gs(o),"minimumRebufferDuration",void 0),Bn(gs(o),"mux",void 0),Bn(gs(o),"playbackEventDispatcher",void 0),Bn(gs(o),"playbackHeartbeat",void 0),Bn(gs(o),"playbackHeartbeatTime",void 0),Bn(gs(o),"playheadTime",void 0),Bn(gs(o),"seekingTracker",void 0),Bn(gs(o),"sustainedRebufferThreshold",void 0),Bn(gs(o),"watchTimeTracker",void 0),Bn(gs(o),"currentFragmentPDT",void 0),Bn(gs(o),"currentFragmentStart",void 0),o.pageLoadInitTime=ZC.navigationStart(),o.pageLoadEndTime=ZC.domContentLoadedEventEnd();var c={debug:!1,minimumRebufferDuration:250,sustainedRebufferThreshold:1e3,playbackHeartbeatTime:25,beaconDomain:"litix.io",sampleRate:1,disableCookies:!1,respectDoNotTrack:!1,disableRebufferTracking:!1,disablePlayheadRebufferTracking:!1,disableAdPlaybackRangeFiltering:!1,errorTranslator:function(m){return m},emitTranslator:function(){for(var m=arguments.length,p=new Array(m),g=0;g<m;g++)p[g]=arguments[g];return p},stateDataTranslator:function(m){return m}};o.mux=n,o.id=i,a!=null&&a.beaconDomain&&o.mux.log.warn("The `beaconDomain` setting has been deprecated in favor of `beaconCollectionDomain`. Please change your integration to use `beaconCollectionDomain` instead of `beaconDomain`."),a=Object.assign(c,a),a.data=a.data||{},a.data.property_key&&(a.data.env_key=a.data.property_key,delete a.data.property_key),ll.level=a.debug?$v.DEBUG:$v.WARN,o.getPlayheadTime=a.getPlayheadTime,o.getStateData=a.getStateData||function(){return{}},o.getAdData=a.getAdData||function(){},o.minimumRebufferDuration=a.minimumRebufferDuration,o.sustainedRebufferThreshold=a.sustainedRebufferThreshold,o.playbackHeartbeatTime=a.playbackHeartbeatTime,o.disableRebufferTracking=a.disableRebufferTracking,o.disableRebufferTracking&&o.mux.log.warn("Disabling rebuffer tracking. This should only be used in specific circumstances as a last resort when your player is known to unreliably track rebuffering."),o.disablePlayheadRebufferTracking=a.disablePlayheadRebufferTracking,o.disableAdPlaybackRangeFiltering=a.disableAdPlaybackRangeFiltering,o.errorTranslator=a.errorTranslator,o.emitTranslator=a.emitTranslator,o.stateDataTranslator=a.stateDataTranslator,o.playbackEventDispatcher=new m8e(n,a.data.env_key,a),o.data={player_instance_id:o_(),mux_sample_rate:a.sampleRate,beacon_domain:a.beaconCollectionDomain||a.beaconDomain},o.data.view_sequence_number=1,o.data.player_sequence_number=1;var u=(function(){typeof this.data.view_start>"u"&&(this.data.view_start=this.mux.utils.now(),this.emit("viewstart"),this.emit("renditionchange"))}).bind(gs(o));if(o.on("viewinit",function(m,p){this._resetVideoData(),this._resetViewData(),this._resetErrorData(),this._updateStateData(),Object.assign(this.data,p),this._initializeViewData(),this.one("play",u),this.one("adbreakstart",u)}),o.on("videochange",function(m,p){this._resetView(p)}),o.on("programchange",function(m,p){this.data.player_is_paused&&this.mux.log.warn("The `programchange` event is intended to be used when the content changes mid playback without the video source changing, however the video is not currently playing. If the video source is changing please use the videochange event otherwise you will lose startup time information."),this._resetView(Object.assign(p,{view_program_changed:!0})),u(),this.emit("play"),this.emit("playing")}),o.on("fragmentchange",function(m,p){this.currentFragmentPDT=p.currentFragmentPDT,this.currentFragmentStart=p.currentFragmentStart}),o.on("destroy",o.destroy),typeof window<"u"&&typeof window.addEventListener=="function"&&typeof window.removeEventListener=="function"){var l=function(){var m=typeof o.data.view_start<"u";o.mux.WINDOW_HIDDEN=document.visibilityState==="hidden",m&&o.mux.WINDOW_HIDDEN&&(o.data.player_is_paused||o.emit("hb"))};window.addEventListener("visibilitychange",l,!1);var d=function(m){m.persisted||o.destroy()};window.addEventListener("pagehide",d,!1),o.on("destroy",function(){window.removeEventListener("visibilitychange",l),window.removeEventListener("pagehide",d)})}o.on("playerready",function(m,p){Object.assign(this.data,p)}),N8e.forEach(function(m){o.on(m,function(p,g){m.indexOf("ad")!==0&&this._updateStateData(),Object.assign(this.data,g),this._sanitizeData()}),o.on("after"+m,function(){(m!=="error"||this.errorTracker.viewErrored)&&this.send(m)})}),o.on("viewend",function(m,p){Object.assign(o.data,p)});var f=function(m){var p=this.mux.utils.now();this.data.player_init_time&&(this.data.player_startup_time=p-this.data.player_init_time),this.pageLoadInitTime=this.data.page_load_init_time||this.pageLoadInitTime,this.pageLoadEndTime=this.data.page_load_end_time||this.pageLoadEndTime,!this.mux.PLAYER_TRACKED&&this.pageLoadInitTime&&(this.mux.PLAYER_TRACKED=!0,(this.data.player_init_time||this.pageLoadEndTime)&&(this.data.page_load_time=Math.min(this.data.player_init_time||1/0,this.pageLoadEndTime||1/0)-this.pageLoadInitTime)),this.send("playerready"),delete this.data.player_startup_time,delete this.data.page_load_time};return o.one("playerready",f),o.longResumeTracker=new y8e(gs(o)),o.errorTracker=new _Ue(gs(o)),new VUe(gs(o)),o.seekingTracker=new UUe(gs(o)),o.playheadTime=new NUe(gs(o)),o.playbackHeartbeat=new bUe(gs(o)),new DUe(gs(o)),o.watchTimeTracker=new SUe(gs(o)),new TUe(gs(o)),new C8e(gs(o)),o.adTracker=new QUe(gs(o)),new BUe(gs(o)),new LUe(gs(o)),new OUe(gs(o)),new p8e(gs(o)),new _8e(gs(o)),new j8e(gs(o)),a.hlsjs&&o.addHLSJS(a),a.dashjs&&o.addDashJS(a),o.emit("viewinit",a.data),o}return Gm(r,[{key:"emit",value:function(n,i){var a,o=Object.assign({viewer_time:this.mux.utils.now()},i),c=[n,o];if(this.emitTranslator)try{c=this.emitTranslator(n,o)}catch(u){this.mux.log.warn("Exception in emit translator callback.",u)}c!=null&&c.length&&(a=hj(t1(r.prototype),"emit",this)).call.apply(a,[this].concat(jm(c)))}},{key:"destroy",value:function(){this._destroyed||(this._destroyed=!0,typeof this.data.view_start<"u"&&(this.emit("viewend"),this.send("viewend")),this.playbackEventDispatcher.destroy(),this.removeHLSJS(),this.removeDashJS(),window.clearTimeout(this._heartBeatTimeout))}},{key:"send",value:function(n){if(this.data.view_id){var i=Object.assign({},this.data),a=["player_program_time","player_manifest_newest_program_time","player_live_edge_program_time","player_program_time","video_holdback","video_part_holdback","video_target_duration","video_part_target_duration"];if(i.video_source_is_live===void 0&&(i.player_source_duration===1/0||i.video_source_duration===1/0?i.video_source_is_live=!0:(i.player_source_duration>0||i.video_source_duration>0)&&(i.video_source_is_live=!1)),i.video_source_is_live||a.forEach(function(l){i[l]=void 0}),i.video_source_url=i.video_source_url||i.player_source_url,i.video_source_url){var o=hg(l_(i.video_source_url),2),c=o[0],u=o[1];i.video_source_domain=u,i.video_source_hostname=c}delete i.ad_request_id,i.video_playback_ranges&&(i.video_playback_range=JSON.stringify(i.video_playback_ranges.filter(function(l){return l[0]!==l[1]}).map(function(l){return"".concat(l[0],":").concat(l[1])})),delete i.video_playback_ranges),this.playbackEventDispatcher.send(n,i),this.data.view_sequence_number++,this.data.player_sequence_number++,k8e.has(n)||this._restartHeartBeat(),n==="viewend"&&delete this.data.view_id}}},{key:"_resetView",value:function(n){this.emit("viewend"),this.send("viewend"),this.emit("viewinit",n)}},{key:"_updateStateData",value:function(){var n,i=this.getStateData();if(typeof this.stateDataTranslator=="function")try{i=this.stateDataTranslator(i)}catch(o){this.mux.log.warn("Exception in stateDataTranslator translator callback.",o)}if(!((n=this.data)===null||n===void 0)&&n.video_cdn&&i!=null&&i.video_cdn){i.video_cdn;var a=rUe(i,["video_cdn"]);i=a}Object.assign(this.data,i),this.playheadTime._updatePlayheadTime(),this._sanitizeData()}},{key:"_sanitizeData",value:function(){var n=this,i=["player_width","player_height","video_source_width","video_source_height","player_playhead_time","video_source_bitrate"];i.forEach(function(o){var c=parseInt(n.data[o],10);n.data[o]=isNaN(c)?void 0:c});var a=["player_source_url","video_source_url"];a.forEach(function(o){if(n.data[o]){var c=n.data[o].toLowerCase();(c.indexOf("data:")===0||c.indexOf("blob:")===0)&&(n.data[o]="MSE style URL")}})}},{key:"_resetVideoData",value:function(){var n=this;Object.keys(this.data).forEach(function(i){i.indexOf("video_")===0&&delete n.data[i]})}},{key:"_resetViewData",value:function(){var n=this;Object.keys(this.data).forEach(function(i){i.indexOf("view_")===0&&delete n.data[i]}),this.data.view_sequence_number=1}},{key:"_resetErrorData",value:function(){delete this.data.player_error_code,delete this.data.player_error_message,delete this.data.player_error_context,delete this.data.player_error_severity,delete this.data.player_error_business_exception}},{key:"_initializeViewData",value:function(){var n=this,i=this.data.view_id=o_(),a=function(){i===n.data.view_id&&Qu(n.data,"player_view_count",1)};this.data.player_is_paused?this.one("play",a):a()}},{key:"_restartHeartBeat",value:function(){var n=this;window.clearTimeout(this._heartBeatTimeout),this._heartBeatTimeout=window.setTimeout(function(){n.data.player_is_paused||n.emit("hb")},1e4)}},{key:"addHLSJS",value:function(n){if(!n.hlsjs){this.mux.log.warn("You must pass a valid hlsjs instance in order to track it.");return}if(this.hlsjs){this.mux.log.warn("An instance of HLS.js is already being monitored for this player.");return}this.hlsjs=n.hlsjs,dUe(this.mux,this.id,n.hlsjs,{},n.Hls||window.Hls)}},{key:"removeHLSJS",value:function(){this.hlsjs&&(hUe(this.hlsjs),this.hlsjs=void 0)}},{key:"addDashJS",value:function(n){if(!n.dashjs){this.mux.log.warn("You must pass a valid dashjs instance in order to track it.");return}if(this.dashjs){this.mux.log.warn("An instance of Dash.js is already being monitored for this player.");return}this.dashjs=n.dashjs,pUe(this.mux,this.id,n.dashjs)}},{key:"removeDashJS",value:function(){this.dashjs&&(gUe(this.dashjs),this.dashjs=void 0)}}]),r})(yUe),I8e=L8e,fw=cm(Kne());function jI(){return fw.default&&!!(fw.default.fullscreenElement||fw.default.webkitFullscreenElement||fw.default.mozFullScreenElement||fw.default.msFullscreenElement)}var B8e=["loadstart","pause","play","playing","seeking","seeked","timeupdate","ratechange","stalled","waiting","error","ended"],P8e={1:"MEDIA_ERR_ABORTED",2:"MEDIA_ERR_NETWORK",3:"MEDIA_ERR_DECODE",4:"MEDIA_ERR_SRC_NOT_SUPPORTED"};function O8e(t,e,r){var n=hg(XC(e),3),i=n[0],a=n[1],o=n[2],c=t.log,u=t.utils.getComputedStyle,l=t.utils.secondsToMs,d={automaticErrorTracking:!0};if(i){if(o!=="video"&&o!=="audio")return c.error("The element of `"+a+"` was not a media element.")}else return c.error("No element was found with the `"+a+"` query selector.");i.mux&&(i.mux.destroy(),delete i.mux,c.warn("Already monitoring this video element, replacing existing event listeners"));var f={getPlayheadTime:function(){return l(i.currentTime)},getStateData:function(){var p,g,y,x=((p=(g=this).getPlayheadTime)===null||p===void 0?void 0:p.call(g))||l(i.currentTime),w=this.hlsjs&&this.hlsjs.url,_=this.dashjs&&typeof this.dashjs.getSource=="function"&&this.dashjs.getSource(),E={player_is_paused:i.paused,player_width:parseInt(u(i,"width")),player_height:parseInt(u(i,"height")),player_autoplay_on:i.autoplay,player_preload_on:i.preload,player_language_code:i.lang,player_is_fullscreen:jI(),video_poster_url:i.poster,video_source_url:w||_||i.currentSrc,video_source_duration:l(i.duration),video_source_height:i.videoHeight,video_source_width:i.videoWidth,view_dropped_frame_count:i==null||(y=i.getVideoPlaybackQuality)===null||y===void 0?void 0:y.call(i).droppedVideoFrames};if(i.getStartDate&&x>0){var N=i.getStartDate();if(N&&typeof N.getTime=="function"&&N.getTime()){var C=N.getTime();if(E.player_program_time=C+x,i.seekable.length>0){var I=C+i.seekable.end(i.seekable.length-1);E.player_live_edge_program_time=I}}}return E}};r=Object.assign(d,r,f),r.data=Object.assign({player_software:"HTML5 Video Element",player_mux_plugin_name:"VideoElementMonitor",player_mux_plugin_version:t.VERSION},r.data),i.mux=i.mux||{},i.mux.deleted=!1,i.mux.emit=function(p,g){t.emit(a,p,g)},i.mux.updateData=function(p){i.mux.emit("hb",p)};var m=function(){c.error("The monitor for this video element has already been destroyed.")};i.mux.destroy=function(){Object.keys(i.mux.listeners).forEach(function(p){i.removeEventListener(p,i.mux.listeners[p],!1)}),delete i.mux.listeners,i.mux.fullscreenChangeListener&&(document.removeEventListener("fullscreenchange",i.mux.fullscreenChangeListener,!1),delete i.mux.fullscreenChangeListener),i.mux.destroy=m,i.mux.swapElement=m,i.mux.emit=m,i.mux.addHLSJS=m,i.mux.addDashJS=m,i.mux.removeHLSJS=m,i.mux.removeDashJS=m,i.mux.updateData=m,i.mux.setEmitTranslator=m,i.mux.setStateDataTranslator=m,i.mux.setGetPlayheadTime=m,i.mux.deleted=!0,t.emit(a,"destroy")},i.mux.swapElement=function(p){var g=hg(XC(p),3),y=g[0],x=g[1],w=g[2];if(y){if(w!=="video"&&w!=="audio")return t.log.error("The element of `"+x+"` was not a media element.")}else return t.log.error("No element was found with the `"+x+"` query selector.");y.muxId=i.muxId,delete i.muxId,y.mux=y.mux||{},y.mux.listeners=Object.assign({},i.mux.listeners),delete i.mux.listeners,Object.keys(y.mux.listeners).forEach(function(_){i.removeEventListener(_,y.mux.listeners[_],!1),y.addEventListener(_,y.mux.listeners[_],!1)}),y.mux.fullscreenChangeListener=i.mux.fullscreenChangeListener,delete i.mux.fullscreenChangeListener,y.mux.swapElement=i.mux.swapElement,y.mux.destroy=i.mux.destroy,delete i.mux,i=y},i.mux.addHLSJS=function(p){t.addHLSJS(a,p)},i.mux.addDashJS=function(p){t.addDashJS(a,p)},i.mux.removeHLSJS=function(){t.removeHLSJS(a)},i.mux.removeDashJS=function(){t.removeDashJS(a)},i.mux.setEmitTranslator=function(p){t.setEmitTranslator(a,p)},i.mux.setStateDataTranslator=function(p){t.setStateDataTranslator(a,p)},i.mux.setGetPlayheadTime=function(p){p||(p=r.getPlayheadTime),t.setGetPlayheadTime(a,p)},t.init(a,r),t.emit(a,"playerready"),i.paused||(t.emit(a,"play"),i.readyState>2&&t.emit(a,"playing")),i.mux.listeners={},B8e.forEach(function(p){p==="error"&&!r.automaticErrorTracking||(i.mux.listeners[p]=function(){var g={};if(p==="error"){if(!i.error||i.error.code===1)return;g.player_error_code=i.error.code,g.player_error_message=P8e[i.error.code]||i.error.message}t.emit(a,p,g)},i.addEventListener(p,i.mux.listeners[p],!1))}),i.mux.listeners.enterpictureinpicture=function(){t.emit(a,"playbackmodechange",{player_playback_mode:"pip",player_playback_mode_data:"{}"})},i.mux.listeners.leavepictureinpicture=function(){var p=jI()?"fullscreen":"standard";t.emit(a,"playbackmodechange",{player_playback_mode:p,player_playback_mode_data:"{}"})},i.addEventListener("enterpictureinpicture",i.mux.listeners.enterpictureinpicture,!1),i.addEventListener("leavepictureinpicture",i.mux.listeners.leavepictureinpicture,!1),i.mux.fullscreenChangeListener=function(){var p=jI(),g=document.fullscreenElement;if(p&&(g===i||g!=null&&g.contains(i)))t.emit(a,"playbackmodechange",{player_playback_mode:"fullscreen",player_playback_mode_data:"{}"});else if(!p){var y=document.pictureInPictureElement===i,x=y?"pip":"standard";t.emit(a,"playbackmodechange",{player_playback_mode:x,player_playback_mode_data:"{}"})}},document.addEventListener("fullscreenchange",i.mux.fullscreenChangeListener,!1)}function R8e(t,e,r,n){var i=n;if(t&&typeof t[e]=="function")try{i=t[e].apply(t,r)}catch(a){ll.info("safeCall error",a)}return i}var g2=cm(np()),kx;g2.default&&g2.default.WeakMap&&(kx=new WeakMap);function D8e(t,e){if(!t||!e||!g2.default||typeof g2.default.getComputedStyle!="function")return"";var r;return kx&&kx.has(t)&&(r=kx.get(t)),r||(r=g2.default.getComputedStyle(t,null),kx&&kx.set(t,r)),r.getPropertyValue(e)}function M8e(t){return Math.floor(t*1e3)}var vv={TARGET_DURATION:"#EXT-X-TARGETDURATION",PART_INF:"#EXT-X-PART-INF",SERVER_CONTROL:"#EXT-X-SERVER-CONTROL",INF:"#EXTINF",PROGRAM_DATE_TIME:"#EXT-X-PROGRAM-DATE-TIME",VERSION:"#EXT-X-VERSION",SESSION_DATA:"#EXT-X-SESSION-DATA"},K5=function(t){return this.buffer="",this.manifest={segments:[],serverControl:{},sessionData:{}},this.currentUri={},this.process(t),this.manifest};K5.prototype.process=function(t){var e;for(this.buffer+=t,e=this.buffer.indexOf(`
`);e>-1;e=this.buffer.indexOf(`
`))this.processLine(this.buffer.substring(0,e)),this.buffer=this.buffer.substring(e+1)};K5.prototype.processLine=function(t){var e=t.indexOf(":"),r=H8e(t,e),n=r[0],i=r.length===2?EF(r[1]):void 0;if(n[0]!=="#")this.currentUri.uri=n,this.manifest.segments.push(this.currentUri),this.manifest.targetDuration&&!("duration"in this.currentUri)&&(this.currentUri.duration=this.manifest.targetDuration),this.currentUri={};else switch(n){case vv.TARGET_DURATION:{if(!isFinite(i)||i<0)return;this.manifest.targetDuration=i,this.setHoldBack();break}case vv.PART_INF:{TI(this.manifest,r),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),this.setHoldBack();break}case vv.SERVER_CONTROL:{TI(this.manifest,r),this.setHoldBack();break}case vv.INF:{i===0?this.currentUri.duration=.01:i>0&&(this.currentUri.duration=i);break}case vv.PROGRAM_DATE_TIME:{var a=i,o=new Date(a);this.manifest.dateTimeString||(this.manifest.dateTimeString=a,this.manifest.dateTimeObject=o),this.currentUri.dateTimeString=a,this.currentUri.dateTimeObject=o;break}case vv.VERSION:{TI(this.manifest,r);break}case vv.SESSION_DATA:{var c=Q8e(r[1]),u=qne(c);Object.assign(this.manifest.sessionData,u)}}};K5.prototype.setHoldBack=function(){var t=this.manifest,e=t.serverControl,r=t.targetDuration,n=t.partTargetDuration;if(e){var i="holdBack",a="partHoldBack",o=r&&r*3,c=n&&n*2;r&&!e.hasOwnProperty(i)&&(e[i]=o),o&&e[i]<o&&(e[i]=o),n&&!e.hasOwnProperty(a)&&(e[a]=n*3),n&&e[a]<c&&(e[a]=c)}};var TI=function(t,e){var r=sie(e[0].replace("#EXT-X-","")),n;$8e(e[1])?(n={},n=Object.assign(U8e(e[1]),n)):n=EF(e[1]),t[r]=n},sie=function(t){return t.toLowerCase().replace(/-(\w)/g,function(e){return e[1].toUpperCase()})},EF=function(t){if(t.toLowerCase()==="yes"||t.toLowerCase()==="no")return t.toLowerCase()==="yes";var e=t.indexOf(":")!==-1?t:parseFloat(t);return isNaN(e)?t:e},F8e=function(t){var e={},r=t.split("=");if(r.length>1){var n=sie(r[0]);e[n]=EF(r[1])}return e},U8e=function(t){for(var e=t.split(","),r={},n=0;e.length>n;n++){var i=e[n],a=F8e(i);r=Object.assign(a,r)}return r},$8e=function(t){return t.indexOf("=")>-1},H8e=function(t,e){return e===-1?[t]:[t.substring(0,e),t.substring(e+1)]},Q8e=function(t){var e={};if(t){var r=t.search(","),n=t.slice(0,r),i=t.slice(r+1),a=[n,i];return a.forEach(function(o,c){for(var u=o.replace(/['"]+/g,"").split("="),l=0;l<u.length;l++)u[l]==="DATA-ID"&&(e["DATA-ID"]=u[1-l]),u[l]==="VALUE"&&(e.VALUE=u[1-l])}),{data:e}}},z8e=K5,V8e={safeCall:R8e,safeIncrement:Qu,getComputedStyle:D8e,secondsToMs:M8e,assign:Object.assign,headersStringToObject:_F,cdnHeadersToRequestId:eN,extractHostnameAndDomain:l_,extractHostname:Om,manifestParser:z8e,generateShortID:Wne,generateUUID:o_,now:gd.now,findMediaElement:XC},K8e=V8e,G8e={PLAYER_READY:"playerready",VIEW_INIT:"viewinit",VIDEO_CHANGE:"videochange",PLAY:"play",PAUSE:"pause",PLAYING:"playing",TIME_UPDATE:"timeupdate",SEEKING:"seeking",SEEKED:"seeked",REBUFFER_START:"rebufferstart",REBUFFER_END:"rebufferend",ERROR:"error",ENDED:"ended",RENDITION_CHANGE:"renditionchange",ORIENTATION_CHANGE:"orientationchange",PLAYBACK_MODE_CHANGE:"playbackmodechange",AD_REQUEST:"adrequest",AD_RESPONSE:"adresponse",AD_BREAK_START:"adbreakstart",AD_PLAY:"adplay",AD_PLAYING:"adplaying",AD_PAUSE:"adpause",AD_FIRST_QUARTILE:"adfirstquartile",AD_MID_POINT:"admidpoint",AD_THIRD_QUARTILE:"adthirdquartile",AD_ENDED:"adended",AD_BREAK_END:"adbreakend",AD_ERROR:"aderror",REQUEST_COMPLETED:"requestcompleted",REQUEST_FAILED:"requestfailed",REQUEST_CANCELLED:"requestcanceled",HEARTBEAT:"hb",DESTROY:"destroy"},W8e=G8e,Y8e="mux-embed",q8e="5.16.1",X8e="2.1",hu={},R0=function(t){var e=arguments;typeof t=="string"?R0.hasOwnProperty(t)?p2.default.setTimeout(function(){e=Array.prototype.splice.call(e,1),R0[t].apply(null,e)},0):ll.warn("`"+t+"` is an unknown task"):typeof t=="function"?p2.default.setTimeout(function(){t(R0)},0):ll.warn("`"+t+"` is invalid.")},Z8e={loaded:gd.now(),NAME:Y8e,VERSION:q8e,API_VERSION:X8e,PLAYER_TRACKED:!1,monitor:function(t,e){return O8e(R0,t,e)},destroyMonitor:function(t){var e=hg(XC(t),1),r=e[0];r&&r.mux&&typeof r.mux.destroy=="function"?r.mux.destroy():ll.error("A video element monitor for `"+t+"` has not been initialized via `mux.monitor`.")},addHLSJS:function(t,e){var r=Sm(t);hu[r]?hu[r].addHLSJS(e):ll.error("A monitor for `"+r+"` has not been initialized.")},addDashJS:function(t,e){var r=Sm(t);hu[r]?hu[r].addDashJS(e):ll.error("A monitor for `"+r+"` has not been initialized.")},removeHLSJS:function(t){var e=Sm(t);hu[e]?hu[e].removeHLSJS():ll.error("A monitor for `"+e+"` has not been initialized.")},removeDashJS:function(t){var e=Sm(t);hu[e]?hu[e].removeDashJS():ll.error("A monitor for `"+e+"` has not been initialized.")},init:function(t,e){hO()&&e&&e.respectDoNotTrack&&ll.info("The browser's Do Not Track flag is enabled - Mux beaconing is disabled.");var r=Sm(t);hu[r]=new I8e(R0,r,e)},emit:function(t,e,r){var n=Sm(t);hu[n]?(hu[n].emit(e,r),e==="destroy"&&delete hu[n]):ll.error("A monitor for `"+n+"` has not been initialized.")},updateData:function(t,e){var r=Sm(t);hu[r]?hu[r].emit("hb",e):ll.error("A monitor for `"+r+"` has not been initialized.")},setEmitTranslator:function(t,e){var r=Sm(t);hu[r]?hu[r].emitTranslator=e:ll.error("A monitor for `"+r+"` has not been initialized.")},setStateDataTranslator:function(t,e){var r=Sm(t);hu[r]?hu[r].stateDataTranslator=e:ll.error("A monitor for `"+r+"` has not been initialized.")},setGetPlayheadTime:function(t,e){var r=Sm(t);hu[r]?hu[r].getPlayheadTime=e:ll.error("A monitor for `"+r+"` has not been initialized.")},checkDoNotTrack:hO,log:ll,utils:K8e,events:W8e,WINDOW_HIDDEN:!1,WINDOW_UNLOADING:!1};Object.assign(R0,Z8e);typeof p2.default<"u"&&typeof p2.default.addEventListener=="function"&&p2.default.addEventListener("pagehide",function(t){t.persisted||(R0.WINDOW_UNLOADING=!0)},!1);var SF=R0;const Xn=Number.isFinite||function(t){return typeof t=="number"&&isFinite(t)},J8e=Number.isSafeInteger||function(t){return typeof t=="number"&&Math.abs(t)<=e7e},e7e=Number.MAX_SAFE_INTEGER||9007199254740991;let Oi=(function(t){return t.NETWORK_ERROR="networkError",t.MEDIA_ERROR="mediaError",t.KEY_SYSTEM_ERROR="keySystemError",t.MUX_ERROR="muxError",t.OTHER_ERROR="otherError",t})({}),br=(function(t){return t.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",t.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",t.KEY_SYSTEM_NO_SESSION="keySystemNoSession",t.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",t.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",t.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",t.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",t.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",t.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",t.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",t.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR="keySystemDestroyMediaKeysError",t.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR="keySystemDestroyCloseSessionError",t.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR="keySystemDestroyRemoveSessionError",t.MANIFEST_LOAD_ERROR="manifestLoadError",t.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",t.MANIFEST_PARSING_ERROR="manifestParsingError",t.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",t.LEVEL_EMPTY_ERROR="levelEmptyError",t.LEVEL_LOAD_ERROR="levelLoadError",t.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",t.LEVEL_PARSING_ERROR="levelParsingError",t.LEVEL_SWITCH_ERROR="levelSwitchError",t.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",t.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",t.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",t.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",t.FRAG_LOAD_ERROR="fragLoadError",t.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",t.FRAG_DECRYPT_ERROR="fragDecryptError",t.FRAG_PARSING_ERROR="fragParsingError",t.FRAG_GAP="fragGap",t.REMUX_ALLOC_ERROR="remuxAllocError",t.KEY_LOAD_ERROR="keyLoadError",t.KEY_LOAD_TIMEOUT="keyLoadTimeOut",t.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",t.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",t.BUFFER_APPEND_ERROR="bufferAppendError",t.BUFFER_APPENDING_ERROR="bufferAppendingError",t.BUFFER_STALLED_ERROR="bufferStalledError",t.BUFFER_FULL_ERROR="bufferFullError",t.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",t.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",t.ASSET_LIST_LOAD_ERROR="assetListLoadError",t.ASSET_LIST_LOAD_TIMEOUT="assetListLoadTimeout",t.ASSET_LIST_PARSING_ERROR="assetListParsingError",t.INTERSTITIAL_ASSET_ITEM_ERROR="interstitialAssetItemError",t.INTERNAL_EXCEPTION="internalException",t.INTERNAL_ABORTED="aborted",t.ATTACH_MEDIA_ERROR="attachMediaError",t.UNKNOWN="unknown",t})({}),Be=(function(t){return t.MEDIA_ATTACHING="hlsMediaAttaching",t.MEDIA_ATTACHED="hlsMediaAttached",t.MEDIA_DETACHING="hlsMediaDetaching",t.MEDIA_DETACHED="hlsMediaDetached",t.MEDIA_ENDED="hlsMediaEnded",t.STALL_RESOLVED="hlsStallResolved",t.BUFFER_RESET="hlsBufferReset",t.BUFFER_CODECS="hlsBufferCodecs",t.BUFFER_CREATED="hlsBufferCreated",t.BUFFER_APPENDING="hlsBufferAppending",t.BUFFER_APPENDED="hlsBufferAppended",t.BUFFER_EOS="hlsBufferEos",t.BUFFERED_TO_END="hlsBufferedToEnd",t.BUFFER_FLUSHING="hlsBufferFlushing",t.BUFFER_FLUSHED="hlsBufferFlushed",t.MANIFEST_LOADING="hlsManifestLoading",t.MANIFEST_LOADED="hlsManifestLoaded",t.MANIFEST_PARSED="hlsManifestParsed",t.LEVEL_SWITCHING="hlsLevelSwitching",t.LEVEL_SWITCHED="hlsLevelSwitched",t.LEVEL_LOADING="hlsLevelLoading",t.LEVEL_LOADED="hlsLevelLoaded",t.LEVEL_UPDATED="hlsLevelUpdated",t.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",t.LEVELS_UPDATED="hlsLevelsUpdated",t.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",t.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",t.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",t.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",t.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",t.AUDIO_TRACK_UPDATED="hlsAudioTrackUpdated",t.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",t.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",t.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",t.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",t.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",t.SUBTITLE_TRACK_UPDATED="hlsSubtitleTrackUpdated",t.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",t.CUES_PARSED="hlsCuesParsed",t.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",t.INIT_PTS_FOUND="hlsInitPtsFound",t.FRAG_LOADING="hlsFragLoading",t.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",t.FRAG_LOADED="hlsFragLoaded",t.FRAG_DECRYPTED="hlsFragDecrypted",t.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",t.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",t.FRAG_PARSING_METADATA="hlsFragParsingMetadata",t.FRAG_PARSED="hlsFragParsed",t.FRAG_BUFFERED="hlsFragBuffered",t.FRAG_CHANGED="hlsFragChanged",t.FPS_DROP="hlsFpsDrop",t.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",t.MAX_AUTO_LEVEL_UPDATED="hlsMaxAutoLevelUpdated",t.ERROR="hlsError",t.DESTROYING="hlsDestroying",t.KEY_LOADING="hlsKeyLoading",t.KEY_LOADED="hlsKeyLoaded",t.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",t.BACK_BUFFER_REACHED="hlsBackBufferReached",t.STEERING_MANIFEST_LOADED="hlsSteeringManifestLoaded",t.ASSET_LIST_LOADING="hlsAssetListLoading",t.ASSET_LIST_LOADED="hlsAssetListLoaded",t.INTERSTITIALS_UPDATED="hlsInterstitialsUpdated",t.INTERSTITIALS_BUFFERED_TO_BOUNDARY="hlsInterstitialsBufferedToBoundary",t.INTERSTITIAL_ASSET_PLAYER_CREATED="hlsInterstitialAssetPlayerCreated",t.INTERSTITIAL_STARTED="hlsInterstitialStarted",t.INTERSTITIAL_ASSET_STARTED="hlsInterstitialAssetStarted",t.INTERSTITIAL_ASSET_ENDED="hlsInterstitialAssetEnded",t.INTERSTITIAL_ASSET_ERROR="hlsInterstitialAssetError",t.INTERSTITIAL_ENDED="hlsInterstitialEnded",t.INTERSTITIALS_PRIMARY_RESUMED="hlsInterstitialsPrimaryResumed",t.PLAYOUT_LIMIT_REACHED="hlsPlayoutLimitReached",t.EVENT_CUE_ENTER="hlsEventCueEnter",t})({});var ba={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},fi={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"};class mx{constructor(e,r=0,n=0){this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=r,this.totalWeight_=n}sample(e,r){const n=Math.pow(this.alpha_,e);this.estimate_=r*(1-n)+n*this.estimate_,this.totalWeight_+=e}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){const e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_}}class t7e{constructor(e,r,n,i=100){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=n,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new mx(e),this.fast_=new mx(r),this.defaultTTFB_=i,this.ttfb_=new mx(e)}update(e,r){const{slow_:n,fast_:i,ttfb_:a}=this;n.halfLife!==e&&(this.slow_=new mx(e,n.getEstimate(),n.getTotalWeight())),i.halfLife!==r&&(this.fast_=new mx(r,i.getEstimate(),i.getTotalWeight())),a.halfLife!==e&&(this.ttfb_=new mx(e,a.getEstimate(),a.getTotalWeight()))}sample(e,r){e=Math.max(e,this.minDelayMs_);const n=8*r,i=e/1e3,a=n/i;this.fast_.sample(i,a),this.slow_.sample(i,a)}sampleTTFB(e){const r=e/1e3,n=Math.sqrt(2)*Math.exp(-Math.pow(r,2)/2);this.ttfb_.sample(n,Math.max(e,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}get defaultEstimate(){return this.defaultEstimate_}destroy(){}}function r7e(t,e,r){return(e=i7e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function nl(){return nl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},nl.apply(null,arguments)}function xK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Uo(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?xK(Object(r),!0).forEach(function(n){r7e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):xK(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function n7e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function i7e(t){var e=n7e(t,"string");return typeof e=="symbol"?e:e+""}class um{constructor(e,r){this.trace=void 0,this.debug=void 0,this.log=void 0,this.warn=void 0,this.info=void 0,this.error=void 0;const n=`[${e}]:`;this.trace=x0,this.debug=r.debug.bind(null,n),this.log=r.log.bind(null,n),this.warn=r.warn.bind(null,n),this.info=r.info.bind(null,n),this.error=r.error.bind(null,n)}}const x0=function(){},s7e={trace:x0,debug:x0,log:x0,warn:x0,info:x0,error:x0};function AO(){return nl({},s7e)}function a7e(t,e){const r=self.console[t];return r?r.bind(self.console,`${e?"["+e+"] ":""}[${t}] >`):x0}function bK(t,e,r){return e[t]?e[t].bind(e):a7e(t,r)}const pO=AO();function o7e(t,e,r){const n=AO();if(typeof console=="object"&&t===!0||typeof t=="object"){const i=["debug","log","info","warn","error"];i.forEach(a=>{n[a]=bK(a,t,r)});try{n.log(`Debug logs enabled for "${e}" in hls.js version 1.6.15`)}catch{return AO()}i.forEach(a=>{pO[a]=bK(a,t)})}else nl(pO,n);return n}const Ho=pO;function G0(t=!0){return typeof self>"u"?void 0:(t||!self.MediaSource)&&self.ManagedMediaSource||self.MediaSource||self.WebKitMediaSource}function l7e(t){return typeof self<"u"&&t===self.ManagedMediaSource}function aie(t,e){const r=Object.keys(t),n=Object.keys(e),i=r.length,a=n.length;return!i||!a||i===a&&!r.some(o=>n.indexOf(o)===-1)}function Ef(t,e=!1){if(typeof TextDecoder<"u"){const l=new TextDecoder("utf-8").decode(t);if(e){const d=l.indexOf("\0");return d!==-1?l.substring(0,d):l}return l.replace(/\0/g,"")}const r=t.length;let n,i,a,o="",c=0;for(;c<r;){if(n=t[c++],n===0&&e)return o;if(n===0||n===3)continue;switch(n>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:o+=String.fromCharCode(n);break;case 12:case 13:i=t[c++],o+=String.fromCharCode((n&31)<<6|i&63);break;case 14:i=t[c++],a=t[c++],o+=String.fromCharCode((n&15)<<12|(i&63)<<6|(a&63)<<0);break}}return o}function $d(t){let e="";for(let r=0;r<t.length;r++){let n=t[r].toString(16);n.length<2&&(n="0"+n),e+=n}return e}function oie(t){return Uint8Array.from(t.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}function c7e(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var CI={exports:{}},wK;function u7e(){return wK||(wK=1,(function(t,e){(function(r){var n=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,i=/^(?=([^\/?#]*))\1([^]*)$/,a=/(?:\/|^)\.(?=\/)/g,o=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,c={buildAbsoluteURL:function(u,l,d){if(d=d||{},u=u.trim(),l=l.trim(),!l){if(!d.alwaysNormalize)return u;var f=c.parseURL(u);if(!f)throw new Error("Error trying to parse base URL.");return f.path=c.normalizePath(f.path),c.buildURLFromParts(f)}var m=c.parseURL(l);if(!m)throw new Error("Error trying to parse relative URL.");if(m.scheme)return d.alwaysNormalize?(m.path=c.normalizePath(m.path),c.buildURLFromParts(m)):l;var p=c.parseURL(u);if(!p)throw new Error("Error trying to parse base URL.");if(!p.netLoc&&p.path&&p.path[0]!=="/"){var g=i.exec(p.path);p.netLoc=g[1],p.path=g[2]}p.netLoc&&!p.path&&(p.path="/");var y={scheme:p.scheme,netLoc:m.netLoc,path:null,params:m.params,query:m.query,fragment:m.fragment};if(!m.netLoc&&(y.netLoc=p.netLoc,m.path[0]!=="/"))if(!m.path)y.path=p.path,m.params||(y.params=p.params,m.query||(y.query=p.query));else{var x=p.path,w=x.substring(0,x.lastIndexOf("/")+1)+m.path;y.path=c.normalizePath(w)}return y.path===null&&(y.path=d.alwaysNormalize?c.normalizePath(m.path):m.path),c.buildURLFromParts(y)},parseURL:function(u){var l=n.exec(u);return l?{scheme:l[1]||"",netLoc:l[2]||"",path:l[3]||"",params:l[4]||"",query:l[5]||"",fragment:l[6]||""}:null},normalizePath:function(u){for(u=u.split("").reverse().join("").replace(a,"");u.length!==(u=u.replace(o,"")).length;);return u.split("").reverse().join("")},buildURLFromParts:function(u){return u.scheme+u.netLoc+u.path+u.params+u.query+u.fragment}};t.exports=c})()})(CI)),CI.exports}var jF=u7e();class TF{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}var cl={AUDIO:"audio",VIDEO:"video",AUDIOVIDEO:"audiovideo"};class lie{constructor(e){this._byteRange=null,this._url=null,this._stats=null,this._streams=null,this.base=void 0,this.relurl=void 0,typeof e=="string"&&(e={url:e}),this.base=e,h7e(this,"stats")}setByteRange(e,r){const n=e.split("@",2);let i;n.length===1?i=r?.byteRangeEndOffset||0:i=parseInt(n[1]),this._byteRange=[i,parseInt(n[0])+i]}get baseurl(){return this.base.url}get byteRange(){return this._byteRange===null?[]:this._byteRange}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get elementaryStreams(){return this._streams===null&&(this._streams={[cl.AUDIO]:null,[cl.VIDEO]:null,[cl.AUDIOVIDEO]:null}),this._streams}set elementaryStreams(e){this._streams=e}get hasStats(){return this._stats!==null}get hasStreams(){return this._streams!==null}get stats(){return this._stats===null&&(this._stats=new TF),this._stats}set stats(e){this._stats=e}get url(){return!this._url&&this.baseurl&&this.relurl&&(this._url=jF.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""}set url(e){this._url=e}clearElementaryStreamInfo(){const{elementaryStreams:e}=this;e[cl.AUDIO]=null,e[cl.VIDEO]=null,e[cl.AUDIOVIDEO]=null}}function eu(t){return t.sn!=="initSegment"}class NI extends lie{constructor(e,r){super(r),this._decryptdata=null,this._programDateTime=null,this._ref=null,this._bitrate=void 0,this.rawProgramDateTime=null,this.tagList=[],this.duration=0,this.sn=0,this.levelkeys=void 0,this.type=void 0,this.loader=null,this.keyLoader=null,this.level=-1,this.cc=0,this.startPTS=void 0,this.endPTS=void 0,this.startDTS=void 0,this.endDTS=void 0,this.start=0,this.playlistOffset=0,this.deltaPTS=void 0,this.maxStartPTS=void 0,this.minEndPTS=void 0,this.data=void 0,this.bitrateTest=!1,this.title=null,this.initSegment=null,this.endList=void 0,this.gap=void 0,this.urlId=0,this.type=e}get byteLength(){if(this.hasStats){const e=this.stats.total;if(e)return e}if(this.byteRange.length){const e=this.byteRange[0],r=this.byteRange[1];if(Xn(e)&&Xn(r))return r-e}return null}get bitrate(){return this.byteLength?this.byteLength*8/this.duration:this._bitrate?this._bitrate:null}set bitrate(e){this._bitrate=e}get decryptdata(){var e;const{levelkeys:r}=this;if(!r||r.NONE)return null;if(r.identity)this._decryptdata||(this._decryptdata=r.identity.getDecryptData(this.sn));else if(!((e=this._decryptdata)!=null&&e.keyId)){const n=Object.keys(r);if(n.length===1){const i=this._decryptdata=r[n[0]]||null;i&&(this._decryptdata=i.getDecryptData(this.sn,r))}}return this._decryptdata}get end(){return this.start+this.duration}get endProgramDateTime(){if(this.programDateTime===null)return null;const e=Xn(this.duration)?this.duration:0;return this.programDateTime+e*1e3}get encrypted(){var e;if((e=this._decryptdata)!=null&&e.encrypted)return!0;if(this.levelkeys){var r;const n=Object.keys(this.levelkeys),i=n.length;if(i>1||i===1&&(r=this.levelkeys[n[0]])!=null&&r.encrypted)return!0}return!1}get programDateTime(){return this._programDateTime===null&&this.rawProgramDateTime&&(this.programDateTime=Date.parse(this.rawProgramDateTime)),this._programDateTime}set programDateTime(e){if(!Xn(e)){this._programDateTime=this.rawProgramDateTime=null;return}this._programDateTime=e}get ref(){return eu(this)?(this._ref||(this._ref={base:this.base,start:this.start,duration:this.duration,sn:this.sn,programDateTime:this.programDateTime}),this._ref):null}addStart(e){this.setStart(this.start+e)}setStart(e){this.start=e,this._ref&&(this._ref.start=e)}setDuration(e){this.duration=e,this._ref&&(this._ref.duration=e)}setKeyFormat(e){const r=this.levelkeys;if(r){var n;const i=r[e];i&&!((n=this._decryptdata)!=null&&n.keyId)&&(this._decryptdata=i.getDecryptData(this.sn,r))}}abortRequests(){var e,r;(e=this.loader)==null||e.abort(),(r=this.keyLoader)==null||r.abort()}setElementaryStreamInfo(e,r,n,i,a,o=!1){const{elementaryStreams:c}=this,u=c[e];if(!u){c[e]={startPTS:r,endPTS:n,startDTS:i,endDTS:a,partial:o};return}u.startPTS=Math.min(u.startPTS,r),u.endPTS=Math.max(u.endPTS,n),u.startDTS=Math.min(u.startDTS,i),u.endDTS=Math.max(u.endDTS,a)}}let d7e=class extends lie{constructor(e,r,n,i,a){super(n),this.fragOffset=0,this.duration=0,this.gap=!1,this.independent=!1,this.relurl=void 0,this.fragment=void 0,this.index=void 0,this.duration=e.decimalFloatingPoint("DURATION"),this.gap=e.bool("GAP"),this.independent=e.bool("INDEPENDENT"),this.relurl=e.enumeratedString("URI"),this.fragment=r,this.index=i;const o=e.enumeratedString("BYTERANGE");o&&this.setByteRange(o,a),a&&(this.fragOffset=a.fragOffset+a.duration)}get start(){return this.fragment.start+this.fragOffset}get end(){return this.start+this.duration}get loaded(){const{elementaryStreams:e}=this;return!!(e.audio||e.video||e.audiovideo)}};function cie(t,e){const r=Object.getPrototypeOf(t);if(r){const n=Object.getOwnPropertyDescriptor(r,e);return n||cie(r,e)}}function h7e(t,e){const r=cie(t,e);r&&(r.enumerable=!0,Object.defineProperty(t,e,r))}const _K=Math.pow(2,32)-1,f7e=[].push,uie={video:1,audio:2,id3:3,text:4};function Mu(t){return String.fromCharCode.apply(null,t)}function die(t,e){const r=t[e]<<8|t[e+1];return r<0?65536+r:r}function Os(t,e){const r=hie(t,e);return r<0?4294967296+r:r}function EK(t,e){let r=Os(t,e);return r*=Math.pow(2,32),r+=Os(t,e+4),r}function hie(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}function m7e(t){const e=t.byteLength;for(let r=0;r<e;){const n=Os(t,r);if(n>8&&t[r+4]===109&&t[r+5]===111&&t[r+6]===111&&t[r+7]===102)return!0;r=n>1?r+n:e}return!1}function ga(t,e){const r=[];if(!e.length)return r;const n=t.byteLength;for(let i=0;i<n;){const a=Os(t,i),o=Mu(t.subarray(i+4,i+8)),c=a>1?i+a:n;if(o===e[0])if(e.length===1)r.push(t.subarray(i+8,c));else{const u=ga(t.subarray(i+8,c),e.slice(1));u.length&&f7e.apply(r,u)}i=c}return r}function A7e(t){const e=[],r=t[0];let n=8;const i=Os(t,n);n+=4;let a=0,o=0;r===0?(a=Os(t,n),o=Os(t,n+4),n+=8):(a=EK(t,n),o=EK(t,n+8),n+=16),n+=2;let c=t.length+o;const u=die(t,n);n+=2;for(let l=0;l<u;l++){let d=n;const f=Os(t,d);d+=4;const m=f&2147483647;if((f&2147483648)>>>31===1)return Ho.warn("SIDX has hierarchical references (not supported)"),null;const g=Os(t,d);d+=4,e.push({referenceSize:m,subsegmentDuration:g,info:{duration:g/i,start:c,end:c+m-1}}),c+=m,d+=4,n=d}return{earliestPresentationTime:a,timescale:i,version:r,referencesCount:u,references:e}}function fie(t){const e=[],r=ga(t,["moov","trak"]);for(let i=0;i<r.length;i++){const a=r[i],o=ga(a,["tkhd"])[0];if(o){let c=o[0];const u=Os(o,c===0?12:20),l=ga(a,["mdia","mdhd"])[0];if(l){c=l[0];const d=Os(l,c===0?12:20),f=ga(a,["mdia","hdlr"])[0];if(f){const m=Mu(f.subarray(8,12)),p={soun:cl.AUDIO,vide:cl.VIDEO}[m],g=ga(a,["mdia","minf","stbl","stsd"])[0],y=p7e(g);p?(e[u]={timescale:d,type:p,stsd:y},e[p]=Uo({timescale:d,id:u},y)):e[u]={timescale:d,type:m,stsd:y}}}}}return ga(t,["moov","mvex","trex"]).forEach(i=>{const a=Os(i,4),o=e[a];o&&(o.default={duration:Os(i,12),flags:Os(i,20)})}),e}function p7e(t){const e=t.subarray(8),r=e.subarray(86),n=Mu(e.subarray(4,8));let i=n,a;const o=n==="enca"||n==="encv";if(o){const l=ga(e,[n])[0].subarray(n==="enca"?28:78);ga(l,["sinf"]).forEach(f=>{const m=ga(f,["schm"])[0];if(m){const p=Mu(m.subarray(4,8));if(p==="cbcs"||p==="cenc"){const g=ga(f,["frma"])[0];g&&(i=Mu(g))}}})}const c=i;switch(i){case"avc1":case"avc2":case"avc3":case"avc4":{const u=ga(r,["avcC"])[0];u&&u.length>3&&(i+="."+yS(u[1])+yS(u[2])+yS(u[3]),a=vS(c==="avc1"?"dva1":"dvav",r));break}case"mp4a":{const u=ga(e,[n])[0],l=ga(u.subarray(28),["esds"])[0];if(l&&l.length>7){let d=4;if(l[d++]!==3)break;d=kI(l,d),d+=2;const f=l[d++];if(f&128&&(d+=2),f&64&&(d+=l[d++]),l[d++]!==4)break;d=kI(l,d);const m=l[d++];if(m===64)i+="."+yS(m);else break;if(d+=12,l[d++]!==5)break;d=kI(l,d);const p=l[d++];let g=(p&248)>>3;g===31&&(g+=1+((p&7)<<3)+((l[d]&224)>>5)),i+="."+g}break}case"hvc1":case"hev1":{const u=ga(r,["hvcC"])[0];if(u&&u.length>12){const l=u[1],d=["","A","B","C"][l>>6],f=l&31,m=Os(u,2),p=(l&32)>>5?"H":"L",g=u[12],y=u.subarray(6,12);i+="."+d+f,i+="."+g7e(m).toString(16).toUpperCase(),i+="."+p+g;let x="";for(let w=y.length;w--;){const _=y[w];(_||x)&&(x="."+_.toString(16).toUpperCase()+x)}i+=x}a=vS(c=="hev1"?"dvhe":"dvh1",r);break}case"dvh1":case"dvhe":case"dvav":case"dva1":case"dav1":{i=vS(i,r)||i;break}case"vp09":{const u=ga(r,["vpcC"])[0];if(u&&u.length>6){const l=u[4],d=u[5],f=u[6]>>4&15;i+="."+kA(l)+"."+kA(d)+"."+kA(f)}break}case"av01":{const u=ga(r,["av1C"])[0];if(u&&u.length>2){const l=u[1]>>>5,d=u[1]&31,f=u[2]>>>7?"H":"M",m=(u[2]&64)>>6,p=(u[2]&32)>>5,g=l===2&&m?p?12:10:m?10:8,y=(u[2]&16)>>4,x=(u[2]&8)>>3,w=(u[2]&4)>>2,_=u[2]&3;i+="."+l+"."+kA(d)+f+"."+kA(g)+"."+y+"."+x+w+_+"."+kA(1)+"."+kA(1)+"."+kA(1)+"."+0,a=vS("dav1",r)}break}}return{codec:i,encrypted:o,supplemental:a}}function vS(t,e){const r=ga(e,["dvvC"]),n=r.length?r[0]:ga(e,["dvcC"])[0];if(n){const i=n[2]>>1&127,a=n[2]<<5&32|n[3]>>3&31;return t+"."+kA(i)+"."+kA(a)}}function g7e(t){let e=0;for(let r=0;r<32;r++)e|=(t>>r&1)<<31-r;return e>>>0}function kI(t,e){const r=e+5;for(;t[e++]&128&&e<r;);return e}function yS(t){return("0"+t.toString(16).toUpperCase()).slice(-2)}function kA(t){return(t<10?"0":"")+t}function v7e(t,e){if(!t||!e)return;const r=e.keyId;r&&e.isCommonEncryption&&mie(t,(n,i)=>{const a=n.subarray(8,24);a.some(o=>o!==0)||(Ho.log(`[eme] Patching keyId in 'enc${i?"a":"v"}>sinf>>tenc' box: ${$d(a)} -> ${$d(r)}`),n.set(r,8))})}function y7e(t){const e=[];return mie(t,r=>e.push(r.subarray(8,24))),e}function mie(t,e){ga(t,["moov","trak"]).forEach(n=>{const i=ga(n,["mdia","minf","stbl","stsd"])[0];if(!i)return;const a=i.subarray(8);let o=ga(a,["enca"]);const c=o.length>0;c||(o=ga(a,["encv"])),o.forEach(u=>{const l=c?u.subarray(28):u.subarray(78);ga(l,["sinf"]).forEach(f=>{const m=Aie(f);m&&e(m,c)})})})}function Aie(t){const e=ga(t,["schm"])[0];if(e){const r=Mu(e.subarray(4,8));if(r==="cbcs"||r==="cenc"){const n=ga(t,["schi","tenc"])[0];if(n)return n}}}function x7e(t,e,r){const n={},i=ga(t,["moof","traf"]);for(let a=0;a<i.length;a++){const o=i[a],c=ga(o,["tfhd"])[0],u=Os(c,4),l=e[u];if(!l)continue;n[u]||(n[u]={start:NaN,duration:0,sampleCount:0,timescale:l.timescale,type:l.type});const d=n[u],f=ga(o,["tfdt"])[0];if(f){const E=f[0];let N=Os(f,4);E===1&&(N===_K?r.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"):(N*=_K+1,N+=Os(f,8))),Xn(N)&&(!Xn(d.start)||N<d.start)&&(d.start=N)}const m=l.default,p=Os(c,0)|m?.flags;let g=m?.duration||0;p&8&&(p&2?g=Os(c,12):g=Os(c,8));const y=ga(o,["trun"]);let x=d.start||0,w=0,_=g;for(let E=0;E<y.length;E++){const N=y[E],C=Os(N,4),I=d.sampleCount;d.sampleCount+=C;const D=N[3]&1,U=N[3]&4,G=N[2]&1,q=N[2]&2,J=N[2]&4,de=N[2]&8;let xe=8,we=C;for(D&&(xe+=4),U&&C&&(!(N[xe+1]&1)&&d.keyFrameIndex===void 0&&(d.keyFrameIndex=I),xe+=4,G?(_=Os(N,xe),xe+=4):_=g,q&&(xe+=4),de&&(xe+=4),x+=_,w+=_,we--);we--;)G?(_=Os(N,xe),xe+=4):_=g,q&&(xe+=4),J&&(N[xe+1]&1||d.keyFrameIndex===void 0&&(d.keyFrameIndex=d.sampleCount-(we+1),d.keyFrameStart=x),xe+=4),de&&(xe+=4),x+=_,w+=_;!w&&g&&(w+=g*C)}d.duration+=w}if(!Object.keys(n).some(a=>n[a].duration)){let a=1/0,o=0;const c=ga(t,["sidx"]);for(let u=0;u<c.length;u++){const l=A7e(c[u]);if(l!=null&&l.references){a=Math.min(a,l.earliestPresentationTime/l.timescale);const d=l.references.reduce((f,m)=>f+m.info.duration||0,0);o=Math.max(o,d+l.earliestPresentationTime/l.timescale)}}o&&Xn(o)&&Object.keys(n).forEach(u=>{n[u].duration||(n[u].duration=o*n[u].timescale-n[u].start)})}return n}function b7e(t){const e={valid:null,remainder:null},r=ga(t,["moof"]);if(r.length<2)return e.remainder=t,e;const n=r[r.length-1];return e.valid=t.slice(0,n.byteOffset-8),e.remainder=t.slice(n.byteOffset-8),e}function am(t,e){const r=new Uint8Array(t.length+e.length);return r.set(t),r.set(e,t.length),r}function SK(t,e){const r=[],n=e.samples,i=e.timescale,a=e.id;let o=!1;return ga(n,["moof"]).map(u=>{const l=u.byteOffset-8;ga(u,["traf"]).map(f=>{const m=ga(f,["tfdt"]).map(p=>{const g=p[0];let y=Os(p,4);return g===1&&(y*=Math.pow(2,32),y+=Os(p,8)),y/i})[0];return m!==void 0&&(t=m),ga(f,["tfhd"]).map(p=>{const g=Os(p,4),y=Os(p,0)&16777215,x=(y&1)!==0,w=(y&2)!==0,_=(y&8)!==0;let E=0;const N=(y&16)!==0;let C=0;const I=(y&32)!==0;let D=8;g===a&&(x&&(D+=8),w&&(D+=4),_&&(E=Os(p,D),D+=4),N&&(C=Os(p,D),D+=4),I&&(D+=4),e.type==="video"&&(o=G5(e.codec)),ga(f,["trun"]).map(U=>{const G=U[0],q=Os(U,0)&16777215,J=(q&1)!==0;let de=0;const xe=(q&4)!==0,we=(q&256)!==0;let ve=0;const ne=(q&512)!==0;let ae=0;const oe=(q&1024)!==0,Ie=(q&2048)!==0;let Ce=0;const be=Os(U,4);let ue=8;J&&(de=Os(U,ue),ue+=4),xe&&(ue+=4);let Pe=de+l;for(let Re=0;Re<be;Re++){if(we?(ve=Os(U,ue),ue+=4):ve=E,ne?(ae=Os(U,ue),ue+=4):ae=C,oe&&(ue+=4),Ie&&(G===0?Ce=Os(U,ue):Ce=hie(U,ue),ue+=4),e.type===cl.VIDEO){let He=0;for(;He<ae;){const Fe=Os(n,Pe);if(Pe+=4,w7e(o,n[Pe])){const ft=n.subarray(Pe,Pe+Fe);CF(ft,o?2:1,t+Ce/i,r)}Pe+=Fe,He+=Fe+4}}t+=ve/i}}))})})}),r}function G5(t){if(!t)return!1;const e=t.substring(0,4);return e==="hvc1"||e==="hev1"||e==="dvh1"||e==="dvhe"}function w7e(t,e){if(t){const r=e>>1&63;return r===39||r===40}else return(e&31)===6}function CF(t,e,r,n){const i=pie(t);let a=0;a+=e;let o=0,c=0,u=0;for(;a<i.length;){o=0;do{if(a>=i.length)break;u=i[a++],o+=u}while(u===255);c=0;do{if(a>=i.length)break;u=i[a++],c+=u}while(u===255);const l=i.length-a;let d=a;if(c<l)a+=c;else if(c>l){Ho.error(`Malformed SEI payload. ${c} is too small, only ${l} bytes left to parse.`);break}if(o===4){if(i[d++]===181){const m=die(i,d);if(d+=2,m===49){const p=Os(i,d);if(d+=4,p===1195456820){const g=i[d++];if(g===3){const y=i[d++],x=31&y,w=64&y,_=w?2+x*3:0,E=new Uint8Array(_);if(w){E[0]=y;for(let N=1;N<_;N++)E[N]=i[d++]}n.push({type:g,payloadType:o,pts:r,bytes:E})}}}}}else if(o===5&&c>16){const f=[];for(let g=0;g<16;g++){const y=i[d++].toString(16);f.push(y.length==1?"0"+y:y),(g===3||g===5||g===7||g===9)&&f.push("-")}const m=c-16,p=new Uint8Array(m);for(let g=0;g<m;g++)p[g]=i[d++];n.push({payloadType:o,pts:r,uuid:f.join(""),userData:Ef(p),userDataBytes:p})}}}function pie(t){const e=t.byteLength,r=[];let n=1;for(;n<e-2;)t[n]===0&&t[n+1]===0&&t[n+2]===3?(r.push(n+2),n+=2):n++;if(r.length===0)return t;const i=e-r.length,a=new Uint8Array(i);let o=0;for(n=0;n<i;o++,n++)o===r[0]&&(o++,r.shift()),a[n]=t[o];return a}function _7e(t){const e=t[0];let r="",n="",i=0,a=0,o=0,c=0,u=0,l=0;if(e===0){for(;Mu(t.subarray(l,l+1))!=="\0";)r+=Mu(t.subarray(l,l+1)),l+=1;for(r+=Mu(t.subarray(l,l+1)),l+=1;Mu(t.subarray(l,l+1))!=="\0";)n+=Mu(t.subarray(l,l+1)),l+=1;n+=Mu(t.subarray(l,l+1)),l+=1,i=Os(t,12),a=Os(t,16),c=Os(t,20),u=Os(t,24),l=28}else if(e===1){l+=4,i=Os(t,l),l+=4;const f=Os(t,l);l+=4;const m=Os(t,l);for(l+=4,o=2**32*f+m,J8e(o)||(o=Number.MAX_SAFE_INTEGER,Ho.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),c=Os(t,l),l+=4,u=Os(t,l),l+=4;Mu(t.subarray(l,l+1))!=="\0";)r+=Mu(t.subarray(l,l+1)),l+=1;for(r+=Mu(t.subarray(l,l+1)),l+=1;Mu(t.subarray(l,l+1))!=="\0";)n+=Mu(t.subarray(l,l+1)),l+=1;n+=Mu(t.subarray(l,l+1)),l+=1}const d=t.subarray(l,t.byteLength);return{schemeIdUri:r,value:n,timeScale:i,presentationTime:o,presentationTimeDelta:a,eventDuration:c,id:u,payload:d}}function E7e(t,...e){const r=e.length;let n=8,i=r;for(;i--;)n+=e[i].byteLength;const a=new Uint8Array(n);for(a[0]=n>>24&255,a[1]=n>>16&255,a[2]=n>>8&255,a[3]=n&255,a.set(t,4),i=0,n=8;i<r;i++)a.set(e[i],n),n+=e[i].byteLength;return a}function S7e(t,e,r){if(t.byteLength!==16)throw new RangeError("Invalid system id");let n,i;n=0,i=new Uint8Array;let a;n>0?(a=new Uint8Array(4),e.length>0&&new DataView(a.buffer).setUint32(0,e.length,!1)):a=new Uint8Array;const o=new Uint8Array(4);return r.byteLength>0&&new DataView(o.buffer).setUint32(0,r.byteLength,!1),E7e([112,115,115,104],new Uint8Array([n,0,0,0]),t,a,i,o,r)}function j7e(t){const e=[];if(t instanceof ArrayBuffer){const r=t.byteLength;let n=0;for(;n+32<r;){const i=new DataView(t,n),a=T7e(i);e.push(a),n+=a.size}}return e}function T7e(t){const e=t.getUint32(0),r=t.byteOffset,n=t.byteLength;if(n<e)return{offset:r,size:n};if(t.getUint32(4)!==1886614376)return{offset:r,size:e};const a=t.getUint32(8)>>>24;if(a!==0&&a!==1)return{offset:r,size:e};const o=t.buffer,c=$d(new Uint8Array(o,r+12,16));let u=null,l=null,d=0;if(a===0)d=28;else{const m=t.getUint32(28);if(!m||n<32+m*16)return{offset:r,size:e};u=[];for(let p=0;p<m;p++)u.push(new Uint8Array(o,r+32+p*16,16));d=32+m*16}if(!d)return{offset:r,size:e};const f=t.getUint32(d);return e-32<f?{offset:r,size:e}:(l=new Uint8Array(o,r+d+4,f),{version:a,systemId:c,kids:u,data:l,offset:r,size:e})}const gie=()=>/\(Windows.+Firefox\//i.test(navigator.userAgent),r1={audio:{a3ds:1,"ac-3":.95,"ac-4":1,alac:.9,alaw:1,dra1:1,"dts+":1,"dts-":1,dtsc:1,dtse:1,dtsh:1,"ec-3":.9,enca:1,fLaC:.9,flac:.9,FLAC:.9,g719:1,g726:1,m4ae:1,mha1:1,mha2:1,mhm1:1,mhm2:1,mlpa:1,mp4a:1,"raw ":1,Opus:1,opus:1,samr:1,sawb:1,sawp:1,sevc:1,sqcp:1,ssmv:1,twos:1,ulaw:1},video:{avc1:1,avc2:1,avc3:1,avc4:1,avcp:1,av01:.8,dav1:.8,drac:1,dva1:1,dvav:1,dvh1:.7,dvhe:.7,encv:1,hev1:.75,hvc1:.75,mjp2:1,mp4v:1,mvc1:1,mvc2:1,mvc3:1,mvc4:1,resv:1,rv60:1,s263:1,svc1:1,svc2:1,"vc-1":1,vp08:1,vp09:.9},text:{stpp:1,wvtt:1}};function NF(t,e){const r=r1[e];return!!r&&!!r[t.slice(0,4)]}function c_(t,e,r=!0){return!t.split(",").some(n=>!kF(n,e,r))}function kF(t,e,r=!0){var n;const i=G0(r);return(n=i?.isTypeSupported(u_(t,e)))!=null?n:!1}function u_(t,e){return`${e}/mp4;codecs=${t}`}function jK(t){if(t){const e=t.substring(0,4);return r1.video[e]}return 2}function tN(t){const e=gie();return t.split(",").reduce((r,n)=>{const a=e&&G5(n)?9:r1.video[n];return a?(a*2+r)/(r?3:2):(r1.audio[n]+r)/(r?2:1)},0)}const LI={};function C7e(t,e=!0){if(LI[t])return LI[t];const r={flac:["flac","fLaC","FLAC"],opus:["opus","Opus"],"mp4a.40.34":["mp3"]}[t];for(let i=0;i<r.length;i++){var n;if(kF(r[i],"audio",e))return LI[t]=r[i],r[i];if(r[i]==="mp3"&&(n=G0(e))!=null&&n.isTypeSupported("audio/mpeg"))return""}return t}const N7e=/flac|opus|mp4a\.40\.34/i;function rN(t,e=!0){return t.replace(N7e,r=>C7e(r.toLowerCase(),e))}function k7e(t,e){const r=[];if(t){const n=t.split(",");for(let i=0;i<n.length;i++)NF(n[i],"video")||r.push(n[i])}return e&&r.push(e),r.join(",")}function fj(t,e){if(t&&(t.length>4||["ac-3","ec-3","alac","fLaC","Opus"].indexOf(t)!==-1)&&(TK(t,"audio")||TK(t,"video")))return t;if(e){const r=e.split(",");if(r.length>1){if(t){for(let n=r.length;n--;)if(r[n].substring(0,4)===t.substring(0,4))return r[n]}return r[0]}}return e||t}function TK(t,e){return NF(t,e)&&kF(t,e)}function L7e(t){const e=t.split(",");for(let r=0;r<e.length;r++){const n=e[r].split(".");n.length>2&&n[0]==="avc1"&&(e[r]=`avc1.${parseInt(n[1]).toString(16)}${("000"+parseInt(n[2]).toString(16)).slice(-4)}`)}return e.join(",")}function I7e(t){if(t.startsWith("av01.")){const e=t.split("."),r=["0","111","01","01","01","0"];for(let n=e.length;n>4&&n<10;n++)e[n]=r[n-4];return e.join(".")}return t}function CK(t){const e=G0(t)||{isTypeSupported:()=>!1};return{mpeg:e.isTypeSupported("audio/mpeg"),mp3:e.isTypeSupported('audio/mp4; codecs="mp3"'),ac3:e.isTypeSupported('audio/mp4; codecs="ac-3"')}}function gO(t){return t.replace(/^.+codecs=["']?([^"']+).*$/,"$1")}const B7e={supported:!0,powerEfficient:!0,smooth:!0},P7e={supported:!1,smooth:!1,powerEfficient:!1},vie={supported:!0,configurations:[],decodingInfoResults:[B7e]};function yie(t,e){return{supported:!1,configurations:e,decodingInfoResults:[P7e],error:t}}function O7e(t,e,r,n,i,a){const o=t.videoCodec,c=t.audioCodec?t.audioGroups:null,u=a?.audioCodec,l=a?.channels,d=l?parseInt(l):u?1/0:2;let f=null;if(c!=null&&c.length)try{c.length===1&&c[0]?f=e.groups[c[0]].channels:f=c.reduce((m,p)=>{if(p){const g=e.groups[p];if(!g)throw new Error(`Audio track group ${p} not found`);Object.keys(g.channels).forEach(y=>{m[y]=(m[y]||0)+g.channels[y]})}return m},{2:0})}catch{return!0}return o!==void 0&&(o.split(",").some(m=>G5(m))||t.width>1920&&t.height>1088||t.height>1920&&t.width>1088||t.frameRate>Math.max(n,30)||t.videoRange!=="SDR"&&t.videoRange!==r||t.bitrate>Math.max(i,8e6))||!!f&&Xn(d)&&Object.keys(f).some(m=>parseInt(m)>d)}function xie(t,e,r,n={}){const i=t.videoCodec;if(!i&&!t.audioCodec||!r)return Promise.resolve(vie);const a=[],o=R7e(t),c=o.length,u=D7e(t,e,c>0),l=u.length;for(let d=c||1*l||1;d--;){const f={type:"media-source"};if(c&&(f.video=o[d%c]),l){f.audio=u[d%l];const m=f.audio.bitrate;f.video&&m&&(f.video.bitrate-=m)}a.push(f)}if(i){const d=navigator.userAgent;if(i.split(",").some(f=>G5(f))&&gie())return Promise.resolve(yie(new Error(`Overriding Windows Firefox HEVC MediaCapabilities result based on user-agent string: (${d})`),a))}return Promise.all(a.map(d=>{const f=F7e(d);return n[f]||(n[f]=r.decodingInfo(d))})).then(d=>({supported:!d.some(f=>!f.supported),configurations:a,decodingInfoResults:d})).catch(d=>({supported:!1,configurations:a,decodingInfoResults:[],error:d}))}function R7e(t){var e;const r=(e=t.videoCodec)==null?void 0:e.split(","),n=bie(t),i=t.width||640,a=t.height||480,o=t.frameRate||30,c=t.videoRange.toLowerCase();return r?r.map(u=>{const l={contentType:u_(I7e(u),"video"),width:i,height:a,bitrate:n,framerate:o};return c!=="sdr"&&(l.transferFunction=c),l}):[]}function D7e(t,e,r){var n;const i=(n=t.audioCodec)==null?void 0:n.split(","),a=bie(t);return i&&t.audioGroups?t.audioGroups.reduce((o,c)=>{var u;const l=c?(u=e.groups[c])==null?void 0:u.tracks:null;return l?l.reduce((d,f)=>{if(f.groupId===c){const m=parseFloat(f.channels||"");i.forEach(p=>{const g={contentType:u_(p,"audio"),bitrate:r?M7e(p,a):a};m&&(g.channels=""+m),d.push(g)})}return d},o):o},[]):[]}function M7e(t,e){if(e<=1)return 1;let r=128e3;return t==="ec-3"?r=768e3:t==="ac-3"&&(r=64e4),Math.min(e/2,r)}function bie(t){return Math.ceil(Math.max(t.bitrate*.9,t.averageBitrate)/1e3)*1e3||1}function F7e(t){let e="";const{audio:r,video:n}=t;if(n){const i=gO(n.contentType);e+=`${i}_r${n.height}x${n.width}f${Math.ceil(n.framerate)}${n.transferFunction||"sd"}_${Math.ceil(n.bitrate/1e5)}`}if(r){const i=gO(r.contentType);e+=`${n?"_":""}${i}_c${r.channels}`}return e}const vO=["NONE","TYPE-0","TYPE-1",null];function U7e(t){return vO.indexOf(t)>-1}const nN=["SDR","PQ","HLG"];function $7e(t){return!!t&&nN.indexOf(t)>-1}var mj={No:"",Yes:"YES",v2:"v2"};function NK(t){const{canSkipUntil:e,canSkipDateRanges:r,age:n}=t,i=n<e/2;return e&&i?r?mj.v2:mj.Yes:mj.No}class kK{constructor(e,r,n){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=r,this.skip=n}addDirectives(e){const r=new self.URL(e);return this.msn!==void 0&&r.searchParams.set("_HLS_msn",this.msn.toString()),this.part!==void 0&&r.searchParams.set("_HLS_part",this.part.toString()),this.skip&&r.searchParams.set("_HLS_skip",this.skip),r.href}}class d_{constructor(e){if(this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.url=void 0,this.frameRate=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.supplemental=void 0,this.videoCodec=void 0,this.width=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.supportedPromise=void 0,this.supportedResult=void 0,this._avgBitrate=0,this._audioGroups=void 0,this._subtitleGroups=void 0,this._urlId=0,this.url=[e.url],this._attrs=[e.attrs],this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.frameRate=e.attrs.optionalFloat("FRAME-RATE",0),this._avgBitrate=e.attrs.decimalInteger("AVERAGE-BANDWIDTH"),this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.codecSet=[e.videoCodec,e.audioCodec].filter(n=>!!n).map(n=>n.substring(0,4)).join(","),"supplemental"in e){var r;this.supplemental=e.supplemental;const n=(r=e.supplemental)==null?void 0:r.videoCodec;n&&n!==e.videoCodec&&(this.codecSet+=`,${n.substring(0,4)}`)}this.addGroupId("audio",e.attrs.AUDIO),this.addGroupId("text",e.attrs.SUBTITLES)}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get averageBitrate(){return this._avgBitrate||this.realBitrate||this.bitrate}get attrs(){return this._attrs[0]}get codecs(){return this.attrs.CODECS||""}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get videoRange(){return this.attrs["VIDEO-RANGE"]||"SDR"}get score(){return this.attrs.optionalFloat("SCORE",0)}get uri(){return this.url[0]||""}hasAudioGroup(e){return LK(this._audioGroups,e)}hasSubtitleGroup(e){return LK(this._subtitleGroups,e)}get audioGroups(){return this._audioGroups}get subtitleGroups(){return this._subtitleGroups}addGroupId(e,r){if(r){if(e==="audio"){let n=this._audioGroups;n||(n=this._audioGroups=[]),n.indexOf(r)===-1&&n.push(r)}else if(e==="text"){let n=this._subtitleGroups;n||(n=this._subtitleGroups=[]),n.indexOf(r)===-1&&n.push(r)}}}get urlId(){return 0}set urlId(e){}get audioGroupIds(){return this.audioGroups?[this.audioGroupId]:void 0}get textGroupIds(){return this.subtitleGroups?[this.textGroupId]:void 0}get audioGroupId(){var e;return(e=this.audioGroups)==null?void 0:e[0]}get textGroupId(){var e;return(e=this.subtitleGroups)==null?void 0:e[0]}addFallback(){}}function LK(t,e){return!e||!t?!1:t.indexOf(e)!==-1}function H7e(){if(typeof matchMedia=="function"){const t=matchMedia("(dynamic-range: high)"),e=matchMedia("bad query");if(t.media!==e.media)return t.matches===!0}return!1}function Q7e(t,e){let r=!1,n=[];if(t&&(r=t!=="SDR",n=[t]),e){n=e.allowedVideoRanges||nN.slice(0);const i=n.join("")!=="SDR"&&!e.videoCodec;r=e.preferHDR!==void 0?e.preferHDR:i&&H7e(),r||(n=["SDR"])}return{preferHDR:r,allowedVideoRanges:n}}const z7e=t=>{const e=new WeakSet;return(r,n)=>{if(t&&(n=t(r,n)),typeof n=="object"&&n!==null){if(e.has(n))return;e.add(n)}return n}},fl=(t,e)=>JSON.stringify(t,z7e(e));function V7e(t,e,r,n,i){const a=Object.keys(t),o=n?.channels,c=n?.audioCodec,u=i?.videoCodec,l=o&&parseInt(o)===2;let d=!1,f=!1,m=1/0,p=1/0,g=1/0,y=1/0,x=0,w=[];const{preferHDR:_,allowedVideoRanges:E}=Q7e(e,i);for(let U=a.length;U--;){const G=t[a[U]];d||(d=G.channels[2]>0),m=Math.min(m,G.minHeight),p=Math.min(p,G.minFramerate),g=Math.min(g,G.minBitrate),E.filter(J=>G.videoRanges[J]>0).length>0&&(f=!0)}m=Xn(m)?m:0,p=Xn(p)?p:0;const N=Math.max(1080,m),C=Math.max(30,p);g=Xn(g)?g:r,r=Math.max(g,r),f||(e=void 0);const I=a.length>1;return{codecSet:a.reduce((U,G)=>{const q=t[G];if(G===U)return U;if(w=f?E.filter(J=>q.videoRanges[J]>0):[],I){if(q.minBitrate>r)return fA(G,`min bitrate of ${q.minBitrate} > current estimate of ${r}`),U;if(!q.hasDefaultAudio)return fA(G,"no renditions with default or auto-select sound found"),U;if(c&&G.indexOf(c.substring(0,4))%5!==0)return fA(G,`audio codec preference "${c}" not found`),U;if(o&&!l){if(!q.channels[o])return fA(G,`no renditions with ${o} channel sound found (channels options: ${Object.keys(q.channels)})`),U}else if((!c||l)&&d&&q.channels[2]===0)return fA(G,"no renditions with stereo sound found"),U;if(q.minHeight>N)return fA(G,`min resolution of ${q.minHeight} > maximum of ${N}`),U;if(q.minFramerate>C)return fA(G,`min framerate of ${q.minFramerate} > maximum of ${C}`),U;if(!w.some(J=>q.videoRanges[J]>0))return fA(G,`no variants with VIDEO-RANGE of ${fl(w)} found`),U;if(u&&G.indexOf(u.substring(0,4))%5!==0)return fA(G,`video codec preference "${u}" not found`),U;if(q.maxScore<x)return fA(G,`max score of ${q.maxScore} < selected max of ${x}`),U}return U&&(tN(G)>=tN(U)||q.fragmentError>t[U].fragmentError)?U:(y=q.minIndex,x=q.maxScore,G)},void 0),videoRanges:w,preferHDR:_,minFramerate:p,minBitrate:g,minIndex:y}}function fA(t,e){Ho.log(`[abr] start candidates with "${t}" ignored because ${e}`)}function wie(t){return t.reduce((e,r)=>{let n=e.groups[r.groupId];n||(n=e.groups[r.groupId]={tracks:[],channels:{2:0},hasDefault:!1,hasAutoSelect:!1}),n.tracks.push(r);const i=r.channels||"2";return n.channels[i]=(n.channels[i]||0)+1,n.hasDefault=n.hasDefault||r.default,n.hasAutoSelect=n.hasAutoSelect||r.autoselect,n.hasDefault&&(e.hasDefaultAudio=!0),n.hasAutoSelect&&(e.hasAutoSelectAudio=!0),e},{hasDefaultAudio:!1,hasAutoSelectAudio:!1,groups:{}})}function K7e(t,e,r,n){return t.slice(r,n+1).reduce((i,a,o)=>{if(!a.codecSet)return i;const c=a.audioGroups;let u=i[a.codecSet];u||(i[a.codecSet]=u={minBitrate:1/0,minHeight:1/0,minFramerate:1/0,minIndex:o,maxScore:0,videoRanges:{SDR:0},channels:{2:0},hasDefaultAudio:!c,fragmentError:0}),u.minBitrate=Math.min(u.minBitrate,a.bitrate);const l=Math.min(a.height,a.width);return u.minHeight=Math.min(u.minHeight,l),u.minFramerate=Math.min(u.minFramerate,a.frameRate),u.minIndex=Math.min(u.minIndex,o),u.maxScore=Math.max(u.maxScore,a.score),u.fragmentError+=a.fragmentError,u.videoRanges[a.videoRange]=(u.videoRanges[a.videoRange]||0)+1,c&&c.forEach(d=>{if(!d)return;const f=e.groups[d];f&&(u.hasDefaultAudio=u.hasDefaultAudio||e.hasDefaultAudio?f.hasDefault:f.hasAutoSelect||!e.hasDefaultAudio&&!e.hasAutoSelectAudio,Object.keys(f.channels).forEach(m=>{u.channels[m]=(u.channels[m]||0)+f.channels[m]}))}),i},{})}function IK(t){if(!t)return t;const{lang:e,assocLang:r,characteristics:n,channels:i,audioCodec:a}=t;return{lang:e,assocLang:r,characteristics:n,channels:i,audioCodec:a}}function MA(t,e,r){if("attrs"in t){const n=e.indexOf(t);if(n!==-1)return n}for(let n=0;n<e.length;n++){const i=e[n];if(ay(t,i,r))return n}return-1}function ay(t,e,r){const{groupId:n,name:i,lang:a,assocLang:o,default:c}=t,u=t.forced;return(n===void 0||e.groupId===n)&&(i===void 0||e.name===i)&&(a===void 0||G7e(a,e.lang))&&(a===void 0||e.assocLang===o)&&(c===void 0||e.default===c)&&(u===void 0||e.forced===u)&&(!("characteristics"in t)||W7e(t.characteristics||"",e.characteristics))&&(r===void 0||r(t,e))}function G7e(t,e="--"){return t.length===e.length?t===e:t.startsWith(e)||e.startsWith(t)}function W7e(t,e=""){const r=t.split(","),n=e.split(",");return r.length===n.length&&!r.some(i=>n.indexOf(i)===-1)}function Nv(t,e){const{audioCodec:r,channels:n}=t;return(r===void 0||(e.audioCodec||"").substring(0,4)===r.substring(0,4))&&(n===void 0||n===(e.channels||"2"))}function Y7e(t,e,r,n,i){const a=e[n],c=e.reduce((m,p,g)=>{const y=p.uri;return(m[y]||(m[y]=[])).push(g),m},{})[a.uri];c.length>1&&(n=Math.max.apply(Math,c));const u=a.videoRange,l=a.frameRate,d=a.codecSet.substring(0,4),f=BK(e,n,m=>{if(m.videoRange!==u||m.frameRate!==l||m.codecSet.substring(0,4)!==d)return!1;const p=m.audioGroups,g=r.filter(y=>!p||p.indexOf(y.groupId)!==-1);return MA(t,g,i)>-1});return f>-1?f:BK(e,n,m=>{const p=m.audioGroups,g=r.filter(y=>!p||p.indexOf(y.groupId)!==-1);return MA(t,g,i)>-1})}function BK(t,e,r){for(let n=e;n>-1;n--)if(r(t[n]))return n;for(let n=e+1;n<t.length;n++)if(r(t[n]))return n;return-1}function iN(t,e){var r;return!!t&&t!==((r=e.loadLevelObj)==null?void 0:r.uri)}class q7e extends um{constructor(e){super("abr",e.logger),this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=-1,this.firstSelection=-1,this._nextAutoLevel=-1,this.nextAutoLevelKey="",this.audioTracksByGroup=null,this.codecTiers=null,this.timer=-1,this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.rebufferNotice=-1,this.supportedCache={},this.bwEstimator=void 0,this._abandonRulesCheck=r=>{var n;const{fragCurrent:i,partCurrent:a,hls:o}=this,{autoLevelEnabled:c,media:u}=o;if(!i||!u)return;const l=performance.now(),d=a?a.stats:i.stats,f=a?a.duration:i.duration,m=l-d.loading.start,p=o.minAutoLevel,g=i.level,y=this._nextAutoLevel;if(d.aborted||d.loaded&&d.loaded===d.total||g<=p){this.clearTimer(),this._nextAutoLevel=-1;return}if(!c)return;const x=y>-1&&y!==g,w=!!r||x;if(!w&&(u.paused||!u.playbackRate||!u.readyState))return;const _=o.mainForwardBufferInfo;if(!w&&_===null)return;const E=this.bwEstimator.getEstimateTTFB(),N=Math.abs(u.playbackRate);if(m<=Math.max(E,1e3*(f/(N*2))))return;const C=_?_.len/N:0,I=d.loading.first?d.loading.first-d.loading.start:-1,D=d.loaded&&I>-1,U=this.getBwEstimate(),G=o.levels,q=G[g],J=Math.max(d.loaded,Math.round(f*(i.bitrate||q.averageBitrate)/8));let de=D?m-I:m;de<1&&D&&(de=Math.min(m,d.loaded*8/U));const xe=D?d.loaded*1e3/de:0,we=E/1e3,ve=xe?(J-d.loaded)/xe:J*8/U+we;if(ve<=C)return;const ne=xe?xe*8:U,ae=((n=r?.details||this.hls.latestLevelDetails)==null?void 0:n.live)===!0,oe=this.hls.config.abrBandWidthUpFactor;let Ie=Number.POSITIVE_INFINITY,Ce;for(Ce=g-1;Ce>p;Ce--){const Re=G[Ce].maxBitrate,He=!G[Ce].details||ae;if(Ie=this.getTimeToLoadFrag(we,ne,f*Re,He),Ie<Math.min(C,f+we))break}if(Ie>=ve||Ie>f*10)return;D?this.bwEstimator.sample(m-Math.min(E,I),d.loaded):this.bwEstimator.sampleTTFB(m);const be=G[Ce].maxBitrate;this.getBwEstimate()*oe>be&&this.resetEstimator(be);const ue=this.findBestLevel(be,p,Ce,0,C,1,1);ue>-1&&(Ce=ue),this.warn(`Fragment ${i.sn}${a?" part "+a.index:""} of level ${g} is loading too slowly;
      Fragment duration: ${i.duration.toFixed(3)}
      Time to underbuffer: ${C.toFixed(3)} s
      Estimated load time for current fragment: ${ve.toFixed(3)} s
      Estimated load time for down switch fragment: ${Ie.toFixed(3)} s
      TTFB estimate: ${I|0} ms
      Current BW estimate: ${Xn(U)?U|0:"Unknown"} bps
      New BW estimate: ${this.getBwEstimate()|0} bps
      Switching to level ${Ce} @ ${be|0} bps`),o.nextLoadLevel=o.nextAutoLevel=Ce,this.clearTimer();const Pe=()=>{if(this.clearTimer(),this.fragCurrent===i&&this.hls.loadLevel===Ce&&Ce>0){const Re=this.getStarvationDelay();if(this.warn(`Aborting inflight request ${Ce>0?"and switching down":""}
      Fragment duration: ${i.duration.toFixed(3)} s
      Time to underbuffer: ${Re.toFixed(3)} s`),i.abortRequests(),this.fragCurrent=this.partCurrent=null,Ce>p){let He=this.findBestLevel(this.hls.levels[p].bitrate,p,Ce,0,Re,1,1);He===-1&&(He=p),this.hls.nextLoadLevel=this.hls.nextAutoLevel=He,this.resetEstimator(this.hls.levels[He].bitrate)}}};x||ve>Ie*2?Pe():this.timer=self.setInterval(Pe,Ie*1e3),o.trigger(Be.FRAG_LOAD_EMERGENCY_ABORTED,{frag:i,part:a,stats:d})},this.hls=e,this.bwEstimator=this.initEstimator(),this.registerListeners()}resetEstimator(e){e&&(this.log(`setting initial bwe to ${e}`),this.hls.config.abrEwmaDefaultEstimate=e),this.firstSelection=-1,this.bwEstimator=this.initEstimator()}initEstimator(){const e=this.hls.config;return new t7e(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate)}registerListeners(){const{hls:e}=this;e.on(Be.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Be.FRAG_LOADING,this.onFragLoading,this),e.on(Be.FRAG_LOADED,this.onFragLoaded,this),e.on(Be.FRAG_BUFFERED,this.onFragBuffered,this),e.on(Be.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(Be.LEVEL_LOADED,this.onLevelLoaded,this),e.on(Be.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(Be.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.on(Be.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e&&(e.off(Be.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Be.FRAG_LOADING,this.onFragLoading,this),e.off(Be.FRAG_LOADED,this.onFragLoaded,this),e.off(Be.FRAG_BUFFERED,this.onFragBuffered,this),e.off(Be.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(Be.LEVEL_LOADED,this.onLevelLoaded,this),e.off(Be.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(Be.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.off(Be.ERROR,this.onError,this))}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this._abandonRulesCheck=this.supportedCache=null,this.fragCurrent=this.partCurrent=null}onManifestLoading(e,r){this.lastLoadedFragLevel=-1,this.firstSelection=-1,this.lastLevelLoadSec=0,this.supportedCache={},this.fragCurrent=this.partCurrent=null,this.onLevelsUpdated(),this.clearTimer()}onLevelsUpdated(){this.lastLoadedFragLevel>-1&&this.fragCurrent&&(this.lastLoadedFragLevel=this.fragCurrent.level),this._nextAutoLevel=-1,this.onMaxAutoLevelUpdated(),this.codecTiers=null,this.audioTracksByGroup=null}onMaxAutoLevelUpdated(){this.firstSelection=-1,this.nextAutoLevelKey=""}onFragLoading(e,r){const n=r.frag;if(!this.ignoreFragment(n)){if(!n.bitrateTest){var i;this.fragCurrent=n,this.partCurrent=(i=r.part)!=null?i:null}this.clearTimer(),this.timer=self.setInterval(this._abandonRulesCheck,100)}}onLevelSwitching(e,r){this.clearTimer()}onError(e,r){if(!r.fatal)switch(r.details){case br.BUFFER_ADD_CODEC_ERROR:case br.BUFFER_APPEND_ERROR:this.lastLoadedFragLevel=-1,this.firstSelection=-1;break;case br.FRAG_LOAD_TIMEOUT:{const n=r.frag,{fragCurrent:i,partCurrent:a}=this;if(n&&i&&n.sn===i.sn&&n.level===i.level){const o=performance.now(),c=a?a.stats:n.stats,u=o-c.loading.start,l=c.loading.first?c.loading.first-c.loading.start:-1;if(c.loaded&&l>-1){const f=this.bwEstimator.getEstimateTTFB();this.bwEstimator.sample(u-Math.min(f,l),c.loaded)}else this.bwEstimator.sampleTTFB(u)}break}}}getTimeToLoadFrag(e,r,n,i){const a=e+n/r,o=i?e+this.lastLevelLoadSec:0;return a+o}onLevelLoaded(e,r){const n=this.hls.config,{loading:i}=r.stats,a=i.end-i.first;Xn(a)&&(this.lastLevelLoadSec=a/1e3),r.details.live?this.bwEstimator.update(n.abrEwmaSlowLive,n.abrEwmaFastLive):this.bwEstimator.update(n.abrEwmaSlowVoD,n.abrEwmaFastVoD),this.timer>-1&&this._abandonRulesCheck(r.levelInfo)}onFragLoaded(e,{frag:r,part:n}){const i=n?n.stats:r.stats;if(r.type===fi.MAIN&&this.bwEstimator.sampleTTFB(i.loading.first-i.loading.start),!this.ignoreFragment(r)){if(this.clearTimer(),r.level===this._nextAutoLevel&&(this._nextAutoLevel=-1),this.firstSelection=-1,this.hls.config.abrMaxWithRealBitrate){const a=n?n.duration:r.duration,o=this.hls.levels[r.level],c=(o.loaded?o.loaded.bytes:0)+i.loaded,u=(o.loaded?o.loaded.duration:0)+a;o.loaded={bytes:c,duration:u},o.realBitrate=Math.round(8*c/u)}if(r.bitrateTest){const a={stats:i,frag:r,part:n,id:r.type};this.onFragBuffered(Be.FRAG_BUFFERED,a),r.bitrateTest=!1}else this.lastLoadedFragLevel=r.level}}onFragBuffered(e,r){const{frag:n,part:i}=r,a=i!=null&&i.stats.loaded?i.stats:n.stats;if(a.aborted||this.ignoreFragment(n))return;const o=a.parsing.end-a.loading.start-Math.min(a.loading.first-a.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(o,a.loaded),a.bwEstimate=this.getBwEstimate(),n.bitrateTest?this.bitrateTestDelay=o/1e3:this.bitrateTestDelay=0}ignoreFragment(e){return e.type!==fi.MAIN||e.sn==="initSegment"}clearTimer(){this.timer>-1&&(self.clearInterval(this.timer),this.timer=-1)}get firstAutoLevel(){const{maxAutoLevel:e,minAutoLevel:r}=this.hls,n=this.getBwEstimate(),i=this.hls.config.maxStarvationDelay,a=this.findBestLevel(n,r,e,0,i,1,1);if(a>-1)return a;const o=this.hls.firstLevel,c=Math.min(Math.max(o,r),e);return this.warn(`Could not find best starting auto level. Defaulting to first in playlist ${o} clamped to ${c}`),c}get forcedAutoLevel(){return this.nextAutoLevelKey?-1:this._nextAutoLevel}get nextAutoLevel(){const e=this.forcedAutoLevel,n=this.bwEstimator.canEstimate(),i=this.lastLoadedFragLevel>-1;if(e!==-1&&(!n||!i||this.nextAutoLevelKey===this.getAutoLevelKey()))return e;const a=n&&i?this.getNextABRAutoLevel():this.firstAutoLevel;if(e!==-1){const o=this.hls.levels;if(o.length>Math.max(e,a)&&o[e].loadError<=o[a].loadError)return e}return this._nextAutoLevel=a,this.nextAutoLevelKey=this.getAutoLevelKey(),a}getAutoLevelKey(){return`${this.getBwEstimate()}_${this.getStarvationDelay().toFixed(2)}`}getNextABRAutoLevel(){const{fragCurrent:e,partCurrent:r,hls:n}=this;if(n.levels.length<=1)return n.loadLevel;const{maxAutoLevel:i,config:a,minAutoLevel:o}=n,c=r?r.duration:e?e.duration:0,u=this.getBwEstimate(),l=this.getStarvationDelay();let d=a.abrBandWidthFactor,f=a.abrBandWidthUpFactor;if(l){const x=this.findBestLevel(u,o,i,l,0,d,f);if(x>=0)return this.rebufferNotice=-1,x}let m=c?Math.min(c,a.maxStarvationDelay):a.maxStarvationDelay;if(!l){const x=this.bitrateTestDelay;x&&(m=(c?Math.min(c,a.maxLoadingDelay):a.maxLoadingDelay)-x,this.info(`bitrate test took ${Math.round(1e3*x)}ms, set first fragment max fetchDuration to ${Math.round(1e3*m)} ms`),d=f=1)}const p=this.findBestLevel(u,o,i,l,m,d,f);if(this.rebufferNotice!==p&&(this.rebufferNotice=p,this.info(`${l?"rebuffering expected":"buffer is empty"}, optimal quality level ${p}`)),p>-1)return p;const g=n.levels[o],y=n.loadLevelObj;return y&&g?.bitrate<y.bitrate?o:n.loadLevel}getStarvationDelay(){const e=this.hls,r=e.media;if(!r)return 1/0;const n=r&&r.playbackRate!==0?Math.abs(r.playbackRate):1,i=e.mainForwardBufferInfo;return(i?i.len:0)/n}getBwEstimate(){return this.bwEstimator.canEstimate()?this.bwEstimator.getEstimate():this.hls.config.abrEwmaDefaultEstimate}findBestLevel(e,r,n,i,a,o,c){var u;const l=i+a,d=this.lastLoadedFragLevel,f=d===-1?this.hls.firstLevel:d,{fragCurrent:m,partCurrent:p}=this,{levels:g,allAudioTracks:y,loadLevel:x,config:w}=this.hls;if(g.length===1)return 0;const _=g[f],E=!!((u=this.hls.latestLevelDetails)!=null&&u.live),N=x===-1||d===-1;let C,I="SDR",D=_?.frameRate||0;const{audioPreference:U,videoPreference:G}=w,q=this.audioTracksByGroup||(this.audioTracksByGroup=wie(y));let J=-1;if(N){if(this.firstSelection!==-1)return this.firstSelection;const ne=this.codecTiers||(this.codecTiers=K7e(g,q,r,n)),ae=V7e(ne,I,e,U,G),{codecSet:oe,videoRanges:Ie,minFramerate:Ce,minBitrate:be,minIndex:ue,preferHDR:Pe}=ae;J=ue,C=oe,I=Pe?Ie[Ie.length-1]:Ie[0],D=Ce,e=Math.max(e,be),this.log(`picked start tier ${fl(ae)}`)}else C=_?.codecSet,I=_?.videoRange;const de=p?p.duration:m?m.duration:0,xe=this.bwEstimator.getEstimateTTFB()/1e3,we=[];for(let ne=n;ne>=r;ne--){var ve;const ae=g[ne],oe=ne>f;if(!ae)continue;if(w.useMediaCapabilities&&!ae.supportedResult&&!ae.supportedPromise){const He=navigator.mediaCapabilities;typeof He?.decodingInfo=="function"&&O7e(ae,q,I,D,e,U)?(ae.supportedPromise=xie(ae,q,He,this.supportedCache),ae.supportedPromise.then(Fe=>{if(!this.hls)return;ae.supportedResult=Fe;const ft=this.hls.levels,at=ft.indexOf(ae);Fe.error?this.warn(`MediaCapabilities decodingInfo error: "${Fe.error}" for level ${at} ${fl(Fe)}`):Fe.supported?Fe.decodingInfoResults.some(De=>De.smooth===!1||De.powerEfficient===!1)&&this.log(`MediaCapabilities decodingInfo for level ${at} not smooth or powerEfficient: ${fl(Fe)}`):(this.warn(`Unsupported MediaCapabilities decodingInfo result for level ${at} ${fl(Fe)}`),at>-1&&ft.length>1&&(this.log(`Removing unsupported level ${at}`),this.hls.removeLevel(at),this.hls.loadLevel===-1&&(this.hls.nextLoadLevel=0)))}).catch(Fe=>{this.warn(`Error handling MediaCapabilities decodingInfo: ${Fe}`)})):ae.supportedResult=vie}if((C&&ae.codecSet!==C||I&&ae.videoRange!==I||oe&&D>ae.frameRate||!oe&&D>0&&D<ae.frameRate||(ve=ae.supportedResult)!=null&&(ve=ve.decodingInfoResults)!=null&&ve.some(He=>He.smooth===!1))&&(!N||ne!==J)){we.push(ne);continue}const Ie=ae.details,Ce=(p?Ie?.partTarget:Ie?.averagetargetduration)||de;let be;oe?be=c*e:be=o*e;const ue=de&&i>=de*2&&a===0?ae.averageBitrate:ae.maxBitrate,Pe=this.getTimeToLoadFrag(xe,be,ue*Ce,Ie===void 0);if(be>=ue&&(ne===d||ae.loadError===0&&ae.fragmentError===0)&&(Pe<=xe||!Xn(Pe)||E&&!this.bitrateTestDelay||Pe<l)){const He=this.forcedAutoLevel;return ne!==x&&(He===-1||He!==x)&&(we.length&&this.trace(`Skipped level(s) ${we.join(",")} of ${n} max with CODECS and VIDEO-RANGE:"${g[we[0]].codecs}" ${g[we[0]].videoRange}; not compatible with "${C}" ${I}`),this.info(`switch candidate:${f}->${ne} adjustedbw(${Math.round(be)})-bitrate=${Math.round(be-ue)} ttfb:${xe.toFixed(1)} avgDuration:${Ce.toFixed(1)} maxFetchDuration:${l.toFixed(1)} fetchDuration:${Pe.toFixed(1)} firstSelection:${N} codecSet:${ae.codecSet} videoRange:${ae.videoRange} hls.loadLevel:${x}`)),N&&(this.firstSelection=ne),ne}}return-1}set nextAutoLevel(e){const r=this.deriveNextAutoLevel(e);this._nextAutoLevel!==r&&(this.nextAutoLevelKey="",this._nextAutoLevel=r)}deriveNextAutoLevel(e){const{maxAutoLevel:r,minAutoLevel:n}=this.hls;return Math.min(Math.max(e,n),r)}}const _ie={search:function(t,e){let r=0,n=t.length-1,i=null,a=null;for(;r<=n;){i=(r+n)/2|0,a=t[i];const o=e(a);if(o>0)r=i+1;else if(o<0)n=i-1;else return a}return null}};function X7e(t,e,r){if(e===null||!Array.isArray(t)||!t.length||!Xn(e))return null;const n=t[0].programDateTime;if(e<(n||0))return null;const i=t[t.length-1].endProgramDateTime;if(e>=(i||0))return null;for(let a=0;a<t.length;++a){const o=t[a];if(J7e(e,r,o))return o}return null}function Ty(t,e,r=0,n=0,i=.005){let a=null;if(t){a=e[1+t.sn-e[0].sn]||null;const c=t.endDTS-r;c>0&&c<15e-7&&(r+=15e-7),a&&t.level!==a.level&&a.end<=t.end&&(a=e[2+t.sn-e[0].sn]||null)}else r===0&&e[0].start===0&&(a=e[0]);if(a&&((!t||t.level===a.level)&&PK(r,n,a)===0||Z7e(a,t,Math.min(i,n))))return a;const o=_ie.search(e,PK.bind(null,r,n));return o&&(o!==t||!a)?o:a}function Z7e(t,e,r){if(e&&e.start===0&&e.level<t.level&&(e.endPTS||0)>0){const n=e.tagList.reduce((i,a)=>(a[0]==="INF"&&(i+=parseFloat(a[1])),i),r);return t.start<=n}return!1}function PK(t=0,e=0,r){if(r.start<=t&&r.start+r.duration>t)return 0;const n=Math.min(e,r.duration+(r.deltaPTS?r.deltaPTS:0));return r.start+r.duration-n<=t?1:r.start-n>t&&r.start?-1:0}function J7e(t,e,r){const n=Math.min(e,r.duration+(r.deltaPTS?r.deltaPTS:0))*1e3;return(r.endProgramDateTime||0)-n>t}function Eie(t,e,r){if(t&&t.startCC<=e&&t.endCC>=e){let n=t.fragments;const{fragmentHint:i}=t;i&&(n=n.concat(i));let a;return _ie.search(n,o=>o.cc<e?1:o.cc>e?-1:(a=o,o.end<=r?1:o.start>r?-1:0)),a||null}return null}function sN(t){switch(t.details){case br.FRAG_LOAD_TIMEOUT:case br.KEY_LOAD_TIMEOUT:case br.LEVEL_LOAD_TIMEOUT:case br.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function Sie(t){return t.details.startsWith("key")}function jie(t){return Sie(t)&&!!t.frag&&!t.frag.decryptdata}function OK(t,e){const r=sN(e);return t.default[`${r?"timeout":"error"}Retry`]}function LF(t,e){const r=t.backoff==="linear"?1:Math.pow(2,e);return Math.min(r*t.retryDelayMs,t.maxRetryDelayMs)}function RK(t){return Uo(Uo({},t),{errorRetry:null,timeoutRetry:null})}function aN(t,e,r,n){if(!t)return!1;const i=n?.code,a=e<t.maxNumRetry&&(e$e(i)||!!r);return t.shouldRetry?t.shouldRetry(t,e,r,n,a):a}function e$e(t){return yO(t)||!!t&&(t<400||t>499)}function yO(t){return t===0&&navigator.onLine===!1}var Ud={DoNothing:0,SendAlternateToPenaltyBox:2,RemoveAlternatePermanently:3,RetryRequest:5},hf={None:0,MoveAllAlternatesMatchingHost:1,MoveAllAlternatesMatchingHDCP:2,MoveAllAlternatesMatchingKey:4};class t$e extends um{constructor(e){super("error-controller",e.logger),this.hls=void 0,this.playlistError=0,this.hls=e,this.registerListeners()}registerListeners(){const e=this.hls;e.on(Be.ERROR,this.onError,this),e.on(Be.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Be.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){const e=this.hls;e&&(e.off(Be.ERROR,this.onError,this),e.off(Be.ERROR,this.onErrorOut,this),e.off(Be.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Be.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null}startLoad(e){}stopLoad(){this.playlistError=0}getVariantLevelIndex(e){return e?.type===fi.MAIN?e.level:this.getVariantIndex()}getVariantIndex(){var e;const r=this.hls,n=r.currentLevel;return(e=r.loadLevelObj)!=null&&e.details||n===-1?r.loadLevel:n}variantHasKey(e,r){if(e){var n;if((n=e.details)!=null&&n.hasKey(r))return!0;const i=e.audioGroups;if(i)return this.hls.allAudioTracks.filter(o=>i.indexOf(o.groupId)>=0).some(o=>{var c;return(c=o.details)==null?void 0:c.hasKey(r)})}return!1}onManifestLoading(){this.playlistError=0}onLevelUpdated(){this.playlistError=0}onError(e,r){var n;if(r.fatal)return;const i=this.hls,a=r.context;switch(r.details){case br.FRAG_LOAD_ERROR:case br.FRAG_LOAD_TIMEOUT:case br.KEY_LOAD_ERROR:case br.KEY_LOAD_TIMEOUT:r.errorAction=this.getFragRetryOrSwitchAction(r);return;case br.FRAG_PARSING_ERROR:if((n=r.frag)!=null&&n.gap){r.errorAction=Eb();return}case br.FRAG_GAP:case br.FRAG_DECRYPT_ERROR:{r.errorAction=this.getFragRetryOrSwitchAction(r),r.errorAction.action=Ud.SendAlternateToPenaltyBox;return}case br.LEVEL_EMPTY_ERROR:case br.LEVEL_PARSING_ERROR:{var o;const u=r.parent===fi.MAIN?r.level:i.loadLevel;r.details===br.LEVEL_EMPTY_ERROR&&((o=r.context)!=null&&(o=o.levelDetails)!=null&&o.live)?r.errorAction=this.getPlaylistRetryOrSwitchAction(r,u):(r.levelRetry=!1,r.errorAction=this.getLevelSwitchAction(r,u))}return;case br.LEVEL_LOAD_ERROR:case br.LEVEL_LOAD_TIMEOUT:typeof a?.level=="number"&&(r.errorAction=this.getPlaylistRetryOrSwitchAction(r,a.level));return;case br.AUDIO_TRACK_LOAD_ERROR:case br.AUDIO_TRACK_LOAD_TIMEOUT:case br.SUBTITLE_LOAD_ERROR:case br.SUBTITLE_TRACK_LOAD_TIMEOUT:if(a){const u=i.loadLevelObj;if(u&&(a.type===ba.AUDIO_TRACK&&u.hasAudioGroup(a.groupId)||a.type===ba.SUBTITLE_TRACK&&u.hasSubtitleGroup(a.groupId))){r.errorAction=this.getPlaylistRetryOrSwitchAction(r,i.loadLevel),r.errorAction.action=Ud.SendAlternateToPenaltyBox,r.errorAction.flags=hf.MoveAllAlternatesMatchingHost;return}}return;case br.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:r.errorAction={action:Ud.SendAlternateToPenaltyBox,flags:hf.MoveAllAlternatesMatchingHDCP};return;case br.KEY_SYSTEM_SESSION_UPDATE_FAILED:case br.KEY_SYSTEM_STATUS_INTERNAL_ERROR:case br.KEY_SYSTEM_NO_SESSION:r.errorAction={action:Ud.SendAlternateToPenaltyBox,flags:hf.MoveAllAlternatesMatchingKey};return;case br.BUFFER_ADD_CODEC_ERROR:case br.REMUX_ALLOC_ERROR:case br.BUFFER_APPEND_ERROR:if(!r.errorAction){var c;r.errorAction=this.getLevelSwitchAction(r,(c=r.level)!=null?c:i.loadLevel)}return;case br.INTERNAL_EXCEPTION:case br.BUFFER_APPENDING_ERROR:case br.BUFFER_FULL_ERROR:case br.LEVEL_SWITCH_ERROR:case br.BUFFER_STALLED_ERROR:case br.BUFFER_SEEK_OVER_HOLE:case br.BUFFER_NUDGE_ON_STALL:r.errorAction=Eb();return}r.type===Oi.KEY_SYSTEM_ERROR&&(r.levelRetry=!1,r.errorAction=Eb())}getPlaylistRetryOrSwitchAction(e,r){const n=this.hls,i=OK(n.config.playlistLoadPolicy,e),a=this.playlistError++;if(aN(i,a,sN(e),e.response))return{action:Ud.RetryRequest,flags:hf.None,retryConfig:i,retryCount:a};const c=this.getLevelSwitchAction(e,r);return i&&(c.retryConfig=i,c.retryCount=a),c}getFragRetryOrSwitchAction(e){const r=this.hls,n=this.getVariantLevelIndex(e.frag),i=r.levels[n],{fragLoadPolicy:a,keyLoadPolicy:o}=r.config,c=OK(Sie(e)?o:a,e),u=r.levels.reduce((d,f)=>d+f.fragmentError,0);if(i&&(e.details!==br.FRAG_GAP&&i.fragmentError++,!jie(e)&&aN(c,u,sN(e),e.response)))return{action:Ud.RetryRequest,flags:hf.None,retryConfig:c,retryCount:u};const l=this.getLevelSwitchAction(e,n);return c&&(l.retryConfig=c,l.retryCount=u),l}getLevelSwitchAction(e,r){const n=this.hls;r==null&&(r=n.loadLevel);const i=this.hls.levels[r];if(i){var a,o;const l=e.details;i.loadError++,l===br.BUFFER_APPEND_ERROR&&i.fragmentError++;let d=-1;const{levels:f,loadLevel:m,minAutoLevel:p,maxAutoLevel:g}=n;!n.autoLevelEnabled&&!n.config.preserveManualLevelOnError&&(n.loadLevel=-1);const y=(a=e.frag)==null?void 0:a.type,w=(y===fi.AUDIO&&l===br.FRAG_PARSING_ERROR||e.sourceBufferName==="audio"&&(l===br.BUFFER_ADD_CODEC_ERROR||l===br.BUFFER_APPEND_ERROR))&&f.some(({audioCodec:I})=>i.audioCodec!==I),E=e.sourceBufferName==="video"&&(l===br.BUFFER_ADD_CODEC_ERROR||l===br.BUFFER_APPEND_ERROR)&&f.some(({codecSet:I,audioCodec:D})=>i.codecSet!==I&&i.audioCodec===D),{type:N,groupId:C}=(o=e.context)!=null?o:{};for(let I=f.length;I--;){const D=(I+m)%f.length;if(D!==m&&D>=p&&D<=g&&f[D].loadError===0){var c,u;const U=f[D];if(l===br.FRAG_GAP&&y===fi.MAIN&&e.frag){const G=f[D].details;if(G){const q=Ty(e.frag,G.fragments,e.frag.start);if(q!=null&&q.gap)continue}}else{if(N===ba.AUDIO_TRACK&&U.hasAudioGroup(C)||N===ba.SUBTITLE_TRACK&&U.hasSubtitleGroup(C))continue;if(y===fi.AUDIO&&(c=i.audioGroups)!=null&&c.some(G=>U.hasAudioGroup(G))||y===fi.SUBTITLE&&(u=i.subtitleGroups)!=null&&u.some(G=>U.hasSubtitleGroup(G))||w&&i.audioCodec===U.audioCodec||E&&i.codecSet===U.codecSet||!w&&i.codecSet!==U.codecSet)continue}d=D;break}}if(d>-1&&n.loadLevel!==d)return e.levelRetry=!0,this.playlistError=0,{action:Ud.SendAlternateToPenaltyBox,flags:hf.None,nextAutoLevel:d}}return{action:Ud.SendAlternateToPenaltyBox,flags:hf.MoveAllAlternatesMatchingHost}}onErrorOut(e,r){var n;switch((n=r.errorAction)==null?void 0:n.action){case Ud.DoNothing:break;case Ud.SendAlternateToPenaltyBox:this.sendAlternateToPenaltyBox(r),!r.errorAction.resolved&&r.details!==br.FRAG_GAP?r.fatal=!0:/MediaSource readyState: ended/.test(r.error.message)&&(this.warn(`MediaSource ended after "${r.sourceBufferName}" sourceBuffer append error. Attempting to recover from media error.`),this.hls.recoverMediaError());break}if(r.fatal){this.hls.stopLoad();return}}sendAlternateToPenaltyBox(e){const r=this.hls,n=e.errorAction;if(!n)return;const{flags:i}=n,a=n.nextAutoLevel;switch(i){case hf.None:this.switchLevel(e,a);break;case hf.MoveAllAlternatesMatchingHDCP:{const u=this.getVariantLevelIndex(e.frag),l=r.levels[u],d=l?.attrs["HDCP-LEVEL"];if(n.hdcpLevel=d,d==="NONE")this.warn("HDCP policy resticted output with HDCP-LEVEL=NONE");else if(d){r.maxHdcpLevel=vO[vO.indexOf(d)-1],n.resolved=!0,this.warn(`Restricting playback to HDCP-LEVEL of "${r.maxHdcpLevel}" or lower`);break}}case hf.MoveAllAlternatesMatchingKey:{const u=e.decryptdata;if(u){const l=this.hls.levels,d=l.length;for(let m=d;m--;)if(this.variantHasKey(l[m],u)){var o,c;this.log(`Banned key found in level ${m} (${l[m].bitrate}bps) or audio group "${(o=l[m].audioGroups)==null?void 0:o.join(",")}" (${(c=e.frag)==null?void 0:c.type} fragment) ${$d(u.keyId||[])}`),l[m].fragmentError++,l[m].loadError++,this.log(`Removing level ${m} with key error (${e.error})`),this.hls.removeLevel(m)}const f=e.frag;if(this.hls.levels.length<d)n.resolved=!0;else if(f&&f.type!==fi.MAIN){const m=f.decryptdata;m&&!u.matches(m)&&(n.resolved=!0)}}break}}n.resolved||this.switchLevel(e,a)}switchLevel(e,r){if(r!==void 0&&e.errorAction&&(this.warn(`switching to level ${r} after ${e.details}`),this.hls.nextAutoLevel=r,e.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel,e.details===br.BUFFER_ADD_CODEC_ERROR&&e.mimeType&&e.sourceBufferName!=="audiovideo")){const n=gO(e.mimeType),i=this.hls.levels;for(let a=i.length;a--;)i[a][`${e.sourceBufferName}Codec`]===n&&(this.log(`Removing level ${a} for ${e.details} ("${n}" not supported)`),this.hls.removeLevel(a))}}}function Eb(t){const e={action:Ud.DoNothing,flags:hf.None};return t&&(e.resolved=!0),e}var $u={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"};class r$e{constructor(e){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=e,this._registerListeners()}_registerListeners(){const{hls:e}=this;e&&(e.on(Be.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Be.BUFFER_APPENDED,this.onBufferAppended,this),e.on(Be.FRAG_BUFFERED,this.onFragBuffered,this),e.on(Be.FRAG_LOADED,this.onFragLoaded,this))}_unregisterListeners(){const{hls:e}=this;e&&(e.off(Be.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Be.BUFFER_APPENDED,this.onBufferAppended,this),e.off(Be.FRAG_BUFFERED,this.onFragBuffered,this),e.off(Be.FRAG_LOADED,this.onFragLoaded,this))}destroy(){this._unregisterListeners(),this.hls=this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null}getAppendedFrag(e,r){const n=this.activePartLists[r];if(n)for(let i=n.length;i--;){const a=n[i];if(!a)break;if(a.start<=e&&e<=a.end&&a.loaded)return a}return this.getBufferedFrag(e,r)}getBufferedFrag(e,r){return this.getFragAtPos(e,r,!0)}getFragAtPos(e,r,n){const{fragments:i}=this,a=Object.keys(i);for(let o=a.length;o--;){const c=i[a[o]];if(c?.body.type===r&&(!n||c.buffered)){const u=c.body;if(u.start<=e&&e<=u.end)return u}}return null}detectEvictedFragments(e,r,n,i,a){this.timeRanges&&(this.timeRanges[e]=r);const o=i?.fragment.sn||-1;Object.keys(this.fragments).forEach(c=>{const u=this.fragments[c];if(!u||o>=u.body.sn)return;if(!u.buffered&&(!u.loaded||a)){u.body.type===n&&this.removeFragment(u.body);return}const l=u.range[e];if(l){if(l.time.length===0){this.removeFragment(u.body);return}l.time.some(d=>{const f=!this.isTimeBuffered(d.startPTS,d.endPTS,r);return f&&this.removeFragment(u.body),f})}})}detectPartialFragments(e){const r=this.timeRanges;if(!r||e.frag.sn==="initSegment")return;const n=e.frag,i=Ax(n),a=this.fragments[i];if(!a||a.buffered&&n.gap)return;const o=!n.relurl;Object.keys(r).forEach(c=>{const u=n.elementaryStreams[c];if(!u)return;const l=r[c],d=o||u.partial===!0;a.range[c]=this.getBufferedTimes(n,e.part,d,l)}),a.loaded=null,Object.keys(a.range).length?(this.bufferedEnd(a,n),xS(a)||this.removeParts(n.sn-1,n.type)):this.removeFragment(a.body)}bufferedEnd(e,r){e.buffered=!0,(e.body.endList=r.endList||e.body.endList)&&(this.endListFragments[e.body.type]=e)}removeParts(e,r){const n=this.activePartLists[r];n&&(this.activePartLists[r]=DK(n,i=>i.fragment.sn>=e))}fragBuffered(e,r){const n=Ax(e);let i=this.fragments[n];!i&&r&&(i=this.fragments[n]={body:e,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},e.gap&&(this.hasGaps=!0)),i&&(i.loaded=null,this.bufferedEnd(i,e))}getBufferedTimes(e,r,n,i){const a={time:[],partial:n},o=e.start,c=e.end,u=e.minEndPTS||c,l=e.maxStartPTS||o;for(let d=0;d<i.length;d++){const f=i.start(d)-this.bufferPadding,m=i.end(d)+this.bufferPadding;if(l>=f&&u<=m){a.time.push({startPTS:Math.max(o,i.start(d)),endPTS:Math.min(c,i.end(d))});break}else if(o<m&&c>f){const p=Math.max(o,i.start(d)),g=Math.min(c,i.end(d));g>p&&(a.partial=!0,a.time.push({startPTS:p,endPTS:g}))}else if(c<=f)break}return a}getPartialFragment(e){let r=null,n,i,a,o=0;const{bufferPadding:c,fragments:u}=this;return Object.keys(u).forEach(l=>{const d=u[l];d&&xS(d)&&(i=d.body.start-c,a=d.body.end+c,e>=i&&e<=a&&(n=Math.min(e-i,a-e),o<=n&&(r=d.body,o=n)))}),r}isEndListAppended(e){const r=this.endListFragments[e];return r!==void 0&&(r.buffered||xS(r))}getState(e){const r=Ax(e),n=this.fragments[r];return n?n.buffered?xS(n)?$u.PARTIAL:$u.OK:$u.APPENDING:$u.NOT_LOADED}isTimeBuffered(e,r,n){let i,a;for(let o=0;o<n.length;o++){if(i=n.start(o)-this.bufferPadding,a=n.end(o)+this.bufferPadding,e>=i&&r<=a)return!0;if(r<=i)return!1}return!1}onManifestLoading(){this.removeAllFragments()}onFragLoaded(e,r){if(r.frag.sn==="initSegment"||r.frag.bitrateTest)return;const n=r.frag,i=r.part?null:r,a=Ax(n);this.fragments[a]={body:n,appendedPTS:null,loaded:i,buffered:!1,range:Object.create(null)}}onBufferAppended(e,r){const{frag:n,part:i,timeRanges:a,type:o}=r;if(n.sn==="initSegment")return;const c=n.type;if(i){let l=this.activePartLists[c];l||(this.activePartLists[c]=l=[]),l.push(i)}this.timeRanges=a;const u=a[o];this.detectEvictedFragments(o,u,c,i)}onFragBuffered(e,r){this.detectPartialFragments(r)}hasFragment(e){const r=Ax(e);return!!this.fragments[r]}hasFragments(e){const{fragments:r}=this,n=Object.keys(r);if(!e)return n.length>0;for(let i=n.length;i--;){const a=r[n[i]];if(a?.body.type===e)return!0}return!1}hasParts(e){var r;return!!((r=this.activePartLists[e])!=null&&r.length)}removeFragmentsInRange(e,r,n,i,a){i&&!this.hasGaps||Object.keys(this.fragments).forEach(o=>{const c=this.fragments[o];if(!c)return;const u=c.body;u.type!==n||i&&!u.gap||u.start<r&&u.end>e&&(c.buffered||a)&&this.removeFragment(u)})}removeFragment(e){const r=Ax(e);e.clearElementaryStreamInfo();const n=this.activePartLists[e.type];if(n){const i=e.sn;this.activePartLists[e.type]=DK(n,a=>a.fragment.sn!==i)}delete this.fragments[r],e.endList&&delete this.endListFragments[e.type]}removeAllFragments(){var e;this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1;const r=(e=this.hls)==null||(e=e.latestLevelDetails)==null?void 0:e.partList;r&&r.forEach(n=>n.clearElementaryStreamInfo())}}function xS(t){var e,r,n;return t.buffered&&!!(t.body.gap||(e=t.range.video)!=null&&e.partial||(r=t.range.audio)!=null&&r.partial||(n=t.range.audiovideo)!=null&&n.partial)}function Ax(t){return`${t.type}_${t.level}_${t.sn}`}function DK(t,e){return t.filter(r=>{const n=e(r);return n||r.clearElementaryStreamInfo(),n})}var W0={cbc:0,ctr:1};class n$e{constructor(e,r,n){this.subtle=void 0,this.aesIV=void 0,this.aesMode=void 0,this.subtle=e,this.aesIV=r,this.aesMode=n}decrypt(e,r){switch(this.aesMode){case W0.cbc:return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},r,e);case W0.ctr:return this.subtle.decrypt({name:"AES-CTR",counter:this.aesIV,length:64},r,e);default:throw new Error(`[AESCrypto] invalid aes mode ${this.aesMode}`)}}}function i$e(t){const e=t.byteLength,r=e&&new DataView(t.buffer).getUint8(e-1);return r?t.slice(0,e-r):t}class s$e{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(e){const r=new DataView(e),n=new Uint32Array(4);for(let i=0;i<4;i++)n[i]=r.getUint32(i*4);return n}initTable(){const e=this.sBox,r=this.invSBox,n=this.subMix,i=n[0],a=n[1],o=n[2],c=n[3],u=this.invSubMix,l=u[0],d=u[1],f=u[2],m=u[3],p=new Uint32Array(256);let g=0,y=0,x=0;for(x=0;x<256;x++)x<128?p[x]=x<<1:p[x]=x<<1^283;for(x=0;x<256;x++){let w=y^y<<1^y<<2^y<<3^y<<4;w=w>>>8^w&255^99,e[g]=w,r[w]=g;const _=p[g],E=p[_],N=p[E];let C=p[w]*257^w*16843008;i[g]=C<<24|C>>>8,a[g]=C<<16|C>>>16,o[g]=C<<8|C>>>24,c[g]=C,C=N*16843009^E*65537^_*257^g*16843008,l[w]=C<<24|C>>>8,d[w]=C<<16|C>>>16,f[w]=C<<8|C>>>24,m[w]=C,g?(g=_^p[p[p[N^_]]],y^=p[p[y]]):g=y=1}}expandKey(e){const r=this.uint8ArrayToUint32Array_(e);let n=!0,i=0;for(;i<r.length&&n;)n=r[i]===this.key[i],i++;if(n)return;this.key=r;const a=this.keySize=r.length;if(a!==4&&a!==6&&a!==8)throw new Error("Invalid aes key size="+a);const o=this.ksRows=(a+6+1)*4;let c,u;const l=this.keySchedule=new Uint32Array(o),d=this.invKeySchedule=new Uint32Array(o),f=this.sBox,m=this.rcon,p=this.invSubMix,g=p[0],y=p[1],x=p[2],w=p[3];let _,E;for(c=0;c<o;c++){if(c<a){_=l[c]=r[c];continue}E=_,c%a===0?(E=E<<8|E>>>24,E=f[E>>>24]<<24|f[E>>>16&255]<<16|f[E>>>8&255]<<8|f[E&255],E^=m[c/a|0]<<24):a>6&&c%a===4&&(E=f[E>>>24]<<24|f[E>>>16&255]<<16|f[E>>>8&255]<<8|f[E&255]),l[c]=_=(l[c-a]^E)>>>0}for(u=0;u<o;u++)c=o-u,u&3?E=l[c]:E=l[c-4],u<4||c<=4?d[u]=E:d[u]=g[f[E>>>24]]^y[f[E>>>16&255]]^x[f[E>>>8&255]]^w[f[E&255]],d[u]=d[u]>>>0}networkToHostOrderSwap(e){return e<<24|(e&65280)<<8|(e&16711680)>>8|e>>>24}decrypt(e,r,n){const i=this.keySize+6,a=this.invKeySchedule,o=this.invSBox,c=this.invSubMix,u=c[0],l=c[1],d=c[2],f=c[3],m=this.uint8ArrayToUint32Array_(n);let p=m[0],g=m[1],y=m[2],x=m[3];const w=new Int32Array(e),_=new Int32Array(w.length);let E,N,C,I,D,U,G,q,J,de,xe,we,ve,ne;const ae=this.networkToHostOrderSwap;for(;r<w.length;){for(J=ae(w[r]),de=ae(w[r+1]),xe=ae(w[r+2]),we=ae(w[r+3]),D=J^a[0],U=we^a[1],G=xe^a[2],q=de^a[3],ve=4,ne=1;ne<i;ne++)E=u[D>>>24]^l[U>>16&255]^d[G>>8&255]^f[q&255]^a[ve],N=u[U>>>24]^l[G>>16&255]^d[q>>8&255]^f[D&255]^a[ve+1],C=u[G>>>24]^l[q>>16&255]^d[D>>8&255]^f[U&255]^a[ve+2],I=u[q>>>24]^l[D>>16&255]^d[U>>8&255]^f[G&255]^a[ve+3],D=E,U=N,G=C,q=I,ve=ve+4;E=o[D>>>24]<<24^o[U>>16&255]<<16^o[G>>8&255]<<8^o[q&255]^a[ve],N=o[U>>>24]<<24^o[G>>16&255]<<16^o[q>>8&255]<<8^o[D&255]^a[ve+1],C=o[G>>>24]<<24^o[q>>16&255]<<16^o[D>>8&255]<<8^o[U&255]^a[ve+2],I=o[q>>>24]<<24^o[D>>16&255]<<16^o[U>>8&255]<<8^o[G&255]^a[ve+3],_[r]=ae(E^p),_[r+1]=ae(I^g),_[r+2]=ae(C^y),_[r+3]=ae(N^x),p=J,g=de,y=xe,x=we,r=r+4}return _.buffer}}class a$e{constructor(e,r,n){this.subtle=void 0,this.key=void 0,this.aesMode=void 0,this.subtle=e,this.key=r,this.aesMode=n}expandKey(){const e=o$e(this.aesMode);return this.subtle.importKey("raw",this.key,{name:e},!1,["encrypt","decrypt"])}}function o$e(t){switch(t){case W0.cbc:return"AES-CBC";case W0.ctr:return"AES-CTR";default:throw new Error(`[FastAESKey] invalid aes mode ${t}`)}}const l$e=16;class IF{constructor(e,{removePKCS7Padding:r=!0}={}){if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.enableSoftwareAES=void 0,this.enableSoftwareAES=e.enableSoftwareAES,this.removePKCS7Padding=r,r)try{const n=self.crypto;n&&(this.subtle=n.subtle||n.webkitSubtle)}catch{}this.useSoftware=!this.subtle}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){const{currentResult:e,remainderData:r}=this;if(!e||r)return this.reset(),null;const n=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?i$e(n):n}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(e,r,n,i){return this.useSoftware?new Promise((a,o)=>{const c=ArrayBuffer.isView(e)?e:new Uint8Array(e);this.softwareDecrypt(c,r,n,i);const u=this.flush();u?a(u.buffer):o(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(e),r,n,i)}softwareDecrypt(e,r,n,i){const{currentIV:a,currentResult:o,remainderData:c}=this;if(i!==W0.cbc||r.byteLength!==16)return Ho.warn("SoftwareDecrypt: can only handle AES-128-CBC"),null;this.logOnce("JS AES decrypt"),c&&(e=am(c,e),this.remainderData=null);const u=this.getValidChunk(e);if(!u.length)return null;a&&(n=a);let l=this.softwareDecrypter;l||(l=this.softwareDecrypter=new s$e),l.expandKey(r);const d=o;return this.currentResult=l.decrypt(u.buffer,0,n),this.currentIV=u.slice(-16).buffer,d||null}webCryptoDecrypt(e,r,n,i){if(this.key!==r||!this.fastAesKey){if(!this.subtle)return Promise.resolve(this.onWebCryptoError(e,r,n,i));this.key=r,this.fastAesKey=new a$e(this.subtle,r,i)}return this.fastAesKey.expandKey().then(a=>this.subtle?(this.logOnce("WebCrypto AES decrypt"),new n$e(this.subtle,new Uint8Array(n),i).decrypt(e.buffer,a)):Promise.reject(new Error("web crypto not initialized"))).catch(a=>(Ho.warn(`[decrypter]: WebCrypto Error, disable WebCrypto API, ${a.name}: ${a.message}`),this.onWebCryptoError(e,r,n,i)))}onWebCryptoError(e,r,n,i){const a=this.enableSoftwareAES;if(a){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,r,n,i);const o=this.flush();if(o)return o.buffer}throw new Error("WebCrypto"+(a?" and softwareDecrypt":"")+": failed to decrypt data")}getValidChunk(e){let r=e;const n=e.length-e.length%l$e;return n!==e.length&&(r=e.slice(0,n),this.remainderData=e.slice(n)),r}logOnce(e){this.logEnabled&&(Ho.log(`[decrypter]: ${e}`),this.logEnabled=!1)}}const MK=Math.pow(2,17);class c$e{constructor(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(e,r){const n=e.url;if(!n)return Promise.reject(new Pp({type:Oi.NETWORK_ERROR,details:br.FRAG_LOAD_ERROR,fatal:!1,frag:e,error:new Error(`Fragment does not have a ${n?"part list":"url"}`),networkDetails:null}));this.abort();const i=this.config,a=i.fLoader,o=i.loader;return new Promise((c,u)=>{if(this.loader&&this.loader.destroy(),e.gap)if(e.tagList.some(g=>g[0]==="GAP")){u(UK(e));return}else e.gap=!1;const l=this.loader=a?new a(i):new o(i),d=FK(e);e.loader=l;const f=RK(i.fragLoadPolicy.default),m={loadPolicy:f,timeout:f.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:e.sn==="initSegment"?1/0:MK};e.stats=l.stats;const p={onSuccess:(g,y,x,w)=>{this.resetLoader(e,l);let _=g.data;x.resetIV&&e.decryptdata&&(e.decryptdata.iv=new Uint8Array(_.slice(0,16)),_=_.slice(16)),c({frag:e,part:null,payload:_,networkDetails:w})},onError:(g,y,x,w)=>{this.resetLoader(e,l),u(new Pp({type:Oi.NETWORK_ERROR,details:br.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:Uo({url:n,data:void 0},g),error:new Error(`HTTP Error ${g.code} ${g.text}`),networkDetails:x,stats:w}))},onAbort:(g,y,x)=>{this.resetLoader(e,l),u(new Pp({type:Oi.NETWORK_ERROR,details:br.INTERNAL_ABORTED,fatal:!1,frag:e,error:new Error("Aborted"),networkDetails:x,stats:g}))},onTimeout:(g,y,x)=>{this.resetLoader(e,l),u(new Pp({type:Oi.NETWORK_ERROR,details:br.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,error:new Error(`Timeout after ${m.timeout}ms`),networkDetails:x,stats:g}))}};r&&(p.onProgress=(g,y,x,w)=>r({frag:e,part:null,payload:x,networkDetails:w})),l.load(d,m,p)})}loadPart(e,r,n){this.abort();const i=this.config,a=i.fLoader,o=i.loader;return new Promise((c,u)=>{if(this.loader&&this.loader.destroy(),e.gap||r.gap){u(UK(e,r));return}const l=this.loader=a?new a(i):new o(i),d=FK(e,r);e.loader=l;const f=RK(i.fragLoadPolicy.default),m={loadPolicy:f,timeout:f.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:MK};r.stats=l.stats,l.load(d,m,{onSuccess:(p,g,y,x)=>{this.resetLoader(e,l),this.updateStatsFromPart(e,r);const w={frag:e,part:r,payload:p.data,networkDetails:x};n(w),c(w)},onError:(p,g,y,x)=>{this.resetLoader(e,l),u(new Pp({type:Oi.NETWORK_ERROR,details:br.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:r,response:Uo({url:d.url,data:void 0},p),error:new Error(`HTTP Error ${p.code} ${p.text}`),networkDetails:y,stats:x}))},onAbort:(p,g,y)=>{e.stats.aborted=r.stats.aborted,this.resetLoader(e,l),u(new Pp({type:Oi.NETWORK_ERROR,details:br.INTERNAL_ABORTED,fatal:!1,frag:e,part:r,error:new Error("Aborted"),networkDetails:y,stats:p}))},onTimeout:(p,g,y)=>{this.resetLoader(e,l),u(new Pp({type:Oi.NETWORK_ERROR,details:br.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:r,error:new Error(`Timeout after ${m.timeout}ms`),networkDetails:y,stats:p}))}})})}updateStatsFromPart(e,r){const n=e.stats,i=r.stats,a=i.total;if(n.loaded+=i.loaded,a){const u=Math.round(e.duration/r.duration),l=Math.min(Math.round(n.loaded/a),u),f=(u-l)*Math.round(n.loaded/l);n.total=n.loaded+f}else n.total=Math.max(n.loaded,n.total);const o=n.loading,c=i.loading;o.start?o.first+=c.first-c.start:(o.start=c.start,o.first=c.first),o.end=c.end}resetLoader(e,r){e.loader=null,this.loader===r&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),r.destroy()}}function FK(t,e=null){const r=e||t,n={frag:t,part:e,responseType:"arraybuffer",url:r.url,headers:{},rangeStart:0,rangeEnd:0},i=r.byteRangeStartOffset,a=r.byteRangeEndOffset;if(Xn(i)&&Xn(a)){var o;let c=i,u=a;if(t.sn==="initSegment"&&u$e((o=t.decryptdata)==null?void 0:o.method)){const l=a-i;l%16&&(u=a+(16-l%16)),i!==0&&(n.resetIV=!0,c=i-16)}n.rangeStart=c,n.rangeEnd=u}return n}function UK(t,e){const r=new Error(`GAP ${t.gap?"tag":"attribute"} found`),n={type:Oi.MEDIA_ERROR,details:br.FRAG_GAP,fatal:!1,frag:t,error:r,networkDetails:null};return e&&(n.part=e),(e||t).stats.aborted=!0,new Pp(n)}function u$e(t){return t==="AES-128"||t==="AES-256"}class Pp extends Error{constructor(e){super(e.error.message),this.data=void 0,this.data=e}}class Tie extends um{constructor(e,r){super(e,r),this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(e){return this._tickInterval?!1:(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,e),!0)}clearInterval(){return this._tickInterval?(self.clearInterval(this._tickInterval),this._tickInterval=null,!0):!1}clearNextTick(){return this._tickTimer?(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0):!1}tick(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}class BF{constructor(e,r,n,i=0,a=-1,o=!1){this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing=bS(),this.buffering={audio:bS(),video:bS(),audiovideo:bS()},this.level=e,this.sn=r,this.id=n,this.size=i,this.part=a,this.partial=o}}function bS(){return{start:0,executeStart:0,executeEnd:0,end:0}}const $K={length:0,start:()=>0,end:()=>0};class Hs{static isBuffered(e,r){if(e){const n=Hs.getBuffered(e);for(let i=n.length;i--;)if(r>=n.start(i)&&r<=n.end(i))return!0}return!1}static bufferedRanges(e){if(e){const r=Hs.getBuffered(e);return Hs.timeRangesToArray(r)}return[]}static timeRangesToArray(e){const r=[];for(let n=0;n<e.length;n++)r.push({start:e.start(n),end:e.end(n)});return r}static bufferInfo(e,r,n){if(e){const i=Hs.bufferedRanges(e);if(i.length)return Hs.bufferedInfo(i,r,n)}return{len:0,start:r,end:r,bufferedIndex:-1}}static bufferedInfo(e,r,n){r=Math.max(0,r),e.length>1&&e.sort((d,f)=>d.start-f.start||f.end-d.end);let i=-1,a=[];if(n)for(let d=0;d<e.length;d++){r>=e[d].start&&r<=e[d].end&&(i=d);const f=a.length;if(f){const m=a[f-1].end;e[d].start-m<n?e[d].end>m&&(a[f-1].end=e[d].end):a.push(e[d])}else a.push(e[d])}else a=e;let o=0,c,u=r,l=r;for(let d=0;d<a.length;d++){const f=a[d].start,m=a[d].end;if(i===-1&&r>=f&&r<=m&&(i=d),r+n>=f&&r<m)u=f,l=m,o=l-r;else if(r+n<f){c=f;break}}return{len:o,start:u||0,end:l||0,nextStart:c,buffered:e,bufferedIndex:i}}static getBuffered(e){try{return e.buffered||$K}catch(r){return Ho.log("failed to get media.buffered",r),$K}}}const Cie=/\{\$([a-zA-Z0-9-_]+)\}/g;function HK(t){return Cie.test(t)}function xO(t,e){if(t.variableList!==null||t.hasVariableRefs){const r=t.variableList;return e.replace(Cie,n=>{const i=n.substring(2,n.length-1),a=r?.[i];return a===void 0?(t.playlistParsingError||(t.playlistParsingError=new Error(`Missing preceding EXT-X-DEFINE tag for Variable Reference: "${i}"`)),n):a})}return e}function QK(t,e,r){let n=t.variableList;n||(t.variableList=n={});let i,a;if("QUERYPARAM"in e){i=e.QUERYPARAM;try{const o=new self.URL(r).searchParams;if(o.has(i))a=o.get(i);else throw new Error(`"${i}" does not match any query parameter in URI: "${r}"`)}catch(o){t.playlistParsingError||(t.playlistParsingError=new Error(`EXT-X-DEFINE QUERYPARAM: ${o.message}`))}}else i=e.NAME,a=e.VALUE;i in n?t.playlistParsingError||(t.playlistParsingError=new Error(`EXT-X-DEFINE duplicate Variable Name declarations: "${i}"`)):n[i]=a||""}function d$e(t,e,r){const n=e.IMPORT;if(r&&n in r){let i=t.variableList;i||(t.variableList=i={}),i[n]=r[n]}else t.playlistParsingError||(t.playlistParsingError=new Error(`EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "${n}"`))}const h$e=/^(\d+)x(\d+)$/,zK=/(.+?)=(".*?"|.*?)(?:,|$)/g;class cc{constructor(e,r){typeof e=="string"&&(e=cc.parseAttrList(e,r)),nl(this,e)}get clientAttrs(){return Object.keys(this).filter(e=>e.substring(0,2)==="X-")}decimalInteger(e){const r=parseInt(this[e],10);return r>Number.MAX_SAFE_INTEGER?1/0:r}hexadecimalInteger(e){if(this[e]){let r=(this[e]||"0x").slice(2);r=(r.length&1?"0":"")+r;const n=new Uint8Array(r.length/2);for(let i=0;i<r.length/2;i++)n[i]=parseInt(r.slice(i*2,i*2+2),16);return n}return null}hexadecimalIntegerAsNumber(e){const r=parseInt(this[e],16);return r>Number.MAX_SAFE_INTEGER?1/0:r}decimalFloatingPoint(e){return parseFloat(this[e])}optionalFloat(e,r){const n=this[e];return n?parseFloat(n):r}enumeratedString(e){return this[e]}enumeratedStringList(e,r){const n=this[e];return(n?n.split(/[ ,]+/):[]).reduce((i,a)=>(i[a.toLowerCase()]=!0,i),r)}bool(e){return this[e]==="YES"}decimalResolution(e){const r=h$e.exec(this[e]);if(r!==null)return{width:parseInt(r[1],10),height:parseInt(r[2],10)}}static parseAttrList(e,r){let n;const i={};for(zK.lastIndex=0;(n=zK.exec(e))!==null;){const o=n[1].trim();let c=n[2];const u=c.indexOf('"')===0&&c.lastIndexOf('"')===c.length-1;let l=!1;if(u)c=c.slice(1,-1);else switch(o){case"IV":case"SCTE35-CMD":case"SCTE35-IN":case"SCTE35-OUT":l=!0}if(r&&(u||l))c=xO(r,c);else if(!l&&!u)switch(o){case"CLOSED-CAPTIONS":if(c==="NONE")break;case"ALLOWED-CPC":case"CLASS":case"ASSOC-LANGUAGE":case"AUDIO":case"BYTERANGE":case"CHANNELS":case"CHARACTERISTICS":case"CODECS":case"DATA-ID":case"END-DATE":case"GROUP-ID":case"ID":case"IMPORT":case"INSTREAM-ID":case"KEYFORMAT":case"KEYFORMATVERSIONS":case"LANGUAGE":case"NAME":case"PATHWAY-ID":case"QUERYPARAM":case"RECENTLY-REMOVED-DATERANGES":case"SERVER-URI":case"STABLE-RENDITION-ID":case"STABLE-VARIANT-ID":case"START-DATE":case"SUBTITLES":case"SUPPLEMENTAL-CODECS":case"URI":case"VALUE":case"VIDEO":case"X-ASSET-LIST":case"X-ASSET-URI":Ho.warn(`${e}: attribute ${o} is missing quotes`)}i[o]=c}return i}}const f$e="com.apple.hls.interstitial";function m$e(t){return t!=="ID"&&t!=="CLASS"&&t!=="CUE"&&t!=="START-DATE"&&t!=="DURATION"&&t!=="END-DATE"&&t!=="END-ON-NEXT"}function A$e(t){return t==="SCTE35-OUT"||t==="SCTE35-IN"||t==="SCTE35-CMD"}class Nie{constructor(e,r,n=0){var i;if(this.attr=void 0,this.tagAnchor=void 0,this.tagOrder=void 0,this._startDate=void 0,this._endDate=void 0,this._dateAtEnd=void 0,this._cue=void 0,this._badValueForSameId=void 0,this.tagAnchor=r?.tagAnchor||null,this.tagOrder=(i=r?.tagOrder)!=null?i:n,r){const a=r.attr;for(const o in a)if(Object.prototype.hasOwnProperty.call(e,o)&&e[o]!==a[o]){Ho.warn(`DATERANGE tag attribute: "${o}" does not match for tags with ID: "${e.ID}"`),this._badValueForSameId=o;break}e=nl(new cc({}),a,e)}if(this.attr=e,r?(this._startDate=r._startDate,this._cue=r._cue,this._endDate=r._endDate,this._dateAtEnd=r._dateAtEnd):this._startDate=new Date(e["START-DATE"]),"END-DATE"in this.attr){const a=r?.endDate||new Date(this.attr["END-DATE"]);Xn(a.getTime())&&(this._endDate=a)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get cue(){const e=this._cue;return e===void 0?this._cue=this.attr.enumeratedStringList(this.attr.CUE?"CUE":"X-CUE",{pre:!1,post:!1,once:!1}):e}get startTime(){const{tagAnchor:e}=this;return e===null||e.programDateTime===null?(Ho.warn(`Expected tagAnchor Fragment with PDT set for DateRange "${this.id}": ${e}`),NaN):e.start+(this.startDate.getTime()-e.programDateTime)/1e3}get startDate(){return this._startDate}get endDate(){const e=this._endDate||this._dateAtEnd;if(e)return e;const r=this.duration;return r!==null?this._dateAtEnd=new Date(this._startDate.getTime()+r*1e3):null}get duration(){if("DURATION"in this.attr){const e=this.attr.decimalFloatingPoint("DURATION");if(Xn(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isInterstitial(){return this.class===f$e}get isValid(){return!!this.id&&!this._badValueForSameId&&Xn(this.startDate.getTime())&&(this.duration===null||this.duration>=0)&&(!this.endOnNext||!!this.class)&&(!this.attr.CUE||!this.cue.pre&&!this.cue.post||this.cue.pre!==this.cue.post)&&(!this.isInterstitial||"X-ASSET-URI"in this.attr||"X-ASSET-LIST"in this.attr)}}const p$e=10;class g$e{constructor(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.dateRangeTagCount=0,this.live=!0,this.requestScheduled=-1,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.appliedTimelineOffset=void 0,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=e}reloaded(e){if(!e){this.advanced=!0,this.updated=!0;return}const r=this.lastPartSn-e.lastPartSn,n=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!n||!!r||!this.live,this.advanced=this.endSN>e.endSN||r>0||r===0&&n>0,this.updated||this.advanced?this.misses=Math.floor(e.misses*.6):this.misses=e.misses+1}hasKey(e){return this.encryptedFragments.some(r=>{let n=r.decryptdata;return n||(r.setKeyFormat(e.keyFormat),n=r.decryptdata),!!n&&e.matches(n)})}get hasProgramDateTime(){return this.fragments.length?Xn(this.fragments[this.fragments.length-1].programDateTime):!1}get levelTargetDuration(){return this.averagetargetduration||this.targetduration||p$e}get drift(){const e=this.driftEndTime-this.driftStartTime;return e>0?(this.driftEnd-this.driftStart)*1e3/e:1}get edge(){return this.partEnd||this.fragmentEnd}get partEnd(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}get fragmentEnd(){return this.fragments.length?this.fragments[this.fragments.length-1].end:0}get fragmentStart(){return this.fragments.length?this.fragments[0].start:0}get age(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}get lastPartIndex(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].index:-1}get maxPartIndex(){const e=this.partList;if(e){const r=this.lastPartIndex;if(r!==-1){for(let n=e.length;n--;)if(e[n].index>r)return e[n].index;return r}}return 0}get lastPartSn(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}get expired(){if(this.live&&this.age&&this.misses<3){const e=this.partEnd-this.fragmentStart;return this.age>Math.max(e,this.totalduration)+this.levelTargetDuration}return!1}}function oN(t,e){return t.length===e.length?!t.some((r,n)=>r!==e[n]):!1}function VK(t,e){return!t&&!e?!0:!t||!e?!1:oN(t,e)}function Sb(t){return t==="AES-128"||t==="AES-256"||t==="AES-256-CTR"}function PF(t){switch(t){case"AES-128":case"AES-256":return W0.cbc;case"AES-256-CTR":return W0.ctr;default:throw new Error(`invalid full segment method ${t}`)}}function OF(t){return Uint8Array.from(atob(t),e=>e.charCodeAt(0))}function bO(t){return Uint8Array.from(unescape(encodeURIComponent(t)),e=>e.charCodeAt(0))}function v$e(t){const e=bO(t).subarray(0,16),r=new Uint8Array(16);return r.set(e,16-e.length),r}function kie(t){const e=function(n,i,a){const o=n[i];n[i]=n[a],n[a]=o};e(t,0,3),e(t,1,2),e(t,4,5),e(t,6,7)}function Lie(t){const e=t.split(":");let r=null;if(e[0]==="data"&&e.length===2){const n=e[1].split(";"),i=n[n.length-1].split(",");if(i.length===2){const a=i[0]==="base64",o=i[1];a?(n.splice(-1,1),r=OF(o)):r=v$e(o)}}return r}const lN=typeof self<"u"?self:void 0;var hc={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},Hd={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.streamingkeydelivery",PLAYREADY:"com.microsoft.playready",WIDEVINE:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"};function Aj(t){switch(t){case Hd.FAIRPLAY:return hc.FAIRPLAY;case Hd.PLAYREADY:return hc.PLAYREADY;case Hd.WIDEVINE:return hc.WIDEVINE;case Hd.CLEARKEY:return hc.CLEARKEY}}function II(t){switch(t){case hc.FAIRPLAY:return Hd.FAIRPLAY;case hc.PLAYREADY:return Hd.PLAYREADY;case hc.WIDEVINE:return Hd.WIDEVINE;case hc.CLEARKEY:return Hd.CLEARKEY}}function Iw(t){const{drmSystems:e,widevineLicenseUrl:r}=t,n=e?[hc.FAIRPLAY,hc.WIDEVINE,hc.PLAYREADY,hc.CLEARKEY].filter(i=>!!e[i]):[];return!n[hc.WIDEVINE]&&r&&n.push(hc.WIDEVINE),n}const Iie=(function(t){return lN!=null&&(t=lN.navigator)!=null&&t.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null})();function y$e(t,e,r,n){let i;switch(t){case hc.FAIRPLAY:i=["cenc","sinf"];break;case hc.WIDEVINE:case hc.PLAYREADY:i=["cenc"];break;case hc.CLEARKEY:i=["cenc","keyids"];break;default:throw new Error(`Unknown key-system: ${t}`)}return x$e(i,e,r,n)}function x$e(t,e,r,n){return[{initDataTypes:t,persistentState:n.persistentState||"optional",distinctiveIdentifier:n.distinctiveIdentifier||"optional",sessionTypes:n.sessionTypes||[n.sessionType||"temporary"],audioCapabilities:e.map(a=>({contentType:`audio/mp4; codecs=${a}`,robustness:n.audioRobustness||"",encryptionScheme:n.audioEncryptionScheme||null})),videoCapabilities:r.map(a=>({contentType:`video/mp4; codecs=${a}`,robustness:n.videoRobustness||"",encryptionScheme:n.videoEncryptionScheme||null}))}]}function b$e(t){var e;return!!t&&(t.sessionType==="persistent-license"||!!((e=t.sessionTypes)!=null&&e.some(r=>r==="persistent-license")))}function Bie(t){const e=new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2),r=String.fromCharCode.apply(null,Array.from(e)),n=r.substring(r.indexOf("<"),r.length),o=new DOMParser().parseFromString(n,"text/xml").getElementsByTagName("KID")[0];if(o){const c=o.childNodes[0]?o.childNodes[0].nodeValue:o.getAttribute("VALUE");if(c){const u=OF(c).subarray(0,16);return kie(u),u}}return null}let px={};class D0{static clearKeyUriToKeyIdMap(){px={}}static setKeyIdForUri(e,r){px[e]=r}static addKeyIdForUri(e){const r=Object.keys(px).length%Number.MAX_SAFE_INTEGER,n=new Uint8Array(16);return new DataView(n.buffer,12,4).setUint32(0,r),px[e]=n,n}constructor(e,r,n,i=[1],a=null,o){this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=e,this.uri=r,this.keyFormat=n,this.keyFormatVersions=i,this.iv=a,this.encrypted=e?e!=="NONE":!1,this.isCommonEncryption=this.encrypted&&!Sb(e),o!=null&&o.startsWith("0x")&&(this.keyId=new Uint8Array(oie(o)))}matches(e){return e.uri===this.uri&&e.method===this.method&&e.encrypted===this.encrypted&&e.keyFormat===this.keyFormat&&oN(e.keyFormatVersions,this.keyFormatVersions)&&VK(e.iv,this.iv)&&VK(e.keyId,this.keyId)}isSupported(){if(this.method){if(Sb(this.method)||this.method==="NONE")return!0;if(this.keyFormat==="identity")return this.method==="SAMPLE-AES";switch(this.keyFormat){case Hd.FAIRPLAY:case Hd.WIDEVINE:case Hd.PLAYREADY:case Hd.CLEARKEY:return["SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)!==-1}}return!1}getDecryptData(e,r){if(!this.encrypted||!this.uri)return null;if(Sb(this.method)){let a=this.iv;return a||(typeof e!="number"&&(Ho.warn(`missing IV for initialization segment with method="${this.method}" - compliance issue`),e=0),a=_$e(e)),new D0(this.method,this.uri,"identity",this.keyFormatVersions,a)}if(this.keyId){const a=px[this.uri];if(a&&!oN(this.keyId,a)&&D0.setKeyIdForUri(this.uri,this.keyId),this.pssh)return this}const n=Lie(this.uri);if(n)switch(this.keyFormat){case Hd.WIDEVINE:if(this.pssh=n,!this.keyId){const a=j7e(n.buffer);if(a.length){var i;const o=a[0];this.keyId=(i=o.kids)!=null&&i.length?o.kids[0]:null}}this.keyId||(this.keyId=KK(r));break;case Hd.PLAYREADY:{const a=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=S7e(a,null,n),this.keyId=Bie(n);break}default:{let a=n.subarray(0,16);if(a.length!==16){const o=new Uint8Array(16);o.set(a,16-a.length),a=o}this.keyId=a;break}}if(!this.keyId||this.keyId.byteLength!==16){let a;a=w$e(r),a||(a=KK(r),a||(a=px[this.uri])),a&&(this.keyId=a,D0.setKeyIdForUri(this.uri,a))}return this}}function w$e(t){const e=t?.[Hd.WIDEVINE];return e?e.keyId:null}function KK(t){const e=t?.[Hd.PLAYREADY];if(e){const r=Lie(e.uri);if(r)return Bie(r)}return null}function _$e(t){const e=new Uint8Array(16);for(let r=12;r<16;r++)e[r]=t>>8*(15-r)&255;return e}const GK=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,WK=/#EXT-X-MEDIA:(.*)/g,E$e=/^#EXT(?:INF|-X-TARGETDURATION):/m,BI=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[^\r\n]*)/.source,/#.*/.source].join("|"),"g"),S$e=new RegExp([/#EXT-X-(PROGRAM-DATE-TIME|BYTERANGE|DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP|INDEPENDENT-SEGMENTS)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|"));class FA{static findGroup(e,r){for(let n=0;n<e.length;n++){const i=e[n];if(i.id===r)return i}}static resolve(e,r){return jF.buildAbsoluteURL(r,e,{alwaysNormalize:!0})}static isMediaPlaylist(e){return E$e.test(e)}static parseMasterPlaylist(e,r){const n=HK(e),i={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:n},a=[];if(GK.lastIndex=0,!e.startsWith("#EXTM3U"))return i.playlistParsingError=new Error("no EXTM3U delimiter"),i;let o;for(;(o=GK.exec(e))!=null;)if(o[1]){var c;const l=new cc(o[1],i),d=xO(i,o[2]),f={attrs:l,bitrate:l.decimalInteger("BANDWIDTH")||l.decimalInteger("AVERAGE-BANDWIDTH"),name:l.NAME,url:FA.resolve(d,r)},m=l.decimalResolution("RESOLUTION");m&&(f.width=m.width,f.height=m.height),XK(l.CODECS,f);const p=l["SUPPLEMENTAL-CODECS"];p&&(f.supplemental={},XK(p,f.supplemental)),(c=f.unknownCodecs)!=null&&c.length||a.push(f),i.levels.push(f)}else if(o[3]){const l=o[3],d=o[4];switch(l){case"SESSION-DATA":{const f=new cc(d,i),m=f["DATA-ID"];m&&(i.sessionData===null&&(i.sessionData={}),i.sessionData[m]=f);break}case"SESSION-KEY":{const f=YK(d,r,i);f.encrypted&&f.isSupported()?(i.sessionKeys===null&&(i.sessionKeys=[]),i.sessionKeys.push(f)):Ho.warn(`[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "${d}"`);break}case"DEFINE":{{const f=new cc(d,i);QK(i,f,r)}break}case"CONTENT-STEERING":{const f=new cc(d,i);i.contentSteering={uri:FA.resolve(f["SERVER-URI"],r),pathwayId:f["PATHWAY-ID"]||"."};break}case"START":{i.startTimeOffset=qK(d);break}}}const u=a.length>0&&a.length<i.levels.length;return i.levels=u?a:i.levels,i.levels.length===0&&(i.playlistParsingError=new Error("no levels found in manifest")),i}static parseMasterPlaylistMedia(e,r,n){let i;const a={},o=n.levels,c={AUDIO:o.map(l=>({id:l.attrs.AUDIO,audioCodec:l.audioCodec})),SUBTITLES:o.map(l=>({id:l.attrs.SUBTITLES,textCodec:l.textCodec})),"CLOSED-CAPTIONS":[]};let u=0;for(WK.lastIndex=0;(i=WK.exec(e))!==null;){const l=new cc(i[1],n),d=l.TYPE;if(d){const f=c[d],m=a[d]||[];a[d]=m;const p=l.LANGUAGE,g=l["ASSOC-LANGUAGE"],y=l.CHANNELS,x=l.CHARACTERISTICS,w=l["INSTREAM-ID"],_={attrs:l,bitrate:0,id:u++,groupId:l["GROUP-ID"]||"",name:l.NAME||p||"",type:d,default:l.bool("DEFAULT"),autoselect:l.bool("AUTOSELECT"),forced:l.bool("FORCED"),lang:p,url:l.URI?FA.resolve(l.URI,r):""};if(g&&(_.assocLang=g),y&&(_.channels=y),x&&(_.characteristics=x),w&&(_.instreamId=w),f!=null&&f.length){const E=FA.findGroup(f,_.groupId)||f[0];ZK(_,E,"audioCodec"),ZK(_,E,"textCodec")}m.push(_)}}return a}static parseLevelPlaylist(e,r,n,i,a,o){var c;const u={url:r},l=new g$e(r),d=l.fragments,f=[];let m=null,p=0,g=0,y=0,x=0,w=0,_=null,E=new NI(i,u),N,C,I,D=-1,U=!1,G=null,q;if(BI.lastIndex=0,l.m3u8=e,l.hasVariableRefs=HK(e),((c=BI.exec(e))==null?void 0:c[0])!=="#EXTM3U")return l.playlistParsingError=new Error("Missing format identifier #EXTM3U"),l;for(;(N=BI.exec(e))!==null;){U&&(U=!1,E=new NI(i,u),E.playlistOffset=y,E.setStart(y),E.sn=p,E.cc=x,w&&(E.bitrate=w),E.level=n,m&&(E.initSegment=m,m.rawProgramDateTime&&(E.rawProgramDateTime=m.rawProgramDateTime,m.rawProgramDateTime=null),G&&(E.setByteRange(G),G=null)));const we=N[1];if(we){E.duration=parseFloat(we);const ve=(" "+N[2]).slice(1);E.title=ve||null,E.tagList.push(ve?["INF",we,ve]:["INF",we])}else if(N[3]){if(Xn(E.duration)){E.playlistOffset=y,E.setStart(y),I&&eG(E,I,l),E.sn=p,E.level=n,E.cc=x,d.push(E);const ve=(" "+N[3]).slice(1);E.relurl=xO(l,ve),wO(E,_,f),_=E,y+=E.duration,p++,g=0,U=!0}}else{if(N=N[0].match(S$e),!N){Ho.warn("No matches on slow regex match for level playlist!");continue}for(C=1;C<N.length&&N[C]===void 0;C++);const ve=(" "+N[C]).slice(1),ne=(" "+N[C+1]).slice(1),ae=N[C+2]?(" "+N[C+2]).slice(1):null;switch(ve){case"BYTERANGE":_?E.setByteRange(ne,_):E.setByteRange(ne);break;case"PROGRAM-DATE-TIME":E.rawProgramDateTime=ne,E.tagList.push(["PROGRAM-DATE-TIME",ne]),D===-1&&(D=d.length);break;case"PLAYLIST-TYPE":l.type&&Tp(l,ve,N),l.type=ne.toUpperCase();break;case"MEDIA-SEQUENCE":l.startSN!==0?Tp(l,ve,N):d.length>0&&tG(l,ve,N),p=l.startSN=parseInt(ne);break;case"SKIP":{l.skippedSegments&&Tp(l,ve,N);const oe=new cc(ne,l),Ie=oe.decimalInteger("SKIPPED-SEGMENTS");if(Xn(Ie)){l.skippedSegments+=Ie;for(let be=Ie;be--;)d.push(null);p+=Ie}const Ce=oe.enumeratedString("RECENTLY-REMOVED-DATERANGES");Ce&&(l.recentlyRemovedDateranges=(l.recentlyRemovedDateranges||[]).concat(Ce.split("	")));break}case"TARGETDURATION":l.targetduration!==0&&Tp(l,ve,N),l.targetduration=Math.max(parseInt(ne),1);break;case"VERSION":l.version!==null&&Tp(l,ve,N),l.version=parseInt(ne);break;case"INDEPENDENT-SEGMENTS":break;case"ENDLIST":l.live||Tp(l,ve,N),l.live=!1;break;case"#":(ne||ae)&&E.tagList.push(ae?[ne,ae]:[ne]);break;case"DISCONTINUITY":x++,E.tagList.push(["DIS"]);break;case"GAP":E.gap=!0,E.tagList.push([ve]);break;case"BITRATE":E.tagList.push([ve,ne]),w=parseInt(ne)*1e3,Xn(w)?E.bitrate=w:w=0;break;case"DATERANGE":{const oe=new cc(ne,l),Ie=new Nie(oe,l.dateRanges[oe.ID],l.dateRangeTagCount);l.dateRangeTagCount++,Ie.isValid||l.skippedSegments?l.dateRanges[Ie.id]=Ie:Ho.warn(`Ignoring invalid DATERANGE tag: "${ne}"`),E.tagList.push(["EXT-X-DATERANGE",ne]);break}case"DEFINE":{{const oe=new cc(ne,l);"IMPORT"in oe?d$e(l,oe,o):QK(l,oe,r)}break}case"DISCONTINUITY-SEQUENCE":l.startCC!==0?Tp(l,ve,N):d.length>0&&tG(l,ve,N),l.startCC=x=parseInt(ne);break;case"KEY":{const oe=YK(ne,r,l);if(oe.isSupported()){if(oe.method==="NONE"){I=void 0;break}I||(I={});const Ie=I[oe.keyFormat];Ie!=null&&Ie.matches(oe)||(Ie&&(I=nl({},I)),I[oe.keyFormat]=oe)}else Ho.warn(`[Keys] Ignoring unsupported EXT-X-KEY tag: "${ne}"`);break}case"START":l.startTimeOffset=qK(ne);break;case"MAP":{const oe=new cc(ne,l);if(E.duration){const Ie=new NI(i,u);JK(Ie,oe,n,I),m=Ie,E.initSegment=m,m.rawProgramDateTime&&!E.rawProgramDateTime&&(E.rawProgramDateTime=m.rawProgramDateTime)}else{const Ie=E.byteRangeEndOffset;if(Ie){const Ce=E.byteRangeStartOffset;G=`${Ie-Ce}@${Ce}`}else G=null;JK(E,oe,n,I),m=E,U=!0}m.cc=x;break}case"SERVER-CONTROL":{q&&Tp(l,ve,N),q=new cc(ne),l.canBlockReload=q.bool("CAN-BLOCK-RELOAD"),l.canSkipUntil=q.optionalFloat("CAN-SKIP-UNTIL",0),l.canSkipDateRanges=l.canSkipUntil>0&&q.bool("CAN-SKIP-DATERANGES"),l.partHoldBack=q.optionalFloat("PART-HOLD-BACK",0),l.holdBack=q.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{l.partTarget&&Tp(l,ve,N);const oe=new cc(ne);l.partTarget=oe.decimalFloatingPoint("PART-TARGET");break}case"PART":{let oe=l.partList;oe||(oe=l.partList=[]);const Ie=g>0?oe[oe.length-1]:void 0,Ce=g++,be=new cc(ne,l),ue=new d7e(be,E,u,Ce,Ie);oe.push(ue),E.duration+=ue.duration;break}case"PRELOAD-HINT":{const oe=new cc(ne,l);l.preloadHint=oe;break}case"RENDITION-REPORT":{const oe=new cc(ne,l);l.renditionReports=l.renditionReports||[],l.renditionReports.push(oe);break}default:Ho.warn(`line parsed but not handled: ${N}`);break}}}_&&!_.relurl?(d.pop(),y-=_.duration,l.partList&&(l.fragmentHint=_)):l.partList&&(wO(E,_,f),E.cc=x,l.fragmentHint=E,I&&eG(E,I,l)),l.targetduration||(l.playlistParsingError=new Error("Missing Target Duration"));const J=d.length,de=d[0],xe=d[J-1];if(y+=l.skippedSegments*l.targetduration,y>0&&J&&xe){l.averagetargetduration=y/J;const we=xe.sn;l.endSN=we!=="initSegment"?we:0,l.live||(xe.endList=!0),D>0&&(T$e(d,D),de&&f.unshift(de))}return l.fragmentHint&&(y+=l.fragmentHint.duration),l.totalduration=y,f.length&&l.dateRangeTagCount&&de&&Pie(f,l),l.endCC=x,l}}function Pie(t,e){let r=t.length;if(!r)if(e.hasProgramDateTime){const c=e.fragments[e.fragments.length-1];t.push(c),r++}else return;const n=t[r-1],i=e.live?1/0:e.totalduration,a=Object.keys(e.dateRanges);for(let c=a.length;c--;){const u=e.dateRanges[a[c]],l=u.startDate.getTime();u.tagAnchor=n.ref;for(let d=r;d--;){var o;if(((o=t[d])==null?void 0:o.sn)<e.startSN)break;const f=j$e(e,l,t,d,i);if(f!==-1){u.tagAnchor=e.fragments[f].ref;break}}}}function j$e(t,e,r,n,i){const a=r[n];if(a){const c=a.programDateTime;if(e>=c||n===0){var o;const u=(((o=r[n+1])==null?void 0:o.start)||i)-a.start;if(e<=c+u*1e3){const l=r[n].sn-t.startSN;if(l<0)return-1;const d=t.fragments;if(d.length>r.length){const m=(r[n+1]||d[d.length-1]).sn-t.startSN;for(let p=m;p>l;p--){const g=d[p].programDateTime;if(e>=g&&e<g+d[p].duration*1e3)return p}}return l}}}return-1}function YK(t,e,r){var n,i;const a=new cc(t,r),o=(n=a.METHOD)!=null?n:"",c=a.URI,u=a.hexadecimalInteger("IV"),l=a.KEYFORMATVERSIONS,d=(i=a.KEYFORMAT)!=null?i:"identity";c&&a.IV&&!u&&Ho.error(`Invalid IV: ${a.IV}`);const f=c?FA.resolve(c,e):"",m=(l||"1").split("/").map(Number).filter(Number.isFinite);return new D0(o,f,d,m,u,a.KEYID)}function qK(t){const r=new cc(t).decimalFloatingPoint("TIME-OFFSET");return Xn(r)?r:null}function XK(t,e){let r=(t||"").split(/[ ,]+/).filter(n=>n);["video","audio","text"].forEach(n=>{const i=r.filter(a=>NF(a,n));i.length&&(e[`${n}Codec`]=i.map(a=>a.split("/")[0]).join(","),r=r.filter(a=>i.indexOf(a)===-1))}),e.unknownCodecs=r}function ZK(t,e,r){const n=e[r];n&&(t[r]=n)}function T$e(t,e){let r=t[e];for(let n=e;n--;){const i=t[n];if(!i)return;i.programDateTime=r.programDateTime-i.duration*1e3,r=i}}function wO(t,e,r){t.rawProgramDateTime?r.push(t):e!=null&&e.programDateTime&&(t.programDateTime=e.endProgramDateTime)}function JK(t,e,r,n){t.relurl=e.URI,e.BYTERANGE&&t.setByteRange(e.BYTERANGE),t.level=r,t.sn="initSegment",n&&(t.levelkeys=n),t.initSegment=null}function eG(t,e,r){t.levelkeys=e;const{encryptedFragments:n}=r;(!n.length||n[n.length-1].levelkeys!==e)&&Object.keys(e).some(i=>e[i].isCommonEncryption)&&n.push(t)}function Tp(t,e,r){t.playlistParsingError=new Error(`#EXT-X-${e} must not appear more than once (${r[0]})`)}function tG(t,e,r){t.playlistParsingError=new Error(`#EXT-X-${e} must appear before the first Media Segment (${r[0]})`)}function PI(t,e){const r=e.startPTS;if(Xn(r)){let n=0,i;e.sn>t.sn?(n=r-t.start,i=t):(n=t.start-r,i=e),i.duration!==n&&i.setDuration(n)}else e.sn>t.sn?t.cc===e.cc&&t.minEndPTS?e.setStart(t.start+(t.minEndPTS-t.start)):e.setStart(t.start+t.duration):e.setStart(Math.max(t.start-e.duration,0))}function Oie(t,e,r,n,i,a,o){n-r<=0&&(o.warn("Fragment should have a positive duration",e),n=r+e.duration,a=i+e.duration);let u=r,l=n;const d=e.startPTS,f=e.endPTS;if(Xn(d)){const w=Math.abs(d-r);t&&w>t.totalduration?o.warn(`media timestamps and playlist times differ by ${w}s for level ${e.level} ${t.url}`):Xn(e.deltaPTS)?e.deltaPTS=Math.max(w,e.deltaPTS):e.deltaPTS=w,u=Math.max(r,d),r=Math.min(r,d),i=e.startDTS!==void 0?Math.min(i,e.startDTS):i,l=Math.min(n,f),n=Math.max(n,f),a=e.endDTS!==void 0?Math.max(a,e.endDTS):a}const m=r-e.start;e.start!==0&&e.setStart(r),e.setDuration(n-e.start),e.startPTS=r,e.maxStartPTS=u,e.startDTS=i,e.endPTS=n,e.minEndPTS=l,e.endDTS=a;const p=e.sn;if(!t||p<t.startSN||p>t.endSN)return 0;let g;const y=p-t.startSN,x=t.fragments;for(x[y]=e,g=y;g>0;g--)PI(x[g],x[g-1]);for(g=y;g<x.length-1;g++)PI(x[g],x[g+1]);return t.fragmentHint&&PI(x[x.length-1],t.fragmentHint),t.PTSKnown=t.alignedSliding=!0,m}function C$e(t,e,r){if(t===e)return;let n=null;const i=t.fragments;for(let d=i.length-1;d>=0;d--){const f=i[d].initSegment;if(f){n=f;break}}t.fragmentHint&&delete t.fragmentHint.endPTS;let a;L$e(t,e,(d,f,m,p)=>{if((!e.startCC||e.skippedSegments)&&f.cc!==d.cc){const g=d.cc-f.cc;for(let y=m;y<p.length;y++)p[y].cc+=g;e.endCC=p[p.length-1].cc}Xn(d.startPTS)&&Xn(d.endPTS)&&(f.setStart(f.startPTS=d.startPTS),f.startDTS=d.startDTS,f.maxStartPTS=d.maxStartPTS,f.endPTS=d.endPTS,f.endDTS=d.endDTS,f.minEndPTS=d.minEndPTS,f.setDuration(d.endPTS-d.startPTS),f.duration&&(a=f),e.PTSKnown=e.alignedSliding=!0),d.hasStreams&&(f.elementaryStreams=d.elementaryStreams),f.loader=d.loader,d.hasStats&&(f.stats=d.stats),d.initSegment&&(f.initSegment=d.initSegment,n=d.initSegment)});const o=e.fragments,c=e.fragmentHint?o.concat(e.fragmentHint):o;if(n&&c.forEach(d=>{var f;d&&(!d.initSegment||d.initSegment.relurl===((f=n)==null?void 0:f.relurl))&&(d.initSegment=n)}),e.skippedSegments){if(e.deltaUpdateFailed=o.some(d=>!d),e.deltaUpdateFailed){r.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let d=e.skippedSegments;d--;)o.shift();e.startSN=o[0].sn}else{e.canSkipDateRanges&&(e.dateRanges=N$e(t.dateRanges,e,r));const d=t.fragments.filter(f=>f.rawProgramDateTime);if(t.hasProgramDateTime&&!e.hasProgramDateTime)for(let f=1;f<c.length;f++)c[f].programDateTime===null&&wO(c[f],c[f-1],d);Pie(d,e)}e.endCC=o[o.length-1].cc}if(!e.startCC){var u;const d=Mie(t,e.startSN-1);e.startCC=(u=d?.cc)!=null?u:o[0].cc}k$e(t.partList,e.partList,(d,f)=>{f.elementaryStreams=d.elementaryStreams,f.stats=d.stats}),a?Oie(e,a,a.startPTS,a.endPTS,a.startDTS,a.endDTS,r):Rie(t,e),o.length&&(e.totalduration=e.edge-o[0].start),e.driftStartTime=t.driftStartTime,e.driftStart=t.driftStart;const l=e.advancedDateTime;if(e.advanced&&l){const d=e.edge;e.driftStart||(e.driftStartTime=l,e.driftStart=d),e.driftEndTime=l,e.driftEnd=d}else e.driftEndTime=t.driftEndTime,e.driftEnd=t.driftEnd,e.advancedDateTime=t.advancedDateTime;e.requestScheduled===-1&&(e.requestScheduled=t.requestScheduled)}function N$e(t,e,r){const{dateRanges:n,recentlyRemovedDateranges:i}=e,a=nl({},t);i&&i.forEach(u=>{delete a[u]});const c=Object.keys(a).length;return c?(Object.keys(n).forEach(u=>{const l=a[u],d=new Nie(n[u].attr,l);d.isValid?(a[u]=d,l||(d.tagOrder+=c)):r.warn(`Ignoring invalid Playlist Delta Update DATERANGE tag: "${fl(n[u].attr)}"`)}),a):n}function k$e(t,e,r){if(t&&e){let n=0;for(let i=0,a=t.length;i<=a;i++){const o=t[i],c=e[i+n];o&&c&&o.index===c.index&&o.fragment.sn===c.fragment.sn?r(o,c):n--}}}function L$e(t,e,r){const n=e.skippedSegments,i=Math.max(t.startSN,e.startSN)-e.startSN,a=(t.fragmentHint?1:0)+(n?e.endSN:Math.min(t.endSN,e.endSN))-e.startSN,o=e.startSN-t.startSN,c=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments,u=t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments;for(let l=i;l<=a;l++){const d=u[o+l];let f=c[l];if(n&&!f&&d&&(f=e.fragments[l]=d),d&&f){r(d,f,l,c);const m=d.relurl,p=f.relurl;if(m&&I$e(m,p)){e.playlistParsingError=rG(`media sequence mismatch ${f.sn}:`,t,e,d,f);return}else if(d.cc!==f.cc){e.playlistParsingError=rG(`discontinuity sequence mismatch (${d.cc}!=${f.cc})`,t,e,d,f);return}}}}function rG(t,e,r,n,i){return new Error(`${t} ${i.url}
Playlist starting @${e.startSN}
${e.m3u8}

Playlist starting @${r.startSN}
${r.m3u8}`)}function Rie(t,e,r=!0){const n=e.startSN+e.skippedSegments-t.startSN,i=t.fragments,a=n>=0;let o=0;if(a&&n<i.length)o=i[n].start;else if(a&&e.startSN===t.endSN+1)o=t.fragmentEnd;else if(a&&r)o=t.fragmentStart+n*e.levelTargetDuration;else if(!e.skippedSegments&&e.fragmentStart===0)o=t.fragmentStart;else return;_O(e,o)}function _O(t,e){if(e){const r=t.fragments;for(let n=t.skippedSegments;n<r.length;n++)r[n].addStart(e);t.fragmentHint&&t.fragmentHint.addStart(e)}}function Die(t,e=1/0){let r=1e3*t.targetduration;if(t.updated){const n=t.fragments;if(n.length&&r*4>e){const a=n[n.length-1].duration*1e3;a<r&&(r=a)}}else r/=2;return Math.round(r)}function Mie(t,e,r){if(!t)return null;let n=t.fragments[e-t.startSN];return n||(n=t.fragmentHint,n&&n.sn===e)?n:e<t.startSN&&r&&r.sn===e?r:null}function nG(t,e,r){return t?Fie(t.partList,e,r):null}function Fie(t,e,r){if(t)for(let n=t.length;n--;){const i=t[n];if(i.index===r&&i.fragment.sn===e)return i}return null}function Uie(t){t.forEach((e,r)=>{var n;(n=e.details)==null||n.fragments.forEach(i=>{i.level=r,i.initSegment&&(i.initSegment.level=r)})})}function I$e(t,e){return t!==e&&e?iG(t)!==iG(e):!1}function iG(t){return t.replace(/\?[^?]*$/,"")}function v2(t,e){for(let n=0,i=t.length;n<i;n++){var r;if(((r=t[n])==null?void 0:r.cc)===e)return t[n]}return null}function B$e(t,e){return!!(t&&e.startCC<t.endCC&&e.endCC>t.startCC)}function sG(t,e){const r=t.start+e;t.startPTS=r,t.setStart(r),t.endPTS=r+t.duration}function $ie(t,e){const r=e.fragments;for(let n=0,i=r.length;n<i;n++)sG(r[n],t);e.fragmentHint&&sG(e.fragmentHint,t),e.alignedSliding=!0}function P$e(t,e){t&&(Hie(e,t),e.alignedSliding||cN(e,t),!e.alignedSliding&&!e.skippedSegments&&Rie(t,e,!1))}function Hie(t,e){if(!B$e(e,t))return;const r=Math.min(e.endCC,t.endCC),n=v2(e.fragments,r),i=v2(t.fragments,r);if(!n||!i)return;Ho.log(`Aligning playlist at start of dicontinuity sequence ${r}`);const a=n.start-i.start;$ie(a,t)}function cN(t,e){if(!t.hasProgramDateTime||!e.hasProgramDateTime)return;const r=t.fragments,n=e.fragments;if(!r.length||!n.length)return;let i,a;const o=Math.min(e.endCC,t.endCC);e.startCC<o&&t.startCC<o&&(i=v2(n,o),a=v2(r,o)),(!i||!a)&&(i=n[Math.floor(n.length/2)],a=v2(r,i.cc)||r[Math.floor(r.length/2)]);const c=i.programDateTime,u=a.programDateTime;if(!c||!u)return;const l=(u-c)/1e3-(a.start-i.start);$ie(l,t)}function xh(t,e,r){Qh(t,e,r),t.addEventListener(e,r)}function Qh(t,e,r){t.removeEventListener(e,r)}const O$e={toString:function(t){let e="";const r=t.length;for(let n=0;n<r;n++)e+=`[${t.start(n).toFixed(3)}-${t.end(n).toFixed(3)}]`;return e}},qr={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"};class RF extends Tie{constructor(e,r,n,i,a){super(i,e.logger),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state=qr.STOPPED,this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.buffering=!0,this.loadingParts=!1,this.loopSn=void 0,this.onMediaSeeking=()=>{const{config:o,fragCurrent:c,media:u,mediaBuffer:l,state:d}=this,f=u?u.currentTime:0,m=Hs.bufferInfo(l||u,f,o.maxBufferHole),p=!m.len;if(this.log(`Media seeking to ${Xn(f)?f.toFixed(3):f}, state: ${d}, ${p?"out of":"in"} buffer`),this.state===qr.ENDED)this.resetLoadingState();else if(c){const g=o.maxFragLookUpTolerance,y=c.start-g,x=c.start+c.duration+g;if(p||x<m.start||y>m.end){const w=f>x;(f<y||w)&&(w&&c.loader&&(this.log(`Cancelling fragment load for seek (sn: ${c.sn})`),c.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}if(u){this.fragmentTracker.removeFragmentsInRange(f,1/0,this.playlistType,!0);const g=this.lastCurrentTime;if(f>g&&(this.lastCurrentTime=f),!this.loadingParts){const y=Math.max(m.end,f),x=this.shouldLoadParts(this.getLevelDetails(),y);x&&(this.log(`LL-Part loading ON after seeking to ${f.toFixed(2)} with buffer @${y.toFixed(2)}`),this.loadingParts=x)}}this.hls.hasEnoughToStart||(this.log(`Setting ${p?"startPosition":"nextLoadPosition"} to ${f} for seek without enough to start`),this.nextLoadPosition=f,p&&(this.startPosition=f)),p&&this.state===qr.IDLE&&this.tickImmediate()},this.onMediaEnded=()=>{this.log("setting startPosition to 0 because media ended"),this.startPosition=this.lastCurrentTime=0},this.playlistType=a,this.hls=e,this.fragmentLoader=new c$e(e.config),this.keyLoader=n,this.fragmentTracker=r,this.config=e.config,this.decrypter=new IF(e.config)}registerListeners(){const{hls:e}=this;e.on(Be.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(Be.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(Be.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Be.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(Be.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(Be.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(Be.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(Be.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Be.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(Be.ERROR,this.onError,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(e){}stopLoad(){if(this.state===qr.STOPPED)return;this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);const e=this.fragCurrent;e!=null&&e.loader&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=qr.STOPPED}get startPositionValue(){const{nextLoadPosition:e,startPosition:r}=this;return r===-1&&e?e:r}get bufferingEnabled(){return this.buffering}pauseBuffering(){this.buffering=!1}resumeBuffering(){this.buffering=!0}get inFlightFrag(){return{frag:this.fragCurrent,state:this.state}}_streamEnded(e,r){if(r.live||!this.media)return!1;const n=e.end||0,i=this.config.timelineOffset||0;if(n<=i)return!1;const a=e.buffered;this.config.maxBufferHole&&a&&a.length>1&&(e=Hs.bufferedInfo(a,e.start,0));const o=e.nextStart;if(o&&o>i&&o<r.edge||this.media.currentTime<e.start)return!1;const u=r.partList;if(u!=null&&u.length){const d=u[u.length-1];return Hs.isBuffered(this.media,d.start+d.duration/2)}const l=r.fragments[r.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(l)}getLevelDetails(){if(this.levels&&this.levelLastLoaded!==null)return this.levelLastLoaded.details}get timelineOffset(){const e=this.config.timelineOffset;if(e){var r;return((r=this.getLevelDetails())==null?void 0:r.appliedTimelineOffset)||e}return 0}onMediaAttached(e,r){const n=this.media=this.mediaBuffer=r.media;xh(n,"seeking",this.onMediaSeeking),xh(n,"ended",this.onMediaEnded);const i=this.config;this.levels&&i.autoStartLoad&&this.state===qr.STOPPED&&this.startLoad(i.startPosition)}onMediaDetaching(e,r){const n=!!r.transferMedia,i=this.media;if(i!==null){if(i.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),Qh(i,"seeking",this.onMediaSeeking),Qh(i,"ended",this.onMediaEnded),this.keyLoader&&!n&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loopSn=void 0,n){this.resetLoadingState(),this.resetTransmuxer();return}this.loadingParts=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}}onManifestLoading(){this.initPTS=[],this.levels=this.levelLastLoaded=this.fragCurrent=null,this.lastCurrentTime=this.startPosition=0,this.startFragRequested=!1}onError(e,r){}onManifestLoaded(e,r){this.startTimeOffset=r.startTimeOffset}onHandlerDestroying(){this.stopLoad(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),super.onHandlerDestroying(),this.hls=this.onMediaSeeking=this.onMediaEnded=null}onHandlerDestroyed(){this.state=qr.STOPPED,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(e,r,n){this.startFragRequested=!0,this._loadFragForPlayback(e,r,n)}_loadFragForPlayback(e,r,n){const i=a=>{const o=a.frag;if(this.fragContextChanged(o)){this.warn(`${o.type} sn: ${o.sn}${a.part?" part: "+a.part.index:""} of ${this.fragInfo(o,!1,a.part)}) was dropped during download.`),this.fragmentTracker.removeFragment(o);return}o.stats.chunkCount++,this._handleFragmentLoadProgress(a)};this._doFragLoad(e,r,n,i).then(a=>{if(!a)return;const o=this.state,c=a.frag;if(this.fragContextChanged(c)){(o===qr.FRAG_LOADING||!this.fragCurrent&&o===qr.PARSING)&&(this.fragmentTracker.removeFragment(c),this.state=qr.IDLE);return}"payload"in a&&(this.log(`Loaded ${c.type} sn: ${c.sn} of ${this.playlistLabel()} ${c.level}`),this.hls.trigger(Be.FRAG_LOADED,a)),this._handleFragmentLoadComplete(a)}).catch(a=>{this.state===qr.STOPPED||this.state===qr.ERROR||(this.warn(`Frag error: ${a?.message||a}`),this.resetFragmentLoading(e))})}clearTrackerIfNeeded(e){var r;const{fragmentTracker:n}=this;if(n.getState(e)===$u.APPENDING){const a=e.type,o=this.getFwdBufferInfo(this.mediaBuffer,a),c=Math.max(e.duration,o?o.len:this.config.maxBufferLength),u=this.backtrackFragment;((u?e.sn-u.sn:0)===1||this.reduceMaxBufferLength(c,e.duration))&&n.removeFragment(e)}else((r=this.mediaBuffer)==null?void 0:r.buffered.length)===0?n.removeAllFragments():n.hasParts(e.type)&&(n.detectPartialFragments({frag:e,part:null,stats:e.stats,id:e.type}),n.getState(e)===$u.PARTIAL&&n.removeFragment(e))}checkLiveUpdate(e){if(e.updated&&!e.live){const r=e.fragments[e.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:r,part:null,stats:r.stats,id:r.type})}e.fragments[0]||(e.deltaUpdateFailed=!0)}waitForLive(e){const r=e.details;return r?.live&&r.type!=="EVENT"&&(this.levelLastLoaded!==e||r.expired)}flushMainBuffer(e,r,n=null){if(!(e-r))return;const i={startOffset:e,endOffset:r,type:n};this.hls.trigger(Be.BUFFER_FLUSHING,i)}_loadInitSegment(e,r){this._doFragLoad(e,r).then(n=>{const i=n?.frag;if(!i||this.fragContextChanged(i)||!this.levels)throw new Error("init load aborted");return n}).then(n=>{const{hls:i}=this,{frag:a,payload:o}=n,c=a.decryptdata;if(o&&o.byteLength>0&&c!=null&&c.key&&c.iv&&Sb(c.method)){const u=self.performance.now();return this.decrypter.decrypt(new Uint8Array(o),c.key.buffer,c.iv.buffer,PF(c.method)).catch(l=>{throw i.trigger(Be.ERROR,{type:Oi.MEDIA_ERROR,details:br.FRAG_DECRYPT_ERROR,fatal:!1,error:l,reason:l.message,frag:a}),l}).then(l=>{const d=self.performance.now();return i.trigger(Be.FRAG_DECRYPTED,{frag:a,payload:l,stats:{tstart:u,tdecrypt:d}}),n.payload=l,this.completeInitSegmentLoad(n)})}return this.completeInitSegmentLoad(n)}).catch(n=>{this.state===qr.STOPPED||this.state===qr.ERROR||(this.warn(n),this.resetFragmentLoading(e))})}completeInitSegmentLoad(e){const{levels:r}=this;if(!r)throw new Error("init load aborted, missing levels");const n=e.frag.stats;this.state!==qr.STOPPED&&(this.state=qr.IDLE),e.frag.data=new Uint8Array(e.payload),n.parsing.start=n.buffering.start=self.performance.now(),n.parsing.end=n.buffering.end=self.performance.now(),this.tick()}unhandledEncryptionError(e,r){var n,i;const a=e.tracks;if(a&&!r.encrypted&&((n=a.audio)!=null&&n.encrypted||(i=a.video)!=null&&i.encrypted)&&(!this.config.emeEnabled||!this.keyLoader.emeController)){const o=this.media,c=new Error(`Encrypted track with no key in ${this.fragInfo(r)} (media ${o?"attached mediaKeys: "+o.mediaKeys:"detached"})`);return this.warn(c.message),!o||o.mediaKeys?!1:(this.hls.trigger(Be.ERROR,{type:Oi.KEY_SYSTEM_ERROR,details:br.KEY_SYSTEM_NO_KEYS,fatal:!1,error:c,frag:r}),this.resetTransmuxer(),!0)}return!1}fragContextChanged(e){const{fragCurrent:r}=this;return!e||!r||e.sn!==r.sn||e.level!==r.level}fragBufferedComplete(e,r){const n=this.mediaBuffer?this.mediaBuffer:this.media;if(this.log(`Buffered ${e.type} sn: ${e.sn}${r?" part: "+r.index:""} of ${this.fragInfo(e,!1,r)} > buffer:${n?O$e.toString(Hs.getBuffered(n)):"(detached)"})`),eu(e)){var i;if(e.type!==fi.SUBTITLE){const o=e.elementaryStreams;if(!Object.keys(o).some(c=>!!o[c])){this.state=qr.IDLE;return}}const a=(i=this.levels)==null?void 0:i[e.level];a!=null&&a.fragmentError&&(this.log(`Resetting level fragment error count of ${a.fragmentError} on frag buffered`),a.fragmentError=0)}this.state=qr.IDLE}_handleFragmentLoadComplete(e){const{transmuxer:r}=this;if(!r)return;const{frag:n,part:i,partsLoaded:a}=e,o=!a||a.length===0||a.some(u=>!u),c=new BF(n.level,n.sn,n.stats.chunkCount+1,0,i?i.index:-1,!o);r.flush(c)}_handleFragmentLoadProgress(e){}_doFragLoad(e,r,n=null,i){var a;this.fragCurrent=e;const o=r.details;if(!this.levels||!o)throw new Error(`frag load aborted, missing level${o?"":" detail"}s`);let c=null;if(e.encrypted&&!((a=e.decryptdata)!=null&&a.key)){if(this.log(`Loading key for ${e.sn} of [${o.startSN}-${o.endSN}], ${this.playlistLabel()} ${e.level}`),this.state=qr.KEY_LOADING,this.fragCurrent=e,c=this.keyLoader.load(e).then(m=>{if(!this.fragContextChanged(m.frag))return this.hls.trigger(Be.KEY_LOADED,m),this.state===qr.KEY_LOADING&&(this.state=qr.IDLE),m}),this.hls.trigger(Be.KEY_LOADING,{frag:e}),this.fragCurrent===null)return this.log("context changed in KEY_LOADING"),Promise.resolve(null)}else e.encrypted||(c=this.keyLoader.loadClear(e,o.encryptedFragments,this.startFragRequested),c&&this.log("[eme] blocking frag load until media-keys acquired"));const u=this.fragPrevious;if(eu(e)&&(!u||e.sn!==u.sn)){const m=this.shouldLoadParts(r.details,e.end);m!==this.loadingParts&&(this.log(`LL-Part loading ${m?"ON":"OFF"} loading sn ${u?.sn}->${e.sn}`),this.loadingParts=m)}if(n=Math.max(e.start,n||0),this.loadingParts&&eu(e)){const m=o.partList;if(m&&i){n>o.fragmentEnd&&o.fragmentHint&&(e=o.fragmentHint);const p=this.getNextPart(m,e,n);if(p>-1){const g=m[p];e=this.fragCurrent=g.fragment,this.log(`Loading ${e.type} sn: ${e.sn} part: ${g.index} (${p}/${m.length-1}) of ${this.fragInfo(e,!1,g)}) cc: ${e.cc} [${o.startSN}-${o.endSN}], target: ${parseFloat(n.toFixed(3))}`),this.nextLoadPosition=g.start+g.duration,this.state=qr.FRAG_LOADING;let y;return c?y=c.then(x=>!x||this.fragContextChanged(x.frag)?null:this.doFragPartsLoad(e,g,r,i)).catch(x=>this.handleFragLoadError(x)):y=this.doFragPartsLoad(e,g,r,i).catch(x=>this.handleFragLoadError(x)),this.hls.trigger(Be.FRAG_LOADING,{frag:e,part:g,targetBufferTime:n}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):y}else if(!e.url||this.loadedEndOfParts(m,n))return Promise.resolve(null)}}if(eu(e)&&this.loadingParts){var l;this.log(`LL-Part loading OFF after next part miss @${n.toFixed(2)} Check buffer at sn: ${e.sn} loaded parts: ${(l=o.partList)==null?void 0:l.filter(m=>m.loaded).map(m=>`[${m.start}-${m.end}]`)}`),this.loadingParts=!1}else if(!e.url)return Promise.resolve(null);this.log(`Loading ${e.type} sn: ${e.sn} of ${this.fragInfo(e,!1)}) cc: ${e.cc} ${"["+o.startSN+"-"+o.endSN+"]"}, target: ${parseFloat(n.toFixed(3))}`),Xn(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=qr.FRAG_LOADING;const d=this.config.progressive&&e.type!==fi.SUBTITLE;let f;return d&&c?f=c.then(m=>!m||this.fragContextChanged(m.frag)?null:this.fragmentLoader.load(e,i)).catch(m=>this.handleFragLoadError(m)):f=Promise.all([this.fragmentLoader.load(e,d?i:void 0),c]).then(([m])=>(!d&&i&&i(m),m)).catch(m=>this.handleFragLoadError(m)),this.hls.trigger(Be.FRAG_LOADING,{frag:e,targetBufferTime:n}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):f}doFragPartsLoad(e,r,n,i){return new Promise((a,o)=>{var c;const u=[],l=(c=n.details)==null?void 0:c.partList,d=f=>{this.fragmentLoader.loadPart(e,f,i).then(m=>{u[f.index]=m;const p=m.part;this.hls.trigger(Be.FRAG_LOADED,m);const g=nG(n.details,e.sn,f.index+1)||Fie(l,e.sn,f.index+1);if(g)d(g);else return a({frag:e,part:p,partsLoaded:u})}).catch(o)};d(r)})}handleFragLoadError(e){if("data"in e){const r=e.data;r.frag&&r.details===br.INTERNAL_ABORTED?this.handleFragLoadAborted(r.frag,r.part):r.frag&&r.type===Oi.KEY_SYSTEM_ERROR?(r.frag.abortRequests(),this.resetStartWhenNotLoaded(),this.resetFragmentLoading(r.frag)):this.hls.trigger(Be.ERROR,r)}else this.hls.trigger(Be.ERROR,{type:Oi.OTHER_ERROR,details:br.INTERNAL_EXCEPTION,err:e,error:e,fatal:!0});return null}_handleTransmuxerFlush(e){const r=this.getCurrentContext(e);if(!r||this.state!==qr.PARSING){!this.fragCurrent&&this.state!==qr.STOPPED&&this.state!==qr.ERROR&&(this.state=qr.IDLE);return}const{frag:n,part:i,level:a}=r,o=self.performance.now();n.stats.parsing.end=o,i&&(i.stats.parsing.end=o);const c=this.getLevelDetails(),l=c&&n.sn>c.endSN||this.shouldLoadParts(c,n.end);l!==this.loadingParts&&(this.log(`LL-Part loading ${l?"ON":"OFF"} after parsing segment ending @${n.end.toFixed(2)}`),this.loadingParts=l),this.updateLevelTiming(n,i,a,e.partial)}shouldLoadParts(e,r){if(this.config.lowLatencyMode){if(!e)return this.loadingParts;if(e.partList){var n;const a=e.partList[0];if(a.fragment.type===fi.SUBTITLE)return!1;const o=a.end+(((n=e.fragmentHint)==null?void 0:n.duration)||0);if(r>=o){var i;if((this.hls.hasEnoughToStart?((i=this.media)==null?void 0:i.currentTime)||this.lastCurrentTime:this.getLoadPosition())>a.start-a.fragment.duration)return!0}}}return!1}getCurrentContext(e){const{levels:r,fragCurrent:n}=this,{level:i,sn:a,part:o}=e;if(!(r!=null&&r[i]))return this.warn(`Levels object was unset while buffering fragment ${a} of ${this.playlistLabel()} ${i}. The current chunk will not be buffered.`),null;const c=r[i],u=c.details,l=o>-1?nG(u,a,o):null,d=l?l.fragment:Mie(u,a,n);return d?(n&&n!==d&&(d.stats=n.stats),{frag:d,part:l,level:c}):null}bufferFragmentData(e,r,n,i,a){if(this.state!==qr.PARSING)return;const{data1:o,data2:c}=e;let u=o;if(c&&(u=am(o,c)),!u.length)return;const l=this.initPTS[r.cc],d=l?-l.baseTime/l.timescale:void 0,f={type:e.type,frag:r,part:n,chunkMeta:i,offset:d,parent:r.type,data:u};if(this.hls.trigger(Be.BUFFER_APPENDING,f),e.dropped&&e.independent&&!n){if(a)return;this.flushBufferGap(r)}}flushBufferGap(e){const r=this.media;if(!r)return;if(!Hs.isBuffered(r,r.currentTime)){this.flushMainBuffer(0,e.start);return}const n=r.currentTime,i=Hs.bufferInfo(r,n,0),a=e.duration,o=Math.min(this.config.maxFragLookUpTolerance*2,a*.25),c=Math.max(Math.min(e.start-o,i.end-o),n+o);e.start-c>o&&this.flushMainBuffer(c,e.start)}getFwdBufferInfo(e,r){var n;const i=this.getLoadPosition();if(!Xn(i))return null;const o=this.lastCurrentTime>i||(n=this.media)!=null&&n.paused?0:this.config.maxBufferHole;return this.getFwdBufferInfoAtPos(e,i,r,o)}getFwdBufferInfoAtPos(e,r,n,i){const a=Hs.bufferInfo(e,r,i);if(a.len===0&&a.nextStart!==void 0){const o=this.fragmentTracker.getBufferedFrag(r,n);if(o&&(a.nextStart<=o.end||o.gap)){const c=Math.max(Math.min(a.nextStart,o.end)-r,i);return Hs.bufferInfo(e,r,c)}}return a}getMaxBufferLength(e){const{config:r}=this;let n;return e?n=Math.max(8*r.maxBufferSize/e,r.maxBufferLength):n=r.maxBufferLength,Math.min(n,r.maxMaxBufferLength)}reduceMaxBufferLength(e,r){const n=this.config,i=Math.max(Math.min(e-r,n.maxBufferLength),r),a=Math.max(e-r*3,n.maxMaxBufferLength/2,i);return a>=i?(n.maxMaxBufferLength=a,this.warn(`Reduce max buffer length to ${a}s`),!0):!1}getAppendedFrag(e,r=fi.MAIN){const n=this.fragmentTracker?this.fragmentTracker.getAppendedFrag(e,r):null;return n&&"fragment"in n?n.fragment:n}getNextFragment(e,r){const n=r.fragments,i=n.length;if(!i)return null;const{config:a}=this,o=n[0].start,c=a.lowLatencyMode&&!!r.partList;let u=null;if(r.live){const f=a.initialLiveManifestSize;if(i<f)return this.warn(`Not enough fragments to start playback (have: ${i}, need: ${f})`),null;if(!r.PTSKnown&&!this.startFragRequested&&this.startPosition===-1||e<o){var l;c&&!this.loadingParts&&(this.log("LL-Part loading ON for initial live fragment"),this.loadingParts=!0),u=this.getInitialLiveFragment(r);const m=this.hls.startPosition,p=this.hls.liveSyncPosition,g=u?(m!==-1&&m>=o?m:p)||u.start:e;this.log(`Setting startPosition to ${g} to match start frag at live edge. mainStart: ${m} liveSyncPosition: ${p} frag.start: ${(l=u)==null?void 0:l.start}`),this.startPosition=this.nextLoadPosition=g}}else e<=o&&(u=n[0]);if(!u){const f=this.loadingParts?r.partEnd:r.fragmentEnd;u=this.getFragmentAtPosition(e,f,r)}let d=this.filterReplacedPrimary(u,r);if(!d&&u){const f=u.sn-r.startSN;d=this.filterReplacedPrimary(n[f+1]||null,r)}return this.mapToInitFragWhenRequired(d)}isLoopLoading(e,r){const n=this.fragmentTracker.getState(e);return(n===$u.OK||n===$u.PARTIAL&&!!e.gap)&&this.nextLoadPosition>r}getNextFragmentLoopLoading(e,r,n,i,a){let o=null;if(e.gap&&(o=this.getNextFragment(this.nextLoadPosition,r),o&&!o.gap&&n.nextStart)){const c=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,n.nextStart,i,0);if(c!==null&&n.len+c.len>=a){const u=o.sn;return this.loopSn!==u&&(this.log(`buffer full after gaps in "${i}" playlist starting at sn: ${u}`),this.loopSn=u),null}}return this.loopSn=void 0,o}get primaryPrefetch(){if(aG(this.config)){var e;if((e=this.hls.interstitialsManager)==null||(e=e.playingItem)==null?void 0:e.event)return!0}return!1}filterReplacedPrimary(e,r){if(!e)return e;if(aG(this.config)&&e.type!==fi.SUBTITLE){const n=this.hls.interstitialsManager,i=n?.bufferingItem;if(i){const o=i.event;if(o){if(o.appendInPlace||Math.abs(e.start-i.start)>1||i.start===0)return null}else if(e.end<=i.start&&r?.live===!1||e.start>i.end&&i.nextEvent&&(i.nextEvent.appendInPlace||e.start-i.end>1))return null}const a=n?.playerQueue;if(a)for(let o=a.length;o--;){const c=a[o].interstitial;if(c.appendInPlace&&e.start>=c.startTime&&e.end<=c.resumeTime)return null}}return e}mapToInitFragWhenRequired(e){return e!=null&&e.initSegment&&!e.initSegment.data&&!this.bitrateTest?e.initSegment:e}getNextPart(e,r,n){let i=-1,a=!1,o=!0;for(let c=0,u=e.length;c<u;c++){const l=e[c];if(o=o&&!l.independent,i>-1&&n<l.start)break;const d=l.loaded;d?i=-1:(a||(l.independent||o)&&l.fragment===r)&&(l.fragment!==r&&this.warn(`Need buffer at ${n} but next unloaded part starts at ${l.start}`),i=c),a=d}return i}loadedEndOfParts(e,r){let n;for(let i=e.length;i--;){if(n=e[i],!n.loaded)return!1;if(r>n.start)return!0}return!1}getInitialLiveFragment(e){const r=e.fragments,n=this.fragPrevious;let i=null;if(n){if(e.hasProgramDateTime&&(this.log(`Live playlist, switching playlist, load frag with same PDT: ${n.programDateTime}`),i=X7e(r,n.endProgramDateTime,this.config.maxFragLookUpTolerance)),!i){const a=n.sn+1;if(a>=e.startSN&&a<=e.endSN){const o=r[a-e.startSN];n.cc===o.cc&&(i=o,this.log(`Live playlist, switching playlist, load frag with next SN: ${i.sn}`))}i||(i=Eie(e,n.cc,n.end),i&&this.log(`Live playlist, switching playlist, load frag with same CC: ${i.sn}`))}}else{const a=this.hls.liveSyncPosition;a!==null&&(i=this.getFragmentAtPosition(a,this.bitrateTest?e.fragmentEnd:e.edge,e))}return i}getFragmentAtPosition(e,r,n){const{config:i}=this;let{fragPrevious:a}=this,{fragments:o,endSN:c}=n;const{fragmentHint:u}=n,{maxFragLookUpTolerance:l}=i,d=n.partList,f=!!(this.loadingParts&&d!=null&&d.length&&u);f&&!this.bitrateTest&&d[d.length-1].fragment.sn===u.sn&&(o=o.concat(u),c=u.sn);let m;if(e<r){var p;const y=e<this.lastCurrentTime||e>r-l||(p=this.media)!=null&&p.paused||!this.startFragRequested?0:l;m=Ty(a,o,e,y)}else m=o[o.length-1];if(m){const g=m.sn-n.startSN,y=this.fragmentTracker.getState(m);if((y===$u.OK||y===$u.PARTIAL&&m.gap)&&(a=m),a&&m.sn===a.sn&&(!f||d[0].fragment.sn>m.sn||!n.live)&&m.level===a.level){const w=o[g+1];m.sn<c&&this.fragmentTracker.getState(w)!==$u.OK?m=w:m=null}}return m}alignPlaylists(e,r,n){const i=e.fragments.length;if(!i)return this.warn("No fragments in live playlist"),0;const a=e.fragmentStart,o=!r,c=e.alignedSliding&&Xn(a);if(o||!c&&!a){P$e(n,e);const u=e.fragmentStart;return this.log(`Live playlist sliding: ${u.toFixed(2)} start-sn: ${r?r.startSN:"na"}->${e.startSN} fragments: ${i}`),u}return a}waitForCdnTuneIn(e){return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,e.partTarget*3)}setStartPosition(e,r){let n=this.startPosition;n<r&&(n=-1);const i=this.timelineOffset;if(n===-1){const a=this.startTimeOffset!==null,o=a?this.startTimeOffset:e.startTimeOffset;o!==null&&Xn(o)?(n=r+o,o<0&&(n+=e.edge),n=Math.min(Math.max(r,n),r+e.totalduration),this.log(`Setting startPosition to ${n} for start time offset ${o} found in ${a?"multivariant":"media"} playlist`),this.startPosition=n):e.live?(n=this.hls.liveSyncPosition||r,this.log(`Setting startPosition to -1 to start at live edge ${n}`),this.startPosition=-1):(this.log("setting startPosition to 0 by default"),this.startPosition=n=0),this.lastCurrentTime=n+i}this.nextLoadPosition=n+i}getLoadPosition(){var e;const{media:r}=this;let n=0;return(e=this.hls)!=null&&e.hasEnoughToStart&&r?n=r.currentTime:this.nextLoadPosition>=0&&(n=this.nextLoadPosition),n}handleFragLoadAborted(e,r){this.transmuxer&&e.type===this.playlistType&&eu(e)&&e.stats.aborted&&(this.log(`Fragment ${e.sn}${r?" part "+r.index:""} of ${this.playlistLabel()} ${e.level} was aborted`),this.resetFragmentLoading(e))}resetFragmentLoading(e){(!this.fragCurrent||!this.fragContextChanged(e)&&this.state!==qr.FRAG_LOADING_WAITING_RETRY)&&(this.state=qr.IDLE)}onFragmentOrKeyLoadError(e,r){var n;if(r.chunkMeta&&!r.frag){const w=this.getCurrentContext(r.chunkMeta);w&&(r.frag=w.frag)}const i=r.frag;if(!i||i.type!==e||!this.levels)return;if(this.fragContextChanged(i)){var a;this.warn(`Frag load error must match current frag to retry ${i.url} > ${(a=this.fragCurrent)==null?void 0:a.url}`);return}const o=r.details===br.FRAG_GAP;o&&this.fragmentTracker.fragBuffered(i,!0);const c=r.errorAction;if(!c){this.state=qr.ERROR;return}const{action:u,flags:l,retryCount:d=0,retryConfig:f}=c,m=!!f,p=m&&u===Ud.RetryRequest,g=m&&!c.resolved&&l===hf.MoveAllAlternatesMatchingHost,y=(n=this.hls.latestLevelDetails)==null?void 0:n.live;if(!p&&g&&eu(i)&&!i.endList&&y&&!jie(r))this.resetFragmentErrors(e),this.treatAsGap(i),c.resolved=!0;else if((p||g)&&d<f.maxNumRetry){var x;const w=yO((x=r.response)==null?void 0:x.code),_=LF(f,d);if(this.resetStartWhenNotLoaded(),this.retryDate=self.performance.now()+_,this.state=qr.FRAG_LOADING_WAITING_RETRY,c.resolved=!0,w){this.log("Waiting for connection (offline)"),this.retryDate=1/0,r.reason="offline";return}this.warn(`Fragment ${i.sn} of ${e} ${i.level} errored with ${r.details}, retrying loading ${d+1}/${f.maxNumRetry} in ${_}ms`)}else if(f)if(this.resetFragmentErrors(e),d<f.maxNumRetry)!o&&u!==Ud.RemoveAlternatePermanently&&(c.resolved=!0);else{this.warn(`${r.details} reached or exceeded max retry (${d})`);return}else u===Ud.SendAlternateToPenaltyBox?this.state=qr.WAITING_LEVEL:this.state=qr.ERROR;this.tickImmediate()}checkRetryDate(){const e=self.performance.now(),r=this.retryDate,n=r===1/0;(!r||e>=r||n&&!yO(0))&&(n&&this.log("Connection restored (online)"),this.resetStartWhenNotLoaded(),this.state=qr.IDLE)}reduceLengthAndFlushBuffer(e){if(this.state===qr.PARSING||this.state===qr.PARSED){const r=e.frag,n=e.parent,i=this.getFwdBufferInfo(this.mediaBuffer,n),a=i&&i.len>.5;a&&this.reduceMaxBufferLength(i.len,r?.duration||10);const o=!a;return o&&this.warn(`Buffer full error while media.currentTime (${this.getLoadPosition()}) is not buffered, flush ${n} buffer`),r&&(this.fragmentTracker.removeFragment(r),this.nextLoadPosition=r.start),this.resetLoadingState(),o}return!1}resetFragmentErrors(e){e===fi.AUDIO&&(this.fragCurrent=null),this.hls.hasEnoughToStart||(this.startFragRequested=!1),this.state!==qr.STOPPED&&(this.state=qr.IDLE)}afterBufferFlushed(e,r,n){if(!e)return;const i=Hs.getBuffered(e);this.fragmentTracker.detectEvictedFragments(r,i,n),this.state===qr.ENDED&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state!==qr.STOPPED&&(this.state=qr.IDLE)}resetStartWhenNotLoaded(){if(!this.hls.hasEnoughToStart){this.startFragRequested=!1;const e=this.levelLastLoaded,r=e?e.details:null;r!=null&&r.live?(this.log("resetting startPosition for live start"),this.startPosition=-1,this.setStartPosition(r,r.fragmentStart),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(e){this.log(`Loading context changed while buffering sn ${e.sn} of ${this.playlistLabel()} ${e.level===-1?"<removed>":e.level}. This chunk will not be buffered.`),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(),this.resetLoadingState()}removeUnbufferedFrags(e=0){this.fragmentTracker.removeFragmentsInRange(e,1/0,this.playlistType,!1,!0)}updateLevelTiming(e,r,n,i){const a=n.details;if(!a){this.warn("level.details undefined");return}if(!Object.keys(e.elementaryStreams).reduce((u,l)=>{const d=e.elementaryStreams[l];if(d){const f=d.endPTS-d.startPTS;if(f<=0)return this.warn(`Could not parse fragment ${e.sn} ${l} duration reliably (${f})`),u||!1;const m=i?0:Oie(a,e,d.startPTS,d.endPTS,d.startDTS,d.endDTS,this);return this.hls.trigger(Be.LEVEL_PTS_UPDATED,{details:a,level:n,drift:m,type:l,frag:e,start:d.startPTS,end:d.endPTS}),!0}return u},!1)){var c;const u=((c=this.transmuxer)==null?void 0:c.error)===null;if((n.fragmentError===0||u&&(n.fragmentError<2||e.endList))&&this.treatAsGap(e,n),u){const l=new Error(`Found no media in fragment ${e.sn} of ${this.playlistLabel()} ${e.level} resetting transmuxer to fallback to playlist timing`);if(this.warn(l.message),this.hls.trigger(Be.ERROR,{type:Oi.MEDIA_ERROR,details:br.FRAG_PARSING_ERROR,fatal:!1,error:l,frag:e,reason:`Found no media in msn ${e.sn} of ${this.playlistLabel()} "${n.url}"`}),!this.hls)return;this.resetTransmuxer()}}this.state=qr.PARSED,this.log(`Parsed ${e.type} sn: ${e.sn}${r?" part: "+r.index:""} of ${this.fragInfo(e,!1,r)})`),this.hls.trigger(Be.FRAG_PARSED,{frag:e,part:r})}playlistLabel(){return this.playlistType===fi.MAIN?"level":"track"}fragInfo(e,r=!0,n){var i,a;return`${this.playlistLabel()} ${e.level} (${n?"part":"frag"}:[${((i=r&&!n?e.startPTS:(n||e).start)!=null?i:NaN).toFixed(3)}-${((a=r&&!n?e.endPTS:(n||e).end)!=null?a:NaN).toFixed(3)}]${n&&e.type==="main"?"INDEPENDENT="+(n.independent?"YES":"NO"):""}`}treatAsGap(e,r){r&&r.fragmentError++,e.gap=!0,this.fragmentTracker.removeFragment(e),this.fragmentTracker.fragBuffered(e,!0)}resetTransmuxer(){var e;(e=this.transmuxer)==null||e.reset()}recoverWorkerError(e){e.event==="demuxerWorker"&&(this.fragmentTracker.removeAllFragments(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),this.resetStartWhenNotLoaded(),this.resetLoadingState())}set state(e){const r=this._state;r!==e&&(this._state=e,this.log(`${r}->${e}`))}get state(){return this._state}}function aG(t){return!!t.interstitialsController&&t.enableInterstitialPlayback!==!1}class Qie{constructor(){this.chunks=[],this.dataLength=0}push(e){this.chunks.push(e),this.dataLength+=e.length}flush(){const{chunks:e,dataLength:r}=this;let n;if(e.length)e.length===1?n=e[0]:n=R$e(e,r);else return new Uint8Array(0);return this.reset(),n}reset(){this.chunks.length=0,this.dataLength=0}}function R$e(t,e){const r=new Uint8Array(e);let n=0;for(let i=0;i<t.length;i++){const a=t[i];r.set(a,n),n+=a.length}return r}var OI={exports:{}},oG;function D$e(){return oG||(oG=1,(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(u,l,d){this.fn=u,this.context=l,this.once=d||!1}function a(u,l,d,f,m){if(typeof d!="function")throw new TypeError("The listener must be a function");var p=new i(d,f||u,m),g=r?r+l:l;return u._events[g]?u._events[g].fn?u._events[g]=[u._events[g],p]:u._events[g].push(p):(u._events[g]=p,u._eventsCount++),u}function o(u,l){--u._eventsCount===0?u._events=new n:delete u._events[l]}function c(){this._events=new n,this._eventsCount=0}c.prototype.eventNames=function(){var l=[],d,f;if(this._eventsCount===0)return l;for(f in d=this._events)e.call(d,f)&&l.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(d)):l},c.prototype.listeners=function(l){var d=r?r+l:l,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var m=0,p=f.length,g=new Array(p);m<p;m++)g[m]=f[m].fn;return g},c.prototype.listenerCount=function(l){var d=r?r+l:l,f=this._events[d];return f?f.fn?1:f.length:0},c.prototype.emit=function(l,d,f,m,p,g){var y=r?r+l:l;if(!this._events[y])return!1;var x=this._events[y],w=arguments.length,_,E;if(x.fn){switch(x.once&&this.removeListener(l,x.fn,void 0,!0),w){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,d),!0;case 3:return x.fn.call(x.context,d,f),!0;case 4:return x.fn.call(x.context,d,f,m),!0;case 5:return x.fn.call(x.context,d,f,m,p),!0;case 6:return x.fn.call(x.context,d,f,m,p,g),!0}for(E=1,_=new Array(w-1);E<w;E++)_[E-1]=arguments[E];x.fn.apply(x.context,_)}else{var N=x.length,C;for(E=0;E<N;E++)switch(x[E].once&&this.removeListener(l,x[E].fn,void 0,!0),w){case 1:x[E].fn.call(x[E].context);break;case 2:x[E].fn.call(x[E].context,d);break;case 3:x[E].fn.call(x[E].context,d,f);break;case 4:x[E].fn.call(x[E].context,d,f,m);break;default:if(!_)for(C=1,_=new Array(w-1);C<w;C++)_[C-1]=arguments[C];x[E].fn.apply(x[E].context,_)}}return!0},c.prototype.on=function(l,d,f){return a(this,l,d,f,!1)},c.prototype.once=function(l,d,f){return a(this,l,d,f,!0)},c.prototype.removeListener=function(l,d,f,m){var p=r?r+l:l;if(!this._events[p])return this;if(!d)return o(this,p),this;var g=this._events[p];if(g.fn)g.fn===d&&(!m||g.once)&&(!f||g.context===f)&&o(this,p);else{for(var y=0,x=[],w=g.length;y<w;y++)(g[y].fn!==d||m&&!g[y].once||f&&g[y].context!==f)&&x.push(g[y]);x.length?this._events[p]=x.length===1?x[0]:x:o(this,p)}return this},c.prototype.removeAllListeners=function(l){var d;return l?(d=r?r+l:l,this._events[d]&&o(this,d)):(this._events=new n,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=r,c.EventEmitter=c,t.exports=c})(OI)),OI.exports}var M$e=D$e(),DF=c7e(M$e);const h_="1.6.15",n1={};function F$e(){return typeof __HLS_WORKER_BUNDLE__=="function"}function U$e(){const t=n1[h_];if(t)return t.clientCount++,t;const e=new self.Blob([`var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(${__HLS_WORKER_BUNDLE__.toString()})(true);`],{type:"text/javascript"}),r=self.URL.createObjectURL(e),i={worker:new self.Worker(r),objectURL:r,clientCount:1};return n1[h_]=i,i}function $$e(t){const e=n1[t];if(e)return e.clientCount++,e;const r=new self.URL(t,self.location.href).href,i={worker:new self.Worker(r),scriptURL:r,clientCount:1};return n1[t]=i,i}function H$e(t){const e=n1[t||h_];if(e&&e.clientCount--===1){const{worker:n,objectURL:i}=e;delete n1[t||h_],i&&self.URL.revokeObjectURL(i),n.terminate()}}function zie(t,e){return e+10<=t.length&&t[e]===51&&t[e+1]===68&&t[e+2]===73&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128}function MF(t,e){return e+10<=t.length&&t[e]===73&&t[e+1]===68&&t[e+2]===51&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128}function W5(t,e){let r=0;return r=(t[e]&127)<<21,r|=(t[e+1]&127)<<14,r|=(t[e+2]&127)<<7,r|=t[e+3]&127,r}function f_(t,e){const r=e;let n=0;for(;MF(t,e);){n+=10;const i=W5(t,e+6);n+=i,zie(t,e+10)&&(n+=10),e+=n}if(n>0)return t.subarray(r,r+n)}function Q$e(t,e,r,n){const i=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],a=e[r+2],o=a>>2&15;if(o>12){const p=new Error(`invalid ADTS sampling index:${o}`);t.emit(Be.ERROR,Be.ERROR,{type:Oi.MEDIA_ERROR,details:br.FRAG_PARSING_ERROR,fatal:!0,error:p,reason:p.message});return}const c=(a>>6&3)+1,u=e[r+3]>>6&3|(a&1)<<2,l="mp4a.40."+c,d=i[o];let f=o;(c===5||c===29)&&(f-=3);const m=[c<<3|(f&14)>>1,(f&1)<<7|u<<3];return Ho.log(`manifest codec:${n}, parsed codec:${l}, channels:${u}, rate:${d} (ADTS object type:${c} sampling index:${o})`),{config:m,samplerate:d,channelCount:u,codec:l,parsedCodec:l,manifestCodec:n}}function Vie(t,e){return t[e]===255&&(t[e+1]&246)===240}function Kie(t,e){return t[e+1]&1?7:9}function FF(t,e){return(t[e+3]&3)<<11|t[e+4]<<3|(t[e+5]&224)>>>5}function z$e(t,e){return e+5<t.length}function uN(t,e){return e+1<t.length&&Vie(t,e)}function V$e(t,e){return z$e(t,e)&&Vie(t,e)&&FF(t,e)<=t.length-e}function K$e(t,e){if(uN(t,e)){const r=Kie(t,e);if(e+r>=t.length)return!1;const n=FF(t,e);if(n<=r)return!1;const i=e+n;return i===t.length||uN(t,i)}return!1}function Gie(t,e,r,n,i){if(!t.samplerate){const a=Q$e(e,r,n,i);if(!a)return;nl(t,a)}}function Wie(t){return 1024*9e4/t}function G$e(t,e){const r=Kie(t,e);if(e+r<=t.length){const n=FF(t,e)-r;if(n>0)return{headerLength:r,frameLength:n}}}function Yie(t,e,r,n,i){const a=Wie(t.samplerate),o=n+i*a,c=G$e(e,r);let u;if(c){const{frameLength:f,headerLength:m}=c,p=m+f,g=Math.max(0,r+p-e.length);g?(u=new Uint8Array(p-m),u.set(e.subarray(r+m,e.length),0)):u=e.subarray(r+m,r+p);const y={unit:u,pts:o};return g||t.samples.push(y),{sample:y,length:p,missing:g}}const l=e.length-r;return u=new Uint8Array(l),u.set(e.subarray(r,e.length),0),{sample:{unit:u,pts:o},length:l,missing:-1}}function W$e(t,e){return MF(t,e)&&W5(t,e+6)+10<=t.length-e}function Y$e(t){return t instanceof ArrayBuffer?t:t.byteOffset==0&&t.byteLength==t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer}function RI(t,e=0,r=1/0){return q$e(t,e,r,Uint8Array)}function q$e(t,e,r,n){const i=X$e(t);let a=1;"BYTES_PER_ELEMENT"in n&&(a=n.BYTES_PER_ELEMENT);const o=Z$e(t)?t.byteOffset:0,c=(o+t.byteLength)/a,u=(o+e)/a,l=Math.floor(Math.max(0,Math.min(u,c))),d=Math.floor(Math.min(l+Math.max(r,0),c));return new n(i,l,d-l)}function X$e(t){return t instanceof ArrayBuffer?t:t.buffer}function Z$e(t){return t&&t.buffer instanceof ArrayBuffer&&t.byteLength!==void 0&&t.byteOffset!==void 0}function J$e(t){const e={key:t.type,description:"",data:"",mimeType:null,pictureType:null},r=3;if(t.size<2)return;if(t.data[0]!==r){console.log("Ignore frame with unrecognized character encoding");return}const n=t.data.subarray(1).indexOf(0);if(n===-1)return;const i=Ef(RI(t.data,1,n)),a=t.data[2+n],o=t.data.subarray(3+n).indexOf(0);if(o===-1)return;const c=Ef(RI(t.data,3+n,o));let u;return i==="-->"?u=Ef(RI(t.data,4+n+o)):u=Y$e(t.data.subarray(4+n+o)),e.mimeType=i,e.pictureType=a,e.description=c,e.data=u,e}function e9e(t){if(t.size<2)return;const e=Ef(t.data,!0),r=new Uint8Array(t.data.subarray(e.length+1));return{key:t.type,info:e,data:r.buffer}}function t9e(t){if(t.size<2)return;if(t.type==="TXXX"){let r=1;const n=Ef(t.data.subarray(r),!0);r+=n.length+1;const i=Ef(t.data.subarray(r));return{key:t.type,info:n,data:i}}const e=Ef(t.data.subarray(1));return{key:t.type,info:"",data:e}}function r9e(t){if(t.type==="WXXX"){if(t.size<2)return;let r=1;const n=Ef(t.data.subarray(r),!0);r+=n.length+1;const i=Ef(t.data.subarray(r));return{key:t.type,info:n,data:i}}const e=Ef(t.data);return{key:t.type,info:"",data:e}}function n9e(t){return t.type==="PRIV"?e9e(t):t.type[0]==="W"?r9e(t):t.type==="APIC"?J$e(t):t9e(t)}function i9e(t){const e=String.fromCharCode(t[0],t[1],t[2],t[3]),r=W5(t,4),n=10;return{type:e,size:r,data:t.subarray(n,n+r)}}const wS=10,s9e=10;function qie(t){let e=0;const r=[];for(;MF(t,e);){const n=W5(t,e+6);t[e+5]>>6&1&&(e+=wS),e+=wS;const i=e+n;for(;e+s9e<i;){const a=i9e(t.subarray(e)),o=n9e(a);o&&r.push(o),e+=a.size+wS}zie(t,e)&&(e+=wS)}return r}function Xie(t){return t&&t.key==="PRIV"&&t.info==="com.apple.streaming.transportStreamTimestamp"}function a9e(t){if(t.data.byteLength===8){const e=new Uint8Array(t.data),r=e[3]&1;let n=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return n/=45,r&&(n+=4772185884e-2),Math.round(n)}}function UF(t){const e=qie(t);for(let r=0;r<e.length;r++){const n=e[r];if(Xie(n))return a9e(n)}}let gf=(function(t){return t.audioId3="org.id3",t.dateRange="com.apple.quicktime.HLS",t.emsg="https://aomedia.org/emsg/ID3",t.misbklv="urn:misb:KLV:bin:1910.1",t})({});function IA(t="",e=9e4){return{type:t,id:-1,pid:-1,inputTimeScale:e,sequenceNumber:-1,samples:[],dropped:0}}class $F{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(e,r,n,i){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(e){this.initPTS=e,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(e,r){return!1}appendFrame(e,r,n){}demux(e,r){this.cachedData&&(e=am(this.cachedData,e),this.cachedData=null);let n=f_(e,0),i=n?n.length:0,a;const o=this._audioTrack,c=this._id3Track,u=n?UF(n):void 0,l=e.length;for((this.basePTS===null||this.frameIndex===0&&Xn(u))&&(this.basePTS=o9e(u,r,this.initPTS),this.lastPTS=this.basePTS),this.lastPTS===null&&(this.lastPTS=this.basePTS),n&&n.length>0&&c.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:n,type:gf.audioId3,duration:Number.POSITIVE_INFINITY});i<l;){if(this.canParse(e,i)){const d=this.appendFrame(o,e,i);d?(this.frameIndex++,this.lastPTS=d.sample.pts,i+=d.length,a=i):i=l}else W$e(e,i)?(n=f_(e,i),c.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:n,type:gf.audioId3,duration:Number.POSITIVE_INFINITY}),i+=n.length,a=i):i++;if(i===l&&a!==l){const d=e.slice(a);this.cachedData?this.cachedData=am(this.cachedData,d):this.cachedData=d}}return{audioTrack:o,videoTrack:IA(),id3Track:c,textTrack:IA()}}demuxSampleAes(e,r,n){return Promise.reject(new Error(`[${this}] This demuxer does not support Sample-AES decryption`))}flush(e){const r=this.cachedData;return r&&(this.cachedData=null,this.demux(r,0)),{audioTrack:this._audioTrack,videoTrack:IA(),id3Track:this._id3Track,textTrack:IA()}}destroy(){this.cachedData=null,this._audioTrack=this._id3Track=void 0}}const o9e=(t,e,r)=>{if(Xn(t))return t*90;const n=r?r.baseTime*9e4/r.timescale:0;return e*9e4+n};let _S=null;const l9e=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],c9e=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],u9e=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],d9e=[0,1,1,4];function Zie(t,e,r,n,i){if(r+24>e.length)return;const a=Jie(e,r);if(a&&r+a.frameLength<=e.length){const o=a.samplesPerFrame*9e4/a.sampleRate,c=n+i*o,u={unit:e.subarray(r,r+a.frameLength),pts:c,dts:c};return t.config=[],t.channelCount=a.channelCount,t.samplerate=a.sampleRate,t.samples.push(u),{sample:u,length:a.frameLength,missing:0}}}function Jie(t,e){const r=t[e+1]>>3&3,n=t[e+1]>>1&3,i=t[e+2]>>4&15,a=t[e+2]>>2&3;if(r!==1&&i!==0&&i!==15&&a!==3){const o=t[e+2]>>1&1,c=t[e+3]>>6,u=r===3?3-n:n===3?3:4,l=l9e[u*14+i-1]*1e3,f=c9e[(r===3?0:r===2?1:2)*3+a],m=c===3?1:2,p=u9e[r][n],g=d9e[n],y=p*8*g,x=Math.floor(p*l/f+o)*g;if(_S===null){const E=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);_S=E?parseInt(E[1]):0}return _S&&_S<=87&&n===2&&l>=224e3&&c===0&&(t[e+3]=t[e+3]|128),{sampleRate:f,channelCount:m,frameLength:x,samplesPerFrame:y}}}function HF(t,e){return t[e]===255&&(t[e+1]&224)===224&&(t[e+1]&6)!==0}function ese(t,e){return e+1<t.length&&HF(t,e)}function h9e(t,e){return HF(t,e)&&4<=t.length-e}function tse(t,e){if(e+1<t.length&&HF(t,e)){const n=Jie(t,e);let i=4;n!=null&&n.frameLength&&(i=n.frameLength);const a=e+i;return a===t.length||ese(t,a)}return!1}class f9e extends $F{constructor(e,r){super(),this.observer=void 0,this.config=void 0,this.observer=e,this.config=r}resetInitSegment(e,r,n,i){super.resetInitSegment(e,r,n,i),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:r,duration:i,inputTimeScale:9e4,dropped:0}}static probe(e,r){if(!e)return!1;const n=f_(e,0);let i=n?.length||0;if(tse(e,i))return!1;for(let a=e.length;i<a;i++)if(K$e(e,i))return r.log("ADTS sync word found !"),!0;return!1}canParse(e,r){return V$e(e,r)}appendFrame(e,r,n){Gie(e,this.observer,r,n,e.manifestCodec);const i=Yie(e,r,n,this.basePTS,this.frameIndex);if(i&&i.missing===0)return i}}const rse=(t,e)=>{let r=0,n=5;e+=n;const i=new Uint32Array(1),a=new Uint32Array(1),o=new Uint8Array(1);for(;n>0;){o[0]=t[e];const c=Math.min(n,8),u=8-c;a[0]=4278190080>>>24+u<<u,i[0]=(o[0]&a[0])>>u,r=r?r<<c|i[0]:i[0],e+=1,n-=c}return r};class m9e extends $F{constructor(e){super(),this.observer=void 0,this.observer=e}resetInitSegment(e,r,n,i){super.resetInitSegment(e,r,n,i),this._audioTrack={container:"audio/ac-3",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"ac3",samples:[],manifestCodec:r,duration:i,inputTimeScale:9e4,dropped:0}}canParse(e,r){return r+64<e.length}appendFrame(e,r,n){const i=nse(e,r,n,this.basePTS,this.frameIndex);if(i!==-1)return{sample:e.samples[e.samples.length-1],length:i,missing:0}}static probe(e){if(!e)return!1;const r=f_(e,0);if(!r)return!1;const n=r.length;return e[n]===11&&e[n+1]===119&&UF(r)!==void 0&&rse(e,n)<16}}function nse(t,e,r,n,i){if(r+8>e.length||e[r]!==11||e[r+1]!==119)return-1;const a=e[r+4]>>6;if(a>=3)return-1;const c=[48e3,44100,32e3][a],u=e[r+4]&63,d=[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][u*3+a]*2;if(r+d>e.length)return-1;const f=e[r+6]>>5;let m=0;f===2?m+=2:(f&1&&f!==1&&(m+=2),f&4&&(m+=2));const p=(e[r+6]<<8|e[r+7])>>12-m&1,y=[2,1,2,3,3,4,4,5][f]+p,x=e[r+5]>>3,w=e[r+5]&7,_=new Uint8Array([a<<6|x<<1|w>>2,(w&3)<<6|f<<3|p<<2|u>>4,u<<4&224]),E=1536/c*9e4,N=n+i*E,C=e.subarray(r,r+d);return t.config=_,t.channelCount=y,t.samplerate=c,t.samples.push({unit:C,pts:N}),d}class A9e extends $F{resetInitSegment(e,r,n,i){super.resetInitSegment(e,r,n,i),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:r,duration:i,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;const r=f_(e,0);let n=r?.length||0;if(r&&e[n]===11&&e[n+1]===119&&UF(r)!==void 0&&rse(e,n)<=16)return!1;for(let i=e.length;n<i;n++)if(tse(e,n))return Ho.log("MPEG Audio sync word found !"),!0;return!1}canParse(e,r){return h9e(e,r)}appendFrame(e,r,n){if(this.basePTS!==null)return Zie(e,r,n,this.basePTS,this.frameIndex)}}const p9e=/\/emsg[-/]ID3/i;class g9e{constructor(e,r){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=r}resetTimeStamp(){}resetInitSegment(e,r,n,i){const a=this.videoTrack=IA("video",1),o=this.audioTrack=IA("audio",1),c=this.txtTrack=IA("text",1);if(this.id3Track=IA("id3",1),this.timeOffset=0,!(e!=null&&e.byteLength))return;const u=fie(e);if(u.video){const{id:l,timescale:d,codec:f,supplemental:m}=u.video;a.id=l,a.timescale=c.timescale=d,a.codec=f,a.supplemental=m}if(u.audio){const{id:l,timescale:d,codec:f}=u.audio;o.id=l,o.timescale=d,o.codec=f}c.id=uie.text,a.sampleDuration=0,a.duration=o.duration=i}resetContiguity(){this.remainderData=null}static probe(e){return m7e(e)}demux(e,r){this.timeOffset=r;let n=e;const i=this.videoTrack,a=this.txtTrack;if(this.config.progressive){this.remainderData&&(n=am(this.remainderData,e));const c=b7e(n);this.remainderData=c.remainder,i.samples=c.valid||new Uint8Array}else i.samples=n;const o=this.extractID3Track(i,r);return a.samples=SK(r,i),{videoTrack:i,audioTrack:this.audioTrack,id3Track:o,textTrack:this.txtTrack}}flush(){const e=this.timeOffset,r=this.videoTrack,n=this.txtTrack;r.samples=this.remainderData||new Uint8Array,this.remainderData=null;const i=this.extractID3Track(r,this.timeOffset);return n.samples=SK(e,r),{videoTrack:r,audioTrack:IA(),id3Track:i,textTrack:IA()}}extractID3Track(e,r){const n=this.id3Track;if(e.samples.length){const i=ga(e.samples,["emsg"]);i&&i.forEach(a=>{const o=_7e(a);if(p9e.test(o.schemeIdUri)){const c=lG(o,r);let u=o.eventDuration===4294967295?Number.POSITIVE_INFINITY:o.eventDuration/o.timeScale;u<=.001&&(u=Number.POSITIVE_INFINITY);const l=o.payload;n.samples.push({data:l,len:l.byteLength,dts:c,pts:c,type:gf.emsg,duration:u})}else if(this.config.enableEmsgKLVMetadata&&o.schemeIdUri.startsWith("urn:misb:KLV:bin:1910.1")){const c=lG(o,r);n.samples.push({data:o.payload,len:o.payload.byteLength,dts:c,pts:c,type:gf.misbklv,duration:Number.POSITIVE_INFINITY})}})}return n}demuxSampleAes(e,r,n){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){this.config=null,this.remainderData=null,this.videoTrack=this.audioTrack=this.id3Track=this.txtTrack=void 0}}function lG(t,e){return Xn(t.presentationTime)?t.presentationTime/t.timeScale:e+t.presentationTimeDelta/t.timeScale}class v9e{constructor(e,r,n){this.keyData=void 0,this.decrypter=void 0,this.keyData=n,this.decrypter=new IF(r,{removePKCS7Padding:!1})}decryptBuffer(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer,W0.cbc)}decryptAacSample(e,r,n){const i=e[r].unit;if(i.length<=16)return;const a=i.subarray(16,i.length-i.length%16),o=a.buffer.slice(a.byteOffset,a.byteOffset+a.length);this.decryptBuffer(o).then(c=>{const u=new Uint8Array(c);i.set(u,16),this.decrypter.isSync()||this.decryptAacSamples(e,r+1,n)}).catch(n)}decryptAacSamples(e,r,n){for(;;r++){if(r>=e.length){n();return}if(!(e[r].unit.length<32)&&(this.decryptAacSample(e,r,n),!this.decrypter.isSync()))return}}getAvcEncryptedData(e){const r=Math.floor((e.length-48)/160)*16+16,n=new Int8Array(r);let i=0;for(let a=32;a<e.length-16;a+=160,i+=16)n.set(e.subarray(a,a+16),i);return n}getAvcDecryptedUnit(e,r){const n=new Uint8Array(r);let i=0;for(let a=32;a<e.length-16;a+=160,i+=16)e.set(n.subarray(i,i+16),a);return e}decryptAvcSample(e,r,n,i,a){const o=pie(a.data),c=this.getAvcEncryptedData(o);this.decryptBuffer(c.buffer).then(u=>{a.data=this.getAvcDecryptedUnit(o,u),this.decrypter.isSync()||this.decryptAvcSamples(e,r,n+1,i)}).catch(i)}decryptAvcSamples(e,r,n,i){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;r++,n=0){if(r>=e.length){i();return}const a=e[r].units;for(;!(n>=a.length);n++){const o=a[n];if(!(o.data.length<=48||o.type!==1&&o.type!==5)&&(this.decryptAvcSample(e,r,n,i,o),!this.decrypter.isSync()))return}}}}class ise{constructor(){this.VideoSample=null}createVideoSample(e,r,n){return{key:e,frame:!1,pts:r,dts:n,units:[],length:0}}getLastNalUnit(e){var r;let n=this.VideoSample,i;if((!n||n.units.length===0)&&(n=e[e.length-1]),(r=n)!=null&&r.units){const a=n.units;i=a[a.length-1]}return i}pushAccessUnit(e,r){if(e.units.length&&e.frame){if(e.pts===void 0){const n=r.samples,i=n.length;if(i){const a=n[i-1];e.pts=a.pts,e.dts=a.dts}else{r.dropped++;return}}r.samples.push(e)}}parseNALu(e,r,n){const i=r.byteLength;let a=e.naluState||0;const o=a,c=[];let u=0,l,d,f,m=-1,p=0;for(a===-1&&(m=0,p=this.getNALuType(r,0),a=0,u=1);u<i;){if(l=r[u++],!a){a=l?0:1;continue}if(a===1){a=l?0:2;continue}if(!l)a=3;else if(l===1){if(d=u-a-1,m>=0){const g={data:r.subarray(m,d),type:p};c.push(g)}else{const g=this.getLastNalUnit(e.samples);g&&(o&&u<=4-o&&g.state&&(g.data=g.data.subarray(0,g.data.byteLength-o)),d>0&&(g.data=am(g.data,r.subarray(0,d)),g.state=0))}u<i?(f=this.getNALuType(r,u),m=u,p=f,a=0):a=-1}else a=0}if(m>=0&&a>=0){const g={data:r.subarray(m,i),type:p,state:a};c.push(g)}if(c.length===0){const g=this.getLastNalUnit(e.samples);g&&(g.data=am(g.data,r))}return e.naluState=a,c}}class y2{constructor(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){const e=this.data,r=this.bytesAvailable,n=e.byteLength-r,i=new Uint8Array(4),a=Math.min(4,r);if(a===0)throw new Error("no bytes available");i.set(e.subarray(n,n+a)),this.word=new DataView(i.buffer).getUint32(0),this.bitsAvailable=a*8,this.bytesAvailable-=a}skipBits(e){let r;e=Math.min(e,this.bytesAvailable*8+this.bitsAvailable),this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,r=e>>3,e-=r<<3,this.bytesAvailable-=r,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}readBits(e){let r=Math.min(this.bitsAvailable,e);const n=this.word>>>32-r;if(e>32&&Ho.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=r,this.bitsAvailable>0)this.word<<=r;else if(this.bytesAvailable>0)this.loadWord();else throw new Error("no bits available");return r=e-r,r>0&&this.bitsAvailable?n<<r|this.readBits(r):n}skipLZ(){let e;for(e=0;e<this.bitsAvailable;++e)if((this.word&2147483648>>>e)!==0)return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){const e=this.skipLZ();return this.readBits(e+1)-1}readEG(){const e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}readBoolean(){return this.readBits(1)===1}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}}class y9e extends ise{parsePES(e,r,n,i){const a=this.parseNALu(e,n.data,i);let o=this.VideoSample,c,u=!1;n.data=null,o&&a.length&&!e.audFound&&(this.pushAccessUnit(o,e),o=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts)),a.forEach(l=>{var d,f;switch(l.type){case 1:{let y=!1;c=!0;const x=l.data;if(u&&x.length>4){const w=this.readSliceType(x);(w===2||w===4||w===7||w===9)&&(y=!0)}if(y){var m;(m=o)!=null&&m.frame&&!o.key&&(this.pushAccessUnit(o,e),o=this.VideoSample=null)}o||(o=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),o.frame=!0,o.key=y;break}case 5:c=!0,(d=o)!=null&&d.frame&&!o.key&&(this.pushAccessUnit(o,e),o=this.VideoSample=null),o||(o=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),o.key=!0,o.frame=!0;break;case 6:{c=!0,CF(l.data,1,n.pts,r.samples);break}case 7:{var p,g;c=!0,u=!0;const y=l.data,x=this.readSPS(y);if(!e.sps||e.width!==x.width||e.height!==x.height||((p=e.pixelRatio)==null?void 0:p[0])!==x.pixelRatio[0]||((g=e.pixelRatio)==null?void 0:g[1])!==x.pixelRatio[1]){e.width=x.width,e.height=x.height,e.pixelRatio=x.pixelRatio,e.sps=[y];const w=y.subarray(1,4);let _="avc1.";for(let E=0;E<3;E++){let N=w[E].toString(16);N.length<2&&(N="0"+N),_+=N}e.codec=_}break}case 8:c=!0,e.pps=[l.data];break;case 9:c=!0,e.audFound=!0,(f=o)!=null&&f.frame&&(this.pushAccessUnit(o,e),o=null),o||(o=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts));break;case 12:c=!0;break;default:c=!1;break}o&&c&&o.units.push(l)}),i&&o&&(this.pushAccessUnit(o,e),this.VideoSample=null)}getNALuType(e,r){return e[r]&31}readSliceType(e){const r=new y2(e);return r.readUByte(),r.readUEG(),r.readUEG()}skipScalingList(e,r){let n=8,i=8,a;for(let o=0;o<e;o++)i!==0&&(a=r.readEG(),i=(n+a+256)%256),n=i===0?n:i}readSPS(e){const r=new y2(e);let n=0,i=0,a=0,o=0,c,u,l;const d=r.readUByte.bind(r),f=r.readBits.bind(r),m=r.readUEG.bind(r),p=r.readBoolean.bind(r),g=r.skipBits.bind(r),y=r.skipEG.bind(r),x=r.skipUEG.bind(r),w=this.skipScalingList.bind(this);d();const _=d();if(f(5),g(3),d(),x(),_===100||_===110||_===122||_===244||_===44||_===83||_===86||_===118||_===128){const U=m();if(U===3&&g(1),x(),x(),g(1),p())for(u=U!==3?8:12,l=0;l<u;l++)p()&&(l<6?w(16,r):w(64,r))}x();const E=m();if(E===0)m();else if(E===1)for(g(1),y(),y(),c=m(),l=0;l<c;l++)y();x(),g(1);const N=m(),C=m(),I=f(1);I===0&&g(1),g(1),p()&&(n=m(),i=m(),a=m(),o=m());let D=[1,1];if(p()&&p())switch(d()){case 1:D=[1,1];break;case 2:D=[12,11];break;case 3:D=[10,11];break;case 4:D=[16,11];break;case 5:D=[40,33];break;case 6:D=[24,11];break;case 7:D=[20,11];break;case 8:D=[32,11];break;case 9:D=[80,33];break;case 10:D=[18,11];break;case 11:D=[15,11];break;case 12:D=[64,33];break;case 13:D=[160,99];break;case 14:D=[4,3];break;case 15:D=[3,2];break;case 16:D=[2,1];break;case 255:{D=[d()<<8|d(),d()<<8|d()];break}}return{width:Math.ceil((N+1)*16-n*2-i*2),height:(2-I)*(C+1)*16-(I?2:4)*(a+o),pixelRatio:D}}}class x9e extends ise{constructor(...e){super(...e),this.initVPS=null}parsePES(e,r,n,i){const a=this.parseNALu(e,n.data,i);let o=this.VideoSample,c,u=!1;n.data=null,o&&a.length&&!e.audFound&&(this.pushAccessUnit(o,e),o=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts)),a.forEach(l=>{var d,f;switch(l.type){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:o||(o=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts)),o.frame=!0,c=!0;break;case 16:case 17:case 18:case 21:if(c=!0,u){var m;(m=o)!=null&&m.frame&&!o.key&&(this.pushAccessUnit(o,e),o=this.VideoSample=null)}o||(o=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),o.key=!0,o.frame=!0;break;case 19:case 20:c=!0,(d=o)!=null&&d.frame&&!o.key&&(this.pushAccessUnit(o,e),o=this.VideoSample=null),o||(o=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),o.key=!0,o.frame=!0;break;case 39:c=!0,CF(l.data,2,n.pts,r.samples);break;case 32:c=!0,e.vps||(typeof e.params!="object"&&(e.params={}),e.params=nl(e.params,this.readVPS(l.data)),this.initVPS=l.data),e.vps=[l.data];break;case 33:if(c=!0,u=!0,e.vps!==void 0&&e.vps[0]!==this.initVPS&&e.sps!==void 0&&!this.matchSPS(e.sps[0],l.data)&&(this.initVPS=e.vps[0],e.sps=e.pps=void 0),!e.sps){const p=this.readSPS(l.data);e.width=p.width,e.height=p.height,e.pixelRatio=p.pixelRatio,e.codec=p.codecString,e.sps=[],typeof e.params!="object"&&(e.params={});for(const g in p.params)e.params[g]=p.params[g]}this.pushParameterSet(e.sps,l.data,e.vps),o||(o=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),o.key=!0;break;case 34:if(c=!0,typeof e.params=="object"){if(!e.pps){e.pps=[];const p=this.readPPS(l.data);for(const g in p)e.params[g]=p[g]}this.pushParameterSet(e.pps,l.data,e.vps)}break;case 35:c=!0,e.audFound=!0,(f=o)!=null&&f.frame&&(this.pushAccessUnit(o,e),o=null),o||(o=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts));break;default:c=!1;break}o&&c&&o.units.push(l)}),i&&o&&(this.pushAccessUnit(o,e),this.VideoSample=null)}pushParameterSet(e,r,n){(n&&n[0]===this.initVPS||!n&&!e.length)&&e.push(r)}getNALuType(e,r){return(e[r]&126)>>>1}ebsp2rbsp(e){const r=new Uint8Array(e.byteLength);let n=0;for(let i=0;i<e.byteLength;i++)i>=2&&e[i]===3&&e[i-1]===0&&e[i-2]===0||(r[n]=e[i],n++);return new Uint8Array(r.buffer,0,n)}pushAccessUnit(e,r){super.pushAccessUnit(e,r),this.initVPS&&(this.initVPS=null)}readVPS(e){const r=new y2(e);r.readUByte(),r.readUByte(),r.readBits(4),r.skipBits(2),r.readBits(6);const n=r.readBits(3),i=r.readBoolean();return{numTemporalLayers:n+1,temporalIdNested:i}}readSPS(e){const r=new y2(this.ebsp2rbsp(e));r.readUByte(),r.readUByte(),r.readBits(4);const n=r.readBits(3);r.readBoolean();const i=r.readBits(2),a=r.readBoolean(),o=r.readBits(5),c=r.readUByte(),u=r.readUByte(),l=r.readUByte(),d=r.readUByte(),f=r.readUByte(),m=r.readUByte(),p=r.readUByte(),g=r.readUByte(),y=r.readUByte(),x=r.readUByte(),w=r.readUByte(),_=[],E=[];for(let ke=0;ke<n;ke++)_.push(r.readBoolean()),E.push(r.readBoolean());if(n>0)for(let ke=n;ke<8;ke++)r.readBits(2);for(let ke=0;ke<n;ke++)_[ke]&&(r.readUByte(),r.readUByte(),r.readUByte(),r.readUByte(),r.readUByte(),r.readUByte(),r.readUByte(),r.readUByte(),r.readUByte(),r.readUByte(),r.readUByte()),E[ke]&&r.readUByte();r.readUEG();const N=r.readUEG();N==3&&r.skipBits(1);const C=r.readUEG(),I=r.readUEG(),D=r.readBoolean();let U=0,G=0,q=0,J=0;D&&(U+=r.readUEG(),G+=r.readUEG(),q+=r.readUEG(),J+=r.readUEG());const de=r.readUEG(),xe=r.readUEG(),we=r.readUEG(),ve=r.readBoolean();for(let ke=ve?0:n;ke<=n;ke++)r.skipUEG(),r.skipUEG(),r.skipUEG();if(r.skipUEG(),r.skipUEG(),r.skipUEG(),r.skipUEG(),r.skipUEG(),r.skipUEG(),r.readBoolean()&&r.readBoolean())for(let Xe=0;Xe<4;Xe++)for(let mt=0;mt<(Xe===3?2:6);mt++)if(!r.readBoolean())r.readUEG();else{const tr=Math.min(64,1<<4+(Xe<<1));Xe>1&&r.readEG();for(let lr=0;lr<tr;lr++)r.readEG()}r.readBoolean(),r.readBoolean(),r.readBoolean()&&(r.readUByte(),r.skipUEG(),r.skipUEG(),r.readBoolean());const oe=r.readUEG();let Ie=0;for(let ke=0;ke<oe;ke++){let Xe=!1;if(ke!==0&&(Xe=r.readBoolean()),Xe){ke===oe&&r.readUEG(),r.readBoolean(),r.readUEG();let mt=0;for(let Jt=0;Jt<=Ie;Jt++){const tr=r.readBoolean();let lr=!1;tr||(lr=r.readBoolean()),(tr||lr)&&mt++}Ie=mt}else{const mt=r.readUEG(),Jt=r.readUEG();Ie=mt+Jt;for(let tr=0;tr<mt;tr++)r.readUEG(),r.readBoolean();for(let tr=0;tr<Jt;tr++)r.readUEG(),r.readBoolean()}}if(r.readBoolean()){const ke=r.readUEG();for(let Xe=0;Xe<ke;Xe++){for(let mt=0;mt<we+4;mt++)r.readBits(1);r.readBits(1)}}let be=0,ue=1,Pe=1,Re=!0,He=1,Fe=0;r.readBoolean(),r.readBoolean();let ft=!1;if(r.readBoolean()){if(r.readBoolean()){const Pr=r.readUByte(),tn=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],Gr=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];Pr>0&&Pr<16?(ue=tn[Pr-1],Pe=Gr[Pr-1]):Pr===255&&(ue=r.readBits(16),Pe=r.readBits(16))}if(r.readBoolean()&&r.readBoolean(),r.readBoolean()&&(r.readBits(3),r.readBoolean(),r.readBoolean()&&(r.readUByte(),r.readUByte(),r.readUByte())),r.readBoolean()&&(r.readUEG(),r.readUEG()),r.readBoolean(),r.readBoolean(),r.readBoolean(),ft=r.readBoolean(),ft&&(r.skipUEG(),r.skipUEG(),r.skipUEG(),r.skipUEG()),r.readBoolean()&&(He=r.readBits(32),Fe=r.readBits(32),r.readBoolean()&&r.readUEG(),r.readBoolean())){const Gr=r.readBoolean(),Xr=r.readBoolean();let Qr=!1;(Gr||Xr)&&(Qr=r.readBoolean(),Qr&&(r.readUByte(),r.readBits(5),r.readBoolean(),r.readBits(5)),r.readBits(4),r.readBits(4),Qr&&r.readBits(4),r.readBits(5),r.readBits(5),r.readBits(5));for(let Pn=0;Pn<=n;Pn++){Re=r.readBoolean();const wn=Re||r.readBoolean();let yi=!1;wn?r.readEG():yi=r.readBoolean();const ot=yi?1:r.readUEG()+1;if(Gr)for(let Gt=0;Gt<ot;Gt++)r.readUEG(),r.readUEG(),Qr&&(r.readUEG(),r.readUEG()),r.skipBits(1);if(Xr)for(let Gt=0;Gt<ot;Gt++)r.readUEG(),r.readUEG(),Qr&&(r.readUEG(),r.readUEG()),r.skipBits(1)}}r.readBoolean()&&(r.readBoolean(),r.readBoolean(),r.readBoolean(),be=r.readUEG())}let De=C,ut=I;if(D){let ke=1,Xe=1;N===1?ke=Xe=2:N==2&&(ke=2),De=C-ke*G-ke*U,ut=I-Xe*J-Xe*q}const et=i?["A","B","C"][i]:"",Ue=c<<24|u<<16|l<<8|d;let jt=0;for(let ke=0;ke<32;ke++)jt=(jt|(Ue>>ke&1)<<31-ke)>>>0;let rt=jt.toString(16);return o===1&&rt==="2"&&(rt="6"),{codecString:`hvc1.${et}${o}.${rt}.${a?"H":"L"}${w}.B0`,params:{general_tier_flag:a,general_profile_idc:o,general_profile_space:i,general_profile_compatibility_flags:[c,u,l,d],general_constraint_indicator_flags:[f,m,p,g,y,x],general_level_idc:w,bit_depth:de+8,bit_depth_luma_minus8:de,bit_depth_chroma_minus8:xe,min_spatial_segmentation_idc:be,chroma_format_idc:N,frame_rate:{fixed:Re,fps:Fe/He}},width:De,height:ut,pixelRatio:[ue,Pe]}}readPPS(e){const r=new y2(this.ebsp2rbsp(e));r.readUByte(),r.readUByte(),r.skipUEG(),r.skipUEG(),r.skipBits(2),r.skipBits(3),r.skipBits(2),r.skipUEG(),r.skipUEG(),r.skipEG(),r.skipBits(2),r.readBoolean()&&r.skipUEG(),r.skipEG(),r.skipEG(),r.skipBits(4);const i=r.readBoolean(),a=r.readBoolean();let o=1;return a&&i?o=0:a?o=3:i&&(o=2),{parallelismType:o}}matchSPS(e,r){return String.fromCharCode.apply(null,e).substr(3)===String.fromCharCode.apply(null,r).substr(3)}}const ad=188;class b0{constructor(e,r,n,i){this.logger=void 0,this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._pmtId=-1,this._videoTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.remainderData=null,this.videoParser=void 0,this.observer=e,this.config=r,this.typeSupported=n,this.logger=i,this.videoParser=null}static probe(e,r){const n=b0.syncOffset(e);return n>0&&r.warn(`MPEG2-TS detected but first sync word found @ offset ${n}`),n!==-1}static syncOffset(e){const r=e.length;let n=Math.min(ad*5,r-ad)+1,i=0;for(;i<n;){let a=!1,o=-1,c=0;for(let u=i;u<r;u+=ad)if(e[u]===71&&(r-u===ad||e[u+ad]===71)){if(c++,o===-1&&(o=u,o!==0&&(n=Math.min(o+ad*99,e.length-ad)+1)),a||(a=EO(e,u)===0),a&&c>1&&(o===0&&c>2||u+ad>n))return o}else{if(c)return-1;break}i++}return-1}static createTrack(e,r){return{container:e==="video"||e==="audio"?"video/mp2t":void 0,type:e,id:uie[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:e==="audio"?r:void 0}}resetInitSegment(e,r,n,i){this.pmtParsed=!1,this._pmtId=-1,this._videoTrack=b0.createTrack("video"),this._videoTrack.duration=i,this._audioTrack=b0.createTrack("audio",i),this._id3Track=b0.createTrack("id3"),this._txtTrack=b0.createTrack("text"),this._audioTrack.segmentCodec="aac",this.videoParser=null,this.aacOverFlow=null,this.remainderData=null,this.audioCodec=r,this.videoCodec=n}resetTimeStamp(){}resetContiguity(){const{_audioTrack:e,_videoTrack:r,_id3Track:n}=this;e&&(e.pesData=null),r&&(r.pesData=null),n&&(n.pesData=null),this.aacOverFlow=null,this.remainderData=null}demux(e,r,n=!1,i=!1){n||(this.sampleAes=null);let a;const o=this._videoTrack,c=this._audioTrack,u=this._id3Track,l=this._txtTrack;let d=o.pid,f=o.pesData,m=c.pid,p=u.pid,g=c.pesData,y=u.pesData,x=null,w=this.pmtParsed,_=this._pmtId,E=e.length;if(this.remainderData&&(e=am(this.remainderData,e),E=e.length,this.remainderData=null),E<ad&&!i)return this.remainderData=e,{audioTrack:c,videoTrack:o,id3Track:u,textTrack:l};const N=Math.max(0,b0.syncOffset(e));E-=(E-N)%ad,E<e.byteLength&&!i&&(this.remainderData=new Uint8Array(e.buffer,E,e.buffer.byteLength-E));let C=0;for(let D=N;D<E;D+=ad)if(e[D]===71){const U=!!(e[D+1]&64),G=EO(e,D),q=(e[D+3]&48)>>4;let J;if(q>1){if(J=D+5+e[D+4],J===D+ad)continue}else J=D+4;switch(G){case d:U&&(f&&(a=gx(f,this.logger))&&(this.readyVideoParser(o.segmentCodec),this.videoParser!==null&&this.videoParser.parsePES(o,l,a,!1)),f={data:[],size:0}),f&&(f.data.push(e.subarray(J,D+ad)),f.size+=D+ad-J);break;case m:if(U){if(g&&(a=gx(g,this.logger)))switch(c.segmentCodec){case"aac":this.parseAACPES(c,a);break;case"mp3":this.parseMPEGPES(c,a);break;case"ac3":this.parseAC3PES(c,a);break}g={data:[],size:0}}g&&(g.data.push(e.subarray(J,D+ad)),g.size+=D+ad-J);break;case p:U&&(y&&(a=gx(y,this.logger))&&this.parseID3PES(u,a),y={data:[],size:0}),y&&(y.data.push(e.subarray(J,D+ad)),y.size+=D+ad-J);break;case 0:U&&(J+=e[J]+1),_=this._pmtId=b9e(e,J);break;case _:{U&&(J+=e[J]+1);const de=w9e(e,J,this.typeSupported,n,this.observer,this.logger);d=de.videoPid,d>0&&(o.pid=d,o.segmentCodec=de.segmentVideoCodec),m=de.audioPid,m>0&&(c.pid=m,c.segmentCodec=de.segmentAudioCodec),p=de.id3Pid,p>0&&(u.pid=p),x!==null&&!w&&(this.logger.warn(`MPEG-TS PMT found at ${D} after unknown PID '${x}'. Backtracking to sync byte @${N} to parse all TS packets.`),x=null,D=N-188),w=this.pmtParsed=!0;break}case 17:case 8191:break;default:x=G;break}}else C++;C>0&&SO(this.observer,new Error(`Found ${C} TS packet/s that do not start with 0x47`),void 0,this.logger),o.pesData=f,c.pesData=g,u.pesData=y;const I={audioTrack:c,videoTrack:o,id3Track:u,textTrack:l};return i&&this.extractRemainingSamples(I),I}flush(){const{remainderData:e}=this;this.remainderData=null;let r;return e?r=this.demux(e,-1,!1,!0):r={videoTrack:this._videoTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(r),this.sampleAes?this.decrypt(r,this.sampleAes):r}extractRemainingSamples(e){const{audioTrack:r,videoTrack:n,id3Track:i,textTrack:a}=e,o=n.pesData,c=r.pesData,u=i.pesData;let l;if(o&&(l=gx(o,this.logger))?(this.readyVideoParser(n.segmentCodec),this.videoParser!==null&&(this.videoParser.parsePES(n,a,l,!0),n.pesData=null)):n.pesData=o,c&&(l=gx(c,this.logger))){switch(r.segmentCodec){case"aac":this.parseAACPES(r,l);break;case"mp3":this.parseMPEGPES(r,l);break;case"ac3":this.parseAC3PES(r,l);break}r.pesData=null}else c!=null&&c.size&&this.logger.log("last AAC PES packet truncated,might overlap between fragments"),r.pesData=c;u&&(l=gx(u,this.logger))?(this.parseID3PES(i,l),i.pesData=null):i.pesData=u}demuxSampleAes(e,r,n){const i=this.demux(e,n,!0,!this.config.progressive),a=this.sampleAes=new v9e(this.observer,this.config,r);return this.decrypt(i,a)}readyVideoParser(e){this.videoParser===null&&(e==="avc"?this.videoParser=new y9e:e==="hevc"&&(this.videoParser=new x9e))}decrypt(e,r){return new Promise(n=>{const{audioTrack:i,videoTrack:a}=e;i.samples&&i.segmentCodec==="aac"?r.decryptAacSamples(i.samples,0,()=>{a.samples?r.decryptAvcSamples(a.samples,0,0,()=>{n(e)}):n(e)}):a.samples&&r.decryptAvcSamples(a.samples,0,0,()=>{n(e)})})}destroy(){this.observer&&this.observer.removeAllListeners(),this.config=this.logger=this.observer=null,this.aacOverFlow=this.videoParser=this.remainderData=this.sampleAes=null,this._videoTrack=this._audioTrack=this._id3Track=this._txtTrack=void 0}parseAACPES(e,r){let n=0;const i=this.aacOverFlow;let a=r.data;if(i){this.aacOverFlow=null;const f=i.missing,m=i.sample.unit.byteLength;if(f===-1)a=am(i.sample.unit,a);else{const p=m-f;i.sample.unit.set(a.subarray(0,f),p),e.samples.push(i.sample),n=i.missing}}let o,c;for(o=n,c=a.length;o<c-1&&!uN(a,o);o++);if(o!==n){let f;const m=o<c-1;if(m?f=`AAC PES did not start with ADTS header,offset:${o}`:f="No ADTS header found in AAC PES",SO(this.observer,new Error(f),m,this.logger),!m)return}Gie(e,this.observer,a,o,this.audioCodec);let u;if(r.pts!==void 0)u=r.pts;else if(i){const f=Wie(e.samplerate);u=i.sample.pts+f}else{this.logger.warn("[tsdemuxer]: AAC PES unknown PTS");return}let l=0,d;for(;o<c;)if(d=Yie(e,a,o,u,l),o+=d.length,d.missing){this.aacOverFlow=d;break}else for(l++;o<c-1&&!uN(a,o);o++);}parseMPEGPES(e,r){const n=r.data,i=n.length;let a=0,o=0;const c=r.pts;if(c===void 0){this.logger.warn("[tsdemuxer]: MPEG PES unknown PTS");return}for(;o<i;)if(ese(n,o)){const u=Zie(e,n,o,c,a);if(u)o+=u.length,a++;else break}else o++}parseAC3PES(e,r){{const n=r.data,i=r.pts;if(i===void 0){this.logger.warn("[tsdemuxer]: AC3 PES unknown PTS");return}const a=n.length;let o=0,c=0,u;for(;c<a&&(u=nse(e,n,c,i,o++))>0;)c+=u}}parseID3PES(e,r){if(r.pts===void 0){this.logger.warn("[tsdemuxer]: ID3 PES unknown PTS");return}const n=nl({},r,{type:this._videoTrack?gf.emsg:gf.audioId3,duration:Number.POSITIVE_INFINITY});e.samples.push(n)}}function EO(t,e){return((t[e+1]&31)<<8)+t[e+2]}function b9e(t,e){return(t[e+10]&31)<<8|t[e+11]}function w9e(t,e,r,n,i,a){const o={audioPid:-1,videoPid:-1,id3Pid:-1,segmentVideoCodec:"avc",segmentAudioCodec:"aac"},c=(t[e+1]&15)<<8|t[e+2],u=e+3+c-4,l=(t[e+10]&15)<<8|t[e+11];for(e+=12+l;e<u;){const d=EO(t,e),f=(t[e+3]&15)<<8|t[e+4];switch(t[e]){case 207:if(!n){DI("ADTS AAC",a);break}case 15:o.audioPid===-1&&(o.audioPid=d);break;case 21:o.id3Pid===-1&&(o.id3Pid=d);break;case 219:if(!n){DI("H.264",a);break}case 27:o.videoPid===-1&&(o.videoPid=d);break;case 3:case 4:!r.mpeg&&!r.mp3?a.log("MPEG audio found, not supported in this browser"):o.audioPid===-1&&(o.audioPid=d,o.segmentAudioCodec="mp3");break;case 193:if(!n){DI("AC-3",a);break}case 129:r.ac3?o.audioPid===-1&&(o.audioPid=d,o.segmentAudioCodec="ac3"):a.log("AC-3 audio found, not supported in this browser");break;case 6:if(o.audioPid===-1&&f>0){let m=e+5,p=f;for(;p>2;){t[m]===106&&(r.ac3!==!0?a.log("AC-3 audio found, not supported in this browser for now"):(o.audioPid=d,o.segmentAudioCodec="ac3"));const y=t[m+1]+2;m+=y,p-=y}}break;case 194:case 135:return SO(i,new Error("Unsupported EC-3 in M2TS found"),void 0,a),o;case 36:o.videoPid===-1&&(o.videoPid=d,o.segmentVideoCodec="hevc",a.log("HEVC in M2TS found"));break}e+=f+5}return o}function SO(t,e,r,n){n.warn(`parsing error: ${e.message}`),t.emit(Be.ERROR,Be.ERROR,{type:Oi.MEDIA_ERROR,details:br.FRAG_PARSING_ERROR,fatal:!1,levelRetry:r,error:e,reason:e.message})}function DI(t,e){e.log(`${t} with AES-128-CBC encryption found in unencrypted stream`)}function gx(t,e){let r=0,n,i,a,o,c;const u=t.data;if(!t||t.size===0)return null;for(;u[0].length<19&&u.length>1;)u[0]=am(u[0],u[1]),u.splice(1,1);if(n=u[0],(n[0]<<16)+(n[1]<<8)+n[2]===1){if(i=(n[4]<<8)+n[5],i&&i>t.size-6)return null;const d=n[7];d&192&&(o=(n[9]&14)*536870912+(n[10]&255)*4194304+(n[11]&254)*16384+(n[12]&255)*128+(n[13]&254)/2,d&64?(c=(n[14]&14)*536870912+(n[15]&255)*4194304+(n[16]&254)*16384+(n[17]&255)*128+(n[18]&254)/2,o-c>60*9e4&&(e.warn(`${Math.round((o-c)/9e4)}s delta between PTS and DTS, align them`),o=c)):c=o),a=n[8];let f=a+9;if(t.size<=f)return null;t.size-=f;const m=new Uint8Array(t.size);for(let p=0,g=u.length;p<g;p++){n=u[p];let y=n.byteLength;if(f)if(f>y){f-=y;continue}else n=n.subarray(f),y-=f,f=0;m.set(n,r),r+=y}return i&&(i-=a+3),{data:m,pts:o,dts:c,len:i}}return null}class _9e{static getSilentFrame(e,r){switch(e){case"mp4a.40.2":if(r===1)return new Uint8Array([0,200,0,128,35,128]);if(r===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(r===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(r===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(r===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(r===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(r===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(r===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(r===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}}}const e0=Math.pow(2,32)-1;class pr{static init(){pr.types={avc1:[],avcC:[],hvc1:[],hvcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],dac3:[],"ac-3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};let e;for(e in pr.types)pr.types.hasOwnProperty(e)&&(pr.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);const r=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);pr.HDLR_TYPES={video:r,audio:n};const i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),a=new Uint8Array([0,0,0,0,0,0,0,0]);pr.STTS=pr.STSC=pr.STCO=a,pr.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),pr.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),pr.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),pr.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const o=new Uint8Array([105,115,111,109]),c=new Uint8Array([97,118,99,49]),u=new Uint8Array([0,0,0,1]);pr.FTYP=pr.box(pr.types.ftyp,o,u,o,c),pr.DINF=pr.box(pr.types.dinf,pr.box(pr.types.dref,i))}static box(e,...r){let n=8,i=r.length;const a=i;for(;i--;)n+=r[i].byteLength;const o=new Uint8Array(n);for(o[0]=n>>24&255,o[1]=n>>16&255,o[2]=n>>8&255,o[3]=n&255,o.set(e,4),i=0,n=8;i<a;i++)o.set(r[i],n),n+=r[i].byteLength;return o}static hdlr(e){return pr.box(pr.types.hdlr,pr.HDLR_TYPES[e])}static mdat(e){return pr.box(pr.types.mdat,e)}static mdhd(e,r){r*=e;const n=Math.floor(r/(e0+1)),i=Math.floor(r%(e0+1));return pr.box(pr.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,n>>24,n>>16&255,n>>8&255,n&255,i>>24,i>>16&255,i>>8&255,i&255,85,196,0,0]))}static mdia(e){return pr.box(pr.types.mdia,pr.mdhd(e.timescale||0,e.duration||0),pr.hdlr(e.type),pr.minf(e))}static mfhd(e){return pr.box(pr.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,e&255]))}static minf(e){return e.type==="audio"?pr.box(pr.types.minf,pr.box(pr.types.smhd,pr.SMHD),pr.DINF,pr.stbl(e)):pr.box(pr.types.minf,pr.box(pr.types.vmhd,pr.VMHD),pr.DINF,pr.stbl(e))}static moof(e,r,n){return pr.box(pr.types.moof,pr.mfhd(e),pr.traf(n,r))}static moov(e){let r=e.length;const n=[];for(;r--;)n[r]=pr.trak(e[r]);return pr.box.apply(null,[pr.types.moov,pr.mvhd(e[0].timescale||0,e[0].duration||0)].concat(n).concat(pr.mvex(e)))}static mvex(e){let r=e.length;const n=[];for(;r--;)n[r]=pr.trex(e[r]);return pr.box.apply(null,[pr.types.mvex,...n])}static mvhd(e,r){r*=e;const n=Math.floor(r/(e0+1)),i=Math.floor(r%(e0+1)),a=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,n>>24,n>>16&255,n>>8&255,n&255,i>>24,i>>16&255,i>>8&255,i&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return pr.box(pr.types.mvhd,a)}static sdtp(e){const r=e.samples||[],n=new Uint8Array(4+r.length);let i,a;for(i=0;i<r.length;i++)a=r[i].flags,n[i+4]=a.dependsOn<<4|a.isDependedOn<<2|a.hasRedundancy;return pr.box(pr.types.sdtp,n)}static stbl(e){return pr.box(pr.types.stbl,pr.stsd(e),pr.box(pr.types.stts,pr.STTS),pr.box(pr.types.stsc,pr.STSC),pr.box(pr.types.stsz,pr.STSZ),pr.box(pr.types.stco,pr.STCO))}static avc1(e){let r=[],n=[],i,a,o;for(i=0;i<e.sps.length;i++)a=e.sps[i],o=a.byteLength,r.push(o>>>8&255),r.push(o&255),r=r.concat(Array.prototype.slice.call(a));for(i=0;i<e.pps.length;i++)a=e.pps[i],o=a.byteLength,n.push(o>>>8&255),n.push(o&255),n=n.concat(Array.prototype.slice.call(a));const c=pr.box(pr.types.avcC,new Uint8Array([1,r[3],r[4],r[5],255,224|e.sps.length].concat(r).concat([e.pps.length]).concat(n))),u=e.width,l=e.height,d=e.pixelRatio[0],f=e.pixelRatio[1];return pr.box(pr.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,u>>8&255,u&255,l>>8&255,l&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),c,pr.box(pr.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),pr.box(pr.types.pasp,new Uint8Array([d>>24,d>>16&255,d>>8&255,d&255,f>>24,f>>16&255,f>>8&255,f&255])))}static esds(e){const r=e.config;return new Uint8Array([0,0,0,0,3,25,0,1,0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,...r,6,1,2])}static audioStsd(e){const r=e.samplerate||0;return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount||0,0,16,0,0,0,0,r>>8&255,r&255,0,0])}static mp4a(e){return pr.box(pr.types.mp4a,pr.audioStsd(e),pr.box(pr.types.esds,pr.esds(e)))}static mp3(e){return pr.box(pr.types[".mp3"],pr.audioStsd(e))}static ac3(e){return pr.box(pr.types["ac-3"],pr.audioStsd(e),pr.box(pr.types.dac3,e.config))}static stsd(e){const{segmentCodec:r}=e;if(e.type==="audio"){if(r==="aac")return pr.box(pr.types.stsd,pr.STSD,pr.mp4a(e));if(r==="ac3"&&e.config)return pr.box(pr.types.stsd,pr.STSD,pr.ac3(e));if(r==="mp3"&&e.codec==="mp3")return pr.box(pr.types.stsd,pr.STSD,pr.mp3(e))}else if(e.pps&&e.sps){if(r==="avc")return pr.box(pr.types.stsd,pr.STSD,pr.avc1(e));if(r==="hevc"&&e.vps)return pr.box(pr.types.stsd,pr.STSD,pr.hvc1(e))}else throw new Error("video track missing pps or sps");throw new Error(`unsupported ${e.type} segment codec (${r}/${e.codec})`)}static tkhd(e){const r=e.id,n=(e.duration||0)*(e.timescale||0),i=e.width||0,a=e.height||0,o=Math.floor(n/(e0+1)),c=Math.floor(n%(e0+1));return pr.box(pr.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,r>>24&255,r>>16&255,r>>8&255,r&255,0,0,0,0,o>>24,o>>16&255,o>>8&255,o&255,c>>24,c>>16&255,c>>8&255,c&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,i>>8&255,i&255,0,0,a>>8&255,a&255,0,0]))}static traf(e,r){const n=pr.sdtp(e),i=e.id,a=Math.floor(r/(e0+1)),o=Math.floor(r%(e0+1));return pr.box(pr.types.traf,pr.box(pr.types.tfhd,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,i&255])),pr.box(pr.types.tfdt,new Uint8Array([1,0,0,0,a>>24,a>>16&255,a>>8&255,a&255,o>>24,o>>16&255,o>>8&255,o&255])),pr.trun(e,n.length+16+20+8+16+8+8),n)}static trak(e){return e.duration=e.duration||4294967295,pr.box(pr.types.trak,pr.tkhd(e),pr.mdia(e))}static trex(e){const r=e.id;return pr.box(pr.types.trex,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,r&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(e,r){const n=e.samples||[],i=n.length,a=12+16*i,o=new Uint8Array(a);let c,u,l,d,f,m;for(r+=8+a,o.set([e.type==="video"?1:0,0,15,1,i>>>24&255,i>>>16&255,i>>>8&255,i&255,r>>>24&255,r>>>16&255,r>>>8&255,r&255],0),c=0;c<i;c++)u=n[c],l=u.duration,d=u.size,f=u.flags,m=u.cts,o.set([l>>>24&255,l>>>16&255,l>>>8&255,l&255,d>>>24&255,d>>>16&255,d>>>8&255,d&255,f.isLeading<<2|f.dependsOn,f.isDependedOn<<6|f.hasRedundancy<<4|f.paddingValue<<1|f.isNonSync,f.degradPrio&61440,f.degradPrio&15,m>>>24&255,m>>>16&255,m>>>8&255,m&255],12+16*c);return pr.box(pr.types.trun,o)}static initSegment(e){pr.types||pr.init();const r=pr.moov(e);return am(pr.FTYP,r)}static hvc1(e){const r=e.params,n=[e.vps,e.sps,e.pps],i=4,a=new Uint8Array([1,r.general_profile_space<<6|(r.general_tier_flag?32:0)|r.general_profile_idc,r.general_profile_compatibility_flags[0],r.general_profile_compatibility_flags[1],r.general_profile_compatibility_flags[2],r.general_profile_compatibility_flags[3],r.general_constraint_indicator_flags[0],r.general_constraint_indicator_flags[1],r.general_constraint_indicator_flags[2],r.general_constraint_indicator_flags[3],r.general_constraint_indicator_flags[4],r.general_constraint_indicator_flags[5],r.general_level_idc,240|r.min_spatial_segmentation_idc>>8,255&r.min_spatial_segmentation_idc,252|r.parallelismType,252|r.chroma_format_idc,248|r.bit_depth_luma_minus8,248|r.bit_depth_chroma_minus8,0,parseInt(r.frame_rate.fps),i-1|r.temporal_id_nested<<2|r.num_temporal_layers<<3|(r.frame_rate.fixed?64:0),n.length]);let o=a.length;for(let g=0;g<n.length;g+=1){o+=3;for(let y=0;y<n[g].length;y+=1)o+=2+n[g][y].length}const c=new Uint8Array(o);c.set(a,0),o=a.length;const u=n.length-1;for(let g=0;g<n.length;g+=1){c.set(new Uint8Array([32+g|(g===u?128:0),0,n[g].length]),o),o+=3;for(let y=0;y<n[g].length;y+=1)c.set(new Uint8Array([n[g][y].length>>8,n[g][y].length&255]),o),o+=2,c.set(n[g][y],o),o+=n[g][y].length}const l=pr.box(pr.types.hvcC,c),d=e.width,f=e.height,m=e.pixelRatio[0],p=e.pixelRatio[1];return pr.box(pr.types.hvc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,d>>8&255,d&255,f>>8&255,f&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),l,pr.box(pr.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),pr.box(pr.types.pasp,new Uint8Array([m>>24,m>>16&255,m>>8&255,m&255,p>>24,p>>16&255,p>>8&255,p&255])))}}pr.types=void 0;pr.HDLR_TYPES=void 0;pr.STTS=void 0;pr.STSC=void 0;pr.STCO=void 0;pr.STSZ=void 0;pr.VMHD=void 0;pr.SMHD=void 0;pr.STSD=void 0;pr.FTYP=void 0;pr.DINF=void 0;const sse=9e4;function QF(t,e,r=1,n=!1){const i=t*e*r;return n?Math.round(i):i}function E9e(t,e,r=1,n=!1){return QF(t,e,1/r,n)}function mw(t,e=!1){return QF(t,1e3,1/sse,e)}function S9e(t,e=1){return QF(t,sse,1/e)}function cG(t){const{baseTime:e,timescale:r,trackId:n}=t;return`${e/r} (${e}/${r}) trackId: ${n}`}const j9e=10*1e3,T9e=1024,C9e=1152,N9e=1536;let vx=null,MI=null;function uG(t,e,r,n){return{duration:e,size:r,cts:n,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:t?2:1,isNonSync:t?0:1}}}class pj extends um{constructor(e,r,n,i){if(super("mp4-remuxer",i),this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextVideoTs=null,this.nextAudioTs=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.videoTrackConfig=void 0,this.observer=e,this.config=r,this.typeSupported=n,this.ISGenerated=!1,vx===null){const o=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);vx=o?parseInt(o[1]):0}if(MI===null){const a=navigator.userAgent.match(/Safari\/(\d+)/i);MI=a?parseInt(a[1]):0}}destroy(){this.config=this.videoTrackConfig=this._initPTS=this._initDTS=null}resetTimeStamp(e){const r=this._initPTS;(!r||!e||e.trackId!==r.trackId||e.baseTime!==r.baseTime||e.timescale!==r.timescale)&&this.log(`Reset initPTS: ${r&&cG(r)} > ${e&&cG(e)}`),this._initPTS=this._initDTS=e}resetNextTimestamp(){this.log("reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){this.log("ISGenerated flag reset"),this.ISGenerated=!1,this.videoTrackConfig=void 0}getVideoStartPts(e){let r=!1;const n=e[0].pts,i=e.reduce((a,o)=>{let c=o.pts,u=c-a;return u<-4294967296&&(r=!0,c=mf(c,n),u=c-a),u>0?a:c},n);return r&&this.debug("PTS rollover detected"),i}remux(e,r,n,i,a,o,c,u){let l,d,f,m,p,g,y=a,x=a;const w=e.pid>-1,_=r.pid>-1,E=r.samples.length,N=e.samples.length>0,C=c&&E>0||E>1;if((!w||N)&&(!_||C)||this.ISGenerated||c){if(this.ISGenerated){var D,U,G,q;const we=this.videoTrackConfig;(we&&(r.width!==we.width||r.height!==we.height||((D=r.pixelRatio)==null?void 0:D[0])!==((U=we.pixelRatio)==null?void 0:U[0])||((G=r.pixelRatio)==null?void 0:G[1])!==((q=we.pixelRatio)==null?void 0:q[1]))||!we&&C||this.nextAudioTs===null&&N)&&this.resetInitSegment()}this.ISGenerated||(f=this.generateIS(e,r,a,o));const J=this.isVideoContiguous;let de=-1,xe;if(C&&(de=k9e(r.samples),!J&&this.config.forceKeyFrameOnDiscontinuity))if(g=!0,de>0){this.warn(`Dropped ${de} out of ${E} video samples due to a missing keyframe`);const we=this.getVideoStartPts(r.samples);r.samples=r.samples.slice(de),r.dropped+=de,x+=(r.samples[0].pts-we)/r.inputTimeScale,xe=x}else de===-1&&(this.warn(`No keyframe found out of ${E} video samples`),g=!1);if(this.ISGenerated){if(N&&C){const we=this.getVideoStartPts(r.samples),ne=(mf(e.samples[0].pts,we)-we)/r.inputTimeScale;y+=Math.max(0,ne),x+=Math.max(0,-ne)}if(N){if(e.samplerate||(this.warn("regenerate InitSegment as audio detected"),f=this.generateIS(e,r,a,o)),d=this.remuxAudio(e,y,this.isAudioContiguous,o,_||C||u===fi.AUDIO?x:void 0),C){const we=d?d.endPTS-d.startPTS:0;r.inputTimeScale||(this.warn("regenerate InitSegment as video detected"),f=this.generateIS(e,r,a,o)),l=this.remuxVideo(r,x,J,we)}}else C&&(l=this.remuxVideo(r,x,J,0));l&&(l.firstKeyFrame=de,l.independent=de!==-1,l.firstKeyFramePTS=xe)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(n.samples.length&&(p=ase(n,a,this._initPTS,this._initDTS)),i.samples.length&&(m=ose(i,a,this._initPTS))),{audio:d,video:l,initSegment:f,independent:g,text:m,id3:p}}computeInitPts(e,r,n,i){const a=Math.round(n*r);let o=mf(e,a);if(o<a+r)for(this.log(`Adjusting PTS for rollover in timeline near ${(a-o)/r} ${i}`);o<a+r;)o+=8589934592;return o-a}generateIS(e,r,n,i){const a=e.samples,o=r.samples,c=this.typeSupported,u={},l=this._initPTS;let d=!l||i,f="audio/mp4",m,p,g,y=-1;if(d&&(m=p=1/0),e.config&&a.length){switch(e.timescale=e.samplerate,e.segmentCodec){case"mp3":c.mpeg?(f="audio/mpeg",e.codec=""):c.mp3&&(e.codec="mp3");break;case"ac3":e.codec="ac-3";break}u.audio={id:"audio",container:f,codec:e.codec,initSegment:e.segmentCodec==="mp3"&&c.mpeg?new Uint8Array(0):pr.initSegment([e]),metadata:{channelCount:e.channelCount}},d&&(y=e.id,g=e.inputTimeScale,!l||g!==l.timescale?m=p=this.computeInitPts(a[0].pts,g,n,"audio"):d=!1)}if(r.sps&&r.pps&&o.length){if(r.timescale=r.inputTimeScale,u.video={id:"main",container:"video/mp4",codec:r.codec,initSegment:pr.initSegment([r]),metadata:{width:r.width,height:r.height}},d)if(y=r.id,g=r.inputTimeScale,!l||g!==l.timescale){const x=this.getVideoStartPts(o),w=mf(o[0].dts,x),_=this.computeInitPts(w,g,n,"video"),E=this.computeInitPts(x,g,n,"video");p=Math.min(p,_),m=Math.min(m,E)}else d=!1;this.videoTrackConfig={width:r.width,height:r.height,pixelRatio:r.pixelRatio}}if(Object.keys(u).length)return this.ISGenerated=!0,d?(l&&this.warn(`Timestamps at playlist time: ${i?"":"~"}${n} ${m/g} != initPTS: ${l.baseTime/l.timescale} (${l.baseTime}/${l.timescale}) trackId: ${l.trackId}`),this.log(`Found initPTS at playlist time: ${n} offset: ${m/g} (${m}/${g}) trackId: ${y}`),this._initPTS={baseTime:m,timescale:g,trackId:y},this._initDTS={baseTime:p,timescale:g,trackId:y}):m=g=void 0,{tracks:u,initPTS:m,timescale:g,trackId:y}}remuxVideo(e,r,n,i){const a=e.inputTimeScale,o=e.samples,c=[],u=o.length,l=this._initPTS,d=l.baseTime*a/l.timescale;let f=this.nextVideoTs,m=8,p=this.videoSampleDuration,g,y,x=Number.POSITIVE_INFINITY,w=Number.NEGATIVE_INFINITY,_=!1;if(!n||f===null){const be=d+r*a,ue=o[0].pts-mf(o[0].dts,o[0].pts);vx&&f!==null&&Math.abs(be-ue-(f+d))<15e3?n=!0:f=be-ue-d}const E=f+d;for(let be=0;be<u;be++){const ue=o[be];ue.pts=mf(ue.pts,E),ue.dts=mf(ue.dts,E),ue.dts<o[be>0?be-1:be].dts&&(_=!0)}_&&o.sort(function(be,ue){const Pe=be.dts-ue.dts,Re=be.pts-ue.pts;return Pe||Re}),g=o[0].dts,y=o[o.length-1].dts;const N=y-g,C=N?Math.round(N/(u-1)):p||e.inputTimeScale/30;if(n){const be=g-E,ue=be>C,Pe=be<-1;if((ue||Pe)&&(ue?this.warn(`${(e.segmentCodec||"").toUpperCase()}: ${mw(be,!0)} ms (${be}dts) hole between fragments detected at ${r.toFixed(3)}`):this.warn(`${(e.segmentCodec||"").toUpperCase()}: ${mw(-be,!0)} ms (${be}dts) overlapping between fragments detected at ${r.toFixed(3)}`),!Pe||E>=o[0].pts||vx)){g=E;const Re=o[0].pts-be;if(ue)o[0].dts=g,o[0].pts=Re;else{let He=!0;for(let Fe=0;Fe<o.length&&!(o[Fe].dts>Re&&He);Fe++){const ft=o[Fe].pts;if(o[Fe].dts-=be,o[Fe].pts-=be,Fe<o.length-1){const at=o[Fe+1].pts,De=o[Fe].pts,ut=at<=De,et=at<=ft;He=ut==et}}}this.log(`Video: Initial PTS/DTS adjusted: ${mw(Re,!0)}/${mw(g,!0)}, delta: ${mw(be,!0)} ms`)}}g=Math.max(0,g);let I=0,D=0,U=g;for(let be=0;be<u;be++){const ue=o[be],Pe=ue.units,Re=Pe.length;let He=0;for(let Fe=0;Fe<Re;Fe++)He+=Pe[Fe].data.length;D+=He,I+=Re,ue.length=He,ue.dts<U?(ue.dts=U,U+=C/4|0||1):U=ue.dts,x=Math.min(ue.pts,x),w=Math.max(ue.pts,w)}y=o[u-1].dts;const G=D+4*I+8;let q;try{q=new Uint8Array(G)}catch(be){this.observer.emit(Be.ERROR,Be.ERROR,{type:Oi.MUX_ERROR,details:br.REMUX_ALLOC_ERROR,fatal:!1,error:be,bytes:G,reason:`fail allocating video mdat ${G}`});return}const J=new DataView(q.buffer);J.setUint32(0,G),q.set(pr.types.mdat,4);let de=!1,xe=Number.POSITIVE_INFINITY,we=Number.POSITIVE_INFINITY,ve=Number.NEGATIVE_INFINITY,ne=Number.NEGATIVE_INFINITY;for(let be=0;be<u;be++){const ue=o[be],Pe=ue.units;let Re=0;for(let ft=0,at=Pe.length;ft<at;ft++){const De=Pe[ft],ut=De.data,et=De.data.byteLength;J.setUint32(m,et),m+=4,q.set(ut,m),m+=et,Re+=4+et}let He;if(be<u-1)p=o[be+1].dts-ue.dts,He=o[be+1].pts-ue.pts;else{const ft=this.config,at=be>0?ue.dts-o[be-1].dts:C;if(He=be>0?ue.pts-o[be-1].pts:C,ft.stretchShortVideoTrack&&this.nextAudioTs!==null){const De=Math.floor(ft.maxBufferHole*a),ut=(i?x+i*a:this.nextAudioTs+d)-ue.pts;ut>De?(p=ut-at,p<0?p=at:de=!0,this.log(`It is approximately ${ut/90} ms to the next segment; using duration ${p/90} ms for the last video frame.`)):p=at}else p=at}const Fe=Math.round(ue.pts-ue.dts);xe=Math.min(xe,p),ve=Math.max(ve,p),we=Math.min(we,He),ne=Math.max(ne,He),c.push(uG(ue.key,p,Re,Fe))}if(c.length){if(vx){if(vx<70){const be=c[0].flags;be.dependsOn=2,be.isNonSync=0}}else if(MI&&ne-we<ve-xe&&C/ve<.025&&c[0].cts===0){this.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let be=g;for(let ue=0,Pe=c.length;ue<Pe;ue++){const Re=be+c[ue].duration,He=be+c[ue].cts;if(ue<Pe-1){const Fe=Re+c[ue+1].cts;c[ue].duration=Fe-He}else c[ue].duration=ue?c[ue-1].duration:C;c[ue].cts=0,be=Re}}}p=de||!p?C:p;const ae=y+p;this.nextVideoTs=f=ae-d,this.videoSampleDuration=p,this.isVideoContiguous=!0;const Ce={data1:pr.moof(e.sequenceNumber++,g,nl(e,{samples:c})),data2:q,startPTS:(x-d)/a,endPTS:(w+p-d)/a,startDTS:(g-d)/a,endDTS:f/a,type:"video",hasAudio:!1,hasVideo:!0,nb:c.length,dropped:e.dropped};return e.samples=[],e.dropped=0,Ce}getSamplesPerFrame(e){switch(e.segmentCodec){case"mp3":return C9e;case"ac3":return N9e;default:return T9e}}remuxAudio(e,r,n,i,a){const o=e.inputTimeScale,c=e.samplerate?e.samplerate:o,u=o/c,l=this.getSamplesPerFrame(e),d=l*u,f=this._initPTS,m=e.segmentCodec==="mp3"&&this.typeSupported.mpeg,p=[],g=a!==void 0;let y=e.samples,x=m?0:8,w=this.nextAudioTs||-1;const _=f.baseTime*o/f.timescale,E=_+r*o;if(this.isAudioContiguous=n=n||y.length&&w>0&&(i&&Math.abs(E-(w+_))<9e3||Math.abs(mf(y[0].pts,E)-(w+_))<20*d),y.forEach(function(ne){ne.pts=mf(ne.pts,E)}),!n||w<0){const ne=y.length;if(y=y.filter(ae=>ae.pts>=0),ne!==y.length&&this.warn(`Removed ${y.length-ne} of ${ne} samples (initPTS ${_} / ${o})`),!y.length)return;a===0?w=0:i&&!g?w=Math.max(0,E-_):w=y[0].pts-_}if(e.segmentCodec==="aac"){const ne=this.config.maxAudioFramesDrift;for(let ae=0,oe=w+_;ae<y.length;ae++){const Ie=y[ae],Ce=Ie.pts,be=Ce-oe,ue=Math.abs(1e3*be/o);if(be<=-ne*d&&g)ae===0&&(this.warn(`Audio frame @ ${(Ce/o).toFixed(3)}s overlaps marker by ${Math.round(1e3*be/o)} ms.`),this.nextAudioTs=w=Ce-_,oe=Ce);else if(be>=ne*d&&ue<j9e&&g){let Pe=Math.round(be/d);for(oe=Ce-Pe*d;oe<0&&Pe&&d;)Pe--,oe+=d;ae===0&&(this.nextAudioTs=w=oe-_),this.warn(`Injecting ${Pe} audio frames @ ${((oe-_)/o).toFixed(3)}s due to ${Math.round(1e3*be/o)} ms gap.`);for(let Re=0;Re<Pe;Re++){let He=_9e.getSilentFrame(e.parsedCodec||e.manifestCodec||e.codec,e.channelCount);He||(this.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),He=Ie.unit.subarray()),y.splice(ae,0,{unit:He,pts:oe}),oe+=d,ae++}}Ie.pts=oe,oe+=d}}let N=null,C=null,I,D=0,U=y.length;for(;U--;)D+=y[U].unit.byteLength;for(let ne=0,ae=y.length;ne<ae;ne++){const oe=y[ne],Ie=oe.unit;let Ce=oe.pts;if(C!==null){const ue=p[ne-1];ue.duration=Math.round((Ce-C)/u)}else if(n&&e.segmentCodec==="aac"&&(Ce=w+_),N=Ce,D>0){D+=x;try{I=new Uint8Array(D)}catch(ue){this.observer.emit(Be.ERROR,Be.ERROR,{type:Oi.MUX_ERROR,details:br.REMUX_ALLOC_ERROR,fatal:!1,error:ue,bytes:D,reason:`fail allocating audio mdat ${D}`});return}m||(new DataView(I.buffer).setUint32(0,D),I.set(pr.types.mdat,4))}else return;I.set(Ie,x);const be=Ie.byteLength;x+=be,p.push(uG(!0,l,be,0)),C=Ce}const G=p.length;if(!G)return;const q=p[p.length-1];w=C-_,this.nextAudioTs=w+u*q.duration;const J=m?new Uint8Array(0):pr.moof(e.sequenceNumber++,N/u,nl({},e,{samples:p}));e.samples=[];const de=(N-_)/o,xe=this.nextAudioTs/o,ve={data1:J,data2:I,startPTS:de,endPTS:xe,startDTS:de,endDTS:xe,type:"audio",hasAudio:!0,hasVideo:!1,nb:G};return this.isAudioContiguous=!0,ve}}function mf(t,e){let r;if(e===null)return t;for(e<t?r=-8589934592:r=8589934592;Math.abs(t-e)>4294967296;)t+=r;return t}function k9e(t){for(let e=0;e<t.length;e++)if(t[e].key)return e;return-1}function ase(t,e,r,n){const i=t.samples.length;if(!i)return;const a=t.inputTimeScale;for(let c=0;c<i;c++){const u=t.samples[c];u.pts=mf(u.pts-r.baseTime*a/r.timescale,e*a)/a,u.dts=mf(u.dts-n.baseTime*a/n.timescale,e*a)/a}const o=t.samples;return t.samples=[],{samples:o}}function ose(t,e,r){const n=t.samples.length;if(!n)return;const i=t.inputTimeScale;for(let o=0;o<n;o++){const c=t.samples[o];c.pts=mf(c.pts-r.baseTime*i/r.timescale,e*i)/i}t.samples.sort((o,c)=>o.pts-c.pts);const a=t.samples;return t.samples=[],{samples:a}}class L9e extends um{constructor(e,r,n,i){super("passthrough-remuxer",i),this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null,this.isVideoContiguous=!1}destroy(){}resetTimeStamp(e){this.lastEndTime=null;const r=this.initPTS;r&&e&&r.baseTime===e.baseTime&&r.timescale===e.timescale||(this.initPTS=e)}resetNextTimestamp(){this.isVideoContiguous=!1,this.lastEndTime=null}resetInitSegment(e,r,n,i){this.audioCodec=r,this.videoCodec=n,this.generateInitSegment(e,i),this.emitInitSegment=!0}generateInitSegment(e,r){let{audioCodec:n,videoCodec:i}=this;if(!(e!=null&&e.byteLength)){this.initTracks=void 0,this.initData=void 0;return}const{audio:a,video:o}=this.initData=fie(e);if(r)v7e(e,r);else{const u=a||o;u!=null&&u.encrypted&&this.warn(`Init segment with encrypted track with has no key ("${u.codec}")!`)}a&&(n=dG(a,cl.AUDIO,this)),o&&(i=dG(o,cl.VIDEO,this));const c={};a&&o?c.audiovideo={container:"video/mp4",codec:n+","+i,supplemental:o.supplemental,encrypted:o.encrypted,initSegment:e,id:"main"}:a?c.audio={container:"audio/mp4",codec:n,encrypted:a.encrypted,initSegment:e,id:"audio"}:o?c.video={container:"video/mp4",codec:i,supplemental:o.supplemental,encrypted:o.encrypted,initSegment:e,id:"main"}:this.warn("initSegment does not contain moov or trak boxes."),this.initTracks=c}remux(e,r,n,i,a,o){var c,u;let{initPTS:l,lastEndTime:d}=this;const f={audio:void 0,video:void 0,text:i,id3:n,initSegment:void 0};Xn(d)||(d=this.lastEndTime=a||0);const m=r.samples;if(!m.length)return f;const p={initPTS:void 0,timescale:void 0,trackId:void 0};let g=this.initData;if((c=g)!=null&&c.length||(this.generateInitSegment(m),g=this.initData),!((u=g)!=null&&u.length))return this.warn("Failed to generate initSegment."),f;this.emitInitSegment&&(p.tracks=this.initTracks,this.emitInitSegment=!1);const y=x7e(m,g,this),x=g.audio?y[g.audio.id]:null,w=g.video?y[g.video.id]:null,_=ES(w,1/0),E=ES(x,1/0),N=ES(w,0,!0),C=ES(x,0,!0);let I=a,D=0;const U=x&&(!w||!l&&E<_||l&&l.trackId===g.audio.id),G=U?x:w;if(G){const oe=G.timescale,Ie=G.start-a*oe,Ce=U?g.audio.id:g.video.id;I=G.start/oe,D=U?C-E:N-_,(o||!l)&&(I9e(l,I,a,D)||oe!==l.timescale)&&(l&&this.warn(`Timestamps at playlist time: ${o?"":"~"}${a} ${Ie/oe} != initPTS: ${l.baseTime/l.timescale} (${l.baseTime}/${l.timescale}) trackId: ${l.trackId}`),this.log(`Found initPTS at playlist time: ${a} offset: ${I-a} (${Ie}/${oe}) trackId: ${Ce}`),l=null,p.initPTS=Ie,p.timescale=oe,p.trackId=Ce)}else this.warn(`No audio or video samples found for initPTS at playlist time: ${a}`);l?(p.initPTS=l.baseTime,p.timescale=l.timescale,p.trackId=l.trackId):((!p.timescale||p.trackId===void 0||p.initPTS===void 0)&&(this.warn("Could not set initPTS"),p.initPTS=I,p.timescale=1,p.trackId=-1),this.initPTS=l={baseTime:p.initPTS,timescale:p.timescale,trackId:p.trackId});const q=I-l.baseTime/l.timescale,J=q+D;D>0?this.lastEndTime=J:(this.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());const de=!!g.audio,xe=!!g.video;let we="";de&&(we+="audio"),xe&&(we+="video");const ve=(g.audio?g.audio.encrypted:!1)||(g.video?g.video.encrypted:!1),ne={data1:m,startPTS:q,startDTS:q,endPTS:J,endDTS:J,type:we,hasAudio:de,hasVideo:xe,nb:1,dropped:0,encrypted:ve};f.audio=de&&!xe?ne:void 0,f.video=xe?ne:void 0;const ae=w?.sampleCount;if(ae){const oe=w.keyFrameIndex,Ie=oe!==-1;ne.nb=ae,ne.dropped=oe===0||this.isVideoContiguous?0:Ie?oe:ae,ne.independent=Ie,ne.firstKeyFrame=oe,Ie&&w.keyFrameStart&&(ne.firstKeyFramePTS=(w.keyFrameStart-l.baseTime)/l.timescale),this.isVideoContiguous||(f.independent=Ie),this.isVideoContiguous||(this.isVideoContiguous=Ie),ne.dropped&&this.warn(`fmp4 does not start with IDR: firstIDR ${oe}/${ae} dropped: ${ne.dropped} start: ${ne.firstKeyFramePTS||"NA"}`)}return f.initSegment=p,f.id3=ase(n,a,l,l),i.samples.length&&(f.text=ose(i,a,l)),f}}function ES(t,e,r=!1){return t?.start!==void 0?(t.start+(r?t.duration:0))/t.timescale:e}function I9e(t,e,r,n){if(t===null)return!0;const i=Math.max(n,1),a=e-t.baseTime/t.timescale;return Math.abs(a-r)>i}function dG(t,e,r){const n=t.codec;return n&&n.length>4?n:e===cl.AUDIO?n==="ec-3"||n==="ac-3"||n==="alac"?n:n==="fLaC"||n==="Opus"?rN(n,!1):(r.warn(`Unhandled audio codec "${n}" in mp4 MAP`),n||"mp4a"):(r.warn(`Unhandled video codec "${n}" in mp4 MAP`),n||"avc1")}let Op;try{Op=self.performance.now.bind(self.performance)}catch{Op=Date.now}const gj=[{demux:g9e,remux:L9e},{demux:b0,remux:pj},{demux:f9e,remux:pj},{demux:A9e,remux:pj}];gj.splice(2,0,{demux:m9e,remux:pj});class hG{constructor(e,r,n,i,a,o){this.asyncResult=!1,this.logger=void 0,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=r,this.config=n,this.id=a,this.logger=o}configure(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()}push(e,r,n,i){const a=n.transmuxing;a.executeStart=Op();let o=new Uint8Array(e);const{currentTransmuxState:c,transmuxConfig:u}=this;i&&(this.currentTransmuxState=i);const{contiguous:l,discontinuity:d,trackSwitch:f,accurateTimeOffset:m,timeOffset:p,initSegmentChange:g}=i||c,{audioCodec:y,videoCodec:x,defaultInitPts:w,duration:_,initSegmentData:E}=u,N=B9e(o,r);if(N&&Sb(N.method)){const U=this.getDecrypter(),G=PF(N.method);if(U.isSync()){let q=U.softwareDecrypt(o,N.key.buffer,N.iv.buffer,G);if(n.part>-1){const de=U.flush();q=de&&de.buffer}if(!q)return a.executeEnd=Op(),FI(n);o=new Uint8Array(q)}else return this.asyncResult=!0,this.decryptionPromise=U.webCryptoDecrypt(o,N.key.buffer,N.iv.buffer,G).then(q=>{const J=this.push(q,null,n);return this.decryptionPromise=null,J}),this.decryptionPromise}const C=this.needsProbing(d,f);if(C){const U=this.configureTransmuxer(o);if(U)return this.logger.warn(`[transmuxer] ${U.message}`),this.observer.emit(Be.ERROR,Be.ERROR,{type:Oi.MEDIA_ERROR,details:br.FRAG_PARSING_ERROR,fatal:!1,error:U,reason:U.message}),a.executeEnd=Op(),FI(n)}(d||f||g||C)&&this.resetInitSegment(E,y,x,_,r),(d||g||C)&&this.resetInitialTimestamp(w),l||this.resetContiguity();const I=this.transmux(o,N,p,m,n);this.asyncResult=m_(I);const D=this.currentTransmuxState;return D.contiguous=!0,D.discontinuity=!1,D.trackSwitch=!1,a.executeEnd=Op(),I}flush(e){const r=e.transmuxing;r.executeStart=Op();const{decrypter:n,currentTransmuxState:i,decryptionPromise:a}=this;if(a)return this.asyncResult=!0,a.then(()=>this.flush(e));const o=[],{timeOffset:c}=i;if(n){const f=n.flush();f&&o.push(this.push(f.buffer,null,e))}const{demuxer:u,remuxer:l}=this;if(!u||!l){r.executeEnd=Op();const f=[FI(e)];return this.asyncResult?Promise.resolve(f):f}const d=u.flush(c);return m_(d)?(this.asyncResult=!0,d.then(f=>(this.flushRemux(o,f,e),o))):(this.flushRemux(o,d,e),this.asyncResult?Promise.resolve(o):o)}flushRemux(e,r,n){const{audioTrack:i,videoTrack:a,id3Track:o,textTrack:c}=r,{accurateTimeOffset:u,timeOffset:l}=this.currentTransmuxState;this.logger.log(`[transmuxer.ts]: Flushed ${this.id} sn: ${n.sn}${n.part>-1?" part: "+n.part:""} of ${this.id===fi.MAIN?"level":"track"} ${n.level}`);const d=this.remuxer.remux(i,a,o,c,l,u,!0,this.id);e.push({remuxResult:d,chunkMeta:n}),n.transmuxing.executeEnd=Op()}resetInitialTimestamp(e){const{demuxer:r,remuxer:n}=this;!r||!n||(r.resetTimeStamp(e),n.resetTimeStamp(e))}resetContiguity(){const{demuxer:e,remuxer:r}=this;!e||!r||(e.resetContiguity(),r.resetNextTimestamp())}resetInitSegment(e,r,n,i,a){const{demuxer:o,remuxer:c}=this;!o||!c||(o.resetInitSegment(e,r,n,i),c.resetInitSegment(e,r,n,a))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(e,r,n,i,a){let o;return r&&r.method==="SAMPLE-AES"?o=this.transmuxSampleAes(e,r,n,i,a):o=this.transmuxUnencrypted(e,n,i,a),o}transmuxUnencrypted(e,r,n,i){const{audioTrack:a,videoTrack:o,id3Track:c,textTrack:u}=this.demuxer.demux(e,r,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(a,o,c,u,r,n,!1,this.id),chunkMeta:i}}transmuxSampleAes(e,r,n,i,a){return this.demuxer.demuxSampleAes(e,r,n).then(o=>({remuxResult:this.remuxer.remux(o.audioTrack,o.videoTrack,o.id3Track,o.textTrack,n,i,!1,this.id),chunkMeta:a}))}configureTransmuxer(e){const{config:r,observer:n,typeSupported:i}=this;let a;for(let f=0,m=gj.length;f<m;f++){var o;if((o=gj[f].demux)!=null&&o.probe(e,this.logger)){a=gj[f];break}}if(!a)return new Error("Failed to find demuxer by probing fragment data");const c=this.demuxer,u=this.remuxer,l=a.remux,d=a.demux;(!u||!(u instanceof l))&&(this.remuxer=new l(n,r,i,this.logger)),(!c||!(c instanceof d))&&(this.demuxer=new d(n,r,i,this.logger),this.probe=d.probe)}needsProbing(e,r){return!this.demuxer||!this.remuxer||e||r}getDecrypter(){let e=this.decrypter;return e||(e=this.decrypter=new IF(this.config)),e}}function B9e(t,e){let r=null;return t.byteLength>0&&e?.key!=null&&e.iv!==null&&e.method!=null&&(r=e),r}const FI=t=>({remuxResult:{},chunkMeta:t});function m_(t){return"then"in t&&t.then instanceof Function}class P9e{constructor(e,r,n,i,a){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=r,this.initSegmentData=n,this.duration=i,this.defaultInitPts=a||null}}class O9e{constructor(e,r,n,i,a,o){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=r,this.accurateTimeOffset=n,this.trackSwitch=i,this.timeOffset=a,this.initSegmentChange=o}}let fG=0;class lse{constructor(e,r,n,i){this.error=null,this.hls=void 0,this.id=void 0,this.instanceNo=fG++,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0,this.onWorkerMessage=u=>{const l=u.data,d=this.hls;if(!(!d||!(l!=null&&l.event)||l.instanceNo!==this.instanceNo))switch(l.event){case"init":{var f;const m=(f=this.workerContext)==null?void 0:f.objectURL;m&&self.URL.revokeObjectURL(m);break}case"transmuxComplete":{this.handleTransmuxComplete(l.data);break}case"flush":{this.onFlush(l.data);break}case"workerLog":{d.logger[l.data.logType]&&d.logger[l.data.logType](l.data.message);break}default:{l.data=l.data||{},l.data.frag=this.frag,l.data.part=this.part,l.data.id=this.id,d.trigger(l.event,l.data);break}}},this.onWorkerError=u=>{if(!this.hls)return;const l=new Error(`${u.message}  (${u.filename}:${u.lineno})`);this.hls.config.enableWorker=!1,this.hls.logger.warn(`Error in "${this.id}" Web Worker, fallback to inline`),this.hls.trigger(Be.ERROR,{type:Oi.OTHER_ERROR,details:br.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:l})};const a=e.config;this.hls=e,this.id=r,this.useWorker=!!a.enableWorker,this.onTransmuxComplete=n,this.onFlush=i;const o=(u,l)=>{l=l||{},l.frag=this.frag||void 0,u===Be.ERROR&&(l=l,l.parent=this.id,l.part=this.part,this.error=l.error),this.hls.trigger(u,l)};this.observer=new DF,this.observer.on(Be.FRAG_DECRYPTED,o),this.observer.on(Be.ERROR,o);const c=CK(a.preferManagedMediaSource);if(this.useWorker&&typeof Worker<"u"){const u=this.hls.logger;if(a.workerPath||F$e()){try{a.workerPath?(u.log(`loading Web Worker ${a.workerPath} for "${r}"`),this.workerContext=$$e(a.workerPath)):(u.log(`injecting Web Worker for "${r}"`),this.workerContext=U$e());const{worker:d}=this.workerContext;d.addEventListener("message",this.onWorkerMessage),d.addEventListener("error",this.onWorkerError),d.postMessage({instanceNo:this.instanceNo,cmd:"init",typeSupported:c,id:r,config:fl(a)})}catch(d){u.warn(`Error setting up "${r}" Web Worker, fallback to inline`,d),this.terminateWorker(),this.error=null,this.transmuxer=new hG(this.observer,c,a,"",r,e.logger)}return}}this.transmuxer=new hG(this.observer,c,a,"",r,e.logger)}reset(){if(this.frag=null,this.part=null,this.workerContext){const e=this.instanceNo;this.instanceNo=fG++;const r=this.hls.config,n=CK(r.preferManagedMediaSource);this.workerContext.worker.postMessage({instanceNo:this.instanceNo,cmd:"reset",resetNo:e,typeSupported:n,id:this.id,config:fl(r)})}}terminateWorker(){if(this.workerContext){const{worker:e}=this.workerContext;this.workerContext=null,e.removeEventListener("message",this.onWorkerMessage),e.removeEventListener("error",this.onWorkerError),H$e(this.hls.config.workerPath)}}destroy(){if(this.workerContext)this.terminateWorker(),this.onWorkerMessage=this.onWorkerError=null;else{const r=this.transmuxer;r&&(r.destroy(),this.transmuxer=null)}const e=this.observer;e&&e.removeAllListeners(),this.frag=null,this.part=null,this.observer=null,this.hls=null}push(e,r,n,i,a,o,c,u,l,d){var f,m;l.transmuxing.start=self.performance.now();const{instanceNo:p,transmuxer:g}=this,y=o?o.start:a.start,x=a.decryptdata,w=this.frag,_=!(w&&a.cc===w.cc),E=!(w&&l.level===w.level),N=w?l.sn-w.sn:-1,C=this.part?l.part-this.part.index:-1,I=N===0&&l.id>1&&l.id===w?.stats.chunkCount,D=!E&&(N===1||N===0&&(C===1||I&&C<=0)),U=self.performance.now();(E||N||a.stats.parsing.start===0)&&(a.stats.parsing.start=U),o&&(C||!D)&&(o.stats.parsing.start=U);const G=!(w&&((f=a.initSegment)==null?void 0:f.url)===((m=w.initSegment)==null?void 0:m.url)),q=new O9e(_,D,u,E,y,G);if(!D||_||G){this.hls.logger.log(`[transmuxer-interface]: Starting new transmux session for ${a.type} sn: ${l.sn}${l.part>-1?" part: "+l.part:""} ${this.id===fi.MAIN?"level":"track"}: ${l.level} id: ${l.id}
        discontinuity: ${_}
        trackSwitch: ${E}
        contiguous: ${D}
        accurateTimeOffset: ${u}
        timeOffset: ${y}
        initSegmentChange: ${G}`);const J=new P9e(n,i,r,c,d);this.configureTransmuxer(J)}if(this.frag=a,this.part=o,this.workerContext)this.workerContext.worker.postMessage({instanceNo:p,cmd:"demux",data:e,decryptdata:x,chunkMeta:l,state:q},e instanceof ArrayBuffer?[e]:[]);else if(g){const J=g.push(e,x,l,q);m_(J)?J.then(de=>{this.handleTransmuxComplete(de)}).catch(de=>{this.transmuxerError(de,l,"transmuxer-interface push error")}):this.handleTransmuxComplete(J)}}flush(e){e.transmuxing.start=self.performance.now();const{instanceNo:r,transmuxer:n}=this;if(this.workerContext)this.workerContext.worker.postMessage({instanceNo:r,cmd:"flush",chunkMeta:e});else if(n){const i=n.flush(e);m_(i)?i.then(a=>{this.handleFlushResult(a,e)}).catch(a=>{this.transmuxerError(a,e,"transmuxer-interface flush error")}):this.handleFlushResult(i,e)}}transmuxerError(e,r,n){this.hls&&(this.error=e,this.hls.trigger(Be.ERROR,{type:Oi.MEDIA_ERROR,details:br.FRAG_PARSING_ERROR,chunkMeta:r,frag:this.frag||void 0,part:this.part||void 0,fatal:!1,error:e,err:e,reason:n}))}handleFlushResult(e,r){e.forEach(n=>{this.handleTransmuxComplete(n)}),this.onFlush(r)}configureTransmuxer(e){const{instanceNo:r,transmuxer:n}=this;this.workerContext?this.workerContext.worker.postMessage({instanceNo:r,cmd:"configure",config:e}):n&&n.configure(e)}handleTransmuxComplete(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)}}const mG=100;class R9e extends RF{constructor(e,r,n){super(e,r,n,"audio-stream-controller",fi.AUDIO),this.mainAnchor=null,this.mainFragLoading=null,this.audioOnly=!1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.flushing=!1,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.resetItem()}resetItem(){this.mainDetails=this.mainAnchor=this.mainFragLoading=this.bufferedTrack=this.switchingTrack=this.waitingData=this.cachedTrackLoadedData=null}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(Be.LEVEL_LOADED,this.onLevelLoaded,this),e.on(Be.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(Be.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(Be.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(Be.BUFFER_RESET,this.onBufferReset,this),e.on(Be.BUFFER_CREATED,this.onBufferCreated,this),e.on(Be.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(Be.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(Be.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(Be.FRAG_LOADING,this.onFragLoading,this),e.on(Be.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){const{hls:e}=this;e&&(super.unregisterListeners(),e.off(Be.LEVEL_LOADED,this.onLevelLoaded,this),e.off(Be.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(Be.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(Be.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(Be.BUFFER_RESET,this.onBufferReset,this),e.off(Be.BUFFER_CREATED,this.onBufferCreated,this),e.off(Be.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(Be.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(Be.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(Be.FRAG_LOADING,this.onFragLoading,this),e.off(Be.FRAG_BUFFERED,this.onFragBuffered,this))}onInitPtsFound(e,{frag:r,id:n,initPTS:i,timescale:a,trackId:o}){if(n===fi.MAIN){const c=r.cc,u=this.fragCurrent;if(this.initPTS[c]={baseTime:i,timescale:a,trackId:o},this.log(`InitPTS for cc: ${c} found from main: ${i/a} (${i}/${a}) trackId: ${o}`),this.mainAnchor=r,this.state===qr.WAITING_INIT_PTS){const l=this.waitingData;(!l&&!this.loadingParts||l&&l.frag.cc!==c)&&this.syncWithAnchor(r,l?.frag)}else!this.hls.hasEnoughToStart&&u&&u.cc!==c?(u.abortRequests(),this.syncWithAnchor(r,u)):this.state===qr.IDLE&&this.tick()}}getLoadPosition(){return!this.startFragRequested&&this.nextLoadPosition>=0?this.nextLoadPosition:super.getLoadPosition()}syncWithAnchor(e,r){var n;const i=((n=this.mainFragLoading)==null?void 0:n.frag)||null;if(r&&i?.cc===r.cc)return;const a=(i||e).cc,o=this.getLevelDetails(),c=this.getLoadPosition(),u=Eie(o,a,c);u&&(this.log(`Syncing with main frag at ${u.start} cc ${u.cc}`),this.startFragRequested=!1,this.nextLoadPosition=u.start,this.resetLoadingState(),this.state===qr.IDLE&&this.doTickIdle())}startLoad(e,r){if(!this.levels){this.startPosition=e,this.state=qr.STOPPED;return}const n=this.lastCurrentTime;this.stopLoad(),this.setInterval(mG),n>0&&e===-1?(this.log(`Override startPosition with lastCurrentTime @${n.toFixed(3)}`),e=n,this.state=qr.IDLE):this.state=qr.WAITING_TRACK,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=r?-1:e,this.tick()}doTick(){switch(this.state){case qr.IDLE:this.doTickIdle();break;case qr.WAITING_TRACK:{const{levels:e,trackId:r}=this,n=e?.[r],i=n?.details;if(i&&!this.waitForLive(n)){if(this.waitForCdnTuneIn(i))break;this.state=qr.WAITING_INIT_PTS}break}case qr.FRAG_LOADING_WAITING_RETRY:{this.checkRetryDate();break}case qr.WAITING_INIT_PTS:{const e=this.waitingData;if(e){const{frag:r,part:n,cache:i,complete:a}=e,o=this.mainAnchor;if(this.initPTS[r.cc]!==void 0){this.waitingData=null,this.state=qr.FRAG_LOADING;const c=i.flush().buffer,u={frag:r,part:n,payload:c,networkDetails:null};this._handleFragmentLoadProgress(u),a&&super._handleFragmentLoadComplete(u)}else o&&o.cc!==e.frag.cc&&this.syncWithAnchor(o,e.frag)}else this.state=qr.IDLE}}this.onTickEnd()}resetLoadingState(){const e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null),super.resetLoadingState()}onTickEnd(){const{media:e}=this;e!=null&&e.readyState&&(this.lastCurrentTime=e.currentTime)}doTickIdle(){var e;const{hls:r,levels:n,media:i,trackId:a}=this,o=r.config;if(!this.buffering||!i&&!this.primaryPrefetch&&(this.startFragRequested||!o.startFragPrefetch)||!(n!=null&&n[a]))return;const c=n[a],u=c.details;if(!u||this.waitForLive(c)||this.waitForCdnTuneIn(u)){this.state=qr.WAITING_TRACK,this.startFragRequested=!1;return}const l=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&l&&(this.bufferFlushed=!1,this.afterBufferFlushed(l,cl.AUDIO,fi.AUDIO));const d=this.getFwdBufferInfo(l,fi.AUDIO);if(d===null)return;if(!this.switchingTrack&&this._streamEnded(d,u)){r.trigger(Be.BUFFER_EOS,{type:"audio"}),this.state=qr.ENDED;return}const f=d.len,m=r.maxBufferLength,p=u.fragments,g=p[0].start,y=this.getLoadPosition(),x=this.flushing?y:d.end;if(this.switchingTrack&&i){const E=y;u.PTSKnown&&E<g&&(d.end>g||d.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),i.currentTime=g+.05)}if(f>=m&&!this.switchingTrack&&x<p[p.length-1].start)return;let w=this.getNextFragment(x,u);if(w&&this.isLoopLoading(w,x)&&(w=this.getNextFragmentLoopLoading(w,u,d,fi.MAIN,m)),!w){this.bufferFlushed=!0;return}let _=((e=this.mainFragLoading)==null?void 0:e.frag)||null;if(!this.audioOnly&&this.startFragRequested&&_&&eu(w)&&!w.endList&&(!u.live||!this.loadingParts&&x<this.hls.liveSyncPosition)&&(this.fragmentTracker.getState(_)===$u.OK&&(this.mainFragLoading=_=null),_&&eu(_))){if(w.start>_.end){const N=this.fragmentTracker.getFragAtPos(x,fi.MAIN);N&&N.end>_.end&&(_=N,this.mainFragLoading={frag:N,targetBufferTime:null})}if(w.start>_.end)return}this.loadFragment(w,c,x)}onMediaDetaching(e,r){this.bufferFlushed=this.flushing=!1,super.onMediaDetaching(e,r)}onAudioTracksUpdated(e,{audioTracks:r}){this.resetTransmuxer(),this.levels=r.map(n=>new d_(n))}onAudioTrackSwitching(e,r){const n=!!r.url;this.trackId=r.id;const{fragCurrent:i}=this;i&&(i.abortRequests(),this.removeUnbufferedFrags(i.start)),this.resetLoadingState(),n?(this.switchingTrack=r,this.flushAudioIfNeeded(r),this.state!==qr.STOPPED&&(this.setInterval(mG),this.state=qr.IDLE,this.tick())):(this.resetTransmuxer(),this.switchingTrack=null,this.bufferedTrack=r,this.clearInterval())}onManifestLoading(){super.onManifestLoading(),this.bufferFlushed=this.flushing=this.audioOnly=!1,this.resetItem(),this.trackId=-1}onLevelLoaded(e,r){this.mainDetails=r.details;const n=this.cachedTrackLoadedData;n&&(this.cachedTrackLoadedData=null,this.onAudioTrackLoaded(Be.AUDIO_TRACK_LOADED,n))}onAudioTrackLoaded(e,r){var n;const{levels:i}=this,{details:a,id:o,groupId:c,track:u}=r;if(!i){this.warn(`Audio tracks reset while loading track ${o} "${u.name}" of "${c}"`);return}const l=this.mainDetails;if(!l||a.endCC>l.endCC||l.expired){this.cachedTrackLoadedData=r,this.state!==qr.STOPPED&&(this.state=qr.WAITING_TRACK);return}this.cachedTrackLoadedData=null,this.log(`Audio track ${o} "${u.name}" of "${c}" loaded [${a.startSN},${a.endSN}]${a.lastPartSn?`[part-${a.lastPartSn}-${a.lastPartIndex}]`:""},duration:${a.totalduration}`);const d=i[o];let f=0;if(a.live||(n=d.details)!=null&&n.live){if(this.checkLiveUpdate(a),a.deltaUpdateFailed)return;if(d.details){var m;f=this.alignPlaylists(a,d.details,(m=this.levelLastLoaded)==null?void 0:m.details)}a.alignedSliding||(Hie(a,l),a.alignedSliding||cN(a,l),f=a.fragmentStart)}d.details=a,this.levelLastLoaded=d,this.startFragRequested||this.setStartPosition(l,f),this.hls.trigger(Be.AUDIO_TRACK_UPDATED,{details:a,id:o,groupId:r.groupId}),this.state===qr.WAITING_TRACK&&!this.waitForCdnTuneIn(a)&&(this.state=qr.IDLE),this.tick()}_handleFragmentLoadProgress(e){var r;const n=e.frag,{part:i,payload:a}=e,{config:o,trackId:c,levels:u}=this;if(!u){this.warn(`Audio tracks were reset while fragment load was in progress. Fragment ${n.sn} of level ${n.level} will not be buffered`);return}const l=u[c];if(!l){this.warn("Audio track is undefined on fragment load progress");return}const d=l.details;if(!d){this.warn("Audio track details undefined on fragment load progress"),this.removeUnbufferedFrags(n.start);return}const f=o.defaultAudioCodec||l.audioCodec||"mp4a.40.2";let m=this.transmuxer;m||(m=this.transmuxer=new lse(this.hls,fi.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));const p=this.initPTS[n.cc],g=(r=n.initSegment)==null?void 0:r.data;if(p!==void 0){const x=i?i.index:-1,w=x!==-1,_=new BF(n.level,n.sn,n.stats.chunkCount,a.byteLength,x,w);m.push(a,g,f,"",n,i,d.totalduration,!1,_,p)}else{this.log(`Unknown video PTS for cc ${n.cc}, waiting for video PTS before demuxing audio frag ${n.sn} of [${d.startSN} ,${d.endSN}],track ${c}`);const{cache:y}=this.waitingData=this.waitingData||{frag:n,part:i,cache:new Qie,complete:!1};y.push(new Uint8Array(a)),this.state!==qr.STOPPED&&(this.state=qr.WAITING_INIT_PTS)}}_handleFragmentLoadComplete(e){if(this.waitingData){this.waitingData.complete=!0;return}super._handleFragmentLoadComplete(e)}onBufferReset(){this.mediaBuffer=null}onBufferCreated(e,r){this.bufferFlushed=this.flushing=!1;const n=r.tracks.audio;n&&(this.mediaBuffer=n.buffer||null)}onFragLoading(e,r){!this.audioOnly&&r.frag.type===fi.MAIN&&eu(r.frag)&&(this.mainFragLoading=r,this.state===qr.IDLE&&this.tick())}onFragBuffered(e,r){const{frag:n,part:i}=r;if(n.type!==fi.AUDIO){!this.audioOnly&&n.type===fi.MAIN&&!n.elementaryStreams.video&&!n.elementaryStreams.audiovideo&&(this.audioOnly=!0,this.mainFragLoading=null);return}if(this.fragContextChanged(n)){this.warn(`Fragment ${n.sn}${i?" p: "+i.index:""} of level ${n.level} finished buffering, but was aborted. state: ${this.state}, audioSwitch: ${this.switchingTrack?this.switchingTrack.name:"false"}`);return}if(eu(n)){this.fragPrevious=n;const a=this.switchingTrack;a&&(this.bufferedTrack=a,this.switchingTrack=null,this.hls.trigger(Be.AUDIO_TRACK_SWITCHED,Uo({},a)))}this.fragBufferedComplete(n,i),this.media&&this.tick()}onError(e,r){var n;if(r.fatal){this.state=qr.ERROR;return}switch(r.details){case br.FRAG_GAP:case br.FRAG_PARSING_ERROR:case br.FRAG_DECRYPT_ERROR:case br.FRAG_LOAD_ERROR:case br.FRAG_LOAD_TIMEOUT:case br.KEY_LOAD_ERROR:case br.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(fi.AUDIO,r);break;case br.AUDIO_TRACK_LOAD_ERROR:case br.AUDIO_TRACK_LOAD_TIMEOUT:case br.LEVEL_PARSING_ERROR:!r.levelRetry&&this.state===qr.WAITING_TRACK&&((n=r.context)==null?void 0:n.type)===ba.AUDIO_TRACK&&(this.state=qr.IDLE);break;case br.BUFFER_ADD_CODEC_ERROR:case br.BUFFER_APPEND_ERROR:if(r.parent!=="audio")return;this.reduceLengthAndFlushBuffer(r)||this.resetLoadingState();break;case br.BUFFER_FULL_ERROR:if(r.parent!=="audio")return;this.reduceLengthAndFlushBuffer(r)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case br.INTERNAL_EXCEPTION:this.recoverWorkerError(r);break}}onBufferFlushing(e,{type:r}){r!==cl.VIDEO&&(this.flushing=!0)}onBufferFlushed(e,{type:r}){if(r!==cl.VIDEO){this.flushing=!1,this.bufferFlushed=!0,this.state===qr.ENDED&&(this.state=qr.IDLE);const n=this.mediaBuffer||this.media;n&&(this.afterBufferFlushed(n,r,fi.AUDIO),this.tick())}}_handleTransmuxComplete(e){var r;const n="audio",{hls:i}=this,{remuxResult:a,chunkMeta:o}=e,c=this.getCurrentContext(o);if(!c){this.resetWhenMissingContext(o);return}const{frag:u,part:l,level:d}=c,{details:f}=d,{audio:m,text:p,id3:g,initSegment:y}=a;if(this.fragContextChanged(u)||!f){this.fragmentTracker.removeFragment(u);return}if(this.state=qr.PARSING,this.switchingTrack&&m&&this.completeAudioSwitch(this.switchingTrack),y!=null&&y.tracks){const x=u.initSegment||u;if(this.unhandledEncryptionError(y,u))return;this._bufferInitSegment(d,y.tracks,x,o),i.trigger(Be.FRAG_PARSING_INIT_SEGMENT,{frag:x,id:n,tracks:y.tracks})}if(m){const{startPTS:x,endPTS:w,startDTS:_,endDTS:E}=m;l&&(l.elementaryStreams[cl.AUDIO]={startPTS:x,endPTS:w,startDTS:_,endDTS:E}),u.setElementaryStreamInfo(cl.AUDIO,x,w,_,E),this.bufferFragmentData(m,u,l,o)}if(g!=null&&(r=g.samples)!=null&&r.length){const x=nl({id:n,frag:u,details:f},g);i.trigger(Be.FRAG_PARSING_METADATA,x)}if(p){const x=nl({id:n,frag:u,details:f},p);i.trigger(Be.FRAG_PARSING_USERDATA,x)}}_bufferInitSegment(e,r,n,i){if(this.state!==qr.PARSING||(r.video&&delete r.video,r.audiovideo&&delete r.audiovideo,!r.audio))return;const a=r.audio;a.id=fi.AUDIO;const o=e.audioCodec;this.log(`Init audio buffer, container:${a.container}, codecs[level/parsed]=[${o}/${a.codec}]`),o&&o.split(",").length===1&&(a.levelCodec=o),this.hls.trigger(Be.BUFFER_CODECS,r);const c=a.initSegment;if(c!=null&&c.byteLength){const u={type:"audio",frag:n,part:null,chunkMeta:i,parent:n.type,data:c};this.hls.trigger(Be.BUFFER_APPENDING,u)}this.tickImmediate()}loadFragment(e,r,n){const i=this.fragmentTracker.getState(e);if(this.switchingTrack||i===$u.NOT_LOADED||i===$u.PARTIAL){var a;if(!eu(e))this._loadInitSegment(e,r);else if((a=r.details)!=null&&a.live&&!this.initPTS[e.cc]){this.log(`Waiting for video PTS in continuity counter ${e.cc} of live stream before loading audio fragment ${e.sn} of level ${this.trackId}`),this.state=qr.WAITING_INIT_PTS;const o=this.mainDetails;o&&o.fragmentStart!==r.details.fragmentStart&&cN(r.details,o)}else super.loadFragment(e,r,n)}else this.clearTrackerIfNeeded(e)}flushAudioIfNeeded(e){if(this.media&&this.bufferedTrack){const{name:r,lang:n,assocLang:i,characteristics:a,audioCodec:o,channels:c}=this.bufferedTrack;ay({name:r,lang:n,assocLang:i,characteristics:a,audioCodec:o,channels:c},e,Nv)||(iN(e.url,this.hls)?(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"),this.bufferedTrack=null):this.bufferedTrack=e)}}completeAudioSwitch(e){const{hls:r}=this;this.flushAudioIfNeeded(e),this.bufferedTrack=e,this.switchingTrack=null,r.trigger(Be.AUDIO_TRACK_SWITCHED,Uo({},e))}}class zF extends um{constructor(e,r){super(r,e.logger),this.hls=void 0,this.canLoad=!1,this.timer=-1,this.hls=e}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){this.timer!==-1&&(self.clearTimeout(this.timer),this.timer=-1)}startLoad(){this.canLoad=!0,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(e,r,n){const i=r?.renditionReports;if(i){let a=-1;for(let o=0;o<i.length;o++){const c=i[o];let u;try{u=new self.URL(c.URI,r.url).href}catch(l){this.warn(`Could not construct new URL for Rendition Report: ${l}`),u=c.URI||""}if(u===e){a=o;break}else u===e.substring(0,u.length)&&(a=o)}if(a!==-1){const o=i[a],c=parseInt(o["LAST-MSN"])||r.lastPartSn;let u=parseInt(o["LAST-PART"])||r.lastPartIndex;if(this.hls.config.lowLatencyMode){const d=Math.min(r.age-r.partTarget,r.targetduration);u>=0&&d>r.partTarget&&(u+=1)}const l=n&&NK(n);return new kK(c,u>=0?u:void 0,l)}}}loadPlaylist(e){this.clearTimer()}loadingPlaylist(e,r){this.clearTimer()}shouldLoadPlaylist(e){return this.canLoad&&!!e&&!!e.url&&(!e.details||e.details.live)}getUrlWithDirectives(e,r){if(r)try{return r.addDirectives(e)}catch(n){this.warn(`Could not construct new URL with HLS Delivery Directives: ${n}`)}return e}playlistLoaded(e,r,n){const{details:i,stats:a}=r,o=self.performance.now(),c=a.loading.first?Math.max(0,o-a.loading.first):0;i.advancedDateTime=Date.now()-c;const u=this.hls.config.timelineOffset;if(u!==i.appliedTimelineOffset){const d=Math.max(u||0,0);i.appliedTimelineOffset=d,i.fragments.forEach(f=>{f.setStart(f.playlistOffset+d)})}if(i.live||n!=null&&n.live){const d="levelInfo"in r?r.levelInfo:r.track;if(i.reloaded(n),n&&i.fragments.length>0){C$e(n,i,this);const _=i.playlistParsingError;if(_){this.warn(_);const E=this.hls;if(!E.config.ignorePlaylistParsingErrors){var l;const{networkDetails:N}=r;E.trigger(Be.ERROR,{type:Oi.NETWORK_ERROR,details:br.LEVEL_PARSING_ERROR,fatal:!1,url:i.url,error:_,reason:_.message,level:r.level||void 0,parent:(l=i.fragments[0])==null?void 0:l.type,networkDetails:N,stats:a});return}i.playlistParsingError=null}}i.requestScheduled===-1&&(i.requestScheduled=a.loading.start);const f=this.hls.mainForwardBufferInfo,m=f?f.end-f.len:0,p=(i.edge-m)*1e3,g=Die(i,p);if(i.requestScheduled+g<o?i.requestScheduled=o:i.requestScheduled+=g,this.log(`live playlist ${e} ${i.advanced?"REFRESHED "+i.lastPartSn+"-"+i.lastPartIndex:i.updated?"UPDATED":"MISSED"}`),!this.canLoad||!i.live)return;let y,x,w;if(i.canBlockReload&&i.endSN&&i.advanced){const _=this.hls.config.lowLatencyMode,E=i.lastPartSn,N=i.endSN,C=i.lastPartIndex,I=C!==-1,D=E===N;I?D?(x=N+1,w=_?0:C):(x=E,w=_?C+1:i.maxPartIndex):x=N+1;const U=i.age,G=U+i.ageHeader;let q=Math.min(G-i.partTarget,i.targetduration*1.5);if(q>0){if(G>i.targetduration*3)this.log(`Playlist last advanced ${U.toFixed(2)}s ago. Omitting segment and part directives.`),x=void 0,w=void 0;else if(n!=null&&n.tuneInGoal&&G-i.partTarget>n.tuneInGoal)this.warn(`CDN Tune-in goal increased from: ${n.tuneInGoal} to: ${q} with playlist age: ${i.age}`),q=0;else{const J=Math.floor(q/i.targetduration);if(x+=J,w!==void 0){const de=Math.round(q%i.targetduration/i.partTarget);w+=de}this.log(`CDN Tune-in age: ${i.ageHeader}s last advanced ${U.toFixed(2)}s goal: ${q} skip sn ${J} to part ${w}`)}i.tuneInGoal=q}if(y=this.getDeliveryDirectives(i,r.deliveryDirectives,x,w),_||!D){i.requestScheduled=o,this.loadingPlaylist(d,y);return}}else(i.canBlockReload||i.canSkipUntil)&&(y=this.getDeliveryDirectives(i,r.deliveryDirectives,x,w));y&&x!==void 0&&i.canBlockReload&&(i.requestScheduled=a.loading.first+Math.max(g-c*2,g/2)),this.scheduleLoading(d,y,i)}else this.clearTimer()}scheduleLoading(e,r,n){const i=n||e.details;if(!i){this.loadingPlaylist(e,r);return}const a=self.performance.now(),o=i.requestScheduled;if(a>=o){this.loadingPlaylist(e,r);return}const c=o-a;this.log(`reload live playlist ${e.name||e.bitrate+"bps"} in ${Math.round(c)} ms`),this.clearTimer(),this.timer=self.setTimeout(()=>this.loadingPlaylist(e,r),c)}getDeliveryDirectives(e,r,n,i){let a=NK(e);return r!=null&&r.skip&&e.deltaUpdateFailed&&(n=r.msn,i=r.part,a=mj.No),new kK(n,i,a)}checkRetry(e){const r=e.details,n=sN(e),i=e.errorAction,{action:a,retryCount:o=0,retryConfig:c}=i||{},u=!!i&&!!c&&(a===Ud.RetryRequest||!i.resolved&&a===Ud.SendAlternateToPenaltyBox);if(u){var l;if(o>=c.maxNumRetry)return!1;if(n&&(l=e.context)!=null&&l.deliveryDirectives)this.warn(`Retrying playlist loading ${o+1}/${c.maxNumRetry} after "${r}" without delivery-directives`),this.loadPlaylist();else{const d=LF(c,o);this.clearTimer(),this.timer=self.setTimeout(()=>this.loadPlaylist(),d),this.warn(`Retrying playlist loading ${o+1}/${c.maxNumRetry} after "${r}" in ${d}ms`)}e.levelRetry=!0,i.resolved=!0}return u}}function cse(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(!A_(t[r].attrs,e[r].attrs))return!1;return!0}function A_(t,e,r){const n=t["STABLE-RENDITION-ID"];return n&&!r?n===e["STABLE-RENDITION-ID"]:!(r||["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED","ASSOC-LANGUAGE"]).some(i=>t[i]!==e[i])}function jO(t,e){return e.label.toLowerCase()===t.name.toLowerCase()&&(!e.language||e.language.toLowerCase()===(t.lang||"").toLowerCase())}class D9e extends zF{constructor(e){super(e,"audio-track-controller"),this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){const{hls:e}=this;e.on(Be.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Be.MANIFEST_PARSED,this.onManifestParsed,this),e.on(Be.LEVEL_LOADING,this.onLevelLoading,this),e.on(Be.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(Be.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(Be.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(Be.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Be.MANIFEST_PARSED,this.onManifestParsed,this),e.off(Be.LEVEL_LOADING,this.onLevelLoading,this),e.off(Be.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(Be.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(Be.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.tracksInGroup=[],this.groupIds=null,this.currentTrack=null,this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(e,r){this.tracks=r.audioTracks||[]}onAudioTrackLoaded(e,r){const{id:n,groupId:i,details:a}=r,o=this.tracksInGroup[n];if(!o||o.groupId!==i){this.warn(`Audio track with id:${n} and group:${i} not found in active group ${o?.groupId}`);return}const c=o.details;o.details=r.details,this.log(`Audio track ${n} "${o.name}" lang:${o.lang} group:${i} loaded [${a.startSN}-${a.endSN}]`),n===this.trackId&&this.playlistLoaded(n,r,c)}onLevelLoading(e,r){this.switchLevel(r.level)}onLevelSwitching(e,r){this.switchLevel(r.level)}switchLevel(e){const r=this.hls.levels[e];if(!r)return;const n=r.audioGroups||null,i=this.groupIds;let a=this.currentTrack;if(!n||i?.length!==n?.length||n!=null&&n.some(c=>i?.indexOf(c)===-1)){this.groupIds=n,this.trackId=-1,this.currentTrack=null;const c=this.tracks.filter(m=>!n||n.indexOf(m.groupId)!==-1);if(c.length)this.selectDefaultTrack&&!c.some(m=>m.default)&&(this.selectDefaultTrack=!1),c.forEach((m,p)=>{m.id=p});else if(!a&&!this.tracksInGroup.length)return;this.tracksInGroup=c;const u=this.hls.config.audioPreference;if(!a&&u){const m=MA(u,c,Nv);if(m>-1)a=c[m];else{const p=MA(u,this.tracks);a=this.tracks[p]}}let l=this.findTrackId(a);l===-1&&a&&(l=this.findTrackId(null));const d={audioTracks:c};this.log(`Updating audio tracks, ${c.length} track(s) found in group(s): ${n?.join(",")}`),this.hls.trigger(Be.AUDIO_TRACKS_UPDATED,d);const f=this.trackId;if(l!==-1&&f===-1)this.setAudioTrack(l);else if(c.length&&f===-1){var o;const m=new Error(`No audio track selected for current audio group-ID(s): ${(o=this.groupIds)==null?void 0:o.join(",")} track count: ${c.length}`);this.warn(m.message),this.hls.trigger(Be.ERROR,{type:Oi.MEDIA_ERROR,details:br.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:m})}}}onError(e,r){r.fatal||!r.context||r.context.type===ba.AUDIO_TRACK&&r.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(r.context.groupId)!==-1)&&this.checkRetry(r)}get allAudioTracks(){return this.tracks}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}setAudioOption(e){const r=this.hls;if(r.config.audioPreference=e,e){const n=this.allAudioTracks;if(this.selectDefaultTrack=!1,n.length){const i=this.currentTrack;if(i&&ay(e,i,Nv))return i;const a=MA(e,this.tracksInGroup,Nv);if(a>-1){const o=this.tracksInGroup[a];return this.setAudioTrack(a),o}else if(i){let o=r.loadLevel;o===-1&&(o=r.firstAutoLevel);const c=Y7e(e,r.levels,n,o,Nv);if(c===-1)return null;r.nextLoadLevel=c}if(e.channels||e.audioCodec){const o=MA(e,n);if(o>-1)return n[o]}}}return null}setAudioTrack(e){const r=this.tracksInGroup;if(e<0||e>=r.length){this.warn(`Invalid audio track id: ${e}`);return}this.selectDefaultTrack=!1;const n=this.currentTrack,i=r[e],a=i.details&&!i.details.live;if(e===this.trackId&&i===n&&a||(this.log(`Switching to audio-track ${e} "${i.name}" lang:${i.lang} group:${i.groupId} channels:${i.channels}`),this.trackId=e,this.currentTrack=i,this.hls.trigger(Be.AUDIO_TRACK_SWITCHING,Uo({},i)),a))return;const o=this.switchParams(i.url,n?.details,i.details);this.loadPlaylist(o)}findTrackId(e){const r=this.tracksInGroup;for(let n=0;n<r.length;n++){const i=r[n];if(!(this.selectDefaultTrack&&!i.default)&&(!e||ay(e,i,Nv)))return n}if(e){const{name:n,lang:i,assocLang:a,characteristics:o,audioCodec:c,channels:u}=e;for(let l=0;l<r.length;l++){const d=r[l];if(ay({name:n,lang:i,assocLang:a,characteristics:o,audioCodec:c,channels:u},d,Nv))return l}for(let l=0;l<r.length;l++){const d=r[l];if(A_(e.attrs,d.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return l}for(let l=0;l<r.length;l++){const d=r[l];if(A_(e.attrs,d.attrs,["LANGUAGE"]))return l}}return-1}loadPlaylist(e){super.loadPlaylist();const r=this.currentTrack;this.shouldLoadPlaylist(r)&&iN(r.url,this.hls)&&this.scheduleLoading(r,e)}loadingPlaylist(e,r){super.loadingPlaylist(e,r);const n=e.id,i=e.groupId,a=this.getUrlWithDirectives(e.url,r),o=e.details,c=o?.age;this.log(`Loading audio-track ${n} "${e.name}" lang:${e.lang} group:${i}${r?.msn!==void 0?" at sn "+r.msn+" part "+r.part:""}${c&&o.live?" age "+c.toFixed(1)+(o.type&&" "+o.type||""):""} ${a}`),this.hls.trigger(Be.AUDIO_TRACK_LOADING,{url:a,id:n,groupId:i,deliveryDirectives:r||null,track:e})}}class M9e{constructor(e){this.tracks=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.tracks=e}destroy(){this.tracks=this.queues=null}append(e,r,n){if(this.queues===null||this.tracks===null)return;const i=this.queues[r];i.push(e),i.length===1&&!n&&this.executeNext(r)}appendBlocker(e){return new Promise(r=>{const n={label:"async-blocker",execute:r,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.append(n,e)})}prependBlocker(e){return new Promise(r=>{if(this.queues){const n={label:"async-blocker-prepend",execute:r,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.queues[e].unshift(n)}})}removeBlockers(){this.queues!==null&&[this.queues.video,this.queues.audio,this.queues.audiovideo].forEach(e=>{var r;const n=(r=e[0])==null?void 0:r.label;(n==="async-blocker"||n==="async-blocker-prepend")&&(e[0].execute(),e.splice(0,1))})}unblockAudio(e){if(this.queues===null)return;this.queues.audio[0]===e&&this.shiftAndExecuteNext("audio")}executeNext(e){if(this.queues===null||this.tracks===null)return;const r=this.queues[e];if(r.length){const i=r[0];try{i.execute()}catch(a){var n;if(i.onError(a),this.queues===null||this.tracks===null)return;const o=(n=this.tracks[e])==null?void 0:n.buffer;o!=null&&o.updating||this.shiftAndExecuteNext(e)}}}shiftAndExecuteNext(e){this.queues!==null&&(this.queues[e].shift(),this.executeNext(e))}current(e){var r;return((r=this.queues)==null?void 0:r[e][0])||null}toString(){const{queues:e,tracks:r}=this;return e===null||r===null?"<destroyed>":`
${this.list("video")}
${this.list("audio")}
${this.list("audiovideo")}}`}list(e){var r,n;return(r=this.queues)!=null&&r[e]||(n=this.tracks)!=null&&n[e]?`${e}: (${this.listSbInfo(e)}) ${this.listOps(e)}`:""}listSbInfo(e){var r;const n=(r=this.tracks)==null?void 0:r[e],i=n?.buffer;return i?`SourceBuffer${i.updating?" updating":""}${n.ended?" ended":""}${n.ending?" ending":""}`:"none"}listOps(e){var r;return((r=this.queues)==null?void 0:r[e].map(n=>n.label).join(", "))||""}}const AG=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/,use="HlsJsTrackRemovedError";class F9e extends Error{constructor(e){super(e),this.name=use}}class U9e extends um{constructor(e,r){super("buffer-controller",e.logger),this.hls=void 0,this.fragmentTracker=void 0,this.details=null,this._objectUrl=null,this.operationQueue=null,this.bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.blockedAudioAppend=null,this.lastVideoAppendEnd=0,this.appendSource=void 0,this.transferData=void 0,this.overrides=void 0,this.appendErrors={audio:0,video:0,audiovideo:0},this.tracks={},this.sourceBuffers=[[null,null],[null,null]],this._onEndStreaming=n=>{var i;this.hls&&((i=this.mediaSource)==null?void 0:i.readyState)==="open"&&this.hls.pauseBuffering()},this._onStartStreaming=n=>{this.hls&&this.hls.resumeBuffering()},this._onMediaSourceOpen=n=>{const{media:i,mediaSource:a}=this;n&&this.log("Media source opened"),!(!i||!a)&&(a.removeEventListener("sourceopen",this._onMediaSourceOpen),i.removeEventListener("emptied",this._onMediaEmptied),this.updateDuration(),this.hls.trigger(Be.MEDIA_ATTACHED,{media:i,mediaSource:a}),this.mediaSource!==null&&this.checkPendingTracks())},this._onMediaSourceClose=()=>{this.log("Media source closed")},this._onMediaSourceEnded=()=>{this.log("Media source ended")},this._onMediaEmptied=()=>{const{mediaSrc:n,_objectUrl:i}=this;n!==i&&this.error(`Media element src was set while attaching MediaSource (${i} > ${n})`)},this.hls=e,this.fragmentTracker=r,this.appendSource=l7e(G0(e.config.preferManagedMediaSource)),this.initTracks(),this.registerListeners()}hasSourceTypes(){return Object.keys(this.tracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.transferData=this.overrides=void 0,this.operationQueue&&(this.operationQueue.destroy(),this.operationQueue=null),this.hls=this.fragmentTracker=null,this._onMediaSourceOpen=this._onMediaSourceClose=null,this._onMediaSourceEnded=null,this._onStartStreaming=this._onEndStreaming=null}registerListeners(){const{hls:e}=this;e.on(Be.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(Be.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(Be.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Be.MANIFEST_PARSED,this.onManifestParsed,this),e.on(Be.BUFFER_RESET,this.onBufferReset,this),e.on(Be.BUFFER_APPENDING,this.onBufferAppending,this),e.on(Be.BUFFER_CODECS,this.onBufferCodecs,this),e.on(Be.BUFFER_EOS,this.onBufferEos,this),e.on(Be.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(Be.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(Be.FRAG_PARSED,this.onFragParsed,this),e.on(Be.FRAG_CHANGED,this.onFragChanged,this),e.on(Be.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(Be.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(Be.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(Be.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Be.MANIFEST_PARSED,this.onManifestParsed,this),e.off(Be.BUFFER_RESET,this.onBufferReset,this),e.off(Be.BUFFER_APPENDING,this.onBufferAppending,this),e.off(Be.BUFFER_CODECS,this.onBufferCodecs,this),e.off(Be.BUFFER_EOS,this.onBufferEos,this),e.off(Be.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(Be.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(Be.FRAG_PARSED,this.onFragParsed,this),e.off(Be.FRAG_CHANGED,this.onFragChanged,this),e.off(Be.ERROR,this.onError,this)}transferMedia(){const{media:e,mediaSource:r}=this;if(!e)return null;const n={};if(this.operationQueue){const a=this.isUpdating();a||this.operationQueue.removeBlockers();const o=this.isQueued();(a||o)&&this.warn(`Transfering MediaSource with${o?" operations in queue":""}${a?" updating SourceBuffer(s)":""} ${this.operationQueue}`),this.operationQueue.destroy()}const i=this.transferData;return!this.sourceBufferCount&&i&&i.mediaSource===r?nl(n,i.tracks):this.sourceBuffers.forEach(a=>{const[o]=a;o&&(n[o]=nl({},this.tracks[o]),this.removeBuffer(o)),a[0]=a[1]=null}),{media:e,mediaSource:r,tracks:n}}initTracks(){const e={};this.sourceBuffers=[[null,null],[null,null]],this.tracks=e,this.resetQueue(),this.resetAppendErrors(),this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.lastVideoAppendEnd=0}onManifestLoading(){this.bufferCodecEventsTotal=0,this.details=null}onManifestParsed(e,r){var n;let i=2;(r.audio&&!r.video||!r.altAudio)&&(i=1),this.bufferCodecEventsTotal=i,this.log(`${i} bufferCodec event(s) expected.`),(n=this.transferData)!=null&&n.mediaSource&&this.sourceBufferCount&&i&&this.bufferCreated()}onMediaAttaching(e,r){const n=this.media=r.media;this.transferData=this.overrides=void 0;const i=G0(this.appendSource);if(i){const a=!!r.mediaSource;(a||r.overrides)&&(this.transferData=r,this.overrides=r.overrides);const o=this.mediaSource=r.mediaSource||new i;if(this.assignMediaSource(o),a)this._objectUrl=n.src,this.attachTransferred();else{const c=this._objectUrl=self.URL.createObjectURL(o);if(this.appendSource)try{n.removeAttribute("src");const u=self.ManagedMediaSource;n.disableRemotePlayback=n.disableRemotePlayback||u&&o instanceof u,pG(n),$9e(n,c),n.load()}catch{n.src=c}else n.src=c}n.addEventListener("emptied",this._onMediaEmptied)}}assignMediaSource(e){var r,n;this.log(`${((r=this.transferData)==null?void 0:r.mediaSource)===e?"transferred":"created"} media source: ${(n=e.constructor)==null?void 0:n.name}`),e.addEventListener("sourceopen",this._onMediaSourceOpen),e.addEventListener("sourceended",this._onMediaSourceEnded),e.addEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(e.addEventListener("startstreaming",this._onStartStreaming),e.addEventListener("endstreaming",this._onEndStreaming))}attachTransferred(){const e=this.media,r=this.transferData;if(!r||!e)return;const n=this.tracks,i=r.tracks,a=i?Object.keys(i):null,o=a?a.length:0,c=()=>{Promise.resolve().then(()=>{this.media&&this.mediaSourceOpenOrEnded&&this._onMediaSourceOpen()})};if(i&&a&&o){if(!this.tracksReady){this.hls.config.startFragPrefetch=!0,this.log("attachTransferred: waiting for SourceBuffer track info");return}if(this.log(`attachTransferred: (bufferCodecEventsTotal ${this.bufferCodecEventsTotal})
required tracks: ${fl(n,(u,l)=>u==="initSegment"?void 0:l)};
transfer tracks: ${fl(i,(u,l)=>u==="initSegment"?void 0:l)}}`),!aie(i,n)){r.mediaSource=null,r.tracks=void 0;const u=e.currentTime,l=this.details,d=Math.max(u,l?.fragments[0].start||0);if(d-u>1){this.log(`attachTransferred: waiting for playback to reach new tracks start time ${u} -> ${d}`);return}this.warn(`attachTransferred: resetting MediaSource for incompatible tracks ("${Object.keys(i)}"->"${Object.keys(n)}") start time: ${d} currentTime: ${u}`),this.onMediaDetaching(Be.MEDIA_DETACHING,{}),this.onMediaAttaching(Be.MEDIA_ATTACHING,r),e.currentTime=d;return}this.transferData=void 0,a.forEach(u=>{const l=u,d=i[l];if(d){const f=d.buffer;if(f){const m=this.fragmentTracker,p=d.id;if(m.hasFragments(p)||m.hasParts(p)){const x=Hs.getBuffered(f);m.detectEvictedFragments(l,x,p,null,!0)}const g=UI(l),y=[l,f];this.sourceBuffers[g]=y,f.updating&&this.operationQueue&&this.operationQueue.prependBlocker(l),this.trackSourceBuffer(l,d)}}}),c(),this.bufferCreated()}else this.log("attachTransferred: MediaSource w/o SourceBuffers"),c()}get mediaSourceOpenOrEnded(){var e;const r=(e=this.mediaSource)==null?void 0:e.readyState;return r==="open"||r==="ended"}onMediaDetaching(e,r){const n=!!r.transferMedia;this.transferData=this.overrides=void 0;const{media:i,mediaSource:a,_objectUrl:o}=this;if(a){if(this.log(`media source ${n?"transferring":"detaching"}`),n)this.sourceBuffers.forEach(([c])=>{c&&this.removeBuffer(c)}),this.resetQueue();else{if(this.mediaSourceOpenOrEnded){const c=a.readyState==="open";try{const u=a.sourceBuffers;for(let l=u.length;l--;)c&&u[l].abort(),a.removeSourceBuffer(u[l]);c&&a.endOfStream()}catch(u){this.warn(`onMediaDetaching: ${u.message} while calling endOfStream`)}}this.sourceBufferCount&&this.onBufferReset()}a.removeEventListener("sourceopen",this._onMediaSourceOpen),a.removeEventListener("sourceended",this._onMediaSourceEnded),a.removeEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(a.removeEventListener("startstreaming",this._onStartStreaming),a.removeEventListener("endstreaming",this._onEndStreaming)),this.mediaSource=null,this._objectUrl=null}i&&(i.removeEventListener("emptied",this._onMediaEmptied),n||(o&&self.URL.revokeObjectURL(o),this.mediaSrc===o?(i.removeAttribute("src"),this.appendSource&&pG(i),i.load()):this.warn("media|source.src was changed by a third party - skip cleanup")),this.media=null),this.hls.trigger(Be.MEDIA_DETACHED,r)}onBufferReset(){this.sourceBuffers.forEach(([e])=>{e&&this.resetBuffer(e)}),this.initTracks()}resetBuffer(e){var r;const n=(r=this.tracks[e])==null?void 0:r.buffer;if(this.removeBuffer(e),n)try{var i;(i=this.mediaSource)!=null&&i.sourceBuffers.length&&this.mediaSource.removeSourceBuffer(n)}catch(a){this.warn(`onBufferReset ${e}`,a)}delete this.tracks[e]}removeBuffer(e){this.removeBufferListeners(e),this.sourceBuffers[UI(e)]=[null,null];const r=this.tracks[e];r&&(r.buffer=void 0)}resetQueue(){this.operationQueue&&this.operationQueue.destroy(),this.operationQueue=new M9e(this.tracks)}onBufferCodecs(e,r){var n;const i=this.tracks,a=Object.keys(r);this.log(`BUFFER_CODECS: "${a}" (current SB count ${this.sourceBufferCount})`);const o="audiovideo"in r&&(i.audio||i.video)||i.audiovideo&&("audio"in r||"video"in r),c=!o&&this.sourceBufferCount&&this.media&&a.some(u=>!i[u]);if(o||c){this.warn(`Unsupported transition between "${Object.keys(i)}" and "${a}" SourceBuffers`);return}a.forEach(u=>{var l,d;const f=r[u],{id:m,codec:p,levelCodec:g,container:y,metadata:x,supplemental:w}=f;let _=i[u];const E=(l=this.transferData)==null||(l=l.tracks)==null?void 0:l[u],N=E!=null&&E.buffer?E:_,C=N?.pendingCodec||N?.codec,I=N?.levelCodec;_||(_=i[u]={buffer:void 0,listeners:[],codec:p,supplemental:w,container:y,levelCodec:g,metadata:x,id:m});const D=fj(C,I),U=D?.replace(AG,"$1");let G=fj(p,g);const q=(d=G)==null?void 0:d.replace(AG,"$1");G&&D&&U!==q&&(u.slice(0,5)==="audio"&&(G=rN(G,this.appendSource)),this.log(`switching codec ${C} to ${G}`),G!==(_.pendingCodec||_.codec)&&(_.pendingCodec=G),_.container=y,this.appendChangeType(u,y,G))}),(this.tracksReady||this.sourceBufferCount)&&(r.tracks=this.sourceBufferTracks),!this.sourceBufferCount&&(this.bufferCodecEventsTotal>1&&!this.tracks.video&&!r.video&&((n=r.audio)==null?void 0:n.id)==="main"&&(this.log("Main audio-only"),this.bufferCodecEventsTotal=1),this.mediaSourceOpenOrEnded&&this.checkPendingTracks())}get sourceBufferTracks(){return Object.keys(this.tracks).reduce((e,r)=>{const n=this.tracks[r];return e[r]={id:n.id,container:n.container,codec:n.codec,levelCodec:n.levelCodec},e},{})}appendChangeType(e,r,n){const i=`${r};codecs=${n}`,a={label:`change-type=${i}`,execute:()=>{const o=this.tracks[e];if(o){const c=o.buffer;c!=null&&c.changeType&&(this.log(`changing ${e} sourceBuffer type to ${i}`),c.changeType(i),o.codec=n,o.container=r)}this.shiftAndExecuteNext(e)},onStart:()=>{},onComplete:()=>{},onError:o=>{this.warn(`Failed to change ${e} SourceBuffer type`,o)}};this.append(a,e,this.isPending(this.tracks[e]))}blockAudio(e){var r;const n=e.start,i=n+e.duration*.05;if(((r=this.fragmentTracker.getAppendedFrag(n,fi.MAIN))==null?void 0:r.gap)===!0)return;const o={label:"block-audio",execute:()=>{var c;const u=this.tracks.video;(this.lastVideoAppendEnd>i||u!=null&&u.buffer&&Hs.isBuffered(u.buffer,i)||((c=this.fragmentTracker.getAppendedFrag(i,fi.MAIN))==null?void 0:c.gap)===!0)&&(this.blockedAudioAppend=null,this.shiftAndExecuteNext("audio"))},onStart:()=>{},onComplete:()=>{},onError:c=>{this.warn("Error executing block-audio operation",c)}};this.blockedAudioAppend={op:o,frag:e},this.append(o,"audio",!0)}unblockAudio(){const{blockedAudioAppend:e,operationQueue:r}=this;e&&r&&(this.blockedAudioAppend=null,r.unblockAudio(e.op))}onBufferAppending(e,r){const{tracks:n}=this,{data:i,type:a,parent:o,frag:c,part:u,chunkMeta:l,offset:d}=r,f=l.buffering[a],{sn:m,cc:p}=c,g=self.performance.now();f.start=g;const y=c.stats.buffering,x=u?u.stats.buffering:null;y.start===0&&(y.start=g),x&&x.start===0&&(x.start=g);const w=n.audio;let _=!1;a==="audio"&&w?.container==="audio/mpeg"&&(_=!this.lastMpegAudioChunk||l.id===1||this.lastMpegAudioChunk.sn!==l.sn,this.lastMpegAudioChunk=l);const E=n.video,N=E?.buffer;if(N&&m!=="initSegment"){const D=u||c,U=this.blockedAudioAppend;if(a==="audio"&&o!=="main"&&!this.blockedAudioAppend&&!(E.ending||E.ended)){const q=D.start+D.duration*.05,J=N.buffered,de=this.currentOp("video");!J.length&&!de?this.blockAudio(D):!de&&!Hs.isBuffered(N,q)&&this.lastVideoAppendEnd<q&&this.blockAudio(D)}else if(a==="video"){const G=D.end;if(U){const q=U.frag.start;(G>q||G<this.lastVideoAppendEnd||Hs.isBuffered(N,q))&&this.unblockAudio()}this.lastVideoAppendEnd=G}}const C=(u||c).start,I={label:`append-${a}`,execute:()=>{var D;f.executeStart=self.performance.now();const U=(D=this.tracks[a])==null?void 0:D.buffer;U&&(_?this.updateTimestampOffset(U,C,.1,a,m,p):d!==void 0&&Xn(d)&&this.updateTimestampOffset(U,d,1e-6,a,m,p)),this.appendExecutor(i,a)},onStart:()=>{},onComplete:()=>{const D=self.performance.now();f.executeEnd=f.end=D,y.first===0&&(y.first=D),x&&x.first===0&&(x.first=D);const U={};this.sourceBuffers.forEach(([G,q])=>{G&&(U[G]=Hs.getBuffered(q))}),this.appendErrors[a]=0,a==="audio"||a==="video"?this.appendErrors.audiovideo=0:(this.appendErrors.audio=0,this.appendErrors.video=0),this.hls.trigger(Be.BUFFER_APPENDED,{type:a,frag:c,part:u,chunkMeta:l,parent:c.type,timeRanges:U})},onError:D=>{var U;const G={type:Oi.MEDIA_ERROR,parent:c.type,details:br.BUFFER_APPEND_ERROR,sourceBufferName:a,frag:c,part:u,chunkMeta:l,error:D,err:D,fatal:!1},q=(U=this.media)==null?void 0:U.error;if(D.code===DOMException.QUOTA_EXCEEDED_ERR||D.name=="QuotaExceededError"||"quota"in D)G.details=br.BUFFER_FULL_ERROR;else if(D.code===DOMException.INVALID_STATE_ERR&&this.mediaSourceOpenOrEnded&&!q)G.errorAction=Eb(!0);else if(D.name===use&&this.sourceBufferCount===0)G.errorAction=Eb(!0);else{const J=++this.appendErrors[a];this.warn(`Failed ${J}/${this.hls.config.appendErrorMaxRetry} times to append segment in "${a}" sourceBuffer (${q||"no media error"})`),(J>=this.hls.config.appendErrorMaxRetry||q)&&(G.fatal=!0)}this.hls.trigger(Be.ERROR,G)}};this.log(`queuing "${a}" append sn: ${m}${u?" p: "+u.index:""} of ${c.type===fi.MAIN?"level":"track"} ${c.level} cc: ${p}`),this.append(I,a,this.isPending(this.tracks[a]))}getFlushOp(e,r,n){return this.log(`queuing "${e}" remove ${r}-${n}`),{label:"remove",execute:()=>{this.removeExecutor(e,r,n)},onStart:()=>{},onComplete:()=>{this.hls.trigger(Be.BUFFER_FLUSHED,{type:e})},onError:i=>{this.warn(`Failed to remove ${r}-${n} from "${e}" SourceBuffer`,i)}}}onBufferFlushing(e,r){const{type:n,startOffset:i,endOffset:a}=r;n?this.append(this.getFlushOp(n,i,a),n):this.sourceBuffers.forEach(([o])=>{o&&this.append(this.getFlushOp(o,i,a),o)})}onFragParsed(e,r){const{frag:n,part:i}=r,a=[],o=i?i.elementaryStreams:n.elementaryStreams;o[cl.AUDIOVIDEO]?a.push("audiovideo"):(o[cl.AUDIO]&&a.push("audio"),o[cl.VIDEO]&&a.push("video"));const c=()=>{const u=self.performance.now();n.stats.buffering.end=u,i&&(i.stats.buffering.end=u);const l=i?i.stats:n.stats;this.hls.trigger(Be.FRAG_BUFFERED,{frag:n,part:i,stats:l,id:n.type})};a.length===0&&this.warn(`Fragments must have at least one ElementaryStreamType set. type: ${n.type} level: ${n.level} sn: ${n.sn}`),this.blockBuffers(c,a).catch(u=>{this.warn(`Fragment buffered callback ${u}`),this.stepOperationQueue(this.sourceBufferTypes)})}onFragChanged(e,r){this.trimBuffers()}get bufferedToEnd(){return this.sourceBufferCount>0&&!this.sourceBuffers.some(([e])=>{if(e){const r=this.tracks[e];if(r)return!r.ended||r.ending}return!1})}onBufferEos(e,r){var n;this.sourceBuffers.forEach(([o])=>{if(o){const c=this.tracks[o];(!r.type||r.type===o)&&(c.ending=!0,c.ended||(c.ended=!0,this.log(`${o} buffer reached EOS`)))}});const i=((n=this.overrides)==null?void 0:n.endOfStream)!==!1;this.sourceBufferCount>0&&!this.sourceBuffers.some(([o])=>{var c;return o&&!((c=this.tracks[o])!=null&&c.ended)})?i?(this.log("Queueing EOS"),this.blockUntilOpen(()=>{this.tracksEnded();const{mediaSource:o}=this;if(!o||o.readyState!=="open"){o&&this.log(`Could not call mediaSource.endOfStream(). mediaSource.readyState: ${o.readyState}`);return}this.log("Calling mediaSource.endOfStream()"),o.endOfStream(),this.hls.trigger(Be.BUFFERED_TO_END,void 0)})):(this.tracksEnded(),this.hls.trigger(Be.BUFFERED_TO_END,void 0)):r.type==="video"&&this.unblockAudio()}tracksEnded(){this.sourceBuffers.forEach(([e])=>{if(e!==null){const r=this.tracks[e];r&&(r.ending=!1)}})}onLevelUpdated(e,{details:r}){r.fragments.length&&(this.details=r,this.updateDuration())}updateDuration(){this.blockUntilOpen(()=>{const e=this.getDurationAndRange();e&&this.updateMediaSource(e)})}onError(e,r){if(r.details===br.BUFFER_APPEND_ERROR&&r.frag){var n;const i=(n=r.errorAction)==null?void 0:n.nextAutoLevel;Xn(i)&&i!==r.frag.level&&this.resetAppendErrors()}}resetAppendErrors(){this.appendErrors={audio:0,video:0,audiovideo:0}}trimBuffers(){const{hls:e,details:r,media:n}=this;if(!n||r===null||!this.sourceBufferCount)return;const i=e.config,a=n.currentTime,o=r.levelTargetDuration,c=r.live&&i.liveBackBufferLength!==null?i.liveBackBufferLength:i.backBufferLength;if(Xn(c)&&c>=0){const l=Math.max(c,o),d=Math.floor(a/o)*o-l;this.flushBackBuffer(a,o,d)}const u=i.frontBufferFlushThreshold;if(Xn(u)&&u>0){const l=Math.max(i.maxBufferLength,u),d=Math.max(l,o),f=Math.floor(a/o)*o+d;this.flushFrontBuffer(a,o,f)}}flushBackBuffer(e,r,n){this.sourceBuffers.forEach(([i,a])=>{if(a){const c=Hs.getBuffered(a);if(c.length>0&&n>c.start(0)){var o;this.hls.trigger(Be.BACK_BUFFER_REACHED,{bufferEnd:n});const u=this.tracks[i];if((o=this.details)!=null&&o.live)this.hls.trigger(Be.LIVE_BACK_BUFFER_REACHED,{bufferEnd:n});else if(u!=null&&u.ended){this.log(`Cannot flush ${i} back buffer while SourceBuffer is in ended state`);return}this.hls.trigger(Be.BUFFER_FLUSHING,{startOffset:0,endOffset:n,type:i})}}})}flushFrontBuffer(e,r,n){this.sourceBuffers.forEach(([i,a])=>{if(a){const o=Hs.getBuffered(a),c=o.length;if(c<2)return;const u=o.start(c-1),l=o.end(c-1);if(n>u||e>=u&&e<=l)return;this.hls.trigger(Be.BUFFER_FLUSHING,{startOffset:u,endOffset:1/0,type:i})}})}getDurationAndRange(){var e;const{details:r,mediaSource:n}=this;if(!r||!this.media||n?.readyState!=="open")return null;const i=r.edge;if(r.live&&this.hls.config.liveDurationInfinity){if(r.fragments.length&&n.setLiveSeekableRange){const l=Math.max(0,r.fragmentStart),d=Math.max(l,i);return{duration:1/0,start:l,end:d}}return{duration:1/0}}const a=(e=this.overrides)==null?void 0:e.duration;if(a)return Xn(a)?{duration:a}:null;const o=this.media.duration,c=Xn(n.duration)?n.duration:0;return i>c&&i>o||!Xn(o)?{duration:i}:null}updateMediaSource({duration:e,start:r,end:n}){const i=this.mediaSource;!this.media||!i||i.readyState!=="open"||(i.duration!==e&&(Xn(e)&&this.log(`Updating MediaSource duration to ${e.toFixed(3)}`),i.duration=e),r!==void 0&&n!==void 0&&(this.log(`MediaSource duration is set to ${i.duration}. Setting seekable range to ${r}-${n}.`),i.setLiveSeekableRange(r,n)))}get tracksReady(){const e=this.pendingTrackCount;return e>0&&(e>=this.bufferCodecEventsTotal||this.isPending(this.tracks.audiovideo))}checkPendingTracks(){const{bufferCodecEventsTotal:e,pendingTrackCount:r,tracks:n}=this;if(this.log(`checkPendingTracks (pending: ${r} codec events expected: ${e}) ${fl(n)}`),this.tracksReady){var i;const a=(i=this.transferData)==null?void 0:i.tracks;a&&Object.keys(a).length?this.attachTransferred():this.createSourceBuffers()}}bufferCreated(){if(this.sourceBufferCount){const e={};this.sourceBuffers.forEach(([r,n])=>{if(r){const i=this.tracks[r];e[r]={buffer:n,container:i.container,codec:i.codec,supplemental:i.supplemental,levelCodec:i.levelCodec,id:i.id,metadata:i.metadata}}}),this.hls.trigger(Be.BUFFER_CREATED,{tracks:e}),this.log(`SourceBuffers created. Running queue: ${this.operationQueue}`),this.sourceBuffers.forEach(([r])=>{this.executeNext(r)})}else{const e=new Error("could not create source buffer for media codec(s)");this.hls.trigger(Be.ERROR,{type:Oi.MEDIA_ERROR,details:br.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:e,reason:e.message})}}createSourceBuffers(){const{tracks:e,sourceBuffers:r,mediaSource:n}=this;if(!n)throw new Error("createSourceBuffers called when mediaSource was null");for(const a in e){const o=a,c=e[o];if(this.isPending(c)){const u=this.getTrackCodec(c,o),l=`${c.container};codecs=${u}`;c.codec=u,this.log(`creating sourceBuffer(${l})${this.currentOp(o)?" Queued":""} ${fl(c)}`);try{const d=n.addSourceBuffer(l),f=UI(o),m=[o,d];r[f]=m,c.buffer=d}catch(d){var i;this.error(`error while trying to add sourceBuffer: ${d.message}`),this.shiftAndExecuteNext(o),(i=this.operationQueue)==null||i.removeBlockers(),delete this.tracks[o],this.hls.trigger(Be.ERROR,{type:Oi.MEDIA_ERROR,details:br.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:d,sourceBufferName:o,mimeType:l,parent:c.id});return}this.trackSourceBuffer(o,c)}}this.bufferCreated()}getTrackCodec(e,r){const n=e.supplemental;let i=e.codec;n&&(r==="video"||r==="audiovideo")&&c_(n,"video")&&(i=k7e(i,n));const a=fj(i,e.levelCodec);return a?r.slice(0,5)==="audio"?rN(a,this.appendSource):a:""}trackSourceBuffer(e,r){const n=r.buffer;if(!n)return;const i=this.getTrackCodec(r,e);this.tracks[e]={buffer:n,codec:i,container:r.container,levelCodec:r.levelCodec,supplemental:r.supplemental,metadata:r.metadata,id:r.id,listeners:[]},this.removeBufferListeners(e),this.addBufferListener(e,"updatestart",this.onSBUpdateStart),this.addBufferListener(e,"updateend",this.onSBUpdateEnd),this.addBufferListener(e,"error",this.onSBUpdateError),this.appendSource&&this.addBufferListener(e,"bufferedchange",(a,o)=>{const c=o.removedRanges;c!=null&&c.length&&this.hls.trigger(Be.BUFFER_FLUSHED,{type:a})})}get mediaSrc(){var e,r;const n=((e=this.media)==null||(r=e.querySelector)==null?void 0:r.call(e,"source"))||this.media;return n?.src}onSBUpdateStart(e){const r=this.currentOp(e);r&&r.onStart()}onSBUpdateEnd(e){var r;if(((r=this.mediaSource)==null?void 0:r.readyState)==="closed"){this.resetBuffer(e);return}const n=this.currentOp(e);n&&(n.onComplete(),this.shiftAndExecuteNext(e))}onSBUpdateError(e,r){var n;const i=new Error(`${e} SourceBuffer error. MediaSource readyState: ${(n=this.mediaSource)==null?void 0:n.readyState}`);this.error(`${i}`,r),this.hls.trigger(Be.ERROR,{type:Oi.MEDIA_ERROR,details:br.BUFFER_APPENDING_ERROR,sourceBufferName:e,error:i,fatal:!1});const a=this.currentOp(e);a&&a.onError(i)}updateTimestampOffset(e,r,n,i,a,o){const c=r-e.timestampOffset;Math.abs(c)>=n&&(this.log(`Updating ${i} SourceBuffer timestampOffset to ${r} (sn: ${a} cc: ${o})`),e.timestampOffset=r)}removeExecutor(e,r,n){const{media:i,mediaSource:a}=this,o=this.tracks[e],c=o?.buffer;if(!i||!a||!c){this.warn(`Attempting to remove from the ${e} SourceBuffer, but it does not exist`),this.shiftAndExecuteNext(e);return}const u=Xn(i.duration)?i.duration:1/0,l=Xn(a.duration)?a.duration:1/0,d=Math.max(0,r),f=Math.min(n,u,l);f>d&&(!o.ending||o.ended)?(o.ended=!1,this.log(`Removing [${d},${f}] from the ${e} SourceBuffer`),c.remove(d,f)):this.shiftAndExecuteNext(e)}appendExecutor(e,r){const n=this.tracks[r],i=n?.buffer;if(!i)throw new F9e(`Attempting to append to the ${r} SourceBuffer, but it does not exist`);n.ending=!1,n.ended=!1,i.appendBuffer(e)}blockUntilOpen(e){if(this.isUpdating()||this.isQueued())this.blockBuffers(e).catch(r=>{this.warn(`SourceBuffer blocked callback ${r}`),this.stepOperationQueue(this.sourceBufferTypes)});else try{e()}catch(r){this.warn(`Callback run without blocking ${this.operationQueue} ${r}`)}}isUpdating(){return this.sourceBuffers.some(([e,r])=>e&&r.updating)}isQueued(){return this.sourceBuffers.some(([e])=>e&&!!this.currentOp(e))}isPending(e){return!!e&&!e.buffer}blockBuffers(e,r=this.sourceBufferTypes){if(!r.length)return this.log("Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(e);const{operationQueue:n}=this,i=r.map(o=>this.appendBlocker(o));return r.length>1&&this.blockedAudioAppend&&this.unblockAudio(),Promise.all(i).then(o=>{n===this.operationQueue&&(e(),this.stepOperationQueue(this.sourceBufferTypes))})}stepOperationQueue(e){e.forEach(r=>{var n;const i=(n=this.tracks[r])==null?void 0:n.buffer;!i||i.updating||this.shiftAndExecuteNext(r)})}append(e,r,n){this.operationQueue&&this.operationQueue.append(e,r,n)}appendBlocker(e){if(this.operationQueue)return this.operationQueue.appendBlocker(e)}currentOp(e){return this.operationQueue?this.operationQueue.current(e):null}executeNext(e){e&&this.operationQueue&&this.operationQueue.executeNext(e)}shiftAndExecuteNext(e){this.operationQueue&&this.operationQueue.shiftAndExecuteNext(e)}get pendingTrackCount(){return Object.keys(this.tracks).reduce((e,r)=>e+(this.isPending(this.tracks[r])?1:0),0)}get sourceBufferCount(){return this.sourceBuffers.reduce((e,[r])=>e+(r?1:0),0)}get sourceBufferTypes(){return this.sourceBuffers.map(([e])=>e).filter(e=>!!e)}addBufferListener(e,r,n){const i=this.tracks[e];if(!i)return;const a=i.buffer;if(!a)return;const o=n.bind(this,e);i.listeners.push({event:r,listener:o}),a.addEventListener(r,o)}removeBufferListeners(e){const r=this.tracks[e];if(!r)return;const n=r.buffer;n&&(r.listeners.forEach(i=>{n.removeEventListener(i.event,i.listener)}),r.listeners.length=0)}}function pG(t){const e=t.querySelectorAll("source");[].slice.call(e).forEach(r=>{t.removeChild(r)})}function $9e(t,e){const r=self.document.createElement("source");r.type="video/mp4",r.src=e,t.appendChild(r)}function UI(t){return t==="audio"?1:0}class Y5{constructor(e){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(e){this.streamController=e}destroy(){this.hls&&this.unregisterListener(),this.timer&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){const{hls:e}=this;e.on(Be.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(Be.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(Be.MANIFEST_PARSED,this.onManifestParsed,this),e.on(Be.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(Be.BUFFER_CODECS,this.onBufferCodecs,this),e.on(Be.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){const{hls:e}=this;e.off(Be.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(Be.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(Be.MANIFEST_PARSED,this.onManifestParsed,this),e.off(Be.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(Be.BUFFER_CODECS,this.onBufferCodecs,this),e.off(Be.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(e,r){const n=this.hls.levels[r.droppedLevel];this.isLevelAllowed(n)&&this.restrictedLevels.push({bitrate:n.bitrate,height:n.height,width:n.width})}onMediaAttaching(e,r){this.media=r.media instanceof HTMLVideoElement?r.media:null,this.clientRect=null,this.timer&&this.hls.levels.length&&this.detectPlayerSize()}onManifestParsed(e,r){const n=this.hls;this.restrictedLevels=[],this.firstLevel=r.firstLevel,n.config.capLevelToPlayerSize&&r.video&&this.startCapping()}onLevelsUpdated(e,r){this.timer&&Xn(this.autoLevelCapping)&&this.detectPlayerSize()}onBufferCodecs(e,r){this.hls.config.capLevelToPlayerSize&&r.video&&this.startCapping()}onMediaDetaching(){this.stopCapping(),this.media=null}detectPlayerSize(){if(this.media){if(this.mediaHeight<=0||this.mediaWidth<=0){this.clientRect=null;return}const e=this.hls.levels;if(e.length){const r=this.hls,n=this.getMaxLevel(e.length-1);n!==this.autoLevelCapping&&r.logger.log(`Setting autoLevelCapping to ${n}: ${e[n].height}p@${e[n].bitrate} for media ${this.mediaWidth}x${this.mediaHeight}`),r.autoLevelCapping=n,r.autoLevelEnabled&&r.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=r.autoLevelCapping}}}getMaxLevel(e){const r=this.hls.levels;if(!r.length)return-1;const n=r.filter((i,a)=>this.isLevelAllowed(i)&&a<=e);return this.clientRect=null,Y5.getMaxLevelByMediaSize(n,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;const e=this.media,r={width:0,height:0};if(e){const n=e.getBoundingClientRect();r.width=n.width,r.height=n.height,!r.width&&!r.height&&(r.width=n.right-n.left||e.width||0,r.height=n.bottom-n.top||e.height||0)}return this.clientRect=r,r}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch{}return Math.min(e,this.hls.config.maxDevicePixelRatio)}isLevelAllowed(e){return!this.restrictedLevels.some(n=>e.bitrate===n.bitrate&&e.width===n.width&&e.height===n.height)}static getMaxLevelByMediaSize(e,r,n){if(!(e!=null&&e.length))return-1;const i=(c,u)=>u?c.width!==u.width||c.height!==u.height:!0;let a=e.length-1;const o=Math.max(r,n);for(let c=0;c<e.length;c+=1){const u=e[c];if((u.width>=o||u.height>=o)&&i(u,e[c+1])){a=c;break}}return a}}const H9e={MANIFEST:"m",AUDIO:"a",VIDEO:"v",MUXED:"av",INIT:"i",CAPTION:"c",TIMED_TEXT:"tt",KEY:"k",OTHER:"o"},Oh=H9e,Q9e={HLS:"h"},z9e=Q9e;class JA{constructor(e,r){Array.isArray(e)&&(e=e.map(n=>n instanceof JA?n:new JA(n))),this.value=e,this.params=r}}const V9e="Dict";function K9e(t){return Array.isArray(t)?JSON.stringify(t):t instanceof Map?"Map{}":t instanceof Set?"Set{}":typeof t=="object"?JSON.stringify(t):String(t)}function G9e(t,e,r,n){return new Error(`failed to ${t} "${K9e(e)}" as ${r}`,{cause:n})}function ep(t,e,r){return G9e("serialize",t,e,r)}class dse{constructor(e){this.description=e}}const gG="Bare Item",W9e="Boolean";function Y9e(t){if(typeof t!="boolean")throw ep(t,W9e);return t?"?1":"?0"}function q9e(t){return btoa(String.fromCharCode(...t))}const X9e="Byte Sequence";function Z9e(t){if(ArrayBuffer.isView(t)===!1)throw ep(t,X9e);return`:${q9e(t)}:`}const J9e="Integer";function eHe(t){return t<-999999999999999||999999999999999<t}function hse(t){if(eHe(t))throw ep(t,J9e);return t.toString()}function tHe(t){return`@${hse(t.getTime()/1e3)}`}function fse(t,e){if(t<0)return-fse(-t,e);const r=Math.pow(10,e);if(Math.abs(t*r%1-.5)<Number.EPSILON){const i=Math.floor(t*r);return(i%2===0?i:i+1)/r}else return Math.round(t*r)/r}const rHe="Decimal";function nHe(t){const e=fse(t,3);if(Math.floor(Math.abs(e)).toString().length>12)throw ep(t,rHe);const r=e.toString();return r.includes(".")?r:`${r}.0`}const iHe="String",sHe=/[\x00-\x1f\x7f]+/;function aHe(t){if(sHe.test(t))throw ep(t,iHe);return`"${t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`}function oHe(t){return t.description||t.toString().slice(7,-1)}const lHe="Token";function vG(t){const e=oHe(t);if(/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(e)===!1)throw ep(e,lHe);return e}function TO(t){switch(typeof t){case"number":if(!Xn(t))throw ep(t,gG);return Number.isInteger(t)?hse(t):nHe(t);case"string":return aHe(t);case"symbol":return vG(t);case"boolean":return Y9e(t);case"object":if(t instanceof Date)return tHe(t);if(t instanceof Uint8Array)return Z9e(t);if(t instanceof dse)return vG(t);default:throw ep(t,gG)}}const cHe="Key";function CO(t){if(/^[a-z*][a-z0-9\-_.*]*$/.test(t)===!1)throw ep(t,cHe);return t}function VF(t){return t==null?"":Object.entries(t).map(([e,r])=>r===!0?`;${CO(e)}`:`;${CO(e)}=${TO(r)}`).join("")}function mse(t){return t instanceof JA?`${TO(t.value)}${VF(t.params)}`:TO(t)}function uHe(t){return`(${t.value.map(mse).join(" ")})${VF(t.params)}`}function dHe(t,e={whitespace:!0}){if(typeof t!="object"||t==null)throw ep(t,V9e);const r=t instanceof Map?t.entries():Object.entries(t),n=e?.whitespace?" ":"";return Array.from(r).map(([i,a])=>{a instanceof JA||(a=new JA(a));let o=CO(i);return a.value===!0?o+=VF(a.params):(o+="=",Array.isArray(a.value)?o+=uHe(a):o+=mse(a)),o}).join(`,${n}`)}function Ase(t,e){return dHe(t,e)}const mA="CMCD-Object",Cc="CMCD-Request",yv="CMCD-Session",t0="CMCD-Status",hHe={br:mA,ab:mA,d:mA,ot:mA,tb:mA,tpb:mA,lb:mA,tab:mA,lab:mA,url:mA,pb:Cc,bl:Cc,tbl:Cc,dl:Cc,ltc:Cc,mtp:Cc,nor:Cc,nrr:Cc,rc:Cc,sn:Cc,sta:Cc,su:Cc,ttfb:Cc,ttfbb:Cc,ttlb:Cc,cmsdd:Cc,cmsds:Cc,smrt:Cc,df:Cc,cs:Cc,ts:Cc,cid:yv,pr:yv,sf:yv,sid:yv,st:yv,v:yv,msd:yv,bs:t0,bsd:t0,cdn:t0,rtp:t0,bg:t0,pt:t0,ec:t0,e:t0},fHe={REQUEST:Cc};function mHe(t){return Object.keys(t).reduce((e,r)=>{var n;return(n=t[r])===null||n===void 0||n.forEach(i=>e[i]=r),e},{})}function AHe(t,e){const r={};if(!t)return r;const n=Object.keys(t),i=e?mHe(e):{};return n.reduce((a,o)=>{var c;const u=hHe[o]||i[o]||fHe.REQUEST,l=(c=a[u])!==null&&c!==void 0?c:a[u]={};return l[o]=t[o],a},r)}function pHe(t){return["ot","sf","st","e","sta"].includes(t)}function gHe(t){return typeof t=="number"?Xn(t):t!=null&&t!==""&&t!==!1}const pse="event";function vHe(t,e){const r=new URL(t),n=new URL(e);if(r.origin!==n.origin)return t;const i=r.pathname.split("/").slice(1),a=n.pathname.split("/").slice(1,-1);for(;i[0]===a[0];)i.shift(),a.shift();for(;a.length;)a.shift(),i.unshift("..");return i.join("/")+r.search+r.hash}const vj=t=>Math.round(t),NO=(t,e)=>Array.isArray(t)?t.map(r=>NO(r,e)):t instanceof JA&&typeof t.value=="string"?new JA(NO(t.value,e),t.params):(e.baseUrl&&(t=vHe(t,e.baseUrl)),e.version===1?encodeURIComponent(t):t),SS=t=>vj(t/100)*100,yHe=(t,e)=>{let r=t;return e.version>=2&&(t instanceof JA&&typeof t.value=="string"?r=new JA([t]):typeof t=="string"&&(r=[t])),NO(r,e)},xHe={br:vj,d:vj,bl:SS,dl:SS,mtp:SS,nor:yHe,rtp:SS,tb:vj},gse="request",vse="response",KF=["ab","bg","bl","br","bs","bsd","cdn","cid","cs","df","ec","lab","lb","ltc","msd","mtp","pb","pr","pt","sf","sid","sn","st","sta","tab","tb","tbl","tpb","ts","v"],bHe=["e"],wHe=/^[a-zA-Z0-9-.]+-[a-zA-Z0-9-.]+$/;function q5(t){return wHe.test(t)}function _He(t){return KF.includes(t)||bHe.includes(t)||q5(t)}const yse=["d","dl","nor","ot","rtp","su"];function EHe(t){return KF.includes(t)||yse.includes(t)||q5(t)}const SHe=["cmsdd","cmsds","rc","smrt","ttfb","ttfbb","ttlb","url"];function jHe(t){return KF.includes(t)||yse.includes(t)||SHe.includes(t)||q5(t)}const THe=["bl","br","bs","cid","d","dl","mtp","nor","nrr","ot","pr","rtp","sf","sid","st","su","tb","v"];function CHe(t){return THe.includes(t)||q5(t)}const NHe={[vse]:jHe,[pse]:_He,[gse]:EHe};function xse(t,e={}){const r={};if(t==null||typeof t!="object")return r;const n=e.version||t.v||1,i=e.reportingMode||gse,a=n===1?CHe:NHe[i];let o=Object.keys(t).filter(a);const c=e.filter;typeof c=="function"&&(o=o.filter(c));const u=i===vse||i===pse;u&&!o.includes("ts")&&o.push("ts"),n>1&&!o.includes("v")&&o.push("v");const l=nl({},xHe,e.formatters),d={version:n,reportingMode:i,baseUrl:e.baseUrl};return o.sort().forEach(f=>{let m=t[f];const p=l[f];if(typeof p=="function"&&(m=p(m,d)),f==="v"){if(n===1)return;m=n}f=="pr"&&m===1||(u&&f==="ts"&&!Xn(m)&&(m=Date.now()),gHe(m)&&(pHe(f)&&typeof m=="string"&&(m=new dse(m)),r[f]=m))}),r}function kHe(t,e={}){const r={};if(!t)return r;const n=xse(t,e),i=AHe(n,e?.customHeaderMap);return Object.entries(i).reduce((a,[o,c])=>{const u=Ase(c,{whitespace:!1});return u&&(a[o]=u),a},r)}function LHe(t,e,r){return nl(t,kHe(e,r))}const IHe="CMCD";function BHe(t,e={}){return t?Ase(xse(t,e),{whitespace:!1}):""}function PHe(t,e={}){if(!t)return"";const r=BHe(t,e);return encodeURIComponent(r)}function OHe(t,e={}){if(!t)return"";const r=PHe(t,e);return`${IHe}=${r}`}const yG=/CMCD=[^&#]+/;function RHe(t,e,r){const n=OHe(e,r);if(!n)return t;if(yG.test(t))return t.replace(yG,n);const i=t.includes("?")?"&":"?";return`${t}${i}${n}`}class DHe{constructor(e){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.includeKeys=void 0,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=i=>{try{this.apply(i,{ot:Oh.MANIFEST,su:!this.initialized})}catch(a){this.hls.logger.warn("Could not generate manifest CMCD data.",a)}},this.applyFragmentData=i=>{try{const{frag:a,part:o}=i,c=this.hls.levels[a.level],u=this.getObjectType(a),l={d:(o||a).duration*1e3,ot:u};(u===Oh.VIDEO||u===Oh.AUDIO||u==Oh.MUXED)&&(l.br=c.bitrate/1e3,l.tb=this.getTopBandwidth(u)/1e3,l.bl=this.getBufferLength(u));const d=o?this.getNextPart(o):this.getNextFrag(a);d!=null&&d.url&&d.url!==a.url&&(l.nor=d.url),this.apply(i,l)}catch(a){this.hls.logger.warn("Could not generate segment CMCD data.",a)}},this.hls=e;const r=this.config=e.config,{cmcd:n}=r;n!=null&&(r.pLoader=this.createPlaylistLoader(),r.fLoader=this.createFragmentLoader(),this.sid=n.sessionId||e.sessionId,this.cid=n.contentId,this.useHeaders=n.useHeaders===!0,this.includeKeys=n.includeKeys,this.registerListeners())}registerListeners(){const e=this.hls;e.on(Be.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(Be.MEDIA_DETACHED,this.onMediaDetached,this),e.on(Be.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){const e=this.hls;e.off(Be.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(Be.MEDIA_DETACHED,this.onMediaDetached,this),e.off(Be.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null,this.onWaiting=this.onPlaying=this.media=null}onMediaAttached(e,r){this.media=r.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(e,r){var n,i;this.audioBuffer=(n=r.tracks.audio)==null?void 0:n.buffer,this.videoBuffer=(i=r.tracks.video)==null?void 0:i.buffer}createData(){var e;return{v:1,sf:z9e.HLS,sid:this.sid,cid:this.cid,pr:(e=this.media)==null?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(e,r={}){nl(r,this.createData());const n=r.ot===Oh.INIT||r.ot===Oh.VIDEO||r.ot===Oh.MUXED;this.starved&&n&&(r.bs=!0,r.su=!0,this.starved=!1),r.su==null&&(r.su=this.buffering);const{includeKeys:i}=this;i&&(r=Object.keys(r).reduce((o,c)=>(i.includes(c)&&(o[c]=r[c]),o),{}));const a={baseUrl:e.url};this.useHeaders?(e.headers||(e.headers={}),LHe(e.headers,r,a)):e.url=RHe(e.url,r,a)}getNextFrag(e){var r;const n=(r=this.hls.levels[e.level])==null?void 0:r.details;if(n){const i=e.sn-n.startSN;return n.fragments[i+1]}}getNextPart(e){var r;const{index:n,fragment:i}=e,a=(r=this.hls.levels[i.level])==null||(r=r.details)==null?void 0:r.partList;if(a){const{sn:o}=i;for(let c=a.length-1;c>=0;c--){const u=a[c];if(u.index===n&&u.fragment.sn===o)return a[c+1]}}}getObjectType(e){const{type:r}=e;if(r==="subtitle")return Oh.TIMED_TEXT;if(e.sn==="initSegment")return Oh.INIT;if(r==="audio")return Oh.AUDIO;if(r==="main")return this.hls.audioTracks.length?Oh.VIDEO:Oh.MUXED}getTopBandwidth(e){let r=0,n;const i=this.hls;if(e===Oh.AUDIO)n=i.audioTracks;else{const a=i.maxAutoLevel,o=a>-1?a+1:i.levels.length;n=i.levels.slice(0,o)}return n.forEach(a=>{a.bitrate>r&&(r=a.bitrate)}),r>0?r:NaN}getBufferLength(e){const r=this.media,n=e===Oh.AUDIO?this.audioBuffer:this.videoBuffer;return!n||!r?NaN:Hs.bufferInfo(n,r.currentTime,this.config.maxBufferHole).len*1e3}createPlaylistLoader(){const{pLoader:e}=this.config,r=this.applyPlaylistData,n=e||this.config.loader;return class{constructor(a){this.loader=void 0,this.loader=new n(a)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(a,o,c){r(a),this.loader.load(a,o,c)}}}createFragmentLoader(){const{fLoader:e}=this.config,r=this.applyFragmentData,n=e||this.config.loader;return class{constructor(a){this.loader=void 0,this.loader=new n(a)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(a,o,c){r(a),this.loader.load(a,o,c)}}}}const MHe=3e5;class FHe extends um{constructor(e){super("content-steering",e.logger),this.hls=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this._pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=e,this.registerListeners()}registerListeners(){const e=this.hls;e.on(Be.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Be.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(Be.MANIFEST_PARSED,this.onManifestParsed,this),e.on(Be.ERROR,this.onError,this)}unregisterListeners(){const e=this.hls;e&&(e.off(Be.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Be.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(Be.MANIFEST_PARSED,this.onManifestParsed,this),e.off(Be.ERROR,this.onError,this))}pathways(){return(this.levels||[]).reduce((e,r)=>(e.indexOf(r.pathwayId)===-1&&e.push(r.pathwayId),e),[])}get pathwayPriority(){return this._pathwayPriority}set pathwayPriority(e){this.updatePathwayPriority(e)}startLoad(){if(this.started=!0,this.clearTimeout(),this.enabled&&this.uri){if(this.updated){const e=this.timeToLoad*1e3-(performance.now()-this.updated);if(e>0){this.scheduleRefresh(this.uri,e);return}}this.loadSteeringManifest(this.uri)}}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),this.clearTimeout()}clearTimeout(){this.reloadTimer!==-1&&(self.clearTimeout(this.reloadTimer),this.reloadTimer=-1)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(e){const r=this.levels;r&&(this.levels=r.filter(n=>n!==e))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(e,r){const{contentSteering:n}=r;n!==null&&(this.pathwayId=n.pathwayId,this.uri=n.uri,this.started&&this.startLoad())}onManifestParsed(e,r){this.audioTracks=r.audioTracks,this.subtitleTracks=r.subtitleTracks}onError(e,r){const{errorAction:n}=r;if(n?.action===Ud.SendAlternateToPenaltyBox&&n.flags===hf.MoveAllAlternatesMatchingHost){const i=this.levels;let a=this._pathwayPriority,o=this.pathwayId;if(r.context){const{groupId:c,pathwayId:u,type:l}=r.context;c&&i?o=this.getPathwayForGroupId(c,l,o):u&&(o=u)}o in this.penalizedPathways||(this.penalizedPathways[o]=performance.now()),!a&&i&&(a=this.pathways()),a&&a.length>1&&(this.updatePathwayPriority(a),n.resolved=this.pathwayId!==o),r.details===br.BUFFER_APPEND_ERROR&&!r.fatal?n.resolved=!0:n.resolved||this.warn(`Could not resolve ${r.details} ("${r.error.message}") with content-steering for Pathway: ${o} levels: ${i&&i.length} priorities: ${fl(a)} penalized: ${fl(this.penalizedPathways)}`)}}filterParsedLevels(e){this.levels=e;let r=this.getLevelsForPathway(this.pathwayId);if(r.length===0){const n=e[0].pathwayId;this.log(`No levels found in Pathway ${this.pathwayId}. Setting initial Pathway to "${n}"`),r=this.getLevelsForPathway(n),this.pathwayId=n}return r.length!==e.length&&this.log(`Found ${r.length}/${e.length} levels in Pathway "${this.pathwayId}"`),r}getLevelsForPathway(e){return this.levels===null?[]:this.levels.filter(r=>e===r.pathwayId)}updatePathwayPriority(e){this._pathwayPriority=e;let r;const n=this.penalizedPathways,i=performance.now();Object.keys(n).forEach(a=>{i-n[a]>MHe&&delete n[a]});for(let a=0;a<e.length;a++){const o=e[a];if(o in n)continue;if(o===this.pathwayId)return;const c=this.hls.nextLoadLevel,u=this.hls.levels[c];if(r=this.getLevelsForPathway(o),r.length>0){this.log(`Setting Pathway to "${o}"`),this.pathwayId=o,Uie(r),this.hls.trigger(Be.LEVELS_UPDATED,{levels:r});const l=this.hls.levels[c];u&&l&&this.levels&&(l.attrs["STABLE-VARIANT-ID"]!==u.attrs["STABLE-VARIANT-ID"]&&l.bitrate!==u.bitrate&&this.log(`Unstable Pathways change from bitrate ${u.bitrate} to ${l.bitrate}`),this.hls.nextLoadLevel=c);break}}}getPathwayForGroupId(e,r,n){const i=this.getLevelsForPathway(n).concat(this.levels||[]);for(let a=0;a<i.length;a++)if(r===ba.AUDIO_TRACK&&i[a].hasAudioGroup(e)||r===ba.SUBTITLE_TRACK&&i[a].hasSubtitleGroup(e))return i[a].pathwayId;return n}clonePathways(e){const r=this.levels;if(!r)return;const n={},i={};e.forEach(a=>{const{ID:o,"BASE-ID":c,"URI-REPLACEMENT":u}=a;if(r.some(d=>d.pathwayId===o))return;const l=this.getLevelsForPathway(c).map(d=>{const f=new cc(d.attrs);f["PATHWAY-ID"]=o;const m=f.AUDIO&&`${f.AUDIO}_clone_${o}`,p=f.SUBTITLES&&`${f.SUBTITLES}_clone_${o}`;m&&(n[f.AUDIO]=m,f.AUDIO=m),p&&(i[f.SUBTITLES]=p,f.SUBTITLES=p);const g=bse(d.uri,f["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",u),y=new d_({attrs:f,audioCodec:d.audioCodec,bitrate:d.bitrate,height:d.height,name:d.name,url:g,videoCodec:d.videoCodec,width:d.width});if(d.audioGroups)for(let x=1;x<d.audioGroups.length;x++)y.addGroupId("audio",`${d.audioGroups[x]}_clone_${o}`);if(d.subtitleGroups)for(let x=1;x<d.subtitleGroups.length;x++)y.addGroupId("text",`${d.subtitleGroups[x]}_clone_${o}`);return y});r.push(...l),xG(this.audioTracks,n,u,o),xG(this.subtitleTracks,i,u,o)})}loadSteeringManifest(e){const r=this.hls.config,n=r.loader;this.loader&&this.loader.destroy(),this.loader=new n(r);let i;try{i=new self.URL(e)}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest URI: ${e}`);return}if(i.protocol!=="data:"){const d=(this.hls.bandwidthEstimate||r.abrEwmaDefaultEstimate)|0;i.searchParams.set("_HLS_pathway",this.pathwayId),i.searchParams.set("_HLS_throughput",""+d)}const a={responseType:"json",url:i.href},o=r.steeringManifestLoadPolicy.default,c=o.errorRetry||o.timeoutRetry||{},u={loadPolicy:o,timeout:o.maxLoadTimeMs,maxRetry:c.maxNumRetry||0,retryDelay:c.retryDelayMs||0,maxRetryDelay:c.maxRetryDelayMs||0},l={onSuccess:(d,f,m,p)=>{this.log(`Loaded steering manifest: "${i}"`);const g=d.data;if(g?.VERSION!==1){this.log(`Steering VERSION ${g.VERSION} not supported!`);return}this.updated=performance.now(),this.timeToLoad=g.TTL;const{"RELOAD-URI":y,"PATHWAY-CLONES":x,"PATHWAY-PRIORITY":w}=g;if(y)try{this.uri=new self.URL(y,i).href}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest RELOAD-URI: ${y}`);return}this.scheduleRefresh(this.uri||m.url),x&&this.clonePathways(x);const _={steeringManifest:g,url:i.toString()};this.hls.trigger(Be.STEERING_MANIFEST_LOADED,_),w&&this.updatePathwayPriority(w)},onError:(d,f,m,p)=>{if(this.log(`Error loading steering manifest: ${d.code} ${d.text} (${f.url})`),this.stopLoad(),d.code===410){this.enabled=!1,this.log(`Steering manifest ${f.url} no longer available`);return}let g=this.timeToLoad*1e3;if(d.code===429){const y=this.loader;if(typeof y?.getResponseHeader=="function"){const x=y.getResponseHeader("Retry-After");x&&(g=parseFloat(x)*1e3)}this.log(`Steering manifest ${f.url} rate limited`);return}this.scheduleRefresh(this.uri||f.url,g)},onTimeout:(d,f,m)=>{this.log(`Timeout loading steering manifest (${f.url})`),this.scheduleRefresh(this.uri||f.url)}};this.log(`Requesting steering manifest: ${i}`),this.loader.load(a,u,l)}scheduleRefresh(e,r=this.timeToLoad*1e3){this.clearTimeout(),this.reloadTimer=self.setTimeout(()=>{var n;const i=(n=this.hls)==null?void 0:n.media;if(i&&!i.ended){this.loadSteeringManifest(e);return}this.scheduleRefresh(e,this.timeToLoad*1e3)},r)}}function xG(t,e,r,n){t&&Object.keys(e).forEach(i=>{const a=t.filter(o=>o.groupId===i).map(o=>{const c=nl({},o);return c.details=void 0,c.attrs=new cc(c.attrs),c.url=c.attrs.URI=bse(o.url,o.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",r),c.groupId=c.attrs["GROUP-ID"]=e[i],c.attrs["PATHWAY-ID"]=n,c});t.push(...a)})}function bse(t,e,r,n){const{HOST:i,PARAMS:a,[r]:o}=n;let c;e&&(c=o?.[e],c&&(t=c));const u=new self.URL(t);return i&&!c&&(u.host=i),a&&Object.keys(a).sort().forEach(l=>{l&&u.searchParams.set(l,a[l])}),u.href}class jb extends um{constructor(e){super("eme",e.logger),this.hls=void 0,this.config=void 0,this.media=null,this.mediaResolved=void 0,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.mediaKeys=null,this.setMediaKeysQueue=jb.CDMCleanupPromise?[jb.CDMCleanupPromise]:[],this.bannedKeyIds={},this.onMediaEncrypted=r=>{const{initDataType:n,initData:i}=r,a=`"${r.type}" event: init data type: "${n}"`;if(this.debug(a),i!==null){if(!this.keyFormatPromise){let o=Object.keys(this.keySystemAccessPromises);o.length||(o=Iw(this.config));const c=o.map(II).filter(u=>!!u);this.keyFormatPromise=this.getKeyFormatPromise(c)}this.keyFormatPromise.then(o=>{const c=Aj(o);if(n!=="sinf"||c!==hc.FAIRPLAY){this.log(`Ignoring "${r.type}" event with init data type: "${n}" for selected key-system ${c}`);return}let u;try{const p=Mu(new Uint8Array(i)),g=OF(JSON.parse(p).sinf),y=Aie(g);if(!y)throw new Error("'schm' box missing or not cbcs/cenc with schi > tenc");u=new Uint8Array(y.subarray(8,24))}catch(p){this.warn(`${a} Failed to parse sinf: ${p}`);return}const l=$d(u),{keyIdToKeySessionPromise:d,mediaKeySessions:f}=this;let m=d[l];for(let p=0;p<f.length;p++){const g=f[p],y=g.decryptdata;if(!y.keyId)continue;const x=$d(y.keyId);if(oN(u,y.keyId)||y.uri.replace(/-/g,"").indexOf(l)!==-1){if(m=d[x],!m)continue;if(y.pssh)break;delete d[x],y.pssh=new Uint8Array(i),y.keyId=u,m=d[l]=m.then(()=>this.generateRequestWithPreferredKeySession(g,n,i,"encrypted-event-key-match")),m.catch(w=>this.handleError(w));break}}m||this.handleError(new Error(`Key ID ${l} not encountered in playlist. Key-system sessions ${f.length}.`))}).catch(o=>this.handleError(o))}},this.onWaitingForKey=r=>{this.log(`"${r.type}" event`)},this.hls=e,this.config=e.config,this.registerListeners()}destroy(){this.onDestroying(),this.onMediaDetached();const e=this.config;e.requestMediaKeySystemAccessFunc=null,e.licenseXhrSetup=e.licenseResponseCallback=void 0,e.drmSystems=e.drmSystemOptions={},this.hls=this.config=this.keyIdToKeySessionPromise=null,this.onMediaEncrypted=this.onWaitingForKey=null}registerListeners(){this.hls.on(Be.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(Be.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(Be.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(Be.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.on(Be.DESTROYING,this.onDestroying,this)}unregisterListeners(){this.hls.off(Be.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(Be.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(Be.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(Be.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.off(Be.DESTROYING,this.onDestroying,this)}getLicenseServerUrl(e){const{drmSystems:r,widevineLicenseUrl:n}=this.config,i=r?.[e];if(i)return i.licenseUrl;if(e===hc.WIDEVINE&&n)return n}getLicenseServerUrlOrThrow(e){const r=this.getLicenseServerUrl(e);if(r===void 0)throw new Error(`no license server URL configured for key-system "${e}"`);return r}getServerCertificateUrl(e){const{drmSystems:r}=this.config,n=r?.[e];if(n)return n.serverCertificateUrl;this.log(`No Server Certificate in config.drmSystems["${e}"]`)}attemptKeySystemAccess(e){const r=this.hls.levels,n=(o,c,u)=>!!o&&u.indexOf(o)===c,i=r.map(o=>o.audioCodec).filter(n),a=r.map(o=>o.videoCodec).filter(n);return i.length+a.length===0&&a.push("avc1.42e01e"),new Promise((o,c)=>{const u=l=>{const d=l.shift();this.getMediaKeysPromise(d,i,a).then(f=>o({keySystem:d,mediaKeys:f})).catch(f=>{l.length?u(l):f instanceof cf?c(f):c(new cf({type:Oi.KEY_SYSTEM_ERROR,details:br.KEY_SYSTEM_NO_ACCESS,error:f,fatal:!0},f.message))})};u(e)})}requestMediaKeySystemAccess(e,r){const{requestMediaKeySystemAccessFunc:n}=this.config;if(typeof n!="function"){let i=`Configured requestMediaKeySystemAccess is not a function ${n}`;return Iie===null&&self.location.protocol==="http:"&&(i=`navigator.requestMediaKeySystemAccess is not available over insecure protocol ${location.protocol}`),Promise.reject(new Error(i))}return n(e,r)}getMediaKeysPromise(e,r,n){var i;const a=y$e(e,r,n,this.config.drmSystemOptions||{});let o=this.keySystemAccessPromises[e],c=(i=o)==null?void 0:i.keySystemAccess;if(!c){this.log(`Requesting encrypted media "${e}" key-system access with config: ${fl(a)}`),c=this.requestMediaKeySystemAccess(e,a);const u=o=this.keySystemAccessPromises[e]={keySystemAccess:c};return c.catch(l=>{this.log(`Failed to obtain access to key-system "${e}": ${l}`)}),c.then(l=>{this.log(`Access for key-system "${l.keySystem}" obtained`);const d=this.fetchServerCertificate(e);this.log(`Create media-keys for "${e}"`);const f=u.mediaKeys=l.createMediaKeys().then(m=>(this.log(`Media-keys created for "${e}"`),u.hasMediaKeys=!0,d.then(p=>p?this.setMediaKeysServerCertificate(m,e,p):m)));return f.catch(m=>{this.error(`Failed to create media-keys for "${e}"}: ${m}`)}),f})}return c.then(()=>o.mediaKeys)}createMediaKeySessionContext({decryptdata:e,keySystem:r,mediaKeys:n}){this.log(`Creating key-system session "${r}" keyId: ${$d(e.keyId||[])} keyUri: ${e.uri}`);const i=n.createSession(),a={decryptdata:e,keySystem:r,mediaKeys:n,mediaKeysSession:i,keyStatus:"status-pending"};return this.mediaKeySessions.push(a),a}renewKeySession(e){const r=e.decryptdata;if(r.pssh){const n=this.createMediaKeySessionContext(e),i=jS(r),a="cenc";this.keyIdToKeySessionPromise[i]=this.generateRequestWithPreferredKeySession(n,a,r.pssh.buffer,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(e)}updateKeySession(e,r){const n=e.mediaKeysSession;return this.log(`Updating key-session "${n.sessionId}" for keyId ${$d(e.decryptdata.keyId||[])}
      } (data length: ${r.byteLength})`),n.update(r)}getSelectedKeySystemFormats(){return Object.keys(this.keySystemAccessPromises).map(e=>({keySystem:e,hasMediaKeys:this.keySystemAccessPromises[e].hasMediaKeys})).filter(({hasMediaKeys:e})=>!!e).map(({keySystem:e})=>II(e)).filter(e=>!!e)}getKeySystemAccess(e){return this.getKeySystemSelectionPromise(e).then(({keySystem:r,mediaKeys:n})=>this.attemptSetMediaKeys(r,n))}selectKeySystem(e){return new Promise((r,n)=>{this.getKeySystemSelectionPromise(e).then(({keySystem:i})=>{const a=II(i);a?r(a):n(new Error(`Unable to find format for key-system "${i}"`))}).catch(n)})}selectKeySystemFormat(e){const r=Object.keys(e.levelkeys||{});return this.keyFormatPromise||(this.log(`Selecting key-system from fragment (sn: ${e.sn} ${e.type}: ${e.level}) key formats ${r.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(r)),this.keyFormatPromise}getKeyFormatPromise(e){const r=Iw(this.config),n=e.map(Aj).filter(i=>!!i&&r.indexOf(i)!==-1);return this.selectKeySystem(n)}getKeyStatus(e){const{mediaKeySessions:r}=this;for(let n=0;n<r.length;n++){const i=UHe(e,r[n]);if(i)return i}}loadKey(e){const r=e.keyInfo.decryptdata,n=jS(r),i=this.bannedKeyIds[n];if(i||this.getKeyStatus(r)==="internal-error"){const c=bG(i||"internal-error",r);return this.handleError(c,e.frag),Promise.reject(c)}const a=`(keyId: ${n} format: "${r.keyFormat}" method: ${r.method} uri: ${r.uri})`;this.log(`Starting session for key ${a}`);const o=this.keyIdToKeySessionPromise[n];if(!o){const c=this.getKeySystemForKeyPromise(r).then(({keySystem:u,mediaKeys:l})=>(this.throwIfDestroyed(),this.log(`Handle encrypted media sn: ${e.frag.sn} ${e.frag.type}: ${e.frag.level} using key ${a}`),this.attemptSetMediaKeys(u,l).then(()=>(this.throwIfDestroyed(),this.createMediaKeySessionContext({keySystem:u,mediaKeys:l,decryptdata:r}))))).then(u=>{const l="cenc",d=r.pssh?r.pssh.buffer:null;return this.generateRequestWithPreferredKeySession(u,l,d,"playlist-key")});return c.catch(u=>this.handleError(u,e.frag)),this.keyIdToKeySessionPromise[n]=c,c}return o.catch(c=>{if(c instanceof cf){const u=Uo({},c.data);this.getKeyStatus(r)==="internal-error"&&(u.decryptdata=r);const l=new cf(u,c.message);this.handleError(l,e.frag)}}),o}throwIfDestroyed(e="Invalid state"){if(!this.hls)throw new Error("invalid state")}handleError(e,r){if(this.hls)if(e instanceof cf){r&&(e.data.frag=r);const n=e.data.decryptdata;this.error(`${e.message}${n?` (${$d(n.keyId||[])})`:""}`),this.hls.trigger(Be.ERROR,e.data)}else this.error(e.message),this.hls.trigger(Be.ERROR,{type:Oi.KEY_SYSTEM_ERROR,details:br.KEY_SYSTEM_NO_KEYS,error:e,fatal:!0})}getKeySystemForKeyPromise(e){const r=jS(e),n=this.keyIdToKeySessionPromise[r];if(!n){const i=Aj(e.keyFormat),a=i?[i]:Iw(this.config);return this.attemptKeySystemAccess(a)}return n}getKeySystemSelectionPromise(e){if(e.length||(e=Iw(this.config)),e.length===0)throw new cf({type:Oi.KEY_SYSTEM_ERROR,details:br.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},`Missing key-system license configuration options ${fl({drmSystems:this.config.drmSystems})}`);return this.attemptKeySystemAccess(e)}attemptSetMediaKeys(e,r){if(this.mediaResolved=void 0,this.mediaKeys===r)return Promise.resolve();const n=this.setMediaKeysQueue.slice();this.log(`Setting media-keys for "${e}"`);const i=Promise.all(n).then(()=>this.media?this.media.setMediaKeys(r):new Promise((a,o)=>{this.mediaResolved=()=>{if(this.mediaResolved=void 0,!this.media)return o(new Error("Attempted to set mediaKeys without media element attached"));this.mediaKeys=r,this.media.setMediaKeys(r).then(a).catch(o)}}));return this.mediaKeys=r,this.setMediaKeysQueue.push(i),i.then(()=>{this.log(`Media-keys set for "${e}"`),n.push(i),this.setMediaKeysQueue=this.setMediaKeysQueue.filter(a=>n.indexOf(a)===-1)})}generateRequestWithPreferredKeySession(e,r,n,i){var a;const o=(a=this.config.drmSystems)==null||(a=a[e.keySystem])==null?void 0:a.generateRequest;if(o)try{const g=o.call(this.hls,r,n,e);if(!g)throw new Error("Invalid response from configured generateRequest filter");r=g.initDataType,n=g.initData?g.initData:null,e.decryptdata.pssh=n?new Uint8Array(n):null}catch(g){if(this.warn(g.message),this.hls&&this.hls.config.debug)throw g}if(n===null)return this.log(`Skipping key-session request for "${i}" (no initData)`),Promise.resolve(e);const c=jS(e.decryptdata),u=e.decryptdata.uri;this.log(`Generating key-session request for "${i}" keyId: ${c} URI: ${u} (init data type: ${r} length: ${n.byteLength})`);const l=new DF,d=e._onmessage=g=>{const y=e.mediaKeysSession;if(!y){l.emit("error",new Error("invalid state"));return}const{messageType:x,message:w}=g;this.log(`"${x}" message event for session "${y.sessionId}" message size: ${w.byteLength}`),x==="license-request"||x==="license-renewal"?this.renewLicense(e,w).catch(_=>{l.eventNames().length?l.emit("error",_):this.handleError(_)}):x==="license-release"?e.keySystem===hc.FAIRPLAY&&this.updateKeySession(e,bO("acknowledged")).then(()=>this.removeSession(e)).catch(_=>this.handleError(_)):this.warn(`unhandled media key message type "${x}"`)},f=(g,y)=>{y.keyStatus=g;let x;g.startsWith("usable")?l.emit("resolved"):g==="internal-error"||g==="output-restricted"||g==="output-downscaled"?x=bG(g,y.decryptdata):g==="expired"?x=new Error(`key expired (keyId: ${c})`):g==="released"?x=new Error("key released"):g==="status-pending"||this.warn(`unhandled key status change "${g}" (keyId: ${c})`),x&&(l.eventNames().length?l.emit("error",x):this.handleError(x))},m=e._onkeystatuseschange=g=>{if(!e.mediaKeysSession){l.emit("error",new Error("invalid state"));return}const x=this.getKeyStatuses(e);if(!Object.keys(x).some(N=>x[N]!=="status-pending"))return;if(x[c]==="expired"){this.log(`Expired key ${fl(x)} in key-session "${e.mediaKeysSession.sessionId}"`),this.renewKeySession(e);return}let _=x[c];if(_)f(_,e);else{var E;e.keyStatusTimeouts||(e.keyStatusTimeouts={}),(E=e.keyStatusTimeouts)[c]||(E[c]=self.setTimeout(()=>{if(!e.mediaKeysSession||!this.mediaKeys)return;const C=this.getKeyStatus(e.decryptdata);if(C&&C!=="status-pending")return this.log(`No status for keyId ${c} in key-session "${e.mediaKeysSession.sessionId}". Using session key-status ${C} from other session.`),f(C,e);this.log(`key status for ${c} in key-session "${e.mediaKeysSession.sessionId}" timed out after 1000ms`),_="internal-error",f(_,e)},1e3)),this.log(`No status for keyId ${c} (${fl(x)}).`)}};xh(e.mediaKeysSession,"message",d),xh(e.mediaKeysSession,"keystatuseschange",m);const p=new Promise((g,y)=>{l.on("error",y),l.on("resolved",g)});return e.mediaKeysSession.generateRequest(r,n).then(()=>{this.log(`Request generated for key-session "${e.mediaKeysSession.sessionId}" keyId: ${c} URI: ${u}`)}).catch(g=>{throw new cf({type:Oi.KEY_SYSTEM_ERROR,details:br.KEY_SYSTEM_NO_SESSION,error:g,decryptdata:e.decryptdata,fatal:!1},`Error generating key-session request: ${g}`)}).then(()=>p).catch(g=>(l.removeAllListeners(),this.removeSession(e).then(()=>{throw g}))).then(()=>(l.removeAllListeners(),e))}getKeyStatuses(e){const r={};return e.mediaKeysSession.keyStatuses.forEach((n,i)=>{if(typeof i=="string"&&typeof n=="object"){const c=i;i=n,n=c}const a="buffer"in i?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):new Uint8Array(i);if(e.keySystem===hc.PLAYREADY&&a.length===16){const c=$d(a);r[c]=n,kie(a)}const o=$d(a);n==="internal-error"&&(this.bannedKeyIds[o]=n),this.log(`key status change "${n}" for keyStatuses keyId: ${o} key-session "${e.mediaKeysSession.sessionId}"`),r[o]=n}),r}fetchServerCertificate(e){const r=this.config,n=r.loader,i=new n(r),a=this.getServerCertificateUrl(e);return a?(this.log(`Fetching server certificate for "${e}"`),new Promise((o,c)=>{const u={responseType:"arraybuffer",url:a},l=r.certLoadPolicy.default,d={loadPolicy:l,timeout:l.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},f={onSuccess:(m,p,g,y)=>{o(m.data)},onError:(m,p,g,y)=>{c(new cf({type:Oi.KEY_SYSTEM_ERROR,details:br.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:g,response:Uo({url:u.url,data:void 0},m)},`"${e}" certificate request failed (${a}). Status: ${m.code} (${m.text})`))},onTimeout:(m,p,g)=>{c(new cf({type:Oi.KEY_SYSTEM_ERROR,details:br.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:g,response:{url:u.url,data:void 0}},`"${e}" certificate request timed out (${a})`))},onAbort:(m,p,g)=>{c(new Error("aborted"))}};i.load(u,d,f)})):Promise.resolve()}setMediaKeysServerCertificate(e,r,n){return new Promise((i,a)=>{e.setServerCertificate(n).then(o=>{this.log(`setServerCertificate ${o?"success":"not supported by CDM"} (${n.byteLength}) on "${r}"`),i(e)}).catch(o=>{a(new cf({type:Oi.KEY_SYSTEM_ERROR,details:br.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:o,fatal:!0},o.message))})})}renewLicense(e,r){return this.requestLicense(e,new Uint8Array(r)).then(n=>this.updateKeySession(e,new Uint8Array(n)).catch(i=>{throw new cf({type:Oi.KEY_SYSTEM_ERROR,details:br.KEY_SYSTEM_SESSION_UPDATE_FAILED,decryptdata:e.decryptdata,error:i,fatal:!1},i.message)}))}unpackPlayReadyKeyMessage(e,r){const n=String.fromCharCode.apply(null,new Uint16Array(r.buffer));if(!n.includes("PlayReadyKeyMessage"))return e.setRequestHeader("Content-Type","text/xml; charset=utf-8"),r;const i=new DOMParser().parseFromString(n,"application/xml"),a=i.querySelectorAll("HttpHeader");if(a.length>0){let d;for(let f=0,m=a.length;f<m;f++){var o,c;d=a[f];const p=(o=d.querySelector("name"))==null?void 0:o.textContent,g=(c=d.querySelector("value"))==null?void 0:c.textContent;p&&g&&e.setRequestHeader(p,g)}}const u=i.querySelector("Challenge"),l=u?.textContent;if(!l)throw new Error("Cannot find <Challenge> in key message");return bO(atob(l))}setupLicenseXHR(e,r,n,i){const a=this.config.licenseXhrSetup;return a?Promise.resolve().then(()=>{if(!n.decryptdata)throw new Error("Key removed");return a.call(this.hls,e,r,n,i)}).catch(o=>{if(!n.decryptdata)throw o;return e.open("POST",r,!0),a.call(this.hls,e,r,n,i)}).then(o=>(e.readyState||e.open("POST",r,!0),{xhr:e,licenseChallenge:o||i})):(e.open("POST",r,!0),Promise.resolve({xhr:e,licenseChallenge:i}))}requestLicense(e,r){const n=this.config.keyLoadPolicy.default;return new Promise((i,a)=>{const o=this.getLicenseServerUrlOrThrow(e.keySystem);this.log(`Sending license request to URL: ${o}`);const c=new XMLHttpRequest;c.responseType="arraybuffer",c.onreadystatechange=()=>{if(!this.hls||!e.mediaKeysSession)return a(new Error("invalid state"));if(c.readyState===4)if(c.status===200){this._requestLicenseFailureCount=0;let u=c.response;this.log(`License received ${u instanceof ArrayBuffer?u.byteLength:u}`);const l=this.config.licenseResponseCallback;if(l)try{u=l.call(this.hls,c,o,e)}catch(d){this.error(d)}i(u)}else{const u=n.errorRetry,l=u?u.maxNumRetry:0;if(this._requestLicenseFailureCount++,this._requestLicenseFailureCount>l||c.status>=400&&c.status<500)a(new cf({type:Oi.KEY_SYSTEM_ERROR,details:br.KEY_SYSTEM_LICENSE_REQUEST_FAILED,decryptdata:e.decryptdata,fatal:!0,networkDetails:c,response:{url:o,data:void 0,code:c.status,text:c.statusText}},`License Request XHR failed (${o}). Status: ${c.status} (${c.statusText})`));else{const d=l-this._requestLicenseFailureCount+1;this.warn(`Retrying license request, ${d} attempts left`),this.requestLicense(e,r).then(i,a)}}},e.licenseXhr&&e.licenseXhr.readyState!==XMLHttpRequest.DONE&&e.licenseXhr.abort(),e.licenseXhr=c,this.setupLicenseXHR(c,o,e,r).then(({xhr:u,licenseChallenge:l})=>{e.keySystem==hc.PLAYREADY&&(l=this.unpackPlayReadyKeyMessage(u,l)),u.send(l)}).catch(a)})}onDestroying(){this.unregisterListeners(),this._clear()}onMediaAttached(e,r){if(!this.config.emeEnabled)return;const n=r.media;this.media=n,xh(n,"encrypted",this.onMediaEncrypted),xh(n,"waitingforkey",this.onWaitingForKey);const i=this.mediaResolved;i?i():this.mediaKeys=n.mediaKeys}onMediaDetached(){const e=this.media;e&&(Qh(e,"encrypted",this.onMediaEncrypted),Qh(e,"waitingforkey",this.onWaitingForKey),this.media=null,this.mediaKeys=null)}_clear(){var e;this._requestLicenseFailureCount=0,this.keyIdToKeySessionPromise={},this.bannedKeyIds={};const r=this.mediaResolved;if(r&&r(),!this.mediaKeys&&!this.mediaKeySessions.length)return;const n=this.media,i=this.mediaKeySessions.slice();this.mediaKeySessions=[],this.mediaKeys=null,D0.clearKeyUriToKeyIdMap();const a=i.length;jb.CDMCleanupPromise=Promise.all(i.map(o=>this.removeSession(o)).concat((n==null||(e=n.setMediaKeys(null))==null?void 0:e.catch(o=>{this.log(`Could not clear media keys: ${o}`),this.hls&&this.hls.trigger(Be.ERROR,{type:Oi.OTHER_ERROR,details:br.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR,fatal:!1,error:new Error(`Could not clear media keys: ${o}`)})}))||Promise.resolve())).catch(o=>{this.log(`Could not close sessions and clear media keys: ${o}`),this.hls&&this.hls.trigger(Be.ERROR,{type:Oi.OTHER_ERROR,details:br.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close sessions and clear media keys: ${o}`)})}).then(()=>{a&&this.log("finished closing key sessions and clearing media keys")})}onManifestLoading(){this._clear()}onManifestLoaded(e,{sessionKeys:r}){if(!(!r||!this.config.emeEnabled)&&!this.keyFormatPromise){const n=r.reduce((i,a)=>(i.indexOf(a.keyFormat)===-1&&i.push(a.keyFormat),i),[]);this.log(`Selecting key-system from session-keys ${n.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(n)}}removeSession(e){const{mediaKeysSession:r,licenseXhr:n,decryptdata:i}=e;if(r){this.log(`Remove licenses and keys and close session "${r.sessionId}" keyId: ${$d(i?.keyId||[])}`),e._onmessage&&(r.removeEventListener("message",e._onmessage),e._onmessage=void 0),e._onkeystatuseschange&&(r.removeEventListener("keystatuseschange",e._onkeystatuseschange),e._onkeystatuseschange=void 0),n&&n.readyState!==XMLHttpRequest.DONE&&n.abort(),e.mediaKeysSession=e.decryptdata=e.licenseXhr=void 0;const a=this.mediaKeySessions.indexOf(e);a>-1&&this.mediaKeySessions.splice(a,1);const{keyStatusTimeouts:o}=e;o&&Object.keys(o).forEach(l=>self.clearTimeout(o[l]));const{drmSystemOptions:c}=this.config;return(b$e(c)?new Promise((l,d)=>{self.setTimeout(()=>d(new Error("MediaKeySession.remove() timeout")),8e3),r.remove().then(l).catch(d)}):Promise.resolve()).catch(l=>{this.log(`Could not remove session: ${l}`),this.hls&&this.hls.trigger(Be.ERROR,{type:Oi.OTHER_ERROR,details:br.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR,fatal:!1,error:new Error(`Could not remove session: ${l}`)})}).then(()=>r.close()).catch(l=>{this.log(`Could not close session: ${l}`),this.hls&&this.hls.trigger(Be.ERROR,{type:Oi.OTHER_ERROR,details:br.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close session: ${l}`)})})}return Promise.resolve()}}jb.CDMCleanupPromise=void 0;function jS(t){if(!t)throw new Error("Could not read keyId of undefined decryptdata");if(t.keyId===null)throw new Error("keyId is null");return $d(t.keyId)}function UHe(t,e){if(t.keyId&&e.mediaKeysSession.keyStatuses.has(t.keyId))return e.mediaKeysSession.keyStatuses.get(t.keyId);if(t.matches(e.decryptdata))return e.keyStatus}class cf extends Error{constructor(e,r){super(r),this.data=void 0,e.error||(e.error=new Error(r)),this.data=e,e.err=e.error}}function bG(t,e){const r=t==="output-restricted",n=r?br.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:br.KEY_SYSTEM_STATUS_INTERNAL_ERROR;return new cf({type:Oi.KEY_SYSTEM_ERROR,details:n,fatal:!1,decryptdata:e},r?"HDCP level output restricted":`key status changed to "${t}"`)}class $He{constructor(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}setStreamController(e){this.streamController=e}registerListeners(){this.hls.on(Be.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.on(Be.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListeners(){this.hls.off(Be.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.off(Be.MEDIA_DETACHING,this.onMediaDetaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(e,r){const n=this.hls.config;if(n.capLevelOnFPSDrop){const i=r.media instanceof self.HTMLVideoElement?r.media:null;this.media=i,i&&typeof i.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),n.fpsDroppedMonitoringPeriod)}}onMediaDetaching(){this.media=null}checkFPS(e,r,n){const i=performance.now();if(r){if(this.lastTime){const a=i-this.lastTime,o=n-this.lastDroppedFrames,c=r-this.lastDecodedFrames,u=1e3*o/a,l=this.hls;if(l.trigger(Be.FPS_DROP,{currentDropped:o,currentDecoded:c,totalDroppedFrames:n}),u>0&&o>l.config.fpsDroppedMonitoringThreshold*c){let d=l.currentLevel;l.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+d),d>0&&(l.autoLevelCapping===-1||l.autoLevelCapping>=d)&&(d=d-1,l.trigger(Be.FPS_DROP_LEVEL_CAPPING,{level:d,droppedLevel:l.currentLevel}),l.autoLevelCapping=d,this.streamController.nextLevelSwitch())}}this.lastTime=i,this.lastDroppedFrames=n,this.lastDecodedFrames=r}}checkFPSInterval(){const e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){const r=e.getVideoPlaybackQuality();this.checkFPS(e,r.totalVideoFrames,r.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}}function wse(t,e){let r;try{r=new Event("addtrack")}catch{r=document.createEvent("Event"),r.initEvent("addtrack",!1,!1)}r.track=t,e.dispatchEvent(r)}function _se(t,e){const r=t.mode;if(r==="disabled"&&(t.mode="hidden"),t.cues&&!t.cues.getCueById(e.id))try{if(t.addCue(e),!t.cues.getCueById(e.id))throw new Error(`addCue is failed for: ${e}`)}catch(n){Ho.debug(`[texttrack-utils]: ${n}`);try{const i=new self.TextTrackCue(e.startTime,e.endTime,e.text);i.id=e.id,t.addCue(i)}catch(i){Ho.debug(`[texttrack-utils]: Legacy TextTrackCue fallback failed: ${i}`)}}r==="disabled"&&(t.mode=r)}function hb(t,e){const r=t.mode;if(r==="disabled"&&(t.mode="hidden"),t.cues)for(let n=t.cues.length;n--;)e&&t.cues[n].removeEventListener("enter",e),t.removeCue(t.cues[n]);r==="disabled"&&(t.mode=r)}function kO(t,e,r,n){const i=t.mode;if(i==="disabled"&&(t.mode="hidden"),t.cues&&t.cues.length>0){const a=QHe(t.cues,e,r);for(let o=0;o<a.length;o++)(!n||n(a[o]))&&t.removeCue(a[o])}i==="disabled"&&(t.mode=i)}function HHe(t,e){if(e<=t[0].startTime)return 0;const r=t.length-1;if(e>t[r].endTime)return-1;let n=0,i=r,a;for(;n<=i;)if(a=Math.floor((i+n)/2),e<t[a].startTime)i=a-1;else if(e>t[a].startTime&&n<r)n=a+1;else return a;return t[n].startTime-e<e-t[i].startTime?n:i}function QHe(t,e,r){const n=[],i=HHe(t,e);if(i>-1)for(let a=i,o=t.length;a<o;a++){const c=t[a];if(c.startTime>=e&&c.endTime<=r)n.push(c);else if(c.startTime>r)return n}return n}function yj(t){const e=[];for(let r=0;r<t.length;r++){const n=t[r];(n.kind==="subtitles"||n.kind==="captions")&&n.label&&e.push(t[r])}return e}class zHe extends zF{constructor(e){super(e,"subtitle-track-controller"),this.media=null,this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.onTextTracksChanged=()=>{if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let r=null;const n=yj(this.media.textTracks);for(let a=0;a<n.length;a++)if(n[a].mode==="hidden")r=n[a];else if(n[a].mode==="showing"){r=n[a];break}const i=this.findTrackForTextTrack(r);this.subtitleTrack!==i&&this.setSubtitleTrack(i)},this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,this.onTextTracksChanged=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(e){this._subtitleDisplay=e,this.trackId>-1&&this.toggleTrackModes()}registerListeners(){const{hls:e}=this;e.on(Be.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(Be.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(Be.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Be.MANIFEST_PARSED,this.onManifestParsed,this),e.on(Be.LEVEL_LOADING,this.onLevelLoading,this),e.on(Be.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(Be.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(Be.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(Be.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(Be.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(Be.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Be.MANIFEST_PARSED,this.onManifestParsed,this),e.off(Be.LEVEL_LOADING,this.onLevelLoading,this),e.off(Be.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(Be.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(Be.ERROR,this.onError,this)}onMediaAttached(e,r){this.media=r.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.onTextTracksChanged,e)}onMediaDetaching(e,r){const n=this.media;if(!n)return;const i=!!r.transferMedia;if(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||n.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),this.subtitleTrack=-1,this.media=null,i)return;yj(n.textTracks).forEach(o=>{hb(o)})}onManifestLoading(){this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(e,r){this.tracks=r.subtitleTracks}onSubtitleTrackLoaded(e,r){const{id:n,groupId:i,details:a}=r,o=this.tracksInGroup[n];if(!o||o.groupId!==i){this.warn(`Subtitle track with id:${n} and group:${i} not found in active group ${o?.groupId}`);return}const c=o.details;o.details=r.details,this.log(`Subtitle track ${n} "${o.name}" lang:${o.lang} group:${i} loaded [${a.startSN}-${a.endSN}]`),n===this.trackId&&this.playlistLoaded(n,r,c)}onLevelLoading(e,r){this.switchLevel(r.level)}onLevelSwitching(e,r){this.switchLevel(r.level)}switchLevel(e){const r=this.hls.levels[e];if(!r)return;const n=r.subtitleGroups||null,i=this.groupIds;let a=this.currentTrack;if(!n||i?.length!==n?.length||n!=null&&n.some(o=>i?.indexOf(o)===-1)){this.groupIds=n,this.trackId=-1,this.currentTrack=null;const o=this.tracks.filter(d=>!n||n.indexOf(d.groupId)!==-1);if(o.length)this.selectDefaultTrack&&!o.some(d=>d.default)&&(this.selectDefaultTrack=!1),o.forEach((d,f)=>{d.id=f});else if(!a&&!this.tracksInGroup.length)return;this.tracksInGroup=o;const c=this.hls.config.subtitlePreference;if(!a&&c){this.selectDefaultTrack=!1;const d=MA(c,o);if(d>-1)a=o[d];else{const f=MA(c,this.tracks);a=this.tracks[f]}}let u=this.findTrackId(a);u===-1&&a&&(u=this.findTrackId(null));const l={subtitleTracks:o};this.log(`Updating subtitle tracks, ${o.length} track(s) found in "${n?.join(",")}" group-id`),this.hls.trigger(Be.SUBTITLE_TRACKS_UPDATED,l),u!==-1&&this.trackId===-1&&this.setSubtitleTrack(u)}}findTrackId(e){const r=this.tracksInGroup,n=this.selectDefaultTrack;for(let i=0;i<r.length;i++){const a=r[i];if(!(n&&!a.default||!n&&!e)&&(!e||ay(a,e)))return i}if(e){for(let i=0;i<r.length;i++){const a=r[i];if(A_(e.attrs,a.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return i}for(let i=0;i<r.length;i++){const a=r[i];if(A_(e.attrs,a.attrs,["LANGUAGE"]))return i}}return-1}findTrackForTextTrack(e){if(e){const r=this.tracksInGroup;for(let n=0;n<r.length;n++){const i=r[n];if(jO(i,e))return n}}return-1}onError(e,r){r.fatal||!r.context||r.context.type===ba.SUBTITLE_TRACK&&r.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(r.context.groupId)!==-1)&&this.checkRetry(r)}get allSubtitleTracks(){return this.tracks}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(e){this.selectDefaultTrack=!1,this.setSubtitleTrack(e)}setSubtitleOption(e){if(this.hls.config.subtitlePreference=e,e){if(e.id===-1)return this.setSubtitleTrack(-1),null;const r=this.allSubtitleTracks;if(this.selectDefaultTrack=!1,r.length){const n=this.currentTrack;if(n&&ay(e,n))return n;const i=MA(e,this.tracksInGroup);if(i>-1){const a=this.tracksInGroup[i];return this.setSubtitleTrack(i),a}else{if(n)return null;{const a=MA(e,r);if(a>-1)return r[a]}}}}return null}loadPlaylist(e){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentTrack)&&this.scheduleLoading(this.currentTrack,e)}loadingPlaylist(e,r){super.loadingPlaylist(e,r);const n=e.id,i=e.groupId,a=this.getUrlWithDirectives(e.url,r),o=e.details,c=o?.age;this.log(`Loading subtitle ${n} "${e.name}" lang:${e.lang} group:${i}${r?.msn!==void 0?" at sn "+r.msn+" part "+r.part:""}${c&&o.live?" age "+c.toFixed(1)+(o.type&&" "+o.type||""):""} ${a}`),this.hls.trigger(Be.SUBTITLE_TRACK_LOADING,{url:a,id:n,groupId:i,deliveryDirectives:r||null,track:e})}toggleTrackModes(){const{media:e}=this;if(!e)return;const r=yj(e.textTracks),n=this.currentTrack;let i;if(n&&(i=r.filter(a=>jO(n,a))[0],i||this.warn(`Unable to find subtitle TextTrack with name "${n.name}" and language "${n.lang}"`)),[].slice.call(r).forEach(a=>{a.mode!=="disabled"&&a!==i&&(a.mode="disabled")}),i){const a=this.subtitleDisplay?"showing":"hidden";i.mode!==a&&(i.mode=a)}}setSubtitleTrack(e){const r=this.tracksInGroup;if(!this.media){this.queuedDefaultTrack=e;return}if(e<-1||e>=r.length||!Xn(e)){this.warn(`Invalid subtitle track id: ${e}`);return}this.selectDefaultTrack=!1;const n=this.currentTrack,i=r[e]||null;if(this.trackId=e,this.currentTrack=i,this.toggleTrackModes(),!i){this.hls.trigger(Be.SUBTITLE_TRACK_SWITCH,{id:e});return}const a=!!i.details&&!i.details.live;if(e===this.trackId&&i===n&&a)return;this.log(`Switching to subtitle-track ${e}`+(i?` "${i.name}" lang:${i.lang} group:${i.groupId}`:""));const{id:o,groupId:c="",name:u,type:l,url:d}=i;this.hls.trigger(Be.SUBTITLE_TRACK_SWITCH,{id:o,groupId:c,name:u,type:l,url:d});const f=this.switchParams(i.url,n?.details,i.details);this.loadPlaylist(f)}}function VHe(){try{return crypto.randomUUID()}catch{try{const e=URL.createObjectURL(new Blob),r=e.toString();return URL.revokeObjectURL(e),r.slice(r.lastIndexOf("/")+1)}catch{let r=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,i=>{const a=(r+Math.random()*16)%16|0;return r=Math.floor(r/16),(i=="x"?a:a&3|8).toString(16)})}}}function x2(t){let e=5381,r=t.length;for(;r;)e=e*33^t.charCodeAt(--r);return(e>>>0).toString()}const Tb=.025;let dN=(function(t){return t[t.Point=0]="Point",t[t.Range=1]="Range",t})({});function KHe(t,e,r){return`${t.identifier}-${r+1}-${x2(e)}`}class GHe{constructor(e,r){this.base=void 0,this._duration=null,this._timelineStart=null,this.appendInPlaceDisabled=void 0,this.appendInPlaceStarted=void 0,this.dateRange=void 0,this.hasPlayed=!1,this.cumulativeDuration=0,this.resumeOffset=NaN,this.playoutLimit=NaN,this.restrictions={skip:!1,jump:!1},this.snapOptions={out:!1,in:!1},this.assetList=[],this.assetListLoader=void 0,this.assetListResponse=null,this.resumeAnchor=void 0,this.error=void 0,this.resetOnResume=void 0,this.base=r,this.dateRange=e,this.setDateRange(e)}setDateRange(e){this.dateRange=e,this.resumeOffset=e.attr.optionalFloat("X-RESUME-OFFSET",this.resumeOffset),this.playoutLimit=e.attr.optionalFloat("X-PLAYOUT-LIMIT",this.playoutLimit),this.restrictions=e.attr.enumeratedStringList("X-RESTRICT",this.restrictions),this.snapOptions=e.attr.enumeratedStringList("X-SNAP",this.snapOptions)}reset(){var e;this.appendInPlaceStarted=!1,(e=this.assetListLoader)==null||e.destroy(),this.assetListLoader=void 0,this.supplementsPrimary||(this.assetListResponse=null,this.assetList=[],this._duration=null)}isAssetPastPlayoutLimit(e){var r;if(e>0&&e>=this.assetList.length)return!0;const n=this.playoutLimit;return e<=0||isNaN(n)?!1:n===0?!0:(((r=this.assetList[e])==null?void 0:r.startOffset)||0)>n}findAssetIndex(e){return this.assetList.indexOf(e)}get identifier(){return this.dateRange.id}get startDate(){return this.dateRange.startDate}get startTime(){const e=this.dateRange.startTime;if(this.snapOptions.out){const r=this.dateRange.tagAnchor;if(r)return $I(e,r)}return e}get startOffset(){return this.cue.pre?0:this.startTime}get startIsAligned(){if(this.startTime===0||this.snapOptions.out)return!0;const e=this.dateRange.tagAnchor;if(e){const r=this.dateRange.startTime,n=$I(r,e);return r-n<.1}return!1}get resumptionOffset(){const e=this.resumeOffset,r=Xn(e)?e:this.duration;return this.cumulativeDuration+r}get resumeTime(){const e=this.startOffset+this.resumptionOffset;if(this.snapOptions.in){const r=this.resumeAnchor;if(r)return $I(e,r)}return e}get appendInPlace(){return this.appendInPlaceStarted?!0:this.appendInPlaceDisabled?!1:!!(!this.cue.once&&!this.cue.pre&&this.startIsAligned&&(isNaN(this.playoutLimit)&&isNaN(this.resumeOffset)||this.resumeOffset&&this.duration&&Math.abs(this.resumeOffset-this.duration)<Tb))}set appendInPlace(e){if(this.appendInPlaceStarted){this.resetOnResume=!e;return}this.appendInPlaceDisabled=!e}get timelineStart(){return this._timelineStart!==null?this._timelineStart:this.startTime}set timelineStart(e){this._timelineStart=e}get duration(){const e=this.playoutLimit;let r;return this._duration!==null?r=this._duration:this.dateRange.duration?r=this.dateRange.duration:r=this.dateRange.plannedDuration||0,!isNaN(e)&&e<r&&(r=e),r}set duration(e){this._duration=e}get cue(){return this.dateRange.cue}get timelineOccupancy(){return this.dateRange.attr["X-TIMELINE-OCCUPIES"]==="RANGE"?dN.Range:dN.Point}get supplementsPrimary(){return this.dateRange.attr["X-TIMELINE-STYLE"]==="PRIMARY"}get contentMayVary(){return this.dateRange.attr["X-CONTENT-MAY-VARY"]!=="NO"}get assetUrl(){return this.dateRange.attr["X-ASSET-URI"]}get assetListUrl(){return this.dateRange.attr["X-ASSET-LIST"]}get baseUrl(){return this.base.url}get assetListLoaded(){return this.assetList.length>0||this.assetListResponse!==null}toString(){return WHe(this)}}function $I(t,e){return t-e.start<e.duration/2&&!(Math.abs(t-(e.start+e.duration))<Tb)?e.start:e.start+e.duration}function Ese(t,e,r){const n=new self.URL(t,r);return n.protocol!=="data:"&&n.searchParams.set("_HLS_primary_id",e),n}function HI(t,e){for(;(r=t.assetList[++e])!=null&&r.error;)var r;return e}function WHe(t){return`["${t.identifier}" ${t.cue.pre?"<pre>":t.cue.post?"<post>":""}${t.timelineStart.toFixed(2)}-${t.resumeTime.toFixed(2)}]`}function Lx(t){const e=t.timelineStart,r=t.duration||0;return`["${t.identifier}" ${e.toFixed(2)}-${(e+r).toFixed(2)}]`}class YHe{constructor(e,r,n,i){this.hls=void 0,this.interstitial=void 0,this.assetItem=void 0,this.tracks=null,this.hasDetails=!1,this.mediaAttached=null,this._currentTime=void 0,this._bufferedEosTime=void 0,this.checkPlayout=()=>{this.reachedPlayout(this.currentTime)&&this.hls&&this.hls.trigger(Be.PLAYOUT_LIMIT_REACHED,{})};const a=this.hls=new e(r);this.interstitial=n,this.assetItem=i;const o=()=>{this.hasDetails=!0};a.once(Be.LEVEL_LOADED,o),a.once(Be.AUDIO_TRACK_LOADED,o),a.once(Be.SUBTITLE_TRACK_LOADED,o),a.on(Be.MEDIA_ATTACHING,(c,{media:u})=>{this.removeMediaListeners(),this.mediaAttached=u,this.interstitial.playoutLimit&&(u.addEventListener("timeupdate",this.checkPlayout),this.appendInPlace&&a.on(Be.BUFFER_APPENDED,()=>{const d=this.bufferedEnd;this.reachedPlayout(d)&&(this._bufferedEosTime=d,a.trigger(Be.BUFFERED_TO_END,void 0))}))})}get appendInPlace(){return this.interstitial.appendInPlace}loadSource(){const e=this.hls;if(e)if(e.url)e.levels.length&&!e.started&&e.startLoad(-1,!0);else{let r=this.assetItem.uri;try{r=Ese(r,e.config.primarySessionId||"").href}catch{}e.loadSource(r)}}bufferedInPlaceToEnd(e){var r;if(!this.appendInPlace)return!1;if((r=this.hls)!=null&&r.bufferedToEnd)return!0;if(!e)return!1;const n=Math.min(this._bufferedEosTime||1/0,this.duration),i=this.timelineOffset,a=Hs.bufferInfo(e,i,0);return this.getAssetTime(a.end)>=n-.02}reachedPlayout(e){const n=this.interstitial.playoutLimit;return this.startOffset+e>=n}get destroyed(){var e;return!((e=this.hls)!=null&&e.userConfig)}get assetId(){return this.assetItem.identifier}get interstitialId(){return this.assetItem.parentIdentifier}get media(){var e;return((e=this.hls)==null?void 0:e.media)||null}get bufferedEnd(){const e=this.media||this.mediaAttached;if(!e)return this._bufferedEosTime?this._bufferedEosTime:this.currentTime;const r=Hs.bufferInfo(e,e.currentTime,.001);return this.getAssetTime(r.end)}get currentTime(){const e=this.media||this.mediaAttached;return e?this.getAssetTime(e.currentTime):this._currentTime||0}get duration(){const e=this.assetItem.duration;if(!e)return 0;const r=this.interstitial.playoutLimit;if(r){const n=r-this.startOffset;if(n>0&&n<e)return n}return e}get remaining(){const e=this.duration;return e?Math.max(0,e-this.currentTime):0}get startOffset(){return this.assetItem.startOffset}get timelineOffset(){var e;return((e=this.hls)==null?void 0:e.config.timelineOffset)||0}set timelineOffset(e){const r=this.timelineOffset;if(e!==r){const n=e-r;if(Math.abs(n)>1/9e4&&this.hls){if(this.hasDetails)throw new Error("Cannot set timelineOffset after playlists are loaded");this.hls.config.timelineOffset=e}}}getAssetTime(e){const r=this.timelineOffset,n=this.duration;return Math.min(Math.max(0,e-r),n)}removeMediaListeners(){const e=this.mediaAttached;e&&(this._currentTime=e.currentTime,this.bufferSnapShot(),e.removeEventListener("timeupdate",this.checkPlayout))}bufferSnapShot(){if(this.mediaAttached){var e;(e=this.hls)!=null&&e.bufferedToEnd&&(this._bufferedEosTime=this.bufferedEnd)}}destroy(){this.removeMediaListeners(),this.hls&&this.hls.destroy(),this.hls=null,this.tracks=this.mediaAttached=this.checkPlayout=null}attachMedia(e){var r;this.loadSource(),(r=this.hls)==null||r.attachMedia(e)}detachMedia(){var e;this.removeMediaListeners(),this.mediaAttached=null,(e=this.hls)==null||e.detachMedia()}resumeBuffering(){var e;(e=this.hls)==null||e.resumeBuffering()}pauseBuffering(){var e;(e=this.hls)==null||e.pauseBuffering()}transferMedia(){var e;return this.bufferSnapShot(),((e=this.hls)==null?void 0:e.transferMedia())||null}resetDetails(){const e=this.hls;if(e&&this.hasDetails){e.stopLoad();const r=n=>delete n.details;e.levels.forEach(r),e.allAudioTracks.forEach(r),e.allSubtitleTracks.forEach(r),this.hasDetails=!1}}on(e,r,n){var i;(i=this.hls)==null||i.on(e,r)}once(e,r,n){var i;(i=this.hls)==null||i.once(e,r)}off(e,r,n){var i;(i=this.hls)==null||i.off(e,r)}toString(){var e;return`HlsAssetPlayer: ${Lx(this.assetItem)} ${(e=this.hls)==null?void 0:e.sessionId} ${this.appendInPlace?"append-in-place":""}`}}const wG=.033;class qHe extends um{constructor(e,r){super("interstitials-sched",r),this.onScheduleUpdate=void 0,this.eventMap={},this.events=null,this.items=null,this.durations={primary:0,playout:0,integrated:0},this.onScheduleUpdate=e}destroy(){this.reset(),this.onScheduleUpdate=null}reset(){this.eventMap={},this.setDurations(0,0,0),this.events&&this.events.forEach(e=>e.reset()),this.events=this.items=null}resetErrorsInRange(e,r){return this.events?this.events.reduce((n,i)=>e<=i.startOffset&&r>i.startOffset?(delete i.error,n+1):n,0):0}get duration(){const e=this.items;return e?e[e.length-1].end:0}get length(){return this.items?this.items.length:0}getEvent(e){return e&&this.eventMap[e]||null}hasEvent(e){return e in this.eventMap}findItemIndex(e,r){if(e.event)return this.findEventIndex(e.event.identifier);let n=-1;e.nextEvent?n=this.findEventIndex(e.nextEvent.identifier)-1:e.previousEvent&&(n=this.findEventIndex(e.previousEvent.identifier)+1);const i=this.items;if(i)for(i[n]||(r===void 0&&(r=e.start),n=this.findItemIndexAtTime(r));n>=0&&(a=i[n])!=null&&a.event;){var a;n--}return n}findItemIndexAtTime(e,r){const n=this.items;if(n)for(let i=0;i<n.length;i++){let a=n[i];if(r&&r!=="primary"&&(a=a[r]),e===a.start||e>a.start&&e<a.end)return i}return-1}findJumpRestrictedIndex(e,r){const n=this.items;if(n)for(let i=e;i<=r&&n[i];i++){const a=n[i].event;if(a!=null&&a.restrictions.jump&&!a.appendInPlace)return i}return-1}findEventIndex(e){const r=this.items;if(r)for(let i=r.length;i--;){var n;if(((n=r[i].event)==null?void 0:n.identifier)===e)return i}return-1}findAssetIndex(e,r){const n=e.assetList,i=n.length;if(i>1)for(let a=0;a<i;a++){const o=n[a];if(!o.error){const c=o.timelineStart;if(r===c||r>c&&(r<c+(o.duration||0)||a===i-1))return a}}return 0}get assetIdAtEnd(){var e;const r=(e=this.items)==null||(e=e[this.length-1])==null?void 0:e.event;if(r){const n=r.assetList,i=n[n.length-1];if(i)return i.identifier}return null}parseInterstitialDateRanges(e,r){const n=e.main.details,{dateRanges:i}=n,a=this.events,o=this.parseDateRanges(i,{url:n.url},r),c=Object.keys(i),u=a?a.filter(l=>!c.includes(l.identifier)):[];o.length&&o.sort((l,d)=>{const f=l.cue.pre,m=l.cue.post,p=d.cue.pre,g=d.cue.post;if(f&&!p)return-1;if(p&&!f||m&&!g)return 1;if(g&&!m)return-1;if(!f&&!p&&!m&&!g){const y=l.startTime,x=d.startTime;if(y!==x)return y-x}return l.dateRange.tagOrder-d.dateRange.tagOrder}),this.events=o,u.forEach(l=>{this.removeEvent(l)}),this.updateSchedule(e,u)}updateSchedule(e,r=[],n=!1){const i=this.events||[];if(i.length||r.length||this.length<2){const a=this.items,o=this.parseSchedule(i,e);(n||r.length||a?.length!==o.length||o.some((u,l)=>Math.abs(u.playout.start-a[l].playout.start)>.005||Math.abs(u.playout.end-a[l].playout.end)>.005))&&(this.items=o,this.onScheduleUpdate(r,a))}}parseDateRanges(e,r,n){const i=[],a=Object.keys(e);for(let o=0;o<a.length;o++){const c=a[o],u=e[c];if(u.isInterstitial){let l=this.eventMap[c];l?l.setDateRange(u):(l=new GHe(u,r),this.eventMap[c]=l,n===!1&&(l.appendInPlace=n)),i.push(l)}}return i}parseSchedule(e,r){const n=[],i=r.main.details,a=i.live?1/0:i.edge;let o=0;if(e=e.filter(u=>!u.error&&!(u.cue.once&&u.hasPlayed)),e.length){this.resolveOffsets(e,r);let u=0,l=0;if(e.forEach((d,f)=>{const m=d.cue.pre,p=d.cue.post,g=e[f-1]||null,y=d.appendInPlace,x=p?a:d.startOffset,w=d.duration,_=d.timelineOccupancy===dN.Range?w:0,E=d.resumptionOffset,N=g?.startTime===x,C=x+d.cumulativeDuration;let I=y?C+w:x+E;if(m||!p&&x<=0){const U=l;l+=_,d.timelineStart=C;const G=o;o+=w,n.push({event:d,start:C,end:I,playout:{start:G,end:o},integrated:{start:U,end:l}})}else if(x<=a){if(!N){const q=x-u;if(q>wG){const J=u,de=l;l+=q;const xe=o;o+=q;const we={previousEvent:e[f-1]||null,nextEvent:d,start:J,end:J+q,playout:{start:xe,end:o},integrated:{start:de,end:l}};n.push(we)}else q>0&&g&&(g.cumulativeDuration+=q,n[n.length-1].end=x)}p&&(I=C),d.timelineStart=C;const U=l;l+=_;const G=o;o+=w,n.push({event:d,start:C,end:I,playout:{start:G,end:o},integrated:{start:U,end:l}})}else return;const D=d.resumeTime;p||D>a?u=a:u=D}),u<a){var c;const d=u,f=l,m=a-u;l+=m;const p=o;o+=m,n.push({previousEvent:((c=n[n.length-1])==null?void 0:c.event)||null,nextEvent:null,start:u,end:d+m,playout:{start:p,end:o},integrated:{start:f,end:l}})}this.setDurations(a,o,l)}else n.push({previousEvent:null,nextEvent:null,start:0,end:a,playout:{start:0,end:a},integrated:{start:0,end:a}}),this.setDurations(a,a,a);return n}setDurations(e,r,n){this.durations={primary:e,playout:r,integrated:n}}resolveOffsets(e,r){const n=r.main.details,i=n.live?1/0:n.edge;let a=0,o=-1;e.forEach((c,u)=>{const l=c.cue.pre,d=c.cue.post,f=l?0:d?i:c.startTime;this.updateAssetDurations(c),o===f?c.cumulativeDuration=a:(a=0,o=f),!d&&c.snapOptions.in&&(c.resumeAnchor=Ty(null,n.fragments,c.startOffset+c.resumptionOffset,0,0)||void 0),c.appendInPlace&&!c.appendInPlaceStarted&&(this.primaryCanResumeInPlaceAt(c,r)||(c.appendInPlace=!1)),!c.appendInPlace&&u+1<e.length&&e[u+1].startTime-e[u].resumeTime<wG&&(e[u+1].appendInPlace=!1,e[u+1].appendInPlace&&this.warn(`Could not change append strategy for abutting event ${c}`));const p=Xn(c.resumeOffset)?c.resumeOffset:c.duration;a+=p})}primaryCanResumeInPlaceAt(e,r){const n=e.resumeTime,i=e.startTime+e.resumptionOffset;return Math.abs(n-i)>Tb?(this.log(`"${e.identifier}" resumption ${n} not aligned with estimated timeline end ${i}`),!1):!Object.keys(r).some(o=>{const c=r[o].details,u=c.edge;if(n>=u)return this.log(`"${e.identifier}" resumption ${n} past ${o} playlist end ${u}`),!1;const l=Ty(null,c.fragments,n);if(!l)return this.log(`"${e.identifier}" resumption ${n} does not align with any fragments in ${o} playlist (${c.fragStart}-${c.fragmentEnd})`),!0;const d=o==="audio"?.175:0;return Math.abs(l.start-n)<Tb+d||Math.abs(l.end-n)<Tb+d?!1:(this.log(`"${e.identifier}" resumption ${n} not aligned with ${o} fragment bounds (${l.start}-${l.end} sn: ${l.sn} cc: ${l.cc})`),!0)})}updateAssetDurations(e){if(!e.assetListLoaded)return;const r=e.timelineStart;let n=0,i=!1,a=!1;for(let o=0;o<e.assetList.length;o++){const c=e.assetList[o],u=r+n;c.startOffset=n,c.timelineStart=u,i||(i=c.duration===null),a||(a=!!c.error);const l=c.error?0:c.duration||0;n+=l}i&&!a?e.duration=Math.max(n,e.duration):e.duration=n}removeEvent(e){e.reset(),delete this.eventMap[e.identifier]}}function _m(t){return`[${t.event?'"'+t.event.identifier+'"':"primary"}: ${t.start.toFixed(2)}-${t.end.toFixed(2)}]`}class XHe{constructor(e){this.hls=void 0,this.hls=e}destroy(){this.hls=null}loadAssetList(e,r){const n=e.assetListUrl;let i;try{i=Ese(n,this.hls.sessionId,e.baseUrl)}catch(m){const p=this.assignAssetListError(e,br.ASSET_LIST_LOAD_ERROR,m,n);this.hls.trigger(Be.ERROR,p);return}r&&i.protocol!=="data:"&&i.searchParams.set("_HLS_start_offset",""+r);const a=this.hls.config,o=a.loader,c=new o(a),u={responseType:"json",url:i.href},l=a.interstitialAssetListLoadPolicy.default,d={loadPolicy:l,timeout:l.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},f={onSuccess:(m,p,g,y)=>{const x=m.data,w=x?.ASSETS;if(!Array.isArray(w)){const _=this.assignAssetListError(e,br.ASSET_LIST_PARSING_ERROR,new Error("Invalid interstitial asset list"),g.url,p,y);this.hls.trigger(Be.ERROR,_);return}e.assetListResponse=x,this.hls.trigger(Be.ASSET_LIST_LOADED,{event:e,assetListResponse:x,networkDetails:y})},onError:(m,p,g,y)=>{const x=this.assignAssetListError(e,br.ASSET_LIST_LOAD_ERROR,new Error(`Error loading X-ASSET-LIST: HTTP status ${m.code} ${m.text} (${p.url})`),p.url,y,g);this.hls.trigger(Be.ERROR,x)},onTimeout:(m,p,g)=>{const y=this.assignAssetListError(e,br.ASSET_LIST_LOAD_TIMEOUT,new Error(`Timeout loading X-ASSET-LIST (${p.url})`),p.url,m,g);this.hls.trigger(Be.ERROR,y)}};return c.load(u,d,f),this.hls.trigger(Be.ASSET_LIST_LOADING,{event:e}),c}assignAssetListError(e,r,n,i,a,o){return e.error=n,{type:Oi.NETWORK_ERROR,details:r,fatal:!1,interstitial:e,url:i,error:n,networkDetails:o,stats:a}}}function _G(t){var e;t==null||(e=t.play())==null||e.catch(()=>{})}function TS(t,e){return`[${t}] Advancing timeline position to ${e}`}class ZHe extends um{constructor(e,r){super("interstitials",e.logger),this.HlsPlayerClass=void 0,this.hls=void 0,this.assetListLoader=void 0,this.mediaSelection=null,this.altSelection=null,this.media=null,this.detachedData=null,this.requiredTracks=null,this.manager=null,this.playerQueue=[],this.bufferedPos=-1,this.timelinePos=-1,this.schedule=void 0,this.playingItem=null,this.bufferingItem=null,this.waitingItem=null,this.endedItem=null,this.playingAsset=null,this.endedAsset=null,this.bufferingAsset=null,this.shouldPlay=!1,this.onPlay=()=>{this.shouldPlay=!0},this.onPause=()=>{this.shouldPlay=!1},this.onSeeking=()=>{const n=this.currentTime;if(n===void 0||this.playbackDisabled||!this.schedule)return;const i=n-this.timelinePos;if(Math.abs(i)<1/7056e5)return;const o=i<=-.01;this.timelinePos=n,this.bufferedPos=n;const c=this.playingItem;if(!c){this.checkBuffer();return}if(o&&this.schedule.resetErrorsInRange(n,n-i)&&this.updateSchedule(!0),this.checkBuffer(),o&&n<c.start||n>=c.end){var u;const p=this.findItemIndex(c);let g=this.schedule.findItemIndexAtTime(n);if(g===-1&&(g=p+(o?-1:1),this.log(`seeked ${o?"back ":""}to position not covered by schedule ${n} (resolving from ${p} to ${g})`)),!this.isInterstitial(c)&&(u=this.media)!=null&&u.paused&&(this.shouldPlay=!1),!o&&g>p){const y=this.schedule.findJumpRestrictedIndex(p+1,g);if(y>p){this.setSchedulePosition(y);return}}this.setSchedulePosition(g);return}const l=this.playingAsset;if(!l){if(this.playingLastItem&&this.isInterstitial(c)){const p=c.event.assetList[0];p&&(this.endedItem=this.playingItem,this.playingItem=null,this.setScheduleToAssetAtTime(n,p))}return}const d=l.timelineStart,f=l.duration||0;if(o&&n<d||n>=d+f){var m;(m=c.event)!=null&&m.appendInPlace&&(this.clearAssetPlayers(c.event,c),this.flushFrontBuffer(n)),this.setScheduleToAssetAtTime(n,l)}},this.onTimeupdate=()=>{const n=this.currentTime;if(n===void 0||this.playbackDisabled)return;if(n>this.timelinePos)this.timelinePos=n,n>this.bufferedPos&&this.checkBuffer();else return;const i=this.playingItem;if(!i||this.playingLastItem)return;if(n>=i.end){this.timelinePos=i.end;const c=this.findItemIndex(i);this.setSchedulePosition(c+1)}const a=this.playingAsset;if(!a)return;const o=a.timelineStart+(a.duration||0);n>=o&&this.setScheduleToAssetAtTime(n,a)},this.onScheduleUpdate=(n,i)=>{const a=this.schedule;if(!a)return;const o=this.playingItem,c=a.events||[],u=a.items||[],l=a.durations,d=n.map(y=>y.identifier),f=!!(c.length||d.length);(f||i)&&this.log(`INTERSTITIALS_UPDATED (${c.length}): ${c}
Schedule: ${u.map(y=>_m(y))} pos: ${this.timelinePos}`),d.length&&this.log(`Removed events ${d}`);let m=null,p=null;o&&(m=this.updateItem(o,this.timelinePos),this.itemsMatch(o,m)?this.playingItem=m:this.waitingItem=this.endedItem=null),this.waitingItem=this.updateItem(this.waitingItem),this.endedItem=this.updateItem(this.endedItem);const g=this.bufferingItem;if(g&&(p=this.updateItem(g,this.bufferedPos),this.itemsMatch(g,p)?this.bufferingItem=p:g.event&&(this.bufferingItem=this.playingItem,this.clearInterstitial(g.event,null))),n.forEach(y=>{y.assetList.forEach(x=>{this.clearAssetPlayer(x.identifier,null)})}),this.playerQueue.forEach(y=>{if(y.interstitial.appendInPlace){const x=y.assetItem.timelineStart,w=y.timelineOffset-x;if(w)try{y.timelineOffset=x}catch(_){Math.abs(w)>Tb&&this.warn(`${_} ("${y.assetId}" ${y.timelineOffset}->${x})`)}}}),f||i){if(this.hls.trigger(Be.INTERSTITIALS_UPDATED,{events:c.slice(0),schedule:u.slice(0),durations:l,removedIds:d}),this.isInterstitial(o)&&d.includes(o.event.identifier)){this.warn(`Interstitial "${o.event.identifier}" removed while playing`),this.primaryFallback(o.event);return}o&&this.trimInPlace(m,o),g&&p!==m&&this.trimInPlace(p,g),this.checkBuffer()}},this.hls=e,this.HlsPlayerClass=r,this.assetListLoader=new XHe(e),this.schedule=new qHe(this.onScheduleUpdate,e.logger),this.registerListeners()}registerListeners(){const e=this.hls;e&&(e.on(Be.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(Be.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(Be.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(Be.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Be.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(Be.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(Be.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.on(Be.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(Be.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.on(Be.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.on(Be.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.on(Be.BUFFER_APPENDED,this.onBufferAppended,this),e.on(Be.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(Be.BUFFERED_TO_END,this.onBufferedToEnd,this),e.on(Be.MEDIA_ENDED,this.onMediaEnded,this),e.on(Be.ERROR,this.onError,this),e.on(Be.DESTROYING,this.onDestroying,this))}unregisterListeners(){const e=this.hls;e&&(e.off(Be.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(Be.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(Be.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(Be.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Be.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(Be.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(Be.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.off(Be.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(Be.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.off(Be.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.off(Be.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.off(Be.BUFFER_CODECS,this.onBufferCodecs,this),e.off(Be.BUFFER_APPENDED,this.onBufferAppended,this),e.off(Be.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(Be.BUFFERED_TO_END,this.onBufferedToEnd,this),e.off(Be.MEDIA_ENDED,this.onMediaEnded,this),e.off(Be.ERROR,this.onError,this),e.off(Be.DESTROYING,this.onDestroying,this))}startLoad(){this.resumeBuffering()}stopLoad(){this.pauseBuffering()}resumeBuffering(){var e;(e=this.getBufferingPlayer())==null||e.resumeBuffering()}pauseBuffering(){var e;(e=this.getBufferingPlayer())==null||e.pauseBuffering()}destroy(){this.unregisterListeners(),this.stopLoad(),this.assetListLoader&&this.assetListLoader.destroy(),this.emptyPlayerQueue(),this.clearScheduleState(),this.schedule&&this.schedule.destroy(),this.media=this.detachedData=this.mediaSelection=this.requiredTracks=this.altSelection=this.schedule=this.manager=null,this.hls=this.HlsPlayerClass=this.log=null,this.assetListLoader=null,this.onPlay=this.onPause=this.onSeeking=this.onTimeupdate=null,this.onScheduleUpdate=null}onDestroying(){const e=this.primaryMedia||this.media;e&&this.removeMediaListeners(e)}removeMediaListeners(e){Qh(e,"play",this.onPlay),Qh(e,"pause",this.onPause),Qh(e,"seeking",this.onSeeking),Qh(e,"timeupdate",this.onTimeupdate)}onMediaAttaching(e,r){const n=this.media=r.media;xh(n,"seeking",this.onSeeking),xh(n,"timeupdate",this.onTimeupdate),xh(n,"play",this.onPlay),xh(n,"pause",this.onPause)}onMediaAttached(e,r){const n=this.effectivePlayingItem,i=this.detachedData;if(this.detachedData=null,n===null)this.checkStart();else if(!i){this.clearScheduleState();const a=this.findItemIndex(n);this.setSchedulePosition(a)}}clearScheduleState(){this.log("clear schedule state"),this.playingItem=this.bufferingItem=this.waitingItem=this.endedItem=this.playingAsset=this.endedAsset=this.bufferingAsset=null}onMediaDetaching(e,r){const n=!!r.transferMedia,i=this.media;if(this.media=null,!n&&(i&&this.removeMediaListeners(i),this.detachedData)){const a=this.getBufferingPlayer();a&&(this.log(`Removing schedule state for detachedData and ${a}`),this.playingAsset=this.endedAsset=this.bufferingAsset=this.bufferingItem=this.waitingItem=this.detachedData=null,a.detachMedia()),this.shouldPlay=!1}}get interstitialsManager(){if(!this.hls)return null;if(this.manager)return this.manager;const e=this,r=()=>e.bufferingItem||e.waitingItem,n=f=>f&&e.getAssetPlayer(f.identifier),i=(f,m,p,g,y)=>{if(f){let x=f[m].start;const w=f.event;if(w){if(m==="playout"||w.timelineOccupancy!==dN.Point){const _=n(p);_?.interstitial===w&&(x+=_.assetItem.startOffset+_[y])}}else{const _=g==="bufferedPos"?o():e[g];x+=_-f.start}return x}return 0},a=(f,m)=>{var p;if(f!==0&&m!=="primary"&&(p=e.schedule)!=null&&p.length){var g;const y=e.schedule.findItemIndexAtTime(f),x=(g=e.schedule.items)==null?void 0:g[y];if(x){const w=x[m].start-x.start;return f+w}}return f},o=()=>{const f=e.bufferedPos;return f===Number.MAX_VALUE?c("primary"):Math.max(f,0)},c=f=>{var m,p;return(m=e.primaryDetails)!=null&&m.live?e.primaryDetails.edge:((p=e.schedule)==null?void 0:p.durations[f])||0},u=(f,m)=>{var p,g;const y=e.effectivePlayingItem;if(y!=null&&(p=y.event)!=null&&p.restrictions.skip||!e.schedule)return;e.log(`seek to ${f} "${m}"`);const x=e.effectivePlayingItem,w=e.schedule.findItemIndexAtTime(f,m),_=(g=e.schedule.items)==null?void 0:g[w],E=e.getBufferingPlayer(),N=E?.interstitial,C=N?.appendInPlace,I=x&&e.itemsMatch(x,_);if(x&&(C||I)){const D=n(e.playingAsset),U=D?.media||e.primaryMedia;if(U){const G=m==="primary"?U.currentTime:i(x,m,e.playingAsset,"timelinePos","currentTime"),q=f-G,J=(C?G:U.currentTime)+q;if(J>=0&&(!D||C||J<=D.duration)){U.currentTime=J;return}}}if(_){let D=f;if(m!=="primary"){const G=_[m].start,q=f-G;D=_.start+q}const U=!e.isInterstitial(_);if((!e.isInterstitial(x)||x.event.appendInPlace)&&(U||_.event.appendInPlace)){const G=e.media||(C?E?.media:null);G&&(G.currentTime=D)}else if(x){const G=e.findItemIndex(x);if(w>G){const J=e.schedule.findJumpRestrictedIndex(G+1,w);if(J>G){e.setSchedulePosition(J);return}}let q=0;if(U)e.timelinePos=D,e.checkBuffer();else{const J=_.event.assetList,de=f-(_[m]||_).start;for(let xe=J.length;xe--;){const we=J[xe];if(we.duration&&de>=we.startOffset&&de<we.startOffset+we.duration){q=xe;break}}}e.setSchedulePosition(w,q)}}},l=()=>{const f=e.effectivePlayingItem;if(e.isInterstitial(f))return f;const m=r();return e.isInterstitial(m)?m:null},d={get bufferedEnd(){const f=r(),m=e.bufferingItem;if(m&&m===f){var p;return i(m,"playout",e.bufferingAsset,"bufferedPos","bufferedEnd")-m.playout.start||((p=e.bufferingAsset)==null?void 0:p.startOffset)||0}return 0},get currentTime(){const f=l(),m=e.effectivePlayingItem;return m&&m===f?i(m,"playout",e.effectivePlayingAsset,"timelinePos","currentTime")-m.playout.start:0},set currentTime(f){const m=l(),p=e.effectivePlayingItem;p&&p===m&&u(f+p.playout.start,"playout")},get duration(){const f=l();return f?f.playout.end-f.playout.start:0},get assetPlayers(){var f;const m=(f=l())==null?void 0:f.event.assetList;return m?m.map(p=>e.getAssetPlayer(p.identifier)):[]},get playingIndex(){var f;const m=(f=l())==null?void 0:f.event;return m&&e.effectivePlayingAsset?m.findAssetIndex(e.effectivePlayingAsset):-1},get scheduleItem(){return l()}};return this.manager={get events(){var f;return((f=e.schedule)==null||(f=f.events)==null?void 0:f.slice(0))||[]},get schedule(){var f;return((f=e.schedule)==null||(f=f.items)==null?void 0:f.slice(0))||[]},get interstitialPlayer(){return l()?d:null},get playerQueue(){return e.playerQueue.slice(0)},get bufferingAsset(){return e.bufferingAsset},get bufferingItem(){return r()},get bufferingIndex(){const f=r();return e.findItemIndex(f)},get playingAsset(){return e.effectivePlayingAsset},get playingItem(){return e.effectivePlayingItem},get playingIndex(){const f=e.effectivePlayingItem;return e.findItemIndex(f)},primary:{get bufferedEnd(){return o()},get currentTime(){const f=e.timelinePos;return f>0?f:0},set currentTime(f){u(f,"primary")},get duration(){return c("primary")},get seekableStart(){var f;return((f=e.primaryDetails)==null?void 0:f.fragmentStart)||0}},integrated:{get bufferedEnd(){return i(r(),"integrated",e.bufferingAsset,"bufferedPos","bufferedEnd")},get currentTime(){return i(e.effectivePlayingItem,"integrated",e.effectivePlayingAsset,"timelinePos","currentTime")},set currentTime(f){u(f,"integrated")},get duration(){return c("integrated")},get seekableStart(){var f;return a(((f=e.primaryDetails)==null?void 0:f.fragmentStart)||0,"integrated")}},skip:()=>{const f=e.effectivePlayingItem,m=f?.event;if(m&&!m.restrictions.skip){const p=e.findItemIndex(f);if(m.appendInPlace){const g=f.playout.start+f.event.duration;u(g+.001,"playout")}else e.advanceAfterAssetEnded(m,p,1/0)}}}}get effectivePlayingItem(){return this.waitingItem||this.playingItem||this.endedItem}get effectivePlayingAsset(){return this.playingAsset||this.endedAsset}get playingLastItem(){var e;const r=this.playingItem,n=(e=this.schedule)==null?void 0:e.items;return!this.playbackStarted||!r||!n?!1:this.findItemIndex(r)===n.length-1}get playbackStarted(){return this.effectivePlayingItem!==null}get currentTime(){var e,r;if(this.mediaSelection===null)return;const n=this.waitingItem||this.playingItem;if(this.isInterstitial(n)&&!n.event.appendInPlace)return;let i=this.media;!i&&(e=this.bufferingItem)!=null&&(e=e.event)!=null&&e.appendInPlace&&(i=this.primaryMedia);const a=(r=i)==null?void 0:r.currentTime;if(!(a===void 0||!Xn(a)))return a}get primaryMedia(){var e;return this.media||((e=this.detachedData)==null?void 0:e.media)||null}isInterstitial(e){return!!(e!=null&&e.event)}retreiveMediaSource(e,r){const n=this.getAssetPlayer(e);n&&this.transferMediaFromPlayer(n,r)}transferMediaFromPlayer(e,r){const n=e.interstitial.appendInPlace,i=e.media;if(n&&i===this.primaryMedia){if(this.bufferingAsset=null,(!r||this.isInterstitial(r)&&!r.event.appendInPlace)&&r&&i){this.detachedData={media:i};return}const a=e.transferMedia();this.log(`transfer MediaSource from ${e} ${fl(a)}`),this.detachedData=a}else r&&i&&(this.shouldPlay||(this.shouldPlay=!i.paused))}transferMediaTo(e,r){var n,i;if(e.media===r)return;let a=null;const o=this.hls,c=e!==o,u=c&&e.interstitial.appendInPlace,l=(n=this.detachedData)==null?void 0:n.mediaSource;let d;if(o.media)u&&(a=o.transferMedia(),this.detachedData=a),d="Primary";else if(l){const g=this.getBufferingPlayer();g?(a=g.transferMedia(),d=`${g}`):d="detached MediaSource"}else d="detached media";if(!a){if(l)a=this.detachedData,this.log(`using detachedData: MediaSource ${fl(a)}`);else if(!this.detachedData||o.media===r){const g=this.playerQueue;g.length>1&&g.forEach(y=>{if(c&&y.interstitial.appendInPlace!==u){const x=y.interstitial;this.clearInterstitial(y.interstitial,null),x.appendInPlace=!1,x.appendInPlace&&this.warn(`Could not change append strategy for queued assets ${x}`)}}),this.hls.detachMedia(),this.detachedData={media:r}}}const f=a&&"mediaSource"in a&&((i=a.mediaSource)==null?void 0:i.readyState)!=="closed",m=f&&a?a:r;this.log(`${f?"transfering MediaSource":"attaching media"} to ${c?e:"Primary"} from ${d} (media.currentTime: ${r.currentTime})`);const p=this.schedule;if(m===a&&p){const g=c&&e.assetId===p.assetIdAtEnd;m.overrides={duration:p.duration,endOfStream:!c||g,cueRemoval:!c}}e.attachMedia(m)}onInterstitialCueEnter(){this.onTimeupdate()}checkStart(){const e=this.schedule,r=e?.events;if(!r||this.playbackDisabled||!this.media)return;this.bufferedPos===-1&&(this.bufferedPos=0);const n=this.timelinePos,i=this.effectivePlayingItem;if(n===-1){const a=this.hls.startPosition;if(this.log(TS("checkStart",a)),this.timelinePos=a,r.length&&r[0].cue.pre){const o=e.findEventIndex(r[0].identifier);this.setSchedulePosition(o)}else if(a>=0||!this.primaryLive){const o=this.timelinePos=a>0?a:0,c=e.findItemIndexAtTime(o);this.setSchedulePosition(c)}}else if(i&&!this.playingItem){const a=e.findItemIndex(i);this.setSchedulePosition(a)}}advanceAssetBuffering(e,r){const n=e.event,i=n.findAssetIndex(r),a=HI(n,i);if(!n.isAssetPastPlayoutLimit(a))this.bufferedToEvent(e,a);else if(this.schedule){var o;const c=(o=this.schedule.items)==null?void 0:o[this.findItemIndex(e)+1];c&&this.bufferedToItem(c)}}advanceAfterAssetEnded(e,r,n){const i=HI(e,n);if(e.isAssetPastPlayoutLimit(i)){if(this.schedule){const a=this.schedule.items;if(a){const o=r+1,c=a.length;if(o>=c){this.setSchedulePosition(-1);return}const u=e.resumeTime;this.timelinePos<u&&(this.log(TS("advanceAfterAssetEnded",u)),this.timelinePos=u,e.appendInPlace&&this.advanceInPlace(u),this.checkBuffer(this.bufferedPos<u)),this.setSchedulePosition(o)}}}else{if(e.appendInPlace){const a=e.assetList[i];a&&this.advanceInPlace(a.timelineStart)}this.setSchedulePosition(r,i)}}setScheduleToAssetAtTime(e,r){const n=this.schedule;if(!n)return;const i=r.parentIdentifier,a=n.getEvent(i);if(a){const o=n.findEventIndex(i),c=n.findAssetIndex(a,e);this.advanceAfterAssetEnded(a,o,c-1)}}setSchedulePosition(e,r){var n;const i=(n=this.schedule)==null?void 0:n.items;if(!i||this.playbackDisabled)return;const a=e>=0?i[e]:null;this.log(`setSchedulePosition ${e}, ${r} (${a&&_m(a)}) pos: ${this.timelinePos}`);const o=this.waitingItem||this.playingItem,c=this.playingLastItem;if(this.isInterstitial(o)){const d=o.event,f=this.playingAsset,m=f?.identifier,p=m?this.getAssetPlayer(m):null;if(p&&m&&(!this.eventItemsMatch(o,a)||r!==void 0&&m!==d.assetList[r].identifier)){var u;const g=d.findAssetIndex(f);if(this.log(`INTERSTITIAL_ASSET_ENDED ${g+1}/${d.assetList.length} ${Lx(f)}`),this.endedAsset=f,this.playingAsset=null,this.hls.trigger(Be.INTERSTITIAL_ASSET_ENDED,{asset:f,assetListIndex:g,event:d,schedule:i.slice(0),scheduleIndex:e,player:p}),o!==this.playingItem){this.itemsMatch(o,this.playingItem)&&!this.playingAsset&&this.advanceAfterAssetEnded(d,this.findItemIndex(this.playingItem),g);return}this.retreiveMediaSource(m,a),p.media&&!((u=this.detachedData)!=null&&u.mediaSource)&&p.detachMedia()}if(!this.eventItemsMatch(o,a)&&(this.endedItem=o,this.playingItem=null,this.log(`INTERSTITIAL_ENDED ${d} ${_m(o)}`),d.hasPlayed=!0,this.hls.trigger(Be.INTERSTITIAL_ENDED,{event:d,schedule:i.slice(0),scheduleIndex:e}),d.cue.once)){var l;this.updateSchedule();const g=(l=this.schedule)==null?void 0:l.items;if(a&&g){const y=this.findItemIndex(a);this.advanceSchedule(y,g,r,o,c)}return}}this.advanceSchedule(e,i,r,o,c)}advanceSchedule(e,r,n,i,a){const o=this.schedule;if(!o)return;const c=r[e]||null,u=this.primaryMedia,l=this.playerQueue;if(l.length&&l.forEach(d=>{const f=d.interstitial,m=o.findEventIndex(f.identifier);(m<e||m>e+1)&&this.clearInterstitial(f,c)}),this.isInterstitial(c)){this.timelinePos=Math.min(Math.max(this.timelinePos,c.start),c.end);const d=c.event;if(n===void 0){n=o.findAssetIndex(d,this.timelinePos);const g=HI(d,n-1);if(d.isAssetPastPlayoutLimit(g)||d.appendInPlace&&this.timelinePos===c.end){this.advanceAfterAssetEnded(d,e,n);return}n=g}const f=this.waitingItem;this.assetsBuffered(c,u)||this.setBufferingItem(c);let m=this.preloadAssets(d,n);if(this.eventItemsMatch(c,f||i)||(this.waitingItem=c,this.log(`INTERSTITIAL_STARTED ${_m(c)} ${d.appendInPlace?"append in place":""}`),this.hls.trigger(Be.INTERSTITIAL_STARTED,{event:d,schedule:r.slice(0),scheduleIndex:e})),!d.assetListLoaded){this.log(`Waiting for ASSET-LIST to complete loading ${d}`);return}if(d.assetListLoader&&(d.assetListLoader.destroy(),d.assetListLoader=void 0),!u){this.log(`Waiting for attachMedia to start Interstitial ${d}`);return}this.waitingItem=this.endedItem=null,this.playingItem=c;const p=d.assetList[n];if(!p){this.advanceAfterAssetEnded(d,e,n||0);return}if(m||(m=this.getAssetPlayer(p.identifier)),m===null||m.destroyed){const g=d.assetList.length;this.warn(`asset ${n+1}/${g} player destroyed ${d}`),m=this.createAssetPlayer(d,p,n),m.loadSource()}if(!this.eventItemsMatch(c,this.bufferingItem)&&d.appendInPlace&&this.isAssetBuffered(p))return;this.startAssetPlayer(m,n,r,e,u),this.shouldPlay&&_G(m.media)}else c?(this.resumePrimary(c,e,i),this.shouldPlay&&_G(this.hls.media)):a&&this.isInterstitial(i)&&(this.endedItem=null,this.playingItem=i,i.event.appendInPlace||this.attachPrimary(o.durations.primary,null))}get playbackDisabled(){return this.hls.config.enableInterstitialPlayback===!1}get primaryDetails(){var e;return(e=this.mediaSelection)==null?void 0:e.main.details}get primaryLive(){var e;return!!((e=this.primaryDetails)!=null&&e.live)}resumePrimary(e,r,n){var i,a;if(this.playingItem=e,this.playingAsset=this.endedAsset=null,this.waitingItem=this.endedItem=null,this.bufferedToItem(e),this.log(`resuming ${_m(e)}`),!((i=this.detachedData)!=null&&i.mediaSource)){let c=this.timelinePos;(c<e.start||c>=e.end)&&(c=this.getPrimaryResumption(e,r),this.log(TS("resumePrimary",c)),this.timelinePos=c),this.attachPrimary(c,e)}if(!n)return;const o=(a=this.schedule)==null?void 0:a.items;o&&(this.log(`INTERSTITIALS_PRIMARY_RESUMED ${_m(e)}`),this.hls.trigger(Be.INTERSTITIALS_PRIMARY_RESUMED,{schedule:o.slice(0),scheduleIndex:r}),this.checkBuffer())}getPrimaryResumption(e,r){const n=e.start;if(this.primaryLive){const i=this.primaryDetails;if(r===0)return this.hls.startPosition;if(i&&(n<i.fragmentStart||n>i.edge))return this.hls.liveSyncPosition||-1}return n}isAssetBuffered(e){const r=this.getAssetPlayer(e.identifier);return r!=null&&r.hls?r.hls.bufferedToEnd:Hs.bufferInfo(this.primaryMedia,this.timelinePos,0).end+1>=e.timelineStart+(e.duration||0)}attachPrimary(e,r,n){r?this.setBufferingItem(r):this.bufferingItem=this.playingItem,this.bufferingAsset=null;const i=this.primaryMedia;if(!i)return;const a=this.hls;a.media?this.checkBuffer():(this.transferMediaTo(a,i),n&&this.startLoadingPrimaryAt(e,n)),n||(this.log(TS("attachPrimary",e)),this.timelinePos=e,this.startLoadingPrimaryAt(e,n))}startLoadingPrimaryAt(e,r){var n;const i=this.hls;!i.loadingEnabled||!i.media||Math.abs((((n=i.mainForwardBufferInfo)==null?void 0:n.start)||i.media.currentTime)-e)>.5?i.startLoad(e,r):i.bufferingEnabled||i.resumeBuffering()}onManifestLoading(){var e;this.stopLoad(),(e=this.schedule)==null||e.reset(),this.emptyPlayerQueue(),this.clearScheduleState(),this.shouldPlay=!1,this.bufferedPos=this.timelinePos=-1,this.mediaSelection=this.altSelection=this.manager=this.requiredTracks=null,this.hls.off(Be.BUFFER_CODECS,this.onBufferCodecs,this),this.hls.on(Be.BUFFER_CODECS,this.onBufferCodecs,this)}onLevelUpdated(e,r){if(r.level===-1||!this.schedule)return;const n=this.hls.levels[r.level];if(!n.details)return;const i=Uo(Uo({},this.mediaSelection||this.altSelection),{},{main:n});this.mediaSelection=i,this.schedule.parseInterstitialDateRanges(i,this.hls.config.interstitialAppendInPlace),!this.effectivePlayingItem&&this.schedule.items&&this.checkStart()}onAudioTrackUpdated(e,r){const n=this.hls.audioTracks[r.id],i=this.mediaSelection;if(!i){this.altSelection=Uo(Uo({},this.altSelection),{},{audio:n});return}const a=Uo(Uo({},i),{},{audio:n});this.mediaSelection=a}onSubtitleTrackUpdated(e,r){const n=this.hls.subtitleTracks[r.id],i=this.mediaSelection;if(!i){this.altSelection=Uo(Uo({},this.altSelection),{},{subtitles:n});return}const a=Uo(Uo({},i),{},{subtitles:n});this.mediaSelection=a}onAudioTrackSwitching(e,r){const n=IK(r);this.playerQueue.forEach(({hls:i})=>i&&(i.setAudioOption(r)||i.setAudioOption(n)))}onSubtitleTrackSwitch(e,r){const n=IK(r);this.playerQueue.forEach(({hls:i})=>i&&(i.setSubtitleOption(r)||r.id!==-1&&i.setSubtitleOption(n)))}onBufferCodecs(e,r){const n=r.tracks;n&&(this.requiredTracks=n)}onBufferAppended(e,r){this.checkBuffer()}onBufferFlushed(e,r){const n=this.playingItem;if(n&&!this.itemsMatch(n,this.bufferingItem)&&!this.isInterstitial(n)){const i=this.timelinePos;this.bufferedPos=i,this.checkBuffer()}}onBufferedToEnd(e){if(!this.schedule)return;const r=this.schedule.events;if(this.bufferedPos<Number.MAX_VALUE&&r){for(let i=0;i<r.length;i++){const a=r[i];if(a.cue.post){var n;const o=this.schedule.findEventIndex(a.identifier),c=(n=this.schedule.items)==null?void 0:n[o];this.isInterstitial(c)&&this.eventItemsMatch(c,this.bufferingItem)&&this.bufferedToItem(c,0);break}}this.bufferedPos=Number.MAX_VALUE}}onMediaEnded(e){const r=this.playingItem;if(!this.playingLastItem&&r){const n=this.findItemIndex(r);this.setSchedulePosition(n+1)}else this.shouldPlay=!1}updateItem(e,r){var n;const i=(n=this.schedule)==null?void 0:n.items;if(e&&i){const a=this.findItemIndex(e,r);return i[a]||null}return null}trimInPlace(e,r){if(this.isInterstitial(e)&&e.event.appendInPlace&&r.end-e.end>.25){e.event.assetList.forEach((a,o)=>{e.event.isAssetPastPlayoutLimit(o)&&this.clearAssetPlayer(a.identifier,null)});const n=e.end+.25,i=Hs.bufferInfo(this.primaryMedia,n,0);(i.end>n||(i.nextStart||0)>n)&&(this.log(`trim buffered interstitial ${_m(e)} (was ${_m(r)})`),this.attachPrimary(n,null,!0),this.flushFrontBuffer(n))}}itemsMatch(e,r){return!!r&&(e===r||e.event&&r.event&&this.eventItemsMatch(e,r)||!e.event&&!r.event&&this.findItemIndex(e)===this.findItemIndex(r))}eventItemsMatch(e,r){var n;return!!r&&(e===r||e.event.identifier===((n=r.event)==null?void 0:n.identifier))}findItemIndex(e,r){return e&&this.schedule?this.schedule.findItemIndex(e,r):-1}updateSchedule(e=!1){var r;const n=this.mediaSelection;n&&((r=this.schedule)==null||r.updateSchedule(n,[],e))}checkBuffer(e){var r;const n=(r=this.schedule)==null?void 0:r.items;if(!n)return;const i=Hs.bufferInfo(this.primaryMedia,this.timelinePos,0);e&&(this.bufferedPos=this.timelinePos),e||(e=i.len<1),this.updateBufferedPos(i.end,n,e)}updateBufferedPos(e,r,n){const i=this.schedule,a=this.bufferingItem;if(this.bufferedPos>e||!i)return;if(r.length===1&&this.itemsMatch(r[0],a)){this.bufferedPos=e;return}const o=this.playingItem,c=this.findItemIndex(o);let u=i.findItemIndexAtTime(e);if(this.bufferedPos<e){var l;const d=this.findItemIndex(a),f=Math.min(d+1,r.length-1),m=r[f];if((u===-1&&a&&e>=a.end||(l=m.event)!=null&&l.appendInPlace&&e+.01>=m.start)&&(u=f),this.isInterstitial(a)){const p=a.event;if(f-c>1&&p.appendInPlace===!1||p.assetList.length===0&&p.assetListLoader)return}if(this.bufferedPos=e,u>d&&u>c)this.bufferedToItem(m);else{const p=this.primaryDetails;this.primaryLive&&p&&e>p.edge-p.targetduration&&m.start<p.edge+this.hls.config.interstitialLiveLookAhead&&this.isInterstitial(m)&&this.preloadAssets(m.event,0)}}else n&&o&&!this.itemsMatch(o,a)&&(u===c?this.bufferedToItem(o):u===c+1&&this.bufferedToItem(r[u]))}assetsBuffered(e,r){return e.event.assetList.length===0?!1:!e.event.assetList.some(i=>{const a=this.getAssetPlayer(i.identifier);return!(a!=null&&a.bufferedInPlaceToEnd(r))})}setBufferingItem(e){const r=this.bufferingItem,n=this.schedule;if(!this.itemsMatch(e,r)&&n){const{items:i,events:a}=n;if(!i||!a)return r;const o=this.isInterstitial(e),c=this.getBufferingPlayer();this.bufferingItem=e,this.bufferedPos=Math.max(e.start,Math.min(e.end,this.timelinePos));const u=c?c.remaining:r?r.end-this.timelinePos:0;if(this.log(`INTERSTITIALS_BUFFERED_TO_BOUNDARY ${_m(e)}`+(r?` (${u.toFixed(2)} remaining)`:"")),!this.playbackDisabled)if(o){const l=n.findAssetIndex(e.event,this.bufferedPos);e.event.assetList.forEach((d,f)=>{const m=this.getAssetPlayer(d.identifier);m&&(f===l&&m.loadSource(),m.resumeBuffering())})}else this.hls.resumeBuffering(),this.playerQueue.forEach(l=>l.pauseBuffering());this.hls.trigger(Be.INTERSTITIALS_BUFFERED_TO_BOUNDARY,{events:a.slice(0),schedule:i.slice(0),bufferingIndex:this.findItemIndex(e),playingIndex:this.findItemIndex(this.playingItem)})}else this.bufferingItem!==e&&(this.bufferingItem=e);return r}bufferedToItem(e,r=0){const n=this.setBufferingItem(e);if(!this.playbackDisabled){if(this.isInterstitial(e))this.bufferedToEvent(e,r);else if(n!==null){this.bufferingAsset=null;const i=this.detachedData;i?i.mediaSource?this.attachPrimary(e.start,e,!0):this.preloadPrimary(e):this.preloadPrimary(e)}}}preloadPrimary(e){const r=this.findItemIndex(e),n=this.getPrimaryResumption(e,r);this.startLoadingPrimaryAt(n)}bufferedToEvent(e,r){const n=e.event,i=n.assetList.length===0&&!n.assetListLoader,a=n.cue.once;if(i||!a){const o=this.preloadAssets(n,r);if(o!=null&&o.interstitial.appendInPlace){const c=this.primaryMedia;c&&this.bufferAssetPlayer(o,c)}}}preloadAssets(e,r){const n=e.assetUrl,i=e.assetList.length,a=i===0&&!e.assetListLoader,o=e.cue.once;if(a){const u=e.timelineStart;if(e.appendInPlace){var c;const m=this.playingItem;!this.isInterstitial(m)&&(m==null||(c=m.nextEvent)==null?void 0:c.identifier)===e.identifier&&this.flushFrontBuffer(u+.25)}let l,d=0;if(!this.playingItem&&this.primaryLive&&(d=this.hls.startPosition,d===-1&&(d=this.hls.liveSyncPosition||0)),d&&!(e.cue.pre||e.cue.post)){const m=d-u;m>0&&(l=Math.round(m*1e3)/1e3)}if(this.log(`Load interstitial asset ${r+1}/${n?1:i} ${e}${l?` live-start: ${d} start-offset: ${l}`:""}`),n)return this.createAsset(e,0,0,u,e.duration,n);const f=this.assetListLoader.loadAssetList(e,l);f&&(e.assetListLoader=f)}else if(!o&&i){for(let l=r;l<i;l++){const d=e.assetList[l],f=this.getAssetPlayerQueueIndex(d.identifier);(f===-1||this.playerQueue[f].destroyed)&&!d.error&&this.createAssetPlayer(e,d,l)}const u=e.assetList[r];if(u){const l=this.getAssetPlayer(u.identifier);return l&&l.loadSource(),l}}return null}flushFrontBuffer(e){const r=this.requiredTracks;if(!r)return;this.log(`Removing front buffer starting at ${e}`),Object.keys(r).forEach(i=>{this.hls.trigger(Be.BUFFER_FLUSHING,{startOffset:e,endOffset:1/0,type:i})})}getAssetPlayerQueueIndex(e){const r=this.playerQueue;for(let n=0;n<r.length;n++)if(e===r[n].assetId)return n;return-1}getAssetPlayer(e){const r=this.getAssetPlayerQueueIndex(e);return this.playerQueue[r]||null}getBufferingPlayer(){const{playerQueue:e,primaryMedia:r}=this;if(r){for(let n=0;n<e.length;n++)if(e[n].media===r)return e[n]}return null}createAsset(e,r,n,i,a,o){const c={parentIdentifier:e.identifier,identifier:KHe(e,o,r),duration:a,startOffset:n,timelineStart:i,uri:o};return this.createAssetPlayer(e,c,r)}createAssetPlayer(e,r,n){const i=this.hls,a=i.userConfig;let o=a.videoPreference;const c=i.loadLevelObj||i.levels[i.currentLevel];(o||c)&&(o=nl({},o),c.videoCodec&&(o.videoCodec=c.videoCodec),c.videoRange&&(o.allowedVideoRanges=[c.videoRange]));const u=i.audioTracks[i.audioTrack],l=i.subtitleTracks[i.subtitleTrack];let d=0;if(this.primaryLive||e.appendInPlace){const N=this.timelinePos-r.timelineStart;if(N>1){const C=r.duration;C&&N<C&&(d=N)}}const f=r.identifier,m=Uo(Uo({},a),{},{maxMaxBufferLength:Math.min(180,i.config.maxMaxBufferLength),autoStartLoad:!0,startFragPrefetch:!0,primarySessionId:i.sessionId,assetPlayerId:f,abrEwmaDefaultEstimate:i.bandwidthEstimate,interstitialsController:void 0,startPosition:d,liveDurationInfinity:!1,testBandwidth:!1,videoPreference:o,audioPreference:u||a.audioPreference,subtitlePreference:l||a.subtitlePreference});e.appendInPlace&&(e.appendInPlaceStarted=!0,r.timelineStart&&(m.timelineOffset=r.timelineStart));const p=m.cmcd;p!=null&&p.sessionId&&p.contentId&&(m.cmcd=nl({},p,{contentId:x2(r.uri)})),this.getAssetPlayer(f)&&this.warn(`Duplicate date range identifier ${e} and asset ${f}`);const g=new YHe(this.HlsPlayerClass,m,e,r);this.playerQueue.push(g),e.assetList[n]=r;let y=!0;const x=N=>{if(N.live){var C;const U=new Error(`Interstitials MUST be VOD assets ${e}`),G={fatal:!0,type:Oi.OTHER_ERROR,details:br.INTERSTITIAL_ASSET_ITEM_ERROR,error:U},q=((C=this.schedule)==null?void 0:C.findEventIndex(e.identifier))||-1;this.handleAssetItemError(G,e,q,n,U.message);return}const I=N.edge-N.fragmentStart,D=r.duration;(y||D===null||I>D)&&(y=!1,this.log(`Interstitial asset "${f}" duration change ${D} > ${I}`),r.duration=I,this.updateSchedule())};g.on(Be.LEVEL_UPDATED,(N,{details:C})=>x(C)),g.on(Be.LEVEL_PTS_UPDATED,(N,{details:C})=>x(C)),g.on(Be.EVENT_CUE_ENTER,()=>this.onInterstitialCueEnter());const w=(N,C)=>{const I=this.getAssetPlayer(f);if(I&&C.tracks){I.off(Be.BUFFER_CODECS,w),I.tracks=C.tracks;const D=this.primaryMedia;this.bufferingAsset===I.assetItem&&D&&!I.media&&this.bufferAssetPlayer(I,D)}};g.on(Be.BUFFER_CODECS,w);const _=()=>{var N;const C=this.getAssetPlayer(f);if(this.log(`buffered to end of asset ${C}`),!C||!this.schedule)return;const I=this.schedule.findEventIndex(e.identifier),D=(N=this.schedule.items)==null?void 0:N[I];this.isInterstitial(D)&&this.advanceAssetBuffering(D,r)};g.on(Be.BUFFERED_TO_END,_);const E=N=>()=>{if(!this.getAssetPlayer(f)||!this.schedule)return;this.shouldPlay=!0;const I=this.schedule.findEventIndex(e.identifier);this.advanceAfterAssetEnded(e,I,N)};return g.once(Be.MEDIA_ENDED,E(n)),g.once(Be.PLAYOUT_LIMIT_REACHED,E(1/0)),g.on(Be.ERROR,(N,C)=>{if(!this.schedule)return;const I=this.getAssetPlayer(f);if(C.details===br.BUFFER_STALLED_ERROR){if(I!=null&&I.appendInPlace){this.handleInPlaceStall(e);return}this.onTimeupdate(),this.checkBuffer(!0);return}this.handleAssetItemError(C,e,this.schedule.findEventIndex(e.identifier),n,`Asset player error ${C.error} ${e}`)}),g.on(Be.DESTROYING,()=>{if(!this.getAssetPlayer(f)||!this.schedule)return;const C=new Error(`Asset player destroyed unexpectedly ${f}`),I={fatal:!0,type:Oi.OTHER_ERROR,details:br.INTERSTITIAL_ASSET_ITEM_ERROR,error:C};this.handleAssetItemError(I,e,this.schedule.findEventIndex(e.identifier),n,C.message)}),this.log(`INTERSTITIAL_ASSET_PLAYER_CREATED ${Lx(r)}`),this.hls.trigger(Be.INTERSTITIAL_ASSET_PLAYER_CREATED,{asset:r,assetListIndex:n,event:e,player:g}),g}clearInterstitial(e,r){this.clearAssetPlayers(e,r),e.reset()}clearAssetPlayers(e,r){e.assetList.forEach(n=>{this.clearAssetPlayer(n.identifier,r)})}resetAssetPlayer(e){const r=this.getAssetPlayerQueueIndex(e);if(r!==-1){this.log(`reset asset player "${e}" after error`);const n=this.playerQueue[r];this.transferMediaFromPlayer(n,null),n.resetDetails()}}clearAssetPlayer(e,r){const n=this.getAssetPlayerQueueIndex(e);if(n!==-1){const i=this.playerQueue[n];this.log(`clear ${i} toSegment: ${r&&_m(r)}`),this.transferMediaFromPlayer(i,r),this.playerQueue.splice(n,1),i.destroy()}}emptyPlayerQueue(){let e;for(;e=this.playerQueue.pop();)e.destroy();this.playerQueue=[]}startAssetPlayer(e,r,n,i,a){const{interstitial:o,assetItem:c,assetId:u}=e,l=o.assetList.length,d=this.playingAsset;this.endedAsset=null,this.playingAsset=c,(!d||d.identifier!==u)&&(d&&(this.clearAssetPlayer(d.identifier,n[i]),delete d.error),this.log(`INTERSTITIAL_ASSET_STARTED ${r+1}/${l} ${Lx(c)}`),this.hls.trigger(Be.INTERSTITIAL_ASSET_STARTED,{asset:c,assetListIndex:r,event:o,schedule:n.slice(0),scheduleIndex:i,player:e})),this.bufferAssetPlayer(e,a)}bufferAssetPlayer(e,r){var n,i;if(!this.schedule)return;const{interstitial:a,assetItem:o}=e,c=this.schedule.findEventIndex(a.identifier),u=(n=this.schedule.items)==null?void 0:n[c];if(!u)return;e.loadSource(),this.setBufferingItem(u),this.bufferingAsset=o;const l=this.getBufferingPlayer();if(l===e)return;const d=a.appendInPlace;if(d&&l?.interstitial.appendInPlace===!1)return;const f=l?.tracks||((i=this.detachedData)==null?void 0:i.tracks)||this.requiredTracks;if(d&&o!==this.playingAsset){if(!e.tracks){this.log(`Waiting for track info before buffering ${e}`);return}if(f&&!aie(f,e.tracks)){const m=new Error(`Asset ${Lx(o)} SourceBuffer tracks ('${Object.keys(e.tracks)}') are not compatible with primary content tracks ('${Object.keys(f)}')`),p={fatal:!0,type:Oi.OTHER_ERROR,details:br.INTERSTITIAL_ASSET_ITEM_ERROR,error:m},g=a.findAssetIndex(o);this.handleAssetItemError(p,a,c,g,m.message);return}}this.transferMediaTo(e,r)}handleInPlaceStall(e){const r=this.schedule,n=this.primaryMedia;if(!r||!n)return;const i=n.currentTime,a=r.findAssetIndex(e,i),o=e.assetList[a];if(o){const c=this.getAssetPlayer(o.identifier);if(c){const u=c.currentTime||i-o.timelineStart,l=c.duration-u;if(this.warn(`Stalled at ${u} of ${u+l} in ${c} ${e} (media.currentTime: ${i})`),u&&(l/n.playbackRate<.5||c.bufferedInPlaceToEnd(n))&&c.hls){const d=r.findEventIndex(e.identifier);this.advanceAfterAssetEnded(e,d,a)}}}}advanceInPlace(e){const r=this.primaryMedia;r&&r.currentTime<e&&(r.currentTime=e)}handleAssetItemError(e,r,n,i,a){if(e.details===br.BUFFER_STALLED_ERROR)return;const o=r.assetList[i]||null;if(this.warn(`INTERSTITIAL_ASSET_ERROR ${o&&Lx(o)} ${e.error}`),!this.schedule)return;const c=o?.identifier||"",u=this.getAssetPlayerQueueIndex(c),l=this.playerQueue[u]||null,d=this.schedule.items,f=nl({},e,{fatal:!1,errorAction:Eb(!0),asset:o,assetListIndex:i,event:r,schedule:d,scheduleIndex:n,player:l});if(this.hls.trigger(Be.INTERSTITIAL_ASSET_ERROR,f),!e.fatal)return;const m=this.playingAsset,p=this.bufferingAsset,g=new Error(a);if(o&&(this.clearAssetPlayer(c,null),o.error=g),!r.assetList.some(y=>!y.error))r.error=g;else for(let y=i;y<r.assetList.length;y++)this.resetAssetPlayer(r.assetList[y].identifier);this.updateSchedule(!0),r.error?this.primaryFallback(r):m&&m.identifier===c?this.advanceAfterAssetEnded(r,n,i):p&&p.identifier===c&&this.isInterstitial(this.bufferingItem)&&this.advanceAssetBuffering(this.bufferingItem,p)}primaryFallback(e){const r=e.timelineStart,n=this.effectivePlayingItem;let i=this.timelinePos;if(n){this.log(`Fallback to primary from event "${e.identifier}" start: ${r} pos: ${i} playing: ${_m(n)} error: ${e.error}`),i===-1&&(i=this.hls.startPosition);const o=this.updateItem(n,i);this.itemsMatch(n,o)&&this.clearInterstitial(e,null),e.appendInPlace&&(this.attachPrimary(r,null),this.flushFrontBuffer(r))}else if(i===-1){this.checkStart();return}if(!this.schedule)return;const a=this.schedule.findItemIndexAtTime(i);this.setSchedulePosition(a)}onAssetListLoaded(e,r){var n,i;const a=r.event,o=a.identifier,c=r.assetListResponse.ASSETS;if(!((n=this.schedule)!=null&&n.hasEvent(o)))return;const u=a.timelineStart,l=a.duration;let d=0;c.forEach((y,x)=>{const w=parseFloat(y.DURATION);this.createAsset(a,x,d,u+d,w,y.URI),d+=w}),a.duration=d,this.log(`Loaded asset-list with duration: ${d} (was: ${l}) ${a}`);const f=this.waitingItem,m=f?.event.identifier===o;this.updateSchedule();const p=(i=this.bufferingItem)==null?void 0:i.event;if(m){var g;const y=this.schedule.findEventIndex(o),x=(g=this.schedule.items)==null?void 0:g[y];if(x){if(!this.playingItem&&this.timelinePos>x.end&&this.schedule.findItemIndexAtTime(this.timelinePos)!==y){a.error=new Error(`Interstitial ${c.length?"no longer within playback range":"asset-list is empty"} ${this.timelinePos} ${a}`),this.log(a.error.message),this.updateSchedule(!0),this.primaryFallback(a);return}this.setBufferingItem(x)}this.setSchedulePosition(y)}else if(p?.identifier===o){const y=a.assetList[0];if(y){const x=this.getAssetPlayer(y.identifier);if(p.appendInPlace){const w=this.primaryMedia;x&&w&&this.bufferAssetPlayer(x,w)}else x&&x.loadSource()}}}onError(e,r){if(this.schedule)switch(r.details){case br.ASSET_LIST_PARSING_ERROR:case br.ASSET_LIST_LOAD_ERROR:case br.ASSET_LIST_LOAD_TIMEOUT:{const n=r.interstitial;n&&(this.updateSchedule(!0),this.primaryFallback(n));break}case br.BUFFER_STALLED_ERROR:{const n=this.endedItem||this.waitingItem||this.playingItem;if(this.isInterstitial(n)&&n.event.appendInPlace){this.handleInPlaceStall(n.event);return}this.log(`Primary player stall @${this.timelinePos} bufferedPos: ${this.bufferedPos}`),this.onTimeupdate(),this.checkBuffer(!0);break}}}}const EG=500;class JHe extends RF{constructor(e,r,n){super(e,r,n,"subtitle-stream-controller",fi.SUBTITLE),this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(Be.LEVEL_LOADED,this.onLevelLoaded,this),e.on(Be.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(Be.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(Be.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(Be.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(Be.BUFFER_FLUSHING,this.onBufferFlushing,this)}unregisterListeners(){super.unregisterListeners();const{hls:e}=this;e.off(Be.LEVEL_LOADED,this.onLevelLoaded,this),e.off(Be.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(Be.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(Be.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(Be.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(Be.BUFFER_FLUSHING,this.onBufferFlushing,this)}startLoad(e,r){this.stopLoad(),this.state=qr.IDLE,this.setInterval(EG),this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=r?-1:e,this.tick()}onManifestLoading(){super.onManifestLoading(),this.mainDetails=null}onMediaDetaching(e,r){this.tracksBuffered=[],super.onMediaDetaching(e,r)}onLevelLoaded(e,r){this.mainDetails=r.details}onSubtitleFragProcessed(e,r){const{frag:n,success:i}=r;if(this.fragContextChanged(n)||(eu(n)&&(this.fragPrevious=n),this.state=qr.IDLE),!i)return;const a=this.tracksBuffered[this.currentTrackId];if(!a)return;let o;const c=n.start;for(let l=0;l<a.length;l++)if(c>=a[l].start&&c<=a[l].end){o=a[l];break}const u=n.start+n.duration;o?o.end=u:(o={start:c,end:u},a.push(o)),this.fragmentTracker.fragBuffered(n),this.fragBufferedComplete(n,null),this.media&&this.tick()}onBufferFlushing(e,r){const{startOffset:n,endOffset:i}=r;if(n===0&&i!==Number.POSITIVE_INFINITY){const a=i-1;if(a<=0)return;r.endOffsetSubtitles=Math.max(0,a),this.tracksBuffered.forEach(o=>{for(let c=0;c<o.length;){if(o[c].end<=a){o.shift();continue}else if(o[c].start<a)o[c].start=a;else break;c++}}),this.fragmentTracker.removeFragmentsInRange(n,a,fi.SUBTITLE)}}onError(e,r){const n=r.frag;n?.type===fi.SUBTITLE&&(r.details===br.FRAG_GAP&&this.fragmentTracker.fragBuffered(n,!0),this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==qr.STOPPED&&(this.state=qr.IDLE))}onSubtitleTracksUpdated(e,{subtitleTracks:r}){if(this.levels&&cse(this.levels,r)){this.levels=r.map(n=>new d_(n));return}this.tracksBuffered=[],this.levels=r.map(n=>{const i=new d_(n);return this.tracksBuffered[i.id]=[],i}),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,fi.SUBTITLE),this.fragPrevious=null,this.mediaBuffer=null}onSubtitleTrackSwitch(e,r){var n;if(this.currentTrackId=r.id,!((n=this.levels)!=null&&n.length)||this.currentTrackId===-1){this.clearInterval();return}const i=this.levels[this.currentTrackId];i!=null&&i.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,i&&this.state!==qr.STOPPED&&this.setInterval(EG)}onSubtitleTrackLoaded(e,r){var n;const{currentTrackId:i,levels:a}=this,{details:o,id:c}=r;if(!a){this.warn(`Subtitle tracks were reset while loading level ${c}`);return}const u=a[c];if(c>=a.length||!u)return;this.log(`Subtitle track ${c} loaded [${o.startSN},${o.endSN}]${o.lastPartSn?`[part-${o.lastPartSn}-${o.lastPartIndex}]`:""},duration:${o.totalduration}`),this.mediaBuffer=this.mediaBufferTimeRanges;let l=0;if(o.live||(n=u.details)!=null&&n.live){if(o.deltaUpdateFailed)return;const f=this.mainDetails;if(!f){this.startFragRequested=!1;return}const m=f.fragments[0];if(!u.details)o.hasProgramDateTime&&f.hasProgramDateTime?(cN(o,f),l=o.fragmentStart):m&&(l=m.start,_O(o,l));else{var d;l=this.alignPlaylists(o,u.details,(d=this.levelLastLoaded)==null?void 0:d.details),l===0&&m&&(l=m.start,_O(o,l))}f&&!this.startFragRequested&&this.setStartPosition(f,l)}u.details=o,this.levelLastLoaded=u,c===i&&(this.hls.trigger(Be.SUBTITLE_TRACK_UPDATED,{details:o,id:c,groupId:r.groupId}),this.tick(),o.live&&!this.fragCurrent&&this.media&&this.state===qr.IDLE&&(Ty(null,o.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),u.details=void 0)))}_handleFragmentLoadComplete(e){const{frag:r,payload:n}=e,i=r.decryptdata,a=this.hls;if(!this.fragContextChanged(r)&&n&&n.byteLength>0&&i!=null&&i.key&&i.iv&&Sb(i.method)){const o=performance.now();this.decrypter.decrypt(new Uint8Array(n),i.key.buffer,i.iv.buffer,PF(i.method)).catch(c=>{throw a.trigger(Be.ERROR,{type:Oi.MEDIA_ERROR,details:br.FRAG_DECRYPT_ERROR,fatal:!1,error:c,reason:c.message,frag:r}),c}).then(c=>{const u=performance.now();a.trigger(Be.FRAG_DECRYPTED,{frag:r,payload:c,stats:{tstart:o,tdecrypt:u}})}).catch(c=>{this.warn(`${c.name}: ${c.message}`),this.state=qr.IDLE})}}doTick(){if(!this.media){this.state=qr.IDLE;return}if(this.state===qr.IDLE){const{currentTrackId:e,levels:r}=this,n=r?.[e];if(!n||!r.length||!n.details||this.waitForLive(n))return;const{config:i}=this,a=this.getLoadPosition(),o=Hs.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],a,i.maxBufferHole),{end:c,len:u}=o,l=n.details,d=this.hls.maxBufferLength+l.levelTargetDuration;if(u>d)return;const f=l.fragments,m=f.length,p=l.edge;let g=null;const y=this.fragPrevious;if(c<p){const _=i.maxFragLookUpTolerance,E=c>p-_?0:_;g=Ty(y,f,Math.max(f[0].start,c),E),!g&&y&&y.start<f[0].start&&(g=f[0])}else g=f[m-1];if(g=this.filterReplacedPrimary(g,n.details),!g)return;const x=g.sn-l.startSN,w=f[x-1];if(w&&w.cc===g.cc&&this.fragmentTracker.getState(w)===$u.NOT_LOADED&&(g=w),this.fragmentTracker.getState(g)===$u.NOT_LOADED){const _=this.mapToInitFragWhenRequired(g);_&&this.loadFragment(_,n,c)}}}loadFragment(e,r,n){eu(e)?super.loadFragment(e,r,n):this._loadInitSegment(e,r)}get mediaBufferTimeRanges(){return new eQe(this.tracksBuffered[this.currentTrackId]||[])}}class eQe{constructor(e){this.buffered=void 0;const r=(n,i,a)=>{if(i=i>>>0,i>a-1)throw new DOMException(`Failed to execute '${n}' on 'TimeRanges': The index provided (${i}) is greater than the maximum bound (${a})`);return e[i][n]};this.buffered={get length(){return e.length},end(n){return r("end",n,e.length)},start(n){return r("start",n,e.length)}}}}const tQe={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},Sse=t=>String.fromCharCode(tQe[t]||t),Nm=15,Cp=100,rQe={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},nQe={17:2,18:4,21:6,22:8,23:10,19:13,20:15},iQe={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},sQe={25:2,26:4,29:6,30:8,31:10,27:13,28:15},aQe=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class oQe{constructor(){this.time=null,this.verboseLevel=0}log(e,r){if(this.verboseLevel>=e){const n=typeof r=="function"?r():r;Ho.log(`${this.time} [${e}] ${n}`)}}}const xv=function(e){const r=[];for(let n=0;n<e.length;n++)r.push(e[n].toString(16));return r};class jse{constructor(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(e){const r=["foreground","underline","italics","background","flash"];for(let n=0;n<r.length;n++){const i=r[n];e.hasOwnProperty(i)&&(this[i]=e[i])}}isDefault(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash}equals(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}copy(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}class lQe{constructor(){this.uchar=" ",this.penState=new jse}reset(){this.uchar=" ",this.penState.reset()}setChar(e,r){this.uchar=e,this.penState.copy(r)}setPenState(e){this.penState.copy(e)}equals(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}copy(e){this.uchar=e.uchar,this.penState.copy(e.penState)}isEmpty(){return this.uchar===" "&&this.penState.isDefault()}}class cQe{constructor(e){this.chars=[],this.pos=0,this.currPenState=new jse,this.cueStartTime=null,this.logger=void 0;for(let r=0;r<Cp;r++)this.chars.push(new lQe);this.logger=e}equals(e){for(let r=0;r<Cp;r++)if(!this.chars[r].equals(e.chars[r]))return!1;return!0}copy(e){for(let r=0;r<Cp;r++)this.chars[r].copy(e.chars[r])}isEmpty(){let e=!0;for(let r=0;r<Cp;r++)if(!this.chars[r].isEmpty()){e=!1;break}return e}setCursor(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>Cp&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=Cp)}moveCursor(e){const r=this.pos+e;if(e>1)for(let n=this.pos+1;n<r+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(r)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(e){e>=144&&this.backSpace();const r=Sse(e);if(this.pos>=Cp){this.logger.log(0,()=>"Cannot insert "+e.toString(16)+" ("+r+") at position "+this.pos+". Skipping it!");return}this.chars[this.pos].setChar(r,this.currPenState),this.moveCursor(1)}clearFromPos(e){let r;for(r=e;r<Cp;r++)this.chars[r].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const e=[];let r=!0;for(let n=0;n<Cp;n++){const i=this.chars[n].uchar;i!==" "&&(r=!1),e.push(i)}return r?"":e.join("")}setPenStyles(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}}class QI{constructor(e){this.rows=[],this.currRow=Nm-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.logger=void 0;for(let r=0;r<Nm;r++)this.rows.push(new cQe(e));this.logger=e}reset(){for(let e=0;e<Nm;e++)this.rows[e].clear();this.currRow=Nm-1}equals(e){let r=!0;for(let n=0;n<Nm;n++)if(!this.rows[n].equals(e.rows[n])){r=!1;break}return r}copy(e){for(let r=0;r<Nm;r++)this.rows[r].copy(e.rows[r])}isEmpty(){let e=!0;for(let r=0;r<Nm;r++)if(!this.rows[r].isEmpty()){e=!1;break}return e}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(e){this.rows[this.currRow].insertChar(e)}setPen(e){this.rows[this.currRow].setPenStyles(e)}moveCursor(e){this.rows[this.currRow].moveCursor(e)}setCursor(e){this.logger.log(2,"setCursor: "+e),this.rows[this.currRow].setCursor(e)}setPAC(e){this.logger.log(2,()=>"pacData = "+fl(e));let r=e.row-1;if(this.nrRollUpRows&&r<this.nrRollUpRows-1&&(r=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==r){for(let c=0;c<Nm;c++)this.rows[c].clear();const a=this.currRow+1-this.nrRollUpRows,o=this.lastOutputScreen;if(o){const c=o.rows[a].cueStartTime,u=this.logger.time;if(c!==null&&u!==null&&c<u)for(let l=0;l<this.nrRollUpRows;l++)this.rows[r-this.nrRollUpRows+l+1].copy(o.rows[a+l])}}this.currRow=r;const n=this.rows[this.currRow];if(e.indent!==null){const a=e.indent,o=Math.max(a-1,0);n.setCursor(e.indent),e.color=n.chars[o].penState.foreground}const i={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(i)}setBkgData(e){this.logger.log(2,()=>"bkgData = "+fl(e)),this.backSpace(),this.setPen(e),this.insertChar(32)}setRollUpRows(e){this.nrRollUpRows=e}rollUp(){if(this.nrRollUpRows===null){this.logger.log(3,"roll_up but nrRollUpRows not set yet");return}this.logger.log(1,()=>this.getDisplayText());const e=this.currRow+1-this.nrRollUpRows,r=this.rows.splice(e,1)[0];r.clear(),this.rows.splice(this.currRow,0,r),this.logger.log(2,"Rolling up")}getDisplayText(e){e=e||!1;const r=[];let n="",i=-1;for(let a=0;a<Nm;a++){const o=this.rows[a].getTextString();o&&(i=a+1,e?r.push("Row "+i+": '"+o+"'"):r.push(o.trim()))}return r.length>0&&(e?n="["+r.join(" | ")+"]":n=r.join(`
`)),n}getTextAndFormat(){return this.rows}}class SG{constructor(e,r,n){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=r,this.mode=null,this.verbose=0,this.displayedMemory=new QI(n),this.nonDisplayedMemory=new QI(n),this.lastOutputScreen=new QI(n),this.currRollUpRow=this.displayedMemory.rows[Nm-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=n}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[Nm-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(e){this.outputFilter=e}setPAC(e){this.writeScreen.setPAC(e)}setBkgData(e){this.writeScreen.setBkgData(e)}setMode(e){e!==this.mode&&(this.mode=e,this.logger.log(2,()=>"MODE="+e),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}insertChars(e){for(let n=0;n<e.length;n++)this.writeScreen.insertChar(e[n]);const r=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,()=>r+": "+this.writeScreen.getDisplayText(!0)),(this.mode==="MODE_PAINT-ON"||this.mode==="MODE_ROLL-UP")&&(this.logger.log(1,()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(e){this.logger.log(2,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){const e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,()=>"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)}ccTO(e){this.logger.log(2,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}ccMIDROW(e){const r={flash:!1};if(r.underline=e%2===1,r.italics=e>=46,r.italics)r.foreground="white";else{const n=Math.floor(e/2)-16,i=["white","green","blue","cyan","red","yellow","magenta"];r.foreground=i[n]}this.logger.log(2,"MIDROW: "+fl(r)),this.writeScreen.setPen(r)}outputDataUpdate(e=!1){const r=this.logger.time;r!==null&&this.outputFilter&&(this.cueStartTime===null&&!this.displayedMemory.isEmpty()?this.cueStartTime=r:this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,r,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:r),this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}class jG{constructor(e,r,n){this.channels=void 0,this.currentChannel=0,this.cmdHistory=dQe(),this.logger=void 0;const i=this.logger=new oQe;this.channels=[null,new SG(e,r,i),new SG(e+1,n,i)]}getHandler(e){return this.channels[e].getHandler()}setHandler(e,r){this.channels[e].setHandler(r)}addData(e,r){this.logger.time=e;for(let n=0;n<r.length;n+=2){const i=r[n]&127,a=r[n+1]&127;let o=!1,c=null;if(i===0&&a===0)continue;this.logger.log(3,()=>"["+xv([r[n],r[n+1]])+"] -> ("+xv([i,a])+")");const u=this.cmdHistory;if(i>=16&&i<=31){if(uQe(i,a,u)){CS(null,null,u),this.logger.log(3,()=>"Repeated command ("+xv([i,a])+") is dropped");continue}CS(i,a,this.cmdHistory),o=this.parseCmd(i,a),o||(o=this.parseMidrow(i,a)),o||(o=this.parsePAC(i,a)),o||(o=this.parseBackgroundAttributes(i,a))}else CS(null,null,u);if(!o&&(c=this.parseChars(i,a),c)){const d=this.currentChannel;d&&d>0?this.channels[d].insertChars(c):this.logger.log(2,"No channel found yet. TEXT-MODE?")}!o&&!c&&this.logger.log(2,()=>"Couldn't parse cleaned data "+xv([i,a])+" orig: "+xv([r[n],r[n+1]]))}}parseCmd(e,r){const n=(e===20||e===28||e===21||e===29)&&r>=32&&r<=47,i=(e===23||e===31)&&r>=33&&r<=35;if(!(n||i))return!1;const a=e===20||e===21||e===23?1:2,o=this.channels[a];return e===20||e===21||e===28||e===29?r===32?o.ccRCL():r===33?o.ccBS():r===34?o.ccAOF():r===35?o.ccAON():r===36?o.ccDER():r===37?o.ccRU(2):r===38?o.ccRU(3):r===39?o.ccRU(4):r===40?o.ccFON():r===41?o.ccRDC():r===42?o.ccTR():r===43?o.ccRTD():r===44?o.ccEDM():r===45?o.ccCR():r===46?o.ccENM():r===47&&o.ccEOC():o.ccTO(r-32),this.currentChannel=a,!0}parseMidrow(e,r){let n=0;if((e===17||e===25)&&r>=32&&r<=47){if(e===17?n=1:n=2,n!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const i=this.channels[n];return i?(i.ccMIDROW(r),this.logger.log(3,()=>"MIDROW ("+xv([e,r])+")"),!0):!1}return!1}parsePAC(e,r){let n;const i=(e>=17&&e<=23||e>=25&&e<=31)&&r>=64&&r<=127,a=(e===16||e===24)&&r>=64&&r<=95;if(!(i||a))return!1;const o=e<=23?1:2;r>=64&&r<=95?n=o===1?rQe[e]:iQe[e]:n=o===1?nQe[e]:sQe[e];const c=this.channels[o];return c?(c.setPAC(this.interpretPAC(n,r)),this.currentChannel=o,!0):!1}interpretPAC(e,r){let n;const i={color:null,italics:!1,indent:null,underline:!1,row:e};return r>95?n=r-96:n=r-64,i.underline=(n&1)===1,n<=13?i.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(i.italics=!0,i.color="white"):i.indent=Math.floor((n-16)/2)*4,i}parseChars(e,r){let n,i=null,a=null;if(e>=25?(n=2,a=e-8):(n=1,a=e),a>=17&&a<=19){let o;a===17?o=r+80:a===18?o=r+112:o=r+144,this.logger.log(2,()=>"Special char '"+Sse(o)+"' in channel "+n),i=[o]}else e>=32&&e<=127&&(i=r===0?[e]:[e,r]);return i&&this.logger.log(3,()=>"Char codes =  "+xv(i).join(",")),i}parseBackgroundAttributes(e,r){const n=(e===16||e===24)&&r>=32&&r<=47,i=(e===23||e===31)&&r>=45&&r<=47;if(!(n||i))return!1;let a;const o={};e===16||e===24?(a=Math.floor((r-32)/2),o.background=aQe[a],r%2===1&&(o.background=o.background+"_semi")):r===45?o.background="transparent":(o.foreground="black",r===47&&(o.underline=!0));const c=e<=23?1:2;return this.channels[c].setBkgData(o),!0}reset(){for(let e=0;e<Object.keys(this.channels).length;e++){const r=this.channels[e];r&&r.reset()}CS(null,null,this.cmdHistory)}cueSplitAtTime(e){for(let r=0;r<this.channels.length;r++){const n=this.channels[r];n&&n.cueSplitAtTime(e)}}}function CS(t,e,r){r.a=t,r.b=e}function uQe(t,e,r){return r.a===t&&r.b===e}function dQe(){return{a:null,b:null}}var GF=(function(){if(lN!=null&&lN.VTTCue)return self.VTTCue;const t=["","lr","rl"],e=["start","middle","end","left","right"];function r(c,u){if(typeof u!="string"||!Array.isArray(c))return!1;const l=u.toLowerCase();return~c.indexOf(l)?l:!1}function n(c){return r(t,c)}function i(c){return r(e,c)}function a(c,...u){let l=1;for(;l<arguments.length;l++){const d=arguments[l];for(const f in d)c[f]=d[f]}return c}function o(c,u,l){const d=this,f={enumerable:!0};d.hasBeenReset=!1;let m="",p=!1,g=c,y=u,x=l,w=null,_="",E=!0,N="auto",C="start",I=50,D="middle",U=50,G="middle";Object.defineProperty(d,"id",a({},f,{get:function(){return m},set:function(q){m=""+q}})),Object.defineProperty(d,"pauseOnExit",a({},f,{get:function(){return p},set:function(q){p=!!q}})),Object.defineProperty(d,"startTime",a({},f,{get:function(){return g},set:function(q){if(typeof q!="number")throw new TypeError("Start time must be set to a number.");g=q,this.hasBeenReset=!0}})),Object.defineProperty(d,"endTime",a({},f,{get:function(){return y},set:function(q){if(typeof q!="number")throw new TypeError("End time must be set to a number.");y=q,this.hasBeenReset=!0}})),Object.defineProperty(d,"text",a({},f,{get:function(){return x},set:function(q){x=""+q,this.hasBeenReset=!0}})),Object.defineProperty(d,"region",a({},f,{get:function(){return w},set:function(q){w=q,this.hasBeenReset=!0}})),Object.defineProperty(d,"vertical",a({},f,{get:function(){return _},set:function(q){const J=n(q);if(J===!1)throw new SyntaxError("An invalid or illegal string was specified.");_=J,this.hasBeenReset=!0}})),Object.defineProperty(d,"snapToLines",a({},f,{get:function(){return E},set:function(q){E=!!q,this.hasBeenReset=!0}})),Object.defineProperty(d,"line",a({},f,{get:function(){return N},set:function(q){if(typeof q!="number"&&q!=="auto")throw new SyntaxError("An invalid number or illegal string was specified.");N=q,this.hasBeenReset=!0}})),Object.defineProperty(d,"lineAlign",a({},f,{get:function(){return C},set:function(q){const J=i(q);if(!J)throw new SyntaxError("An invalid or illegal string was specified.");C=J,this.hasBeenReset=!0}})),Object.defineProperty(d,"position",a({},f,{get:function(){return I},set:function(q){if(q<0||q>100)throw new Error("Position must be between 0 and 100.");I=q,this.hasBeenReset=!0}})),Object.defineProperty(d,"positionAlign",a({},f,{get:function(){return D},set:function(q){const J=i(q);if(!J)throw new SyntaxError("An invalid or illegal string was specified.");D=J,this.hasBeenReset=!0}})),Object.defineProperty(d,"size",a({},f,{get:function(){return U},set:function(q){if(q<0||q>100)throw new Error("Size must be between 0 and 100.");U=q,this.hasBeenReset=!0}})),Object.defineProperty(d,"align",a({},f,{get:function(){return G},set:function(q){const J=i(q);if(!J)throw new SyntaxError("An invalid or illegal string was specified.");G=J,this.hasBeenReset=!0}})),d.displayState=void 0}return o.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},o})();class hQe{decode(e,r){if(!e)return"";if(typeof e!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}function Tse(t){function e(n,i,a,o){return(n|0)*3600+(i|0)*60+(a|0)+parseFloat(o||0)}const r=t.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return r?parseFloat(r[2])>59?e(r[2],r[3],0,r[4]):e(r[1],r[2],r[3],r[4]):null}class fQe{constructor(){this.values=Object.create(null)}set(e,r){!this.get(e)&&r!==""&&(this.values[e]=r)}get(e,r,n){return n?this.has(e)?this.values[e]:r[n]:this.has(e)?this.values[e]:r}has(e){return e in this.values}alt(e,r,n){for(let i=0;i<n.length;++i)if(r===n[i]){this.set(e,r);break}}integer(e,r){/^-?\d+$/.test(r)&&this.set(e,parseInt(r,10))}percent(e,r){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(r)){const n=parseFloat(r);if(n>=0&&n<=100)return this.set(e,n),!0}return!1}}function Cse(t,e,r,n){const i=n?t.split(n):[t];for(const a in i){if(typeof i[a]!="string")continue;const o=i[a].split(r);if(o.length!==2)continue;const c=o[0],u=o[1];e(c,u)}}const LO=new GF(0,0,""),NS=LO.align==="middle"?"middle":"center";function mQe(t,e,r){const n=t;function i(){const c=Tse(t);if(c===null)throw new Error("Malformed timestamp: "+n);return t=t.replace(/^[^\sa-zA-Z-]+/,""),c}function a(c,u){const l=new fQe;Cse(c,function(m,p){let g;switch(m){case"region":for(let y=r.length-1;y>=0;y--)if(r[y].id===p){l.set(m,r[y].region);break}break;case"vertical":l.alt(m,p,["rl","lr"]);break;case"line":g=p.split(","),l.integer(m,g[0]),l.percent(m,g[0])&&l.set("snapToLines",!1),l.alt(m,g[0],["auto"]),g.length===2&&l.alt("lineAlign",g[1],["start",NS,"end"]);break;case"position":g=p.split(","),l.percent(m,g[0]),g.length===2&&l.alt("positionAlign",g[1],["start",NS,"end","line-left","line-right","auto"]);break;case"size":l.percent(m,p);break;case"align":l.alt(m,p,["start",NS,"end","left","right"]);break}},/:/,/\s/),u.region=l.get("region",null),u.vertical=l.get("vertical","");let d=l.get("line","auto");d==="auto"&&LO.line===-1&&(d=-1),u.line=d,u.lineAlign=l.get("lineAlign","start"),u.snapToLines=l.get("snapToLines",!0),u.size=l.get("size",100),u.align=l.get("align",NS);let f=l.get("position","auto");f==="auto"&&LO.position===50&&(f=u.align==="start"||u.align==="left"?0:u.align==="end"||u.align==="right"?100:50),u.position=f}function o(){t=t.replace(/^\s+/,"")}if(o(),e.startTime=i(),o(),t.slice(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+n);t=t.slice(3),o(),e.endTime=i(),o(),a(t,e)}function Nse(t){return t.replace(/<br(?: \/)?>/gi,`
`)}class AQe{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new hQe,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(e){const r=this;e&&(r.buffer+=r.decoder.decode(e,{stream:!0}));function n(){let a=r.buffer,o=0;for(a=Nse(a);o<a.length&&a[o]!=="\r"&&a[o]!==`
`;)++o;const c=a.slice(0,o);return a[o]==="\r"&&++o,a[o]===`
`&&++o,r.buffer=a.slice(o),c}function i(a){Cse(a,function(o,c){},/:/)}try{let a="";if(r.state==="INITIAL"){if(!/\r\n|\n/.test(r.buffer))return this;a=n();const c=a.match(/^()?WEBVTT([ \t].*)?$/);if(!(c!=null&&c[0]))throw new Error("Malformed WebVTT signature.");r.state="HEADER"}let o=!1;for(;r.buffer;){if(!/\r\n|\n/.test(r.buffer))return this;switch(o?o=!1:a=n(),r.state){case"HEADER":/:/.test(a)?i(a):a||(r.state="ID");continue;case"NOTE":a||(r.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(a)){r.state="NOTE";break}if(!a)continue;if(r.cue=new GF(0,0,""),r.state="CUE",a.indexOf("-->")===-1){r.cue.id=a;continue}case"CUE":if(!r.cue){r.state="BADCUE";continue}try{mQe(a,r.cue,r.regionList)}catch{r.cue=null,r.state="BADCUE";continue}r.state="CUETEXT";continue;case"CUETEXT":{const c=a.indexOf("-->")!==-1;if(!a||c&&(o=!0)){r.oncue&&r.cue&&r.oncue(r.cue),r.cue=null,r.state="ID";continue}if(r.cue===null)continue;r.cue.text&&(r.cue.text+=`
`),r.cue.text+=a}continue;case"BADCUE":a||(r.state="ID")}}}catch{r.state==="CUETEXT"&&r.cue&&r.oncue&&r.oncue(r.cue),r.cue=null,r.state=r.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this}flush(){const e=this;try{if((e.cue||e.state==="HEADER")&&(e.buffer+=`

`,e.parse()),e.state==="INITIAL"||e.state==="BADWEBVTT")throw new Error("Malformed WebVTT signature.")}catch(r){e.onparsingerror&&e.onparsingerror(r)}return e.onflush&&e.onflush(),this}}const pQe=/\r\n|\n\r|\n|\r/g,zI=function(e,r,n=0){return e.slice(n,n+r.length)===r},gQe=function(e){let r=parseInt(e.slice(-3));const n=parseInt(e.slice(-6,-4)),i=parseInt(e.slice(-9,-7)),a=e.length>9?parseInt(e.substring(0,e.indexOf(":"))):0;if(!Xn(r)||!Xn(n)||!Xn(i)||!Xn(a))throw Error(`Malformed X-TIMESTAMP-MAP: Local:${e}`);return r+=1e3*n,r+=60*1e3*i,r+=3600*1e3*a,r};function WF(t,e,r){return x2(t.toString())+x2(e.toString())+x2(r)}const vQe=function(e,r,n){let i=e[r],a=e[i.prevCC];if(!a||!a.new&&i.new){e.ccOffset=e.presentationOffset=i.start,i.new=!1;return}for(;(o=a)!=null&&o.new;){var o;e.ccOffset+=i.start-a.start,i.new=!1,i=a,a=e[i.prevCC]}e.presentationOffset=n};function yQe(t,e,r,n,i,a,o){const c=new AQe,u=Ef(new Uint8Array(t)).trim().replace(pQe,`
`).split(`
`),l=[],d=e?S9e(e.baseTime,e.timescale):0;let f="00:00.000",m=0,p=0,g,y=!0;c.oncue=function(x){const w=r[n];let _=r.ccOffset;const E=(m-d)/9e4;if(w!=null&&w.new&&(p!==void 0?_=r.ccOffset=w.start:vQe(r,n,E)),E){if(!e){g=new Error("Missing initPTS for VTT MPEGTS");return}_=E-r.presentationOffset}const N=x.endTime-x.startTime,C=mf((x.startTime+_-p)*9e4,i*9e4)/9e4;x.startTime=Math.max(C,0),x.endTime=Math.max(C+N,0);const I=x.text.trim();x.text=decodeURIComponent(encodeURIComponent(I)),x.id||(x.id=WF(x.startTime,x.endTime,I)),x.endTime>0&&l.push(x)},c.onparsingerror=function(x){g=x},c.onflush=function(){if(g){o(g);return}a(l)},u.forEach(x=>{if(y)if(zI(x,"X-TIMESTAMP-MAP=")){y=!1,x.slice(16).split(",").forEach(w=>{zI(w,"LOCAL:")?f=w.slice(6):zI(w,"MPEGTS:")&&(m=parseInt(w.slice(7)))});try{p=gQe(f)/1e3}catch(w){g=w}return}else x===""&&(y=!1);c.parse(x+`
`)}),c.flush()}const VI="stpp.ttml.im1t",kse=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,Lse=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,xQe={left:"start",center:"center",right:"end",start:"start",end:"end"};function TG(t,e,r,n){const i=ga(new Uint8Array(t),["mdat"]);if(i.length===0){n(new Error("Could not parse IMSC1 mdat"));return}const a=i.map(c=>Ef(c)),o=E9e(e.baseTime,1,e.timescale);try{a.forEach(c=>r(bQe(c,o)))}catch(c){n(c)}}function bQe(t,e){const i=new DOMParser().parseFromString(t,"text/xml").getElementsByTagName("tt")[0];if(!i)throw new Error("Invalid ttml");const a={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},o=Object.keys(a).reduce((f,m)=>(f[m]=i.getAttribute(`ttp:${m}`)||a[m],f),{}),c=i.getAttribute("xml:space")!=="preserve",u=CG(KI(i,"styling","style")),l=CG(KI(i,"layout","region")),d=KI(i,"body","[begin]");return[].map.call(d,f=>{const m=Ise(f,c);if(!m||!f.hasAttribute("begin"))return null;const p=WI(f.getAttribute("begin"),o),g=WI(f.getAttribute("dur"),o);let y=WI(f.getAttribute("end"),o);if(p===null)throw NG(f);if(y===null){if(g===null)throw NG(f);y=p+g}const x=new GF(p-e,y-e,m);x.id=WF(x.startTime,x.endTime,x.text);const w=l[f.getAttribute("region")],_=u[f.getAttribute("style")],E=wQe(w,_,u),{textAlign:N}=E;if(N){const C=xQe[N];C&&(x.lineAlign=C),x.align=N}return nl(x,E),x}).filter(f=>f!==null)}function KI(t,e,r){const n=t.getElementsByTagName(e)[0];return n?[].slice.call(n.querySelectorAll(r)):[]}function CG(t){return t.reduce((e,r)=>{const n=r.getAttribute("xml:id");return n&&(e[n]=r),e},{})}function Ise(t,e){return[].slice.call(t.childNodes).reduce((r,n,i)=>{var a;return n.nodeName==="br"&&i?r+`
`:(a=n.childNodes)!=null&&a.length?Ise(n,e):e?r+n.textContent.trim().replace(/\s+/g," "):r+n.textContent},"")}function wQe(t,e,r){const n="http://www.w3.org/ns/ttml#styling";let i=null;const a=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],o=t!=null&&t.hasAttribute("style")?t.getAttribute("style"):null;return o&&r.hasOwnProperty(o)&&(i=r[o]),a.reduce((c,u)=>{const l=GI(e,n,u)||GI(t,n,u)||GI(i,n,u);return l&&(c[u]=l),c},{})}function GI(t,e,r){return t&&t.hasAttributeNS(e,r)?t.getAttributeNS(e,r):null}function NG(t){return new Error(`Could not parse ttml timestamp ${t}`)}function WI(t,e){if(!t)return null;let r=Tse(t);return r===null&&(kse.test(t)?r=_Qe(t,e):Lse.test(t)&&(r=EQe(t,e))),r}function _Qe(t,e){const r=kse.exec(t),n=(r[4]|0)+(r[5]|0)/e.subFrameRate;return(r[1]|0)*3600+(r[2]|0)*60+(r[3]|0)+n/e.frameRate}function EQe(t,e){const r=Lse.exec(t),n=Number(r[1]);switch(r[2]){case"h":return n*3600;case"m":return n*60;case"ms":return n*1e3;case"f":return n/e.frameRate;case"t":return n/e.tickRate}return n}class kS{constructor(e,r){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=r}dispatchCue(){this.startTime!==null&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(e,r,n){(this.startTime===null||this.startTime>e)&&(this.startTime=e),this.endTime=r,this.screen=n,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}}class SQe{constructor(e){this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=LG(),this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},e.on(Be.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(Be.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(Be.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Be.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(Be.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(Be.FRAG_LOADING,this.onFragLoading,this),e.on(Be.FRAG_LOADED,this.onFragLoaded,this),e.on(Be.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(Be.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(Be.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(Be.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(Be.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){const{hls:e}=this;e.off(Be.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(Be.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(Be.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Be.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(Be.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(Be.FRAG_LOADING,this.onFragLoading,this),e.off(Be.FRAG_LOADED,this.onFragLoaded,this),e.off(Be.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(Be.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(Be.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(Be.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(Be.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.media=null,this.cea608Parser1=this.cea608Parser2=void 0}initCea608Parsers(){const e=new kS(this,"textTrack1"),r=new kS(this,"textTrack2"),n=new kS(this,"textTrack3"),i=new kS(this,"textTrack4");this.cea608Parser1=new jG(1,e,r),this.cea608Parser2=new jG(3,n,i)}addCues(e,r,n,i,a){let o=!1;for(let c=a.length;c--;){const u=a[c],l=jQe(u[0],u[1],r,n);if(l>=0&&(u[0]=Math.min(u[0],r),u[1]=Math.max(u[1],n),o=!0,l/(n-r)>.5))return}if(o||a.push([r,n]),this.config.renderTextTracksNatively){const c=this.captionsTracks[e];this.Cues.newCue(c,r,n,i)}else{const c=this.Cues.newCue(null,r,n,i);this.hls.trigger(Be.CUES_PARSED,{type:"captions",cues:c,track:e})}}onInitPtsFound(e,{frag:r,id:n,initPTS:i,timescale:a,trackId:o}){const{unparsedVttFrags:c}=this;n===fi.MAIN&&(this.initPTS[r.cc]={baseTime:i,timescale:a,trackId:o}),c.length&&(this.unparsedVttFrags=[],c.forEach(u=>{this.initPTS[u.frag.cc]?this.onFragLoaded(Be.FRAG_LOADED,u):this.hls.trigger(Be.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:u.frag,error:new Error("Subtitle discontinuity domain does not match main")})}))}getExistingTrack(e,r){const{media:n}=this;if(n)for(let i=0;i<n.textTracks.length;i++){const a=n.textTracks[i];if(kG(a,{name:e,lang:r,characteristics:"transcribes-spoken-dialog,describes-music-and-sound"}))return a}return null}createCaptionsTrack(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)}createNativeTrack(e){if(this.captionsTracks[e])return;const{captionsProperties:r,captionsTracks:n,media:i}=this,{label:a,languageCode:o}=r[e],c=this.getExistingTrack(a,o);if(c)n[e]=c,hb(n[e]),wse(n[e],i);else{const u=this.createTextTrack("captions",a,o);u&&(u[e]=!0,n[e]=u)}}createNonNativeTrack(e){if(this.nonNativeCaptionsTracks[e])return;const r=this.captionsProperties[e];if(!r)return;const n=r.label,i={_id:e,label:n,kind:"captions",default:r.media?!!r.media.default:!1,closedCaptions:r.media};this.nonNativeCaptionsTracks[e]=i,this.hls.trigger(Be.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[i]})}createTextTrack(e,r,n){const i=this.media;if(i)return i.addTextTrack(e,r,n)}onMediaAttaching(e,r){this.media=r.media,r.mediaSource||this._cleanTracks()}onMediaDetaching(e,r){const n=!!r.transferMedia;if(this.media=null,n)return;const{captionsTracks:i}=this;Object.keys(i).forEach(a=>{hb(i[a]),delete i[a]}),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=LG(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){const{media:e}=this;if(!e)return;const r=e.textTracks;if(r)for(let n=0;n<r.length;n++)hb(r[n])}onSubtitleTracksUpdated(e,r){const n=r.subtitleTracks||[],i=n.some(a=>a.textCodec===VI);if(this.config.enableWebVTT||i&&this.config.enableIMSC1){if(cse(this.tracks,n)){this.tracks=n;return}if(this.textTracks=[],this.tracks=n,this.config.renderTextTracksNatively){const o=this.media,c=o?yj(o.textTracks):null;if(this.tracks.forEach((u,l)=>{let d;if(c){let f=null;for(let m=0;m<c.length;m++)if(c[m]&&kG(c[m],u)){f=c[m],c[m]=null;break}f&&(d=f)}if(d)hb(d);else{const f=Bse(u);d=this.createTextTrack(f,u.name,u.lang),d&&(d.mode="disabled")}d&&this.textTracks.push(d)}),c!=null&&c.length){const u=c.filter(l=>l!==null).map(l=>l.label);u.length&&this.hls.logger.warn(`Media element contains unused subtitle tracks: ${u.join(", ")}. Replace media element for each source to clear TextTracks and captions menu.`)}}else if(this.tracks.length){const o=this.tracks.map(c=>({label:c.name,kind:c.type.toLowerCase(),default:c.default,subtitleTrack:c}));this.hls.trigger(Be.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:o})}}}onManifestLoaded(e,r){this.config.enableCEA708Captions&&r.captions&&r.captions.forEach(n=>{const i=/(?:CC|SERVICE)([1-4])/.exec(n.instreamId);if(!i)return;const a=`textTrack${i[1]}`,o=this.captionsProperties[a];o&&(o.label=n.name,n.lang&&(o.languageCode=n.lang),o.media=n)})}closedCaptionsForLevel(e){const r=this.hls.levels[e.level];return r?.attrs["CLOSED-CAPTIONS"]}onFragLoading(e,r){if(this.enabled&&r.frag.type===fi.MAIN){var n,i;const{cea608Parser1:a,cea608Parser2:o,lastSn:c}=this,{cc:u,sn:l}=r.frag,d=(n=(i=r.part)==null?void 0:i.index)!=null?n:-1;a&&o&&(l!==c+1||l===c&&d!==this.lastPartIndex+1||u!==this.lastCc)&&(a.reset(),o.reset()),this.lastCc=u,this.lastSn=l,this.lastPartIndex=d}}onFragLoaded(e,r){const{frag:n,payload:i}=r;if(n.type===fi.SUBTITLE)if(i.byteLength){const a=n.decryptdata,o="stats"in r;if(a==null||!a.encrypted||o){const c=this.tracks[n.level],u=this.vttCCs;u[n.cc]||(u[n.cc]={start:n.start,prevCC:this.prevCC,new:!0},this.prevCC=n.cc),c&&c.textCodec===VI?this._parseIMSC1(n,i):this._parseVTTs(r)}}else this.hls.trigger(Be.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:new Error("Empty subtitle payload")})}_parseIMSC1(e,r){const n=this.hls;TG(r,this.initPTS[e.cc],i=>{this._appendCues(i,e.level),n.trigger(Be.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})},i=>{n.logger.log(`Failed to parse IMSC1: ${i}`),n.trigger(Be.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:i})})}_parseVTTs(e){var r;const{frag:n,payload:i}=e,{initPTS:a,unparsedVttFrags:o}=this,c=a.length-1;if(!a[n.cc]&&c===-1){o.push(e);return}const u=this.hls,l=(r=n.initSegment)!=null&&r.data?am(n.initSegment.data,new Uint8Array(i)).buffer:i;yQe(l,this.initPTS[n.cc],this.vttCCs,n.cc,n.start,d=>{this._appendCues(d,n.level),u.trigger(Be.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:n})},d=>{const f=d.message==="Missing initPTS for VTT MPEGTS";f?o.push(e):this._fallbackToIMSC1(n,i),u.logger.log(`Failed to parse VTT cue: ${d}`),!(f&&c>n.cc)&&u.trigger(Be.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:d})})}_fallbackToIMSC1(e,r){const n=this.tracks[e.level];n.textCodec||TG(r,this.initPTS[e.cc],()=>{n.textCodec=VI,this._parseIMSC1(e,r)},()=>{n.textCodec="wvtt"})}_appendCues(e,r){const n=this.hls;if(this.config.renderTextTracksNatively){const i=this.textTracks[r];if(!i||i.mode==="disabled")return;e.forEach(a=>_se(i,a))}else{const i=this.tracks[r];if(!i)return;const a=i.default?"default":"subtitles"+r;n.trigger(Be.CUES_PARSED,{type:"subtitles",cues:e,track:a})}}onFragDecrypted(e,r){const{frag:n}=r;n.type===fi.SUBTITLE&&this.onFragLoaded(Be.FRAG_LOADED,r)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(e,r){if(!this.enabled||!this.config.enableCEA708Captions)return;const{frag:n,samples:i}=r;if(!(n.type===fi.MAIN&&this.closedCaptionsForLevel(n)==="NONE"))for(let a=0;a<i.length;a++){const o=i[a].bytes;if(o){this.cea608Parser1||this.initCea608Parsers();const c=this.extractCea608Data(o);this.cea608Parser1.addData(i[a].pts,c[0]),this.cea608Parser2.addData(i[a].pts,c[1])}}}onBufferFlushing(e,{startOffset:r,endOffset:n,endOffsetSubtitles:i,type:a}){const{media:o}=this;if(!(!o||o.currentTime<n)){if(!a||a==="video"){const{captionsTracks:c}=this;Object.keys(c).forEach(u=>kO(c[u],r,n))}if(this.config.renderTextTracksNatively&&r===0&&i!==void 0){const{textTracks:c}=this;Object.keys(c).forEach(u=>kO(c[u],r,i))}}}extractCea608Data(e){const r=[[],[]],n=e[0]&31;let i=2;for(let a=0;a<n;a++){const o=e[i++],c=127&e[i++],u=127&e[i++];if(c===0&&u===0)continue;if((4&o)!==0){const d=3&o;(d===0||d===1)&&(r[d].push(c),r[d].push(u))}}return r}}function Bse(t){return t.characteristics&&/transcribes-spoken-dialog/gi.test(t.characteristics)&&/describes-music-and-sound/gi.test(t.characteristics)?"captions":"subtitles"}function kG(t,e){return!!t&&t.kind===Bse(e)&&jO(e,t)}function jQe(t,e,r,n){return Math.min(e,n)-Math.max(t,r)}function LG(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}}}const TQe=/\s/,CQe={newCue(t,e,r,n){const i=[];let a,o,c,u,l;const d=self.VTTCue||self.TextTrackCue;for(let m=0;m<n.rows.length;m++)if(a=n.rows[m],c=!0,u=0,l="",!a.isEmpty()){var f;for(let y=0;y<a.chars.length;y++)TQe.test(a.chars[y].uchar)&&c?u++:(l+=a.chars[y].uchar,c=!1);a.cueStartTime=e,e===r&&(r+=1e-4),u>=16?u--:u++;const p=Nse(l.trim()),g=WF(e,r,p);t!=null&&(f=t.cues)!=null&&f.getCueById(g)||(o=new d(e,r,p),o.id=g,o.line=m+1,o.align="left",o.position=10+Math.min(80,Math.floor(u*8/32)*10),i.push(o))}return t&&i.length&&(i.sort((m,p)=>m.line==="auto"||p.line==="auto"?0:m.line>8&&p.line>8?p.line-m.line:m.line-p.line),i.forEach(m=>_se(t,m))),i}};function NQe(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch{}return!1}const kQe=/(\d+)-(\d+)\/(\d+)/;class IG{constructor(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=null,this.response=null,this.controller=void 0,this.context=null,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||PQe,this.controller=new self.AbortController,this.stats=new TF}destroy(){this.loader=this.callbacks=this.context=this.config=this.request=null,this.abortInternal(),this.response=null,this.fetchSetup=this.controller=this.stats=null}abortInternal(){this.controller&&!this.stats.loading.end&&(this.stats.aborted=!0,this.controller.abort())}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)}load(e,r,n){const i=this.stats;if(i.loading.start)throw new Error("Loader can only be used once.");i.loading.start=self.performance.now();const a=LQe(e,this.controller.signal),o=e.responseType==="arraybuffer",c=o?"byteLength":"length",{maxTimeToFirstByteMs:u,maxLoadTimeMs:l}=r.loadPolicy;this.context=e,this.config=r,this.callbacks=n,this.request=this.fetchSetup(e,a),self.clearTimeout(this.requestTimeout),r.timeout=u&&Xn(u)?u:l,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(i,e,this.response))},r.timeout),(m_(this.request)?this.request.then(self.fetch):self.fetch(this.request)).then(f=>{var m;this.response=this.loader=f;const p=Math.max(self.performance.now(),i.loading.start);if(self.clearTimeout(this.requestTimeout),r.timeout=l,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(i,e,this.response))},l-(p-i.loading.start)),!f.ok){const{status:y,statusText:x}=f;throw new OQe(x||"fetch, bad network response",y,f)}i.loading.first=p,i.total=BQe(f.headers)||i.total;const g=(m=this.callbacks)==null?void 0:m.onProgress;return g&&Xn(r.highWaterMark)?this.loadProgressively(f,i,e,r.highWaterMark,g):o?f.arrayBuffer():e.responseType==="json"?f.json():f.text()}).then(f=>{var m,p;const g=this.response;if(!g)throw new Error("loader destroyed");self.clearTimeout(this.requestTimeout),i.loading.end=Math.max(self.performance.now(),i.loading.first);const y=f[c];y&&(i.loaded=i.total=y);const x={url:g.url,data:f,code:g.status},w=(m=this.callbacks)==null?void 0:m.onProgress;w&&!Xn(r.highWaterMark)&&w(i,e,f,g),(p=this.callbacks)==null||p.onSuccess(x,i,e,g)}).catch(f=>{var m;if(self.clearTimeout(this.requestTimeout),i.aborted)return;const p=f&&f.code||0,g=f?f.message:null;(m=this.callbacks)==null||m.onError({code:p,text:g},e,f?f.details:null,i)})}getCacheAge(){let e=null;if(this.response){const r=this.response.headers.get("age");e=r?parseFloat(r):null}return e}getResponseHeader(e){return this.response?this.response.headers.get(e):null}loadProgressively(e,r,n,i=0,a){const o=new Qie,c=e.body.getReader(),u=()=>c.read().then(l=>{if(l.done)return o.dataLength&&a(r,n,o.flush().buffer,e),Promise.resolve(new ArrayBuffer(0));const d=l.value,f=d.length;return r.loaded+=f,f<i||o.dataLength?(o.push(d),o.dataLength>=i&&a(r,n,o.flush().buffer,e)):a(r,n,d.buffer,e),u()}).catch(()=>Promise.reject());return u()}}function LQe(t,e){const r={method:"GET",mode:"cors",credentials:"same-origin",signal:e,headers:new self.Headers(nl({},t.headers))};return t.rangeEnd&&r.headers.set("Range","bytes="+t.rangeStart+"-"+String(t.rangeEnd-1)),r}function IQe(t){const e=kQe.exec(t);if(e)return parseInt(e[2])-parseInt(e[1])+1}function BQe(t){const e=t.get("Content-Range");if(e){const n=IQe(e);if(Xn(n))return n}const r=t.get("Content-Length");if(r)return parseInt(r)}function PQe(t,e){return new self.Request(t.url,e)}class OQe extends Error{constructor(e,r,n){super(e),this.code=void 0,this.details=void 0,this.code=r,this.details=n}}const RQe=/^age:\s*[\d.]+\s*$/im;class Pse{constructor(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=null,this.loader=null,this.stats=void 0,this.xhrSetup=e&&e.xhrSetup||null,this.stats=new TF,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null,this.context=null,this.xhrSetup=null}abortInternal(){const e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,e.readyState!==4&&(this.stats.aborted=!0,e.abort()))}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(e,r,n){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=r,this.callbacks=n,this.loadInternal()}loadInternal(){const{config:e,context:r}=this;if(!e||!r)return;const n=this.loader=new self.XMLHttpRequest,i=this.stats;i.loading.first=0,i.loaded=0,i.aborted=!1;const a=this.xhrSetup;a?Promise.resolve().then(()=>{if(!(this.loader!==n||this.stats.aborted))return a(n,r.url)}).catch(o=>{if(!(this.loader!==n||this.stats.aborted))return n.open("GET",r.url,!0),a(n,r.url)}).then(()=>{this.loader!==n||this.stats.aborted||this.openAndSendXhr(n,r,e)}).catch(o=>{var c;(c=this.callbacks)==null||c.onError({code:n.status,text:o.message},r,n,i)}):this.openAndSendXhr(n,r,e)}openAndSendXhr(e,r,n){e.readyState||e.open("GET",r.url,!0);const i=r.headers,{maxTimeToFirstByteMs:a,maxLoadTimeMs:o}=n.loadPolicy;if(i)for(const c in i)e.setRequestHeader(c,i[c]);r.rangeEnd&&e.setRequestHeader("Range","bytes="+r.rangeStart+"-"+(r.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=r.responseType,self.clearTimeout(this.requestTimeout),n.timeout=a&&Xn(a)?a:o,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),n.timeout),e.send()}readystatechange(){const{context:e,loader:r,stats:n}=this;if(!e||!r)return;const i=r.readyState,a=this.config;if(!n.aborted&&i>=2&&(n.loading.first===0&&(n.loading.first=Math.max(self.performance.now(),n.loading.start),a.timeout!==a.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),a.timeout=a.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),a.loadPolicy.maxLoadTimeMs-(n.loading.first-n.loading.start)))),i===4)){self.clearTimeout(this.requestTimeout),r.onreadystatechange=null,r.onprogress=null;const l=r.status,d=r.responseType==="text"?r.responseText:null;if(l>=200&&l<300){const g=d??r.response;if(g!=null){var o,c;n.loading.end=Math.max(self.performance.now(),n.loading.first);const y=r.responseType==="arraybuffer"?g.byteLength:g.length;n.loaded=n.total=y,n.bwEstimate=n.total*8e3/(n.loading.end-n.loading.first);const x=(o=this.callbacks)==null?void 0:o.onProgress;x&&x(n,e,g,r);const w={url:r.responseURL,data:g,code:l};(c=this.callbacks)==null||c.onSuccess(w,n,e,r);return}}const f=a.loadPolicy.errorRetry,m=n.retry,p={url:e.url,data:void 0,code:l};if(aN(f,m,!1,p))this.retry(f);else{var u;Ho.error(`${l} while loading ${e.url}`),(u=this.callbacks)==null||u.onError({code:l,text:r.statusText},e,r,n)}}}loadtimeout(){if(!this.config)return;const e=this.config.loadPolicy.timeoutRetry,r=this.stats.retry;if(aN(e,r,!0))this.retry(e);else{var n;Ho.warn(`timeout while loading ${(n=this.context)==null?void 0:n.url}`);const i=this.callbacks;i&&(this.abortInternal(),i.onTimeout(this.stats,this.context,this.loader))}}retry(e){const{context:r,stats:n}=this;this.retryDelay=LF(e,n.retry),n.retry++,Ho.warn(`${status?"HTTP Status "+status:"Timeout"} while loading ${r?.url}, retrying ${n.retry}/${e.maxNumRetry} in ${this.retryDelay}ms`),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(e){const r=this.stats;r.loaded=e.loaded,e.lengthComputable&&(r.total=e.total)}getCacheAge(){let e=null;if(this.loader&&RQe.test(this.loader.getAllResponseHeaders())){const r=this.loader.getResponseHeader("age");e=r?parseFloat(r):null}return e}getResponseHeader(e){return this.loader&&new RegExp(`^${e}:\\s*[\\d.]+\\s*$`,"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(e):null}}const DQe={maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null},MQe=Uo(Uo({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,maxDevicePixelRatio:Number.POSITIVE_INFINITY,preferManagedMediaSource:!0,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,frontBufferFlushThreshold:1/0,startOnSegmentBoundary:!1,maxBufferSize:60*1e3*1e3,maxFragLookUpTolerance:.25,maxBufferHole:.1,detectStallWithCurrentTimeMs:1250,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,nudgeOnVideoHole:!0,liveSyncMode:"edge",liveSyncDurationCount:3,liveSyncOnStallIncrease:1,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,ignorePlaylistParsingErrors:!1,loader:Pse,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:q7e,bufferController:U9e,capLevelController:Y5,errorController:t$e,fpsController:$He,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrEwmaDefaultEstimateMax:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:Iie,requireKeySystemAccessOnStart:!1,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableEmsgKLVMetadata:!1,enableID3MetadataCues:!0,enableInterstitialPlayback:!0,interstitialAppendInPlace:!0,interstitialLiveLookAhead:10,useMediaCapabilities:!0,preserveManualLevelOnError:!1,certLoadPolicy:{default:DQe},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},interstitialAssetListLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:3e4,timeoutRetry:{maxNumRetry:0,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:0,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},FQe()),{},{subtitleStreamController:JHe,subtitleTrackController:zHe,timelineController:SQe,audioStreamController:R9e,audioTrackController:D9e,emeController:jb,cmcdController:DHe,contentSteeringController:FHe,interstitialsController:ZHe});function FQe(){return{cueHandler:CQe,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}function UQe(t,e,r){if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(e.liveMaxLatencyDurationCount!==void 0&&(e.liveSyncDurationCount===void 0||e.liveMaxLatencyDurationCount<=e.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(e.liveMaxLatencyDuration!==void 0&&(e.liveSyncDuration===void 0||e.liveMaxLatencyDuration<=e.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');const n=IO(t),i=["manifest","level","frag"],a=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return i.forEach(o=>{const c=`${o==="level"?"playlist":o}LoadPolicy`,u=e[c]===void 0,l=[];a.forEach(d=>{const f=`${o}Loading${d}`,m=e[f];if(m!==void 0&&u){l.push(f);const p=n[c].default;switch(e[c]={default:p},d){case"TimeOut":p.maxLoadTimeMs=m,p.maxTimeToFirstByteMs=m;break;case"MaxRetry":p.errorRetry.maxNumRetry=m,p.timeoutRetry.maxNumRetry=m;break;case"RetryDelay":p.errorRetry.retryDelayMs=m,p.timeoutRetry.retryDelayMs=m;break;case"MaxRetryTimeout":p.errorRetry.maxRetryDelayMs=m,p.timeoutRetry.maxRetryDelayMs=m;break}}}),l.length&&r.warn(`hls.js config: "${l.join('", "')}" setting(s) are deprecated, use "${c}": ${fl(e[c])}`)}),Uo(Uo({},n),e)}function IO(t){return t&&typeof t=="object"?Array.isArray(t)?t.map(IO):Object.keys(t).reduce((e,r)=>(e[r]=IO(t[r]),e),{}):t}function $Qe(t,e){const r=t.loader;r!==IG&&r!==Pse?(e.log("[config]: Custom loader detected, cannot enable progressive streaming"),t.progressive=!1):NQe()&&(t.loader=IG,t.progressive=!0,t.enableSoftwareAES=!0,e.log("[config]: Progressive streaming enabled, using FetchLoader"))}const xj=2,HQe=.1,QQe=.05,zQe=100;class VQe extends Tie{constructor(e,r){super("gap-controller",e.logger),this.hls=void 0,this.fragmentTracker=void 0,this.media=null,this.mediaSource=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.buffered={},this.lastCurrentTime=0,this.ended=0,this.waiting=0,this.onMediaPlaying=()=>{this.ended=0,this.waiting=0},this.onMediaWaiting=()=>{var n;(n=this.media)!=null&&n.seeking||(this.waiting=self.performance.now(),this.tick())},this.onMediaEnded=()=>{if(this.hls){var n;this.ended=((n=this.media)==null?void 0:n.currentTime)||1,this.hls.trigger(Be.MEDIA_ENDED,{stalled:!1})}},this.hls=e,this.fragmentTracker=r,this.registerListeners()}registerListeners(){const{hls:e}=this;e&&(e.on(Be.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(Be.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(Be.BUFFER_APPENDED,this.onBufferAppended,this))}unregisterListeners(){const{hls:e}=this;e&&(e.off(Be.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(Be.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(Be.BUFFER_APPENDED,this.onBufferAppended,this))}destroy(){super.destroy(),this.unregisterListeners(),this.media=this.hls=this.fragmentTracker=null,this.mediaSource=void 0}onMediaAttached(e,r){this.setInterval(zQe),this.mediaSource=r.mediaSource;const n=this.media=r.media;xh(n,"playing",this.onMediaPlaying),xh(n,"waiting",this.onMediaWaiting),xh(n,"ended",this.onMediaEnded)}onMediaDetaching(e,r){this.clearInterval();const{media:n}=this;n&&(Qh(n,"playing",this.onMediaPlaying),Qh(n,"waiting",this.onMediaWaiting),Qh(n,"ended",this.onMediaEnded),this.media=null),this.mediaSource=void 0}onBufferAppended(e,r){this.buffered=r.timeRanges}get hasBuffered(){return Object.keys(this.buffered).length>0}tick(){var e;if(!((e=this.media)!=null&&e.readyState)||!this.hasBuffered)return;const r=this.media.currentTime;this.poll(r,this.lastCurrentTime),this.lastCurrentTime=r}poll(e,r){var n,i;const a=(n=this.hls)==null?void 0:n.config;if(!a)return;const o=this.media;if(!o)return;const{seeking:c}=o,u=this.seeking&&!c,l=!this.seeking&&c,d=o.paused&&!c||o.ended||o.playbackRate===0;if(this.seeking=c,e!==r){r&&(this.ended=0),this.moved=!0,c||(this.nudgeRetry=0,a.nudgeOnVideoHole&&!d&&e>r&&this.nudgeOnVideoHole(e,r)),this.waiting===0&&this.stallResolved(e);return}if(l||u){u&&this.stallResolved(e);return}if(d){this.nudgeRetry=0,this.stallResolved(e),!this.ended&&o.ended&&this.hls&&(this.ended=e||1,this.hls.trigger(Be.MEDIA_ENDED,{stalled:!1}));return}if(!Hs.getBuffered(o).length){this.nudgeRetry=0;return}const f=Hs.bufferInfo(o,e,0),m=f.nextStart||0,p=this.fragmentTracker;if(c&&p&&this.hls){const I=BG(this.hls.inFlightFragments,e),D=f.len>xj,U=!m||I||m-e>xj&&!p.getPartialFragment(e);if(D||U)return;this.moved=!1}const g=(i=this.hls)==null?void 0:i.latestLevelDetails;if(!this.moved&&this.stalled!==null&&p){if(!(f.len>0)&&!m)return;const D=Math.max(m,f.start||0)-e,G=!!(g!=null&&g.live)?g.targetduration*2:xj,q=LS(e,p);if(D>0&&(D<=G||q)){o.paused||this._trySkipBufferHole(q);return}}const y=a.detectStallWithCurrentTimeMs,x=self.performance.now(),w=this.waiting;let _=this.stalled;if(_===null)if(w>0&&x-w<y)_=this.stalled=w;else{this.stalled=x;return}const E=x-_;if(!c&&(E>=y||w)&&this.hls){var N;if(((N=this.mediaSource)==null?void 0:N.readyState)==="ended"&&!(g!=null&&g.live)&&Math.abs(e-(g?.edge||0))<1){if(this.ended)return;this.ended=e||1,this.hls.trigger(Be.MEDIA_ENDED,{stalled:!0});return}if(this._reportStall(f),!this.media||!this.hls)return}const C=Hs.bufferInfo(o,e,a.maxBufferHole);this._tryFixBufferStall(C,E,e)}stallResolved(e){const r=this.stalled;if(r&&this.hls&&(this.stalled=null,this.stallReported)){const n=self.performance.now()-r;this.log(`playback not stuck anymore @${e}, after ${Math.round(n)}ms`),this.stallReported=!1,this.waiting=0,this.hls.trigger(Be.STALL_RESOLVED,{})}}nudgeOnVideoHole(e,r){var n;const i=this.buffered.video;if(this.hls&&this.media&&this.fragmentTracker&&(n=this.buffered.audio)!=null&&n.length&&i&&i.length>1&&e>i.end(0)){const a=Hs.bufferedInfo(Hs.timeRangesToArray(this.buffered.audio),e,0);if(a.len>1&&r>=a.start){const o=Hs.timeRangesToArray(i),c=Hs.bufferedInfo(o,r,0).bufferedIndex;if(c>-1&&c<o.length-1){const u=Hs.bufferedInfo(o,e,0).bufferedIndex,l=o[c].end,d=o[c+1].start;if((u===-1||u>c)&&d-l<1&&e-l<2){const f=new Error(`nudging playhead to flush pipeline after video hole. currentTime: ${e} hole: ${l} -> ${d} buffered index: ${u}`);this.warn(f.message),this.media.currentTime+=1e-6;let m=LS(e,this.fragmentTracker);m&&"fragment"in m?m=m.fragment:m||(m=void 0);const p=Hs.bufferInfo(this.media,e,0);this.hls.trigger(Be.ERROR,{type:Oi.MEDIA_ERROR,details:br.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:f,reason:f.message,frag:m,buffer:p.len,bufferInfo:p})}}}}}_tryFixBufferStall(e,r,n){var i,a;const{fragmentTracker:o,media:c}=this,u=(i=this.hls)==null?void 0:i.config;if(!c||!o||!u)return;const l=(a=this.hls)==null?void 0:a.latestLevelDetails,d=LS(n,o);if((d||l!=null&&l.live&&n<l.fragmentStart)&&(this._trySkipBufferHole(d)||!this.media))return;const f=e.buffered,m=this.adjacentTraversal(e,n);(f&&f.length>1&&e.len>u.maxBufferHole||e.nextStart&&(e.nextStart-n<u.maxBufferHole||m))&&(r>u.highBufferWatchdogPeriod*1e3||this.waiting)&&(this.warn("Trying to nudge playhead over buffer-hole"),this._tryNudgeBuffer(e))}adjacentTraversal(e,r){const n=this.fragmentTracker,i=e.nextStart;if(n&&i){const a=n.getFragAtPos(r,fi.MAIN),o=n.getFragAtPos(i,fi.MAIN);if(a&&o)return o.sn-a.sn<2}return!1}_reportStall(e){const{hls:r,media:n,stallReported:i,stalled:a}=this;if(!i&&a!==null&&n&&r){this.stallReported=!0;const o=new Error(`Playback stalling at @${n.currentTime} due to low buffer (${fl(e)})`);this.warn(o.message),r.trigger(Be.ERROR,{type:Oi.MEDIA_ERROR,details:br.BUFFER_STALLED_ERROR,fatal:!1,error:o,buffer:e.len,bufferInfo:e,stalled:{start:a}})}}_trySkipBufferHole(e){var r;const{fragmentTracker:n,media:i}=this,a=(r=this.hls)==null?void 0:r.config;if(!i||!n||!a)return 0;const o=i.currentTime,c=Hs.bufferInfo(i,o,0),u=o<c.start?c.start:c.nextStart;if(u&&this.hls){const d=c.len<=a.maxBufferHole,f=c.len>0&&c.len<1&&i.readyState<3,m=u-o;if(m>0&&(d||f)){if(m>a.maxBufferHole){let g=!1;if(o===0){const y=n.getAppendedFrag(0,fi.MAIN);y&&u<y.end&&(g=!0)}if(!g&&e){var l;if(!((l=this.hls.loadLevelObj)!=null&&l.details)||BG(this.hls.inFlightFragments,u))return 0;let x=!1,w=e.end;for(;w<u;){const _=LS(w,n);if(_)w+=_.duration;else{x=!0;break}}if(x)return 0}}const p=Math.max(u+QQe,o+HQe);if(this.warn(`skipping hole, adjusting currentTime from ${o} to ${p}`),this.moved=!0,i.currentTime=p,!(e!=null&&e.gap)){const g=new Error(`fragment loaded with buffer holes, seeking from ${o} to ${p}`),y={type:Oi.MEDIA_ERROR,details:br.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:g,reason:g.message,buffer:c.len,bufferInfo:c};e&&("fragment"in e?y.part=e:y.frag=e),this.hls.trigger(Be.ERROR,y)}return p}}return 0}_tryNudgeBuffer(e){const{hls:r,media:n,nudgeRetry:i}=this,a=r?.config;if(!n||!a)return 0;const o=n.currentTime;if(this.nudgeRetry++,i<a.nudgeMaxRetry){const c=o+(i+1)*a.nudgeOffset,u=new Error(`Nudging 'currentTime' from ${o} to ${c}`);this.warn(u.message),n.currentTime=c,r.trigger(Be.ERROR,{type:Oi.MEDIA_ERROR,details:br.BUFFER_NUDGE_ON_STALL,error:u,fatal:!1,buffer:e.len,bufferInfo:e})}else{const c=new Error(`Playhead still not moving while enough data buffered @${o} after ${a.nudgeMaxRetry} nudges`);this.error(c.message),r.trigger(Be.ERROR,{type:Oi.MEDIA_ERROR,details:br.BUFFER_STALLED_ERROR,error:c,fatal:!0,buffer:e.len,bufferInfo:e})}}}function BG(t,e){const r=PG(t.main);if(r&&r.start<=e)return r;const n=PG(t.audio);return n&&n.start<=e?n:null}function PG(t){if(!t)return null;switch(t.state){case qr.IDLE:case qr.STOPPED:case qr.ENDED:case qr.ERROR:return null}return t.frag}function LS(t,e){return e.getAppendedFrag(t,fi.MAIN)||e.getPartialFragment(t)}const KQe=.25;function BO(){if(!(typeof self>"u"))return self.VTTCue||self.TextTrackCue}function YI(t,e,r,n,i){let a=new t(e,r,"");try{a.value=n,i&&(a.type=i)}catch{a=new t(e,r,fl(i?Uo({type:i},n):n))}return a}const IS=(()=>{const t=BO();try{t&&new t(0,Number.POSITIVE_INFINITY,"")}catch{return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})();class GQe{constructor(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.removeCues=!0,this.assetCue=void 0,this.onEventCueEnter=()=>{this.hls&&this.hls.trigger(Be.EVENT_CUE_ENTER,{})},this.hls=e,this._registerListeners()}destroy(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=this.onEventCueEnter=null}_registerListeners(){const{hls:e}=this;e&&(e.on(Be.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(Be.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(Be.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(Be.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Be.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(Be.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(Be.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(Be.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this))}_unregisterListeners(){const{hls:e}=this;e&&(e.off(Be.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(Be.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(Be.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(Be.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Be.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(Be.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(Be.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(Be.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this))}onMediaAttaching(e,r){var n;this.media=r.media,((n=r.overrides)==null?void 0:n.cueRemoval)===!1&&(this.removeCues=!1)}onMediaAttached(){var e;const r=(e=this.hls)==null?void 0:e.latestLevelDetails;r&&this.updateDateRangeCues(r)}onMediaDetaching(e,r){this.media=null,!r.transferMedia&&(this.id3Track&&(this.removeCues&&hb(this.id3Track,this.onEventCueEnter),this.id3Track=null),this.dateRangeCuesAppended={})}onManifestLoading(){this.dateRangeCuesAppended={}}createTrack(e){const r=this.getID3Track(e.textTracks);return r.mode="hidden",r}getID3Track(e){if(this.media){for(let r=0;r<e.length;r++){const n=e[r];if(n.kind==="metadata"&&n.label==="id3")return wse(n,this.media),n}return this.media.addTextTrack("metadata","id3")}}onFragParsingMetadata(e,r){if(!this.media||!this.hls)return;const{enableEmsgMetadataCues:n,enableID3MetadataCues:i}=this.hls.config;if(!n&&!i)return;const{samples:a}=r;this.id3Track||(this.id3Track=this.createTrack(this.media));const o=BO();if(o)for(let c=0;c<a.length;c++){const u=a[c].type;if(u===gf.emsg&&!n||!i)continue;const l=qie(a[c].data),d=a[c].pts;let f=d+a[c].duration;f>IS&&(f=IS),f-d<=0&&(f=d+KQe);for(let p=0;p<l.length;p++){const g=l[p];if(!Xie(g)){this.updateId3CueEnds(d,u);const y=YI(o,d,f,g,u);y&&this.id3Track.addCue(y)}}}}updateId3CueEnds(e,r){var n;const i=(n=this.id3Track)==null?void 0:n.cues;if(i)for(let a=i.length;a--;){const o=i[a];o.type===r&&o.startTime<e&&o.endTime===IS&&(o.endTime=e)}}onBufferFlushing(e,{startOffset:r,endOffset:n,type:i}){const{id3Track:a,hls:o}=this;if(!o)return;const{config:{enableEmsgMetadataCues:c,enableID3MetadataCues:u}}=o;if(a&&(c||u)){let l;i==="audio"?l=d=>d.type===gf.audioId3&&u:i==="video"?l=d=>d.type===gf.emsg&&c:l=d=>d.type===gf.audioId3&&u||d.type===gf.emsg&&c,kO(a,r,n,l)}}onLevelUpdated(e,{details:r}){this.updateDateRangeCues(r,!0)}onLevelPtsUpdated(e,r){Math.abs(r.drift)>.01&&this.updateDateRangeCues(r.details)}updateDateRangeCues(e,r){if(!this.hls||!this.media)return;const{assetPlayerId:n,timelineOffset:i,enableDateRangeMetadataCues:a,interstitialsController:o}=this.hls.config;if(!a)return;const c=BO();if(n&&i&&!o){const{fragmentStart:y,fragmentEnd:x}=e;let w=this.assetCue;w?(w.startTime=y,w.endTime=x):c&&(w=this.assetCue=YI(c,y,x,{assetPlayerId:this.hls.config.assetPlayerId},"hlsjs.interstitial.asset"),w&&(w.id=n,this.id3Track||(this.id3Track=this.createTrack(this.media)),this.id3Track.addCue(w),w.addEventListener("enter",this.onEventCueEnter)))}if(!e.hasProgramDateTime)return;const{id3Track:u}=this,{dateRanges:l}=e,d=Object.keys(l);let f=this.dateRangeCuesAppended;if(u&&r){var m;if((m=u.cues)!=null&&m.length){const y=Object.keys(f).filter(x=>!d.includes(x));for(let x=y.length;x--;){var p;const w=y[x],_=(p=f[w])==null?void 0:p.cues;delete f[w],_&&Object.keys(_).forEach(E=>{const N=_[E];if(N){N.removeEventListener("enter",this.onEventCueEnter);try{u.removeCue(N)}catch{}}})}}else f=this.dateRangeCuesAppended={}}const g=e.fragments[e.fragments.length-1];if(!(d.length===0||!Xn(g?.programDateTime))){this.id3Track||(this.id3Track=this.createTrack(this.media));for(let y=0;y<d.length;y++){const x=d[y],w=l[x],_=w.startTime,E=f[x],N=E?.cues||{};let C=E?.durationKnown||!1,I=IS;const{duration:D,endDate:U}=w;if(U&&D!==null)I=_+D,C=!0;else if(w.endOnNext&&!C){const q=d.reduce((J,de)=>{if(de!==w.id){const xe=l[de];if(xe.class===w.class&&xe.startDate>w.startDate&&(!J||w.startDate<J.startDate))return xe}return J},null);q&&(I=q.startTime,C=!0)}const G=Object.keys(w.attr);for(let q=0;q<G.length;q++){const J=G[q];if(!m$e(J))continue;const de=N[J];if(de)C&&!(E!=null&&E.durationKnown)?de.endTime=I:Math.abs(de.startTime-_)>.01&&(de.startTime=_,de.endTime=I);else if(c){let xe=w.attr[J];A$e(J)&&(xe=oie(xe));const ve=YI(c,_,I,{key:J,data:xe},gf.dateRange);ve&&(ve.id=x,this.id3Track.addCue(ve),N[J]=ve,o&&(J==="X-ASSET-LIST"||J==="X-ASSET-URL")&&ve.addEventListener("enter",this.onEventCueEnter))}}f[x]={cues:N,dateRange:w,durationKnown:C}}}}}class WQe{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.currentTime=0,this.stallCount=0,this._latency=null,this._targetLatencyUpdated=!1,this.onTimeupdate=()=>{const{media:r}=this,n=this.levelDetails;if(!r||!n)return;this.currentTime=r.currentTime;const i=this.computeLatency();if(i===null)return;this._latency=i;const{lowLatencyMode:a,maxLiveSyncPlaybackRate:o}=this.config;if(!a||o===1||!n.live)return;const c=this.targetLatency;if(c===null)return;const u=i-c,l=Math.min(this.maxLatency,c+n.targetduration);if(u<l&&u>.05&&this.forwardBufferLength>1){const f=Math.min(2,Math.max(1,o)),m=Math.round(2/(1+Math.exp(-.75*u-this.edgeStalled))*20)/20,p=Math.min(f,Math.max(1,m));this.changeMediaPlaybackRate(r,p)}else r.playbackRate!==1&&r.playbackRate!==0&&this.changeMediaPlaybackRate(r,1)},this.hls=e,this.config=e.config,this.registerListeners()}get levelDetails(){var e;return((e=this.hls)==null?void 0:e.latestLevelDetails)||null}get latency(){return this._latency||0}get maxLatency(){const{config:e}=this;if(e.liveMaxLatencyDuration!==void 0)return e.liveMaxLatencyDuration;const r=this.levelDetails;return r?e.liveMaxLatencyDurationCount*r.targetduration:0}get targetLatency(){const e=this.levelDetails;if(e===null||this.hls===null)return null;const{holdBack:r,partHoldBack:n,targetduration:i}=e,{liveSyncDuration:a,liveSyncDurationCount:o,lowLatencyMode:c}=this.config,u=this.hls.userConfig;let l=c&&n||r;(this._targetLatencyUpdated||u.liveSyncDuration||u.liveSyncDurationCount||l===0)&&(l=a!==void 0?a:o*i);const d=i;return l+Math.min(this.stallCount*this.config.liveSyncOnStallIncrease,d)}set targetLatency(e){this.stallCount=0,this.config.liveSyncDuration=e,this._targetLatencyUpdated=!0}get liveSyncPosition(){const e=this.estimateLiveEdge(),r=this.targetLatency;if(e===null||r===null)return null;const n=this.levelDetails;if(n===null)return null;const i=n.edge,a=e-r-this.edgeStalled,o=i-n.totalduration,c=i-(this.config.lowLatencyMode&&n.partTarget||n.targetduration);return Math.min(Math.max(o,a),c)}get drift(){const e=this.levelDetails;return e===null?1:e.drift}get edgeStalled(){const e=this.levelDetails;if(e===null)return 0;const r=(this.config.lowLatencyMode&&e.partTarget||e.targetduration)*3;return Math.max(e.age-r,0)}get forwardBufferLength(){const{media:e}=this,r=this.levelDetails;if(!e||!r)return 0;const n=e.buffered.length;return(n?e.buffered.end(n-1):r.edge)-this.currentTime}destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.hls=null}registerListeners(){const{hls:e}=this;e&&(e.on(Be.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(Be.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(Be.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Be.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(Be.ERROR,this.onError,this))}unregisterListeners(){const{hls:e}=this;e&&(e.off(Be.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(Be.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(Be.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Be.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(Be.ERROR,this.onError,this))}onMediaAttached(e,r){this.media=r.media,this.media.addEventListener("timeupdate",this.onTimeupdate)}onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.onTimeupdate),this.media=null)}onManifestLoading(){this._latency=null,this.stallCount=0}onLevelUpdated(e,{details:r}){r.advanced&&this.onTimeupdate(),!r.live&&this.media&&this.media.removeEventListener("timeupdate",this.onTimeupdate)}onError(e,r){var n;r.details===br.BUFFER_STALLED_ERROR&&(this.stallCount++,this.hls&&(n=this.levelDetails)!=null&&n.live&&this.hls.logger.warn("[latency-controller]: Stall detected, adjusting target latency"))}changeMediaPlaybackRate(e,r){var n,i;e.playbackRate!==r&&((n=this.hls)==null||n.logger.debug(`[latency-controller]: latency=${this.latency.toFixed(3)}, targetLatency=${(i=this.targetLatency)==null?void 0:i.toFixed(3)}, forwardBufferLength=${this.forwardBufferLength.toFixed(3)}: adjusting playback rate from ${e.playbackRate} to ${r}`),e.playbackRate=r)}estimateLiveEdge(){const e=this.levelDetails;return e===null?null:e.edge+e.age}computeLatency(){const e=this.estimateLiveEdge();return e===null?null:e-this.currentTime}}class YQe extends zF{constructor(e,r){super(e,"level-controller"),this._levels=[],this._firstLevel=-1,this._maxAutoLevel=-1,this._startLevel=void 0,this.currentLevel=null,this.currentLevelIndex=-1,this.manualLevelIndex=-1,this.steering=void 0,this.onParsedComplete=void 0,this.steering=r,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(Be.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Be.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(Be.LEVEL_LOADED,this.onLevelLoaded,this),e.on(Be.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(Be.FRAG_BUFFERED,this.onFragBuffered,this),e.on(Be.ERROR,this.onError,this)}_unregisterListeners(){const{hls:e}=this;e.off(Be.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Be.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(Be.LEVEL_LOADED,this.onLevelLoaded,this),e.off(Be.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(Be.FRAG_BUFFERED,this.onFragBuffered,this),e.off(Be.ERROR,this.onError,this)}destroy(){this._unregisterListeners(),this.steering=null,this.resetLevels(),super.destroy()}stopLoad(){this._levels.forEach(r=>{r.loadError=0,r.fragmentError=0}),super.stopLoad()}resetLevels(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[],this._maxAutoLevel=-1}onManifestLoading(e,r){this.resetLevels()}onManifestLoaded(e,r){const n=this.hls.config.preferManagedMediaSource,i=[],a={},o={};let c=!1,u=!1,l=!1;r.levels.forEach(d=>{const f=d.attrs;let{audioCodec:m,videoCodec:p}=d;m&&(d.audioCodec=m=rN(m,n)||void 0),p&&(p=d.videoCodec=L7e(p));const{width:g,height:y,unknownCodecs:x}=d,w=x?.length||0;if(c||(c=!!(g&&y)),u||(u=!!p),l||(l=!!m),w||m&&!this.isAudioSupported(m)||p&&!this.isVideoSupported(p)){this.log(`Some or all CODECS not supported "${f.CODECS}"`);return}const{CODECS:_,"FRAME-RATE":E,"HDCP-LEVEL":N,"PATHWAY-ID":C,RESOLUTION:I,"VIDEO-RANGE":D}=f,G=`${`${C||"."}-`}${d.bitrate}-${I}-${E}-${_}-${D}-${N}`;if(a[G])if(a[G].uri!==d.url&&!d.attrs["PATHWAY-ID"]){const q=o[G]+=1;d.attrs["PATHWAY-ID"]=new Array(q+1).join(".");const J=this.createLevel(d);a[G]=J,i.push(J)}else a[G].addGroupId("audio",f.AUDIO),a[G].addGroupId("text",f.SUBTITLES);else{const q=this.createLevel(d);a[G]=q,o[G]=1,i.push(q)}}),this.filterAndSortMediaOptions(i,r,c,u,l)}createLevel(e){const r=new d_(e),n=e.supplemental;if(n!=null&&n.videoCodec&&!this.isVideoSupported(n.videoCodec)){const i=new Error(`SUPPLEMENTAL-CODECS not supported "${n.videoCodec}"`);this.log(i.message),r.supportedResult=yie(i,[])}return r}isAudioSupported(e){return c_(e,"audio",this.hls.config.preferManagedMediaSource)}isVideoSupported(e){return c_(e,"video",this.hls.config.preferManagedMediaSource)}filterAndSortMediaOptions(e,r,n,i,a){var o;let c=[],u=[],l=e;const d=((o=r.stats)==null?void 0:o.parsing)||{};if((n||i)&&a&&(l=l.filter(({videoCodec:_,videoRange:E,width:N,height:C})=>(!!_||!!(N&&C))&&$7e(E))),l.length===0){Promise.resolve().then(()=>{if(this.hls){let _="no level with compatible codecs found in manifest",E=_;r.levels.length&&(E=`one or more CODECS in variant not supported: ${fl(r.levels.map(C=>C.attrs.CODECS).filter((C,I,D)=>D.indexOf(C)===I))}`,this.warn(E),_+=` (${E})`);const N=new Error(_);this.hls.trigger(Be.ERROR,{type:Oi.MEDIA_ERROR,details:br.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:r.url,error:N,reason:E})}}),d.end=performance.now();return}r.audioTracks&&(c=r.audioTracks.filter(_=>!_.audioCodec||this.isAudioSupported(_.audioCodec)),OG(c)),r.subtitles&&(u=r.subtitles,OG(u));const f=l.slice(0);l.sort((_,E)=>{if(_.attrs["HDCP-LEVEL"]!==E.attrs["HDCP-LEVEL"])return(_.attrs["HDCP-LEVEL"]||"")>(E.attrs["HDCP-LEVEL"]||"")?1:-1;if(n&&_.height!==E.height)return _.height-E.height;if(_.frameRate!==E.frameRate)return _.frameRate-E.frameRate;if(_.videoRange!==E.videoRange)return nN.indexOf(_.videoRange)-nN.indexOf(E.videoRange);if(_.videoCodec!==E.videoCodec){const N=jK(_.videoCodec),C=jK(E.videoCodec);if(N!==C)return C-N}if(_.uri===E.uri&&_.codecSet!==E.codecSet){const N=tN(_.codecSet),C=tN(E.codecSet);if(N!==C)return C-N}return _.averageBitrate!==E.averageBitrate?_.averageBitrate-E.averageBitrate:0});let m=f[0];if(this.steering&&(l=this.steering.filterParsedLevels(l),l.length!==f.length)){for(let _=0;_<f.length;_++)if(f[_].pathwayId===l[0].pathwayId){m=f[_];break}}this._levels=l;for(let _=0;_<l.length;_++)if(l[_]===m){var p;this._firstLevel=_;const E=m.bitrate,N=this.hls.bandwidthEstimate;if(this.log(`manifest loaded, ${l.length} level(s) found, first bitrate: ${E}`),((p=this.hls.userConfig)==null?void 0:p.abrEwmaDefaultEstimate)===void 0){const C=Math.min(E,this.hls.config.abrEwmaDefaultEstimateMax);C>N&&N===this.hls.abrEwmaDefaultEstimate&&(this.hls.bandwidthEstimate=C)}break}const g=a&&!i,y=this.hls.config,x=!!(y.audioStreamController&&y.audioTrackController),w={levels:l,audioTracks:c,subtitleTracks:u,sessionData:r.sessionData,sessionKeys:r.sessionKeys,firstLevel:this._firstLevel,stats:r.stats,audio:a,video:i,altAudio:x&&!g&&c.some(_=>!!_.url)};d.end=performance.now(),this.hls.trigger(Be.MANIFEST_PARSED,w)}get levels(){return this._levels.length===0?null:this._levels}get loadLevelObj(){return this.currentLevel}get level(){return this.currentLevelIndex}set level(e){const r=this._levels;if(r.length===0)return;if(e<0||e>=r.length){const d=new Error("invalid level idx"),f=e<0;if(this.hls.trigger(Be.ERROR,{type:Oi.OTHER_ERROR,details:br.LEVEL_SWITCH_ERROR,level:e,fatal:f,error:d,reason:d.message}),f)return;e=Math.min(e,r.length-1)}const n=this.currentLevelIndex,i=this.currentLevel,a=i?i.attrs["PATHWAY-ID"]:void 0,o=r[e],c=o.attrs["PATHWAY-ID"];if(this.currentLevelIndex=e,this.currentLevel=o,n===e&&i&&a===c)return;this.log(`Switching to level ${e} (${o.height?o.height+"p ":""}${o.videoRange?o.videoRange+" ":""}${o.codecSet?o.codecSet+" ":""}@${o.bitrate})${c?" with Pathway "+c:""} from level ${n}${a?" with Pathway "+a:""}`);const u={level:e,attrs:o.attrs,details:o.details,bitrate:o.bitrate,averageBitrate:o.averageBitrate,maxBitrate:o.maxBitrate,realBitrate:o.realBitrate,width:o.width,height:o.height,codecSet:o.codecSet,audioCodec:o.audioCodec,videoCodec:o.videoCodec,audioGroups:o.audioGroups,subtitleGroups:o.subtitleGroups,loaded:o.loaded,loadError:o.loadError,fragmentError:o.fragmentError,name:o.name,id:o.id,uri:o.uri,url:o.url,urlId:0,audioGroupIds:o.audioGroupIds,textGroupIds:o.textGroupIds};this.hls.trigger(Be.LEVEL_SWITCHING,u);const l=o.details;if(!l||l.live){const d=this.switchParams(o.uri,i?.details,l);this.loadPlaylist(d)}}get manualLevel(){return this.manualLevelIndex}set manualLevel(e){this.manualLevelIndex=e,this._startLevel===void 0&&(this._startLevel=e),e!==-1&&(this.level=e)}get firstLevel(){return this._firstLevel}set firstLevel(e){this._firstLevel=e}get startLevel(){if(this._startLevel===void 0){const e=this.hls.config.startLevel;return e!==void 0?e:this.hls.firstAutoLevel}return this._startLevel}set startLevel(e){this._startLevel=e}get pathways(){return this.steering?this.steering.pathways():[]}get pathwayPriority(){return this.steering?this.steering.pathwayPriority:null}set pathwayPriority(e){if(this.steering){const r=this.steering.pathways(),n=e.filter(i=>r.indexOf(i)!==-1);if(e.length<1){this.warn(`pathwayPriority ${e} should contain at least one pathway from list: ${r}`);return}this.steering.pathwayPriority=n}}onError(e,r){r.fatal||!r.context||r.context.type===ba.LEVEL&&r.context.level===this.level&&this.checkRetry(r)}onFragBuffered(e,{frag:r}){if(r!==void 0&&r.type===fi.MAIN){const n=r.elementaryStreams;if(!Object.keys(n).some(a=>!!n[a]))return;const i=this._levels[r.level];i!=null&&i.loadError&&(this.log(`Resetting level error count of ${i.loadError} on frag buffered`),i.loadError=0)}}onLevelLoaded(e,r){var n;const{level:i,details:a}=r,o=r.levelInfo;if(!o){var c;this.warn(`Invalid level index ${i}`),(c=r.deliveryDirectives)!=null&&c.skip&&(a.deltaUpdateFailed=!0);return}if(o===this.currentLevel||r.withoutMultiVariant){o.fragmentError===0&&(o.loadError=0);let u=o.details;u===r.details&&u.advanced&&(u=void 0),this.playlistLoaded(i,r,u)}else(n=r.deliveryDirectives)!=null&&n.skip&&(a.deltaUpdateFailed=!0)}loadPlaylist(e){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentLevel)&&this.scheduleLoading(this.currentLevel,e)}loadingPlaylist(e,r){super.loadingPlaylist(e,r);const n=this.getUrlWithDirectives(e.uri,r),i=this.currentLevelIndex,a=e.attrs["PATHWAY-ID"],o=e.details,c=o?.age;this.log(`Loading level index ${i}${r?.msn!==void 0?" at sn "+r.msn+" part "+r.part:""}${a?" Pathway "+a:""}${c&&o.live?" age "+c.toFixed(1)+(o.type&&" "+o.type||""):""} ${n}`),this.hls.trigger(Be.LEVEL_LOADING,{url:n,level:i,levelInfo:e,pathwayId:e.attrs["PATHWAY-ID"],id:0,deliveryDirectives:r||null})}get nextLoadLevel(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(e){this.level=e,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=e)}removeLevel(e){var r;if(this._levels.length===1)return;const n=this._levels.filter((a,o)=>o!==e?!0:(this.steering&&this.steering.removeLevel(a),a===this.currentLevel&&(this.currentLevel=null,this.currentLevelIndex=-1,a.details&&a.details.fragments.forEach(c=>c.level=-1)),!1));Uie(n),this._levels=n,this.currentLevelIndex>-1&&(r=this.currentLevel)!=null&&r.details&&(this.currentLevelIndex=this.currentLevel.details.fragments[0].level),this.manualLevelIndex>-1&&(this.manualLevelIndex=this.currentLevelIndex);const i=n.length-1;this._firstLevel=Math.min(this._firstLevel,i),this._startLevel&&(this._startLevel=Math.min(this._startLevel,i)),this.hls.trigger(Be.LEVELS_UPDATED,{levels:n})}onLevelsUpdated(e,{levels:r}){this._levels=r}checkMaxAutoUpdated(){const{autoLevelCapping:e,maxAutoLevel:r,maxHdcpLevel:n}=this.hls;this._maxAutoLevel!==r&&(this._maxAutoLevel=r,this.hls.trigger(Be.MAX_AUTO_LEVEL_UPDATED,{autoLevelCapping:e,levels:this.levels,maxAutoLevel:r,minAutoLevel:this.hls.minAutoLevel,maxHdcpLevel:n}))}}function OG(t){const e={};t.forEach(r=>{const n=r.groupId||"";r.id=e[n]=e[n]||0,e[n]++})}function Ose(){return self.SourceBuffer||self.WebKitSourceBuffer}function Rse(){if(!G0())return!1;const e=Ose();return!e||e.prototype&&typeof e.prototype.appendBuffer=="function"&&typeof e.prototype.remove=="function"}function qQe(){if(!Rse())return!1;const t=G0();return typeof t?.isTypeSupported=="function"&&(["avc1.42E01E,mp4a.40.2","av01.0.01M.08","vp09.00.50.08"].some(e=>t.isTypeSupported(u_(e,"video")))||["mp4a.40.2","fLaC"].some(e=>t.isTypeSupported(u_(e,"audio"))))}function XQe(){var t;const e=Ose();return typeof(e==null||(t=e.prototype)==null?void 0:t.changeType)=="function"}const ZQe=100;class JQe extends RF{constructor(e,r,n){super(e,r,n,"stream-controller",fi.MAIN),this.audioCodecSwap=!1,this.level=-1,this._forceStartLoad=!1,this._hasEnoughToStart=!1,this.altAudio=0,this.audioOnly=!1,this.fragPlaying=null,this.fragLastKbps=0,this.couldBacktrack=!1,this.backtrackFragment=null,this.audioCodecSwitch=!1,this.videoBuffer=null,this.onMediaPlaying=()=>{this.tick()},this.onMediaSeeked=()=>{const i=this.media,a=i?i.currentTime:null;if(a===null||!Xn(a)||(this.log(`Media seeked to ${a.toFixed(3)}`),!this.getBufferedFrag(a)))return;const o=this.getFwdBufferInfoAtPos(i,a,fi.MAIN,0);if(o===null||o.len===0){this.warn(`Main forward buffer length at ${a} on "seeked" event ${o?o.len:"empty"})`);return}this.tick()},this.registerListeners()}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(Be.MANIFEST_PARSED,this.onManifestParsed,this),e.on(Be.LEVEL_LOADING,this.onLevelLoading,this),e.on(Be.LEVEL_LOADED,this.onLevelLoaded,this),e.on(Be.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(Be.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(Be.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(Be.BUFFER_CREATED,this.onBufferCreated,this),e.on(Be.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(Be.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(Be.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){super.unregisterListeners();const{hls:e}=this;e.off(Be.MANIFEST_PARSED,this.onManifestParsed,this),e.off(Be.LEVEL_LOADED,this.onLevelLoaded,this),e.off(Be.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(Be.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(Be.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(Be.BUFFER_CREATED,this.onBufferCreated,this),e.off(Be.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(Be.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(Be.FRAG_BUFFERED,this.onFragBuffered,this)}onHandlerDestroying(){this.onMediaPlaying=this.onMediaSeeked=null,this.unregisterListeners(),super.onHandlerDestroying()}startLoad(e,r){if(this.levels){const{lastCurrentTime:n,hls:i}=this;if(this.stopLoad(),this.setInterval(ZQe),this.level=-1,!this.startFragRequested){let a=i.startLevel;a===-1&&(i.config.testBandwidth&&this.levels.length>1?(a=0,this.bitrateTest=!0):a=i.firstAutoLevel),i.nextLoadLevel=a,this.level=i.loadLevel,this._hasEnoughToStart=!!r}n>0&&e===-1&&!r&&(this.log(`Override startPosition with lastCurrentTime @${n.toFixed(3)}`),e=n),this.state=qr.IDLE,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=r?-1:e,this.tick()}else this._forceStartLoad=!0,this.state=qr.STOPPED}stopLoad(){this._forceStartLoad=!1,super.stopLoad()}doTick(){switch(this.state){case qr.WAITING_LEVEL:{const{levels:e,level:r}=this,n=e?.[r],i=n?.details;if(i&&(!i.live||this.levelLastLoaded===n&&!this.waitForLive(n))){if(this.waitForCdnTuneIn(i))break;this.state=qr.IDLE;break}else if(this.hls.nextLoadLevel!==this.level){this.state=qr.IDLE;break}break}case qr.FRAG_LOADING_WAITING_RETRY:this.checkRetryDate();break}this.state===qr.IDLE&&this.doTickIdle(),this.onTickEnd()}onTickEnd(){var e;super.onTickEnd(),(e=this.media)!=null&&e.readyState&&this.media.seeking===!1&&(this.lastCurrentTime=this.media.currentTime),this.checkFragmentChanged()}doTickIdle(){const{hls:e,levelLastLoaded:r,levels:n,media:i}=this;if(r===null||!i&&!this.primaryPrefetch&&(this.startFragRequested||!e.config.startFragPrefetch)||this.altAudio&&this.audioOnly)return;const a=this.buffering?e.nextLoadLevel:e.loadLevel;if(!(n!=null&&n[a]))return;const o=n[a],c=this.getMainFwdBufferInfo();if(c===null)return;const u=this.getLevelDetails();if(u&&this._streamEnded(c,u)){const y={};this.altAudio===2&&(y.type="video"),this.hls.trigger(Be.BUFFER_EOS,y),this.state=qr.ENDED;return}if(!this.buffering)return;e.loadLevel!==a&&e.manualLevel===-1&&this.log(`Adapting to level ${a} from level ${this.level}`),this.level=e.nextLoadLevel=a;const l=o.details;if(!l||this.state===qr.WAITING_LEVEL||this.waitForLive(o)){this.level=a,this.state=qr.WAITING_LEVEL,this.startFragRequested=!1;return}const d=c.len,f=this.getMaxBufferLength(o.maxBitrate);if(d>=f)return;this.backtrackFragment&&this.backtrackFragment.start>c.end&&(this.backtrackFragment=null);const m=this.backtrackFragment?this.backtrackFragment.start:c.end;let p=this.getNextFragment(m,l);if(this.couldBacktrack&&!this.fragPrevious&&p&&eu(p)&&this.fragmentTracker.getState(p)!==$u.OK){var g;const x=((g=this.backtrackFragment)!=null?g:p).sn-l.startSN,w=l.fragments[x-1];w&&p.cc===w.cc&&(p=w,this.fragmentTracker.removeFragment(w))}else this.backtrackFragment&&c.len&&(this.backtrackFragment=null);if(p&&this.isLoopLoading(p,m)){if(!p.gap){const x=this.audioOnly&&!this.altAudio?cl.AUDIO:cl.VIDEO,w=(x===cl.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;w&&this.afterBufferFlushed(w,x,fi.MAIN)}p=this.getNextFragmentLoopLoading(p,l,c,fi.MAIN,f)}p&&(p.initSegment&&!p.initSegment.data&&!this.bitrateTest&&(p=p.initSegment),this.loadFragment(p,o,m))}loadFragment(e,r,n){const i=this.fragmentTracker.getState(e);i===$u.NOT_LOADED||i===$u.PARTIAL?eu(e)?this.bitrateTest?(this.log(`Fragment ${e.sn} of level ${e.level} is being downloaded to test bitrate and will not be buffered`),this._loadBitrateTestFrag(e,r)):super.loadFragment(e,r,n):this._loadInitSegment(e,r):this.clearTrackerIfNeeded(e)}getBufferedFrag(e){return this.fragmentTracker.getBufferedFrag(e,fi.MAIN)}followingBufferedFrag(e){return e?this.getBufferedFrag(e.end+.5):null}immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}nextLevelSwitch(){const{levels:e,media:r}=this;if(r!=null&&r.readyState){let n;const i=this.getAppendedFrag(r.currentTime);i&&i.start>1&&this.flushMainBuffer(0,i.start-1);const a=this.getLevelDetails();if(a!=null&&a.live){const c=this.getMainFwdBufferInfo();if(!c||c.len<a.targetduration*2)return}if(!r.paused&&e){const c=this.hls.nextLoadLevel,u=e[c],l=this.fragLastKbps;l&&this.fragCurrent?n=this.fragCurrent.duration*u.maxBitrate/(1e3*l)+1:n=0}else n=0;const o=this.getBufferedFrag(r.currentTime+n);if(o){const c=this.followingBufferedFrag(o);if(c){this.abortCurrentFrag();const u=c.maxStartPTS?c.maxStartPTS:c.start,l=c.duration,d=Math.max(o.end,u+Math.min(Math.max(l-this.config.maxFragLookUpTolerance,l*(this.couldBacktrack?.5:.125)),l*(this.couldBacktrack?.75:.25)));this.flushMainBuffer(d,Number.POSITIVE_INFINITY)}}}}abortCurrentFrag(){const e=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,e&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.state){case qr.KEY_LOADING:case qr.FRAG_LOADING:case qr.FRAG_LOADING_WAITING_RETRY:case qr.PARSING:case qr.PARSED:this.state=qr.IDLE;break}this.nextLoadPosition=this.getLoadPosition()}flushMainBuffer(e,r){super.flushMainBuffer(e,r,this.altAudio===2?"video":null)}onMediaAttached(e,r){super.onMediaAttached(e,r);const n=r.media;xh(n,"playing",this.onMediaPlaying),xh(n,"seeked",this.onMediaSeeked)}onMediaDetaching(e,r){const{media:n}=this;n&&(Qh(n,"playing",this.onMediaPlaying),Qh(n,"seeked",this.onMediaSeeked)),this.videoBuffer=null,this.fragPlaying=null,super.onMediaDetaching(e,r),!r.transferMedia&&(this._hasEnoughToStart=!1)}onManifestLoading(){super.onManifestLoading(),this.log("Trigger BUFFER_RESET"),this.hls.trigger(Be.BUFFER_RESET,void 0),this.couldBacktrack=!1,this.fragLastKbps=0,this.fragPlaying=this.backtrackFragment=null,this.altAudio=0,this.audioOnly=!1}onManifestParsed(e,r){let n=!1,i=!1;for(let a=0;a<r.levels.length;a++){const o=r.levels[a].audioCodec;o&&(n=n||o.indexOf("mp4a.40.2")!==-1,i=i||o.indexOf("mp4a.40.5")!==-1)}this.audioCodecSwitch=n&&i&&!XQe(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=r.levels,this.startFragRequested=!1}onLevelLoading(e,r){const{levels:n}=this;if(!n||this.state!==qr.IDLE)return;const i=r.levelInfo;(!i.details||i.details.live&&(this.levelLastLoaded!==i||i.details.expired)||this.waitForCdnTuneIn(i.details))&&(this.state=qr.WAITING_LEVEL)}onLevelLoaded(e,r){var n;const{levels:i,startFragRequested:a}=this,o=r.level,c=r.details,u=c.totalduration;if(!i){this.warn(`Levels were reset while loading level ${o}`);return}this.log(`Level ${o} loaded [${c.startSN},${c.endSN}]${c.lastPartSn?`[part-${c.lastPartSn}-${c.lastPartIndex}]`:""}, cc [${c.startCC}, ${c.endCC}] duration:${u}`);const l=r.levelInfo,d=this.fragCurrent;d&&(this.state===qr.FRAG_LOADING||this.state===qr.FRAG_LOADING_WAITING_RETRY)&&d.level!==r.level&&d.loader&&this.abortCurrentFrag();let f=0;if(c.live||(n=l.details)!=null&&n.live){var m;if(this.checkLiveUpdate(c),c.deltaUpdateFailed)return;f=this.alignPlaylists(c,l.details,(m=this.levelLastLoaded)==null?void 0:m.details)}if(l.details=c,this.levelLastLoaded=l,a||this.setStartPosition(c,f),this.hls.trigger(Be.LEVEL_UPDATED,{details:c,level:o}),this.state===qr.WAITING_LEVEL){if(this.waitForCdnTuneIn(c))return;this.state=qr.IDLE}a&&c.live&&this.synchronizeToLiveEdge(c),this.tick()}synchronizeToLiveEdge(e){const{config:r,media:n}=this;if(!n)return;const i=this.hls.liveSyncPosition,a=this.getLoadPosition(),o=e.fragmentStart,c=e.edge,u=a>=o-r.maxFragLookUpTolerance&&a<=c;if(i!==null&&n.duration>i&&(a<i||!u)){const d=r.liveMaxLatencyDuration!==void 0?r.liveMaxLatencyDuration:r.liveMaxLatencyDurationCount*e.targetduration;if((!u&&n.readyState<4||a<c-d)&&(this._hasEnoughToStart||(this.nextLoadPosition=i),n.readyState))if(this.warn(`Playback: ${a.toFixed(3)} is located too far from the end of live sliding playlist: ${c}, reset currentTime to : ${i.toFixed(3)}`),this.config.liveSyncMode==="buffered"){var l;const f=Hs.bufferInfo(n,i,0);if(!((l=f.buffered)!=null&&l.length)){n.currentTime=i;return}if(f.start<=a){n.currentTime=i;return}const{nextStart:p}=Hs.bufferedInfo(f.buffered,a,0);p&&(n.currentTime=p)}else n.currentTime=i}}_handleFragmentLoadProgress(e){var r;const n=e.frag,{part:i,payload:a}=e,{levels:o}=this;if(!o){this.warn(`Levels were reset while fragment load was in progress. Fragment ${n.sn} of level ${n.level} will not be buffered`);return}const c=o[n.level];if(!c){this.warn(`Level ${n.level} not found on progress`);return}const u=c.details;if(!u){this.warn(`Dropping fragment ${n.sn} of level ${n.level} after level details were reset`),this.fragmentTracker.removeFragment(n);return}const l=c.videoCodec,d=u.PTSKnown||!u.live,f=(r=n.initSegment)==null?void 0:r.data,m=this._getAudioCodec(c),p=this.transmuxer=this.transmuxer||new lse(this.hls,fi.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),g=i?i.index:-1,y=g!==-1,x=new BF(n.level,n.sn,n.stats.chunkCount,a.byteLength,g,y),w=this.initPTS[n.cc];p.push(a,f,m,l,n,i,u.totalduration,d,x,w)}onAudioTrackSwitching(e,r){const n=this.hls,i=this.altAudio!==0;if(iN(r.url,n))this.altAudio=1;else{if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;const o=this.fragCurrent;o&&(this.log("Switching to main audio track, cancel main fragment load"),o.abortRequests(),this.fragmentTracker.removeFragment(o)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();if(i){this.altAudio=0,this.fragmentTracker.removeAllFragments(),n.once(Be.BUFFER_FLUSHED,()=>{this.hls&&this.hls.trigger(Be.AUDIO_TRACK_SWITCHED,r)}),n.trigger(Be.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null});return}n.trigger(Be.AUDIO_TRACK_SWITCHED,r)}}onAudioTrackSwitched(e,r){const n=iN(r.url,this.hls);if(n){const i=this.videoBuffer;i&&this.mediaBuffer!==i&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=i)}this.altAudio=n?2:0,this.tick()}onBufferCreated(e,r){const n=r.tracks;let i,a,o=!1;for(const c in n){const u=n[c];if(u.id==="main"){if(a=c,i=u,c==="video"){const l=n[c];l&&(this.videoBuffer=l.buffer)}}else o=!0}o&&i?(this.log(`Alternate track found, use ${a}.buffered to schedule main fragment loading`),this.mediaBuffer=i.buffer):this.mediaBuffer=this.media}onFragBuffered(e,r){const{frag:n,part:i}=r,a=n.type===fi.MAIN;if(a){if(this.fragContextChanged(n)){this.warn(`Fragment ${n.sn}${i?" p: "+i.index:""} of level ${n.level} finished buffering, but was aborted. state: ${this.state}`),this.state===qr.PARSED&&(this.state=qr.IDLE);return}const c=i?i.stats:n.stats;this.fragLastKbps=Math.round(8*c.total/(c.buffering.end-c.loading.first)),eu(n)&&(this.fragPrevious=n),this.fragBufferedComplete(n,i)}const o=this.media;o&&(!this._hasEnoughToStart&&Hs.getBuffered(o).length&&(this._hasEnoughToStart=!0,this.seekToStartPos()),a&&this.tick())}get hasEnoughToStart(){return this._hasEnoughToStart}onError(e,r){var n;if(r.fatal){this.state=qr.ERROR;return}switch(r.details){case br.FRAG_GAP:case br.FRAG_PARSING_ERROR:case br.FRAG_DECRYPT_ERROR:case br.FRAG_LOAD_ERROR:case br.FRAG_LOAD_TIMEOUT:case br.KEY_LOAD_ERROR:case br.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(fi.MAIN,r);break;case br.LEVEL_LOAD_ERROR:case br.LEVEL_LOAD_TIMEOUT:case br.LEVEL_PARSING_ERROR:!r.levelRetry&&this.state===qr.WAITING_LEVEL&&((n=r.context)==null?void 0:n.type)===ba.LEVEL&&(this.state=qr.IDLE);break;case br.BUFFER_ADD_CODEC_ERROR:case br.BUFFER_APPEND_ERROR:if(r.parent!=="main")return;this.reduceLengthAndFlushBuffer(r)&&this.resetLoadingState();break;case br.BUFFER_FULL_ERROR:if(r.parent!=="main")return;this.reduceLengthAndFlushBuffer(r)&&(!this.config.interstitialsController&&this.config.assetPlayerId?this._hasEnoughToStart=!0:this.flushMainBuffer(0,Number.POSITIVE_INFINITY));break;case br.INTERNAL_EXCEPTION:this.recoverWorkerError(r);break}}onFragLoadEmergencyAborted(){this.state=qr.IDLE,this._hasEnoughToStart||(this.startFragRequested=!1,this.nextLoadPosition=this.lastCurrentTime),this.tickImmediate()}onBufferFlushed(e,{type:r}){if(r!==cl.AUDIO||!this.altAudio){const n=(r===cl.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;n&&(this.afterBufferFlushed(n,r,fi.MAIN),this.tick())}}onLevelsUpdated(e,r){this.level>-1&&this.fragCurrent&&(this.level=this.fragCurrent.level,this.level===-1&&this.resetWhenMissingContext(this.fragCurrent)),this.levels=r.levels}swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap}seekToStartPos(){const{media:e}=this;if(!e)return;const r=e.currentTime;let n=this.startPosition;if(n>=0&&r<n){if(e.seeking){this.log(`could not seek to ${n}, already seeking at ${r}`);return}const i=this.timelineOffset;i&&n&&(n+=i);const a=this.getLevelDetails(),o=Hs.getBuffered(e),c=o.length?o.start(0):0,u=c-n,l=Math.max(this.config.maxBufferHole,this.config.maxFragLookUpTolerance);(this.config.startOnSegmentBoundary||u>0&&(u<l||this.loadingParts&&u<2*(a?.partTarget||0)))&&(this.log(`adjusting start position by ${u} to match buffer start`),n+=u,this.startPosition=n),r<n&&(this.log(`seek to target start position ${n} from current time ${r} buffer start ${c}`),e.currentTime=n)}}_getAudioCodec(e){let r=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&r&&(this.log("Swapping audio codec"),r.indexOf("mp4a.40.5")!==-1?r="mp4a.40.2":r="mp4a.40.5"),r}_loadBitrateTestFrag(e,r){e.bitrateTest=!0,this._doFragLoad(e,r).then(n=>{const{hls:i}=this,a=n?.frag;if(!a||this.fragContextChanged(a))return;r.fragmentError=0,this.state=qr.IDLE,this.startFragRequested=!1,this.bitrateTest=!1;const o=a.stats;o.parsing.start=o.parsing.end=o.buffering.start=o.buffering.end=self.performance.now(),i.trigger(Be.FRAG_LOADED,n),a.bitrateTest=!1}).catch(n=>{this.state===qr.STOPPED||this.state===qr.ERROR||(this.warn(n),this.resetFragmentLoading(e))})}_handleTransmuxComplete(e){const r=this.playlistType,{hls:n}=this,{remuxResult:i,chunkMeta:a}=e,o=this.getCurrentContext(a);if(!o){this.resetWhenMissingContext(a);return}const{frag:c,part:u,level:l}=o,{video:d,text:f,id3:m,initSegment:p}=i,{details:g}=l,y=this.altAudio?void 0:i.audio;if(this.fragContextChanged(c)){this.fragmentTracker.removeFragment(c);return}if(this.state=qr.PARSING,p){const x=p.tracks;if(x){const N=c.initSegment||c;if(this.unhandledEncryptionError(p,c))return;this._bufferInitSegment(l,x,N,a),n.trigger(Be.FRAG_PARSING_INIT_SEGMENT,{frag:N,id:r,tracks:x})}const w=p.initPTS,_=p.timescale,E=this.initPTS[c.cc];if(Xn(w)&&(!E||E.baseTime!==w||E.timescale!==_)){const N=p.trackId;this.initPTS[c.cc]={baseTime:w,timescale:_,trackId:N},n.trigger(Be.INIT_PTS_FOUND,{frag:c,id:r,initPTS:w,timescale:_,trackId:N})}}if(d&&g){y&&d.type==="audiovideo"&&this.logMuxedErr(c);const x=g.fragments[c.sn-1-g.startSN],w=c.sn===g.startSN,_=!x||c.cc>x.cc;if(i.independent!==!1){const{startPTS:E,endPTS:N,startDTS:C,endDTS:I}=d;if(u)u.elementaryStreams[d.type]={startPTS:E,endPTS:N,startDTS:C,endDTS:I};else if(d.firstKeyFrame&&d.independent&&a.id===1&&!_&&(this.couldBacktrack=!0),d.dropped&&d.independent){const D=this.getMainFwdBufferInfo(),U=(D?D.end:this.getLoadPosition())+this.config.maxBufferHole,G=d.firstKeyFramePTS?d.firstKeyFramePTS:E;if(!w&&U<G-this.config.maxBufferHole&&!_){this.backtrack(c);return}else _&&(c.gap=!0);c.setElementaryStreamInfo(d.type,c.start,N,c.start,I,!0)}else w&&E-(g.appliedTimelineOffset||0)>xj&&(c.gap=!0);c.setElementaryStreamInfo(d.type,E,N,C,I),this.backtrackFragment&&(this.backtrackFragment=c),this.bufferFragmentData(d,c,u,a,w||_)}else if(w||_)c.gap=!0;else{this.backtrack(c);return}}if(y){const{startPTS:x,endPTS:w,startDTS:_,endDTS:E}=y;u&&(u.elementaryStreams[cl.AUDIO]={startPTS:x,endPTS:w,startDTS:_,endDTS:E}),c.setElementaryStreamInfo(cl.AUDIO,x,w,_,E),this.bufferFragmentData(y,c,u,a)}if(g&&m!=null&&m.samples.length){const x={id:r,frag:c,details:g,samples:m.samples};n.trigger(Be.FRAG_PARSING_METADATA,x)}if(g&&f){const x={id:r,frag:c,details:g,samples:f.samples};n.trigger(Be.FRAG_PARSING_USERDATA,x)}}logMuxedErr(e){this.warn(`${eu(e)?"Media":"Init"} segment with muxed audiovideo where only video expected: ${e.url}`)}_bufferInitSegment(e,r,n,i){if(this.state!==qr.PARSING)return;this.audioOnly=!!r.audio&&!r.video,this.altAudio&&!this.audioOnly&&(delete r.audio,r.audiovideo&&this.logMuxedErr(n));const{audio:a,video:o,audiovideo:c}=r;if(a){const l=e.audioCodec;let d=fj(a.codec,l);d==="mp4a"&&(d="mp4a.40.5");const f=navigator.userAgent.toLowerCase();if(this.audioCodecSwitch){d&&(d.indexOf("mp4a.40.5")!==-1?d="mp4a.40.2":d="mp4a.40.5");const m=a.metadata;m&&"channelCount"in m&&(m.channelCount||1)!==1&&f.indexOf("firefox")===-1&&(d="mp4a.40.5")}d&&d.indexOf("mp4a.40.5")!==-1&&f.indexOf("android")!==-1&&a.container!=="audio/mpeg"&&(d="mp4a.40.2",this.log(`Android: force audio codec to ${d}`)),l&&l!==d&&this.log(`Swapping manifest audio codec "${l}" for "${d}"`),a.levelCodec=d,a.id=fi.MAIN,this.log(`Init audio buffer, container:${a.container}, codecs[selected/level/parsed]=[${d||""}/${l||""}/${a.codec}]`),delete r.audiovideo}if(o){o.levelCodec=e.videoCodec,o.id=fi.MAIN;const l=o.codec;if(l?.length===4)switch(l){case"hvc1":case"hev1":o.codec="hvc1.1.6.L120.90";break;case"av01":o.codec="av01.0.04M.08";break;case"avc1":o.codec="avc1.42e01e";break}this.log(`Init video buffer, container:${o.container}, codecs[level/parsed]=[${e.videoCodec||""}/${l}]${o.codec!==l?" parsed-corrected="+o.codec:""}${o.supplemental?" supplemental="+o.supplemental:""}`),delete r.audiovideo}c&&(this.log(`Init audiovideo buffer, container:${c.container}, codecs[level/parsed]=[${e.codecs}/${c.codec}]`),delete r.video,delete r.audio);const u=Object.keys(r);if(u.length){if(this.hls.trigger(Be.BUFFER_CODECS,r),!this.hls)return;u.forEach(l=>{const f=r[l].initSegment;f!=null&&f.byteLength&&this.hls.trigger(Be.BUFFER_APPENDING,{type:l,data:f,frag:n,part:null,chunkMeta:i,parent:n.type})})}this.tickImmediate()}getMainFwdBufferInfo(){const e=this.mediaBuffer&&this.altAudio===2?this.mediaBuffer:this.media;return this.getFwdBufferInfo(e,fi.MAIN)}get maxBufferLength(){const{levels:e,level:r}=this,n=e?.[r];return n?this.getMaxBufferLength(n.maxBitrate):this.config.maxBufferLength}backtrack(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state=qr.IDLE}checkFragmentChanged(){const e=this.media;let r=null;if(e&&e.readyState>1&&e.seeking===!1){const n=e.currentTime;if(Hs.isBuffered(e,n)?r=this.getAppendedFrag(n):Hs.isBuffered(e,n+.1)&&(r=this.getAppendedFrag(n+.1)),r){this.backtrackFragment=null;const i=this.fragPlaying,a=r.level;(!i||r.sn!==i.sn||i.level!==a)&&(this.fragPlaying=r,this.hls.trigger(Be.FRAG_CHANGED,{frag:r}),(!i||i.level!==a)&&this.hls.trigger(Be.LEVEL_SWITCHED,{level:a}))}}}get nextLevel(){const e=this.nextBufferedFrag;return e?e.level:-1}get currentFrag(){var e;if(this.fragPlaying)return this.fragPlaying;const r=((e=this.media)==null?void 0:e.currentTime)||this.lastCurrentTime;return Xn(r)?this.getAppendedFrag(r):null}get currentProgramDateTime(){var e;const r=((e=this.media)==null?void 0:e.currentTime)||this.lastCurrentTime;if(Xn(r)){const n=this.getLevelDetails(),i=this.currentFrag||(n?Ty(null,n.fragments,r):null);if(i){const a=i.programDateTime;if(a!==null){const o=a+(r-i.start)*1e3;return new Date(o)}}}return null}get currentLevel(){const e=this.currentFrag;return e?e.level:-1}get nextBufferedFrag(){const e=this.currentFrag;return e?this.followingBufferedFrag(e):null}get forceStartLoad(){return this._forceStartLoad}}class eze extends um{constructor(e,r){super("key-loader",r),this.config=void 0,this.keyIdToKeyInfo={},this.emeController=null,this.config=e}abort(e){for(const n in this.keyIdToKeyInfo){const i=this.keyIdToKeyInfo[n].loader;if(i){var r;if(e&&e!==((r=i.context)==null?void 0:r.frag.type))return;i.abort()}}}detach(){for(const e in this.keyIdToKeyInfo){const r=this.keyIdToKeyInfo[e];(r.mediaKeySessionContext||r.decryptdata.isCommonEncryption)&&delete this.keyIdToKeyInfo[e]}}destroy(){this.detach();for(const e in this.keyIdToKeyInfo){const r=this.keyIdToKeyInfo[e].loader;r&&r.destroy()}this.keyIdToKeyInfo={}}createKeyLoadError(e,r=br.KEY_LOAD_ERROR,n,i,a){return new Pp({type:Oi.NETWORK_ERROR,details:r,fatal:!1,frag:e,response:a,error:n,networkDetails:i})}loadClear(e,r,n){if(this.emeController&&this.config.emeEnabled&&!this.emeController.getSelectedKeySystemFormats().length){if(r.length)for(let i=0,a=r.length;i<a;i++){const o=r[i];if(e.cc<=o.cc&&(!eu(e)||!eu(o)||e.sn<o.sn)||!n&&i==a-1)return this.emeController.selectKeySystemFormat(o).then(c=>{if(!this.emeController)return;o.setKeyFormat(c);const u=Aj(c);if(u)return this.emeController.getKeySystemAccess([u])})}if(this.config.requireKeySystemAccessOnStart){const i=Iw(this.config);if(i.length)return this.emeController.getKeySystemAccess(i)}}return null}load(e){return!e.decryptdata&&e.encrypted&&this.emeController&&this.config.emeEnabled?this.emeController.selectKeySystemFormat(e).then(r=>this.loadInternal(e,r)):this.loadInternal(e)}loadInternal(e,r){var n,i;r&&e.setKeyFormat(r);const a=e.decryptdata;if(!a){const l=new Error(r?`Expected frag.decryptdata to be defined after setting format ${r}`:`Missing decryption data on fragment in onKeyLoading (emeEnabled with controller: ${this.emeController&&this.config.emeEnabled})`);return Promise.reject(this.createKeyLoadError(e,br.KEY_LOAD_ERROR,l))}const o=a.uri;if(!o)return Promise.reject(this.createKeyLoadError(e,br.KEY_LOAD_ERROR,new Error(`Invalid key URI: "${o}"`)));const c=qI(a);let u=this.keyIdToKeyInfo[c];if((n=u)!=null&&n.decryptdata.key)return a.key=u.decryptdata.key,Promise.resolve({frag:e,keyInfo:u});if(this.emeController&&(i=u)!=null&&i.keyLoadPromise)switch(this.emeController.getKeyStatus(u.decryptdata)){case"usable":case"usable-in-future":return u.keyLoadPromise.then(d=>{const{keyInfo:f}=d;return a.key=f.decryptdata.key,{frag:e,keyInfo:f}})}switch(this.log(`${this.keyIdToKeyInfo[c]?"Rel":"L"}oading${a.keyId?" keyId: "+$d(a.keyId):""} URI: ${a.uri} from ${e.type} ${e.level}`),u=this.keyIdToKeyInfo[c]={decryptdata:a,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},a.method){case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return a.keyFormat==="identity"?this.loadKeyHTTP(u,e):this.loadKeyEME(u,e);case"AES-128":case"AES-256":case"AES-256-CTR":return this.loadKeyHTTP(u,e);default:return Promise.reject(this.createKeyLoadError(e,br.KEY_LOAD_ERROR,new Error(`Key supplied with unsupported METHOD: "${a.method}"`)))}}loadKeyEME(e,r){const n={frag:r,keyInfo:e};if(this.emeController&&this.config.emeEnabled){var i;if(!e.decryptdata.keyId&&(i=r.initSegment)!=null&&i.data){const o=y7e(r.initSegment.data);if(o.length){let c=o[0];c.some(u=>u!==0)?(this.log(`Using keyId found in init segment ${$d(c)}`),D0.setKeyIdForUri(e.decryptdata.uri,c)):(c=D0.addKeyIdForUri(e.decryptdata.uri),this.log(`Generating keyId to patch media ${$d(c)}`)),e.decryptdata.keyId=c}}if(!e.decryptdata.keyId&&!eu(r))return Promise.resolve(n);const a=this.emeController.loadKey(n);return(e.keyLoadPromise=a.then(o=>(e.mediaKeySessionContext=o,n))).catch(o=>{throw e.keyLoadPromise=null,"data"in o&&(o.data.frag=r),o})}return Promise.resolve(n)}loadKeyHTTP(e,r){const n=this.config,i=n.loader,a=new i(n);return r.keyLoader=e.loader=a,e.keyLoadPromise=new Promise((o,c)=>{const u={keyInfo:e,frag:r,responseType:"arraybuffer",url:e.decryptdata.uri},l=n.keyLoadPolicy.default,d={loadPolicy:l,timeout:l.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},f={onSuccess:(m,p,g,y)=>{const{frag:x,keyInfo:w}=g,_=qI(w.decryptdata);if(!x.decryptdata||w!==this.keyIdToKeyInfo[_])return c(this.createKeyLoadError(x,br.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),y));w.decryptdata.key=x.decryptdata.key=new Uint8Array(m.data),x.keyLoader=null,w.loader=null,o({frag:x,keyInfo:w})},onError:(m,p,g,y)=>{this.resetLoader(p),c(this.createKeyLoadError(r,br.KEY_LOAD_ERROR,new Error(`HTTP Error ${m.code} loading key ${m.text}`),g,Uo({url:u.url,data:void 0},m)))},onTimeout:(m,p,g)=>{this.resetLoader(p),c(this.createKeyLoadError(r,br.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),g))},onAbort:(m,p,g)=>{this.resetLoader(p),c(this.createKeyLoadError(r,br.INTERNAL_ABORTED,new Error("key loading aborted"),g))}};a.load(u,d,f)})}resetLoader(e){const{frag:r,keyInfo:n,url:i}=e,a=n.loader;r.keyLoader===a&&(r.keyLoader=null,n.loader=null);const o=qI(n.decryptdata)||i;delete this.keyIdToKeyInfo[o],a&&a.destroy()}}function qI(t){if(t.keyFormat!==Hd.FAIRPLAY){const e=t.keyId;if(e)return $d(e)}return t.uri}function RG(t){const{type:e}=t;switch(e){case ba.AUDIO_TRACK:return fi.AUDIO;case ba.SUBTITLE_TRACK:return fi.SUBTITLE;default:return fi.MAIN}}function XI(t,e){let r=t.url;return(r===void 0||r.indexOf("data:")===0)&&(r=e.url),r}class tze{constructor(e){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.onManifestLoaded=this.checkAutostartLoad,this.hls=e,this.registerListeners()}startLoad(e){}stopLoad(){this.destroyInternalLoaders()}registerListeners(){const{hls:e}=this;e.on(Be.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Be.LEVEL_LOADING,this.onLevelLoading,this),e.on(Be.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(Be.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.on(Be.LEVELS_UPDATED,this.onLevelsUpdated,this)}unregisterListeners(){const{hls:e}=this;e.off(Be.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Be.LEVEL_LOADING,this.onLevelLoading,this),e.off(Be.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(Be.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.off(Be.LEVELS_UPDATED,this.onLevelsUpdated,this)}createInternalLoader(e){const r=this.hls.config,n=r.pLoader,i=r.loader,a=n||i,o=new a(r);return this.loaders[e.type]=o,o}getInternalLoader(e){return this.loaders[e.type]}resetInternalLoader(e){this.loaders[e]&&delete this.loaders[e]}destroyInternalLoaders(){for(const e in this.loaders){const r=this.loaders[e];r&&r.destroy(),this.resetInternalLoader(e)}}destroy(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()}onManifestLoading(e,r){const{url:n}=r;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:ba.MANIFEST,url:n,deliveryDirectives:null,levelOrTrack:null})}onLevelLoading(e,r){const{id:n,level:i,pathwayId:a,url:o,deliveryDirectives:c,levelInfo:u}=r;this.load({id:n,level:i,pathwayId:a,responseType:"text",type:ba.LEVEL,url:o,deliveryDirectives:c,levelOrTrack:u})}onAudioTrackLoading(e,r){const{id:n,groupId:i,url:a,deliveryDirectives:o,track:c}=r;this.load({id:n,groupId:i,level:null,responseType:"text",type:ba.AUDIO_TRACK,url:a,deliveryDirectives:o,levelOrTrack:c})}onSubtitleTrackLoading(e,r){const{id:n,groupId:i,url:a,deliveryDirectives:o,track:c}=r;this.load({id:n,groupId:i,level:null,responseType:"text",type:ba.SUBTITLE_TRACK,url:a,deliveryDirectives:o,levelOrTrack:c})}onLevelsUpdated(e,r){const n=this.loaders[ba.LEVEL];if(n){const i=n.context;i&&!r.levels.some(a=>a===i.levelOrTrack)&&(n.abort(),delete this.loaders[ba.LEVEL])}}load(e){var r;const n=this.hls.config;let i=this.getInternalLoader(e);if(i){const l=this.hls.logger,d=i.context;if(d&&d.levelOrTrack===e.levelOrTrack&&(d.url===e.url||d.deliveryDirectives&&!e.deliveryDirectives)){d.url===e.url?l.log(`[playlist-loader]: ignore ${e.url} ongoing request`):l.log(`[playlist-loader]: ignore ${e.url} in favor of ${d.url}`);return}l.log(`[playlist-loader]: aborting previous loader for type: ${e.type}`),i.abort()}let a;if(e.type===ba.MANIFEST?a=n.manifestLoadPolicy.default:a=nl({},n.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),i=this.createInternalLoader(e),Xn((r=e.deliveryDirectives)==null?void 0:r.part)){let l;if(e.type===ba.LEVEL&&e.level!==null?l=this.hls.levels[e.level].details:e.type===ba.AUDIO_TRACK&&e.id!==null?l=this.hls.audioTracks[e.id].details:e.type===ba.SUBTITLE_TRACK&&e.id!==null&&(l=this.hls.subtitleTracks[e.id].details),l){const d=l.partTarget,f=l.targetduration;if(d&&f){const m=Math.max(d*3,f*.8)*1e3;a=nl({},a,{maxTimeToFirstByteMs:Math.min(m,a.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(m,a.maxTimeToFirstByteMs)})}}}const o=a.errorRetry||a.timeoutRetry||{},c={loadPolicy:a,timeout:a.maxLoadTimeMs,maxRetry:o.maxNumRetry||0,retryDelay:o.retryDelayMs||0,maxRetryDelay:o.maxRetryDelayMs||0},u={onSuccess:(l,d,f,m)=>{const p=this.getInternalLoader(f);this.resetInternalLoader(f.type);const g=l.data;d.parsing.start=performance.now(),FA.isMediaPlaylist(g)||f.type!==ba.MANIFEST?this.handleTrackOrLevelPlaylist(l,d,f,m||null,p):this.handleMasterPlaylist(l,d,f,m)},onError:(l,d,f,m)=>{this.handleNetworkError(d,f,!1,l,m)},onTimeout:(l,d,f)=>{this.handleNetworkError(d,f,!0,void 0,l)}};i.load(e,c,u)}checkAutostartLoad(){if(!this.hls)return;const{config:{autoStartLoad:e,startPosition:r},forceStartLoad:n}=this.hls;(e||n)&&(this.hls.logger.log(`${e?"auto":"force"} startLoad with configured startPosition ${r}`),this.hls.startLoad(r))}handleMasterPlaylist(e,r,n,i){const a=this.hls,o=e.data,c=XI(e,n),u=FA.parseMasterPlaylist(o,c);if(u.playlistParsingError){r.parsing.end=performance.now(),this.handleManifestParsingError(e,n,u.playlistParsingError,i,r);return}const{contentSteering:l,levels:d,sessionData:f,sessionKeys:m,startTimeOffset:p,variableList:g}=u;this.variableList=g,d.forEach(_=>{const{unknownCodecs:E}=_;if(E){const{preferManagedMediaSource:N}=this.hls.config;let{audioCodec:C,videoCodec:I}=_;for(let D=E.length;D--;){const U=E[D];c_(U,"audio",N)?(_.audioCodec=C=C?`${C},${U}`:U,r1.audio[C.substring(0,4)]=2,E.splice(D,1)):c_(U,"video",N)&&(_.videoCodec=I=I?`${I},${U}`:U,r1.video[I.substring(0,4)]=2,E.splice(D,1))}}});const{AUDIO:y=[],SUBTITLES:x,"CLOSED-CAPTIONS":w}=FA.parseMasterPlaylistMedia(o,c,u);y.length&&!y.some(E=>!E.url)&&d[0].audioCodec&&!d[0].attrs.AUDIO&&(this.hls.logger.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),y.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new cc({}),bitrate:0,url:""})),a.trigger(Be.MANIFEST_LOADED,{levels:d,audioTracks:y,subtitles:x,captions:w,contentSteering:l,url:c,stats:r,networkDetails:i,sessionData:f,sessionKeys:m,startTimeOffset:p,variableList:g})}handleTrackOrLevelPlaylist(e,r,n,i,a){const o=this.hls,{id:c,level:u,type:l}=n,d=XI(e,n),f=Xn(u)?u:Xn(c)?c:0,m=RG(n),p=FA.parseLevelPlaylist(e.data,d,f,m,0,this.variableList);if(l===ba.MANIFEST){const g={attrs:new cc({}),bitrate:0,details:p,name:"",url:d};p.requestScheduled=r.loading.start+Die(p,0),o.trigger(Be.MANIFEST_LOADED,{levels:[g],audioTracks:[],url:d,stats:r,networkDetails:i,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}r.parsing.end=performance.now(),n.levelDetails=p,this.handlePlaylistLoaded(p,e,r,n,i,a)}handleManifestParsingError(e,r,n,i,a){this.hls.trigger(Be.ERROR,{type:Oi.NETWORK_ERROR,details:br.MANIFEST_PARSING_ERROR,fatal:r.type===ba.MANIFEST,url:e.url,err:n,error:n,reason:n.message,response:e,context:r,networkDetails:i,stats:a})}handleNetworkError(e,r,n=!1,i,a){let o=`A network ${n?"timeout":"error"+(i?" (status "+i.code+")":"")} occurred while loading ${e.type}`;e.type===ba.LEVEL?o+=`: ${e.level} id: ${e.id}`:(e.type===ba.AUDIO_TRACK||e.type===ba.SUBTITLE_TRACK)&&(o+=` id: ${e.id} group-id: "${e.groupId}"`);const c=new Error(o);this.hls.logger.warn(`[playlist-loader]: ${o}`);let u=br.UNKNOWN,l=!1;const d=this.getInternalLoader(e);switch(e.type){case ba.MANIFEST:u=n?br.MANIFEST_LOAD_TIMEOUT:br.MANIFEST_LOAD_ERROR,l=!0;break;case ba.LEVEL:u=n?br.LEVEL_LOAD_TIMEOUT:br.LEVEL_LOAD_ERROR,l=!1;break;case ba.AUDIO_TRACK:u=n?br.AUDIO_TRACK_LOAD_TIMEOUT:br.AUDIO_TRACK_LOAD_ERROR,l=!1;break;case ba.SUBTITLE_TRACK:u=n?br.SUBTITLE_TRACK_LOAD_TIMEOUT:br.SUBTITLE_LOAD_ERROR,l=!1;break}d&&this.resetInternalLoader(e.type);const f={type:Oi.NETWORK_ERROR,details:u,fatal:l,url:e.url,loader:d,context:e,error:c,networkDetails:r,stats:a};if(i){const m=r?.url||e.url;f.response=Uo({url:m,data:void 0},i)}this.hls.trigger(Be.ERROR,f)}handlePlaylistLoaded(e,r,n,i,a,o){const c=this.hls,{type:u,level:l,levelOrTrack:d,id:f,groupId:m,deliveryDirectives:p}=i,g=XI(r,i),y=RG(i);let x=typeof i.level=="number"&&y===fi.MAIN?l:void 0;const w=e.playlistParsingError;if(w){if(this.hls.logger.warn(`${w} ${e.url}`),!c.config.ignorePlaylistParsingErrors){c.trigger(Be.ERROR,{type:Oi.NETWORK_ERROR,details:br.LEVEL_PARSING_ERROR,fatal:!1,url:g,error:w,reason:w.message,response:r,context:i,level:x,parent:y,networkDetails:a,stats:n});return}e.playlistParsingError=null}if(!e.fragments.length){const _=e.playlistParsingError=new Error("No Segments found in Playlist");c.trigger(Be.ERROR,{type:Oi.NETWORK_ERROR,details:br.LEVEL_EMPTY_ERROR,fatal:!1,url:g,error:_,reason:_.message,response:r,context:i,level:x,parent:y,networkDetails:a,stats:n});return}switch(e.live&&o&&(o.getCacheAge&&(e.ageHeader=o.getCacheAge()||0),(!o.getCacheAge||isNaN(e.ageHeader))&&(e.ageHeader=0)),u){case ba.MANIFEST:case ba.LEVEL:if(x){if(!d)x=0;else if(d!==c.levels[x]){const _=c.levels.indexOf(d);_>-1&&(x=_)}}c.trigger(Be.LEVEL_LOADED,{details:e,levelInfo:d||c.levels[0],level:x||0,id:f||0,stats:n,networkDetails:a,deliveryDirectives:p,withoutMultiVariant:u===ba.MANIFEST});break;case ba.AUDIO_TRACK:c.trigger(Be.AUDIO_TRACK_LOADED,{details:e,track:d,id:f||0,groupId:m||"",stats:n,networkDetails:a,deliveryDirectives:p});break;case ba.SUBTITLE_TRACK:c.trigger(Be.SUBTITLE_TRACK_LOADED,{details:e,track:d,id:f||0,groupId:m||"",stats:n,networkDetails:a,deliveryDirectives:p});break}}}class S0{static get version(){return h_}static isMSESupported(){return Rse()}static isSupported(){return qQe()}static getMediaSource(){return G0()}static get Events(){return Be}static get MetadataSchema(){return gf}static get ErrorTypes(){return Oi}static get ErrorDetails(){return br}static get DefaultConfig(){return S0.defaultConfig?S0.defaultConfig:MQe}static set DefaultConfig(e){S0.defaultConfig=e}constructor(e={}){this.config=void 0,this.userConfig=void 0,this.logger=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new DF,this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioStreamController=void 0,this.subtititleStreamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.interstitialsController=void 0,this.gapController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this._url=null,this._sessionId=void 0,this.triggeringException=void 0,this.started=!1;const r=this.logger=o7e(e.debug||!1,"Hls instance",e.assetPlayerId),n=this.config=UQe(S0.DefaultConfig,e,r);this.userConfig=e,n.progressive&&$Qe(n,r);const{abrController:i,bufferController:a,capLevelController:o,errorController:c,fpsController:u}=n,l=new c(this),d=this.abrController=new i(this),f=new r$e(this),m=n.interstitialsController,p=m?this.interstitialsController=new m(this,S0):null,g=this.bufferController=new a(this,f),y=this.capLevelController=new o(this),x=new u(this),w=new tze(this),_=n.contentSteeringController,E=_?new _(this):null,N=this.levelController=new YQe(this,E),C=new GQe(this),I=new eze(this.config,this.logger),D=this.streamController=new JQe(this,f,I),U=this.gapController=new VQe(this,f);y.setStreamController(D),x.setStreamController(D);const G=[w,N,D];p&&G.splice(1,0,p),E&&G.splice(1,0,E),this.networkControllers=G;const q=[d,g,U,y,x,C,f];this.audioTrackController=this.createController(n.audioTrackController,G);const J=n.audioStreamController;J&&G.push(this.audioStreamController=new J(this,f,I)),this.subtitleTrackController=this.createController(n.subtitleTrackController,G);const de=n.subtitleStreamController;de&&G.push(this.subtititleStreamController=new de(this,f,I)),this.createController(n.timelineController,q),I.emeController=this.emeController=this.createController(n.emeController,q),this.cmcdController=this.createController(n.cmcdController,q),this.latencyController=this.createController(WQe,q),this.coreComponents=q,G.push(l);const xe=l.onErrorOut;typeof xe=="function"&&this.on(Be.ERROR,xe,l),this.on(Be.MANIFEST_LOADED,w.onManifestLoaded,w)}createController(e,r){if(e){const n=new e(this);return r&&r.push(n),n}return null}on(e,r,n=this){this._emitter.on(e,r,n)}once(e,r,n=this){this._emitter.once(e,r,n)}removeAllListeners(e){this._emitter.removeAllListeners(e)}off(e,r,n=this,i){this._emitter.off(e,r,n,i)}listeners(e){return this._emitter.listeners(e)}emit(e,r,n){return this._emitter.emit(e,r,n)}trigger(e,r){if(this.config.debug)return this.emit(e,e,r);try{return this.emit(e,e,r)}catch(n){if(this.logger.error("An internal error happened while handling event "+e+'. Error message: "'+n.message+'". Here is a stacktrace:',n),!this.triggeringException){this.triggeringException=!0;const i=e===Be.ERROR;this.trigger(Be.ERROR,{type:Oi.OTHER_ERROR,details:br.INTERNAL_EXCEPTION,fatal:i,event:e,error:n}),this.triggeringException=!1}}return!1}listenerCount(e){return this._emitter.listenerCount(e)}destroy(){this.logger.log("destroy"),this.trigger(Be.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this._url=null,this.networkControllers.forEach(r=>r.destroy()),this.networkControllers.length=0,this.coreComponents.forEach(r=>r.destroy()),this.coreComponents.length=0;const e=this.config;e.xhrSetup=e.fetchSetup=void 0,this.userConfig=null}attachMedia(e){if(!e||"media"in e&&!e.media){const a=new Error(`attachMedia failed: invalid argument (${e})`);this.trigger(Be.ERROR,{type:Oi.OTHER_ERROR,details:br.ATTACH_MEDIA_ERROR,fatal:!0,error:a});return}this.logger.log("attachMedia"),this._media&&(this.logger.warn("media must be detached before attaching"),this.detachMedia());const r="media"in e,n=r?e.media:e,i=r?e:{media:n};this._media=n,this.trigger(Be.MEDIA_ATTACHING,i)}detachMedia(){this.logger.log("detachMedia"),this.trigger(Be.MEDIA_DETACHING,{}),this._media=null}transferMedia(){this._media=null;const e=this.bufferController.transferMedia();return this.trigger(Be.MEDIA_DETACHING,{transferMedia:e}),e}loadSource(e){this.stopLoad();const r=this.media,n=this._url,i=this._url=jF.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.logger.log(`loadSource:${i}`),r&&n&&(n!==i||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(r)),this.trigger(Be.MANIFEST_LOADING,{url:e})}get url(){return this._url}get hasEnoughToStart(){return this.streamController.hasEnoughToStart}get startPosition(){return this.streamController.startPositionValue}startLoad(e=-1,r){this.logger.log(`startLoad(${e+(r?", <skip seek to start>":"")})`),this.started=!0,this.resumeBuffering();for(let n=0;n<this.networkControllers.length&&(this.networkControllers[n].startLoad(e,r),!(!this.started||!this.networkControllers));n++);}stopLoad(){this.logger.log("stopLoad"),this.started=!1;for(let e=0;e<this.networkControllers.length&&(this.networkControllers[e].stopLoad(),!(this.started||!this.networkControllers));e++);}get loadingEnabled(){return this.started}get bufferingEnabled(){return this.streamController.bufferingEnabled}resumeBuffering(){this.bufferingEnabled||(this.logger.log("resume buffering"),this.networkControllers.forEach(e=>{e.resumeBuffering&&e.resumeBuffering()}))}pauseBuffering(){this.bufferingEnabled&&(this.logger.log("pause buffering"),this.networkControllers.forEach(e=>{e.pauseBuffering&&e.pauseBuffering()}))}get inFlightFragments(){const e={[fi.MAIN]:this.streamController.inFlightFrag};return this.audioStreamController&&(e[fi.AUDIO]=this.audioStreamController.inFlightFrag),this.subtititleStreamController&&(e[fi.SUBTITLE]=this.subtititleStreamController.inFlightFrag),e}swapAudioCodec(){this.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()}recoverMediaError(){this.logger.log("recoverMediaError");const e=this._media,r=e?.currentTime;this.detachMedia(),e&&(this.attachMedia(e),r&&this.startLoad(r))}removeLevel(e){this.levelController.removeLevel(e)}get sessionId(){let e=this._sessionId;return e||(e=this._sessionId=VHe()),e}get levels(){const e=this.levelController.levels;return e||[]}get latestLevelDetails(){return this.streamController.getLevelDetails()||null}get loadLevelObj(){return this.levelController.loadLevelObj}get currentLevel(){return this.streamController.currentLevel}set currentLevel(e){this.logger.log(`set currentLevel:${e}`),this.levelController.manualLevel=e,this.streamController.immediateLevelSwitch()}get nextLevel(){return this.streamController.nextLevel}set nextLevel(e){this.logger.log(`set nextLevel:${e}`),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(e){this.logger.log(`set loadLevel:${e}`),this.levelController.manualLevel=e}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(e){this.levelController.nextLoadLevel=e}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(e){this.logger.log(`set firstLevel:${e}`),this.levelController.firstLevel=e}get startLevel(){const e=this.levelController.startLevel;return e===-1&&this.abrController.forcedAutoLevel>-1?this.abrController.forcedAutoLevel:e}set startLevel(e){this.logger.log(`set startLevel:${e}`),e!==-1&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(e){const r=!!e;r!==this.config.capLevelToPlayerSize&&(r?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=r)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimate():NaN}set bandwidthEstimate(e){this.abrController.resetEstimator(e)}get abrEwmaDefaultEstimate(){const{bwEstimator:e}=this.abrController;return e?e.defaultEstimate:NaN}get ttfbEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimateTTFB():NaN}set autoLevelCapping(e){this._autoLevelCapping!==e&&(this.logger.log(`set autoLevelCapping:${e}`),this._autoLevelCapping=e,this.levelController.checkMaxAutoUpdated())}get maxHdcpLevel(){return this._maxHdcpLevel}set maxHdcpLevel(e){U7e(e)&&this._maxHdcpLevel!==e&&(this._maxHdcpLevel=e,this.levelController.checkMaxAutoUpdated())}get autoLevelEnabled(){return this.levelController.manualLevel===-1}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){const{levels:e,config:{minAutoBitrate:r}}=this;if(!e)return 0;const n=e.length;for(let i=0;i<n;i++)if(e[i].maxBitrate>=r)return i;return 0}get maxAutoLevel(){const{levels:e,autoLevelCapping:r,maxHdcpLevel:n}=this;let i;if(r===-1&&e!=null&&e.length?i=e.length-1:i=r,n)for(let a=i;a--;){const o=e[a].attrs["HDCP-LEVEL"];if(o&&o<=n)return a}return i}get firstAutoLevel(){return this.abrController.firstAutoLevel}get nextAutoLevel(){return this.abrController.nextAutoLevel}set nextAutoLevel(e){this.abrController.nextAutoLevel=e}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}get maxBufferLength(){return this.streamController.maxBufferLength}setAudioOption(e){var r;return((r=this.audioTrackController)==null?void 0:r.setAudioOption(e))||null}setSubtitleOption(e){var r;return((r=this.subtitleTrackController)==null?void 0:r.setSubtitleOption(e))||null}get allAudioTracks(){const e=this.audioTrackController;return e?e.allAudioTracks:[]}get audioTracks(){const e=this.audioTrackController;return e?e.audioTracks:[]}get audioTrack(){const e=this.audioTrackController;return e?e.audioTrack:-1}set audioTrack(e){const r=this.audioTrackController;r&&(r.audioTrack=e)}get allSubtitleTracks(){const e=this.subtitleTrackController;return e?e.allSubtitleTracks:[]}get subtitleTracks(){const e=this.subtitleTrackController;return e?e.subtitleTracks:[]}get subtitleTrack(){const e=this.subtitleTrackController;return e?e.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(e){const r=this.subtitleTrackController;r&&(r.subtitleTrack=e)}get subtitleDisplay(){const e=this.subtitleTrackController;return e?e.subtitleDisplay:!1}set subtitleDisplay(e){const r=this.subtitleTrackController;r&&(r.subtitleDisplay=e)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(e){this.config.lowLatencyMode=e}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}set targetLatency(e){this.latencyController.targetLatency=e}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}get pathways(){return this.levelController.pathways}get pathwayPriority(){return this.levelController.pathwayPriority}set pathwayPriority(e){this.levelController.pathwayPriority=e}get bufferedToEnd(){var e;return!!((e=this.bufferController)!=null&&e.bufferedToEnd)}get interstitialsManager(){var e;return((e=this.interstitialsController)==null?void 0:e.interstitialsManager)||null}getMediaDecodingInfo(e,r=this.allAudioTracks){const n=wie(r);return xie(e,n,navigator.mediaCapabilities)}}S0.defaultConfig=void 0;var Pa=S0,jl={VIDEO:"video",THUMBNAIL:"thumbnail",STORYBOARD:"storyboard",DRM:"drm"},ts={NOT_AN_ERROR:0,NETWORK_OFFLINE:2000002,NETWORK_UNKNOWN_ERROR:2e6,NETWORK_NO_STATUS:2000001,NETWORK_INVALID_URL:24e5,NETWORK_NOT_FOUND:2404e3,NETWORK_NOT_READY:2412e3,NETWORK_GENERIC_SERVER_FAIL:25e5,NETWORK_TOKEN_MISSING:2403201,NETWORK_TOKEN_MALFORMED:2412202,NETWORK_TOKEN_EXPIRED:2403210,NETWORK_TOKEN_AUD_MISSING:2403221,NETWORK_TOKEN_AUD_MISMATCH:2403222,NETWORK_TOKEN_SUB_MISMATCH:2403232,ENCRYPTED_ERROR:5e6,ENCRYPTED_UNSUPPORTED_KEY_SYSTEM:5000001,ENCRYPTED_GENERATE_REQUEST_FAILED:5000002,ENCRYPTED_UPDATE_LICENSE_FAILED:5000003,ENCRYPTED_UPDATE_SERVER_CERT_FAILED:5000004,ENCRYPTED_CDM_ERROR:5000005,ENCRYPTED_OUTPUT_RESTRICTED:5000006,ENCRYPTED_MISSING_TOKEN:5000002},X5=t=>t===jl.VIDEO?"playback":t,l0=class Bw extends Error{constructor(e,r=Bw.MEDIA_ERR_CUSTOM,n,i){var a;super(e),this.name="MediaError",this.code=r,this.context=i,this.fatal=n??(r>=Bw.MEDIA_ERR_NETWORK&&r<=Bw.MEDIA_ERR_ENCRYPTED),this.message||(this.message=(a=Bw.defaultMessages[this.code])!=null?a:"")}};l0.MEDIA_ERR_ABORTED=1,l0.MEDIA_ERR_NETWORK=2,l0.MEDIA_ERR_DECODE=3,l0.MEDIA_ERR_SRC_NOT_SUPPORTED=4,l0.MEDIA_ERR_ENCRYPTED=5,l0.MEDIA_ERR_CUSTOM=100,l0.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail.",3:"A media error caused playback to be aborted. The media could be corrupt or your browser does not support this format.",4:"An unsupported error occurred. The server or network failed, or your browser does not support this format.",5:"The media is encrypted and there are no keys to decrypt it."};var ii=l0,rze=t=>t==null,YF=(t,e)=>rze(e)?!1:t in e,PO={ANY:"any",MUTED:"muted"},Lo={ON_DEMAND:"on-demand",LIVE:"live",UNKNOWN:"unknown"},UA={MSE:"mse",NATIVE:"native"},Pw={HEADER:"header",QUERY:"query",NONE:"none"},hN=Object.values(Pw),qp={M3U8:"application/vnd.apple.mpegurl",MP4:"video/mp4"},DG={HLS:qp.M3U8};[...Object.values(qp)];var nze="en",OO={code:nze},pu=(t,e,r,n,i=t)=>{i.addEventListener(e,r,n),t.addEventListener("teardown",()=>{i.removeEventListener(e,r)},{once:!0})};function ize(t,e,r){e&&r>e&&(r=e);for(let n=0;n<t.length;n++)if(t.start(n)<=r&&t.end(n)>=r)return!0;return!1}var qF=t=>{let e=t.indexOf("?");if(e<0)return[t];let r=t.slice(0,e),n=t.slice(e);return[r,n]},Z5=t=>{let{type:e}=t;if(e){let r=e.toUpperCase();return YF(r,DG)?DG[r]:e}return sze(t)},Dse=t=>t==="VOD"?Lo.ON_DEMAND:Lo.LIVE,Mse=t=>t==="EVENT"?Number.POSITIVE_INFINITY:t==="VOD"?Number.NaN:0,sze=t=>{let{src:e}=t;if(!e)return"";let r="";try{r=new URL(e).pathname}catch{console.error("invalid url")}let n=r.lastIndexOf(".");if(n<0)return oze(t)?qp.M3U8:"";let i=r.slice(n+1).toUpperCase();return YF(i,qp)?qp[i]:""},aze="mux.com",oze=({src:t,customDomain:e=aze})=>{let r;try{r=new URL(`${t}`)}catch{return!1}let n=r.protocol==="https:",i=r.hostname===`stream.${e}`.toLowerCase(),a=r.pathname.split("/"),o=a.length===2,c=!(a!=null&&a[1].includes("."));return n&&i&&o&&c},Cb=t=>{let e=(t??"").split(".")[1];if(e)try{let r=e.replace(/-/g,"+").replace(/_/g,"/"),n=decodeURIComponent(atob(r).split("").map(function(i){return"%"+("00"+i.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(n)}catch{return}},lze=({exp:t},e=Date.now())=>!t||t*1e3<e,cze=({sub:t},e)=>t!==e,uze=({aud:t},e)=>!t,dze=({aud:t},e)=>t!==e,Fse="en";function Ki(t,e=!0){var r,n;let i=e&&(n=(r=OO)==null?void 0:r[t])!=null?n:t,a=e?OO.code:Fse;return new hze(i,a)}var hze=class{constructor(t,e=(r=>(r=OO)!=null?r:Fse)()){this.message=t,this.locale=e}format(t){return this.message.replace(/\{(\w+)\}/g,(e,r)=>{var n;return(n=t[r])!=null?n:""})}toString(){return this.message}},fze=Object.values(PO),MG=t=>typeof t=="boolean"||typeof t=="string"&&fze.includes(t),mze=(t,e,r)=>{let{autoplay:n}=t,i=!1,a=!1,o=MG(n)?n:!!n,c=()=>{i||pu(e,"playing",()=>{i=!0},{once:!0})};if(c(),pu(e,"loadstart",()=>{i=!1,c(),ZI(e,o)},{once:!0}),pu(e,"loadstart",()=>{r||(t.streamType&&t.streamType!==Lo.UNKNOWN?a=t.streamType===Lo.LIVE:a=!Number.isFinite(e.duration)),ZI(e,o)},{once:!0}),r&&r.once(Pa.Events.LEVEL_LOADED,(u,l)=>{var d;t.streamType&&t.streamType!==Lo.UNKNOWN?a=t.streamType===Lo.LIVE:a=(d=l.details.live)!=null?d:!1}),!o){let u=()=>{!a||Number.isFinite(t.startTime)||(r!=null&&r.liveSyncPosition?e.currentTime=r.liveSyncPosition:Number.isFinite(e.seekable.end(0))&&(e.currentTime=e.seekable.end(0)))};r&&pu(e,"play",()=>{e.preload==="metadata"?r.once(Pa.Events.LEVEL_UPDATED,u):u()},{once:!0})}return u=>{i||(o=MG(u)?u:!!u,ZI(e,o))}},ZI=(t,e)=>{if(!e)return;let r=t.muted,n=()=>t.muted=r;switch(e){case PO.ANY:t.play().catch(()=>{t.muted=!0,t.play().catch(n)});break;case PO.MUTED:t.muted=!0,t.play().catch(n);break;default:t.play().catch(()=>{});break}},Aze=({preload:t,src:e},r,n)=>{let i=f=>{f!=null&&["","none","metadata","auto"].includes(f)?r.setAttribute("preload",f):r.removeAttribute("preload")};if(!n)return i(t),i;let a=!1,o=!1,c=n.config.maxBufferLength,u=n.config.maxBufferSize,l=f=>{i(f);let m=f??r.preload;o||m==="none"||(m==="metadata"?(n.config.maxBufferLength=1,n.config.maxBufferSize=1):(n.config.maxBufferLength=c,n.config.maxBufferSize=u),d())},d=()=>{!a&&e&&(a=!0,n.loadSource(e))};return pu(r,"play",()=>{o=!0,n.config.maxBufferLength=c,n.config.maxBufferSize=u,d()},{once:!0}),l(t),l};function pze(t,e){var r;if(!("videoTracks"in t))return;let n=new WeakMap;e.on(Pa.Events.MANIFEST_PARSED,function(u,l){c();let d=t.addVideoTrack("main");d.selected=!0;for(let[f,m]of l.levels.entries()){let p=d.addRendition(m.url[0],m.width,m.height,m.videoCodec,m.bitrate);n.set(m,`${f}`),p.id=`${f}`}}),e.on(Pa.Events.AUDIO_TRACKS_UPDATED,function(u,l){o();for(let d of l.audioTracks){let f=d.default?"main":"alternative",m=t.addAudioTrack(f,d.name,d.lang);m.id=`${d.id}`,d.default&&(m.enabled=!0)}}),t.audioTracks.addEventListener("change",()=>{var u;let l=+((u=[...t.audioTracks].find(f=>f.enabled))==null?void 0:u.id),d=e.audioTracks.map(f=>f.id);l!=e.audioTrack&&d.includes(l)&&(e.audioTrack=l)}),e.on(Pa.Events.LEVELS_UPDATED,function(u,l){var d;let f=t.videoTracks[(d=t.videoTracks.selectedIndex)!=null?d:0];if(!f)return;let m=l.levels.map(p=>n.get(p));for(let p of t.videoRenditions)p.id&&!m.includes(p.id)&&f.removeRendition(p)});let i=u=>{let l=u.target.selectedIndex;l!=e.nextLevel&&(e.nextLevel=l)};(r=t.videoRenditions)==null||r.addEventListener("change",i);let a=()=>{for(let u of t.videoTracks)t.removeVideoTrack(u)},o=()=>{for(let u of t.audioTracks)t.removeAudioTrack(u)},c=()=>{a(),o()};e.once(Pa.Events.DESTROYING,c)}var JI=t=>"time"in t?t.time:t.startTime;function gze(t,e){e.on(Pa.Events.NON_NATIVE_TEXT_TRACKS_FOUND,(i,{tracks:a})=>{a.forEach(o=>{var c,u;let l=(c=o.subtitleTrack)!=null?c:o.closedCaptions,d=e.subtitleTracks.findIndex(({lang:m,name:p,type:g})=>m==l?.lang&&p===o.label&&g.toLowerCase()===o.kind),f=((u=o._id)!=null?u:o.default)?"default":`${o.kind}${d}`;XF(t,o.kind,o.label,l?.lang,f,o.default)})});let r=()=>{if(!e.subtitleTracks.length)return;let i=Array.from(t.textTracks).find(c=>c.id&&c.mode==="showing"&&["subtitles","captions"].includes(c.kind));if(!i)return;let a=e.subtitleTracks[e.subtitleTrack],o=a?a.default?"default":`${e.subtitleTracks[e.subtitleTrack].type.toLowerCase()}${e.subtitleTrack}`:void 0;if(e.subtitleTrack<0||i?.id!==o){let c=e.subtitleTracks.findIndex(({lang:u,name:l,type:d,default:f})=>i.id==="default"&&f||u==i.language&&l===i.label&&d.toLowerCase()===i.kind);e.subtitleTrack=c}i?.id===o&&i.cues&&Array.from(i.cues).forEach(c=>{i.addCue(c)})};t.textTracks.addEventListener("change",r),e.on(Pa.Events.CUES_PARSED,(i,{track:a,cues:o})=>{let c=t.textTracks.getTrackById(a);if(!c)return;let u=c.mode==="disabled";u&&(c.mode="hidden"),o.forEach(l=>{var d;(d=c.cues)!=null&&d.getCueById(l.id)||c.addCue(l)}),u&&(c.mode="disabled")}),e.once(Pa.Events.DESTROYING,()=>{t.textTracks.removeEventListener("change",r),t.querySelectorAll("track[data-removeondestroy]").forEach(i=>{i.remove()})});let n=()=>{Array.from(t.textTracks).forEach(i=>{var a,o;if(!["subtitles","caption"].includes(i.kind)&&(i.label==="thumbnails"||i.kind==="chapters")){if(!((a=i.cues)!=null&&a.length)){let c="track";i.kind&&(c+=`[kind="${i.kind}"]`),i.label&&(c+=`[label="${i.label}"]`);let u=t.querySelector(c),l=(o=u?.getAttribute("src"))!=null?o:"";u?.removeAttribute("src"),setTimeout(()=>{u?.setAttribute("src",l)},0)}i.mode!=="hidden"&&(i.mode="hidden")}})};e.once(Pa.Events.MANIFEST_LOADED,n),e.once(Pa.Events.MEDIA_ATTACHED,n)}function XF(t,e,r,n,i,a){let o=document.createElement("track");return o.kind=e,o.label=r,n&&(o.srclang=n),i&&(o.id=i),a&&(o.default=!0),o.track.mode=["subtitles","captions"].includes(e)?"disabled":"hidden",o.setAttribute("data-removeondestroy",""),t.append(o),o.track}function vze(t,e){let r=Array.prototype.find.call(t.querySelectorAll("track"),n=>n.track===e);r?.remove()}function xE(t,e,r){var n;return(n=Array.from(t.querySelectorAll("track")).find(i=>i.track.label===e&&i.track.kind===r))==null?void 0:n.track}async function Use(t,e,r,n){let i=xE(t,r,n);return i||(i=XF(t,n,r),i.mode="hidden",await new Promise(a=>setTimeout(()=>a(void 0),0))),i.mode!=="hidden"&&(i.mode="hidden"),[...e].sort((a,o)=>JI(o)-JI(a)).forEach(a=>{var o,c;let u=a.value,l=JI(a);if("endTime"in a&&a.endTime!=null)i?.addCue(new VTTCue(l,a.endTime,n==="chapters"?u:JSON.stringify(u??null)));else{let d=Array.prototype.findIndex.call(i?.cues,g=>g.startTime>=l),f=(o=i?.cues)==null?void 0:o[d],m=f?f.startTime:Number.isFinite(t.duration)?t.duration:Number.MAX_SAFE_INTEGER,p=(c=i?.cues)==null?void 0:c[d-1];p&&(p.endTime=l),i?.addCue(new VTTCue(l,m,n==="chapters"?u:JSON.stringify(u??null)))}}),t.textTracks.dispatchEvent(new Event("change",{bubbles:!0,composed:!0})),i}var ZF="cuepoints",$se=Object.freeze({label:ZF});async function Hse(t,e,r=$se){return Use(t,e,r.label,"metadata")}var RO=t=>({time:t.startTime,value:JSON.parse(t.text)});function yze(t,e={label:ZF}){let r=xE(t,e.label,"metadata");return r!=null&&r.cues?Array.from(r.cues,n=>RO(n)):[]}function Qse(t,e={label:ZF}){var r,n;let i=xE(t,e.label,"metadata");if(!((r=i?.activeCues)!=null&&r.length))return;if(i.activeCues.length===1)return RO(i.activeCues[0]);let{currentTime:a}=t,o=Array.prototype.find.call((n=i.activeCues)!=null?n:[],({startTime:c,endTime:u})=>c<=a&&u>a);return RO(o||i.activeCues[0])}async function xze(t,e=$se){return new Promise(r=>{pu(t,"loadstart",async()=>{let n=await Hse(t,[],e);pu(t,"cuechange",()=>{let i=Qse(t);if(i){let a=new CustomEvent("cuepointchange",{composed:!0,bubbles:!0,detail:i});t.dispatchEvent(a)}},{},n),r(n)})})}var JF="chapters",zse=Object.freeze({label:JF}),DO=t=>({startTime:t.startTime,endTime:t.endTime,value:t.text});async function Vse(t,e,r=zse){return Use(t,e,r.label,"chapters")}function bze(t,e={label:JF}){var r;let n=xE(t,e.label,"chapters");return(r=n?.cues)!=null&&r.length?Array.from(n.cues,i=>DO(i)):[]}function Kse(t,e={label:JF}){var r,n;let i=xE(t,e.label,"chapters");if(!((r=i?.activeCues)!=null&&r.length))return;if(i.activeCues.length===1)return DO(i.activeCues[0]);let{currentTime:a}=t,o=Array.prototype.find.call((n=i.activeCues)!=null?n:[],({startTime:c,endTime:u})=>c<=a&&u>a);return DO(o||i.activeCues[0])}async function wze(t,e=zse){return new Promise(r=>{pu(t,"loadstart",async()=>{let n=await Vse(t,[],e);pu(t,"cuechange",()=>{let i=Kse(t);if(i){let a=new CustomEvent("chapterchange",{composed:!0,bubbles:!0,detail:i});t.dispatchEvent(a)}},{},n),r(n)})})}function _ze(t,e){if(e){let r=e.playingDate;if(r!=null)return new Date(r.getTime()-t.currentTime*1e3)}return typeof t.getStartDate=="function"?t.getStartDate():new Date(NaN)}function Eze(t,e){if(e&&e.playingDate)return e.playingDate;if(typeof t.getStartDate=="function"){let r=t.getStartDate();return new Date(r.getTime()+t.currentTime*1e3)}return new Date(NaN)}var b2={VIDEO:"v",THUMBNAIL:"t",STORYBOARD:"s",DRM:"d"},Sze=t=>{if(t===jl.VIDEO)return b2.VIDEO;if(t===jl.DRM)return b2.DRM},jze=(t,e)=>{var r,n;let i=X5(t),a=`${i}Token`;return(r=e.tokens)!=null&&r[i]?(n=e.tokens)==null?void 0:n[i]:YF(a,e)?e[a]:void 0},fN=(t,e,r,n,i=!1,a=!(o=>(o=globalThis.navigator)==null?void 0:o.onLine)())=>{var o,c;if(a){let w=Ki("Your device appears to be offline",i),_,E=ii.MEDIA_ERR_NETWORK,N=new ii(w,E,!1,_);return N.errorCategory=e,N.muxCode=ts.NETWORK_OFFLINE,N.data=t,N}let u="status"in t?t.status:t.code,l=Date.now(),d=ii.MEDIA_ERR_NETWORK;if(u===200)return;let f=X5(e),m=jze(e,r),p=Sze(e),[g]=qF((o=r.playbackId)!=null?o:"");if(!u||!g)return;let y=Cb(m);if(m&&!y){let w=Ki("The {tokenNamePrefix}-token provided is invalid or malformed.",i).format({tokenNamePrefix:f}),_=Ki("Compact JWT string: {token}",i).format({token:m}),E=new ii(w,d,!0,_);return E.errorCategory=e,E.muxCode=ts.NETWORK_TOKEN_MALFORMED,E.data=t,E}if(u>=500){let w=new ii("",d,n??!0);return w.errorCategory=e,w.muxCode=ts.NETWORK_UNKNOWN_ERROR,w}if(u===403)if(y){if(lze(y,l)){let w={timeStyle:"medium",dateStyle:"medium"},_=Ki("The videos secured {tokenNamePrefix}-token has expired.",i).format({tokenNamePrefix:f}),E=Ki("Expired at: {expiredDate}. Current time: {currentDate}.",i).format({expiredDate:new Intl.DateTimeFormat("en",w).format((c=y.exp)!=null?c:0*1e3),currentDate:new Intl.DateTimeFormat("en",w).format(l)}),N=new ii(_,d,!0,E);return N.errorCategory=e,N.muxCode=ts.NETWORK_TOKEN_EXPIRED,N.data=t,N}if(cze(y,g)){let w=Ki("The videos playback ID does not match the one encoded in the {tokenNamePrefix}-token.",i).format({tokenNamePrefix:f}),_=Ki("Specified playback ID: {playbackId} and the playback ID encoded in the {tokenNamePrefix}-token: {tokenPlaybackId}",i).format({tokenNamePrefix:f,playbackId:g,tokenPlaybackId:y.sub}),E=new ii(w,d,!0,_);return E.errorCategory=e,E.muxCode=ts.NETWORK_TOKEN_SUB_MISMATCH,E.data=t,E}if(uze(y)){let w=Ki("The {tokenNamePrefix}-token is formatted with incorrect information.",i).format({tokenNamePrefix:f}),_=Ki("The {tokenNamePrefix}-token has no aud value. aud value should be {expectedAud}.",i).format({tokenNamePrefix:f,expectedAud:p}),E=new ii(w,d,!0,_);return E.errorCategory=e,E.muxCode=ts.NETWORK_TOKEN_AUD_MISSING,E.data=t,E}if(dze(y,p)){let w=Ki("The {tokenNamePrefix}-token is formatted with incorrect information.",i).format({tokenNamePrefix:f}),_=Ki("The {tokenNamePrefix}-token has an incorrect aud value: {aud}. aud value should be {expectedAud}.",i).format({tokenNamePrefix:f,expectedAud:p,aud:y.aud}),E=new ii(w,d,!0,_);return E.errorCategory=e,E.muxCode=ts.NETWORK_TOKEN_AUD_MISMATCH,E.data=t,E}}else{let w=Ki("Authorization error trying to access this {category} URL. If this is a signed URL, you might need to provide a {tokenNamePrefix}-token.",i).format({tokenNamePrefix:f,category:e}),_=Ki("Specified playback ID: {playbackId}",i).format({playbackId:g}),E=new ii(w,d,n??!0,_);return E.errorCategory=e,E.muxCode=ts.NETWORK_TOKEN_MISSING,E.data=t,E}if(u===412){let w=Ki("This playback-id may belong to a live stream that is not currently active or an asset that is not ready.",i),_=Ki("Specified playback ID: {playbackId}",i).format({playbackId:g}),E=new ii(w,d,n??!0,_);return E.errorCategory=e,E.muxCode=ts.NETWORK_NOT_READY,E.streamType=r.streamType===Lo.LIVE?"live":r.streamType===Lo.ON_DEMAND?"on-demand":"unknown",E.data=t,E}if(u===404){let w=Ki("This URL or playback-id does not exist. You may have used an Asset ID or an ID from a different resource.",i),_=Ki("Specified playback ID: {playbackId}",i).format({playbackId:g}),E=new ii(w,d,n??!0,_);return E.errorCategory=e,E.muxCode=ts.NETWORK_NOT_FOUND,E.data=t,E}if(u===400){let w=Ki("The URL or playback-id was invalid. You may have used an invalid value as a playback-id."),_=Ki("Specified playback ID: {playbackId}",i).format({playbackId:g}),E=new ii(w,d,n??!0,_);return E.errorCategory=e,E.muxCode=ts.NETWORK_INVALID_URL,E.data=t,E}let x=new ii("",d,n??!0);return x.errorCategory=e,x.muxCode=ts.NETWORK_UNKNOWN_ERROR,x.data=t,x},FG=Pa.DefaultConfig.capLevelController,Tze={"720p":921600,"1080p":2073600,"1440p":4194304,"2160p":8294400};function Cze(t){let e=t.toLowerCase().trim();return Tze[e]}var MO=class Ow extends FG{constructor(e){super(e)}static setMaxAutoResolution(e,r){r?Ow.maxAutoResolution.set(e,r):Ow.maxAutoResolution.delete(e)}getMaxAutoResolution(){var e;let r=this.hls;return(e=Ow.maxAutoResolution.get(r))!=null?e:void 0}get levels(){var e;return(e=this.hls.levels)!=null?e:[]}getValidLevels(e){return this.levels.filter((r,n)=>this.isLevelAllowed(r)&&n<=e)}getMaxLevelCapped(e){let r=this.getValidLevels(e),n=this.getMaxAutoResolution();if(!n)return super.getMaxLevel(e);let i=Cze(n);if(!i)return super.getMaxLevel(e);let a=r.filter(u=>u.width*u.height<=i),o=a.findIndex(u=>u.width*u.height===i);if(o!==-1){let u=a[o];return r.findIndex(l=>l===u)}if(a.length===0)return 0;let c=a[a.length-1];return r.findIndex(u=>u===c)}getMaxLevel(e){if(this.getMaxAutoResolution()!==void 0)return this.getMaxLevelCapped(e);let r=super.getMaxLevel(e),n=this.getValidLevels(e);if(!n[r])return r;let i=Math.min(n[r].width,n[r].height),a=Ow.minMaxResolution;return i>=a?r:FG.getMaxLevelByMediaSize(n,a*(16/9),a)}};MO.minMaxResolution=720,MO.maxAutoResolution=new WeakMap;var Nze=MO,FO=Nze,bj={FAIRPLAY:"fairplay",PLAYREADY:"playready",WIDEVINE:"widevine"},kze=t=>{if(t.includes("fps"))return bj.FAIRPLAY;if(t.includes("playready"))return bj.PLAYREADY;if(t.includes("widevine"))return bj.WIDEVINE},Lze=t=>{let e=t.split(`
`).find((r,n,i)=>n&&i[n-1].startsWith("#EXT-X-STREAM-INF"));return fetch(e).then(r=>r.status!==200?Promise.reject(r):r.text())},Ize=t=>{let e=t.split(`
`).filter(n=>n.startsWith("#EXT-X-SESSION-DATA"));if(!e.length)return{};let r={};for(let n of e){let i=Pze(n),a=i["DATA-ID"];a&&(r[a]={...i})}return{sessionData:r}},Bze=/([A-Z0-9-]+)="?(.*?)"?(?:,|$)/g;function Pze(t){let e=[...t.matchAll(Bze)];return Object.fromEntries(e.map(([,r,n])=>[r,n]))}var Oze=t=>{var e,r,n;let i=t.split(`
`),a=(r=((e=i.find(l=>l.startsWith("#EXT-X-PLAYLIST-TYPE")))!=null?e:"").split(":")[1])==null?void 0:r.trim(),o=Dse(a),c=Mse(a),u;if(o===Lo.LIVE){let l=i.find(d=>d.startsWith("#EXT-X-PART-INF"));if(l)u=+l.split(":")[1].split("=")[1]*2;else{let d=i.find(m=>m.startsWith("#EXT-X-TARGETDURATION")),f=(n=d?.split(":"))==null?void 0:n[1];u=+(f??6)*3}}return{streamType:o,targetLiveWindow:c,liveEdgeStartOffset:u}},Rze=async(t,e)=>{if(e===qp.MP4)return{streamType:Lo.ON_DEMAND,targetLiveWindow:Number.NaN,liveEdgeStartOffset:void 0,sessionData:void 0};if(e===qp.M3U8){let r=await fetch(t);if(!r.ok)return Promise.reject(r);let n=await r.text(),i=await Lze(n);return{...Ize(n),...Oze(i)}}return console.error(`Media type ${e} is an unrecognized or unsupported type for src ${t}.`),{streamType:void 0,targetLiveWindow:void 0,liveEdgeStartOffset:void 0,sessionData:void 0}},Dze=async(t,e,r=Z5({src:t}))=>{var n,i,a,o;let{streamType:c,targetLiveWindow:u,liveEdgeStartOffset:l,sessionData:d}=await Rze(t,r),f=d?.["com.apple.hls.chapters"];(f!=null&&f.URI||f!=null&&f.VALUE.toLocaleLowerCase().startsWith("http"))&&e6((n=f.URI)!=null?n:f.VALUE,e),((i=Rc.get(e))!=null?i:{}).liveEdgeStartOffset=l,((a=Rc.get(e))!=null?a:{}).targetLiveWindow=u,e.dispatchEvent(new CustomEvent("targetlivewindowchange",{composed:!0,bubbles:!0})),((o=Rc.get(e))!=null?o:{}).streamType=c,e.dispatchEvent(new CustomEvent("streamtypechange",{composed:!0,bubbles:!0}))},e6=async(t,e)=>{var r,n;try{let i=await fetch(t);if(!i.ok)throw new Error(`Failed to fetch Mux metadata: ${i.status} ${i.statusText}`);let a=await i.json(),o={};if(!((r=a?.[0])!=null&&r.metadata))return;for(let u of a[0].metadata)u.key&&u.value&&(o[u.key]=u.value);((n=Rc.get(e))!=null?n:{}).metadata=o;let c=new CustomEvent("muxmetadata");e.dispatchEvent(c)}catch(i){console.error(i)}},Mze=t=>{var e;let r=t.type,n=Dse(r),i=Mse(r),a,o=!!((e=t.partList)!=null&&e.length);return n===Lo.LIVE&&(a=o?t.partTarget*2:t.targetduration*3),{streamType:n,targetLiveWindow:i,liveEdgeStartOffset:a,lowLatency:o}},Fze=(t,e,r)=>{var n,i,a,o,c,u,l,d;let{streamType:f,targetLiveWindow:m,liveEdgeStartOffset:p,lowLatency:g}=Mze(t);if(f===Lo.LIVE){g?(r.config.backBufferLength=(n=r.userConfig.backBufferLength)!=null?n:4,r.config.maxFragLookUpTolerance=(i=r.userConfig.maxFragLookUpTolerance)!=null?i:.001,r.config.abrBandWidthUpFactor=(a=r.userConfig.abrBandWidthUpFactor)!=null?a:r.config.abrBandWidthFactor):r.config.backBufferLength=(o=r.userConfig.backBufferLength)!=null?o:8;let y=Object.freeze({get length(){return e.seekable.length},start(x){return e.seekable.start(x)},end(x){var w;return x>this.length||x<0||Number.isFinite(e.duration)?e.seekable.end(x):(w=r.liveSyncPosition)!=null?w:e.seekable.end(x)}});((c=Rc.get(e))!=null?c:{}).seekable=y}((u=Rc.get(e))!=null?u:{}).liveEdgeStartOffset=p,((l=Rc.get(e))!=null?l:{}).targetLiveWindow=m,e.dispatchEvent(new CustomEvent("targetlivewindowchange",{composed:!0,bubbles:!0})),((d=Rc.get(e))!=null?d:{}).streamType=f,e.dispatchEvent(new CustomEvent("streamtypechange",{composed:!0,bubbles:!0}))},UG,$G,Gse=($G=(UG=globalThis?.navigator)==null?void 0:UG.userAgent)!=null?$G:"",HG,QG,zG,Uze=(zG=(QG=(HG=globalThis?.navigator)==null?void 0:HG.userAgentData)==null?void 0:QG.platform)!=null?zG:"",$ze=Gse.toLowerCase().includes("android")||["x11","android"].some(t=>Uze.toLowerCase().includes(t)),Hze=t=>/^((?!chrome|android).)*safari/i.test(Gse)&&!!t.canPlayType("application/vnd.apple.mpegurl"),Rc=new WeakMap,Xp="mux.com",VG,KG,Wse=(KG=(VG=Pa).isSupported)==null?void 0:KG.call(VG),Qze=t=>$ze||!Hze(t),t6=()=>{if(typeof window<"u")return SF.utils.now()},zze=SF.utils.generateUUID,UO=({playbackId:t,customDomain:e=Xp,maxResolution:r,minResolution:n,renditionOrder:i,programStartTime:a,programEndTime:o,assetStartTime:c,assetEndTime:u,playbackToken:l,tokens:{playback:d=l}={},extraSourceParams:f={}}={})=>{if(!t)return;let[m,p=""]=qF(t),g=new URL(`https://stream.${e}/${m}.m3u8${p}`);return d||g.searchParams.has("token")?(g.searchParams.forEach((y,x)=>{x!="token"&&g.searchParams.delete(x)}),d&&g.searchParams.set("token",d)):(r&&g.searchParams.set("max_resolution",r),n&&(g.searchParams.set("min_resolution",n),r&&+r.slice(0,-1)<+n.slice(0,-1)&&console.error("minResolution must be <= maxResolution","minResolution",n,"maxResolution",r)),i&&g.searchParams.set("rendition_order",i),a&&g.searchParams.set("program_start_time",`${a}`),o&&g.searchParams.set("program_end_time",`${o}`),c&&g.searchParams.set("asset_start_time",`${c}`),u&&g.searchParams.set("asset_end_time",`${u}`),Object.entries(f).forEach(([y,x])=>{x!=null&&g.searchParams.set(y,x)})),g.toString()},J5=t=>{if(!t)return;let[e]=t.split("?");return e||void 0},r6=t=>{if(!t||!t.startsWith("https://stream."))return;let[e]=new URL(t).pathname.slice(1).split(/\.m3u8|\//);return e||void 0},Vze=t=>{var e,r,n;return(e=t?.metadata)!=null&&e.video_id?t.metadata.video_id:rae(t)&&(n=(r=J5(t.playbackId))!=null?r:r6(t.src))!=null?n:t.src},Yse=t=>{var e;return(e=Rc.get(t))==null?void 0:e.error},Kze=t=>{var e;return(e=Rc.get(t))==null?void 0:e.metadata},$O=t=>{var e,r;return(r=(e=Rc.get(t))==null?void 0:e.streamType)!=null?r:Lo.UNKNOWN},Gze=t=>{var e,r;return(r=(e=Rc.get(t))==null?void 0:e.targetLiveWindow)!=null?r:Number.NaN},n6=t=>{var e,r;return(r=(e=Rc.get(t))==null?void 0:e.seekable)!=null?r:t.seekable},Wze=t=>{var e;let r=(e=Rc.get(t))==null?void 0:e.liveEdgeStartOffset;if(typeof r!="number")return Number.NaN;let n=n6(t);return n.length?n.end(n.length-1)-r:Number.NaN},i6=.034,Yze=(t,e,r=i6)=>Math.abs(t-e)<=r,qse=(t,e,r=i6)=>t>e||Yze(t,e,r),qze=(t,e=i6)=>t.paused&&qse(t.currentTime,t.duration,e),Xse=(t,e)=>{var r,n,i;if(!e||!t.buffered.length)return;if(t.readyState>2)return!1;let a=e.currentLevel>=0?(n=(r=e.levels)==null?void 0:r[e.currentLevel])==null?void 0:n.details:(i=e.levels.find(f=>!!f.details))==null?void 0:i.details;if(!a||a.live)return;let{fragments:o}=a;if(!(o!=null&&o.length))return;if(t.currentTime<t.duration-(a.targetduration+.5))return!1;let c=o[o.length-1];if(t.currentTime<=c.start)return!1;let u=c.start+c.duration/2,l=t.buffered.start(t.buffered.length-1),d=t.buffered.end(t.buffered.length-1);return u>l&&u<d},Zse=(t,e)=>t.ended||t.loop?t.ended:e&&Xse(t,e)?!0:qze(t),Xze=(t,e,r)=>{Jse(e,r,t);let{metadata:n={}}=t,{view_session_id:i=zze()}=n,a=Vze(t);n.view_session_id=i,n.video_id=a,t.metadata=n;let o=d=>{var f;(f=e.mux)==null||f.emit("hb",{view_drm_type:d})};t.drmTypeCb=o,Rc.set(e,{retryCount:0});let c=Zze(t,e),u=Aze(t,e,c);t!=null&&t.muxDataKeepSession&&e!=null&&e.mux&&!e.mux.deleted?c&&e.mux.addHLSJS({hlsjs:c,Hls:c?Pa:void 0}):sVe(t,e,c),aVe(t,e,c),xze(e),wze(e);let l=mze(t,e,c);return{engine:c,setAutoplay:l,setPreload:u}},Jse=(t,e,r)=>{let n=e?.engine;t!=null&&t.mux&&!t.mux.deleted&&(r!=null&&r.muxDataKeepSession?n&&t.mux.removeHLSJS():(t.mux.destroy(),delete t.mux)),n&&(n.detachMedia(),n.destroy()),t&&(t.hasAttribute("src")&&(t.removeAttribute("src"),t.load()),t.removeEventListener("error",iae),t.removeEventListener("error",HO),t.removeEventListener("durationchange",nae),Rc.delete(t),t.dispatchEvent(new Event("teardown")))};function eae(t,e){var r;let n=Z5(t);if(n!==qp.M3U8)return!0;let i=!n||((r=e.canPlayType(n))!=null?r:!0),{preferPlayback:a}=t,o=a===UA.MSE,c=a===UA.NATIVE,u=Wse&&(o||Qze(e));return i&&(c||!u)}var Zze=(t,e)=>{let{debug:r,streamType:n,startTime:i=-1,metadata:a,preferCmcd:o,_hlsConfig:c={},maxAutoResolution:u}=t,l=Z5(t)===qp.M3U8,d=eae(t,e);if(l&&!d&&Wse){let f={backBufferLength:30,renderTextTracksNatively:!1,liveDurationInfinity:!0,capLevelOnFPSDrop:!0},m=Jze(n),p=eVe(t),g=[Pw.QUERY,Pw.HEADER].includes(o)?{useHeaders:o===Pw.HEADER,sessionId:a?.view_session_id,contentId:a?.video_id}:void 0,y=iVe(t),x=new Pa({debug:r,startPosition:i,cmcd:g,xhrSetup:(w,_)=>{var E,N;if(o&&o!==Pw.QUERY)return;let C=new URL(_);if(!C.searchParams.has("CMCD"))return;let I=((N=(E=C.searchParams.get("CMCD"))==null?void 0:E.split(","))!=null?N:[]).filter(D=>D.startsWith("sid")||D.startsWith("cid")).join(",");C.searchParams.set("CMCD",I),w.open("GET",C)},...f,...y,...m,...p,...c});return y.capLevelController===FO&&u!==void 0&&FO.setMaxAutoResolution(x,u),x.on(Pa.Events.MANIFEST_PARSED,async function(w,_){var E,N;let C=(E=_.sessionData)==null?void 0:E["com.apple.hls.chapters"];(C!=null&&C.URI||C!=null&&C.VALUE.toLocaleLowerCase().startsWith("http"))&&e6((N=C?.URI)!=null?N:C?.VALUE,e)}),x}},Jze=t=>t===Lo.LIVE?{backBufferLength:8}:{},eVe=t=>{let{tokens:{drm:e}={},playbackId:r,drmTypeCb:n}=t,i=J5(r);return!e||!i?{}:{emeEnabled:!0,drmSystems:{"com.apple.fps":{licenseUrl:wj(t,"fairplay"),serverCertificateUrl:tae(t,"fairplay")},"com.widevine.alpha":{licenseUrl:wj(t,"widevine")},"com.microsoft.playready":{licenseUrl:wj(t,"playready")}},requestMediaKeySystemAccessFunc:(a,o)=>(a==="com.widevine.alpha"&&(o=[...o.map(c=>{var u;let l=(u=c.videoCapabilities)==null?void 0:u.map(d=>({...d,robustness:"HW_SECURE_ALL"}));return{...c,videoCapabilities:l}}),...o]),navigator.requestMediaKeySystemAccess(a,o).then(c=>{let u=kze(a);return n?.(u),c}))}},tVe=async t=>{let e=await fetch(t);return e.status!==200?Promise.reject(e):await e.arrayBuffer()},rVe=async(t,e)=>{let r=await fetch(e,{method:"POST",headers:{"Content-type":"application/octet-stream"},body:t});if(r.status!==200)return Promise.reject(r);let n=await r.arrayBuffer();return new Uint8Array(n)},nVe=(t,e)=>{let r=async a=>{let o=await navigator.requestMediaKeySystemAccess("com.apple.fps",[{initDataTypes:[a],videoCapabilities:[{contentType:"application/vnd.apple.mpegurl",robustness:""}],distinctiveIdentifier:"not-allowed",persistentState:"not-allowed",sessionTypes:["temporary"]}]).then(u=>{var l;return(l=t.drmTypeCb)==null||l.call(t,bj.FAIRPLAY),u}).catch(()=>{let u=Ki("Cannot play DRM-protected content with current security configuration on this browser. Try playing in another browser."),l=new ii(u,ii.MEDIA_ERR_ENCRYPTED,!0);l.errorCategory=jl.DRM,l.muxCode=ts.ENCRYPTED_UNSUPPORTED_KEY_SYSTEM,vf(e,l)});if(!o)return;let c=await o.createMediaKeys();try{let u=await tVe(tae(t,"fairplay")).catch(l=>{if(l instanceof Response){let d=fN(l,jl.DRM,t);return console.error("mediaError",d?.message,d?.context),d?Promise.reject(d):Promise.reject(new Error("Unexpected error in app cert request"))}return Promise.reject(l)});await c.setServerCertificate(u).catch(()=>{let l=Ki("Your server certificate failed when attempting to set it. This may be an issue with a no longer valid certificate."),d=new ii(l,ii.MEDIA_ERR_ENCRYPTED,!0);return d.errorCategory=jl.DRM,d.muxCode=ts.ENCRYPTED_UPDATE_SERVER_CERT_FAILED,Promise.reject(d)})}catch(u){vf(e,u);return}await e.setMediaKeys(c)},n=a=>{let o;if(a==="internal-error"){let c=Ki("The DRM Content Decryption Module system had an internal failure. Try reloading the page, upading your browser, or playing in another browser.");o=new ii(c,ii.MEDIA_ERR_ENCRYPTED,!0),o.errorCategory=jl.DRM,o.muxCode=ts.ENCRYPTED_CDM_ERROR}else if(a==="output-restricted"||a==="output-downscaled"){let c=Ki("DRM playback is being attempted in an environment that is not sufficiently secure. User may see black screen.");o=new ii(c,ii.MEDIA_ERR_ENCRYPTED,!1),o.errorCategory=jl.DRM,o.muxCode=ts.ENCRYPTED_OUTPUT_RESTRICTED}o&&vf(e,o)},i=async(a,o)=>{let c=e.mediaKeys.createSession(),u=()=>{c.keyStatuses.forEach(d=>n(d))},l=async d=>{let f=d.message;try{let m=await rVe(f,wj(t,"fairplay"));try{await c.update(m)}catch{let p=Ki("Failed to update DRM license. This may be an issue with the player or your protected content."),g=new ii(p,ii.MEDIA_ERR_ENCRYPTED,!0);g.errorCategory=jl.DRM,g.muxCode=ts.ENCRYPTED_UPDATE_LICENSE_FAILED,vf(e,g)}}catch(m){if(m instanceof Response){let p=fN(m,jl.DRM,t);if(console.error("mediaError",p?.message,p?.context),p){vf(e,p);return}console.error("Unexpected error in license key request",m);return}console.error(m)}};c.addEventListener("keystatuseschange",u),c.addEventListener("message",l),e.addEventListener("teardown",()=>{c.removeEventListener("keystatuseschange",u),c.removeEventListener("message",l),c.close()},{once:!0}),await c.generateRequest(a,o).catch(d=>{console.error("Failed to generate license request",d);let f=Ki("Failed to generate a DRM license request. This may be an issue with the player or your protected content."),m=new ii(f,ii.MEDIA_ERR_ENCRYPTED,!0);return m.errorCategory=jl.DRM,m.muxCode=ts.ENCRYPTED_GENERATE_REQUEST_FAILED,Promise.reject(m)})};pu(e,"encrypted",async a=>{try{let o=a.initDataType;if(o!=="skd"){console.error(`Received unexpected initialization data type "${o}"`);return}e.mediaKeys||await r(o);let c=a.initData;if(c==null){console.error(`Could not start encrypted playback due to missing initData in ${a.type} event`);return}await i(o,c)}catch(o){vf(e,o);return}})},wj=({playbackId:t,tokens:{drm:e}={},customDomain:r=Xp},n)=>{let i=J5(t);return`https://license.${r.toLocaleLowerCase().endsWith(Xp)?r:Xp}/license/${n}/${i}?token=${e}`},tae=({playbackId:t,tokens:{drm:e}={},customDomain:r=Xp},n)=>{let i=J5(t);return`https://license.${r.toLocaleLowerCase().endsWith(Xp)?r:Xp}/appcert/${n}/${i}?token=${e}`},rae=({playbackId:t,src:e,customDomain:r})=>{if(t)return!0;if(typeof e!="string")return!1;let n=window?.location.href,i=new URL(e,n).hostname.toLocaleLowerCase();return i.includes(Xp)||!!r&&i.includes(r.toLocaleLowerCase())},iVe=(t,e)=>{let r={};return r.capLevelToPlayerSize=t.capRenditionToPlayerSize,r.capLevelToPlayerSize==null?(r.capLevelController=FO,r.capLevelToPlayerSize=!0):r.capLevelController=Y5,r},sVe=(t,e,r)=>{var n;let{envKey:i,disableTracking:a,muxDataSDK:o=SF,muxDataSDKOptions:c={}}=t,u=rae(t);if(!a&&(i||u)){let{playerInitTime:l,playerSoftwareName:d,playerSoftwareVersion:f,beaconCollectionDomain:m,debug:p,disableCookies:g}=t,y={...t.metadata,video_title:((n=t?.metadata)==null?void 0:n.video_title)||void 0},x=w=>typeof w.player_error_code=="string"?!1:typeof t.errorTranslator=="function"?t.errorTranslator(w):w;o.monitor(e,{debug:p,beaconCollectionDomain:m,hlsjs:r,Hls:r?Pa:void 0,automaticErrorTracking:!1,errorTranslator:x,disableCookies:g,...c,data:{...i?{env_key:i}:{},player_software_name:d,player_software:d,player_software_version:f,player_init_time:l,...y}})}},aVe=(t,e,r)=>{var n,i;let a=eae(t,e),{src:o,customDomain:c=Xp}=t,u=()=>{e.ended||t.disablePseudoEnded||!Zse(e,r)||(Xse(e,r)?e.currentTime=e.buffered.end(e.buffered.length-1):e.dispatchEvent(new Event("ended")))},l,d,f=()=>{let m=n6(e),p,g;m.length>0&&(p=m.start(0),g=m.end(0)),(d!==g||l!==p)&&e.dispatchEvent(new CustomEvent("seekablechange",{composed:!0})),l=p,d=g};if(pu(e,"durationchange",f),e&&a){let m=Z5(t);if(typeof o=="string"){if(o.endsWith(".mp4")&&o.includes(c)){let y=r6(o),x=new URL(`https://stream.${c}/${y}/metadata.json`);e6(x.toString(),e)}let p=()=>{if($O(e)!==Lo.LIVE||Number.isFinite(e.duration))return;let y=setInterval(f,1e3);e.addEventListener("teardown",()=>{clearInterval(y)},{once:!0}),pu(e,"durationchange",()=>{Number.isFinite(e.duration)&&clearInterval(y)})},g=async()=>Dze(o,e,m).then(p).catch(y=>{if(y instanceof Response){let x=fN(y,jl.VIDEO,t);if(x){vf(e,x);return}}});if(e.preload==="none"){let y=()=>{g(),e.removeEventListener("loadedmetadata",x)},x=()=>{g(),e.removeEventListener("play",y)};pu(e,"play",y,{once:!0}),pu(e,"loadedmetadata",x,{once:!0})}else g();(n=t.tokens)!=null&&n.drm?nVe(t,e):pu(e,"encrypted",()=>{let y=Ki("Attempting to play DRM-protected content without providing a DRM token."),x=new ii(y,ii.MEDIA_ERR_ENCRYPTED,!0);x.errorCategory=jl.DRM,x.muxCode=ts.ENCRYPTED_MISSING_TOKEN,vf(e,x)},{once:!0}),e.setAttribute("src",o),t.startTime&&(((i=Rc.get(e))!=null?i:{}).startTime=t.startTime,e.addEventListener("durationchange",nae,{once:!0}))}else e.removeAttribute("src");e.addEventListener("error",iae),e.addEventListener("error",HO),e.addEventListener("emptied",()=>{e.querySelectorAll("track[data-removeondestroy]").forEach(p=>{p.remove()})},{once:!0}),pu(e,"pause",u),pu(e,"seeked",u),pu(e,"play",()=>{e.ended||qse(e.currentTime,e.duration)&&(e.currentTime=e.seekable.length?e.seekable.start(0):0)})}else r&&o?(r.once(Pa.Events.LEVEL_LOADED,(m,p)=>{Fze(p.details,e,r),f(),$O(e)===Lo.LIVE&&!Number.isFinite(e.duration)&&(r.on(Pa.Events.LEVEL_UPDATED,f),pu(e,"durationchange",()=>{Number.isFinite(e.duration)&&r.off(Pa.Events.LEVELS_UPDATED,f)}))}),r.on(Pa.Events.ERROR,(m,p)=>{var g,y;let x=oVe(p,t);if(x.muxCode===ts.NETWORK_NOT_READY){let w=(g=Rc.get(e))!=null?g:{},_=(y=w.retryCount)!=null?y:0;if(_<6){let E=_===0?5e3:6e4,N=new ii(`Retrying in ${E/1e3} seconds...`,x.code,x.fatal);Object.assign(N,x),vf(e,N),setTimeout(()=>{w.retryCount=_+1,p.details==="manifestLoadError"&&p.url&&r.loadSource(p.url)},E);return}else{w.retryCount=0;let E=new ii('Try again later or <a href="#" onclick="window.location.reload(); return false;" style="color: #4a90e2;">click here to retry</a>',x.code,x.fatal);Object.assign(E,x),vf(e,E);return}}vf(e,x)}),r.on(Pa.Events.MANIFEST_LOADED,()=>{let m=Rc.get(e);m&&m.error&&(m.error=null,m.retryCount=0,e.dispatchEvent(new Event("emptied")),e.dispatchEvent(new Event("loadstart")))}),e.addEventListener("error",HO),pu(e,"waiting",u),pze(t,r),gze(e,r),r.attachMedia(e)):console.error("It looks like the video you're trying to play will not work on this system! If possible, try upgrading to the newest versions of your browser or software.")};function nae(t){var e;let r=t.target,n=(e=Rc.get(r))==null?void 0:e.startTime;if(n&&ize(r.seekable,r.duration,n)){let i=r.preload==="auto";i&&(r.preload="none"),r.currentTime=n,i&&(r.preload="auto")}}async function iae(t){if(!t.isTrusted)return;t.stopImmediatePropagation();let e=t.target;if(!(e!=null&&e.error))return;let{message:r,code:n}=e.error,i=new ii(r,n);if(e.src&&n===ii.MEDIA_ERR_SRC_NOT_SUPPORTED&&e.readyState===HTMLMediaElement.HAVE_NOTHING){setTimeout(()=>{var a;let o=(a=Yse(e))!=null?a:e.error;o?.code===ii.MEDIA_ERR_SRC_NOT_SUPPORTED&&vf(e,i)},500);return}if(e.src&&(n!==ii.MEDIA_ERR_DECODE||n!==void 0))try{let{status:a}=await fetch(e.src);i.data={response:{code:a}}}catch{}vf(e,i)}function vf(t,e){var r;e.fatal&&(((r=Rc.get(t))!=null?r:{}).error=e,t.dispatchEvent(new CustomEvent("error",{detail:e})))}function HO(t){var e,r;if(!(t instanceof CustomEvent)||!(t.detail instanceof ii))return;let n=t.target,i=t.detail;!i||!i.fatal||(((e=Rc.get(n))!=null?e:{}).error=i,(r=n.mux)==null||r.emit("error",{player_error_code:i.code,player_error_message:i.message,player_error_context:i.context}))}var oVe=(t,e)=>{var r,n,i;t.fatal?console.error("getErrorFromHlsErrorData()",t):e.debug&&console.warn("getErrorFromHlsErrorData() (non-fatal)",t);let a={[Pa.ErrorTypes.NETWORK_ERROR]:ii.MEDIA_ERR_NETWORK,[Pa.ErrorTypes.MEDIA_ERROR]:ii.MEDIA_ERR_DECODE,[Pa.ErrorTypes.KEY_SYSTEM_ERROR]:ii.MEDIA_ERR_ENCRYPTED},o=d=>[Pa.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,Pa.ErrorDetails.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED].includes(d.details)?ii.MEDIA_ERR_NETWORK:a[d.type],c=d=>{if(d.type===Pa.ErrorTypes.KEY_SYSTEM_ERROR)return jl.DRM;if(d.type===Pa.ErrorTypes.NETWORK_ERROR)return jl.VIDEO},u,l=o(t);if(l===ii.MEDIA_ERR_NETWORK&&t.response){let d=(r=c(t))!=null?r:jl.VIDEO;u=(n=fN(t.response,d,e,t.fatal))!=null?n:new ii("",l,t.fatal)}else if(l===ii.MEDIA_ERR_ENCRYPTED)if(t.details===Pa.ErrorDetails.KEY_SYSTEM_NO_CONFIGURED_LICENSE){let d=Ki("Attempting to play DRM-protected content without providing a DRM token.");u=new ii(d,ii.MEDIA_ERR_ENCRYPTED,t.fatal),u.errorCategory=jl.DRM,u.muxCode=ts.ENCRYPTED_MISSING_TOKEN}else if(t.details===Pa.ErrorDetails.KEY_SYSTEM_NO_ACCESS){let d=Ki("Cannot play DRM-protected content with current security configuration on this browser. Try playing in another browser.");u=new ii(d,ii.MEDIA_ERR_ENCRYPTED,t.fatal),u.errorCategory=jl.DRM,u.muxCode=ts.ENCRYPTED_UNSUPPORTED_KEY_SYSTEM}else if(t.details===Pa.ErrorDetails.KEY_SYSTEM_NO_SESSION){let d=Ki("Failed to generate a DRM license request. This may be an issue with the player or your protected content.");u=new ii(d,ii.MEDIA_ERR_ENCRYPTED,!0),u.errorCategory=jl.DRM,u.muxCode=ts.ENCRYPTED_GENERATE_REQUEST_FAILED}else if(t.details===Pa.ErrorDetails.KEY_SYSTEM_SESSION_UPDATE_FAILED){let d=Ki("Failed to update DRM license. This may be an issue with the player or your protected content.");u=new ii(d,ii.MEDIA_ERR_ENCRYPTED,t.fatal),u.errorCategory=jl.DRM,u.muxCode=ts.ENCRYPTED_UPDATE_LICENSE_FAILED}else if(t.details===Pa.ErrorDetails.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED){let d=Ki("Your server certificate failed when attempting to set it. This may be an issue with a no longer valid certificate.");u=new ii(d,ii.MEDIA_ERR_ENCRYPTED,t.fatal),u.errorCategory=jl.DRM,u.muxCode=ts.ENCRYPTED_UPDATE_SERVER_CERT_FAILED}else if(t.details===Pa.ErrorDetails.KEY_SYSTEM_STATUS_INTERNAL_ERROR){let d=Ki("The DRM Content Decryption Module system had an internal failure. Try reloading the page, upading your browser, or playing in another browser.");u=new ii(d,ii.MEDIA_ERR_ENCRYPTED,t.fatal),u.errorCategory=jl.DRM,u.muxCode=ts.ENCRYPTED_CDM_ERROR}else if(t.details===Pa.ErrorDetails.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED){let d=Ki("DRM playback is being attempted in an environment that is not sufficiently secure. User may see black screen.");u=new ii(d,ii.MEDIA_ERR_ENCRYPTED,!1),u.errorCategory=jl.DRM,u.muxCode=ts.ENCRYPTED_OUTPUT_RESTRICTED}else u=new ii(t.error.message,ii.MEDIA_ERR_ENCRYPTED,t.fatal),u.errorCategory=jl.DRM,u.muxCode=ts.ENCRYPTED_ERROR;else u=new ii("",l,t.fatal);return u.context||(u.context=`${t.url?`url: ${t.url}
`:""}${t.response&&(t.response.code||t.response.text)?`response: ${t.response.code}, ${t.response.text}
`:""}${t.reason?`failure reason: ${t.reason}
`:""}${t.level?`level: ${t.level}
`:""}${t.parent?`parent stream controller: ${t.parent}
`:""}${t.buffer?`buffer length: ${t.buffer}
`:""}${t.error?`error: ${t.error}
`:""}${t.event?`event: ${t.event}
`:""}${t.err?`error message: ${(i=t.err)==null?void 0:i.message}
`:""}`),u.data=t,u};const lVe=["abort","canplay","canplaythrough","durationchange","emptied","encrypted","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting","waitingforkey","resize","enterpictureinpicture","leavepictureinpicture","webkitbeginfullscreen","webkitendfullscreen","webkitpresentationmodechanged"],sae=["autopictureinpicture","disablepictureinpicture","disableremoteplayback","autoplay","controls","controlslist","crossorigin","loop","muted","playsinline","poster","preload","src"];function cVe(t){return`
    <style>
      :host {
        display: inline-flex;
        line-height: 0;
        flex-direction: column;
        justify-content: end;
      }

      audio {
        width: 100%;
      }
    </style>
    <slot name="media">
      <audio${oae(t)}></audio>
    </slot>
    <slot></slot>
  `}function uVe(t){return`
    <style>
      :host {
        display: inline-block;
        line-height: 0;
      }

      video {
        max-width: 100%;
        max-height: 100%;
        min-width: 100%;
        min-height: 100%;
        object-fit: var(--media-object-fit, contain);
        object-position: var(--media-object-position, 50% 50%);
      }

      video::-webkit-media-text-track-container {
        transform: var(--media-webkit-text-track-transform);
        transition: var(--media-webkit-text-track-transition);
      }
    </style>
    <slot name="media">
      <video${oae(t)}></video>
    </slot>
    <slot></slot>
  `}function aae(t,{tag:e,is:r}){const n=globalThis.document?.createElement?.(e,{is:r}),i=n?dVe(n):[];return class QO extends t{static getTemplateHTML=e.endsWith("audio")?cVe:uVe;static shadowRootOptions={mode:"open"};static Events=lVe;static#e=!1;static get observedAttributes(){return QO.#n(),[...n?.constructor?.observedAttributes??[],...sae]}static#n(){if(this.#e)return;this.#e=!0;const o=new Set(this.observedAttributes);o.delete("muted");for(const c of i)if(!(c in this.prototype))if(typeof n[c]=="function")this.prototype[c]=function(...u){return this.#s(),this.call?this.call(c,...u):this.nativeEl?.[c]?.apply(this.nativeEl,u)};else{const u={get(){this.#s();const l=c.toLowerCase();if(o.has(l)){const d=this.getAttribute(l);return d===null?!1:d===""?!0:d}return this.get?.(c)??this.nativeEl?.[c]}};c!==c.toUpperCase()&&(u.set=function(l){this.#s();const d=c.toLowerCase();if(o.has(d)){l===!0||l===!1||l==null?this.toggleAttribute(d,!!l):this.setAttribute(d,l);return}if(this.set){this.set(c,l);return}this.nativeEl&&(this.nativeEl[c]=l)}),Object.defineProperty(this.prototype,c,u)}}#r=!1;#i=null;#t=new Map;#a;get;set;call;get nativeEl(){return this.#s(),this.#i??this.querySelector(":scope > [slot=media]")??this.querySelector(e)??this.shadowRoot?.querySelector(e)??null}set nativeEl(o){this.#i=o}get defaultMuted(){return this.hasAttribute("muted")}set defaultMuted(o){this.toggleAttribute("muted",o)}get src(){return this.getAttribute("src")}set src(o){this.setAttribute("src",`${o}`)}get preload(){return this.getAttribute("preload")??this.nativeEl?.preload}set preload(o){this.setAttribute("preload",`${o}`)}#s(){this.#r||(this.#r=!0,this.init())}init(){if(!this.shadowRoot){this.attachShadow({mode:"open"});const o=hVe(this.attributes);r&&(o.is=r),e&&(o.part=e),this.shadowRoot.innerHTML=this.constructor.getTemplateHTML(o)}this.nativeEl.muted=this.hasAttribute("muted");for(const o of i)this.#d(o);this.#a=new MutationObserver(this.#o.bind(this)),this.shadowRoot.addEventListener("slotchange",()=>this.#l()),this.#l();for(const o of this.constructor.Events)this.shadowRoot.addEventListener(o,this,!0)}handleEvent(o){o.target===this.nativeEl&&this.dispatchEvent(new CustomEvent(o.type,{detail:o.detail}))}#l(){const o=new Map(this.#t);(this.shadowRoot?.querySelector("slot:not([name])")?.assignedElements({flatten:!0}).filter(l=>["track","source"].includes(l.localName))).forEach(l=>{o.delete(l);let d=this.#t.get(l);d||(d=l.cloneNode(),this.#t.set(l,d),this.#a?.observe(l,{attributes:!0})),this.nativeEl?.append(d),this.#c(d)}),o.forEach((l,d)=>{l.remove(),this.#t.delete(d)})}#o(o){for(const c of o)if(c.type==="attributes"){const{target:u,attributeName:l}=c,d=this.#t.get(u);d&&l&&(d.setAttribute(l,u.getAttribute(l)??""),this.#c(d))}}#c(o){o&&o.localName==="track"&&o.default&&(o.kind==="chapters"||o.kind==="metadata")&&o.track.mode==="disabled"&&(o.track.mode="hidden")}#d(o){if(Object.prototype.hasOwnProperty.call(this,o)){const c=this[o];delete this[o],this[o]=c}}attributeChangedCallback(o,c,u){this.#s(),this.#u(o,c,u)}#u(o,c,u){["id","class"].includes(o)||!QO.observedAttributes.includes(o)&&this.constructor.observedAttributes.includes(o)||(u===null?this.nativeEl?.removeAttribute(o):this.nativeEl?.getAttribute(o)!==u&&this.nativeEl?.setAttribute(o,u))}connectedCallback(){this.#s()}}}function dVe(t){const e=[];for(let r=Object.getPrototypeOf(t);r&&r!==HTMLElement.prototype;r=Object.getPrototypeOf(r)){const n=Object.getOwnPropertyNames(r);e.push(...n)}return e}function oae(t){let e="";for(const r in t){if(!sae.includes(r))continue;const n=t[r];n===""?e+=` ${r}`:e+=` ${r}="${n}"`}return e}function hVe(t){const e={};for(const r of t)e[r.name]=r.value;return e}const BS=aae(globalThis.HTMLElement??class{},{tag:"video"});aae(globalThis.HTMLElement??class{},{tag:"audio"});var lae=t=>{throw TypeError(t)},s6=(t,e,r)=>e.has(t)||lae("Cannot "+r),od=(t,e,r)=>(s6(t,e,"read from private field"),r?r.call(t):e.get(t)),Hf=(t,e,r)=>e.has(t)?lae("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),df=(t,e,r,n)=>(s6(t,e,"write to private field"),e.set(t,r),r),PS=(t,e,r)=>(s6(t,e,"access private method"),r),fVe=()=>{try{return"0.30.2"}catch{}return"UNKNOWN"},mVe=fVe(),AVe=()=>mVe,pVe=`
<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" part="logo" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2" viewBox="0 0 1600 500"><g fill="#fff"><path d="M994.287 93.486c-17.121 0-31-13.879-31-31 0-17.121 13.879-31 31-31 17.121 0 31 13.879 31 31 0 17.121-13.879 31-31 31m0-93.486c-34.509 0-62.484 27.976-62.484 62.486v187.511c0 68.943-56.09 125.033-125.032 125.033s-125.03-56.09-125.03-125.033V62.486C681.741 27.976 653.765 0 619.256 0s-62.484 27.976-62.484 62.486v187.511C556.772 387.85 668.921 500 806.771 500c137.851 0 250.001-112.15 250.001-250.003V62.486c0-34.51-27.976-62.486-62.485-62.486M1537.51 468.511c-17.121 0-31-13.879-31-31 0-17.121 13.879-31 31-31 17.121 0 31 13.879 31 31 0 17.121-13.879 31-31 31m-275.883-218.509-143.33 143.329c-24.402 24.402-24.402 63.966 0 88.368 24.402 24.402 63.967 24.402 88.369 0l143.33-143.329 143.328 143.329c24.402 24.4 63.967 24.402 88.369 0 24.403-24.402 24.403-63.966.001-88.368l-143.33-143.329.001-.004 143.329-143.329c24.402-24.402 24.402-63.965 0-88.367s-63.967-24.402-88.369 0L1349.996 161.63 1206.667 18.302c-24.402-24.401-63.967-24.402-88.369 0s-24.402 63.965 0 88.367l143.329 143.329v.004ZM437.511 468.521c-17.121 0-31-13.879-31-31 0-17.121 13.879-31 31-31 17.121 0 31 13.879 31 31 0 17.121-13.879 31-31 31M461.426 4.759C438.078-4.913 411.2.432 393.33 18.303L249.999 161.632 106.669 18.303C88.798.432 61.922-4.913 38.573 4.759 15.224 14.43-.001 37.214-.001 62.488v375.026c0 34.51 27.977 62.486 62.487 62.486 34.51 0 62.486-27.976 62.486-62.486V213.341l80.843 80.844c24.404 24.402 63.965 24.402 88.369 0l80.843-80.844v224.173c0 34.51 27.976 62.486 62.486 62.486s62.486-27.976 62.486-62.486V62.488c0-25.274-15.224-48.058-38.573-57.729" style="fill-rule:nonzero"/></g></svg>`,mr={BEACON_COLLECTION_DOMAIN:"beacon-collection-domain",CUSTOM_DOMAIN:"custom-domain",DEBUG:"debug",DISABLE_TRACKING:"disable-tracking",DISABLE_COOKIES:"disable-cookies",DISABLE_PSEUDO_ENDED:"disable-pseudo-ended",DRM_TOKEN:"drm-token",PLAYBACK_TOKEN:"playback-token",ENV_KEY:"env-key",MAX_RESOLUTION:"max-resolution",MIN_RESOLUTION:"min-resolution",MAX_AUTO_RESOLUTION:"max-auto-resolution",RENDITION_ORDER:"rendition-order",PROGRAM_START_TIME:"program-start-time",PROGRAM_END_TIME:"program-end-time",ASSET_START_TIME:"asset-start-time",ASSET_END_TIME:"asset-end-time",METADATA_URL:"metadata-url",PLAYBACK_ID:"playback-id",PLAYER_SOFTWARE_NAME:"player-software-name",PLAYER_SOFTWARE_VERSION:"player-software-version",PLAYER_INIT_TIME:"player-init-time",PREFER_CMCD:"prefer-cmcd",PREFER_PLAYBACK:"prefer-playback",START_TIME:"start-time",STREAM_TYPE:"stream-type",TARGET_LIVE_WINDOW:"target-live-window",LIVE_EDGE_OFFSET:"live-edge-offset",TYPE:"type",LOGO:"logo",CAP_RENDITION_TO_PLAYER_SIZE:"cap-rendition-to-player-size"},gVe=Object.values(mr),GG=AVe(),WG="mux-video",yA,Rw,_j,Dw,Ej,Sj,jj,Tj,Cj,Mw,Nj,Ix,Fw,vVe=class extends BS{constructor(){super(),Hf(this,Ix),Hf(this,yA),Hf(this,Rw),Hf(this,_j),Hf(this,Dw,{}),Hf(this,Ej,{}),Hf(this,Sj),Hf(this,jj),Hf(this,Tj),Hf(this,Cj),Hf(this,Mw,""),Hf(this,Nj),df(this,_j,t6()),this.nativeEl.addEventListener("muxmetadata",e=>{var r;let n=Kze(this.nativeEl),i=(r=this.metadata)!=null?r:{};this.metadata={...n,...i},n?.["com.mux.video.branding"]==="mux-free-plan"&&(df(this,Mw,"default"),this.updateLogo())})}static get NAME(){return WG}static get VERSION(){return GG}static get observedAttributes(){var e;return[...gVe,...(e=BS.observedAttributes)!=null?e:[]]}static getLogoHTML(e){return!e||e==="false"?"":e==="default"?pVe:`<img part="logo" src="${e}" />`}static getTemplateHTML(e={}){var r;return`
      ${BS.getTemplateHTML(e)}
      <style>
        :host {
          position: relative;
        }
        slot[name="logo"] {
          display: flex;
          justify-content: end;
          position: absolute;
          top: 1rem;
          right: 1rem;
          opacity: 0;
          transition: opacity 0.25s ease-in-out;
          z-index: 1;
        }
        slot[name="logo"]:has([part="logo"]) {
          opacity: 1;
        }
        slot[name="logo"] [part="logo"] {
          width: 5rem;
          pointer-events: none;
          user-select: none;
        }
      </style>
      <slot name="logo">
        ${this.getLogoHTML((r=e[mr.LOGO])!=null?r:"")}
      </slot>
    `}get preferCmcd(){var e;return(e=this.getAttribute(mr.PREFER_CMCD))!=null?e:void 0}set preferCmcd(e){e!==this.preferCmcd&&(e?hN.includes(e)?this.setAttribute(mr.PREFER_CMCD,e):console.warn(`Invalid value for preferCmcd. Must be one of ${hN.join()}`):this.removeAttribute(mr.PREFER_CMCD))}get playerInitTime(){return this.hasAttribute(mr.PLAYER_INIT_TIME)?+this.getAttribute(mr.PLAYER_INIT_TIME):od(this,_j)}set playerInitTime(e){e!=this.playerInitTime&&(e==null?this.removeAttribute(mr.PLAYER_INIT_TIME):this.setAttribute(mr.PLAYER_INIT_TIME,`${+e}`))}get playerSoftwareName(){var e;return(e=od(this,Tj))!=null?e:WG}set playerSoftwareName(e){df(this,Tj,e)}get playerSoftwareVersion(){var e;return(e=od(this,jj))!=null?e:GG}set playerSoftwareVersion(e){df(this,jj,e)}get _hls(){var e;return(e=od(this,yA))==null?void 0:e.engine}get mux(){var e;return(e=this.nativeEl)==null?void 0:e.mux}get error(){var e;return(e=Yse(this.nativeEl))!=null?e:null}get errorTranslator(){return od(this,Cj)}set errorTranslator(e){df(this,Cj,e)}get src(){return this.getAttribute("src")}set src(e){e!==this.src&&(e==null?this.removeAttribute("src"):this.setAttribute("src",e))}get type(){var e;return(e=this.getAttribute(mr.TYPE))!=null?e:void 0}set type(e){e!==this.type&&(e?this.setAttribute(mr.TYPE,e):this.removeAttribute(mr.TYPE))}get preload(){let e=this.getAttribute("preload");return e===""?"auto":["none","metadata","auto"].includes(e)?e:super.preload}set preload(e){e!=this.getAttribute("preload")&&(["","none","metadata","auto"].includes(e)?this.setAttribute("preload",e):this.removeAttribute("preload"))}get debug(){return this.getAttribute(mr.DEBUG)!=null}set debug(e){e!==this.debug&&(e?this.setAttribute(mr.DEBUG,""):this.removeAttribute(mr.DEBUG))}get disableTracking(){return this.hasAttribute(mr.DISABLE_TRACKING)}set disableTracking(e){e!==this.disableTracking&&this.toggleAttribute(mr.DISABLE_TRACKING,!!e)}get disableCookies(){return this.hasAttribute(mr.DISABLE_COOKIES)}set disableCookies(e){e!==this.disableCookies&&(e?this.setAttribute(mr.DISABLE_COOKIES,""):this.removeAttribute(mr.DISABLE_COOKIES))}get disablePseudoEnded(){return this.hasAttribute(mr.DISABLE_PSEUDO_ENDED)}set disablePseudoEnded(e){e!==this.disablePseudoEnded&&(e?this.setAttribute(mr.DISABLE_PSEUDO_ENDED,""):this.removeAttribute(mr.DISABLE_PSEUDO_ENDED))}get startTime(){let e=this.getAttribute(mr.START_TIME);if(e==null)return;let r=+e;return Number.isNaN(r)?void 0:r}set startTime(e){e!==this.startTime&&(e==null?this.removeAttribute(mr.START_TIME):this.setAttribute(mr.START_TIME,`${e}`))}get playbackId(){var e;return this.hasAttribute(mr.PLAYBACK_ID)?this.getAttribute(mr.PLAYBACK_ID):(e=r6(this.src))!=null?e:void 0}set playbackId(e){e!==this.playbackId&&(e?this.setAttribute(mr.PLAYBACK_ID,e):this.removeAttribute(mr.PLAYBACK_ID))}get maxResolution(){var e;return(e=this.getAttribute(mr.MAX_RESOLUTION))!=null?e:void 0}set maxResolution(e){e!==this.maxResolution&&(e?this.setAttribute(mr.MAX_RESOLUTION,e):this.removeAttribute(mr.MAX_RESOLUTION))}get minResolution(){var e;return(e=this.getAttribute(mr.MIN_RESOLUTION))!=null?e:void 0}set minResolution(e){e!==this.minResolution&&(e?this.setAttribute(mr.MIN_RESOLUTION,e):this.removeAttribute(mr.MIN_RESOLUTION))}get maxAutoResolution(){var e;return(e=this.getAttribute(mr.MAX_AUTO_RESOLUTION))!=null?e:void 0}set maxAutoResolution(e){e==null?this.removeAttribute(mr.MAX_AUTO_RESOLUTION):this.setAttribute(mr.MAX_AUTO_RESOLUTION,e)}get renditionOrder(){var e;return(e=this.getAttribute(mr.RENDITION_ORDER))!=null?e:void 0}set renditionOrder(e){e!==this.renditionOrder&&(e?this.setAttribute(mr.RENDITION_ORDER,e):this.removeAttribute(mr.RENDITION_ORDER))}get programStartTime(){let e=this.getAttribute(mr.PROGRAM_START_TIME);if(e==null)return;let r=+e;return Number.isNaN(r)?void 0:r}set programStartTime(e){e==null?this.removeAttribute(mr.PROGRAM_START_TIME):this.setAttribute(mr.PROGRAM_START_TIME,`${e}`)}get programEndTime(){let e=this.getAttribute(mr.PROGRAM_END_TIME);if(e==null)return;let r=+e;return Number.isNaN(r)?void 0:r}set programEndTime(e){e==null?this.removeAttribute(mr.PROGRAM_END_TIME):this.setAttribute(mr.PROGRAM_END_TIME,`${e}`)}get assetStartTime(){let e=this.getAttribute(mr.ASSET_START_TIME);if(e==null)return;let r=+e;return Number.isNaN(r)?void 0:r}set assetStartTime(e){e==null?this.removeAttribute(mr.ASSET_START_TIME):this.setAttribute(mr.ASSET_START_TIME,`${e}`)}get assetEndTime(){let e=this.getAttribute(mr.ASSET_END_TIME);if(e==null)return;let r=+e;return Number.isNaN(r)?void 0:r}set assetEndTime(e){e==null?this.removeAttribute(mr.ASSET_END_TIME):this.setAttribute(mr.ASSET_END_TIME,`${e}`)}get customDomain(){var e;return(e=this.getAttribute(mr.CUSTOM_DOMAIN))!=null?e:void 0}set customDomain(e){e!==this.customDomain&&(e?this.setAttribute(mr.CUSTOM_DOMAIN,e):this.removeAttribute(mr.CUSTOM_DOMAIN))}get capRenditionToPlayerSize(){var e;return((e=this._hlsConfig)==null?void 0:e.capLevelToPlayerSize)!=null?this._hlsConfig.capLevelToPlayerSize:od(this,Nj)}set capRenditionToPlayerSize(e){df(this,Nj,e)}get drmToken(){var e;return(e=this.getAttribute(mr.DRM_TOKEN))!=null?e:void 0}set drmToken(e){e!==this.drmToken&&(e?this.setAttribute(mr.DRM_TOKEN,e):this.removeAttribute(mr.DRM_TOKEN))}get playbackToken(){var e,r,n,i;if(this.hasAttribute(mr.PLAYBACK_TOKEN))return(e=this.getAttribute(mr.PLAYBACK_TOKEN))!=null?e:void 0;if(this.hasAttribute(mr.PLAYBACK_ID)){let[,a]=qF((r=this.playbackId)!=null?r:"");return(n=new URLSearchParams(a).get("token"))!=null?n:void 0}if(this.src)return(i=new URLSearchParams(this.src).get("token"))!=null?i:void 0}set playbackToken(e){e!==this.playbackToken&&(e?this.setAttribute(mr.PLAYBACK_TOKEN,e):this.removeAttribute(mr.PLAYBACK_TOKEN))}get tokens(){let e=this.getAttribute(mr.PLAYBACK_TOKEN),r=this.getAttribute(mr.DRM_TOKEN);return{...od(this,Ej),...e!=null?{playback:e}:{},...r!=null?{drm:r}:{}}}set tokens(e){df(this,Ej,e??{})}get ended(){return Zse(this.nativeEl,this._hls)}get envKey(){var e;return(e=this.getAttribute(mr.ENV_KEY))!=null?e:void 0}set envKey(e){e!==this.envKey&&(e?this.setAttribute(mr.ENV_KEY,e):this.removeAttribute(mr.ENV_KEY))}get beaconCollectionDomain(){var e;return(e=this.getAttribute(mr.BEACON_COLLECTION_DOMAIN))!=null?e:void 0}set beaconCollectionDomain(e){e!==this.beaconCollectionDomain&&(e?this.setAttribute(mr.BEACON_COLLECTION_DOMAIN,e):this.removeAttribute(mr.BEACON_COLLECTION_DOMAIN))}get streamType(){var e;return(e=this.getAttribute(mr.STREAM_TYPE))!=null?e:$O(this.nativeEl)}set streamType(e){e!==this.streamType&&(e?this.setAttribute(mr.STREAM_TYPE,e):this.removeAttribute(mr.STREAM_TYPE))}get targetLiveWindow(){return this.hasAttribute(mr.TARGET_LIVE_WINDOW)?+this.getAttribute(mr.TARGET_LIVE_WINDOW):Gze(this.nativeEl)}set targetLiveWindow(e){e!=this.targetLiveWindow&&(e==null?this.removeAttribute(mr.TARGET_LIVE_WINDOW):this.setAttribute(mr.TARGET_LIVE_WINDOW,`${+e}`))}get liveEdgeStart(){var e,r;if(this.hasAttribute(mr.LIVE_EDGE_OFFSET)){let{liveEdgeOffset:n}=this,i=(e=this.nativeEl.seekable.end(0))!=null?e:0,a=(r=this.nativeEl.seekable.start(0))!=null?r:0;return Math.max(a,i-n)}return Wze(this.nativeEl)}get liveEdgeOffset(){if(this.hasAttribute(mr.LIVE_EDGE_OFFSET))return+this.getAttribute(mr.LIVE_EDGE_OFFSET)}set liveEdgeOffset(e){e!=this.liveEdgeOffset&&(e==null?this.removeAttribute(mr.LIVE_EDGE_OFFSET):this.setAttribute(mr.LIVE_EDGE_OFFSET,`${+e}`))}get seekable(){return n6(this.nativeEl)}async addCuePoints(e){return Hse(this.nativeEl,e)}get activeCuePoint(){return Qse(this.nativeEl)}get cuePoints(){return yze(this.nativeEl)}async addChapters(e){return Vse(this.nativeEl,e)}get activeChapter(){return Kse(this.nativeEl)}get chapters(){return bze(this.nativeEl)}getStartDate(){return _ze(this.nativeEl,this._hls)}get currentPdt(){return Eze(this.nativeEl,this._hls)}get preferPlayback(){let e=this.getAttribute(mr.PREFER_PLAYBACK);if(e===UA.MSE||e===UA.NATIVE)return e}set preferPlayback(e){e!==this.preferPlayback&&(e===UA.MSE||e===UA.NATIVE?this.setAttribute(mr.PREFER_PLAYBACK,e):this.removeAttribute(mr.PREFER_PLAYBACK))}get metadata(){return{...this.getAttributeNames().filter(e=>e.startsWith("metadata-")&&![mr.METADATA_URL].includes(e)).reduce((e,r)=>{let n=this.getAttribute(r);return n!=null&&(e[r.replace(/^metadata-/,"").replace(/-/g,"_")]=n),e},{}),...od(this,Dw)}}set metadata(e){df(this,Dw,e??{}),this.mux&&this.mux.emit("hb",od(this,Dw))}get _hlsConfig(){return od(this,Sj)}set _hlsConfig(e){df(this,Sj,e)}get logo(){var e;return(e=this.getAttribute(mr.LOGO))!=null?e:od(this,Mw)}set logo(e){e?this.setAttribute(mr.LOGO,e):this.removeAttribute(mr.LOGO)}load(){df(this,yA,Xze(this,this.nativeEl,od(this,yA)))}unload(){Jse(this.nativeEl,od(this,yA),this),df(this,yA,void 0)}attributeChangedCallback(e,r,n){var i,a;switch(BS.observedAttributes.includes(e)&&!["src","autoplay","preload"].includes(e)&&super.attributeChangedCallback(e,r,n),e){case mr.PLAYER_SOFTWARE_NAME:this.playerSoftwareName=n??void 0;break;case mr.PLAYER_SOFTWARE_VERSION:this.playerSoftwareVersion=n??void 0;break;case"src":{let o=!!r,c=!!n;!o&&c?PS(this,Ix,Fw).call(this):o&&!c?this.unload():o&&c&&(this.unload(),PS(this,Ix,Fw).call(this));break}case"autoplay":if(n===r)break;(i=od(this,yA))==null||i.setAutoplay(this.autoplay);break;case"preload":if(n===r)break;(a=od(this,yA))==null||a.setPreload(n);break;case mr.PLAYBACK_ID:this.src=UO(this);break;case mr.DEBUG:{let o=this.debug;this.mux&&console.info("Cannot toggle debug mode of mux data after initialization. Make sure you set all metadata to override before setting the src."),this._hls&&(this._hls.config.debug=o);break}case mr.METADATA_URL:n&&fetch(n).then(o=>o.json()).then(o=>this.metadata=o).catch(()=>console.error(`Unable to load or parse metadata JSON from metadata-url ${n}!`));break;case mr.STREAM_TYPE:(n==null||n!==r)&&this.dispatchEvent(new CustomEvent("streamtypechange",{composed:!0,bubbles:!0}));break;case mr.TARGET_LIVE_WINDOW:(n==null||n!==r)&&this.dispatchEvent(new CustomEvent("targetlivewindowchange",{composed:!0,bubbles:!0,detail:this.targetLiveWindow}));break;case mr.LOGO:(n==null||n!==r)&&this.updateLogo();break;case mr.DISABLE_TRACKING:{if(n==null||n!==r){let o=this.currentTime,c=this.paused;this.unload(),PS(this,Ix,Fw).call(this).then(()=>{this.currentTime=o,c||this.play()})}break}case mr.DISABLE_COOKIES:{(n==null||n!==r)&&this.disableCookies&&document.cookie.split(";").forEach(o=>{o.trim().startsWith("muxData")&&(document.cookie=o.replace(/^ +/,"").replace(/=.*/,"=;expires="+new Date().toUTCString()+";path=/"))});break}case mr.CAP_RENDITION_TO_PLAYER_SIZE:(n==null||n!==r)&&(this.capRenditionToPlayerSize=n!=null?!0:void 0)}}updateLogo(){if(!this.shadowRoot)return;let e=this.shadowRoot.querySelector('slot[name="logo"]');if(!e)return;let r=this.constructor.getLogoHTML(od(this,Mw)||this.logo);e.innerHTML=r}connectedCallback(){var e;(e=super.connectedCallback)==null||e.call(this),this.nativeEl&&this.src&&!od(this,yA)&&PS(this,Ix,Fw).call(this)}disconnectedCallback(){this.unload()}handleEvent(e){e.target===this.nativeEl&&this.dispatchEvent(new CustomEvent(e.type,{composed:!0,detail:e.detail}))}};yA=new WeakMap,Rw=new WeakMap,_j=new WeakMap,Dw=new WeakMap,Ej=new WeakMap,Sj=new WeakMap,jj=new WeakMap,Tj=new WeakMap,Cj=new WeakMap,Mw=new WeakMap,Nj=new WeakMap,Ix=new WeakSet,Fw=async function(){od(this,Rw)||(await df(this,Rw,Promise.resolve()),df(this,Rw,null),this.load())};const oy=new WeakMap;class eB extends Error{}class yVe extends Error{}const xVe=["application/x-mpegURL","application/vnd.apple.mpegurl","audio/mpegurl"],bVe=globalThis.WeakRef?class extends Set{add(t){super.add(new WeakRef(t))}forEach(t){super.forEach(e=>{const r=e.deref();r&&t(r)})}}:Set;function wVe(t){globalThis.chrome?.cast?.isAvailable?globalThis.cast?.framework?t():customElements.whenDefined("google-cast-button").then(t):globalThis.__onGCastApiAvailable=()=>{customElements.whenDefined("google-cast-button").then(t)}}function _Ve(){return globalThis.chrome}function EVe(){const t="https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1";if(globalThis.chrome?.cast||document.querySelector(`script[src="${t}"]`))return;const e=document.createElement("script");e.src=t,document.head.append(e)}function I0(){return globalThis.cast?.framework?.CastContext.getInstance()}function a6(){return I0()?.getCurrentSession()}function o6(){return a6()?.getSessionObj().media[0]}function SVe(t){return new Promise((e,r)=>{o6().editTracksInfo(t,e,r)})}function jVe(t){return new Promise((e,r)=>{o6().getStatus(t,e,r)})}function YG(t){return I0().setOptions({...cae(),...t})}function cae(){return{receiverApplicationId:"CC1AD845",autoJoinPolicy:"origin_scoped",androidReceiverCompatible:!1,language:"en-US",resumeSavedSession:!0}}function TVe(t){if(!t)return;const e=/\.([a-zA-Z0-9]+)(?:\?.*)?$/,r=t.match(e);return r?r[1]:null}function CVe(t){const e=t.split(`
`),r=[];for(let n=0;n<e.length;n++)if(e[n].trim().startsWith("#EXT-X-STREAM-INF")){const a=e[n+1]?e[n+1].trim():"";a&&!a.startsWith("#")&&r.push(a)}return r}function NVe(t){return t.split(`
`).find(n=>!n.trim().startsWith("#")&&n.trim()!=="")}async function kVe(t){try{const r=(await fetch(t,{method:"HEAD"})).headers.get("Content-Type");return xVe.some(n=>r===n)}catch(e){return console.error("Error while trying to get the Content-Type of the manifest",e),!1}}async function LVe(t){try{const e=await(await fetch(t)).text();let r=e;const n=CVe(e);if(n.length>0){const o=new URL(n[0],t).toString();r=await(await fetch(o)).text()}const i=NVe(r);return TVe(i)}catch(e){console.error("Error while trying to parse the manifest playlist",e);return}}const kj=new bVe,r0=new WeakSet;let Ru;wVe(()=>{if(!globalThis.chrome?.cast?.isAvailable){console.debug("chrome.cast.isAvailable",globalThis.chrome?.cast?.isAvailable);return}Ru||(Ru=cast.framework,I0().addEventListener(Ru.CastContextEventType.CAST_STATE_CHANGED,t=>{kj.forEach(e=>oy.get(e).onCastStateChanged?.(t))}),I0().addEventListener(Ru.CastContextEventType.SESSION_STATE_CHANGED,t=>{kj.forEach(e=>oy.get(e).onSessionStateChanged?.(t))}),kj.forEach(t=>oy.get(t).init?.()))});let qG=0;class IVe extends EventTarget{#e;#n;#r;#i;#t="disconnected";#a=!1;#s=new Set;#l=new WeakMap;constructor(e){super(),this.#e=e,kj.add(this),oy.set(this,{init:()=>this.#h(),onCastStateChanged:()=>this.#u(),onSessionStateChanged:()=>this.#m(),getCastPlayer:()=>this.#o}),this.#h()}get#o(){if(r0.has(this.#e))return this.#r}get state(){return this.#t}async watchAvailability(e){if(this.#e.disableRemotePlayback)throw new eB("disableRemotePlayback attribute is present.");return this.#l.set(e,++qG),this.#s.add(e),queueMicrotask(()=>e(this.#d())),qG}async cancelWatchAvailability(e){if(this.#e.disableRemotePlayback)throw new eB("disableRemotePlayback attribute is present.");e?this.#s.delete(e):this.#s.clear()}async prompt(){if(this.#e.disableRemotePlayback)throw new eB("disableRemotePlayback attribute is present.");if(!globalThis.chrome?.cast?.isAvailable)throw new yVe("The RemotePlayback API is disabled on this platform.");const e=r0.has(this.#e);r0.add(this.#e),YG(this.#e.castOptions),Object.entries(this.#i).forEach(([r,n])=>{this.#r.controller.addEventListener(r,n)});try{await I0().requestSession()}catch(r){if(e||r0.delete(this.#e),r==="cancel")return;throw new Error(r)}oy.get(this.#e)?.loadOnPrompt?.()}#c(){r0.has(this.#e)&&(Object.entries(this.#i).forEach(([e,r])=>{this.#r.controller.removeEventListener(e,r)}),r0.delete(this.#e),this.#e.muted=this.#r.isMuted,this.#e.currentTime=this.#r.savedPlayerState.currentTime,this.#r.savedPlayerState.isPaused===!1&&this.#e.play())}#d(){const e=I0()?.getCastState();return e&&e!=="NO_DEVICES_AVAILABLE"}#u(){const e=I0().getCastState();if(r0.has(this.#e)&&e==="CONNECTING"&&(this.#t="connecting",this.dispatchEvent(new Event("connecting"))),!this.#a&&e?.includes("CONNECT")){this.#a=!0;for(let r of this.#s)r(!0)}else if(this.#a&&(!e||e==="NO_DEVICES_AVAILABLE")){this.#a=!1;for(let r of this.#s)r(!1)}}async#m(){const{SESSION_RESUMED:e}=Ru.SessionState;if(I0().getSessionState()===e&&this.#e.castSrc===o6()?.media.contentId){r0.add(this.#e),Object.entries(this.#i).forEach(([r,n])=>{this.#r.controller.addEventListener(r,n)});try{await jVe(new chrome.cast.media.GetStatusRequest)}catch(r){console.error(r)}this.#i[Ru.RemotePlayerEventType.IS_PAUSED_CHANGED](),this.#i[Ru.RemotePlayerEventType.PLAYER_STATE_CHANGED]()}}#h(){!Ru||this.#n||(this.#n=!0,YG(this.#e.castOptions),this.#e.textTracks.addEventListener("change",()=>this.#f()),this.#u(),this.#r=new Ru.RemotePlayer,new Ru.RemotePlayerController(this.#r),this.#i={[Ru.RemotePlayerEventType.IS_CONNECTED_CHANGED]:({value:e})=>{e===!0?(this.#t="connected",this.dispatchEvent(new Event("connect"))):(this.#c(),this.#t="disconnected",this.dispatchEvent(new Event("disconnect")))},[Ru.RemotePlayerEventType.DURATION_CHANGED]:()=>{this.#e.dispatchEvent(new Event("durationchange"))},[Ru.RemotePlayerEventType.VOLUME_LEVEL_CHANGED]:()=>{this.#e.dispatchEvent(new Event("volumechange"))},[Ru.RemotePlayerEventType.IS_MUTED_CHANGED]:()=>{this.#e.dispatchEvent(new Event("volumechange"))},[Ru.RemotePlayerEventType.CURRENT_TIME_CHANGED]:()=>{this.#o?.isMediaLoaded&&this.#e.dispatchEvent(new Event("timeupdate"))},[Ru.RemotePlayerEventType.VIDEO_INFO_CHANGED]:()=>{this.#e.dispatchEvent(new Event("resize"))},[Ru.RemotePlayerEventType.IS_PAUSED_CHANGED]:()=>{this.#e.dispatchEvent(new Event(this.paused?"pause":"play"))},[Ru.RemotePlayerEventType.PLAYER_STATE_CHANGED]:()=>{this.#o?.playerState!==chrome.cast.media.PlayerState.PAUSED&&this.#e.dispatchEvent(new Event({[chrome.cast.media.PlayerState.PLAYING]:"playing",[chrome.cast.media.PlayerState.BUFFERING]:"waiting",[chrome.cast.media.PlayerState.IDLE]:"emptied"}[this.#o?.playerState]))},[Ru.RemotePlayerEventType.IS_MEDIA_LOADED_CHANGED]:async()=>{this.#o?.isMediaLoaded&&(await Promise.resolve(),this.#A())}})}#A(){this.#f()}async#f(){if(!this.#o)return;const r=(this.#r.mediaInfo?.tracks??[]).filter(({type:f})=>f===chrome.cast.media.TrackType.TEXT),n=[...this.#e.textTracks].filter(({kind:f})=>f==="subtitles"||f==="captions"),i=r.map(({language:f,name:m,trackId:p})=>{const{mode:g}=n.find(y=>y.language===f&&y.label===m)??{};return g?{mode:g,trackId:p}:!1}).filter(Boolean),o=i.filter(({mode:f})=>f!=="showing").map(({trackId:f})=>f),c=i.find(({mode:f})=>f==="showing"),u=a6()?.getSessionObj().media[0]?.activeTrackIds??[];let l=u;if(u.length&&(l=l.filter(f=>!o.includes(f))),c?.trackId&&(l=[...l,c.trackId]),l=[...new Set(l)],!((f,m)=>f.length===m.length&&f.every(p=>m.includes(p)))(u,l))try{const f=new chrome.cast.media.EditTracksInfoRequest(l);await SVe(f)}catch(f){console.error(f)}}}const BVe=t=>class extends t{static observedAttributes=[...t.observedAttributes??[],"cast-src","cast-content-type","cast-stream-type","cast-receiver"];#e={paused:!1};#n=cae();#r;#i;get remote(){return this.#i?this.#i:_Ve()?(this.disableRemotePlayback||EVe(),oy.set(this,{loadOnPrompt:()=>this.#a()}),this.#i=new IVe(this)):super.remote}get#t(){return oy.get(this.remote)?.getCastPlayer?.()}attributeChangedCallback(r,n,i){if(super.attributeChangedCallback(r,n,i),r==="cast-receiver"&&i){this.#n.receiverApplicationId=i;return}if(this.#t)switch(r){case"cast-stream-type":case"cast-src":this.load();break}}async#a(){this.#e.paused=super.paused,super.pause(),this.muted=super.muted;try{await this.load()}catch(r){console.error(r)}}async load(){if(!this.#t)return super.load();const r=new chrome.cast.media.MediaInfo(this.castSrc,this.castContentType);r.customData=this.castCustomData;const n=[...this.querySelectorAll("track")].filter(({kind:c,src:u})=>u&&(c==="subtitles"||c==="captions")),i=[];let a=0;if(n.length&&(r.tracks=n.map(c=>{const u=++a;i.length===0&&c.track.mode==="showing"&&i.push(u);const l=new chrome.cast.media.Track(u,chrome.cast.media.TrackType.TEXT);return l.trackContentId=c.src,l.trackContentType="text/vtt",l.subtype=c.kind==="captions"?chrome.cast.media.TextTrackType.CAPTIONS:chrome.cast.media.TextTrackType.SUBTITLES,l.name=c.label,l.language=c.srclang,l})),this.castStreamType==="live"?r.streamType=chrome.cast.media.StreamType.LIVE:r.streamType=chrome.cast.media.StreamType.BUFFERED,r.metadata=new chrome.cast.media.GenericMediaMetadata,r.metadata.title=this.title,r.metadata.images=[{url:this.poster}],kVe(this.castSrc)){const c=await LVe(this.castSrc);c?.includes("m4s")||c?.includes("mp4")?(r.hlsSegmentFormat=chrome.cast.media.HlsSegmentFormat.FMP4,r.hlsVideoSegmentFormat=chrome.cast.media.HlsVideoSegmentFormat.FMP4):c?.includes("ts")&&(r.hlsSegmentFormat=chrome.cast.media.HlsSegmentFormat.TS,r.hlsVideoSegmentFormat=chrome.cast.media.HlsVideoSegmentFormat.TS)}const o=new chrome.cast.media.LoadRequest(r);o.currentTime=super.currentTime??0,o.autoplay=!this.#e.paused,o.activeTrackIds=i,await a6()?.loadMedia(o),this.dispatchEvent(new Event("volumechange"))}play(){if(this.#t){this.#t.isPaused&&this.#t.controller?.playOrPause();return}return super.play()}pause(){if(this.#t){this.#t.isPaused||this.#t.controller?.playOrPause();return}super.pause()}get castOptions(){return this.#n}get castReceiver(){return this.getAttribute("cast-receiver")??void 0}set castReceiver(r){this.castReceiver!=r&&this.setAttribute("cast-receiver",`${r}`)}get castSrc(){return this.getAttribute("cast-src")??this.querySelector("source")?.src??this.currentSrc}set castSrc(r){this.castSrc!=r&&this.setAttribute("cast-src",`${r}`)}get castContentType(){return this.getAttribute("cast-content-type")??void 0}set castContentType(r){this.setAttribute("cast-content-type",`${r}`)}get castStreamType(){return this.getAttribute("cast-stream-type")??this.streamType??void 0}set castStreamType(r){this.setAttribute("cast-stream-type",`${r}`)}get castCustomData(){return this.#r}set castCustomData(r){const n=typeof r;if(!["object","undefined"].includes(n)){console.error(`castCustomData must be nullish or an object but value was of type ${n}`);return}this.#r=r}get readyState(){if(this.#t)switch(this.#t.playerState){case chrome.cast.media.PlayerState.IDLE:return 0;case chrome.cast.media.PlayerState.BUFFERING:return 2;default:return 3}return super.readyState}get paused(){return this.#t?this.#t.isPaused:super.paused}get muted(){return this.#t?this.#t?.isMuted:super.muted}set muted(r){if(this.#t){(r&&!this.#t.isMuted||!r&&this.#t.isMuted)&&this.#t.controller?.muteOrUnmute();return}super.muted=r}get volume(){return this.#t?this.#t?.volumeLevel??1:super.volume}set volume(r){if(this.#t){this.#t.volumeLevel=+r,this.#t.controller?.setVolumeLevel();return}super.volume=r}get duration(){return this.#t&&this.#t?.isMediaLoaded?this.#t?.duration??NaN:super.duration}get currentTime(){return this.#t&&this.#t?.isMediaLoaded?this.#t?.currentTime??0:super.currentTime}set currentTime(r){if(this.#t){this.#t.currentTime=r,this.#t.controller?.seek();return}super.currentTime=r}};class ek extends Event{track;constructor(e,r){super(e),this.track=r.track}}const zO=new WeakMap;function mi(t){return zO.get(t)??PVe(t,{})}function PVe(t,e){let r=zO.get(t);return r||zO.set(t,r={}),Object.assign(r,e)}function VO(t,e){const r=t.videoTracks;mi(e).media=t,mi(e).renditionSet||(mi(e).renditionSet=new Set);const n=mi(r).trackSet;n.add(e);const i=n.size-1;i in GO.prototype||Object.defineProperty(GO.prototype,i,{get(){return[...mi(this).trackSet][i]}}),queueMicrotask(()=>{r.dispatchEvent(new ek("addtrack",{track:e}))})}function KO(t){const e=mi(t).media?.videoTracks;if(!e)return;mi(e).trackSet.delete(t),queueMicrotask(()=>{e.dispatchEvent(new ek("removetrack",{track:t}))})}function OVe(t){const e=mi(t).media.videoTracks??[];let r=!1;for(const n of e)n!==t&&(n.selected=!1,r=!0);if(r){if(mi(e).changeRequested)return;mi(e).changeRequested=!0,queueMicrotask(()=>{delete mi(e).changeRequested,e.dispatchEvent(new Event("change"))})}}class GO extends EventTarget{#e;#n;#r;constructor(){super(),mi(this).trackSet=new Set}get#i(){return mi(this).trackSet}[Symbol.iterator](){return this.#i.values()}get length(){return this.#i.size}getTrackById(e){return[...this.#i].find(r=>r.id===e)??null}get selectedIndex(){return[...this.#i].findIndex(e=>e.selected)}get onaddtrack(){return this.#e}set onaddtrack(e){this.#e&&(this.removeEventListener("addtrack",this.#e),this.#e=void 0),typeof e=="function"&&(this.#e=e,this.addEventListener("addtrack",e))}get onremovetrack(){return this.#n}set onremovetrack(e){this.#n&&(this.removeEventListener("removetrack",this.#n),this.#n=void 0),typeof e=="function"&&(this.#n=e,this.addEventListener("removetrack",e))}get onchange(){return this.#r}set onchange(e){this.#r&&(this.removeEventListener("change",this.#r),this.#r=void 0),typeof e=="function"&&(this.#r=e,this.addEventListener("change",e))}}class tk extends Event{rendition;constructor(e,r){super(e),this.rendition=r.rendition}}function RVe(t,e){const r=mi(t).media.videoRenditions;mi(e).media=mi(t).media,mi(e).track=t;const n=mi(t).renditionSet;n.add(e);const i=n.size-1;i in WO.prototype||Object.defineProperty(WO.prototype,i,{get(){return Bx(this)[i]}}),queueMicrotask(()=>{t.selected&&r.dispatchEvent(new tk("addrendition",{rendition:e}))})}function DVe(t){const e=mi(t).media.videoRenditions,r=mi(t).track;mi(r).renditionSet.delete(t),queueMicrotask(()=>{mi(t).track.selected&&e.dispatchEvent(new tk("removerendition",{rendition:t}))})}function MVe(t){const e=mi(t).media.videoRenditions;!e||mi(e).changeRequested||(mi(e).changeRequested=!0,queueMicrotask(()=>{delete mi(e).changeRequested,mi(t).track.selected&&e.dispatchEvent(new Event("change"))}))}function Bx(t){return[...mi(t).media.videoTracks].filter(r=>r.selected).flatMap(r=>[...mi(r).renditionSet])}class WO extends EventTarget{#e;#n;#r;[Symbol.iterator](){return Bx(this).values()}get length(){return Bx(this).length}getRenditionById(e){return Bx(this).find(r=>`${r.id}`==`${e}`)??null}get selectedIndex(){return Bx(this).findIndex(e=>e.selected)}set selectedIndex(e){for(const[r,n]of Bx(this).entries())n.selected=r===e}get onaddrendition(){return this.#e}set onaddrendition(e){this.#e&&(this.removeEventListener("addrendition",this.#e),this.#e=void 0),typeof e=="function"&&(this.#e=e,this.addEventListener("addrendition",e))}get onremoverendition(){return this.#n}set onremoverendition(e){this.#n&&(this.removeEventListener("removerendition",this.#n),this.#n=void 0),typeof e=="function"&&(this.#n=e,this.addEventListener("removerendition",e))}get onchange(){return this.#r}set onchange(e){this.#r&&(this.removeEventListener("change",this.#r),this.#r=void 0),typeof e=="function"&&(this.#r=e,this.addEventListener("change",e))}}class FVe{src;id;width;height;bitrate;frameRate;codec;#e=!1;get selected(){return this.#e}set selected(e){this.#e!==e&&(this.#e=e,MVe(this))}}class uae{id;kind;label="";language="";sourceBuffer;#e=!1;addRendition(e,r,n,i,a,o){const c=new FVe;return c.src=e,c.width=r,c.height=n,c.frameRate=o,c.bitrate=a,c.codec=i,RVe(this,c),c}removeRendition(e){DVe(e)}get selected(){return this.#e}set selected(e){this.#e!==e&&(this.#e=e,e===!0&&OVe(this))}}function UVe(t,e){const r=mi(t).media.audioRenditions;mi(e).media=mi(t).media,mi(e).track=t;const n=mi(t).renditionSet;n.add(e);const i=n.size-1;i in YO.prototype||Object.defineProperty(YO.prototype,i,{get(){return Px(this)[i]}}),queueMicrotask(()=>{t.enabled&&r.dispatchEvent(new tk("addrendition",{rendition:e}))})}function $Ve(t){const e=mi(t).media.audioRenditions,r=mi(t).track;mi(r).renditionSet.delete(t),queueMicrotask(()=>{mi(t).track.enabled&&e.dispatchEvent(new tk("removerendition",{rendition:t}))})}function HVe(t){const e=mi(t).media.audioRenditions;!e||mi(e).changeRequested||(mi(e).changeRequested=!0,queueMicrotask(()=>{delete mi(e).changeRequested,mi(t).track.enabled&&e.dispatchEvent(new Event("change"))}))}function Px(t){return[...mi(t).media.audioTracks].filter(r=>r.enabled).flatMap(r=>[...mi(r).renditionSet])}class YO extends EventTarget{#e;#n;#r;[Symbol.iterator](){return Px(this).values()}get length(){return Px(this).length}getRenditionById(e){return Px(this).find(r=>`${r.id}`==`${e}`)??null}get selectedIndex(){return Px(this).findIndex(e=>e.selected)}set selectedIndex(e){for(const[r,n]of Px(this).entries())n.selected=r===e}get onaddrendition(){return this.#e}set onaddrendition(e){this.#e&&(this.removeEventListener("addrendition",this.#e),this.#e=void 0),typeof e=="function"&&(this.#e=e,this.addEventListener("addrendition",e))}get onremoverendition(){return this.#n}set onremoverendition(e){this.#n&&(this.removeEventListener("removerendition",this.#n),this.#n=void 0),typeof e=="function"&&(this.#n=e,this.addEventListener("removerendition",e))}get onchange(){return this.#r}set onchange(e){this.#r&&(this.removeEventListener("change",this.#r),this.#r=void 0),typeof e=="function"&&(this.#r=e,this.addEventListener("change",e))}}class QVe{src;id;bitrate;codec;#e=!1;get selected(){return this.#e}set selected(e){this.#e!==e&&(this.#e=e,HVe(this))}}function qO(t,e){const r=t.audioTracks;mi(e).media=t,mi(e).renditionSet||(mi(e).renditionSet=new Set);const n=mi(r).trackSet;n.add(e);const i=n.size-1;i in ZO.prototype||Object.defineProperty(ZO.prototype,i,{get(){return[...mi(this).trackSet][i]}}),queueMicrotask(()=>{r.dispatchEvent(new ek("addtrack",{track:e}))})}function XO(t){const e=mi(t).media?.audioTracks;if(!e)return;mi(e).trackSet.delete(t),queueMicrotask(()=>{e.dispatchEvent(new ek("removetrack",{track:t}))})}function zVe(t){const e=mi(t).media.audioTracks;!e||mi(e).changeRequested||(mi(e).changeRequested=!0,queueMicrotask(()=>{delete mi(e).changeRequested,e.dispatchEvent(new Event("change"))}))}class ZO extends EventTarget{#e;#n;#r;constructor(){super(),mi(this).trackSet=new Set}get#i(){return mi(this).trackSet}[Symbol.iterator](){return this.#i.values()}get length(){return this.#i.size}getTrackById(e){return[...this.#i].find(r=>r.id===e)??null}get onaddtrack(){return this.#e}set onaddtrack(e){this.#e&&(this.removeEventListener("addtrack",this.#e),this.#e=void 0),typeof e=="function"&&(this.#e=e,this.addEventListener("addtrack",e))}get onremovetrack(){return this.#n}set onremovetrack(e){this.#n&&(this.removeEventListener("removetrack",this.#n),this.#n=void 0),typeof e=="function"&&(this.#n=e,this.addEventListener("removetrack",e))}get onchange(){return this.#r}set onchange(e){this.#r&&(this.removeEventListener("change",this.#r),this.#r=void 0),typeof e=="function"&&(this.#r=e,this.addEventListener("change",e))}}class dae{id;kind;label="";language="";sourceBuffer;#e=!1;addRendition(e,r,n){const i=new QVe;return i.src=e,i.codec=r,i.bitrate=n,UVe(this,i),i}removeRendition(e){$Ve(e)}get enabled(){return this.#e}set enabled(e){this.#e!==e&&(this.#e=e,zVe(this))}}const XG=mN(globalThis.HTMLMediaElement,"video"),ZG=mN(globalThis.HTMLMediaElement,"audio");function VVe(t){if(!t?.prototype)return t;const e=mN(t,"video");(!e||`${e}`.includes("[native code]"))&&Object.defineProperty(t.prototype,"videoTracks",{get(){return KVe(this)}});const r=mN(t,"audio");(!r||`${r}`.includes("[native code]"))&&Object.defineProperty(t.prototype,"audioTracks",{get(){return GVe(this)}}),"addVideoTrack"in t.prototype||(t.prototype.addVideoTrack=function(a,o="",c=""){const u=new uae;return u.kind=a,u.label=o,u.language=c,VO(this,u),u}),"removeVideoTrack"in t.prototype||(t.prototype.removeVideoTrack=KO),"addAudioTrack"in t.prototype||(t.prototype.addAudioTrack=function(a,o="",c=""){const u=new dae;return u.kind=a,u.label=o,u.language=c,qO(this,u),u}),"removeAudioTrack"in t.prototype||(t.prototype.removeAudioTrack=XO),"videoRenditions"in t.prototype||Object.defineProperty(t.prototype,"videoRenditions",{get(){return n(this)}});const n=a=>{let o=mi(a).videoRenditions;return o||(o=new WO,mi(o).media=a,mi(a).videoRenditions=o),o};"audioRenditions"in t.prototype||Object.defineProperty(t.prototype,"audioRenditions",{get(){return i(this)}});const i=a=>{let o=mi(a).audioRenditions;return o||(o=new YO,mi(o).media=a,mi(a).audioRenditions=o),o};return t}function mN(t,e){if(t?.prototype)return Object.getOwnPropertyDescriptor(t.prototype,`${e}Tracks`)?.get}function KVe(t){let e=mi(t).videoTracks;if(!e&&(e=new GO,mi(t).videoTracks=e,XG)){const r=XG.call(t.nativeEl??t);for(const n of r)VO(t,n);r.addEventListener("change",()=>{e.dispatchEvent(new Event("change"))}),r.addEventListener("addtrack",n=>{if([...e].some(i=>i instanceof uae)){for(const i of r)KO(i);return}VO(t,n.track)}),r.addEventListener("removetrack",n=>{KO(n.track)})}return e}function GVe(t){let e=mi(t).audioTracks;if(!e&&(e=new ZO,mi(t).audioTracks=e,ZG)){const r=ZG.call(t.nativeEl??t);for(const n of r)qO(t,n);r.addEventListener("change",()=>{e.dispatchEvent(new Event("change"))}),r.addEventListener("addtrack",n=>{if([...e].some(i=>i instanceof dae)){for(const i of r)XO(i);return}qO(t,n.track)}),r.addEventListener("removetrack",n=>{XO(n.track)})}return e}var hae=t=>{throw TypeError(t)},fae=(t,e,r)=>e.has(t)||hae("Cannot "+r),WVe=(t,e,r)=>(fae(t,e,"read from private field"),r?r.call(t):e.get(t)),YVe=(t,e,r)=>e.has(t)?hae("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),qVe=(t,e,r,n)=>(fae(t,e,"write to private field"),e.set(t,r),r),mae=class{addEventListener(){}removeEventListener(){}dispatchEvent(e){return!0}};if(typeof DocumentFragment>"u"){class t extends mae{}globalThis.DocumentFragment=t}var XVe=class extends mae{},ZVe={get(t){},define(t,e,r){},getName(t){return null},upgrade(t){},whenDefined(t){return Promise.resolve(XVe)}},JVe={customElements:ZVe},eKe=typeof window>"u"||typeof globalThis.customElements>"u",tB=eKe?JVe:globalThis,Lj,JG=class extends BVe(VVe(vVe)){constructor(){super(...arguments),YVe(this,Lj)}get autoplay(){let t=this.getAttribute("autoplay");return t===null?!1:t===""?!0:t}set autoplay(t){let e=this.autoplay;t!==e&&(t?this.setAttribute("autoplay",typeof t=="string"?t:""):this.removeAttribute("autoplay"))}get muxCastCustomData(){return{mux:{playbackId:this.playbackId,minResolution:this.minResolution,maxResolution:this.maxResolution,renditionOrder:this.renditionOrder,customDomain:this.customDomain,tokens:{drm:this.drmToken},envKey:this.envKey,metadata:this.metadata,disableCookies:this.disableCookies,disableTracking:this.disableTracking,beaconCollectionDomain:this.beaconCollectionDomain,startTime:this.startTime,preferCmcd:this.preferCmcd}}}get castCustomData(){var t;return(t=WVe(this,Lj))!=null?t:this.muxCastCustomData}set castCustomData(t){qVe(this,Lj,t)}};Lj=new WeakMap;tB.customElements.get("mux-video")||(tB.customElements.define("mux-video",JG),tB.MuxVideoElement=JG);const Gn={MEDIA_PLAY_REQUEST:"mediaplayrequest",MEDIA_PAUSE_REQUEST:"mediapauserequest",MEDIA_MUTE_REQUEST:"mediamuterequest",MEDIA_UNMUTE_REQUEST:"mediaunmuterequest",MEDIA_LOOP_REQUEST:"medialooprequest",MEDIA_VOLUME_REQUEST:"mediavolumerequest",MEDIA_SEEK_REQUEST:"mediaseekrequest",MEDIA_AIRPLAY_REQUEST:"mediaairplayrequest",MEDIA_ENTER_FULLSCREEN_REQUEST:"mediaenterfullscreenrequest",MEDIA_EXIT_FULLSCREEN_REQUEST:"mediaexitfullscreenrequest",MEDIA_PREVIEW_REQUEST:"mediapreviewrequest",MEDIA_ENTER_PIP_REQUEST:"mediaenterpiprequest",MEDIA_EXIT_PIP_REQUEST:"mediaexitpiprequest",MEDIA_ENTER_CAST_REQUEST:"mediaentercastrequest",MEDIA_EXIT_CAST_REQUEST:"mediaexitcastrequest",MEDIA_SHOW_TEXT_TRACKS_REQUEST:"mediashowtexttracksrequest",MEDIA_HIDE_TEXT_TRACKS_REQUEST:"mediahidetexttracksrequest",MEDIA_SHOW_SUBTITLES_REQUEST:"mediashowsubtitlesrequest",MEDIA_DISABLE_SUBTITLES_REQUEST:"mediadisablesubtitlesrequest",MEDIA_TOGGLE_SUBTITLES_REQUEST:"mediatogglesubtitlesrequest",MEDIA_PLAYBACK_RATE_REQUEST:"mediaplaybackraterequest",MEDIA_RENDITION_REQUEST:"mediarenditionrequest",MEDIA_AUDIO_TRACK_REQUEST:"mediaaudiotrackrequest",MEDIA_SEEK_TO_LIVE_REQUEST:"mediaseektoliverequest",REGISTER_MEDIA_STATE_RECEIVER:"registermediastatereceiver",UNREGISTER_MEDIA_STATE_RECEIVER:"unregistermediastatereceiver"},Ao={MEDIA_CHROME_ATTRIBUTES:"mediachromeattributes",MEDIA_CONTROLLER:"mediacontroller"},Aae={MEDIA_AIRPLAY_UNAVAILABLE:"mediaAirplayUnavailable",MEDIA_AUDIO_TRACK_ENABLED:"mediaAudioTrackEnabled",MEDIA_AUDIO_TRACK_LIST:"mediaAudioTrackList",MEDIA_AUDIO_TRACK_UNAVAILABLE:"mediaAudioTrackUnavailable",MEDIA_BUFFERED:"mediaBuffered",MEDIA_CAST_UNAVAILABLE:"mediaCastUnavailable",MEDIA_CHAPTERS_CUES:"mediaChaptersCues",MEDIA_CURRENT_TIME:"mediaCurrentTime",MEDIA_DURATION:"mediaDuration",MEDIA_ENDED:"mediaEnded",MEDIA_ERROR:"mediaError",MEDIA_ERROR_CODE:"mediaErrorCode",MEDIA_ERROR_MESSAGE:"mediaErrorMessage",MEDIA_FULLSCREEN_UNAVAILABLE:"mediaFullscreenUnavailable",MEDIA_HAS_PLAYED:"mediaHasPlayed",MEDIA_HEIGHT:"mediaHeight",MEDIA_IS_AIRPLAYING:"mediaIsAirplaying",MEDIA_IS_CASTING:"mediaIsCasting",MEDIA_IS_FULLSCREEN:"mediaIsFullscreen",MEDIA_IS_PIP:"mediaIsPip",MEDIA_LOADING:"mediaLoading",MEDIA_MUTED:"mediaMuted",MEDIA_LOOP:"mediaLoop",MEDIA_PAUSED:"mediaPaused",MEDIA_PIP_UNAVAILABLE:"mediaPipUnavailable",MEDIA_PLAYBACK_RATE:"mediaPlaybackRate",MEDIA_PREVIEW_CHAPTER:"mediaPreviewChapter",MEDIA_PREVIEW_COORDS:"mediaPreviewCoords",MEDIA_PREVIEW_IMAGE:"mediaPreviewImage",MEDIA_PREVIEW_TIME:"mediaPreviewTime",MEDIA_RENDITION_LIST:"mediaRenditionList",MEDIA_RENDITION_SELECTED:"mediaRenditionSelected",MEDIA_RENDITION_UNAVAILABLE:"mediaRenditionUnavailable",MEDIA_SEEKABLE:"mediaSeekable",MEDIA_STREAM_TYPE:"mediaStreamType",MEDIA_SUBTITLES_LIST:"mediaSubtitlesList",MEDIA_SUBTITLES_SHOWING:"mediaSubtitlesShowing",MEDIA_TARGET_LIVE_WINDOW:"mediaTargetLiveWindow",MEDIA_TIME_IS_LIVE:"mediaTimeIsLive",MEDIA_VOLUME:"mediaVolume",MEDIA_VOLUME_LEVEL:"mediaVolumeLevel",MEDIA_VOLUME_UNAVAILABLE:"mediaVolumeUnavailable",MEDIA_LANG:"mediaLang",MEDIA_WIDTH:"mediaWidth"},pae=Object.entries(Aae),gt=pae.reduce((t,[e,r])=>(t[e]=r.toLowerCase(),t),{}),tKe={USER_INACTIVE_CHANGE:"userinactivechange",BREAKPOINTS_CHANGE:"breakpointchange",BREAKPOINTS_COMPUTED:"breakpointscomputed"},fg=pae.reduce((t,[e,r])=>(t[e]=r.toLowerCase(),t),{...tKe});Object.entries(fg).reduce((t,[e,r])=>{const n=gt[e];return n&&(t[r]=n),t},{userinactivechange:"userinactive"});const rKe=Object.entries(gt).reduce((t,[e,r])=>{const n=fg[e];return n&&(t[r]=n),t},{userinactive:"userinactivechange"}),KA={SUBTITLES:"subtitles",CAPTIONS:"captions",CHAPTERS:"chapters",METADATA:"metadata"},Nb={DISABLED:"disabled",SHOWING:"showing"},rB={MOUSE:"mouse",PEN:"pen",TOUCH:"touch"},af={UNAVAILABLE:"unavailable",UNSUPPORTED:"unsupported"},Rp={LIVE:"live",ON_DEMAND:"on-demand",UNKNOWN:"unknown"},nKe={FULLSCREEN:"fullscreen"};function iKe(t){return t?.map(aKe).join(" ")}function sKe(t){return t?.split(/\s+/).map(oKe)}function aKe(t){if(t){const{id:e,width:r,height:n}=t;return[e,r,n].filter(i=>i!=null).join(":")}}function oKe(t){if(t){const[e,r,n]=t.split(":");return{id:e,width:+r,height:+n}}}function lKe(t){return t?.map(uKe).join(" ")}function cKe(t){return t?.split(/\s+/).map(dKe)}function uKe(t){if(t){const{id:e,kind:r,language:n,label:i}=t;return[e,r,n,i].filter(a=>a!=null).join(":")}}function dKe(t){if(t){const[e,r,n,i]=t.split(":");return{id:e,kind:r,language:n,label:i}}}function hKe(t){return t.replace(/[-_]([a-z])/g,(e,r)=>r.toUpperCase())}function l6(t){return typeof t=="number"&&!Number.isNaN(t)&&Number.isFinite(t)}function gae(t){return typeof t!="string"?!1:!isNaN(t)&&!isNaN(parseFloat(t))}const vae=t=>new Promise(e=>setTimeout(e,t)),eW=[{singular:"hour",plural:"hours"},{singular:"minute",plural:"minutes"},{singular:"second",plural:"seconds"}],fKe=(t,e)=>{const r=t===1?eW[e].singular:eW[e].plural;return`${t} ${r}`},w2=t=>{if(!l6(t))return"";const e=Math.abs(t),r=e!==t,n=new Date(0,0,0,0,0,e,0);return`${[n.getHours(),n.getMinutes(),n.getSeconds()].map((c,u)=>c&&fKe(c,u)).filter(c=>c).join(", ")}${r?" remaining":""}`};function M0(t,e){let r=!1;t<0&&(r=!0,t=0-t),t=t<0?0:t;let n=Math.floor(t%60),i=Math.floor(t/60%60),a=Math.floor(t/3600);const o=Math.floor(e/60%60),c=Math.floor(e/3600);return(isNaN(t)||t===1/0)&&(a=i=n="0"),a=a>0||c>0?a+":":"",i=((a||o>=10)&&i<10?"0"+i:i)+":",n=n<10?"0"+n:n,(r?"-":"")+a+i+n}const mKe={"Start airplay":"Start airplay","Stop airplay":"Stop airplay",Audio:"Audio",Captions:"Captions","Enable captions":"Enable captions","Disable captions":"Disable captions","Start casting":"Start casting","Stop casting":"Stop casting","Enter fullscreen mode":"Enter fullscreen mode","Exit fullscreen mode":"Exit fullscreen mode",Mute:"Mute",Unmute:"Unmute",Loop:"Loop","Enter picture in picture mode":"Enter picture in picture mode","Exit picture in picture mode":"Exit picture in picture mode",Play:"Play",Pause:"Pause","Playback rate":"Playback rate","Playback rate {playbackRate}":"Playback rate {playbackRate}",Quality:"Quality","Seek backward":"Seek backward","Seek forward":"Seek forward",Settings:"Settings",Auto:"Auto","audio player":"audio player","video player":"video player",volume:"volume",seek:"seek","closed captions":"closed captions","current playback rate":"current playback rate","playback time":"playback time","media loading":"media loading",settings:"settings","audio tracks":"audio tracks",quality:"quality",play:"play",pause:"pause",mute:"mute",unmute:"unmute","chapter: {chapterName}":"chapter: {chapterName}",live:"live",Off:"Off","start airplay":"start airplay","stop airplay":"stop airplay","start casting":"start casting","stop casting":"stop casting","enter fullscreen mode":"enter fullscreen mode","exit fullscreen mode":"exit fullscreen mode","enter picture in picture mode":"enter picture in picture mode","exit picture in picture mode":"exit picture in picture mode","seek to live":"seek to live","playing live":"playing live","seek back {seekOffset} seconds":"seek back {seekOffset} seconds","seek forward {seekOffset} seconds":"seek forward {seekOffset} seconds","Network Error":"Network Error","Decode Error":"Decode Error","Source Not Supported":"Source Not Supported","Encryption Error":"Encryption Error","A network error caused the media download to fail.":"A network error caused the media download to fail.","A media error caused playback to be aborted. The media could be corrupt or your browser does not support this format.":"A media error caused playback to be aborted. The media could be corrupt or your browser does not support this format.","An unsupported error occurred. The server or network failed, or your browser does not support this format.":"An unsupported error occurred. The server or network failed, or your browser does not support this format.","The media is encrypted and there are no keys to decrypt it.":"The media is encrypted and there are no keys to decrypt it."};var tW;const nB={en:mKe};let JO=((tW=globalThis.navigator)==null?void 0:tW.language)||"en";const AKe=t=>{JO=t},pKe=t=>{var e,r,n;const[i]=JO.split("-");return((e=nB[JO])==null?void 0:e[t])||((r=nB[i])==null?void 0:r[t])||((n=nB.en)==null?void 0:n[t])||t},Ai=(t,e={})=>pKe(t).replace(/\{(\w+)\}/g,(r,n)=>n in e?String(e[n]):`{${n}}`);let yae=class{addEventListener(){}removeEventListener(){}dispatchEvent(){return!0}},xae=class extends yae{},rW=class extends xae{constructor(){super(...arguments),this.role=null}},gKe=class{observe(){}unobserve(){}disconnect(){}};const bae={createElement:function(){return new p_.HTMLElement},createElementNS:function(){return new p_.HTMLElement},addEventListener(){},removeEventListener(){},dispatchEvent(t){return!1}},p_={ResizeObserver:gKe,document:bae,Node:xae,Element:rW,HTMLElement:class extends rW{constructor(){super(...arguments),this.innerHTML=""}get content(){return new p_.DocumentFragment}},DocumentFragment:class extends yae{},customElements:{get:function(){},define:function(){},whenDefined:function(){}},localStorage:{getItem(t){return null},setItem(t,e){},removeItem(t){}},CustomEvent:function(){},getComputedStyle:function(){},navigator:{languages:[],get userAgent(){return""}},matchMedia(t){return{matches:!1,media:t}},DOMParser:class{parseFromString(e,r){return{body:{textContent:e}}}}},wae="global"in globalThis&&globalThis?.global===globalThis||typeof window>"u"||typeof window.customElements>"u",_ae=Object.keys(p_).every(t=>t in globalThis),sr=wae&&!_ae?p_:globalThis,yu=wae&&!_ae?bae:globalThis.document,nW=new WeakMap,c6=t=>{let e=nW.get(t);return e||nW.set(t,e=new Set),e},Eae=new sr.ResizeObserver(t=>{for(const e of t)for(const r of c6(e.target))r(e)});function i1(t,e){c6(t).add(e),Eae.observe(t)}function s1(t,e){const r=c6(t);r.delete(e),r.size||Eae.unobserve(t)}function Lf(t){const e={};for(const r of t)e[r.name]=r.value;return e}function Vh(t){var e;return(e=e3(t))!=null?e:I1(t,"media-controller")}function e3(t){var e;const{MEDIA_CONTROLLER:r}=Ao,n=t.getAttribute(r);if(n)return(e=rk(t))==null?void 0:e.getElementById(n)}const Sae=(t,e,r=".value")=>{const n=t.querySelector(r);n&&(n.textContent=e)},vKe=(t,e)=>{const r=`slot[name="${e}"]`,n=t.shadowRoot.querySelector(r);return n?n.children:[]},jae=(t,e)=>vKe(t,e)[0],Eg=(t,e)=>!t||!e?!1:t?.contains(e)?!0:Eg(t,e.getRootNode().host),I1=(t,e)=>{if(!t)return null;const r=t.closest(e);return r||I1(t.getRootNode().host,e)};function u6(t=document){var e;const r=t?.activeElement;return r?(e=u6(r.shadowRoot))!=null?e:r:null}function rk(t){var e;const r=(e=t?.getRootNode)==null?void 0:e.call(t);return r instanceof ShadowRoot||r instanceof Document?r:null}function Tae(t,{depth:e=3,checkOpacity:r=!0,checkVisibilityCSS:n=!0}={}){if(t.checkVisibility)return t.checkVisibility({checkOpacity:r,checkVisibilityCSS:n});let i=t;for(;i&&e>0;){const a=getComputedStyle(i);if(r&&a.opacity==="0"||n&&a.visibility==="hidden"||a.display==="none")return!1;i=i.parentElement,e--}return!0}function yKe(t,e,r,n){const i=n.x-r.x,a=n.y-r.y,o=i*i+a*a;if(o===0)return 0;const c=((t-r.x)*i+(e-r.y)*a)/o;return Math.max(0,Math.min(1,c))}function Hu(t,e){const r=xKe(t,n=>n===e);return r||d6(t,e)}function xKe(t,e){var r,n;let i;for(i of(r=t.querySelectorAll("style:not([media])"))!=null?r:[]){let a;try{a=(n=i.sheet)==null?void 0:n.cssRules}catch{continue}for(const o of a??[])if(e(o.selectorText))return o}}function d6(t,e){var r,n;const i=(r=t.querySelectorAll("style:not([media])"))!=null?r:[],a=i?.[i.length-1];return a?.sheet?(a?.sheet.insertRule(`${e}{}`,a.sheet.cssRules.length),(n=a.sheet.cssRules)==null?void 0:n[a.sheet.cssRules.length-1]):(console.warn("Media Chrome: No style sheet found on style tag of",t),{style:{setProperty:()=>{},removeProperty:()=>"",getPropertyValue:()=>""}})}function Tl(t,e,r=Number.NaN){const n=t.getAttribute(e);return n!=null?+n:r}function Dc(t,e,r){const n=+r;if(r==null||Number.isNaN(n)){t.hasAttribute(e)&&t.removeAttribute(e);return}Tl(t,e,void 0)!==n&&t.setAttribute(e,`${n}`)}function Oa(t,e){return t.hasAttribute(e)}function Ra(t,e,r){if(r==null){t.hasAttribute(e)&&t.removeAttribute(e);return}Oa(t,e)!=r&&t.toggleAttribute(e,r)}function Cl(t,e,r=null){var n;return(n=t.getAttribute(e))!=null?n:r}function Nl(t,e,r){if(r==null){t.hasAttribute(e)&&t.removeAttribute(e);return}const n=`${r}`;Cl(t,e,void 0)!==n&&t.setAttribute(e,n)}var Cae=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},n0=(t,e,r)=>(Cae(t,e,"read from private field"),r?r.call(t):e.get(t)),bKe=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},OS=(t,e,r,n)=>(Cae(t,e,"write to private field"),e.set(t,r),r),Rh;function wKe(t){return`
    <style>
      :host {
        display: var(--media-control-display, var(--media-gesture-receiver-display, inline-block));
        box-sizing: border-box;
      }
    </style>
  `}class nk extends sr.HTMLElement{constructor(){if(super(),bKe(this,Rh,void 0),!this.shadowRoot){this.attachShadow(this.constructor.shadowRootOptions);const e=Lf(this.attributes);this.shadowRoot.innerHTML=this.constructor.getTemplateHTML(e)}}static get observedAttributes(){return[Ao.MEDIA_CONTROLLER,gt.MEDIA_PAUSED]}attributeChangedCallback(e,r,n){var i,a,o,c,u;e===Ao.MEDIA_CONTROLLER&&(r&&((a=(i=n0(this,Rh))==null?void 0:i.unassociateElement)==null||a.call(i,this),OS(this,Rh,null)),n&&this.isConnected&&(OS(this,Rh,(o=this.getRootNode())==null?void 0:o.getElementById(n)),(u=(c=n0(this,Rh))==null?void 0:c.associateElement)==null||u.call(c,this)))}connectedCallback(){var e,r,n,i;this.tabIndex=-1,this.setAttribute("aria-hidden","true"),OS(this,Rh,_Ke(this)),this.getAttribute(Ao.MEDIA_CONTROLLER)&&((r=(e=n0(this,Rh))==null?void 0:e.associateElement)==null||r.call(e,this)),(n=n0(this,Rh))==null||n.addEventListener("pointerdown",this),(i=n0(this,Rh))==null||i.addEventListener("click",this)}disconnectedCallback(){var e,r,n,i;this.getAttribute(Ao.MEDIA_CONTROLLER)&&((r=(e=n0(this,Rh))==null?void 0:e.unassociateElement)==null||r.call(e,this)),(n=n0(this,Rh))==null||n.removeEventListener("pointerdown",this),(i=n0(this,Rh))==null||i.removeEventListener("click",this),OS(this,Rh,null)}handleEvent(e){var r;const n=(r=e.composedPath())==null?void 0:r[0];if(["video","media-controller"].includes(n?.localName)){if(e.type==="pointerdown")this._pointerType=e.pointerType;else if(e.type==="click"){const{clientX:a,clientY:o}=e,{left:c,top:u,width:l,height:d}=this.getBoundingClientRect(),f=a-c,m=o-u;if(f<0||m<0||f>l||m>d||l===0&&d===0)return;const p=this._pointerType||"mouse";if(this._pointerType=void 0,p===rB.TOUCH){this.handleTap(e);return}else if(p===rB.MOUSE||p===rB.PEN){this.handleMouseClick(e);return}}}}get mediaPaused(){return Oa(this,gt.MEDIA_PAUSED)}set mediaPaused(e){Ra(this,gt.MEDIA_PAUSED,e)}handleTap(e){}handleMouseClick(e){const r=this.mediaPaused?Gn.MEDIA_PLAY_REQUEST:Gn.MEDIA_PAUSE_REQUEST;this.dispatchEvent(new sr.CustomEvent(r,{composed:!0,bubbles:!0}))}}Rh=new WeakMap;nk.shadowRootOptions={mode:"open"};nk.getTemplateHTML=wKe;function _Ke(t){var e;const r=t.getAttribute(Ao.MEDIA_CONTROLLER);return r?(e=t.getRootNode())==null?void 0:e.getElementById(r):I1(t,"media-controller")}sr.customElements.get("media-gesture-receiver")||sr.customElements.define("media-gesture-receiver",nk);var iW=nk,h6=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},Af=(t,e,r)=>(h6(t,e,"read from private field"),r?r.call(t):e.get(t)),of=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},kv=(t,e,r,n)=>(h6(t,e,"write to private field"),e.set(t,r),r),Zf=(t,e,r)=>(h6(t,e,"access private method"),r),AN,Ox,g_,fb,Ij,t3,Nae,Uw,Bj,r3,kae,n3,Lae,v_,ik,sk,f6,a1,y_;const es={AUDIO:"audio",AUTOHIDE:"autohide",BREAKPOINTS:"breakpoints",GESTURES_DISABLED:"gesturesdisabled",KEYBOARD_CONTROL:"keyboardcontrol",NO_AUTOHIDE:"noautohide",USER_INACTIVE:"userinactive",AUTOHIDE_OVER_CONTROLS:"autohideovercontrols"};function EKe(t){return`
    <style>
      
      :host([${gt.MEDIA_IS_FULLSCREEN}]) ::slotted([slot=media]) {
        outline: none;
      }

      :host {
        box-sizing: border-box;
        position: relative;
        display: inline-block;
        line-height: 0;
        background-color: var(--media-background-color, #000);
        overflow: hidden;
      }

      :host(:not([${es.AUDIO}])) [part~=layer]:not([part~=media-layer]) {
        position: absolute;
        top: 0;
        left: 0;
        bottom: 0;
        right: 0;
        display: flex;
        flex-flow: column nowrap;
        align-items: start;
        pointer-events: none;
        background: none;
      }

      slot[name=media] {
        display: var(--media-slot-display, contents);
      }

      
      :host([${es.AUDIO}]) slot[name=media] {
        display: var(--media-slot-display, none);
      }

      
      :host([${es.AUDIO}]) [part~=layer][part~=gesture-layer] {
        height: 0;
        display: block;
      }

      
      :host(:not([${es.AUDIO}])[${es.GESTURES_DISABLED}]) ::slotted([slot=gestures-chrome]),
          :host(:not([${es.AUDIO}])[${es.GESTURES_DISABLED}]) media-gesture-receiver[slot=gestures-chrome] {
        display: none;
      }

      
      ::slotted(:not([slot=media]):not([slot=poster]):not(media-loading-indicator):not([role=dialog]):not([hidden])) {
        pointer-events: auto;
      }

      :host(:not([${es.AUDIO}])) *[part~=layer][part~=centered-layer] {
        align-items: center;
        justify-content: center;
      }

      :host(:not([${es.AUDIO}])) ::slotted(media-gesture-receiver[slot=gestures-chrome]),
      :host(:not([${es.AUDIO}])) media-gesture-receiver[slot=gestures-chrome] {
        align-self: stretch;
        flex-grow: 1;
      }

      slot[name=middle-chrome] {
        display: inline;
        flex-grow: 1;
        pointer-events: none;
        background: none;
      }

      
      ::slotted([slot=media]),
      ::slotted([slot=poster]) {
        width: 100%;
        height: 100%;
      }

      
      :host(:not([${es.AUDIO}])) .spacer {
        flex-grow: 1;
      }

      
      :host(:-webkit-full-screen) {
        
        width: 100% !important;
        height: 100% !important;
      }

      
      ::slotted(:not([slot=media]):not([slot=poster]):not([${es.NO_AUTOHIDE}]):not([hidden]):not([role=dialog])) {
        opacity: 1;
        transition: var(--media-control-transition-in, opacity 0.25s);
      }

      
      :host([${es.USER_INACTIVE}]:not([${gt.MEDIA_PAUSED}]):not([${gt.MEDIA_IS_AIRPLAYING}]):not([${gt.MEDIA_IS_CASTING}]):not([${es.AUDIO}])) ::slotted(:not([slot=media]):not([slot=poster]):not([${es.NO_AUTOHIDE}]):not([role=dialog])) {
        opacity: 0;
        transition: var(--media-control-transition-out, opacity 1s);
      }

      :host([${es.USER_INACTIVE}]:not([${es.NO_AUTOHIDE}]):not([${gt.MEDIA_PAUSED}]):not([${gt.MEDIA_IS_CASTING}]):not([${es.AUDIO}])) ::slotted([slot=media]) {
        cursor: none;
      }

      :host([${es.USER_INACTIVE}][${es.AUTOHIDE_OVER_CONTROLS}]:not([${es.NO_AUTOHIDE}]):not([${gt.MEDIA_PAUSED}]):not([${gt.MEDIA_IS_CASTING}]):not([${es.AUDIO}])) * {
        --media-cursor: none;
        cursor: none;
      }


      ::slotted(media-control-bar)  {
        align-self: stretch;
      }

      
      :host(:not([${es.AUDIO}])[${gt.MEDIA_HAS_PLAYED}]) slot[name=poster] {
        display: none;
      }

      ::slotted([role=dialog]) {
        width: 100%;
        height: 100%;
        align-self: center;
      }

      ::slotted([role=menu]) {
        align-self: end;
      }
    </style>

    <slot name="media" part="layer media-layer"></slot>
    <slot name="poster" part="layer poster-layer"></slot>
    <slot name="gestures-chrome" part="layer gesture-layer">
      <media-gesture-receiver slot="gestures-chrome">
        <template shadowrootmode="${iW.shadowRootOptions.mode}">
          ${iW.getTemplateHTML({})}
        </template>
      </media-gesture-receiver>
    </slot>
    <span part="layer vertical-layer">
      <slot name="top-chrome" part="top chrome"></slot>
      <slot name="middle-chrome" part="middle chrome"></slot>
      <slot name="centered-chrome" part="layer centered-layer center centered chrome"></slot>
      
      <slot part="bottom chrome"></slot>
    </span>
    <slot name="dialog" part="layer dialog-layer"></slot>
  `}const SKe=Object.values(gt),jKe="sm:384 md:576 lg:768 xl:960";function TKe(t){Iae(t.target,t.contentRect.width)}function Iae(t,e){var r;if(!t.isConnected)return;const n=(r=t.getAttribute(es.BREAKPOINTS))!=null?r:jKe,i=CKe(n),a=NKe(i,e);let o=!1;if(Object.keys(i).forEach(c=>{if(a.includes(c)){t.hasAttribute(`breakpoint${c}`)||(t.setAttribute(`breakpoint${c}`,""),o=!0);return}t.hasAttribute(`breakpoint${c}`)&&(t.removeAttribute(`breakpoint${c}`),o=!0)}),o){const c=new CustomEvent(fg.BREAKPOINTS_CHANGE,{detail:a});t.dispatchEvent(c)}t.breakpointsComputed||(t.breakpointsComputed=!0,t.dispatchEvent(new CustomEvent(fg.BREAKPOINTS_COMPUTED,{bubbles:!0,composed:!0})))}function CKe(t){const e=t.split(/\s+/);return Object.fromEntries(e.map(r=>r.split(":")))}function NKe(t,e){return Object.keys(t).filter(r=>e>=parseInt(t[r]))}class ak extends sr.HTMLElement{constructor(){if(super(),of(this,t3),of(this,r3),of(this,n3),of(this,v_),of(this,sk),of(this,a1),of(this,AN,0),of(this,Ox,null),of(this,g_,null),of(this,fb,void 0),this.breakpointsComputed=!1,of(this,Ij,new MutationObserver(Zf(this,t3,Nae).bind(this))),of(this,Uw,!1),of(this,Bj,r=>{Af(this,Uw)||(setTimeout(()=>{TKe(r),kv(this,Uw,!1)},0),kv(this,Uw,!0))}),!this.shadowRoot){this.attachShadow(this.constructor.shadowRootOptions);const r=Lf(this.attributes),n=this.constructor.getTemplateHTML(r);this.shadowRoot.setHTMLUnsafe?this.shadowRoot.setHTMLUnsafe(n):this.shadowRoot.innerHTML=n}const e=this.querySelector(":scope > slot[slot=media]");e&&e.addEventListener("slotchange",()=>{if(!e.assignedElements({flatten:!0}).length){Af(this,Ox)&&this.mediaUnsetCallback(Af(this,Ox));return}this.handleMediaUpdated(this.media)})}static get observedAttributes(){return[es.AUTOHIDE,es.GESTURES_DISABLED].concat(SKe).filter(e=>![gt.MEDIA_RENDITION_LIST,gt.MEDIA_AUDIO_TRACK_LIST,gt.MEDIA_CHAPTERS_CUES,gt.MEDIA_WIDTH,gt.MEDIA_HEIGHT,gt.MEDIA_ERROR,gt.MEDIA_ERROR_MESSAGE].includes(e))}attributeChangedCallback(e,r,n){e.toLowerCase()==es.AUTOHIDE&&(this.autohide=n)}get media(){let e=this.querySelector(":scope > [slot=media]");return e?.nodeName=="SLOT"&&(e=e.assignedElements({flatten:!0})[0]),e}async handleMediaUpdated(e){e&&(kv(this,Ox,e),e.localName.includes("-")&&await sr.customElements.whenDefined(e.localName),this.mediaSetCallback(e))}connectedCallback(){var e;Af(this,Ij).observe(this,{childList:!0,subtree:!0}),i1(this,Af(this,Bj));const r=this.getAttribute(es.AUDIO)!=null,n=Ai(r?"audio player":"video player");this.setAttribute("role","region"),this.setAttribute("aria-label",n),this.handleMediaUpdated(this.media),this.setAttribute(es.USER_INACTIVE,""),Iae(this,this.getBoundingClientRect().width),this.addEventListener("pointerdown",this),this.addEventListener("pointermove",this),this.addEventListener("pointerup",this),this.addEventListener("mouseleave",this),this.addEventListener("keyup",this),(e=sr.window)==null||e.addEventListener("mouseup",this)}disconnectedCallback(){var e;Af(this,Ij).disconnect(),s1(this,Af(this,Bj)),this.media&&this.mediaUnsetCallback(this.media),(e=sr.window)==null||e.removeEventListener("mouseup",this)}mediaSetCallback(e){}mediaUnsetCallback(e){kv(this,Ox,null)}handleEvent(e){switch(e.type){case"pointerdown":kv(this,AN,e.timeStamp);break;case"pointermove":Zf(this,r3,kae).call(this,e);break;case"pointerup":Zf(this,n3,Lae).call(this,e);break;case"mouseleave":Zf(this,v_,ik).call(this);break;case"mouseup":this.removeAttribute(es.KEYBOARD_CONTROL);break;case"keyup":Zf(this,a1,y_).call(this),this.setAttribute(es.KEYBOARD_CONTROL,"");break}}set autohide(e){const r=Number(e);kv(this,fb,isNaN(r)?0:r)}get autohide(){return(Af(this,fb)===void 0?2:Af(this,fb)).toString()}get breakpoints(){return Cl(this,es.BREAKPOINTS)}set breakpoints(e){Nl(this,es.BREAKPOINTS,e)}get audio(){return Oa(this,es.AUDIO)}set audio(e){Ra(this,es.AUDIO,e)}get gesturesDisabled(){return Oa(this,es.GESTURES_DISABLED)}set gesturesDisabled(e){Ra(this,es.GESTURES_DISABLED,e)}get keyboardControl(){return Oa(this,es.KEYBOARD_CONTROL)}set keyboardControl(e){Ra(this,es.KEYBOARD_CONTROL,e)}get noAutohide(){return Oa(this,es.NO_AUTOHIDE)}set noAutohide(e){Ra(this,es.NO_AUTOHIDE,e)}get autohideOverControls(){return Oa(this,es.AUTOHIDE_OVER_CONTROLS)}set autohideOverControls(e){Ra(this,es.AUTOHIDE_OVER_CONTROLS,e)}get userInteractive(){return Oa(this,es.USER_INACTIVE)}set userInteractive(e){Ra(this,es.USER_INACTIVE,e)}}AN=new WeakMap;Ox=new WeakMap;g_=new WeakMap;fb=new WeakMap;Ij=new WeakMap;t3=new WeakSet;Nae=function(t){const e=this.media;for(const r of t){if(r.type!=="childList")continue;const n=r.removedNodes;for(const i of n){if(i.slot!="media"||r.target!=this)continue;let a=r.previousSibling&&r.previousSibling.previousElementSibling;if(!a||!e)this.mediaUnsetCallback(i);else{let o=a.slot!=="media";for(;(a=a.previousSibling)!==null;)a.slot=="media"&&(o=!1);o&&this.mediaUnsetCallback(i)}}if(e)for(const i of r.addedNodes)i===e&&this.handleMediaUpdated(e)}};Uw=new WeakMap;Bj=new WeakMap;r3=new WeakSet;kae=function(t){if(t.pointerType!=="mouse"&&t.timeStamp-Af(this,AN)<250)return;Zf(this,sk,f6).call(this),clearTimeout(Af(this,g_));const e=this.hasAttribute(es.AUTOHIDE_OVER_CONTROLS);([this,this.media].includes(t.target)||e)&&Zf(this,a1,y_).call(this)};n3=new WeakSet;Lae=function(t){if(t.pointerType==="touch"){const e=!this.hasAttribute(es.USER_INACTIVE);[this,this.media].includes(t.target)&&e?Zf(this,v_,ik).call(this):Zf(this,a1,y_).call(this)}else t.composedPath().some(e=>["media-play-button","media-fullscreen-button"].includes(e?.localName))&&Zf(this,a1,y_).call(this)};v_=new WeakSet;ik=function(){if(Af(this,fb)<0||this.hasAttribute(es.USER_INACTIVE))return;this.setAttribute(es.USER_INACTIVE,"");const t=new sr.CustomEvent(fg.USER_INACTIVE_CHANGE,{composed:!0,bubbles:!0,detail:!0});this.dispatchEvent(t)};sk=new WeakSet;f6=function(){if(!this.hasAttribute(es.USER_INACTIVE))return;this.removeAttribute(es.USER_INACTIVE);const t=new sr.CustomEvent(fg.USER_INACTIVE_CHANGE,{composed:!0,bubbles:!0,detail:!1});this.dispatchEvent(t)};a1=new WeakSet;y_=function(){Zf(this,sk,f6).call(this),clearTimeout(Af(this,g_));const t=parseInt(this.autohide);t<0||kv(this,g_,setTimeout(()=>{Zf(this,v_,ik).call(this)},t*1e3))};ak.shadowRootOptions={mode:"open"};ak.getTemplateHTML=EKe;sr.customElements.get("media-container")||sr.customElements.define("media-container",ak);var Bae=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},dd=(t,e,r)=>(Bae(t,e,"read from private field"),r?r.call(t):e.get(t)),Aw=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},RS=(t,e,r,n)=>(Bae(t,e,"write to private field"),e.set(t,r),r),Rx,Dx,pN,Xv,Lp,c0;class m6{constructor(e,r,{defaultValue:n}={defaultValue:void 0}){Aw(this,Lp),Aw(this,Rx,void 0),Aw(this,Dx,void 0),Aw(this,pN,void 0),Aw(this,Xv,new Set),RS(this,Rx,e),RS(this,Dx,r),RS(this,pN,new Set(n))}[Symbol.iterator](){return dd(this,Lp,c0).values()}get length(){return dd(this,Lp,c0).size}get value(){var e;return(e=[...dd(this,Lp,c0)].join(" "))!=null?e:""}set value(e){var r;e!==this.value&&(RS(this,Xv,new Set),this.add(...(r=e?.split(" "))!=null?r:[]))}toString(){return this.value}item(e){return[...dd(this,Lp,c0)][e]}values(){return dd(this,Lp,c0).values()}forEach(e,r){dd(this,Lp,c0).forEach(e,r)}add(...e){var r,n;e.forEach(i=>dd(this,Xv).add(i)),!(this.value===""&&!((r=dd(this,Rx))!=null&&r.hasAttribute(`${dd(this,Dx)}`)))&&((n=dd(this,Rx))==null||n.setAttribute(`${dd(this,Dx)}`,`${this.value}`))}remove(...e){var r;e.forEach(n=>dd(this,Xv).delete(n)),(r=dd(this,Rx))==null||r.setAttribute(`${dd(this,Dx)}`,`${this.value}`)}contains(e){return dd(this,Lp,c0).has(e)}toggle(e,r){return typeof r<"u"?r?(this.add(e),!0):(this.remove(e),!1):this.contains(e)?(this.remove(e),!1):(this.add(e),!0)}replace(e,r){return this.remove(e),this.add(r),e===r}}Rx=new WeakMap;Dx=new WeakMap;pN=new WeakMap;Xv=new WeakMap;Lp=new WeakSet;c0=function(){return dd(this,Xv).size?dd(this,Xv):dd(this,pN)};const kKe=(t="")=>t.split(/\s+/),Pae=(t="")=>{const[e,r,n]=t.split(":"),i=n?decodeURIComponent(n):void 0;return{kind:e==="cc"?KA.CAPTIONS:KA.SUBTITLES,language:r,label:i}},ok=(t="",e={})=>kKe(t).map(r=>{const n=Pae(r);return{...e,...n}}),Oae=t=>t?Array.isArray(t)?t.map(e=>typeof e=="string"?Pae(e):e):typeof t=="string"?ok(t):[t]:[],i3=({kind:t,label:e,language:r}={kind:"subtitles"})=>e?`${t==="captions"?"cc":"sb"}:${r}:${encodeURIComponent(e)}`:r,x_=(t=[])=>Array.prototype.map.call(t,i3).join(" "),LKe=(t,e)=>r=>r[t]===e,Rae=t=>{const e=Object.entries(t).map(([r,n])=>LKe(r,n));return r=>e.every(n=>n(r))},_2=(t,e=[],r=[])=>{const n=Oae(r).map(Rae),i=a=>n.some(o=>o(a));Array.from(e).filter(i).forEach(a=>{a.mode=t})},lk=(t,e=()=>!0)=>{if(!t?.textTracks)return[];const r=typeof e=="function"?e:Rae(e);return Array.from(t.textTracks).filter(r)},Dae=t=>{var e;return!!((e=t.mediaSubtitlesShowing)!=null&&e.length)||t.hasAttribute(gt.MEDIA_SUBTITLES_SHOWING)},IKe=t=>{var e;const{media:r,fullscreenElement:n}=t;try{const i=n&&"requestFullscreen"in n?"requestFullscreen":n&&"webkitRequestFullScreen"in n?"webkitRequestFullScreen":void 0;if(i){const a=(e=n[i])==null?void 0:e.call(n);if(a instanceof Promise)return a.catch(()=>{})}else r?.webkitEnterFullscreen?r.webkitEnterFullscreen():r?.requestFullscreen&&r.requestFullscreen()}catch(i){console.error(i)}},sW="exitFullscreen"in yu?"exitFullscreen":"webkitExitFullscreen"in yu?"webkitExitFullscreen":"webkitCancelFullScreen"in yu?"webkitCancelFullScreen":void 0,BKe=t=>{var e;const{documentElement:r}=t;if(sW){const n=(e=r?.[sW])==null?void 0:e.call(r);if(n instanceof Promise)return n.catch(()=>{})}},$w="fullscreenElement"in yu?"fullscreenElement":"webkitFullscreenElement"in yu?"webkitFullscreenElement":void 0,PKe=t=>{const{documentElement:e,media:r}=t,n=e?.[$w];return!n&&"webkitDisplayingFullscreen"in r&&"webkitPresentationMode"in r&&r.webkitDisplayingFullscreen&&r.webkitPresentationMode===nKe.FULLSCREEN?r:n},OKe=t=>{var e;const{media:r,documentElement:n,fullscreenElement:i=r}=t;if(!r||!n)return!1;const a=PKe(t);if(!a)return!1;if(a===i||a===r)return!0;if(a.localName.includes("-")){let o=a.shadowRoot;if(!($w in o))return Eg(a,i);for(;o?.[$w];){if(o[$w]===i)return!0;o=(e=o[$w])==null?void 0:e.shadowRoot}}return!1},RKe="fullscreenEnabled"in yu?"fullscreenEnabled":"webkitFullscreenEnabled"in yu?"webkitFullscreenEnabled":void 0,DKe=t=>{const{documentElement:e,media:r}=t;return!!e?.[RKe]||r&&"webkitSupportsFullscreen"in r};let DS;const A6=()=>{var t,e;return DS||(DS=(e=(t=yu)==null?void 0:t.createElement)==null?void 0:e.call(t,"video"),DS)},MKe=async(t=A6())=>{if(!t)return!1;const e=t.volume;t.volume=e/2+.1;const r=new AbortController,n=await Promise.race([FKe(t,r.signal),UKe(t,e)]);return r.abort(),n},FKe=(t,e)=>new Promise(r=>{t.addEventListener("volumechange",()=>r(!0),{signal:e})}),UKe=async(t,e)=>{for(let r=0;r<10;r++){if(t.volume===e)return!1;await vae(10)}return t.volume!==e},$Ke=/.*Version\/.*Safari\/.*/.test(sr.navigator.userAgent),Mae=(t=A6())=>sr.matchMedia("(display-mode: standalone)").matches&&$Ke?!1:typeof t?.requestPictureInPicture=="function",Fae=(t=A6())=>DKe({documentElement:yu,media:t}),HKe=Fae(),QKe=Mae(),zKe=!!sr.WebKitPlaybackTargetAvailabilityEvent,VKe=!!sr.chrome,gN=t=>lk(t.media,e=>[KA.SUBTITLES,KA.CAPTIONS].includes(e.kind)).sort((e,r)=>e.kind>=r.kind?1:-1),Uae=t=>lk(t.media,e=>e.mode===Nb.SHOWING&&[KA.SUBTITLES,KA.CAPTIONS].includes(e.kind)),$ae=(t,e)=>{const r=gN(t),n=Uae(t),i=!!n.length;if(r.length){if(e===!1||i&&e!==!0)_2(Nb.DISABLED,r,n);else if(e===!0||!i&&e!==!1){let a=r[0];const{options:o}=t;if(!o?.noSubtitlesLangPref){const d=globalThis.localStorage.getItem("media-chrome-pref-subtitles-lang"),f=d?[d,...globalThis.navigator.languages]:globalThis.navigator.languages,m=r.filter(p=>f.some(g=>p.language.toLowerCase().startsWith(g.split("-")[0]))).sort((p,g)=>{const y=f.findIndex(w=>p.language.toLowerCase().startsWith(w.split("-")[0])),x=f.findIndex(w=>g.language.toLowerCase().startsWith(w.split("-")[0]));return y-x});m[0]&&(a=m[0])}const{language:c,label:u,kind:l}=a;_2(Nb.DISABLED,r,n),_2(Nb.SHOWING,r,[{language:c,label:u,kind:l}])}}},p6=(t,e)=>t===e?!0:t==null||e==null||typeof t!=typeof e?!1:typeof t=="number"&&Number.isNaN(t)&&Number.isNaN(e)?!0:typeof t!="object"?!1:Array.isArray(t)?KKe(t,e):Object.entries(t).every(([r,n])=>r in e&&p6(n,e[r])),KKe=(t,e)=>{const r=Array.isArray(t),n=Array.isArray(e);return r!==n?!1:r||n?t.length!==e.length?!1:t.every((i,a)=>p6(i,e[a])):!0},GKe=Object.values(Rp);let vN;const WKe=MKe().then(t=>(vN=t,vN)),YKe=async(...t)=>{await Promise.all(t.filter(e=>e).map(async e=>{if(!("localName"in e&&e instanceof sr.HTMLElement))return;const r=e.localName;if(!r.includes("-"))return;const n=sr.customElements.get(r);n&&e instanceof n||(await sr.customElements.whenDefined(r),sr.customElements.upgrade(e))}))},qKe=new sr.DOMParser,XKe=t=>t&&(qKe.parseFromString(t,"text/html").body.textContent||t),Hw={mediaError:{get(t,e){const{media:r}=t;if(e?.type!=="playing")return r?.error},mediaEvents:["emptied","error","playing"]},mediaErrorCode:{get(t,e){var r;const{media:n}=t;if(e?.type!=="playing")return(r=n?.error)==null?void 0:r.code},mediaEvents:["emptied","error","playing"]},mediaErrorMessage:{get(t,e){var r,n;const{media:i}=t;if(e?.type!=="playing")return(n=(r=i?.error)==null?void 0:r.message)!=null?n:""},mediaEvents:["emptied","error","playing"]},mediaWidth:{get(t){var e;const{media:r}=t;return(e=r?.videoWidth)!=null?e:0},mediaEvents:["resize"]},mediaHeight:{get(t){var e;const{media:r}=t;return(e=r?.videoHeight)!=null?e:0},mediaEvents:["resize"]},mediaPaused:{get(t){var e;const{media:r}=t;return(e=r?.paused)!=null?e:!0},set(t,e){var r;const{media:n}=e;n&&(t?n.pause():(r=n.play())==null||r.catch(()=>{}))},mediaEvents:["play","playing","pause","emptied"]},mediaHasPlayed:{get(t,e){const{media:r}=t;return r?e?e.type==="playing":!r.paused:!1},mediaEvents:["playing","emptied"]},mediaEnded:{get(t){var e;const{media:r}=t;return(e=r?.ended)!=null?e:!1},mediaEvents:["seeked","ended","emptied"]},mediaPlaybackRate:{get(t){var e;const{media:r}=t;return(e=r?.playbackRate)!=null?e:1},set(t,e){const{media:r}=e;r&&Number.isFinite(+t)&&(r.playbackRate=+t)},mediaEvents:["ratechange","loadstart"]},mediaMuted:{get(t){var e;const{media:r}=t;return(e=r?.muted)!=null?e:!1},set(t,e){const{media:r,options:{noMutedPref:n}={}}=e;if(r){r.muted=t;try{const i=sr.localStorage.getItem("media-chrome-pref-muted")!==null,a=r.hasAttribute("muted");if(n){i&&sr.localStorage.removeItem("media-chrome-pref-muted");return}if(a&&!i)return;sr.localStorage.setItem("media-chrome-pref-muted",t?"true":"false")}catch(i){console.debug("Error setting muted pref",i)}}},mediaEvents:["volumechange"],stateOwnersUpdateHandlers:[(t,e)=>{const{options:{noMutedPref:r}}=e,{media:n}=e;if(!(!n||n.muted||r))try{const i=sr.localStorage.getItem("media-chrome-pref-muted")==="true";Hw.mediaMuted.set(i,e),t(i)}catch(i){console.debug("Error getting muted pref",i)}}]},mediaLoop:{get(t){const{media:e}=t;return e?.loop},set(t,e){const{media:r}=e;r&&(r.loop=t)},mediaEvents:["medialooprequest"]},mediaVolume:{get(t){var e;const{media:r}=t;return(e=r?.volume)!=null?e:1},set(t,e){const{media:r,options:{noVolumePref:n}={}}=e;if(r){try{t==null?sr.localStorage.removeItem("media-chrome-pref-volume"):!r.hasAttribute("muted")&&!n&&sr.localStorage.setItem("media-chrome-pref-volume",t.toString())}catch(i){console.debug("Error setting volume pref",i)}Number.isFinite(+t)&&(r.volume=+t)}},mediaEvents:["volumechange"],stateOwnersUpdateHandlers:[(t,e)=>{const{options:{noVolumePref:r}}=e;if(!r)try{const{media:n}=e;if(!n)return;const i=sr.localStorage.getItem("media-chrome-pref-volume");if(i==null)return;Hw.mediaVolume.set(+i,e),t(+i)}catch(n){console.debug("Error getting volume pref",n)}}]},mediaVolumeLevel:{get(t){const{media:e}=t;return typeof e?.volume>"u"?"high":e.muted||e.volume===0?"off":e.volume<.5?"low":e.volume<.75?"medium":"high"},mediaEvents:["volumechange"]},mediaCurrentTime:{get(t){var e;const{media:r}=t;return(e=r?.currentTime)!=null?e:0},set(t,e){const{media:r}=e;!r||!l6(t)||(r.currentTime=t)},mediaEvents:["timeupdate","loadedmetadata"]},mediaDuration:{get(t){const{media:e,options:{defaultDuration:r}={}}=t;return r&&(!e||!e.duration||Number.isNaN(e.duration)||!Number.isFinite(e.duration))?r:Number.isFinite(e?.duration)?e.duration:Number.NaN},mediaEvents:["durationchange","loadedmetadata","emptied"]},mediaLoading:{get(t){const{media:e}=t;return e?.readyState<3},mediaEvents:["waiting","playing","emptied"]},mediaSeekable:{get(t){var e;const{media:r}=t;if(!((e=r?.seekable)!=null&&e.length))return;const n=r.seekable.start(0),i=r.seekable.end(r.seekable.length-1);if(!(!n&&!i))return[Number(n.toFixed(3)),Number(i.toFixed(3))]},mediaEvents:["loadedmetadata","emptied","progress","seekablechange"]},mediaBuffered:{get(t){var e;const{media:r}=t,n=(e=r?.buffered)!=null?e:[];return Array.from(n).map((i,a)=>[Number(n.start(a).toFixed(3)),Number(n.end(a).toFixed(3))])},mediaEvents:["progress","emptied"]},mediaStreamType:{get(t){const{media:e,options:{defaultStreamType:r}={}}=t,n=[Rp.LIVE,Rp.ON_DEMAND].includes(r)?r:void 0;if(!e)return n;const{streamType:i}=e;if(GKe.includes(i))return i===Rp.UNKNOWN?n:i;const a=e.duration;return a===1/0?Rp.LIVE:Number.isFinite(a)?Rp.ON_DEMAND:n},mediaEvents:["emptied","durationchange","loadedmetadata","streamtypechange"]},mediaTargetLiveWindow:{get(t){const{media:e}=t;if(!e)return Number.NaN;const{targetLiveWindow:r}=e,n=Hw.mediaStreamType.get(t);return(r==null||Number.isNaN(r))&&n===Rp.LIVE?0:r},mediaEvents:["emptied","durationchange","loadedmetadata","streamtypechange","targetlivewindowchange"]},mediaTimeIsLive:{get(t){const{media:e,options:{liveEdgeOffset:r=10}={}}=t;if(!e)return!1;if(typeof e.liveEdgeStart=="number")return Number.isNaN(e.liveEdgeStart)?!1:e.currentTime>=e.liveEdgeStart;if(!(Hw.mediaStreamType.get(t)===Rp.LIVE))return!1;const i=e.seekable;if(!i)return!0;if(!i.length)return!1;const a=i.end(i.length-1)-r;return e.currentTime>=a},mediaEvents:["playing","timeupdate","progress","waiting","emptied"]},mediaSubtitlesList:{get(t){return gN(t).map(({kind:e,label:r,language:n})=>({kind:e,label:r,language:n}))},mediaEvents:["loadstart"],textTracksEvents:["addtrack","removetrack"]},mediaSubtitlesShowing:{get(t){return Uae(t).map(({kind:e,label:r,language:n})=>({kind:e,label:r,language:n}))},mediaEvents:["loadstart"],textTracksEvents:["addtrack","removetrack","change"],stateOwnersUpdateHandlers:[(t,e)=>{var r,n;const{media:i,options:a}=e;if(!i)return;const o=c=>{var u;!a.defaultSubtitles||c&&![KA.CAPTIONS,KA.SUBTITLES].includes((u=c?.track)==null?void 0:u.kind)||$ae(e,!0)};return i.addEventListener("loadstart",o),(r=i.textTracks)==null||r.addEventListener("addtrack",o),(n=i.textTracks)==null||n.addEventListener("removetrack",o),()=>{var c,u;i.removeEventListener("loadstart",o),(c=i.textTracks)==null||c.removeEventListener("addtrack",o),(u=i.textTracks)==null||u.removeEventListener("removetrack",o)}}]},mediaChaptersCues:{get(t){var e;const{media:r}=t;if(!r)return[];const[n]=lk(r,{kind:KA.CHAPTERS});return Array.from((e=n?.cues)!=null?e:[]).map(({text:i,startTime:a,endTime:o})=>({text:XKe(i),startTime:a,endTime:o}))},mediaEvents:["loadstart","loadedmetadata"],textTracksEvents:["addtrack","removetrack","change"],stateOwnersUpdateHandlers:[(t,e)=>{var r;const{media:n}=e;if(!n)return;const i=n.querySelector('track[kind="chapters"][default][src]'),a=(r=n.shadowRoot)==null?void 0:r.querySelector(':is(video,audio) > track[kind="chapters"][default][src]');return i?.addEventListener("load",t),a?.addEventListener("load",t),()=>{i?.removeEventListener("load",t),a?.removeEventListener("load",t)}}]},mediaIsPip:{get(t){var e,r;const{media:n,documentElement:i}=t;if(!n||!i||!i.pictureInPictureElement)return!1;if(i.pictureInPictureElement===n)return!0;if(i.pictureInPictureElement instanceof HTMLMediaElement)return(e=n.localName)!=null&&e.includes("-")?Eg(n,i.pictureInPictureElement):!1;if(i.pictureInPictureElement.localName.includes("-")){let a=i.pictureInPictureElement.shadowRoot;for(;a?.pictureInPictureElement;){if(a.pictureInPictureElement===n)return!0;a=(r=a.pictureInPictureElement)==null?void 0:r.shadowRoot}}return!1},set(t,e){const{media:r}=e;if(r)if(t){if(!yu.pictureInPictureEnabled){console.warn("MediaChrome: Picture-in-picture is not enabled");return}if(!r.requestPictureInPicture){console.warn("MediaChrome: The current media does not support picture-in-picture");return}const n=()=>{console.warn("MediaChrome: The media is not ready for picture-in-picture. It must have a readyState > 0.")};r.requestPictureInPicture().catch(i=>{if(i.code===11){if(!r.src){console.warn("MediaChrome: The media is not ready for picture-in-picture. It must have a src set.");return}if(r.readyState===0&&r.preload==="none"){const a=()=>{r.removeEventListener("loadedmetadata",o),r.preload="none"},o=()=>{r.requestPictureInPicture().catch(n),a()};r.addEventListener("loadedmetadata",o),r.preload="metadata",setTimeout(()=>{r.readyState===0&&n(),a()},1e3)}else throw i}else throw i})}else yu.pictureInPictureElement&&yu.exitPictureInPicture()},mediaEvents:["enterpictureinpicture","leavepictureinpicture"]},mediaRenditionList:{get(t){var e;const{media:r}=t;return[...(e=r?.videoRenditions)!=null?e:[]].map(n=>({...n}))},mediaEvents:["emptied","loadstart"],videoRenditionsEvents:["addrendition","removerendition"]},mediaRenditionSelected:{get(t){var e,r,n;const{media:i}=t;return(n=(r=i?.videoRenditions)==null?void 0:r[(e=i.videoRenditions)==null?void 0:e.selectedIndex])==null?void 0:n.id},set(t,e){const{media:r}=e;if(!r?.videoRenditions){console.warn("MediaController: Rendition selection not supported by this media.");return}const n=t,i=Array.prototype.findIndex.call(r.videoRenditions,a=>a.id==n);r.videoRenditions.selectedIndex!=i&&(r.videoRenditions.selectedIndex=i)},mediaEvents:["emptied"],videoRenditionsEvents:["addrendition","removerendition","change"]},mediaAudioTrackList:{get(t){var e;const{media:r}=t;return[...(e=r?.audioTracks)!=null?e:[]]},mediaEvents:["emptied","loadstart"],audioTracksEvents:["addtrack","removetrack"]},mediaAudioTrackEnabled:{get(t){var e,r;const{media:n}=t;return(r=[...(e=n?.audioTracks)!=null?e:[]].find(i=>i.enabled))==null?void 0:r.id},set(t,e){const{media:r}=e;if(!r?.audioTracks){console.warn("MediaChrome: Audio track selection not supported by this media.");return}const n=t;for(const i of r.audioTracks)i.enabled=n==i.id},mediaEvents:["emptied"],audioTracksEvents:["addtrack","removetrack","change"]},mediaIsFullscreen:{get(t){return OKe(t)},set(t,e,r){var n;t?(IKe(e),r.detail&&((n=e.media)==null||n.focus())):BKe(e)},rootEvents:["fullscreenchange","webkitfullscreenchange"],mediaEvents:["webkitbeginfullscreen","webkitendfullscreen","webkitpresentationmodechanged"]},mediaIsCasting:{get(t){var e;const{media:r}=t;return!r?.remote||((e=r.remote)==null?void 0:e.state)==="disconnected"?!1:!!r.remote.state},set(t,e){var r,n;const{media:i}=e;if(i&&!(t&&((r=i.remote)==null?void 0:r.state)!=="disconnected")&&!(!t&&((n=i.remote)==null?void 0:n.state)!=="connected")){if(typeof i.remote.prompt!="function"){console.warn("MediaChrome: Casting is not supported in this environment");return}i.remote.prompt().catch(()=>{})}},remoteEvents:["connect","connecting","disconnect"]},mediaIsAirplaying:{get(){return!1},set(t,e){const{media:r}=e;if(r){if(!(r.webkitShowPlaybackTargetPicker&&sr.WebKitPlaybackTargetAvailabilityEvent)){console.error("MediaChrome: received a request to select AirPlay but AirPlay is not supported in this environment");return}r.webkitShowPlaybackTargetPicker()}},mediaEvents:["webkitcurrentplaybacktargetiswirelesschanged"]},mediaFullscreenUnavailable:{get(t){const{media:e}=t;if(!HKe||!Fae(e))return af.UNSUPPORTED}},mediaPipUnavailable:{get(t){const{media:e}=t;if(!QKe||!Mae(e))return af.UNSUPPORTED;if(e?.disablePictureInPicture)return af.UNAVAILABLE}},mediaVolumeUnavailable:{get(t){const{media:e}=t;if(vN===!1||e?.volume==null)return af.UNSUPPORTED},stateOwnersUpdateHandlers:[t=>{vN==null&&WKe.then(e=>t(e?void 0:af.UNSUPPORTED))}]},mediaCastUnavailable:{get(t,{availability:e="not-available"}={}){var r;const{media:n}=t;if(!VKe||!((r=n?.remote)!=null&&r.state))return af.UNSUPPORTED;if(!(e==null||e==="available"))return af.UNAVAILABLE},stateOwnersUpdateHandlers:[(t,e)=>{var r;const{media:n}=e;return n?(n.disableRemotePlayback||n.hasAttribute("disableremoteplayback")||(r=n?.remote)==null||r.watchAvailability(a=>{t({availability:a?"available":"not-available"})}).catch(a=>{a.name==="NotSupportedError"?t({availability:null}):t({availability:"not-available"})}),()=>{var a;(a=n?.remote)==null||a.cancelWatchAvailability().catch(()=>{})}):void 0}]},mediaAirplayUnavailable:{get(t,e){if(!zKe)return af.UNSUPPORTED;if(e?.availability==="not-available")return af.UNAVAILABLE},mediaEvents:["webkitplaybacktargetavailabilitychanged"],stateOwnersUpdateHandlers:[(t,e)=>{var r;const{media:n}=e;return n?(n.disableRemotePlayback||n.hasAttribute("disableremoteplayback")||(r=n?.remote)==null||r.watchAvailability(a=>{t({availability:a?"available":"not-available"})}).catch(a=>{a.name==="NotSupportedError"?t({availability:null}):t({availability:"not-available"})}),()=>{var a;(a=n?.remote)==null||a.cancelWatchAvailability().catch(()=>{})}):void 0}]},mediaRenditionUnavailable:{get(t){var e;const{media:r}=t;if(!r?.videoRenditions)return af.UNSUPPORTED;if(!((e=r.videoRenditions)!=null&&e.length))return af.UNAVAILABLE},mediaEvents:["emptied","loadstart"],videoRenditionsEvents:["addrendition","removerendition"]},mediaAudioTrackUnavailable:{get(t){var e,r;const{media:n}=t;if(!n?.audioTracks)return af.UNSUPPORTED;if(((r=(e=n.audioTracks)==null?void 0:e.length)!=null?r:0)<=1)return af.UNAVAILABLE},mediaEvents:["emptied","loadstart"],audioTracksEvents:["addtrack","removetrack"]},mediaLang:{get(t){const{options:{mediaLang:e}={}}=t;return e??"en"}}},ZKe={[Gn.MEDIA_PREVIEW_REQUEST](t,e,{detail:r}){var n,i,a;const{media:o}=e,c=r??void 0;let u,l;if(o&&c!=null){const[p]=lk(o,{kind:KA.METADATA,label:"thumbnails"}),g=Array.prototype.find.call((n=p?.cues)!=null?n:[],(y,x,w)=>x===0?y.endTime>c:x===w.length-1?y.startTime<=c:y.startTime<=c&&y.endTime>c);if(g){const y=/'^(?:[a-z]+:)?\/\//i.test(g.text)||(i=o?.querySelector('track[label="thumbnails"]'))==null?void 0:i.src,x=new URL(g.text,y);l=new URLSearchParams(x.hash).get("#xywh").split(",").map(_=>+_),u=x.href}}const d=t.mediaDuration.get(e);let m=(a=t.mediaChaptersCues.get(e).find((p,g,y)=>g===y.length-1&&d===p.endTime?p.startTime<=c&&p.endTime>=c:p.startTime<=c&&p.endTime>c))==null?void 0:a.text;return r!=null&&m==null&&(m=""),{mediaPreviewTime:c,mediaPreviewImage:u,mediaPreviewCoords:l,mediaPreviewChapter:m}},[Gn.MEDIA_PAUSE_REQUEST](t,e){t["mediaPaused"].set(!0,e)},[Gn.MEDIA_PLAY_REQUEST](t,e){var r,n,i,a;const o="mediaPaused",u=t.mediaStreamType.get(e)===Rp.LIVE,l=!((r=e.options)!=null&&r.noAutoSeekToLive),d=t.mediaTargetLiveWindow.get(e)>0;if(u&&l&&!d){const f=(n=t.mediaSeekable.get(e))==null?void 0:n[1];if(f){const m=(a=(i=e.options)==null?void 0:i.seekToLiveOffset)!=null?a:0,p=f-m;t.mediaCurrentTime.set(p,e)}}t[o].set(!1,e)},[Gn.MEDIA_PLAYBACK_RATE_REQUEST](t,e,{detail:r}){const n="mediaPlaybackRate",i=r;t[n].set(i,e)},[Gn.MEDIA_MUTE_REQUEST](t,e){t["mediaMuted"].set(!0,e)},[Gn.MEDIA_UNMUTE_REQUEST](t,e){const r="mediaMuted";t.mediaVolume.get(e)||t.mediaVolume.set(.25,e),t[r].set(!1,e)},[Gn.MEDIA_LOOP_REQUEST](t,e,{detail:r}){const n="mediaLoop",i=!!r;return t[n].set(i,e),{mediaLoop:i}},[Gn.MEDIA_VOLUME_REQUEST](t,e,{detail:r}){const n="mediaVolume",i=r;i&&t.mediaMuted.get(e)&&t.mediaMuted.set(!1,e),t[n].set(i,e)},[Gn.MEDIA_SEEK_REQUEST](t,e,{detail:r}){const n="mediaCurrentTime",i=r;t[n].set(i,e)},[Gn.MEDIA_SEEK_TO_LIVE_REQUEST](t,e){var r,n,i;const a="mediaCurrentTime",o=(r=t.mediaSeekable.get(e))==null?void 0:r[1];if(Number.isNaN(Number(o)))return;const c=(i=(n=e.options)==null?void 0:n.seekToLiveOffset)!=null?i:0,u=o-c;t[a].set(u,e)},[Gn.MEDIA_SHOW_SUBTITLES_REQUEST](t,e,{detail:r}){var n;const{options:i}=e,a=gN(e),o=Oae(r),c=(n=o[0])==null?void 0:n.language;c&&!i.noSubtitlesLangPref&&sr.localStorage.setItem("media-chrome-pref-subtitles-lang",c),_2(Nb.SHOWING,a,o)},[Gn.MEDIA_DISABLE_SUBTITLES_REQUEST](t,e,{detail:r}){const n=gN(e),i=r??[];_2(Nb.DISABLED,n,i)},[Gn.MEDIA_TOGGLE_SUBTITLES_REQUEST](t,e,{detail:r}){$ae(e,r)},[Gn.MEDIA_RENDITION_REQUEST](t,e,{detail:r}){const n="mediaRenditionSelected",i=r;t[n].set(i,e)},[Gn.MEDIA_AUDIO_TRACK_REQUEST](t,e,{detail:r}){const n="mediaAudioTrackEnabled",i=r;t[n].set(i,e)},[Gn.MEDIA_ENTER_PIP_REQUEST](t,e){const r="mediaIsPip";t.mediaIsFullscreen.get(e)&&t.mediaIsFullscreen.set(!1,e),t[r].set(!0,e)},[Gn.MEDIA_EXIT_PIP_REQUEST](t,e){t["mediaIsPip"].set(!1,e)},[Gn.MEDIA_ENTER_FULLSCREEN_REQUEST](t,e,r){const n="mediaIsFullscreen";t.mediaIsPip.get(e)&&t.mediaIsPip.set(!1,e),t[n].set(!0,e,r)},[Gn.MEDIA_EXIT_FULLSCREEN_REQUEST](t,e){t["mediaIsFullscreen"].set(!1,e)},[Gn.MEDIA_ENTER_CAST_REQUEST](t,e){const r="mediaIsCasting";t.mediaIsFullscreen.get(e)&&t.mediaIsFullscreen.set(!1,e),t[r].set(!0,e)},[Gn.MEDIA_EXIT_CAST_REQUEST](t,e){t["mediaIsCasting"].set(!1,e)},[Gn.MEDIA_AIRPLAY_REQUEST](t,e){t["mediaIsAirplaying"].set(!0,e)}},JKe=({media:t,fullscreenElement:e,documentElement:r,stateMediator:n=Hw,requestMap:i=ZKe,options:a={},monitorStateOwnersOnlyWithSubscriptions:o=!0})=>{const c=[],u={options:{...a}};let l=Object.freeze({mediaPreviewTime:void 0,mediaPreviewImage:void 0,mediaPreviewCoords:void 0,mediaPreviewChapter:void 0});const d=y=>{y!=null&&(p6(y,l)||(l=Object.freeze({...l,...y}),c.forEach(x=>x(l))))},f=()=>{const y=Object.entries(n).reduce((x,[w,{get:_}])=>(x[w]=_(u),x),{});d(y)},m={};let p;const g=async(y,x)=>{var w,_,E,N,C,I,D,U,G,q,J,de,xe,we,ve,ne;const ae=!!p;if(p={...u,...p??{},...y},ae)return;await YKe(...Object.values(y));const oe=c.length>0&&x===0&&o,Ie=u.media!==p.media,Ce=((w=u.media)==null?void 0:w.textTracks)!==((_=p.media)==null?void 0:_.textTracks),be=((E=u.media)==null?void 0:E.videoRenditions)!==((N=p.media)==null?void 0:N.videoRenditions),ue=((C=u.media)==null?void 0:C.audioTracks)!==((I=p.media)==null?void 0:I.audioTracks),Pe=((D=u.media)==null?void 0:D.remote)!==((U=p.media)==null?void 0:U.remote),Re=u.documentElement!==p.documentElement,He=!!u.media&&(Ie||oe),Fe=!!((G=u.media)!=null&&G.textTracks)&&(Ce||oe),ft=!!((q=u.media)!=null&&q.videoRenditions)&&(be||oe),at=!!((J=u.media)!=null&&J.audioTracks)&&(ue||oe),De=!!((de=u.media)!=null&&de.remote)&&(Pe||oe),ut=!!u.documentElement&&(Re||oe),et=He||Fe||ft||at||De||ut,Ue=c.length===0&&x===1&&o,jt=!!p.media&&(Ie||Ue),rt=!!((xe=p.media)!=null&&xe.textTracks)&&(Ce||Ue),Ct=!!((we=p.media)!=null&&we.videoRenditions)&&(be||Ue),ke=!!((ve=p.media)!=null&&ve.audioTracks)&&(ue||Ue),Xe=!!((ne=p.media)!=null&&ne.remote)&&(Pe||Ue),mt=!!p.documentElement&&(Re||Ue),Jt=jt||rt||Ct||ke||Xe||mt;if(!(et||Jt)){Object.entries(p).forEach(([lr,Pr])=>{u[lr]=Pr}),f(),p=void 0;return}Object.entries(n).forEach(([lr,{get:Pr,mediaEvents:tn=[],textTracksEvents:Gr=[],videoRenditionsEvents:Xr=[],audioTracksEvents:Qr=[],remoteEvents:Pn=[],rootEvents:wn=[],stateOwnersUpdateHandlers:yi=[]}])=>{m[lr]||(m[lr]={});const ot=ar=>{const Qt=Pr(u,ar);d({[lr]:Qt})};let Gt;Gt=m[lr].mediaEvents,tn.forEach(ar=>{Gt&&He&&(u.media.removeEventListener(ar,Gt),m[lr].mediaEvents=void 0),jt&&(p.media.addEventListener(ar,ot),m[lr].mediaEvents=ot)}),Gt=m[lr].textTracksEvents,Gr.forEach(ar=>{var Qt,gr;Gt&&Fe&&((Qt=u.media.textTracks)==null||Qt.removeEventListener(ar,Gt),m[lr].textTracksEvents=void 0),rt&&((gr=p.media.textTracks)==null||gr.addEventListener(ar,ot),m[lr].textTracksEvents=ot)}),Gt=m[lr].videoRenditionsEvents,Xr.forEach(ar=>{var Qt,gr;Gt&&ft&&((Qt=u.media.videoRenditions)==null||Qt.removeEventListener(ar,Gt),m[lr].videoRenditionsEvents=void 0),Ct&&((gr=p.media.videoRenditions)==null||gr.addEventListener(ar,ot),m[lr].videoRenditionsEvents=ot)}),Gt=m[lr].audioTracksEvents,Qr.forEach(ar=>{var Qt,gr;Gt&&at&&((Qt=u.media.audioTracks)==null||Qt.removeEventListener(ar,Gt),m[lr].audioTracksEvents=void 0),ke&&((gr=p.media.audioTracks)==null||gr.addEventListener(ar,ot),m[lr].audioTracksEvents=ot)}),Gt=m[lr].remoteEvents,Pn.forEach(ar=>{var Qt,gr;Gt&&De&&((Qt=u.media.remote)==null||Qt.removeEventListener(ar,Gt),m[lr].remoteEvents=void 0),Xe&&((gr=p.media.remote)==null||gr.addEventListener(ar,ot),m[lr].remoteEvents=ot)}),Gt=m[lr].rootEvents,wn.forEach(ar=>{Gt&&ut&&(u.documentElement.removeEventListener(ar,Gt),m[lr].rootEvents=void 0),mt&&(p.documentElement.addEventListener(ar,ot),m[lr].rootEvents=ot)});const Ir=m[lr].stateOwnersUpdateHandlers;if(Ir&&et&&(Array.isArray(Ir)?Ir:[Ir]).forEach(Qt=>{typeof Qt=="function"&&Qt()}),Jt){const ar=yi.map(Qt=>Qt(ot,p)).filter(Qt=>typeof Qt=="function");m[lr].stateOwnersUpdateHandlers=ar.length===1?ar[0]:ar}else et&&(m[lr].stateOwnersUpdateHandlers=void 0)}),Object.entries(p).forEach(([lr,Pr])=>{u[lr]=Pr}),f(),p=void 0};return g({media:t,fullscreenElement:e,documentElement:r,options:a}),{dispatch(y){const{type:x,detail:w}=y;if(i[x]&&l.mediaErrorCode==null){d(i[x](n,u,y));return}x==="mediaelementchangerequest"?g({media:w}):x==="fullscreenelementchangerequest"?g({fullscreenElement:w}):x==="documentelementchangerequest"?g({documentElement:w}):x==="optionschangerequest"&&(Object.entries(w??{}).forEach(([_,E])=>{u.options[_]=E}),f())},getState(){return l},subscribe(y){return g({},c.length+1),c.push(y),y(l),()=>{const x=c.indexOf(y);x>=0&&(g({},c.length-1),c.splice(x,1))}}}};var g6=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},ls=(t,e,r)=>(g6(t,e,"read from private field"),r?r.call(t):e.get(t)),Qf=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},xA=(t,e,r,n)=>(g6(t,e,"write to private field"),e.set(t,r),r),BA=(t,e,r)=>(g6(t,e,"access private method"),r),j0,Qw,Wa,Zv,zw,bA,Pj,Vw,Oj,s3,ly,kb,Rj,a3,o3,Hae;const Qae=["ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Enter"," ","f","m","k","c","l","j",">","<","p"],aW=10,oW=.025,lW=.25,eGe=.25,tGe=2,In={DEFAULT_SUBTITLES:"defaultsubtitles",DEFAULT_STREAM_TYPE:"defaultstreamtype",DEFAULT_DURATION:"defaultduration",FULLSCREEN_ELEMENT:"fullscreenelement",HOTKEYS:"hotkeys",KEYBOARD_BACKWARD_SEEK_OFFSET:"keyboardbackwardseekoffset",KEYBOARD_FORWARD_SEEK_OFFSET:"keyboardforwardseekoffset",KEYBOARD_DOWN_VOLUME_STEP:"keyboarddownvolumestep",KEYBOARD_UP_VOLUME_STEP:"keyboardupvolumestep",KEYS_USED:"keysused",LANG:"lang",LOOP:"loop",LIVE_EDGE_OFFSET:"liveedgeoffset",NO_AUTO_SEEK_TO_LIVE:"noautoseektolive",NO_DEFAULT_STORE:"nodefaultstore",NO_HOTKEYS:"nohotkeys",NO_MUTED_PREF:"nomutedpref",NO_SUBTITLES_LANG_PREF:"nosubtitleslangpref",NO_VOLUME_PREF:"novolumepref",SEEK_TO_LIVE_OFFSET:"seektoliveoffset"};class zae extends ak{constructor(){super(),Qf(this,Oj),Qf(this,ly),Qf(this,Rj),Qf(this,o3),this.mediaStateReceivers=[],this.associatedElementSubscriptions=new Map,Qf(this,j0,new m6(this,In.HOTKEYS)),Qf(this,Qw,void 0),Qf(this,Wa,void 0),Qf(this,Zv,null),Qf(this,zw,void 0),Qf(this,bA,void 0),Qf(this,Pj,r=>{var n;(n=ls(this,Wa))==null||n.dispatch(r)}),Qf(this,Vw,void 0),this.associateElement(this);let e={};xA(this,zw,r=>{Object.entries(r).forEach(([n,i])=>{if(n in e&&e[n]===i)return;this.propagateMediaState(n,i);const a=n.toLowerCase(),o=new sr.CustomEvent(rKe[a],{composed:!0,detail:i});this.dispatchEvent(o)}),e=r}),this.hasAttribute(In.NO_HOTKEYS)?this.disableHotkeys():this.enableHotkeys()}static get observedAttributes(){return super.observedAttributes.concat(In.NO_HOTKEYS,In.HOTKEYS,In.DEFAULT_STREAM_TYPE,In.DEFAULT_SUBTITLES,In.DEFAULT_DURATION,In.NO_MUTED_PREF,In.NO_VOLUME_PREF,In.LANG,In.LOOP)}get mediaStore(){return ls(this,Wa)}set mediaStore(e){var r,n;if(ls(this,Wa)&&((r=ls(this,bA))==null||r.call(this),xA(this,bA,void 0)),xA(this,Wa,e),!ls(this,Wa)&&!this.hasAttribute(In.NO_DEFAULT_STORE)){BA(this,Oj,s3).call(this);return}xA(this,bA,(n=ls(this,Wa))==null?void 0:n.subscribe(ls(this,zw)))}get fullscreenElement(){var e;return(e=ls(this,Qw))!=null?e:this}set fullscreenElement(e){var r;this.hasAttribute(In.FULLSCREEN_ELEMENT)&&this.removeAttribute(In.FULLSCREEN_ELEMENT),xA(this,Qw,e),(r=ls(this,Wa))==null||r.dispatch({type:"fullscreenelementchangerequest",detail:this.fullscreenElement})}get defaultSubtitles(){return Oa(this,In.DEFAULT_SUBTITLES)}set defaultSubtitles(e){Ra(this,In.DEFAULT_SUBTITLES,e)}get defaultStreamType(){return Cl(this,In.DEFAULT_STREAM_TYPE)}set defaultStreamType(e){Nl(this,In.DEFAULT_STREAM_TYPE,e)}get defaultDuration(){return Tl(this,In.DEFAULT_DURATION)}set defaultDuration(e){Dc(this,In.DEFAULT_DURATION,e)}get noHotkeys(){return Oa(this,In.NO_HOTKEYS)}set noHotkeys(e){Ra(this,In.NO_HOTKEYS,e)}get keysUsed(){return Cl(this,In.KEYS_USED)}set keysUsed(e){Nl(this,In.KEYS_USED,e)}get liveEdgeOffset(){return Tl(this,In.LIVE_EDGE_OFFSET)}set liveEdgeOffset(e){Dc(this,In.LIVE_EDGE_OFFSET,e)}get noAutoSeekToLive(){return Oa(this,In.NO_AUTO_SEEK_TO_LIVE)}set noAutoSeekToLive(e){Ra(this,In.NO_AUTO_SEEK_TO_LIVE,e)}get noVolumePref(){return Oa(this,In.NO_VOLUME_PREF)}set noVolumePref(e){Ra(this,In.NO_VOLUME_PREF,e)}get noMutedPref(){return Oa(this,In.NO_MUTED_PREF)}set noMutedPref(e){Ra(this,In.NO_MUTED_PREF,e)}get noSubtitlesLangPref(){return Oa(this,In.NO_SUBTITLES_LANG_PREF)}set noSubtitlesLangPref(e){Ra(this,In.NO_SUBTITLES_LANG_PREF,e)}get noDefaultStore(){return Oa(this,In.NO_DEFAULT_STORE)}set noDefaultStore(e){Ra(this,In.NO_DEFAULT_STORE,e)}attributeChangedCallback(e,r,n){var i,a,o,c,u,l,d,f,m,p,g,y;if(super.attributeChangedCallback(e,r,n),e===In.NO_HOTKEYS)n!==r&&n===""?(this.hasAttribute(In.HOTKEYS)&&console.warn("Media Chrome: Both `hotkeys` and `nohotkeys` have been set. All hotkeys will be disabled."),this.disableHotkeys()):n!==r&&n===null&&this.enableHotkeys();else if(e===In.HOTKEYS)ls(this,j0).value=n;else if(e===In.DEFAULT_SUBTITLES&&n!==r)(i=ls(this,Wa))==null||i.dispatch({type:"optionschangerequest",detail:{defaultSubtitles:this.hasAttribute(In.DEFAULT_SUBTITLES)}});else if(e===In.DEFAULT_STREAM_TYPE)(o=ls(this,Wa))==null||o.dispatch({type:"optionschangerequest",detail:{defaultStreamType:(a=this.getAttribute(In.DEFAULT_STREAM_TYPE))!=null?a:void 0}});else if(e===In.LIVE_EDGE_OFFSET)(c=ls(this,Wa))==null||c.dispatch({type:"optionschangerequest",detail:{liveEdgeOffset:this.hasAttribute(In.LIVE_EDGE_OFFSET)?+this.getAttribute(In.LIVE_EDGE_OFFSET):void 0,seekToLiveOffset:this.hasAttribute(In.SEEK_TO_LIVE_OFFSET)?void 0:+this.getAttribute(In.LIVE_EDGE_OFFSET)}});else if(e===In.SEEK_TO_LIVE_OFFSET)(u=ls(this,Wa))==null||u.dispatch({type:"optionschangerequest",detail:{seekToLiveOffset:this.hasAttribute(In.SEEK_TO_LIVE_OFFSET)?+this.getAttribute(In.SEEK_TO_LIVE_OFFSET):void 0}});else if(e===In.NO_AUTO_SEEK_TO_LIVE)(l=ls(this,Wa))==null||l.dispatch({type:"optionschangerequest",detail:{noAutoSeekToLive:this.hasAttribute(In.NO_AUTO_SEEK_TO_LIVE)}});else if(e===In.FULLSCREEN_ELEMENT){const x=n?(d=this.getRootNode())==null?void 0:d.getElementById(n):void 0;xA(this,Qw,x),(f=ls(this,Wa))==null||f.dispatch({type:"fullscreenelementchangerequest",detail:this.fullscreenElement})}else e===In.LANG&&n!==r?(AKe(n),(m=ls(this,Wa))==null||m.dispatch({type:"optionschangerequest",detail:{mediaLang:n}})):e===In.LOOP&&n!==r?(p=ls(this,Wa))==null||p.dispatch({type:Gn.MEDIA_LOOP_REQUEST,detail:n!=null}):e===In.NO_VOLUME_PREF&&n!==r?(g=ls(this,Wa))==null||g.dispatch({type:"optionschangerequest",detail:{noVolumePref:this.hasAttribute(In.NO_VOLUME_PREF)}}):e===In.NO_MUTED_PREF&&n!==r&&((y=ls(this,Wa))==null||y.dispatch({type:"optionschangerequest",detail:{noMutedPref:this.hasAttribute(In.NO_MUTED_PREF)}}))}connectedCallback(){var e,r;!ls(this,Wa)&&!this.hasAttribute(In.NO_DEFAULT_STORE)&&BA(this,Oj,s3).call(this),(e=ls(this,Wa))==null||e.dispatch({type:"documentelementchangerequest",detail:yu}),super.connectedCallback(),ls(this,Wa)&&!ls(this,bA)&&xA(this,bA,(r=ls(this,Wa))==null?void 0:r.subscribe(ls(this,zw))),ls(this,Vw)!==void 0&&ls(this,Wa)&&this.media&&setTimeout(()=>{var n,i,a;(i=(n=this.media)==null?void 0:n.textTracks)!=null&&i.length&&((a=ls(this,Wa))==null||a.dispatch({type:Gn.MEDIA_TOGGLE_SUBTITLES_REQUEST,detail:ls(this,Vw)}))},0),this.hasAttribute(In.NO_HOTKEYS)?this.disableHotkeys():this.enableHotkeys()}disconnectedCallback(){var e,r,n,i,a;if((e=super.disconnectedCallback)==null||e.call(this),ls(this,Wa)){const o=ls(this,Wa).getState();xA(this,Vw,!!((r=o.mediaSubtitlesShowing)!=null&&r.length)),(n=ls(this,Wa))==null||n.dispatch({type:"documentelementchangerequest",detail:void 0}),(i=ls(this,Wa))==null||i.dispatch({type:Gn.MEDIA_TOGGLE_SUBTITLES_REQUEST,detail:!1})}ls(this,bA)&&((a=ls(this,bA))==null||a.call(this),xA(this,bA,void 0))}mediaSetCallback(e){var r;super.mediaSetCallback(e),(r=ls(this,Wa))==null||r.dispatch({type:"mediaelementchangerequest",detail:e}),e.hasAttribute("tabindex")||(e.tabIndex=-1)}mediaUnsetCallback(e){var r;super.mediaUnsetCallback(e),(r=ls(this,Wa))==null||r.dispatch({type:"mediaelementchangerequest",detail:void 0})}propagateMediaState(e,r){dW(this.mediaStateReceivers,e,r)}associateElement(e){if(!e)return;const{associatedElementSubscriptions:r}=this;if(r.has(e))return;const n=this.registerMediaStateReceiver.bind(this),i=this.unregisterMediaStateReceiver.bind(this),a=oGe(e,n,i);Object.values(Gn).forEach(o=>{e.addEventListener(o,ls(this,Pj))}),r.set(e,a)}unassociateElement(e){if(!e)return;const{associatedElementSubscriptions:r}=this;if(!r.has(e))return;r.get(e)(),r.delete(e),Object.values(Gn).forEach(i=>{e.removeEventListener(i,ls(this,Pj))})}registerMediaStateReceiver(e){if(!e)return;const r=this.mediaStateReceivers;r.indexOf(e)>-1||(r.push(e),ls(this,Wa)&&Object.entries(ls(this,Wa).getState()).forEach(([i,a])=>{dW([e],i,a)}))}unregisterMediaStateReceiver(e){const r=this.mediaStateReceivers,n=r.indexOf(e);n<0||r.splice(n,1)}enableHotkeys(){this.addEventListener("keydown",BA(this,Rj,a3))}disableHotkeys(){this.removeEventListener("keydown",BA(this,Rj,a3)),this.removeEventListener("keyup",BA(this,ly,kb))}get hotkeys(){return Cl(this,In.HOTKEYS)}set hotkeys(e){Nl(this,In.HOTKEYS,e)}keyboardShortcutHandler(e){var r,n,i,a,o,c,u,l,d;const f=e.target;if(((i=(n=(r=f.getAttribute(In.KEYS_USED))==null?void 0:r.split(" "))!=null?n:f?.keysUsed)!=null?i:[]).map(w=>w==="Space"?" ":w).filter(Boolean).includes(e.key))return;let p,g,y;if(!(ls(this,j0).contains(`no${e.key.toLowerCase()}`)||e.key===" "&&ls(this,j0).contains("nospace")||e.shiftKey&&(e.key==="/"||e.key==="?")&&ls(this,j0).contains("noshift+/")))switch(e.key){case" ":case"k":p=ls(this,Wa).getState().mediaPaused?Gn.MEDIA_PLAY_REQUEST:Gn.MEDIA_PAUSE_REQUEST,this.dispatchEvent(new sr.CustomEvent(p,{composed:!0,bubbles:!0}));break;case"m":p=this.mediaStore.getState().mediaVolumeLevel==="off"?Gn.MEDIA_UNMUTE_REQUEST:Gn.MEDIA_MUTE_REQUEST,this.dispatchEvent(new sr.CustomEvent(p,{composed:!0,bubbles:!0}));break;case"f":p=this.mediaStore.getState().mediaIsFullscreen?Gn.MEDIA_EXIT_FULLSCREEN_REQUEST:Gn.MEDIA_ENTER_FULLSCREEN_REQUEST,this.dispatchEvent(new sr.CustomEvent(p,{composed:!0,bubbles:!0}));break;case"c":this.dispatchEvent(new sr.CustomEvent(Gn.MEDIA_TOGGLE_SUBTITLES_REQUEST,{composed:!0,bubbles:!0}));break;case"ArrowLeft":case"j":{const w=this.hasAttribute(In.KEYBOARD_BACKWARD_SEEK_OFFSET)?+this.getAttribute(In.KEYBOARD_BACKWARD_SEEK_OFFSET):aW;g=Math.max(((a=this.mediaStore.getState().mediaCurrentTime)!=null?a:0)-w,0),y=new sr.CustomEvent(Gn.MEDIA_SEEK_REQUEST,{composed:!0,bubbles:!0,detail:g}),this.dispatchEvent(y);break}case"ArrowRight":case"l":{const w=this.hasAttribute(In.KEYBOARD_FORWARD_SEEK_OFFSET)?+this.getAttribute(In.KEYBOARD_FORWARD_SEEK_OFFSET):aW;g=Math.max(((o=this.mediaStore.getState().mediaCurrentTime)!=null?o:0)+w,0),y=new sr.CustomEvent(Gn.MEDIA_SEEK_REQUEST,{composed:!0,bubbles:!0,detail:g}),this.dispatchEvent(y);break}case"ArrowUp":{const w=this.hasAttribute(In.KEYBOARD_UP_VOLUME_STEP)?+this.getAttribute(In.KEYBOARD_UP_VOLUME_STEP):oW;g=Math.min(((c=this.mediaStore.getState().mediaVolume)!=null?c:1)+w,1),y=new sr.CustomEvent(Gn.MEDIA_VOLUME_REQUEST,{composed:!0,bubbles:!0,detail:g}),this.dispatchEvent(y);break}case"ArrowDown":{const w=this.hasAttribute(In.KEYBOARD_DOWN_VOLUME_STEP)?+this.getAttribute(In.KEYBOARD_DOWN_VOLUME_STEP):oW;g=Math.max(((u=this.mediaStore.getState().mediaVolume)!=null?u:1)-w,0),y=new sr.CustomEvent(Gn.MEDIA_VOLUME_REQUEST,{composed:!0,bubbles:!0,detail:g}),this.dispatchEvent(y);break}case"<":{const w=(l=this.mediaStore.getState().mediaPlaybackRate)!=null?l:1;g=Math.max(w-lW,eGe).toFixed(2),y=new sr.CustomEvent(Gn.MEDIA_PLAYBACK_RATE_REQUEST,{composed:!0,bubbles:!0,detail:g}),this.dispatchEvent(y);break}case">":{const w=(d=this.mediaStore.getState().mediaPlaybackRate)!=null?d:1;g=Math.min(w+lW,tGe).toFixed(2),y=new sr.CustomEvent(Gn.MEDIA_PLAYBACK_RATE_REQUEST,{composed:!0,bubbles:!0,detail:g}),this.dispatchEvent(y);break}case"/":case"?":{e.shiftKey&&BA(this,o3,Hae).call(this);break}case"p":{p=this.mediaStore.getState().mediaIsPip?Gn.MEDIA_EXIT_PIP_REQUEST:Gn.MEDIA_ENTER_PIP_REQUEST,y=new sr.CustomEvent(p,{composed:!0,bubbles:!0}),this.dispatchEvent(y);break}}}}j0=new WeakMap;Qw=new WeakMap;Wa=new WeakMap;Zv=new WeakMap;zw=new WeakMap;bA=new WeakMap;Pj=new WeakMap;Vw=new WeakMap;Oj=new WeakSet;s3=function(){var t;this.mediaStore=JKe({media:this.media,fullscreenElement:this.fullscreenElement,options:{defaultSubtitles:this.hasAttribute(In.DEFAULT_SUBTITLES),defaultDuration:this.hasAttribute(In.DEFAULT_DURATION)?+this.getAttribute(In.DEFAULT_DURATION):void 0,defaultStreamType:(t=this.getAttribute(In.DEFAULT_STREAM_TYPE))!=null?t:void 0,liveEdgeOffset:this.hasAttribute(In.LIVE_EDGE_OFFSET)?+this.getAttribute(In.LIVE_EDGE_OFFSET):void 0,seekToLiveOffset:this.hasAttribute(In.SEEK_TO_LIVE_OFFSET)?+this.getAttribute(In.SEEK_TO_LIVE_OFFSET):this.hasAttribute(In.LIVE_EDGE_OFFSET)?+this.getAttribute(In.LIVE_EDGE_OFFSET):void 0,noAutoSeekToLive:this.hasAttribute(In.NO_AUTO_SEEK_TO_LIVE),noVolumePref:this.hasAttribute(In.NO_VOLUME_PREF),noMutedPref:this.hasAttribute(In.NO_MUTED_PREF),noSubtitlesLangPref:this.hasAttribute(In.NO_SUBTITLES_LANG_PREF)}})};ly=new WeakSet;kb=function(t){const{key:e,shiftKey:r}=t;if(!(r&&(e==="/"||e==="?")||Qae.includes(e))){this.removeEventListener("keyup",BA(this,ly,kb));return}this.keyboardShortcutHandler(t)};Rj=new WeakSet;a3=function(t){var e;const{metaKey:r,altKey:n,key:i,shiftKey:a}=t,o=a&&(i==="/"||i==="?");if(o&&((e=ls(this,Zv))!=null&&e.open)){this.removeEventListener("keyup",BA(this,ly,kb));return}if(r||n||!o&&!Qae.includes(i)){this.removeEventListener("keyup",BA(this,ly,kb));return}const c=t.target,u=c instanceof HTMLElement&&(c.tagName.toLowerCase()==="media-volume-range"||c.tagName.toLowerCase()==="media-time-range");[" ","ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(i)&&!(ls(this,j0).contains(`no${i.toLowerCase()}`)||i===" "&&ls(this,j0).contains("nospace"))&&!u&&t.preventDefault(),this.addEventListener("keyup",BA(this,ly,kb),{once:!0})};o3=new WeakSet;Hae=function(){ls(this,Zv)||(xA(this,Zv,yu.createElement("media-keyboard-shortcuts-dialog")),this.appendChild(ls(this,Zv))),ls(this,Zv).open=!0};const rGe=Object.values(gt),nGe=Object.values(Aae),Vae=t=>{var e,r,n,i;let{observedAttributes:a}=t.constructor;!a&&((e=t.nodeName)!=null&&e.includes("-"))&&(sr.customElements.upgrade(t),{observedAttributes:a}=t.constructor);const o=(i=(n=(r=t?.getAttribute)==null?void 0:r.call(t,Ao.MEDIA_CHROME_ATTRIBUTES))==null?void 0:n.split)==null?void 0:i.call(n,/\s+/);return Array.isArray(a||o)?(a||o).filter(c=>rGe.includes(c)):[]},iGe=t=>{var e,r;return(e=t.nodeName)!=null&&e.includes("-")&&sr.customElements.get((r=t.nodeName)==null?void 0:r.toLowerCase())&&!(t instanceof sr.customElements.get(t.nodeName.toLowerCase()))&&sr.customElements.upgrade(t),nGe.some(n=>n in t)},l3=t=>iGe(t)||!!Vae(t).length,cW=t=>{var e;return(e=t?.join)==null?void 0:e.call(t,":")},uW={[gt.MEDIA_SUBTITLES_LIST]:x_,[gt.MEDIA_SUBTITLES_SHOWING]:x_,[gt.MEDIA_SEEKABLE]:cW,[gt.MEDIA_BUFFERED]:t=>t?.map(cW).join(" "),[gt.MEDIA_PREVIEW_COORDS]:t=>t?.join(" "),[gt.MEDIA_RENDITION_LIST]:iKe,[gt.MEDIA_AUDIO_TRACK_LIST]:lKe},sGe=async(t,e,r)=>{var n,i;if(t.isConnected||await vae(0),typeof r=="boolean"||r==null)return Ra(t,e,r);if(typeof r=="number")return Dc(t,e,r);if(typeof r=="string")return Nl(t,e,r);if(Array.isArray(r)&&!r.length)return t.removeAttribute(e);const a=(i=(n=uW[e])==null?void 0:n.call(uW,r))!=null?i:r;return t.setAttribute(e,a)},aGe=t=>{var e;return!!((e=t.closest)!=null&&e.call(t,'*[slot="media"]'))},Lv=(t,e)=>{if(aGe(t))return;const r=(i,a)=>{var o,c;l3(i)&&a(i);const{children:u=[]}=i??{},l=(c=(o=i?.shadowRoot)==null?void 0:o.children)!=null?c:[];[...u,...l].forEach(f=>Lv(f,a))},n=t?.nodeName.toLowerCase();if(n.includes("-")&&!l3(t)){sr.customElements.whenDefined(n).then(()=>{r(t,e)});return}r(t,e)},dW=(t,e,r)=>{t.forEach(n=>{if(e in n){n[e]=r;return}const i=Vae(n),a=e.toLowerCase();i.includes(a)&&sGe(n,a,r)})},oGe=(t,e,r)=>{Lv(t,e);const n=d=>{var f;const m=(f=d?.composedPath()[0])!=null?f:d.target;e(m)},i=d=>{var f;const m=(f=d?.composedPath()[0])!=null?f:d.target;r(m)};t.addEventListener(Gn.REGISTER_MEDIA_STATE_RECEIVER,n),t.addEventListener(Gn.UNREGISTER_MEDIA_STATE_RECEIVER,i);const a=d=>{d.forEach(f=>{const{addedNodes:m=[],removedNodes:p=[],type:g,target:y,attributeName:x}=f;g==="childList"?(Array.prototype.forEach.call(m,w=>Lv(w,e)),Array.prototype.forEach.call(p,w=>Lv(w,r))):g==="attributes"&&x===Ao.MEDIA_CHROME_ATTRIBUTES&&(l3(y)?e(y):r(y))})};let o=[];const c=d=>{const f=d.target;f.name!=="media"&&(o.forEach(m=>Lv(m,r)),o=[...f.assignedElements({flatten:!0})],o.forEach(m=>Lv(m,e)))};t.addEventListener("slotchange",c);const u=new MutationObserver(a);return u.observe(t,{childList:!0,attributes:!0,subtree:!0}),()=>{Lv(t,r),t.removeEventListener("slotchange",c),u.disconnect(),t.removeEventListener(Gn.REGISTER_MEDIA_STATE_RECEIVER,n),t.removeEventListener(Gn.UNREGISTER_MEDIA_STATE_RECEIVER,i)}};sr.customElements.get("media-controller")||sr.customElements.define("media-controller",zae);var lGe=zae;const yx={PLACEMENT:"placement",BOUNDS:"bounds"};function cGe(t){return`
    <style>
      :host {
        --_tooltip-background-color: var(--media-tooltip-background-color, var(--media-secondary-color, rgba(20, 20, 30, .7)));
        --_tooltip-background: var(--media-tooltip-background, var(--_tooltip-background-color));
        --_tooltip-arrow-half-width: calc(var(--media-tooltip-arrow-width, 12px) / 2);
        --_tooltip-arrow-height: var(--media-tooltip-arrow-height, 5px);
        --_tooltip-arrow-background: var(--media-tooltip-arrow-color, var(--_tooltip-background-color));
        position: relative;
        pointer-events: none;
        display: var(--media-tooltip-display, inline-flex);
        justify-content: center;
        align-items: center;
        box-sizing: border-box;
        z-index: var(--media-tooltip-z-index, 1);
        background: var(--_tooltip-background);
        color: var(--media-text-color, var(--media-primary-color, rgb(238 238 238)));
        font: var(--media-font,
          var(--media-font-weight, 400)
          var(--media-font-size, 13px) /
          var(--media-text-content-height, var(--media-control-height, 18px))
          var(--media-font-family, helvetica neue, segoe ui, roboto, arial, sans-serif));
        padding: var(--media-tooltip-padding, .35em .7em);
        border: var(--media-tooltip-border, none);
        border-radius: var(--media-tooltip-border-radius, 5px);
        filter: var(--media-tooltip-filter, drop-shadow(0 0 4px rgba(0, 0, 0, .2)));
        white-space: var(--media-tooltip-white-space, nowrap);
      }

      :host([hidden]) {
        display: none;
      }

      img, svg {
        display: inline-block;
      }

      #arrow {
        position: absolute;
        width: 0px;
        height: 0px;
        border-style: solid;
        display: var(--media-tooltip-arrow-display, block);
      }

      :host(:not([placement])),
      :host([placement="top"]) {
        position: absolute;
        bottom: calc(100% + var(--media-tooltip-distance, 12px));
        left: 50%;
        transform: translate(calc(-50% - var(--media-tooltip-offset-x, 0px)), 0);
      }
      :host(:not([placement])) #arrow,
      :host([placement="top"]) #arrow {
        top: 100%;
        left: 50%;
        border-width: var(--_tooltip-arrow-height) var(--_tooltip-arrow-half-width) 0 var(--_tooltip-arrow-half-width);
        border-color: var(--_tooltip-arrow-background) transparent transparent transparent;
        transform: translate(calc(-50% + var(--media-tooltip-offset-x, 0px)), 0);
      }

      :host([placement="right"]) {
        position: absolute;
        left: calc(100% + var(--media-tooltip-distance, 12px));
        top: 50%;
        transform: translate(0, -50%);
      }
      :host([placement="right"]) #arrow {
        top: 50%;
        right: 100%;
        border-width: var(--_tooltip-arrow-half-width) var(--_tooltip-arrow-height) var(--_tooltip-arrow-half-width) 0;
        border-color: transparent var(--_tooltip-arrow-background) transparent transparent;
        transform: translate(0, -50%);
      }

      :host([placement="bottom"]) {
        position: absolute;
        top: calc(100% + var(--media-tooltip-distance, 12px));
        left: 50%;
        transform: translate(calc(-50% - var(--media-tooltip-offset-x, 0px)), 0);
      }
      :host([placement="bottom"]) #arrow {
        bottom: 100%;
        left: 50%;
        border-width: 0 var(--_tooltip-arrow-half-width) var(--_tooltip-arrow-height) var(--_tooltip-arrow-half-width);
        border-color: transparent transparent var(--_tooltip-arrow-background) transparent;
        transform: translate(calc(-50% + var(--media-tooltip-offset-x, 0px)), 0);
      }

      :host([placement="left"]) {
        position: absolute;
        right: calc(100% + var(--media-tooltip-distance, 12px));
        top: 50%;
        transform: translate(0, -50%);
      }
      :host([placement="left"]) #arrow {
        top: 50%;
        left: 100%;
        border-width: var(--_tooltip-arrow-half-width) 0 var(--_tooltip-arrow-half-width) var(--_tooltip-arrow-height);
        border-color: transparent transparent transparent var(--_tooltip-arrow-background);
        transform: translate(0, -50%);
      }
      
      :host([placement="none"]) #arrow {
        display: none;
      }
    </style>
    <slot></slot>
    <div id="arrow"></div>
  `}class ck extends sr.HTMLElement{constructor(){if(super(),this.updateXOffset=()=>{var e;if(!Tae(this,{checkOpacity:!1,checkVisibilityCSS:!1}))return;const r=this.placement;if(r==="left"||r==="right"){this.style.removeProperty("--media-tooltip-offset-x");return}const n=getComputedStyle(this),i=(e=I1(this,"#"+this.bounds))!=null?e:Vh(this);if(!i)return;const{x:a,width:o}=i.getBoundingClientRect(),{x:c,width:u}=this.getBoundingClientRect(),l=c+u,d=a+o,f=n.getPropertyValue("--media-tooltip-offset-x"),m=f?parseFloat(f.replace("px","")):0,p=n.getPropertyValue("--media-tooltip-container-margin"),g=p?parseFloat(p.replace("px","")):0,y=c-a+m-g,x=l-d+m+g;if(y<0){this.style.setProperty("--media-tooltip-offset-x",`${y}px`);return}if(x>0){this.style.setProperty("--media-tooltip-offset-x",`${x}px`);return}this.style.removeProperty("--media-tooltip-offset-x")},!this.shadowRoot){this.attachShadow(this.constructor.shadowRootOptions);const e=Lf(this.attributes);this.shadowRoot.innerHTML=this.constructor.getTemplateHTML(e)}if(this.arrowEl=this.shadowRoot.querySelector("#arrow"),Object.prototype.hasOwnProperty.call(this,"placement")){const e=this.placement;delete this.placement,this.placement=e}}static get observedAttributes(){return[yx.PLACEMENT,yx.BOUNDS]}get placement(){return Cl(this,yx.PLACEMENT)}set placement(e){Nl(this,yx.PLACEMENT,e)}get bounds(){return Cl(this,yx.BOUNDS)}set bounds(e){Nl(this,yx.BOUNDS,e)}}ck.shadowRootOptions={mode:"open"};ck.getTemplateHTML=cGe;sr.customElements.get("media-tooltip")||sr.customElements.define("media-tooltip",ck);var hW=ck,v6=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},fu=(t,e,r)=>(v6(t,e,"read from private field"),r?r.call(t):e.get(t)),xx=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},MS=(t,e,r,n)=>(v6(t,e,"write to private field"),e.set(t,r),r),uGe=(t,e,r)=>(v6(t,e,"access private method"),r),wA,mb,T0,Mx,Dj,c3,Kae;const i0={TOOLTIP_PLACEMENT:"tooltipplacement",DISABLED:"disabled",NO_TOOLTIP:"notooltip"};function dGe(t,e={}){return`
    <style>
      :host {
        position: relative;
        font: var(--media-font,
          var(--media-font-weight, bold)
          var(--media-font-size, 14px) /
          var(--media-text-content-height, var(--media-control-height, 24px))
          var(--media-font-family, helvetica neue, segoe ui, roboto, arial, sans-serif));
        color: var(--media-text-color, var(--media-primary-color, rgb(238 238 238)));
        background: var(--media-control-background, var(--media-secondary-color, rgb(20 20 30 / .7)));
        padding: var(--media-button-padding, var(--media-control-padding, 10px));
        justify-content: var(--media-button-justify-content, center);
        display: inline-flex;
        align-items: center;
        vertical-align: middle;
        box-sizing: border-box;
        transition: background .15s linear;
        pointer-events: auto;
        cursor: var(--media-cursor, pointer);
        -webkit-tap-highlight-color: transparent;
      }

      
      :host(:focus-visible) {
        box-shadow: var(--media-focus-box-shadow, inset 0 0 0 2px rgb(27 127 204 / .9));
        outline: 0;
      }
      
      :host(:where(:focus)) {
        box-shadow: none;
        outline: 0;
      }

      :host(:hover) {
        background: var(--media-control-hover-background, rgba(50 50 70 / .7));
      }

      svg, img, ::slotted(svg), ::slotted(img) {
        width: var(--media-button-icon-width);
        height: var(--media-button-icon-height, var(--media-control-height, 24px));
        transform: var(--media-button-icon-transform);
        transition: var(--media-button-icon-transition);
        fill: var(--media-icon-color, var(--media-primary-color, rgb(238 238 238)));
        vertical-align: middle;
        max-width: 100%;
        max-height: 100%;
        min-width: 100%;
      }

      media-tooltip {
        
        max-width: 0;
        overflow-x: clip;
        opacity: 0;
        transition: opacity .3s, max-width 0s 9s;
      }

      :host(:hover) media-tooltip,
      :host(:focus-visible) media-tooltip {
        max-width: 100vw;
        opacity: 1;
        transition: opacity .3s;
      }

      :host([notooltip]) slot[name="tooltip"] {
        display: none;
      }
    </style>

    ${this.getSlotTemplateHTML(t,e)}

    <slot name="tooltip">
      <media-tooltip part="tooltip" aria-hidden="true">
        <template shadowrootmode="${hW.shadowRootOptions.mode}">
          ${hW.getTemplateHTML({})}
        </template>
        <slot name="tooltip-content">
          ${this.getTooltipContentHTML(t)}
        </slot>
      </media-tooltip>
    </slot>
  `}function hGe(t,e){return`
    <slot></slot>
  `}function fGe(){return""}class xd extends sr.HTMLElement{constructor(){if(super(),xx(this,c3),xx(this,wA,void 0),this.preventClick=!1,this.tooltipEl=null,xx(this,mb,e=>{this.preventClick||this.handleClick(e),setTimeout(fu(this,T0),0)}),xx(this,T0,()=>{var e,r;(r=(e=this.tooltipEl)==null?void 0:e.updateXOffset)==null||r.call(e)}),xx(this,Mx,e=>{const{key:r}=e;if(!this.keysUsed.includes(r)){this.removeEventListener("keyup",fu(this,Mx));return}this.preventClick||this.handleClick(e)}),xx(this,Dj,e=>{const{metaKey:r,altKey:n,key:i}=e;if(r||n||!this.keysUsed.includes(i)){this.removeEventListener("keyup",fu(this,Mx));return}this.addEventListener("keyup",fu(this,Mx),{once:!0})}),!this.shadowRoot){this.attachShadow(this.constructor.shadowRootOptions);const e=Lf(this.attributes),r=this.constructor.getTemplateHTML(e);this.shadowRoot.setHTMLUnsafe?this.shadowRoot.setHTMLUnsafe(r):this.shadowRoot.innerHTML=r}this.tooltipEl=this.shadowRoot.querySelector("media-tooltip")}static get observedAttributes(){return["disabled",i0.TOOLTIP_PLACEMENT,Ao.MEDIA_CONTROLLER,gt.MEDIA_LANG]}enable(){this.addEventListener("click",fu(this,mb)),this.addEventListener("keydown",fu(this,Dj)),this.tabIndex=0}disable(){this.removeEventListener("click",fu(this,mb)),this.removeEventListener("keydown",fu(this,Dj)),this.removeEventListener("keyup",fu(this,Mx)),this.tabIndex=-1}attributeChangedCallback(e,r,n){var i,a,o,c,u;e===Ao.MEDIA_CONTROLLER?(r&&((a=(i=fu(this,wA))==null?void 0:i.unassociateElement)==null||a.call(i,this),MS(this,wA,null)),n&&this.isConnected&&(MS(this,wA,(o=this.getRootNode())==null?void 0:o.getElementById(n)),(u=(c=fu(this,wA))==null?void 0:c.associateElement)==null||u.call(c,this))):e==="disabled"&&n!==r?n==null?this.enable():this.disable():e===i0.TOOLTIP_PLACEMENT&&this.tooltipEl&&n!==r?this.tooltipEl.placement=n:e===gt.MEDIA_LANG&&(this.shadowRoot.querySelector('slot[name="tooltip-content"]').innerHTML=this.constructor.getTooltipContentHTML()),fu(this,T0).call(this)}connectedCallback(){var e,r,n;const{style:i}=Hu(this.shadowRoot,":host");i.setProperty("display",`var(--media-control-display, var(--${this.localName}-display, inline-flex))`),this.hasAttribute("disabled")?this.disable():this.enable(),this.setAttribute("role","button");const a=this.getAttribute(Ao.MEDIA_CONTROLLER);a&&(MS(this,wA,(e=this.getRootNode())==null?void 0:e.getElementById(a)),(n=(r=fu(this,wA))==null?void 0:r.associateElement)==null||n.call(r,this)),sr.customElements.whenDefined("media-tooltip").then(()=>uGe(this,c3,Kae).call(this))}disconnectedCallback(){var e,r;this.disable(),(r=(e=fu(this,wA))==null?void 0:e.unassociateElement)==null||r.call(e,this),MS(this,wA,null),this.removeEventListener("mouseenter",fu(this,T0)),this.removeEventListener("focus",fu(this,T0)),this.removeEventListener("click",fu(this,mb))}get keysUsed(){return["Enter"," "]}get tooltipPlacement(){return Cl(this,i0.TOOLTIP_PLACEMENT)}set tooltipPlacement(e){Nl(this,i0.TOOLTIP_PLACEMENT,e)}get mediaController(){return Cl(this,Ao.MEDIA_CONTROLLER)}set mediaController(e){Nl(this,Ao.MEDIA_CONTROLLER,e)}get disabled(){return Oa(this,i0.DISABLED)}set disabled(e){Ra(this,i0.DISABLED,e)}get noTooltip(){return Oa(this,i0.NO_TOOLTIP)}set noTooltip(e){Ra(this,i0.NO_TOOLTIP,e)}handleClick(e){}}wA=new WeakMap;mb=new WeakMap;T0=new WeakMap;Mx=new WeakMap;Dj=new WeakMap;c3=new WeakSet;Kae=function(){this.addEventListener("mouseenter",fu(this,T0)),this.addEventListener("focus",fu(this,T0)),this.addEventListener("click",fu(this,mb));const t=this.tooltipPlacement;t&&this.tooltipEl&&(this.tooltipEl.placement=t)};xd.shadowRootOptions={mode:"open"};xd.getTemplateHTML=dGe;xd.getSlotTemplateHTML=hGe;xd.getTooltipContentHTML=fGe;sr.customElements.get("media-chrome-button")||sr.customElements.define("media-chrome-button",xd);const fW=`<svg aria-hidden="true" viewBox="0 0 26 24">
  <path d="M22.13 3H3.87a.87.87 0 0 0-.87.87v13.26a.87.87 0 0 0 .87.87h3.4L9 16H5V5h16v11h-4l1.72 2h3.4a.87.87 0 0 0 .87-.87V3.87a.87.87 0 0 0-.86-.87Zm-8.75 11.44a.5.5 0 0 0-.76 0l-4.91 5.73a.5.5 0 0 0 .38.83h9.82a.501.501 0 0 0 .38-.83l-4.91-5.73Z"/>
</svg>
`;function mGe(t){return`
    <style>
      :host([${gt.MEDIA_IS_AIRPLAYING}]) slot[name=icon] slot:not([name=exit]) {
        display: none !important;
      }

      
      :host(:not([${gt.MEDIA_IS_AIRPLAYING}])) slot[name=icon] slot:not([name=enter]) {
        display: none !important;
      }

      :host([${gt.MEDIA_IS_AIRPLAYING}]) slot[name=tooltip-enter],
      :host(:not([${gt.MEDIA_IS_AIRPLAYING}])) slot[name=tooltip-exit] {
        display: none;
      }
    </style>

    <slot name="icon">
      <slot name="enter">${fW}</slot>
      <slot name="exit">${fW}</slot>
    </slot>
  `}function AGe(){return`
    <slot name="tooltip-enter">${Ai("start airplay")}</slot>
    <slot name="tooltip-exit">${Ai("stop airplay")}</slot>
  `}const mW=t=>{const e=t.mediaIsAirplaying?Ai("stop airplay"):Ai("start airplay");t.setAttribute("aria-label",e)};class y6 extends xd{static get observedAttributes(){return[...super.observedAttributes,gt.MEDIA_IS_AIRPLAYING,gt.MEDIA_AIRPLAY_UNAVAILABLE]}connectedCallback(){super.connectedCallback(),mW(this)}attributeChangedCallback(e,r,n){super.attributeChangedCallback(e,r,n),e===gt.MEDIA_IS_AIRPLAYING&&mW(this)}get mediaIsAirplaying(){return Oa(this,gt.MEDIA_IS_AIRPLAYING)}set mediaIsAirplaying(e){Ra(this,gt.MEDIA_IS_AIRPLAYING,e)}get mediaAirplayUnavailable(){return Cl(this,gt.MEDIA_AIRPLAY_UNAVAILABLE)}set mediaAirplayUnavailable(e){Nl(this,gt.MEDIA_AIRPLAY_UNAVAILABLE,e)}handleClick(){const e=new sr.CustomEvent(Gn.MEDIA_AIRPLAY_REQUEST,{composed:!0,bubbles:!0});this.dispatchEvent(e)}}y6.getSlotTemplateHTML=mGe;y6.getTooltipContentHTML=AGe;sr.customElements.get("media-airplay-button")||sr.customElements.define("media-airplay-button",y6);const pGe=`<svg aria-hidden="true" viewBox="0 0 26 24">
  <path d="M22.83 5.68a2.58 2.58 0 0 0-2.3-2.5c-3.62-.24-11.44-.24-15.06 0a2.58 2.58 0 0 0-2.3 2.5c-.23 4.21-.23 8.43 0 12.64a2.58 2.58 0 0 0 2.3 2.5c3.62.24 11.44.24 15.06 0a2.58 2.58 0 0 0 2.3-2.5c.23-4.21.23-8.43 0-12.64Zm-11.39 9.45a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.92 3.92 0 0 1 .92-2.77 3.18 3.18 0 0 1 2.43-1 2.94 2.94 0 0 1 2.13.78c.364.359.62.813.74 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.17 1.61 1.61 0 0 0-1.29.58 2.79 2.79 0 0 0-.5 1.89 3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.48 1.48 0 0 0 1-.37 2.1 2.1 0 0 0 .59-1.14l1.4.44a3.23 3.23 0 0 1-1.07 1.69Zm7.22 0a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.88 3.88 0 0 1 .93-2.77 3.14 3.14 0 0 1 2.42-1 3 3 0 0 1 2.16.82 2.8 2.8 0 0 1 .73 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.21 1.61 1.61 0 0 0-1.29.58A2.79 2.79 0 0 0 15 12a3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.44 1.44 0 0 0 1-.37 2.1 2.1 0 0 0 .6-1.15l1.4.44a3.17 3.17 0 0 1-1.1 1.7Z"/>
</svg>`,gGe=`<svg aria-hidden="true" viewBox="0 0 26 24">
  <path d="M17.73 14.09a1.4 1.4 0 0 1-1 .37 1.579 1.579 0 0 1-1.27-.58A3 3 0 0 1 15 12a2.8 2.8 0 0 1 .5-1.85 1.63 1.63 0 0 1 1.29-.57 1.47 1.47 0 0 1 1.51 1.2l1.43-.34A2.89 2.89 0 0 0 19 9.07a3 3 0 0 0-2.14-.78 3.14 3.14 0 0 0-2.42 1 3.91 3.91 0 0 0-.93 2.78 3.74 3.74 0 0 0 .92 2.66 3.07 3.07 0 0 0 2.34 1 3.07 3.07 0 0 0 1.91-.57 3.17 3.17 0 0 0 1.07-1.74l-1.4-.45c-.083.43-.3.822-.62 1.12Zm-7.22 0a1.43 1.43 0 0 1-1 .37 1.58 1.58 0 0 1-1.27-.58A3 3 0 0 1 7.76 12a2.8 2.8 0 0 1 .5-1.85 1.63 1.63 0 0 1 1.29-.57 1.47 1.47 0 0 1 1.51 1.2l1.43-.34a2.81 2.81 0 0 0-.74-1.32 2.94 2.94 0 0 0-2.13-.78 3.18 3.18 0 0 0-2.43 1 4 4 0 0 0-.92 2.78 3.74 3.74 0 0 0 .92 2.66 3.07 3.07 0 0 0 2.34 1 3.07 3.07 0 0 0 1.91-.57 3.23 3.23 0 0 0 1.07-1.74l-1.4-.45a2.06 2.06 0 0 1-.6 1.07Zm12.32-8.41a2.59 2.59 0 0 0-2.3-2.51C18.72 3.05 15.86 3 13 3c-2.86 0-5.72.05-7.53.17a2.59 2.59 0 0 0-2.3 2.51c-.23 4.207-.23 8.423 0 12.63a2.57 2.57 0 0 0 2.3 2.5c1.81.13 4.67.19 7.53.19 2.86 0 5.72-.06 7.53-.19a2.57 2.57 0 0 0 2.3-2.5c.23-4.207.23-8.423 0-12.63Zm-1.49 12.53a1.11 1.11 0 0 1-.91 1.11c-1.67.11-4.45.18-7.43.18-2.98 0-5.76-.07-7.43-.18a1.11 1.11 0 0 1-.91-1.11c-.21-4.14-.21-8.29 0-12.43a1.11 1.11 0 0 1 .91-1.11C7.24 4.56 10 4.49 13 4.49s5.76.07 7.43.18a1.11 1.11 0 0 1 .91 1.11c.21 4.14.21 8.29 0 12.43Z"/>
</svg>`;function vGe(t){return`
    <style>
      :host([aria-checked="true"]) slot[name=off] {
        display: none !important;
      }

      
      :host(:not([aria-checked="true"])) slot[name=on] {
        display: none !important;
      }

      :host([aria-checked="true"]) slot[name=tooltip-enable],
      :host(:not([aria-checked="true"])) slot[name=tooltip-disable] {
        display: none;
      }
    </style>

    <slot name="icon">
      <slot name="on">${pGe}</slot>
      <slot name="off">${gGe}</slot>
    </slot>
  `}function yGe(){return`
    <slot name="tooltip-enable">${Ai("Enable captions")}</slot>
    <slot name="tooltip-disable">${Ai("Disable captions")}</slot>
  `}const AW=t=>{t.setAttribute("aria-checked",Dae(t).toString())};class x6 extends xd{static get observedAttributes(){return[...super.observedAttributes,gt.MEDIA_SUBTITLES_LIST,gt.MEDIA_SUBTITLES_SHOWING]}connectedCallback(){super.connectedCallback(),this.setAttribute("role","switch"),this.setAttribute("aria-label",Ai("closed captions")),AW(this)}attributeChangedCallback(e,r,n){super.attributeChangedCallback(e,r,n),e===gt.MEDIA_SUBTITLES_SHOWING&&AW(this)}get mediaSubtitlesList(){return pW(this,gt.MEDIA_SUBTITLES_LIST)}set mediaSubtitlesList(e){gW(this,gt.MEDIA_SUBTITLES_LIST,e)}get mediaSubtitlesShowing(){return pW(this,gt.MEDIA_SUBTITLES_SHOWING)}set mediaSubtitlesShowing(e){gW(this,gt.MEDIA_SUBTITLES_SHOWING,e)}handleClick(){this.dispatchEvent(new sr.CustomEvent(Gn.MEDIA_TOGGLE_SUBTITLES_REQUEST,{composed:!0,bubbles:!0}))}}x6.getSlotTemplateHTML=vGe;x6.getTooltipContentHTML=yGe;const pW=(t,e)=>{const r=t.getAttribute(e);return r?ok(r):[]},gW=(t,e,r)=>{if(!r?.length){t.removeAttribute(e);return}const n=x_(r);t.getAttribute(e)!==n&&t.setAttribute(e,n)};sr.customElements.get("media-captions-button")||sr.customElements.define("media-captions-button",x6);const xGe='<svg aria-hidden="true" viewBox="0 0 24 24"><g><path class="cast_caf_icon_arch0" d="M1,18 L1,21 L4,21 C4,19.3 2.66,18 1,18 L1,18 Z"/><path class="cast_caf_icon_arch1" d="M1,14 L1,16 C3.76,16 6,18.2 6,21 L8,21 C8,17.13 4.87,14 1,14 L1,14 Z"/><path class="cast_caf_icon_arch2" d="M1,10 L1,12 C5.97,12 10,16.0 10,21 L12,21 C12,14.92 7.07,10 1,10 L1,10 Z"/><path class="cast_caf_icon_box" d="M21,3 L3,3 C1.9,3 1,3.9 1,5 L1,8 L3,8 L3,5 L21,5 L21,19 L14,19 L14,21 L21,21 C22.1,21 23,20.1 23,19 L23,5 C23,3.9 22.1,3 21,3 L21,3 Z"/></g></svg>',bGe='<svg aria-hidden="true" viewBox="0 0 24 24"><g><path class="cast_caf_icon_arch0" d="M1,18 L1,21 L4,21 C4,19.3 2.66,18 1,18 L1,18 Z"/><path class="cast_caf_icon_arch1" d="M1,14 L1,16 C3.76,16 6,18.2 6,21 L8,21 C8,17.13 4.87,14 1,14 L1,14 Z"/><path class="cast_caf_icon_arch2" d="M1,10 L1,12 C5.97,12 10,16.0 10,21 L12,21 C12,14.92 7.07,10 1,10 L1,10 Z"/><path class="cast_caf_icon_box" d="M21,3 L3,3 C1.9,3 1,3.9 1,5 L1,8 L3,8 L3,5 L21,5 L21,19 L14,19 L14,21 L21,21 C22.1,21 23,20.1 23,19 L23,5 C23,3.9 22.1,3 21,3 L21,3 Z"/><path class="cast_caf_icon_boxfill" d="M5,7 L5,8.63 C8,8.6 13.37,14 13.37,17 L19,17 L19,7 Z"/></g></svg>';function wGe(t){return`
    <style>
      :host([${gt.MEDIA_IS_CASTING}]) slot[name=icon] slot:not([name=exit]) {
        display: none !important;
      }

      
      :host(:not([${gt.MEDIA_IS_CASTING}])) slot[name=icon] slot:not([name=enter]) {
        display: none !important;
      }

      :host([${gt.MEDIA_IS_CASTING}]) slot[name=tooltip-enter],
      :host(:not([${gt.MEDIA_IS_CASTING}])) slot[name=tooltip-exit] {
        display: none;
      }
    </style>

    <slot name="icon">
      <slot name="enter">${xGe}</slot>
      <slot name="exit">${bGe}</slot>
    </slot>
  `}function _Ge(){return`
    <slot name="tooltip-enter">${Ai("Start casting")}</slot>
    <slot name="tooltip-exit">${Ai("Stop casting")}</slot>
  `}const vW=t=>{const e=t.mediaIsCasting?Ai("stop casting"):Ai("start casting");t.setAttribute("aria-label",e)};class b6 extends xd{static get observedAttributes(){return[...super.observedAttributes,gt.MEDIA_IS_CASTING,gt.MEDIA_CAST_UNAVAILABLE]}connectedCallback(){super.connectedCallback(),vW(this)}attributeChangedCallback(e,r,n){super.attributeChangedCallback(e,r,n),e===gt.MEDIA_IS_CASTING&&vW(this)}get mediaIsCasting(){return Oa(this,gt.MEDIA_IS_CASTING)}set mediaIsCasting(e){Ra(this,gt.MEDIA_IS_CASTING,e)}get mediaCastUnavailable(){return Cl(this,gt.MEDIA_CAST_UNAVAILABLE)}set mediaCastUnavailable(e){Nl(this,gt.MEDIA_CAST_UNAVAILABLE,e)}handleClick(){const e=this.mediaIsCasting?Gn.MEDIA_EXIT_CAST_REQUEST:Gn.MEDIA_ENTER_CAST_REQUEST;this.dispatchEvent(new sr.CustomEvent(e,{composed:!0,bubbles:!0}))}}b6.getSlotTemplateHTML=wGe;b6.getTooltipContentHTML=_Ge;sr.customElements.get("media-cast-button")||sr.customElements.define("media-cast-button",b6);var w6=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},cy=(t,e,r)=>(w6(t,e,"read from private field"),e.get(t)),Np=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},_6=(t,e,r,n)=>(w6(t,e,"write to private field"),e.set(t,r),r),bv=(t,e,r)=>(w6(t,e,"access private method"),r),yN,b_,Cy,Mj,u3,d3,Gae,h3,Wae,f3,Yae,m3,qae,A3,Xae;function EGe(t){return`
    <style>
      :host {
        font: var(--media-font,
          var(--media-font-weight, normal)
          var(--media-font-size, 14px) /
          var(--media-text-content-height, var(--media-control-height, 24px))
          var(--media-font-family, helvetica neue, segoe ui, roboto, arial, sans-serif));
        color: var(--media-text-color, var(--media-primary-color, rgb(238 238 238)));
        display: var(--media-dialog-display, inline-flex);
        justify-content: center;
        align-items: center;
        
        transition-behavior: allow-discrete;
        visibility: hidden;
        opacity: 0;
        transform: translateY(2px) scale(.99);
        pointer-events: none;
      }

      :host([open]) {
        transition: display .2s, visibility 0s, opacity .2s ease-out, transform .15s ease-out;
        visibility: visible;
        opacity: 1;
        transform: translateY(0) scale(1);
        pointer-events: auto;
      }

      #content {
        display: flex;
        position: relative;
        box-sizing: border-box;
        width: min(320px, 100%);
        word-wrap: break-word;
        max-height: 100%;
        overflow: auto;
        text-align: center;
        line-height: 1.4;
      }
    </style>
    ${this.getSlotTemplateHTML(t)}
  `}function SGe(t){return`
    <slot id="content"></slot>
  `}const pw={OPEN:"open",ANCHOR:"anchor"};class B1 extends sr.HTMLElement{constructor(){super(),Np(this,Mj),Np(this,d3),Np(this,h3),Np(this,f3),Np(this,m3),Np(this,A3),Np(this,yN,!1),Np(this,b_,null),Np(this,Cy,null),this.addEventListener("invoke",this),this.addEventListener("focusout",this),this.addEventListener("keydown",this)}static get observedAttributes(){return[pw.OPEN,pw.ANCHOR]}get open(){return Oa(this,pw.OPEN)}set open(e){Ra(this,pw.OPEN,e)}handleEvent(e){switch(e.type){case"invoke":bv(this,f3,Yae).call(this,e);break;case"focusout":bv(this,m3,qae).call(this,e);break;case"keydown":bv(this,A3,Xae).call(this,e);break}}connectedCallback(){bv(this,Mj,u3).call(this),this.role||(this.role="dialog")}attributeChangedCallback(e,r,n){bv(this,Mj,u3).call(this),e===pw.OPEN&&n!==r&&(this.open?bv(this,d3,Gae).call(this):bv(this,h3,Wae).call(this))}focus(){_6(this,b_,u6());const e=!this.dispatchEvent(new Event("focus",{composed:!0,cancelable:!0})),r=!this.dispatchEvent(new Event("focusin",{composed:!0,bubbles:!0,cancelable:!0}));if(e||r)return;const n=this.querySelector('[autofocus], [tabindex]:not([tabindex="-1"]), [role="menu"]');n?.focus()}get keysUsed(){return["Escape","Tab"]}}yN=new WeakMap;b_=new WeakMap;Cy=new WeakMap;Mj=new WeakSet;u3=function(){if(!cy(this,yN)&&(_6(this,yN,!0),!this.shadowRoot)){this.attachShadow(this.constructor.shadowRootOptions);const t=Lf(this.attributes);this.shadowRoot.innerHTML=this.constructor.getTemplateHTML(t),queueMicrotask(()=>{const{style:e}=Hu(this.shadowRoot,":host");e.setProperty("transition","display .15s, visibility .15s, opacity .15s ease-in, transform .15s ease-in")})}};d3=new WeakSet;Gae=function(){var t;(t=cy(this,Cy))==null||t.setAttribute("aria-expanded","true"),this.dispatchEvent(new Event("open",{composed:!0,bubbles:!0})),this.addEventListener("transitionend",()=>this.focus(),{once:!0})};h3=new WeakSet;Wae=function(){var t;(t=cy(this,Cy))==null||t.setAttribute("aria-expanded","false"),this.dispatchEvent(new Event("close",{composed:!0,bubbles:!0}))};f3=new WeakSet;Yae=function(t){_6(this,Cy,t.relatedTarget),Eg(this,t.relatedTarget)||(this.open=!this.open)};m3=new WeakSet;qae=function(t){var e;Eg(this,t.relatedTarget)||((e=cy(this,b_))==null||e.focus(),cy(this,Cy)&&cy(this,Cy)!==t.relatedTarget&&this.open&&(this.open=!1))};A3=new WeakSet;Xae=function(t){var e,r,n,i,a;const{key:o,ctrlKey:c,altKey:u,metaKey:l}=t;c||u||l||this.keysUsed.includes(o)&&(t.preventDefault(),t.stopPropagation(),o==="Tab"?(t.shiftKey?(r=(e=this.previousElementSibling)==null?void 0:e.focus)==null||r.call(e):(i=(n=this.nextElementSibling)==null?void 0:n.focus)==null||i.call(n),this.blur()):o==="Escape"&&((a=cy(this,b_))==null||a.focus(),this.open=!1))};B1.shadowRootOptions={mode:"open"};B1.getTemplateHTML=EGe;B1.getSlotTemplateHTML=SGe;sr.customElements.get("media-chrome-dialog")||sr.customElements.define("media-chrome-dialog",B1);var E6=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},lc=(t,e,r)=>(E6(t,e,"read from private field"),r?r.call(t):e.get(t)),Od=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},u0=(t,e,r,n)=>(E6(t,e,"write to private field"),e.set(t,r),r),km=(t,e,r)=>(E6(t,e,"access private method"),r),_A,uk,Fj,Uj,Im,xN,$j,Hj,Qj,S6,Zae,zj,p3,Vj,g3,bN,j6,v3,Jae,y3,eoe,x3,toe,b3,roe;function jGe(t){return`
    <style>
      :host {
        --_focus-box-shadow: var(--media-focus-box-shadow, inset 0 0 0 2px rgb(27 127 204 / .9));
        --_media-range-padding: var(--media-range-padding, var(--media-control-padding, 10px));

        box-shadow: var(--_focus-visible-box-shadow, none);
        background: var(--media-control-background, var(--media-secondary-color, rgb(20 20 30 / .7)));
        height: calc(var(--media-control-height, 24px) + 2 * var(--_media-range-padding));
        display: inline-flex;
        align-items: center;
        
        vertical-align: middle;
        box-sizing: border-box;
        position: relative;
        width: 100px;
        transition: background .15s linear;
        cursor: var(--media-cursor, pointer);
        pointer-events: auto;
        touch-action: none; 
      }

      
      input[type=range]:focus {
        outline: 0;
      }
      input[type=range]:focus::-webkit-slider-runnable-track {
        outline: 0;
      }

      :host(:hover) {
        background: var(--media-control-hover-background, rgb(50 50 70 / .7));
      }

      #leftgap {
        padding-left: var(--media-range-padding-left, var(--_media-range-padding));
      }

      #rightgap {
        padding-right: var(--media-range-padding-right, var(--_media-range-padding));
      }

      #startpoint,
      #endpoint {
        position: absolute;
      }

      #endpoint {
        right: 0;
      }

      #container {
        
        width: var(--media-range-track-width, 100%);
        transform: translate(var(--media-range-track-translate-x, 0px), var(--media-range-track-translate-y, 0px));
        position: relative;
        height: 100%;
        display: flex;
        align-items: center;
        min-width: 40px;
      }

      #range {
        
        display: var(--media-time-range-hover-display, block);
        bottom: var(--media-time-range-hover-bottom, -7px);
        height: var(--media-time-range-hover-height, max(100% + 7px, 25px));
        width: 100%;
        position: absolute;
        cursor: var(--media-cursor, pointer);

        -webkit-appearance: none; 
        -webkit-tap-highlight-color: transparent;
        background: transparent; 
        margin: 0;
        z-index: 1;
      }

      @media (hover: hover) {
        #range {
          bottom: var(--media-time-range-hover-bottom, -5px);
          height: var(--media-time-range-hover-height, max(100% + 5px, 20px));
        }
      }

      
      
      #range::-webkit-slider-thumb {
        -webkit-appearance: none;
        background: transparent;
        width: .1px;
        height: .1px;
      }

      
      #range::-moz-range-thumb {
        background: transparent;
        border: transparent;
        width: .1px;
        height: .1px;
      }

      #appearance {
        height: var(--media-range-track-height, 4px);
        display: flex;
        flex-direction: column;
        justify-content: center;
        width: 100%;
        position: absolute;
        
        will-change: transform;
      }

      #track {
        background: var(--media-range-track-background, rgb(255 255 255 / .2));
        border-radius: var(--media-range-track-border-radius, 1px);
        border: var(--media-range-track-border, none);
        outline: var(--media-range-track-outline);
        outline-offset: var(--media-range-track-outline-offset);
        backdrop-filter: var(--media-range-track-backdrop-filter);
        -webkit-backdrop-filter: var(--media-range-track-backdrop-filter);
        box-shadow: var(--media-range-track-box-shadow, none);
        position: absolute;
        width: 100%;
        height: 100%;
        overflow: hidden;
      }

      #progress,
      #pointer {
        position: absolute;
        height: 100%;
        will-change: width;
      }

      #progress {
        background: var(--media-range-bar-color, var(--media-primary-color, rgb(238 238 238)));
        transition: var(--media-range-track-transition);
      }

      #pointer {
        background: var(--media-range-track-pointer-background);
        border-right: var(--media-range-track-pointer-border-right);
        transition: visibility .25s, opacity .25s;
        visibility: hidden;
        opacity: 0;
      }

      @media (hover: hover) {
        :host(:hover) #pointer {
          transition: visibility .5s, opacity .5s;
          visibility: visible;
          opacity: 1;
        }
      }

      #thumb,
      ::slotted([slot=thumb]) {
        width: var(--media-range-thumb-width, 10px);
        height: var(--media-range-thumb-height, 10px);
        transition: var(--media-range-thumb-transition);
        transform: var(--media-range-thumb-transform, none);
        opacity: var(--media-range-thumb-opacity, 1);
        translate: -50%;
        position: absolute;
        left: 0;
        cursor: var(--media-cursor, pointer);
      }

      #thumb {
        border-radius: var(--media-range-thumb-border-radius, 10px);
        background: var(--media-range-thumb-background, var(--media-primary-color, rgb(238 238 238)));
        box-shadow: var(--media-range-thumb-box-shadow, 1px 1px 1px transparent);
        border: var(--media-range-thumb-border, none);
      }

      :host([disabled]) #thumb {
        background-color: #777;
      }

      .segments #appearance {
        height: var(--media-range-segment-hover-height, 7px);
      }

      #track {
        clip-path: url(#segments-clipping);
      }

      #segments {
        --segments-gap: var(--media-range-segments-gap, 2px);
        position: absolute;
        width: 100%;
        height: 100%;
      }

      #segments-clipping {
        transform: translateX(calc(var(--segments-gap) / 2));
      }

      #segments-clipping:empty {
        display: none;
      }

      #segments-clipping rect {
        height: var(--media-range-track-height, 4px);
        y: calc((var(--media-range-segment-hover-height, 7px) - var(--media-range-track-height, 4px)) / 2);
        transition: var(--media-range-segment-transition, transform .1s ease-in-out);
        transform: var(--media-range-segment-transform, scaleY(1));
        transform-origin: center;
      }
    </style>
    <div id="leftgap"></div>
    <div id="container">
      <div id="startpoint"></div>
      <div id="endpoint"></div>
      <div id="appearance">
        <div id="track" part="track">
          <div id="pointer"></div>
          <div id="progress" part="progress"></div>
        </div>
        <slot name="thumb">
          <div id="thumb" part="thumb"></div>
        </slot>
        <svg id="segments"><clipPath id="segments-clipping"></clipPath></svg>
      </div>
      <input id="range" type="range" min="0" max="1" step="any" value="0">

      ${this.getContainerTemplateHTML(t)}
    </div>
    <div id="rightgap"></div>
  `}function TGe(t){return""}class P1 extends sr.HTMLElement{constructor(){if(super(),Od(this,S6),Od(this,zj),Od(this,Vj),Od(this,bN),Od(this,v3),Od(this,y3),Od(this,x3),Od(this,b3),Od(this,_A,void 0),Od(this,uk,void 0),Od(this,Fj,void 0),Od(this,Uj,void 0),Od(this,Im,{}),Od(this,xN,[]),Od(this,$j,()=>{if(this.range.matches(":focus-visible")){const{style:e}=Hu(this.shadowRoot,":host");e.setProperty("--_focus-visible-box-shadow","var(--_focus-box-shadow)")}}),Od(this,Hj,()=>{const{style:e}=Hu(this.shadowRoot,":host");e.removeProperty("--_focus-visible-box-shadow")}),Od(this,Qj,()=>{const e=this.shadowRoot.querySelector("#segments-clipping");e&&e.parentNode.append(e)}),!this.shadowRoot){this.attachShadow(this.constructor.shadowRootOptions);const e=Lf(this.attributes),r=this.constructor.getTemplateHTML(e);this.shadowRoot.setHTMLUnsafe?this.shadowRoot.setHTMLUnsafe(r):this.shadowRoot.innerHTML=r}this.container=this.shadowRoot.querySelector("#container"),u0(this,Fj,this.shadowRoot.querySelector("#startpoint")),u0(this,Uj,this.shadowRoot.querySelector("#endpoint")),this.range=this.shadowRoot.querySelector("#range"),this.appearance=this.shadowRoot.querySelector("#appearance")}static get observedAttributes(){return["disabled","aria-disabled",Ao.MEDIA_CONTROLLER]}attributeChangedCallback(e,r,n){var i,a,o,c,u;e===Ao.MEDIA_CONTROLLER?(r&&((a=(i=lc(this,_A))==null?void 0:i.unassociateElement)==null||a.call(i,this),u0(this,_A,null)),n&&this.isConnected&&(u0(this,_A,(o=this.getRootNode())==null?void 0:o.getElementById(n)),(u=(c=lc(this,_A))==null?void 0:c.associateElement)==null||u.call(c,this))):(e==="disabled"||e==="aria-disabled"&&r!==n)&&(n==null?(this.range.removeAttribute(e),km(this,zj,p3).call(this)):(this.range.setAttribute(e,n),km(this,Vj,g3).call(this)))}connectedCallback(){var e,r,n;const{style:i}=Hu(this.shadowRoot,":host");i.setProperty("display",`var(--media-control-display, var(--${this.localName}-display, inline-flex))`),lc(this,Im).pointer=Hu(this.shadowRoot,"#pointer"),lc(this,Im).progress=Hu(this.shadowRoot,"#progress"),lc(this,Im).thumb=Hu(this.shadowRoot,'#thumb, ::slotted([slot="thumb"])'),lc(this,Im).activeSegment=Hu(this.shadowRoot,"#segments-clipping rect:nth-child(0)");const a=this.getAttribute(Ao.MEDIA_CONTROLLER);a&&(u0(this,_A,(e=this.getRootNode())==null?void 0:e.getElementById(a)),(n=(r=lc(this,_A))==null?void 0:r.associateElement)==null||n.call(r,this)),this.updateBar(),this.shadowRoot.addEventListener("focusin",lc(this,$j)),this.shadowRoot.addEventListener("focusout",lc(this,Hj)),km(this,zj,p3).call(this),i1(this.container,lc(this,Qj))}disconnectedCallback(){var e,r;km(this,Vj,g3).call(this),(r=(e=lc(this,_A))==null?void 0:e.unassociateElement)==null||r.call(e,this),u0(this,_A,null),this.shadowRoot.removeEventListener("focusin",lc(this,$j)),this.shadowRoot.removeEventListener("focusout",lc(this,Hj)),s1(this.container,lc(this,Qj))}updatePointerBar(e){var r;(r=lc(this,Im).pointer)==null||r.style.setProperty("width",`${this.getPointerRatio(e)*100}%`)}updateBar(){var e,r;const n=this.range.valueAsNumber*100;(e=lc(this,Im).progress)==null||e.style.setProperty("width",`${n}%`),(r=lc(this,Im).thumb)==null||r.style.setProperty("left",`${n}%`)}updateSegments(e){const r=this.shadowRoot.querySelector("#segments-clipping");if(r.textContent="",this.container.classList.toggle("segments",!!e?.length),!e?.length)return;const n=[...new Set([+this.range.min,...e.flatMap(a=>[a.start,a.end]),+this.range.max])];u0(this,xN,[...n]);const i=n.pop();for(const[a,o]of n.entries()){const[c,u]=[a===0,a===n.length-1],l=c?"calc(var(--segments-gap) / -1)":`${o*100}%`,f=`calc(${((u?i:n[a+1])-o)*100}%${c||u?"":" - var(--segments-gap)"})`,m=yu.createElementNS("http://www.w3.org/2000/svg","rect"),p=d6(this.shadowRoot,`#segments-clipping rect:nth-child(${a+1})`);p.style.setProperty("x",l),p.style.setProperty("width",f),r.append(m)}}getPointerRatio(e){return yKe(e.clientX,e.clientY,lc(this,Fj).getBoundingClientRect(),lc(this,Uj).getBoundingClientRect())}get dragging(){return this.hasAttribute("dragging")}handleEvent(e){switch(e.type){case"pointermove":km(this,b3,roe).call(this,e);break;case"input":this.updateBar();break;case"pointerenter":km(this,v3,Jae).call(this,e);break;case"pointerdown":km(this,bN,j6).call(this,e);break;case"pointerup":km(this,y3,eoe).call(this);break;case"pointerleave":km(this,x3,toe).call(this);break}}get keysUsed(){return["ArrowUp","ArrowRight","ArrowDown","ArrowLeft"]}}_A=new WeakMap;uk=new WeakMap;Fj=new WeakMap;Uj=new WeakMap;Im=new WeakMap;xN=new WeakMap;$j=new WeakMap;Hj=new WeakMap;Qj=new WeakMap;S6=new WeakSet;Zae=function(t){const e=lc(this,Im).activeSegment;if(!e)return;const r=this.getPointerRatio(t),i=`#segments-clipping rect:nth-child(${lc(this,xN).findIndex((a,o,c)=>{const u=c[o+1];return u!=null&&r>=a&&r<=u})+1})`;(e.selectorText!=i||!e.style.transform)&&(e.selectorText=i,e.style.setProperty("transform","var(--media-range-segment-hover-transform, scaleY(2))"))};zj=new WeakSet;p3=function(){this.hasAttribute("disabled")||(this.addEventListener("input",this),this.addEventListener("pointerdown",this),this.addEventListener("pointerenter",this))};Vj=new WeakSet;g3=function(){var t,e;this.removeEventListener("input",this),this.removeEventListener("pointerdown",this),this.removeEventListener("pointerenter",this),(t=sr.window)==null||t.removeEventListener("pointerup",this),(e=sr.window)==null||e.removeEventListener("pointermove",this)};bN=new WeakSet;j6=function(t){var e;u0(this,uk,t.composedPath().includes(this.range)),(e=sr.window)==null||e.addEventListener("pointerup",this)};v3=new WeakSet;Jae=function(t){var e;t.pointerType!=="mouse"&&km(this,bN,j6).call(this,t),this.addEventListener("pointerleave",this),(e=sr.window)==null||e.addEventListener("pointermove",this)};y3=new WeakSet;eoe=function(){var t;(t=sr.window)==null||t.removeEventListener("pointerup",this),this.toggleAttribute("dragging",!1),this.range.disabled=this.hasAttribute("disabled")};x3=new WeakSet;toe=function(){var t,e;this.removeEventListener("pointerleave",this),(t=sr.window)==null||t.removeEventListener("pointermove",this),this.toggleAttribute("dragging",!1),this.range.disabled=this.hasAttribute("disabled"),(e=lc(this,Im).activeSegment)==null||e.style.removeProperty("transform")};b3=new WeakSet;roe=function(t){t.pointerType==="pen"&&t.buttons===0||(this.toggleAttribute("dragging",t.buttons===1||t.pointerType!=="mouse"),this.updatePointerBar(t),km(this,S6,Zae).call(this,t),this.dragging&&(t.pointerType!=="mouse"||!lc(this,uk))&&(this.range.disabled=!0,this.range.valueAsNumber=this.getPointerRatio(t),this.range.dispatchEvent(new Event("input",{bubbles:!0,composed:!0}))))};P1.shadowRootOptions={mode:"open"};P1.getTemplateHTML=jGe;P1.getContainerTemplateHTML=TGe;sr.customElements.get("media-chrome-range")||sr.customElements.define("media-chrome-range",P1);var noe=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},FS=(t,e,r)=>(noe(t,e,"read from private field"),r?r.call(t):e.get(t)),CGe=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},US=(t,e,r,n)=>(noe(t,e,"write to private field"),e.set(t,r),r),EA;function NGe(t){return`
    <style>
      :host {
        
        box-sizing: border-box;
        display: var(--media-control-display, var(--media-control-bar-display, inline-flex));
        color: var(--media-text-color, var(--media-primary-color, rgb(238 238 238)));
        --media-loading-indicator-icon-height: 44px;
      }

      ::slotted(media-time-range),
      ::slotted(media-volume-range) {
        min-height: 100%;
      }

      ::slotted(media-time-range),
      ::slotted(media-clip-selector) {
        flex-grow: 1;
      }

      ::slotted([role="menu"]) {
        position: absolute;
      }
    </style>

    <slot></slot>
  `}class T6 extends sr.HTMLElement{constructor(){if(super(),CGe(this,EA,void 0),!this.shadowRoot){this.attachShadow(this.constructor.shadowRootOptions);const e=Lf(this.attributes);this.shadowRoot.innerHTML=this.constructor.getTemplateHTML(e)}}static get observedAttributes(){return[Ao.MEDIA_CONTROLLER]}attributeChangedCallback(e,r,n){var i,a,o,c,u;e===Ao.MEDIA_CONTROLLER&&(r&&((a=(i=FS(this,EA))==null?void 0:i.unassociateElement)==null||a.call(i,this),US(this,EA,null)),n&&this.isConnected&&(US(this,EA,(o=this.getRootNode())==null?void 0:o.getElementById(n)),(u=(c=FS(this,EA))==null?void 0:c.associateElement)==null||u.call(c,this)))}connectedCallback(){var e,r,n;const i=this.getAttribute(Ao.MEDIA_CONTROLLER);i&&(US(this,EA,(e=this.getRootNode())==null?void 0:e.getElementById(i)),(n=(r=FS(this,EA))==null?void 0:r.associateElement)==null||n.call(r,this))}disconnectedCallback(){var e,r;(r=(e=FS(this,EA))==null?void 0:e.unassociateElement)==null||r.call(e,this),US(this,EA,null)}}EA=new WeakMap;T6.shadowRootOptions={mode:"open"};T6.getTemplateHTML=NGe;sr.customElements.get("media-control-bar")||sr.customElements.define("media-control-bar",T6);var ioe=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},$S=(t,e,r)=>(ioe(t,e,"read from private field"),r?r.call(t):e.get(t)),kGe=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},HS=(t,e,r,n)=>(ioe(t,e,"write to private field"),e.set(t,r),r),SA;function LGe(t,e={}){return`
    <style>
      :host {
        font: var(--media-font,
          var(--media-font-weight, normal)
          var(--media-font-size, 14px) /
          var(--media-text-content-height, var(--media-control-height, 24px))
          var(--media-font-family, helvetica neue, segoe ui, roboto, arial, sans-serif));
        color: var(--media-text-color, var(--media-primary-color, rgb(238 238 238)));
        background: var(--media-text-background, var(--media-control-background, var(--media-secondary-color, rgb(20 20 30 / .7))));
        padding: var(--media-control-padding, 10px);
        display: inline-flex;
        justify-content: center;
        align-items: center;
        vertical-align: middle;
        box-sizing: border-box;
        text-align: center;
        pointer-events: auto;
      }

      
      :host(:focus-visible) {
        box-shadow: inset 0 0 0 2px rgb(27 127 204 / .9);
        outline: 0;
      }

      
      :host(:where(:focus)) {
        box-shadow: none;
        outline: 0;
      }
    </style>

    ${this.getSlotTemplateHTML(t,e)}
  `}function IGe(t,e){return`
    <slot></slot>
  `}class ev extends sr.HTMLElement{constructor(){if(super(),kGe(this,SA,void 0),!this.shadowRoot){this.attachShadow(this.constructor.shadowRootOptions);const e=Lf(this.attributes);this.shadowRoot.innerHTML=this.constructor.getTemplateHTML(e)}}static get observedAttributes(){return[Ao.MEDIA_CONTROLLER]}attributeChangedCallback(e,r,n){var i,a,o,c,u;e===Ao.MEDIA_CONTROLLER&&(r&&((a=(i=$S(this,SA))==null?void 0:i.unassociateElement)==null||a.call(i,this),HS(this,SA,null)),n&&this.isConnected&&(HS(this,SA,(o=this.getRootNode())==null?void 0:o.getElementById(n)),(u=(c=$S(this,SA))==null?void 0:c.associateElement)==null||u.call(c,this)))}connectedCallback(){var e,r,n;const{style:i}=Hu(this.shadowRoot,":host");i.setProperty("display",`var(--media-control-display, var(--${this.localName}-display, inline-flex))`);const a=this.getAttribute(Ao.MEDIA_CONTROLLER);a&&(HS(this,SA,(e=this.getRootNode())==null?void 0:e.getElementById(a)),(n=(r=$S(this,SA))==null?void 0:r.associateElement)==null||n.call(r,this))}disconnectedCallback(){var e,r;(r=(e=$S(this,SA))==null?void 0:e.unassociateElement)==null||r.call(e,this),HS(this,SA,null)}}SA=new WeakMap;ev.shadowRootOptions={mode:"open"};ev.getTemplateHTML=LGe;ev.getSlotTemplateHTML=IGe;sr.customElements.get("media-text-display")||sr.customElements.define("media-text-display",ev);var soe=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},yW=(t,e,r)=>(soe(t,e,"read from private field"),r?r.call(t):e.get(t)),BGe=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},PGe=(t,e,r,n)=>(soe(t,e,"write to private field"),e.set(t,r),r),Kw;function OGe(t,e){return`
    <slot>${M0(e.mediaDuration)}</slot>
  `}class aoe extends ev{constructor(){var e;super(),BGe(this,Kw,void 0),PGe(this,Kw,this.shadowRoot.querySelector("slot")),yW(this,Kw).textContent=M0((e=this.mediaDuration)!=null?e:0)}static get observedAttributes(){return[...super.observedAttributes,gt.MEDIA_DURATION]}attributeChangedCallback(e,r,n){e===gt.MEDIA_DURATION&&(yW(this,Kw).textContent=M0(+n)),super.attributeChangedCallback(e,r,n)}get mediaDuration(){return Tl(this,gt.MEDIA_DURATION)}set mediaDuration(e){Dc(this,gt.MEDIA_DURATION,e)}}Kw=new WeakMap;aoe.getSlotTemplateHTML=OGe;sr.customElements.get("media-duration-display")||sr.customElements.define("media-duration-display",aoe);const RGe={2:Ai("Network Error"),3:Ai("Decode Error"),4:Ai("Source Not Supported"),5:Ai("Encryption Error")},DGe={2:Ai("A network error caused the media download to fail."),3:Ai("A media error caused playback to be aborted. The media could be corrupt or your browser does not support this format."),4:Ai("An unsupported error occurred. The server or network failed, or your browser does not support this format."),5:Ai("The media is encrypted and there are no keys to decrypt it.")},ooe=t=>{var e,r;return t.code===1?null:{title:(e=RGe[t.code])!=null?e:`Error ${t.code}`,message:(r=DGe[t.code])!=null?r:t.message}};var loe=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},MGe=(t,e,r)=>(loe(t,e,"read from private field"),r?r.call(t):e.get(t)),FGe=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},UGe=(t,e,r,n)=>(loe(t,e,"write to private field"),e.set(t,r),r),Kj;function $Ge(t){return`
    <style>
      :host {
        background: rgb(20 20 30 / .8);
      }

      #content {
        display: block;
        padding: 1.2em 1.5em;
      }

      h3,
      p {
        margin-block: 0 .3em;
      }
    </style>
    <slot name="error-${t.mediaerrorcode}" id="content">
      ${coe({code:+t.mediaerrorcode,message:t.mediaerrormessage})}
    </slot>
  `}function HGe(t){return t.code&&ooe(t)!==null}function coe(t){var e;const{title:r,message:n}=(e=ooe(t))!=null?e:{};let i="";return r&&(i+=`<slot name="error-${t.code}-title"><h3>${r}</h3></slot>`),n&&(i+=`<slot name="error-${t.code}-message"><p>${n}</p></slot>`),i}const xW=[gt.MEDIA_ERROR_CODE,gt.MEDIA_ERROR_MESSAGE];class dk extends B1{constructor(){super(...arguments),FGe(this,Kj,null)}static get observedAttributes(){return[...super.observedAttributes,...xW]}formatErrorMessage(e){return this.constructor.formatErrorMessage(e)}attributeChangedCallback(e,r,n){var i;if(super.attributeChangedCallback(e,r,n),!xW.includes(e))return;const a=(i=this.mediaError)!=null?i:{code:this.mediaErrorCode,message:this.mediaErrorMessage};this.open=HGe(a),this.open&&(this.shadowRoot.querySelector("slot").name=`error-${this.mediaErrorCode}`,this.shadowRoot.querySelector("#content").innerHTML=this.formatErrorMessage(a))}get mediaError(){return MGe(this,Kj)}set mediaError(e){UGe(this,Kj,e)}get mediaErrorCode(){return Tl(this,"mediaerrorcode")}set mediaErrorCode(e){Dc(this,"mediaerrorcode",e)}get mediaErrorMessage(){return Cl(this,"mediaerrormessage")}set mediaErrorMessage(e){Nl(this,"mediaerrormessage",e)}}Kj=new WeakMap;dk.getSlotTemplateHTML=$Ge;dk.formatErrorMessage=coe;sr.customElements.get("media-error-dialog")||sr.customElements.define("media-error-dialog",dk);var uoe=dk,QGe=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},s0=(t,e,r)=>(QGe(t,e,"read from private field"),r?r.call(t):e.get(t)),bW=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Fx,Ux;function zGe(t){return`
    <style>
      :host {
        position: fixed;
        top: 0;
        left: 0;
        z-index: 9999;
        background: rgb(20 20 30 / .8);
        backdrop-filter: blur(10px);
      }

      #content {
        display: block;
        width: clamp(400px, 40vw, 700px);
        max-width: 90vw;
        text-align: left;
      }

      h2 {
        margin: 0 0 1.5rem 0;
        font-size: 1.5rem;
        font-weight: 500;
        text-align: center;
      }

      .shortcuts-table {
        width: 100%;
        border-collapse: collapse;
      }

      .shortcuts-table tr {
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      }

      .shortcuts-table tr:last-child {
        border-bottom: none;
      }

      .shortcuts-table td {
        padding: 0.75rem 0.5rem;
      }

      .shortcuts-table td:first-child {
        text-align: right;
        padding-right: 1rem;
        width: 40%;
        min-width: 120px;
      }

      .shortcuts-table td:last-child {
        padding-left: 1rem;
      }

      .key {
        display: inline-block;
        background: rgba(255, 255, 255, 0.15);
        border: 1px solid rgba(255, 255, 255, 0.2);
        border-radius: 4px;
        padding: 0.25rem 0.5rem;
        font-family: 'Courier New', monospace;
        font-size: 0.9rem;
        font-weight: 500;
        min-width: 1.5rem;
        text-align: center;
        margin: 0 0.2rem;
      }

      .description {
        color: rgba(255, 255, 255, 0.9);
        font-size: 0.95rem;
      }

      .key-combo {
        display: flex;
        align-items: center;
        justify-content: flex-end;
        gap: 0.3rem;
      }

      .key-separator {
        color: rgba(255, 255, 255, 0.5);
        font-size: 0.9rem;
      }
    </style>
    <slot id="content">
      ${VGe()}
    </slot>
  `}function VGe(){return`
    <h2>Keyboard Shortcuts</h2>
    <table class="shortcuts-table">${[{keys:["Space","k"],description:"Toggle Playback"},{keys:["m"],description:"Toggle mute"},{keys:["f"],description:"Toggle fullscreen"},{keys:["c"],description:"Toggle captions or subtitles, if available"},{keys:["p"],description:"Toggle Picture in Picture"},{keys:["","j"],description:"Seek back 10s"},{keys:["","l"],description:"Seek forward 10s"},{keys:[""],description:"Turn volume up"},{keys:[""],description:"Turn volume down"},{keys:["< (SHIFT+,)"],description:"Decrease playback rate"},{keys:["> (SHIFT+.)"],description:"Increase playback rate"}].map(({keys:r,description:n})=>`
      <tr>
        <td>
          <div class="key-combo">${r.map((a,o)=>o>0?`<span class="key-separator">or</span><span class="key">${a}</span>`:`<span class="key">${a}</span>`).join("")}</div>
        </td>
        <td class="description">${n}</td>
      </tr>
    `).join("")}</table>
  `}class doe extends B1{constructor(){super(...arguments),bW(this,Fx,e=>{var r;if(!this.open)return;const n=(r=this.shadowRoot)==null?void 0:r.querySelector("#content");if(!n)return;const i=e.composedPath(),a=i[0]===this||i.includes(this),o=i.includes(n);a&&!o&&(this.open=!1)}),bW(this,Ux,e=>{if(!this.open)return;const r=e.shiftKey&&(e.key==="/"||e.key==="?");(e.key==="Escape"||r)&&!e.ctrlKey&&!e.altKey&&!e.metaKey&&(this.open=!1,e.preventDefault(),e.stopPropagation())})}connectedCallback(){super.connectedCallback(),this.open&&(this.addEventListener("click",s0(this,Fx)),document.addEventListener("keydown",s0(this,Ux)))}disconnectedCallback(){this.removeEventListener("click",s0(this,Fx)),document.removeEventListener("keydown",s0(this,Ux))}attributeChangedCallback(e,r,n){super.attributeChangedCallback(e,r,n),e==="open"&&(this.open?(this.addEventListener("click",s0(this,Fx)),document.addEventListener("keydown",s0(this,Ux))):(this.removeEventListener("click",s0(this,Fx)),document.removeEventListener("keydown",s0(this,Ux))))}}Fx=new WeakMap;Ux=new WeakMap;doe.getSlotTemplateHTML=zGe;sr.customElements.get("media-keyboard-shortcuts-dialog")||sr.customElements.define("media-keyboard-shortcuts-dialog",doe);var hoe=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},KGe=(t,e,r)=>(hoe(t,e,"read from private field"),e.get(t)),GGe=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},WGe=(t,e,r,n)=>(hoe(t,e,"write to private field"),e.set(t,r),r),Gj;const YGe=`<svg aria-hidden="true" viewBox="0 0 26 24">
  <path d="M16 3v2.5h3.5V9H22V3h-6ZM4 9h2.5V5.5H10V3H4v6Zm15.5 9.5H16V21h6v-6h-2.5v3.5ZM6.5 15H4v6h6v-2.5H6.5V15Z"/>
</svg>`,qGe=`<svg aria-hidden="true" viewBox="0 0 26 24">
  <path d="M18.5 6.5V3H16v6h6V6.5h-3.5ZM16 21h2.5v-3.5H22V15h-6v6ZM4 17.5h3.5V21H10v-6H4v2.5Zm3.5-11H4V9h6V3H7.5v3.5Z"/>
</svg>`;function XGe(t){return`
    <style>
      :host([${gt.MEDIA_IS_FULLSCREEN}]) slot[name=icon] slot:not([name=exit]) {
        display: none !important;
      }

      
      :host(:not([${gt.MEDIA_IS_FULLSCREEN}])) slot[name=icon] slot:not([name=enter]) {
        display: none !important;
      }

      :host([${gt.MEDIA_IS_FULLSCREEN}]) slot[name=tooltip-enter],
      :host(:not([${gt.MEDIA_IS_FULLSCREEN}])) slot[name=tooltip-exit] {
        display: none;
      }
    </style>

    <slot name="icon">
      <slot name="enter">${YGe}</slot>
      <slot name="exit">${qGe}</slot>
    </slot>
  `}function ZGe(){return`
    <slot name="tooltip-enter">${Ai("Enter fullscreen mode")}</slot>
    <slot name="tooltip-exit">${Ai("Exit fullscreen mode")}</slot>
  `}const wW=t=>{const e=t.mediaIsFullscreen?Ai("exit fullscreen mode"):Ai("enter fullscreen mode");t.setAttribute("aria-label",e)};class C6 extends xd{constructor(){super(...arguments),GGe(this,Gj,null)}static get observedAttributes(){return[...super.observedAttributes,gt.MEDIA_IS_FULLSCREEN,gt.MEDIA_FULLSCREEN_UNAVAILABLE]}connectedCallback(){super.connectedCallback(),wW(this)}attributeChangedCallback(e,r,n){super.attributeChangedCallback(e,r,n),e===gt.MEDIA_IS_FULLSCREEN&&wW(this)}get mediaFullscreenUnavailable(){return Cl(this,gt.MEDIA_FULLSCREEN_UNAVAILABLE)}set mediaFullscreenUnavailable(e){Nl(this,gt.MEDIA_FULLSCREEN_UNAVAILABLE,e)}get mediaIsFullscreen(){return Oa(this,gt.MEDIA_IS_FULLSCREEN)}set mediaIsFullscreen(e){Ra(this,gt.MEDIA_IS_FULLSCREEN,e)}handleClick(e){WGe(this,Gj,e);const r=KGe(this,Gj)instanceof PointerEvent,n=this.mediaIsFullscreen?new sr.CustomEvent(Gn.MEDIA_EXIT_FULLSCREEN_REQUEST,{composed:!0,bubbles:!0}):new sr.CustomEvent(Gn.MEDIA_ENTER_FULLSCREEN_REQUEST,{composed:!0,bubbles:!0,detail:r});this.dispatchEvent(n)}}Gj=new WeakMap;C6.getSlotTemplateHTML=XGe;C6.getTooltipContentHTML=ZGe;sr.customElements.get("media-fullscreen-button")||sr.customElements.define("media-fullscreen-button",C6);const{MEDIA_TIME_IS_LIVE:Wj,MEDIA_PAUSED:E2}=gt,{MEDIA_SEEK_TO_LIVE_REQUEST:JGe,MEDIA_PLAY_REQUEST:eWe}=Gn,tWe='<svg viewBox="0 0 6 12"><circle cx="3" cy="6" r="2"></circle></svg>';function rWe(t){return`
    <style>
      :host { --media-tooltip-display: none; }
      
      slot[name=indicator] > *,
      :host ::slotted([slot=indicator]) {
        
        min-width: auto;
        fill: var(--media-live-button-icon-color, rgb(140, 140, 140));
        color: var(--media-live-button-icon-color, rgb(140, 140, 140));
      }

      :host([${Wj}]:not([${E2}])) slot[name=indicator] > *,
      :host([${Wj}]:not([${E2}])) ::slotted([slot=indicator]) {
        fill: var(--media-live-button-indicator-color, rgb(255, 0, 0));
        color: var(--media-live-button-indicator-color, rgb(255, 0, 0));
      }

      :host([${Wj}]:not([${E2}])) {
        cursor: var(--media-cursor, not-allowed);
      }

      slot[name=text]{
        text-transform: uppercase;
      }

    </style>

    <slot name="indicator">${tWe}</slot>
    
    <slot name="spacer">&nbsp;</slot><slot name="text">${Ai("live")}</slot>
  `}const _W=t=>{var e;const r=t.mediaPaused||!t.mediaTimeIsLive,n=Ai(r?"seek to live":"playing live");t.setAttribute("aria-label",n);const i=(e=t.shadowRoot)==null?void 0:e.querySelector('slot[name="text"]');i&&(i.textContent=Ai("live")),r?t.removeAttribute("aria-disabled"):t.setAttribute("aria-disabled","true")};class foe extends xd{static get observedAttributes(){return[...super.observedAttributes,Wj,E2]}connectedCallback(){super.connectedCallback(),_W(this)}attributeChangedCallback(e,r,n){super.attributeChangedCallback(e,r,n),_W(this)}get mediaPaused(){return Oa(this,gt.MEDIA_PAUSED)}set mediaPaused(e){Ra(this,gt.MEDIA_PAUSED,e)}get mediaTimeIsLive(){return Oa(this,gt.MEDIA_TIME_IS_LIVE)}set mediaTimeIsLive(e){Ra(this,gt.MEDIA_TIME_IS_LIVE,e)}handleClick(){!this.mediaPaused&&this.mediaTimeIsLive||(this.dispatchEvent(new sr.CustomEvent(JGe,{composed:!0,bubbles:!0})),this.hasAttribute(E2)&&this.dispatchEvent(new sr.CustomEvent(eWe,{composed:!0,bubbles:!0})))}}foe.getSlotTemplateHTML=rWe;sr.customElements.get("media-live-button")||sr.customElements.define("media-live-button",foe);var moe=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},gw=(t,e,r)=>(moe(t,e,"read from private field"),r?r.call(t):e.get(t)),EW=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},vw=(t,e,r,n)=>(moe(t,e,"write to private field"),e.set(t,r),r),jA,Yj;const QS={LOADING_DELAY:"loadingdelay",NO_AUTOHIDE:"noautohide"},Aoe=500,nWe=`
<svg aria-hidden="true" viewBox="0 0 100 100">
  <path d="M73,50c0-12.7-10.3-23-23-23S27,37.3,27,50 M30.9,50c0-10.5,8.5-19.1,19.1-19.1S69.1,39.5,69.1,50">
    <animateTransform
       attributeName="transform"
       attributeType="XML"
       type="rotate"
       dur="1s"
       from="0 50 50"
       to="360 50 50"
       repeatCount="indefinite" />
  </path>
</svg>
`;function iWe(t){return`
    <style>
      :host {
        display: var(--media-control-display, var(--media-loading-indicator-display, inline-block));
        vertical-align: middle;
        box-sizing: border-box;
        --_loading-indicator-delay: var(--media-loading-indicator-transition-delay, ${Aoe}ms);
      }

      #status {
        color: rgba(0,0,0,0);
        width: 0px;
        height: 0px;
      }

      :host slot[name=icon] > *,
      :host ::slotted([slot=icon]) {
        opacity: var(--media-loading-indicator-opacity, 0);
        transition: opacity 0.15s;
      }

      :host([${gt.MEDIA_LOADING}]:not([${gt.MEDIA_PAUSED}])) slot[name=icon] > *,
      :host([${gt.MEDIA_LOADING}]:not([${gt.MEDIA_PAUSED}])) ::slotted([slot=icon]) {
        opacity: var(--media-loading-indicator-opacity, 1);
        transition: opacity 0.15s var(--_loading-indicator-delay);
      }

      :host #status {
        visibility: var(--media-loading-indicator-opacity, hidden);
        transition: visibility 0.15s;
      }

      :host([${gt.MEDIA_LOADING}]:not([${gt.MEDIA_PAUSED}])) #status {
        visibility: var(--media-loading-indicator-opacity, visible);
        transition: visibility 0.15s var(--_loading-indicator-delay);
      }

      svg, img, ::slotted(svg), ::slotted(img) {
        width: var(--media-loading-indicator-icon-width);
        height: var(--media-loading-indicator-icon-height, 100px);
        fill: var(--media-icon-color, var(--media-primary-color, rgb(238 238 238)));
        vertical-align: middle;
      }
    </style>

    <slot name="icon">${nWe}</slot>
    <div id="status" role="status" aria-live="polite">${Ai("media loading")}</div>
  `}class N6 extends sr.HTMLElement{constructor(){if(super(),EW(this,jA,void 0),EW(this,Yj,Aoe),!this.shadowRoot){this.attachShadow(this.constructor.shadowRootOptions);const e=Lf(this.attributes);this.shadowRoot.innerHTML=this.constructor.getTemplateHTML(e)}}static get observedAttributes(){return[Ao.MEDIA_CONTROLLER,gt.MEDIA_PAUSED,gt.MEDIA_LOADING,QS.LOADING_DELAY]}attributeChangedCallback(e,r,n){var i,a,o,c,u;e===QS.LOADING_DELAY&&r!==n?this.loadingDelay=Number(n):e===Ao.MEDIA_CONTROLLER&&(r&&((a=(i=gw(this,jA))==null?void 0:i.unassociateElement)==null||a.call(i,this),vw(this,jA,null)),n&&this.isConnected&&(vw(this,jA,(o=this.getRootNode())==null?void 0:o.getElementById(n)),(u=(c=gw(this,jA))==null?void 0:c.associateElement)==null||u.call(c,this)))}connectedCallback(){var e,r,n;const i=this.getAttribute(Ao.MEDIA_CONTROLLER);i&&(vw(this,jA,(e=this.getRootNode())==null?void 0:e.getElementById(i)),(n=(r=gw(this,jA))==null?void 0:r.associateElement)==null||n.call(r,this))}disconnectedCallback(){var e,r;(r=(e=gw(this,jA))==null?void 0:e.unassociateElement)==null||r.call(e,this),vw(this,jA,null)}get loadingDelay(){return gw(this,Yj)}set loadingDelay(e){vw(this,Yj,e);const{style:r}=Hu(this.shadowRoot,":host");r.setProperty("--_loading-indicator-delay",`var(--media-loading-indicator-transition-delay, ${e}ms)`)}get mediaPaused(){return Oa(this,gt.MEDIA_PAUSED)}set mediaPaused(e){Ra(this,gt.MEDIA_PAUSED,e)}get mediaLoading(){return Oa(this,gt.MEDIA_LOADING)}set mediaLoading(e){Ra(this,gt.MEDIA_LOADING,e)}get mediaController(){return Cl(this,Ao.MEDIA_CONTROLLER)}set mediaController(e){Nl(this,Ao.MEDIA_CONTROLLER,e)}get noAutohide(){return Oa(this,QS.NO_AUTOHIDE)}set noAutohide(e){Ra(this,QS.NO_AUTOHIDE,e)}}jA=new WeakMap;Yj=new WeakMap;N6.shadowRootOptions={mode:"open"};N6.getTemplateHTML=iWe;sr.customElements.get("media-loading-indicator")||sr.customElements.define("media-loading-indicator",N6);const sWe=`<svg aria-hidden="true" viewBox="0 0 24 24">
  <path d="M16.5 12A4.5 4.5 0 0 0 14 8v2.18l2.45 2.45a4.22 4.22 0 0 0 .05-.63Zm2.5 0a6.84 6.84 0 0 1-.54 2.64L20 16.15A8.8 8.8 0 0 0 21 12a9 9 0 0 0-7-8.77v2.06A7 7 0 0 1 19 12ZM4.27 3 3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25A6.92 6.92 0 0 1 14 18.7v2.06A9 9 0 0 0 17.69 19l2 2.05L21 19.73l-9-9L4.27 3ZM12 4 9.91 6.09 12 8.18V4Z"/>
</svg>`,SW=`<svg aria-hidden="true" viewBox="0 0 24 24">
  <path d="M3 9v6h4l5 5V4L7 9H3Zm13.5 3A4.5 4.5 0 0 0 14 8v8a4.47 4.47 0 0 0 2.5-4Z"/>
</svg>`,aWe=`<svg aria-hidden="true" viewBox="0 0 24 24">
  <path d="M3 9v6h4l5 5V4L7 9H3Zm13.5 3A4.5 4.5 0 0 0 14 8v8a4.47 4.47 0 0 0 2.5-4ZM14 3.23v2.06a7 7 0 0 1 0 13.42v2.06a9 9 0 0 0 0-17.54Z"/>
</svg>`;function oWe(t){return`
    <style>
      :host(:not([${gt.MEDIA_VOLUME_LEVEL}])) slot[name=icon] slot:not([name=high]),
      :host([${gt.MEDIA_VOLUME_LEVEL}=high]) slot[name=icon] slot:not([name=high]) {
        display: none !important;
      }

      :host([${gt.MEDIA_VOLUME_LEVEL}=off]) slot[name=icon] slot:not([name=off]) {
        display: none !important;
      }

      :host([${gt.MEDIA_VOLUME_LEVEL}=low]) slot[name=icon] slot:not([name=low]) {
        display: none !important;
      }

      :host([${gt.MEDIA_VOLUME_LEVEL}=medium]) slot[name=icon] slot:not([name=medium]) {
        display: none !important;
      }

      :host(:not([${gt.MEDIA_VOLUME_LEVEL}=off])) slot[name=tooltip-unmute],
      :host([${gt.MEDIA_VOLUME_LEVEL}=off]) slot[name=tooltip-mute] {
        display: none;
      }
    </style>

    <slot name="icon">
      <slot name="off">${sWe}</slot>
      <slot name="low">${SW}</slot>
      <slot name="medium">${SW}</slot>
      <slot name="high">${aWe}</slot>
    </slot>
  `}function lWe(){return`
    <slot name="tooltip-mute">${Ai("Mute")}</slot>
    <slot name="tooltip-unmute">${Ai("Unmute")}</slot>
  `}const jW=t=>{const e=t.mediaVolumeLevel==="off",r=Ai(e?"unmute":"mute");t.setAttribute("aria-label",r)};class k6 extends xd{static get observedAttributes(){return[...super.observedAttributes,gt.MEDIA_VOLUME_LEVEL]}connectedCallback(){super.connectedCallback(),jW(this)}attributeChangedCallback(e,r,n){super.attributeChangedCallback(e,r,n),e===gt.MEDIA_VOLUME_LEVEL&&jW(this)}get mediaVolumeLevel(){return Cl(this,gt.MEDIA_VOLUME_LEVEL)}set mediaVolumeLevel(e){Nl(this,gt.MEDIA_VOLUME_LEVEL,e)}handleClick(){const e=this.mediaVolumeLevel==="off"?Gn.MEDIA_UNMUTE_REQUEST:Gn.MEDIA_MUTE_REQUEST;this.dispatchEvent(new sr.CustomEvent(e,{composed:!0,bubbles:!0}))}}k6.getSlotTemplateHTML=oWe;k6.getTooltipContentHTML=lWe;sr.customElements.get("media-mute-button")||sr.customElements.define("media-mute-button",k6);const TW=`<svg aria-hidden="true" viewBox="0 0 28 24">
  <path d="M24 3H4a1 1 0 0 0-1 1v16a1 1 0 0 0 1 1h20a1 1 0 0 0 1-1V4a1 1 0 0 0-1-1Zm-1 16H5V5h18v14Zm-3-8h-7v5h7v-5Z"/>
</svg>`;function cWe(t){return`
    <style>
      :host([${gt.MEDIA_IS_PIP}]) slot[name=icon] slot:not([name=exit]) {
        display: none !important;
      }

      :host(:not([${gt.MEDIA_IS_PIP}])) slot[name=icon] slot:not([name=enter]) {
        display: none !important;
      }

      :host([${gt.MEDIA_IS_PIP}]) slot[name=tooltip-enter],
      :host(:not([${gt.MEDIA_IS_PIP}])) slot[name=tooltip-exit] {
        display: none;
      }
    </style>

    <slot name="icon">
      <slot name="enter">${TW}</slot>
      <slot name="exit">${TW}</slot>
    </slot>
  `}function uWe(){return`
    <slot name="tooltip-enter">${Ai("Enter picture in picture mode")}</slot>
    <slot name="tooltip-exit">${Ai("Exit picture in picture mode")}</slot>
  `}const CW=t=>{const e=t.mediaIsPip?Ai("exit picture in picture mode"):Ai("enter picture in picture mode");t.setAttribute("aria-label",e)};class L6 extends xd{static get observedAttributes(){return[...super.observedAttributes,gt.MEDIA_IS_PIP,gt.MEDIA_PIP_UNAVAILABLE]}connectedCallback(){super.connectedCallback(),CW(this)}attributeChangedCallback(e,r,n){super.attributeChangedCallback(e,r,n),e===gt.MEDIA_IS_PIP&&CW(this)}get mediaPipUnavailable(){return Cl(this,gt.MEDIA_PIP_UNAVAILABLE)}set mediaPipUnavailable(e){Nl(this,gt.MEDIA_PIP_UNAVAILABLE,e)}get mediaIsPip(){return Oa(this,gt.MEDIA_IS_PIP)}set mediaIsPip(e){Ra(this,gt.MEDIA_IS_PIP,e)}handleClick(){const e=this.mediaIsPip?Gn.MEDIA_EXIT_PIP_REQUEST:Gn.MEDIA_ENTER_PIP_REQUEST;this.dispatchEvent(new sr.CustomEvent(e,{composed:!0,bubbles:!0}))}}L6.getSlotTemplateHTML=cWe;L6.getTooltipContentHTML=uWe;sr.customElements.get("media-pip-button")||sr.customElements.define("media-pip-button",L6);var dWe=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},bx=(t,e,r)=>(dWe(t,e,"read from private field"),r?r.call(t):e.get(t)),hWe=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},d0;const iB={RATES:"rates"},poe=[1,1.2,1.5,1.7,2],Ab=1;function fWe(t){return`
    <style>
      :host {
        min-width: 5ch;
        padding: var(--media-button-padding, var(--media-control-padding, 10px 5px));
      }
    </style>
    <slot name="icon">${t.mediaplaybackrate||Ab}x</slot>
  `}function mWe(){return Ai("Playback rate")}class I6 extends xd{constructor(){var e;super(),hWe(this,d0,new m6(this,iB.RATES,{defaultValue:poe})),this.container=this.shadowRoot.querySelector('slot[name="icon"]'),this.container.innerHTML=`${(e=this.mediaPlaybackRate)!=null?e:Ab}x`}static get observedAttributes(){return[...super.observedAttributes,gt.MEDIA_PLAYBACK_RATE,iB.RATES]}attributeChangedCallback(e,r,n){if(super.attributeChangedCallback(e,r,n),e===iB.RATES&&(bx(this,d0).value=n),e===gt.MEDIA_PLAYBACK_RATE){const i=n?+n:Number.NaN,a=Number.isNaN(i)?Ab:i;this.container.innerHTML=`${a}x`,this.setAttribute("aria-label",Ai("Playback rate {playbackRate}",{playbackRate:a}))}}get rates(){return bx(this,d0)}set rates(e){e?Array.isArray(e)?bx(this,d0).value=e.join(" "):typeof e=="string"&&(bx(this,d0).value=e):bx(this,d0).value=""}get mediaPlaybackRate(){return Tl(this,gt.MEDIA_PLAYBACK_RATE,Ab)}set mediaPlaybackRate(e){Dc(this,gt.MEDIA_PLAYBACK_RATE,e)}handleClick(){var e,r;const n=Array.from(bx(this,d0).values(),o=>+o).sort((o,c)=>o-c),i=(r=(e=n.find(o=>o>this.mediaPlaybackRate))!=null?e:n[0])!=null?r:Ab,a=new sr.CustomEvent(Gn.MEDIA_PLAYBACK_RATE_REQUEST,{composed:!0,bubbles:!0,detail:i});this.dispatchEvent(a)}}d0=new WeakMap;I6.getSlotTemplateHTML=fWe;I6.getTooltipContentHTML=mWe;sr.customElements.get("media-playback-rate-button")||sr.customElements.define("media-playback-rate-button",I6);const AWe=`<svg aria-hidden="true" viewBox="0 0 24 24">
  <path d="m6 21 15-9L6 3v18Z"/>
</svg>`,pWe=`<svg aria-hidden="true" viewBox="0 0 24 24">
  <path d="M6 20h4V4H6v16Zm8-16v16h4V4h-4Z"/>
</svg>`;function gWe(t){return`
    <style>
      :host([${gt.MEDIA_PAUSED}]) slot[name=pause],
      :host(:not([${gt.MEDIA_PAUSED}])) slot[name=play] {
        display: none !important;
      }

      :host([${gt.MEDIA_PAUSED}]) slot[name=tooltip-pause],
      :host(:not([${gt.MEDIA_PAUSED}])) slot[name=tooltip-play] {
        display: none;
      }
    </style>

    <slot name="icon">
      <slot name="play">${AWe}</slot>
      <slot name="pause">${pWe}</slot>
    </slot>
  `}function vWe(){return`
    <slot name="tooltip-play">${Ai("Play")}</slot>
    <slot name="tooltip-pause">${Ai("Pause")}</slot>
  `}const NW=t=>{const e=t.mediaPaused?Ai("play"):Ai("pause");t.setAttribute("aria-label",e)};class B6 extends xd{static get observedAttributes(){return[...super.observedAttributes,gt.MEDIA_PAUSED,gt.MEDIA_ENDED]}connectedCallback(){super.connectedCallback(),NW(this)}attributeChangedCallback(e,r,n){super.attributeChangedCallback(e,r,n),(e===gt.MEDIA_PAUSED||e===gt.MEDIA_LANG)&&NW(this)}get mediaPaused(){return Oa(this,gt.MEDIA_PAUSED)}set mediaPaused(e){Ra(this,gt.MEDIA_PAUSED,e)}handleClick(){const e=this.mediaPaused?Gn.MEDIA_PLAY_REQUEST:Gn.MEDIA_PAUSE_REQUEST;this.dispatchEvent(new sr.CustomEvent(e,{composed:!0,bubbles:!0}))}}B6.getSlotTemplateHTML=gWe;B6.getTooltipContentHTML=vWe;sr.customElements.get("media-play-button")||sr.customElements.define("media-play-button",B6);const AA={PLACEHOLDER_SRC:"placeholdersrc",SRC:"src"};function yWe(t){return`
    <style>
      :host {
        pointer-events: none;
        display: var(--media-poster-image-display, inline-block);
        box-sizing: border-box;
      }

      img {
        max-width: 100%;
        max-height: 100%;
        min-width: 100%;
        min-height: 100%;
        background-repeat: no-repeat;
        background-position: var(--media-poster-image-background-position, var(--media-object-position, center));
        background-size: var(--media-poster-image-background-size, var(--media-object-fit, contain));
        object-fit: var(--media-object-fit, contain);
        object-position: var(--media-object-position, center);
      }
    </style>

    <img part="poster img" aria-hidden="true" id="image"/>
  `}const xWe=t=>{t.style.removeProperty("background-image")},bWe=(t,e)=>{t.style["background-image"]=`url('${e}')`};class P6 extends sr.HTMLElement{static get observedAttributes(){return[AA.PLACEHOLDER_SRC,AA.SRC]}constructor(){if(super(),!this.shadowRoot){this.attachShadow(this.constructor.shadowRootOptions);const e=Lf(this.attributes);this.shadowRoot.innerHTML=this.constructor.getTemplateHTML(e)}this.image=this.shadowRoot.querySelector("#image")}attributeChangedCallback(e,r,n){e===AA.SRC&&(n==null?this.image.removeAttribute(AA.SRC):this.image.setAttribute(AA.SRC,n)),e===AA.PLACEHOLDER_SRC&&(n==null?xWe(this.image):bWe(this.image,n))}get placeholderSrc(){return Cl(this,AA.PLACEHOLDER_SRC)}set placeholderSrc(e){Nl(this,AA.SRC,e)}get src(){return Cl(this,AA.SRC)}set src(e){Nl(this,AA.SRC,e)}}P6.shadowRootOptions={mode:"open"};P6.getTemplateHTML=yWe;sr.customElements.get("media-poster-image")||sr.customElements.define("media-poster-image",P6);var goe=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},wWe=(t,e,r)=>(goe(t,e,"read from private field"),r?r.call(t):e.get(t)),_We=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},EWe=(t,e,r,n)=>(goe(t,e,"write to private field"),e.set(t,r),r),qj;class SWe extends ev{constructor(){super(),_We(this,qj,void 0),EWe(this,qj,this.shadowRoot.querySelector("slot"))}static get observedAttributes(){return[...super.observedAttributes,gt.MEDIA_PREVIEW_CHAPTER,gt.MEDIA_LANG]}attributeChangedCallback(e,r,n){if(super.attributeChangedCallback(e,r,n),(e===gt.MEDIA_PREVIEW_CHAPTER||e===gt.MEDIA_LANG)&&n!==r&&n!=null)if(wWe(this,qj).textContent=n,n!==""){const i=Ai("chapter: {chapterName}",{chapterName:n});this.setAttribute("aria-valuetext",i)}else this.removeAttribute("aria-valuetext")}get mediaPreviewChapter(){return Cl(this,gt.MEDIA_PREVIEW_CHAPTER)}set mediaPreviewChapter(e){Nl(this,gt.MEDIA_PREVIEW_CHAPTER,e)}}qj=new WeakMap;sr.customElements.get("media-preview-chapter-display")||sr.customElements.define("media-preview-chapter-display",SWe);var voe=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},zS=(t,e,r)=>(voe(t,e,"read from private field"),r?r.call(t):e.get(t)),jWe=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},VS=(t,e,r,n)=>(voe(t,e,"write to private field"),e.set(t,r),r),TA;function TWe(t){return`
    <style>
      :host {
        box-sizing: border-box;
        display: var(--media-control-display, var(--media-preview-thumbnail-display, inline-block));
        overflow: hidden;
      }

      img {
        display: none;
        position: relative;
      }
    </style>
    <img crossorigin loading="eager" decoding="async">
  `}class hk extends sr.HTMLElement{constructor(){if(super(),jWe(this,TA,void 0),!this.shadowRoot){this.attachShadow(this.constructor.shadowRootOptions);const e=Lf(this.attributes);this.shadowRoot.innerHTML=this.constructor.getTemplateHTML(e)}}static get observedAttributes(){return[Ao.MEDIA_CONTROLLER,gt.MEDIA_PREVIEW_IMAGE,gt.MEDIA_PREVIEW_COORDS]}connectedCallback(){var e,r,n;const i=this.getAttribute(Ao.MEDIA_CONTROLLER);i&&(VS(this,TA,(e=this.getRootNode())==null?void 0:e.getElementById(i)),(n=(r=zS(this,TA))==null?void 0:r.associateElement)==null||n.call(r,this))}disconnectedCallback(){var e,r;(r=(e=zS(this,TA))==null?void 0:e.unassociateElement)==null||r.call(e,this),VS(this,TA,null)}attributeChangedCallback(e,r,n){var i,a,o,c,u;[gt.MEDIA_PREVIEW_IMAGE,gt.MEDIA_PREVIEW_COORDS].includes(e)&&this.update(),e===Ao.MEDIA_CONTROLLER&&(r&&((a=(i=zS(this,TA))==null?void 0:i.unassociateElement)==null||a.call(i,this),VS(this,TA,null)),n&&this.isConnected&&(VS(this,TA,(o=this.getRootNode())==null?void 0:o.getElementById(n)),(u=(c=zS(this,TA))==null?void 0:c.associateElement)==null||u.call(c,this)))}get mediaPreviewImage(){return Cl(this,gt.MEDIA_PREVIEW_IMAGE)}set mediaPreviewImage(e){Nl(this,gt.MEDIA_PREVIEW_IMAGE,e)}get mediaPreviewCoords(){const e=this.getAttribute(gt.MEDIA_PREVIEW_COORDS);if(e)return e.split(/\s+/).map(r=>+r)}set mediaPreviewCoords(e){if(!e){this.removeAttribute(gt.MEDIA_PREVIEW_COORDS);return}this.setAttribute(gt.MEDIA_PREVIEW_COORDS,e.join(" "))}update(){const e=this.mediaPreviewCoords,r=this.mediaPreviewImage;if(!(e&&r))return;const[n,i,a,o]=e,c=r.split("#")[0],u=getComputedStyle(this),{maxWidth:l,maxHeight:d,minWidth:f,minHeight:m}=u,p=Math.min(parseInt(l)/a,parseInt(d)/o),g=Math.max(parseInt(f)/a,parseInt(m)/o),y=p<1,x=y?p:g>1?g:1,{style:w}=Hu(this.shadowRoot,":host"),_=Hu(this.shadowRoot,"img").style,E=this.shadowRoot.querySelector("img"),N=y?"min":"max";w.setProperty(`${N}-width`,"initial","important"),w.setProperty(`${N}-height`,"initial","important"),w.width=`${a*x}px`,w.height=`${o*x}px`;const C=()=>{_.width=`${this.imgWidth*x}px`,_.height=`${this.imgHeight*x}px`,_.display="block"};E.src!==c&&(E.onload=()=>{this.imgWidth=E.naturalWidth,this.imgHeight=E.naturalHeight,C()},E.src=c,C()),C(),_.transform=`translate(-${n*x}px, -${i*x}px)`}}TA=new WeakMap;hk.shadowRootOptions={mode:"open"};hk.getTemplateHTML=TWe;sr.customElements.get("media-preview-thumbnail")||sr.customElements.define("media-preview-thumbnail",hk);var kW=hk,yoe=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},LW=(t,e,r)=>(yoe(t,e,"read from private field"),r?r.call(t):e.get(t)),CWe=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},NWe=(t,e,r,n)=>(yoe(t,e,"write to private field"),e.set(t,r),r),Gw;class kWe extends ev{constructor(){super(),CWe(this,Gw,void 0),NWe(this,Gw,this.shadowRoot.querySelector("slot")),LW(this,Gw).textContent=M0(0)}static get observedAttributes(){return[...super.observedAttributes,gt.MEDIA_PREVIEW_TIME]}attributeChangedCallback(e,r,n){super.attributeChangedCallback(e,r,n),e===gt.MEDIA_PREVIEW_TIME&&n!=null&&(LW(this,Gw).textContent=M0(parseFloat(n)))}get mediaPreviewTime(){return Tl(this,gt.MEDIA_PREVIEW_TIME)}set mediaPreviewTime(e){Dc(this,gt.MEDIA_PREVIEW_TIME,e)}}Gw=new WeakMap;sr.customElements.get("media-preview-time-display")||sr.customElements.define("media-preview-time-display",kWe);const wx={SEEK_OFFSET:"seekoffset"},sB=30,LWe=t=>`
  <svg aria-hidden="true" viewBox="0 0 20 24">
    <defs>
      <style>.text{font-size:8px;font-family:Arial-BoldMT, Arial;font-weight:700;}</style>
    </defs>
    <text class="text value" transform="translate(2.18 19.87)">${t}</text>
    <path d="M10 6V3L4.37 7 10 10.94V8a5.54 5.54 0 0 1 1.9 10.48v2.12A7.5 7.5 0 0 0 10 6Z"/>
  </svg>`;function IWe(t,e){return`
    <slot name="icon">${LWe(e.seekOffset)}</slot>
  `}function BWe(){return Ai("Seek backward")}const PWe=0;class O6 extends xd{static get observedAttributes(){return[...super.observedAttributes,gt.MEDIA_CURRENT_TIME,wx.SEEK_OFFSET]}connectedCallback(){super.connectedCallback(),this.seekOffset=Tl(this,wx.SEEK_OFFSET,sB)}attributeChangedCallback(e,r,n){super.attributeChangedCallback(e,r,n),e===wx.SEEK_OFFSET&&(this.seekOffset=Tl(this,wx.SEEK_OFFSET,sB))}get seekOffset(){return Tl(this,wx.SEEK_OFFSET,sB)}set seekOffset(e){Dc(this,wx.SEEK_OFFSET,e),this.setAttribute("aria-label",Ai("seek back {seekOffset} seconds",{seekOffset:this.seekOffset})),Sae(jae(this,"icon"),this.seekOffset)}get mediaCurrentTime(){return Tl(this,gt.MEDIA_CURRENT_TIME,PWe)}set mediaCurrentTime(e){Dc(this,gt.MEDIA_CURRENT_TIME,e)}handleClick(){const e=Math.max(this.mediaCurrentTime-this.seekOffset,0),r=new sr.CustomEvent(Gn.MEDIA_SEEK_REQUEST,{composed:!0,bubbles:!0,detail:e});this.dispatchEvent(r)}}O6.getSlotTemplateHTML=IWe;O6.getTooltipContentHTML=BWe;sr.customElements.get("media-seek-backward-button")||sr.customElements.define("media-seek-backward-button",O6);const _x={SEEK_OFFSET:"seekoffset"},aB=30,OWe=t=>`
  <svg aria-hidden="true" viewBox="0 0 20 24">
    <defs>
      <style>.text{font-size:8px;font-family:Arial-BoldMT, Arial;font-weight:700;}</style>
    </defs>
    <text class="text value" transform="translate(8.9 19.87)">${t}</text>
    <path d="M10 6V3l5.61 4L10 10.94V8a5.54 5.54 0 0 0-1.9 10.48v2.12A7.5 7.5 0 0 1 10 6Z"/>
  </svg>`;function RWe(t,e){return`
    <slot name="icon">${OWe(e.seekOffset)}</slot>
  `}function DWe(){return Ai("Seek forward")}const MWe=0;class R6 extends xd{static get observedAttributes(){return[...super.observedAttributes,gt.MEDIA_CURRENT_TIME,_x.SEEK_OFFSET]}connectedCallback(){super.connectedCallback(),this.seekOffset=Tl(this,_x.SEEK_OFFSET,aB)}attributeChangedCallback(e,r,n){super.attributeChangedCallback(e,r,n),e===_x.SEEK_OFFSET&&(this.seekOffset=Tl(this,_x.SEEK_OFFSET,aB))}get seekOffset(){return Tl(this,_x.SEEK_OFFSET,aB)}set seekOffset(e){Dc(this,_x.SEEK_OFFSET,e),this.setAttribute("aria-label",Ai("seek forward {seekOffset} seconds",{seekOffset:this.seekOffset})),Sae(jae(this,"icon"),this.seekOffset)}get mediaCurrentTime(){return Tl(this,gt.MEDIA_CURRENT_TIME,MWe)}set mediaCurrentTime(e){Dc(this,gt.MEDIA_CURRENT_TIME,e)}handleClick(){const e=this.mediaCurrentTime+this.seekOffset,r=new sr.CustomEvent(Gn.MEDIA_SEEK_REQUEST,{composed:!0,bubbles:!0,detail:e});this.dispatchEvent(r)}}R6.getSlotTemplateHTML=RWe;R6.getTooltipContentHTML=DWe;sr.customElements.get("media-seek-forward-button")||sr.customElements.define("media-seek-forward-button",R6);var xoe=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},oB=(t,e,r)=>(xoe(t,e,"read from private field"),r?r.call(t):e.get(t)),FWe=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},UWe=(t,e,r,n)=>(xoe(t,e,"write to private field"),e.set(t,r),r),$x;const Iv={REMAINING:"remaining",SHOW_DURATION:"showduration",NO_TOGGLE:"notoggle"},IW=[...Object.values(Iv),gt.MEDIA_CURRENT_TIME,gt.MEDIA_DURATION,gt.MEDIA_SEEKABLE],BW=["Enter"," "],$We="&nbsp;/&nbsp;",w3=(t,{timesSep:e=$We}={})=>{var r,n;const i=(r=t.mediaCurrentTime)!=null?r:0,[,a]=(n=t.mediaSeekable)!=null?n:[];let o=0;Number.isFinite(t.mediaDuration)?o=t.mediaDuration:Number.isFinite(a)&&(o=a);const c=t.remaining?M0(0-(o-i)):M0(i);return t.showDuration?`${c}${e}${M0(o)}`:c},HWe="video not loaded, unknown time.",QWe=t=>{var e;const r=t.mediaCurrentTime,[,n]=(e=t.mediaSeekable)!=null?e:[];let i=null;if(Number.isFinite(t.mediaDuration)?i=t.mediaDuration:Number.isFinite(n)&&(i=n),r==null||i===null){t.setAttribute("aria-valuetext",HWe);return}const a=t.remaining?w2(0-(i-r)):w2(r);if(!t.showDuration){t.setAttribute("aria-valuetext",a);return}const o=w2(i),c=`${a} of ${o}`;t.setAttribute("aria-valuetext",c)};function zWe(t,e){return`
    <slot>${w3(e)}</slot>
  `}class boe extends ev{constructor(){super(),FWe(this,$x,void 0),UWe(this,$x,this.shadowRoot.querySelector("slot")),oB(this,$x).innerHTML=`${w3(this)}`}static get observedAttributes(){return[...super.observedAttributes,...IW,"disabled"]}connectedCallback(){const{style:e}=Hu(this.shadowRoot,":host(:hover:not([notoggle]))");e.setProperty("cursor","var(--media-cursor, pointer)"),e.setProperty("background","var(--media-control-hover-background, rgba(50 50 70 / .7))"),this.hasAttribute("disabled")||this.enable(),this.setAttribute("role","progressbar"),this.setAttribute("aria-label",Ai("playback time"));const r=n=>{const{key:i}=n;if(!BW.includes(i)){this.removeEventListener("keyup",r);return}this.toggleTimeDisplay()};this.addEventListener("keydown",n=>{const{metaKey:i,altKey:a,key:o}=n;if(i||a||!BW.includes(o)){this.removeEventListener("keyup",r);return}this.addEventListener("keyup",r)}),this.addEventListener("click",this.toggleTimeDisplay),super.connectedCallback()}toggleTimeDisplay(){this.noToggle||(this.hasAttribute("remaining")?this.removeAttribute("remaining"):this.setAttribute("remaining",""))}disconnectedCallback(){this.disable(),super.disconnectedCallback()}attributeChangedCallback(e,r,n){IW.includes(e)?this.update():e==="disabled"&&n!==r&&(n==null?this.enable():this.disable()),super.attributeChangedCallback(e,r,n)}enable(){this.tabIndex=0}disable(){this.tabIndex=-1}get remaining(){return Oa(this,Iv.REMAINING)}set remaining(e){Ra(this,Iv.REMAINING,e)}get showDuration(){return Oa(this,Iv.SHOW_DURATION)}set showDuration(e){Ra(this,Iv.SHOW_DURATION,e)}get noToggle(){return Oa(this,Iv.NO_TOGGLE)}set noToggle(e){Ra(this,Iv.NO_TOGGLE,e)}get mediaDuration(){return Tl(this,gt.MEDIA_DURATION)}set mediaDuration(e){Dc(this,gt.MEDIA_DURATION,e)}get mediaCurrentTime(){return Tl(this,gt.MEDIA_CURRENT_TIME)}set mediaCurrentTime(e){Dc(this,gt.MEDIA_CURRENT_TIME,e)}get mediaSeekable(){const e=this.getAttribute(gt.MEDIA_SEEKABLE);if(e)return e.split(":").map(r=>+r)}set mediaSeekable(e){if(e==null){this.removeAttribute(gt.MEDIA_SEEKABLE);return}this.setAttribute(gt.MEDIA_SEEKABLE,e.join(":"))}update(){const e=w3(this);QWe(this),e!==oB(this,$x).innerHTML&&(oB(this,$x).innerHTML=e)}}$x=new WeakMap;boe.getSlotTemplateHTML=zWe;sr.customElements.get("media-time-display")||sr.customElements.define("media-time-display",boe);var woe=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},ld=(t,e,r)=>(woe(t,e,"read from private field"),e.get(t)),pA=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},uf=(t,e,r,n)=>(woe(t,e,"write to private field"),e.set(t,r),r),VWe=(t,e,r,n)=>({set _(i){uf(t,e,i)},get _(){return ld(t,e)}}),Hx,Xj,Qx,Ww,Zj,Jj,eT,zx,Bv,tT;class KWe{constructor(e,r,n){pA(this,Hx,void 0),pA(this,Xj,void 0),pA(this,Qx,void 0),pA(this,Ww,void 0),pA(this,Zj,void 0),pA(this,Jj,void 0),pA(this,eT,void 0),pA(this,zx,void 0),pA(this,Bv,0),pA(this,tT,(i=performance.now())=>{uf(this,Bv,requestAnimationFrame(ld(this,tT))),uf(this,Ww,performance.now()-ld(this,Qx));const a=1e3/this.fps;if(ld(this,Ww)>a){uf(this,Qx,i-ld(this,Ww)%a);const o=1e3/((i-ld(this,Xj))/++VWe(this,Zj)._),c=(i-ld(this,Jj))/1e3/this.duration;let u=ld(this,eT)+c*this.playbackRate;u-ld(this,Hx).valueAsNumber>0?uf(this,zx,this.playbackRate/this.duration/o):(uf(this,zx,.995*ld(this,zx)),u=ld(this,Hx).valueAsNumber+ld(this,zx)),this.callback(u)}}),uf(this,Hx,e),this.callback=r,this.fps=n}start(){ld(this,Bv)===0&&(uf(this,Qx,performance.now()),uf(this,Xj,ld(this,Qx)),uf(this,Zj,0),ld(this,tT).call(this))}stop(){ld(this,Bv)!==0&&(cancelAnimationFrame(ld(this,Bv)),uf(this,Bv,0))}update({start:e,duration:r,playbackRate:n}){const i=e-ld(this,Hx).valueAsNumber,a=Math.abs(r-this.duration);(i>0||i<-.03||a>=.5)&&this.callback(e),uf(this,eT,e),uf(this,Jj,performance.now()),this.duration=r,this.playbackRate=n}}Hx=new WeakMap;Xj=new WeakMap;Qx=new WeakMap;Ww=new WeakMap;Zj=new WeakMap;Jj=new WeakMap;eT=new WeakMap;zx=new WeakMap;Bv=new WeakMap;tT=new WeakMap;var D6=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},Jc=(t,e,r)=>(D6(t,e,"read from private field"),r?r.call(t):e.get(t)),Pu=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Kf=(t,e,r,n)=>(D6(t,e,"write to private field"),e.set(t,r),r),th=(t,e,r)=>(D6(t,e,"access private method"),r),Vx,uy,wN,S2,_N,rT,w_,__,Kx,Gx,Wx,Yw,M6,_oe,_3,EN,F6,SN,U6,jN,$6,E3,Eoe,E_,TN,S3,Soe;const GWe="video not loaded, unknown time.",WWe=t=>{const e=t.range,r=w2(+joe(t)),n=w2(+t.mediaSeekableEnd),i=r&&n?`${r} of ${n}`:GWe;e.setAttribute("aria-valuetext",i)};function YWe(t){return`
    <style>
      :host {
        --media-box-border-radius: 4px;
        --media-box-padding-left: 10px;
        --media-box-padding-right: 10px;
        --media-preview-border-radius: var(--media-box-border-radius);
        --media-box-arrow-offset: var(--media-box-border-radius);
        --_control-background: var(--media-control-background, var(--media-secondary-color, rgb(20 20 30 / .7)));
        --_preview-background: var(--media-preview-background, var(--_control-background));

        
        contain: layout;
      }

      #buffered {
        background: var(--media-time-range-buffered-color, rgb(255 255 255 / .4));
        position: absolute;
        height: 100%;
        will-change: width;
      }

      #preview-rail,
      #current-rail {
        width: 100%;
        position: absolute;
        left: 0;
        bottom: 100%;
        pointer-events: none;
        will-change: transform;
      }

      [part~="box"] {
        width: min-content;
        
        position: absolute;
        bottom: 100%;
        flex-direction: column;
        align-items: center;
        transform: translateX(-50%);
      }

      [part~="current-box"] {
        display: var(--media-current-box-display, var(--media-box-display, flex));
        margin: var(--media-current-box-margin, var(--media-box-margin, 0 0 5px));
        visibility: hidden;
      }

      [part~="preview-box"] {
        display: var(--media-preview-box-display, var(--media-box-display, flex));
        margin: var(--media-preview-box-margin, var(--media-box-margin, 0 0 5px));
        transition-property: var(--media-preview-transition-property, visibility, opacity);
        transition-duration: var(--media-preview-transition-duration-out, .25s);
        transition-delay: var(--media-preview-transition-delay-out, 0s);
        visibility: hidden;
        opacity: 0;
      }

      :host(:is([${gt.MEDIA_PREVIEW_IMAGE}], [${gt.MEDIA_PREVIEW_TIME}])[dragging]) [part~="preview-box"] {
        transition-duration: var(--media-preview-transition-duration-in, .5s);
        transition-delay: var(--media-preview-transition-delay-in, .25s);
        visibility: visible;
        opacity: 1;
      }

      @media (hover: hover) {
        :host(:is([${gt.MEDIA_PREVIEW_IMAGE}], [${gt.MEDIA_PREVIEW_TIME}]):hover) [part~="preview-box"] {
          transition-duration: var(--media-preview-transition-duration-in, .5s);
          transition-delay: var(--media-preview-transition-delay-in, .25s);
          visibility: visible;
          opacity: 1;
        }
      }

      media-preview-thumbnail,
      ::slotted(media-preview-thumbnail) {
        visibility: hidden;
        
        transition: visibility 0s .25s;
        transition-delay: calc(var(--media-preview-transition-delay-out, 0s) + var(--media-preview-transition-duration-out, .25s));
        background: var(--media-preview-thumbnail-background, var(--_preview-background));
        box-shadow: var(--media-preview-thumbnail-box-shadow, 0 0 4px rgb(0 0 0 / .2));
        max-width: var(--media-preview-thumbnail-max-width, 180px);
        max-height: var(--media-preview-thumbnail-max-height, 160px);
        min-width: var(--media-preview-thumbnail-min-width, 120px);
        min-height: var(--media-preview-thumbnail-min-height, 80px);
        border: var(--media-preview-thumbnail-border);
        border-radius: var(--media-preview-thumbnail-border-radius,
          var(--media-preview-border-radius) var(--media-preview-border-radius) 0 0);
      }

      :host([${gt.MEDIA_PREVIEW_IMAGE}][dragging]) media-preview-thumbnail,
      :host([${gt.MEDIA_PREVIEW_IMAGE}][dragging]) ::slotted(media-preview-thumbnail) {
        transition-delay: var(--media-preview-transition-delay-in, .25s);
        visibility: visible;
      }

      @media (hover: hover) {
        :host([${gt.MEDIA_PREVIEW_IMAGE}]:hover) media-preview-thumbnail,
        :host([${gt.MEDIA_PREVIEW_IMAGE}]:hover) ::slotted(media-preview-thumbnail) {
          transition-delay: var(--media-preview-transition-delay-in, .25s);
          visibility: visible;
        }

        :host([${gt.MEDIA_PREVIEW_TIME}]:hover) {
          --media-time-range-hover-display: block;
        }
      }

      media-preview-chapter-display,
      ::slotted(media-preview-chapter-display) {
        font-size: var(--media-font-size, 13px);
        line-height: 17px;
        min-width: 0;
        visibility: hidden;
        
        transition: min-width 0s, border-radius 0s, margin 0s, padding 0s, visibility 0s;
        transition-delay: calc(var(--media-preview-transition-delay-out, 0s) + var(--media-preview-transition-duration-out, .25s));
        background: var(--media-preview-chapter-background, var(--_preview-background));
        border-radius: var(--media-preview-chapter-border-radius,
          var(--media-preview-border-radius) var(--media-preview-border-radius)
          var(--media-preview-border-radius) var(--media-preview-border-radius));
        padding: var(--media-preview-chapter-padding, 3.5px 9px);
        margin: var(--media-preview-chapter-margin, 0 0 5px);
        text-shadow: var(--media-preview-chapter-text-shadow, 0 0 4px rgb(0 0 0 / .75));
      }

      :host([${gt.MEDIA_PREVIEW_IMAGE}]) media-preview-chapter-display,
      :host([${gt.MEDIA_PREVIEW_IMAGE}]) ::slotted(media-preview-chapter-display) {
        transition-delay: var(--media-preview-transition-delay-in, .25s);
        border-radius: var(--media-preview-chapter-border-radius, 0);
        padding: var(--media-preview-chapter-padding, 3.5px 9px 0);
        margin: var(--media-preview-chapter-margin, 0);
        min-width: 100%;
      }

      media-preview-chapter-display[${gt.MEDIA_PREVIEW_CHAPTER}],
      ::slotted(media-preview-chapter-display[${gt.MEDIA_PREVIEW_CHAPTER}]) {
        visibility: visible;
      }

      media-preview-chapter-display:not([aria-valuetext]),
      ::slotted(media-preview-chapter-display:not([aria-valuetext])) {
        display: none;
      }

      media-preview-time-display,
      ::slotted(media-preview-time-display),
      media-time-display,
      ::slotted(media-time-display) {
        font-size: var(--media-font-size, 13px);
        line-height: 17px;
        min-width: 0;
        
        transition: min-width 0s, border-radius 0s;
        transition-delay: calc(var(--media-preview-transition-delay-out, 0s) + var(--media-preview-transition-duration-out, .25s));
        background: var(--media-preview-time-background, var(--_preview-background));
        border-radius: var(--media-preview-time-border-radius,
          var(--media-preview-border-radius) var(--media-preview-border-radius)
          var(--media-preview-border-radius) var(--media-preview-border-radius));
        padding: var(--media-preview-time-padding, 3.5px 9px);
        margin: var(--media-preview-time-margin, 0);
        text-shadow: var(--media-preview-time-text-shadow, 0 0 4px rgb(0 0 0 / .75));
        transform: translateX(min(
          max(calc(50% - var(--_box-width) / 2),
          calc(var(--_box-shift, 0))),
          calc(var(--_box-width) / 2 - 50%)
        ));
      }

      :host([${gt.MEDIA_PREVIEW_IMAGE}]) media-preview-time-display,
      :host([${gt.MEDIA_PREVIEW_IMAGE}]) ::slotted(media-preview-time-display) {
        transition-delay: var(--media-preview-transition-delay-in, .25s);
        border-radius: var(--media-preview-time-border-radius,
          0 0 var(--media-preview-border-radius) var(--media-preview-border-radius));
        min-width: 100%;
      }

      :host([${gt.MEDIA_PREVIEW_TIME}]:hover) {
        --media-time-range-hover-display: block;
      }

      [part~="arrow"],
      ::slotted([part~="arrow"]) {
        display: var(--media-box-arrow-display, inline-block);
        transform: translateX(min(
          max(calc(50% - var(--_box-width) / 2 + var(--media-box-arrow-offset)),
          calc(var(--_box-shift, 0))),
          calc(var(--_box-width) / 2 - 50% - var(--media-box-arrow-offset))
        ));
        
        border-color: transparent;
        border-top-color: var(--media-box-arrow-background, var(--_control-background));
        border-width: var(--media-box-arrow-border-width,
          var(--media-box-arrow-height, 5px) var(--media-box-arrow-width, 6px) 0);
        border-style: solid;
        justify-content: center;
        height: 0;
      }
    </style>
    <div id="preview-rail">
      <slot name="preview" part="box preview-box">
        <media-preview-thumbnail>
          <template shadowrootmode="${kW.shadowRootOptions.mode}">
            ${kW.getTemplateHTML({})}
          </template>
        </media-preview-thumbnail>
        <media-preview-chapter-display></media-preview-chapter-display>
        <media-preview-time-display></media-preview-time-display>
        <slot name="preview-arrow"><div part="arrow"></div></slot>
      </slot>
    </div>
    <div id="current-rail">
      <slot name="current" part="box current-box">
        
      </slot>
    </div>
  `}const KS=(t,e=t.mediaCurrentTime)=>{const r=Number.isFinite(t.mediaSeekableStart)?t.mediaSeekableStart:0,n=Number.isFinite(t.mediaDuration)?t.mediaDuration:t.mediaSeekableEnd;if(Number.isNaN(n))return 0;const i=(e-r)/(n-r);return Math.max(0,Math.min(i,1))},joe=(t,e=t.range.valueAsNumber)=>{const r=Number.isFinite(t.mediaSeekableStart)?t.mediaSeekableStart:0,n=Number.isFinite(t.mediaDuration)?t.mediaDuration:t.mediaSeekableEnd;return Number.isNaN(n)?0:e*(n-r)+r};class H6 extends P1{constructor(){super(),Pu(this,Wx),Pu(this,M6),Pu(this,EN),Pu(this,SN),Pu(this,jN),Pu(this,E3),Pu(this,E_),Pu(this,S3),Pu(this,Vx,void 0),Pu(this,uy,void 0),Pu(this,wN,void 0),Pu(this,S2,void 0),Pu(this,_N,void 0),Pu(this,rT,void 0),Pu(this,w_,void 0),Pu(this,__,void 0),Pu(this,Kx,void 0),Pu(this,Gx,void 0),Pu(this,_3,n=>{this.dragging||(l6(n)&&(this.range.valueAsNumber=n),Jc(this,Gx)||this.updateBar())}),this.shadowRoot.querySelector("#track").insertAdjacentHTML("afterbegin",'<div id="buffered" part="buffered"></div>'),Kf(this,wN,this.shadowRoot.querySelectorAll('[part~="box"]')),Kf(this,_N,this.shadowRoot.querySelector('[part~="preview-box"]')),Kf(this,rT,this.shadowRoot.querySelector('[part~="current-box"]'));const r=getComputedStyle(this);Kf(this,w_,parseInt(r.getPropertyValue("--media-box-padding-left"))),Kf(this,__,parseInt(r.getPropertyValue("--media-box-padding-right"))),Kf(this,uy,new KWe(this.range,Jc(this,_3),60))}static get observedAttributes(){return[...super.observedAttributes,gt.MEDIA_PAUSED,gt.MEDIA_DURATION,gt.MEDIA_SEEKABLE,gt.MEDIA_CURRENT_TIME,gt.MEDIA_PREVIEW_IMAGE,gt.MEDIA_PREVIEW_TIME,gt.MEDIA_PREVIEW_CHAPTER,gt.MEDIA_BUFFERED,gt.MEDIA_PLAYBACK_RATE,gt.MEDIA_LOADING,gt.MEDIA_ENDED]}connectedCallback(){var e;super.connectedCallback(),this.range.setAttribute("aria-label",Ai("seek")),th(this,Wx,Yw).call(this),Kf(this,Vx,this.getRootNode()),(e=Jc(this,Vx))==null||e.addEventListener("transitionstart",this)}disconnectedCallback(){var e;super.disconnectedCallback(),th(this,Wx,Yw).call(this),(e=Jc(this,Vx))==null||e.removeEventListener("transitionstart",this),Kf(this,Vx,null)}attributeChangedCallback(e,r,n){super.attributeChangedCallback(e,r,n),r!=n&&(e===gt.MEDIA_CURRENT_TIME||e===gt.MEDIA_PAUSED||e===gt.MEDIA_ENDED||e===gt.MEDIA_LOADING||e===gt.MEDIA_DURATION||e===gt.MEDIA_SEEKABLE?(Jc(this,uy).update({start:KS(this),duration:this.mediaSeekableEnd-this.mediaSeekableStart,playbackRate:this.mediaPlaybackRate}),th(this,Wx,Yw).call(this),WWe(this)):e===gt.MEDIA_BUFFERED&&this.updateBufferedBar(),(e===gt.MEDIA_DURATION||e===gt.MEDIA_SEEKABLE)&&(this.mediaChaptersCues=Jc(this,Kx),this.updateBar()))}get mediaChaptersCues(){return Jc(this,Kx)}set mediaChaptersCues(e){var r;Kf(this,Kx,e),this.updateSegments((r=Jc(this,Kx))==null?void 0:r.map(n=>({start:KS(this,n.startTime),end:KS(this,n.endTime)})))}get mediaPaused(){return Oa(this,gt.MEDIA_PAUSED)}set mediaPaused(e){Ra(this,gt.MEDIA_PAUSED,e)}get mediaLoading(){return Oa(this,gt.MEDIA_LOADING)}set mediaLoading(e){Ra(this,gt.MEDIA_LOADING,e)}get mediaDuration(){return Tl(this,gt.MEDIA_DURATION)}set mediaDuration(e){Dc(this,gt.MEDIA_DURATION,e)}get mediaCurrentTime(){return Tl(this,gt.MEDIA_CURRENT_TIME)}set mediaCurrentTime(e){Dc(this,gt.MEDIA_CURRENT_TIME,e)}get mediaPlaybackRate(){return Tl(this,gt.MEDIA_PLAYBACK_RATE,1)}set mediaPlaybackRate(e){Dc(this,gt.MEDIA_PLAYBACK_RATE,e)}get mediaBuffered(){const e=this.getAttribute(gt.MEDIA_BUFFERED);return e?e.split(" ").map(r=>r.split(":").map(n=>+n)):[]}set mediaBuffered(e){if(!e){this.removeAttribute(gt.MEDIA_BUFFERED);return}const r=e.map(n=>n.join(":")).join(" ");this.setAttribute(gt.MEDIA_BUFFERED,r)}get mediaSeekable(){const e=this.getAttribute(gt.MEDIA_SEEKABLE);if(e)return e.split(":").map(r=>+r)}set mediaSeekable(e){if(e==null){this.removeAttribute(gt.MEDIA_SEEKABLE);return}this.setAttribute(gt.MEDIA_SEEKABLE,e.join(":"))}get mediaSeekableEnd(){var e;const[,r=this.mediaDuration]=(e=this.mediaSeekable)!=null?e:[];return r}get mediaSeekableStart(){var e;const[r=0]=(e=this.mediaSeekable)!=null?e:[];return r}get mediaPreviewImage(){return Cl(this,gt.MEDIA_PREVIEW_IMAGE)}set mediaPreviewImage(e){Nl(this,gt.MEDIA_PREVIEW_IMAGE,e)}get mediaPreviewTime(){return Tl(this,gt.MEDIA_PREVIEW_TIME)}set mediaPreviewTime(e){Dc(this,gt.MEDIA_PREVIEW_TIME,e)}get mediaEnded(){return Oa(this,gt.MEDIA_ENDED)}set mediaEnded(e){Ra(this,gt.MEDIA_ENDED,e)}updateBar(){super.updateBar(),this.updateBufferedBar(),this.updateCurrentBox()}updateBufferedBar(){var e;const r=this.mediaBuffered;if(!r.length)return;let n;if(this.mediaEnded)n=1;else{const a=this.mediaCurrentTime,[,o=this.mediaSeekableStart]=(e=r.find(([c,u])=>c<=a&&a<=u))!=null?e:[];n=KS(this,o)}const{style:i}=Hu(this.shadowRoot,"#buffered");i.setProperty("width",`${n*100}%`)}updateCurrentBox(){if(!this.shadowRoot.querySelector('slot[name="current"]').assignedElements().length)return;const r=Hu(this.shadowRoot,"#current-rail"),n=Hu(this.shadowRoot,'[part~="current-box"]'),i=th(this,EN,F6).call(this,Jc(this,rT)),a=th(this,SN,U6).call(this,i,this.range.valueAsNumber),o=th(this,jN,$6).call(this,i,this.range.valueAsNumber);r.style.transform=`translateX(${a})`,r.style.setProperty("--_range-width",`${i.range.width}`),n.style.setProperty("--_box-shift",`${o}`),n.style.setProperty("--_box-width",`${i.box.width}px`),n.style.setProperty("visibility","initial")}handleEvent(e){switch(super.handleEvent(e),e.type){case"input":th(this,S3,Soe).call(this);break;case"pointermove":th(this,E3,Eoe).call(this,e);break;case"pointerup":Jc(this,Gx)&&Kf(this,Gx,!1);break;case"pointerdown":Kf(this,Gx,!0);break;case"pointerleave":th(this,E_,TN).call(this,null);break;case"transitionstart":Eg(e.target,this)&&setTimeout(()=>th(this,Wx,Yw).call(this),0);break}}}Vx=new WeakMap;uy=new WeakMap;wN=new WeakMap;S2=new WeakMap;_N=new WeakMap;rT=new WeakMap;w_=new WeakMap;__=new WeakMap;Kx=new WeakMap;Gx=new WeakMap;Wx=new WeakSet;Yw=function(){th(this,M6,_oe).call(this)?Jc(this,uy).start():Jc(this,uy).stop()};M6=new WeakSet;_oe=function(){return this.isConnected&&!this.mediaPaused&&!this.mediaLoading&&!this.mediaEnded&&this.mediaSeekableEnd>0&&Tae(this)};_3=new WeakMap;EN=new WeakSet;F6=function(t){var e;const n=((e=this.getAttribute("bounds")?I1(this,`#${this.getAttribute("bounds")}`):this.parentElement)!=null?e:this).getBoundingClientRect(),i=this.range.getBoundingClientRect(),a=t.offsetWidth,o=-(i.left-n.left-a/2),c=n.right-i.left-a/2;return{box:{width:a,min:o,max:c},bounds:n,range:i}};SN=new WeakSet;U6=function(t,e){let r=`${e*100}%`;const{width:n,min:i,max:a}=t.box;if(!n)return r;if(Number.isNaN(i)||(r=`max(${`calc(1 / var(--_range-width) * 100 * ${i}% + var(--media-box-padding-left))`}, ${r})`),!Number.isNaN(a)){const c=`calc(1 / var(--_range-width) * 100 * ${a}% - var(--media-box-padding-right))`;r=`min(${r}, ${c})`}return r};jN=new WeakSet;$6=function(t,e){const{width:r,min:n,max:i}=t.box,a=e*t.range.width;if(a<n+Jc(this,w_)){const o=t.range.left-t.bounds.left-Jc(this,w_);return`${a-r/2+o}px`}if(a>i-Jc(this,__)){const o=t.bounds.right-t.range.right-Jc(this,__);return`${a+r/2-o-t.range.width}px`}return 0};E3=new WeakSet;Eoe=function(t){const e=[...Jc(this,wN)].some(d=>t.composedPath().includes(d));if(!this.dragging&&(e||!t.composedPath().includes(this))){th(this,E_,TN).call(this,null);return}const r=this.mediaSeekableEnd;if(!r)return;const n=Hu(this.shadowRoot,"#preview-rail"),i=Hu(this.shadowRoot,'[part~="preview-box"]'),a=th(this,EN,F6).call(this,Jc(this,_N));let o=(t.clientX-a.range.left)/a.range.width;o=Math.max(0,Math.min(1,o));const c=th(this,SN,U6).call(this,a,o),u=th(this,jN,$6).call(this,a,o);n.style.transform=`translateX(${c})`,n.style.setProperty("--_range-width",`${a.range.width}`),i.style.setProperty("--_box-shift",`${u}`),i.style.setProperty("--_box-width",`${a.box.width}px`);const l=Math.round(Jc(this,S2))-Math.round(o*r);Math.abs(l)<1&&o>.01&&o<.99||(Kf(this,S2,o*r),th(this,E_,TN).call(this,Jc(this,S2)))};E_=new WeakSet;TN=function(t){this.dispatchEvent(new sr.CustomEvent(Gn.MEDIA_PREVIEW_REQUEST,{composed:!0,bubbles:!0,detail:t}))};S3=new WeakSet;Soe=function(){Jc(this,uy).stop();const t=joe(this);this.dispatchEvent(new sr.CustomEvent(Gn.MEDIA_SEEK_REQUEST,{composed:!0,bubbles:!0,detail:t}))};H6.shadowRootOptions={mode:"open"};H6.getContainerTemplateHTML=YWe;sr.customElements.get("media-time-range")||sr.customElements.define("media-time-range",H6);const qWe=1,XWe=t=>t.mediaMuted?0:t.mediaVolume,ZWe=t=>`${Math.round(t*100)}%`;class JWe extends P1{static get observedAttributes(){return[...super.observedAttributes,gt.MEDIA_VOLUME,gt.MEDIA_MUTED,gt.MEDIA_VOLUME_UNAVAILABLE]}constructor(){super(),this.range.addEventListener("input",()=>{const e=this.range.value,r=new sr.CustomEvent(Gn.MEDIA_VOLUME_REQUEST,{composed:!0,bubbles:!0,detail:e});this.dispatchEvent(r)})}connectedCallback(){super.connectedCallback(),this.range.setAttribute("aria-label",Ai("volume"))}attributeChangedCallback(e,r,n){super.attributeChangedCallback(e,r,n),(e===gt.MEDIA_VOLUME||e===gt.MEDIA_MUTED)&&(this.range.valueAsNumber=XWe(this),this.range.setAttribute("aria-valuetext",ZWe(this.range.valueAsNumber)),this.updateBar())}get mediaVolume(){return Tl(this,gt.MEDIA_VOLUME,qWe)}set mediaVolume(e){Dc(this,gt.MEDIA_VOLUME,e)}get mediaMuted(){return Oa(this,gt.MEDIA_MUTED)}set mediaMuted(e){Ra(this,gt.MEDIA_MUTED,e)}get mediaVolumeUnavailable(){return Cl(this,gt.MEDIA_VOLUME_UNAVAILABLE)}set mediaVolumeUnavailable(e){Nl(this,gt.MEDIA_VOLUME_UNAVAILABLE,e)}}sr.customElements.get("media-volume-range")||sr.customElements.define("media-volume-range",JWe);function eYe(t){return`
      <style>
        :host {
          min-width: 4ch;
          padding: var(--media-button-padding, var(--media-control-padding, 10px 5px));
          width: 100%;
          display: grid;
          grid-template-columns: 1fr auto;
          gap: 1rem;
          font-weight: var(--media-button-font-weight, normal);
        }

        #checked-indicator {
          display: none;
        }

        :host([${gt.MEDIA_LOOP}]) #checked-indicator {
          display: block;
        }
      </style>
      
      <span id="icon">
     </span>

      <div id="checked-indicator">
        <svg aria-hidden="true" viewBox="0 1 24 24" part="checked-indicator indicator">
          <path d="m10 15.17 9.193-9.191 1.414 1.414-10.606 10.606-6.364-6.364 1.414-1.414 4.95 4.95Z"/>
        </svg>
      </div>
    `}function tYe(){return Ai("Loop")}class Q6 extends xd{constructor(){super(...arguments),this.container=null}static get observedAttributes(){return[...super.observedAttributes,gt.MEDIA_LOOP]}connectedCallback(){var e;super.connectedCallback(),this.container=((e=this.shadowRoot)==null?void 0:e.querySelector("#icon"))||null,this.container&&(this.container.textContent=Ai("Loop"))}attributeChangedCallback(e,r,n){super.attributeChangedCallback(e,r,n),e===gt.MEDIA_LOOP&&this.container&&this.setAttribute("aria-checked",this.mediaLoop?"true":"false")}get mediaLoop(){return Oa(this,gt.MEDIA_LOOP)}set mediaLoop(e){Ra(this,gt.MEDIA_LOOP,e)}handleClick(){const e=!this.mediaLoop,r=new sr.CustomEvent(Gn.MEDIA_LOOP_REQUEST,{composed:!0,bubbles:!0,detail:e});this.dispatchEvent(r)}}Q6.getSlotTemplateHTML=eYe;Q6.getTooltipContentHTML=tYe;sr.customElements.get("media-loop-button")||sr.customElements.define("media-loop-button",Q6);var Toe=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},pa=(t,e,r)=>(Toe(t,e,"read from private field"),r?r.call(t):e.get(t)),PA=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},zp=(t,e,r,n)=>(Toe(t,e,"write to private field"),e.set(t,r),r),Yx,nT,Pv,qw,h0,f0,m0,Ov,qx,iT,Tm;const PW=1,OW=0,rYe=1,nYe={processCallback(t,e,r){if(r){for(const[n,i]of e)if(n in r){const a=r[n];typeof a=="boolean"&&i instanceof Hm&&typeof i.element[i.attributeName]=="boolean"?i.booleanValue=a:typeof a=="function"&&i instanceof Hm?i.element[i.attributeName]=a:i.value=a}}}};class fk extends sr.DocumentFragment{constructor(e,r,n=nYe){var i;super(),PA(this,Yx,void 0),PA(this,nT,void 0),this.append(e.content.cloneNode(!0)),zp(this,Yx,Coe(this)),zp(this,nT,n),(i=n.createCallback)==null||i.call(n,this,pa(this,Yx),r),n.processCallback(this,pa(this,Yx),r)}update(e){pa(this,nT).processCallback(this,pa(this,Yx),e)}}Yx=new WeakMap;nT=new WeakMap;const Coe=(t,e=[])=>{let r,n;for(const i of t.attributes||[])if(i.value.includes("{{")){const a=new sYe;for([r,n]of DW(i.value))if(!r)a.append(n);else{const o=new Hm(t,i.name,i.namespaceURI);a.append(o),e.push([n,o])}i.value=a.toString()}for(const i of t.childNodes)if(i.nodeType===PW&&!(i instanceof HTMLTemplateElement))Coe(i,e);else{const a=i.data;if(i.nodeType===PW||a.includes("{{")){const o=[];if(a)for([r,n]of DW(a))if(!r)o.push(new Text(n));else{const c=new O1(t);o.push(c),e.push([n,c])}else if(i instanceof HTMLTemplateElement){const c=new Loe(t,i);o.push(c),e.push([c.expression,c])}i.replaceWith(...o.flatMap(c=>c.replacementNodes||[c]))}}return e},RW={},DW=t=>{let e="",r=0,n=RW[t],i=0,a;if(n)return n;for(n=[];a=t[i];i++)a==="{"&&t[i+1]==="{"&&t[i-1]!=="\\"&&t[i+2]&&++r==1?(e&&n.push([OW,e]),e="",i++):a==="}"&&t[i+1]==="}"&&t[i-1]!=="\\"&&!--r?(n.push([rYe,e.trim()]),e="",i++):e+=a||"";return e&&n.push([OW,(r>0?"{{":"")+e]),RW[t]=n},iYe=11;class Noe{get value(){return""}set value(e){}toString(){return this.value}}const koe=new WeakMap;class sYe{constructor(){PA(this,Pv,[])}[Symbol.iterator](){return pa(this,Pv).values()}get length(){return pa(this,Pv).length}item(e){return pa(this,Pv)[e]}append(...e){for(const r of e)r instanceof Hm&&koe.set(r,this),pa(this,Pv).push(r)}toString(){return pa(this,Pv).join("")}}Pv=new WeakMap;class Hm extends Noe{constructor(e,r,n){super(),PA(this,Ov),PA(this,qw,""),PA(this,h0,void 0),PA(this,f0,void 0),PA(this,m0,void 0),zp(this,h0,e),zp(this,f0,r),zp(this,m0,n)}get attributeName(){return pa(this,f0)}get attributeNamespace(){return pa(this,m0)}get element(){return pa(this,h0)}get value(){return pa(this,qw)}set value(e){pa(this,qw)!==e&&(zp(this,qw,e),!pa(this,Ov,qx)||pa(this,Ov,qx).length===1?e==null?pa(this,h0).removeAttributeNS(pa(this,m0),pa(this,f0)):pa(this,h0).setAttributeNS(pa(this,m0),pa(this,f0),e):pa(this,h0).setAttributeNS(pa(this,m0),pa(this,f0),pa(this,Ov,qx).toString()))}get booleanValue(){return pa(this,h0).hasAttributeNS(pa(this,m0),pa(this,f0))}set booleanValue(e){if(!pa(this,Ov,qx)||pa(this,Ov,qx).length===1)this.value=e?"":null;else throw new DOMException("Value is not fully templatized")}}qw=new WeakMap;h0=new WeakMap;f0=new WeakMap;m0=new WeakMap;Ov=new WeakSet;qx=function(){return koe.get(this)};class O1 extends Noe{constructor(e,r){super(),PA(this,iT,void 0),PA(this,Tm,void 0),zp(this,iT,e),zp(this,Tm,r?[...r]:[new Text])}get replacementNodes(){return pa(this,Tm)}get parentNode(){return pa(this,iT)}get nextSibling(){return pa(this,Tm)[pa(this,Tm).length-1].nextSibling}get previousSibling(){return pa(this,Tm)[0].previousSibling}get value(){return pa(this,Tm).map(e=>e.textContent).join("")}set value(e){this.replace(e)}replace(...e){const r=e.flat().flatMap(n=>n==null?[new Text]:n.forEach?[...n]:n.nodeType===iYe?[...n.childNodes]:n.nodeType?[n]:[new Text(n)]);r.length||r.push(new Text),zp(this,Tm,aYe(pa(this,Tm)[0].parentNode,pa(this,Tm),r,this.nextSibling))}}iT=new WeakMap;Tm=new WeakMap;class Loe extends O1{constructor(e,r){const n=r.getAttribute("directive")||r.getAttribute("type");let i=r.getAttribute("expression")||r.getAttribute(n)||"";i.startsWith("{{")&&(i=i.trim().slice(2,-2).trim()),super(e),this.expression=i,this.template=r,this.directive=n}}function aYe(t,e,r,n=null){let i=0,a,o,c,u=r.length,l=e.length;for(;i<u&&i<l&&e[i]==r[i];)i++;for(;i<u&&i<l&&r[u-1]==e[l-1];)n=r[--l,--u];if(i==l)for(;i<u;)t.insertBefore(r[i++],n);if(i==u)for(;i<l;)t.removeChild(e[i++]);else{for(a=e[i];i<u;)c=r[i++],o=a?a.nextSibling:n,a==c?a=o:i<u&&r[i]==o?(t.replaceChild(c,a),a=o):t.insertBefore(c,a);for(;a!=n;)o=a.nextSibling,t.removeChild(a),a=o}return r}const MW={string:t=>String(t)};class Ioe{constructor(e){this.template=e,this.state=void 0}}const Jv=new WeakMap,ey=new WeakMap,j3={partial:(t,e)=>{e[t.expression]=new Ioe(t.template)},if:(t,e)=>{var r;if(Boe(t.expression,e))if(Jv.get(t)!==t.template){Jv.set(t,t.template);const n=new fk(t.template,e,z6);t.replace(n),ey.set(t,n)}else(r=ey.get(t))==null||r.update(e);else t.replace(""),Jv.delete(t),ey.delete(t)}},oYe=Object.keys(j3),z6={processCallback(t,e,r){var n,i;if(r)for(const[a,o]of e){if(o instanceof Loe){if(!o.directive){const u=oYe.find(l=>o.template.hasAttribute(l));u&&(o.directive=u,o.expression=o.template.getAttribute(u))}(n=j3[o.directive])==null||n.call(j3,o,r);continue}let c=Boe(a,r);if(c instanceof Ioe){Jv.get(o)!==c.template?(Jv.set(o,c.template),c=new fk(c.template,c.state,z6),o.value=c,ey.set(o,c)):(i=ey.get(o))==null||i.update(c.state);continue}c?(o instanceof Hm&&o.attributeName.startsWith("aria-")&&(c=String(c)),o instanceof Hm?typeof c=="boolean"?o.booleanValue=c:typeof c=="function"?o.element[o.attributeName]=c:o.value=c:(o.value=c,Jv.delete(o),ey.delete(o))):o instanceof Hm?o.value=void 0:(o.value=void 0,Jv.delete(o),ey.delete(o))}}},FW={"!":t=>!t,"!!":t=>!!t,"==":(t,e)=>t==e,"!=":(t,e)=>t!=e,">":(t,e)=>t>e,">=":(t,e)=>t>=e,"<":(t,e)=>t<e,"<=":(t,e)=>t<=e,"??":(t,e)=>t??e,"|":(t,e)=>{var r;return(r=MW[e])==null?void 0:r.call(MW,t)}};function lYe(t){return cYe(t,{boolean:/true|false/,number:/-?\d+\.?\d*/,string:/(["'])((?:\\.|[^\\])*?)\1/,operator:/[!=><][=!]?|\?\?|\|/,ws:/\s+/,param:/[$a-z_][$\w]*/i}).filter(({type:e})=>e!=="ws")}function Boe(t,e={}){var r,n,i,a,o,c,u;const l=lYe(t);if(l.length===0||l.some(({type:d})=>!d))return yw(t);if(((r=l[0])==null?void 0:r.token)===">"){const d=e[(n=l[1])==null?void 0:n.token];if(!d)return yw(t);const f={...e};d.state=f;const m=l.slice(2);for(let p=0;p<m.length;p+=3){const g=(i=m[p])==null?void 0:i.token,y=(a=m[p+1])==null?void 0:a.token,x=(o=m[p+2])==null?void 0:o.token;g&&y==="="&&(f[g]=xw(x,e))}return d}if(l.length===1)return GS(l[0])?xw(l[0].token,e):yw(t);if(l.length===2){const d=(c=l[0])==null?void 0:c.token,f=FW[d];if(!f||!GS(l[1]))return yw(t);const m=xw(l[1].token,e);return f(m)}if(l.length===3){const d=(u=l[1])==null?void 0:u.token,f=FW[d];if(!f||!GS(l[0])||!GS(l[2]))return yw(t);const m=xw(l[0].token,e);if(d==="|")return f(m,l[2].token);const p=xw(l[2].token,e);return f(m,p)}}function yw(t){return console.warn(`Warning: invalid expression \`${t}\``),!1}function GS({type:t}){return["number","boolean","string","param"].includes(t)}function xw(t,e){const r=t[0],n=t.slice(-1);return t==="true"||t==="false"?t==="true":r===n&&["'",'"'].includes(r)?t.slice(1,-1):gae(t)?parseFloat(t):e[t]}function cYe(t,e){let r,n,i;const a=[];for(;t;){i=null,r=t.length;for(const o in e)n=e[o].exec(t),n&&n.index<r&&(i={token:n[0],type:o,matches:n.slice(1)},r=n.index);r&&a.push({token:t.substr(0,r),type:void 0}),i&&a.push(i),t=t.substr(r+(i?i.token.length:0))}return a}var V6=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},T3=(t,e,r)=>(V6(t,e,"read from private field"),r?r.call(t):e.get(t)),bw=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},ty=(t,e,r,n)=>(V6(t,e,"write to private field"),e.set(t,r),r),lB=(t,e,r)=>(V6(t,e,"access private method"),r),Lb,sT,Ib,C3,Poe,aT,N3;const cB={mediatargetlivewindow:"targetlivewindow",mediastreamtype:"streamtype"},Ooe=yu.createElement("template");Ooe.innerHTML=`
  <style>
    :host {
      display: inline-block;
      line-height: 0;
    }

    media-controller {
      width: 100%;
      height: 100%;
    }

    media-captions-button:not([mediasubtitleslist]),
    media-captions-menu:not([mediasubtitleslist]),
    media-captions-menu-button:not([mediasubtitleslist]),
    media-audio-track-menu[mediaaudiotrackunavailable],
    media-audio-track-menu-button[mediaaudiotrackunavailable],
    media-rendition-menu[mediarenditionunavailable],
    media-rendition-menu-button[mediarenditionunavailable],
    media-volume-range[mediavolumeunavailable],
    media-airplay-button[mediaairplayunavailable],
    media-fullscreen-button[mediafullscreenunavailable],
    media-cast-button[mediacastunavailable],
    media-pip-button[mediapipunavailable] {
      display: none;
    }
  </style>
`;class mk extends sr.HTMLElement{constructor(){super(),bw(this,C3),bw(this,aT),bw(this,Lb,void 0),bw(this,sT,void 0),bw(this,Ib,void 0),this.shadowRoot?this.renderRoot=this.shadowRoot:(this.renderRoot=this.attachShadow({mode:"open"}),this.createRenderer());const e=new MutationObserver(r=>{var n;this.mediaController&&!((n=this.mediaController)!=null&&n.breakpointsComputed)||r.some(i=>{const a=i.target;return a===this?!0:a.localName!=="media-controller"?!1:!!(cB[i.attributeName]||i.attributeName.startsWith("breakpoint"))})&&this.render()});e.observe(this,{attributes:!0}),e.observe(this.renderRoot,{attributes:!0,subtree:!0}),this.addEventListener(fg.BREAKPOINTS_COMPUTED,this.render),lB(this,C3,Poe).call(this,"template")}get mediaController(){return this.renderRoot.querySelector("media-controller")}get template(){var e;return(e=T3(this,Lb))!=null?e:this.constructor.template}set template(e){if(e===null){this.removeAttribute("template");return}typeof e=="string"?this.setAttribute("template",e):e instanceof HTMLTemplateElement&&(ty(this,Lb,e),ty(this,Ib,null),this.createRenderer())}get props(){var e,r,n;const i=[...Array.from((r=(e=this.mediaController)==null?void 0:e.attributes)!=null?r:[]).filter(({name:o})=>cB[o]||o.startsWith("breakpoint")),...Array.from(this.attributes)],a={};for(const o of i){const c=(n=cB[o.name])!=null?n:hKe(o.name);let{value:u}=o;u!=null?(gae(u)&&(u=parseFloat(u)),a[c]=u===""?!0:u):a[c]=!1}return a}attributeChangedCallback(e,r,n){e==="template"&&r!=n&&lB(this,aT,N3).call(this)}connectedCallback(){lB(this,aT,N3).call(this)}createRenderer(){this.template instanceof HTMLTemplateElement&&this.template!==T3(this,sT)&&(ty(this,sT,this.template),this.renderer=new fk(this.template,this.props,this.constructor.processor),this.renderRoot.textContent="",this.renderRoot.append(Ooe.content.cloneNode(!0),this.renderer))}render(){var e;(e=this.renderer)==null||e.update(this.props)}}Lb=new WeakMap;sT=new WeakMap;Ib=new WeakMap;C3=new WeakSet;Poe=function(t){if(Object.prototype.hasOwnProperty.call(this,t)){const e=this[t];delete this[t],this[t]=e}};aT=new WeakSet;N3=function(){var t;const e=this.getAttribute("template");if(!e||e===T3(this,Ib))return;const r=this.getRootNode(),n=(t=r?.getElementById)==null?void 0:t.call(r,e);if(n){ty(this,Ib,e),ty(this,Lb,n),this.createRenderer();return}uYe(e)&&(ty(this,Ib,e),dYe(e).then(i=>{const a=yu.createElement("template");a.innerHTML=i,ty(this,Lb,a),this.createRenderer()}).catch(console.error))};mk.observedAttributes=["template"];mk.processor=z6;function uYe(t){if(!/^(\/|\.\/|https?:\/\/)/.test(t))return!1;const e=/^https?:\/\//.test(t)?void 0:location.origin;try{new URL(t,e)}catch{return!1}return!0}async function dYe(t){const e=await fetch(t);if(e.status!==200)throw new Error(`Failed to load resource: the server responded with a status of ${e.status}`);return e.text()}sr.customElements.get("media-theme")||sr.customElements.define("media-theme",mk);function hYe({anchor:t,floating:e,placement:r}){const n=fYe({anchor:t,floating:e}),{x:i,y:a}=AYe(n,r);return{x:i,y:a}}function fYe({anchor:t,floating:e}){return{anchor:mYe(t,e.offsetParent),floating:{x:0,y:0,width:e.offsetWidth,height:e.offsetHeight}}}function mYe(t,e){var r;const n=t.getBoundingClientRect(),i=(r=e?.getBoundingClientRect())!=null?r:{x:0,y:0};return{x:n.x-i.x,y:n.y-i.y,width:n.width,height:n.height}}function AYe({anchor:t,floating:e},r){const n=pYe(r)==="x"?"y":"x",i=n==="y"?"height":"width",a=Roe(r),o=t.x+t.width/2-e.width/2,c=t.y+t.height/2-e.height/2,u=t[i]/2-e[i]/2;let l;switch(a){case"top":l={x:o,y:t.y-e.height};break;case"bottom":l={x:o,y:t.y+t.height};break;case"right":l={x:t.x+t.width,y:c};break;case"left":l={x:t.x-e.width,y:c};break;default:l={x:t.x,y:t.y}}switch(r.split("-")[1]){case"start":l[n]-=u;break;case"end":l[n]+=u;break}return l}function Roe(t){return t.split("-")[0]}function pYe(t){return["top","bottom"].includes(Roe(t))?"y":"x"}class K6 extends Event{constructor({action:e="auto",relatedTarget:r,...n}){super("invoke",n),this.action=e,this.relatedTarget=r}}class gYe extends Event{constructor({newState:e,oldState:r,...n}){super("toggle",n),this.newState=e,this.oldState=r}}var G6=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},mo=(t,e,r)=>(G6(t,e,"read from private field"),r?r.call(t):e.get(t)),el=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},CA=(t,e,r,n)=>(G6(t,e,"write to private field"),e.set(t,r),r),tl=(t,e,r)=>(G6(t,e,"access private method"),r),NA,dy,Y0,oT,lT,hy,S_,k3,Doe,CN,W6,NN,cT,L3,I3,Moe,B3,Foe,P3,Uoe,Bb,Pb,Ob,j_,kN,Y6,O3,$oe,q6,Hoe,R3,Qoe,X6,zoe,D3,Voe,M3,Koe,j2,LN,F3,Goe,T2,IN,uT,U3;function o1({type:t,text:e,value:r,checked:n}){const i=yu.createElement("media-chrome-menu-item");i.type=t,i.part.add("menu-item"),i.part.add(t),i.value=r,i.checked=n;const a=yu.createElement("span");return a.textContent=e,i.append(a),i}function fy(t,e){let r=t.querySelector(`:scope > [slot="${e}"]`);if(r?.nodeName=="SLOT"&&(r=r.assignedElements({flatten:!0})[0]),r)return r=r.cloneNode(!0),r;const n=t.shadowRoot.querySelector(`[name="${e}"] > svg`);return n?n.cloneNode(!0):""}function vYe(t){return`
    <style>
      :host {
        font: var(--media-font,
          var(--media-font-weight, normal)
          var(--media-font-size, 14px) /
          var(--media-text-content-height, var(--media-control-height, 24px))
          var(--media-font-family, helvetica neue, segoe ui, roboto, arial, sans-serif));
        color: var(--media-text-color, var(--media-primary-color, rgb(238 238 238)));
        --_menu-bg: rgb(20 20 30 / .8);
        background: var(--media-menu-background, var(--media-control-background, var(--media-secondary-color, var(--_menu-bg))));
        border-radius: var(--media-menu-border-radius);
        border: var(--media-menu-border, none);
        display: var(--media-menu-display, inline-flex) !important;
        
        transition: var(--media-menu-transition-in,
          visibility 0s,
          opacity .2s ease-out,
          transform .15s ease-out,
          left .2s ease-in-out,
          min-width .2s ease-in-out,
          min-height .2s ease-in-out
        ) !important;
        
        visibility: var(--media-menu-visibility, visible);
        opacity: var(--media-menu-opacity, 1);
        max-height: var(--media-menu-max-height, var(--_menu-max-height, 300px));
        transform: var(--media-menu-transform-in, translateY(0) scale(1));
        flex-direction: column;
        
        min-height: 0;
        position: relative;
        bottom: var(--_menu-bottom);
        box-sizing: border-box;
      } 

      @-moz-document url-prefix() {
        :host{
          --_menu-bg: rgb(20 20 30);
        }
      }

      :host([hidden]) {
        transition: var(--media-menu-transition-out,
          visibility .15s ease-in,
          opacity .15s ease-in,
          transform .15s ease-in
        ) !important;
        visibility: var(--media-menu-hidden-visibility, hidden);
        opacity: var(--media-menu-hidden-opacity, 0);
        max-height: var(--media-menu-hidden-max-height,
          var(--media-menu-max-height, var(--_menu-max-height, 300px)));
        transform: var(--media-menu-transform-out, translateY(2px) scale(.99));
        pointer-events: none;
      }

      :host([slot="submenu"]) {
        background: none;
        width: 100%;
        min-height: 100%;
        position: absolute;
        bottom: 0;
        right: -100%;
      }

      #container {
        display: flex;
        flex-direction: column;
        min-height: 0;
        transition: transform .2s ease-out;
        transform: translate(0, 0);
      }

      #container.has-expanded {
        transition: transform .2s ease-in;
        transform: translate(-100%, 0);
      }

      button {
        background: none;
        color: inherit;
        border: none;
        padding: 0;
        font: inherit;
        outline: inherit;
        display: inline-flex;
        align-items: center;
      }

      slot[name="header"][hidden] {
        display: none;
      }

      slot[name="header"] > *,
      slot[name="header"]::slotted(*) {
        padding: .4em .7em;
        border-bottom: 1px solid rgb(255 255 255 / .25);
        cursor: var(--media-cursor, default);
      }

      slot[name="header"] > button[part~="back"],
      slot[name="header"]::slotted(button[part~="back"]) {
        cursor: var(--media-cursor, pointer);
      }

      svg[part~="back"] {
        height: var(--media-menu-icon-height, var(--media-control-height, 24px));
        fill: var(--media-icon-color, var(--media-primary-color, rgb(238 238 238)));
        display: block;
        margin-right: .5ch;
      }

      slot:not([name]) {
        gap: var(--media-menu-gap);
        flex-direction: var(--media-menu-flex-direction, column);
        overflow: var(--media-menu-overflow, hidden auto);
        display: flex;
        min-height: 0;
      }

      :host([role="menu"]) slot:not([name]) {
        padding-block: .4em;
      }

      slot:not([name])::slotted([role="menu"]) {
        background: none;
      }

      media-chrome-menu-item > span {
        margin-right: .5ch;
        max-width: var(--media-menu-item-max-width);
        text-overflow: ellipsis;
        overflow: hidden;
      }
    </style>
    <style id="layout-row" media="width:0">

      slot[name="header"] > *,
      slot[name="header"]::slotted(*) {
        padding: .4em .5em;
      }

      slot:not([name]) {
        gap: var(--media-menu-gap, .25em);
        flex-direction: var(--media-menu-flex-direction, row);
        padding-inline: .5em;
      }

      media-chrome-menu-item {
        padding: .3em .5em;
      }

      media-chrome-menu-item[aria-checked="true"] {
        background: var(--media-menu-item-checked-background, rgb(255 255 255 / .2));
      }

      
      media-chrome-menu-item::part(checked-indicator) {
        display: var(--media-menu-item-checked-indicator-display, none);
      }
    </style>
    <div id="container" part="container">
      <slot name="header" hidden>
        <button part="back button" aria-label="Back to previous menu">
          <slot name="back-icon">
            <svg aria-hidden="true" viewBox="0 0 20 24" part="back indicator">
              <path d="m11.88 17.585.742-.669-4.2-4.665 4.2-4.666-.743-.669-4.803 5.335 4.803 5.334Z"/>
            </svg>
          </slot>
          <slot name="title"></slot>
        </button>
      </slot>
      <slot></slot>
    </div>
    <slot name="checked-indicator" hidden></slot>
  `}const wv={STYLE:"style",HIDDEN:"hidden",DISABLED:"disabled",ANCHOR:"anchor"};class dm extends sr.HTMLElement{constructor(){if(super(),el(this,k3),el(this,CN),el(this,cT),el(this,I3),el(this,B3),el(this,P3),el(this,Ob),el(this,kN),el(this,O3),el(this,q6),el(this,R3),el(this,X6),el(this,D3),el(this,M3),el(this,j2),el(this,F3),el(this,T2),el(this,uT),el(this,NA,null),el(this,dy,null),el(this,Y0,null),el(this,oT,new Set),el(this,lT,void 0),el(this,hy,!1),el(this,S_,null),el(this,NN,()=>{const e=mo(this,oT),r=new Set(this.items);for(const n of e)r.has(n)||this.dispatchEvent(new CustomEvent("removemenuitem",{detail:n}));for(const n of r)e.has(n)||this.dispatchEvent(new CustomEvent("addmenuitem",{detail:n}));CA(this,oT,r)}),el(this,Bb,()=>{tl(this,Ob,j_).call(this),tl(this,kN,Y6).call(this,!1)}),el(this,Pb,()=>{tl(this,Ob,j_).call(this)}),!this.shadowRoot){this.attachShadow(this.constructor.shadowRootOptions);const e=Lf(this.attributes);this.shadowRoot.innerHTML=this.constructor.getTemplateHTML(e)}this.container=this.shadowRoot.querySelector("#container"),this.defaultSlot=this.shadowRoot.querySelector("slot:not([name])"),this.shadowRoot.addEventListener("slotchange",this),CA(this,lT,new MutationObserver(mo(this,NN))),mo(this,lT).observe(this.defaultSlot,{childList:!0})}static get observedAttributes(){return[wv.DISABLED,wv.HIDDEN,wv.STYLE,wv.ANCHOR,Ao.MEDIA_CONTROLLER]}static formatMenuItemText(e,r){return e}enable(){this.addEventListener("click",this),this.addEventListener("focusout",this),this.addEventListener("keydown",this),this.addEventListener("invoke",this),this.addEventListener("toggle",this)}disable(){this.removeEventListener("click",this),this.removeEventListener("focusout",this),this.removeEventListener("keyup",this),this.removeEventListener("invoke",this),this.removeEventListener("toggle",this)}handleEvent(e){switch(e.type){case"slotchange":tl(this,k3,Doe).call(this,e);break;case"invoke":tl(this,I3,Moe).call(this,e);break;case"click":tl(this,O3,$oe).call(this,e);break;case"toggle":tl(this,R3,Qoe).call(this,e);break;case"focusout":tl(this,D3,Voe).call(this,e);break;case"keydown":tl(this,M3,Koe).call(this,e);break}}connectedCallback(){var e,r;CA(this,S_,d6(this.shadowRoot,":host")),tl(this,cT,L3).call(this),this.hasAttribute("disabled")||this.enable(),this.role||(this.role="menu"),CA(this,NA,e3(this)),(r=(e=mo(this,NA))==null?void 0:e.associateElement)==null||r.call(e,this),this.hidden||(i1(T_(this),mo(this,Bb)),i1(this,mo(this,Pb))),tl(this,CN,W6).call(this)}disconnectedCallback(){var e,r;s1(T_(this),mo(this,Bb)),s1(this,mo(this,Pb)),this.disable(),(r=(e=mo(this,NA))==null?void 0:e.unassociateElement)==null||r.call(e,this),CA(this,NA,null)}attributeChangedCallback(e,r,n){var i,a,o,c;e===wv.HIDDEN&&n!==r?(mo(this,hy)||CA(this,hy,!0),this.hidden?tl(this,P3,Uoe).call(this):tl(this,B3,Foe).call(this),this.dispatchEvent(new gYe({oldState:this.hidden?"open":"closed",newState:this.hidden?"closed":"open",bubbles:!0}))):e===Ao.MEDIA_CONTROLLER?(r&&((a=(i=mo(this,NA))==null?void 0:i.unassociateElement)==null||a.call(i,this),CA(this,NA,null)),n&&this.isConnected&&(CA(this,NA,e3(this)),(c=(o=mo(this,NA))==null?void 0:o.associateElement)==null||c.call(o,this))):e===wv.DISABLED&&n!==r?n==null?this.enable():this.disable():e===wv.STYLE&&n!==r&&tl(this,cT,L3).call(this)}formatMenuItemText(e,r){return this.constructor.formatMenuItemText(e,r)}get anchor(){return this.getAttribute("anchor")}set anchor(e){this.setAttribute("anchor",`${e}`)}get anchorElement(){var e;return this.anchor?(e=rk(this))==null?void 0:e.querySelector(`#${this.anchor}`):null}get items(){return this.defaultSlot.assignedElements({flatten:!0}).filter(yYe)}get radioGroupItems(){return this.items.filter(e=>e.role==="menuitemradio")}get checkedItems(){return this.items.filter(e=>e.checked)}get value(){var e,r;return(r=(e=this.checkedItems[0])==null?void 0:e.value)!=null?r:""}set value(e){const r=this.items.find(n=>n.value===e);r&&tl(this,uT,U3).call(this,r)}focus(){if(CA(this,dy,u6()),this.items.length){tl(this,T2,IN).call(this,this.items[0]),this.items[0].focus();return}const e=this.querySelector('[autofocus], [tabindex]:not([tabindex="-1"]), [role="menu"]');e?.focus()}handleSelect(e){var r;const n=tl(this,j2,LN).call(this,e);n&&(tl(this,uT,U3).call(this,n,n.type==="checkbox"),mo(this,Y0)&&!this.hidden&&((r=mo(this,dy))==null||r.focus(),this.hidden=!0))}get keysUsed(){return["Enter","Escape","Tab"," ","ArrowDown","ArrowUp","Home","End"]}handleMove(e){var r,n;const{key:i}=e,a=this.items,o=(n=(r=tl(this,j2,LN).call(this,e))!=null?r:tl(this,F3,Goe).call(this))!=null?n:a[0],c=a.indexOf(o);let u=Math.max(0,c);i==="ArrowDown"?u++:i==="ArrowUp"?u--:e.key==="Home"?u=0:e.key==="End"&&(u=a.length-1),u<0&&(u=a.length-1),u>a.length-1&&(u=0),tl(this,T2,IN).call(this,a[u]),a[u].focus()}}NA=new WeakMap;dy=new WeakMap;Y0=new WeakMap;oT=new WeakMap;lT=new WeakMap;hy=new WeakMap;S_=new WeakMap;k3=new WeakSet;Doe=function(t){const e=t.target;for(const r of e.assignedNodes({flatten:!0}))r.nodeType===3&&r.textContent.trim()===""&&r.remove();["header","title"].includes(e.name)&&tl(this,CN,W6).call(this),e.name||mo(this,NN).call(this)};CN=new WeakSet;W6=function(){const t=this.shadowRoot.querySelector('slot[name="header"]'),e=this.shadowRoot.querySelector('slot[name="title"]');t.hidden=e.assignedNodes().length===0&&t.assignedNodes().length===0};NN=new WeakMap;cT=new WeakSet;L3=function(){var t;const e=this.shadowRoot.querySelector("#layout-row"),r=(t=getComputedStyle(this).getPropertyValue("--media-menu-layout"))==null?void 0:t.trim();e.setAttribute("media",r==="row"?"":"width:0")};I3=new WeakSet;Moe=function(t){CA(this,Y0,t.relatedTarget),Eg(this,t.relatedTarget)||(this.hidden=!this.hidden)};B3=new WeakSet;Foe=function(){var t;(t=mo(this,Y0))==null||t.setAttribute("aria-expanded","true"),this.addEventListener("transitionend",()=>this.focus(),{once:!0}),i1(T_(this),mo(this,Bb)),i1(this,mo(this,Pb))};P3=new WeakSet;Uoe=function(){var t;(t=mo(this,Y0))==null||t.setAttribute("aria-expanded","false"),s1(T_(this),mo(this,Bb)),s1(this,mo(this,Pb))};Bb=new WeakMap;Pb=new WeakMap;Ob=new WeakSet;j_=function(t){if(this.hasAttribute("mediacontroller")&&!this.anchor||this.hidden||!this.anchorElement)return;const{x:e,y:r}=hYe({anchor:this.anchorElement,floating:this,placement:"top-start"});t??(t=this.offsetWidth);const i=T_(this).getBoundingClientRect(),a=i.width-e-t,o=i.height-r-this.offsetHeight,{style:c}=mo(this,S_);c.setProperty("position","absolute"),c.setProperty("right",`${Math.max(0,a)}px`),c.setProperty("--_menu-bottom",`${o}px`);const u=getComputedStyle(this),d=c.getPropertyValue("--_menu-bottom")===u.bottom?o:parseFloat(u.bottom),f=i.height-d-parseFloat(u.marginBottom);this.style.setProperty("--_menu-max-height",`${f}px`)};kN=new WeakSet;Y6=function(t){const e=this.querySelector('[role="menuitem"][aria-haspopup][aria-expanded="true"]'),r=e?.querySelector('[role="menu"]'),{style:n}=mo(this,S_);if(t||n.setProperty("--media-menu-transition-in","none"),r){const i=r.offsetHeight,a=Math.max(r.offsetWidth,e.offsetWidth);this.style.setProperty("min-width",`${a}px`),this.style.setProperty("min-height",`${i}px`),tl(this,Ob,j_).call(this,a)}else this.style.removeProperty("min-width"),this.style.removeProperty("min-height"),tl(this,Ob,j_).call(this);n.removeProperty("--media-menu-transition-in")};O3=new WeakSet;$oe=function(t){var e;if(t.stopPropagation(),t.composedPath().includes(mo(this,q6,Hoe))){(e=mo(this,dy))==null||e.focus(),this.hidden=!0;return}const r=tl(this,j2,LN).call(this,t);!r||r.hasAttribute("disabled")||(tl(this,T2,IN).call(this,r),this.handleSelect(t))};q6=new WeakSet;Hoe=function(){var t;return(t=this.shadowRoot.querySelector('slot[name="header"]').assignedElements({flatten:!0}))==null?void 0:t.find(r=>r.matches('button[part~="back"]'))};R3=new WeakSet;Qoe=function(t){if(t.target===this)return;tl(this,X6,zoe).call(this);const e=Array.from(this.querySelectorAll('[role="menuitem"][aria-haspopup]'));for(const r of e)r.invokeTargetElement!=t.target&&t.newState=="open"&&r.getAttribute("aria-expanded")=="true"&&!r.invokeTargetElement.hidden&&r.invokeTargetElement.dispatchEvent(new K6({relatedTarget:r}));for(const r of e)r.setAttribute("aria-expanded",`${!r.submenuElement.hidden}`);tl(this,kN,Y6).call(this,!0)};X6=new WeakSet;zoe=function(){const e=this.querySelector('[role="menuitem"] > [role="menu"]:not([hidden])');this.container.classList.toggle("has-expanded",!!e)};D3=new WeakSet;Voe=function(t){var e;Eg(this,t.relatedTarget)||(mo(this,hy)&&((e=mo(this,dy))==null||e.focus()),mo(this,Y0)&&mo(this,Y0)!==t.relatedTarget&&!this.hidden&&(this.hidden=!0))};M3=new WeakSet;Koe=function(t){var e,r,n,i,a;const{key:o,ctrlKey:c,altKey:u,metaKey:l}=t;if(!(c||u||l)&&this.keysUsed.includes(o))if(t.preventDefault(),t.stopPropagation(),o==="Tab"){if(mo(this,hy)){this.hidden=!0;return}t.shiftKey?(r=(e=this.previousElementSibling)==null?void 0:e.focus)==null||r.call(e):(i=(n=this.nextElementSibling)==null?void 0:n.focus)==null||i.call(n),this.blur()}else o==="Escape"?((a=mo(this,dy))==null||a.focus(),mo(this,hy)&&(this.hidden=!0)):o==="Enter"||o===" "?this.handleSelect(t):this.handleMove(t)};j2=new WeakSet;LN=function(t){return t.composedPath().find(e=>["menuitemradio","menuitemcheckbox"].includes(e.role))};F3=new WeakSet;Goe=function(){return this.items.find(t=>t.tabIndex===0)};T2=new WeakSet;IN=function(t){for(const e of this.items)e.tabIndex=e===t?0:-1};uT=new WeakSet;U3=function(t,e){const r=[...this.checkedItems];t.type==="radio"&&this.radioGroupItems.forEach(n=>n.checked=!1),e?t.checked=!t.checked:t.checked=!0,this.checkedItems.some((n,i)=>n!=r[i])&&this.dispatchEvent(new Event("change",{bubbles:!0,composed:!0}))};dm.shadowRootOptions={mode:"open"};dm.getTemplateHTML=vYe;function yYe(t){return["menuitem","menuitemradio","menuitemcheckbox"].includes(t?.role)}function T_(t){var e;return(e=t.getAttribute("bounds")?I1(t,`#${t.getAttribute("bounds")}`):Vh(t)||t.parentElement)!=null?e:t}sr.customElements.get("media-chrome-menu")||sr.customElements.define("media-chrome-menu",dm);var Z6=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},$A=(t,e,r)=>(Z6(t,e,"read from private field"),r?r.call(t):e.get(t)),kp=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},uB=(t,e,r,n)=>(Z6(t,e,"write to private field"),e.set(t,r),r),Rm=(t,e,r)=>(Z6(t,e,"access private method"),r),dT,C2,$3,Woe,BN,J6,eU,Yoe,HA,l1,C_,H3,qoe,hT,Q3;function xYe(t){return`
    <style>
      :host {
        transition: var(--media-menu-item-transition,
          background .15s linear,
          opacity .2s ease-in-out
        );
        outline: var(--media-menu-item-outline, 0);
        outline-offset: var(--media-menu-item-outline-offset, -1px);
        cursor: var(--media-cursor, pointer);
        display: flex;
        align-items: center;
        align-self: stretch;
        justify-self: stretch;
        white-space: nowrap;
        white-space-collapse: collapse;
        text-wrap: nowrap;
        padding: .4em .8em .4em 1em;
      }

      :host(:focus-visible) {
        box-shadow: var(--media-menu-item-focus-shadow, inset 0 0 0 2px rgb(27 127 204 / .9));
        outline: var(--media-menu-item-hover-outline, 0);
        outline-offset: var(--media-menu-item-hover-outline-offset,  var(--media-menu-item-outline-offset, -1px));
      }

      :host(:hover) {
        cursor: var(--media-cursor, pointer);
        background: var(--media-menu-item-hover-background, rgb(92 92 102 / .5));
        outline: var(--media-menu-item-hover-outline);
        outline-offset: var(--media-menu-item-hover-outline-offset,  var(--media-menu-item-outline-offset, -1px));
      }

      :host([aria-checked="true"]) {
        background: var(--media-menu-item-checked-background);
      }

      :host([hidden]) {
        display: none;
      }

      :host([disabled]) {
        pointer-events: none;
        color: rgba(255, 255, 255, .3);
      }

      slot:not([name]) {
        width: 100%;
      }

      slot:not([name="submenu"]) {
        display: inline-flex;
        align-items: center;
        transition: inherit;
        opacity: var(--media-menu-item-opacity, 1);
      }

      slot[name="description"] {
        justify-content: end;
      }

      slot[name="description"] > span {
        display: inline-block;
        margin-inline: 1em .2em;
        max-width: var(--media-menu-item-description-max-width, 100px);
        text-overflow: ellipsis;
        overflow: hidden;
        font-size: .8em;
        font-weight: 400;
        text-align: right;
        position: relative;
        top: .04em;
      }

      slot[name="checked-indicator"] {
        display: none;
      }

      :host(:is([role="menuitemradio"],[role="menuitemcheckbox"])) slot[name="checked-indicator"] {
        display: var(--media-menu-item-checked-indicator-display, inline-block);
      }

      
      svg, img, ::slotted(svg), ::slotted(img) {
        height: var(--media-menu-item-icon-height, var(--media-control-height, 24px));
        fill: var(--media-icon-color, var(--media-primary-color, rgb(238 238 238)));
        display: block;
      }

      
      [part~="indicator"],
      ::slotted([part~="indicator"]) {
        fill: var(--media-menu-item-indicator-fill,
          var(--media-icon-color, var(--media-primary-color, rgb(238 238 238))));
        height: var(--media-menu-item-indicator-height, 1.25em);
        margin-right: .5ch;
      }

      [part~="checked-indicator"] {
        visibility: hidden;
      }

      :host([aria-checked="true"]) [part~="checked-indicator"] {
        visibility: visible;
      }
    </style>
    <slot name="checked-indicator">
      <svg aria-hidden="true" viewBox="0 1 24 24" part="checked-indicator indicator">
        <path d="m10 15.17 9.193-9.191 1.414 1.414-10.606 10.606-6.364-6.364 1.414-1.414 4.95 4.95Z"/>
      </svg>
    </slot>
    <slot name="prefix"></slot>
    <slot></slot>
    <slot name="description"></slot>
    <slot name="suffix">
      ${this.getSuffixSlotInnerHTML(t)}
    </slot>
    <slot name="submenu"></slot>
  `}function bYe(t){return""}const zf={TYPE:"type",VALUE:"value",CHECKED:"checked",DISABLED:"disabled"};class tv extends sr.HTMLElement{constructor(){if(super(),kp(this,$3),kp(this,BN),kp(this,eU),kp(this,l1),kp(this,H3),kp(this,hT),kp(this,dT,!1),kp(this,C2,void 0),kp(this,HA,()=>{var e,r;this.submenuElement.items&&this.setAttribute("submenusize",`${this.submenuElement.items.length}`);const n=this.shadowRoot.querySelector('slot[name="description"]'),i=(e=this.submenuElement.checkedItems)==null?void 0:e[0],a=(r=i?.dataset.description)!=null?r:i?.text,o=yu.createElement("span");o.textContent=a??"",n.replaceChildren(o)}),!this.shadowRoot){this.attachShadow(this.constructor.shadowRootOptions);const e=Lf(this.attributes);this.shadowRoot.innerHTML=this.constructor.getTemplateHTML(e)}this.shadowRoot.addEventListener("slotchange",this)}static get observedAttributes(){return[zf.TYPE,zf.DISABLED,zf.CHECKED,zf.VALUE]}enable(){this.hasAttribute("tabindex")||this.setAttribute("tabindex","-1"),ww(this)&&!this.hasAttribute("aria-checked")&&this.setAttribute("aria-checked","false"),this.addEventListener("click",this),this.addEventListener("keydown",this)}disable(){this.removeAttribute("tabindex"),this.removeEventListener("click",this),this.removeEventListener("keydown",this),this.removeEventListener("keyup",this)}handleEvent(e){switch(e.type){case"slotchange":Rm(this,$3,Woe).call(this,e);break;case"click":this.handleClick(e);break;case"keydown":Rm(this,H3,qoe).call(this,e);break;case"keyup":Rm(this,l1,C_).call(this,e);break}}attributeChangedCallback(e,r,n){e===zf.CHECKED&&ww(this)&&!$A(this,dT)?this.setAttribute("aria-checked",n!=null?"true":"false"):e===zf.TYPE&&n!==r?this.role="menuitem"+n:e===zf.DISABLED&&n!==r&&(n==null?this.enable():this.disable())}connectedCallback(){this.hasAttribute(zf.DISABLED)||this.enable(),this.role="menuitem"+this.type,uB(this,C2,z3(this,this.parentNode)),Rm(this,hT,Q3).call(this),this.submenuElement&&Rm(this,BN,J6).call(this)}disconnectedCallback(){this.disable(),Rm(this,hT,Q3).call(this),uB(this,C2,null)}get invokeTarget(){return this.getAttribute("invoketarget")}set invokeTarget(e){this.setAttribute("invoketarget",`${e}`)}get invokeTargetElement(){var e;return this.invokeTarget?(e=rk(this))==null?void 0:e.querySelector(`#${this.invokeTarget}`):this.submenuElement}get submenuElement(){return this.shadowRoot.querySelector('slot[name="submenu"]').assignedElements({flatten:!0})[0]}get type(){var e;return(e=this.getAttribute(zf.TYPE))!=null?e:""}set type(e){this.setAttribute(zf.TYPE,`${e}`)}get value(){var e;return(e=this.getAttribute(zf.VALUE))!=null?e:this.text}set value(e){this.setAttribute(zf.VALUE,e)}get text(){var e;return((e=this.textContent)!=null?e:"").trim()}get checked(){if(ww(this))return this.getAttribute("aria-checked")==="true"}set checked(e){ww(this)&&(uB(this,dT,!0),this.setAttribute("aria-checked",e?"true":"false"),e?this.part.add("checked"):this.part.remove("checked"))}handleClick(e){ww(this)||this.invokeTargetElement&&Eg(this,e.target)&&this.invokeTargetElement.dispatchEvent(new K6({relatedTarget:this}))}get keysUsed(){return["Enter"," "]}}dT=new WeakMap;C2=new WeakMap;$3=new WeakSet;Woe=function(t){const e=t.target;if(!e?.name)for(const n of e.assignedNodes({flatten:!0}))n instanceof Text&&n.textContent.trim()===""&&n.remove();e.name==="submenu"&&(this.submenuElement?Rm(this,BN,J6).call(this):Rm(this,eU,Yoe).call(this))};BN=new WeakSet;J6=async function(){this.setAttribute("aria-haspopup","menu"),this.setAttribute("aria-expanded",`${!this.submenuElement.hidden}`),this.submenuElement.addEventListener("change",$A(this,HA)),this.submenuElement.addEventListener("addmenuitem",$A(this,HA)),this.submenuElement.addEventListener("removemenuitem",$A(this,HA)),$A(this,HA).call(this)};eU=new WeakSet;Yoe=function(){this.removeAttribute("aria-haspopup"),this.removeAttribute("aria-expanded"),this.submenuElement.removeEventListener("change",$A(this,HA)),this.submenuElement.removeEventListener("addmenuitem",$A(this,HA)),this.submenuElement.removeEventListener("removemenuitem",$A(this,HA)),$A(this,HA).call(this)};HA=new WeakMap;l1=new WeakSet;C_=function(t){const{key:e}=t;if(!this.keysUsed.includes(e)){this.removeEventListener("keyup",Rm(this,l1,C_));return}this.handleClick(t)};H3=new WeakSet;qoe=function(t){const{metaKey:e,altKey:r,key:n}=t;if(e||r||!this.keysUsed.includes(n)){this.removeEventListener("keyup",Rm(this,l1,C_));return}this.addEventListener("keyup",Rm(this,l1,C_),{once:!0})};hT=new WeakSet;Q3=function(){var t;const e=(t=$A(this,C2))==null?void 0:t.radioGroupItems;if(!e)return;let r=e.filter(n=>n.getAttribute("aria-checked")==="true").pop();r||(r=e[0]);for(const n of e)n.setAttribute("aria-checked","false");r?.setAttribute("aria-checked","true")};tv.shadowRootOptions={mode:"open"};tv.getTemplateHTML=xYe;tv.getSuffixSlotInnerHTML=bYe;function ww(t){return t.type==="radio"||t.type==="checkbox"}function z3(t,e){if(!t)return null;const{host:r}=t.getRootNode();return!e&&r?z3(t,r):e?.items?e:z3(e,e?.parentNode)}sr.customElements.get("media-chrome-menu-item")||sr.customElements.define("media-chrome-menu-item",tv);function wYe(t){return`
    ${dm.getTemplateHTML(t)}
    <style>
      :host {
        --_menu-bg: rgb(20 20 30 / .8);
        background: var(--media-settings-menu-background,
            var(--media-menu-background,
              var(--media-control-background,
                var(--media-secondary-color, var(--_menu-bg)))));
        min-width: var(--media-settings-menu-min-width, 170px);
        border-radius: 2px 2px 0 0;
        overflow: hidden;
      }

      @-moz-document url-prefix() {
        :host{
          --_menu-bg: rgb(20 20 30);
        }
      }

      :host([role="menu"]) {
        
        justify-content: end;
      }

      slot:not([name]) {
        justify-content: var(--media-settings-menu-justify-content);
        flex-direction: var(--media-settings-menu-flex-direction, column);
        overflow: visible;
      }

      #container.has-expanded {
        --media-settings-menu-item-opacity: 0;
      }
    </style>
  `}class Xoe extends dm{get anchorElement(){return this.anchor!=="auto"?super.anchorElement:Vh(this).querySelector("media-settings-menu-button")}}Xoe.getTemplateHTML=wYe;sr.customElements.get("media-settings-menu")||sr.customElements.define("media-settings-menu",Xoe);function _Ye(t){return`
    ${tv.getTemplateHTML.call(this,t)}
    <style>
      slot:not([name="submenu"]) {
        opacity: var(--media-settings-menu-item-opacity, var(--media-menu-item-opacity));
      }

      :host([aria-expanded="true"]:hover) {
        background: transparent;
      }
    </style>
  `}function EYe(t){return`
    <svg aria-hidden="true" viewBox="0 0 20 24">
      <path d="m8.12 17.585-.742-.669 4.2-4.665-4.2-4.666.743-.669 4.803 5.335-4.803 5.334Z"/>
    </svg>
  `}class Ak extends tv{}Ak.shadowRootOptions={mode:"open"};Ak.getTemplateHTML=_Ye;Ak.getSuffixSlotInnerHTML=EYe;sr.customElements.get("media-settings-menu-item")||sr.customElements.define("media-settings-menu-item",Ak);class R1 extends xd{connectedCallback(){super.connectedCallback(),this.invokeTargetElement&&this.setAttribute("aria-haspopup","menu")}get invokeTarget(){return this.getAttribute("invoketarget")}set invokeTarget(e){this.setAttribute("invoketarget",`${e}`)}get invokeTargetElement(){var e;return this.invokeTarget?(e=rk(this))==null?void 0:e.querySelector(`#${this.invokeTarget}`):null}handleClick(){var e;(e=this.invokeTargetElement)==null||e.dispatchEvent(new K6({relatedTarget:this}))}}sr.customElements.get("media-chrome-menu-button")||sr.customElements.define("media-chrome-menu-button",R1);function SYe(){return`
    <style>
      :host([aria-expanded="true"]) slot[name=tooltip] {
        display: none;
      }
    </style>
    <slot name="icon">
      <svg aria-hidden="true" viewBox="0 0 24 24">
        <path d="M4.5 14.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Zm7.5 0a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Zm7.5 0a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Z"/>
      </svg>
    </slot>
  `}function jYe(){return Ai("Settings")}class tU extends R1{static get observedAttributes(){return[...super.observedAttributes,"target"]}connectedCallback(){super.connectedCallback(),this.setAttribute("aria-label",Ai("settings"))}get invokeTargetElement(){return this.invokeTarget!=null?super.invokeTargetElement:Vh(this).querySelector("media-settings-menu")}}tU.getSlotTemplateHTML=SYe;tU.getTooltipContentHTML=jYe;sr.customElements.get("media-settings-menu-button")||sr.customElements.define("media-settings-menu-button",tU);var rU=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},Zoe=(t,e,r)=>(rU(t,e,"read from private field"),r?r.call(t):e.get(t)),WS=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},V3=(t,e,r,n)=>(rU(t,e,"write to private field"),e.set(t,r),r),YS=(t,e,r)=>(rU(t,e,"access private method"),r),Xw,PN,fT,K3,mT,G3;class TYe extends dm{constructor(){super(...arguments),WS(this,fT),WS(this,mT),WS(this,Xw,[]),WS(this,PN,void 0)}static get observedAttributes(){return[...super.observedAttributes,gt.MEDIA_AUDIO_TRACK_LIST,gt.MEDIA_AUDIO_TRACK_ENABLED,gt.MEDIA_AUDIO_TRACK_UNAVAILABLE]}attributeChangedCallback(e,r,n){super.attributeChangedCallback(e,r,n),e===gt.MEDIA_AUDIO_TRACK_ENABLED&&r!==n?this.value=n:e===gt.MEDIA_AUDIO_TRACK_LIST&&r!==n&&(V3(this,Xw,cKe(n??"")),YS(this,fT,K3).call(this))}connectedCallback(){super.connectedCallback(),this.addEventListener("change",YS(this,mT,G3))}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("change",YS(this,mT,G3))}get anchorElement(){var e;return this.anchor!=="auto"?super.anchorElement:(e=Vh(this))==null?void 0:e.querySelector("media-audio-track-menu-button")}get mediaAudioTrackList(){return Zoe(this,Xw)}set mediaAudioTrackList(e){V3(this,Xw,e),YS(this,fT,K3).call(this)}get mediaAudioTrackEnabled(){var e;return(e=Cl(this,gt.MEDIA_AUDIO_TRACK_ENABLED))!=null?e:""}set mediaAudioTrackEnabled(e){Nl(this,gt.MEDIA_AUDIO_TRACK_ENABLED,e)}}Xw=new WeakMap;PN=new WeakMap;fT=new WeakSet;K3=function(){if(Zoe(this,PN)===JSON.stringify(this.mediaAudioTrackList))return;V3(this,PN,JSON.stringify(this.mediaAudioTrackList));const t=this.mediaAudioTrackList;this.defaultSlot.textContent="",t.sort((e,r)=>e.id.localeCompare(r.id,void 0,{numeric:!0}));for(const e of t){const r=this.formatMenuItemText(e.label,e),n=o1({type:"radio",text:r,value:`${e.id}`,checked:e.enabled});n.prepend(fy(this,"checked-indicator")),this.defaultSlot.append(n)}};mT=new WeakSet;G3=function(){if(this.value==null)return;const t=new sr.CustomEvent(Gn.MEDIA_AUDIO_TRACK_REQUEST,{composed:!0,bubbles:!0,detail:this.value});this.dispatchEvent(t)};sr.customElements.get("media-audio-track-menu")||sr.customElements.define("media-audio-track-menu",TYe);const CYe=`<svg aria-hidden="true" viewBox="0 0 24 24">
  <path d="M11 17H9.5V7H11v10Zm-3-3H6.5v-4H8v4Zm6-5h-1.5v6H14V9Zm3 7h-1.5V8H17v8Z"/>
  <path d="M22 12c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2s10 4.477 10 10Zm-2 0a8 8 0 1 0-16 0 8 8 0 0 0 16 0Z"/>
</svg>`;function NYe(){return`
    <style>
      :host([aria-expanded="true"]) slot[name=tooltip] {
        display: none;
      }
    </style>
    <slot name="icon">${CYe}</slot>
  `}function kYe(){return Ai("Audio")}const UW=t=>{const e=Ai("Audio");t.setAttribute("aria-label",e)};class nU extends R1{static get observedAttributes(){return[...super.observedAttributes,gt.MEDIA_AUDIO_TRACK_ENABLED,gt.MEDIA_AUDIO_TRACK_UNAVAILABLE]}connectedCallback(){super.connectedCallback(),UW(this)}attributeChangedCallback(e,r,n){super.attributeChangedCallback(e,r,n),e===gt.MEDIA_LANG&&UW(this)}get invokeTargetElement(){var e;return this.invokeTarget!=null?super.invokeTargetElement:(e=Vh(this))==null?void 0:e.querySelector("media-audio-track-menu")}get mediaAudioTrackEnabled(){var e;return(e=Cl(this,gt.MEDIA_AUDIO_TRACK_ENABLED))!=null?e:""}set mediaAudioTrackEnabled(e){Nl(this,gt.MEDIA_AUDIO_TRACK_ENABLED,e)}}nU.getSlotTemplateHTML=NYe;nU.getTooltipContentHTML=kYe;sr.customElements.get("media-audio-track-menu-button")||sr.customElements.define("media-audio-track-menu-button",nU);var iU=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},LYe=(t,e,r)=>(iU(t,e,"read from private field"),e.get(t)),dB=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},IYe=(t,e,r,n)=>(iU(t,e,"write to private field"),e.set(t,r),r),qS=(t,e,r)=>(iU(t,e,"access private method"),r),ON,AT,W3,pT,Y3;const BYe=`
  <svg aria-hidden="true" viewBox="0 0 26 24" part="captions-indicator indicator">
    <path d="M22.83 5.68a2.58 2.58 0 0 0-2.3-2.5c-3.62-.24-11.44-.24-15.06 0a2.58 2.58 0 0 0-2.3 2.5c-.23 4.21-.23 8.43 0 12.64a2.58 2.58 0 0 0 2.3 2.5c3.62.24 11.44.24 15.06 0a2.58 2.58 0 0 0 2.3-2.5c.23-4.21.23-8.43 0-12.64Zm-11.39 9.45a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.92 3.92 0 0 1 .92-2.77 3.18 3.18 0 0 1 2.43-1 2.94 2.94 0 0 1 2.13.78c.364.359.62.813.74 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.17 1.61 1.61 0 0 0-1.29.58 2.79 2.79 0 0 0-.5 1.89 3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.48 1.48 0 0 0 1-.37 2.1 2.1 0 0 0 .59-1.14l1.4.44a3.23 3.23 0 0 1-1.07 1.69Zm7.22 0a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.88 3.88 0 0 1 .93-2.77 3.14 3.14 0 0 1 2.42-1 3 3 0 0 1 2.16.82 2.8 2.8 0 0 1 .73 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.21 1.61 1.61 0 0 0-1.29.58A2.79 2.79 0 0 0 15 12a3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.44 1.44 0 0 0 1-.37 2.1 2.1 0 0 0 .6-1.15l1.4.44a3.17 3.17 0 0 1-1.1 1.7Z"/>
  </svg>`;function PYe(t){return`
    ${dm.getTemplateHTML(t)}
    <slot name="captions-indicator" hidden>${BYe}</slot>
  `}class Joe extends dm{constructor(){super(...arguments),dB(this,AT),dB(this,pT),dB(this,ON,void 0)}static get observedAttributes(){return[...super.observedAttributes,gt.MEDIA_SUBTITLES_LIST,gt.MEDIA_SUBTITLES_SHOWING]}attributeChangedCallback(e,r,n){super.attributeChangedCallback(e,r,n),e===gt.MEDIA_SUBTITLES_LIST&&r!==n?qS(this,AT,W3).call(this):e===gt.MEDIA_SUBTITLES_SHOWING&&r!==n&&(this.value=n||"",qS(this,AT,W3).call(this))}connectedCallback(){super.connectedCallback(),this.addEventListener("change",qS(this,pT,Y3))}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("change",qS(this,pT,Y3))}get anchorElement(){return this.anchor!=="auto"?super.anchorElement:Vh(this).querySelector("media-captions-menu-button")}get mediaSubtitlesList(){return $W(this,gt.MEDIA_SUBTITLES_LIST)}set mediaSubtitlesList(e){HW(this,gt.MEDIA_SUBTITLES_LIST,e)}get mediaSubtitlesShowing(){return $W(this,gt.MEDIA_SUBTITLES_SHOWING)}set mediaSubtitlesShowing(e){HW(this,gt.MEDIA_SUBTITLES_SHOWING,e)}}ON=new WeakMap;AT=new WeakSet;W3=function(){var t;const e=LYe(this,ON)!==JSON.stringify(this.mediaSubtitlesList),r=this.value!==this.getAttribute(gt.MEDIA_SUBTITLES_SHOWING);if(!e&&!r)return;IYe(this,ON,JSON.stringify(this.mediaSubtitlesList)),this.defaultSlot.textContent="";const n=!this.value,i=o1({type:"radio",text:this.formatMenuItemText(Ai("Off")),value:"off",checked:n});i.prepend(fy(this,"checked-indicator")),this.defaultSlot.append(i);const a=this.mediaSubtitlesList;for(const o of a){const c=o1({type:"radio",text:this.formatMenuItemText(o.label,o),value:i3(o),checked:this.value==i3(o)});c.prepend(fy(this,"checked-indicator")),((t=o.kind)!=null?t:"subs")==="captions"&&c.append(fy(this,"captions-indicator")),this.defaultSlot.append(c)}};pT=new WeakSet;Y3=function(){const t=this.mediaSubtitlesShowing,e=this.getAttribute(gt.MEDIA_SUBTITLES_SHOWING),r=this.value!==e;if(t?.length&&r&&this.dispatchEvent(new sr.CustomEvent(Gn.MEDIA_DISABLE_SUBTITLES_REQUEST,{composed:!0,bubbles:!0,detail:t})),!this.value||!r)return;const n=new sr.CustomEvent(Gn.MEDIA_SHOW_SUBTITLES_REQUEST,{composed:!0,bubbles:!0,detail:this.value});this.dispatchEvent(n)};Joe.getTemplateHTML=PYe;const $W=(t,e)=>{const r=t.getAttribute(e);return r?ok(r):[]},HW=(t,e,r)=>{if(!r?.length){t.removeAttribute(e);return}const n=x_(r);t.getAttribute(e)!==n&&t.setAttribute(e,n)};sr.customElements.get("media-captions-menu")||sr.customElements.define("media-captions-menu",Joe);const OYe=`<svg aria-hidden="true" viewBox="0 0 26 24">
  <path d="M22.83 5.68a2.58 2.58 0 0 0-2.3-2.5c-3.62-.24-11.44-.24-15.06 0a2.58 2.58 0 0 0-2.3 2.5c-.23 4.21-.23 8.43 0 12.64a2.58 2.58 0 0 0 2.3 2.5c3.62.24 11.44.24 15.06 0a2.58 2.58 0 0 0 2.3-2.5c.23-4.21.23-8.43 0-12.64Zm-11.39 9.45a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.92 3.92 0 0 1 .92-2.77 3.18 3.18 0 0 1 2.43-1 2.94 2.94 0 0 1 2.13.78c.364.359.62.813.74 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.17 1.61 1.61 0 0 0-1.29.58 2.79 2.79 0 0 0-.5 1.89 3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.48 1.48 0 0 0 1-.37 2.1 2.1 0 0 0 .59-1.14l1.4.44a3.23 3.23 0 0 1-1.07 1.69Zm7.22 0a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.88 3.88 0 0 1 .93-2.77 3.14 3.14 0 0 1 2.42-1 3 3 0 0 1 2.16.82 2.8 2.8 0 0 1 .73 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.21 1.61 1.61 0 0 0-1.29.58A2.79 2.79 0 0 0 15 12a3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.44 1.44 0 0 0 1-.37 2.1 2.1 0 0 0 .6-1.15l1.4.44a3.17 3.17 0 0 1-1.1 1.7Z"/>
</svg>`,RYe=`<svg aria-hidden="true" viewBox="0 0 26 24">
  <path d="M17.73 14.09a1.4 1.4 0 0 1-1 .37 1.579 1.579 0 0 1-1.27-.58A3 3 0 0 1 15 12a2.8 2.8 0 0 1 .5-1.85 1.63 1.63 0 0 1 1.29-.57 1.47 1.47 0 0 1 1.51 1.2l1.43-.34A2.89 2.89 0 0 0 19 9.07a3 3 0 0 0-2.14-.78 3.14 3.14 0 0 0-2.42 1 3.91 3.91 0 0 0-.93 2.78 3.74 3.74 0 0 0 .92 2.66 3.07 3.07 0 0 0 2.34 1 3.07 3.07 0 0 0 1.91-.57 3.17 3.17 0 0 0 1.07-1.74l-1.4-.45c-.083.43-.3.822-.62 1.12Zm-7.22 0a1.43 1.43 0 0 1-1 .37 1.58 1.58 0 0 1-1.27-.58A3 3 0 0 1 7.76 12a2.8 2.8 0 0 1 .5-1.85 1.63 1.63 0 0 1 1.29-.57 1.47 1.47 0 0 1 1.51 1.2l1.43-.34a2.81 2.81 0 0 0-.74-1.32 2.94 2.94 0 0 0-2.13-.78 3.18 3.18 0 0 0-2.43 1 4 4 0 0 0-.92 2.78 3.74 3.74 0 0 0 .92 2.66 3.07 3.07 0 0 0 2.34 1 3.07 3.07 0 0 0 1.91-.57 3.23 3.23 0 0 0 1.07-1.74l-1.4-.45a2.06 2.06 0 0 1-.6 1.07Zm12.32-8.41a2.59 2.59 0 0 0-2.3-2.51C18.72 3.05 15.86 3 13 3c-2.86 0-5.72.05-7.53.17a2.59 2.59 0 0 0-2.3 2.51c-.23 4.207-.23 8.423 0 12.63a2.57 2.57 0 0 0 2.3 2.5c1.81.13 4.67.19 7.53.19 2.86 0 5.72-.06 7.53-.19a2.57 2.57 0 0 0 2.3-2.5c.23-4.207.23-8.423 0-12.63Zm-1.49 12.53a1.11 1.11 0 0 1-.91 1.11c-1.67.11-4.45.18-7.43.18-2.98 0-5.76-.07-7.43-.18a1.11 1.11 0 0 1-.91-1.11c-.21-4.14-.21-8.29 0-12.43a1.11 1.11 0 0 1 .91-1.11C7.24 4.56 10 4.49 13 4.49s5.76.07 7.43.18a1.11 1.11 0 0 1 .91 1.11c.21 4.14.21 8.29 0 12.43Z"/>
</svg>`;function DYe(){return`
    <style>
      :host([data-captions-enabled="true"]) slot[name=off] {
        display: none !important;
      }

      
      :host(:not([data-captions-enabled="true"])) slot[name=on] {
        display: none !important;
      }

      :host([aria-expanded="true"]) slot[name=tooltip] {
        display: none;
      }
    </style>

    <slot name="icon">
      <slot name="on">${OYe}</slot>
      <slot name="off">${RYe}</slot>
    </slot>
  `}function MYe(){return Ai("Captions")}const QW=t=>{t.setAttribute("data-captions-enabled",Dae(t).toString())},zW=t=>{t.setAttribute("aria-label",Ai("closed captions"))};class sU extends R1{static get observedAttributes(){return[...super.observedAttributes,gt.MEDIA_SUBTITLES_LIST,gt.MEDIA_SUBTITLES_SHOWING,gt.MEDIA_LANG]}connectedCallback(){super.connectedCallback(),zW(this),QW(this)}attributeChangedCallback(e,r,n){super.attributeChangedCallback(e,r,n),e===gt.MEDIA_SUBTITLES_SHOWING?QW(this):e===gt.MEDIA_LANG&&zW(this)}get invokeTargetElement(){var e;return this.invokeTarget!=null?super.invokeTargetElement:(e=Vh(this))==null?void 0:e.querySelector("media-captions-menu")}get mediaSubtitlesList(){return VW(this,gt.MEDIA_SUBTITLES_LIST)}set mediaSubtitlesList(e){KW(this,gt.MEDIA_SUBTITLES_LIST,e)}get mediaSubtitlesShowing(){return VW(this,gt.MEDIA_SUBTITLES_SHOWING)}set mediaSubtitlesShowing(e){KW(this,gt.MEDIA_SUBTITLES_SHOWING,e)}}sU.getSlotTemplateHTML=DYe;sU.getTooltipContentHTML=MYe;const VW=(t,e)=>{const r=t.getAttribute(e);return r?ok(r):[]},KW=(t,e,r)=>{if(!r?.length){t.removeAttribute(e);return}const n=x_(r);t.getAttribute(e)!==n&&t.setAttribute(e,n)};sr.customElements.get("media-captions-menu-button")||sr.customElements.define("media-captions-menu-button",sU);var ele=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},Xx=(t,e,r)=>(ele(t,e,"read from private field"),r?r.call(t):e.get(t)),hB=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Ex=(t,e,r)=>(ele(t,e,"access private method"),r),w0,Zx,Zw,gT,q3;const fB={RATES:"rates"};class FYe extends dm{constructor(){super(),hB(this,Zx),hB(this,gT),hB(this,w0,new m6(this,fB.RATES,{defaultValue:poe})),Ex(this,Zx,Zw).call(this)}static get observedAttributes(){return[...super.observedAttributes,gt.MEDIA_PLAYBACK_RATE,fB.RATES]}attributeChangedCallback(e,r,n){super.attributeChangedCallback(e,r,n),e===gt.MEDIA_PLAYBACK_RATE&&r!=n?(this.value=n,Ex(this,Zx,Zw).call(this)):e===fB.RATES&&r!=n&&(Xx(this,w0).value=n,Ex(this,Zx,Zw).call(this))}connectedCallback(){super.connectedCallback(),this.addEventListener("change",Ex(this,gT,q3))}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("change",Ex(this,gT,q3))}get anchorElement(){return this.anchor!=="auto"?super.anchorElement:Vh(this).querySelector("media-playback-rate-menu-button")}get rates(){return Xx(this,w0)}set rates(e){e?Array.isArray(e)?Xx(this,w0).value=e.join(" "):typeof e=="string"&&(Xx(this,w0).value=e):Xx(this,w0).value="",Ex(this,Zx,Zw).call(this)}get mediaPlaybackRate(){return Tl(this,gt.MEDIA_PLAYBACK_RATE,Ab)}set mediaPlaybackRate(e){Dc(this,gt.MEDIA_PLAYBACK_RATE,e)}}w0=new WeakMap;Zx=new WeakSet;Zw=function(){this.defaultSlot.textContent="";const t=this.mediaPlaybackRate,e=new Set(Array.from(Xx(this,w0)).map(n=>Number(n)));t>0&&!e.has(t)&&e.add(t);const r=Array.from(e).sort((n,i)=>n-i);for(const n of r){const i=o1({type:"radio",text:this.formatMenuItemText(`${n}x`,n),value:n.toString(),checked:t===n});i.prepend(fy(this,"checked-indicator")),this.defaultSlot.append(i)}};gT=new WeakSet;q3=function(){if(!this.value)return;const t=new sr.CustomEvent(Gn.MEDIA_PLAYBACK_RATE_REQUEST,{composed:!0,bubbles:!0,detail:this.value});this.dispatchEvent(t)};sr.customElements.get("media-playback-rate-menu")||sr.customElements.define("media-playback-rate-menu",FYe);const vT=1;function UYe(t){return`
    <style>
      :host {
        min-width: 5ch;
        padding: var(--media-button-padding, var(--media-control-padding, 10px 5px));
      }
      
      :host([aria-expanded="true"]) slot {
        display: block;
      }

      :host([aria-expanded="true"]) slot[name=tooltip] {
        display: none;
      }
    </style>
    <slot name="icon">${t.mediaplaybackrate||vT}x</slot>
  `}function $Ye(){return Ai("Playback rate")}class aU extends R1{static get observedAttributes(){return[...super.observedAttributes,gt.MEDIA_PLAYBACK_RATE]}constructor(){var e;super(),this.container=this.shadowRoot.querySelector('slot[name="icon"]'),this.container.innerHTML=`${(e=this.mediaPlaybackRate)!=null?e:vT}x`}attributeChangedCallback(e,r,n){if(super.attributeChangedCallback(e,r,n),e===gt.MEDIA_PLAYBACK_RATE){const i=n?+n:Number.NaN,a=Number.isNaN(i)?vT:i;this.container.innerHTML=`${a}x`,this.setAttribute("aria-label",Ai("Playback rate {playbackRate}",{playbackRate:a}))}}get invokeTargetElement(){return this.invokeTarget!=null?super.invokeTargetElement:Vh(this).querySelector("media-playback-rate-menu")}get mediaPlaybackRate(){return Tl(this,gt.MEDIA_PLAYBACK_RATE,vT)}set mediaPlaybackRate(e){Dc(this,gt.MEDIA_PLAYBACK_RATE,e)}}aU.getSlotTemplateHTML=UYe;aU.getTooltipContentHTML=$Ye;sr.customElements.get("media-playback-rate-menu-button")||sr.customElements.define("media-playback-rate-menu-button",aU);var oU=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},Jw=(t,e,r)=>(oU(t,e,"read from private field"),r?r.call(t):e.get(t)),XS=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},GW=(t,e,r,n)=>(oU(t,e,"write to private field"),e.set(t,r),r),Sx=(t,e,r)=>(oU(t,e,"access private method"),r),e2,pb,Jx,t2,yT,X3;class HYe extends dm{constructor(){super(...arguments),XS(this,Jx),XS(this,yT),XS(this,e2,[]),XS(this,pb,{})}static get observedAttributes(){return[...super.observedAttributes,gt.MEDIA_RENDITION_LIST,gt.MEDIA_RENDITION_SELECTED,gt.MEDIA_RENDITION_UNAVAILABLE,gt.MEDIA_HEIGHT]}static formatMenuItemText(e,r){return super.formatMenuItemText(e,r)}static formatRendition(e,{showBitrate:r=!1}={}){const n=`${Math.min(e.width,e.height)}p`;if(r&&e.bitrate){const i=e.bitrate/1e6,a=`${i.toFixed(i<1?1:0)} Mbps`;return`${n} (${a})`}return this.formatMenuItemText(n,e)}static compareRendition(e,r){var n,i;return r.height===e.height?((n=r.bitrate)!=null?n:0)-((i=e.bitrate)!=null?i:0):r.height-e.height}attributeChangedCallback(e,r,n){super.attributeChangedCallback(e,r,n),e===gt.MEDIA_RENDITION_SELECTED&&r!==n?(this.value=n??"auto",Sx(this,Jx,t2).call(this)):e===gt.MEDIA_RENDITION_LIST&&r!==n?(GW(this,e2,sKe(n)),Sx(this,Jx,t2).call(this)):e===gt.MEDIA_HEIGHT&&r!==n&&Sx(this,Jx,t2).call(this)}connectedCallback(){super.connectedCallback(),this.addEventListener("change",Sx(this,yT,X3))}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("change",Sx(this,yT,X3))}get anchorElement(){return this.anchor!=="auto"?super.anchorElement:Vh(this).querySelector("media-rendition-menu-button")}get mediaRenditionList(){return Jw(this,e2)}set mediaRenditionList(e){GW(this,e2,e),Sx(this,Jx,t2).call(this)}get mediaRenditionSelected(){return Cl(this,gt.MEDIA_RENDITION_SELECTED)}set mediaRenditionSelected(e){Nl(this,gt.MEDIA_RENDITION_SELECTED,e)}get mediaHeight(){return Tl(this,gt.MEDIA_HEIGHT)}set mediaHeight(e){Dc(this,gt.MEDIA_HEIGHT,e)}compareRendition(e,r){return this.constructor.compareRendition(e,r)}formatMenuItemText(e,r){return this.constructor.formatMenuItemText(e,r)}formatRendition(e,r){return this.constructor.formatRendition(e,r)}showRenditionBitrate(e){return this.mediaRenditionList.some(r=>r!==e&&r.height===e.height&&r.bitrate!==e.bitrate)}}e2=new WeakMap;pb=new WeakMap;Jx=new WeakSet;t2=function(){if(Jw(this,pb).mediaRenditionList===JSON.stringify(this.mediaRenditionList)&&Jw(this,pb).mediaHeight===this.mediaHeight)return;Jw(this,pb).mediaRenditionList=JSON.stringify(this.mediaRenditionList),Jw(this,pb).mediaHeight=this.mediaHeight;const t=this.mediaRenditionList.sort(this.compareRendition.bind(this)),e=t.find(o=>o.id===this.mediaRenditionSelected);for(const o of t)o.selected=o===e;this.defaultSlot.textContent="";const r=!this.mediaRenditionSelected;for(const o of t){const c=this.formatRendition(o,{showBitrate:this.showRenditionBitrate(o)}),u=o1({type:"radio",text:c,value:`${o.id}`,checked:o.selected&&!r});u.prepend(fy(this,"checked-indicator")),this.defaultSlot.append(u)}const n=e&&this.showRenditionBitrate(e),i=r?e?this.formatMenuItemText(`${Ai("Auto")}  ${this.formatRendition(e,{showBitrate:n})}`,e):this.formatMenuItemText(`${Ai("Auto")} (${this.mediaHeight}p)`):this.formatMenuItemText(Ai("Auto")),a=o1({type:"radio",text:i,value:"auto",checked:r});a.dataset.description=i,a.prepend(fy(this,"checked-indicator")),this.defaultSlot.append(a)};yT=new WeakSet;X3=function(){if(this.value==null)return;const t=new sr.CustomEvent(Gn.MEDIA_RENDITION_REQUEST,{composed:!0,bubbles:!0,detail:this.value});this.dispatchEvent(t)};sr.customElements.get("media-rendition-menu")||sr.customElements.define("media-rendition-menu",HYe);const QYe=`<svg aria-hidden="true" viewBox="0 0 24 24">
  <path d="M13.5 2.5h2v6h-2v-2h-11v-2h11v-2Zm4 2h4v2h-4v-2Zm-12 4h2v6h-2v-2h-3v-2h3v-2Zm4 2h12v2h-12v-2Zm1 4h2v6h-2v-2h-8v-2h8v-2Zm4 2h7v2h-7v-2Z" />
</svg>`;function zYe(){return`
    <style>
      :host([aria-expanded="true"]) slot[name=tooltip] {
        display: none;
      }
    </style>
    <slot name="icon">${QYe}</slot>
  `}function VYe(){return Ai("Quality")}class lU extends R1{static get observedAttributes(){return[...super.observedAttributes,gt.MEDIA_RENDITION_SELECTED,gt.MEDIA_RENDITION_UNAVAILABLE,gt.MEDIA_HEIGHT]}connectedCallback(){super.connectedCallback(),this.setAttribute("aria-label",Ai("quality"))}get invokeTargetElement(){return this.invokeTarget!=null?super.invokeTargetElement:Vh(this).querySelector("media-rendition-menu")}get mediaRenditionSelected(){return Cl(this,gt.MEDIA_RENDITION_SELECTED)}set mediaRenditionSelected(e){Nl(this,gt.MEDIA_RENDITION_SELECTED,e)}get mediaHeight(){return Tl(this,gt.MEDIA_HEIGHT)}set mediaHeight(e){Dc(this,gt.MEDIA_HEIGHT,e)}}lU.getSlotTemplateHTML=zYe;lU.getTooltipContentHTML=VYe;sr.customElements.get("media-rendition-menu-button")||sr.customElements.define("media-rendition-menu-button",lU);var cU=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},LA=(t,e,r)=>(cU(t,e,"read from private field"),r?r.call(t):e.get(t)),gA=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},tle=(t,e,r,n)=>(cU(t,e,"write to private field"),e.set(t,r),r),Yf=(t,e,r)=>(cU(t,e,"access private method"),r),c1,N_,pk,Hv,gb,uU,rle,xT,Z3,bT,J3,nle,RN,DN,wT;function KYe(t){return`
      ${dm.getTemplateHTML(t)}
      <style>
        :host {
          --_menu-bg: rgb(20 20 30 / .8);
          background: var(--media-settings-menu-background,
            var(--media-menu-background,
              var(--media-control-background,
                var(--media-secondary-color, var(--_menu-bg)))));
          min-width: var(--media-settings-menu-min-width, 170px);
          border-radius: 2px;
          overflow: hidden;
        }
      </style>
    `}class ile extends dm{constructor(){super(),gA(this,N_),gA(this,Hv),gA(this,uU),gA(this,xT),gA(this,J3),gA(this,c1,!1),gA(this,bT,e=>{const r=e.target,n=r?.nodeName==="VIDEO",i=Yf(this,xT,Z3).call(this,r);(n||i)&&(LA(this,c1)?Yf(this,Hv,gb).call(this):Yf(this,J3,nle).call(this,e))}),gA(this,RN,e=>{const r=e.target,n=this.contains(r),i=e.button===2,a=r?.nodeName==="VIDEO",o=Yf(this,xT,Z3).call(this,r);n||i&&(a||o)||Yf(this,Hv,gb).call(this)}),gA(this,DN,e=>{e.key==="Escape"&&Yf(this,Hv,gb).call(this)}),gA(this,wT,e=>{var r,n;const i=e.target;if((r=i.matches)!=null&&r.call(i,'button[invoke="copy"]')){const a=(n=i.closest("media-context-menu-item"))==null?void 0:n.querySelector('input[slot="copy"]');a&&navigator.clipboard.writeText(a.value)}Yf(this,Hv,gb).call(this)}),this.setAttribute("noautohide",""),Yf(this,N_,pk).call(this)}connectedCallback(){super.connectedCallback(),Vh(this).addEventListener("contextmenu",LA(this,bT)),this.addEventListener("click",LA(this,wT))}disconnectedCallback(){super.disconnectedCallback(),Vh(this).removeEventListener("contextmenu",LA(this,bT)),this.removeEventListener("click",LA(this,wT)),document.removeEventListener("mousedown",LA(this,RN)),document.removeEventListener("keydown",LA(this,DN))}}c1=new WeakMap;N_=new WeakSet;pk=function(){this.hidden=!LA(this,c1)};Hv=new WeakSet;gb=function(){tle(this,c1,!1),Yf(this,N_,pk).call(this)};uU=new WeakSet;rle=function(){document.querySelectorAll("media-context-menu").forEach(e=>{var r;e!==this&&Yf(r=e,Hv,gb).call(r)})};xT=new WeakSet;Z3=function(t){return t?t.hasAttribute("slot")&&t.getAttribute("slot")==="media"?!0:t.nodeName.includes("-")&&t.tagName.includes("-")?t.hasAttribute("src")||t.hasAttribute("poster")||t.hasAttribute("preload")||t.hasAttribute("playsinline"):!1:!1};bT=new WeakMap;J3=new WeakSet;nle=function(t){t.preventDefault(),Yf(this,uU,rle).call(this),tle(this,c1,!0),this.style.position="fixed",this.style.left=`${t.clientX}px`,this.style.top=`${t.clientY}px`,Yf(this,N_,pk).call(this),document.addEventListener("mousedown",LA(this,RN),{once:!0}),document.addEventListener("keydown",LA(this,DN),{once:!0})};RN=new WeakMap;DN=new WeakMap;wT=new WeakMap;ile.getTemplateHTML=KYe;sr.customElements.get("media-context-menu")||sr.customElements.define("media-context-menu",ile);function GYe(t){return`
    ${tv.getTemplateHTML.call(this,t)}
    <style>
        ::slotted(*) {
            color: var(--media-text-color, white);
            text-decoration: none;
            border: none;
            background: none;
            cursor: pointer;
            padding: 0;
            min-height: var(--media-control-height, 24px);
        }
    </style>
  `}class dU extends tv{}dU.shadowRootOptions={mode:"open"};dU.getTemplateHTML=GYe;sr.customElements.get("media-context-menu-item")||sr.customElements.define("media-context-menu-item",dU);var sle=t=>{throw TypeError(t)},hU=(t,e,r)=>e.has(t)||sle("Cannot "+r),Fo=(t,e,r)=>(hU(t,e,"read from private field"),r?r.call(t):e.get(t)),Pm=(t,e,r)=>e.has(t)?sle("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),GA=(t,e,r,n)=>(hU(t,e,"write to private field"),e.set(t,r),r),gu=(t,e,r)=>(hU(t,e,"access private method"),r),gk=class{addEventListener(){}removeEventListener(){}dispatchEvent(t){return!0}};if(typeof DocumentFragment>"u"){class t extends gk{}globalThis.DocumentFragment=t}var fU=class extends gk{},WYe=class extends gk{},YYe={get(t){},define(t,e,r){},getName(t){return null},upgrade(t){},whenDefined(t){return Promise.resolve(fU)}},_T,qYe=class{constructor(e,r={}){Pm(this,_T),GA(this,_T,r?.detail)}get detail(){return Fo(this,_T)}initCustomEvent(){}};_T=new WeakMap;function XYe(t,e){return new fU}var ale={document:{createElement:XYe},DocumentFragment,customElements:YYe,CustomEvent:qYe,EventTarget:gk,HTMLElement:fU,HTMLVideoElement:WYe},ole=typeof window>"u"||typeof globalThis.customElements>"u",OA=ole?ale:globalThis,MN=ole?ale.document:globalThis.document;function ZYe(t){let e="";return Object.entries(t).forEach(([r,n])=>{n!=null&&(e+=`${eR(r)}: ${n}; `)}),e?e.trim():void 0}function eR(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function lle(t){return t.replace(/[-_]([a-z])/g,(e,r)=>r.toUpperCase())}function ff(t){if(t==null)return;let e=+t;return Number.isNaN(e)?void 0:e}function cle(t){let e=JYe(t).toString();return e?"?"+e:""}function JYe(t){let e={};for(let r in t)t[r]!=null&&(e[r]=t[r]);return new URLSearchParams(e)}var ule=(t,e)=>!t||!e?!1:t.contains(e)?!0:ule(t,e.getRootNode().host),dle="mux.com",eqe=()=>{try{return"3.11.4"}catch{}return"UNKNOWN"},tqe=eqe(),hle=()=>tqe,rqe=(t,{token:e,customDomain:r=dle,thumbnailTime:n,programTime:i}={})=>{var a;let o=e==null?n:void 0,{aud:c}=(a=Cb(e))!=null?a:{};if(!(e&&c!=="t"))return`https://image.${r}/${t}/thumbnail.webp${cle({token:e,time:o,program_time:i})}`},nqe=(t,{token:e,customDomain:r=dle,programStartTime:n,programEndTime:i}={})=>{var a;let{aud:o}=(a=Cb(e))!=null?a:{};if(!(e&&o!=="s"))return`https://image.${r}/${t}/storyboard.vtt${cle({token:e,format:"webp",program_start_time:n,program_end_time:i})}`},mU=t=>{if(t){if([Lo.LIVE,Lo.ON_DEMAND].includes(t))return t;if(t!=null&&t.includes("live"))return Lo.LIVE}},iqe={crossorigin:"crossOrigin",playsinline:"playsInline"};function sqe(t){var e;return(e=iqe[t])!=null?e:lle(t)}var eb,tb,Dh,aqe=class{constructor(e,r){Pm(this,eb),Pm(this,tb),Pm(this,Dh,[]),GA(this,eb,e),GA(this,tb,r)}[Symbol.iterator](){return Fo(this,Dh).values()}get length(){return Fo(this,Dh).length}get value(){var e;return(e=Fo(this,Dh).join(" "))!=null?e:""}set value(e){var r;e!==this.value&&(GA(this,Dh,[]),this.add(...(r=e?.split(" "))!=null?r:[]))}toString(){return this.value}item(e){return Fo(this,Dh)[e]}values(){return Fo(this,Dh).values()}keys(){return Fo(this,Dh).keys()}forEach(e){Fo(this,Dh).forEach(e)}add(...e){var r,n;e.forEach(i=>{this.contains(i)||Fo(this,Dh).push(i)}),!(this.value===""&&!((r=Fo(this,eb))!=null&&r.hasAttribute(`${Fo(this,tb)}`)))&&((n=Fo(this,eb))==null||n.setAttribute(`${Fo(this,tb)}`,`${this.value}`))}remove(...e){var r;e.forEach(n=>{Fo(this,Dh).splice(Fo(this,Dh).indexOf(n),1)}),(r=Fo(this,eb))==null||r.setAttribute(`${Fo(this,tb)}`,`${this.value}`)}contains(e){return Fo(this,Dh).includes(e)}toggle(e,r){return typeof r<"u"?r?(this.add(e),!0):(this.remove(e),!1):this.contains(e)?(this.remove(e),!1):(this.add(e),!0)}replace(e,r){this.remove(e),this.add(r)}};eb=new WeakMap,tb=new WeakMap,Dh=new WeakMap;var fle=`[mux-player ${hle()}]`;function Mp(...t){console.warn(fle,...t)}function pf(...t){console.error(fle,...t)}function mle(t){var e;let r=(e=t.message)!=null?e:"";t.context&&(r+=` ${t.context}`),t.file&&(r+=` ${Ki("Read more: ")}
https://github.com/muxinc/elements/blob/main/errors/${t.file}`),Mp(r)}var Jd={AUTOPLAY:"autoplay",CROSSORIGIN:"crossorigin",LOOP:"loop",MUTED:"muted",PLAYSINLINE:"playsinline",PRELOAD:"preload"},Rv={VOLUME:"volume",PLAYBACKRATE:"playbackrate",MUTED:"muted"},WW=Object.freeze({length:0,start(t){let e=t>>>0;if(e>=this.length)throw new DOMException(`Failed to execute 'start' on 'TimeRanges': The index provided (${e}) is greater than or equal to the maximum bound (${this.length}).`);return 0},end(t){let e=t>>>0;if(e>=this.length)throw new DOMException(`Failed to execute 'end' on 'TimeRanges': The index provided (${e}) is greater than or equal to the maximum bound (${this.length}).`);return 0}}),oqe=Object.values(Jd).filter(t=>Jd.PLAYSINLINE!==t),lqe=Object.values(Rv),cqe=[...oqe,...lqe],uqe=class extends OA.HTMLElement{static get observedAttributes(){return cqe}constructor(){super()}attributeChangedCallback(t,e,r){var n,i;switch(t){case Rv.MUTED:{this.media&&(this.media.muted=r!=null,this.media.defaultMuted=r!=null);return}case Rv.VOLUME:{let a=(n=ff(r))!=null?n:1;this.media&&(this.media.volume=a);return}case Rv.PLAYBACKRATE:{let a=(i=ff(r))!=null?i:1;this.media&&(this.media.playbackRate=a,this.media.defaultPlaybackRate=a);return}}}play(){var t,e;return(e=(t=this.media)==null?void 0:t.play())!=null?e:Promise.reject()}pause(){var t;(t=this.media)==null||t.pause()}load(){var t;(t=this.media)==null||t.load()}get media(){var t;return(t=this.shadowRoot)==null?void 0:t.querySelector("mux-video")}get audioTracks(){return this.media.audioTracks}get videoTracks(){return this.media.videoTracks}get audioRenditions(){return this.media.audioRenditions}get videoRenditions(){return this.media.videoRenditions}get paused(){var t,e;return(e=(t=this.media)==null?void 0:t.paused)!=null?e:!0}get duration(){var t,e;return(e=(t=this.media)==null?void 0:t.duration)!=null?e:NaN}get ended(){var t,e;return(e=(t=this.media)==null?void 0:t.ended)!=null?e:!1}get buffered(){var t,e;return(e=(t=this.media)==null?void 0:t.buffered)!=null?e:WW}get seekable(){var t,e;return(e=(t=this.media)==null?void 0:t.seekable)!=null?e:WW}get readyState(){var t,e;return(e=(t=this.media)==null?void 0:t.readyState)!=null?e:0}get videoWidth(){var t,e;return(e=(t=this.media)==null?void 0:t.videoWidth)!=null?e:0}get videoHeight(){var t,e;return(e=(t=this.media)==null?void 0:t.videoHeight)!=null?e:0}get currentSrc(){var t,e;return(e=(t=this.media)==null?void 0:t.currentSrc)!=null?e:""}get currentTime(){var t,e;return(e=(t=this.media)==null?void 0:t.currentTime)!=null?e:0}set currentTime(t){this.media&&(this.media.currentTime=Number(t))}get volume(){var t,e;return(e=(t=this.media)==null?void 0:t.volume)!=null?e:1}set volume(t){this.media&&(this.media.volume=Number(t))}get playbackRate(){var t,e;return(e=(t=this.media)==null?void 0:t.playbackRate)!=null?e:1}set playbackRate(t){this.media&&(this.media.playbackRate=Number(t))}get defaultPlaybackRate(){var t;return(t=ff(this.getAttribute(Rv.PLAYBACKRATE)))!=null?t:1}set defaultPlaybackRate(t){t!=null?this.setAttribute(Rv.PLAYBACKRATE,`${t}`):this.removeAttribute(Rv.PLAYBACKRATE)}get crossOrigin(){return _w(this,Jd.CROSSORIGIN)}set crossOrigin(t){this.setAttribute(Jd.CROSSORIGIN,`${t}`)}get autoplay(){return _w(this,Jd.AUTOPLAY)!=null}set autoplay(t){t?this.setAttribute(Jd.AUTOPLAY,typeof t=="string"?t:""):this.removeAttribute(Jd.AUTOPLAY)}get loop(){return _w(this,Jd.LOOP)!=null}set loop(t){t?this.setAttribute(Jd.LOOP,""):this.removeAttribute(Jd.LOOP)}get muted(){var t,e;return(e=(t=this.media)==null?void 0:t.muted)!=null?e:!1}set muted(t){this.media&&(this.media.muted=!!t)}get defaultMuted(){return _w(this,Jd.MUTED)!=null}set defaultMuted(t){t?this.setAttribute(Jd.MUTED,""):this.removeAttribute(Jd.MUTED)}get playsInline(){return _w(this,Jd.PLAYSINLINE)!=null}set playsInline(t){pf("playsInline is set to true by default and is not currently supported as a setter.")}get preload(){return this.media?this.media.preload:this.getAttribute("preload")}set preload(t){["","none","metadata","auto"].includes(t)?this.setAttribute(Jd.PRELOAD,t):this.removeAttribute(Jd.PRELOAD)}};function _w(t,e){return t.media?t.media.getAttribute(e):t.getAttribute(e)}var YW=uqe,dqe=`:host {
  --media-control-display: var(--controls);
  --media-loading-indicator-display: var(--loading-indicator);
  --media-dialog-display: var(--dialog);
  --media-play-button-display: var(--play-button);
  --media-live-button-display: var(--live-button);
  --media-seek-backward-button-display: var(--seek-backward-button);
  --media-seek-forward-button-display: var(--seek-forward-button);
  --media-mute-button-display: var(--mute-button);
  --media-captions-button-display: var(--captions-button);
  --media-captions-menu-button-display: var(--captions-menu-button, var(--media-captions-button-display));
  --media-rendition-menu-button-display: var(--rendition-menu-button);
  --media-audio-track-menu-button-display: var(--audio-track-menu-button);
  --media-airplay-button-display: var(--airplay-button);
  --media-pip-button-display: var(--pip-button);
  --media-fullscreen-button-display: var(--fullscreen-button);
  --media-cast-button-display: var(--cast-button, var(--_cast-button-drm-display));
  --media-playback-rate-button-display: var(--playback-rate-button);
  --media-playback-rate-menu-button-display: var(--playback-rate-menu-button);
  --media-volume-range-display: var(--volume-range);
  --media-time-range-display: var(--time-range);
  --media-time-display-display: var(--time-display);
  --media-duration-display-display: var(--duration-display);
  --media-title-display-display: var(--title-display);

  display: inline-block;
  line-height: 0;
  width: 100%;
}

a {
  color: #fff;
  font-size: 0.9em;
  text-decoration: underline;
}

media-theme {
  display: inline-block;
  line-height: 0;
  width: 100%;
  height: 100%;
  direction: ltr;
}

media-poster-image {
  display: inline-block;
  line-height: 0;
  width: 100%;
  height: 100%;
}

media-poster-image:not([src]):not([placeholdersrc]) {
  display: none;
}

::part(top),
[part~='top'] {
  --media-control-display: var(--controls, var(--top-controls));
  --media-play-button-display: var(--play-button, var(--top-play-button));
  --media-live-button-display: var(--live-button, var(--top-live-button));
  --media-seek-backward-button-display: var(--seek-backward-button, var(--top-seek-backward-button));
  --media-seek-forward-button-display: var(--seek-forward-button, var(--top-seek-forward-button));
  --media-mute-button-display: var(--mute-button, var(--top-mute-button));
  --media-captions-button-display: var(--captions-button, var(--top-captions-button));
  --media-captions-menu-button-display: var(
    --captions-menu-button,
    var(--media-captions-button-display, var(--top-captions-menu-button))
  );
  --media-rendition-menu-button-display: var(--rendition-menu-button, var(--top-rendition-menu-button));
  --media-audio-track-menu-button-display: var(--audio-track-menu-button, var(--top-audio-track-menu-button));
  --media-airplay-button-display: var(--airplay-button, var(--top-airplay-button));
  --media-pip-button-display: var(--pip-button, var(--top-pip-button));
  --media-fullscreen-button-display: var(--fullscreen-button, var(--top-fullscreen-button));
  --media-cast-button-display: var(--cast-button, var(--top-cast-button, var(--_cast-button-drm-display)));
  --media-playback-rate-button-display: var(--playback-rate-button, var(--top-playback-rate-button));
  --media-playback-rate-menu-button-display: var(
    --captions-menu-button,
    var(--media-playback-rate-button-display, var(--top-playback-rate-menu-button))
  );
  --media-volume-range-display: var(--volume-range, var(--top-volume-range));
  --media-time-range-display: var(--time-range, var(--top-time-range));
  --media-time-display-display: var(--time-display, var(--top-time-display));
  --media-duration-display-display: var(--duration-display, var(--top-duration-display));
  --media-title-display-display: var(--title-display, var(--top-title-display));
}

::part(center),
[part~='center'] {
  --media-control-display: var(--controls, var(--center-controls));
  --media-play-button-display: var(--play-button, var(--center-play-button));
  --media-live-button-display: var(--live-button, var(--center-live-button));
  --media-seek-backward-button-display: var(--seek-backward-button, var(--center-seek-backward-button));
  --media-seek-forward-button-display: var(--seek-forward-button, var(--center-seek-forward-button));
  --media-mute-button-display: var(--mute-button, var(--center-mute-button));
  --media-captions-button-display: var(--captions-button, var(--center-captions-button));
  --media-captions-menu-button-display: var(
    --captions-menu-button,
    var(--media-captions-button-display, var(--center-captions-menu-button))
  );
  --media-rendition-menu-button-display: var(--rendition-menu-button, var(--center-rendition-menu-button));
  --media-audio-track-menu-button-display: var(--audio-track-menu-button, var(--center-audio-track-menu-button));
  --media-airplay-button-display: var(--airplay-button, var(--center-airplay-button));
  --media-pip-button-display: var(--pip-button, var(--center-pip-button));
  --media-fullscreen-button-display: var(--fullscreen-button, var(--center-fullscreen-button));
  --media-cast-button-display: var(--cast-button, var(--center-cast-button, var(--_cast-button-drm-display)));
  --media-playback-rate-button-display: var(--playback-rate-button, var(--center-playback-rate-button));
  --media-playback-rate-menu-button-display: var(
    --playback-rate-menu-button,
    var(--media-playback-rate-button-display, var(--center-playback-rate-menu-button))
  );
  --media-volume-range-display: var(--volume-range, var(--center-volume-range));
  --media-time-range-display: var(--time-range, var(--center-time-range));
  --media-time-display-display: var(--time-display, var(--center-time-display));
  --media-duration-display-display: var(--duration-display, var(--center-duration-display));
}

::part(bottom),
[part~='bottom'] {
  --media-control-display: var(--controls, var(--bottom-controls));
  --media-play-button-display: var(--play-button, var(--bottom-play-button));
  --media-live-button-display: var(--live-button, var(--bottom-live-button));
  --media-seek-backward-button-display: var(--seek-backward-button, var(--bottom-seek-backward-button));
  --media-seek-forward-button-display: var(--seek-forward-button, var(--bottom-seek-forward-button));
  --media-mute-button-display: var(--mute-button, var(--bottom-mute-button));
  --media-captions-button-display: var(--captions-button, var(--bottom-captions-button));
  --media-captions-menu-button-display: var(
    --captions-menu-button,
    var(--media-captions-button-display, var(--bottom-captions-menu-button))
  );
  --media-rendition-menu-button-display: var(--rendition-menu-button, var(--bottom-rendition-menu-button));
  --media-audio-track-menu-button-display: var(--audio-track-menu-button, var(--bottom-audio-track-menu-button));
  --media-airplay-button-display: var(--airplay-button, var(--bottom-airplay-button));
  --media-pip-button-display: var(--pip-button, var(--bottom-pip-button));
  --media-fullscreen-button-display: var(--fullscreen-button, var(--bottom-fullscreen-button));
  --media-cast-button-display: var(--cast-button, var(--bottom-cast-button, var(--_cast-button-drm-display)));
  --media-playback-rate-button-display: var(--playback-rate-button, var(--bottom-playback-rate-button));
  --media-playback-rate-menu-button-display: var(
    --playback-rate-menu-button,
    var(--media-playback-rate-button-display, var(--bottom-playback-rate-menu-button))
  );
  --media-volume-range-display: var(--volume-range, var(--bottom-volume-range));
  --media-time-range-display: var(--time-range, var(--bottom-time-range));
  --media-time-display-display: var(--time-display, var(--bottom-time-display));
  --media-duration-display-display: var(--duration-display, var(--bottom-duration-display));
  --media-title-display-display: var(--title-display, var(--bottom-title-display));
}

:host([no-tooltips]) {
  --media-tooltip-display: none;
}
`,Ew=new WeakMap,hqe=class Ale{constructor(e,r){this.element=e,this.type=r,this.element.addEventListener(this.type,this);let n=Ew.get(this.element);n&&n.set(this.type,this)}set(e){if(typeof e=="function")this.handleEvent=e.bind(this.element);else if(typeof e=="object"&&typeof e.handleEvent=="function")this.handleEvent=e.handleEvent.bind(e);else{this.element.removeEventListener(this.type,this);let r=Ew.get(this.element);r&&r.delete(this.type)}}static for(e){Ew.has(e.element)||Ew.set(e.element,new Map);let r=e.attributeName.slice(2),n=Ew.get(e.element);return n&&n.has(r)?n.get(r):new Ale(e.element,r)}};function fqe(t,e){return t instanceof Hm&&t.attributeName.startsWith("on")?(hqe.for(t).set(e),t.element.removeAttributeNS(t.attributeNamespace,t.attributeName),!0):!1}function mqe(t,e){return e instanceof ple&&t instanceof O1?(e.renderInto(t),!0):!1}function Aqe(t,e){return e instanceof DocumentFragment&&t instanceof O1?(e.childNodes.length&&t.replace(...e.childNodes),!0):!1}function pqe(t,e){if(t instanceof Hm){let r=t.attributeNamespace,n=t.element.getAttributeNS(r,t.attributeName);return String(e)!==n&&(t.value=String(e)),!0}return t.value=String(e),!0}function gqe(t,e){if(t instanceof Hm&&e instanceof Element){let r=t.element;return r[t.attributeName]!==e&&(t.element.removeAttributeNS(t.attributeNamespace,t.attributeName),r[t.attributeName]=e),!0}return!1}function vqe(t,e){if(typeof e=="boolean"&&t instanceof Hm){let r=t.attributeNamespace,n=t.element.hasAttributeNS(r,t.attributeName);return e!==n&&(t.booleanValue=e),!0}return!1}function yqe(t,e){return e===!1&&t instanceof O1?(t.replace(""),!0):!1}function xqe(t,e){gqe(t,e)||vqe(t,e)||fqe(t,e)||yqe(t,e)||mqe(t,e)||Aqe(t,e)||pqe(t,e)}var mB=new Map,qW=new WeakMap,XW=new WeakMap,ple=class{constructor(e,r,n){this.strings=e,this.values=r,this.processor=n,this.stringsKey=this.strings.join("")}get template(){if(mB.has(this.stringsKey))return mB.get(this.stringsKey);{let e=MN.createElement("template"),r=this.strings.length-1;return e.innerHTML=this.strings.reduce((n,i,a)=>n+i+(a<r?`{{ ${a} }}`:""),""),mB.set(this.stringsKey,e),e}}renderInto(e){var r;let n=this.template;if(qW.get(e)!==n){qW.set(e,n);let a=new fk(n,this.values,this.processor);XW.set(e,a),e instanceof O1?e.replace(...a.children):e.appendChild(a);return}let i=XW.get(e);(r=i?.update)==null||r.call(i,this.values)}},bqe={processCallback(t,e,r){var n;if(r){for(let[i,a]of e)if(i in r){let o=(n=r[i])!=null?n:"";xqe(a,o)}}}};function ET(t,...e){return new ple(t,e,bqe)}function wqe(t,e){t.renderInto(e)}var _qe=t=>{let{tokens:e}=t;return e.drm?":host(:not([cast-receiver])) { --_cast-button-drm-display: none; }":""},Eqe=t=>ET`
  <style>
    ${_qe(t)}
    ${dqe}
  </style>
  ${Cqe(t)}
`,Sqe=t=>{let e=t.hotKeys?`${t.hotKeys}`:"";return mU(t.streamType)==="live"&&(e+=" noarrowleft noarrowright"),e},jqe={TOP:"top",CENTER:"center",BOTTOM:"bottom",LAYER:"layer",MEDIA_LAYER:"media-layer",POSTER_LAYER:"poster-layer",VERTICAL_LAYER:"vertical-layer",CENTERED_LAYER:"centered-layer",GESTURE_LAYER:"gesture-layer",CONTROLLER_LAYER:"controller",BUTTON:"button",RANGE:"range",THUMB:"thumb",DISPLAY:"display",CONTROL_BAR:"control-bar",MENU_BUTTON:"menu-button",MENU:"menu",MENU_ITEM:"menu-item",OPTION:"option",POSTER:"poster",LIVE:"live",PLAY:"play",PRE_PLAY:"pre-play",SEEK_BACKWARD:"seek-backward",SEEK_FORWARD:"seek-forward",MUTE:"mute",CAPTIONS:"captions",AIRPLAY:"airplay",PIP:"pip",FULLSCREEN:"fullscreen",CAST:"cast",PLAYBACK_RATE:"playback-rate",VOLUME:"volume",TIME:"time",TITLE:"title",AUDIO_TRACK:"audio-track",RENDITION:"rendition"},Tqe=Object.values(jqe).join(", "),Cqe=t=>{var e,r,n,i,a,o,c,u,l,d,f,m,p,g,y,x,w,_,E,N,C,I,D,U,G,q,J,de,xe,we,ve,ne,ae,oe,Ie,Ce,be,ue,Pe;return ET`
  <media-theme
    template="${t.themeTemplate||!1}"
    defaultstreamtype="${(e=t.defaultStreamType)!=null?e:!1}"
    hotkeys="${Sqe(t)||!1}"
    nohotkeys="${t.noHotKeys||!t.hasSrc||!1}"
    noautoseektolive="${!!((r=t.streamType)!=null&&r.includes(Lo.LIVE))&&t.targetLiveWindow!==0}"
    novolumepref="${t.novolumepref||!1}"
    nomutedpref="${t.nomutedpref||!1}"
    disabled="${!t.hasSrc||t.isDialogOpen}"
    audio="${(n=t.audio)!=null?n:!1}"
    style="${(i=ZYe({"--media-primary-color":t.primaryColor,"--media-secondary-color":t.secondaryColor,"--media-accent-color":t.accentColor}))!=null?i:!1}"
    defaultsubtitles="${!t.defaultHiddenCaptions}"
    forwardseekoffset="${(a=t.forwardSeekOffset)!=null?a:!1}"
    backwardseekoffset="${(o=t.backwardSeekOffset)!=null?o:!1}"
    playbackrates="${(c=t.playbackRates)!=null?c:!1}"
    defaultshowremainingtime="${(u=t.defaultShowRemainingTime)!=null?u:!1}"
    defaultduration="${(l=t.defaultDuration)!=null?l:!1}"
    hideduration="${(d=t.hideDuration)!=null?d:!1}"
    title="${(f=t.title)!=null?f:!1}"
    videotitle="${(m=t.videoTitle)!=null?m:!1}"
    proudlydisplaymuxbadge="${(p=t.proudlyDisplayMuxBadge)!=null?p:!1}"
    exportparts="${Tqe}"
    onclose="${t.onCloseErrorDialog}"
    onfocusin="${t.onFocusInErrorDialog}"
  >
    <mux-video
      slot="media"
      inert="${(g=t.noHotKeys)!=null?g:!1}"
      target-live-window="${(y=t.targetLiveWindow)!=null?y:!1}"
      stream-type="${(x=mU(t.streamType))!=null?x:!1}"
      crossorigin="${(w=t.crossOrigin)!=null?w:""}"
      playsinline
      autoplay="${(_=t.autoplay)!=null?_:!1}"
      muted="${(E=t.muted)!=null?E:!1}"
      loop="${(N=t.loop)!=null?N:!1}"
      preload="${(C=t.preload)!=null?C:!1}"
      debug="${(I=t.debug)!=null?I:!1}"
      prefer-cmcd="${(D=t.preferCmcd)!=null?D:!1}"
      disable-tracking="${(U=t.disableTracking)!=null?U:!1}"
      disable-cookies="${(G=t.disableCookies)!=null?G:!1}"
      prefer-playback="${(q=t.preferPlayback)!=null?q:!1}"
      start-time="${t.startTime!=null?t.startTime:!1}"
      beacon-collection-domain="${(J=t.beaconCollectionDomain)!=null?J:!1}"
      player-init-time="${(de=t.playerInitTime)!=null?de:!1}"
      player-software-name="${(xe=t.playerSoftwareName)!=null?xe:!1}"
      player-software-version="${(we=t.playerSoftwareVersion)!=null?we:!1}"
      env-key="${(ve=t.envKey)!=null?ve:!1}"
      custom-domain="${(ne=t.customDomain)!=null?ne:!1}"
      src="${t.src?t.src:t.playbackId?UO(t):!1}"
      cast-src="${t.src?t.src:t.playbackId?UO(t):!1}"
      cast-receiver="${(ae=t.castReceiver)!=null?ae:!1}"
      drm-token="${(Ie=(oe=t.tokens)==null?void 0:oe.drm)!=null?Ie:!1}"
      exportparts="video"
      disable-pseudo-ended="${(Ce=t.disablePseudoEnded)!=null?Ce:!1}"
      max-auto-resolution="${(be=t.maxAutoResolution)!=null?be:!1}"
      cap-rendition-to-player-size="${(ue=t.capRenditionToPlayerSize)!=null?ue:!1}"
    >
      ${t.storyboard?ET`<track label="thumbnails" default kind="metadata" src="${t.storyboard}" />`:ET``}
      <slot></slot>
    </mux-video>
    <slot name="poster" slot="poster">
      <media-poster-image
        part="poster"
        exportparts="poster, img"
        src="${t.poster?t.poster:!1}"
        placeholdersrc="${(Pe=t.placeholder)!=null?Pe:!1}"
      ></media-poster-image>
    </slot>
  </media-theme>
`},gle=t=>t.charAt(0).toUpperCase()+t.slice(1),Nqe=(t,e=!1)=>{var r,n;if(t.muxCode){let i=gle((r=t.errorCategory)!=null?r:"video"),a=X5((n=t.errorCategory)!=null?n:jl.VIDEO);if(t.muxCode===ts.NETWORK_OFFLINE)return Ki("Your device appears to be offline",e);if(t.muxCode===ts.NETWORK_TOKEN_EXPIRED)return Ki("{category} URL has expired",e).format({category:i});if([ts.NETWORK_TOKEN_SUB_MISMATCH,ts.NETWORK_TOKEN_AUD_MISMATCH,ts.NETWORK_TOKEN_AUD_MISSING,ts.NETWORK_TOKEN_MALFORMED].includes(t.muxCode))return Ki("{category} URL is formatted incorrectly",e).format({category:i});if(t.muxCode===ts.NETWORK_TOKEN_MISSING)return Ki("Invalid {categoryName} URL",e).format({categoryName:a});if(t.muxCode===ts.NETWORK_NOT_FOUND)return Ki("{category} does not exist",e).format({category:i});if(t.muxCode===ts.NETWORK_NOT_READY){let o=t.streamType==="live"?"Live stream":"Video";return Ki("{mediaType} is not currently available",e).format({mediaType:o})}}if(t.code){if(t.code===ii.MEDIA_ERR_NETWORK)return Ki("Network Error",e);if(t.code===ii.MEDIA_ERR_DECODE)return Ki("Media Error",e);if(t.code===ii.MEDIA_ERR_SRC_NOT_SUPPORTED)return Ki("Source Not Supported",e)}return Ki("Error",e)},kqe=(t,e=!1)=>{var r,n;if(t.muxCode){let i=gle((r=t.errorCategory)!=null?r:"video"),a=X5((n=t.errorCategory)!=null?n:jl.VIDEO);return t.muxCode===ts.NETWORK_OFFLINE?Ki("Check your internet connection and try reloading this video.",e):t.muxCode===ts.NETWORK_TOKEN_EXPIRED?Ki("The videos secured {tokenNamePrefix}-token has expired.",e).format({tokenNamePrefix:a}):t.muxCode===ts.NETWORK_TOKEN_SUB_MISMATCH?Ki("The videos playback ID does not match the one encoded in the {tokenNamePrefix}-token.",e).format({tokenNamePrefix:a}):t.muxCode===ts.NETWORK_TOKEN_MALFORMED?Ki("{category} URL is formatted incorrectly",e).format({category:i}):[ts.NETWORK_TOKEN_AUD_MISMATCH,ts.NETWORK_TOKEN_AUD_MISSING].includes(t.muxCode)?Ki("The {tokenNamePrefix}-token is formatted with incorrect information.",e).format({tokenNamePrefix:a}):[ts.NETWORK_TOKEN_MISSING,ts.NETWORK_INVALID_URL].includes(t.muxCode)?Ki("The video URL or {tokenNamePrefix}-token are formatted with incorrect or incomplete information.",e).format({tokenNamePrefix:a}):t.muxCode===ts.NETWORK_NOT_FOUND?"":t.message}return t.code&&(t.code===ii.MEDIA_ERR_NETWORK||t.code===ii.MEDIA_ERR_DECODE||(t.code,ii.MEDIA_ERR_SRC_NOT_SUPPORTED)),t.message},Lqe=(t,e=!1)=>{let r=Nqe(t,e).toString(),n=kqe(t,e).toString();return{title:r,message:n}},Iqe=t=>{if(t.muxCode){if(t.muxCode===ts.NETWORK_TOKEN_EXPIRED)return"403-expired-token.md";if(t.muxCode===ts.NETWORK_TOKEN_MALFORMED)return"403-malformatted-token.md";if([ts.NETWORK_TOKEN_AUD_MISMATCH,ts.NETWORK_TOKEN_AUD_MISSING].includes(t.muxCode))return"403-incorrect-aud-value.md";if(t.muxCode===ts.NETWORK_TOKEN_SUB_MISMATCH)return"403-playback-id-mismatch.md";if(t.muxCode===ts.NETWORK_TOKEN_MISSING)return"missing-signed-tokens.md";if(t.muxCode===ts.NETWORK_NOT_FOUND)return"404-not-found.md";if(t.muxCode===ts.NETWORK_NOT_READY)return"412-not-playable.md"}if(t.code){if(t.code===ii.MEDIA_ERR_NETWORK)return"";if(t.code===ii.MEDIA_ERR_DECODE)return"media-decode-error.md";if(t.code===ii.MEDIA_ERR_SRC_NOT_SUPPORTED)return"media-src-not-supported.md"}return""},ZW=(t,e)=>{let r=Iqe(t);return{message:t.message,context:t.context,file:r}},Bqe=`<template id="media-theme-gerwig">
  <style>
    @keyframes pre-play-hide {
      0% {
        transform: scale(1);
        opacity: 1;
      }

      30% {
        transform: scale(0.7);
      }

      100% {
        transform: scale(1.5);
        opacity: 0;
      }
    }

    :host {
      --_primary-color: var(--media-primary-color, #fff);
      --_secondary-color: var(--media-secondary-color, transparent);
      --_accent-color: var(--media-accent-color, #fa50b5);
      --_text-color: var(--media-text-color, #000);

      --media-icon-color: var(--_primary-color);
      --media-control-background: var(--_secondary-color);
      --media-control-hover-background: var(--_accent-color);
      --media-time-buffered-color: rgba(255, 255, 255, 0.4);
      --media-preview-time-text-shadow: none;
      --media-control-height: 14px;
      --media-control-padding: 6px;
      --media-tooltip-container-margin: 6px;
      --media-tooltip-distance: 18px;

      color: var(--_primary-color);
      display: inline-block;
      width: 100%;
      height: 100%;
    }

    :host([audio]) {
      --_secondary-color: var(--media-secondary-color, black);
      --media-preview-time-text-shadow: none;
    }

    :host([audio]) ::slotted([slot='media']) {
      height: 0px;
    }

    :host([audio]) media-loading-indicator {
      display: none;
    }

    :host([audio]) media-controller {
      background: transparent;
    }

    :host([audio]) media-controller::part(vertical-layer) {
      background: transparent;
    }

    :host([audio]) media-control-bar {
      width: 100%;
      background-color: var(--media-control-background);
    }

    /*
     * 0.433s is the transition duration for VTT Regions.
     * Borrowed here, so the captions don't move too fast.
     */
    media-controller {
      --media-webkit-text-track-transform: translateY(0) scale(0.98);
      --media-webkit-text-track-transition: transform 0.433s ease-out 0.3s;
    }
    media-controller:is([mediapaused], :not([userinactive])) {
      --media-webkit-text-track-transform: translateY(-50px) scale(0.98);
      --media-webkit-text-track-transition: transform 0.15s ease;
    }

    /*
     * CSS specific to iOS devices.
     * See: https://stackoverflow.com/questions/30102792/css-media-query-to-target-only-ios-devices/60220757#60220757
     */
    @supports (-webkit-touch-callout: none) {
      /* Disable subtitle adjusting for iOS Safari */
      media-controller[mediaisfullscreen] {
        --media-webkit-text-track-transform: unset;
        --media-webkit-text-track-transition: unset;
      }
    }

    media-time-range {
      --media-box-padding-left: 6px;
      --media-box-padding-right: 6px;
      --media-range-bar-color: var(--_accent-color);
      --media-time-range-buffered-color: var(--_primary-color);
      --media-range-track-color: transparent;
      --media-range-track-background: rgba(255, 255, 255, 0.4);
      --media-range-thumb-background: radial-gradient(
        circle,
        #000 0%,
        #000 25%,
        var(--_accent-color) 25%,
        var(--_accent-color)
      );
      --media-range-thumb-width: 12px;
      --media-range-thumb-height: 12px;
      --media-range-thumb-transform: scale(0);
      --media-range-thumb-transition: transform 0.3s;
      --media-range-thumb-opacity: 1;
      --media-preview-background: var(--_primary-color);
      --media-box-arrow-background: var(--_primary-color);
      --media-preview-thumbnail-border: 5px solid var(--_primary-color);
      --media-preview-border-radius: 5px;
      --media-text-color: var(--_text-color);
      --media-control-hover-background: transparent;
      --media-preview-chapter-text-shadow: none;
      color: var(--_accent-color);
      padding: 0 6px;
    }

    :host([audio]) media-time-range {
      --media-preview-time-padding: 1.5px 6px;
      --media-preview-box-margin: 0 0 -5px;
    }

    media-time-range:hover {
      --media-range-thumb-transform: scale(1);
    }

    media-preview-thumbnail {
      border-bottom-width: 0;
    }

    [part~='menu'] {
      border-radius: 2px;
      border: 1px solid rgba(0, 0, 0, 0.1);
      bottom: 50px;
      padding: 2.5px 10px;
    }

    [part~='menu']::part(indicator) {
      fill: var(--_accent-color);
    }

    [part~='menu']::part(menu-item) {
      box-sizing: border-box;
      display: flex;
      align-items: center;
      padding: 6px 10px;
      min-height: 34px;
    }

    [part~='menu']::part(checked) {
      font-weight: 700;
    }

    media-captions-menu,
    media-rendition-menu,
    media-audio-track-menu,
    media-playback-rate-menu {
      position: absolute; /* ensure they don't take up space in DOM on load */
      --media-menu-background: var(--_primary-color);
      --media-menu-item-checked-background: transparent;
      --media-text-color: var(--_text-color);
      --media-menu-item-hover-background: transparent;
      --media-menu-item-hover-outline: var(--_accent-color) solid 1px;
    }

    media-rendition-menu {
      min-width: 140px;
    }

    /* The icon is a circle so make it 16px high instead of 14px for more balance. */
    media-audio-track-menu-button {
      --media-control-padding: 5px;
      --media-control-height: 16px;
    }

    media-playback-rate-menu-button {
      --media-control-padding: 6px 3px;
      min-width: 4.4ch;
    }

    media-playback-rate-menu {
      --media-menu-flex-direction: row;
      --media-menu-item-checked-background: var(--_accent-color);
      --media-menu-item-checked-indicator-display: none;
      margin-right: 6px;
      padding: 0;
      --media-menu-gap: 0.25em;
    }

    media-playback-rate-menu[part~='menu']::part(menu-item) {
      padding: 6px 6px 6px 8px;
    }

    media-playback-rate-menu[part~='menu']::part(checked) {
      color: #fff;
    }

    :host(:not([audio])) media-time-range {
      /* Adding px is required here for calc() */
      --media-range-padding: 0px;
      background: transparent;
      z-index: 10;
      height: 10px;
      bottom: -3px;
      width: 100%;
    }

    media-control-bar :is([role='button'], [role='switch'], button) {
      line-height: 0;
    }

    media-control-bar :is([part*='button'], [part*='range'], [part*='display']) {
      border-radius: 3px;
    }

    .spacer {
      flex-grow: 1;
      background-color: var(--media-control-background, rgba(20, 20, 30, 0.7));
    }

    media-control-bar[slot~='top-chrome'] {
      min-height: 42px;
      pointer-events: none;
    }

    media-control-bar {
      --gradient-steps:
        hsl(0 0% 0% / 0) 0%, hsl(0 0% 0% / 0.013) 8.1%, hsl(0 0% 0% / 0.049) 15.5%, hsl(0 0% 0% / 0.104) 22.5%,
        hsl(0 0% 0% / 0.175) 29%, hsl(0 0% 0% / 0.259) 35.3%, hsl(0 0% 0% / 0.352) 41.2%, hsl(0 0% 0% / 0.45) 47.1%,
        hsl(0 0% 0% / 0.55) 52.9%, hsl(0 0% 0% / 0.648) 58.8%, hsl(0 0% 0% / 0.741) 64.7%, hsl(0 0% 0% / 0.825) 71%,
        hsl(0 0% 0% / 0.896) 77.5%, hsl(0 0% 0% / 0.951) 84.5%, hsl(0 0% 0% / 0.987) 91.9%, hsl(0 0% 0%) 100%;
    }

    :host([title]) media-control-bar[slot='top-chrome']::before,
    :host([videotitle]) media-control-bar[slot='top-chrome']::before {
      content: '';
      position: absolute;
      width: 100%;
      padding-bottom: min(100px, 25%);
      background: linear-gradient(to top, var(--gradient-steps));
      opacity: 0.8;
      pointer-events: none;
    }

    :host(:not([audio])) media-control-bar[part~='bottom']::before {
      content: '';
      position: absolute;
      width: 100%;
      bottom: 0;
      left: 0;
      padding-bottom: min(100px, 25%);
      background: linear-gradient(to bottom, var(--gradient-steps));
      opacity: 0.8;
      z-index: 1;
      pointer-events: none;
    }

    media-control-bar[part~='bottom'] > * {
      z-index: 20;
    }

    media-control-bar[part~='bottom'] {
      padding: 6px 6px;
    }

    media-control-bar[slot~='top-chrome'] > * {
      --media-control-background: transparent;
      --media-control-hover-background: transparent;
      position: relative;
    }

    media-controller::part(vertical-layer) {
      transition: background-color 1s;
    }

    media-controller:is([mediapaused], :not([userinactive]))::part(vertical-layer) {
      background-color: var(--controls-backdrop-color, var(--controls, transparent));
      transition: background-color 0.25s;
    }

    .center-controls {
      --media-button-icon-width: 100%;
      --media-button-icon-height: auto;
      --media-tooltip-display: none;
      pointer-events: none;
      width: 100%;
      display: flex;
      flex-flow: row;
      align-items: center;
      justify-content: center;
      paint-order: stroke;
      stroke: rgba(102, 102, 102, 1);
      stroke-width: 0.3px;
      text-shadow:
        0 0 2px rgb(0 0 0 / 0.25),
        0 0 6px rgb(0 0 0 / 0.25);
    }

    .center-controls media-play-button {
      --media-control-background: transparent;
      --media-control-hover-background: transparent;
      --media-control-padding: 0;
      width: 40px;
      filter: drop-shadow(0 0 2px rgb(0 0 0 / 0.25)) drop-shadow(0 0 6px rgb(0 0 0 / 0.25));
    }

    [breakpointsm] .center-controls media-play-button {
      width: 90px;
      height: 90px;
      border-radius: 50%;
      transition: background 0.4s;
      padding: 24px;
      --media-control-background: #000;
      --media-control-hover-background: var(--_accent-color);
    }

    .center-controls media-seek-backward-button,
    .center-controls media-seek-forward-button {
      --media-control-background: transparent;
      --media-control-hover-background: transparent;
      padding: 0;
      margin: 0 20px;
      width: max(33px, min(8%, 40px));
      text-shadow:
        0 0 2px rgb(0 0 0 / 0.25),
        0 0 6px rgb(0 0 0 / 0.25);
    }

    [breakpointsm]:not([audio]) .center-controls.pre-playback {
      display: grid;
      align-items: initial;
      justify-content: initial;
      height: 100%;
      overflow: hidden;
    }

    [breakpointsm]:not([audio]) .center-controls.pre-playback media-play-button {
      place-self: var(--_pre-playback-place, center);
      grid-area: 1 / 1;
      margin: 16px;
    }

    /* Show and hide controls or pre-playback state */

    [breakpointsm]:is([mediahasplayed], :not([mediapaused])):not([audio])
      .center-controls.pre-playback
      media-play-button {
      /* Using \`forwards\` would lead to a laggy UI after the animation got in the end state */
      animation: 0.3s linear pre-play-hide;
      opacity: 0;
      pointer-events: none;
    }

    .autoplay-unmute {
      --media-control-hover-background: transparent;
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      filter: drop-shadow(0 0 2px rgb(0 0 0 / 0.25)) drop-shadow(0 0 6px rgb(0 0 0 / 0.25));
    }

    .autoplay-unmute-btn {
      --media-control-height: 16px;
      border-radius: 8px;
      background: #000;
      color: var(--_primary-color);
      display: flex;
      align-items: center;
      padding: 8px 16px;
      font-size: 18px;
      font-weight: 500;
      cursor: pointer;
    }

    .autoplay-unmute-btn:hover {
      background: var(--_accent-color);
    }

    [breakpointsm] .autoplay-unmute-btn {
      --media-control-height: 30px;
      padding: 14px 24px;
      font-size: 26px;
    }

    .autoplay-unmute-btn svg {
      margin: 0 6px 0 0;
    }

    [breakpointsm] .autoplay-unmute-btn svg {
      margin: 0 10px 0 0;
    }

    media-controller:not([audio]):not([mediahasplayed]) *:is(media-control-bar, media-time-range) {
      display: none;
    }

    media-error-dialog:not([mediaerrorcode]) {
      opacity: 0;
    }

    media-loading-indicator {
      --media-loading-icon-width: 100%;
      --media-button-icon-height: auto;
      display: var(--media-control-display, var(--media-loading-indicator-display, flex));
      pointer-events: none;
      position: absolute;
      width: min(15%, 150px);
      flex-flow: row;
      align-items: center;
      justify-content: center;
    }

    /* Intentionally don't target the div for transition but the children
     of the div. Prevents messing with media-chrome's autohide feature. */
    media-loading-indicator + div * {
      transition: opacity 0.15s;
      opacity: 1;
    }

    media-loading-indicator[medialoading]:not([mediapaused]) ~ div > * {
      opacity: 0;
      transition-delay: 400ms;
    }

    media-volume-range {
      width: min(100%, 100px);
      --media-range-padding-left: 10px;
      --media-range-padding-right: 10px;
      --media-range-thumb-width: 12px;
      --media-range-thumb-height: 12px;
      --media-range-thumb-background: radial-gradient(
        circle,
        #000 0%,
        #000 25%,
        var(--_primary-color) 25%,
        var(--_primary-color)
      );
      --media-control-hover-background: none;
    }

    media-time-display {
      white-space: nowrap;
    }

    /* Generic style for explicitly disabled controls */
    media-control-bar[part~='bottom'] [disabled],
    media-control-bar[part~='bottom'] [aria-disabled='true'] {
      opacity: 60%;
      cursor: not-allowed;
    }

    media-text-display {
      --media-font-size: 16px;
      --media-control-padding: 14px;
      font-weight: 500;
    }

    media-play-button.animated *:is(g, path) {
      transition: all 0.3s;
    }

    media-play-button.animated[mediapaused] .pause-icon-pt1 {
      opacity: 0;
    }

    media-play-button.animated[mediapaused] .pause-icon-pt2 {
      transform-origin: center center;
      transform: scaleY(0);
    }

    media-play-button.animated[mediapaused] .play-icon {
      clip-path: inset(0 0 0 0);
    }

    media-play-button.animated:not([mediapaused]) .play-icon {
      clip-path: inset(0 0 0 100%);
    }

    media-seek-forward-button,
    media-seek-backward-button {
      --media-font-weight: 400;
    }

    .mute-icon {
      display: inline-block;
    }

    .mute-icon :is(path, g) {
      transition: opacity 0.5s;
    }

    .muted {
      opacity: 0;
    }

    media-mute-button[mediavolumelevel='low'] :is(.volume-medium, .volume-high),
    media-mute-button[mediavolumelevel='medium'] :is(.volume-high) {
      opacity: 0;
    }

    media-mute-button[mediavolumelevel='off'] .unmuted {
      opacity: 0;
    }

    media-mute-button[mediavolumelevel='off'] .muted {
      opacity: 1;
    }

    /**
     * Our defaults for these buttons are to hide them at small sizes
     * users can override this with CSS
     */
    media-controller:not([breakpointsm]):not([audio]) {
      --bottom-play-button: none;
      --bottom-seek-backward-button: none;
      --bottom-seek-forward-button: none;
      --bottom-time-display: none;
      --bottom-playback-rate-menu-button: none;
      --bottom-pip-button: none;
    }

    [part='mux-badge'] {
      position: absolute;
      bottom: 10px;
      right: 10px;
      z-index: 2;
      opacity: 0.6;
      transition:
        opacity 0.2s ease-in-out,
        bottom 0.2s ease-in-out;
    }

    [part='mux-badge']:hover {
      opacity: 1;
    }

    [part='mux-badge'] a {
      font-size: 14px;
      font-family: var(--_font-family);
      color: var(--_primary-color);
      text-decoration: none;
      display: flex;
      align-items: center;
      gap: 5px;
    }

    [part='mux-badge'] .mux-badge-text {
      transition: opacity 0.5s ease-in-out;
      opacity: 0;
    }

    [part='mux-badge'] .mux-badge-logo {
      width: 40px;
      height: auto;
      display: inline-block;
    }

    [part='mux-badge'] .mux-badge-logo svg {
      width: 100%;
      height: 100%;
      fill: white;
    }

    media-controller:not([userinactive]):not([mediahasplayed]) [part='mux-badge'],
    media-controller:not([userinactive]) [part='mux-badge'],
    media-controller[mediahasplayed][mediapaused] [part='mux-badge'] {
      transition: bottom 0.1s ease-in-out;
    }

    media-controller[userinactive]:not([mediapaused]) [part='mux-badge'] {
      transition: bottom 0.2s ease-in-out 0.62s;
    }

    media-controller:not([userinactive]) [part='mux-badge'] .mux-badge-text,
    media-controller[mediahasplayed][mediapaused] [part='mux-badge'] .mux-badge-text {
      opacity: 1;
    }

    media-controller[userinactive]:not([mediapaused]) [part='mux-badge'] .mux-badge-text {
      opacity: 0;
    }

    media-controller[userinactive]:not([mediapaused]) [part='mux-badge'] {
      bottom: 10px;
    }

    media-controller:not([userinactive]):not([mediahasplayed]) [part='mux-badge'] {
      bottom: 10px;
    }

    media-controller:not([userinactive])[mediahasplayed] [part='mux-badge'],
    media-controller[mediahasplayed][mediapaused] [part='mux-badge'] {
      bottom: calc(28px + var(--media-control-height, 0px) + var(--media-control-padding, 0px) * 2);
    }
  </style>

  <template partial="TitleDisplay">
    <template if="videotitle">
      <template if="videotitle != true">
        <media-text-display part="top title display" class="title-display">{{videotitle}}</media-text-display>
      </template>
    </template>
    <template if="!videotitle">
      <template if="title">
        <media-text-display part="top title display" class="title-display">{{title}}</media-text-display>
      </template>
    </template>
  </template>

  <template partial="PlayButton">
    <media-play-button
      part="{{section ?? 'bottom'}} play button"
      disabled="{{disabled}}"
      aria-disabled="{{disabled}}"
      class="animated"
    >
      <svg aria-hidden="true" viewBox="0 0 18 14" slot="icon">
        <g class="play-icon">
          <path
            d="M15.5987 6.2911L3.45577 0.110898C2.83667 -0.204202 2.06287 0.189698 2.06287 0.819798V13.1802C2.06287 13.8103 2.83667 14.2042 3.45577 13.8891L15.5987 7.7089C16.2178 7.3938 16.2178 6.6061 15.5987 6.2911Z"
          />
        </g>
        <g class="pause-icon">
          <path
            class="pause-icon-pt1"
            d="M5.90709 0H2.96889C2.46857 0 2.06299 0.405585 2.06299 0.9059V13.0941C2.06299 13.5944 2.46857 14 2.96889 14H5.90709C6.4074 14 6.81299 13.5944 6.81299 13.0941V0.9059C6.81299 0.405585 6.4074 0 5.90709 0Z"
          />
          <path
            class="pause-icon-pt2"
            d="M15.1571 0H12.2189C11.7186 0 11.313 0.405585 11.313 0.9059V13.0941C11.313 13.5944 11.7186 14 12.2189 14H15.1571C15.6574 14 16.063 13.5944 16.063 13.0941V0.9059C16.063 0.405585 15.6574 0 15.1571 0Z"
          />
        </g>
      </svg>
    </media-play-button>
  </template>

  <template partial="PrePlayButton">
    <media-play-button
      part="{{section ?? 'center'}} play button pre-play"
      disabled="{{disabled}}"
      aria-disabled="{{disabled}}"
    >
      <svg aria-hidden="true" viewBox="0 0 18 14" slot="icon" style="transform: translate(3px, 0)">
        <path
          d="M15.5987 6.2911L3.45577 0.110898C2.83667 -0.204202 2.06287 0.189698 2.06287 0.819798V13.1802C2.06287 13.8103 2.83667 14.2042 3.45577 13.8891L15.5987 7.7089C16.2178 7.3938 16.2178 6.6061 15.5987 6.2911Z"
        />
      </svg>
    </media-play-button>
  </template>

  <template partial="SeekBackwardButton">
    <media-seek-backward-button
      seekoffset="{{backwardseekoffset}}"
      part="{{section ?? 'bottom'}} seek-backward button"
      disabled="{{disabled}}"
      aria-disabled="{{disabled}}"
    >
      <svg viewBox="0 0 22 14" aria-hidden="true" slot="icon">
        <path
          d="M3.65 2.07888L0.0864 6.7279C-0.0288 6.87812 -0.0288 7.12188 0.0864 7.2721L3.65 11.9211C3.7792 12.0896 4 11.9703 4 11.7321V2.26787C4 2.02968 3.7792 1.9104 3.65 2.07888Z"
        />
        <text transform="translate(6 12)" style="font-size: 14px; font-family: 'ArialMT', 'Arial'">
          {{backwardseekoffset}}
        </text>
      </svg>
    </media-seek-backward-button>
  </template>

  <template partial="SeekForwardButton">
    <media-seek-forward-button
      seekoffset="{{forwardseekoffset}}"
      part="{{section ?? 'bottom'}} seek-forward button"
      disabled="{{disabled}}"
      aria-disabled="{{disabled}}"
    >
      <svg viewBox="0 0 22 14" aria-hidden="true" slot="icon">
        <g>
          <text transform="translate(-1 12)" style="font-size: 14px; font-family: 'ArialMT', 'Arial'">
            {{forwardseekoffset}}
          </text>
          <path
            d="M18.35 11.9211L21.9136 7.2721C22.0288 7.12188 22.0288 6.87812 21.9136 6.7279L18.35 2.07888C18.2208 1.91041 18 2.02968 18 2.26787V11.7321C18 11.9703 18.2208 12.0896 18.35 11.9211Z"
          />
        </g>
      </svg>
    </media-seek-forward-button>
  </template>

  <template partial="MuteButton">
    <media-mute-button part="bottom mute button" disabled="{{disabled}}" aria-disabled="{{disabled}}">
      <svg viewBox="0 0 18 14" slot="icon" class="mute-icon" aria-hidden="true">
        <g class="unmuted">
          <path
            d="M6.76786 1.21233L3.98606 3.98924H1.19937C0.593146 3.98924 0.101743 4.51375 0.101743 5.1607V6.96412L0 6.99998L0.101743 7.03583V8.83926C0.101743 9.48633 0.593146 10.0108 1.19937 10.0108H3.98606L6.76773 12.7877C7.23561 13.2547 8 12.9007 8 12.2171V1.78301C8 1.09925 7.23574 0.745258 6.76786 1.21233Z"
          />
          <path
            class="volume-low"
            d="M10 3.54781C10.7452 4.55141 11.1393 5.74511 11.1393 6.99991C11.1393 8.25471 10.7453 9.44791 10 10.4515L10.7988 11.0496C11.6734 9.87201 12.1356 8.47161 12.1356 6.99991C12.1356 5.52821 11.6735 4.12731 10.7988 2.94971L10 3.54781Z"
          />
          <path
            class="volume-medium"
            d="M12.3778 2.40086C13.2709 3.76756 13.7428 5.35806 13.7428 7.00026C13.7428 8.64246 13.2709 10.233 12.3778 11.5992L13.2106 12.1484C14.2107 10.6185 14.739 8.83796 14.739 7.00016C14.739 5.16236 14.2107 3.38236 13.2106 1.85156L12.3778 2.40086Z"
          />
          <path
            class="volume-high"
            d="M15.5981 0.75L14.7478 1.2719C15.7937 2.9919 16.3468 4.9723 16.3468 7C16.3468 9.0277 15.7937 11.0082 14.7478 12.7281L15.5981 13.25C16.7398 11.3722 17.343 9.211 17.343 7C17.343 4.789 16.7398 2.6268 15.5981 0.75Z"
          />
        </g>
        <g class="muted">
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M4.39976 4.98924H1.19937C1.19429 4.98924 1.17777 4.98961 1.15296 5.01609C1.1271 5.04369 1.10174 5.09245 1.10174 5.1607V8.83926C1.10174 8.90761 1.12714 8.95641 1.15299 8.984C1.17779 9.01047 1.1943 9.01084 1.19937 9.01084H4.39977L7 11.6066V2.39357L4.39976 4.98924ZM7.47434 1.92006C7.4743 1.9201 7.47439 1.92002 7.47434 1.92006V1.92006ZM6.76773 12.7877L3.98606 10.0108H1.19937C0.593146 10.0108 0.101743 9.48633 0.101743 8.83926V7.03583L0 6.99998L0.101743 6.96412V5.1607C0.101743 4.51375 0.593146 3.98924 1.19937 3.98924H3.98606L6.76786 1.21233C7.23574 0.745258 8 1.09925 8 1.78301V12.2171C8 12.9007 7.23561 13.2547 6.76773 12.7877Z"
          />
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M15.2677 9.30323C15.463 9.49849 15.7796 9.49849 15.9749 9.30323C16.1701 9.10796 16.1701 8.79138 15.9749 8.59612L14.2071 6.82841L15.9749 5.06066C16.1702 4.8654 16.1702 4.54882 15.9749 4.35355C15.7796 4.15829 15.4631 4.15829 15.2678 4.35355L13.5 6.1213L11.7322 4.35348C11.537 4.15822 11.2204 4.15822 11.0251 4.35348C10.8298 4.54874 10.8298 4.86532 11.0251 5.06058L12.7929 6.82841L11.0251 8.59619C10.8299 8.79146 10.8299 9.10804 11.0251 9.3033C11.2204 9.49856 11.537 9.49856 11.7323 9.3033L13.5 7.53552L15.2677 9.30323Z"
          />
        </g>
      </svg>
    </media-mute-button>
  </template>

  <template partial="PipButton">
    <media-pip-button part="bottom pip button" disabled="{{disabled}}" aria-disabled="{{disabled}}">
      <svg viewBox="0 0 18 14" aria-hidden="true" slot="icon">
        <path
          d="M15.9891 0H2.011C0.9004 0 0 0.9003 0 2.0109V11.989C0 13.0996 0.9004 14 2.011 14H15.9891C17.0997 14 18 13.0997 18 11.9891V2.0109C18 0.9003 17.0997 0 15.9891 0ZM17 11.9891C17 12.5465 16.5465 13 15.9891 13H2.011C1.4536 13 1.0001 12.5465 1.0001 11.9891V2.0109C1.0001 1.4535 1.4536 0.9999 2.011 0.9999H15.9891C16.5465 0.9999 17 1.4535 17 2.0109V11.9891Z"
        />
        <path
          d="M15.356 5.67822H8.19523C8.03253 5.67822 7.90063 5.81012 7.90063 5.97282V11.3836C7.90063 11.5463 8.03253 11.6782 8.19523 11.6782H15.356C15.5187 11.6782 15.6506 11.5463 15.6506 11.3836V5.97282C15.6506 5.81012 15.5187 5.67822 15.356 5.67822Z"
        />
      </svg>
    </media-pip-button>
  </template>

  <template partial="CaptionsMenu">
    <media-captions-menu-button part="bottom captions button">
      <svg aria-hidden="true" viewBox="0 0 18 14" slot="on">
        <path
          d="M15.989 0H2.011C0.9004 0 0 0.9003 0 2.0109V11.9891C0 13.0997 0.9004 14 2.011 14H15.989C17.0997 14 18 13.0997 18 11.9891V2.0109C18 0.9003 17.0997 0 15.989 0ZM4.2292 8.7639C4.5954 9.1902 5.0935 9.4031 5.7233 9.4031C6.1852 9.4031 6.5544 9.301 6.8302 9.0969C7.1061 8.8933 7.2863 8.614 7.3702 8.26H8.4322C8.3062 8.884 8.0093 9.3733 7.5411 9.7273C7.0733 10.0813 6.4703 10.2581 5.732 10.2581C5.108 10.2581 4.5699 10.1219 4.1168 9.8489C3.6637 9.5759 3.3141 9.1946 3.0685 8.7058C2.8224 8.2165 2.6994 7.6511 2.6994 7.009C2.6994 6.3611 2.8224 5.7927 3.0685 5.3034C3.3141 4.8146 3.6637 4.4323 4.1168 4.1559C4.5699 3.88 5.108 3.7418 5.732 3.7418C6.4703 3.7418 7.0733 3.922 7.5411 4.2818C8.0094 4.6422 8.3062 5.1461 8.4322 5.794H7.3702C7.2862 5.4283 7.106 5.1368 6.8302 4.921C6.5544 4.7052 6.1852 4.5968 5.7233 4.5968C5.0934 4.5968 4.5954 4.8116 4.2292 5.2404C3.8635 5.6696 3.6804 6.259 3.6804 7.009C3.6804 7.7531 3.8635 8.3381 4.2292 8.7639ZM11.0974 8.7639C11.4636 9.1902 11.9617 9.4031 12.5915 9.4031C13.0534 9.4031 13.4226 9.301 13.6984 9.0969C13.9743 8.8933 14.1545 8.614 14.2384 8.26H15.3004C15.1744 8.884 14.8775 9.3733 14.4093 9.7273C13.9415 10.0813 13.3385 10.2581 12.6002 10.2581C11.9762 10.2581 11.4381 10.1219 10.985 9.8489C10.5319 9.5759 10.1823 9.1946 9.9367 8.7058C9.6906 8.2165 9.5676 7.6511 9.5676 7.009C9.5676 6.3611 9.6906 5.7927 9.9367 5.3034C10.1823 4.8146 10.5319 4.4323 10.985 4.1559C11.4381 3.88 11.9762 3.7418 12.6002 3.7418C13.3385 3.7418 13.9415 3.922 14.4093 4.2818C14.8776 4.6422 15.1744 5.1461 15.3004 5.794H14.2384C14.1544 5.4283 13.9742 5.1368 13.6984 4.921C13.4226 4.7052 13.0534 4.5968 12.5915 4.5968C11.9616 4.5968 11.4636 4.8116 11.0974 5.2404C10.7317 5.6696 10.5486 6.259 10.5486 7.009C10.5486 7.7531 10.7317 8.3381 11.0974 8.7639Z"
        />
      </svg>
      <svg aria-hidden="true" viewBox="0 0 18 14" slot="off">
        <path
          d="M5.73219 10.258C5.10819 10.258 4.57009 10.1218 4.11699 9.8488C3.66389 9.5758 3.31429 9.1945 3.06869 8.7057C2.82259 8.2164 2.69958 7.651 2.69958 7.0089C2.69958 6.361 2.82259 5.7926 3.06869 5.3033C3.31429 4.8145 3.66389 4.4322 4.11699 4.1558C4.57009 3.8799 5.10819 3.7417 5.73219 3.7417C6.47049 3.7417 7.07348 3.9219 7.54128 4.2817C8.00958 4.6421 8.30638 5.146 8.43238 5.7939H7.37039C7.28639 5.4282 7.10618 5.1367 6.83039 4.9209C6.55459 4.7051 6.18538 4.5967 5.72348 4.5967C5.09358 4.5967 4.59559 4.8115 4.22939 5.2403C3.86369 5.6695 3.68058 6.2589 3.68058 7.0089C3.68058 7.753 3.86369 8.338 4.22939 8.7638C4.59559 9.1901 5.09368 9.403 5.72348 9.403C6.18538 9.403 6.55459 9.3009 6.83039 9.0968C7.10629 8.8932 7.28649 8.6139 7.37039 8.2599H8.43238C8.30638 8.8839 8.00948 9.3732 7.54128 9.7272C7.07348 10.0812 6.47049 10.258 5.73219 10.258Z"
        />
        <path
          d="M12.6003 10.258C11.9763 10.258 11.4382 10.1218 10.9851 9.8488C10.532 9.5758 10.1824 9.1945 9.93685 8.7057C9.69075 8.2164 9.56775 7.651 9.56775 7.0089C9.56775 6.361 9.69075 5.7926 9.93685 5.3033C10.1824 4.8145 10.532 4.4322 10.9851 4.1558C11.4382 3.8799 11.9763 3.7417 12.6003 3.7417C13.3386 3.7417 13.9416 3.9219 14.4094 4.2817C14.8777 4.6421 15.1745 5.146 15.3005 5.7939H14.2385C14.1545 5.4282 13.9743 5.1367 13.6985 4.9209C13.4227 4.7051 13.0535 4.5967 12.5916 4.5967C11.9617 4.5967 11.4637 4.8115 11.0975 5.2403C10.7318 5.6695 10.5487 6.2589 10.5487 7.0089C10.5487 7.753 10.7318 8.338 11.0975 8.7638C11.4637 9.1901 11.9618 9.403 12.5916 9.403C13.0535 9.403 13.4227 9.3009 13.6985 9.0968C13.9744 8.8932 14.1546 8.6139 14.2385 8.2599H15.3005C15.1745 8.8839 14.8776 9.3732 14.4094 9.7272C13.9416 10.0812 13.3386 10.258 12.6003 10.258Z"
        />
        <path
          d="M15.9891 1C16.5465 1 17 1.4535 17 2.011V11.9891C17 12.5465 16.5465 13 15.9891 13H2.0109C1.4535 13 1 12.5465 1 11.9891V2.0109C1 1.4535 1.4535 0.9999 2.0109 0.9999L15.9891 1ZM15.9891 0H2.0109C0.9003 0 0 0.9003 0 2.0109V11.9891C0 13.0997 0.9003 14 2.0109 14H15.9891C17.0997 14 18 13.0997 18 11.9891V2.0109C18 0.9003 17.0997 0 15.9891 0Z"
        />
      </svg>
    </media-captions-menu-button>
    <media-captions-menu
      hidden
      anchor="auto"
      part="bottom captions menu"
      disabled="{{disabled}}"
      aria-disabled="{{disabled}}"
      exportparts="menu-item"
    >
      <div slot="checked-indicator">
        <style>
          .indicator {
            position: relative;
            top: 1px;
            width: 0.9em;
            height: auto;
            fill: var(--_accent-color);
            margin-right: 5px;
          }

          [aria-checked='false'] .indicator {
            display: none;
          }
        </style>
        <svg viewBox="0 0 14 18" class="indicator">
          <path
            d="M12.252 3.48c-.115.033-.301.161-.425.291-.059.063-1.407 1.815-2.995 3.894s-2.897 3.79-2.908 3.802c-.013.014-.661-.616-1.672-1.624-.908-.905-1.702-1.681-1.765-1.723-.401-.27-.783-.211-1.176.183a1.285 1.285 0 0 0-.261.342.582.582 0 0 0-.082.35c0 .165.01.205.08.35.075.153.213.296 2.182 2.271 1.156 1.159 2.17 2.159 2.253 2.222.189.143.338.196.539.194.203-.003.412-.104.618-.299.205-.193 6.7-8.693 6.804-8.903a.716.716 0 0 0 .085-.345c.01-.179.005-.203-.062-.339-.124-.252-.45-.531-.746-.639a.784.784 0 0 0-.469-.027"
            fill-rule="evenodd"
          />
        </svg></div
    ></media-captions-menu>
  </template>

  <template partial="AirplayButton">
    <media-airplay-button part="bottom airplay button" disabled="{{disabled}}" aria-disabled="{{disabled}}">
      <svg viewBox="0 0 18 14" aria-hidden="true" slot="icon">
        <path
          d="M16.1383 0H1.8618C0.8335 0 0 0.8335 0 1.8617V10.1382C0 11.1664 0.8335 12 1.8618 12H3.076C3.1204 11.9433 3.1503 11.8785 3.2012 11.826L4.004 11H1.8618C1.3866 11 1 10.6134 1 10.1382V1.8617C1 1.3865 1.3866 0.9999 1.8618 0.9999H16.1383C16.6135 0.9999 17.0001 1.3865 17.0001 1.8617V10.1382C17.0001 10.6134 16.6135 11 16.1383 11H13.9961L14.7989 11.826C14.8499 11.8785 14.8798 11.9432 14.9241 12H16.1383C17.1665 12 18.0001 11.1664 18.0001 10.1382V1.8617C18 0.8335 17.1665 0 16.1383 0Z"
        />
        <path
          d="M9.55061 8.21903C9.39981 8.06383 9.20001 7.98633 9.00011 7.98633C8.80021 7.98633 8.60031 8.06383 8.44951 8.21903L4.09771 12.697C3.62471 13.1838 3.96961 13.9998 4.64831 13.9998H13.3518C14.0304 13.9998 14.3754 13.1838 13.9023 12.697L9.55061 8.21903Z"
        />
      </svg>
    </media-airplay-button>
  </template>

  <template partial="FullscreenButton">
    <media-fullscreen-button part="bottom fullscreen button" disabled="{{disabled}}" aria-disabled="{{disabled}}">
      <svg viewBox="0 0 18 14" aria-hidden="true" slot="enter">
        <path
          d="M1.00745 4.39539L1.01445 1.98789C1.01605 1.43049 1.47085 0.978289 2.02835 0.979989L6.39375 0.992589L6.39665 -0.007411L2.03125 -0.020011C0.920646 -0.023211 0.0176463 0.874489 0.0144463 1.98509L0.00744629 4.39539H1.00745Z"
        />
        <path
          d="M17.0144 2.03431L17.0076 4.39541H18.0076L18.0144 2.03721C18.0176 0.926712 17.1199 0.0237125 16.0093 0.0205125L11.6439 0.0078125L11.641 1.00781L16.0064 1.02041C16.5638 1.02201 17.016 1.47681 17.0144 2.03431Z"
        />
        <path
          d="M16.9925 9.60498L16.9855 12.0124C16.9839 12.5698 16.5291 13.022 15.9717 13.0204L11.6063 13.0078L11.6034 14.0078L15.9688 14.0204C17.0794 14.0236 17.9823 13.1259 17.9855 12.0153L17.9925 9.60498H16.9925Z"
        />
        <path
          d="M0.985626 11.9661L0.992426 9.60498H-0.0074737L-0.0142737 11.9632C-0.0174737 13.0738 0.880226 13.9767 1.99083 13.98L6.35623 13.9926L6.35913 12.9926L1.99373 12.98C1.43633 12.9784 0.983926 12.5236 0.985626 11.9661Z"
        />
      </svg>
      <svg viewBox="0 0 18 14" aria-hidden="true" slot="exit">
        <path
          d="M5.39655 -0.0200195L5.38955 2.38748C5.38795 2.94488 4.93315 3.39708 4.37565 3.39538L0.0103463 3.38278L0.00744629 4.38278L4.37285 4.39538C5.48345 4.39858 6.38635 3.50088 6.38965 2.39028L6.39665 -0.0200195H5.39655Z"
        />
        <path
          d="M12.6411 2.36891L12.6479 0.0078125H11.6479L11.6411 2.36601C11.6379 3.47651 12.5356 4.37951 13.6462 4.38271L18.0116 4.39531L18.0145 3.39531L13.6491 3.38271C13.0917 3.38111 12.6395 2.92641 12.6411 2.36891Z"
        />
        <path
          d="M12.6034 14.0204L12.6104 11.613C12.612 11.0556 13.0668 10.6034 13.6242 10.605L17.9896 10.6176L17.9925 9.61759L13.6271 9.60499C12.5165 9.60179 11.6136 10.4995 11.6104 11.6101L11.6034 14.0204H12.6034Z"
        />
        <path
          d="M5.359 11.6315L5.3522 13.9926H6.3522L6.359 11.6344C6.3622 10.5238 5.4645 9.62088 4.3539 9.61758L-0.0115043 9.60498L-0.0144043 10.605L4.351 10.6176C4.9084 10.6192 5.3607 11.074 5.359 11.6315Z"
        />
      </svg>
    </media-fullscreen-button>
  </template>

  <template partial="CastButton">
    <media-cast-button part="bottom cast button" disabled="{{disabled}}" aria-disabled="{{disabled}}">
      <svg viewBox="0 0 18 14" aria-hidden="true" slot="enter">
        <path
          d="M16.0072 0H2.0291C0.9185 0 0.0181 0.9003 0.0181 2.011V5.5009C0.357 5.5016 0.6895 5.5275 1.0181 5.5669V2.011C1.0181 1.4536 1.4716 1 2.029 1H16.0072C16.5646 1 17.0181 1.4536 17.0181 2.011V11.9891C17.0181 12.5465 16.5646 13 16.0072 13H8.4358C8.4746 13.3286 8.4999 13.6611 8.4999 13.9999H16.0071C17.1177 13.9999 18.018 13.0996 18.018 11.989V2.011C18.0181 0.9003 17.1178 0 16.0072 0ZM0 6.4999V7.4999C3.584 7.4999 6.5 10.4159 6.5 13.9999H7.5C7.5 9.8642 4.1357 6.4999 0 6.4999ZM0 8.7499V9.7499C2.3433 9.7499 4.25 11.6566 4.25 13.9999H5.25C5.25 11.1049 2.895 8.7499 0 8.7499ZM0.0181 11V14H3.0181C3.0181 12.3431 1.675 11 0.0181 11Z"
        />
      </svg>
      <svg viewBox="0 0 18 14" aria-hidden="true" slot="exit">
        <path
          d="M15.9891 0H2.01103C0.900434 0 3.35947e-05 0.9003 3.35947e-05 2.011V5.5009C0.338934 5.5016 0.671434 5.5275 1.00003 5.5669V2.011C1.00003 1.4536 1.45353 1 2.01093 1H15.9891C16.5465 1 17 1.4536 17 2.011V11.9891C17 12.5465 16.5465 13 15.9891 13H8.41773C8.45653 13.3286 8.48183 13.6611 8.48183 13.9999H15.989C17.0996 13.9999 17.9999 13.0996 17.9999 11.989V2.011C18 0.9003 17.0997 0 15.9891 0ZM-0.0180664 6.4999V7.4999C3.56593 7.4999 6.48193 10.4159 6.48193 13.9999H7.48193C7.48193 9.8642 4.11763 6.4999 -0.0180664 6.4999ZM-0.0180664 8.7499V9.7499C2.32523 9.7499 4.23193 11.6566 4.23193 13.9999H5.23193C5.23193 11.1049 2.87693 8.7499 -0.0180664 8.7499ZM3.35947e-05 11V14H3.00003C3.00003 12.3431 1.65693 11 3.35947e-05 11Z"
        />
        <path d="M2.15002 5.634C5.18352 6.4207 7.57252 8.8151 8.35282 11.8499H15.8501V2.1499H2.15002V5.634Z" />
      </svg>
    </media-cast-button>
  </template>

  <template partial="LiveButton">
    <media-live-button part="{{section ?? 'top'}} live button" disabled="{{disabled}}" aria-disabled="{{disabled}}">
      <span slot="text">Live</span>
    </media-live-button>
  </template>

  <template partial="PlaybackRateMenu">
    <media-playback-rate-menu-button part="bottom playback-rate button"></media-playback-rate-menu-button>
    <media-playback-rate-menu
      hidden
      anchor="auto"
      rates="{{playbackrates}}"
      exportparts="menu-item"
      part="bottom playback-rate menu"
      disabled="{{disabled}}"
      aria-disabled="{{disabled}}"
    ></media-playback-rate-menu>
  </template>

  <template partial="VolumeRange">
    <media-volume-range
      part="bottom volume range"
      disabled="{{disabled}}"
      aria-disabled="{{disabled}}"
    ></media-volume-range>
  </template>

  <template partial="TimeDisplay">
    <media-time-display
      remaining="{{defaultshowremainingtime}}"
      showduration="{{!hideduration}}"
      part="bottom time display"
      disabled="{{disabled}}"
      aria-disabled="{{disabled}}"
    ></media-time-display>
  </template>

  <template partial="TimeRange">
    <media-time-range part="bottom time range" disabled="{{disabled}}" aria-disabled="{{disabled}}" exportparts="thumb">
      <media-preview-thumbnail slot="preview"></media-preview-thumbnail>
      <media-preview-chapter-display slot="preview"></media-preview-chapter-display>
      <media-preview-time-display slot="preview"></media-preview-time-display>
      <div slot="preview" part="arrow"></div>
    </media-time-range>
  </template>

  <template partial="AudioTrackMenu">
    <media-audio-track-menu-button part="bottom audio-track button">
      <svg aria-hidden="true" slot="icon" viewBox="0 0 18 16">
        <path d="M9 15A7 7 0 1 1 9 1a7 7 0 0 1 0 14Zm0 1A8 8 0 1 0 9 0a8 8 0 0 0 0 16Z" />
        <path
          d="M5.2 6.3a.5.5 0 0 1 .5.5v2.4a.5.5 0 1 1-1 0V6.8a.5.5 0 0 1 .5-.5Zm2.4-2.4a.5.5 0 0 1 .5.5v7.2a.5.5 0 0 1-1 0V4.4a.5.5 0 0 1 .5-.5ZM10 5.5a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5Zm2.4-.8a.5.5 0 0 1 .5.5v5.6a.5.5 0 0 1-1 0V5.2a.5.5 0 0 1 .5-.5Z"
        />
      </svg>
    </media-audio-track-menu-button>
    <media-audio-track-menu
      hidden
      anchor="auto"
      part="bottom audio-track menu"
      disabled="{{disabled}}"
      aria-disabled="{{disabled}}"
      exportparts="menu-item"
    >
      <div slot="checked-indicator">
        <style>
          .indicator {
            position: relative;
            top: 1px;
            width: 0.9em;
            height: auto;
            fill: var(--_accent-color);
            margin-right: 5px;
          }

          [aria-checked='false'] .indicator {
            display: none;
          }
        </style>
        <svg viewBox="0 0 14 18" class="indicator">
          <path
            d="M12.252 3.48c-.115.033-.301.161-.425.291-.059.063-1.407 1.815-2.995 3.894s-2.897 3.79-2.908 3.802c-.013.014-.661-.616-1.672-1.624-.908-.905-1.702-1.681-1.765-1.723-.401-.27-.783-.211-1.176.183a1.285 1.285 0 0 0-.261.342.582.582 0 0 0-.082.35c0 .165.01.205.08.35.075.153.213.296 2.182 2.271 1.156 1.159 2.17 2.159 2.253 2.222.189.143.338.196.539.194.203-.003.412-.104.618-.299.205-.193 6.7-8.693 6.804-8.903a.716.716 0 0 0 .085-.345c.01-.179.005-.203-.062-.339-.124-.252-.45-.531-.746-.639a.784.784 0 0 0-.469-.027"
            fill-rule="evenodd"
          />
        </svg>
      </div>
    </media-audio-track-menu>
  </template>

  <template partial="RenditionMenu">
    <media-rendition-menu-button part="bottom rendition button">
      <svg aria-hidden="true" slot="icon" viewBox="0 0 18 14">
        <path
          d="M2.25 9a2 2 0 1 0 0-4 2 2 0 0 0 0 4ZM9 9a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm6.75 0a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z"
        />
      </svg>
    </media-rendition-menu-button>
    <media-rendition-menu
      hidden
      anchor="auto"
      part="bottom rendition menu"
      disabled="{{disabled}}"
      aria-disabled="{{disabled}}"
    >
      <div slot="checked-indicator">
        <style>
          .indicator {
            position: relative;
            top: 1px;
            width: 0.9em;
            height: auto;
            fill: var(--_accent-color);
            margin-right: 5px;
          }

          [aria-checked='false'] .indicator {
            opacity: 0;
          }
        </style>
        <svg viewBox="0 0 14 18" class="indicator">
          <path
            d="M12.252 3.48c-.115.033-.301.161-.425.291-.059.063-1.407 1.815-2.995 3.894s-2.897 3.79-2.908 3.802c-.013.014-.661-.616-1.672-1.624-.908-.905-1.702-1.681-1.765-1.723-.401-.27-.783-.211-1.176.183a1.285 1.285 0 0 0-.261.342.582.582 0 0 0-.082.35c0 .165.01.205.08.35.075.153.213.296 2.182 2.271 1.156 1.159 2.17 2.159 2.253 2.222.189.143.338.196.539.194.203-.003.412-.104.618-.299.205-.193 6.7-8.693 6.804-8.903a.716.716 0 0 0 .085-.345c.01-.179.005-.203-.062-.339-.124-.252-.45-.531-.746-.639a.784.784 0 0 0-.469-.027"
            fill-rule="evenodd"
          />
        </svg>
      </div>
    </media-rendition-menu>
  </template>

  <template partial="MuxBadge">
    <div part="mux-badge">
      <a href="https://www.mux.com/player" target="_blank">
        <span class="mux-badge-text">Powered by</span>
        <div class="mux-badge-logo">
          <svg
            viewBox="0 0 1600 500"
            style="fill-rule: evenodd; clip-rule: evenodd; stroke-linejoin: round; stroke-miterlimit: 2"
          >
            <g>
              <path
                d="M994.287,93.486c-17.121,-0 -31,-13.879 -31,-31c0,-17.121 13.879,-31 31,-31c17.121,-0 31,13.879 31,31c0,17.121 -13.879,31 -31,31m0,-93.486c-34.509,-0 -62.484,27.976 -62.484,62.486l0,187.511c0,68.943 -56.09,125.033 -125.032,125.033c-68.942,-0 -125.03,-56.09 -125.03,-125.033l0,-187.511c0,-34.51 -27.976,-62.486 -62.485,-62.486c-34.509,-0 -62.484,27.976 -62.484,62.486l0,187.511c0,137.853 112.149,250.003 249.999,250.003c137.851,-0 250.001,-112.15 250.001,-250.003l0,-187.511c0,-34.51 -27.976,-62.486 -62.485,-62.486"
                style="fill-rule: nonzero"
              ></path>
              <path
                d="M1537.51,468.511c-17.121,-0 -31,-13.879 -31,-31c0,-17.121 13.879,-31 31,-31c17.121,-0 31,13.879 31,31c0,17.121 -13.879,31 -31,31m-275.883,-218.509l-143.33,143.329c-24.402,24.402 -24.402,63.966 0,88.368c24.402,24.402 63.967,24.402 88.369,-0l143.33,-143.329l143.328,143.329c24.402,24.4 63.967,24.402 88.369,-0c24.403,-24.402 24.403,-63.966 0.001,-88.368l-143.33,-143.329l0.001,-0.004l143.329,-143.329c24.402,-24.402 24.402,-63.965 0,-88.367c-24.402,-24.402 -63.967,-24.402 -88.369,-0l-143.329,143.328l-143.329,-143.328c-24.402,-24.401 -63.967,-24.402 -88.369,-0c-24.402,24.402 -24.402,63.965 0,88.367l143.329,143.329l0,0.004Z"
                style="fill-rule: nonzero"
              ></path>
              <path
                d="M437.511,468.521c-17.121,-0 -31,-13.879 -31,-31c0,-17.121 13.879,-31 31,-31c17.121,-0 31,13.879 31,31c0,17.121 -13.879,31 -31,31m23.915,-463.762c-23.348,-9.672 -50.226,-4.327 -68.096,13.544l-143.331,143.329l-143.33,-143.329c-17.871,-17.871 -44.747,-23.216 -68.096,-13.544c-23.349,9.671 -38.574,32.455 -38.574,57.729l0,375.026c0,34.51 27.977,62.486 62.487,62.486c34.51,-0 62.486,-27.976 62.486,-62.486l0,-224.173l80.843,80.844c24.404,24.402 63.965,24.402 88.369,-0l80.843,-80.844l0,224.173c0,34.51 27.976,62.486 62.486,62.486c34.51,-0 62.486,-27.976 62.486,-62.486l0,-375.026c0,-25.274 -15.224,-48.058 -38.573,-57.729"
                style="fill-rule: nonzero"
              ></path>
            </g>
          </svg>
        </div>
      </a>
    </div>
  </template>

  <media-controller
    part="controller"
    defaultstreamtype="{{defaultstreamtype ?? 'on-demand'}}"
    breakpoints="sm:470"
    gesturesdisabled="{{disabled}}"
    hotkeys="{{hotkeys}}"
    nohotkeys="{{nohotkeys}}"
    novolumepref="{{novolumepref}}"
    audio="{{audio}}"
    noautoseektolive="{{noautoseektolive}}"
    defaultsubtitles="{{defaultsubtitles}}"
    defaultduration="{{defaultduration ?? false}}"
    keyboardforwardseekoffset="{{forwardseekoffset}}"
    keyboardbackwardseekoffset="{{backwardseekoffset}}"
    exportparts="layer, media-layer, poster-layer, vertical-layer, centered-layer, gesture-layer"
    style="--_pre-playback-place:{{preplaybackplace ?? 'center'}}"
  >
    <slot name="media" slot="media"></slot>
    <slot name="poster" slot="poster"></slot>

    <media-loading-indicator slot="centered-chrome" noautohide></media-loading-indicator>

    <template if="!audio">
      <media-error-dialog slot="dialog" noautohide></media-error-dialog>
      <!-- Pre-playback UI -->
      <!-- same for both on-demand and live -->
      <div slot="centered-chrome" class="center-controls pre-playback">
        <template if="!breakpointsm">{{>PlayButton section="center"}}</template>
        <template if="breakpointsm">{{>PrePlayButton section="center"}}</template>
      </div>

      <!-- Mux Badge -->
      <template if="proudlydisplaymuxbadge"> {{>MuxBadge}} </template>

      <!-- Autoplay centered unmute button -->
      <!--
        todo: figure out how show this with available state variables
        needs to show when:
        - autoplay is enabled
        - playback has been successful
        - audio is muted
        - in place / instead of the pre-plaback play button
        - not to show again after user has interacted with this button
          - OR user has interacted with the mute button in the control bar
      -->
      <!--
        There should be a >MuteButton to the left of the "Unmute" text, but a templating bug
        makes it appear even if commented out in the markup, add it back when code is un-commented
      -->
      <!-- <div slot="centered-chrome" class="autoplay-unmute">
        <div role="button" class="autoplay-unmute-btn">Unmute</div>
      </div> -->

      <template if="streamtype == 'on-demand'">
        <template if="breakpointsm">
          <media-control-bar part="control-bar top" slot="top-chrome">{{>TitleDisplay}} </media-control-bar>
        </template>
        {{>TimeRange}}
        <media-control-bar part="control-bar bottom">
          {{>PlayButton}} {{>SeekBackwardButton}} {{>SeekForwardButton}} {{>TimeDisplay}} {{>MuteButton}}
          {{>VolumeRange}}
          <div class="spacer"></div>
          {{>RenditionMenu}} {{>PlaybackRateMenu}} {{>AudioTrackMenu}} {{>CaptionsMenu}} {{>AirplayButton}}
          {{>CastButton}} {{>PipButton}} {{>FullscreenButton}}
        </media-control-bar>
      </template>

      <template if="streamtype == 'live'">
        <media-control-bar part="control-bar top" slot="top-chrome">
          {{>LiveButton}}
          <template if="breakpointsm"> {{>TitleDisplay}} </template>
        </media-control-bar>
        <template if="targetlivewindow > 0">{{>TimeRange}}</template>
        <media-control-bar part="control-bar bottom">
          {{>PlayButton}}
          <template if="targetlivewindow > 0">{{>SeekBackwardButton}} {{>SeekForwardButton}}</template>
          {{>MuteButton}} {{>VolumeRange}}
          <div class="spacer"></div>
          {{>RenditionMenu}} {{>AudioTrackMenu}} {{>CaptionsMenu}} {{>AirplayButton}} {{>CastButton}} {{>PipButton}}
          {{>FullscreenButton}}
        </media-control-bar>
      </template>
    </template>

    <template if="audio">
      <template if="streamtype == 'on-demand'">
        <template if="title">
          <media-control-bar part="control-bar top">{{>TitleDisplay}}</media-control-bar>
        </template>
        <media-control-bar part="control-bar bottom">
          {{>PlayButton}}
          <template if="breakpointsm"> {{>SeekBackwardButton}} {{>SeekForwardButton}} </template>
          {{>MuteButton}}
          <template if="breakpointsm">{{>VolumeRange}}</template>
          {{>TimeDisplay}} {{>TimeRange}}
          <template if="breakpointsm">{{>PlaybackRateMenu}}</template>
          {{>AirplayButton}} {{>CastButton}}
        </media-control-bar>
      </template>

      <template if="streamtype == 'live'">
        <template if="title">
          <media-control-bar part="control-bar top">{{>TitleDisplay}}</media-control-bar>
        </template>
        <media-control-bar part="control-bar bottom">
          {{>PlayButton}} {{>LiveButton section="bottom"}} {{>MuteButton}}
          <template if="breakpointsm">
            {{>VolumeRange}}
            <template if="targetlivewindow > 0"> {{>SeekBackwardButton}} {{>SeekForwardButton}} </template>
          </template>
          <template if="targetlivewindow > 0"> {{>TimeDisplay}} {{>TimeRange}} </template>
          <template if="!targetlivewindow"><div class="spacer"></div></template>
          {{>AirplayButton}} {{>CastButton}}
        </media-control-bar>
      </template>
    </template>

    <slot></slot>
  </media-controller>
</template>
`,tR=MN.createElement("template");"innerHTML"in tR&&(tR.innerHTML=Bqe);var JW,eY,vle=class extends mk{};vle.template=(eY=(JW=tR.content)==null?void 0:JW.children)==null?void 0:eY[0];OA.customElements.get("media-theme-gerwig")||OA.customElements.define("media-theme-gerwig",vle);var Pqe="gerwig",Ip={SRC:"src",POSTER:"poster"},hn={STYLE:"style",DEFAULT_HIDDEN_CAPTIONS:"default-hidden-captions",PRIMARY_COLOR:"primary-color",SECONDARY_COLOR:"secondary-color",ACCENT_COLOR:"accent-color",FORWARD_SEEK_OFFSET:"forward-seek-offset",BACKWARD_SEEK_OFFSET:"backward-seek-offset",PLAYBACK_TOKEN:"playback-token",THUMBNAIL_TOKEN:"thumbnail-token",STORYBOARD_TOKEN:"storyboard-token",FULLSCREEN_ELEMENT:"fullscreen-element",DRM_TOKEN:"drm-token",STORYBOARD_SRC:"storyboard-src",THUMBNAIL_TIME:"thumbnail-time",AUDIO:"audio",NOHOTKEYS:"nohotkeys",HOTKEYS:"hotkeys",PLAYBACK_RATES:"playbackrates",DEFAULT_SHOW_REMAINING_TIME:"default-show-remaining-time",DEFAULT_DURATION:"default-duration",TITLE:"title",VIDEO_TITLE:"video-title",PLACEHOLDER:"placeholder",THEME:"theme",DEFAULT_STREAM_TYPE:"default-stream-type",TARGET_LIVE_WINDOW:"target-live-window",EXTRA_SOURCE_PARAMS:"extra-source-params",NO_VOLUME_PREF:"no-volume-pref",NO_MUTED_PREF:"no-muted-pref",CAST_RECEIVER:"cast-receiver",NO_TOOLTIPS:"no-tooltips",PROUDLY_DISPLAY_MUX_BADGE:"proudly-display-mux-badge",DISABLE_PSEUDO_ENDED:"disable-pseudo-ended"},rR=["audio","backwardseekoffset","defaultduration","defaultshowremainingtime","defaultsubtitles","noautoseektolive","disabled","exportparts","forwardseekoffset","hideduration","hotkeys","nohotkeys","playbackrates","defaultstreamtype","streamtype","style","targetlivewindow","template","title","videotitle","novolumepref","nomutedpref","proudlydisplaymuxbadge"];function Oqe(t,e){var r,n,i;return{src:!t.playbackId&&t.src,playbackId:t.playbackId,hasSrc:!!t.playbackId||!!t.src||!!t.currentSrc,poster:t.poster,storyboard:((r=t.media)==null?void 0:r.currentSrc)&&t.storyboard,storyboardSrc:t.getAttribute(hn.STORYBOARD_SRC),fullscreenElement:t.getAttribute(hn.FULLSCREEN_ELEMENT),placeholder:t.getAttribute("placeholder"),themeTemplate:Dqe(t),thumbnailTime:!t.tokens.thumbnail&&t.thumbnailTime,autoplay:t.autoplay,crossOrigin:t.crossOrigin,loop:t.loop,noHotKeys:t.hasAttribute(hn.NOHOTKEYS),hotKeys:t.getAttribute(hn.HOTKEYS),muted:t.muted,paused:t.paused,preload:t.preload,envKey:t.envKey,preferCmcd:t.preferCmcd,debug:t.debug,disableTracking:t.disableTracking,disableCookies:t.disableCookies,tokens:t.tokens,beaconCollectionDomain:t.beaconCollectionDomain,maxResolution:t.maxResolution,minResolution:t.minResolution,maxAutoResolution:t.maxAutoResolution,programStartTime:t.programStartTime,programEndTime:t.programEndTime,assetStartTime:t.assetStartTime,assetEndTime:t.assetEndTime,renditionOrder:t.renditionOrder,metadata:t.metadata,playerInitTime:t.playerInitTime,playerSoftwareName:t.playerSoftwareName,playerSoftwareVersion:t.playerSoftwareVersion,startTime:t.startTime,preferPlayback:t.preferPlayback,audio:t.audio,defaultStreamType:t.defaultStreamType,targetLiveWindow:t.getAttribute(mr.TARGET_LIVE_WINDOW),streamType:mU(t.getAttribute(mr.STREAM_TYPE)),primaryColor:t.getAttribute(hn.PRIMARY_COLOR),secondaryColor:t.getAttribute(hn.SECONDARY_COLOR),accentColor:t.getAttribute(hn.ACCENT_COLOR),forwardSeekOffset:t.forwardSeekOffset,backwardSeekOffset:t.backwardSeekOffset,defaultHiddenCaptions:t.defaultHiddenCaptions,defaultDuration:t.defaultDuration,defaultShowRemainingTime:t.defaultShowRemainingTime,hideDuration:Mqe(t),playbackRates:t.getAttribute(hn.PLAYBACK_RATES),customDomain:(n=t.getAttribute(mr.CUSTOM_DOMAIN))!=null?n:void 0,title:t.getAttribute(hn.TITLE),videoTitle:(i=t.getAttribute(hn.VIDEO_TITLE))!=null?i:t.getAttribute(hn.TITLE),novolumepref:t.hasAttribute(hn.NO_VOLUME_PREF),nomutedpref:t.hasAttribute(hn.NO_MUTED_PREF),proudlyDisplayMuxBadge:t.hasAttribute(hn.PROUDLY_DISPLAY_MUX_BADGE),castReceiver:t.castReceiver,disablePseudoEnded:t.hasAttribute(hn.DISABLE_PSEUDO_ENDED),capRenditionToPlayerSize:t.capRenditionToPlayerSize,...e,extraSourceParams:t.extraSourceParams}}var Rqe=uoe.formatErrorMessage;uoe.formatErrorMessage=t=>{var e,r;if(t instanceof ii){let n=Lqe(t,!1);return`
      ${n!=null&&n.title?`<h3>${n.title}</h3>`:""}
      ${n!=null&&n.message||n!=null&&n.linkUrl?`<p>
        ${n?.message}
        ${n!=null&&n.linkUrl?`<a
              href="${n.linkUrl}"
              target="_blank"
              rel="external noopener"
              aria-label="${(e=n.linkText)!=null?e:""} ${Ki("(opens in a new window)")}"
              >${(r=n.linkText)!=null?r:n.linkUrl}</a
            >`:""}
      </p>`:""}
    `}return Rqe(t)};function Dqe(t){var e,r;let n=t.theme;if(n){let i=(r=(e=t.getRootNode())==null?void 0:e.getElementById)==null?void 0:r.call(e,n);if(i&&i instanceof HTMLTemplateElement)return i;n.startsWith("media-theme-")||(n=`media-theme-${n}`);let a=OA.customElements.get(n);if(a!=null&&a.template)return a.template}}function Mqe(t){var e;let r=(e=t.mediaController)==null?void 0:e.querySelector("media-time-display");return r&&getComputedStyle(r).getPropertyValue("--media-duration-display-display").trim()==="none"}function tY(t){let e=t.videoTitle?{video_title:t.videoTitle}:{};return t.getAttributeNames().filter(r=>r.startsWith("metadata-")).reduce((r,n)=>{let i=t.getAttribute(n);return i!==null&&(r[n.replace(/^metadata-/,"").replace(/-/g,"_")]=i),r},e)}var Fqe=Object.values(mr),Uqe=Object.values(Ip),$qe=Object.values(hn),rY=hle(),nY="mux-player",iY={isDialogOpen:!1},Hqe={redundant_streams:!0},ST,jT,TT,Dv,CT,Rb,Lc,A0,yle,nR,Mv,sY,aY,oY,lY,Qqe=class extends YW{constructor(){super(),Pm(this,Lc),Pm(this,ST),Pm(this,jT,!1),Pm(this,TT,{}),Pm(this,Dv,!0),Pm(this,CT,new aqe(this,"hotkeys")),Pm(this,Rb,{...iY,onCloseErrorDialog:t=>{var e;((e=t.composedPath()[0])==null?void 0:e.localName)==="media-error-dialog"&&gu(this,Lc,nR).call(this,{isDialogOpen:!1})},onFocusInErrorDialog:t=>{var e;((e=t.composedPath()[0])==null?void 0:e.localName)==="media-error-dialog"&&(ule(this,MN.activeElement)||t.preventDefault())}}),GA(this,ST,t6()),this.attachShadow({mode:"open"}),gu(this,Lc,yle).call(this),this.isConnected&&gu(this,Lc,A0).call(this)}static get NAME(){return nY}static get VERSION(){return rY}static get observedAttributes(){var t;return[...(t=YW.observedAttributes)!=null?t:[],...Uqe,...Fqe,...$qe]}get mediaTheme(){var t;return(t=this.shadowRoot)==null?void 0:t.querySelector("media-theme")}get mediaController(){var t,e;return(e=(t=this.mediaTheme)==null?void 0:t.shadowRoot)==null?void 0:e.querySelector("media-controller")}connectedCallback(){let t=this.media;t&&(t.metadata=tY(this))}attributeChangedCallback(t,e,r){switch(gu(this,Lc,A0).call(this),super.attributeChangedCallback(t,e,r),t){case hn.HOTKEYS:Fo(this,CT).value=r;break;case hn.THUMBNAIL_TIME:{r!=null&&this.tokens.thumbnail&&Mp(Ki("Use of thumbnail-time with thumbnail-token is currently unsupported. Ignore thumbnail-time.").toString());break}case hn.THUMBNAIL_TOKEN:{if(r){let n=Cb(r);if(n){let{aud:i}=n,a=b2.THUMBNAIL;i!==a&&Mp(Ki("The {tokenNamePrefix}-token has an incorrect aud value: {aud}. aud value should be {expectedAud}.").format({aud:i,expectedAud:a,tokenNamePrefix:"thumbnail"}))}}break}case hn.STORYBOARD_TOKEN:{if(r){let n=Cb(r);if(n){let{aud:i}=n,a=b2.STORYBOARD;i!==a&&Mp(Ki("The {tokenNamePrefix}-token has an incorrect aud value: {aud}. aud value should be {expectedAud}.").format({aud:i,expectedAud:a,tokenNamePrefix:"storyboard"}))}}break}case hn.DRM_TOKEN:{if(r){let n=Cb(r);if(n){let{aud:i}=n,a=b2.DRM;i!==a&&Mp(Ki("The {tokenNamePrefix}-token has an incorrect aud value: {aud}. aud value should be {expectedAud}.").format({aud:i,expectedAud:a,tokenNamePrefix:"drm"}))}}break}case mr.PLAYBACK_ID:{r!=null&&r.includes("?token")&&pf(Ki("The specificed playback ID {playbackId} contains a token which must be provided via the playback-token attribute.").format({playbackId:r}));break}case mr.STREAM_TYPE:{r&&![Lo.LIVE,Lo.ON_DEMAND,Lo.UNKNOWN].includes(r)?["ll-live","live:dvr","ll-live:dvr"].includes(this.streamType)?this.targetLiveWindow=r.includes("dvr")?Number.POSITIVE_INFINITY:0:mle({file:"invalid-stream-type.md",message:Ki("Invalid stream-type value supplied: `{streamType}`. Please provide stream-type as either: `on-demand` or `live`").format({streamType:this.streamType})}):r===Lo.LIVE?this.getAttribute(hn.TARGET_LIVE_WINDOW)==null&&(this.targetLiveWindow=0):this.targetLiveWindow=Number.NaN;break}case hn.FULLSCREEN_ELEMENT:{if(r!=null||r!==e){let n=MN.getElementById(r),i=n?.querySelector("mux-player");this.mediaController&&n&&i&&(this.mediaController.fullscreenElement=n)}break}case mr.CAP_RENDITION_TO_PLAYER_SIZE:{(r==null||r!==e)&&(this.capRenditionToPlayerSize=r!=null?!0:void 0);break}}[mr.PLAYBACK_ID,Ip.SRC,hn.PLAYBACK_TOKEN].includes(t)&&e!==r&&GA(this,Rb,{...Fo(this,Rb),...iY}),gu(this,Lc,Mv).call(this,{[sqe(t)]:r})}async requestFullscreen(t){var e;if(!(!this.mediaController||this.mediaController.hasAttribute(gt.MEDIA_IS_FULLSCREEN)))return(e=this.mediaController)==null||e.dispatchEvent(new OA.CustomEvent(Gn.MEDIA_ENTER_FULLSCREEN_REQUEST,{composed:!0,bubbles:!0})),new Promise((r,n)=>{var i;(i=this.mediaController)==null||i.addEventListener(fg.MEDIA_IS_FULLSCREEN,()=>r(),{once:!0})})}async exitFullscreen(){var t;if(!(!this.mediaController||!this.mediaController.hasAttribute(gt.MEDIA_IS_FULLSCREEN)))return(t=this.mediaController)==null||t.dispatchEvent(new OA.CustomEvent(Gn.MEDIA_EXIT_FULLSCREEN_REQUEST,{composed:!0,bubbles:!0})),new Promise((e,r)=>{var n;(n=this.mediaController)==null||n.addEventListener(fg.MEDIA_IS_FULLSCREEN,()=>e(),{once:!0})})}get preferCmcd(){var t;return(t=this.getAttribute(mr.PREFER_CMCD))!=null?t:void 0}set preferCmcd(t){t!==this.preferCmcd&&(t?hN.includes(t)?this.setAttribute(mr.PREFER_CMCD,t):Mp(`Invalid value for preferCmcd. Must be one of ${hN.join()}`):this.removeAttribute(mr.PREFER_CMCD))}get hasPlayed(){var t,e;return(e=(t=this.mediaController)==null?void 0:t.hasAttribute(gt.MEDIA_HAS_PLAYED))!=null?e:!1}get inLiveWindow(){var t;return(t=this.mediaController)==null?void 0:t.hasAttribute(gt.MEDIA_TIME_IS_LIVE)}get _hls(){var t;return(t=this.media)==null?void 0:t._hls}get mux(){var t;return(t=this.media)==null?void 0:t.mux}get theme(){var t;return(t=this.getAttribute(hn.THEME))!=null?t:Pqe}set theme(t){this.setAttribute(hn.THEME,`${t}`)}get themeProps(){let t=this.mediaTheme;if(!t)return;let e={};for(let r of t.getAttributeNames()){if(rR.includes(r))continue;let n=t.getAttribute(r);e[lle(r)]=n===""?!0:n}return e}set themeProps(t){var e,r;gu(this,Lc,A0).call(this);let n={...this.themeProps,...t};for(let i in n){if(rR.includes(i))continue;let a=t?.[i];typeof a=="boolean"||a==null?(e=this.mediaTheme)==null||e.toggleAttribute(eR(i),!!a):(r=this.mediaTheme)==null||r.setAttribute(eR(i),a)}}get playbackId(){var t;return(t=this.getAttribute(mr.PLAYBACK_ID))!=null?t:void 0}set playbackId(t){t?this.setAttribute(mr.PLAYBACK_ID,t):this.removeAttribute(mr.PLAYBACK_ID)}get src(){var t,e;return this.playbackId?(t=_v(this,Ip.SRC))!=null?t:void 0:(e=this.getAttribute(Ip.SRC))!=null?e:void 0}set src(t){t?this.setAttribute(Ip.SRC,t):this.removeAttribute(Ip.SRC)}get poster(){var t;let e=this.getAttribute(Ip.POSTER);if(e!=null)return e;let{tokens:r}=this;if(r.playback&&!r.thumbnail){Mp("Missing expected thumbnail token. No poster image will be shown");return}if(this.playbackId&&!this.audio)return rqe(this.playbackId,{customDomain:this.customDomain,thumbnailTime:(t=this.thumbnailTime)!=null?t:this.startTime,programTime:this.programStartTime,token:r.thumbnail})}set poster(t){t||t===""?this.setAttribute(Ip.POSTER,t):this.removeAttribute(Ip.POSTER)}get storyboardSrc(){var t;return(t=this.getAttribute(hn.STORYBOARD_SRC))!=null?t:void 0}set storyboardSrc(t){t?this.setAttribute(hn.STORYBOARD_SRC,t):this.removeAttribute(hn.STORYBOARD_SRC)}get storyboard(){let{tokens:t}=this;if(this.storyboardSrc&&!t.storyboard)return this.storyboardSrc;if(!(this.audio||!this.playbackId||!this.streamType||[Lo.LIVE,Lo.UNKNOWN].includes(this.streamType)||t.playback&&!t.storyboard))return nqe(this.playbackId,{customDomain:this.customDomain,token:t.storyboard,programStartTime:this.programStartTime,programEndTime:this.programEndTime})}get audio(){return this.hasAttribute(hn.AUDIO)}set audio(t){if(!t){this.removeAttribute(hn.AUDIO);return}this.setAttribute(hn.AUDIO,"")}get hotkeys(){return Fo(this,CT)}get nohotkeys(){return this.hasAttribute(hn.NOHOTKEYS)}set nohotkeys(t){if(!t){this.removeAttribute(hn.NOHOTKEYS);return}this.setAttribute(hn.NOHOTKEYS,"")}get thumbnailTime(){return ff(this.getAttribute(hn.THUMBNAIL_TIME))}set thumbnailTime(t){this.setAttribute(hn.THUMBNAIL_TIME,`${t}`)}get videoTitle(){var t,e;return(e=(t=this.getAttribute(hn.VIDEO_TITLE))!=null?t:this.getAttribute(hn.TITLE))!=null?e:""}set videoTitle(t){t!==this.videoTitle&&(t?this.setAttribute(hn.VIDEO_TITLE,t):this.removeAttribute(hn.VIDEO_TITLE))}get placeholder(){var t;return(t=_v(this,hn.PLACEHOLDER))!=null?t:""}set placeholder(t){this.setAttribute(hn.PLACEHOLDER,`${t}`)}get primaryColor(){var t,e;let r=this.getAttribute(hn.PRIMARY_COLOR);if(r!=null||this.mediaTheme&&(r=(e=(t=OA.getComputedStyle(this.mediaTheme))==null?void 0:t.getPropertyValue("--_primary-color"))==null?void 0:e.trim(),r))return r}set primaryColor(t){this.setAttribute(hn.PRIMARY_COLOR,`${t}`)}get secondaryColor(){var t,e;let r=this.getAttribute(hn.SECONDARY_COLOR);if(r!=null||this.mediaTheme&&(r=(e=(t=OA.getComputedStyle(this.mediaTheme))==null?void 0:t.getPropertyValue("--_secondary-color"))==null?void 0:e.trim(),r))return r}set secondaryColor(t){this.setAttribute(hn.SECONDARY_COLOR,`${t}`)}get accentColor(){var t,e;let r=this.getAttribute(hn.ACCENT_COLOR);if(r!=null||this.mediaTheme&&(r=(e=(t=OA.getComputedStyle(this.mediaTheme))==null?void 0:t.getPropertyValue("--_accent-color"))==null?void 0:e.trim(),r))return r}set accentColor(t){this.setAttribute(hn.ACCENT_COLOR,`${t}`)}get defaultShowRemainingTime(){return this.hasAttribute(hn.DEFAULT_SHOW_REMAINING_TIME)}set defaultShowRemainingTime(t){t?this.setAttribute(hn.DEFAULT_SHOW_REMAINING_TIME,""):this.removeAttribute(hn.DEFAULT_SHOW_REMAINING_TIME)}get playbackRates(){if(this.hasAttribute(hn.PLAYBACK_RATES))return this.getAttribute(hn.PLAYBACK_RATES).trim().split(/\s*,?\s+/).map(t=>Number(t)).filter(t=>!Number.isNaN(t)).sort((t,e)=>t-e)}set playbackRates(t){if(!t){this.removeAttribute(hn.PLAYBACK_RATES);return}this.setAttribute(hn.PLAYBACK_RATES,t.join(" "))}get forwardSeekOffset(){var t;return(t=ff(this.getAttribute(hn.FORWARD_SEEK_OFFSET)))!=null?t:10}set forwardSeekOffset(t){this.setAttribute(hn.FORWARD_SEEK_OFFSET,`${t}`)}get backwardSeekOffset(){var t;return(t=ff(this.getAttribute(hn.BACKWARD_SEEK_OFFSET)))!=null?t:10}set backwardSeekOffset(t){this.setAttribute(hn.BACKWARD_SEEK_OFFSET,`${t}`)}get defaultHiddenCaptions(){return this.hasAttribute(hn.DEFAULT_HIDDEN_CAPTIONS)}set defaultHiddenCaptions(t){t?this.setAttribute(hn.DEFAULT_HIDDEN_CAPTIONS,""):this.removeAttribute(hn.DEFAULT_HIDDEN_CAPTIONS)}get defaultDuration(){return ff(this.getAttribute(hn.DEFAULT_DURATION))}set defaultDuration(t){t==null?this.removeAttribute(hn.DEFAULT_DURATION):this.setAttribute(hn.DEFAULT_DURATION,`${t}`)}get playerInitTime(){return this.hasAttribute(mr.PLAYER_INIT_TIME)?ff(this.getAttribute(mr.PLAYER_INIT_TIME)):Fo(this,ST)}set playerInitTime(t){t!=this.playerInitTime&&(t==null?this.removeAttribute(mr.PLAYER_INIT_TIME):this.setAttribute(mr.PLAYER_INIT_TIME,`${+t}`))}get playerSoftwareName(){var t;return(t=this.getAttribute(mr.PLAYER_SOFTWARE_NAME))!=null?t:nY}get playerSoftwareVersion(){var t;return(t=this.getAttribute(mr.PLAYER_SOFTWARE_VERSION))!=null?t:rY}get beaconCollectionDomain(){var t;return(t=this.getAttribute(mr.BEACON_COLLECTION_DOMAIN))!=null?t:void 0}set beaconCollectionDomain(t){t!==this.beaconCollectionDomain&&(t?this.setAttribute(mr.BEACON_COLLECTION_DOMAIN,t):this.removeAttribute(mr.BEACON_COLLECTION_DOMAIN))}get maxResolution(){var t;return(t=this.getAttribute(mr.MAX_RESOLUTION))!=null?t:void 0}set maxResolution(t){t!==this.maxResolution&&(t?this.setAttribute(mr.MAX_RESOLUTION,t):this.removeAttribute(mr.MAX_RESOLUTION))}get minResolution(){var t;return(t=this.getAttribute(mr.MIN_RESOLUTION))!=null?t:void 0}set minResolution(t){t!==this.minResolution&&(t?this.setAttribute(mr.MIN_RESOLUTION,t):this.removeAttribute(mr.MIN_RESOLUTION))}get maxAutoResolution(){var t;return(t=this.getAttribute(mr.MAX_AUTO_RESOLUTION))!=null?t:void 0}set maxAutoResolution(t){t==null?this.removeAttribute(mr.MAX_AUTO_RESOLUTION):this.setAttribute(mr.MAX_AUTO_RESOLUTION,t)}get renditionOrder(){var t;return(t=this.getAttribute(mr.RENDITION_ORDER))!=null?t:void 0}set renditionOrder(t){t!==this.renditionOrder&&(t?this.setAttribute(mr.RENDITION_ORDER,t):this.removeAttribute(mr.RENDITION_ORDER))}get programStartTime(){return ff(this.getAttribute(mr.PROGRAM_START_TIME))}set programStartTime(t){t==null?this.removeAttribute(mr.PROGRAM_START_TIME):this.setAttribute(mr.PROGRAM_START_TIME,`${t}`)}get programEndTime(){return ff(this.getAttribute(mr.PROGRAM_END_TIME))}set programEndTime(t){t==null?this.removeAttribute(mr.PROGRAM_END_TIME):this.setAttribute(mr.PROGRAM_END_TIME,`${t}`)}get assetStartTime(){return ff(this.getAttribute(mr.ASSET_START_TIME))}set assetStartTime(t){t==null?this.removeAttribute(mr.ASSET_START_TIME):this.setAttribute(mr.ASSET_START_TIME,`${t}`)}get assetEndTime(){return ff(this.getAttribute(mr.ASSET_END_TIME))}set assetEndTime(t){t==null?this.removeAttribute(mr.ASSET_END_TIME):this.setAttribute(mr.ASSET_END_TIME,`${t}`)}get extraSourceParams(){return this.hasAttribute(hn.EXTRA_SOURCE_PARAMS)?[...new URLSearchParams(this.getAttribute(hn.EXTRA_SOURCE_PARAMS)).entries()].reduce((t,[e,r])=>(t[e]=r,t),{}):Hqe}set extraSourceParams(t){t==null?this.removeAttribute(hn.EXTRA_SOURCE_PARAMS):this.setAttribute(hn.EXTRA_SOURCE_PARAMS,new URLSearchParams(t).toString())}get customDomain(){var t;return(t=this.getAttribute(mr.CUSTOM_DOMAIN))!=null?t:void 0}set customDomain(t){t!==this.customDomain&&(t?this.setAttribute(mr.CUSTOM_DOMAIN,t):this.removeAttribute(mr.CUSTOM_DOMAIN))}get envKey(){var t;return(t=_v(this,mr.ENV_KEY))!=null?t:void 0}set envKey(t){this.setAttribute(mr.ENV_KEY,`${t}`)}get noVolumePref(){return this.hasAttribute(hn.NO_VOLUME_PREF)}set noVolumePref(t){t?this.setAttribute(hn.NO_VOLUME_PREF,""):this.removeAttribute(hn.NO_VOLUME_PREF)}get noMutedPref(){return this.hasAttribute(hn.NO_MUTED_PREF)}set noMutedPref(t){t?this.setAttribute(hn.NO_MUTED_PREF,""):this.removeAttribute(hn.NO_MUTED_PREF)}get debug(){return _v(this,mr.DEBUG)!=null}set debug(t){t?this.setAttribute(mr.DEBUG,""):this.removeAttribute(mr.DEBUG)}get disableTracking(){return _v(this,mr.DISABLE_TRACKING)!=null}set disableTracking(t){this.toggleAttribute(mr.DISABLE_TRACKING,!!t)}get disableCookies(){return _v(this,mr.DISABLE_COOKIES)!=null}set disableCookies(t){t?this.setAttribute(mr.DISABLE_COOKIES,""):this.removeAttribute(mr.DISABLE_COOKIES)}get streamType(){var t,e,r;return(r=(e=this.getAttribute(mr.STREAM_TYPE))!=null?e:(t=this.media)==null?void 0:t.streamType)!=null?r:Lo.UNKNOWN}set streamType(t){this.setAttribute(mr.STREAM_TYPE,`${t}`)}get defaultStreamType(){var t,e,r;return(r=(e=this.getAttribute(hn.DEFAULT_STREAM_TYPE))!=null?e:(t=this.mediaController)==null?void 0:t.getAttribute(hn.DEFAULT_STREAM_TYPE))!=null?r:Lo.ON_DEMAND}set defaultStreamType(t){t?this.setAttribute(hn.DEFAULT_STREAM_TYPE,t):this.removeAttribute(hn.DEFAULT_STREAM_TYPE)}get targetLiveWindow(){var t,e;return this.hasAttribute(hn.TARGET_LIVE_WINDOW)?+this.getAttribute(hn.TARGET_LIVE_WINDOW):(e=(t=this.media)==null?void 0:t.targetLiveWindow)!=null?e:Number.NaN}set targetLiveWindow(t){t==this.targetLiveWindow||Number.isNaN(t)&&Number.isNaN(this.targetLiveWindow)||(t==null?this.removeAttribute(hn.TARGET_LIVE_WINDOW):this.setAttribute(hn.TARGET_LIVE_WINDOW,`${+t}`))}get liveEdgeStart(){var t;return(t=this.media)==null?void 0:t.liveEdgeStart}get startTime(){return ff(_v(this,mr.START_TIME))}set startTime(t){this.setAttribute(mr.START_TIME,`${t}`)}get preferPlayback(){let t=this.getAttribute(mr.PREFER_PLAYBACK);if(t===UA.MSE||t===UA.NATIVE)return t}set preferPlayback(t){t!==this.preferPlayback&&(t===UA.MSE||t===UA.NATIVE?this.setAttribute(mr.PREFER_PLAYBACK,t):this.removeAttribute(mr.PREFER_PLAYBACK))}get metadata(){var t;return(t=this.media)==null?void 0:t.metadata}set metadata(t){if(gu(this,Lc,A0).call(this),!this.media){pf("underlying media element missing when trying to set metadata. metadata will not be set.");return}this.media.metadata={...tY(this),...t}}get _hlsConfig(){var t;return(t=this.media)==null?void 0:t._hlsConfig}set _hlsConfig(t){if(gu(this,Lc,A0).call(this),!this.media){pf("underlying media element missing when trying to set _hlsConfig. _hlsConfig will not be set.");return}this.media._hlsConfig=t}async addCuePoints(t){var e;if(gu(this,Lc,A0).call(this),!this.media){pf("underlying media element missing when trying to addCuePoints. cuePoints will not be added.");return}return(e=this.media)==null?void 0:e.addCuePoints(t)}get activeCuePoint(){var t;return(t=this.media)==null?void 0:t.activeCuePoint}get cuePoints(){var t,e;return(e=(t=this.media)==null?void 0:t.cuePoints)!=null?e:[]}addChapters(t){var e;if(gu(this,Lc,A0).call(this),!this.media){pf("underlying media element missing when trying to addChapters. chapters will not be added.");return}return(e=this.media)==null?void 0:e.addChapters(t)}get activeChapter(){var t;return(t=this.media)==null?void 0:t.activeChapter}get chapters(){var t,e;return(e=(t=this.media)==null?void 0:t.chapters)!=null?e:[]}getStartDate(){var t;return(t=this.media)==null?void 0:t.getStartDate()}get currentPdt(){var t;return(t=this.media)==null?void 0:t.currentPdt}get tokens(){let t=this.getAttribute(hn.PLAYBACK_TOKEN),e=this.getAttribute(hn.DRM_TOKEN),r=this.getAttribute(hn.THUMBNAIL_TOKEN),n=this.getAttribute(hn.STORYBOARD_TOKEN);return{...Fo(this,TT),...t!=null?{playback:t}:{},...e!=null?{drm:e}:{},...r!=null?{thumbnail:r}:{},...n!=null?{storyboard:n}:{}}}set tokens(t){GA(this,TT,t??{})}get playbackToken(){var t;return(t=this.getAttribute(hn.PLAYBACK_TOKEN))!=null?t:void 0}set playbackToken(t){this.setAttribute(hn.PLAYBACK_TOKEN,`${t}`)}get drmToken(){var t;return(t=this.getAttribute(hn.DRM_TOKEN))!=null?t:void 0}set drmToken(t){this.setAttribute(hn.DRM_TOKEN,`${t}`)}get thumbnailToken(){var t;return(t=this.getAttribute(hn.THUMBNAIL_TOKEN))!=null?t:void 0}set thumbnailToken(t){this.setAttribute(hn.THUMBNAIL_TOKEN,`${t}`)}get storyboardToken(){var t;return(t=this.getAttribute(hn.STORYBOARD_TOKEN))!=null?t:void 0}set storyboardToken(t){this.setAttribute(hn.STORYBOARD_TOKEN,`${t}`)}addTextTrack(t,e,r,n){var i;let a=(i=this.media)==null?void 0:i.nativeEl;if(a)return XF(a,t,e,r,n)}removeTextTrack(t){var e;let r=(e=this.media)==null?void 0:e.nativeEl;if(r)return vze(r,t)}get textTracks(){var t;return(t=this.media)==null?void 0:t.textTracks}get castReceiver(){var t;return(t=this.getAttribute(hn.CAST_RECEIVER))!=null?t:void 0}set castReceiver(t){t!==this.castReceiver&&(t?this.setAttribute(hn.CAST_RECEIVER,t):this.removeAttribute(hn.CAST_RECEIVER))}get castCustomData(){var t;return(t=this.media)==null?void 0:t.castCustomData}set castCustomData(t){if(!this.media){pf("underlying media element missing when trying to set castCustomData. castCustomData will not be set.");return}this.media.castCustomData=t}get noTooltips(){return this.hasAttribute(hn.NO_TOOLTIPS)}set noTooltips(t){if(!t){this.removeAttribute(hn.NO_TOOLTIPS);return}this.setAttribute(hn.NO_TOOLTIPS,"")}get proudlyDisplayMuxBadge(){return this.hasAttribute(hn.PROUDLY_DISPLAY_MUX_BADGE)}set proudlyDisplayMuxBadge(t){t?this.setAttribute(hn.PROUDLY_DISPLAY_MUX_BADGE,""):this.removeAttribute(hn.PROUDLY_DISPLAY_MUX_BADGE)}get capRenditionToPlayerSize(){var t;return(t=this.media)==null?void 0:t.capRenditionToPlayerSize}set capRenditionToPlayerSize(t){if(!this.media){pf("underlying media element missing when trying to set capRenditionToPlayerSize");return}this.media.capRenditionToPlayerSize=t}};ST=new WeakMap,jT=new WeakMap,TT=new WeakMap,Dv=new WeakMap,CT=new WeakMap,Rb=new WeakMap,Lc=new WeakSet,A0=function(){var t,e,r,n;if(!Fo(this,jT)){GA(this,jT,!0),gu(this,Lc,Mv).call(this);try{if(customElements.upgrade(this.mediaTheme),!(this.mediaTheme instanceof OA.HTMLElement))throw""}catch{pf("<media-theme> failed to upgrade!")}try{customElements.upgrade(this.media)}catch{pf("underlying media element failed to upgrade!")}try{if(customElements.upgrade(this.mediaController),!(this.mediaController instanceof lGe))throw""}catch{pf("<media-controller> failed to upgrade!")}gu(this,Lc,sY).call(this),gu(this,Lc,aY).call(this),gu(this,Lc,oY).call(this),GA(this,Dv,(e=(t=this.mediaController)==null?void 0:t.hasAttribute(es.USER_INACTIVE))!=null?e:!0),gu(this,Lc,lY).call(this),(r=this.media)==null||r.addEventListener("streamtypechange",()=>gu(this,Lc,Mv).call(this)),(n=this.media)==null||n.addEventListener("loadstart",()=>gu(this,Lc,Mv).call(this))}},yle=function(){var t,e;try{(t=window?.CSS)==null||t.registerProperty({name:"--media-primary-color",syntax:"<color>",inherits:!0}),(e=window?.CSS)==null||e.registerProperty({name:"--media-secondary-color",syntax:"<color>",inherits:!0})}catch{}},nR=function(t){Object.assign(Fo(this,Rb),t),gu(this,Lc,Mv).call(this)},Mv=function(t={}){wqe(Eqe(Oqe(this,{...Fo(this,Rb),...t})),this.shadowRoot)},sY=function(){let t=e=>{var r,n;if(!(e!=null&&e.startsWith("theme-")))return;let i=e.replace(/^theme-/,"");if(rR.includes(i))return;let a=this.getAttribute(e);a!=null?(r=this.mediaTheme)==null||r.setAttribute(i,a):(n=this.mediaTheme)==null||n.removeAttribute(i)};new MutationObserver(e=>{for(let{attributeName:r}of e)t(r)}).observe(this,{attributes:!0}),this.getAttributeNames().forEach(t)},aY=function(){let t=e=>{var r;let n=(r=this.media)==null?void 0:r.error;if(!(n instanceof ii)){let{message:a,code:o}=n??{};n=new ii(a,o)}if(!(n!=null&&n.fatal)){Mp(n),n.data&&Mp(`${n.name} data:`,n.data);return}let i=ZW(n);i.message&&mle(i),pf(n),n.data&&pf(`${n.name} data:`,n.data),gu(this,Lc,nR).call(this,{isDialogOpen:!0})};this.addEventListener("error",t),this.media&&(this.media.errorTranslator=(e={})=>{var r,n,i;if(!(((r=this.media)==null?void 0:r.error)instanceof ii))return e;let a=ZW((n=this.media)==null?void 0:n.error);return{player_error_code:(i=this.media)==null?void 0:i.error.code,player_error_message:a.message?String(a.message):e.player_error_message,player_error_context:a.context?String(a.context):e.player_error_context}})},oY=function(){var t,e,r,n;let i=()=>gu(this,Lc,Mv).call(this);(e=(t=this.media)==null?void 0:t.textTracks)==null||e.addEventListener("addtrack",i),(n=(r=this.media)==null?void 0:r.textTracks)==null||n.addEventListener("removetrack",i)},lY=function(){var t,e;if(!/Firefox/i.test(navigator.userAgent))return;let r,n=new WeakMap,i=()=>this.streamType===Lo.LIVE&&!this.secondaryColor&&this.offsetWidth>=800,a=(u,l,d=!1)=>{i()||Array.from(u&&u.activeCues||[]).forEach(f=>{if(!(!f.snapToLines||f.line<-5||f.line>=0&&f.line<10))if(!l||this.paused){let m=f.text.split(`
`).length,p=-3;this.streamType===Lo.LIVE&&(p=-2);let g=p-m;if(f.line===g&&!d)return;n.has(f)||n.set(f,f.line),f.line=g}else setTimeout(()=>{f.line=n.get(f)||"auto"},500)})},o=()=>{var u,l;a(r,(l=(u=this.mediaController)==null?void 0:u.hasAttribute(es.USER_INACTIVE))!=null?l:!1)},c=()=>{var u,l;let d=Array.from(((l=(u=this.mediaController)==null?void 0:u.media)==null?void 0:l.textTracks)||[]).filter(f=>["subtitles","captions"].includes(f.kind)&&f.mode==="showing")[0];d!==r&&r?.removeEventListener("cuechange",o),r=d,r?.addEventListener("cuechange",o),a(r,Fo(this,Dv))};c(),(t=this.textTracks)==null||t.addEventListener("change",c),(e=this.textTracks)==null||e.addEventListener("addtrack",c),this.addEventListener("userinactivechange",()=>{var u,l;let d=(l=(u=this.mediaController)==null?void 0:u.hasAttribute(es.USER_INACTIVE))!=null?l:!0;Fo(this,Dv)!==d&&(GA(this,Dv,d),a(r,Fo(this,Dv)))})};function _v(t,e){return t.media?t.media.getAttribute(e):t.getAttribute(e)}var cY=Qqe,xle=class{addEventListener(){}removeEventListener(){}dispatchEvent(t){return!0}};if(typeof DocumentFragment>"u"){class t extends xle{}globalThis.DocumentFragment=t}var zqe=class extends xle{},Vqe={get(t){},define(t,e,r){},getName(t){return null},upgrade(t){},whenDefined(t){return Promise.resolve(zqe)}},Kqe={customElements:Vqe},Gqe=typeof window>"u"||typeof globalThis.customElements>"u",AB=Gqe?Kqe:globalThis;AB.customElements.get("mux-player")||(AB.customElements.define("mux-player",cY),AB.MuxPlayerElement=cY);var ble=parseInt(So.version)>=19,uY={className:"class",classname:"class",htmlFor:"for",crossOrigin:"crossorigin",viewBox:"viewBox",playsInline:"playsinline",autoPlay:"autoplay",playbackRate:"playbackrate"},Wqe=t=>t==null,Yqe=(t,e)=>Wqe(e)?!1:t in e,qqe=t=>t.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`),Xqe=(t,e)=>{if(!(!ble&&typeof e=="boolean"&&!e)){if(Yqe(t,uY))return uY[t];if(typeof e<"u")return/[A-Z]/.test(t)?qqe(t):t}},Zqe=(t,e)=>!ble&&typeof t=="boolean"?"":t,Jqe=(t={})=>{let{ref:e,...r}=t;return Object.entries(r).reduce((n,[i,a])=>{let o=Xqe(i,a);if(!o)return n;let c=Zqe(a);return n[o]=c,n},{})};function dY(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function eXe(...t){return e=>{let r=!1,n=t.map(i=>{let a=dY(i,e);return!r&&typeof a=="function"&&(r=!0),a});if(r)return()=>{for(let i=0;i<n.length;i++){let a=n[i];typeof a=="function"?a():dY(t[i],null)}}}}function tXe(...t){return T.useCallback(eXe(...t),t)}var rXe=Object.prototype.hasOwnProperty,nXe=(t,e)=>{if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(Array.isArray(t))return!Array.isArray(e)||t.length!==e.length?!1:t.some((i,a)=>e[a]===i);let r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++)if(!rXe.call(e,r[i])||!Object.is(t[r[i]],e[r[i]]))return!1;return!0},wle=(t,e,r)=>!nXe(e,t[r]),iXe=(t,e,r)=>{t[r]=e},sXe=(t,e,r,n=iXe,i=wle)=>T.useEffect(()=>{let a=r?.current;a&&i(a,e,t)&&n(a,e,t)},[r?.current,e]),vA=sXe,aXe=()=>{try{return"3.11.4"}catch{}return"UNKNOWN"},oXe=aXe(),lXe=()=>oXe,Dl=(t,e,r)=>T.useEffect(()=>{let n=e?.current;if(!n||!r)return;let i=t,a=r;return n.addEventListener(i,a),()=>{n.removeEventListener(i,a)}},[e?.current,r,t]),cXe=So.forwardRef(({children:t,...e},r)=>So.createElement("mux-player",{suppressHydrationWarning:!0,...Jqe(e),ref:r},t)),uXe=(t,e)=>{let{onAbort:r,onCanPlay:n,onCanPlayThrough:i,onEmptied:a,onLoadStart:o,onLoadedData:c,onLoadedMetadata:u,onProgress:l,onDurationChange:d,onVolumeChange:f,onRateChange:m,onResize:p,onWaiting:g,onPlay:y,onPlaying:x,onTimeUpdate:w,onPause:_,onSeeking:E,onSeeked:N,onStalled:C,onSuspend:I,onEnded:D,onError:U,onCuePointChange:G,onChapterChange:q,metadata:J,tokens:de,paused:xe,playbackId:we,playbackRates:ve,currentTime:ne,themeProps:ae,extraSourceParams:oe,castCustomData:Ie,_hlsConfig:Ce,...be}=e;return vA("tokens",de,t),vA("playbackId",we,t),vA("playbackRates",ve,t),vA("metadata",J,t),vA("extraSourceParams",oe,t),vA("_hlsConfig",Ce,t),vA("themeProps",ae,t),vA("castCustomData",Ie,t),vA("paused",xe,t,(ue,Pe)=>{Pe!=null&&(Pe?ue.pause():ue.play())},(ue,Pe,Re)=>ue.hasAttribute("autoplay")&&!ue.hasPlayed?!1:wle(ue,Pe,Re)),vA("currentTime",ne,t,(ue,Pe)=>{Pe!=null&&(ue.currentTime=Pe)}),Dl("abort",t,r),Dl("canplay",t,n),Dl("canplaythrough",t,i),Dl("emptied",t,a),Dl("loadstart",t,o),Dl("loadeddata",t,c),Dl("loadedmetadata",t,u),Dl("progress",t,l),Dl("durationchange",t,d),Dl("volumechange",t,f),Dl("ratechange",t,m),Dl("resize",t,p),Dl("waiting",t,g),Dl("play",t,y),Dl("playing",t,x),Dl("timeupdate",t,w),Dl("pause",t,_),Dl("seeking",t,E),Dl("seeked",t,N),Dl("stalled",t,C),Dl("suspend",t,I),Dl("ended",t,D),Dl("error",t,U),Dl("cuepointchange",t,G),Dl("chapterchange",t,q),[be]},dXe=lXe(),hXe="mux-player-react",fXe=So.forwardRef((t,e)=>{var r;let n=T.useRef(null),i=tXe(n,e),[a]=uXe(n,t),[o]=T.useState((r=t.playerInitTime)!=null?r:t6());return So.createElement(cXe,{ref:i,defaultHiddenCaptions:t.defaultHiddenCaptions,playerSoftwareName:hXe,playerSoftwareVersion:dXe,playerInitTime:o,...a})}),mXe=fXe;function AXe({playbackId:t,title:e,poster:r,isLive:n=!1,viewerEmail:i="",onShare:a,className:o=""}){const[c,u]=T.useState(!0),[l,d]=T.useState(!1),[f,m]=T.useState(!1),[p,g]=T.useState([]),y=T.useRef(null),x=T.useRef(null);T.useEffect(()=>{const N=()=>{u(!0),clearTimeout(x.current),x.current=setTimeout(()=>{u(!1)},3e3)},C=y.current;if(C)return C.addEventListener("mousemove",N),()=>C.removeEventListener("mousemove",N)},[]),T.useEffect(()=>{const N=()=>{d(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",N),()=>document.removeEventListener("fullscreenchange",N)},[]);const w=()=>{document.fullscreenElement?document.exitFullscreen():y.current?.requestFullscreen()},_=N=>{const C=Date.now(),I={id:C,emoji:N,x:Math.random()*80+10,delay:Math.random()*.5};g(D=>[...D,I]),setTimeout(()=>{g(D=>D.filter(U=>U.id!==C))},3e3)},E=["","","","","",""];return s.jsxs("div",{ref:y,className:`relative bg-black group ${o}`,children:[s.jsx(mXe,{playbackId:t||"demo-playback-id",metadata:{video_title:e,viewer_user_id:i},streamType:n?"live":"on-demand",autoPlay:!0,poster:r,className:"w-full aspect-video"}),n&&s.jsx("div",{className:"absolute top-4 left-4 z-10",children:s.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-red-500 text-white font-bold rounded-full animate-glow",children:[s.jsx("span",{className:"w-2 h-2 bg-white rounded-full animate-pulse"}),"LIVE"]})}),s.jsx("div",{className:"absolute bottom-20 right-4 pointer-events-none overflow-hidden h-64 w-16",children:p.map(N=>s.jsx("div",{className:"absolute animate-float text-3xl",style:{left:`${N.x}%`,animationDelay:`${N.delay}s`,bottom:0},children:N.emoji},N.id))}),f&&s.jsx("div",{className:"absolute bottom-20 right-4 z-20 animate-scaleIn",children:s.jsx("div",{className:"bg-dark-900/90 backdrop-blur-sm rounded-2xl p-3 border border-dark-700",children:s.jsx("div",{className:"grid grid-cols-3 gap-2",children:E.map((N,C)=>s.jsx("button",{onClick:()=>_(N),className:"w-12 h-12 rounded-xl bg-dark-800 hover:bg-dark-700 flex items-center justify-center text-2xl transition-transform hover:scale-110 active:scale-95",children:N},N))})})}),s.jsx("div",{className:`absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/90 to-transparent p-4 transition-opacity duration-300 ${c?"opacity-100":"opacity-0"}`,children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"flex items-center gap-2",children:s.jsx("button",{onClick:a,className:"p-2 rounded-lg bg-white/10 hover:bg-white/20 text-white transition-colors",title:"Share",children:s.jsx(FY,{className:"w-5 h-5"})})}),s.jsxs("div",{className:"flex items-center gap-2",children:[n&&s.jsx("button",{onClick:()=>m(!f),className:`p-2 rounded-lg transition-colors ${f?"bg-red-500 text-white":"bg-white/10 hover:bg-white/20 text-white"}`,title:"Reactions",children:s.jsx(nm,{className:"w-5 h-5"})}),s.jsx("button",{onClick:w,className:"p-2 rounded-lg bg-white/10 hover:bg-white/20 text-white transition-colors",title:l?"Exit Fullscreen":"Fullscreen",children:l?s.jsx(She,{className:"w-5 h-5"}):s.jsx(xhe,{className:"w-5 h-5"})})]})]})}),s.jsx("div",{className:`absolute top-0 left-0 right-0 bg-gradient-to-b from-black/70 to-transparent p-4 transition-opacity duration-300 ${c?"opacity-100":"opacity-0"}`,children:s.jsx("h2",{className:"text-white font-semibold text-lg truncate pr-20",children:e})}),s.jsx("style",{jsx:!0,children:`
        @keyframes float {
          0% {
            transform: translateY(0) scale(1);
            opacity: 1;
          }
          100% {
            transform: translateY(-200px) scale(1.5);
            opacity: 0;
          }
        }
        .animate-float {
          animation: float 3s ease-out forwards;
        }
      `})]})}function pXe({isLive:t=!1,viewerCount:e=0,showViewers:r=!0,size:n="default",className:i=""}){const[a,o]=T.useState(e),[c,u]=T.useState(!1);T.useEffect(()=>{e>a&&(u(!0),setTimeout(()=>u(!1),1e3));const f=e-a;if(Math.abs(f)>10){const m=Math.ceil(f/10),p=setInterval(()=>{o(g=>{const y=g+m;return m>0&&y>=e||m<0&&y<=e?(clearInterval(p),e):y})},50);return()=>clearInterval(p)}else o(e)},[e]);const d={small:{container:"px-2 py-1 text-xs gap-1.5",dot:"w-1.5 h-1.5",icon:"w-3 h-3"},default:{container:"px-3 py-1.5 text-sm gap-2",dot:"w-2 h-2",icon:"w-4 h-4"},large:{container:"px-4 py-2 text-base gap-2.5",dot:"w-2.5 h-2.5",icon:"w-5 h-5"}}[n];return t?s.jsxs("div",{className:`flex items-center gap-3 ${i}`,children:[s.jsxs("div",{className:`inline-flex items-center ${d.container} bg-gradient-to-r from-red-600 to-red-500 text-white font-bold rounded-full shadow-lg shadow-red-500/25`,children:[s.jsx("span",{className:`${d.dot} bg-white rounded-full animate-pulse`}),s.jsx("span",{className:"uppercase tracking-wide",children:"Live"})]}),r&&a>0&&s.jsxs("div",{className:`inline-flex items-center ${d.container} bg-dark-800/90 backdrop-blur-sm text-white rounded-full border border-dark-700`,children:[s.jsx(H0,{className:`${d.icon} text-gray-400`}),s.jsx("span",{className:`font-semibold tabular-nums ${c?"text-green-400":""}`,children:a.toLocaleString()}),c&&s.jsx(Tf,{className:`${d.icon} text-green-400 animate-bounce`})]})]}):null}function gXe({eventId:t,className:e=""}){const[r,n]=T.useState(null),[i,a]=T.useState(!0);T.useEffect(()=>{if(!t)return;o();const u=setInterval(o,3e4);return()=>clearInterval(u)},[t]);const o=async()=>{try{const u=new Date(Date.now()-12e4).toISOString(),{count:l,error:d}=await ir.from("livestream_sessions").select("*",{count:"exact",head:!0}).eq("event_id",t).gte("last_heartbeat",u);d||n(l||0)}catch(u){console.error("Failed to fetch viewer count:",u)}finally{a(!1)}};if(i||r===null)return null;const c=u=>u>=1e3?`${(u/1e3).toFixed(1)}k`:u.toString();return s.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-1.5 bg-dark-800/80 backdrop-blur-sm rounded-full ${e}`,children:[s.jsxs("div",{className:"relative",children:[s.jsx(H0,{className:"w-4 h-4 text-red-500"}),r>0&&s.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-2 h-2 bg-red-500 rounded-full animate-pulse"})]}),s.jsx("span",{className:"text-sm font-medium text-white",children:c(r)}),s.jsx("span",{className:"text-sm text-gray-400",children:r===1?"viewer":"viewers"})]})}function vXe({streams:t,selectedStream:e,onSelect:r,isLive:n=!1}){const[i,a]=T.useState({});if(T.useEffect(()=>{if(!t||t.length===0)return;const c=async()=>{const l=t.filter(d=>d.mux_stream_id);if(l.length!==0)try{const d=await Promise.all(l.map(async m=>{try{const{data:p,error:g}=await ir.functions.invoke("mux-stream",{body:{action:"stream-status",mux_stream_id:m.mux_stream_id}});if(!g&&p)return{id:m.id,isLive:p.isLive,status:p.status}}catch(p){console.warn("Failed to fetch stream status:",p)}return{id:m.id,isLive:!1,status:"unknown"}})),f={};d.forEach(m=>{f[m.id]=m}),a(f)}catch(d){console.error("Failed to fetch stream statuses:",d)}};c();const u=setInterval(c,3e4);return()=>clearInterval(u)},[t]),!t||t.length<=1)return null;const o=c=>i[c.id]?i[c.id].isLive:c.status==="live"||c.status==="active";return s.jsxs("div",{className:"bg-dark-900/80 backdrop-blur-sm rounded-xl border border-dark-700 p-4 mb-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx($p,{className:"w-5 h-5 text-red-500"}),s.jsx("h3",{className:"text-white font-semibold",children:"Select Stream"}),n&&s.jsxs("span",{className:"flex items-center gap-1 px-2 py-0.5 bg-red-500/20 text-red-500 text-xs font-medium rounded-full",children:[s.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),"LIVE"]})]}),s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:t.map(c=>{const u=e?.id===c.id,l=o(c);return s.jsxs("button",{onClick:()=>r(c),className:`relative flex flex-col items-center justify-center p-4 rounded-lg border-2 transition-all ${u?"border-red-500 bg-red-500/10":"border-dark-600 bg-dark-800 hover:border-dark-500 hover:bg-dark-700"}`,children:[l&&s.jsx("span",{className:"absolute top-2 right-2 w-2 h-2 bg-red-500 rounded-full animate-pulse"}),u&&s.jsx("div",{className:"absolute top-2 left-2 w-5 h-5 bg-red-500 rounded-full flex items-center justify-center",children:s.jsx(la,{className:"w-3 h-3 text-white"})}),s.jsx(Hb,{className:`w-8 h-8 mb-2 ${u?"text-red-500":"text-gray-400"}`}),s.jsx("span",{className:`text-sm font-medium ${u?"text-white":"text-gray-300"}`,children:c.name}),s.jsx("span",{className:`text-xs mt-1 ${l?"text-red-400":"text-gray-500"}`,children:l?"Live":"Waiting"})]},c.id)})}),s.jsx("p",{className:"text-xs text-gray-500 mt-3 text-center",children:"You can switch between streams at any time"})]})}function yXe({streams:t,selectedStream:e,onSelect:r,liveStatuses:n={}}){const[i,a]=T.useState(!1),[o,c]=T.useState({});if(T.useEffect(()=>{if(!t||t.length===0)return;const d=async()=>{const m=t.filter(p=>p.mux_stream_id);if(m.length!==0)try{const p=await Promise.all(m.map(async y=>{try{const x=await fetch(`${STREAM_STATUS_API}/${y.mux_stream_id}`);if(x.ok){const w=await x.json();return{id:y.id,isLive:w.isLive,status:w.status}}}catch(x){console.warn("Failed to fetch stream status:",x)}return{id:y.id,isLive:!1,status:"unknown"}})),g={};p.forEach(y=>{g[y.id]=y}),c(g)}catch(p){console.error("Failed to fetch stream statuses:",p)}};d();const f=setInterval(d,3e4);return()=>clearInterval(f)},[t]),!t||t.length<=1)return null;const u={...n,...o},l=d=>u[d.id]?u[d.id].isLive:d.status==="live"||d.status==="active";return s.jsxs("div",{className:"relative",children:[s.jsxs("button",{onClick:()=>a(!i),className:"flex items-center gap-2 px-3 py-1.5 bg-black/60 hover:bg-black/80 text-white rounded-lg text-sm font-medium transition-colors",children:[s.jsx($p,{className:"w-4 h-4"}),e?.name||"Select Stream"]}),i&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>a(!1)}),s.jsx("div",{className:"absolute bottom-full left-0 mb-2 w-48 bg-dark-900 border border-dark-700 rounded-lg shadow-xl z-50",children:t.map(d=>{const f=e?.id===d.id,m=l(d);return s.jsxs("button",{onClick:()=>{r(d),a(!1)},className:`w-full flex items-center gap-3 px-4 py-3 text-left transition-colors ${f?"bg-red-500/20 text-white":"text-gray-300 hover:bg-dark-800 hover:text-white"}`,children:[s.jsxs("div",{className:"relative",children:[s.jsx(Hb,{className:`w-5 h-5 ${f?"text-red-500":"text-gray-500"}`}),m&&s.jsx("span",{className:"absolute -top-1 -right-1 w-2 h-2 bg-red-500 rounded-full"})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-medium",children:d.name}),s.jsx("p",{className:`text-xs ${m?"text-red-400":"text-gray-500"}`,children:m?"Live":"Waiting"})]}),f&&s.jsx(la,{className:"w-4 h-4 text-red-500"})]},d.id)})})]})]})}function xXe(){const{eventId:t}=Kh(),[e]=ky(),[r,n]=T.useState(null),[i,a]=T.useState(e.get("email")||""),[o,c]=T.useState(null),[u,l]=T.useState(!1),[d,f]=T.useState(!0),[m,p]=T.useState(!1),[g,y]=T.useState(null),[x,w]=T.useState(!1),[_,E]=T.useState(null),[N,C]=T.useState(null),[I,D]=T.useState(!0),[U,G]=T.useState(!1),[q,J]=T.useState(0),de=T.useRef(null),xe=T.useRef(null),[we,ve]=T.useState([]),[ne,ae]=T.useState(null),[oe,Ie]=T.useState(!1),[Ce,be]=T.useState({}),[ue,Pe]=T.useState(!1),[Re,He]=T.useState(!1);T.useEffect(()=>{if(!we||we.length===0)return;const lr=async()=>{const tn=we.filter(Gr=>Gr.mux_stream_id);if(tn.length!==0)try{const Gr=await Promise.all(tn.map(async Qr=>{try{const{data:Pn,error:wn}=await ir.functions.invoke("mux-stream",{body:{action:"stream-status",mux_stream_id:Qr.mux_stream_id}});if(!wn&&Pn)return{id:Qr.id,isLive:Pn.isLive,status:Pn.status}}catch(Pn){console.warn("Failed to fetch stream status:",Pn)}return{id:Qr.id,isLive:!1,status:"unknown"}})),Xr={};Gr.forEach(Qr=>{Xr[Qr.id]=Qr}),be(Xr)}catch(Gr){console.error("Failed to fetch stream statuses:",Gr)}};lr();const Pr=setInterval(lr,3e4);return()=>clearInterval(Pr)},[we]);const Fe=lr=>Ce[lr.id]?Ce[lr.id].isLive:lr.status==="live"||lr.status==="active";T.useEffect(()=>(at(),()=>{de.current&&clearInterval(de.current)}),[t]),T.useEffect(()=>{r&&(e.get("bypass")||r.geo_blocking_enabled?ft():D(!1))},[r]),T.useEffect(()=>{if(!r)return;const lr=new Date,Pr=r.end_time?new Date(r.end_time):null,tn=new Date(r.start_time),Gr=new Date(tn.getTime()+480*60*1e3);if((Pr?lr>Pr:lr>Gr)&&r.vod_enabled&&(Pe(!0),r.vod_available_until)){const Qr=new Date(r.vod_available_until);lr>Qr&&He(!0)}},[r]);const ft=async()=>{try{const lr=e.get("bypass"),tn=await(await fetch("https://gonalgubgldgpkcekaxe.supabase.co/functions/v1/geo-check",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({venue_lat:r.geo_lat,venue_lng:r.geo_lng,radius_km:r.geo_radius_km||50,event_id:t,bypass_token:lr})})).json();tn.bypass?(E(!1),C({...tn,crew_bypass:!0}),l(!0),a("crew@bypass"),r?.is_multi_stream&&Ie(!0)):(E(tn.blocked),C(tn))}catch(lr){console.error("Geo check failed:",lr),E(!1)}finally{D(!1)}};T.useEffect(()=>{const lr=e.get("email");lr&&r&&!u&&De(lr)},[r,e]),T.useEffect(()=>(o&&u&&(de.current=setInterval(async()=>{try{await rRe(o)||(w(!0),l(!1),clearInterval(de.current))}catch(lr){console.error("Heartbeat failed:",lr),w(!0),l(!1),clearInterval(de.current)}},3e4)),()=>{de.current&&clearInterval(de.current)}),[o,u]),T.useEffect(()=>{if(!r)return;const Pr=(Qr=>{if(!Qr)return new Date;const Pn=Qr.replace(/[Z+].*$/,"").replace(/\.000$/,"");return new Date(Pn)})(r.start_time),tn=r.is_live||r.status==="live",Gr=new Date>=Pr,Xr=e.get("preview")==="player";if(Gr&&!tn&&!Xr)return G(!0),xe.current=setInterval(async()=>{try{const Qr=await rO(t);(Qr?.is_live||Qr?.status==="live")&&(clearInterval(xe.current),n(Qr),G(!1))}catch(Qr){console.error("Failed to check event status:",Qr)}},15e3),()=>{xe.current&&clearInterval(xe.current)};G(!1)},[r,t,e]);const at=async()=>{try{const lr=await rO(t);if(n(lr),lr?.is_multi_stream)try{const Pr=await QC(t);if(ve(Pr||[]),!e.get("bypass")){const Gr=Pr?.find(Xr=>Xr.is_default)||Pr?.[0];Gr&&ae(Gr)}}catch(Pr){console.error("Failed to load streams:",Pr)}}catch{y("Event not found")}finally{f(!1)}},De=async(lr=i)=>{if(!lr){y("Please enter your email");return}p(!0),y(null),w(!1);try{const Pr=e.get("session_id");let tn=await UV(t,lr);if(!tn&&Pr)try{const{data:Xr}=await ir.functions.invoke("verify-payment",{body:{session_id:Pr,event_id:t,email:lr}});Xr?.verified&&(tn=await UV(t,lr))}catch(Xr){console.warn("Payment verification edge function failed:",Xr)}if(!tn){y("No purchase found for this email. Please check your email or purchase access."),l(!1);return}const Gr=await tRe({event_id:t,order_id:tn.id,email:lr.toLowerCase()});c(Gr.token),l(!0),a(lr),Pr&&w6e(t,lr),localStorage.setItem(`livestream_session_${t}`,Gr.token),localStorage.setItem(`livestream_email_${t}`,lr)}catch(Pr){console.error("Verify error:",Pr),y("Failed to verify access. Please try again."),l(!1)}finally{p(!1)}};if(d)return s.jsx("div",{className:"min-h-screen bg-dark-950 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-dark-700 border-t-red-500 mx-auto"}),s.jsx(Qd,{className:"absolute inset-0 m-auto w-6 h-6 text-red-500"})]}),s.jsx("p",{className:"text-gray-400 mt-4",children:"Loading stream..."})]})});if(g&&!r)return s.jsx("div",{className:"min-h-screen bg-dark-950 flex items-center justify-center p-4",children:s.jsxs("div",{className:"text-center",children:[s.jsx($0,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),s.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Event Not Found"}),s.jsx("p",{className:"text-gray-400",children:g})]})});if(_)return s.jsx("div",{className:"min-h-screen bg-dark-950 flex items-center justify-center p-4",children:s.jsxs("div",{className:"max-w-md w-full relative",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-yellow-500/10 to-orange-500/10 blur-2xl rounded-3xl"}),s.jsxs("div",{className:"relative bg-dark-900/95 backdrop-blur-xl rounded-2xl border border-dark-700/50 p-8 text-center",children:[s.jsx("div",{className:"w-20 h-20 mx-auto mb-6 rounded-full bg-gradient-to-br from-yellow-500/20 to-orange-500/20 flex items-center justify-center",children:s.jsx(md,{className:"w-10 h-10 text-yellow-500"})}),s.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Location Restricted"}),s.jsxs("p",{className:"text-gray-400 mb-4",children:["Online streaming is not available within ",r.geo_radius_km||50,"km of the venue."]}),N?.user_location&&s.jsxs("p",{className:"text-gray-500 text-sm mb-4",children:["Distance from venue: ",s.jsxs("span",{className:"text-white font-semibold",children:[N.distance_km,"km"]})]}),s.jsxs("div",{className:"bg-dark-800/50 rounded-xl p-4 mb-6 border border-dark-700/50",children:[s.jsx("p",{className:"text-gray-400 text-sm mb-2",children:"Watch live in person at:"}),s.jsx("p",{className:"text-white font-semibold",children:r.venue})]}),r.ticket_url&&s.jsxs("a",{href:r.ticket_url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-8 py-4 bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white font-bold rounded-xl transition-all duration-300 shadow-lg shadow-red-500/25",children:[s.jsx(Qd,{className:"w-5 h-5"}),"Get Tickets"]})]})]})});if(x)return s.jsx("div",{className:"min-h-screen bg-dark-950 flex items-center justify-center p-4",children:s.jsxs("div",{className:"max-w-md w-full relative",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-yellow-500/10 to-orange-500/10 blur-2xl rounded-3xl"}),s.jsxs("div",{className:"relative bg-dark-900/95 backdrop-blur-xl rounded-2xl border border-dark-700/50 p-8 text-center",children:[s.jsx("div",{className:"w-20 h-20 mx-auto mb-6 rounded-full bg-gradient-to-br from-yellow-500/20 to-orange-500/20 flex items-center justify-center",children:s.jsx($0,{className:"w-10 h-10 text-yellow-500"})}),s.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Session Ended"}),s.jsx("p",{className:"text-gray-400 mb-6",children:"This stream is now playing on another device. Only one active viewing session is allowed per purchase."}),s.jsxs("button",{onClick:()=>De(i),className:"inline-flex items-center gap-2 px-8 py-4 bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white font-bold rounded-xl transition-all duration-300 shadow-lg shadow-red-500/25",children:[s.jsx(Q0,{className:"w-5 h-5"}),"Watch Here Instead"]})]})]})});if(I)return s.jsx("div",{className:"min-h-screen bg-dark-950 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-dark-700 border-t-red-500 mx-auto"}),s.jsx($b,{className:"absolute inset-0 m-auto w-6 h-6 text-red-500"})]}),s.jsx("p",{className:"text-gray-400 mt-4",children:"Checking access..."})]})});if(!u)return s.jsx("div",{className:"min-h-screen bg-dark-950 flex items-center justify-center p-4",children:s.jsxs("div",{className:"max-w-md w-full relative",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-red-500/10 to-orange-500/10 blur-2xl rounded-3xl"}),s.jsxs("div",{className:"relative bg-dark-900/95 backdrop-blur-xl rounded-2xl border border-dark-700/50 overflow-hidden",children:[r.thumbnail_url&&s.jsxs("div",{className:"relative h-32 overflow-hidden",children:[s.jsx("img",{src:Mh(r.thumbnail_url),alt:r.title,className:"w-full h-full object-cover opacity-50"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-dark-900 to-transparent"})]}),s.jsxs("div",{className:"p-8",children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-white mb-1",children:r.title}),s.jsx("p",{className:"text-gray-400",children:r.org_display_name||r.organization})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Enter Your Email"}),s.jsxs("div",{className:"relative",children:[s.jsx(tu,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500"}),s.jsx("input",{type:"email",value:i,onChange:lr=>a(lr.target.value),placeholder:"your@email.com",className:"w-full pl-12 pr-4 py-4 bg-dark-800/50 border border-dark-700 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:border-red-500 focus:ring-2 focus:ring-red-500/20 transition-all duration-300"})]}),s.jsxs("p",{className:"text-xs text-gray-500 mt-2 flex items-center gap-1",children:[s.jsx($b,{className:"w-3 h-3"}),"Use the email from your purchase"]})]}),g&&s.jsx("div",{className:"p-3 bg-red-500/10 border border-red-500/20 rounded-lg",children:s.jsx("p",{className:"text-red-400 text-sm",children:g})}),s.jsx("button",{onClick:()=>De(),disabled:m||!i,className:"w-full py-4 bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 disabled:from-dark-700 disabled:to-dark-700 disabled:cursor-not-allowed text-white font-bold rounded-xl transition-all duration-300 flex items-center justify-center gap-2 shadow-lg shadow-red-500/25 disabled:shadow-none",children:m?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"}),"Verifying..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Qd,{className:"w-5 h-5"}),"Watch Stream"]})}),s.jsxs("div",{className:"text-center pt-4 border-t border-dark-800",children:[s.jsx("p",{className:"text-gray-500 text-sm mb-2",children:"Don't have access?"}),s.jsxs(rs,{to:`/live/${t}`,className:"text-red-500 hover:text-red-400 font-semibold transition-colors",children:["Purchase Access  $",r.price," AUD"]})]})]})]})]})]})});const et=(lr=>{if(!lr)return new Date;const Pr=lr.replace(/[Z+].*$/,"").replace(/\.000$/,"");return new Date(Pr)})(r.start_time),Ue=r.is_live||r.status==="live",jt=r.doors_open===!0,rt=e.get("preview")==="player",Ct=new Date>=et,ke=!jt&&(Ue||Ct)&&!rt,Xe=!jt&&!Ue&&!Ct&&!rt;if(ue&&Re)return s.jsx("div",{className:"min-h-screen bg-dark-950 flex items-center justify-center",children:s.jsxs("div",{className:"max-w-lg mx-auto px-4 text-center",children:[s.jsx("div",{className:"w-20 h-20 mx-auto mb-6 rounded-full bg-gray-500/20 flex items-center justify-center",children:s.jsx(Up,{className:"w-10 h-10 text-gray-500"})}),s.jsx("h1",{className:"text-3xl font-bold text-white mb-4",children:"Replay No Longer Available"}),s.jsx("p",{className:"text-gray-400 mb-6",children:"The VOD replay for this event has expired and is no longer available for viewing."}),s.jsx(rs,{to:"/live",className:"inline-flex items-center gap-2 px-6 py-3 bg-red-500 hover:bg-red-600 text-white font-semibold rounded-xl transition-colors",children:"Browse Other Events"})]})});if(ke)return s.jsx("div",{className:"min-h-screen bg-dark-950 flex items-center justify-center",children:s.jsxs("div",{className:"max-w-lg mx-auto px-4 text-center",children:[s.jsx("div",{className:"w-20 h-20 mx-auto mb-6 rounded-full bg-red-500/20 flex items-center justify-center",children:s.jsx(PY,{className:"w-10 h-10 text-red-500"})}),s.jsx("h1",{className:"text-3xl font-bold text-white mb-4",children:"Stream Temporarily Unavailable"}),s.jsx("p",{className:"text-gray-400 mb-6",children:r.doors_closed_message||"The stream is currently unavailable. Please check back shortly."}),s.jsx("p",{className:"text-sm text-gray-500",children:"If you've purchased access, you'll be able to watch once the stream resumes."})]})});if(Xe)return s.jsx("div",{className:"min-h-screen bg-dark-950",children:s.jsx("div",{className:"w-full bg-gradient-to-b from-dark-900 to-dark-950",children:s.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-16 text-center",children:[r.thumbnail_url&&s.jsxs("div",{className:"relative max-w-2xl mx-auto mb-8 rounded-2xl overflow-hidden shadow-2xl shadow-red-500/10 group",children:[s.jsx("img",{src:Mh(r.thumbnail_url),alt:r.title,className:"w-full aspect-video object-cover opacity-80 transition-transform duration-500 group-hover:scale-105"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-dark-950 via-dark-950/50 to-transparent"}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsx("div",{className:"w-20 h-20 rounded-full bg-white/10 backdrop-blur-sm flex items-center justify-center border border-white/20",children:s.jsx(zh,{className:"w-10 h-10 text-white"})})})]}),s.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-yellow-500/20 text-yellow-500 rounded-full text-sm font-medium mb-6 border border-yellow-500/30",children:[s.jsx(nm,{className:"w-4 h-4"}),"Waiting Room"]}),s.jsx("h1",{className:"text-3xl md:text-5xl font-bold text-white mb-3",children:r.title}),s.jsx("p",{className:"text-xl text-gray-400 mb-8",children:r.org_display_name||r.organization}),s.jsx("div",{className:"bg-dark-800/30 backdrop-blur-sm rounded-2xl p-8 max-w-xl mx-auto mb-8 border border-dark-700/50",children:s.jsx(Rne,{targetDate:r.start_time,onComplete:()=>at()})}),s.jsxs("div",{className:"flex flex-wrap justify-center gap-6 text-gray-400 mb-8",children:[s.jsxs("div",{className:"flex items-center gap-2 bg-dark-800/30 px-4 py-2 rounded-xl border border-dark-700/30",children:[s.jsx(ml,{className:"w-5 h-5 text-red-500"}),et.toLocaleDateString("en-AU",{weekday:"long",day:"numeric",month:"long"})]}),s.jsxs("div",{className:"flex items-center gap-2 bg-dark-800/30 px-4 py-2 rounded-xl border border-dark-700/30",children:[s.jsx(zh,{className:"w-5 h-5 text-red-500"}),et.toLocaleTimeString("en-AU",{hour:"2-digit",minute:"2-digit"})," AEST"]}),s.jsxs("div",{className:"flex items-center gap-2 bg-dark-800/30 px-4 py-2 rounded-xl border border-dark-700/30",children:[s.jsx(md,{className:"w-5 h-5 text-red-500"}),r.venue]})]}),s.jsxs("div",{className:"bg-dark-800/30 backdrop-blur-sm rounded-2xl p-6 max-w-md mx-auto border border-dark-700/50",children:[s.jsx(hde,{className:"w-10 h-10 text-red-500 mx-auto mb-3"}),s.jsx("p",{className:"text-white font-semibold mb-2",children:"Don't miss the start!"}),s.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"Keep this tab open  it will automatically refresh when the event goes live."}),s.jsxs("p",{className:"text-gray-600 text-xs flex items-center justify-center gap-1",children:[s.jsx(nh,{className:"w-3 h-3"}),"Logged in as: ",i]})]})]})})});if(Ct&&!Ue&&!rt)return s.jsx("div",{className:"min-h-screen bg-dark-950 flex items-center justify-center p-4",children:s.jsxs("div",{className:"max-w-md w-full relative",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-yellow-500/10 to-orange-500/10 blur-2xl rounded-3xl animate-pulse"}),s.jsxs("div",{className:"relative bg-dark-900/95 backdrop-blur-xl rounded-2xl border border-dark-700/50 p-8 text-center",children:[r.thumbnail_url&&s.jsxs("div",{className:"relative max-w-sm mx-auto mb-6 rounded-xl overflow-hidden",children:[s.jsx("img",{src:Mh(r.thumbnail_url),alt:r.title,className:"w-full aspect-video object-cover opacity-60"}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-dark-700 border-t-red-500"})})]}),s.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-yellow-500/20 text-yellow-500 rounded-full text-sm font-medium mb-4 border border-yellow-500/30 animate-pulse",children:[s.jsx(nm,{className:"w-4 h-4"}),"Starting Soon"]}),s.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:r.title}),s.jsx("p",{className:"text-gray-400 mb-6",children:"The event is about to begin. The stream will start momentarily."}),s.jsx("p",{className:"text-gray-500 text-sm",children:"This page will automatically refresh when the stream goes live."}),s.jsxs("p",{className:"text-gray-600 text-xs mt-4 flex items-center justify-center gap-1",children:[s.jsx(nh,{className:"w-3 h-3"}),"Logged in as: ",i]})]})]})});const Jt=ue&&r.vod_playback_id?r.vod_playback_id:ne?.mux_playback_id||r.mux_playback_id||"demo-playback-id",tr=we.length>1;return tr&&(oe||!ne)?s.jsxs("div",{className:"min-h-screen bg-dark-950",children:[rt&&s.jsx("div",{className:"bg-gradient-to-r from-yellow-500 to-orange-500 text-black px-4 py-2 text-center text-sm font-medium",children:" Preview Mode  This is how the player page will look. No stream is playing."}),s.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[s.jsxs("div",{className:"text-center mb-8",children:[r.thumbnail_url&&s.jsxs("div",{className:"relative max-w-md mx-auto mb-6 rounded-xl overflow-hidden shadow-xl",children:[s.jsx("img",{src:Mh(r.thumbnail_url),alt:r.title,className:"w-full aspect-video object-cover opacity-70"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-dark-950 via-dark-950/30 to-transparent"})]}),s.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-white mb-2",children:r.title}),s.jsx("p",{className:"text-gray-400",children:r.org_display_name||r.organization}),N?.crew_bypass&&s.jsxs("span",{className:"inline-flex items-center gap-1 mt-3 px-3 py-1 bg-green-500/20 text-green-400 text-sm font-medium rounded-full border border-green-500/30",children:[s.jsx(nh,{className:"w-4 h-4"}),"Crew Access"]})]}),s.jsxs("div",{className:"bg-dark-900/50 backdrop-blur-sm rounded-2xl border border-dark-700/50 p-6 mb-6",children:[s.jsxs("div",{className:"flex items-center justify-center gap-2 mb-6",children:[s.jsx($p,{className:"w-6 h-6 text-red-500"}),s.jsx("h2",{className:"text-xl font-bold text-white",children:"Select a Stream"})]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:we.map(lr=>{const Pr=Fe(lr);return s.jsxs("button",{onClick:()=>{ae(lr),Ie(!1)},className:"relative flex flex-col items-center justify-center p-6 rounded-xl border-2 border-dark-600 bg-dark-800 hover:border-red-500 hover:bg-red-500/10 transition-all duration-200 group",children:[Pr&&s.jsxs("span",{className:"absolute top-3 right-3 flex items-center gap-1 px-2 py-0.5 bg-red-500/20 text-red-500 text-xs font-medium rounded-full",children:[s.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),"LIVE"]}),s.jsx("div",{className:"w-16 h-16 rounded-full bg-dark-700 group-hover:bg-red-500/20 flex items-center justify-center mb-3 transition-colors",children:s.jsx($p,{className:"w-8 h-8 text-gray-400 group-hover:text-red-500 transition-colors"})}),s.jsx("span",{className:"text-lg font-semibold text-white group-hover:text-red-400 transition-colors",children:lr.name}),s.jsx("span",{className:`text-sm mt-1 ${Pr?"text-red-400":"text-gray-500"}`,children:Pr?"Now Streaming":"Waiting"}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-red-500/0 group-hover:bg-red-500/10 rounded-xl transition-colors",children:s.jsxs("span",{className:"opacity-0 group-hover:opacity-100 transition-opacity text-red-400 font-semibold flex items-center gap-2",children:[s.jsx(Qd,{className:"w-5 h-5"})," Watch"]})})]},lr.id)})})]}),s.jsxs("div",{className:"flex flex-wrap justify-center gap-4 text-sm text-gray-400",children:[s.jsxs("div",{className:"flex items-center gap-2 bg-dark-800/30 px-4 py-2 rounded-xl border border-dark-700/30",children:[s.jsx(ml,{className:"w-4 h-4 text-red-500"}),et.toLocaleDateString("en-AU",{weekday:"long",day:"numeric",month:"long"})]}),s.jsxs("div",{className:"flex items-center gap-2 bg-dark-800/30 px-4 py-2 rounded-xl border border-dark-700/30",children:[s.jsx(md,{className:"w-4 h-4 text-red-500"}),r.venue]})]})]})]}):s.jsxs("div",{className:"min-h-screen bg-dark-950",children:[rt&&s.jsx("div",{className:"bg-gradient-to-r from-yellow-500 to-orange-500 text-black px-4 py-2 text-center text-sm font-medium",children:" Preview Mode  This is how the player page will look. No stream is playing."}),tr&&s.jsxs("button",{onClick:()=>Ie(!0),className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-500 hover:to-purple-500 text-white px-4 py-2 text-center text-sm font-medium flex items-center justify-center gap-2 transition-all cursor-pointer",children:[s.jsx($p,{className:"w-4 h-4"}),"Multiple Streams Available  Currently watching: ",s.jsx("strong",{children:ne?.name||"Stream 1"}),s.jsx("span",{className:"ml-2 px-2 py-0.5 bg-white/20 rounded text-xs",children:"Click to switch"})]}),s.jsx("div",{className:"w-full bg-black",children:s.jsxs("div",{className:"max-w-6xl mx-auto",children:[tr&&s.jsx("div",{className:"md:hidden",children:s.jsx(vXe,{streams:we,selectedStream:ne,onSelect:ae,isLive:Ue})}),s.jsxs("div",{className:"relative",children:[s.jsx(AXe,{playbackId:Jt,title:ne?`${r.title} - ${ne.name}`:r.title,poster:Mh(r.thumbnail_url||r.player_poster_url),isLive:Ue||ne?.status==="live",viewerEmail:i,onShare:()=>{navigator.share&&navigator.share({title:r.title,text:`Watch ${r.title} live!`,url:window.location.href})}}),tr&&s.jsx("div",{className:"hidden md:block absolute bottom-4 left-4 z-10",children:s.jsx(yXe,{streams:we,selectedStream:ne,onSelect:ae})})]}),tr&&s.jsx("div",{className:"bg-dark-900/80 backdrop-blur-sm border-t border-dark-700/50 px-4 py-3",children:s.jsxs("div",{className:"flex items-center justify-center gap-2 flex-wrap",children:[s.jsx("span",{className:"text-gray-400 text-sm mr-2",children:"Quick Switch:"}),we.map(lr=>{const Pr=ne?.id===lr.id,tn=Fe(lr);return s.jsxs("button",{onClick:()=>ae(lr),className:`relative flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-all ${Pr?"bg-red-500 text-white shadow-lg shadow-red-500/25":"bg-dark-700 text-gray-300 hover:bg-dark-600 hover:text-white"}`,children:[tn&&!Pr&&s.jsx("span",{className:"absolute -top-1 -right-1 w-2 h-2 bg-red-500 rounded-full animate-pulse"}),s.jsx($p,{className:"w-4 h-4"}),lr.name]},lr.id)}),s.jsx("button",{onClick:()=>Ie(!0),className:"px-3 py-2 text-gray-500 hover:text-white text-sm transition-colors",children:"View All "})]})})]})}),s.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[s.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-4 mb-6",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-2",children:[s.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-white",children:r.title}),s.jsx(pXe,{isLive:Ue,viewerCount:q}),N?.crew_bypass&&s.jsx("span",{className:"px-3 py-1 bg-green-500/20 text-green-400 text-sm font-medium rounded-full border border-green-500/30",children:"Crew Access"})]}),s.jsx("p",{className:"text-gray-400",children:r.org_display_name||r.organization})]}),Ue&&s.jsx(gXe,{eventId:t})]}),s.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-400 mb-8",children:[s.jsxs("div",{className:"flex items-center gap-2 bg-dark-800/30 px-4 py-2 rounded-xl border border-dark-700/30",children:[s.jsx(ml,{className:"w-4 h-4 text-red-500"}),et.toLocaleDateString("en-AU",{weekday:"long",day:"numeric",month:"long",year:"numeric"})]}),s.jsxs("div",{className:"flex items-center gap-2 bg-dark-800/30 px-4 py-2 rounded-xl border border-dark-700/30",children:[s.jsx(md,{className:"w-4 h-4 text-red-500"}),r.venue]})]}),r.description&&s.jsxs("div",{className:"bg-dark-800/20 rounded-2xl p-6 border border-dark-700/30",children:[s.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"About This Event"}),s.jsx("p",{className:"text-gray-400 leading-relaxed",children:r.description})]})]})]})}function bXe(){const t=Fc();ky();const[e,r]=T.useState(null),[n,i]=T.useState([]),[a,o]=T.useState(!0),[c,u]=T.useState(""),[l,d]=T.useState(!1),[f,m]=T.useState(!1),[p,g]=T.useState(null);T.useEffect(()=>{y();const{data:{subscription:U}}=lRe(async(G,q)=>{if(G==="SIGNED_IN"&&q?.user){r(q.user);try{await HV(q.user.id,q.user.email)}catch(J){console.error("Failed to sync profile:",J)}x(q.user.email)}else G==="SIGNED_OUT"&&(r(null),i([]))});return()=>U.unsubscribe()},[]);const y=async()=>{try{const U=await aRe();if(U?.user){r(U.user);try{await HV(U.user.id,U.user.email)}catch(G){console.error("Failed to sync profile:",G)}await x(U.user.email)}}catch(U){console.error("Auth check failed:",U)}finally{o(!1)}},x=async U=>{try{const G=await cRe(U);i(G||[])}catch(G){console.error("Failed to load purchases:",G),g("Failed to load your purchases")}},w=async U=>{if(U.preventDefault(),!!c){d(!0),g(null);try{await sRe(c,`${window.location.origin}/#/my-purchases`),m(!0)}catch(G){g("Failed to send login link. Please try again."),console.error("Magic link error:",G)}finally{d(!1)}}},_=async()=>{await oRe(),r(null),i([])},E=U=>new Date(U).toLocaleDateString("en-AU",{weekday:"short",day:"numeric",month:"short",year:"numeric"}),N=U=>new Date(U).toLocaleTimeString("en-AU",{hour:"2-digit",minute:"2-digit"}),C=U=>{const G=new Date,q=new Date(U.start_time),J=new Date(U.end_time);return G>=q&&G<=J&&U.is_live},I=U=>new Date(U.start_time)>new Date,D=U=>new Date(U.end_time)<new Date;return a?s.jsx("div",{className:"min-h-screen bg-dark-950 flex items-center justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-red-500"})}):e?s.jsx("div",{className:"min-h-screen bg-dark-950",children:s.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-8",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-white",children:"My Purchases"}),s.jsx("p",{className:"text-gray-400",children:e.email})]}),s.jsxs("button",{onClick:_,className:"flex items-center gap-2 px-4 py-2 text-gray-400 hover:text-white transition-colors",children:[s.jsx(yB,{className:"w-5 h-5"}),"Sign Out"]})]}),n.length===0?s.jsxs("div",{className:"text-center py-16",children:[s.jsx(BT,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold text-white mb-2",children:"No Purchases Yet"}),s.jsx("p",{className:"text-gray-400 mb-6",children:"You haven't purchased any events yet."}),s.jsx("button",{onClick:()=>t("/live"),className:"px-6 py-3 bg-red-500 hover:bg-red-600 text-white font-semibold rounded-lg transition-colors",children:"Browse Events"})]}):s.jsx("div",{className:"space-y-4",children:n.map(U=>{const G=U.event,q=C(G),J=I(G),de=D(G);return s.jsx("div",{className:"bg-dark-900 rounded-xl border border-dark-800 overflow-hidden hover:border-dark-700 transition-colors",children:s.jsxs("div",{className:"flex flex-col md:flex-row",children:[G.thumbnail_url&&s.jsx("div",{className:"md:w-48 h-32 md:h-auto flex-shrink-0",children:s.jsx("img",{src:G.thumbnail_url,alt:G.title,className:"w-full h-full object-cover"})}),s.jsxs("div",{className:"flex-1 p-5",children:[s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("h3",{className:"text-lg font-bold text-white",children:G.title}),q&&s.jsxs("span",{className:"px-2 py-0.5 bg-red-500 text-white text-xs font-bold rounded-full flex items-center gap-1",children:[s.jsx("span",{className:"w-1.5 h-1.5 bg-white rounded-full animate-pulse"}),"LIVE"]}),J&&s.jsx("span",{className:"px-2 py-0.5 bg-blue-500/20 text-blue-400 text-xs font-medium rounded-full",children:"Upcoming"}),de&&!G.mux_playback_id&&s.jsx("span",{className:"px-2 py-0.5 bg-gray-500/20 text-gray-400 text-xs font-medium rounded-full",children:"Ended"}),de&&G.mux_playback_id&&s.jsx("span",{className:"px-2 py-0.5 bg-green-500/20 text-green-400 text-xs font-medium rounded-full",children:"Replay Available"})]}),s.jsx("p",{className:"text-gray-400 text-sm mb-3",children:G.org_display_name||G.organization}),s.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-500",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(ml,{className:"w-4 h-4"}),E(G.start_time)]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(zh,{className:"w-4 h-4"}),N(G.start_time)]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(md,{className:"w-4 h-4"}),G.venue]})]})]}),(q||J||G.mux_playback_id)&&s.jsxs("button",{onClick:()=>t(`/watch/${G.id}?email=${encodeURIComponent(e.email)}`),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-colors flex-shrink-0 ${q?"bg-red-500 hover:bg-red-600 text-white":"bg-dark-800 hover:bg-dark-700 text-white"}`,children:[s.jsx(Qd,{className:"w-5 h-5"}),q?"Watch Live":J?"Watch":"Replay"]})]}),s.jsxs("div",{className:"mt-4 pt-4 border-t border-dark-800 flex items-center justify-between text-sm",children:[s.jsxs("span",{className:"text-gray-500",children:["Purchased ",E(U.created_at)]}),s.jsxs("span",{className:"text-green-500 font-medium",children:["$",U.amount," AUD"]})]})]})]})},U.id)})})]})}):s.jsx("div",{className:"min-h-screen bg-dark-950 flex items-center justify-center px-4",children:s.jsxs("div",{className:"max-w-md w-full",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx(BT,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),s.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"My Purchases"}),s.jsx("p",{className:"text-gray-400",children:"Enter your email to access your purchased events"})]}),f?s.jsxs("div",{className:"bg-green-500/10 border border-green-500/30 rounded-xl p-6 text-center",children:[s.jsx(tu,{className:"w-12 h-12 text-green-500 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Check Your Email!"}),s.jsxs("p",{className:"text-gray-400 mb-4",children:["We've sent a login link to ",s.jsx("span",{className:"text-white font-medium",children:c})]}),s.jsx("p",{className:"text-sm text-gray-500",children:"Click the link in your email to access your purchases. The link expires in 1 hour."}),s.jsx("button",{onClick:()=>m(!1),className:"mt-4 text-red-500 hover:text-red-400 text-sm",children:"Use a different email"})]}):s.jsxs("form",{onSubmit:w,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Email Address"}),s.jsx("input",{type:"email",value:c,onChange:U=>u(U.target.value),placeholder:"your@email.com",className:"w-full px-4 py-3 bg-dark-800 border border-dark-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-red-500",required:!0})]}),p&&s.jsx("div",{className:"text-red-500 text-sm",children:p}),s.jsx("button",{type:"submit",disabled:l||!c,className:"w-full py-3 bg-red-500 hover:bg-red-600 disabled:bg-dark-700 disabled:text-gray-500 text-white font-semibold rounded-lg transition-colors flex items-center justify-center gap-2",children:l?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-t-2 border-b-2 border-white"}),"Sending..."]}):s.jsxs(s.Fragment,{children:[s.jsx(tu,{className:"w-5 h-5"}),"Send Login Link"]})}),s.jsx("p",{className:"text-sm text-gray-500 text-center",children:"No password needed! We'll email you a secure login link."})]})]})})}function wXe(){return s.jsx("div",{className:"py-16 px-4",children:s.jsxs("div",{className:"max-w-3xl mx-auto",children:[s.jsx("h1",{className:"text-4xl font-bold text-white mb-8",children:"Privacy Policy"}),s.jsx("p",{className:"text-gray-400 mb-8",children:"Last updated: February 2026"}),s.jsxs("div",{className:"prose prose-invert max-w-none space-y-8",children:[s.jsxs("section",{children:[s.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"1. Who We Are"}),s.jsx("p",{className:"text-gray-300",children:'Fit Focus Media ABN [Your ABN] ("we", "us", "our") operates fitfocusmedia.com.au. We are committed to protecting your privacy and handling your personal information responsibly.'})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"2. Information We Collect"}),s.jsx("p",{className:"text-gray-300 mb-4",children:"We collect the following information when you purchase livestream access:"}),s.jsxs("ul",{className:"list-disc list-inside text-gray-300 space-y-2",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Email address"}),"  To send your access link and purchase confirmation"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Payment information"}),"  Processed securely by Stripe (we don't store card details)"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Approximate location"}),"  To verify you're not at the venue (geo-blocking) and for analytics"]})]})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"3. How We Use Your Information"}),s.jsxs("ul",{className:"list-disc list-inside text-gray-300 space-y-2",children:[s.jsx("li",{children:"To provide access to livestream events you've purchased"}),s.jsx("li",{children:"To send purchase confirmations and event reminders"}),s.jsx("li",{children:"To enforce geo-blocking restrictions for event protection"}),s.jsx("li",{children:"To analyze where our audience is located (aggregated, anonymized)"}),s.jsx("li",{children:"To improve our services and marketing"})]})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"4. Location Data"}),s.jsx("p",{className:"text-gray-300 mb-4",children:"For certain events, we require location verification to protect ticket sales at physical venues. Your approximate location (latitude/longitude) is:"}),s.jsxs("ul",{className:"list-disc list-inside text-gray-300 space-y-2",children:[s.jsx("li",{children:"Collected once at the time of purchase"}),s.jsx("li",{children:"Used to calculate your distance from the event venue"}),s.jsx("li",{children:"Stored with your order for analytics purposes"}),s.jsx("li",{children:"Never shared with third parties"}),s.jsx("li",{children:"Never used to track you outside of the purchase process"})]})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"5. Data Sharing"}),s.jsx("p",{className:"text-gray-300 mb-4",children:"We share your information only with:"}),s.jsxs("ul",{className:"list-disc list-inside text-gray-300 space-y-2",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Stripe"}),"  For payment processing"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Postmark"}),"  For sending emails"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Event organizers"}),"  Basic purchase info (email, order ID) for their records"]})]}),s.jsx("p",{className:"text-gray-300 mt-4",children:"We do not sell your personal information to anyone."})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"6. Data Retention"}),s.jsx("p",{className:"text-gray-300",children:"We retain your purchase information for 7 years for accounting and legal purposes. You can request deletion of your data by contacting us (see below)."})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"7. Your Rights"}),s.jsx("p",{className:"text-gray-300 mb-4",children:"Under Australian privacy law, you have the right to:"}),s.jsxs("ul",{className:"list-disc list-inside text-gray-300 space-y-2",children:[s.jsx("li",{children:"Access the personal information we hold about you"}),s.jsx("li",{children:"Request correction of inaccurate information"}),s.jsx("li",{children:"Request deletion of your information"}),s.jsx("li",{children:"Complain to the OAIC if you're unsatisfied with how we handle your data"})]})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"8. Security"}),s.jsx("p",{className:"text-gray-300",children:"We use industry-standard security measures including SSL encryption, secure payment processing through Stripe, and access controls to protect your information."})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"9. Contact Us"}),s.jsxs("p",{className:"text-gray-300",children:["For privacy-related questions or requests, contact us at:",s.jsx("br",{}),s.jsx("strong",{children:"Email:"})," info@fitfocusmedia.com.au",s.jsx("br",{}),s.jsx("strong",{children:"Location:"})," Brisbane, Queensland, Australia"]})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"10. Changes to This Policy"}),s.jsx("p",{className:"text-gray-300",children:"We may update this policy from time to time. Changes will be posted on this page with an updated revision date."})]})]}),s.jsx("div",{className:"mt-12 pt-8 border-t border-dark-700",children:s.jsx(rs,{to:"/",className:"text-red-500 hover:text-red-400",children:" Back to Home"})})]})})}function _Xe(){return s.jsx("div",{className:"py-16 px-4",children:s.jsxs("div",{className:"max-w-3xl mx-auto",children:[s.jsx("h1",{className:"text-4xl font-bold text-white mb-8",children:"Terms of Service"}),s.jsx("p",{className:"text-gray-400 mb-8",children:"Last updated: February 2026"}),s.jsxs("div",{className:"prose prose-invert max-w-none space-y-8",children:[s.jsxs("section",{children:[s.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"1. Acceptance of Terms"}),s.jsx("p",{className:"text-gray-300",children:"By purchasing livestream access through Fit Focus Media, you agree to these Terms of Service and our Privacy Policy. If you do not agree, please do not make a purchase."})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"2. Livestream Access"}),s.jsxs("ul",{className:"list-disc list-inside text-gray-300 space-y-2",children:[s.jsx("li",{children:"Access is granted to the email address used at purchase"}),s.jsxs("li",{children:["Access is for ",s.jsx("strong",{children:"one device at a time"}),"  viewing on multiple devices simultaneously is not permitted"]}),s.jsx("li",{children:"Access includes the live event and replay for 7 days after the event ends"}),s.jsx("li",{children:"Access links are non-transferable"})]})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"3. Geo-Blocking"}),s.jsx("p",{className:"text-gray-300 mb-4",children:"Some events have geographic restrictions to protect in-person ticket sales:"}),s.jsxs("ul",{className:"list-disc list-inside text-gray-300 space-y-2",children:[s.jsx("li",{children:"You may be required to share your location to verify you're not at the venue"}),s.jsx("li",{children:"If you're within the restricted zone, online access will be blocked"}),s.jsx("li",{children:"In-person tickets may be available  check with the event organizer"}),s.jsx("li",{children:"Attempting to circumvent geo-blocking (e.g., using VPNs or fake locations) may result in access being revoked without refund"})]})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"4. Payment"}),s.jsxs("ul",{className:"list-disc list-inside text-gray-300 space-y-2",children:[s.jsx("li",{children:"All prices are in Australian Dollars (AUD)"}),s.jsx("li",{children:"Payment is processed securely by Stripe"}),s.jsx("li",{children:"Your purchase confirmation and access link will be sent to your email"})]})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"5. Refunds"}),s.jsx("p",{className:"text-gray-300 mb-4",children:"Refunds may be issued in the following circumstances:"}),s.jsxs("ul",{className:"list-disc list-inside text-gray-300 space-y-2",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Event cancelled"}),"  Full refund"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Technical issues on our end"}),"  Full or partial refund at our discretion"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Request before event starts"}),"  Contact us and we'll review on a case-by-case basis"]})]}),s.jsx("p",{className:"text-gray-300 mt-4",children:"Refunds are NOT provided for:"}),s.jsxs("ul",{className:"list-disc list-inside text-gray-300 space-y-2",children:[s.jsx("li",{children:"Change of mind after the event has started"}),s.jsx("li",{children:"Issues with your own internet connection"}),s.jsx("li",{children:"Being blocked by geo-restrictions after purchase (check before buying)"})]})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"6. Prohibited Conduct"}),s.jsx("p",{className:"text-gray-300 mb-4",children:"You agree NOT to:"}),s.jsxs("ul",{className:"list-disc list-inside text-gray-300 space-y-2",children:[s.jsx("li",{children:"Record, download, or redistribute the livestream content"}),s.jsx("li",{children:"Share your access link with others"}),s.jsx("li",{children:"Use VPNs or location spoofing to bypass geo-restrictions"}),s.jsx("li",{children:"Attempt to access streams you haven't paid for"})]}),s.jsx("p",{className:"text-gray-300 mt-4",children:"Violations may result in immediate termination of access without refund."})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"7. Content Ownership"}),s.jsx("p",{className:"text-gray-300",children:"All livestream content is owned by the event organizers and/or Fit Focus Media. Your purchase grants you a limited, personal, non-transferable license to view the content. No other rights are granted."})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"8. Disclaimer"}),s.jsx("p",{className:"text-gray-300",children:'Livestreams are provided "as is". While we strive for a high-quality experience, we cannot guarantee uninterrupted service. Technical issues, internet outages, or other factors may affect your viewing experience.'})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"9. Limitation of Liability"}),s.jsx("p",{className:"text-gray-300",children:"To the maximum extent permitted by law, Fit Focus Media's liability is limited to the amount you paid for the affected purchase. We are not liable for indirect, incidental, or consequential damages."})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"10. Governing Law"}),s.jsx("p",{className:"text-gray-300",children:"These terms are governed by the laws of Queensland, Australia. Any disputes will be resolved in Queensland courts."})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"11. Contact"}),s.jsxs("p",{className:"text-gray-300",children:["Questions about these terms? Contact us at:",s.jsx("br",{}),s.jsx("strong",{children:"Email:"})," info@fitfocusmedia.com.au"]})]})]}),s.jsx("div",{className:"mt-12 pt-8 border-t border-dark-700",children:s.jsx(rs,{to:"/",className:"text-red-500 hover:text-red-400",children:" Back to Home"})})]})})}async function EXe(t,e=1440){return new Promise(r=>{const n=new window.Image;n.onload=()=>{let i=n.width,a=n.height;const o=Math.max(i,a);if(o>e){const g=e/o;i=Math.round(n.width*g),a=Math.round(n.height*g)}const c=document.createElement("canvas");c.width=i,c.height=a;const u=c.getContext("2d");u.drawImage(n,0,0,i,a);const l="FIT FOCUS MEDIA",d=Math.max(i,a),f=Math.max(Math.floor(d/20),40);u.font=`bold ${f}px Arial`,u.textAlign="center",u.save(),u.translate(i/2,a/2),u.rotate(-30*Math.PI/180);const m=f*4,p=f*10;for(let g=-a;g<a*2;g+=m)for(let y=-i;y<i*2;y+=p)u.fillStyle="rgba(0, 0, 0, 0.4)",u.fillText(l,y+2,g+2),u.fillStyle="rgba(255, 255, 255, 0.5)",u.fillText(l,y,g);u.restore(),c.toBlob(g=>r(g),"image/jpeg",.7)},n.src=URL.createObjectURL(t)})}async function SXe(t,e=400){return new Promise(r=>{const n=new window.Image;n.onload=()=>{const i=e/n.width,a=document.createElement("canvas");a.width=e,a.height=n.height*i,a.getContext("2d").drawImage(n,0,0,a.width,a.height),a.toBlob(c=>r(c),"image/jpeg",.8)},n.src=URL.createObjectURL(t)})}function jXe(){const[t,e]=T.useState([]),[r,n]=T.useState(null),[i,a]=T.useState([]),[o,c]=T.useState(null),[u,l]=T.useState(!0),[d,f]=T.useState(!1),m=new URLSearchParams(window.location.hash.split("?")[1]||""),p=m.get("org"),g=m.get("create")==="true",y=m.get("edit");T.useEffect(()=>{y?x(y):w()},[]);const x=async E=>{try{const{data:N,error:C}=await ir.from("galleries").select("*, organizations(*)").eq("id",E).single();if(C||!N){console.error("Gallery not found:",C),l(!1);return}N.organizations&&(n(N.organizations),e([N.organizations])),c(N),l(!1)}catch(N){console.error("Load gallery for edit error:",N),l(!1)}};T.useEffect(()=>{if(g&&r&&!d){f(!0);const E=window.location.hash.replace("&create=true","").replace("?create=true","");window.history.replaceState(null,"",E||"#/portal/galleries")}},[r,g]),T.useEffect(()=>{r&&_(r.id)},[r]);const w=async()=>{try{const{data:E,error:N}=await ir.from("organizations").select("*").order("name");if(N)throw N;if(e(E||[]),p&&E){const C=E.find(I=>I.id===p);if(C){n(C);return}}E&&E.length===1&&n(E[0])}catch(E){console.error("Load organizations error:",E)}finally{l(!1)}},_=async E=>{try{const{data:N,error:C}=await ir.from("galleries").select(`
          *,
          gallery_photos(count),
          events(id, name)
        `).eq("organization_id",E).order("created_at",{ascending:!1});if(C)throw C;a(N||[])}catch(N){console.error("Load galleries error:",N)}};return o?s.jsx(NXe,{gallery:o,organization:r,onBack:()=>{c(null),r&&_(r.id)}}):u?s.jsx("div",{className:"p-8 text-center",children:s.jsx(QA,{className:"w-8 h-8 text-red-500 animate-spin mx-auto"})}):s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("a",{href:r?`/#/portal/content-admin?org=${r.id}`:"/#/portal/content-admin",className:"text-gray-400 hover:text-white transition-colors",title:"Back to Content Admin",children:s.jsx(tp,{className:"w-5 h-5"})}),s.jsx("h1",{className:"text-2xl font-bold text-white",children:"Photo Galleries"}),r&&s.jsxs("span",{className:"text-gray-400 text-lg",children:[" ",r.display_name||r.name]})]}),r&&s.jsxs("button",{onClick:()=>f(!0),className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg flex items-center gap-2",children:[s.jsx(jf,{className:"w-4 h-4"}),"New Gallery"]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-gray-400 mb-2",children:"Organization"}),s.jsxs("select",{value:r?.id||"",onChange:E=>{const N=t.find(C=>C.id===E.target.value);n(N||null),a([])},className:"w-full md:w-64 bg-dark-700 text-white rounded-lg px-4 py-3 border border-dark-600 focus:border-red-500 focus:outline-none",children:[s.jsx("option",{value:"",children:"Select Organization..."}),t.map(E=>s.jsx("option",{value:E.id,children:E.display_name||E.name},E.id))]})]}),r?i.length===0?s.jsxs("div",{className:"text-center py-12 text-gray-400",children:[s.jsx(tm,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),"No galleries yet for ",r.display_name||r.name]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map(E=>s.jsx(TXe,{gallery:E,onClick:()=>c(E)},E.id))}):s.jsxs("div",{className:"text-center py-12 text-gray-400",children:[s.jsx(dR,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),"Select an organization to manage galleries"]}),d&&r&&s.jsx(CXe,{organization:r,onClose:()=>f(!1),onCreate:E=>{a([E,...i]),f(!1),c(E)}})]})}function TXe({gallery:t,onClick:e}){const r=t.gallery_photos?.[0]?.count||0,n={draft:"bg-yellow-600",published:"bg-green-600",archived:"bg-gray-600"};return s.jsxs("div",{onClick:e,className:"bg-dark-800 rounded-lg overflow-hidden cursor-pointer hover:ring-2 hover:ring-red-500 transition-all",children:[s.jsx("div",{className:"h-40 bg-dark-700 flex items-center justify-center",children:s.jsx(tm,{className:"w-12 h-12 text-gray-600"})}),s.jsxs("div",{className:"p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("span",{className:`${n[t.status]||"bg-gray-600"} px-2 py-0.5 rounded text-xs text-white`,children:t.status}),s.jsxs("span",{className:"text-gray-400 text-sm",children:[r," photos"]})]}),s.jsx("h3",{className:"text-white font-semibold",children:t.title}),t.events&&s.jsxs("p",{className:"text-gray-400 text-sm mt-1 flex items-center gap-1",children:[s.jsx(ml,{className:"w-3 h-3"}),t.events.name]}),s.jsxs("p",{className:"text-gray-500 text-sm mt-2",children:["$",(t.price_per_photo/100).toFixed(2)," per photo"]})]})]})}function CXe({organization:t,onClose:e,onCreate:r}){const[n,i]=T.useState([]),[a,o]=T.useState(!0),[c,u]=T.useState({title:"",description:"",event_id:"",price_per_photo:5,package_price:"",package_enabled:!1}),[l,d]=T.useState(!1);T.useEffect(()=>{f()},[t.id]);const f=async()=>{try{const{data:p,error:g}=await ir.from("events").select("id, name, date").eq("organization_id",t.id).order("date",{ascending:!1});if(g)throw g;i(p||[])}catch(p){console.error("Load events error:",p)}finally{o(!1)}},m=async p=>{p.preventDefault(),d(!0);try{const g=c.title.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,""),{data:y,error:x}=await ir.from("galleries").insert({organization_id:t.id,event_id:c.event_id||null,title:c.title,description:c.description,slug:g,price_per_photo:Math.round(c.price_per_photo*100),package_price:c.package_price?Math.round(parseFloat(c.package_price)*100):null,package_enabled:c.package_enabled,status:"draft"}).select().single();if(x)throw x;r(y)}catch(g){console.error("Create gallery error:",g),alert("Failed to create gallery: "+g.message)}finally{d(!1)}};return s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-dark-800 rounded-xl p-6 w-full max-w-md max-h-[90vh] overflow-y-auto",children:[s.jsxs("h2",{className:"text-xl font-bold text-white mb-4",children:["Create Gallery for ",t.display_name||t.name]}),s.jsxs("form",{onSubmit:m,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-gray-400 mb-1",children:"Title *"}),s.jsx("input",{type:"text",value:c.title,onChange:p=>u({...c,title:p.target.value}),className:"w-full bg-dark-700 text-white rounded-lg px-4 py-3 border border-dark-600 focus:border-red-500 focus:outline-none",placeholder:"e.g. South East Qld Championship Photos",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-gray-400 mb-1",children:"Link to Event (Optional)"}),a?s.jsx("div",{className:"text-gray-500 py-2",children:"Loading events..."}):s.jsxs("select",{value:c.event_id,onChange:p=>u({...c,event_id:p.target.value}),className:"w-full bg-dark-700 text-white rounded-lg px-4 py-3 border border-dark-600 focus:border-red-500 focus:outline-none",children:[s.jsx("option",{value:"",children:"No specific event (org-wide gallery)"}),n.map(p=>s.jsxs("option",{value:p.id,children:[p.name," (",new Date(p.date).toLocaleDateString(),")"]},p.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-gray-400 mb-1",children:"Description"}),s.jsx("textarea",{value:c.description,onChange:p=>u({...c,description:p.target.value}),className:"w-full bg-dark-700 text-white rounded-lg px-4 py-3 border border-dark-600 focus:border-red-500 focus:outline-none",rows:3,placeholder:"Optional description for the gallery"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-gray-400 mb-1",children:"Price per Photo ($)"}),s.jsx("input",{type:"number",step:"0.01",min:"0",value:c.price_per_photo,onChange:p=>u({...c,price_per_photo:parseFloat(p.target.value)||0}),className:"w-full bg-dark-700 text-white rounded-lg px-4 py-3 border border-dark-600 focus:border-red-500 focus:outline-none"})]}),s.jsx("div",{children:s.jsxs("label",{className:"flex items-center gap-2 text-gray-400 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:c.package_enabled,onChange:p=>u({...c,package_enabled:p.target.checked}),className:"w-4 h-4 rounded"}),'Enable "Buy All" Package Deal']})}),c.package_enabled&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-gray-400 mb-1",children:"Package Price ($)"}),s.jsx("input",{type:"number",step:"0.01",min:"0",value:c.package_price,onChange:p=>u({...c,package_price:p.target.value}),className:"w-full bg-dark-700 text-white rounded-lg px-4 py-3 border border-dark-600 focus:border-red-500 focus:outline-none",placeholder:"e.g. 49.99 for all photos"})]}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsx("button",{type:"button",onClick:e,className:"flex-1 bg-dark-600 hover:bg-dark-500 text-white py-3 rounded-lg",children:"Cancel"}),s.jsxs("button",{type:"submit",disabled:l||!c.title,className:"flex-1 bg-red-600 hover:bg-red-700 disabled:bg-gray-600 text-white py-3 rounded-lg flex items-center justify-center gap-2",children:[l?s.jsx(QA,{className:"w-4 h-4 animate-spin"}):null,"Create Gallery"]})]})]})]})})}function NXe({gallery:t,organization:e,onBack:r}){const[n,i]=T.useState(t),[a,o]=T.useState([]),[c,u]=T.useState(!0),[l,d]=T.useState(!1),[f,m]=T.useState({current:0,total:0}),[p,g]=T.useState(!1),[y,x]=T.useState(new Set),[w,_]=T.useState(!1),[E,N]=T.useState(""),C=E?a.filter(Ie=>Ie.filename.toLowerCase().includes(E.toLowerCase())):a;T.useEffect(()=>{I()},[t.id]);const I=async()=>{try{const{data:Ie,error:Ce}=await ir.from("gallery_photos").select("*").eq("gallery_id",t.id).order("sort_order",{ascending:!0});if(Ce)throw Ce;const be=await Promise.all((Ie||[]).map(async ue=>{const{data:Pe}=await ir.storage.from("galleries").createSignedUrl(ue.thumbnail_path||ue.watermarked_path,3600);return{...ue,thumbnail_url:Pe?.signedUrl}}));o(be)}catch(Ie){console.error("Load photos error:",Ie)}finally{u(!1)}},D=async Ie=>{const Ce=Array.from(Ie).filter(Pe=>Pe.type.startsWith("image/")&&Pe.size<=52428800);if(Ce.length===0)return;d(!0),m({current:0,total:Ce.length});const be=[];let ue=a.length;for(let Pe=0;Pe<Ce.length;Pe++){const Re=Ce[Pe];m({current:Pe+1,total:Ce.length});try{const He=crypto.randomUUID(),Fe=Re.name.split(".").pop()||"jpg",ft=Re.name.replace(/\.[^/.]+$/,"").replace(/[^a-zA-Z0-9_-]/g,"_"),at=Date.now(),De=`${ft}_${at}`,ut=await EXe(Re),et=await SXe(Re),Ue=`${t.id}/originals/${De}.${Fe}`,jt=`${t.id}/watermarked/${De}_wm.jpg`,rt=`${t.id}/thumbnails/${De}_thumb.jpg`,{error:Ct}=await ir.storage.from("galleries").upload(Ue,Re,{contentType:Re.type});if(Ct)throw new Error(`Original upload failed: ${Ct.message}`);const{error:ke}=await ir.storage.from("galleries").upload(jt,ut,{contentType:"image/jpeg"});if(ke)throw new Error(`Watermarked upload failed: ${ke.message}`);const{error:Xe}=await ir.storage.from("galleries").upload(rt,et,{contentType:"image/jpeg"});if(Xe)throw new Error(`Thumbnail upload failed: ${Xe.message}`);const mt=await new Promise(Pr=>{const tn=new window.Image;tn.onload=()=>Pr(tn),tn.src=URL.createObjectURL(Re)}),{data:Jt,error:tr}=await ir.from("gallery_photos").insert({id:He,gallery_id:t.id,original_path:Ue,watermarked_path:jt,thumbnail_path:rt,filename:Re.name,sort_order:ue++,width:mt.width,height:mt.height,file_size:Re.size}).select().single();if(tr)throw tr;const{data:lr}=await ir.storage.from("galleries").createSignedUrl(rt,3600);be.push({...Jt,thumbnail_url:lr?.signedUrl})}catch(He){console.error(`Failed to upload ${Re.name}:`,He),alert(`Failed to upload ${Re.name}: ${He.message}`)}}o([...a,...be]),d(!1),m({current:0,total:0})},U=async Ie=>{if(confirm("Delete this photo?"))try{const Ce=a.find(ue=>ue.id===Ie);if(!Ce)return;const be=[Ce.original_path,Ce.watermarked_path,Ce.thumbnail_path].filter(Boolean);await ir.storage.from("galleries").remove(be),await ir.from("gallery_photos").delete().eq("id",Ie),o(a.filter(ue=>ue.id!==Ie)),x(ue=>(ue.delete(Ie),new Set(ue)))}catch(Ce){console.error("Delete photo error:",Ce)}},G=Ie=>{x(Ce=>{const be=new Set(Ce);return be.has(Ie)?be.delete(Ie):be.add(Ie),be})},q=()=>x(new Set(C.map(Ie=>Ie.id))),J=()=>x(new Set),de=async()=>{if(y.size!==0&&confirm(`Delete ${y.size} selected photos?`)){_(!0);try{const Ie=a.filter(ue=>y.has(ue.id)),Ce=Ie.flatMap(ue=>[ue.original_path,ue.watermarked_path,ue.thumbnail_path].filter(Boolean));await ir.storage.from("galleries").remove(Ce);const be=Ie.map(ue=>ue.id);await ir.from("gallery_photos").delete().in("id",be),o(a.filter(ue=>!y.has(ue.id))),x(new Set)}catch(Ie){console.error("Delete selected error:",Ie),alert("Failed to delete some photos")}finally{_(!1)}}},xe=async Ie=>{try{const{data:Ce,error:be}=await ir.from("galleries").update(Ie).eq("id",t.id).select().single();if(be)throw be;i(Ce)}catch(Ce){console.error("Update gallery error:",Ce)}},we=()=>xe({status:"published",published_at:new Date().toISOString()}),ve=()=>xe({status:"draft"}),ne=Ie=>{Ie.preventDefault(),g(!1),Ie.dataTransfer.files&&D(Ie.dataTransfer.files)},ae=Ie=>{Ie.preventDefault(),g(!0)},oe=()=>{g(!1)};return c?s.jsx("div",{className:"p-8 text-center",children:s.jsx(QA,{className:"w-8 h-8 text-red-500 animate-spin mx-auto"})}):s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6 flex-wrap gap-4",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:r,className:"text-gray-400 hover:text-white",children:s.jsx(tp,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-white",children:n.title}),s.jsx("p",{className:"text-gray-400 text-sm",children:e.display_name||e.name})]}),s.jsx("span",{className:`px-2 py-1 rounded text-sm ${n.status==="published"?"bg-green-600":"bg-yellow-600"} text-white`,children:n.status})]}),s.jsx("div",{className:"flex gap-3",children:n.status==="draft"?s.jsxs("button",{onClick:we,disabled:a.length===0,className:"bg-green-600 hover:bg-green-700 disabled:bg-gray-600 text-white px-4 py-2 rounded-lg flex items-center gap-2",children:[s.jsx(la,{className:"w-4 h-4"}),"Publish"]}):s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:ve,className:"bg-yellow-600 hover:bg-yellow-700 text-white px-4 py-2 rounded-lg",children:"Unpublish"}),s.jsxs("a",{href:`/#/gallery/${n.slug}`,target:"_blank",rel:"noopener noreferrer",className:"bg-dark-600 hover:bg-dark-500 text-white px-4 py-2 rounded-lg flex items-center gap-2",children:[s.jsx(Fb,{className:"w-4 h-4"}),"View Public"]})]})})]}),s.jsxs("div",{onDrop:ne,onDragOver:ae,onDragLeave:oe,className:`border-2 border-dashed rounded-xl p-8 mb-6 text-center cursor-pointer transition-colors ${p?"border-red-500 bg-red-500/10":"border-dark-600 hover:border-dark-500"} ${l?"opacity-50 pointer-events-none":""}`,onClick:()=>!l&&document.getElementById("photo-upload")?.click(),children:[s.jsx("input",{id:"photo-upload",type:"file",multiple:!0,accept:"image/jpeg,image/png,image/webp",className:"hidden",onChange:Ie=>Ie.target.files&&D(Ie.target.files)}),l?s.jsxs("div",{children:[s.jsx(QA,{className:"w-8 h-8 text-red-500 animate-spin mx-auto mb-2"}),s.jsxs("div",{className:"text-white mb-2",children:["Uploading ",f.current," of ",f.total,"..."]}),s.jsx("div",{className:"w-64 mx-auto bg-dark-700 rounded-full h-2",children:s.jsx("div",{className:"bg-red-600 h-2 rounded-full transition-all",style:{width:`${f.current/f.total*100}%`}})})]}):p?s.jsxs("div",{className:"text-red-400",children:[s.jsx(bB,{className:"w-8 h-8 mx-auto mb-2"}),"Drop photos here..."]}):s.jsxs("div",{children:[s.jsx(bB,{className:"w-8 h-8 text-gray-500 mx-auto mb-2"}),s.jsx("p",{className:"text-gray-300 mb-1",children:"Drag & drop photos here, or click to select"}),s.jsx("p",{className:"text-gray-500 text-sm",children:"JPEG, PNG, WebP up to 50MB each"})]})]}),a.length===0?s.jsxs("div",{className:"text-center py-12 text-gray-400",children:[s.jsx(tm,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),"No photos yet. Upload some photos to get started!"]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-4",children:[s.jsxs("div",{className:"relative flex-1 min-w-[200px] max-w-[300px]",children:[s.jsx("input",{type:"text",placeholder:"Search by filename...",value:E,onChange:Ie=>N(Ie.target.value),className:"w-full bg-dark-700 text-white rounded-lg px-3 py-1.5 pl-9 text-sm border border-dark-600 focus:border-red-500 focus:outline-none"}),s.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),E&&s.jsx("button",{onClick:()=>N(""),className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white",children:""})]}),E&&s.jsxs("span",{className:"text-gray-400 text-sm",children:[C.length," of ",a.length]}),s.jsx("button",{onClick:y.size===C.length?J:q,className:"px-3 py-1.5 bg-dark-600 hover:bg-dark-500 text-white text-sm rounded-lg",children:y.size===C.length&&C.length>0?"Deselect All":"Select All"}),y.size>0&&s.jsxs(s.Fragment,{children:[s.jsxs("span",{className:"text-gray-400 text-sm",children:[y.size," selected"]}),s.jsxs("button",{onClick:de,disabled:w,className:"px-3 py-1.5 bg-red-600 hover:bg-red-700 disabled:bg-gray-600 text-white text-sm rounded-lg flex items-center gap-2",children:[w?s.jsx(QA,{className:"w-3 h-3 animate-spin"}):s.jsx(Jp,{className:"w-3 h-3"}),"Delete Selected"]})]})]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:C.map(Ie=>s.jsxs("div",{className:`relative group cursor-pointer ${y.has(Ie.id)?"ring-2 ring-red-500":""}`,onClick:()=>G(Ie.id),children:[s.jsx("img",{src:Ie.thumbnail_url,alt:Ie.filename,className:"w-full aspect-square object-cover rounded-lg bg-dark-700"}),s.jsx("div",{className:`absolute top-2 left-2 w-5 h-5 rounded border-2 flex items-center justify-center transition-all ${y.has(Ie.id)?"bg-red-500 border-red-500":"border-white/50 bg-black/30 group-hover:border-white"}`,children:y.has(Ie.id)&&s.jsx(la,{className:"w-3 h-3 text-white"})}),s.jsx("button",{onClick:Ce=>{Ce.stopPropagation(),U(Ie.id)},className:"absolute top-2 right-2 bg-red-600 hover:bg-red-700 text-white p-1.5 rounded opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx(Jp,{className:"w-3 h-3"})}),s.jsx("div",{className:"absolute bottom-1 left-1 right-1 text-xs text-white truncate bg-black/50 px-1 rounded",children:Ie.filename})]},Ie.id))})]}),s.jsxs("div",{className:"mt-8 bg-dark-800 rounded-xl p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Gallery Settings"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"Price per Photo ($)"}),s.jsx("input",{type:"number",step:"0.01",min:"0",defaultValue:(n.price_per_photo/100).toFixed(2),onBlur:Ie=>{const Ce=Math.round(parseFloat(Ie.target.value||0)*100);xe({price_per_photo:Ce}),i({...n,price_per_photo:Ce})},className:"w-full bg-dark-700 text-white rounded-lg px-3 py-2 border border-dark-600 focus:border-red-500 focus:outline-none"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"flex items-center gap-2 text-gray-400 text-sm mb-1 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:n.package_enabled||!1,onChange:Ie=>{xe({package_enabled:Ie.target.checked}),i({...n,package_enabled:Ie.target.checked})},className:"w-4 h-4 rounded"}),'Enable "Buy All" Package']}),n.package_enabled&&s.jsx("input",{type:"number",step:"0.01",min:"0",placeholder:"Package price",defaultValue:n.package_price?(n.package_price/100).toFixed(2):"",onBlur:Ie=>{const Ce=Math.round(parseFloat(Ie.target.value||0)*100);xe({package_price:Ce}),i({...n,package_price:Ce})},className:"w-full bg-dark-700 text-white rounded-lg px-3 py-2 border border-dark-600 focus:border-red-500 focus:outline-none mt-1"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"Total Photos"}),s.jsx("div",{className:"text-white text-lg font-semibold py-2",children:a.length})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"Public URL"}),s.jsxs("div",{className:"text-white text-sm py-2 break-all",children:["/gallery/",n.slug]})]})]}),s.jsx(kXe,{gallery:n,onUpdate:Ie=>{xe(Ie),i({...n,...Ie})}})]})]})}function kXe({gallery:t,onUpdate:e}){const[r,n]=T.useState(t.pricing_tiers||[]),[i,a]=T.useState(t.tiered_pricing_enabled||!1),[o,c]=T.useState(!1),[u,l]=T.useState(!1),d=()=>{const x=r[r.length-1],w=x?(x.max_qty||x.min_qty)+1:1;n([...r,{min_qty:w,max_qty:w+9,price_per_photo:t.price_per_photo}]),l(!0)},f=(x,w,_)=>{const E=[...r];E[x]={...E[x],[w]:_},n(E),l(!0)},m=x=>{n(r.filter((w,_)=>_!==x)),l(!0)},p=async()=>{c(!0);try{const x=r.map(w=>({min_qty:parseInt(w.min_qty)||1,max_qty:w.max_qty?parseInt(w.max_qty):null,price_per_photo:parseInt(w.price_per_photo)||t.price_per_photo}));await e({pricing_tiers:x,tiered_pricing_enabled:i}),l(!1)}catch(x){console.error("Save tiers error:",x),alert("Failed to save pricing tiers")}finally{c(!1)}},g=()=>{a(!i),l(!0)},y=x=>{if(!i||r.length===0)return x*t.price_per_photo;let w=x,_=0;const E=[...r].sort((N,C)=>N.min_qty-C.min_qty);for(const N of E){if(w<=0)break;const C=N.max_qty||1/0,I=C===1/0?w:C-N.min_qty+1,D=Math.min(w,I);_+=D*N.price_per_photo,w-=D}return w>0&&(_+=w*t.price_per_photo),_};return s.jsxs("div",{className:"border-t border-dark-600 pt-4 mt-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-md font-semibold text-white flex items-center gap-2",children:" Volume Discount Tiers"}),s.jsx("button",{onClick:g,className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${i?"bg-green-600 hover:bg-green-700 text-white":"bg-dark-600 hover:bg-dark-500 text-gray-300"}`,children:i?" Enabled":"Enable Discounts"})]}),s.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"Set volume discounts that automatically apply when customers buy more photos. Pricing is incremental (first 10 at tier 1 price, next 10 at tier 2, etc.)"}),i&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"space-y-3 mb-4",children:r.map((x,w)=>s.jsxs("div",{className:"flex items-center gap-3 bg-dark-700 p-3 rounded-lg",children:[s.jsxs("div",{className:"flex-1 grid grid-cols-3 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"From Qty"}),s.jsx("input",{type:"number",min:"1",defaultValue:x.min_qty,onBlur:_=>f(w,"min_qty",parseInt(_.target.value)||1),className:"w-full bg-dark-600 text-white rounded px-3 py-2 text-sm border border-dark-500 focus:border-red-500 focus:outline-none"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"To Qty (blank=)"}),s.jsx("input",{type:"number",min:"1",defaultValue:x.max_qty||"",placeholder:"",onBlur:_=>f(w,"max_qty",_.target.value?parseInt(_.target.value):null),className:"w-full bg-dark-600 text-white rounded px-3 py-2 text-sm border border-dark-500 focus:border-red-500 focus:outline-none"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"Price per Photo"}),s.jsxs("div",{className:"relative",children:[s.jsx("span",{className:"absolute left-3 top-2 text-gray-400",children:"$"}),s.jsx("input",{type:"number",step:"0.01",min:"0",defaultValue:(x.price_per_photo/100).toFixed(2),onBlur:_=>f(w,"price_per_photo",Math.round(parseFloat(_.target.value||0)*100)),className:"w-full bg-dark-600 text-white rounded pl-7 pr-3 py-2 text-sm border border-dark-500 focus:border-red-500 focus:outline-none"})]})]})]}),s.jsx("button",{onClick:()=>m(w),className:"text-red-400 hover:text-red-300 p-2",title:"Remove tier",children:s.jsx(Jp,{className:"w-4 h-4"})})]},`tier-${w}-${x.min_qty}`))}),s.jsxs("button",{onClick:d,className:"text-red-400 hover:text-red-300 text-sm flex items-center gap-1 mb-4",children:[s.jsx(jf,{className:"w-4 h-4"})," Add Tier"]}),r.length>0&&s.jsxs("div",{className:"bg-dark-700 rounded-lg p-4 mb-4",children:[s.jsx("h4",{className:"text-sm font-medium text-white mb-2",children:"Preview Calculator"}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4 text-sm",children:(()=>{const x=new Set;r.forEach(_=>{x.add(_.min_qty),_.max_qty&&(x.add(_.max_qty),x.add(_.max_qty+1))});const w=Math.max(...r.map(_=>_.max_qty||_.min_qty+20));return x.add(Math.ceil(w/2)),x.add(w),x.add(w+10),[...x].sort((_,E)=>_-E).slice(0,8).map(_=>{const E=y(_),C=_*t.price_per_photo-E;return s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-gray-400",children:[_," photos"]}),s.jsxs("div",{className:"text-white font-medium",children:["$",(E/100).toFixed(2)]}),C>0&&s.jsxs("div",{className:"text-green-400 text-xs",children:["Save $",(C/100).toFixed(2)]})]},_)})})()})]})]}),i&&s.jsxs("button",{onClick:p,disabled:o||!u,className:`px-4 py-2 rounded-lg flex items-center gap-2 ${u?"bg-red-600 hover:bg-red-700 text-white":"bg-dark-600 text-gray-400 cursor-not-allowed"}`,children:[o?s.jsx(QA,{className:"w-4 h-4 animate-spin"}):s.jsx(la,{className:"w-4 h-4"}),u?"Save Pricing":"Saved "]})]})}function LXe(t,e,r){if(!e||!Array.isArray(e)||e.length===0)return{total:t*r,breakdown:[{qty:t,price:r,subtotal:t*r}],savings:0};const n=[...e].sort((l,d)=>l.min_qty-d.min_qty);let i=t,a=0;const o=[];for(const l of n){if(i<=0)break;const d=l.min_qty,f=l.max_qty||1/0,m=l.price_per_photo,p=f===1/0?i:f-d+1,g=Math.min(i,p);if(g>0){const y=g*m;a+=y,o.push({tier:`${d}-${f===1/0?"+":f}`,qty:g,price:m,subtotal:y}),i-=g}}if(i>0){const l=i*r;a+=l,o.push({tier:"standard",qty:i,price:r,subtotal:l})}const c=t*r,u=c-a;return{total:a,breakdown:o,savings:u,flatTotal:c}}function IXe(){const{slug:t}=Kh(),[e]=ky(),[r,n]=T.useState(null),[i,a]=T.useState([]),[o,c]=T.useState(new Set),[u,l]=T.useState(!0),[d,f]=T.useState(null),[m,p]=T.useState(!1),[g,y]=T.useState(!1),[x,w]=T.useState(null),_=e.get("cancelled");T.useEffect(()=>{E()},[t]);const E=async()=>{try{const{data:G,error:q}=await ir.from("galleries").select(`
          id, title, description, slug, price_per_photo, package_price, package_enabled,
          pricing_tiers, tiered_pricing_enabled,
          organizations(id, name, display_name)
        `).eq("slug",t).eq("status","published").single();if(q)throw q;n(G);const{data:J,error:de}=await ir.from("gallery_photos").select("id, filename, width, height, price, sort_order, watermarked_path, thumbnail_path").eq("gallery_id",G.id).order("sort_order",{ascending:!0});if(de)throw de;const xe=await Promise.all(J.map(async we=>{const{data:ve}=await ir.storage.from("galleries").createSignedUrl(we.watermarked_path,3600);return{...we,watermarked_url:ve?.signedUrl,thumbnail_url:ve?.signedUrl,price:we.price||G.price_per_photo}}));a(xe)}catch(G){console.error("Load gallery error:",G),f("Gallery not found")}finally{l(!1)}},N=G=>{const q=new Set(o);q.has(G)?q.delete(G):q.add(G),c(q)},C=()=>{c(new Set(i.map(G=>G.id)))},I=()=>{c(new Set)},D=T.useMemo(()=>{const G=o.size;if(G===0||!r)return{total:0,savings:0,breakdown:[],flatTotal:0};if(r.tiered_pricing_enabled&&r.pricing_tiers?.length>0)return LXe(G,r.pricing_tiers,r.price_per_photo);const q=G*r.price_per_photo;return{total:q,savings:0,breakdown:[],flatTotal:q}},[o.size,r]),U=async(G,q,J=!1)=>{y(!0),f(null);try{const de=await fetch("https://gonalgubgldgpkcekaxe.supabase.co/functions/v1/gallery_checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({gallery_slug:t,email:G,customer_name:q,photo_ids:J?[]:Array.from(o),is_package:J})}),xe=await de.json();if(!de.ok)throw new Error(xe.error||"Checkout failed");xe.checkout_url&&(window.location.href=xe.checkout_url)}catch(de){console.error("Checkout error:",de),f(de.message)}finally{y(!1)}};return u?s.jsx("div",{className:"min-h-[60vh] flex items-center justify-center",children:s.jsx(QA,{className:"w-8 h-8 text-red-500 animate-spin"})}):d&&!r?s.jsx("div",{className:"min-h-[60vh] flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Gallery Not Found"}),s.jsx("p",{className:"text-gray-400",children:d})]})}):s.jsx("div",{className:"py-8 px-4",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:r.title}),r.livestream_events&&s.jsx("p",{className:"text-gray-400",children:r.livestream_events.title}),r.description&&s.jsx("p",{className:"text-gray-300 mt-4",children:r.description})]}),_&&s.jsx("div",{className:"mb-6 p-4 bg-yellow-500/20 border border-yellow-500/50 rounded-lg text-yellow-300",children:"Checkout was cancelled. Your selection is still saved."}),s.jsxs("div",{className:"mb-6 space-y-3",children:[s.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[s.jsxs("div",{className:"bg-dark-800 px-4 py-2 rounded-lg",children:[s.jsx("span",{className:"text-gray-400",children:"Per Photo:"}),s.jsxs("span",{className:"text-white ml-2 font-semibold",children:["$",(r.price_per_photo/100).toFixed(2)]})]}),r.package_enabled&&r.package_price&&s.jsxs("div",{className:"bg-dark-800 px-4 py-2 rounded-lg",children:[s.jsx("span",{className:"text-gray-400",children:"All Photos:"}),s.jsxs("span",{className:"text-green-400 ml-2 font-semibold",children:["$",(r.package_price/100).toFixed(2)]}),s.jsxs("span",{className:"text-gray-500 ml-1",children:["(save $",((i.length*r.price_per_photo-r.package_price)/100).toFixed(2),")"]})]})]}),r.tiered_pricing_enabled&&r.pricing_tiers?.length>0&&s.jsxs("div",{className:"bg-gradient-to-r from-green-500/10 to-green-500/5 border border-green-500/30 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 text-green-400 font-semibold mb-3",children:[s.jsx(fR,{className:"w-4 h-4"}),"Volume Discounts"]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2 text-sm",children:r.pricing_tiers.map((G,q)=>s.jsxs("div",{className:"bg-dark-800/50 rounded px-3 py-2",children:[s.jsxs("span",{className:"text-gray-400",children:[G.max_qty?`${G.min_qty}-${G.max_qty}`:`${G.min_qty}+`," photos:"]}),s.jsxs("span",{className:"text-white ml-2 font-semibold",children:["$",(G.price_per_photo/100).toFixed(2)," each"]})]},q))})]})]}),s.jsxs("div",{className:"mb-6 flex flex-wrap items-center gap-4",children:[s.jsxs("button",{onClick:C,className:"text-sm text-gray-400 hover:text-white",children:["Select All (",i.length,")"]}),o.size>0&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:I,className:"text-sm text-gray-400 hover:text-white",children:"Clear Selection"}),s.jsxs("span",{className:"text-white",children:[o.size," selected  $",(D.total/100).toFixed(2),D.savings>0&&s.jsxs("span",{className:"text-green-400 ml-2",children:["(saving $",(D.savings/100).toFixed(2),")"]})]})]})]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-2 md:gap-4 mb-24 md:mb-8",children:i.map(G=>s.jsxs("div",{className:`relative group cursor-pointer rounded-lg overflow-hidden transition-transform active:scale-98 ${o.has(G.id)?"ring-2 ring-red-500":""}`,onClick:()=>w(G),children:[s.jsx("img",{src:G.thumbnail_url||G.watermarked_url,alt:G.filename,className:"w-full aspect-square object-cover",loading:"lazy"}),s.jsx("div",{className:`absolute top-2 right-2 w-7 h-7 rounded-full flex items-center justify-center transition-all ${o.has(G.id)?"bg-red-500 text-white":"bg-black/40 text-white md:opacity-0 md:group-hover:opacity-100"}`,children:o.has(G.id)?s.jsx(la,{className:"w-4 h-4"}):s.jsx(jf,{className:"w-4 h-4"})}),s.jsx("button",{onClick:q=>{q.stopPropagation(),N(G.id)},className:`absolute top-2 left-2 w-7 h-7 rounded-full flex items-center justify-center transition-all md:opacity-0 md:group-hover:opacity-100 ${o.has(G.id)?"bg-green-500 text-white":"bg-black/40 text-white"}`,children:s.jsx(n2,{className:"w-3.5 h-3.5"})}),s.jsxs("div",{className:"absolute bottom-2 left-2 bg-black/60 backdrop-blur-sm text-white px-2 py-1 rounded-full text-xs font-medium",children:["$",(G.price/100).toFixed(2)]})]},G.id))}),(o.size>0||r.package_enabled)&&s.jsxs("div",{className:"fixed bottom-0 left-0 right-0 md:bottom-4 md:left-auto md:right-8 md:w-96 z-40",children:[s.jsxs("div",{className:"md:hidden bg-dark-900/95 backdrop-blur-lg border-t border-dark-700 px-4 py-3 safe-area-pb",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"flex items-center gap-2 bg-dark-700 rounded-full px-3 py-1.5",children:[s.jsx(n2,{className:"w-4 h-4 text-red-500"}),s.jsx("span",{className:"text-white font-semibold text-sm",children:o.size})]}),s.jsxs("div",{className:"flex-1 text-right",children:[D.savings>0&&s.jsxs("span",{className:"text-gray-500 text-xs line-through mr-2",children:["$",(D.flatTotal/100).toFixed(2)]}),s.jsxs("span",{className:"text-white font-bold",children:["$",(D.total/100).toFixed(2)]})]}),s.jsx("button",{onClick:()=>p(!0),disabled:o.size===0,className:"bg-red-500 hover:bg-red-600 disabled:bg-gray-600 text-white font-semibold px-5 py-2 rounded-full transition-all active:scale-95",children:"Checkout"})]}),r.package_enabled&&r.package_price&&s.jsxs("button",{onClick:()=>{C(),p(!0)},className:"w-full mt-2 bg-green-600/20 border border-green-500/50 text-green-400 font-semibold py-2 rounded-full text-sm transition-all active:scale-98",children:["Buy All ",i.length," Photos - $",(r.package_price/100).toFixed(2)]})]}),s.jsxs("div",{className:"hidden md:block bg-dark-800 rounded-xl shadow-2xl p-4 border border-dark-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(n2,{className:"w-5 h-5 text-red-500"}),s.jsxs("span",{className:"text-white font-semibold",children:[o.size," photos selected"]})]}),s.jsxs("span",{className:"text-white font-bold",children:["$",(D.total/100).toFixed(2)]})]}),D.savings>0&&s.jsxs("div",{className:"flex items-center justify-between mb-3 text-sm",children:[s.jsx("span",{className:"text-gray-400",children:s.jsxs("span",{className:"line-through",children:["$",(D.flatTotal/100).toFixed(2)]})}),s.jsxs("span",{className:"text-green-400 font-semibold",children:["Volume discount: -$",(D.savings/100).toFixed(2)]})]}),s.jsx("button",{onClick:()=>p(!0),disabled:o.size===0,className:"w-full bg-red-500 hover:bg-red-600 disabled:bg-gray-600 disabled:cursor-not-allowed text-white font-semibold py-3 rounded-lg transition-colors",children:"Checkout"}),r.package_enabled&&r.package_price&&s.jsxs("button",{onClick:()=>{C(),p(!0)},className:"w-full mt-2 bg-green-600 hover:bg-green-700 text-white font-semibold py-3 rounded-lg transition-colors",children:["Buy All Photos - $",(r.package_price/100).toFixed(2)]})]})]}),m&&s.jsx(BXe,{gallery:r,selectedCount:o.size,priceCalc:D,isPackage:o.size===i.length&&r.package_enabled,packagePrice:r.package_price,onClose:()=>p(!1),onCheckout:U,purchasing:g,error:d}),x&&s.jsx(PXe,{photos:i,currentPhoto:x,selectedPhotos:o,onClose:()=>w(null),onNavigate:w,onToggleSelect:N,pricePerPhoto:r.price_per_photo})]})})}function BXe({gallery:t,selectedCount:e,priceCalc:r,isPackage:n,packagePrice:i,onClose:a,onCheckout:o,purchasing:c,error:u}){const[l,d]=T.useState(""),[f,m]=T.useState(""),p=n&&i?i:r.total,g=y=>{y.preventDefault(),o(l,f,n&&i)};return s.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-dark-800 rounded-xl max-w-md w-full p-6",children:[s.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Complete Purchase"}),s.jsxs("div",{className:"mb-6 p-4 bg-dark-700 rounded-lg",children:[s.jsxs("div",{className:"flex justify-between text-gray-300 mb-2",children:[s.jsxs("span",{children:[e," photos"]}),s.jsxs("span",{children:["$",(r.flatTotal/100).toFixed(2)]})]}),r.savings>0&&!n&&s.jsxs("div",{className:"flex justify-between text-green-400 mb-2",children:[s.jsx("span",{children:"Volume Discount"}),s.jsxs("span",{children:["-$",(r.savings/100).toFixed(2)]})]}),n&&i&&r.flatTotal>i&&s.jsxs("div",{className:"flex justify-between text-green-400 mb-2",children:[s.jsx("span",{children:"Package Discount"}),s.jsxs("span",{children:["-$",((r.flatTotal-i)/100).toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between text-white font-bold mt-2 pt-2 border-t border-dark-600",children:[s.jsx("span",{children:"Total"}),s.jsxs("span",{children:["$",(p/100).toFixed(2)," AUD"]})]})]}),s.jsxs("form",{onSubmit:g,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-gray-400 mb-1",children:"Email *"}),s.jsx("input",{type:"email",value:l,onChange:y=>d(y.target.value),className:"w-full bg-dark-700 text-white rounded-lg px-4 py-3 border border-dark-600 focus:border-red-500 focus:outline-none",placeholder:"your@email.com",required:!0}),s.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"Download link will be sent here"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-gray-400 mb-1",children:"Name (optional)"}),s.jsx("input",{type:"text",value:f,onChange:y=>m(y.target.value),className:"w-full bg-dark-700 text-white rounded-lg px-4 py-3 border border-dark-600 focus:border-red-500 focus:outline-none",placeholder:"Your name"})]}),u&&s.jsx("div",{className:"p-3 bg-red-500/20 border border-red-500/50 rounded-lg text-red-300 text-sm",children:u}),s.jsxs("div",{className:"flex gap-3 pt-2",children:[s.jsx("button",{type:"button",onClick:a,className:"flex-1 bg-dark-600 hover:bg-dark-500 text-white py-3 rounded-lg transition-colors",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:c||!l,className:"flex-1 bg-red-500 hover:bg-red-600 disabled:bg-gray-600 text-white py-3 rounded-lg transition-colors flex items-center justify-center gap-2",children:c?s.jsxs(s.Fragment,{children:[s.jsx(QA,{className:"w-4 h-4 animate-spin"}),"Processing..."]}):s.jsxs(s.Fragment,{children:["Pay $",(p/100).toFixed(2)]})})]})]})]})})}function PXe({photos:t,currentPhoto:e,selectedPhotos:r,onClose:n,onNavigate:i,onToggleSelect:a,pricePerPhoto:o}){const c=t.findIndex(at=>at.id===e.id),u=r.has(e.id),[l,d]=T.useState(null),[f,m]=T.useState(null),[p,g]=T.useState(null),[y,x]=T.useState(null),[w,_]=T.useState(0),[E,N]=T.useState(!1),C=80,[I,D]=T.useState(!1),[U,G]=T.useState(null),[q,J]=T.useState(null),[de,xe]=T.useState(0),[we,ve]=T.useState(!1),[ne,ae]=T.useState({x:0,y:0}),oe=Math.min(Math.abs(w)/150,1),Ie=1-oe*.1,Ce=1-oe*.3,be=w/300*3;T.useEffect(()=>{const at=window.scrollY;return document.body.style.position="fixed",document.body.style.top=`-${at}px`,document.body.style.left="0",document.body.style.right="0",document.body.style.overflow="hidden",()=>{document.body.style.position="",document.body.style.top="",document.body.style.left="",document.body.style.right="",document.body.style.overflow="",window.scrollTo(0,at)}},[]);const ue=T.useCallback(()=>{c<t.length-1&&!I&&(D(!0),G("up"),setTimeout(()=>{i(t[c+1]),J("up"),setTimeout(()=>{D(!1),G(null),J(null)},300)},150))},[c,t,i,I]),Pe=T.useCallback(()=>{c>0&&!I&&(D(!0),G("down"),setTimeout(()=>{i(t[c-1]),J("down"),setTimeout(()=>{D(!1),G(null),J(null)},300)},150))},[c,t,i,I]);T.useEffect(()=>{const at=De=>{switch(De.key){case"ArrowRight":case"ArrowDown":De.preventDefault(),ue();break;case"ArrowLeft":case"ArrowUp":De.preventDefault(),Pe();break;case"Escape":n();break;case" ":case"Enter":De.preventDefault(),a(e.id);break}};return window.addEventListener("keydown",at),()=>window.removeEventListener("keydown",at)},[ue,Pe,n,a,e.id]);const Re=at=>{at.preventDefault(),m(null),x(null),d(at.targetTouches[0].clientY),g(at.targetTouches[0].clientX),N(!0)},He=at=>{if(at.preventDefault(),!l)return;const De=at.targetTouches[0].clientY,ut=at.targetTouches[0].clientX;m(De),x(ut);const et=De-l,Ue=Math.abs(ut-p);Math.abs(et)>Ue&&_(et*.3)},Fe=()=>{if(N(!1),_(0),!l||!f)return;const at=l-f,De=p&&y?Math.abs(p-y):0;Math.abs(at)>De&&Math.abs(at)>C&&(at>0?ue():Pe()),d(null),g(null)},ft=at=>{const De=Date.now();if(De-de<300){const et=at.currentTarget.getBoundingClientRect(),Ue=at.clientX||at.touches&&at.touches[0]?.clientX||et.width/2,jt=at.clientY||at.touches&&at.touches[0]?.clientY||et.height/2;ae({x:Ue-et.left,y:jt-et.top}),ve(!0),r.has(e.id)||a(e.id),setTimeout(()=>ve(!1),800)}xe(De)};return T.useEffect(()=>{if(c>0){const at=new Image;at.src=t[c-1].watermarked_url}if(c<t.length-1){const at=new Image;at.src=t[c+1].watermarked_url}},[c,t]),s.jsxs("div",{className:"fixed inset-0 bg-black z-50 flex flex-col overflow-hidden",style:{touchAction:"none"},children:[s.jsxs("div",{className:"absolute top-0 left-0 right-0 z-20 flex items-center justify-between p-4 bg-gradient-to-b from-black/70 to-transparent",children:[s.jsxs("div",{className:"text-white/80 font-medium text-sm bg-black/30 px-3 py-1 rounded-full backdrop-blur-sm",children:[c+1," / ",t.length]}),s.jsx("button",{onClick:n,className:"text-white bg-black/30 hover:bg-black/50 p-2 rounded-full backdrop-blur-sm transition-colors",children:s.jsx(tg,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"flex-1 relative flex items-center justify-center overflow-hidden",onTouchStart:Re,onTouchMove:He,onTouchEnd:Fe,onClick:ft,style:{touchAction:"none"},children:[s.jsx("img",{src:e.watermarked_url,alt:e.filename,className:"max-w-full max-h-full object-contain select-none",draggable:!1,style:{transform:`
              translateY(${E?w:0}px) 
              scale(${E?Ie:I?.95:1}) 
              rotate(${E?be:0}deg)
              ${U==="up"?"translateY(-100px)":""}
              ${U==="down"?"translateY(100px)":""}
              ${q==="up"?"translateY(0)":""}
              ${q==="down"?"translateY(0)":""}
            `,opacity:E?Ce:U?0:1,transition:E?"none":"transform 0.35s cubic-bezier(0.34, 1.56, 0.64, 1), opacity 0.25s ease-out",willChange:"transform, opacity"}}),we&&s.jsx("div",{className:"absolute pointer-events-none",style:{left:ne.x,top:ne.y,transform:"translate(-50%, -50%)"},children:s.jsx(P8,{className:"w-24 h-24 text-red-500 fill-red-500 animate-heart-burst",style:{animation:"heartBurst 0.8s ease-out forwards"}})}),c>0&&s.jsx("button",{onClick:at=>{at.stopPropagation(),Pe()},className:"hidden md:flex absolute left-4 top-1/2 -translate-y-1/2 z-10 bg-black/40 hover:bg-black/60 text-white p-3 rounded-full transition-all opacity-50 hover:opacity-100",children:s.jsx(LT,{className:"w-6 h-6"})}),c<t.length-1&&s.jsx("button",{onClick:at=>{at.stopPropagation(),ue()},className:"hidden md:flex absolute right-4 top-1/2 -translate-y-1/2 z-10 bg-black/40 hover:bg-black/60 text-white p-3 rounded-full transition-all opacity-50 hover:opacity-100",children:s.jsx(U0,{className:"w-6 h-6"})}),s.jsxs("div",{className:"md:hidden absolute bottom-24 left-1/2 -translate-x-1/2 flex flex-col items-center text-white/40 text-xs pointer-events-none animate-fade-out",children:[s.jsx(Db,{className:"w-5 h-5 animate-bounce"}),s.jsx("span",{children:"Swipe to browse"})]})]}),s.jsxs("div",{className:"md:hidden absolute right-3 bottom-32 flex flex-col items-center gap-5 z-20",children:[s.jsxs("button",{onClick:()=>a(e.id),className:"flex flex-col items-center gap-1",children:[s.jsx("div",{className:`p-3 rounded-full transition-all ${u?"bg-red-500 text-white scale-110":"bg-black/40 text-white backdrop-blur-sm"}`,children:u?s.jsx(la,{className:"w-6 h-6"}):s.jsx(n2,{className:"w-6 h-6"})}),s.jsx("span",{className:"text-white text-xs font-medium",children:u?"Added":"Add"})]}),s.jsxs("div",{className:"flex flex-col items-center gap-1",children:[s.jsx("div",{className:`p-3 rounded-full transition-all ${u?"bg-black/40 text-red-500 backdrop-blur-sm":"bg-black/40 text-white/50 backdrop-blur-sm"}`,children:s.jsx(P8,{className:`w-6 h-6 ${u?"fill-red-500":""}`})}),s.jsxs("span",{className:"text-white/70 text-xs",children:["$",(o/100).toFixed(0)]})]})]}),s.jsxs("div",{className:"hidden md:flex p-4 bg-gradient-to-t from-black/70 to-transparent items-center justify-between absolute bottom-0 left-0 right-0",children:[s.jsx("div",{className:"text-gray-400 text-sm truncate max-w-[50%]",children:e.filename}),s.jsx("button",{onClick:()=>a(e.id),className:`flex items-center gap-2 px-5 py-2.5 rounded-full font-semibold transition-all ${u?"bg-green-500 hover:bg-green-600 text-white":"bg-red-500 hover:bg-red-600 text-white"}`,children:u?s.jsxs(s.Fragment,{children:[s.jsx(la,{className:"w-5 h-5"}),"In Cart"]}):s.jsxs(s.Fragment,{children:[s.jsx(jf,{className:"w-5 h-5"}),"Add $",(o/100).toFixed(2)]})})]}),s.jsxs("div",{className:"hidden md:flex absolute bottom-16 left-1/2 -translate-x-1/2 text-gray-500 text-xs gap-4",children:[s.jsx("span",{children:"  Navigate"}),s.jsx("span",{children:"Space: Add to cart"}),s.jsx("span",{children:"Esc: Close"})]}),s.jsx("div",{className:"md:hidden absolute bottom-20 left-1/2 -translate-x-1/2 text-white/30 text-xs text-center pointer-events-none",children:"Double-tap to add to cart"}),E&&Math.abs(w)>30&&s.jsx("div",{className:"absolute inset-x-0 flex justify-center pointer-events-none z-30",style:{top:w<0?"20%":"auto",bottom:w>0?"20%":"auto"},children:s.jsxs("div",{className:"flex flex-col items-center gap-2 text-white/60",children:[w<0&&c<t.length-1&&s.jsxs(s.Fragment,{children:[s.jsx(Db,{className:"w-8 h-8 animate-bounce"}),s.jsx("span",{className:"text-sm font-medium",children:"Next Photo"})]}),w>0&&c>0&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-sm font-medium",children:"Previous Photo"}),s.jsx(F0,{className:"w-8 h-8 animate-bounce"})]})]})}),s.jsx("style",{children:`
        @keyframes heartBurst {
          0% {
            transform: translate(-50%, -50%) scale(0);
            opacity: 1;
          }
          50% {
            transform: translate(-50%, -50%) scale(1.2);
            opacity: 1;
          }
          100% {
            transform: translate(-50%, -50%) scale(1);
            opacity: 0;
          }
        }
        @keyframes fadeOut {
          0% { opacity: 1; }
          70% { opacity: 1; }
          100% { opacity: 0; }
        }
        .animate-fade-out {
          animation: fadeOut 3s ease-out forwards;
        }
        .safe-area-pb {
          padding-bottom: max(12px, env(safe-area-inset-bottom));
        }
      `})]})}function OXe(){const{token:t}=Kh(),[e,r]=T.useState(null),[n,i]=T.useState(!0),[a,o]=T.useState(null),[c,u]=T.useState(null),[l,d]=T.useState(new Set);T.useEffect(()=>{f()},[t]);const f=async()=>{try{const _=await fetch(`https://gonalgubgldgpkcekaxe.supabase.co/functions/v1/gallery_download?token=${t}`),E=await _.json();if(!_.ok)throw new Error(E.error||"Failed to load order");r(E.order);const N=new Set;E.order.gallery_order_items?.forEach(C=>{C.downloaded&&N.add(C.photo_id)}),d(N)}catch(_){console.error("Load order error:",_),o(_.message)}finally{i(!1)}},m=async(_,E)=>{u(_);try{const N=await fetch(`https://gonalgubgldgpkcekaxe.supabase.co/functions/v1/gallery_download?token=${t}&photo_id=${_}`),C=await N.json();if(!N.ok)throw new Error(C.error||"Download failed");const I=document.createElement("a");I.href=C.download_url,I.download=E,document.body.appendChild(I),I.click(),document.body.removeChild(I),d(D=>new Set([...D,_]))}catch(N){console.error("Download error:",N),alert("Download failed: "+N.message)}finally{u(null)}},p=async()=>{const _=e.gallery_order_items||[];for(const E of _)l.has(E.photo_id)||(await m(E.photo_id,E.gallery_photos?.filename||`photo-${E.photo_id}.jpg`),await new Promise(N=>setTimeout(N,500)))};if(n)return s.jsx("div",{className:"min-h-[60vh] flex items-center justify-center",children:s.jsx(QA,{className:"w-8 h-8 text-red-500 animate-spin"})});if(a)return s.jsx("div",{className:"min-h-[60vh] flex items-center justify-center p-4",children:s.jsxs("div",{className:"text-center max-w-md",children:[s.jsx(PT,{className:"w-16 h-16 text-yellow-500 mx-auto mb-4"}),s.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:a==="Download link has expired"?"Link Expired":"Access Denied"}),s.jsx("p",{className:"text-gray-400 mb-4",children:a}),a==="Download link has expired"&&s.jsx("p",{className:"text-gray-500 text-sm",children:"Download links expire after 7 days. Please contact us if you need a new link."})]})});const g=e.gallery_order_items||[],y=g.every(_=>l.has(_.photo_id)),x=new Date(e.token_expires_at),w=Math.ceil((x-new Date)/(1e3*60*60*24));return s.jsx("div",{className:"py-8 px-4",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"w-16 h-16 bg-green-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(la,{className:"w-8 h-8 text-green-500"})}),s.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Your Photos Are Ready!"}),s.jsxs("p",{className:"text-gray-400",children:["Thank you for your purchase from ",e.galleries?.title]})]}),s.jsxs("div",{className:"mb-6 p-4 bg-dark-800 rounded-lg flex items-center gap-3",children:[s.jsx(zh,{className:"w-5 h-5 text-yellow-500"}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-300",children:"Downloads available for "}),s.jsxs("span",{className:"text-white font-semibold",children:[w," more days"]}),s.jsxs("span",{className:"text-gray-500 text-sm ml-2",children:["(expires ",x.toLocaleDateString(),")"]})]})]}),g.length>1&&!y&&s.jsxs("button",{onClick:p,disabled:c,className:"w-full mb-6 bg-red-500 hover:bg-red-600 disabled:bg-gray-600 text-white font-semibold py-4 rounded-lg transition-colors flex items-center justify-center gap-2",children:[s.jsx(yf,{className:"w-5 h-5"}),"Download All (",g.length," photos)"]}),s.jsx("div",{className:"space-y-4",children:g.map(_=>{const E=_.gallery_photos,N=l.has(_.photo_id),C=c===_.photo_id;return s.jsxs("div",{className:"bg-dark-800 rounded-lg p-4 flex items-center gap-4",children:[s.jsx("div",{className:"w-20 h-20 bg-dark-700 rounded-lg overflow-hidden flex-shrink-0",children:E?s.jsx(tm,{className:"w-full h-full text-gray-600 p-4"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-500",children:"No preview"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"text-white font-medium truncate",children:E?.filename||`Photo ${_.photo_id}`}),E&&s.jsxs("p",{className:"text-gray-500 text-sm",children:[E.width,"  ",E.height]}),N&&_.download_count>0&&s.jsxs("p",{className:"text-gray-500 text-xs mt-1",children:["Downloaded ",_.download_count," time",_.download_count>1?"s":""]})]}),s.jsx("button",{onClick:()=>m(_.photo_id,E?.filename||`photo-${_.photo_id}.jpg`),disabled:C,className:`flex-shrink-0 px-4 py-2 rounded-lg flex items-center gap-2 transition-colors ${N?"bg-green-600/20 text-green-400 hover:bg-green-600/30":"bg-red-500 hover:bg-red-600 text-white"}`,children:C?s.jsxs(s.Fragment,{children:[s.jsx(QA,{className:"w-4 h-4 animate-spin"}),s.jsx("span",{children:"Downloading..."})]}):N?s.jsxs(s.Fragment,{children:[s.jsx(la,{className:"w-4 h-4"}),s.jsx("span",{children:"Download Again"})]}):s.jsxs(s.Fragment,{children:[s.jsx(yf,{className:"w-4 h-4"}),s.jsx("span",{children:"Download"})]})})]},_.id)})}),s.jsxs("div",{className:"mt-8 p-6 bg-dark-800 rounded-lg",children:[s.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Order Details"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-400",children:"Order ID:"}),s.jsx("span",{className:"text-white ml-2 font-mono",children:e.id.slice(0,8)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-400",children:"Email:"}),s.jsx("span",{className:"text-white ml-2",children:e.email})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-400",children:"Total Paid:"}),s.jsxs("span",{className:"text-white ml-2",children:["$",(e.total_amount/100).toFixed(2)," AUD"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-400",children:"Date:"}),s.jsx("span",{className:"text-white ml-2",children:new Date(e.completed_at||e.created_at).toLocaleDateString()})]})]})]}),s.jsx("div",{className:"mt-6 text-center text-gray-500 text-sm",children:s.jsx("p",{children:"Having trouble? Contact us at info@fitfocusmedia.com.au"})})]})})}function RXe(){const{pathname:t}=kf();return T.useEffect(()=>{window.scrollTo(0,0)},[t]),null}function Ah({children:t}){return s.jsxs("div",{className:"min-h-screen bg-dark-950 flex flex-col",children:[s.jsx(o0e,{}),s.jsx("main",{className:"flex-1",children:t}),s.jsx(l0e,{})]})}function DXe(){return s.jsxs(BRe,{children:[s.jsx(RXe,{}),s.jsxs(bue,{children:[s.jsx(ps,{path:"/",element:s.jsx(Ah,{children:s.jsx(A6e,{})})}),s.jsx(ps,{path:"/work-with-us",element:s.jsx(Ah,{children:s.jsx(d0e,{})})}),s.jsx(ps,{path:"/services",element:s.jsx(Ah,{children:s.jsx(f0e,{})})}),s.jsx(ps,{path:"/work",element:s.jsx(Ah,{children:s.jsx(A0e,{})})}),s.jsx(ps,{path:"/proposal",element:s.jsx(Ah,{children:s.jsx(yRe,{})})}),s.jsx(ps,{path:"/contact",element:s.jsx(Ah,{children:s.jsx(xRe,{})})}),s.jsx(ps,{path:"/book",element:s.jsx(Ah,{children:s.jsx(bRe,{})})}),s.jsx(ps,{path:"/calculator",element:s.jsx(Ah,{children:s.jsx(wRe,{})})}),s.jsx(ps,{path:"/order",element:s.jsx(Ah,{children:s.jsx(jRe,{})})}),s.jsx(ps,{path:"/content",element:s.jsx(Ah,{children:s.jsx(TRe,{})})}),s.jsx(ps,{path:"/order/:orgSlug",element:s.jsx(Ah,{children:s.jsx(kRe,{})})}),s.jsx(ps,{path:"/proposal/:orgSlug",element:s.jsx(Ah,{children:s.jsx(IRe,{})})}),s.jsx(ps,{path:"/privacy",element:s.jsx(Ah,{children:s.jsx(wXe,{})})}),s.jsx(ps,{path:"/terms",element:s.jsx(Ah,{children:s.jsx(_Xe,{})})}),s.jsx(ps,{path:"/live",element:s.jsx(jY,{to:"/",replace:!0})}),s.jsx(ps,{path:"/live/:eventId",element:s.jsx(Ah,{children:s.jsx(N6e,{})})}),s.jsx(ps,{path:"/watch/:eventId",element:s.jsx(xXe,{})}),s.jsx(ps,{path:"/my-purchases",element:s.jsx(bXe,{})}),s.jsx(ps,{path:"/contract/:shareToken",element:s.jsx(FRe,{})}),s.jsx(ps,{path:"/proposals/:slug",element:s.jsx(d6e,{})}),s.jsx(ps,{path:"/onboarding/:token",element:s.jsx(pDe,{})}),s.jsx(ps,{path:"/gallery/:slug",element:s.jsx(IXe,{})}),s.jsx(ps,{path:"/gallery/download/:token",element:s.jsx(OXe,{})}),s.jsx(ps,{path:"/portal",element:s.jsx(Bu,{children:s.jsx(PRe,{})})}),s.jsx(ps,{path:"/portal/contracts",element:s.jsx(du,{children:s.jsx(Bu,{children:s.jsx(DRe,{})})})}),s.jsx(ps,{path:"/portal/contracts/new",element:s.jsx(du,{children:s.jsx(Bu,{children:s.jsx(QV,{})})})}),s.jsx(ps,{path:"/portal/contracts/:id",element:s.jsx(du,{children:s.jsx(Bu,{children:s.jsx(MRe,{})})})}),s.jsx(ps,{path:"/portal/contracts/:id/edit",element:s.jsx(du,{children:s.jsx(Bu,{children:s.jsx(QV,{editMode:!0})})})}),s.jsx(ps,{path:"/portal/onboarding",element:s.jsx(du,{children:s.jsx(Bu,{children:s.jsx(lDe,{})})})}),s.jsx(ps,{path:"/portal/onboarding/new",element:s.jsx(du,{children:s.jsx(Bu,{children:s.jsx(cDe,{})})})}),s.jsx(ps,{path:"/portal/onboarding/:id",element:s.jsx(du,{children:s.jsx(Bu,{children:s.jsx(fDe,{})})})}),s.jsx(ps,{path:"/portal/pipeline",element:s.jsx(du,{children:s.jsx(Bu,{children:s.jsx(WRe,{})})})}),s.jsx(ps,{path:"/portal/pipeline/board",element:s.jsx(du,{children:s.jsx(ZRe,{})})}),s.jsx(ps,{path:"/portal/pipeline/leads/:id",element:s.jsx(du,{children:s.jsx(JRe,{})})}),s.jsx(ps,{path:"/portal/outreach",element:s.jsx(du,{children:s.jsx(Bu,{children:s.jsx(eDe,{})})})}),s.jsx(ps,{path:"/portal/content",element:s.jsx(du,{children:s.jsx(Bu,{children:s.jsx(UDe,{})})})}),s.jsx(ps,{path:"/portal/content-admin",element:s.jsx(du,{children:s.jsx(Bu,{children:s.jsx($De,{})})})}),s.jsx(ps,{path:"/portal/galleries",element:s.jsx(du,{children:s.jsx(Bu,{children:s.jsx(jXe,{})})})}),s.jsx(ps,{path:"/portal/orders",element:s.jsx(du,{children:s.jsx(Bu,{children:s.jsx(HDe,{})})})}),s.jsx(ps,{path:"/portal/pricing",element:s.jsx(du,{children:s.jsx(Bu,{children:s.jsx(VDe,{})})})}),s.jsx(ps,{path:"/portal/crews",element:s.jsx(du,{children:s.jsx(Bu,{children:s.jsx(CFe,{})})})}),s.jsx(ps,{path:"/portal/livestream",element:s.jsx(du,{children:s.jsx(Bu,{children:s.jsx(ZFe,{})})})}),s.jsx(ps,{path:"/portal/livestream/analytics",element:s.jsx(du,{children:s.jsx(Bu,{children:s.jsx(t6e,{})})})}),s.jsx(ps,{path:"/portal/proposals",element:s.jsx(du,{children:s.jsx(Bu,{children:s.jsx(s6e,{})})})}),s.jsx(ps,{path:"/athlete",element:s.jsx(wDe,{})}),s.jsx(ps,{path:"/athlete/register",element:s.jsx(PDe,{})}),s.jsx(ps,{path:"/athlete/packages",element:s.jsx(DDe,{})}),s.jsx(ps,{path:"/athlete/dashboard",element:s.jsx(MDe,{})}),s.jsx(ps,{path:"/athlete/events/:eventId",element:s.jsx(FDe,{})})]})]})}Ece.createRoot(document.getElementById("root")).render(s.jsx(So.StrictMode,{children:s.jsx(Kue,{children:s.jsx(DXe,{})})}));
