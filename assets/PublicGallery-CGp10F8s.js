import{c as le,s as X,j as e,C as Q,y as pe,z as ge}from"./index-Bz4mH0bH.js";import{f as fe,e as be,b as a}from"./vendor-react-q0iRXJvs.js";import{L as ne}from"./loader-circle-DwwP-_g1.js";import{T as we}from"./tag-BIidQuLl.js";import{P as ie}from"./plus-BEdYQM16.js";import{S as Z}from"./shopping-cart-Bi45dUAJ.js";import"./vendor-supabase-DhDedaeW.js";const ye=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],ae=le("heart",ye);const je=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],ve=le("layout-grid",je);function Ne(p,c,s){if(!c||!Array.isArray(c)||c.length===0)return{total:p*s,breakdown:[{qty:p,price:s,subtotal:p*s}],savings:0};const v=[...c].sort((d,x)=>d.min_qty-x.min_qty);let n=p,b=0;const r=[];for(const d of v){if(n<=0)break;const x=d.min_qty,y=d.max_qty||1/0,f=d.price_per_photo,g=y===1/0?n:y-x+1,N=Math.min(n,g);if(N>0){const w=N*f;b+=w,r.push({tier:`${x}-${y===1/0?"+":y}`,qty:N,price:f,subtotal:w}),n-=N}}if(n>0){const d=n*s;b+=d,r.push({tier:"standard",qty:n,price:s,subtotal:d})}const m=p*s,$=m-b;return{total:b,breakdown:r,savings:$,flatTotal:m}}function Ee(){const{slug:p}=fe(),[c]=be(),[s,v]=a.useState(null),[n,b]=a.useState([]),[r,m]=a.useState(new Set),[$,d]=a.useState(!0),[x,y]=a.useState(null),[f,g]=a.useState(!1),[N,w]=a.useState(!1),[I,Y]=a.useState(null),[U,O]=a.useState("All"),[P,R]=a.useState(["All"]),[k,z]=a.useState(0),[_,L]=a.useState(null),G=c.get("cancelled");a.useEffect(()=>{const t=window.innerWidth<768,i=localStorage.getItem("gallery_tutorial_seen");t&&!i&&n.length>0&&z(1)},[n]),a.useEffect(()=>{if(k===4&&_){const t=setTimeout(()=>{m(i=>{const S=new Set(i);return S.delete(_),S}),L(null),z(5)},1500);return()=>clearTimeout(t)}},[k,_]),a.useEffect(()=>{if(k===5){const t=setTimeout(()=>{z(0)},2500);return()=>clearTimeout(t)}},[k]),a.useEffect(()=>{B()},[p]);const B=async()=>{try{const{data:t,error:i}=await X.from("galleries").select(`
          id, title, description, slug, price_per_photo, package_price, package_enabled,
          pricing_tiers, tiered_pricing_enabled,
          organizations(id, name, display_name)
        `).eq("slug",p).eq("status","published").single();if(i)throw i;v(t);const{data:S,error:u}=await X.from("gallery_photos").select("id, filename, width, height, price, sort_order, watermarked_path, thumbnail_path").eq("gallery_id",t.id).order("sort_order",{ascending:!0});if(u)throw u;const F=await Promise.all(S.map(async h=>{const{data:A}=await X.storage.from("galleries").createSignedUrl(h.watermarked_path,3600);return{...h,watermarked_url:A?.signedUrl,thumbnail_url:A?.signedUrl,price:h.price||t.price_per_photo}}));b(F);const C=["All",...new Set(S.map(h=>h.category||"Main").filter(h=>h&&h!=="All"))];R(C)}catch(t){console.error("Load gallery error:",t),y("Gallery not found")}finally{d(!1)}},q=t=>{const i=new Set(r);i.has(t)?i.delete(t):i.add(t),m(i)},M=()=>{m(new Set(n.map(t=>t.id)))},V=()=>{m(new Set)},j=a.useMemo(()=>{const t=r.size;if(t===0||!s)return{total:0,savings:0,breakdown:[],flatTotal:0};if(s.tiered_pricing_enabled&&s.pricing_tiers?.length>0)return Ne(t,s.pricing_tiers,s.price_per_photo);const i=t*s.price_per_photo;return{total:i,savings:0,breakdown:[],flatTotal:i}},[r.size,s]),W=async(t,i,S=!1)=>{w(!0),y(null);try{const u=await fetch("https://gonalgubgldgpkcekaxe.supabase.co/functions/v1/gallery_checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({gallery_slug:p,email:t,customer_name:i,photo_ids:S?[]:Array.from(r),is_package:S})}),F=await u.json();if(!u.ok)throw new Error(F.error||"Checkout failed");F.checkout_url&&(window.location.href=F.checkout_url)}catch(u){console.error("Checkout error:",u),y(u.message)}finally{w(!1)}};return $?e.jsx("div",{className:"min-h-[60vh] flex items-center justify-center",children:e.jsx(ne,{className:"w-8 h-8 text-red-500 animate-spin"})}):x&&!s?e.jsx("div",{className:"min-h-[60vh] flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Gallery Not Found"}),e.jsx("p",{className:"text-gray-400",children:x})]})}):e.jsx("div",{className:"py-8 px-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:s.title}),s.livestream_events&&e.jsx("p",{className:"text-gray-400",children:s.livestream_events.title}),s.description&&e.jsx("p",{className:"text-gray-300 mt-4",children:s.description})]}),G&&e.jsx("div",{className:"mb-6 p-4 bg-yellow-500/20 border border-yellow-500/50 rounded-lg text-yellow-300",children:"Checkout was cancelled. Your selection is still saved."}),e.jsxs("div",{className:"mb-6 space-y-3",children:[e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[e.jsxs("div",{className:"bg-dark-800 px-4 py-2 rounded-lg",children:[e.jsx("span",{className:"text-gray-400",children:"Per Photo:"}),e.jsxs("span",{className:"text-white ml-2 font-semibold",children:["$",(s.price_per_photo/100).toFixed(2)]})]}),s.package_enabled&&s.package_price&&e.jsxs("div",{className:"bg-dark-800 px-4 py-2 rounded-lg",children:[e.jsx("span",{className:"text-gray-400",children:"All Photos:"}),e.jsxs("span",{className:"text-green-400 ml-2 font-semibold",children:["$",(s.package_price/100).toFixed(2)]}),e.jsxs("span",{className:"text-gray-500 ml-1",children:["(save $",((n.length*s.price_per_photo-s.package_price)/100).toFixed(2),")"]})]})]}),s.tiered_pricing_enabled&&s.pricing_tiers?.length>0&&e.jsxs("div",{className:"bg-gradient-to-r from-green-500/10 to-green-500/5 border border-green-500/30 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-green-400 font-semibold mb-3",children:[e.jsx(we,{className:"w-4 h-4"}),"Volume Discounts"]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2 text-sm",children:s.pricing_tiers.map((t,i)=>e.jsxs("div",{className:"bg-dark-800/50 rounded px-3 py-2",children:[e.jsxs("span",{className:"text-gray-400",children:[t.max_qty?`${t.min_qty}-${t.max_qty}`:`${t.min_qty}+`," photos:"]}),e.jsxs("span",{className:"text-white ml-2 font-semibold",children:["$",(t.price_per_photo/100).toFixed(2)," each"]})]},i))})]})]}),e.jsxs("div",{className:"mb-6 flex flex-wrap items-center gap-4",children:[e.jsxs("button",{onClick:M,className:"text-sm text-gray-400 hover:text-white",children:["Select All (",n.length,")"]}),r.size>0&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:V,className:"text-sm text-gray-400 hover:text-white",children:"Clear Selection"}),e.jsxs("span",{className:"text-white",children:[r.size," selected ¬∑ $",(j.total/100).toFixed(2),j.savings>0&&e.jsxs("span",{className:"text-green-400 ml-2",children:["(saving $",(j.savings/100).toFixed(2),")"]})]})]})]}),P.length>1&&e.jsx("div",{className:"mb-4 md:mb-6 flex gap-2 overflow-x-auto pb-2 scrollbar-hide",children:P.map(t=>e.jsxs("button",{onClick:()=>O(t),className:`px-3 md:px-4 py-2 rounded-lg text-sm md:text-base font-medium whitespace-nowrap transition-all ${U===t?"bg-red-500 text-white shadow-lg":"bg-white/10 text-gray-300 hover:bg-white/20"}`,children:[t,e.jsxs("span",{className:"ml-1.5 text-xs opacity-70",children:["(",t==="All"?n.length:n.filter(i=>(i.category||"Main")===t).length,")"]})]},t))}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-2 md:gap-4 mb-24 md:mb-8",children:n.filter(t=>U==="All"||(t.category||"Main")===U).map((t,i)=>e.jsxs("div",{className:`relative group cursor-pointer rounded-lg overflow-hidden transition-transform active:scale-98 ${r.has(t.id)?"ring-2 ring-red-500":""} ${k===1&&i===0?"ring-2 ring-white animate-pulse z-10":""}`,onClick:()=>{Y(t),k===1&&z(2)},children:[e.jsx("img",{src:t.thumbnail_url||t.watermarked_url,alt:t.filename,className:"w-full aspect-square object-cover",loading:"lazy"}),e.jsx("div",{className:`absolute top-2 right-2 w-7 h-7 rounded-full flex items-center justify-center transition-all ${r.has(t.id)?"bg-red-500 text-white":"bg-black/40 text-white md:opacity-0 md:group-hover:opacity-100"}`,children:r.has(t.id)?e.jsx(Q,{className:"w-4 h-4"}):e.jsx(ie,{className:"w-4 h-4"})}),e.jsx("button",{onClick:S=>{S.stopPropagation(),q(t.id)},className:`absolute bottom-2 left-2 px-3 py-1 rounded-full text-xs font-semibold transition-all md:opacity-0 md:group-hover:opacity-100 ${r.has(t.id)?"bg-green-500 text-white":"bg-black/60 backdrop-blur-sm text-white"}`,children:r.has(t.id)?"Added":"Add"})]},t.id))}),(r.size>0||s.package_enabled)&&e.jsxs("div",{className:"fixed bottom-0 left-0 right-0 md:bottom-4 md:left-auto md:right-8 md:w-96 z-40",children:[e.jsxs("div",{className:"md:hidden bg-dark-900/95 backdrop-blur-lg border-t border-dark-700 px-4 py-3 safe-area-pb",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 bg-dark-700 rounded-full px-3 py-1.5",children:[e.jsx(Z,{className:"w-4 h-4 text-red-500"}),e.jsx("span",{className:"text-white font-semibold text-sm",children:r.size})]}),e.jsxs("div",{className:"flex-1 text-right",children:[j.savings>0&&e.jsxs("span",{className:"text-gray-500 text-xs line-through mr-2",children:["$",(j.flatTotal/100).toFixed(2)]}),e.jsxs("span",{className:"text-white font-bold",children:["$",(j.total/100).toFixed(2)]})]}),e.jsx("button",{onClick:()=>g(!0),disabled:r.size===0,className:"bg-red-500 hover:bg-red-600 disabled:bg-gray-600 text-white font-semibold px-5 py-2 rounded-full transition-all active:scale-95",children:"Checkout"})]}),s.package_enabled&&s.package_price&&e.jsxs("button",{onClick:()=>{M(),g(!0)},className:"w-full mt-2 bg-green-600/20 border border-green-500/50 text-green-400 font-semibold py-2 rounded-full text-sm transition-all active:scale-98",children:["Buy All ",n.length," Photos - $",(s.package_price/100).toFixed(2)]})]}),e.jsxs("div",{className:"hidden md:block bg-dark-800 rounded-xl shadow-2xl p-4 border border-dark-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"w-5 h-5 text-red-500"}),e.jsxs("span",{className:"text-white font-semibold",children:[r.size," photos selected"]})]}),e.jsxs("span",{className:"text-white font-bold",children:["$",(j.total/100).toFixed(2)]})]}),j.savings>0&&e.jsxs("div",{className:"flex items-center justify-between mb-3 text-sm",children:[e.jsx("span",{className:"text-gray-400",children:e.jsxs("span",{className:"line-through",children:["$",(j.flatTotal/100).toFixed(2)]})}),e.jsxs("span",{className:"text-green-400 font-semibold",children:["Volume discount: -$",(j.savings/100).toFixed(2)]})]}),e.jsx("button",{onClick:()=>g(!0),disabled:r.size===0,className:"w-full bg-red-500 hover:bg-red-600 disabled:bg-gray-600 disabled:cursor-not-allowed text-white font-semibold py-3 rounded-lg transition-colors",children:"Checkout"}),s.package_enabled&&s.package_price&&e.jsxs("button",{onClick:()=>{M(),g(!0)},className:"w-full mt-2 bg-green-600 hover:bg-green-700 text-white font-semibold py-3 rounded-lg transition-colors",children:["Buy All Photos - $",(s.package_price/100).toFixed(2)]})]})]}),f&&e.jsx(ke,{gallery:s,selectedCount:r.size,priceCalc:j,isPackage:r.size===n.length&&s.package_enabled,packagePrice:s.package_price,onClose:()=>g(!1),onCheckout:W,purchasing:N,error:x}),k===1&&n.length>0&&e.jsx("div",{className:"fixed inset-0 bg-black/60 z-30 flex items-center justify-center pointer-events-none md:hidden",children:e.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-2xl p-6 mx-4 text-center animate-bounce-slow",children:[e.jsx("div",{className:"text-4xl mb-3",children:"üëÜ"}),e.jsx("p",{className:"text-white text-lg font-semibold",children:"Tap a photo to view"}),e.jsx("p",{className:"text-white/70 text-sm mt-1",children:"Open the fullscreen gallery"})]})}),I&&e.jsx(_e,{photos:n,currentPhoto:I,selectedPhotos:r,onClose:()=>{Y(null),k>0&&k<4&&z(0)},onNavigate:Y,onToggleSelect:q,pricePerPhoto:s.price_per_photo,tutorialStep:k,onTutorialStep:(t,i)=>{z(t),t===4&&i&&(localStorage.setItem("gallery_tutorial_seen","true"),L(i))}})]})})}function ke({gallery:p,selectedCount:c,priceCalc:s,isPackage:v,packagePrice:n,onClose:b,onCheckout:r,purchasing:m,error:$}){const[d,x]=a.useState(""),[y,f]=a.useState(""),g=v&&n?n:s.total,N=w=>{w.preventDefault(),r(d,y,v&&n)};return e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-dark-800 rounded-xl max-w-md w-full p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Complete Purchase"}),e.jsxs("div",{className:"mb-6 p-4 bg-dark-700 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between text-gray-300 mb-2",children:[e.jsxs("span",{children:[c," photos"]}),e.jsxs("span",{children:["$",(s.flatTotal/100).toFixed(2)]})]}),s.savings>0&&!v&&e.jsxs("div",{className:"flex justify-between text-green-400 mb-2",children:[e.jsx("span",{children:"Volume Discount"}),e.jsxs("span",{children:["-$",(s.savings/100).toFixed(2)]})]}),v&&n&&s.flatTotal>n&&e.jsxs("div",{className:"flex justify-between text-green-400 mb-2",children:[e.jsx("span",{children:"Package Discount"}),e.jsxs("span",{children:["-$",((s.flatTotal-n)/100).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-white font-bold mt-2 pt-2 border-t border-dark-600",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["$",(g/100).toFixed(2)," AUD"]})]})]}),e.jsxs("form",{onSubmit:N,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 mb-1",children:"Email *"}),e.jsx("input",{type:"email",value:d,onChange:w=>x(w.target.value),className:"w-full bg-dark-700 text-white rounded-lg px-4 py-3 border border-dark-600 focus:border-red-500 focus:outline-none",placeholder:"your@email.com",required:!0}),e.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"Download link will be sent here"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 mb-1",children:"Name (optional)"}),e.jsx("input",{type:"text",value:y,onChange:w=>f(w.target.value),className:"w-full bg-dark-700 text-white rounded-lg px-4 py-3 border border-dark-600 focus:border-red-500 focus:outline-none",placeholder:"Your name"})]}),$&&e.jsx("div",{className:"p-3 bg-red-500/20 border border-red-500/50 rounded-lg text-red-300 text-sm",children:$}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx("button",{type:"button",onClick:b,className:"flex-1 bg-dark-600 hover:bg-dark-500 text-white py-3 rounded-lg transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:m||!d,className:"flex-1 bg-red-500 hover:bg-red-600 disabled:bg-gray-600 text-white py-3 rounded-lg transition-colors flex items-center justify-center gap-2",children:m?e.jsxs(e.Fragment,{children:[e.jsx(ne,{className:"w-4 h-4 animate-spin"}),"Processing..."]}):e.jsxs(e.Fragment,{children:["Pay $",(g/100).toFixed(2)]})})]})]})]})})}function _e({photos:p,currentPhoto:c,selectedPhotos:s,onClose:v,onNavigate:n,onToggleSelect:b,pricePerPhoto:r,tutorialStep:m=0,onTutorialStep:$}){const d=p.findIndex(l=>l.id===c.id),x=s.has(c.id),y=a.useRef(null),[f,g]=a.useState(0),[N,w]=a.useState(!1),[I,Y]=a.useState(0),[U,O]=a.useState(0),[P,R]=a.useState(0),[k,z]=a.useState(0),[_,L]=a.useState(!1),[G,B]=a.useState(!1),[q,M]=a.useState(!1),[V,j]=a.useState(0),[W,t]=a.useState(!1),[i,S]=a.useState({x:0,y:0}),[u,F]=a.useState(window.innerHeight);a.useEffect(()=>{const l=()=>F(window.innerHeight);return window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[]);const C=d>0?p[d-1]:null,h=d<p.length-1?p[d+1]:null;a.useEffect(()=>{const l=window.scrollY;return document.body.style.position="fixed",document.body.style.top=`-${l}px`,document.body.style.left="0",document.body.style.right="0",document.body.style.overflow="hidden",()=>{document.body.style.position="",document.body.style.top="",document.body.style.left="",document.body.style.right="",document.body.style.overflow="",window.scrollTo(0,l)}},[]);const A=a.useCallback(l=>{const o=l===1?h:C;!o||_||(L(!0),g(l===-1?u:-u),setTimeout(()=>{n(o),g(0),L(!1)},280))},[h,C,u,n,_]),J=a.useCallback(()=>A(1),[A]),K=a.useCallback(()=>A(-1),[A]);a.useEffect(()=>{const l=o=>{_||(o.key==="ArrowDown"||o.key==="ArrowRight"?(o.preventDefault(),J()):o.key==="ArrowUp"||o.key==="ArrowLeft"?(o.preventDefault(),K()):o.key==="Escape"?v():(o.key===" "||o.key==="Enter")&&(o.preventDefault(),b(c.id)))};return window.addEventListener("keydown",l),()=>window.removeEventListener("keydown",l)},[J,K,v,b,c.id,_]);const re=l=>{if(_)return;const o=Date.now(),T=l.touches[0].clientY;Y(T),O(o),R(T),z(o),w(!0)},oe=l=>{if(!N||_)return;const o=Date.now(),T=l.touches[0].clientY,D=T-I;R(T),z(o);const H=.3;let E=D;D>0&&!C&&(E=D*H),D<0&&!h&&(E=D*H),g(E)},ce=l=>{if(!N||_)return;w(!1);const o=Date.now(),T=Math.max(o-k,1),E=((l.changedTouches?.[0]?.clientY??P)-P)/T,he=u*.15,ee=.5,ue=Math.abs(f)>he,te=E<-ee&&f<0,se=E>ee&&f>0;ue||te||se?(f<0||te)&&h&&f<=0?(m===2&&!G&&(B(!0),q&&$?.(3)),A(1)):(f>0||se)&&C&&f>=0?(m===2&&!q&&(M(!0),G&&$?.(3)),A(-1)):g(0):g(0)},de=l=>{if(_)return;const o=Date.now();if(o-V<300){const T=l.currentTarget.getBoundingClientRect(),D=l.clientX||T.width/2,H=l.clientY||T.height/2;S({x:D-T.left,y:H-T.top}),t(!0),s.has(c.id)||(b(c.id),m===3&&$?.(4,c.id)),setTimeout(()=>t(!1),800)}j(o)};a.useEffect(()=>{if(C){const l=new Image;l.src=C.watermarked_url}if(h){const l=new Image;l.src=h.watermarked_url}},[C,h]);const me=`translateY(${f}px)`,xe=N?"none":"transform 0.28s cubic-bezier(0.33, 1, 0.68, 1)";return e.jsxs("div",{ref:y,className:"fixed inset-0 bg-black z-50 overflow-hidden",style:{touchAction:"none"},onTouchStart:re,onTouchMove:oe,onTouchEnd:ce,onClick:de,children:[e.jsxs("div",{className:"absolute inset-0",style:{transform:me,transition:xe},children:[C&&e.jsx("div",{className:"absolute inset-x-0 flex items-center justify-center p-4 pt-16 pb-24",style:{height:u,top:-u},children:e.jsx("img",{src:C.watermarked_url,alt:"Previous",className:"max-w-full max-h-full object-contain",draggable:!1})}),e.jsx("div",{className:"absolute inset-x-0 flex items-center justify-center p-4 pt-16 pb-24",style:{height:u,top:0},children:e.jsx("img",{src:c.watermarked_url,alt:c.filename,className:"max-w-full max-h-full object-contain select-none",draggable:!1})}),h&&e.jsx("div",{className:"absolute inset-x-0 flex items-center justify-center p-4 pt-16 pb-24",style:{height:u,top:u},children:e.jsx("img",{src:h.watermarked_url,alt:"Next",className:"max-w-full max-h-full object-contain",draggable:!1})})]}),W&&e.jsx("div",{className:"absolute pointer-events-none z-50",style:{left:i.x,top:i.y,transform:"translate(-50%, -50%)"},children:e.jsx(ae,{className:"w-20 h-20 text-red-500 fill-red-500",style:{animation:"heartBurst 0.6s ease-out forwards"}})}),e.jsxs("div",{className:"absolute top-0 left-0 right-0 z-40 flex items-center justify-between p-4 bg-gradient-to-b from-black/70 to-transparent",children:[e.jsxs("div",{className:"text-white/90 font-medium text-sm bg-black/40 px-3 py-1.5 rounded-full backdrop-blur-sm",children:[d+1," / ",p.length]}),e.jsx("button",{onClick:v,className:"text-white bg-black/40 hover:bg-black/60 p-2.5 rounded-full backdrop-blur-sm transition-colors",children:e.jsx(ve,{className:"w-5 h-5"})})]}),C&&e.jsx("button",{onClick:l=>{l.stopPropagation(),K()},className:"hidden md:flex absolute left-4 top-1/2 -translate-y-1/2 z-40 bg-black/50 hover:bg-black/70 text-white p-3 rounded-full",children:e.jsx(pe,{className:"w-6 h-6"})}),h&&e.jsx("button",{onClick:l=>{l.stopPropagation(),J()},className:"hidden md:flex absolute right-4 top-1/2 -translate-y-1/2 z-40 bg-black/50 hover:bg-black/70 text-white p-3 rounded-full",children:e.jsx(ge,{className:"w-6 h-6"})}),e.jsxs("div",{className:"md:hidden absolute right-3 bottom-28 z-40 flex flex-col items-center gap-4",children:[e.jsxs("button",{onClick:l=>{l.stopPropagation(),b(c.id)},className:"flex flex-col items-center gap-1",children:[e.jsx("div",{className:`p-3 rounded-full transition-all shadow-lg ${x?"bg-red-500 text-white scale-110":"bg-black/60 text-white backdrop-blur-sm"}`,children:x?e.jsx(Q,{className:"w-6 h-6"}):e.jsx(Z,{className:"w-6 h-6"})}),e.jsx("span",{className:"text-white text-xs font-medium drop-shadow",children:x?"Added":"Add"})]}),e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[e.jsx("div",{className:`p-3 rounded-full shadow-lg ${x?"bg-black/60 text-red-500":"bg-black/60 text-white/70"} backdrop-blur-sm`,children:e.jsx(ae,{className:`w-6 h-6 ${x?"fill-red-500":""}`})}),e.jsx("span",{className:"text-white/80 text-xs font-medium drop-shadow",children:x?"Added":"Add"})]})]}),e.jsxs("div",{className:"hidden md:flex p-4 bg-gradient-to-t from-black/80 to-transparent items-center justify-between absolute bottom-0 left-0 right-0 z-40",children:[e.jsx("div",{className:"text-gray-300 text-sm truncate max-w-[50%]",children:c.filename}),e.jsx("button",{onClick:()=>b(c.id),className:`flex items-center gap-2 px-5 py-2.5 rounded-full font-semibold transition-all ${x?"bg-green-500 hover:bg-green-600 text-white":"bg-red-500 hover:bg-red-600 text-white"}`,children:x?e.jsxs(e.Fragment,{children:[e.jsx(Q,{className:"w-5 h-5"}),"In Cart"]}):e.jsxs(e.Fragment,{children:[e.jsx(ie,{className:"w-5 h-5"}),"Add $",(r/100).toFixed(2)]})})]}),e.jsxs("div",{className:"hidden md:flex absolute bottom-16 left-1/2 -translate-x-1/2 text-gray-500 text-xs gap-4 z-40",children:[e.jsx("span",{children:"‚Üë ‚Üì Navigate"}),e.jsx("span",{children:"Space: Add to cart"}),e.jsx("span",{children:"Esc: Close"})]}),m===0&&e.jsx("div",{className:"md:hidden absolute left-4 bottom-28 z-40 text-white/40 text-xs",children:"Double-tap to add"}),m===2&&e.jsx("div",{className:"md:hidden absolute inset-x-0 bottom-40 z-50 flex justify-center pointer-events-none",children:e.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-2xl p-5 mx-4 text-center",children:[e.jsx("div",{className:"text-4xl mb-2",children:"üëÜüëá"}),e.jsx("p",{className:"text-white text-lg font-semibold",children:"Swipe up or down"}),e.jsx("p",{className:"text-white/70 text-sm mt-1",children:"Browse through photos"})]})}),m===3&&e.jsx("div",{className:"md:hidden absolute inset-0 z-50 flex items-center justify-center pointer-events-none",children:e.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-2xl p-6 mx-4 text-center",children:[e.jsx("div",{className:"text-4xl mb-2 animate-double-tap",children:"‚òùÔ∏è"}),e.jsx("p",{className:"text-white text-lg font-semibold",children:"Double-tap to add to cart"}),e.jsx("p",{className:"text-white/70 text-sm mt-1",children:"Try it on this photo!"})]})}),m===4&&e.jsx("div",{className:"md:hidden absolute inset-0 z-50 flex items-center justify-center pointer-events-none",children:e.jsxs("div",{className:"bg-green-500/20 backdrop-blur-md rounded-2xl p-6 mx-4 text-center animate-pulse",children:[e.jsx("div",{className:"text-4xl mb-2",children:"‚úÖ"}),e.jsx("p",{className:"text-white text-lg font-semibold",children:"You're all set!"}),e.jsx("p",{className:"text-white/70 text-sm mt-1",children:"Swipe to browse, double-tap to add"})]})}),m===5&&e.jsx("div",{className:"md:hidden absolute top-14 right-14 z-50 pointer-events-none animate-fade-hint",children:e.jsx("div",{className:"bg-black/40 backdrop-blur-sm rounded-lg px-3 py-1.5",children:e.jsx("span",{className:"text-white/60 text-xs",children:"Grid view"})})}),e.jsx("style",{children:`
        @keyframes heartBurst {
          0% {
            transform: translate(-50%, -50%) scale(0);
            opacity: 1;
          }
          50% {
            transform: translate(-50%, -50%) scale(1.2);
            opacity: 1;
          }
          100% {
            transform: translate(-50%, -50%) scale(1);
            opacity: 0;
          }
        }
        @keyframes fadeOut {
          0% { opacity: 1; }
          70% { opacity: 1; }
          100% { opacity: 0; }
        }
        .animate-fade-out {
          animation: fadeOut 3s ease-out forwards;
        }
        .safe-area-pb {
          padding-bottom: max(12px, env(safe-area-inset-bottom));
        }
        @keyframes bounce-slow {
          0%, 100% { transform: translateY(0); }
          50% { transform: translateY(-10px); }
        }
        .animate-bounce-slow {
          animation: bounce-slow 2s ease-in-out infinite;
        }
        @keyframes double-tap {
          0%, 100% { transform: scale(1); }
          10% { transform: scale(0.85) translateY(5px); }
          20% { transform: scale(1); }
          30% { transform: scale(0.85) translateY(5px); }
          40% { transform: scale(1); }
        }
        .animate-double-tap {
          animation: double-tap 1.5s ease-in-out infinite;
        }
        @keyframes fade-hint {
          0% { opacity: 0; }
          15% { opacity: 1; }
          85% { opacity: 1; }
          100% { opacity: 0; }
        }
        .animate-fade-hint {
          animation: fade-hint 2.5s ease-in-out forwards;
        }
      `})]})}export{Ee as default};
