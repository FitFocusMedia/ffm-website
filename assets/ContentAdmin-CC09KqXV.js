import{s as i,j as e,h as ye}from"./index-Bz4mH0bH.js";import{b as o}from"./vendor-react-q0iRXJvs.js";import"./vendor-supabase-DhDedaeW.js";function Ne({event:f,organization:te,onBack:g,onEventUpdate:O}){const[C,oe]=o.useState("details"),[J,se]=o.useState(!0),[y,ae]=o.useState(f),[D,L]=o.useState([]),[z,me]=o.useState([]),[Q,ve]=o.useState([]),[N,E]=o.useState([]),[V,T]=o.useState(""),[re,R]=o.useState(!1),[_,le]=o.useState(""),[q,ie]=o.useState("all"),[v,xe]=o.useState("all"),[w,Y]=o.useState(!1),[r,m]=o.useState({}),[A,H]=o.useState(!1),[u,K]=o.useState(null),[B,G]=o.useState(!1),[P,ne]=o.useState(!1);o.useEffect(()=>{M()},[f.id]);async function M(){se(!0);const[s,a,n]=await Promise.all([i.from("content_orders").select("*, packages(name)").eq("event_id",f.id).order("created_at",{ascending:!1}),i.from("galleries").select("*, gallery_photos(count)").eq("event_id",f.id),i.from("event_athletes").select("*").eq("event_id",f.id).order("competition_time",{ascending:!0})]),c=await Promise.all((s.data||[]).map(async d=>{if(d.match_card_url&&!d.match_card_url.startsWith("http")){const{data:x}=await i.storage.from("match-cards").createSignedUrl(d.match_card_url,3600);return{...d,match_card_signed_url:x?.signedUrl}}return{...d,match_card_signed_url:d.match_card_url}}));L(c),me(a.data||[]),E(n.data||[]),await I(c,n.data||[]),se(!1)}async function I(s,a){const n=[];for(const c of s){const d=`${c.first_name||""} ${c.last_name||""}`.trim();if(!d)continue;a.some(h=>h.order_id===c.id||h.name?.toLowerCase()===d.toLowerCase())||n.push({event_id:f.id,name:d,email:c.email,order_id:c.id,package:c.packages?.name||"Photo Pack",status:"pending",mat:c.match_card_data?.mat||null,competition_time:c.match_card_data?.time||null,division:c.match_card_data?.division||null})}if(n.length>0){const{data:c,error:d}=await i.from("event_athletes").insert(n).select();!d&&c&&E(x=>[...x,...c])}}function ge(s){const a=s.trim().split(`
`).filter(c=>c.trim()),n=[];for(const c of a){const d=c.split("|").map(x=>x.trim());d.length>=1&&n.push({name:d[0]||"",division:d[1]||"",mat:d[2]||"",competition_time:d[3]||"",academy:d[4]||"",event_id:f.id,status:"pending",captured:!1})}return n}async function de(){const s=ge(V);if(s.length===0){alert("No valid athlete data found");return}const{error:a}=await i.from("event_athletes").insert(s);a?alert("Error importing athletes: "+a.message):(R(!1),T(""),M())}async function F(s,a){const{error:n}=await i.from("event_athletes").update({captured:!a,captured_at:a?null:new Date().toISOString()}).eq("id",s);n||E(c=>c.map(d=>d.id===s?{...d,captured:!a}:d))}async function k(s){if(!confirm("Delete this athlete?"))return;const{error:a}=await i.from("event_athletes").delete().eq("id",s);a||E(n=>n.filter(c=>c.id!==s))}async function he(){if(!confirm("Delete ALL athletes for this event? This cannot be undone."))return;const{error:s}=await i.from("event_athletes").delete().eq("event_id",f.id);s||E([])}async function pe(s){if(!(!s||!u)){G(!0);try{const a=s.name.split(".").pop(),n=`${u.id}-${Date.now()}.${a}`,{data:c,error:d}=await i.storage.from("match-cards").upload(n,s);if(d)throw d;const x=n,{error:h}=await i.from("content_orders").update({match_card_url:x}).eq("id",u.id);if(h)throw h;const{data:b}=await i.storage.from("match-cards").createSignedUrl(x,3600),p=b?.signedUrl;L($=>$.map(j=>j.id===u.id?{...j,match_card_url:x,match_card_signed_url:p}:j)),await X(p,u.id),H(!1),K(null)}catch(a){console.error("Upload error:",a),alert("Error uploading match card: "+a.message)}finally{G(!1)}}}async function X(s,a){ne(!0);try{const{data:n,error:c}=await i.functions.invoke("extract-match-card",{body:{imageUrl:s,orderId:a}});if(c){console.error("Extraction error:",c);return}const{error:d}=await i.from("content_orders").update({match_card_data:n}).eq("id",a);if(!d&&(L(x=>x.map(h=>h.id===a?{...h,match_card_data:n}:h)),n.mat||n.time||n.division)){const x=D.find(h=>h.id===a);x&&await S(x,n)}}catch(n){console.error("Extraction error:",n)}finally{ne(!1)}}async function Z(s){if(confirm("Remove this match card?"))try{s.match_card_url&&!s.match_card_url.startsWith("http")&&await i.storage.from("match-cards").remove([s.match_card_url]),await i.from("content_orders").update({match_card_url:null,match_card_data:null}).eq("id",s.id),L(a=>a.map(n=>n.id===s.id?{...n,match_card_url:null,match_card_signed_url:null,match_card_data:null}:n))}catch(a){console.error("Delete error:",a),alert("Error removing match card")}}async function S(s,a){const n=`${s.first_name||""} ${s.last_name||""}`.trim(),{data:c}=await i.from("event_athletes").select("id").eq("order_id",s.id).single(),{data:d}=await i.from("event_athletes").select("id").eq("event_id",f.id).ilike("name",n).single(),x=c||d,h={event_id:f.id,name:n,order_id:s.id,division:a.division||null,mat:a.mat||null,competition_time:a.time||null,email:s.email||null,package:s.packages?.name||null,status:"scheduled",captured:!1};if(x){const{error:b}=await i.from("event_athletes").update(h).eq("id",x.id);b||E(p=>p.map($=>$.id===x.id?{...$,...h}:$))}else{const{data:b,error:p}=await i.from("event_athletes").insert(h).select().single();!p&&b&&E($=>[...$,b])}}function ce(s){K(s),H(!0)}async function U(){const{error:s}=await i.from("events").update(r).eq("id",f.id);s?alert("Error saving: "+s.message):(ae({...y,...r}),Y(!1),O&&O())}const ue=N.filter(s=>{const a=!_||s.name?.toLowerCase().includes(_.toLowerCase())||s.academy?.toLowerCase().includes(_.toLowerCase())||s.division?.toLowerCase().includes(_.toLowerCase()),n=q==="all"||q==="captured"&&s.captured||q==="pending"&&!s.captured||q==="paid"&&D.some(d=>`${d.first_name} ${d.last_name}`.toLowerCase()===s.name?.toLowerCase()||d.email?.toLowerCase()===s.email?.toLowerCase()),c=v==="all"||s.mat===v;return a&&n&&c}),ee=[...new Set(N.map(s=>s.mat).filter(Boolean))],W=new Set(D.map(s=>`${s.first_name||""} ${s.last_name||""}`.toLowerCase().trim()).filter(Boolean)),t=N.filter(s=>W.has(s.name?.toLowerCase())&&!s.captured).sort((s,a)=>s.competition_time&&a.competition_time?s.competition_time.localeCompare(a.competition_time):0),l=[{id:"details",label:"Details"},{id:"athletes",label:`Athletes (${N.length})`},{id:"runsheet",label:"Run Sheet"},{id:"gallery",label:`Gallery (${z.length})`},{id:"orders",label:`Orders (${D.length})`}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("button",{onClick:g,className:"flex items-center gap-2 text-gray-400 hover:text-white transition-colors",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Events"]})}),e.jsx("div",{className:"text-right",children:e.jsx("span",{className:`px-3 py-1 rounded text-sm ${y.status==="upcoming"?"bg-blue-600":y.status==="active"?"bg-green-600":"bg-gray-600"}`,children:y.status})})]}),e.jsxs("div",{className:"bg-gray-900/50 rounded-xl border border-gray-800 p-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:y.name}),e.jsxs("p",{className:"text-gray-400 mt-1",children:[y.date&&new Date(y.date).toLocaleDateString("en-AU",{weekday:"long",day:"numeric",month:"long",year:"numeric"}),y.location&&` â€¢ ${y.location}`]}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:te?.name})]}),e.jsx("div",{className:"overflow-x-auto -mx-4 px-4 md:mx-0 md:px-0",children:e.jsx("div",{className:"flex gap-2 border-b border-gray-700 pb-2 min-w-max",children:l.map(s=>e.jsx("button",{onClick:()=>oe(s.id),className:`px-3 py-2 rounded-t-lg transition-colors whitespace-nowrap text-sm md:text-base md:px-4 ${C===s.id?"bg-red-600 text-white":"text-gray-400 hover:text-white"}`,children:s.label},s.id))})}),J?e.jsx("div",{className:"text-center py-12 text-gray-400",children:"Loading..."}):e.jsxs(e.Fragment,{children:[C==="details"&&e.jsx("div",{className:"bg-gray-900/50 rounded-xl border border-gray-800 p-6 space-y-4",children:w?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Event Name"}),e.jsx("input",{type:"text",value:r.name||"",onChange:s=>m({...r,name:s.target.value}),className:"w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Date"}),e.jsx("input",{type:"date",value:r.date?.split("T")[0]||"",onChange:s=>m({...r,date:s.target.value}),className:"w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Location"}),e.jsx("input",{type:"text",value:r.location||"",onChange:s=>m({...r,location:s.target.value}),className:"w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Status"}),e.jsxs("select",{value:r.status||"upcoming",onChange:s=>m({...r,status:s.target.value}),className:"w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg",children:[e.jsx("option",{value:"upcoming",children:"Upcoming"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"completed",children:"Completed"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Active"}),e.jsxs("select",{value:r.active?"true":"false",onChange:s=>m({...r,active:s.target.value==="true"}),className:"w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg",children:[e.jsx("option",{value:"true",children:"Yes"}),e.jsx("option",{value:"false",children:"No"})]})]})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsx("button",{onClick:U,className:"px-4 py-2 bg-green-600 hover:bg-green-700 rounded-lg",children:"Save Changes"}),e.jsx("button",{onClick:()=>Y(!1),className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg",children:"Cancel"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-400",children:"Event Name"}),e.jsx("p",{className:"font-medium",children:y.name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-400",children:"Date"}),e.jsx("p",{className:"font-medium",children:y.date&&new Date(y.date).toLocaleDateString("en-AU")})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"text-sm text-gray-400",children:"Location"}),e.jsx("p",{className:"font-medium",children:y.location||"Not set"})]})]}),e.jsx("button",{onClick:()=>{m(y),Y(!0)},className:"mt-4 px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg",children:"Edit Details"})]})}),C==="athletes"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",placeholder:"Search athletes...",value:_,onChange:s=>le(s.target.value),className:"px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg w-64"}),e.jsxs("select",{value:v,onChange:s=>xe(s.target.value),className:"px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg",children:[e.jsx("option",{value:"all",children:"All Mats"}),ee.map(s=>e.jsxs("option",{value:s,children:["Mat ",s]},s))]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>R(!0),className:"px-4 py-2 bg-green-600 hover:bg-green-700 rounded-lg",children:"Import from Smoothcomp"}),N.length>0&&e.jsx("button",{onClick:he,className:"px-4 py-2 bg-red-900 hover:bg-red-800 rounded-lg text-sm",children:"Clear All"})]})]}),N.length===0?e.jsxs("div",{className:"bg-gray-900/50 rounded-xl border border-gray-800 p-8 text-center text-gray-400",children:[e.jsx("p",{children:"No athletes imported yet."}),e.jsx("p",{className:"text-sm mt-2",children:"Import from Smoothcomp to get started."})]}):e.jsx("div",{className:"bg-gray-900/50 rounded-xl border border-gray-800 overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-3",children:"Name"}),e.jsx("th",{className:"text-left p-3",children:"Division"}),e.jsx("th",{className:"text-center p-3",children:"Mat"}),e.jsx("th",{className:"text-center p-3",children:"Time"}),e.jsx("th",{className:"text-left p-3",children:"Academy"}),e.jsx("th",{className:"text-center p-3",children:"Paid"}),e.jsx("th",{className:"text-center p-3",children:"Captured"}),e.jsx("th",{className:"text-right p-3",children:"Actions"})]})}),e.jsx("tbody",{children:ue.map(s=>{const a=W.has(s.name?.toLowerCase());return e.jsxs("tr",{className:`border-t border-gray-800 ${a&&!s.captured?"bg-yellow-900/20":""}`,children:[e.jsx("td",{className:"p-3 font-medium",children:s.name}),e.jsx("td",{className:"p-3 text-gray-400",children:s.division}),e.jsx("td",{className:"p-3 text-center",children:s.mat}),e.jsx("td",{className:"p-3 text-center text-gray-400",children:s.competition_time}),e.jsx("td",{className:"p-3 text-gray-400",children:s.academy}),e.jsx("td",{className:"p-3 text-center",children:a?e.jsx("span",{className:"text-green-400",children:"ðŸ’°"}):e.jsx("span",{className:"text-gray-600",children:"-"})}),e.jsx("td",{className:"p-3 text-center",children:e.jsx("button",{onClick:()=>F(s.id,s.captured),className:`px-2 py-1 rounded text-xs ${s.captured?"bg-green-600":"bg-gray-600 hover:bg-gray-500"}`,children:s.captured?"âœ“":"â—‹"})}),e.jsx("td",{className:"p-3 text-right",children:e.jsx("button",{onClick:()=>k(s.id),className:"text-red-400 hover:text-red-300",children:"Delete"})})]},s.id)})})]})})]}),C==="runsheet"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-yellow-900/20 border border-yellow-800 rounded-xl p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-yellow-400 mb-4",children:["ðŸ”¥ Priority Queue (",t.length,")"]}),e.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Athletes who have PAID but not yet been photographed. Capture these first!"}),t.length===0?e.jsx("p",{className:"text-gray-500 italic",children:"No pending captures. All paid athletes have been photographed!"}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:t.map(s=>e.jsx("div",{className:"bg-gray-800 rounded-lg p-4 border border-yellow-700",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:s.name}),e.jsx("p",{className:"text-sm text-gray-400",children:s.division}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Mat ",s.mat," â€¢ ",s.competition_time]})]}),e.jsx("button",{onClick:()=>F(s.id,!1),className:"px-3 py-1 bg-green-600 hover:bg-green-700 rounded text-sm",children:"Mark Captured"})]})},s.id))})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-gray-900/50 rounded-xl border border-gray-800 p-4 text-center",children:[e.jsx("p",{className:"text-3xl font-bold",children:N.length}),e.jsx("p",{className:"text-sm text-gray-400",children:"Total Athletes"})]}),e.jsxs("div",{className:"bg-gray-900/50 rounded-xl border border-gray-800 p-4 text-center",children:[e.jsx("p",{className:"text-3xl font-bold text-green-400",children:D.length}),e.jsx("p",{className:"text-sm text-gray-400",children:"Orders"})]}),e.jsxs("div",{className:"bg-gray-900/50 rounded-xl border border-gray-800 p-4 text-center",children:[e.jsx("p",{className:"text-3xl font-bold text-yellow-400",children:t.length}),e.jsx("p",{className:"text-sm text-gray-400",children:"Pending Captures"})]}),e.jsxs("div",{className:"bg-gray-900/50 rounded-xl border border-gray-800 p-4 text-center",children:[e.jsx("p",{className:"text-3xl font-bold text-blue-400",children:N.filter(s=>s.captured).length}),e.jsx("p",{className:"text-sm text-gray-400",children:"Captured"})]})]}),e.jsxs("div",{className:"bg-gray-900/50 rounded-xl border border-gray-800 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Timeline View"}),N.length===0?e.jsx("p",{className:"text-gray-500 italic",children:"Import athletes to see the timeline."}):e.jsx("div",{className:"space-y-2",children:Object.entries(N.reduce((s,a)=>{const n=a.competition_time||"No Time Set";return s[n]||(s[n]=[]),s[n].push(a),s},{})).sort(([s],[a])=>s.localeCompare(a)).map(([s,a])=>e.jsxs("div",{className:"border-l-2 border-gray-700 pl-4 py-2",children:[e.jsx("p",{className:"font-semibold text-gray-300",children:s}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:a.map(n=>{const c=W.has(n.name?.toLowerCase());return e.jsxs("span",{className:`px-3 py-1 rounded text-sm ${n.captured?"bg-green-900/50 text-green-400 line-through":c?"bg-yellow-900/50 text-yellow-400 font-semibold":"bg-gray-800 text-gray-400"}`,children:[n.name,c&&!n.captured&&" ðŸ’°"]},n.id)})})]},s))})]})]}),C==="gallery"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Event Galleries"}),e.jsx("a",{href:`#/portal/galleries?event=${f.id}&org=${te?.id}`,className:"px-4 py-2 bg-red-600 hover:bg-red-700 rounded-lg",children:"Manage Galleries"})]}),z.length===0?e.jsx("div",{className:"bg-gray-900/50 rounded-xl border border-gray-800 p-8 text-center text-gray-400",children:"No galleries for this event yet."}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:z.map(s=>e.jsxs("div",{className:"bg-gray-900/50 rounded-xl border border-gray-800 p-4",children:[e.jsx("h4",{className:"font-semibold",children:s.title}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:s.description}),e.jsxs("div",{className:"flex gap-4 mt-3 text-sm text-gray-500",children:[e.jsxs("span",{children:[s.gallery_photos?.[0]?.count||0," photos"]}),e.jsx("span",{children:s.access_type})]}),e.jsx("a",{href:`#/gallery/${s.slug}`,target:"_blank",className:"inline-block mt-3 text-sm text-blue-400 hover:text-blue-300",children:"View Gallery â†’"})]},s.id))})]}),C==="orders"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Event Orders"}),e.jsx("p",{className:"text-sm text-gray-400",children:'Click "Link Match Card" to upload Smoothcomp screenshots'})]}),D.length===0?e.jsx("div",{className:"bg-gray-900/50 rounded-xl border border-gray-800 p-8 text-center text-gray-400",children:"No orders for this event yet."}):e.jsx("div",{className:"grid gap-4",children:D.map(s=>e.jsx("div",{className:"bg-gray-900/50 rounded-xl border border-gray-800 p-3 md:p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 md:gap-4",children:[e.jsxs("div",{className:"flex sm:block gap-3",children:[e.jsx("div",{className:"flex-shrink-0",children:s.match_card_url?e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:s.match_card_signed_url||s.match_card_url,alt:"Match Card",className:"w-20 h-28 md:w-24 md:h-32 object-cover rounded-lg cursor-pointer hover:opacity-80",onClick:()=>ce(s)}),e.jsx("button",{onClick:a=>{a.stopPropagation(),Z(s)},className:"absolute -top-2 -right-2 bg-red-600 hover:bg-red-700 text-white rounded-full w-6 h-6 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",title:"Remove card",children:"Ã—"})]}):e.jsxs("button",{onClick:()=>ce(s),className:"w-20 h-28 md:w-24 md:h-32 bg-gray-800 rounded-lg border-2 border-dashed border-gray-600 hover:border-red-500 flex flex-col items-center justify-center text-gray-500 hover:text-red-400 transition-colors",children:[e.jsx("svg",{className:"w-6 h-6 md:w-8 md:h-8 mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsx("span",{className:"text-xs",children:"Add Card"})]})}),e.jsxs("div",{className:"sm:hidden flex-grow",children:[e.jsxs("p",{className:"font-semibold",children:[s.first_name," ",s.last_name]}),e.jsx("p",{className:"text-xs text-gray-400 truncate",children:s.email}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsxs("span",{className:"font-semibold text-green-400",children:["$",s.amount]}),e.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${s.status==="paid"?"bg-green-600":s.status==="pending"?"bg-yellow-600":"bg-gray-600"}`,children:s.status})]})]})]}),e.jsxs("div",{className:"flex-grow hidden sm:block",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold text-lg",children:[s.first_name," ",s.last_name]}),e.jsx("p",{className:"text-sm text-gray-400",children:s.email})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-semibold text-green-400",children:["$",s.amount]}),e.jsx("span",{className:`px-2 py-1 rounded text-xs ${s.status==="paid"?"bg-green-600":s.status==="pending"?"bg-yellow-600":"bg-gray-600"}`,children:s.status})]})]}),e.jsxs("div",{className:"mt-2 flex gap-4 text-sm text-gray-400",children:[e.jsx("span",{children:s.packages?.name}),e.jsx("span",{children:"â€¢"}),e.jsx("span",{children:new Date(s.created_at).toLocaleDateString("en-AU")})]}),s.match_card_data&&Object.keys(s.match_card_data).length>0&&e.jsxs("div",{className:"mt-3 flex gap-3 flex-wrap",children:[s.match_card_data.mat&&e.jsxs("span",{className:"px-2 py-1 bg-blue-900/50 text-blue-300 rounded text-sm",children:["Mat ",s.match_card_data.mat]}),s.match_card_data.time&&e.jsx("span",{className:"px-2 py-1 bg-purple-900/50 text-purple-300 rounded text-sm",children:s.match_card_data.time}),s.match_card_data.division&&e.jsx("span",{className:"px-2 py-1 bg-green-900/50 text-green-300 rounded text-sm",children:s.match_card_data.division})]})]})]})},s.id))})]})]}),re&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gray-900 rounded-xl border border-gray-700 p-6 w-full max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Import Athletes from Smoothcomp"}),e.jsxs("p",{className:"text-sm text-gray-400 mb-4",children:["Paste athlete data in this format (one per line):",e.jsx("br",{}),e.jsx("code",{className:"bg-gray-800 px-2 py-1 rounded text-xs",children:"Name | Division | Mat | Time | Academy"})]}),e.jsx("textarea",{value:V,onChange:s=>T(s.target.value),placeholder:"John Smith | Adult Blue Belt | 1 | 09:30 | Gracie Barra...",className:"w-full h-64 px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg font-mono text-sm"}),e.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[e.jsx("button",{onClick:()=>{R(!1),T("")},className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg",children:"Cancel"}),e.jsxs("button",{onClick:de,className:"px-4 py-2 bg-green-600 hover:bg-green-700 rounded-lg",children:["Import ",ge(V).length," Athletes"]})]})]})}),A&&u&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gray-900 rounded-xl border border-gray-700 p-6 w-full max-w-lg",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4",children:["Link Match Card for ",u.first_name," ",u.last_name]}),e.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Upload a screenshot of the athlete's Smoothcomp match card. We'll extract their mat number, competition time, and division automatically."}),u.match_card_url&&e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-sm text-gray-400 mb-2",children:"Current Match Card:"}),e.jsx("img",{src:u.match_card_url,alt:"Current Match Card",className:"w-full max-h-64 object-contain rounded-lg border border-gray-700"}),u.match_card_data&&Object.keys(u.match_card_data).length>0&&e.jsxs("div",{className:"mt-2 flex gap-2 flex-wrap",children:[u.match_card_data.mat&&e.jsxs("span",{className:"px-2 py-1 bg-blue-900/50 text-blue-300 rounded text-sm",children:["Mat ",u.match_card_data.mat]}),u.match_card_data.time&&e.jsx("span",{className:"px-2 py-1 bg-purple-900/50 text-purple-300 rounded text-sm",children:u.match_card_data.time}),u.match_card_data.division&&e.jsx("span",{className:"px-2 py-1 bg-green-900/50 text-green-300 rounded text-sm",children:u.match_card_data.division})]})]}),e.jsxs("div",{className:"border-2 border-dashed border-gray-600 rounded-lg p-6 text-center",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:s=>{const a=s.target.files?.[0];a&&pe(a)},className:"hidden",id:"match-card-upload",disabled:B||P}),e.jsx("label",{htmlFor:"match-card-upload",className:`cursor-pointer ${B||P?"opacity-50":""}`,children:B?e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-red-500 border-t-transparent rounded-full"}),e.jsx("span",{className:"text-gray-400",children:"Uploading..."})]}):P?e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-blue-500 border-t-transparent rounded-full"}),e.jsx("span",{className:"text-gray-400",children:"Extracting data with AI..."})]}):e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("svg",{className:"w-12 h-12 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),e.jsx("span",{className:"text-gray-400",children:"Click to upload or drag & drop"}),e.jsx("span",{className:"text-xs text-gray-500",children:"PNG, JPG up to 10MB"})]})})]}),e.jsx("div",{className:"flex justify-end gap-2 mt-4",children:e.jsx("button",{onClick:()=>{H(!1),K(null)},className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg",disabled:B||P,children:"Close"})})]})})]})}function ke(){const[f,te]=o.useState([]),[g,O]=o.useState(null),[C,oe]=o.useState([]),[J,se]=o.useState([]),[y,ae]=o.useState([]),[D,L]=o.useState([]),[z,me]=o.useState([]),[Q,ve]=o.useState([]),[N,E]=o.useState([]),[V,T]=o.useState(!0),[re,R]=o.useState(null),[_,le]=o.useState("events"),[q,ie]=o.useState(!1),[v,xe]=o.useState(null),[w,Y]=o.useState(null),[r,m]=o.useState({}),[A,H]=o.useState(null),[u,K]=o.useState([]),[B,G]=o.useState(!1),[P,ne]=o.useState([]),[M,I]=o.useState([]),de=new URLSearchParams(window.location.hash.split("?")[1]||"").get("org");o.useEffect(()=>{F()},[]),o.useEffect(()=>{g&&k(g.id)},[g]);async function F(){T(!0);const{data:t}=await i.from("organizations").select("*").order("name");if(te(t||[]),de&&t){const l=t.find(s=>s.id===de);l&&(O(l),window.location.hash.includes("galleries")&&le("galleries"))}T(!1)}async function k(t){const[l,s,a,n,c]=await Promise.all([i.from("events").select("*").eq("organization_id",t).order("date",{ascending:!0}),i.from("packages").select("*").eq("organization_id",t).order("sort_order"),i.from("content_orders").select("*, events(name), packages(name)").eq("organization_id",t).order("created_at",{ascending:!1}).limit(50),i.from("galleries").select("*, events(name), gallery_photos(count)").eq("organization_id",t).order("created_at",{ascending:!1}),i.from("gallery_purchases").select("*, galleries(title, slug, events(name))").eq("organization_id",t).order("created_at",{ascending:!1}).limit(100)]);oe(l.data||[]),se(s.data||[]),me(a.data||[]),ve(n.data||[]),E(c.data||[]);const d=(l.data||[]).map(x=>x.id);if(d.length>0){const[x,h]=await Promise.all([i.from("division_categories").select("*").in("event_id",d).order("sort_order"),i.from("division_subdivisions").select("*").order("sort_order")]);ae(x.data||[]);const b=(x.data||[]).map(p=>p.id);L((h.data||[]).filter(p=>b.includes(p.category_id)))}else ae([]),L([])}async function he(){const{data:t,error:l}=await i.from("packages").select("*, organizations(name, display_name)").neq("organization_id",g?.id).order("name");!l&&t&&ne(t)}async function pe(){if(M.length===0||!g)return;const l=P.filter(a=>M.includes(a.id)).map(a=>({name:a.name,description:a.description,price:a.price,sort_order:a.sort_order,active:a.active,organization_id:g.id})),{error:s}=await i.from("packages").insert(l);s?alert("Failed to import packages: "+s.message):(G(!1),I([]),k(g.id))}function X(t){return y.filter(l=>l.event_id===t)}function Z(t){return D.filter(l=>l.category_id===t)}function S(t,l=null,s=null){xe(t),Y(l),t==="org"?m(l||{name:"",display_name:"",legal_name:"",slug:"",description:"",logo_url:"",active:!0}):t==="event"?m(l||{organization_id:g?.id,name:"",date:"",location:"",status:"upcoming",active:!0,divisions_required:!1}):t==="package"?m(l||{organization_id:g?.id,name:"",description:"",price:"",sort_order:0,active:!0}):t==="division-cat"?m(l||{event_id:s||A,name:"",sort_order:0,active:!0}):t==="division-sub"&&m(l||{category_id:s,name:"",sort_order:0,active:!0}),ie(!0)}async function ce(){try{if(v==="org")w?.id?await i.from("organizations").update(r).eq("id",w.id):await i.from("organizations").insert(r),F();else if(v==="event"){const t={...r,organization_id:g.id};w?.id?await i.from("events").update(t).eq("id",w.id):await i.from("events").insert(t),k(g.id)}else if(v==="package"){const t={...r,organization_id:g.id,price:parseFloat(r.price)};w?.id?await i.from("packages").update(t).eq("id",w.id):await i.from("packages").insert(t),k(g.id)}else v==="division-cat"?(w?.id?await i.from("division_categories").update(r).eq("id",w.id):await i.from("division_categories").insert(r),k(g.id)):v==="division-sub"&&(w?.id?await i.from("division_subdivisions").update(r).eq("id",w.id):await i.from("division_subdivisions").insert(r),k(g.id));ie(!1)}catch(t){console.error("Save error:",t),alert("Error saving. Check console.")}}async function U(t,l){if(t==="organizations"){await ue(l);return}if(!confirm("Are you sure you want to delete this item?"))return;const{error:s}=await i.from(t).delete().eq("id",l);if(s){console.error("Delete error:",s),alert(`Failed to delete: ${s.message}`);return}k(g.id)}async function ue(t){const l=f.find(j=>j.id===t);if(!l)return;const[s,a,n,c]=await Promise.all([i.from("events").select("id, name").eq("organization_id",t),i.from("packages").select("id, name").eq("organization_id",t),i.from("content_orders").select("id").eq("organization_id",t),i.from("livestream_events").select("id, title").eq("organization_id",t)]),d=s.data||[],x=a.data||[],h=n.data||[],b=c.data||[];let p=`âš ï¸ DELETE "${l.display_name||l.name}"?

This will also delete:
`;if(d.length>0&&(p+=`
ðŸ“… ${d.length} event${d.length>1?"s":""}`,d.slice(0,3).forEach(j=>{p+=`
   â€¢ ${j.name}`}),d.length>3&&(p+=`
   â€¢ ...and ${d.length-3} more`)),x.length>0&&(p+=`

ðŸ“¦ ${x.length} package${x.length>1?"s":""}`,x.slice(0,3).forEach(j=>{p+=`
   â€¢ ${j.name}`}),x.length>3&&(p+=`
   â€¢ ...and ${x.length-3} more`)),b.length>0&&(p+=`

ðŸŽ¬ ${b.length} livestream event${b.length>1?"s":""}`,b.slice(0,3).forEach(j=>{p+=`
   â€¢ ${j.title}`}),b.length>3&&(p+=`
   â€¢ ...and ${b.length-3} more`)),h.length>0&&(p+=`

ðŸ§¾ ${h.length} order${h.length>1?"s":""}`),d.length+x.length+h.length+b.length===0?p=`Delete "${l.display_name||l.name}"?

No related items will be affected.`:p+=`

âš ï¸ THIS CANNOT BE UNDONE!`,!!confirm(p))try{h.length>0&&await i.from("content_orders").delete().eq("organization_id",t),x.length>0&&await i.from("packages").delete().eq("organization_id",t);for(const be of d){const{data:je}=await i.from("division_categories").select("id").eq("event_id",be.id);if(je&&je.length>0){for(const fe of je)await i.from("division_subdivisions").delete().eq("category_id",fe.id);await i.from("division_categories").delete().eq("event_id",be.id)}await i.from("events").delete().eq("id",be.id)}b.length>0&&await i.from("livestream_events").update({organization_id:null}).eq("organization_id",t);const{error:j}=await i.from("organizations").delete().eq("id",t);if(j)throw j;F(),g?.id===t&&O(null)}catch(j){console.error("Cascade delete error:",j),alert(`Failed to delete: ${j.message}`)}}async function ee(t,l,s){await i.from(t).update({active:!s}).eq("id",l),t==="organizations"?F():k(g.id)}if(V)return e.jsx("div",{className:"p-8 text-gray-400",children:"Loading..."});if(!g)return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Content Management"}),e.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Select an organization to manage its events, packages, and divisions"})]}),e.jsx("button",{onClick:()=>S("org"),className:"px-4 py-2 bg-red-600 hover:bg-red-700 rounded-lg text-sm font-medium",children:"+ Add Organization"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:f.map(t=>e.jsxs("div",{onClick:()=>O(t),className:"bg-gray-900/50 rounded-xl border border-gray-800 p-6 cursor-pointer hover:border-red-500/50 hover:bg-gray-900/80 transition-all group",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[t.logo_url?e.jsx("img",{src:ye(t.logo_url),alt:t.name,className:"w-12 h-12 rounded-lg object-cover"}):e.jsx("div",{className:"w-12 h-12 rounded-lg bg-gradient-to-br from-red-600 to-red-800 flex items-center justify-center text-xl font-bold",children:t.name.charAt(0)}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg group-hover:text-red-400 transition-colors",children:t.display_name||t.name}),t.display_name&&t.display_name!==t.name&&e.jsx("p",{className:"text-xs text-gray-400",children:t.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:["/",t.slug]})]})]}),!t.active&&e.jsx("span",{className:"text-xs bg-gray-700 px-2 py-1 rounded",children:"Inactive"})]}),t.description&&e.jsx("p",{className:"text-sm text-gray-400 line-clamp-2",children:t.description}),e.jsxs("div",{className:"mt-4 flex gap-2",children:[e.jsx("button",{onClick:l=>{l.stopPropagation(),S("org",t)},className:"text-xs text-blue-400 hover:text-blue-300",children:"Edit"}),e.jsx("button",{onClick:l=>{l.stopPropagation(),ee("organizations",t.id,t.active)},className:"text-xs text-gray-400 hover:text-white",children:t.active?"Deactivate":"Activate"}),e.jsx("button",{onClick:l=>{l.stopPropagation(),U("organizations",t.id)},className:"text-xs text-red-400 hover:text-red-300",children:"Delete"})]})]},t.id))}),q&&W()]});if(re)return e.jsx("div",{className:"p-6",children:e.jsx(Ne,{event:re,organization:g,onBack:()=>R(null),onEventUpdate:()=>k(g.id)})});return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("button",{onClick:()=>O(null),className:"text-gray-400 hover:text-white transition-colors",children:"â† Back"}),e.jsxs("div",{className:"flex items-center gap-3",children:[g.logo_url?e.jsx("img",{src:ye(g.logo_url),alt:g.name,className:"w-10 h-10 rounded-lg object-cover"}):e.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-red-600 to-red-800 flex items-center justify-center text-lg font-bold",children:g.name.charAt(0)}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:g.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:["/",g.slug]})]})]})]}),e.jsx("div",{className:"flex gap-2 mb-6 border-b border-gray-700 pb-2 overflow-x-auto",children:["events","packages","divisions","galleries","gallery-orders","orders"].map(t=>e.jsxs("button",{onClick:()=>le(t),className:`px-4 py-2 rounded-t-lg capitalize transition-colors whitespace-nowrap ${_===t?"bg-red-600 text-white":"text-gray-400 hover:text-white"}`,children:[t==="gallery-orders"?"Gallery Orders":t," ",t==="events"&&`(${C.length})`,t==="packages"&&`(${J.length})`,t==="galleries"&&`(${Q.length})`,t==="gallery-orders"&&`(${N.length})`,t==="orders"&&`(${z.length})`]},t))}),_==="events"&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Upcoming Events"}),e.jsx("button",{onClick:()=>S("event"),className:"px-4 py-2 bg-red-600 hover:bg-red-700 rounded-lg text-sm",children:"+ Add Event"})]}),C.length===0?e.jsx("div",{className:"bg-gray-900/50 rounded-xl border border-gray-800 p-8 text-center text-gray-400",children:"No events yet. Add one to get started."}):e.jsx("div",{className:"bg-gray-900/50 rounded-xl border border-gray-800 overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-3",children:"Event Name"}),e.jsx("th",{className:"text-left p-3",children:"Date"}),e.jsx("th",{className:"text-left p-3",children:"Location"}),e.jsx("th",{className:"text-center p-3",children:"Status"}),e.jsx("th",{className:"text-center p-3",children:"Active"}),e.jsx("th",{className:"text-right p-3",children:"Actions"})]})}),e.jsx("tbody",{children:C.map(t=>e.jsxs("tr",{className:"border-t border-gray-800 hover:bg-gray-800/50 cursor-pointer transition-colors",onClick:()=>R(t),children:[e.jsx("td",{className:"p-3 font-medium text-blue-400 hover:text-blue-300",children:t.name}),e.jsx("td",{className:"p-3 text-gray-400",children:t.date&&new Date(t.date).toLocaleDateString("en-AU",{weekday:"short",day:"numeric",month:"short",year:"numeric"})}),e.jsx("td",{className:"p-3 text-gray-400",children:t.location}),e.jsx("td",{className:"p-3 text-center",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs ${t.status==="upcoming"?"bg-blue-600":t.status==="active"?"bg-green-600":"bg-gray-600"}`,children:t.status})}),e.jsx("td",{className:"p-3 text-center",onClick:l=>l.stopPropagation(),children:e.jsx("button",{onClick:()=>ee("events",t.id,t.active),className:`px-2 py-1 rounded text-xs ${t.active?"bg-green-600":"bg-gray-600"}`,children:t.active?"Yes":"No"})}),e.jsxs("td",{className:"p-3 text-right space-x-2",onClick:l=>l.stopPropagation(),children:[e.jsx("button",{onClick:()=>S("event",t),className:"text-blue-400 hover:text-blue-300",children:"Edit"}),e.jsx("button",{onClick:()=>U("events",t.id),className:"text-red-400 hover:text-red-300",children:"Delete"})]})]},t.id))})]})})]}),_==="packages"&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Content Packages"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{he(),G(!0)},className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg text-sm",children:"Import from..."}),e.jsx("button",{onClick:()=>S("package"),className:"px-4 py-2 bg-red-600 hover:bg-red-700 rounded-lg text-sm",children:"+ Add Package"})]})]}),J.length===0?e.jsx("div",{className:"bg-gray-900/50 rounded-xl border border-gray-800 p-8 text-center text-gray-400",children:"No packages yet. Add one to get started, or import from another organization."}):e.jsx("div",{className:"bg-gray-900/50 rounded-xl border border-gray-800 overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-3",children:"Package Name"}),e.jsx("th",{className:"text-left p-3",children:"Description"}),e.jsx("th",{className:"text-right p-3",children:"Price"}),e.jsx("th",{className:"text-center p-3",children:"Active"}),e.jsx("th",{className:"text-right p-3",children:"Actions"})]})}),e.jsx("tbody",{children:J.map(t=>e.jsxs("tr",{className:"border-t border-gray-800",children:[e.jsx("td",{className:"p-3 font-medium",children:t.name}),e.jsx("td",{className:"p-3 text-gray-400 truncate max-w-xs",children:t.description}),e.jsxs("td",{className:"p-3 text-right font-semibold text-green-400",children:["$",t.price]}),e.jsx("td",{className:"p-3 text-center",children:e.jsx("button",{onClick:()=>ee("packages",t.id,t.active),className:`px-2 py-1 rounded text-xs ${t.active?"bg-green-600":"bg-gray-600"}`,children:t.active?"Yes":"No"})}),e.jsxs("td",{className:"p-3 text-right space-x-2",children:[e.jsx("button",{onClick:()=>S("package",t),className:"text-blue-400 hover:text-blue-300",children:"Edit"}),e.jsx("button",{onClick:()=>U("packages",t.id),className:"text-red-400 hover:text-red-300",children:"Delete"})]})]},t.id))})]})})]}),_==="divisions"&&e.jsx("div",{children:e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Divisions by Event"}),e.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Select an event to manage its division categories and subdivisions"}),C.length===0?e.jsx("div",{className:"bg-gray-900/50 rounded-xl border border-gray-800 p-8 text-center text-gray-400",children:"Add events first, then you can manage their divisions."}):e.jsxs(e.Fragment,{children:[e.jsxs("select",{value:A||"",onChange:t=>H(t.target.value),className:"w-full max-w-md px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg",children:[e.jsx("option",{value:"",children:"Select an event..."}),C.map(t=>e.jsxs("option",{value:t.id,children:[t.name," (",t.date&&new Date(t.date).toLocaleDateString("en-AU"),")"]},t.id))]}),A&&e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:["Division Categories (",X(A).length,")"]}),e.jsx("button",{onClick:()=>S("division-cat",null,A),className:"px-4 py-2 bg-red-600 hover:bg-red-700 rounded-lg text-sm",children:"+ Add Category"})]}),X(A).length===0?e.jsx("div",{className:"bg-gray-900/50 rounded-xl border border-gray-800 p-8 text-center text-gray-400",children:"No division categories for this event yet."}):e.jsx("div",{className:"space-y-3",children:X(A).map(t=>e.jsxs("div",{className:"bg-gray-900/50 rounded-xl border border-gray-800 overflow-hidden",children:[e.jsxs("div",{className:"p-4 flex justify-between items-center bg-gray-800/50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>K(l=>l.includes(t.id)?l.filter(s=>s!==t.id):[...l,t.id]),className:"text-gray-400 hover:text-white",children:e.jsx("svg",{className:`w-5 h-5 transition-transform ${u.includes(t.id)?"rotate-90":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),e.jsx("span",{className:"font-semibold",children:t.name}),e.jsxs("span",{className:"text-xs text-gray-400",children:["(",Z(t.id).length," subdivisions)"]}),!t.active&&e.jsx("span",{className:"text-xs bg-gray-600 px-2 py-0.5 rounded",children:"Inactive"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>S("division-cat",t),className:"text-blue-400 hover:text-blue-300 text-sm",children:"Edit"}),e.jsx("button",{onClick:()=>U("division_categories",t.id),className:"text-red-400 hover:text-red-300 text-sm",children:"Delete"})]})]}),u.includes(t.id)&&e.jsxs("div",{className:"p-4 border-t border-gray-700",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("span",{className:"text-sm text-gray-400",children:"Subdivisions:"}),e.jsx("button",{onClick:()=>S("division-sub",null,t.id),className:"text-sm text-green-400 hover:text-green-300",children:"+ Add Subdivision"})]}),Z(t.id).length===0?e.jsx("p",{className:"text-sm text-gray-500 italic",children:"No subdivisions yet"}):e.jsx("div",{className:"flex flex-wrap gap-2",children:Z(t.id).map(l=>e.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-1.5 rounded-lg border text-sm ${l.active?"bg-gray-800 border-gray-600":"bg-gray-900 border-gray-700 opacity-50"}`,children:[e.jsx("span",{children:l.name}),e.jsx("button",{onClick:()=>S("division-sub",l,t.id),className:"text-blue-400 hover:text-blue-300",children:"âœŽ"}),e.jsx("button",{onClick:()=>U("division_subdivisions",l.id),className:"text-red-400 hover:text-red-300",children:"Ã—"})]},l.id))})]})]},t.id))}),g.slug==="nba"&&e.jsxs("div",{className:"mt-6 p-4 bg-blue-900/20 border border-blue-800 rounded-xl",children:[e.jsx("h4",{className:"font-semibold text-blue-400 mb-2",children:"Quick Add: Standard NBA Divisions"}),e.jsx("p",{className:"text-sm text-gray-400 mb-3",children:"Add all standard NBA bodybuilding divisions for this event"}),e.jsx("button",{onClick:async t=>{const l=t.target,s=l.innerText;if(!A){alert("Please select an event first");return}if(window.confirm("Add all standard NBA divisions to this event?")){l.disabled=!0,l.innerText="Adding divisions...";try{const a={"Men's Physique":["Novice","Open","Masters 40+","Masters 50+","Junior"],"Classic Physique":["Novice","Open","Masters 40+","Masters 50+"],Bodybuilding:["Novice","Open","Masters 40+","Masters 50+","Junior"],Figure:["Novice","Open","Masters 35+","Masters 45+","Junior"],Bikini:["Novice","Open","Masters 35+","Masters 45+","Junior"],Wellness:["Novice","Open","Masters 35+","Masters 45+"],"Fitness Model":["Open","Masters"],"Sports Model":["Open","Masters"],Transformation:["Open"]};let n=0,c=0;for(const[d,x]of Object.entries(a)){const{data:h,error:b}=await i.from("division_categories").insert({event_id:A,name:d,sort_order:n++,active:!0}).select().single();if(b){console.error("Error adding category:",d,b);continue}if(h){c++;let p=0;for(const $ of x){const{error:j}=await i.from("division_subdivisions").insert({category_id:h.id,name:$,sort_order:p++,active:!0});j&&console.error("Error adding subdivision:",$,j)}}}alert(`Added ${c} division categories with subdivisions!`),await k(g.id)}catch(a){console.error("Error adding divisions:",a),alert("Error adding divisions: "+a.message)}finally{l.disabled=!1,l.innerText=s}}},className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg text-sm disabled:opacity-50",children:"Add Standard NBA Divisions"})]})]})]})]})}),_==="galleries"&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Photo Galleries"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("a",{href:`/#/portal/galleries?org=${g.id}&create=true`,className:"px-4 py-2 bg-red-600 hover:bg-red-700 rounded-lg text-sm",children:"+ New Gallery"}),Q.length>0&&e.jsx("a",{href:`/#/portal/galleries?org=${g.id}`,className:"px-4 py-2 bg-dark-600 hover:bg-dark-500 rounded-lg text-sm",children:"Manage All"})]})]}),Q.length===0?e.jsx("div",{className:"bg-gray-900/50 rounded-xl border border-gray-800 p-8 text-center text-gray-400",children:"No galleries yet. Create one to start selling event photos."}):e.jsx("div",{className:"bg-gray-900/50 rounded-xl border border-gray-800 overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-3",children:"Gallery Name"}),e.jsx("th",{className:"text-left p-3",children:"Event"}),e.jsx("th",{className:"text-center p-3",children:"Photos"}),e.jsx("th",{className:"text-right p-3",children:"Price/Photo"}),e.jsx("th",{className:"text-center p-3",children:"Status"}),e.jsx("th",{className:"text-right p-3",children:"Actions"})]})}),e.jsx("tbody",{children:Q.map(t=>e.jsxs("tr",{className:"border-t border-gray-800",children:[e.jsx("td",{className:"p-3 font-medium",children:t.title}),e.jsx("td",{className:"p-3 text-gray-400",children:t.events?.name||"â€”"}),e.jsx("td",{className:"p-3 text-center",children:t.gallery_photos?.[0]?.count||0}),e.jsxs("td",{className:"p-3 text-right font-semibold text-green-400",children:["$",(t.price_per_photo/100).toFixed(2)]}),e.jsx("td",{className:"p-3 text-center",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs ${t.status==="published"?"bg-green-600":t.status==="draft"?"bg-yellow-600":"bg-gray-600"}`,children:t.status})}),e.jsxs("td",{className:"p-3 text-right space-x-2",children:[e.jsx("a",{href:`/#/portal/galleries?edit=${t.id}`,className:"text-blue-400 hover:text-blue-300",children:"Edit"}),t.status==="published"&&e.jsx("a",{href:`/#/gallery/${t.slug}`,target:"_blank",className:"text-green-400 hover:text-green-300",children:"View"})]})]},t.id))})]})})]}),_==="gallery-orders"&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Gallery Photo Orders"}),e.jsxs("div",{className:"text-sm text-gray-400",children:["Total Revenue: ",e.jsxs("span",{className:"text-green-400 font-semibold",children:["$",N.reduce((t,l)=>t+(l.amount||0),0).toFixed(2)]})]})]}),N.length===0?e.jsx("div",{className:"bg-gray-900/50 rounded-xl border border-gray-800 p-8 text-center text-gray-400",children:"No gallery orders yet. Orders will appear here when customers purchase photos."}):e.jsx("div",{className:"bg-gray-900/50 rounded-xl border border-gray-800 overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-3",children:"Date"}),e.jsx("th",{className:"text-left p-3",children:"Customer"}),e.jsx("th",{className:"text-left p-3",children:"Gallery"}),e.jsx("th",{className:"text-left p-3",children:"Event"}),e.jsx("th",{className:"text-center p-3",children:"Photos"}),e.jsx("th",{className:"text-right p-3",children:"Amount"}),e.jsx("th",{className:"text-center p-3",children:"Status"}),e.jsx("th",{className:"text-right p-3",children:"Actions"})]})}),e.jsx("tbody",{children:N.map(t=>e.jsxs("tr",{className:"border-t border-gray-800",children:[e.jsxs("td",{className:"p-3 text-gray-400",children:[new Date(t.created_at).toLocaleDateString("en-AU"),e.jsx("div",{className:"text-xs text-gray-500",children:new Date(t.created_at).toLocaleTimeString("en-AU",{hour:"2-digit",minute:"2-digit"})})]}),e.jsxs("td",{className:"p-3",children:[e.jsx("div",{className:"font-medium",children:t.customer_name||"N/A"}),e.jsx("div",{className:"text-xs text-gray-500",children:t.customer_email})]}),e.jsx("td",{className:"p-3 text-gray-400",children:t.galleries?.title||"N/A"}),e.jsx("td",{className:"p-3 text-gray-400",children:t.galleries?.events?.name||"â€”"}),e.jsx("td",{className:"p-3 text-center",children:t.photo_count||1}),e.jsxs("td",{className:"p-3 text-right font-semibold text-green-400",children:["$",(t.amount||0).toFixed(2)]}),e.jsx("td",{className:"p-3 text-center",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs ${t.status==="completed"||t.status==="paid"?"bg-green-600":t.status==="pending"?"bg-yellow-600":"bg-gray-600"}`,children:t.status||"pending"})}),e.jsx("td",{className:"p-3 text-right",children:t.galleries?.slug&&e.jsx("a",{href:`/#/gallery/${t.galleries.slug}`,target:"_blank",className:"text-blue-400 hover:text-blue-300 text-sm",children:"View Gallery"})})]},t.id))})]})})]}),_==="orders"&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Recent Orders"}),e.jsx("div",{className:"bg-gray-900/50 rounded-xl border border-gray-800 overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-3",children:"Date"}),e.jsx("th",{className:"text-left p-3",children:"Athlete"}),e.jsx("th",{className:"text-left p-3",children:"Email"}),e.jsx("th",{className:"text-left p-3",children:"Event"}),e.jsx("th",{className:"text-left p-3",children:"Package"}),e.jsx("th",{className:"text-right p-3",children:"Amount"}),e.jsx("th",{className:"text-center p-3",children:"Status"})]})}),e.jsx("tbody",{children:z.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"p-8 text-center text-gray-400",children:"No orders yet"})}):z.map(t=>e.jsxs("tr",{className:"border-t border-gray-800",children:[e.jsx("td",{className:"p-3 text-gray-400",children:new Date(t.created_at).toLocaleDateString("en-AU")}),e.jsxs("td",{className:"p-3 font-medium",children:[t.first_name," ",t.last_name]}),e.jsx("td",{className:"p-3 text-gray-400",children:t.email}),e.jsx("td",{className:"p-3 text-gray-400",children:t.events?.name}),e.jsx("td",{className:"p-3 text-gray-400",children:t.packages?.name}),e.jsxs("td",{className:"p-3 text-right font-semibold",children:["$",t.amount]}),e.jsx("td",{className:"p-3 text-center",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs ${t.status==="paid"?"bg-green-600":t.status==="delivered"?"bg-blue-600":t.status==="pending"?"bg-yellow-600":"bg-gray-600"}`,children:t.status})})]},t.id))})]})})]}),q&&W(),B&&e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gray-900 rounded-xl border border-gray-700 p-6 w-full max-w-lg max-h-[80vh] overflow-hidden flex flex-col",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Import Packages from Other Organizations"}),P.length===0?e.jsx("p",{className:"text-gray-400 text-center py-8",children:"No packages available to import from other organizations."}):e.jsx("div",{className:"flex-1 overflow-y-auto mb-4 space-y-2",children:Object.entries(P.reduce((t,l)=>{const s=l.organizations?.display_name||l.organizations?.name||"Unknown";return t[s]||(t[s]=[]),t[s].push(l),t},{})).map(([t,l])=>e.jsxs("div",{className:"border border-gray-700 rounded-lg overflow-hidden",children:[e.jsx("div",{className:"bg-gray-800 px-3 py-2 font-medium text-sm",children:t}),e.jsx("div",{className:"divide-y divide-gray-800",children:l.map(s=>e.jsxs("label",{className:"flex items-center gap-3 px-3 py-2 hover:bg-gray-800/50 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:M.includes(s.id),onChange:a=>{a.target.checked?I(n=>[...n,s.id]):I(n=>n.filter(c=>c!==s.id))},className:"w-4 h-4 rounded"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:s.name}),s.description&&e.jsx("div",{className:"text-xs text-gray-400 truncate",children:s.description})]}),e.jsxs("div",{className:"text-green-400 font-semibold",children:["$",s.price]})]},s.id))})]},t))}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-700",children:[e.jsx("button",{onClick:()=>{G(!1),I([])},className:"flex-1 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg",children:"Cancel"}),e.jsxs("button",{onClick:pe,disabled:M.length===0,className:"flex-1 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:["Import ",M.length>0&&`(${M.length})`]})]})]})})]});function W(){return e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gray-900 rounded-xl border border-gray-700 p-6 w-full max-w-md",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4",children:[w?"Edit":"Add"," ",v==="org"?"Organization":v==="event"?"Event":v==="package"?"Package":v==="division-cat"?"Division Category":v==="division-sub"?"Subdivision":""]}),e.jsxs("div",{className:"space-y-4",children:[v==="org"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Organization Name *"}),e.jsx("input",{type:"text",value:r.name||"",onChange:t=>m({...r,name:t.target.value}),placeholder:"e.g., World Ninja Games",className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Display Name (Short)"}),e.jsx("input",{type:"text",value:r.display_name||"",onChange:t=>m({...r,display_name:t.target.value}),placeholder:"e.g., WNG",className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Shown on livestream cards & filters"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Legal Name"}),e.jsx("input",{type:"text",value:r.legal_name||"",onChange:t=>m({...r,legal_name:t.target.value}),placeholder:"e.g., World Ninja Games Pty Ltd",className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"For contracts & invoices"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Slug (URL-friendly)"}),e.jsx("input",{type:"text",value:r.slug||"",onChange:t=>m({...r,slug:t.target.value.toLowerCase().replace(/\s+/g,"-")}),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Logo URL"}),e.jsx("input",{type:"text",value:r.logo_url||"",onChange:t=>m({...r,logo_url:t.target.value}),placeholder:"https://...",className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Description"}),e.jsx("textarea",{value:r.description||"",onChange:t=>m({...r,description:t.target.value}),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg",rows:3})]}),e.jsxs("div",{className:"border-t border-gray-700 pt-4 mt-4",children:[e.jsx("p",{className:"text-sm text-gray-400 mb-3 font-medium",children:"Contact / Organizer"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Contact Name"}),e.jsx("input",{type:"text",value:r.contact_name||"",onChange:t=>m({...r,contact_name:t.target.value}),placeholder:"e.g., Phil Cassidy",className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Contact Email"}),e.jsx("input",{type:"email",value:r.contact_email||"",onChange:t=>m({...r,contact_email:t.target.value}),placeholder:"email@example.com",className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Contact Phone"}),e.jsx("input",{type:"tel",value:r.contact_phone||"",onChange:t=>m({...r,contact_phone:t.target.value}),placeholder:"+61 400 000 000",className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg"})]})]})]})]})]}),v==="event"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Event Name"}),e.jsx("input",{type:"text",value:r.name||"",onChange:t=>m({...r,name:t.target.value}),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Date"}),e.jsx("input",{type:"date",value:r.date||"",onChange:t=>m({...r,date:t.target.value}),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Location"}),e.jsx("input",{type:"text",value:r.location||"",onChange:t=>m({...r,location:t.target.value}),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Status"}),e.jsxs("select",{value:r.status||"upcoming",onChange:t=>m({...r,status:t.target.value}),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg",children:[e.jsx("option",{value:"upcoming",children:"Upcoming"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"completed",children:"Completed"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r.divisions_required||!1,onChange:t=>m({...r,divisions_required:t.target.checked}),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-red-600"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-white",children:"Require Divisions"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Athletes must select a division when ordering"})]})]})]}),v==="package"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Package Name"}),e.jsx("input",{type:"text",value:r.name||"",onChange:t=>m({...r,name:t.target.value}),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Description"}),e.jsx("input",{type:"text",value:r.description||"",onChange:t=>m({...r,description:t.target.value}),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Price (AUD)"}),e.jsx("input",{type:"number",value:r.price||"",onChange:t=>m({...r,price:t.target.value}),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Sort Order"}),e.jsx("input",{type:"number",value:r.sort_order||0,onChange:t=>m({...r,sort_order:parseInt(t.target.value)}),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg"})]})]})]}),v==="division-cat"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Category Name"}),e.jsx("input",{type:"text",value:r.name||"",onChange:t=>m({...r,name:t.target.value}),placeholder:"e.g., Men's Physique, Bikini, Figure",className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Sort Order"}),e.jsx("input",{type:"number",value:r.sort_order||0,onChange:t=>m({...r,sort_order:parseInt(t.target.value)}),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg"})]})]}),v==="division-sub"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Subdivision Name"}),e.jsx("input",{type:"text",value:r.name||"",onChange:t=>m({...r,name:t.target.value}),placeholder:"e.g., Novice, Open, Masters 40+",className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Sort Order"}),e.jsx("input",{type:"number",value:r.sort_order||0,onChange:t=>m({...r,sort_order:parseInt(t.target.value)}),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"active",checked:r.active??!0,onChange:t=>m({...r,active:t.target.checked}),className:"rounded"}),e.jsx("label",{htmlFor:"active",className:"text-sm text-gray-400",children:"Active"})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>ie(!1),className:"flex-1 py-2 border border-gray-600 rounded-lg hover:bg-gray-800",children:"Cancel"}),e.jsx("button",{onClick:ce,className:"flex-1 py-2 bg-red-600 hover:bg-red-700 rounded-lg",children:"Save"})]})]})})}}export{ke as default};
