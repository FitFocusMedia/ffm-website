import{s as P,j as e,v as m,U as F,C as o,M as J,k,bf as R}from"./index-BmHPyVSs.js";import{b as r}from"./vendor-react-q0iRXJvs.js";import{E as W}from"./external-link-DMuFsU-Y.js";import{R as z}from"./refresh-cw-BDF16bwB.js";import{U as T}from"./upload-DWr1kQG_.js";import{C as G}from"./circle-alert-7_5k5Nta.js";import"./vendor-supabase-DhDedaeW.js";function ee(){const[h,f]=r.useState([]),[l,p]=r.useState([]),[N,E]=r.useState(""),[y,M]=r.useState("all"),[g,$]=r.useState("all"),[L,C]=r.useState(!0),[c,U]=r.useState("priority"),[v,A]=r.useState(""),[O,S]=r.useState(!1),[b,Q]=r.useState({name:"South East QLD Championship 2026",date:"March 1, 2026",athletes:674,smoothcompUrl:"https://afbjj.smoothcomp.com/en/event/28136"});r.useEffect(()=>{const s=localStorage.getItem("athlete-tracker-athletes");s&&p(JSON.parse(s)),D()},[]),r.useEffect(()=>{l.length>0&&localStorage.setItem("athlete-tracker-athletes",JSON.stringify(l))},[l]);const D=async()=>{C(!0);try{const{data:s,error:a}=await P.from("photo_orders").select("*").order("created_at",{ascending:!1});a?(console.error("Error fetching orders:",a),f([])):f(s||[])}catch(s){console.error("Fetch error:",s),f([])}C(!1)},_=()=>{if(!v.trim())return;const s=v.split(`
`).filter(t=>t.trim()),a=[];s.forEach((t,n)=>{const i=t.split("|").map(w=>w.trim());if(i.length>=1&&i[0]){const w={id:Date.now()+n,name:i[0],division:i[1]||"",mat:i[2]||"TBD",time:i[3]||"TBD",academy:i[4]||"",captured:!1};a.push(w)}}),p(t=>[...t,...a]),A(""),S(!1),alert(`Imported ${a.length} athletes!`)},x=()=>l.map(s=>{const a=h.find(t=>t.athlete_name?.toLowerCase().includes(s.name.toLowerCase())||s.name.toLowerCase().includes(t.athlete_name?.toLowerCase()||""));return{...s,hasOrder:!!a,order:a}}),u=()=>{let s=x();if(N){const a=N.toLowerCase();s=s.filter(t=>t.name.toLowerCase().includes(a)||t.division?.toLowerCase().includes(a)||t.academy?.toLowerCase().includes(a))}return y!=="all"&&(s=s.filter(a=>a.mat===y)),g==="ordered"?s=s.filter(a=>a.hasOrder):g==="captured"?s=s.filter(a=>a.captured):g==="pending"&&(s=s.filter(a=>a.hasOrder&&!a.captured)),s},j=s=>{p(a=>a.map(t=>t.id===s?{...t,captured:!t.captured}:t))},d={totalAthletes:l.length,totalOrders:h.length,orderedAthletes:x().filter(s=>s.hasOrder).length,capturedCount:l.filter(s=>s.captured).length,pendingCapture:x().filter(s=>s.hasOrder&&!s.captured).length},B=[...new Set(l.map(s=>s.mat).filter(s=>s&&s!=="TBD"))],I=()=>{const s=x().filter(t=>t.hasOrder),a={};return s.forEach(t=>{const n=t.time||"Unscheduled";a[n]||(a[n]=[]),a[n].push(t)}),Object.entries(a).sort((t,n)=>t[0]==="Unscheduled"?1:n[0]==="Unscheduled"?-1:t[0].localeCompare(n[0]))};return e.jsx("div",{className:"min-h-screen bg-dark-950 text-white p-4 md:p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl md:text-3xl font-bold flex items-center gap-2",children:[e.jsx(m,{className:"w-6 h-6 md:w-8 md:h-8 text-red-500"}),"Athlete Tracker"]}),e.jsxs("p",{className:"text-gray-400 text-sm mt-1",children:[b.name," â€¢ ",b.date]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("a",{href:b.smoothcompUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-3 py-2 bg-dark-800 hover:bg-dark-700 rounded-lg text-sm transition-colors",children:[e.jsx(W,{className:"w-4 h-4"}),"Smoothcomp"]}),e.jsxs("button",{onClick:D,className:"flex items-center gap-2 px-3 py-2 bg-dark-800 hover:bg-dark-700 rounded-lg text-sm transition-colors",children:[e.jsx(z,{className:"w-4 h-4"}),"Refresh"]}),e.jsxs("button",{onClick:()=>S(!O),className:"flex items-center gap-2 px-3 py-2 bg-red-600 hover:bg-red-700 rounded-lg text-sm transition-colors",children:[e.jsx(T,{className:"w-4 h-4"}),"Import"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-6",children:[e.jsx("div",{className:"bg-dark-900 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(F,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:d.totalAthletes}),e.jsx("div",{className:"text-xs text-gray-500",children:"Athletes"})]})]})}),e.jsx("div",{className:"bg-dark-900 rounded-xl p-4 border border-green-500/30",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(m,{className:"w-5 h-5 text-green-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-green-400",children:d.totalOrders}),e.jsx("div",{className:"text-xs text-gray-500",children:"Orders"})]})]})}),e.jsx("div",{className:"bg-dark-900 rounded-xl p-4 border border-yellow-500/30",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(G,{className:"w-5 h-5 text-yellow-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:d.pendingCapture}),e.jsx("div",{className:"text-xs text-gray-500",children:"To Capture"})]})]})}),e.jsx("div",{className:"bg-dark-900 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(o,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:d.capturedCount}),e.jsx("div",{className:"text-xs text-gray-500",children:"Captured"})]})]})})]}),O&&e.jsxs("div",{className:"bg-dark-900 rounded-xl p-4 md:p-6 mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Import Athlete Data"}),e.jsxs("p",{className:"text-gray-400 text-sm mb-3",children:["Paste athlete data. Format: ",e.jsx("code",{className:"bg-dark-800 px-2 py-0.5 rounded",children:"Name | Division | Mat | Time | Academy"})]}),e.jsx("textarea",{value:v,onChange:s=>A(s.target.value),placeholder:`Tex Williams | Boys Gi / White | Mat 1 | 9:30 AM | Southside BJJ
Enzo Jundam | Boys Gi / White | Mat 1 | 9:45 AM | Alliance`,className:"w-full bg-dark-800 border border-dark-700 rounded-lg p-3 text-sm font-mono h-32 md:h-48 resize-none"}),e.jsxs("div",{className:"flex gap-2 mt-3",children:[e.jsxs("button",{onClick:_,className:"flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-700 rounded-lg text-sm transition-colors",children:[e.jsx(T,{className:"w-4 h-4"}),"Import Athletes"]}),e.jsx("button",{onClick:()=>{confirm("Clear all athlete data?")&&(p([]),localStorage.removeItem("athlete-tracker-athletes"))},className:"px-4 py-2 bg-dark-700 hover:bg-dark-600 rounded-lg text-sm transition-colors",children:"Clear All"})]})]}),e.jsx("div",{className:"flex gap-1 mb-4 overflow-x-auto pb-2",children:["priority","all","timeline","orders"].map(s=>e.jsxs("button",{onClick:()=>U(s),className:`px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap transition-colors ${c===s?"bg-red-600 text-white":"bg-dark-800 text-gray-400 hover:bg-dark-700"}`,children:[s==="priority"&&`ðŸŽ¯ Priority (${d.pendingCapture})`,s==="all"&&`All (${d.totalAthletes})`,s==="timeline"&&"ðŸ“… Timeline",s==="orders"&&`Orders (${d.totalOrders})`]},s))}),c==="priority"&&e.jsx("div",{children:d.pendingCapture===0?e.jsxs("div",{className:"bg-dark-900 rounded-xl p-8 text-center",children:[e.jsx(o,{className:"w-12 h-12 text-green-500 mx-auto mb-3"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"All caught up!"}),e.jsx("p",{className:"text-gray-400",children:"No athletes pending capture."})]}):e.jsx("div",{className:"grid gap-3",children:x().filter(s=>s.hasOrder&&!s.captured).map(s=>e.jsx("div",{className:"bg-dark-900 rounded-xl p-4 border-l-4 border-yellow-500",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-lg truncate",children:s.name}),e.jsx("p",{className:"text-gray-400 text-sm truncate",children:s.division}),e.jsxs("div",{className:"flex flex-wrap gap-3 mt-2 text-sm text-gray-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(J,{className:"w-4 h-4"})," ",s.mat]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(k,{className:"w-4 h-4"})," ",s.time]}),s.order&&e.jsxs("span",{className:"text-green-400 font-medium",children:["ðŸ’° $",s.order.amount," ",s.order.package]})]})]}),e.jsxs("button",{onClick:()=>j(s.id),className:"flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-700 rounded-lg text-sm font-medium transition-colors shrink-0",children:[e.jsx(m,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Captured"})]})]})},s.id))})}),c==="all"&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap gap-3 mb-4",children:[e.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[e.jsx(R,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search athlete, division...",value:N,onChange:s=>E(s.target.value),className:"w-full bg-dark-800 border border-dark-700 rounded-lg pl-10 pr-4 py-2 text-sm"})]}),e.jsxs("select",{value:y,onChange:s=>M(s.target.value),className:"bg-dark-800 border border-dark-700 rounded-lg px-3 py-2 text-sm",children:[e.jsx("option",{value:"all",children:"All Mats"}),B.map(s=>e.jsx("option",{value:s,children:s},s))]}),e.jsxs("select",{value:g,onChange:s=>$(s.target.value),className:"bg-dark-800 border border-dark-700 rounded-lg px-3 py-2 text-sm",children:[e.jsx("option",{value:"all",children:"All"}),e.jsx("option",{value:"ordered",children:"With Orders"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"captured",children:"Captured"})]})]}),e.jsx("div",{className:"md:hidden space-y-2",children:u().length===0?e.jsx("div",{className:"bg-dark-900 rounded-xl p-8 text-center text-gray-500",children:l.length===0?"No athletes imported yet. Click Import to add.":"No athletes match filters."}):u().map(s=>e.jsx("div",{className:`bg-dark-900 rounded-lg p-3 ${s.hasOrder?"border-l-4 border-green-500":""}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium truncate",children:s.name}),e.jsxs("div",{className:"text-xs text-gray-500 flex gap-2",children:[e.jsx("span",{children:s.mat}),e.jsx("span",{children:s.time})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[s.hasOrder&&e.jsxs("span",{className:"text-green-400 text-xs",children:["$",s.order?.amount]}),s.hasOrder&&e.jsx("button",{onClick:()=>j(s.id),className:`p-2 rounded-full ${s.captured?"bg-green-600":"bg-dark-700"}`,children:s.captured?e.jsx(o,{className:"w-4 h-4"}):e.jsx(m,{className:"w-4 h-4"})})]})]})},s.id))}),e.jsx("div",{className:"hidden md:block bg-dark-900 rounded-xl overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-dark-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-400",children:"Athlete"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-400",children:"Division"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-400",children:"Mat"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-400",children:"Time"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-400",children:"Order"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-400",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-400",children:"Action"})]})}),e.jsx("tbody",{className:"divide-y divide-dark-800",children:u().length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"px-4 py-8 text-center text-gray-500",children:l.length===0?"No athletes imported. Click Import to add.":"No athletes match filters."})}):u().map(s=>e.jsxs("tr",{className:s.hasOrder?"bg-green-500/5":"",children:[e.jsx("td",{className:"px-4 py-3 font-medium",children:s.name}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-400 max-w-[200px] truncate",children:s.division}),e.jsx("td",{className:"px-4 py-3 text-sm",children:s.mat}),e.jsx("td",{className:"px-4 py-3 text-sm",children:s.time}),e.jsx("td",{className:"px-4 py-3",children:s.hasOrder?e.jsxs("span",{className:"text-green-400 text-sm font-medium",children:["$",s.order?.amount]}):e.jsx("span",{className:"text-gray-600",children:"-"})}),e.jsx("td",{className:"px-4 py-3",children:s.captured?e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-green-500/20 text-green-400 rounded text-xs",children:[e.jsx(o,{className:"w-3 h-3"})," Done"]}):s.hasOrder?e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-yellow-500/20 text-yellow-400 rounded text-xs",children:[e.jsx(k,{className:"w-3 h-3"})," Pending"]}):e.jsx("span",{className:"text-gray-600 text-xs",children:"-"})}),e.jsx("td",{className:"px-4 py-3",children:s.hasOrder&&e.jsx("button",{onClick:()=>j(s.id),className:`px-3 py-1 rounded text-xs font-medium ${s.captured?"bg-gray-700 hover:bg-gray-600":"bg-green-600 hover:bg-green-700"}`,children:s.captured?"Undo":"Capture"})})]},s.id))})]})})]}),c==="timeline"&&e.jsx("div",{children:I().length===0?e.jsx("div",{className:"bg-dark-900 rounded-xl p-8 text-center text-gray-500",children:"No ordered athletes with scheduled times yet."}):e.jsx("div",{className:"space-y-4",children:I().map(([s,a])=>e.jsxs("div",{className:"bg-dark-900 rounded-xl overflow-hidden",children:[e.jsxs("div",{className:"bg-dark-800 px-4 py-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"font-semibold",children:s})]}),e.jsxs("span",{className:"text-sm text-gray-500",children:[a.length," athletes"]})]}),e.jsx("div",{className:"divide-y divide-dark-800",children:a.map(t=>e.jsxs("div",{className:"px-4 py-3 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:t.name}),e.jsxs("div",{className:"text-sm text-gray-500",children:[t.mat," â€¢ ",t.division]})]}),e.jsx("button",{onClick:()=>j(t.id),className:`p-2 rounded-full ${t.captured?"bg-green-600":"bg-dark-700 hover:bg-dark-600"}`,children:t.captured?e.jsx(o,{className:"w-4 h-4"}):e.jsx(m,{className:"w-4 h-4"})})]},t.id))})]},s))})}),c==="orders"&&e.jsx("div",{className:"bg-dark-900 rounded-xl overflow-hidden",children:L?e.jsx("div",{className:"p-8 text-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-red-500 mx-auto"})}):h.length===0?e.jsx("div",{className:"p-8 text-center text-gray-500",children:"No photo pack orders yet. Orders will appear here once customers purchase."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-dark-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-400",children:"Athlete"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-400",children:"Email"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-400",children:"Package"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-400",children:"Amount"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-400",children:"Date"})]})}),e.jsx("tbody",{className:"divide-y divide-dark-800",children:h.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 font-medium",children:s.athlete_name}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-400",children:s.email}),e.jsx("td",{className:"px-4 py-3 text-sm",children:s.package}),e.jsxs("td",{className:"px-4 py-3 text-green-400 font-medium",children:["$",s.amount]}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:new Date(s.created_at).toLocaleDateString()})]},s.id))})]})})})]})})}export{ee as default};
