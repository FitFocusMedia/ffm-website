import{j as e,U as D,m as L,H as g,be as T,aT as I}from"./index-Bfn1CFMf.js";import{b as n}from"./vendor-react-q0iRXJvs.js";import{k as M,l as V,m as G,n as $,o as B,p as F}from"./athleteHelpers-DfE0_HVn.js";import{U as z}from"./upload-CBxlIYXR.js";import{P as C}from"./plus-BWnKon1o.js";import{S as H}from"./save-DcVlHiH7.js";import"./vendor-supabase-DhDedaeW.js";function Y(){const[d,x]=n.useState("upload"),[v,k]=n.useState([]),[j,S]=n.useState([]),[m,N]=n.useState(""),[h,f]=n.useState(""),[y,E]=n.useState("match"),[o,i]=n.useState([{type:"photo",title:"",drive_url:"",thumbnail_url:""}]),[w,p]=n.useState(!1),[r,c]=n.useState({name:"",date:"",venue:"",org_name:""});n.useEffect(()=>{u()},[]);const u=()=>{k(M()),S(V())},_=()=>{i([...o,{type:"photo",title:"",drive_url:"",thumbnail_url:""}])},A=t=>{i(o.filter((s,a)=>a!==t))},b=(t,s,a)=>{const l=[...o];l[t][s]=a,i(l)},P=()=>{if(!m||!h){alert("Please select both an athlete and an event");return}const t=o.filter(s=>s.drive_url.trim()!=="");if(t.length===0){alert("Please add at least one content item with a Drive URL");return}B(m,h,t,y),alert("Content assigned successfully!"),i([{type:"photo",title:"",drive_url:"",thumbnail_url:""}]),N(""),f(""),u()},U=()=>{if(!r.name||!r.date){alert("Please provide event name and date");return}F(r),c({name:"",date:"",venue:"",org_name:""}),p(!1),u()},R=t=>{const a=t.split(`
`).filter(l=>l.trim()!=="").map(l=>({type:"photo",title:"",drive_url:l.trim(),thumbnail_url:l.trim()}));i([...o,...a])};return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Content Manager"}),e.jsx("p",{className:"text-gray-400",children:"Manage athlete content and access"})]}),e.jsxs("div",{className:"flex items-center gap-4 border-b border-white/10",children:[e.jsxs("button",{onClick:()=>x("upload"),className:`flex items-center gap-2 px-4 py-3 font-semibold transition-all ${d==="upload"?"text-[#e51d1d] border-b-2 border-[#e51d1d]":"text-gray-400 hover:text-white"}`,children:[e.jsx(z,{className:"w-5 h-5"}),e.jsx("span",{children:"Upload Content"})]}),e.jsxs("button",{onClick:()=>x("athletes"),className:`flex items-center gap-2 px-4 py-3 font-semibold transition-all ${d==="athletes"?"text-[#e51d1d] border-b-2 border-[#e51d1d]":"text-gray-400 hover:text-white"}`,children:[e.jsx(D,{className:"w-5 h-5"}),e.jsx("span",{children:"Manage Athletes"})]}),e.jsxs("button",{onClick:()=>x("events"),className:`flex items-center gap-2 px-4 py-3 font-semibold transition-all ${d==="events"?"text-[#e51d1d] border-b-2 border-[#e51d1d]":"text-gray-400 hover:text-white"}`,children:[e.jsx(L,{className:"w-5 h-5"}),e.jsx("span",{children:"Manage Events"})]})]}),d==="upload"&&e.jsxs(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-[#1a1a2e]/50 backdrop-blur-xl border border-white/10 rounded-xl p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-6",children:"Assign Content to Athlete"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Select Athlete"}),e.jsxs("select",{value:m,onChange:t=>N(t.target.value),className:"w-full bg-[#0d0d1a]/50 border border-white/10 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-[#e51d1d]/50",children:[e.jsx("option",{value:"",children:"Choose an athlete..."}),v.map(t=>e.jsxs("option",{value:t.id,children:[t.name," - ",t.email]},t.id))]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Select Event"}),e.jsxs("button",{onClick:()=>p(!w),className:"text-sm text-[#e51d1d] hover:text-red-400 transition-colors flex items-center gap-1",children:[e.jsx(C,{className:"w-4 h-4"}),"New Event"]})]}),w&&e.jsxs("div",{className:"bg-[#0d0d1a]/50 border border-white/10 rounded-lg p-4 mb-4 space-y-3",children:[e.jsx("input",{type:"text",placeholder:"Event name",value:r.name,onChange:t=>c({...r,name:t.target.value}),className:"w-full bg-[#1a1a2e]/50 border border-white/10 rounded px-3 py-2 text-white text-sm"}),e.jsx("input",{type:"date",value:r.date,onChange:t=>c({...r,date:t.target.value}),className:"w-full bg-[#1a1a2e]/50 border border-white/10 rounded px-3 py-2 text-white text-sm"}),e.jsx("input",{type:"text",placeholder:"Venue (optional)",value:r.venue,onChange:t=>c({...r,venue:t.target.value}),className:"w-full bg-[#1a1a2e]/50 border border-white/10 rounded px-3 py-2 text-white text-sm"}),e.jsx("input",{type:"text",placeholder:"Organization name (optional)",value:r.org_name,onChange:t=>c({...r,org_name:t.target.value}),className:"w-full bg-[#1a1a2e]/50 border border-white/10 rounded px-3 py-2 text-white text-sm"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:U,className:"flex-1 bg-[#e51d1d] text-white px-4 py-2 rounded text-sm font-medium hover:bg-red-600 transition-colors",children:"Create Event"}),e.jsx("button",{onClick:()=>p(!1),className:"px-4 py-2 text-gray-400 hover:text-white transition-colors text-sm",children:"Cancel"})]})]}),e.jsxs("select",{value:h,onChange:t=>f(t.target.value),className:"w-full bg-[#0d0d1a]/50 border border-white/10 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-[#e51d1d]/50",children:[e.jsx("option",{value:"",children:"Choose an event..."}),j.map(t=>e.jsxs("option",{value:t.id,children:[t.name," - ",new Date(t.date).toLocaleDateString()]},t.id))]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Package Type"}),e.jsx("div",{className:"grid grid-cols-3 gap-4",children:["match","vip","season"].map(t=>e.jsx("button",{onClick:()=>E(t),className:`px-4 py-3 rounded-lg border-2 transition-all ${y===t?"border-[#e51d1d] bg-[#e51d1d]/20 text-white":"border-white/10 text-gray-400 hover:border-white/30"}`,children:t.charAt(0).toUpperCase()+t.slice(1)},t))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Content Items"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>{const t=prompt("Paste Google Drive URLs (one per line):");t&&R(t)},className:"text-sm text-[#e51d1d] hover:text-red-400 transition-colors flex items-center gap-1",children:[e.jsx(T,{className:"w-4 h-4"}),"Batch Add URLs"]}),e.jsxs("button",{onClick:_,className:"text-sm text-[#e51d1d] hover:text-red-400 transition-colors flex items-center gap-1",children:[e.jsx(C,{className:"w-4 h-4"}),"Add Row"]})]})]}),e.jsx("div",{className:"space-y-3",children:o.map((t,s)=>e.jsxs("div",{className:"grid grid-cols-12 gap-2 items-start",children:[e.jsxs("select",{value:t.type,onChange:a=>b(s,"type",a.target.value),className:"col-span-2 bg-[#0d0d1a]/50 border border-white/10 rounded px-3 py-2 text-white text-sm",children:[e.jsx("option",{value:"photo",children:"Photo"}),e.jsx("option",{value:"video",children:"Video"})]}),e.jsx("input",{type:"text",placeholder:"Title",value:t.title,onChange:a=>b(s,"title",a.target.value),className:"col-span-3 bg-[#0d0d1a]/50 border border-white/10 rounded px-3 py-2 text-white text-sm placeholder:text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Google Drive URL",value:t.drive_url,onChange:a=>b(s,"drive_url",a.target.value),className:"col-span-6 bg-[#0d0d1a]/50 border border-white/10 rounded px-3 py-2 text-white text-sm placeholder:text-gray-500"}),e.jsx("button",{onClick:()=>A(s),className:"col-span-1 p-2 text-red-400 hover:text-red-300 transition-colors",children:e.jsx(I,{className:"w-4 h-4"})})]},s))})]}),e.jsxs("button",{onClick:P,className:"w-full bg-gradient-to-r from-[#e51d1d] to-red-600 text-white font-semibold py-3 rounded-lg hover:from-red-600 hover:to-[#e51d1d] transition-all flex items-center justify-center gap-2",children:[e.jsx(H,{className:"w-5 h-5"}),"Grant Access & Save"]})]}),d==="athletes"&&e.jsx(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-4",children:e.jsx("div",{className:"bg-[#1a1a2e]/50 backdrop-blur-xl border border-white/10 rounded-xl overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-[#0d0d1a]/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-4 text-gray-400 font-semibold",children:"Athlete"}),e.jsx("th",{className:"text-left p-4 text-gray-400 font-semibold",children:"Sport"}),e.jsx("th",{className:"text-center p-4 text-gray-400 font-semibold",children:"Events"}),e.jsx("th",{className:"text-center p-4 text-gray-400 font-semibold",children:"Photos"}),e.jsx("th",{className:"text-center p-4 text-gray-400 font-semibold",children:"Videos"}),e.jsx("th",{className:"text-left p-4 text-gray-400 font-semibold",children:"Contact"})]})}),e.jsx("tbody",{className:"divide-y divide-white/10",children:v.map(t=>{const s=G(t.id);return e.jsxs("tr",{className:"hover:bg-white/5 transition-colors",children:[e.jsx("td",{className:"p-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-white",children:t.name}),t.gym&&e.jsx("div",{className:"text-sm text-gray-400",children:t.gym})]})}),e.jsx("td",{className:"p-4 text-gray-300",children:t.sport}),e.jsx("td",{className:"text-center p-4 text-gray-300",children:s.totalEvents}),e.jsx("td",{className:"text-center p-4 text-green-400",children:s.totalPhotos}),e.jsx("td",{className:"text-center p-4 text-purple-400",children:s.totalVideos}),e.jsx("td",{className:"p-4 text-gray-400 text-sm",children:t.email})]},t.id)})})]})})}),d==="events"&&e.jsx(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-4",children:j.map(t=>{const s=$(t.id),a=[...new Set(s.map(l=>l.athlete_id))];return e.jsxs("div",{className:"bg-[#1a1a2e]/50 backdrop-blur-xl border border-white/10 rounded-xl p-6",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:t.name}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-400",children:[e.jsx("span",{children:new Date(t.date).toLocaleDateString()}),t.venue&&e.jsxs("span",{children:["• ",t.venue]}),t.org_name&&e.jsxs("span",{children:["• ",t.org_name]})]})]})}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-4",children:[e.jsxs("div",{className:"bg-[#0d0d1a]/50 border border-white/10 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:a.length}),e.jsx("div",{className:"text-sm text-gray-400",children:"Athletes"})]}),e.jsxs("div",{className:"bg-[#0d0d1a]/50 border border-white/10 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-green-400",children:s.filter(l=>l.type==="photo").length}),e.jsx("div",{className:"text-sm text-gray-400",children:"Photos"})]}),e.jsxs("div",{className:"bg-[#0d0d1a]/50 border border-white/10 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-400",children:s.filter(l=>l.type==="video").length}),e.jsx("div",{className:"text-sm text-gray-400",children:"Videos"})]})]})]},t.id)})})]})}export{Y as default};
